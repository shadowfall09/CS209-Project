{"items":[{"tags":["java","spring-boot","dependency-injection","yaml"],"answers":[{"tags":[],"owner":{"account_id":3855913,"reputation":433,"user_id":3194858,"accept_rate":100,"display_name":"Andulos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660776002,"creation_date":1660755888,"answer_id":73392406,"question_id":73387863,"body_markdown":"You can have a configuration like below and build the object using values from your yaml file.\r\n\r\n    @Configuration\r\n    public class YourConfiguration {\r\n        @Bean(name = &quot;errors&quot;)\r\n        @ConfigurationProperties(prefix = &quot;errorcodes&quot;)\r\n        public Map&lt;String,Object&gt; errors() { return new HashMap&lt;&gt;() };\r\n        ...\r\n    }\r\n\r\nYou can autowire the configuration class where you need it and get &#39;errors&#39; from the autowired instance.\r\n\r\n    public class SomeOtherClass {\r\n        ...\r\n        @Autowired\r\n        YourConfiguration yourConfiguration;\r\n        ...\r\n        ...\r\n        public &lt;T&gt; someMethod() {\r\n           Map&lt;String,Object&gt; errorsFromYaml = yourConfiguration.errors();\r\n           ...\r\n        }\r\n        ...\r\n    }","title":"Reading a data from error.yml and while storing in a map, it returns null","body":"<p>You can have a configuration like below and build the object using values from your yaml file.</p>\n<pre><code>@Configuration\npublic class YourConfiguration {\n    @Bean(name = &quot;errors&quot;)\n    @ConfigurationProperties(prefix = &quot;errorcodes&quot;)\n    public Map&lt;String,Object&gt; errors() { return new HashMap&lt;&gt;() };\n    ...\n}\n</code></pre>\n<p>You can autowire the configuration class where you need it and get 'errors' from the autowired instance.</p>\n<pre><code>public class SomeOtherClass {\n    ...\n    @Autowired\n    YourConfiguration yourConfiguration;\n    ...\n    ...\n    public &lt;T&gt; someMethod() {\n       Map&lt;String,Object&gt; errorsFromYaml = yourConfiguration.errors();\n       ...\n    }\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":13045424,"reputation":71,"user_id":9427417,"display_name":"swanthri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660776002,"creation_date":1660736482,"question_id":73387863,"body_markdown":"I have to read the data from the error.yml file and store it in a below-structured map. While using the below configuration to store the values, I am getting null. Could someone please help me with this? Thanks!\r\n\r\nConfiguration class:\r\n\r\n&gt; @Configuration @PropertySource(value = &quot;classpath:error.yml &quot;, factory\r\n&gt; = YamlPropertySourceFactory.class) @EnableConfigurationProperties @ConfigurationProperties(prefix = &quot;errorcodes&quot;) @Getter @Slf4j\r\n&gt; @ConstructorBinding public class ErrorService {\r\n&gt; \r\n&gt;   private  Map&lt;String, ApiError&gt; errors = new HashMap&lt;&gt;();\r\n&gt; \r\n&gt; .... }\r\n\r\nerror.yml:\r\nerrorcodes:\r\n  errors:\r\n    ERROR_1:\r\n      code: 1\r\n      message: Internal Server Error\r\n","title":"Reading a data from error.yml and while storing in a map, it returns null","body":"<p>I have to read the data from the error.yml file and store it in a below-structured map. While using the below configuration to store the values, I am getting null. Could someone please help me with this? Thanks!</p>\n<p>Configuration class:</p>\n<blockquote>\n<p>@Configuration @PropertySource(value = &quot;classpath:error.yml &quot;, factory\n= YamlPropertySourceFactory.class) @EnableConfigurationProperties @ConfigurationProperties(prefix = &quot;errorcodes&quot;) @Getter @Slf4j\n@ConstructorBinding public class ErrorService {</p>\n<p>private  Map&lt;String, ApiError&gt; errors = new HashMap&lt;&gt;();</p>\n<p>.... }</p>\n</blockquote>\n<p>error.yml:\nerrorcodes:\nerrors:\nERROR_1:\ncode: 1\nmessage: Internal Server Error</p>\n"},{"tags":["java","spring","spring-boot","unit-testing","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1660774921,"post_id":73395436,"comment_id":129615504,"body_markdown":"read the docs for @WebMvcTest `Using this annotation will disable full auto-configuration and instead apply only configuration relevant to MVC tests (i.e. @Controller, @ControllerAdvice, @JsonComponent, Converter/GenericConverter, Filter, WebMvcConfigurer and HandlerMethodArgumentResolver beans but not @Component, @Service or @Repository beans).` especially the last part... what it does NOT load. https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/web/servlet/WebMvcTest.html","body":"read the docs for @WebMvcTest <code>Using this annotation will disable full auto-configuration and instead apply only configuration relevant to MVC tests (i.e. @Controller, @ControllerAdvice, @JsonComponent, Converter&#47;GenericConverter, Filter, WebMvcConfigurer and HandlerMethodArgumentResolver beans but not @Component, @Service or @Repository beans).</code> especially the last part... what it does NOT load. <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/web/servlet/WebMvcTest.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/api/org/springframew&zwnj;&#8203;ork/&hellip;</a>"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660775051,"post_id":73395436,"comment_id":129615524,"body_markdown":"also, you are aware that spring has full JWT support, so why you have written a custom handling on jwt when all that support is included in spring security, i have no idea. Writing custom security solutions is bad practice","body":"also, you are aware that spring has full JWT support, so why you have written a custom handling on jwt when all that support is included in spring security, i have no idea. Writing custom security solutions is bad practice"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1660775246,"post_id":73395436,"comment_id":129615559,"body_markdown":"Does this answer your question? [Error creating bean with name &#39;securityConfig&#39; defined in file](https://stackoverflow.com/questions/73050028/error-creating-bean-with-name-securityconfig-defined-in-file)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/73050028/error-creating-bean-with-name-securityconfig-defined-in-file\">Error creating bean with name &#39;securityConfig&#39; defined in file</a>"},{"owner":{"account_id":21382966,"reputation":219,"user_id":15748566,"display_name":"devo9191"},"score":0,"creation_date":1660776794,"post_id":73395436,"comment_id":129615832,"body_markdown":"@Toerktumlare I followed a tutorial. I am unsure what to do now, I had many tests that were all working fine before I implemented this obviously using this annotation. Is there a way to refactor the config class so that it doesn&#39;t throw this error? for example I have added the findUserByEmail method to the service class and call that instead which has resolved that but the JwtTokenFilter class is still throwing the error.   Or should I just try to use SpringBootTest\nAutoConfigureMockMvc? thanks.","body":"@Toerktumlare I followed a tutorial. I am unsure what to do now, I had many tests that were all working fine before I implemented this obviously using this annotation. Is there a way to refactor the config class so that it doesn&#39;t throw this error? for example I have added the findUserByEmail method to the service class and call that instead which has resolved that but the JwtTokenFilter class is still throwing the error.   Or should I just try to use SpringBootTest AutoConfigureMockMvc? thanks."},{"owner":{"account_id":21382966,"reputation":219,"user_id":15748566,"display_name":"devo9191"},"score":0,"creation_date":1660777691,"post_id":73395436,"comment_id":129615967,"body_markdown":"@Toerktumlare I am unsure how my tests would work if I didn&#39;t use MvcTest because without it I would need to send bearer token on each request of each test as Spring security would be enabled on for example SpringBootTest / AutoConfigureMockMvc","body":"@Toerktumlare I am unsure how my tests would work if I didn&#39;t use MvcTest because without it I would need to send bearer token on each request of each test as Spring security would be enabled on for example SpringBootTest / AutoConfigureMockMvc"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1660800928,"post_id":73395436,"comment_id":129619279,"body_markdown":"You need an `@MockBean` for the `UserRepository` as well. The `@WebMvcTest` will only construct the web related parts of the application including security. Anything else (the services, repositories etc.) you need to mock. You mocked the `UserService` but you also need a mock of the `UserRepository`.","body":"You need an <code>@MockBean</code> for the <code>UserRepository</code> as well. The <code>@WebMvcTest</code> will only construct the web related parts of the application including security. Anything else (the services, repositories etc.) you need to mock. You mocked the <code>UserService</code> but you also need a mock of the <code>UserRepository</code>."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660825707,"post_id":73395436,"comment_id":129627775,"body_markdown":"i dont know how your tests are supposed to work either, im only telling you what your problem is and why it is not working. Tbh i would suggest you dont just google for tutorial and instead read the spring boot documentation chapter on testing, and read the spring security documentation on testing, and when you have read that you&#39;ll understand what you can do, and then you write your tests/update your tests.","body":"i dont know how your tests are supposed to work either, im only telling you what your problem is and why it is not working. Tbh i would suggest you dont just google for tutorial and instead read the spring boot documentation chapter on testing, and read the spring security documentation on testing, and when you have read that you&#39;ll understand what you can do, and then you write your tests/update your tests."}],"owner":{"account_id":21382966,"reputation":219,"user_id":15748566,"display_name":"devo9191"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1275,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1660774841,"creation_date":1660774283,"question_id":73395436,"body_markdown":"When I run the SpringBoot REST API it works fine, authentication is implemented properly and everything is successful, however, when I try to run any of my unit tests I am getting the following error:\r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nParameter 0 of constructor in com.out.e.config.ApplicationSecurityConfig required a bean of type &#39;com.out.e.dao.auth.UserRepository&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.out.e.dao.auth.UserRepository&#39; in your configuration.\r\n\r\nI have no idea what to do as it seems nonsensical to me that it would function correctly when running properly but not when being tested?\r\n\r\n\r\nSecurity Config:\r\n\r\n    import com.out.e.dao.auth.UserRepository;\r\n    import com.out.e.filter.JwtTokenFilter;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.config.http.SessionCreationPolicy;\r\n    import org.springframework.security.core.userdetails.UsernameNotFoundException;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class ApplicationSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        private final UserRepository userRepository;\r\n    \r\n        private final JwtTokenFilter jwtTokenFilter;\r\n    \r\n        public ApplicationSecurityConfig(final UserRepository userRepository, final JwtTokenFilter jwtTokenFilter) {\r\n            this.userRepository = userRepository;\r\n            this.jwtTokenFilter = jwtTokenFilter;\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(final AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.userDetailsService(username -&gt; userRepository.findByEmail(username)\r\n            .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found with email: &quot; + username))\r\n            );\r\n        }\r\n    \r\n        @Override\r\n        @Bean\r\n        public AuthenticationManager authenticationManagerBean() throws Exception {\r\n            return super.authenticationManagerBean();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(final HttpSecurity httpSecurity) throws Exception {\r\n            httpSecurity.csrf().disable();\r\n            httpSecurity.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n            httpSecurity.exceptionHandling().authenticationEntryPoint(\r\n                    (request, response, authException) -&gt; {\r\n                        response.sendError(HttpServletResponse.SC_UNAUTHORIZED,\r\n                                authException.getMessage());\r\n                    }\r\n            );\r\n            httpSecurity.authorizeRequests()\r\n                    .antMatchers(&quot;/api/v1/auth/**&quot;).permitAll()\r\n                    .anyRequest().authenticated();\r\n    \r\n            httpSecurity.addFilterBefore(jwtTokenFilter, UsernamePasswordAuthenticationFilter.class);\r\n            httpSecurity.cors();\r\n        }\r\n    }\r\n\r\nToken filter:\r\n\r\n    import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\n    import org.springframework.security.core.context.SecurityContextHolder;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.util.ObjectUtils;\r\n    import org.springframework.web.filter.OncePerRequestFilter;\r\n    \r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.IOException;\r\n\r\n    @Component\r\n    public class JwtTokenFilter extends OncePerRequestFilter {\r\n    \r\n    \r\n        private final JwtTokenUtil jwtTokenUtil;\r\n    \r\n        public JwtTokenFilter(final JwtTokenUtil jwtTokenUtil) {\r\n            this.jwtTokenUtil = jwtTokenUtil;\r\n        }\r\n    \r\n        @Override\r\n        protected void doFilterInternal(final HttpServletRequest request, final HttpServletResponse response, final FilterChain filterChain) throws ServletException, IOException {\r\n            if (!hasAuthorisationHeader(request)) {\r\n                filterChain.doFilter(request, response);\r\n                return;\r\n            }\r\n            String accessToken = getAccessToken(request);\r\n    \r\n            if (!jwtTokenUtil.verifyAccessToken(accessToken)) {\r\n                filterChain.doFilter(request, response);\r\n                return;\r\n            }\r\n    \r\n            setAuthenticationContext(accessToken, request);\r\n            filterChain.doFilter(request, response);\r\n        }\r\n    \r\n        private void setAuthenticationContext(String accessToken, HttpServletRequest request) {\r\n            UserDetails userDetails = getUserDetails(accessToken);\r\n    \r\n            UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails, null, null);\r\n    \r\n            authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n    \r\n            SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        }\r\n    \r\n        private UserDetails getUserDetails(String accessToken) {\r\n            User userDetails = new User();\r\n            //Subject was split into userId and email by a comma so split the comma.\r\n            String[] subjects = jwtTokenUtil.getSubject(accessToken).split(&quot;,&quot;);\r\n    \r\n            userDetails.setUserID(Long.valueOf(subjects[0]));\r\n            userDetails.setEmail(subjects[1]);\r\n    \r\n            return userDetails;\r\n        }\r\n    \r\n        private boolean hasAuthorisationHeader(HttpServletRequest httpServletRequest) {\r\n            String authorizationHeader = httpServletRequest.getHeader(&quot;Authorization&quot;);\r\n            if (ObjectUtils.isEmpty(authorizationHeader) || !authorizationHeader.startsWith(&quot;Bearer&quot;)) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    \r\n        private String getAccessToken(HttpServletRequest httpServletRequest) {\r\n            String authorizationHeader = httpServletRequest.getHeader(&quot;Authorization&quot;);\r\n            String accessToken = authorizationHeader.split(&quot; &quot;)[1].trim();\r\n            System.out.println(&quot;Access token: &quot; + accessToken);\r\n            return accessToken;\r\n        }\r\n    }\r\n\r\nJWT token util:\r\n\r\n    import com.out.e.model.auth.User;\r\n    import io.jsonwebtoken.*;\r\n    import io.jsonwebtoken.security.SignatureException;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import java.util.Date;\r\n\r\n    @Component\r\n    public class JwtTokenUtil {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(JwtTokenUtil.class);\r\n        //24Hours\r\n        private static final long EXPIRATION_DURATION = 24 * 60 * 60 * 1000;\r\n    \r\n        @Value(&quot;${application.jwt.secretKey}&quot;)\r\n        private String secretKey;\r\n    \r\n        public String generateAccessToken(User user) {\r\n            return Jwts.builder()\r\n                    .setSubject(user.getUserID() + &quot;,&quot; + user.getEmail())\r\n                    .setIssuer(&quot;e&quot;)\r\n                    .setIssuedAt(new Date())\r\n                    .setExpiration(new Date(System.currentTimeMillis() + EXPIRATION_DURATION))\r\n                    .signWith(SignatureAlgorithm.HS512, secretKey)\r\n                    .compact();\r\n        }\r\n    \r\n        public boolean verifyAccessToken(String accessToken) {\r\n            try {\r\n                Jwts.parser().setSigningKey(secretKey).parseClaimsJws(accessToken);\r\n                return true;\r\n            } catch (ExpiredJwtException e) {\r\n                LOGGER.error(&quot;JWT Access token is expired.&quot;, e);\r\n            } catch (IllegalArgumentException e) {\r\n                LOGGER.error(&quot;JWT Access token is null or empty.&quot;, e);\r\n            } catch (UnsupportedJwtException e) {\r\n                LOGGER.error(&quot;JWT Access token is not supported.&quot;, e);\r\n            } catch (SignatureException e) {\r\n                LOGGER.error(&quot;Failure occurred while during signature process.&quot;, e);\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        public String getSubject(String accessToken) {\r\n            return parseClaims(accessToken).getSubject();\r\n        }\r\n    \r\n        private Claims parseClaims(String accessToken) {\r\n            return Jwts.parserBuilder()\r\n                    .setSigningKey(secretKey)\r\n                    .build()\r\n                    .parseClaimsJws(accessToken)\r\n                    .getBody();\r\n        }\r\n    }\r\n\r\nRepositroy:\r\n\r\n    import com.out.e.model.auth.User;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.data.jpa.repository.Query;\r\n    import org.springframework.data.repository.query.Param;\r\n    \r\n    import java.util.List;\r\n    import java.util.Optional;\r\n    \r\n    public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n    \r\n        /**\r\n         * Finds a user by email.\r\n         * @param email email.\r\n         * @return the user.\r\n         */\r\n        Optional&lt;User&gt; findByEmail(final String email);\r\n    }\r\n\r\nAn example test class just in case:\r\n\r\n    \r\n    import org.junit.jupiter.api.Test;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\r\n    import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\r\n    import org.springframework.boot.test.mock.mockito.MockBean;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.test.web.servlet.MockMvc;\r\n    import org.springframework.test.web.servlet.MvcResult;\r\n    \r\n    import static org.junit.jupiter.api.Assertions.assertEquals;\r\n    import static org.mockito.Mockito.doReturn;\r\n    import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;\r\n    import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\r\n    \r\n    @AutoConfigureMockMvc\r\n    @WebMvcTest(controllers = AuthController.class)\r\n    public class AuthControllerTests {\r\n    \r\n        @Autowired\r\n        private MockMvc mockMvc;\r\n    \r\n        @Autowired\r\n        private ObjectMapper objectMapper;\r\n    \r\n        @MockBean\r\n        private AuthService authService;\r\n    \r\n        @MockBean\r\n        private UserService userService;\r\n    \r\n        @Test\r\n        public void givenAUserDoesNotExistSignUpSuccessfully() throws Exception {\r\n            SignUpRequest signUpRequest = new SignUpRequest(&quot;tim@outlook.com&quot;, &quot;Password-1&quot;, &quot;Tim&quot;, &quot;Nook&quot;, &quot;London&quot;, 3000);\r\n            MsgResponse msgResponse = new MsgResponse(&quot;A new user has been successfully registered.&quot;);\r\n            doReturn(msgResponse).when(authService).signUpUser(signUpRequest);\r\n    \r\n            String json = objectMapper.writeValueAsString(signUpRequest);\r\n    \r\n            MvcResult mvcResult = mockMvc.perform(post(&quot;/api/v1/auth/login&quot;)\r\n                    .contentType(MediaType.APPLICATION_JSON)\r\n                    .accept(MediaType.APPLICATION_JSON)\r\n                    .content(json))\r\n                    .andExpect(status().isOk())\r\n                    .andReturn();\r\n    \r\n            String response = mvcResult.getResponse().getContentAsString();\r\n            assertEquals(&quot;A new user has been successfully registered.&quot;, response);\r\n        }\r\n    \r\n    }\r\n\r\nAny help would be greatly appreciated, thanks!\r\n\r\nEdit: Add error full:\r\n\r\n    \r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;applicationSecurityConfig&#39; defined in file [H:\\classes\\java\\main\\com\\out\\e\\config\\ApplicationSecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.out.e.dao.auth.UserRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\r\n","title":"Application failed to start - Security Config required a bean of type &#39;userRepository&#39; that could not be found. Only fails like this on tests?","body":"<p>When I run the SpringBoot REST API it works fine, authentication is implemented properly and everything is successful, however, when I try to run any of my unit tests I am getting the following error:</p>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>Parameter 0 of constructor in com.out.e.config.ApplicationSecurityConfig required a bean of type 'com.out.e.dao.auth.UserRepository' that could not be found.</p>\n<p>Action:</p>\n<p>Consider defining a bean of type 'com.out.e.dao.auth.UserRepository' in your configuration.</p>\n<p>I have no idea what to do as it seems nonsensical to me that it would function correctly when running properly but not when being tested?</p>\n<p>Security Config:</p>\n<pre><code>import com.out.e.dao.auth.UserRepository;\nimport com.out.e.filter.JwtTokenFilter;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class ApplicationSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private final UserRepository userRepository;\n\n    private final JwtTokenFilter jwtTokenFilter;\n\n    public ApplicationSecurityConfig(final UserRepository userRepository, final JwtTokenFilter jwtTokenFilter) {\n        this.userRepository = userRepository;\n        this.jwtTokenFilter = jwtTokenFilter;\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Override\n    protected void configure(final AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(username -&gt; userRepository.findByEmail(username)\n        .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found with email: &quot; + username))\n        );\n    }\n\n    @Override\n    @Bean\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Override\n    protected void configure(final HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.csrf().disable();\n        httpSecurity.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        httpSecurity.exceptionHandling().authenticationEntryPoint(\n                (request, response, authException) -&gt; {\n                    response.sendError(HttpServletResponse.SC_UNAUTHORIZED,\n                            authException.getMessage());\n                }\n        );\n        httpSecurity.authorizeRequests()\n                .antMatchers(&quot;/api/v1/auth/**&quot;).permitAll()\n                .anyRequest().authenticated();\n\n        httpSecurity.addFilterBefore(jwtTokenFilter, UsernamePasswordAuthenticationFilter.class);\n        httpSecurity.cors();\n    }\n}\n</code></pre>\n<p>Token filter:</p>\n<pre><code>import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.util.ObjectUtils;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\n@Component\npublic class JwtTokenFilter extends OncePerRequestFilter {\n\n\n    private final JwtTokenUtil jwtTokenUtil;\n\n    public JwtTokenFilter(final JwtTokenUtil jwtTokenUtil) {\n        this.jwtTokenUtil = jwtTokenUtil;\n    }\n\n    @Override\n    protected void doFilterInternal(final HttpServletRequest request, final HttpServletResponse response, final FilterChain filterChain) throws ServletException, IOException {\n        if (!hasAuthorisationHeader(request)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n        String accessToken = getAccessToken(request);\n\n        if (!jwtTokenUtil.verifyAccessToken(accessToken)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        setAuthenticationContext(accessToken, request);\n        filterChain.doFilter(request, response);\n    }\n\n    private void setAuthenticationContext(String accessToken, HttpServletRequest request) {\n        UserDetails userDetails = getUserDetails(accessToken);\n\n        UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails, null, null);\n\n        authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n    }\n\n    private UserDetails getUserDetails(String accessToken) {\n        User userDetails = new User();\n        //Subject was split into userId and email by a comma so split the comma.\n        String[] subjects = jwtTokenUtil.getSubject(accessToken).split(&quot;,&quot;);\n\n        userDetails.setUserID(Long.valueOf(subjects[0]));\n        userDetails.setEmail(subjects[1]);\n\n        return userDetails;\n    }\n\n    private boolean hasAuthorisationHeader(HttpServletRequest httpServletRequest) {\n        String authorizationHeader = httpServletRequest.getHeader(&quot;Authorization&quot;);\n        if (ObjectUtils.isEmpty(authorizationHeader) || !authorizationHeader.startsWith(&quot;Bearer&quot;)) {\n            return false;\n        }\n        return true;\n    }\n\n    private String getAccessToken(HttpServletRequest httpServletRequest) {\n        String authorizationHeader = httpServletRequest.getHeader(&quot;Authorization&quot;);\n        String accessToken = authorizationHeader.split(&quot; &quot;)[1].trim();\n        System.out.println(&quot;Access token: &quot; + accessToken);\n        return accessToken;\n    }\n}\n</code></pre>\n<p>JWT token util:</p>\n<pre><code>import com.out.e.model.auth.User;\nimport io.jsonwebtoken.*;\nimport io.jsonwebtoken.security.SignatureException;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Date;\n\n@Component\npublic class JwtTokenUtil {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(JwtTokenUtil.class);\n    //24Hours\n    private static final long EXPIRATION_DURATION = 24 * 60 * 60 * 1000;\n\n    @Value(&quot;${application.jwt.secretKey}&quot;)\n    private String secretKey;\n\n    public String generateAccessToken(User user) {\n        return Jwts.builder()\n                .setSubject(user.getUserID() + &quot;,&quot; + user.getEmail())\n                .setIssuer(&quot;e&quot;)\n                .setIssuedAt(new Date())\n                .setExpiration(new Date(System.currentTimeMillis() + EXPIRATION_DURATION))\n                .signWith(SignatureAlgorithm.HS512, secretKey)\n                .compact();\n    }\n\n    public boolean verifyAccessToken(String accessToken) {\n        try {\n            Jwts.parser().setSigningKey(secretKey).parseClaimsJws(accessToken);\n            return true;\n        } catch (ExpiredJwtException e) {\n            LOGGER.error(&quot;JWT Access token is expired.&quot;, e);\n        } catch (IllegalArgumentException e) {\n            LOGGER.error(&quot;JWT Access token is null or empty.&quot;, e);\n        } catch (UnsupportedJwtException e) {\n            LOGGER.error(&quot;JWT Access token is not supported.&quot;, e);\n        } catch (SignatureException e) {\n            LOGGER.error(&quot;Failure occurred while during signature process.&quot;, e);\n        }\n        return false;\n    }\n\n    public String getSubject(String accessToken) {\n        return parseClaims(accessToken).getSubject();\n    }\n\n    private Claims parseClaims(String accessToken) {\n        return Jwts.parserBuilder()\n                .setSigningKey(secretKey)\n                .build()\n                .parseClaimsJws(accessToken)\n                .getBody();\n    }\n}\n</code></pre>\n<p>Repositroy:</p>\n<pre><code>import com.out.e.model.auth.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\n\nimport java.util.List;\nimport java.util.Optional;\n\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n\n    /**\n     * Finds a user by email.\n     * @param email email.\n     * @return the user.\n     */\n    Optional&lt;User&gt; findByEmail(final String email);\n}\n</code></pre>\n<p>An example test class just in case:</p>\n<pre><code>import org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.MvcResult;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.Mockito.doReturn;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n\n@AutoConfigureMockMvc\n@WebMvcTest(controllers = AuthController.class)\npublic class AuthControllerTests {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @MockBean\n    private AuthService authService;\n\n    @MockBean\n    private UserService userService;\n\n    @Test\n    public void givenAUserDoesNotExistSignUpSuccessfully() throws Exception {\n        SignUpRequest signUpRequest = new SignUpRequest(&quot;tim@outlook.com&quot;, &quot;Password-1&quot;, &quot;Tim&quot;, &quot;Nook&quot;, &quot;London&quot;, 3000);\n        MsgResponse msgResponse = new MsgResponse(&quot;A new user has been successfully registered.&quot;);\n        doReturn(msgResponse).when(authService).signUpUser(signUpRequest);\n\n        String json = objectMapper.writeValueAsString(signUpRequest);\n\n        MvcResult mvcResult = mockMvc.perform(post(&quot;/api/v1/auth/login&quot;)\n                .contentType(MediaType.APPLICATION_JSON)\n                .accept(MediaType.APPLICATION_JSON)\n                .content(json))\n                .andExpect(status().isOk())\n                .andReturn();\n\n        String response = mvcResult.getResponse().getContentAsString();\n        assertEquals(&quot;A new user has been successfully registered.&quot;, response);\n    }\n\n}\n</code></pre>\n<p>Any help would be greatly appreciated, thanks!</p>\n<p>Edit: Add error full:</p>\n<p>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'applicationSecurityConfig' defined in file [H:\\classes\\java\\main\\com\\out\\e\\config\\ApplicationSecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.out.e.dao.auth.UserRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":12577079,"reputation":119,"user_id":9220564,"display_name":"dcm50"},"score":0,"creation_date":1660750351,"post_id":73390873,"comment_id":129607712,"body_markdown":"I tried adding ```bar.getCategoryAxis().setOrientation(AxisOrientation.MAX_MIN);``` but the value axis went to the top.","body":"I tried adding <code>bar.getCategoryAxis().setOrientation(AxisOrientation.MAX_MIN&zwnj;&#8203;);</code> but the value axis went to the top."}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660750794,"creation_date":1660750794,"answer_id":73391289,"question_id":73390873,"body_markdown":"The default orientation of a y-axis in a chart is bottom-up. On bottom, where x-axis crosses, is min and on top is max. That is what you have.\r\n\r\nThis can be changed using [XDDFChartAxis.setOrientation](https://poi.apache.org/apidocs/5.0/org/apache/poi/xddf/usermodel/chart/XDDFChartAxis.html#setOrientation-org.apache.poi.xddf.usermodel.chart.AxisOrientation-) -&gt; [AxisOrientation.MAX_MIN](https://poi.apache.org/apidocs/5.0/org/apache/poi/xddf/usermodel/chart/AxisOrientation.html#MAX_MIN). In your case:\r\n\r\n    ...\r\n    XDDFCategoryAxis bottomAxis = ...\r\n    ...\r\n    bottomAxis.setOrientation(AxisOrientation.MAX_MIN);\r\n    ...\r\n\r\nBut you set `leftAxis.setCrosses(AxisCrosses.AUTO_ZERO);`. So, because of min (zero) is at top now, `AxisCrosses.AUTO_ZERO` is at top now also. So you need also setting:\r\n\r\n    ...\r\n    XDDFValueAxis leftAxis = ...\r\n    ...\r\n    leftAxis.setCrosses(AxisCrosses.MAX);\r\n    ...\r\n\r\n","title":"How to change the orientation in the chart","body":"<p>The default orientation of a y-axis in a chart is bottom-up. On bottom, where x-axis crosses, is min and on top is max. That is what you have.</p>\n<p>This can be changed using <a href=\"https://poi.apache.org/apidocs/5.0/org/apache/poi/xddf/usermodel/chart/XDDFChartAxis.html#setOrientation-org.apache.poi.xddf.usermodel.chart.AxisOrientation-\" rel=\"nofollow noreferrer\">XDDFChartAxis.setOrientation</a> -&gt; <a href=\"https://poi.apache.org/apidocs/5.0/org/apache/poi/xddf/usermodel/chart/AxisOrientation.html#MAX_MIN\" rel=\"nofollow noreferrer\">AxisOrientation.MAX_MIN</a>. In your case:</p>\n<pre><code>...\nXDDFCategoryAxis bottomAxis = ...\n...\nbottomAxis.setOrientation(AxisOrientation.MAX_MIN);\n...\n</code></pre>\n<p>But you set <code>leftAxis.setCrosses(AxisCrosses.AUTO_ZERO);</code>. So, because of min (zero) is at top now, <code>AxisCrosses.AUTO_ZERO</code> is at top now also. So you need also setting:</p>\n<pre><code>...\nXDDFValueAxis leftAxis = ...\n...\nleftAxis.setCrosses(AxisCrosses.MAX);\n...\n</code></pre>\n"}],"owner":{"account_id":12577079,"reputation":119,"user_id":9220564,"display_name":"dcm50"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":73391289,"answer_count":1,"score":-1,"last_activity_date":1660772426,"creation_date":1660748938,"question_id":73390873,"body_markdown":"Is there a way to change the orientation of a chart? I need to put the chart and the table in the same orientation. As you can see, the top element of the chart is the `client 8` and the top element of the table is `client 1`. I need both the be exactly in the same order. How can I do that? What change should I do?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/fbmxH.png\r\nThis is the partial of the code which is generating the chart above.\r\n\r\n```\r\n    public ByteArrayInputStream generateFileDetailsWithChart(ClientDataObjectRequest clientDataObjectRequest) {\r\n\r\n        ByteArrayOutputStream file = new ByteArrayOutputStream();\r\n\r\n        try{\r\n            try(XSSFWorkbook workbook = new XSSFWorkbook()){\r\n                XSSFSheet sheet = workbook.createSheet(clientDataObjectRequest.getMetricName());\r\n                Font headerFont = workbook.createFont();\r\n                headerFont.setBold(true);\r\n                headerFont.setUnderline(Font.U_SINGLE);\r\n                CellStyle headerCellStyle = workbook.createCellStyle();\r\n                headerCellStyle.setFillBackgroundColor(IndexedColors.GREY_40_PERCENT.getIndex());\r\n                headerCellStyle.setFont(headerFont);\r\n\r\n                XSSFDrawing drawing = sheet.createDrawingPatriarch();\r\n                XSSFClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, 2, 1, 15, 15 + clientDataObjectRequest.getCompanyChartData().size());\r\n\r\n                Row headerRow = sheet.createRow(anchor.getRow2() + 1);\r\n                headerRow.createCell(0).setCellValue(Constants.CLIENT_NAME);\r\n                headerRow.createCell(1).setCellValue(&quot;Value (&quot;+clientDataObjectRequest.getDataFormatCodeValue()+&quot;)&quot;);\r\n\r\n                for (int i = 0; i &lt; headerRow.getLastCellNum(); i++) {\r\n                    headerRow.getCell(i).setCellStyle(headerCellStyle);\r\n                }\r\n\r\n                CellStyle rowCellStyle = workbook.createCellStyle();\r\n\r\n                if (clientDataObjectRequest.getDataFormatCodeValue().equalsIgnoreCase(Constants.DATA_FORMAT_PERCENTAGE)) {\r\n                    rowCellStyle.setDataFormat(workbook.createDataFormat().getFormat(&quot;0.00%&quot;));\r\n                    for (int i = 0; i &lt; clientDataObjectRequest.getCompanyChartData().size(); i++) {\r\n                        Row row = sheet.createRow(anchor.getRow2() + 2 + i);\r\n                        row.createCell(0).setCellValue(clientDataObjectRequest.getCompanyChartData().get(i).getClientName());\r\n                        row.createCell(1).setCellValue(clientDataObjectRequest.getCompanyChartData().get(i).getValue()/100);\r\n                        //rowCellStyle.setDataFormat(HSSFDataFormat.getBuiltinFormat(&quot;#,##0.00%&quot;));\r\n                        row.getCell(1).setCellStyle(rowCellStyle);\r\n                    }\r\n                }\r\n\r\n                if (clientDataObjectRequest.getDataFormatCodeValue().equalsIgnoreCase(Constants.DATA_FORMAT_CURRENCY)) {\r\n                    rowCellStyle.setDataFormat(workbook.createDataFormat().getFormat(&quot;$0.00&quot;));\r\n                    for (int i = 0; i &lt; clientDataObjectRequest.getCompanyChartData().size(); i++) {\r\n                        Row row = sheet.createRow(anchor.getRow2() + 2 + i);\r\n                        row.createCell(0).setCellValue(clientDataObjectRequest.getCompanyChartData().get(i).getClientName());\r\n                        row.createCell(1).setCellValue(clientDataObjectRequest.getCompanyChartData().get(i).getValue());\r\n                        row.getCell(1).setCellStyle(rowCellStyle);\r\n                    }\r\n                }\r\n\r\n                XSSFChart chart = drawing.createChart(anchor);\r\n                chart.setTitleText(clientDataObjectRequest.getMetricName());\r\n                chart.getCTChart().getTitle().getTx().getRich().getPArray(0).getRArray(0).getRPr().setSz(2000);\r\n                chart.setTitleOverlay(false);\r\n\r\n                //XDDFChartLegend legend = chart.getOrAddLegend();\r\n                //legend.setPosition(LegendPosition.TOP_RIGHT);\r\n\r\n                XDDFCategoryAxis bottomAxis = chart.createCategoryAxis(AxisPosition.BOTTOM);\r\n                XDDFTitle title = getOrSetAxisTitle(bottomAxis);\r\n                title.setOverlay(false);\r\n                title.setText(Constants.CLIENT_NAME);\r\n                title.getBody().getParagraph(0).addDefaultRunProperties().setFontSize(12d);\r\n\r\n\r\n                XDDFValueAxis leftAxis = chart.createValueAxis(AxisPosition.LEFT);\r\n                title = getOrSetAxisTitle(leftAxis);\r\n                title.setOverlay(false);\r\n                title.setText(&quot;Value (&quot;+clientDataObjectRequest.getDataFormatCodeValue()+&quot;)&quot;);\r\n                title.getBody().getParagraph(0).addDefaultRunProperties().setFontSize(12d);\r\n\r\n                if(clientDataObjectRequest.getDataFormatCodeValue().equalsIgnoreCase(Constants.DATA_FORMAT_PERCENTAGE)) {\r\n                    leftAxis.setMaximum(1.0);\r\n                }\r\n                leftAxis.setCrosses(AxisCrosses.AUTO_ZERO);\r\n                leftAxis.setCrossBetween(AxisCrossBetween.BETWEEN);\r\n\r\n                sheet.shiftColumns(0,1,2);\r\n                sheet.autoSizeColumn(2);\r\n                sheet.autoSizeColumn(3);\r\n\r\n                XDDFDataSource&lt;String&gt; clientNames = XDDFDataSourcesFactory.fromStringCellRange(sheet,\r\n                        new CellRangeAddress(anchor.getRow2() + 2,anchor.getRow2() + 1 + clientDataObjectRequest.getCompanyChartData().size(),2,2));\r\n\r\n                XDDFNumericalDataSource&lt;Double&gt; values = XDDFDataSourcesFactory.fromNumericCellRange(sheet,\r\n                        new CellRangeAddress(anchor.getRow2() + 2,anchor.getRow2() + 1 + clientDataObjectRequest.getCompanyChartData().size(),3,3));\r\n\r\n                XDDFChartData data = chart.createData(ChartTypes.BAR, bottomAxis, leftAxis);\r\n                XDDFChartData.Series series = data.addSeries(clientNames, values);\r\n                series.setTitle(clientDataObjectRequest.getMetricName(), null);\r\n\r\n                setDataLabels(series,7,true); // pos 7 = INT_OUT_END, showVal = true\r\n\r\n                chart.plot(data);\r\n\r\n                XDDFBarChartData bar = (XDDFBarChartData) data;\r\n                bar.setBarDirection(BarDirection.BAR);\r\n\r\n                solidFillSeries(data, 0, PresetColor.BLUE);\r\n\r\n                Row bottomRow = sheet.createRow(anchor.getRow2() + clientDataObjectRequest.getCompanyChartData().size() + 3);\r\n                bottomRow.createCell(0).setCellValue(Constants.COPYRIGHT_FOOTER);\r\n\r\n                workbook.write(file);\r\n            }\r\n        } catch (Exception e){\r\n\r\n        }\r\n\r\n        return new ByteArrayInputStream(file.toByteArray());\r\n    }\r\n```\r\n\r\nAnd this is the body which my controller is receiving.\r\n\r\n```\r\n{\r\n    &quot;metricName&quot;:&quot;Turnover Rate&quot;,\r\n    &quot;dataFormatCodeValue&quot;: &quot;currency&quot;,\r\n    &quot;clientDataRequest&quot;:[\r\n       {\r\n          &quot;clientName&quot;:&quot;client 1&quot;,\r\n          &quot;value&quot;:&quot;1&quot;\r\n       },\r\n       {\r\n          &quot;clientName&quot;:&quot;client 2&quot;,\r\n          &quot;value&quot;:&quot;2&quot;\r\n       },\r\n       {\r\n          &quot;clientName&quot;:&quot;client 3&quot;,\r\n          &quot;value&quot;:&quot;3&quot;\r\n       },\r\n       {\r\n          &quot;clientName&quot;:&quot;client 4&quot;,\r\n          &quot;value&quot;:&quot;4&quot;\r\n       },\r\n       {\r\n          &quot;clientName&quot;:&quot;client 5555555&quot;,\r\n          &quot;value&quot;:&quot;5&quot;\r\n       },\r\n       {\r\n          &quot;clientName&quot;:&quot;client 6&quot;,\r\n          &quot;value&quot;:&quot;6&quot;\r\n       },\r\n       {\r\n          &quot;clientName&quot;:&quot;client 7&quot;,\r\n          &quot;value&quot;:&quot;7&quot;\r\n       },\r\n       {\r\n          &quot;clientName&quot;:&quot;client 8&quot;,\r\n          &quot;value&quot;:&quot;8.5&quot;\r\n       }\r\n    ]\r\n}\r\n```","title":"How to change the orientation in the chart","body":"<p>Is there a way to change the orientation of a chart? I need to put the chart and the table in the same orientation. As you can see, the top element of the chart is the <code>client 8</code> and the top element of the table is <code>client 1</code>. I need both the be exactly in the same order. How can I do that? What change should I do?</p>\n<p><a href=\"https://i.stack.imgur.com/fbmxH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fbmxH.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the partial of the code which is generating the chart above.</p>\n<pre><code>    public ByteArrayInputStream generateFileDetailsWithChart(ClientDataObjectRequest clientDataObjectRequest) {\n\n        ByteArrayOutputStream file = new ByteArrayOutputStream();\n\n        try{\n            try(XSSFWorkbook workbook = new XSSFWorkbook()){\n                XSSFSheet sheet = workbook.createSheet(clientDataObjectRequest.getMetricName());\n                Font headerFont = workbook.createFont();\n                headerFont.setBold(true);\n                headerFont.setUnderline(Font.U_SINGLE);\n                CellStyle headerCellStyle = workbook.createCellStyle();\n                headerCellStyle.setFillBackgroundColor(IndexedColors.GREY_40_PERCENT.getIndex());\n                headerCellStyle.setFont(headerFont);\n\n                XSSFDrawing drawing = sheet.createDrawingPatriarch();\n                XSSFClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, 2, 1, 15, 15 + clientDataObjectRequest.getCompanyChartData().size());\n\n                Row headerRow = sheet.createRow(anchor.getRow2() + 1);\n                headerRow.createCell(0).setCellValue(Constants.CLIENT_NAME);\n                headerRow.createCell(1).setCellValue(&quot;Value (&quot;+clientDataObjectRequest.getDataFormatCodeValue()+&quot;)&quot;);\n\n                for (int i = 0; i &lt; headerRow.getLastCellNum(); i++) {\n                    headerRow.getCell(i).setCellStyle(headerCellStyle);\n                }\n\n                CellStyle rowCellStyle = workbook.createCellStyle();\n\n                if (clientDataObjectRequest.getDataFormatCodeValue().equalsIgnoreCase(Constants.DATA_FORMAT_PERCENTAGE)) {\n                    rowCellStyle.setDataFormat(workbook.createDataFormat().getFormat(&quot;0.00%&quot;));\n                    for (int i = 0; i &lt; clientDataObjectRequest.getCompanyChartData().size(); i++) {\n                        Row row = sheet.createRow(anchor.getRow2() + 2 + i);\n                        row.createCell(0).setCellValue(clientDataObjectRequest.getCompanyChartData().get(i).getClientName());\n                        row.createCell(1).setCellValue(clientDataObjectRequest.getCompanyChartData().get(i).getValue()/100);\n                        //rowCellStyle.setDataFormat(HSSFDataFormat.getBuiltinFormat(&quot;#,##0.00%&quot;));\n                        row.getCell(1).setCellStyle(rowCellStyle);\n                    }\n                }\n\n                if (clientDataObjectRequest.getDataFormatCodeValue().equalsIgnoreCase(Constants.DATA_FORMAT_CURRENCY)) {\n                    rowCellStyle.setDataFormat(workbook.createDataFormat().getFormat(&quot;$0.00&quot;));\n                    for (int i = 0; i &lt; clientDataObjectRequest.getCompanyChartData().size(); i++) {\n                        Row row = sheet.createRow(anchor.getRow2() + 2 + i);\n                        row.createCell(0).setCellValue(clientDataObjectRequest.getCompanyChartData().get(i).getClientName());\n                        row.createCell(1).setCellValue(clientDataObjectRequest.getCompanyChartData().get(i).getValue());\n                        row.getCell(1).setCellStyle(rowCellStyle);\n                    }\n                }\n\n                XSSFChart chart = drawing.createChart(anchor);\n                chart.setTitleText(clientDataObjectRequest.getMetricName());\n                chart.getCTChart().getTitle().getTx().getRich().getPArray(0).getRArray(0).getRPr().setSz(2000);\n                chart.setTitleOverlay(false);\n\n                //XDDFChartLegend legend = chart.getOrAddLegend();\n                //legend.setPosition(LegendPosition.TOP_RIGHT);\n\n                XDDFCategoryAxis bottomAxis = chart.createCategoryAxis(AxisPosition.BOTTOM);\n                XDDFTitle title = getOrSetAxisTitle(bottomAxis);\n                title.setOverlay(false);\n                title.setText(Constants.CLIENT_NAME);\n                title.getBody().getParagraph(0).addDefaultRunProperties().setFontSize(12d);\n\n\n                XDDFValueAxis leftAxis = chart.createValueAxis(AxisPosition.LEFT);\n                title = getOrSetAxisTitle(leftAxis);\n                title.setOverlay(false);\n                title.setText(&quot;Value (&quot;+clientDataObjectRequest.getDataFormatCodeValue()+&quot;)&quot;);\n                title.getBody().getParagraph(0).addDefaultRunProperties().setFontSize(12d);\n\n                if(clientDataObjectRequest.getDataFormatCodeValue().equalsIgnoreCase(Constants.DATA_FORMAT_PERCENTAGE)) {\n                    leftAxis.setMaximum(1.0);\n                }\n                leftAxis.setCrosses(AxisCrosses.AUTO_ZERO);\n                leftAxis.setCrossBetween(AxisCrossBetween.BETWEEN);\n\n                sheet.shiftColumns(0,1,2);\n                sheet.autoSizeColumn(2);\n                sheet.autoSizeColumn(3);\n\n                XDDFDataSource&lt;String&gt; clientNames = XDDFDataSourcesFactory.fromStringCellRange(sheet,\n                        new CellRangeAddress(anchor.getRow2() + 2,anchor.getRow2() + 1 + clientDataObjectRequest.getCompanyChartData().size(),2,2));\n\n                XDDFNumericalDataSource&lt;Double&gt; values = XDDFDataSourcesFactory.fromNumericCellRange(sheet,\n                        new CellRangeAddress(anchor.getRow2() + 2,anchor.getRow2() + 1 + clientDataObjectRequest.getCompanyChartData().size(),3,3));\n\n                XDDFChartData data = chart.createData(ChartTypes.BAR, bottomAxis, leftAxis);\n                XDDFChartData.Series series = data.addSeries(clientNames, values);\n                series.setTitle(clientDataObjectRequest.getMetricName(), null);\n\n                setDataLabels(series,7,true); // pos 7 = INT_OUT_END, showVal = true\n\n                chart.plot(data);\n\n                XDDFBarChartData bar = (XDDFBarChartData) data;\n                bar.setBarDirection(BarDirection.BAR);\n\n                solidFillSeries(data, 0, PresetColor.BLUE);\n\n                Row bottomRow = sheet.createRow(anchor.getRow2() + clientDataObjectRequest.getCompanyChartData().size() + 3);\n                bottomRow.createCell(0).setCellValue(Constants.COPYRIGHT_FOOTER);\n\n                workbook.write(file);\n            }\n        } catch (Exception e){\n\n        }\n\n        return new ByteArrayInputStream(file.toByteArray());\n    }\n</code></pre>\n<p>And this is the body which my controller is receiving.</p>\n<pre><code>{\n    &quot;metricName&quot;:&quot;Turnover Rate&quot;,\n    &quot;dataFormatCodeValue&quot;: &quot;currency&quot;,\n    &quot;clientDataRequest&quot;:[\n       {\n          &quot;clientName&quot;:&quot;client 1&quot;,\n          &quot;value&quot;:&quot;1&quot;\n       },\n       {\n          &quot;clientName&quot;:&quot;client 2&quot;,\n          &quot;value&quot;:&quot;2&quot;\n       },\n       {\n          &quot;clientName&quot;:&quot;client 3&quot;,\n          &quot;value&quot;:&quot;3&quot;\n       },\n       {\n          &quot;clientName&quot;:&quot;client 4&quot;,\n          &quot;value&quot;:&quot;4&quot;\n       },\n       {\n          &quot;clientName&quot;:&quot;client 5555555&quot;,\n          &quot;value&quot;:&quot;5&quot;\n       },\n       {\n          &quot;clientName&quot;:&quot;client 6&quot;,\n          &quot;value&quot;:&quot;6&quot;\n       },\n       {\n          &quot;clientName&quot;:&quot;client 7&quot;,\n          &quot;value&quot;:&quot;7&quot;\n       },\n       {\n          &quot;clientName&quot;:&quot;client 8&quot;,\n          &quot;value&quot;:&quot;8.5&quot;\n       }\n    ]\n}\n</code></pre>\n"},{"tags":["java","hibernate","maven","spring-boot","ehcache-3"],"answers":[{"tags":[],"owner":{"account_id":4731873,"reputation":1070,"user_id":3827273,"display_name":"Haran"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1554440490,"creation_date":1554440490,"answer_id":55528515,"question_id":55528443,"body_markdown":"Shouldn&#39;t be `ehcache` instead of `jcache`?\r\n```\r\nspring.cache.ehcache.config= {ehcache config location}\r\n```","title":"ehcache3 - why cache doesn&#39;t expire?","body":"<p>Shouldn't be <code>ehcache</code> instead of <code>jcache</code>?</p>\n\n<pre><code>spring.cache.ehcache.config= {ehcache config location}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14446626,"reputation":2578,"user_id":10435528,"display_name":"devatherock"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660772333,"creation_date":1660772333,"answer_id":73395190,"question_id":55528443,"body_markdown":"In case this helps anyone else, in my case what I was missing was the `spring-boot-starter-cache` dependency. Without that dependency, caching was working but no expiration was happening as without the customizations from `spring-boot`, spring was probably caching using a `ConcurrentHashMap` instead of `ehcache`, as mentioned in this [caching guide](https://spring.io/guides/gs/caching/). All the gradle dependencies I needed to add are below:\r\n\r\n```groovy\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-cache&#39;\r\n    implementation group: &#39;org.ehcache&#39;, name: &#39;ehcache&#39;\r\n    implementation group: &#39;javax.cache&#39;, name: &#39;cache-api&#39;\r\n\r\n    implementation group: &#39;javax.xml.bind&#39;, name: &#39;jaxb-api&#39;, version: &#39;2.3.1&#39; // To read XML config\r\n    implementation group: &#39;com.sun.xml.bind&#39;, name: &#39;jaxb-impl&#39;, version: &#39;2.3.6&#39; // To read XML config\r\n```\r\n\r\nA sample application that successfully caches and expires entries using ehcache can be found on [github](https://github.com/devatherock/spring-boot-demo/tree/ehcache)","title":"ehcache3 - why cache doesn&#39;t expire?","body":"<p>In case this helps anyone else, in my case what I was missing was the <code>spring-boot-starter-cache</code> dependency. Without that dependency, caching was working but no expiration was happening as without the customizations from <code>spring-boot</code>, spring was probably caching using a <code>ConcurrentHashMap</code> instead of <code>ehcache</code>, as mentioned in this <a href=\"https://spring.io/guides/gs/caching/\" rel=\"nofollow noreferrer\">caching guide</a>. All the gradle dependencies I needed to add are below:</p>\n<pre><code>    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-cache'\n    implementation group: 'org.ehcache', name: 'ehcache'\n    implementation group: 'javax.cache', name: 'cache-api'\n\n    implementation group: 'javax.xml.bind', name: 'jaxb-api', version: '2.3.1' // To read XML config\n    implementation group: 'com.sun.xml.bind', name: 'jaxb-impl', version: '2.3.6' // To read XML config\n</code></pre>\n<p>A sample application that successfully caches and expires entries using ehcache can be found on <a href=\"https://github.com/devatherock/spring-boot-demo/tree/ehcache\" rel=\"nofollow noreferrer\">github</a></p>\n"}],"owner":{"account_id":7153337,"reputation":97,"user_id":5466636,"display_name":"thehespe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":974,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660772333,"creation_date":1554439887,"question_id":55528443,"body_markdown":"I want to cache a few of my dao queries. And it works, but cache doesn&#39;t expire. What I&#39;m doing wrong?\r\n\r\nMy ehcache.xml:\r\n```\r\n&lt;config xmlns=&#39;http://www.ehcache.org/v3&#39;\r\n\t\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\txmlns:jsr107=&quot;http://www.ehcache.org/v3/jsr107&quot;\r\n\t\txsi:schemaLocation=&quot;http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd\r\n\t\t\t\t\t\t\thttp://www.ehcache.org/v3/jsr107 http://www.ehcache.org/schema/ehcache-107-ext-3.0.xsd&quot;&gt;\r\n \r\n    &lt;cache alias=&quot;test&quot;&gt;\r\n    &lt;key-type&gt;java.lang.String&lt;/key-type&gt;\r\n    &lt;value-type&gt;xxx.model.SignalValueType&lt;/value-type&gt;\r\n        &lt;expiry&gt;\r\n            &lt;ttl unit=&quot;seconds&quot;&gt;5&lt;/ttl&gt;\r\n        &lt;/expiry&gt;\r\n  \r\n        &lt;resources&gt;\r\n            &lt;heap unit=&quot;entries&quot;&gt;100&lt;/heap&gt;\r\n            &lt;offheap unit=&quot;MB&quot;&gt;10&lt;/offheap&gt;\r\n        &lt;/resources&gt;\r\n    &lt;/cache&gt; \r\n&lt;/config&gt;\r\n```\r\n\r\nIn application.properties I have entry:\r\n```\r\nspring.cache.jcache.config=classpath:ehcache.xml\r\n```\r\n\r\nIn pom:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;javax.cache&lt;/groupId&gt;\r\n    &lt;artifactId&gt;cache-api&lt;/artifactId&gt;\r\n    &lt;scope&gt;runtime&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\r\n    &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAnd my query:\r\n```\r\n@Cacheable(value = &quot;test&quot;, key = &quot;#code&quot;)\r\n@Override\r\npublic SignalValueType getSignalValueType(String code) {\t\t \r\n  SignalValueType signalType = (SignalValueType) sf.getCurrentSession()\r\n.createQuery(&quot;FROM SignalValueType svt WHERE svt.code = :code&quot;).setParameter(&quot;code&quot;, code)\r\n.uniqueResult();\r\n\r\n return signalType;\r\n}\r\n```\r\n\r\nI expect 5 seconds expiring, but after this time (and longer) query is still cached. What I&#39;m doing wrong?","title":"ehcache3 - why cache doesn&#39;t expire?","body":"<p>I want to cache a few of my dao queries. And it works, but cache doesn't expire. What I'm doing wrong?</p>\n\n<p>My ehcache.xml:</p>\n\n<pre><code>&lt;config xmlns='http://www.ehcache.org/v3'\n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n        xmlns:jsr107=\"http://www.ehcache.org/v3/jsr107\"\n        xsi:schemaLocation=\"http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd\n                            http://www.ehcache.org/v3/jsr107 http://www.ehcache.org/schema/ehcache-107-ext-3.0.xsd\"&gt;\n\n    &lt;cache alias=\"test\"&gt;\n    &lt;key-type&gt;java.lang.String&lt;/key-type&gt;\n    &lt;value-type&gt;xxx.model.SignalValueType&lt;/value-type&gt;\n        &lt;expiry&gt;\n            &lt;ttl unit=\"seconds\"&gt;5&lt;/ttl&gt;\n        &lt;/expiry&gt;\n\n        &lt;resources&gt;\n            &lt;heap unit=\"entries\"&gt;100&lt;/heap&gt;\n            &lt;offheap unit=\"MB\"&gt;10&lt;/offheap&gt;\n        &lt;/resources&gt;\n    &lt;/cache&gt; \n&lt;/config&gt;\n</code></pre>\n\n<p>In application.properties I have entry:</p>\n\n<pre><code>spring.cache.jcache.config=classpath:ehcache.xml\n</code></pre>\n\n<p>In pom:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.cache&lt;/groupId&gt;\n    &lt;artifactId&gt;cache-api&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\n    &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>And my query:</p>\n\n<pre><code>@Cacheable(value = \"test\", key = \"#code\")\n@Override\npublic SignalValueType getSignalValueType(String code) {         \n  SignalValueType signalType = (SignalValueType) sf.getCurrentSession()\n.createQuery(\"FROM SignalValueType svt WHERE svt.code = :code\").setParameter(\"code\", code)\n.uniqueResult();\n\n return signalType;\n}\n</code></pre>\n\n<p>I expect 5 seconds expiring, but after this time (and longer) query is still cached. What I'm doing wrong?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":15910041,"reputation":592,"user_id":11480221,"display_name":"AddeusExMachina"},"score":2,"creation_date":1660768744,"post_id":73394617,"comment_id":129613990,"body_markdown":"If you make a constructor private it doesn&#39;t mean you can&#39;t create an instance of that class: you can do it in the class itself. What do you need exactly?","body":"If you make a constructor private it doesn&#39;t mean you can&#39;t create an instance of that class: you can do it in the class itself. What do you need exactly?"},{"owner":{"account_id":11520020,"reputation":37,"user_id":8442130,"display_name":"harbk"},"score":0,"creation_date":1660769031,"post_id":73394617,"comment_id":129614070,"body_markdown":"You&#39;re right. I forgot it. I want to make sure that the new word cannot be used.","body":"You&#39;re right. I forgot it. I want to make sure that the new word cannot be used."},{"owner":{"account_id":15910041,"reputation":592,"user_id":11480221,"display_name":"AddeusExMachina"},"score":0,"creation_date":1660769134,"post_id":73394617,"comment_id":129614099,"body_markdown":"What do you mean with ```the new word cannot be used```?","body":"What do you mean with <code>the new word cannot be used</code>?"},{"owner":{"account_id":11520020,"reputation":37,"user_id":8442130,"display_name":"harbk"},"score":0,"creation_date":1660769317,"post_id":73394617,"comment_id":129614137,"body_markdown":"I want it to be impossible to create objects. Sorry my english is a bit bad.","body":"I want it to be impossible to create objects. Sorry my english is a bit bad."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1660769520,"post_id":73394617,"comment_id":129614183,"body_markdown":"@harbk you mean like making it abstract or making sure only its static methods can be called?","body":"@harbk you mean like making it abstract or making sure only its static methods can be called?"},{"owner":{"account_id":11520020,"reputation":37,"user_id":8442130,"display_name":"harbk"},"score":0,"creation_date":1660769922,"post_id":73394617,"comment_id":129614300,"body_markdown":"new Person(); I just want to prevent it from happening.","body":"new Person(); I just want to prevent it from happening."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1660770069,"post_id":73394617,"comment_id":129614327,"body_markdown":"@harbk then making the constructor `private` is perfectly fine.","body":"@harbk then making the constructor <code>private</code> is perfectly fine."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660771307,"creation_date":1660771307,"answer_id":73395020,"question_id":73394617,"body_markdown":"Making it `private` is the only way to prevent anyone from writing `new Person()`.\r\n\r\nYou can do other things to interfere with object construction, such as throwing exceptions in the constructor, but that all takes effect at runtime.","title":"Is there any other way to prevent an object of a class from being generated in Java?","body":"<p>Making it <code>private</code> is the only way to prevent anyone from writing <code>new Person()</code>.</p>\n<p>You can do other things to interfere with object construction, such as throwing exceptions in the constructor, but that all takes effect at runtime.</p>\n"}],"owner":{"account_id":11520020,"reputation":37,"user_id":8442130,"display_name":"harbk"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660771307,"creation_date":1660768538,"question_id":73394617,"body_markdown":"sorry for asking a very ignorant question. Despite my research, I couldn&#39;t find any results. As it is known, when we make the constructor methods private, we cannot create the object of that class.\r\n\r\n    public class Person{\r\n     private Person(){}\r\n    }\r\n\r\nIs there any other method other than this?","title":"Is there any other way to prevent an object of a class from being generated in Java?","body":"<p>sorry for asking a very ignorant question. Despite my research, I couldn't find any results. As it is known, when we make the constructor methods private, we cannot create the object of that class.</p>\n<pre><code>public class Person{\n private Person(){}\n}\n</code></pre>\n<p>Is there any other method other than this?</p>\n"},{"tags":["java","http","rest","youtube","youtube-api"],"comments":[{"owner":{"account_id":1014043,"reputation":16883,"user_id":1026023,"accept_rate":29,"display_name":"Jeff Ward"},"score":0,"creation_date":1611640919,"post_id":18382388,"comment_id":116509522,"body_markdown":"Just agreeing -- **if you forget the `/upload` prefix** on the URL,  `https://youtube.googleapis.com/upload/youtube/v3/thumbnails/set` it will unhelpfully respond with the 400 `mediaBodyRequired` error, even if the body and `content-type` and binary data are all provided correctly. Maddening.","body":"Just agreeing -- <b>if you forget the <code>&#47;upload</code> prefix</b> on the URL,  <code>https:&#47;&#47;youtube.googleapis.com&#47;upload&#47;youtube&#47;v3&#47;thumbnails&#47;&zwnj;&#8203;set</code> it will unhelpfully respond with the 400 <code>mediaBodyRequired</code> error, even if the body and <code>content-type</code> and binary data are all provided correctly. Maddening."}],"answers":[{"tags":[],"owner":{"account_id":2237670,"reputation":12787,"user_id":1973552,"display_name":"Ibrahim Ulukaya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378501865,"creation_date":1377180523,"answer_id":18382849,"question_id":18382388,"body_markdown":"URL will be fixed.\r\n\r\nYou also need to have specific permission in your channel to set custom thumbnails.\r\n\r\nThere is [PHP][1] and [Python][2] examples in our sample code that works.\r\n\r\nHere&#39;s the Java one, I just wrote and tested, it works.\r\n\r\n    /*\r\n     * Copyright (c) 2013 Google Inc.\r\n     *\r\n     * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except\r\n     * in compliance with the License. You may obtain a copy of the License at\r\n     *\r\n     * http://www.apache.org/licenses/LICENSE-2.0\r\n     *\r\n     * Unless required by applicable law or agreed to in writing, software distributed under the License\r\n     * is distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\r\n     * or implied. See the License for the specific language governing permissions and limitations under\r\n     * the License.\r\n     */\r\n    \r\n    package com.google.api.services.samples.youtube.cmdline.youtube_cmdline_uploadthumbnail_sample;\r\n    \r\n    import com.google.api.client.auth.oauth2.Credential;\r\n    import com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\r\n    import com.google.api.client.extensions.java6.auth.oauth2.FileCredentialStore;\r\n    import com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\r\n    import com.google.api.client.googleapis.json.GoogleJsonResponseException;\r\n    import com.google.api.client.googleapis.media.MediaHttpUploader;\r\n    import com.google.api.client.googleapis.media.MediaHttpUploaderProgressListener;\r\n    import com.google.api.client.http.HttpTransport;\r\n    import com.google.api.client.http.InputStreamContent;\r\n    import com.google.api.client.http.javanet.NetHttpTransport;\r\n    import com.google.api.client.json.JsonFactory;\r\n    import com.google.api.client.json.jackson2.JacksonFactory;\r\n    import com.google.api.services.youtube.YouTube;\r\n    import com.google.api.services.youtube.YouTube.Thumbnails.Set;\r\n    import com.google.api.services.youtube.model.ThumbnailSetResponse;\r\n    import com.google.common.collect.Lists;\r\n    \r\n    import java.io.BufferedInputStream;\r\n    import java.io.BufferedReader;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.util.List;\r\n    \r\n    /**\r\n     * This sample uploads and sets a custom thumbnail for a video by:\r\n     *\r\n     *  1. Uploading a image utilizing &quot;MediaHttpUploader&quot; 2. Setting the uploaded image as a custom\r\n     * thumbnail to the video via &quot;youtube.thumbnails.set&quot; method\r\n     *\r\n     * @author Ibrahim Ulukaya\r\n     */\r\n    public class UploadThumbnail {\r\n    \r\n      /**\r\n       * Global instance of the HTTP transport.\r\n       */\r\n      private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();\r\n    \r\n      /**\r\n       * Global instance of the JSON factory.\r\n       */\r\n      private static final JsonFactory JSON_FACTORY = new JacksonFactory();\r\n    \r\n      /**\r\n       * Global instance of Youtube object to make all API requests.\r\n       */\r\n      private static YouTube youtube;\r\n    \r\n      /* Global instance of the format used for the image being uploaded (MIME type). */\r\n      private static String IMAGE_FILE_FORMAT = &quot;image/png&quot;;\r\n    \r\n    \r\n    \r\n      /**\r\n       * Authorizes the installed application to access user&#39;s protected data.\r\n       *\r\n       * @param scopes list of scopes needed to run youtube upload.\r\n       */\r\n      private static Credential authorize(List&lt;String&gt; scopes) throws IOException {\r\n    \r\n        // Load client secrets.\r\n        GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(JSON_FACTORY,\r\n            new InputStreamReader(UploadThumbnail.class.getResourceAsStream(&quot;/client_secrets.json&quot;)));\r\n    \r\n        // Checks that the defaults have been replaced (Default = &quot;Enter X here&quot;).\r\n        if (clientSecrets.getDetails().getClientId().startsWith(&quot;Enter&quot;)\r\n            || clientSecrets.getDetails().getClientSecret().startsWith(&quot;Enter &quot;)) {\r\n          System.out.println(\r\n              &quot;Enter Client ID and Secret from https://code.google.com/apis/console/?api=youtube&quot;\r\n              + &quot;into youtube-cmdline-uploadthumbnail-sample/src/main/resources/client_secrets.json&quot;);\r\n          System.exit(1);\r\n        }\r\n    \r\n        // Set up file credential store.\r\n        FileCredentialStore credentialStore = new FileCredentialStore(\r\n            new File(System.getProperty(&quot;user.home&quot;), &quot;.credentials/youtube-api-uploadthumbnail.json&quot;),\r\n            JSON_FACTORY);\r\n    \r\n        // Set up authorization code flow.\r\n        GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\r\n            HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, scopes).setCredentialStore(credentialStore)\r\n            .build();\r\n    \r\n        // Build the local server and bind it to port 8080\r\n        LocalServerReceiver localReceiver = new LocalServerReceiver.Builder().setPort(8080).build();\r\n    \r\n        // Authorize.\r\n        return new AuthorizationCodeInstalledApp(flow, localReceiver).authorize(&quot;user&quot;);\r\n      }\r\n    \r\n      /**\r\n       * This is a very simple code sample that looks up a user&#39;s channel, then features the most\r\n       * recently uploaded video in the bottom left hand corner of every single video in the channel.\r\n       *\r\n       * @param args command line args (not used).\r\n       */\r\n      public static void main(String[] args) {\r\n    \r\n        // An OAuth 2 access scope that allows for full read/write access.\r\n        List&lt;String&gt; scopes = Lists.newArrayList(&quot;https://www.googleapis.com/auth/youtube&quot;);\r\n    \r\n        try {\r\n          // Authorization.\r\n          Credential credential = authorize(scopes);\r\n    \r\n          // YouTube object used to make all API requests.\r\n          youtube = new YouTube.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).setApplicationName(\r\n              &quot;youtube-cmdline-addfeaturedvideo-sample&quot;).build();\r\n    \r\n          // Get the user selected video Id.\r\n          String videoId = getVideoIdFromUser();\r\n          System.out.println(&quot;You chose &quot; + videoId + &quot; to upload a thumbnail.&quot;);\r\n    \r\n          // Get the user selected local image file to upload.\r\n          File imageFile = getImageFromUser();\r\n          System.out.println(&quot;You chose &quot; + imageFile + &quot; to upload.&quot;);\r\n    \r\n          InputStreamContent mediaContent = new InputStreamContent(\r\n              IMAGE_FILE_FORMAT, new BufferedInputStream(new FileInputStream(imageFile)));\r\n          mediaContent.setLength(imageFile.length());\r\n    \r\n          // Create a request to set the selected mediaContent as the thumbnail of the selected video.\r\n          Set thumbnailSet = youtube.thumbnails().set(videoId, mediaContent);\r\n    \r\n          // Set the upload type and add event listener.\r\n          MediaHttpUploader uploader = thumbnailSet.getMediaHttpUploader();\r\n    \r\n          /*\r\n           * Sets whether direct media upload is enabled or disabled. True = whole media content is\r\n           * uploaded in a single request. False (default) = resumable media upload protocol to upload\r\n           * in data chunks.\r\n           */\r\n          uploader.setDirectUploadEnabled(false);\r\n    \r\n          MediaHttpUploaderProgressListener progressListener = new MediaHttpUploaderProgressListener() {\r\n            @Override\r\n            public void progressChanged(MediaHttpUploader uploader) throws IOException {\r\n              switch (uploader.getUploadState()) {\r\n                case INITIATION_STARTED:\r\n                  System.out.println(&quot;Initiation Started&quot;);\r\n                  break;\r\n                case INITIATION_COMPLETE:\r\n                  System.out.println(&quot;Initiation Completed&quot;);\r\n                  break;\r\n                case MEDIA_IN_PROGRESS:\r\n                  System.out.println(&quot;Upload in progress&quot;);\r\n                  System.out.println(&quot;Upload percentage: &quot; + uploader.getProgress());\r\n                  break;\r\n                case MEDIA_COMPLETE:\r\n                  System.out.println(&quot;Upload Completed!&quot;);\r\n                  break;\r\n                case NOT_STARTED:\r\n                  System.out.println(&quot;Upload Not Started!&quot;);\r\n                  break;\r\n              }\r\n            }\r\n          };\r\n          uploader.setProgressListener(progressListener);\r\n    \r\n          // Execute upload and set thumbnail.\r\n          ThumbnailSetResponse setResponse = thumbnailSet.execute();\r\n    \r\n          // Print out returned results.\r\n          System.out.println(&quot;\\n================== Uploaded Thumbnail ==================\\n&quot;);\r\n          System.out.println(&quot;  - Url: &quot; + setResponse.getItems().get(0).getDefault().getUrl());\r\n    \r\n        } catch (GoogleJsonResponseException e) {\r\n          System.err.println(&quot;GoogleJsonResponseException code: &quot; + e.getDetails().getCode() + &quot; : &quot;\r\n              + e.getDetails().getMessage());\r\n          e.printStackTrace();\r\n    \r\n        } catch (IOException e) {\r\n          System.err.println(&quot;IOException: &quot; + e.getMessage());\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    \r\n      /*\r\n       * Prompts for a video ID from standard input and returns it.\r\n       */\r\n      private static String getVideoIdFromUser() throws IOException {\r\n    \r\n        String title = &quot;&quot;;\r\n    \r\n        System.out.print(&quot;Please enter a video Id to update: &quot;);\r\n        BufferedReader bReader = new BufferedReader(new InputStreamReader(System.in));\r\n        title = bReader.readLine();\r\n    \r\n        if (title.length() &lt; 1) {\r\n          // If nothing is entered, exits\r\n          System.out.print(&quot;Video Id can&#39;t be empty!&quot;);\r\n          System.exit(1);\r\n        }\r\n    \r\n        return title;\r\n      }\r\n    \r\n      /*\r\n       * Prompts for the path of the image file to upload from standard input and returns it.\r\n       */\r\n      private static File getImageFromUser() throws IOException {\r\n    \r\n        String path = &quot;&quot;;\r\n    \r\n        System.out.print(&quot;Please enter the path of the image file to upload: &quot;);\r\n        BufferedReader bReader = new BufferedReader(new InputStreamReader(System.in));\r\n        path = bReader.readLine();\r\n    \r\n        if (path.length() &lt; 1) {\r\n          // If nothing is entered, exits\r\n          System.out.print(&quot;Path can not be empty!&quot;);\r\n          System.exit(1);\r\n        }\r\n    \r\n        return new File(path);\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://code.google.com/p/youtube-api-samples/source/browse/samples/php/upload_thumbnail.php\r\n  [2]: https://code.google.com/p/youtube-api-samples/source/browse/samples/python/upload_thumbnail.py","title":"Thumbnail upload YouTube API v3 failing","body":"<p>URL will be fixed.</p>\n\n<p>You also need to have specific permission in your channel to set custom thumbnails.</p>\n\n<p>There is <a href=\"https://code.google.com/p/youtube-api-samples/source/browse/samples/php/upload_thumbnail.php\" rel=\"nofollow\">PHP</a> and <a href=\"https://code.google.com/p/youtube-api-samples/source/browse/samples/python/upload_thumbnail.py\" rel=\"nofollow\">Python</a> examples in our sample code that works.</p>\n\n<p>Here's the Java one, I just wrote and tested, it works.</p>\n\n<pre><code>/*\n * Copyright (c) 2013 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except\n * in compliance with the License. You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under the License\n * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n * or implied. See the License for the specific language governing permissions and limitations under\n * the License.\n */\n\npackage com.google.api.services.samples.youtube.cmdline.youtube_cmdline_uploadthumbnail_sample;\n\nimport com.google.api.client.auth.oauth2.Credential;\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\nimport com.google.api.client.extensions.java6.auth.oauth2.FileCredentialStore;\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\nimport com.google.api.client.googleapis.json.GoogleJsonResponseException;\nimport com.google.api.client.googleapis.media.MediaHttpUploader;\nimport com.google.api.client.googleapis.media.MediaHttpUploaderProgressListener;\nimport com.google.api.client.http.HttpTransport;\nimport com.google.api.client.http.InputStreamContent;\nimport com.google.api.client.http.javanet.NetHttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.jackson2.JacksonFactory;\nimport com.google.api.services.youtube.YouTube;\nimport com.google.api.services.youtube.YouTube.Thumbnails.Set;\nimport com.google.api.services.youtube.model.ThumbnailSetResponse;\nimport com.google.common.collect.Lists;\n\nimport java.io.BufferedInputStream;\nimport java.io.BufferedReader;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.List;\n\n/**\n * This sample uploads and sets a custom thumbnail for a video by:\n *\n *  1. Uploading a image utilizing \"MediaHttpUploader\" 2. Setting the uploaded image as a custom\n * thumbnail to the video via \"youtube.thumbnails.set\" method\n *\n * @author Ibrahim Ulukaya\n */\npublic class UploadThumbnail {\n\n  /**\n   * Global instance of the HTTP transport.\n   */\n  private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();\n\n  /**\n   * Global instance of the JSON factory.\n   */\n  private static final JsonFactory JSON_FACTORY = new JacksonFactory();\n\n  /**\n   * Global instance of Youtube object to make all API requests.\n   */\n  private static YouTube youtube;\n\n  /* Global instance of the format used for the image being uploaded (MIME type). */\n  private static String IMAGE_FILE_FORMAT = \"image/png\";\n\n\n\n  /**\n   * Authorizes the installed application to access user's protected data.\n   *\n   * @param scopes list of scopes needed to run youtube upload.\n   */\n  private static Credential authorize(List&lt;String&gt; scopes) throws IOException {\n\n    // Load client secrets.\n    GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(JSON_FACTORY,\n        new InputStreamReader(UploadThumbnail.class.getResourceAsStream(\"/client_secrets.json\")));\n\n    // Checks that the defaults have been replaced (Default = \"Enter X here\").\n    if (clientSecrets.getDetails().getClientId().startsWith(\"Enter\")\n        || clientSecrets.getDetails().getClientSecret().startsWith(\"Enter \")) {\n      System.out.println(\n          \"Enter Client ID and Secret from https://code.google.com/apis/console/?api=youtube\"\n          + \"into youtube-cmdline-uploadthumbnail-sample/src/main/resources/client_secrets.json\");\n      System.exit(1);\n    }\n\n    // Set up file credential store.\n    FileCredentialStore credentialStore = new FileCredentialStore(\n        new File(System.getProperty(\"user.home\"), \".credentials/youtube-api-uploadthumbnail.json\"),\n        JSON_FACTORY);\n\n    // Set up authorization code flow.\n    GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n        HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, scopes).setCredentialStore(credentialStore)\n        .build();\n\n    // Build the local server and bind it to port 8080\n    LocalServerReceiver localReceiver = new LocalServerReceiver.Builder().setPort(8080).build();\n\n    // Authorize.\n    return new AuthorizationCodeInstalledApp(flow, localReceiver).authorize(\"user\");\n  }\n\n  /**\n   * This is a very simple code sample that looks up a user's channel, then features the most\n   * recently uploaded video in the bottom left hand corner of every single video in the channel.\n   *\n   * @param args command line args (not used).\n   */\n  public static void main(String[] args) {\n\n    // An OAuth 2 access scope that allows for full read/write access.\n    List&lt;String&gt; scopes = Lists.newArrayList(\"https://www.googleapis.com/auth/youtube\");\n\n    try {\n      // Authorization.\n      Credential credential = authorize(scopes);\n\n      // YouTube object used to make all API requests.\n      youtube = new YouTube.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).setApplicationName(\n          \"youtube-cmdline-addfeaturedvideo-sample\").build();\n\n      // Get the user selected video Id.\n      String videoId = getVideoIdFromUser();\n      System.out.println(\"You chose \" + videoId + \" to upload a thumbnail.\");\n\n      // Get the user selected local image file to upload.\n      File imageFile = getImageFromUser();\n      System.out.println(\"You chose \" + imageFile + \" to upload.\");\n\n      InputStreamContent mediaContent = new InputStreamContent(\n          IMAGE_FILE_FORMAT, new BufferedInputStream(new FileInputStream(imageFile)));\n      mediaContent.setLength(imageFile.length());\n\n      // Create a request to set the selected mediaContent as the thumbnail of the selected video.\n      Set thumbnailSet = youtube.thumbnails().set(videoId, mediaContent);\n\n      // Set the upload type and add event listener.\n      MediaHttpUploader uploader = thumbnailSet.getMediaHttpUploader();\n\n      /*\n       * Sets whether direct media upload is enabled or disabled. True = whole media content is\n       * uploaded in a single request. False (default) = resumable media upload protocol to upload\n       * in data chunks.\n       */\n      uploader.setDirectUploadEnabled(false);\n\n      MediaHttpUploaderProgressListener progressListener = new MediaHttpUploaderProgressListener() {\n        @Override\n        public void progressChanged(MediaHttpUploader uploader) throws IOException {\n          switch (uploader.getUploadState()) {\n            case INITIATION_STARTED:\n              System.out.println(\"Initiation Started\");\n              break;\n            case INITIATION_COMPLETE:\n              System.out.println(\"Initiation Completed\");\n              break;\n            case MEDIA_IN_PROGRESS:\n              System.out.println(\"Upload in progress\");\n              System.out.println(\"Upload percentage: \" + uploader.getProgress());\n              break;\n            case MEDIA_COMPLETE:\n              System.out.println(\"Upload Completed!\");\n              break;\n            case NOT_STARTED:\n              System.out.println(\"Upload Not Started!\");\n              break;\n          }\n        }\n      };\n      uploader.setProgressListener(progressListener);\n\n      // Execute upload and set thumbnail.\n      ThumbnailSetResponse setResponse = thumbnailSet.execute();\n\n      // Print out returned results.\n      System.out.println(\"\\n================== Uploaded Thumbnail ==================\\n\");\n      System.out.println(\"  - Url: \" + setResponse.getItems().get(0).getDefault().getUrl());\n\n    } catch (GoogleJsonResponseException e) {\n      System.err.println(\"GoogleJsonResponseException code: \" + e.getDetails().getCode() + \" : \"\n          + e.getDetails().getMessage());\n      e.printStackTrace();\n\n    } catch (IOException e) {\n      System.err.println(\"IOException: \" + e.getMessage());\n      e.printStackTrace();\n    }\n  }\n\n  /*\n   * Prompts for a video ID from standard input and returns it.\n   */\n  private static String getVideoIdFromUser() throws IOException {\n\n    String title = \"\";\n\n    System.out.print(\"Please enter a video Id to update: \");\n    BufferedReader bReader = new BufferedReader(new InputStreamReader(System.in));\n    title = bReader.readLine();\n\n    if (title.length() &lt; 1) {\n      // If nothing is entered, exits\n      System.out.print(\"Video Id can't be empty!\");\n      System.exit(1);\n    }\n\n    return title;\n  }\n\n  /*\n   * Prompts for the path of the image file to upload from standard input and returns it.\n   */\n  private static File getImageFromUser() throws IOException {\n\n    String path = \"\";\n\n    System.out.print(\"Please enter the path of the image file to upload: \");\n    BufferedReader bReader = new BufferedReader(new InputStreamReader(System.in));\n    path = bReader.readLine();\n\n    if (path.length() &lt; 1) {\n      // If nothing is entered, exits\n      System.out.print(\"Path can not be empty!\");\n      System.exit(1);\n    }\n\n    return new File(path);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2237670,"reputation":12787,"user_id":1973552,"display_name":"Ibrahim Ulukaya"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1378501934,"creation_date":1378501934,"answer_id":18666666,"question_id":18382388,"body_markdown":"We dug the issue, here are the steps you have to follow if you don&#39;t want to use the library.\r\n\r\n1) POST https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId=VIDEO_ID&amp;uploadType=resumable\r\nwith an empty body\r\n\r\n2) get back the URL in the Location: header of the response, and POST to that URL with Content-Type: image/png and the thumbnail in the body","title":"Thumbnail upload YouTube API v3 failing","body":"<p>We dug the issue, here are the steps you have to follow if you don't want to use the library.</p>\n\n<p>1) POST <a href=\"https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId=VIDEO_ID&amp;uploadType=resumable\" rel=\"nofollow\">https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId=VIDEO_ID&amp;uploadType=resumable</a>\nwith an empty body</p>\n\n<p>2) get back the URL in the Location: header of the response, and POST to that URL with Content-Type: image/png and the thumbnail in the body</p>\n"},{"tags":[],"owner":{"account_id":4560732,"reputation":466,"user_id":3703148,"display_name":"Nick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1429139128,"creation_date":1429139128,"answer_id":29662485,"question_id":18382388,"body_markdown":"The answer given is not even close to correct!  If you post to this URL without an image in the body:\r\n\r\nhttps://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId=VIDEO_ID&amp;uploadType=resumable\r\n\r\nYou will receive this error:\r\n\r\n&quot;400: mediaBodyRequired&quot;\r\n\r\nThis error is described in the YouTube docs at the bottom of this page:\r\n\r\nhttps://developers.google.com/youtube/v3/docs/thumbnails/set\r\n\r\nas:\r\n\r\n&quot;The request does not include the image content.&quot;\r\n\r\nAlthough their documentation leaves a lot of things out (think categoryId), they are dead on here since I just tried the first solution posted by Ibrahim and received the error.  Although he stated not to provide the image data in the body, the documentation and my own research show exactly the opposite.\r\n\r\nThe solution is to post to this URL w/ the image body included.  When doing so, I received this response:\r\n\r\n{ &quot;kind&quot;: &quot;youtube#thumbnailSetResponse&quot;, &quot;etag&quot;: &quot;\\&quot;kYnGHzMaBhcGeLrcKRx6PAIUosY/lcDPfygjJkG-yyzdBp0dKhY2xMY\\&quot;&quot;, &quot;items&quot;: [ { &quot;default&quot;: { &quot;url&quot;: &quot;//i.ytimg.com/vi/fyBx3v1gmbM/default.jpg&quot;, &quot;width&quot;: 120, &quot;height&quot;: 90 }, &quot;medium&quot;: { &quot;url&quot;: &quot;//i.ytimg.com/vi/fyBx3v1gmbM/mqdefault.jpg&quot;, &quot;width&quot;: 320, &quot;height&quot;: 180 }, &quot;high&quot;: { &quot;url&quot;: &quot;//i.ytimg.com/vi/fyBx3v1gmbM/hqdefault.jpg&quot;, &quot;width&quot;: 480, &quot;height&quot;: 360 }, &quot;standard&quot;: { &quot;url&quot;: &quot;//i.ytimg.com/vi/fyBx3v1gmbM/sddefault.jpg&quot;, &quot;width&quot;: 640, &quot;height&quot;: 480 }, &quot;maxres&quot;: { &quot;url&quot;: &quot;//i.ytimg.com/vi/fyBx3v1gmbM/maxresdefault.jpg&quot;, &quot;width&quot;: 1280, &quot;height&quot;: 720 } } ] } \r\n\r\nUnfortunately it&#39;s not actually changing the thumbnail, but I think that is an issue w/ their API server and the queuing of their thumbnail processing.  It does return a successful response though.  No idea why the thumbnail doesn&#39;t change though.","title":"Thumbnail upload YouTube API v3 failing","body":"<p>The answer given is not even close to correct!  If you post to this URL without an image in the body:</p>\n\n<p><a href=\"https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId=VIDEO_ID&amp;uploadType=resumable\" rel=\"nofollow\">https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId=VIDEO_ID&amp;uploadType=resumable</a></p>\n\n<p>You will receive this error:</p>\n\n<p>\"400: mediaBodyRequired\"</p>\n\n<p>This error is described in the YouTube docs at the bottom of this page:</p>\n\n<p><a href=\"https://developers.google.com/youtube/v3/docs/thumbnails/set\" rel=\"nofollow\">https://developers.google.com/youtube/v3/docs/thumbnails/set</a></p>\n\n<p>as:</p>\n\n<p>\"The request does not include the image content.\"</p>\n\n<p>Although their documentation leaves a lot of things out (think categoryId), they are dead on here since I just tried the first solution posted by Ibrahim and received the error.  Although he stated not to provide the image data in the body, the documentation and my own research show exactly the opposite.</p>\n\n<p>The solution is to post to this URL w/ the image body included.  When doing so, I received this response:</p>\n\n<p>{ \"kind\": \"youtube#thumbnailSetResponse\", \"etag\": \"\\\"kYnGHzMaBhcGeLrcKRx6PAIUosY/lcDPfygjJkG-yyzdBp0dKhY2xMY\\\"\", \"items\": [ { \"default\": { \"url\": \"//i.ytimg.com/vi/fyBx3v1gmbM/default.jpg\", \"width\": 120, \"height\": 90 }, \"medium\": { \"url\": \"//i.ytimg.com/vi/fyBx3v1gmbM/mqdefault.jpg\", \"width\": 320, \"height\": 180 }, \"high\": { \"url\": \"//i.ytimg.com/vi/fyBx3v1gmbM/hqdefault.jpg\", \"width\": 480, \"height\": 360 }, \"standard\": { \"url\": \"//i.ytimg.com/vi/fyBx3v1gmbM/sddefault.jpg\", \"width\": 640, \"height\": 480 }, \"maxres\": { \"url\": \"//i.ytimg.com/vi/fyBx3v1gmbM/maxresdefault.jpg\", \"width\": 1280, \"height\": 720 } } ] } </p>\n\n<p>Unfortunately it's not actually changing the thumbnail, but I think that is an issue w/ their API server and the queuing of their thumbnail processing.  It does return a successful response though.  No idea why the thumbnail doesn't change though.</p>\n"},{"tags":[],"owner":{"account_id":26092056,"reputation":11,"user_id":19788790,"display_name":"requestsn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660770379,"creation_date":1660770338,"answer_id":73394871,"question_id":18382388,"body_markdown":"```\r\nimport requests\r\nsession = requests.session()\r\nsession.headers = {&quot;Authorization&quot;: f&quot;Bearer ya29..&quot;,\r\n                   &quot;Content-Type&quot;: &quot;image/png&quot;}\r\n\r\nvid_id = &quot;dQw4w9WgXcQ&quot;  # video ident\r\nedit_url = &quot;https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId={}&amp;uploadType=media&quot;\r\n\r\nsession.post(edit_url.format(vid_id), data=open(&quot;preview.png&quot;, &quot;rb&quot;))\r\n\r\n```\r\n\r\npython code, worked for me ","title":"Thumbnail upload YouTube API v3 failing","body":"<pre><code>import requests\nsession = requests.session()\nsession.headers = {&quot;Authorization&quot;: f&quot;Bearer ya29..&quot;,\n                   &quot;Content-Type&quot;: &quot;image/png&quot;}\n\nvid_id = &quot;dQw4w9WgXcQ&quot;  # video ident\nedit_url = &quot;https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId={}&amp;uploadType=media&quot;\n\nsession.post(edit_url.format(vid_id), data=open(&quot;preview.png&quot;, &quot;rb&quot;))\n\n</code></pre>\n<p>python code, worked for me</p>\n"}],"owner":{"account_id":1314996,"reputation":874,"user_id":1262091,"accept_rate":100,"display_name":"Dennis Fischer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5278,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":18666666,"answer_count":4,"score":2,"last_activity_date":1660770379,"creation_date":1377179437,"question_id":18382388,"body_markdown":"The YouTube API v3 is horribly documented. I&#39;ve already reported numerous bugs multiple times but no one reacts.\nI still have to use this API to upload thumbnails.\nThe guide states:\n&gt; POST https://www.googleapis.com/youtube/v3/thumbnails/set\n&gt;\n&gt; Auth scopes: \n&gt; \n&gt; - https://www.googleapis.com/auth/youtubepartner\n&gt; - https://www.googleapis.com/auth/youtube.upload\n&gt; - https://www.googleapis.com/auth/youtube\n&gt; \n&gt; Parameters: \n&gt;\n&gt; - videoId:    string  The videoId parameter specifies a YouTube video ID for which the custom video thumbnail is being provided.\n\nFirst of all - **the url is wrong**. It has to be `https://www.googleapis.com/upload/youtube/v3/thumbnails/set`.\nNow following code, it uses `Unirest`:\n\n    final HttpResponse&lt;String&gt; response = Unirest.post(&quot;https://www.googleapis.com/upload/youtube/v3/thumbnails/set&quot;)\n                        .header(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;)\n                        .header(&quot;Authorization&quot;, accountService.getAuthentication(account).getHeader())\n                        .field(&quot;videoId&quot;, videoid)\n                        .field(&quot;thumbnail&quot;, thumbnail)\n                        .asString();\n\nThe received response: \n\n    {\n     &quot;error&quot;: {\n      &quot;errors&quot;: [\n       {\n        &quot;domain&quot;: &quot;global&quot;,\n        &quot;reason&quot;: &quot;required&quot;,\n        &quot;message&quot;: &quot;Required parameter: videoId&quot;,\n        &quot;locationType&quot;: &quot;parameter&quot;,\n        &quot;location&quot;: &quot;videoId&quot;\n       }\n      ],\n      &quot;code&quot;: 400,\n      &quot;message&quot;: &quot;Required parameter: videoId&quot;\n     }\n    }\n\nHow can this be? The videoId is set!\nAnyone already played with this part of the API?\n\nI can change the request to\n\n    Unirest.post(&quot;https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId=&quot; + videoid)\n                        .header(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;)\n                        .header(&quot;Authorization&quot;, accountService.getAuthentication(account).getHeader())\n                        .field(&quot;mediaUpload&quot;, thumbnail)\n                        .asString();\n\nThis will throw me this error:\n\n    {\n     &quot;error&quot;: {\n      &quot;errors&quot;: [\n       {\n        &quot;domain&quot;: &quot;global&quot;,\n        &quot;reason&quot;: &quot;backendError&quot;,\n        &quot;message&quot;: &quot;Backend Error&quot;\n       }\n      ],\n      &quot;code&quot;: 503,\n      &quot;message&quot;: &quot;Backend Error&quot;\n     }\n    }\n\nEdit:\nSame request with URL posted by Ibrahim Ulukaya (the original url from the reference guide):\n\n    {\n     &quot;error&quot;: {\n      &quot;errors&quot;: [\n       {\n        &quot;domain&quot;: &quot;global&quot;,\n        &quot;reason&quot;: &quot;wrongUrlForUpload&quot;,\n        &quot;message&quot;: &quot;Uploads must be sent to the upload URL. Re-send this request to https://www.googleapis.com/upload/youtube/v3/thumbnails/set&quot;\n       }\n      ],\n      &quot;code&quot;: 400,\n      &quot;message&quot;: &quot;Uploads must be sent to the upload URL. Re-send this request to https://www.googleapis.com/upload/youtube/v3/thumbnails/set&quot;\n     }\n    }\n\n","title":"Thumbnail upload YouTube API v3 failing","body":"<p>The YouTube API v3 is horribly documented. I've already reported numerous bugs multiple times but no one reacts.\nI still have to use this API to upload thumbnails.\nThe guide states:</p>\n<blockquote>\n<p>POST <a href=\"https://www.googleapis.com/youtube/v3/thumbnails/set\" rel=\"nofollow noreferrer\">https://www.googleapis.com/youtube/v3/thumbnails/set</a></p>\n<p>Auth scopes:</p>\n<ul>\n<li><a href=\"https://www.googleapis.com/auth/youtubepartner\" rel=\"nofollow noreferrer\">https://www.googleapis.com/auth/youtubepartner</a></li>\n<li><a href=\"https://www.googleapis.com/auth/youtube.upload\" rel=\"nofollow noreferrer\">https://www.googleapis.com/auth/youtube.upload</a></li>\n<li><a href=\"https://www.googleapis.com/auth/youtube\" rel=\"nofollow noreferrer\">https://www.googleapis.com/auth/youtube</a></li>\n</ul>\n<p>Parameters:</p>\n<ul>\n<li>videoId:    string  The videoId parameter specifies a YouTube video ID for which the custom video thumbnail is being provided.</li>\n</ul>\n</blockquote>\n<p>First of all - <strong>the url is wrong</strong>. It has to be <code>https://www.googleapis.com/upload/youtube/v3/thumbnails/set</code>.\nNow following code, it uses <code>Unirest</code>:</p>\n<pre><code>final HttpResponse&lt;String&gt; response = Unirest.post(&quot;https://www.googleapis.com/upload/youtube/v3/thumbnails/set&quot;)\n                    .header(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;)\n                    .header(&quot;Authorization&quot;, accountService.getAuthentication(account).getHeader())\n                    .field(&quot;videoId&quot;, videoid)\n                    .field(&quot;thumbnail&quot;, thumbnail)\n                    .asString();\n</code></pre>\n<p>The received response:</p>\n<pre><code>{\n &quot;error&quot;: {\n  &quot;errors&quot;: [\n   {\n    &quot;domain&quot;: &quot;global&quot;,\n    &quot;reason&quot;: &quot;required&quot;,\n    &quot;message&quot;: &quot;Required parameter: videoId&quot;,\n    &quot;locationType&quot;: &quot;parameter&quot;,\n    &quot;location&quot;: &quot;videoId&quot;\n   }\n  ],\n  &quot;code&quot;: 400,\n  &quot;message&quot;: &quot;Required parameter: videoId&quot;\n }\n}\n</code></pre>\n<p>How can this be? The videoId is set!\nAnyone already played with this part of the API?</p>\n<p>I can change the request to</p>\n<pre><code>Unirest.post(&quot;https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId=&quot; + videoid)\n                    .header(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;)\n                    .header(&quot;Authorization&quot;, accountService.getAuthentication(account).getHeader())\n                    .field(&quot;mediaUpload&quot;, thumbnail)\n                    .asString();\n</code></pre>\n<p>This will throw me this error:</p>\n<pre><code>{\n &quot;error&quot;: {\n  &quot;errors&quot;: [\n   {\n    &quot;domain&quot;: &quot;global&quot;,\n    &quot;reason&quot;: &quot;backendError&quot;,\n    &quot;message&quot;: &quot;Backend Error&quot;\n   }\n  ],\n  &quot;code&quot;: 503,\n  &quot;message&quot;: &quot;Backend Error&quot;\n }\n}\n</code></pre>\n<p>Edit:\nSame request with URL posted by Ibrahim Ulukaya (the original url from the reference guide):</p>\n<pre><code>{\n &quot;error&quot;: {\n  &quot;errors&quot;: [\n   {\n    &quot;domain&quot;: &quot;global&quot;,\n    &quot;reason&quot;: &quot;wrongUrlForUpload&quot;,\n    &quot;message&quot;: &quot;Uploads must be sent to the upload URL. Re-send this request to https://www.googleapis.com/upload/youtube/v3/thumbnails/set&quot;\n   }\n  ],\n  &quot;code&quot;: 400,\n  &quot;message&quot;: &quot;Uploads must be sent to the upload URL. Re-send this request to https://www.googleapis.com/upload/youtube/v3/thumbnails/set&quot;\n }\n}\n</code></pre>\n"},{"tags":["java","class","oop","service","static"],"comments":[{"owner":{"account_id":8657191,"reputation":452,"user_id":6481061,"display_name":"Moataz Abdelnasser"},"score":3,"creation_date":1656372374,"post_id":72779198,"comment_id":128551321,"body_markdown":"I think you&#39;re asked to provide something like `ItemService.getItemService()` to return a singleton instance of your class. A *singleton* is a design pattern where you make sure there&#39;s only one instance of your object. You can do that by defining a `private static final ItemService service = new ItemService()`, making sure `ItemService`&#39;s constructor is private, and returning the static instance from the method above. Otherwise, you can create the singleton instance lazily.","body":"I think you&#39;re asked to provide something like <code>ItemService.getItemService()</code> to return a singleton instance of your class. A <i>singleton</i> is a design pattern where you make sure there&#39;s only one instance of your object. You can do that by defining a <code>private static final ItemService service = new ItemService()</code>, making sure <code>ItemService</code>&#39;s constructor is private, and returning the static instance from the method above. Otherwise, you can create the singleton instance lazily."},{"owner":{"account_id":8657191,"reputation":452,"user_id":6481061,"display_name":"Moataz Abdelnasser"},"score":0,"creation_date":1656372913,"post_id":72779198,"comment_id":128551407,"body_markdown":"Additionally, a static field is one that&#39;s defined in the containing class&#39;s scope. That is, there&#39;s basically only one version of that instance per class. It&#39;s the most common way to implement the singleton pattern: have an instance of your object as a static field.","body":"Additionally, a static field is one that&#39;s defined in the containing class&#39;s scope. That is, there&#39;s basically only one version of that instance per class. It&#39;s the most common way to implement the singleton pattern: have an instance of your object as a static field."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1656373914,"post_id":72779198,"comment_id":128551563,"body_markdown":"@MoatazAbdelnasser A static field is a field that is defined as `static`. Not all fields defined at class scope are static.","body":"@MoatazAbdelnasser A static field is a field that is defined as <code>static</code>. Not all fields defined at class scope are static."},{"owner":{"account_id":8657191,"reputation":452,"user_id":6481061,"display_name":"Moataz Abdelnasser"},"score":0,"creation_date":1656374664,"post_id":72779198,"comment_id":128551679,"body_markdown":"@user207421 It seems I&#39;ve used the wrong wording. Scope rather means  visibility/validity and not uniqueness. What I meant was that static fields are per-class variables rather than per-instance variables. Thanks for the correction!","body":"@user207421 It seems I&#39;ve used the wrong wording. Scope rather means  visibility/validity and not uniqueness. What I meant was that static fields are per-class variables rather than per-instance variables. Thanks for the correction!"},{"owner":{"account_id":8282594,"reputation":75,"user_id":6226767,"display_name":"Ebillson GRAND JEAN"},"score":0,"creation_date":1656376160,"post_id":72779198,"comment_id":128551884,"body_markdown":"@Moataz Abdelnasser\nAre you certain I can do something like `rivate static final ItemService service = new ItemService()`? I am not sure I can since my constructor is private. I understand the part where you say I am expected to do something like `ItemService.getItemService()` that being said.","body":"@Moataz Abdelnasser Are you certain I can do something like <code>rivate static final ItemService service = new ItemService()</code>? I am not sure I can since my constructor is private. I understand the part where you say I am expected to do something like <code>ItemService.getItemService()</code> that being said."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1656376354,"post_id":72779198,"comment_id":128551916,"body_markdown":"@EbillsonGRANDJEAN In the time it took you to formulate that question, which may never be answered, you could have tried it and answered it for yourself. Asking trivial questions here is not an efficient procedure.","body":"@EbillsonGRANDJEAN In the time it took you to formulate that question, which may never be answered, you could have tried it and answered it for yourself. Asking trivial questions here is not an efficient procedure."},{"owner":{"account_id":8657191,"reputation":452,"user_id":6481061,"display_name":"Moataz Abdelnasser"},"score":0,"creation_date":1656376476,"post_id":72779198,"comment_id":128551929,"body_markdown":"@EbillsonGRANDJEAN You&#39;ll define the `service` field *inside* the class and return it from `getItemService`. A private constructor can certainly be called inside the defining class.","body":"@EbillsonGRANDJEAN You&#39;ll define the <code>service</code> field <i>inside</i> the class and return it from <code>getItemService</code>. A private constructor can certainly be called inside the defining class."},{"owner":{"account_id":8282594,"reputation":75,"user_id":6226767,"display_name":"Ebillson GRAND JEAN"},"score":0,"creation_date":1656376690,"post_id":72779198,"comment_id":128551954,"body_markdown":"@user207421 I had already tried it when I asked the question. I was just looking for clarity and I wanted to reach a specific point which is when I declare a list as `List&lt;Item&gt; list = new ArrayList()&lt;&gt;;`  why should I add the `static` keyword in front of it and should that variable be delcared as private or public? Again I am trying to have great understanding there. My code is already working but I want to know how and why.","body":"@user207421 I had already tried it when I asked the question. I was just looking for clarity and I wanted to reach a specific point which is when I declare a list as <code>List&lt;Item&gt; list = new ArrayList()&lt;&gt;;</code>  why should I add the <code>static</code> keyword in front of it and should that variable be delcared as private or public? Again I am trying to have great understanding there. My code is already working but I want to know how and why."},{"owner":{"account_id":8282594,"reputation":75,"user_id":6226767,"display_name":"Ebillson GRAND JEAN"},"score":0,"creation_date":1656377065,"post_id":72779198,"comment_id":128552005,"body_markdown":"@Moataz Abdelnasser Ok, I got it. Thank you.","body":"@Moataz Abdelnasser Ok, I got it. Thank you."},{"owner":{"account_id":8657191,"reputation":452,"user_id":6481061,"display_name":"Moataz Abdelnasser"},"score":2,"creation_date":1656377107,"post_id":72779198,"comment_id":128552011,"body_markdown":"I believe what @user207421 meant was that you should try to find answers for your questions before posting them here. This is pretty basic stuff, for which google will certainly do. Just google &#39;What is a static variable in Java&#39;.","body":"I believe what @user207421 meant was that you should try to find answers for your questions before posting them here. This is pretty basic stuff, for which google will certainly do. Just google &#39;What is a static variable in Java&#39;."},{"owner":{"account_id":8282594,"reputation":75,"user_id":6226767,"display_name":"Ebillson GRAND JEAN"},"score":0,"creation_date":1656377411,"post_id":72779198,"comment_id":128552054,"body_markdown":"@Moataz Abdelnasser I got it. I had already googled it. I just tend to value interactions more than reading. Anyway thanks to @@user207421 as well","body":"@Moataz Abdelnasser I got it. I had already googled it. I just tend to value interactions more than reading. Anyway thanks to @@user207421 as well"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1656378876,"post_id":72779198,"comment_id":128552220,"body_markdown":"If you had already tried it you would have known that it was possible. So why exactly did you ask whether it was possible? Or else you didn&#39;t try it, and you should have. All this is the sort of time-wasting that I am trying to train you out of. It simply does not make sense to ask a question you can answer 100% correctly for yourself. You might never get an answer; you might get a wrong answer; or you might get several different answers with no way to choose between them ... except trying it for yourself.","body":"If you had already tried it you would have known that it was possible. So why exactly did you ask whether it was possible? Or else you didn&#39;t try it, and you should have. All this is the sort of time-wasting that I am trying to train you out of. It simply does not make sense to ask a question you can answer 100% correctly for yourself. You might never get an answer; you might get a wrong answer; or you might get several different answers with no way to choose between them ... except trying it for yourself."},{"owner":{"account_id":8282594,"reputation":75,"user_id":6226767,"display_name":"Ebillson GRAND JEAN"},"score":0,"creation_date":1656385160,"post_id":72779198,"comment_id":128553084,"body_markdown":"@user207421 For the sake of time management you are right","body":"@user207421 For the sake of time management you are right"},{"owner":{"account_id":2395641,"reputation":349,"user_id":2094491,"display_name":"alexcorghencea"},"score":1,"creation_date":1660733856,"post_id":72779198,"comment_id":129600985,"body_markdown":"I believe you question is about OOP. We should think of classes as objects first. What object is a Item? What is an Item Service? What a service does? Abstracted all from real world. Lets take a exact item: a laptop. Ok, makes sense. What is a LaptopService than, what methods does it have? Does it repair only laptops or phones also? Can it be divided in several services? Can we have a ElectronicDevicesService that is abstract and has a repair method, and a LaptopService that implements it?\n- Will be better for service methods to have objects as paramethers of laptop if it is a LaptopService.","body":"I believe you question is about OOP. We should think of classes as objects first. What object is a Item? What is an Item Service? What a service does? Abstracted all from real world. Lets take a exact item: a laptop. Ok, makes sense. What is a LaptopService than, what methods does it have? Does it repair only laptops or phones also? Can it be divided in several services? Can we have a ElectronicDevicesService that is abstract and has a repair method, and a LaptopService that implements it? - Will be better for service methods to have objects as paramethers of laptop if it is a LaptopService."}],"owner":{"account_id":8282594,"reputation":75,"user_id":6226767,"display_name":"Ebillson GRAND JEAN"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":598,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1660769691,"creation_date":1656371914,"question_id":72779198,"body_markdown":"Let&#39;s say I&#39;m working on a class called `ItemService` and I am asked to create those methods inside `ItemService`:\r\n\r\n    public void addItem(String param1, String param2)\r\n    public Item getItem(String param1)\r\n    public Collection&lt;Item&gt; getAllItems()\r\n\r\nIt starts getting confusing, when I am asked to provide a static reference and when I am said that this will make my service singleton objects, those two things are a little fuzzy for me. I would appreciate if someone could enlighten me. I am trying to understand core OOP concepts of Java.","title":"What does it mean to provide a static reference in the context of a Java Program?","body":"<p>Let's say I'm working on a class called <code>ItemService</code> and I am asked to create those methods inside <code>ItemService</code>:</p>\n<pre><code>public void addItem(String param1, String param2)\npublic Item getItem(String param1)\npublic Collection&lt;Item&gt; getAllItems()\n</code></pre>\n<p>It starts getting confusing, when I am asked to provide a static reference and when I am said that this will make my service singleton objects, those two things are a little fuzzy for me. I would appreciate if someone could enlighten me. I am trying to understand core OOP concepts of Java.</p>\n"},{"tags":["java","maven","cucumber"],"answers":[{"tags":[],"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660769548,"creation_date":1660769548,"answer_id":73394762,"question_id":73394344,"body_markdown":"You&#39;ll have to write custom code for this. Fortunately this is relatively easy with the JUnit Platform API (JUnit 5).\r\n\r\nhttps://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine#rerunning-failed-scenarios\r\n\r\n```\r\npackage com.example;\r\n\r\nimport org.junit.platform.engine.discovery.DiscoverySelectors;\r\nimport org.junit.platform.engine.discovery.UniqueIdSelector;\r\nimport org.junit.platform.launcher.Launcher;\r\nimport org.junit.platform.launcher.LauncherDiscoveryRequest;\r\nimport org.junit.platform.launcher.TestIdentifier;\r\nimport org.junit.platform.launcher.core.LauncherFactory;\r\nimport org.junit.platform.launcher.listeners.SummaryGeneratingListener;\r\nimport org.junit.platform.launcher.listeners.TestExecutionSummary.Failure;\r\n\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\n\r\nimport static org.junit.platform.engine.discovery.DiscoverySelectors.selectDirectory;\r\nimport static org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder.request;\r\n\r\npublic class RunCucumber {\r\n\r\n   public static void main(String[] args) {\r\n\r\n      LauncherDiscoveryRequest request = request()\r\n              .selectors(\r\n                      selectDirectory(&quot;path/to/features&quot;)\r\n              )\r\n              .build();\r\n\r\n      Launcher launcher = LauncherFactory.create();\r\n      SummaryGeneratingListener listener = new SummaryGeneratingListener();\r\n      launcher.registerTestExecutionListeners(listener);\r\n      launcher.execute(request);\r\n\r\n      TestExecutionSummary summary = listener.getSummary();\r\n      // Do something with summary\r\n\r\n      List&lt;UniqueIdSelector&gt; failures = summary.getFailures().stream()\r\n              .map(Failure::getTestIdentifier)\r\n              .filter(TestIdentifier::isTest)\r\n              // Filter more to select scenarios to rerun\r\n              .map(TestIdentifier::getUniqueId)\r\n              .map(DiscoverySelectors::selectUniqueId)\r\n              .collect(Collectors.toList());\r\n\r\n      LauncherDiscoveryRequest rerunRequest = request()\r\n              .selectors(failures)\r\n              .build();\r\n\r\n      launcher.execute(rerunRequest);\r\n\r\n      TestExecutionSummary rerunSummary = listener.getSummary();\r\n      // Do something with rerunSummary\r\n\r\n   }\r\n\r\n}\r\n```","title":"How to Rerun a Particular Cucumber Scenario when it Fails with Cucumber","body":"<p>You'll have to write custom code for this. Fortunately this is relatively easy with the JUnit Platform API (JUnit 5).</p>\n<p><a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine#rerunning-failed-scenarios\" rel=\"nofollow noreferrer\">https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine#rerunning-failed-scenarios</a></p>\n<pre><code>package com.example;\n\nimport org.junit.platform.engine.discovery.DiscoverySelectors;\nimport org.junit.platform.engine.discovery.UniqueIdSelector;\nimport org.junit.platform.launcher.Launcher;\nimport org.junit.platform.launcher.LauncherDiscoveryRequest;\nimport org.junit.platform.launcher.TestIdentifier;\nimport org.junit.platform.launcher.core.LauncherFactory;\nimport org.junit.platform.launcher.listeners.SummaryGeneratingListener;\nimport org.junit.platform.launcher.listeners.TestExecutionSummary.Failure;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\nimport static org.junit.platform.engine.discovery.DiscoverySelectors.selectDirectory;\nimport static org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder.request;\n\npublic class RunCucumber {\n\n   public static void main(String[] args) {\n\n      LauncherDiscoveryRequest request = request()\n              .selectors(\n                      selectDirectory(&quot;path/to/features&quot;)\n              )\n              .build();\n\n      Launcher launcher = LauncherFactory.create();\n      SummaryGeneratingListener listener = new SummaryGeneratingListener();\n      launcher.registerTestExecutionListeners(listener);\n      launcher.execute(request);\n\n      TestExecutionSummary summary = listener.getSummary();\n      // Do something with summary\n\n      List&lt;UniqueIdSelector&gt; failures = summary.getFailures().stream()\n              .map(Failure::getTestIdentifier)\n              .filter(TestIdentifier::isTest)\n              // Filter more to select scenarios to rerun\n              .map(TestIdentifier::getUniqueId)\n              .map(DiscoverySelectors::selectUniqueId)\n              .collect(Collectors.toList());\n\n      LauncherDiscoveryRequest rerunRequest = request()\n              .selectors(failures)\n              .build();\n\n      launcher.execute(rerunRequest);\n\n      TestExecutionSummary rerunSummary = listener.getSummary();\n      // Do something with rerunSummary\n\n   }\n\n}\n</code></pre>\n"}],"owner":{"display_name":"user17953271"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":510,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660769548,"creation_date":1660766739,"question_id":73394344,"body_markdown":"I know how to use two runner classes to rerun failed scenarios, but I want this feature only for one test. \r\n\r\nLet&#39;s say that I have 100 scenarios and I only want to rerun scenario 40 when it fails, but if any other scenaria fails, I don&#39;t want it to rerun. Is there a way to implement this for one test in particular?\r\n\r\nTo see how to rerun all failed scenarios, check out this question:\r\nhttps://stackoverflow.com/questions/11719898/how-to-rerun-the-failed-scenarios-using-cucumber","title":"How to Rerun a Particular Cucumber Scenario when it Fails with Cucumber","body":"<p>I know how to use two runner classes to rerun failed scenarios, but I want this feature only for one test.</p>\n<p>Let's say that I have 100 scenarios and I only want to rerun scenario 40 when it fails, but if any other scenaria fails, I don't want it to rerun. Is there a way to implement this for one test in particular?</p>\n<p>To see how to rerun all failed scenarios, check out this question:\n<a href=\"https://stackoverflow.com/questions/11719898/how-to-rerun-the-failed-scenarios-using-cucumber\">How to rerun the failed scenarios using Cucumber?</a></p>\n"},{"tags":["java","methods","parameters","uml","class-diagram"],"answers":[{"tags":[],"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660756338,"creation_date":1660755699,"answer_id":73392372,"question_id":73392258,"body_markdown":"Simple demo of what your implementation can accomplish.\r\n\r\nThe `MyInteger` objects passed as parameters (`m` and `n`) can be modified by the implementation of `getTwoIntegers` using the `setInteger` method of the class.\r\n\r\n\tpublic class Main\r\n\t{\r\n\t\tpublic static void main(String[] args) {\r\n\r\n\t\t\tMyInteger a = new MyInteger(333);\r\n\t\t\tMyInteger b = new MyInteger(444);\r\n\t\t\tSystem.out.println(&quot;before: &quot; + a.getInteger() + &quot;,&quot; + b.getInteger());\r\n\t\t\t\r\n\t\t\tgetTwoIntegers(a,b);\r\n\t\t\tSystem.out.println(&quot;after: &quot; + a.getInteger() + &quot;,&quot; + b.getInteger());\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tpublic static class MyInteger {\r\n\t\t\tprivate int val;\r\n\t\t\tpublic MyInteger() { val = 0; }\r\n\t\t\tpublic MyInteger(int v) { val = v; }\r\n\t\t\tpublic void setInteger(int n) { this.val = n; }\r\n\t\t\tpublic int getInteger() { return val; }\r\n\t\t}\r\n\t\t\r\n\t\tstatic void getTwoIntegers(MyInteger m, MyInteger n) {\r\n\t\t\t// in your case modify implementation to produce random numbers\r\n\t\t\tm.setInteger(222);\r\n\t\t\tn.setInteger(555);\r\n\t\t}\r\n\t}\r\n\r\nPrints:\r\n\r\n    before: 333,444\r\n    after: 222,555\r\n\r\n","title":"Java method that produces an object","body":"<p>Simple demo of what your implementation can accomplish.</p>\n<p>The <code>MyInteger</code> objects passed as parameters (<code>m</code> and <code>n</code>) can be modified by the implementation of <code>getTwoIntegers</code> using the <code>setInteger</code> method of the class.</p>\n<pre><code>public class Main\n{\n    public static void main(String[] args) {\n\n        MyInteger a = new MyInteger(333);\n        MyInteger b = new MyInteger(444);\n        System.out.println(&quot;before: &quot; + a.getInteger() + &quot;,&quot; + b.getInteger());\n        \n        getTwoIntegers(a,b);\n        System.out.println(&quot;after: &quot; + a.getInteger() + &quot;,&quot; + b.getInteger());\n        \n    }\n    \n    public static class MyInteger {\n        private int val;\n        public MyInteger() { val = 0; }\n        public MyInteger(int v) { val = v; }\n        public void setInteger(int n) { this.val = n; }\n        public int getInteger() { return val; }\n    }\n    \n    static void getTwoIntegers(MyInteger m, MyInteger n) {\n        // in your case modify implementation to produce random numbers\n        m.setInteger(222);\n        n.setInteger(555);\n    }\n}\n</code></pre>\n<p>Prints:</p>\n<pre><code>before: 333,444\nafter: 222,555\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4589753,"reputation":69926,"user_id":3723423,"accept_rate":50,"display_name":"Christophe"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1660769542,"creation_date":1660762310,"answer_id":73393595,"question_id":73392258,"body_markdown":"[Gardener][1]&#39;s answer nailed it.  For the records, I&#39;d like to share some more thoughts.  \r\n\r\nThis class diagram is misleading.  The parameters of an UML operation have a *direction* that should be indicated in front of the parameter name.  It can be `in`, `out`, `inout`.  If the direction is omitted in the diagram, UML assumes that it&#39;s an `in` argument.  Which assumes that the parameter is not muted by the operation.    \r\n\r\nIf it would have been correctly specified as `getTwoIntegers(out m: MyInteger, out n: MyInteger)` (yes, UML syntax order is slightly different from Java),  you would have understood that the values of m and n are provided for the output of the values of the operation, and not as input.  And indeed, as Gardener explained, in Java you can provide a class object  that can then be mutated to store the results; because class objects are passed by reference (i.e. it&#39;s the same object that is used and not a copy). This is by the way why a class `MyInteger` is used in this lab instead of a built-in type `int`.    \r\n\r\nOther unrelated UML remarks:  there is no `static` type modifier keyword in UML.  Either is it marked as `{static}` or is it underlined.  Last but not least,  there should be no multiplicity on a dashed dependency arrow. Multiplicities are for associations, i.e. structural relationships.   \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/73392372/3723423","title":"Java method that produces an object","body":"<p><a href=\"https://stackoverflow.com/a/73392372/3723423\">Gardener</a>'s answer nailed it.  For the records, I'd like to share some more thoughts.</p>\n<p>This class diagram is misleading.  The parameters of an UML operation have a <em>direction</em> that should be indicated in front of the parameter name.  It can be <code>in</code>, <code>out</code>, <code>inout</code>.  If the direction is omitted in the diagram, UML assumes that it's an <code>in</code> argument.  Which assumes that the parameter is not muted by the operation.</p>\n<p>If it would have been correctly specified as <code>getTwoIntegers(out m: MyInteger, out n: MyInteger)</code> (yes, UML syntax order is slightly different from Java),  you would have understood that the values of m and n are provided for the output of the values of the operation, and not as input.  And indeed, as Gardener explained, in Java you can provide a class object  that can then be mutated to store the results; because class objects are passed by reference (i.e. it's the same object that is used and not a copy). This is by the way why a class <code>MyInteger</code> is used in this lab instead of a built-in type <code>int</code>.</p>\n<p>Other unrelated UML remarks:  there is no <code>static</code> type modifier keyword in UML.  Either is it marked as <code>{static}</code> or is it underlined.  Last but not least,  there should be no multiplicity on a dashed dependency arrow. Multiplicities are for associations, i.e. structural relationships.</p>\n"}],"owner":{"account_id":22253864,"reputation":41,"user_id":16486325,"display_name":"nguyenquocan01"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1660769542,"creation_date":1660755143,"question_id":73392258,"body_markdown":"I have to follow the below UML diagram to design a programme. \r\n\r\nThe programme is supposed to generate 2 random integers, and ask user for input the answer to the sum of said integers.\r\n\r\nHowever, I am not sure how to make use of the method `static void getTwoIntegers(MyInteger m, MyInteger n)` , or what to put inside it. \r\n\r\nI have tried initialising 2 `MyInteger` objects with `MyInteger int_1 = new MyInteger(m);` and `(n)` in this method, but get a &quot;cannot be resolved&quot; error everytime I call its getter method `int_1.getInteger();`\r\n\r\nAnd since the method `getTwoIntegers` is void, I cannot just return 2 random integers.  I&#39;m truly stuck on how to utilise this method\r\n\r\nAny ideas? Thanks so much\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4aEJW.png","title":"Java method that produces an object","body":"<p>I have to follow the below UML diagram to design a programme.</p>\n<p>The programme is supposed to generate 2 random integers, and ask user for input the answer to the sum of said integers.</p>\n<p>However, I am not sure how to make use of the method <code>static void getTwoIntegers(MyInteger m, MyInteger n)</code> , or what to put inside it.</p>\n<p>I have tried initialising 2 <code>MyInteger</code> objects with <code>MyInteger int_1 = new MyInteger(m);</code> and <code>(n)</code> in this method, but get a &quot;cannot be resolved&quot; error everytime I call its getter method <code>int_1.getInteger();</code></p>\n<p>And since the method <code>getTwoIntegers</code> is void, I cannot just return 2 random integers.  I'm truly stuck on how to utilise this method</p>\n<p>Any ideas? Thanks so much</p>\n<p><a href=\"https://i.stack.imgur.com/4aEJW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4aEJW.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","hashmap","java-stream","anonymous-class"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1658174130,"post_id":73027825,"comment_id":128981623,"body_markdown":"Is `AuditSubType` an enum?","body":"Is <code>AuditSubType</code> an enum?"},{"owner":{"account_id":18518949,"reputation":163,"user_id":13492469,"display_name":"PassionateAbtCoding"},"score":0,"creation_date":1658174783,"post_id":73027825,"comment_id":128981804,"body_markdown":"Yes @Eritrean Its an Enum","body":"Yes @Eritrean Its an Enum"},{"owner":{"account_id":18518949,"reputation":163,"user_id":13492469,"display_name":"PassionateAbtCoding"},"score":0,"creation_date":1658174863,"post_id":73027825,"comment_id":128981825,"body_markdown":"@user16320675 - Could you please give me a code example as to how I can use it without DBI, since I am using Stream.of","body":"@user16320675 - Could you please give me a code example as to how I can use it without DBI, since I am using Stream.of"}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1658176562,"creation_date":1658175118,"answer_id":73028080,"question_id":73027825,"body_markdown":"Assuming your enum looks something like this:\r\n\r\n    public enum AuditSubType {\r\n         FOO(&quot;123&quot;),\r\n         BAR(&quot;456&quot;),\r\n         BAZ(&quot;789&quot;);\r\n\r\n         public String code;\r\n\r\n         AuditSubType(String code){\r\n             this.code = code;\r\n         }\r\n         String getCode(){\r\n             return code;\r\n         }\r\n    }\r\n\r\nThen just use `Stream.collect(Collectors.toMap())`\r\n\r\n    Map&lt;String,String&gt; subTypes = \r\n           Stream.of(AuditSubType.values())\r\n                 .collect(Collectors.toMap(AuditSubType::getCode,AuditSubType::name));\r\n\r\nor use `EnumSet.allOf`\r\n\r\n    Map&lt;String,String&gt; subTypes = \r\n           EnumSet.allOf(AuditSubType.class)\r\n                  .stream()\r\n                  .collect(Collectors.toMap(AuditSubType::getCode,AuditSubType::name));","title":"Reimplement the Double Brace Initialization of the HashMap","body":"<p>Assuming your enum looks something like this:</p>\n<pre><code>public enum AuditSubType {\n     FOO(&quot;123&quot;),\n     BAR(&quot;456&quot;),\n     BAZ(&quot;789&quot;);\n\n     public String code;\n\n     AuditSubType(String code){\n         this.code = code;\n     }\n     String getCode(){\n         return code;\n     }\n}\n</code></pre>\n<p>Then just use <code>Stream.collect(Collectors.toMap())</code></p>\n<pre><code>Map&lt;String,String&gt; subTypes = \n       Stream.of(AuditSubType.values())\n             .collect(Collectors.toMap(AuditSubType::getCode,AuditSubType::name));\n</code></pre>\n<p>or use <code>EnumSet.allOf</code></p>\n<pre><code>Map&lt;String,String&gt; subTypes = \n       EnumSet.allOf(AuditSubType.class)\n              .stream()\n              .collect(Collectors.toMap(AuditSubType::getCode,AuditSubType::name));\n</code></pre>\n"}],"owner":{"account_id":18518949,"reputation":163,"user_id":13492469,"display_name":"PassionateAbtCoding"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":214,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1658176436,"answer_count":1,"score":0,"last_activity_date":1660769501,"creation_date":1658173704,"question_id":73027825,"body_markdown":"I have an enum `AuditType`.\r\n\r\nAnd there&#39;s a map `Map&lt;String, String&gt;` (class field) which needs to be initialized by iterating over the `AuditType` constants and populated based on the *if-else* condition.\r\n\r\nIt has been implemented using a complicated double bracket initialization (*I haven&#39;t actually wrote this code*).\r\n\r\nNow I&#39;m trying to fix the Sonar&#39;s coverage because it complains that I need to use another way to initialize this map.\r\n\r\n*Code:*\r\n```\r\nMap&lt;String, String&gt; SUBTYPES = new HashMap&lt;String, String&gt;() {\r\n    {\r\n        Stream.of(AuditSubType.values()).forEach(auditType -&gt; put(auditType.getCode(), auditType.name()));\r\n    }\r\n};\r\n```\r\n\r\nThere is another complicated Double Brace Initialization:\r\n\r\n```\r\nMap&lt;String, String&gt; TYPES = new HashMap&lt;String, String&gt;() {\r\n    {\r\n        Stream.of(AuditType.values()).forEach(eventType -&gt; {\r\n            if (AuditType.ACCOUNT_RECORD.equals(auditType)) {\r\n                put(AuditCodes.Type.ACCOUNT_ACTIVITY.getCode(), auditType.name());\r\n            } else {\r\n                String ssCode = AuditCodes.Type.valueOf(auditType.name()).getCode();\r\n                put(ssCode, auditType.name());\r\n            }\r\n        });\r\n    }\r\n};\r\n```\r\n\r\nSonar complaints saying *&quot;Use another way to initialize this instance&quot;*.\r\n\r\nIs there a way to write it without the double bracket initialization?","title":"Reimplement the Double Brace Initialization of the HashMap","body":"<p>I have an enum <code>AuditType</code>.</p>\n<p>And there's a map <code>Map&lt;String, String&gt;</code> (class field) which needs to be initialized by iterating over the <code>AuditType</code> constants and populated based on the <em>if-else</em> condition.</p>\n<p>It has been implemented using a complicated double bracket initialization (<em>I haven't actually wrote this code</em>).</p>\n<p>Now I'm trying to fix the Sonar's coverage because it complains that I need to use another way to initialize this map.</p>\n<p><em>Code:</em></p>\n<pre><code>Map&lt;String, String&gt; SUBTYPES = new HashMap&lt;String, String&gt;() {\n    {\n        Stream.of(AuditSubType.values()).forEach(auditType -&gt; put(auditType.getCode(), auditType.name()));\n    }\n};\n</code></pre>\n<p>There is another complicated Double Brace Initialization:</p>\n<pre><code>Map&lt;String, String&gt; TYPES = new HashMap&lt;String, String&gt;() {\n    {\n        Stream.of(AuditType.values()).forEach(eventType -&gt; {\n            if (AuditType.ACCOUNT_RECORD.equals(auditType)) {\n                put(AuditCodes.Type.ACCOUNT_ACTIVITY.getCode(), auditType.name());\n            } else {\n                String ssCode = AuditCodes.Type.valueOf(auditType.name()).getCode();\n                put(ssCode, auditType.name());\n            }\n        });\n    }\n};\n</code></pre>\n<p>Sonar complaints saying <em>&quot;Use another way to initialize this instance&quot;</em>.</p>\n<p>Is there a way to write it without the double bracket initialization?</p>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":11721760,"reputation":7343,"user_id":10216112,"display_name":"Himanshu Poddar"},"score":0,"creation_date":1659278882,"post_id":73183916,"comment_id":129251745,"body_markdown":"The elements may not be loaded by that time you try to get the lements. Try waiting for few seconds","body":"The elements may not be loaded by that time you try to get the lements. Try waiting for few seconds"},{"owner":{"account_id":24133886,"reputation":409,"user_id":18101106,"display_name":"fujidaon"},"score":0,"creation_date":1659279444,"post_id":73183916,"comment_id":129251898,"body_markdown":"I increased timeout to 30 seconds - it didn&#39;t help. Timeout has no effect in this case","body":"I increased timeout to 30 seconds - it didn&#39;t help. Timeout has no effect in this case"}],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660768834,"creation_date":1660768834,"answer_id":73394670,"question_id":73183916,"body_markdown":"    ExpectedCondition&lt;java.util.List&lt;WebElement&gt;&gt; presenceOfAllElementsLocatedBy(By locator)\r\n\r\nAbove is for checking that there is at least one element present on a web page and will break as soon as it find one, it will not wait for 5 elements.It returns true as soon as elements.size&gt;0\r\n\r\nYou need to add to some other wait to make sure all elements are loaded before you do findelements \r\n\r\nBelow will wait for count of elements be 5\r\n\t\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(30));\r\n    \t\twait.until(new ExpectedCondition&lt;Boolean&gt;() {\r\n    \t\t\tpublic Boolean apply(WebDriver driver) {\r\n    \t\t\t\tint elementCount = driver.findElements(By.xpath(&quot;xxxx&quot;)).size();\r\n    \t\t\t\tif (elementCount == 5)\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t\telse\r\n    \t\t\t\t\treturn false;\r\n    \t\t\t}\r\n    \t\t});","title":"Selenium WebDriverWait doesn&#39;t return all web elements within classes with same name","body":"<pre><code>ExpectedCondition&lt;java.util.List&lt;WebElement&gt;&gt; presenceOfAllElementsLocatedBy(By locator)\n</code></pre>\n<p>Above is for checking that there is at least one element present on a web page and will break as soon as it find one, it will not wait for 5 elements.It returns true as soon as elements.size&gt;0</p>\n<p>You need to add to some other wait to make sure all elements are loaded before you do findelements</p>\n<p>Below will wait for count of elements be 5</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(30));\n        wait.until(new ExpectedCondition&lt;Boolean&gt;() {\n            public Boolean apply(WebDriver driver) {\n                int elementCount = driver.findElements(By.xpath(&quot;xxxx&quot;)).size();\n                if (elementCount == 5)\n                    return true;\n                else\n                    return false;\n            }\n        });\n</code></pre>\n"}],"owner":{"account_id":24133886,"reputation":409,"user_id":18101106,"display_name":"fujidaon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660768834,"creation_date":1659275901,"question_id":73183916,"body_markdown":"Im using this method to retrieve all `src` from `div` classes. For example in the page from my code there are 5 elements, but when I run this code I get only 2 `src`. And if I run my code multiple times, sometimes it returns all of 5 elements.\r\n```\r\npublic static void main(String[] args) throws IOException, URISyntaxException {\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;S:\\\\behance-id\\\\src\\\\main\\\\resources\\\\chromedriver.exe&quot;);\r\n        WebDriver driver = new ChromeDriver();\r\n        driver.get(&quot;https://www.behance.net/gallery/148589707/Hercules-and-Randy&quot;);\r\n        List&lt;WebElement&gt; firstResult = new WebDriverWait(driver, Duration.ofSeconds(10))\r\n                .until(ExpectedConditions.presenceOfAllElementsLocatedBy(By.xpath(&quot;//div[@class=&#39;ImageElement-root-kir ImageElement-loaded-icR&#39;]/img&quot;)));\r\n        for (WebElement webElement : firstResult) {\r\n            System.out.println(webElement.getAttribute(&quot;src&quot;));\r\n        }\r\n        driver.quit();\r\n    }\r\n```\r\nAlso tried to add this line, but it didn&#39;t help:\r\n```\r\n((JavascriptExecutor)driver).executeScript(&quot;window.scrollTo(0, document.body.scrollHeight)&quot;);\r\n```\r\nSo this script doesn&#39;t return all of needed elements even though they are the same class.\r\n\r\nPage source code looks like:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QIDVf.png","title":"Selenium WebDriverWait doesn&#39;t return all web elements within classes with same name","body":"<p>Im using this method to retrieve all <code>src</code> from <code>div</code> classes. For example in the page from my code there are 5 elements, but when I run this code I get only 2 <code>src</code>. And if I run my code multiple times, sometimes it returns all of 5 elements.</p>\n<pre><code>public static void main(String[] args) throws IOException, URISyntaxException {\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;S:\\\\behance-id\\\\src\\\\main\\\\resources\\\\chromedriver.exe&quot;);\n        WebDriver driver = new ChromeDriver();\n        driver.get(&quot;https://www.behance.net/gallery/148589707/Hercules-and-Randy&quot;);\n        List&lt;WebElement&gt; firstResult = new WebDriverWait(driver, Duration.ofSeconds(10))\n                .until(ExpectedConditions.presenceOfAllElementsLocatedBy(By.xpath(&quot;//div[@class='ImageElement-root-kir ImageElement-loaded-icR']/img&quot;)));\n        for (WebElement webElement : firstResult) {\n            System.out.println(webElement.getAttribute(&quot;src&quot;));\n        }\n        driver.quit();\n    }\n</code></pre>\n<p>Also tried to add this line, but it didn't help:</p>\n<pre><code>((JavascriptExecutor)driver).executeScript(&quot;window.scrollTo(0, document.body.scrollHeight)&quot;);\n</code></pre>\n<p>So this script doesn't return all of needed elements even though they are the same class.</p>\n<p>Page source code looks like:\n<a href=\"https://i.stack.imgur.com/QIDVf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QIDVf.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","retrofit2"],"comments":[{"owner":{"account_id":139113,"reputation":16537,"user_id":344487,"accept_rate":73,"display_name":"Fred"},"score":0,"creation_date":1556784075,"post_id":55930182,"comment_id":98548679,"body_markdown":"strange, 302 is a redirect. Do you happen to know where it&#39;s redirecting to?","body":"strange, 302 is a redirect. Do you happen to know where it&#39;s redirecting to?"}],"answers":[{"tags":[],"owner":{"account_id":14927109,"reputation":730,"user_id":10777618,"display_name":"Mihail"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1556913058,"creation_date":1556913058,"answer_id":55976275,"question_id":55930182,"body_markdown":"I fixed the issue, basically retrofit considers a response successful if the code is between 200 - 299, so as it was returning the 302, the response body I was looking for was in .errorBody(). ","title":"Response body always null in android from retrofit2 api request","body":"<p>I fixed the issue, basically retrofit considers a response successful if the code is between 200 - 299, so as it was returning the 302, the response body I was looking for was in .errorBody(). </p>\n"},{"tags":[],"owner":{"account_id":26091882,"reputation":1,"user_id":19788638,"display_name":"Andrei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660768423,"creation_date":1660768423,"answer_id":73394604,"question_id":55930182,"body_markdown":"Your error happens because you are returning Status Code `302 FOUND` in the controller. When retrieving data you should return `200 OK`.","title":"Response body always null in android from retrofit2 api request","body":"<p>Your error happens because you are returning Status Code <code>302 FOUND</code> in the controller. When retrieving data you should return <code>200 OK</code>.</p>\n"}],"owner":{"account_id":14927109,"reputation":730,"user_id":10777618,"display_name":"Mihail"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":501,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660768423,"creation_date":1556669760,"question_id":55930182,"body_markdown":"I&#39;m developing an android app with android studio, and I have a rest api, which I developed with spring. And every time I use retrofit to retrieve something from the server I get null body. Even though my server sends the data.\r\n    \r\n\r\n\r\nI&#39;ve tried ScalarsConverterFactory and GsonConverterFactory, I tried as well changing the type of my Call to String, to ResponseBody and to JsonObject\r\n\r\nhere I make the call:\r\n\r\n``` java\r\nRetrofit retrofit = new Retrofit.Builder()\r\n                .addConverterFactory(GsonConverterFactory.create())\r\n                .baseUrl(&quot;my_url&quot;)\r\n                .build();\r\n\r\nServerService service = retrofit.create(ServerService.class);\r\nCall&lt;List&lt;String&gt;&gt; call = service.getUserAlbums(&quot;addcookie&quot;);\r\nResponse&lt;List&lt;String&gt;&gt; response = call.execute();\r\n```\r\nServerService.java\r\n``` java\r\n@GET(&quot;/cmu/getUserAlbums&quot;)\r\nCall&lt;List&lt;String&gt;&gt; getUserAlbums(@Header(&quot;Cookie&quot;) String cookie);\r\n```\r\nHere is the code in the server\r\n\r\n```java\r\n@RequestMapping(value = &quot;/getUserAlbums&quot;, method = RequestMethod.GET)\r\n    @ResponseStatus(HttpStatus.FOUND)\r\n    public List&lt;String&gt; getUserAlbums() {\r\n        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n        User user = userService.getUserByUsername(auth.getName());\r\n        return userService.getUserByUsername(user.getUsername()).getAlbums();\r\n        \r\n    }\r\n```\r\n\r\nI was expecting to get a list as a string, I get the HTTP code 302, and in my console I can see that the server returns the List, but I can&#39;t receive on android.","title":"Response body always null in android from retrofit2 api request","body":"<p>I'm developing an android app with android studio, and I have a rest api, which I developed with spring. And every time I use retrofit to retrieve something from the server I get null body. Even though my server sends the data.</p>\n\n<p>I've tried ScalarsConverterFactory and GsonConverterFactory, I tried as well changing the type of my Call to String, to ResponseBody and to JsonObject</p>\n\n<p>here I make the call:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Retrofit retrofit = new Retrofit.Builder()\n                .addConverterFactory(GsonConverterFactory.create())\n                .baseUrl(\"my_url\")\n                .build();\n\nServerService service = retrofit.create(ServerService.class);\nCall&lt;List&lt;String&gt;&gt; call = service.getUserAlbums(\"addcookie\");\nResponse&lt;List&lt;String&gt;&gt; response = call.execute();\n</code></pre>\n\n<p>ServerService.java</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@GET(\"/cmu/getUserAlbums\")\nCall&lt;List&lt;String&gt;&gt; getUserAlbums(@Header(\"Cookie\") String cookie);\n</code></pre>\n\n<p>Here is the code in the server</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = \"/getUserAlbums\", method = RequestMethod.GET)\n    @ResponseStatus(HttpStatus.FOUND)\n    public List&lt;String&gt; getUserAlbums() {\n        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n        User user = userService.getUserByUsername(auth.getName());\n        return userService.getUserByUsername(user.getUsername()).getAlbums();\n\n    }\n</code></pre>\n\n<p>I was expecting to get a list as a string, I get the HTTP code 302, and in my console I can see that the server returns the List, but I can't receive on android.</p>\n"},{"tags":["java","selenium","selenium-grid"],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660768333,"creation_date":1660768333,"answer_id":73394594,"question_id":73220718,"body_markdown":"try to do it using javascript Executor \r\n\r\n    JavascriptExecutor js = (JavascriptExecutor ) driver;\r\n    js.executeScript(&quot;arguments[0].value=&#39;&quot;+generateString(4067)+&quot;&#39;&quot;, element);","title":"Driver info: driver.version: RemoteWebDriver org.openqa.selenium.json.JsonException: Unable to determine type from: &lt;. Last 1 characters read: &lt;","body":"<p>try to do it using javascript Executor</p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor ) driver;\njs.executeScript(&quot;arguments[0].value='&quot;+generateString(4067)+&quot;'&quot;, element);\n</code></pre>\n"}],"owner":{"account_id":14014033,"reputation":699,"user_id":10121996,"display_name":"Sobhit Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660768333,"creation_date":1659525026,"question_id":73220718,"body_markdown":"I have observe this issue where I have long character such as 100-4000 characters sending on sendkeys, doesnot work in selenium grid in parallel and breaks in between with the below exception. Does any one have idea about this exception ?\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    Unable to determine type from: &lt;. Last 1 characters read: &lt;\r\n    Build info: version: &#39;xxxxx&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n    System info: host: &#39;ip-xx-xx-3-xx.xx.x&#39;, ip: &#39;xxxxxxx&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;x-x.x.x&#39;, java.version: &#39;1.8.0_312&#39;\r\n    Driver info: driver.version: RemoteWebDriver\r\n    org.openqa.selenium.json.JsonException: Unable to determine type from: &lt;. Last 1 characters read: &lt;\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n    System info: host: &#39;ip-xx-xxx-3-xxx.xxx.internal&#39;, ip: &#39;xxxxxx&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;xx&#39;, os.version: &#39;xx-xx.xx.xxx&#39;, java.version: &#39;1.8.0_312&#39;\r\n    Driver info: driver.version: RemoteWebDriver\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n    public String generateString(int length) {\r\n        char[] chars = &quot;abcdefghijklmnopqrstuvwxyz&quot;.toCharArray();\r\n        StringBuilder sb = new StringBuilder();\r\n        Random rand = null;\r\n        try {\r\n            rand = SecureRandom.getInstanceStrong();\r\n        } catch (NoSuchAlgorithmException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        for (int i = 1; i &lt;= length; i++) {\r\n            char c = chars[rand.nextInt(chars.length)];\r\n            sb.append(c);\r\n        }\r\n        String first = sb.toString();\r\n        log.info(first);\r\n        return first;\r\n    }\r\n\r\n\r\nCalling this above method with the following-\r\n\r\n    driver.findElement(By.xpath=&quot;xxxxxxx&quot;).sendKeys(generateString(4067));","title":"Driver info: driver.version: RemoteWebDriver org.openqa.selenium.json.JsonException: Unable to determine type from: &lt;. Last 1 characters read: &lt;","body":"<p>I have observe this issue where I have long character such as 100-4000 characters sending on sendkeys, doesnot work in selenium grid in parallel and breaks in between with the below exception. Does any one have idea about this exception ?</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Unable to determine type from: &lt;. Last 1 characters read: &lt;\nBuild info: version: 'xxxxx', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'ip-xx-xx-3-xx.xx.x', ip: 'xxxxxxx', os.name: 'Linux', os.arch: 'amd64', os.version: 'x-x.x.x', java.version: '1.8.0_312'\nDriver info: driver.version: RemoteWebDriver\norg.openqa.selenium.json.JsonException: Unable to determine type from: &lt;. Last 1 characters read: &lt;\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'ip-xx-xxx-3-xxx.xxx.internal', ip: 'xxxxxx', os.name: 'Linux', os.arch: 'xx', os.version: 'xx-xx.xx.xxx', java.version: '1.8.0_312'\nDriver info: driver.version: RemoteWebDriver</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<pre><code>public String generateString(int length) {\n    char[] chars = &quot;abcdefghijklmnopqrstuvwxyz&quot;.toCharArray();\n    StringBuilder sb = new StringBuilder();\n    Random rand = null;\n    try {\n        rand = SecureRandom.getInstanceStrong();\n    } catch (NoSuchAlgorithmException e) {\n        throw new RuntimeException(e);\n    }\n    for (int i = 1; i &lt;= length; i++) {\n        char c = chars[rand.nextInt(chars.length)];\n        sb.append(c);\n    }\n    String first = sb.toString();\n    log.info(first);\n    return first;\n}\n</code></pre>\n<p>Calling this above method with the following-</p>\n<pre><code>driver.findElement(By.xpath=&quot;xxxxxxx&quot;).sendKeys(generateString(4067));\n</code></pre>\n"},{"tags":["java","instrumentation","java-bytecode-asm"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":2,"creation_date":1660608402,"post_id":73367304,"comment_id":129567427,"body_markdown":"`java.lang.Thread` is one of those classes that are initialized very early in the VM lifetime - before your agent even runs. You may request that `java.lang.Thread` is [retransformed](https://docs.oracle.com/en/java/javase/14/docs/api/java.instrument/java/lang/instrument/Instrumentation.html#retransformClasses%26java.lang.Class...%27).","body":"<code>java.lang.Thread</code> is one of those classes that are initialized very early in the VM lifetime - before your agent even runs. You may request that <code>java.lang.Thread</code> is <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.instrument/java/lang/instrument/Instrumentation.html#retransformClasses%26java.lang.Class...%27\" rel=\"nofollow noreferrer\">retransformed</a>."},{"owner":{"account_id":2344502,"reputation":537,"user_id":2055105,"accept_rate":67,"display_name":"Arun J"},"score":0,"creation_date":1660767265,"post_id":73367304,"comment_id":129613560,"body_markdown":"@JohannesKuhn, I followed your advise and was able to transform java.lang.Thread. Unfortunately, running into a different problem. Updated the question with more details.","body":"@JohannesKuhn, I followed your advise and was able to transform java.lang.Thread. Unfortunately, running into a different problem. Updated the question with more details."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1661158672,"post_id":73367304,"comment_id":129696565,"body_markdown":"It would be helpful to know what kind of changes you made to the code.","body":"It would be helpful to know what kind of changes you made to the code."}],"owner":{"account_id":2344502,"reputation":537,"user_id":2055105,"accept_rate":67,"display_name":"Arun J"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660768108,"creation_date":1660605758,"question_id":73367304,"body_markdown":"I am able to instrument a boat load of my own classes and some third party libraries. But, when I want to load java/lang/Thread (need the thread id and name to link parent thread and child threads), the class is not even loading.\r\n\r\nThe code that checks whether a class needs to be instrumented or not happens inside class visitor&#39;s transform().\r\n\r\n```    \r\n\tpublic ClassVisitor transform(ClassVisitor cv, String className, ClassDesc classDesc) {\r\n\t\tSystem.out.println(&quot;className : &quot; + className);\r\n\t\tConfiguration config = Configuration.getInstance();\r\n\t\tif (!className.contains(&quot;$&quot;) &amp;&amp; (!config.isToBeExcluded(className) || ThreadHelper.isThreadClass(className))) {\r\n\t\t\tSystem.out.println(&quot;Included className : &quot; + className);\r\n\t\t\treturn new HttpServiceCVT(cv, className);\r\n\t\t}\r\n\t\treturn cv;\r\n```\r\n\r\n\r\nThe print statement before that check, prints all the loaded classes. I see a lot of classes from java/lang/ package but not java/lang/Thread.\r\n\r\nHas anyone instrumented thread class? What am I missing?\r\n\r\nPlease don&#39;t get mad at Sysout&#39;s. It was a just for a quick debug. I didn&#39;t expect to get stuck here. \r\n\r\n*************Update based on @JohannesKuhn comment.**\r\n\r\nTried to retransform classes by adding below line in my agent\r\n```inst.retransformClasses(Class.forName(&quot;java.lang.Thread&quot;));```\r\nRan into JVM crashes, so modified the code to just instrument the Thread class and init (not &lt;init&gt;) method. \r\nInstrumenting &quot;init&quot; works but errors out for a different method that is not instrumented. Output below\r\n```not init so returning mv for method  setNativeName\r\njava.lang.NoClassDefFoundError \r\n - klass: &#39;java/lang/NoClassDefFoundError&#39;\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  Internal Error (exceptions.cpp:427), pid=12444, tid=0x0000000000000c03\r\n#  fatal error: ExceptionMark destructor expects no pending exceptions\r\n```\r\n\r\ncorresponding code\r\n```\r\n\r\n    if(this.className.equals(&quot;java/lang/Thread&quot;) &amp;&amp; name.equals(&quot;init&quot;)) {\r\n    \treturn new TracerMV(access, name, desc, mv, true, className);\r\n    }else {\r\n    \tSystem.out.println( &quot;not init so returning mv for method  &quot; + name);\r\n    \treturn mv;\r\n    }\r\n\r\n```\r\nDoes this mean the code is trying to instrument java.lang.NoClassDefFoundError? If so, how is it doing it as I have set the filters to just transform the thread class. ","title":"ASM - can&#39;t instrument java/lang/Thread","body":"<p>I am able to instrument a boat load of my own classes and some third party libraries. But, when I want to load java/lang/Thread (need the thread id and name to link parent thread and child threads), the class is not even loading.</p>\n<p>The code that checks whether a class needs to be instrumented or not happens inside class visitor's transform().</p>\n<pre><code>    public ClassVisitor transform(ClassVisitor cv, String className, ClassDesc classDesc) {\n        System.out.println(&quot;className : &quot; + className);\n        Configuration config = Configuration.getInstance();\n        if (!className.contains(&quot;$&quot;) &amp;&amp; (!config.isToBeExcluded(className) || ThreadHelper.isThreadClass(className))) {\n            System.out.println(&quot;Included className : &quot; + className);\n            return new HttpServiceCVT(cv, className);\n        }\n        return cv;\n</code></pre>\n<p>The print statement before that check, prints all the loaded classes. I see a lot of classes from java/lang/ package but not java/lang/Thread.</p>\n<p>Has anyone instrumented thread class? What am I missing?</p>\n<p>Please don't get mad at Sysout's. It was a just for a quick debug. I didn't expect to get stuck here.</p>\n<p>***********<strong>Update based on @JohannesKuhn comment.</strong></p>\n<p>Tried to retransform classes by adding below line in my agent\n<code>inst.retransformClasses(Class.forName(&quot;java.lang.Thread&quot;));</code>\nRan into JVM crashes, so modified the code to just instrument the Thread class and init (not ) method.\nInstrumenting &quot;init&quot; works but errors out for a different method that is not instrumented. Output below</p>\n<pre><code>java.lang.NoClassDefFoundError \n - klass: 'java/lang/NoClassDefFoundError'\n#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  Internal Error (exceptions.cpp:427), pid=12444, tid=0x0000000000000c03\n#  fatal error: ExceptionMark destructor expects no pending exceptions\n</code></pre>\n<p>corresponding code</p>\n<pre><code>\n    if(this.className.equals(&quot;java/lang/Thread&quot;) &amp;&amp; name.equals(&quot;init&quot;)) {\n        return new TracerMV(access, name, desc, mv, true, className);\n    }else {\n        System.out.println( &quot;not init so returning mv for method  &quot; + name);\n        return mv;\n    }\n\n</code></pre>\n<p>Does this mean the code is trying to instrument java.lang.NoClassDefFoundError? If so, how is it doing it as I have set the filters to just transform the thread class.</p>\n"},{"tags":["java","noclassdeffounderror"],"comments":[{"owner":{"account_id":62347,"reputation":3769,"user_id":185310,"accept_rate":80,"display_name":"Mike K."},"score":0,"creation_date":1316662963,"post_id":7509295,"comment_id":9093937,"body_markdown":"Your classpath is off by a directory, you may want to post your ant script or the relevant part of it at least.","body":"Your classpath is off by a directory, you may want to post your ant script or the relevant part of it at least."}],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":1,"up_vote_count":138,"is_accepted":true,"score":137,"last_activity_date":1316664306,"creation_date":1316663080,"answer_id":7509317,"question_id":7509295,"body_markdown":"&gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: ClientREST \r\n\r\nSo, you ran it as `java ClientREST`. It&#39;s expecting a `ClientREST.class` without any `package`.\r\n\r\n---\r\n\r\n&gt; (wrong name: clientrest/ClientREST)\r\n\r\nHey, the class is trying to tell you that it has a `package clientrest;`. You need to run it from the package root on. Go one folder up so that you&#39;re in the folder which in turn contains the `clientrest` folder representing the package and then execute `java clientrest.ClientREST`.\r\n\r\nYou should **not** go inside the `clientrest` package folder and execute `java ClientREST`.","title":"NoClassDefFoundError: wrong name","body":"<blockquote>\n  <p>Exception in thread \"main\" java.lang.NoClassDefFoundError: ClientREST </p>\n</blockquote>\n\n<p>So, you ran it as <code>java ClientREST</code>. It's expecting a <code>ClientREST.class</code> without any <code>package</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p>(wrong name: clientrest/ClientREST)</p>\n</blockquote>\n\n<p>Hey, the class is trying to tell you that it has a <code>package clientrest;</code>. You need to run it from the package root on. Go one folder up so that you're in the folder which in turn contains the <code>clientrest</code> folder representing the package and then execute <code>java clientrest.ClientREST</code>.</p>\n\n<p>You should <strong>not</strong> go inside the <code>clientrest</code> package folder and execute <code>java ClientREST</code>.</p>\n"},{"tags":[],"owner":{"account_id":227806,"reputation":897,"user_id":489697,"display_name":"Swapnil"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1316663221,"creation_date":1316663221,"answer_id":7509330,"question_id":7509295,"body_markdown":"Probably the location you are generating your classes in doesnt exists on the class path. While running use the jvm arg -verbose while running and check the log whether the class is being loaded or not. \r\n\r\nThe output will also give you clue as to where the clasess are being loaded from, make sure that your class files are present in that location.","title":"NoClassDefFoundError: wrong name","body":"<p>Probably the location you are generating your classes in doesnt exists on the class path. While running use the jvm arg -verbose while running and check the log whether the class is being loaded or not. </p>\n\n<p>The output will also give you clue as to where the clasess are being loaded from, make sure that your class files are present in that location.</p>\n"},{"tags":[],"owner":{"account_id":982989,"reputation":4440,"user_id":1002222,"accept_rate":96,"display_name":"Ga"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1387060913,"creation_date":1354602341,"answer_id":13697239,"question_id":7509295,"body_markdown":"I encountered this error using command line java:\r\n\r\n`java -cp stuff/src/mypackage Test`\r\n\r\nwhere `Test.java` resides in the package `mypackage`.\r\n\r\nInstead, you need to set the classpath `-cp` to the base folder, in this case, src, then prepend the package to the file name.\r\n\r\nSo it will end up looking like this:\r\n\r\n`java -cp stuff/src mypackage.Test`","title":"NoClassDefFoundError: wrong name","body":"<p>I encountered this error using command line java:</p>\n\n<p><code>java -cp stuff/src/mypackage Test</code></p>\n\n<p>where <code>Test.java</code> resides in the package <code>mypackage</code>.</p>\n\n<p>Instead, you need to set the classpath <code>-cp</code> to the base folder, in this case, src, then prepend the package to the file name.</p>\n\n<p>So it will end up looking like this:</p>\n\n<p><code>java -cp stuff/src mypackage.Test</code></p>\n"},{"tags":[],"owner":{"account_id":5214111,"reputation":91,"user_id":4169616,"display_name":"Slaphead"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1414580681,"creation_date":1414579986,"answer_id":26628470,"question_id":7509295,"body_markdown":"To further note on Garry&#39;s reply: The class path is the base directory where the class itself resides. So if the class file is here -\r\n\r\n/home/person/javastuff/classes/package1/subpackage/javaThing.class\r\n\r\nYou would need to reference the class path as follows:\r\n\r\n/home/person/javastuff/classes\r\n\r\nSo to run from the command line, the full command would be -\r\n\r\njava -cp /home/person/javastuff/classes package1/subpackage/javaThing\r\n\r\ni.e. the template for the above is\r\n\r\n*java_executable -cp classpath the_class_itself_within_the_class_path*\r\n\r\nThat&#39;s how I finally got mine to work without having the class path in the environment","title":"NoClassDefFoundError: wrong name","body":"<p>To further note on Garry's reply: The class path is the base directory where the class itself resides. So if the class file is here -</p>\n\n<p>/home/person/javastuff/classes/package1/subpackage/javaThing.class</p>\n\n<p>You would need to reference the class path as follows:</p>\n\n<p>/home/person/javastuff/classes</p>\n\n<p>So to run from the command line, the full command would be -</p>\n\n<p>java -cp /home/person/javastuff/classes package1/subpackage/javaThing</p>\n\n<p>i.e. the template for the above is</p>\n\n<p><em>java_executable -cp classpath the_class_itself_within_the_class_path</em></p>\n\n<p>That's how I finally got mine to work without having the class path in the environment</p>\n"},{"tags":[],"owner":{"account_id":7627267,"reputation":41,"user_id":5783368,"display_name":"ShivaMahesh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1452676666,"creation_date":1452676333,"answer_id":34762516,"question_id":7509295,"body_markdown":"Try the below syntax:\r\n\r\nSuppose java File resides here: `fm/src/com/gsd/FileName.java`\r\n\r\nSo you can run using the below syntax:\r\n\r\n(Make current directory to &#39;fm&#39;)\r\n\r\n`java src.com.gsd.FileName`","title":"NoClassDefFoundError: wrong name","body":"<p>Try the below syntax:</p>\n\n<p>Suppose java File resides here: <code>fm/src/com/gsd/FileName.java</code></p>\n\n<p>So you can run using the below syntax:</p>\n\n<p>(Make current directory to 'fm')</p>\n\n<p><code>java src.com.gsd.FileName</code></p>\n"},{"tags":[],"owner":{"account_id":16425204,"reputation":959,"user_id":11865450,"display_name":"Vivek Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631547007,"creation_date":1631543415,"answer_id":69164475,"question_id":7509295,"body_markdown":"Suppose you have class A\r\nand a class B\r\n\r\n        public class A{\r\n          public static void main(String[] args){\r\n          ....\r\n          .....\r\n         //creating classB object\r\n         new classB();\r\n        \r\n        }\r\n       }\r\n        class B{\r\n        \r\n        }\r\n\r\n   \r\n\r\nthis issue can be resolved by moving class B inside of class A and using static keyword\r\n\r\n\r\n\r\n    public class A{\r\n      public static void main(String[] args){\r\n      ....\r\n      .....\r\n     \r\n      //creating class B\r\n    new classB();\r\n   \r\n    static class B{\r\n    \r\n    }   \r\n    }\r\n\r\n","title":"NoClassDefFoundError: wrong name","body":"<p>Suppose you have class A\nand a class B</p>\n<pre><code>    public class A{\n      public static void main(String[] args){\n      ....\n      .....\n     //creating classB object\n     new classB();\n    \n    }\n   }\n    class B{\n    \n    }\n</code></pre>\n<p>this issue can be resolved by moving class B inside of class A and using static keyword</p>\n<pre><code>public class A{\n  public static void main(String[] args){\n  ....\n  .....\n \n  //creating class B\nnew classB();\n\nstatic class B{\n\n}   \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6563540,"reputation":1,"user_id":5073907,"display_name":"Sankara Sarma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644544957,"creation_date":1644544957,"answer_id":71074544,"question_id":7509295,"body_markdown":"Here is my class structure \r\n\r\n    package org.handson.basics;\r\n    \r\n    public class WithoutMain {\r\n    \r\n        public static void main() {\r\n            System.out.println(&quot;With main()...&quot;);\r\n        }\r\n    }\r\n\r\nTo compile this program, I had to use absolute path. So from src/main/java I ran:\r\n\r\n    javac org/handson/basics/WithoutMain.java\r\n\r\nInitially I tried with the below command from basics folder and it didn&#39;t work\r\n\r\n    basics % java WithoutMain \r\n    Error: Could not find or load main class WithoutMain\r\n    Caused by: java.lang.NoClassDefFoundError: org/handson/basics/WithoutMain (wrong name: WithoutMain)\r\n\r\nLater I went back to src\\main\\java folder and ran the class with relevant package structure, which worked as expected.\r\n\r\n    java % java org.handson.basics.WithoutMain      \r\n    With main()...\r\n\r\n","title":"NoClassDefFoundError: wrong name","body":"<p>Here is my class structure</p>\n<pre><code>package org.handson.basics;\n\npublic class WithoutMain {\n\n    public static void main() {\n        System.out.println(&quot;With main()...&quot;);\n    }\n}\n</code></pre>\n<p>To compile this program, I had to use absolute path. So from src/main/java I ran:</p>\n<pre><code>javac org/handson/basics/WithoutMain.java\n</code></pre>\n<p>Initially I tried with the below command from basics folder and it didn't work</p>\n<pre><code>basics % java WithoutMain \nError: Could not find or load main class WithoutMain\nCaused by: java.lang.NoClassDefFoundError: org/handson/basics/WithoutMain (wrong name: WithoutMain)\n</code></pre>\n<p>Later I went back to src\\main\\java folder and ran the class with relevant package structure, which worked as expected.</p>\n<pre><code>java % java org.handson.basics.WithoutMain      \nWith main()...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5184085,"reputation":23,"user_id":6382538,"display_name":"Andrew B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660767581,"creation_date":1660767581,"answer_id":73394477,"question_id":7509295,"body_markdown":"I also have encountered this error on Windows when using Class.forName() where the class name I use is correct *except for case*.\r\n\r\nMy guess is that Java is able to find the file at the path (because Windows paths are case-insensitive) but the parsed class&#39;s name does not match the name given to Class.forName().\r\n\r\nFixing the case in the class name argument fixed the error.","title":"NoClassDefFoundError: wrong name","body":"<p>I also have encountered this error on Windows when using Class.forName() where the class name I use is correct <em>except for case</em>.</p>\n<p>My guess is that Java is able to find the file at the path (because Windows paths are case-insensitive) but the parsed class's name does not match the name given to Class.forName().</p>\n<p>Fixing the case in the class name argument fixed the error.</p>\n"}],"owner":{"account_id":927811,"reputation":833,"user_id":958228,"accept_rate":33,"display_name":"thinkBig"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128201,"favorite_count":0,"down_vote_count":0,"up_vote_count":71,"accepted_answer_id":7509317,"answer_count":8,"score":71,"last_activity_date":1660767581,"creation_date":1316662810,"question_id":7509295,"body_markdown":"I wrote a java program to test RESTful web services by using Netbeans7.0.1 and it works fine there. Now I wrote the build.xml file to compile the code and when I try to run the generated .class file I always got this exception:\r\n\r\n\tException in thread &quot;main&quot; java.lang.NoClassDefFoundError: ClientREST (wrong name: clientrest/ClientREST)\r\n\t\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\t\tat java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)\r\n\t\tat java.lang.ClassLoader.defineClass(ClassLoader.java:616)\r\n\t\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)\r\n\t\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:283)\r\n\t\tat java.net.URLClassLoader.access$000(URLClassLoader.java:58)\r\n\t\tat java.net.URLClassLoader$1.run(URLClassLoader.java:197)\r\n\t\tat java.security.AccessController.doPrivileged(Native Method)\r\n\t\tat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\r\n\t\tat java.lang.ClassLoader.loadClass(ClassLoader.java:307)\r\n\t\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\r\n\t\tat java.lang.ClassLoader.loadClass(ClassLoader.java:248)\r\n\tCould not find the main class: ClientREST. Program will exit.\r\n\r\nThe name and path are correct, so any thoughts why I&#39;m getting this exception?\r\n\r\n","title":"NoClassDefFoundError: wrong name","body":"<p>I wrote a java program to test RESTful web services by using Netbeans7.0.1 and it works fine there. Now I wrote the build.xml file to compile the code and when I try to run the generated .class file I always got this exception:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: ClientREST (wrong name: clientrest/ClientREST)\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:616)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)\n    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)\nCould not find the main class: ClientREST. Program will exit.\n</code></pre>\n\n<p>The name and path are correct, so any thoughts why I'm getting this exception?</p>\n"},{"tags":["java","regex","string","split"],"comments":[{"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":1,"creation_date":1660766397,"post_id":73394247,"comment_id":129613279,"body_markdown":"Use `myStr = myStr.replaceFirst(&quot;^.*[/\\\\\\\\]&quot;, &quot;&quot;);`","body":"Use <code>myStr = myStr.replaceFirst(&quot;^.*[&#47;\\\\\\\\]&quot;, &quot;&quot;);</code>"}],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660766544,"creation_date":1660766544,"answer_id":73394313,"question_id":73394247,"body_markdown":"You can just replace everything upto last `/` or `\\` using `replaceFirst`:\r\n\r\n\r\n```Java\r\nString myStr = &quot;%abc%\\\\xyz\\\\test.exe&quot;;\r\nmyStr = myStr.replaceFirst(&quot;^.*[/\\\\\\\\]&quot;, &quot;&quot;);\r\n//=&gt; &quot;test.exe&quot;\r\n\r\nmyStr = &quot;%abc%/xyz/test.exe&quot;;\r\nmyStr = myStr.replaceFirst(&quot;^.*[/\\\\\\\\]&quot;, &quot;&quot;);\r\n//=&gt; &quot;test.exe&quot;\r\n\r\nmyStr = &quot;test.exe&quot;;\r\nmyStr = myStr.replaceFirst(&quot;^.*[/\\\\\\\\]&quot;, &quot;&quot;);\r\n//=&gt; &quot;test.exe&quot;\r\n```\r\n\r\n[RegEx Demo][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/QcqAS8/1","title":"Extract everything after slash or backslash using Java","body":"<p>You can just replace everything upto last <code>/</code> or <code>\\</code> using <code>replaceFirst</code>:</p>\n<pre><code>String myStr = &quot;%abc%\\\\xyz\\\\test.exe&quot;;\nmyStr = myStr.replaceFirst(&quot;^.*[/\\\\\\\\]&quot;, &quot;&quot;);\n//=&gt; &quot;test.exe&quot;\n\nmyStr = &quot;%abc%/xyz/test.exe&quot;;\nmyStr = myStr.replaceFirst(&quot;^.*[/\\\\\\\\]&quot;, &quot;&quot;);\n//=&gt; &quot;test.exe&quot;\n\nmyStr = &quot;test.exe&quot;;\nmyStr = myStr.replaceFirst(&quot;^.*[/\\\\\\\\]&quot;, &quot;&quot;);\n//=&gt; &quot;test.exe&quot;\n</code></pre>\n<p><a href=\"https://regex101.com/r/QcqAS8/1\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n"},{"tags":[],"owner":{"account_id":7916222,"reputation":303,"user_id":5978561,"display_name":"Jake Henry"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660767265,"creation_date":1660767265,"answer_id":73394422,"question_id":73394247,"body_markdown":"If you are using Java 7+ you don&#39;t need regex.\r\n\r\nCode:        \r\n\r\n    String myStr = &quot;%abc%\\\\xyz\\\\test.exe&quot;;\r\n    String myStr1 = &quot;%abc%/xyz/test.exe&quot;;\r\n    String myStr2 = &quot;test.exe&quot;;\r\n    System.out.println(Paths.get(myStr).getFileName().toString());\r\n    System.out.println(Paths.get(myStr1).getFileName().toString());\r\n    System.out.println(Paths.get(myStr2).getFileName().toString());\r\n\r\nOutput:\r\n\r\n    test.exe\r\n    test.exe\r\n    test.exe","title":"Extract everything after slash or backslash using Java","body":"<p>If you are using Java 7+ you don't need regex.</p>\n<p>Code:</p>\n<pre><code>String myStr = &quot;%abc%\\\\xyz\\\\test.exe&quot;;\nString myStr1 = &quot;%abc%/xyz/test.exe&quot;;\nString myStr2 = &quot;test.exe&quot;;\nSystem.out.println(Paths.get(myStr).getFileName().toString());\nSystem.out.println(Paths.get(myStr1).getFileName().toString());\nSystem.out.println(Paths.get(myStr2).getFileName().toString());\n</code></pre>\n<p>Output:</p>\n<pre><code>test.exe\ntest.exe\ntest.exe\n</code></pre>\n"}],"owner":{"account_id":9185963,"reputation":201,"user_id":6828175,"accept_rate":78,"display_name":"hal9000"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73394313,"answer_count":2,"score":1,"last_activity_date":1660767265,"creation_date":1660766129,"question_id":73394247,"body_markdown":"I am a newbie in regex and trying to figure out how I could split this string in Java:\r\n\r\nMy input string can be of one of the following forms:\r\n\r\n    String myStr = &quot;%abc%\\xyz\\test.exe&quot;;\r\n    String myStr = &quot;%abc%/xyz/test.exe&quot;;\r\n    String myStr = test.exe\r\n\r\nI am trying to extract &quot;test.exe&quot; in every case.\r\n\r\nI am not able to split the input string correctly as if I use the following:\r\n\r\n    System.out.println(Arrays.toString(myStr.split(&quot;[^\\\\/]+$&quot;)));\r\n\r\nI get:\r\n\r\n    [%abc%/xyz/]\r\n\r\nWhich is part of the string I don&#39;t want. Any idea how I can get the delimiter itself in this case with Java string split?","title":"Extract everything after slash or backslash using Java","body":"<p>I am a newbie in regex and trying to figure out how I could split this string in Java:</p>\n<p>My input string can be of one of the following forms:</p>\n<pre><code>String myStr = &quot;%abc%\\xyz\\test.exe&quot;;\nString myStr = &quot;%abc%/xyz/test.exe&quot;;\nString myStr = test.exe\n</code></pre>\n<p>I am trying to extract &quot;test.exe&quot; in every case.</p>\n<p>I am not able to split the input string correctly as if I use the following:</p>\n<pre><code>System.out.println(Arrays.toString(myStr.split(&quot;[^\\\\/]+$&quot;)));\n</code></pre>\n<p>I get:</p>\n<pre><code>[%abc%/xyz/]\n</code></pre>\n<p>Which is part of the string I don't want. Any idea how I can get the delimiter itself in this case with Java string split?</p>\n"},{"tags":["java","spring","spring-boot","maven","gradle"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":1,"creation_date":1660760330,"post_id":73392870,"comment_id":129611231,"body_markdown":"`B&#39;s initialization stage somehow took over the control and overwrote the start process of A`, but the class that contains the main() has a unique FQN ? Maybe post your Spring output ... Both projects share the same namespace ?","body":"<code>B&#39;s initialization stage somehow took over the control and overwrote the start process of A</code>, but the class that contains the main() has a unique FQN ? Maybe post your Spring output ... Both projects share the same namespace ?"},{"owner":{"account_id":18625023,"reputation":27,"user_id":13574344,"display_name":"stackoverflow_user"},"score":0,"creation_date":1660767379,"post_id":73392870,"comment_id":129613609,"body_markdown":"@PeterMmm Hi peter, thanks for commenting, I&#39;ve updated the post","body":"@PeterMmm Hi peter, thanks for commenting, I&#39;ve updated the post"},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1660888350,"post_id":73392870,"comment_id":129644234,"body_markdown":"Why DetectScanHelper extends Application ?","body":"Why DetectScanHelper extends Application ?"},{"owner":{"account_id":18625023,"reputation":27,"user_id":13574344,"display_name":"stackoverflow_user"},"score":0,"creation_date":1661117578,"post_id":73392870,"comment_id":129689672,"body_markdown":"@PeterMmm cause the Application class is the entry point of B. The only way to run B is to call the main() in the Application class.","body":"@PeterMmm cause the Application class is the entry point of B. The only way to run B is to call the main() in the Application class."}],"owner":{"account_id":18625023,"reputation":27,"user_id":13574344,"display_name":"stackoverflow_user"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660767180,"creation_date":1660758479,"question_id":73392870,"body_markdown":"I have 2 spring boot applications A and B managed by Gradle. B was packaged as a normal jar and imported as a dependency in A. And B&#39;s main() function/entry point will be called by A based on the business logic.\r\n\r\nThe problem right now is that when I was trying to start A, B&#39;s initialization stage somehow took over the control and overwrote the start process of A.\r\n\r\nIs there any way to customize the initialization order or invoke B only when I need it?\r\n\r\n**Update:**\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe Application class that being extended is the entry point of B, and main() is invoked inside the function.\r\nThe application is supposed to accept arguments from the command line, then parse them and pass them to this scanHelper().\r\n\r\n[![enter image description here][2]][2]\r\nThe output shows it invokes B&#39;s main() directly, so it&#39;s not able to recognize the arguments.\r\n\r\nHere is the B&#39;s jar structure\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FHlgr.png\r\n  [2]: https://i.stack.imgur.com/z9hT5.png\r\n  [3]: https://i.stack.imgur.com/yg9Nw.png","title":"Spring Boot application initialization problem","body":"<p>I have 2 spring boot applications A and B managed by Gradle. B was packaged as a normal jar and imported as a dependency in A. And B's main() function/entry point will be called by A based on the business logic.</p>\n<p>The problem right now is that when I was trying to start A, B's initialization stage somehow took over the control and overwrote the start process of A.</p>\n<p>Is there any way to customize the initialization order or invoke B only when I need it?</p>\n<p><strong>Update:</strong>\n<a href=\"https://i.stack.imgur.com/FHlgr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FHlgr.png\" alt=\"enter image description here\" /></a></p>\n<p>The Application class that being extended is the entry point of B, and main() is invoked inside the function.\nThe application is supposed to accept arguments from the command line, then parse them and pass them to this scanHelper().</p>\n<p><a href=\"https://i.stack.imgur.com/z9hT5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z9hT5.png\" alt=\"enter image description here\" /></a>\nThe output shows it invokes B's main() directly, so it's not able to recognize the arguments.</p>\n<p>Here is the B's jar structure\n<a href=\"https://i.stack.imgur.com/yg9Nw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yg9Nw.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","oop","functional-programming"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1573005374,"post_id":58721937,"comment_id":103736527,"body_markdown":"It would help if you provided more code.  Like your basic `SpecialList` class.  And `CachedSupplier`.","body":"It would help if you provided more code.  Like your basic <code>SpecialList</code> class.  And <code>CachedSupplier</code>."},{"owner":{"account_id":16902380,"reputation":55,"user_id":12223380,"display_name":"Iva"},"score":0,"creation_date":1573005650,"post_id":58721937,"comment_id":103736573,"body_markdown":"done! sorry for missing those out!","body":"done! sorry for missing those out!"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1573658990,"post_id":58721937,"comment_id":103954899,"body_markdown":"*Doesn&#39;t the &#39;U&#39; become a T when returned?* Of course not. Why should the `T` become a `U`? These are different types. The argument `Function&lt;T, U&gt; mapper` tells how you can convert a `T` to an `U`, which will happen when you apply that function. But your `new SpecialList&lt;U&gt;(this.supplier)` expression doesnt use the mapper at all. Your `CachedSupplier&lt;T&gt;` provides a `T`, not a `U`. You could create a new `Supplier` that applies the mapper function, e.g. `new SpecialList&lt;U&gt;(() -&gt; mapper.apply( this.supplier.get()))`.","body":"<i>Doesn&#39;t the &#39;U&#39; become a T when returned?</i> Of course not. Why should the <code>T</code> become a <code>U</code>? These are different types. The argument <code>Function&lt;T, U&gt; mapper</code> tells how you can convert a <code>T</code> to an <code>U</code>, which will happen when you apply that function. But your <code>new SpecialList&lt;U&gt;(this.supplier)</code> expression doesnt use the mapper at all. Your <code>CachedSupplier&lt;T&gt;</code> provides a <code>T</code>, not a <code>U</code>. You could create a new <code>Supplier</code> that applies the mapper function, e.g. <code>new SpecialList&lt;U&gt;(() -&gt; mapper.apply( this.supplier.get()))</code>."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573007922,"creation_date":1573007922,"answer_id":58722322,"question_id":58721937,"body_markdown":"According to the code you posted, there is a compile-time error in one of the constructors for class `SpecialList`...\r\n```java\r\nprivate &lt;R&gt; SpecialList(Function&lt;T, R&gt; mapper, T v) {\r\n    this.supplier = new CachedSupplier&lt;T&gt;(() -&gt; mapper.apply(v));\r\n    this.isAvailable = false;\r\n}\r\n```\r\nFirstly, in the code you posted, there is no constructor in inner class `CachedSupplier` that takes a `Function` parameter, so you need to add one with this signature:\r\n```java\r\npublic &lt;R&gt; CachedSupplier(Function&lt;T, R&gt; mapper)\r\n```\r\nAnd the second problem with the `SpecialList` constructor is the lambda expression. Abstract method `apply` in interface `Function` has a parameter, which your lambda expression is missing. So the constructor code should be:\r\n```java\r\nprivate &lt;R&gt; SpecialList(Function&lt;T, R&gt; mapper, T v) {\r\n    this.supplier = new CachedSupplier&lt;T&gt;((v) -&gt; mapper.apply(v));\r\n    this.isAvailable = false;\r\n}\r\n```","title":"Implementing map function","body":"<p>According to the code you posted, there is a compile-time error in one of the constructors for class <code>SpecialList</code>...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private &lt;R&gt; SpecialList(Function&lt;T, R&gt; mapper, T v) {\n    this.supplier = new CachedSupplier&lt;T&gt;(() -&gt; mapper.apply(v));\n    this.isAvailable = false;\n}\n</code></pre>\n\n<p>Firstly, in the code you posted, there is no constructor in inner class <code>CachedSupplier</code> that takes a <code>Function</code> parameter, so you need to add one with this signature:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public &lt;R&gt; CachedSupplier(Function&lt;T, R&gt; mapper)\n</code></pre>\n\n<p>And the second problem with the <code>SpecialList</code> constructor is the lambda expression. Abstract method <code>apply</code> in interface <code>Function</code> has a parameter, which your lambda expression is missing. So the constructor code should be:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private &lt;R&gt; SpecialList(Function&lt;T, R&gt; mapper, T v) {\n    this.supplier = new CachedSupplier&lt;T&gt;((v) -&gt; mapper.apply(v));\n    this.isAvailable = false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21664607,"reputation":435,"user_id":15983216,"display_name":"Sebastian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660766986,"creation_date":1660748888,"answer_id":73390859,"question_id":58721937,"body_markdown":"I think you&#39;re doing an overkill by checking `isAvailable` in both, the `SpecialList` and the `CachedSupplier`. It seems enough to me to do so in the `CachedSupplier` and reduce the members of `SpecialList` to just the `supplier` (which is, when the value is available, simply a value-getter without additional costly evaluations). And in the constructors you make sure that the `supplier` is a cached one, when needed (i.e. when you don&#39;t have the value yet).\r\nSo here&#39;s my suggestion. Further comments are directly in the source code (which compiles now without errors or warnings):\r\n\r\n    class SpecialList&lt;T&gt; {\r\n    static class CachedSupplier&lt;R&gt; implements Supplier&lt;R&gt; {\r\n    \t/* R is a priori an idependent parameter. If you call it T again, then you get a warning\r\n    \t * that the original T is hidden within the new nested class (though it wouldn&#39;t really matter here),\r\n    \t * as one doesn&#39;t need to refer to it. I made it static, as you don&#39;t need an instance to define it. */\r\n        private Supplier&lt;? extends R&gt; supplier;\r\n        private R value;\r\n        boolean isAvailable;\r\n\r\n        public CachedSupplier(Supplier&lt;? extends R&gt; supplier) {\r\n            this.supplier = supplier;\r\n            this.isAvailable = false;\r\n        }\r\n\r\n        @Override\r\n\t\tpublic R get() {\r\n            if (!isAvailable) {\r\n                value = supplier.get();\r\n                isAvailable = true;\r\n            }\r\n            return value;\r\n        }\r\n    }\r\n\r\n    private Supplier&lt;T&gt; supplier;\r\n\r\n    private SpecialList(T value) {\r\n    \t/* in this case no lazy evaluation and no caching needed */\r\n        this.supplier = () -&gt; value;\r\n    }\r\n\r\n    private SpecialList(Supplier&lt;T&gt; s) {\r\n        this.supplier = new CachedSupplier&lt;T&gt;(s);\r\n    }\r\n\r\n    private SpecialList(CachedSupplier&lt;T&gt; s) {\r\n        this.supplier = s;\r\n    }\r\n\r\n    private &lt;R&gt; SpecialList(Function&lt;R, T&gt; mapper, R v) {\r\n    \t/* This constructor is not needed anymore in my suggested code. \r\n         * I left it simply, in order to show how to fix the type errors related to it. \r\n         * if I understood correctly the intentions of this constructor,\r\n    \t * R and T have to be swapped w.r.t the original post.\r\n    \t * This is a constructor that uses an R-value and a mapper R-&gt;T to create a SpecialList&lt;T&gt; */\r\n        this.supplier = new CachedSupplier&lt;T&gt;(() -&gt; mapper.apply(v));\r\n    }\r\n\r\n    public static &lt;T&gt; SpecialList&lt;T&gt; of(T value) {\r\n        return new SpecialList&lt;&gt;(value);\r\n    }\r\n\r\n    public static &lt;T&gt; SpecialList&lt;T&gt; of(Supplier&lt;T&gt; supplier) {\r\n        return new SpecialList&lt;&gt;(supplier);\r\n    }\r\n\r\n    public &lt;R&gt; SpecialList&lt;R&gt; map(Function&lt;T, R&gt; mapper) {\r\n    \t/* mapper is here different (opposite direction) than in the last of the constructors.\r\n    \t * Here we have an existing SpecialList containing a value of Type T which will be turned into a\r\n    \t * SpecialList containing a value of type R by applying a mapper T-&gt;R after getting the value from\r\n    \t * the original SpecialList */\r\n\r\n        return new SpecialList&lt;R&gt;(() -&gt; mapper.apply(get()));\r\n    }\r\n\r\n    public T get() {\r\n\r\n        return this.supplier.get();\r\n    }\r\n    }\r\nThis solution doesn&#39;t yet take care of the `toString()` implementation. When you want to implement also the latter, it might be more natural to make `SpecialList` a subclass of `CachedSupplier` (with the additional map- and toString- methods and direct access to `isAvailable`) ","title":"Implementing map function","body":"<p>I think you're doing an overkill by checking <code>isAvailable</code> in both, the <code>SpecialList</code> and the <code>CachedSupplier</code>. It seems enough to me to do so in the <code>CachedSupplier</code> and reduce the members of <code>SpecialList</code> to just the <code>supplier</code> (which is, when the value is available, simply a value-getter without additional costly evaluations). And in the constructors you make sure that the <code>supplier</code> is a cached one, when needed (i.e. when you don't have the value yet).\nSo here's my suggestion. Further comments are directly in the source code (which compiles now without errors or warnings):</p>\n<pre><code>class SpecialList&lt;T&gt; {\nstatic class CachedSupplier&lt;R&gt; implements Supplier&lt;R&gt; {\n    /* R is a priori an idependent parameter. If you call it T again, then you get a warning\n     * that the original T is hidden within the new nested class (though it wouldn't really matter here),\n     * as one doesn't need to refer to it. I made it static, as you don't need an instance to define it. */\n    private Supplier&lt;? extends R&gt; supplier;\n    private R value;\n    boolean isAvailable;\n\n    public CachedSupplier(Supplier&lt;? extends R&gt; supplier) {\n        this.supplier = supplier;\n        this.isAvailable = false;\n    }\n\n    @Override\n    public R get() {\n        if (!isAvailable) {\n            value = supplier.get();\n            isAvailable = true;\n        }\n        return value;\n    }\n}\n\nprivate Supplier&lt;T&gt; supplier;\n\nprivate SpecialList(T value) {\n    /* in this case no lazy evaluation and no caching needed */\n    this.supplier = () -&gt; value;\n}\n\nprivate SpecialList(Supplier&lt;T&gt; s) {\n    this.supplier = new CachedSupplier&lt;T&gt;(s);\n}\n\nprivate SpecialList(CachedSupplier&lt;T&gt; s) {\n    this.supplier = s;\n}\n\nprivate &lt;R&gt; SpecialList(Function&lt;R, T&gt; mapper, R v) {\n    /* This constructor is not needed anymore in my suggested code. \n     * I left it simply, in order to show how to fix the type errors related to it. \n     * if I understood correctly the intentions of this constructor,\n     * R and T have to be swapped w.r.t the original post.\n     * This is a constructor that uses an R-value and a mapper R-&gt;T to create a SpecialList&lt;T&gt; */\n    this.supplier = new CachedSupplier&lt;T&gt;(() -&gt; mapper.apply(v));\n}\n\npublic static &lt;T&gt; SpecialList&lt;T&gt; of(T value) {\n    return new SpecialList&lt;&gt;(value);\n}\n\npublic static &lt;T&gt; SpecialList&lt;T&gt; of(Supplier&lt;T&gt; supplier) {\n    return new SpecialList&lt;&gt;(supplier);\n}\n\npublic &lt;R&gt; SpecialList&lt;R&gt; map(Function&lt;T, R&gt; mapper) {\n    /* mapper is here different (opposite direction) than in the last of the constructors.\n     * Here we have an existing SpecialList containing a value of Type T which will be turned into a\n     * SpecialList containing a value of type R by applying a mapper T-&gt;R after getting the value from\n     * the original SpecialList */\n\n    return new SpecialList&lt;R&gt;(() -&gt; mapper.apply(get()));\n}\n\npublic T get() {\n\n    return this.supplier.get();\n}\n}\n</code></pre>\n<p>This solution doesn't yet take care of the <code>toString()</code> implementation. When you want to implement also the latter, it might be more natural to make <code>SpecialList</code> a subclass of <code>CachedSupplier</code> (with the additional map- and toString- methods and direct access to <code>isAvailable</code>)</p>\n"},{"tags":[],"owner":{"account_id":20784895,"reputation":13,"user_id":15264365,"display_name":"Pavel K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660765008,"creation_date":1660753424,"answer_id":73391883,"question_id":58721937,"body_markdown":"The problem is your map function is changing the SpecialList type parameter from T to R. But in the fragment highlited by compiler you return still SpecialList&lt;T&gt;. \r\n\r\nThings you can do:\r\n\r\n 1. If you are not planning to change the type of elements with your map() function, get rid of R, and replace ```Function&lt;? super T,? extends R&gt; mapper``` with ```Function&lt;? super T,? extends T&gt; mapper```. However, this way the mapper would be totaly omited, which might not be the desired behaviuor. \r\n 2. Otherwise, you should pass into your SpecialList constructor a combination of the original supplier and new mapper like so:\r\n``` java\r\n    return new SpecialList&lt;R&gt;(() -&gt; {\r\n        T originalValue = this.supplier.get();\r\n        return mapper.apply(originalValue);\r\n    };\r\n```","title":"Implementing map function","body":"<p>The problem is your map function is changing the SpecialList type parameter from T to R. But in the fragment highlited by compiler you return still SpecialList.</p>\n<p>Things you can do:</p>\n<ol>\n<li>If you are not planning to change the type of elements with your map() function, get rid of R, and replace <code>Function&lt;? super T,? extends R&gt; mapper</code> with <code>Function&lt;? super T,? extends T&gt; mapper</code>. However, this way the mapper would be totaly omited, which might not be the desired behaviuor.</li>\n<li>Otherwise, you should pass into your SpecialList constructor a combination of the original supplier and new mapper like so:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    return new SpecialList&lt;R&gt;(() -&gt; {\n        T originalValue = this.supplier.get();\n        return mapper.apply(originalValue);\n    };\n</code></pre>\n"}],"owner":{"account_id":16902380,"reputation":55,"user_id":12223380,"display_name":"Iva"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1660766986,"creation_date":1573004873,"question_id":58721937,"body_markdown":"I am creating a &#39;SpecialList&#39; and am require to implement the map function. The list should be lazy, and will only produce values when evaluated.\r\n\r\ntoString() returns &quot;?&quot; if the value is not yet available; returns the string representation of the value otherwise.\r\n\r\nget() called when the contents is needed. If the value is already available, return that value; otherwise, compute the value and return it. The computation should only be done once for the same value.\r\n\r\nHere&#39;s what I have:\r\n\r\n    public &lt;U&gt; SpecialList&lt;U&gt; map(Function&lt;T, U&gt; mapper) {\r\n        if (!this.isAvailable) {\r\n            return new SpecialList&lt;U&gt;(this.supplier);\r\n        }\r\n        return new SpecialList&lt;U&gt;(mapper, value);\r\n    }\r\n\r\n    // private constructor\r\n    private SpecialList(CachedSupplier&lt;T&gt; s) {\r\n        this.supplier = s;\r\n        this.isAvailable = false;\r\n    }\r\n\r\n\r\nHowever, it is telling me that there&#39;s no valid constuctor because T cannot be converted to U.\r\n\r\n    SpecialList.java:65: error: no suitable constructor found for SpecialList(SpecialList&lt;T&gt;.CachedSupplier&lt;T&gt;)\r\n                return new SpecialList&lt;U&gt;(this.supplier);\r\n                       ^\r\n        constructor SpecialList.SpecialList(U) is not applicable\r\n          (argument mismatch; SpecialList&lt;T&gt;.CachedSupplier&lt;T&gt; cannot be converted to U)\r\n        constructor SpecialList.SpecialList(Supplier&lt;U&gt;) is not applicable\r\n          (argument mismatch; SpecialList&lt;T&gt;.CachedSupplier&lt;T&gt; cannot be converted to Supplier&lt;U&gt;)\r\n\r\n\r\nDoesn&#39;t the &#39;U&#39; become a T when returned?\r\n\r\nHow do I go about solving this? I am still a little unclear about the method level generic types. But I was told that I need to add the &lt; U &gt; for my map method.\r\n\r\nBelow is my code in full:\r\n\r\n    class SpecialList&lt;T&gt; {\r\n        class CachedSupplier&lt;T&gt; {\r\n            private Supplier&lt;? extends T&gt; supplier;\r\n            private T value;\r\n            boolean isAvailable;\r\n\r\n            public CachedSupplier(Supplier&lt;? extends T&gt; supplier) {\r\n                this.supplier = supplier;\r\n            }\r\n        \r\n            public T get() {\r\n                if (!isAvailable) {\r\n                    value = supplier.get();\r\n                    isAvailable = true;\r\n                }\r\n                return value;\r\n            }\r\n        }\r\n\r\n        private CachedSupplier&lt;T&gt; supplier;\r\n        private T value;\r\n        boolean isAvailable;\r\n\r\n        private SpecialList(T value) {\r\n            this.value = value;\r\n            this.isAvailable = true;\r\n        }\r\n\r\n        private SpecialList(Supplier&lt;T&gt; s) {\r\n            this.supplier = new CachedSupplier&lt;T&gt;(s);\r\n            this.isAvailable = false;\r\n        }\r\n\r\n        private SpecialList(CachedSupplier&lt;T&gt; s) {\r\n            this.supplier = s;\r\n            this.isAvailable = false;\r\n        }\r\n\r\n        private &lt;R&gt; SpecialList(Function&lt;T, R&gt; mapper, T v) {\r\n            this.supplier = new CachedSupplier&lt;T&gt;(() -&gt; mapper.apply(v));\r\n            this.isAvailable = false;\r\n        }\r\n\r\n        public static &lt;T&gt; SpecialList&lt;T&gt; of(T value) {\r\n            return new SpecialList&lt;&gt;(value);\r\n        }\r\n\r\n        public static &lt;T&gt; SpecialList&lt;T&gt; of(Supplier&lt;T&gt; supplier) {\r\n            return new SpecialList&lt;&gt;(supplier);\r\n        }\r\n\r\n        public &lt;R&gt; SpecialList&lt;R&gt; map(Function&lt;? super T,? extends R&gt; mapper) {\r\n            if (!this.isAvailable) {\r\n                return new SpecialList&lt;&gt;(this.supplier);\r\n            }\r\n            return new SpecialList&lt;R&gt;(mapper, value);\r\n        }\r\n\r\n        public T get() {\r\n            if(this.isAvailable) {\r\n                return this.value;\r\n            } else {\r\n                this.value = this.supplier.get();\r\n                this.isAvailable = true;\r\n                return this.value;\r\n            }\r\n        }\r\n    }\r\n\r\nI am still a little confused with Generic Types etc. so please let me know if there&#39;s anything odd/I can improve!\r\n\r\nThanks","title":"Implementing map function","body":"<p>I am creating a 'SpecialList' and am require to implement the map function. The list should be lazy, and will only produce values when evaluated.</p>\n\n<p>toString() returns \"?\" if the value is not yet available; returns the string representation of the value otherwise.</p>\n\n<p>get() called when the contents is needed. If the value is already available, return that value; otherwise, compute the value and return it. The computation should only be done once for the same value.</p>\n\n<p>Here's what I have:</p>\n\n<pre><code>public &lt;U&gt; SpecialList&lt;U&gt; map(Function&lt;T, U&gt; mapper) {\n    if (!this.isAvailable) {\n        return new SpecialList&lt;U&gt;(this.supplier);\n    }\n    return new SpecialList&lt;U&gt;(mapper, value);\n}\n\n// private constructor\nprivate SpecialList(CachedSupplier&lt;T&gt; s) {\n    this.supplier = s;\n    this.isAvailable = false;\n}\n</code></pre>\n\n<p>However, it is telling me that there's no valid constuctor because T cannot be converted to U.</p>\n\n<pre><code>SpecialList.java:65: error: no suitable constructor found for SpecialList(SpecialList&lt;T&gt;.CachedSupplier&lt;T&gt;)\n            return new SpecialList&lt;U&gt;(this.supplier);\n                   ^\n    constructor SpecialList.SpecialList(U) is not applicable\n      (argument mismatch; SpecialList&lt;T&gt;.CachedSupplier&lt;T&gt; cannot be converted to U)\n    constructor SpecialList.SpecialList(Supplier&lt;U&gt;) is not applicable\n      (argument mismatch; SpecialList&lt;T&gt;.CachedSupplier&lt;T&gt; cannot be converted to Supplier&lt;U&gt;)\n</code></pre>\n\n<p>Doesn't the 'U' become a T when returned?</p>\n\n<p>How do I go about solving this? I am still a little unclear about the method level generic types. But I was told that I need to add the &lt; U > for my map method.</p>\n\n<p>Below is my code in full:</p>\n\n<pre><code>class SpecialList&lt;T&gt; {\n    class CachedSupplier&lt;T&gt; {\n        private Supplier&lt;? extends T&gt; supplier;\n        private T value;\n        boolean isAvailable;\n\n        public CachedSupplier(Supplier&lt;? extends T&gt; supplier) {\n            this.supplier = supplier;\n        }\n\n        public T get() {\n            if (!isAvailable) {\n                value = supplier.get();\n                isAvailable = true;\n            }\n            return value;\n        }\n    }\n\n    private CachedSupplier&lt;T&gt; supplier;\n    private T value;\n    boolean isAvailable;\n\n    private SpecialList(T value) {\n        this.value = value;\n        this.isAvailable = true;\n    }\n\n    private SpecialList(Supplier&lt;T&gt; s) {\n        this.supplier = new CachedSupplier&lt;T&gt;(s);\n        this.isAvailable = false;\n    }\n\n    private SpecialList(CachedSupplier&lt;T&gt; s) {\n        this.supplier = s;\n        this.isAvailable = false;\n    }\n\n    private &lt;R&gt; SpecialList(Function&lt;T, R&gt; mapper, T v) {\n        this.supplier = new CachedSupplier&lt;T&gt;(() -&gt; mapper.apply(v));\n        this.isAvailable = false;\n    }\n\n    public static &lt;T&gt; SpecialList&lt;T&gt; of(T value) {\n        return new SpecialList&lt;&gt;(value);\n    }\n\n    public static &lt;T&gt; SpecialList&lt;T&gt; of(Supplier&lt;T&gt; supplier) {\n        return new SpecialList&lt;&gt;(supplier);\n    }\n\n    public &lt;R&gt; SpecialList&lt;R&gt; map(Function&lt;? super T,? extends R&gt; mapper) {\n        if (!this.isAvailable) {\n            return new SpecialList&lt;&gt;(this.supplier);\n        }\n        return new SpecialList&lt;R&gt;(mapper, value);\n    }\n\n    public T get() {\n        if(this.isAvailable) {\n            return this.value;\n        } else {\n            this.value = this.supplier.get();\n            this.isAvailable = true;\n            return this.value;\n        }\n    }\n}\n</code></pre>\n\n<p>I am still a little confused with Generic Types etc. so please let me know if there's anything odd/I can improve!</p>\n\n<p>Thanks</p>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1660592998,"post_id":73365546,"comment_id":129564359,"body_markdown":"Update the question with the relevant text based HTML and your code trials.","body":"Update the question with the relevant text based HTML and your code trials."}],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660591581,"creation_date":1660591581,"answer_id":73365593,"question_id":73365546,"body_markdown":"Find some elements on the page that are loaded last or changing their status indicating the page content now is fully loaded and use ExpectedConditions to wait for those conditions.","title":"How to count webElements on dynamic page? java , selenium","body":"<p>Find some elements on the page that are loaded last or changing their status indicating the page content now is fully loaded and use ExpectedConditions to wait for those conditions.</p>\n"},{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660766711,"creation_date":1660766711,"answer_id":73394340,"question_id":73365546,"body_markdown":"First Use below code to keep on Scrolling till end of page , then find and count the total\r\n\r\n            By by = &quot;your By&quot;;\r\n    \t\tWebDriver webDriver = &quot;driver isntance&quot;;\r\n    \t\tWait wait = new \r\n            FluentWait(webDriver).withTimeout(Duration.ofSeconds(30))\r\n    \t\t\t\t.pollingEvery(Duration.ofMillis(250));\r\n    \t\tlong lastHeight = (long) ((JavascriptExecutor) webDriver)\r\n    \t\t\t\t.executeScript(&quot;return document.body.scrollHeight&quot;);\r\n    \t\twhile (true) {\r\n    \t\t\tint currentcount = webDriver.findElements(by).size();\r\n    \t\t\t((JavascriptExecutor) webDriver)\r\n    \t\t\t\t\t.executeScript(&quot;window.scrollTo(0, document.body.scrollHeight);&quot;);\r\n    \t\t\ttry {\r\n    \t\t\t\twait.until(waitForCountToBeHigherThan(by, currentcount));\r\n    \t\t\t} catch (TimeoutException e) {\r\n    \t\t\t\t//Ignoring\r\n    \t\t\t}\r\n    \t\t\tlong newHeight = (long) ((JavascriptExecutor) webDriver)\r\n    \t\t\t\t\t.executeScript(&quot;return document.body.scrollHeight&quot;);\r\n    \t\t\tif (newHeight == lastHeight) {\r\n    \t\t\t\t//No Height Change Breaking\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t\tlastHeight = newHeight;\r\n    \t\t}\r\n    \t\tList&lt;WebElement&gt; elements = webDriver.findElements(by);\r\n    \t\tSystem.out.println(elements.size());\r\n\r\n\r\nDefine an custom expected condition like below to wait for elements count to be large than current\r\n\r\n    public static ExpectedCondition&lt;List&lt;WebElement&gt;&gt; waitForCountToBeHigherThan(\r\n    \t\t\tfinal By locator, final int elementsCount) {\r\n    \t\treturn new ExpectedCondition&lt;List&lt;WebElement&gt;&gt;() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic List&lt;WebElement&gt; apply(WebDriver driver) {\r\n    \t\t\t\tList&lt;WebElement&gt; elements = driver.findElements(locator);\r\n    \t\t\t\tif (elements.size() &lt; elementsCount) {\r\n    \t\t\t\t\treturn null;\r\n    \t\t\t\t}\r\n    \t\t\t\tfor (WebElement element : elements) {\r\n    \t\t\t\t\tif (!element.isDisplayed()) {\r\n    \t\t\t\t\t\treturn null;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\treturn elements;\r\n    \t\t\t} \r\n    \t\t};\r\n    \t}","title":"How to count webElements on dynamic page? java , selenium","body":"<p>First Use below code to keep on Scrolling till end of page , then find and count the total</p>\n<pre><code>        By by = &quot;your By&quot;;\n        WebDriver webDriver = &quot;driver isntance&quot;;\n        Wait wait = new \n        FluentWait(webDriver).withTimeout(Duration.ofSeconds(30))\n                .pollingEvery(Duration.ofMillis(250));\n        long lastHeight = (long) ((JavascriptExecutor) webDriver)\n                .executeScript(&quot;return document.body.scrollHeight&quot;);\n        while (true) {\n            int currentcount = webDriver.findElements(by).size();\n            ((JavascriptExecutor) webDriver)\n                    .executeScript(&quot;window.scrollTo(0, document.body.scrollHeight);&quot;);\n            try {\n                wait.until(waitForCountToBeHigherThan(by, currentcount));\n            } catch (TimeoutException e) {\n                //Ignoring\n            }\n            long newHeight = (long) ((JavascriptExecutor) webDriver)\n                    .executeScript(&quot;return document.body.scrollHeight&quot;);\n            if (newHeight == lastHeight) {\n                //No Height Change Breaking\n                break;\n            }\n            lastHeight = newHeight;\n        }\n        List&lt;WebElement&gt; elements = webDriver.findElements(by);\n        System.out.println(elements.size());\n</code></pre>\n<p>Define an custom expected condition like below to wait for elements count to be large than current</p>\n<pre><code>public static ExpectedCondition&lt;List&lt;WebElement&gt;&gt; waitForCountToBeHigherThan(\n            final By locator, final int elementsCount) {\n        return new ExpectedCondition&lt;List&lt;WebElement&gt;&gt;() {\n            @Override\n            public List&lt;WebElement&gt; apply(WebDriver driver) {\n                List&lt;WebElement&gt; elements = driver.findElements(locator);\n                if (elements.size() &lt; elementsCount) {\n                    return null;\n                }\n                for (WebElement element : elements) {\n                    if (!element.isDisplayed()) {\n                        return null;\n                    }\n                }\n                return elements;\n            } \n        };\n    }\n</code></pre>\n"}],"owner":{"account_id":24371250,"reputation":1,"user_id":18304173,"display_name":"VGS"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660766711,"creation_date":1660591231,"question_id":73365546,"body_markdown":"I need to count webElements on page. Initially, it opens only few elements, but when you scroll down  - new elements appear. You can&#39;t use ExpectedConditions.numberOfElementsToBeLessThan() because it&#39;s not known how many elements will be on page. \r\n\r\nTo solve the problem i need just make selenium wait for few seconds until new elements appear in DOM. But it&#39;s not allowed to use thread.sleep.\r\nSo, how can i fix that? ","title":"How to count webElements on dynamic page? java , selenium","body":"<p>I need to count webElements on page. Initially, it opens only few elements, but when you scroll down  - new elements appear. You can't use ExpectedConditions.numberOfElementsToBeLessThan() because it's not known how many elements will be on page.</p>\n<p>To solve the problem i need just make selenium wait for few seconds until new elements appear in DOM. But it's not allowed to use thread.sleep.\nSo, how can i fix that?</p>\n"},{"tags":["java","hibernate","sequence","mappedsuperclass","sequence-generators"],"comments":[{"owner":{"account_id":10742308,"reputation":88,"user_id":7904942,"display_name":"R.Groote"},"score":0,"creation_date":1581576608,"post_id":60201894,"comment_id":106483039,"body_markdown":"Maybe this answers your question: https://stackoverflow.com/questions/8589928/mappedsuperclass-change-sequencegenerator-in-subclass","body":"Maybe this answers your question: <a href=\"https://stackoverflow.com/questions/8589928/mappedsuperclass-change-sequencegenerator-in-subclass\" title=\"mappedsuperclass change sequencegenerator in subclass\">stackoverflow.com/questions/8589928/&hellip;</a>"},{"owner":{"account_id":17744710,"reputation":303,"user_id":12884237,"display_name":"Avital A."},"score":0,"creation_date":1581577066,"post_id":60201894,"comment_id":106483216,"body_markdown":"I tried https://stackoverflow.com/questions/8589928/mappedsuperclass-change-sequencegenerator-in-subclass - but it is with changing the super class to have GeneratedValue.","body":"I tried <a href=\"https://stackoverflow.com/questions/8589928/mappedsuperclass-change-sequencegenerator-in-subclass\" title=\"mappedsuperclass change sequencegenerator in subclass\">stackoverflow.com/questions/8589928/&hellip;</a> - but it is with changing the super class to have GeneratedValue."}],"answers":[{"tags":[],"owner":{"account_id":4560711,"reputation":1,"user_id":3703131,"display_name":"JR Ector"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660766379,"creation_date":1660766379,"answer_id":73394282,"question_id":60201894,"body_markdown":"Here&#39;s what worked for me. Remove getId() from SuperClass, remove the @Override from SubClass getId() and move the @Id annotation to the SubClass getId().","title":"MappedSuperclass - Change SequenceGenerator in Subclass without @GeneratedValue on the Superclass","body":"<p>Here's what worked for me. Remove getId() from SuperClass, remove the @Override from SubClass getId() and move the @Id annotation to the SubClass getId().</p>\n"}],"owner":{"account_id":17744710,"reputation":303,"user_id":12884237,"display_name":"Avital A."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":678,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660766379,"creation_date":1581576246,"question_id":60201894,"body_markdown":"I have a base class:\r\n\r\n    @MappedSuperclass\r\n    public abstract class SuperClass{\r\n        @Id\r\n        protected Long id;\r\n\r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    }\r\n\r\nThe @GeneratedValue is not used since the id is generated using a BackendSession\r\n\r\n**There are a lot of inheritance from this class so one can&#39;t change it!**\r\n\r\nmy sub class:\r\nI tried to override the getId method\r\n\r\n    @Entity\r\n    @Table(name = &quot;FTC_DATA&quot;)\r\n    @SequenceGenerator(name=&quot;sequence&quot;, sequenceName = &quot;FTC_DATA_SEQ&quot;)\r\n    @Inheritance(strategy = InheritanceType.SINGLE_TABLE)\r\n    public class SubClass extends SuperClass {\r\n    \r\n        @Override\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;FTC_DATA_SEQ&quot;)\r\n        public void getId(Long id) {\r\n            this.id = id;\r\n        }\r\n    }\r\n\r\nBut I fail on IdentifierGenerationException, what am I doing wrong?","title":"MappedSuperclass - Change SequenceGenerator in Subclass without @GeneratedValue on the Superclass","body":"<p>I have a base class:</p>\n\n<pre><code>@MappedSuperclass\npublic abstract class SuperClass{\n    @Id\n    protected Long id;\n\n    public Long getId() {\n        return id;\n    }\n}\n</code></pre>\n\n<p>The @GeneratedValue is not used since the id is generated using a BackendSession</p>\n\n<p><strong>There are a lot of inheritance from this class so one can't change it!</strong></p>\n\n<p>my sub class:\nI tried to override the getId method</p>\n\n<pre><code>@Entity\n@Table(name = \"FTC_DATA\")\n@SequenceGenerator(name=\"sequence\", sequenceName = \"FTC_DATA_SEQ\")\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\npublic class SubClass extends SuperClass {\n\n    @Override\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"FTC_DATA_SEQ\")\n    public void getId(Long id) {\n        this.id = id;\n    }\n}\n</code></pre>\n\n<p>But I fail on IdentifierGenerationException, what am I doing wrong?</p>\n"},{"tags":["java","spring","spring-boot","jhipster"],"comments":[{"owner":{"account_id":7109019,"reputation":24733,"user_id":5437671,"display_name":"R. Richards"},"score":0,"creation_date":1660764730,"post_id":73393618,"comment_id":129612757,"body_markdown":"Read this: [ask]. As it stands, this post is off topic for SO.","body":"Read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. As it stands, this post is off topic for SO."}],"answers":[{"tags":[],"owner":{"account_id":33534,"reputation":16098,"user_id":93960,"display_name":"Ga&#235;l Marziou"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660766333,"creation_date":1660765609,"answer_id":73394168,"question_id":73393618,"body_markdown":"This is a bad practice, it&#39;s going to make impossible to run `jhipster upgrade` and more it does not allow to track changes in git. I suppose also you don&#39;t use incremental changelogs which is a great feature for evolving your database schema.\r\n\r\nCopying files from a freshly generated side project is OK if the goal is to cut off any dependencies from JHipster but at least keep track of the JDL in the main git repository so that you can understand how the domain model has evolved and why in the commit messages.\r\n\r\nAlso imagine you decide to change few options and re-generate the side project, starting from a JDL is much faster than answering questions.\r\n\r\nAlso the JDL is documentation of your domain model, either as text or as a picture.\r\n\r\nPlease note that there are other approaches to manage custom code versus generated code like what the community calls the [&quot;side-by-side approach&quot;][1].\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=Gg5CYoBdpVo","title":"Jhipster app with no .jdl file and .json files in .jhipster folder","body":"<p>This is a bad practice, it's going to make impossible to run <code>jhipster upgrade</code> and more it does not allow to track changes in git. I suppose also you don't use incremental changelogs which is a great feature for evolving your database schema.</p>\n<p>Copying files from a freshly generated side project is OK if the goal is to cut off any dependencies from JHipster but at least keep track of the JDL in the main git repository so that you can understand how the domain model has evolved and why in the commit messages.</p>\n<p>Also imagine you decide to change few options and re-generate the side project, starting from a JDL is much faster than answering questions.</p>\n<p>Also the JDL is documentation of your domain model, either as text or as a picture.</p>\n<p>Please note that there are other approaches to manage custom code versus generated code like what the community calls the <a href=\"https://www.youtube.com/watch?v=Gg5CYoBdpVo\" rel=\"nofollow noreferrer\">&quot;side-by-side approach&quot;</a>.</p>\n"}],"owner":{"account_id":25847447,"reputation":13,"user_id":19582031,"display_name":"skySuprem"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":228,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73394168,"answer_count":1,"score":0,"last_activity_date":1660766333,"creation_date":1660762428,"question_id":73393618,"body_markdown":"i am working in an application generated with jhipster and this application has no `.jdl` file or `.json` files in `.jhipster` folder because when a team member wants to add an entity or modify it or something like that , he does this in his own machine in a test project generated with the same version of jhipster, then he copies the generated entity code to the main application.\r\n\r\nWhat do you think?  \r\nis this a good practice?  \r\nwon&#39;t it cause problems later? (i don&#39;t know in the upgrade for example)  \r\nplease share your thoughts with me.","title":"Jhipster app with no .jdl file and .json files in .jhipster folder","body":"<p>i am working in an application generated with jhipster and this application has no <code>.jdl</code> file or <code>.json</code> files in <code>.jhipster</code> folder because when a team member wants to add an entity or modify it or something like that , he does this in his own machine in a test project generated with the same version of jhipster, then he copies the generated entity code to the main application.</p>\n<p>What do you think?<br />\nis this a good practice?<br />\nwon't it cause problems later? (i don't know in the upgrade for example)<br />\nplease share your thoughts with me.</p>\n"},{"tags":["java","selenium","selenium-webdriver","automation"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1660625004,"post_id":73368390,"comment_id":129569616,"body_markdown":"Create a new instance of selenium and open a tab in that.","body":"Create a new instance of selenium and open a tab in that."},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1660629817,"post_id":73368390,"comment_id":129570433,"body_markdown":"Does this answer your question? [Run chrome browser in inconginto Mode in Selenium](https://stackoverflow.com/questions/19026295/run-chrome-browser-in-inconginto-mode-in-selenium)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/19026295/run-chrome-browser-in-inconginto-mode-in-selenium\">Run chrome browser in inconginto Mode in Selenium</a>"}],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660765342,"creation_date":1660765342,"answer_id":73394101,"question_id":73368390,"body_markdown":"start you driver like below  \r\n\r\n    WebDriver chromedriver;\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.addArguments(&quot;--incognito&quot;);\r\n    DesiredCapabilities capabilities = DesiredCapabilities.chrome();\r\n    capabilities.setCapability(ChromeOptions.CAPABILITY, options);\r\n    WebDriver chromedriver=new ChromeDriver(capabilities);","title":"Open an incognito window using selenium in java?","body":"<p>start you driver like below</p>\n<pre><code>WebDriver chromedriver;\nChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--incognito&quot;);\nDesiredCapabilities capabilities = DesiredCapabilities.chrome();\ncapabilities.setCapability(ChromeOptions.CAPABILITY, options);\nWebDriver chromedriver=new ChromeDriver(capabilities);\n</code></pre>\n"}],"owner":{"account_id":22427959,"reputation":1,"user_id":16634266,"display_name":"mikewaz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":679,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73394101,"answer_count":1,"score":0,"last_activity_date":1660765342,"creation_date":1660619541,"question_id":73368390,"body_markdown":"I have a script that currently has a user logged in to a website on a regular chrome window but I also want to open an incognito chrome window to have another user log in to the same website. The website has SSO so opening another regular chrome tab will just log in the first user again and both users need to be signed in at the same time. Is there a way to launch an incognito chrome window from the regular chrome window with selenium?","title":"Open an incognito window using selenium in java?","body":"<p>I have a script that currently has a user logged in to a website on a regular chrome window but I also want to open an incognito chrome window to have another user log in to the same website. The website has SSO so opening another regular chrome tab will just log in the first user again and both users need to be signed in at the same time. Is there a way to launch an incognito chrome window from the regular chrome window with selenium?</p>\n"},{"tags":["java","function","methods"],"answers":[{"tags":[],"owner":{"account_id":368385,"reputation":13915,"user_id":715171,"accept_rate":95,"display_name":"talnicolas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660765133,"creation_date":1329412491,"answer_id":9315810,"question_id":9315707,"body_markdown":"The &#39;inner&#39; method is a filter for the &#39;outer&#39; method that decides if a file inside `dataDirectory` will be included or not in the String array. \r\n\r\nTo get this functionality, he implemented the `accept` method of the `FilenameFilter` interface. Since only that one method was needed, it was more convenient to implement it directly in the code (as an anonymous class) than to create a separate class that implemented the &#39;whole&#39; FilenameFilter interface.","title":"Java, a method declaration inside another method?","body":"<p>The 'inner' method is a filter for the 'outer' method that decides if a file inside <code>dataDirectory</code> will be included or not in the String array.</p>\n<p>To get this functionality, he implemented the <code>accept</code> method of the <code>FilenameFilter</code> interface. Since only that one method was needed, it was more convenient to implement it directly in the code (as an anonymous class) than to create a separate class that implemented the 'whole' FilenameFilter interface.</p>\n"},{"tags":[],"owner":{"display_name":"user942821"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1329412878,"creation_date":1329412578,"answer_id":9315830,"question_id":9315707,"body_markdown":"Oh I have no university. But I learned from the Internet.\r\n\r\nYou can do that, it&#39;s not &quot;method inside a method&quot;. It is implementing an interface.\r\n\r\n[FilenameFilter][0]\r\n\r\n[0]:http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FilenameFilter.html\r\n\r\nYou can do [extending an abstract class][1] or implementing an interface then apply it directly to a field/ variable. And since variables/ fields can be used inside a method, so that is possible.\r\n\r\n[1]:http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html\r\n\r\n**Edited**\r\n\r\nYou can notice the semicolon after the last curly bracket of `new FilenameFilter() {...`. The whole block is an expression, so it can be applied to fields/ variables...","title":"Java, a method declaration inside another method?","body":"<p>Oh I have no university. But I learned from the Internet.</p>\n\n<p>You can do that, it's not \"method inside a method\". It is implementing an interface.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FilenameFilter.html\" rel=\"nofollow\">FilenameFilter</a></p>\n\n<p>You can do <a href=\"http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html\" rel=\"nofollow\">extending an abstract class</a> or implementing an interface then apply it directly to a field/ variable. And since variables/ fields can be used inside a method, so that is possible.</p>\n\n<p><strong>Edited</strong></p>\n\n<p>You can notice the semicolon after the last curly bracket of <code>new FilenameFilter() {...</code>. The whole block is an expression, so it can be applied to fields/ variables...</p>\n"},{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1329412618,"creation_date":1329412618,"answer_id":9315841,"question_id":9315707,"body_markdown":"This is anonymous inner class, i.e. class that does not have its own name and is defined ad-hock together with its instance. \r\n\r\nActually the name of this class is as name of your outer class followed by $ and number (1, 2, 3 etc.) according to the sequential number of your inner class. ","title":"Java, a method declaration inside another method?","body":"<p>This is anonymous inner class, i.e. class that does not have its own name and is defined ad-hock together with its instance. </p>\n\n<p>Actually the name of this class is as name of your outer class followed by $ and number (1, 2, 3 etc.) according to the sequential number of your inner class. </p>\n"},{"tags":[],"owner":{"account_id":1254604,"reputation":53,"user_id":1214348,"display_name":"jgoldbg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1329412659,"creation_date":1329412659,"answer_id":9315851,"question_id":9315707,"body_markdown":"Those are called anonymous classes. They&#39;re described in the JLS, but you might want to read about them in &quot;Java in a Nutshell&quot; or some other tutorials out there to get a better handle on it.","title":"Java, a method declaration inside another method?","body":"<p>Those are called anonymous classes. They're described in the JLS, but you might want to read about them in \"Java in a Nutshell\" or some other tutorials out there to get a better handle on it.</p>\n"},{"tags":[],"owner":{"account_id":152159,"reputation":6420,"user_id":366493,"accept_rate":80,"display_name":"csturtz"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1329412761,"creation_date":1329412761,"answer_id":9315873,"question_id":9315707,"body_markdown":"The part of the code where you see the `accept()` method being defined is what&#39;s called an anonymous class.\r\n\r\n&gt;     FilenameFilter filter = new FilenameFilter() {\r\n&gt;         public boolean accept(File dir, String name) {\r\n&gt;             return name.startsWith(&quot;gene_&quot;) &amp;&amp; name.endsWith(&quot;_info.info&quot;); //get all info files...\r\n&gt;         }\r\n&gt;     };\r\n\r\nWhat&#39;s going on here is the creation of a new Class that is-a FilenameFilter.  They&#39;re implementing/overriding the accept method.  Think of it like this, but in one statement:\r\n\r\n    class MyFilenameFilter implements FilenameFilter {\r\n        public boolean accept(File dir, String name) {\r\n            return name.startsWith(&quot;gene_&quot;) &amp;&amp; name.endsWith(&quot;_info.info&quot;); \r\n        }\r\n    }\r\n    \r\n    FilenameFilter filter = new MyFilenameFilter()","title":"Java, a method declaration inside another method?","body":"<p>The part of the code where you see the <code>accept()</code> method being defined is what's called an anonymous class.</p>\n\n<blockquote>\n<pre><code>FilenameFilter filter = new FilenameFilter() {\n    public boolean accept(File dir, String name) {\n        return name.startsWith(\"gene_\") &amp;&amp; name.endsWith(\"_info.info\"); //get all info files...\n    }\n};\n</code></pre>\n</blockquote>\n\n<p>What's going on here is the creation of a new Class that is-a FilenameFilter.  They're implementing/overriding the accept method.  Think of it like this, but in one statement:</p>\n\n<pre><code>class MyFilenameFilter implements FilenameFilter {\n    public boolean accept(File dir, String name) {\n        return name.startsWith(\"gene_\") &amp;&amp; name.endsWith(\"_info.info\"); \n    }\n}\n\nFilenameFilter filter = new MyFilenameFilter()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1245888,"reputation":606,"user_id":1207358,"display_name":"Bob Wang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1329412846,"creation_date":1329412846,"answer_id":9315897,"question_id":9315707,"body_markdown":"[FilenameFilter][1] is an interface. The syntax `new FilenameFilter(){...}` here creates and instantiates an anonymous class which implements `FilenameFilter` with implementation inside.\r\nSee [File][2] to check what `dataDirectory.list()` does. &quot;It returns an array of strings naming the files and directories in the directory denoted by this abstract pathname that satisfy the specified filter.&quot;\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FilenameFilter.html\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html","title":"Java, a method declaration inside another method?","body":"<p><a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FilenameFilter.html\" rel=\"nofollow\">FilenameFilter</a> is an interface. The syntax <code>new FilenameFilter(){...}</code> here creates and instantiates an anonymous class which implements <code>FilenameFilter</code> with implementation inside.\nSee <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html\" rel=\"nofollow\">File</a> to check what <code>dataDirectory.list()</code> does. \"It returns an array of strings naming the files and directories in the directory denoted by this abstract pathname that satisfy the specified filter.\"</p>\n"},{"tags":[],"owner":{"account_id":16216,"reputation":110776,"user_id":35092,"accept_rate":83,"display_name":"Charlie Martin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1329412884,"creation_date":1329412884,"answer_id":9315907,"question_id":9315707,"body_markdown":"Here&#39;s what&#39;s happening.  The syntax is called an *anonymous inner class*.  The `new` gives you a hint that you are creating a new class that inherits from `FilenameFilter` -- which is why it can be assigned to a reference of type `FilenameFilter` -- but that class implements a method named accept that overloads the `FilenameFilter` `accept` method.  That class doesn&#39;t have a name visible to the rest of the program (although some compilers at least will create a classfile in the target directory) but its sole instance exists as long as `filter` remains in scope.\r\n\r\nThis is sort of an almost-lambda that showed up in Java about Java 1.2 (I think.)","title":"Java, a method declaration inside another method?","body":"<p>Here's what's happening.  The syntax is called an <em>anonymous inner class</em>.  The <code>new</code> gives you a hint that you are creating a new class that inherits from <code>FilenameFilter</code> -- which is why it can be assigned to a reference of type <code>FilenameFilter</code> -- but that class implements a method named accept that overloads the <code>FilenameFilter</code> <code>accept</code> method.  That class doesn't have a name visible to the rest of the program (although some compilers at least will create a classfile in the target directory) but its sole instance exists as long as <code>filter</code> remains in scope.</p>\n\n<p>This is sort of an almost-lambda that showed up in Java about Java 1.2 (I think.)</p>\n"}],"owner":{"account_id":1086411,"reputation":3328,"user_id":1082019,"accept_rate":51,"display_name":"DavideChicco.it"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6920,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":9315873,"answer_count":7,"score":3,"last_activity_date":1660765133,"creation_date":1329412166,"question_id":9315707,"body_markdown":"I&#39;m studyin&#39; some Java code written by my ex-colleague, and I&#39;ve found something I cannot understand properly.\r\nHere we have a method, getGeneAvailableTaxonomies(), that seems to contain a method call with its own declaration, accept().\r\nIs it true? Is it possibile?\r\n\r\nHere&#39;s the code part: I cannot understand the meaning of the program from FilenameFilter() to the end.\r\n\r\n\r\n\tpublic List&lt;Integer&gt; getGeneAvailableTaxonomies() {\r\n\t\tList&lt;Integer&gt; availableTaxon = new ArrayList&lt;Integer&gt;();\r\n\t\t\r\n\t\tFile dataDirectory = new File(_currentApplicationPath, String.format(&quot;Data&quot;));\r\n\t\tFilenameFilter filter = new FilenameFilter() {\r\n\t        public boolean accept(File dir, String name) {\r\n\t            return name.startsWith(&quot;gene_&quot;) &amp;&amp; name.endsWith(&quot;_info.info&quot;); //get all info files...\r\n\t        }\r\n\t    };\r\n\t    String[] children = dataDirectory.list(filter);\r\n\t\t\r\n\t    for(String child:children) {\r\n\t    \tavailableTaxon.add(Integer.parseInt(child.substring(child.indexOf(&quot;_&quot;)+1, child.lastIndexOf(&quot;_&quot;))));\r\n\t    }\r\n\t\t\r\n\t\treturn availableTaxon;\r\n\t}","title":"Java, a method declaration inside another method?","body":"<p>I'm studyin' some Java code written by my ex-colleague, and I've found something I cannot understand properly.\nHere we have a method, getGeneAvailableTaxonomies(), that seems to contain a method call with its own declaration, accept().\nIs it true? Is it possibile?</p>\n\n<p>Here's the code part: I cannot understand the meaning of the program from FilenameFilter() to the end.</p>\n\n<pre><code>public List&lt;Integer&gt; getGeneAvailableTaxonomies() {\n    List&lt;Integer&gt; availableTaxon = new ArrayList&lt;Integer&gt;();\n\n    File dataDirectory = new File(_currentApplicationPath, String.format(\"Data\"));\n    FilenameFilter filter = new FilenameFilter() {\n        public boolean accept(File dir, String name) {\n            return name.startsWith(\"gene_\") &amp;&amp; name.endsWith(\"_info.info\"); //get all info files...\n        }\n    };\n    String[] children = dataDirectory.list(filter);\n\n    for(String child:children) {\n        availableTaxon.add(Integer.parseInt(child.substring(child.indexOf(\"_\")+1, child.lastIndexOf(\"_\"))));\n    }\n\n    return availableTaxon;\n}\n</code></pre>\n"},{"tags":["java","eclipse","testing","ide"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1660767158,"post_id":73393999,"comment_id":129613531,"body_markdown":"At scale this is usually done using unit testing frameworks. While you could instead create your Java Application launcher in the Launch Configuration dialog (if you&#39;ve ever run your application before, it already has one), open the dialog from the &quot;Run&quot;-&gt;&quot;Run Configurations...&quot; menu action, select and Duplicate that launch configuration via the dialog&#39;s toolbar, change the inputs/arguments as needed, and then create a Launch Group and add the other launchers into it, this doesn&#39;t resemble a real use case all that much in my experience.","body":"At scale this is usually done using unit testing frameworks. While you could instead create your Java Application launcher in the Launch Configuration dialog (if you&#39;ve ever run your application before, it already has one), open the dialog from the &quot;Run&quot;-&gt;&quot;Run Configurations...&quot; menu action, select and Duplicate that launch configuration via the dialog&#39;s toolbar, change the inputs/arguments as needed, and then create a Launch Group and add the other launchers into it, this doesn&#39;t resemble a real use case all that much in my experience."}],"answers":[{"tags":[],"owner":{"account_id":13965825,"reputation":183,"user_id":10085630,"display_name":"Yolomep"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660764900,"creation_date":1660764900,"answer_id":73394036,"question_id":73393999,"body_markdown":"wrap your code with the following in main:\r\n\r\n```java\r\nt = read in number of test cases\r\nwhile(t-- &gt; 0) {\r\n  //your solution here\r\n}\r\n```","title":"How can i run my java program for multiple inputs at a time in eclipse","body":"<p>wrap your code with the following in main:</p>\n<pre class=\"lang-java prettyprint-override\"><code>t = read in number of test cases\nwhile(t-- &gt; 0) {\n  //your solution here\n}\n</code></pre>\n"}],"owner":{"account_id":18646884,"reputation":642,"user_id":13591309,"display_name":"aravind ks"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660764900,"creation_date":1660764658,"question_id":73393999,"body_markdown":"Suppose I have a java program in eclipse. I want to run the program for multiple test cases I provided simultaneously instead of checking each input individually.(Like test cases checking in leetcode ,CodeChef or cph extension in vscode). How can I set this in eclipse?\r\n\r\nhere is an example of cph in vscode\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RAlGd.png\r\n\r\n\r\nI want to do the same for the eclipse.\r\n\r\nI would appreciate any effort for answering the question :)","title":"How can i run my java program for multiple inputs at a time in eclipse","body":"<p>Suppose I have a java program in eclipse. I want to run the program for multiple test cases I provided simultaneously instead of checking each input individually.(Like test cases checking in leetcode ,CodeChef or cph extension in vscode). How can I set this in eclipse?</p>\n<p>here is an example of cph in vscode\n<a href=\"https://i.stack.imgur.com/RAlGd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RAlGd.png\" alt=\"enter image description here\" /></a></p>\n<p>I want to do the same for the eclipse.</p>\n<p>I would appreciate any effort for answering the question :)</p>\n"},{"tags":["java","amazon-web-services","unit-testing","amazon-dynamodb"],"answers":[{"tags":[],"owner":{"account_id":14543931,"reputation":26,"user_id":14084494,"display_name":"Steve Acomb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660764885,"creation_date":1660764885,"answer_id":73394034,"question_id":73379047,"body_markdown":"It looks like when you call [DynamoDbAsyncClient.create()](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/dynamodb/DynamoDbAsyncClient.html#create--), the [DynamoDbAsyncClient](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/dynamodb/DynamoDbAsyncClient.html) class loads the region from your [DefaultAwsRegionProviderChain](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/regions/providers/DefaultAwsRegionProviderChain.html), which appears to be using your [SystemSettingsRegionProvider](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/regions/providers/SystemSettingsRegionProvider.html) to get it from your environment variables. \r\n\r\nI&#39;m pretty sure the error it&#39;s giving you is on line 37 of software.amazon.awssdk.regions.providers.SystemSettingsRegionProvider, which says: \r\n\r\n\r\n    return SdkClientException\r\n        .builder()\r\n        .message(\r\n            String.format(\r\n                &quot;Unable to load region from system settings. Region&quot; + &quot; must be \r\n                specified either via environment variable (%s) or &quot; + &quot; system \r\n                property (%s).&quot;, \r\n                SdkSystemSetting.AWS_REGION.environmentVariable(), \r\n                SdkSystemSetting.AWS_REGION.property()\r\n            )\r\n        )\r\n        .build();\r\n\r\nSo to answer your question:\r\n\r\n&gt; So how can I specify a region for DynamoDB use? Can I mock some class for instance?\r\n\r\nYes, exactly: you mock the environment variable for AWS_REGION.\r\n\r\nThe easiest way to do this would be to use the library [System Lambda](https://github.com/stefanbirkner/system-lambda/), which has a method `withEnvironmentVariables` for setting environment variables.\r\n\r\n\r\n\r\nYou can use this analogously to the following:\r\n\r\n    import static com.github.stefanbirkner.systemlambda.SystemLambda.*;\r\n\r\n    public void EnvironmentVariablesTest {\r\n      @Test\r\n      public void setEnvironmentVariable() {\r\n        String value = withEnvironmentVariable(&quot;name&quot;, &quot;value&quot;)\r\n          .execute(() -&gt; System.getenv(&quot;name&quot;));\r\n        assertEquals(&quot;value&quot;, value);\r\n      }\r\n    }\r\n\r\nHope that helps!","title":"Testing DynamoDB: &quot;Unable to load region from system settings&quot;","body":"<p>It looks like when you call <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/dynamodb/DynamoDbAsyncClient.html#create--\" rel=\"nofollow noreferrer\">DynamoDbAsyncClient.create()</a>, the <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/dynamodb/DynamoDbAsyncClient.html\" rel=\"nofollow noreferrer\">DynamoDbAsyncClient</a> class loads the region from your <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/regions/providers/DefaultAwsRegionProviderChain.html\" rel=\"nofollow noreferrer\">DefaultAwsRegionProviderChain</a>, which appears to be using your <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/regions/providers/SystemSettingsRegionProvider.html\" rel=\"nofollow noreferrer\">SystemSettingsRegionProvider</a> to get it from your environment variables.</p>\n<p>I'm pretty sure the error it's giving you is on line 37 of software.amazon.awssdk.regions.providers.SystemSettingsRegionProvider, which says:</p>\n<pre><code>return SdkClientException\n    .builder()\n    .message(\n        String.format(\n            &quot;Unable to load region from system settings. Region&quot; + &quot; must be \n            specified either via environment variable (%s) or &quot; + &quot; system \n            property (%s).&quot;, \n            SdkSystemSetting.AWS_REGION.environmentVariable(), \n            SdkSystemSetting.AWS_REGION.property()\n        )\n    )\n    .build();\n</code></pre>\n<p>So to answer your question:</p>\n<blockquote>\n<p>So how can I specify a region for DynamoDB use? Can I mock some class for instance?</p>\n</blockquote>\n<p>Yes, exactly: you mock the environment variable for AWS_REGION.</p>\n<p>The easiest way to do this would be to use the library <a href=\"https://github.com/stefanbirkner/system-lambda/\" rel=\"nofollow noreferrer\">System Lambda</a>, which has a method <code>withEnvironmentVariables</code> for setting environment variables.</p>\n<p>You can use this analogously to the following:</p>\n<pre><code>import static com.github.stefanbirkner.systemlambda.SystemLambda.*;\n\npublic void EnvironmentVariablesTest {\n  @Test\n  public void setEnvironmentVariable() {\n    String value = withEnvironmentVariable(&quot;name&quot;, &quot;value&quot;)\n      .execute(() -&gt; System.getenv(&quot;name&quot;));\n    assertEquals(&quot;value&quot;, value);\n  }\n}\n</code></pre>\n<p>Hope that helps!</p>\n"}],"owner":{"account_id":24287116,"reputation":408,"user_id":18232723,"display_name":"kylie.zoltan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":431,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73394034,"answer_count":1,"score":0,"last_activity_date":1660764885,"creation_date":1660676393,"question_id":73379047,"body_markdown":"I have a unit test that does nothing more than check if a bean exists.\r\n\r\n        application.run( ( context ) -&gt; {\r\n            assertThat( context ).hasSingleBean( DynamoDbAsyncClient.class );\r\n        } );\r\n\r\nThe code that creates the bean does the following:\r\n\r\n    @Bean\r\n    public DynamoDbAsyncClient dynamoDbAsyncClient()\r\n    {\r\n        return DynamoDbAsyncClient.create();\r\n    }\r\n\r\nThis code cannot be changed!\r\n\r\nIf I run this test I get the following error:\r\n`Unable to load region from system settings`\r\n\r\nSo how can I specify a region for DynamoDB use? Can I mock some class for instance?\r\n\r\nThanks\r\n","title":"Testing DynamoDB: &quot;Unable to load region from system settings&quot;","body":"<p>I have a unit test that does nothing more than check if a bean exists.</p>\n<pre><code>    application.run( ( context ) -&gt; {\n        assertThat( context ).hasSingleBean( DynamoDbAsyncClient.class );\n    } );\n</code></pre>\n<p>The code that creates the bean does the following:</p>\n<pre><code>@Bean\npublic DynamoDbAsyncClient dynamoDbAsyncClient()\n{\n    return DynamoDbAsyncClient.create();\n}\n</code></pre>\n<p>This code cannot be changed!</p>\n<p>If I run this test I get the following error:\n<code>Unable to load region from system settings</code></p>\n<p>So how can I specify a region for DynamoDB use? Can I mock some class for instance?</p>\n<p>Thanks</p>\n"},{"tags":["java","jboss","wildfly","jmx","wildfly-8"],"answers":[{"tags":[],"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1476945289,"creation_date":1476945289,"answer_id":40147051,"question_id":40133080,"body_markdown":"You can use the Jboss cli remotely as the URL you pass in the controller param shows. You could even use the &quot;REST&quot; API to execute it.\r\nThe shutdown should be available from JMX.","title":"Gracefully shutdown JBoss application","body":"<p>You can use the Jboss cli remotely as the URL you pass in the controller param shows. You could even use the \"REST\" API to execute it.\nThe shutdown should be available from JMX.</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660763285,"creation_date":1660763285,"answer_id":73393777,"question_id":40133080,"body_markdown":"JBoss EAP 6/7 and above allows graceful shutdown via CLI and even:\r\n\r\n&gt; The signals `SIGHUP`, `SIGINT` and `SIGTERM` all trigger a graceful shutdown of the JBoss 7/6 application server. Those are signals are respectively the commands kill -1 $PID, kill -2 $PID(or control+c), and kill $PID.\r\n\r\nhttps://access.redhat.com/solutions/18601","title":"Gracefully shutdown JBoss application","body":"<p>JBoss EAP 6/7 and above allows graceful shutdown via CLI and even:</p>\n<blockquote>\n<p>The signals <code>SIGHUP</code>, <code>SIGINT</code> and <code>SIGTERM</code> all trigger a graceful shutdown of the JBoss 7/6 application server. Those are signals are respectively the commands kill -1 $PID, kill -2 $PID(or control+c), and kill $PID.</p>\n</blockquote>\n<p><a href=\"https://access.redhat.com/solutions/18601\" rel=\"nofollow noreferrer\">https://access.redhat.com/solutions/18601</a></p>\n"}],"owner":{"account_id":1887192,"reputation":5567,"user_id":2225572,"accept_rate":67,"display_name":"Ankit Rustagi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1586,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660763285,"creation_date":1476884479,"question_id":40133080,"body_markdown":"I am looking for an approach to gracefully handle shutdown of JBoss (Wildfly AS 8.2). This would mean that all current requests are served and the webapp stops receiving further requests. I found that this is possible via command line in `version 9` of the application server -\r\n\r\n    ./jboss-cli.sh --controller=remoting://&lt;host&gt;:&lt;port&gt; \r\n    --connect --command=:shutdown(timeout=t)\r\n\r\nUsing this JBoss gracefully handles all requests for `t` seconds and gracefully shuts down (this would require an upgrade from version 8 to 9). \r\n\r\nOne possible approach would be to handle this in the `Java` application by maintaining a count of active requests and waiting for this number to go to `0` till a timeout and then exitting, basically replicating the above mentioned functionality.\r\n\r\nI need to shutdown the webapp/JBoss remotely, so we are looking for a `JMX` (Java Management Extension) based solution. Does `JBoss` expose any such operation to gracefully shut down possibly via `JMX` or any other technology?\r\n\r\nPS- `Ctrl-C` or `kill` commands donot shutdown `JBoss` gracefully.","title":"Gracefully shutdown JBoss application","body":"<p>I am looking for an approach to gracefully handle shutdown of JBoss (Wildfly AS 8.2). This would mean that all current requests are served and the webapp stops receiving further requests. I found that this is possible via command line in <code>version 9</code> of the application server -</p>\n\n<pre><code>./jboss-cli.sh --controller=remoting://&lt;host&gt;:&lt;port&gt; \n--connect --command=:shutdown(timeout=t)\n</code></pre>\n\n<p>Using this JBoss gracefully handles all requests for <code>t</code> seconds and gracefully shuts down (this would require an upgrade from version 8 to 9). </p>\n\n<p>One possible approach would be to handle this in the <code>Java</code> application by maintaining a count of active requests and waiting for this number to go to <code>0</code> till a timeout and then exitting, basically replicating the above mentioned functionality.</p>\n\n<p>I need to shutdown the webapp/JBoss remotely, so we are looking for a <code>JMX</code> (Java Management Extension) based solution. Does <code>JBoss</code> expose any such operation to gracefully shut down possibly via <code>JMX</code> or any other technology?</p>\n\n<p>PS- <code>Ctrl-C</code> or <code>kill</code> commands donot shutdown <code>JBoss</code> gracefully.</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":3,"creation_date":1660754246,"post_id":73392047,"comment_id":129609177,"body_markdown":"You didn&#39;t show us any code.","body":"You didn&#39;t show us any code."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1660754298,"post_id":73392047,"comment_id":129609190,"body_markdown":"Nor supplied the input that your code fails on, or showed us what output you are currently getting.","body":"Nor supplied the input that your code fails on, or showed us what output you are currently getting."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1660756833,"post_id":73392047,"comment_id":129610059,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":25489317,"reputation":259,"user_id":19284394,"display_name":"nicku"},"score":0,"creation_date":1660938512,"post_id":73392047,"comment_id":129660381,"body_markdown":"In the solution mentioned, we first insert the adjacent elements diff into the heap. Then we are popping out the minimum absolute value, which will be the first minimal absolute difference. Now, if the (i,j) pair is the one that produced the min absolute difference, then as per the code, the next minimum absolute value will be produced by adding ((j+1),i) indexes absolute difference. I don&#39;t understand why this point is valid.","body":"In the solution mentioned, we first insert the adjacent elements diff into the heap. Then we are popping out the minimum absolute value, which will be the first minimal absolute difference. Now, if the (i,j) pair is the one that produced the min absolute difference, then as per the code, the next minimum absolute value will be produced by adding ((j+1),i) indexes absolute difference. I don&#39;t understand why this point is valid."}],"answers":[{"tags":[],"owner":{"account_id":1507181,"reputation":13906,"user_id":1410303,"accept_rate":40,"display_name":"SomeDude"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660763264,"creation_date":1660754581,"answer_id":73392126,"question_id":73392047,"body_markdown":"- Sort the list first\r\n\r\n- Init d = 1\r\n\r\n- Then get the absolute difference between elements &#39;d&#39; distance apart and insert into a min-k heap. Quit as soon as your heap got k elements.\r\n\r\n- Go to step 3 with d = d + 1\r\n\r\n\r\nAnswer is in your heap. Complexity depends on k. If k ~ n^2, then it could be O(n^2) because you have to find all pairs. But it could be much better if k &lt;&lt; n^2.","title":"Lowest k pairwise absolute differences","body":"<ul>\n<li><p>Sort the list first</p>\n</li>\n<li><p>Init d = 1</p>\n</li>\n<li><p>Then get the absolute difference between elements 'd' distance apart and insert into a min-k heap. Quit as soon as your heap got k elements.</p>\n</li>\n<li><p>Go to step 3 with d = d + 1</p>\n</li>\n</ul>\n<p>Answer is in your heap. Complexity depends on k. If k ~ n^2, then it could be O(n^2) because you have to find all pairs. But it could be much better if k &lt;&lt; n^2.</p>\n"}],"owner":{"account_id":25489317,"reputation":259,"user_id":19284394,"display_name":"nicku"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1660765438,"answer_count":1,"score":-2,"last_activity_date":1660763264,"creation_date":1660754181,"question_id":73392047,"body_markdown":"Given a list of Integers and a number k. We have to return the k minimum absolute differences between different pairs of Integers in sorted order (ascending) \r\neg: If the Given list of integers is 6, 9, 1, and k=2 Then the output should be [3,5]  \r\nBecause the pairwise absolute differences are: |6-9|=3, |6-1|=5, |9-1|=8 the lowest 2 in ascending order will be 3,5  \r\n  \r\nI solved this problem in following ways:  \r\n1. Calculate the pairwise absolute difference-&gt; sort the list -&gt; return the first k elements\r\n     Score: 7/15 Only 7 test cases passed out of 15. Rest I got Time Limit Exceeded Error  \r\n  \r\n2. Instead of sorting I put all the elements in a min heap using the PriorityQueue in Java. The results were similar 8/15  \r\n    \r\nNot sure what could be more efficient way to approach this problems. Any ideas?","title":"Lowest k pairwise absolute differences","body":"<p>Given a list of Integers and a number k. We have to return the k minimum absolute differences between different pairs of Integers in sorted order (ascending)\neg: If the Given list of integers is 6, 9, 1, and k=2 Then the output should be [3,5]<br />\nBecause the pairwise absolute differences are: |6-9|=3, |6-1|=5, |9-1|=8 the lowest 2 in ascending order will be 3,5</p>\n<p>I solved this problem in following ways:</p>\n<ol>\n<li><p>Calculate the pairwise absolute difference-&gt; sort the list -&gt; return the first k elements\nScore: 7/15 Only 7 test cases passed out of 15. Rest I got Time Limit Exceeded Error</p>\n</li>\n<li><p>Instead of sorting I put all the elements in a min heap using the PriorityQueue in Java. The results were similar 8/15</p>\n</li>\n</ol>\n<p>Not sure what could be more efficient way to approach this problems. Any ideas?</p>\n"},{"tags":["java","automated-tests","selenium4"],"comments":[{"owner":{"account_id":23786211,"reputation":2038,"user_id":17798239,"display_name":"Anand Gautam"},"score":0,"creation_date":1660713687,"post_id":73383078,"comment_id":129594457,"body_markdown":"Try introducing a ` webdriverwait` instead of `implicitlywait`. Now, I am a python guy and I wrote the code in python and it worked for me. I used `Thread.sleep` of 3 seconds. If inducing `sleep` also does not work, then please show your full code to debug the issue.","body":"Try introducing a ` webdriverwait` instead of <code>implicitlywait</code>. Now, I am a python guy and I wrote the code in python and it worked for me. I used <code>Thread.sleep</code> of 3 seconds. If inducing <code>sleep</code> also does not work, then please show your full code to debug the issue."}],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660762759,"creation_date":1660762759,"answer_id":73393669,"question_id":73383078,"body_markdown":"You should wait for the Alert using webDriver wait like below and then switch to it \r\n\r\n    new WebDriverWait(driver, Duration.ofSeconds(60)).ignoring(NoAlertPresentException.class)\r\n\t\t\t\t.until(ExpectedConditions.alertIsPresent());\r\n\t\tAlert alert = driver.switchTo().alert();\r\n\t\talert.accept();","title":"Cannot catch alert modal using Java Selenium WebDriver 4","body":"<p>You should wait for the Alert using webDriver wait like below and then switch to it</p>\n<pre><code>new WebDriverWait(driver, Duration.ofSeconds(60)).ignoring(NoAlertPresentException.class)\n            .until(ExpectedConditions.alertIsPresent());\n    Alert alert = driver.switchTo().alert();\n    alert.accept();\n</code></pre>\n"}],"owner":{"account_id":21053901,"reputation":15,"user_id":15473649,"display_name":"Jillbarvi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73393669,"answer_count":1,"score":0,"last_activity_date":1660762759,"creation_date":1660712528,"question_id":73383078,"body_markdown":"I&#39;m automating this site as a practice https://www.demoblaze.com/index.html, after completing sign up modal and click Sign Up button, another pop up is raised to confirm the sign up process.\r\n\r\nIf I don&#39;t catch the alert modal I get &quot;org.openqa.selenium.UnhandledAlertException: unexpected alert open: {Alert text : Sign up successful.}&quot;\r\n\t\r\nbut if I handle the alert like this:\r\n\r\n    driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(30));\r\n            try {\r\n                driver.switchTo().alert().accept();\r\n            }\r\n            catch (NoAlertPresentException Ex) {\r\n                System.out.println(&quot;no hay alerta&quot;);\r\n            }\r\n\t\r\n    \r\nI get &quot;org.openqa.selenium.NoAlertPresentException: no such alert&quot; When I debugged the test, it skips the try/catch sentence.\r\n\r\nI also see that I cannot inspect with Chrome browser dev tools or Xpath Helper.","title":"Cannot catch alert modal using Java Selenium WebDriver 4","body":"<p>I'm automating this site as a practice <a href=\"https://www.demoblaze.com/index.html\" rel=\"nofollow noreferrer\">https://www.demoblaze.com/index.html</a>, after completing sign up modal and click Sign Up button, another pop up is raised to confirm the sign up process.</p>\n<p>If I don't catch the alert modal I get &quot;org.openqa.selenium.UnhandledAlertException: unexpected alert open: {Alert text : Sign up successful.}&quot;</p>\n<p>but if I handle the alert like this:</p>\n<pre><code>driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(30));\n        try {\n            driver.switchTo().alert().accept();\n        }\n        catch (NoAlertPresentException Ex) {\n            System.out.println(&quot;no hay alerta&quot;);\n        }\n</code></pre>\n<p>I get &quot;org.openqa.selenium.NoAlertPresentException: no such alert&quot; When I debugged the test, it skips the try/catch sentence.</p>\n<p>I also see that I cannot inspect with Chrome browser dev tools or Xpath Helper.</p>\n"},{"tags":["java","json","jackson"],"owner":{"account_id":4347966,"reputation":13,"user_id":3549383,"display_name":"user3549383"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660762141,"creation_date":1660762078,"question_id":73393561,"body_markdown":"I have these objects:\r\n\r\n    public class Person {\r\n        private String name;\r\n        private String age;\r\n        private List&lt;Job&gt; list = new ArrayList&lt;&gt;();\r\n        //getters and setters\r\n\r\n    }\r\n\r\n    public class Job {\r\n        private String title;\r\n\r\n        public String getTitle() {\r\n            return title;\r\n        }\r\n\r\n        public void setTitle(String title) {\r\n            this.title = title;\r\n        }\r\n    }\r\nusing Jackson in main:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.activateDefaultTypingAsProperty( new DefaultBaseTypeLimitingValidator(), \r\n    ObjectMapper.DefaultTyping.NON_FINAL, &quot;class&quot;);\r\n    String json2 = mapper.writeValueAsString( person );\r\n\r\n    json2:\r\n    {\r\n      &quot;class&quot;:&quot;com.johnson.testing.Person&quot;,\r\n      &quot;name&quot;:&quot;Brandon Johnson&quot;,&quot;age&quot;:50,\r\n      &quot;list&quot;:[&quot;java.util.ArrayList&quot;, \r\n     [{&quot;class&quot;:&quot;com.johnson.testing2.Job&quot;,\r\n      &quot;title&quot;:&quot;work&quot;}]]\r\n    }\r\n\r\n\r\nI want the &quot;class&quot; key but I do not want the &quot;java.util.ArrayList&quot; field. I \r\nam using Jackson to serialize nested objects that are in libraries. I do not have \r\naccess to the Java Objects to annotate the classes. How can I just have the class \r\nwith path added to the many nested objects and not the other stuff?\r\n\r\n","title":"Jackson serialize Java Object to include class name","body":"<p>I have these objects:</p>\n<pre><code>public class Person {\n    private String name;\n    private String age;\n    private List&lt;Job&gt; list = new ArrayList&lt;&gt;();\n    //getters and setters\n\n}\n\npublic class Job {\n    private String title;\n\n    public String getTitle() {\n        return title;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n}\n</code></pre>\n<p>using Jackson in main:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.activateDefaultTypingAsProperty( new DefaultBaseTypeLimitingValidator(), \nObjectMapper.DefaultTyping.NON_FINAL, &quot;class&quot;);\nString json2 = mapper.writeValueAsString( person );\n\njson2:\n{\n  &quot;class&quot;:&quot;com.johnson.testing.Person&quot;,\n  &quot;name&quot;:&quot;Brandon Johnson&quot;,&quot;age&quot;:50,\n  &quot;list&quot;:[&quot;java.util.ArrayList&quot;, \n [{&quot;class&quot;:&quot;com.johnson.testing2.Job&quot;,\n  &quot;title&quot;:&quot;work&quot;}]]\n}\n</code></pre>\n<p>I want the &quot;class&quot; key but I do not want the &quot;java.util.ArrayList&quot; field. I\nam using Jackson to serialize nested objects that are in libraries. I do not have\naccess to the Java Objects to annotate the classes. How can I just have the class\nwith path added to the many nested objects and not the other stuff?</p>\n"},{"tags":["java","xml","spring-data-jpa","druid"],"answers":[{"tags":[],"owner":{"account_id":23944047,"reputation":131,"user_id":17936657,"display_name":"user17936657"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660762057,"creation_date":1660762057,"answer_id":73393558,"question_id":73385864,"body_markdown":"&gt; I wonder that there&#39;s a jpa dialect for Druid SQL?\r\n\r\nDruid dialect is +/- ANSI SQL. It adds some features and removes some features, but doesn&#39;t do anything divergent in area of functional overlap. If there is a JPA dialect for ANSI SQL then it should work.","title":"Is there a Druid SQL Dialect?","body":"<blockquote>\n<p>I wonder that there's a jpa dialect for Druid SQL?</p>\n</blockquote>\n<p>Druid dialect is +/- ANSI SQL. It adds some features and removes some features, but doesn't do anything divergent in area of functional overlap. If there is a JPA dialect for ANSI SQL then it should work.</p>\n"}],"owner":{"account_id":25853458,"reputation":47,"user_id":19587121,"display_name":"Danny.an"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":512,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73393558,"answer_count":1,"score":1,"last_activity_date":1660762057,"creation_date":1660727790,"question_id":73385864,"body_markdown":"I&#39;m using Spring Data JPA with druid.\r\n\r\nI added dependencies spring-boot-starter-data-jpa and avatica-core to use druid JDBC Driver with spring data jpa in my project.\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.calcite.avatica&lt;/groupId&gt;\r\n            &lt;artifactId&gt;avatica-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${avatica.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nAnd set properties like this.\r\n\r\n```\r\nspring.datasource.url=jdbc:avatica:remote:url=http://localhost:8888/druid/v2/sql/avatica/\r\nspring.datasource.driver-class-name=org.apache.calcite.avatica.remote.Driver\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\r\n```\r\n\r\nFinally, I checked that querying druid sql works well. \r\n\r\n\r\n```\r\n@Repository\r\npublic interface SampleRepository extends JpaRepository&lt;SampleEntity, String&gt; {\r\n\r\n    @Query(\r\n        value = &quot;SELECT w.page as page, count(w.page) as cnt &quot; +\r\n            &quot;FROM wikipedia w &quot; +\r\n            &quot;GROUP BY w.page &quot; +\r\n            &quot;ORDER BY cnt DESC &quot; +\r\n            &quot;LIMIT 10&quot;,\r\n        nativeQuery = true\r\n    )\r\n    List&lt;PageCount&gt; findPageCountTopN();\r\n```\r\n\r\nBut, I wonder that there&#39;s a jpa dialect for Druid SQL.\r\n\r\nIn official document of Druid SQL, no information about druid sql dialect. \r\n\r\nAs you see, there&#39;s no issue for using MySQL8Dialect and it works well.\r\n\r\nBut, in case an unexpected problem may arise, I&#39;d like to apply it if there is such a thing.\r\n","title":"Is there a Druid SQL Dialect?","body":"<p>I'm using Spring Data JPA with druid.</p>\n<p>I added dependencies spring-boot-starter-data-jpa and avatica-core to use druid JDBC Driver with spring data jpa in my project.</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.calcite.avatica&lt;/groupId&gt;\n            &lt;artifactId&gt;avatica-core&lt;/artifactId&gt;\n            &lt;version&gt;${avatica.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>And set properties like this.</p>\n<pre><code>spring.datasource.url=jdbc:avatica:remote:url=http://localhost:8888/druid/v2/sql/avatica/\nspring.datasource.driver-class-name=org.apache.calcite.avatica.remote.Driver\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\n</code></pre>\n<p>Finally, I checked that querying druid sql works well.</p>\n<pre><code>@Repository\npublic interface SampleRepository extends JpaRepository&lt;SampleEntity, String&gt; {\n\n    @Query(\n        value = &quot;SELECT w.page as page, count(w.page) as cnt &quot; +\n            &quot;FROM wikipedia w &quot; +\n            &quot;GROUP BY w.page &quot; +\n            &quot;ORDER BY cnt DESC &quot; +\n            &quot;LIMIT 10&quot;,\n        nativeQuery = true\n    )\n    List&lt;PageCount&gt; findPageCountTopN();\n</code></pre>\n<p>But, I wonder that there's a jpa dialect for Druid SQL.</p>\n<p>In official document of Druid SQL, no information about druid sql dialect.</p>\n<p>As you see, there's no issue for using MySQL8Dialect and it works well.</p>\n<p>But, in case an unexpected problem may arise, I'd like to apply it if there is such a thing.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1660733269,"post_id":73387015,"comment_id":129600771,"body_markdown":"Make two separate regular expressions. That is way simpler and more logical.","body":"Make two separate regular expressions. That is way simpler and more logical."},{"owner":{"account_id":9461307,"reputation":13,"user_id":7034945,"display_name":"Ishan Sharma"},"score":0,"creation_date":1660733389,"post_id":73387015,"comment_id":129600814,"body_markdown":"I want to extract them as part of the single call as I&#39;ll have many such string and don&#39;t want to work on multiple matches.","body":"I want to extract them as part of the single call as I&#39;ll have many such string and don&#39;t want to work on multiple matches."},{"owner":{"account_id":9461307,"reputation":13,"user_id":7034945,"display_name":"Ishan Sharma"},"score":0,"creation_date":1660733452,"post_id":73387015,"comment_id":129600834,"body_markdown":"@anubhava This regex isn&#39;t compiling in Java.. Trying to make it work.","body":"@anubhava This regex isn&#39;t compiling in Java.. Trying to make it work."},{"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1660733536,"post_id":73387015,"comment_id":129600869,"body_markdown":"In Java use: `String regex = &quot;\\\\{([^\\\\]\\\\[\\\\{\\\\}]+)\\\\}.*?\\\\[([^\\\\]\\\\[\\\\{\\\\}]+)]&quot;;`","body":"In Java use: <code>String regex = &quot;\\\\{([^\\\\]\\\\[\\\\{\\\\}]+)\\\\}.*?\\\\[([^\\\\]\\\\[\\\\{\\\\}]+)]&quot;;</code>"}],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660734919,"creation_date":1660734613,"answer_id":73387438,"question_id":73387015,"body_markdown":"In Java, you can use this regex and code:\r\n\r\n```Java\r\nString s = &quot;{num} scores {/game/[game_name]/game_in}&quot;;\r\nPattern p = Pattern.compile(\r\n                 &quot;\\\\{([^]\\\\[\\\\{\\\\}]+)\\\\}.*?\\\\[([^]\\\\[\\\\{\\\\}]+)]&quot;);\r\n\r\nList&lt;String&gt; res = p.matcher(s)\r\n   .results()\r\n   .flatMap(mr -&gt; IntStream.rangeClosed(1, mr.groupCount())\r\n   .mapToObj(mr::group))\r\n   .collect(Collectors.toList());\r\n//=&gt; [num, game_name]\r\n```\r\n\r\n[RegEx Demo][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/q19EBE/1\r\n\r\n**RegEx Details:**\r\n\r\n- `\\{`: Match `{`\r\n- `([^]\\[{}]+)`: Capture group #1 to capture 1+ of any char that is not `{, }, [, ]`\r\n- `}`: Match `}`\r\n- `.*?`: Match any text (lazy)\r\n- `\\[`: Match `[`\r\n- `([^]\\[{}]+)`: Capture group #2 to capture 1+ of any char that is not `{, }, [, ]`\r\n- `]`: Match `]`","title":"Java regex for matching curly braces and brackets within braces","body":"<p>In Java, you can use this regex and code:</p>\n<pre><code>String s = &quot;{num} scores {/game/[game_name]/game_in}&quot;;\nPattern p = Pattern.compile(\n                 &quot;\\\\{([^]\\\\[\\\\{\\\\}]+)\\\\}.*?\\\\[([^]\\\\[\\\\{\\\\}]+)]&quot;);\n\nList&lt;String&gt; res = p.matcher(s)\n   .results()\n   .flatMap(mr -&gt; IntStream.rangeClosed(1, mr.groupCount())\n   .mapToObj(mr::group))\n   .collect(Collectors.toList());\n//=&gt; [num, game_name]\n</code></pre>\n<p><a href=\"https://regex101.com/r/q19EBE/1\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n<p><strong>RegEx Details:</strong></p>\n<ul>\n<li><code>\\{</code>: Match <code>{</code></li>\n<li><code>([^]\\[{}]+)</code>: Capture group #1 to capture 1+ of any char that is not <code>{, }, [, ]</code></li>\n<li><code>}</code>: Match <code>}</code></li>\n<li><code>.*?</code>: Match any text (lazy)</li>\n<li><code>\\[</code>: Match <code>[</code></li>\n<li><code>([^]\\[{}]+)</code>: Capture group #2 to capture 1+ of any char that is not <code>{, }, [, ]</code></li>\n<li><code>]</code>: Match <code>]</code></li>\n</ul>\n"}],"owner":{"account_id":9461307,"reputation":13,"user_id":7034945,"display_name":"Ishan Sharma"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73387438,"answer_count":1,"score":0,"last_activity_date":1660761462,"creation_date":1660732684,"question_id":73387015,"body_markdown":"I have the following String - `There are {num} scores {/game/[game_name]/game_in}`.\r\nI want to extract `num` and `game_name` from the string.\r\nI have the following Pattern - `&quot;\\\\{([^}]+)}&quot;` which extract `num` from the String. How can I extend it to extract `game_name` also?","title":"Java regex for matching curly braces and brackets within braces","body":"<p>I have the following String - <code>There are {num} scores {/game/[game_name]/game_in}</code>.\nI want to extract <code>num</code> and <code>game_name</code> from the string.\nI have the following Pattern - <code>&quot;\\\\{([^}]+)}&quot;</code> which extract <code>num</code> from the String. How can I extend it to extract <code>game_name</code> also?</p>\n"},{"tags":["java","mongodb","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":19322097,"reputation":284,"user_id":14125569,"display_name":"ratzownal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660761049,"creation_date":1660761049,"answer_id":73393381,"question_id":73391513,"body_markdown":"It depends on your needs. The sentence with collection 5 times in it is very confusing. I thing your question is if you should embed or reference the images. In my opinion it would be the beste to store images file based an store just a Link in MongoDB. MongoDB is not a file storage and limited to 16MB per document. I dont know how big your images are but a file based storage would be the best solution.\r\n\r\nSo if you stick to your solution I would say to store each image as an own document, maybe with metadata, in a Collection just for images.","title":"Looking for a best way to read images from MongoDB","body":"<p>It depends on your needs. The sentence with collection 5 times in it is very confusing. I thing your question is if you should embed or reference the images. In my opinion it would be the beste to store images file based an store just a Link in MongoDB. MongoDB is not a file storage and limited to 16MB per document. I dont know how big your images are but a file based storage would be the best solution.</p>\n<p>So if you stick to your solution I would say to store each image as an own document, maybe with metadata, in a Collection just for images.</p>\n"}],"owner":{"account_id":26021002,"reputation":33,"user_id":19728708,"display_name":"Stefan Jankovic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660761049,"creation_date":1660751729,"question_id":73391513,"body_markdown":"I&#39;ll provide a [link of website][1] so you can understand better what I&#39;m trying to achieve. \r\n\r\nIf you go on link and then go on &gt; `Adventure Holidays` &gt; `Summer Camps` you will get on page where site provide you a random document from collection. So far there is just two documents but you&#39;ll get it. So, I want to have different image from each documents that user get.\r\n\r\nIf user get `Kieve Summer Camp` show him image of Kieve Camp and so on. But I&#39;m stuck.\r\n\r\nIs a better option to create Photo collection and then that collection to connect with every other collection and than compare IDs from photo collection with other documents from other collection? Or is a better way to add field photo on each document and get that image like I&#39;m now getting title, description and etc?\r\n\r\n\r\n  [1]: https://tripadvisor-app-demo.herokuapp.com/","title":"Looking for a best way to read images from MongoDB","body":"<p>I'll provide a <a href=\"https://tripadvisor-app-demo.herokuapp.com/\" rel=\"nofollow noreferrer\">link of website</a> so you can understand better what I'm trying to achieve.</p>\n<p>If you go on link and then go on &gt; <code>Adventure Holidays</code> &gt; <code>Summer Camps</code> you will get on page where site provide you a random document from collection. So far there is just two documents but you'll get it. So, I want to have different image from each documents that user get.</p>\n<p>If user get <code>Kieve Summer Camp</code> show him image of Kieve Camp and so on. But I'm stuck.</p>\n<p>Is a better option to create Photo collection and then that collection to connect with every other collection and than compare IDs from photo collection with other documents from other collection? Or is a better way to add field photo on each document and get that image like I'm now getting title, description and etc?</p>\n"},{"tags":["java","arrays","nested-loops"],"comments":[{"owner":{"account_id":8306545,"reputation":47696,"user_id":6243352,"display_name":"ggorlen"},"score":0,"creation_date":1555881823,"post_id":55786475,"comment_id":98244247,"body_markdown":"What happens when you add two `ARRSIZE` numbers that are all 9s and have a carry, creating an `ARRSIZE+1`-sized number?","body":"What happens when you add two <code>ARRSIZE</code> numbers that are all 9s and have a carry, creating an <code>ARRSIZE+1</code>-sized number?"},{"owner":{"account_id":13069678,"reputation":37,"user_id":9443661,"display_name":"CurlyFry"},"score":0,"creation_date":1555882096,"post_id":55786475,"comment_id":98244302,"body_markdown":"@ggorlen Are you suggesting I may get an out of bounds exception with this code? The highest number we&#39;re given in the assignment will not go over the 25-size, if that&#39;s what you&#39;re asking. It&#39;ll actually be 23 or 24 as the highest number given","body":"@ggorlen Are you suggesting I may get an out of bounds exception with this code? The highest number we&#39;re given in the assignment will not go over the 25-size, if that&#39;s what you&#39;re asking. It&#39;ll actually be 23 or 24 as the highest number given"},{"owner":{"account_id":8306545,"reputation":47696,"user_id":6243352,"display_name":"ggorlen"},"score":0,"creation_date":1555883067,"post_id":55786475,"comment_id":98244518,"body_markdown":"OK, that&#39;s convenient. May I also ask: why are you returning `void`? How are you supposed to mutate the `String[] stuff` such that the result is returned? Is it supposed to turn into a string array with only one element and what happens to the extra space? Returning a `String` makes the most sense to me here.","body":"OK, that&#39;s convenient. May I also ask: why are you returning <code>void</code>? How are you supposed to mutate the <code>String[] stuff</code> such that the result is returned? Is it supposed to turn into a string array with only one element and what happens to the extra space? Returning a <code>String</code> makes the most sense to me here."},{"owner":{"account_id":13069678,"reputation":37,"user_id":9443661,"display_name":"CurlyFry"},"score":0,"creation_date":1555884596,"post_id":55786475,"comment_id":98244813,"body_markdown":"@ggorlen I&#39;m kinda not worrying about that right now. My current plan is to take what I get in this method and pass it on to another method. The future method will either output to console the math (goal of the assignment), or I&#39;ll change it to return back to the previous methods","body":"@ggorlen I&#39;m kinda not worrying about that right now. My current plan is to take what I get in this method and pass it on to another method. The future method will either output to console the math (goal of the assignment), or I&#39;ll change it to return back to the previous methods"}],"answers":[{"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555888850,"creation_date":1555888850,"answer_id":55787588,"question_id":55786475,"body_markdown":"Just a simple solution, which you might have to adjust a bit so it fits your needs:\r\n\r\n\r\n    public static void addStuff(String[] stuff) {\r\n        if (stuff.length != result.length) {\r\n            throw new IllegalArgumentException(&quot;length does not match&quot;);\r\n        }\r\n        int carry = 0;\r\n        for (int i = stuff.length - 1; i &gt;= 0; i--) {\r\n            int temp = Integer.parseInt(result[i]) + Integer.parseInt(stuff[i]) + carry;\r\n            carry = temp / 10;\r\n            result[i] = String.valueOf(temp % 10);\r\n        }\r\n    }\r\n\r\nThis adds the given String array to a global result array, defined like this:\r\n\r\n    private static final String[] result = &quot;0000000000000000000000000&quot;.split(&quot;&quot;);\r\n\r\nIf you call it with the numbers you provided you can use it this way:\r\n\r\n    addStuff(&quot;0000000000000000000000203&quot;.split(&quot;&quot;));\r\n    addStuff(&quot;0000000000000000000000045&quot;.split(&quot;&quot;));\r\n    addStuff(&quot;0000000000000000000000010&quot;.split(&quot;&quot;));\r\n    System.out.println(String.join(&quot;&quot;, result));\r\n\r\nThe result will be:\r\n\r\n    0000000000000000000000258\r\n\r\nHope that helps. Of course you should do some more exception handling, but this is just a little example to show you how you could solve your problem.","title":"Using a Nested For Loop to &quot;Add&quot; Two String Arrays With Number Values Together","body":"<p>Just a simple solution, which you might have to adjust a bit so it fits your needs:</p>\n\n<pre><code>public static void addStuff(String[] stuff) {\n    if (stuff.length != result.length) {\n        throw new IllegalArgumentException(\"length does not match\");\n    }\n    int carry = 0;\n    for (int i = stuff.length - 1; i &gt;= 0; i--) {\n        int temp = Integer.parseInt(result[i]) + Integer.parseInt(stuff[i]) + carry;\n        carry = temp / 10;\n        result[i] = String.valueOf(temp % 10);\n    }\n}\n</code></pre>\n\n<p>This adds the given String array to a global result array, defined like this:</p>\n\n<pre><code>private static final String[] result = \"0000000000000000000000000\".split(\"\");\n</code></pre>\n\n<p>If you call it with the numbers you provided you can use it this way:</p>\n\n<pre><code>addStuff(\"0000000000000000000000203\".split(\"\"));\naddStuff(\"0000000000000000000000045\".split(\"\"));\naddStuff(\"0000000000000000000000010\".split(\"\"));\nSystem.out.println(String.join(\"\", result));\n</code></pre>\n\n<p>The result will be:</p>\n\n<pre><code>0000000000000000000000258\n</code></pre>\n\n<p>Hope that helps. Of course you should do some more exception handling, but this is just a little example to show you how you could solve your problem.</p>\n"}],"owner":{"account_id":13069678,"reputation":37,"user_id":9443661,"display_name":"CurlyFry"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":298,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660760837,"creation_date":1555878437,"question_id":55786475,"body_markdown":"I&#39;m trying to make a program that takes x number of additives and turns them into a String based result. The reasoning for using String[ ] and not int[ ] is because some numbers are way too big for int/long (and we&#39;re not allowed to use BigInteger on this project), so we&#39;re sticking to String[ ] in this program. Also: all values in the String[ ] parameter are 25 zero&#39;s long, with the number replacing the last few of the zeros, as seen below.\r\n\r\nFor example: if you passed in a string array with the three values...\r\n\r\n    0000000000000000000000203\r\n    \r\n    0000000000000000000000045\r\n    \r\n    0000000000000000000000010\r\n\r\nThe method would condense it into a String[ ] with the value...\r\n\r\n    0000000000000000000000258\r\n\r\nThe difficult part is accounting for &quot;carrying a number over&quot;, like in elementary algebra.\r\nBelow is what I&#39;ve got so far\r\n\r\n    //Every array will be 25 digits long. Mostly zeroes with the numbers to add at the \r\n    //end\r\n    public static final int ARRSIZE = 25;\r\n\r\n    public static void addStuff(String[] stuff)    {\r\n        String[] result = new String[ARRSIZE];\r\n        int[] holder = new int[ARRSIZE];\r\n        String temp = &quot;&quot;;\r\n        int area = 0;\r\n        int carry = 0;\r\n        for (int i = 0; i &lt; stuff.length; i++)\r\n        {\r\n            for (int j = 0; j &lt; stuff.length; j++)\r\n            {\r\n                temp = stuff[j].substring(stuff[i].length() - 1-i, stuff[i].length()-i);\r\n                area += Integer.parseInt(temp);\r\n                if (area &gt;= 10)\r\n                {\r\n                    carry = area/10;\r\n                    holder[ARRSIZE - 1-i] = area%10;\r\n                    area = 0;\r\n                }\r\n                carry = 0;\r\n            }\r\n        }\r\n\r\n        //TODO: Make int[] holder -&gt; String[] result\r\n        //Take result String[] to future method\r\n    }\r\n\r\nWhat I&#39;m trying to do with this code is to read the last element of each String[ ] element, turn it into an int to add down the line, and store the final number as a String[] (result) for later printing in a future method. I&#39;ve always been pretty bad with nested for loops, so I figured this confusion would happen. So far, I&#39;ve managed to get the logic down where I successfully add the rightmost column and store it in area, while carrying a number. From there on is where I&#39;m lost.","title":"Using a Nested For Loop to &quot;Add&quot; Two String Arrays With Number Values Together","body":"<p>I'm trying to make a program that takes x number of additives and turns them into a String based result. The reasoning for using String[ ] and not int[ ] is because some numbers are way too big for int/long (and we're not allowed to use BigInteger on this project), so we're sticking to String[ ] in this program. Also: all values in the String[ ] parameter are 25 zero's long, with the number replacing the last few of the zeros, as seen below.</p>\n\n<p>For example: if you passed in a string array with the three values...</p>\n\n<pre><code>0000000000000000000000203\n\n0000000000000000000000045\n\n0000000000000000000000010\n</code></pre>\n\n<p>The method would condense it into a String[ ] with the value...</p>\n\n<pre><code>0000000000000000000000258\n</code></pre>\n\n<p>The difficult part is accounting for \"carrying a number over\", like in elementary algebra.\nBelow is what I've got so far</p>\n\n<pre><code>//Every array will be 25 digits long. Mostly zeroes with the numbers to add at the \n//end\npublic static final int ARRSIZE = 25;\n\npublic static void addStuff(String[] stuff)    {\n    String[] result = new String[ARRSIZE];\n    int[] holder = new int[ARRSIZE];\n    String temp = \"\";\n    int area = 0;\n    int carry = 0;\n    for (int i = 0; i &lt; stuff.length; i++)\n    {\n        for (int j = 0; j &lt; stuff.length; j++)\n        {\n            temp = stuff[j].substring(stuff[i].length() - 1-i, stuff[i].length()-i);\n            area += Integer.parseInt(temp);\n            if (area &gt;= 10)\n            {\n                carry = area/10;\n                holder[ARRSIZE - 1-i] = area%10;\n                area = 0;\n            }\n            carry = 0;\n        }\n    }\n\n    //TODO: Make int[] holder -&gt; String[] result\n    //Take result String[] to future method\n}\n</code></pre>\n\n<p>What I'm trying to do with this code is to read the last element of each String[ ] element, turn it into an int to add down the line, and store the final number as a String[] (result) for later printing in a future method. I've always been pretty bad with nested for loops, so I figured this confusion would happen. So far, I've managed to get the logic down where I successfully add the rightmost column and store it in area, while carrying a number. From there on is where I'm lost.</p>\n"},{"tags":["java","object","file-io"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1376619990,"post_id":18264855,"comment_id":26788327,"body_markdown":"I thought this was the default behaviour of `FileOutputStream`, overwrite, not append...could be wrong :P","body":"I thought this was the default behaviour of <code>FileOutputStream</code>, overwrite, not append...could be wrong :P"},{"owner":{"account_id":416171,"reputation":31417,"user_id":791406,"accept_rate":69,"display_name":"raffian"},"score":0,"creation_date":1376663246,"post_id":18264855,"comment_id":26806961,"body_markdown":"@MadProgrammer It&#39;s not the default behavior if you keep the file open; it just keeps appending.","body":"@MadProgrammer It&#39;s not the default behavior if you keep the file open; it just keeps appending."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1376684970,"post_id":18264855,"comment_id":26818449,"body_markdown":"Yep, didn&#39;t read the code that way","body":"Yep, didn&#39;t read the code that way"}],"answers":[{"tags":[],"owner":{"account_id":932139,"reputation":10997,"user_id":961810,"accept_rate":69,"display_name":"Brad Peabody"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1376627700,"creation_date":1376620004,"answer_id":18264883,"question_id":18264855,"body_markdown":"Easiest way would be to close and reopen the file, just re-run this code inside your persistObject() method:\r\n\r\n    private void persistObject( Hashtable ht){\r\n        try (ObjectOutputStream writer = new ObjectOutputStream(new FileOutputStream(f))) {\r\n            writer.writeObject( hashtable);\r\n            writer.flush();\r\n            writer.close();\r\n        }\r\n    }\r\n","title":"Java writeObject() to always overwrite existing object, never append?","body":"<p>Easiest way would be to close and reopen the file, just re-run this code inside your persistObject() method:</p>\n\n<pre><code>private void persistObject( Hashtable ht){\n    try (ObjectOutputStream writer = new ObjectOutputStream(new FileOutputStream(f))) {\n        writer.writeObject( hashtable);\n        writer.flush();\n        writer.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1376691229,"creation_date":1376620409,"answer_id":18264943,"question_id":18264855,"body_markdown":"If you want to discard file contents and start writing at the beginning of the file again, you can obtain it&#39;s channel and reposition the content. The problem is, ObjectStreams uses some internal headers, and if we want to &quot;reset&quot; the stream we need to account for that.\r\n\r\nJust after instantiating the `ObjectOutputStream`, store the initial position (`writeStreamHeader` writes two shorts - which consumes 4 bytes, but better be generic than sorry) so that you can position the channel without overwriting the header.\r\n\r\n    final long initialPosition = fout.getChannel().position();\r\n\r\n\r\nThen, every time you have to write something, skip the initial bytes (by positioning the channel), reset the stream and write your object:\r\n\r\n&lt;!-- langauge: java --&gt;\r\n\r\n    //java 1.7\r\n    private void persistObject(Hashtable ht){\r\n       fout.getChannel().position(initialPosition);\r\n       fout.reset();\r\n       writer.writeObject(ht);\r\n       writer.flush();\r\n    }\r\n\r\n&lt;!-- langauge: java --&gt;\r\n\r\n    //java 1.6\r\n    private void persistObject(Hashtable ht){\r\n       fout.getChannel().position(initialPosition);\r\n       fout.getChannel().truncate(initialPosition);\r\n       writer.writeObject(ht);\r\n       writer.flush();\r\n    }\r\n\r\nAs @bgp mentioned, I don&#39;t think that opening / closing the file really introduces that much overhead... Also I don&#39;t think that truncating and flushing to disk at every write is efficient, or that keeping file streams open for long periods of time is a good practice (or safe), still it was quite fun to hack the `ObjectOutputStream`.  ","title":"Java writeObject() to always overwrite existing object, never append?","body":"<p>If you want to discard file contents and start writing at the beginning of the file again, you can obtain it's channel and reposition the content. The problem is, ObjectStreams uses some internal headers, and if we want to \"reset\" the stream we need to account for that.</p>\n\n<p>Just after instantiating the <code>ObjectOutputStream</code>, store the initial position (<code>writeStreamHeader</code> writes two shorts - which consumes 4 bytes, but better be generic than sorry) so that you can position the channel without overwriting the header.</p>\n\n<pre><code>final long initialPosition = fout.getChannel().position();\n</code></pre>\n\n<p>Then, every time you have to write something, skip the initial bytes (by positioning the channel), reset the stream and write your object:</p>\n\n\n\n<pre><code>//java 1.7\nprivate void persistObject(Hashtable ht){\n   fout.getChannel().position(initialPosition);\n   fout.reset();\n   writer.writeObject(ht);\n   writer.flush();\n}\n</code></pre>\n\n\n\n<pre><code>//java 1.6\nprivate void persistObject(Hashtable ht){\n   fout.getChannel().position(initialPosition);\n   fout.getChannel().truncate(initialPosition);\n   writer.writeObject(ht);\n   writer.flush();\n}\n</code></pre>\n\n<p>As @bgp mentioned, I don't think that opening / closing the file really introduces that much overhead... Also I don't think that truncating and flushing to disk at every write is efficient, or that keeping file streams open for long periods of time is a good practice (or safe), still it was quite fun to hack the <code>ObjectOutputStream</code>.  </p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1376626098,"creation_date":1376625406,"answer_id":18265548,"question_id":18264855,"body_markdown":"You should open / write / close ObjectOutputStream in persistObject. You should not truncate file at position 0. ObjectOuputStream has a complex structure, not only objects data but a header, class descriptors etc. Truncating will destroy it resulting in  StreamCorruptedException when attempting to read it.","title":"Java writeObject() to always overwrite existing object, never append?","body":"<p>You should open / write / close ObjectOutputStream in persistObject. You should not truncate file at position 0. ObjectOuputStream has a complex structure, not only objects data but a header, class descriptors etc. Truncating will destroy it resulting in  StreamCorruptedException when attempting to read it.</p>\n"},{"tags":[],"owner":{"account_id":26090973,"reputation":1,"user_id":19787871,"display_name":"Shahzeb Bhutto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660760094,"creation_date":1660760094,"answer_id":73393171,"question_id":18264855,"body_markdown":"You only have to close the file when you save the Object\r\nand open it when retriving object.\r\n\r\n    FileOutputStream fout = new FileOutputStream( f);\r\n    ObjectOutputStream writer = new ObjectOutputStream(fout);\r\n    writer.writeObject( hashtable);\r\n    writer.close();\r\n\r\n\r\n\r\n\r\n","title":"Java writeObject() to always overwrite existing object, never append?","body":"<p>You only have to close the file when you save the Object\nand open it when retriving object.</p>\n<pre><code>FileOutputStream fout = new FileOutputStream( f);\nObjectOutputStream writer = new ObjectOutputStream(fout);\nwriter.writeObject( hashtable);\nwriter.close();\n</code></pre>\n"}],"owner":{"account_id":416171,"reputation":31417,"user_id":791406,"accept_rate":69,"display_name":"raffian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9490,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18264943,"answer_count":4,"score":1,"last_activity_date":1660760094,"creation_date":1376619786,"question_id":18264855,"body_markdown":"I want to serialize a Hashtable to a file using `ObjectOutputStream.writeObject()`, but I want the writer to always overwrite any existing object such that only a single object exists:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    FileOutputStream fout = new FileOutputStream( f);\r\n    ObjectOutputStream writer = new ObjectOutputStream(fout);\r\n    writer.writeObject( hashtable);\r\n    writer.flush();\r\n\t\r\n\r\nThe hastable is updated intermittently at runtime, so I use a helper method to persist its state:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    private void persistObject( Hashtable ht){\r\n       writer.writeObject( ht);\r\n       writer.flush();\r\n    }\r\n\r\nThe problem is every time I call `writeObject()`, a new hastable is appended to the file; Is there any way to just overwrite whatever is in the file so only a single object is ever persisted? \r\n\r\n","title":"Java writeObject() to always overwrite existing object, never append?","body":"<p>I want to serialize a Hashtable to a file using <code>ObjectOutputStream.writeObject()</code>, but I want the writer to always overwrite any existing object such that only a single object exists:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>FileOutputStream fout = new FileOutputStream( f);\nObjectOutputStream writer = new ObjectOutputStream(fout);\nwriter.writeObject( hashtable);\nwriter.flush();\n</code></pre>\n\n<p>The hastable is updated intermittently at runtime, so I use a helper method to persist its state:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private void persistObject( Hashtable ht){\n   writer.writeObject( ht);\n   writer.flush();\n}\n</code></pre>\n\n<p>The problem is every time I call <code>writeObject()</code>, a new hastable is appended to the file; Is there any way to just overwrite whatever is in the file so only a single object is ever persisted? </p>\n"},{"tags":["java","kotlin","junit5","kotest"],"answers":[{"tags":[],"owner":{"account_id":20928711,"reputation":3225,"user_id":15375588,"display_name":"Karsten Gabriel"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1660741789,"creation_date":1660737357,"answer_id":73388063,"question_id":73383780,"body_markdown":"[Kotest Inspectors](https://kotest.io/docs/assertions/inspectors.html) might be what you are looking for. They allow to test that all, none, or a specific number of elements in a collection satisfy specific assertions.\r\n\r\nWithout knowledge of the address references data types I would assume that your example can be translated to Kotest like this:\r\n```\r\nwithClue(&quot;The list of addresses&quot;) {\r\n    val references = addresses.getAddressReferences()\r\n    assertSoftly {\r\n        references shouldHaveSize 2\r\n        references.forOne {\r\n            it.id shouldBe &quot;abc&quot;\r\n            it.role shouldBe SENDER\r\n        }\r\n        references.forOne {\r\n            it.id shouldBe &quot;def&quot;\r\n            it.role shouldBe RECEIVER\r\n        }\r\n    }\r\n}\r\n```\r\nAs pointed out by @LeoColman, the `withClue` and `assertSoftly` are not mandatory:\r\n* `withClue` just adds the given clue as additional info to the assertion error message in case an assertion fails.\r\n* `assertSoftly` lets all of the assertions inside it run instead of stopping at the first failed assertion. This means that if we have for instance a collection of 3 elements, we still get information about the fact that there is or is not an element with `id` `&quot;abc&quot;` and `role` `SENDER`.","title":"Assert that list contains elements with specific properties in any order","body":"<p><a href=\"https://kotest.io/docs/assertions/inspectors.html\" rel=\"nofollow noreferrer\">Kotest Inspectors</a> might be what you are looking for. They allow to test that all, none, or a specific number of elements in a collection satisfy specific assertions.</p>\n<p>Without knowledge of the address references data types I would assume that your example can be translated to Kotest like this:</p>\n<pre><code>withClue(&quot;The list of addresses&quot;) {\n    val references = addresses.getAddressReferences()\n    assertSoftly {\n        references shouldHaveSize 2\n        references.forOne {\n            it.id shouldBe &quot;abc&quot;\n            it.role shouldBe SENDER\n        }\n        references.forOne {\n            it.id shouldBe &quot;def&quot;\n            it.role shouldBe RECEIVER\n        }\n    }\n}\n</code></pre>\n<p>As pointed out by @LeoColman, the <code>withClue</code> and <code>assertSoftly</code> are not mandatory:</p>\n<ul>\n<li><code>withClue</code> just adds the given clue as additional info to the assertion error message in case an assertion fails.</li>\n<li><code>assertSoftly</code> lets all of the assertions inside it run instead of stopping at the first failed assertion. This means that if we have for instance a collection of 3 elements, we still get information about the fact that there is or is not an element with <code>id</code> <code>&quot;abc&quot;</code> and <code>role</code> <code>SENDER</code>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5339493,"reputation":7038,"user_id":4257162,"accept_rate":80,"display_name":"LeoColman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660741269,"creation_date":1660741269,"answer_id":73388937,"question_id":73383780,"body_markdown":"Using inspectors as suggested by @Karsten seems like the way here!\r\n\r\nI present a simpler way to make the same assertions if you want to keep the code smaller:\r\n\r\n```\r\nval references = addresses.getAddressReferences()\r\nreferences.forOne {\r\n    it.id shouldBe &quot;abc&quot;\r\n    it.role shouldBe SENDER\r\n}\r\n\r\nreferences.forOne {\r\n    it.id shouldBe &quot;def&quot;\r\n    it.role shouldBe RECEIVER\r\n}\r\n```\r\n\r\nBoth `withClue` and `assertSoftly` are optional","title":"Assert that list contains elements with specific properties in any order","body":"<p>Using inspectors as suggested by @Karsten seems like the way here!</p>\n<p>I present a simpler way to make the same assertions if you want to keep the code smaller:</p>\n<pre><code>val references = addresses.getAddressReferences()\nreferences.forOne {\n    it.id shouldBe &quot;abc&quot;\n    it.role shouldBe SENDER\n}\n\nreferences.forOne {\n    it.id shouldBe &quot;def&quot;\n    it.role shouldBe RECEIVER\n}\n</code></pre>\n<p>Both <code>withClue</code> and <code>assertSoftly</code> are optional</p>\n"}],"owner":{"account_id":320193,"reputation":7715,"user_id":638344,"accept_rate":75,"display_name":"Chris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1548,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73388063,"answer_count":2,"score":3,"last_activity_date":1660759681,"creation_date":1660717685,"question_id":73383780,"body_markdown":"In Junit5 i used the following snippet often to test if a collection contains elements that fullfill certain criteria:\r\n\r\n    assertThat(&quot;The list of addresses&quot;, addresses.getAddressReferences(), containsInAnyOrder(\r\n            allOf(\r\n                hasProperty(&quot;id&quot;, is(&quot;abc&quot;)),\r\n                hasProperty(&quot;role&quot;, is(SENDER))\r\n            ),\r\n            allOf(\r\n                hasProperty(&quot;id&quot;, is(&quot;def&quot;)),\r\n                hasProperty(&quot;role&quot;, is(RECEIVER))\r\n            )\r\n        ));\r\n\r\nI did not yet find a way to express this in kotest\r\nI tried `shouldContainExactlyInAnyOrder` and such but they expect an actual object. I don&#39;t know how to express that i want to test each element against a different matcher.\r\n\r\nI also checked the inspectors which might be the solution but they only seem to help to make assertions on ALL elements in the list at once.","title":"Assert that list contains elements with specific properties in any order","body":"<p>In Junit5 i used the following snippet often to test if a collection contains elements that fullfill certain criteria:</p>\n<pre><code>assertThat(&quot;The list of addresses&quot;, addresses.getAddressReferences(), containsInAnyOrder(\n        allOf(\n            hasProperty(&quot;id&quot;, is(&quot;abc&quot;)),\n            hasProperty(&quot;role&quot;, is(SENDER))\n        ),\n        allOf(\n            hasProperty(&quot;id&quot;, is(&quot;def&quot;)),\n            hasProperty(&quot;role&quot;, is(RECEIVER))\n        )\n    ));\n</code></pre>\n<p>I did not yet find a way to express this in kotest\nI tried <code>shouldContainExactlyInAnyOrder</code> and such but they expect an actual object. I don't know how to express that i want to test each element against a different matcher.</p>\n<p>I also checked the inspectors which might be the solution but they only seem to help to make assertions on ALL elements in the list at once.</p>\n"},{"tags":["java","jpa","transient"],"answers":[{"tags":[],"owner":{"account_id":11645864,"reputation":46,"user_id":8528756,"display_name":"Umberto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660759630,"creation_date":1660759630,"answer_id":73393103,"question_id":73392737,"body_markdown":"I think the problem might be `List` which doesnt extend `Serializable`. You can solve it by using `ArrayList` which instead extends it. ","title":"Java Sonar make it transient or serializable spring jpa","body":"<p>I think the problem might be <code>List</code> which doesnt extend <code>Serializable</code>. You can solve it by using <code>ArrayList</code> which instead extends it.</p>\n"}],"owner":{"account_id":17779952,"reputation":117,"user_id":12911346,"display_name":"iftwMZ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":362,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1660759630,"creation_date":1660757748,"question_id":73392737,"body_markdown":"```  @Entity\r\n@Table(name = &quot;users&quot;)\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\npublic class User {\r\n\r\n   @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    private String name;\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;company_id&quot;)\r\n    private Company company; // here sonar complains about transient\r\n\r\n}\r\n```\r\n\r\nMy Company is:\r\n``` \r\n@Entity\r\n@Setter\r\n@Getter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(name = &quot;companies&quot;)\r\npublic class Company {\r\n    @Id\r\n    @GeneratedValue(generator = &quot;increment&quot;)\r\n    @Column\r\n    private Long id;\r\n\r\n\r\n    private String name;\r\n\r\n    @OneToMany(mappedBy = &quot;company&quot;)\r\n    private List&lt;User&gt; users;\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nMy question is, how i should deal with this? If i put private transient Company my application won&#39;t start , i get errors : mappedBy reference an unknown target entity property. How can i deal with it?","title":"Java Sonar make it transient or serializable spring jpa","body":"<pre><code>@Table(name = &quot;users&quot;)\n@NoArgsConstructor\n@Getter\n@Setter\n@AllArgsConstructor\npublic class User {\n\n   @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n    @ManyToOne\n    @JoinColumn(name = &quot;company_id&quot;)\n    private Company company; // here sonar complains about transient\n\n}\n</code></pre>\n<p>My Company is:</p>\n<pre><code>@Entity\n@Setter\n@Getter\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name = &quot;companies&quot;)\npublic class Company {\n    @Id\n    @GeneratedValue(generator = &quot;increment&quot;)\n    @Column\n    private Long id;\n\n\n    private String name;\n\n    @OneToMany(mappedBy = &quot;company&quot;)\n    private List&lt;User&gt; users;\n\n}\n</code></pre>\n<p>My question is, how i should deal with this? If i put private transient Company my application won't start , i get errors : mappedBy reference an unknown target entity property. How can i deal with it?</p>\n"},{"tags":["java","coding-style","domain-driven-design"],"comments":[{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":4,"creation_date":1660744607,"post_id":73389660,"comment_id":129605156,"body_markdown":"This feels like a classic case of you serving the architecture, instead of the architecture serving you.","body":"This feels like a classic case of you serving the architecture, instead of the architecture serving you."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1660745016,"post_id":73389660,"comment_id":129605321,"body_markdown":"Minor quibble: Your `of` method is a static *factory* method, not a *constructor*.","body":"Minor quibble: Your <code>of</code> method is a static <i>factory</i> method, not a <i>constructor</i>."},{"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"score":0,"creation_date":1660745171,"post_id":73389660,"comment_id":129605386,"body_markdown":"@RobertHarvey what do you mean?","body":"@RobertHarvey what do you mean?"},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":1,"creation_date":1660746699,"post_id":73389660,"comment_id":129606035,"body_markdown":"As a simple example of what I mean: if you need DTO&#39;s, but there&#39;s some rule in your architecture that forbids you from using them, then your architecture is not serving you well. Your focus as a software developer should be on meeting customer requirements, not slavishly following some architecture&#39;s rules.","body":"As a simple example of what I mean: if you need DTO&#39;s, but there&#39;s some rule in your architecture that forbids you from using them, then your architecture is not serving you well. Your focus as a software developer should be on meeting customer requirements, not slavishly following some architecture&#39;s rules."},{"owner":{"account_id":5272138,"reputation":2107,"user_id":4210091,"display_name":"Renato"},"score":0,"creation_date":1660748939,"post_id":73389660,"comment_id":129607042,"body_markdown":"what does ClassisParams contain?","body":"what does ClassisParams contain?"},{"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"score":0,"creation_date":1660748940,"post_id":73389660,"comment_id":129607043,"body_markdown":"@RobertHarvey I don&#39;t want to follow the architecture rules blindly, that&#39;s why I started this topic to understand this problem properly. It&#39;s a common case that a domain object with many (&gt;3) fields needs to be created. And I&#39;d like to know how to handle such case to keep the code clean and not to mix everything with everything. And the &quot;DTO is not part of the domain&quot; rule also must have come for some reason. I&#39;d like to understand, when this rule applies, when it doesn&#39;t apply etc. &quot;Don&#39;t be a slave of your architecture&quot; doesn&#39;t really clarify anything.","body":"@RobertHarvey I don&#39;t want to follow the architecture rules blindly, that&#39;s why I started this topic to understand this problem properly. It&#39;s a common case that a domain object with many (&gt;3) fields needs to be created. And I&#39;d like to know how to handle such case to keep the code clean and not to mix everything with everything. And the &quot;DTO is not part of the domain&quot; rule also must have come for some reason. I&#39;d like to understand, when this rule applies, when it doesn&#39;t apply etc. &quot;Don&#39;t be a slave of your architecture&quot; doesn&#39;t really clarify anything."},{"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"score":0,"creation_date":1660749078,"post_id":73389660,"comment_id":129607111,"body_markdown":"@Renato it contains a couple of fields: classesLocation, classesType.","body":"@Renato it contains a couple of fields: classesLocation, classesType."},{"owner":{"account_id":5272138,"reputation":2107,"user_id":4210091,"display_name":"Renato"},"score":0,"creation_date":1660749131,"post_id":73389660,"comment_id":129607137,"body_markdown":"However, I think you can use the status in a different manner: for example if you had methods like `create` and `delete`, you would avoid to pass the status from outside and set it to `created` and `deleted` directly  inside the methods. What do you think about?","body":"However, I think you can use the status in a different manner: for example if you had methods like <code>create</code> and <code>delete</code>, you would avoid to pass the status from outside and set it to <code>created</code> and <code>deleted</code> directly  inside the methods. What do you think about?"},{"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"score":0,"creation_date":1660749630,"post_id":73389660,"comment_id":129607367,"body_markdown":"The status is ACTIVE/INACTIVE enum, I can create an active or inactive Enrollment. That&#39;s not the point, there might be another field in Enrollment like ScheduleParams or anything that&#39;s some data to be set during Enrollment creation.","body":"The status is ACTIVE/INACTIVE enum, I can create an active or inactive Enrollment. That&#39;s not the point, there might be another field in Enrollment like ScheduleParams or anything that&#39;s some data to be set during Enrollment creation."},{"owner":{"account_id":5272138,"reputation":2107,"user_id":4210091,"display_name":"Renato"},"score":0,"creation_date":1660749923,"post_id":73389660,"comment_id":129607519,"body_markdown":"I think that&#39;s the point instead. I&#39;m talking about responsability: if you have a class that actually does nothing but create an object with all parameters decided outside of it, probabily that class is not well designed ... but that&#39;s just my two cents!","body":"I think that&#39;s the point instead. I&#39;m talking about responsability: if you have a class that actually does nothing but create an object with all parameters decided outside of it, probabily that class is not well designed ... but that&#39;s just my two cents!"},{"owner":{"account_id":5272138,"reputation":2107,"user_id":4210091,"display_name":"Renato"},"score":0,"creation_date":1660750590,"post_id":73389660,"comment_id":129607812,"body_markdown":"And at last: I think that this is the meaning of the rule you mentioned, not just an arbitrary limit to the number of parameters: why 3 and not 4?, but a direction, an alarm bell: &quot;if this class needs too many information, probabily I missed something at design level&quot;","body":"And at last: I think that this is the meaning of the rule you mentioned, not just an arbitrary limit to the number of parameters: why 3 and not 4?, but a direction, an alarm bell: &quot;if this class needs too many information, probabily I missed something at design level&quot;"},{"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"score":0,"creation_date":1660752375,"post_id":73389660,"comment_id":129608465,"body_markdown":"1. I never said the class &quot;does nothing but create an object&quot;, I just included the part of the code that I&#39;m concerned about. I also might have methods to activate/deactivate or any other method inside the Enrollment that&#39;s doing some business logic.\n2. What&#39;s the problem wih class that its fields are created outside of it? It&#39;s like creating an `OrderEntry` object with `product` field - usually you don&#39;t construct the `Product` object inside `OrderEntry`, you get it from outside and just set as part of entry. Is this also wrong?","body":"1. I never said the class &quot;does nothing but create an object&quot;, I just included the part of the code that I&#39;m concerned about. I also might have methods to activate/deactivate or any other method inside the Enrollment that&#39;s doing some business logic. 2. What&#39;s the problem wih class that its fields are created outside of it? It&#39;s like creating an <code>OrderEntry</code> object with <code>product</code> field - usually you don&#39;t construct the <code>Product</code> object inside <code>OrderEntry</code>, you get it from outside and just set as part of entry. Is this also wrong?"},{"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"score":0,"creation_date":1660753369,"post_id":73389660,"comment_id":129608802,"body_markdown":"My point is, don&#39;t get too attached to the example I posted. It might be anything, like `Order` - it usually has lots of fields like order entries, customer, payment method, delivery method etc. And I guess you don&#39;t complain that it needs too much information, you still want to create it with all these fields. My question is, again, how do you handle this to keep it clean in the code?","body":"My point is, don&#39;t get too attached to the example I posted. It might be anything, like <code>Order</code> - it usually has lots of fields like order entries, customer, payment method, delivery method etc. And I guess you don&#39;t complain that it needs too much information, you still want to create it with all these fields. My question is, again, how do you handle this to keep it clean in the code?"},{"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"score":0,"creation_date":1660757929,"post_id":73389660,"comment_id":129610425,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/247344/discussion-between-xkrasusx-and-renato).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/247344/discussion-between-xkrasusx-and-renato\">continue this discussion in chat</a>."}],"answers":[{"tags":[],"owner":{"account_id":22259,"reputation":53853,"user_id":54734,"accept_rate":29,"display_name":"VoiceOfUnreason"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660759327,"creation_date":1660759327,"answer_id":73393050,"question_id":73389660,"body_markdown":"&gt; So the question is, how can I keep it both clean and DDD-style?\r\n\r\n - Create your domain interfaces in a way that conforms to the clean style\r\n \r\n - Including value objects with fluent interfaces that make clear to the programmer the semantics of the information that is being passed to the domain model.  (In other words, having representations of _documents_, like an enrollment form, in your domain model is _normal_).\r\n\r\n - expect that you&#39;ll need to have a [parser][1] that copies information from the representations of the presentation layer to the representations of the domain model.  _Sometimes_ you will be able to leverage general purpose code that copies information from one information to another (like web server libraries that translate application/x-www-form-urlencoded byte sequences into sequences of key value pairs, or takes an application/json byte sequence and initializes your value object), but you should recognize that as a [happy accident][2] that may not hold for the life of the project.\r\n\r\n\r\nDon&#39;t sweat the argument _count_ constraint too much - [Robert Martin&#39;s 2009 essay][3] doesn&#39;t support his conclusion very well.  \r\n\r\nInstead, pay attention to the communication of argument semantics, and the fact that the arguments (a) have different lifespans and (b) those lifespans tend to &quot;clump&quot; into groups that are candidates for re-use.\r\n\r\n  [1]: https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/\r\n  [2]: https://einarwh.wordpress.com/2020/05/08/on-the-complexity-of-json-serialization/\r\n  [3]: https://www.informit.com/articles/article.aspx?p=1375308","title":"DDD vs Clean Code - function parameter number","body":"<blockquote>\n<p>So the question is, how can I keep it both clean and DDD-style?</p>\n</blockquote>\n<ul>\n<li><p>Create your domain interfaces in a way that conforms to the clean style</p>\n</li>\n<li><p>Including value objects with fluent interfaces that make clear to the programmer the semantics of the information that is being passed to the domain model.  (In other words, having representations of <em>documents</em>, like an enrollment form, in your domain model is <em>normal</em>).</p>\n</li>\n<li><p>expect that you'll need to have a <a href=\"https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/\" rel=\"nofollow noreferrer\">parser</a> that copies information from the representations of the presentation layer to the representations of the domain model.  <em>Sometimes</em> you will be able to leverage general purpose code that copies information from one information to another (like web server libraries that translate application/x-www-form-urlencoded byte sequences into sequences of key value pairs, or takes an application/json byte sequence and initializes your value object), but you should recognize that as a <a href=\"https://einarwh.wordpress.com/2020/05/08/on-the-complexity-of-json-serialization/\" rel=\"nofollow noreferrer\">happy accident</a> that may not hold for the life of the project.</p>\n</li>\n</ul>\n<p>Don't sweat the argument <em>count</em> constraint too much - <a href=\"https://www.informit.com/articles/article.aspx?p=1375308\" rel=\"nofollow noreferrer\">Robert Martin's 2009 essay</a> doesn't support his conclusion very well.</p>\n<p>Instead, pay attention to the communication of argument semantics, and the fact that the arguments (a) have different lifespans and (b) those lifespans tend to &quot;clump&quot; into groups that are candidates for re-use.</p>\n"}],"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660759327,"creation_date":1660744173,"question_id":73389660,"body_markdown":"I&#39;m trying to get my coding a little more into DDD aproach. Suppose I have a method, like a static constructor:\r\n\r\n    public class Enrollment {\r\n    \tprivate final User user;\r\n    \tprivate final EnrollmentStatus status;\r\n    \tprivate final ClassesParams classesParams;\r\n    \r\n    \tpublic static Enrollment of(User user, EnrollmentStatus status, ClassesParams classesParams) {\r\n    \t\t// implementation goes here\r\n    \t}\r\n    }\r\n\r\nRobert Martin says in his Clean Code book, that the less parameters function has the better, and 3 should be used in some exceptional cases. And I think it&#39;s perfectly reasonable in the above case to have just 1 parameter, because all these arguments are actually parts of some input data to create new `Enrollment`:\r\n\r\n    public static Enrollment of(NewEnrollmentRequest request) { // NewEnrollmentRequest would contain user, status and classesParams\r\n    \t// implementation goes here\r\n    }\r\n\r\nThe problem now is that `NewEnrollmentRequest` would be in fact some form of DTO, which is not part of the domain. And I guess I&#39;m not supposed to put `NewEnrollmentRequest` outside the domain, because domain shouldn&#39;t depend on outside layers.\r\n\r\nSo the question is, how can I keep it both clean and DDD-style? Is it fine to have the constructor with all the fields - but what if I have not 3 but 6-7 fields? Or maybe the request class is part of the domain in this case? I feel there is some sort of tradeoff here, but I can&#39;t find it, or I&#39;m just tackling the problem wrongly.","title":"DDD vs Clean Code - function parameter number","body":"<p>I'm trying to get my coding a little more into DDD aproach. Suppose I have a method, like a static constructor:</p>\n<pre><code>public class Enrollment {\n    private final User user;\n    private final EnrollmentStatus status;\n    private final ClassesParams classesParams;\n\n    public static Enrollment of(User user, EnrollmentStatus status, ClassesParams classesParams) {\n        // implementation goes here\n    }\n}\n</code></pre>\n<p>Robert Martin says in his Clean Code book, that the less parameters function has the better, and 3 should be used in some exceptional cases. And I think it's perfectly reasonable in the above case to have just 1 parameter, because all these arguments are actually parts of some input data to create new <code>Enrollment</code>:</p>\n<pre><code>public static Enrollment of(NewEnrollmentRequest request) { // NewEnrollmentRequest would contain user, status and classesParams\n    // implementation goes here\n}\n</code></pre>\n<p>The problem now is that <code>NewEnrollmentRequest</code> would be in fact some form of DTO, which is not part of the domain. And I guess I'm not supposed to put <code>NewEnrollmentRequest</code> outside the domain, because domain shouldn't depend on outside layers.</p>\n<p>So the question is, how can I keep it both clean and DDD-style? Is it fine to have the constructor with all the fields - but what if I have not 3 but 6-7 fields? Or maybe the request class is part of the domain in this case? I feel there is some sort of tradeoff here, but I can't find it, or I'm just tackling the problem wrongly.</p>\n"},{"tags":["java","linux","ubuntu","gradle","shadowjar"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1660754365,"post_id":73391552,"comment_id":129609222,"body_markdown":"Instead of building a mega-jar, produce a traditional installer/archive and rsync that (or its unpacked content) over to the server. Maybe even just rsync-ing the mega-jar would help. Doing any of that manually is a recipe for breaking when you forget to change any of the dependencies.","body":"Instead of building a mega-jar, produce a traditional installer/archive and rsync that (or its unpacked content) over to the server. Maybe even just rsync-ing the mega-jar would help. Doing any of that manually is a recipe for breaking when you forget to change any of the dependencies."},{"owner":{"account_id":17022175,"reputation":126,"user_id":12314426,"display_name":"LetsdothisEpic"},"score":0,"creation_date":1660758320,"post_id":73391552,"comment_id":129610549,"body_markdown":"@JoachimSauer I&#39;m not sure exactly how to do that, I&#39;m relatively new to Gradle. How do I go about producing a traditional archive?","body":"@JoachimSauer I&#39;m not sure exactly how to do that, I&#39;m relatively new to Gradle. How do I go about producing a traditional archive?"}],"answers":[{"tags":[],"owner":{"account_id":16000784,"reputation":301,"user_id":11547512,"display_name":"Anthony Cathers"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660759022,"creation_date":1660755748,"answer_id":73392380,"question_id":73391552,"body_markdown":"Using gradle we can accomplish this with the jar task \r\n\r\n    jar {\r\n      manifest {\r\n        attributes &#39;Main-Class&#39;: &#39;org.example.Main&#39;\r\n        attributes &#39;Class-Path&#39;: configurations.default.files.collect{&#39;lib/&#39; + it.name}.join(&#39; &#39;)\r\n      }\r\n    }\r\n\r\nYou can add all of the jars you require to the class path (can use groovy dsl to help here if there are lot). Now on the machine you&#39;re deploying to you would have a folder lib relative to your jar with your dependencies.","title":"How can I run my Gradle application on a separate machine without having to use a shadowJar?","body":"<p>Using gradle we can accomplish this with the jar task</p>\n<pre><code>jar {\n  manifest {\n    attributes 'Main-Class': 'org.example.Main'\n    attributes 'Class-Path': configurations.default.files.collect{'lib/' + it.name}.join(' ')\n  }\n}\n</code></pre>\n<p>You can add all of the jars you require to the class path (can use groovy dsl to help here if there are lot). Now on the machine you're deploying to you would have a folder lib relative to your jar with your dependencies.</p>\n"}],"owner":{"account_id":17022175,"reputation":126,"user_id":12314426,"display_name":"LetsdothisEpic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73392380,"answer_count":1,"score":1,"last_activity_date":1660759022,"creation_date":1660751930,"question_id":73391552,"body_markdown":"I have a Gradle project with a good few dependencies, and a fresh server Ubuntu distro. As of now, I&#39;m using Shadow to build a shadowJar, and a deploy this to the server, as dependencies are built in. However, with all of the dependencies the file gets to be rather large, and it&#39;s becoming very inconvenient to deploy a huge jar file, when 98% of it doesn&#39;t change from build to build. How can I add the dependencies to the server so that I can only send over the normal, much smaller jar file? \r\n\r\nAs of now when I run the smaller jar file, I get a MySQL warning, and I&#39;m assuming this means that the dependencies are not installed, as connecting to MySQL is the first thing I do in the Main method. Thank you!","title":"How can I run my Gradle application on a separate machine without having to use a shadowJar?","body":"<p>I have a Gradle project with a good few dependencies, and a fresh server Ubuntu distro. As of now, I'm using Shadow to build a shadowJar, and a deploy this to the server, as dependencies are built in. However, with all of the dependencies the file gets to be rather large, and it's becoming very inconvenient to deploy a huge jar file, when 98% of it doesn't change from build to build. How can I add the dependencies to the server so that I can only send over the normal, much smaller jar file?</p>\n<p>As of now when I run the smaller jar file, I get a MySQL warning, and I'm assuming this means that the dependencies are not installed, as connecting to MySQL is the first thing I do in the Main method. Thank you!</p>\n"},{"tags":["java","spring","forms","jsp"],"owner":{"account_id":25603091,"reputation":11,"user_id":19377706,"display_name":"Kacper Korab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660758801,"creation_date":1660758801,"question_id":73392941,"body_markdown":"I have a chain of java classes related to each other, due to my goal of producing an xml file. I need to assign values to attributes of those classes via webapp.\r\nWhen trying to create a jsp form I have encountered a &quot;java.util.ConcurrentModificationException&quot; and I&#39;m at a loss about how to deal with it.\r\n\r\nHere is the relevant jsp file, which crashes before reaching `&lt;c:out value=&quot;after table end&quot; /&gt;`\r\n\r\n    &lt;%@ taglib prefix=&quot;form&quot;\r\n               uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;\r\n    &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;Ship&lt;/title&gt;\r\n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;/&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;p&gt;&lt;a href=&quot;/&quot;&gt;Back to index&lt;/a&gt;&lt;/p&gt;\r\n    &lt;h1&gt;New Sprinter class hull&lt;/h1&gt;\r\n    &lt;%--@elvariable id=&quot;ship&quot; type=&quot;java&quot;--%&gt;\r\n    &lt;h2&gt;Input new ship name&lt;/h2&gt;\r\n    &lt;form:form method=&quot;post&quot; modelAttribute=&quot;ship&quot;&gt;\r\n        &lt;form:input type=&quot;text&quot; path=&quot;name&quot; /&gt;\r\n        &lt;h2&gt;Select components&lt;/h2&gt;\r\n        &lt;table&gt;\r\n            &lt;c:forEach items=&quot;${ship.sockets}&quot; var=&quot;socket&quot; varStatus=&quot;status&quot;&gt;\r\n                &lt;tr&gt;\r\n                    &lt;td&gt;\r\n                        &lt;c:out value=&quot;${socket.socketName}&quot; /&gt;\r\n                    &lt;/td&gt;\r\n                    &lt;td&gt;\r\n                        &lt;c:out value=&quot;${socket.hullSocketType}&quot; /&gt;\r\n                    &lt;/td&gt;\r\n                    &lt;td&gt;\r\n                        &lt;jsp:useBean id=&quot;allComponents&quot; scope=&quot;request&quot; type=&quot;java.util.List&quot;/&gt;\r\n                        &lt;form:select  path=&quot;sockets[${status.count}].component&quot;&gt;\r\n                            &lt;form:options items=&quot;${allComponents}&quot; itemLabel=&quot;componentName&quot;/&gt;\r\n                        &lt;/form:select&gt;\r\n                    &lt;/td&gt;\r\n                &lt;/tr&gt;\r\n            &lt;/c:forEach&gt;\r\n        &lt;/table&gt;\r\n        &lt;c:out value=&quot;after table end&quot; /&gt;\r\n        &lt;input type=&quot;submit&quot; value=&quot;Save&quot;&gt;\r\n    &lt;/form:form&gt;\r\n    &lt;p&gt;Fleet name: ${fleet.name}&lt;/p&gt;\r\n    &lt;table&gt;\r\n        &lt;c:forEach items=&quot;${fleet.ships}&quot; var=&quot;ship&quot;&gt;\r\n            &lt;tr&gt;\r\n                &lt;td&gt;&lt;c:out value=&quot;${ship}&quot; /&gt;&lt;/td&gt;\r\n            &lt;/tr&gt;\r\n        &lt;/c:forEach&gt;\r\n    &lt;/table&gt;\r\n    &lt;/body&gt;\r\n\r\nAnd here are my to controllers for this form:\r\n\r\n    //Add Ship\r\n    @GetMapping(&quot;/addSprinter&quot;)\r\n    public String shipyardAddShipForm(Model model) {\r\n        Ship ship = new Ship();\r\n        fillShip(ship, &quot;Stock/Sprinter Corvette&quot;);\r\n        model.addAttribute(&quot;ship&quot;, ship);\r\n        model.addAttribute(&quot;allComponents&quot;, allComponents);\r\n        model.addAttribute(&quot;fleet&quot;, fleet);\r\n        return &quot;addSprinter&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/addSprinter&quot;)\r\n    public String shipyardAddShipSubmit(Ship ship, Model model) {\r\n        fillShip(ship, &quot;Stock/Sprinter Corvette&quot;);\r\n        model.addAttribute(&quot;ship&quot;, ship);\r\n        model.addAttribute(&quot;allComponents&quot;, allComponents);\r\n        model.addAttribute(&quot;fleet&quot;, fleet);\r\n        fleet.getShips().add(ship);\r\n        return &quot;addSprinter&quot;;\r\n    }\r\n\r\nShip and Component are connected via a HullSocket list.\r\n\r\n    public class Ship    \r\n    private List&lt;HullSocket&gt; sockets\r\n \r\n    public class HullSocket\r\n    private Component component;\r\n\r\nI want to eventually end up with a Ship, having a list of HullSockets which can have a Component connected to them.\r\n\r\nThose classes have other values so I don&#39;t think I can simplify them.\r\n\r\nHere is the relevant error message:\r\n\r\n    2022-08-17 19:31:46.401 ERROR 55748 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [java.util.ConcurrentModificationException] with root cause\r\n    \r\n    java.util.ConcurrentModificationException: null\r\n    \tat java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013) ~[na:na]\r\n    \tat java.base/java.util.ArrayList$Itr.next(ArrayList.java:967) ~[na:na]\r\n    \tat org.apache.taglibs.standard.tag.common.core.ForEachSupport$SimpleForEachIterator.next(ForEachSupport.java:119) ~[jstl-1.2.jar:1.2]\r\n    \tat org.apache.taglibs.standard.tag.common.core.ForEachSupport.next(ForEachSupport.java:141) ~[jstl-1.2.jar:1.2]\r\n    \tat javax.servlet.jsp.jstl.core.LoopTagSupport.doAfterBody(LoopTagSupport.java:295) ~[jstl-1.2.jar:1.2]\r\n    \tat org.apache.jsp.WEB_002dINF.views.addSprinter_jsp._jspx_meth_c_005fforEach_005f0(addSprinter_jsp.java:339) ~[na:na]\r\n    \tat org.apache.jsp.WEB_002dINF.views.addSprinter_jsp._jspx_meth_form_005fform_005f0(addSprinter_jsp.java:219) ~[na:na]\r\n    \tat org.apache.jsp.WEB_002dINF.views.addSprinter_jsp._jspService(addSprinter_jsp.java:157) ~[na:na]\r\n    \tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) ~[tomcat-embed-jasper-9.0.65.jar:9.0.65]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n    \tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:466) ~[tomcat-embed-jasper-9.0.65.jar:9.0.65]\r\n    \tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:379) ~[tomcat-embed-jasper-9.0.65.jar:9.0.65]\r\n    \tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:327) ~[tomcat-embed-jasper-9.0.65.jar:9.0.65]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) ~[spring-web-5.3.22.jar:5.3.22]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) ~[spring-web-5.3.22.jar:5.3.22]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) ~[spring-web-5.3.22.jar:5.3.22]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:385) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:171) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:316) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1404) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1148) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1087) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    \r\n    2022-08-17 19:31:46.412 ERROR 55748 --- [nio-8080-exec-3] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [/addSprinter] and exception [No message available] as the response has already been committed. As a result, the response may have the wrong status code.\r\n","title":"ConcurrentModificationException on a jsp form with multiple model attributes. (Spring)","body":"<p>I have a chain of java classes related to each other, due to my goal of producing an xml file. I need to assign values to attributes of those classes via webapp.\nWhen trying to create a jsp form I have encountered a &quot;java.util.ConcurrentModificationException&quot; and I'm at a loss about how to deal with it.</p>\n<p>Here is the relevant jsp file, which crashes before reaching <code>&lt;c:out value=&quot;after table end&quot; /&gt;</code></p>\n<pre><code>&lt;%@ taglib prefix=&quot;form&quot;\n           uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;\n&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;head&gt;\n    &lt;title&gt;Ship&lt;/title&gt;\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;/&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;p&gt;&lt;a href=&quot;/&quot;&gt;Back to index&lt;/a&gt;&lt;/p&gt;\n&lt;h1&gt;New Sprinter class hull&lt;/h1&gt;\n&lt;%--@elvariable id=&quot;ship&quot; type=&quot;java&quot;--%&gt;\n&lt;h2&gt;Input new ship name&lt;/h2&gt;\n&lt;form:form method=&quot;post&quot; modelAttribute=&quot;ship&quot;&gt;\n    &lt;form:input type=&quot;text&quot; path=&quot;name&quot; /&gt;\n    &lt;h2&gt;Select components&lt;/h2&gt;\n    &lt;table&gt;\n        &lt;c:forEach items=&quot;${ship.sockets}&quot; var=&quot;socket&quot; varStatus=&quot;status&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;c:out value=&quot;${socket.socketName}&quot; /&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;c:out value=&quot;${socket.hullSocketType}&quot; /&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;jsp:useBean id=&quot;allComponents&quot; scope=&quot;request&quot; type=&quot;java.util.List&quot;/&gt;\n                    &lt;form:select  path=&quot;sockets[${status.count}].component&quot;&gt;\n                        &lt;form:options items=&quot;${allComponents}&quot; itemLabel=&quot;componentName&quot;/&gt;\n                    &lt;/form:select&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/c:forEach&gt;\n    &lt;/table&gt;\n    &lt;c:out value=&quot;after table end&quot; /&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Save&quot;&gt;\n&lt;/form:form&gt;\n&lt;p&gt;Fleet name: ${fleet.name}&lt;/p&gt;\n&lt;table&gt;\n    &lt;c:forEach items=&quot;${fleet.ships}&quot; var=&quot;ship&quot;&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;c:out value=&quot;${ship}&quot; /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/c:forEach&gt;\n&lt;/table&gt;\n&lt;/body&gt;\n</code></pre>\n<p>And here are my to controllers for this form:</p>\n<pre><code>//Add Ship\n@GetMapping(&quot;/addSprinter&quot;)\npublic String shipyardAddShipForm(Model model) {\n    Ship ship = new Ship();\n    fillShip(ship, &quot;Stock/Sprinter Corvette&quot;);\n    model.addAttribute(&quot;ship&quot;, ship);\n    model.addAttribute(&quot;allComponents&quot;, allComponents);\n    model.addAttribute(&quot;fleet&quot;, fleet);\n    return &quot;addSprinter&quot;;\n}\n\n@PostMapping(&quot;/addSprinter&quot;)\npublic String shipyardAddShipSubmit(Ship ship, Model model) {\n    fillShip(ship, &quot;Stock/Sprinter Corvette&quot;);\n    model.addAttribute(&quot;ship&quot;, ship);\n    model.addAttribute(&quot;allComponents&quot;, allComponents);\n    model.addAttribute(&quot;fleet&quot;, fleet);\n    fleet.getShips().add(ship);\n    return &quot;addSprinter&quot;;\n}\n</code></pre>\n<p>Ship and Component are connected via a HullSocket list.</p>\n<pre><code>public class Ship    \nprivate List&lt;HullSocket&gt; sockets\n\npublic class HullSocket\nprivate Component component;\n</code></pre>\n<p>I want to eventually end up with a Ship, having a list of HullSockets which can have a Component connected to them.</p>\n<p>Those classes have other values so I don't think I can simplify them.</p>\n<p>Here is the relevant error message:</p>\n<pre><code>2022-08-17 19:31:46.401 ERROR 55748 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [java.util.ConcurrentModificationException] with root cause\n\njava.util.ConcurrentModificationException: null\n    at java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013) ~[na:na]\n    at java.base/java.util.ArrayList$Itr.next(ArrayList.java:967) ~[na:na]\n    at org.apache.taglibs.standard.tag.common.core.ForEachSupport$SimpleForEachIterator.next(ForEachSupport.java:119) ~[jstl-1.2.jar:1.2]\n    at org.apache.taglibs.standard.tag.common.core.ForEachSupport.next(ForEachSupport.java:141) ~[jstl-1.2.jar:1.2]\n    at javax.servlet.jsp.jstl.core.LoopTagSupport.doAfterBody(LoopTagSupport.java:295) ~[jstl-1.2.jar:1.2]\n    at org.apache.jsp.WEB_002dINF.views.addSprinter_jsp._jspx_meth_c_005fforEach_005f0(addSprinter_jsp.java:339) ~[na:na]\n    at org.apache.jsp.WEB_002dINF.views.addSprinter_jsp._jspx_meth_form_005fform_005f0(addSprinter_jsp.java:219) ~[na:na]\n    at org.apache.jsp.WEB_002dINF.views.addSprinter_jsp._jspService(addSprinter_jsp.java:157) ~[na:na]\n    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) ~[tomcat-embed-jasper-9.0.65.jar:9.0.65]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:466) ~[tomcat-embed-jasper-9.0.65.jar:9.0.65]\n    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:379) ~[tomcat-embed-jasper-9.0.65.jar:9.0.65]\n    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:327) ~[tomcat-embed-jasper-9.0.65.jar:9.0.65]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:385) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:171) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:316) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1404) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1148) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1087) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2022-08-17 19:31:46.412 ERROR 55748 --- [nio-8080-exec-3] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [/addSprinter] and exception [No message available] as the response has already been committed. As a result, the response may have the wrong status code.\n</code></pre>\n"},{"tags":["java","validation","hl7-fhir","hapi-fhir"],"answers":[{"tags":[],"owner":{"account_id":2766933,"reputation":6533,"user_id":2382420,"display_name":"Lloyd McKenzie"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660758513,"creation_date":1660758513,"answer_id":73392881,"question_id":73389403,"body_markdown":"This constraint: &quot;no-icd.exists().not() or (icd-10-who.exists() or icd-10-gm.exists() or icd-9.exists()).not()&quot; is broken.\r\n\r\nThere are not (and cannot be) any elements in the resource with the names &quot;no-icd&quot; or &quot;icd-10-who&quot;, etc.  Constraints can&#39;t be tied to slice names, only to actual data within the instance.  You&#39;d have to say something like:\r\n\r\ncode.coding.where(system=&quot;123&quot; and version=&quot;456&quot;).exists()\r\n\r\n\r\nAlso, in looking at your profile, I don&#39;t see fixed values being declared for system or version, which are your discriminators.  (Discriminating by $this for a type of Coding also doesn&#39;t make sense.)","title":"Validation of ICD10-GM codes fails for specimen diagnosis","body":"<p>This constraint: &quot;no-icd.exists().not() or (icd-10-who.exists() or icd-10-gm.exists() or icd-9.exists()).not()&quot; is broken.</p>\n<p>There are not (and cannot be) any elements in the resource with the names &quot;no-icd&quot; or &quot;icd-10-who&quot;, etc.  Constraints can't be tied to slice names, only to actual data within the instance.  You'd have to say something like:</p>\n<p>code.coding.where(system=&quot;123&quot; and version=&quot;456&quot;).exists()</p>\n<p>Also, in looking at your profile, I don't see fixed values being declared for system or version, which are your discriminators.  (Discriminating by $this for a type of Coding also doesn't make sense.)</p>\n"}],"owner":{"account_id":20618594,"reputation":16,"user_id":15136105,"display_name":"Lena"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660758513,"creation_date":1660743119,"question_id":73389403,"body_markdown":"I get these error message when I&#39;m trying to validate ICD10 (german version) codes in the specimen profile. I use the HAPI FHIR library for validation and validate angainst the bbmri.de implementation guide [specimen profile](&lt;https://simplifier.net/BBMRI.de/Specimen/~overview&gt;).\r\n\r\n``` Bundle.entry[6].resource.ofType(Specimen).extension[2].value.ofType(CodeableConcept).coding[0] Validation failed for &#39;http://fhir.de/CodeSystem/dimdi/icd-10-gm#C34.9&#39;\r\nBundle.entry[6].resource.ofType(Specimen).extension[2].value.ofType(CodeableConcept).coding[0] slicing-1: &#39;When slice no-icd is present, the other slices must not be present&#39; Rule &#39;When slice no-icd is present, the other slices must not be present&#39; Failed\r\nBundle.entry[7].resource.ofType(Specimen).extension[2].value.ofType(CodeableConcept).coding[0] Validation failed for &#39;http://fhir.de/CodeSystem/dimdi/icd-10-gm#C34.9&#39;\r\nBundle.entry[7].resource.ofType(Specimen).extension[2].value.ofType(CodeableConcept).coding[0] slicing-1: &#39;When slice no-icd is present, the other slices must not be present&#39; Rule &#39;When slice no-icd is present, the other slices must not be present&#39; Failed\r\nBundle.entry[9].resource.ofType(Specimen).extension[2].value.ofType(CodeableConcept).coding[0] Validation failed for &#39;http://fhir.de/CodeSystem/dimdi/icd-10-gm#C78.0&#39;\r\n```\r\n\r\nHere is one specimen resource from the json file I am trying to validate:\r\n```\r\n&quot;resource&quot;: {\r\n        &quot;resourceType&quot;: &quot;Specimen&quot;,\r\n        &quot;id&quot;: &quot;pat0-specimen0&quot;,\r\n        &quot;meta&quot;: {\r\n          &quot;profile&quot;: [\r\n            &quot;https://fhir.bbmri.de/StructureDefinition/Specimen&quot;\r\n          ]\r\n        },\r\n        &quot;extension&quot;: [\r\n          {\r\n            &quot;url&quot;: &quot;https://fhir.bbmri.de/StructureDefinition/Custodian&quot;,\r\n            &quot;valueReference&quot;: {\r\n              &quot;reference&quot;: &quot;Organization/Tumor&quot;\r\n            }\r\n          },\r\n          {\r\n            &quot;url&quot;: &quot;https://fhir.bbmri.de/StructureDefinition/StorageTemperature&quot;,\r\n            &quot;valueCodeableConcept&quot;: {\r\n              &quot;coding&quot;: [\r\n                {\r\n                  &quot;system&quot;: &quot;https://fhir.bbmri.de/CodeSystem/StorageTemperature&quot;,\r\n                  &quot;code&quot;: &quot;temperatureLN&quot;,\r\n                  &quot;display&quot;: &quot;Liquid nitrogen&quot;\r\n                }\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            &quot;url&quot;: &quot;https://fhir.bbmri.de/StructureDefinition/SampleDiagnosis&quot;,\r\n            &quot;valueCodeableConcept&quot;: {\r\n              &quot;coding&quot;: [\r\n                {\r\n                  &quot;system&quot;: &quot;http://fhir.de/CodeSystem/dimdi/icd-10-gm&quot;,\r\n                  &quot;code&quot;: &quot;C50&quot;,\r\n                  &quot;display&quot;: &quot;B&#246;sartige Neubildung der Brustdr&#252;se [Mamma]&quot;\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ],\r\n        &quot;status&quot;: &quot;available&quot;,\r\n        &quot;type&quot;: {\r\n          &quot;coding&quot;: [\r\n            {\r\n              &quot;system&quot;: &quot;https://fhir.bbmri.de/CodeSystem/SampleMaterialType&quot;,\r\n              &quot;code&quot;: &quot;tissue-ffpe&quot;,\r\n              &quot;display&quot;: &quot;Tissue FFPE&quot;\r\n            }\r\n          ]\r\n        },\r\n        &quot;subject&quot;: {\r\n          &quot;reference&quot;: &quot;Patient/pat0&quot;\r\n        },\r\n        &quot;collection&quot;: {\r\n          &quot;collectedDateTime&quot;: &quot;2021-11-19T13:44:13+01:00&quot;,\r\n          &quot;fastingStatusCodeableConcept&quot;: {\r\n            &quot;coding&quot;: [\r\n              {\r\n                &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/v2-0916&quot;,\r\n                &quot;code&quot;: &quot;NG&quot;,\r\n                &quot;display&quot;: &quot;Not Given - Patient was not asked at the time of the procedure.&quot;\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      }\r\n}\r\n```\r\n\r\nCan someone tell me if I am doing something wrong or is it a problem with the profile definition? The other ressources of the bbmri IG are working fine.","title":"Validation of ICD10-GM codes fails for specimen diagnosis","body":"<p>I get these error message when I'm trying to validate ICD10 (german version) codes in the specimen profile. I use the HAPI FHIR library for validation and validate angainst the bbmri.de implementation guide <a href=\"https://simplifier.net/BBMRI.de/Specimen/%7Eoverview\" rel=\"nofollow noreferrer\">specimen profile</a>.</p>\n<pre><code>Bundle.entry[6].resource.ofType(Specimen).extension[2].value.ofType(CodeableConcept).coding[0] slicing-1: 'When slice no-icd is present, the other slices must not be present' Rule 'When slice no-icd is present, the other slices must not be present' Failed\nBundle.entry[7].resource.ofType(Specimen).extension[2].value.ofType(CodeableConcept).coding[0] Validation failed for 'http://fhir.de/CodeSystem/dimdi/icd-10-gm#C34.9'\nBundle.entry[7].resource.ofType(Specimen).extension[2].value.ofType(CodeableConcept).coding[0] slicing-1: 'When slice no-icd is present, the other slices must not be present' Rule 'When slice no-icd is present, the other slices must not be present' Failed\nBundle.entry[9].resource.ofType(Specimen).extension[2].value.ofType(CodeableConcept).coding[0] Validation failed for 'http://fhir.de/CodeSystem/dimdi/icd-10-gm#C78.0'\n</code></pre>\n<p>Here is one specimen resource from the json file I am trying to validate:</p>\n<pre><code>&quot;resource&quot;: {\n        &quot;resourceType&quot;: &quot;Specimen&quot;,\n        &quot;id&quot;: &quot;pat0-specimen0&quot;,\n        &quot;meta&quot;: {\n          &quot;profile&quot;: [\n            &quot;https://fhir.bbmri.de/StructureDefinition/Specimen&quot;\n          ]\n        },\n        &quot;extension&quot;: [\n          {\n            &quot;url&quot;: &quot;https://fhir.bbmri.de/StructureDefinition/Custodian&quot;,\n            &quot;valueReference&quot;: {\n              &quot;reference&quot;: &quot;Organization/Tumor&quot;\n            }\n          },\n          {\n            &quot;url&quot;: &quot;https://fhir.bbmri.de/StructureDefinition/StorageTemperature&quot;,\n            &quot;valueCodeableConcept&quot;: {\n              &quot;coding&quot;: [\n                {\n                  &quot;system&quot;: &quot;https://fhir.bbmri.de/CodeSystem/StorageTemperature&quot;,\n                  &quot;code&quot;: &quot;temperatureLN&quot;,\n                  &quot;display&quot;: &quot;Liquid nitrogen&quot;\n                }\n              ]\n            }\n          },\n          {\n            &quot;url&quot;: &quot;https://fhir.bbmri.de/StructureDefinition/SampleDiagnosis&quot;,\n            &quot;valueCodeableConcept&quot;: {\n              &quot;coding&quot;: [\n                {\n                  &quot;system&quot;: &quot;http://fhir.de/CodeSystem/dimdi/icd-10-gm&quot;,\n                  &quot;code&quot;: &quot;C50&quot;,\n                  &quot;display&quot;: &quot;Bsartige Neubildung der Brustdrse [Mamma]&quot;\n                }\n              ]\n            }\n          }\n        ],\n        &quot;status&quot;: &quot;available&quot;,\n        &quot;type&quot;: {\n          &quot;coding&quot;: [\n            {\n              &quot;system&quot;: &quot;https://fhir.bbmri.de/CodeSystem/SampleMaterialType&quot;,\n              &quot;code&quot;: &quot;tissue-ffpe&quot;,\n              &quot;display&quot;: &quot;Tissue FFPE&quot;\n            }\n          ]\n        },\n        &quot;subject&quot;: {\n          &quot;reference&quot;: &quot;Patient/pat0&quot;\n        },\n        &quot;collection&quot;: {\n          &quot;collectedDateTime&quot;: &quot;2021-11-19T13:44:13+01:00&quot;,\n          &quot;fastingStatusCodeableConcept&quot;: {\n            &quot;coding&quot;: [\n              {\n                &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/v2-0916&quot;,\n                &quot;code&quot;: &quot;NG&quot;,\n                &quot;display&quot;: &quot;Not Given - Patient was not asked at the time of the procedure.&quot;\n              }\n            ]\n          }\n        }\n      }\n}\n</code></pre>\n<p>Can someone tell me if I am doing something wrong or is it a problem with the profile definition? The other ressources of the bbmri IG are working fine.</p>\n"},{"tags":["java","loops","java-stream","getvalue"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1660754792,"post_id":73392143,"comment_id":129609365,"body_markdown":"Can you clarify which `&quot;three key&quot;`, where they come from? Please consider [*editing the question*](https://stackoverflow.com/posts/73392143/edit) by explaining what you&#39;re trying to achieve.","body":"Can you clarify which <code>&quot;three key&quot;</code>, where they come from? Please consider <a href=\"https://stackoverflow.com/posts/73392143/edit\"><i>editing the question</i></a> by explaining what you&#39;re trying to achieve."},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1660754952,"post_id":73392143,"comment_id":129609409,"body_markdown":"Remove anything inside the if-block and append only the string from the map there: `numbers = numbers + map.get(charAt);`","body":"Remove anything inside the if-block and append only the string from the map there: <code>numbers = numbers + map.get(charAt);</code>"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1660755318,"post_id":73392143,"comment_id":129609562,"body_markdown":"You have not explained nearly enough for someone to adequately help.  We should not have to look at your code to figure out what you are trying to do.   Please provide more detail.","body":"You have not explained nearly enough for someone to adequately help.  We should not have to look at your code to figure out what you are trying to do.   Please provide more detail."},{"owner":{"account_id":25996340,"reputation":41,"user_id":19707654,"display_name":"Pp1"},"score":0,"creation_date":1660755394,"post_id":73392143,"comment_id":129609587,"body_markdown":"@Mihe thanks!!! it works I knew it was simple :)","body":"@Mihe thanks!!! it works I knew it was simple :)"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1660759898,"post_id":73392143,"comment_id":129611096,"body_markdown":"You tagged your question java-stream. So: `String numbers = letters.chars() .mapToObj(ch -&gt; Character.valueOf((char) ch)) .map(map::get) .filter(Objects::nonNull) .collect(Collectors.joining());`. Gives `556668`.","body":"You tagged your question java-stream. So: <code>String numbers = letters.chars() .mapToObj(ch -&gt; Character.valueOf((char) ch)) .map(map::get) .filter(Objects::nonNull) .collect(Collectors.joining());</code>. Gives <code>556668</code>."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660756392,"creation_date":1660756392,"answer_id":73392482,"question_id":73392143,"body_markdown":"- use a StringBuilder to house the result.\r\n- then simply append the value for the required character.\r\n```\r\nString result = changingLettersOnNumbersAndMap(&quot;KOT&quot;);\r\nSystem.out.println(result);\r\n```\r\nprints\r\n```\r\n556668\r\n\r\n\r\n\r\nstatic public String changingLettersOnNumbersAndMap(String letters) {\r\n   Map&lt;Character, String&gt; map = new HashMap&lt;&gt;();\r\n\r\n   map.put(&#39;A&#39;, &quot;2&quot;);\r\n   map.put(&#39;B&#39;, &quot;22&quot;);\r\n   map.put(&#39;C&#39;, &quot;222&quot;);\r\n   map.put(&#39;D&#39;, &quot;3&quot;);\r\n   map.put(&#39;E&#39;, &quot;33&quot;);\r\n   map.put(&#39;F&#39;, &quot;333&quot;);\r\n   map.put(&#39;G&#39;, &quot;4&quot;);\r\n   map.put(&#39;H&#39;, &quot;44&quot;);\r\n   map.put(&#39;I&#39;, &quot;444&quot;);\r\n   map.put(&#39;J&#39;, &quot;5&quot;);\r\n   map.put(&#39;K&#39;, &quot;55&quot;);\r\n   map.put(&#39;L&#39;, &quot;555&quot;);\r\n   map.put(&#39;M&#39;, &quot;6&quot;);\r\n   map.put(&#39;N&#39;, &quot;66&quot;);\r\n   map.put(&#39;O&#39;, &quot;666&quot;);\r\n   map.put(&#39;P&#39;, &quot;7&quot;);\r\n   map.put(&#39;Q&#39;, &quot;77&quot;);\r\n   map.put(&#39;R&#39;, &quot;777&quot;);\r\n   map.put(&#39;S&#39;, &quot;7777&quot;);\r\n   map.put(&#39;T&#39;, &quot;8&quot;);\r\n   map.put(&#39;U&#39;, &quot;88&quot;);\r\n   map.put(&#39;V&#39;, &quot;888&quot;);\r\n   map.put(&#39;W&#39;, &quot;9&quot;);\r\n   map.put(&#39;X&#39;, &quot;99&quot;);\r\n   map.put(&#39;Y&#39;, &quot;999&quot;);\r\n   map.put(&#39;Z&#39;, &quot;9999&quot;);\r\n\r\n\r\n   StringBuilder numbers = new StringBuilder();\r\n   for (int i = 0; i &lt; letters.length(); i++) {\r\n       char charAt = letters.charAt(i);\r\n       if (map.containsKey(charAt)) {\r\n            numbers.append(map.get(charAt));\r\n       }\r\n    }\r\n\r\n    return numbers.toString();\r\n       \r\n}\r\n```\r\nYou would be better off creating the Map outside the method and passing it as an argument.  That way it only needs to be created once,\\.\r\n","title":"Hi i would like to take value for this three keys (&#39;K&#39;,&#39;O&#39;,&#39;T&#39;)","body":"<ul>\n<li>use a StringBuilder to house the result.</li>\n<li>then simply append the value for the required character.</li>\n</ul>\n<pre><code>String result = changingLettersOnNumbersAndMap(&quot;KOT&quot;);\nSystem.out.println(result);\n</code></pre>\n<p>prints</p>\n<pre><code>556668\n\n\n\nstatic public String changingLettersOnNumbersAndMap(String letters) {\n   Map&lt;Character, String&gt; map = new HashMap&lt;&gt;();\n\n   map.put('A', &quot;2&quot;);\n   map.put('B', &quot;22&quot;);\n   map.put('C', &quot;222&quot;);\n   map.put('D', &quot;3&quot;);\n   map.put('E', &quot;33&quot;);\n   map.put('F', &quot;333&quot;);\n   map.put('G', &quot;4&quot;);\n   map.put('H', &quot;44&quot;);\n   map.put('I', &quot;444&quot;);\n   map.put('J', &quot;5&quot;);\n   map.put('K', &quot;55&quot;);\n   map.put('L', &quot;555&quot;);\n   map.put('M', &quot;6&quot;);\n   map.put('N', &quot;66&quot;);\n   map.put('O', &quot;666&quot;);\n   map.put('P', &quot;7&quot;);\n   map.put('Q', &quot;77&quot;);\n   map.put('R', &quot;777&quot;);\n   map.put('S', &quot;7777&quot;);\n   map.put('T', &quot;8&quot;);\n   map.put('U', &quot;88&quot;);\n   map.put('V', &quot;888&quot;);\n   map.put('W', &quot;9&quot;);\n   map.put('X', &quot;99&quot;);\n   map.put('Y', &quot;999&quot;);\n   map.put('Z', &quot;9999&quot;);\n\n\n   StringBuilder numbers = new StringBuilder();\n   for (int i = 0; i &lt; letters.length(); i++) {\n       char charAt = letters.charAt(i);\n       if (map.containsKey(charAt)) {\n            numbers.append(map.get(charAt));\n       }\n    }\n\n    return numbers.toString();\n       \n}\n</code></pre>\n<p>You would be better off creating the Map outside the method and passing it as an argument.  That way it only needs to be created once,.</p>\n"}],"owner":{"account_id":25996340,"reputation":41,"user_id":19707654,"display_name":"Pp1"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1660758158,"answer_count":1,"score":0,"last_activity_date":1660758279,"creation_date":1660754648,"question_id":73392143,"body_markdown":"It is simple probably but I have no idea how to make it. Help\r\nThe problem is at the end of the code.\r\n\r\n*****I would like to have a result like this **556668** and I&#39;ve got like this: \r\n\r\n**[2, 22, 222, 3, 33, 333, 4, 44, 444, 5, 55, 555, 6, 66, 666, 7, 77, 777, 7777, 8, 88, 888, 9, 99, 999, 9999][2, 22, 222, 3, 33, 333, 4, 44, 444, 5, 55, 555, 6, 66, 666, 7, 77, 777, 7777, 8, 88, 888, 9, 99, 999, 9999][2, 22, 222, 3, 33, 333, 4, 44, 444, 5, 55, 555, 6, 66, 666, 7, 77, 777, 7777, 8, 88, 888, 9, 99, 999, 9999]**** \r\n***\r\n\r\n**My code:**  \r\n\r\n    changingLettersOnNumbersAndMap(&quot;KOT&quot;);\r\n\r\n\r\n\r\n    static public void changingLettersOnNumbersAndMap(String letters) {\r\n        Map&lt;Character, String&gt; map = new HashMap&lt;&gt;();\r\n        String numbers = &quot;&quot;;\r\n\r\n        map.put(&#39;A&#39;, &quot;2&quot;);\r\n        map.put(&#39;B&#39;, &quot;22&quot;);\r\n        map.put(&#39;C&#39;, &quot;222&quot;);\r\n        map.put(&#39;D&#39;, &quot;3&quot;);\r\n        map.put(&#39;E&#39;, &quot;33&quot;);\r\n        map.put(&#39;F&#39;, &quot;333&quot;);\r\n        map.put(&#39;G&#39;, &quot;4&quot;);\r\n        map.put(&#39;H&#39;, &quot;44&quot;);\r\n        map.put(&#39;I&#39;, &quot;444&quot;);\r\n        map.put(&#39;J&#39;, &quot;5&quot;);\r\n        map.put(&#39;K&#39;, &quot;55&quot;);\r\n        map.put(&#39;L&#39;, &quot;555&quot;);\r\n        map.put(&#39;M&#39;, &quot;6&quot;);\r\n        map.put(&#39;N&#39;, &quot;66&quot;);\r\n        map.put(&#39;O&#39;, &quot;666&quot;);\r\n        map.put(&#39;P&#39;, &quot;7&quot;);\r\n        map.put(&#39;Q&#39;, &quot;77&quot;);\r\n        map.put(&#39;R&#39;, &quot;777&quot;);\r\n        map.put(&#39;S&#39;, &quot;7777&quot;);\r\n        map.put(&#39;T&#39;, &quot;8&quot;);\r\n        map.put(&#39;U&#39;, &quot;88&quot;);\r\n        map.put(&#39;V&#39;, &quot;888&quot;);\r\n        map.put(&#39;W&#39;, &quot;9&quot;);\r\n        map.put(&#39;X&#39;, &quot;99&quot;);\r\n        map.put(&#39;Y&#39;, &quot;999&quot;);\r\n        map.put(&#39;Z&#39;, &quot;9999&quot;);\r\n\r\n\r\n        for (int i = 0; i &lt; letters.length(); i++) {\r\n            char charAt = letters.charAt(i);\r\n            if (map.containsKey(charAt)) {\r\n                Collection&lt;String&gt; values = map.values();\r\n\r\n                Set&lt;Map.Entry&lt;Character, String&gt;&gt; entries = map.entrySet();\r\n                numbers = numbers + entries.stream().map(Map.Entry::getValue).collect(Collectors.toList());\r\n            }\r\n        }\r\n\r\n        System.out.println(numbers);\r\n    }\r\n```","title":"Hi i would like to take value for this three keys (&#39;K&#39;,&#39;O&#39;,&#39;T&#39;)","body":"<p>It is simple probably but I have no idea how to make it. Help\nThe problem is at the end of the code.</p>\n<p>*****I would like to have a result like this <strong>556668</strong> and I've got like this:</p>\n<p><strong>[2, 22, 222, 3, 33, 333, 4, 44, 444, 5, 55, 555, 6, 66, 666, 7, 77, 777, 7777, 8, 88, 888, 9, 99, 999, 9999][2, 22, 222, 3, 33, 333, 4, 44, 444, 5, 55, 555, 6, 66, 666, 7, 77, 777, 7777, 8, 88, 888, 9, 99, 999, 9999][2, 22, 222, 3, 33, 333, 4, 44, 444, 5, 55, 555, 6, 66, 666, 7, 77, 777, 7777, 8, 88, 888, 9, 99, 999, 9999]</strong>**</p>\n<hr />\n<p><strong>My code:</strong></p>\n<pre><code>changingLettersOnNumbersAndMap(&quot;KOT&quot;);\n\n\n\nstatic public void changingLettersOnNumbersAndMap(String letters) {\n    Map&lt;Character, String&gt; map = new HashMap&lt;&gt;();\n    String numbers = &quot;&quot;;\n\n    map.put('A', &quot;2&quot;);\n    map.put('B', &quot;22&quot;);\n    map.put('C', &quot;222&quot;);\n    map.put('D', &quot;3&quot;);\n    map.put('E', &quot;33&quot;);\n    map.put('F', &quot;333&quot;);\n    map.put('G', &quot;4&quot;);\n    map.put('H', &quot;44&quot;);\n    map.put('I', &quot;444&quot;);\n    map.put('J', &quot;5&quot;);\n    map.put('K', &quot;55&quot;);\n    map.put('L', &quot;555&quot;);\n    map.put('M', &quot;6&quot;);\n    map.put('N', &quot;66&quot;);\n    map.put('O', &quot;666&quot;);\n    map.put('P', &quot;7&quot;);\n    map.put('Q', &quot;77&quot;);\n    map.put('R', &quot;777&quot;);\n    map.put('S', &quot;7777&quot;);\n    map.put('T', &quot;8&quot;);\n    map.put('U', &quot;88&quot;);\n    map.put('V', &quot;888&quot;);\n    map.put('W', &quot;9&quot;);\n    map.put('X', &quot;99&quot;);\n    map.put('Y', &quot;999&quot;);\n    map.put('Z', &quot;9999&quot;);\n\n\n    for (int i = 0; i &lt; letters.length(); i++) {\n        char charAt = letters.charAt(i);\n        if (map.containsKey(charAt)) {\n            Collection&lt;String&gt; values = map.values();\n\n            Set&lt;Map.Entry&lt;Character, String&gt;&gt; entries = map.entrySet();\n            numbers = numbers + entries.stream().map(Map.Entry::getValue).collect(Collectors.toList());\n        }\n    }\n\n    System.out.println(numbers);\n}\n</code></pre>\n<pre><code></code></pre>\n"},{"tags":["java","spring","java-native-interface","or-tools"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1586864345,"post_id":61183676,"comment_id":108278867,"body_markdown":"In the second version, where do you actually call `loadLibrary`? Shouldn&#39;t you do it _before_ calling `SpringApplication.run()`? Normally you call `loadLibrary` from a `static{}` block in your class so the library is loaded when your class is loaded.","body":"In the second version, where do you actually call <code>loadLibrary</code>? Shouldn&#39;t you do it <i>before</i> calling <code>SpringApplication.run()</code>? Normally you call <code>loadLibrary</code> from a <code>static{}</code> block in your class so the library is loaded when your class is loaded."},{"owner":{"account_id":17661811,"reputation":1,"user_id":12820122,"display_name":"Overlord1408"},"score":0,"creation_date":1586875984,"post_id":61183676,"comment_id":108285864,"body_markdown":"@Botje in second version it called inside TravelingSalesmanExample2.main(null);, that actually first example. also tried load it in static initialization block and in service constructor.\nWhen put it before`SpringApplication.run()` get error `Exception in thread &quot;restartedMain&quot; java.lang.UnsatisfiedLinkError: Native Library /Users/vitaliy/Desktop/lib/libjniortools.jnilib already loaded in another classloader`.\nI think i need learn more about how spring load classes, suppose solution somewhere in this area, thanks","body":"@Botje in second version it called inside TravelingSalesmanExample2.main(null);, that actually first example. also tried load it in static initialization block and in service constructor. When put it before<code>SpringApplication.run()</code> get error <code>Exception in thread &quot;restartedMain&quot; java.lang.UnsatisfiedLinkError: Native Library &#47;Users&#47;vitaliy&#47;Desktop&#47;lib&#47;libjniortools.jnilib already loaded in another classloader</code>. I think i need learn more about how spring load classes, suppose solution somewhere in this area, thanks"},{"owner":{"account_id":17505229,"reputation":359,"user_id":12694610,"display_name":"Silverfang"},"score":0,"creation_date":1587015437,"post_id":61183676,"comment_id":108343602,"body_markdown":"If you are using some IDE then add the lib path to VM options in Spring configuration. It will resolve your issue","body":"If you are using some IDE then add the lib path to VM options in Spring configuration. It will resolve your issue"},{"owner":{"account_id":17661811,"reputation":1,"user_id":12820122,"display_name":"Overlord1408"},"score":0,"creation_date":1587018601,"post_id":61183676,"comment_id":108344697,"body_markdown":"@Silverfang tried to add in intellij idea in `edit configuration -&gt; environment -&gt; VM options`, not helps. tried to pass wrong path, get `java.lang.UnsatisfiedLinkError: no jniortools in java.library.path:`, so suppose with correct path lib is loading, but invisible for spring","body":"@Silverfang tried to add in intellij idea in <code>edit configuration -&gt; environment -&gt; VM options</code>, not helps. tried to pass wrong path, get <code>java.lang.UnsatisfiedLinkError: no jniortools in java.library.path:</code>, so suppose with correct path lib is loading, but invisible for spring"}],"answers":[{"tags":[],"owner":{"account_id":476430,"reputation":11691,"user_id":887343,"accept_rate":77,"display_name":"forhas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593463286,"creation_date":1593463286,"answer_id":62646351,"question_id":61183676,"body_markdown":"Check out my answer [here][1], I&#39;m using google or-tools as a part of a spring-boot application over intellij.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/62277824/887343","title":"UnsatisfiedLinkError when try to use google or-tools with spring","body":"<p>Check out my answer <a href=\"https://stackoverflow.com/a/62277824/887343\">here</a>, I'm using google or-tools as a part of a spring-boot application over intellij.</p>\n"},{"tags":[],"owner":{"account_id":8194909,"reputation":159,"user_id":6168100,"display_name":"Razin Bashar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660758022,"creation_date":1660758022,"answer_id":73392789,"question_id":61183676,"body_markdown":"    @SpringBootApplication\r\n    public class Application {\r\n      static{\r\n            System.loadLibrary(&quot;jniortools&quot;);\r\n      }\r\n      public static void main(String[] args) throws IOException {\r\n          SpringApplication.run(Application.class, args);\r\n          TravelingSalesmanExample2.main(null);\r\n      }\r\n    } ","title":"UnsatisfiedLinkError when try to use google or-tools with spring","body":"<pre><code>@SpringBootApplication\npublic class Application {\n  static{\n        System.loadLibrary(&quot;jniortools&quot;);\n  }\n  public static void main(String[] args) throws IOException {\n      SpringApplication.run(Application.class, args);\n      TravelingSalesmanExample2.main(null);\n  }\n} \n</code></pre>\n"}],"owner":{"account_id":17661811,"reputation":1,"user_id":12820122,"display_name":"Overlord1408"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660758022,"creation_date":1586764748,"question_id":61183676,"body_markdown":"i need to write simple TSP-solver service for my project\r\n\r\nor-tools solver works with simple static main class, but when i try to include it as service in spring i get \r\n**java.lang.UnsatisfiedLinkError: &#39;void com.google.ortools.constraintsolver.mainJNI.swig_module_init()&#39;**\r\n\r\n```\r\npublic class TravelingSalesmanExample2 {\r\n    public static void main(String[] args) {\r\n        System.loadLibrary(&quot;jniortools&quot;);\r\n...\r\n```\r\nworks perfect, but when i try to call methods from or-tools within spring poject as *@Service* or even like this\r\n\r\n```\r\n@SpringBootApplication\r\npublic class Application {\r\n    public static void main(String[] args) throws IOException {\r\n        SpringApplication.run(Application.class, args);\r\n        TravelingSalesmanExample2.main(null);\r\n    }\r\n}\r\n```  \r\ni have this error\r\n```\r\njava.lang.UnsatisfiedLinkError: &#39;void com.google.ortools.constraintsolver.mainJNI.swig_module_init()&#39;\r\n\tat com.google.ortools.constraintsolver.mainJNI.swig_module_init(Native Method) ~[com.google.ortools.jar:na]\r\n\tat com.google.ortools.constraintsolver.mainJNI.&lt;clinit&gt;(mainJNI.java:2393) ~[com.google.ortools.jar:na]\r\n\tat com.google.ortools.constraintsolver.RoutingIndexManager.&lt;init&gt;(RoutingIndexManager.java:46) ~[com.google.ortools.jar:na]\r\n\tat com.genii.pathfinder.service.TravelingSalesmanService.sortInOptimalRoute(TravelingSalesmanService.java:24) ~[classes/:na]\r\n\tat com.genii.pathfinder.controller.Api.testOrGoogle(Api.kt:41) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1594) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\r\n\tat java.base/java.lang.Thread.run(Thread.java:830) ~[na:na]\r\n```\r\n\r\nI have tried add or-tool as maven dependency as described here *https://github.com/oliviercailloux/google-or-tools-java*\r\n\r\ntried add argument ```-Djava.library.path=/Users/vitaliy/Desktop/backend/lib```\r\n\r\ntried load as ```System.load(&quot;/Users/vitaliy/Desktop/backend/lib/libjniortools.jnilib&quot;);```\r\n\r\nbut not succeed. any idea how to make native libs visible for spring-served application?\r\n\r\n**UPD OS:** mac os catalina 10.15.3","title":"UnsatisfiedLinkError when try to use google or-tools with spring","body":"<p>i need to write simple TSP-solver service for my project</p>\n\n<p>or-tools solver works with simple static main class, but when i try to include it as service in spring i get \n<strong>java.lang.UnsatisfiedLinkError: 'void com.google.ortools.constraintsolver.mainJNI.swig_module_init()'</strong></p>\n\n<pre><code>public class TravelingSalesmanExample2 {\n    public static void main(String[] args) {\n        System.loadLibrary(\"jniortools\");\n...\n</code></pre>\n\n<p>works perfect, but when i try to call methods from or-tools within spring poject as <em>@Service</em> or even like this</p>\n\n<pre><code>@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) throws IOException {\n        SpringApplication.run(Application.class, args);\n        TravelingSalesmanExample2.main(null);\n    }\n}\n</code></pre>\n\n<p>i have this error</p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: 'void com.google.ortools.constraintsolver.mainJNI.swig_module_init()'\n    at com.google.ortools.constraintsolver.mainJNI.swig_module_init(Native Method) ~[com.google.ortools.jar:na]\n    at com.google.ortools.constraintsolver.mainJNI.&lt;clinit&gt;(mainJNI.java:2393) ~[com.google.ortools.jar:na]\n    at com.google.ortools.constraintsolver.RoutingIndexManager.&lt;init&gt;(RoutingIndexManager.java:46) ~[com.google.ortools.jar:na]\n    at com.genii.pathfinder.service.TravelingSalesmanService.sortInOptimalRoute(TravelingSalesmanService.java:24) ~[classes/:na]\n    at com.genii.pathfinder.controller.Api.testOrGoogle(Api.kt:41) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1594) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.33.jar:9.0.33]\n    at java.base/java.lang.Thread.run(Thread.java:830) ~[na:na]\n</code></pre>\n\n<p>I have tried add or-tool as maven dependency as described here <em><a href=\"https://github.com/oliviercailloux/google-or-tools-java\" rel=\"nofollow noreferrer\">https://github.com/oliviercailloux/google-or-tools-java</a></em></p>\n\n<p>tried add argument <code>-Djava.library.path=/Users/vitaliy/Desktop/backend/lib</code></p>\n\n<p>tried load as <code>System.load(\"/Users/vitaliy/Desktop/backend/lib/libjniortools.jnilib\");</code></p>\n\n<p>but not succeed. any idea how to make native libs visible for spring-served application?</p>\n\n<p><strong>UPD OS:</strong> mac os catalina 10.15.3</p>\n"},{"tags":["java","xml","hashmap"],"comments":[{"owner":{"account_id":10805595,"reputation":3025,"user_id":7947994,"display_name":"JANO"},"score":0,"creation_date":1659778671,"post_id":73258554,"comment_id":129379096,"body_markdown":"Can you add the missing parts of your XML? I am a little confused with your code as you split at `,`, but your XML does not contain a single `,` character. Is [this](https://stackoverflow.com/questions/27547292/how-to-parse-xml-to-hashmap) answering your question?","body":"Can you add the missing parts of your XML? I am a little confused with your code as you split at <code>,</code>, but your XML does not contain a single <code>,</code> character. Is <a href=\"https://stackoverflow.com/questions/27547292/how-to-parse-xml-to-hashmap\">this</a> answering your question?"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":4,"creation_date":1659779914,"post_id":73258554,"comment_id":129379346,"body_markdown":"I&#39;m not a little confused, I&#39;m totally confused. The code seems to bear no relationship to the input at all.","body":"I&#39;m not a little confused, I&#39;m totally confused. The code seems to bear no relationship to the input at all."},{"owner":{"account_id":25993310,"reputation":1,"user_id":19705096,"display_name":"Mari Jeparska"},"score":0,"creation_date":1659783918,"post_id":73258554,"comment_id":129380057,"body_markdown":"I have added the full code","body":"I have added the full code"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1659784612,"post_id":73258554,"comment_id":129380177,"body_markdown":"&quot;What am I doing wrong?&quot; hard to tell because your code still doesn&#39;t seem to be related to XML as you are trying to split on `:` which doesn&#39;t seem to appear in your input. Anyway it would be *much* easier to write clean code with XML parser. But to suggest proper solution we need to know what results you expect.","body":"&quot;What am I doing wrong?&quot; hard to tell because your code still doesn&#39;t seem to be related to XML as you are trying to split on <code>:</code> which doesn&#39;t seem to appear in your input. Anyway it would be <i>much</i> easier to write clean code with XML parser. But to suggest proper solution we need to know what results you expect."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1659798167,"post_id":73258554,"comment_id":129382992,"body_markdown":"[It is completely wrong](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg) to use regular expressions to parse XML.  As Pshemo said, use an XML parser.  Theres two that [come with Java SE.](https://docs.oracle.com/en/java/javase/18/docs/api/java.xml/javax/xml/parsers/package-summary.html)","body":"<a href=\"https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg\">It is completely wrong</a> to use regular expressions to parse XML.  As Pshemo said, use an XML parser.  Theres two that <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.xml/javax/xml/parsers/package-summary.html\" rel=\"nofollow noreferrer\">come with Java SE.</a>"}],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659785683,"creation_date":1659785683,"answer_id":73259387,"question_id":73258554,"body_markdown":"To parse XML use XML parser. One of easier but yet powerful ones is [Jsoup][1] which allows us to write code like\r\n\r\n```\r\nString XMLString = &quot;&quot;&quot;\r\n        &lt;results&gt;\r\n            &lt;result level=&quot;1&quot; value=&quot;No necessary in-game text&quot; numvotes=&quot;0&quot; /&gt;\r\n            &lt;result level=&quot;2&quot; value=&quot;Some necessary text - easily memorized or small crib sheet&quot; numvotes=&quot;7&quot; /&gt;\r\n            &lt;result level=&quot;3&quot; value=&quot;Moderate in-game text - needs crib sheet or paste ups&quot; numvotes=&quot;22&quot; /&gt;\r\n            &lt;result level=&quot;4&quot; value=&quot;Extensive use of text - massive conversion needed to be playable&quot; numvotes=&quot;2&quot; /&gt;\r\n            &lt;result level=&quot;5&quot; value=&quot;Unplayable in another language&quot; numvotes=&quot;1&quot; /&gt;\r\n        &lt;/results&gt;\r\n        &quot;&quot;&quot;;\r\n\r\nMap&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\nElements allResultElements = Jsoup.parse(XMLString, Parser.xmlParser()).select(&quot;result&quot;);\r\nfor (Element result : allResultElements){\r\n    map.put(result.attr(&quot;level&quot;), result.attr(&quot;numvotes&quot;));\r\n}\r\n\r\nSystem.out.println(map);\r\n```\r\nOutput: `{1=0, 2=7, 3=22, 4=2, 5=1}`\r\n\r\n\r\n  [1]: https://jsoup.org/","title":"How to turn String with XML into a HashMap","body":"<p>To parse XML use XML parser. One of easier but yet powerful ones is <a href=\"https://jsoup.org/\" rel=\"nofollow noreferrer\">Jsoup</a> which allows us to write code like</p>\n<pre><code>String XMLString = &quot;&quot;&quot;\n        &lt;results&gt;\n            &lt;result level=&quot;1&quot; value=&quot;No necessary in-game text&quot; numvotes=&quot;0&quot; /&gt;\n            &lt;result level=&quot;2&quot; value=&quot;Some necessary text - easily memorized or small crib sheet&quot; numvotes=&quot;7&quot; /&gt;\n            &lt;result level=&quot;3&quot; value=&quot;Moderate in-game text - needs crib sheet or paste ups&quot; numvotes=&quot;22&quot; /&gt;\n            &lt;result level=&quot;4&quot; value=&quot;Extensive use of text - massive conversion needed to be playable&quot; numvotes=&quot;2&quot; /&gt;\n            &lt;result level=&quot;5&quot; value=&quot;Unplayable in another language&quot; numvotes=&quot;1&quot; /&gt;\n        &lt;/results&gt;\n        &quot;&quot;&quot;;\n\nMap&lt;String, String&gt; map = new HashMap&lt;&gt;();\nElements allResultElements = Jsoup.parse(XMLString, Parser.xmlParser()).select(&quot;result&quot;);\nfor (Element result : allResultElements){\n    map.put(result.attr(&quot;level&quot;), result.attr(&quot;numvotes&quot;));\n}\n\nSystem.out.println(map);\n</code></pre>\n<p>Output: <code>{1=0, 2=7, 3=22, 4=2, 5=1}</code></p>\n"}],"owner":{"account_id":25993310,"reputation":1,"user_id":19705096,"display_name":"Mari Jeparska"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660757553,"creation_date":1659777358,"question_id":73258554,"body_markdown":"I have a chunk of XML, that is turned into a `String` via `substring`.\r\nI need to compare some data within it, so need to turn it into the `HashMap`. This is the XML:\r\n```\r\ntitle=&quot;Language Dependence&quot; totalvotes=&quot;32&quot;&gt;\r\n            \r\n        &lt;results&gt;        \r\n                    &lt;result level=&quot;1&quot; value=&quot;No necessary in-game text&quot; numvotes=&quot;0&quot; /&gt;\r\n                    &lt;result level=&quot;2&quot; value=&quot;Some necessary text - easily memorized or small crib sheet&quot; numvotes=&quot;7&quot; /&gt;\r\n                    &lt;result level=&quot;3&quot; value=&quot;Moderate in-game text - needs crib sheet or paste ups&quot; numvotes=&quot;22&quot; /&gt;\r\n                    &lt;result level=&quot;4&quot; value=&quot;Extensive use of text - massive conversion needed to be playable&quot; numvotes=&quot;2&quot; /&gt;\r\n                    &lt;result level=&quot;5&quot; value=&quot;Unplayable in another language&quot; numvotes=&quot;1&quot; /&gt;\r\n                &lt;/results&gt;                    \r\n    &lt;/poll&gt;\r\n```\r\nI have written the `HashMap` Code, but it does not seem to work. What am I doing wrong?\r\n\r\nResponse response = RestAssured.get(api address);\r\n\r\n            String code = response.asString();\r\n\r\n            String partialCode = code.substring(15967, 16535);\r\n\r\n            String partialCodeAm = partialCode.replaceAll(&quot;/&gt;&quot;, &quot;&quot;);\r\n            String partialCodeAp = partialCodeAm.replaceAll(&quot;&lt;&quot;, &quot;&quot;);\r\n            String partialCodeAf = partialCodeAp.replaceAll(&quot;\\&quot;&quot;, &quot;&quot;);\r\n            String partialCodeAd = partialCodeAf.replaceAll(&quot;results&gt;&quot;, &quot;&quot;);\r\n            String partialCodeAu = partialCodeAd.replaceAll(&quot;&gt;&quot;, &quot;&quot;);\r\n            String partialCodeAc = partialCodeAu.replaceAll(&quot;/results&gt;&quot;, &quot;&quot;);\r\n            String partialCodeAk = partialCodeAc.replaceAll(&quot;/&quot;, &quot;&quot;);\r\n\r\n            String[] parts = partialCodeAk.split(&quot;,&quot;);\r\n\r\n            Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n\r\n            for (String part : parts) {\r\n\r\n                String[] voteData = part.split(&quot;:&quot;);\r\n\r\n                String level = voteData[0].trim();\r\n                String numvotes = voteData[0].trim();\r\n\r\n                map.put(level, numvotes);\r\n            }","title":"How to turn String with XML into a HashMap","body":"<p>I have a chunk of XML, that is turned into a <code>String</code> via <code>substring</code>.\nI need to compare some data within it, so need to turn it into the <code>HashMap</code>. This is the XML:</p>\n<pre><code>title=&quot;Language Dependence&quot; totalvotes=&quot;32&quot;&gt;\n            \n        &lt;results&gt;        \n                    &lt;result level=&quot;1&quot; value=&quot;No necessary in-game text&quot; numvotes=&quot;0&quot; /&gt;\n                    &lt;result level=&quot;2&quot; value=&quot;Some necessary text - easily memorized or small crib sheet&quot; numvotes=&quot;7&quot; /&gt;\n                    &lt;result level=&quot;3&quot; value=&quot;Moderate in-game text - needs crib sheet or paste ups&quot; numvotes=&quot;22&quot; /&gt;\n                    &lt;result level=&quot;4&quot; value=&quot;Extensive use of text - massive conversion needed to be playable&quot; numvotes=&quot;2&quot; /&gt;\n                    &lt;result level=&quot;5&quot; value=&quot;Unplayable in another language&quot; numvotes=&quot;1&quot; /&gt;\n                &lt;/results&gt;                    \n    &lt;/poll&gt;\n</code></pre>\n<p>I have written the <code>HashMap</code> Code, but it does not seem to work. What am I doing wrong?</p>\n<p>Response response = RestAssured.get(api address);</p>\n<pre><code>        String code = response.asString();\n\n        String partialCode = code.substring(15967, 16535);\n\n        String partialCodeAm = partialCode.replaceAll(&quot;/&gt;&quot;, &quot;&quot;);\n        String partialCodeAp = partialCodeAm.replaceAll(&quot;&lt;&quot;, &quot;&quot;);\n        String partialCodeAf = partialCodeAp.replaceAll(&quot;\\&quot;&quot;, &quot;&quot;);\n        String partialCodeAd = partialCodeAf.replaceAll(&quot;results&gt;&quot;, &quot;&quot;);\n        String partialCodeAu = partialCodeAd.replaceAll(&quot;&gt;&quot;, &quot;&quot;);\n        String partialCodeAc = partialCodeAu.replaceAll(&quot;/results&gt;&quot;, &quot;&quot;);\n        String partialCodeAk = partialCodeAc.replaceAll(&quot;/&quot;, &quot;&quot;);\n\n        String[] parts = partialCodeAk.split(&quot;,&quot;);\n\n        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n\n        for (String part : parts) {\n\n            String[] voteData = part.split(&quot;:&quot;);\n\n            String level = voteData[0].trim();\n            String numvotes = voteData[0].trim();\n\n            map.put(level, numvotes);\n        }\n</code></pre>\n"},{"tags":["java","http","ptv-developer"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1660756936,"post_id":73392395,"comment_id":129610093,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":17222764,"reputation":56,"user_id":12469162,"display_name":"Bernd Welter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660757500,"creation_date":1660757500,"answer_id":73392682,"question_id":73392395,"body_markdown":"Unfortunately this is a bug in the API Managment of Microsoft. We created a ticket for Microsoft but we don&#39;t know when it is fixed.\r\nThe problem is that the API Managment rejects POST requests with an empty body where no Content-Length header of 0 is passed. The java client does not pass this header for an empty body, therefore either the empty body must be avoided or the header must be added until the bug is fixed.\r\n \r\nThere are two possible solution to solve this problem:\r\n1. Just pass a dummy body which is ignored anyway. For this you have to adapt the java client after generation:\r\nreplace all occurencies of\r\n```\r\nlocalVarRequestBuilder.method(&quot;POST&quot;, HttpRequest.BodyPublishers.noBody());\r\n```\r\nwith\r\n```\r\ntry {\r\n  byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(&quot;dummybody&quot;);\r\n  localVarRequestBuilder.method(&quot;POST&quot;, HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));\r\n} catch (IOException e) {\r\n  throw new ApiException(e);\r\n}\r\n```\r\n \r\n2. Explicitly send a Content-Length header of 0 by adding\r\n```\r\nSystem.setProperty(&quot;jdk.httpclient.allowRestrictedHeaders&quot;, &quot;Content-Length&quot;);\r\n```\r\nto a setup method of your main and adding\r\n```\r\nlocalVarRequestBuilder.header(&quot;Content-Length&quot;, &quot;0&quot;);\r\n```\r\nto the `startEvaluationRequestBuilder` and `startOptimizationRequestBuilder` methods.","title":"HTTP Error 411 for startOptimization request of routeoptimization api","body":"<p>Unfortunately this is a bug in the API Managment of Microsoft. We created a ticket for Microsoft but we don't know when it is fixed.\nThe problem is that the API Managment rejects POST requests with an empty body where no Content-Length header of 0 is passed. The java client does not pass this header for an empty body, therefore either the empty body must be avoided or the header must be added until the bug is fixed.</p>\n<p>There are two possible solution to solve this problem:</p>\n<ol>\n<li>Just pass a dummy body which is ignored anyway. For this you have to adapt the java client after generation:\nreplace all occurencies of</li>\n</ol>\n<pre><code>localVarRequestBuilder.method(&quot;POST&quot;, HttpRequest.BodyPublishers.noBody());\n</code></pre>\n<p>with</p>\n<pre><code>try {\n  byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(&quot;dummybody&quot;);\n  localVarRequestBuilder.method(&quot;POST&quot;, HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));\n} catch (IOException e) {\n  throw new ApiException(e);\n}\n</code></pre>\n<ol start=\"2\">\n<li>Explicitly send a Content-Length header of 0 by adding</li>\n</ol>\n<pre><code>System.setProperty(&quot;jdk.httpclient.allowRestrictedHeaders&quot;, &quot;Content-Length&quot;);\n</code></pre>\n<p>to a setup method of your main and adding</p>\n<pre><code>localVarRequestBuilder.header(&quot;Content-Length&quot;, &quot;0&quot;);\n</code></pre>\n<p>to the <code>startEvaluationRequestBuilder</code> and <code>startOptimizationRequestBuilder</code> methods.</p>\n"}],"owner":{"account_id":26087766,"reputation":3,"user_id":19785084,"display_name":"Daniela Grimm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73392682,"answer_count":1,"score":0,"last_activity_date":1660757500,"creation_date":1660755833,"question_id":73392395,"body_markdown":"I&#39;m trying to send a startOptimization request to https://api.myptv.com/routeoptimization. I generated my java client as described in the tutorial: https://developer.myptv.com/Tutorials/General/clientGeneration.htm\r\n\r\nCreating a plan works but when I want to optimize it I get the following error:\r\n\r\n```\r\nHTTP Error 411. The request must be chunked or have a content length.\r\n```\r\n\r\nI noticed that this error is also returned when I send a startEvaluation request. All other requests of the route optimization api and all other APIs seems to work.","title":"HTTP Error 411 for startOptimization request of routeoptimization api","body":"<p>I'm trying to send a startOptimization request to <a href=\"https://api.myptv.com/routeoptimization\" rel=\"nofollow noreferrer\">https://api.myptv.com/routeoptimization</a>. I generated my java client as described in the tutorial: <a href=\"https://developer.myptv.com/Tutorials/General/clientGeneration.htm\" rel=\"nofollow noreferrer\">https://developer.myptv.com/Tutorials/General/clientGeneration.htm</a></p>\n<p>Creating a plan works but when I want to optimize it I get the following error:</p>\n<pre><code>HTTP Error 411. The request must be chunked or have a content length.\n</code></pre>\n<p>I noticed that this error is also returned when I send a startEvaluation request. All other requests of the route optimization api and all other APIs seems to work.</p>\n"},{"tags":["java","spring","spring-transactions","spring-scheduled"],"answers":[{"tags":[],"owner":{"account_id":18891758,"reputation":144,"user_id":13781909,"display_name":"Danny Briskin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660757466,"creation_date":1660757466,"answer_id":73392677,"question_id":73392056,"body_markdown":"looks like &quot;findByCustomized&quot; is a non-modifiable query method (aka select), there is no need in transaction thus ","title":"@Transactional not working from scheduled method","body":"<p>looks like &quot;findByCustomized&quot; is a non-modifiable query method (aka select), there is no need in transaction thus</p>\n"}],"owner":{"account_id":16186751,"reputation":361,"user_id":11686638,"display_name":"chl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660757466,"creation_date":1660754217,"question_id":73392056,"body_markdown":"I have two classess as below.\r\n\r\n```java\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class SomeScheduler {\r\n    \r\n    private final SomeService someService;\r\n\r\n    @Scheduled( ... )\r\n    void doScheduledJob() {\r\n         someService.doJob();\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@Service\r\n@RequiredArgsConstructor\r\n@Transactional\r\npublic class SomeService {\r\n    \r\n    private final SomeRepository someRepository;\r\n\r\n    public void doJob() {\r\n        someRepository.findByCustomized();\r\n        \r\n        ...\r\n    }\r\n}\r\n```\r\n\r\nThe problem is that `SomeService` is **working** without `@Transactional`.\r\n\r\nWith configuration in application.yml `logging.level.org.springframework.transactional.interceptor: DEBUG`, I found that there are some logs like `No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByCustomized]: This method is not transactional.`\r\n\r\nWhat I wanna know is :\r\n1. There is no transctional on service method. Why ? (If I change with MANDATORY propagation, it throws exception)\r\n2. my repository method which has `@Query` annotation works. I&#39;ve thought that &#39;JPA requires transaction&#39; but it wasn&#39;t. Why ?\r\n\r\nI&#39;ve searched this for a while, but couldn&#39;t understand. Can any one explain this or show me any article about ?\r\n\r\nThank you.","title":"@Transactional not working from scheduled method","body":"<p>I have two classess as below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@RequiredArgsConstructor\npublic class SomeScheduler {\n    \n    private final SomeService someService;\n\n    @Scheduled( ... )\n    void doScheduledJob() {\n         someService.doJob();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@RequiredArgsConstructor\n@Transactional\npublic class SomeService {\n    \n    private final SomeRepository someRepository;\n\n    public void doJob() {\n        someRepository.findByCustomized();\n        \n        ...\n    }\n}\n</code></pre>\n<p>The problem is that <code>SomeService</code> is <strong>working</strong> without <code>@Transactional</code>.</p>\n<p>With configuration in application.yml <code>logging.level.org.springframework.transactional.interceptor: DEBUG</code>, I found that there are some logs like <code>No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByCustomized]: This method is not transactional.</code></p>\n<p>What I wanna know is :</p>\n<ol>\n<li>There is no transctional on service method. Why ? (If I change with MANDATORY propagation, it throws exception)</li>\n<li>my repository method which has <code>@Query</code> annotation works. I've thought that 'JPA requires transaction' but it wasn't. Why ?</li>\n</ol>\n<p>I've searched this for a while, but couldn't understand. Can any one explain this or show me any article about ?</p>\n<p>Thank you.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1660721179,"post_id":73384360,"comment_id":129596464,"body_markdown":"I would recommend going with Streams, and filter on the content. Also: there&#39;s no reason to have all those display methods. Just have one, and pass the arrayList you want to print the contents of as a param","body":"I would recommend going with Streams, and filter on the content. Also: there&#39;s no reason to have all those display methods. Just have one, and pass the arrayList you want to print the contents of as a param"},{"owner":{"account_id":25376058,"reputation":1338,"user_id":19189183,"display_name":"Sayan Bhattacharya"},"score":0,"creation_date":1660721427,"post_id":73384360,"comment_id":129596526,"body_markdown":"Simple solution is inside a `for loop`  do a if-else check  like `if (students.get(i).getNumber() == INPUT_NUMBER) print`.","body":"Simple solution is inside a <code>for loop</code>  do a if-else check  like <code>if (students.get(i).getNumber() == INPUT_NUMBER) print</code>."},{"owner":{"account_id":16801428,"reputation":910,"user_id":12146581,"display_name":"Mohamad Ghaith Alzin"},"score":0,"creation_date":1660721817,"post_id":73384360,"comment_id":129596673,"body_markdown":"Please update the above code with the `Student`,  `Enrolment`, `Subject`, and `Undergraduate` classes, so that we can help you more!","body":"Please update the above code with the <code>Student</code>,  <code>Enrolment</code>, <code>Subject</code>, and <code>Undergraduate</code> classes, so that we can help you more!"},{"owner":{"account_id":23196825,"reputation":11,"user_id":17292339,"display_name":"skittlefiz"},"score":0,"creation_date":1660722216,"post_id":73384360,"comment_id":129596823,"body_markdown":"i havent yet learned Streams and filters and cant use them too as per exercise requirements..  i need to find some other way for this.. and I&#39;m kind of a beginner so i wanna make my code simple for me to understand for now.. even if it makes it a bit long.. hope that makes sense....","body":"i havent yet learned Streams and filters and cant use them too as per exercise requirements..  i need to find some other way for this.. and I&#39;m kind of a beginner so i wanna make my code simple for me to understand for now.. even if it makes it a bit long.. hope that makes sense...."},{"owner":{"account_id":23196825,"reputation":11,"user_id":17292339,"display_name":"skittlefiz"},"score":0,"creation_date":1660740595,"post_id":73384360,"comment_id":129603529,"body_markdown":"@SayanBhattacharya thanks your comment worked for searching student number using if inside for loop.. but it doesnt work for searching subjects as subject code is a string not an int.. any sugessions for that???","body":"@SayanBhattacharya thanks your comment worked for searching student number using if inside for loop.. but it doesnt work for searching subjects as subject code is a string not an int.. any sugessions for that???"},{"owner":{"account_id":25376058,"reputation":1338,"user_id":19189183,"display_name":"Sayan Bhattacharya"},"score":0,"creation_date":1660740921,"post_id":73384360,"comment_id":129603697,"body_markdown":"@skittlefiz For `String` type you need to use `equals` method instead of `==`. Eg : `if (subjects.get(i).getCode().equals( INPUT ))`.  See [this](https://stackoverflow.com/questions/46800753/equals-method-and-operator-for-primitive-data-types-and-class-data-types)","body":"@skittlefiz For <code>String</code> type you need to use <code>equals</code> method instead of <code>==</code>. Eg : <code>if (subjects.get(i).getCode().equals( INPUT ))</code>.  See <a href=\"https://stackoverflow.com/questions/46800753/equals-method-and-operator-for-primitive-data-types-and-class-data-types\">this</a>"},{"owner":{"account_id":23196825,"reputation":11,"user_id":17292339,"display_name":"skittlefiz"},"score":0,"creation_date":1660743160,"post_id":73384360,"comment_id":129604618,"body_markdown":"@SayanBhattacharya thanks legend.. spent another 30 mins trynna put in a condition where if the input is an invalid subject code it says invalid code.... rn this code is working for me ```for (int i=0 ; i&lt;subjects.size() ; i++){\n                if (subjects.get(i).getCode().equals(input)){\n                    System.out.println(subjects.get(i).toString());\n                }\n            }``` as its already a double loop i cant write an if statement to ask ```if (input != subjects.list...etc... ``` it just prints the invalid statement multiple times.. any solutions for that if possible!","body":"@SayanBhattacharya thanks legend.. spent another 30 mins trynna put in a condition where if the input is an invalid subject code it says invalid code.... rn this code is working for me <code>for (int i=0 ; i&lt;subjects.size() ; i++){                 if (subjects.get(i).getCode().equals(input)){                     System.out.println(subjects.get(i).toString());                 }             }</code> as its already a double loop i cant write an if statement to ask <code>if (input != subjects.list...etc... </code> it just prints the invalid statement multiple times.. any solutions for that if possible!"},{"owner":{"account_id":25376058,"reputation":1338,"user_id":19189183,"display_name":"Sayan Bhattacharya"},"score":0,"creation_date":1660743311,"post_id":73384360,"comment_id":129604658,"body_markdown":"@skittlefiz Since the problem of this thread is already solved, I suggest you create a new stack thread for the issue.","body":"@skittlefiz Since the problem of this thread is already solved, I suggest you create a new stack thread for the issue."},{"owner":{"account_id":23196825,"reputation":11,"user_id":17292339,"display_name":"skittlefiz"},"score":0,"creation_date":1660757823,"post_id":73384360,"comment_id":129610379,"body_markdown":"@SayanBhattacharya apparently i cant ask another question for another 5 days cause im new i basically updated my whole question edited it all again. hoping for some help.. im sorry im new i dont really know if ther is any other way to ask cause it literally wont let me.","body":"@SayanBhattacharya apparently i cant ask another question for another 5 days cause im new i basically updated my whole question edited it all again. hoping for some help.. im sorry im new i dont really know if ther is any other way to ask cause it literally wont let me."}],"answers":[{"tags":[],"owner":{"account_id":1397133,"reputation":4922,"user_id":1326692,"accept_rate":42,"display_name":"Vishal Zanzrukia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660721406,"creation_date":1660721406,"answer_id":73384434,"question_id":73384360,"body_markdown":"I think, you can use streams and filter on that something like this\r\n\r\n\r\n    Optional&lt;Stundent&gt; optionalStudent = students\r\n         .stream()\r\n         .filter(s -&gt; s.getNumber() == inputNumber) //assumption: your number field is int primitive type\r\n         .findAny(); //assumption: student number if unique and you are expecting to have maximum one record per student number\r\n    \r\n    if(optionalStudent.isPresent()){\r\n         System.out.println(&quot;Student found: &quot; + optionalStudent.get());\r\n    } else {\r\n         System.out.println(&quot;Student not found with given number: &quot; + inputNumber);\r\n    }","title":"multiple validity checks within a double loop and switch case","body":"<p>I think, you can use streams and filter on that something like this</p>\n<pre><code>Optional&lt;Stundent&gt; optionalStudent = students\n     .stream()\n     .filter(s -&gt; s.getNumber() == inputNumber) //assumption: your number field is int primitive type\n     .findAny(); //assumption: student number if unique and you are expecting to have maximum one record per student number\n\nif(optionalStudent.isPresent()){\n     System.out.println(&quot;Student found: &quot; + optionalStudent.get());\n} else {\n     System.out.println(&quot;Student not found with given number: &quot; + inputNumber);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24018229,"reputation":313,"user_id":18000902,"display_name":"Omar Hussien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660722604,"creation_date":1660722604,"answer_id":73384693,"question_id":73384360,"body_markdown":"change **ArrayList&lt;Student&gt;** to **Map&lt;Integer,Student&gt;**\r\n\r\nset **key** by **student number** :\r\n            \r\n            students.put(s1.getNumber(),s1);\r\n            students.put(s2.getNumber(),s2);\r\n            students.put(s3.getNumber(),s3);\r\n            students.put(s4.getNumber(),s4);\r\n            students.put(s5.getNumber(),s5);\r\n            students.put(s6.getNumber(),s6);\r\n            students.put(s7.getNumber(),s7);\r\n            students.put(s8.getNumber(),s8);\r\n            students.put(s9.getNumber(),s9);\r\n            students.put(s10.getNumber(),s10);\r\n            students.put(s11.getNumber(),s11);\r\n            students.put(s12.getNumber(),s12);\r\n            students.put(s13.getNumber(),s13);\r\n            students.put(s14.getNumber(),s14);\r\n\r\nget student by **key** -&gt; **student number** :\r\n\r\n\r\n    public void searchSTU() {\r\n        Scanner Input = new Scanner(System.in);\r\n        System.out.println(&quot;Enter Student number :&quot;);\r\n        int input = Input.nextInt();\r\n        System.out.println(students.get(input).toString());\r\n    }","title":"multiple validity checks within a double loop and switch case","body":"<p>change <strong>ArrayList</strong> to <strong>Map&lt;Integer,Student&gt;</strong></p>\n<p>set <strong>key</strong> by <strong>student number</strong> :</p>\n<pre><code>        students.put(s1.getNumber(),s1);\n        students.put(s2.getNumber(),s2);\n        students.put(s3.getNumber(),s3);\n        students.put(s4.getNumber(),s4);\n        students.put(s5.getNumber(),s5);\n        students.put(s6.getNumber(),s6);\n        students.put(s7.getNumber(),s7);\n        students.put(s8.getNumber(),s8);\n        students.put(s9.getNumber(),s9);\n        students.put(s10.getNumber(),s10);\n        students.put(s11.getNumber(),s11);\n        students.put(s12.getNumber(),s12);\n        students.put(s13.getNumber(),s13);\n        students.put(s14.getNumber(),s14);\n</code></pre>\n<p>get student by <strong>key</strong> -&gt; <strong>student number</strong> :</p>\n<pre><code>public void searchSTU() {\n    Scanner Input = new Scanner(System.in);\n    System.out.println(&quot;Enter Student number :&quot;);\n    int input = Input.nextInt();\n    System.out.println(students.get(input).toString());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23196825,"reputation":11,"user_id":17292339,"display_name":"skittlefiz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660751544,"creation_date":1660751544,"answer_id":73391465,"question_id":73384360,"body_markdown":"Thank you for all the comments and answers but my question was limited to the methods I could use to solve this and this is the double loop that worked for me thanks to one of the comments!\r\n\r\nTo summarize from my understanding this loop goes through a specific attribute of an object comparing it to user input and it does that for every object in the arraylist findind the one that matches.. Hope this helps someone else too \r\n\r\nCheers!\r\n\r\n```java\r\nfor (int i = 0; i &lt; students.size(); i++) {\r\n            if (students.get(i).getNumber() == input) {\r\n                System.out.println(students.get(i).toString());\r\n            }\r\n        }\r\n```","title":"multiple validity checks within a double loop and switch case","body":"<p>Thank you for all the comments and answers but my question was limited to the methods I could use to solve this and this is the double loop that worked for me thanks to one of the comments!</p>\n<p>To summarize from my understanding this loop goes through a specific attribute of an object comparing it to user input and it does that for every object in the arraylist findind the one that matches.. Hope this helps someone else too</p>\n<p>Cheers!</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; students.size(); i++) {\n            if (students.get(i).getNumber() == input) {\n                System.out.println(students.get(i).toString());\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":23196825,"reputation":11,"user_id":17292339,"display_name":"skittlefiz"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1660751937,"answer_count":3,"score":0,"last_activity_date":1660757372,"creation_date":1660721017,"question_id":73384360,"body_markdown":"\r\n**NOTE:** \r\n\r\n**I can&#39;t use any advanced methods or features java might have to solve this. I&#39;m limited to whatever&#39;s in the code mostly and I&#39;m aware the code could be shorter and cleaner but for me, as a beginner the shorter the code is the harder for me to understand hence the reason so many methods and non-advanced for loops, etc...**\r\n\r\nFor my ```newEnrolment()``` method I figured out how to go with the double loop to loop for what I needed which was &quot;finding a specific attribute from an object from a list of objects in an array e.g students, subjects, enrolments&quot;\r\n\r\nnow the next thing is validity check in which I am supposed to create a new enrolment which takes a student number and subject code from user checks against the attributes of those objects from the ArrayList and only enroll them if the student no and subject code already exists in the ArrayList&#39;s objects attributes... I know I&#39;m making it complicated cause I don&#39;t know any other way to explain that&#39;s why I added my whole class...\r\n\r\n```java\r\nfor (int i=0 ; i&lt;subjects.size() ; i++){\r\n            if (subjects.get(i).getCode().equals(newsub) )\r\n            {\r\n                enrolments.add(enrolment1);\r\n                System.out.println(&quot;A new enrolment for the student &quot;+newstu+&quot; on the subject &quot;+newsub+&quot; has been \\n&quot; +\r\n                        &quot;added to the list.&quot;);\r\n            }\r\n            else if (i == subjects.size()-1)\r\n            {\r\n                System.out.println(&quot;Invalid subject code&quot;);\r\n            }\r\n        }\r\n```\r\nThis loop does the validity check for subjects or for students but doesn&#39;t work for both because both have different amounts of values in their ArrayList.\r\n\r\nHere I tried putting both my required conditions inside the if() statement but the outer loop can only take its conditions from one ArrayList so I&#39;m stuck  at this\r\n\r\n```java\r\nfor (int i=0 ; i&lt;subjects.size() ; i++){\r\n            if (subjects.get(i).getCode().equals(newsub) &amp;&amp; students.get(i).getNumber() == newstu) \r\n            {\r\n                enrolments.add(enrolment1);\r\n                System.out.println(&quot;A new enrolment for the student &quot;+newstu+&quot; on the subject &quot;+newsub+&quot; has been \\n&quot; +\r\n                        &quot;added to the list.&quot;);\r\n            }\r\n            else if (i == subjects.size()-1)\r\n            {\r\n                System.out.println(&quot;Invalid subject code&quot;);\r\n            }\r\n        }\r\n```\r\nI have the same issue in switch() statement where i want to do sth like if the user inputs something other than 1-8 it says &quot;input invalid&quot; but again not sure what kinda statemnet to attach with switch() to make it work.\r\n\r\nBeen stuck on this for a while now tried variations of loops i could think of no luck yet\r\n\r\n\r\n**So two questions**\r\n\r\n_One :_ is regarding the validity check of both inputs while doing exactly what the for loop is doing now\r\n\r\n_Two :_ using validity check on switch() incase user input isn&#39;t 1-8\r\n\r\n\r\nHere is the code of my Main class so far Everythink works fine except the problem i mentioned with validity check\r\n\r\nTHANKS HEAPS!!!\r\n\r\n```java\r\nimport java.sql.Array;\r\nimport java.util.ArrayList;\r\nimport java.util.Scanner;\r\nimport java.lang.*;\r\npublic class StudentEnrolmentSystem {\r\n    private ArrayList&lt;Student&gt; students;\r\n    private ArrayList&lt;Subject&gt; subjects;\r\n    private ArrayList&lt;Enrolment&gt; enrolments;\r\n\r\n    public StudentEnrolmentSystem() {\r\n        students = new ArrayList&lt;Student&gt;();\r\n        subjects = new ArrayList&lt;Subject&gt;();\r\n        enrolments = new ArrayList&lt;Enrolment&gt;();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n\r\n        StudentEnrolmentSystem ses = new StudentEnrolmentSystem();\r\n        ses.data();\r\n        while (true) {\r\n            ses.displaymenu();\r\n        }\r\n\r\n    }\r\n\r\n    public void displaySTU() {\r\n        for (int i = 0; i &lt; students.size(); i++) {\r\n            System.out.println(students.get(i).toString());\r\n        }\r\n    }\r\n\r\n    public void displaySUB() {\r\n        for (int i = 0; i &lt; subjects.size(); i++) {\r\n            System.out.println(subjects.get(i).toString());\r\n        }\r\n    }\r\n\r\n    public void displayENR() {\r\n        for (int i = 0; i &lt; enrolments.size(); i++) {\r\n            System.out.println(enrolments.get(i).toString());\r\n        }\r\n    }\r\n\r\n    public void searchSTU() {\r\n        Scanner Input = new Scanner(System.in);\r\n        System.out.println(&quot;Enter Student number :&quot;);\r\n        int input = Input.nextInt();\r\n        for (int i = 0; i &lt; students.size(); i++) {\r\n            if (students.get(i).getNumber() == input) {\r\n                System.out.println(students.get(i).toString());\r\n            }\r\n        }\r\n    }\r\n        public void searchSUB(){\r\n            Scanner Input = new Scanner(System.in);\r\n            System.out.println(&quot;Enter Subject code :&quot;);\r\n            String input = Input.nextLine();\r\n            for (int i=0 ; i&lt;subjects.size() ; i++){\r\n                if (subjects.get(i).getCode().equals(input)){\r\n                    System.out.println(subjects.get(i).toString());\r\n                }\r\n            }\r\n\r\n    }\r\n    public void findEnrolment(){\r\n        Scanner Input = new Scanner(System.in);\r\n        System.out.println(&quot;Enter Student number :&quot;);\r\n        int input = Input.nextInt();\r\n        for (int i = 0; i &lt; enrolments.size(); i++) {\r\n            if (enrolments.get(i).getNumber() == input) {\r\n                System.out.println(enrolments.get(i).toString());\r\n            }\r\n        }\r\n    }\r\n\r\n    public void newEnrolment(){\r\n        Scanner Input = new Scanner(System.in);\r\n        System.out.println(&quot;Input a student number:&quot;);\r\n        int newstu = Input.nextInt();\r\n        Scanner Input2 = new Scanner(System.in);\r\n        System.out.println(&quot;Input a subject code:&quot;);\r\n        String newsub = Input2.nextLine();\r\n        Enrolment enrolment1 = new Enrolment(newstu,newsub,&quot;26/07/2022&quot;);\r\n\r\n       for (int i=0 ; i&lt;subjects.size() ; i++){\r\n            if (subjects.get(i).getCode().equals(newsub) )\r\n            {\r\n                enrolments.add(enrolment1);\r\n                System.out.println(&quot;A new enrolment for the student &quot;+newstu+&quot; on the subject &quot;+newsub+&quot; has been \\n&quot; +\r\n                        &quot;added to the list.&quot;);\r\n            }\r\n            else if (i == subjects.size()-1)\r\n            {\r\n                System.out.println(&quot;Invalid subject code&quot;);\r\n            }\r\n        }\r\n    }\r\n        public void displaymenu(){\r\n            Scanner Input = new Scanner(System.in);\r\n\r\n            System.out.println(&quot;1. Display all students&quot;);\r\n            System.out.println(&quot;2. Display all subjects&quot;);\r\n            System.out.println(&quot;3. Display all enrolments&quot;);\r\n            System.out.println(&quot;4. Find a student&quot;);\r\n            System.out.println(&quot;5. Find a subject&quot;);\r\n            System.out.println(&quot;6. Find a student&#39;s enrolments&quot;);\r\n            System.out.println(&quot;7. Add an enrolment&quot;);\r\n            System.out.println(&quot;8. Exit&quot;);\r\n            int input = Input.nextInt();\r\n\r\n            switch (input) {\r\n                case 1:\r\n                    displaySTU();\r\n                    break;\r\n                case 2:\r\n                    displaySUB();\r\n                    break;\r\n                case 3:\r\n                    displayENR();\r\n                    break;\r\n                case 4:\r\n                    searchSTU();\r\n                    break;\r\n                case 5:\r\n                    searchSUB();\r\n                    break;\r\n                case 6:\r\n                    findEnrolment();\r\n                    break;\r\n                case 7:\r\n                    newEnrolment();\r\n                    break;\r\n                case 8:\r\n                    System.exit(-1);\r\n                    break;\r\n\r\n            }\r\n        }\r\n        public void data () {\r\n\r\n            Subject CSCI213 = new Subject(&quot;CSCI213&quot;, &quot;Java Programming &amp; Object Oriented Design&quot;, 6,\r\n                    &quot;This subject provides an introduction to the Java language and some of its standard &quot; +\r\n                            &quot;class libraries, you will have experience with object oriented design &quot; +\r\n                            &quot;and implementation techniques&quot;,\r\n                    &quot;CSCI124 or CSCI121 or CSCI192&quot;, 3, 2);\r\n            Subject CSCI124 = new Subject(&quot;CSCI124&quot;, &quot;Applied Programming&quot;, 6,\r\n                    &quot;This subject develops a thorough understanding of program design using data structures. &quot; +\r\n                            &quot;It extends CSCI114 and presents pointers, dynamic memory management and exception handling&quot;,\r\n                    &quot;CSCI114 &amp; CSCI103 or CSCI111 &amp; CSCI103&quot;, 4, 2);\r\n            Subject CSCI235 = new Subject(&quot;CSCI235&quot;, &quot;Database system&quot;, 6,\r\n                    &quot;This subject investigates three major areas of modern database systems:&quot; +\r\n                            &quot; 1. design of relational databases 2. programming of relational databases&quot;,\r\n                    &quot;CSIT115&quot;, 3, 2);\r\n            Subject CSIT115 = new Subject(&quot;CSIT115&quot;, &quot;Data management and security&quot;, 6,\r\n                    &quot;The subject investigates three major areas of modern data management systems:&quot; +\r\n                            &quot; data modelling, data processing, and data security.&quot;,\r\n                    &quot;&quot;, 2, 2);\r\n            Subject CSIT111 = new Subject(&quot;CSIT111&quot;, &quot;Programming Fundamentals&quot;, 6,\r\n                    &quot;The broad aim of this subject is to develop in students an understanding &quot; +\r\n                            &quot;of the fundamental principles of programming.&quot;,\r\n                    &quot;&quot;, 2, 2);\r\n            Subject CSIT121 = new Subject(&quot;CSIT121&quot;, &quot;Object oriented design and programming&quot;, 6,\r\n                    &quot;The aims of this subject are to consolidate and extend student&#39;s knowledge and skills&quot; +\r\n                            &quot; in structured programming and to develop their understanding and &quot; +\r\n                            &quot;practice of object oriented programming.&quot;,\r\n                    &quot;CSIT111 OR ENGG100&quot;, 2, 2);\r\n            Subject CSCI251 = new Subject(&quot;CSCI251&quot;, &quot;Advanced programming&quot;, 6,\r\n                    &quot;This subject develops a thorough understanding of advanced programming features, &quot; +\r\n                            &quot;and how to implement them in modern C++.&quot;,\r\n                    &quot;CSIT121&quot;, 3, 2);\r\n            subjects.add(CSCI213);\r\n            subjects.add(CSCI124);\r\n            subjects.add(CSCI235);\r\n            subjects.add(CSIT115);\r\n            subjects.add(CSIT111);\r\n            subjects.add(CSIT121);\r\n            subjects.add(CSCI251);\r\n\r\n            ArrayList&lt;String&gt; majors = new ArrayList&lt;String&gt;();\r\n            majors.add(&quot;Artificial Intelligence and Bing Data&quot;);\r\n            majors.add(&quot;Cyber Security&quot;);\r\n\r\n            Undergraduate s1 = new Undergraduate(100100, &quot;Albert&quot;, &quot;13/10/1965&quot;, &quot;a100@uni.edu.au&quot;,\r\n                    &quot;12 Robert street Woonona NSW 2517&quot;, &quot;12345678&quot;, &quot;Bachelor of CS&quot;, majors);\r\n            Undergraduate s2 = new Undergraduate(100110, &quot;Alvin&quot;, &quot;13/10/1977&quot;, &quot;a110@uni.edu.au&quot;,\r\n                    &quot;56 Marlo road Wollongong NSW 2500&quot;, &quot;11223344&quot;, &quot;Bachelor of CS&quot;, majors);\r\n            Undergraduate s3 = new Undergraduate(100120, &quot;Alice&quot;, &quot;17/06/1973&quot;, &quot;a120@uni.edu.au&quot;,\r\n                    &quot;43 Collaery road Russell Vale NSW 2517&quot;, &quot;12345677&quot;, &quot;Bachelor of CS&quot;, majors);\r\n            Undergraduate s4 = new Undergraduate(100150, &quot;Bob&quot;, &quot;02/07/1960&quot;, &quot;a150@uni.edu.au&quot;,\r\n                    &quot;23 Kendall street Wollongong NSW 2500&quot;, &quot;12345688&quot;, &quot;Bachelor of CS&quot;, majors);\r\n            Undergraduate s5 = new Undergraduate(100200, &quot;Carl&quot;, &quot;02/02/1967&quot;, &quot;c200@uni.edu.au&quot;,\r\n                    &quot;44 Mount Keira road West Wollongong NSW 2500&quot;, &quot;21345687&quot;, &quot;Bachelor of IT&quot;, majors);\r\n            Undergraduate s6 = new Undergraduate(100250, &quot;Douglass&quot;, &quot;14/04/1983&quot;, &quot;d250@uni.edu.au&quot;,\r\n                    &quot;78 Uralba street West Wollongong NSW 2500&quot;, &quot;010123456&quot;, &quot;Bachelor of CS&quot;, majors);\r\n            Undergraduate s7 = new Undergraduate(100101, &quot;Peter&quot;, &quot;13/11/1976&quot;, &quot;p101@uni.edu.au&quot;,\r\n                    &quot;77 Gipps road Wollongong NSW 2500&quot;, &quot;0102123456&quot;, &quot;Bachelor of IT&quot;, majors);\r\n            Undergraduate s8 = new Undergraduate(100103, &quot;Ami&quot;, &quot;12/09/1985&quot;, &quot;a103@uni.edu.au&quot;,\r\n                    &quot;51 Mackie street Coniston NSW 2500&quot;, &quot;0242211234&quot;, &quot;Bachelor of IT&quot;, majors);\r\n            Postgraduate s9 = new Postgraduate(100107, &quot;Wendy&quot;, &quot;12/09/1988&quot;, &quot;w107@uni.edu.au&quot;,\r\n                    &quot;41 Wall street Wollongong NSW 2500&quot;, &quot;0281234567&quot;, &quot;Master of CS&quot;, Type.CourseWork);\r\n            Postgraduate s10 = new Postgraduate(100109, &quot;Michael&quot;, &quot;12/09/1990&quot;, &quot;m109@uni.edu.au&quot;,\r\n                    &quot;112 Smith road Wollongong NSW 2500&quot;, &quot;0242201234&quot;, &quot;Master of CS&quot;, Type.CourseWork);\r\n            Postgraduate s11 = new Postgraduate(100125, &quot;Angela&quot;, &quot;20/11/1990&quot;, &quot;a125@uni.edu.au&quot;,\r\n                    &quot;23 Gibsons road Figtree NSW 2525&quot;, &quot;0201123456&quot;, &quot;Master of IT&quot;, Type.CourseWork);\r\n            Postgraduate s12 = new Postgraduate(100105, &quot;Robert&quot;, &quot;15/01/1986&quot;, &quot;r105@uni.edu.au&quot;,\r\n                    &quot;66 Risely road Figtree NSW 2525&quot;, &quot;0202213123&quot;, &quot;Master of IT&quot;, Type.CourseWork);\r\n            Postgraduate s13 = new Postgraduate(100136, &quot;Aban&quot;, &quot;15/01/1990&quot;, &quot;a136@uni.edu.au&quot;,\r\n                    &quot;187 Princes Highway Wollongong NSW 2500&quot;, &quot;0103123456&quot;, &quot;Bachelor of IT&quot;, Type.Reserch);\r\n            Postgraduate s14 = new Postgraduate(100187, &quot;Eadger&quot;, &quot;07/04/1986&quot;, &quot;e187@uni.edu.au&quot;,\r\n                    &quot;73 Ocean street Wollongong NSW 2500&quot;, &quot;0104123321&quot;, &quot;Master of Philosophy&quot;, Type.Reserch);\r\n            students.add(s1);\r\n            students.add(s2);\r\n            students.add(s3);\r\n            students.add(s4);\r\n            students.add(s5);\r\n            students.add(s6);\r\n            students.add(s7);\r\n            students.add(s8);\r\n            students.add(s9);\r\n            students.add(s10);\r\n            students.add(s11);\r\n            students.add(s12);\r\n            students.add(s13);\r\n            students.add(s14);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n```","title":"multiple validity checks within a double loop and switch case","body":"<p><strong>NOTE:</strong></p>\n<p><strong>I can't use any advanced methods or features java might have to solve this. I'm limited to whatever's in the code mostly and I'm aware the code could be shorter and cleaner but for me, as a beginner the shorter the code is the harder for me to understand hence the reason so many methods and non-advanced for loops, etc...</strong></p>\n<p>For my <code>newEnrolment()</code> method I figured out how to go with the double loop to loop for what I needed which was &quot;finding a specific attribute from an object from a list of objects in an array e.g students, subjects, enrolments&quot;</p>\n<p>now the next thing is validity check in which I am supposed to create a new enrolment which takes a student number and subject code from user checks against the attributes of those objects from the ArrayList and only enroll them if the student no and subject code already exists in the ArrayList's objects attributes... I know I'm making it complicated cause I don't know any other way to explain that's why I added my whole class...</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i=0 ; i&lt;subjects.size() ; i++){\n            if (subjects.get(i).getCode().equals(newsub) )\n            {\n                enrolments.add(enrolment1);\n                System.out.println(&quot;A new enrolment for the student &quot;+newstu+&quot; on the subject &quot;+newsub+&quot; has been \\n&quot; +\n                        &quot;added to the list.&quot;);\n            }\n            else if (i == subjects.size()-1)\n            {\n                System.out.println(&quot;Invalid subject code&quot;);\n            }\n        }\n</code></pre>\n<p>This loop does the validity check for subjects or for students but doesn't work for both because both have different amounts of values in their ArrayList.</p>\n<p>Here I tried putting both my required conditions inside the if() statement but the outer loop can only take its conditions from one ArrayList so I'm stuck  at this</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i=0 ; i&lt;subjects.size() ; i++){\n            if (subjects.get(i).getCode().equals(newsub) &amp;&amp; students.get(i).getNumber() == newstu) \n            {\n                enrolments.add(enrolment1);\n                System.out.println(&quot;A new enrolment for the student &quot;+newstu+&quot; on the subject &quot;+newsub+&quot; has been \\n&quot; +\n                        &quot;added to the list.&quot;);\n            }\n            else if (i == subjects.size()-1)\n            {\n                System.out.println(&quot;Invalid subject code&quot;);\n            }\n        }\n</code></pre>\n<p>I have the same issue in switch() statement where i want to do sth like if the user inputs something other than 1-8 it says &quot;input invalid&quot; but again not sure what kinda statemnet to attach with switch() to make it work.</p>\n<p>Been stuck on this for a while now tried variations of loops i could think of no luck yet</p>\n<p><strong>So two questions</strong></p>\n<p><em>One :</em> is regarding the validity check of both inputs while doing exactly what the for loop is doing now</p>\n<p><em>Two :</em> using validity check on switch() incase user input isn't 1-8</p>\n<p>Here is the code of my Main class so far Everythink works fine except the problem i mentioned with validity check</p>\n<p>THANKS HEAPS!!!</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.sql.Array;\nimport java.util.ArrayList;\nimport java.util.Scanner;\nimport java.lang.*;\npublic class StudentEnrolmentSystem {\n    private ArrayList&lt;Student&gt; students;\n    private ArrayList&lt;Subject&gt; subjects;\n    private ArrayList&lt;Enrolment&gt; enrolments;\n\n    public StudentEnrolmentSystem() {\n        students = new ArrayList&lt;Student&gt;();\n        subjects = new ArrayList&lt;Subject&gt;();\n        enrolments = new ArrayList&lt;Enrolment&gt;();\n    }\n\n    public static void main(String[] args) {\n\n        StudentEnrolmentSystem ses = new StudentEnrolmentSystem();\n        ses.data();\n        while (true) {\n            ses.displaymenu();\n        }\n\n    }\n\n    public void displaySTU() {\n        for (int i = 0; i &lt; students.size(); i++) {\n            System.out.println(students.get(i).toString());\n        }\n    }\n\n    public void displaySUB() {\n        for (int i = 0; i &lt; subjects.size(); i++) {\n            System.out.println(subjects.get(i).toString());\n        }\n    }\n\n    public void displayENR() {\n        for (int i = 0; i &lt; enrolments.size(); i++) {\n            System.out.println(enrolments.get(i).toString());\n        }\n    }\n\n    public void searchSTU() {\n        Scanner Input = new Scanner(System.in);\n        System.out.println(&quot;Enter Student number :&quot;);\n        int input = Input.nextInt();\n        for (int i = 0; i &lt; students.size(); i++) {\n            if (students.get(i).getNumber() == input) {\n                System.out.println(students.get(i).toString());\n            }\n        }\n    }\n        public void searchSUB(){\n            Scanner Input = new Scanner(System.in);\n            System.out.println(&quot;Enter Subject code :&quot;);\n            String input = Input.nextLine();\n            for (int i=0 ; i&lt;subjects.size() ; i++){\n                if (subjects.get(i).getCode().equals(input)){\n                    System.out.println(subjects.get(i).toString());\n                }\n            }\n\n    }\n    public void findEnrolment(){\n        Scanner Input = new Scanner(System.in);\n        System.out.println(&quot;Enter Student number :&quot;);\n        int input = Input.nextInt();\n        for (int i = 0; i &lt; enrolments.size(); i++) {\n            if (enrolments.get(i).getNumber() == input) {\n                System.out.println(enrolments.get(i).toString());\n            }\n        }\n    }\n\n    public void newEnrolment(){\n        Scanner Input = new Scanner(System.in);\n        System.out.println(&quot;Input a student number:&quot;);\n        int newstu = Input.nextInt();\n        Scanner Input2 = new Scanner(System.in);\n        System.out.println(&quot;Input a subject code:&quot;);\n        String newsub = Input2.nextLine();\n        Enrolment enrolment1 = new Enrolment(newstu,newsub,&quot;26/07/2022&quot;);\n\n       for (int i=0 ; i&lt;subjects.size() ; i++){\n            if (subjects.get(i).getCode().equals(newsub) )\n            {\n                enrolments.add(enrolment1);\n                System.out.println(&quot;A new enrolment for the student &quot;+newstu+&quot; on the subject &quot;+newsub+&quot; has been \\n&quot; +\n                        &quot;added to the list.&quot;);\n            }\n            else if (i == subjects.size()-1)\n            {\n                System.out.println(&quot;Invalid subject code&quot;);\n            }\n        }\n    }\n        public void displaymenu(){\n            Scanner Input = new Scanner(System.in);\n\n            System.out.println(&quot;1. Display all students&quot;);\n            System.out.println(&quot;2. Display all subjects&quot;);\n            System.out.println(&quot;3. Display all enrolments&quot;);\n            System.out.println(&quot;4. Find a student&quot;);\n            System.out.println(&quot;5. Find a subject&quot;);\n            System.out.println(&quot;6. Find a student's enrolments&quot;);\n            System.out.println(&quot;7. Add an enrolment&quot;);\n            System.out.println(&quot;8. Exit&quot;);\n            int input = Input.nextInt();\n\n            switch (input) {\n                case 1:\n                    displaySTU();\n                    break;\n                case 2:\n                    displaySUB();\n                    break;\n                case 3:\n                    displayENR();\n                    break;\n                case 4:\n                    searchSTU();\n                    break;\n                case 5:\n                    searchSUB();\n                    break;\n                case 6:\n                    findEnrolment();\n                    break;\n                case 7:\n                    newEnrolment();\n                    break;\n                case 8:\n                    System.exit(-1);\n                    break;\n\n            }\n        }\n        public void data () {\n\n            Subject CSCI213 = new Subject(&quot;CSCI213&quot;, &quot;Java Programming &amp; Object Oriented Design&quot;, 6,\n                    &quot;This subject provides an introduction to the Java language and some of its standard &quot; +\n                            &quot;class libraries, you will have experience with object oriented design &quot; +\n                            &quot;and implementation techniques&quot;,\n                    &quot;CSCI124 or CSCI121 or CSCI192&quot;, 3, 2);\n            Subject CSCI124 = new Subject(&quot;CSCI124&quot;, &quot;Applied Programming&quot;, 6,\n                    &quot;This subject develops a thorough understanding of program design using data structures. &quot; +\n                            &quot;It extends CSCI114 and presents pointers, dynamic memory management and exception handling&quot;,\n                    &quot;CSCI114 &amp; CSCI103 or CSCI111 &amp; CSCI103&quot;, 4, 2);\n            Subject CSCI235 = new Subject(&quot;CSCI235&quot;, &quot;Database system&quot;, 6,\n                    &quot;This subject investigates three major areas of modern database systems:&quot; +\n                            &quot; 1. design of relational databases 2. programming of relational databases&quot;,\n                    &quot;CSIT115&quot;, 3, 2);\n            Subject CSIT115 = new Subject(&quot;CSIT115&quot;, &quot;Data management and security&quot;, 6,\n                    &quot;The subject investigates three major areas of modern data management systems:&quot; +\n                            &quot; data modelling, data processing, and data security.&quot;,\n                    &quot;&quot;, 2, 2);\n            Subject CSIT111 = new Subject(&quot;CSIT111&quot;, &quot;Programming Fundamentals&quot;, 6,\n                    &quot;The broad aim of this subject is to develop in students an understanding &quot; +\n                            &quot;of the fundamental principles of programming.&quot;,\n                    &quot;&quot;, 2, 2);\n            Subject CSIT121 = new Subject(&quot;CSIT121&quot;, &quot;Object oriented design and programming&quot;, 6,\n                    &quot;The aims of this subject are to consolidate and extend student's knowledge and skills&quot; +\n                            &quot; in structured programming and to develop their understanding and &quot; +\n                            &quot;practice of object oriented programming.&quot;,\n                    &quot;CSIT111 OR ENGG100&quot;, 2, 2);\n            Subject CSCI251 = new Subject(&quot;CSCI251&quot;, &quot;Advanced programming&quot;, 6,\n                    &quot;This subject develops a thorough understanding of advanced programming features, &quot; +\n                            &quot;and how to implement them in modern C++.&quot;,\n                    &quot;CSIT121&quot;, 3, 2);\n            subjects.add(CSCI213);\n            subjects.add(CSCI124);\n            subjects.add(CSCI235);\n            subjects.add(CSIT115);\n            subjects.add(CSIT111);\n            subjects.add(CSIT121);\n            subjects.add(CSCI251);\n\n            ArrayList&lt;String&gt; majors = new ArrayList&lt;String&gt;();\n            majors.add(&quot;Artificial Intelligence and Bing Data&quot;);\n            majors.add(&quot;Cyber Security&quot;);\n\n            Undergraduate s1 = new Undergraduate(100100, &quot;Albert&quot;, &quot;13/10/1965&quot;, &quot;a100@uni.edu.au&quot;,\n                    &quot;12 Robert street Woonona NSW 2517&quot;, &quot;12345678&quot;, &quot;Bachelor of CS&quot;, majors);\n            Undergraduate s2 = new Undergraduate(100110, &quot;Alvin&quot;, &quot;13/10/1977&quot;, &quot;a110@uni.edu.au&quot;,\n                    &quot;56 Marlo road Wollongong NSW 2500&quot;, &quot;11223344&quot;, &quot;Bachelor of CS&quot;, majors);\n            Undergraduate s3 = new Undergraduate(100120, &quot;Alice&quot;, &quot;17/06/1973&quot;, &quot;a120@uni.edu.au&quot;,\n                    &quot;43 Collaery road Russell Vale NSW 2517&quot;, &quot;12345677&quot;, &quot;Bachelor of CS&quot;, majors);\n            Undergraduate s4 = new Undergraduate(100150, &quot;Bob&quot;, &quot;02/07/1960&quot;, &quot;a150@uni.edu.au&quot;,\n                    &quot;23 Kendall street Wollongong NSW 2500&quot;, &quot;12345688&quot;, &quot;Bachelor of CS&quot;, majors);\n            Undergraduate s5 = new Undergraduate(100200, &quot;Carl&quot;, &quot;02/02/1967&quot;, &quot;c200@uni.edu.au&quot;,\n                    &quot;44 Mount Keira road West Wollongong NSW 2500&quot;, &quot;21345687&quot;, &quot;Bachelor of IT&quot;, majors);\n            Undergraduate s6 = new Undergraduate(100250, &quot;Douglass&quot;, &quot;14/04/1983&quot;, &quot;d250@uni.edu.au&quot;,\n                    &quot;78 Uralba street West Wollongong NSW 2500&quot;, &quot;010123456&quot;, &quot;Bachelor of CS&quot;, majors);\n            Undergraduate s7 = new Undergraduate(100101, &quot;Peter&quot;, &quot;13/11/1976&quot;, &quot;p101@uni.edu.au&quot;,\n                    &quot;77 Gipps road Wollongong NSW 2500&quot;, &quot;0102123456&quot;, &quot;Bachelor of IT&quot;, majors);\n            Undergraduate s8 = new Undergraduate(100103, &quot;Ami&quot;, &quot;12/09/1985&quot;, &quot;a103@uni.edu.au&quot;,\n                    &quot;51 Mackie street Coniston NSW 2500&quot;, &quot;0242211234&quot;, &quot;Bachelor of IT&quot;, majors);\n            Postgraduate s9 = new Postgraduate(100107, &quot;Wendy&quot;, &quot;12/09/1988&quot;, &quot;w107@uni.edu.au&quot;,\n                    &quot;41 Wall street Wollongong NSW 2500&quot;, &quot;0281234567&quot;, &quot;Master of CS&quot;, Type.CourseWork);\n            Postgraduate s10 = new Postgraduate(100109, &quot;Michael&quot;, &quot;12/09/1990&quot;, &quot;m109@uni.edu.au&quot;,\n                    &quot;112 Smith road Wollongong NSW 2500&quot;, &quot;0242201234&quot;, &quot;Master of CS&quot;, Type.CourseWork);\n            Postgraduate s11 = new Postgraduate(100125, &quot;Angela&quot;, &quot;20/11/1990&quot;, &quot;a125@uni.edu.au&quot;,\n                    &quot;23 Gibsons road Figtree NSW 2525&quot;, &quot;0201123456&quot;, &quot;Master of IT&quot;, Type.CourseWork);\n            Postgraduate s12 = new Postgraduate(100105, &quot;Robert&quot;, &quot;15/01/1986&quot;, &quot;r105@uni.edu.au&quot;,\n                    &quot;66 Risely road Figtree NSW 2525&quot;, &quot;0202213123&quot;, &quot;Master of IT&quot;, Type.CourseWork);\n            Postgraduate s13 = new Postgraduate(100136, &quot;Aban&quot;, &quot;15/01/1990&quot;, &quot;a136@uni.edu.au&quot;,\n                    &quot;187 Princes Highway Wollongong NSW 2500&quot;, &quot;0103123456&quot;, &quot;Bachelor of IT&quot;, Type.Reserch);\n            Postgraduate s14 = new Postgraduate(100187, &quot;Eadger&quot;, &quot;07/04/1986&quot;, &quot;e187@uni.edu.au&quot;,\n                    &quot;73 Ocean street Wollongong NSW 2500&quot;, &quot;0104123321&quot;, &quot;Master of Philosophy&quot;, Type.Reserch);\n            students.add(s1);\n            students.add(s2);\n            students.add(s3);\n            students.add(s4);\n            students.add(s5);\n            students.add(s6);\n            students.add(s7);\n            students.add(s8);\n            students.add(s9);\n            students.add(s10);\n            students.add(s11);\n            students.add(s12);\n            students.add(s13);\n            students.add(s14);\n\n        }\n\n\n    }\n\n</code></pre>\n"},{"tags":["java","opencv"],"comments":[{"owner":{"account_id":24765622,"reputation":1118,"user_id":18649495,"display_name":"Fed_Dragon"},"score":0,"creation_date":1660759579,"post_id":73392407,"comment_id":129610992,"body_markdown":"Alright I figured it out, I need to add `D:\\opencv\\build\\bin` to vmoptions","body":"Alright I figured it out, I need to add <code>D:\\opencv\\build\\bin</code> to vmoptions"}],"owner":{"account_id":24765622,"reputation":1118,"user_id":18649495,"display_name":"Fed_Dragon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660755892,"creation_date":1660755892,"question_id":73392407,"body_markdown":"So I have a RTMP server set up at `127.0.0.1:1935`, my program works just fine with local videos, but it won&#39;t fetch a frame from the live stream\r\n```java\r\nimport org.opencv.core.Core;\r\nimport org.opencv.core.Mat;\r\nimport org.opencv.videoio.VideoCapture;\r\n\r\nclass Scratch {\r\n    public static void main(String[] args) {\r\n        System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\r\n\r\n        VideoCapture fromUrl = new VideoCapture(&quot;rtmp://127.0.0.1:1935/live/test001&quot;);\r\n        Mat image = new Mat();\r\n\r\n        System.out.println(fromUrl.read(image)); // Always false\r\n\r\n\r\n        VideoCapture local = new VideoCapture(&quot;D:\\\\a.mp4&quot;);\r\n        System.out.println(local.read(image));  // Always true\r\n\r\n    }\r\n}\r\n```\r\n\r\nIf I rewrite the same code in python, it just works:\r\n```py\r\nimport cv2\r\n\r\ncap = cv2.VideoCapture(&quot;rtmp://127.0.0.1:1935/live/test001&quot;)\r\nerr, frame = cap.read()\r\nprint(frame.shape, frame)\r\n```\r\n```\r\n(1080, 1920, 3)\r\n[[[33 29 32]\r\n  [33 29 32]\r\n  [33 29 32]\r\n  ...\r\n  [28 31 31]\r\n  [27 30 30]\r\n  [28 31 31]]]\r\n[flv @ 000001dc17742d40] unsupported amf type 17\r\n```\r\n\r\nHere is what I get when I use `Core.getBuildInformation()` (removed redundant imformation) \r\n```\r\nGeneral configuration for OpenCV 4.6.0 =====================================\r\n  Version control:               4.6.0\r\n\r\n  Platform:\r\n    Timestamp:                   2022-06-05T15:49:50Z\r\n    Host:                        Windows 10.0.16299 AMD64\r\n    CMake:                       3.20.21032501-MSVC_2\r\n    CMake generator:             Visual Studio 14 2015 Win64\r\n    CMake build tool:            MSBuild.exe\r\n    MSVC:                        1900\r\n    Configuration:               Debug Release\r\n\r\n  CPU/HW features:\r\n    Baseline:                    SSE SSE2 SSE3\r\n      requested:                 SSE3\r\n    Dispatched code generation:  SSE4_1 SSE4_2 FP16 AVX AVX2\r\n      requested:                 SSE4_1 SSE4_2 AVX FP16 AVX2 AVX512_SKX\r\n      SSE4_1 (16 files):         + SSSE3 SSE4_1\r\n      SSE4_2 (1 files):          + SSSE3 SSE4_1 POPCNT SSE4_2\r\n      FP16 (0 files):            + SSSE3 SSE4_1 POPCNT SSE4_2 FP16 AVX\r\n      AVX (4 files):             + SSSE3 SSE4_1 POPCNT SSE4_2 AVX\r\n      AVX2 (31 files):           + SSSE3 SSE4_1 POPCNT SSE4_2 FP16 FMA3 AVX AVX2\r\n\r\nOpenCV modules:\r\n    To be built:                 calib3d core dnn features2d flann gapi highgui imgcodecs imgproc java ml objdetect photo python2 stitching video videoio\r\n    Disabled:                    python3 world\r\n    Disabled by dependency:      -\r\n    Unavailable:                 ts\r\n    Applications:                apps\r\n    Documentation:               NO\r\n    Non-free algorithms:         NO\r\n\r\n  Windows RT support:            NO\r\n\r\n  GUI:                           WIN32UI\r\n    Win32 UI:                    YES\r\n    VTK support:                 NO\r\n\r\n  Media I/O: \r\n    ZLib:                        build (ver 1.2.12)\r\n    JPEG:                        build-libjpeg-turbo (ver 2.1.2-62)\r\n    WEBP:                        build (ver encoder: 0x020f)\r\n    PNG:                         build (ver 1.6.37)\r\n    TIFF:                        build (ver 42 - 4.2.0)\r\n    JPEG 2000:                   build (ver 2.4.0)\r\n    OpenEXR:                     build (ver 2.3.0)\r\n    HDR:                         YES\r\n    SUNRASTER:                   YES\r\n    PXM:                         YES\r\n    PFM:                         YES\r\n\r\n  Video I/O:\r\n    DC1394:                      NO\r\n    FFMPEG:                      YES (prebuilt binaries)\r\n      avcodec:                   YES (58.134.100)\r\n      avformat:                  YES (58.76.100)\r\n      avutil:                    YES (56.70.100)\r\n      swscale:                   YES (5.9.100)\r\n      avresample:                YES (4.0.0)\r\n    GStreamer:                   NO\r\n    DirectShow:                  YES\r\n    Media Foundation:            YES\r\n      DXVA:                      NO\r\n\r\n  Parallel framework:            Concurrency\r\n\r\n  Trace:                         YES (with Intel ITT)\r\n\r\nOther third-party libraries:\r\n    Intel IPP:                   2020.0.0 Gold [2020.0.0]\r\n           at:                   C:/build/master_winpack-bindings-win64-vc14-static/build/3rdparty/ippicv/ippicv_win/icv\r\n    Intel IPP IW:                sources (2020.0.0)\r\n              at:                C:/build/master_winpack-bindings-win64-vc14-static/build/3rdparty/ippicv/ippicv_win/iw\r\n    Eigen:                       NO\r\n    Custom HAL:                  NO\r\n    Protobuf:                    build (3.19.1)\r\n\r\n  OpenCL:                        YES (NVD3D11)\r\n    Include path:                C:/build/master_winpack-bindings-win64-vc14-static/opencv/3rdparty/include/opencl/1.2\r\n    Link libraries:              Dynamic load\r\n\r\nJava:                          \r\n    ant:                         C:/utils/soft/apache-ant-1.10.12/bin/ant.bat (ver 1.10.12)\r\n    JNI:                         C:/utils/soft/jdk1.8.0_333/include C:/utils/soft/jdk1.8.0_333/include/win32 C:/utils/soft/jdk1.8.0_333/include\r\n    Java wrappers:               YES\r\n    Java tests:                  NO\r\n\r\n  Install to:                    C:/build/master_winpack-bindings-win64-vc14-static/install\r\n-----------------------------------------------------------------\r\n\r\n```\r\n\r\nClasspath:\r\n```\r\n...\r\nD:\\FFmpeg\\bin\r\nD:\\opencv\\build\\bin\r\n```\r\n\r\nVLC can watch the stream normally, too.\r\n\r\nSo I have 2 questions:\r\n1. How can I make it capture the frame?\r\n2. What can I do with `[flv @ 000001dc17742d40] unsupported amf type 17`?\r\n\r\nThank you so much!\r\n\r\n","title":"OpenCV java - VideoCapture.read from a url always returns false","body":"<p>So I have a RTMP server set up at <code>127.0.0.1:1935</code>, my program works just fine with local videos, but it won't fetch a frame from the live stream</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.opencv.core.Core;\nimport org.opencv.core.Mat;\nimport org.opencv.videoio.VideoCapture;\n\nclass Scratch {\n    public static void main(String[] args) {\n        System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\n\n        VideoCapture fromUrl = new VideoCapture(&quot;rtmp://127.0.0.1:1935/live/test001&quot;);\n        Mat image = new Mat();\n\n        System.out.println(fromUrl.read(image)); // Always false\n\n\n        VideoCapture local = new VideoCapture(&quot;D:\\\\a.mp4&quot;);\n        System.out.println(local.read(image));  // Always true\n\n    }\n}\n</code></pre>\n<p>If I rewrite the same code in python, it just works:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import cv2\n\ncap = cv2.VideoCapture(&quot;rtmp://127.0.0.1:1935/live/test001&quot;)\nerr, frame = cap.read()\nprint(frame.shape, frame)\n</code></pre>\n<pre><code>(1080, 1920, 3)\n[[[33 29 32]\n  [33 29 32]\n  [33 29 32]\n  ...\n  [28 31 31]\n  [27 30 30]\n  [28 31 31]]]\n[flv @ 000001dc17742d40] unsupported amf type 17\n</code></pre>\n<p>Here is what I get when I use <code>Core.getBuildInformation()</code> (removed redundant imformation)</p>\n<pre><code>General configuration for OpenCV 4.6.0 =====================================\n  Version control:               4.6.0\n\n  Platform:\n    Timestamp:                   2022-06-05T15:49:50Z\n    Host:                        Windows 10.0.16299 AMD64\n    CMake:                       3.20.21032501-MSVC_2\n    CMake generator:             Visual Studio 14 2015 Win64\n    CMake build tool:            MSBuild.exe\n    MSVC:                        1900\n    Configuration:               Debug Release\n\n  CPU/HW features:\n    Baseline:                    SSE SSE2 SSE3\n      requested:                 SSE3\n    Dispatched code generation:  SSE4_1 SSE4_2 FP16 AVX AVX2\n      requested:                 SSE4_1 SSE4_2 AVX FP16 AVX2 AVX512_SKX\n      SSE4_1 (16 files):         + SSSE3 SSE4_1\n      SSE4_2 (1 files):          + SSSE3 SSE4_1 POPCNT SSE4_2\n      FP16 (0 files):            + SSSE3 SSE4_1 POPCNT SSE4_2 FP16 AVX\n      AVX (4 files):             + SSSE3 SSE4_1 POPCNT SSE4_2 AVX\n      AVX2 (31 files):           + SSSE3 SSE4_1 POPCNT SSE4_2 FP16 FMA3 AVX AVX2\n\nOpenCV modules:\n    To be built:                 calib3d core dnn features2d flann gapi highgui imgcodecs imgproc java ml objdetect photo python2 stitching video videoio\n    Disabled:                    python3 world\n    Disabled by dependency:      -\n    Unavailable:                 ts\n    Applications:                apps\n    Documentation:               NO\n    Non-free algorithms:         NO\n\n  Windows RT support:            NO\n\n  GUI:                           WIN32UI\n    Win32 UI:                    YES\n    VTK support:                 NO\n\n  Media I/O: \n    ZLib:                        build (ver 1.2.12)\n    JPEG:                        build-libjpeg-turbo (ver 2.1.2-62)\n    WEBP:                        build (ver encoder: 0x020f)\n    PNG:                         build (ver 1.6.37)\n    TIFF:                        build (ver 42 - 4.2.0)\n    JPEG 2000:                   build (ver 2.4.0)\n    OpenEXR:                     build (ver 2.3.0)\n    HDR:                         YES\n    SUNRASTER:                   YES\n    PXM:                         YES\n    PFM:                         YES\n\n  Video I/O:\n    DC1394:                      NO\n    FFMPEG:                      YES (prebuilt binaries)\n      avcodec:                   YES (58.134.100)\n      avformat:                  YES (58.76.100)\n      avutil:                    YES (56.70.100)\n      swscale:                   YES (5.9.100)\n      avresample:                YES (4.0.0)\n    GStreamer:                   NO\n    DirectShow:                  YES\n    Media Foundation:            YES\n      DXVA:                      NO\n\n  Parallel framework:            Concurrency\n\n  Trace:                         YES (with Intel ITT)\n\nOther third-party libraries:\n    Intel IPP:                   2020.0.0 Gold [2020.0.0]\n           at:                   C:/build/master_winpack-bindings-win64-vc14-static/build/3rdparty/ippicv/ippicv_win/icv\n    Intel IPP IW:                sources (2020.0.0)\n              at:                C:/build/master_winpack-bindings-win64-vc14-static/build/3rdparty/ippicv/ippicv_win/iw\n    Eigen:                       NO\n    Custom HAL:                  NO\n    Protobuf:                    build (3.19.1)\n\n  OpenCL:                        YES (NVD3D11)\n    Include path:                C:/build/master_winpack-bindings-win64-vc14-static/opencv/3rdparty/include/opencl/1.2\n    Link libraries:              Dynamic load\n\nJava:                          \n    ant:                         C:/utils/soft/apache-ant-1.10.12/bin/ant.bat (ver 1.10.12)\n    JNI:                         C:/utils/soft/jdk1.8.0_333/include C:/utils/soft/jdk1.8.0_333/include/win32 C:/utils/soft/jdk1.8.0_333/include\n    Java wrappers:               YES\n    Java tests:                  NO\n\n  Install to:                    C:/build/master_winpack-bindings-win64-vc14-static/install\n-----------------------------------------------------------------\n\n</code></pre>\n<p>Classpath:</p>\n<pre><code>...\nD:\\FFmpeg\\bin\nD:\\opencv\\build\\bin\n</code></pre>\n<p>VLC can watch the stream normally, too.</p>\n<p>So I have 2 questions:</p>\n<ol>\n<li>How can I make it capture the frame?</li>\n<li>What can I do with <code>[flv @ 000001dc17742d40] unsupported amf type 17</code>?</li>\n</ol>\n<p>Thank you so much!</p>\n"},{"tags":["java","iso","iso8583","j8583"],"answers":[{"tags":[],"owner":{"account_id":8715119,"reputation":21,"user_id":6561465,"accept_rate":71,"display_name":"Green - 4"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660755848,"creation_date":1660755848,"answer_id":73392398,"question_id":73339960,"body_markdown":"i found the mistake, the iso message works fine, my error was the debugString metod, i called a IsoMessageFieldUtils instance of IsoMessage.debugString\r\n\r\nRegards!! ","title":"LLLLVAR not working on j8583 library usage","body":"<p>i found the mistake, the iso message works fine, my error was the debugString metod, i called a IsoMessageFieldUtils instance of IsoMessage.debugString</p>\n<p>Regards!!</p>\n"}],"owner":{"account_id":8715119,"reputation":21,"user_id":6561465,"accept_rate":71,"display_name":"Green - 4"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73392398,"answer_count":1,"score":0,"last_activity_date":1660755848,"creation_date":1660339823,"question_id":73339960,"body_markdown":"I&#39;m doing an implementation of iso messages with j8583 library (v1.17.0) for an integration with a bank, in the documentation says a possibility to create fields with IsoType.LLLLVAR format: \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wZVpK.png\r\n\r\n\r\nMy xml config over field 60 is next for 0800 message\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE j8583-config PUBLIC &quot;-//J8583//DTD CONFIG 1.0//EN&quot; &quot;j8583.dtd&quot;&gt;\r\n    &lt;j8583-config&gt;\r\n\r\n        &lt;!-- These are the ISO headers to be prepended to the message types specified --&gt;\r\n        &lt;header type=&quot;0100&quot;&gt;6000050000&lt;/header&gt;\r\n        &lt;header type=&quot;0110&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n        &lt;header type=&quot;0200&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n        &lt;header type=&quot;0210&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n        &lt;header type=&quot;0220&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n        &lt;header type=&quot;0230&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n        &lt;header type=&quot;0500&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n        &lt;header type=&quot;0510&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n        &lt;header type=&quot;0400&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n        &lt;header type=&quot;0410&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n        &lt;header type=&quot;0800&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n        &lt;header type=&quot;0810&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\r\n\r\n        &lt;template type=&quot;0800&quot;&gt;\r\n                &lt;field num=&quot;3&quot; type=&quot;NUMERIC&quot; length=&quot;6&quot;&gt;990000&lt;/field&gt;\r\n                &lt;field num=&quot;7&quot; type=&quot;DATE10&quot;&gt;0812215323&lt;/field&gt;\r\n                &lt;field num=&quot;11&quot; type=&quot;NUMERIC&quot; length=&quot;6&quot;&gt;000001&lt;/field&gt;\r\n                &lt;field num=&quot;24&quot; type=&quot;NUMERIC&quot; length=&quot;3&quot;&gt;112&lt;/field&gt;\r\n                &lt;field num=&quot;41&quot; type=&quot;ALPHA&quot; length=&quot;8&quot;&gt;37323330&lt;/field&gt;\r\n                &lt;field num=&quot;42&quot; type=&quot;ALPHA&quot; length=&quot;15&quot;&gt;303336353933303&lt;/field&gt;\r\n                &lt;field num=&quot;60&quot; type=&quot;LLLLVAR&quot; &gt;VERSION_SOFT&lt;/field&gt;\r\n        &lt;/template&gt;\r\n        &lt;parse type=&quot;0800&quot;&gt;\r\n            &lt;field num=&quot;3&quot; type=&quot;NUMERIC&quot; length=&quot;6&quot; /&gt;\r\n            &lt;field num=&quot;7&quot; type=&quot;DATE10&quot; /&gt;\r\n            &lt;field num=&quot;11&quot; type=&quot;NUMERIC&quot; length=&quot;6&quot; /&gt;\r\n            &lt;field num=&quot;24&quot; type=&quot;NUMERIC&quot; length=&quot;3&quot; /&gt;\r\n            &lt;field num=&quot;41&quot; type=&quot;ALPHA&quot; length=&quot;8&quot; /&gt;\r\n            &lt;field num=&quot;42&quot; type=&quot;ALPHA&quot; length=&quot;15&quot; /&gt;\r\n            &lt;field num=&quot;60&quot; type=&quot;LLLLVAR&quot; length=&quot;999&quot; /&gt;\r\n        &lt;/parse&gt;\r\n    &lt;/j8583-config&gt;\r\n\r\nMy factory loads the xml file from resources:\r\n\r\n    this.messageFactory = ConfigParser.createFromClasspathConfig(&quot;j8583-config.xml&quot;);\r\n\r\nI created a 0800 message iso\r\n\r\n    final IsoMessage req = this.messageFactory.newMessage(NET_INFO_REQUEST.getValue());\r\n\r\nMy debugString print:\r\n\r\n    600005000008002220010000C00010990000081221183100000111237323330303336353933303VERSION_SOFT\r\n\r\nIn the message not print the length, i understand that it should have the following format over field 60:\r\n\r\n    0012VERSION_SOFT\r\n\r\nBut only print:\r\n\r\n    VERSION_SOFT\r\n\r\n\r\nA courious thing is if use IsoType.LLLVAR works fine over field 60:\r\n\r\n    600005000008002220010000C00010990000081221494800000111237323330303336353933303012VERSION_SOFT\r\n\r\nSee: \r\n\r\n    012VERSION_SOFT\r\n\r\nAny idea?\r\n\r\nThanks!","title":"LLLLVAR not working on j8583 library usage","body":"<p>I'm doing an implementation of iso messages with j8583 library (v1.17.0) for an integration with a bank, in the documentation says a possibility to create fields with IsoType.LLLLVAR format:</p>\n<p><a href=\"https://i.stack.imgur.com/wZVpK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wZVpK.png\" alt=\"enter image description here\" /></a></p>\n<p>My xml config over field 60 is next for 0800 message</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE j8583-config PUBLIC &quot;-//J8583//DTD CONFIG 1.0//EN&quot; &quot;j8583.dtd&quot;&gt;\n&lt;j8583-config&gt;\n\n    &lt;!-- These are the ISO headers to be prepended to the message types specified --&gt;\n    &lt;header type=&quot;0100&quot;&gt;6000050000&lt;/header&gt;\n    &lt;header type=&quot;0110&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n    &lt;header type=&quot;0200&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n    &lt;header type=&quot;0210&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n    &lt;header type=&quot;0220&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n    &lt;header type=&quot;0230&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n    &lt;header type=&quot;0500&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n    &lt;header type=&quot;0510&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n    &lt;header type=&quot;0400&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n    &lt;header type=&quot;0410&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n    &lt;header type=&quot;0800&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n    &lt;header type=&quot;0810&quot; ref=&quot;0100&quot;&gt;&lt;/header&gt;\n\n    &lt;template type=&quot;0800&quot;&gt;\n            &lt;field num=&quot;3&quot; type=&quot;NUMERIC&quot; length=&quot;6&quot;&gt;990000&lt;/field&gt;\n            &lt;field num=&quot;7&quot; type=&quot;DATE10&quot;&gt;0812215323&lt;/field&gt;\n            &lt;field num=&quot;11&quot; type=&quot;NUMERIC&quot; length=&quot;6&quot;&gt;000001&lt;/field&gt;\n            &lt;field num=&quot;24&quot; type=&quot;NUMERIC&quot; length=&quot;3&quot;&gt;112&lt;/field&gt;\n            &lt;field num=&quot;41&quot; type=&quot;ALPHA&quot; length=&quot;8&quot;&gt;37323330&lt;/field&gt;\n            &lt;field num=&quot;42&quot; type=&quot;ALPHA&quot; length=&quot;15&quot;&gt;303336353933303&lt;/field&gt;\n            &lt;field num=&quot;60&quot; type=&quot;LLLLVAR&quot; &gt;VERSION_SOFT&lt;/field&gt;\n    &lt;/template&gt;\n    &lt;parse type=&quot;0800&quot;&gt;\n        &lt;field num=&quot;3&quot; type=&quot;NUMERIC&quot; length=&quot;6&quot; /&gt;\n        &lt;field num=&quot;7&quot; type=&quot;DATE10&quot; /&gt;\n        &lt;field num=&quot;11&quot; type=&quot;NUMERIC&quot; length=&quot;6&quot; /&gt;\n        &lt;field num=&quot;24&quot; type=&quot;NUMERIC&quot; length=&quot;3&quot; /&gt;\n        &lt;field num=&quot;41&quot; type=&quot;ALPHA&quot; length=&quot;8&quot; /&gt;\n        &lt;field num=&quot;42&quot; type=&quot;ALPHA&quot; length=&quot;15&quot; /&gt;\n        &lt;field num=&quot;60&quot; type=&quot;LLLLVAR&quot; length=&quot;999&quot; /&gt;\n    &lt;/parse&gt;\n&lt;/j8583-config&gt;\n</code></pre>\n<p>My factory loads the xml file from resources:</p>\n<pre><code>this.messageFactory = ConfigParser.createFromClasspathConfig(&quot;j8583-config.xml&quot;);\n</code></pre>\n<p>I created a 0800 message iso</p>\n<pre><code>final IsoMessage req = this.messageFactory.newMessage(NET_INFO_REQUEST.getValue());\n</code></pre>\n<p>My debugString print:</p>\n<pre><code>600005000008002220010000C00010990000081221183100000111237323330303336353933303VERSION_SOFT\n</code></pre>\n<p>In the message not print the length, i understand that it should have the following format over field 60:</p>\n<pre><code>0012VERSION_SOFT\n</code></pre>\n<p>But only print:</p>\n<pre><code>VERSION_SOFT\n</code></pre>\n<p>A courious thing is if use IsoType.LLLVAR works fine over field 60:</p>\n<pre><code>600005000008002220010000C00010990000081221494800000111237323330303336353933303012VERSION_SOFT\n</code></pre>\n<p>See:</p>\n<pre><code>012VERSION_SOFT\n</code></pre>\n<p>Any idea?</p>\n<p>Thanks!</p>\n"},{"tags":["java","android","android-studio","android-multidex"],"comments":[{"owner":{"account_id":5781946,"reputation":5687,"user_id":4562287,"accept_rate":43,"display_name":"Vivek Mishra"},"score":0,"creation_date":1660755993,"post_id":73392330,"comment_id":129609778,"body_markdown":"classes that you have highlighted are different. One is f.a. while the one in error log is /e/a","body":"classes that you have highlighted are different. One is f.a. while the one in error log is /e/a"},{"owner":{"account_id":6130840,"reputation":677,"user_id":7793652,"display_name":"Pritam Pawade"},"score":0,"creation_date":1660761789,"post_id":73392330,"comment_id":129611723,"body_markdown":"maybe you messed up with proguard","body":"maybe you messed up with proguard"}],"owner":{"account_id":5028025,"reputation":1643,"user_id":4039204,"display_name":"zhang qinglian"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660755412,"creation_date":1660755412,"question_id":73392330,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aD2hQ.png\r\nLook at the above picture, In my class, the return type of `getADPlayerPresenter()` is `com.miguplayer.player.f.a` but In runtime, the return type of `getADPlayerPresenter()` is  `com.miguplayer.player.e.a`, So the program is crash with exception `&quot;No virtual method getADPlayerPresenter()Lcom/miguplayer/player/e/a;&quot;`\r\n\r\nHas anyone had a similar problem and fix it?","title":"Amazing android runtime issue with multidex?","body":"<p><a href=\"https://i.stack.imgur.com/aD2hQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aD2hQ.png\" alt=\"enter image description here\" /></a></p>\n<p>Look at the above picture, In my class, the return type of <code>getADPlayerPresenter()</code> is <code>com.miguplayer.player.f.a</code> but In runtime, the return type of <code>getADPlayerPresenter()</code> is  <code>com.miguplayer.player.e.a</code>, So the program is crash with exception <code>&quot;No virtual method getADPlayerPresenter()Lcom/miguplayer/player/e/a;&quot;</code></p>\n<p>Has anyone had a similar problem and fix it?</p>\n"},{"tags":["java","jetty","embedded-jetty"],"comments":[{"owner":{"account_id":1580843,"reputation":13479,"user_id":1466267,"accept_rate":91,"display_name":"SpaceTrucker"},"score":0,"creation_date":1432119836,"post_id":30347144,"comment_id":48788117,"body_markdown":"When do you want to shut down the server?","body":"When do you want to shut down the server?"},{"owner":{"account_id":2702906,"reputation":22658,"user_id":2333222,"display_name":"SubOptimal"},"score":0,"creation_date":1432119951,"post_id":30347144,"comment_id":48788190,"body_markdown":"You are looking for `server.stop()`? How and when you will trigger the shutdown?","body":"You are looking for <code>server.stop()</code>? How and when you will trigger the shutdown?"},{"owner":{"account_id":2587959,"reputation":1082,"user_id":2334391,"accept_rate":80,"display_name":"jos"},"score":1,"creation_date":1432120617,"post_id":30347144,"comment_id":48788609,"body_markdown":"like a service `sudo service myjetty start` to start the server and `sudo service myjetty stop` basically server.stop() is what i shoud do.But how can i invoke that ?","body":"like a service <code>sudo service myjetty start</code> to start the server and <code>sudo service myjetty stop</code> basically server.stop() is what i shoud do.But how can i invoke that ?"},{"owner":{"account_id":2587959,"reputation":1082,"user_id":2334391,"accept_rate":80,"display_name":"jos"},"score":1,"creation_date":1432120792,"post_id":30347144,"comment_id":48788727,"body_markdown":"@SubOptimal  i should stop jetty as shutdown.sh do in tomcat","body":"@SubOptimal  i should stop jetty as shutdown.sh do in tomcat"},{"owner":{"account_id":2702906,"reputation":22658,"user_id":2333222,"display_name":"SubOptimal"},"score":2,"creation_date":1432125763,"post_id":30347144,"comment_id":48792424,"body_markdown":"Why you can&#39;t use the solution from your posted link `curl -v http://localhost:9103/stop`?","body":"Why you can&#39;t use the solution from your posted link <code>curl -v http:&#47;&#47;localhost:9103&#47;stop</code>?"},{"owner":{"account_id":2587959,"reputation":1082,"user_id":2334391,"accept_rate":80,"display_name":"jos"},"score":0,"creation_date":1432127106,"post_id":30347144,"comment_id":48793501,"body_markdown":"That is an option. I am looking for another option like `java -jar myjetty.jar stop` by passing the stop argument it can be stoped","body":"That is an option. I am looking for another option like <code>java -jar myjetty.jar stop</code> by passing the stop argument it can be stoped"}],"answers":[{"tags":[],"owner":{"account_id":2702906,"reputation":22658,"user_id":2333222,"display_name":"SubOptimal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1432155079,"creation_date":1432155079,"answer_id":30360145,"question_id":30347144,"body_markdown":"There is no predefined solution to shut-down the Jetty server. The only ordered way to shut-down the Jetty server is to call the method `stop()` on the running server instance. You must implement the way how this method is called yourself.\r\n\r\nYou could achieve this (for example) by...\r\n\r\n - implementing an RMI server thread and invoke the method from a RMI client\r\n - implementing a JMX MBean and from a client call a method on that MBean\r\n - implementing a custom handler like described in the link you have posted\r\n\r\nIf you only want to find a way which does not depend on additional tools like `curl`, than you could solve it for example like below (it&#39;s your own code with small modifications)\r\n\r\n    public class MyJetty {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            int PORT = 9103;\r\n            String home = System.getProperty(&quot;user.home&quot;);\r\n            String logFileDateFormat = &quot;yyyy_MM_dd&quot;;\r\n\r\n            // execute a request to http://localhost:9103/stop\r\n            // instead of `curl -v http://localhost:9103/stop`\r\n            if (args.length == 1 &amp;&amp; &quot;stop&quot;.equalsIgnoreCase(args[0])) {\r\n                URL url = new URL(&quot;http&quot;, &quot;localhost&quot;, PORT, &quot;/stop&quot;);\r\n                try (InputStream in = url.openStream()) {\r\n                    int r;\r\n                    while ((r = in.read()) != -1) {\r\n                        System.out.write(r);\r\n                    }\r\n                    return;\r\n                } catch (IOException ex) {\r\n                    System.err.println(&quot;stop Jetty failed: &quot; + ex.getMessage());\r\n                }\r\n            }\r\n\r\n            Server server = new Server();\r\n            SelectChannelConnector connector = new SelectChannelConnector();\r\n            connector.setPort(PORT);\r\n            server.addConnector(connector);\r\n            HandlerCollection handlers = new HandlerCollection();\r\n            NCSARequestLog requestLog = new NCSARequestLog();\r\n            requestLog.setFilename(home + &quot;/logs/access_&quot; + logFileDateFormat + &quot;.log&quot;);\r\n            requestLog.setFilenameDateFormat(logFileDateFormat);\r\n            requestLog.setRetainDays(10);\r\n            requestLog.setAppend(true);\r\n            requestLog.setExtended(false);\r\n            requestLog.setLogCookies(false);\r\n            requestLog.setLogTimeZone(TimeZone.getDefault().getID());\r\n            RequestLogHandler requestLogHandler = new RequestLogHandler();\r\n            requestLogHandler.setRequestLog(requestLog);\r\n            handlers.addHandler(requestLogHandler);\r\n\r\n            // the class YourHandler is the one from your link\r\n            handlers.addHandler(new YourHandler(server));\r\n\r\n            server.setHandler(handlers);\r\n            server.start();\r\n            server.join();\r\n        }\r\n    }\r\n\r\n - start the server with `java MyJetty`\r\n - stop the server with `java MyJetty stop`","title":"How to gracefully shutdown embeded jetty","body":"<p>There is no predefined solution to shut-down the Jetty server. The only ordered way to shut-down the Jetty server is to call the method <code>stop()</code> on the running server instance. You must implement the way how this method is called yourself.</p>\n\n<p>You could achieve this (for example) by...</p>\n\n<ul>\n<li>implementing an RMI server thread and invoke the method from a RMI client</li>\n<li>implementing a JMX MBean and from a client call a method on that MBean</li>\n<li>implementing a custom handler like described in the link you have posted</li>\n</ul>\n\n<p>If you only want to find a way which does not depend on additional tools like <code>curl</code>, than you could solve it for example like below (it's your own code with small modifications)</p>\n\n<pre><code>public class MyJetty {\n\n    public static void main(String[] args) throws Exception {\n        int PORT = 9103;\n        String home = System.getProperty(\"user.home\");\n        String logFileDateFormat = \"yyyy_MM_dd\";\n\n        // execute a request to http://localhost:9103/stop\n        // instead of `curl -v http://localhost:9103/stop`\n        if (args.length == 1 &amp;&amp; \"stop\".equalsIgnoreCase(args[0])) {\n            URL url = new URL(\"http\", \"localhost\", PORT, \"/stop\");\n            try (InputStream in = url.openStream()) {\n                int r;\n                while ((r = in.read()) != -1) {\n                    System.out.write(r);\n                }\n                return;\n            } catch (IOException ex) {\n                System.err.println(\"stop Jetty failed: \" + ex.getMessage());\n            }\n        }\n\n        Server server = new Server();\n        SelectChannelConnector connector = new SelectChannelConnector();\n        connector.setPort(PORT);\n        server.addConnector(connector);\n        HandlerCollection handlers = new HandlerCollection();\n        NCSARequestLog requestLog = new NCSARequestLog();\n        requestLog.setFilename(home + \"/logs/access_\" + logFileDateFormat + \".log\");\n        requestLog.setFilenameDateFormat(logFileDateFormat);\n        requestLog.setRetainDays(10);\n        requestLog.setAppend(true);\n        requestLog.setExtended(false);\n        requestLog.setLogCookies(false);\n        requestLog.setLogTimeZone(TimeZone.getDefault().getID());\n        RequestLogHandler requestLogHandler = new RequestLogHandler();\n        requestLogHandler.setRequestLog(requestLog);\n        handlers.addHandler(requestLogHandler);\n\n        // the class YourHandler is the one from your link\n        handlers.addHandler(new YourHandler(server));\n\n        server.setHandler(handlers);\n        server.start();\n        server.join();\n    }\n}\n</code></pre>\n\n<ul>\n<li>start the server with <code>java MyJetty</code></li>\n<li>stop the server with <code>java MyJetty stop</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3856920,"reputation":153,"user_id":3195606,"display_name":"bjrara"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1445487477,"creation_date":1445485063,"answer_id":33272982,"question_id":30347144,"body_markdown":"You can call setStopTimeout(long timeout) to shutdown Jetty in a relatively graceful way. A statisticsHandler must be configured when calling this method.\r\n\r\nReferencing: [Jetty Server.class setStopTimeout(long)][1]\r\n\r\n\r\n  [1]: http://download.eclipse.org/jetty/9.3.3.v20150827/apidocs/org/eclipse/jetty/server/Server.html#setStopTimeout-long-\r\n\r\ne.g.\r\n\r\n    YourServletHandler servletHandler = new YourServletHandler();\r\n    StatisticsHandler statsHandler = new StatisticsHandler();\r\n    statsHandler.setHandler(servletHandler);\r\n    \r\n    Server server = new Server(80);\r\n    server.setHandler(statsHandler);\r\n    server.setStopTimeout(3000L);\r\n    \r\n    //...\r\n    server.start();\r\n    \r\n    //...\r\n    server.stop();","title":"How to gracefully shutdown embeded jetty","body":"<p>You can call setStopTimeout(long timeout) to shutdown Jetty in a relatively graceful way. A statisticsHandler must be configured when calling this method.</p>\n\n<p>Referencing: <a href=\"http://download.eclipse.org/jetty/9.3.3.v20150827/apidocs/org/eclipse/jetty/server/Server.html#setStopTimeout-long-\" rel=\"noreferrer\">Jetty Server.class setStopTimeout(long)</a></p>\n\n<p>e.g.</p>\n\n<pre><code>YourServletHandler servletHandler = new YourServletHandler();\nStatisticsHandler statsHandler = new StatisticsHandler();\nstatsHandler.setHandler(servletHandler);\n\nServer server = new Server(80);\nserver.setHandler(statsHandler);\nserver.setStopTimeout(3000L);\n\n//...\nserver.start();\n\n//...\nserver.stop();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1507045647,"creation_date":1507045647,"answer_id":46548597,"question_id":30347144,"body_markdown":"Since **Jetty 7.5.x** you can use `org.eclipse.jetty.server.handler.ShutdownHandler` in your code:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    Server server = new Server(8080);\r\n    HandlerList handlers = new HandlerList();\r\n    handlers.setHandlers(new Handler[]\r\n    { someOtherHandler, new ShutdownHandler(&quot;secret_password&quot;, false, true) });\r\n    server.setHandler(handlers);\r\n    server.start();\r\n\r\n... which will allow you to shut down your jetty by issuing the following http POST request:\r\n\r\n&lt;!-- language: lang-bash --&gt;\r\n\r\n    curl -X POST http://localhost:8080/shutdown?token=secret_password\r\n","title":"How to gracefully shutdown embeded jetty","body":"<p>Since <strong>Jetty 7.5.x</strong> you can use <code>org.eclipse.jetty.server.handler.ShutdownHandler</code> in your code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Server server = new Server(8080);\nHandlerList handlers = new HandlerList();\nhandlers.setHandlers(new Handler[]\n{ someOtherHandler, new ShutdownHandler(\"secret_password\", false, true) });\nserver.setHandler(handlers);\nserver.start();\n</code></pre>\n\n<p>... which will allow you to shut down your jetty by issuing the following http POST request:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>curl -X POST http://localhost:8080/shutdown?token=secret_password\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2890770,"reputation":123,"user_id":2479622,"accept_rate":100,"display_name":"Hugo Hernandez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660755188,"creation_date":1660755188,"answer_id":73392271,"question_id":30347144,"body_markdown":"I don&#39;t know why (or if it is a bug) but in my case I had to set shutdownAtStart argument to false to get it working. If I set it as true the Server connector never starts, so it doesn&#39;t attend external requests like http://localhost:8888/shutdown?token=secret\r\n\r\n    new ShutdownHandler(&quot;secret&quot;, false, false);\r\n","title":"How to gracefully shutdown embeded jetty","body":"<p>I don't know why (or if it is a bug) but in my case I had to set shutdownAtStart argument to false to get it working. If I set it as true the Server connector never starts, so it doesn't attend external requests like http://localhost:8888/shutdown?token=secret</p>\n<pre><code>new ShutdownHandler(&quot;secret&quot;, false, false);\n</code></pre>\n"}],"owner":{"account_id":2587959,"reputation":1082,"user_id":2334391,"accept_rate":80,"display_name":"jos"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15689,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":30360145,"answer_count":4,"score":7,"last_activity_date":1660755188,"creation_date":1432118118,"question_id":30347144,"body_markdown":"I have an application runs on an embedded jetty server. Now i want to start/stop the server as a service.\r\nI use a script to start the server.\r\n\r\n    java $JAVA_OPTS -DREQ_JAVA_VERSION=$JAVA_VERSION -jar myjetty.jar\r\n\r\n**Main Class**\r\n\r\n    Server server = new Server();\r\n    SelectChannelConnector connector = new SelectChannelConnector();\r\n\tconnector.setPort(PORT);\r\n\tserver.addConnector(connector);\r\n    HandlerCollection handlers = new HandlerCollection();\r\n    NCSARequestLog requestLog = new NCSARequestLog();\r\n    requestLog.setFilename(home + &quot;/logs/access_&quot; + logFileDateFormat\r\n\t\t\t\t+ &quot;.log&quot;);\r\n\trequestLog.setFilenameDateFormat(logFileDateFormat);\r\n\trequestLog.setRetainDays(10);\r\n\trequestLog.setAppend(true);\r\n\trequestLog.setExtended(false);\r\n\trequestLog.setLogCookies(false);\r\n\trequestLog.setLogTimeZone(TimeZone.getDefault().getID());\r\n\tRequestLogHandler requestLogHandler = new RequestLogHandler();\r\n\trequestLogHandler.setRequestLog(requestLog);\r\n\thandlers.addHandler(requestLogHandler);\r\n\tserver.setHandler(handlers);\r\n\tserver.start();\r\n\tserver.join();\r\n\r\nThis starts the server.[Stopping and/or Restarting an embedded Jetty instance via web call ][1] can be used to stop server but,\r\nHow to stop the server from the script? and what changes should i make to shout down server in the main class. \r\n\r\n\r\n  [1]: http://www.randomactsofsentience.com/2012/01/stopping-andor-restarting-embedded.html","title":"How to gracefully shutdown embeded jetty","body":"<p>I have an application runs on an embedded jetty server. Now i want to start/stop the server as a service.\nI use a script to start the server.</p>\n\n<pre><code>java $JAVA_OPTS -DREQ_JAVA_VERSION=$JAVA_VERSION -jar myjetty.jar\n</code></pre>\n\n<p><strong>Main Class</strong></p>\n\n<pre><code>Server server = new Server();\nSelectChannelConnector connector = new SelectChannelConnector();\nconnector.setPort(PORT);\nserver.addConnector(connector);\nHandlerCollection handlers = new HandlerCollection();\nNCSARequestLog requestLog = new NCSARequestLog();\nrequestLog.setFilename(home + \"/logs/access_\" + logFileDateFormat\n            + \".log\");\nrequestLog.setFilenameDateFormat(logFileDateFormat);\nrequestLog.setRetainDays(10);\nrequestLog.setAppend(true);\nrequestLog.setExtended(false);\nrequestLog.setLogCookies(false);\nrequestLog.setLogTimeZone(TimeZone.getDefault().getID());\nRequestLogHandler requestLogHandler = new RequestLogHandler();\nrequestLogHandler.setRequestLog(requestLog);\nhandlers.addHandler(requestLogHandler);\nserver.setHandler(handlers);\nserver.start();\nserver.join();\n</code></pre>\n\n<p>This starts the server.<a href=\"http://www.randomactsofsentience.com/2012/01/stopping-andor-restarting-embedded.html\" rel=\"noreferrer\">Stopping and/or Restarting an embedded Jetty instance via web call </a> can be used to stop server but,\nHow to stop the server from the script? and what changes should i make to shout down server in the main class. </p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1660550045,"post_id":73356743,"comment_id":129550504,"body_markdown":"It is possible substitute the `?` property name with the `type` property name and after deserialize if there are no nested `?` properties, from what I know there are no builtin mechanisms to achieve your goal.","body":"It is possible substitute the <code>?</code> property name with the <code>type</code> property name and after deserialize if there are no nested <code>?</code> properties, from what I know there are no builtin mechanisms to achieve your goal."},{"owner":{"account_id":7704127,"reputation":111,"user_id":5835579,"accept_rate":50,"display_name":"Max Bo"},"score":0,"creation_date":1660550983,"post_id":73356743,"comment_id":129550753,"body_markdown":"@dariosicily I assume that would be possible - what&#39;s the most reasonable way to achieve that with a custom `JsonDeserializer`?","body":"@dariosicily I assume that would be possible - what&#39;s the most reasonable way to achieve that with a custom <code>JsonDeserializer</code>?"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1660552770,"post_id":73356743,"comment_id":129551265,"body_markdown":"No need of a `JsonDeserializer`, you can convert the json to a `JsonNode` and replace if it is present the `?` node with a `type` node and then deserialize the `JsonNode` object, I can submit a possible solution if you want.","body":"No need of a <code>JsonDeserializer</code>, you can convert the json to a <code>JsonNode</code> and replace if it is present the <code>?</code> node with a <code>type</code> node and then deserialize the <code>JsonNode</code> object, I can submit a possible solution if you want."},{"owner":{"account_id":7704127,"reputation":111,"user_id":5835579,"accept_rate":50,"display_name":"Max Bo"},"score":0,"creation_date":1660625006,"post_id":73356743,"comment_id":129569617,"body_markdown":"@dariosicily Unfortunately I have no means of converting the JSON to a `JsonNode` before handing it to the `ObjectMapper`. Furthermore, I have no means of manipulating the `ObjectMapper` in any way. Is this still achievable?","body":"@dariosicily Unfortunately I have no means of converting the JSON to a <code>JsonNode</code> before handing it to the <code>ObjectMapper</code>. Furthermore, I have no means of manipulating the <code>ObjectMapper</code> in any way. Is this still achievable?"},{"owner":{"account_id":92002,"reputation":1383,"user_id":252344,"accept_rate":60,"display_name":"Faron"},"score":0,"creation_date":1660856167,"post_id":73356743,"comment_id":129639004,"body_markdown":"@MaxBo Can you clarify what this means and why it is important?\n&quot;...as this pattern exposes deserialisation implementation details to external modules.&quot;","body":"@MaxBo Can you clarify what this means and why it is important? &quot;...as this pattern exposes deserialisation implementation details to external modules.&quot;"},{"owner":{"account_id":7704127,"reputation":111,"user_id":5835579,"accept_rate":50,"display_name":"Max Bo"},"score":0,"creation_date":1660882311,"post_id":73356743,"comment_id":129643359,"body_markdown":"Hi @Faron! Ideally other engineers would be able to use an &quot;off the shelf&quot; `ObjectMapper` in order to deserialise `Shape`. In the (non-working) code I have currently, deserialisation logic is encoded entirely in the annotations specified on `Shape`.\n\nHowever, the solutions suggested to those questions I linked above suggest constructing a `SimpleModule`, registering a `BeanDeserializerModifier`, and registering the module with the `ObjectMapper`. That would require an engineer to know that there is custom deserialisation associated with `Shape`, thus leaking deserialisation details.","body":"Hi @Faron! Ideally other engineers would be able to use an &quot;off the shelf&quot; <code>ObjectMapper</code> in order to deserialise <code>Shape</code>. In the (non-working) code I have currently, deserialisation logic is encoded entirely in the annotations specified on <code>Shape</code>.  However, the solutions suggested to those questions I linked above suggest constructing a <code>SimpleModule</code>, registering a <code>BeanDeserializerModifier</code>, and registering the module with the <code>ObjectMapper</code>. That would require an engineer to know that there is custom deserialisation associated with <code>Shape</code>, thus leaking deserialisation details."},{"owner":{"account_id":92002,"reputation":1383,"user_id":252344,"accept_rate":60,"display_name":"Faron"},"score":0,"creation_date":1660955981,"post_id":73356743,"comment_id":129663527,"body_markdown":"@MaxBo One solution would be to use AOP to inject the behavior you desire. Otherwise, you will have to change something about how you acquire an ObjectMapper. If you allow developers to create an ObjectMapper at will, they can call `findAndRegisterModules` or you can provide a factory that does it. If you use Spring, you can simply create a bean for your custom module.","body":"@MaxBo One solution would be to use AOP to inject the behavior you desire. Otherwise, you will have to change something about how you acquire an ObjectMapper. If you allow developers to create an ObjectMapper at will, they can call <code>findAndRegisterModules</code> or you can provide a factory that does it. If you use Spring, you can simply create a bean for your custom module."}],"answers":[{"tags":[],"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1660639418,"creation_date":1660638621,"answer_id":73371017,"question_id":73356743,"body_markdown":"There is no jackson builtin mechanism that can help you to achieve your goal, a workaround is convert the json string to a [ObjectNode](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/node/ObjectNode.html), check if the `&quot;?&quot;` property is present in it, if so add the `&quot;type&quot;` property with the `&quot;?&quot;` associated value, delete the `&quot;?&quot;` property and use the [`ObjectMapper#treeToValue`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/ObjectMapper.html#treeToValue-com.fasterxml.jackson.core.TreeNode-java.lang.Class-) method like below:\r\n\r\n~~~\r\nString squareJsonWithAlternativePropertyName = &quot;{\\&quot;?\\&quot;:\\&quot;square\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\r\nObjectNode node = (ObjectNode) mapper.readTree(squareJsonWithAlternativePropertyName);\r\nif (node.has(&quot;?&quot;)) {\r\n   node.set(&quot;type&quot;, node.get(&quot;?&quot;));\r\n   node.remove(&quot;?&quot;);\r\n}\r\nShape shape = mapper.treeToValue(node, Shape.class);\r\n~~~ \r\n\r\nYou can encapsulate this code in one function, in case of nested properties or another case the code has to be updated but substantially the basecode remains still the same.","title":"How do I add an alias to the discriminator property used to support polymorphic deserialisation in Jackson?","body":"<p>There is no jackson builtin mechanism that can help you to achieve your goal, a workaround is convert the json string to a <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/node/ObjectNode.html\" rel=\"nofollow noreferrer\">ObjectNode</a>, check if the <code>&quot;?&quot;</code> property is present in it, if so add the <code>&quot;type&quot;</code> property with the <code>&quot;?&quot;</code> associated value, delete the <code>&quot;?&quot;</code> property and use the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/ObjectMapper.html#treeToValue-com.fasterxml.jackson.core.TreeNode-java.lang.Class-\" rel=\"nofollow noreferrer\"><code>ObjectMapper#treeToValue</code></a> method like below:</p>\n<pre><code>String squareJsonWithAlternativePropertyName = &quot;{\\&quot;?\\&quot;:\\&quot;square\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\nObjectNode node = (ObjectNode) mapper.readTree(squareJsonWithAlternativePropertyName);\nif (node.has(&quot;?&quot;)) {\n   node.set(&quot;type&quot;, node.get(&quot;?&quot;));\n   node.remove(&quot;?&quot;);\n}\nShape shape = mapper.treeToValue(node, Shape.class);\n</code></pre>\n<p>You can encapsulate this code in one function, in case of nested properties or another case the code has to be updated but substantially the basecode remains still the same.</p>\n"},{"tags":[],"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1660755120,"creation_date":1660745035,"answer_id":73389894,"question_id":73356743,"body_markdown":"Here is a way to solve your problem. The idea is to define a custom deserializer and associate it with the base class `Shape`, but\r\nrestore the default deserializer for the inherited classes (via an empty `@JsonDeserialize` annotation).\r\nThat trick prevents an endless loop.\r\n\r\nThe deserializer works like this:\r\n\r\n- It converts the JSON to a tree structure\r\n- It extracts the type from the tree\r\n- It calls `treeToValue()` with the tree and the type\r\n\r\n``` lang-java\r\nimport java.io.IOException;\r\nimport java.util.HashMap;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.core.*;\r\nimport com.fasterxml.jackson.databind.*;\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\nimport com.fasterxml.jackson.databind.node.*;\r\n\r\npublic class Test\r\n{\r\n\t@JsonDeserialize(using = ShapeDeserializer.class)\r\n\tpublic static abstract class Shape\r\n\t{\r\n\t\tabstract public String name();\r\n\t}\r\n\r\n\t@JsonDeserialize\r\n\tpublic static class Square extends Shape\r\n\t{\r\n\t\t@JsonProperty(&quot;A&quot;)\r\n\t\tpublic float width;\r\n\r\n\t\t@Override\r\n\t\tpublic String name() { return &quot;square&quot;; }\r\n\t}\r\n\r\n\t@JsonDeserialize\r\n\tpublic static class Circle extends Shape\r\n\t{\r\n\t\t@JsonProperty(&quot;A&quot;)\r\n\t\tpublic float diameter;\r\n\r\n\t\t@Override\r\n\t\tpublic String name() { return &quot;circle&quot;; }\r\n\t}\r\n\r\n\tstatic class ShapeDeserializer extends JsonDeserializer&lt;Shape&gt;\r\n\t{\r\n\t\tprivate HashMap&lt;String, Class&lt;? extends Shape&gt;&gt; types = new HashMap&lt;&gt;();\r\n\r\n\t\tpublic ShapeDeserializer()\r\n\t\t{\r\n\t\t\ttypes.put(&quot;square&quot;, Square.class);\r\n\t\t\ttypes.put(&quot;circle&quot;, Circle.class);\r\n\t\t}\r\n\r\n\t\tpublic Shape deserialize(JsonParser p, DeserializationContext ctxt) throws IOException\r\n\t\t{\r\n\t\t\t// Get the tree and extract the type from it\r\n\t\t\tObjectNode root = (ObjectNode)p.readValueAsTree();\r\n\t\t\tTextNode type = (TextNode)root.remove(&quot;type&quot;);\r\n\t\t\tif(type==null)\r\n\t\t\t\ttype = (TextNode)root.remove(&quot;?&quot;);\r\n\t\t\tClass&lt;? extends Shape&gt; valueType = types.get(type.textValue());\r\n\r\n\t\t\t// Convert the tree to an instance of the specified class\r\n\t\t\treturn p.getCodec().treeToValue(root, valueType);\r\n\t\t}\r\n\t}\r\n\r\n    public static void main(String[] args) throws JsonProcessingException\r\n\t{\r\n\t\tString squareJson = &quot;{\\&quot;type\\&quot;:\\&quot;square\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\r\n\t\tString circleJson = &quot;{\\&quot;?\\&quot;:\\&quot;circle\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\r\n\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\tShape square = mapper.readerFor(Shape.class).readValue(squareJson);\r\n\t\tShape circle = mapper.readerFor(Shape.class).readValue(circleJson);\r\n\r\n\t\tSystem.out.println(square.name());\r\n\t\tSystem.out.println(circle.name());\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n``` lang-none\r\nsquare\r\ncircle\r\n```\r\n","title":"How do I add an alias to the discriminator property used to support polymorphic deserialisation in Jackson?","body":"<p>Here is a way to solve your problem. The idea is to define a custom deserializer and associate it with the base class <code>Shape</code>, but\nrestore the default deserializer for the inherited classes (via an empty <code>@JsonDeserialize</code> annotation).\nThat trick prevents an endless loop.</p>\n<p>The deserializer works like this:</p>\n<ul>\n<li>It converts the JSON to a tree structure</li>\n<li>It extracts the type from the tree</li>\n<li>It calls <code>treeToValue()</code> with the tree and the type</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.util.HashMap;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.core.*;\nimport com.fasterxml.jackson.databind.*;\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\nimport com.fasterxml.jackson.databind.node.*;\n\npublic class Test\n{\n    @JsonDeserialize(using = ShapeDeserializer.class)\n    public static abstract class Shape\n    {\n        abstract public String name();\n    }\n\n    @JsonDeserialize\n    public static class Square extends Shape\n    {\n        @JsonProperty(&quot;A&quot;)\n        public float width;\n\n        @Override\n        public String name() { return &quot;square&quot;; }\n    }\n\n    @JsonDeserialize\n    public static class Circle extends Shape\n    {\n        @JsonProperty(&quot;A&quot;)\n        public float diameter;\n\n        @Override\n        public String name() { return &quot;circle&quot;; }\n    }\n\n    static class ShapeDeserializer extends JsonDeserializer&lt;Shape&gt;\n    {\n        private HashMap&lt;String, Class&lt;? extends Shape&gt;&gt; types = new HashMap&lt;&gt;();\n\n        public ShapeDeserializer()\n        {\n            types.put(&quot;square&quot;, Square.class);\n            types.put(&quot;circle&quot;, Circle.class);\n        }\n\n        public Shape deserialize(JsonParser p, DeserializationContext ctxt) throws IOException\n        {\n            // Get the tree and extract the type from it\n            ObjectNode root = (ObjectNode)p.readValueAsTree();\n            TextNode type = (TextNode)root.remove(&quot;type&quot;);\n            if(type==null)\n                type = (TextNode)root.remove(&quot;?&quot;);\n            Class&lt;? extends Shape&gt; valueType = types.get(type.textValue());\n\n            // Convert the tree to an instance of the specified class\n            return p.getCodec().treeToValue(root, valueType);\n        }\n    }\n\n    public static void main(String[] args) throws JsonProcessingException\n    {\n        String squareJson = &quot;{\\&quot;type\\&quot;:\\&quot;square\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\n        String circleJson = &quot;{\\&quot;?\\&quot;:\\&quot;circle\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\n\n        ObjectMapper mapper = new ObjectMapper();\n        Shape square = mapper.readerFor(Shape.class).readValue(squareJson);\n        Shape circle = mapper.readerFor(Shape.class).readValue(circleJson);\n\n        System.out.println(square.name());\n        System.out.println(circle.name());\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>square\ncircle\n</code></pre>\n"}],"owner":{"account_id":7704127,"reputation":111,"user_id":5835579,"accept_rate":50,"display_name":"Max Bo"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":659,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73389894,"answer_count":2,"score":4,"last_activity_date":1660755120,"creation_date":1660535299,"question_id":73356743,"body_markdown":"I have a standard polymorphic type `Shape`, and I can polymorphically deserialise it using the standard `@JsonTypeInfo` mechanism:\r\n\r\n```java\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.annotation.JsonSubTypes;\r\nimport com.fasterxml.jackson.annotation.JsonTypeInfo;\r\nimport com.fasterxml.jackson.annotation.JsonTypeInfo.As;\r\nimport com.fasterxml.jackson.annotation.JsonTypeInfo.Id;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport org.junit.Test;\r\n\r\npublic class DiscriminatorAliasTest {\r\n\r\n  @JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = &quot;type&quot;)\r\n  @JsonSubTypes({\r\n      @JsonSubTypes.Type(value = Square.class, name = &quot;square&quot;),\r\n      @JsonSubTypes.Type(value = Circle.class, name = &quot;circle&quot;)\r\n  })\r\n  static abstract class Shape {\r\n    abstract public String name();\r\n  }\r\n\r\n  static class Square extends Shape {\r\n    @JsonProperty(&quot;A&quot;)\r\n    public float width;\r\n\r\n    @Override\r\n    public String name() { return &quot;square&quot;; }\r\n  }\r\n\r\n  static class Circle extends Shape {\r\n    @JsonProperty(&quot;A&quot;)\r\n    public float diameter;\r\n\r\n    @Override\r\n    public String name() { return &quot;circle&quot;; }\r\n  }\r\n\r\n  @Test\r\n  public void testDiscriminator() throws Exception {\r\n    ObjectMapper mapper = new ObjectMapper();\r\n\r\n    // This passes! \r\n    String squareJson = &quot;{\\&quot;type\\&quot;:\\&quot;square\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\r\n    Shape square = mapper.readerFor(Shape.class).readValue(squareJson);\r\n    assertThat(square.name()).isEqualTo(&quot;square&quot;);\r\n  }\r\n}\r\n```\r\n\r\nHowever, I would like to **add `?` as an alias to the discriminator property `type`** such that the following JSON strings are deserialised by the `Shape` abstract class:\r\n\r\n`{ &quot;type&quot;: &quot;square&quot;, &quot;A&quot;: 1.0 }` AND `{ &quot;?&quot;: &quot;square&quot;, &quot;A&quot;: 1.0 }` \r\n\r\nsuch that this test case would pass\r\n\r\n```java\r\n  @Test\r\n  public void testDiscriminator() throws Exception {\r\n    ObjectMapper mapper = new ObjectMapper();\r\n\r\n    // This passes!\r\n    String squareJson = &quot;{\\&quot;type\\&quot;:\\&quot;square\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\r\n    Shape square = mapper.readerFor(Shape.class).readValue(squareJson);\r\n    assertThat(square.name()).isEqualTo(&quot;square&quot;);\r\n\r\n    // and this should pass as well, with NO further modification\r\n    // to this test case\r\n    String squareJsonWithAlternativePropertyName = &quot;{\\&quot;?\\&quot;:\\&quot;square\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\r\n    Shape alsoSquare = mapper.readerFor(Shape.class).readValue(squareJsonWithAlternativePropertyName);\r\n    assertThat(alsoSquare.name()).isEqualTo(&quot;square&quot;);\r\n  }\r\n```\r\n\r\n**Why am I trying to do this?**: I am trying to deserialise two different existing discriminated union encoding schemes onto the same class hierarchy - unfortunately there is no way in advance to know which scheme the class must deserialise.\r\n\r\n**Restrictions**: \r\n\r\n- I cannot use `@JsonTypeInfo(use = Id.DEDUCTION)`. There must be a discriminator property because the property key set cannot be used to disambiguate each class.\r\n- I cannot access or manipulate the `ObjectMapper` prior to mapping as this pattern exposes deserialisation implementation details to external modules. I assume this might rule out `module.setDeserializerModifier` / `DelegatingDeserializer` / `BeanDeserializerModifier` based solutions, such as the ones suggested in this [question](https://stackoverflow.com/questions/18313323/how-do-i-call-the-default-deserializer-from-a-custom-deserializer-in-jackson) and this [question](https://stackoverflow.com/questions/52962187/jackson-deserializer-delegate-to-next-applicable-deserializer). \r\n- I cannot manipulate the JSON, or equivalent `JsonNode` structure before it hits the `ObjectMapper`\r\n- I do not want to manually construct the `Shape` instance by hand by destructuring `JsonNode`s. I should reasonably expect to utilise the existing deserialisation machinery and annotations of `Shape` and its subtypes.\r\n\r\nI am assuming these are reasonable restrictions - setting an alias for the discriminator property in [Scala&#39;s Circe JSON  library](https://circe.github.io/circe/) whilst complying with these restrictions was comparatively a single line change.\r\n\r\nThanks in advance!","title":"How do I add an alias to the discriminator property used to support polymorphic deserialisation in Jackson?","body":"<p>I have a standard polymorphic type <code>Shape</code>, and I can polymorphically deserialise it using the standard <code>@JsonTypeInfo</code> mechanism:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.assertj.core.api.Assertions.assertThat;\n\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.annotation.JsonSubTypes;\nimport com.fasterxml.jackson.annotation.JsonTypeInfo;\nimport com.fasterxml.jackson.annotation.JsonTypeInfo.As;\nimport com.fasterxml.jackson.annotation.JsonTypeInfo.Id;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.Test;\n\npublic class DiscriminatorAliasTest {\n\n  @JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = &quot;type&quot;)\n  @JsonSubTypes({\n      @JsonSubTypes.Type(value = Square.class, name = &quot;square&quot;),\n      @JsonSubTypes.Type(value = Circle.class, name = &quot;circle&quot;)\n  })\n  static abstract class Shape {\n    abstract public String name();\n  }\n\n  static class Square extends Shape {\n    @JsonProperty(&quot;A&quot;)\n    public float width;\n\n    @Override\n    public String name() { return &quot;square&quot;; }\n  }\n\n  static class Circle extends Shape {\n    @JsonProperty(&quot;A&quot;)\n    public float diameter;\n\n    @Override\n    public String name() { return &quot;circle&quot;; }\n  }\n\n  @Test\n  public void testDiscriminator() throws Exception {\n    ObjectMapper mapper = new ObjectMapper();\n\n    // This passes! \n    String squareJson = &quot;{\\&quot;type\\&quot;:\\&quot;square\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\n    Shape square = mapper.readerFor(Shape.class).readValue(squareJson);\n    assertThat(square.name()).isEqualTo(&quot;square&quot;);\n  }\n}\n</code></pre>\n<p>However, I would like to <strong>add <code>?</code> as an alias to the discriminator property <code>type</code></strong> such that the following JSON strings are deserialised by the <code>Shape</code> abstract class:</p>\n<p><code>{ &quot;type&quot;: &quot;square&quot;, &quot;A&quot;: 1.0 }</code> AND <code>{ &quot;?&quot;: &quot;square&quot;, &quot;A&quot;: 1.0 }</code></p>\n<p>such that this test case would pass</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Test\n  public void testDiscriminator() throws Exception {\n    ObjectMapper mapper = new ObjectMapper();\n\n    // This passes!\n    String squareJson = &quot;{\\&quot;type\\&quot;:\\&quot;square\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\n    Shape square = mapper.readerFor(Shape.class).readValue(squareJson);\n    assertThat(square.name()).isEqualTo(&quot;square&quot;);\n\n    // and this should pass as well, with NO further modification\n    // to this test case\n    String squareJsonWithAlternativePropertyName = &quot;{\\&quot;?\\&quot;:\\&quot;square\\&quot;, \\&quot;A\\&quot;: 1.0 }&quot;;\n    Shape alsoSquare = mapper.readerFor(Shape.class).readValue(squareJsonWithAlternativePropertyName);\n    assertThat(alsoSquare.name()).isEqualTo(&quot;square&quot;);\n  }\n</code></pre>\n<p><strong>Why am I trying to do this?</strong>: I am trying to deserialise two different existing discriminated union encoding schemes onto the same class hierarchy - unfortunately there is no way in advance to know which scheme the class must deserialise.</p>\n<p><strong>Restrictions</strong>:</p>\n<ul>\n<li>I cannot use <code>@JsonTypeInfo(use = Id.DEDUCTION)</code>. There must be a discriminator property because the property key set cannot be used to disambiguate each class.</li>\n<li>I cannot access or manipulate the <code>ObjectMapper</code> prior to mapping as this pattern exposes deserialisation implementation details to external modules. I assume this might rule out <code>module.setDeserializerModifier</code> / <code>DelegatingDeserializer</code> / <code>BeanDeserializerModifier</code> based solutions, such as the ones suggested in this <a href=\"https://stackoverflow.com/questions/18313323/how-do-i-call-the-default-deserializer-from-a-custom-deserializer-in-jackson\">question</a> and this <a href=\"https://stackoverflow.com/questions/52962187/jackson-deserializer-delegate-to-next-applicable-deserializer\">question</a>.</li>\n<li>I cannot manipulate the JSON, or equivalent <code>JsonNode</code> structure before it hits the <code>ObjectMapper</code></li>\n<li>I do not want to manually construct the <code>Shape</code> instance by hand by destructuring <code>JsonNode</code>s. I should reasonably expect to utilise the existing deserialisation machinery and annotations of <code>Shape</code> and its subtypes.</li>\n</ul>\n<p>I am assuming these are reasonable restrictions - setting an alias for the discriminator property in <a href=\"https://circe.github.io/circe/\" rel=\"nofollow noreferrer\">Scala's Circe JSON  library</a> whilst complying with these restrictions was comparatively a single line change.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","eclipse","swing","game-development","world-map"],"comments":[{"owner":{"account_id":13081432,"reputation":793,"user_id":9451867,"display_name":"Doga Oruc"},"score":0,"creation_date":1556413041,"post_id":55885639,"comment_id":98430102,"body_markdown":"You should take a look at `BufferStrategy`. Without `BufferStrategy` you will not get good performance.\n\nhttps://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferStrategy.html","body":"You should take a look at <code>BufferStrategy</code>. Without <code>BufferStrategy</code> you will not get good performance.  <a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferStrategy.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/awt/image/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":15829388,"reputation":11,"user_id":11421214,"display_name":"FiveShipHUN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556441065,"creation_date":1556440654,"answer_id":55888470,"question_id":55885639,"body_markdown":"Okay, so I found out someting. When I had tried the &quot;three map&quot; method, the problem had been that I had wanted to draw two different images (for the base and for the other drawings). Now I made it again and it works fine. (Now I need only two image.)\r\n\r\nIf anyone need the code:\r\n\r\nThe paint method of the world map:\r\n\r\n    @Override\r\n\tprotected void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\tif (!settedUp) {\r\n\t\t\tsettedUp = true;\r\n\t\t\tcreatePreMaps();\r\n\t\t}\r\n\t\tRectangle r = new Rectangle((int) (location.X * zoomLevel), (int) (location.Y * zoomLevel),\r\n\t\t\t\t(int) (areaMap.getWidth() * zoomLevel), (int) (areaMap.getHeight() * zoomLevel));\r\n\t\tg.drawImage(areaMap, r.x, r.y, r.width, r.height, null);\r\n\t\tg.drawImage(areaMap, r.x - r.width, r.y, r.width, r.height, null);\r\n\t}\r\nThe mouse listeners (to move and zoom on the map):\r\n\r\n    addMouseListener(new MouseListener() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseReleased(MouseEvent e) {\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\tif (map != null) {\r\n\t\t\t\t\tif (SwingUtilities.isMiddleMouseButton(e)) {\r\n\t\t\t\t\t\t// System.out.println(&quot;Pressed&quot;);\r\n\t\t\t\t\t\tPoint point = e.getPoint();\r\n\t\t\t\t\t\tint validX = (int) (point.x / map.zoomLevel);\r\n\t\t\t\t\t\tint validY = (int) (point.y / map.zoomLevel);\r\n\t\t\t\t\t\tmap.p = new Point((int) (validX), (int) (validY));\r\n\t\t\t\t\t\t// System.out.println(e.getX() + &quot;;&quot; + e.getY());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseExited(MouseEvent e) {\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseEntered(MouseEvent e) {\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n\t\t\t}\r\n\t\t});\r\n\t\taddMouseMotionListener(new MouseMotionListener() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseMoved(MouseEvent event) {\r\n\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseDragged(MouseEvent event) {\r\n\t\t\t\tif (map != null) {\r\n\t\t\t\t\tif (SwingUtilities.isMiddleMouseButton(event)) {\r\n\t\t\t\t\t\tPoint point = event.getPoint();\r\n\t\t\t\t\t\tint validX = (int) (point.x / map.zoomLevel);\r\n\t\t\t\t\t\tint validY = (int) (point.y / map.zoomLevel);\r\n\r\n\t\t\t\t\t\t// System.out.println(&quot;Dragged&quot;);\r\n\t\t\t\t\t\tint thisX = (int) (map.location.X);\r\n\t\t\t\t\t\tint thisY = (int) (map.location.Y);\r\n\t\t\t\t\t\t// System.out.println(&quot;Dragged&quot; + e.getX() + &quot;;&quot; + e.getY());\r\n\t\t\t\t\t\t// Determine how much the mouse moved since the initial click\r\n\t\t\t\t\t\tint xMoved = (thisX + validX) - (thisX + map.p.x);\r\n\t\t\t\t\t\tint yMoved = (thisY + validY) - (thisY + map.p.y);\r\n\t\t\t\t\t\txMoved *= speed;\r\n\t\t\t\t\t\tyMoved *= speed;\r\n\t\t\t\t\t\t// Move picture to this position\r\n\t\t\t\t\t\tint X = thisX + xMoved;\r\n\t\t\t\t\t\tint Y = thisY + yMoved;\r\n\r\n\t\t\t\t\t\tmap.location = new me.fiveship.waw.objects.Point(X, Y);\r\n\t\t\t\t\t\tif (map.location.Y &gt; 0) {\r\n\t\t\t\t\t\t\tmap.location.Y = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdouble a = ((-Area.max().Y + map.getBounds().getHeight() / map.zoomLevel));\r\n\t\t\t\t\t\tif (a &gt; map.location.Y) {\r\n\t\t\t\t\t\t\tmap.location.Y = (int) a;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tint w = Area.max().X;\r\n\t\t\t\t\t\tif (map.location.X &gt; w) {\r\n\t\t\t\t\t\t\tmap.location.X = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (map.location.X &lt; -w + map.getWidth()) {\r\n\t\t\t\t\t\t\tmap.location.X = map.getWidth();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// System.out.println(map.location.X);\r\n\t\t\t\t\t\trepaint();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\taddMouseWheelListener(new MouseWheelListener() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseWheelMoved(MouseWheelEvent e) {\r\n\t\t\t\t// System.out.println(map);\r\n\t\t\t\tif (map != null) {\r\n\t\t\t\t\tdouble delta = 0.05d * e.getPreciseWheelRotation();\r\n\t\t\t\t\tmap.zoomLevel -= delta;\r\n\t\t\t\t\tif (map.zoomLevel &lt;= 1) {\r\n\t\t\t\t\t\tmap.zoomLevel = 1;\r\n\t\t\t\t\t} else if (map.zoomLevel &gt;= Consts.c().MaxZoom) {\r\n\t\t\t\t\t\tmap.zoomLevel = Consts.c().MaxZoom;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// System.out.println(map.zoomLevel);\r\n\t\t\t\t\tif (map.location.Y &gt; 0) {\r\n\t\t\t\t\t\tmap.location.Y = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdouble a = ((-Area.max().Y + map.getBounds().getHeight() / map.zoomLevel));\r\n\t\t\t\t\tif (a &gt; map.location.Y) {\r\n\t\t\t\t\t\tmap.location.Y = (int) a;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tint w = Area.max().X;\r\n\t\t\t\t\tif (map.location.X &gt; w) {\r\n\t\t\t\t\t\tmap.location.X = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (map.location.X &lt; -w + map.getWidth()) {\r\n\t\t\t\t\t\tmap.location.X = map.getWidth();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmap.repaint();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n","title":"How to create a looped world map? (Java-Swing)","body":"<p>Okay, so I found out someting. When I had tried the \"three map\" method, the problem had been that I had wanted to draw two different images (for the base and for the other drawings). Now I made it again and it works fine. (Now I need only two image.)</p>\n\n<p>If anyone need the code:</p>\n\n<p>The paint method of the world map:</p>\n\n<pre><code>@Override\nprotected void paintComponent(Graphics g) {\n    super.paintComponent(g);\n    if (!settedUp) {\n        settedUp = true;\n        createPreMaps();\n    }\n    Rectangle r = new Rectangle((int) (location.X * zoomLevel), (int) (location.Y * zoomLevel),\n            (int) (areaMap.getWidth() * zoomLevel), (int) (areaMap.getHeight() * zoomLevel));\n    g.drawImage(areaMap, r.x, r.y, r.width, r.height, null);\n    g.drawImage(areaMap, r.x - r.width, r.y, r.width, r.height, null);\n}\n</code></pre>\n\n<p>The mouse listeners (to move and zoom on the map):</p>\n\n<pre><code>addMouseListener(new MouseListener() {\n\n        @Override\n        public void mouseReleased(MouseEvent e) {\n        }\n\n        @Override\n        public void mousePressed(MouseEvent e) {\n            if (map != null) {\n                if (SwingUtilities.isMiddleMouseButton(e)) {\n                    // System.out.println(\"Pressed\");\n                    Point point = e.getPoint();\n                    int validX = (int) (point.x / map.zoomLevel);\n                    int validY = (int) (point.y / map.zoomLevel);\n                    map.p = new Point((int) (validX), (int) (validY));\n                    // System.out.println(e.getX() + \";\" + e.getY());\n                }\n            }\n        }\n\n        @Override\n        public void mouseExited(MouseEvent e) {\n        }\n\n        @Override\n        public void mouseEntered(MouseEvent e) {\n        }\n\n        @Override\n        public void mouseClicked(MouseEvent e) {\n        }\n    });\n    addMouseMotionListener(new MouseMotionListener() {\n\n        @Override\n        public void mouseMoved(MouseEvent event) {\n\n        }\n\n        @Override\n        public void mouseDragged(MouseEvent event) {\n            if (map != null) {\n                if (SwingUtilities.isMiddleMouseButton(event)) {\n                    Point point = event.getPoint();\n                    int validX = (int) (point.x / map.zoomLevel);\n                    int validY = (int) (point.y / map.zoomLevel);\n\n                    // System.out.println(\"Dragged\");\n                    int thisX = (int) (map.location.X);\n                    int thisY = (int) (map.location.Y);\n                    // System.out.println(\"Dragged\" + e.getX() + \";\" + e.getY());\n                    // Determine how much the mouse moved since the initial click\n                    int xMoved = (thisX + validX) - (thisX + map.p.x);\n                    int yMoved = (thisY + validY) - (thisY + map.p.y);\n                    xMoved *= speed;\n                    yMoved *= speed;\n                    // Move picture to this position\n                    int X = thisX + xMoved;\n                    int Y = thisY + yMoved;\n\n                    map.location = new me.fiveship.waw.objects.Point(X, Y);\n                    if (map.location.Y &gt; 0) {\n                        map.location.Y = 0;\n                    }\n                    double a = ((-Area.max().Y + map.getBounds().getHeight() / map.zoomLevel));\n                    if (a &gt; map.location.Y) {\n                        map.location.Y = (int) a;\n                    }\n                    int w = Area.max().X;\n                    if (map.location.X &gt; w) {\n                        map.location.X = 0;\n                    }\n                    if (map.location.X &lt; -w + map.getWidth()) {\n                        map.location.X = map.getWidth();\n                    }\n                    // System.out.println(map.location.X);\n                    repaint();\n                }\n            }\n        }\n    });\n    addMouseWheelListener(new MouseWheelListener() {\n\n        @Override\n        public void mouseWheelMoved(MouseWheelEvent e) {\n            // System.out.println(map);\n            if (map != null) {\n                double delta = 0.05d * e.getPreciseWheelRotation();\n                map.zoomLevel -= delta;\n                if (map.zoomLevel &lt;= 1) {\n                    map.zoomLevel = 1;\n                } else if (map.zoomLevel &gt;= Consts.c().MaxZoom) {\n                    map.zoomLevel = Consts.c().MaxZoom;\n                }\n                // System.out.println(map.zoomLevel);\n                if (map.location.Y &gt; 0) {\n                    map.location.Y = 0;\n                }\n                double a = ((-Area.max().Y + map.getBounds().getHeight() / map.zoomLevel));\n                if (a &gt; map.location.Y) {\n                    map.location.Y = (int) a;\n                }\n                int w = Area.max().X;\n                if (map.location.X &gt; w) {\n                    map.location.X = 0;\n                }\n                if (map.location.X &lt; -w + map.getWidth()) {\n                    map.location.X = map.getWidth();\n                }\n                map.repaint();\n            }\n        }\n    });\n</code></pre>\n"}],"owner":{"account_id":15829388,"reputation":11,"user_id":11421214,"display_name":"FiveShipHUN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":872,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1660754927,"creation_date":1556406699,"question_id":55885639,"body_markdown":"So, I&#39;ve started to make a grand strategy game in Java using Swing and I want to create a world map which looped. (So if you reach the west end of the worldmap, the system will start drawing the east side and vice verse, like in HOI4 or EU4.)\r\n\r\nI have no idea how to do that.\r\nI tried to create 3 map and if you reach the end the system drop back to the middle, but this method ate my computer. \r\n\r\nOr if it&#39;s easier to understand, I want to create a cylinder, and draw a part from its wall.\r\n\r\n(I&#39;m planning to switch to libgdx, especially if there I can make this much easier.)\r\n\r\nHere&#39;s my WorldMap class:\r\n\r\n\r\n    import java.awt.Graphics;\r\n    import java.awt.Rectangle;\r\n    import java.awt.image.BufferedImage;\r\n    \r\n    import javax.swing.JComponent;\r\n    \r\n    import me.fiveship.waw.objects.Area;\r\n    import me.fiveship.waw.objects.Point;\r\n    \r\n    public class WorldMap extends JComponent {\r\n    \r\n    \tprivate static final long serialVersionUID = -4823224592445587979L;\r\n    \r\n    \tpublic static int WIDTH = 1280;\r\n    \tpublic static int HEIGHT = 768;\r\n    \r\n    \tpublic WorldMap() {\r\n    \t\tsetBounds(0, 0, WIDTH, HEIGHT);\r\n    \t}\r\n    \r\n    \tpublic Point location = new Point(0, 0);\r\n    \tpublic double zoomLevel = 3;\r\n    \r\n    \tprotected java.awt.Point p;\r\n    \r\n    \tprivate static boolean settedUp = false;\r\n    \r\n    \tprivate static BufferedImage areaMap = null;\r\n    \tprivate static BufferedImage countryMap = null;\r\n    \tprivate static BufferedImage regionMap = null;\r\n    \r\n    \tpublic static void createPreMaps() {\r\n    \t\tPoint max = Area.max();\r\n    \t\tareaMap = new BufferedImage(max.X, max.Y, BufferedImage.TYPE_INT_ARGB);\r\n    \t\tcountryMap = new BufferedImage(max.X, max.Y, BufferedImage.TYPE_INT_ARGB);\r\n    \t\tregionMap = new BufferedImage(max.X, max.Y, BufferedImage.TYPE_INT_ARGB);\r\n    \t\t// AREA MAP\r\n    \t\tGraphics g = areaMap.createGraphics();\r\n    \t\tfor (Area area : Area.areas()) {\r\n    \t\t\tg.setColor(area.color());\r\n    \t\t\tfor (Point p : area.points) {\r\n    \t\t\t\tg.fillRect(p.X, p.Y, 1, 1);\r\n    \t\t\t}\r\n    \t\t\tg.setColor(area.color().darker());\r\n    \t\t\t/*\r\n    \t\t\t * for (Border b : area.borders) { g.fillRect(b.p.X, b.p.Y, 1, 1); }\r\n    \t\t\t */\r\n    \t\t}\r\n    \t\t// COUNTRY MAP\r\n    \t\t// g = countryMap.createGraphics();\r\n    \t\t// REGION MAP\r\n    \t\t// g = regionMap.createGraphics();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void paintComponent(Graphics g) {\r\n    \t\tsuper.paintComponent(g);\r\n    \t\tif (!settedUp) {\r\n    \t\t\tsettedUp = true;\r\n    \t\t\tcreatePreMaps();\r\n    \t\t}\r\n    \t\tRectangle r = new Rectangle((int) (location.X * zoomLevel), (int) (location.Y * zoomLevel),\r\n    \t\t\t\t(int) (areaMap.getWidth() * zoomLevel), (int) (areaMap.getHeight() * zoomLevel));\r\n    \t\tg.drawImage(areaMap, r.x, r.y, r.width, r.height, null);\r\n    \t}\r\n    \r\n    }","title":"How to create a looped world map? (Java-Swing)","body":"<p>So, I've started to make a grand strategy game in Java using Swing and I want to create a world map which looped. (So if you reach the west end of the worldmap, the system will start drawing the east side and vice verse, like in HOI4 or EU4.)</p>\n<p>I have no idea how to do that.\nI tried to create 3 map and if you reach the end the system drop back to the middle, but this method ate my computer.</p>\n<p>Or if it's easier to understand, I want to create a cylinder, and draw a part from its wall.</p>\n<p>(I'm planning to switch to libgdx, especially if there I can make this much easier.)</p>\n<p>Here's my WorldMap class:</p>\n<pre><code>import java.awt.Graphics;\nimport java.awt.Rectangle;\nimport java.awt.image.BufferedImage;\n\nimport javax.swing.JComponent;\n\nimport me.fiveship.waw.objects.Area;\nimport me.fiveship.waw.objects.Point;\n\npublic class WorldMap extends JComponent {\n\n    private static final long serialVersionUID = -4823224592445587979L;\n\n    public static int WIDTH = 1280;\n    public static int HEIGHT = 768;\n\n    public WorldMap() {\n        setBounds(0, 0, WIDTH, HEIGHT);\n    }\n\n    public Point location = new Point(0, 0);\n    public double zoomLevel = 3;\n\n    protected java.awt.Point p;\n\n    private static boolean settedUp = false;\n\n    private static BufferedImage areaMap = null;\n    private static BufferedImage countryMap = null;\n    private static BufferedImage regionMap = null;\n\n    public static void createPreMaps() {\n        Point max = Area.max();\n        areaMap = new BufferedImage(max.X, max.Y, BufferedImage.TYPE_INT_ARGB);\n        countryMap = new BufferedImage(max.X, max.Y, BufferedImage.TYPE_INT_ARGB);\n        regionMap = new BufferedImage(max.X, max.Y, BufferedImage.TYPE_INT_ARGB);\n        // AREA MAP\n        Graphics g = areaMap.createGraphics();\n        for (Area area : Area.areas()) {\n            g.setColor(area.color());\n            for (Point p : area.points) {\n                g.fillRect(p.X, p.Y, 1, 1);\n            }\n            g.setColor(area.color().darker());\n            /*\n             * for (Border b : area.borders) { g.fillRect(b.p.X, b.p.Y, 1, 1); }\n             */\n        }\n        // COUNTRY MAP\n        // g = countryMap.createGraphics();\n        // REGION MAP\n        // g = regionMap.createGraphics();\n    }\n\n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        if (!settedUp) {\n            settedUp = true;\n            createPreMaps();\n        }\n        Rectangle r = new Rectangle((int) (location.X * zoomLevel), (int) (location.Y * zoomLevel),\n                (int) (areaMap.getWidth() * zoomLevel), (int) (areaMap.getHeight() * zoomLevel));\n        g.drawImage(areaMap, r.x, r.y, r.width, r.height, null);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","dagger-2","dagger","dagger-hilt"],"answers":[{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660714184,"creation_date":1660714184,"answer_id":73383272,"question_id":73354702,"body_markdown":"It might lead to memory leaks, but only by compounding other problems. As a general statement, `@Singleton` objects can also leak memory.\r\n\r\nFirst and most obvious: If you meant to add `@Singleton` but forgot to do so, then every time you inject a MyApi, you would very likely get a different MyApiImpl instance. This might lead to incorrect behavior if you meant MyApiImpl to be stateful: you wouldn&#39;t want five counters with `value = 1` instead of one counter with `value = 5`.\r\n\r\nRegarding memory, if MyApiImpl is injected a finite number of times--especially from @Singleton components--it might not be a &quot;memory leak&quot; in the traditional infinite sense: Your app would consume more memory than it might have otherwise, but the instances will likely be garbage-collected when their parent instances are garbage collected. You could probably find a way to create a memory leak by injecting lots of those instances via a `Provider&lt;MyApi&gt;` and saving them to an array or collection, but that&#39;s a problem of your usage, not of scopeless objects installed in Hilt Singleton components. Besides, instances without much state may take up only [tens of bytes](https://dev.to/pyricau/the-real-size-of-android-objects-1i2e) of memory in modern implementations; without careful metrics you might not even notice the difference.\r\n\r\nDone well, scopeless objects can have better memory behavior than scoped objects: If your injected object doesn&#39;t keep any state, then it is in your interest to destroy the instance and reclaim its memory as soon as you&#39;re done using it. Any object you request marked `@Singleton` will necessarily stick around for the lifetime of the application, so the runtime can never garbage collect the object or the objects it refers to. Arguably this too is not the fault of `@Singleton`, but rather one of usage; my point is just that neither mode is inherently better as long as you understand the semantics of the objects you inject.\r\n\r\nAside: For stateless objects like strategy pattern objects (or some API surfaces), you might also consider [@Reusable](https://stackoverflow.com/q/39136042/1426891). It has some costs too, but allows some garbage collection and avoids synchronizing the object creation.","title":"Should one install instance variable dependencies in the singleton module?","body":"<p>It might lead to memory leaks, but only by compounding other problems. As a general statement, <code>@Singleton</code> objects can also leak memory.</p>\n<p>First and most obvious: If you meant to add <code>@Singleton</code> but forgot to do so, then every time you inject a MyApi, you would very likely get a different MyApiImpl instance. This might lead to incorrect behavior if you meant MyApiImpl to be stateful: you wouldn't want five counters with <code>value = 1</code> instead of one counter with <code>value = 5</code>.</p>\n<p>Regarding memory, if MyApiImpl is injected a finite number of times--especially from @Singleton components--it might not be a &quot;memory leak&quot; in the traditional infinite sense: Your app would consume more memory than it might have otherwise, but the instances will likely be garbage-collected when their parent instances are garbage collected. You could probably find a way to create a memory leak by injecting lots of those instances via a <code>Provider&lt;MyApi&gt;</code> and saving them to an array or collection, but that's a problem of your usage, not of scopeless objects installed in Hilt Singleton components. Besides, instances without much state may take up only <a href=\"https://dev.to/pyricau/the-real-size-of-android-objects-1i2e\" rel=\"nofollow noreferrer\">tens of bytes</a> of memory in modern implementations; without careful metrics you might not even notice the difference.</p>\n<p>Done well, scopeless objects can have better memory behavior than scoped objects: If your injected object doesn't keep any state, then it is in your interest to destroy the instance and reclaim its memory as soon as you're done using it. Any object you request marked <code>@Singleton</code> will necessarily stick around for the lifetime of the application, so the runtime can never garbage collect the object or the objects it refers to. Arguably this too is not the fault of <code>@Singleton</code>, but rather one of usage; my point is just that neither mode is inherently better as long as you understand the semantics of the objects you inject.</p>\n<p>Aside: For stateless objects like strategy pattern objects (or some API surfaces), you might also consider <a href=\"https://stackoverflow.com/q/39136042/1426891\">@Reusable</a>. It has some costs too, but allows some garbage collection and avoids synchronizing the object creation.</p>\n"},{"tags":[],"owner":{"account_id":3216945,"reputation":8445,"user_id":2715384,"accept_rate":55,"display_name":"the_prole"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660754881,"creation_date":1660754881,"answer_id":73392193,"question_id":73354702,"body_markdown":"Un-scoped bindings are not scoped to their components. \r\n\r\n&gt;By default, all bindings in Hilt are unscoped. This means that each time your app requests the binding, Hilt creates a new instance of the needed type.\r\n\r\n&gt;However, Hilt also allows a binding to be scoped to a particular component. Hilt only creates a scoped binding once per instance of the component that the binding is scoped to, and all requests for that binding share the same instance.\r\n\r\nhttps://developer.android.com/training/dependency-injection/hilt-android#component-scopes","title":"Should one install instance variable dependencies in the singleton module?","body":"<p>Un-scoped bindings are not scoped to their components.</p>\n<blockquote>\n<p>By default, all bindings in Hilt are unscoped. This means that each time your app requests the binding, Hilt creates a new instance of the needed type.</p>\n</blockquote>\n<blockquote>\n<p>However, Hilt also allows a binding to be scoped to a particular component. Hilt only creates a scoped binding once per instance of the component that the binding is scoped to, and all requests for that binding share the same instance.</p>\n</blockquote>\n<p><a href=\"https://developer.android.com/training/dependency-injection/hilt-android#component-scopes\" rel=\"nofollow noreferrer\">https://developer.android.com/training/dependency-injection/hilt-android#component-scopes</a></p>\n"}],"owner":{"account_id":3216945,"reputation":8445,"user_id":2715384,"accept_rate":55,"display_name":"the_prole"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73383272,"answer_count":2,"score":0,"last_activity_date":1660754881,"creation_date":1660506779,"question_id":73354702,"body_markdown":"We can use the `@Singleton` annotation to denote the dependency as a singleton, and then install the dependency to the singleton component to give the singleton the application life time e.g.\r\n\r\n```\r\n@InstallIn(SingletonComponent::class)\r\nclass AppModule {\r\n\r\n    @Provides @Singleton\r\n    fun provideMyApi(): MyApi {\r\n        return MyApiImpl()\r\n}\r\n```\r\n\r\nbut if we were to forget to add the `@Singleton` annotation, could this potentially cause a memory leak?\r\n\r\nBecause now we&#39;re adding a new instance variable with application life time every time we create the dependency?\r\n","title":"Should one install instance variable dependencies in the singleton module?","body":"<p>We can use the <code>@Singleton</code> annotation to denote the dependency as a singleton, and then install the dependency to the singleton component to give the singleton the application life time e.g.</p>\n<pre><code>@InstallIn(SingletonComponent::class)\nclass AppModule {\n\n    @Provides @Singleton\n    fun provideMyApi(): MyApi {\n        return MyApiImpl()\n}\n</code></pre>\n<p>but if we were to forget to add the <code>@Singleton</code> annotation, could this potentially cause a memory leak?</p>\n<p>Because now we're adding a new instance variable with application life time every time we create the dependency?</p>\n"},{"tags":["java","spring-boot","mocking","integration-testing","spring-restcontroller"],"comments":[{"owner":{"account_id":7427874,"reputation":374,"user_id":5649810,"display_name":"lubrum"},"score":0,"creation_date":1678123864,"post_id":73392164,"comment_id":133468662,"body_markdown":"Did you considered using CompletableFuture API ?","body":"Did you considered using CompletableFuture API ?"}],"owner":{"account_id":3855913,"reputation":433,"user_id":3194858,"accept_rate":100,"display_name":"Andulos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":660,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660754758,"creation_date":1660754758,"question_id":73392164,"body_markdown":"I am writing integration tests for a REST API. I would like to test the application with multiple parallel requests. Can I do it programmatically? \r\n\r\nBelow is my Test class\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @ExtendWith({SpringExtension.class,MockitoExtension.class})\r\n    @SpringBootTest\r\n    @ActivePRofiles(&quot;test&quot;)\r\n    @ContextConfiguration(classes = MyConfiguration.class)\r\n    public class MyControllerTest {\r\n        @Resource(name = &quot;products&quot;)\r\n        public Map&lt;String,String&gt; products;\r\n\r\n        @Autowired\r\n        MockMvc mockMvc;\r\n\r\n        @Autowired\r\n        WebAplicationContext webApplicationContext;\r\n\r\n        @Mock\r\n        SomeService someService;\r\n        ...\r\n        ...\r\n        @Test\r\n        public void testMethod() {\r\n            ...\r\n            ...\r\n            MvcResult result = mockMvc.perform(requestBuilder).andReturn();\r\n            ...\r\n            assertEquals(HttpStatus.OK.value(),result.getResponse().getStatus());\r\n        }\r\n        ...\r\n    }\r\n\r\n","title":"How to test a Spring Boot REST API with multiple parallel requests","body":"<p>I am writing integration tests for a REST API. I would like to test the application with multiple parallel requests. Can I do it programmatically?</p>\n<p>Below is my Test class</p>\n<pre><code>@RunWith(SpringRunner.class)\n@ExtendWith({SpringExtension.class,MockitoExtension.class})\n@SpringBootTest\n@ActivePRofiles(&quot;test&quot;)\n@ContextConfiguration(classes = MyConfiguration.class)\npublic class MyControllerTest {\n    @Resource(name = &quot;products&quot;)\n    public Map&lt;String,String&gt; products;\n\n    @Autowired\n    MockMvc mockMvc;\n\n    @Autowired\n    WebAplicationContext webApplicationContext;\n\n    @Mock\n    SomeService someService;\n    ...\n    ...\n    @Test\n    public void testMethod() {\n        ...\n        ...\n        MvcResult result = mockMvc.perform(requestBuilder).andReturn();\n        ...\n        assertEquals(HttpStatus.OK.value(),result.getResponse().getStatus());\n    }\n    ...\n}\n</code></pre>\n"},{"tags":["java","stream","java-stream"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1660728021,"post_id":73385858,"comment_id":129598737,"body_markdown":"What have you trie so far?","body":"What have you trie so far?"},{"owner":{"account_id":16584656,"reputation":40,"user_id":11984392,"display_name":"shanmukhavarma"},"score":0,"creation_date":1660728179,"post_id":73385858,"comment_id":129598797,"body_markdown":"i am complete new to java could you pls help me","body":"i am complete new to java could you pls help me"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1660728252,"post_id":73385858,"comment_id":129598824,"body_markdown":"I wonder what the real intention of doing so is?","body":"I wonder what the real intention of doing so is?"},{"owner":{"account_id":16584656,"reputation":40,"user_id":11984392,"display_name":"shanmukhavarma"},"score":0,"creation_date":1660728383,"post_id":73385858,"comment_id":129598859,"body_markdown":"to reduce lines of code","body":"to reduce lines of code"},{"owner":{"account_id":9255220,"reputation":2956,"user_id":6874359,"display_name":"peterulb"},"score":2,"creation_date":1660728443,"post_id":73385858,"comment_id":129598883,"body_markdown":"Your output isn&#39;t what your code is producing. Your code yields `[partner2/partner1/2022-05-18, partner2/partner1/2022-05-19]`","body":"Your output isn&#39;t what your code is producing. Your code yields <code>[partner2&#47;partner1&#47;2022-05-18, partner2&#47;partner1&#47;2022-05-19]</code>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1660728586,"post_id":73385858,"comment_id":129598933,"body_markdown":"then just remove all new-line and you will have just one line, can&#39;t reduce more, but it will be hard to read and maintain - in other words, very bad goal... better aim for easier to understand/read/maintain code (even if more lines of code needed - like it is also better to have descriptive variable names instead of single-letter ones) BTW using streams will not necessarily be faster or use less memory","body":"then just remove all new-line and you will have just one line, can&#39;t reduce more, but it will be hard to read and maintain - in other words, very bad goal... better aim for easier to understand/read/maintain code (even if more lines of code needed - like it is also better to have descriptive variable names instead of single-letter ones) BTW using streams will not necessarily be faster or use less memory"},{"owner":{"account_id":16584656,"reputation":40,"user_id":11984392,"display_name":"shanmukhavarma"},"score":0,"creation_date":1660729067,"post_id":73385858,"comment_id":129599097,"body_markdown":"atleast can i get the stream api code, that will be helpful","body":"atleast can i get the stream api code, that will be helpful"}],"answers":[{"tags":[],"owner":{"account_id":9255220,"reputation":2956,"user_id":6874359,"display_name":"peterulb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660730022,"creation_date":1660730022,"answer_id":73386393,"question_id":73385858,"body_markdown":"Assuming the result `[partner1/2022-05-18, partner1/2022-05-19, partner2/2022-05-18, partner2/2022-05-19]` is what you want:\r\n\r\n```\r\nList&lt;String&gt; result = partnersName.stream().&lt;String&gt;mapMulti((s, stringConsumer) -&gt; totalDates.forEach(d -&gt; stringConsumer.accept(s + &quot;/&quot; + d))).toList();\r\n```","title":"How to add each element in of two list using stream api in java","body":"<p>Assuming the result <code>[partner1/2022-05-18, partner1/2022-05-19, partner2/2022-05-18, partner2/2022-05-19]</code> is what you want:</p>\n<pre><code>List&lt;String&gt; result = partnersName.stream().&lt;String&gt;mapMulti((s, stringConsumer) -&gt; totalDates.forEach(d -&gt; stringConsumer.accept(s + &quot;/&quot; + d))).toList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25376058,"reputation":1338,"user_id":19189183,"display_name":"Sayan Bhattacharya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660738358,"creation_date":1660738358,"answer_id":73388291,"question_id":73385858,"body_markdown":"Another way can be \r\n```java\r\nList&lt;String&gt; result = partnersName.stream()\r\n                        .flatMap(x -&gt; totalDates.stream().map(y -&gt; x.concat(&quot;/&quot;+y)))\r\n                        .collect(Collectors.toList());\r\n\r\n//output: [partner1/2022-05-18, partner1/2022-05-19, partner2/2022-05-18, partner2/2022-05-19]\r\n```","title":"How to add each element in of two list using stream api in java","body":"<p>Another way can be</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; result = partnersName.stream()\n                        .flatMap(x -&gt; totalDates.stream().map(y -&gt; x.concat(&quot;/&quot;+y)))\n                        .collect(Collectors.toList());\n\n//output: [partner1/2022-05-18, partner1/2022-05-19, partner2/2022-05-18, partner2/2022-05-19]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1660754342,"creation_date":1660754342,"answer_id":73392085,"question_id":73385858,"body_markdown":"Here is one way.\r\n```\r\nList&lt;String&gt; partnerName = List.of(&quot;partner1&quot;,&quot;partner2&quot;);\r\nList&lt;String&gt; totalDates = List.of(&quot;2022-05-18&quot;,&quot;2022-05-19&quot;);\r\n\r\nList&lt;String&gt; result = partnerName.stream()\r\n        .flatMap(name -&gt; totalDates.stream()\r\n        \t\t.map(date-&gt;String.join(&quot;/&quot;, name, date)))\r\n        .toList();\r\n\t\r\nSystem.out.println(result);\r\n```\r\nprints\r\n```\r\n[partner1/2022-05-18, partner1/2022-05-19, partner2/2022-05-18, partner2/2022-05\r\n-19]\r\n```\r\n- The above uses nested streams to process each List.\r\n- `String.join` - takes a delimiter and a variable number of arguments and concatenates them, separated by the delimiter.\r\n- `flatMap` flattens the nested streams into one for conversion to a list.\r\n","title":"How to add each element in of two list using stream api in java","body":"<p>Here is one way.</p>\n<pre><code>List&lt;String&gt; partnerName = List.of(&quot;partner1&quot;,&quot;partner2&quot;);\nList&lt;String&gt; totalDates = List.of(&quot;2022-05-18&quot;,&quot;2022-05-19&quot;);\n\nList&lt;String&gt; result = partnerName.stream()\n        .flatMap(name -&gt; totalDates.stream()\n                .map(date-&gt;String.join(&quot;/&quot;, name, date)))\n        .toList();\n    \nSystem.out.println(result);\n</code></pre>\n<p>prints</p>\n<pre><code>[partner1/2022-05-18, partner1/2022-05-19, partner2/2022-05-18, partner2/2022-05\n-19]\n</code></pre>\n<ul>\n<li>The above uses nested streams to process each List.</li>\n<li><code>String.join</code> - takes a delimiter and a variable number of arguments and concatenates them, separated by the delimiter.</li>\n<li><code>flatMap</code> flattens the nested streams into one for conversion to a list.</li>\n</ul>\n"}],"owner":{"account_id":16584656,"reputation":40,"user_id":11984392,"display_name":"shanmukhavarma"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73392085,"answer_count":3,"score":0,"last_activity_date":1660754342,"creation_date":1660727775,"question_id":73385858,"body_markdown":"\r\n\r\n    partnersName =[&quot;partner1&quot;,&quot;partner2&quot;];\r\n    \r\n    totalDates = [&quot;2022-05-18&quot;,&quot;2022-05-19&quot;];\r\n\r\nboth the lists store string only\r\n\r\nhere is the following code which gives output that I want\r\n\r\n\r\n     for (int i = 0; i &lt; partnersName.size(); i++) {\r\n\t\t\tif (totalDates.isEmpty()) {\r\n\t\t\t\ttotalDates.add(partnersName.get(i));\r\n\t\t\t} else {\r\n\t\t\t\tfor (int j = 0; j &lt; totalDates.size(); j++) {\r\n\t\t\t\t\ttotalDates.set(j, partnersName.get(i) +&quot;/&quot; +totalDates.get(j));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n&gt; output\r\n&gt; =[&quot;partner1/2022-05-18&quot;,&quot;partner2/2022-05-18&quot;,&quot;partner1/2022-05-19&quot;,&quot;partner2/2022-05-19&quot;];\r\n\r\nbut I want to reduce the line of code using stream. Anyone could help to get stream API code\r\n","title":"How to add each element in of two list using stream api in java","body":"<pre><code>partnersName =[&quot;partner1&quot;,&quot;partner2&quot;];\n\ntotalDates = [&quot;2022-05-18&quot;,&quot;2022-05-19&quot;];\n</code></pre>\n<p>both the lists store string only</p>\n<p>here is the following code which gives output that I want</p>\n<pre><code> for (int i = 0; i &lt; partnersName.size(); i++) {\n        if (totalDates.isEmpty()) {\n            totalDates.add(partnersName.get(i));\n        } else {\n            for (int j = 0; j &lt; totalDates.size(); j++) {\n                totalDates.set(j, partnersName.get(i) +&quot;/&quot; +totalDates.get(j));\n            }\n        }\n    }\n</code></pre>\n<blockquote>\n<p>output\n=[&quot;partner1/2022-05-18&quot;,&quot;partner2/2022-05-18&quot;,&quot;partner1/2022-05-19&quot;,&quot;partner2/2022-05-19&quot;];</p>\n</blockquote>\n<p>but I want to reduce the line of code using stream. Anyone could help to get stream API code</p>\n"},{"tags":["java","android-studio"],"answers":[{"tags":[],"owner":{"account_id":4093853,"reputation":568,"user_id":3361187,"accept_rate":72,"display_name":"Bilal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660754107,"creation_date":1660754107,"answer_id":73392026,"question_id":73378656,"body_markdown":"Solved this by using custom listView that are not scrollable.\r\n\r\nRef: https://stackoverflow.com/questions/18813296/non-scrollable-listview-inside-scrollview","title":"Scrollview not scrolling on android with multiple lists","body":"<p>Solved this by using custom listView that are not scrollable.</p>\n<p>Ref: <a href=\"https://stackoverflow.com/questions/18813296/non-scrollable-listview-inside-scrollview\">Non-scrollable ListView inside ScrollView</a></p>\n"}],"owner":{"account_id":4093853,"reputation":568,"user_id":3361187,"accept_rate":72,"display_name":"Bilal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660754107,"creation_date":1660674491,"question_id":73378656,"body_markdown":"I was getting started with android app development and my requirement is to add a list with some headers in it. I managed to implement this using a combinations of textView and listView. Following is my xml code:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.core.widget.NestedScrollView\r\n\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:animateLayoutChanges=&quot;true&quot;\r\n    android:fillViewport=&quot;true&quot;\r\n    android:orientation=&quot;vertical&quot;&gt;\r\n\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.ui.home.HomeFragment&quot;&gt;\r\n\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_margin=&quot;10dp&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            android:padding=&quot;10dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\r\n\r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;Header 1&quot; /&gt;\r\n\r\n            &lt;ListView\r\n                android:id=&quot;@+id/list1&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:entries=&quot;@array/sports_array&quot; /&gt;\r\n\r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;Header 2&quot; /&gt;\r\n\r\n            &lt;ListView\r\n                android:id=&quot;@+id/list2&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:entries=&quot;@array/sports_array&quot; /&gt;\r\n\r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;Header 3&quot; /&gt;\r\n\r\n            &lt;ListView\r\n                android:id=&quot;@+id/list3&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:entries=&quot;@array/sports_array&quot; /&gt;\r\n\r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;Header 4&quot; /&gt;\r\n\r\n            &lt;ListView\r\n                android:id=&quot;@+id/list4&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:entries=&quot;@array/sports_array&quot; /&gt;\r\n\r\n        &lt;/LinearLayout&gt;\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    &lt;/androidx.core.widget.NestedScrollView&gt;\r\n\r\n\r\nAnd sports_array is equal to:\r\n\r\n     &lt;string-array name=&quot;sports_array&quot;&gt;\r\n            &lt;item&gt;Shuttle Badminton&lt;/item&gt;\r\n            &lt;item&gt;Tennis&lt;/item&gt;\r\n            &lt;item&gt;FootBall&lt;/item&gt;\r\n            &lt;item&gt;Basket Ball&lt;/item&gt;\r\n            &lt;item&gt;Table Tennis&lt;/item&gt;\r\n            &lt;item&gt;Chess&lt;/item&gt;\r\n            &lt;item&gt;Hockey&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n\r\n\r\nNow the problem is that it loads all the lists on the UI but it doesn&#39;t scroll down to make the elements visible that are not displayed.\r\n","title":"Scrollview not scrolling on android with multiple lists","body":"<p>I was getting started with android app development and my requirement is to add a list with some headers in it. I managed to implement this using a combinations of textView and listView. Following is my xml code:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.core.widget.NestedScrollView\n\nxmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nandroid:animateLayoutChanges=&quot;true&quot;\nandroid:fillViewport=&quot;true&quot;\nandroid:orientation=&quot;vertical&quot;&gt;\n\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.ui.home.HomeFragment&quot;&gt;\n\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_margin=&quot;10dp&quot;\n        android:orientation=&quot;vertical&quot;\n        android:padding=&quot;10dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Header 1&quot; /&gt;\n\n        &lt;ListView\n            android:id=&quot;@+id/list1&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:entries=&quot;@array/sports_array&quot; /&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Header 2&quot; /&gt;\n\n        &lt;ListView\n            android:id=&quot;@+id/list2&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:entries=&quot;@array/sports_array&quot; /&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Header 3&quot; /&gt;\n\n        &lt;ListView\n            android:id=&quot;@+id/list3&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:entries=&quot;@array/sports_array&quot; /&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Header 4&quot; /&gt;\n\n        &lt;ListView\n            android:id=&quot;@+id/list4&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:entries=&quot;@array/sports_array&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;/androidx.core.widget.NestedScrollView&gt;\n</code></pre>\n<p>And sports_array is equal to:</p>\n<pre><code> &lt;string-array name=&quot;sports_array&quot;&gt;\n        &lt;item&gt;Shuttle Badminton&lt;/item&gt;\n        &lt;item&gt;Tennis&lt;/item&gt;\n        &lt;item&gt;FootBall&lt;/item&gt;\n        &lt;item&gt;Basket Ball&lt;/item&gt;\n        &lt;item&gt;Table Tennis&lt;/item&gt;\n        &lt;item&gt;Chess&lt;/item&gt;\n        &lt;item&gt;Hockey&lt;/item&gt;\n    &lt;/string-array&gt;\n</code></pre>\n<p>Now the problem is that it loads all the lists on the UI but it doesn't scroll down to make the elements visible that are not displayed.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660746987,"creation_date":1660746987,"answer_id":73390371,"question_id":73390311,"body_markdown":"You can use a static initializer:\r\n\r\n    private static final Set&lt;String&gt; set;\r\n\r\n    static {\r\n        set = new TreeSet&lt;&gt;(String.CASE_INSENSITIVE_ORDER);\r\n        set.addAll(asList(&quot;string1&quot;, &quot;string2&quot;));\r\n    }\r\n\r\nNote that making it `final` does not make the set itself immutable or unmodifiable. It&#39;s still possible to add or remove elements after the set has been initialized.\r\n\r\nIf you want to make the set unmodifiable (to make sure its contents cannot be modified after it has been initialized), you can also wrap it with `Collections.unmodifiableSet()`:\r\n\r\n    static {\r\n        Set&lt;String&gt; s = new TreeSet&lt;&gt;(String.CASE_INSENSITIVE_ORDER);\r\n        s.addAll(asList(&quot;string1&quot;, &quot;string2&quot;));\r\n        set = Collections.unmodifiableSet(s);\r\n    }\r\n\r\n","title":"How to initialize a final Set with both Values and a Comparator without Double Brace Initialization","body":"<p>You can use a static initializer:</p>\n<pre><code>private static final Set&lt;String&gt; set;\n\nstatic {\n    set = new TreeSet&lt;&gt;(String.CASE_INSENSITIVE_ORDER);\n    set.addAll(asList(&quot;string1&quot;, &quot;string2&quot;));\n}\n</code></pre>\n<p>Note that making it <code>final</code> does not make the set itself immutable or unmodifiable. It's still possible to add or remove elements after the set has been initialized.</p>\n<p>If you want to make the set unmodifiable (to make sure its contents cannot be modified after it has been initialized), you can also wrap it with <code>Collections.unmodifiableSet()</code>:</p>\n<pre><code>static {\n    Set&lt;String&gt; s = new TreeSet&lt;&gt;(String.CASE_INSENSITIVE_ORDER);\n    s.addAll(asList(&quot;string1&quot;, &quot;string2&quot;));\n    set = Collections.unmodifiableSet(s);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":319988,"reputation":10970,"user_id":638028,"accept_rate":91,"display_name":"Klitos Kyriacou"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660753765,"creation_date":1660751375,"answer_id":73391421,"question_id":73390311,"body_markdown":"Using a static initializer (as in Jesper&#39;s answer) may be the best choice, but if you really want to initialize it on the same line as the declaration, you can use a private method for that:\r\n\r\n\r\n    private static final Set&lt;String&gt; set = orderedSet&lt;&gt;(\r\n            String.CASE_INSENSITIVE_ORDER,\r\n            List.of(&quot;string1&quot;, &quot;string2&quot;));\r\n\r\n    private static &lt;T&gt; SortedSet&lt;T&gt; orderedSet(\r\n            Comparator&lt;? super T&gt; comparator,\r\n            Collection&lt;? extends T&gt; c)\r\n    {\r\n        SortedSet&lt;T&gt; s = new TreeSet&lt;&gt;(comparator);\r\n        s.addAll(c);\r\n        return Collections.unmodifiableSet(s);\r\n    }\r\n\r\nThe advantage of using this method is that you could also use it generally in any expression.","title":"How to initialize a final Set with both Values and a Comparator without Double Brace Initialization","body":"<p>Using a static initializer (as in Jesper's answer) may be the best choice, but if you really want to initialize it on the same line as the declaration, you can use a private method for that:</p>\n<pre><code>private static final Set&lt;String&gt; set = orderedSet&lt;&gt;(\n        String.CASE_INSENSITIVE_ORDER,\n        List.of(&quot;string1&quot;, &quot;string2&quot;));\n\nprivate static &lt;T&gt; SortedSet&lt;T&gt; orderedSet(\n        Comparator&lt;? super T&gt; comparator,\n        Collection&lt;? extends T&gt; c)\n{\n    SortedSet&lt;T&gt; s = new TreeSet&lt;&gt;(comparator);\n    s.addAll(c);\n    return Collections.unmodifiableSet(s);\n}\n</code></pre>\n<p>The advantage of using this method is that you could also use it generally in any expression.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660753030,"creation_date":1660753030,"answer_id":73391793,"question_id":73390311,"body_markdown":"Using `Arrays.asList` is not nice: better use `Collections.addAll(set, &quot;a&quot;, &quot;b&quot;)`. Instead of an anonymous class initializer `{{ }}` it is better to use a static initializer `static { }`.\r\n\r\nHowever listing several values is best done with a Stream (resp. IntStream e.a.).\r\nAs `Collectors.toSet()` cannot pick the constructor, use `toCollection`.\r\n \r\n    private static final Set&lt;String&gt; set =\r\n            Stream.of(&quot;string1&quot;, &quot;string2&quot;)\r\n                    .collect(Collectors.toCollection(() -&gt;\r\n                            new TreeSet&lt;&gt;(String.CASE_INSENSITIVE_ORDER)));\r\n\r\nThe mentioned `Collections.unmodifiableSet` would indeed make sense, say for a `public static final Set`- You might also provide the set as `SortedSet`.","title":"How to initialize a final Set with both Values and a Comparator without Double Brace Initialization","body":"<p>Using <code>Arrays.asList</code> is not nice: better use <code>Collections.addAll(set, &quot;a&quot;, &quot;b&quot;)</code>. Instead of an anonymous class initializer <code>{{ }}</code> it is better to use a static initializer <code>static { }</code>.</p>\n<p>However listing several values is best done with a Stream (resp. IntStream e.a.).\nAs <code>Collectors.toSet()</code> cannot pick the constructor, use <code>toCollection</code>.</p>\n<pre><code>private static final Set&lt;String&gt; set =\n        Stream.of(&quot;string1&quot;, &quot;string2&quot;)\n                .collect(Collectors.toCollection(() -&gt;\n                        new TreeSet&lt;&gt;(String.CASE_INSENSITIVE_ORDER)));\n</code></pre>\n<p>The mentioned <code>Collections.unmodifiableSet</code> would indeed make sense, say for a <code>public static final Set</code>- You might also provide the set as <code>SortedSet</code>.</p>\n"}],"owner":{"account_id":22053969,"reputation":137,"user_id":16317812,"display_name":"PumpingSalad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":785,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73390371,"answer_count":3,"score":0,"last_activity_date":1660753765,"creation_date":1660746795,"question_id":73390311,"body_markdown":"Given the following Code:\r\n\r\n        private static final Set&lt;String&gt; set = \r\n            new TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER) {{\r\n                addAll(asList(&quot;string1&quot;, &quot;string2&quot;));\r\n        }};\r\n\r\nHow would one go about creating a set without Double Brace Initialization? I have Sonar complaining about it and can&#39;t figure out a solution due to my Set both needing values as it has to be final and having to ignore case sensitiveness.\r\n","title":"How to initialize a final Set with both Values and a Comparator without Double Brace Initialization","body":"<p>Given the following Code:</p>\n<pre><code>    private static final Set&lt;String&gt; set = \n        new TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER) {{\n            addAll(asList(&quot;string1&quot;, &quot;string2&quot;));\n    }};\n</code></pre>\n<p>How would one go about creating a set without Double Brace Initialization? I have Sonar complaining about it and can't figure out a solution due to my Set both needing values as it has to be final and having to ignore case sensitiveness.</p>\n"},{"tags":["java","spring","annotations","javabeans"],"comments":[{"owner":{"account_id":13038047,"reputation":476,"user_id":9422268,"display_name":"Joonseo Lee"},"score":0,"creation_date":1660710615,"post_id":73378598,"comment_id":129593902,"body_markdown":"what is the error message?","body":"what is the error message?"},{"owner":{"account_id":26079813,"reputation":1,"user_id":19778181,"display_name":"Marcos Vieira"},"score":0,"creation_date":1660734322,"post_id":73378598,"comment_id":129601153,"body_markdown":"Field aluguelValorForm in projeto.locadora.locadora.controllers.AluguelController required a bean of type &#39;projeto.locadora.locadora.controller.form.AluguelValorForm&#39; that could not be found.\n\nThe injection point has the following annotations:\n\t- @org.springframework.beans.factory.annotation.Autowired(required=true)","body":"Field aluguelValorForm in projeto.locadora.locadora.controllers.AluguelController required a bean of type &#39;projeto.locadora.locadora.controller.form.AluguelValorForm&#39; that could not be found.  The injection point has the following annotations: \t- @org.springframework.beans.factory.annotation.Autowired(requ&zwnj;&#8203;ired=true)"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1660741847,"post_id":73378598,"comment_id":129604059,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":26079813,"reputation":1,"user_id":19778181,"display_name":"Marcos Vieira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660753527,"creation_date":1660753527,"answer_id":73391904,"question_id":73378598,"body_markdown":"Problem solved. Apparently, it&#39;s not possible to @Autowired a class that doesn&#39;t have any bean, like my RentValue. That&#39;s why I got this error.","title":"Consider defining a bean of type &#39;form&#39; in your configuration","body":"<p>Problem solved. Apparently, it's not possible to @Autowired a class that doesn't have any bean, like my RentValue. That's why I got this error.</p>\n"}],"owner":{"account_id":26079813,"reputation":1,"user_id":19778181,"display_name":"Marcos Vieira"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660753527,"creation_date":1660674169,"question_id":73378598,"body_markdown":"Place that is complaining the error:\r\n\r\n```\r\n@Data\r\npublic class AluguelValorForm {\r\n\t\r\n\t@Autowired\r\n\tprivate ValorAluguelMultaService valorAluguelMultaService;\r\n\t\r\n\t@NotNull @NotEmpty\r\n\tprivate String idAluguel;\r\n\t\r\n\t@NotNull \r\n\tprivate Double valor;\r\n\r\n\r\n\tpublic AluguelValor converter(AluguelValorRepository aluguelValorRepository, AluguelForm form ) {\r\n\t\tDouble valorAluguel = valorAluguelMultaService.valorAluguel(form);\r\n\t\treturn new AluguelValor(idAluguel,valorAluguel);\r\n\t}\r\n\t\r\n\tpublic AluguelValor update(String idAluguel,Double valor) {\r\n\t\tAluguelValor aluguelValor = new AluguelValor();\r\n\t\t\r\n\t\taluguelValor.setId(idAluguel);\r\n\t\taluguelValor.setValor(valor);\r\n\t\t\r\n\t\treturn aluguelValor;\r\n\t\t\r\n\t}\r\n```\t\r\nRepository:\r\n\r\n    \r\n```\r\n@Repository\r\npublic interface AluguelValorRepository extends MongoRepository&lt;AluguelValor, String&gt; {\r\n\t\r\n\tAluguel getReferenceById(String id);\r\n\r\n}\r\n```\r\n\r\nPlace that I call the method in AluguelValorForm:\r\n\r\n    @PostMapping\r\n\t//@CacheEvict(value = &quot;listaDeTopicos&quot;,allEntries = true)\r\n\tpublic void cadastrar(@RequestBody  AluguelForm form) {\r\n\t\tOptional&lt;Carro&gt; carro = carroRepository.findByPlaca(form.getPlaca_carro());\r\n\t\tOptional&lt;Cliente&gt; cliente = clienteRepository.findByCpf(form.getCpf());\r\n\t\t\r\n\t\tif(carro.isPresent() &amp;&amp; cliente.isPresent()) {\r\n\t\t\tAluguel aluguel2 = form.converter(aluguelRepository);\r\n\t\t\taluguelRepository.save(aluguel2);\r\n\t\t\t\r\n\t\t\tDouble valorAluguel = valorAluguelMultaService.valorAluguel(form);\r\n\t\t\tAluguelValor aluguelValor = aluguelValorForm.update(aluguel2.getId(), valorAluguel);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\taluguelValorRepository.save(aluguelValor);\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n","title":"Consider defining a bean of type &#39;form&#39; in your configuration","body":"<p>Place that is complaining the error:</p>\n<pre><code>@Data\npublic class AluguelValorForm {\n    \n    @Autowired\n    private ValorAluguelMultaService valorAluguelMultaService;\n    \n    @NotNull @NotEmpty\n    private String idAluguel;\n    \n    @NotNull \n    private Double valor;\n\n\n    public AluguelValor converter(AluguelValorRepository aluguelValorRepository, AluguelForm form ) {\n        Double valorAluguel = valorAluguelMultaService.valorAluguel(form);\n        return new AluguelValor(idAluguel,valorAluguel);\n    }\n    \n    public AluguelValor update(String idAluguel,Double valor) {\n        AluguelValor aluguelValor = new AluguelValor();\n        \n        aluguelValor.setId(idAluguel);\n        aluguelValor.setValor(valor);\n        \n        return aluguelValor;\n        \n    }\n</code></pre>\n<p>Repository:</p>\n<pre><code>@Repository\npublic interface AluguelValorRepository extends MongoRepository&lt;AluguelValor, String&gt; {\n    \n    Aluguel getReferenceById(String id);\n\n}\n</code></pre>\n<p>Place that I call the method in AluguelValorForm:</p>\n<pre><code>@PostMapping\n//@CacheEvict(value = &quot;listaDeTopicos&quot;,allEntries = true)\npublic void cadastrar(@RequestBody  AluguelForm form) {\n    Optional&lt;Carro&gt; carro = carroRepository.findByPlaca(form.getPlaca_carro());\n    Optional&lt;Cliente&gt; cliente = clienteRepository.findByCpf(form.getCpf());\n    \n    if(carro.isPresent() &amp;&amp; cliente.isPresent()) {\n        Aluguel aluguel2 = form.converter(aluguelRepository);\n        aluguelRepository.save(aluguel2);\n        \n        Double valorAluguel = valorAluguelMultaService.valorAluguel(form);\n        AluguelValor aluguelValor = aluguelValorForm.update(aluguel2.getId(), valorAluguel);\n        \n        \n        aluguelValorRepository.save(aluguelValor);\n        \n        \n    }\n}\n</code></pre>\n"},{"tags":["java","spring","ssl","bitbucket","egit"],"answers":[{"tags":[],"owner":{"account_id":21715214,"reputation":50,"user_id":16026348,"display_name":"Ferlorin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639503222,"creation_date":1639503222,"answer_id":70353218,"question_id":70296757,"body_markdown":"try to insert `ssh:\\\\` at the front of your URL making it `uri: ssh://git@bitbucket.org:xyz/abc.git`","title":"Spring cloud config server ssh to bitbucket problem","body":"<p>try to insert <code>ssh:\\\\</code> at the front of your URL making it <code>uri: ssh://git@bitbucket.org:xyz/abc.git</code></p>\n"},{"tags":[],"owner":{"account_id":16901346,"reputation":21,"user_id":12222643,"display_name":"Jim Judd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639850620,"creation_date":1639850620,"answer_id":70405812,"question_id":70296757,"body_markdown":"I eventually got something working.  Its not with ssh but with https, bit bucket allows you to generate a token and use that in the password field instead of the password to authenticate.  That will have to work for now.","title":"Spring cloud config server ssh to bitbucket problem","body":"<p>I eventually got something working.  Its not with ssh but with https, bit bucket allows you to generate a token and use that in the password field instead of the password to authenticate.  That will have to work for now.</p>\n"},{"tags":[],"owner":{"account_id":16340333,"reputation":1,"user_id":11801373,"display_name":"Ho&#224;ng Nguyn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647416767,"creation_date":1647257918,"answer_id":71467147,"question_id":70296757,"body_markdown":"I confirm that able to start Config Server, using Bitbucket with spring-boot 2.1.3.RELEASE and spring-cloud Greenwich.SR2, on Win11\r\n\r\nHowever, with spring-boot 2.6.3 and spring-cloud 2021.0.1, it is unable to access Bitbucket and throws the error message.\r\n\r\nHere is my example that works:\r\n\r\n    #Work on spring-boot 2.1.3.RELEASE and spring-cloud Greenwich.SR2\r\n    \r\n    spring.application.name=Config Server\r\n    server.port=8030\r\n    \r\n    spring.cloud.config.profile=default\r\n    spring.cloud.config.server.git.clone-on-start=true\r\n    spring.cloud.config.server.git.ignore-local-ssh-settings=true\r\n    \r\n    #Github, using link on Browser address and username/password(token)\r\n    #spring.cloud.config.server.git.default-label=main\r\n    #spring.cloud.config.server.git.uri=https://github.com/yourUserName/SpringCloudConfigRepo\r\n    #spring.cloud.config.server.git.username=yourUserName\r\n    #spring.cloud.config.server.git.password=Token. Not password\r\n    \r\n    #Bitbucket, using SSH URI and RSA key\r\n    spring.cloud.config.server.git.default-label=master\r\n    spring.cloud.config.server.git.uri=git@bitbucket.org:yourUserName/springcloudconfigrepo.git\r\n    spring.cloud.config.server.git.private-key= \\\r\n    -----BEGIN RSA PRIVATE KEY-----\\n\\\r\n    line 1\\n\\\r\n    line n\\n\\\r\n    -----END RSA PRIVATE KEY-----\r\n\r\n","title":"Spring cloud config server ssh to bitbucket problem","body":"<p>I confirm that able to start Config Server, using Bitbucket with spring-boot 2.1.3.RELEASE and spring-cloud Greenwich.SR2, on Win11</p>\n<p>However, with spring-boot 2.6.3 and spring-cloud 2021.0.1, it is unable to access Bitbucket and throws the error message.</p>\n<p>Here is my example that works:</p>\n<pre><code>#Work on spring-boot 2.1.3.RELEASE and spring-cloud Greenwich.SR2\n\nspring.application.name=Config Server\nserver.port=8030\n\nspring.cloud.config.profile=default\nspring.cloud.config.server.git.clone-on-start=true\nspring.cloud.config.server.git.ignore-local-ssh-settings=true\n\n#Github, using link on Browser address and username/password(token)\n#spring.cloud.config.server.git.default-label=main\n#spring.cloud.config.server.git.uri=https://github.com/yourUserName/SpringCloudConfigRepo\n#spring.cloud.config.server.git.username=yourUserName\n#spring.cloud.config.server.git.password=Token. Not password\n\n#Bitbucket, using SSH URI and RSA key\nspring.cloud.config.server.git.default-label=master\nspring.cloud.config.server.git.uri=git@bitbucket.org:yourUserName/springcloudconfigrepo.git\nspring.cloud.config.server.git.private-key= \\\n-----BEGIN RSA PRIVATE KEY-----\\n\\\nline 1\\n\\\nline n\\n\\\n-----END RSA PRIVATE KEY-----\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8159047,"reputation":330,"user_id":6143625,"display_name":"tinbee00"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650920939,"creation_date":1650920939,"answer_id":72005769,"question_id":70296757,"body_markdown":"The configuration below worked for me. I used HTTPS with auth token instead of SSH.\r\n&lt;pre&gt;\r\n&lt;code&gt;\r\nspring:\r\n  profiles: local\r\n  cloud:\r\n    config:\r\n      server:\r\n        git:\r\n          uri: https://github.com/repo`enter code here`.git\r\n          username: your_username\r\n          password: your_login_token_not_password\r\n          deleteUntrackedBranches: true\r\n          refreshRate: 20\r\n          search-paths: src/main/resources/configs/*\r\n          clone-on-start: true\r\n          basedir: /data/apps/git-configs-repo\r\n          timeout: 30\r\n          forcePull: true\r\n&lt;/code&gt;\r\n&lt;/pre&gt;","title":"Spring cloud config server ssh to bitbucket problem","body":"<p>The configuration below worked for me. I used HTTPS with auth token instead of SSH.</p>\n<pre>\n<code>\nspring:\n  profiles: local\n  cloud:\n    config:\n      server:\n        git:\n          uri: https://github.com/repo`enter code here`.git\n          username: your_username\n          password: your_login_token_not_password\n          deleteUntrackedBranches: true\n          refreshRate: 20\n          search-paths: src/main/resources/configs/*\n          clone-on-start: true\n          basedir: /data/apps/git-configs-repo\n          timeout: 30\n          forcePull: true\n</code>\n</pre>\n"},{"tags":[],"owner":{"account_id":7864424,"reputation":672,"user_id":5943689,"display_name":"Cozimetzer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660753189,"creation_date":1660753189,"answer_id":73391834,"question_id":70296757,"body_markdown":"This could be the issue with \r\n[git protocol switch][1] from V1 to V2 in JGIT\r\n\r\nYou can change it back to V1 with following setting\r\n\r\n    git config --global protocol.version 1\r\n\r\n\r\n  [1]: https://projects.eclipse.org/projects/technology.jgit/releases/5.11.0","title":"Spring cloud config server ssh to bitbucket problem","body":"<p>This could be the issue with\n<a href=\"https://projects.eclipse.org/projects/technology.jgit/releases/5.11.0\" rel=\"nofollow noreferrer\">git protocol switch</a> from V1 to V2 in JGIT</p>\n<p>You can change it back to V1 with following setting</p>\n<pre><code>git config --global protocol.version 1\n</code></pre>\n"}],"owner":{"account_id":16901346,"reputation":21,"user_id":12222643,"display_name":"Jim Judd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1526,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1660753189,"creation_date":1639084261,"question_id":70296757,"body_markdown":"I&#39;m trying to get the spring cloud config server connected to a bitbucket repo using ssh.  I&#39;ve found lots of posts about the key needing to be rsa format.  I&#39;ve confirmed I&#39;m using the correct key format, and I have tried java versions 8, 15, and 17.  \r\n\r\nI can get it to work with a public repo, and a private repo using https with username/password.  But using a private key always gives me an exception for &quot;com.jcraft.jsch.JSchException: failed to send channel request&quot;\r\n\r\n```\r\n2021-12-09 20:50:02.736  WARN 8 --- [nio-8888-exec-1] o.s.c.c.s.e.EnvironmentController        : Error getting the Environment with name=feedback profiles=development label=null includeOrigin=false\r\n\r\norg.springframework.cloud.config.server.environment.NoSuchRepositoryException: Cannot clone or checkout repository: git@bitbucket.org:jimjudd/service-config.git\r\n\tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:320) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.getLocations(JGitEnvironmentRepository.java:262) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.getLocations(MultipleJGitEnvironmentRepository.java:139) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.AbstractScmEnvironmentRepository.findOne(AbstractScmEnvironmentRepository.java:55) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOneFromCandidate(MultipleJGitEnvironmentRepository.java:188) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOne(MultipleJGitEnvironmentRepository.java:178) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.CompositeEnvironmentRepository.findOne(CompositeEnvironmentRepository.java:64) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.EnvironmentEncryptorEnvironmentRepository.findOne(EnvironmentEncryptorEnvironmentRepository.java:61) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.EnvironmentController.getEnvironment(EnvironmentController.java:132) [spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.EnvironmentController.defaultLabel(EnvironmentController.java:109) [spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_111]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_111]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_111]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_111]\r\n\tat org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282) [spring-core-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:485) [spring-cloud-context-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) [spring-aop-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698) [spring-aop-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.cloud.config.server.environment.EnvironmentController$$EnhancerBySpringCGLIB$$92f4d81c.defaultLabel(&lt;generated&gt;) [spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_111]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_111]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_111]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_111]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) [spring-webmvc-5.3.13.jar!/:5.3.13]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.13.jar!/:5.3.13]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.13.jar!/:5.3.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.13.jar!/:5.3.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.13.jar!/:5.3.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.13.jar!/:5.3.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.55.jar!/:na]\r\n\tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_111]\r\nCaused by: org.eclipse.jgit.api.errors.TransportException: git@bitbucket.org:jimjudd/service-config.git: failed to send channel request\r\n\tat org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:224) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\tat org.eclipse.jgit.api.CloneCommand.fetch(CloneCommand.java:303) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\tat org.eclipse.jgit.api.CloneCommand.call(CloneCommand.java:178) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.cloneToBasedir(JGitEnvironmentRepository.java:658) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.copyRepository(JGitEnvironmentRepository.java:633) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.createGitClient(JGitEnvironmentRepository.java:616) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:296) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\r\n\t... 69 common frames omitted\r\nCaused by: org.eclipse.jgit.errors.TransportException: git@bitbucket.org:jimjudd/service-config.git: failed to send channel request\r\n\tat org.eclipse.jgit.transport.JschSession$JschProcess.&lt;init&gt;(JschSession.java:167) ~[org.eclipse.jgit.ssh.jsch-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\tat org.eclipse.jgit.transport.JschSession.exec(JschSession.java:77) ~[org.eclipse.jgit.ssh.jsch-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\tat org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:289) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\tat org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\tat org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\tat org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\tat org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\tat org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\t... 75 common frames omitted\r\nCaused by: com.jcraft.jsch.JSchException: failed to send channel request\r\n\tat com.jcraft.jsch.Request.write(Request.java:65) ~[jsch-0.1.55.jar!/:na]\r\n\tat com.jcraft.jsch.RequestEnv.request(RequestEnv.java:52) ~[jsch-0.1.55.jar!/:na]\r\n\tat com.jcraft.jsch.ChannelSession.sendRequests(ChannelSession.java:222) ~[jsch-0.1.55.jar!/:na]\r\n\tat com.jcraft.jsch.ChannelExec.start(ChannelExec.java:41) ~[jsch-0.1.55.jar!/:na]\r\n\tat com.jcraft.jsch.Channel.connect(Channel.java:152) ~[jsch-0.1.55.jar!/:na]\r\n\tat org.eclipse.jgit.transport.JschSession$JschProcess.&lt;init&gt;(JschSession.java:159) ~[org.eclipse.jgit.ssh.jsch-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\r\n\t... 82 common frames omitted\r\n```\r\nThe server config is pretty straight forward\r\n```\r\nspring:\r\n  cloud:\r\n    config:\r\n      server:\r\n        git:\r\n          timeout: 30\r\n          uri: &quot;git@bitbucket.org:xyz/abc.git&quot;\r\n#          skip-ssl-validation: true\r\n          ignore-local-ssh-settings: true\r\n#          strictHostKeyChecking: false\r\n#          known-hosts-file: &quot;./known_hosts&quot;\r\n          private-key: |\r\n                        -----BEGIN RSA PRIVATE KEY-----\r\n                        MIIJJgIBAAKCAgEAz8V286zbc5nZ0Z+NTq5JcC2Fx2XNGKee4Lg/NIqa8KUCURMC\r\n                        .\r\n                        .\r\n                        .    \r\n                        -----END RSA PRIVATE KEY-----\r\n```\r\nHaven&#39;t been able to get the right combination right.  Anyone know of anything else I can try?\r\n\r\nThanks","title":"Spring cloud config server ssh to bitbucket problem","body":"<p>I'm trying to get the spring cloud config server connected to a bitbucket repo using ssh.  I've found lots of posts about the key needing to be rsa format.  I've confirmed I'm using the correct key format, and I have tried java versions 8, 15, and 17.</p>\n<p>I can get it to work with a public repo, and a private repo using https with username/password.  But using a private key always gives me an exception for &quot;com.jcraft.jsch.JSchException: failed to send channel request&quot;</p>\n<pre><code>2021-12-09 20:50:02.736  WARN 8 --- [nio-8888-exec-1] o.s.c.c.s.e.EnvironmentController        : Error getting the Environment with name=feedback profiles=development label=null includeOrigin=false\n\norg.springframework.cloud.config.server.environment.NoSuchRepositoryException: Cannot clone or checkout repository: git@bitbucket.org:jimjudd/service-config.git\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:320) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.getLocations(JGitEnvironmentRepository.java:262) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.getLocations(MultipleJGitEnvironmentRepository.java:139) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.AbstractScmEnvironmentRepository.findOne(AbstractScmEnvironmentRepository.java:55) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOneFromCandidate(MultipleJGitEnvironmentRepository.java:188) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOne(MultipleJGitEnvironmentRepository.java:178) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.CompositeEnvironmentRepository.findOne(CompositeEnvironmentRepository.java:64) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.EnvironmentEncryptorEnvironmentRepository.findOne(EnvironmentEncryptorEnvironmentRepository.java:61) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.EnvironmentController.getEnvironment(EnvironmentController.java:132) [spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.EnvironmentController.defaultLabel(EnvironmentController.java:109) [spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_111]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_111]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_111]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_111]\n    at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282) [spring-core-5.3.13.jar!/:5.3.13]\n    at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:485) [spring-cloud-context-3.1.0.jar!/:3.1.0]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.13.jar!/:5.3.13]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) [spring-aop-5.3.13.jar!/:5.3.13]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698) [spring-aop-5.3.13.jar!/:5.3.13]\n    at org.springframework.cloud.config.server.environment.EnvironmentController$$EnhancerBySpringCGLIB$$92f4d81c.defaultLabel(&lt;generated&gt;) [spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_111]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_111]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_111]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_111]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) [spring-webmvc-5.3.13.jar!/:5.3.13]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.13.jar!/:5.3.13]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.55.jar!/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.13.jar!/:5.3.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.13.jar!/:5.3.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.13.jar!/:5.3.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.13.jar!/:5.3.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.55.jar!/:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.55.jar!/:na]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_111]\nCaused by: org.eclipse.jgit.api.errors.TransportException: git@bitbucket.org:jimjudd/service-config.git: failed to send channel request\n    at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:224) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    at org.eclipse.jgit.api.CloneCommand.fetch(CloneCommand.java:303) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    at org.eclipse.jgit.api.CloneCommand.call(CloneCommand.java:178) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.cloneToBasedir(JGitEnvironmentRepository.java:658) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.copyRepository(JGitEnvironmentRepository.java:633) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.createGitClient(JGitEnvironmentRepository.java:616) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:296) ~[spring-cloud-config-server-3.1.0.jar!/:3.1.0]\n    ... 69 common frames omitted\nCaused by: org.eclipse.jgit.errors.TransportException: git@bitbucket.org:jimjudd/service-config.git: failed to send channel request\n    at org.eclipse.jgit.transport.JschSession$JschProcess.&lt;init&gt;(JschSession.java:167) ~[org.eclipse.jgit.ssh.jsch-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    at org.eclipse.jgit.transport.JschSession.exec(JschSession.java:77) ~[org.eclipse.jgit.ssh.jsch-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:289) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213) ~[org.eclipse.jgit-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    ... 75 common frames omitted\nCaused by: com.jcraft.jsch.JSchException: failed to send channel request\n    at com.jcraft.jsch.Request.write(Request.java:65) ~[jsch-0.1.55.jar!/:na]\n    at com.jcraft.jsch.RequestEnv.request(RequestEnv.java:52) ~[jsch-0.1.55.jar!/:na]\n    at com.jcraft.jsch.ChannelSession.sendRequests(ChannelSession.java:222) ~[jsch-0.1.55.jar!/:na]\n    at com.jcraft.jsch.ChannelExec.start(ChannelExec.java:41) ~[jsch-0.1.55.jar!/:na]\n    at com.jcraft.jsch.Channel.connect(Channel.java:152) ~[jsch-0.1.55.jar!/:na]\n    at org.eclipse.jgit.transport.JschSession$JschProcess.&lt;init&gt;(JschSession.java:159) ~[org.eclipse.jgit.ssh.jsch-5.12.0.202106070339-r.jar!/:5.12.0.202106070339-r]\n    ... 82 common frames omitted\n</code></pre>\n<p>The server config is pretty straight forward</p>\n<pre><code>spring:\n  cloud:\n    config:\n      server:\n        git:\n          timeout: 30\n          uri: &quot;git@bitbucket.org:xyz/abc.git&quot;\n#          skip-ssl-validation: true\n          ignore-local-ssh-settings: true\n#          strictHostKeyChecking: false\n#          known-hosts-file: &quot;./known_hosts&quot;\n          private-key: |\n                        -----BEGIN RSA PRIVATE KEY-----\n                        MIIJJgIBAAKCAgEAz8V286zbc5nZ0Z+NTq5JcC2Fx2XNGKee4Lg/NIqa8KUCURMC\n                        .\n                        .\n                        .    \n                        -----END RSA PRIVATE KEY-----\n</code></pre>\n<p>Haven't been able to get the right combination right.  Anyone know of anything else I can try?</p>\n<p>Thanks</p>\n"},{"tags":["java","jenkins","gradle"],"answers":[{"tags":[],"owner":{"account_id":2767223,"reputation":21433,"user_id":2382650,"accept_rate":92,"display_name":"Cisco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645737432,"creation_date":1645737432,"answer_id":71258352,"question_id":71241485,"body_markdown":"The module export error indicates an incompatibility of the version of Java used in your Jenkins environment and the version of Gradle for your project.\r\n\r\nWithout knowing the version of Java used in your Jenkins environment and the one on your local machine, you need to ensure that that one in your Jenkins environment is compatible with the version of Gradle used in the project.\r\n\r\nSee the compatibility matrix to figure out which Gradle version and Java version are compatible: https://docs.gradle.org/current/userguide/compatibility.html","title":"Is there a solution to this error in Blue Ocean Jenkins","body":"<p>The module export error indicates an incompatibility of the version of Java used in your Jenkins environment and the version of Gradle for your project.</p>\n<p>Without knowing the version of Java used in your Jenkins environment and the one on your local machine, you need to ensure that that one in your Jenkins environment is compatible with the version of Gradle used in the project.</p>\n<p>See the compatibility matrix to figure out which Gradle version and Java version are compatible: <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/compatibility.html</a></p>\n"}],"owner":{"account_id":22938804,"reputation":63,"user_id":17071890,"display_name":"Khaoula MEHAR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":341,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71258352,"answer_count":1,"score":0,"last_activity_date":1660753000,"creation_date":1645637000,"question_id":71241485,"body_markdown":"I am using Jenkins and I create this pipeline with Blue Ocean and I am getting this error when running the pipeline [![enter image description here][1]][1]\r\n\r\nHow can I fix this problem?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/80Bkc.png\r\n\r\nHere is my Jenkins file code when I run gradle build gradle javadoc in local repository it works but when I run it in Jenkins server it doesn&#39;t work\r\n\r\n    pipeline {\r\n      agent any\r\n      stages {\r\n        stage(&#39;Build&#39;) {\r\n          steps {\r\n            bat &#39;gradle build&#39;\r\n            bat &#39;gradle javadoc&#39;\r\n            archiveArtifacts &#39;build/libs/*.jar&#39;\r\n            archiveArtifacts &#39;build/docs/javadoc/**&#39;\r\n            junit &#39;build/test-results/test/*.xml&#39;\r\n          }\r\n        }\r\n\r\n        stage(&#39;Mail Notification&#39;) {\r\n          steps {\r\n            mail(subject: &#39;Build Notification&#39;, body: &#39;This is a notification letting you know that the build stage has finished&#39;, to: &#39;ik_mehar@esi.dz&#39;, cc: &#39;ik_mehar@esi.dz&#39;, from: &#39;ik_mehar@esi.dz&#39;)\r\n          }\r\n        }\r\n\r\n        stage(&#39;Code Analysis&#39;) {\r\n          parallel {\r\n            stage(&#39;Code Analysis&#39;) {\r\n              steps {\r\n                withSonarQubeEnv(&#39;sonar&#39;) {\r\n                  bat &#39;gradle sonarQube&#39;\r\n                }\r\n\r\n                waitForQualityGate true\r\n              }\r\n            }\r\n\r\n            stage(&#39;Test Reporting&#39;) {\r\n              steps {\r\n                cucumber &#39;reports/example-report.json&#39;\r\n              }\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n        stage(&#39;Deployment&#39;) {\r\n          steps {\r\n            bat &#39;gradle publish&#39;\r\n          }\r\n        }\r\n\r\n        stage(&#39;Slack Notification&#39;) {\r\n          steps {\r\n            slackSend(baseUrl: &#39;https://hooks.slack.com/services&#39;, channel: &#39;#tp-ogl&#39;, notifyCommitters: true, sendAsText: true, username: &#39;ik_mehar&#39;, message: &#39;This is a slack notification letting you know that he process has finished &#39;, replyBroadcast: true, teamDomain: &#39;https://app.slack.com/client&#39;, token: &#39;T02T8KCN5DY/B02T22U3D8W/sn96ULIXJfQN7FOkx21nm84s&#39;)\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n","title":"Is there a solution to this error in Blue Ocean Jenkins","body":"<p>I am using Jenkins and I create this pipeline with Blue Ocean and I am getting this error when running the pipeline <a href=\"https://i.stack.imgur.com/80Bkc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/80Bkc.png\" alt=\"enter image description here\" /></a></p>\n<p>How can I fix this problem?</p>\n<p>Here is my Jenkins file code when I run gradle build gradle javadoc in local repository it works but when I run it in Jenkins server it doesn't work</p>\n<pre><code>pipeline {\n  agent any\n  stages {\n    stage('Build') {\n      steps {\n        bat 'gradle build'\n        bat 'gradle javadoc'\n        archiveArtifacts 'build/libs/*.jar'\n        archiveArtifacts 'build/docs/javadoc/**'\n        junit 'build/test-results/test/*.xml'\n      }\n    }\n\n    stage('Mail Notification') {\n      steps {\n        mail(subject: 'Build Notification', body: 'This is a notification letting you know that the build stage has finished', to: 'ik_mehar@esi.dz', cc: 'ik_mehar@esi.dz', from: 'ik_mehar@esi.dz')\n      }\n    }\n\n    stage('Code Analysis') {\n      parallel {\n        stage('Code Analysis') {\n          steps {\n            withSonarQubeEnv('sonar') {\n              bat 'gradle sonarQube'\n            }\n\n            waitForQualityGate true\n          }\n        }\n\n        stage('Test Reporting') {\n          steps {\n            cucumber 'reports/example-report.json'\n          }\n        }\n\n      }\n    }\n\n    stage('Deployment') {\n      steps {\n        bat 'gradle publish'\n      }\n    }\n\n    stage('Slack Notification') {\n      steps {\n        slackSend(baseUrl: 'https://hooks.slack.com/services', channel: '#tp-ogl', notifyCommitters: true, sendAsText: true, username: 'ik_mehar', message: 'This is a slack notification letting you know that he process has finished ', replyBroadcast: true, teamDomain: 'https://app.slack.com/client', token: 'T02T8KCN5DY/B02T22U3D8W/sn96ULIXJfQN7FOkx21nm84s')\n      }\n    }\n\n  }\n}\n</code></pre>\n"},{"tags":["java","eclipse","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":20460623,"reputation":31,"user_id":15013344,"display_name":"BEGINNER"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660635300,"creation_date":1660635300,"answer_id":73370329,"question_id":73322367,"body_markdown":"Resolved the issue by adding the latest j2ee jar which was missing earlier.","title":"Mockito Junit : ExceptionInIntialize and NullPointer Error on struts DispatchAction.java when running the Junit tests on a class that extends it","body":"<p>Resolved the issue by adding the latest j2ee jar which was missing earlier.</p>\n"}],"owner":{"account_id":20460623,"reputation":31,"user_id":15013344,"display_name":"BEGINNER"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73370329,"answer_count":1,"score":1,"last_activity_date":1660752768,"creation_date":1660227881,"question_id":73322367,"body_markdown":"I have a class ClassA which is extending DispatchAction class from org.apache.struts.actions.DispatchAction, I have written JUnit code coverage test for ClassA but whenever I try to run the test case I keep getting these error but if I **remove the ```extends DispatchAction ``` from ClassA the test runs normally without any error** but then obviously my application won&#39;t work\r\nClassA\r\n```\r\npublic class ClassA extends DispatchAction {\r\n//some methods and other code\r\n}\r\n```\r\nTestClassA\r\n```\r\n@RunWith(Junit4.class)\r\npublic class TestClassA {\r\n@InjectMocks\r\nClassA objA;\r\n/* mock some objects here */\r\n@Before\r\npublic void setUp()\r\n{\r\nMockitoAnnotations.openMocks(this);\r\n}\r\n@Test\r\npublic void methodToTest()\r\n{\r\n//Coverage code\r\nobjA.methodA();\r\n}\r\n}\r\n```\r\nHere is the stack trace I get when I run this test case (when I keep &quot;extends DispatchAction&quot; in class ClassA )\r\n\r\n```\r\njava.lang.ExceptionInInitializerError at \r\njava.lang.J9VMInternals.ensureError(J9VMInternals.java:148) at \r\njava.lang.J9VMInternals.recordInitializationFailure(J9VMInternals.java:137) at \r\nsun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at \r\nsun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:83) at \r\nsun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:57) at \r\njava.lang.reflect.Constructor.newInstance(Constructor.java:437) at \r\norg.junit.runners.BlockJUnit4ClassRunner.createTest(BlockJUnit4ClassRunner.java:217) at \r\norg.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at \r\norg.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263) at \r\norg.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78) at \r\norg.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57) at \r\norg.junit.runners.ParentRunner$3.run(ParentRunner.java:290) at \r\norg.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) at \r\norg.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) at \r\norg.junit.runners.ParentRunner.access$000(ParentRunner.java:58) at \r\norg.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) at \r\norg.junit.runners.ParentRunner.run(ParentRunner.java:363) at \r\norg.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41) at \r\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541) at \r\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463) at \r\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209) \r\n\r\nCaused by: java.lang.NullPointerException at \r\norg.apache.struts.util.MessageResources.getMessageResources(MessageResources.java:577) at \r\norg.apache.struts.actions.DispatchAction.&lt;clinit&gt;(DispatchAction.java:153) ... 22 more\r\n\r\n```\r\nNow if I remove the &quot;extends DispatchAction&quot; from class ClassA it will run and cover the intended lines in the test case without any problems but my application won&#39;t work as intended. \r\n\r\nI tried searching on how to resolve all those errors but I cannot find anything that might help.","title":"Mockito Junit : ExceptionInIntialize and NullPointer Error on struts DispatchAction.java when running the Junit tests on a class that extends it","body":"<p>I have a class ClassA which is extending DispatchAction class from org.apache.struts.actions.DispatchAction, I have written JUnit code coverage test for ClassA but whenever I try to run the test case I keep getting these error but if I <strong>remove the <code>extends DispatchAction </code> from ClassA the test runs normally without any error</strong> but then obviously my application won't work\nClassA</p>\n<pre><code>public class ClassA extends DispatchAction {\n//some methods and other code\n}\n</code></pre>\n<p>TestClassA</p>\n<pre><code>@RunWith(Junit4.class)\npublic class TestClassA {\n@InjectMocks\nClassA objA;\n/* mock some objects here */\n@Before\npublic void setUp()\n{\nMockitoAnnotations.openMocks(this);\n}\n@Test\npublic void methodToTest()\n{\n//Coverage code\nobjA.methodA();\n}\n}\n</code></pre>\n<p>Here is the stack trace I get when I run this test case (when I keep &quot;extends DispatchAction&quot; in class ClassA )</p>\n<pre><code>java.lang.ExceptionInInitializerError at \njava.lang.J9VMInternals.ensureError(J9VMInternals.java:148) at \njava.lang.J9VMInternals.recordInitializationFailure(J9VMInternals.java:137) at \nsun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at \nsun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:83) at \nsun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:57) at \njava.lang.reflect.Constructor.newInstance(Constructor.java:437) at \norg.junit.runners.BlockJUnit4ClassRunner.createTest(BlockJUnit4ClassRunner.java:217) at \norg.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at \norg.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263) at \norg.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78) at \norg.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57) at \norg.junit.runners.ParentRunner$3.run(ParentRunner.java:290) at \norg.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) at \norg.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) at \norg.junit.runners.ParentRunner.access$000(ParentRunner.java:58) at \norg.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) at \norg.junit.runners.ParentRunner.run(ParentRunner.java:363) at \norg.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41) at \norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541) at \norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463) at \norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209) \n\nCaused by: java.lang.NullPointerException at \norg.apache.struts.util.MessageResources.getMessageResources(MessageResources.java:577) at \norg.apache.struts.actions.DispatchAction.&lt;clinit&gt;(DispatchAction.java:153) ... 22 more\n\n</code></pre>\n<p>Now if I remove the &quot;extends DispatchAction&quot; from class ClassA it will run and cover the intended lines in the test case without any problems but my application won't work as intended.</p>\n<p>I tried searching on how to resolve all those errors but I cannot find anything that might help.</p>\n"},{"tags":["java","spring-boot","integration-testing","junit4","flyway"],"comments":[{"owner":{"account_id":18536130,"reputation":9,"user_id":13505768,"display_name":"Sameer Dighe"},"score":0,"creation_date":1589107125,"post_id":61708163,"comment_id":109155961,"body_markdown":"Can someone help me here or I am gonna delete this question because no response on this since morning ?","body":"Can someone help me here or I am gonna delete this question because no response on this since morning ?"},{"owner":{"account_id":14834787,"reputation":1360,"user_id":10713244,"display_name":"rizerphe"},"score":0,"creation_date":1589136558,"post_id":61708163,"comment_id":109167708,"body_markdown":"Welcome to Stack Overflow! You seem to have posted more code than what would be reasonable for your issue. Please read [ask] and how to make a [mre]; providing a MRE helps users answer your question and future users relate to your issue.","body":"Welcome to Stack Overflow! You seem to have posted more code than what would be reasonable for your issue. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and how to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>; providing a MRE helps users answer your question and future users relate to your issue."}],"answers":[{"tags":[],"owner":{"account_id":26022785,"reputation":1,"user_id":19730224,"display_name":"OFS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660752343,"creation_date":1660752051,"answer_id":73391585,"question_id":61708163,"body_markdown":"you must add the configuration for flyway\r\n\r\n    flyway.url=jdbc:postgresql://xxx.eu-west-2.rds.amazonaws.com:5432/xxx\r\n    flyway.user=postgres\r\n    flyway.password=xxx","title":"Exception in combination of @DirtiesContext and FlywayConfig bean in integration test","body":"<p>you must add the configuration for flyway</p>\n<pre><code>flyway.url=jdbc:postgresql://xxx.eu-west-2.rds.amazonaws.com:5432/xxx\nflyway.user=postgres\nflyway.password=xxx\n</code></pre>\n"}],"owner":{"account_id":18536130,"reputation":9,"user_id":13505768,"display_name":"Sameer Dighe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":575,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660752343,"creation_date":1589093006,"question_id":61708163,"body_markdown":"I have a problem when adding new test. And the problem is I think related to @DirtiesContext. I tried removing and adding it but nothing works in combination. Test 1 is using **Application Context** as well.\r\n\r\nthe following two are running together and no issue.\r\n\r\nTest 1\r\n\r\n    \r\n    @ActiveProfiles({&quot;aws&quot;, &quot;local&quot;})\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n    public class UnauthorizedControllerTest {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(UnauthorizedControllerTest.class);\r\n    \r\n        @Autowired\r\n        private TestRestTemplate testRestTemplate;\r\n    \r\n        @LocalServerPort\r\n        private int port;\r\n    \r\n        @Autowired\r\n        private ApplicationContext context;\r\n    \r\n        private Map&lt;Class&lt;?&gt;, List&lt;String&gt;&gt; excludedMethodsPerController;\r\n    \r\n        @Before\r\n        public void setUp() {\r\n            excludedMethodsPerController = excludedMethodsPerController();\r\n        }\r\n    \r\n        @Test\r\n        public void contextStarts() {\r\n            assertNotNull(context);\r\n        }\r\n    \r\n        @Test\r\n        public void controllerCall_WithoutAuthorization_ReturnsUnauthorized() {\r\n            Map&lt;String, Object&gt; controllerBeans = context.getBeansWithAnnotation(Controller.class);\r\n    \r\n            for (Object controllerInstance : controllerBeans.values()) {\r\n                LOGGER.info(&quot;Checking controller {}&quot;, controllerInstance);\r\n                checkController(controllerInstance);\r\n            }\r\n        }\r\n    \r\n        public void checkController(Object controllerInstance) {\r\n            // Use AopUtils for the case that spring wraps the controller in a proxy\r\n            Class&lt;?&gt; controllerClass = AopProxyUtils.ultimateTargetClass(controllerInstance);\r\n            Method[] allMethods = controllerClass.getDeclaredMethods();\r\n    \r\n    \r\n            for (Method method : allMethods) {\r\n                LOGGER.info(&quot;Checking method: {}&quot;, method.getName());\r\n                if (!isCallable(controllerClass, method)) {\r\n                    continue;\r\n                }\r\n    \r\n                String urlPrefix = urlPrefix(controllerClass);\r\n    \r\n                Mapping mapping = Mapping.of(method.getAnnotations());\r\n    \r\n                for (String url : mapping.urls) {\r\n                    for (RequestMethod requestMethod : mapping.requestMethods) {\r\n                        ResponseEntity&lt;String&gt; exchange = exchange(urlPrefix + url, requestMethod);\r\n    \r\n                        String message = String.format(&quot;Failing %s.%s&quot;, controllerClass.getName(), method.getName());\r\n                        assertEquals(message, HttpStatus.UNAUTHORIZED, exchange.getStatusCode());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        private ResponseEntity&lt;String&gt; exchange(String apiEndpoint, RequestMethod requestMethod) {\r\n            return testRestTemplate.exchange(url(replacePathVariables(apiEndpoint)), HttpMethod.resolve(requestMethod.name()), null, String.class);\r\n        }\r\n    \r\n        private String urlPrefix(Class&lt;?&gt; aClass) {\r\n            if (!aClass.isAnnotationPresent(RequestMapping.class)) {\r\n                return &quot;&quot;;\r\n            }\r\n    \r\n            RequestMapping annotation = aClass.getAnnotation(RequestMapping.class);\r\n            return annotation.value()[0];\r\n        }\r\n    \r\n        private String url(String url) {\r\n            return &quot;http://localhost:&quot; + port + url;\r\n        }\r\n    \r\n        private boolean isCallable(Class&lt;?&gt; controller, Method method) {\r\n            return Modifier.isPublic(method.getModifiers())\r\n                    &amp;&amp; !isExcluded(controller, method)\r\n                    &amp;&amp; !isExternal(controller);\r\n        }\r\n    \r\n        private boolean isExcluded(Class&lt;?&gt; controller, Method method) {\r\n            List&lt;String&gt; excludedMethodsPerController = this.excludedMethodsPerController.getOrDefault(controller, new ArrayList&lt;&gt;());\r\n            return excludedMethodsPerController.contains(method.getName());\r\n        }\r\n    \r\n        private boolean isExternal(Class&lt;?&gt; controller) {\r\n            return controller.getName().startsWith(&quot;org.spring&quot;);\r\n        }\r\n    \r\n        private String replacePathVariables(String url) {\r\n            return url.replaceAll(&quot;\\\\{[^\\\\/]+}&quot;, &quot;someValue&quot;);\r\n        }\r\n    \r\n        /**\r\n         * There must be a really good reason to exclude the method from being checked.\r\n         *\r\n         * @return The list of urls that must not be checked by the security\r\n         */\r\n        private static Map&lt;Class&lt;?&gt;, List&lt;String&gt;&gt; excludedMethodsPerController() {\r\n            Map&lt;Class&lt;?&gt;, List&lt;String&gt;&gt; methodPerController = new HashMap&lt;&gt;();\r\n    \r\n            methodPerController.put(AuthenticationController.class, Collections.singletonList(&quot;generateAuthorizationToken&quot;));\r\n            methodPerController.put(SystemUserLoginController.class, Arrays.asList(&quot;systemUserLogin&quot;, &quot;handleException&quot;));\r\n            methodPerController.put(ValidationController.class, Collections.singletonList(&quot;isValid&quot;));\r\n    \r\n            return methodPerController;\r\n        }  \r\n        }\r\n\r\nTest 2\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n    @ActiveProfiles({&quot;aws&quot;, &quot;local&quot;})\r\n    public class RoleAdminControllerAuditTest {\r\n        private static final String DOMAIN_NAME = &quot;testDomain&quot;;\r\n        private static final String APP_NAME_1 = &quot;testApp_1&quot;;\r\n        private static final String APP_NAME_2 = &quot;testApp_2&quot;;\r\n        private static final String ROLE_NAME = &quot;testRole&quot;;\r\n        private static final String USER_NAME = &quot;testUser&quot;;\r\n    \r\n        @Autowired\r\n        AuditRepository auditRepository;\r\n        @Autowired\r\n        RoleAdminController roleAdminController;\r\n    \r\n        @MockBean\r\n        RoleAdminService roleAdminService;\r\n        @MockBean\r\n        RoleAdminInfoBuilder infoBuilder;\r\n        @MockBean\r\n        AppInfoBuilder appInfoBuilder;\r\n        @MockBean\r\n        BoundaryValueService boundaryValueService;\r\n        @MockBean\r\n        RoleService roleService;\r\n    \r\n        @MockBean\r\n        private SecurityService securityService;\r\n    \r\n        private static final String URS_USER = &quot;loggedInUser&quot;;\r\n        private static final String BOUNDARY_VALUE_KEY = &quot;11&quot;;\r\n        private static final String BOUNDARY_VALUE_NAME = &quot;Schulenberg&quot;;\r\n    \r\n        private String auditEventDate = LocalDate.now().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;));\r\n    \r\n        @BeforeClass\r\n        public static void setupTestEnv() {\r\n            // https://github.com/localstack/localstack/issues/592\r\n            System.setProperty(&quot;com.amazonaws.sdk.disableCbor&quot;, &quot;true&quot;);\r\n        }\r\n    \r\n        @Before\r\n        public void setUp() throws Exception {\r\n            auditRepository.clean();\r\n            when(securityService.getLoggedInUser()).thenReturn(new TestHelper.FakeUser(URS_USER));\r\n            //when(roleService.addRoleToApp(any(), any(), eq(ROLE_NAME))).thenReturn(TestHelper.initRole(ROLE_NAME));\r\n            when(boundaryValueService.findBoundaryValueById(eq(123L))).thenReturn(initBoundaryValue(BOUNDARY_VALUE_KEY, BOUNDARY_VALUE_NAME));\r\n            when(boundaryValueService.findBoundaryValueById(eq(666L))).thenReturn(initBoundaryValue(BOUNDARY_VALUE_KEY, BOUNDARY_VALUE_NAME));\r\n        }\r\n    \r\n        @Test\r\n        public void addUserAsRoleAdminLogged() throws UserIsAlreadyRoleAdminException, RoleNotFoundException, BoundaryValueNotFoundException {\r\n            User user = initUser(USER_NAME);\r\n            List&lt;RoleAdminInfo&gt; roleAdminInfos = getRoleAdminInfos();\r\n            roleAdminController.addUserAsRoleAdmin(user, roleAdminInfos);\r\n    \r\n            List&lt;String&gt; result = auditRepository.readAll();\r\n            assertEquals(&quot;some data&quot;, result.toString());\r\n        }\r\n    \r\n        @Test\r\n        public void removeUserAsRoleAdminLogged() throws RoleNotFoundException, BoundaryValueNotFoundException {\r\n            User user = initUser(USER_NAME);\r\n            Long roleId = Long.valueOf(444);\r\n            Role role = initRole(&quot;test-role&quot;);\r\n            role.setApp(initApp(&quot;test-app&quot;));\r\n            role.setDomain(initDomain(&quot;test-domain&quot;));\r\n            when(roleService.getRoleByIdOrThrow(roleId)).thenReturn(role);\r\n    \r\n            roleAdminController.removeUserAsRoleAdmin(user, roleId, Long.valueOf(666));\r\n    \r\n            List&lt;String&gt; result = auditRepository.readAll();\r\n            assertEquals(&quot;some data&quot;, result.toString());\r\n        }\r\n    \r\n        @Test\r\n        public void removeRoleAdminPermission() throws RoleNotFoundException, BoundaryValueNotFoundException {\r\n            User user = initUser(USER_NAME);\r\n            List&lt;RoleAdminInfo&gt; roleAdminInfos = getRoleAdminInfos();\r\n            roleAdminController.removeRoleAdminPermission(user, roleAdminInfos);\r\n    \r\n            List&lt;String&gt; result = auditRepository.readAll();\r\n            assertEquals(1, result.size());\r\n            assertEquals(&quot;some data&quot;, result.toString());\r\n        }\r\n    \r\n        private List&lt;RoleAdminInfo&gt; getRoleAdminInfos() {\r\n            RoleAdminInfo info1 = initRoleAdminInfo(DOMAIN_NAME, ROLE_NAME, APP_NAME_1);\r\n            RoleAdminInfo info2 = initRoleAdminInfo(DOMAIN_NAME, ROLE_NAME, APP_NAME_2);\r\n            info1.setBoundaryValueId(123L);\r\n            info1.setBoundaryValueKey(BOUNDARY_VALUE_KEY);\r\n            info1.setBoundaryValueName(BOUNDARY_VALUE_NAME);\r\n            return Arrays.asList(info1, info2);\r\n        }\r\n    }\r\n\r\nTest 3 (newly added one)\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = FlywayConfig.class)\r\n    @DirtiesContext(classMode = DirtiesContext.ClassMode.BEFORE_CLASS)\r\n    @ActiveProfiles({&quot;aws&quot;, &quot;local&quot;})\r\n    public class BoundaryValueDeltaControllerTest {\r\n    \r\n        private static final String API_V1 = &quot;/api/v1/&quot;;\r\n    \r\n        @Autowired\r\n        TestRestTemplate testRestTemplate;\r\n    \r\n        @Autowired\r\n        private DomainBuilder domainBuilder;\r\n    \r\n        @Autowired\r\n        private AppBuilder appBuilder;\r\n    \r\n        @Autowired\r\n        private UserBuilder userBuilder;\r\n    \r\n        @Autowired\r\n        private DomainAdminBuilder domainAdminBuilder;\r\n    \r\n        @Autowired\r\n        private BoundarySetBuilder boundarySetBuilder;\r\n    \r\n        @MockBean\r\n        private LoginUserProvider loginUserProvider;\r\n    \r\n        @MockBean\r\n        private LoginTokenService loginTokenService;\r\n    \r\n        @MockBean\r\n        private BoundaryServiceAdapter serviceAdapter;\r\n    \r\n        @LocalServerPort\r\n        private int port;\r\n    \r\n        LoginUserInfo loggedInUser;\r\n    \r\n        @Before\r\n        public void setUp() {\r\n            clear();\r\n        }\r\n    \r\n        @After\r\n        public void tearDown() {\r\n            clear();\r\n        }\r\n    \r\n        @Test\r\n        public void updateBoundaryValuesFromApi() throws UrsBusinessException {\r\n            Domain domain = domainBuilder.persist();\r\n            App app = appBuilder.persist(domain);\r\n            BoundarySet boundarySet =  boundarySetBuilder.persist(domain);\r\n            User user = userBuilder.persist(domain.getAuthor().getUsername());\r\n            aLoggedInUser(domain.getAuthor().getUsername());\r\n            domainAdminBuilder.persist(user, domain);\r\n    \r\n            mockReadInfoFromApiUsingApp();\r\n    \r\n            ResponseEntity&lt;String&gt; response = callUpdateBoundaryValuesFromApi(domain, boundarySet, app);\r\n    \r\n            assertEquals(HttpStatus.OK, response.getStatusCode());\r\n            assertNotNull(response.getBody());\r\n        }\r\n    \r\n        private void mockReadInfoFromApiUsingApp() throws UrsBusinessException {\r\n            BoundaryValueInfo boundaryValueInfo = new BoundaryValueInfo();\r\n            boundaryValueInfo.setBoundaryValueId(10L);\r\n            boundaryValueInfo.setBoundaryValueKey(&quot;boundaryValueKey&quot;);\r\n            boundaryValueInfo.setBoundaryValueName(&quot;boundaryValuename&quot;);\r\n    \r\n            when(serviceAdapter.readInfoFromApiUsingApp(any(), any(), any())).thenReturn(new BoundaryValueInfo[]{boundaryValueInfo});\r\n        }\r\n    \r\n        private ResponseEntity&lt;String&gt; callUpdateBoundaryValuesFromApi(Domain domain, BoundarySet boundarySet, App app) {\r\n            String url = url(API_V1 + &quot;domains/&quot; + domain.getName() + &quot;/boundarysets/&quot; + boundarySet.getBoundarySetName() + &quot;/app/&quot; + app.getName()+ &quot;/updatefromapi/&quot;);\r\n            return testRestTemplate.exchange(url,HttpMethod.GET, null, String.class);\r\n        }\r\n    \r\n        private String url(String url) {\r\n            return &quot;http://localhost:&quot; + port + url;\r\n        }\r\n    \r\n        private void aLoggedInUser(String username) {\r\n            Claims claims = Jwts.claims();\r\n            claims.put(&quot;username&quot;, username);\r\n            loggedInUser = LoginUserInfo.parse(claims);\r\n    \r\n            when(loginUserProvider.getLoggedInUser()).thenReturn(loggedInUser);\r\n            when(loginTokenService.parseToken(any())).thenReturn(loggedInUser);\r\n        }\r\n    \r\n        private void clear() {\r\n            appBuilder.deleteAll();\r\n            boundarySetBuilder.deleteAll();\r\n            domainAdminBuilder.deleteAll();\r\n            domainBuilder.deleteAll();\r\n            userBuilder.deleteAll();\r\n        }\r\n   \r\n    }\r\n\r\nFlyway config \r\n\r\n    @TestConfiguration\r\n    public class FlywayConfig {\r\n        @Bean\r\n        public FlywayMigrationStrategy clean() {\r\n            return flyway -&gt; {\r\n                flyway.clean();\r\n                flyway.migrate();\r\n            };\r\n        }\r\n    }\r\n\r\nAnd I am getting below exception while running all together.\r\n\r\n    java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)\r\n    \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java.....\r\n    \r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.exception.FlywaySqlException: \r\n    Unable to obtain connection from database: Too many connections\r\n    ---------------------------------------------------------------\r\n    SQL State  : 08004\r\n    Error Code : 1040\r\n    Message    : Too many connections\r\n    \r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n    \t... 49 more\r\n    Caused by: org.flywaydb.core.internal.exception.FlywaySqlException: \r\n    Unable to obtain connection from database: Too many connections\r\n\r\nI am struggling since yesterday&#39;s and you might find duplicate but I tried to add the more details today. please guide me here.\r\n\r\n","title":"Exception in combination of @DirtiesContext and FlywayConfig bean in integration test","body":"<p>I have a problem when adding new test. And the problem is I think related to @DirtiesContext. I tried removing and adding it but nothing works in combination. Test 1 is using <strong>Application Context</strong> as well.</p>\n\n<p>the following two are running together and no issue.</p>\n\n<p>Test 1</p>\n\n<pre><code>@ActiveProfiles({\"aws\", \"local\"})\n@RunWith(SpringJUnit4ClassRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\npublic class UnauthorizedControllerTest {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(UnauthorizedControllerTest.class);\n\n    @Autowired\n    private TestRestTemplate testRestTemplate;\n\n    @LocalServerPort\n    private int port;\n\n    @Autowired\n    private ApplicationContext context;\n\n    private Map&lt;Class&lt;?&gt;, List&lt;String&gt;&gt; excludedMethodsPerController;\n\n    @Before\n    public void setUp() {\n        excludedMethodsPerController = excludedMethodsPerController();\n    }\n\n    @Test\n    public void contextStarts() {\n        assertNotNull(context);\n    }\n\n    @Test\n    public void controllerCall_WithoutAuthorization_ReturnsUnauthorized() {\n        Map&lt;String, Object&gt; controllerBeans = context.getBeansWithAnnotation(Controller.class);\n\n        for (Object controllerInstance : controllerBeans.values()) {\n            LOGGER.info(\"Checking controller {}\", controllerInstance);\n            checkController(controllerInstance);\n        }\n    }\n\n    public void checkController(Object controllerInstance) {\n        // Use AopUtils for the case that spring wraps the controller in a proxy\n        Class&lt;?&gt; controllerClass = AopProxyUtils.ultimateTargetClass(controllerInstance);\n        Method[] allMethods = controllerClass.getDeclaredMethods();\n\n\n        for (Method method : allMethods) {\n            LOGGER.info(\"Checking method: {}\", method.getName());\n            if (!isCallable(controllerClass, method)) {\n                continue;\n            }\n\n            String urlPrefix = urlPrefix(controllerClass);\n\n            Mapping mapping = Mapping.of(method.getAnnotations());\n\n            for (String url : mapping.urls) {\n                for (RequestMethod requestMethod : mapping.requestMethods) {\n                    ResponseEntity&lt;String&gt; exchange = exchange(urlPrefix + url, requestMethod);\n\n                    String message = String.format(\"Failing %s.%s\", controllerClass.getName(), method.getName());\n                    assertEquals(message, HttpStatus.UNAUTHORIZED, exchange.getStatusCode());\n                }\n            }\n        }\n    }\n\n    private ResponseEntity&lt;String&gt; exchange(String apiEndpoint, RequestMethod requestMethod) {\n        return testRestTemplate.exchange(url(replacePathVariables(apiEndpoint)), HttpMethod.resolve(requestMethod.name()), null, String.class);\n    }\n\n    private String urlPrefix(Class&lt;?&gt; aClass) {\n        if (!aClass.isAnnotationPresent(RequestMapping.class)) {\n            return \"\";\n        }\n\n        RequestMapping annotation = aClass.getAnnotation(RequestMapping.class);\n        return annotation.value()[0];\n    }\n\n    private String url(String url) {\n        return \"http://localhost:\" + port + url;\n    }\n\n    private boolean isCallable(Class&lt;?&gt; controller, Method method) {\n        return Modifier.isPublic(method.getModifiers())\n                &amp;&amp; !isExcluded(controller, method)\n                &amp;&amp; !isExternal(controller);\n    }\n\n    private boolean isExcluded(Class&lt;?&gt; controller, Method method) {\n        List&lt;String&gt; excludedMethodsPerController = this.excludedMethodsPerController.getOrDefault(controller, new ArrayList&lt;&gt;());\n        return excludedMethodsPerController.contains(method.getName());\n    }\n\n    private boolean isExternal(Class&lt;?&gt; controller) {\n        return controller.getName().startsWith(\"org.spring\");\n    }\n\n    private String replacePathVariables(String url) {\n        return url.replaceAll(\"\\\\{[^\\\\/]+}\", \"someValue\");\n    }\n\n    /**\n     * There must be a really good reason to exclude the method from being checked.\n     *\n     * @return The list of urls that must not be checked by the security\n     */\n    private static Map&lt;Class&lt;?&gt;, List&lt;String&gt;&gt; excludedMethodsPerController() {\n        Map&lt;Class&lt;?&gt;, List&lt;String&gt;&gt; methodPerController = new HashMap&lt;&gt;();\n\n        methodPerController.put(AuthenticationController.class, Collections.singletonList(\"generateAuthorizationToken\"));\n        methodPerController.put(SystemUserLoginController.class, Arrays.asList(\"systemUserLogin\", \"handleException\"));\n        methodPerController.put(ValidationController.class, Collections.singletonList(\"isValid\"));\n\n        return methodPerController;\n    }  \n    }\n</code></pre>\n\n<p>Test 2</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@ActiveProfiles({\"aws\", \"local\"})\npublic class RoleAdminControllerAuditTest {\n    private static final String DOMAIN_NAME = \"testDomain\";\n    private static final String APP_NAME_1 = \"testApp_1\";\n    private static final String APP_NAME_2 = \"testApp_2\";\n    private static final String ROLE_NAME = \"testRole\";\n    private static final String USER_NAME = \"testUser\";\n\n    @Autowired\n    AuditRepository auditRepository;\n    @Autowired\n    RoleAdminController roleAdminController;\n\n    @MockBean\n    RoleAdminService roleAdminService;\n    @MockBean\n    RoleAdminInfoBuilder infoBuilder;\n    @MockBean\n    AppInfoBuilder appInfoBuilder;\n    @MockBean\n    BoundaryValueService boundaryValueService;\n    @MockBean\n    RoleService roleService;\n\n    @MockBean\n    private SecurityService securityService;\n\n    private static final String URS_USER = \"loggedInUser\";\n    private static final String BOUNDARY_VALUE_KEY = \"11\";\n    private static final String BOUNDARY_VALUE_NAME = \"Schulenberg\";\n\n    private String auditEventDate = LocalDate.now().format(DateTimeFormatter.ofPattern(\"yyyy-MM-dd\"));\n\n    @BeforeClass\n    public static void setupTestEnv() {\n        // https://github.com/localstack/localstack/issues/592\n        System.setProperty(\"com.amazonaws.sdk.disableCbor\", \"true\");\n    }\n\n    @Before\n    public void setUp() throws Exception {\n        auditRepository.clean();\n        when(securityService.getLoggedInUser()).thenReturn(new TestHelper.FakeUser(URS_USER));\n        //when(roleService.addRoleToApp(any(), any(), eq(ROLE_NAME))).thenReturn(TestHelper.initRole(ROLE_NAME));\n        when(boundaryValueService.findBoundaryValueById(eq(123L))).thenReturn(initBoundaryValue(BOUNDARY_VALUE_KEY, BOUNDARY_VALUE_NAME));\n        when(boundaryValueService.findBoundaryValueById(eq(666L))).thenReturn(initBoundaryValue(BOUNDARY_VALUE_KEY, BOUNDARY_VALUE_NAME));\n    }\n\n    @Test\n    public void addUserAsRoleAdminLogged() throws UserIsAlreadyRoleAdminException, RoleNotFoundException, BoundaryValueNotFoundException {\n        User user = initUser(USER_NAME);\n        List&lt;RoleAdminInfo&gt; roleAdminInfos = getRoleAdminInfos();\n        roleAdminController.addUserAsRoleAdmin(user, roleAdminInfos);\n\n        List&lt;String&gt; result = auditRepository.readAll();\n        assertEquals(\"some data\", result.toString());\n    }\n\n    @Test\n    public void removeUserAsRoleAdminLogged() throws RoleNotFoundException, BoundaryValueNotFoundException {\n        User user = initUser(USER_NAME);\n        Long roleId = Long.valueOf(444);\n        Role role = initRole(\"test-role\");\n        role.setApp(initApp(\"test-app\"));\n        role.setDomain(initDomain(\"test-domain\"));\n        when(roleService.getRoleByIdOrThrow(roleId)).thenReturn(role);\n\n        roleAdminController.removeUserAsRoleAdmin(user, roleId, Long.valueOf(666));\n\n        List&lt;String&gt; result = auditRepository.readAll();\n        assertEquals(\"some data\", result.toString());\n    }\n\n    @Test\n    public void removeRoleAdminPermission() throws RoleNotFoundException, BoundaryValueNotFoundException {\n        User user = initUser(USER_NAME);\n        List&lt;RoleAdminInfo&gt; roleAdminInfos = getRoleAdminInfos();\n        roleAdminController.removeRoleAdminPermission(user, roleAdminInfos);\n\n        List&lt;String&gt; result = auditRepository.readAll();\n        assertEquals(1, result.size());\n        assertEquals(\"some data\", result.toString());\n    }\n\n    private List&lt;RoleAdminInfo&gt; getRoleAdminInfos() {\n        RoleAdminInfo info1 = initRoleAdminInfo(DOMAIN_NAME, ROLE_NAME, APP_NAME_1);\n        RoleAdminInfo info2 = initRoleAdminInfo(DOMAIN_NAME, ROLE_NAME, APP_NAME_2);\n        info1.setBoundaryValueId(123L);\n        info1.setBoundaryValueKey(BOUNDARY_VALUE_KEY);\n        info1.setBoundaryValueName(BOUNDARY_VALUE_NAME);\n        return Arrays.asList(info1, info2);\n    }\n}\n</code></pre>\n\n<p>Test 3 (newly added one)</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = FlywayConfig.class)\n@DirtiesContext(classMode = DirtiesContext.ClassMode.BEFORE_CLASS)\n@ActiveProfiles({\"aws\", \"local\"})\npublic class BoundaryValueDeltaControllerTest {\n\n    private static final String API_V1 = \"/api/v1/\";\n\n    @Autowired\n    TestRestTemplate testRestTemplate;\n\n    @Autowired\n    private DomainBuilder domainBuilder;\n\n    @Autowired\n    private AppBuilder appBuilder;\n\n    @Autowired\n    private UserBuilder userBuilder;\n\n    @Autowired\n    private DomainAdminBuilder domainAdminBuilder;\n\n    @Autowired\n    private BoundarySetBuilder boundarySetBuilder;\n\n    @MockBean\n    private LoginUserProvider loginUserProvider;\n\n    @MockBean\n    private LoginTokenService loginTokenService;\n\n    @MockBean\n    private BoundaryServiceAdapter serviceAdapter;\n\n    @LocalServerPort\n    private int port;\n\n    LoginUserInfo loggedInUser;\n\n    @Before\n    public void setUp() {\n        clear();\n    }\n\n    @After\n    public void tearDown() {\n        clear();\n    }\n\n    @Test\n    public void updateBoundaryValuesFromApi() throws UrsBusinessException {\n        Domain domain = domainBuilder.persist();\n        App app = appBuilder.persist(domain);\n        BoundarySet boundarySet =  boundarySetBuilder.persist(domain);\n        User user = userBuilder.persist(domain.getAuthor().getUsername());\n        aLoggedInUser(domain.getAuthor().getUsername());\n        domainAdminBuilder.persist(user, domain);\n\n        mockReadInfoFromApiUsingApp();\n\n        ResponseEntity&lt;String&gt; response = callUpdateBoundaryValuesFromApi(domain, boundarySet, app);\n\n        assertEquals(HttpStatus.OK, response.getStatusCode());\n        assertNotNull(response.getBody());\n    }\n\n    private void mockReadInfoFromApiUsingApp() throws UrsBusinessException {\n        BoundaryValueInfo boundaryValueInfo = new BoundaryValueInfo();\n        boundaryValueInfo.setBoundaryValueId(10L);\n        boundaryValueInfo.setBoundaryValueKey(\"boundaryValueKey\");\n        boundaryValueInfo.setBoundaryValueName(\"boundaryValuename\");\n\n        when(serviceAdapter.readInfoFromApiUsingApp(any(), any(), any())).thenReturn(new BoundaryValueInfo[]{boundaryValueInfo});\n    }\n\n    private ResponseEntity&lt;String&gt; callUpdateBoundaryValuesFromApi(Domain domain, BoundarySet boundarySet, App app) {\n        String url = url(API_V1 + \"domains/\" + domain.getName() + \"/boundarysets/\" + boundarySet.getBoundarySetName() + \"/app/\" + app.getName()+ \"/updatefromapi/\");\n        return testRestTemplate.exchange(url,HttpMethod.GET, null, String.class);\n    }\n\n    private String url(String url) {\n        return \"http://localhost:\" + port + url;\n    }\n\n    private void aLoggedInUser(String username) {\n        Claims claims = Jwts.claims();\n        claims.put(\"username\", username);\n        loggedInUser = LoginUserInfo.parse(claims);\n\n        when(loginUserProvider.getLoggedInUser()).thenReturn(loggedInUser);\n        when(loginTokenService.parseToken(any())).thenReturn(loggedInUser);\n    }\n\n    private void clear() {\n        appBuilder.deleteAll();\n        boundarySetBuilder.deleteAll();\n        domainAdminBuilder.deleteAll();\n        domainBuilder.deleteAll();\n        userBuilder.deleteAll();\n    }\n\n}\n</code></pre>\n\n<p>Flyway config </p>\n\n<pre><code>@TestConfiguration\npublic class FlywayConfig {\n    @Bean\n    public FlywayMigrationStrategy clean() {\n        return flyway -&gt; {\n            flyway.clean();\n            flyway.migrate();\n        };\n    }\n}\n</code></pre>\n\n<p>And I am getting below exception while running all together.</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java.....\n\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.exception.FlywaySqlException: \nUnable to obtain connection from database: Too many connections\n---------------------------------------------------------------\nSQL State  : 08004\nError Code : 1040\nMessage    : Too many connections\n\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\n    ... 49 more\nCaused by: org.flywaydb.core.internal.exception.FlywaySqlException: \nUnable to obtain connection from database: Too many connections\n</code></pre>\n\n<p>I am struggling since yesterday's and you might find duplicate but I tried to add the more details today. please guide me here.</p>\n"},{"tags":["java","android","rx-java","reactive-programming","rx-android"],"comments":[{"owner":{"account_id":1958700,"reputation":17413,"user_id":1760984,"accept_rate":80,"display_name":"aldok"},"score":0,"creation_date":1578991707,"post_id":38234152,"comment_id":105609726,"body_markdown":"Have you tried using Observable.combineLatest instead of Observable.zip?","body":"Have you tried using Observable.combineLatest instead of Observable.zip?"},{"owner":{"account_id":7449199,"reputation":891,"user_id":5664529,"display_name":"Siddhesh Shirodkar"},"score":0,"creation_date":1654753952,"post_id":38234152,"comment_id":128167890,"body_markdown":"https://gist.github.com/Macrow/99e2be7208dd42d76c0be8556dc785b0 \nthis might help","body":"<a href=\"https://gist.github.com/Macrow/99e2be7208dd42d76c0be8556dc785b0\" rel=\"nofollow noreferrer\">gist.github.com/Macrow/99e2be7208dd42d76c0be8556dc785b0</a>  this might help"}],"answers":[{"tags":[],"owner":{"account_id":2263902,"reputation":30920,"user_id":1993204,"accept_rate":90,"display_name":"Bartek Lipinski"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1476098894,"creation_date":1467841381,"answer_id":38234271,"question_id":38234152,"body_markdown":"That&#39;s happening because subscribing to your `zipped` observable happens in the the same, `io` thread.\r\n\r\nWhy don&#39;t you try this instead:\r\n\r\n    Observable\r\n        .zip(\r\n            getStrings(&quot;One&quot;, &quot;Two&quot;)\r\n                .subscribeOn(Schedulers.newThread()),\r\n            getStrings(&quot;Three&quot;, &quot;Four&quot;)\r\n                .subscribeOn(Schedulers.newThread()),\r\n            getStrings(&quot;Five&quot;, &quot;Six&quot;)\r\n                .subscribeOn(Schedulers.newThread()),\r\n            mergeStringLists())\r\n        .observeOn(AndroidSchedulers.mainThread())\r\n        .subscribe(new Observer&lt;List&lt;String&gt;&gt;() {\r\n            @Override\r\n            public void onCompleted() {\r\n        \r\n            }\r\n        \r\n            @Override\r\n            public void onError(Throwable e) {\r\n        \r\n            }\r\n        \r\n            @Override\r\n            public void onNext(List&lt;String&gt; strings) {\r\n                //Display the strings\r\n            }\r\n        });\r\n\r\nLet me know if that helped","title":"How can I make this rxjava zip to run in parallel?","body":"<p>That's happening because subscribing to your <code>zipped</code> observable happens in the the same, <code>io</code> thread.</p>\n\n<p>Why don't you try this instead:</p>\n\n<pre><code>Observable\n    .zip(\n        getStrings(\"One\", \"Two\")\n            .subscribeOn(Schedulers.newThread()),\n        getStrings(\"Three\", \"Four\")\n            .subscribeOn(Schedulers.newThread()),\n        getStrings(\"Five\", \"Six\")\n            .subscribeOn(Schedulers.newThread()),\n        mergeStringLists())\n    .observeOn(AndroidSchedulers.mainThread())\n    .subscribe(new Observer&lt;List&lt;String&gt;&gt;() {\n        @Override\n        public void onCompleted() {\n\n        }\n\n        @Override\n        public void onError(Throwable e) {\n\n        }\n\n        @Override\n        public void onNext(List&lt;String&gt; strings) {\n            //Display the strings\n        }\n    });\n</code></pre>\n\n<p>Let me know if that helped</p>\n"},{"tags":[],"owner":{"account_id":455809,"reputation":12993,"user_id":854207,"accept_rate":62,"display_name":"paul"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1529426657,"creation_date":1467888891,"answer_id":38243673,"question_id":38234152,"body_markdown":"Here I have an example that I did using Zip in asynchronous way, just in case you&#180;re curious\r\n\r\n\r\n\r\n    /**\r\n     * Since every observable into the zip is created to                 subscribeOn a diferent thread, it&#180;s means all of them will run in parallel.\r\n     * By default Rx is not async, only if you explicitly use subscribeOn.\r\n     */\r\n    @Test\r\n    public void testAsyncZip() {\r\n        scheduler = Schedulers.newThread();\r\n        scheduler1 = Schedulers.newThread();\r\n        scheduler2 = Schedulers.newThread();\r\n        long start = System.currentTimeMillis();\r\n        Observable.zip(obAsyncString(), obAsyncString1(), obAsyncString2(), (s, s2, s3) -&gt; s.concat(s2).concat(s3))\r\n                .subscribe(result -&gt; showResult(&quot;Async in:&quot;, start, result));\r\n    }\r\n\r\n    public Observable&lt;String&gt; obAsyncString() {\r\n        return Observable.just(&quot;&quot;)\r\n                .observeOn(scheduler)\r\n                .doOnNext(val -&gt; System.out.println(&quot;Thread &quot; + Thread.currentThread().getName()))\r\n                .map(val -&gt; &quot;Hello&quot;);\r\n    }\r\n\r\n    public Observable&lt;String&gt; obAsyncString1() {\r\n        return Observable.just(&quot;&quot;)\r\n                .observeOn(scheduler1)\r\n                .doOnNext(val -&gt; System.out.println(&quot;Thread &quot; + Thread.currentThread().getName()))\r\n                .map(val -&gt; &quot; World&quot;);\r\n    }\r\n\r\n    public Observable&lt;String&gt; obAsyncString2() {\r\n        return Observable.just(&quot;&quot;)\r\n                .observeOn(scheduler2)\r\n                .doOnNext(val -&gt; System.out.println(&quot;Thread &quot; + Thread.currentThread().getName()))\r\n                .map(val -&gt; &quot;!&quot;);\r\n    }\r\n         \r\n\r\nYou can see more examples here https://github.com/politrons/reactive","title":"How can I make this rxjava zip to run in parallel?","body":"<p>Here I have an example that I did using Zip in asynchronous way, just in case youre curious</p>\n\n<pre><code>/**\n * Since every observable into the zip is created to                 subscribeOn a diferent thread, its means all of them will run in parallel.\n * By default Rx is not async, only if you explicitly use subscribeOn.\n */\n@Test\npublic void testAsyncZip() {\n    scheduler = Schedulers.newThread();\n    scheduler1 = Schedulers.newThread();\n    scheduler2 = Schedulers.newThread();\n    long start = System.currentTimeMillis();\n    Observable.zip(obAsyncString(), obAsyncString1(), obAsyncString2(), (s, s2, s3) -&gt; s.concat(s2).concat(s3))\n            .subscribe(result -&gt; showResult(\"Async in:\", start, result));\n}\n\npublic Observable&lt;String&gt; obAsyncString() {\n    return Observable.just(\"\")\n            .observeOn(scheduler)\n            .doOnNext(val -&gt; System.out.println(\"Thread \" + Thread.currentThread().getName()))\n            .map(val -&gt; \"Hello\");\n}\n\npublic Observable&lt;String&gt; obAsyncString1() {\n    return Observable.just(\"\")\n            .observeOn(scheduler1)\n            .doOnNext(val -&gt; System.out.println(\"Thread \" + Thread.currentThread().getName()))\n            .map(val -&gt; \" World\");\n}\n\npublic Observable&lt;String&gt; obAsyncString2() {\n    return Observable.just(\"\")\n            .observeOn(scheduler2)\n            .doOnNext(val -&gt; System.out.println(\"Thread \" + Thread.currentThread().getName()))\n            .map(val -&gt; \"!\");\n}\n</code></pre>\n\n<p>You can see more examples here <a href=\"https://github.com/politrons/reactive\" rel=\"nofollow noreferrer\">https://github.com/politrons/reactive</a></p>\n"},{"tags":[],"owner":{"account_id":7510035,"reputation":431,"user_id":5705300,"display_name":"Fl&#225;vio Henrique"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660751992,"creation_date":1660751092,"answer_id":73391355,"question_id":38234152,"body_markdown":"You don&#39;t necessarily need to use `Schedulers.newThread()` since is much more expensive and not recommended (Most of the cases), follow an example bellow with `Schedulers.io()`.\r\n\r\n```\r\n@Test\r\npublic void testWithZipInParallelSuccess() {\r\n\r\n    // Given\r\n    Single&lt;Integer&gt; source1 = Single.fromCallable(() -&gt; {\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            Thread.sleep(1000);\r\n            System.out.println(&quot;Source 1 emitted : &quot; + i + &quot; &quot; +    Thread.currentThread());\r\n        }\r\n        return 1;\r\n    }).subscribeOn(Schedulers.io());\r\n\r\n    Single&lt;Integer&gt; source2 = Single.fromCallable(() -&gt; {\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            Thread.sleep(1000);\r\n            System.out.println(&quot;Source 2 emitted : &quot; + i + &quot; &quot; +    Thread.currentThread());\r\n        }\r\n        return 2;\r\n    }).subscribeOn(Schedulers.io());\r\n    long start = System.currentTimeMillis();\r\n\r\n    // When\r\n    Single.zip(source1, source2, (a, b) -&gt; {\r\n        return a;\r\n    }).blockingGet();\r\n    long end = System.currentTimeMillis();\r\n\r\n    // Then\r\n    long totalExecutionTime = end - start;\r\n    System.out.println(&quot;Total execution time: &quot; + totalExecutionTime);\r\n    Assertions.assertTrue(totalExecutionTime &lt; 6000);\r\n\r\n    /*\r\n    Output:\r\n    Source 1 emitted : 0 Thread[RxCachedThreadScheduler-1,5,main]\r\n    Source 2 emitted : 0 Thread[RxCachedThreadScheduler-2,5,main]\r\n    Source 1 emitted : 1 Thread[RxCachedThreadScheduler-1,5,main]\r\n    Source 2 emitted : 1 Thread[RxCachedThreadScheduler-2,5,main]\r\n    Source 2 emitted : 2 Thread[RxCachedThreadScheduler-2,5,main]\r\n    Source 1 emitted : 2 Thread[RxCachedThreadScheduler-1,5,main]\r\n    Total execution time: 3026\r\n    */\r\n\r\n}\r\n```\r\n\r\nFollow more examples: https://gist.github.com/flavio-henrique/4824feedc6da71b397b38dc86bb23618\r\n\r\nSome reference: https://stackoverflow.com/questions/33370339/what-is-the-difference-between-schedulers-io-and-schedulers-computation","title":"How can I make this rxjava zip to run in parallel?","body":"<p>You don't necessarily need to use <code>Schedulers.newThread()</code> since is much more expensive and not recommended (Most of the cases), follow an example bellow with <code>Schedulers.io()</code>.</p>\n<pre><code>@Test\npublic void testWithZipInParallelSuccess() {\n\n    // Given\n    Single&lt;Integer&gt; source1 = Single.fromCallable(() -&gt; {\n        for (int i = 0; i &lt; 3; i++) {\n            Thread.sleep(1000);\n            System.out.println(&quot;Source 1 emitted : &quot; + i + &quot; &quot; +    Thread.currentThread());\n        }\n        return 1;\n    }).subscribeOn(Schedulers.io());\n\n    Single&lt;Integer&gt; source2 = Single.fromCallable(() -&gt; {\n        for (int i = 0; i &lt; 3; i++) {\n            Thread.sleep(1000);\n            System.out.println(&quot;Source 2 emitted : &quot; + i + &quot; &quot; +    Thread.currentThread());\n        }\n        return 2;\n    }).subscribeOn(Schedulers.io());\n    long start = System.currentTimeMillis();\n\n    // When\n    Single.zip(source1, source2, (a, b) -&gt; {\n        return a;\n    }).blockingGet();\n    long end = System.currentTimeMillis();\n\n    // Then\n    long totalExecutionTime = end - start;\n    System.out.println(&quot;Total execution time: &quot; + totalExecutionTime);\n    Assertions.assertTrue(totalExecutionTime &lt; 6000);\n\n    /*\n    Output:\n    Source 1 emitted : 0 Thread[RxCachedThreadScheduler-1,5,main]\n    Source 2 emitted : 0 Thread[RxCachedThreadScheduler-2,5,main]\n    Source 1 emitted : 1 Thread[RxCachedThreadScheduler-1,5,main]\n    Source 2 emitted : 1 Thread[RxCachedThreadScheduler-2,5,main]\n    Source 2 emitted : 2 Thread[RxCachedThreadScheduler-2,5,main]\n    Source 1 emitted : 2 Thread[RxCachedThreadScheduler-1,5,main]\n    Total execution time: 3026\n    */\n\n}\n</code></pre>\n<p>Follow more examples: <a href=\"https://gist.github.com/flavio-henrique/4824feedc6da71b397b38dc86bb23618\" rel=\"nofollow noreferrer\">https://gist.github.com/flavio-henrique/4824feedc6da71b397b38dc86bb23618</a></p>\n<p>Some reference: <a href=\"https://stackoverflow.com/questions/33370339/what-is-the-difference-between-schedulers-io-and-schedulers-computation\">What is the difference between Schedulers.io() and Schedulers.computation()</a></p>\n"}],"owner":{"account_id":2363141,"reputation":24680,"user_id":2069407,"accept_rate":73,"display_name":"s-hunter"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11328,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":38234271,"answer_count":3,"score":18,"last_activity_date":1660751992,"creation_date":1467840838,"question_id":38234152,"body_markdown":"I have a sleep method for simulating a long running process.\r\n\r\n    private void sleep() {\r\n        try {\r\n            Thread.sleep(2000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nThen I have a method returns an Observable containing a list of 2 strings that is given in the parameters. It calls the sleep before return the strings back.\r\n\r\n    private Observable&lt;List&lt;String&gt;&gt; getStrings(final String str1, final String str2) {\r\n        return Observable.fromCallable(new Callable&lt;List&lt;String&gt;&gt;() {\r\n            @Override\r\n            public List&lt;String&gt; call() {\r\n                sleep();\r\n                List&lt;String&gt; strings = new ArrayList&lt;&gt;();\r\n                strings.add(str1);\r\n                strings.add(str2);\r\n                return strings;\r\n            }\r\n        });\r\n    }\r\n\r\n\r\nThen I am calling the getStrings three times in Observalb.zip, I expect those three calls to run in parallel, so the total time of execution should be within **2 seconds** or maybe 3 seconds the most because the sleep was only 2 seconds. However, it&#39;s taking a total of **six** seconds. **How can I make this to run in parallel so it will finish within 2 seconds?**\r\n\r\n    Observable\r\n    .zip(getStrings(&quot;One&quot;, &quot;Two&quot;), getStrings(&quot;Three&quot;, &quot;Four&quot;), getStrings(&quot;Five&quot;, &quot;Six&quot;), mergeStringLists())\r\n    .subscribeOn(Schedulers.io())\r\n    .observeOn(AndroidSchedulers.mainThread())\r\n    .subscribe(new Observer&lt;List&lt;String&gt;&gt;() {\r\n        @Override\r\n        public void onCompleted() {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void onError(Throwable e) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void onNext(List&lt;String&gt; strings) {\r\n            //Display the strings\r\n        }\r\n    });\r\n\r\n\r\n\r\nThe mergeStringLists method\r\n\r\n    private Func3&lt;List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;&gt; mergeStringLists() {\r\n        return new Func3&lt;List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;&gt;() {\r\n            @Override\r\n            public List&lt;String&gt; call(List&lt;String&gt; strings, List&lt;String&gt; strings2, List&lt;String&gt; strings3) {\r\n                Log.d(TAG, &quot;...&quot;);\r\n    \r\n                for (String s : strings2) {\r\n                    strings.add(s);\r\n                }\r\n    \r\n                for (String s : strings3) {\r\n                    strings.add(s);\r\n                }\r\n    \r\n                return strings;\r\n            }\r\n        };\r\n    }","title":"How can I make this rxjava zip to run in parallel?","body":"<p>I have a sleep method for simulating a long running process.</p>\n\n<pre><code>private void sleep() {\n    try {\n        Thread.sleep(2000);\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Then I have a method returns an Observable containing a list of 2 strings that is given in the parameters. It calls the sleep before return the strings back.</p>\n\n<pre><code>private Observable&lt;List&lt;String&gt;&gt; getStrings(final String str1, final String str2) {\n    return Observable.fromCallable(new Callable&lt;List&lt;String&gt;&gt;() {\n        @Override\n        public List&lt;String&gt; call() {\n            sleep();\n            List&lt;String&gt; strings = new ArrayList&lt;&gt;();\n            strings.add(str1);\n            strings.add(str2);\n            return strings;\n        }\n    });\n}\n</code></pre>\n\n<p>Then I am calling the getStrings three times in Observalb.zip, I expect those three calls to run in parallel, so the total time of execution should be within <strong>2 seconds</strong> or maybe 3 seconds the most because the sleep was only 2 seconds. However, it's taking a total of <strong>six</strong> seconds. <strong>How can I make this to run in parallel so it will finish within 2 seconds?</strong></p>\n\n<pre><code>Observable\n.zip(getStrings(\"One\", \"Two\"), getStrings(\"Three\", \"Four\"), getStrings(\"Five\", \"Six\"), mergeStringLists())\n.subscribeOn(Schedulers.io())\n.observeOn(AndroidSchedulers.mainThread())\n.subscribe(new Observer&lt;List&lt;String&gt;&gt;() {\n    @Override\n    public void onCompleted() {\n\n    }\n\n    @Override\n    public void onError(Throwable e) {\n\n    }\n\n    @Override\n    public void onNext(List&lt;String&gt; strings) {\n        //Display the strings\n    }\n});\n</code></pre>\n\n<p>The mergeStringLists method</p>\n\n<pre><code>private Func3&lt;List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;&gt; mergeStringLists() {\n    return new Func3&lt;List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;, List&lt;String&gt;&gt;() {\n        @Override\n        public List&lt;String&gt; call(List&lt;String&gt; strings, List&lt;String&gt; strings2, List&lt;String&gt; strings3) {\n            Log.d(TAG, \"...\");\n\n            for (String s : strings2) {\n                strings.add(s);\n            }\n\n            for (String s : strings3) {\n                strings.add(s);\n            }\n\n            return strings;\n        }\n    };\n}\n</code></pre>\n"},{"tags":["java","android","fingerprint","scanning","fido-u2f"],"comments":[{"owner":{"account_id":2346311,"reputation":8954,"user_id":2900893,"accept_rate":73,"display_name":"Shabbir Dhangot"},"score":0,"creation_date":1451733500,"post_id":34565252,"comment_id":56874169,"body_markdown":"You need Hardware for that. Many android phone dont have as in screen.","body":"You need Hardware for that. Many android phone dont have as in screen."}],"answers":[{"tags":[],"owner":{"account_id":4930991,"reputation":161,"user_id":3970787,"display_name":"KOP Lee"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1453688314,"creation_date":1453688314,"answer_id":34984159,"question_id":34565252,"body_markdown":"IdentityX has been made for a really excellent Demo for the mobile client side of FIDO UAF and the related server. Here is the official guide for how to implement it.\r\nhttp://daoninc.github.io/fido-integration/#overview\r\n\r\nAlso, you can check the souce code on github.\r\nhttps://github.com/daoninc/fido-android-rp-app\r\n\r\nI am a FIDO developer in China. Glad to exchange our opinions.\r\n\r\nCheers","title":"Fingerprint scanning using FIDO UAF for mobile application","body":"<p>IdentityX has been made for a really excellent Demo for the mobile client side of FIDO UAF and the related server. Here is the official guide for how to implement it.\n<a href=\"http://daoninc.github.io/fido-integration/#overview\" rel=\"nofollow\">http://daoninc.github.io/fido-integration/#overview</a></p>\n\n<p>Also, you can check the souce code on github.\n<a href=\"https://github.com/daoninc/fido-android-rp-app\" rel=\"nofollow\">https://github.com/daoninc/fido-android-rp-app</a></p>\n\n<p>I am a FIDO developer in China. Glad to exchange our opinions.</p>\n\n<p>Cheers</p>\n"},{"tags":[],"owner":{"account_id":2902096,"reputation":208,"user_id":2488488,"accept_rate":40,"display_name":"Niv Navick"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660751938,"creation_date":1660751938,"answer_id":73391555,"question_id":34565252,"body_markdown":"You can find helpful information about FIDO and Passkeys at [passkeys.com][1] .I used it and it took me no time to implement FIDO into my website. I think their method described there is the easiest and detailed one out there. I assume most of your questions have answers there.\r\n\r\nHere are some samples I found at github [https://github.com/OwnID/samples][2]\r\n\r\n\r\n  [1]: https://passkeys.com\r\n  [2]: https://github.com/OwnID/samples","title":"Fingerprint scanning using FIDO UAF for mobile application","body":"<p>You can find helpful information about FIDO and Passkeys at <a href=\"https://passkeys.com\" rel=\"nofollow noreferrer\">passkeys.com</a> .I used it and it took me no time to implement FIDO into my website. I think their method described there is the easiest and detailed one out there. I assume most of your questions have answers there.</p>\n<p>Here are some samples I found at github <a href=\"https://github.com/OwnID/samples\" rel=\"nofollow noreferrer\">https://github.com/OwnID/samples</a></p>\n"}],"owner":{"account_id":6550956,"reputation":21,"user_id":5065383,"display_name":"Kirtikant Patadiya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2017,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660751938,"creation_date":1451733411,"question_id":34565252,"body_markdown":"I am member of FIDO alliance. I&#39;m working on one Mobile application where for security purpose I would like to include fingerprint scanning. I have referred to all documents available / provided by FIDO UAF for user management.. and that is exactly what I wish to include in my application. Basically I &#39;m looking for API / SDK / Available document for development.\r\n\r\nAnd also I have few questions to come up with\r\n\r\n1) It is possible to have a fingerprint scanning feature with the help of FIDO alliance. ? With the help of API Provided if any,  \r\n2) Does Fido alliance is implement in below android version 23.   \r\n3) Is there any documentation which can be referred to develop fingerprint scanning feature. If any API or SDK is available for FIDO UAF in android studio then can you provide me ?\r\n","title":"Fingerprint scanning using FIDO UAF for mobile application","body":"<p>I am member of FIDO alliance. I'm working on one Mobile application where for security purpose I would like to include fingerprint scanning. I have referred to all documents available / provided by FIDO UAF for user management.. and that is exactly what I wish to include in my application. Basically I 'm looking for API / SDK / Available document for development.</p>\n\n<p>And also I have few questions to come up with</p>\n\n<p>1) It is possible to have a fingerprint scanning feature with the help of FIDO alliance. ? With the help of API Provided if any,<br>\n2) Does Fido alliance is implement in below android version 23.<br>\n3) Is there any documentation which can be referred to develop fingerprint scanning feature. If any API or SDK is available for FIDO UAF in android studio then can you provide me ?</p>\n"},{"tags":["java","spring-boot","pom.xml"],"answers":[{"tags":[],"owner":{"account_id":3392001,"reputation":79,"user_id":2846638,"accept_rate":75,"display_name":"Alfox"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660751631,"creation_date":1660751631,"answer_id":73391492,"question_id":73337657,"body_markdown":"I solved the problem in this way\r\nin `pom.xml` I excluded xnio-api (as in the question)\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\r\n        &lt;artifactId&gt;wildfly-jms-client-bom&lt;/artifactId&gt;\r\n        &lt;version&gt;10.1.0.Final&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;org.jboss.xnio&lt;/groupId&gt;\r\n                &lt;artifactId&gt;xnio-api&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\r\n        &lt;artifactId&gt;wildfly-naming-client&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.15.Final&lt;/version&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;org.jboss.xnio&lt;/groupId&gt;\r\n                &lt;artifactId&gt;xnio-api&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nThen I created `jboss-deployment-structure.xml` under `webapp/WEB-INF` folder, with this content\r\n\r\n    &lt;jboss-deployment-structure&gt;\r\n        &lt;ear-subdeployments-isolated&gt;true&lt;/ear-subdeployments-isolated&gt;\r\n        &lt;deployment&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;module name=&quot;org.jboss.xnio&quot; /&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/deployment&gt;\r\n    \r\n    &lt;/jboss-deployment-structure&gt;\r\n\r\nnow the `WAR` is deployed with no problems\r\n\r\nHope this help","title":"java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot;","body":"<p>I solved the problem in this way\nin <code>pom.xml</code> I excluded xnio-api (as in the question)</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\n    &lt;artifactId&gt;wildfly-jms-client-bom&lt;/artifactId&gt;\n    &lt;version&gt;10.1.0.Final&lt;/version&gt;\n    &lt;type&gt;pom&lt;/type&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.jboss.xnio&lt;/groupId&gt;\n            &lt;artifactId&gt;xnio-api&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\n    &lt;artifactId&gt;wildfly-naming-client&lt;/artifactId&gt;\n    &lt;version&gt;1.0.15.Final&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.jboss.xnio&lt;/groupId&gt;\n            &lt;artifactId&gt;xnio-api&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then I created <code>jboss-deployment-structure.xml</code> under <code>webapp/WEB-INF</code> folder, with this content</p>\n<pre><code>&lt;jboss-deployment-structure&gt;\n    &lt;ear-subdeployments-isolated&gt;true&lt;/ear-subdeployments-isolated&gt;\n    &lt;deployment&gt;\n        &lt;dependencies&gt;\n            &lt;module name=&quot;org.jboss.xnio&quot; /&gt;\n        &lt;/dependencies&gt;\n    &lt;/deployment&gt;\n\n&lt;/jboss-deployment-structure&gt;\n</code></pre>\n<p>now the <code>WAR</code> is deployed with no problems</p>\n<p>Hope this help</p>\n"}],"owner":{"account_id":3392001,"reputation":79,"user_id":2846638,"accept_rate":75,"display_name":"Alfox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":789,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73391492,"answer_count":1,"score":1,"last_activity_date":1660751631,"creation_date":1660324272,"question_id":73337657,"body_markdown":"I receive this error when I try to deploy my `war` on `Wildfly 10.1.0.Final` (I cannot change wildfly version)\r\n\r\n    \r\n    18:53:58,467 WARN  [org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext] (ServerService Thread Pool -- 78) Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;undertowServletWebServerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n    18:53:58,493 INFO  [org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener] (ServerService Thread Pool -- 78)\r\n    \r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    18:53:58,536 ERROR [org.springframework.boot.SpringApplication] (ServerService Thread Pool -- 78) Application run failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;undertowServletWebServerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\n            at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n            at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\r\n            at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\r\n            at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\r\n            at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\r\n            at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:186)\r\n            at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:171)\r\n            at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n            at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n            at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n            at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n            at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n            at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n            at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n            at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:234)\r\n            at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:100)\r\n            at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:82)\r\n            at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n            at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n            at java.lang.Thread.run(Thread.java:748)\r\n            at org.jboss.threads.JBossThread.run(JBossThread.java:320)\r\n    Caused by: java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n            at org.springframework.boot.autoconfigure.web.embedded.UndertowWebServerFactoryCustomizer.customize(UndertowWebServerFactoryCustomizer.java:81)\r\n            at org.springframework.boot.autoconfigure.web.embedded.UndertowWebServerFactoryCustomizer.customize(UndertowWebServerFactoryCustomizer.java:59)\r\n            at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.lambda$postProcessBeforeInitialization$0(WebServerFactoryCustomizerBeanPostProcessor.java:72)\r\n            at org.springframework.boot.util.LambdaSafe$Callbacks.lambda$null$0(LambdaSafe.java:287)\r\n            at org.springframework.boot.util.LambdaSafe$LambdaSafeCallback.invoke(LambdaSafe.java:159)\r\n            at org.springframework.boot.util.LambdaSafe$Callbacks.lambda$invoke$1(LambdaSafe.java:286)\r\n            at java.util.ArrayList.forEach(ArrayList.java:1257)\r\n            at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1082)\r\n            at org.springframework.boot.util.LambdaSafe$Callbacks.invoke(LambdaSafe.java:286)\r\n            at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.postProcessBeforeInitialization(WebServerFactoryCustomizerBeanPostProcessor.java:72)\r\n            at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.postProcessBeforeInitialization(WebServerFactoryCustomizerBeanPostProcessor.java:58)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:440)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\r\n            ... 34 more\r\n    \r\n    18:53:58,543 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 78) MSC000001: Failed to start service jboss.undertow.deployment.default-server.default-host.&quot;/custom-crm-ticket-0.0.1-SNAPSHOT&quot;: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host.&quot;/custom-crm-ticket-0.0.1-SNAPSHOT&quot;: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;undertowServletWebServerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n            at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:85)\r\n            at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n            at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n            at java.lang.Thread.run(Thread.java:748)\r\n            at org.jboss.threads.JBossThread.run(JBossThread.java:320)\r\n    Caused by: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;undertowServletWebServerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n            at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:236)\r\n            at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:100)\r\n            at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:82)\r\n            ... 6 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;undertowServletWebServerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\n            at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n            at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\r\n            at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\r\n            at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\r\n            at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\r\n            at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:186)\r\n            at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:171)\r\n            at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n            at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n            at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n            at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n            at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n            at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n            at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n            at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:234)\r\n            ... 8 more\r\n    Caused by: java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n            at org.springframework.boot.autoconfigure.web.embedded.UndertowWebServerFactoryCustomizer.customize(UndertowWebServerFactoryCustomizer.java:81)\r\n            at org.springframework.boot.autoconfigure.web.embedded.UndertowWebServerFactoryCustomizer.customize(UndertowWebServerFactoryCustomizer.java:59)\r\n            at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.lambda$postProcessBeforeInitialization$0(WebServerFactoryCustomizerBeanPostProcessor.java:72)\r\n            at org.springframework.boot.util.LambdaSafe$Callbacks.lambda$null$0(LambdaSafe.java:287)\r\n            at org.springframework.boot.util.LambdaSafe$LambdaSafeCallback.invoke(LambdaSafe.java:159)\r\n            at org.springframework.boot.util.LambdaSafe$Callbacks.lambda$invoke$1(LambdaSafe.java:286)\r\n            at java.util.ArrayList.forEach(ArrayList.java:1257)\r\n            at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1082)\r\n            at org.springframework.boot.util.LambdaSafe$Callbacks.invoke(LambdaSafe.java:286)\r\n            at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.postProcessBeforeInitialization(WebServerFactoryCustomizerBeanPostProcessor.java:72)\r\n            at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.postProcessBeforeInitialization(WebServerFactoryCustomizerBeanPostProcessor.java:58)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:440)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\r\n            ... 34 more\r\n    \r\n    18:53:58,560 ERROR [org.jboss.as.controller.management-operation] (DeploymentScanner-threads - 1) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;custom-crm-ticket-0.0.1-SNAPSHOT.war&quot;)]) - failure description: {\r\n        &quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.undertow.deployment.default-server.default-host.\\&quot;/custom-crm-ticket-0.0.1-SNAPSHOT\\&quot;&quot; =&gt; &quot;org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host.\\&quot;/custom-crm-ticket-0.0.1-SNAPSHOT\\&quot;: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;undertowServletWebServerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field \\&quot;MAX_HEADER_SIZE\\&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n        Caused by: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;undertowServletWebServerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field \\&quot;MAX_HEADER_SIZE\\&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n        Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;undertowServletWebServerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field \\&quot;MAX_HEADER_SIZE\\&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n        Caused by: java.lang.LinkageError: loader constraint violation: when resolving field \\&quot;MAX_HEADER_SIZE\\&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type&quot;},\r\n        &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.undertow.deployment.default-server.default-host.\\&quot;/custom-crm-ticket-0.0.1-SNAPSHOT\\&quot;&quot;],\r\n        &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; undefined\r\n    }\r\n    18:53:58,665 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 1) WFLYSRV0010: Deployed &quot;custom-crm-ticket-0.0.1-SNAPSHOT.war&quot; (runtime-name : &quot;custom-crm-ticket-0.0.1-SNAPSHOT.war&quot;)\r\n    18:53:58,666 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 1) WFLYCTL0183: Service status report\r\n    WFLYCTL0186:   Services which failed to start:      service jboss.undertow.deployment.default-server.default-host.&quot;/custom-crm-ticket-0.0.1-SNAPSHOT&quot;: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host.&quot;/custom-crm-ticket-0.0.1-SNAPSHOT&quot;: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;undertowServletWebServerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field&#39;s resolved type, org/xnio/Option, have different Class objects for that type\r\n\r\nThis is my `pom`\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.2&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;groupId&gt;com.hpe.du&lt;/groupId&gt;\r\n        &lt;artifactId&gt;custom-crm-ticket&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;name&gt;custom-crm-ticket&lt;/name&gt;\r\n        &lt;description&gt;custom ticketing&lt;/description&gt;\r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;version&gt;1.18.24&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n                &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n                &lt;version&gt;20220320&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.jms&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.jms-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.jms&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jms&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1&lt;/version&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\r\n                &lt;artifactId&gt;wildfly-jms-client-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;10.1.0.Final&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\r\n                &lt;artifactId&gt;wildfly-naming-client&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.15.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nI tried also to change the `pom` as following\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\r\n        &lt;artifactId&gt;wildfly-jms-client-bom&lt;/artifactId&gt;\r\n        &lt;version&gt;10.1.0.Final&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;org.jboss.xnio&lt;/groupId&gt;\r\n                &lt;artifactId&gt;xnio-api&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\r\n        &lt;artifactId&gt;wildfly-naming-client&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.15.Final&lt;/version&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;org.jboss.xnio&lt;/groupId&gt;\r\n                &lt;artifactId&gt;xnio-api&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThe Error disappear, and the `war` `deployed`, but when I call the REST, I receive the error\r\n\r\n\r\n    19:02:49,017 ERROR [stderr] (Thread-133) Exception in thread &quot;Thread-133&quot; java.lang.NoClassDefFoundError: org/xnio/Options\r\n    19:02:49,021 ERROR [stderr] (Thread-133)        at org.jboss.naming.remote.client.InitialContextFactory.&lt;clinit&gt;(InitialContextFactory.java:92)\r\n    19:02:49,022 ERROR [stderr] (Thread-133)        at java.lang.Class.forName0(Native Method)\r\n    19:02:49,025 ERROR [stderr] (Thread-133)        at java.lang.Class.forName(Class.java:348)\r\n    19:02:49,027 ERROR [stderr] (Thread-133)        at org.jboss.as.naming.InitialContext.getDefaultInitCtx(InitialContext.java:113)\r\n    19:02:49,032 ERROR [stderr] (Thread-133)        at org.jboss.as.naming.InitialContext.init(InitialContext.java:99)\r\n    19:02:49,034 ERROR [stderr] (Thread-133)        at javax.naming.ldap.InitialLdapContext.&lt;init&gt;(InitialLdapContext.java:154)\r\n    19:02:49,046 ERROR [stderr] (Thread-133)        at org.jboss.as.naming.InitialContext.&lt;init&gt;(InitialContext.java:89)\r\n    19:02:49,049 ERROR [stderr] (Thread-133)        at org.jboss.as.naming.InitialContextFactory.getInitialContext(InitialContextFactory.java:43)\r\n    19:02:49,060 ERROR [stderr] (Thread-133)        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:684)\r\n    19:02:49,063 ERROR [stderr] (Thread-133)        at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:313)\r\n    19:02:49,064 ERROR [stderr] (Thread-133)        at javax.naming.InitialContext.init(InitialContext.java:244)\r\n    19:02:49,065 ERROR [stderr] (Thread-133)        at javax.naming.InitialContext.&lt;init&gt;(InitialContext.java:216)\r\n    19:02:49,066 ERROR [stderr] (Thread-133)        at com.hpe.du.customcrmticket.JMSUtils.customTTJMSCommunication.elaborateRequest(customTTJMSCommunication.java:100)\r\n    19:02:49,066 ERROR [stderr] (Thread-133)        at com.hpe.du.customcrmticket.customCrmTicketController.lambda$createTT$0(customCrmTicketController.java:36)\r\n    19:02:49,067 ERROR [stderr] (Thread-133)        at java.lang.Thread.run(Thread.java:748)\r\n    19:02:49,072 ERROR [stderr] (Thread-133) Caused by: java.lang.ClassNotFoundException: org.xnio.Options from [Module &quot;deployment.custom-crm-ticket-0.0.1-SNAPSHOT.war:main&quot; from Service Module Loader]\r\n    19:02:49,093 ERROR [stderr] (Thread-133)        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:198)\r\n    19:02:49,094 ERROR [stderr] (Thread-133)        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:363)\r\n    19:02:49,095 ERROR [stderr] (Thread-133)        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:351)\r\n    19:02:49,096 ERROR [stderr] (Thread-133)        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:93)\r\n    19:02:49,097 ERROR [stderr] (Thread-133)        ... 15 more\r\n\r\n\r\nI don&#39;t understand why without exclusions there is this error, but with the exclusion it needs the dependecy","title":"java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot;","body":"<p>I receive this error when I try to deploy my <code>war</code> on <code>Wildfly 10.1.0.Final</code> (I cannot change wildfly version)</p>\n<pre><code>18:53:58,467 WARN  [org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext] (ServerService Thread Pool -- 78) Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'undertowServletWebServerFactory' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n18:53:58,493 INFO  [org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener] (ServerService Thread Pool -- 78)\n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n18:53:58,536 ERROR [org.springframework.boot.SpringApplication] (ServerService Thread Pool -- 78) Application run failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'undertowServletWebServerFactory' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\n        at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\n        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:186)\n        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:171)\n        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\n        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:234)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:100)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:82)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at java.lang.Thread.run(Thread.java:748)\n        at org.jboss.threads.JBossThread.run(JBossThread.java:320)\nCaused by: java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n        at org.springframework.boot.autoconfigure.web.embedded.UndertowWebServerFactoryCustomizer.customize(UndertowWebServerFactoryCustomizer.java:81)\n        at org.springframework.boot.autoconfigure.web.embedded.UndertowWebServerFactoryCustomizer.customize(UndertowWebServerFactoryCustomizer.java:59)\n        at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.lambda$postProcessBeforeInitialization$0(WebServerFactoryCustomizerBeanPostProcessor.java:72)\n        at org.springframework.boot.util.LambdaSafe$Callbacks.lambda$null$0(LambdaSafe.java:287)\n        at org.springframework.boot.util.LambdaSafe$LambdaSafeCallback.invoke(LambdaSafe.java:159)\n        at org.springframework.boot.util.LambdaSafe$Callbacks.lambda$invoke$1(LambdaSafe.java:286)\n        at java.util.ArrayList.forEach(ArrayList.java:1257)\n        at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1082)\n        at org.springframework.boot.util.LambdaSafe$Callbacks.invoke(LambdaSafe.java:286)\n        at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.postProcessBeforeInitialization(WebServerFactoryCustomizerBeanPostProcessor.java:72)\n        at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.postProcessBeforeInitialization(WebServerFactoryCustomizerBeanPostProcessor.java:58)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:440)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\n        ... 34 more\n\n18:53:58,543 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 78) MSC000001: Failed to start service jboss.undertow.deployment.default-server.default-host.&quot;/custom-crm-ticket-0.0.1-SNAPSHOT&quot;: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host.&quot;/custom-crm-ticket-0.0.1-SNAPSHOT&quot;: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'undertowServletWebServerFactory' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:85)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at java.lang.Thread.run(Thread.java:748)\n        at org.jboss.threads.JBossThread.run(JBossThread.java:320)\nCaused by: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'undertowServletWebServerFactory' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:236)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:100)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:82)\n        ... 6 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'undertowServletWebServerFactory' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\n        at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\n        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:186)\n        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:171)\n        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\n        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n        at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\n        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:234)\n        ... 8 more\nCaused by: java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n        at org.springframework.boot.autoconfigure.web.embedded.UndertowWebServerFactoryCustomizer.customize(UndertowWebServerFactoryCustomizer.java:81)\n        at org.springframework.boot.autoconfigure.web.embedded.UndertowWebServerFactoryCustomizer.customize(UndertowWebServerFactoryCustomizer.java:59)\n        at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.lambda$postProcessBeforeInitialization$0(WebServerFactoryCustomizerBeanPostProcessor.java:72)\n        at org.springframework.boot.util.LambdaSafe$Callbacks.lambda$null$0(LambdaSafe.java:287)\n        at org.springframework.boot.util.LambdaSafe$LambdaSafeCallback.invoke(LambdaSafe.java:159)\n        at org.springframework.boot.util.LambdaSafe$Callbacks.lambda$invoke$1(LambdaSafe.java:286)\n        at java.util.ArrayList.forEach(ArrayList.java:1257)\n        at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1082)\n        at org.springframework.boot.util.LambdaSafe$Callbacks.invoke(LambdaSafe.java:286)\n        at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.postProcessBeforeInitialization(WebServerFactoryCustomizerBeanPostProcessor.java:72)\n        at org.springframework.boot.web.server.WebServerFactoryCustomizerBeanPostProcessor.postProcessBeforeInitialization(WebServerFactoryCustomizerBeanPostProcessor.java:58)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:440)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\n        ... 34 more\n\n18:53:58,560 ERROR [org.jboss.as.controller.management-operation] (DeploymentScanner-threads - 1) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;custom-crm-ticket-0.0.1-SNAPSHOT.war&quot;)]) - failure description: {\n    &quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.undertow.deployment.default-server.default-host.\\&quot;/custom-crm-ticket-0.0.1-SNAPSHOT\\&quot;&quot; =&gt; &quot;org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host.\\&quot;/custom-crm-ticket-0.0.1-SNAPSHOT\\&quot;: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'undertowServletWebServerFactory' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field \\&quot;MAX_HEADER_SIZE\\&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n    Caused by: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'undertowServletWebServerFactory' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field \\&quot;MAX_HEADER_SIZE\\&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'undertowServletWebServerFactory' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field \\&quot;MAX_HEADER_SIZE\\&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n    Caused by: java.lang.LinkageError: loader constraint violation: when resolving field \\&quot;MAX_HEADER_SIZE\\&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type&quot;},\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.undertow.deployment.default-server.default-host.\\&quot;/custom-crm-ticket-0.0.1-SNAPSHOT\\&quot;&quot;],\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; undefined\n}\n18:53:58,665 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 1) WFLYSRV0010: Deployed &quot;custom-crm-ticket-0.0.1-SNAPSHOT.war&quot; (runtime-name : &quot;custom-crm-ticket-0.0.1-SNAPSHOT.war&quot;)\n18:53:58,666 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 1) WFLYCTL0183: Service status report\nWFLYCTL0186:   Services which failed to start:      service jboss.undertow.deployment.default-server.default-host.&quot;/custom-crm-ticket-0.0.1-SNAPSHOT&quot;: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host.&quot;/custom-crm-ticket-0.0.1-SNAPSHOT&quot;: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'undertowServletWebServerFactory' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/ServletWebServerFactoryConfiguration$EmbeddedUndertow.class]: Initialization of bean failed; nested exception is java.lang.LinkageError: loader constraint violation: when resolving field &quot;MAX_HEADER_SIZE&quot; the class loader (instance of org/jboss/modules/ModuleClassLoader) of the referring class, io/undertow/UndertowOptions, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for the field's resolved type, org/xnio/Option, have different Class objects for that type\n</code></pre>\n<p>This is my <code>pom</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.hpe.du&lt;/groupId&gt;\n    &lt;artifactId&gt;custom-crm-ticket&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;custom-crm-ticket&lt;/name&gt;\n    &lt;description&gt;custom ticketing&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.24&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20220320&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.jms&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.jms-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.jms&lt;/groupId&gt;\n            &lt;artifactId&gt;jms&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\n            &lt;artifactId&gt;wildfly-jms-client-bom&lt;/artifactId&gt;\n            &lt;version&gt;10.1.0.Final&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\n            &lt;artifactId&gt;wildfly-naming-client&lt;/artifactId&gt;\n            &lt;version&gt;1.0.15.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I tried also to change the <code>pom</code> as following</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\n    &lt;artifactId&gt;wildfly-jms-client-bom&lt;/artifactId&gt;\n    &lt;version&gt;10.1.0.Final&lt;/version&gt;\n    &lt;type&gt;pom&lt;/type&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.jboss.xnio&lt;/groupId&gt;\n            &lt;artifactId&gt;xnio-api&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\n    &lt;artifactId&gt;wildfly-naming-client&lt;/artifactId&gt;\n    &lt;version&gt;1.0.15.Final&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.jboss.xnio&lt;/groupId&gt;\n            &lt;artifactId&gt;xnio-api&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The Error disappear, and the <code>war</code> <code>deployed</code>, but when I call the REST, I receive the error</p>\n<pre><code>19:02:49,017 ERROR [stderr] (Thread-133) Exception in thread &quot;Thread-133&quot; java.lang.NoClassDefFoundError: org/xnio/Options\n19:02:49,021 ERROR [stderr] (Thread-133)        at org.jboss.naming.remote.client.InitialContextFactory.&lt;clinit&gt;(InitialContextFactory.java:92)\n19:02:49,022 ERROR [stderr] (Thread-133)        at java.lang.Class.forName0(Native Method)\n19:02:49,025 ERROR [stderr] (Thread-133)        at java.lang.Class.forName(Class.java:348)\n19:02:49,027 ERROR [stderr] (Thread-133)        at org.jboss.as.naming.InitialContext.getDefaultInitCtx(InitialContext.java:113)\n19:02:49,032 ERROR [stderr] (Thread-133)        at org.jboss.as.naming.InitialContext.init(InitialContext.java:99)\n19:02:49,034 ERROR [stderr] (Thread-133)        at javax.naming.ldap.InitialLdapContext.&lt;init&gt;(InitialLdapContext.java:154)\n19:02:49,046 ERROR [stderr] (Thread-133)        at org.jboss.as.naming.InitialContext.&lt;init&gt;(InitialContext.java:89)\n19:02:49,049 ERROR [stderr] (Thread-133)        at org.jboss.as.naming.InitialContextFactory.getInitialContext(InitialContextFactory.java:43)\n19:02:49,060 ERROR [stderr] (Thread-133)        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:684)\n19:02:49,063 ERROR [stderr] (Thread-133)        at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:313)\n19:02:49,064 ERROR [stderr] (Thread-133)        at javax.naming.InitialContext.init(InitialContext.java:244)\n19:02:49,065 ERROR [stderr] (Thread-133)        at javax.naming.InitialContext.&lt;init&gt;(InitialContext.java:216)\n19:02:49,066 ERROR [stderr] (Thread-133)        at com.hpe.du.customcrmticket.JMSUtils.customTTJMSCommunication.elaborateRequest(customTTJMSCommunication.java:100)\n19:02:49,066 ERROR [stderr] (Thread-133)        at com.hpe.du.customcrmticket.customCrmTicketController.lambda$createTT$0(customCrmTicketController.java:36)\n19:02:49,067 ERROR [stderr] (Thread-133)        at java.lang.Thread.run(Thread.java:748)\n19:02:49,072 ERROR [stderr] (Thread-133) Caused by: java.lang.ClassNotFoundException: org.xnio.Options from [Module &quot;deployment.custom-crm-ticket-0.0.1-SNAPSHOT.war:main&quot; from Service Module Loader]\n19:02:49,093 ERROR [stderr] (Thread-133)        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:198)\n19:02:49,094 ERROR [stderr] (Thread-133)        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:363)\n19:02:49,095 ERROR [stderr] (Thread-133)        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:351)\n19:02:49,096 ERROR [stderr] (Thread-133)        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:93)\n19:02:49,097 ERROR [stderr] (Thread-133)        ... 15 more\n</code></pre>\n<p>I don't understand why without exclusions there is this error, but with the exclusion it needs the dependecy</p>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1660750982,"post_id":73391290,"comment_id":129607947,"body_markdown":"Your compiler will consider with every loop that it doesn&#39;t run at all and with every if statement that it is never entered because the condition might never be fulfilled. Hence the compiler can&#39;t guarantee that your initialization of `sum=10` is ever reached.","body":"Your compiler will consider with every loop that it doesn&#39;t run at all and with every if statement that it is never entered because the condition might never be fulfilled. Hence the compiler can&#39;t guarantee that your initialization of <code>sum=10</code> is ever reached."}],"answers":[{"tags":[],"owner":{"account_id":129540,"reputation":210847,"user_id":328193,"accept_rate":91,"display_name":"David"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660751003,"creation_date":1660751003,"answer_id":73391334,"question_id":73391290,"body_markdown":"We can look at the code and intuitively reason that `sum` will always have a value by the time it&#39;s used, because the loop will always execute and one of the iterations will satisfy the `if` condition.\r\n\r\nBut *the compiler* doesn&#39;t *intuitively reason* any of that.  It sees a loop and a conditional block and it can&#39;t *guarantee* that `sum` will have a value by the time it&#39;s used.  To the compiler, it&#39;s possible that loops may iterate 0 times or that conditions may never be `true`.\r\n\r\nBasically, we can &quot;test the code&quot; in our heads and predict its outcome.  But the compiler doesn&#39;t test the code, no matter how simple the code may be.\r\n\r\nYou can correct the problem by simply initializing the value:\r\n\r\n    int sum = 0;","title":"while I try to run basic Java code there was some variable scope error why it happens?","body":"<p>We can look at the code and intuitively reason that <code>sum</code> will always have a value by the time it's used, because the loop will always execute and one of the iterations will satisfy the <code>if</code> condition.</p>\n<p>But <em>the compiler</em> doesn't <em>intuitively reason</em> any of that.  It sees a loop and a conditional block and it can't <em>guarantee</em> that <code>sum</code> will have a value by the time it's used.  To the compiler, it's possible that loops may iterate 0 times or that conditions may never be <code>true</code>.</p>\n<p>Basically, we can &quot;test the code&quot; in our heads and predict its outcome.  But the compiler doesn't test the code, no matter how simple the code may be.</p>\n<p>You can correct the problem by simply initializing the value:</p>\n<pre><code>int sum = 0;\n</code></pre>\n"}],"owner":{"account_id":18588308,"reputation":1,"user_id":13546096,"display_name":"keep annoying"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1660751396,"answer_count":1,"score":-1,"last_activity_date":1660751088,"creation_date":1660750795,"question_id":73391290,"body_markdown":"    class HelloWorld {\r\n        public static void main(String[] args) {\r\n            int sum;\r\n            for (int i = 0; i &lt; 10; i++) {\r\n                if (i == 9) {\r\n                    sum = 10;\r\n                }\r\n            }\r\n            System.out.println(sum);\r\n        }\r\n    }\r\n\r\nwhy this code gives this error?\r\n\r\n&gt; HelloWorld.java:9: error: variable sum might not have been initialized\r\n&gt; System.out.println(sum);","title":"while I try to run basic Java code there was some variable scope error why it happens?","body":"<pre><code>class HelloWorld {\n    public static void main(String[] args) {\n        int sum;\n        for (int i = 0; i &lt; 10; i++) {\n            if (i == 9) {\n                sum = 10;\n            }\n        }\n        System.out.println(sum);\n    }\n}\n</code></pre>\n<p>why this code gives this error?</p>\n<blockquote>\n<p>HelloWorld.java:9: error: variable sum might not have been initialized\nSystem.out.println(sum);</p>\n</blockquote>\n"},{"tags":["java","spring-boot","gradle","junit"],"comments":[{"owner":{"account_id":3674096,"reputation":1,"user_id":3060566,"display_name":"Nishant"},"score":0,"creation_date":1656274005,"post_id":72764270,"comment_id":128525991,"body_markdown":"When i try to run the test class separately it works fine but Im trying to generate jococo coverage report and for that i need to run gradle clean build which results in error","body":"When i try to run the test class separately it works fine but Im trying to generate jococo coverage report and for that i need to run gradle clean build which results in error"}],"answers":[{"tags":[],"owner":{"account_id":26059441,"reputation":83,"user_id":19761037,"display_name":"mpette"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660750681,"creation_date":1660750681,"answer_id":73391269,"question_id":72764270,"body_markdown":"In the code that you have posted you don&#39;t seem to use the `WebApplicationContext` for anything else apart from creating a `MockMvc` object which you have already created anyway by virtue of the `@Autowired` annotation. If you don&#39;t need it for anything else try just removing the `WebApplicationContext`. For example:\r\n```java\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest\r\n@AutoConfigureMockMvc\r\npublic class JobTest {\r\n    // @Autowired\r\n    // private WebApplicationContext applicationContext;\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    private JobService jobService;\r\n\r\n    private static final String URI = &quot;/testJob/&quot;;\r\n\r\n    // @BeforeEach\r\n    // void setup() {\r\n    //     this.mockMvc = MockMvcBuilders.webAppContextSetup(applicationContext).build();\r\n    // }\r\n\r\n    private final UUID jobId = UUID.fromString(&quot;d35089c0-8ca8-4a9d-8932-8464e9a0736c&quot;);\r\n    \r\n    @Test\r\n    public void testRequestJob() throws Exception {\r\n\r\n        //create a request object\r\n        RequestBuilder requestBuilder = MockMvcRequestBuilders.post(URI)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .accept(MediaType.ALL)\r\n                .content(&quot;testRequestString&quot;);\r\n\r\n        when(jobService.neededJob(anyString()).thenReturn(mockJob);\r\n\r\n        ResultActions perform = mockMvc.perform(requestBuilder);\r\n        assertEquals(HttpStatus.OK.value(), perform.andReturn().getResponse().getStatus());\r\n\r\n        //perform the request and get the response\r\n        perform.andExpect(status().isOk())\r\n                .andExpect(content().contentType(MediaType.APPLICATION_JSON))\r\n                .andExpect(jsonPath(&quot;$.data.jobId&quot;).exists());\r\n\r\n    }\r\n \r\n}\r\n```","title":"java.lang.IllegalStateException: Failed to load ApplicationContext While running gradle clean build","body":"<p>In the code that you have posted you don't seem to use the <code>WebApplicationContext</code> for anything else apart from creating a <code>MockMvc</code> object which you have already created anyway by virtue of the <code>@Autowired</code> annotation. If you don't need it for anything else try just removing the <code>WebApplicationContext</code>. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class JobTest {\n    // @Autowired\n    // private WebApplicationContext applicationContext;\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private JobService jobService;\n\n    private static final String URI = &quot;/testJob/&quot;;\n\n    // @BeforeEach\n    // void setup() {\n    //     this.mockMvc = MockMvcBuilders.webAppContextSetup(applicationContext).build();\n    // }\n\n    private final UUID jobId = UUID.fromString(&quot;d35089c0-8ca8-4a9d-8932-8464e9a0736c&quot;);\n    \n    @Test\n    public void testRequestJob() throws Exception {\n\n        //create a request object\n        RequestBuilder requestBuilder = MockMvcRequestBuilders.post(URI)\n                .contentType(MediaType.APPLICATION_JSON)\n                .accept(MediaType.ALL)\n                .content(&quot;testRequestString&quot;);\n\n        when(jobService.neededJob(anyString()).thenReturn(mockJob);\n\n        ResultActions perform = mockMvc.perform(requestBuilder);\n        assertEquals(HttpStatus.OK.value(), perform.andReturn().getResponse().getStatus());\n\n        //perform the request and get the response\n        perform.andExpect(status().isOk())\n                .andExpect(content().contentType(MediaType.APPLICATION_JSON))\n                .andExpect(jsonPath(&quot;$.data.jobId&quot;).exists());\n\n    }\n \n}\n</code></pre>\n"}],"owner":{"account_id":3674096,"reputation":1,"user_id":3060566,"display_name":"Nishant"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":406,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660750681,"creation_date":1656268947,"question_id":72764270,"body_markdown":"I have 2 Test files but whenever I try to run **gradle clean build**, \r\n\r\nI getting *java.lang.IllegalStateException: Failed to load ApplicationContext*, when i remove the *@AutoConfigureMockMvc*, then i get an error *Could not autowire. No beans of &#39;MockMvc&#39; type found.*\r\n\r\n1st File JobTest\r\n\r\n```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest\r\n@AutoConfigureMockMvc\r\npublic class JobTest {\r\n   @Autowired\r\n    private WebApplicationContext applicationContext;\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    private JobService jobService;\r\n\r\n    private static final String URI = &quot;/testJob/&quot;;\r\n\r\n    @BeforeEach\r\n    void setup() {\r\n        this.mockMvc = MockMvcBuilders.webAppContextSetup(applicationContext).build();\r\n    }\r\n\r\n    private final UUID jobId = UUID.fromString(&quot;d35089c0-8ca8-4a9d-8932-8464e9a0736c&quot;);\r\n    \r\n    @Test\r\n    public void testRequestJob() throws Exception {\r\n\r\n        //create a request object\r\n        RequestBuilder requestBuilder = MockMvcRequestBuilders.post(URI)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .accept(MediaType.ALL)\r\n                .content(&quot;testRequestString&quot;);\r\n\r\n        when(jobService.neededJob(anyString()).thenReturn(mockJob);\r\n\r\n        ResultActions perform = mockMvc.perform(requestBuilder);\r\n        assertEquals(HttpStatus.OK.value(), perform.andReturn().getResponse().getStatus());\r\n\r\n        //perform the request and get the response\r\n        perform.andExpect(status().isOk())\r\n                .andExpect(content().contentType(MediaType.APPLICATION_JSON))\r\n                .andExpect(jsonPath(&quot;$.data.jobId&quot;).exists());\r\n\r\n    }\r\n \r\n}\r\n```\r\n\r\n2nd File EmployerTest\r\n\r\n```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest\r\n@AutoConfigureMockMvc\r\npublic class ShiftControllerTest {\r\n   @Autowired\r\n    private WebApplicationContext applicationContext;\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    private EmployerService employerService;\r\n\r\n    @BeforeEach\r\n    void setup() {\r\n        this.mockMvc = MockMvcBuilders.webAppContextSetup(applicationContext).build();\r\n    }\r\n\r\n    private final UUID jobId = UUID.fromString(&quot;d35089c0-8ca8-4a9d-8932-8464e9a0736c&quot;);\r\n\r\n    private static final String URI = &quot;/employer/&quot;;\r\n\r\n    @Test\r\n    public void testEmployer() throws Exception {\r\n\r\n        RequestBuilder requestBuilder = MockMvcRequestBuilders.get(URI + jobId)\r\n                .accept(MediaType.ALL);\r\n        when(employerService.getEmployer(jobId)).thenReturn(mockEmployer);\r\n\r\n        ResultActions perform = mockMvc.perform(requestBuilder);\r\n        assertEquals(HttpStatus.OK.value(), perform.andReturn().getResponse().getStatus());\r\n    }\r\n}\r\n```\r\n\r\nIf I comment one file and then try to run **gradle clean build** it works properly, any suggestion will be appreciated.\r\n","title":"java.lang.IllegalStateException: Failed to load ApplicationContext While running gradle clean build","body":"<p>I have 2 Test files but whenever I try to run <strong>gradle clean build</strong>,</p>\n<p>I getting <em>java.lang.IllegalStateException: Failed to load ApplicationContext</em>, when i remove the <em>@AutoConfigureMockMvc</em>, then i get an error <em>Could not autowire. No beans of 'MockMvc' type found.</em></p>\n<p>1st File JobTest</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class JobTest {\n   @Autowired\n    private WebApplicationContext applicationContext;\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private JobService jobService;\n\n    private static final String URI = &quot;/testJob/&quot;;\n\n    @BeforeEach\n    void setup() {\n        this.mockMvc = MockMvcBuilders.webAppContextSetup(applicationContext).build();\n    }\n\n    private final UUID jobId = UUID.fromString(&quot;d35089c0-8ca8-4a9d-8932-8464e9a0736c&quot;);\n    \n    @Test\n    public void testRequestJob() throws Exception {\n\n        //create a request object\n        RequestBuilder requestBuilder = MockMvcRequestBuilders.post(URI)\n                .contentType(MediaType.APPLICATION_JSON)\n                .accept(MediaType.ALL)\n                .content(&quot;testRequestString&quot;);\n\n        when(jobService.neededJob(anyString()).thenReturn(mockJob);\n\n        ResultActions perform = mockMvc.perform(requestBuilder);\n        assertEquals(HttpStatus.OK.value(), perform.andReturn().getResponse().getStatus());\n\n        //perform the request and get the response\n        perform.andExpect(status().isOk())\n                .andExpect(content().contentType(MediaType.APPLICATION_JSON))\n                .andExpect(jsonPath(&quot;$.data.jobId&quot;).exists());\n\n    }\n \n}\n</code></pre>\n<p>2nd File EmployerTest</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class ShiftControllerTest {\n   @Autowired\n    private WebApplicationContext applicationContext;\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private EmployerService employerService;\n\n    @BeforeEach\n    void setup() {\n        this.mockMvc = MockMvcBuilders.webAppContextSetup(applicationContext).build();\n    }\n\n    private final UUID jobId = UUID.fromString(&quot;d35089c0-8ca8-4a9d-8932-8464e9a0736c&quot;);\n\n    private static final String URI = &quot;/employer/&quot;;\n\n    @Test\n    public void testEmployer() throws Exception {\n\n        RequestBuilder requestBuilder = MockMvcRequestBuilders.get(URI + jobId)\n                .accept(MediaType.ALL);\n        when(employerService.getEmployer(jobId)).thenReturn(mockEmployer);\n\n        ResultActions perform = mockMvc.perform(requestBuilder);\n        assertEquals(HttpStatus.OK.value(), perform.andReturn().getResponse().getStatus());\n    }\n}\n</code></pre>\n<p>If I comment one file and then try to run <strong>gradle clean build</strong> it works properly, any suggestion will be appreciated.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"answers":[{"tags":[],"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1660750644,"creation_date":1660750644,"answer_id":73391261,"question_id":73391164,"body_markdown":"This _does_ throw an exception. The word &quot;assertion&quot; simply means &quot;declare that something should be true&quot;, and this can happen in testing or at runtime. You&#39;re merging the concepts of assertions in general with the specific tools of the `assert` keyword in Java or test-assertion libraries like AssertJ.\r\n\r\nIn this particular case, the `Assert` in question is `org.springframework.util.Assert`:\r\n\r\n\t/**\r\n\t * Assert that an object is not {@code null}.\r\n\t * &lt;pre class=&quot;code&quot;&gt;Assert.notNull(clazz, &quot;The class must not be null&quot;);&lt;/pre&gt;\r\n\t * @param object the object to check\r\n\t * @param message the exception message to use if the assertion fails\r\n\t * @throws IllegalArgumentException if the object is {@code null}\r\n\t */\r\n\tpublic static void notNull(@Nullable Object object, String message) {\r\n\t\tif (object == null) {\r\n\t\t\tthrow new IllegalArgumentException(message);\r\n\t\t}\r\n\t}\r\n\r\nSimilar facilities are available with Guava `Preconditions` and commons-lang `Validate`; they&#39;re not called &quot;assert&quot;, but they have identical semantics.","title":"Why does spring boot libraries like spring-security have assertions in /src/main and not exceptions thrown for such validations?","body":"<p>This <em>does</em> throw an exception. The word &quot;assertion&quot; simply means &quot;declare that something should be true&quot;, and this can happen in testing or at runtime. You're merging the concepts of assertions in general with the specific tools of the <code>assert</code> keyword in Java or test-assertion libraries like AssertJ.</p>\n<p>In this particular case, the <code>Assert</code> in question is <code>org.springframework.util.Assert</code>:</p>\n<pre><code>/**\n * Assert that an object is not {@code null}.\n * &lt;pre class=&quot;code&quot;&gt;Assert.notNull(clazz, &quot;The class must not be null&quot;);&lt;/pre&gt;\n * @param object the object to check\n * @param message the exception message to use if the assertion fails\n * @throws IllegalArgumentException if the object is {@code null}\n */\npublic static void notNull(@Nullable Object object, String message) {\n    if (object == null) {\n        throw new IllegalArgumentException(message);\n    }\n}\n</code></pre>\n<p>Similar facilities are available with Guava <code>Preconditions</code> and commons-lang <code>Validate</code>; they're not called &quot;assert&quot;, but they have identical semantics.</p>\n"}],"owner":{"account_id":7865489,"reputation":380,"user_id":5944412,"display_name":"Bipin Kumar Chaurasia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73391261,"answer_count":1,"score":1,"last_activity_date":1660750644,"creation_date":1660750204,"question_id":73391164,"body_markdown":"While going across many modules from spring boot repositories, I could find assertions in `/src/main/` like here as below in [file][1],\r\n\r\n```\r\npublic OAuth2AccessToken(TokenType tokenType, String tokenValue, Instant issuedAt, Instant expiresAt,\r\n\t\t\tSet&lt;String&gt; scopes) {\r\n\t\tsuper(tokenValue, issuedAt, expiresAt);\r\n\t\tAssert.notNull(tokenType, &quot;tokenType cannot be null&quot;);\r\n\t\tthis.tokenType = tokenType;\r\n\t\tthis.scopes = Collections.unmodifiableSet((scopes != null) ? scopes : Collections.emptySet());\r\n\t}\r\n```\r\n\r\nIsn&#39;t it should be using exceptions to be thrown instead for all such validations under `/src/main/`.\r\n\r\nAs far as I&#39;ve read, assertions are meant to be used with test cases under `/src/test/`.\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/blob/main/oauth2/oauth2-core/src/main/java/org/springframework/security/oauth2/core/OAuth2AccessToken.java#L72","title":"Why does spring boot libraries like spring-security have assertions in /src/main and not exceptions thrown for such validations?","body":"<p>While going across many modules from spring boot repositories, I could find assertions in <code>/src/main/</code> like here as below in <a href=\"https://github.com/spring-projects/spring-security/blob/main/oauth2/oauth2-core/src/main/java/org/springframework/security/oauth2/core/OAuth2AccessToken.java#L72\" rel=\"nofollow noreferrer\">file</a>,</p>\n<pre><code>public OAuth2AccessToken(TokenType tokenType, String tokenValue, Instant issuedAt, Instant expiresAt,\n            Set&lt;String&gt; scopes) {\n        super(tokenValue, issuedAt, expiresAt);\n        Assert.notNull(tokenType, &quot;tokenType cannot be null&quot;);\n        this.tokenType = tokenType;\n        this.scopes = Collections.unmodifiableSet((scopes != null) ? scopes : Collections.emptySet());\n    }\n</code></pre>\n<p>Isn't it should be using exceptions to be thrown instead for all such validations under <code>/src/main/</code>.</p>\n<p>As far as I've read, assertions are meant to be used with test cases under <code>/src/test/</code>.</p>\n"},{"tags":["java","spring-boot","jetty","load-balancing","proxy-protocol"],"answers":[{"tags":[],"owner":{"account_id":25969563,"reputation":41,"user_id":19685004,"display_name":"rq16"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660750607,"creation_date":1660750607,"answer_id":73391251,"question_id":73225314,"body_markdown":"I have since figured out the problem with my configuration, I was adding a new server connector instead of changing the one already in the Jetty server.\r\n\r\nHere is the correct approach:\r\n```\r\n@Bean\r\npublic ConfigurableServletWebServerFactory jettyCustomizer() {\r\n  JettyServletWebServerFactory factory = new JettyServletWebServerFactory();\r\n  factory.addServerCustomizers(server -&gt; {\r\n    ServerConnector serverConnector = (ServerConnector) server.getConnectors()[0];\r\n    serverConnector.addFirstConnectionFactory(new ProxyConnectionFactory());\r\n    });\r\n  return factory;\r\n}\r\n```\r\n\r\nHere I am getting the active server connector and mutating it to also contain a ProxyConnectionFactory which allows Jetty to accept the proxy protocol traffic.","title":"Accept Proxy Protocol V2 Traffic with Jetty in Spring Boot","body":"<p>I have since figured out the problem with my configuration, I was adding a new server connector instead of changing the one already in the Jetty server.</p>\n<p>Here is the correct approach:</p>\n<pre><code>@Bean\npublic ConfigurableServletWebServerFactory jettyCustomizer() {\n  JettyServletWebServerFactory factory = new JettyServletWebServerFactory();\n  factory.addServerCustomizers(server -&gt; {\n    ServerConnector serverConnector = (ServerConnector) server.getConnectors()[0];\n    serverConnector.addFirstConnectionFactory(new ProxyConnectionFactory());\n    });\n  return factory;\n}\n</code></pre>\n<p>Here I am getting the active server connector and mutating it to also contain a ProxyConnectionFactory which allows Jetty to accept the proxy protocol traffic.</p>\n"}],"owner":{"account_id":25969563,"reputation":41,"user_id":19685004,"display_name":"rq16"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":672,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73391251,"answer_count":1,"score":2,"last_activity_date":1660750607,"creation_date":1659546918,"question_id":73225314,"body_markdown":"I am trying to configure Jetty 9.4.39.v20210325 in java Spring Boot 2.4.5 to accept proxy protocol V2 traffic. I want to do this programmatically in a spring configuration class. This is the method I wrote in the `SharedConfiguration.java` configuration class based on the Proxy Protocol section on the bottom of [this page](https://xy2401.com/local-docs/java/jetty.9.4.24.v20191120/configuring-connectors.html).\r\n\r\n    @Bean\r\n      public ConfigurableServletWebServerFactory\r\n          jettyCustomizer() {\r\n        JettyServletWebServerFactory factory = new JettyServletWebServerFactory();\r\n        factory.addServerCustomizers(server -&gt; {\r\n          ProxyConnectionFactory proxyConnectionFactory = new ProxyConnectionFactory();\r\n          ServerConnector serverConnector = new ServerConnector(server, proxyConnectionFactory);\r\n          server.addConnector(serverConnector);\r\n        });\r\n        return factory;\r\n      }\r\n\r\nThe HTTP traffic is coming from an AWS EC2 network load balancer (NLB) and the balancer has proxy protocol V2 traffic enabled.\r\n\r\nI am getting this response when I activate an endpoint in my service with the proxy protocol traffic:\r\n\r\n    Bad Message 400\r\n    reason: Illegal character CNTL=0x0\r\n\r\nDoes anyone know how I can get my service to accept this proxy protocol V2 traffic? I&#39;m unsure if I am configuring Jetty correctly to do so.\r\n\r\nThanks!","title":"Accept Proxy Protocol V2 Traffic with Jetty in Spring Boot","body":"<p>I am trying to configure Jetty 9.4.39.v20210325 in java Spring Boot 2.4.5 to accept proxy protocol V2 traffic. I want to do this programmatically in a spring configuration class. This is the method I wrote in the <code>SharedConfiguration.java</code> configuration class based on the Proxy Protocol section on the bottom of <a href=\"https://xy2401.com/local-docs/java/jetty.9.4.24.v20191120/configuring-connectors.html\" rel=\"nofollow noreferrer\">this page</a>.</p>\n<pre><code>@Bean\n  public ConfigurableServletWebServerFactory\n      jettyCustomizer() {\n    JettyServletWebServerFactory factory = new JettyServletWebServerFactory();\n    factory.addServerCustomizers(server -&gt; {\n      ProxyConnectionFactory proxyConnectionFactory = new ProxyConnectionFactory();\n      ServerConnector serverConnector = new ServerConnector(server, proxyConnectionFactory);\n      server.addConnector(serverConnector);\n    });\n    return factory;\n  }\n</code></pre>\n<p>The HTTP traffic is coming from an AWS EC2 network load balancer (NLB) and the balancer has proxy protocol V2 traffic enabled.</p>\n<p>I am getting this response when I activate an endpoint in my service with the proxy protocol traffic:</p>\n<pre><code>Bad Message 400\nreason: Illegal character CNTL=0x0\n</code></pre>\n<p>Does anyone know how I can get my service to accept this proxy protocol V2 traffic? I'm unsure if I am configuring Jetty correctly to do so.</p>\n<p>Thanks!</p>\n"},{"tags":["java","tomcat","amazon-ecs","sigterm","graceful-shutdown"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1660757408,"post_id":73391249,"comment_id":129610243,"body_markdown":"Can you describe a bit more about the asynchronous processes?  Are these Java threads in the background or external processes?","body":"Can you describe a bit more about the asynchronous processes?  Are these Java threads in the background or external processes?"},{"owner":{"account_id":23294584,"reputation":31,"user_id":17376161,"display_name":"skmq0106"},"score":0,"creation_date":1660828952,"post_id":73391249,"comment_id":129629190,"body_markdown":"@stdunbar The former, where a thread pool is created on the Java program and asynchronous processing is performed there.","body":"@stdunbar The former, where a thread pool is created on the Java program and asynchronous processing is performed there."},{"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1661106460,"post_id":73391249,"comment_id":129687547,"body_markdown":"Your asynchronous processes should register listeners for when the container is being shut-down, so they can terminate themselves.","body":"Your asynchronous processes should register listeners for when the container is being shut-down, so they can terminate themselves."}],"owner":{"account_id":23294584,"reputation":31,"user_id":17376161,"display_name":"skmq0106"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660750603,"creation_date":1660750603,"question_id":73391249,"body_markdown":"When sending SIGTERM to tomcat on Amazon ECS, is it possible to kill the process (so called graceful shutdown) waiting for the asynchronous process to terminate?\r\nBy setting unloadDelay in tomcat configuration (server.xml), it is possible to suspend the process termination until the synchronous process terminates after SIGTERM is sent with ```kill -15```, but it is not possible to do so for asynchronous processes.","title":"Graceful shutdown of asynchronous processes running in java on tomcat","body":"<p>When sending SIGTERM to tomcat on Amazon ECS, is it possible to kill the process (so called graceful shutdown) waiting for the asynchronous process to terminate?\nBy setting unloadDelay in tomcat configuration (server.xml), it is possible to suspend the process termination until the synchronous process terminates after SIGTERM is sent with <code>kill -15</code>, but it is not possible to do so for asynchronous processes.</p>\n"},{"tags":["java","oracle","jdbc"],"comments":[{"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"score":0,"creation_date":1357897539,"post_id":14275376,"comment_id":19818534,"body_markdown":"There isn&#39;t any other way.","body":"There isn&#39;t any other way."},{"owner":{"account_id":1474276,"reputation":4564,"user_id":1385087,"display_name":"Konstantin V. Salikhov"},"score":0,"creation_date":1357897640,"post_id":14275376,"comment_id":19818599,"body_markdown":"You could try use Spring JDBC stored procedure wrapper (http://rockycode.com/blog/stored-procedure-spring-jdbc/) may be yo will like it more","body":"You could try use Spring JDBC stored procedure wrapper (<a href=\"http://rockycode.com/blog/stored-procedure-spring-jdbc/\" rel=\"nofollow noreferrer\">rockycode.com/blog/stored-procedure-spring-jdbc</a>) may be yo will like it more"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1357899282,"post_id":14275376,"comment_id":19819427,"body_markdown":"Considered asking the database administrators to run a &quot;generate java wrapper&quot; script every time they update a store procedure?","body":"Considered asking the database administrators to run a &quot;generate java wrapper&quot; script every time they update a store procedure?"},{"owner":{"account_id":1833876,"reputation":5668,"user_id":1664624,"accept_rate":38,"display_name":"yelliver"},"score":0,"creation_date":1357899755,"post_id":14275376,"comment_id":19819663,"body_markdown":"@Thorbj&#248;rnRavnAndersen does the &quot;generate java wrapper&quot; script exist? or  must be create by myself?","body":"@Thorbj&#248;rnRavnAndersen does the &quot;generate java wrapper&quot; script exist? or  must be create by myself?"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1357900251,"post_id":14275376,"comment_id":19819902,"body_markdown":"@yelliver somebody has to write something - strongly depends on how the stored procedures are programmed.  You most likely need to use a bit of elbow grease here.  There unfortunately is a bit of grunt work involved whenever you need to link systems together.","body":"@yelliver somebody has to write something - strongly depends on how the stored procedures are programmed.  You most likely need to use a bit of elbow grease here.  There unfortunately is a bit of grunt work involved whenever you need to link systems together."}],"answers":[{"tags":[],"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1357897866,"creation_date":1357897866,"answer_id":14275519,"question_id":14275376,"body_markdown":"There isn&#39;t any other way. Yes, it is boring, but number of procedures is finite. This procedures are like methods in Java, so you should operate with them in prescribed rules. \r\nOnly one convenient thing you could do - create special class, which will contain wrapped methods for each procedure. In this case it will be more elegantly to call them in business code, something like this:\r\n\r\n    String[] result = DAO.MPLOGIN(uscd, pwd, pcsq, hwid);\r\n\r\nBut inside this method you have to copy code, that you mentioned above.","title":"Easy way to call stored procedure in Java","body":"<p>There isn't any other way. Yes, it is boring, but number of procedures is finite. This procedures are like methods in Java, so you should operate with them in prescribed rules. \nOnly one convenient thing you could do - create special class, which will contain wrapped methods for each procedure. In this case it will be more elegantly to call them in business code, something like this:</p>\n\n<pre><code>String[] result = DAO.MPLOGIN(uscd, pwd, pcsq, hwid);\n</code></pre>\n\n<p>But inside this method you have to copy code, that you mentioned above.</p>\n"},{"tags":[],"owner":{"account_id":88112,"reputation":51921,"user_id":243943,"accept_rate":89,"display_name":"npinti"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1357898279,"creation_date":1357897918,"answer_id":14275531,"question_id":14275376,"body_markdown":"You could, maybe create a generic wrapper, something along these lines:\r\n\r\n\r\n    public Map&lt;String, String&gt; SPWrapper(String call, Map&lt;String, String&gt; inParams, Map&lt;String, OracleTypes&gt; outParams)\r\n    {\r\n        connection = getConnection();\r\n        try \r\n        {\r\n            stmt = connection.prepareCall(call);\r\n            for(String inParam : inParams.keys())\r\n            {\r\n                stmt.setString(inParam, inParams.get(inParam));\r\n            }\r\n            for(String outParam : outParams.keys())\r\n            {\r\n                stmt.registerOutParameter(outParam, outParams.get(outParam));\r\n            }\r\n       \r\n            stmt.execute();\r\n        \r\n            Map&lt;String,String&gt; results = new HashMap&lt;String, String&gt;();\r\n            for(String outParam : outParams.keys())\r\n            {\r\n                results.put(outParam, stmt.getString(outParam));\r\n            }\r\n    \r\n            return results;\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            //LOG Exception\r\n            return new HashMap&lt;String, String&gt;();\r\n        }\r\n        finally\r\n        {\r\n            connection.close();   //Do not leave connections open.\r\n        }\r\n    }\r\n\r\nYou would still need to pass in the `call` and declare the variables, but at least you now have one generic wrapper to handle all your calls.\r\n","title":"Easy way to call stored procedure in Java","body":"<p>You could, maybe create a generic wrapper, something along these lines:</p>\n\n<pre><code>public Map&lt;String, String&gt; SPWrapper(String call, Map&lt;String, String&gt; inParams, Map&lt;String, OracleTypes&gt; outParams)\n{\n    connection = getConnection();\n    try \n    {\n        stmt = connection.prepareCall(call);\n        for(String inParam : inParams.keys())\n        {\n            stmt.setString(inParam, inParams.get(inParam));\n        }\n        for(String outParam : outParams.keys())\n        {\n            stmt.registerOutParameter(outParam, outParams.get(outParam));\n        }\n\n        stmt.execute();\n\n        Map&lt;String,String&gt; results = new HashMap&lt;String, String&gt;();\n        for(String outParam : outParams.keys())\n        {\n            results.put(outParam, stmt.getString(outParam));\n        }\n\n        return results;\n    }\n    catch (Exception e)\n    {\n        //LOG Exception\n        return new HashMap&lt;String, String&gt;();\n    }\n    finally\n    {\n        connection.close();   //Do not leave connections open.\n    }\n}\n</code></pre>\n\n<p>You would still need to pass in the <code>call</code> and declare the variables, but at least you now have one generic wrapper to handle all your calls.</p>\n"},{"tags":[],"owner":{"account_id":2197266,"reputation":2881,"user_id":1942602,"accept_rate":48,"display_name":"Xavier DSouza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660750498,"creation_date":1357900240,"answer_id":14276200,"question_id":14275376,"body_markdown":"In database client a stored procedure such as myproc(10,20) is called just by statement\r\n\r\n```sql\r\nselect myproc(10,20);\r\n```\r\n\r\nSo in your JDBC program you can just do :\r\n\r\n```java\r\nconnection = getConnection();\r\nstmt = connection.createStatement();\r\nstmt.executeQuery(&quot;select myproc(10,20)&quot;);\r\n```\r\n\r\nIf procedure is returning something then put it in a ResultSet","title":"Easy way to call stored procedure in Java","body":"<p>In database client a stored procedure such as myproc(10,20) is called just by statement</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select myproc(10,20);\n</code></pre>\n<p>So in your JDBC program you can just do :</p>\n<pre class=\"lang-java prettyprint-override\"><code>connection = getConnection();\nstmt = connection.createStatement();\nstmt.executeQuery(&quot;select myproc(10,20)&quot;);\n</code></pre>\n<p>If procedure is returning something then put it in a ResultSet</p>\n"},{"tags":[],"owner":{"account_id":39206,"reputation":8779,"user_id":112964,"accept_rate":100,"display_name":"nd."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1357901042,"creation_date":1357901042,"answer_id":14276428,"question_id":14275376,"body_markdown":"I like to use the [MyBatis][1] data mapper framework for such problems. An extensive example for working with MyBatis and stored procedures can be found at http://loianegroner.com/2011/03/ibatis-mybatis-working-with-stored-procedures/\r\n\r\n\r\n  [1]: http://code.google.com/p/mybatis/","title":"Easy way to call stored procedure in Java","body":"<p>I like to use the <a href=\"http://code.google.com/p/mybatis/\" rel=\"nofollow\">MyBatis</a> data mapper framework for such problems. An extensive example for working with MyBatis and stored procedures can be found at <a href=\"http://loianegroner.com/2011/03/ibatis-mybatis-working-with-stored-procedures/\" rel=\"nofollow\">http://loianegroner.com/2011/03/ibatis-mybatis-working-with-stored-procedures/</a></p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660750470,"creation_date":1660750470,"answer_id":73391220,"question_id":14275376,"body_markdown":"[jOOQ includes a code generator that generates stubs for all of your PL/SQL packages, types, procedures, functions][1]. In your case, you could avoid the boring boiler plate code by calling this stub, instead:\r\n\r\n```java\r\nMplogin result = Routines.mplogin(\r\n    configuration, // This contains your JDBC connection\r\n    uscd, pwd, pcsq, hwid\r\n);\r\n\r\nString vlogid = result.getVlogid();\r\nString vkq = result.getVkq();\r\n```\r\n\r\nDisclaimer: I work for the company behind jOOQ.\r\n\r\n  [1]: https://blog.jooq.org/the-best-way-to-call-stored-procedures-from-java-with-jooq/","title":"Easy way to call stored procedure in Java","body":"<p><a href=\"https://blog.jooq.org/the-best-way-to-call-stored-procedures-from-java-with-jooq/\" rel=\"nofollow noreferrer\">jOOQ includes a code generator that generates stubs for all of your PL/SQL packages, types, procedures, functions</a>. In your case, you could avoid the boring boiler plate code by calling this stub, instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Mplogin result = Routines.mplogin(\n    configuration, // This contains your JDBC connection\n    uscd, pwd, pcsq, hwid\n);\n\nString vlogid = result.getVlogid();\nString vkq = result.getVkq();\n</code></pre>\n<p>Disclaimer: I work for the company behind jOOQ.</p>\n"}],"owner":{"account_id":1833876,"reputation":5668,"user_id":1664624,"accept_rate":38,"display_name":"yelliver"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3093,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1660750498,"creation_date":1357897430,"question_id":14275376,"body_markdown":"When call a stored procedure I use this code:\r\n\r\n\t\tconnection = getConnection();\r\n\t\tstmt = connection.prepareCall(&quot;{call MPLOGIN (?, ?, ?, ?, ?, ?)}&quot;);\r\n\t\tstmt.setString(&quot;VUSCD&quot;, uscd);\r\n\t\tstmt.setString(&quot;VPWD&quot;, pwd);\r\n\t\tstmt.setString(&quot;VPCSQ&quot;, pcsq);\r\n\t\tstmt.setString(&quot;VHWID&quot;, hwid);\r\n\t\tstmt.registerOutParameter(&quot;VLOGID&quot;, OracleTypes.VARCHAR);\r\n\t\tstmt.registerOutParameter(&quot;VKQ&quot;, OracleTypes.VARCHAR);\r\n\t\tstmt.execute();\r\n\t\tString vlogid = stmt.getString(&quot;VLOGID&quot;);\r\n\t\tString vkq = stmt.getString(&quot;VKQ&quot;);\r\nwrite this boring wrapper for few procedure is not problem but if there are hundreds of procedure, it is really a nightmare\r\nIs there any easier way to call store procedure than this way?\r\nEdit: I think a code generator which use the procedure&#39;s parameters from DB is the elagant way but I google for nothing in java","title":"Easy way to call stored procedure in Java","body":"<p>When call a stored procedure I use this code:</p>\n\n<pre><code>    connection = getConnection();\n    stmt = connection.prepareCall(\"{call MPLOGIN (?, ?, ?, ?, ?, ?)}\");\n    stmt.setString(\"VUSCD\", uscd);\n    stmt.setString(\"VPWD\", pwd);\n    stmt.setString(\"VPCSQ\", pcsq);\n    stmt.setString(\"VHWID\", hwid);\n    stmt.registerOutParameter(\"VLOGID\", OracleTypes.VARCHAR);\n    stmt.registerOutParameter(\"VKQ\", OracleTypes.VARCHAR);\n    stmt.execute();\n    String vlogid = stmt.getString(\"VLOGID\");\n    String vkq = stmt.getString(\"VKQ\");\n</code></pre>\n\n<p>write this boring wrapper for few procedure is not problem but if there are hundreds of procedure, it is really a nightmare\nIs there any easier way to call store procedure than this way?\nEdit: I think a code generator which use the procedure's parameters from DB is the elagant way but I google for nothing in java</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1659478930,"post_id":73214047,"comment_id":129303758,"body_markdown":"SetClassName isn&#39;t the right way to do this.  That&#39;s looking for a package with the name and class in it.  Neither of those things are package names or classes.  Instead, you want to use the Intent(String action) constructor and not set a component name.","body":"SetClassName isn&#39;t the right way to do this.  That&#39;s looking for a package with the name and class in it.  Neither of those things are package names or classes.  Instead, you want to use the Intent(String action) constructor and not set a component name."},{"owner":{"account_id":7001690,"reputation":201,"user_id":5367529,"accept_rate":83,"display_name":"salvolds"},"score":0,"creation_date":1659532901,"post_id":73214047,"comment_id":129317279,"body_markdown":"I tried with \n```Intent intent = new Intent(&quot;TextToSpeech.Engine.ACTION_CHECK_TTS_DATA&quot;); ```\nbut the result is the same...","body":"I tried with  <code>Intent intent = new Intent(&quot;TextToSpeech.Engine.ACTION_CHECK_TTS_DATA&quot;); </code> but the result is the same..."},{"owner":{"account_id":7001690,"reputation":201,"user_id":5367529,"accept_rate":83,"display_name":"salvolds"},"score":0,"creation_date":1661010158,"post_id":73214047,"comment_id":129671330,"body_markdown":"Ok trivial error... TextToSpeech.Engine.ACTION_CHECK_TTS_DATA is a final String and it contains the right String to be checked. So calling ```Intent intent = new Intent(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);``` without quotes it&#39;s working","body":"Ok trivial error... TextToSpeech.Engine.ACTION_CHECK_TTS_DATA is a final String and it contains the right String to be checked. So calling <code>Intent intent = new Intent(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);</code> without quotes it&#39;s working"}],"owner":{"account_id":7001690,"reputation":201,"user_id":5367529,"accept_rate":83,"display_name":"salvolds"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660750383,"creation_date":1659475992,"question_id":73214047,"body_markdown":"I need to check if an activity is callable and I&#39;m using this method:\r\n\r\n``` \r\npublic boolean isActivityCallable(String packageName, String className) {\r\n    final Intent intent = new Intent();\r\n    intent.setClassName(packageName, className);        \r\n    List&lt;ResolveInfo&gt; list = getPackageManager(context).queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);\r\n    return list.size() &gt; 0;\r\n}\r\n``` \r\n\r\nbut something is not working.\r\n\r\nIf I check, for example, if TextToSpeech.Engine.ACTION_CHECK_TTS_DATA is callable (and I assume this is a very common and widely supported check) I get that the activity is not callable on many different devices: Google Pixel 5 and 6, samsung sm-g9*, docomo sh, and others...\r\n\r\nI&#39;m calling the method like this:\r\n\r\n```\r\nisActivityCallable(&quot;TextToSpeech.Engine&quot;, &quot;TextToSpeech.Engine.ACTION_CHECK_TTS_DATA&quot;);\r\n``` \r\n\r\n**Am I calling Intent.setClass name with wrong parameters?**\r\nI tried also to use the full package name (android.speech.tts) but the result is the same.\r\n\r\nSome reference:\r\n\r\n - https://stackoverflow.com/questions/25830230/android-text-to-speech-throws-activitynotfoundexception\r\n - http://android-developers.blogspot.in/2009/09/introduction-to-text-to-speech-in.html","title":"Android: check if activity is callable","body":"<p>I need to check if an activity is callable and I'm using this method:</p>\n<pre><code>public boolean isActivityCallable(String packageName, String className) {\n    final Intent intent = new Intent();\n    intent.setClassName(packageName, className);        \n    List&lt;ResolveInfo&gt; list = getPackageManager(context).queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);\n    return list.size() &gt; 0;\n}\n</code></pre>\n<p>but something is not working.</p>\n<p>If I check, for example, if TextToSpeech.Engine.ACTION_CHECK_TTS_DATA is callable (and I assume this is a very common and widely supported check) I get that the activity is not callable on many different devices: Google Pixel 5 and 6, samsung sm-g9*, docomo sh, and others...</p>\n<p>I'm calling the method like this:</p>\n<pre><code>isActivityCallable(&quot;TextToSpeech.Engine&quot;, &quot;TextToSpeech.Engine.ACTION_CHECK_TTS_DATA&quot;);\n</code></pre>\n<p><strong>Am I calling Intent.setClass name with wrong parameters?</strong>\nI tried also to use the full package name (android.speech.tts) but the result is the same.</p>\n<p>Some reference:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/25830230/android-text-to-speech-throws-activitynotfoundexception\">Android Text-To-Speech throws ActivityNotFoundException</a></li>\n<li><a href=\"http://android-developers.blogspot.in/2009/09/introduction-to-text-to-speech-in.html\" rel=\"nofollow noreferrer\">http://android-developers.blogspot.in/2009/09/introduction-to-text-to-speech-in.html</a></li>\n</ul>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":0,"creation_date":1660750316,"post_id":73391152,"comment_id":129607703,"body_markdown":"`directorio.listFiles` returns `null` if the path does not exist or is not a folder, so double check and make sure the path is actually a directory.","body":"<code>directorio.listFiles</code> returns <code>null</code> if the path does not exist or is not a folder, so double check and make sure the path is actually a directory."},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1660753332,"post_id":73391152,"comment_id":129608791,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"},{"owner":{"account_id":26089344,"reputation":21,"user_id":19786471,"display_name":"Pacman"},"score":0,"creation_date":1660755192,"post_id":73391152,"comment_id":129609503,"body_markdown":"@SilvioMayolo Yeah, u were right. it was just a wrong path. But now it gives me the same error at 2 lines:\n`procesaAP(ap, pw);`\n`for (File arch : archsAux)`","body":"@SilvioMayolo Yeah, u were right. it was just a wrong path. But now it gives me the same error at 2 lines: <code>procesaAP(ap, pw);</code> <code>for (File arch : archsAux)</code>"}],"owner":{"account_id":26089344,"reputation":21,"user_id":19786471,"display_name":"Pacman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5889,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660750152,"creation_date":1660750152,"question_id":73391152,"body_markdown":"Teacher provided me with a code to join all data from a file into a .csv file. it should work, but keeps throwing me a \r\n\r\n**&quot;Cannot read the array length because &quot;&lt;local4&gt;&quot; is null&quot; exception.** here:\r\n\r\n \r\n\r\n    for (File ap : directorio.listFiles())\r\n\r\n\r\n\r\ni know this has been answered in other threads, but cant find the error here, and teacher isnt available anymore.\r\nThe ide is also giving me a small warning about the first if, telling me it is not necessary, but i dont think it is related.\r\n\r\n    if (directorio == null)\r\n\r\nThe full code is shown here:\r\n\r\n\r\n\r\n\r\n\r\n```\r\npublic class JuntaDatosAP {\r\n\r\n    \r\n    static String dirBase = &quot;G:\\\\DATA\\\\data.2018000\\\\DATA.2018000&quot;;\r\n    static String archivoSalida = &quot;G:\\\\DATA\\\\data2018000.csv&quot;;\r\n\r\n    static int numRegistros = 0;\r\n\r\n    public static void main(String[] args) {\r\n        File directorio = new File(dirBase);\r\n        if (directorio == null) {\r\n            System.out.println(&quot;Directorio base no existe.&quot;);\r\n            System.out.println(dirBase);\r\n            System.exit(1);\r\n        }\r\n\r\n        try(FileOutputStream fos = new FileOutputStream(archivoSalida, true)) {\r\n            PrintWriter pw = new PrintWriter(fos);\r\n\r\n\r\n\r\n//Exception throwed down here\r\n\r\n            for (File ap : directorio.listFiles()) {\r\n                if (ap.isDirectory() &amp;&amp; ap.getName().split(&quot;_&quot;).length != 6) {\r\n                    System.out.println(&quot;Directorio no es un AP&quot;);\r\n                    System.out.println(ap.getName());\r\n                } else {\r\n                    System.out.println(&quot;Procesando &quot; + ap.getName());\r\n                    procesaAP(ap, pw);\r\n                }\r\n            }\r\n        } catch (FileNotFoundException ex) {\r\n            Logger.getLogger(JuntaDatosAP.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (IOException ex) {\r\n            Logger.getLogger(JuntaDatosAP.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n    }\r\n\r\n    private static void procesaAP(File ap, PrintWriter pw) {\r\n        String linea;\r\n\r\n        File dirs = new File(ap.getAbsolutePath());\r\n        File[] dirsAux = dirs.listFiles();\r\n        for (File dirs2 : dirsAux) {\r\n            System.out.println(dirs2.getName());\r\n            String fecha[] = dirs2.getName().split(&quot;_&quot;);\r\n            fecha = fecha[6].split(&quot;T&quot;);\r\n            String dia = fecha[0];\r\n            String hora = fecha[1];\r\n            File archs = new File(dirs2.getAbsolutePath());\r\n            File[] archsAux = archs.listFiles();\r\n            for (File arch : archsAux) {\r\n                BufferedReader br;\r\n                try {\r\n                    String datos[];\r\n                    br = new BufferedReader(new FileReader(arch.getAbsolutePath()));\r\n                    while ((linea = br.readLine()) != null) {\r\n                        numRegistros++;\r\n                        datos = linea.split(&quot;,&quot;);\r\n                        // Simplemente escribo la nueva l&#237;nea en el archivo, separada por comas\r\n                        pw.println(ap.getName() + &quot;,&quot; + linea);\r\n                    }\r\n                    br.close();\r\n                } catch (FileNotFoundException ex) {\r\n                    Logger.getLogger(JuntaDatosAP.class.getName()).log(Level.SEVERE, null, ex);\r\n                } catch (IOException ex) {\r\n                    Logger.getLogger(JuntaDatosAP.class.getName()).log(Level.SEVERE, null, ex);\r\n                }\r\n            }\r\n        }\r\n        System.out.println(&quot;Total registros: &quot; + numRegistros);\r\n        System.out.println(&quot;&quot;);\r\n    }\r\n}\r\n```","title":"&quot;Cannot read the array length because &quot;&lt;local4&gt;&quot; is null&quot;","body":"<p>Teacher provided me with a code to join all data from a file into a .csv file. it should work, but keeps throwing me a</p>\n<p><strong>&quot;Cannot read the array length because &quot;&quot; is null&quot; exception.</strong> here:</p>\n<pre><code>for (File ap : directorio.listFiles())\n</code></pre>\n<p>i know this has been answered in other threads, but cant find the error here, and teacher isnt available anymore.\nThe ide is also giving me a small warning about the first if, telling me it is not necessary, but i dont think it is related.</p>\n<pre><code>if (directorio == null)\n</code></pre>\n<p>The full code is shown here:</p>\n<pre><code>public class JuntaDatosAP {\n\n    \n    static String dirBase = &quot;G:\\\\DATA\\\\data.2018000\\\\DATA.2018000&quot;;\n    static String archivoSalida = &quot;G:\\\\DATA\\\\data2018000.csv&quot;;\n\n    static int numRegistros = 0;\n\n    public static void main(String[] args) {\n        File directorio = new File(dirBase);\n        if (directorio == null) {\n            System.out.println(&quot;Directorio base no existe.&quot;);\n            System.out.println(dirBase);\n            System.exit(1);\n        }\n\n        try(FileOutputStream fos = new FileOutputStream(archivoSalida, true)) {\n            PrintWriter pw = new PrintWriter(fos);\n\n\n\n//Exception throwed down here\n\n            for (File ap : directorio.listFiles()) {\n                if (ap.isDirectory() &amp;&amp; ap.getName().split(&quot;_&quot;).length != 6) {\n                    System.out.println(&quot;Directorio no es un AP&quot;);\n                    System.out.println(ap.getName());\n                } else {\n                    System.out.println(&quot;Procesando &quot; + ap.getName());\n                    procesaAP(ap, pw);\n                }\n            }\n        } catch (FileNotFoundException ex) {\n            Logger.getLogger(JuntaDatosAP.class.getName()).log(Level.SEVERE, null, ex);\n        } catch (IOException ex) {\n            Logger.getLogger(JuntaDatosAP.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n\n    private static void procesaAP(File ap, PrintWriter pw) {\n        String linea;\n\n        File dirs = new File(ap.getAbsolutePath());\n        File[] dirsAux = dirs.listFiles();\n        for (File dirs2 : dirsAux) {\n            System.out.println(dirs2.getName());\n            String fecha[] = dirs2.getName().split(&quot;_&quot;);\n            fecha = fecha[6].split(&quot;T&quot;);\n            String dia = fecha[0];\n            String hora = fecha[1];\n            File archs = new File(dirs2.getAbsolutePath());\n            File[] archsAux = archs.listFiles();\n            for (File arch : archsAux) {\n                BufferedReader br;\n                try {\n                    String datos[];\n                    br = new BufferedReader(new FileReader(arch.getAbsolutePath()));\n                    while ((linea = br.readLine()) != null) {\n                        numRegistros++;\n                        datos = linea.split(&quot;,&quot;);\n                        // Simplemente escribo la nueva lnea en el archivo, separada por comas\n                        pw.println(ap.getName() + &quot;,&quot; + linea);\n                    }\n                    br.close();\n                } catch (FileNotFoundException ex) {\n                    Logger.getLogger(JuntaDatosAP.class.getName()).log(Level.SEVERE, null, ex);\n                } catch (IOException ex) {\n                    Logger.getLogger(JuntaDatosAP.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        }\n        System.out.println(&quot;Total registros: &quot; + numRegistros);\n        System.out.println(&quot;&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","sql","stored-procedures","jpa","jboss"],"comments":[{"owner":{"account_id":1233170,"reputation":2174,"user_id":1197331,"display_name":"Viliam B&#250;r"},"score":2,"creation_date":1357558883,"post_id":3572626,"comment_id":19678892,"body_markdown":"You cannot use named parameters in *native* queries. Named parameters are supported only for JPQL queries. (If you prefer named parameters, you could write your own class to translate named to numbered parameters.)","body":"You cannot use named parameters in <i>native</i> queries. Named parameters are supported only for JPQL queries. (If you prefer named parameters, you could write your own class to translate named to numbered parameters.)"},{"owner":{"account_id":3753631,"reputation":2325,"user_id":3120564,"accept_rate":80,"display_name":"Jaumzera"},"score":0,"creation_date":1469822209,"post_id":3572626,"comment_id":64714137,"body_markdown":"I&#39;ve always used named parameters with createNativeQueries and never had any problem. I&#39;ve just took a look at the current system I&#39;ve been working and there&#39;s tons of native queries with named parameters. Can you provide us some reference for your affirmation? Our set is JPA 2 and Hibernate 4+.","body":"I&#39;ve always used named parameters with createNativeQueries and never had any problem. I&#39;ve just took a look at the current system I&#39;ve been working and there&#39;s tons of native queries with named parameters. Can you provide us some reference for your affirmation? Our set is JPA 2 and Hibernate 4+."}],"answers":[{"tags":[],"owner":{"account_id":179158,"reputation":471,"user_id":411626,"accept_rate":56,"display_name":"vinoth"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1282805369,"creation_date":1282805369,"answer_id":3572664,"question_id":3572626,"body_markdown":"To call stored procedure we can use Callable Statement in java.sql package.","title":"How to call a stored procedure from Java and JPA","body":"<p>To call stored procedure we can use Callable Statement in java.sql package.</p>\n"},{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1282812017,"creation_date":1282809566,"answer_id":3573111,"question_id":3572626,"body_markdown":"You need to pass the parameters to the stored procedure.\n\nIt should work like this:\n\n        List result = em\n          .createNativeQuery(&quot;call getEmployeeDetails(:employeeId,:companyId)&quot;)\n          .setParameter(&quot;emplyoyeeId&quot;, 123L)\n          .setParameter(&quot;companyId&quot;, 456L)\n          .getResultList();\n\n\n----------\n\n**Update:**\n\nOr maybe it shouldn&#39;t.\n\nIn the Book [EJB3 in Action][1], it says on page 383, that [JPA does not support stored procedures][2] (page is only a preview, you don&#39;t get the full text, the entire book is available as a download in several places including [this one][3], I don&#39;t know if this is legal though). \n\nAnyway, the text is this:\n\n### JPA and database stored procedures ###\n\n&gt; If youre a big fan of SQL, you may be\n&gt; willing to exploit the power of\n&gt; database stored procedures.\n&gt; Unfortunately, JPA doesnt support\n&gt; stored procedures, and you have to\n&gt; depend on a proprietary feature of\n&gt; your persistence provider. However,\n&gt; you can use simple stored functions\n&gt; (without out parameters) with a native\n&gt; SQL query.\n\n  [1]: http://www.manning.com/panda/\n  [2]: http://my.safaribooksonline.com/9781933988344/383\n  [3]: http://scjp-preparacion.googlecode.com/files/Manning.EJB.3.in.Action.Apr.2007.pdf","title":"How to call a stored procedure from Java and JPA","body":"<p>You need to pass the parameters to the stored procedure.</p>\n<p>It should work like this:</p>\n<pre><code>    List result = em\n      .createNativeQuery(&quot;call getEmployeeDetails(:employeeId,:companyId)&quot;)\n      .setParameter(&quot;emplyoyeeId&quot;, 123L)\n      .setParameter(&quot;companyId&quot;, 456L)\n      .getResultList();\n</code></pre>\n<hr />\n<p><strong>Update:</strong></p>\n<p>Or maybe it shouldn't.</p>\n<p>In the Book <a href=\"http://www.manning.com/panda/\" rel=\"noreferrer\">EJB3 in Action</a>, it says on page 383, that <a href=\"http://my.safaribooksonline.com/9781933988344/383\" rel=\"noreferrer\">JPA does not support stored procedures</a> (page is only a preview, you don't get the full text, the entire book is available as a download in several places including <a href=\"http://scjp-preparacion.googlecode.com/files/Manning.EJB.3.in.Action.Apr.2007.pdf\" rel=\"noreferrer\">this one</a>, I don't know if this is legal though).</p>\n<p>Anyway, the text is this:</p>\n<h3>JPA and database stored procedures</h3>\n<blockquote>\n<p>If youre a big fan of SQL, you may be\nwilling to exploit the power of\ndatabase stored procedures.\nUnfortunately, JPA doesnt support\nstored procedures, and you have to\ndepend on a proprietary feature of\nyour persistence provider. However,\nyou can use simple stored functions\n(without out parameters) with a native\nSQL query.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1641985640,"creation_date":1282811844,"answer_id":3573413,"question_id":3572626,"body_markdown":"&gt; I am deploying my web application in Jboss AS. Should I use JPA to access the stored procedure or CallableStatement. Any advantage of using JPA in this case.\r\n\r\nIt is not really supported by JPA but it&#39;s [doable][1]. Still I wouldn&#39;t go this way: \r\n\r\n- using JPA just to map the result of a stored procedure call in some beans is really overkill,\r\n- especially given that JPA is not really appropriate to call stored procedure (the syntax will be pretty verbose).\r\n\r\nI would thus rather consider using [Spring support for JDBC data access][2], or a data mapper like [MyBatis][3] or, given the simplicity of your application, raw JDBC and `CallableStatement`. Actually, JDBC would probably be my choice. Here is a basic kickoff example: \r\n\r\n    CallableStatement cstmt = con.prepareCall(&quot;{call getEmployeeDetails(?, ?)}&quot;);\r\n    cstmt.setInt(&quot;employeeId&quot;, 123);\r\n    cstmt.setInt(&quot;companyId&quot;, 456);\r\n    ResultSet rs = cstmt.executeQuery();\r\n\r\n### Reference\r\n\r\n- JDBC documentation: [Java SE 6][4]\r\n\r\n\r\n  [1]: https://web.archive.org/web/20160326061539/http://objectopia.com/2009/06/26/calling-stored-procedures-in-jpa/\r\n  [2]: http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html\r\n  [3]: http://www.mybatis.org/java.html\r\n  [4]: http://download.oracle.com/javase/6/docs/technotes/guides/jdbc/","title":"How to call a stored procedure from Java and JPA","body":"<blockquote>\n<p>I am deploying my web application in Jboss AS. Should I use JPA to access the stored procedure or CallableStatement. Any advantage of using JPA in this case.</p>\n</blockquote>\n<p>It is not really supported by JPA but it's <a href=\"https://web.archive.org/web/20160326061539/http://objectopia.com/2009/06/26/calling-stored-procedures-in-jpa/\" rel=\"nofollow noreferrer\">doable</a>. Still I wouldn't go this way:</p>\n<ul>\n<li>using JPA just to map the result of a stored procedure call in some beans is really overkill,</li>\n<li>especially given that JPA is not really appropriate to call stored procedure (the syntax will be pretty verbose).</li>\n</ul>\n<p>I would thus rather consider using <a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html\" rel=\"nofollow noreferrer\">Spring support for JDBC data access</a>, or a data mapper like <a href=\"http://www.mybatis.org/java.html\" rel=\"nofollow noreferrer\">MyBatis</a> or, given the simplicity of your application, raw JDBC and <code>CallableStatement</code>. Actually, JDBC would probably be my choice. Here is a basic kickoff example:</p>\n<pre><code>CallableStatement cstmt = con.prepareCall(&quot;{call getEmployeeDetails(?, ?)}&quot;);\ncstmt.setInt(&quot;employeeId&quot;, 123);\ncstmt.setInt(&quot;companyId&quot;, 456);\nResultSet rs = cstmt.executeQuery();\n</code></pre>\n<h3>Reference</h3>\n<ul>\n<li>JDBC documentation: <a href=\"http://download.oracle.com/javase/6/docs/technotes/guides/jdbc/\" rel=\"nofollow noreferrer\">Java SE 6</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":74527,"reputation":1841,"user_id":214091,"accept_rate":94,"display_name":"Dmitry Chornyi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1298975512,"creation_date":1298975512,"answer_id":5153268,"question_id":3572626,"body_markdown":"For me, only the following worked with Oracle 11g and Glassfish 2.1 (Toplink):\r\n\r\n    Query query = entityManager.createNativeQuery(&quot;BEGIN PROCEDURE_NAME(); END;&quot;);\r\n    query.executeUpdate();\r\n\r\nThe variant with curly braces resulted in ORA-00900.","title":"How to call a stored procedure from Java and JPA","body":"<p>For me, only the following worked with Oracle 11g and Glassfish 2.1 (Toplink):</p>\n\n<pre><code>Query query = entityManager.createNativeQuery(\"BEGIN PROCEDURE_NAME(); END;\");\nquery.executeUpdate();\n</code></pre>\n\n<p>The variant with curly braces resulted in ORA-00900.</p>\n"},{"tags":[],"owner":{"account_id":181890,"reputation":17919,"user_id":416206,"accept_rate":40,"display_name":"James"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1301577737,"creation_date":1301577737,"answer_id":5500540,"question_id":3572626,"body_markdown":"If using EclipseLink you can use the @NamedStoredProcedureQuery or StoreProcedureCall to execute any stored procedure, including ones with output parameters, or out cursors.  Support for stored functions and PLSQL data-types is also available.\r\n\r\nSee,\r\nhttp://en.wikibooks.org/wiki/Java_Persistence/Advanced_Topics#Stored_Procedures","title":"How to call a stored procedure from Java and JPA","body":"<p>If using EclipseLink you can use the @NamedStoredProcedureQuery or StoreProcedureCall to execute any stored procedure, including ones with output parameters, or out cursors.  Support for stored functions and PLSQL data-types is also available.</p>\n\n<p>See,\n<a href=\"http://en.wikibooks.org/wiki/Java_Persistence/Advanced_Topics#Stored_Procedures\">http://en.wikibooks.org/wiki/Java_Persistence/Advanced_Topics#Stored_Procedures</a></p>\n"},{"tags":[],"owner":{"account_id":2091461,"reputation":31,"user_id":1861205,"display_name":"roberto quevedo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1354136407,"creation_date":1354134305,"answer_id":13613763,"question_id":3572626,"body_markdown":"The following works for me:\r\n\r\n\r\n    Query query = em.createNativeQuery(&quot;BEGIN VALIDACIONES_QPAI.RECALC_COMP_ASSEMBLY(&#39;X&#39;,&#39;X&#39;,&#39;X&#39;,0); END;&quot;);\r\n    query.executeUpdate();","title":"How to call a stored procedure from Java and JPA","body":"<p>The following works for me:</p>\n\n<pre><code>Query query = em.createNativeQuery(\"BEGIN VALIDACIONES_QPAI.RECALC_COMP_ASSEMBLY('X','X','X',0); END;\");\nquery.executeUpdate();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1682915,"reputation":1157,"user_id":1546788,"display_name":"tosha Shah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1360353555,"creation_date":1360353198,"answer_id":14780300,"question_id":3572626,"body_markdown":"This answer might be helpful if you have entity manager\r\n\r\nI had a stored procedure to create next number and on server side I have seam framework.\r\n\r\nClient side\r\n   \r\n\r\n     Object on = entityManager.createNativeQuery(&quot;EXEC getNextNmber&quot;).executeUpdate();\r\n    \t\tlog.info(&quot;New order id: &quot; + on.toString());\r\n\r\nDatabase Side (SQL server) I have stored procedure named `getNextNmber`","title":"How to call a stored procedure from Java and JPA","body":"<p>This answer might be helpful if you have entity manager</p>\n\n<p>I had a stored procedure to create next number and on server side I have seam framework.</p>\n\n<p>Client side</p>\n\n<pre><code> Object on = entityManager.createNativeQuery(\"EXEC getNextNmber\").executeUpdate();\n        log.info(\"New order id: \" + on.toString());\n</code></pre>\n\n<p>Database Side (SQL server) I have stored procedure named <code>getNextNmber</code></p>\n"},{"tags":[],"owner":{"account_id":2631754,"reputation":11,"user_id":2277535,"display_name":"Patricio Dominguez"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1365861903,"creation_date":1365860019,"answer_id":15988355,"question_id":3572626,"body_markdown":"Try this code:\r\n\r\n    return em.createNativeQuery(&quot;{call getEmployeeDetails(?,?)}&quot;,\r\n                                   EmployeeDetails.class)           \r\n                                   .setParameter(1, employeeId)\r\n                                   .setParameter(2, companyId).getResultList();\r\n\r\n\r\n\r\n ","title":"How to call a stored procedure from Java and JPA","body":"<p>Try this code:</p>\n\n<pre><code>return em.createNativeQuery(\"{call getEmployeeDetails(?,?)}\",\n                               EmployeeDetails.class)           \n                               .setParameter(1, employeeId)\n                               .setParameter(2, companyId).getResultList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2939111,"reputation":371,"user_id":2517413,"display_name":"R&#233;da"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1392325632,"creation_date":1372098563,"answer_id":17282440,"question_id":3572626,"body_markdown":"May be it&#39;s not the same for Sql Srver but for people using oracle and eclipslink it&#39;s working for me \r\n\r\nex: a procedure that have one IN param (type CHAR) and two OUT params (NUMBER &amp; VARCHAR)\r\n\r\nin the persistence.xml  declare the persistence-unit :\r\n\r\n    &lt;persistence-unit name=&quot;presistanceNameOfProc&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n\t\t&lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\r\n\t\t&lt;jta-data-source&gt;jdbc/DataSourceName&lt;/jta-data-source&gt;\r\n\t\t&lt;mapping-file&gt;META-INF/eclipselink-orm.xml&lt;/mapping-file&gt;\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;property name=&quot;eclipselink.logging.level&quot; value=&quot;FINEST&quot;/&gt;\r\n            &lt;property name=&quot;eclipselink.logging.logger&quot; value=&quot;DefaultLogger&quot;/&gt;\r\n            &lt;property name=&quot;eclipselink.weaving&quot; value=&quot;static&quot;/&gt;\r\n\t\t\t&lt;property name=&quot;eclipselink.ddl.table-creation-suffix&quot; value=&quot;JPA_STORED_PROC&quot; /&gt;\r\n\t\t&lt;/properties&gt;\r\n\t&lt;/persistence-unit&gt;\r\n\r\nand declare the structure of the proc in the eclipselink-orm.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;entity-mappings version=&quot;2.0&quot;\r\n\txmlns=&quot;http://java.sun.com/xml/ns/persistence/orm&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd&quot;&gt;\r\n\t&lt;named-stored-procedure-query name=&quot;PERSIST_PROC_NAME&quot; procedure-name=&quot;name_of_proc&quot; returns-result-set=&quot;false&quot;&gt;\r\n\t    &lt;parameter direction=&quot;IN&quot; name=&quot;in_param_char&quot; query-parameter=&quot;in_param_char&quot; type=&quot;Character&quot;/&gt;\r\n\t    &lt;parameter direction=&quot;OUT&quot; name=&quot;out_param_int&quot; query-parameter=&quot;out_param_int&quot; type=&quot;Integer&quot;/&gt;\r\n\t    &lt;parameter direction=&quot;OUT&quot; name=&quot;out_param_varchar&quot; query-parameter=&quot;out_param_varchar&quot; type=&quot;String&quot;/&gt;\r\n\t&lt;/named-stored-procedure-query&gt;\r\n&lt;/entity-mappings&gt;\r\n\r\nin the code you just have to call your proc like this :\r\n\r\n    try {\r\n\t\t\tfinal Query query = this.entityManager\r\n\t\t\t\t\t.createNamedQuery(&quot;PERSIST_PROC_NAME&quot;);\r\n\t\t\tquery.setParameter(&quot;in_param_char&quot;, &#39;V&#39;); \r\n\t\t\tresultQuery = (Object[]) query.getSingleResult();\r\n\r\n\t\t} catch (final Exception ex) {\r\n\t\t\tLOGGER.log(ex);\r\n\t\t\tthrow new TechnicalException(ex);\r\n\t\t}\r\n\r\nto get the two output params :\r\n\r\n    Integer myInt = (Integer) resultQuery[0];\r\n    String myStr =  (String) resultQuery[1];\r\n\r\n","title":"How to call a stored procedure from Java and JPA","body":"<p>May be it's not the same for Sql Srver but for people using oracle and eclipslink it's working for me </p>\n\n<p>ex: a procedure that have one IN param (type CHAR) and two OUT params (NUMBER &amp; VARCHAR)</p>\n\n<p>in the persistence.xml  declare the persistence-unit :</p>\n\n<pre><code>&lt;persistence-unit name=\"presistanceNameOfProc\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\n    &lt;jta-data-source&gt;jdbc/DataSourceName&lt;/jta-data-source&gt;\n    &lt;mapping-file&gt;META-INF/eclipselink-orm.xml&lt;/mapping-file&gt;\n    &lt;properties&gt;\n        &lt;property name=\"eclipselink.logging.level\" value=\"FINEST\"/&gt;\n        &lt;property name=\"eclipselink.logging.logger\" value=\"DefaultLogger\"/&gt;\n        &lt;property name=\"eclipselink.weaving\" value=\"static\"/&gt;\n        &lt;property name=\"eclipselink.ddl.table-creation-suffix\" value=\"JPA_STORED_PROC\" /&gt;\n    &lt;/properties&gt;\n&lt;/persistence-unit&gt;\n</code></pre>\n\n<p>and declare the structure of the proc in the eclipselink-orm.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;entity-mappings version=\"2.0\"\nxmlns=\"http://java.sun.com/xml/ns/persistence/orm\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd\"&gt;\n&lt;named-stored-procedure-query name=\"PERSIST_PROC_NAME\" procedure-name=\"name_of_proc\" returns-result-set=\"false\"&gt;\n    &lt;parameter direction=\"IN\" name=\"in_param_char\" query-parameter=\"in_param_char\" type=\"Character\"/&gt;\n    &lt;parameter direction=\"OUT\" name=\"out_param_int\" query-parameter=\"out_param_int\" type=\"Integer\"/&gt;\n    &lt;parameter direction=\"OUT\" name=\"out_param_varchar\" query-parameter=\"out_param_varchar\" type=\"String\"/&gt;\n&lt;/named-stored-procedure-query&gt;\n</code></pre>\n\n<p></p>\n\n<p>in the code you just have to call your proc like this :</p>\n\n<pre><code>try {\n        final Query query = this.entityManager\n                .createNamedQuery(\"PERSIST_PROC_NAME\");\n        query.setParameter(\"in_param_char\", 'V'); \n        resultQuery = (Object[]) query.getSingleResult();\n\n    } catch (final Exception ex) {\n        LOGGER.log(ex);\n        throw new TechnicalException(ex);\n    }\n</code></pre>\n\n<p>to get the two output params :</p>\n\n<pre><code>Integer myInt = (Integer) resultQuery[0];\nString myStr =  (String) resultQuery[1];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1344409,"reputation":9495,"user_id":1285418,"display_name":"Pau Kiat Wee"},"down_vote_count":0,"up_vote_count":66,"is_accepted":false,"score":66,"last_activity_date":1378015820,"creation_date":1378015820,"answer_id":18555770,"question_id":3572626,"body_markdown":"JPA 2.1 now support Stored Procedure, read the Java doc [here][1].\r\n\r\nExample:\r\n\r\n    StoredProcedureQuery storedProcedure = em.createStoredProcedureQuery(&quot;sales_tax&quot;);\r\n    // set parameters\r\n    storedProcedure.registerStoredProcedureParameter(&quot;subtotal&quot;, Double.class, ParameterMode.IN);\r\n    storedProcedure.registerStoredProcedureParameter(&quot;tax&quot;, Double.class, ParameterMode.OUT);\r\n    storedProcedure.setParameter(&quot;subtotal&quot;, 1f);\r\n    // execute SP\r\n    storedProcedure.execute();\r\n    // get result\r\n    Double tax = (Double)storedProcedure.getOutputParameterValue(&quot;tax&quot;);\r\n\r\nSee detailed example [here][2].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#createStoredProcedureQuery%28java.lang.String%29\r\n  [2]: http://dreamand.me/java/java-jee7-jpa-stored-procedure-example/","title":"How to call a stored procedure from Java and JPA","body":"<p>JPA 2.1 now support Stored Procedure, read the Java doc <a href=\"http://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#createStoredProcedureQuery%28java.lang.String%29\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Example:</p>\n\n<pre><code>StoredProcedureQuery storedProcedure = em.createStoredProcedureQuery(\"sales_tax\");\n// set parameters\nstoredProcedure.registerStoredProcedureParameter(\"subtotal\", Double.class, ParameterMode.IN);\nstoredProcedure.registerStoredProcedureParameter(\"tax\", Double.class, ParameterMode.OUT);\nstoredProcedure.setParameter(\"subtotal\", 1f);\n// execute SP\nstoredProcedure.execute();\n// get result\nDouble tax = (Double)storedProcedure.getOutputParameterValue(\"tax\");\n</code></pre>\n\n<p>See detailed example <a href=\"http://dreamand.me/java/java-jee7-jpa-stored-procedure-example/\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1478876,"reputation":1042,"user_id":1388639,"display_name":"Malcolm Boekhoff"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1380598803,"creation_date":1380598803,"answer_id":19107545,"question_id":3572626,"body_markdown":"# How to retrieve Stored Procedure output parameter using JPA (2.0 needs EclipseLink imports and 2.1 does not) #\r\n\r\nEven though this answer does elaborate on returning a recordset from a stored procedure,\r\nI am posting here, because it took me ages to figure it out and this thread helped me.\r\n\r\nMy application was using Eclipselink-2.3.1, but I will force an upgrade to\r\nEclipselink-2.5.0, as JPA 2.1 has much better support for stored procedures.\r\n\r\n## Using EclipseLink-2.3.1/JPA-2.0: Implementation-Dependent ##\r\n\r\nThis method requires imports of EclipseLink classes from &quot;org.eclipse.persistence&quot;, so it is specific to Eclipselink implementation.\r\n\r\nI found it at &quot;http://www.yenlo.nl/en/calling-oracle-stored-procedures-from-eclipselink-with-multiple-out-parameters&quot;.\r\n\r\n    StoredProcedureCall storedProcedureCall = new StoredProcedureCall();\r\n    storedProcedureCall.setProcedureName(&quot;mypackage.myprocedure&quot;);\r\n    storedProcedureCall.addNamedArgument(&quot;i_input_1&quot;); // Add input argument name.\r\n    storedProcedureCall.addNamedOutputArgument(&quot;o_output_1&quot;); // Add output parameter name.\r\n    DataReadQuery query = new DataReadQuery();\r\n    query.setCall(storedProcedureCall);\r\n    query.addArgument(&quot;i_input_1&quot;); // Add input argument names (again);\r\n    List&lt;Object&gt; argumentValues = new ArrayList&lt;Object&gt;();\r\n    argumentValues.add(&quot;valueOf_i_input_1&quot;); // Add input argument values.\r\n    JpaEntityManager jpaEntityManager = (JpaEntityManager) getEntityManager();\r\n    Session session = jpaEntityManager.getActiveSession();\r\n    List&lt;?&gt; results = (List&lt;?&gt;) session.executeQuery(query, argumentValues);\r\n    DatabaseRecord record = (DatabaseRecord) results.get(0);\r\n    String result = String.valueOf(record.get(&quot;o_output_1&quot;)); // Get output parameter\r\n\r\n## Using EclipseLink-2.5.0/JPA-2.1: Implementation-Independent (documented already in this thread) ##\r\n\r\nThis method is implementation independent (don&#39;t need Eclipslink imports).\r\n\r\n    StoredProcedureQuery query = getEntityManager().createStoredProcedureQuery(&quot;mypackage.myprocedure&quot;);\r\n    query.registerStoredProcedureParameter(&quot;i_input_1&quot;, String.class, ParameterMode.IN);\r\n    query.registerStoredProcedureParameter(&quot;o_output_1&quot;, String.class, ParameterMode.OUT);\r\n    query.setParameter(&quot;i_input_1&quot;, &quot;valueOf_i_input_1&quot;);\r\n    boolean queryResult = query.execute();\r\n    String result = String.valueOf(query.getOutputParameterValue(&quot;o_output_1&quot;));\r\n","title":"How to call a stored procedure from Java and JPA","body":"<h1>How to retrieve Stored Procedure output parameter using JPA (2.0 needs EclipseLink imports and 2.1 does not)</h1>\n\n<p>Even though this answer does elaborate on returning a recordset from a stored procedure,\nI am posting here, because it took me ages to figure it out and this thread helped me.</p>\n\n<p>My application was using Eclipselink-2.3.1, but I will force an upgrade to\nEclipselink-2.5.0, as JPA 2.1 has much better support for stored procedures.</p>\n\n<h2>Using EclipseLink-2.3.1/JPA-2.0: Implementation-Dependent</h2>\n\n<p>This method requires imports of EclipseLink classes from \"org.eclipse.persistence\", so it is specific to Eclipselink implementation.</p>\n\n<p>I found it at \"<a href=\"http://www.yenlo.nl/en/calling-oracle-stored-procedures-from-eclipselink-with-multiple-out-parameters\">http://www.yenlo.nl/en/calling-oracle-stored-procedures-from-eclipselink-with-multiple-out-parameters</a>\".</p>\n\n<pre><code>StoredProcedureCall storedProcedureCall = new StoredProcedureCall();\nstoredProcedureCall.setProcedureName(\"mypackage.myprocedure\");\nstoredProcedureCall.addNamedArgument(\"i_input_1\"); // Add input argument name.\nstoredProcedureCall.addNamedOutputArgument(\"o_output_1\"); // Add output parameter name.\nDataReadQuery query = new DataReadQuery();\nquery.setCall(storedProcedureCall);\nquery.addArgument(\"i_input_1\"); // Add input argument names (again);\nList&lt;Object&gt; argumentValues = new ArrayList&lt;Object&gt;();\nargumentValues.add(\"valueOf_i_input_1\"); // Add input argument values.\nJpaEntityManager jpaEntityManager = (JpaEntityManager) getEntityManager();\nSession session = jpaEntityManager.getActiveSession();\nList&lt;?&gt; results = (List&lt;?&gt;) session.executeQuery(query, argumentValues);\nDatabaseRecord record = (DatabaseRecord) results.get(0);\nString result = String.valueOf(record.get(\"o_output_1\")); // Get output parameter\n</code></pre>\n\n<h2>Using EclipseLink-2.5.0/JPA-2.1: Implementation-Independent (documented already in this thread)</h2>\n\n<p>This method is implementation independent (don't need Eclipslink imports).</p>\n\n<pre><code>StoredProcedureQuery query = getEntityManager().createStoredProcedureQuery(\"mypackage.myprocedure\");\nquery.registerStoredProcedureParameter(\"i_input_1\", String.class, ParameterMode.IN);\nquery.registerStoredProcedureParameter(\"o_output_1\", String.class, ParameterMode.OUT);\nquery.setParameter(\"i_input_1\", \"valueOf_i_input_1\");\nboolean queryResult = query.execute();\nString result = String.valueOf(query.getOutputParameterValue(\"o_output_1\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5068484,"reputation":11,"user_id":4067958,"display_name":"Everton Oliveira"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1411415735,"creation_date":1411414448,"answer_id":25981828,"question_id":3572626,"body_markdown":"You can use `@Query(value = &quot;{call PROC_TEST()}&quot;, nativeQuery = true)` in your repository. This worked for me.\r\n\r\n**Attention:** use &#39;{&#39; and &#39;}&#39; or else it will not work.","title":"How to call a stored procedure from Java and JPA","body":"<p>You can use <code>@Query(value = \"{call PROC_TEST()}\", nativeQuery = true)</code> in your repository. This worked for me.</p>\n\n<p><strong>Attention:</strong> use '{' and '}' or else it will not work.</p>\n"},{"tags":[],"owner":{"account_id":5374683,"reputation":1,"user_id":4282027,"display_name":"Elohim Julio Cesar C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427833667,"creation_date":1427833667,"answer_id":29377939,"question_id":3572626,"body_markdown":"persistence.xml\r\n\r\n     &lt;persistence-unit name=&quot;PU2&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n    &lt;non-jta-data-source&gt;jndi_ws2&lt;/non-jta-data-source&gt;\r\n    &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\r\n    &lt;properties/&gt;\r\n  &lt;/persistence-unit&gt;\r\n\r\ncodigo java\r\n\r\n      String PERSISTENCE_UNIT_NAME = &quot;PU2&quot;;\r\n        EntityManagerFactory factory2;\r\n        factory2 = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);\r\n\r\n        EntityManager em2 = factory2.createEntityManager();\r\n        boolean committed = false;\r\n        try {\r\n \r\n            try {\r\n                StoredProcedureQuery storedProcedure = em2.createStoredProcedureQuery(&quot;PKCREATURNO.INSERTATURNO&quot;);\r\n                // set parameters\r\n                storedProcedure.registerStoredProcedureParameter(&quot;inuPKEMPRESA&quot;, BigDecimal.class, ParameterMode.IN);\r\n                storedProcedure.registerStoredProcedureParameter(&quot;inuPKSERVICIO&quot;, BigDecimal.class, ParameterMode.IN);\r\n                storedProcedure.registerStoredProcedureParameter(&quot;inuPKAREA&quot;, BigDecimal.class, ParameterMode.IN);\r\n                storedProcedure.registerStoredProcedureParameter(&quot;isbCHSIGLA&quot;, String.class, ParameterMode.IN);\r\n                storedProcedure.registerStoredProcedureParameter(&quot;INUSINCALIFICACION&quot;, BigInteger.class, ParameterMode.IN);\r\n                storedProcedure.registerStoredProcedureParameter(&quot;INUTIMBRAR&quot;, BigInteger.class, ParameterMode.IN);\r\n                storedProcedure.registerStoredProcedureParameter(&quot;INUTRANSFERIDO&quot;, BigInteger.class, ParameterMode.IN);\r\n                storedProcedure.registerStoredProcedureParameter(&quot;INTESTADO&quot;, BigInteger.class, ParameterMode.IN);\r\n                storedProcedure.registerStoredProcedureParameter(&quot;inuContador&quot;, BigInteger.class, ParameterMode.OUT);\r\n\r\n                BigDecimal inuPKEMPRESA = BigDecimal.valueOf(1);\r\n                BigDecimal inuPKSERVICIO = BigDecimal.valueOf(5);\r\n                BigDecimal inuPKAREA = BigDecimal.valueOf(23);\r\n                String isbCHSIGLA = &quot;&quot;;\r\n                BigInteger INUSINCALIFICACION = BigInteger.ZERO;\r\n                BigInteger INUTIMBRAR = BigInteger.ZERO;\r\n                BigInteger INUTRANSFERIDO = BigInteger.ZERO;\r\n                BigInteger INTESTADO = BigInteger.ZERO;\r\n                BigInteger inuContador = BigInteger.ZERO;\r\n\r\n                storedProcedure.setParameter(&quot;inuPKEMPRESA&quot;, inuPKEMPRESA);\r\n                storedProcedure.setParameter(&quot;inuPKSERVICIO&quot;, inuPKSERVICIO);\r\n                storedProcedure.setParameter(&quot;inuPKAREA&quot;, inuPKAREA);\r\n                storedProcedure.setParameter(&quot;isbCHSIGLA&quot;, isbCHSIGLA);\r\n                storedProcedure.setParameter(&quot;INUSINCALIFICACION&quot;, INUSINCALIFICACION);\r\n                storedProcedure.setParameter(&quot;INUTIMBRAR&quot;, INUTIMBRAR);\r\n                storedProcedure.setParameter(&quot;INUTRANSFERIDO&quot;, INUTRANSFERIDO);\r\n                storedProcedure.setParameter(&quot;INTESTADO&quot;, INTESTADO);\r\n                storedProcedure.setParameter(&quot;inuContador&quot;, inuContador);\r\n\r\n                // execute SP\r\n                storedProcedure.execute();\r\n                // get result\r\n\r\n                try {\r\n                    long _inuContador = (long) storedProcedure.getOutputParameterValue(&quot;inuContador&quot;);\r\n                    varCon = _inuContador + &quot;&quot;;\r\n                } catch (Exception e) {\r\n                } \r\n            } finally {\r\n                 \r\n            }\r\n        } finally {\r\n            em2.close();\r\n        }","title":"How to call a stored procedure from Java and JPA","body":"<p>persistence.xml</p>\n\n<pre><code> &lt;persistence-unit name=\"PU2\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n&lt;non-jta-data-source&gt;jndi_ws2&lt;/non-jta-data-source&gt;\n&lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\n&lt;properties/&gt;\n</code></pre>\n\n<p></p>\n\n<p>codigo java</p>\n\n<pre><code>  String PERSISTENCE_UNIT_NAME = \"PU2\";\n    EntityManagerFactory factory2;\n    factory2 = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);\n\n    EntityManager em2 = factory2.createEntityManager();\n    boolean committed = false;\n    try {\n\n        try {\n            StoredProcedureQuery storedProcedure = em2.createStoredProcedureQuery(\"PKCREATURNO.INSERTATURNO\");\n            // set parameters\n            storedProcedure.registerStoredProcedureParameter(\"inuPKEMPRESA\", BigDecimal.class, ParameterMode.IN);\n            storedProcedure.registerStoredProcedureParameter(\"inuPKSERVICIO\", BigDecimal.class, ParameterMode.IN);\n            storedProcedure.registerStoredProcedureParameter(\"inuPKAREA\", BigDecimal.class, ParameterMode.IN);\n            storedProcedure.registerStoredProcedureParameter(\"isbCHSIGLA\", String.class, ParameterMode.IN);\n            storedProcedure.registerStoredProcedureParameter(\"INUSINCALIFICACION\", BigInteger.class, ParameterMode.IN);\n            storedProcedure.registerStoredProcedureParameter(\"INUTIMBRAR\", BigInteger.class, ParameterMode.IN);\n            storedProcedure.registerStoredProcedureParameter(\"INUTRANSFERIDO\", BigInteger.class, ParameterMode.IN);\n            storedProcedure.registerStoredProcedureParameter(\"INTESTADO\", BigInteger.class, ParameterMode.IN);\n            storedProcedure.registerStoredProcedureParameter(\"inuContador\", BigInteger.class, ParameterMode.OUT);\n\n            BigDecimal inuPKEMPRESA = BigDecimal.valueOf(1);\n            BigDecimal inuPKSERVICIO = BigDecimal.valueOf(5);\n            BigDecimal inuPKAREA = BigDecimal.valueOf(23);\n            String isbCHSIGLA = \"\";\n            BigInteger INUSINCALIFICACION = BigInteger.ZERO;\n            BigInteger INUTIMBRAR = BigInteger.ZERO;\n            BigInteger INUTRANSFERIDO = BigInteger.ZERO;\n            BigInteger INTESTADO = BigInteger.ZERO;\n            BigInteger inuContador = BigInteger.ZERO;\n\n            storedProcedure.setParameter(\"inuPKEMPRESA\", inuPKEMPRESA);\n            storedProcedure.setParameter(\"inuPKSERVICIO\", inuPKSERVICIO);\n            storedProcedure.setParameter(\"inuPKAREA\", inuPKAREA);\n            storedProcedure.setParameter(\"isbCHSIGLA\", isbCHSIGLA);\n            storedProcedure.setParameter(\"INUSINCALIFICACION\", INUSINCALIFICACION);\n            storedProcedure.setParameter(\"INUTIMBRAR\", INUTIMBRAR);\n            storedProcedure.setParameter(\"INUTRANSFERIDO\", INUTRANSFERIDO);\n            storedProcedure.setParameter(\"INTESTADO\", INTESTADO);\n            storedProcedure.setParameter(\"inuContador\", inuContador);\n\n            // execute SP\n            storedProcedure.execute();\n            // get result\n\n            try {\n                long _inuContador = (long) storedProcedure.getOutputParameterValue(\"inuContador\");\n                varCon = _inuContador + \"\";\n            } catch (Exception e) {\n            } \n        } finally {\n\n        }\n    } finally {\n        em2.close();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3115332,"reputation":11,"user_id":2636233,"display_name":"Musashi Miyamoto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489681925,"creation_date":1489681925,"answer_id":42839771,"question_id":3572626,"body_markdown":"JPA 2.0 doesn&#39;t support RETURN values, only calls.\r\n\r\nMy solution was. Create a FUNCTION calling PROCEDURE.\r\n\r\nSo, inside JAVA code you execute a NATIVE QUERY calling the oracle FUNCTION.","title":"How to call a stored procedure from Java and JPA","body":"<p>JPA 2.0 doesn't support RETURN values, only calls.</p>\n\n<p>My solution was. Create a FUNCTION calling PROCEDURE.</p>\n\n<p>So, inside JAVA code you execute a NATIVE QUERY calling the oracle FUNCTION.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1515405795,"creation_date":1515405795,"answer_id":48147962,"question_id":3572626,"body_markdown":"1. For a simple stored procedure that using IN/OUT parameters like this\r\n\r\n\t\tCREATE OR REPLACE PROCEDURE count_comments (  \r\n\t\t   postId IN NUMBER,  \r\n\t\t   commentCount OUT NUMBER )  \r\n\t\tAS \r\n\t\tBEGIN \r\n\t\t\tSELECT COUNT(*) INTO commentCount  \r\n\t\t\tFROM post_comment  \r\n\t\t\tWHERE post_id = postId; \r\n\t\tEND;\r\n\r\n\tYou can call it from JPA as follows:\r\n\r\n\t\tStoredProcedureQuery query = entityManager\r\n\t\t\t.createStoredProcedureQuery(&quot;count_comments&quot;)\r\n\t\t\t.registerStoredProcedureParameter(1, Long.class, \r\n\t\t\t\tParameterMode.IN)\r\n\t\t\t.registerStoredProcedureParameter(2, Long.class, \r\n\t\t\t\tParameterMode.OUT)\r\n\t\t\t.setParameter(1, 1L);\r\n\t\t \r\n\t\tquery.execute();\r\n\t\t \r\n\t\tLong commentCount = (Long) query.getOutputParameterValue(2);\r\n\r\n2. For a stored procedure which uses a `SYS_REFCURSOR` OUT parameter:\r\n\r\n\t\tCREATE OR REPLACE PROCEDURE post_comments ( \r\n\t\t   postId IN NUMBER, \r\n\t\t   postComments OUT SYS_REFCURSOR ) \r\n\t\tAS \r\n\t\tBEGIN\r\n\t\t\tOPEN postComments FOR\r\n\t\t\tSELECT *\r\n\t\t\tFROM post_comment \r\n\t\t\tWHERE post_id = postId; \r\n\t\tEND;\r\n\t\r\n\tYou can call it as follows:\r\n\r\n\t\tStoredProcedureQuery query = entityManager\r\n\t\t\t.createStoredProcedureQuery(&quot;post_comments&quot;)\r\n\t\t\t.registerStoredProcedureParameter(1, Long.class, \r\n\t\t\t\t ParameterMode.IN)\r\n\t\t\t.registerStoredProcedureParameter(2, Class.class, \r\n\t\t\t\t ParameterMode.REF_CURSOR)\r\n\t\t\t.setParameter(1, 1L);\r\n\t\t \r\n\t\tquery.execute();\r\n\t\t \r\n\t\tList&lt;Object[]&gt; postComments = query.getResultList();\r\n\t\r\n3. For a SQL function that looks as follows:\r\n\t\r\n\t\tCREATE OR REPLACE FUNCTION fn_count_comments ( \r\n\t\t\tpostId IN NUMBER ) \r\n\t\t\tRETURN NUMBER \r\n\t\tIS\r\n\t\t\tcommentCount NUMBER; \r\n\t\tBEGIN\r\n\t\t\tSELECT COUNT(*) INTO commentCount \r\n\t\t\tFROM post_comment \r\n\t\t\tWHERE post_id = postId; \r\n\t\t\tRETURN( commentCount ); \r\n\t\tEND;\r\n\t\t\r\n\tYou can call it like this:\r\n\t\r\n\t\tBigDecimal commentCount = (BigDecimal) entityManager\r\n\t\t.createNativeQuery(\r\n\t\t\t&quot;SELECT fn_count_comments(:postId) FROM DUAL&quot;\r\n\t\t)\r\n\t\t.setParameter(&quot;postId&quot;, 1L)\r\n\t\t.getSingleResult();\r\n\t\t\r\n\tAt least when using Hibernate 4.x and 5.x because the JPA `StoredProcedureQuery` does not work for SQL FUNCTIONS.\r\n\r\nFor more details about how to call stored procedures and functions when using JPA and Hibernate, check out the following articles\r\n\r\n- [How to call Oracle stored procedures and functions with JPA and Hibernate\r\n](https://vladmihalcea.com/how-to-call-oracle-stored-procedures-and-functions-from-hibernate/)\r\n- [How to call SQL Server stored procedures and functions with JPA and Hibernate\r\n](https://vladmihalcea.com/how-to-call-sql-server-stored-procedures-and-functions-from-hibernate/)\r\n- [How to call PostgreSQL functions (stored procedures) with JPA and Hibernate\r\n](https://vladmihalcea.com/how-to-call-postgresql-functions-from-hibernate/)\r\n- [How to call MySQL stored procedures and functions with JPA and Hibernate\r\n](https://vladmihalcea.com/how-to-call-mysql-stored-procedures-and-functions-with-jpa-and-hibernate/)","title":"How to call a stored procedure from Java and JPA","body":"<ol>\n<li><p>For a simple stored procedure that using IN/OUT parameters like this</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE count_comments (  \n   postId IN NUMBER,  \n   commentCount OUT NUMBER )  \nAS \nBEGIN \n    SELECT COUNT(*) INTO commentCount  \n    FROM post_comment  \n    WHERE post_id = postId; \nEND;\n</code></pre>\n\n<p>You can call it from JPA as follows:</p>\n\n<pre><code>StoredProcedureQuery query = entityManager\n    .createStoredProcedureQuery(\"count_comments\")\n    .registerStoredProcedureParameter(1, Long.class, \n        ParameterMode.IN)\n    .registerStoredProcedureParameter(2, Long.class, \n        ParameterMode.OUT)\n    .setParameter(1, 1L);\n\nquery.execute();\n\nLong commentCount = (Long) query.getOutputParameterValue(2);\n</code></pre></li>\n<li><p>For a stored procedure which uses a <code>SYS_REFCURSOR</code> OUT parameter:</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE post_comments ( \n   postId IN NUMBER, \n   postComments OUT SYS_REFCURSOR ) \nAS \nBEGIN\n    OPEN postComments FOR\n    SELECT *\n    FROM post_comment \n    WHERE post_id = postId; \nEND;\n</code></pre>\n\n<p>You can call it as follows:</p>\n\n<pre><code>StoredProcedureQuery query = entityManager\n    .createStoredProcedureQuery(\"post_comments\")\n    .registerStoredProcedureParameter(1, Long.class, \n         ParameterMode.IN)\n    .registerStoredProcedureParameter(2, Class.class, \n         ParameterMode.REF_CURSOR)\n    .setParameter(1, 1L);\n\nquery.execute();\n\nList&lt;Object[]&gt; postComments = query.getResultList();\n</code></pre></li>\n<li><p>For a SQL function that looks as follows:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION fn_count_comments ( \n    postId IN NUMBER ) \n    RETURN NUMBER \nIS\n    commentCount NUMBER; \nBEGIN\n    SELECT COUNT(*) INTO commentCount \n    FROM post_comment \n    WHERE post_id = postId; \n    RETURN( commentCount ); \nEND;\n</code></pre>\n\n<p>You can call it like this:</p>\n\n<pre><code>BigDecimal commentCount = (BigDecimal) entityManager\n.createNativeQuery(\n    \"SELECT fn_count_comments(:postId) FROM DUAL\"\n)\n.setParameter(\"postId\", 1L)\n.getSingleResult();\n</code></pre>\n\n<p>At least when using Hibernate 4.x and 5.x because the JPA <code>StoredProcedureQuery</code> does not work for SQL FUNCTIONS.</p></li>\n</ol>\n\n<p>For more details about how to call stored procedures and functions when using JPA and Hibernate, check out the following articles</p>\n\n<ul>\n<li><a href=\"https://vladmihalcea.com/how-to-call-oracle-stored-procedures-and-functions-from-hibernate/\" rel=\"noreferrer\">How to call Oracle stored procedures and functions with JPA and Hibernate\n</a></li>\n<li><a href=\"https://vladmihalcea.com/how-to-call-sql-server-stored-procedures-and-functions-from-hibernate/\" rel=\"noreferrer\">How to call SQL Server stored procedures and functions with JPA and Hibernate\n</a></li>\n<li><a href=\"https://vladmihalcea.com/how-to-call-postgresql-functions-from-hibernate/\" rel=\"noreferrer\">How to call PostgreSQL functions (stored procedures) with JPA and Hibernate\n</a></li>\n<li><a href=\"https://vladmihalcea.com/how-to-call-mysql-stored-procedures-and-functions-with-jpa-and-hibernate/\" rel=\"noreferrer\">How to call MySQL stored procedures and functions with JPA and Hibernate\n</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13169305,"reputation":656,"user_id":9512312,"display_name":"Amit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1521744425,"creation_date":1521744425,"answer_id":49436265,"question_id":3572626,"body_markdown":"This worked for me.\r\n\r\n    @Entity\r\n    @Table(name=&quot;acct&quot;)\r\n    @NamedNativeQueries({\r\n     @NamedNativeQuery(callable=true, name=&quot;Account.findOne&quot;, query=&quot;call sp_get_acct(?), resultClass=Account.class)})\r\n    public class Account{\r\n     // Code \r\n    }\r\n\r\n\r\nNote : in future if you decide to use default version of findOne then just comment the NamedNativeQueries annotation and JPA will switch to default","title":"How to call a stored procedure from Java and JPA","body":"<p>This worked for me.</p>\n\n<pre><code>@Entity\n@Table(name=\"acct\")\n@NamedNativeQueries({\n @NamedNativeQuery(callable=true, name=\"Account.findOne\", query=\"call sp_get_acct(?), resultClass=Account.class)})\npublic class Account{\n // Code \n}\n</code></pre>\n\n<p>Note : in future if you decide to use default version of findOne then just comment the NamedNativeQueries annotation and JPA will switch to default</p>\n"},{"tags":[],"owner":{"account_id":10516745,"reputation":341,"user_id":7750626,"display_name":"H.Ostwal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552645872,"creation_date":1552645872,"answer_id":55180581,"question_id":3572626,"body_markdown":"From JPA 2.1 , JPA supports to call stored procedures using the dynamic StoredProcedureQuery, and the declarative @NamedStoredProcedureQuery.","title":"How to call a stored procedure from Java and JPA","body":"<p>From JPA 2.1 , JPA supports to call stored procedures using the dynamic StoredProcedureQuery, and the declarative @NamedStoredProcedureQuery.</p>\n"},{"tags":[],"owner":{"account_id":17804992,"reputation":307,"user_id":12930883,"display_name":"RED-ONE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642690007,"creation_date":1642690007,"answer_id":70788256,"question_id":3572626,"body_markdown":"the simplest way is to use JpaRepository\r\n \r\n    1- Create a stored procedure\r\n    CREATE PROCEDURE dbo.getEmployeeDetails\r\n    (\r\n    @employeeId\t\t\tint,\r\n\t@companyId          int\r\n    )  AS\r\n    BEGIN\r\n     SELECT firstName,lastName,gender,address\r\n     FROM employee et\r\n     WHERE et.employeeId = @employeeId and et.companyId = @companyId\r\n    END\r\n\r\n\r\n    2- Create Entity\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Entity\r\n    public class EmployeeDetails {\r\n        @Id\r\n        private String firstName;\r\n        private String lastName;\r\n        private String gender;\r\n        private String address;\r\n     }\r\n\r\n\r\n    3- Create Repository\r\n    public interface EmployeeDetailsRepository extends \r\n    JpaRepository&lt;EmployeeDetails,String&gt; {\r\n    @Query(value = &quot;EXEC dbo.getEmployeeDetails @employeeId=:empId, \r\n                                              @companyId=:compId&quot;,nativeQuery =true)\r\n    List&lt;EmployeeDetails&gt; getEmployeeList(@Param(&quot;employeeId&quot;) Integer empId, \r\n                                          @Param(&quot;companyId&quot;) Integer compId);\r\n    }\r\n\r\n    4- create Controller\r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    @RestController\r\n    @RequestMapping(value = &quot;/api/employee&quot;)\r\n    public class EmployeeController {\r\n\r\n    @Autowired\r\n    private EmployeeDetailsRepository empRepo;\r\n\r\n    @GetMapping(value = &quot;/details&quot;)\r\n    public ResponseEntity&lt;List&lt;EmployeeDetails&gt;&gt; getEmployeeDetails(@RequestParam \r\n                String empId, @RequestParam String compId) {\r\n    try {\r\n       List&lt;EmployeeDetails&gt; result = empRepo.getEmployeeList(\r\n                                    Integer.valueOf(empId),Integer.valueOf(compId));\r\n            return ResponseEntity.status(HttpStatus.OK).body(result);\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n            return ResponseEntity.status(HttpStatus.EXPECTATION_FAILED).body(null);\r\n        }\r\n    }\r\n    }\r\n\r\nyou can now call http://localhost:8080/api/employee/details?empId=1&amp;compId=25\r\n\r\n","title":"How to call a stored procedure from Java and JPA","body":"<p>the simplest way is to use JpaRepository</p>\n<pre><code>1- Create a stored procedure\nCREATE PROCEDURE dbo.getEmployeeDetails\n(\n@employeeId         int,\n@companyId          int\n)  AS\nBEGIN\n SELECT firstName,lastName,gender,address\n FROM employee et\n WHERE et.employeeId = @employeeId and et.companyId = @companyId\nEND\n\n\n2- Create Entity\n@Getter\n@Setter\n@ToString\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\npublic class EmployeeDetails {\n    @Id\n    private String firstName;\n    private String lastName;\n    private String gender;\n    private String address;\n }\n\n\n3- Create Repository\npublic interface EmployeeDetailsRepository extends \nJpaRepository&lt;EmployeeDetails,String&gt; {\n@Query(value = &quot;EXEC dbo.getEmployeeDetails @employeeId=:empId, \n                                          @companyId=:compId&quot;,nativeQuery =true)\nList&lt;EmployeeDetails&gt; getEmployeeList(@Param(&quot;employeeId&quot;) Integer empId, \n                                      @Param(&quot;companyId&quot;) Integer compId);\n}\n\n4- create Controller\n@CrossOrigin(origins = &quot;*&quot;)\n@RestController\n@RequestMapping(value = &quot;/api/employee&quot;)\npublic class EmployeeController {\n\n@Autowired\nprivate EmployeeDetailsRepository empRepo;\n\n@GetMapping(value = &quot;/details&quot;)\npublic ResponseEntity&lt;List&lt;EmployeeDetails&gt;&gt; getEmployeeDetails(@RequestParam \n            String empId, @RequestParam String compId) {\ntry {\n   List&lt;EmployeeDetails&gt; result = empRepo.getEmployeeList(\n                                Integer.valueOf(empId),Integer.valueOf(compId));\n        return ResponseEntity.status(HttpStatus.OK).body(result);\n    }\n    catch (Exception ex)\n    {\n        return ResponseEntity.status(HttpStatus.EXPECTATION_FAILED).body(null);\n    }\n}\n}\n</code></pre>\n<p>you can now call http://localhost:8080/api/employee/details?empId=1&amp;compId=25</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660749984,"creation_date":1660749984,"answer_id":73391116,"question_id":3572626,"body_markdown":"If you&#39;re not too attached to calling this particular procedure with JPA or JDBC, you could use [jOOQ, a third party library that generates stubs for all of your stored procedures][1] to simplify calling them, and making the calls type safe.\r\n\r\n### Calling procedures returning unspecified cursors\r\n\r\nIn your particular case, the procedure returns an untyped, undeclared cursor (it could return several cursors and interleaved update counts). So, you could call the procedure like this with jOOQ:\r\n\r\n```java\r\nGetEmployeeDetails proc = new GetEmployeeDetails();\r\nproc.setEmployeeId(1);\r\nproc.setCompanyId(2);\r\nproc.execute(configuration);\r\n\r\n// Iterate over potentially multiple results\r\nfor (Result&lt;?&gt; result : proc.getResults()) {\r\n\r\n    // Print the first result set (your employee query)\r\n    System.out.println(result);\r\n\r\n    // Use your implicit knowledge of the content of the query\r\n    // Without type safety\r\n    for (Record record : result) {\r\n\r\n        // All tables / columns are also generated\r\n        System.out.println(&quot;First name: &quot; + record.get(EMPLOYEE.FIRSTNAME));\r\n        System.out.println(&quot;Last name: &quot; + record.get(EMPLOYEE.LASTNAME));\r\n        System.out.println(&quot;Gender: &quot; + record.get(EMPLOYEE.GENDER));\r\n        System.out.println(&quot;Address: &quot; + record.get(EMPLOYEE.ADDRESS));\r\n    }\r\n}\r\n```\r\n\r\n### Using an actual table valued function, instead\r\n\r\nPersonally, I don&#39;t really like that feature of a few RDBMS (including SQL Server, MySQL) of returning arbitrary untyped cursors. Why not just declare the result type? SQL Server has powerful [table valued functions][2]. E.g. just use this syntax here:\r\n\r\n```sql\r\nCREATE FUNCTION getEmployeeDetails (@employeeId int, @companyId int)\r\nRETURNS TABLE\r\nAS RETURN\r\n  SELECT\r\n    firstName,\r\n    lastName,\r\n    gender,\r\n    address\r\n  FROM employee et\r\n  WHERE et.employeeId = @employeeId\r\n  AND et.companyId = @companyId\r\n```\r\n\r\nNow, you have the full type information associated with this function in your catalog, and if you&#39;re still using jOOQ, that information will be available to the code generator, so you can call the function like this:\r\n\r\n```java\r\nfor (GetEmployeeDetailsRecord record : ctx.selectFrom(getEmployeeDetails(1, 2))) {\r\n    System.out.println(&quot;First name: &quot; + record.getFirstName());\r\n    System.out.println(&quot;Last name: &quot; + record.getLastName());\r\n    System.out.println(&quot;Gender: &quot; + record.getGender());\r\n    System.out.println(&quot;Address: &quot; + record.getAddress());\r\n}\r\n```\r\n\r\nDisclaimer: I work for the company behind jOOQ\r\n\r\n\r\n  [1]: https://blog.jooq.org/the-best-way-to-call-stored-procedures-from-java-with-jooq/\r\n  [2]: https://learn.microsoft.com/en-us/sql/t-sql/statements/create-function-transact-sql?view=sql-server-ver16","title":"How to call a stored procedure from Java and JPA","body":"<p>If you're not too attached to calling this particular procedure with JPA or JDBC, you could use <a href=\"https://blog.jooq.org/the-best-way-to-call-stored-procedures-from-java-with-jooq/\" rel=\"nofollow noreferrer\">jOOQ, a third party library that generates stubs for all of your stored procedures</a> to simplify calling them, and making the calls type safe.</p>\n<h3>Calling procedures returning unspecified cursors</h3>\n<p>In your particular case, the procedure returns an untyped, undeclared cursor (it could return several cursors and interleaved update counts). So, you could call the procedure like this with jOOQ:</p>\n<pre class=\"lang-java prettyprint-override\"><code>GetEmployeeDetails proc = new GetEmployeeDetails();\nproc.setEmployeeId(1);\nproc.setCompanyId(2);\nproc.execute(configuration);\n\n// Iterate over potentially multiple results\nfor (Result&lt;?&gt; result : proc.getResults()) {\n\n    // Print the first result set (your employee query)\n    System.out.println(result);\n\n    // Use your implicit knowledge of the content of the query\n    // Without type safety\n    for (Record record : result) {\n\n        // All tables / columns are also generated\n        System.out.println(&quot;First name: &quot; + record.get(EMPLOYEE.FIRSTNAME));\n        System.out.println(&quot;Last name: &quot; + record.get(EMPLOYEE.LASTNAME));\n        System.out.println(&quot;Gender: &quot; + record.get(EMPLOYEE.GENDER));\n        System.out.println(&quot;Address: &quot; + record.get(EMPLOYEE.ADDRESS));\n    }\n}\n</code></pre>\n<h3>Using an actual table valued function, instead</h3>\n<p>Personally, I don't really like that feature of a few RDBMS (including SQL Server, MySQL) of returning arbitrary untyped cursors. Why not just declare the result type? SQL Server has powerful <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/statements/create-function-transact-sql?view=sql-server-ver16\" rel=\"nofollow noreferrer\">table valued functions</a>. E.g. just use this syntax here:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE FUNCTION getEmployeeDetails (@employeeId int, @companyId int)\nRETURNS TABLE\nAS RETURN\n  SELECT\n    firstName,\n    lastName,\n    gender,\n    address\n  FROM employee et\n  WHERE et.employeeId = @employeeId\n  AND et.companyId = @companyId\n</code></pre>\n<p>Now, you have the full type information associated with this function in your catalog, and if you're still using jOOQ, that information will be available to the code generator, so you can call the function like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (GetEmployeeDetailsRecord record : ctx.selectFrom(getEmployeeDetails(1, 2))) {\n    System.out.println(&quot;First name: &quot; + record.getFirstName());\n    System.out.println(&quot;Last name: &quot; + record.getLastName());\n    System.out.println(&quot;Gender: &quot; + record.getGender());\n    System.out.println(&quot;Address: &quot; + record.getAddress());\n}\n</code></pre>\n<p>Disclaimer: I work for the company behind jOOQ</p>\n"}],"owner":{"account_id":191129,"reputation":1181,"user_id":431514,"display_name":"user431514"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":320061,"favorite_count":0,"down_vote_count":0,"up_vote_count":104,"answer_count":19,"score":104,"last_activity_date":1660749984,"creation_date":1282804953,"question_id":3572626,"body_markdown":"I am writing a simple web application to call a stored procedure and retrieve some data.\r\nIts a very simple application, which interacts with client&#39;s database. We pass employee id and company id and the stored procedure will return employee details.\r\n\r\nWeb application cannot update/delete data and is using SQL Server.\r\n\r\nI am deploying my web application in Jboss AS. Should I use JPA to access the stored procedure or `CallableStatement`. Any advantage of using JPA in this case.\r\n\r\nAlso what will be the sql statement to call this stored procedure. I have never used stored procedures before and I am struggling with this one. Google was not much of a help.\r\n\r\nHere is the stored procedure:\r\n\r\n    CREATE procedure getEmployeeDetails (@employeeId int, @companyId int)\r\n    as\r\n    begin\r\n        select firstName, \r\n               lastName, \r\n               gender, \r\n               address\r\n          from employee et\r\n         where et.employeeId = @employeeId\r\n           and et.companyId = @companyId\r\n    end\r\n\r\nUpdate:\r\n\r\nFor anyone else having problem calling stored procedure using *JPA*.\r\n\r\n    Query query = em.createNativeQuery(&quot;{call getEmployeeDetails(?,?)}&quot;,\r\n                                       EmployeeDetails.class)\t\t\t\r\n                                       .setParameter(1, employeeId)\r\n                                       .setParameter(2, companyId);\r\n    \r\n    List&lt;EmployeeDetails&gt; result = query.getResultList();\r\n\r\nThings I have noticed:\r\n\r\n1. Parameter names didn&#39;t work for me, so try using parameter index.\r\n2. Correct sql statement `{call sp_name(?,?)}` instead of  `call sp_name(?,?)`\r\n3. If stored procedure is returning a result set, even if you know with only one row, `getSingleResult` wont work\r\n4. Pass a `resultSetMapping` name or result class details","title":"How to call a stored procedure from Java and JPA","body":"<p>I am writing a simple web application to call a stored procedure and retrieve some data.\nIts a very simple application, which interacts with client's database. We pass employee id and company id and the stored procedure will return employee details.</p>\n\n<p>Web application cannot update/delete data and is using SQL Server.</p>\n\n<p>I am deploying my web application in Jboss AS. Should I use JPA to access the stored procedure or <code>CallableStatement</code>. Any advantage of using JPA in this case.</p>\n\n<p>Also what will be the sql statement to call this stored procedure. I have never used stored procedures before and I am struggling with this one. Google was not much of a help.</p>\n\n<p>Here is the stored procedure:</p>\n\n<pre><code>CREATE procedure getEmployeeDetails (@employeeId int, @companyId int)\nas\nbegin\n    select firstName, \n           lastName, \n           gender, \n           address\n      from employee et\n     where et.employeeId = @employeeId\n       and et.companyId = @companyId\nend\n</code></pre>\n\n<p>Update:</p>\n\n<p>For anyone else having problem calling stored procedure using <em>JPA</em>.</p>\n\n<pre><code>Query query = em.createNativeQuery(\"{call getEmployeeDetails(?,?)}\",\n                                   EmployeeDetails.class)           \n                                   .setParameter(1, employeeId)\n                                   .setParameter(2, companyId);\n\nList&lt;EmployeeDetails&gt; result = query.getResultList();\n</code></pre>\n\n<p>Things I have noticed:</p>\n\n<ol>\n<li>Parameter names didn't work for me, so try using parameter index.</li>\n<li>Correct sql statement <code>{call sp_name(?,?)}</code> instead of  <code>call sp_name(?,?)</code></li>\n<li>If stored procedure is returning a result set, even if you know with only one row, <code>getSingleResult</code> wont work</li>\n<li>Pass a <code>resultSetMapping</code> name or result class details</li>\n</ol>\n"},{"tags":["java","jmeter","jmx"],"comments":[{"owner":{"account_id":22101947,"reputation":397,"user_id":16358266,"display_name":"user16358266"},"score":0,"creation_date":1660748527,"post_id":73390726,"comment_id":129606814,"body_markdown":"What are you expecting? Please provide more information.","body":"What are you expecting? Please provide more information."},{"owner":{"account_id":5272138,"reputation":2107,"user_id":4210091,"display_name":"Renato"},"score":0,"creation_date":1660748565,"post_id":73390726,"comment_id":129606838,"body_markdown":"No, I don&#39;t think that it could be possibile","body":"No, I don&#39;t think that it could be possibile"},{"owner":{"account_id":23775133,"reputation":3,"user_id":17788700,"display_name":"marjan"},"score":0,"creation_date":1660748763,"post_id":73390726,"comment_id":129606948,"body_markdown":"@user16358266 So I created a Java app with multi threads for inserting and removing the Objects from list. The purpose of that app is to test the performance of JDK. All tutorials about JMeter are representing the HTTP requests, but is there a way to test performances of an app without any endpoiint?","body":"@user16358266 So I created a Java app with multi threads for inserting and removing the Objects from list. The purpose of that app is to test the performance of JDK. All tutorials about JMeter are representing the HTTP requests, but is there a way to test performances of an app without any endpoiint?"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1660750521,"post_id":73390726,"comment_id":129607786,"body_markdown":"And you thinkt that JMETER is somehow a tool to do that ??\\ *The software is used to perform performance testing, functional testing, and load testing of **web applications**.*","body":"And you thinkt that JMETER is somehow a tool to do that ??\\ <i>The software is used to perform performance testing, functional testing, and load testing of <b>web applications</b>.</i>"},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1660755106,"post_id":73390726,"comment_id":129609470,"body_markdown":"Sure it is. Why not? Just run your code and watch what happens.","body":"Sure it is. Why not? Just run your code and watch what happens."}],"answers":[{"tags":[],"owner":{"account_id":22101947,"reputation":397,"user_id":16358266,"display_name":"user16358266"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1660749237,"creation_date":1660749237,"answer_id":73390953,"question_id":73390726,"body_markdown":"That is not possible with JMeter, if you want to run performance test on the jvm then [Java Microbenchmark Harness (JMH)][1] is the better choice.\r\n\r\n\r\n  [1]: https://github.com/openjdk/jmh","title":"How to test Java App without APIs in JMeter","body":"<p>That is not possible with JMeter, if you want to run performance test on the jvm then <a href=\"https://github.com/openjdk/jmh\" rel=\"nofollow noreferrer\">Java Microbenchmark Harness (JMH)</a> is the better choice.</p>\n"}],"owner":{"account_id":23775133,"reputation":3,"user_id":17788700,"display_name":"marjan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73390953,"answer_count":1,"score":-1,"last_activity_date":1660749237,"creation_date":1660748355,"question_id":73390726,"body_markdown":"Is it possible to test simple Java app with few classes without any endpoint in JMeter?\r\n\r\nThanks!","title":"How to test Java App without APIs in JMeter","body":"<p>Is it possible to test simple Java app with few classes without any endpoint in JMeter?</p>\n<p>Thanks!</p>\n"},{"tags":["java","opengl","lwjgl","opengl-3","fbo"],"comments":[{"owner":{"account_id":2968584,"reputation":50561,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":2,"creation_date":1378374412,"post_id":14469569,"comment_id":27431277,"body_markdown":"try set image.Width() and image.Height() as square and power of 2 if it helps. (Intel GL drivers are a mess more possible case is your code is all right and intel graphics mess things up on their own). Also check for memory leaks, intel GL drivers are very sensitive to it.","body":"try set image.Width() and image.Height() as square and power of 2 if it helps. (Intel GL drivers are a mess more possible case is your code is all right and intel graphics mess things up on their own). Also check for memory leaks, intel GL drivers are very sensitive to it."},{"owner":{"account_id":1610043,"reputation":99,"user_id":1489338,"display_name":"sacygan"},"score":0,"creation_date":1384706660,"post_id":14469569,"comment_id":29834319,"body_markdown":"What is Your OS?  What is the pixelformat of default fbo here?","body":"What is Your OS?  What is the pixelformat of default fbo here?"},{"owner":{"account_id":300147,"reputation":5301,"user_id":607131,"accept_rate":83,"display_name":"kvark"},"score":6,"creation_date":1386275707,"post_id":14469569,"comment_id":30481189,"body_markdown":"I don&#39;t see anything wrong with the code... but it might help if you attach the images of what Intel/NVidia cards produce.","body":"I don&#39;t see anything wrong with the code... but it might help if you attach the images of what Intel/NVidia cards produce."},{"owner":{"account_id":238268,"reputation":11065,"user_id":507043,"accept_rate":77,"display_name":"Michael IV"},"score":0,"creation_date":1398774846,"post_id":14469569,"comment_id":35786526,"body_markdown":"The only thing I know is that Intel OpenGL drivers are not in the best shape.","body":"The only thing I know is that Intel OpenGL drivers are not in the best shape."},{"owner":{"account_id":351410,"reputation":224,"user_id":687862,"display_name":"Siamak M. Mirzaie"},"score":0,"creation_date":1399498881,"post_id":14469569,"comment_id":36093634,"body_markdown":"Not entirely sure, but glPixelStore related? i remember running into a framebuffer related issue on different systems which was relating to glPixelStore, but i&#39;m not sure it was with glBlit.","body":"Not entirely sure, but glPixelStore related? i remember running into a framebuffer related issue on different systems which was relating to glPixelStore, but i&#39;m not sure it was with glBlit."}],"answers":[{"tags":[],"owner":{"account_id":4163881,"reputation":307,"user_id":3413307,"accept_rate":40,"display_name":"Ajster1989"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1399524396,"creation_date":1399524396,"answer_id":23532927,"question_id":14469569,"body_markdown":"This might be a known issue with Intel HD Graphics. Check out this program here - http://www.realtech-vr.com/glview/download.php\r\n\r\nThis program with tell you what version of OpenGL your video card supports, sometimes Intel HD only supports 1.1 (weird I know!) but sometimes it can say that it supports higher but with errors.\r\n\r\nGood Luck!","title":"OpenGL fbo blitting inconsistent between Intel and Nvidia","body":"<p>This might be a known issue with Intel HD Graphics. Check out this program here - <a href=\"http://www.realtech-vr.com/glview/download.php\" rel=\"nofollow\">http://www.realtech-vr.com/glview/download.php</a></p>\n\n<p>This program with tell you what version of OpenGL your video card supports, sometimes Intel HD only supports 1.1 (weird I know!) but sometimes it can say that it supports higher but with errors.</p>\n\n<p>Good Luck!</p>\n"}],"owner":{"account_id":541610,"reputation":1377,"user_id":910227,"accept_rate":80,"display_name":"Jannis Froese"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1252,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"answer_count":1,"score":16,"last_activity_date":1660749052,"creation_date":1358895249,"question_id":14469569,"body_markdown":"I am rendering a scene in OpenGL in a low resolution into a framebuffer. Then I intend to draw this version onto the whole screen (upscaled with GL_NEAREST). I do this using texture blitting (glBlitFramebuffer). On my Nvidia GPU this works, but when executing the exact same code on my Intel i7 integrated Graphics, the y-Position on the target framebuffer seems wrong (i.e. the image is rendered too far up).\r\n\r\nglGetError returns no error. As the Nvidia driver tends to be very forgiving, I expect that I am missing a minor detail in the OpenGL spec that Nvidia doesn&#39;t care about. I searched the internet and stackoverflow and couldn&#39;t find a similar problem described. Both drivers report to support OpenGL 3.0\r\n\r\nMy drawing code:\r\n\r\n    //setup viewport for small image\r\n    glPushAttrib(GL_VIEWPORT_BIT);\r\n    glViewport(0, 0, image.getWidth(), image.getHeight());\r\n\r\n    //bind small framebuffer\r\n    glBindFramebuffer(GL_DRAW_FRAMEBUFFER, fbo);\r\n    glDrawBuffers(GL_COLOR_ATTACHMENT0);\r\n    glClear(GL_COLOR_BUFFER_BIT);\r\n\r\n    //draw\r\n    renderRotatedFull(1);//nothing interesting at all happening here\r\n\r\n    //reset Viewport\r\n    glPopAttrib();\r\n\r\n    //prepare and execute blitting\r\n    glBindFramebuffer(GL_READ_FRAMEBUFFER, fbo);\r\n    glReadBuffer(GL_COLOR_ATTACHMENT0);\r\n\r\n    glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);\r\n    glDrawBuffers(GL_BACK_LEFT);\r\n\r\n    glBlitFramebuffer(0, 0, image.getWidth(), image.getHeight(), 0, 0, Game.width,\r\n        Game.height, GL_COLOR_BUFFER_BIT, GL_NEAREST);\r\n\r\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\r\n\r\n    //throws exception if there is an OpenGL error\r\n    org.lwjgl.opengl.Util.checkGLError();\r\n\r\nInitialisation is done as follows:\r\n\r\n    fbo =glGenFramebuffers();\r\n    glBindFramebuffer(GL_FRAMEBUFFER, fbo);\r\n\r\n    rbo = glGenRenderbuffers();\r\n    glBindRenderbuffer(GL_RENDERBUFFER, rbo);\r\n    glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA8, image.getWidth(), image.getHeight());\r\n    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, rbo);\r\n\r\n    assert(glCheckFramebufferStatus(GL_FRAMEBUFFER) == GL_FRAMEBUFFER_COMPLETE);","title":"OpenGL fbo blitting inconsistent between Intel and Nvidia","body":"<p>I am rendering a scene in OpenGL in a low resolution into a framebuffer. Then I intend to draw this version onto the whole screen (upscaled with GL_NEAREST). I do this using texture blitting (glBlitFramebuffer). On my Nvidia GPU this works, but when executing the exact same code on my Intel i7 integrated Graphics, the y-Position on the target framebuffer seems wrong (i.e. the image is rendered too far up).</p>\n\n<p>glGetError returns no error. As the Nvidia driver tends to be very forgiving, I expect that I am missing a minor detail in the OpenGL spec that Nvidia doesn't care about. I searched the internet and stackoverflow and couldn't find a similar problem described. Both drivers report to support OpenGL 3.0</p>\n\n<p>My drawing code:</p>\n\n<pre><code>//setup viewport for small image\nglPushAttrib(GL_VIEWPORT_BIT);\nglViewport(0, 0, image.getWidth(), image.getHeight());\n\n//bind small framebuffer\nglBindFramebuffer(GL_DRAW_FRAMEBUFFER, fbo);\nglDrawBuffers(GL_COLOR_ATTACHMENT0);\nglClear(GL_COLOR_BUFFER_BIT);\n\n//draw\nrenderRotatedFull(1);//nothing interesting at all happening here\n\n//reset Viewport\nglPopAttrib();\n\n//prepare and execute blitting\nglBindFramebuffer(GL_READ_FRAMEBUFFER, fbo);\nglReadBuffer(GL_COLOR_ATTACHMENT0);\n\nglBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);\nglDrawBuffers(GL_BACK_LEFT);\n\nglBlitFramebuffer(0, 0, image.getWidth(), image.getHeight(), 0, 0, Game.width,\n    Game.height, GL_COLOR_BUFFER_BIT, GL_NEAREST);\n\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\n\n//throws exception if there is an OpenGL error\norg.lwjgl.opengl.Util.checkGLError();\n</code></pre>\n\n<p>Initialisation is done as follows:</p>\n\n<pre><code>fbo =glGenFramebuffers();\nglBindFramebuffer(GL_FRAMEBUFFER, fbo);\n\nrbo = glGenRenderbuffers();\nglBindRenderbuffer(GL_RENDERBUFFER, rbo);\nglRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA8, image.getWidth(), image.getHeight());\nglFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, rbo);\n\nassert(glCheckFramebufferStatus(GL_FRAMEBUFFER) == GL_FRAMEBUFFER_COMPLETE);\n</code></pre>\n"},{"tags":["java","oracle","struct","plsql","user-defined-types"],"answers":[{"tags":[],"owner":{"account_id":2159319,"reputation":1983,"user_id":1913856,"display_name":"isalgueiro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548329229,"creation_date":1548329229,"answer_id":54345558,"question_id":54344166,"body_markdown":"Use `oracle.jdbc.OracleStruct` to map your custom type. Check Oracle&#39;s docs at https://docs.oracle.com/database/121/JJDBC/oraoot.htm#JJDBC28431\r\n\r\n    PreparedStatement ps= conn.prepareStatement(&quot;text_of_prepared_statement&quot;);\r\n    Struct mySTRUCT = conn.createStruct (...);\r\n    ((OraclePreparedStatement)ps).setOracleObject(1, mySTRUCT);","title":"Java - How to call an oracle procedure with custom types?","body":"<p>Use <code>oracle.jdbc.OracleStruct</code> to map your custom type. Check Oracle's docs at <a href=\"https://docs.oracle.com/database/121/JJDBC/oraoot.htm#JJDBC28431\" rel=\"nofollow noreferrer\">https://docs.oracle.com/database/121/JJDBC/oraoot.htm#JJDBC28431</a></p>\n\n<pre><code>PreparedStatement ps= conn.prepareStatement(\"text_of_prepared_statement\");\nStruct mySTRUCT = conn.createStruct (...);\n((OraclePreparedStatement)ps).setOracleObject(1, mySTRUCT);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1635690,"reputation":150047,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1548334425,"creation_date":1548334104,"answer_id":54347047,"question_id":54344166,"body_markdown":"**Oracle Setup**:\r\n\r\n```\r\nCREATE OR REPLACE TYPE BD_TB_STRUCT AS OBJECT(\r\n  start_ts TIMESTAMP(3),\r\n  end_ts   TIMESTAMP(3),\r\n  time_type NUMBER(19),\r\n  duration NUMBER(12)\r\n) FINAL;\r\n/\r\n\r\nCREATE OR REPLACE PROCEDURE merge_time_bounds(\r\n  s1_bd_t IN  bd_tb_struct,\r\n  s2_bd_t IN  bd_tb_struct,\r\n  r_bd_t  OUT bd_tb_struct\r\n)\r\nIS\r\n  p_start TIMESTAMP(3) := LEAST(    s1_bd_t.start_ts,  s2_bd_t.start_ts );\r\n  p_end   TIMESTAMP(3) := GREATEST( s1_bd_t.end_ts,    s2_bd_t.end_ts );\r\nBEGIN\r\n  r_bd_t := new BD_TB_STRUCT( \r\n                  p_start,\r\n                  p_end,\r\n                  COALESCE( s1_bd_t.time_type, s2_bd_t.time_type ),\r\n                  ( CAST( p_end AS DATE ) - CAST( p_start AS DATE ) ) * 24 * 60 * 60\r\n                );\r\nEND;\r\n/\r\n```\r\n\r\n**Java SQLData Class**:\r\n\r\n```\r\nimport java.math.BigDecimal;\r\nimport java.math.BigInteger;\r\nimport java.sql.SQLData;\r\nimport java.sql.SQLException;\r\nimport java.sql.SQLInput;\r\nimport java.sql.SQLOutput;\r\nimport java.sql.Timestamp;\r\nimport java.time.LocalDateTime;\r\nimport java.time.ZoneOffset;\r\n\r\npublic class BoundsSQL implements SQLData\r\n{\r\n  public static final String SQL_TYPE = &quot;BD_TB_STRUCT&quot;;\r\n  public java.sql.Timestamp start;\r\n  public java.sql.Timestamp end;\r\n  public BigInteger type;\r\n  public BigInteger duration;\r\n\r\n  public BoundsSQL()\r\n  {\r\n  }\r\n\r\n  public BoundsSQL(\r\n      final int year,\r\n      final int month,\r\n      final int dayOfMonth,\r\n      final int hour,\r\n      final int minute,\r\n      final int seconds,\r\n      final long duration,\r\n      final long type )\r\n  {\r\n    final long epochSeconds = LocalDateTime.of(\r\n        year,\r\n        month,\r\n        dayOfMonth,\r\n        hour,\r\n        minute,\r\n        seconds\r\n      ).toEpochSecond( ZoneOffset.UTC );\r\n    this.start    = new Timestamp( epochSeconds * 1000 );\r\n    this.end      = new Timestamp( (epochSeconds + duration) * 1000 );\r\n    this.duration = BigInteger.valueOf( duration );\r\n    this.type = BigInteger.valueOf( type );\r\n  }\r\n\r\n  @Override\r\n  public String getSQLTypeName() throws SQLException\r\n  {\r\n    return SQL_TYPE;\r\n  }\r\n\r\n  @Override\r\n  public void readSQL( SQLInput stream,\r\n      String typeName ) throws SQLException\r\n  {\r\n    start    = stream.readTimestamp();\r\n    end      = stream.readTimestamp();\r\n    type     = stream.readBigDecimal().toBigInteger();\r\n    duration = stream.readBigDecimal().toBigInteger();\r\n  }\r\n\r\n  @Override\r\n  public void writeSQL( SQLOutput stream ) throws SQLException\r\n  {\r\n    stream.writeTimestamp( start );\r\n    stream.writeTimestamp( end );\r\n    stream.writeBigDecimal( new BigDecimal( type ) );\r\n    stream.writeBigDecimal( new BigDecimal( duration ) );\r\n  }\r\n\r\n  @Override\r\n  public String toString()\r\n  {\r\n    return String.format(\r\n        &quot;Start:    %s\\nEnd:      %s\\nDuration: %s\\nType:     %s&quot;,\r\n        start,\r\n        end,\r\n        duration,\r\n        type\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n**Call Stored Procedure from Java**:\r\n\r\nCall the stored procedure using `OracleCallableStatement#setObject( int, Object )` to pass parameters and put the class into a type map and use `OracleCallableStatement#registerOutParameter( int, int, string )` and `OracleCallableStatement#getObject( int )` to retrieve the parameters.\r\n\r\n```\r\nimport java.sql.DriverManager;\r\nimport java.sql.SQLException;\r\nimport java.util.Map;\r\nimport oracle.jdbc.OracleCallableStatement;\r\nimport oracle.jdbc.OracleConnection;\r\nimport oracle.jdbc.OracleTypes;\r\n\r\npublic class PassStructToProcedure\r\n{\r\n  \r\n  public static void main( final String[] args ){\r\n    OracleConnection con = null;\r\n    try{\r\n      Class.forName( &quot;oracle.jdbc.OracleDriver&quot; );\r\n      \r\n      con = (OracleConnection) DriverManager.getConnection(\r\n          &quot;jdbc:oracle:thin:@localhost:1521:orcl&quot;,\r\n          &quot;USERNAME&quot;,\r\n          &quot;PASSWORD&quot;\r\n      );\r\n      \r\n      BoundsSQL bound1 = new BoundsSQL( 2019, 1, 1, 0, 0, 0, 10, 1 );\r\n      BoundsSQL bound2 = new BoundsSQL( 2019, 1, 1, 0, 0, 5, 10, 2 );\r\n      \r\n      OracleCallableStatement st = (OracleCallableStatement) con.prepareCall(\r\n          &quot;{ call MERGE_TIME_BOUNDS( ?, ?, ? ) }&quot;\r\n      );\r\n      \r\n      st.setObject( 1, bound1 );\r\n      st.setObject( 2, bound2 );\r\n      st.registerOutParameter( 3, OracleTypes.STRUCT, BoundsSQL.SQL_TYPE );\r\n      st.execute();\r\n      \r\n      Map&lt;String,Class&lt;?&gt;&gt; typeMap = con.getTypeMap();\r\n      typeMap.put( BoundsSQL.SQL_TYPE, BoundsSQL.class );\r\n      \r\n      BoundsSQL out = (BoundsSQL) st.getObject( 3 );\r\n      \r\n      System.out.println( out.toString() );\r\n      \r\n      st.close();\r\n    } catch (ClassNotFoundException | SQLException ex) {\r\n      System.out.println( ex.getMessage() );\r\n      ex.printStackTrace();\r\n    } finally {\r\n      try{\r\n        if ( con != null )\r\n          con.close();\r\n      }\r\n      catch( SQLException e )\r\n      {\r\n        \r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Output**:\r\n\r\n```\r\nStart:    2019-01-01 00:00:00.0\r\nEnd:      2019-01-01 00:00:15.0\r\nDuration: 15\r\nType:     1\r\n```","title":"Java - How to call an oracle procedure with custom types?","body":"<p><strong>Oracle Setup</strong>:</p>\n\n<pre><code>CREATE OR REPLACE TYPE BD_TB_STRUCT AS OBJECT(\n  start_ts TIMESTAMP(3),\n  end_ts   TIMESTAMP(3),\n  time_type NUMBER(19),\n  duration NUMBER(12)\n) FINAL;\n/\n\nCREATE OR REPLACE PROCEDURE merge_time_bounds(\n  s1_bd_t IN  bd_tb_struct,\n  s2_bd_t IN  bd_tb_struct,\n  r_bd_t  OUT bd_tb_struct\n)\nIS\n  p_start TIMESTAMP(3) := LEAST(    s1_bd_t.start_ts,  s2_bd_t.start_ts );\n  p_end   TIMESTAMP(3) := GREATEST( s1_bd_t.end_ts,    s2_bd_t.end_ts );\nBEGIN\n  r_bd_t := new BD_TB_STRUCT( \n                  p_start,\n                  p_end,\n                  COALESCE( s1_bd_t.time_type, s2_bd_t.time_type ),\n                  ( CAST( p_end AS DATE ) - CAST( p_start AS DATE ) ) * 24 * 60 * 60\n                );\nEND;\n/\n</code></pre>\n\n<p><strong>Java SQLData Class</strong>:</p>\n\n<pre><code>import java.math.BigDecimal;\nimport java.math.BigInteger;\nimport java.sql.SQLData;\nimport java.sql.SQLException;\nimport java.sql.SQLInput;\nimport java.sql.SQLOutput;\nimport java.sql.Timestamp;\nimport java.time.LocalDateTime;\nimport java.time.ZoneOffset;\n\npublic class BoundsSQL implements SQLData\n{\n  public static final String SQL_TYPE = \"BD_TB_STRUCT\";\n  public java.sql.Timestamp start;\n  public java.sql.Timestamp end;\n  public BigInteger type;\n  public BigInteger duration;\n\n  public BoundsSQL()\n  {\n  }\n\n  public BoundsSQL(\n      final int year,\n      final int month,\n      final int dayOfMonth,\n      final int hour,\n      final int minute,\n      final int seconds,\n      final long duration,\n      final long type )\n  {\n    final long epochSeconds = LocalDateTime.of(\n        year,\n        month,\n        dayOfMonth,\n        hour,\n        minute,\n        seconds\n      ).toEpochSecond( ZoneOffset.UTC );\n    this.start    = new Timestamp( epochSeconds * 1000 );\n    this.end      = new Timestamp( (epochSeconds + duration) * 1000 );\n    this.duration = BigInteger.valueOf( duration );\n    this.type = BigInteger.valueOf( type );\n  }\n\n  @Override\n  public String getSQLTypeName() throws SQLException\n  {\n    return SQL_TYPE;\n  }\n\n  @Override\n  public void readSQL( SQLInput stream,\n      String typeName ) throws SQLException\n  {\n    start    = stream.readTimestamp();\n    end      = stream.readTimestamp();\n    type     = stream.readBigDecimal().toBigInteger();\n    duration = stream.readBigDecimal().toBigInteger();\n  }\n\n  @Override\n  public void writeSQL( SQLOutput stream ) throws SQLException\n  {\n    stream.writeTimestamp( start );\n    stream.writeTimestamp( end );\n    stream.writeBigDecimal( new BigDecimal( type ) );\n    stream.writeBigDecimal( new BigDecimal( duration ) );\n  }\n\n  @Override\n  public String toString()\n  {\n    return String.format(\n        \"Start:    %s\\nEnd:      %s\\nDuration: %s\\nType:     %s\",\n        start,\n        end,\n        duration,\n        type\n    );\n  }\n}\n</code></pre>\n\n<p><strong>Call Stored Procedure from Java</strong>:</p>\n\n<p>Call the stored procedure using <code>OracleCallableStatement#setObject( int, Object )</code> to pass parameters and put the class into a type map and use <code>OracleCallableStatement#registerOutParameter( int, int, string )</code> and <code>OracleCallableStatement#getObject( int )</code> to retrieve the parameters.</p>\n\n<pre><code>import java.sql.DriverManager;\nimport java.sql.SQLException;\nimport java.util.Map;\nimport oracle.jdbc.OracleCallableStatement;\nimport oracle.jdbc.OracleConnection;\nimport oracle.jdbc.OracleTypes;\n\npublic class PassStructToProcedure\n{\n\n  public static void main( final String[] args ){\n    OracleConnection con = null;\n    try{\n      Class.forName( \"oracle.jdbc.OracleDriver\" );\n\n      con = (OracleConnection) DriverManager.getConnection(\n          \"jdbc:oracle:thin:@localhost:1521:orcl\",\n          \"USERNAME\",\n          \"PASSWORD\"\n      );\n\n      BoundsSQL bound1 = new BoundsSQL( 2019, 1, 1, 0, 0, 0, 10, 1 );\n      BoundsSQL bound2 = new BoundsSQL( 2019, 1, 1, 0, 0, 5, 10, 2 );\n\n      OracleCallableStatement st = (OracleCallableStatement) con.prepareCall(\n          \"{ call MERGE_TIME_BOUNDS( ?, ?, ? ) }\"\n      );\n\n      st.setObject( 1, bound1 );\n      st.setObject( 2, bound2 );\n      st.registerOutParameter( 3, OracleTypes.STRUCT, BoundsSQL.SQL_TYPE );\n      st.execute();\n\n      Map&lt;String,Class&lt;?&gt;&gt; typeMap = con.getTypeMap();\n      typeMap.put( BoundsSQL.SQL_TYPE, BoundsSQL.class );\n\n      BoundsSQL out = (BoundsSQL) st.getObject( 3 );\n\n      System.out.println( out.toString() );\n\n      st.close();\n    } catch (ClassNotFoundException | SQLException ex) {\n      System.out.println( ex.getMessage() );\n      ex.printStackTrace();\n    } finally {\n      try{\n        if ( con != null )\n          con.close();\n      }\n      catch( SQLException e )\n      {\n\n      }\n    }\n  }\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>Start:    2019-01-01 00:00:00.0\nEnd:      2019-01-01 00:00:15.0\nDuration: 15\nType:     1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660748937,"creation_date":1660748937,"answer_id":73390871,"question_id":54344166,"body_markdown":"If you&#39;re open to using a third party library, [jOOQ generates code for all of your PL/SQL packages, UDTs, procedures, functions][1], etc. to spare you the hassle of doing the binding manually.\r\n\r\nSo, in your case, you could call your procedure like this, using the generated stubs:\r\n\r\n```java\r\nBdTbStructRecord result = Routines.mergeTimeBounds(\r\n    configuration, // This contains your JDBC connection and other things\r\n    new BdTbStructRecord(start1, end1, time1, duration1),\r\n    new BdTbStructRecord(start2, end2, time2, duration2)\r\n);\r\n```\r\n\r\nThis does something similar to what the [accepted answer][3] does with JDBC directly, but:\r\n\r\n- You don&#39;t have to work with strings, everything type checks (and IDE auto completes)\r\n- You don&#39;t have to remember data types and parameter order\r\n- When you change the procedure in your database, and regenerate the code, then your client code stops compiling, so you&#39;ll notice the problem early on\r\n\r\nDisclaimer: I work for the company behind jOOQ.\r\n\r\n  [1]: https://blog.jooq.org/the-best-way-to-call-stored-procedures-from-java-with-jooq/\r\n  [3]: https://stackoverflow.com/a/54347047/521799","title":"Java - How to call an oracle procedure with custom types?","body":"<p>If you're open to using a third party library, <a href=\"https://blog.jooq.org/the-best-way-to-call-stored-procedures-from-java-with-jooq/\" rel=\"nofollow noreferrer\">jOOQ generates code for all of your PL/SQL packages, UDTs, procedures, functions</a>, etc. to spare you the hassle of doing the binding manually.</p>\n<p>So, in your case, you could call your procedure like this, using the generated stubs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BdTbStructRecord result = Routines.mergeTimeBounds(\n    configuration, // This contains your JDBC connection and other things\n    new BdTbStructRecord(start1, end1, time1, duration1),\n    new BdTbStructRecord(start2, end2, time2, duration2)\n);\n</code></pre>\n<p>This does something similar to what the <a href=\"https://stackoverflow.com/a/54347047/521799\">accepted answer</a> does with JDBC directly, but:</p>\n<ul>\n<li>You don't have to work with strings, everything type checks (and IDE auto completes)</li>\n<li>You don't have to remember data types and parameter order</li>\n<li>When you change the procedure in your database, and regenerate the code, then your client code stops compiling, so you'll notice the problem early on</li>\n</ul>\n<p>Disclaimer: I work for the company behind jOOQ.</p>\n"}],"owner":{"account_id":3992180,"reputation":1524,"user_id":3290745,"display_name":"Tristate"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9222,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54347047,"answer_count":3,"score":2,"last_activity_date":1660748937,"creation_date":1548324900,"question_id":54344166,"body_markdown":"I have a plsql procedure \r\n\r\n    PROCEDURE merge_time_bounds(s1_bd_t IN bd_tb_struct, s2_bd_t IN bd_tb_struct, r_bd_t OUT bd_tb_struct);\r\n\r\nAnd I try to call it inside of my Java Code. I did it already with other procedures where all parameters was of type VARCHAR, but here all params are &quot;bd_tb_struct&quot;\r\n\r\n    create or replace TYPE bd_tb_struct FORCE\r\n    AS\r\n    OBJECT\r\n    (\r\n    start_ts   TIMESTAMP (3) ,\r\n    end_ts     TIMESTAMP (3) ,\r\n    time_type  NUMBER (19) ,\r\n    duration   NUMBER (12) ) FINAL ;\r\n\r\nI also have a Java Class with this Comment. &quot;Class of the corresponding type in the database. (bd_tb_struct )&quot;\r\n\r\n    BoundsSqlType.java\r\n\r\nCan some one explain me how I can call my procedure?","title":"Java - How to call an oracle procedure with custom types?","body":"<p>I have a plsql procedure </p>\n\n<pre><code>PROCEDURE merge_time_bounds(s1_bd_t IN bd_tb_struct, s2_bd_t IN bd_tb_struct, r_bd_t OUT bd_tb_struct);\n</code></pre>\n\n<p>And I try to call it inside of my Java Code. I did it already with other procedures where all parameters was of type VARCHAR, but here all params are \"bd_tb_struct\"</p>\n\n<pre><code>create or replace TYPE bd_tb_struct FORCE\nAS\nOBJECT\n(\nstart_ts   TIMESTAMP (3) ,\nend_ts     TIMESTAMP (3) ,\ntime_type  NUMBER (19) ,\nduration   NUMBER (12) ) FINAL ;\n</code></pre>\n\n<p>I also have a Java Class with this Comment. \"Class of the corresponding type in the database. (bd_tb_struct )\"</p>\n\n<pre><code>BoundsSqlType.java\n</code></pre>\n\n<p>Can some one explain me how I can call my procedure?</p>\n"},{"tags":["java","mybatis","mybatis-generator"],"answers":[{"tags":[],"owner":{"account_id":9769259,"reputation":21,"user_id":7241738,"display_name":"gtBacteria"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660748643,"creation_date":1660573229,"answer_id":73362315,"question_id":53826182,"body_markdown":"No way to do this via extending PluginAdapter.\r\n\r\nYou can try to remove generated files manually if you run MBG from main().\r\n\r\nMBG generate files in `MyBatisGenerator#writeGeneratedXmlFile`, which is a private method, making it impossible to delegate through ByteBuddy.\r\n\r\n--------\r\nEdit: A tricky way to achieve this is to programmatically edit MBG parsed configuration instance, expand the wildcard and remove tables you wanna ignore\r\n\r\n```java\r\nprivate void expandWildcardTable() {\r\n    for (Context context : config.getContexts()) {\r\n        context.introspectTables(NULL_PROGRESS_CALLBACK, new ArrayList&lt;&gt;(), null);\r\n        Map&lt;String, TableConfiguration&gt; originalConfig = getTableConfigurations(context)\r\n                .stream().collect(Collectors.toMap(TableConfiguration::getTableName, item -&gt; item));\r\n        Map&lt;String, Pattern&gt; tableNamePattern = originalConfig.keySet()\r\n                .stream().collect(Collectors.toMap(\r\n                        item -&gt; item,\r\n                        item -&gt; Pattern.compile(item.replaceAll(&quot;%&quot;, &quot;.+&quot;)))\r\n                );\r\n        List&lt;TableConfiguration&gt; finalConfig = new ArrayList&lt;&gt;();\r\n        for (IntrospectedTable introspectedTable : context.getIntrospectedTables()) {\r\n            FullyQualifiedTable table = introspectedTable.getFullyQualifiedTable();\r\n            String tableName = table.getIntrospectedTableName();\r\n            for (Map.Entry&lt;String, Pattern&gt; entry: tableNamePattern.entrySet()) {\r\n                if (entry.getValue().matcher(tableName).matches()) {\r\n                    finalConfig.add(createTargetTableConfiguration(originalConfig.get(entry.getKey()), tableName, context));\r\n                }\r\n            }\r\n        }\r\n        getTableConfigurations(context).clear();\r\n        getTableConfigurations(context).addAll(finalConfig);\r\n    }\r\n}\r\n```","title":"How to ignore some tables in mybatis generator?","body":"<p>No way to do this via extending PluginAdapter.</p>\n<p>You can try to remove generated files manually if you run MBG from main().</p>\n<p>MBG generate files in <code>MyBatisGenerator#writeGeneratedXmlFile</code>, which is a private method, making it impossible to delegate through ByteBuddy.</p>\n<hr />\n<p>Edit: A tricky way to achieve this is to programmatically edit MBG parsed configuration instance, expand the wildcard and remove tables you wanna ignore</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void expandWildcardTable() {\n    for (Context context : config.getContexts()) {\n        context.introspectTables(NULL_PROGRESS_CALLBACK, new ArrayList&lt;&gt;(), null);\n        Map&lt;String, TableConfiguration&gt; originalConfig = getTableConfigurations(context)\n                .stream().collect(Collectors.toMap(TableConfiguration::getTableName, item -&gt; item));\n        Map&lt;String, Pattern&gt; tableNamePattern = originalConfig.keySet()\n                .stream().collect(Collectors.toMap(\n                        item -&gt; item,\n                        item -&gt; Pattern.compile(item.replaceAll(&quot;%&quot;, &quot;.+&quot;)))\n                );\n        List&lt;TableConfiguration&gt; finalConfig = new ArrayList&lt;&gt;();\n        for (IntrospectedTable introspectedTable : context.getIntrospectedTables()) {\n            FullyQualifiedTable table = introspectedTable.getFullyQualifiedTable();\n            String tableName = table.getIntrospectedTableName();\n            for (Map.Entry&lt;String, Pattern&gt; entry: tableNamePattern.entrySet()) {\n                if (entry.getValue().matcher(tableName).matches()) {\n                    finalConfig.add(createTargetTableConfiguration(originalConfig.get(entry.getKey()), tableName, context));\n                }\n            }\n        }\n        getTableConfigurations(context).clear();\n        getTableConfigurations(context).addAll(finalConfig);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1716961,"reputation":9711,"user_id":1573835,"accept_rate":49,"display_name":"Zaw Than oo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":569,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660748643,"creation_date":1545105424,"question_id":53826182,"body_markdown":"I did not see any information to ignore some table in [mybatis generator][1].\r\n\r\nTo generator all tables:\r\n\r\n\t&lt;table schema=&quot;public&quot; tableName=&quot;%&quot; /&gt;\r\n\t\r\nTo generator specific table:\r\n\r\n\t&lt;table schema=&quot;public&quot; tableName=&quot;MY_TALBE&quot; /&gt;\t\r\n\t\r\nIs there way to generate some tables? I need to ignore some tables in generation process as below.\r\n\r\n**Example**: \t\r\n\r\n\t&lt;table schema=&quot;public&quot; tableName=&quot;%&quot; &gt;\t\r\n\t\t&lt;ignore-table&gt;AAA&lt;/ignore-table&gt;\r\n\t\t&lt;ignore-table&gt;BBB&lt;/ignore-table&gt;\r\n\t&lt;/table&gt;\r\n\t\r\n\r\n\r\n  [1]: http://www.mybatis.org/generator/configreference/table.html","title":"How to ignore some tables in mybatis generator?","body":"<p>I did not see any information to ignore some table in <a href=\"http://www.mybatis.org/generator/configreference/table.html\" rel=\"nofollow noreferrer\">mybatis generator</a>.</p>\n\n<p>To generator all tables:</p>\n\n<pre><code>&lt;table schema=\"public\" tableName=\"%\" /&gt;\n</code></pre>\n\n<p>To generator specific table:</p>\n\n<pre><code>&lt;table schema=\"public\" tableName=\"MY_TALBE\" /&gt;  \n</code></pre>\n\n<p>Is there way to generate some tables? I need to ignore some tables in generation process as below.</p>\n\n<p><strong>Example</strong>:    </p>\n\n<pre><code>&lt;table schema=\"public\" tableName=\"%\" &gt;  \n    &lt;ignore-table&gt;AAA&lt;/ignore-table&gt;\n    &lt;ignore-table&gt;BBB&lt;/ignore-table&gt;\n&lt;/table&gt;\n</code></pre>\n"},{"tags":["java","stored-procedures"],"answers":[{"tags":[],"owner":{"account_id":1136217,"reputation":14336,"user_id":1121249,"accept_rate":86,"display_name":"rkosegi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510214271,"creation_date":1510214271,"answer_id":47196676,"question_id":47196570,"body_markdown":"**TL;DR** \r\n\r\nYou did not call [ResultSet#next()][1]\r\n\r\n**Reason**\r\n\r\nFrom linked docs:\r\n\r\n&gt; A ResultSet cursor is initially positioned before the first row; the\r\n&gt; first call to the method next makes the first row the current row; the\r\n&gt; second call makes the second row the current row, and so on.\r\n\r\n**Fix**\r\n\r\nYour code should look like this:\r\n\r\n\r\n    stmt.registerOutParameter(4, java.sql.Types.INTEGER);\r\n    resultSet = stmt.executeQuery();\r\n    if(resultSet.next()) {\r\n        System.out.println (&quot;invoice id =&quot;+resultSet.getInt(4));\r\n    } else {\r\n        //this should not happen\r\n    }\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#next()\r\n","title":"java get stored procedure response","body":"<p><strong>TL;DR</strong> </p>\n\n<p>You did not call <a href=\"https://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#next()\" rel=\"nofollow noreferrer\">ResultSet#next()</a></p>\n\n<p><strong>Reason</strong></p>\n\n<p>From linked docs:</p>\n\n<blockquote>\n  <p>A ResultSet cursor is initially positioned before the first row; the\n  first call to the method next makes the first row the current row; the\n  second call makes the second row the current row, and so on.</p>\n</blockquote>\n\n<p><strong>Fix</strong></p>\n\n<p>Your code should look like this:</p>\n\n<pre><code>stmt.registerOutParameter(4, java.sql.Types.INTEGER);\nresultSet = stmt.executeQuery();\nif(resultSet.next()) {\n    System.out.println (\"invoice id =\"+resultSet.getInt(4));\n} else {\n    //this should not happen\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9428979,"reputation":622,"user_id":7013109,"accept_rate":86,"display_name":"RMagen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1510218039,"creation_date":1510218039,"answer_id":47197641,"question_id":47196570,"body_markdown":"ok - just for documentation in case some else needs it...  this is the SP it has a function \r\n\r\n    CREATE OR REPLACE PACKAGE APPS.XX01_CPC_AP_PKG\r\n    AS\r\n    \r\n    PROCEDURE XX01_CREATE_INVOICE (P_HF_CODE IN VARCHAR2,\r\n                                   P_BATCH_ID IN VARCHAR2,\r\n                                   P_AMOUNT IN NUMBER,\r\n                                   x_invoice_id OUT NUMBER/*,\r\n                                   x_error_code OUT VARCHAR2,\r\n                                   x_error_msg  OUT VARCHAR2,\r\n                                   x_err_comments OUT VARCHAR2,\r\n                                   x_code OUT NUMBER,\r\n                                   x_source OUT VARCHAR2*/);\r\n                                   \r\n    FUNCTION XX01_CREATE_INVOICE_F (P_HF_CODE IN VARCHAR2,\r\n                                   P_BATCH_ID IN VARCHAR2,\r\n                                   P_AMOUNT IN NUMBER) RETURN NUMBER;\r\n\r\nso originaly i called the function - it didn&#39;t work - i change the code to the following code and it works \r\n\r\n    String spCallRequest = &quot;BEGIN  apps.xx01_cpc_ap_pkg.xx01_create_invoice(?, ?, ?,? ); END ; &quot;;\r\n\tstmt = oraAppUtils.connection.prepareCall(spCallRequest);\r\n\tstmt.setString(1,paymentRequest.healthFacilityCode);\r\n\tstmt.setString(2,paymentRequest.batchId);\r\n\tstmt.setDouble(3,Double.parseDouble(paymentRequest.tariffAmount));\r\n\tstmt.registerOutParameter(4, java.sql.Types.INTEGER);\r\n\tstmt.execute();\r\n\tSystem.out.println (&quot;invoice id =&quot;+stmt.getInt(4));\r\n\r\n","title":"java get stored procedure response","body":"<p>ok - just for documentation in case some else needs it...  this is the SP it has a function </p>\n\n<pre><code>CREATE OR REPLACE PACKAGE APPS.XX01_CPC_AP_PKG\nAS\n\nPROCEDURE XX01_CREATE_INVOICE (P_HF_CODE IN VARCHAR2,\n                               P_BATCH_ID IN VARCHAR2,\n                               P_AMOUNT IN NUMBER,\n                               x_invoice_id OUT NUMBER/*,\n                               x_error_code OUT VARCHAR2,\n                               x_error_msg  OUT VARCHAR2,\n                               x_err_comments OUT VARCHAR2,\n                               x_code OUT NUMBER,\n                               x_source OUT VARCHAR2*/);\n\nFUNCTION XX01_CREATE_INVOICE_F (P_HF_CODE IN VARCHAR2,\n                               P_BATCH_ID IN VARCHAR2,\n                               P_AMOUNT IN NUMBER) RETURN NUMBER;\n</code></pre>\n\n<p>so originaly i called the function - it didn't work - i change the code to the following code and it works </p>\n\n<pre><code>String spCallRequest = \"BEGIN  apps.xx01_cpc_ap_pkg.xx01_create_invoice(?, ?, ?,? ); END ; \";\nstmt = oraAppUtils.connection.prepareCall(spCallRequest);\nstmt.setString(1,paymentRequest.healthFacilityCode);\nstmt.setString(2,paymentRequest.batchId);\nstmt.setDouble(3,Double.parseDouble(paymentRequest.tariffAmount));\nstmt.registerOutParameter(4, java.sql.Types.INTEGER);\nstmt.execute();\nSystem.out.println (\"invoice id =\"+stmt.getInt(4));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660748531,"creation_date":1660748531,"answer_id":73390774,"question_id":47196570,"body_markdown":"Your question didn&#39;t explicitly mention JDBC as the API that you *must* use, so perhaps, you&#39;re open to third party utilities that work on top of JDBC? For example, [jOOQ][1]&#39;s [code generator can be used to generate stubs for all of your stored procedures][2]. In your case, you could simply call the stub like this:\r\n\r\n```java\r\nint result = Xx01CpcApPkg.xx01CreateInvoiceF(\r\n    configuration, // This object contains your JDBC Connection\r\n    paymentRequest.healthFacilityCode,\r\n    paymentRequest.batchId,\r\n    Double.parseDouble(paymentRequest.tariffAmount)\r\n);\r\n```\r\n\r\nThese objects are generated by jOOQ:\r\n\r\n- `Xx01CpcApPkg`: A class representing your PL/SQL package\r\n- `xx01CreateInvoiceF()`: A method representing your stored function\r\n\r\nBehind the scenes, this does exactly what the [accepted answer][3] does, but:\r\n\r\n- You don&#39;t have to work with strings\r\n- You don&#39;t have to remember data types and parameter order\r\n- When you change the procedure in your database, and regenerate the code, then your client code stops compiling, so you&#39;ll notice the problem early on\r\n\r\nDisclaimer: I work for the company behind jOOQ.\r\n\r\n\r\n  [1]: https://www.jooq.org\r\n  [2]: https://blog.jooq.org/the-best-way-to-call-stored-procedures-from-java-with-jooq/\r\n  [3]: https://stackoverflow.com/a/47197641/521799","title":"java get stored procedure response","body":"<p>Your question didn't explicitly mention JDBC as the API that you <em>must</em> use, so perhaps, you're open to third party utilities that work on top of JDBC? For example, <a href=\"https://www.jooq.org\" rel=\"nofollow noreferrer\">jOOQ</a>'s <a href=\"https://blog.jooq.org/the-best-way-to-call-stored-procedures-from-java-with-jooq/\" rel=\"nofollow noreferrer\">code generator can be used to generate stubs for all of your stored procedures</a>. In your case, you could simply call the stub like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int result = Xx01CpcApPkg.xx01CreateInvoiceF(\n    configuration, // This object contains your JDBC Connection\n    paymentRequest.healthFacilityCode,\n    paymentRequest.batchId,\n    Double.parseDouble(paymentRequest.tariffAmount)\n);\n</code></pre>\n<p>These objects are generated by jOOQ:</p>\n<ul>\n<li><code>Xx01CpcApPkg</code>: A class representing your PL/SQL package</li>\n<li><code>xx01CreateInvoiceF()</code>: A method representing your stored function</li>\n</ul>\n<p>Behind the scenes, this does exactly what the <a href=\"https://stackoverflow.com/a/47197641/521799\">accepted answer</a> does, but:</p>\n<ul>\n<li>You don't have to work with strings</li>\n<li>You don't have to remember data types and parameter order</li>\n<li>When you change the procedure in your database, and regenerate the code, then your client code stops compiling, so you'll notice the problem early on</li>\n</ul>\n<p>Disclaimer: I work for the company behind jOOQ.</p>\n"}],"owner":{"account_id":9428979,"reputation":622,"user_id":7013109,"accept_rate":86,"display_name":"RMagen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1288,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":47197641,"answer_count":3,"score":1,"last_activity_date":1660748531,"creation_date":1510213861,"question_id":47196570,"body_markdown":"how do i get the Store procedure response in java  ? \r\nwhen i run this in SQL i get a response \r\n\r\n    DECLARE\r\n    result NUMBER;\r\n    begin\r\n    \r\n      result := apps.xx01_cpc_ap_pkg.xx01_create_invoice_f(8309, 4795, 146.00);\r\n      dbms_output.put_line(result);\r\n    end;\r\n\r\n\r\nthis is my java code \r\ni tried many option - but i keep failing on how to fetch the  response \r\nin this part `resultSet.getInt(4))`\r\n\r\n    CallableStatement stmt = null;\r\n    String spCallRequest = &quot;{? = call apps.xx01_cpc_ap_pkg.xx01_create_invoice_f(?, ?, ?  )}&quot;;\r\n    stmt = oraAppUtils.connection.prepareCall(spCallRequest);\r\n    stmt.setString(1,paymentRequest.healthFacilityCode);\r\n    stmt.setString(2,paymentRequest.batchId);\t\t\t\t\r\n    stmt.setDouble(3,Double.parseDouble(paymentRequest.tariffAmount));\r\n    stmt.registerOutParameter(4, java.sql.Types.INTEGER);\r\n    resultSet = stmt.executeQuery();\r\n    System.out.println (&quot;invoice id =&quot;+resultSet.getInt(4));\r\n\r\n\r\n","title":"java get stored procedure response","body":"<p>how do i get the Store procedure response in java  ? \nwhen i run this in SQL i get a response </p>\n\n<pre><code>DECLARE\nresult NUMBER;\nbegin\n\n  result := apps.xx01_cpc_ap_pkg.xx01_create_invoice_f(8309, 4795, 146.00);\n  dbms_output.put_line(result);\nend;\n</code></pre>\n\n<p>this is my java code \ni tried many option - but i keep failing on how to fetch the  response \nin this part <code>resultSet.getInt(4))</code></p>\n\n<pre><code>CallableStatement stmt = null;\nString spCallRequest = \"{? = call apps.xx01_cpc_ap_pkg.xx01_create_invoice_f(?, ?, ?  )}\";\nstmt = oraAppUtils.connection.prepareCall(spCallRequest);\nstmt.setString(1,paymentRequest.healthFacilityCode);\nstmt.setString(2,paymentRequest.batchId);               \nstmt.setDouble(3,Double.parseDouble(paymentRequest.tariffAmount));\nstmt.registerOutParameter(4, java.sql.Types.INTEGER);\nresultSet = stmt.executeQuery();\nSystem.out.println (\"invoice id =\"+resultSet.getInt(4));\n</code></pre>\n"},{"tags":["java","intellij-idea","migration","option-type","java-11"],"comments":[{"owner":{"account_id":22101947,"reputation":397,"user_id":16358266,"display_name":"user16358266"},"score":2,"creation_date":1660748463,"post_id":73390681,"comment_id":129606779,"body_markdown":"Have a look at https://docs.openrewrite.org/ it might help you with writing some custom transformation.","body":"Have a look at <a href=\"https://docs.openrewrite.org/\" rel=\"nofollow noreferrer\">docs.openrewrite.org</a> it might help you with writing some custom transformation."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1660751061,"post_id":73390681,"comment_id":129607977,"body_markdown":"I havent used the replace in files feature of Intellij IDEA much recently. Cant it accept a regular expression? Something like `\\.get\\w+\\(\\)` to find calls to getters. Then replace with the same plus whatever you want to append.","body":"I havent used the replace in files feature of Intellij IDEA much recently. Cant it accept a regular expression? Something like <code>\\.get\\w+\\(\\)</code> to find calls to getters. Then replace with the same plus whatever you want to append."},{"owner":{"account_id":41366,"reputation":93989,"user_id":120163,"accept_rate":59,"display_name":"Ira Baxter"},"score":0,"creation_date":1660754386,"post_id":73390681,"comment_id":129609233,"body_markdown":"Regex won&#39;t cut it.  You need a transform engine that can add your patch, but ONLY if the getter invoked is returning an Optional type.   That means the transform tool has to build symbol tables that the rewrite rule can inspect.","body":"Regex won&#39;t cut it.  You need a transform engine that can add your patch, but ONLY if the getter invoked is returning an Optional type.   That means the transform tool has to build symbol tables that the rewrite rule can inspect."},{"owner":{"account_id":24517308,"reputation":401,"user_id":18430882,"display_name":"quickfix"},"score":1,"creation_date":1660821320,"post_id":73390681,"comment_id":129625991,"body_markdown":"you can look into IDEA&#39;s structural search and replacement https://www.jetbrains.com/help/idea/structural-search-and-replace.html","body":"you can look into IDEA&#39;s structural search and replacement <a href=\"https://www.jetbrains.com/help/idea/structural-search-and-replace.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/structural-search-and-replace.html</a>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1661180699,"post_id":73390681,"comment_id":129704786,"body_markdown":"What would work with almost every IDE: 1) create a new method returning `Optional` (with a different name) 2) change the old method to delegate to the new method and call `orElse(null)` afterwards 3) Tell the IDE to inline the old method to all callers 4) Rename the new method to have the old methods name. After that, you have code with exactly the same behavior of the old, using `null` for absent values but with an `Optional` based API. Then, you can start changing the callers manually to use `Optional` in a better way (which may take some time but can be done parallel to other things).","body":"What would work with almost every IDE: 1) create a new method returning <code>Optional</code> (with a different name) 2) change the old method to delegate to the new method and call <code>orElse(null)</code> afterwards 3) Tell the IDE to inline the old method to all callers 4) Rename the new method to have the old methods name. After that, you have code with exactly the same behavior of the old, using <code>null</code> for absent values but with an <code>Optional</code> based API. Then, you can start changing the callers manually to use <code>Optional</code> in a better way (which may take some time but can be done parallel to other things)."}],"owner":{"account_id":15387471,"reputation":1,"user_id":11101190,"display_name":"ProbabylClem"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660748163,"creation_date":1660748163,"question_id":73390681,"body_markdown":"I work on a quite large Java codebase in Java 11.  \r\nThe database we work with as a lot of nullable fields so we have to do a lot of null checking by hand, and a lot of times we don&#39;t do it properly so we end up having a lot of NPEs.  \r\nTo avoid this, we wanted to use the Optional type as return value for nullable fields getters.  \r\nThis does work well and it makes the code a lot more explicit.  \r\nHowever, now we have to change every line of code where we call one of theses getters to add `.get()` or `.orElse(null)`.  \r\nI just spend 5 hours trying to do it by hand, but I updated only a fraction of the code base...  \r\nHow would you proceed to do this migration? Any tools/technique?\r\n\r\nI use IntelliJ IDEA Ultimate fyi.\r\n\r\nPs: I know that using `.get()` or `.orElse(null)` is pointless, but it&#39;s just a first step, that would allow us to write new code cleaner.\r\n\r\nTLDR : How would you add `.get()` to every method that return an Optional type in a large codebase ?\r\n\r\nThank you for your help","title":"Migrating large Java codebase to using Optional","body":"<p>I work on a quite large Java codebase in Java 11.<br />\nThe database we work with as a lot of nullable fields so we have to do a lot of null checking by hand, and a lot of times we don't do it properly so we end up having a lot of NPEs.<br />\nTo avoid this, we wanted to use the Optional type as return value for nullable fields getters.<br />\nThis does work well and it makes the code a lot more explicit.<br />\nHowever, now we have to change every line of code where we call one of theses getters to add <code>.get()</code> or <code>.orElse(null)</code>.<br />\nI just spend 5 hours trying to do it by hand, but I updated only a fraction of the code base...<br />\nHow would you proceed to do this migration? Any tools/technique?</p>\n<p>I use IntelliJ IDEA Ultimate fyi.</p>\n<p>Ps: I know that using <code>.get()</code> or <code>.orElse(null)</code> is pointless, but it's just a first step, that would allow us to write new code cleaner.</p>\n<p>TLDR : How would you add <code>.get()</code> to every method that return an Optional type in a large codebase ?</p>\n<p>Thank you for your help</p>\n"},{"tags":["java",".net","nuget","compatibility"],"answers":[{"tags":[],"owner":{"account_id":2031670,"reputation":122,"user_id":1815199,"display_name":"Krystian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660748029,"creation_date":1660748029,"answer_id":73390644,"question_id":71863806,"body_markdown":"Nuget is a package format that is used in .NET. Not in Java. Java has Maven for that.\r\nSo there is no simple way (or any way I could recommend) to use the code easily in Java.\r\n\r\nBut if you really need to use the methods you have in the package, you can try to do the following:\r\n1. Compile the code that the package contains, so that you have .dll file\r\n2. Try to make use of the compiled dll in Java. I don&#39;t know much Java but it seems this is already answered in Stack Overflow: https://stackoverflow.com/questions/25454697/how-to-call-a-method-in-dll-in-a-java-program\r\n\r\nBasically you should be able to call the methods defined in your DLL. Similar thing you can do in .NET. It is possible to take a dll, and call it&#39;s methods from .NET knowing the method signature. It is called [Interoperability][1]\r\n\r\nAlso please note that the nuget package is a zip repository in fact. You can open it using any zip tool, you can extract it and compile the code with dotnet command.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/interop/interoperability-overview","title":"Installing and accessing classes within a NuGet package from a Java application","body":"<p>Nuget is a package format that is used in .NET. Not in Java. Java has Maven for that.\nSo there is no simple way (or any way I could recommend) to use the code easily in Java.</p>\n<p>But if you really need to use the methods you have in the package, you can try to do the following:</p>\n<ol>\n<li>Compile the code that the package contains, so that you have .dll file</li>\n<li>Try to make use of the compiled dll in Java. I don't know much Java but it seems this is already answered in Stack Overflow: <a href=\"https://stackoverflow.com/questions/25454697/how-to-call-a-method-in-dll-in-a-java-program\">How to call a method in DLL in a Java program</a></li>\n</ol>\n<p>Basically you should be able to call the methods defined in your DLL. Similar thing you can do in .NET. It is possible to take a dll, and call it's methods from .NET knowing the method signature. It is called <a href=\"https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/interop/interoperability-overview\" rel=\"nofollow noreferrer\">Interoperability</a></p>\n<p>Also please note that the nuget package is a zip repository in fact. You can open it using any zip tool, you can extract it and compile the code with dotnet command.</p>\n"}],"owner":{"account_id":2225769,"reputation":490,"user_id":1964586,"display_name":"zinc1oxide"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660748029,"creation_date":1649883691,"question_id":71863806,"body_markdown":"I have created a NuGet package (.Net standard 2.0 and .Net Framework 4.8 - compatibility) that I would like to know if it is possible to access from a Java application.","title":"Installing and accessing classes within a NuGet package from a Java application","body":"<p>I have created a NuGet package (.Net standard 2.0 and .Net Framework 4.8 - compatibility) that I would like to know if it is possible to access from a Java application.</p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1660736618,"post_id":73384908,"comment_id":129601993,"body_markdown":"If `&lt;tag...&gt;  &lt;/tag&gt;` uses its inner XML, any whitespace must be maintained and `&lt;tag .../&gt;` is not possible. In your case you could probably regex replace the whitespace.","body":"If <code>&lt;tag...&gt;  &lt;&#47;tag&gt;</code> uses its inner XML, any whitespace must be maintained and <code>&lt;tag ...&#47;&gt;</code> is not possible. In your case you could probably regex replace the whitespace."}],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660735796,"creation_date":1660735796,"answer_id":73387697,"question_id":73384908,"body_markdown":"Every XML indenter/formatter has its own way of doing this and your only options are (a) to try them all until you find one that matches your personal preferences, or (b) to write your own.\r\n\r\nSaxon&#39;s serializer (caveat: my product) is probably more customizable than most. But the more advanced features only come in the commercial editions.","title":"How to prettify XML with attributes starting in a newline and end tags correction?","body":"<p>Every XML indenter/formatter has its own way of doing this and your only options are (a) to try them all until you find one that matches your personal preferences, or (b) to write your own.</p>\n<p>Saxon's serializer (caveat: my product) is probably more customizable than most. But the more advanced features only come in the commercial editions.</p>\n"},{"tags":[],"owner":{"account_id":26048068,"reputation":21,"user_id":19751806,"display_name":"TenderDen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660747924,"creation_date":1660746967,"answer_id":73390364,"question_id":73384908,"body_markdown":"So here&#39;s what I did:\r\nI&#39;ve written XML prettifier for my XML outputter based on a regex replacing.\r\nHere&#39;s the code (uses the Apache Commons IO to write string into file):\r\n```\r\n    private static void prettyPrint(File in) throws Throwable {\r\n        String file = new String(Files.readAllBytes(Paths.get(in.toString())));\r\n        Pattern p = Pattern.compile(&quot;\\\\s+&gt;\\\\s+&lt;/.+&gt;&quot;);\r\n        Matcher m = p.matcher(file);\r\n        StringBuffer sb = new StringBuffer();\r\n        while (m.find()) {\r\n            m.appendReplacement(sb, &quot; /&gt;&quot;);\r\n        }\r\n        m.appendTail(sb);\r\n        FileUtils.writeStringToFile(in, sb.toString());\r\n        prettyPrint2(in);\r\n    }\r\n    \r\n    private static void prettyPrint2(File in) throws Throwable {\r\n        String file = new String(Files.readAllBytes(Paths.get(in.toString())));\r\n        Pattern p = Pattern.compile(&quot;\\\\s+&gt;&quot;);\r\n        Matcher m = p.matcher(file);\r\n        StringBuffer sb = new StringBuffer();\r\n        while (m.find()) {\r\n            m.appendReplacement(sb, &quot;&gt;&quot;);\r\n        }\r\n        m.appendTail(sb);\r\n        FileUtils.writeStringToFile(in, sb.toString());\r\n    }\r\n```\r\nNotice the ``` \\\\s+&gt;\\\\s+&lt;/.+&gt; ```\r\npattern. It&#39;ll convert this\r\n```\r\n    &gt;\r\n&lt;/foo&gt;\r\n```\r\nto a simplified end tag: ``` /&gt; ```\r\nlike this:\r\n```\r\n&lt;foo\r\n    bar=&quot;value1&quot;\r\n    baz=&quot;value2&quot; /&gt;\r\n```\r\nThe ``` \\\\s+&gt; ``` pattern corrects for no reason floating ```&gt;``` here:\r\n```\r\n&lt;foo1\r\n    bar=&quot;value1&quot;\r\n    baz=&quot;value2&quot;\r\n    &gt;\r\n    &lt;foo2\r\n        bar=&quot;value1&quot;\r\n        baz=&quot;value2&quot;\r\n        &gt;\r\n    &lt;/foo2&gt;\r\n&lt;/foo1&gt;\r\n```\r\nto his home:\r\n```\r\n&lt;foo1\r\n    bar=&quot;value1&quot;\r\n    baz=&quot;value2&quot;&gt;\r\n    &lt;foo2\r\n        bar=&quot;value1&quot;\r\n        baz=&quot;value2&quot;&gt;\r\n    &lt;/foo2&gt;\r\n&lt;/foo1&gt;\r\n```\r\nWith both regex combined, i get my desired result:\r\n```\r\n&lt;foo1\r\n    bar=&quot;value1&quot;\r\n    baz=&quot;value2&quot;&gt;\r\n    &lt;foo2\r\n        bar=&quot;value1&quot;\r\n        baz=&quot;value2&quot; /&gt;\r\n&lt;/foo1&gt;\r\n```\r\nWorks like a charm. Also thanks to everybody who tried to help me. Glad to hear your opinions.","title":"How to prettify XML with attributes starting in a newline and end tags correction?","body":"<p>So here's what I did:\nI've written XML prettifier for my XML outputter based on a regex replacing.\nHere's the code (uses the Apache Commons IO to write string into file):</p>\n<pre><code>    private static void prettyPrint(File in) throws Throwable {\n        String file = new String(Files.readAllBytes(Paths.get(in.toString())));\n        Pattern p = Pattern.compile(&quot;\\\\s+&gt;\\\\s+&lt;/.+&gt;&quot;);\n        Matcher m = p.matcher(file);\n        StringBuffer sb = new StringBuffer();\n        while (m.find()) {\n            m.appendReplacement(sb, &quot; /&gt;&quot;);\n        }\n        m.appendTail(sb);\n        FileUtils.writeStringToFile(in, sb.toString());\n        prettyPrint2(in);\n    }\n    \n    private static void prettyPrint2(File in) throws Throwable {\n        String file = new String(Files.readAllBytes(Paths.get(in.toString())));\n        Pattern p = Pattern.compile(&quot;\\\\s+&gt;&quot;);\n        Matcher m = p.matcher(file);\n        StringBuffer sb = new StringBuffer();\n        while (m.find()) {\n            m.appendReplacement(sb, &quot;&gt;&quot;);\n        }\n        m.appendTail(sb);\n        FileUtils.writeStringToFile(in, sb.toString());\n    }\n</code></pre>\n<p>Notice the <code>\\\\s+&gt;\\\\s+&lt;/.+&gt;</code>\npattern. It'll convert this</p>\n<pre><code>    &gt;\n&lt;/foo&gt;\n</code></pre>\n<p>to a simplified end tag: <code>/&gt;</code>\nlike this:</p>\n<pre><code>&lt;foo\n    bar=&quot;value1&quot;\n    baz=&quot;value2&quot; /&gt;\n</code></pre>\n<p>The <code>\\\\s+&gt;</code> pattern corrects for no reason floating <code>&gt;</code> here:</p>\n<pre><code>&lt;foo1\n    bar=&quot;value1&quot;\n    baz=&quot;value2&quot;\n    &gt;\n    &lt;foo2\n        bar=&quot;value1&quot;\n        baz=&quot;value2&quot;\n        &gt;\n    &lt;/foo2&gt;\n&lt;/foo1&gt;\n</code></pre>\n<p>to his home:</p>\n<pre><code>&lt;foo1\n    bar=&quot;value1&quot;\n    baz=&quot;value2&quot;&gt;\n    &lt;foo2\n        bar=&quot;value1&quot;\n        baz=&quot;value2&quot;&gt;\n    &lt;/foo2&gt;\n&lt;/foo1&gt;\n</code></pre>\n<p>With both regex combined, i get my desired result:</p>\n<pre><code>&lt;foo1\n    bar=&quot;value1&quot;\n    baz=&quot;value2&quot;&gt;\n    &lt;foo2\n        bar=&quot;value1&quot;\n        baz=&quot;value2&quot; /&gt;\n&lt;/foo1&gt;\n</code></pre>\n<p>Works like a charm. Also thanks to everybody who tried to help me. Glad to hear your opinions.</p>\n"}],"owner":{"account_id":26048068,"reputation":21,"user_id":19751806,"display_name":"TenderDen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1660747924,"creation_date":1660723460,"question_id":73384908,"body_markdown":"So here&#39;s my XML output:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:versionCode=&quot;1&quot;\r\n    android:versionName=&quot;1.0&quot;\r\n    android:compileSdkVersion=&quot;23&quot;\r\n    android:compileSdkVersionCodename=&quot;6.0-2438415&quot;\r\n    package=&quot;com.mycompany.myapp&quot;\r\n    platformBuildVersionCode=&quot;23&quot;\r\n    platformBuildVersionName=&quot;6.0-2438415&quot;\r\n    &gt;\r\n    &lt;uses-sdk\r\n        android:minSdkVersion=&quot;16&quot;\r\n        android:targetSdkVersion=&quot;28&quot;\r\n        &gt;\r\n    &lt;/uses-sdk&gt;\r\n    &lt;!-- Read the contents of your shared storage --&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;\r\n        &gt;\r\n    &lt;/uses-permission&gt;\r\n    &lt;!-- Modify or delete the contents of your shared storage --&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;\r\n        &gt;\r\n    &lt;/uses-permission&gt;\r\n    &lt;application\r\n        android:theme=&quot;@7F1001D3&quot;\r\n        android:label=&quot;@7F0F001B&quot;\r\n        android:icon=&quot;@7F0D0000&quot;\r\n        android:allowBackup=&quot;false&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:roundIcon=&quot;@7F0D0001&quot;\r\n        android:appComponentFactory=&quot;androidx.core.app.CoreComponentFactory&quot;\r\n        &gt;\r\n        &lt;activity\r\n            android:name=&quot;com.mycompany.myapp.MainActivity&quot;\r\n            android:configChanges=&quot;screenSize|orientation&quot;\r\n            &gt;\r\n            &lt;intent-filter\r\n                &gt;\r\n                &lt;action\r\n                    android:name=&quot;android.intent.action.MAIN&quot;\r\n                    &gt;\r\n                &lt;/action&gt;\r\n                &lt;category\r\n                    android:name=&quot;android.intent.category.LAUNCHER&quot;\r\n                    &gt;\r\n                &lt;/category&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n```\r\nAs you can see, it&#39;s already indented, and each attribute inside tag starting in a newline, but it has weird end tags, such as:\r\n```\r\n&lt;tag\r\n    prefix:name=&quot;str&quot;\r\n    &gt;\r\n&lt;/tag&gt;\r\n```\r\nor:\r\n```\r\n&lt;tag\r\n    prefix:name=&quot;str1&quot;\r\n    prefix:name2=&quot;str2&quot;\r\n    &gt;\r\n&lt;/tag&gt;\r\n```\r\ninstead of:\r\n```\r\n&lt;tag prefix:name=&quot;str&quot; /&gt;\r\n```\r\nor:\r\n```\r\n&lt;tag\r\n    prefix:name=&quot;str1&quot;\r\n    prefix:name2=&quot;str2&quot; /&gt;\r\n```\r\nMy question is, how to prettify XML, with each attribute inside tag starting in a newline (except when there&#39;s only one attribute in tag), end tags correction and without comments omitting?\r\nHere you can see my desired output:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:versionCode=&quot;1&quot;\r\n    android:versionName=&quot;1.0&quot;\r\n    android:compileSdkVersion=&quot;23&quot;\r\n    android:compileSdkVersionCodename=&quot;6.0-2438415&quot;\r\n    package=&quot;com.mycompany.myapp&quot;\r\n    platformBuildVersionCode=&quot;23&quot;\r\n    platformBuildVersionName=&quot;6.0-2438415&quot;&gt;\r\n    &lt;uses-sdk\r\n        android:minSdkVersion=&quot;16&quot;\r\n        android:targetSdkVersion=&quot;28&quot; /&gt;\r\n    &lt;!-- Read the contents of your shared storage --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;!-- Modify or delete the contents of your shared storage --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;application\r\n        android:theme=&quot;@7F1001D3&quot;\r\n        android:label=&quot;@7F0F001B&quot;\r\n        android:icon=&quot;@7F0D0000&quot;\r\n        android:allowBackup=&quot;false&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:roundIcon=&quot;@7F0D0001&quot;\r\n        android:appComponentFactory=&quot;androidx.core.app.CoreComponentFactory&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;com.mycompany.myapp.MainActivity&quot;\r\n            android:configChanges=&quot;screenSize|orientation&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n```\r\nTried to use various prettifiers, such as Java&#39;s transformer, Apache Xerces&#39;s XML Serializer and etc.\r\n\r\nJava&#39;s transformer doesn&#39;t correct end tags. However, Apache Xerces corrects end tags, comments don&#39;t omit, but each attribute inside tag don&#39;t start in a newline.\r\n\r\nOr maybe I could try to correct end tags in string level if the output is already indented?\r\n\r\nXML is always outputted in the same format.","title":"How to prettify XML with attributes starting in a newline and end tags correction?","body":"<p>So here's my XML output:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:versionCode=&quot;1&quot;\n    android:versionName=&quot;1.0&quot;\n    android:compileSdkVersion=&quot;23&quot;\n    android:compileSdkVersionCodename=&quot;6.0-2438415&quot;\n    package=&quot;com.mycompany.myapp&quot;\n    platformBuildVersionCode=&quot;23&quot;\n    platformBuildVersionName=&quot;6.0-2438415&quot;\n    &gt;\n    &lt;uses-sdk\n        android:minSdkVersion=&quot;16&quot;\n        android:targetSdkVersion=&quot;28&quot;\n        &gt;\n    &lt;/uses-sdk&gt;\n    &lt;!-- Read the contents of your shared storage --&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;\n        &gt;\n    &lt;/uses-permission&gt;\n    &lt;!-- Modify or delete the contents of your shared storage --&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;\n        &gt;\n    &lt;/uses-permission&gt;\n    &lt;application\n        android:theme=&quot;@7F1001D3&quot;\n        android:label=&quot;@7F0F001B&quot;\n        android:icon=&quot;@7F0D0000&quot;\n        android:allowBackup=&quot;false&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:roundIcon=&quot;@7F0D0001&quot;\n        android:appComponentFactory=&quot;androidx.core.app.CoreComponentFactory&quot;\n        &gt;\n        &lt;activity\n            android:name=&quot;com.mycompany.myapp.MainActivity&quot;\n            android:configChanges=&quot;screenSize|orientation&quot;\n            &gt;\n            &lt;intent-filter\n                &gt;\n                &lt;action\n                    android:name=&quot;android.intent.action.MAIN&quot;\n                    &gt;\n                &lt;/action&gt;\n                &lt;category\n                    android:name=&quot;android.intent.category.LAUNCHER&quot;\n                    &gt;\n                &lt;/category&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>As you can see, it's already indented, and each attribute inside tag starting in a newline, but it has weird end tags, such as:</p>\n<pre><code>&lt;tag\n    prefix:name=&quot;str&quot;\n    &gt;\n&lt;/tag&gt;\n</code></pre>\n<p>or:</p>\n<pre><code>&lt;tag\n    prefix:name=&quot;str1&quot;\n    prefix:name2=&quot;str2&quot;\n    &gt;\n&lt;/tag&gt;\n</code></pre>\n<p>instead of:</p>\n<pre><code>&lt;tag prefix:name=&quot;str&quot; /&gt;\n</code></pre>\n<p>or:</p>\n<pre><code>&lt;tag\n    prefix:name=&quot;str1&quot;\n    prefix:name2=&quot;str2&quot; /&gt;\n</code></pre>\n<p>My question is, how to prettify XML, with each attribute inside tag starting in a newline (except when there's only one attribute in tag), end tags correction and without comments omitting?\nHere you can see my desired output:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:versionCode=&quot;1&quot;\n    android:versionName=&quot;1.0&quot;\n    android:compileSdkVersion=&quot;23&quot;\n    android:compileSdkVersionCodename=&quot;6.0-2438415&quot;\n    package=&quot;com.mycompany.myapp&quot;\n    platformBuildVersionCode=&quot;23&quot;\n    platformBuildVersionName=&quot;6.0-2438415&quot;&gt;\n    &lt;uses-sdk\n        android:minSdkVersion=&quot;16&quot;\n        android:targetSdkVersion=&quot;28&quot; /&gt;\n    &lt;!-- Read the contents of your shared storage --&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;!-- Modify or delete the contents of your shared storage --&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;application\n        android:theme=&quot;@7F1001D3&quot;\n        android:label=&quot;@7F0F001B&quot;\n        android:icon=&quot;@7F0D0000&quot;\n        android:allowBackup=&quot;false&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:roundIcon=&quot;@7F0D0001&quot;\n        android:appComponentFactory=&quot;androidx.core.app.CoreComponentFactory&quot;&gt;\n        &lt;activity\n            android:name=&quot;com.mycompany.myapp.MainActivity&quot;\n            android:configChanges=&quot;screenSize|orientation&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>Tried to use various prettifiers, such as Java's transformer, Apache Xerces's XML Serializer and etc.</p>\n<p>Java's transformer doesn't correct end tags. However, Apache Xerces corrects end tags, comments don't omit, but each attribute inside tag don't start in a newline.</p>\n<p>Or maybe I could try to correct end tags in string level if the output is already indented?</p>\n<p>XML is always outputted in the same format.</p>\n"},{"tags":["java","kotlin","glm-math"],"comments":[{"owner":{"account_id":2030,"reputation":50607,"user_id":2788,"accept_rate":69,"display_name":"Strelok"},"score":0,"creation_date":1604485486,"post_id":64677200,"comment_id":114359419,"body_markdown":"I think you need to use the `glm_.Java.glm` to access the global functions.","body":"I think you need to use the <code>glm_.Java.glm</code> to access the global functions."},{"owner":{"account_id":13938057,"reputation":138,"user_id":10064633,"display_name":"AliceTheCat"},"score":0,"creation_date":1604516943,"post_id":64677200,"comment_id":114373699,"body_markdown":"you are right. This works. Thanks!","body":"you are right. This works. Thanks!"}],"owner":{"account_id":13938057,"reputation":138,"user_id":10064633,"display_name":"AliceTheCat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660747693,"creation_date":1604481530,"question_id":64677200,"body_markdown":"Im trying to use the kotlin library [glm][1] in my java project. I want to use the method `translate` from interface [matrix_transform][2].\r\n\r\nCurrently im trying to call this function with \r\n`glm_.matrix_transform.DefaultImpls.translate()`. But i dont understand the first parameter. The paramter name is `$this`. What do i have to pass there? I tried to pass an instantiation of `glm_.matrix_transform.DefaultImpls` but it doesnt work. Where does the parameter `$this` come from anyway? If have a look at the interface there is no parameter `$this`. Am i using the kotlin library in the right way? The use of `glm_.matrix_transform.DefaultImpls` was just a wild guess from my side.\r\n\r\nThe [github readme page][1] tells me to use it like this (in kotlin):\r\n\r\n    ...\r\n    import glm_.glm\r\n\r\n    fun camera(translate: Float, rotate: Vec2): Mat4 {\r\n      ...\r\n      var view = glm.translate(Mat4(1.0f), Vec3(0.0f, 0.0f, -translate))\r\n      ...\r\n    return ...\r\n    }\r\n\r\nBut if i do so i get the message:\r\n\r\n&gt; Non-static &#39;tanslate(...)&#39; cannot be referenced from a static context\r\n\r\nIm calling function `translate` inside an object.\r\n\r\nthis is my my maven pom file:\r\n\r\n    &lt;repositories&gt;\r\n      &lt;repository&gt;\r\n      &lt;id&gt;jitpack.io&lt;/id&gt;\r\n      &lt;url&gt;https://jitpack.io&lt;/url&gt;\r\n      &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.github.kotlin-graphics&lt;/groupId&gt;\r\n      &lt;artifactId&gt;glm&lt;/artifactId&gt;\r\n      &lt;version&gt;v1.0.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n  [1]: https://github.com/kotlin-graphics/glm\r\n  [2]: https://github.com/kotlin-graphics/glm/blob/v1.0.1/src/main/kotlin/glm_/matrix_transform.kt","title":"How to access kotlin libray glm from java the right way?","body":"<p>Im trying to use the kotlin library <a href=\"https://github.com/kotlin-graphics/glm\" rel=\"nofollow noreferrer\">glm</a> in my java project. I want to use the method <code>translate</code> from interface <a href=\"https://github.com/kotlin-graphics/glm/blob/v1.0.1/src/main/kotlin/glm_/matrix_transform.kt\" rel=\"nofollow noreferrer\">matrix_transform</a>.</p>\n<p>Currently im trying to call this function with\n<code>glm_.matrix_transform.DefaultImpls.translate()</code>. But i dont understand the first parameter. The paramter name is <code>$this</code>. What do i have to pass there? I tried to pass an instantiation of <code>glm_.matrix_transform.DefaultImpls</code> but it doesnt work. Where does the parameter <code>$this</code> come from anyway? If have a look at the interface there is no parameter <code>$this</code>. Am i using the kotlin library in the right way? The use of <code>glm_.matrix_transform.DefaultImpls</code> was just a wild guess from my side.</p>\n<p>The <a href=\"https://github.com/kotlin-graphics/glm\" rel=\"nofollow noreferrer\">github readme page</a> tells me to use it like this (in kotlin):</p>\n<pre><code>...\nimport glm_.glm\n\nfun camera(translate: Float, rotate: Vec2): Mat4 {\n  ...\n  var view = glm.translate(Mat4(1.0f), Vec3(0.0f, 0.0f, -translate))\n  ...\nreturn ...\n}\n</code></pre>\n<p>But if i do so i get the message:</p>\n<blockquote>\n<p>Non-static 'tanslate(...)' cannot be referenced from a static context</p>\n</blockquote>\n<p>Im calling function <code>translate</code> inside an object.</p>\n<p>this is my my maven pom file:</p>\n<pre><code>&lt;repositories&gt;\n  &lt;repository&gt;\n  &lt;id&gt;jitpack.io&lt;/id&gt;\n  &lt;url&gt;https://jitpack.io&lt;/url&gt;\n  &lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.github.kotlin-graphics&lt;/groupId&gt;\n  &lt;artifactId&gt;glm&lt;/artifactId&gt;\n  &lt;version&gt;v1.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","hibernate","jdbc","pom.xml","sessionfactory"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1660742236,"post_id":73388931,"comment_id":129604214,"body_markdown":"You are confusing pom.xml with hibernate.cfg.xml. The first is used by maven to declare dependencies and other stuff related to the lifecycle of the application. The second one is the hibernate configuration","body":"You are confusing pom.xml with hibernate.cfg.xml. The first is used by maven to declare dependencies and other stuff related to the lifecycle of the application. The second one is the hibernate configuration"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1660742275,"post_id":73388931,"comment_id":129604233,"body_markdown":"Just for clarification: &quot;_My pom.xml is as follows_&quot; - What you are showing us in the question does not look like the contents of a **Maven** `pom.xml` file. It belongs in a **Hibernate** configuration file, which needs to be accessible to your application.","body":"Just for clarification: &quot;<i>My pom.xml is as follows</i>&quot; - What you are showing us in the question does not look like the contents of a <b>Maven</b> <code>pom.xml</code> file. It belongs in a <b>Hibernate</b> configuration file, which needs to be accessible to your application."},{"owner":{"account_id":19264549,"reputation":11,"user_id":14079751,"display_name":"Rishabh Talwar"},"score":0,"creation_date":1660743755,"post_id":73388931,"comment_id":129604827,"body_markdown":"Yeah i have edited it ,it was typo ,so I meant to say that it was my hibernate.cfg.xml file","body":"Yeah i have edited it ,it was typo ,so I meant to say that it was my hibernate.cfg.xml file"},{"owner":{"account_id":19264549,"reputation":11,"user_id":14079751,"display_name":"Rishabh Talwar"},"score":0,"creation_date":1660743771,"post_id":73388931,"comment_id":129604836,"body_markdown":"But it is giving me error","body":"But it is giving me error"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660747458,"creation_date":1660747458,"answer_id":73390475,"question_id":73388931,"body_markdown":"Well, you are not using this configuration file. See the line you posted:\r\n\r\n    SessionFactory factory=new Configuration().buildSessionFactory();\r\n\r\nIt should be\r\n\r\n    SessionFactory factory = new Configuration().configure(&quot;hibernate.cfg.xml&quot;)\r\n        .buildSessionFactory();","title":"&quot;The application must supply JDBC connections&quot; while doing simplehibernate","body":"<p>Well, you are not using this configuration file. See the line you posted:</p>\n<pre><code>SessionFactory factory=new Configuration().buildSessionFactory();\n</code></pre>\n<p>It should be</p>\n<pre><code>SessionFactory factory = new Configuration().configure(&quot;hibernate.cfg.xml&quot;)\n    .buildSessionFactory();\n</code></pre>\n"}],"owner":{"account_id":19264549,"reputation":11,"user_id":14079751,"display_name":"Rishabh Talwar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660747458,"creation_date":1660741232,"question_id":73388931,"body_markdown":"\r\n\r\nI am running simple hibernate program ,but it is giving me error  mention in the title\r\nMy hibernate.cfg.xml is as follows:-\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n\t&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n\t&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\t\r\n\t&lt;hibernate-configuration&gt;\r\n\t&lt;session-factory&gt;\r\n\t&lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/myhiber&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.connection.password&quot;&gt;rishabh123#&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n\t&lt;mapping class=&quot;com.tut.ProjectwithMaven.Student&quot;/&gt;\r\n\t&lt;/session-factory&gt;\r\n\t\r\n\t&lt;/hibernate-configuration&gt;\r\n```\r\n\r\n\r\nMy code is as follows:-\r\n```\r\npublic class App \r\n{\r\n    public static void main( String[] args )throws Exception\r\n    {\r\n        System.out.println( &quot;Hello World!&quot; );\r\n       // Configuration cfg=new Configuration();\r\n       \r\n\t\t\ttry {\r\n\t\t\t\tnew Configuration().configure(&quot;hibernate.cfg.xml&quot;);\r\n\t\t\t} catch (HibernateException e) {\r\n\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t  try\r\n\t\t\t\t  {\r\n\t\t\t\t\t  throw (Throwable)e;\r\n\t\t\t\t  }\r\n\t\t\t\t  catch(Throwable ex)\r\n\t\t\t\t  {\r\n\t\t\t\t\t  ex.printStackTrace();\r\n\t\t\t\t  }\r\n\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;AAge&quot;);\r\n\t\t\t\r\n\t\t\r\n        SessionFactory factory=new Configuration().buildSessionFactory();\r\n        Student st=new Student();\r\n        st.setId(101);\r\n        st.setName(&quot;Rishabh&quot;);\r\n        st.setCity(&quot;Bangalore&quot;);\r\n        Session session=factory.openSession();\r\n        session.beginTransaction();\r\n        session.save(st);\r\n        session.getTransaction().commit();\r\n        session.close();\r\n```\r\nPlease help in resolving this issue, i have checked pom.xml ,it seems to be right,but still giving same error again and again","title":"&quot;The application must supply JDBC connections&quot; while doing simplehibernate","body":"<p>I am running simple hibernate program ,but it is giving me error  mention in the title\nMy hibernate.cfg.xml is as follows:-</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n    &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n    &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n    \n    &lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n    &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n    &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/myhiber&lt;/property&gt;\n    &lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\n    &lt;property name=&quot;hibernate.connection.password&quot;&gt;rishabh123#&lt;/property&gt;\n    &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\n    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n    &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\n    &lt;mapping class=&quot;com.tut.ProjectwithMaven.Student&quot;/&gt;\n    &lt;/session-factory&gt;\n    \n    &lt;/hibernate-configuration&gt;\n</code></pre>\n<p>My code is as follows:-</p>\n<pre><code>public class App \n{\n    public static void main( String[] args )throws Exception\n    {\n        System.out.println( &quot;Hello World!&quot; );\n       // Configuration cfg=new Configuration();\n       \n            try {\n                new Configuration().configure(&quot;hibernate.cfg.xml&quot;);\n            } catch (HibernateException e) {\n                // TODO Auto-generated catch block\n                  try\n                  {\n                      throw (Throwable)e;\n                  }\n                  catch(Throwable ex)\n                  {\n                      ex.printStackTrace();\n                  }\n            }\n                System.out.println(&quot;AAge&quot;);\n            \n        \n        SessionFactory factory=new Configuration().buildSessionFactory();\n        Student st=new Student();\n        st.setId(101);\n        st.setName(&quot;Rishabh&quot;);\n        st.setCity(&quot;Bangalore&quot;);\n        Session session=factory.openSession();\n        session.beginTransaction();\n        session.save(st);\n        session.getTransaction().commit();\n        session.close();\n</code></pre>\n<p>Please help in resolving this issue, i have checked pom.xml ,it seems to be right,but still giving same error again and again</p>\n"},{"tags":["java","gradle","build.gradle"],"answers":[{"tags":[],"owner":{"account_id":927061,"reputation":13268,"user_id":957630,"display_name":"Mark Vieira"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1417628032,"creation_date":1417628032,"answer_id":27278048,"question_id":27275402,"body_markdown":"Two ways to do this. First, have the `testRuntime` configuration extend from `provided`.\r\n\r\n    configurations {\r\n        provided\r\n        testRuntime.extendsFrom(provided)\r\n    }\r\n\r\nSecond, you could add the `provided` configuration to the classpath of your `test` task.\r\n\r\n    test {\r\n        classpath += configurations.provided\r\n    }","title":"Add provided dependency to test classpath using Gradle","body":"<p>Two ways to do this. First, have the <code>testRuntime</code> configuration extend from <code>provided</code>.</p>\n\n<pre><code>configurations {\n    provided\n    testRuntime.extendsFrom(provided)\n}\n</code></pre>\n\n<p>Second, you could add the <code>provided</code> configuration to the classpath of your <code>test</code> task.</p>\n\n<pre><code>test {\n    classpath += configurations.provided\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1848418,"reputation":25883,"user_id":1675568,"accept_rate":79,"display_name":"tomrozb"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1417730292,"creation_date":1417726600,"answer_id":27303914,"question_id":27275402,"body_markdown":"Fixed with one additional line in `configurations`. Don&#39;t know if it&#39;s the best and a proper solution but works as intended.\r\n\r\n    configurations {\r\n        provided\r\n        testCompile.extendsFrom(provided)\r\n    }","title":"Add provided dependency to test classpath using Gradle","body":"<p>Fixed with one additional line in <code>configurations</code>. Don't know if it's the best and a proper solution but works as intended.</p>\n\n<pre><code>configurations {\n    provided\n    testCompile.extendsFrom(provided)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8201651,"reputation":1736,"user_id":6172826,"display_name":"seunggabi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660747363,"creation_date":1660747363,"answer_id":73390457,"question_id":27275402,"body_markdown":"### my case\r\n```kotlin\r\nwithType&lt;Jar&gt; {\r\n    enabled = true\r\n    isZip64 = true\r\n    duplicatesStrategy = DuplicatesStrategy.EXCLUDE\r\n\r\n    archiveFileName.set(&quot;$project.jar&quot;)\r\n\r\n    from(sourceSets.main.get().output)\r\n    dependsOn(configurations.compileClasspath)\r\n    from({\r\n        configurations.compileClasspath.get().filter {\r\n            it.name.endsWith(&quot;jar&quot;)\r\n        }.map { zipTree(it) }\r\n    }) {\r\n        exclude(&quot;META-INF/*.RSA&quot;, &quot;META-INF/*.SF&quot;, &quot;META-INF/*.DSA&quot;)\r\n    }\r\n}\r\n```","title":"Add provided dependency to test classpath using Gradle","body":"<h3>my case</h3>\n<pre class=\"lang-kotlin prettyprint-override\"><code>withType&lt;Jar&gt; {\n    enabled = true\n    isZip64 = true\n    duplicatesStrategy = DuplicatesStrategy.EXCLUDE\n\n    archiveFileName.set(&quot;$project.jar&quot;)\n\n    from(sourceSets.main.get().output)\n    dependsOn(configurations.compileClasspath)\n    from({\n        configurations.compileClasspath.get().filter {\n            it.name.endsWith(&quot;jar&quot;)\n        }.map { zipTree(it) }\n    }) {\n        exclude(&quot;META-INF/*.RSA&quot;, &quot;META-INF/*.SF&quot;, &quot;META-INF/*.DSA&quot;)\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1848418,"reputation":25883,"user_id":1675568,"accept_rate":79,"display_name":"tomrozb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6825,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":27278048,"answer_count":3,"score":3,"last_activity_date":1660747363,"creation_date":1417620253,"question_id":27275402,"body_markdown":"I&#39;ve `provided` dependency scope configured like below. My problem is, the provided dependencies are not visible during runtime in tests. How can I configure this to keep the dependencies `provided` but available on the test classpath?\r\n\r\n    apply plugin: &#39;java&#39;\r\n    \r\n    configurations {\r\n        provided\r\n    }\r\n    \r\n    sourceSets {\r\n        main {\r\n            compileClasspath += configurations.provided\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        provided &#39;com.google.guava:guava:18.0&#39;\r\n        provided &#39;org.apache.commons:commons-lang3:3.3.2&#39;\r\n    \r\n        // Tests\r\n        testCompile &#39;junit:junit:4.11&#39;\r\n        testCompile &#39;org.assertj:assertj-core:1.7.0&#39;\r\n    \r\n        // Additional test compile dependencies\r\n        testCompile &#39;joda-time:joda-time:2.2&#39;\r\n    }\r\n\r\nOne solution  is to add the dependency like the joda-time library with `testCompile` scope, but I don&#39;t want to duplicate any entries. I&#39;m sure it can be achieved with proper configuration.","title":"Add provided dependency to test classpath using Gradle","body":"<p>I've <code>provided</code> dependency scope configured like below. My problem is, the provided dependencies are not visible during runtime in tests. How can I configure this to keep the dependencies <code>provided</code> but available on the test classpath?</p>\n\n<pre><code>apply plugin: 'java'\n\nconfigurations {\n    provided\n}\n\nsourceSets {\n    main {\n        compileClasspath += configurations.provided\n    }\n}\n\ndependencies {\n    provided 'com.google.guava:guava:18.0'\n    provided 'org.apache.commons:commons-lang3:3.3.2'\n\n    // Tests\n    testCompile 'junit:junit:4.11'\n    testCompile 'org.assertj:assertj-core:1.7.0'\n\n    // Additional test compile dependencies\n    testCompile 'joda-time:joda-time:2.2'\n}\n</code></pre>\n\n<p>One solution  is to add the dependency like the joda-time library with <code>testCompile</code> scope, but I don't want to duplicate any entries. I'm sure it can be achieved with proper configuration.</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","h2"],"comments":[{"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"score":0,"creation_date":1660737520,"post_id":73388044,"comment_id":129602357,"body_markdown":"If you could provide full definition of your two entities, this could help people spot the issue.","body":"If you could provide full definition of your two entities, this could help people spot the issue."}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660747311,"creation_date":1660747311,"answer_id":73390445,"question_id":73388044,"body_markdown":"That&#39;s because your mapping is wrong. You have to tell Hibernate which to-one association maps this one-to-many association, i.e. use:\r\n\r\n    @OneToMany(mappedBy = &quot;customer&quot;)\r\n    private List&lt;Pet&gt; pets;","title":"How can a simple ManyToOne relationship create both a join table but also a FK back to parent?","body":"<p>That's because your mapping is wrong. You have to tell Hibernate which to-one association maps this one-to-many association, i.e. use:</p>\n<pre><code>@OneToMany(mappedBy = &quot;customer&quot;)\nprivate List&lt;Pet&gt; pets;\n</code></pre>\n"}],"owner":{"account_id":1622560,"reputation":1026,"user_id":1498827,"accept_rate":84,"display_name":"microwth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660747311,"creation_date":1660737273,"question_id":73388044,"body_markdown":"Very simple use case.Entity Pet is ManyToOne to Customer :\r\n\r\n    @ManyToOne(targetEntity = Customer.class, optional = false)\r\n        private Customer customer;\r\n\r\nCustomer entity itself has a reference to Pet\r\n  \r\n\r\n    @OneToMany(targetEntity = Pet.class)\r\n            private List&lt;Pet&gt; pets;\r\n\r\n.\r\n\r\nThis is the ERD generated:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Q4nR2.png\r\n\r\nThe DDL generated is :\r\n\r\n   \r\n\r\n     create table customer (\r\n           id bigint generated by default as identity,\r\n            name varchar(255),\r\n            notes varchar(255),\r\n            phone_number varchar(255),\r\n            primary key (id)\r\n        )\r\n    \r\n        create table customer_pets (\r\n           customer_id bigint not null,\r\n            pets_id bigint not null\r\n        )\r\n    \r\n    \r\n        create table pet (\r\n           id bigint generated by default as identity,\r\n            birth_date date,\r\n            name varchar(255),\r\n            notes varchar(255),\r\n            type integer,\r\n            customer_id bigint not null,\r\n            primary key (id)\r\n        )\r\n    \r\n      alter table customer_pets \r\n           add constraint UK_e3o1kteg0lcbv0x7ootmqr9be unique (pets_id)\r\n    \r\n        alter table customer_pets \r\n           add constraint FKgg2of4dlj1tcnp4we00jnym8n \r\n           foreign key (pets_id) \r\n           references pet\r\n    \r\n        alter table customer_pets \r\n           add constraint FK3vxa5mji0399s17amtnv2f2qj \r\n           foreign key (customer_id) \r\n           references customer\r\n    \r\n    alter table pet \r\n           add constraint FKt742r2fu4c3i9sn6a8kv0k746 \r\n           foreign key (customer_id) \r\n           references customer\r\n\t   \r\nThe full definition of the entities is :\r\n\r\n    @Entity\r\n    @Table\r\n    @Data\r\n    @NoArgsConstructor\r\n    public class Pet implements Serializable {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n    \r\n        private PetType type;\r\n    \r\n        private String name;\r\n    \r\n        @ManyToOne(targetEntity = Customer.class, optional = false)\r\n        private Customer customer;\r\n    \r\n        private LocalDate birthDate;\r\n    \r\n        private String notes;\r\n    }\r\n\r\n\r\n    @Entity\r\n    @Table\r\n    @Data\r\n    @NoArgsConstructor\r\n    public class Customer implements Serializable {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n    \r\n        private String name;\r\n    \r\n        private String phoneNumber;\r\n    \r\n        private String notes;\r\n    \r\n        @OneToMany(targetEntity = Pet.class)\r\n        private List&lt;Pet&gt; pets;\r\n    \r\n        public void insertPet(Pet pet) {\r\n            pets.add(pet);\r\n        }\r\n    }\r\n\r\nHow come Hibernate creates **both** a join table, *customer_pets*, but also keeps a FK back from *Pet to Customer*? Shouldn&#39;t be **one or the other** ? \r\n\r\nI&#39;ve also used JoinColumn, but still the same!\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How can a simple ManyToOne relationship create both a join table but also a FK back to parent?","body":"<p>Very simple use case.Entity Pet is ManyToOne to Customer :</p>\n<pre><code>@ManyToOne(targetEntity = Customer.class, optional = false)\n    private Customer customer;\n</code></pre>\n<p>Customer entity itself has a reference to Pet</p>\n<pre><code>@OneToMany(targetEntity = Pet.class)\n        private List&lt;Pet&gt; pets;\n</code></pre>\n<p>.</p>\n<p>This is the ERD generated:\n<a href=\"https://i.stack.imgur.com/Q4nR2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q4nR2.png\" alt=\"enter image description here\" /></a></p>\n<p>The DDL generated is :</p>\n<pre><code> create table customer (\n       id bigint generated by default as identity,\n        name varchar(255),\n        notes varchar(255),\n        phone_number varchar(255),\n        primary key (id)\n    )\n\n    create table customer_pets (\n       customer_id bigint not null,\n        pets_id bigint not null\n    )\n\n\n    create table pet (\n       id bigint generated by default as identity,\n        birth_date date,\n        name varchar(255),\n        notes varchar(255),\n        type integer,\n        customer_id bigint not null,\n        primary key (id)\n    )\n\n  alter table customer_pets \n       add constraint UK_e3o1kteg0lcbv0x7ootmqr9be unique (pets_id)\n\n    alter table customer_pets \n       add constraint FKgg2of4dlj1tcnp4we00jnym8n \n       foreign key (pets_id) \n       references pet\n\n    alter table customer_pets \n       add constraint FK3vxa5mji0399s17amtnv2f2qj \n       foreign key (customer_id) \n       references customer\n\nalter table pet \n       add constraint FKt742r2fu4c3i9sn6a8kv0k746 \n       foreign key (customer_id) \n       references customer\n   \n</code></pre>\n<p>The full definition of the entities is :</p>\n<pre><code>@Entity\n@Table\n@Data\n@NoArgsConstructor\npublic class Pet implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    private PetType type;\n\n    private String name;\n\n    @ManyToOne(targetEntity = Customer.class, optional = false)\n    private Customer customer;\n\n    private LocalDate birthDate;\n\n    private String notes;\n}\n\n\n@Entity\n@Table\n@Data\n@NoArgsConstructor\npublic class Customer implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    private String name;\n\n    private String phoneNumber;\n\n    private String notes;\n\n    @OneToMany(targetEntity = Pet.class)\n    private List&lt;Pet&gt; pets;\n\n    public void insertPet(Pet pet) {\n        pets.add(pet);\n    }\n}\n</code></pre>\n<p>How come Hibernate creates <strong>both</strong> a join table, <em>customer_pets</em>, but also keeps a FK back from <em>Pet to Customer</em>? Shouldn't be <strong>one or the other</strong> ?</p>\n<p>I've also used JoinColumn, but still the same!</p>\n"},{"tags":["java","maven"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1576822761,"creation_date":1576822761,"answer_id":59420680,"question_id":59419562,"body_markdown":"I think the problem is that you have a Java 11 JRE package installed rather than a JDK.  \r\n\r\nOn my Ubuntu 18.04 system, there is a `/usr/bin/javadoc` installed.  Running `apt-file find javadoc | bin/javadoc` tells me that it came from the `openjdk-11-jdk-headless` package.  (Not the `openjdk-11-jre-headless` package.)\r\n\r\n ","title":"javadoc executable not found with maven if even $JAVA_HOME seems correctly set","body":"<p>I think the problem is that you have a Java 11 JRE package installed rather than a JDK.  </p>\n\n<p>On my Ubuntu 18.04 system, there is a <code>/usr/bin/javadoc</code> installed.  Running <code>apt-file find javadoc | bin/javadoc</code> tells me that it came from the <code>openjdk-11-jdk-headless</code> package.  (Not the <code>openjdk-11-jre-headless</code> package.)</p>\n"},{"tags":[],"owner":{"account_id":11364670,"reputation":47,"user_id":8331931,"display_name":"M.ferlay"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1588830397,"creation_date":1588830397,"answer_id":61650735,"question_id":59419562,"body_markdown":"it s not a question of JDK or JRE. Since Java9, this command disappear from bin folder","title":"javadoc executable not found with maven if even $JAVA_HOME seems correctly set","body":"<p>it s not a question of JDK or JRE. Since Java9, this command disappear from bin folder</p>\n"},{"tags":[],"owner":{"account_id":4161644,"reputation":3505,"user_id":3411621,"accept_rate":17,"display_name":"Xmanoux"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660747307,"creation_date":1660747307,"answer_id":73390443,"question_id":59419562,"body_markdown":"Same problem here\r\nResolved with\r\n\r\n&gt; cp /usr/bin/javadoc $JAVA_HOME/bin/\r\n\r\nAssuming your $JAVA_HOME points to good openjdk location, if not :\r\n\r\n&gt; JAVA_HOME=$(update-alternatives --query java | grep Value | cut -d&quot; &quot; -f2 | head -c -10  ) ;","title":"javadoc executable not found with maven if even $JAVA_HOME seems correctly set","body":"<p>Same problem here\nResolved with</p>\n<blockquote>\n<p>cp /usr/bin/javadoc $JAVA_HOME/bin/</p>\n</blockquote>\n<p>Assuming your $JAVA_HOME points to good openjdk location, if not :</p>\n<blockquote>\n<p>JAVA_HOME=$(update-alternatives --query java | grep Value | cut -d&quot; &quot; -f2 | head -c -10  ) ;</p>\n</blockquote>\n"}],"owner":{"account_id":1737241,"reputation":6555,"user_id":1707938,"accept_rate":59,"display_name":"CptNemo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4248,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1660747307,"creation_date":1576813373,"question_id":59419562,"body_markdown":"I am building the [distribution package][1] to install wikidata-query-rdf / Blazegraph to be use with my Wikibase installation. \r\n\r\nI am struggling to fix a few Java-related issues when I do `sudo ./mvnw package` ([here][2] the instructions I am following).\r\n\r\nI am running everything under Ubuntu 18.04.\r\n\r\nThe error I get is \r\n\r\n&gt; [ERROR] Failed to execute goal\r\n&gt; org.apache.maven.plugins:maven-javadoc-plugin:3.0.1:jar\r\n&gt; (attach-javadocs) on project common: MavenReportException: Error while\r\n&gt; generating Javadoc: Unable to find javadoc command: The javadoc\r\n&gt; executable &#39;/usr/lib/jvm/default-java/bin/javadoc&#39; doesn&#39;t exist or is\r\n&gt; not a file. Verify the JAVA_HOME environment variable. -&gt; [Help 1]\r\n&gt; [ERROR]\r\n\r\nStill, if I do `sudo ./mvnw -version`, I get\r\n\r\n&gt; Apache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3;\r\n&gt; 2018-10-24T18:41:47Z) Maven home:\r\n&gt; /root/.m2/wrapper/dists/apache-maven-3.6.0-bin/7q9b549jss6tgtr7gdokcthm4f/apache-maven-3.6.0\r\n&gt; Java version: 11.0.4, vendor: Ubuntu, runtime:\r\n&gt; /usr/lib/jvm/java-11-openjdk-amd64 Default locale: en_AU, platform\r\n&gt; encoding: UTF-8 OS name: &quot;linux&quot;, version: &quot;4.15.0-58-generic&quot;, arch:\r\n&gt; &quot;amd64&quot;, family: &quot;unix&quot;\r\n\r\nI also get \r\n`which java`\r\n\r\n&gt; /usr/bin/java\r\n\r\nand\r\n\r\n`echo $JAVA_HOME`\r\n\r\n&gt; /usr/lib/jvm/java-1.11.0-openjdk-amd64\r\n\r\n  [1]: https://github.com/wikimedia/wikidata-query-rdf.git\r\n  [2]: https://wikitech.wikimedia.org/wiki/Wikidata_query_service","title":"javadoc executable not found with maven if even $JAVA_HOME seems correctly set","body":"<p>I am building the <a href=\"https://github.com/wikimedia/wikidata-query-rdf.git\" rel=\"nofollow noreferrer\">distribution package</a> to install wikidata-query-rdf / Blazegraph to be use with my Wikibase installation. </p>\n\n<p>I am struggling to fix a few Java-related issues when I do <code>sudo ./mvnw package</code> (<a href=\"https://wikitech.wikimedia.org/wiki/Wikidata_query_service\" rel=\"nofollow noreferrer\">here</a> the instructions I am following).</p>\n\n<p>I am running everything under Ubuntu 18.04.</p>\n\n<p>The error I get is </p>\n\n<blockquote>\n  <p>[ERROR] Failed to execute goal\n  org.apache.maven.plugins:maven-javadoc-plugin:3.0.1:jar\n  (attach-javadocs) on project common: MavenReportException: Error while\n  generating Javadoc: Unable to find javadoc command: The javadoc\n  executable '/usr/lib/jvm/default-java/bin/javadoc' doesn't exist or is\n  not a file. Verify the JAVA_HOME environment variable. -> [Help 1]\n  [ERROR]</p>\n</blockquote>\n\n<p>Still, if I do <code>sudo ./mvnw -version</code>, I get</p>\n\n<blockquote>\n  <p>Apache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3;\n  2018-10-24T18:41:47Z) Maven home:\n  /root/.m2/wrapper/dists/apache-maven-3.6.0-bin/7q9b549jss6tgtr7gdokcthm4f/apache-maven-3.6.0\n  Java version: 11.0.4, vendor: Ubuntu, runtime:\n  /usr/lib/jvm/java-11-openjdk-amd64 Default locale: en_AU, platform\n  encoding: UTF-8 OS name: \"linux\", version: \"4.15.0-58-generic\", arch:\n  \"amd64\", family: \"unix\"</p>\n</blockquote>\n\n<p>I also get \n<code>which java</code></p>\n\n<blockquote>\n  <p>/usr/bin/java</p>\n</blockquote>\n\n<p>and</p>\n\n<p><code>echo $JAVA_HOME</code></p>\n\n<blockquote>\n  <p>/usr/lib/jvm/java-1.11.0-openjdk-amd64</p>\n</blockquote>\n"},{"tags":["java","junit","concurrency"],"comments":[{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1660625274,"post_id":73356318,"comment_id":129569659,"body_markdown":"Why not use `Thread.sleep()` if you actually need to wait for the code to run?","body":"Why not use <code>Thread.sleep()</code> if you actually need to wait for the code to run?"},{"owner":{"account_id":16746116,"reputation":129,"user_id":15317405,"display_name":"jlaufer"},"score":0,"creation_date":1660746885,"post_id":73356318,"comment_id":129606111,"body_markdown":"I guess I&#39;ll post the answer although, surprisingly no one seems to care about this. Makes me think I need to move to C fast.","body":"I guess I&#39;ll post the answer although, surprisingly no one seems to care about this. Makes me think I need to move to C fast."}],"answers":[{"tags":[],"owner":{"account_id":16746116,"reputation":129,"user_id":15317405,"display_name":"jlaufer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660747293,"creation_date":1660747293,"answer_id":73390439,"question_id":73356318,"body_markdown":"Found what I was looking for. \r\n\r\nUse a ScheduledExecutorService:\r\n\r\n&gt; An ExecutorService that can schedule commands to run after a given\r\n&gt; delay, or to execute periodically.\r\n\r\n \r\n    \r\n    RunProgram runProgram = new RunProgram();\r\n    ScheduledExecutorService testExecutor = Executors.newScheduledThreadPool(1);\r\n    Future future = testExecutor.submit(runProgram);\r\n    Thread.sleep(500);\r\n    future.cancel(true);","title":"Stop running Java JUnit test method after predefined time without failing the test","body":"<p>Found what I was looking for.</p>\n<p>Use a ScheduledExecutorService:</p>\n<blockquote>\n<p>An ExecutorService that can schedule commands to run after a given\ndelay, or to execute periodically.</p>\n</blockquote>\n<pre><code>RunProgram runProgram = new RunProgram();\nScheduledExecutorService testExecutor = Executors.newScheduledThreadPool(1);\nFuture future = testExecutor.submit(runProgram);\nThread.sleep(500);\nfuture.cancel(true);\n</code></pre>\n"}],"owner":{"account_id":16746116,"reputation":129,"user_id":15317405,"display_name":"jlaufer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":317,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73390439,"answer_count":1,"score":0,"last_activity_date":1660747293,"creation_date":1660529016,"question_id":73356318,"body_markdown":"I have a class that starts multiple threads which all run `while(true)` loops. Is it possible to have an `Assert` statements on the state of a test after it has run for a certain amount of time?\r\n\r\nThe Timeout functionality would work, if it didn&#39;t fail the test.\r\n\r\nThis is a contrived example to show what I&#39;m trying to do. The test is at the bottom.\r\n\r\n        class RunProgram {\r\n\r\n        private DataClass dataClass = new DataClass();\r\n        private Thread1 thread1 = new Thread1(dataClass);\r\n    \r\n        void startThis() {\r\n            ExecutorService pool = Executors.newFixedThreadPool(5);\r\n            try {\r\n                pool.execute(thread1);//Thread 1\r\n                //... more threads with while loops\r\n                runMainThread(dataClass);\r\n            } finally {\r\n                pool.shutdown();\r\n            }\r\n        }\r\n    \r\n        void runMainThread(DataClass data1){\r\n            while(true){\r\n                dataClass.setInternalDataInt(20);\r\n                //do stuff\r\n            }\r\n        }\r\n    \r\n        public Thread1 getThread1(){\r\n            return this.thread1;\r\n        }\r\n    }\r\n    \r\n    class Thread1 implements Runnable{\r\n        private DataClass dataClass;\r\n    \r\n        Thread1(DataClass dataClass){\r\n            this.dataClass = dataClass;\r\n        }\r\n    \r\n        public void run() {\r\n            dataClass.setInternalDataInt(10);\r\n            while (true) {\r\n                //dostuff\r\n            }\r\n        }\r\n    \r\n        public DataClass getDataClass(){\r\n            return dataClass;\r\n        }\r\n    \r\n        public void setDataClass(DataClass dataClass){\r\n            this.dataClass = dataClass;\r\n        }\r\n    }\r\n    \r\n    class DataClass {\r\n        private int internalDataInt;\r\n        \r\n        public int getInternalDataInt(){\r\n            return this.internalDataInt;\r\n        }\r\n        \r\n        public void setInternalDataInt(int internalDataInt){\r\n            this.internalDataInt = internalDataInt;\r\n        }\r\n    }\r\n    \r\n    class Tests{\r\n        @Test\r\n        public void stateOfThread1() {\r\n            RunProgram runProgram = new RunProgram();\r\n            runProgram.startThis();\r\n            //Run above for 100 millisecond and then end\r\n            Assertions.assertEquals(runProgram.getThread1().getDataClass().getInternalDataInt(), 20);\r\n        }\r\n    }","title":"Stop running Java JUnit test method after predefined time without failing the test","body":"<p>I have a class that starts multiple threads which all run <code>while(true)</code> loops. Is it possible to have an <code>Assert</code> statements on the state of a test after it has run for a certain amount of time?</p>\n<p>The Timeout functionality would work, if it didn't fail the test.</p>\n<p>This is a contrived example to show what I'm trying to do. The test is at the bottom.</p>\n<pre><code>    class RunProgram {\n\n    private DataClass dataClass = new DataClass();\n    private Thread1 thread1 = new Thread1(dataClass);\n\n    void startThis() {\n        ExecutorService pool = Executors.newFixedThreadPool(5);\n        try {\n            pool.execute(thread1);//Thread 1\n            //... more threads with while loops\n            runMainThread(dataClass);\n        } finally {\n            pool.shutdown();\n        }\n    }\n\n    void runMainThread(DataClass data1){\n        while(true){\n            dataClass.setInternalDataInt(20);\n            //do stuff\n        }\n    }\n\n    public Thread1 getThread1(){\n        return this.thread1;\n    }\n}\n\nclass Thread1 implements Runnable{\n    private DataClass dataClass;\n\n    Thread1(DataClass dataClass){\n        this.dataClass = dataClass;\n    }\n\n    public void run() {\n        dataClass.setInternalDataInt(10);\n        while (true) {\n            //dostuff\n        }\n    }\n\n    public DataClass getDataClass(){\n        return dataClass;\n    }\n\n    public void setDataClass(DataClass dataClass){\n        this.dataClass = dataClass;\n    }\n}\n\nclass DataClass {\n    private int internalDataInt;\n    \n    public int getInternalDataInt(){\n        return this.internalDataInt;\n    }\n    \n    public void setInternalDataInt(int internalDataInt){\n        this.internalDataInt = internalDataInt;\n    }\n}\n\nclass Tests{\n    @Test\n    public void stateOfThread1() {\n        RunProgram runProgram = new RunProgram();\n        runProgram.startThis();\n        //Run above for 100 millisecond and then end\n        Assertions.assertEquals(runProgram.getThread1().getDataClass().getInternalDataInt(), 20);\n    }\n}\n</code></pre>\n"},{"tags":["java","postgresql","hibernate","jsonb"],"answers":[{"tags":[],"owner":{"account_id":9232568,"reputation":53,"user_id":6858199,"display_name":"Prashant Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660724444,"creation_date":1660724444,"answer_id":73385114,"question_id":73384959,"body_markdown":"You need to have @NoArgsConstructor also in your beans. This is required for jackson.","title":"PostgreSQLs JSONB data type with Hibernate: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource-Unable to load class","body":"<p>You need to have @NoArgsConstructor also in your beans. This is required for jackson.</p>\n"},{"tags":[],"owner":{"account_id":26085181,"reputation":1,"user_id":19782802,"display_name":"LucianMoisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660731784,"creation_date":1660731784,"answer_id":73386789,"question_id":73384959,"body_markdown":"I found an way easier solution working for hibernate 5 or higher: \r\n\r\nFound a different approach that worked as expected:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;hibernate-types-55&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.18.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nBase Entity:\r\n\r\n    @TypeDefs({\r\n            @TypeDef(name = &quot;json&quot;, typeClass = JsonStringType.class),\r\n            @TypeDef(name = &quot;jsonb&quot;, typeClass = JsonBinaryType.class)\r\n    })\r\n    public class BaseEntity {\r\n        //class members\r\n    }\r\n\r\nMain entity:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RequiredArgsConstructor\r\n    @Entity\r\n    public class Geojson extends BaseEntity{\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        @Column(name = &quot;id&quot;)\r\n        private int id;\r\n    \r\n        @Column(name = &quot;type&quot;)\r\n        private String type;\r\n    \r\n        @Type(type = &quot;json&quot;)\r\n        @Column(name = &quot;feature&quot;, columnDefinition = &quot;jsonb&quot;)\r\n        private List&lt;Feature&gt; features;\r\n\r\nGeojson(nested json) I want to save as Jsonb in a column in database:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RequiredArgsConstructor\r\n    public class Feature implements Serializable {\r\n    \r\n        private String type;\r\n    \r\n        private Properties properties;\r\n    \r\n        private Geometry geometry;\r\n    \r\n    }\r\n\r\nI&#39;m not sure yet why I was not able to use @TypeDefs directly on &quot;Geojson&quot; class, and i needed to create a BaseEntity, but it works.\r\n\r\nPS: If you tried storing some other type of data before, please make sure that you drop the table and create a new one before running the app, since the table was created with a different variable type for that column.","title":"PostgreSQLs JSONB data type with Hibernate: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource-Unable to load class","body":"<p>I found an way easier solution working for hibernate 5 or higher:</p>\n<p>Found a different approach that worked as expected:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-types-55&lt;/artifactId&gt;\n    &lt;version&gt;2.18.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Base Entity:</p>\n<pre><code>@TypeDefs({\n        @TypeDef(name = &quot;json&quot;, typeClass = JsonStringType.class),\n        @TypeDef(name = &quot;jsonb&quot;, typeClass = JsonBinaryType.class)\n})\npublic class BaseEntity {\n    //class members\n}\n</code></pre>\n<p>Main entity:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\n@Entity\npublic class Geojson extends BaseEntity{\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private int id;\n\n    @Column(name = &quot;type&quot;)\n    private String type;\n\n    @Type(type = &quot;json&quot;)\n    @Column(name = &quot;feature&quot;, columnDefinition = &quot;jsonb&quot;)\n    private List&lt;Feature&gt; features;\n</code></pre>\n<p>Geojson(nested json) I want to save as Jsonb in a column in database:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\npublic class Feature implements Serializable {\n\n    private String type;\n\n    private Properties properties;\n\n    private Geometry geometry;\n\n}\n</code></pre>\n<p>I'm not sure yet why I was not able to use @TypeDefs directly on &quot;Geojson&quot; class, and i needed to create a BaseEntity, but it works.</p>\n<p>PS: If you tried storing some other type of data before, please make sure that you drop the table and create a new one before running the app, since the table was created with a different variable type for that column.</p>\n"},{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660747154,"creation_date":1660747154,"answer_id":73390412,"question_id":73384959,"body_markdown":"You have to put the `@TypeDef(name = &quot;FeatureType&quot;, typeClass = FeatureType.class)` part on a class that is scanned by Hibernate i.e. an entity class.","title":"PostgreSQLs JSONB data type with Hibernate: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource-Unable to load class","body":"<p>You have to put the <code>@TypeDef(name = &quot;FeatureType&quot;, typeClass = FeatureType.class)</code> part on a class that is scanned by Hibernate i.e. an entity class.</p>\n"}],"owner":{"account_id":26085181,"reputation":1,"user_id":19782802,"display_name":"LucianMoisa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2536,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73386789,"answer_count":3,"score":0,"last_activity_date":1660747154,"creation_date":1660723723,"question_id":73384959,"body_markdown":"Now I learn about nested jsons and geojson and how to save them in PostgreSQL as JsonB directly in database and before starting. \r\n\r\nInspiration source: https://thorben-janssen.com/persist-postgresqls-jsonb-data-type-hibernate/\r\n\r\nError I get when running the app:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [FeatureType]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.2.jar:2.7.2]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.2.jar:2.7.2]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.2.jar:2.7.2]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.2.jar:2.7.2]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.2.jar:2.7.2]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.2.jar:2.7.2]\r\n    \tat com.example.GeojsonTest.GeojsonTestApplication.main(GeojsonTestApplication.java:10) ~[classes/:na]\r\n    Caused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [FeatureType]\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:133) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \tat org.hibernate.boot.internal.ClassLoaderAccessImpl.classForName(ClassLoaderAccessImpl.java:67) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \tat org.hibernate.cfg.annotations.SimpleValueBinder.fillSimpleValue(SimpleValueBinder.java:536) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \tat org.hibernate.cfg.SetSimpleValueTypeSecondPass.doSecondPass(SetSimpleValueTypeSecondPass.java:25) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1621) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \t... 16 common frames omitted\r\n    Caused by: java.lang.ClassNotFoundException: Could not load requested class : FeatureType\r\n    \tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:210) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n    \tat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n    \tat java.base/java.lang.Class.forName(Class.java:467) ~[na:na]\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:130) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n    \t... 31 common frames omitted\r\n\r\nHere is the Main Entity:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RequiredArgsConstructor\r\n    @Entity\r\n    public class Geojson {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        @Column(name = &quot;id&quot;)\r\n        private int id;\r\n    \r\n        @Column(name = &quot;type&quot;)\r\n        private String type;\r\n    \r\n        @Column(name = &quot;feature&quot;)\r\n        @Type(type = &quot;FeatureType&quot;)\r\n        private Feature features;\r\n\r\nHere is the geojson(nested json) I want to save as Jsonb in a column in database:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RequiredArgsConstructor\r\n    public class Feature implements Serializable {\r\n    \r\n        private String type;\r\n    \r\n        private Properties properties;\r\n    \r\n        private Geometry geometry;\r\n    \r\n    }\r\n\r\nHere is the implementation of Usertype for my json:\r\n\r\n    package com.example.GeojsonTest.Entity;\r\n    \r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import org.hibernate.HibernateException;\r\n    import org.hibernate.annotations.TypeDef;\r\n    import org.hibernate.engine.spi.SharedSessionContractImplementor;\r\n    import org.hibernate.usertype.UserType;\r\n    \r\n    import java.io.*;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.sql.Types;\r\n    \r\n    @TypeDef(name = &quot;FeatureType&quot;, typeClass = FeatureType.class)\r\n    public class FeatureType implements UserType {\r\n    \r\n        @Override\r\n        public int[] sqlTypes() {\r\n            return new int[]{Types.JAVA_OBJECT};\r\n        }\r\n    \r\n        @Override\r\n        public Class&lt;Feature&gt; returnedClass() {\r\n            return Feature.class;\r\n        }\r\n    \r\n        @Override\r\n        public Object nullSafeGet(final ResultSet resultSet, final String[] strings, final SharedSessionContractImplementor sharedSessionContractImplementor,\r\n                                  final Object o) throws HibernateException, SQLException {\r\n            final String cellContent = resultSet.getString(strings[0]);\r\n            if (cellContent == null) {\r\n                return null;\r\n            }\r\n            try {\r\n                final ObjectMapper mapper = new ObjectMapper();\r\n                return mapper.readValue(cellContent.getBytes(&quot;UTF-8&quot;), returnedClass());\r\n            } catch (final Exception ex) {\r\n                throw new RuntimeException(&quot;Failed to convert String to Invoice: &quot; + ex.getMessage(), ex);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void nullSafeSet(final PreparedStatement preparedStatement, final Object o, final int idx,\r\n                                final SharedSessionContractImplementor sharedSessionContractImplementor) throws HibernateException, SQLException {\r\n            if (o == null) {\r\n                preparedStatement.setNull(idx, Types.OTHER);\r\n                return;\r\n            }\r\n            try {\r\n                final ObjectMapper mapper = new ObjectMapper();\r\n                final StringWriter w = new StringWriter();\r\n                mapper.writeValue(w, o);\r\n                w.flush();\r\n                preparedStatement.setObject(idx, w.toString(), Types.OTHER);\r\n            } catch (final Exception ex) {\r\n                throw new RuntimeException(&quot;Failed to convert Invoice to String: &quot; + ex.getMessage(), ex);\r\n            }\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public Object deepCopy(final Object value) throws HibernateException {\r\n            try {\r\n                // use serialization to create a deep copy\r\n                ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n                ObjectOutputStream oos = new ObjectOutputStream(bos);\r\n                oos.writeObject(value);\r\n                oos.flush();\r\n                oos.close();\r\n                bos.close();\r\n    \r\n                ByteArrayInputStream bais = new ByteArrayInputStream(bos.toByteArray());\r\n                return new ObjectInputStream(bais).readObject();\r\n            } catch (ClassNotFoundException | IOException ex) {\r\n                throw new HibernateException(ex);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public boolean isMutable() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public Serializable disassemble(final Object value) throws HibernateException {\r\n            return (Serializable) this.deepCopy(value);\r\n        }\r\n    \r\n        @Override\r\n        public Object assemble(final Serializable cached, final Object owner) throws HibernateException {\r\n            return this.deepCopy(cached);\r\n        }\r\n    \r\n        @Override\r\n        public Object replace(final Object original, final Object target, final Object owner) throws HibernateException {\r\n            return this.deepCopy(original);\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(final Object obj1, final Object obj2) throws HibernateException {\r\n            if (obj1 == null) {\r\n                return obj2 == null;\r\n            }\r\n            return obj1.equals(obj2);\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode(final Object obj) throws HibernateException {\r\n            return obj.hashCode();\r\n        }\r\n    }\r\n\r\n\r\nhere is the registration of hibernate dialect:\r\n\r\n    public class MyPostgreSQL94Dialect extends PostgreSQL94Dialect {\r\n    \r\n        public MyPostgreSQL94Dialect() {\r\n            this.registerColumnType(Types.JAVA_OBJECT, &quot;jsonb&quot;);\r\n        }\r\n    \r\n    }\r\n\r\nApp.properties:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    #postgres database config\r\n    \r\n    #spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\r\n    #spring.jpa.hibernate.ddl-auto=create\r\n    spring.jpa.generate-ddl=true\r\n    spring.jpa.hibernate.show-sql=true\r\n    spring.datasource.url=jdbc:postgresql://localhost:5432/geojson_copy\r\n    spring.datasource.username=postgres\r\n    spring.datasource.password=********\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL81Dialect\r\n\r\n\r\nand finally, here is the POM.xml\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.2&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;GeojsonTest&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;GeojsonTest&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;20220320&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.javassist/javassist --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.javassist&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.29.0-GA&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n        &lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t&lt;exclude&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;/exclude&gt;\r\n    \t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nI don&#39;t understand why i get the error about the FeatureType, if anyone can help me. Thank you!\r\n","title":"PostgreSQLs JSONB data type with Hibernate: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource-Unable to load class","body":"<p>Now I learn about nested jsons and geojson and how to save them in PostgreSQL as JsonB directly in database and before starting.</p>\n<p>Inspiration source: <a href=\"https://thorben-janssen.com/persist-postgresqls-jsonb-data-type-hibernate/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/persist-postgresqls-jsonb-data-type-hibernate/</a></p>\n<p>Error I get when running the app:</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [FeatureType]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.2.jar:2.7.2]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.2.jar:2.7.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.2.jar:2.7.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.2.jar:2.7.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.2.jar:2.7.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.2.jar:2.7.2]\n    at com.example.GeojsonTest.GeojsonTestApplication.main(GeojsonTestApplication.java:10) ~[classes/:na]\nCaused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [FeatureType]\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:133) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.boot.internal.ClassLoaderAccessImpl.classForName(ClassLoaderAccessImpl.java:67) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.cfg.annotations.SimpleValueBinder.fillSimpleValue(SimpleValueBinder.java:536) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.cfg.SetSimpleValueTypeSecondPass.doSecondPass(SetSimpleValueTypeSecondPass.java:25) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1621) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.22.jar:5.3.22]\n    ... 16 common frames omitted\nCaused by: java.lang.ClassNotFoundException: Could not load requested class : FeatureType\n    at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:210) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:467) ~[na:na]\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:130) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    ... 31 common frames omitted\n</code></pre>\n<p>Here is the Main Entity:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\n@Entity\npublic class Geojson {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private int id;\n\n    @Column(name = &quot;type&quot;)\n    private String type;\n\n    @Column(name = &quot;feature&quot;)\n    @Type(type = &quot;FeatureType&quot;)\n    private Feature features;\n</code></pre>\n<p>Here is the geojson(nested json) I want to save as Jsonb in a column in database:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\npublic class Feature implements Serializable {\n\n    private String type;\n\n    private Properties properties;\n\n    private Geometry geometry;\n\n}\n</code></pre>\n<p>Here is the implementation of Usertype for my json:</p>\n<pre><code>package com.example.GeojsonTest.Entity;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.hibernate.HibernateException;\nimport org.hibernate.annotations.TypeDef;\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\nimport org.hibernate.usertype.UserType;\n\nimport java.io.*;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\n\n@TypeDef(name = &quot;FeatureType&quot;, typeClass = FeatureType.class)\npublic class FeatureType implements UserType {\n\n    @Override\n    public int[] sqlTypes() {\n        return new int[]{Types.JAVA_OBJECT};\n    }\n\n    @Override\n    public Class&lt;Feature&gt; returnedClass() {\n        return Feature.class;\n    }\n\n    @Override\n    public Object nullSafeGet(final ResultSet resultSet, final String[] strings, final SharedSessionContractImplementor sharedSessionContractImplementor,\n                              final Object o) throws HibernateException, SQLException {\n        final String cellContent = resultSet.getString(strings[0]);\n        if (cellContent == null) {\n            return null;\n        }\n        try {\n            final ObjectMapper mapper = new ObjectMapper();\n            return mapper.readValue(cellContent.getBytes(&quot;UTF-8&quot;), returnedClass());\n        } catch (final Exception ex) {\n            throw new RuntimeException(&quot;Failed to convert String to Invoice: &quot; + ex.getMessage(), ex);\n        }\n    }\n\n    @Override\n    public void nullSafeSet(final PreparedStatement preparedStatement, final Object o, final int idx,\n                            final SharedSessionContractImplementor sharedSessionContractImplementor) throws HibernateException, SQLException {\n        if (o == null) {\n            preparedStatement.setNull(idx, Types.OTHER);\n            return;\n        }\n        try {\n            final ObjectMapper mapper = new ObjectMapper();\n            final StringWriter w = new StringWriter();\n            mapper.writeValue(w, o);\n            w.flush();\n            preparedStatement.setObject(idx, w.toString(), Types.OTHER);\n        } catch (final Exception ex) {\n            throw new RuntimeException(&quot;Failed to convert Invoice to String: &quot; + ex.getMessage(), ex);\n        }\n    }\n\n\n    @Override\n    public Object deepCopy(final Object value) throws HibernateException {\n        try {\n            // use serialization to create a deep copy\n            ByteArrayOutputStream bos = new ByteArrayOutputStream();\n            ObjectOutputStream oos = new ObjectOutputStream(bos);\n            oos.writeObject(value);\n            oos.flush();\n            oos.close();\n            bos.close();\n\n            ByteArrayInputStream bais = new ByteArrayInputStream(bos.toByteArray());\n            return new ObjectInputStream(bais).readObject();\n        } catch (ClassNotFoundException | IOException ex) {\n            throw new HibernateException(ex);\n        }\n    }\n\n    @Override\n    public boolean isMutable() {\n        return true;\n    }\n\n    @Override\n    public Serializable disassemble(final Object value) throws HibernateException {\n        return (Serializable) this.deepCopy(value);\n    }\n\n    @Override\n    public Object assemble(final Serializable cached, final Object owner) throws HibernateException {\n        return this.deepCopy(cached);\n    }\n\n    @Override\n    public Object replace(final Object original, final Object target, final Object owner) throws HibernateException {\n        return this.deepCopy(original);\n    }\n\n    @Override\n    public boolean equals(final Object obj1, final Object obj2) throws HibernateException {\n        if (obj1 == null) {\n            return obj2 == null;\n        }\n        return obj1.equals(obj2);\n    }\n\n    @Override\n    public int hashCode(final Object obj) throws HibernateException {\n        return obj.hashCode();\n    }\n}\n</code></pre>\n<p>here is the registration of hibernate dialect:</p>\n<pre><code>public class MyPostgreSQL94Dialect extends PostgreSQL94Dialect {\n\n    public MyPostgreSQL94Dialect() {\n        this.registerColumnType(Types.JAVA_OBJECT, &quot;jsonb&quot;);\n    }\n\n}\n</code></pre>\n<p>App.properties:</p>\n<pre class=\"lang-none prettyprint-override\"><code>#postgres database config\n\n#spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\n#spring.jpa.hibernate.ddl-auto=create\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.show-sql=true\nspring.datasource.url=jdbc:postgresql://localhost:5432/geojson_copy\nspring.datasource.username=postgres\nspring.datasource.password=********\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL81Dialect\n</code></pre>\n<p>and finally, here is the POM.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;GeojsonTest&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;GeojsonTest&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20220320&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.javassist/javassist --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n            &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n            &lt;version&gt;3.29.0-GA&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I don't understand why i get the error about the FeatureType, if anyone can help me. Thank you!</p>\n"},{"tags":["java","json","spring-boot","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660746693,"creation_date":1660746693,"answer_id":73390289,"question_id":73380237,"body_markdown":"This has nothing to do with JPA but with your JSON serialization library. I guess you are using Jackson as that is the default in Spring. In that case, annotate the `products` collection field in your supplier entity with `@JsonIgnore` to avoid serializing the collection to JSON.","title":"how to define how many levels of objects to get in a JSON in java with jpa?","body":"<p>This has nothing to do with JPA but with your JSON serialization library. I guess you are using Jackson as that is the default in Spring. In that case, annotate the <code>products</code> collection field in your supplier entity with <code>@JsonIgnore</code> to avoid serializing the collection to JSON.</p>\n"}],"owner":{"account_id":9703968,"reputation":29,"user_id":7197967,"display_name":"jonathan gonzalez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73390289,"answer_count":1,"score":0,"last_activity_date":1660746693,"creation_date":1660683372,"question_id":73380237,"body_markdown":"if we have a Product and Supplier object, where Product has a supplier and a supplier has a Product, how can we indicate to the entities that this is not an infinite cycle when obtaining the JSON of a product?\r\n\r\nthis would be something like \r\n\r\n     {\r\n          &quot;name&quot;: &quot;milk&quot;,\r\n          &quot;supplier&quot;: {\r\n              &quot;name&quot;: &quot;supplier name&quot;,\r\n              &quot;products&quot;: [\r\n                   {\r\n                   &quot;name&quot;: &quot;milk&quot;,\r\n                    &quot;supplier&quot;: {\r\n                    &quot;products&quot;: [\r\n                          &quot;name&quot;: &quot;milk&quot;,\r\n                           &quot;supplier&quot;: {\r\n                            &quot;products&quot;: [\r\n                                &quot;name&quot;: &quot;milk&quot;,\r\n                                 &quot;supplier&quot;: {\r\n                                   &quot;products&quot;: [\r\n                      \r\n                      \r\n                      ]\r\n                      \r\n                             ]\r\n                      \r\n                      ]\r\n                    },\r\n               ]\r\n           }\r\n        }\r\n\r\n\r\nhow could we configure this in java with JPA by levels? so that it is not an infinite cycle, and that it only returns 3 layers or levels of this infinite cycle?","title":"how to define how many levels of objects to get in a JSON in java with jpa?","body":"<p>if we have a Product and Supplier object, where Product has a supplier and a supplier has a Product, how can we indicate to the entities that this is not an infinite cycle when obtaining the JSON of a product?</p>\n<p>this would be something like</p>\n<pre><code> {\n      &quot;name&quot;: &quot;milk&quot;,\n      &quot;supplier&quot;: {\n          &quot;name&quot;: &quot;supplier name&quot;,\n          &quot;products&quot;: [\n               {\n               &quot;name&quot;: &quot;milk&quot;,\n                &quot;supplier&quot;: {\n                &quot;products&quot;: [\n                      &quot;name&quot;: &quot;milk&quot;,\n                       &quot;supplier&quot;: {\n                        &quot;products&quot;: [\n                            &quot;name&quot;: &quot;milk&quot;,\n                             &quot;supplier&quot;: {\n                               &quot;products&quot;: [\n                  \n                  \n                  ]\n                  \n                         ]\n                  \n                  ]\n                },\n           ]\n       }\n    }\n</code></pre>\n<p>how could we configure this in java with JPA by levels? so that it is not an infinite cycle, and that it only returns 3 layers or levels of this infinite cycle?</p>\n"},{"tags":["java","if-statement"],"comments":[{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1660715406,"post_id":73383344,"comment_id":129594831,"body_markdown":"Your code does print the error message, but then continues. You can e. g. add a return to the else-block. Regarding the Income-checks: as the code is executed sequentially, you can inverse the order of the if-statements. Then you don&#39;t need the logical and (&amp;&amp;) anymore. And please follow Java naming conventions.","body":"Your code does print the error message, but then continues. You can e. g. add a return to the else-block. Regarding the Income-checks: as the code is executed sequentially, you can inverse the order of the if-statements. Then you don&#39;t need the logical and (&amp;&amp;) anymore. And please follow Java naming conventions."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1660715721,"post_id":73383344,"comment_id":129594881,"body_markdown":"Why continue after `System.out.println(&quot;Error: Income too high to use this form&quot;);` ?  Just exit?","body":"Why continue after <code>System.out.println(&quot;Error: Income too high to use this form&quot;);</code> ?  Just exit?"},{"owner":{"account_id":26081766,"reputation":11,"user_id":19779776,"display_name":"cl_"},"score":0,"creation_date":1660716383,"post_id":73383344,"comment_id":129595026,"body_markdown":"I need the rest of it to be printed as well, I had it at the end of the code at first but it wouldnt print.","body":"I need the rest of it to be printed as well, I had it at the end of the code at first but it wouldnt print."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1660719074,"post_id":73383344,"comment_id":129595767,"body_markdown":"Try moving different parts of your code into different methods, then you can call from wherever.","body":"Try moving different parts of your code into different methods, then you can call from wherever."}],"owner":{"account_id":26081766,"reputation":11,"user_id":19779776,"display_name":"cl_"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660746517,"creation_date":1660714698,"question_id":73383344,"body_markdown":"I&#39;m a very new java student and am currently working on a program that I have been stuck on, it&#39;s an incremental program and it was working perfect with the first 2 tests and now I&#39;m not sure what&#39;s happened. I will post my code below and hopefully someone can help me. Thanks! The scanner takes the input from the computer and is supposed to show something like this to the console:\r\n\r\nAGI: $80,500  \r\nDeduction: $24,000  \r\nTaxable income: $56,500  \r\nFederal tax: $6,380  \r\nTax refund: $5,620\r\n\r\nit is supposed to test for these 2 first:\r\n\r\nAGI: $120,523  \r\nError: Income too high to use this form\r\n\r\nwhich passed until I wrote the rest of the code:\r\n\r\n\r\n    import java.util.Scanner;\r\n    import java.io.*;\r\n\r\n    public class LabProgram {\r\n    public static void main(String[] args) {\r\n     Scanner scnr = new Scanner(System.in);\r\n      int wages;\r\n      int taxableInterest;\r\n      int unemploymentComp;\r\n      int status;\r\n      int taxWithheld;\r\n      int AGI;\r\n      int deduction;\r\n      int fedTax;\r\n      int Income;\r\n      \r\n      wages = scnr.nextInt();\r\n      taxableInterest = scnr.nextInt();\r\n      unemploymentComp = scnr.nextInt();\r\n      \r\n      AGI = (wages + taxableInterest + unemploymentComp);\r\n      status = scnr.nextInt();\r\n      Income = (AGI - status);\r\n         \r\n      \r\n      if (AGI &lt; 120000){\r\n         System.out.printf(&quot;AGI: $%,d\\n&quot;, AGI);\r\n         \r\n      }else{\r\n         System.out.printf(&quot;AGI: $%,d\\n&quot;, AGI);\r\n         System.out.println(&quot;Error: Income too high to use this form&quot;);\r\n         }\r\n         \r\n         Income = scnr.nextInt();\r\n         if (Income &gt; 0) {\r\n            System.out.printf(&quot;Taxable income: $%,d\\n&quot;, Income);\r\n         }\r\n         status = scnr.nextInt();\r\n            if (status == 1) { \r\n               status = 12000;  \r\n               System.out.printf(&quot;Deduction: $%,d\\n&quot;,status);\r\n               \r\n               if (Income &gt; 0 &amp;&amp; Income &lt;= 10000) {\r\n                     System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income * .10)));\r\n                  }\r\n               else if (Income &gt; 10001 &amp;&amp; Income &lt;= 40000) {\r\n                     System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income + 1000 *.20)));\r\n                  }\r\n               else if (Income &gt; 40001 &amp;&amp; Income &lt;= 85000) {\r\n                     System.out.printf(&quot;Federal tax:$%,d\\n &quot;, (Math.round(Income +4600 *.20)));\r\n                  }\r\n              else if (Income &gt; 85000) {\r\n                     System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income + 14500 * .24)));\r\n                  }\r\n            }\r\n                  \r\n            if (status == 2){\r\n               status = 24000;\r\n               System.out.printf(&quot;Deduction: $%,d\\n&quot;,status);\r\n               \r\n               if (Income &gt; 0 &amp;&amp; Income &lt;= 20000) {\r\n                   System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income * .10)));\r\n               }   \r\n               else if (Income &gt; 20001 &amp;&amp; Income &lt; 80000) {\r\n                   System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income + 2000 * .12)));\r\n               }\r\n               else if (Income &gt; 80000) {\r\n                   System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income + 9200 * .22)));\r\n               }\r\n            }\r\n&#39;&#39;&#39;\r\n","title":"Java income tax form","body":"<p>I'm a very new java student and am currently working on a program that I have been stuck on, it's an incremental program and it was working perfect with the first 2 tests and now I'm not sure what's happened. I will post my code below and hopefully someone can help me. Thanks! The scanner takes the input from the computer and is supposed to show something like this to the console:</p>\n<p>AGI: $80,500<br />\nDeduction: $24,000<br />\nTaxable income: $56,500<br />\nFederal tax: $6,380<br />\nTax refund: $5,620</p>\n<p>it is supposed to test for these 2 first:</p>\n<p>AGI: $120,523<br />\nError: Income too high to use this form</p>\n<p>which passed until I wrote the rest of the code:</p>\n<pre><code>import java.util.Scanner;\nimport java.io.*;\n\npublic class LabProgram {\npublic static void main(String[] args) {\n Scanner scnr = new Scanner(System.in);\n  int wages;\n  int taxableInterest;\n  int unemploymentComp;\n  int status;\n  int taxWithheld;\n  int AGI;\n  int deduction;\n  int fedTax;\n  int Income;\n  \n  wages = scnr.nextInt();\n  taxableInterest = scnr.nextInt();\n  unemploymentComp = scnr.nextInt();\n  \n  AGI = (wages + taxableInterest + unemploymentComp);\n  status = scnr.nextInt();\n  Income = (AGI - status);\n     \n  \n  if (AGI &lt; 120000){\n     System.out.printf(&quot;AGI: $%,d\\n&quot;, AGI);\n     \n  }else{\n     System.out.printf(&quot;AGI: $%,d\\n&quot;, AGI);\n     System.out.println(&quot;Error: Income too high to use this form&quot;);\n     }\n     \n     Income = scnr.nextInt();\n     if (Income &gt; 0) {\n        System.out.printf(&quot;Taxable income: $%,d\\n&quot;, Income);\n     }\n     status = scnr.nextInt();\n        if (status == 1) { \n           status = 12000;  \n           System.out.printf(&quot;Deduction: $%,d\\n&quot;,status);\n           \n           if (Income &gt; 0 &amp;&amp; Income &lt;= 10000) {\n                 System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income * .10)));\n              }\n           else if (Income &gt; 10001 &amp;&amp; Income &lt;= 40000) {\n                 System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income + 1000 *.20)));\n              }\n           else if (Income &gt; 40001 &amp;&amp; Income &lt;= 85000) {\n                 System.out.printf(&quot;Federal tax:$%,d\\n &quot;, (Math.round(Income +4600 *.20)));\n              }\n          else if (Income &gt; 85000) {\n                 System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income + 14500 * .24)));\n              }\n        }\n              \n        if (status == 2){\n           status = 24000;\n           System.out.printf(&quot;Deduction: $%,d\\n&quot;,status);\n           \n           if (Income &gt; 0 &amp;&amp; Income &lt;= 20000) {\n               System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income * .10)));\n           }   \n           else if (Income &gt; 20001 &amp;&amp; Income &lt; 80000) {\n               System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income + 2000 * .12)));\n           }\n           else if (Income &gt; 80000) {\n               System.out.printf(&quot;Federal tax: $%,d\\n&quot;, (Math.round(Income + 9200 * .22)));\n           }\n        }\n</code></pre>\n<p>'''</p>\n"},{"tags":["java","android","json","maven","jackson"],"comments":[{"owner":{"account_id":3375606,"reputation":10150,"user_id":2833783,"accept_rate":56,"display_name":"Illegal Argument"},"score":0,"creation_date":1402190205,"post_id":24102137,"comment_id":37178462,"body_markdown":"google Gson can be used","body":"google Gson can be used"},{"owner":{"account_id":1692509,"reputation":1242,"user_id":2347490,"accept_rate":67,"display_name":"Mihai"},"score":0,"creation_date":1402190406,"post_id":24102137,"comment_id":37178491,"body_markdown":"Can you pls give me an example how? I read the documentation a little bit and i didn&#39;t see anything mentioning .toString","body":"Can you pls give me an example how? I read the documentation a little bit and i didn&#39;t see anything mentioning .toString"},{"owner":{"account_id":3375606,"reputation":10150,"user_id":2833783,"accept_rate":56,"display_name":"Illegal Argument"},"score":0,"creation_date":1402190518,"post_id":24102137,"comment_id":37178510,"body_markdown":"http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/ this should help","body":"<a href=\"http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/\" rel=\"nofollow noreferrer\">mkyong.com/java/&hellip;</a> this should help"},{"owner":{"account_id":1692509,"reputation":1242,"user_id":2347490,"accept_rate":67,"display_name":"Mihai"},"score":0,"creation_date":1402220946,"post_id":24102137,"comment_id":37183501,"body_markdown":"It is not what I am looking for. Please read more carefully the question","body":"It is not what I am looking for. Please read more carefully the question"}],"answers":[{"tags":[],"owner":{"account_id":1692509,"reputation":1242,"user_id":2347490,"accept_rate":67,"display_name":"Mihai"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1404229092,"creation_date":1404229092,"answer_id":24514265,"question_id":24102137,"body_markdown":"I have fixed my problem by overriding my toString() and printing directly a json object\r\n\r\n    StringBuilder builder = new StringBuilder();\r\n            \tbuilder.append(&quot;{\\&quot;id\\&quot; :&quot;);\r\n            \tbuilder.append(id);\r\n        \t\tbuilder.append(&quot;, \\&quot;latitude\\&quot; :&quot;);\r\n            \tbuilder.append(latitude);\r\n            \tbuilder.append(&quot;, \\&quot;longitude\\&quot; :&quot;);\r\n            \tbuilder.append(longitude);\r\n            \tbuilder.append(&quot;}&quot;);\r\n            return builder.toString();\r\n\r\n","title":"JSON object from java ObjectName.toString","body":"<p>I have fixed my problem by overriding my toString() and printing directly a json object</p>\n\n<pre><code>StringBuilder builder = new StringBuilder();\n            builder.append(\"{\\\"id\\\" :\");\n            builder.append(id);\n            builder.append(\", \\\"latitude\\\" :\");\n            builder.append(latitude);\n            builder.append(\", \\\"longitude\\\" :\");\n            builder.append(longitude);\n            builder.append(\"}\");\n        return builder.toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1477402,"reputation":3323,"user_id":1387484,"accept_rate":71,"display_name":"mithrop"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1404230045,"creation_date":1404230045,"answer_id":24514595,"question_id":24102137,"body_markdown":"A JSON parser&#39;s goal is to make a JSON string from an Object or to create an Object from a JSON string.\r\n\r\nIn your own answer, manually making a JSON string from your Object is ok but I think that using a JSON parser will make your code easiest to maintain and more efficient.\r\n\r\nYou can use this toString() method :\r\n\r\n    public String toString() {\r\n        Gson gson = new Gson();\r\n        return gson.toJson(this, Bus.class);\r\n    }\r\n\r\nWith this solution, even if you remove or add fields in your class, the toString() method still be ok.\r\n\r\nTo finish, if you want to convert your object to a JSONObject, I advise you to create a method like `toJSONObject` and to manually make the conversion inside it.","title":"JSON object from java ObjectName.toString","body":"<p>A JSON parser's goal is to make a JSON string from an Object or to create an Object from a JSON string.</p>\n\n<p>In your own answer, manually making a JSON string from your Object is ok but I think that using a JSON parser will make your code easiest to maintain and more efficient.</p>\n\n<p>You can use this toString() method :</p>\n\n<pre><code>public String toString() {\n    Gson gson = new Gson();\n    return gson.toJson(this, Bus.class);\n}\n</code></pre>\n\n<p>With this solution, even if you remove or add fields in your class, the toString() method still be ok.</p>\n\n<p>To finish, if you want to convert your object to a JSONObject, I advise you to create a method like <code>toJSONObject</code> and to manually make the conversion inside it.</p>\n"},{"tags":[],"owner":{"account_id":20393288,"reputation":31,"user_id":14960732,"display_name":"florballa"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660746429,"creation_date":1660310842,"answer_id":73334934,"question_id":24102137,"body_markdown":"i know that this is old, but it is available to create you own json format in toString method. (Eclipse)\r\n\r\nStep 1. Right click in edit and go to Source (Alt+Shift+S) -&gt; And click &#39;Generate toString...&#39;\r\n\r\nStep 2. Click edit (as shown in picture)\r\n[Edit to String method][1]\r\n\r\n\r\nStep 3. Create new Template\r\n\r\nStep 4. Paste this line: ${object.className}&quot;:{&quot;${member.name()}&quot;:&quot;${member.value}&quot;, &quot;${otherMembers}&quot;}\r\n\r\nStep 5. Click ok and apply changes.\r\n\r\nHope this helps anybody. So this way is simpler and faster, you do not have to use gson or any other json parser.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EtGiK.png","title":"JSON object from java ObjectName.toString","body":"<p>i know that this is old, but it is available to create you own json format in toString method. (Eclipse)</p>\n<p>Step 1. Right click in edit and go to Source (Alt+Shift+S) -&gt; And click 'Generate toString...'</p>\n<p>Step 2. Click edit (as shown in picture)\n<a href=\"https://i.stack.imgur.com/EtGiK.png\" rel=\"nofollow noreferrer\">Edit to String method</a></p>\n<p>Step 3. Create new Template</p>\n<p>Step 4. Paste this line: ${object.className}&quot;:{&quot;${member.name()}&quot;:&quot;${member.value}&quot;, &quot;${otherMembers}&quot;}</p>\n<p>Step 5. Click ok and apply changes.</p>\n<p>Hope this helps anybody. So this way is simpler and faster, you do not have to use gson or any other json parser.</p>\n"}],"owner":{"account_id":1692509,"reputation":1242,"user_id":2347490,"accept_rate":67,"display_name":"Mihai"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7445,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":24514265,"answer_count":3,"score":2,"last_activity_date":1660746429,"creation_date":1402190027,"question_id":24102137,"body_markdown":"I have a java object witch generates this output when i type objectName.toString() :\r\n\r\n    Bus [id=1, nextStationID=0, previousStationID=0]\r\n\r\nIs there a JSON parser that lets me make a JSON from the string that my object generates?\r\nsomething like: `JsonObject x = new JsonObject(busObject.toString())`\r\n\r\nIt is important for me to generate it from the string that i get when calling the .toString method.\r\n\r\nAny help is appreciated.","title":"JSON object from java ObjectName.toString","body":"<p>I have a java object witch generates this output when i type objectName.toString() :</p>\n\n<pre><code>Bus [id=1, nextStationID=0, previousStationID=0]\n</code></pre>\n\n<p>Is there a JSON parser that lets me make a JSON from the string that my object generates?\nsomething like: <code>JsonObject x = new JsonObject(busObject.toString())</code></p>\n\n<p>It is important for me to generate it from the string that i get when calling the .toString method.</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["java","android","realm"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1660735122,"post_id":73387020,"comment_id":129601442,"body_markdown":"I cant speak about Realm in general, but this error is telling you that your database has already been created, and you are doing something else to try and create it again.","body":"I cant speak about Realm in general, but this error is telling you that your database has already been created, and you are doing something else to try and create it again."},{"owner":{"account_id":10684991,"reputation":111,"user_id":7865790,"display_name":"Choudhary Robin Singh"},"score":0,"creation_date":1660735323,"post_id":73387020,"comment_id":129601512,"body_markdown":"but i am creating this instanse only one time","body":"but i am creating this instanse only one time"}],"owner":{"account_id":10684991,"reputation":111,"user_id":7865790,"display_name":"Choudhary Robin Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660746386,"creation_date":1660732697,"question_id":73387020,"body_markdown":"Hello i have an error when i integrate the Realm Database in my project and I am using realm version 10.11.0 but when I run my project in device its throwing me the error in this line \r\n\r\n```\r\nRealm.getInstance(config)\r\n```\r\n\r\nThis is my Initialise method \r\n\r\n    public static Realm getRealmInstance() {\r\n        RealmConfiguration config = new RealmConfiguration.Builder().deleteRealmIfMigrationNeeded().build();\r\n        Realm realm = Realm.getInstance(config);\r\n        return realm;\r\n    }\r\n\r\n\r\nand here I used Realm Object Like This\r\n\r\n    Realm.init(this);\r\n    rChatDb = Helper.getRealmInstance();\r\n\r\n\r\nPlease tell me why my app is crash the crash report is \r\n\r\n2022-08-17 15:47:34.586 11047-11047/com.Roaming.forworld E/REALM_JNI: Exception has been thrown: Schema validation failed due to the following errors:\r\n    - Type &#39;Attachment&#39; appears more than once in the schema.\r\n    - Type &#39;AttachmentList&#39; appears more than once in the schema.\r\n    - Type &#39;Chat&#39; appears more than once in the schema.\r\n    - Type &#39;Group&#39; appears more than once in the schema.\r\n    - Type &#39;LogCall&#39; appears more than once in the schema.\r\n    - Type &#39;Message&#39; appears more than once in the schema.\r\n    - Type &#39;MessageNew&#39; appears more than once in the schema.\r\n    - Type &#39;MyString&#39; appears more than once in the schema.\r\n    - Type &#39;Status&#39; appears more than once in the schema.\r\n    - Type &#39;StatusImage&#39; appears more than once in the schema.\r\n    - Type &#39;StatusImageList&#39; appears more than once in the schema.\r\n    - Type &#39;StatusImageNew&#39; appears more than once in the schema.\r\n    - Type &#39;StatusNew&#39; appears more than once in the schema.\r\n    - Type &#39;User&#39; appears more than once in the schema.\r\n    - Type &#39;solochat&#39; appears more than once in the schema.\r\n2022-08-17 15:47:34.865 11047-11047/com.Roaming.forworld E/AndroidRuntime: FATAL EXCEPTION: main\r\n\r\n\r\n\r\n","title":"hello i am using Realm in my project but when i run my project its gives me a crash","body":"<p>Hello i have an error when i integrate the Realm Database in my project and I am using realm version 10.11.0 but when I run my project in device its throwing me the error in this line</p>\n<pre><code>Realm.getInstance(config)\n</code></pre>\n<p>This is my Initialise method</p>\n<pre><code>public static Realm getRealmInstance() {\n    RealmConfiguration config = new RealmConfiguration.Builder().deleteRealmIfMigrationNeeded().build();\n    Realm realm = Realm.getInstance(config);\n    return realm;\n}\n</code></pre>\n<p>and here I used Realm Object Like This</p>\n<pre><code>Realm.init(this);\nrChatDb = Helper.getRealmInstance();\n</code></pre>\n<p>Please tell me why my app is crash the crash report is</p>\n<p>2022-08-17 15:47:34.586 11047-11047/com.Roaming.forworld E/REALM_JNI: Exception has been thrown: Schema validation failed due to the following errors:\n- Type 'Attachment' appears more than once in the schema.\n- Type 'AttachmentList' appears more than once in the schema.\n- Type 'Chat' appears more than once in the schema.\n- Type 'Group' appears more than once in the schema.\n- Type 'LogCall' appears more than once in the schema.\n- Type 'Message' appears more than once in the schema.\n- Type 'MessageNew' appears more than once in the schema.\n- Type 'MyString' appears more than once in the schema.\n- Type 'Status' appears more than once in the schema.\n- Type 'StatusImage' appears more than once in the schema.\n- Type 'StatusImageList' appears more than once in the schema.\n- Type 'StatusImageNew' appears more than once in the schema.\n- Type 'StatusNew' appears more than once in the schema.\n- Type 'User' appears more than once in the schema.\n- Type 'solochat' appears more than once in the schema.\n2022-08-17 15:47:34.865 11047-11047/com.Roaming.forworld E/AndroidRuntime: FATAL EXCEPTION: main</p>\n"},{"tags":["java","apache-spark","apache-kafka"],"comments":[{"owner":{"account_id":8247130,"reputation":22669,"user_id":6202869,"accept_rate":50,"display_name":"Roland"},"score":0,"creation_date":1531739502,"post_id":51360347,"comment_id":89692966,"body_markdown":"Try using 2.3.1 also for the spark-streaming-kafka dependency","body":"Try using 2.3.1 also for the spark-streaming-kafka dependency"},{"owner":{"account_id":8247130,"reputation":22669,"user_id":6202869,"accept_rate":50,"display_name":"Roland"},"score":0,"creation_date":1531739824,"post_id":51360347,"comment_id":89693131,"body_markdown":"Check also related questions and their answers about `java.lang.AbstractMethodError`.","body":"Check also related questions and their answers about <code>java.lang.AbstractMethodError</code>."},{"owner":{"account_id":2701010,"reputation":1085,"user_id":2331741,"accept_rate":100,"display_name":"filip_j"},"score":1,"creation_date":1531740024,"post_id":51360347,"comment_id":89693248,"body_markdown":"Thanks @Roland works like a charm. Can you please add this as answer so I can accept it as a solution","body":"Thanks @Roland works like a charm. Can you please add this as answer so I can accept it as a solution"}],"answers":[{"tags":[],"owner":{"account_id":8247130,"reputation":22669,"user_id":6202869,"accept_rate":50,"display_name":"Roland"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1531740177,"creation_date":1531740177,"answer_id":51360651,"question_id":51360347,"body_markdown":"Try using 2.3.1 also for the spark-streaming-kafka dependency.\n\nCheck also other related questions and their answers about `java.lang.AbstractMethodError`.\n\nIt usually means a mismatch between used libraries and their interfaces/implementations.","title":"Apache Spark Streaming with Java &amp; Kafka","body":"<p>Try using 2.3.1 also for the spark-streaming-kafka dependency.</p>\n\n<p>Check also other related questions and their answers about <code>java.lang.AbstractMethodError</code>.</p>\n\n<p>It usually means a mismatch between used libraries and their interfaces/implementations.</p>\n"}],"owner":{"account_id":2701010,"reputation":1085,"user_id":2331741,"accept_rate":100,"display_name":"filip_j"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1561,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":51360651,"answer_count":1,"score":2,"last_activity_date":1660746296,"creation_date":1531739136,"question_id":51360347,"body_markdown":"I&#39;m trying to run Spark Streaming example from the [official Spark website][1] \r\n\r\nThose are the dependencies I use in my pom file:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spark-core_2.11&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spark-streaming_2.11&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t\r\n\t&lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spark-streaming-kafka-0-10_2.11&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.2.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\nThis is my Java code:\r\n\r\n    package com.myproject.spark;\r\n\r\n    import java.util.Arrays;\r\n    import java.util.Collection;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import org.apache.kafka.clients.consumer.ConsumerRecord;\r\n    import org.apache.kafka.common.serialization.StringDeserializer;\r\n    import org.apache.spark.SparkConf;\r\n    import org.apache.spark.streaming.Durations;\r\n    import org.apache.spark.streaming.api.java.JavaInputDStream;\r\n    import org.apache.spark.streaming.api.java.JavaStreamingContext;\r\n    import org.apache.spark.streaming.kafka010.ConsumerStrategies;\r\n    import org.apache.spark.streaming.kafka010.KafkaUtils;\r\n    import org.apache.spark.streaming.kafka010.LocationStrategies;\r\n\r\n    import com.myproject.spark.serialization.JsonDeserializer;\r\n\r\n    import scala.Tuple2;\r\n\r\n    public class MainEntryPoint {\r\n      public static void main(String[] args) {\r\n        Map&lt;String, Object&gt; kafkaParams = new HashMap&lt;String, Object&gt;();\r\n        kafkaParams.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092,localhost:9093,localhost:9094&quot;);\r\n        kafkaParams.put(&quot;key.deserializer&quot;, StringDeserializer.class);\r\n        kafkaParams.put(&quot;value.deserializer&quot;,JsonDeserializer.class.getName());\r\n        kafkaParams.put(&quot;group.id&quot;, &quot;ttk-event-listener&quot;);\r\n        kafkaParams.put(&quot;auto.offset.reset&quot;, &quot;latest&quot;);\r\n        kafkaParams.put(&quot;enable.auto.commit&quot;, false);\r\n\r\n        Collection&lt;String&gt; topics = Arrays.asList(&quot;topic1&quot;, &quot;topic2&quot;);\r\n    \r\n        SparkConf conf = new SparkConf()\r\n            .setMaster(&quot;local[*]&quot;)\r\n            .setAppName(&quot;EMSStreamingApp&quot;);\r\n        JavaStreamingContext streamingContext =\r\n            new JavaStreamingContext(conf, Durations.seconds(1));\r\n\r\n        JavaInputDStream&lt;ConsumerRecord&lt;String, String&gt;&gt; stream =\r\n          KafkaUtils.createDirectStream(\r\n            streamingContext,\r\n            LocationStrategies.PreferConsistent(),\r\n            ConsumerStrategies.&lt;String, String&gt;Subscribe(topics, kafkaParams)\r\n          );\r\n\r\n        stream.mapToPair(record -&gt; new Tuple2&lt;&gt;(record.key(), record.value()));\r\n    \r\n    \r\n        streamingContext.start();\r\n        try {\r\n          streamingContext.awaitTermination();\r\n        } catch (InterruptedException e) {\r\n          // TODO Auto-generated catch block\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\nWhen I try to run it from Eclipse I get following exception:\r\n\r\n    18/07/16 13:35:27 INFO BlockManagerMaster: Registered BlockManager BlockManagerId(driver, 192.168.1.106, 51604, None)\r\n    18/07/16 13:35:27 INFO BlockManager: Initialized BlockManager: BlockManagerId(driver, 192.168.1.106, 51604, None)\r\n    Exception in thread &quot;main&quot; java.lang.AbstractMethodError\r\n\tat org.apache.spark.internal.Logging$class.initializeLogIfNecessary(Logging.scala:99)\r\n\tat org.apache.spark.streaming.kafka010.KafkaUtils$.initializeLogIfNecessary(KafkaUtils.scala:39)\r\n\tat org.apache.spark.internal.Logging$class.log(Logging.scala:46)\r\n\tat org.apache.spark.streaming.kafka010.KafkaUtils$.log(KafkaUtils.scala:39)\r\n\tat org.apache.spark.internal.Logging$class.logWarning(Logging.scala:66)\r\n\tat org.apache.spark.streaming.kafka010.KafkaUtils$.logWarning(KafkaUtils.scala:39)\r\n\tat org.apache.spark.streaming.kafka010.KafkaUtils$.fixKafkaParams(KafkaUtils.scala:201)\r\n\tat org.apache.spark.streaming.kafka010.DirectKafkaInputDStream.&lt;init&gt;(DirectKafkaInputDStream.scala:63)\r\n\tat org.apache.spark.streaming.kafka010.KafkaUtils$.createDirectStream(KafkaUtils.scala:147)\r\n\tat org.apache.spark.streaming.kafka010.KafkaUtils$.createDirectStream(KafkaUtils.scala:124)\r\n\tat org.apache.spark.streaming.kafka010.KafkaUtils$.createDirectStream(KafkaUtils.scala:168)\r\n\tat org.apache.spark.streaming.kafka010.KafkaUtils.createDirectStream(KafkaUtils.scala)\r\n\tat com.myproject.spark.MainEntryPoint.main(MainEntryPoint.java:47)\r\n    18/07/16 13:35:28 INFO SparkContext: Invoking stop() from shutdown hook\r\n\r\nI run this from my IDE (eclipse). Do I have to create and deploy the JAR into spark to make it run. If anyone knows about the exception, please share your experience. Thanks in advance\r\n\r\n  [1]: https://spark.apache.org/docs/2.2.0/streaming-kafka-0-10-integration.html &quot;official Spark website&quot;","title":"Apache Spark Streaming with Java &amp; Kafka","body":"<p>I'm trying to run Spark Streaming example from the <a href=\"https://spark.apache.org/docs/2.2.0/streaming-kafka-0-10-integration.html\" rel=\"nofollow noreferrer\" title=\"official Spark website\">official Spark website</a></p>\n<p>Those are the dependencies I use in my pom file:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n  &lt;artifactId&gt;spark-core_2.11&lt;/artifactId&gt;\n  &lt;version&gt;2.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n    &lt;artifactId&gt;spark-streaming_2.11&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n    &lt;artifactId&gt;spark-streaming-kafka-0-10_2.11&lt;/artifactId&gt;\n    &lt;version&gt;2.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This is my Java code:</p>\n<pre><code>package com.myproject.spark;\n\nimport java.util.Arrays;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.kafka.clients.consumer.ConsumerRecord;\nimport org.apache.kafka.common.serialization.StringDeserializer;\nimport org.apache.spark.SparkConf;\nimport org.apache.spark.streaming.Durations;\nimport org.apache.spark.streaming.api.java.JavaInputDStream;\nimport org.apache.spark.streaming.api.java.JavaStreamingContext;\nimport org.apache.spark.streaming.kafka010.ConsumerStrategies;\nimport org.apache.spark.streaming.kafka010.KafkaUtils;\nimport org.apache.spark.streaming.kafka010.LocationStrategies;\n\nimport com.myproject.spark.serialization.JsonDeserializer;\n\nimport scala.Tuple2;\n\npublic class MainEntryPoint {\n  public static void main(String[] args) {\n    Map&lt;String, Object&gt; kafkaParams = new HashMap&lt;String, Object&gt;();\n    kafkaParams.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092,localhost:9093,localhost:9094&quot;);\n    kafkaParams.put(&quot;key.deserializer&quot;, StringDeserializer.class);\n    kafkaParams.put(&quot;value.deserializer&quot;,JsonDeserializer.class.getName());\n    kafkaParams.put(&quot;group.id&quot;, &quot;ttk-event-listener&quot;);\n    kafkaParams.put(&quot;auto.offset.reset&quot;, &quot;latest&quot;);\n    kafkaParams.put(&quot;enable.auto.commit&quot;, false);\n\n    Collection&lt;String&gt; topics = Arrays.asList(&quot;topic1&quot;, &quot;topic2&quot;);\n\n    SparkConf conf = new SparkConf()\n        .setMaster(&quot;local[*]&quot;)\n        .setAppName(&quot;EMSStreamingApp&quot;);\n    JavaStreamingContext streamingContext =\n        new JavaStreamingContext(conf, Durations.seconds(1));\n\n    JavaInputDStream&lt;ConsumerRecord&lt;String, String&gt;&gt; stream =\n      KafkaUtils.createDirectStream(\n        streamingContext,\n        LocationStrategies.PreferConsistent(),\n        ConsumerStrategies.&lt;String, String&gt;Subscribe(topics, kafkaParams)\n      );\n\n    stream.mapToPair(record -&gt; new Tuple2&lt;&gt;(record.key(), record.value()));\n\n\n    streamingContext.start();\n    try {\n      streamingContext.awaitTermination();\n    } catch (InterruptedException e) {\n      // TODO Auto-generated catch block\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n<p>When I try to run it from Eclipse I get following exception:</p>\n<pre><code>18/07/16 13:35:27 INFO BlockManagerMaster: Registered BlockManager BlockManagerId(driver, 192.168.1.106, 51604, None)\n18/07/16 13:35:27 INFO BlockManager: Initialized BlockManager: BlockManagerId(driver, 192.168.1.106, 51604, None)\nException in thread &quot;main&quot; java.lang.AbstractMethodError\nat org.apache.spark.internal.Logging$class.initializeLogIfNecessary(Logging.scala:99)\nat org.apache.spark.streaming.kafka010.KafkaUtils$.initializeLogIfNecessary(KafkaUtils.scala:39)\nat org.apache.spark.internal.Logging$class.log(Logging.scala:46)\nat org.apache.spark.streaming.kafka010.KafkaUtils$.log(KafkaUtils.scala:39)\nat org.apache.spark.internal.Logging$class.logWarning(Logging.scala:66)\nat org.apache.spark.streaming.kafka010.KafkaUtils$.logWarning(KafkaUtils.scala:39)\nat org.apache.spark.streaming.kafka010.KafkaUtils$.fixKafkaParams(KafkaUtils.scala:201)\nat org.apache.spark.streaming.kafka010.DirectKafkaInputDStream.&lt;init&gt;(DirectKafkaInputDStream.scala:63)\nat org.apache.spark.streaming.kafka010.KafkaUtils$.createDirectStream(KafkaUtils.scala:147)\nat org.apache.spark.streaming.kafka010.KafkaUtils$.createDirectStream(KafkaUtils.scala:124)\nat org.apache.spark.streaming.kafka010.KafkaUtils$.createDirectStream(KafkaUtils.scala:168)\nat org.apache.spark.streaming.kafka010.KafkaUtils.createDirectStream(KafkaUtils.scala)\nat com.myproject.spark.MainEntryPoint.main(MainEntryPoint.java:47)\n18/07/16 13:35:28 INFO SparkContext: Invoking stop() from shutdown hook\n</code></pre>\n<p>I run this from my IDE (eclipse). Do I have to create and deploy the JAR into spark to make it run. If anyone knows about the exception, please share your experience. Thanks in advance</p>\n"},{"tags":["java","junit","mockito","spring-test-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1660746291,"post_id":73390142,"comment_id":129605862,"body_markdown":"There is no assert so what you see and state doesn&#39;t really make sense. But they aren&#39;t the same I I suspect it is due to you not implementing a proper `equals` and `hashCode` in your `Recipe`.","body":"There is no assert so what you see and state doesn&#39;t really make sense. But they aren&#39;t the same I I suspect it is due to you not implementing a proper <code>equals</code> and <code>hashCode</code> in your <code>Recipe</code>."},{"owner":{"account_id":25854896,"reputation":51,"user_id":19588345,"display_name":"fast"},"score":0,"creation_date":1660746560,"post_id":73390142,"comment_id":129605979,"body_markdown":"@M.Deinum equals is supposed to compare memory addresses. hashcode also returns the memory address by default. It really shouldn&#39;t be a problem!","body":"@M.Deinum equals is supposed to compare memory addresses. hashcode also returns the memory address by default. It really shouldn&#39;t be a problem!"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1660747476,"post_id":73390142,"comment_id":129606335,"body_markdown":"And if you have a hashset with 2 different object instances from the database they aren&#39;t equal... Because they are 2 different instances of the same row. Hence a proper equals and hashcode is important. Even more important when you use JPA (see https://vladmihalcea.com/the-best-way-to-implement-equals-hashcode-and-tostring-with-jpa-and-hibernate/) as well.","body":"And if you have a hashset with 2 different object instances from the database they aren&#39;t equal... Because they are 2 different instances of the same row. Hence a proper equals and hashcode is important. Even more important when you use JPA (see <a href=\"https://vladmihalcea.com/the-best-way-to-implement-equals-hashcode-and-tostring-with-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">vladmihalcea.com/&hellip;</a>) as well."},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":1,"creation_date":1660750023,"post_id":73390142,"comment_id":129607570,"body_markdown":"The assert is in the method `.andExpect(model().attribute(&quot;recipes&quot;, recipeService.getRecipes()))` anyway are you sure that two different call to the repositories produces the same object? Make a test calling twice the recipeService.getRecipes() and compare if the memory address are the same for the recipe. If you use mock the service will always return the object you give it","body":"The assert is in the method <code>.andExpect(model().attribute(&quot;recipes&quot;, recipeService.getRecipes()))</code> anyway are you sure that two different call to the repositories produces the same object? Make a test calling twice the recipeService.getRecipes() and compare if the memory address are the same for the recipe. If you use mock the service will always return the object you give it"},{"owner":{"account_id":25854896,"reputation":51,"user_id":19588345,"display_name":"fast"},"score":0,"creation_date":1660758548,"post_id":73390142,"comment_id":129610632,"body_markdown":"@Pp88 I checked that the repository is the same for both","body":"@Pp88 I checked that the repository is the same for both"},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":1,"creation_date":1660759073,"post_id":73390142,"comment_id":129610798,"body_markdown":"Im not talking about the repository bean but the recipe object returned by two different calls to findAll, that in my opinion should be different, so as suggested you have to override equals","body":"Im not talking about the repository bean but the recipe object returned by two different calls to findAll, that in my opinion should be different, so as suggested you have to override equals"}],"owner":{"account_id":25854896,"reputation":51,"user_id":19588345,"display_name":"fast"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660746063,"creation_date":1660746063,"question_id":73390142,"body_markdown":"I am doing an mvc test in my program that the getRecipes() method is supposed to return a list of recipes. Also, the Recipe class has not overridden the equals method and the hashCode. \r\n\r\nAs it is known in the RecipeService class, a new HashSet is returned every time, but **recipes** which is in it is the same because its **repository** is the same. Therefore, we should expect to receive a different HashSet but the same recipe with each call to the getRecipes method, so when calling equals on the hash sets, it should return true because they have the same content, but surprisingly When runnig, we see that these two hash sets have different recipes!\r\n\r\n    @SpringBootTest\r\n    class RecipeControllerTest {\r\n        @Mock\r\n        private Model model;\r\n        @Autowired\r\n        private RecipeService recipeService;\r\n        @Autowired\r\n        private RecipeController recipeController;\r\n    \r\n        @Test\r\n        public void testMVC() {\r\n            try {\r\n                MockMvc mockMvc = MockMvcBuilders.standaloneSetup(recipeController).build();\r\n                mockMvc.perform(MockMvcRequestBuilders.get(&quot;/&quot;))\r\n                        .andExpect(status().isOk())\r\n                        .andExpect(model().attribute(&quot;recipes&quot;, recipeService.getRecipes()))\r\n                        .andExpect(view().name(&quot;index&quot;));\r\n    \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nRecipeService class:\r\n\r\n\r\n    public class RecipeService {\r\n        private final RecipeRepository recipeRepository;\r\n\r\n    public RecipeService(RecipeRepository recipeRepository) {\r\n        this.recipeRepository = recipeRepository;\r\n    }\r\n\r\n     public Set&lt;Recipe&gt; getRecipes(){\r\n            log.debug(&quot;debugging message inside of &quot;+getClass().getSimpleName());\r\n            Set&lt;Recipe&gt; recipes=new HashSet&lt;&gt;();\r\n             recipeRepository.findAll().forEach(recipes::add);\r\n             return recipes;\r\n        }\r\n    }\r\n\r\nerror:\r\n\r\n    java.lang.AssertionError: Model attribute &#39;recipes&#39; expected:&lt;[com.arbabsoft.recipe.model.Recipe@4619854a]&gt; but was:&lt;[com.arbabsoft.recipe.model.Recipe@6eff05e7]&gt;\r\n    Expected :[com.arbabsoft.recipe.model.Recipe@4619854a]\r\n    Actual   :[com.arbabsoft.recipe.model.Recipe@6eff05e7]\r\n\r\n\r\nBut when I apply the following changes to the RecipeControllerTest class, the test passes.\r\n\r\n    @Mock\r\n    private RecipeService recipeService;\r\n    @InjectMocks\r\n    private RecipeController recipeController;\r\n\r\nWhat is the reason for this? Did JUnit, Mockito and spring MVC test conflict?","title":"Why are not these two objects equal in spring mvc test?","body":"<p>I am doing an mvc test in my program that the getRecipes() method is supposed to return a list of recipes. Also, the Recipe class has not overridden the equals method and the hashCode.</p>\n<p>As it is known in the RecipeService class, a new HashSet is returned every time, but <strong>recipes</strong> which is in it is the same because its <strong>repository</strong> is the same. Therefore, we should expect to receive a different HashSet but the same recipe with each call to the getRecipes method, so when calling equals on the hash sets, it should return true because they have the same content, but surprisingly When runnig, we see that these two hash sets have different recipes!</p>\n<pre><code>@SpringBootTest\nclass RecipeControllerTest {\n    @Mock\n    private Model model;\n    @Autowired\n    private RecipeService recipeService;\n    @Autowired\n    private RecipeController recipeController;\n\n    @Test\n    public void testMVC() {\n        try {\n            MockMvc mockMvc = MockMvcBuilders.standaloneSetup(recipeController).build();\n            mockMvc.perform(MockMvcRequestBuilders.get(&quot;/&quot;))\n                    .andExpect(status().isOk())\n                    .andExpect(model().attribute(&quot;recipes&quot;, recipeService.getRecipes()))\n                    .andExpect(view().name(&quot;index&quot;));\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>RecipeService class:</p>\n<pre><code>public class RecipeService {\n    private final RecipeRepository recipeRepository;\n\npublic RecipeService(RecipeRepository recipeRepository) {\n    this.recipeRepository = recipeRepository;\n}\n\n public Set&lt;Recipe&gt; getRecipes(){\n        log.debug(&quot;debugging message inside of &quot;+getClass().getSimpleName());\n        Set&lt;Recipe&gt; recipes=new HashSet&lt;&gt;();\n         recipeRepository.findAll().forEach(recipes::add);\n         return recipes;\n    }\n}\n</code></pre>\n<p>error:</p>\n<pre><code>java.lang.AssertionError: Model attribute 'recipes' expected:&lt;[com.arbabsoft.recipe.model.Recipe@4619854a]&gt; but was:&lt;[com.arbabsoft.recipe.model.Recipe@6eff05e7]&gt;\nExpected :[com.arbabsoft.recipe.model.Recipe@4619854a]\nActual   :[com.arbabsoft.recipe.model.Recipe@6eff05e7]\n</code></pre>\n<p>But when I apply the following changes to the RecipeControllerTest class, the test passes.</p>\n<pre><code>@Mock\nprivate RecipeService recipeService;\n@InjectMocks\nprivate RecipeController recipeController;\n</code></pre>\n<p>What is the reason for this? Did JUnit, Mockito and spring MVC test conflict?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":15925517,"reputation":87,"user_id":11491219,"display_name":"Shail"},"score":2,"creation_date":1660704043,"post_id":73382193,"comment_id":129593029,"body_markdown":"Could you provide the code sample you are using to log in the user?","body":"Could you provide the code sample you are using to log in the user?"},{"owner":{"account_id":19648646,"reputation":559,"user_id":14385721,"display_name":"TTT2"},"score":1,"creation_date":1660704413,"post_id":73382193,"comment_id":129593081,"body_markdown":"@Shail sorry for it, just added it.","body":"@Shail sorry for it, just added it."},{"owner":{"account_id":268201,"reputation":419,"user_id":1573368,"display_name":"Sheel Prabhakar"},"score":0,"creation_date":1660708093,"post_id":73382193,"comment_id":129593570,"body_markdown":"Check this https://stackoverflow.com/questions/49654143/spring-security-5-there-is-no-passwordencoder-mapped-for-the-id-null","body":"Check this <a href=\"https://stackoverflow.com/questions/49654143/spring-security-5-there-is-no-passwordencoder-mapped-for-the-id-null\" title=\"spring security 5 there is no passwordencoder mapped for the id null\">stackoverflow.com/questions/49654143/&hellip;</a>"},{"owner":{"account_id":19648646,"reputation":559,"user_id":14385721,"display_name":"TTT2"},"score":0,"creation_date":1660708785,"post_id":73382193,"comment_id":129593643,"body_markdown":"thanks you a lot, but it does not works because there are using  WebSecurityConfigurerAdapter and the new component-based configuration does not use it","body":"thanks you a lot, but it does not works because there are using  WebSecurityConfigurerAdapter and the new component-based configuration does not use it"},{"owner":{"account_id":15925517,"reputation":87,"user_id":11491219,"display_name":"Shail"},"score":0,"creation_date":1660710493,"post_id":73382193,"comment_id":129593883,"body_markdown":"In your SecurityConfiguration.java remove the declaration ```private final BCryptPasswordEncoder bCryptPasswordEncoder;``` that could be a issue as no bean is defined for it.","body":"In your SecurityConfiguration.java remove the declaration <code>private final BCryptPasswordEncoder bCryptPasswordEncoder;</code> that could be a issue as no bean is defined for it."},{"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"score":1,"creation_date":1660718717,"post_id":73382193,"comment_id":129595638,"body_markdown":"@TTT2 please add the code from your CustomAuthenticationFilter, because judging by the stacktrace the exception is raised there when AuthenticationManager is trying to authenticate","body":"@TTT2 please add the code from your CustomAuthenticationFilter, because judging by the stacktrace the exception is raised there when AuthenticationManager is trying to authenticate"}],"answers":[{"tags":[],"owner":{"account_id":22367616,"reputation":11,"user_id":16583145,"display_name":"Piyush Kumar"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1660716912,"creation_date":1660716912,"answer_id":73383654,"question_id":73382193,"body_markdown":"In `spring-security-core:5.0.0.RC1`, the default `PasswordEncoder` is built as a `DelegatingPasswordEncoder`. When you store the users in memory, you are providing the passwords in plain text and when trying to retrieve the encoder from the `DelegatingPasswordEncoder` to validate the password it can&#39;t find one that matches the way in which these passwords were stored.\r\n\r\nUse this way to create users instead.\r\n\r\n    User.withDefaultPasswordEncoder().username(&quot;user&quot;).password(&quot;user&quot;).roles(&quot;USER&quot;).build();","title":"Spring Boot, Spring-Security - BcrypPasswordEncoder in new component-based security configuration","body":"<p>In <code>spring-security-core:5.0.0.RC1</code>, the default <code>PasswordEncoder</code> is built as a <code>DelegatingPasswordEncoder</code>. When you store the users in memory, you are providing the passwords in plain text and when trying to retrieve the encoder from the <code>DelegatingPasswordEncoder</code> to validate the password it can't find one that matches the way in which these passwords were stored.</p>\n<p>Use this way to create users instead.</p>\n<pre><code>User.withDefaultPasswordEncoder().username(&quot;user&quot;).password(&quot;user&quot;).roles(&quot;USER&quot;).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660726920,"creation_date":1660726920,"answer_id":73385684,"question_id":73382193,"body_markdown":"Judging by the stacktrace I assume your `CustomAuthenticationFilter` calls `AuthenticationManager.authenticate()` method on a `UsernamePasswordAuthenticationToken` object. That, by default, calls `DaoAuthenticationProvider`, which is created with a `DelegatingPasswordEncoder`, containing 11 password encoders, and which is trying to match passwords with this encoder (not your `BCryptPasswordEncoder` bean).\r\n\r\nThis `DelegatingPasswordEncoder` tries to match stored password, retrieved from your `UserDetailsService`, and **it assumes your password is stored with a key (prefix)**, like this:\r\n\r\n    {bcrypt}encodedPassword\r\n\r\nYou&#39;ve registered a bean of type `BCryptPasswordEncoder` and you&#39;re encoding your password with it, so passwords are stored without {bcrypt} prefix (just the encoded password is stored), and when calling `AuthenticationManager.authenticate()` mentioned `DelegatingPasswordEncoder` sees null prefix and cannot find the corresponding `PasswordEncoder` in a map - that&#39;s what the error message is about.\r\n\r\nSo you can define a `PasswordEncoder` bean as a `DelegatingPasswordEncoder`, which, by default, uses `BCryptPasswordEncoder` to encode passwords.\r\n\r\nLike this:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @RequiredArgsConstructor\r\n    public class SecurityConfiguration {\r\n    \r\n        private final AuthenticationManagerBuilder authManagerBuilder;\r\n    \r\n        @Bean\r\n        public PasswordEncoder encoder() {\r\n            return PasswordEncoderFactories.createDelegatingPasswordEncoder();\r\n        }\r\n    }\r\n\r\n\r\nThat way stored passwords will have {prefix} and `DaoAuthenticationProvider` will be able to match passwords.\r\nAlso I advise to remove the `BCryptPasswordEncoder` field from your `SecurityConfiguration` class - you don&#39;t need it there.\r\n\r\nAlso you can stuck with bean cycle dependencies, because your `UserDetailsService` injects `PasswordEncoder`, and `PasswordEncoder` is defined in a configuration, where `UserDetailsService` is injected, so you might also need refactoring.  \r\nFor example, try to extract `UserDetailsService`:\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    @Slf4j\r\n    public class UserDetailsServiceImpl implements UserDetailsService {\r\n    \r\n        private final AppUserRepo appUserRepo;\r\n    \r\n        @Override\r\n        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n            // your logic here\r\n            return new User(username, password, authorities);\r\n        }\r\n    }\r\n\r\n\r\nOr define a bean of this type `UserDetailsService` right in your `SecurityConfiguration` class:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @RequiredArgsConstructor\r\n    public class SecurityConfiguration {\r\n    \r\n        private final AppUserRepo appUserRepo;\r\n        // other fields\r\n    \r\n        @Bean\r\n        public UserDetailsService userDetailsService() {\r\n            return username -&gt; {\r\n                // your logic here\r\n                return new User(username, password, authorities);        \r\n            };\r\n        }\r\n    }\r\n\r\n\r\n\r\nAlso you can:\r\n- instead of a custom filter create your own login endpoint, where you can check password matches using `BCryptPasswordEncoder` directly;\r\n- create your own `AuthenticationProvider` with a `BCryptPasswordEncoder` as a password encoder and use it in your `CustomAuthenticationFilter` to authenticate user.","title":"Spring Boot, Spring-Security - BcrypPasswordEncoder in new component-based security configuration","body":"<p>Judging by the stacktrace I assume your <code>CustomAuthenticationFilter</code> calls <code>AuthenticationManager.authenticate()</code> method on a <code>UsernamePasswordAuthenticationToken</code> object. That, by default, calls <code>DaoAuthenticationProvider</code>, which is created with a <code>DelegatingPasswordEncoder</code>, containing 11 password encoders, and which is trying to match passwords with this encoder (not your <code>BCryptPasswordEncoder</code> bean).</p>\n<p>This <code>DelegatingPasswordEncoder</code> tries to match stored password, retrieved from your <code>UserDetailsService</code>, and <strong>it assumes your password is stored with a key (prefix)</strong>, like this:</p>\n<pre><code>{bcrypt}encodedPassword\n</code></pre>\n<p>You've registered a bean of type <code>BCryptPasswordEncoder</code> and you're encoding your password with it, so passwords are stored without {bcrypt} prefix (just the encoded password is stored), and when calling <code>AuthenticationManager.authenticate()</code> mentioned <code>DelegatingPasswordEncoder</code> sees null prefix and cannot find the corresponding <code>PasswordEncoder</code> in a map - that's what the error message is about.</p>\n<p>So you can define a <code>PasswordEncoder</code> bean as a <code>DelegatingPasswordEncoder</code>, which, by default, uses <code>BCryptPasswordEncoder</code> to encode passwords.</p>\n<p>Like this:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfiguration {\n\n    private final AuthenticationManagerBuilder authManagerBuilder;\n\n    @Bean\n    public PasswordEncoder encoder() {\n        return PasswordEncoderFactories.createDelegatingPasswordEncoder();\n    }\n}\n</code></pre>\n<p>That way stored passwords will have {prefix} and <code>DaoAuthenticationProvider</code> will be able to match passwords.\nAlso I advise to remove the <code>BCryptPasswordEncoder</code> field from your <code>SecurityConfiguration</code> class - you don't need it there.</p>\n<p>Also you can stuck with bean cycle dependencies, because your <code>UserDetailsService</code> injects <code>PasswordEncoder</code>, and <code>PasswordEncoder</code> is defined in a configuration, where <code>UserDetailsService</code> is injected, so you might also need refactoring.<br />\nFor example, try to extract <code>UserDetailsService</code>:</p>\n<pre><code>@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    private final AppUserRepo appUserRepo;\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        // your logic here\n        return new User(username, password, authorities);\n    }\n}\n</code></pre>\n<p>Or define a bean of this type <code>UserDetailsService</code> right in your <code>SecurityConfiguration</code> class:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfiguration {\n\n    private final AppUserRepo appUserRepo;\n    // other fields\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return username -&gt; {\n            // your logic here\n            return new User(username, password, authorities);        \n        };\n    }\n}\n</code></pre>\n<p>Also you can:</p>\n<ul>\n<li>instead of a custom filter create your own login endpoint, where you can check password matches using <code>BCryptPasswordEncoder</code> directly;</li>\n<li>create your own <code>AuthenticationProvider</code> with a <code>BCryptPasswordEncoder</code> as a password encoder and use it in your <code>CustomAuthenticationFilter</code> to authenticate user.</li>\n</ul>\n"}],"owner":{"account_id":19648646,"reputation":559,"user_id":14385721,"display_name":"TTT2"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1711,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73385684,"answer_count":2,"score":2,"last_activity_date":1660745714,"creation_date":1660702580,"question_id":73382193,"body_markdown":"I am trying to use the new Component-Based (Without WebSecurityConfigurerAdapter) configuration and setted up my Security Configuration as follow:\r\n\r\n**SecurityConfiguration.java file**\r\n\r\n```\r\npackage com.tito.userservice.security;\r\n\r\nimport com.tito.userservice.filter.CustomAuthenticationFilter;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\n\r\n@Configuration @EnableWebSecurity @RequiredArgsConstructor\r\npublic class SecurityConfiguration {\r\n\r\n    private final UserDetailsService userDetailsService;\r\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\r\n    private final AuthenticationManagerBuilder authManagerBuilder;\r\n\r\n\r\n    @Bean\r\n    public PasswordEncoder encoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n\r\n    //----------------HTTP SECURITY CONFIG-------------------------------------\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.csrf().disable();\r\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n        http\r\n                .authorizeRequests().anyRequest().permitAll();\r\n                \r\n\r\n        http.addFilter(new CustomAuthenticationFilter(authManagerBuilder.getOrBuild()));\r\n\r\n        return http.build();\r\n    }\r\n\r\n    //----------------HTTP SECURITY CONFIG-------------------------------------\r\n\r\n\r\n\r\n}\r\n```\r\n\r\nbut when I run the application and try to log a user the following error appears even though I have the BCryptPasswordEncoder as a bean in my SecurityConfiguration:\r\n\r\n**Error Stack Trace***\r\n\r\n```\r\n2022-08-16 21:02:04.220 ERROR 13112 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\r\n\r\njava.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id &quot;null&quot;\r\n        at org.springframework.security.crypto.password.DelegatingPasswordEncoder$UnmappedIdPasswordEncoder.matches(DelegatingPasswordEncoder.java:289) ~[spring-security-crypto-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.crypto.password.DelegatingPasswordEncoder.matches(DelegatingPasswordEncoder.java:237) ~[spring-security-crypto-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:76) ~[spring-security-core-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147) ~[spring-security-core-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-5.7.2.jar:5.7.2]\r\n        at com.tito.userservice.filter.CustomAuthenticationFilter.attemptAuthentication(CustomAuthenticationFilter.java:43) ~[classes/:na]\r\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```\r\nWhich is the correct way to set up the PasswordEncoder in the new component-configuration?\r\n\r\n**Edit: adding login logic**\r\n\r\n**AppUserService interface**\r\n\r\n```\r\npackage com.tito.userservice.services;\r\n\r\nimport com.tito.userservice.domain.AppUser;\r\nimport com.tito.userservice.domain.Role;\r\n\r\nimport java.util.List;\r\n\r\npublic interface AppUserService {\r\n    AppUser saveUser(AppUser user);\r\n    Role saveRole(Role role);\r\n\r\n    void addRoleToUser(String username, String roleName);\r\n\r\n    AppUser getUser(String username);\r\n    List&lt;AppUser&gt;getUsers();\r\n\r\n}\r\n\r\n```\r\n\r\nand the **AppUserServiceImplementation**:\r\n```\r\npackage com.tito.userservice.services;\r\n\r\nimport com.tito.userservice.domain.AppUser;\r\nimport com.tito.userservice.domain.Role;\r\nimport com.tito.userservice.repo.AppUserRepo;\r\nimport com.tito.userservice.repo.RoleRepo;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.transaction.Transactional;\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\nimport java.util.List;\r\n\r\n@Service @RequiredArgsConstructor @Transactional @Slf4j\r\npublic class AppUserServiceImpl implements AppUserService, UserDetailsService {\r\n\r\n    private final AppUserRepo appUserRepo;\r\n    private final RoleRepo roleRepo;\r\n\r\n    private final PasswordEncoder passwordEncoder;\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        AppUser user =appUserRepo.findByUsername(username);\r\n        if (user == null){\r\n            log.error(&quot;User not found in the database&quot;);\r\n            throw new UsernameNotFoundException(&quot;User not found in the databse&quot;);\r\n        }else {\r\n            log.info(&quot;User found in the database: {}&quot;,username);\r\n        }\r\n        Collection&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n        user.getRoles().forEach(role -&gt; {\r\n            authorities.add(new SimpleGrantedAuthority(role.getName()));\r\n        });\r\n        return new org.springframework.security.core.userdetails.User(user.getUsername(), user.getPassword(), authorities);\r\n    }\r\n\r\n    @Override\r\n    public AppUser saveUser(AppUser user) {\r\n        log.info(&quot;Saving new user {} to the database&quot;,user.getName());\r\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\r\n        return appUserRepo.save(user);\r\n    }\r\n\r\n    @Override\r\n    public Role saveRole(Role role) {\r\n        log.info(&quot;Saving new role {} to the database&quot;,role.getName());\r\n        return roleRepo.save(role);\r\n    }\r\n\r\n    @Override\r\n    public void addRoleToUser(String username, String roleName) {\r\n        log.info(&quot;Adding role {} to user {}&quot;,roleName,username );\r\n\r\n        //real life could be good, or must be good, to do validation of below\r\n        AppUser user = appUserRepo.findByUsername(username);\r\n        Role role = roleRepo.findByName(roleName);\r\n        user.getRoles().add(role);\r\n    }\r\n\r\n    @Override\r\n    public AppUser getUser(String username) {\r\n        log.info(&quot;Fetching user {}&quot;,username );\r\n        return appUserRepo.findByUsername(username);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;AppUser&gt; getUsers() {\r\n        log.info(&quot;Fetching all users&quot;);\r\n        return appUserRepo.findAll();\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n**Edit2: added CustomAuthenticationFilter.java code**\r\n\r\n**CustomAuthenticationFilter.java**\r\n\r\n```\r\npackage com.tito.userservice.filter;\r\n\r\n\r\nimport com.auth0.jwt.JWT;\r\nimport com.auth0.jwt.algorithms.Algorithm;\r\nimport com.tito.userservice.domain.AppUser;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.Authentication;\r\nimport org.springframework.security.core.AuthenticationException;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\nimport org.springframework.security.core.userdetails.User;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.io.IOException;\r\n\r\nimport java.util.Date;\r\nimport java.util.stream.Collectors;\r\n\r\n\r\n@Slf4j\r\npublic class CustomAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n\r\n\r\n    private final AuthenticationManager authenticationManager;\r\n\r\n    public CustomAuthenticationFilter(AuthenticationManager authenticationManager){\r\n        this.authenticationManager = authenticationManager;\r\n    }\r\n    @Override\r\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\r\n        String username = request.getParameter(&quot;username&quot;);\r\n        String password = request.getParameter(&quot;password&quot;);\r\n        log.info(&quot;Username is: {}&quot;, username); log.info(&quot;Password is: {}&quot;,password);\r\n        UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(username,password);\r\n        return  authenticationManager.authenticate(authenticationToken);\r\n    }\r\n\r\n    @Override\r\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authentication) throws IOException, ServletException {\r\n        User user = (User)authentication.getPrincipal();\r\n        Algorithm algorithm = Algorithm.HMAC256(&quot;secret&quot;.getBytes()); //not for use in production, need to pass as encrypted and then decrypt here\r\n        String access_token = JWT.create()\r\n                .withSubject(user.getUsername())\r\n                .withExpiresAt(new Date(System.currentTimeMillis() +10*60*1000))\r\n                .withIssuer(request.getRequestURL().toString())\r\n                .withClaim(&quot;roles&quot;,user.getAuthorities().stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList()))\r\n                .sign(algorithm);\r\n        String refresh_token = JWT.create()\r\n                .withSubject(user.getUsername())\r\n                .withExpiresAt(new Date(System.currentTimeMillis() +30*60*1000))\r\n                .withIssuer(request.getRequestURL().toString())\r\n                .sign(algorithm);\r\n        response.setHeader(&quot;access_token&quot;,access_token);\r\n        response.setHeader(&quot;refresh_token&quot;,refresh_token);\r\n    }\r\n}\r\n\r\n```","title":"Spring Boot, Spring-Security - BcrypPasswordEncoder in new component-based security configuration","body":"<p>I am trying to use the new Component-Based (Without WebSecurityConfigurerAdapter) configuration and setted up my Security Configuration as follow:</p>\n<p><strong>SecurityConfiguration.java file</strong></p>\n<pre><code>package com.tito.userservice.security;\n\nimport com.tito.userservice.filter.CustomAuthenticationFilter;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\n\n\n@Configuration @EnableWebSecurity @RequiredArgsConstructor\npublic class SecurityConfiguration {\n\n    private final UserDetailsService userDetailsService;\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\n    private final AuthenticationManagerBuilder authManagerBuilder;\n\n\n    @Bean\n    public PasswordEncoder encoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n\n    //----------------HTTP SECURITY CONFIG-------------------------------------\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.csrf().disable();\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        http\n                .authorizeRequests().anyRequest().permitAll();\n                \n\n        http.addFilter(new CustomAuthenticationFilter(authManagerBuilder.getOrBuild()));\n\n        return http.build();\n    }\n\n    //----------------HTTP SECURITY CONFIG-------------------------------------\n\n\n\n}\n</code></pre>\n<p>but when I run the application and try to log a user the following error appears even though I have the BCryptPasswordEncoder as a bean in my SecurityConfiguration:</p>\n<p><strong>Error Stack Trace</strong>*</p>\n<pre><code>2022-08-16 21:02:04.220 ERROR 13112 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\n\njava.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id &quot;null&quot;\n        at org.springframework.security.crypto.password.DelegatingPasswordEncoder$UnmappedIdPasswordEncoder.matches(DelegatingPasswordEncoder.java:289) ~[spring-security-crypto-5.7.2.jar:5.7.2]\n        at org.springframework.security.crypto.password.DelegatingPasswordEncoder.matches(DelegatingPasswordEncoder.java:237) ~[spring-security-crypto-5.7.2.jar:5.7.2]\n        at org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:76) ~[spring-security-core-5.7.2.jar:5.7.2]\n        at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147) ~[spring-security-core-5.7.2.jar:5.7.2]\n        at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-5.7.2.jar:5.7.2]\n        at com.tito.userservice.filter.CustomAuthenticationFilter.attemptAuthentication(CustomAuthenticationFilter.java:43) ~[classes/:na]\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>Which is the correct way to set up the PasswordEncoder in the new component-configuration?</p>\n<p><strong>Edit: adding login logic</strong></p>\n<p><strong>AppUserService interface</strong></p>\n<pre><code>package com.tito.userservice.services;\n\nimport com.tito.userservice.domain.AppUser;\nimport com.tito.userservice.domain.Role;\n\nimport java.util.List;\n\npublic interface AppUserService {\n    AppUser saveUser(AppUser user);\n    Role saveRole(Role role);\n\n    void addRoleToUser(String username, String roleName);\n\n    AppUser getUser(String username);\n    List&lt;AppUser&gt;getUsers();\n\n}\n\n</code></pre>\n<p>and the <strong>AppUserServiceImplementation</strong>:</p>\n<pre><code>package com.tito.userservice.services;\n\nimport com.tito.userservice.domain.AppUser;\nimport com.tito.userservice.domain.Role;\nimport com.tito.userservice.repo.AppUserRepo;\nimport com.tito.userservice.repo.RoleRepo;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.stereotype.Service;\n\nimport javax.transaction.Transactional;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\n\n@Service @RequiredArgsConstructor @Transactional @Slf4j\npublic class AppUserServiceImpl implements AppUserService, UserDetailsService {\n\n    private final AppUserRepo appUserRepo;\n    private final RoleRepo roleRepo;\n\n    private final PasswordEncoder passwordEncoder;\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        AppUser user =appUserRepo.findByUsername(username);\n        if (user == null){\n            log.error(&quot;User not found in the database&quot;);\n            throw new UsernameNotFoundException(&quot;User not found in the databse&quot;);\n        }else {\n            log.info(&quot;User found in the database: {}&quot;,username);\n        }\n        Collection&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n        user.getRoles().forEach(role -&gt; {\n            authorities.add(new SimpleGrantedAuthority(role.getName()));\n        });\n        return new org.springframework.security.core.userdetails.User(user.getUsername(), user.getPassword(), authorities);\n    }\n\n    @Override\n    public AppUser saveUser(AppUser user) {\n        log.info(&quot;Saving new user {} to the database&quot;,user.getName());\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\n        return appUserRepo.save(user);\n    }\n\n    @Override\n    public Role saveRole(Role role) {\n        log.info(&quot;Saving new role {} to the database&quot;,role.getName());\n        return roleRepo.save(role);\n    }\n\n    @Override\n    public void addRoleToUser(String username, String roleName) {\n        log.info(&quot;Adding role {} to user {}&quot;,roleName,username );\n\n        //real life could be good, or must be good, to do validation of below\n        AppUser user = appUserRepo.findByUsername(username);\n        Role role = roleRepo.findByName(roleName);\n        user.getRoles().add(role);\n    }\n\n    @Override\n    public AppUser getUser(String username) {\n        log.info(&quot;Fetching user {}&quot;,username );\n        return appUserRepo.findByUsername(username);\n    }\n\n    @Override\n    public List&lt;AppUser&gt; getUsers() {\n        log.info(&quot;Fetching all users&quot;);\n        return appUserRepo.findAll();\n    }\n\n\n}\n\n</code></pre>\n<p><strong>Edit2: added CustomAuthenticationFilter.java code</strong></p>\n<p><strong>CustomAuthenticationFilter.java</strong></p>\n<pre><code>package com.tito.userservice.filter;\n\n\nimport com.auth0.jwt.JWT;\nimport com.auth0.jwt.algorithms.Algorithm;\nimport com.tito.userservice.domain.AppUser;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.stereotype.Component;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\nimport java.util.Date;\nimport java.util.stream.Collectors;\n\n\n@Slf4j\npublic class CustomAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n\n    private final AuthenticationManager authenticationManager;\n\n    public CustomAuthenticationFilter(AuthenticationManager authenticationManager){\n        this.authenticationManager = authenticationManager;\n    }\n    @Override\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\n        String username = request.getParameter(&quot;username&quot;);\n        String password = request.getParameter(&quot;password&quot;);\n        log.info(&quot;Username is: {}&quot;, username); log.info(&quot;Password is: {}&quot;,password);\n        UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(username,password);\n        return  authenticationManager.authenticate(authenticationToken);\n    }\n\n    @Override\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authentication) throws IOException, ServletException {\n        User user = (User)authentication.getPrincipal();\n        Algorithm algorithm = Algorithm.HMAC256(&quot;secret&quot;.getBytes()); //not for use in production, need to pass as encrypted and then decrypt here\n        String access_token = JWT.create()\n                .withSubject(user.getUsername())\n                .withExpiresAt(new Date(System.currentTimeMillis() +10*60*1000))\n                .withIssuer(request.getRequestURL().toString())\n                .withClaim(&quot;roles&quot;,user.getAuthorities().stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList()))\n                .sign(algorithm);\n        String refresh_token = JWT.create()\n                .withSubject(user.getUsername())\n                .withExpiresAt(new Date(System.currentTimeMillis() +30*60*1000))\n                .withIssuer(request.getRequestURL().toString())\n                .sign(algorithm);\n        response.setHeader(&quot;access_token&quot;,access_token);\n        response.setHeader(&quot;refresh_token&quot;,refresh_token);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","classnotfoundexception","execution","serviceloader"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1660745624,"post_id":73389960,"comment_id":129605581,"body_markdown":"Does your jar file actually contain `com.example.springlog.ClasspathURLStreamHandlerProvider` and is it in the correct directory?","body":"Does your jar file actually contain <code>com.example.springlog.ClasspathURLStreamHandlerProvider</code> and is it in the correct directory?"},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1660747121,"post_id":73389960,"comment_id":129606185,"body_markdown":"They are loaded with the `ClassLoader.getSystemClassLoader()`, if that matters. See the static method java.net.URL#providers","body":"They are loaded with the <code>ClassLoader.getSystemClassLoader()</code>, if that matters. See the static method java.net.URL#providers"},{"owner":{"account_id":20779910,"reputation":51,"user_id":15260602,"display_name":"Alex "},"score":0,"creation_date":1660800377,"post_id":73389960,"comment_id":129619159,"body_markdown":"ClassLoader.getSystemClassLoader() - this is what I am warried about. For instance if I use Class.forname(&quot;c.e.s.C&quot;) in main it works normally. On the other hand it is hard to beleave it is not possible to pack any application into jar","body":"ClassLoader.getSystemClassLoader() - this is what I am warried about. For instance if I use Class.forname(&quot;c.e.s.C&quot;) in main it works normally. On the other hand it is hard to beleave it is not possible to pack any application into jar"},{"owner":{"account_id":20779910,"reputation":51,"user_id":15260602,"display_name":"Alex "},"score":0,"creation_date":1660801962,"post_id":73389960,"comment_id":129619473,"body_markdown":"I looked into the class loaders difference and it appears that locally jdk.internal.loader.ClassLoaders$AppClassLoader is in use while org.springframework.boot.loader.LaunchedURLClassLoader when starting from jar","body":"I looked into the class loaders difference and it appears that locally jdk.internal.loader.ClassLoaders$AppClassLoader is in use while org.springframework.boot.loader.LaunchedURLClassLoader when starting from jar"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1661246070,"post_id":73389960,"comment_id":129719898,"body_markdown":"starting from jar is not the same as starting with a custom launcher. And `Class.forName( &quot;com.example.springlog.ClasspathURLStreamHandlerProvider&quot;)` is not the same as `ClassLoader.getSystemClassLoader() .loadClass(&quot;com.example.springlog.ClasspathURLStreamHandlerProvider&quot;)` as the former uses the callers class loader.","body":"starting from jar is not the same as starting with a custom launcher. And <code>Class.forName( &quot;com.example.springlog.ClasspathURLStreamHandlerProvider&quot;)</code> is not the same as <code>ClassLoader.getSystemClassLoader() .loadClass(&quot;com.example.springlog.ClasspathURLStreamHandlerP&zwnj;&#8203;rovider&quot;)</code> as the former uses the callers class loader."},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1661865219,"post_id":73389960,"comment_id":129869203,"body_markdown":"@Holger running a spring boot application with `java -jar myspringbootapp.jar` will load all the embedded dependencies with a custom classloader created via `org.springframework.boot.loader.JarLauncher`.","body":"@Holger running a spring boot application with <code>java -jar myspringbootapp.jar</code> will load all the embedded dependencies with a custom classloader created via <code>org.springframework.boot.loader.JarLauncher</code>."},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1661866300,"post_id":73389960,"comment_id":129869662,"body_markdown":"@Alex what exactly is your custom `URLStreamHandlerProvider` doing, and when is it needed (during application boot, or only after boot on processing requests)?","body":"@Alex what exactly is your custom <code>URLStreamHandlerProvider</code> doing, and when is it needed (during application boot, or only after boot on processing requests)?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1661868806,"post_id":73389960,"comment_id":129870829,"body_markdown":"@slindenau and that custom class loader is the problem, not the starting from jar which the title of this question wrongly suggests.","body":"@slindenau and that custom class loader is the problem, not the starting from jar which the title of this question wrongly suggests."},{"owner":{"account_id":2869816,"reputation":191,"user_id":2463407,"accept_rate":100,"display_name":"Sathish"},"score":0,"creation_date":1667821379,"post_id":73389960,"comment_id":131251272,"body_markdown":"@Alex, did you manage to fix the issue? I am facing the same problem myself and it will be of great help if you could share the fix.","body":"@Alex, did you manage to fix the issue? I am facing the same problem myself and it will be of great help if you could share the fix."},{"owner":{"account_id":20779910,"reputation":51,"user_id":15260602,"display_name":"Alex "},"score":1,"creation_date":1667997280,"post_id":73389960,"comment_id":131300168,"body_markdown":"@Sathish in my case the result jar contains directory &quot;classes&quot; where provider implementaions goes too, while system class loader wants to load classses from &quot;root&quot;. So jar repackaging solved the problem for me. I placed classses supposed to be loaded by system class loader from classes folder into root one where some spring stuff exist.","body":"@Sathish in my case the result jar contains directory &quot;classes&quot; where provider implementaions goes too, while system class loader wants to load classses from &quot;root&quot;. So jar repackaging solved the problem for me. I placed classses supposed to be loaded by system class loader from classes folder into root one where some spring stuff exist."},{"owner":{"account_id":20779910,"reputation":51,"user_id":15260602,"display_name":"Alex "},"score":1,"creation_date":1667997639,"post_id":73389960,"comment_id":131300295,"body_markdown":"@slindenau custom URLStreamHandlerProvider gets resources from class path it is needed when parsing application.yml on start.","body":"@slindenau custom URLStreamHandlerProvider gets resources from class path it is needed when parsing application.yml on start."},{"owner":{"account_id":2869816,"reputation":191,"user_id":2463407,"accept_rate":100,"display_name":"Sathish"},"score":1,"creation_date":1668013554,"post_id":73389960,"comment_id":131306554,"body_markdown":"Thanks for your reply @Alex. In my case Tomcat was registering its own `URLStreamHandlerProvider` on my application startup. Since only one stream provider can be registered in the  JVM for a container, my provider is not used even if the service is loaded correctly by Service loader. The solution was to use the addUserFactory method of `TomcatURLStreamHandlerFactory` to register my custom protocol provider.","body":"Thanks for your reply @Alex. In my case Tomcat was registering its own <code>URLStreamHandlerProvider</code> on my application startup. Since only one stream provider can be registered in the  JVM for a container, my provider is not used even if the service is loaded correctly by Service loader. The solution was to use the addUserFactory method of <code>TomcatURLStreamHandlerFactory</code> to register my custom protocol provider."}],"owner":{"account_id":20779910,"reputation":51,"user_id":15260602,"display_name":"Alex "},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660745667,"creation_date":1660745298,"question_id":73389960,"body_markdown":"While trying to implement classpath locations for URL a URLStreamHandlerProvider implementation was developed and added to META-INF/services/java.net.spi.URLStreamHandlerProvider as per https://docs.oracle.com/javase/9/docs/api/java/net/spi/URLStreamHandlerProvider.html\r\nEverything works fine when application starts from IDE but when it is packed into single jar with spring-boot-maven-plugin ServiceLoader fails to load the URLStreamHandlerProvider with class not found exception. This is probably related to different classloaders... Any help how to fix or workaround? BTW it is not possible to use URL.setURLStreamHandlerFactory as embedded tomcat does this too.\r\nSpring boot 2.7.2 java 11\r\n  \r\n\r\n&gt; Exception: Exception in thread &quot;main&quot;\r\n&gt; java.lang.reflect.InvocationTargetException \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\r\n&gt; Method) \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) \tat\r\n&gt; org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n&gt; \tat org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\r\n&gt; \tat org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n&gt; \tat\r\n&gt; org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\r\n&gt; Caused by: java.util.ServiceConfigurationError:\r\n&gt; java.net.spi.URLStreamHandlerProvider: Provider\r\n&gt; com.example.springlog.ClasspathURLStreamHandlerProvider not found \tat\r\n&gt; java.base/java.util.ServiceLoader.fail(ServiceLoader.java:589)","title":"ServiceLoader fails when starting from jar","body":"<p>While trying to implement classpath locations for URL a URLStreamHandlerProvider implementation was developed and added to META-INF/services/java.net.spi.URLStreamHandlerProvider as per <a href=\"https://docs.oracle.com/javase/9/docs/api/java/net/spi/URLStreamHandlerProvider.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/9/docs/api/java/net/spi/URLStreamHandlerProvider.html</a>\nEverything works fine when application starts from IDE but when it is packed into single jar with spring-boot-maven-plugin ServiceLoader fails to load the URLStreamHandlerProvider with class not found exception. This is probably related to different classloaders... Any help how to fix or workaround? BTW it is not possible to use URL.setURLStreamHandlerFactory as embedded tomcat does this too.\nSpring boot 2.7.2 java 11</p>\n<blockquote>\n<p>Exception: Exception in thread &quot;main&quot;\njava.lang.reflect.InvocationTargetException   at\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\nMethod)   at\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat\njava.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)   at\norg.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\nat org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\nat org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\nat\norg.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\nCaused by: java.util.ServiceConfigurationError:\njava.net.spi.URLStreamHandlerProvider: Provider\ncom.example.springlog.ClasspathURLStreamHandlerProvider not found     at\njava.base/java.util.ServiceLoader.fail(ServiceLoader.java:589)</p>\n</blockquote>\n"},{"tags":["java","android","android-asynctask"],"answers":[{"tags":[],"owner":{"account_id":1016287,"reputation":2349,"user_id":1027798,"accept_rate":75,"display_name":"Orlymee"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1338987138,"creation_date":1338987138,"answer_id":10914600,"question_id":10914494,"body_markdown":"You can send a request to the server to return the filesize. Use that filesize in your progressbar and initiate the download.So these are two separate requests but you can bundle them in the same asyc task. \r\nSo you first get the fielszie, make a call to `progressUpdate` where you set the values for progressbar and then continue with the download with periodic calls to `progressUpdate()` to change the status of progressbar. ","title":"Possible to determine size of file to be downloaded?","body":"<p>You can send a request to the server to return the filesize. Use that filesize in your progressbar and initiate the download.So these are two separate requests but you can bundle them in the same asyc task. \nSo you first get the fielszie, make a call to <code>progressUpdate</code> where you set the values for progressbar and then continue with the download with periodic calls to <code>progressUpdate()</code> to change the status of progressbar. </p>\n"},{"tags":[],"owner":{"account_id":98940,"reputation":1944,"user_id":267511,"display_name":"Ed."},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1338987171,"creation_date":1338987171,"answer_id":10914612,"question_id":10914494,"body_markdown":"use the `getContentLength` method of `URLConnection`\r\n\r\n    URL url = new URL(sourceFileWebAddress);\r\n    URLConnection connection = url.openConnection();\r\n    connection.connect();\r\n    \r\n    int fileLenth = connection.getContentLength();\r\n    \r\n    InputStream inputStream = url.openStream();\r\n    BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);","title":"Possible to determine size of file to be downloaded?","body":"<p>use the <code>getContentLength</code> method of <code>URLConnection</code></p>\n\n<pre><code>URL url = new URL(sourceFileWebAddress);\nURLConnection connection = url.openConnection();\nconnection.connect();\n\nint fileLenth = connection.getContentLength();\n\nInputStream inputStream = url.openStream();\nBufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":383425,"reputation":41761,"user_id":739270,"accept_rate":68,"display_name":"Mohammed Azharuddin Shaikh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660745550,"creation_date":1338987180,"answer_id":10914614,"question_id":10914494,"body_markdown":"try this out using **[URLConnnection][1]**\r\n\r\n    URLConnection connection = new URL(sourceFileWebAddress).openConnection();\r\n    InputStream stream = connection.getInputStream();\r\n    \r\n    System.out.println(&quot;total size: &quot;+connection.getContentLength();//size\r\n    \r\n    BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);\r\n    FileOutputStream fileOutputStream = new FileOutputStream(targetFile);\r\n    \r\n    int count;\r\n    byte buffer[] = new byte[1024];\r\n    \r\n    while ((count = bufferedInputStream.read(buffer, 0, buffer.length)) != -1)\r\n      fileOutputStream.write(buffer, 0, count);\r\n\r\n\r\n  [1]: http://developer.android.com/reference/java/net/URLConnection.html","title":"Possible to determine size of file to be downloaded?","body":"<p>try this out using <strong><a href=\"http://developer.android.com/reference/java/net/URLConnection.html\" rel=\"nofollow noreferrer\">URLConnnection</a></strong></p>\n<pre><code>URLConnection connection = new URL(sourceFileWebAddress).openConnection();\nInputStream stream = connection.getInputStream();\n\nSystem.out.println(&quot;total size: &quot;+connection.getContentLength();//size\n\nBufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);\nFileOutputStream fileOutputStream = new FileOutputStream(targetFile);\n\nint count;\nbyte buffer[] = new byte[1024];\n\nwhile ((count = bufferedInputStream.read(buffer, 0, buffer.length)) != -1)\n  fileOutputStream.write(buffer, 0, count);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":302712,"reputation":8294,"user_id":611228,"accept_rate":86,"display_name":"josephus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1338988958,"creation_date":1338988958,"answer_id":10915107,"question_id":10914494,"body_markdown":"The method `getContentLength` of `URLConnection` should give you the size of the file to be downloaded. From this you can draw your ProgressBar as you like, updating it (in onProgressUpdate, assuming you&#39;re doing this inside an AsyncTask. you are, right?) whenever new data is processed by your fileOutputStream.\r\n\r\nIf the server doesn&#39;t give you a value in getContentLength (-1 in most cases, but at least check if it&#39;s less than or equal to zero), just make your ProgressBar indeterminate.","title":"Possible to determine size of file to be downloaded?","body":"<p>The method <code>getContentLength</code> of <code>URLConnection</code> should give you the size of the file to be downloaded. From this you can draw your ProgressBar as you like, updating it (in onProgressUpdate, assuming you're doing this inside an AsyncTask. you are, right?) whenever new data is processed by your fileOutputStream.</p>\n\n<p>If the server doesn't give you a value in getContentLength (-1 in most cases, but at least check if it's less than or equal to zero), just make your ProgressBar indeterminate.</p>\n"},{"tags":[],"owner":{"account_id":390163,"reputation":17713,"user_id":750040,"accept_rate":68,"display_name":"Santosh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1338989639,"creation_date":1338989639,"answer_id":10915288,"question_id":10914494,"body_markdown":"TO determine the total number of bytes which are to be read **before** commencing with the download, one way is to *only get the response headers* by sending a **HTTP HEAD** request as follows:\r\n\r\n\r\n    import java.io.IOException;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.MalformedURLException;\r\n    import java.net.ProtocolException;\r\n    import java.net.URL;\r\n    \r\n    public class SimpleHTTPRequest {\r\n    \r\n      public static void main(String[] args) {\r\n          HttpURLConnection connection = null;\r\n          URL serverAddress = null;\r\n        \r\n          try {\r\n              String sourceFileWebAddress = &quot;http://localhost:8080/mycontents&quot;;\r\n              serverAddress = new URL(sourceFileWebAddress);\r\n              //set up out communications stuff\r\n              connection = null;\r\n            \r\n              //Set up the initial connection\r\n              connection = (HttpURLConnection)serverAddress.openConnection();\r\n\r\n              //HEAD request will make sure that the contents are not downloaded.\r\n              connection.setRequestMethod(&quot;HEAD&quot;);  \r\n           \r\n              connection.connect();\r\n              System.out.println(&quot;========&quot;+connection.getContentLength());\r\n          \r\n          } catch (MalformedURLException e) {\r\n              e.printStackTrace();\r\n          } catch (ProtocolException e) {\r\n              e.printStackTrace();\r\n          } catch (IOException e) {\r\n              e.printStackTrace();\r\n          }\r\n          finally\r\n          {\r\n              //close the connection, set all objects to null\r\n              connection.disconnect();\r\n    \r\n              connection = null;\r\n          }\r\n      }\r\n    }\r\n\r\n\r\nThis will print the size of the content to be downloaded **without actually downloading** the contents. ","title":"Possible to determine size of file to be downloaded?","body":"<p>TO determine the total number of bytes which are to be read <strong>before</strong> commencing with the download, one way is to <em>only get the response headers</em> by sending a <strong>HTTP HEAD</strong> request as follows:</p>\n\n<pre><code>import java.io.IOException;\nimport java.net.HttpURLConnection;\nimport java.net.MalformedURLException;\nimport java.net.ProtocolException;\nimport java.net.URL;\n\npublic class SimpleHTTPRequest {\n\n  public static void main(String[] args) {\n      HttpURLConnection connection = null;\n      URL serverAddress = null;\n\n      try {\n          String sourceFileWebAddress = \"http://localhost:8080/mycontents\";\n          serverAddress = new URL(sourceFileWebAddress);\n          //set up out communications stuff\n          connection = null;\n\n          //Set up the initial connection\n          connection = (HttpURLConnection)serverAddress.openConnection();\n\n          //HEAD request will make sure that the contents are not downloaded.\n          connection.setRequestMethod(\"HEAD\");  \n\n          connection.connect();\n          System.out.println(\"========\"+connection.getContentLength());\n\n      } catch (MalformedURLException e) {\n          e.printStackTrace();\n      } catch (ProtocolException e) {\n          e.printStackTrace();\n      } catch (IOException e) {\n          e.printStackTrace();\n      }\n      finally\n      {\n          //close the connection, set all objects to null\n          connection.disconnect();\n\n          connection = null;\n      }\n  }\n}\n</code></pre>\n\n<p>This will print the size of the content to be downloaded <strong>without actually downloading</strong> the contents. </p>\n"}],"owner":{"account_id":300884,"reputation":30561,"user_id":1071320,"accept_rate":88,"display_name":"Adil Hussain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8835,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":10914612,"answer_count":5,"score":6,"last_activity_date":1660745550,"creation_date":1338986742,"question_id":10914494,"body_markdown":"I currently have the following code which reads a file located on the web and writes it to a file on the phone:\r\n\r\n    InputStream inputStream = new URL(sourceFileWebAddress).openStream();\r\n    BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);\r\n    FileOutputStream fileOutputStream = new FileOutputStream(targetFile);\r\n\r\n    int count;\r\n    byte buffer[] = new byte[1024];\r\n\r\n    while ((count = bufferedInputStream.read(buffer, 0, buffer.length)) != -1)\r\n      fileOutputStream.write(buffer, 0, count);\r\n\r\nDoes anyone know whether it is possible (using the setup above or otherwise) to determine the total number of bytes which are to be read before commencing with the download (in order to publish percentage progress to the user as the download proceeds)?","title":"Possible to determine size of file to be downloaded?","body":"<p>I currently have the following code which reads a file located on the web and writes it to a file on the phone:</p>\n\n<pre><code>InputStream inputStream = new URL(sourceFileWebAddress).openStream();\nBufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);\nFileOutputStream fileOutputStream = new FileOutputStream(targetFile);\n\nint count;\nbyte buffer[] = new byte[1024];\n\nwhile ((count = bufferedInputStream.read(buffer, 0, buffer.length)) != -1)\n  fileOutputStream.write(buffer, 0, count);\n</code></pre>\n\n<p>Does anyone know whether it is possible (using the setup above or otherwise) to determine the total number of bytes which are to be read before commencing with the download (in order to publish percentage progress to the user as the download proceeds)?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":3108216,"reputation":75,"user_id":2630579,"display_name":"user2630579"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660745542,"creation_date":1660745542,"answer_id":73390023,"question_id":73383954,"body_markdown":"To avoid empty certificates, client authorization should be set to &quot;need&quot; mode. If configuring through **.properties** file, it can be done like this:\r\n\r\n&gt; server.ssl.client-auth=need","title":"x509 authentication is skipped on Spring Boot Flux application","body":"<p>To avoid empty certificates, client authorization should be set to &quot;need&quot; mode. If configuring through <strong>.properties</strong> file, it can be done like this:</p>\n<blockquote>\n<p>server.ssl.client-auth=need</p>\n</blockquote>\n"}],"owner":{"account_id":3108216,"reputation":75,"user_id":2630579,"display_name":"user2630579"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660745542,"creation_date":1660718757,"question_id":73383954,"body_markdown":"I&#39;m trying to establish x509 authentication for Spring Boot Flux application, and I&#39;m getting such message during authentication attempt:\r\n\r\n&gt; org.springframework.security.web.server.authentication.ServerX509AuthenticationConverter : No peer certificates found in SslInfo, skipping x509 authentication\r\n\r\nWhen I&#39;m trying to debug class that is mentioned in this log message, I can see that certificates info is indeed null in there.\r\n\r\nMy current configuration: \r\n\r\nSsl certificates are provided though Spring Boot properties (like *server.ssl.key-store*), Ssl connection is successful. For testing purposes, I copied certificates from another Spring Boot application (not Flux one though) with working x509 authentication.\r\n\r\nI need to run multiple applications locally, so I distinguish them by port. For this one, port configuration is\r\n\r\n&gt; server.port=${port:8441}\r\n\r\nFor spring security, I have specific configuration class, marked with @Configuration and @EnableWebFluxSecurity annotations. Inside that class, I&#39;m defining a bean in such a way: \r\n\r\n    @Bean\r\n    public SecurityWebFilterChain (ServerHttpSecurity http) {\r\n        String endpoint1 = &quot;/first-endpoint-i-want-to-authorize&quot;;\r\n        String endpoint2 = &quot;/second-endpoint-i-want-to-authorize&quot;;\r\n        \r\n        http.authorizeExchange(exchanges -&gt; exchanges.matchers(\r\n            new NegatedServerWebExchangeMatcher(new OrServerWebExchangeMatcher(\r\n                    Arrays.asList(new PathPatternParserServerWebExchangeMatcher(endpoint1, null),\r\n                    new PathPatternParserServerWebExchangeMatcher(endpoint2, null)\r\n                )\r\n            )\r\n            )\r\n        ).permitAll());\r\n        \r\n        http.authorizeExchange(exchanges -&gt; exchanges.pathMatchers(endpoint1, endpoint2).authenticated())\r\n        .x509(x509 -&gt; x509.principalExtractor(authenticationService).authenticationManager(authenticationService))\r\n        .httpBasic(Customizer.withDefaults())\r\n        .securityContextRepository(NoOpServerSecurityContextRepository.getInstance());\r\n\r\n        return http.build();\r\n    }\r\n\r\nCredentials authentication seems to work with this configuration. Also, **authenticationService** is an autowired bean that implements all required interfaces, but it implementation seems unconnected with root cause of the situation because of the fact none of implemented methods are called during authentication attempt. \r\n","title":"x509 authentication is skipped on Spring Boot Flux application","body":"<p>I'm trying to establish x509 authentication for Spring Boot Flux application, and I'm getting such message during authentication attempt:</p>\n<blockquote>\n<p>org.springframework.security.web.server.authentication.ServerX509AuthenticationConverter : No peer certificates found in SslInfo, skipping x509 authentication</p>\n</blockquote>\n<p>When I'm trying to debug class that is mentioned in this log message, I can see that certificates info is indeed null in there.</p>\n<p>My current configuration:</p>\n<p>Ssl certificates are provided though Spring Boot properties (like <em>server.ssl.key-store</em>), Ssl connection is successful. For testing purposes, I copied certificates from another Spring Boot application (not Flux one though) with working x509 authentication.</p>\n<p>I need to run multiple applications locally, so I distinguish them by port. For this one, port configuration is</p>\n<blockquote>\n<p>server.port=${port:8441}</p>\n</blockquote>\n<p>For spring security, I have specific configuration class, marked with @Configuration and @EnableWebFluxSecurity annotations. Inside that class, I'm defining a bean in such a way:</p>\n<pre><code>@Bean\npublic SecurityWebFilterChain (ServerHttpSecurity http) {\n    String endpoint1 = &quot;/first-endpoint-i-want-to-authorize&quot;;\n    String endpoint2 = &quot;/second-endpoint-i-want-to-authorize&quot;;\n    \n    http.authorizeExchange(exchanges -&gt; exchanges.matchers(\n        new NegatedServerWebExchangeMatcher(new OrServerWebExchangeMatcher(\n                Arrays.asList(new PathPatternParserServerWebExchangeMatcher(endpoint1, null),\n                new PathPatternParserServerWebExchangeMatcher(endpoint2, null)\n            )\n        )\n        )\n    ).permitAll());\n    \n    http.authorizeExchange(exchanges -&gt; exchanges.pathMatchers(endpoint1, endpoint2).authenticated())\n    .x509(x509 -&gt; x509.principalExtractor(authenticationService).authenticationManager(authenticationService))\n    .httpBasic(Customizer.withDefaults())\n    .securityContextRepository(NoOpServerSecurityContextRepository.getInstance());\n\n    return http.build();\n}\n</code></pre>\n<p>Credentials authentication seems to work with this configuration. Also, <strong>authenticationService</strong> is an autowired bean that implements all required interfaces, but it implementation seems unconnected with root cause of the situation because of the fact none of implemented methods are called during authentication attempt.</p>\n"},{"tags":["java","selenium","path","webdriver"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1660745541,"post_id":73389843,"comment_id":129605553,"body_markdown":"Place the `System.setProperty` line in the `setUp` method, before instantiating the driver.","body":"Place the <code>System.setProperty</code> line in the <code>setUp</code> method, before instantiating the driver."}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1660745518,"creation_date":1660745518,"answer_id":73390015,"question_id":73389843,"body_markdown":"Ideally the `System.setProperty()` line should be mentioned before you initialize the _ChromeDriver_ driven [tag:google-chrome] browsing context.\r\n\r\nEffectively your code block will be:\r\n\r\n    @Before\r\n    public void setUp () {\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:/Users/wrost/Downloads/chromedriver_win32/chromedriver.exe&quot;);\r\n        driver = new ChromeDriver();\r\n        js = (JavascriptExecutor) driver;\r\n        vars = new HashMap&lt;String, Object&gt;();\r\n    }","title":"Where to set the path to webdriver.chrome.driver (Java, Selenium, IntelliJ)?","body":"<p>Ideally the <code>System.setProperty()</code> line should be mentioned before you initialize the <em>ChromeDriver</em> driven <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\">google-chrome</a> browsing context.</p>\n<p>Effectively your code block will be:</p>\n<pre><code>@Before\npublic void setUp () {\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:/Users/wrost/Downloads/chromedriver_win32/chromedriver.exe&quot;);\n    driver = new ChromeDriver();\n    js = (JavascriptExecutor) driver;\n    vars = new HashMap&lt;String, Object&gt;();\n}\n</code></pre>\n"}],"owner":{"account_id":25594609,"reputation":29,"user_id":19370666,"display_name":"Weronika"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1369,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":73390015,"answer_count":1,"score":-1,"last_activity_date":1660745518,"creation_date":1660744850,"question_id":73389843,"body_markdown":"So I&#39;m working with Selenium IDE and it beautifully generated the code for me. But I have an issue with webdriver. This is the code. \r\n\r\n\r\n    package org.example;// Generated by Selenium IDE\r\n            import org.junit.Test;\r\n            import org.junit.Before;\r\n            import org.junit.After;\r\n            import org.openqa.selenium.By;\r\n            import org.openqa.selenium.WebDriver;\r\n            import org.openqa.selenium.chrome.ChromeDriver;\r\n            import org.openqa.selenium.Dimension;\r\n            import org.openqa.selenium.WebElement;\r\n            import org.openqa.selenium.interactions.Actions;\r\n            import org.openqa.selenium.JavascriptExecutor;\r\n            import java.util.*;\r\n    public class StorwareTestTest {\r\n            WebDriver driver;\r\n            Map&lt;String, Object&gt; vars;\r\n            JavascriptExecutor js;\r\n            @Before\r\n            public void setUp () {\r\n                driver = new ChromeDriver();\r\n                js = (JavascriptExecutor) driver;\r\n                vars = new HashMap&lt;String, Object&gt;();\r\n            }\r\n            @After\r\n            public void tearDown () {\r\n                driver.quit();\r\n            }\r\n            @Test\r\n            public void storware () {\r\n                System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:/Users/wrost/Downloads/chromedriver_win32/chromedriver.exe&quot;);\r\n    \r\n                driver.get(&quot;https://storware.eu/&quot;);\r\n        (...)\r\n                \r\n\r\nSo, the compiler is yelling at me that: The path to the driver executable must be set by the webdriver.chrome.driver system property;\r\nBut I did it. Maybe in the wrong place. What can I do to fix it? I&#39;ve been working on it for 2 hours, and honestly have no idea. Maybe it&#39;s some basic problem. I&#39;m a fresher. And the code is autogenerated by SeleniumIDE, so it probably does a bunch of stuff I don&#39;t even know about. Maybe it shouldn&#39;t be under @Test annotation. But then where?  (When I was writing basic programs using Selenium with Java everything worked. But I also want to know how SeleniumIDE works, and that&#39;s where the problems started).\r\nThanks for Your help!\r\n","title":"Where to set the path to webdriver.chrome.driver (Java, Selenium, IntelliJ)?","body":"<p>So I'm working with Selenium IDE and it beautifully generated the code for me. But I have an issue with webdriver. This is the code.</p>\n<pre><code>package org.example;// Generated by Selenium IDE\n        import org.junit.Test;\n        import org.junit.Before;\n        import org.junit.After;\n        import org.openqa.selenium.By;\n        import org.openqa.selenium.WebDriver;\n        import org.openqa.selenium.chrome.ChromeDriver;\n        import org.openqa.selenium.Dimension;\n        import org.openqa.selenium.WebElement;\n        import org.openqa.selenium.interactions.Actions;\n        import org.openqa.selenium.JavascriptExecutor;\n        import java.util.*;\npublic class StorwareTestTest {\n        WebDriver driver;\n        Map&lt;String, Object&gt; vars;\n        JavascriptExecutor js;\n        @Before\n        public void setUp () {\n            driver = new ChromeDriver();\n            js = (JavascriptExecutor) driver;\n            vars = new HashMap&lt;String, Object&gt;();\n        }\n        @After\n        public void tearDown () {\n            driver.quit();\n        }\n        @Test\n        public void storware () {\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:/Users/wrost/Downloads/chromedriver_win32/chromedriver.exe&quot;);\n\n            driver.get(&quot;https://storware.eu/&quot;);\n    (...)\n            \n</code></pre>\n<p>So, the compiler is yelling at me that: The path to the driver executable must be set by the webdriver.chrome.driver system property;\nBut I did it. Maybe in the wrong place. What can I do to fix it? I've been working on it for 2 hours, and honestly have no idea. Maybe it's some basic problem. I'm a fresher. And the code is autogenerated by SeleniumIDE, so it probably does a bunch of stuff I don't even know about. Maybe it shouldn't be under @Test annotation. But then where?  (When I was writing basic programs using Selenium with Java everything worked. But I also want to know how SeleniumIDE works, and that's where the problems started).\nThanks for Your help!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8889,"page":1103,"page_size":100}
