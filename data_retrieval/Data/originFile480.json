{"items":[{"tags":["java","spring","rest","unit-testing","mockito"],"answers":[{"tags":[],"owner":{"account_id":14587195,"reputation":413,"user_id":10535574,"display_name":"RAZAFINARIVO Hanania"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636138996,"creation_date":1636138996,"answer_id":69858080,"question_id":69857313,"body_markdown":"You need to mock the static method `builder()` of `WebClient`. Indeed, if this method is not mocked, mockito can&#39;t edit the behaviour of this method. Therefore, your mocked webClient is not used. To perfom that, you need to include this dependency in your `pom.xml` if you use maven.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\r\n        &lt;version&gt;3.4.6&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThis will provide `mockStatic()` method on `Mockito` and can be used like :\r\n\r\n    MockedStatic&lt;WebClient&gt; webClientStatic = Mockito.mockStatic(WebClient.class);\r\n    webClientStatic.when(WebClient::builder).thenReturn(webClientBuilder);\r\n\r\n`webClientBuilder` must be mocked because we need to change behaviour of its method `build()` to return your mocked webClient. \r\n\r\n    Mockito.when(webClientBuilder.build()).thenReturn(mockedWebClient);\r\n\r\nTo resume all in one code :\r\n\r\n    import org.junit.Assert;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.Mock;\r\n    import org.mockito.Mockito;\r\n    import org.mockito.junit.MockitoJUnitRunner;\r\n    import org.springframework.http.client.reactive.ReactorClientHttpConnector;\r\n    import org.springframework.web.reactive.function.client.ExchangeStrategies;\r\n    import org.springframework.web.reactive.function.client.WebClient;\r\n    import reactor.netty.http.client.HttpClient;\r\n    import org.mockito.MockedStatic;\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class WebClientTest {\r\n\r\n        @Mock\r\n        private WebClient.Builder webClientBuilder;\r\n\r\n        @Mock\r\n        private WebClient mockedWebClient;\r\n\r\n        @Before\r\n        public void setup() {\r\n            Mockito.when(webClientBuilder.exchangeStrategies(Mockito.any(ExchangeStrategies.class))).thenReturn(webClientBuilder);\r\n            Mockito.when(webClientBuilder.clientConnector(Mockito.any(ReactorClientHttpConnector.class))).thenReturn(webClientBuilder);\r\n            Mockito.when(webClientBuilder.build()).thenReturn(mockedWebClient);\r\n        }\r\n\r\n        @Test\r\n        public void testWebClient() {\r\n            final MockedStatic&lt;WebClient&gt; webClientStatic = Mockito.mockStatic(WebClient.class);\r\n            webClientStatic.when(WebClient::builder).thenReturn(webClientBuilder);\r\n\r\n            final WebClient webClient = WebClient.builder()\r\n                    .exchangeStrategies(ExchangeStrategies.builder()\r\n                            .codecs(configurer -&gt; configurer\r\n                                    .defaultCodecs()\r\n                                    .maxInMemorySize(16 * 1024 * 1024))\r\n                            .build())\r\n                    .clientConnector(new ReactorClientHttpConnector(HttpClient.newConnection().compress(true)))\r\n                    .build();\r\n\r\n            //It throws error if webClient is not mockedWebClient\r\n            Assert.assertEquals(webClient, mockedWebClient);\r\n        }\r\n    }\r\n\r\nYou can test it.","title":"How to mock Spring WebClient and builder","body":"<p>You need to mock the static method <code>builder()</code> of <code>WebClient</code>. Indeed, if this method is not mocked, mockito can't edit the behaviour of this method. Therefore, your mocked webClient is not used. To perfom that, you need to include this dependency in your <code>pom.xml</code> if you use maven.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n    &lt;version&gt;3.4.6&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This will provide <code>mockStatic()</code> method on <code>Mockito</code> and can be used like :</p>\n<pre><code>MockedStatic&lt;WebClient&gt; webClientStatic = Mockito.mockStatic(WebClient.class);\nwebClientStatic.when(WebClient::builder).thenReturn(webClientBuilder);\n</code></pre>\n<p><code>webClientBuilder</code> must be mocked because we need to change behaviour of its method <code>build()</code> to return your mocked webClient.</p>\n<pre><code>Mockito.when(webClientBuilder.build()).thenReturn(mockedWebClient);\n</code></pre>\n<p>To resume all in one code :</p>\n<pre><code>import org.junit.Assert;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport org.mockito.Mockito;\nimport org.mockito.junit.MockitoJUnitRunner;\nimport org.springframework.http.client.reactive.ReactorClientHttpConnector;\nimport org.springframework.web.reactive.function.client.ExchangeStrategies;\nimport org.springframework.web.reactive.function.client.WebClient;\nimport reactor.netty.http.client.HttpClient;\nimport org.mockito.MockedStatic;\n\n@RunWith(MockitoJUnitRunner.class)\npublic class WebClientTest {\n\n    @Mock\n    private WebClient.Builder webClientBuilder;\n\n    @Mock\n    private WebClient mockedWebClient;\n\n    @Before\n    public void setup() {\n        Mockito.when(webClientBuilder.exchangeStrategies(Mockito.any(ExchangeStrategies.class))).thenReturn(webClientBuilder);\n        Mockito.when(webClientBuilder.clientConnector(Mockito.any(ReactorClientHttpConnector.class))).thenReturn(webClientBuilder);\n        Mockito.when(webClientBuilder.build()).thenReturn(mockedWebClient);\n    }\n\n    @Test\n    public void testWebClient() {\n        final MockedStatic&lt;WebClient&gt; webClientStatic = Mockito.mockStatic(WebClient.class);\n        webClientStatic.when(WebClient::builder).thenReturn(webClientBuilder);\n\n        final WebClient webClient = WebClient.builder()\n                .exchangeStrategies(ExchangeStrategies.builder()\n                        .codecs(configurer -&gt; configurer\n                                .defaultCodecs()\n                                .maxInMemorySize(16 * 1024 * 1024))\n                        .build())\n                .clientConnector(new ReactorClientHttpConnector(HttpClient.newConnection().compress(true)))\n                .build();\n\n        //It throws error if webClient is not mockedWebClient\n        Assert.assertEquals(webClient, mockedWebClient);\n    }\n}\n</code></pre>\n<p>You can test it.</p>\n"}],"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12013,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682311945,"creation_date":1636134397,"question_id":69857313,"body_markdown":"I am trying to mock Spring WebClient and am having issues with the WebClient.builder() mocking. The mocks I&#39;ve defined so far in my test are not being used, I think because this builder does not return my mock WebClient. How can I get the builder to return my mock?\r\n\r\n    WebClient webClient = WebClient.builder()\r\n                    .exchangeStrategies(ExchangeStrategies.builder()\r\n\t\t\t\t\t.codecs(configurer -&gt; configurer\r\n\t\t\t\t\t\t\t.defaultCodecs()\r\n\t\t\t\t\t\t\t.maxInMemorySize(16 * 1024 * 1024))\r\n\t\t\t\t\t.build())\r\n\t\t\t\t\t.clientConnector(new ReactorClientHttpConnector(HttpClient.newConnection().compress(true)))\r\n\t\t\t\t\t.build();\r\n\r\nand the WebClient is used as so:\r\n\r\n    response = webClient\r\n\t\t\t\t.get()\r\n\t\t\t\t.uri(URLDecoder.decode(someEndpoint.replace(&quot;\\&quot;&quot;, &quot;&quot;), CLIENT_ENCODING))\r\n\t\t\t\t.header(AUTHORIZATION, BEARER + accessToken)\r\n\t\t\t\t.accept(MediaType.APPLICATION_JSON)\r\n\t\t\t\t.retrieve().bodyToMono(JsonNode.class).block();\r\n\r\nI do not see any problems with the mocks as I followed these solutions: https://stackoverflow.com/questions/45301220/how-to-mock-spring-webflux-webclient but the mocks are not being used. How can I mock the builder/return my mock from the builder?","title":"How to mock Spring WebClient and builder","body":"<p>I am trying to mock Spring WebClient and am having issues with the WebClient.builder() mocking. The mocks I've defined so far in my test are not being used, I think because this builder does not return my mock WebClient. How can I get the builder to return my mock?</p>\n<pre><code>WebClient webClient = WebClient.builder()\n                .exchangeStrategies(ExchangeStrategies.builder()\n                .codecs(configurer -&gt; configurer\n                        .defaultCodecs()\n                        .maxInMemorySize(16 * 1024 * 1024))\n                .build())\n                .clientConnector(new ReactorClientHttpConnector(HttpClient.newConnection().compress(true)))\n                .build();\n</code></pre>\n<p>and the WebClient is used as so:</p>\n<pre><code>response = webClient\n            .get()\n            .uri(URLDecoder.decode(someEndpoint.replace(&quot;\\&quot;&quot;, &quot;&quot;), CLIENT_ENCODING))\n            .header(AUTHORIZATION, BEARER + accessToken)\n            .accept(MediaType.APPLICATION_JSON)\n            .retrieve().bodyToMono(JsonNode.class).block();\n</code></pre>\n<p>I do not see any problems with the mocks as I followed these solutions: <a href=\"https://stackoverflow.com/questions/45301220/how-to-mock-spring-webflux-webclient\">How to mock Spring WebFlux WebClient?</a> but the mocks are not being used. How can I mock the builder/return my mock from the builder?</p>\n"},{"tags":["java","benchmarking","jmh"],"comments":[{"owner":{"account_id":1936546,"reputation":133665,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":0,"creation_date":1453924661,"post_id":35046745,"comment_id":57817889,"body_markdown":"I think that answers your question: http://stackoverflow.com/questions/25572778/why-does-jmh-run-different-forks","body":"I think that answers your question: <a href=\"http://stackoverflow.com/questions/25572778/why-does-jmh-run-different-forks\" title=\"why does jmh run different forks\">stackoverflow.com/questions/25572778/&hellip;</a>"},{"owner":{"account_id":1859358,"reputation":42879,"user_id":1684269,"accept_rate":91,"display_name":"Ole"},"score":0,"creation_date":1453926046,"post_id":35046745,"comment_id":57818684,"body_markdown":"So IIUC, each fork runs in a separate VM.  We do this because there might be subtle difference for each VM launched that will cause runtime to differ, hence we can account for this the variance calculation?","body":"So IIUC, each fork runs in a separate VM.  We do this because there might be subtle difference for each VM launched that will cause runtime to differ, hence we can account for this the variance calculation?"},{"owner":{"account_id":1936546,"reputation":133665,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":2,"creation_date":1453926190,"post_id":35046745,"comment_id":57818761,"body_markdown":"Yeah there might be differences between each run in the way the JIT behaves so forking allows to take account of that. When running benchmarks, I have seen extremely weird cases where one run would have a certain average and another run for the same test would have a very different one, &quot;simply&quot; because the JIT handled things differently.","body":"Yeah there might be differences between each run in the way the JIT behaves so forking allows to take account of that. When running benchmarks, I have seen extremely weird cases where one run would have a certain average and another run for the same test would have a very different one, &quot;simply&quot; because the JIT handled things differently."},{"owner":{"account_id":1859358,"reputation":42879,"user_id":1684269,"accept_rate":91,"display_name":"Ole"},"score":0,"creation_date":1453927151,"post_id":35046745,"comment_id":57819288,"body_markdown":"Great - good to know - Thanks Tunaki.  BTW - I think that answer is a lot clearer than the reference, in case you want to add it as an answer.","body":"Great - good to know - Thanks Tunaki.  BTW - I think that answer is a lot clearer than the reference, in case you want to add it as an answer."}],"answers":[{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1682311155,"creation_date":1453955843,"answer_id":35052972,"question_id":35046745,"body_markdown":"The JVM optimizes an application by creating a profile of the application&#39;s behavior. The fork is created to reset this profile. Otherwise, running:\r\n\r\n    benchmarkFoo();\r\n    benchmarkBar();\r\n\r\nmight result in different measurements than\r\n\r\n    benchmarkBar();\r\n    benchmarkFoo();\r\n\r\nsince the profile of the first benchmark influences the second.\r\n\r\nThe times determine the length of JMH spending for warming up or running the benchmark. If these times are to short, your VM might not be warmed up sufficiently or your result might have a too high standard deviation.","title":"What is the purpose of JMH @Fork?","body":"<p>The JVM optimizes an application by creating a profile of the application's behavior. The fork is created to reset this profile. Otherwise, running:</p>\n<pre><code>benchmarkFoo();\nbenchmarkBar();\n</code></pre>\n<p>might result in different measurements than</p>\n<pre><code>benchmarkBar();\nbenchmarkFoo();\n</code></pre>\n<p>since the profile of the first benchmark influences the second.</p>\n<p>The times determine the length of JMH spending for warming up or running the benchmark. If these times are to short, your VM might not be warmed up sufficiently or your result might have a too high standard deviation.</p>\n"},{"tags":[],"owner":{"account_id":1041776,"reputation":2850,"user_id":1047667,"accept_rate":100,"display_name":"Nitsan Wakart"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1454397293,"creation_date":1454397293,"answer_id":35147232,"question_id":35046745,"body_markdown":"JMH offers the fork functionality for a few reasons. One is compilation profile separation as discussed by Rafael above. But this behaviour is not controlled by the @Forks annotation (unless you choose 0 forks, which means no subprocesses are forked to run benchmarks at all). You can choose to run all the benchmarks as part of your benchmark warmup (thus creating a mixed profile for the JIT to work with) by using the warmup mode control(-wm).\r\n\r\nThe reality is that many things can conspire to tilt your results one way or another and running any benchmark multiple times to establish run-to-run variance is an important practice which JMH supports (and most hand-rolled framework don&#39;t help with). Reasons for run to run variance might include (but I&#39;m sure there&#39;s more):\r\n\r\n * CPU start at a certain C-state and scale up the frequency at the face of load, then overheat and scale it down. You can control this issue on certain OSs.\r\n\r\n * Memory alignment of your process can lead to paging behaviour differences.\r\n * Background application activity.\r\n * CPU allocation by the OS will vary resulting in different sets of CPUs used for each run.\r\n * Page cache contents and swapping\r\n * JIT compilation is triggered concurrently and may lead to different results (this will tend to happen when larger bits of code are under test). Note that small single threaded benchmarks will typically not have this issue.\r\n * GC behaviour can trigger with slightly different timings from run to run leading to different results.\r\n\r\nRunning your benchmark with at least a few forks will help shake out these differences and give you an idea of the run to run variance you see in your benchmark. I&#39;d recommend you start with the default of 10 and cut it back (or increase it) experimentally depending on your benchmark. ","title":"What is the purpose of JMH @Fork?","body":"<p>JMH offers the fork functionality for a few reasons. One is compilation profile separation as discussed by Rafael above. But this behaviour is not controlled by the @Forks annotation (unless you choose 0 forks, which means no subprocesses are forked to run benchmarks at all). You can choose to run all the benchmarks as part of your benchmark warmup (thus creating a mixed profile for the JIT to work with) by using the warmup mode control(-wm).</p>\n\n<p>The reality is that many things can conspire to tilt your results one way or another and running any benchmark multiple times to establish run-to-run variance is an important practice which JMH supports (and most hand-rolled framework don't help with). Reasons for run to run variance might include (but I'm sure there's more):</p>\n\n<ul>\n<li><p>CPU start at a certain C-state and scale up the frequency at the face of load, then overheat and scale it down. You can control this issue on certain OSs.</p></li>\n<li><p>Memory alignment of your process can lead to paging behaviour differences.</p></li>\n<li>Background application activity.</li>\n<li>CPU allocation by the OS will vary resulting in different sets of CPUs used for each run.</li>\n<li>Page cache contents and swapping</li>\n<li>JIT compilation is triggered concurrently and may lead to different results (this will tend to happen when larger bits of code are under test). Note that small single threaded benchmarks will typically not have this issue.</li>\n<li>GC behaviour can trigger with slightly different timings from run to run leading to different results.</li>\n</ul>\n\n<p>Running your benchmark with at least a few forks will help shake out these differences and give you an idea of the run to run variance you see in your benchmark. I'd recommend you start with the default of 10 and cut it back (or increase it) experimentally depending on your benchmark. </p>\n"},{"tags":[],"owner":{"account_id":6401714,"reputation":5744,"user_id":4964136,"accept_rate":100,"display_name":"Vishwa Ratna"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1579072156,"creation_date":1579072156,"answer_id":59746560,"question_id":35046745,"body_markdown":"**Update:**\r\n\r\n&gt; JMH (the Java Microbenchmark Harness),has been added to the JDK\r\n&gt; starting with JDK 12.\r\n\r\n`@Fork` annotation, instructs how benchmark execution will happen the `value` parameter controls how many times the benchmark will be executed, and the `warmup` parameter controls how many times a benchmark will dry run before results are collected.\r\n\r\n**Example:**\r\n\r\n    @Benchmark\r\n    @Fork(value = 1, warmups = 3)\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    public void myMethod() {\r\n        // Do nothing\r\n    }\r\n\r\nThis instructs **JMH** to run three warm-up forks and **discard results** before moving onto **real timed benchmarking**.","title":"What is the purpose of JMH @Fork?","body":"<p><strong>Update:</strong></p>\n\n<blockquote>\n  <p>JMH (the Java Microbenchmark Harness),has been added to the JDK\n  starting with JDK 12.</p>\n</blockquote>\n\n<p><code>@Fork</code> annotation, instructs how benchmark execution will happen the <code>value</code> parameter controls how many times the benchmark will be executed, and the <code>warmup</code> parameter controls how many times a benchmark will dry run before results are collected.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>@Benchmark\n@Fork(value = 1, warmups = 3)\n@BenchmarkMode(Mode.AverageTime)\npublic void myMethod() {\n    // Do nothing\n}\n</code></pre>\n\n<p>This instructs <strong>JMH</strong> to run three warm-up forks and <strong>discard results</strong> before moving onto <strong>real timed benchmarking</strong>.</p>\n"}],"owner":{"account_id":1859358,"reputation":42879,"user_id":1684269,"accept_rate":91,"display_name":"Ole"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12534,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":3,"score":34,"last_activity_date":1682311155,"creation_date":1453924232,"question_id":35046745,"body_markdown":"If IIUC each fork creates a separate virtual machine for the reason that each virtual machine instance might run with slight differences in JIT instructions?\r\n\r\nI&#39;m also curious about what the time attribute does in the below annotations:\r\n\r\n    @Warmup(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\r\n    @Measurement(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\r\n\r\nTIA,\r\nOle","title":"What is the purpose of JMH @Fork?","body":"<p>If IIUC each fork creates a separate virtual machine for the reason that each virtual machine instance might run with slight differences in JIT instructions?</p>\n\n<p>I'm also curious about what the time attribute does in the below annotations:</p>\n\n<pre><code>@Warmup(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\n@Measurement(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\n</code></pre>\n\n<p>TIA,\nOle</p>\n"},{"tags":["java","spring","spring-boot","generics"],"answers":[{"tags":[],"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682310140,"creation_date":1682310140,"answer_id":76088570,"question_id":76057420,"body_markdown":"You might be running into issues because &#39;ListMapper&#39; defined as Component and component by default is created with Singleton scope. \r\n\r\nYou might have to define &#39;ListMapper&#39; beans as outlined in the article https://www.baeldung.com/spring-qualifier-annotation with Qualifier for getting the desired result.\r\n\r\nIn your case, you might have to remove Component annotation from &#39;ListMapper&#39; and Assuming your mapper implementation looks like below:\r\n\r\n```\r\n@Component\r\n@Qualifier(&quot;foobar&quot;)\r\npublic class FooBarMapper implements Mapper&lt;Foo, Bar&gt;{\r\n\r\n  @Override\r\n  public Bar map(final Foo foo) {\r\n    return new Bar();\r\n  }\r\n}\r\n```\r\nYour bean definition can something like :\r\n\r\n```\r\n@Configuration\r\npublic class Config {\r\n\r\n\t@Bean\r\n\tpublic ListMapper&lt;Foo, Bar&gt; createFooBarListMapper(@Qualifier(&quot;foobar&quot;) FooBarMapper mapper) {\r\n\t\treturn new ListMapper&lt;Foo, Bar&gt;(mapper);\r\n\t}\r\n}\r\n```","title":"Spring Boot and Generic component injection","body":"<p>You might be running into issues because 'ListMapper' defined as Component and component by default is created with Singleton scope.</p>\n<p>You might have to define 'ListMapper' beans as outlined in the article <a href=\"https://www.baeldung.com/spring-qualifier-annotation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-qualifier-annotation</a> with Qualifier for getting the desired result.</p>\n<p>In your case, you might have to remove Component annotation from 'ListMapper' and Assuming your mapper implementation looks like below:</p>\n<pre><code>@Component\n@Qualifier(&quot;foobar&quot;)\npublic class FooBarMapper implements Mapper&lt;Foo, Bar&gt;{\n\n  @Override\n  public Bar map(final Foo foo) {\n    return new Bar();\n  }\n}\n</code></pre>\n<p>Your bean definition can something like :</p>\n<pre><code>@Configuration\npublic class Config {\n\n    @Bean\n    public ListMapper&lt;Foo, Bar&gt; createFooBarListMapper(@Qualifier(&quot;foobar&quot;) FooBarMapper mapper) {\n        return new ListMapper&lt;Foo, Bar&gt;(mapper);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17981414,"reputation":73,"user_id":13067646,"display_name":"JerryThePineapple"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682310140,"creation_date":1681926160,"question_id":76057420,"body_markdown":"Given the following functional interface:\r\n\r\n```\r\n@FunctionalInterface\r\npublic interface Mapper&lt;FROM, TO&gt; {\r\n    TO map(FROM from);\r\n}\r\n```\r\n\r\nand the concrete classes that implement the functional interface (which are left out for brevity). Idea is to inject the generic class Mapper into another generic component called the ListMapper given below:\r\n\r\n```\r\n@Component\r\npublic final class ListMapper&lt;FROM, TO&gt; {\r\n    private final Mapper&lt;FROM, TO&gt; mapper;\r\n\r\n    public Mapper(Mapper&lt;FROM, TO&gt; mapper) {\r\n        this.mapper = mapper;\r\n    }\r\n\r\n    public List&lt;TO&gt; mapList(final List&lt;FROM&gt; data) {\r\n        if (data == null) return null;\r\n\r\n        return data.stream()\r\n                .map(mapper::map)\r\n                .collect(Collectors.toList());\r\n    }\r\n}\r\n```\r\n\r\nListMapper is injected into other components like so:\r\n\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\nclass MyClass1 {\r\n    private final ListMapper&lt;Foo1, Bar1&gt; mapper;\r\n\r\n    // ... rest is omitted for brevity\r\n}\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\nclass MyClass2 {\r\n    private final ListMapper&lt;Foo2, Bar2&gt; mapper;\r\n \r\n    // ...rest is omitted for brevity\r\n}\r\n```\r\n\r\nHowever, doing so results in an error stating that the parameter mapper required a single bean, but three were found (as three different implementations of the Mapper interface are defined).\r\n\r\nIs it possible to resolve this dependency injection?\r\n\r\n\r\n\r\n","title":"Spring Boot and Generic component injection","body":"<p>Given the following functional interface:</p>\n<pre><code>@FunctionalInterface\npublic interface Mapper&lt;FROM, TO&gt; {\n    TO map(FROM from);\n}\n</code></pre>\n<p>and the concrete classes that implement the functional interface (which are left out for brevity). Idea is to inject the generic class Mapper into another generic component called the ListMapper given below:</p>\n<pre><code>@Component\npublic final class ListMapper&lt;FROM, TO&gt; {\n    private final Mapper&lt;FROM, TO&gt; mapper;\n\n    public Mapper(Mapper&lt;FROM, TO&gt; mapper) {\n        this.mapper = mapper;\n    }\n\n    public List&lt;TO&gt; mapList(final List&lt;FROM&gt; data) {\n        if (data == null) return null;\n\n        return data.stream()\n                .map(mapper::map)\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n<p>ListMapper is injected into other components like so:</p>\n<pre><code>@Component\n@RequiredArgsConstructor\nclass MyClass1 {\n    private final ListMapper&lt;Foo1, Bar1&gt; mapper;\n\n    // ... rest is omitted for brevity\n}\n\n@Component\n@RequiredArgsConstructor\nclass MyClass2 {\n    private final ListMapper&lt;Foo2, Bar2&gt; mapper;\n \n    // ...rest is omitted for brevity\n}\n</code></pre>\n<p>However, doing so results in an error stating that the parameter mapper required a single bean, but three were found (as three different implementations of the Mapper interface are defined).</p>\n<p>Is it possible to resolve this dependency injection?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","netflix-zuul"],"answers":[{"tags":[],"owner":{"account_id":20887033,"reputation":109,"user_id":15343391,"display_name":"AdvMaple"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682310140,"creation_date":1682310140,"answer_id":76088571,"question_id":76004120,"body_markdown":"After some trying out, I was able to get response and request json string using `ContentCachingRequestWrapper` and `ContentCachingResponseWrapper`. The controller now become like this:\r\n```java\r\n@RequestMapping(value = &quot;/getUserByPhone&quot;, method = {RequestMethod.GET}, produces = &quot;application/json;charset=utf-8&quot;)\r\n    public void getUserbyIsdn(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {\r\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\r\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\r\n        requestWrapper.getRequestDispatcher(configAPI.getApi_getUserbyIsdn_user()).forward(requestWrapper, responseWrapper);\r\n        // do what ever you want here with response and request\r\n        apiLogService.addApiLog(requestWrapper, responseWrapper, &quot;getUserByIsdn&quot;, timer);\r\n\r\n        // have to has this to return original response of other service\r\n        responseWrapper.copyBodyToResponse();\r\n    }\r\n```\r\n\r\nFunction `addApiLog`:\r\n```java\r\npublic void addApiLog(ContentCachingRequestWrapper request, ContentCachingResponseWrapper response) {\r\n    String requestJson = IOUtils.toString(request.getContentAsByteArray());\r\n    String responseJson = IOUtils.toString(response.getContentAsByteArray());\r\n    // handle json String using JSONObject or GSON as needed\r\n}\r\n```","title":"How to get request and response as string after RequestDispatcher forward","body":"<p>After some trying out, I was able to get response and request json string using <code>ContentCachingRequestWrapper</code> and <code>ContentCachingResponseWrapper</code>. The controller now become like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = &quot;/getUserByPhone&quot;, method = {RequestMethod.GET}, produces = &quot;application/json;charset=utf-8&quot;)\n    public void getUserbyIsdn(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\n        requestWrapper.getRequestDispatcher(configAPI.getApi_getUserbyIsdn_user()).forward(requestWrapper, responseWrapper);\n        // do what ever you want here with response and request\n        apiLogService.addApiLog(requestWrapper, responseWrapper, &quot;getUserByIsdn&quot;, timer);\n\n        // have to has this to return original response of other service\n        responseWrapper.copyBodyToResponse();\n    }\n</code></pre>\n<p>Function <code>addApiLog</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void addApiLog(ContentCachingRequestWrapper request, ContentCachingResponseWrapper response) {\n    String requestJson = IOUtils.toString(request.getContentAsByteArray());\n    String responseJson = IOUtils.toString(response.getContentAsByteArray());\n    // handle json String using JSONObject or GSON as needed\n}\n</code></pre>\n"}],"owner":{"account_id":20887033,"reputation":109,"user_id":15343391,"display_name":"AdvMaple"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76088571,"answer_count":1,"score":0,"last_activity_date":1682310140,"creation_date":1681380003,"question_id":76004120,"body_markdown":"In my Springboot application, I use `RequestDispatcher` forward to send the request and response to a remote service. Now I need to get that `response` and `request` as string to log it into database.\r\nThe `request` and `response` both contain JSON data.  \r\n```\r\nRequestDispatcher requestDispatcher = request.getRequestDispatcher(configAPI.getUserByPhoneUrl());\r\nrequestDispatcher.forward(request, response);\r\n```\r\nThe `RequestDispatcher` will modify the response in-place. So after the `forward()` function, I&#39;m unable to get the json from the response created by `requestDispatcher.forward(request, response)`.\r\n\r\n```java\r\n@RequestMapping(value = &quot;/getUserByPhone&quot;, method = {RequestMethod.GET}, produces = &quot;application/json;charset=utf-8&quot;)\r\n    public void getUserbyIsdn(HttpServletRequest request, HttpServletResponse response) {\r\n            // Forward the request to the remote service\r\n            RequestDispatcher requestDispatcher = request.getRequestDispatcher(configAPI.getUserByPhoneUrl());\r\n            requestDispatcher.forward(request, response);\r\n            // response now has result from remote service\r\n            // TODO: print out json in response here\r\n    }\r\n```\r\n\r\nAny idea on how to get response as json?\r\n\r\nI&#39;ve try using `HttpServletResponseWrapper` to access the response but unable to. \r\nExample code using `HttpServletResponseWrapper`:\r\n```java\r\nHttpServletRequestWrapper requestWrapper = new HttpServletRequestWrapper(request);\r\n            HttpServletResponseWrapper responseWrapper = new HttpServletResponseWrapper(response);\r\n\r\n            // Forward the request to the remote service\r\n            request.getRequestDispatcher(configAPI.getUserByPhoneUrl()).forward(requestWrapper, responseWrapper);\r\n```\r\nbut is result in NullPointerException because `ApplicationContext` request is not set.  ","title":"How to get request and response as string after RequestDispatcher forward","body":"<p>In my Springboot application, I use <code>RequestDispatcher</code> forward to send the request and response to a remote service. Now I need to get that <code>response</code> and <code>request</code> as string to log it into database.\nThe <code>request</code> and <code>response</code> both contain JSON data.</p>\n<pre><code>RequestDispatcher requestDispatcher = request.getRequestDispatcher(configAPI.getUserByPhoneUrl());\nrequestDispatcher.forward(request, response);\n</code></pre>\n<p>The <code>RequestDispatcher</code> will modify the response in-place. So after the <code>forward()</code> function, I'm unable to get the json from the response created by <code>requestDispatcher.forward(request, response)</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = &quot;/getUserByPhone&quot;, method = {RequestMethod.GET}, produces = &quot;application/json;charset=utf-8&quot;)\n    public void getUserbyIsdn(HttpServletRequest request, HttpServletResponse response) {\n            // Forward the request to the remote service\n            RequestDispatcher requestDispatcher = request.getRequestDispatcher(configAPI.getUserByPhoneUrl());\n            requestDispatcher.forward(request, response);\n            // response now has result from remote service\n            // TODO: print out json in response here\n    }\n</code></pre>\n<p>Any idea on how to get response as json?</p>\n<p>I've try using <code>HttpServletResponseWrapper</code> to access the response but unable to.\nExample code using <code>HttpServletResponseWrapper</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpServletRequestWrapper requestWrapper = new HttpServletRequestWrapper(request);\n            HttpServletResponseWrapper responseWrapper = new HttpServletResponseWrapper(response);\n\n            // Forward the request to the remote service\n            request.getRequestDispatcher(configAPI.getUserByPhoneUrl()).forward(requestWrapper, responseWrapper);\n</code></pre>\n<p>but is result in NullPointerException because <code>ApplicationContext</code> request is not set.</p>\n"},{"tags":["java","multithreading","performance","concurrency","virtual-threads"],"comments":[{"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"score":4,"creation_date":1682275369,"post_id":76086334,"comment_id":134185871,"body_markdown":"Add size of threads array to the system out at the end to have an idea what is wrong. To make these two examples equivalent, change `IntStream.of()` to `IntStream.range()`.","body":"Add size of threads array to the system out at the end to have an idea what is wrong. To make these two examples equivalent, change <code>IntStream.of()</code> to <code>IntStream.range()</code>."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1682277026,"post_id":76086334,"comment_id":134186102,"body_markdown":"The way you&#39;re measuring performance will produce outright lies, but Maciej&#39;s point is even more relevant.","body":"The way you&#39;re measuring performance will produce outright lies, but Maciej&#39;s point is even more relevant."},{"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"score":0,"creation_date":1682306849,"post_id":76086334,"comment_id":134188998,"body_markdown":"@MaciejWalkowiak\nThanks for point out the mistake there. I was thinking that those are range of numbers!","body":"@MaciejWalkowiak Thanks for point out the mistake there. I was thinking that those are range of numbers!"},{"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"score":0,"creation_date":1682308926,"post_id":76086334,"comment_id":134189163,"body_markdown":"@LouisWasserman\nI have corrected the mistake as Maciej pointed out. But, otherwise what do you suggest to measure the execution performance? profiling? I will not draw generic conclusion from my 8-core system. The intent here is to evaluate virtual threads in general.","body":"@LouisWasserman I have corrected the mistake as Maciej pointed out. But, otherwise what do you suggest to measure the execution performance? profiling? I will not draw generic conclusion from my 8-core system. The intent here is to evaluate virtual threads in general."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1682311605,"post_id":76086334,"comment_id":134189392,"body_markdown":"If you want meaningful performance comparisons, you pretty much _must_ use JMH.  Subtracting System.currentTimeMillis can produce results that are outright wrong even for your system.","body":"If you want meaningful performance comparisons, you pretty much <i>must</i> use JMH.  Subtracting System.currentTimeMillis can produce results that are outright wrong even for your system."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1682406687,"post_id":76086334,"comment_id":134205760,"body_markdown":"Don’t insert the answer into your question. Post an answer instead.","body":"Don’t insert the answer into your question. Post an answer instead."},{"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"score":0,"creation_date":1682578818,"post_id":76086334,"comment_id":134238773,"body_markdown":"@Holger\nstackoverflow doesn&#39;t let you answer your own question for first 24 hours. You must be knowing it already. And later on, I didn&#39;t get time on creating a post here. I will do it.","body":"@Holger stackoverflow doesn&#39;t let you answer your own question for first 24 hours. You must be knowing it already. And later on, I didn&#39;t get time on creating a post here. I will do it."}],"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682309779,"creation_date":1682271710,"question_id":76086334,"body_markdown":"I&#39;m trying to create 100k virtual threads with simple print statements. When I use the below code, the estimated execution time is 2 milliseconds:\r\n\r\n```\r\nList &lt; Thread &gt; threads = IntStream.of(0, 100000)\r\n  .mapToObj(it -&gt; Thread.ofVirtual().unstarted(() -&gt; System.out.println(Thread.currentThread())))\r\n  .toList();\r\n\r\nlong begin = System.currentTimeMillis();\r\nthreads.forEach(Thread::start);\r\nfor (Thread thread: threads) {\r\n  thread.join();\r\n}\r\nlong end = System.currentTimeMillis();\r\nSystem.out.println(&quot;time taken: &quot; + (end - begin) + &quot; milliseconds&quot;);\r\n\r\n```\r\n\r\nBut, when I use a `for` loop instead of `IntStream`, the estimated execution time is 6925 milliseconds. \r\n\r\n```\r\nList &lt; Thread &gt; threads = new ArrayList &lt; &gt; ();\r\nfor (int i = 0; i &lt; 100000; i++) {\r\n  threads.add(Thread.ofVirtual().unstarted(() -&gt; System.out.println(Thread.currentThread())));\r\n}\r\n\r\nlong begin = System.currentTimeMillis();\r\nthreads.forEach(Thread::start);\r\nfor (Thread thread: threads) {\r\n  thread.join();\r\n}\r\nlong end = System.currentTimeMillis();\r\nSystem.out.println(&quot;time taken: &quot; + (end - begin) + &quot; milliseconds&quot;);\r\n\r\n```\r\n\r\nI know that `IntStream` is more memory efficient than regular `for` loops. But, as per my understanding, `IntStream` doesn&#39;t do anything magical compared to a `for` loop. \r\nSo, I&#39;m wondering why there&#39;s a big gap in the performance above. I&#39;m running this experiment in an 8 core Mac machine. \r\n\r\n\r\n**Update:**\r\n`IntStream.of()` takes only two numbers above and those are not the range of numbers. So, it is incorrect. \r\n\r\nI removed the print statements and used a `HashSet` to track the number of platform threads used. After making the corrections, the estimated execution time to create 100k virtual threads using both `for` loop and `IntStream.range()` is around 150 milliseconds in my 8 core system.  \r\n\r\nAdding `print` statements added lot of overheads as you can see from previously shared results. \r\n","title":"Virtual thread performance in IntSteram vs regular for loop","body":"<p>I'm trying to create 100k virtual threads with simple print statements. When I use the below code, the estimated execution time is 2 milliseconds:</p>\n<pre><code>List &lt; Thread &gt; threads = IntStream.of(0, 100000)\n  .mapToObj(it -&gt; Thread.ofVirtual().unstarted(() -&gt; System.out.println(Thread.currentThread())))\n  .toList();\n\nlong begin = System.currentTimeMillis();\nthreads.forEach(Thread::start);\nfor (Thread thread: threads) {\n  thread.join();\n}\nlong end = System.currentTimeMillis();\nSystem.out.println(&quot;time taken: &quot; + (end - begin) + &quot; milliseconds&quot;);\n\n</code></pre>\n<p>But, when I use a <code>for</code> loop instead of <code>IntStream</code>, the estimated execution time is 6925 milliseconds.</p>\n<pre><code>List &lt; Thread &gt; threads = new ArrayList &lt; &gt; ();\nfor (int i = 0; i &lt; 100000; i++) {\n  threads.add(Thread.ofVirtual().unstarted(() -&gt; System.out.println(Thread.currentThread())));\n}\n\nlong begin = System.currentTimeMillis();\nthreads.forEach(Thread::start);\nfor (Thread thread: threads) {\n  thread.join();\n}\nlong end = System.currentTimeMillis();\nSystem.out.println(&quot;time taken: &quot; + (end - begin) + &quot; milliseconds&quot;);\n\n</code></pre>\n<p>I know that <code>IntStream</code> is more memory efficient than regular <code>for</code> loops. But, as per my understanding, <code>IntStream</code> doesn't do anything magical compared to a <code>for</code> loop.\nSo, I'm wondering why there's a big gap in the performance above. I'm running this experiment in an 8 core Mac machine.</p>\n<p><strong>Update:</strong>\n<code>IntStream.of()</code> takes only two numbers above and those are not the range of numbers. So, it is incorrect.</p>\n<p>I removed the print statements and used a <code>HashSet</code> to track the number of platform threads used. After making the corrections, the estimated execution time to create 100k virtual threads using both <code>for</code> loop and <code>IntStream.range()</code> is around 150 milliseconds in my 8 core system.</p>\n<p>Adding <code>print</code> statements added lot of overheads as you can see from previously shared results.</p>\n"},{"tags":["java","spring","resttemplate","messageformat"],"comments":[{"owner":{"account_id":6960255,"reputation":1625,"user_id":5339966,"display_name":"mszymborski"},"score":0,"creation_date":1523112965,"post_id":49708603,"comment_id":86430711,"body_markdown":"You could try using wireshark to see what actually gets sent.","body":"You could try using wireshark to see what actually gets sent."}],"answers":[{"tags":[],"owner":{"account_id":4290411,"reputation":11,"user_id":3506950,"display_name":"dejantm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589870918,"creation_date":1589815563,"answer_id":61873111,"question_id":49708603,"body_markdown":"* The JWT had way to many scopes, the server API decided to throw a 400 without any message and the server logs were not available.. \r\n* A flag in `application.properties` that sets the maximum header size. ","title":"Spring restTemplate not working for single quotes in URL. Works with postman","body":"<ul>\n<li>The JWT had way to many scopes, the server API decided to throw a 400 without any message and the server logs were not available.. </li>\n<li>A flag in <code>application.properties</code> that sets the maximum header size. </li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4606083,"reputation":304,"user_id":3735541,"display_name":"Juan Pablo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682309343,"creation_date":1682309343,"answer_id":76088520,"question_id":49708603,"body_markdown":"    URI uri = UriComponentsBuilder.fromUriString(&quot;.../api/odata/GetAvailableObjects?fromTime=datetime&#39;2018-02-02T12:00:00&#39;&amp;$format=json&amp;toTime=datetime&#39;2018-02-10T12:00:00&#39;\r\n    &quot;).build().encode().toUri();\r\n\r\nand send the uri in rest template\r\nthis works for me\r\n","title":"Spring restTemplate not working for single quotes in URL. Works with postman","body":"<pre><code>URI uri = UriComponentsBuilder.fromUriString(&quot;.../api/odata/GetAvailableObjects?fromTime=datetime'2018-02-02T12:00:00'&amp;$format=json&amp;toTime=datetime'2018-02-10T12:00:00'\n&quot;).build().encode().toUri();\n</code></pre>\n<p>and send the uri in rest template\nthis works for me</p>\n"}],"owner":{"account_id":4290411,"reputation":11,"user_id":3506950,"display_name":"dejantm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":616,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1682309343,"creation_date":1523112770,"question_id":49708603,"body_markdown":"Simple restTemplate exchange used for a GET request. \r\n\r\nHeader information\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setAccept(Arrays.asList(MediaType.ALL));\r\n    headers.setContentType(MediaType.APPLICATION_JSON_UTF8);\r\n    headers.add(&quot;Authorization&quot;,  ************);\r\n     \r\n\r\nURL:\r\n\r\n    /api/odata/GetAvailableObjects?fromTime=datetime&#39;2018-02-02T12:00:00&#39;&amp;$format=json&amp;toTime=datetime&#39;2018-02-10T12:00:00&#39;\r\n\r\nI tried building this URL with either `MessageFormat.format` or `URIBuilder`. \r\nThe single quotes are the problem. So far I tried double-ing them, escaping them\r\nor leaving them as they are. \r\n\r\nI enabled some extra logging with : \r\nlogging.level.org.springframework.web.client.RestTemplate=DEBUG\r\nThis displays the URL.. if I copy that URL and paste it in POSTMAN, I receive results, from spring I receive 400 Bad request. \r\n\r\nI suppose it might be some additional encoding to blame.\r\nAny ideas? \r\n\r\n\r\n","title":"Spring restTemplate not working for single quotes in URL. Works with postman","body":"<p>Simple restTemplate exchange used for a GET request. </p>\n\n<p>Header information</p>\n\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.setAccept(Arrays.asList(MediaType.ALL));\nheaders.setContentType(MediaType.APPLICATION_JSON_UTF8);\nheaders.add(\"Authorization\",  ************);\n</code></pre>\n\n<p>URL:</p>\n\n<pre><code>/api/odata/GetAvailableObjects?fromTime=datetime'2018-02-02T12:00:00'&amp;$format=json&amp;toTime=datetime'2018-02-10T12:00:00'\n</code></pre>\n\n<p>I tried building this URL with either <code>MessageFormat.format</code> or <code>URIBuilder</code>. \nThe single quotes are the problem. So far I tried double-ing them, escaping them\nor leaving them as they are. </p>\n\n<p>I enabled some extra logging with : \nlogging.level.org.springframework.web.client.RestTemplate=DEBUG\nThis displays the URL.. if I copy that URL and paste it in POSTMAN, I receive results, from spring I receive 400 Bad request. </p>\n\n<p>I suppose it might be some additional encoding to blame.\nAny ideas? </p>\n"},{"tags":["java","yaml","snakeyaml"],"answers":[{"tags":[],"owner":{"account_id":1098604,"reputation":443,"user_id":1091628,"display_name":"Laa"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1614359641,"creation_date":1381289786,"answer_id":19262642,"question_id":19246027,"body_markdown":"Use `org.yaml.snakeyaml.representer.Representer`, set `Tag.MAP` to hide the root tag.\r\n\r\n    Representer representer = new Representer();\r\n    representer.addClassTag(Person.class, Tag.MAP);","title":"How to hide bean type in snakeyaml","body":"<p>Use <code>org.yaml.snakeyaml.representer.Representer</code>, set <code>Tag.MAP</code> to hide the root tag.</p>\n<pre><code>Representer representer = new Representer();\nrepresenter.addClassTag(Person.class, Tag.MAP);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3883934,"reputation":491,"user_id":3215802,"display_name":"edgraaff"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1459111096,"creation_date":1459111096,"answer_id":36252372,"question_id":19246027,"body_markdown":"You can extend Representer to &#39;sneakily&#39; inject any non-registered bean class as Map.\r\n\r\n    public class MapRepresenter extends Representer {\r\n    \r\n        @Override\r\n        protected MappingNode representJavaBean(Set&lt;Property&gt; properties, Object javaBean) {\r\n            if (!classTags.containsKey(javaBean.getClass()))\r\n                addClassTag(javaBean.getClass(), Tag.MAP);\r\n    \r\n            return super.representJavaBean(properties, javaBean);\r\n        }\r\n    \r\n    }\r\n","title":"How to hide bean type in snakeyaml","body":"<p>You can extend Representer to 'sneakily' inject any non-registered bean class as Map.</p>\n\n<pre><code>public class MapRepresenter extends Representer {\n\n    @Override\n    protected MappingNode representJavaBean(Set&lt;Property&gt; properties, Object javaBean) {\n        if (!classTags.containsKey(javaBean.getClass()))\n            addClassTag(javaBean.getClass(), Tag.MAP);\n\n        return super.representJavaBean(properties, javaBean);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":182970,"reputation":3454,"user_id":418057,"display_name":"Craigo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1682308172,"creation_date":1682308172,"answer_id":76088454,"question_id":19246027,"body_markdown":"Some more clarity on using `org.yaml.snakeyaml.representer.Representer`, it needs to be passed to YAML:\r\n\r\n```java\r\nDumperOptions options = new DumperOptions();\r\noptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\r\noptions.setPrettyFlow(true);\r\n\r\nRepresenter representer = new Representer(options);\r\nrepresenter.addClassTag(Person.class, Tag.MAP); // Put your class here\r\n\r\nYaml yaml = new Yaml(representer, options);\r\nString output = yaml.dump(person); // Put your object here\r\nSystem.out.println(output);\r\n```","title":"How to hide bean type in snakeyaml","body":"<p>Some more clarity on using <code>org.yaml.snakeyaml.representer.Representer</code>, it needs to be passed to YAML:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DumperOptions options = new DumperOptions();\noptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\noptions.setPrettyFlow(true);\n\nRepresenter representer = new Representer(options);\nrepresenter.addClassTag(Person.class, Tag.MAP); // Put your class here\n\nYaml yaml = new Yaml(representer, options);\nString output = yaml.dump(person); // Put your object here\nSystem.out.println(output);\n</code></pre>\n"}],"owner":{"account_id":1098604,"reputation":443,"user_id":1091628,"display_name":"Laa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5607,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":19262642,"answer_count":3,"score":11,"last_activity_date":1682308172,"creation_date":1381230222,"question_id":19246027,"body_markdown":"This code will output:(YAML)\r\n\r\n--- !!org.test.bean.Person\r\n\r\naddress: 4011 16th Ave S\r\n\r\n.....\r\n\r\nCan hide my bean type(org.test.bean.Person) anyway !?\r\n(prefer to use snakeyaml config...i can&#39;t find it..)\r\n\r\nthanks!!\r\n\r\n\r\n    public static void dumpYAML(){\r\n        Constructor constructor = new Constructor(Person.class);\r\n\t    TypeDescription personDescription = new TypeDescription(Person.class);\r\n\t    personDescription.putListPropertyType(&quot;phone&quot;, Tel.class);\r\n\t    constructor.addTypeDescription(personDescription);\r\n\r\n\t    Yaml yaml = new Yaml(constructor);\r\n\t    Person person = (Person) yaml.load(makeYAML());\r\n\t    \r\n\t    DumperOptions options = new DumperOptions();\r\n\t    options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\r\n\t    options.setCanonical(false); // display bean member attribute\r\n\t    options.setExplicitStart(true); // display --- start\r\n\r\n\t    yaml = new Yaml(options);\r\n\t    String output = yaml.dump(person);\r\n\t    System.out.println(output);\r\n\t}","title":"How to hide bean type in snakeyaml","body":"<p>This code will output:(YAML)</p>\n\n<p>--- !!org.test.bean.Person</p>\n\n<p>address: 4011 16th Ave S</p>\n\n<p>.....</p>\n\n<p>Can hide my bean type(org.test.bean.Person) anyway !?\n(prefer to use snakeyaml config...i can't find it..)</p>\n\n<p>thanks!!</p>\n\n<pre><code>public static void dumpYAML(){\n    Constructor constructor = new Constructor(Person.class);\n    TypeDescription personDescription = new TypeDescription(Person.class);\n    personDescription.putListPropertyType(\"phone\", Tel.class);\n    constructor.addTypeDescription(personDescription);\n\n    Yaml yaml = new Yaml(constructor);\n    Person person = (Person) yaml.load(makeYAML());\n\n    DumperOptions options = new DumperOptions();\n    options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\n    options.setCanonical(false); // display bean member attribute\n    options.setExplicitStart(true); // display --- start\n\n    yaml = new Yaml(options);\n    String output = yaml.dump(person);\n    System.out.println(output);\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":7712408,"reputation":2531,"user_id":5841297,"accept_rate":50,"display_name":"Phenomenal One"},"score":3,"creation_date":1537270426,"post_id":52385610,"comment_id":91715377,"body_markdown":"Can you be more specific with your question?","body":"Can you be more specific with your question?"},{"owner":{"account_id":5674322,"reputation":4285,"user_id":4488077,"display_name":"f-CJ"},"score":3,"creation_date":1537271550,"post_id":52385610,"comment_id":91716121,"body_markdown":"With just the stack trace is impossible to answer. Sharing your code would make it easier","body":"With just the stack trace is impossible to answer. Sharing your code would make it easier"},{"owner":{"account_id":13265395,"reputation":1820,"user_id":9578419,"display_name":"S.Daineko"},"score":0,"creation_date":1590511965,"post_id":52385610,"comment_id":109704957,"body_markdown":"Despite the departure from the rules, comments and the closure of the question, the question for those who are in the same situation is clear. Thank you author!","body":"Despite the departure from the rules, comments and the closure of the question, the question for those who are in the same situation is clear. Thank you author!"}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":3,"up_vote_count":51,"is_accepted":false,"score":48,"last_activity_date":1537271156,"creation_date":1537271156,"answer_id":52385887,"question_id":52385610,"body_markdown":"Judging by the presence of `java.base/jdk.internal.loader.ClassLoaders` in the stack trace, you are using Java 9 or later. Spring Boot&#39;s `DefaultRestartInitializer` is trying to cast the app class loader to a `URLClassLoader`. This works in Java 8 and earlier but does not work with Java 9 or later. Spring Boot had been [updated](https://github.com/spring-projects/spring-boot/commit/ce77f48c3f9c8acdd12d3a629b9c8a393050c271) in 2.0 to cope with this change in Java 9.\r\n\r\nIf you want to use Spring Boot with Java 9 or later, you should upgrade to Spring Boot 2. At the time of writing, the latest release is 2.0.5 which supports Java 8, 9, and 10. Spring Boot 2.1, which will be released later this year, will add support for Java 11.","title":"Java Class cast Exception - Spring boot","body":"<p>Judging by the presence of <code>java.base/jdk.internal.loader.ClassLoaders</code> in the stack trace, you are using Java 9 or later. Spring Boot's <code>DefaultRestartInitializer</code> is trying to cast the app class loader to a <code>URLClassLoader</code>. This works in Java 8 and earlier but does not work with Java 9 or later. Spring Boot had been <a href=\"https://github.com/spring-projects/spring-boot/commit/ce77f48c3f9c8acdd12d3a629b9c8a393050c271\" rel=\"noreferrer\">updated</a> in 2.0 to cope with this change in Java 9.</p>\n\n<p>If you want to use Spring Boot with Java 9 or later, you should upgrade to Spring Boot 2. At the time of writing, the latest release is 2.0.5 which supports Java 8, 9, and 10. Spring Boot 2.1, which will be released later this year, will add support for Java 11.</p>\n"},{"tags":[],"owner":{"account_id":21635798,"reputation":1,"user_id":15958726,"display_name":"Prasun Patidar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621323821,"creation_date":1621323821,"answer_id":67581945,"question_id":52385610,"body_markdown":"\r\n***\r\n\r\n&gt; solution: change JDK version 8 in your IDE\r\n--------------------------------------------\r\n\r\n***\r\n\r\nI got the same issue in the spring boot application   in IntelliJ idea  and sts but I found one solution in that issue :\r\n\r\nif you are using AD integration in your project with it belongs to Microsoft, then you need to use java 8 version JDK because currently Microsoft AD plugins are not supported to java 9 or higher version it will support only the java 8 or lower version \r\n\r\n\r\n\r\n\r\n\r\n","title":"Java Class cast Exception - Spring boot","body":"<hr />\n<blockquote>\n<p>solution: change JDK version 8 in your IDE</p>\n</blockquote>\n<hr />\n<hr />\n<p>I got the same issue in the spring boot application   in IntelliJ idea  and sts but I found one solution in that issue :</p>\n<p>if you are using AD integration in your project with it belongs to Microsoft, then you need to use java 8 version JDK because currently Microsoft AD plugins are not supported to java 9 or higher version it will support only the java 8 or lower version</p>\n"},{"tags":[],"owner":{"account_id":7996752,"reputation":61,"user_id":6032797,"display_name":"Hieu Nguyen"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1624706670,"creation_date":1624706670,"answer_id":68141865,"question_id":52385610,"body_markdown":"I had this problema on eclipse and had solved by doing these step:\r\n- First download java 8 (If you don&#39;t have) then install it\r\n- Second, I am not sure if you have to do it or not but just do it. I create JAVA_HOME path by right click to my desktop -&gt; properties -&gt; Advanced System Setting -&gt; Advanced Tab -&gt; Environment Variables -&gt; Add JAVA_HOME in both User Variables and System Variables -&gt; Click new -&gt; Variable Home is &quot;JAVA_HOME&quot;, Variable Value can be left empty -&gt; Browse Directory -&gt; point to your jdk folder (Exmaple: mine is C:\\Program Files\\Java\\jdk1.8.0_291)\r\n- Third, go to eclipse -&gt; go to window tab -&gt; choose java on the menu on the left side -&gt; Installed JREs -&gt; in default eclipse already had jre directory -&gt; click to it and then click duplicate -&gt; change the directory to your own jre directory (example: C:\\Program Files\\Java\\jre1.8.0_291) \r\n- Forth: back to java menu, choose compiler option -&gt; then on the right side -&gt; change compiler compliance level to 1.8.\r\n\r\nThat is all!\r\nHope it will be useful for you.","title":"Java Class cast Exception - Spring boot","body":"<p>I had this problema on eclipse and had solved by doing these step:</p>\n<ul>\n<li>First download java 8 (If you don't have) then install it</li>\n<li>Second, I am not sure if you have to do it or not but just do it. I create JAVA_HOME path by right click to my desktop -&gt; properties -&gt; Advanced System Setting -&gt; Advanced Tab -&gt; Environment Variables -&gt; Add JAVA_HOME in both User Variables and System Variables -&gt; Click new -&gt; Variable Home is &quot;JAVA_HOME&quot;, Variable Value can be left empty -&gt; Browse Directory -&gt; point to your jdk folder (Exmaple: mine is C:\\Program Files\\Java\\jdk1.8.0_291)</li>\n<li>Third, go to eclipse -&gt; go to window tab -&gt; choose java on the menu on the left side -&gt; Installed JREs -&gt; in default eclipse already had jre directory -&gt; click to it and then click duplicate -&gt; change the directory to your own jre directory (example: C:\\Program Files\\Java\\jre1.8.0_291)</li>\n<li>Forth: back to java menu, choose compiler option -&gt; then on the right side -&gt; change compiler compliance level to 1.8.</li>\n</ul>\n<p>That is all!\nHope it will be useful for you.</p>\n"},{"tags":[],"owner":{"account_id":7980045,"reputation":651,"user_id":6021740,"display_name":"Kidus Tekeste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664045399,"creation_date":1664045399,"answer_id":73839796,"question_id":52385610,"body_markdown":"Check your JAVA_HOME in hadoop-env.sh. Changing my JAVA_HOME value in $HADOOP_HOME/etc/hadoop with java 8 (`export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64`) value in the hadoop-env.sh solved this issue for me.\r\nI had a higher java version defined in my `hadoop-env.sh` value when I had defined java 8 in my .bashrc file. So keeping both the same java 8 version fixed the issue for me.","title":"Java Class cast Exception - Spring boot","body":"<p>Check your JAVA_HOME in hadoop-env.sh. Changing my JAVA_HOME value in $HADOOP_HOME/etc/hadoop with java 8 (<code>export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64</code>) value in the hadoop-env.sh solved this issue for me.\nI had a higher java version defined in my <code>hadoop-env.sh</code> value when I had defined java 8 in my .bashrc file. So keeping both the same java 8 version fixed the issue for me.</p>\n"}],"owner":{"account_id":9023811,"reputation":203,"user_id":8179865,"display_name":"shaan bhattacharya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94371,"favorite_count":0,"down_vote_count":6,"up_vote_count":21,"answer_count":4,"score":15,"last_activity_date":1682307945,"creation_date":1537270197,"question_id":52385610,"body_markdown":"```\r\nException in thread &quot;main&quot; java.lang.ClassCastException: java.base/jdk.internal.loader.ClassLoaders$AppClassLoader cannot be cast to java.base/java.net.URLClassLoader\r\n\r\n at org.springframework.boot.devtools.restart.DefaultRestartInitializer.getUrls(DefaultRestartInitializer.java:93)\r\n at org.springframework.boot.devtools.restart.DefaultRestartInitializer.getInitialUrls(DefaultRestartInitializer.java:56)\r\n at org.springframework.boot.devtools.restart.Restarter.&lt;init(Restarter.java:138)\r\n at org.springframework.boot.devtools.restart.Restarter.initialize(Restarter.java:537)\r\n at org.springframework.boot.devtools.restart.RestartApplicationListener.onApplicationStartedEvent(RestartApplicationListener.java:68)\r\n at org.springframework.boot.devtools.restart.RestartApplicationListener.onApplicationEvent(RestartApplicationListener.java:45)\r\n at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:166)\r\n at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)\r\n at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:121)\r\n at org.springframework.boot.context.event.EventPublishingRunListener.started(EventPublishingRunListener.java:63)\r\n at org.springframework.boot.SpringApplicationRunListeners.started(SpringApplicationRunListeners.java:48)\r\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:304)\r\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186)\r\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175)\r\n at com.rme.hub.RmeApplication.main(RmeApplication.java:24)\r\n```","title":"Java Class cast Exception - Spring boot","body":"<pre><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: java.base/jdk.internal.loader.ClassLoaders$AppClassLoader cannot be cast to java.base/java.net.URLClassLoader\n\n at org.springframework.boot.devtools.restart.DefaultRestartInitializer.getUrls(DefaultRestartInitializer.java:93)\n at org.springframework.boot.devtools.restart.DefaultRestartInitializer.getInitialUrls(DefaultRestartInitializer.java:56)\n at org.springframework.boot.devtools.restart.Restarter.&lt;init(Restarter.java:138)\n at org.springframework.boot.devtools.restart.Restarter.initialize(Restarter.java:537)\n at org.springframework.boot.devtools.restart.RestartApplicationListener.onApplicationStartedEvent(RestartApplicationListener.java:68)\n at org.springframework.boot.devtools.restart.RestartApplicationListener.onApplicationEvent(RestartApplicationListener.java:45)\n at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:166)\n at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)\n at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:121)\n at org.springframework.boot.context.event.EventPublishingRunListener.started(EventPublishingRunListener.java:63)\n at org.springframework.boot.SpringApplicationRunListeners.started(SpringApplicationRunListeners.java:48)\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:304)\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186)\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175)\n at com.rme.hub.RmeApplication.main(RmeApplication.java:24)\n</code></pre>\n"},{"tags":["java","typescript","visual-studio-code","code-snippets"],"comments":[{"owner":{"account_id":13770793,"reputation":25892,"user_id":9938317,"display_name":"rioV8"},"score":0,"creation_date":1682186759,"post_id":76080991,"comment_id":134177122,"body_markdown":"look at Hyper Snippets extension, where you can add code to the snippet and capture the variable as part of the snippet prefix","body":"look at Hyper Snippets extension, where you can add code to the snippet and capture the variable as part of the snippet prefix"},{"owner":{"account_id":13770793,"reputation":25892,"user_id":9938317,"display_name":"rioV8"},"score":0,"creation_date":1682187852,"post_id":76080991,"comment_id":134177252,"body_markdown":"Correction **HyperSnips**","body":"Correction <b>HyperSnips</b>"},{"owner":{"account_id":23832938,"reputation":48,"user_id":17838999,"display_name":"rennsax"},"score":0,"creation_date":1682210703,"post_id":76080991,"comment_id":134179443,"body_markdown":"@rioV8 Yeah I&#39;ve tried this extension. Could you please show some examples? I&#39;m a little confused when using it. Thanks!","body":"@rioV8 Yeah I&#39;ve tried this extension. Could you please show some examples? I&#39;m a little confused when using it. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":17983057,"reputation":1072,"user_id":13068918,"display_name":"Sheng Chen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682305924,"creation_date":1682305924,"answer_id":76088351,"question_id":76080991,"body_markdown":"This feature is called post-fix completion: https://code.visualstudio.com/docs/java/java-editing#_postfix-snippet-shortcuts\r\n\r\n\r\nFor TS/JS, there are some extensions support that, for example:\r\n\r\n- https://marketplace.visualstudio.com/items?itemName=ipatalas.vscode-postfix-ts","title":"How can I customize a suffix snippet, replacing the variable in VS Code?","body":"<p>This feature is called post-fix completion: <a href=\"https://code.visualstudio.com/docs/java/java-editing#_postfix-snippet-shortcuts\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/java/java-editing#_postfix-snippet-shortcuts</a></p>\n<p>For TS/JS, there are some extensions support that, for example:</p>\n<ul>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=ipatalas.vscode-postfix-ts\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=ipatalas.vscode-postfix-ts</a></li>\n</ul>\n"}],"owner":{"account_id":23832938,"reputation":48,"user_id":17838999,"display_name":"rennsax"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76088351,"answer_count":1,"score":0,"last_activity_date":1682305924,"creation_date":1682184272,"question_id":76080991,"body_markdown":"I&#39;m developing my Java project with VS Code when I find some powerful snippets:\r\n\r\n[suffix code snippets](https://i.stack.imgur.com/eoq8b.png)\r\n\r\nAfter I type a variable name and type `.sysout`, `.cast` and so on, the snippet suggestion pop out. When inserting, it leads to:\r\n\r\nres.sysout =\\&gt; `System.out.println(res);`\r\n\r\nres.cast =\\&gt; `(()(res))`\r\n\r\n...\r\n\r\nI&#39;m curious about how to realize this feature in my VS Code. By the time, I didn&#39;t find anything useful at [redhat-developer/vscode-java](https://github.com/redhat-developer/vscode-java).\r\n\r\nThen I want to transplant the snippet to support JS/TS, and other languages.\r\n\r\nI detailedly read [VS Code&#39;s doc about snippets](https://code.visualstudio.com/docs/editor/userdefinedsnippets), find something that might be useful:\r\n\r\n&gt; The following variables can be used:\r\n&gt; \r\n&gt; + `TM_SELECTED_TEXT` The currently selected text or the empty string\r\n&gt; + `TM_CURRENT_LINE` The contents of the current line\r\n&gt; + ...\r\n\r\nHowever, when I try to create the snippet, I don&#39;t know how to replace the variable name. In other words, I can get the variable name by `TM_CURRENT_LINE`, insert a snippet, but the previous variable name remains. For instance,\r\n\r\nres.log =&gt; `resconsole.log(res);`","title":"How can I customize a suffix snippet, replacing the variable in VS Code?","body":"<p>I'm developing my Java project with VS Code when I find some powerful snippets:</p>\n<p><a href=\"https://i.stack.imgur.com/eoq8b.png\" rel=\"nofollow noreferrer\">suffix code snippets</a></p>\n<p>After I type a variable name and type <code>.sysout</code>, <code>.cast</code> and so on, the snippet suggestion pop out. When inserting, it leads to:</p>\n<p>res.sysout =&gt; <code>System.out.println(res);</code></p>\n<p>res.cast =&gt; <code>(()(res))</code></p>\n<p>...</p>\n<p>I'm curious about how to realize this feature in my VS Code. By the time, I didn't find anything useful at <a href=\"https://github.com/redhat-developer/vscode-java\" rel=\"nofollow noreferrer\">redhat-developer/vscode-java</a>.</p>\n<p>Then I want to transplant the snippet to support JS/TS, and other languages.</p>\n<p>I detailedly read <a href=\"https://code.visualstudio.com/docs/editor/userdefinedsnippets\" rel=\"nofollow noreferrer\">VS Code's doc about snippets</a>, find something that might be useful:</p>\n<blockquote>\n<p>The following variables can be used:</p>\n<ul>\n<li><code>TM_SELECTED_TEXT</code> The currently selected text or the empty string</li>\n<li><code>TM_CURRENT_LINE</code> The contents of the current line</li>\n<li>...</li>\n</ul>\n</blockquote>\n<p>However, when I try to create the snippet, I don't know how to replace the variable name. In other words, I can get the variable name by <code>TM_CURRENT_LINE</code>, insert a snippet, but the previous variable name remains. For instance,</p>\n<p>res.log =&gt; <code>resconsole.log(res);</code></p>\n"},{"tags":["java","postgresql","spring-data"],"comments":[{"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"score":0,"creation_date":1682307929,"post_id":76088318,"comment_id":134189091,"body_markdown":"i think you should get String parameter instead of int","body":"i think you should get String parameter instead of int"},{"owner":{"account_id":2407473,"reputation":1449,"user_id":2103515,"accept_rate":0,"display_name":"Thang Le"},"score":0,"creation_date":1682476042,"post_id":76088318,"comment_id":134220647,"body_markdown":"using String like: @Param(&quot;timeZoneOffset&quot;) String  timeZoneOffset also not working.","body":"using String like: @Param(&quot;timeZoneOffset&quot;) String  timeZoneOffset also not working."}],"owner":{"account_id":2407473,"reputation":1449,"user_id":2103515,"accept_rate":0,"display_name":"Thang Le"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682305307,"creation_date":1682304949,"question_id":76088318,"body_markdown":"I am using Spring data to query the PostgreSQL DB using @Query and enable nativeQuery = true.\r\n\r\nBelow is full code:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @Query(value = &quot;&quot;&quot; SELECT utb.user_id, (MIN(utb.submitted_date) AT TIME ZONE INTERVAL :timeZoneOffset) AS dateCheck\r\n                                   FROM user_table utb WHERE utb.user_id = :userId &quot;&quot;&quot;, nativeQuery = true)\r\n    public List&lt;TimeLog&gt; findAllByUserWithTimezone(\r\n                @Param(&quot;timeZoneOffset&quot;) int timeZoneOffset,\r\n                @Param(&quot;userId&quot;) String userId)\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nHowever i cannot get expected result when try to assign input param timeZoneOffset to :timeZoneOffset on the @Query. Let say if input param timeZoneOffset = 100, then **what i want to get**:\r\n\r\n&gt; MIN(utb.submitted_date) AT TIME ZONE INTERVAL &#39;100&#39; \r\n\r\n\r\nNote on single quotes &#39;100&#39;. However, **what actual value i got** that is:\r\n\r\n&gt; MIN(utb.submitted_date) AT TIME ZONE INTERVAL 100\r\n\r\n\r\nwhich is no single quotes, causing error in PostgreSQL. \r\n\r\nHow can i pass single quotes to the query ?. Using single quotes directly on query will NOT work:\r\n\r\n&gt; AT TIME ZONE INTERVAL &#39;:timeZoneOffset&#39;\r\n\r\n\r\n\r\n","title":"Spring data passing param into @Query with specific token","body":"<p>I am using Spring data to query the PostgreSQL DB using @Query and enable nativeQuery = true.</p>\n<p>Below is full code:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@Query(value = \"\"\" SELECT utb.user_id, (MIN(utb.submitted_date) AT TIME ZONE INTERVAL :timeZoneOffset) AS dateCheck\n                               FROM user_table utb WHERE utb.user_id = :userId \"\"\", nativeQuery = true)\npublic List&lt;TimeLog&gt; findAllByUserWithTimezone(\n            @Param(\"timeZoneOffset\") int timeZoneOffset,\n            @Param(\"userId\") String userId)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>However i cannot get expected result when try to assign input param timeZoneOffset to :timeZoneOffset on the @Query. Let say if input param timeZoneOffset = 100, then <strong>what i want to get</strong>:</p>\n<blockquote>\n<p>MIN(utb.submitted_date) AT TIME ZONE INTERVAL '100'</p>\n</blockquote>\n<p>Note on single quotes '100'. However, <strong>what actual value i got</strong> that is:</p>\n<blockquote>\n<p>MIN(utb.submitted_date) AT TIME ZONE INTERVAL 100</p>\n</blockquote>\n<p>which is no single quotes, causing error in PostgreSQL.</p>\n<p>How can i pass single quotes to the query ?. Using single quotes directly on query will NOT work:</p>\n<blockquote>\n<p>AT TIME ZONE INTERVAL ':timeZoneOffset'</p>\n</blockquote>\n"},{"tags":["java","algorithm","testng"],"comments":[{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1414234379,"post_id":26561511,"comment_id":41743431,"body_markdown":"You&#39;re using one instance of `GameOfStones` for all the tests, therefore you&#39;re reusing the value of `iterations` from the last test for the current one. Either you&#39;re resetting `iterations` in the `count` method, or you do what @BarrySW19 suggests.","body":"You&#39;re using one instance of <code>GameOfStones</code> for all the tests, therefore you&#39;re reusing the value of <code>iterations</code> from the last test for the current one. Either you&#39;re resetting <code>iterations</code> in the <code>count</code> method, or you do what @BarrySW19 suggests."}],"answers":[{"tags":[],"owner":{"account_id":5179087,"reputation":3759,"user_id":4145291,"accept_rate":40,"display_name":"BarrySW19"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1414235462,"creation_date":1414234038,"answer_id":26561548,"question_id":26561511,"body_markdown":"You are sharing a single instance of the class under test across all tests. I&#39;d remove the initial assignment and add this:\r\n\r\n    private GameOfStones gameOfStones; // Don&#39;t create an instance here\r\n\r\n    @BeforeMethod\r\n    public void setUp() {\r\n        gameOfStones = new GameOfStones();\r\n    }\r\n\r\n... which will use a new instance for each test. Good practice would also be to clean up after each test:\r\n\r\n    @AfterMethod\r\n    public void tearDown() {\r\n        gameOfStones = null;\r\n    }\r\n\r\nIn the example given here, fixing the class scoped variable causing the problem to be method scoped instead would also fix the issue, but as the software under test gets more complex it&#39;s good to start doing proper test set up and tear down.\r\n","title":"Tests pass when run individually but not when the whole test class run","body":"<p>You are sharing a single instance of the class under test across all tests. I'd remove the initial assignment and add this:</p>\n\n<pre><code>private GameOfStones gameOfStones; // Don't create an instance here\n\n@BeforeMethod\npublic void setUp() {\n    gameOfStones = new GameOfStones();\n}\n</code></pre>\n\n<p>... which will use a new instance for each test. Good practice would also be to clean up after each test:</p>\n\n<pre><code>@AfterMethod\npublic void tearDown() {\n    gameOfStones = null;\n}\n</code></pre>\n\n<p>In the example given here, fixing the class scoped variable causing the problem to be method scoped instead would also fix the issue, but as the software under test gets more complex it's good to start doing proper test set up and tear down.</p>\n"},{"tags":[],"owner":{"account_id":5150839,"reputation":5,"user_id":4125494,"display_name":"sujata swamy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561399370,"creation_date":1552487217,"answer_id":55144262,"question_id":26561511,"body_markdown":"Since I am opening the same activity under test in many test cases executed one after another and same IntentsTestRule class activity\r\n\r\nI could resolve the issue in my case by calling finishActivity on activityTestRule class and intentTestRule class\r\n\r\neg:\r\n\r\n    @After\r\n    fun method() {\r\n    \r\n    mainActivityTestRule.finishActivity()\r\n    \r\n    mIntentsRule.finishActivity()\r\n    \r\n    }","title":"Tests pass when run individually but not when the whole test class run","body":"<p>Since I am opening the same activity under test in many test cases executed one after another and same IntentsTestRule class activity</p>\n\n<p>I could resolve the issue in my case by calling finishActivity on activityTestRule class and intentTestRule class</p>\n\n<p>eg:</p>\n\n<pre><code>@After\nfun method() {\n\nmainActivityTestRule.finishActivity()\n\nmIntentsRule.finishActivity()\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4387361,"reputation":347,"user_id":3577053,"display_name":"user07"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1559071598,"creation_date":1559071273,"answer_id":56348811,"question_id":26561511,"body_markdown":"I had same issue. I needed to mock a logger, which was a static field. So eventually class loader creates only a single instance of the static field during the first invocation of a class under the test and disregards all further mocking and stubbing. When run separately, test was green, because the logger was initialized and loaded as expected, but when run all together, with other test methods, it got initialized as a concrete object, not a mock. Workaround:\r\n\r\n- create `@BeforeClass` method to ensure that the right instance of static field will be created in the first place:\r\n```java\r\n    @BeforeClass\r\n    public static void setupBeforeClass() {\r\n      PowerMockito.mockStatic(LoggerFactory.class);\r\n      loggerMock = mock(Logger.class);\r\n      when(LoggerFactory.getLogger(any(Class.class))).thenReturn(loggerMock);\r\n   }\r\n```\r\n\r\n- Interactions on the mock are getting accumulated from different test executions. Therefore, to be sure that you get a clean instance of the mock on each test method execution, reset the mock whether in `@Before` or `@After` method:\r\n\r\n```java\r\n      @Before\r\n      public void setup() {\r\n        \r\n        // Reset interactions on the mocked logger\r\n        Mockito.reset(loggerMock);\r\n        \r\n      }\r\n```\r\n\r\nNote, that in my example I used PowerMock so you need a corresponding runner `@RunWith(PowerMockRunner.class)` and `@PrepareForTest({LoggerFactory.class, MyClass.class)}` statements.","title":"Tests pass when run individually but not when the whole test class run","body":"<p>I had same issue. I needed to mock a logger, which was a static field. So eventually class loader creates only a single instance of the static field during the first invocation of a class under the test and disregards all further mocking and stubbing. When run separately, test was green, because the logger was initialized and loaded as expected, but when run all together, with other test methods, it got initialized as a concrete object, not a mock. Workaround:</p>\n\n<ul>\n<li>create <code>@BeforeClass</code> method to ensure that the right instance of static field will be created in the first place:</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @BeforeClass\n    public static void setupBeforeClass() {\n      PowerMockito.mockStatic(LoggerFactory.class);\n      loggerMock = mock(Logger.class);\n      when(LoggerFactory.getLogger(any(Class.class))).thenReturn(loggerMock);\n   }\n</code></pre>\n\n<ul>\n<li>Interactions on the mock are getting accumulated from different test executions. Therefore, to be sure that you get a clean instance of the mock on each test method execution, reset the mock whether in <code>@Before</code> or <code>@After</code> method:</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>      @Before\n      public void setup() {\n\n        // Reset interactions on the mocked logger\n        Mockito.reset(loggerMock);\n\n      }\n</code></pre>\n\n<p>Note, that in my example I used PowerMock so you need a corresponding runner <code>@RunWith(PowerMockRunner.class)</code> and <code>@PrepareForTest({LoggerFactory.class, MyClass.class)}</code> statements.</p>\n"},{"tags":[],"owner":{"account_id":7278875,"reputation":2373,"user_id":5549301,"accept_rate":38,"display_name":"Udara Seneviratne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570004334,"creation_date":1570004334,"answer_id":58197724,"question_id":26561511,"body_markdown":"I would like to add my experience regarding this issue.\r\n\r\nAfter doing many debuggins I could confirm that there is no garbage data in the DB and also no static variables effects to the functionality.\r\n\r\nAnd also the same unit tests, pass individually and all at once as expected in another environment.\r\n\r\nJava versions, MySQL versions are the same in both environments. The only difference was the maven version. So, I configured the same maven version which was used in the successful environment.\r\n\r\nThen after issue solved.","title":"Tests pass when run individually but not when the whole test class run","body":"<p>I would like to add my experience regarding this issue.</p>\n\n<p>After doing many debuggins I could confirm that there is no garbage data in the DB and also no static variables effects to the functionality.</p>\n\n<p>And also the same unit tests, pass individually and all at once as expected in another environment.</p>\n\n<p>Java versions, MySQL versions are the same in both environments. The only difference was the maven version. So, I configured the same maven version which was used in the successful environment.</p>\n\n<p>Then after issue solved.</p>\n"},{"tags":[],"owner":{"account_id":8366132,"reputation":35,"user_id":7655968,"display_name":"CoderTest"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578600119,"creation_date":1578600119,"answer_id":59671317,"question_id":26561511,"body_markdown":"You can also try @BeforeEach for Junit5\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n      // Some code here\r\n    }","title":"Tests pass when run individually but not when the whole test class run","body":"<p>You can also try @BeforeEach for Junit5</p>\n\n<pre><code>@BeforeEach\npublic void setup() {\n  // Some code here\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10766358,"reputation":1,"user_id":7921220,"display_name":"Lucero Ram&#237;rez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682303200,"creation_date":1682303200,"answer_id":76088233,"question_id":26561511,"body_markdown":"Late on this but had the same behavior, it could be the versions like it was stated by Udara\r\n\r\nFor me intellij ran without issue but pipeline failed, ended up being that at least on my local the tests were being &quot;cleaned up&quot; but pipeline doesn&#39;t so mocks for a class where affecting another un-related tests.\r\n\r\nI used [this other post][1] to clean them, not sure if is the best solution but it works\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1612569/how-do-i-undo-meta-class-changes-after-executing-groovyshell","title":"Tests pass when run individually but not when the whole test class run","body":"<p>Late on this but had the same behavior, it could be the versions like it was stated by Udara</p>\n<p>For me intellij ran without issue but pipeline failed, ended up being that at least on my local the tests were being &quot;cleaned up&quot; but pipeline doesn't so mocks for a class where affecting another un-related tests.</p>\n<p>I used <a href=\"https://stackoverflow.com/questions/1612569/how-do-i-undo-meta-class-changes-after-executing-groovyshell\">this other post</a> to clean them, not sure if is the best solution but it works</p>\n"}],"owner":{"account_id":2728511,"reputation":536,"user_id":2352866,"accept_rate":80,"display_name":"Orestis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55092,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":26561548,"answer_count":6,"score":26,"last_activity_date":1682303200,"creation_date":1414233779,"question_id":26561511,"body_markdown":"I have solved a topCoder problem for which all the tests pass when I run them on their own. Nonetheless when I run the whole test class some of them fail. Could you, please, help me identify the reason for this behaviour? Here is my class and my tests:\r\n\r\n     package com.topcoder.div2.stage1;\r\n    \r\n    import java.util.Arrays;\r\n    \r\n    public class GameOfStones {\r\n        private int iterations = 0;\r\n        public int count(int[] stones){\r\n            int result = checkEquality(stones);\r\n            return result;\r\n        }\r\n    \r\n        private int checkEquality(int[] stones){\r\n            int count = 0;\r\n            int sum = 0;\r\n            for(int k = 0; k&lt; stones.length;k++){\r\n                sum += stones[k];\r\n            }\r\n            if(stones.length &gt; 0) {\r\n                for (int i = 0; i &lt; sum; i++) {\r\n                    Arrays.sort(stones);\r\n                    if(stones[stones.length-1] != 3) {\r\n                        int j = 0;\r\n                        while (j &lt; stones.length - 1) {\r\n                            if (stones[j] == stones[j + 1]) {\r\n                                count++;\r\n                            }\r\n                            j++;\r\n                        }\r\n                        if (count == stones.length - 1) {\r\n                            return iterations;\r\n                        }\r\n                        stones[0] = stones[0] + 2;\r\n                        stones[stones.length - 1] = stones[stones.length - 1] - 2;\r\n                        iterations++;\r\n                        count = 0;\r\n                    }\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\n\r\nTest:\r\n\r\n    package com.topcoder.div2.stage1;\r\n    \r\n    import org.testng.annotations.Test;\r\n    \r\n    import static org.testng.Assert.assertEquals;\r\n    \r\n    public class GameOfStonesTest {\r\n        private GameOfStones gameOfStones = new GameOfStones();\r\n    \r\n        @Test\r\n        public void test1() {\r\n            int expected = 0;\r\n            int[] given = {17};\r\n    \r\n            int actual = gameOfStones.count(given);\r\n    \r\n            assertEquals(expected, actual);\r\n        }\r\n    \r\n        @Test\r\n        public void test2() {\r\n            int expected = 3;\r\n            int[] given ={7, 15, 9, 5};\r\n    \r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test3() {\r\n            int expected = -1;\r\n            int[] given ={2, 8, 4};\r\n    \r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test4() {\r\n            int expected = -1;\r\n            int[] given ={10, 15, 20, 12, 1, 20};\r\n    \r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test5(){\r\n            int expected = 277;\r\n            int[] given ={17, 1, 27, 29, 13, 1, 27, 3, 19, 3, 25, 1, 11, 9, 7, 17, 31, 25, 5, 11, 31, 9,\r\n                    15, 3, 3, 3, 11, 11, 1, 41, 5, 95, 7, 3, 41, 31, 7, 13, 15, 5, 17, 3, 9, 3, 11,\r\n                    27, 1, 23, 15, 5, 43, 11, 17, 7, 1, 3, 13, 69, 3, 43, 21, 1, 25, 1, 3, 11, 5, 43,\r\n                    13, 7, 15, 1, 1, 55, 37, 9, 5, 7, 21, 3, 23, 15, 1, 9, 3, 35, 13, 17, 7, 17, 27, 5,\r\n                    9, 19, 13, 1, 1, 1, 29};\r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n         public void test6(){\r\n            int expected = 539;\r\n            int[] given ={1, 29, 11, 35, 57, 15, 85, 19, 5, 47, 53, 5, 63, 19, 13, 63, 27, 43, 53, 75, 67, 93, 33, 31, 47, 3,\r\n                    63, 17, 11, 53, 35, 23, 17, 45, 31, 19, 63, 75, 5, 3, 49, 19, 11, 89, 21, 69,\r\n                    71, 5, 45, 81, 31, 13, 11, 19, 7, 99, 33, 63, 19, 57, 73, 29, 35, 9, 47,\r\n                    1, 17, 7, 13, 31, 5, 85, 95, 23, 45, 65, 63, 41, 81, 33, 45, 1, 15,\r\n                    45, 19, 87, 51, 7, 13, 39, 1, 59, 29, 35, 1, 43};\r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test7() {\r\n            int expected = 0;\r\n            int[] given ={100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\r\n                    100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\r\n                    100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\r\n                    100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\r\n                    100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\r\n                    100, 100};\r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test8() {\r\n            int expected = 11;\r\n            int[] given ={3, 5, 21, 31};\r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test9() {\r\n            int expected = 13;\r\n            int[] given ={44, 6, 46};\r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n    }\r\n\r\nP.S if you know any suggestions of improving the solution you are more than welcome to include them in your answer.\r\n\r\n\r\n","title":"Tests pass when run individually but not when the whole test class run","body":"<p>I have solved a topCoder problem for which all the tests pass when I run them on their own. Nonetheless when I run the whole test class some of them fail. Could you, please, help me identify the reason for this behaviour? Here is my class and my tests:</p>\n\n<pre><code> package com.topcoder.div2.stage1;\n\nimport java.util.Arrays;\n\npublic class GameOfStones {\n    private int iterations = 0;\n    public int count(int[] stones){\n        int result = checkEquality(stones);\n        return result;\n    }\n\n    private int checkEquality(int[] stones){\n        int count = 0;\n        int sum = 0;\n        for(int k = 0; k&lt; stones.length;k++){\n            sum += stones[k];\n        }\n        if(stones.length &gt; 0) {\n            for (int i = 0; i &lt; sum; i++) {\n                Arrays.sort(stones);\n                if(stones[stones.length-1] != 3) {\n                    int j = 0;\n                    while (j &lt; stones.length - 1) {\n                        if (stones[j] == stones[j + 1]) {\n                            count++;\n                        }\n                        j++;\n                    }\n                    if (count == stones.length - 1) {\n                        return iterations;\n                    }\n                    stones[0] = stones[0] + 2;\n                    stones[stones.length - 1] = stones[stones.length - 1] - 2;\n                    iterations++;\n                    count = 0;\n                }\n            }\n        }\n        return -1;\n    }\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>package com.topcoder.div2.stage1;\n\nimport org.testng.annotations.Test;\n\nimport static org.testng.Assert.assertEquals;\n\npublic class GameOfStonesTest {\n    private GameOfStones gameOfStones = new GameOfStones();\n\n    @Test\n    public void test1() {\n        int expected = 0;\n        int[] given = {17};\n\n        int actual = gameOfStones.count(given);\n\n        assertEquals(expected, actual);\n    }\n\n    @Test\n    public void test2() {\n        int expected = 3;\n        int[] given ={7, 15, 9, 5};\n\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test3() {\n        int expected = -1;\n        int[] given ={2, 8, 4};\n\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test4() {\n        int expected = -1;\n        int[] given ={10, 15, 20, 12, 1, 20};\n\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test5(){\n        int expected = 277;\n        int[] given ={17, 1, 27, 29, 13, 1, 27, 3, 19, 3, 25, 1, 11, 9, 7, 17, 31, 25, 5, 11, 31, 9,\n                15, 3, 3, 3, 11, 11, 1, 41, 5, 95, 7, 3, 41, 31, 7, 13, 15, 5, 17, 3, 9, 3, 11,\n                27, 1, 23, 15, 5, 43, 11, 17, 7, 1, 3, 13, 69, 3, 43, 21, 1, 25, 1, 3, 11, 5, 43,\n                13, 7, 15, 1, 1, 55, 37, 9, 5, 7, 21, 3, 23, 15, 1, 9, 3, 35, 13, 17, 7, 17, 27, 5,\n                9, 19, 13, 1, 1, 1, 29};\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n     public void test6(){\n        int expected = 539;\n        int[] given ={1, 29, 11, 35, 57, 15, 85, 19, 5, 47, 53, 5, 63, 19, 13, 63, 27, 43, 53, 75, 67, 93, 33, 31, 47, 3,\n                63, 17, 11, 53, 35, 23, 17, 45, 31, 19, 63, 75, 5, 3, 49, 19, 11, 89, 21, 69,\n                71, 5, 45, 81, 31, 13, 11, 19, 7, 99, 33, 63, 19, 57, 73, 29, 35, 9, 47,\n                1, 17, 7, 13, 31, 5, 85, 95, 23, 45, 65, 63, 41, 81, 33, 45, 1, 15,\n                45, 19, 87, 51, 7, 13, 39, 1, 59, 29, 35, 1, 43};\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test7() {\n        int expected = 0;\n        int[] given ={100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\n                100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\n                100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\n                100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\n                100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\n                100, 100};\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test8() {\n        int expected = 11;\n        int[] given ={3, 5, 21, 31};\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test9() {\n        int expected = 13;\n        int[] given ={44, 6, 46};\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n}\n</code></pre>\n\n<p>P.S if you know any suggestions of improving the solution you are more than welcome to include them in your answer.</p>\n"},{"tags":["java","scala","gradle","sbt"],"comments":[{"owner":{"account_id":6085642,"reputation":568,"user_id":5122436,"display_name":"Mikhail Ionkin"},"score":1,"creation_date":1678054002,"post_id":75642638,"comment_id":133454239,"body_markdown":"Is it work for you with java 8? I mean, if you will have worked solution, it will be easy to migrate to new java. Why not you use SBT (1.6.0+ version)? If you use sbt, can you provide minimum reproducible example?","body":"Is it work for you with java 8? I mean, if you will have worked solution, it will be easy to migrate to new java. Why not you use SBT (1.6.0+ version)? If you use sbt, can you provide minimum reproducible example?"},{"owner":{"account_id":3073732,"reputation":986,"user_id":2992404,"accept_rate":67,"display_name":"Jewels"},"score":0,"creation_date":1678098018,"post_id":75642638,"comment_id":133461025,"body_markdown":"it works fine with java 8 and java 11, only java 17 is giving me trouble.","body":"it works fine with java 8 and java 11, only java 17 is giving me trouble."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1682504689,"post_id":75642638,"comment_id":134225518,"body_markdown":"@Jewels Do you have any updates? Do you have reproduction?","body":"@Jewels Do you have any updates? Do you have reproduction?"}],"answers":[{"tags":[],"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682302181,"creation_date":1681783913,"answer_id":76040578,"question_id":75642638,"body_markdown":"Please double check that you&#39;re using Scala 2.12.15+, the latest is 2.12.17.\r\n\r\n`packages cannot be represented as URI` was a bug in Scala compiler and Gradle Scala plugin uses Scala compiler (sbt zinc compiler)\r\n\r\nhttps://github.com/scala/bug/issues/11794 *Scala 2.13.0 OpenJdk 13: REPL crashes with RuntimeException: /packages cannot be represented as URI* \r\n\r\nhttps://github.com/scala/bug/issues/11762 *Failed to run scala on Eclipse OpenJ9 VM, Java 13* \r\n\r\nhttps://github.com/scala/bug/issues/11608 *Compiler crashes when using macros in Scala 2.12 with JDK 13* \r\n\r\nhttps://github.com/scala/bug/issues/11381#issuecomment-539727339 *GlobalSymbolLoaders#lookupMemberAtTyperPhaseIfPossible throw NullPointerException with JDK12* \r\n\r\nhttps://docs.scala-lang.org/overviews/jdk-compatibility/overview.html\r\n\r\n**Version compatibility table**\r\n\r\n| JDK version | Minimum Scala versions |\r\n| -------- | -------------- |\r\n| 20    | 3.3.0 (soon), 2.13.11 (soon), 2.12.18 (soon)            |\r\n| 19   | 3.2.0, 2.13.9, 2.12.16            |\r\n| 18   | 3.1.3, 2.13.7, 2.12.15            |\r\n| **17** (LTS)   | 3.0.0, 2.13.6, **2.12.15**            |\r\n| 11 (LTS)   | 3.0.0, 2.13.0, 2.12.4, 2.11.12            |\r\n| 8 (LTS)   | 3.0.0, 2.13.0, 2.12.0, 2.11.0            |\r\n\r\nZinc 1.8.0 uses Scala 2.12.17.\r\n\r\nhttps://github.com/sbt/zinc/blob/v1.8.0/project/Dependencies.scala#L10\r\n\r\n```\r\nval scala210 = &quot;2.10.7&quot;\r\nval scala211 = &quot;2.11.12&quot;\r\nval scala212 = &quot;2.12.17&quot;\r\nval scala213 = &quot;2.13.8&quot;\r\n```\r\nThe issue *Update Zinc used by Scala plugin to 1.7.1* https://github.com/gradle/gradle/issues/21392 is still open, the pull request *Update Zinc used by Scala plugin to 1.7.1* https://github.com/gradle/gradle/pull/21393 was closed without merging. So Gradle 8.1.0 seems to be still on `zinc_2.13:1.6.1` \r\n\r\nhttps://github.com/gradle/gradle/blob/v8.1.0/subprojects/scala/build.gradle.kts#L32\r\n\r\n```\r\ncompileOnly(&quot;org.scala-sbt:zinc_2.13:1.6.1&quot;) {\r\n  ...\r\n```\r\n\r\nAnd zinc 1.6.1 is on Scala 2.13.6 \r\n\r\nhttps://github.com/sbt/zinc/blob/v1.6.1/project/Dependencies.scala#L11 \r\n\r\n```\r\nval scala210 = &quot;2.10.7&quot;\r\nval scala211 = &quot;2.11.12&quot;\r\nval scala212 = &quot;2.12.15&quot;\r\nval scala213 = &quot;2.13.6&quot;\r\n```\r\n\r\nwhere `packages cannot be represented as URI` was supposed to be fixed.\r\n\r\nhttps://docs.gradle.org/current/userguide/scala_plugin.html#sec:configure_zinc_compiler \r\n\r\n**Zinc compatibility table** \r\n\r\n| Gradle version | Supported Zinc versions | Zinc coordinates | Required Scala version | Supported Scala compilation version |\r\n| -------- | -------- | -------- | -------- | -------- |\r\n| 7.5 and newer | [SBT Zinc.](https://github.com/sbt/zinc) Versions 1.6.0 and above. | org.scala-sbt:zinc_2.13 | Scala 2.13.x is required for *running* Zinc. | Scala 2.10.x through 3.x can be compiled. |\r\n| ... |  |  |  |  |\r\n\r\nScala 2.12.15+, 2.13.6+ are considered to be compatible with Java 17. So if there are still incompatibilities maybe you should open an issue at https://github.com/gradle/gradle/issues, https://github.com/sbt/zinc/issues or https://github.com/scala/bug/\r\n\r\n---\r\n\r\nActually, I can&#39;t reproduce `packages cannot be represented as URI` with Gradle 8.1, Scala 2.12.17, zinc 1.8.0, Java eclipse_adoptium-17-amd64-linux/jdk-17.0.7+7\r\n\r\nhttps://github.com/DmytroMitin/gradledemo\r\n\r\n*settings.gradle.kts*\r\n\r\n```kotlin\r\nplugins {\r\n    id(&quot;org.gradle.toolchains.foojay-resolver-convention&quot;) version &quot;0.4.0&quot;\r\n}\r\n\r\nrootProject.name = &quot;gradledemo&quot;\r\ninclude(&quot;app&quot;)\r\n```\r\n\r\n*app/build.gradle.kts*\r\n\r\n```kotlin\r\nplugins {\r\n    scala\r\n\r\n    application\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation(&quot;org.scala-lang:scala-library:2.12.17&quot;)\r\n\r\n    implementation(&quot;com.chuusai:shapeless_2.12:2.3.10&quot;)\r\n}\r\n\r\njava {\r\n    toolchain {\r\n        languageVersion.set(JavaLanguageVersion.of(17))\r\n    }\r\n}\r\n\r\nscala {\r\n    zincVersion.set(&quot;1.8.0&quot;)\r\n}\r\n\r\n// see (*)\r\n// Without -target or -release: Task :app:compileScala FAILED: jvm-1.17 is not a valid choice for -target, bad option: -target:jvm-1.17\r\n// With -target: [Warn] : -target is deprecated: Scala 2.12 cannot emit valid class files for targets newer than 8 (this is possible with Scala 2.13). Use -release to compile against a specific platform API version.\r\ntasks.withType&lt;ScalaCompile&gt;() {\r\n    targetCompatibility = &quot;&quot;\r\n    scalaCompileOptions.additionalParameters = listOf(&quot;-release:17&quot;)\r\n}\r\n\r\napplication {\r\n    mainClass.set(&quot;gradledemo.App&quot;)\r\n}\r\n```\r\n*app/src/main/scala/gradledemo/App.scala*\r\n```scala\r\npackage gradledemo\r\n\r\nimport shapeless._\r\n\r\nobject App {\r\n  def main(args: Array[String]): Unit = {\r\n    println(1 :: &quot;a&quot; :: true :: HNil)\r\n  }\r\n}\r\n```\r\n```\r\n$ gradle clean\r\n\r\nBUILD SUCCESSFUL in 533ms\r\n1 actionable task: 1 executed\r\n\r\n$ gradle run\r\n\r\n&gt; Task :app:run\r\n1 :: a :: true :: HNil\r\n\r\nBUILD SUCCESSFUL in 4s\r\n2 actionable tasks: 2 executed\r\n```\r\n\r\nHow to reproduce `packages cannot be represented as URI`? Please prepare reproduction.\r\n\r\n(*) https://stackoverflow.com/questions/54878493/scala-build-error-on-java-11-using-intellijidea","title":"Compiling Scala 2.12.16 with Gradle and Java 17 getting java.io.IOError: java.lang.RuntimeException: /packages cannot be represented as URI","body":"<p>Please double check that you're using Scala 2.12.15+, the latest is 2.12.17.</p>\n<p><code>packages cannot be represented as URI</code> was a bug in Scala compiler and Gradle Scala plugin uses Scala compiler (sbt zinc compiler)</p>\n<p><a href=\"https://github.com/scala/bug/issues/11794\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11794</a> <em>Scala 2.13.0 OpenJdk 13: REPL crashes with RuntimeException: /packages cannot be represented as URI</em></p>\n<p><a href=\"https://github.com/scala/bug/issues/11762\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11762</a> <em>Failed to run scala on Eclipse OpenJ9 VM, Java 13</em></p>\n<p><a href=\"https://github.com/scala/bug/issues/11608\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11608</a> <em>Compiler crashes when using macros in Scala 2.12 with JDK 13</em></p>\n<p><a href=\"https://github.com/scala/bug/issues/11381#issuecomment-539727339\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11381#issuecomment-539727339</a> <em>GlobalSymbolLoaders#lookupMemberAtTyperPhaseIfPossible throw NullPointerException with JDK12</em></p>\n<p><a href=\"https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html\" rel=\"nofollow noreferrer\">https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html</a></p>\n<p><strong>Version compatibility table</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>JDK version</th>\n<th>Minimum Scala versions</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>20</td>\n<td>3.3.0 (soon), 2.13.11 (soon), 2.12.18 (soon)</td>\n</tr>\n<tr>\n<td>19</td>\n<td>3.2.0, 2.13.9, 2.12.16</td>\n</tr>\n<tr>\n<td>18</td>\n<td>3.1.3, 2.13.7, 2.12.15</td>\n</tr>\n<tr>\n<td><strong>17</strong> (LTS)</td>\n<td>3.0.0, 2.13.6, <strong>2.12.15</strong></td>\n</tr>\n<tr>\n<td>11 (LTS)</td>\n<td>3.0.0, 2.13.0, 2.12.4, 2.11.12</td>\n</tr>\n<tr>\n<td>8 (LTS)</td>\n<td>3.0.0, 2.13.0, 2.12.0, 2.11.0</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Zinc 1.8.0 uses Scala 2.12.17.</p>\n<p><a href=\"https://github.com/sbt/zinc/blob/v1.8.0/project/Dependencies.scala#L10\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/blob/v1.8.0/project/Dependencies.scala#L10</a></p>\n<pre><code>val scala210 = &quot;2.10.7&quot;\nval scala211 = &quot;2.11.12&quot;\nval scala212 = &quot;2.12.17&quot;\nval scala213 = &quot;2.13.8&quot;\n</code></pre>\n<p>The issue <em>Update Zinc used by Scala plugin to 1.7.1</em> <a href=\"https://github.com/gradle/gradle/issues/21392\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/issues/21392</a> is still open, the pull request <em>Update Zinc used by Scala plugin to 1.7.1</em> <a href=\"https://github.com/gradle/gradle/pull/21393\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/pull/21393</a> was closed without merging. So Gradle 8.1.0 seems to be still on <code>zinc_2.13:1.6.1</code></p>\n<p><a href=\"https://github.com/gradle/gradle/blob/v8.1.0/subprojects/scala/build.gradle.kts#L32\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/blob/v8.1.0/subprojects/scala/build.gradle.kts#L32</a></p>\n<pre><code>compileOnly(&quot;org.scala-sbt:zinc_2.13:1.6.1&quot;) {\n  ...\n</code></pre>\n<p>And zinc 1.6.1 is on Scala 2.13.6</p>\n<p><a href=\"https://github.com/sbt/zinc/blob/v1.6.1/project/Dependencies.scala#L11\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/blob/v1.6.1/project/Dependencies.scala#L11</a></p>\n<pre><code>val scala210 = &quot;2.10.7&quot;\nval scala211 = &quot;2.11.12&quot;\nval scala212 = &quot;2.12.15&quot;\nval scala213 = &quot;2.13.6&quot;\n</code></pre>\n<p>where <code>packages cannot be represented as URI</code> was supposed to be fixed.</p>\n<p><a href=\"https://docs.gradle.org/current/userguide/scala_plugin.html#sec:configure_zinc_compiler\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/scala_plugin.html#sec:configure_zinc_compiler</a></p>\n<p><strong>Zinc compatibility table</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Gradle version</th>\n<th>Supported Zinc versions</th>\n<th>Zinc coordinates</th>\n<th>Required Scala version</th>\n<th>Supported Scala compilation version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>7.5 and newer</td>\n<td><a href=\"https://github.com/sbt/zinc\" rel=\"nofollow noreferrer\">SBT Zinc.</a> Versions 1.6.0 and above.</td>\n<td>org.scala-sbt:zinc_2.13</td>\n<td>Scala 2.13.x is required for <em>running</em> Zinc.</td>\n<td>Scala 2.10.x through 3.x can be compiled.</td>\n</tr>\n<tr>\n<td>...</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Scala 2.12.15+, 2.13.6+ are considered to be compatible with Java 17. So if there are still incompatibilities maybe you should open an issue at <a href=\"https://github.com/gradle/gradle/issues\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/issues</a>, <a href=\"https://github.com/sbt/zinc/issues\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/issues</a> or <a href=\"https://github.com/scala/bug/\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/</a></p>\n<hr />\n<p>Actually, I can't reproduce <code>packages cannot be represented as URI</code> with Gradle 8.1, Scala 2.12.17, zinc 1.8.0, Java eclipse_adoptium-17-amd64-linux/jdk-17.0.7+7</p>\n<p><a href=\"https://github.com/DmytroMitin/gradledemo\" rel=\"nofollow noreferrer\">https://github.com/DmytroMitin/gradledemo</a></p>\n<p><em>settings.gradle.kts</em></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    id(&quot;org.gradle.toolchains.foojay-resolver-convention&quot;) version &quot;0.4.0&quot;\n}\n\nrootProject.name = &quot;gradledemo&quot;\ninclude(&quot;app&quot;)\n</code></pre>\n<p><em>app/build.gradle.kts</em></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    scala\n\n    application\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation(&quot;org.scala-lang:scala-library:2.12.17&quot;)\n\n    implementation(&quot;com.chuusai:shapeless_2.12:2.3.10&quot;)\n}\n\njava {\n    toolchain {\n        languageVersion.set(JavaLanguageVersion.of(17))\n    }\n}\n\nscala {\n    zincVersion.set(&quot;1.8.0&quot;)\n}\n\n// see (*)\n// Without -target or -release: Task :app:compileScala FAILED: jvm-1.17 is not a valid choice for -target, bad option: -target:jvm-1.17\n// With -target: [Warn] : -target is deprecated: Scala 2.12 cannot emit valid class files for targets newer than 8 (this is possible with Scala 2.13). Use -release to compile against a specific platform API version.\ntasks.withType&lt;ScalaCompile&gt;() {\n    targetCompatibility = &quot;&quot;\n    scalaCompileOptions.additionalParameters = listOf(&quot;-release:17&quot;)\n}\n\napplication {\n    mainClass.set(&quot;gradledemo.App&quot;)\n}\n</code></pre>\n<p><em>app/src/main/scala/gradledemo/App.scala</em></p>\n<pre class=\"lang-scala prettyprint-override\"><code>package gradledemo\n\nimport shapeless._\n\nobject App {\n  def main(args: Array[String]): Unit = {\n    println(1 :: &quot;a&quot; :: true :: HNil)\n  }\n}\n</code></pre>\n<pre><code>$ gradle clean\n\nBUILD SUCCESSFUL in 533ms\n1 actionable task: 1 executed\n\n$ gradle run\n\n&gt; Task :app:run\n1 :: a :: true :: HNil\n\nBUILD SUCCESSFUL in 4s\n2 actionable tasks: 2 executed\n</code></pre>\n<p>How to reproduce <code>packages cannot be represented as URI</code>? Please prepare reproduction.</p>\n<p>(*) <a href=\"https://stackoverflow.com/questions/54878493/scala-build-error-on-java-11-using-intellijidea\">Scala build error on Java 11 using intellijidea</a></p>\n"}],"owner":{"account_id":3073732,"reputation":986,"user_id":2992404,"accept_rate":67,"display_name":"Jewels"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":793,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1682302181,"creation_date":1678023730,"question_id":75642638,"body_markdown":"I have a scala project that is stuck on version 2.12. I am trying to upgrade the Java version to 17, but am getting the infamous `java.io.IOError: java.lang.RuntimeException: /packages cannot be represented as URI` error. I have looked [here][1] and [here][2] and [here][3] and [here][4] (all SO Q&amp;A&#39;s) but all to no avail. The common advice between all those answers is either to use Java 8 (not what I want), to upgrade Scala to the latest patch version (already did that) or to upgrade SBT. Regarding the last point, I added the following snippet to my `build.gradle.kts` file but am still getting the error:\r\n```\r\nscala {\r\n    zincVersion.set(&quot;1.8.0&quot;)\r\n}\r\n```\r\nAny ideas?\r\n\r\n  [1]: https://stackoverflow.com/questions/60308229/scala-packages-cannot-be-represented-as-uri\r\n  [2]: https://stackoverflow.com/questions/63800811/how-do-i-resolve-the-packages-cannot-be-represented-as-uri-issue\r\n  [3]: https://stackoverflow.com/questions/73428839/packages-cannot-be-represented-as-uri\r\n  [4]: https://stackoverflow.com/questions/66976989/sbt-test-error-java-lang-runtimeexception-packages-cannot-be-represented-as-u","title":"Compiling Scala 2.12.16 with Gradle and Java 17 getting java.io.IOError: java.lang.RuntimeException: /packages cannot be represented as URI","body":"<p>I have a scala project that is stuck on version 2.12. I am trying to upgrade the Java version to 17, but am getting the infamous <code>java.io.IOError: java.lang.RuntimeException: /packages cannot be represented as URI</code> error. I have looked <a href=\"https://stackoverflow.com/questions/60308229/scala-packages-cannot-be-represented-as-uri\">here</a> and <a href=\"https://stackoverflow.com/questions/63800811/how-do-i-resolve-the-packages-cannot-be-represented-as-uri-issue\">here</a> and <a href=\"https://stackoverflow.com/questions/73428839/packages-cannot-be-represented-as-uri\">here</a> and <a href=\"https://stackoverflow.com/questions/66976989/sbt-test-error-java-lang-runtimeexception-packages-cannot-be-represented-as-u\">here</a> (all SO Q&amp;A's) but all to no avail. The common advice between all those answers is either to use Java 8 (not what I want), to upgrade Scala to the latest patch version (already did that) or to upgrade SBT. Regarding the last point, I added the following snippet to my <code>build.gradle.kts</code> file but am still getting the error:</p>\n<pre><code>scala {\n    zincVersion.set(&quot;1.8.0&quot;)\n}\n</code></pre>\n<p>Any ideas?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":8900519,"reputation":503,"user_id":6644123,"display_name":"shanfeng"},"score":0,"creation_date":1682301795,"post_id":76088134,"comment_id":134188639,"body_markdown":"It depends. Usually it is a bad practice to use static class/member in beans.","body":"It depends. Usually it is a bad practice to use static class/member in beans."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1682307108,"post_id":76088134,"comment_id":134189016,"body_markdown":"The assignment to `someConfig` will be made when the class which contains it is loaded. Spring will have no effect on that. Why don&#39;t you use Spring instead of static members?","body":"The assignment to <code>someConfig</code> will be made when the class which contains it is loaded. Spring will have no effect on that. Why don&#39;t you use Spring instead of static members?"}],"owner":{"account_id":15995820,"reputation":23,"user_id":11543765,"display_name":"once"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682301201,"creation_date":1682301201,"question_id":76088134,"body_markdown":"As the title  \r\n```private static int someConfig = Config.getInstance().getSomeConfig(&quot;some&quot;);```  \r\nand the config needs initialized before being used.\r\nCan I use this when the class `@DependsOn` the Config(Config needs initialized before using)","title":"Can I set a static member in a spring bean class which depends on `@DependsOn`?","body":"<p>As the title<br />\n<code>private static int someConfig = Config.getInstance().getSomeConfig(&quot;some&quot;);</code><br />\nand the config needs initialized before being used.\nCan I use this when the class <code>@DependsOn</code> the Config(Config needs initialized before using)</p>\n"},{"tags":["java","objectinputstream","objectoutputstream"],"comments":[{"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1682269088,"post_id":76086094,"comment_id":134184994,"body_markdown":"What do you mean with &quot;treat the two packets as one&quot;? Two objects are two objects, not one ... and why do you think you need to identify &quot;boundaries&quot;? And by the way, using Java Serialization for remote communication may introduce [security vulnerabilities](https://stackoverflow.com/questions/19054460/what-is-the-security-impact-of-deserializing-untrusted-data-in-java).","body":"What do you mean with &quot;treat the two packets as one&quot;? Two objects are two objects, not one ... and why do you think you need to identify &quot;boundaries&quot;? And by the way, using Java Serialization for remote communication may introduce <a href=\"https://stackoverflow.com/questions/19054460/what-is-the-security-impact-of-deserializing-untrusted-data-in-java\">security vulnerabilities</a>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1682270104,"post_id":76086094,"comment_id":134185144,"body_markdown":"@meriton I think the OP has a persistent connection open and needs to treat every two objects as part of a single &quot;message&quot;. Essentially, they&#39;re asking how to write their own application-level communication protocol, specifically how to delimit separate messages.","body":"@meriton I think the OP has a persistent connection open and needs to treat every two objects as part of a single &quot;message&quot;. Essentially, they&#39;re asking how to write their own application-level communication protocol, specifically how to delimit separate messages."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1682270312,"post_id":76086094,"comment_id":134185167,"body_markdown":"@OP If you&#39;re going to use Java serialization, why not just create a class that represents a single message and contains all the data of that message? That way the reader only has to read objects as they come in. The &quot;wrapper&quot; object itself would be the delimiter. But, as pointed out, Java serialization has its issues. Consider using a different format mechanism.","body":"@OP If you&#39;re going to use Java serialization, why not just create a class that represents a single message and contains all the data of that message? That way the reader only has to read objects as they come in. The &quot;wrapper&quot; object itself would be the delimiter. But, as pointed out, Java serialization has its issues. Consider using a different format mechanism."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1682270360,"post_id":76086094,"comment_id":134185170,"body_markdown":"Should also point out that `obj instanceof Object` is always going to be true, as all classes ultimately inherit from `Object`.","body":"Should also point out that <code>obj instanceof Object</code> is always going to be true, as all classes ultimately inherit from <code>Object</code>."},{"owner":{"account_id":23546014,"reputation":35,"user_id":17589476,"display_name":"Mr Right"},"score":0,"creation_date":1682271439,"post_id":76086094,"comment_id":134185302,"body_markdown":"@Slaw, yes, this is an experiment for one of my computer network courses. I need to write a chat program. I defined a `Message` class that contains all types of data, but I am thinking about whether it is necessary to design an application layer protocol to allow the receiver to distinguish the boundaries of the message.","body":"@Slaw, yes, this is an experiment for one of my computer network courses. I need to write a chat program. I defined a <code>Message</code> class that contains all types of data, but I am thinking about whether it is necessary to design an application layer protocol to allow the receiver to distinguish the boundaries of the message."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1682278516,"post_id":76086094,"comment_id":134186358,"body_markdown":"The `ObjectInputStream` class already knows where an object begins and ends. If you write a `Message` to the stream, then when you call `readObject()` you&#39;ll get that `Message` object back.","body":"The <code>ObjectInputStream</code> class already knows where an object begins and ends. If you write a <code>Message</code> to the stream, then when you call <code>readObject()</code> you&#39;ll get that <code>Message</code> object back."}],"answers":[{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682301044,"creation_date":1682301044,"answer_id":76088128,"question_id":76086094,"body_markdown":"&gt; but I am thinking about whether it is necessary to design an application layer protocol to allow the receiver to distinguish the boundaries of the message\r\n\r\nJava Serialization does that for you. If Java Serialization didn&#39;t do this, it would be impossible to read more than one `Object` from a `ObjectInputStream`, since the boundary between the objects would be unspecified. If you&#39;re curious how Java Serialization does this, the [Java Object Serialization Specification](https://docs.oracle.com/en/java/javase/18/docs/specs/serialization/), in particular the [Object Serialization Stream Protocol](https://docs.oracle.com/en/java/javase/18/docs/specs/serialization/protocol.html) section, should prove instructive (very briefly: variable length data is prefixed with its length).\r\n\r\nThat said, using Java Serialization to interpret untrusted data is likely to result in [serious security vulnerabilities](https://stackoverflow.com/questions/19054460/what-is-the-security-impact-of-deserializing-untrusted-data-in-java). Most networked software is better served with more robust serialization formats, such as JSON or XML. There are open source libraries for both of these. \r\n\r\nAlternatively, you could reinvent the wheel by using a naked `DataOutputStream` / `DataInputStream`. For comparatively simple messages, this shouldn&#39;t be too onerous.","title":"How to determine the boundary when reading with ois.readObject()","body":"<blockquote>\n<p>but I am thinking about whether it is necessary to design an application layer protocol to allow the receiver to distinguish the boundaries of the message</p>\n</blockquote>\n<p>Java Serialization does that for you. If Java Serialization didn't do this, it would be impossible to read more than one <code>Object</code> from a <code>ObjectInputStream</code>, since the boundary between the objects would be unspecified. If you're curious how Java Serialization does this, the <a href=\"https://docs.oracle.com/en/java/javase/18/docs/specs/serialization/\" rel=\"nofollow noreferrer\">Java Object Serialization Specification</a>, in particular the <a href=\"https://docs.oracle.com/en/java/javase/18/docs/specs/serialization/protocol.html\" rel=\"nofollow noreferrer\">Object Serialization Stream Protocol</a> section, should prove instructive (very briefly: variable length data is prefixed with its length).</p>\n<p>That said, using Java Serialization to interpret untrusted data is likely to result in <a href=\"https://stackoverflow.com/questions/19054460/what-is-the-security-impact-of-deserializing-untrusted-data-in-java\">serious security vulnerabilities</a>. Most networked software is better served with more robust serialization formats, such as JSON or XML. There are open source libraries for both of these.</p>\n<p>Alternatively, you could reinvent the wheel by using a naked <code>DataOutputStream</code> / <code>DataInputStream</code>. For comparatively simple messages, this shouldn't be too onerous.</p>\n"}],"owner":{"account_id":23546014,"reputation":35,"user_id":17589476,"display_name":"Mr Right"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76088128,"answer_count":1,"score":0,"last_activity_date":1682301044,"creation_date":1682268415,"question_id":76086094,"body_markdown":"If the sender uses `ois.writeObject` to continuously send two objects of the same class to the receiver, and the receiver uses `oos.readObject` to read, is it possible for the receiver to treat the two data packets as one? And when the class to be serialized is very large, how does the receiver know when the reception is complete?\r\n\r\nThere is a way to point out that `Object` can be used as boundary markers, but I don&#39;t know if it is correct\r\n\r\n```\r\n//sender\r\nout.writeObject(obj1);\r\nout.writeObject(new Object()); \r\n\r\n\r\nout.writeObject(obj1);\r\nout.writeObject(new Object()); \r\n\r\n\r\n//receiver\r\nObject obj;\r\nwhile ((obj = in.readObject()) != null) {\r\n    if (obj instanceof Object) {\r\n        // Boundary identification, process the next object\r\n    } else {\r\n        // process the received object\r\n    }\r\n}\r\n```","title":"How to determine the boundary when reading with ois.readObject()","body":"<p>If the sender uses <code>ois.writeObject</code> to continuously send two objects of the same class to the receiver, and the receiver uses <code>oos.readObject</code> to read, is it possible for the receiver to treat the two data packets as one? And when the class to be serialized is very large, how does the receiver know when the reception is complete?</p>\n<p>There is a way to point out that <code>Object</code> can be used as boundary markers, but I don't know if it is correct</p>\n<pre><code>//sender\nout.writeObject(obj1);\nout.writeObject(new Object()); \n\n\nout.writeObject(obj1);\nout.writeObject(new Object()); \n\n\n//receiver\nObject obj;\nwhile ((obj = in.readObject()) != null) {\n    if (obj instanceof Object) {\n        // Boundary identification, process the next object\n    } else {\n        // process the received object\n    }\n}\n</code></pre>\n"},{"tags":["java","pdf","paragraph","openpdf"],"owner":{"account_id":27278550,"reputation":13,"user_id":20798786,"display_name":"Jang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682300105,"creation_date":1682300105,"question_id":76088081,"body_markdown":"When I add a paragraph in the paragraph, some style attributes including alignment are not applied to the paragraph inside.\r\nI need it to use a paragraph with a title and body and use it repeatedly.\r\n(iText5 works well. however openpdf does not work.)\r\n\r\n## OpenPdf Code\r\n\r\n```\r\nParagraph paragraph = new Paragraph();\r\nparagraph.add(&quot;OUTER&quot;);\r\nparagraph.add(Chunk.NEWLINE);\r\nParagraph innerParagraph = new Paragraph();\r\ninnerParagraph.add(&quot;INNER&quot;);\r\ninnerParagraph.setAlignment(Element.ALIGN_RIGHT);\r\nparagraph.add(innerParagraph);\r\n\r\nDocument document = new Document();\r\ndocument.add(paragraph);\r\n```\r\n\r\n## Expect\r\n\r\n```\r\nOUTER\r\n                                    INNER\r\n```\r\n\r\n## Result\r\n\r\n```\r\nOUTER\r\nINNER\r\n```","title":"When using openpdf, can I add a Paragraph in the Paragraph with style attributes?","body":"<p>When I add a paragraph in the paragraph, some style attributes including alignment are not applied to the paragraph inside.\nI need it to use a paragraph with a title and body and use it repeatedly.\n(iText5 works well. however openpdf does not work.)</p>\n<h2>OpenPdf Code</h2>\n<pre><code>Paragraph paragraph = new Paragraph();\nparagraph.add(&quot;OUTER&quot;);\nparagraph.add(Chunk.NEWLINE);\nParagraph innerParagraph = new Paragraph();\ninnerParagraph.add(&quot;INNER&quot;);\ninnerParagraph.setAlignment(Element.ALIGN_RIGHT);\nparagraph.add(innerParagraph);\n\nDocument document = new Document();\ndocument.add(paragraph);\n</code></pre>\n<h2>Expect</h2>\n<pre><code>OUTER\n                                    INNER\n</code></pre>\n<h2>Result</h2>\n<pre><code>OUTER\nINNER\n</code></pre>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"account_id":27436725,"reputation":89,"user_id":20932425,"display_name":"shmily"},"score":1,"creation_date":1682300574,"post_id":76087972,"comment_id":134188537,"body_markdown":"Using your code, I got the following results: `any string with marker 123 here`,\n`any string ${test} with marker 123 here`.","body":"Using your code, I got the following results: <code>any string with marker 123 here</code>, <code>any string ${test} with marker 123 here</code>."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682299331,"creation_date":1682299331,"answer_id":76088039,"question_id":76087972,"body_markdown":"The direct answer is &#39;use `Pattern.QUOTE` - you don&#39;t want `key` to be interpreted as regex-relevant&#39;.\r\n\r\nHowever, that&#39;s still a silly way to go about. Why do you think you need regular expressions here? You.. do not.\r\n\r\nJust use `.replace` (which replaces ALL occurrences; `.replaceAll` interprets the first arg as a regex, and is in contrast to `.replaceFirst` which also interprets the first arg as a regex but only replaces the first occurrence. Yes, these are badly named methods. `replace` replaces all and does not interpret, which is what you want). By avoiding regular expressions, you avoid some exotic Denial of Service attack surface and it&#39;s faster in general, too.\r\n\r\n```\r\nString baseString = &quot;any string with marker {{TEST_MARKER}} here. Just to prove the point, {{TEST_MARKER}} again.&quot;;\r\nString key = &quot;TEST_MARKER&quot;;\r\nString val = &quot;123&quot;;\r\nString pattern = String.format(&quot;\\\\{\\\\{%s\\\\}\\\\}&quot;, key);\r\nString result = baseString.replace(pattern, val);\r\n```\r\n\r\nOr, possibly, look into [mustache](https://www.baeldung.com/mustache) - a library that does this for you.","title":"Regex to replace marker {{MARKER}} in string","body":"<p>The direct answer is 'use <code>Pattern.QUOTE</code> - you don't want <code>key</code> to be interpreted as regex-relevant'.</p>\n<p>However, that's still a silly way to go about. Why do you think you need regular expressions here? You.. do not.</p>\n<p>Just use <code>.replace</code> (which replaces ALL occurrences; <code>.replaceAll</code> interprets the first arg as a regex, and is in contrast to <code>.replaceFirst</code> which also interprets the first arg as a regex but only replaces the first occurrence. Yes, these are badly named methods. <code>replace</code> replaces all and does not interpret, which is what you want). By avoiding regular expressions, you avoid some exotic Denial of Service attack surface and it's faster in general, too.</p>\n<pre><code>String baseString = &quot;any string with marker {{TEST_MARKER}} here. Just to prove the point, {{TEST_MARKER}} again.&quot;;\nString key = &quot;TEST_MARKER&quot;;\nString val = &quot;123&quot;;\nString pattern = String.format(&quot;\\\\{\\\\{%s\\\\}\\\\}&quot;, key);\nString result = baseString.replace(pattern, val);\n</code></pre>\n<p>Or, possibly, look into <a href=\"https://www.baeldung.com/mustache\" rel=\"nofollow noreferrer\">mustache</a> - a library that does this for you.</p>\n"}],"owner":{"account_id":4091815,"reputation":373,"user_id":3359605,"accept_rate":11,"display_name":"Virkom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682299414,"creation_date":1682297871,"question_id":76087972,"body_markdown":"I have a problem with regex to replace `{{MARKER}}` value. \r\n\r\n    String baseString = &quot;any string with marker {{TEST_MARKER}} here&quot;;\r\n    String key = &quot;TEST_MARKER&quot;;\r\n    String val = &quot;123&quot;;\r\n    String pattern = String.format(&quot;\\\\{\\\\{%s\\\\}\\\\}&quot;, key);\r\n    String result = baseString.replaceAll(pattern, val);\r\n\r\nIt works correctly for any `baseString`. But I get an exception in one case. If `baseString` contains `${some_text}`.\r\n\r\nSo I will get an error If I use something like this:\r\n\r\n    String baseString = &quot;any string ${test} with marker {{TEST_MARKER}} here&quot;;\r\n    \r\nResult:\r\n\r\n    java.lang.IllegalArgumentException: No group with name {test}\r\n\t    at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1059) ~[na:na]\r\n\t    at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997) ~[na:na]\r\n\t    at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181) ~[na:na]\r\n\t    at java.base/java.lang.String.replaceAll(String.java:2939) ~[na:na]\r\n    \r\nor:\r\n\r\n    java.lang.IllegalArgumentException: named capturing group is missing trailing &#39;}&#39;\r\n\t    at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1051) ~[na:na]\r\n\t    at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997) ~[na:na]\r\n\t    at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181) ~[na:na]\r\n\t    at java.base/java.lang.String.replaceAll(String.java:2939) ~[na:na]\r\n\r\nIt depends on base string. How to fix this?","title":"Regex to replace marker {{MARKER}} in string","body":"<p>I have a problem with regex to replace <code>{{MARKER}}</code> value.</p>\n<pre><code>String baseString = &quot;any string with marker {{TEST_MARKER}} here&quot;;\nString key = &quot;TEST_MARKER&quot;;\nString val = &quot;123&quot;;\nString pattern = String.format(&quot;\\\\{\\\\{%s\\\\}\\\\}&quot;, key);\nString result = baseString.replaceAll(pattern, val);\n</code></pre>\n<p>It works correctly for any <code>baseString</code>. But I get an exception in one case. If <code>baseString</code> contains <code>${some_text}</code>.</p>\n<p>So I will get an error If I use something like this:</p>\n<pre><code>String baseString = &quot;any string ${test} with marker {{TEST_MARKER}} here&quot;;\n</code></pre>\n<p>Result:</p>\n<pre><code>java.lang.IllegalArgumentException: No group with name {test}\n    at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1059) ~[na:na]\n    at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997) ~[na:na]\n    at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181) ~[na:na]\n    at java.base/java.lang.String.replaceAll(String.java:2939) ~[na:na]\n</code></pre>\n<p>or:</p>\n<pre><code>java.lang.IllegalArgumentException: named capturing group is missing trailing '}'\n    at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1051) ~[na:na]\n    at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997) ~[na:na]\n    at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181) ~[na:na]\n    at java.base/java.lang.String.replaceAll(String.java:2939) ~[na:na]\n</code></pre>\n<p>It depends on base string. How to fix this?</p>\n"},{"tags":["java","android","android-dialog"],"answers":[{"tags":[],"owner":{"account_id":3067627,"reputation":24771,"user_id":2598988,"display_name":"Hariharan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1408008033,"creation_date":1408008033,"answer_id":25304489,"question_id":25304458,"body_markdown":"Try this..\r\n\r\nChange this..\r\n\r\n    VideoView vv = (VideoView) findViewById(R.id.videoview1);\r\n\r\nto\r\n\r\n    VideoView vv = (VideoView) dialog2.findViewById(R.id.videoview1);\r\n\r\nBecause `View` must refer `Dialog`","title":"NullPointerException: findViewById returns null in Dialog","body":"<p>Try this..</p>\n\n<p>Change this..</p>\n\n<pre><code>VideoView vv = (VideoView) findViewById(R.id.videoview1);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>VideoView vv = (VideoView) dialog2.findViewById(R.id.videoview1);\n</code></pre>\n\n<p>Because <code>View</code> must refer <code>Dialog</code></p>\n"},{"tags":[],"owner":{"account_id":968009,"reputation":14390,"user_id":991085,"accept_rate":50,"display_name":"Giru Bhai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1408008047,"creation_date":1408008047,"answer_id":25304496,"question_id":25304458,"body_markdown":"Change\r\n\r\n    VideoView vv = (VideoView)findViewById(R.id.videoview1);\r\n\r\nto\r\n\r\n    VideoView vv = (VideoView)dialog2.findViewById(R.id.videoview1);\r\n\r\nbecause `videoview1` is part of `R.layout.video` and `dialog2` view layout is `R.layout.video` ","title":"NullPointerException: findViewById returns null in Dialog","body":"<p>Change</p>\n\n<pre><code>VideoView vv = (VideoView)findViewById(R.id.videoview1);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>VideoView vv = (VideoView)dialog2.findViewById(R.id.videoview1);\n</code></pre>\n\n<p>because <code>videoview1</code> is part of <code>R.layout.video</code> and <code>dialog2</code> view layout is <code>R.layout.video</code> </p>\n"},{"tags":[],"owner":{"account_id":1687550,"reputation":3781,"user_id":1550509,"accept_rate":44,"display_name":"Android is everything for me"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1408008347,"creation_date":1408008347,"answer_id":25304585,"question_id":25304458,"body_markdown":"    VideoView vv = (VideoView) dialog2.findViewById(R.id.videoview1);\r\nyou need to use dialog object. specifier to get video view id","title":"NullPointerException: findViewById returns null in Dialog","body":"<pre><code>VideoView vv = (VideoView) dialog2.findViewById(R.id.videoview1);\n</code></pre>\n\n<p>you need to use dialog object. specifier to get video view id</p>\n"}],"owner":{"account_id":4788595,"reputation":15,"user_id":3868383,"display_name":"knecht"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":25304489,"answer_count":3,"score":0,"last_activity_date":1682294763,"creation_date":1408007942,"question_id":25304458,"body_markdown":"I&#180;m trying to show a video in a dialog but the VideoView can&#180;t be found, although the id is correct. I get a NullPointerException in this line:\r\n\r\n    VideoView vv = (VideoView) findViewById(R.id.videoview1);\r\n\r\nThis is my code:\r\n\r\n    \t        \tDialog dialog2 = new Dialog(getContext(),\r\n\t    \t\t\t\tandroid.R.style.Theme_Translucent_NoTitleBar_Fullscreen);\r\n\t            dialog2.setContentView(R.layout.video);\r\n\t            \r\n\t        \tVideoView vv = (VideoView) findViewById(R.id.videoview1);\r\n\t    \t\tString uri = &quot;android.resource://&quot; + theGameActivity.getPackageName() +&quot;/&quot;+R.raw.video6;\r\n    dialog2.show();\r\n\t    \t\tvv.start();","title":"NullPointerException: findViewById returns null in Dialog","body":"<p>I´m trying to show a video in a dialog but the VideoView can´t be found, although the id is correct. I get a NullPointerException in this line:</p>\n\n<pre><code>VideoView vv = (VideoView) findViewById(R.id.videoview1);\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>                Dialog dialog2 = new Dialog(getContext(),\n                    android.R.style.Theme_Translucent_NoTitleBar_Fullscreen);\n            dialog2.setContentView(R.layout.video);\n\n            VideoView vv = (VideoView) findViewById(R.id.videoview1);\n            String uri = \"android.resource://\" + theGameActivity.getPackageName() +\"/\"+R.raw.video6;\ndialog2.show();\n            vv.start();\n</code></pre>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":1,"creation_date":1510367407,"post_id":47233187,"comment_id":81418067,"body_markdown":"It seems too broad. Can you reduce the content to provide relevant info regarding the problem and post [MCVE](https://stackoverflow.com/help/mcve) to reproduce it.","body":"It seems too broad. Can you reduce the content to provide relevant info regarding the problem and post <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> to reproduce it."},{"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"score":1,"creation_date":1510536015,"post_id":47233187,"comment_id":81462517,"body_markdown":"@dur my custom(manual) login is used right after their initial account creation. I email them and have them click a link to verify their account. Upon clicking the link, I log them in without making them enter their credentials again. Since I don&#39;t have a password in this scenario, I can&#39;t use  any of the &quot;normal&quot; spring auth mechanisms, such as an `ActiveDirectoryLdapAuthenticationProvider`. I also do basically the same thing if they forget their password, allowing them limited account access without necessarily having to change/reset their password, which is very important to my use case.","body":"@dur my custom(manual) login is used right after their initial account creation. I email them and have them click a link to verify their account. Upon clicking the link, I log them in without making them enter their credentials again. Since I don&#39;t have a password in this scenario, I can&#39;t use  any of the &quot;normal&quot; spring auth mechanisms, such as an <code>ActiveDirectoryLdapAuthenticationProvider</code>. I also do basically the same thing if they forget their password, allowing them limited account access without necessarily having to change/reset their password, which is very important to my use case."},{"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"score":0,"creation_date":1510536542,"post_id":47233187,"comment_id":81462665,"body_markdown":"@dur, further, *even if I did have a password*, I don&#39;t really see a way to still get spring to do all of it&#39;s stuff for me, because spring does it&#39;s magic in a servlet `Filter`, well before my application code (eg in a controller) is executed. I need to make the call that establishes the login state, and all of its associated session stuff I listed, programatically.","body":"@dur, further, <i>even if I did have a password</i>, I don&#39;t really see a way to still get spring to do all of it&#39;s stuff for me, because spring does it&#39;s magic in a servlet <code>Filter</code>, well before my application code (eg in a controller) is executed. I need to make the call that establishes the login state, and all of its associated session stuff I listed, programatically."},{"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"score":2,"creation_date":1510536848,"post_id":47233187,"comment_id":81462743,"body_markdown":"@RomanC I don&#39;t think my question is broad at all. I&#39;m asking for strategy advice from people who are extremely well versed with spring security. I presented details to give a concrete demonstration of the problems with the typical way that people do manual logins with spring. The details just give context - I don&#39;t think that makes the question broad. I don&#39;t see much value in providing a reproducible code sample here - my code works, I just don&#39;t like the strategy, and feel an expert may know a better way.","body":"@RomanC I don&#39;t think my question is broad at all. I&#39;m asking for strategy advice from people who are extremely well versed with spring security. I presented details to give a concrete demonstration of the problems with the typical way that people do manual logins with spring. The details just give context - I don&#39;t think that makes the question broad. I don&#39;t see much value in providing a reproducible code sample here - my code works, I just don&#39;t like the strategy, and feel an expert may know a better way."}],"answers":[{"tags":[],"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1510662327,"creation_date":1510661427,"answer_id":47285544,"question_id":47233187,"body_markdown":"For custom web authentication you should implement combination of a custom authentication filter (for example [`AbstractAuthenticationProcessingFilter`](https://docs.spring.io/spring-security/site/docs/4.2.3.RELEASE/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.html) or just [`GenericFilterBean`](https://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/web/filter/GenericFilterBean.html)), a custom authentication provider ([`AuthenticationProvider`](https://docs.spring.io/autorepo/docs/spring-security/4.2.3.RELEASE/apidocs/org/springframework/security/authentication/AuthenticationProvider.html)) or/and custom authentication token ([`AbstractAuthenticationToken`](https://docs.spring.io/spring-security/site/docs/4.2.3.RELEASE/apidocs/org/springframework/security/authentication/AbstractAuthenticationToken.html)). \r\n\r\nFor example, see source of [Spring Security Kerberos](https://github.com/spring-projects/spring-security-kerberos).\r\n\r\nSee also:\r\n\r\n- [The AuthenticationManager, ProviderManager and AuthenticationProvider](https://docs.spring.io/spring-security/site/docs/current/reference/html/core-services.html#core-services-authentication-manager)","title":"spring security manual login best practice","body":"<p>For custom web authentication you should implement combination of a custom authentication filter (for example <a href=\"https://docs.spring.io/spring-security/site/docs/4.2.3.RELEASE/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.html\" rel=\"nofollow noreferrer\"><code>AbstractAuthenticationProcessingFilter</code></a> or just <a href=\"https://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/web/filter/GenericFilterBean.html\" rel=\"nofollow noreferrer\"><code>GenericFilterBean</code></a>), a custom authentication provider (<a href=\"https://docs.spring.io/autorepo/docs/spring-security/4.2.3.RELEASE/apidocs/org/springframework/security/authentication/AuthenticationProvider.html\" rel=\"nofollow noreferrer\"><code>AuthenticationProvider</code></a>) or/and custom authentication token (<a href=\"https://docs.spring.io/spring-security/site/docs/4.2.3.RELEASE/apidocs/org/springframework/security/authentication/AbstractAuthenticationToken.html\" rel=\"nofollow noreferrer\"><code>AbstractAuthenticationToken</code></a>). </p>\n\n<p>For example, see source of <a href=\"https://github.com/spring-projects/spring-security-kerberos\" rel=\"nofollow noreferrer\">Spring Security Kerberos</a>.</p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html/core-services.html#core-services-authentication-manager\" rel=\"nofollow noreferrer\">The AuthenticationManager, ProviderManager and AuthenticationProvider</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1639434979,"creation_date":1511840588,"answer_id":47523645,"question_id":47233187,"body_markdown":"I wanted to elaborate on how I implemented the advice of [dur](https://stackoverflow.com/users/5277820/dur). In my scenario, I only used a custom `AuthenticationProvider`.\r\nInstead of creating a custom servlet `Filter`, such as extending `AbstractAuthenticationProcessingFilter`, which seemed like a lot of work, I choose to instead use the following strategy:\r\n\r\n - At the point in my code where I was confident that I had identified the user, and wanted them to be &quot;logged in&quot;, I stuck a flag in the user&#39;s session, marking that they should be logged in on the next request, along with any other identity/bookkeeping info I needed, such as their username.\r\n - Then, I told the browser client to make an http post to the `loginProcessingUrl` (the same one I configured spring security to use for form-based login), telling them to send the standard `username` and `password` form params, although they don&#39;t need to send real values - dummy values like `foo` are fine.\r\n - When the user makes that post request (eg to `/login`), spring will invoke my custom `AuthenticationProvider`, which will look in the user&#39;s session to check for the flag, and to gather the username. Then it will create and return an `Authentication` object, such as `PreAuthenticatedAuthenticationToken`, which identifies the user.\r\n - Spring will handle the rest. The user is now logged in.\r\n\r\nBy doing it this way, you stay within the &quot;normal&quot; way of doing logins, and so spring will still automatically:  \r\n\r\n - Call any custom success and failure handlers you configured for the form login, which is nice if you use that place to do certain things on login, like query or update a db.  \r\n - It will respect any max concurrent sessions per user settings that you may be using.  \r\n - You get to keep spring&#39;s default session fixation attack protection (changing session id upon login).  \r\n - If you set a custom session timeout, eg via `server.session.timeout` in a properties file, spring will use it. There&#39;s probably other session config attributes that are done at this time too.  \r\n - If you enabled spring&#39;s &quot;remember me&quot; functionality, it will work.\r\n - It will fire a login event, which is used for other spring components, such as storing the user&#39;s session in a `SessionRegistry`. I think the events are also used by other parts of spring, such as the actuator, and for auditing.  \r\n\r\nWhen I first tried just doing the typically recommended `SecurityContextHolder.getContext().setAuthentication(authentication)` to login my user, instead of the custom `AuthenticationProvider`, none of the above bullets were done for me, which can utterly break your app... or cause subtle security bugs - neither are good.\r\n\r\nHere&#39;s some code to help solidify what I said:\r\n\r\n    \r\nCustom AuthenticationProvider\r\n\r\n    @Component\r\n    public class AccountVerificationAuthenticationProvider implements AuthenticationProvider {\r\n    \r\n        @Autowired\r\n        private AppAuthenticatedUserService appAuthenticatedUserService;\r\n    \r\n        @Autowired\r\n        private AuthService authService;\r\n        \r\n        @Override\r\n        public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n    \r\n            // This will look in the user&#39;s session to get their username, and to make sure the flag is set to allow login without password on this request.\r\n            UserAccount userAccount = authService.getUserAccountFromRecentAccountVerificationProcess();\r\n            if (userAccount == null) {\r\n                // Tell spring we can&#39;t process this AuthenticationProvider obj.\r\n                // Spring will continue, and try another AuthenticationProvider, if it can.\r\n                return null;\r\n            }\r\n    \r\n            // A service to create a custom UserDetails object for this user.\r\n            UserDetails appAuthenticatedUser = appAuthenticatedUserService.create(userAccount.getEmail(), &quot;&quot;, true);\r\n    \r\n            PreAuthenticatedAuthenticationToken authenticationToken = new PreAuthenticatedAuthenticationToken(appAuthenticatedUser, &quot;&quot;, appAuthenticatedUser.getAuthorities());\r\n            authenticationToken.setAuthenticated(true);\r\n        \r\n            return authenticationToken;\r\n        }\r\n    \r\n        @Override\r\n        public boolean supports(Class&lt;?&gt; authentication) {\r\n            return authentication.equals(UsernamePasswordAuthenticationToken.class);\r\n        }\r\n    \r\n    }\r\n    \r\nConfig spring security to use the provider  \r\n\r\n    // In your WebSecurityConfigurerAdapter\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class AppLoginConfig extends WebSecurityConfigurerAdapter {\r\n        @Autowired\r\n        private AccountVerificationAuthenticationProvider accountVerificationAuthenticationProvider;\r\n\r\n        @Autowired\r\n        private ActiveDirectoryLdapAuthenticationProvider activeDirectoryLdapAuthenticationProvider;\r\n        \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n            // Spring will try these auth providers in the order we register them.\r\n            // We do the accountVerificationAuthenticationProvider provider first, since it doesn&#39;t need to do any slow IO to check,\r\n            // so it&#39;s very fast. Only if this AuthenticationProvider  rejects (which means this http request is not for programmatic login), will spring then try the next AuthenticationProvider in the list.\r\n            authenticationManagerBuilder\r\n                .authenticationProvider(accountVerificationAuthenticationProvider)\r\n                // I&#39;m using ActiveDirectory / LDAP for when a user logs in via entering a user + password via the html form, but whatever you want to use here should work.\r\n                .authenticationProvider(activeDirectoryLdapAuthenticationProvider);\r\n        }\r\n        \r\n        @Override\r\n        protected void configure(HttpSecurity httpSecurity) throws Exception {\r\n            ...\r\n        }\r\n    }","title":"spring security manual login best practice","body":"<p>I wanted to elaborate on how I implemented the advice of <a href=\"https://stackoverflow.com/users/5277820/dur\">dur</a>. In my scenario, I only used a custom <code>AuthenticationProvider</code>.\nInstead of creating a custom servlet <code>Filter</code>, such as extending <code>AbstractAuthenticationProcessingFilter</code>, which seemed like a lot of work, I choose to instead use the following strategy:</p>\n<ul>\n<li>At the point in my code where I was confident that I had identified the user, and wanted them to be &quot;logged in&quot;, I stuck a flag in the user's session, marking that they should be logged in on the next request, along with any other identity/bookkeeping info I needed, such as their username.</li>\n<li>Then, I told the browser client to make an http post to the <code>loginProcessingUrl</code> (the same one I configured spring security to use for form-based login), telling them to send the standard <code>username</code> and <code>password</code> form params, although they don't need to send real values - dummy values like <code>foo</code> are fine.</li>\n<li>When the user makes that post request (eg to <code>/login</code>), spring will invoke my custom <code>AuthenticationProvider</code>, which will look in the user's session to check for the flag, and to gather the username. Then it will create and return an <code>Authentication</code> object, such as <code>PreAuthenticatedAuthenticationToken</code>, which identifies the user.</li>\n<li>Spring will handle the rest. The user is now logged in.</li>\n</ul>\n<p>By doing it this way, you stay within the &quot;normal&quot; way of doing logins, and so spring will still automatically:</p>\n<ul>\n<li>Call any custom success and failure handlers you configured for the form login, which is nice if you use that place to do certain things on login, like query or update a db.</li>\n<li>It will respect any max concurrent sessions per user settings that you may be using.</li>\n<li>You get to keep spring's default session fixation attack protection (changing session id upon login).</li>\n<li>If you set a custom session timeout, eg via <code>server.session.timeout</code> in a properties file, spring will use it. There's probably other session config attributes that are done at this time too.</li>\n<li>If you enabled spring's &quot;remember me&quot; functionality, it will work.</li>\n<li>It will fire a login event, which is used for other spring components, such as storing the user's session in a <code>SessionRegistry</code>. I think the events are also used by other parts of spring, such as the actuator, and for auditing.</li>\n</ul>\n<p>When I first tried just doing the typically recommended <code>SecurityContextHolder.getContext().setAuthentication(authentication)</code> to login my user, instead of the custom <code>AuthenticationProvider</code>, none of the above bullets were done for me, which can utterly break your app... or cause subtle security bugs - neither are good.</p>\n<p>Here's some code to help solidify what I said:</p>\n<p>Custom AuthenticationProvider</p>\n<pre><code>@Component\npublic class AccountVerificationAuthenticationProvider implements AuthenticationProvider {\n\n    @Autowired\n    private AppAuthenticatedUserService appAuthenticatedUserService;\n\n    @Autowired\n    private AuthService authService;\n    \n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n\n        // This will look in the user's session to get their username, and to make sure the flag is set to allow login without password on this request.\n        UserAccount userAccount = authService.getUserAccountFromRecentAccountVerificationProcess();\n        if (userAccount == null) {\n            // Tell spring we can't process this AuthenticationProvider obj.\n            // Spring will continue, and try another AuthenticationProvider, if it can.\n            return null;\n        }\n\n        // A service to create a custom UserDetails object for this user.\n        UserDetails appAuthenticatedUser = appAuthenticatedUserService.create(userAccount.getEmail(), &quot;&quot;, true);\n\n        PreAuthenticatedAuthenticationToken authenticationToken = new PreAuthenticatedAuthenticationToken(appAuthenticatedUser, &quot;&quot;, appAuthenticatedUser.getAuthorities());\n        authenticationToken.setAuthenticated(true);\n    \n        return authenticationToken;\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        return authentication.equals(UsernamePasswordAuthenticationToken.class);\n    }\n\n}\n</code></pre>\n<p>Config spring security to use the provider</p>\n<pre><code>// In your WebSecurityConfigurerAdapter\n@Configuration\n@EnableWebSecurity\npublic class AppLoginConfig extends WebSecurityConfigurerAdapter {\n    @Autowired\n    private AccountVerificationAuthenticationProvider accountVerificationAuthenticationProvider;\n\n    @Autowired\n    private ActiveDirectoryLdapAuthenticationProvider activeDirectoryLdapAuthenticationProvider;\n    \n    @Override\n    protected void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n        // Spring will try these auth providers in the order we register them.\n        // We do the accountVerificationAuthenticationProvider provider first, since it doesn't need to do any slow IO to check,\n        // so it's very fast. Only if this AuthenticationProvider  rejects (which means this http request is not for programmatic login), will spring then try the next AuthenticationProvider in the list.\n        authenticationManagerBuilder\n            .authenticationProvider(accountVerificationAuthenticationProvider)\n            // I'm using ActiveDirectory / LDAP for when a user logs in via entering a user + password via the html form, but whatever you want to use here should work.\n            .authenticationProvider(activeDirectoryLdapAuthenticationProvider);\n    }\n    \n    @Override\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\n        ...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1455702,"reputation":15662,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682294082,"creation_date":1682294082,"answer_id":76087811,"question_id":47233187,"body_markdown":"Here is an example showing how to extend `UsernamePasswordAuthenticationFilter` (or its parent `AbstractAuthenticationProcessingFilter`). This example disables the URL redirect functionality; but it could be customized in other ways or left in place. The remaining Spring features mentioned in the OP&#39;s answer are left untouched (handlers, sessions, events, remember-me, etc.) so their functionality isn&#39;t lost by simply manipulating the `SecurityContext` directly.\r\n\r\n    public class UserNamePasswordHeaderFilter extends UsernamePasswordAuthenticationFilter {\r\n    \r\n        public UserNamePasswordHeaderFilter(RequestMatcher matcher, AuthenticationManager manager) {\r\n            super(manager);\r\n            setRequiresAuthenticationRequestMatcher(matcher);\r\n            setPostOnly(false);\r\n            setAuthenticationSuccessHandler(successHandler());\r\n        }\r\n    \r\n        private AuthenticationSuccessHandler successHandler() {\r\n            var successHandler = new SimpleUrlAuthenticationSuccessHandler();\r\n            successHandler.setRedirectStrategy((request, response, url) -&gt; {});  // No redirect.\r\n            return successHandler;\r\n        }\r\n    \r\n        @Override\r\n        protected String obtainUsername(HttpServletRequest request) {\r\n            return request.getHeader(SPRING_SECURITY_FORM_USERNAME_KEY);\r\n        }\r\n    \r\n        @Override\r\n        protected String obtainPassword(HttpServletRequest request) {\r\n            return request.getHeader(SPRING_SECURITY_FORM_PASSWORD_KEY);\r\n        }\r\n    \r\n        @Override\r\n        protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain,\r\n                                                Authentication authResult) throws IOException, ServletException {\r\n            super.successfulAuthentication(request, response, chain, authResult);\r\n            chain.doFilter(request, response);  // Continue the chain instead of redirecting.\r\n        }\r\n    }\r\n\r\nNote the `RequestMatcher` is not required if this Filter is to be applied on all paths, but it demonstrates how different filters could be applied selectively. The `username` and `password` can be retrieved from any part of the `request`. Using headers is just for demonstration. Extending `AbstractAuthenticationProcessingFilter` would allow creating a custom `Authentication` token, still without touching the `SecurityContext`.\r\n\r\nIn Spring 5.2+ consider instantiating [AuthenticationFilter](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/AuthenticationFilter.html) instead.","title":"spring security manual login best practice","body":"<p>Here is an example showing how to extend <code>UsernamePasswordAuthenticationFilter</code> (or its parent <code>AbstractAuthenticationProcessingFilter</code>). This example disables the URL redirect functionality; but it could be customized in other ways or left in place. The remaining Spring features mentioned in the OP's answer are left untouched (handlers, sessions, events, remember-me, etc.) so their functionality isn't lost by simply manipulating the <code>SecurityContext</code> directly.</p>\n<pre><code>public class UserNamePasswordHeaderFilter extends UsernamePasswordAuthenticationFilter {\n\n    public UserNamePasswordHeaderFilter(RequestMatcher matcher, AuthenticationManager manager) {\n        super(manager);\n        setRequiresAuthenticationRequestMatcher(matcher);\n        setPostOnly(false);\n        setAuthenticationSuccessHandler(successHandler());\n    }\n\n    private AuthenticationSuccessHandler successHandler() {\n        var successHandler = new SimpleUrlAuthenticationSuccessHandler();\n        successHandler.setRedirectStrategy((request, response, url) -&gt; {});  // No redirect.\n        return successHandler;\n    }\n\n    @Override\n    protected String obtainUsername(HttpServletRequest request) {\n        return request.getHeader(SPRING_SECURITY_FORM_USERNAME_KEY);\n    }\n\n    @Override\n    protected String obtainPassword(HttpServletRequest request) {\n        return request.getHeader(SPRING_SECURITY_FORM_PASSWORD_KEY);\n    }\n\n    @Override\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain,\n                                            Authentication authResult) throws IOException, ServletException {\n        super.successfulAuthentication(request, response, chain, authResult);\n        chain.doFilter(request, response);  // Continue the chain instead of redirecting.\n    }\n}\n</code></pre>\n<p>Note the <code>RequestMatcher</code> is not required if this Filter is to be applied on all paths, but it demonstrates how different filters could be applied selectively. The <code>username</code> and <code>password</code> can be retrieved from any part of the <code>request</code>. Using headers is just for demonstration. Extending <code>AbstractAuthenticationProcessingFilter</code> would allow creating a custom <code>Authentication</code> token, still without touching the <code>SecurityContext</code>.</p>\n<p>In Spring 5.2+ consider instantiating <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/AuthenticationFilter.html\" rel=\"nofollow noreferrer\">AuthenticationFilter</a> instead.</p>\n"}],"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6287,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"accepted_answer_id":47285544,"answer_count":3,"score":13,"last_activity_date":1682294082,"creation_date":1510361075,"question_id":47233187,"body_markdown":"I&#39;m using spring security to implement a programmatic, manual user login. I have a scenario where I have positively established the user&#39;s identity, and wish to log them in. I don&#39;t know their password, and so can&#39;t use the regular login code path where you submit a form to a url, which spring intercepts via a servlet `Filter`, doing all of it&#39;s auth+session magic.\r\n\r\nI&#39;ve searched, and it seems most people create their own `Authentication` object, and then tell spring about via:  \r\n\r\n    PreAuthenticatedAuthenticationToken authentication = new PreAuthenticatedAuthenticationToken(user, &quot;&quot;, user.getAuthorities());\r\n    SecurityContextHolder.getContext().setAuthentication(authentication);\r\n\r\nIndeed, this works. Spring even puts it into the session for me, making subsequent http requests maintain their auth status. \r\n\r\nHowever, I feel like this is a dirty hack. I&#39;ll present some details that I hope will give concrete examples of the problems associated with using `setAuthentication()` inside a controller to achieve a manual login:\r\n\r\nTo give an idea, my config is:\r\n\r\n\r\n\thttpSecurity\r\n\t\t.authorizeRequests()\r\n\t\t.antMatchers(&quot;/test/**&quot;).permitAll()\r\n\t\t.antMatchers(&quot;/admin/**&quot;, &quot;/api/admin/**&quot;).hasRole(&quot;USER_SUPER_ADMIN&quot;)\r\n\t\t.and()\r\n\t\t.formLogin()\r\n\t\t.loginPage(&quot;/sign-in?sp&quot;)\r\n\t\t.loginProcessingUrl(&quot;/api/auth/sign-in&quot;)\r\n\t\t.successHandler(createLoginSuccessHandler())\r\n\t\t.failureHandler(createLoginFailureHandler())\r\n\t\t.permitAll()\r\n\t\t.and()\r\n\t\t.logout()\r\n\t\t.logoutUrl(&quot;/api/auth/sign-out&quot;)\r\n\t\t.logoutSuccessHandler(createLogoutSuccessHandler())\r\n\t\t.and()\r\n\t\t.sessionManagement()\r\n\t\t.maximumSessions(1)\r\n\t\t.maxSessionsPreventsLogin(true)\r\n\t\t.sessionRegistry(sessionRegistry)\r\n\t;\r\n\r\nKey points in the above config:  \r\n - I use custom success and failure handlers for the form login  \r\n - I want to config behavior for max concurrent sessions per user  \r\n - I want to maintain spring&#39;s default session fixation protection (changing session id upon login).  \r\n - I want to use a session registry  \r\n - ... more of these session/login functionalities, had I chosen to config it.\r\n\r\nI stepped through the code to see how spring processes a form login. As expected, Spring does all the session/login functionalities that my `HttpSecurity` config told it to do when I use the form login. But, when I do my own custom/manual login via `SecurityContextHolder.getContext().setAuthentication()`, it does NONE of those functionalities. This is because spring does all of it&#39;s session/login functionalities stuff inside of a servlet `Filter`, and my programmatic code can&#39;t really call a Filter. Now, I can attempt to add the missing functionalities myself, duplicating their code: I see that the spring Filter uses: `ConcurrentSessionControlAuthenticationStrategy`, `ChangeSessionIdAuthenticationStrategy`, and `RegisterSessionAuthenticationStrategy`. I can create these objects myself, configure them, and call them after my custom login. But, that&#39;s really lame to duplicate all that spring code. Furthermore, there&#39;s still other behaviors I&#39;m missing - I noticed that when using the form login code path, that spring triggers some login events which don&#39;t get triggered when I do my custom login. And there&#39;s probably other stuff that I&#39;m missing or don&#39;t understand. The whole process is pretty complicated, and I feel like there&#39;s a high chance of introducing bugs if this isn&#39;t done right, not to mention that library updates would be a pain if I started duplicating spring code. \r\n\r\nSo, I feel like I&#39;m approaching this from the wrong way. **Should I be using a different strategy, so that I&#39;m not bypassing so much of the stuff that spring does for me?** Maybe I should try to make my own `AuthenticationProvider` to accomplish this custom login? \r\n\r\n*To clarify, my code more or less works. But, I feel like I accomplished it using a poor strategy because I had to write code duplicating a lot of stuff that spring does for me. Further, my code doesn&#39;t perfectly replicate what spring does, making me wonder what negative implications might result. There must be a better way to programatically achieve login.","title":"spring security manual login best practice","body":"<p>I'm using spring security to implement a programmatic, manual user login. I have a scenario where I have positively established the user's identity, and wish to log them in. I don't know their password, and so can't use the regular login code path where you submit a form to a url, which spring intercepts via a servlet <code>Filter</code>, doing all of it's auth+session magic.</p>\n<p>I've searched, and it seems most people create their own <code>Authentication</code> object, and then tell spring about via:</p>\n<pre><code>PreAuthenticatedAuthenticationToken authentication = new PreAuthenticatedAuthenticationToken(user, &quot;&quot;, user.getAuthorities());\nSecurityContextHolder.getContext().setAuthentication(authentication);\n</code></pre>\n<p>Indeed, this works. Spring even puts it into the session for me, making subsequent http requests maintain their auth status.</p>\n<p>However, I feel like this is a dirty hack. I'll present some details that I hope will give concrete examples of the problems associated with using <code>setAuthentication()</code> inside a controller to achieve a manual login:</p>\n<p>To give an idea, my config is:</p>\n<pre><code>httpSecurity\n    .authorizeRequests()\n    .antMatchers(&quot;/test/**&quot;).permitAll()\n    .antMatchers(&quot;/admin/**&quot;, &quot;/api/admin/**&quot;).hasRole(&quot;USER_SUPER_ADMIN&quot;)\n    .and()\n    .formLogin()\n    .loginPage(&quot;/sign-in?sp&quot;)\n    .loginProcessingUrl(&quot;/api/auth/sign-in&quot;)\n    .successHandler(createLoginSuccessHandler())\n    .failureHandler(createLoginFailureHandler())\n    .permitAll()\n    .and()\n    .logout()\n    .logoutUrl(&quot;/api/auth/sign-out&quot;)\n    .logoutSuccessHandler(createLogoutSuccessHandler())\n    .and()\n    .sessionManagement()\n    .maximumSessions(1)\n    .maxSessionsPreventsLogin(true)\n    .sessionRegistry(sessionRegistry)\n;\n</code></pre>\n<p>Key points in the above config:</p>\n<ul>\n<li>I use custom success and failure handlers for the form login</li>\n<li>I want to config behavior for max concurrent sessions per user</li>\n<li>I want to maintain spring's default session fixation protection (changing session id upon login).</li>\n<li>I want to use a session registry</li>\n<li>... more of these session/login functionalities, had I chosen to config it.</li>\n</ul>\n<p>I stepped through the code to see how spring processes a form login. As expected, Spring does all the session/login functionalities that my <code>HttpSecurity</code> config told it to do when I use the form login. But, when I do my own custom/manual login via <code>SecurityContextHolder.getContext().setAuthentication()</code>, it does NONE of those functionalities. This is because spring does all of it's session/login functionalities stuff inside of a servlet <code>Filter</code>, and my programmatic code can't really call a Filter. Now, I can attempt to add the missing functionalities myself, duplicating their code: I see that the spring Filter uses: <code>ConcurrentSessionControlAuthenticationStrategy</code>, <code>ChangeSessionIdAuthenticationStrategy</code>, and <code>RegisterSessionAuthenticationStrategy</code>. I can create these objects myself, configure them, and call them after my custom login. But, that's really lame to duplicate all that spring code. Furthermore, there's still other behaviors I'm missing - I noticed that when using the form login code path, that spring triggers some login events which don't get triggered when I do my custom login. And there's probably other stuff that I'm missing or don't understand. The whole process is pretty complicated, and I feel like there's a high chance of introducing bugs if this isn't done right, not to mention that library updates would be a pain if I started duplicating spring code.</p>\n<p>So, I feel like I'm approaching this from the wrong way. <strong>Should I be using a different strategy, so that I'm not bypassing so much of the stuff that spring does for me?</strong> Maybe I should try to make my own <code>AuthenticationProvider</code> to accomplish this custom login?</p>\n<p>*To clarify, my code more or less works. But, I feel like I accomplished it using a poor strategy because I had to write code duplicating a lot of stuff that spring does for me. Further, my code doesn't perfectly replicate what spring does, making me wonder what negative implications might result. There must be a better way to programatically achieve login.</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":34563,"reputation":19814,"user_id":97754,"accept_rate":90,"display_name":"Margus"},"down_vote_count":0,"up_vote_count":73,"is_accepted":true,"score":73,"last_activity_date":1408638815,"creation_date":1408638815,"answer_id":25431419,"question_id":25431380,"body_markdown":"I assume it is something in the lines of:\r\n\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.logging.LogEntries;\r\n    import org.openqa.selenium.logging.LogEntry;\r\n    import org.openqa.selenium.logging.LogType;\r\n    import org.openqa.selenium.logging.LoggingPreferences;\r\n    import org.openqa.selenium.remote.CapabilityType;\r\n    import org.openqa.selenium.remote.DesiredCapabilities;\r\n    import org.testng.annotations.AfterMethod;\r\n    import org.testng.annotations.BeforeMethod;\r\n    import org.testng.annotations.Test;\r\n    \r\n    public class ChromeConsoleLogging {\r\n        private WebDriver driver;\r\n    \r\n    \r\n        @BeforeMethod\r\n        public void setUp() {\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;c:\\\\path\\\\to\\\\chromedriver.exe&quot;);        \r\n            DesiredCapabilities caps = DesiredCapabilities.chrome();\r\n            LoggingPreferences logPrefs = new LoggingPreferences();\r\n            logPrefs.enable(LogType.BROWSER, Level.ALL);\r\n            caps.setCapability(CapabilityType.LOGGING_PREFS, logPrefs);\r\n            driver = new ChromeDriver(caps);\r\n        }\r\n    \r\n        @AfterMethod\r\n        public void tearDown() {\r\n            driver.quit();\r\n        }\r\n    \r\n        public void analyzeLog() {\r\n            LogEntries logEntries = driver.manage().logs().get(LogType.BROWSER);\r\n            for (LogEntry entry : logEntries) {\r\n                System.out.println(new Date(entry.getTimestamp()) + &quot; &quot; + entry.getLevel() + &quot; &quot; + entry.getMessage());\r\n                //do something useful with the data\r\n            }\r\n        }\r\n    \r\n        @Test\r\n        public void testMethod() {\r\n            driver.get(&quot;http://mypage.com&quot;);\r\n            //do something on page\r\n            analyzeLog();\r\n        }\r\n    }\r\n\r\nSource : https://stackoverflow.com/questions/18261338/get-chromes-console-log","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>I assume it is something in the lines of:</p>\n\n<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.logging.LogEntries;\nimport org.openqa.selenium.logging.LogEntry;\nimport org.openqa.selenium.logging.LogType;\nimport org.openqa.selenium.logging.LoggingPreferences;\nimport org.openqa.selenium.remote.CapabilityType;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\n\npublic class ChromeConsoleLogging {\n    private WebDriver driver;\n\n\n    @BeforeMethod\n    public void setUp() {\n        System.setProperty(\"webdriver.chrome.driver\", \"c:\\\\path\\\\to\\\\chromedriver.exe\");        \n        DesiredCapabilities caps = DesiredCapabilities.chrome();\n        LoggingPreferences logPrefs = new LoggingPreferences();\n        logPrefs.enable(LogType.BROWSER, Level.ALL);\n        caps.setCapability(CapabilityType.LOGGING_PREFS, logPrefs);\n        driver = new ChromeDriver(caps);\n    }\n\n    @AfterMethod\n    public void tearDown() {\n        driver.quit();\n    }\n\n    public void analyzeLog() {\n        LogEntries logEntries = driver.manage().logs().get(LogType.BROWSER);\n        for (LogEntry entry : logEntries) {\n            System.out.println(new Date(entry.getTimestamp()) + \" \" + entry.getLevel() + \" \" + entry.getMessage());\n            //do something useful with the data\n        }\n    }\n\n    @Test\n    public void testMethod() {\n        driver.get(\"http://mypage.com\");\n        //do something on page\n        analyzeLog();\n    }\n}\n</code></pre>\n\n<p>Source : <a href=\"https://stackoverflow.com/questions/18261338/get-chromes-console-log\">Get chrome&#39;s console log</a></p>\n"},{"tags":[],"owner":{"account_id":3346139,"reputation":14655,"user_id":2811258,"accept_rate":88,"display_name":"Johnny"},"down_vote_count":0,"up_vote_count":64,"is_accepted":false,"score":64,"last_activity_date":1594774285,"creation_date":1413900204,"answer_id":26488661,"question_id":25431380,"body_markdown":"In a more concise way, you can do:\r\n\r\n    LogEntries logs = driver.manage().logs().get(LogType.BROWSER);\r\n\r\nFor me it worked wonderfully for catching JS errors in console. Then you can add some verification for its size. For example, if it is &gt; 0, add some error output.","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>In a more concise way, you can do:</p>\n<pre><code>LogEntries logs = driver.manage().logs().get(LogType.BROWSER);\n</code></pre>\n<p>For me it worked wonderfully for catching JS errors in console. Then you can add some verification for its size. For example, if it is &gt; 0, add some error output.</p>\n"},{"tags":[],"owner":{"account_id":2871386,"reputation":93,"user_id":2464662,"display_name":"didinino"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1466434680,"creation_date":1466434680,"answer_id":37925681,"question_id":25431380,"body_markdown":"A less elegant solution is taking the log &#39;manually&#39; from the user data dir:\r\n\r\n 1. Set the user data dir to a fixed place:\r\n\r\n        options = new ChromeOptions();\r\n        capabilities = DesiredCapabilities.chrome();\r\n        options.addArguments(&quot;user-data-dir=/your_path/&quot;);\r\n        capabilities.setCapability(ChromeOptions.CAPABILITY, options);\r\n\r\n 2. Get the text from the log file chrome_debug.log located in the path you&#39;ve entered above.\r\n\r\nI use this method since `RemoteWebDriver` had problems getting the console logs remotely. If you run your test locally that can be easy to retrieve.","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>A less elegant solution is taking the log 'manually' from the user data dir:</p>\n\n<ol>\n<li><p>Set the user data dir to a fixed place:</p>\n\n<pre><code>options = new ChromeOptions();\ncapabilities = DesiredCapabilities.chrome();\noptions.addArguments(\"user-data-dir=/your_path/\");\ncapabilities.setCapability(ChromeOptions.CAPABILITY, options);\n</code></pre></li>\n<li><p>Get the text from the log file chrome_debug.log located in the path you've entered above.</p></li>\n</ol>\n\n<p>I use this method since <code>RemoteWebDriver</code> had problems getting the console logs remotely. If you run your test locally that can be easy to retrieve.</p>\n"},{"tags":[],"owner":{"account_id":7708971,"reputation":2016,"user_id":5839007,"accept_rate":89,"display_name":"cacti5"},"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1600800698,"creation_date":1480709672,"answer_id":40940167,"question_id":25431380,"body_markdown":"As a non-java selenium user, here is the **python** equivalent to Margus&#39;s answer:\r\n\r\n\r\n    from selenium import webdriver\r\n    from selenium.webdriver.common.desired_capabilities import DesiredCapabilities    \r\n    \r\n    class ChromeConsoleLogging(object):\r\n    \r\n        def __init__(self, ):\r\n            self.driver = None\r\n    \r\n        def setUp(self, ):\r\n            desired = DesiredCapabilities.CHROME\r\n            desired [&#39;loggingPrefs&#39;] = { &#39;browser&#39;:&#39;ALL&#39; }\r\n            self.driver = webdriver.Chrome(desired_capabilities=desired)\r\n    \r\n        def analyzeLog(self, ):\r\n            data = self.driver.get_log(&#39;browser&#39;)\r\n            print(data)\r\n    \r\n        def testMethod(self, ):\r\n            self.setUp()\r\n            self.driver.get(&quot;http://mypage.com&quot;)\r\n            self.analyzeLog()\r\n\r\n[Reference][1]\r\n\r\nEdit: Keeping Python answer in this thread because it is very similar to the Java answer and this post is returned on a Google search for the similar Python question\r\n\r\n  [1]: https://stackoverflow.com/questions/20907180/getting-console-log-output-from-chrome-with-selenium-python-api-bindings\r\n","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>As a non-java selenium user, here is the <strong>python</strong> equivalent to Margus's answer:</p>\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.desired_capabilities import DesiredCapabilities    \n\nclass ChromeConsoleLogging(object):\n\n    def __init__(self, ):\n        self.driver = None\n\n    def setUp(self, ):\n        desired = DesiredCapabilities.CHROME\n        desired ['loggingPrefs'] = { 'browser':'ALL' }\n        self.driver = webdriver.Chrome(desired_capabilities=desired)\n\n    def analyzeLog(self, ):\n        data = self.driver.get_log('browser')\n        print(data)\n\n    def testMethod(self, ):\n        self.setUp()\n        self.driver.get(&quot;http://mypage.com&quot;)\n        self.analyzeLog()\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/20907180/getting-console-log-output-from-chrome-with-selenium-python-api-bindings\">Reference</a></p>\n<p>Edit: Keeping Python answer in this thread because it is very similar to the Java answer and this post is returned on a Google search for the similar Python question</p>\n"},{"tags":[],"owner":{"account_id":2611412,"reputation":2032,"user_id":2261442,"accept_rate":86,"display_name":"phk"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1548747828,"creation_date":1548747828,"answer_id":54416080,"question_id":25431380,"body_markdown":"Starting with Firefox 65 an `about:config` flag exists now so console API calls like `console.log()` land in the output stream and thus the log file (see (https://github.com/mozilla/geckodriver/issues/284#issuecomment-458305621).\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    profile = new FirefoxProfile();\r\n    profile.setPreference(&quot;devtools.console.stdout.content&quot;, true);","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Starting with Firefox 65 an <code>about:config</code> flag exists now so console API calls like <code>console.log()</code> land in the output stream and thus the log file (see (<a href=\"https://github.com/mozilla/geckodriver/issues/284#issuecomment-458305621\" rel=\"nofollow noreferrer\">https://github.com/mozilla/geckodriver/issues/284#issuecomment-458305621</a>).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>profile = new FirefoxProfile();\nprofile.setPreference(\"devtools.console.stdout.content\", true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3599900,"reputation":497,"user_id":3003424,"accept_rate":60,"display_name":"Shiv"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1583687041,"creation_date":1583687041,"answer_id":60589897,"question_id":25431380,"body_markdown":"Driver manager logs can be used to get console logs from browser and it will help to identify errors appears in console.       \r\n\r\n       import org.openqa.selenium.logging.LogEntries;\r\n       import org.openqa.selenium.logging.LogEntry;\r\n        \r\n        public List&lt;LogEntry&gt; getBrowserConsoleLogs()\r\n        {\r\n        LogEntries log= driver.manage().logs().get(&quot;browser&quot;)\r\n        List&lt;LogEntry&gt; logs=log.getAll();\r\n        return logs;\r\n        }","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Driver manager logs can be used to get console logs from browser and it will help to identify errors appears in console.       </p>\n\n<pre><code>   import org.openqa.selenium.logging.LogEntries;\n   import org.openqa.selenium.logging.LogEntry;\n\n    public List&lt;LogEntry&gt; getBrowserConsoleLogs()\n    {\n    LogEntries log= driver.manage().logs().get(\"browser\")\n    List&lt;LogEntry&gt; logs=log.getAll();\n    return logs;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3044838,"reputation":1061,"user_id":2580805,"display_name":"DerWOK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587487945,"creation_date":1587487945,"answer_id":61348813,"question_id":25431380,"body_markdown":"Before launching webdriver, we just set this environment variable to let chrome generate it:\r\n```\r\nexport CHROME_LOG_FILE=$(pwd)/tests/e2e2/logs/client.log\r\n```\r\n","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Before launching webdriver, we just set this environment variable to let chrome generate it:</p>\n\n<pre><code>export CHROME_LOG_FILE=$(pwd)/tests/e2e2/logs/client.log\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10988746,"reputation":181,"user_id":8073485,"display_name":"TechRookie"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1591891791,"creation_date":1591891791,"answer_id":62328658,"question_id":25431380,"body_markdown":"Adding LoggingPreferences to &quot;goog:loggingPrefs&quot; properties with the Chrome Driver options can help to fetch the Browser console logs for all Log levels. \r\n\r\n```\r\nChromeOptions options = new ChromeOptions();\t\r\nLoggingPreferences logPrefs = new LoggingPreferences();\r\nlogPrefs.enable(LogType.BROWSER, Level.ALL);\r\noptions.setCapability(&quot;goog:loggingPrefs&quot;, logPrefs);\r\nWebDriver driver = new ChromeDriver(options);\r\n```\r\n","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Adding LoggingPreferences to \"goog:loggingPrefs\" properties with the Chrome Driver options can help to fetch the Browser console logs for all Log levels. </p>\n\n<pre><code>ChromeOptions options = new ChromeOptions();    \nLoggingPreferences logPrefs = new LoggingPreferences();\nlogPrefs.enable(LogType.BROWSER, Level.ALL);\noptions.setCapability(\"goog:loggingPrefs\", logPrefs);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11961012,"reputation":7343,"user_id":8752062,"display_name":"frianH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592214704,"creation_date":1592214704,"answer_id":62385646,"question_id":25431380,"body_markdown":"Add cast `RemoteWebDriver` to `driver` initialize and you will have the **`.setLogLevel`** method:\r\n```\r\nimport java.util.logging.Level;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.remote.RemoteWebDriver;\r\n\r\npublic class PrintLogTest {\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/.../chromedriver&quot;);\r\n\t\tWebDriver driver = new ChromeDriver();\r\n\t\t\r\n\t\t//here\r\n\t\t((RemoteWebDriver) driver).setLogLevel(Level.INFO);\r\n\t\t\r\n\t\tdriver.get(&quot;https://google.com/&quot;);\r\n\t\tdriver.findElement(By.name(&quot;q&quot;)).sendKeys(&quot;automation test&quot;);\r\n\t\tdriver.quit();\r\n\t}\r\n}\r\n```\r\nExample output:\r\n```\r\nJun 15, 2020 4:27:04 PM org.openqa.selenium.remote.RemoteWebDriver log\r\nINFO: Executing: get [430aec21a9beb6340a4185c4ea6a693d, get {url=https://google.com/}]\r\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\r\nINFO: Executed: [430aec21a9beb6340a4185c4ea6a693d, get {url=https://google.com/}]\r\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\r\nINFO: Executing: findElement [430aec21a9beb6340a4185c4ea6a693d, findElement {using=name, value=q}]\r\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\r\nINFO: Executed: [430aec21a9beb6340a4185c4ea6a693d, findElement {using=name, value=q}]\r\n...\r\n...\r\n```\r\nAt least I&#39;ve tried it on `ChromeDriver()` and `FirefoxDriver()` and it working fine.","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Add cast <code>RemoteWebDriver</code> to <code>driver</code> initialize and you will have the <strong><code>.setLogLevel</code></strong> method:</p>\n\n<pre><code>import java.util.logging.Level;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.remote.RemoteWebDriver;\n\npublic class PrintLogTest {\n    public static void main(String[] args) {\n        System.setProperty(\"webdriver.chrome.driver\", \"/Users/.../chromedriver\");\n        WebDriver driver = new ChromeDriver();\n\n        //here\n        ((RemoteWebDriver) driver).setLogLevel(Level.INFO);\n\n        driver.get(\"https://google.com/\");\n        driver.findElement(By.name(\"q\")).sendKeys(\"automation test\");\n        driver.quit();\n    }\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>Jun 15, 2020 4:27:04 PM org.openqa.selenium.remote.RemoteWebDriver log\nINFO: Executing: get [430aec21a9beb6340a4185c4ea6a693d, get {url=https://google.com/}]\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\nINFO: Executed: [430aec21a9beb6340a4185c4ea6a693d, get {url=https://google.com/}]\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\nINFO: Executing: findElement [430aec21a9beb6340a4185c4ea6a693d, findElement {using=name, value=q}]\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\nINFO: Executed: [430aec21a9beb6340a4185c4ea6a693d, findElement {using=name, value=q}]\n...\n...\n</code></pre>\n\n<p>At least I've tried it on <code>ChromeDriver()</code> and <code>FirefoxDriver()</code> and it working fine.</p>\n"},{"tags":[],"owner":{"account_id":481460,"reputation":1776,"user_id":895309,"accept_rate":85,"display_name":"Sean Glover"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682293386,"creation_date":1682293386,"answer_id":76087785,"question_id":25431380,"body_markdown":"Browser and performance logging only captures whatever is logged to the console and connection metadata in Chrome (at least, at the time of this writing). To actually get the contents of a fetch request I found some JS ([source][1]) to intercept all fetch requests and log the contents to the console which I could then access in browser logs. Total overkill, but hey it works.\r\n\r\n```javascript\r\nconst { fetch: originalFetch } = window;\r\nwindow.fetch = async (...args) =&gt; {\r\n  let [resource, config] = args;\r\n\r\n  let response = await originalFetch(resource, config);\r\n\r\n  response\r\n    .clone()\r\n    .json()\r\n    .then((data) =&gt; console.log(&quot;fetch response:&quot; + JSON.stringify(data)));\r\n\r\n  return response;\r\n};\r\n```\r\n\r\nMinified\r\n\r\n```javascript\r\nconst{fetch:originalFetch}=window;window.fetch=async(...n)=&gt;{let[t,e]=n,o=await originalFetch(t,e);return o.clone().json().then((n=&gt;console.log(&quot;fetch :&quot;+JSON.stringify(n)))),o};\r\n```\r\n\r\nUsage snippet (Scala)\r\n\r\n```scala\r\ndriver.executeScript(&quot;&quot;&quot;const{fetch:originalFetch}=window;window.fetch=async(...n)=&gt;{let[e,o]=n,t=await originalFetch(e,o);return t.clone().json().then((n=&gt;console.log(&quot;fetch response:&quot;+JSON.stringify(n)))),t};&quot;&quot;&quot;)\r\n\r\n// action that triggers the fetch\r\n\r\nval logEntry = driver.manage().logs().get(&quot;browser&quot;).iterator().asScala.filter(_.getMessage.contains(&quot;fetch response:&quot;)).toList\r\n```\r\n\r\n\r\n  [1]: https://blog.logrocket.com/intercepting-javascript-fetch-api-requests-responses/","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Browser and performance logging only captures whatever is logged to the console and connection metadata in Chrome (at least, at the time of this writing). To actually get the contents of a fetch request I found some JS (<a href=\"https://blog.logrocket.com/intercepting-javascript-fetch-api-requests-responses/\" rel=\"nofollow noreferrer\">source</a>) to intercept all fetch requests and log the contents to the console which I could then access in browser logs. Total overkill, but hey it works.</p>\n<pre class=\"lang-js prettyprint-override\"><code>const { fetch: originalFetch } = window;\nwindow.fetch = async (...args) =&gt; {\n  let [resource, config] = args;\n\n  let response = await originalFetch(resource, config);\n\n  response\n    .clone()\n    .json()\n    .then((data) =&gt; console.log(&quot;fetch response:&quot; + JSON.stringify(data)));\n\n  return response;\n};\n</code></pre>\n<p>Minified</p>\n<pre class=\"lang-js prettyprint-override\"><code>const{fetch:originalFetch}=window;window.fetch=async(...n)=&gt;{let[t,e]=n,o=await originalFetch(t,e);return o.clone().json().then((n=&gt;console.log(&quot;fetch :&quot;+JSON.stringify(n)))),o};\n</code></pre>\n<p>Usage snippet (Scala)</p>\n<pre class=\"lang-scala prettyprint-override\"><code>driver.executeScript(&quot;&quot;&quot;const{fetch:originalFetch}=window;window.fetch=async(...n)=&gt;{let[e,o]=n,t=await originalFetch(e,o);return t.clone().json().then((n=&gt;console.log(&quot;fetch response:&quot;+JSON.stringify(n)))),t};&quot;&quot;&quot;)\n\n// action that triggers the fetch\n\nval logEntry = driver.manage().logs().get(&quot;browser&quot;).iterator().asScala.filter(_.getMessage.contains(&quot;fetch response:&quot;)).toList\n</code></pre>\n"}],"owner":{"account_id":3926033,"reputation":1131,"user_id":3246489,"accept_rate":78,"display_name":"user3246489"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151165,"favorite_count":0,"down_vote_count":0,"up_vote_count":79,"accepted_answer_id":25431419,"answer_count":10,"score":79,"last_activity_date":1682293386,"creation_date":1408638635,"question_id":25431380,"body_markdown":"Is there a way to capture browser logs while running automated test cases with Selenium? I found an article on [how to capture JavaScript errors in Selenium][1]. But that is just for Firefox and only for errors. I would like to get all the console logs.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20130719045503/http://selenium.polteq.com/en/capturing-javascript-errors-with-selenium-webdriver/","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Is there a way to capture browser logs while running automated test cases with Selenium? I found an article on <a href=\"https://web.archive.org/web/20130719045503/http://selenium.polteq.com/en/capturing-javascript-errors-with-selenium-webdriver/\" rel=\"noreferrer\">how to capture JavaScript errors in Selenium</a>. But that is just for Firefox and only for errors. I would like to get all the console logs.</p>\n"},{"tags":["java","visual-studio-code","error-handling","compilation","vscode-code-runner"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1682267906,"post_id":76086044,"comment_id":134184855,"body_markdown":"Looks like the name of the file is not Main.java. With uppercase M.","body":"Looks like the name of the file is not Main.java. With uppercase M."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1682268331,"post_id":76086044,"comment_id":134184899,"body_markdown":"looks more like it is `tempCodeRunnerFile.java` from the error message `tempCodeRunnerFile.java:5: error: class Main is public, ...`","body":"looks more like it is <code>tempCodeRunnerFile.java</code> from the error message <code>tempCodeRunnerFile.java:5: error: class Main is public, ...</code>"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1682268903,"post_id":76086044,"comment_id":134184972,"body_markdown":"Does this answer your question? [How to avoid tempCodeRunnerFile.go appear in the project](https://stackoverflow.com/questions/63097653/how-to-avoid-tempcoderunnerfile-go-appear-in-the-project)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/63097653/how-to-avoid-tempcoderunnerfile-go-appear-in-the-project\">How to avoid tempCodeRunnerFile.go appear in the project</a>"},{"owner":{"account_id":15396644,"reputation":25745,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1682292428,"post_id":76086044,"comment_id":134187878,"body_markdown":"I disagree with [the proposed dup target](/q/63097653). I&#39;ve edited the question to be more clear about what the problem is, and you can see my answer, which should also indicate that the proposed dup target is incorrect.","body":"I disagree with <a href=\"/q/63097653\">the proposed dup target</a>. I&#39;ve edited the question to be more clear about what the problem is, and you can see my answer, which should also indicate that the proposed dup target is incorrect."}],"answers":[{"tags":[],"owner":{"account_id":15396644,"reputation":25745,"user_id":11107541,"display_name":"starball"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682292367,"creation_date":1682292061,"answer_id":76087721,"question_id":76086044,"body_markdown":"It appears that you&#39;re running a selected code snippet. If you want to do that with the Code Runner extension, you&#39;ll need to adjust the `code-runner.temporaryFileName` setting to the name of your main class.\r\n\r\nThe setting&#39;s description:\r\n\r\n&gt; Temporary file name used in running selected code snippet. When it is set as empty, the file name will be random.\r\n\r\nTry editing your [workspace `.vscode/settings.json` file](https://code.visualstudio.com/docs/getstarted/settings#_settingsjson) to include the following:\r\n\r\n```json\r\n&quot;code-runner.temporaryFileName&quot;: &quot;Main&quot;\r\n```\r\n\r\nSee also [the configuration docs for the Code Runner extension](https://github.com/formulahendry/vscode-code-runner/blob/master/README.md#configuration).\r\n\r\nIf you don&#39;t want to run the selected snippet, then make sure you don&#39;t have any selected text when invoking Code Runner- either that, or put `&quot;code-runner.ignoreSelection&quot;: true` in your settings.json.","title":"Why is Code runner renaming my file to &quot;tempCodeRunnerFile.java&quot;? (causing &quot;error: class X is public, should be declared in a file named X.java&quot;)","body":"<p>It appears that you're running a selected code snippet. If you want to do that with the Code Runner extension, you'll need to adjust the <code>code-runner.temporaryFileName</code> setting to the name of your main class.</p>\n<p>The setting's description:</p>\n<blockquote>\n<p>Temporary file name used in running selected code snippet. When it is set as empty, the file name will be random.</p>\n</blockquote>\n<p>Try editing your <a href=\"https://code.visualstudio.com/docs/getstarted/settings#_settingsjson\" rel=\"nofollow noreferrer\">workspace <code>.vscode/settings.json</code> file</a> to include the following:</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;code-runner.temporaryFileName&quot;: &quot;Main&quot;\n</code></pre>\n<p>See also <a href=\"https://github.com/formulahendry/vscode-code-runner/blob/master/README.md#configuration\" rel=\"nofollow noreferrer\">the configuration docs for the Code Runner extension</a>.</p>\n<p>If you don't want to run the selected snippet, then make sure you don't have any selected text when invoking Code Runner- either that, or put <code>&quot;code-runner.ignoreSelection&quot;: true</code> in your settings.json.</p>\n"}],"owner":{"account_id":23874614,"reputation":11,"user_id":17875908,"display_name":"VuciuS"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682292367,"creation_date":1682267793,"question_id":76086044,"body_markdown":"I have some problems with Visual Studio Code. I am using the Code Runner extension and Java for Multithreading and Multiprocessing training... but VS Code won&#39;t run my code.\r\n\r\nImportant: The name of the file is **Main.java** , the same of the **public class Main**\r\n\r\n    import java.util.*;\r\n    \r\n    \r\n    public class Main{\r\n        public static void main(String [] args) {\r\n            PrintThread t = new PrintThread(&quot;thread1&quot;);\r\n            t.start();\r\n        }\r\n    }\r\n    \r\n    class PrintThread extends Thread {\r\n        private int sleepTime;\r\n    \r\n        public PrintThread(String name) {\r\n            super(name);\r\n            sleepTime = (int) (Math.random() * 5001);\r\n        }\r\n    \r\n        public void run() {\r\n            try {\r\n                System.err.println(getName() + &quot; going to sleep for &quot; + sleepTime + &quot;.&quot;);\r\n                Thread.sleep(sleepTime);\r\n            } catch(InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            System.err.println(getName() + &quot; done sleeping.&quot;);\r\n        }\r\n    }\r\n\r\n\r\nThis is the output:\r\n\r\n&gt; ```none\r\n&gt; tempCodeRunnerFile.java:5: error: class Main is public, should be\r\n&gt; declared in a file named Main.java public class Main{\r\n&gt;        ^ 1 error\r\n&gt; ```\r\n\r\nI tried to change different names of file and public class (same name) but it doesn&#39;t work...","title":"Why is Code runner renaming my file to &quot;tempCodeRunnerFile.java&quot;? (causing &quot;error: class X is public, should be declared in a file named X.java&quot;)","body":"<p>I have some problems with Visual Studio Code. I am using the Code Runner extension and Java for Multithreading and Multiprocessing training... but VS Code won't run my code.</p>\n<p>Important: The name of the file is <strong>Main.java</strong> , the same of the <strong>public class Main</strong></p>\n<pre><code>import java.util.*;\n\n\npublic class Main{\n    public static void main(String [] args) {\n        PrintThread t = new PrintThread(&quot;thread1&quot;);\n        t.start();\n    }\n}\n\nclass PrintThread extends Thread {\n    private int sleepTime;\n\n    public PrintThread(String name) {\n        super(name);\n        sleepTime = (int) (Math.random() * 5001);\n    }\n\n    public void run() {\n        try {\n            System.err.println(getName() + &quot; going to sleep for &quot; + sleepTime + &quot;.&quot;);\n            Thread.sleep(sleepTime);\n        } catch(InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        System.err.println(getName() + &quot; done sleeping.&quot;);\n    }\n}\n</code></pre>\n<p>This is the output:</p>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>tempCodeRunnerFile.java:5: error: class Main is public, should be\ndeclared in a file named Main.java public class Main{\n       ^ 1 error\n</code></pre>\n</blockquote>\n<p>I tried to change different names of file and public class (same name) but it doesn't work...</p>\n"},{"tags":["java","overflow","long-integer","memoization"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1682295205,"post_id":76087717,"comment_id":134188102,"body_markdown":"Java integer arithmetic wraps around instead of throwing an overflow exception. If you need to detect overflow, use the `~Exact` methods in the [Math API](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Math.html) .","body":"Java integer arithmetic wraps around instead of throwing an overflow exception. If you need to detect overflow, use the <code>~Exact</code> methods in the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Math.html\" rel=\"nofollow noreferrer\">Math API</a> ."},{"owner":{"account_id":14587108,"reputation":155,"user_id":10535520,"display_name":"Stone"},"score":1,"creation_date":1682296187,"post_id":76087717,"comment_id":134188182,"body_markdown":"Did you compile and run your code successfully?  `cache = new long[n + one][n + one];`, for this one, it looks impossible. In Java, array max size only could be Integer.\n\nPlease check your codes and make it run.","body":"Did you compile and run your code successfully?  <code>cache = new long[n + one][n + one];</code>, for this one, it looks impossible. In Java, array max size only could be Integer.  Please check your codes and make it run."},{"owner":{"account_id":11288679,"reputation":923,"user_id":8278630,"display_name":"Farkhod Abdukodirov"},"score":0,"creation_date":1682300861,"post_id":76087717,"comment_id":134188559,"body_markdown":"You said your code is outputting negative values as a result! But tried your exact source code in my Desktop IDE, and got the following error message:\n\n`java: incompatible types: possible lossy conversion from long to int`","body":"You said your code is outputting negative values as a result! But tried your exact source code in my Desktop IDE, and got the following error message:  <code>java: incompatible types: possible lossy conversion from long to int</code>"}],"owner":{"account_id":28391812,"reputation":1,"user_id":21717467,"display_name":"a2s4342"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682291965,"creation_date":1682291965,"question_id":76087717,"body_markdown":"I am trying to use memoization to identify when overflow occurs: But the error is not being thrown (the Runtimeexception) so is still just outputting negative values as the result \r\n```\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class combinations {\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in); //scanner to take user input for n and k\r\n        while(sc.hasNextLine()){\r\n            String[] input = sc.nextLine().split(&quot; &quot;); //takes the input line and separate it into the 2 numbers\r\n            long n, k, one;\r\n            one= 1;\r\n            long[][] cache; //for bigger numbers that will lead to overflow\r\n            if(input.length==2){ //assigns the input to variables n and k \r\n                try {\r\n                    n = Long.parseLong(input[0]);\r\n                    k = Long.parseLong(input[1]);\r\n                    cache = new long[n + one][n + one];\r\n                    \r\n                } catch (Exception e) {\r\n                    // exception allowed if the input is invalid, scanner remains open so they can try again \r\n                }  \r\n\r\n                try{\r\n                    System.out.println(binomialCoefficient(n, k, cache)); //calls function to compute the answer\r\n                } catch (Exception e) {\r\n                    System.out.println(e.getMessage());\r\n                }\r\n            }\r\n        \r\n        }\r\n        sc.close();\r\n    }\r\n\r\n    //This method computes the mathematical equation\r\n    public static long binomialCoefficient(long n, long k, long[][] cache) {  \r\n        if (k == 0 || k == n) {\r\n            return cache[n][k] = 1;\r\n        } else if (cache[n][k] != 0) {\r\n            return cache[n][k];\r\n        } else {\r\n            cache[n][k] = binomialCoefficient(n-1, k-1, cache) + binomialCoefficient(n-1, k, cache);\r\n            if (cache[n][k] &lt; 0) {\r\n                System.out.println(&quot;error is caught&quot;);\r\n                throw new RuntimeException(&quot;Overflow occured&quot;);\r\n            }\r\n            return cache[n][k];\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nError message not outputting","title":"How to identify overflow error with long?","body":"<p>I am trying to use memoization to identify when overflow occurs: But the error is not being thrown (the Runtimeexception) so is still just outputting negative values as the result</p>\n<pre><code>\nimport java.util.Scanner;\n\npublic class combinations {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in); //scanner to take user input for n and k\n        while(sc.hasNextLine()){\n            String[] input = sc.nextLine().split(&quot; &quot;); //takes the input line and separate it into the 2 numbers\n            long n, k, one;\n            one= 1;\n            long[][] cache; //for bigger numbers that will lead to overflow\n            if(input.length==2){ //assigns the input to variables n and k \n                try {\n                    n = Long.parseLong(input[0]);\n                    k = Long.parseLong(input[1]);\n                    cache = new long[n + one][n + one];\n                    \n                } catch (Exception e) {\n                    // exception allowed if the input is invalid, scanner remains open so they can try again \n                }  \n\n                try{\n                    System.out.println(binomialCoefficient(n, k, cache)); //calls function to compute the answer\n                } catch (Exception e) {\n                    System.out.println(e.getMessage());\n                }\n            }\n        \n        }\n        sc.close();\n    }\n\n    //This method computes the mathematical equation\n    public static long binomialCoefficient(long n, long k, long[][] cache) {  \n        if (k == 0 || k == n) {\n            return cache[n][k] = 1;\n        } else if (cache[n][k] != 0) {\n            return cache[n][k];\n        } else {\n            cache[n][k] = binomialCoefficient(n-1, k-1, cache) + binomialCoefficient(n-1, k, cache);\n            if (cache[n][k] &lt; 0) {\n                System.out.println(&quot;error is caught&quot;);\n                throw new RuntimeException(&quot;Overflow occured&quot;);\n            }\n            return cache[n][k];\n        }\n\n    }\n\n\n}\n</code></pre>\n<p>Error message not outputting</p>\n"},{"tags":["java","spring","spring-boot","gradle"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1682317992,"post_id":76087660,"comment_id":134190130,"body_markdown":"I doubt the plugins for Spring Boot 2.6 are compatible with Gradle 8. Downgrade gradle.","body":"I doubt the plugins for Spring Boot 2.6 are compatible with Gradle 8. Downgrade gradle."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1682323313,"post_id":76087660,"comment_id":134191037,"body_markdown":"Oh... thats interesting. In IntelliJ and my gradles.properties file I told gradle to be on version 6.8 I will investigate that!","body":"Oh... thats interesting. In IntelliJ and my gradles.properties file I told gradle to be on version 6.8 I will investigate that!"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1682323438,"post_id":76087660,"comment_id":134191060,"body_markdown":"Well unless you are using the wrapper (`gradlew` instead of `gradle`) that is going to be ignored.","body":"Well unless you are using the wrapper (<code>gradlew</code> instead of <code>gradle</code>) that is going to be ignored."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1682324494,"post_id":76087660,"comment_id":134191295,"body_markdown":"I changed the distribution url in the gradle-wrapper.properties to math the 6.8 url: `distributionUrl=https\\://services.gradle.org/distributions/gradle-6.8-bin.zip`. Also the settings in intellij say &quot;use gradle from gradle-wrapper.properties&quot;. Therefore I thought that this was fitting, but apparently it wasnt...","body":"I changed the distribution url in the gradle-wrapper.properties to math the 6.8 url: <code>distributionUrl=https\\:&#47;&#47;services.gradle.org&#47;distributions&#47;g&zwnj;&#8203;radle-6.8-bin.zip</code>. Also the settings in intellij say &quot;use gradle from gradle-wrapper.properties&quot;. Therefore I thought that this was fitting, but apparently it wasnt..."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1682325561,"post_id":76087660,"comment_id":134191513,"body_markdown":"Executing gradlew :data-service:bootBuildImage does not throw this error, but at least proceeds to compiling and then working on the image. So this is definitely an IDE problem","body":"Executing gradlew :data-service:bootBuildImage does not throw this error, but at least proceeds to compiling and then working on the image. So this is definitely an IDE problem"},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1682329917,"post_id":76087660,"comment_id":134192458,"body_markdown":"Due to a problem with the gradle sync with my IDE it did not update the settings so it would take the downgraded gradle. I updated my IDE, therefore basically reinstalling which fixed the problem on the spot. After all, the version was just too new, so that solved my problem. Much love &lt;3","body":"Due to a problem with the gradle sync with my IDE it did not update the settings so it would take the downgraded gradle. I updated my IDE, therefore basically reinstalling which fixed the problem on the spot. After all, the version was just too new, so that solved my problem. Much love &lt;3"}],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":375,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682290749,"creation_date":1682290749,"question_id":76087660,"body_markdown":"I am currently developing a multi module project. I basically have, very oversimplified, a backend and a frontend app. Both use Spring Boot 2.6.1 with Java 11. I use gradle 6.8\r\n\r\nI am currently trying to figure out how to get two images to build with the bootBuildImage tasks of the two modules. I figured it was a good starting point to get the projects to build their image separately, before building both of them at the same time. However, this does not seem to work.\r\n\r\nThis is my project setup:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI currently want to build the data-service image. This is its&#39; build.gradle.kts:\r\n\r\n```\r\nplugins {\r\n    java\r\n    id(&quot;org.springframework.boot&quot;) version &quot;2.6.1&quot;\r\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\r\n    id(&quot;net.linguica.maven-settings&quot;) version &quot;0.5&quot;\r\n}\r\n\r\ngroup = rootProject.group\r\nversion = rootProject.version\r\njava.sourceCompatibility = JavaVersion.VERSION_11\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom(configurations.annotationProcessor.get())\r\n    }\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    maven {\r\n        name = &quot;gg-repo&quot;\r\n        setUrl(&quot;CENSORED&quot;)\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation(project(&quot;:shared&quot;))\r\n\r\n\r\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.14.2&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n\r\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\r\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\r\n\r\n\r\n    implementation(&quot;mysql:mysql-connector-java&quot;)\r\n    runtimeOnly(&quot;org.postgresql:postgresql&quot;)\r\n\r\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test:2.6.1&quot;)\r\n}\r\n\r\ntasks.withType&lt;Test&gt; {\r\n    useJUnitPlatform()\r\n}\r\n\r\n\r\n```\r\n\r\nAnd this is the error I get.\r\n\r\n```\r\n\r\n&gt; Task :shared:compileJava UP-TO-DATE\r\n&gt; Task :shared:processResources NO-SOURCE\r\n&gt; Task :shared:classes UP-TO-DATE\r\n&gt; Task :shared:jar UP-TO-DATE\r\n&gt; Task :data-service:compileJava UP-TO-DATE\r\n&gt; Task :data-service:processResources UP-TO-DATE\r\n&gt; Task :data-service:classes UP-TO-DATE\r\n&gt; Task :data-service:bootJarMainClassName UP-TO-DATE\r\n&gt; Task :data-service:bootJar UP-TO-DATE\r\n6 actionable tasks: 6 up-to-date\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nSome problems were found with the configuration of task &#39;:data-service:bootBuildImage&#39; (type &#39;BootBuildImage&#39;).\r\n  - In plugin &#39;org.springframework.boot&#39; type &#39;org.springframework.boot.gradle.tasks.bundling.BootBuildImage&#39; property &#39;archiveFile&#39; has @Input annotation used on property of type &#39;RegularFileProperty&#39;.\r\n    \r\n    Reason: A property of type &#39;RegularFileProperty&#39; annotated with @Input cannot determine how to interpret the file.\r\n    \r\n    Possible solutions:\r\n      1. Annotate with @InputFile for regular files.\r\n      2. Annotate with @InputFiles for collections of files.\r\n      3. If you want to track the path, return File.absolutePath as a String and keep @Input.\r\n    \r\n    Please refer to https://docs.gradle.org/8.0/userguide/validation_problems.html#incorrect_use_of_input_annotation for more details about this problem.\r\n  - In plugin &#39;org.springframework.boot&#39; type &#39;org.springframework.boot.gradle.tasks.bundling.BootBuildImage&#39; property &#39;jar&#39; has @Input annotation used on property of type &#39;RegularFileProperty&#39;.\r\n    \r\n    Reason: A property of type &#39;RegularFileProperty&#39; annotated with @Input cannot determine how to interpret the file.\r\n    \r\n    Possible solutions:\r\n      1. Annotate with @InputFile for regular files.\r\n      2. Annotate with @InputFiles for collections of files.\r\n      3. If you want to track the path, return File.absolutePath as a String and keep @Input.\r\n    \r\n    Please refer to https://docs.gradle.org/8.0/userguide/validation_problems.html#incorrect_use_of_input_annotation for more details about this problem.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 2s\r\n00:51:37: Task execution finished &#39;bootBuildImage&#39;.\r\n```\r\n\r\nI cannot find anything about this error online, so I hope you excuse the overly general title. As far as I understand the error it does not know in which file to store the image in? What is going on here?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SMQaf.png","title":"bootBuildImage fails with two spring modules in my gradle project","body":"<p>I am currently developing a multi module project. I basically have, very oversimplified, a backend and a frontend app. Both use Spring Boot 2.6.1 with Java 11. I use gradle 6.8</p>\n<p>I am currently trying to figure out how to get two images to build with the bootBuildImage tasks of the two modules. I figured it was a good starting point to get the projects to build their image separately, before building both of them at the same time. However, this does not seem to work.</p>\n<p>This is my project setup:</p>\n<p><a href=\"https://i.stack.imgur.com/SMQaf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SMQaf.png\" alt=\"enter image description here\" /></a></p>\n<p>I currently want to build the data-service image. This is its' build.gradle.kts:</p>\n<pre><code>plugins {\n    java\n    id(&quot;org.springframework.boot&quot;) version &quot;2.6.1&quot;\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\n    id(&quot;net.linguica.maven-settings&quot;) version &quot;0.5&quot;\n}\n\ngroup = rootProject.group\nversion = rootProject.version\njava.sourceCompatibility = JavaVersion.VERSION_11\n\nconfigurations {\n    compileOnly {\n        extendsFrom(configurations.annotationProcessor.get())\n    }\n}\n\nrepositories {\n    mavenCentral()\n    maven {\n        name = &quot;gg-repo&quot;\n        setUrl(&quot;CENSORED&quot;)\n    }\n}\n\ndependencies {\n    implementation(project(&quot;:shared&quot;))\n\n\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.14.2&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\n\n\n    implementation(&quot;mysql:mysql-connector-java&quot;)\n    runtimeOnly(&quot;org.postgresql:postgresql&quot;)\n\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test:2.6.1&quot;)\n}\n\ntasks.withType&lt;Test&gt; {\n    useJUnitPlatform()\n}\n\n\n</code></pre>\n<p>And this is the error I get.</p>\n<pre><code>\n&gt; Task :shared:compileJava UP-TO-DATE\n&gt; Task :shared:processResources NO-SOURCE\n&gt; Task :shared:classes UP-TO-DATE\n&gt; Task :shared:jar UP-TO-DATE\n&gt; Task :data-service:compileJava UP-TO-DATE\n&gt; Task :data-service:processResources UP-TO-DATE\n&gt; Task :data-service:classes UP-TO-DATE\n&gt; Task :data-service:bootJarMainClassName UP-TO-DATE\n&gt; Task :data-service:bootJar UP-TO-DATE\n6 actionable tasks: 6 up-to-date\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nSome problems were found with the configuration of task ':data-service:bootBuildImage' (type 'BootBuildImage').\n  - In plugin 'org.springframework.boot' type 'org.springframework.boot.gradle.tasks.bundling.BootBuildImage' property 'archiveFile' has @Input annotation used on property of type 'RegularFileProperty'.\n    \n    Reason: A property of type 'RegularFileProperty' annotated with @Input cannot determine how to interpret the file.\n    \n    Possible solutions:\n      1. Annotate with @InputFile for regular files.\n      2. Annotate with @InputFiles for collections of files.\n      3. If you want to track the path, return File.absolutePath as a String and keep @Input.\n    \n    Please refer to https://docs.gradle.org/8.0/userguide/validation_problems.html#incorrect_use_of_input_annotation for more details about this problem.\n  - In plugin 'org.springframework.boot' type 'org.springframework.boot.gradle.tasks.bundling.BootBuildImage' property 'jar' has @Input annotation used on property of type 'RegularFileProperty'.\n    \n    Reason: A property of type 'RegularFileProperty' annotated with @Input cannot determine how to interpret the file.\n    \n    Possible solutions:\n      1. Annotate with @InputFile for regular files.\n      2. Annotate with @InputFiles for collections of files.\n      3. If you want to track the path, return File.absolutePath as a String and keep @Input.\n    \n    Please refer to https://docs.gradle.org/8.0/userguide/validation_problems.html#incorrect_use_of_input_annotation for more details about this problem.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 2s\n00:51:37: Task execution finished 'bootBuildImage'.\n</code></pre>\n<p>I cannot find anything about this error online, so I hope you excuse the overly general title. As far as I understand the error it does not know in which file to store the image in? What is going on here?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2262713,"reputation":2217,"user_id":1992342,"accept_rate":75,"display_name":"mike47"},"score":2,"creation_date":1573680706,"post_id":57700486,"comment_id":103965465,"body_markdown":"Possible duplicate of [After migration to AndroidX, exception at start up: java.lang.ClassNotFoundException: &quot;Didn&#39;t find class androidx.core.app.CoreComponentFactory&quot;](https://stackoverflow.com/questions/56252142/after-migration-to-androidx-exception-at-start-up-java-lang-classnotfoundexcep)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/56252142/after-migration-to-androidx-exception-at-start-up-java-lang-classnotfoundexcep\">After migration to AndroidX, exception at start up: java.lang.ClassNotFoundException: &quot;Didn&#39;t find class androidx.core.app.CoreComponentFactory&quot;</a>"},{"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1590651282,"post_id":57700486,"comment_id":109760866,"body_markdown":"Probably it happened after upgrade of some libraries (added JUnit and updated Firebase), but after recompilation it disappeared.","body":"Probably it happened after upgrade of some libraries (added JUnit and updated Firebase), but after recompilation it disappeared."},{"owner":{"account_id":18605859,"reputation":21,"user_id":13559505,"display_name":"Abhimanyu Kumar Roy"},"score":0,"creation_date":1597643602,"post_id":57700486,"comment_id":112189231,"body_markdown":"A picture is worth of 1000 words---Here are the details solution works in my case maybe yours too-- [Before error](https://i.stack.imgur.com/vDEoZ.png) [After fix](https://i.stack.imgur.com/P7F0p.png)","body":"A picture is worth of 1000 words---Here are the details solution works in my case maybe yours too-- <a href=\"https://i.stack.imgur.com/vDEoZ.png\" rel=\"nofollow noreferrer\">Before error</a> <a href=\"https://i.stack.imgur.com/P7F0p.png\" rel=\"nofollow noreferrer\">After fix</a>"}],"answers":[{"tags":[],"owner":{"account_id":14027040,"reputation":45,"user_id":10131824,"display_name":"Mohammad Mahdi Heidari"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1567029906,"creation_date":1567029906,"answer_id":57700593,"question_id":57700486,"body_markdown":"add below code to ```gradle.properties```\r\n\r\n```\r\nandroid.enableJetifier=true\r\nandroid.useAndroidX=true\r\n```\r\n\r\nor you can choose migrate to androidX in refactor -&gt; Migrate to androidX.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>add below code to <code>gradle.properties</code></p>\n\n<pre><code>android.enableJetifier=true\nandroid.useAndroidX=true\n</code></pre>\n\n<p>or you can choose migrate to androidX in refactor -> Migrate to androidX.</p>\n"},{"tags":[],"owner":{"account_id":16257179,"reputation":683,"user_id":11739552,"display_name":"HeshanHH"},"down_vote_count":7,"up_vote_count":0,"is_accepted":false,"score":-7,"last_activity_date":1569079695,"creation_date":1569079695,"answer_id":58041658,"question_id":57700486,"body_markdown":"\r\ndid u create fragments?\r\nok if you create fragments with classes and after that you have to create a class to call those fragments.  and if you use switch this cane be like this\r\n\r\n`public Fragment getItem(int i) {\r\n\r\n        // you have create a switch to get positions using i.\r\n        switch (i) {\r\n            case 0:\r\n                ChatsFragment chatsFragment = new ChatsFragment();\r\n                return chatsFragment;\r\n\r\n            case 1:\r\n                GroupsFragment groupsFragment = new GroupsFragment();\r\n                return groupsFragment;\r\n\r\n            case 2:\r\n                ContactsFragment contactsFragment = new ContactsFragment();\r\n                return contactsFragment;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getCount() {\r\n        return 3;//error can be happen if u use default 0, use fragment counts in here.\r\n    }`\r\n\r\nin this case you can see 3 cases in **switch**\r\nand the **public int getCount()** the return value should be **3**  *not default value 0*.\r\n\r\n\r\nSee your error must be close to this one. i got same kind of error and i solved it.\r\n ","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>did u create fragments?\nok if you create fragments with classes and after that you have to create a class to call those fragments.  and if you use switch this cane be like this</p>\n\n<p>`public Fragment getItem(int i) {</p>\n\n<pre><code>    // you have create a switch to get positions using i.\n    switch (i) {\n        case 0:\n            ChatsFragment chatsFragment = new ChatsFragment();\n            return chatsFragment;\n\n        case 1:\n            GroupsFragment groupsFragment = new GroupsFragment();\n            return groupsFragment;\n\n        case 2:\n            ContactsFragment contactsFragment = new ContactsFragment();\n            return contactsFragment;\n        default:\n            return null;\n    }\n\n}\n\n@Override\npublic int getCount() {\n    return 3;//error can be happen if u use default 0, use fragment counts in here.\n}`\n</code></pre>\n\n<p>in this case you can see 3 cases in <strong>switch</strong>\nand the <strong>public int getCount()</strong> the return value should be <strong>3</strong>  <em>not default value 0</em>.</p>\n\n<p>See your error must be close to this one. i got same kind of error and i solved it.</p>\n"},{"tags":[],"owner":{"account_id":15244208,"reputation":166,"user_id":10999505,"display_name":"Zima"},"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1569770666,"creation_date":1569770666,"answer_id":58156619,"question_id":57700486,"body_markdown":"In my case ,that was because of a little mistake in one of my layouts.\r\n\r\nI removed one `&gt;` at the end of a view tag accidentlly.\r\n\r\nCheck your \r\n\r\n&gt; xml\r\n\r\nfiles.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>In my case ,that was because of a little mistake in one of my layouts.</p>\n\n<p>I removed one <code>&gt;</code> at the end of a view tag accidentlly.</p>\n\n<p>Check your </p>\n\n<blockquote>\n  <p>xml</p>\n</blockquote>\n\n<p>files.</p>\n"},{"tags":[],"owner":{"account_id":452040,"reputation":16752,"user_id":848253,"accept_rate":62,"display_name":"PerracoLabs"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1570029887,"creation_date":1570011017,"answer_id":58199483,"question_id":57700486,"body_markdown":"Seems to be a bug, check the next link in the issue tracker:\r\n\r\n[https://issuetracker.google.com/issues/137646829][1]\r\n\r\n\r\n  [1]: https://issuetracker.google.com/issues/137646829\r\n\r\n\r\n","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>Seems to be a bug, check the next link in the issue tracker:</p>\n\n<p><a href=\"https://issuetracker.google.com/issues/137646829\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/137646829</a></p>\n"},{"tags":[],"owner":{"account_id":2262713,"reputation":2217,"user_id":1992342,"accept_rate":75,"display_name":"mike47"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1575835264,"creation_date":1573601654,"answer_id":58828242,"question_id":57700486,"body_markdown":"&lt;s&gt;After reviewing the Android Issue Tracker bug report mentioned previously, I saw a mention about multidex support. I had no multidex flags specified in my project, so I tried setting the flag to `false` on all modules in my project, and the exception went away.&lt;/s&gt;\r\n\r\nThis was not a permanent solution; the problem returned a few builds later.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p><s>After reviewing the Android Issue Tracker bug report mentioned previously, I saw a mention about multidex support. I had no multidex flags specified in my project, so I tried setting the flag to <code>false</code> on all modules in my project, and the exception went away.</s></p>\n\n<p>This was not a permanent solution; the problem returned a few builds later.</p>\n"},{"tags":[],"owner":{"account_id":354056,"reputation":7193,"user_id":692167,"accept_rate":84,"display_name":"Tom"},"down_vote_count":3,"up_vote_count":46,"is_accepted":false,"score":43,"last_activity_date":1616776806,"creation_date":1576112731,"answer_id":59296304,"question_id":57700486,"body_markdown":"Adding Java 1.8 compatibility to my module-level `build.gradle` fixed this for me (non-release build with multidex enabled).\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &quot;1.8&quot;\r\n    }\r\n\r\nUnfortunately I&#39;m not sure why :)","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>Adding Java 1.8 compatibility to my module-level <code>build.gradle</code> fixed this for me (non-release build with multidex enabled).</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\nkotlinOptions {\n    jvmTarget = &quot;1.8&quot;\n}\n</code></pre>\n<p>Unfortunately I'm not sure why :)</p>\n"},{"tags":[],"owner":{"account_id":14159042,"reputation":416,"user_id":10228855,"display_name":"jack"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1577351148,"creation_date":1577351148,"answer_id":59486127,"question_id":57700486,"body_markdown":"In my case, add `android.enableR8=false` in the gradle.properties.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>In my case, add <code>android.enableR8=false</code> in the gradle.properties.</p>\n"},{"tags":[],"owner":{"account_id":2382250,"reputation":71,"user_id":2084029,"display_name":"Tomasz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1609272877,"creation_date":1585810038,"answer_id":60985688,"question_id":57700486,"body_markdown":"It may sound totally unrelated, but I have seen this problem also when by mistake I have overridden wrong on Activity#onCreate() method\r\ni.e.\r\n\r\n    public void onCreate(@Nullable Bundle savedInstanceState,\r\n            @Nullable PersistableBundle persistentState)\r\n\r\nInstead of\r\n\r\n    protected void onCreate(@Nullable Bundle savedInstanceState)\r\n\r\nSo, please check that also.\r\nThe second one is the one that you probably need.\r\n\r\nPlease refer to documentation for the details of these two methods.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>It may sound totally unrelated, but I have seen this problem also when by mistake I have overridden wrong on Activity#onCreate() method\ni.e.</p>\n<pre><code>public void onCreate(@Nullable Bundle savedInstanceState,\n        @Nullable PersistableBundle persistentState)\n</code></pre>\n<p>Instead of</p>\n<pre><code>protected void onCreate(@Nullable Bundle savedInstanceState)\n</code></pre>\n<p>So, please check that also.\nThe second one is the one that you probably need.</p>\n<p>Please refer to documentation for the details of these two methods.</p>\n"},{"tags":[],"owner":{"account_id":3163299,"reputation":587,"user_id":2673831,"display_name":"Aguragorn"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1586240366,"creation_date":1586240366,"answer_id":61073889,"question_id":57700486,"body_markdown":"In my case, the code works on one of my teammates&#39; machine. \r\nThese steps made it work for me too:\r\n\r\n 1. Close project\r\n 2. Remove the project from the list in the welcome screen\r\n 3. Open the project again\r\n\r\nThis is a solution to another problem, that I also found here in SO. It&#39;s worth a try when **Invalidate and Restart** doesn&#39;t solve it for you.\r\n\r\n ","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>In my case, the code works on one of my teammates' machine. \nThese steps made it work for me too:</p>\n\n<ol>\n<li>Close project</li>\n<li>Remove the project from the list in the welcome screen</li>\n<li>Open the project again</li>\n</ol>\n\n<p>This is a solution to another problem, that I also found here in SO. It's worth a try when <strong>Invalidate and Restart</strong> doesn't solve it for you.</p>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592390746,"creation_date":1592390746,"answer_id":62427183,"question_id":57700486,"body_markdown":"See https://stackoverflow.com/questions/57438312/java-lang-classnotfoundexception-didnt-find-class-com-my-app-name-androidx.\r\n\r\nRemove from `AndroidManifest`:\r\n\r\n    &lt;application\r\n        ...\r\n        android:appComponentFactory=&quot;androidx&quot;\r\n        tools:replace=&quot;android:appComponentFactory&quot;\r\n    &gt;\r\n\r\nThese lines appeared a year ago after migrating to AndroidX. I removed them, now it doesn&#39;t show the exception.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>See <a href=\"https://stackoverflow.com/questions/57438312/java-lang-classnotfoundexception-didnt-find-class-com-my-app-name-androidx\">java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.my_app_name.androidx&quot;</a>.</p>\n\n<p>Remove from <code>AndroidManifest</code>:</p>\n\n<pre><code>&lt;application\n    ...\n    android:appComponentFactory=\"androidx\"\n    tools:replace=\"android:appComponentFactory\"\n&gt;\n</code></pre>\n\n<p>These lines appeared a year ago after migrating to AndroidX. I removed them, now it doesn't show the exception.</p>\n"},{"tags":[],"owner":{"account_id":11125188,"reputation":33,"user_id":8166916,"display_name":"CosminPetrescu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1611173725,"creation_date":1611173725,"answer_id":65816972,"question_id":57700486,"body_markdown":"If you are using an emulator, try the wipe data option. This worked for me.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>If you are using an emulator, try the wipe data option. This worked for me.</p>\n"},{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1612114807,"creation_date":1612102186,"answer_id":65980047,"question_id":57700486,"body_markdown":"This error message is caused on API level 28+ by:&lt;br/&gt;[`AppComponentFactory`](https://developer.android.com/reference/androidx/core/app/AppComponentFactory) `extends` [`android.app.AppComponentFactory`](https://developer.android.com/reference/android/app/AppComponentFactory.html)\r\n\r\nThis means that on API 28+ one can use `tools:remove` ... \r\n\r\n    tools:remove=&quot;android:appComponentFactory&quot;\r\n    tools:targetApi=&quot;p&quot;\r\n","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>This error message is caused on API level 28+ by:<br/><a href=\"https://developer.android.com/reference/androidx/core/app/AppComponentFactory\" rel=\"noreferrer\"><code>AppComponentFactory</code></a> <code>extends</code> <a href=\"https://developer.android.com/reference/android/app/AppComponentFactory.html\" rel=\"noreferrer\"><code>android.app.AppComponentFactory</code></a></p>\n<p>This means that on API 28+ one can use <code>tools:remove</code> ...</p>\n<pre><code>tools:remove=&quot;android:appComponentFactory&quot;\ntools:targetApi=&quot;p&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7762341,"reputation":574,"user_id":5874710,"display_name":"Carla Camargo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621863196,"creation_date":1621863196,"answer_id":67672989,"question_id":57700486,"body_markdown":"For Xamarin folks running into this problem: I started to see this problem when upgrading from Xamarin.Forms 4.x to 5.0. With AndroidX changes that I wasn&#39;t aware when I&#39;ve done the upgrade the min SDK version needs to be changed to 29 on the android manifest file, something like:\r\n`&lt;uses-sdk android:minSdkVersion=&quot;29&quot; android:targetSdkVersion=&quot;30&quot; /&gt;`","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>For Xamarin folks running into this problem: I started to see this problem when upgrading from Xamarin.Forms 4.x to 5.0. With AndroidX changes that I wasn't aware when I've done the upgrade the min SDK version needs to be changed to 29 on the android manifest file, something like:\n<code>&lt;uses-sdk android:minSdkVersion=&quot;29&quot; android:targetSdkVersion=&quot;30&quot; /&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":1301014,"reputation":8110,"user_id":1250929,"accept_rate":72,"display_name":"Kristy Welsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626542452,"creation_date":1626542452,"answer_id":68422756,"question_id":57700486,"body_markdown":"In my case, I was using a library that has an interface that was inheriting a View.OnClickListener interface.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>In my case, I was using a library that has an interface that was inheriting a View.OnClickListener interface.</p>\n"},{"tags":[],"owner":{"account_id":1087775,"reputation":42376,"user_id":1083093,"accept_rate":67,"display_name":"Devrath"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657645452,"creation_date":1657645452,"answer_id":72955960,"question_id":57700486,"body_markdown":"**For anyone facing the same problem in the multi-Module project:-&gt;**\r\n*In my case I had a multi-module project using the Jetpack compose for the presentation layer* \r\n\r\n 1. Just Clean the project\r\n 2. Rebuild it\r\n 3. Then again run the project\r\n\r\n","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p><strong>For anyone facing the same problem in the multi-Module project:-&gt;</strong>\n<em>In my case I had a multi-module project using the Jetpack compose for the presentation layer</em></p>\n<ol>\n<li>Just Clean the project</li>\n<li>Rebuild it</li>\n<li>Then again run the project</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8297053,"reputation":727,"user_id":6236959,"display_name":"Shubham Kumar Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669055171,"creation_date":1669055171,"answer_id":74523365,"question_id":57700486,"body_markdown":"This error can be caused due to using both ```androidx``` and ```legacy``` android support libraries\r\n\r\nJust open ```project structure``` and go to Dependencies and select ```All Modules``` and check is there any library which contains ```android.support```\r\n\r\nJust replace that with ```androidx``` version for that ```library```\r\n\r\nIn the latest versions of android studio, just REMOVE these lines if it is there inside the manifest file\r\n\r\n```\r\n&lt;application\r\n...\r\ntools:replace=&quot;android:appComponentFactory&quot;  // REMOVE THIS\r\nandroid:appComponentFactory=&quot;androidx&quot;       // REMOVE THIS\r\n&gt;\r\n```\r\n\r\nIf still there is issue check this\r\n\r\nhttps://stackoverflow.com/a/74523286/6236959","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>This error can be caused due to using both <code>androidx</code> and <code>legacy</code> android support libraries</p>\n<p>Just open <code>project structure</code> and go to Dependencies and select <code>All Modules</code> and check is there any library which contains <code>android.support</code></p>\n<p>Just replace that with <code>androidx</code> version for that <code>library</code></p>\n<p>In the latest versions of android studio, just REMOVE these lines if it is there inside the manifest file</p>\n<pre><code>&lt;application\n...\ntools:replace=&quot;android:appComponentFactory&quot;  // REMOVE THIS\nandroid:appComponentFactory=&quot;androidx&quot;       // REMOVE THIS\n&gt;\n</code></pre>\n<p>If still there is issue check this</p>\n<p><a href=\"https://stackoverflow.com/a/74523286/6236959\">https://stackoverflow.com/a/74523286/6236959</a></p>\n"},{"tags":[],"owner":{"account_id":3100197,"reputation":1792,"user_id":2624525,"accept_rate":43,"display_name":"Samad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682287532,"creation_date":1682287532,"answer_id":76087493,"question_id":57700486,"body_markdown":"in my case @AndroidEntryPoint was missing","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>in my case @AndroidEntryPoint was missing</p>\n"}],"owner":{"account_id":16572773,"reputation":939,"user_id":11975419,"display_name":"Chris911"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66975,"favorite_count":0,"down_vote_count":1,"up_vote_count":91,"answer_count":17,"score":90,"last_activity_date":1682289556,"creation_date":1567029145,"question_id":57700486,"body_markdown":"I don&#39;t know what to do about the following errors, I&#39;ve searched the web but not found anything:\r\n\r\n    java.lang.ClassNotFoundException: Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot; on path: DexPathList[[],nativeLibraryDirectories=[/data/app/com.example.padmw-CXElJ_vfrfm3y7py3CPsJw==/lib/x86, /system/lib]]\r\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n        at android.app.LoadedApk.createAppFactory(LoadedApk.java:226)\r\n        at android.app.LoadedApk.updateApplicationInfo(LoadedApk.java:338)\r\n        at android.app.ActivityThread.handleDispatchPackageBroadcast(ActivityThread.java:5388)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1733)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:193)\r\n        at com.android.server.SystemServer.run(SystemServer.java:454)\r\n        at com.android.server.SystemServer.main(SystemServer.java:294)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:838)\r\n\r\nand :\r\n\r\n    2019-08-29 00:19:24.071 1853-1853/? E/LoadedApk: Unable to instantiate appComponentFactory\r\n    java.lang.ClassNotFoundException: Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot; on path: DexPathList[[],nativeLibraryDirectories=[/data/app/com.example.padmw-CXElJ_vfrfm3y7py3CPsJw==/lib/x86, /system/lib]]\r\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n        at android.app.LoadedApk.createAppFactory(LoadedApk.java:226)\r\n        at android.app.LoadedApk.updateApplicationInfo(LoadedApk.java:338)\r\n        at android.app.ActivityThread.handleDispatchPackageBroadcast(ActivityThread.java:5388)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1733)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:193)\r\n        at com.android.server.SystemServer.run(SystemServer.java:454)\r\n        at com.android.server.SystemServer.main(SystemServer.java:294)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:838)\r\n\r\n\r\nmy dependencies in gradle app :\r\n\r\n    dependencies {\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation &#39;androidx.appcompat:appcompat:1.0.2&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:1.1.3&#39;\r\n    implementation &#39;com.google.firebase:firebase-core:17.1.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-database:19.0.0&#39;\r\n    implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.0.0&#39;\r\n    implementation &#39;androidx.navigation:navigation-fragment:2.0.0&#39;\r\n    implementation &#39;androidx.navigation:navigation-ui:2.0.0&#39;\r\n    implementation &#39;androidx.lifecycle:lifecycle-extensions:2.0.0&#39;\r\n    testImplementation &#39;junit:junit:4.12&#39;\r\n    androidTestImplementation &#39;androidx.test:runner:1.2.0&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.2.0&#39;\r\n    implementation &#39;androidx.recyclerview:recyclerview:1.0.0&#39;\r\n    implementation &#39;com.squareup.picasso:picasso:2.71828&#39;\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n    implementation &#39;com.firebaseui:firebase-ui-database:1.2.0&#39;\r\n    }\r\n    apply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\n","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>I don't know what to do about the following errors, I've searched the web but not found anything:</p>\n\n<pre><code>java.lang.ClassNotFoundException: Didn't find class \"androidx.core.app.CoreComponentFactory\" on path: DexPathList[[],nativeLibraryDirectories=[/data/app/com.example.padmw-CXElJ_vfrfm3y7py3CPsJw==/lib/x86, /system/lib]]\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n    at android.app.LoadedApk.createAppFactory(LoadedApk.java:226)\n    at android.app.LoadedApk.updateApplicationInfo(LoadedApk.java:338)\n    at android.app.ActivityThread.handleDispatchPackageBroadcast(ActivityThread.java:5388)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1733)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:193)\n    at com.android.server.SystemServer.run(SystemServer.java:454)\n    at com.android.server.SystemServer.main(SystemServer.java:294)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:838)\n</code></pre>\n\n<p>and :</p>\n\n<pre><code>2019-08-29 00:19:24.071 1853-1853/? E/LoadedApk: Unable to instantiate appComponentFactory\njava.lang.ClassNotFoundException: Didn't find class \"androidx.core.app.CoreComponentFactory\" on path: DexPathList[[],nativeLibraryDirectories=[/data/app/com.example.padmw-CXElJ_vfrfm3y7py3CPsJw==/lib/x86, /system/lib]]\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n    at android.app.LoadedApk.createAppFactory(LoadedApk.java:226)\n    at android.app.LoadedApk.updateApplicationInfo(LoadedApk.java:338)\n    at android.app.ActivityThread.handleDispatchPackageBroadcast(ActivityThread.java:5388)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1733)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:193)\n    at com.android.server.SystemServer.run(SystemServer.java:454)\n    at com.android.server.SystemServer.main(SystemServer.java:294)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:838)\n</code></pre>\n\n<p>my dependencies in gradle app :</p>\n\n<pre><code>dependencies {\nimplementation fileTree(dir: 'libs', include: ['*.jar'])\nimplementation 'androidx.appcompat:appcompat:1.0.2'\nimplementation 'androidx.constraintlayout:constraintlayout:1.1.3'\nimplementation 'com.google.firebase:firebase-core:17.1.0'\nimplementation 'com.google.firebase:firebase-database:19.0.0'\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0'\nimplementation 'com.google.android.material:material:1.0.0'\nimplementation 'androidx.navigation:navigation-fragment:2.0.0'\nimplementation 'androidx.navigation:navigation-ui:2.0.0'\nimplementation 'androidx.lifecycle:lifecycle-extensions:2.0.0'\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'androidx.test:runner:1.2.0'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\nimplementation 'androidx.recyclerview:recyclerview:1.0.0'\nimplementation 'com.squareup.picasso:picasso:2.71828'\nimplementation 'androidx.cardview:cardview:1.0.0'\nimplementation 'com.firebaseui:firebase-ui-database:1.2.0'\n}\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n"},{"tags":["java","netflix-eureka","spring-cloud-gateway"],"comments":[{"owner":{"account_id":2869610,"reputation":1140,"user_id":2463234,"display_name":"Dhananjay"},"score":0,"creation_date":1681857032,"post_id":76049410,"comment_id":134123922,"body_markdown":"What&#39;s the path you are trying to access? Based on routes events service should be accible via a gateway with something like - http://localhost:8080/event/someurl\n\nThis would forward the /someurl to the event service provided that service has the someurl endpoint","body":"What&#39;s the path you are trying to access? Based on routes events service should be accible via a gateway with something like - <a href=\"http://localhost:8080/event/someurl\" rel=\"nofollow noreferrer\">localhost:8080/event/someurl</a>  This would forward the /someurl to the event service provided that service has the someurl endpoint"},{"owner":{"account_id":28343732,"reputation":13,"user_id":21676292,"display_name":"rcirne"},"score":0,"creation_date":1681857242,"post_id":76049410,"comment_id":134123941,"body_markdown":"Simply localhost:8080/event . EventController only has a single mapping to the empty path","body":"Simply localhost:8080/event . EventController only has a single mapping to the empty path"},{"owner":{"account_id":28343732,"reputation":13,"user_id":21676292,"display_name":"rcirne"},"score":0,"creation_date":1681857794,"post_id":76049410,"comment_id":134124021,"body_markdown":"I have edited the question to add the Controller class and the URL I&#39;m trying to hit.","body":"I have edited the question to add the Controller class and the URL I&#39;m trying to hit."},{"owner":{"account_id":2869610,"reputation":1140,"user_id":2463234,"display_name":"Dhananjay"},"score":0,"creation_date":1681941284,"post_id":76049410,"comment_id":134139880,"body_markdown":"If localhost:8082/v1/event returns your desired output I would expect the same from gateway localhost:8080/event/v1/event to route based on your configuration.","body":"If localhost:8082/v1/event returns your desired output I would expect the same from gateway localhost:8080/event/v1/event to route based on your configuration."},{"owner":{"account_id":28343732,"reputation":13,"user_id":21676292,"display_name":"rcirne"},"score":0,"creation_date":1682284060,"post_id":76049410,"comment_id":134187066,"body_markdown":"@Dhananjay, your reply solved the mystery. localhost:8080/event/v1/event gave the expected response. Since the goal is to use the Gateway to access all services, I&#39;ll remove the paths from the Controller classes, so Event service could be accessed like localhost:8080/v1/event. Thanks for the input.","body":"@Dhananjay, your reply solved the mystery. localhost:8080/event/v1/event gave the expected response. Since the goal is to use the Gateway to access all services, I&#39;ll remove the paths from the Controller classes, so Event service could be accessed like localhost:8080/v1/event. Thanks for the input."},{"owner":{"account_id":2869610,"reputation":1140,"user_id":2463234,"display_name":"Dhananjay"},"score":0,"creation_date":1682289133,"post_id":76049410,"comment_id":134187584,"body_markdown":"Cool, I will post this as answer","body":"Cool, I will post this as answer"}],"answers":[{"tags":[],"owner":{"account_id":2869610,"reputation":1140,"user_id":2463234,"display_name":"Dhananjay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682289337,"creation_date":1682289337,"answer_id":76087598,"question_id":76049410,"body_markdown":"If `localhost:8082/v1/event` returns your desired output I would expect the same from gateway `localhost:8080/event/v1/event` to route based on your configuration.\r\n\r\nThe first `/event` is your service name used by the spring cloud gateway to determine which service it needs to route. By default, the service name gets trimmed, and the `/v1/event` path along with any other request part is routed to your event service.","title":"Spring Cloud Gateway with Eureka discovery locator - 404","body":"<p>If <code>localhost:8082/v1/event</code> returns your desired output I would expect the same from gateway <code>localhost:8080/event/v1/event</code> to route based on your configuration.</p>\n<p>The first <code>/event</code> is your service name used by the spring cloud gateway to determine which service it needs to route. By default, the service name gets trimmed, and the <code>/v1/event</code> path along with any other request part is routed to your event service.</p>\n"}],"owner":{"account_id":28343732,"reputation":13,"user_id":21676292,"display_name":"rcirne"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":933,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76087598,"answer_count":1,"score":0,"last_activity_date":1682289337,"creation_date":1681855978,"question_id":76049410,"body_markdown":"I&#39;m setting up a microservices based application using Spring Cloud Gateway with Eureka discovery client.\r\n\r\nI have configured the Eureka server application, the Gateway application and a regular service.\r\n\r\nI have set spring.cloud.gateway.discovery.locator.enabled and spring.cloud.gateway.discovery.locator.lower-case-service-id to true in the Gateway application.yml file.\r\n\r\nAll three applications start correctly, however when I try to access the microservice through the Gateway I get a 404 error, sending a GET request to localhost:8080/event\r\n\r\nI have configured actuator to display the endpoints exposed by the Gateway and there is an entry for the service.\r\n\r\nWhat am I missing?\r\n\r\n\r\n# Eureka Server application.yml\r\n```\r\nspring:\r\n    application:\r\n        name: registry\r\nserver:\r\n    port: 8081\r\n\r\neureka:\r\n    client:\r\n        register-with-eureka: false\r\n        fetch-registry: false\r\n        service-url:\r\n            defaultZone: http://localhost:${server.port}/eureka/\r\n    instance:\r\n        hostname: localhost\r\n        prefer-ip-address: true\r\n```\r\n\r\n# Spring Cloud Gateway application.yml\r\n```\r\nspring:\r\n    application:\r\n        name: api-gateway\r\n    cloud:\r\n        gateway:\r\n            discovery:\r\n                locator:\r\n                    enabled: true\r\n                    lower-case-service-id: true\r\n    main:\r\n        web-application-type: reactive\r\n\r\nserver:\r\n    port: 8080\r\n\r\neureka:\r\n    client:\r\n        service-url:\r\n            defaultZone: http://localhost:8081/eureka/\r\n        fetch-registry: true\r\n        register-with-eureka: true\r\n    instance:\r\n        hostname: localhost\r\n        prefer-ip-address: true\r\n\r\nmanagement:\r\n  endpoint:\r\n    gateway:\r\n      enabled: true\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include:\r\n        - &quot;*&quot;\r\n```\r\n\r\n# Service application.yml\r\n\r\n```\r\nserver:\r\n  port: 8082\r\n\r\nspring:\r\n  application:\r\n    name: event\r\n\r\neureka:\r\n    client:\r\n        service-url:\r\n            defaultZone: http://localhost:8081/eureka/\r\n        fetch-registry: true\r\n        register-with-eureka: true\r\n    instance:\r\n        hostname: localhost\r\n        prefer-ip-address: true\r\n```\r\n\r\n\r\n\r\n\r\nI have included the required annotations on both Eureka server application and Gateway and Event service application classes. I get the following response when querying http://localhost:8080/actuator/gateway/routes:\r\n\r\n\r\n```\r\n[{&quot;predicate&quot;:&quot;Paths: [/api-gateway/**], match trailing slash: true&quot;,&quot;metadata&quot;:{&quot;jmx.port&quot;:&quot;55939&quot;,&quot;management.port&quot;:&quot;8080&quot;},&quot;route_id&quot;:&quot;ReactiveCompositeDiscoveryClient_API-GATEWAY&quot;,&quot;filters&quot;:[&quot;[[RewritePath /api-gateway/?(?&lt;remaining&gt;.*) = &#39;/${remaining}&#39;], order = 1]&quot;],&quot;uri&quot;:&quot;lb://API-GATEWAY&quot;,&quot;order&quot;:0},{&quot;predicate&quot;:&quot;Paths: [/event/**], match trailing slash: true&quot;,&quot;metadata&quot;:{&quot;jmx.port&quot;:&quot;55880&quot;,&quot;management.port&quot;:&quot;8082&quot;},&quot;route_id&quot;:&quot;ReactiveCompositeDiscoveryClient_EVENT&quot;,&quot;filters&quot;:[&quot;[[RewritePath /event/?(?&lt;remaining&gt;.*) = &#39;/${remaining}&#39;], order = 1]&quot;],&quot;uri&quot;:&quot;lb://EVENT&quot;,&quot;order&quot;:0}]\r\n```\r\n\r\n# EventController\r\n```\r\npackage example.event.endpoint.controller;\r\n\r\nimport static org.springframework.http.HttpStatus.OK;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.data.domain.Pageable;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport example.event.endpoint.service.EventService;\r\nimport example.core.model.Event;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/v1/event&quot;)\r\n@Slf4j\r\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\r\npublic class EventController {\r\n    private final EventService eventService;\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;Iterable&lt;Event&gt;&gt; listAll(Pageable pageable) {\r\n        log.info(&quot;Retrieving all events&quot;);\r\n        return new ResponseEntity&lt;&gt;(eventService.list(pageable), OK);\r\n    }\r\n}\r\n\r\n```\r\n","title":"Spring Cloud Gateway with Eureka discovery locator - 404","body":"<p>I'm setting up a microservices based application using Spring Cloud Gateway with Eureka discovery client.</p>\n<p>I have configured the Eureka server application, the Gateway application and a regular service.</p>\n<p>I have set spring.cloud.gateway.discovery.locator.enabled and spring.cloud.gateway.discovery.locator.lower-case-service-id to true in the Gateway application.yml file.</p>\n<p>All three applications start correctly, however when I try to access the microservice through the Gateway I get a 404 error, sending a GET request to localhost:8080/event</p>\n<p>I have configured actuator to display the endpoints exposed by the Gateway and there is an entry for the service.</p>\n<p>What am I missing?</p>\n<h1>Eureka Server application.yml</h1>\n<pre><code>spring:\n    application:\n        name: registry\nserver:\n    port: 8081\n\neureka:\n    client:\n        register-with-eureka: false\n        fetch-registry: false\n        service-url:\n            defaultZone: http://localhost:${server.port}/eureka/\n    instance:\n        hostname: localhost\n        prefer-ip-address: true\n</code></pre>\n<h1>Spring Cloud Gateway application.yml</h1>\n<pre><code>spring:\n    application:\n        name: api-gateway\n    cloud:\n        gateway:\n            discovery:\n                locator:\n                    enabled: true\n                    lower-case-service-id: true\n    main:\n        web-application-type: reactive\n\nserver:\n    port: 8080\n\neureka:\n    client:\n        service-url:\n            defaultZone: http://localhost:8081/eureka/\n        fetch-registry: true\n        register-with-eureka: true\n    instance:\n        hostname: localhost\n        prefer-ip-address: true\n\nmanagement:\n  endpoint:\n    gateway:\n      enabled: true\n  endpoints:\n    web:\n      exposure:\n        include:\n        - &quot;*&quot;\n</code></pre>\n<h1>Service application.yml</h1>\n<pre><code>server:\n  port: 8082\n\nspring:\n  application:\n    name: event\n\neureka:\n    client:\n        service-url:\n            defaultZone: http://localhost:8081/eureka/\n        fetch-registry: true\n        register-with-eureka: true\n    instance:\n        hostname: localhost\n        prefer-ip-address: true\n</code></pre>\n<p>I have included the required annotations on both Eureka server application and Gateway and Event service application classes. I get the following response when querying http://localhost:8080/actuator/gateway/routes:</p>\n<pre><code>[{&quot;predicate&quot;:&quot;Paths: [/api-gateway/**], match trailing slash: true&quot;,&quot;metadata&quot;:{&quot;jmx.port&quot;:&quot;55939&quot;,&quot;management.port&quot;:&quot;8080&quot;},&quot;route_id&quot;:&quot;ReactiveCompositeDiscoveryClient_API-GATEWAY&quot;,&quot;filters&quot;:[&quot;[[RewritePath /api-gateway/?(?&lt;remaining&gt;.*) = '/${remaining}'], order = 1]&quot;],&quot;uri&quot;:&quot;lb://API-GATEWAY&quot;,&quot;order&quot;:0},{&quot;predicate&quot;:&quot;Paths: [/event/**], match trailing slash: true&quot;,&quot;metadata&quot;:{&quot;jmx.port&quot;:&quot;55880&quot;,&quot;management.port&quot;:&quot;8082&quot;},&quot;route_id&quot;:&quot;ReactiveCompositeDiscoveryClient_EVENT&quot;,&quot;filters&quot;:[&quot;[[RewritePath /event/?(?&lt;remaining&gt;.*) = '/${remaining}'], order = 1]&quot;],&quot;uri&quot;:&quot;lb://EVENT&quot;,&quot;order&quot;:0}]\n</code></pre>\n<h1>EventController</h1>\n<pre><code>package example.event.endpoint.controller;\n\nimport static org.springframework.http.HttpStatus.OK;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport example.event.endpoint.service.EventService;\nimport example.core.model.Event;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\n\n@RestController\n@RequestMapping(&quot;/v1/event&quot;)\n@Slf4j\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\npublic class EventController {\n    private final EventService eventService;\n\n    @GetMapping\n    public ResponseEntity&lt;Iterable&lt;Event&gt;&gt; listAll(Pageable pageable) {\n        log.info(&quot;Retrieving all events&quot;);\n        return new ResponseEntity&lt;&gt;(eventService.list(pageable), OK);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","android","mavlink"],"owner":{"account_id":28391576,"reputation":1,"user_id":21717259,"display_name":"Cookie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682289334,"creation_date":1682289334,"question_id":76087597,"body_markdown":"Im making android app, that have to get connection with drone, subscribe to the camera and display video with the any view. Couldnt find any useful documentation for java - just this thing: https://mavsdk.mavlink.io/v1.4/en/faq.html but there is nothing about java.\r\n\r\nSo, i made two layouts: first one, that gets address and port, second one that have to display the video. There is onCreate, that inits the server. init code looks like this:\r\n\r\n```\r\nMavsdkServer server = new MavsdkServer();\r\n    private System drone;\r\n    private Camera camera;\r\n    public void initMavlink()\r\n    {\r\n        MavsdkEventQueue.executor().execute(() -&gt; {\r\n            server.run(SYSTEM_ADDRESS, MAVSDK_SERVER_PORT);\r\n            drone = new System(SYSTEM_ADDRESS, MAVSDK_SERVER_PORT);\r\n            camera = drone.getCamera();\r\n        });\r\n\r\n\r\n\r\n        Completable completable = camera.startVideoStreaming();\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    public void onTelemetryReceived(Telemetry telemetry) {\r\n     \r\n\r\n    }\r\n```\r\nNow i have no idea what to do, i cant find any method to subscribe streaming. Please, help me.\r\n\r\nthe dependencies i got:\r\n```\r\nimplementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &#39;androidx.navigation:navigation-fragment:2.4.1&#39;\r\n    implementation &#39;androidx.navigation:navigation-ui:2.4.1&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    implementation &#39;io.mavsdk:mavsdk:1.3.1&#39;\r\n    implementation &#39;io.mavsdk:mavsdk-server:1.3.1&#39;\r\n    implementation &#39;io.dronefleet.mavlink:mavlink:1.1.11&#39;\r\n    implementation &#39;com.arthenica:mobile-ffmpeg-full:4.4&#39;\r\n```\r\n","title":"How to subscribe to the drone&#39;s camera, using Mavsdk (Java, Android)","body":"<p>Im making android app, that have to get connection with drone, subscribe to the camera and display video with the any view. Couldnt find any useful documentation for java - just this thing: <a href=\"https://mavsdk.mavlink.io/v1.4/en/faq.html\" rel=\"nofollow noreferrer\">https://mavsdk.mavlink.io/v1.4/en/faq.html</a> but there is nothing about java.</p>\n<p>So, i made two layouts: first one, that gets address and port, second one that have to display the video. There is onCreate, that inits the server. init code looks like this:</p>\n<pre><code>MavsdkServer server = new MavsdkServer();\n    private System drone;\n    private Camera camera;\n    public void initMavlink()\n    {\n        MavsdkEventQueue.executor().execute(() -&gt; {\n            server.run(SYSTEM_ADDRESS, MAVSDK_SERVER_PORT);\n            drone = new System(SYSTEM_ADDRESS, MAVSDK_SERVER_PORT);\n            camera = drone.getCamera();\n        });\n\n\n\n        Completable completable = camera.startVideoStreaming();\n\n\n\n    }\n\n\n    public void onTelemetryReceived(Telemetry telemetry) {\n     \n\n    }\n</code></pre>\n<p>Now i have no idea what to do, i cant find any method to subscribe streaming. Please, help me.</p>\n<p>the dependencies i got:</p>\n<pre><code>implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'androidx.navigation:navigation-fragment:2.4.1'\n    implementation 'androidx.navigation:navigation-ui:2.4.1'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    implementation 'io.mavsdk:mavsdk:1.3.1'\n    implementation 'io.mavsdk:mavsdk-server:1.3.1'\n    implementation 'io.dronefleet.mavlink:mavlink:1.1.11'\n    implementation 'com.arthenica:mobile-ffmpeg-full:4.4'\n</code></pre>\n"},{"tags":["java","macos","dmg","jpackage","javapackager"],"answers":[{"tags":[],"owner":{"account_id":2305297,"reputation":1882,"user_id":2024692,"accept_rate":100,"display_name":"Cromax"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682289262,"creation_date":1682289262,"answer_id":76087592,"question_id":75818974,"body_markdown":"According to information on the web page you provided yourself:\r\n&gt; **macOS DMG**\r\n&gt; * DMG setup script, *application-name*-dmg-setup.scpt.\r\n&gt; * Applications license properties list, *application-name*-license.plist.\r\n&gt; * Background file, *application-name*-background.tiff.\r\n&gt; * Drive icon, *application-name*-volume.icns.\r\n\r\nSo you should use `moose.icns` for the application icon, `moose-volume.icns` for the volume icon **AND** `--name moose` as your application name (note small caps). If you choose to name your application Moose, then update icons to `Moose.icns` and `Moose-volume.icns` – it&#39;s case sensitive and it actually works for my app, but *application-name* part must match **exactly** your application name (specified by `--name` option).\r\n","title":"How can I set the MacOS DMG volume icon using Java 17&#39;s jpackage utility?","body":"<p>According to information on the web page you provided yourself:</p>\n<blockquote>\n<p><strong>macOS DMG</strong></p>\n<ul>\n<li>DMG setup script, <em>application-name</em>-dmg-setup.scpt.</li>\n<li>Applications license properties list, <em>application-name</em>-license.plist.</li>\n<li>Background file, <em>application-name</em>-background.tiff.</li>\n<li>Drive icon, <em>application-name</em>-volume.icns.</li>\n</ul>\n</blockquote>\n<p>So you should use <code>moose.icns</code> for the application icon, <code>moose-volume.icns</code> for the volume icon <strong>AND</strong> <code>--name moose</code> as your application name (note small caps). If you choose to name your application Moose, then update icons to <code>Moose.icns</code> and <code>Moose-volume.icns</code> – it's case sensitive and it actually works for my app, but <em>application-name</em> part must match <strong>exactly</strong> your application name (specified by <code>--name</code> option).</p>\n"}],"owner":{"account_id":3181638,"reputation":23,"user_id":2688193,"display_name":"mpfthprblmtq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682289262,"creation_date":1679541352,"question_id":75818974,"body_markdown":"I&#39;m creating a DMG installation package for my java application for use on OSX.  I have the following script that creates a resources directory, puts some files in it, then runs the jpackage command to actually create the DMG.  The problem is that the dmg file, when mounted, is using the app icon instead of the volume icon I have specified.\r\n\r\nHere is the script:\r\n\r\n```sh\r\n# create resource directory for jpackage\r\nprintf &quot;Creating resource directory...&quot;\r\nmkdir resources\r\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose-app-icon.icns &quot;$APP_PATH&quot;/deploy/resources/moose-app-icon.icns\r\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose180-spaced.png &quot;$APP_PATH&quot;/deploy/resources/moose-background.png\r\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose180-spaced.png &quot;$APP_PATH&quot;/deploy/resources/moose-background-darkAqua.png\r\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose-volume.icns &quot;$APP_PATH&quot;/deploy/resources/moose-volume.icns\r\necho &quot;Done.&quot;\r\n\r\n#   actually building the package\r\nprintf &quot;Building installation package...&quot;\r\n$jdk/jpackage \\\r\n  --resource-dir &quot;$APP_PATH&quot;/deploy/resources \\\r\n  --type dmg \\\r\n  --input . \\\r\n  --main-jar moose.jar \\\r\n  --name Moose \\\r\n  --app-version &quot;$version&quot; \\\r\n  --icon resources/moose-app-icon.icns \\\r\n  --description &quot;Moose&quot; \\\r\n  --verbose\r\necho &quot;Done.&quot;\r\n```\r\n\r\nAfter the first step, which moves resources around, the `&quot;$APP_PATH&quot;/deploy/resources/` directory looks like this:\r\n\r\n```\r\n/deploy\r\n  /resources\r\n    - moose-app-icon.icns\r\n    - moose-background-darkAqua.png\r\n    - moose-background.png\r\n    - moose-volume.icns\r\n```\r\n\r\nThis is the process laid out in the [jpackage documentation for JDK 17](https://docs.oracle.com/en/java/javase/17/jpackage/override-jpackage-resources.html#GUID-1B718F8B-B68D-4D46-B1DB-003D7729AAB6) under the Override jpackage Resources section.  It mentions to have a `app-name-volume.icns` file in your resource directory, which I do have (`moose-volume.icns`), but it&#39;s instead using the app icon (`moose-app-icon.icns`).\r\n\r\nWhen I use the --verbose flag in the jpackage command, I get the following output from the creation script:\r\n\r\n```\r\n[21:47:08.776] Using custom package resource [icon] (loaded from file /Users/mpfthprblmtq/Git/moose/deploy/resources/moose-app-icon.icns).\r\n[21:47:08.776] Preparing Info.plist: /var/folders/0t/hr0vs3715v15xzjpfqpmkns40000gn/T/jdk.jpackage15144647471455641486/images/image-4445575315167377480/Moose.app/Contents/Info.plist.\r\n[21:47:08.777] Using default package resource Info-lite.plist.template [Application Info.plist] (add Info.plist to the resource-dir to customize).\r\n[21:47:08.778] Using default package resource Runtime-Info.plist.template [Java Runtime Info.plist] (add Runtime-Info.plist to the resource-dir to customize).\r\n[21:47:08.779] Using default package resource background_dmg.tiff [dmg background] (add Moose-background.tiff to the resource-dir to customize).\r\n[21:47:08.779] Using custom package resource [volume icon] (loaded from file /Users/mpfthprblmtq/Git/moose/deploy/resources/moose-app-icon.icns).\r\n[21:47:08.780] Preparing dmg setup: /var/folders/0t/hr0vs3715v15xzjpfqpmkns40000gn/T/jdk.jpackage15144647471455641486/config/Moose-dmg-setup.scpt.\r\n[21:47:08.780] Using default package resource DMGsetup.scpt [DMG setup script] (add Moose-dmg-setup.scpt to the resource-dir to customize).\r\n[21:47:08.781] Creating DMG file: /Users/mpfthprblmtq/Git/moose/deploy/Moose-1.4.0.dmg.\r\n```\r\n\r\nThis tells me that jpackage is using my `moose-app-icon.icns` when I explicitly have the `moose-volume.icns` file at the same level as the main app icon.  Any ideas on how I can tell jpackage to use the `moose-volume.icns` file instead of the app icon?\r\n\r\nI am on OSX Ventura 13.2.1, and my jpackage version is 17.0.3.","title":"How can I set the MacOS DMG volume icon using Java 17&#39;s jpackage utility?","body":"<p>I'm creating a DMG installation package for my java application for use on OSX.  I have the following script that creates a resources directory, puts some files in it, then runs the jpackage command to actually create the DMG.  The problem is that the dmg file, when mounted, is using the app icon instead of the volume icon I have specified.</p>\n<p>Here is the script:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># create resource directory for jpackage\nprintf &quot;Creating resource directory...&quot;\nmkdir resources\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose-app-icon.icns &quot;$APP_PATH&quot;/deploy/resources/moose-app-icon.icns\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose180-spaced.png &quot;$APP_PATH&quot;/deploy/resources/moose-background.png\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose180-spaced.png &quot;$APP_PATH&quot;/deploy/resources/moose-background-darkAqua.png\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose-volume.icns &quot;$APP_PATH&quot;/deploy/resources/moose-volume.icns\necho &quot;Done.&quot;\n\n#   actually building the package\nprintf &quot;Building installation package...&quot;\n$jdk/jpackage \\\n  --resource-dir &quot;$APP_PATH&quot;/deploy/resources \\\n  --type dmg \\\n  --input . \\\n  --main-jar moose.jar \\\n  --name Moose \\\n  --app-version &quot;$version&quot; \\\n  --icon resources/moose-app-icon.icns \\\n  --description &quot;Moose&quot; \\\n  --verbose\necho &quot;Done.&quot;\n</code></pre>\n<p>After the first step, which moves resources around, the <code>&quot;$APP_PATH&quot;/deploy/resources/</code> directory looks like this:</p>\n<pre><code>/deploy\n  /resources\n    - moose-app-icon.icns\n    - moose-background-darkAqua.png\n    - moose-background.png\n    - moose-volume.icns\n</code></pre>\n<p>This is the process laid out in the <a href=\"https://docs.oracle.com/en/java/javase/17/jpackage/override-jpackage-resources.html#GUID-1B718F8B-B68D-4D46-B1DB-003D7729AAB6\" rel=\"nofollow noreferrer\">jpackage documentation for JDK 17</a> under the Override jpackage Resources section.  It mentions to have a <code>app-name-volume.icns</code> file in your resource directory, which I do have (<code>moose-volume.icns</code>), but it's instead using the app icon (<code>moose-app-icon.icns</code>).</p>\n<p>When I use the --verbose flag in the jpackage command, I get the following output from the creation script:</p>\n<pre><code>[21:47:08.776] Using custom package resource [icon] (loaded from file /Users/mpfthprblmtq/Git/moose/deploy/resources/moose-app-icon.icns).\n[21:47:08.776] Preparing Info.plist: /var/folders/0t/hr0vs3715v15xzjpfqpmkns40000gn/T/jdk.jpackage15144647471455641486/images/image-4445575315167377480/Moose.app/Contents/Info.plist.\n[21:47:08.777] Using default package resource Info-lite.plist.template [Application Info.plist] (add Info.plist to the resource-dir to customize).\n[21:47:08.778] Using default package resource Runtime-Info.plist.template [Java Runtime Info.plist] (add Runtime-Info.plist to the resource-dir to customize).\n[21:47:08.779] Using default package resource background_dmg.tiff [dmg background] (add Moose-background.tiff to the resource-dir to customize).\n[21:47:08.779] Using custom package resource [volume icon] (loaded from file /Users/mpfthprblmtq/Git/moose/deploy/resources/moose-app-icon.icns).\n[21:47:08.780] Preparing dmg setup: /var/folders/0t/hr0vs3715v15xzjpfqpmkns40000gn/T/jdk.jpackage15144647471455641486/config/Moose-dmg-setup.scpt.\n[21:47:08.780] Using default package resource DMGsetup.scpt [DMG setup script] (add Moose-dmg-setup.scpt to the resource-dir to customize).\n[21:47:08.781] Creating DMG file: /Users/mpfthprblmtq/Git/moose/deploy/Moose-1.4.0.dmg.\n</code></pre>\n<p>This tells me that jpackage is using my <code>moose-app-icon.icns</code> when I explicitly have the <code>moose-volume.icns</code> file at the same level as the main app icon.  Any ideas on how I can tell jpackage to use the <code>moose-volume.icns</code> file instead of the app icon?</p>\n<p>I am on OSX Ventura 13.2.1, and my jpackage version is 17.0.3.</p>\n"},{"tags":["java","android","opengl-es","android-bitmap"],"comments":[{"owner":{"account_id":253976,"reputation":10814,"user_id":533037,"accept_rate":60,"display_name":"solidpixel"},"score":0,"creation_date":1681979704,"post_id":76057670,"comment_id":134144662,"body_markdown":"Not tried, but can you set the BitmapFactory.Options to Bitmap.Config.ALPHA_8?","body":"Not tried, but can you set the BitmapFactory.Options to Bitmap.Config.ALPHA_8?"},{"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"score":0,"creation_date":1681986742,"post_id":76057670,"comment_id":134146251,"body_markdown":"@solidpixel Did try it but it&#39;s not helping.","body":"@solidpixel Did try it but it&#39;s not helping."}],"answers":[{"tags":[],"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682091335,"creation_date":1682091335,"answer_id":76074665,"question_id":76057670,"body_markdown":"I ended up using the [PNGJ library](https://github.com/leonbloy/pngj), as follows:\r\n\r\n```\r\nimport ar.com.hjg.pngj.IImageLine;\r\nimport ar.com.hjg.pngj.ImageLineHelper;\r\nimport ar.com.hjg.pngj.PngReader;\r\n\r\npublic static Bitmap loadAlpha8Bitmap(Context context, String fileName) {\r\n    Bitmap result = null;\r\n\r\n    try {\r\n        PngReader reader = new PngReader(context.getAssets().open(fileName));\r\n\r\n        if (reader.imgInfo.channels == 3 &amp;&amp; reader.imgInfo.bitDepth == 8) {\r\n            int size = reader.imgInfo.cols * reader.imgInfo.rows;\r\n            ByteBuffer buffer = ByteBuffer.allocate(size);\r\n\r\n            for (int row = 0; row &lt; reader.imgInfo.rows; row++) {\r\n                IImageLine line = reader.readRow();\r\n\r\n                for (int col = 0; col &lt; reader.imgInfo.cols; col++) {\r\n                    int pixel = ImageLineHelper.getPixelRGB8(line, col);\r\n                    byte gray = (byte)(pixel &amp; 0x000000ff);\r\n                    buffer.put(row * reader.imgInfo.cols + col, gray);\r\n                }\r\n            }\r\n\r\n            reader.end();\r\n\r\n            result = Bitmap.createBitmap(reader.imgInfo.cols, reader.imgInfo.rows, Bitmap.Config.ALPHA_8);\r\n            result.copyPixelsFromBuffer(buffer);\r\n        }\r\n    } catch (IOException e) {}\r\n\r\n    return result;\r\n}\r\n```","title":"How to force an image to be loaded as ALPHA_8 bitmap on Android with BitmapFactory or ImageDecoder?","body":"<p>I ended up using the <a href=\"https://github.com/leonbloy/pngj\" rel=\"nofollow noreferrer\">PNGJ library</a>, as follows:</p>\n<pre><code>import ar.com.hjg.pngj.IImageLine;\nimport ar.com.hjg.pngj.ImageLineHelper;\nimport ar.com.hjg.pngj.PngReader;\n\npublic static Bitmap loadAlpha8Bitmap(Context context, String fileName) {\n    Bitmap result = null;\n\n    try {\n        PngReader reader = new PngReader(context.getAssets().open(fileName));\n\n        if (reader.imgInfo.channels == 3 &amp;&amp; reader.imgInfo.bitDepth == 8) {\n            int size = reader.imgInfo.cols * reader.imgInfo.rows;\n            ByteBuffer buffer = ByteBuffer.allocate(size);\n\n            for (int row = 0; row &lt; reader.imgInfo.rows; row++) {\n                IImageLine line = reader.readRow();\n\n                for (int col = 0; col &lt; reader.imgInfo.cols; col++) {\n                    int pixel = ImageLineHelper.getPixelRGB8(line, col);\n                    byte gray = (byte)(pixel &amp; 0x000000ff);\n                    buffer.put(row * reader.imgInfo.cols + col, gray);\n                }\n            }\n\n            reader.end();\n\n            result = Bitmap.createBitmap(reader.imgInfo.cols, reader.imgInfo.rows, Bitmap.Config.ALPHA_8);\n            result.copyPixelsFromBuffer(buffer);\n        }\n    } catch (IOException e) {}\n\n    return result;\n}\n</code></pre>\n"}],"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76074665,"answer_count":1,"score":0,"last_activity_date":1682287701,"creation_date":1681928098,"question_id":76057670,"body_markdown":"My goal is to upload a GL_ALPHA texture to the GPU and use it with OpenGL. For that, I need a bitmap in ALPHA_8 format.\r\n\r\nCurrently, I&#39;m using BitmapFactory to load a 8-bit (with grayscale palette) PNG but getConfig() says it&#39;s in ARGB_8888 format.","title":"How to force an image to be loaded as ALPHA_8 bitmap on Android with BitmapFactory or ImageDecoder?","body":"<p>My goal is to upload a GL_ALPHA texture to the GPU and use it with OpenGL. For that, I need a bitmap in ALPHA_8 format.</p>\n<p>Currently, I'm using BitmapFactory to load a 8-bit (with grayscale palette) PNG but getConfig() says it's in ARGB_8888 format.</p>\n"},{"tags":["java","android","whatsapp"],"owner":{"account_id":28232815,"reputation":1,"user_id":21581778,"display_name":"shubham Shrivastav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682287450,"creation_date":1682000981,"question_id":76065257,"body_markdown":"I want to send text with image when number is not save.\r\n\r\nThis code is open WhatsApp but not show conversion specific number that is not save in contact list:\r\n\r\n    Intent intent = new Intent(&quot;android.intent.action.MAIN&quot;);\r\n    intent.setType(&quot;image/jpeg&quot;);\r\n    intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUriArray);\r\n    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n    intent.setAction(Intent.ACTION_SEND_MULTIPLE);\r\n    intent.setType(&quot;text/plain&quot;);\r\n    intent.putExtra(Intent.EXTRA_TEXT, (Serializable) stringBuffer);\r\n    intent.putExtra(&quot;jid&quot;, &quot;91********&quot; + &quot;@s.whatsapp.net&quot;);\r\n    intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n    intent.setPackage(&quot;com.whatsapp.w4b&quot;);\r\n    startActivity(intent);\r\n\r\n\r\nPlease suggests how to send text with multiple image on specific number when  number is not save in contact list, jid work only save number but number is not save in contact jid is not working.","title":"How to send text with multiple image whatsApp without save Number android","body":"<p>I want to send text with image when number is not save.</p>\n<p>This code is open WhatsApp but not show conversion specific number that is not save in contact list:</p>\n<pre><code>Intent intent = new Intent(&quot;android.intent.action.MAIN&quot;);\nintent.setType(&quot;image/jpeg&quot;);\nintent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUriArray);\nintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\nintent.setAction(Intent.ACTION_SEND_MULTIPLE);\nintent.setType(&quot;text/plain&quot;);\nintent.putExtra(Intent.EXTRA_TEXT, (Serializable) stringBuffer);\nintent.putExtra(&quot;jid&quot;, &quot;91********&quot; + &quot;@s.whatsapp.net&quot;);\nintent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\nintent.setPackage(&quot;com.whatsapp.w4b&quot;);\nstartActivity(intent);\n</code></pre>\n<p>Please suggests how to send text with multiple image on specific number when  number is not save in contact list, jid work only save number but number is not save in contact jid is not working.</p>\n"},{"tags":["java","android","android-room"],"owner":{"account_id":28362417,"reputation":1,"user_id":21692221,"display_name":"anonimdev2001"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682287283,"creation_date":1682018886,"question_id":76067616,"body_markdown":"I have three entities (VideoModel, AudioModel, and ImageModel) that have the same logic for deleting, inserting, etc. that is, the Dao classes are identical as well as the repository. What is the recommended way to avoid so much boilerplate code when using Room database in android?\r\n\r\nThe data is always fetched at the same time, so it occurred to me that I could create an entity that wraps all the models to save them together, so it would avoid all the boilerplate code, but when I get the data I&#39;ll have to fetch it and on insert, update, etc. . I would have to wrap them.\r\n\r\n\r\n```\r\n@Entity\r\npublic class MediaWrapperEntity {\r\n    @Embedded\r\n    private VideoModel videoModel;\r\n    @Embedded\r\n    private AudioModel audioModel;\r\n    @Embedded\r\n    private ImageModel imageModel;\r\n\r\n    public VideoModel getVideoModel() {\r\n        return videoModel;\r\n    }\r\n\r\n    public void setVideoModel(VideoModel videoModel) {\r\n        this.videoModel = videoModel;\r\n    }\r\n\r\n    public AudioModel getAudioModel() {\r\n        return audioModel;\r\n    }\r\n\r\n    public void setAudioModel(AudioModel audioModel) {\r\n        this.audioModel = audioModel;\r\n    }\r\n\r\n    public ImageModel getImageModel() {\r\n        return imageModel;\r\n    }\r\n\r\n    public void setImageModel(ImageModel imageModel) {\r\n        this.imageModel = imageModel;\r\n    }\r\n}\r\n```\r\n\r\nThanks in advance :)\r\n","title":"Similar entities in room database in android","body":"<p>I have three entities (VideoModel, AudioModel, and ImageModel) that have the same logic for deleting, inserting, etc. that is, the Dao classes are identical as well as the repository. What is the recommended way to avoid so much boilerplate code when using Room database in android?</p>\n<p>The data is always fetched at the same time, so it occurred to me that I could create an entity that wraps all the models to save them together, so it would avoid all the boilerplate code, but when I get the data I'll have to fetch it and on insert, update, etc. . I would have to wrap them.</p>\n<pre><code>@Entity\npublic class MediaWrapperEntity {\n    @Embedded\n    private VideoModel videoModel;\n    @Embedded\n    private AudioModel audioModel;\n    @Embedded\n    private ImageModel imageModel;\n\n    public VideoModel getVideoModel() {\n        return videoModel;\n    }\n\n    public void setVideoModel(VideoModel videoModel) {\n        this.videoModel = videoModel;\n    }\n\n    public AudioModel getAudioModel() {\n        return audioModel;\n    }\n\n    public void setAudioModel(AudioModel audioModel) {\n        this.audioModel = audioModel;\n    }\n\n    public ImageModel getImageModel() {\n        return imageModel;\n    }\n\n    public void setImageModel(ImageModel imageModel) {\n        this.imageModel = imageModel;\n    }\n}\n</code></pre>\n<p>Thanks in advance :)</p>\n"},{"tags":["java","android"],"owner":{"account_id":2162102,"reputation":1013,"user_id":1916043,"accept_rate":71,"display_name":"Mad Eddie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682286914,"creation_date":1682067455,"question_id":76071556,"body_markdown":"I have implemented my own ConnectionService and creating an new incoming call. The code is currently not showing the caller name - just the number\r\n\r\n\r\n````\r\n@RequiresApi(api = Build.VERSION_CODES.M)\r\n    @Override\r\n    public Connection onCreateIncomingConnection(final PhoneAccountHandle connectionManagerPhoneAccount, final ConnectionRequest request) {\r\n        Context context = getApplicationContext();\r\n\r\n        NativeTelephonyConnection callConnection = new NativeTelephonyConnection(context);\r\n\r\n        var callerName = request.getExtras().getString(TelecomManager.EXTRA_CALL_BACK_NUMBER);\r\n        var callerNumber = request.getExtras().getParcelable(TelecomManager.EXTRA_INCOMING_CALL_ADDRESS);\r\n\r\n        callConnection.setConnectionProperties(Connection.CAPABILITY_HOLD | Connection.CAPABILITY_MUTE);\r\n        callConnection.setAddress(request.getAddress(), TelecomManager.PRESENTATION_ALLOWED);\r\n        callConnection.setCallerDisplayName(callerName, TelecomManager.PRESENTATION_ALLOWED);\r\n\r\n        callConnection.setInitializing();\r\n        callConnection.setActive();\r\n        return callConnection;\r\n    }\r\n````\r\n\r\nI can confirm that both the callerName and callerNumber contain strings. Is it because the contact isn&#39;t in the phone contacts?\r\n\r\nThe emulator displays this:\r\n[![Phone screen][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1ewBB.png","title":"Android Java - Show incoming caller name and number","body":"<p>I have implemented my own ConnectionService and creating an new incoming call. The code is currently not showing the caller name - just the number</p>\n<pre><code>@RequiresApi(api = Build.VERSION_CODES.M)\n    @Override\n    public Connection onCreateIncomingConnection(final PhoneAccountHandle connectionManagerPhoneAccount, final ConnectionRequest request) {\n        Context context = getApplicationContext();\n\n        NativeTelephonyConnection callConnection = new NativeTelephonyConnection(context);\n\n        var callerName = request.getExtras().getString(TelecomManager.EXTRA_CALL_BACK_NUMBER);\n        var callerNumber = request.getExtras().getParcelable(TelecomManager.EXTRA_INCOMING_CALL_ADDRESS);\n\n        callConnection.setConnectionProperties(Connection.CAPABILITY_HOLD | Connection.CAPABILITY_MUTE);\n        callConnection.setAddress(request.getAddress(), TelecomManager.PRESENTATION_ALLOWED);\n        callConnection.setCallerDisplayName(callerName, TelecomManager.PRESENTATION_ALLOWED);\n\n        callConnection.setInitializing();\n        callConnection.setActive();\n        return callConnection;\n    }\n</code></pre>\n<p>I can confirm that both the callerName and callerNumber contain strings. Is it because the contact isn't in the phone contacts?</p>\n<p>The emulator displays this:\n<a href=\"https://i.stack.imgur.com/1ewBB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ewBB.png\" alt=\"Phone screen\" /></a></p>\n"},{"tags":["java","android","drawable"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":2,"creation_date":1682078046,"post_id":76072820,"comment_id":134162949,"body_markdown":"You should add more information like the whole error message, and all relevant source code in a form of minimal reproducible example. Have a look at [How do I ask a good question](https://stackoverflow.com/help/how-to-ask).","body":"You should add more information like the whole error message, and all relevant source code in a form of minimal reproducible example. Have a look at <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question</a>."},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":1,"creation_date":1682114937,"post_id":76072820,"comment_id":134170367,"body_markdown":"What type does `setBackground` take and what type is `R.drawable.add_background`? If you don&#39;t understand why that doesn&#39;t work, I would recommend you spend time learning Java by itself outside of Android.","body":"What type does <code>setBackground</code> take and what type is <code>R.drawable.add_background</code>? If you don&#39;t understand why that doesn&#39;t work, I would recommend you spend time learning Java by itself outside of Android."},{"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"score":0,"creation_date":1682115155,"post_id":76072820,"comment_id":134170392,"body_markdown":"@dominicoder it takes a `Drawable`, I&#39;m giving it an `Integer`. I don&#39;t get how the drawable file is an `Integer` and not a `Drawable`","body":"@dominicoder it takes a <code>Drawable</code>, I&#39;m giving it an <code>Integer</code>. I don&#39;t get how the drawable file is an <code>Integer</code> and not a <code>Drawable</code>"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":1,"creation_date":1682115482,"post_id":76072820,"comment_id":134170431,"body_markdown":"Have you read [the documentation](https://developer.android.com/guide/topics/resources/providing-resources) on the topic?","body":"Have you read <a href=\"https://developer.android.com/guide/topics/resources/providing-resources\" rel=\"nofollow noreferrer\">the documentation</a> on the topic?"},{"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"score":0,"creation_date":1682115578,"post_id":76072820,"comment_id":134170440,"body_markdown":"The android documentation is really hard to understand and kind of sucks in general, but it&#39;s probably worth a try.","body":"The android documentation is really hard to understand and kind of sucks in general, but it&#39;s probably worth a try."}],"answers":[{"tags":[],"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682190978,"creation_date":1682077936,"answer_id":76072900,"question_id":76072820,"body_markdown":"check out this line\r\n\r\n    updateView.setBackgroundResource(R.drawable.sub_background)\r\n\r\nthats how you are referencing to resources in code, referencing by `@` is for XMLs","title":"How do I change the background of an element to a different drawable?","body":"<p>check out this line</p>\n<pre><code>updateView.setBackgroundResource(R.drawable.sub_background)\n</code></pre>\n<p>thats how you are referencing to resources in code, referencing by <code>@</code> is for XMLs</p>\n"},{"tags":[],"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682126543,"creation_date":1682126543,"answer_id":76077588,"question_id":76072820,"body_markdown":"While experimenting, I found the answer.\r\n\r\nI set `getResources().getDrawable(R.drawable.add_background)` to a variable called `addBackground` (same with sub), and referred to that variable in `updateView.setBackground(addBackground)`\r\n\r\nThe code now looks like this:\r\n```\r\nDrawable addBackground = getResources().getDrawable(R.drawable.add_background);\r\nDrawable subBackground = getResources().getDrawable(R.drawable.sub_background);\r\nTextView updateView = findViewById(R.id.Team1UpdateView);\r\n\r\nif (team1UpdateAmount == 0) {updateView.setVisibility(View.INVISIBLE); return;}\r\n\r\n\r\n        updateView.setVisibility(View.VISIBLE);\r\n\r\n        if (team1UpdateAmount &gt; 0) {\r\n            updateView.setText(&quot;+&quot; + team1UpdateAmount);\r\n            updateView.setBackground(addBackground);\r\n        }\r\n        if (team1UpdateAmount &lt; 0) {\r\n            updateView.setText(&quot;&quot; + team1UpdateAmount);\r\n            updateView.setBackground(subBackground);\r\n        }\r\n```","title":"How do I change the background of an element to a different drawable?","body":"<p>While experimenting, I found the answer.</p>\n<p>I set <code>getResources().getDrawable(R.drawable.add_background)</code> to a variable called <code>addBackground</code> (same with sub), and referred to that variable in <code>updateView.setBackground(addBackground)</code></p>\n<p>The code now looks like this:</p>\n<pre><code>Drawable addBackground = getResources().getDrawable(R.drawable.add_background);\nDrawable subBackground = getResources().getDrawable(R.drawable.sub_background);\nTextView updateView = findViewById(R.id.Team1UpdateView);\n\nif (team1UpdateAmount == 0) {updateView.setVisibility(View.INVISIBLE); return;}\n\n\n        updateView.setVisibility(View.VISIBLE);\n\n        if (team1UpdateAmount &gt; 0) {\n            updateView.setText(&quot;+&quot; + team1UpdateAmount);\n            updateView.setBackground(addBackground);\n        }\n        if (team1UpdateAmount &lt; 0) {\n            updateView.setText(&quot;&quot; + team1UpdateAmount);\n            updateView.setBackground(subBackground);\n        }\n</code></pre>\n"}],"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76072900,"answer_count":2,"score":0,"last_activity_date":1682286698,"creation_date":1682077348,"question_id":76072820,"body_markdown":"I want to make a `textView` that turns green with a positive number, red with a negative number, and goes invisible when 0. I have two separate drawables for each background.\r\n\r\nI have changed `updateView.setDrawable(@Drawable/add_background)` to `updateView.setDrawable(R.drawable.add_background)`, and am now getting the error `&#39;setBackground(android.graphics.drawable.Drawable)&#39; in &#39;android.view.View&#39; cannot be applied to &#39;(int)&#39;`\r\n\r\nHere is the code: \r\n```\r\nInteger team1UpdateAmount = 0;\r\n\r\n\r\nTextView updateView = findViewById(R.id.team1UpdateView);\r\n    if (team1UpdateAmount == 0) {updateView.setVisibility(View.INVISIBLE); return;}\r\n\r\n    updateView.setVisibility(View.VISIBLE);\r\n\r\n    if (team1UpdateAmount &gt; 0) {\r\n        updateView.setText(&quot;+&quot; + team1UpdateAmount);\r\n        updateView.setBackground(R.drawable.add_background);\r\n    }\r\n    if (team1UpdateAmount &lt; 0) {\r\n        updateView.setText(&quot;&quot; + team1UpdateAmount);\r\n        updateView.setBackground(R.drawable.sub_background);\r\n    }\r\n```","title":"How do I change the background of an element to a different drawable?","body":"<p>I want to make a <code>textView</code> that turns green with a positive number, red with a negative number, and goes invisible when 0. I have two separate drawables for each background.</p>\n<p>I have changed <code>updateView.setDrawable(@Drawable/add_background)</code> to <code>updateView.setDrawable(R.drawable.add_background)</code>, and am now getting the error <code>'setBackground(android.graphics.drawable.Drawable)' in 'android.view.View' cannot be applied to '(int)'</code></p>\n<p>Here is the code:</p>\n<pre><code>Integer team1UpdateAmount = 0;\n\n\nTextView updateView = findViewById(R.id.team1UpdateView);\n    if (team1UpdateAmount == 0) {updateView.setVisibility(View.INVISIBLE); return;}\n\n    updateView.setVisibility(View.VISIBLE);\n\n    if (team1UpdateAmount &gt; 0) {\n        updateView.setText(&quot;+&quot; + team1UpdateAmount);\n        updateView.setBackground(R.drawable.add_background);\n    }\n    if (team1UpdateAmount &lt; 0) {\n        updateView.setText(&quot;&quot; + team1UpdateAmount);\n        updateView.setBackground(R.drawable.sub_background);\n    }\n</code></pre>\n"},{"tags":["java","generics","enums"],"answers":[{"tags":[],"owner":{"account_id":977569,"reputation":533,"user_id":998171,"display_name":"fpacifici"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1329120918,"creation_date":1329120918,"answer_id":9257327,"question_id":9257262,"body_markdown":"You cannot extend enums in java (http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html towards the end). Thus &lt;T extend Days&gt; is not possible.\r\n\r\n-IF you need your class to work only with your enum you don&#39;t need generics\r\n\r\n-if instead you need it to work with others enum (does it makes sense?) you don&#39;t need to specify the extend.\r\n\r\nWhat does exactly your State class do ?","title":"Generics using Enum in Java","body":"<p>You cannot extend enums in java (http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html towards the end). Thus  is not possible.</p>\n\n<p>-IF you need your class to work only with your enum you don't need generics</p>\n\n<p>-if instead you need it to work with others enum (does it makes sense?) you don't need to specify the extend.</p>\n\n<p>What does exactly your State class do ?</p>\n"},{"tags":[],"owner":{"account_id":928629,"reputation":3257,"user_id":958918,"accept_rate":77,"display_name":"Hachi"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1329120948,"creation_date":1329120948,"answer_id":9257336,"question_id":9257262,"body_markdown":"enums are final types, which means, you can not extend from them\r\n\r\na generic like &lt;T extend Days&gt; wants a Class as Parameter which is Days or an extended class, but the extended class is not possible\r\n\r\nso the only parameter possible is Days and you don&#39;t need a generic, if only one value is possible","title":"Generics using Enum in Java","body":"<p>enums are final types, which means, you can not extend from them</p>\n\n<p>a generic like  wants a Class as Parameter which is Days or an extended class, but the extended class is not possible</p>\n\n<p>so the only parameter possible is Days and you don't need a generic, if only one value is possible</p>\n"},{"tags":[],"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1329214176,"creation_date":1329133562,"answer_id":9259934,"question_id":9257262,"body_markdown":"This compiles fine for me under Java 6:\r\n\r\n    public enum Days {\r\n      SUNDAY, \r\n      MONDAY, \r\n      TUESDAY, \r\n      WEDNESDAY,\r\n      THURSDAY, \r\n      FRIDAY, \r\n      SATURDAY\r\n    }\r\n    \r\n    public class State&lt;T extends Days&gt; {\r\n      T state;\r\n      \r\n      public State(T startState) {\r\n        this.state = startState;\r\n      }\r\n    }\r\n    \r\n    private void test() {\r\n      State&lt;Days&gt; state = new State&lt;Days&gt; (Days.MONDAY);\r\n    }\r\n\r\nHowever, if you want your `State` object to change from one `enum` to another you would be better to use something like:\r\n\r\n    public class State&lt;S extends Enum&lt;S&gt;&gt; {\r\n      final ArrayList&lt;S&gt; states = new ArrayList&lt;S&gt;();\r\n      private S state;\r\n    \r\n      public State(S startState) {\r\n        states.addAll(EnumSet.allOf(startState.getClass()));\r\n        this.state = startState;\r\n      }\r\n    \r\n      public S next() {\r\n        return state = states.get((state.ordinal() + 1) % states.size());\r\n      }\r\n    \r\n      public S prev() {\r\n        return state = states.get((state.ordinal() - 1 + states.size()) % states.size());\r\n      }\r\n    \r\n      public S set(S newState) {\r\n        return state = newState;\r\n      }\r\n    \r\n      public S get() {\r\n        return state;\r\n      }\r\n    }\r\n        \r\n    private void test() {\r\n      State&lt;Days&gt; state = new State&lt;Days&gt; (Days.MONDAY);\r\n      // ...\r\n    }\r\n","title":"Generics using Enum in Java","body":"<p>This compiles fine for me under Java 6:</p>\n\n<pre><code>public enum Days {\n  SUNDAY, \n  MONDAY, \n  TUESDAY, \n  WEDNESDAY,\n  THURSDAY, \n  FRIDAY, \n  SATURDAY\n}\n\npublic class State&lt;T extends Days&gt; {\n  T state;\n\n  public State(T startState) {\n    this.state = startState;\n  }\n}\n\nprivate void test() {\n  State&lt;Days&gt; state = new State&lt;Days&gt; (Days.MONDAY);\n}\n</code></pre>\n\n<p>However, if you want your <code>State</code> object to change from one <code>enum</code> to another you would be better to use something like:</p>\n\n<pre><code>public class State&lt;S extends Enum&lt;S&gt;&gt; {\n  final ArrayList&lt;S&gt; states = new ArrayList&lt;S&gt;();\n  private S state;\n\n  public State(S startState) {\n    states.addAll(EnumSet.allOf(startState.getClass()));\n    this.state = startState;\n  }\n\n  public S next() {\n    return state = states.get((state.ordinal() + 1) % states.size());\n  }\n\n  public S prev() {\n    return state = states.get((state.ordinal() - 1 + states.size()) % states.size());\n  }\n\n  public S set(S newState) {\n    return state = newState;\n  }\n\n  public S get() {\n    return state;\n  }\n}\n\nprivate void test() {\n  State&lt;Days&gt; state = new State&lt;Days&gt; (Days.MONDAY);\n  // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1682286423,"creation_date":1329135091,"answer_id":9260313,"question_id":9257262,"body_markdown":"Don&#39;t use a generics bound. There&#39;s no need. Just use an unbounded type, like this:\r\n\r\n    public class State&lt;T&gt; {\r\n        public State(T startState) {\r\n            // whatever\r\n        } \r\n    }\r\n\r\nAnd to use it:\r\n\r\n    State&lt;Days&gt; dayState = new State&lt;&gt;(Days.SUNDAY);\r\n\r\nThis is a straightforward typed class that doesn&#39;t need a bound.\r\n\r\nThe only bound that might make sense is a bound to an `enum`:\r\n\r\n    public class State&lt;T extends Enum&lt;T&gt;&gt; {\r\n        public State(T startState) {\r\n            // whatever\r\n        } \r\n    } \r\n\r\nThis version requires that the generic parameter be an `enum`. With this version the above usage example would still compile, but this would not compile (for example):\r\n\r\n    State&lt;String&gt; dayState = new State&lt;&gt;(&quot;hello&quot;);\r\n\r\nbecause `String` is not an `enum`.\r\n\r\n\r\n","title":"Generics using Enum in Java","body":"<p>Don't use a generics bound. There's no need. Just use an unbounded type, like this:</p>\n<pre><code>public class State&lt;T&gt; {\n    public State(T startState) {\n        // whatever\n    } \n}\n</code></pre>\n<p>And to use it:</p>\n<pre><code>State&lt;Days&gt; dayState = new State&lt;&gt;(Days.SUNDAY);\n</code></pre>\n<p>This is a straightforward typed class that doesn't need a bound.</p>\n<p>The only bound that might make sense is a bound to an <code>enum</code>:</p>\n<pre><code>public class State&lt;T extends Enum&lt;T&gt;&gt; {\n    public State(T startState) {\n        // whatever\n    } \n} \n</code></pre>\n<p>This version requires that the generic parameter be an <code>enum</code>. With this version the above usage example would still compile, but this would not compile (for example):</p>\n<pre><code>State&lt;String&gt; dayState = new State&lt;&gt;(&quot;hello&quot;);\n</code></pre>\n<p>because <code>String</code> is not an <code>enum</code>.</p>\n"},{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1329151363,"creation_date":1329151363,"answer_id":9264323,"question_id":9257262,"body_markdown":"The thing to do here is\r\n\r\n    public enum Days{..}\r\n\r\n    public class State { // no generic argument!\r\n      ...\r\n    }\r\n\r\nAs it stands, you can&#39;t have `State&lt;T extends Days&gt;` because the only way to satisfy `T extends Days` is to have `T` _be_ `Days`.  That&#39;s what it means for `Days` to be `final`.\r\n\r\nSo instead, you should make `State` _not_ generic, and use `Days` directly everywhere you were trying to use `T`.  You can&#39;t declare `public class State&lt;Days&gt;`, because then it&#39;ll try to treat `Days` as a type _variable,_ not as the class `Days`, and that&#39;s _not_ what you want.","title":"Generics using Enum in Java","body":"<p>The thing to do here is</p>\n\n<pre><code>public enum Days{..}\n\npublic class State { // no generic argument!\n  ...\n}\n</code></pre>\n\n<p>As it stands, you can't have <code>State&lt;T extends Days&gt;</code> because the only way to satisfy <code>T extends Days</code> is to have <code>T</code> <em>be</em> <code>Days</code>.  That's what it means for <code>Days</code> to be <code>final</code>.</p>\n\n<p>So instead, you should make <code>State</code> <em>not</em> generic, and use <code>Days</code> directly everywhere you were trying to use <code>T</code>.  You can't declare <code>public class State&lt;Days&gt;</code>, because then it'll try to treat <code>Days</code> as a type <em>variable,</em> not as the class <code>Days</code>, and that's <em>not</em> what you want.</p>\n"}],"owner":{"account_id":1167478,"reputation":3167,"user_id":1151746,"accept_rate":79,"display_name":"Rog Matthews"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11994,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":9260313,"answer_count":5,"score":16,"last_activity_date":1682286423,"creation_date":1329120531,"question_id":9257262,"body_markdown":"I have an enum\r\n\r\n    public enum Days {\r\n    SUNDAY, MONDAY, TUESDAY, WEDNESDAY,\r\n    THURSDAY, FRIDAY, SATURDAY \r\n}\r\n\r\nI want to make a class which can take values of type Days. So I used Java Generics \r\n\r\n    public class State&lt;T extend Days&gt;\r\n\r\nBut there is an error\r\n\r\n    The type parameter T should not be bounded by the final type Days. \r\n    Final types cannot be further extended\r\n\r\nHow can I resolve this?","title":"Generics using Enum in Java","body":"<p>I have an enum</p>\n\n<pre><code>public enum Days {\nSUNDAY, MONDAY, TUESDAY, WEDNESDAY,\nTHURSDAY, FRIDAY, SATURDAY \n</code></pre>\n\n<p>}</p>\n\n<p>I want to make a class which can take values of type Days. So I used Java Generics </p>\n\n<pre><code>public class State&lt;T extend Days&gt;\n</code></pre>\n\n<p>But there is an error</p>\n\n<pre><code>The type parameter T should not be bounded by the final type Days. \nFinal types cannot be further extended\n</code></pre>\n\n<p>How can I resolve this?</p>\n"},{"tags":["java","maven","jsonschema","hl7-fhir","jsonschema2pojo"],"comments":[{"owner":{"account_id":1274439,"reputation":3498,"user_id":1229969,"accept_rate":62,"display_name":"Grahame Grieve"},"score":1,"creation_date":1564487419,"post_id":57269064,"comment_id":101039992,"body_markdown":"I&#39;m not familiar with these jsonschema2pojo - but json schema and the tools are immature in regard to some of the features that FHIR hammers on, so I woluldn&#39;t be surprised if you have problems. Have you looked at HAPI-FHIR?","body":"I&#39;m not familiar with these jsonschema2pojo - but json schema and the tools are immature in regard to some of the features that FHIR hammers on, so I woluldn&#39;t be surprised if you have problems. Have you looked at HAPI-FHIR?"},{"owner":{"account_id":2725644,"reputation":4730,"user_id":2350799,"accept_rate":83,"display_name":"xcesco"},"score":0,"creation_date":1564499091,"post_id":57269064,"comment_id":101047486,"body_markdown":"Not jet! I will have a look at HAPI-FHIR. Tnx!","body":"Not jet! I will have a look at HAPI-FHIR. Tnx!"}],"answers":[{"tags":[],"owner":{"account_id":4387361,"reputation":347,"user_id":3577053,"display_name":"user07"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1569615506,"creation_date":1569615506,"answer_id":58140913,"question_id":57269064,"body_markdown":"By default jsonschema2pojo plugin generates the files to **target/java-gen/** folder, not the one you have specified. ","title":"jsonschema2pojo maven plugin does not generate Java classes","body":"<p>By default jsonschema2pojo plugin generates the files to <strong>target/java-gen/</strong> folder, not the one you have specified. </p>\n"},{"tags":[],"owner":{"account_id":11041351,"reputation":701,"user_id":8109134,"display_name":"Vivek Tyagi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682285763,"creation_date":1682285763,"answer_id":76087388,"question_id":57269064,"body_markdown":"@xcesco - Each maven tag such as - sourceDirectory, and targetPackage, has specific meaning. You can check for more details at plugin page. \r\n\r\nTry providing outputdirectory.\r\n\r\n    &lt;plugin&gt;\r\n    \t\t\t    &lt;groupId&gt;org.jsonschema2pojo&lt;/groupId&gt;\r\n    \t\t\t    &lt;artifactId&gt;jsonschema2pojo-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t    &lt;!--&lt;version&gt;1.2.1&lt;/version&gt;--&gt;\r\n    \t\t\t    &lt;executions&gt;\r\n    \t\t\t        &lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;generate-message-contracts&lt;/id&gt;\r\n    \t\t\t            &lt;goals&gt;\r\n    \t\t\t                &lt;goal&gt;generate&lt;/goal&gt;\r\n    \t\t\t            &lt;/goals&gt;\r\n    \t\t\t            &lt;configuration&gt;\r\n    \t\t\t\t\t        &lt;sourceDirectory&gt;project path..\\directory\\&lt;/sourceDirectory&gt;\r\n    \t\t\t\t\t        &lt;outputDirectory&gt;${basedir}/directory/src/gen/java&lt;/outputDirectory&gt;\r\n    \t\t\t    \t\t&lt;/configuration&gt;\r\n    \t\t\t        &lt;/execution&gt;\r\n    \t\t\t    &lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n\r\n\r\n","title":"jsonschema2pojo maven plugin does not generate Java classes","body":"<p>@xcesco - Each maven tag such as - sourceDirectory, and targetPackage, has specific meaning. You can check for more details at plugin page.</p>\n<p>Try providing outputdirectory.</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.jsonschema2pojo&lt;/groupId&gt;\n                &lt;artifactId&gt;jsonschema2pojo-maven-plugin&lt;/artifactId&gt;\n                &lt;!--&lt;version&gt;1.2.1&lt;/version&gt;--&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;generate-message-contracts&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;sourceDirectory&gt;project path..\\directory\\&lt;/sourceDirectory&gt;\n                            &lt;outputDirectory&gt;${basedir}/directory/src/gen/java&lt;/outputDirectory&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":2725644,"reputation":4730,"user_id":2350799,"accept_rate":83,"display_name":"xcesco"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6568,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1682285763,"creation_date":1564480791,"question_id":57269064,"body_markdown":"I&#39;m trying to obtain the Java model for the [FHIR R4 specification][1]. To accomplish this task, I downloaded the [JSON Schema][2] and I try to use jsonschema2pojo maven plugin to generate the source code.\r\n\r\nI create a simple Maven project and I put the JSON Schema under `src/main/resources/schema`. So, I defined the following `pom`:\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;fhir-generator&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.9.9.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jsonschema2pojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jsonschema2pojo-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;sourceDirectory&gt;${basedir}/src/main/resources/schema&lt;/sourceDirectory&gt;\r\n\t\t\t\t\t&lt;targetPackage&gt;com.example.fhir&lt;/targetPackage&gt;\r\n\t\t\t\t\t&lt;useCommonsLang3&gt;true&lt;/useCommonsLang3&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;generate&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nWhen I run the goal `package` I obtain the folliwing output:\r\n\r\n```\r\n[INFO] Scanning for projects...\r\n[WARNING] \r\n[WARNING] Some problems were encountered while building the effective model for come.example:fhir-generator:jar:0.0.1-SNAPSHOT\r\n[WARNING] &#39;build.plugins.plugin.version&#39; for org.apache.maven.plugins:maven-compiler-plugin is missing. @ line 24, column 12\r\n[WARNING] \r\n[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\r\n[WARNING] \r\n[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\r\n[WARNING] \r\n[INFO]                                                                         \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Building fhir-generator 0.0.1-SNAPSHOT\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] \r\n[INFO] --- jsonschema2pojo-maven-plugin:1.0.1:generate (default) @ fhir-generator ---\r\n[WARNING] useCommonsLang3 is deprecated. Please remove it from your config.\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ fhir-generator ---\r\n[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\r\n[INFO] Copying 1 resource\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ fhir-generator ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ fhir-generator ---\r\n[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\r\n[INFO] Copying 0 resource\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ fhir-generator ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO] \r\n[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ fhir-generator ---\r\n[INFO] \r\n[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ fhir-generator ---\r\n[INFO] Building jar: Z:\\work\\backend\\fhir-generator\\target\\fhir-generator-0.0.1-SNAPSHOT.jar\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time: 2.921 s\r\n[INFO] Finished at: 2019-07-30T11:21:25+02:00\r\n[INFO] Final Memory: 12M/208M\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n\r\nThe problem is that no classes were generated in `target/generated-sources` folder. Any ideas about it? Tnx in advance\r\n\r\n  [1]: https://www.hl7.org/fhir/downloads.html\r\n  [2]: https://www.hl7.org/fhir/fhir.schema.json.zip","title":"jsonschema2pojo maven plugin does not generate Java classes","body":"<p>I'm trying to obtain the Java model for the <a href=\"https://www.hl7.org/fhir/downloads.html\" rel=\"nofollow noreferrer\">FHIR R4 specification</a>. To accomplish this task, I downloaded the <a href=\"https://www.hl7.org/fhir/fhir.schema.json.zip\" rel=\"nofollow noreferrer\">JSON Schema</a> and I try to use jsonschema2pojo maven plugin to generate the source code.</p>\n\n<p>I create a simple Maven project and I put the JSON Schema under <code>src/main/resources/schema</code>. So, I defined the following <code>pom</code>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;fhir-generator&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.9.9.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jsonschema2pojo&lt;/groupId&gt;\n                &lt;artifactId&gt;jsonschema2pojo-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.0.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;sourceDirectory&gt;${basedir}/src/main/resources/schema&lt;/sourceDirectory&gt;\n                    &lt;targetPackage&gt;com.example.fhir&lt;/targetPackage&gt;\n                    &lt;useCommonsLang3&gt;true&lt;/useCommonsLang3&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>When I run the goal <code>package</code> I obtain the folliwing output:</p>\n\n<pre><code>[INFO] Scanning for projects...\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for come.example:fhir-generator:jar:0.0.1-SNAPSHOT\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-compiler-plugin is missing. @ line 24, column 12\n[WARNING] \n[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\n[WARNING] \n[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\n[WARNING] \n[INFO]                                                                         \n[INFO] ------------------------------------------------------------------------\n[INFO] Building fhir-generator 0.0.1-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- jsonschema2pojo-maven-plugin:1.0.1:generate (default) @ fhir-generator ---\n[WARNING] useCommonsLang3 is deprecated. Please remove it from your config.\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ fhir-generator ---\n[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\n[INFO] Copying 1 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ fhir-generator ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ fhir-generator ---\n[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\n[INFO] Copying 0 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ fhir-generator ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ fhir-generator ---\n[INFO] \n[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ fhir-generator ---\n[INFO] Building jar: Z:\\work\\backend\\fhir-generator\\target\\fhir-generator-0.0.1-SNAPSHOT.jar\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 2.921 s\n[INFO] Finished at: 2019-07-30T11:21:25+02:00\n[INFO] Final Memory: 12M/208M\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n\n<p>The problem is that no classes were generated in <code>target/generated-sources</code> folder. Any ideas about it? Tnx in advance</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":956792,"reputation":742,"user_id":981953,"accept_rate":68,"display_name":"Tejas jain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682194480,"creation_date":1682194480,"answer_id":76081747,"question_id":76081654,"body_markdown":"Welcome to Java!\r\n\r\n\r\nJust create a new reuslt object of MyResult type and return!\r\n\r\n    class MyResult{\r\n        String strValue;\r\n        boolean result;\r\n\r\n        MyResult(String strValue, boolean result){\r\n            this.strValue = strValue;\r\n            this.result = result;\r\n        }\r\n\r\n        boolean getResult(){\r\n            return result;\r\n        }\r\n\r\n        boolean getStrValue(){\r\n            return strValue;\r\n        }\r\n    }\r\n\r\nIn your code, \r\n\r\n    MyResult evaluateSring(String strValue)\r\n    {\r\n        //some process of strvalue and \r\n       bool result = false;\r\n       strValue = strValue.strstr( x, y)\r\n       ...\r\n       return new MyResult(strValue, result);\r\n    }\r\n\r\nAt he place you are calling this method, do\r\n\r\n    MyResult myResult =  evaluateSring(strValue)\r\n    \r\n    strValue = myResult.getStrValue();\r\n    boolean result = myResult.getResult();","title":"How to modify input parameter or how to return more than one values","body":"<p>Welcome to Java!</p>\n<p>Just create a new reuslt object of MyResult type and return!</p>\n<pre><code>class MyResult{\n    String strValue;\n    boolean result;\n\n    MyResult(String strValue, boolean result){\n        this.strValue = strValue;\n        this.result = result;\n    }\n\n    boolean getResult(){\n        return result;\n    }\n\n    boolean getStrValue(){\n        return strValue;\n    }\n}\n</code></pre>\n<p>In your code,</p>\n<pre><code>MyResult evaluateSring(String strValue)\n{\n    //some process of strvalue and \n   bool result = false;\n   strValue = strValue.strstr( x, y)\n   ...\n   return new MyResult(strValue, result);\n}\n</code></pre>\n<p>At he place you are calling this method, do</p>\n<pre><code>MyResult myResult =  evaluateSring(strValue)\n\nstrValue = myResult.getStrValue();\nboolean result = myResult.getResult();\n</code></pre>\n"}],"owner":{"account_id":15753692,"reputation":31,"user_id":11367441,"display_name":"zheng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1682250255,"accepted_answer_id":76081747,"answer_count":1,"score":0,"last_activity_date":1682285731,"creation_date":1682193079,"question_id":76081654,"body_markdown":"Ok let me simplify the code logic, We have a C++ project and \r\nthere are at least 100 functions with similar following pattern. I need to convert it into Java code. Then I have some problem\r\n\r\n    int evaluateFunc(const para1 /*input only*/, para2 &amp;/* input&amp;output*/, para3 &amp; /*output only */ ...)\r\n    {\r\n       int result = OK;\r\n       ...\r\n       // For Input parameter, we defined as const. e.g. para1\r\n       // For Input/Output parameter, we pass either by reference or pointer, as it may get updated during data processing.  e.g. para2 \r\n       // For output only parameter, which will be modified inside function. e.g. para3\r\n       ...\r\n       return result;\r\n    }\r\n\r\nThere are two keys in our evaluateFunc function\r\n 1. the input/output or output only parameters will be updated by our function as after this function call, these data will be processed by some other function as well. so we use either reference or pointer as parameter and pass to each functions.\r\n 2. this function need always return an integer value as result to indicate whether this function success or not. e.g. 0 is success, any other integer is error code. WE have a big error list and it could more than 50 different error code.  As we have some error handling outside to check this error code and depend the error code to process it accordingly.\r\n\r\nBased on my understanding, Java don&#39;t support pass by reference or pointer.\r\nAnd all values are passed by copy. Java only can return one value each time which mean if every function need return both error code + some new data (or modified data), then I need create a class for each of them.\r\nUnfortunately, the only common part for each function is error code return is expected, all other value return is random. \r\nSo in the worst case, I need create 100 different class to cover all the different function return result. \r\nIs there any generic solution for Java function return result?","title":"How to modify input parameter or how to return more than one values","body":"<p>Ok let me simplify the code logic, We have a C++ project and\nthere are at least 100 functions with similar following pattern. I need to convert it into Java code. Then I have some problem</p>\n<pre><code>int evaluateFunc(const para1 /*input only*/, para2 &amp;/* input&amp;output*/, para3 &amp; /*output only */ ...)\n{\n   int result = OK;\n   ...\n   // For Input parameter, we defined as const. e.g. para1\n   // For Input/Output parameter, we pass either by reference or pointer, as it may get updated during data processing.  e.g. para2 \n   // For output only parameter, which will be modified inside function. e.g. para3\n   ...\n   return result;\n}\n</code></pre>\n<p>There are two keys in our evaluateFunc function</p>\n<ol>\n<li>the input/output or output only parameters will be updated by our function as after this function call, these data will be processed by some other function as well. so we use either reference or pointer as parameter and pass to each functions.</li>\n<li>this function need always return an integer value as result to indicate whether this function success or not. e.g. 0 is success, any other integer is error code. WE have a big error list and it could more than 50 different error code.  As we have some error handling outside to check this error code and depend the error code to process it accordingly.</li>\n</ol>\n<p>Based on my understanding, Java don't support pass by reference or pointer.\nAnd all values are passed by copy. Java only can return one value each time which mean if every function need return both error code + some new data (or modified data), then I need create a class for each of them.\nUnfortunately, the only common part for each function is error code return is expected, all other value return is random.\nSo in the worst case, I need create 100 different class to cover all the different function return result.\nIs there any generic solution for Java function return result?</p>\n"},{"tags":["java","jvm","oracle-sqldeveloper","java-11","msvcr100.dll"],"comments":[{"owner":{"account_id":529084,"reputation":20905,"user_id":1156452,"display_name":"thatjeffsmith"},"score":2,"creation_date":1612573076,"post_id":66072546,"comment_id":116817766,"body_markdown":"Find a copy of that dll file and put it in your jdk/bin folder","body":"Find a copy of that dll file and put it in your jdk/bin folder"},{"owner":{"account_id":16171601,"reputation":122,"user_id":11675272,"display_name":"SmilingMouse"},"score":0,"creation_date":1612573370,"post_id":66072546,"comment_id":116817816,"body_markdown":"That&#39;s right copy msvcr100.dll and msvcp140.dll from previous JDK and it should help: https://community.oracle.com/tech/developers/discussion/4339484/unable-to-launch-the-java-virtual-machine-msvcr100-dll-with-jdk-1-8u261","body":"That&#39;s right copy msvcr100.dll and msvcp140.dll from previous JDK and it should help: <a href=\"https://community.oracle.com/tech/developers/discussion/4339484/unable-to-launch-the-java-virtual-machine-msvcr100-dll-with-jdk-1-8u261\" rel=\"nofollow noreferrer\">community.oracle.com/tech/developers/discussion/4339484/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":28391264,"reputation":1,"user_id":21716996,"display_name":"AGI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682285423,"creation_date":1682285423,"answer_id":76087369,"question_id":66072546,"body_markdown":"The easiest way is to download latest version :\r\n\r\nhttps://www.oracle.com/database/sqldeveloper/technologies/download/\r\n","title":"unable to launch SQLDevelper 20.4.0.379","body":"<p>The easiest way is to download latest version :</p>\n<p><a href=\"https://www.oracle.com/database/sqldeveloper/technologies/download/\" rel=\"nofollow noreferrer\">https://www.oracle.com/database/sqldeveloper/technologies/download/</a></p>\n"}],"owner":{"account_id":16156564,"reputation":21,"user_id":11663686,"display_name":"HHH"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":756,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682285423,"creation_date":1612572851,"question_id":66072546,"body_markdown":"Im having this error when i try to launch sqldeveloper :  &quot; unable to launch the java virtual machine locate at path: ERROR: ca,t find msvcr100.dll or msvcp140.dll &quot;\r\n\r\njava home is configured (i&#39;m  using JDK 11.0.9)\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8wPJi.png","title":"unable to launch SQLDevelper 20.4.0.379","body":"<p>Im having this error when i try to launch sqldeveloper :  &quot; unable to launch the java virtual machine locate at path: ERROR: ca,t find msvcr100.dll or msvcp140.dll &quot;</p>\n<p>java home is configured (i'm  using JDK 11.0.9)</p>\n<p><a href=\"https://i.stack.imgur.com/8wPJi.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","android","unity-game-engine"],"comments":[{"owner":{"account_id":794314,"reputation":4831,"user_id":920069,"display_name":"Retired Ninja"},"score":0,"creation_date":1682201631,"post_id":76081392,"comment_id":134178749,"body_markdown":"I would use the [External Dependency Manager](https://github.com/googlesamples/unity-jar-resolver) and be sure to enable the Use Jetifier option to try and update any legacy plugins to use their AndroidX counterpart.","body":"I would use the <a href=\"https://github.com/googlesamples/unity-jar-resolver\" rel=\"nofollow noreferrer\">External Dependency Manager</a> and be sure to enable the Use Jetifier option to try and update any legacy plugins to use their AndroidX counterpart."}],"owner":{"account_id":25942713,"reputation":11,"user_id":19661921,"display_name":"Shawlong"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682285400,"creation_date":1682189333,"question_id":76081392,"body_markdown":"How to add the `Androidx library` (appcompat) to a `Unity` project?\r\n\r\nI try to add the `appcompat.aar` taken from [maven google](https://maven.google.com/web/index.html#androidx.appcompat:appcompat) in my folder asset&gt;Plugins&gt;Android\r\n\r\nBut I have this error in my debugger\r\n\r\n    2023-04-22 14:46:21.936 8819 8857 Error Unity AndroidJavaException: java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/appcompat/app/AppCompatActivity;\r\n    2023-04-22 14:46:21.936 8819 8857 Error Unity java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/appcompat/app/AppCompatActivity;\r\n\r\nWhat did I do wrong?","title":"How to add androidx library(appcompat) to a unity project?","body":"<p>How to add the <code>Androidx library</code> (appcompat) to a <code>Unity</code> project?</p>\n<p>I try to add the <code>appcompat.aar</code> taken from <a href=\"https://maven.google.com/web/index.html#androidx.appcompat:appcompat\" rel=\"nofollow noreferrer\">maven google</a> in my folder asset&gt;Plugins&gt;Android</p>\n<p>But I have this error in my debugger</p>\n<pre><code>2023-04-22 14:46:21.936 8819 8857 Error Unity AndroidJavaException: java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/appcompat/app/AppCompatActivity;\n2023-04-22 14:46:21.936 8819 8857 Error Unity java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/appcompat/app/AppCompatActivity;\n</code></pre>\n<p>What did I do wrong?</p>\n"},{"tags":["java","spring","openfeign","spring-native"],"answers":[{"tags":[],"owner":{"account_id":5710636,"reputation":760,"user_id":4512780,"display_name":"Luk&#225;š Koř&#225;n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682283258,"creation_date":1682283258,"answer_id":76087225,"question_id":76076918,"body_markdown":"I assume you&#39;re using Spring Boot 3.0.6. Try downgrading to 3.0.5, that should resolve the issue. At least until there is a Spring Boot version that fixes this problem. ","title":"Using java AOT /native compilation with openfeign 2022.0.2","body":"<p>I assume you're using Spring Boot 3.0.6. Try downgrading to 3.0.5, that should resolve the issue. At least until there is a Spring Boot version that fixes this problem.</p>\n"}],"owner":{"account_id":3433779,"reputation":1113,"user_id":2877358,"accept_rate":82,"display_name":"Rik Schaaf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682283258,"creation_date":1682113784,"question_id":76076918,"body_markdown":"I read that starting spring-cloud 2022.0.0, you can use native compilation. I&#39;m using 2022.0.2 (spring-cloud-starter-openfeign:4.0.2), but when I use an OpenFeign client with native compilation, I get the following error:\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;boxedHelloController&#39;: Unsatisfied dependency expressed through field &#39;helloWorldClient&#39;: Error creating bean with name &#39;nl.cqit.function.poc.java.helloworld.controller.HelloWorldClient&#39;: Post-processing of FactoryBean&#39;&#39;s singleton object failed\r\n        at org.springframework.beans.factory.aot.AutowiredFieldValueResolver.resolveValue(AutowiredFieldValueResolver.java:195) ~[na:na]\r\n        at org.springframework.beans.factory.aot.AutowiredFieldValueResolver.resolveAndSet(AutowiredFieldValueResolver.java:167) ~[na:na]\r\n        at nl.cqit.function.poc.java.boxedhello.controller.BoxedHelloController__Autowiring.apply(BoxedHelloController__Autowiring.java:15) ~[na:na]\r\n        at org.springframework.beans.factory.support.InstanceSupplier$1.get(InstanceSupplier.java:83) ~[na:na]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.obtainInstanceFromSupplier(DefaultListableBeanFactory.java:947) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1214) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1158) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[boxedhello-app.exe:3.0.5]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[boxedhello-app.exe:3.0.5]\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[boxedhello-app.exe:3.0.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:310) ~[boxedhello-app.exe:3.0.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[boxedhello-app.exe:3.0.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[boxedhello-app.exe:3.0.5]\r\n        at nl.cqit.function.poc.java.boxedhello.Main.main(Main.java:12) ~[boxedhello-app.exe:na]\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;nl.cqit.function.poc.java.helloworld.controller.HelloWorldClient&#39;: Post-processing of FactoryBean&#39;&#39;s singleton object failed\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:108) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.aot.AutowiredFieldValueResolver.resolveValue(AutowiredFieldValueResolver.java:189) ~[na:na]\r\n        ... 22 common frames omitted\r\nCaused by: com.oracle.svm.core.jdk.UnsupportedFeatureError: Proxy class defined by interfaces [interface nl.cqit.function.poc.java.helloworld.controller.HelloWorldClient, interface org.springframework.aop.SpringProxy, interface org.springframework.aop.framework.Advised, interface org.springframework.core.DecoratingProxy] not found. Generating proxy classes at runtime is not supported. Proxy classes need to be defined at image build time by specifying the list of interfaces that they implement. To define proxy classes use -H:DynamicProxyConfigurationFiles=&lt;comma-separated-config-files&gt; and -H:DynamicProxyConfigurationResources=&lt;comma-separated-config-resources&gt; options.\r\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.util.VMError.unsupportedFeature(VMError.java:89) ~[na:na]\r\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.reflect.proxy.DynamicProxySupport.getProxyClass(DynamicProxySupport.java:171) ~[na:na]\r\n        at java.base@19.0.2/java.lang.reflect.Proxy.getProxyConstructor(Proxy.java:47) ~[boxedhello-app.exe:na]\r\n        at java.base@19.0.2/java.lang.reflect.Proxy.newProxyInstance(Proxy.java:1037) ~[boxedhello-app.exe:na]\r\n        at org.springframework.aop.framework.JdkDynamicAopProxy.getProxy(JdkDynamicAopProxy.java:123) ~[na:na]\r\n        at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:110) ~[na:na]\r\n        at org.springframework.aop.framework.AbstractAdvisingBeanPostProcessor.postProcessAfterInitialization(AbstractAdvisingBeanPostProcessor.java:127) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:434) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.postProcessObjectFromFactoryBean(AbstractAutowireCapableBeanFactory.java:1885) ~[boxedhello-app.exe:6.0.7]\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:105) ~[boxedhello-app.exe:6.0.7]\r\n        ... 32 common frames omitted\r\n```\r\n\r\nHere is my API interface:\r\n```java\r\npackage nl.cqit.function.poc.java.helloworld.api;\r\n\r\nimport io.swagger.v3.oas.annotations.Operation;\r\nimport io.swagger.v3.oas.annotations.Parameter;\r\nimport io.swagger.v3.oas.annotations.media.Content;\r\nimport io.swagger.v3.oas.annotations.media.Schema;\r\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\r\nimport io.swagger.v3.oas.annotations.tags.Tag;\r\nimport jakarta.validation.Valid;\r\nimport nl.cqit.function.poc.java.helloworld.api.model.Person;\r\nimport nl.cqit.function.poc.java.helloworld.api.model.Problem;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.validation.annotation.Validated;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestMethod;\r\nimport org.springframework.web.bind.annotation.ResponseStatus;\r\n\r\n@Validated\r\n@Tag(\r\n    name = &quot;HelloWorld&quot;,\r\n    description = &quot;the HelloWorld API&quot;\r\n)\r\npublic interface HelloWorldApi {\r\n    @Operation(\r\n        operationId = &quot;sayHello&quot;,\r\n        summary = &quot;The main function&quot;,\r\n        description = &quot;This endpoint will call sayHello&quot;,\r\n        tags = {&quot;HelloWorld&quot;},\r\n        responses = {@ApiResponse(\r\n    responseCode = &quot;200&quot;,\r\n    description = &quot;OK&quot;,\r\n    content = {@Content(\r\n    mediaType = &quot;application/json&quot;,\r\n    schema = @Schema(\r\n    implementation = String.class\r\n)\r\n), @Content(\r\n    mediaType = &quot;application/problem+json&quot;,\r\n    schema = @Schema(\r\n    implementation = String.class\r\n)\r\n)}\r\n), @ApiResponse(\r\n    responseCode = &quot;400&quot;,\r\n    description = &quot;input validation failed&quot;,\r\n    content = {@Content(\r\n    mediaType = &quot;application/json&quot;,\r\n    schema = @Schema(\r\n    implementation = Problem.class\r\n)\r\n), @Content(\r\n    mediaType = &quot;application/problem+json&quot;,\r\n    schema = @Schema(\r\n    implementation = Problem.class\r\n)\r\n)}\r\n)}\r\n    )\r\n    @RequestMapping(\r\n        method = {RequestMethod.POST},\r\n        value = {&quot;/helloWorld&quot;},\r\n        produces = {&quot;application/json&quot;, &quot;application/problem+json&quot;},\r\n        consumes = {&quot;application/json&quot;}\r\n    )\r\n    @ResponseStatus(HttpStatus.OK)\r\n    String sayHello(@Parameter(name = &quot;Person&quot;,description = &quot;&quot;,required = true) @RequestBody @Valid Person var1);\r\n}\r\n```\r\nAnd here is my Feign client:\r\n```java\r\npackage nl.cqit.function.poc.java.helloworld.controller;\r\n\r\nimport nl.cqit.function.poc.java.helloworld.api.HelloWorldApi;\r\nimport org.springframework.cloud.openfeign.FeignClient;\r\n\r\n@FeignClient(name = &quot;helloWorldClient&quot;, url = &quot;http://localhost:8080&quot;)\r\npublic interface HelloWorldClient extends HelloWorldApi {\r\n}\r\n```\r\nI&#39;m using it like this: \r\n\r\n```java\r\npackage nl.cqit.function.poc.java.boxedhello.impl;\r\n\r\nimport nl.cqit.function.poc.java.boxedhello.api.BoxedHelloApi;\r\nimport nl.cqit.function.poc.java.boxedhello.api.model.Person;\r\nimport nl.cqit.function.poc.java.helloworld.controller.HelloWorldClient;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class BoxedHelloImpl implements BoxedHelloApi {\r\n\r\n    @Autowired\r\n    private HelloWorldClient helloWorldClient;\r\n\r\n    @Override\r\n    public String sayHello(Person person) {\r\n        String greeting = helloWorldClient.sayHello(map(person));\r\n        String horizontalEdge = &quot;+&quot; + &quot;-&quot;.repeat(greeting.length() + 2) + &quot;+&quot;;\r\n        return horizontalEdge + &quot;\\n| &quot; + greeting + &quot; |\\n&quot; + horizontalEdge;\r\n    }\r\n\r\n    private nl.cqit.function.poc.java.helloworld.api.model.Person map(Person person) {\r\n        return new nl.cqit.function.poc.java.helloworld.api.model\r\n                .Person(person.getFirstName())\r\n                .lastName(person.getLastName());\r\n    }\r\n}\r\n```\r\nWith this as my Main class:\r\n```java\r\npackage nl.cqit.function.poc.java.boxedhello;\r\n\r\nimport nl.cqit.function.poc.java.helloworld.controller.HelloWorldClient;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.cloud.openfeign.EnableFeignClients;\r\n\r\n@EnableFeignClients(basePackageClasses = {HelloWorldClient.class})\r\n@SpringBootApplication\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Main.class, args);\r\n    }\r\n}\r\n```\r\nUsing this profile for native compilation in my pom.xml:\r\n```xml\r\n&lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;native&lt;/id&gt;\r\n            &lt;build&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;image&gt;\r\n                                &lt;builder&gt;paketobuildpacks/builder:tiny&lt;/builder&gt;\r\n                                &lt;env&gt;\r\n                                    &lt;BP_NATIVE_IMAGE&gt;true&lt;/BP_NATIVE_IMAGE&gt;\r\n                                &lt;/env&gt;\r\n                            &lt;/image&gt;\r\n                        &lt;/configuration&gt;\r\n                        &lt;executions&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;process-aot&lt;/id&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;process-aot&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                            &lt;/execution&gt;\r\n                        &lt;/executions&gt;\r\n                    &lt;/plugin&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;classesDirectory&gt;${project.build.outputDirectory}&lt;/classesDirectory&gt;\r\n                            &lt;metadataRepository&gt;\r\n                                &lt;enabled&gt;true&lt;/enabled&gt;\r\n                            &lt;/metadataRepository&gt;\r\n                            &lt;requiredVersion&gt;22.3&lt;/requiredVersion&gt;\r\n                        &lt;/configuration&gt;\r\n                        &lt;executions&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;build-native&lt;/id&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;compile-no-fork&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                                &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;/execution&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;add-reachability-metadata&lt;/id&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;add-reachability-metadata&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                            &lt;/execution&gt;\r\n                        &lt;/executions&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n```\r\n\r\nIs this a bug or am I missing something?","title":"Using java AOT /native compilation with openfeign 2022.0.2","body":"<p>I read that starting spring-cloud 2022.0.0, you can use native compilation. I'm using 2022.0.2 (spring-cloud-starter-openfeign:4.0.2), but when I use an OpenFeign client with native compilation, I get the following error:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'boxedHelloController': Unsatisfied dependency expressed through field 'helloWorldClient': Error creating bean with name 'nl.cqit.function.poc.java.helloworld.controller.HelloWorldClient': Post-processing of FactoryBean''s singleton object failed\n        at org.springframework.beans.factory.aot.AutowiredFieldValueResolver.resolveValue(AutowiredFieldValueResolver.java:195) ~[na:na]\n        at org.springframework.beans.factory.aot.AutowiredFieldValueResolver.resolveAndSet(AutowiredFieldValueResolver.java:167) ~[na:na]\n        at nl.cqit.function.poc.java.boxedhello.controller.BoxedHelloController__Autowiring.apply(BoxedHelloController__Autowiring.java:15) ~[na:na]\n        at org.springframework.beans.factory.support.InstanceSupplier$1.get(InstanceSupplier.java:83) ~[na:na]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.obtainInstanceFromSupplier(DefaultListableBeanFactory.java:947) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1214) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1158) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[boxedhello-app.exe:3.0.5]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[boxedhello-app.exe:3.0.5]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[boxedhello-app.exe:3.0.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:310) ~[boxedhello-app.exe:3.0.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[boxedhello-app.exe:3.0.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[boxedhello-app.exe:3.0.5]\n        at nl.cqit.function.poc.java.boxedhello.Main.main(Main.java:12) ~[boxedhello-app.exe:na]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'nl.cqit.function.poc.java.helloworld.controller.HelloWorldClient': Post-processing of FactoryBean''s singleton object failed\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:108) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.aot.AutowiredFieldValueResolver.resolveValue(AutowiredFieldValueResolver.java:189) ~[na:na]\n        ... 22 common frames omitted\nCaused by: com.oracle.svm.core.jdk.UnsupportedFeatureError: Proxy class defined by interfaces [interface nl.cqit.function.poc.java.helloworld.controller.HelloWorldClient, interface org.springframework.aop.SpringProxy, interface org.springframework.aop.framework.Advised, interface org.springframework.core.DecoratingProxy] not found. Generating proxy classes at runtime is not supported. Proxy classes need to be defined at image build time by specifying the list of interfaces that they implement. To define proxy classes use -H:DynamicProxyConfigurationFiles=&lt;comma-separated-config-files&gt; and -H:DynamicProxyConfigurationResources=&lt;comma-separated-config-resources&gt; options.\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.util.VMError.unsupportedFeature(VMError.java:89) ~[na:na]\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.reflect.proxy.DynamicProxySupport.getProxyClass(DynamicProxySupport.java:171) ~[na:na]\n        at java.base@19.0.2/java.lang.reflect.Proxy.getProxyConstructor(Proxy.java:47) ~[boxedhello-app.exe:na]\n        at java.base@19.0.2/java.lang.reflect.Proxy.newProxyInstance(Proxy.java:1037) ~[boxedhello-app.exe:na]\n        at org.springframework.aop.framework.JdkDynamicAopProxy.getProxy(JdkDynamicAopProxy.java:123) ~[na:na]\n        at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:110) ~[na:na]\n        at org.springframework.aop.framework.AbstractAdvisingBeanPostProcessor.postProcessAfterInitialization(AbstractAdvisingBeanPostProcessor.java:127) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:434) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.postProcessObjectFromFactoryBean(AbstractAutowireCapableBeanFactory.java:1885) ~[boxedhello-app.exe:6.0.7]\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:105) ~[boxedhello-app.exe:6.0.7]\n        ... 32 common frames omitted\n</code></pre>\n<p>Here is my API interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package nl.cqit.function.poc.java.helloworld.api;\n\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.media.Content;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport nl.cqit.function.poc.java.helloworld.api.model.Person;\nimport nl.cqit.function.poc.java.helloworld.api.model.Problem;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@Validated\n@Tag(\n    name = &quot;HelloWorld&quot;,\n    description = &quot;the HelloWorld API&quot;\n)\npublic interface HelloWorldApi {\n    @Operation(\n        operationId = &quot;sayHello&quot;,\n        summary = &quot;The main function&quot;,\n        description = &quot;This endpoint will call sayHello&quot;,\n        tags = {&quot;HelloWorld&quot;},\n        responses = {@ApiResponse(\n    responseCode = &quot;200&quot;,\n    description = &quot;OK&quot;,\n    content = {@Content(\n    mediaType = &quot;application/json&quot;,\n    schema = @Schema(\n    implementation = String.class\n)\n), @Content(\n    mediaType = &quot;application/problem+json&quot;,\n    schema = @Schema(\n    implementation = String.class\n)\n)}\n), @ApiResponse(\n    responseCode = &quot;400&quot;,\n    description = &quot;input validation failed&quot;,\n    content = {@Content(\n    mediaType = &quot;application/json&quot;,\n    schema = @Schema(\n    implementation = Problem.class\n)\n), @Content(\n    mediaType = &quot;application/problem+json&quot;,\n    schema = @Schema(\n    implementation = Problem.class\n)\n)}\n)}\n    )\n    @RequestMapping(\n        method = {RequestMethod.POST},\n        value = {&quot;/helloWorld&quot;},\n        produces = {&quot;application/json&quot;, &quot;application/problem+json&quot;},\n        consumes = {&quot;application/json&quot;}\n    )\n    @ResponseStatus(HttpStatus.OK)\n    String sayHello(@Parameter(name = &quot;Person&quot;,description = &quot;&quot;,required = true) @RequestBody @Valid Person var1);\n}\n</code></pre>\n<p>And here is my Feign client:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package nl.cqit.function.poc.java.helloworld.controller;\n\nimport nl.cqit.function.poc.java.helloworld.api.HelloWorldApi;\nimport org.springframework.cloud.openfeign.FeignClient;\n\n@FeignClient(name = &quot;helloWorldClient&quot;, url = &quot;http://localhost:8080&quot;)\npublic interface HelloWorldClient extends HelloWorldApi {\n}\n</code></pre>\n<p>I'm using it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package nl.cqit.function.poc.java.boxedhello.impl;\n\nimport nl.cqit.function.poc.java.boxedhello.api.BoxedHelloApi;\nimport nl.cqit.function.poc.java.boxedhello.api.model.Person;\nimport nl.cqit.function.poc.java.helloworld.controller.HelloWorldClient;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class BoxedHelloImpl implements BoxedHelloApi {\n\n    @Autowired\n    private HelloWorldClient helloWorldClient;\n\n    @Override\n    public String sayHello(Person person) {\n        String greeting = helloWorldClient.sayHello(map(person));\n        String horizontalEdge = &quot;+&quot; + &quot;-&quot;.repeat(greeting.length() + 2) + &quot;+&quot;;\n        return horizontalEdge + &quot;\\n| &quot; + greeting + &quot; |\\n&quot; + horizontalEdge;\n    }\n\n    private nl.cqit.function.poc.java.helloworld.api.model.Person map(Person person) {\n        return new nl.cqit.function.poc.java.helloworld.api.model\n                .Person(person.getFirstName())\n                .lastName(person.getLastName());\n    }\n}\n</code></pre>\n<p>With this as my Main class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package nl.cqit.function.poc.java.boxedhello;\n\nimport nl.cqit.function.poc.java.helloworld.controller.HelloWorldClient;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.openfeign.EnableFeignClients;\n\n@EnableFeignClients(basePackageClasses = {HelloWorldClient.class})\n@SpringBootApplication\npublic class Main {\n    public static void main(String[] args) {\n        SpringApplication.run(Main.class, args);\n    }\n}\n</code></pre>\n<p>Using this profile for native compilation in my pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;native&lt;/id&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                        &lt;configuration&gt;\n                            &lt;image&gt;\n                                &lt;builder&gt;paketobuildpacks/builder:tiny&lt;/builder&gt;\n                                &lt;env&gt;\n                                    &lt;BP_NATIVE_IMAGE&gt;true&lt;/BP_NATIVE_IMAGE&gt;\n                                &lt;/env&gt;\n                            &lt;/image&gt;\n                        &lt;/configuration&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;process-aot&lt;/id&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;process-aot&lt;/goal&gt;\n                                &lt;/goals&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n                        &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n                        &lt;configuration&gt;\n                            &lt;classesDirectory&gt;${project.build.outputDirectory}&lt;/classesDirectory&gt;\n                            &lt;metadataRepository&gt;\n                                &lt;enabled&gt;true&lt;/enabled&gt;\n                            &lt;/metadataRepository&gt;\n                            &lt;requiredVersion&gt;22.3&lt;/requiredVersion&gt;\n                        &lt;/configuration&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;build-native&lt;/id&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;compile-no-fork&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;phase&gt;package&lt;/phase&gt;\n                            &lt;/execution&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;add-reachability-metadata&lt;/id&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;add-reachability-metadata&lt;/goal&gt;\n                                &lt;/goals&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n</code></pre>\n<p>Is this a bug or am I missing something?</p>\n"},{"tags":["java","networking","swingworker"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1682282708,"post_id":76086789,"comment_id":134186884,"body_markdown":"Since I&#39;m assuming you&#39;re going to associate the ports with the `Node`, you need to update trigger an update to the `JTable` which tells it that the row which represents the `Node` has changed.  This would be better done via the `TableModel` (or `AbstractTableModel` as it already supports the creation of `TableEvent`s)","body":"Since I&#39;m assuming you&#39;re going to associate the ports with the <code>Node</code>, you need to update trigger an update to the <code>JTable</code> which tells it that the row which represents the <code>Node</code> has changed.  This would be better done via the <code>TableModel</code> (or <code>AbstractTableModel</code> as it already supports the creation of <code>TableEvent</code>s)"},{"owner":{"account_id":269649,"reputation":2168,"user_id":559111,"accept_rate":47,"display_name":"miatech"},"score":0,"creation_date":1682288512,"post_id":76086789,"comment_id":134187522,"body_markdown":"@MadProgrammer trigger? don&#39;t know what that means. is that a method? could you explain with some code?","body":"@MadProgrammer trigger? don&#39;t know what that means. is that a method? could you explain with some code?"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1682288677,"post_id":76086789,"comment_id":134187537,"body_markdown":"You update the `JTable` by having the `TableModel` trigger an appropriate change event - for [example](https://stackoverflow.com/questions/13753562/adding-progress-bar-to-each-table-cell-for-file-progress-java/13755155#13755155). You should see [How to Use Tables](https://docs.oracle.com/javase/tutorial/uiswing/components/table.html), in particular [Listening for Data Changes](https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange) and [Firing Data Change Events](https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#fire)","body":"You update the <code>JTable</code> by having the <code>TableModel</code> trigger an appropriate change event - for <a href=\"https://stackoverflow.com/questions/13753562/adding-progress-bar-to-each-table-cell-for-file-progress-java/13755155#13755155\">example</a>. You should see <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html\" rel=\"nofollow noreferrer\">How to Use Tables</a>, in particular <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange\" rel=\"nofollow noreferrer\">Listening for Data Changes</a> and <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#fire\" rel=\"nofollow noreferrer\">Firing Data Change Events</a>"}],"owner":{"account_id":269649,"reputation":2168,"user_id":559111,"accept_rate":47,"display_name":"miatech"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682283139,"creation_date":1682277569,"question_id":76086789,"body_markdown":"I&#39;m working on a Java Network Application in Eclipse, already plenty of detail, and the app functionality is to perform an ip scan of the network and a port scan of a particular ip address. here&#39;s the link to github to project\r\nhttps://github.com/zentech/IpScannerX\r\n\r\nThe problem?\r\nip scan functionality works fine, but I have not been able to solve the port scanning section. \r\n\r\nBoth the ip scan and port scan class extend the `SwingWorker` class which you have to implement the `doInBackGround()` method which in turn create a pool of scannable ip/ports and send the pool into chunks to the callable class. \r\n\r\nThen when `result.isDone()` is `true` I add data to the `Node` list which contains objects of type node, every single node has ip, mac, hostname, ports ect... then the `process()` method is called in which I add data to the `JTable` and publish to the app. \r\n\r\nThe ip scanner finishes first, the port scanner runs and I&#39;m logging to the terminal and I can see it is detecting open ports. the problem here&#39;s collecting the ports adding to `Node` list for each host and posting to `JTable`. \r\n\r\nBecause at this point the `JTable` already contains data. I don&#39;t know what is the correct way to post to table if updating table or adding to Node and table will update automatically. \r\n\r\nShould I update table from portScanMain class or from ipScanMain class the portscan gets initiated from the ipScanMain class once the ip scan is finished. \r\n\r\nI know this is network knowledge but I hope someone can see the logic here.\r\n\r\nI&#39;m only ging to post one class since posting the whole project is pointless\r\n\r\n    /**\r\n     * &lt;h1&gt;PortScanMain&lt;/h1&gt;\r\n     * this class is responsible for main logic of scanning\r\n     * and detecting open ports in a host on the network\r\n     * @author George\r\n     * @version 1.0\r\n     */\r\n    public class PortScanMain extends SwingWorker&lt;Void, Integer&gt;{\t\r\n    \r\n    \tfinal int MAX_PORT = 1024;\t\r\n    \tpublic Scanner in;\r\n    \tpublic String ip;\r\n    \tpublic Future&lt;Node&gt; result = null;\r\n    \tpublic int startPort = 0;\r\n    \tfinal int TIME_OUT = 4000;\r\n    \tprivate Node node;\r\n    \tprivate JTable table;\r\n    \tprivate int hostNum = 0;\r\n    \tprivate DefaultTableModel model;\r\n    \tpublic PortScanCallable pScan;\t\t\r\n    \tfinal int NUM_OF_THREAD = MAX_PORT; //divided by 4 b/c 4 processors so 256 threads \r\n    \tpublic ExecutorService servicePool = Executors.newFixedThreadPool(NUM_OF_THREAD);\r\n    \tpublic List&lt;Future&lt;Node&gt;&gt; resultList = new ArrayList&lt;&gt;();\r\n    \tpublic int endPort = startPort + (MAX_PORT/NUM_OF_THREAD);\r\n    \t\r\n    \t\r\n    \t/**\r\n    \t * setter method to set ip address\r\n    \t * @param ip\r\n    \t */\r\n    \tpublic PortScanMain(Node node, JTable table, int num) {\r\n    \t\tSystem.out.println(&quot;Scanning &quot; + node.getIp());\r\n    \t\tthis.node = node;\r\n    \t\tthis.table = table;\r\n    \t\tthis.hostNum = num;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tprotected Void doInBackground() throws Exception {\r\n    \t\tmodel = (DefaultTableModel) table.getModel();\r\n    \t\tfor(int i = 0; i &lt;= NUM_OF_THREAD/2; i++) { \r\n    \t\t\tPortScanCallable portScan = new PortScanCallable(node.getIp(), startPort, endPort); //scan 2 ports @time\r\n    \t\t\tresult = servicePool.submit(portScan); \r\n    \t\t\tresultList.add(result);\r\n    \t\t\tstartPort = endPort+1; \r\n    \t\t\tendPort = startPort + (MAX_PORT / NUM_OF_THREAD);\r\n    \t\t}\r\n    \t\t\t\t\r\n    \t\ttry {\r\n    \t\t\tThread.sleep(TIME_OUT);\r\n    \t\t} catch (InterruptedException e1) {\r\n    \t\t\te1.printStackTrace();\r\n    \t\t}       \r\n            \r\n    \t\t//picking up results\r\n    \t\tif(result.isDone()) {\r\n    \t\t\t//print result\r\n    \t\t\tSystem.out.println(ip + &quot; Open ports &quot;);\r\n    \t\t\tfor(Future&lt;Node&gt; future : resultList) {\r\n    \t\t\t\tfor(Integer port: future.get().openPorts) {\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tif(future.get() != null) {\r\n    \t\t\t\t\t\t\tpublish(port);\r\n    \t\t\t\t\t\t}\t\t\t\t\r\n    \t\t\t\t\t} catch (InterruptedException | ExecutionException e) {\r\n    \t\t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\t\t\t\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void process(List&lt;Integer&gt; chunks) {\t\t\r\n    \t\tfor(Integer port : chunks) {\r\n    \t\t\tSystem.out.println(hostNum +&quot; &quot;+ ip +&quot; &quot;+ port);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void done() {\r\n    \t\ttable.setValueAt(&quot;22, 80, 443&quot;, hostNum, 4);\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * this method will initiate the thread pool and send port ranges \r\n    \t * to callable class to be scanned. then pause for 4 sec and\r\n    \t * finally display results from the scanned ip adress\r\n    \t * @throws InterruptedException\r\n    \t * @throws ExecutionException\r\n    \t */\r\n    \tpublic void startPortScanning() throws InterruptedException, ExecutionException {\r\n    \t\t\r\n    \t\t\r\n    \t\tservicePool.shutdown();\r\n    \t\ttry {\r\n                servicePool.awaitTermination(3, TimeUnit.SECONDS);\r\n                servicePool.shutdownNow();\r\n            } catch (InterruptedException e) {\r\n                \r\n            }\r\n    \t}\t\r\n    \r\n    }\r\n\r\n\r\n    public class PortScanCallable implements Callable&lt;Node&gt;{\r\n    \t\r\n    \tList&lt;Integer&gt; portsResult;\r\n    \tint startPort;\r\n    \tint endPort;\r\n    \tNode newNode;\r\n    \tString ipAddress;\r\n    \tint timeOut = 1000;\r\n    \t\r\n    \t/**\r\n    \t * Constructor for PortScanCallable. \r\n    \t * @param ipAddress\r\n    \t * @param startPort\r\n    \t * @param endPort\r\n    \t */\r\n    \tpublic PortScanCallable(String ipAddress, int startPort, int endPort) {\r\n    \t\tthis.ipAddress = ipAddress;\r\n    \t\tthis.startPort = startPort;\r\n    \t\tthis.endPort = endPort;\r\n    \t\tnewNode = new Node(ipAddress);\r\n    \t\tportsResult = new ArrayList&lt;Integer&gt;();\r\n    \t\t\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * this method establishes a socket connection\r\n    \t * to each port and if port is open, \r\n    \t * then adds to result\r\n    \t * @return newNode\r\n    \t */\r\n    \t@Override\r\n    \tpublic Node call() throws Exception {\r\n    \t\tfor (int i = startPort; i &lt;= endPort; i++) {\r\n                try {\r\n                    //establishing connection to every port\r\n                    Socket socket = new Socket();\r\n                    SocketAddress address = new InetSocketAddress(ipAddress, i);\r\n                    socket.connect(address, timeOut);                \r\n                    if (socket.isConnected()) {\r\n                    \tSystem.out.println(&quot;CONNECTED: &quot; + i);\r\n                        socket.close();\r\n                        newNode.openPorts.add(i);\r\n                    }\r\n                } catch (UnknownHostException e) {\r\n                    //e.printStackTrace();\r\n                } catch (SocketTimeoutException e) {\r\n                    //e.printStackTrace();\r\n                } catch (ConnectException e) {\r\n                    //e.printStackTrace();\r\n                } catch (IOException e) {\r\n                    //e.printStackTrace();\r\n                }\r\n            }\r\n    \t\t\r\n    \t\treturn newNode;\r\n    \t}\r\n    \r\n    }","title":"Posting doInBackGround Results to Jtable","body":"<p>I'm working on a Java Network Application in Eclipse, already plenty of detail, and the app functionality is to perform an ip scan of the network and a port scan of a particular ip address. here's the link to github to project\n<a href=\"https://github.com/zentech/IpScannerX\" rel=\"nofollow noreferrer\">https://github.com/zentech/IpScannerX</a></p>\n<p>The problem?\nip scan functionality works fine, but I have not been able to solve the port scanning section.</p>\n<p>Both the ip scan and port scan class extend the <code>SwingWorker</code> class which you have to implement the <code>doInBackGround()</code> method which in turn create a pool of scannable ip/ports and send the pool into chunks to the callable class.</p>\n<p>Then when <code>result.isDone()</code> is <code>true</code> I add data to the <code>Node</code> list which contains objects of type node, every single node has ip, mac, hostname, ports ect... then the <code>process()</code> method is called in which I add data to the <code>JTable</code> and publish to the app.</p>\n<p>The ip scanner finishes first, the port scanner runs and I'm logging to the terminal and I can see it is detecting open ports. the problem here's collecting the ports adding to <code>Node</code> list for each host and posting to <code>JTable</code>.</p>\n<p>Because at this point the <code>JTable</code> already contains data. I don't know what is the correct way to post to table if updating table or adding to Node and table will update automatically.</p>\n<p>Should I update table from portScanMain class or from ipScanMain class the portscan gets initiated from the ipScanMain class once the ip scan is finished.</p>\n<p>I know this is network knowledge but I hope someone can see the logic here.</p>\n<p>I'm only ging to post one class since posting the whole project is pointless</p>\n<pre><code>/**\n * &lt;h1&gt;PortScanMain&lt;/h1&gt;\n * this class is responsible for main logic of scanning\n * and detecting open ports in a host on the network\n * @author George\n * @version 1.0\n */\npublic class PortScanMain extends SwingWorker&lt;Void, Integer&gt;{   \n\n    final int MAX_PORT = 1024;  \n    public Scanner in;\n    public String ip;\n    public Future&lt;Node&gt; result = null;\n    public int startPort = 0;\n    final int TIME_OUT = 4000;\n    private Node node;\n    private JTable table;\n    private int hostNum = 0;\n    private DefaultTableModel model;\n    public PortScanCallable pScan;      \n    final int NUM_OF_THREAD = MAX_PORT; //divided by 4 b/c 4 processors so 256 threads \n    public ExecutorService servicePool = Executors.newFixedThreadPool(NUM_OF_THREAD);\n    public List&lt;Future&lt;Node&gt;&gt; resultList = new ArrayList&lt;&gt;();\n    public int endPort = startPort + (MAX_PORT/NUM_OF_THREAD);\n    \n    \n    /**\n     * setter method to set ip address\n     * @param ip\n     */\n    public PortScanMain(Node node, JTable table, int num) {\n        System.out.println(&quot;Scanning &quot; + node.getIp());\n        this.node = node;\n        this.table = table;\n        this.hostNum = num;\n    }\n    \n    @Override\n    protected Void doInBackground() throws Exception {\n        model = (DefaultTableModel) table.getModel();\n        for(int i = 0; i &lt;= NUM_OF_THREAD/2; i++) { \n            PortScanCallable portScan = new PortScanCallable(node.getIp(), startPort, endPort); //scan 2 ports @time\n            result = servicePool.submit(portScan); \n            resultList.add(result);\n            startPort = endPort+1; \n            endPort = startPort + (MAX_PORT / NUM_OF_THREAD);\n        }\n                \n        try {\n            Thread.sleep(TIME_OUT);\n        } catch (InterruptedException e1) {\n            e1.printStackTrace();\n        }       \n        \n        //picking up results\n        if(result.isDone()) {\n            //print result\n            System.out.println(ip + &quot; Open ports &quot;);\n            for(Future&lt;Node&gt; future : resultList) {\n                for(Integer port: future.get().openPorts) {\n                    try {\n                        if(future.get() != null) {\n                            publish(port);\n                        }               \n                    } catch (InterruptedException | ExecutionException e) {\n                        e.printStackTrace();\n                    }\n                }           \n            }\n        }\n        return null;\n    }\n\n    @Override\n    protected void process(List&lt;Integer&gt; chunks) {      \n        for(Integer port : chunks) {\n            System.out.println(hostNum +&quot; &quot;+ ip +&quot; &quot;+ port);\n        }\n    }\n\n    @Override\n    protected void done() {\n        table.setValueAt(&quot;22, 80, 443&quot;, hostNum, 4);\n    }\n    \n    /**\n     * this method will initiate the thread pool and send port ranges \n     * to callable class to be scanned. then pause for 4 sec and\n     * finally display results from the scanned ip adress\n     * @throws InterruptedException\n     * @throws ExecutionException\n     */\n    public void startPortScanning() throws InterruptedException, ExecutionException {\n        \n        \n        servicePool.shutdown();\n        try {\n            servicePool.awaitTermination(3, TimeUnit.SECONDS);\n            servicePool.shutdownNow();\n        } catch (InterruptedException e) {\n            \n        }\n    }   \n\n}\n\n\npublic class PortScanCallable implements Callable&lt;Node&gt;{\n    \n    List&lt;Integer&gt; portsResult;\n    int startPort;\n    int endPort;\n    Node newNode;\n    String ipAddress;\n    int timeOut = 1000;\n    \n    /**\n     * Constructor for PortScanCallable. \n     * @param ipAddress\n     * @param startPort\n     * @param endPort\n     */\n    public PortScanCallable(String ipAddress, int startPort, int endPort) {\n        this.ipAddress = ipAddress;\n        this.startPort = startPort;\n        this.endPort = endPort;\n        newNode = new Node(ipAddress);\n        portsResult = new ArrayList&lt;Integer&gt;();\n        \n    }\n\n    /**\n     * this method establishes a socket connection\n     * to each port and if port is open, \n     * then adds to result\n     * @return newNode\n     */\n    @Override\n    public Node call() throws Exception {\n        for (int i = startPort; i &lt;= endPort; i++) {\n            try {\n                //establishing connection to every port\n                Socket socket = new Socket();\n                SocketAddress address = new InetSocketAddress(ipAddress, i);\n                socket.connect(address, timeOut);                \n                if (socket.isConnected()) {\n                    System.out.println(&quot;CONNECTED: &quot; + i);\n                    socket.close();\n                    newNode.openPorts.add(i);\n                }\n            } catch (UnknownHostException e) {\n                //e.printStackTrace();\n            } catch (SocketTimeoutException e) {\n                //e.printStackTrace();\n            } catch (ConnectException e) {\n                //e.printStackTrace();\n            } catch (IOException e) {\n                //e.printStackTrace();\n            }\n        }\n        \n        return newNode;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","collections","enums"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1342524289,"post_id":11521356,"comment_id":15227321,"body_markdown":"A sidenote: `EnumSet` is an abstract class.","body":"A sidenote: <code>EnumSet</code> is an abstract class."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342524453,"post_id":11521356,"comment_id":15227389,"body_markdown":"@MarkoTopolnik Thank you. I have fixed that example.","body":"@MarkoTopolnik Thank you. I have fixed that example."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1342524522,"post_id":11521356,"comment_id":15227417,"body_markdown":"Looking at the implementation, enumsets (both regular and jumbo) happen to be sorted by ascending ordinal value of the enum.","body":"Looking at the implementation, enumsets (both regular and jumbo) happen to be sorted by ascending ordinal value of the enum."},{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":1,"creation_date":1342524540,"post_id":11521356,"comment_id":15227423,"body_markdown":"My guess would be that this is because `enum`s are unordered: the order of declaration is there for your `foreach` loop on `values` and whatnot, but since you can supply your own values, that order does not matter for comparing enum values to each other.","body":"My guess would be that this is because <code>enum</code>s are unordered: the order of declaration is there for your <code>foreach</code> loop on <code>values</code> and whatnot, but since you can supply your own values, that order does not matter for comparing enum values to each other."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":5,"creation_date":1342524601,"post_id":11521356,"comment_id":15227450,"body_markdown":"@dasblinkenlight `public class Enum&lt;E extends Enum&lt;E&gt;&gt; implements Comparable&lt;E&gt;, Serializable`.","body":"@dasblinkenlight <code>public class Enum&lt;E extends Enum&lt;E&gt;&gt; implements Comparable&lt;E&gt;, Serializable</code>."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342524612,"post_id":11521356,"comment_id":15227456,"body_markdown":"Their Iterators are always in ascending order of element or key, which just makes the question more curious to me. ;)","body":"Their Iterators are always in ascending order of element or key, which just makes the question more curious to me. ;)"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342524671,"post_id":11521356,"comment_id":15227477,"body_markdown":"@dasblinkenlight That would makes sense but as Enum extends Comparable, it has a natural order.","body":"@dasblinkenlight That would makes sense but as Enum extends Comparable, it has a natural order."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":8,"creation_date":1342524852,"post_id":11521356,"comment_id":15227548,"body_markdown":"My best guess is that navigability was not seen as a major use case for enum sets. There is nothing in the implementation that would prevent navigability.","body":"My best guess is that navigability was not seen as a major use case for enum sets. There is nothing in the implementation that would prevent navigability."},{"owner":{"account_id":97082,"reputation":375006,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":0,"creation_date":1342524855,"post_id":11521356,"comment_id":15227549,"body_markdown":"The problem if EnumSet were implementing NavigableSet is that people could be tempted to use a complex and slow way of iterating over what is basically a bit vector. It was probably seen as both useless and never good.","body":"The problem if EnumSet were implementing NavigableSet is that people could be tempted to use a complex and slow way of iterating over what is basically a bit vector. It was probably seen as both useless and never good."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1342524890,"post_id":11521356,"comment_id":15227563,"body_markdown":"But @dystroy navigability is not about iteration?","body":"But @dystroy navigability is not about iteration?"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342525015,"post_id":11521356,"comment_id":15227622,"body_markdown":"@dystroy Interesting point.  `iterator()` is one of the things it does provide. Having more methods could mean this is used more often but if you want the first() or last() you need to create an Iterator which is less efficient than what the collection could do internally.","body":"@dystroy Interesting point.  <code>iterator()</code> is one of the things it does provide. Having more methods could mean this is used more often but if you want the first() or last() you need to create an Iterator which is less efficient than what the collection could do internally."},{"owner":{"account_id":97082,"reputation":375006,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":0,"creation_date":1342525025,"post_id":11521356,"comment_id":15227629,"body_markdown":"@MarkoTopolnik what would bring navigability on an enumset ? And how would you implement in a reasonable and useful way the subset method ? I mean the good way to use enum based class is to use enum, not iterator() or subset(), etc.","body":"@MarkoTopolnik what would bring navigability on an enumset ? And how would you implement in a reasonable and useful way the subset method ? I mean the good way to use enum based class is to use enum, not iterator() or subset(), etc."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1342525080,"post_id":11521356,"comment_id":15227652,"body_markdown":"@MarkoTopolnik I think this is the most likely explanation. If you need it there is always a Tree collection.","body":"@MarkoTopolnik I think this is the most likely explanation. If you need it there is always a Tree collection."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342525115,"post_id":11521356,"comment_id":15227660,"body_markdown":"@dystroy The same way TreeSet and TreeMap does now.","body":"@dystroy The same way TreeSet and TreeMap does now."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1342525190,"post_id":11521356,"comment_id":15227690,"body_markdown":"Peter, that was exactly my thinking.","body":"Peter, that was exactly my thinking."},{"owner":{"account_id":97082,"reputation":375006,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":0,"creation_date":1342525353,"post_id":11521356,"comment_id":15227771,"body_markdown":"You should see an enumSet or an hashtable as what it is internally, not as how it is accessible. Because the reason those patterns are common to all languages is that they&#39;re efficient (fast and light). In my opinion it makes no sense to access them in ways that aren&#39;t based on their inherent efficiency. Using subset on an enumset would either convert to a less efficient type or add weight to all instances.","body":"You should see an enumSet or an hashtable as what it is internally, not as how it is accessible. Because the reason those patterns are common to all languages is that they&#39;re efficient (fast and light). In my opinion it makes no sense to access them in ways that aren&#39;t based on their inherent efficiency. Using subset on an enumset would either convert to a less efficient type or add weight to all instances."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1342525422,"post_id":11521356,"comment_id":15227793,"body_markdown":"@dystroy The enum itself doesn&#39;t give you the functionality of `subSet`, `tailSet`, etc. You may imaginably need that. But, as was said here, it seems like a use case rare enough that it didn&#39;t get support from the Java library.","body":"@dystroy The enum itself doesn&#39;t give you the functionality of <code>subSet</code>, <code>tailSet</code>, etc. You may imaginably need that. But, as was said here, it seems like a use case rare enough that it didn&#39;t get support from the Java library."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342526547,"post_id":11521356,"comment_id":15228255,"body_markdown":"@dystroy EnumSet is under neither a bit set as you said. I don&#39;t see much overhead in having a start and end value list as String does for a `substring`","body":"@dystroy EnumSet is under neither a bit set as you said. I don&#39;t see much overhead in having a start and end value list as String does for a <code>substring</code>"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342680078,"post_id":11521356,"comment_id":15282417,"body_markdown":"@MarkoTopolnik If you add your comment as an answer I will accept it with bounty.","body":"@MarkoTopolnik If you add your comment as an answer I will accept it with bounty."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1342687970,"post_id":11521356,"comment_id":15285444,"body_markdown":"@PeterLawrey Here you are, but the bounty really isn&#39;t necessary :)","body":"@PeterLawrey Here you are, but the bounty really isn&#39;t necessary :)"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342688277,"post_id":11521356,"comment_id":15285554,"body_markdown":"@MarkoTopolnik What else is 97K for ;) will add bounty in a of couple hours once the timeout is reached.","body":"@MarkoTopolnik What else is 97K for ;) will add bounty in a of couple hours once the timeout is reached."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1342688308,"post_id":11521356,"comment_id":15285566,"body_markdown":"What can I say, thank you very much :)","body":"What can I say, thank you very much :)"},{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1342721080,"post_id":11521356,"comment_id":15301000,"body_markdown":"Wow, a 500k bounty. I guess only someone digging out that specific E-Mail by Josh Bloch can get this bounty. Or me, indicating that there had been such an E-Mail :-)","body":"Wow, a 500k bounty. I guess only someone digging out that specific E-Mail by Josh Bloch can get this bounty. Or me, indicating that there had been such an E-Mail :-)"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342733259,"post_id":11521356,"comment_id":15305760,"body_markdown":"Not quite its 500, not 500k. ;)","body":"Not quite its 500, not 500k. ;)"},{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1342767535,"post_id":11521356,"comment_id":15312773,"body_markdown":"Hah, don&#39;t know where the `k` came from. My eyes were all $$","body":"Hah, don&#39;t know where the <code>k</code> came from. My eyes were all $$"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342768273,"post_id":11521356,"comment_id":15313016,"body_markdown":"@LukasEder You really have to want to award bounty. First you have wait for two days. Then you can offer bounty. Then you have to wait 24 hours before you can give it. If you want to give a second bounty it ahas to be the same amount and you have to wait a further 24 hours. But I will do it for you as well. ;)","body":"@LukasEder You really have to want to award bounty. First you have wait for two days. Then you can offer bounty. Then you have to wait 24 hours before you can give it. If you want to give a second bounty it ahas to be the same amount and you have to wait a further 24 hours. But I will do it for you as well. ;)"}],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1342687950,"creation_date":1342687950,"answer_id":11557173,"question_id":11521356,"body_markdown":"My best guess is that navigability was not seen as a major use case for enum sets. There is nothing in the implementation that would prevent navigability. The rare use cases that combine the need for a set of enum members with navigability are covered by the `TreeSet` and `TreeMap`.","title":"Is there any reason EnumMap and EnumSet are not Navigable","body":"<p>My best guess is that navigability was not seen as a major use case for enum sets. There is nothing in the implementation that would prevent navigability. The rare use cases that combine the need for a set of enum members with navigability are covered by the <code>TreeSet</code> and <code>TreeMap</code>.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1682282535,"creation_date":1342688703,"answer_id":11557424,"question_id":11521356,"body_markdown":"Many &quot;obvious&quot; features are missing from the JDK and its various APIs. Why this particular feature was omitted / forgotten? We can only guess. But your question has been a RFE at Sun/Oracle for a long time:\r\n\r\n - https://bugs.java.com/bugdatabase/view_bug?bug_id=6278287\r\n - http://www.java.net/node/644910\r\n\r\nYou could support those RFEs by commenting on them. Note, here&#39;s an authoritative answer by Joshua Bloch on the subject:\r\n\r\n&gt; I vaguely recall considering it, but I can&#39;t recall whether we\r\nexplicitly rejected it with good reason.  We were running very low on\r\ntime when I implemented EnumSet and EnumMap, and it&#39;s possible that\r\ntime played a role in our decision\r\n\r\nhttp://comments.gmane.org/gmane.comp.java.jsr.166-concurrency/2158\r\n\r\nSo even *he* had to guess :-)","title":"Is there any reason EnumMap and EnumSet are not Navigable","body":"<p>Many &quot;obvious&quot; features are missing from the JDK and its various APIs. Why this particular feature was omitted / forgotten? We can only guess. But your question has been a RFE at Sun/Oracle for a long time:</p>\n<ul>\n<li><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6278287\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=6278287</a></li>\n<li><a href=\"http://www.java.net/node/644910\" rel=\"nofollow noreferrer\">http://www.java.net/node/644910</a></li>\n</ul>\n<p>You could support those RFEs by commenting on them. Note, here's an authoritative answer by Joshua Bloch on the subject:</p>\n<blockquote>\n<p>I vaguely recall considering it, but I can't recall whether we\nexplicitly rejected it with good reason.  We were running very low on\ntime when I implemented EnumSet and EnumMap, and it's possible that\ntime played a role in our decision</p>\n</blockquote>\n<p><a href=\"http://comments.gmane.org/gmane.comp.java.jsr.166-concurrency/2158\" rel=\"nofollow noreferrer\">http://comments.gmane.org/gmane.comp.java.jsr.166-concurrency/2158</a></p>\n<p>So even <em>he</em> had to guess :-)</p>\n"},{"tags":[],"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1343123178,"creation_date":1343123178,"answer_id":11628214,"question_id":11521356,"body_markdown":"*The post doesn&#39;t directly answers the question, neither attempts to, it merely conveys why Navigable was introduced*\n\n*Post as I was requested to (and it&#39;s too long for a comment)*\n\n&gt; The short answer is that Navigable exists because we didn&#39;t have\n&gt; anything like upcoming &quot;defenders&quot; -- Sorted didn&#39;t describe all the\n&gt; common functionality, and there was no way to do so except to\n&gt; introduce a new interface. In practice, I&#39;m sure &quot;Sorted&quot; is still\n&gt; used much more often than &quot;Navigable&quot; as a declaration type, because\n&gt; most people don&#39;t need the methods defined in Navigable but not\n&gt; Sorted. Plus &quot;Navigable&quot; is just not a very nice name :-)\n&gt;\n&gt; -Doug ","title":"Is there any reason EnumMap and EnumSet are not Navigable","body":"<p><em>The post doesn't directly answers the question, neither attempts to, it merely conveys why Navigable was introduced</em></p>\n<p><em>Post as I was requested to (and it's too long for a comment)</em></p>\n<blockquote>\n<p>The short answer is that Navigable exists because we didn't have\nanything like upcoming &quot;defenders&quot; -- Sorted didn't describe all the\ncommon functionality, and there was no way to do so except to\nintroduce a new interface. In practice, I'm sure &quot;Sorted&quot; is still\nused much more often than &quot;Navigable&quot; as a declaration type, because\nmost people don't need the methods defined in Navigable but not\nSorted. Plus &quot;Navigable&quot; is just not a very nice name :-)</p>\n<p>-Doug</p>\n</blockquote>\n"}],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":26,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2119,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":11557173,"answer_count":3,"score":36,"last_activity_date":1682282535,"creation_date":1342523888,"question_id":11521356,"body_markdown":"Enum is Comparable which means you can have\r\n\r\n    NavigableSet&lt;AccessMode&gt; modes = new TreeSet&lt;&gt;();\r\n    NavigableMap&lt;AccessMode, Object&gt; modeMap = new TreeMap&lt;&gt;();\r\n\r\nThese have O(ln N) access times.\r\n\r\nThe Enum collections have O(1) access times, but are not Navigable\r\n\r\n    NavigableSet&lt;AccessMode&gt; modes = EnumSet.noneOf(AccessMode.class); // doesn&#39;t compile\r\n    NavigableMap&lt;AccessMode, Object&gt; modeMap = new EnumMap&lt;&gt;(AccessMode.class);  // doesn&#39;t compile\r\n\r\nI was wondering if there was a reason Enum collections were not Navigable (and Sorted). i.e Am I missing something?\r\n","title":"Is there any reason EnumMap and EnumSet are not Navigable","body":"<p>Enum is Comparable which means you can have</p>\n\n<pre><code>NavigableSet&lt;AccessMode&gt; modes = new TreeSet&lt;&gt;();\nNavigableMap&lt;AccessMode, Object&gt; modeMap = new TreeMap&lt;&gt;();\n</code></pre>\n\n<p>These have O(ln N) access times.</p>\n\n<p>The Enum collections have O(1) access times, but are not Navigable</p>\n\n<pre><code>NavigableSet&lt;AccessMode&gt; modes = EnumSet.noneOf(AccessMode.class); // doesn't compile\nNavigableMap&lt;AccessMode, Object&gt; modeMap = new EnumMap&lt;&gt;(AccessMode.class);  // doesn't compile\n</code></pre>\n\n<p>I was wondering if there was a reason Enum collections were not Navigable (and Sorted). i.e Am I missing something?</p>\n"},{"tags":["java","spring","dependency-injection"],"comments":[{"owner":{"account_id":5573654,"reputation":5164,"user_id":4417924,"display_name":"Jason"},"score":0,"creation_date":1682268357,"post_id":76085939,"comment_id":134184905,"body_markdown":"Look at resilince4j, this does exactly what you want. Ultimately, when an exception is thrown that indicates a 503/500, just backoff for some time.","body":"Look at resilince4j, this does exactly what you want. Ultimately, when an exception is thrown that indicates a 503/500, just backoff for some time."},{"owner":{"account_id":1042454,"reputation":2808,"user_id":1048185,"accept_rate":57,"display_name":"Ihor M."},"score":0,"creation_date":1682273750,"post_id":76085939,"comment_id":134185613,"body_markdown":"This was not what I was asking about, I was curious whether thread sleeps would be reducing overall throughput of the app, and whether I need not have this bean as singleton in my app.","body":"This was not what I was asking about, I was curious whether thread sleeps would be reducing overall throughput of the app, and whether I need not have this bean as singleton in my app."},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1682344159,"post_id":76085939,"comment_id":134195686,"body_markdown":"Don&#39;t forget to reinterrupt your thread in case of an `InterruptedException`","body":"Don&#39;t forget to reinterrupt your thread in case of an <code>InterruptedException</code>"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682282195,"creation_date":1682282195,"answer_id":76087152,"question_id":76085939,"body_markdown":"No, just because a the bean is a singleton, does not mean that all threads have to wait for any other thread to complete first. You need to write code that makes sections of code to be executed mutually exclusive by different threads. One such mechanism is the `synchronized` keyword and you do not have that in your code.\r\n\r\nSingletons can become problematic if they have state, because the state would be shared across all consumers (because there is only a single instance of the singleton).\r\n\r\n        int retriesRemaining = maxRetries; // local variable\r\n        while (true) {\r\n            try {\r\n                // ...\r\n            } catch (Exception e) {\r\n                --retriesRemaining;\r\n                // ...\r\n                if(retriesRemaining == 0)\r\n                    throw new UiSessionTokenGenerationException(message);\r\n                int sleepMultiplier = maxRetries - retriesRemaining; // local variable\r\n                sleep(sleepMultiplier);\r\n            }\r\n        }\r\n\r\nAll state that your function uses is local to the function itself and not shared with any other function or the singleton instance. Both `retriesRemaining` and `sleepMultiplier` are local variables (of primitive type: both are `int`), so it is impossible that they will affect other threads.\r\n\r\nFinally, `Thread#sleep` only affects the current thread, all other threads are unaffected (unless they are waiting for the sleeping thread to leave a critical section, e.g. a `synchronized` method or block).\r\n\r\nAs for the throughput of your application: perform experiments and do measurements, that&#39;s the only way to prove your hypothesis for your specific application.","title":"Spring Component Singleton Scope with Thread sleeps","body":"<p>No, just because a the bean is a singleton, does not mean that all threads have to wait for any other thread to complete first. You need to write code that makes sections of code to be executed mutually exclusive by different threads. One such mechanism is the <code>synchronized</code> keyword and you do not have that in your code.</p>\n<p>Singletons can become problematic if they have state, because the state would be shared across all consumers (because there is only a single instance of the singleton).</p>\n<pre><code>    int retriesRemaining = maxRetries; // local variable\n    while (true) {\n        try {\n            // ...\n        } catch (Exception e) {\n            --retriesRemaining;\n            // ...\n            if(retriesRemaining == 0)\n                throw new UiSessionTokenGenerationException(message);\n            int sleepMultiplier = maxRetries - retriesRemaining; // local variable\n            sleep(sleepMultiplier);\n        }\n    }\n</code></pre>\n<p>All state that your function uses is local to the function itself and not shared with any other function or the singleton instance. Both <code>retriesRemaining</code> and <code>sleepMultiplier</code> are local variables (of primitive type: both are <code>int</code>), so it is impossible that they will affect other threads.</p>\n<p>Finally, <code>Thread#sleep</code> only affects the current thread, all other threads are unaffected (unless they are waiting for the sleeping thread to leave a critical section, e.g. a <code>synchronized</code> method or block).</p>\n<p>As for the throughput of your application: perform experiments and do measurements, that's the only way to prove your hypothesis for your specific application.</p>\n"}],"owner":{"account_id":1042454,"reputation":2808,"user_id":1048185,"accept_rate":57,"display_name":"Ihor M."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76087152,"answer_count":1,"score":-1,"last_activity_date":1682282273,"creation_date":1682266535,"question_id":76085939,"body_markdown":"I have a following code that is obtaining a session token by placing a http call to the 3rd party service. Every now and then I get 500 or 503 when the 3rd party service is flooded with requests. \r\n\r\nI am here implementing super primitive back-off policy. Ideally, I want here a rate limiter, but I am going with a simple quick solution for now. \r\n\r\nThe thing is that this class is a Spring Component (@Component) and is used in a threaded environment, multiple threads would be using this `SessionHandler` class.\r\n\r\n\r\n```\r\n    public String obtainSessionToken(String orgId,\r\n                                     String userId) throws UiSessionTokenGenerationException {\r\n        String sessionTokenJson;\r\n        int retriesRemaining = maxRetries;\r\n        while (true) {\r\n            try {\r\n                sessionTokenJson = browserSessionTokenService.getBrowserSessionToken(\r\n                        orgId,\r\n                        userId);\r\n                break;\r\n            } catch (Exception e) {\r\n                --retriesRemaining;\r\n                String message = &quot;Error generating UI session token&quot; ;\r\n                LOG.warn(&quot;{}, retriesRemaining={}&quot;, message, retriesRemaining);\r\n                if(retriesRemaining == 0)\r\n                    throw new UiSessionTokenGenerationException(message);\r\n                int sleepMultiplier = maxRetries - retriesRemaining;\r\n                sleep(sleepMultiplier);\r\n            }\r\n        }\r\n        return extractSessionFromResponse(c2cTenant, recordId, sessionTokenJson);\r\n    }\r\n\r\n\r\n    private void sleep(int sleepMultiplier) {\r\n        try {\r\n            Thread.sleep(minSleepPeriod * sleepMultiplier);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\n\r\nI wonder if it will be a bottleneck granted that all the objects in Spring are created by default in the singleton scope. It shouldn&#39;t be, right? \r\n\r\n===========UPDATE==========\r\n\r\nLet me clarify my question:  I am assuming each calling thread will have its own execution and does not interfere with another thread&#39;s execution unless there is some code in the singleton scoped class which is shared by all calling threads.Since thread sleeps are applied to each calling thread, the overall throughput will not suffer. Is it a valid assumption? And, as such this class can remain a component (singleton).","title":"Spring Component Singleton Scope with Thread sleeps","body":"<p>I have a following code that is obtaining a session token by placing a http call to the 3rd party service. Every now and then I get 500 or 503 when the 3rd party service is flooded with requests.</p>\n<p>I am here implementing super primitive back-off policy. Ideally, I want here a rate limiter, but I am going with a simple quick solution for now.</p>\n<p>The thing is that this class is a Spring Component (@Component) and is used in a threaded environment, multiple threads would be using this <code>SessionHandler</code> class.</p>\n<pre><code>    public String obtainSessionToken(String orgId,\n                                     String userId) throws UiSessionTokenGenerationException {\n        String sessionTokenJson;\n        int retriesRemaining = maxRetries;\n        while (true) {\n            try {\n                sessionTokenJson = browserSessionTokenService.getBrowserSessionToken(\n                        orgId,\n                        userId);\n                break;\n            } catch (Exception e) {\n                --retriesRemaining;\n                String message = &quot;Error generating UI session token&quot; ;\n                LOG.warn(&quot;{}, retriesRemaining={}&quot;, message, retriesRemaining);\n                if(retriesRemaining == 0)\n                    throw new UiSessionTokenGenerationException(message);\n                int sleepMultiplier = maxRetries - retriesRemaining;\n                sleep(sleepMultiplier);\n            }\n        }\n        return extractSessionFromResponse(c2cTenant, recordId, sessionTokenJson);\n    }\n\n\n    private void sleep(int sleepMultiplier) {\n        try {\n            Thread.sleep(minSleepPeriod * sleepMultiplier);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>I wonder if it will be a bottleneck granted that all the objects in Spring are created by default in the singleton scope. It shouldn't be, right?</p>\n<p>===========UPDATE==========</p>\n<p>Let me clarify my question:  I am assuming each calling thread will have its own execution and does not interfere with another thread's execution unless there is some code in the singleton scoped class which is shared by all calling threads.Since thread sleeps are applied to each calling thread, the overall throughput will not suffer. Is it a valid assumption? And, as such this class can remain a component (singleton).</p>\n"},{"tags":["java","spring-boot","spring-cloud","spring-cloud-gateway"],"answers":[{"tags":[],"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672922994,"creation_date":1672922994,"answer_id":75018668,"question_id":75017577,"body_markdown":"In reactive applications, `SecurityContext` is contained in [`ReactiveSecurityContextHolder`][1] which should be used to get `Authentication` in a reactive way as shown below:\r\n\r\n```java\r\nMono&lt;Authentication&gt; getAuthentication() {\r\n    return ReactiveSecurityContextHolder.getContext()\r\n            .switchIfEmpty(Mono.error(new IllegalStateException(&quot;ReactiveSecurityContext is empty!&quot;)))\r\n            .map(SecurityContext::getAuthentication);\r\n}\r\n```\r\n  [1]: https://docs.spring.io/spring-security/reference/reactive/authorization/method.html","title":"Why SecurityContextHolder.getContext().getAuthentication() returning null value?","body":"<p>In reactive applications, <code>SecurityContext</code> is contained in <a href=\"https://docs.spring.io/spring-security/reference/reactive/authorization/method.html\" rel=\"nofollow noreferrer\"><code>ReactiveSecurityContextHolder</code></a> which should be used to get <code>Authentication</code> in a reactive way as shown below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Mono&lt;Authentication&gt; getAuthentication() {\n    return ReactiveSecurityContextHolder.getContext()\n            .switchIfEmpty(Mono.error(new IllegalStateException(&quot;ReactiveSecurityContext is empty!&quot;)))\n            .map(SecurityContext::getAuthentication);\n}\n</code></pre>\n"}],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":473,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682281820,"creation_date":1672917284,"question_id":75017577,"body_markdown":"I am trying to build authentication in spring-cloud-gateway using keycloak authentication and everything is working but when trying to get SecurityContextHolder.getContext().getAuthentication() it is giving null I am not sure why?\r\n\r\nHere it the my code Security Config:\r\n\r\n    @Configuration\r\n    @EnableWebFluxSecurity\r\n    @EnableReactiveMethodSecurity\r\n    public class SecurityConfig {\r\n    \r\n        @Bean\r\n        protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\r\n            return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\r\n        }\r\n    \r\n        @Bean\r\n        public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http,\r\n                                                                ReactiveClientRegistrationRepository clientRegistrationRepository) {\r\n            // Authenticate through configured OpenID Provider\r\n            http.authorizeExchange()\r\n                    .pathMatchers(&quot;/app/**&quot;).authenticated().and().oauth2Login();\r\n    \r\n            // Also logout at the OpenID Connect provider\r\n            http.logout(logout -&gt; logout.logoutSuccessHandler(\r\n                    new OidcClientInitiatedServerLogoutSuccessHandler(clientRegistrationRepository)));\r\n    \r\n            // Require authentication for all requests\r\n            http.authorizeExchange().anyExchange().authenticated();\r\n    \r\n            // Allow showing /home within a frame\r\n            http.headers().frameOptions().mode(XFrameOptionsServerHttpHeadersWriter.Mode.SAMEORIGIN);\r\n    \r\n            // Disable CSRF in the gateway to prevent conflicts with proxied service CSRF\r\n            http.csrf().disable();\r\n            return http.build();\r\n        }\r\n    \r\n    }\r\n\r\nAnd my controller in which I am trying to get data is as below:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/app&quot;)\r\n    public class UserController {\r\n    \r\n        @Autowired\r\n        DataSource dataSource;\r\n    \r\n        @PostMapping(path = &quot;/authenticate&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n        public String getAuth(@RequestBody Map&lt;String, Object&gt; data) {\r\n         Authentication authentication =\r\n                SecurityContextHolder.getContext().getAuthentication();\r\n         //But it is always null\r\n        }\r\n    \r\n    }\r\n\r\nI gone few stackoverflow answer but it is not working according to that there is some issue with SecurityConfig class but I am not able to get it. Please help on it.","title":"Why SecurityContextHolder.getContext().getAuthentication() returning null value?","body":"<p>I am trying to build authentication in spring-cloud-gateway using keycloak authentication and everything is working but when trying to get SecurityContextHolder.getContext().getAuthentication() it is giving null I am not sure why?</p>\n<p>Here it the my code Security Config:</p>\n<pre><code>@Configuration\n@EnableWebFluxSecurity\n@EnableReactiveMethodSecurity\npublic class SecurityConfig {\n\n    @Bean\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\n    }\n\n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http,\n                                                            ReactiveClientRegistrationRepository clientRegistrationRepository) {\n        // Authenticate through configured OpenID Provider\n        http.authorizeExchange()\n                .pathMatchers(&quot;/app/**&quot;).authenticated().and().oauth2Login();\n\n        // Also logout at the OpenID Connect provider\n        http.logout(logout -&gt; logout.logoutSuccessHandler(\n                new OidcClientInitiatedServerLogoutSuccessHandler(clientRegistrationRepository)));\n\n        // Require authentication for all requests\n        http.authorizeExchange().anyExchange().authenticated();\n\n        // Allow showing /home within a frame\n        http.headers().frameOptions().mode(XFrameOptionsServerHttpHeadersWriter.Mode.SAMEORIGIN);\n\n        // Disable CSRF in the gateway to prevent conflicts with proxied service CSRF\n        http.csrf().disable();\n        return http.build();\n    }\n\n}\n</code></pre>\n<p>And my controller in which I am trying to get data is as below:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/app&quot;)\npublic class UserController {\n\n    @Autowired\n    DataSource dataSource;\n\n    @PostMapping(path = &quot;/authenticate&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    public String getAuth(@RequestBody Map&lt;String, Object&gt; data) {\n     Authentication authentication =\n            SecurityContextHolder.getContext().getAuthentication();\n     //But it is always null\n    }\n\n}\n</code></pre>\n<p>I gone few stackoverflow answer but it is not working according to that there is some issue with SecurityConfig class but I am not able to get it. Please help on it.</p>\n"},{"tags":["java","spring","spring-security","oauth-2.0"],"owner":{"account_id":26055193,"reputation":1,"user_id":19757679,"display_name":"MHub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682281761,"creation_date":1673032959,"question_id":75035284,"body_markdown":"I created oauth2 configuration with grant type - authorization code and it works for regular queries called from the browser window.\r\n```\r\n@Bean(&quot;lm&quot;)\r\n    WebClient webClient(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n\r\n        ServletOAuth2AuthorizedClientExchangeFilterFunction filter = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\r\n                authorizedClientManager);\r\n        filter.setDefaultClientRegistrationId(&quot;lm&quot;);\r\n        return WebClient.builder().apply(filter.oauth2Configuration()).build();\r\n    }\r\n\r\n@Bean\r\n    public OAuth2AuthorizedClientManager authorizedClientManager(\r\n            ClientRegistrationRepository clientRegistrationRepository,\r\n            OAuth2AuthorizedClientRepository authorizedClientRepository) {\r\n\r\n        OAuth2AuthorizedClientProvider authorizedClientProvider = OAuth2AuthorizedClientProviderBuilder.builder()\r\n                .authorizationCode()\r\n                .refreshToken()\r\n                .build();\r\n\r\n        DefaultOAuth2AuthorizedClientManager authorizedClientManager = new DefaultOAuth2AuthorizedClientManager(\r\n                clientRegistrationRepository, authorizedClientRepository);\r\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n\r\n        return authorizedClientManager;\r\n    }\r\n```\r\nAfter starting the browser and entering the link, it redirects me to a page where I have to click &quot;grant permissions&quot; from the user account, each subsequent query works using the token and the refresh token.\r\nHowever, I have one function that should be called every minute, I wanted to use `scheduled(fixedRate = 60000)` for this, but I get the error `servletRequest cannot be null`.\r\n\r\n\r\n\r\nI tried to use `AuthorizedClientServiceOAuth2AuthorizedClientManager` and `AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager` in several different ways, but none of the ones provided on the internet work.\r\nCould someone help me create a configuration that would work for regular queries via the browser and those via `scheduled` (will such queries via `scheduled` also use the refresh token?","title":"OAuth2 configuration with authorization code grant type for use with and without scheduled","body":"<p>I created oauth2 configuration with grant type - authorization code and it works for regular queries called from the browser window.</p>\n<pre><code>@Bean(&quot;lm&quot;)\n    WebClient webClient(OAuth2AuthorizedClientManager authorizedClientManager) {\n\n        ServletOAuth2AuthorizedClientExchangeFilterFunction filter = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\n                authorizedClientManager);\n        filter.setDefaultClientRegistrationId(&quot;lm&quot;);\n        return WebClient.builder().apply(filter.oauth2Configuration()).build();\n    }\n\n@Bean\n    public OAuth2AuthorizedClientManager authorizedClientManager(\n            ClientRegistrationRepository clientRegistrationRepository,\n            OAuth2AuthorizedClientRepository authorizedClientRepository) {\n\n        OAuth2AuthorizedClientProvider authorizedClientProvider = OAuth2AuthorizedClientProviderBuilder.builder()\n                .authorizationCode()\n                .refreshToken()\n                .build();\n\n        DefaultOAuth2AuthorizedClientManager authorizedClientManager = new DefaultOAuth2AuthorizedClientManager(\n                clientRegistrationRepository, authorizedClientRepository);\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n\n        return authorizedClientManager;\n    }\n</code></pre>\n<p>After starting the browser and entering the link, it redirects me to a page where I have to click &quot;grant permissions&quot; from the user account, each subsequent query works using the token and the refresh token.\nHowever, I have one function that should be called every minute, I wanted to use <code>scheduled(fixedRate = 60000)</code> for this, but I get the error <code>servletRequest cannot be null</code>.</p>\n<p>I tried to use <code>AuthorizedClientServiceOAuth2AuthorizedClientManager</code> and <code>AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager</code> in several different ways, but none of the ones provided on the internet work.\nCould someone help me create a configuration that would work for regular queries via the browser and those via <code>scheduled</code> (will such queries via <code>scheduled</code> also use the refresh token?</p>\n"},{"tags":["java","multidimensional-array"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1682280903,"post_id":76087050,"comment_id":134186664,"body_markdown":"`arrCapitals[i1]`, from the `String[][] arrCapitals`, returns what? What is the return type of `chooseState`?","body":"<code>arrCapitals[i1]</code>, from the <code>String[][] arrCapitals</code>, returns what? What is the return type of <code>chooseState</code>?"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":1,"creation_date":1682280942,"post_id":76087050,"comment_id":134186668,"body_markdown":"It&#39;s not a string array, it&#39;s an array of array of strings, so `arrCapitals[i1]` will be a `String[]`. Your method is declared to return an `int`.","body":"It&#39;s not a string array, it&#39;s an array of array of strings, so <code>arrCapitals[i1]</code> will be a <code>String[]</code>. Your method is declared to return an <code>int</code>."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1682281183,"post_id":76087050,"comment_id":134186691,"body_markdown":"You aren&#39;t using `rand`. If you can&#39;t change the method signature, `return rand.nextInt(arrCapitals.length);` -- and if you can `public static String[] chooseState(String[][] arrCapitals) { return arrCapitals[ThreadLocalRandom.current().nextInt(arrCapitals.length)]; }`","body":"You aren&#39;t using <code>rand</code>. If you can&#39;t change the method signature, <code>return rand.nextInt(arrCapitals.length);</code> -- and if you can <code>public static String[] chooseState(String[][] arrCapitals) { return arrCapitals[ThreadLocalRandom.current().nextInt(arrCapitals.&zwnj;&#8203;length)]; }</code>"}],"answers":[{"tags":[],"owner":{"account_id":27816584,"reputation":150,"user_id":21237840,"display_name":"Mr. RobotMaster"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682281423,"creation_date":1682281423,"answer_id":76087092,"question_id":76087050,"body_markdown":"your **chooseState** method is **int**, but you are trying to return a **String** array, you can change the return type to **String**\r\n\r\n    public static String chooseState(Random rand, String[][] arrCapitals)\r\n    {\r\n        //create variable to hold random state\r\n        String state = &quot;&quot;;\r\n        //for loop\r\n        //for(int i=0; i&lt; arrCapitals.length; i++)\r\n        //{\r\n        int i1 = rand.nextInt(arrCapitals.length);\r\n        //}\r\n    \r\n        return arrCapitals[i1][0]; // Return only the state name\r\n    }","title":"Why can&#39;t i select a random element from this array, it keeps telling me i cannot convert from String[] to int","body":"<p>your <strong>chooseState</strong> method is <strong>int</strong>, but you are trying to return a <strong>String</strong> array, you can change the return type to <strong>String</strong></p>\n<pre><code>public static String chooseState(Random rand, String[][] arrCapitals)\n{\n    //create variable to hold random state\n    String state = &quot;&quot;;\n    //for loop\n    //for(int i=0; i&lt; arrCapitals.length; i++)\n    //{\n    int i1 = rand.nextInt(arrCapitals.length);\n    //}\n\n    return arrCapitals[i1][0]; // Return only the state name\n}\n</code></pre>\n"}],"owner":{"account_id":26223653,"reputation":7,"user_id":19900650,"display_name":"Ryan Hansen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1682281423,"creation_date":1682280750,"question_id":76087050,"body_markdown":"This has been annoying me for a little bit as i have no idea how to choose a random element from an array if random if the elements arent integers or doubles... i need a random element from the string array but math.random does not support this need. please help me, this program is due in a few hours. Thanks.\r\n\r\n    // multidimensional array\r\n\tpublic static final String[][] arrCapitals\t=\r\n\t{\t\r\n\t\t{ &quot;Alabama&quot;, &quot;Montgomery&quot; },\t\t{ &quot;Alaska&quot;, &quot;Juneau&quot; },\r\n\t\t{ &quot;Arizona&quot;, &quot;Phoenix&quot; },\t\t\t{ &quot;Arkansas&quot;, &quot;Little Rock&quot; },\r\n\t\t{ &quot;California&quot;, &quot;Sacramento&quot; },\t\t{ &quot;Colorado&quot;, &quot;Denver&quot; },\r\n\t\t{ &quot;Connecticut&quot;, &quot;Hartford&quot; },\t\t{ &quot;Delaware&quot;, &quot;Dover&quot; },\r\n\t\t{ &quot;Florida&quot;, &quot;Tallahassee&quot; },    \t{ &quot;Georgia&quot;, &quot;Atlanta&quot; },\r\n\t\t{ &quot;Hawaii&quot;, &quot;Honolulu&quot; },\t\t\t{ &quot;Idaho&quot;, &quot;Boise&quot; },\r\n\t\t{ &quot;Illinois&quot;, &quot;Springfield&quot; },\t\t{ &quot;Indiana&quot;, &quot;Indianapolis&quot; },\r\n\t\t{ &quot;Iowa&quot;, &quot;Des Moines&quot; },\t\t\t{ &quot;Kansas&quot;, &quot;Topeka&quot; },\r\n\t\t{ &quot;Kentucky&quot;, &quot;Frankfort&quot; },\t\t{ &quot;Louisiana&quot;, &quot;Baton Rouge&quot; },\r\n\t\t{ &quot;Maine&quot;, &quot;Augusta&quot; },\t\t\t\t{ &quot;Maryland&quot;, &quot;Annapolis&quot; },\r\n\t\t{ &quot;Massachusettes&quot;, &quot;Boston&quot; },\t\t{ &quot;Michigan&quot;, &quot;Lansing&quot; },\r\n\t\t{ &quot;Minnesota&quot;, &quot;Saint Paul&quot; },\t\t{ &quot;Mississippi&quot;, &quot;Jackson&quot; },\r\n\t\t{ &quot;Missouri&quot;, &quot;Jefferson City&quot; },\t{ &quot;Montana&quot;, &quot;Helena&quot; },\r\n\t\t{ &quot;Nebraska&quot;, &quot;Lincoln&quot; },\t\t\t{ &quot;Nevada&quot;, &quot;Carson City&quot; },\r\n\t\t{ &quot;New Hampshire&quot;, &quot;Concord&quot; },  \t{ &quot;New Jersey&quot;, &quot;Trenton&quot; },\r\n\t\t{ &quot;New York&quot;, &quot;Albany&quot; },\t\t\t{ &quot;New Mexico&quot;, &quot;Santa Fe&quot; },\r\n\t\t{ &quot;North Carolina&quot;, &quot;Raleigh&quot; },\t{ &quot;North Dakota&quot;, &quot;Bismarck&quot; },\r\n\t\t{ &quot;Ohio&quot;, &quot;Columbus&quot; },\t\t\t\t{ &quot;Oklahoma&quot;, &quot;Oklahoma City&quot; },\r\n\t\t{ &quot;Oregon&quot;, &quot;Salem&quot; },\t\t\t\t{ &quot;Pennsylvania&quot;, &quot;Harrisburg&quot; },\r\n\t\t{ &quot;Rhode Island&quot;, &quot;Providence&quot; },\t{ &quot;South Carolina&quot;, &quot;Columbia&quot; },\r\n\t\t{ &quot;South Dakota&quot;, &quot;Pierre&quot; },\t\t{ &quot;Tennessee&quot;, &quot;Nashville&quot; },\r\n\t\t{ &quot;Texas&quot;, &quot;Austin&quot; },\t\t\t\t{ &quot;Utah&quot;, &quot;Salt Lake City&quot; },\r\n\t\t{ &quot;Vermont&quot;, &quot;Montpelier&quot; },\t\t{ &quot;Virginia&quot;, &quot;Richmond&quot; },\r\n\t\t{ &quot;Washington&quot;, &quot;Olympia&quot; },\t\t{ &quot;West Virginia&quot;, &quot;Charleston&quot; },\r\n\t\t{ &quot;Wisconsin&quot;, &quot;Madison&quot; },\t\t\t{ &quot;Wyoming&quot;, &quot;Cheyenne&quot; }\r\n\t};\r\n\r\n    public static int chooseState(Random rand, String[][] arrCapitals)\r\n    {\r\n        //create variable to hold random state\r\n        String state = (&quot;&quot;);\r\n        //for loop\r\n        //for(int i=0; i&lt; arrCapitals.length; i++)\r\n        //{\r\n        int i1 = (int) (Math.random() * arrCapitals.length);\r\n        //}\r\n\r\n        return arrCapitals[i1];\r\n        \r\n    }","title":"Why can&#39;t i select a random element from this array, it keeps telling me i cannot convert from String[] to int","body":"<p>This has been annoying me for a little bit as i have no idea how to choose a random element from an array if random if the elements arent integers or doubles... i need a random element from the string array but math.random does not support this need. please help me, this program is due in a few hours. Thanks.</p>\n<pre><code>// multidimensional array\npublic static final String[][] arrCapitals  =\n{   \n    { &quot;Alabama&quot;, &quot;Montgomery&quot; },        { &quot;Alaska&quot;, &quot;Juneau&quot; },\n    { &quot;Arizona&quot;, &quot;Phoenix&quot; },           { &quot;Arkansas&quot;, &quot;Little Rock&quot; },\n    { &quot;California&quot;, &quot;Sacramento&quot; },     { &quot;Colorado&quot;, &quot;Denver&quot; },\n    { &quot;Connecticut&quot;, &quot;Hartford&quot; },      { &quot;Delaware&quot;, &quot;Dover&quot; },\n    { &quot;Florida&quot;, &quot;Tallahassee&quot; },       { &quot;Georgia&quot;, &quot;Atlanta&quot; },\n    { &quot;Hawaii&quot;, &quot;Honolulu&quot; },           { &quot;Idaho&quot;, &quot;Boise&quot; },\n    { &quot;Illinois&quot;, &quot;Springfield&quot; },      { &quot;Indiana&quot;, &quot;Indianapolis&quot; },\n    { &quot;Iowa&quot;, &quot;Des Moines&quot; },           { &quot;Kansas&quot;, &quot;Topeka&quot; },\n    { &quot;Kentucky&quot;, &quot;Frankfort&quot; },        { &quot;Louisiana&quot;, &quot;Baton Rouge&quot; },\n    { &quot;Maine&quot;, &quot;Augusta&quot; },             { &quot;Maryland&quot;, &quot;Annapolis&quot; },\n    { &quot;Massachusettes&quot;, &quot;Boston&quot; },     { &quot;Michigan&quot;, &quot;Lansing&quot; },\n    { &quot;Minnesota&quot;, &quot;Saint Paul&quot; },      { &quot;Mississippi&quot;, &quot;Jackson&quot; },\n    { &quot;Missouri&quot;, &quot;Jefferson City&quot; },   { &quot;Montana&quot;, &quot;Helena&quot; },\n    { &quot;Nebraska&quot;, &quot;Lincoln&quot; },          { &quot;Nevada&quot;, &quot;Carson City&quot; },\n    { &quot;New Hampshire&quot;, &quot;Concord&quot; },     { &quot;New Jersey&quot;, &quot;Trenton&quot; },\n    { &quot;New York&quot;, &quot;Albany&quot; },           { &quot;New Mexico&quot;, &quot;Santa Fe&quot; },\n    { &quot;North Carolina&quot;, &quot;Raleigh&quot; },    { &quot;North Dakota&quot;, &quot;Bismarck&quot; },\n    { &quot;Ohio&quot;, &quot;Columbus&quot; },             { &quot;Oklahoma&quot;, &quot;Oklahoma City&quot; },\n    { &quot;Oregon&quot;, &quot;Salem&quot; },              { &quot;Pennsylvania&quot;, &quot;Harrisburg&quot; },\n    { &quot;Rhode Island&quot;, &quot;Providence&quot; },   { &quot;South Carolina&quot;, &quot;Columbia&quot; },\n    { &quot;South Dakota&quot;, &quot;Pierre&quot; },       { &quot;Tennessee&quot;, &quot;Nashville&quot; },\n    { &quot;Texas&quot;, &quot;Austin&quot; },              { &quot;Utah&quot;, &quot;Salt Lake City&quot; },\n    { &quot;Vermont&quot;, &quot;Montpelier&quot; },        { &quot;Virginia&quot;, &quot;Richmond&quot; },\n    { &quot;Washington&quot;, &quot;Olympia&quot; },        { &quot;West Virginia&quot;, &quot;Charleston&quot; },\n    { &quot;Wisconsin&quot;, &quot;Madison&quot; },         { &quot;Wyoming&quot;, &quot;Cheyenne&quot; }\n};\n\npublic static int chooseState(Random rand, String[][] arrCapitals)\n{\n    //create variable to hold random state\n    String state = (&quot;&quot;);\n    //for loop\n    //for(int i=0; i&lt; arrCapitals.length; i++)\n    //{\n    int i1 = (int) (Math.random() * arrCapitals.length);\n    //}\n\n    return arrCapitals[i1];\n    \n}\n</code></pre>\n"},{"tags":["java","spring","http","spring-security"],"comments":[{"owner":{"account_id":7245066,"reputation":1009,"user_id":7141562,"display_name":"admlz635"},"score":0,"creation_date":1674358835,"post_id":75197740,"comment_id":132696699,"body_markdown":"Hi there! 403 usually means that the user don&#39;t have the required permissions, in this case the authority/role required to access a resource.","body":"Hi there! 403 usually means that the user don&#39;t have the required permissions, in this case the authority/role required to access a resource."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1674376322,"post_id":75197740,"comment_id":132698220,"body_markdown":"and you have enabled debug logging and read what your logs are telling you u assume","body":"and you have enabled debug logging and read what your logs are telling you u assume"}],"answers":[{"tags":[],"owner":{"account_id":9748833,"reputation":11,"user_id":7227819,"display_name":"Adem Bulut"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674403013,"creation_date":1674403013,"answer_id":75201814,"question_id":75197740,"body_markdown":"When I look at your code, you do not set the user&#39;s privileges in the service that returns user information.\r\n\r\nYou have created a user in UserService and specified only the id information. In this case, you cannot access any of the urls you have given to the role.\r\n\r\nIf you edit your code as below, your problem will be solved.\r\n\r\n\r\n\r\n    @Service\r\n    public class CustomUserDetailsService implements UserDetailsService{\r\n\r\n\t@Autowired\r\n\tprivate UserRepository repo;\r\n\t\r\n\t@Override\r\n\tpublic UserDetails loadUserByUsername(String login) throws UsernameNotFoundException {\r\n\t\tOptional&lt;Users&gt; user= repo.findByLogin(login);\r\n\t\tif(user==null) {\r\n\t\t\tthrow new UsernameNotFoundException(&quot;User not found&quot;);\r\n\t\t}\r\n\t\t//return new CustomUserDetails(user.get());\r\n        return new User(login, login, Collections.singletonList(new SimpleGrantedAuthority(&quot;ADMIN&quot;)))\r\n\t}\r\n\r\n}","title":"ALL requests returning as Forbiddden 403 after implementing WebSecurityConfigurerAdapter","body":"<p>When I look at your code, you do not set the user's privileges in the service that returns user information.</p>\n<p>You have created a user in UserService and specified only the id information. In this case, you cannot access any of the urls you have given to the role.</p>\n<p>If you edit your code as below, your problem will be solved.</p>\n<pre><code>@Service\npublic class CustomUserDetailsService implements UserDetailsService{\n\n@Autowired\nprivate UserRepository repo;\n\n@Override\npublic UserDetails loadUserByUsername(String login) throws UsernameNotFoundException {\n    Optional&lt;Users&gt; user= repo.findByLogin(login);\n    if(user==null) {\n        throw new UsernameNotFoundException(&quot;User not found&quot;);\n    }\n    //return new CustomUserDetails(user.get());\n    return new User(login, login, Collections.singletonList(new SimpleGrantedAuthority(&quot;ADMIN&quot;)))\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":24015114,"reputation":109,"user_id":20077835,"display_name":"vitoriac"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682281255,"creation_date":1674352171,"question_id":75197740,"body_markdown":"I just added WebSecurityConfigurerAdapter to my project to try and make an user logic (login - password - what which user could do to my application) for the first time ever but something is really wrong. \r\n\r\nWhenever I try to make a request, to any path or any kind of method, it returns me as 403 Forbidden! I don&#39;t know what to do since this is the first time I&#39;m dealing with any kind of security logic. \r\n\r\nthis is my code: \r\n\r\n\r\n  \r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @ComponentScan\r\n    @EnableGlobalMethodSecurity(\r\n            prePostEnabled = true,\r\n            securedEnabled = true,\r\n            jsr250Enabled = true)\r\n    public class WebSecurityConfiguration extends WebSecurityConfigurerAdapter{\r\n    \r\n    \t \t@Autowired\r\n    \t    private UserDetailsService userDetailsService;\r\n    \r\n    \t    @Bean\r\n    \t    AuthenticationProvider authenticationProvider() {\r\n    \t        DaoAuthenticationProvider provider\r\n    \t                 = new DaoAuthenticationProvider();\r\n    \t        provider.setUserDetailsService(userDetailsService);\r\n    \t        provider.setPasswordEncoder(new BCryptPasswordEncoder());\r\n    \t        return  provider;\r\n    \t    }\r\n    \t    @Override\r\n    \t    protected void configure(HttpSecurity http) throws Exception {\r\n    \t    \t http\r\n    \t            .authorizeRequests()\r\n    \t            .antMatchers(HttpMethod.POST, &quot;/**&quot;)\r\n    \t            .hasAuthority(&quot;ADMIN&quot;)\r\n    \t            .antMatchers(HttpMethod.DELETE, &quot;/**&quot;)\r\n    \t            .hasAuthority(&quot;ADMIN&quot;)\r\n    \t            .antMatchers(HttpMethod.PUT, &quot;/**&quot;)\r\n    \t            .hasAuthority(&quot;ADMIN&quot;)\r\n    \t            .antMatchers(HttpMethod.GET, &quot;/**&quot;)\r\n    \t            .hasAuthority(&quot;ADMIN&quot;) \r\n    \t            .antMatchers(HttpMethod.GET, &quot;/tools&quot;)\r\n    \t            .hasAuthority(&quot;USER&quot;)\r\n    \t            .anyRequest()\r\n    \t            .authenticated()\r\n    \t            .and()\r\n    \t            .cors()\r\n    \t            .and()\r\n    \t            .exceptionHandling()\r\n    \t            .and()\r\n    \t            .sessionManagement()\r\n    \t            .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n    \t            .and()\r\n    \t            .csrf()\r\n    \t            .disable();\r\n    \r\n    \t    }\r\n    \r\n      \r\n    }\r\n\r\nI also have these two classes (I&#39;m following a tutorial and the guy made these two):\r\n\r\n    public class CustomUserDetails implements UserDetails {\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tprivate Users user;\r\n\r\n\tpublic CustomUserDetails(Users user) {\r\n\t\tsuper();\r\n\t\tthis.user = user;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n\t\treturn Collections.singleton(new SimpleGrantedAuthority(user.getRole()));\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String getPassword() {\r\n\t\treturn user.getPassword();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String getUsername() {\r\n\t\treturn user.getLogin();\r\n\t}\r\n\r\n\tpublic String getEmail() {\r\n\t\treturn user.getEmail();\r\n\t}\r\n\r\n\r\n\t@Override\r\n\tpublic boolean isAccountNonExpired() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean isAccountNonLocked() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean isCredentialsNonExpired() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean isEnabled() {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\n\r\nand \r\n\r\n        public class CustomUserDetails implements UserDetails {\r\n    \t/**\r\n    \t * \r\n    \t */\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \tprivate Users user;\r\n    \r\n    \tpublic CustomUserDetails(Users user) {\r\n    \t\tsuper();\r\n    \t\tthis.user = user;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n    \t\treturn Collections.singleton(new SimpleGrantedAuthority(user.getRole()));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String getPassword() {\r\n    \t\treturn user.getPassword();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String getUsername() {\r\n    \t\treturn user.getLogin();\r\n    \t}\r\n    \r\n    \tpublic String getEmail() {\r\n    \t\treturn user.getEmail();\r\n    \t}\r\n    \r\n    \r\n    \t@Override\r\n    \tpublic boolean isAccountNonExpired() {\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isAccountNonLocked() {\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isCredentialsNonExpired() {\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isEnabled() {\r\n    \t\treturn true;\r\n    \t}\r\n    }\r\n\r\nif I left anything out and you really wanna help, this is the entire code: https://github.com/vitoriaacarvalho/backend-challenge-very-useful-tools-to-remember-\r\n\r\nI&#39;m already thanking (so much) anyone who responds and tries to help!","title":"ALL requests returning as Forbiddden 403 after implementing WebSecurityConfigurerAdapter","body":"<p>I just added WebSecurityConfigurerAdapter to my project to try and make an user logic (login - password - what which user could do to my application) for the first time ever but something is really wrong.</p>\n<p>Whenever I try to make a request, to any path or any kind of method, it returns me as 403 Forbidden! I don't know what to do since this is the first time I'm dealing with any kind of security logic.</p>\n<p>this is my code:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@ComponentScan\n@EnableGlobalMethodSecurity(\n        prePostEnabled = true,\n        securedEnabled = true,\n        jsr250Enabled = true)\npublic class WebSecurityConfiguration extends WebSecurityConfigurerAdapter{\n\n        @Autowired\n        private UserDetailsService userDetailsService;\n\n        @Bean\n        AuthenticationProvider authenticationProvider() {\n            DaoAuthenticationProvider provider\n                     = new DaoAuthenticationProvider();\n            provider.setUserDetailsService(userDetailsService);\n            provider.setPasswordEncoder(new BCryptPasswordEncoder());\n            return  provider;\n        }\n        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n             http\n                .authorizeRequests()\n                .antMatchers(HttpMethod.POST, &quot;/**&quot;)\n                .hasAuthority(&quot;ADMIN&quot;)\n                .antMatchers(HttpMethod.DELETE, &quot;/**&quot;)\n                .hasAuthority(&quot;ADMIN&quot;)\n                .antMatchers(HttpMethod.PUT, &quot;/**&quot;)\n                .hasAuthority(&quot;ADMIN&quot;)\n                .antMatchers(HttpMethod.GET, &quot;/**&quot;)\n                .hasAuthority(&quot;ADMIN&quot;) \n                .antMatchers(HttpMethod.GET, &quot;/tools&quot;)\n                .hasAuthority(&quot;USER&quot;)\n                .anyRequest()\n                .authenticated()\n                .and()\n                .cors()\n                .and()\n                .exceptionHandling()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .csrf()\n                .disable();\n\n        }\n\n  \n}\n</code></pre>\n<p>I also have these two classes (I'm following a tutorial and the guy made these two):</p>\n<pre><code>public class CustomUserDetails implements UserDetails {\n/**\n * \n */\nprivate static final long serialVersionUID = 1L;\nprivate Users user;\n\npublic CustomUserDetails(Users user) {\n    super();\n    this.user = user;\n}\n\n@Override\npublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n    return Collections.singleton(new SimpleGrantedAuthority(user.getRole()));\n}\n\n@Override\npublic String getPassword() {\n    return user.getPassword();\n}\n\n@Override\npublic String getUsername() {\n    return user.getLogin();\n}\n\npublic String getEmail() {\n    return user.getEmail();\n}\n\n\n@Override\npublic boolean isAccountNonExpired() {\n    return true;\n}\n\n@Override\npublic boolean isAccountNonLocked() {\n    return true;\n}\n\n@Override\npublic boolean isCredentialsNonExpired() {\n    return true;\n}\n\n@Override\npublic boolean isEnabled() {\n    return true;\n}\n</code></pre>\n<p>}</p>\n<p>and</p>\n<pre><code>    public class CustomUserDetails implements UserDetails {\n    /**\n     * \n     */\n    private static final long serialVersionUID = 1L;\n    private Users user;\n\n    public CustomUserDetails(Users user) {\n        super();\n        this.user = user;\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return Collections.singleton(new SimpleGrantedAuthority(user.getRole()));\n    }\n\n    @Override\n    public String getPassword() {\n        return user.getPassword();\n    }\n\n    @Override\n    public String getUsername() {\n        return user.getLogin();\n    }\n\n    public String getEmail() {\n        return user.getEmail();\n    }\n\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre>\n<p>if I left anything out and you really wanna help, this is the entire code: <a href=\"https://github.com/vitoriaacarvalho/backend-challenge-very-useful-tools-to-remember-\" rel=\"nofollow noreferrer\">https://github.com/vitoriaacarvalho/backend-challenge-very-useful-tools-to-remember-</a></p>\n<p>I'm already thanking (so much) anyone who responds and tries to help!</p>\n"},{"tags":["java","angular","spring-security","openid-connect"],"comments":[{"owner":{"account_id":19395242,"reputation":1,"user_id":14183088,"display_name":"Mtyz"},"score":0,"creation_date":1673718997,"post_id":75120086,"comment_id":132562684,"body_markdown":"Also, i know there is no issue from Angular side since its works like a charm with Azure or KeyCloak issuer.","body":"Also, i know there is no issue from Angular side since its works like a charm with Azure or KeyCloak issuer."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1674344608,"post_id":75120086,"comment_id":132695477,"body_markdown":"Maybe, this has something to do with https://github.com/spring-projects/spring-security/issues/12307 (same kind of redirection issue from spring-security framework)","body":"Maybe, this has something to do with <a href=\"https://github.com/spring-projects/spring-security/issues/12307\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-security/issues/12307</a> (same kind of redirection issue from spring-security framework)"},{"owner":{"account_id":8594874,"reputation":531,"user_id":6438191,"display_name":"Juan Cabello"},"score":0,"creation_date":1678293083,"post_id":75120086,"comment_id":133505554,"body_markdown":"Chek it out: https://github.com/git-ecosystem/git-credential-manager/issues/594","body":"Chek it out: <a href=\"https://github.com/git-ecosystem/git-credential-manager/issues/594\" rel=\"nofollow noreferrer\">github.com/git-ecosystem/git-credential-manager/issues/594</a>"}],"owner":{"account_id":19395242,"reputation":1,"user_id":14183088,"display_name":"Mtyz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":561,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682281142,"creation_date":1673718538,"question_id":75120086,"body_markdown":"I&#39;ve configured a spring oauth2 server following the spring.io get started documentation. When I initiate a login from an Angular client running on port 4200, when the logging is successfull (ie: correct id and password are given), I get redirected to the redirect_uri of the angular client only when I use 127.0.0.1:4200 to access my angular app. If I come from localhost I get redirect to an error page\r\n\r\n[Spring.io doc](https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html)\r\n\r\nMy spring configuration :\r\n\r\n```java\r\n    @Bean\r\n    @Order(1)\r\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http)\r\n            throws Exception {\r\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n            .oidc(Customizer.withDefaults());\t// Enable OpenID Connect 1.0\r\n        http\r\n                // Redirect to the login page when not authenticated from the\r\n                // authorization endpoint\r\n                .exceptionHandling((exceptions) -&gt; exceptions\r\n                        .authenticationEntryPoint(\r\n                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;))\r\n                )\r\n                // Accept access tokens for User Info and/or Client Registration\r\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    @Order(2)\r\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http)\r\n            throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorize) -&gt; authorize\r\n                        .anyRequest().authenticated()\r\n                )\r\n                // Form login handles the redirect to the login page from the\r\n                // authorization server filter chain\r\n                .formLogin(Customizer.withDefaults());\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public RegisteredClientRepository registeredClientRepository(JdbcTemplate jdbcTemplate) {\r\n        RegisteredClient registeredClient = RegisteredClient.withId(&quot;bakcup-ui&quot;)\r\n                                                            .clientId(&quot;backup-ui&quot;)\r\n                                                            .clientAuthenticationMethod(ClientAuthenticationMethod.NONE)\r\n                                                            .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\r\n                                                            .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\r\n                                                            .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)\r\n                                                            .redirectUri(&quot;http://localhost:4200&quot;)\r\n                                                            .redirectUri(&quot;http://127.0.0.1:4200&quot;)\r\n                                                            .scope(OidcScopes.OPENID)\r\n                                                            .scope(OidcScopes.PROFILE)\r\n                                                            .clientSettings(ClientSettings.builder().requireAuthorizationConsent(false).build())\r\n                                                            .build();\r\n\r\n        // Save registered client in db as if in-memory\r\n        JdbcRegisteredClientRepository registeredClientRepository = new JdbcRegisteredClientRepository(jdbcTemplate);\r\n        registeredClientRepository.save(registeredClient);\r\n\r\n\r\n        return registeredClientRepository;\r\n    }\r\n```\r\n\r\nMy angular side configuration (using angular-oauth2-oidc) :\r\n\r\n```typescript\r\nexport const authConfig: AuthConfig = {\r\n    clientId: &#39;backup-ui&#39;,\r\n    issuer: &#39;https://localhost:9000&#39;,\r\n    redirectUri: window.location.origin,\r\n    responseType: &#39;code&#39;,\r\n    scope: &#39;openid profile&#39;,\r\n    strictDiscoveryDocumentValidation: false,\r\n}\r\n```\r\n\r\nThe url I get redirected to when coming from localhost:\r\n\r\n```\r\nlocalhost:9000/error?response_type=code&amp;client_id=backup-ui&amp;state=M09hSHdSdC5KSlRfOGlLNDZWa1NQbE05TDFRamJ6NGtwUDludUk0blM1Y1dO&amp;redirect_uri=http%3A%2F%2Flocalhost%3A4200&amp;scope=openid%20profile&amp;code_challenge=_LU-Ou9Gr_53_LGDKTz36bJddFr2gndknIrZoC03ZJo&amp;code_challenge_method=S256&amp;nonce=M09hSHdSdC5KSlRfOGlLNDZWa1NQbE05TDFRamJ6NGtwUDludUk0blM1Y1dO&amp;continue\r\n```\r\n\r\n[Error page](https://i.stack.imgur.com/uueG4.png)\r\n\r\nIf after that I go back to localhost:4200, I land there:\r\n\r\n```\r\nlocalhost:9000/oauth2/authorize?response_type=code&amp;client_id=backup-ui&amp;state=SUhKQ1BLejFfeUJTalVwUHlpWEVGYURQUDV1M3lsUG5lZElvMjd3QzNRbWJr&amp;redirect_uri=http%3A%2F%2Flocalhost%3A4200&amp;scope=openid%20profile&amp;code_challenge=Y-V75oU8Zjsf7lctW9otdkn-U0vML-nGv8v1FCbrM5A&amp;code_challenge_method=S256&amp;nonce=SUhKQ1BLejFfeUJTalVwUHlpWEVGYURQUDV1M3lsUG5lZElvMjd3QzNRbWJr\r\n```\r\n\r\nWith the same error page (since there is no html in my spring server)\r\n\r\nI tried a lot of things but none are working. Even using the sample code from github [spring-authrozation-server](https://github.com/spring-projects/spring-authorization-server) produces the same problem.","title":"Spring oauth server redirect to redirect_uri when coming from 127.0.0.1 but not from localhost (Angular client)","body":"<p>I've configured a spring oauth2 server following the spring.io get started documentation. When I initiate a login from an Angular client running on port 4200, when the logging is successfull (ie: correct id and password are given), I get redirected to the redirect_uri of the angular client only when I use 127.0.0.1:4200 to access my angular app. If I come from localhost I get redirect to an error page</p>\n<p><a href=\"https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html\" rel=\"nofollow noreferrer\">Spring.io doc</a></p>\n<p>My spring configuration :</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    @Order(1)\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http)\n            throws Exception {\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n            .oidc(Customizer.withDefaults());   // Enable OpenID Connect 1.0\n        http\n                // Redirect to the login page when not authenticated from the\n                // authorization endpoint\n                .exceptionHandling((exceptions) -&gt; exceptions\n                        .authenticationEntryPoint(\n                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;))\n                )\n                // Accept access tokens for User Info and/or Client Registration\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n\n        return http.build();\n    }\n\n    @Bean\n    @Order(2)\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http)\n            throws Exception {\n        http\n                .authorizeHttpRequests((authorize) -&gt; authorize\n                        .anyRequest().authenticated()\n                )\n                // Form login handles the redirect to the login page from the\n                // authorization server filter chain\n                .formLogin(Customizer.withDefaults());\n\n        return http.build();\n    }\n\n    @Bean\n    public RegisteredClientRepository registeredClientRepository(JdbcTemplate jdbcTemplate) {\n        RegisteredClient registeredClient = RegisteredClient.withId(&quot;bakcup-ui&quot;)\n                                                            .clientId(&quot;backup-ui&quot;)\n                                                            .clientAuthenticationMethod(ClientAuthenticationMethod.NONE)\n                                                            .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\n                                                            .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\n                                                            .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)\n                                                            .redirectUri(&quot;http://localhost:4200&quot;)\n                                                            .redirectUri(&quot;http://127.0.0.1:4200&quot;)\n                                                            .scope(OidcScopes.OPENID)\n                                                            .scope(OidcScopes.PROFILE)\n                                                            .clientSettings(ClientSettings.builder().requireAuthorizationConsent(false).build())\n                                                            .build();\n\n        // Save registered client in db as if in-memory\n        JdbcRegisteredClientRepository registeredClientRepository = new JdbcRegisteredClientRepository(jdbcTemplate);\n        registeredClientRepository.save(registeredClient);\n\n\n        return registeredClientRepository;\n    }\n</code></pre>\n<p>My angular side configuration (using angular-oauth2-oidc) :</p>\n<pre class=\"lang-js prettyprint-override\"><code>export const authConfig: AuthConfig = {\n    clientId: 'backup-ui',\n    issuer: 'https://localhost:9000',\n    redirectUri: window.location.origin,\n    responseType: 'code',\n    scope: 'openid profile',\n    strictDiscoveryDocumentValidation: false,\n}\n</code></pre>\n<p>The url I get redirected to when coming from localhost:</p>\n<pre><code>localhost:9000/error?response_type=code&amp;client_id=backup-ui&amp;state=M09hSHdSdC5KSlRfOGlLNDZWa1NQbE05TDFRamJ6NGtwUDludUk0blM1Y1dO&amp;redirect_uri=http%3A%2F%2Flocalhost%3A4200&amp;scope=openid%20profile&amp;code_challenge=_LU-Ou9Gr_53_LGDKTz36bJddFr2gndknIrZoC03ZJo&amp;code_challenge_method=S256&amp;nonce=M09hSHdSdC5KSlRfOGlLNDZWa1NQbE05TDFRamJ6NGtwUDludUk0blM1Y1dO&amp;continue\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/uueG4.png\" rel=\"nofollow noreferrer\">Error page</a></p>\n<p>If after that I go back to localhost:4200, I land there:</p>\n<pre><code>localhost:9000/oauth2/authorize?response_type=code&amp;client_id=backup-ui&amp;state=SUhKQ1BLejFfeUJTalVwUHlpWEVGYURQUDV1M3lsUG5lZElvMjd3QzNRbWJr&amp;redirect_uri=http%3A%2F%2Flocalhost%3A4200&amp;scope=openid%20profile&amp;code_challenge=Y-V75oU8Zjsf7lctW9otdkn-U0vML-nGv8v1FCbrM5A&amp;code_challenge_method=S256&amp;nonce=SUhKQ1BLejFfeUJTalVwUHlpWEVGYURQUDV1M3lsUG5lZElvMjd3QzNRbWJr\n</code></pre>\n<p>With the same error page (since there is no html in my spring server)</p>\n<p>I tried a lot of things but none are working. Even using the sample code from github <a href=\"https://github.com/spring-projects/spring-authorization-server\" rel=\"nofollow noreferrer\">spring-authrozation-server</a> produces the same problem.</p>\n"},{"tags":["java","spring-boot","oauth-2.0","keycloak","spring-cloud-gateway"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1673974311,"post_id":75145214,"comment_id":132614035,"body_markdown":"Aren&#39;t you missing an allowed origin in Keycloak (and not a post logout URL)?","body":"Aren&#39;t you missing an allowed origin in Keycloak (and not a post logout URL)?"},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1673975117,"post_id":75145214,"comment_id":132614275,"body_markdown":"In Keycloak web-origin I have added  * but still not working. and post logout URL is set in setLogoutSuccessUrl method","body":"In Keycloak web-origin I have added  * but still not working. and post logout URL is set in setLogoutSuccessUrl method"}],"answers":[{"tags":[],"owner":{"account_id":27511021,"reputation":1,"user_id":20992932,"display_name":"darz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673977768,"creation_date":1673977356,"answer_id":75150236,"question_id":75145214,"body_markdown":"I&#39;ve spent my share of time figuring out keycloak CORS errors and this is what I figured out.\r\n\r\nIf you have web origins correctly configured (https://stackoverflow.com/a/59072362/20992932) and you are still getting CORS errors there is high probability that the request you are sending is incorrect (jboss handles error before checking client web origin). \r\n\r\nTo find out if that is the case for you the easiest solution would be to disable same origin policy on the browser (of course for the time of the testing only). Then in network console you should see the actual error response.\r\n\r\n\r\n Here is how to do it in chrome based browsers: \r\n\r\n`chromium-browser --disable-web-security --user-data-dir=&quot;[some directory here]&quot;`\r\n\r\nFor more see:\r\nhttps://stackoverflow.com/a/59072362/20992932\r\n\r\n","title":"Keycloak logout give cors errors","body":"<p>I've spent my share of time figuring out keycloak CORS errors and this is what I figured out.</p>\n<p>If you have web origins correctly configured (<a href=\"https://stackoverflow.com/a/59072362/20992932\">https://stackoverflow.com/a/59072362/20992932</a>) and you are still getting CORS errors there is high probability that the request you are sending is incorrect (jboss handles error before checking client web origin).</p>\n<p>To find out if that is the case for you the easiest solution would be to disable same origin policy on the browser (of course for the time of the testing only). Then in network console you should see the actual error response.</p>\n<p>Here is how to do it in chrome based browsers:</p>\n<p><code>chromium-browser --disable-web-security --user-data-dir=&quot;[some directory here]&quot;</code></p>\n<p>For more see:\n<a href=\"https://stackoverflow.com/a/59072362/20992932\">https://stackoverflow.com/a/59072362/20992932</a></p>\n"}],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682281027,"creation_date":1673951977,"question_id":75145214,"body_markdown":"I am building a Spring Cloud gateway and trying to logout keycloak but it is giving me cors errors, my code it as below:\r\n\r\nSecurity class in which I defined logout code logic:\r\n\r\n    @Bean\r\n    public ServerSecurityContextRepository securityContextRepository() {\r\n        WebSessionServerSecurityContextRepository securityContextRepository =\r\n                new WebSessionServerSecurityContextRepository();\r\n\r\n        securityContextRepository.setSpringSecurityContextAttrName(&quot;langdope-security-context&quot;);\r\n\r\n        return securityContextRepository;\r\n    }\r\n\r\n    private LogoutWebFilter logoutWebFilter() {\r\n        LogoutWebFilter logoutWebFilter = new LogoutWebFilter();\r\n\r\n        SecurityContextServerLogoutHandler logoutHandler = new SecurityContextServerLogoutHandler();\r\n        logoutHandler.setSecurityContextRepository(securityContextRepository());\r\n\r\n        RedirectServerLogoutSuccessHandler logoutSuccessHandler = new RedirectServerLogoutSuccessHandler();\r\n        logoutSuccessHandler.setLogoutSuccessUrl(URI.create(&quot;http://localhost:9000/app/Default&quot;));\r\n\r\n        logoutWebFilter.setLogoutHandler(logoutHandler());\r\n        logoutWebFilter.setLogoutSuccessHandler(logoutSuccessHandler);\r\n        logoutWebFilter.setRequiresLogoutMatcher(\r\n                ServerWebExchangeMatchers.pathMatchers(HttpMethod.GET, &quot;/app/logout&quot;)\r\n        );\r\n\r\n        return logoutWebFilter;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http,ReactiveClientRegistrationRepository repository) {\r\n        // Authenticate through configured OpenID Provider\r\n        http.addFilterAfter(new CustomWebFilter(), SecurityWebFiltersOrder.LAST).authorizeExchange()\r\n                .pathMatchers(&quot;/app/logout&quot;).permitAll()\r\n                .pathMatchers(&quot;/app/authenticate&quot;).authenticated()\r\n                .pathMatchers(&quot;/app/**&quot;).authenticated().and().\r\n                logout().disable()\r\n                .securityContextRepository(securityContextRepository())\r\n                .addFilterAt(logoutWebFilter(), SecurityWebFiltersOrder.LOGOUT)\r\n                .oauth2Login(Customizer.withDefaults());\r\n\r\n        // Also logout at the OpenID Connect provider\r\n        http.httpBasic().disable();\r\n        // Require authentication for all requests\r\n       // http.authorizeExchange().anyExchange().authenticated();\r\n\r\n        // Allow showing /home within a frame\r\n        http.headers().frameOptions().mode(XFrameOptionsServerHttpHeadersWriter.Mode.SAMEORIGIN);\r\n\r\n        // Disable CSRF in the gateway to prevent conflicts with proxied service CSRF\r\n        http.csrf().disable();\r\n\r\n        return http.build();\r\n    }\r\n\r\nNow when from front-end I hit logout it gives me below error:\r\n\r\n    Access to XMLHttpRequest at &#39;http://localhost:8280/auth/realms/Default/protocol/openid-connect/auth?response_type=code&amp;client_id=Default&amp;scope=openid%20email%20profile&amp;state=qVQ46iGilTo9o2Ro7CdZzl9kmsMm23jnEqckybucgII%3D&amp;redirect_uri=http://localhost:9000/login/oauth2/code/keycloak&amp;nonce=Z6hMnfYEJaOpuJnX44obCe6GyW8Oc6FSn3MOU_2bRg4&#39; (redirected from &#39;http://localhost:9000/app/logout&#39;) from origin &#39;http://localhost:9000&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.\r\n\r\nIn Keycloak for valid URL I have given * to test but still not working. What am I missing?\r\n","title":"Keycloak logout give cors errors","body":"<p>I am building a Spring Cloud gateway and trying to logout keycloak but it is giving me cors errors, my code it as below:</p>\n<p>Security class in which I defined logout code logic:</p>\n<pre><code>@Bean\npublic ServerSecurityContextRepository securityContextRepository() {\n    WebSessionServerSecurityContextRepository securityContextRepository =\n            new WebSessionServerSecurityContextRepository();\n\n    securityContextRepository.setSpringSecurityContextAttrName(&quot;langdope-security-context&quot;);\n\n    return securityContextRepository;\n}\n\nprivate LogoutWebFilter logoutWebFilter() {\n    LogoutWebFilter logoutWebFilter = new LogoutWebFilter();\n\n    SecurityContextServerLogoutHandler logoutHandler = new SecurityContextServerLogoutHandler();\n    logoutHandler.setSecurityContextRepository(securityContextRepository());\n\n    RedirectServerLogoutSuccessHandler logoutSuccessHandler = new RedirectServerLogoutSuccessHandler();\n    logoutSuccessHandler.setLogoutSuccessUrl(URI.create(&quot;http://localhost:9000/app/Default&quot;));\n\n    logoutWebFilter.setLogoutHandler(logoutHandler());\n    logoutWebFilter.setLogoutSuccessHandler(logoutSuccessHandler);\n    logoutWebFilter.setRequiresLogoutMatcher(\n            ServerWebExchangeMatchers.pathMatchers(HttpMethod.GET, &quot;/app/logout&quot;)\n    );\n\n    return logoutWebFilter;\n}\n\n@Bean\npublic SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http,ReactiveClientRegistrationRepository repository) {\n    // Authenticate through configured OpenID Provider\n    http.addFilterAfter(new CustomWebFilter(), SecurityWebFiltersOrder.LAST).authorizeExchange()\n            .pathMatchers(&quot;/app/logout&quot;).permitAll()\n            .pathMatchers(&quot;/app/authenticate&quot;).authenticated()\n            .pathMatchers(&quot;/app/**&quot;).authenticated().and().\n            logout().disable()\n            .securityContextRepository(securityContextRepository())\n            .addFilterAt(logoutWebFilter(), SecurityWebFiltersOrder.LOGOUT)\n            .oauth2Login(Customizer.withDefaults());\n\n    // Also logout at the OpenID Connect provider\n    http.httpBasic().disable();\n    // Require authentication for all requests\n   // http.authorizeExchange().anyExchange().authenticated();\n\n    // Allow showing /home within a frame\n    http.headers().frameOptions().mode(XFrameOptionsServerHttpHeadersWriter.Mode.SAMEORIGIN);\n\n    // Disable CSRF in the gateway to prevent conflicts with proxied service CSRF\n    http.csrf().disable();\n\n    return http.build();\n}\n</code></pre>\n<p>Now when from front-end I hit logout it gives me below error:</p>\n<pre><code>Access to XMLHttpRequest at 'http://localhost:8280/auth/realms/Default/protocol/openid-connect/auth?response_type=code&amp;client_id=Default&amp;scope=openid%20email%20profile&amp;state=qVQ46iGilTo9o2Ro7CdZzl9kmsMm23jnEqckybucgII%3D&amp;redirect_uri=http://localhost:9000/login/oauth2/code/keycloak&amp;nonce=Z6hMnfYEJaOpuJnX44obCe6GyW8Oc6FSn3MOU_2bRg4' (redirected from 'http://localhost:9000/app/logout') from origin 'http://localhost:9000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.\n</code></pre>\n<p>In Keycloak for valid URL I have given * to test but still not working. What am I missing?</p>\n"},{"tags":["java","spring","exception","logging","application.properties"],"comments":[{"owner":{"account_id":1974004,"reputation":5392,"user_id":1772220,"display_name":"ugexe"},"score":0,"creation_date":1681671657,"post_id":76024349,"comment_id":134090510,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551/1772220)","body":"<a href=\"//meta.stackoverflow.com/q/285551/1772220\">Please do not upload images of code/data/errors.</a>"}],"answers":[{"tags":[],"owner":{"account_id":11599086,"reputation":1,"user_id":8496863,"display_name":"Ashish Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682280654,"creation_date":1682280654,"answer_id":76087039,"question_id":76024349,"body_markdown":"Someone given me the answer to do either of the two ways:\r\n1. Maven clean and maven install\r\n2. Set optional properties in Application.properties file\r\nbut nothing worked and this issue frustated me and I left using this system for a week.\r\n\r\nToday, I again tried looking into this problem and somehow I thought of cheking path variable as this issue was not specific to project. So, I checked path variable and found that in System variables, &quot;spring.config.location&quot; is being set with Desktop location. I immediately deleted this variable and restarted the eclipse and it worked.\r\n\r\nHope this will help someone if they face the same issue.","title":"Application failed to start - org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter","body":"<p>Someone given me the answer to do either of the two ways:</p>\n<ol>\n<li>Maven clean and maven install</li>\n<li>Set optional properties in Application.properties file\nbut nothing worked and this issue frustated me and I left using this system for a week.</li>\n</ol>\n<p>Today, I again tried looking into this problem and somehow I thought of cheking path variable as this issue was not specific to project. So, I checked path variable and found that in System variables, &quot;spring.config.location&quot; is being set with Desktop location. I immediately deleted this variable and restarted the eclipse and it worked.</p>\n<p>Hope this will help someone if they face the same issue.</p>\n"}],"owner":{"account_id":11599086,"reputation":1,"user_id":8496863,"display_name":"Ashish Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":901,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682280654,"creation_date":1681586863,"question_id":76024349,"body_markdown":"I was using eclipse for Spring Boot Projects. All projects were working fine but don&#39;t know what happened, while running the applications I am getting below error. It is trying to find in Desktop Folder, instead of the resource folder. Instead previously created &amp; working projects are also not working.\r\nEven a project with single rest controller giving me the same error.\r\n\r\n[enter image description here](https://i.stack.imgur.com/OuYf2.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/Lonpr.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/ixQVo.png)\r\n\r\n**Pom.xml**\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.luv2code.springboot.demo&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mycoolapp&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;mycoolapp&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- ADD SUPPORT FOR AUTOMATIC RELOADING --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\n\r\n**Console:**\r\n\r\n00:25:43.687 [restartedMain] DEBUG org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - Application failed to start due to an exception\r\norg.springframework.boot.context.config.ConfigDataResourceNotFoundException: Config data resource &#39;file [C:\\Users\\kashi\\Desktop\\application.properties]&#39; via location &#39;C:/Users/kashi/Desktop/application.properties&#39; cannot be found\r\n\tat org.springframework.boot.context.config.ConfigDataResourceNotFoundException.withLocation(ConfigDataResourceNotFoundException.java:97)\r\n\tat org.springframework.boot.context.config.ConfigDataImporter.handle(ConfigDataImporter.java:145)\r\n\tat org.springframework.boot.context.config.ConfigDataImporter.load(ConfigDataImporter.java:136)\r\n\tat org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:86)\r\n\tat org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:115)\r\n\tat org.springframework.boot.context.config.ConfigDataEnvironment.processInitial(ConfigDataEnvironment.java:242)\r\n\tat org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:229)\r\n\tat org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:96)\r\n\tat org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:89)\r\n\tat org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)\r\n\tat org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:352)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)\r\n\tat com.luv2code.springboot.demo.mycoolapp.MycoolappApplication.main(MycoolappApplication.java:10)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\n00:25:43.707 [restartedMain] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nConfig data resource &#39;file [C:\\Users\\kashi\\Desktop\\application.properties]&#39; via location &#39;C:/Users/kashi/Desktop/application.properties&#39; does not exist\r\n\r\nAction:\r\n\r\nCheck that the value &#39;C:/Users/kashi/Desktop/application.properties&#39; is correct, or prefix it with &#39;optional:&#39;\r\n\r\n\r\n\r\nI have tried all the possible things which came into my mind like using a different workspace, removing dependencies from local maven repositories &amp; reinstalling the eclipse. Now, I am now not able to run any Spring Boot project in my system, so please help.","title":"Application failed to start - org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter","body":"<p>I was using eclipse for Spring Boot Projects. All projects were working fine but don't know what happened, while running the applications I am getting below error. It is trying to find in Desktop Folder, instead of the resource folder. Instead previously created &amp; working projects are also not working.\nEven a project with single rest controller giving me the same error.</p>\n<p><a href=\"https://i.stack.imgur.com/OuYf2.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/Lonpr.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/ixQVo.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><strong>Pom.xml</strong></p>\n\n<p>\n4.0.0\n\norg.springframework.boot\nspring-boot-starter-parent\n3.0.2\n \n\ncom.luv2code.springboot.demo\nmycoolapp\n0.0.1-SNAPSHOT\nmycoolapp\nDemo project for Spring Boot\n\n&lt;java.version&gt;17&lt;/java.version&gt;\n\n\n\norg.springframework.boot\nspring-boot-starter-web\n</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n    &lt;!-- ADD SUPPORT FOR AUTOMATIC RELOADING --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p><strong>Console:</strong></p>\n<p>00:25:43.687 [restartedMain] DEBUG org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - Application failed to start due to an exception\norg.springframework.boot.context.config.ConfigDataResourceNotFoundException: Config data resource 'file [C:\\Users\\kashi\\Desktop\\application.properties]' via location 'C:/Users/kashi/Desktop/application.properties' cannot be found\nat org.springframework.boot.context.config.ConfigDataResourceNotFoundException.withLocation(ConfigDataResourceNotFoundException.java:97)\nat org.springframework.boot.context.config.ConfigDataImporter.handle(ConfigDataImporter.java:145)\nat org.springframework.boot.context.config.ConfigDataImporter.load(ConfigDataImporter.java:136)\nat org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:86)\nat org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:115)\nat org.springframework.boot.context.config.ConfigDataEnvironment.processInitial(ConfigDataEnvironment.java:242)\nat org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:229)\nat org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:96)\nat org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:89)\nat org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)\nat org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\nat org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\nat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)\nat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)\nat java.base/java.lang.Iterable.forEach(Iterable.java:75)\nat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\nat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\nat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)\nat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:352)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)\nat com.luv2code.springboot.demo.mycoolapp.MycoolappApplication.main(MycoolappApplication.java:10)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\n00:25:43.707 [restartedMain] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter -</p>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>Config data resource 'file [C:\\Users\\kashi\\Desktop\\application.properties]' via location 'C:/Users/kashi/Desktop/application.properties' does not exist</p>\n<p>Action:</p>\n<p>Check that the value 'C:/Users/kashi/Desktop/application.properties' is correct, or prefix it with 'optional:'</p>\n<p>I have tried all the possible things which came into my mind like using a different workspace, removing dependencies from local maven repositories &amp; reinstalling the eclipse. Now, I am now not able to run any Spring Boot project in my system, so please help.</p>\n"},{"tags":["java","spring","spring-boot","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":25196103,"reputation":76,"user_id":19035609,"display_name":"Vladimir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677163713,"creation_date":1677163713,"answer_id":75546412,"question_id":75472488,"body_markdown":"What do you mean nothing happens? If the resource is protected and you aren&#39;t authenticated the redirect should happen to the login form of the IdP. If the resource is protected and you are authenticated then the IdP should redirect you back to your application seamlessly - this is to be expected for SSO, you should be able to see the flow in the network tab of your browser. If the resource isn&#39;t protected at all then your application should reject you by default (depending on your version of spring) or allow you to access it without consulting the IdP. ","title":"How do I use SSO in my Spring Security Application","body":"<p>What do you mean nothing happens? If the resource is protected and you aren't authenticated the redirect should happen to the login form of the IdP. If the resource is protected and you are authenticated then the IdP should redirect you back to your application seamlessly - this is to be expected for SSO, you should be able to see the flow in the network tab of your browser. If the resource isn't protected at all then your application should reject you by default (depending on your version of spring) or allow you to access it without consulting the IdP.</p>\n"}],"owner":{"account_id":27555288,"reputation":11,"user_id":21029624,"display_name":"BonBonn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1682280620,"creation_date":1676551531,"question_id":75472488,"body_markdown":"```\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests(authorizeRequests -&gt; authorizeRequests\r\n//                        .requestMatchers(PathRequest.toStaticResources().atCommonLocations()).permitAll()\r\n                        .antMatchers(&quot;/&quot;, &quot;/node_modules/**&quot;).permitAll()\r\n                        .anyRequest().authenticated())\r\n                .oauth2Login()\r\n\r\n    }\r\n}\r\n```\r\n\r\nWith this code I can log in via oauth2 and a third party IDP. How can I get the application to check the IDP for a session on every request and then use it (SSO)?\r\n\r\nI tried following:\r\n\r\n```\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests(authorizeRequests -&gt; authorizeRequests\r\n//                        .requestMatchers(PathRequest.toStaticResources().atCommonLocations()).permitAll()\r\n                        .antMatchers(&quot;/&quot;, &quot;/node_modules/**&quot;).permitAll()\r\n                        .anyRequest().authenticated())\r\n                .oauth2Login()\r\n                .userInfoEndpoint()\r\n                .userService(oauth2UserService());\r\n    }\r\n\r\n    private OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; oauth2UserService() {\r\n        DefaultOAuth2UserService delegate = new DefaultOAuth2UserService();\r\n        return userRequest -&gt; {\r\n            OAuth2User oAuth2User = delegate.loadUser(userRequest);\r\n            // You can customize the OAuth2User object here, if needed\r\n            return oAuth2User;\r\n        };\r\n    }\r\n}\r\n```\r\n\r\nI expected a redirect to the IDP to happen when the page is opened and then logs me in automatically. However, nothing happens.","title":"How do I use SSO in my Spring Security Application","body":"<pre><code>@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests(authorizeRequests -&gt; authorizeRequests\n//                        .requestMatchers(PathRequest.toStaticResources().atCommonLocations()).permitAll()\n                        .antMatchers(&quot;/&quot;, &quot;/node_modules/**&quot;).permitAll()\n                        .anyRequest().authenticated())\n                .oauth2Login()\n\n    }\n}\n</code></pre>\n<p>With this code I can log in via oauth2 and a third party IDP. How can I get the application to check the IDP for a session on every request and then use it (SSO)?</p>\n<p>I tried following:</p>\n<pre><code>@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests(authorizeRequests -&gt; authorizeRequests\n//                        .requestMatchers(PathRequest.toStaticResources().atCommonLocations()).permitAll()\n                        .antMatchers(&quot;/&quot;, &quot;/node_modules/**&quot;).permitAll()\n                        .anyRequest().authenticated())\n                .oauth2Login()\n                .userInfoEndpoint()\n                .userService(oauth2UserService());\n    }\n\n    private OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; oauth2UserService() {\n        DefaultOAuth2UserService delegate = new DefaultOAuth2UserService();\n        return userRequest -&gt; {\n            OAuth2User oAuth2User = delegate.loadUser(userRequest);\n            // You can customize the OAuth2User object here, if needed\n            return oAuth2User;\n        };\n    }\n}\n</code></pre>\n<p>I expected a redirect to the IDP to happen when the page is opened and then logs me in automatically. However, nothing happens.</p>\n"},{"tags":["java","java-stream","time-complexity","big-o","collectors"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1682279587,"post_id":76086859,"comment_id":134186494,"body_markdown":"Yes. It is impossible to add the elements to a list without iterating them.","body":"Yes. It is impossible to add the elements to a list without iterating them."},{"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"score":1,"creation_date":1682280632,"post_id":76086859,"comment_id":134186635,"body_markdown":"This question is a bit ambiguous. The stream itself could be `sorted()`, in which case collecting (which involves consuming the stream) would be O(n log n) because non-terminal stream operations like `sorted()` are lazy, so the actual sorting would happen when the `collect()` method is invoked. But if you define the sorting as a separate operation that takes O(n log n) time, and only count the time complexity of actually creating and populating the list, then it&#39;s O(n).","body":"This question is a bit ambiguous. The stream itself could be <code>sorted()</code>, in which case collecting (which involves consuming the stream) would be O(n log n) because non-terminal stream operations like <code>sorted()</code> are lazy, so the actual sorting would happen when the <code>collect()</code> method is invoked. But if you define the sorting as a separate operation that takes O(n log n) time, and only count the time complexity of actually creating and populating the list, then it&#39;s O(n)."},{"owner":{"account_id":22202138,"reputation":55,"user_id":16442653,"display_name":"Matt Styles"},"score":0,"creation_date":1682324792,"post_id":76086859,"comment_id":134191338,"body_markdown":"Thanks. To make it less ambiguous, the context is that I have some code that runs on every write and collects the stream, so I thought it might be costly","body":"Thanks. To make it less ambiguous, the context is that I have some code that runs on every write and collects the stream, so I thought it might be costly"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1682332217,"post_id":76086859,"comment_id":134192968,"body_markdown":"Collecting into a list can never be better than O(n), however, processing a stream doesn’t mean “iterating over a stream”, as a stream doesn’t store the elements. Processing the stream implies “iterating over the source” and depends on the source. Typically, sources can be iterated in O(n), which makes the overall time complexity O(n). But to name a counter example, `Stream.iterate(BigInteger.ONE, condition, bi -&gt; bi.add(BigInteger.ONE))` is not O(n) (for an arbitrary condition).","body":"Collecting into a list can never be better than O(n), however, processing a stream doesn’t mean “iterating over a stream”, as a stream doesn’t store the elements. Processing the stream implies “iterating over the source” and depends on the source. Typically, sources can be iterated in O(n), which makes the overall time complexity O(n). But to name a counter example, <code>Stream.iterate(BigInteger.ONE, condition, bi -&gt; bi.add(BigInteger.ONE))</code> is not O(n) (for an arbitrary condition)."}],"answers":[{"tags":[],"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682280405,"creation_date":1682280405,"answer_id":76087016,"question_id":76086859,"body_markdown":"&gt; What is the time complexity of collecting a stream in Java, with no\r\n&gt; intermediate operations?\r\n\r\nIn Java, if you are collecting a `stream` without no intermediate operations, the `stream` is traversed once to create the final `collection`. The time complexity of collecting a `stream` in such case is `O(n)`, where `n` represents the size of the stream.\r\n\r\n&gt; I&#39;m trying to find out if simply collecting a stream into a list, set\r\n&gt; etc. actually iterates over the stream. I expect it does in O(n) time.\r\n\r\nIt is correct to say that when you are collecting a `stream` into a `list`, `set`, or `any other collections` in Java, it is necessary to iterate over the `stream` once to create the final `collection`. It means that the time complexity of the operation is `O(n)`, where `n` represents the size of the `stream`. The reason is that each element in the `stream` must be processed once to add it to the final `collection`.","title":"What is the time complexity of collecting a stream in Java, with no intermediate operations?","body":"<blockquote>\n<p>What is the time complexity of collecting a stream in Java, with no\nintermediate operations?</p>\n</blockquote>\n<p>In Java, if you are collecting a <code>stream</code> without no intermediate operations, the <code>stream</code> is traversed once to create the final <code>collection</code>. The time complexity of collecting a <code>stream</code> in such case is <code>O(n)</code>, where <code>n</code> represents the size of the stream.</p>\n<blockquote>\n<p>I'm trying to find out if simply collecting a stream into a list, set\netc. actually iterates over the stream. I expect it does in O(n) time.</p>\n</blockquote>\n<p>It is correct to say that when you are collecting a <code>stream</code> into a <code>list</code>, <code>set</code>, or <code>any other collections</code> in Java, it is necessary to iterate over the <code>stream</code> once to create the final <code>collection</code>. It means that the time complexity of the operation is <code>O(n)</code>, where <code>n</code> represents the size of the <code>stream</code>. The reason is that each element in the <code>stream</code> must be processed once to add it to the final <code>collection</code>.</p>\n"},{"tags":[],"owner":{"account_id":1868660,"reputation":99,"user_id":8143123,"display_name":"pflakus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682280520,"creation_date":1682280520,"answer_id":76087027,"question_id":76086859,"body_markdown":"To quote from the documentation of Java&#39;s [`Collector`][1]:\r\n\r\n&gt; A sequential implementation of a reduction using a collector would create a single result container using the supplier function, and invoke the accumulator function once for each input element. A parallel implementation would partition the input, create a result container for each partition, accumulate the contents of each partition into a subresult for that partition, and then use the combiner function to merge the subresults into a combined result.\r\n\r\nSo for the trivial, sequential case you would see exactly what you&#39;d expect: the `Collector` generating a result container, iterating over the elements from the stream and calling the accumulator()-function on it (e.g. `ArrayList::add`). This would turn out to be O(n)-complexity.\r\n\r\nFor the parallel case the complexity would be complicated by the need to run the `combiner()`-method to merge intermediate results. (I don&#39;t know how to calculate the time complexity for that off the top of my head, tbqh.)\r\n\r\n[1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collector.html","title":"What is the time complexity of collecting a stream in Java, with no intermediate operations?","body":"<p>To quote from the documentation of Java's <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collector.html\" rel=\"nofollow noreferrer\"><code>Collector</code></a>:</p>\n<blockquote>\n<p>A sequential implementation of a reduction using a collector would create a single result container using the supplier function, and invoke the accumulator function once for each input element. A parallel implementation would partition the input, create a result container for each partition, accumulate the contents of each partition into a subresult for that partition, and then use the combiner function to merge the subresults into a combined result.</p>\n</blockquote>\n<p>So for the trivial, sequential case you would see exactly what you'd expect: the <code>Collector</code> generating a result container, iterating over the elements from the stream and calling the accumulator()-function on it (e.g. <code>ArrayList::add</code>). This would turn out to be O(n)-complexity.</p>\n<p>For the parallel case the complexity would be complicated by the need to run the <code>combiner()</code>-method to merge intermediate results. (I don't know how to calculate the time complexity for that off the top of my head, tbqh.)</p>\n"}],"owner":{"account_id":22202138,"reputation":55,"user_id":16442653,"display_name":"Matt Styles"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":2,"score":-2,"last_activity_date":1682280520,"creation_date":1682278275,"question_id":76086859,"body_markdown":"I&#39;m trying to find out if simply collecting a stream into a list, set etc. actually iterates over the stream. I expect it does in O(n) time.","title":"What is the time complexity of collecting a stream in Java, with no intermediate operations?","body":"<p>I'm trying to find out if simply collecting a stream into a list, set etc. actually iterates over the stream. I expect it does in O(n) time.</p>\n"},{"tags":["java","spring-boot","spring-ws","spring-oauth2"],"answers":[{"tags":[],"owner":{"account_id":4262786,"reputation":163,"user_id":3486717,"display_name":"Dhiren"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676131397,"creation_date":1676131397,"answer_id":75421456,"question_id":75386966,"body_markdown":"you can get current request token using `RequestContextHolder` class and add into soap request header.\r\n\r\n    String token = ((ServletRequestAttributes)(RequestContextHolder.getRequestAttributes())).getRequest().getHeader(&quot;Authorization&quot;);\r\n\r\nAlso I would suggest use Webservice interecptor instead of adding header in each web service request call.","title":"How to use spring.security.oauth2.client with SOAP calls, initially sent by org.springframework.ws.client.core.WebServiceTemplate?","body":"<p>you can get current request token using <code>RequestContextHolder</code> class and add into soap request header.</p>\n<pre><code>String token = ((ServletRequestAttributes)(RequestContextHolder.getRequestAttributes())).getRequest().getHeader(&quot;Authorization&quot;);\n</code></pre>\n<p>Also I would suggest use Webservice interecptor instead of adding header in each web service request call.</p>\n"},{"tags":[],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676466815,"creation_date":1676465661,"answer_id":75460108,"question_id":75386966,"body_markdown":"The problem was caused by\r\n\r\n1. Existing library code, based on `org.springframework.ws.client.core.WebServiceTemplate`, so large and huge for rewriting it using `WebClient`, compatible with OAuth2 SpringSecurity or use depricated `OAuth2RestTemplate`\r\n\r\n2. The webservice we previously communicated with, turns into protected with `Gravitee` and accepts queries with JWT tokens only. So, the only change here is to add the `Authentication` header with `&#39;Bearer ....token there...&#39;`\r\n\r\n3. We initiate the call from the scheduled jo in the microservice. So, it should be getting token from the `Keycloak` before the request and be able to update it with time. No one does the explicit authorization like in the frontend, so the OAuth2 client should use `client-id` and `client-secret` to connect with no human involved \r\n\r\nThe Solution\r\n------------\r\n\r\n1. At the beginning, we define the Interceptor to the SOAP calls, that will pass the token as a header, via a Supplier&lt;String&gt; function taking it wherever it can be taken:\r\n\r\n        public class JwtClientInterceptor implements ClientInterceptor {\r\n    \r\n        private final Supplier&lt;String&gt; jwtToken;\r\n    \r\n        public JwtClientInterceptor(Supplier&lt;String&gt; jwtToken) {\r\n            this.jwtToken = jwtToken;\r\n        }\r\n    \r\n        @Override\r\n        public boolean handleRequest(MessageContext messageContext) {\r\n            SoapMessage soapMessage = (SoapMessage) messageContext. getRequest();\r\n            SoapHeader soapHeader = soapMessage.getSoapHeader();\r\n            soapHeader.addHeaderElement(new QName(&quot;authorization&quot;))\r\n                    .setText(String. format(&quot;Bearer %s&quot;, jwtToken.get()));\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean handleResponse(MessageContext messageContext) throws WebServiceClientException {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean handleFault(MessageContext messageContext) throws WebServiceClientException {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public void afterCompletion(MessageContext messageContext, Exception ex) throws WebServiceClientException {\r\n    \r\n        }\r\n    }\r\n\r\n2. Then pass it to the template in addition to other pre-existed interceptor to be called in config class:\r\n\r\n        protected WebServiceTemplate     buildWebServiceTemplate(Jaxb2Marshaller marshaller,\r\n                                                                 HttpComponentsMessageSender messageSender, String uri,     Supplier&lt;String&gt; jwtToken) {\r\n            WebServiceTemplate template = new WebServiceTemplate();\r\n            template.setMarshaller(marshaller);\r\n            template.setUnmarshaller(marshaller);\r\n            template.setMessageSender(messageSender);\r\n            template.setDefaultUri(uri);\r\n            ClientInterceptor[] clientInterceptors =     ArrayUtils.addAll(template.getInterceptors(), new Logger(), new     JwtClientInterceptor(jwtToken));\r\n    \r\n            template.setInterceptors(clientInterceptors);\r\n            return template;\r\n        }\r\n\r\n\r\n3. Then add the Spring Security Oath2 Client library\r\n\r\n        compile &#39;org.springframework.security:spring-security-oauth2-client:5.2.1.RELEASE&#39;\r\n\r\n4. We create `OAuth2AuthorizedClientService` bean, that uses a standard `ClientRegistrationRepository` (the repository is initiated through usage of `@EnableWebSecurity` annotation on the `@Configuration` class, but please double check about that)\r\n\r\n        @Bean\r\n        public OAuth2AuthorizedClientService     oAuth2AuthorizedClientService(ClientRegistrationRepository     clientRegistrationRepository) {\r\n                return  new     InMemoryOAuth2AuthorizedClientService(clientRegistrationRepository);\r\n           }\r\n\r\n5. Then create a OAuth2AuthorizedClientManager \r\n\r\n            @Bean\r\n            public OAuth2AuthorizedClientManager authorizedClientManager(\r\n                    ClientRegistrationRepository clientRegistrationRepository,\r\n                    OAuth2AuthorizedClientRepository authorizedClientRepository) {\r\n    \r\n                Authentication authentication = new Authentication()     {\r\n                    @Override\r\n                    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n                        GrantedAuthority grantedAuthority = new GrantedAuthority() {\r\n                            @Override\r\n                            public String getAuthority() {\r\n                                return &quot;take_a_needed_value_from_property&quot;;\r\n                            }\r\n                        };\r\n                        return Arrays.asList(grantedAuthority);\r\n                    }\r\n        \r\n                    @Override\r\n                    public Object getCredentials() {\r\n                        return null;\r\n                    }\r\n        \r\n                    @Override\r\n                    public Object getDetails() {\r\n                        return null;\r\n                    }\r\n        \r\n                    @Override\r\n                    public Object getPrincipal() {\r\n                        return new Principal() {\r\n                            @Override\r\n                            public String getName() {\r\n                                return &quot;our_client_id_from_properties&quot;;\r\n                        }\r\n                    };\r\n                }\r\n    \r\n                @Override\r\n                public boolean isAuthenticated() {\r\n                    return true;\r\n                }\r\n    \r\n                @Override\r\n                public void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public String getName() {\r\n                    return &quot;take_a_needed_name_from_properties&quot;;\r\n                }\r\n            };\r\n        //we need to emulate Principal there, as other classes relies on it. In fact, Principal isn&#39;t needed for the app which is a client and just do the call, as nothing is authorized in the app against this Principal itself\r\n        \r\n                OAuth2AuthorizationContext oAuth2AuthorizationContext     =     OAuth2AuthorizationContext.withClientRegistration(clientRegistrationRepository.findByRegistrationId(&quot;keycloak&quot;)).\r\n                        principal(authentication).\r\n                        build();\r\n                    oAuth2AuthorizationContext.getPrincipal().setAuthenticated(true);\r\n                oAuth2AuthorizationContext.getAuthorizedClient();\r\n        \r\n                OAuth2AuthorizedClientProvider authorizedClientProvider =     OAuth2AuthorizedClientProviderBuilder.builder().\r\n                //refreshToken().\r\n                clientCredentials(). //- we use this one according to our set up\r\n                //authorizationCode().\r\n                        build();\r\n    \r\n                OAuth2AuthorizedClientService oAuth2AuthorizedClientService =     oAuth2AuthorizedClientService(clientRegistrationRepository); //use the bean from before step here\r\n        \r\n                AuthorizedClientServiceOAuth2AuthorizedClientManager authorizedClientManager =\r\n                        new AuthorizedClientServiceOAuth2AuthorizedClientManager(\r\n                                clientRegistrationRepository,     oAuth2AuthorizedClientService);\r\n                OAuth2AuthorizedClient oAuth2AuthorizedClient =     authorizedClientProvider.authorize(oAuth2AuthorizationContext);\r\n                    authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n              oAuth2AuthorizedClientService.saveAuthorizedClient(oAuth2AuthorizedClient, \r\n          oAuth2AuthorizationContext.getPrincipal());\r\n          //this step is needed, as without explicit authorize call, the \r\n          //oAuth2AuthorizedClient isn&#39;t initialized in the service\r\n                \r\n                return authorizedClientManager;\r\n            }\r\n\r\n6. Provide a method for supplied function that can be called each time to retrieve the JWT token from the security stuff (repository and manager). Here it should be auto-updated, so we just call for retrieving it\r\n\r\n         public Supplier&lt;String&gt; getJwtToken() {\r\n                return () -&gt; {\r\n                    OAuth2AuthorizedClient authorizedClient = authorizedClientService.loadAuthorizedClient(&quot;keycloak&quot;, &quot;we_havePout_realm_there_from_the_properties&quot;);\r\n                    return     authorizedClient.getAccessToken().getTokenValue();\r\n                };\r\n            }\r\n\r\n7. Pass this `Consumer` to the `@Bean`, defining the `WebServiceTemplate`&#39;s\r\n\r\n \r\n         @Bean\r\n            public Client client(@Qualifier(&quot;Sender1&quot;) HttpComponentsMessageSender bnfoMessageSender,\r\n                                 @Qualifier(&quot;Sender2&quot;)     HttpComponentsMessageSender uhMessageSender) {\r\n                WebServiceTemplate sender1= buildWebServiceTemplate(buildSender1Marshaller(),     sender1MessageSender, properties.getUriSender1(),getJwtToken());\r\n                WebServiceTemplate sender2 = buildWebServiceTemplate(buildSender2Marshaller(), sender2MessageSender, properties.getUriSender2(),getJwtToken());\r\n                return buildClient(buildRetryTemplate(), sender1, sender2);\r\n            }\r\n\r\n8. We add Spring Security Client values to `application.yaml` in order to configure it.\r\n\r\n        spring:\r\n         security:\r\n            oauth2:\r\n              client:\r\n                provider:\r\n                  keycloak:\r\n                    issuer-uri: https://host/keycloak/auth/realms/ourrealm\r\n                registration:\r\n                  keycloak:\r\n                    client-id: client_id\r\n                    client-secret: client-secret-here\r\n                    authorization-grant-type: client_credentials     //need to add explicitly, otherwise would try other grant-type by default and never get the token!\r\n                    client-authentication-method: post //need to have this explicitly, otherwise use basic that doesn&#39;t fit best the keycloak set up\r\n                    scope: openid //if your don&#39;t have it, it checks all available scopes on url like https://host/keycloak/auth/realms/ourrealm/ .well-known/openid-configuration keycloak and then sends them as value of parameter named &#39;scope&#39; in the query for retrieving the token; that works wrong on our keycloak, so to replace this auto-picked value, we place the explicit scopes list here\r\n\r\n","title":"How to use spring.security.oauth2.client with SOAP calls, initially sent by org.springframework.ws.client.core.WebServiceTemplate?","body":"<p>The problem was caused by</p>\n<ol>\n<li><p>Existing library code, based on <code>org.springframework.ws.client.core.WebServiceTemplate</code>, so large and huge for rewriting it using <code>WebClient</code>, compatible with OAuth2 SpringSecurity or use depricated <code>OAuth2RestTemplate</code></p>\n</li>\n<li><p>The webservice we previously communicated with, turns into protected with <code>Gravitee</code> and accepts queries with JWT tokens only. So, the only change here is to add the <code>Authentication</code> header with <code>'Bearer ....token there...'</code></p>\n</li>\n<li><p>We initiate the call from the scheduled jo in the microservice. So, it should be getting token from the <code>Keycloak</code> before the request and be able to update it with time. No one does the explicit authorization like in the frontend, so the OAuth2 client should use <code>client-id</code> and <code>client-secret</code> to connect with no human involved</p>\n</li>\n</ol>\n<h2>The Solution</h2>\n<ol>\n<li><p>At the beginning, we define the Interceptor to the SOAP calls, that will pass the token as a header, via a Supplier function taking it wherever it can be taken:</p>\n<pre><code> public class JwtClientInterceptor implements ClientInterceptor {\n\n private final Supplier&lt;String&gt; jwtToken;\n\n public JwtClientInterceptor(Supplier&lt;String&gt; jwtToken) {\n     this.jwtToken = jwtToken;\n }\n\n @Override\n public boolean handleRequest(MessageContext messageContext) {\n     SoapMessage soapMessage = (SoapMessage) messageContext. getRequest();\n     SoapHeader soapHeader = soapMessage.getSoapHeader();\n     soapHeader.addHeaderElement(new QName(&quot;authorization&quot;))\n             .setText(String. format(&quot;Bearer %s&quot;, jwtToken.get()));\n     return true;\n }\n\n @Override\n public boolean handleResponse(MessageContext messageContext) throws WebServiceClientException {\n     return true;\n }\n\n @Override\n public boolean handleFault(MessageContext messageContext) throws WebServiceClientException {\n     return true;\n }\n\n @Override\n public void afterCompletion(MessageContext messageContext, Exception ex) throws WebServiceClientException {\n\n }\n</code></pre>\n<p>}</p>\n</li>\n<li><p>Then pass it to the template in addition to other pre-existed interceptor to be called in config class:</p>\n<pre><code> protected WebServiceTemplate     buildWebServiceTemplate(Jaxb2Marshaller marshaller,\n                                                          HttpComponentsMessageSender messageSender, String uri,     Supplier&lt;String&gt; jwtToken) {\n     WebServiceTemplate template = new WebServiceTemplate();\n     template.setMarshaller(marshaller);\n     template.setUnmarshaller(marshaller);\n     template.setMessageSender(messageSender);\n     template.setDefaultUri(uri);\n     ClientInterceptor[] clientInterceptors =     ArrayUtils.addAll(template.getInterceptors(), new Logger(), new     JwtClientInterceptor(jwtToken));\n\n     template.setInterceptors(clientInterceptors);\n     return template;\n }\n</code></pre>\n</li>\n<li><p>Then add the Spring Security Oath2 Client library</p>\n<pre><code> compile 'org.springframework.security:spring-security-oauth2-client:5.2.1.RELEASE'\n</code></pre>\n</li>\n<li><p>We create <code>OAuth2AuthorizedClientService</code> bean, that uses a standard <code>ClientRegistrationRepository</code> (the repository is initiated through usage of <code>@EnableWebSecurity</code> annotation on the <code>@Configuration</code> class, but please double check about that)</p>\n<pre><code> @Bean\n public OAuth2AuthorizedClientService     oAuth2AuthorizedClientService(ClientRegistrationRepository     clientRegistrationRepository) {\n         return  new     InMemoryOAuth2AuthorizedClientService(clientRegistrationRepository);\n    }\n</code></pre>\n</li>\n<li><p>Then create a OAuth2AuthorizedClientManager</p>\n<pre><code>     @Bean\n     public OAuth2AuthorizedClientManager authorizedClientManager(\n             ClientRegistrationRepository clientRegistrationRepository,\n             OAuth2AuthorizedClientRepository authorizedClientRepository) {\n\n         Authentication authentication = new Authentication()     {\n             @Override\n             public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n                 GrantedAuthority grantedAuthority = new GrantedAuthority() {\n                     @Override\n                     public String getAuthority() {\n                         return &quot;take_a_needed_value_from_property&quot;;\n                     }\n                 };\n                 return Arrays.asList(grantedAuthority);\n             }\n\n             @Override\n             public Object getCredentials() {\n                 return null;\n             }\n\n             @Override\n             public Object getDetails() {\n                 return null;\n             }\n\n             @Override\n             public Object getPrincipal() {\n                 return new Principal() {\n                     @Override\n                     public String getName() {\n                         return &quot;our_client_id_from_properties&quot;;\n                 }\n             };\n         }\n\n         @Override\n         public boolean isAuthenticated() {\n             return true;\n         }\n\n         @Override\n         public void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException {\n\n         }\n\n         @Override\n         public String getName() {\n             return &quot;take_a_needed_name_from_properties&quot;;\n         }\n     };\n //we need to emulate Principal there, as other classes relies on it. In fact, Principal isn't needed for the app which is a client and just do the call, as nothing is authorized in the app against this Principal itself\n\n         OAuth2AuthorizationContext oAuth2AuthorizationContext     =     OAuth2AuthorizationContext.withClientRegistration(clientRegistrationRepository.findByRegistrationId(&quot;keycloak&quot;)).\n                 principal(authentication).\n                 build();\n             oAuth2AuthorizationContext.getPrincipal().setAuthenticated(true);\n         oAuth2AuthorizationContext.getAuthorizedClient();\n\n         OAuth2AuthorizedClientProvider authorizedClientProvider =     OAuth2AuthorizedClientProviderBuilder.builder().\n         //refreshToken().\n         clientCredentials(). //- we use this one according to our set up\n         //authorizationCode().\n                 build();\n\n         OAuth2AuthorizedClientService oAuth2AuthorizedClientService =     oAuth2AuthorizedClientService(clientRegistrationRepository); //use the bean from before step here\n\n         AuthorizedClientServiceOAuth2AuthorizedClientManager authorizedClientManager =\n                 new AuthorizedClientServiceOAuth2AuthorizedClientManager(\n                         clientRegistrationRepository,     oAuth2AuthorizedClientService);\n         OAuth2AuthorizedClient oAuth2AuthorizedClient =     authorizedClientProvider.authorize(oAuth2AuthorizationContext);\n             authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n       oAuth2AuthorizedClientService.saveAuthorizedClient(oAuth2AuthorizedClient, \n   oAuth2AuthorizationContext.getPrincipal());\n   //this step is needed, as without explicit authorize call, the \n   //oAuth2AuthorizedClient isn't initialized in the service\n\n         return authorizedClientManager;\n     }\n</code></pre>\n</li>\n<li><p>Provide a method for supplied function that can be called each time to retrieve the JWT token from the security stuff (repository and manager). Here it should be auto-updated, so we just call for retrieving it</p>\n<pre><code>  public Supplier&lt;String&gt; getJwtToken() {\n         return () -&gt; {\n             OAuth2AuthorizedClient authorizedClient = authorizedClientService.loadAuthorizedClient(&quot;keycloak&quot;, &quot;we_havePout_realm_there_from_the_properties&quot;);\n             return     authorizedClient.getAccessToken().getTokenValue();\n         };\n     }\n</code></pre>\n</li>\n<li><p>Pass this <code>Consumer</code> to the <code>@Bean</code>, defining the <code>WebServiceTemplate</code>'s</p>\n<pre><code>  @Bean\n     public Client client(@Qualifier(&quot;Sender1&quot;) HttpComponentsMessageSender bnfoMessageSender,\n                          @Qualifier(&quot;Sender2&quot;)     HttpComponentsMessageSender uhMessageSender) {\n         WebServiceTemplate sender1= buildWebServiceTemplate(buildSender1Marshaller(),     sender1MessageSender, properties.getUriSender1(),getJwtToken());\n         WebServiceTemplate sender2 = buildWebServiceTemplate(buildSender2Marshaller(), sender2MessageSender, properties.getUriSender2(),getJwtToken());\n         return buildClient(buildRetryTemplate(), sender1, sender2);\n     }\n</code></pre>\n</li>\n<li><p>We add Spring Security Client values to <code>application.yaml</code> in order to configure it.</p>\n<pre><code> spring:\n  security:\n     oauth2:\n       client:\n         provider:\n           keycloak:\n             issuer-uri: https://host/keycloak/auth/realms/ourrealm\n         registration:\n           keycloak:\n             client-id: client_id\n             client-secret: client-secret-here\n             authorization-grant-type: client_credentials     //need to add explicitly, otherwise would try other grant-type by default and never get the token!\n             client-authentication-method: post //need to have this explicitly, otherwise use basic that doesn't fit best the keycloak set up\n             scope: openid //if your don't have it, it checks all available scopes on url like https://host/keycloak/auth/realms/ourrealm/ .well-known/openid-configuration keycloak and then sends them as value of parameter named 'scope' in the query for retrieving the token; that works wrong on our keycloak, so to replace this auto-picked value, we place the explicit scopes list here\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1298,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75460108,"answer_count":2,"score":0,"last_activity_date":1682280433,"creation_date":1675865340,"question_id":75386966,"body_markdown":"We have a Spring Boot microservice that does the SOAP call to the external system using `org.springframework.ws.client.core.WebServiceTemplate`.\r\n\r\nNow the system would be protected with `Keycloak`, so all the request need to beak the auth token.\r\n\r\nIf it was a REST API, I would just replace the pre-existed `RestTemplate` with `OAuth2RestTemplate`. But how to instrument the calls initially done by the `org.springframework.ws.client.core.WebServiceTemplate` ?\r\n\r\nSo, I understand, I should put the `authentication` header manually with value `&#39;Bearer ....token there...&#39;`. How I can retrieve that part manually to put it into the request?","title":"How to use spring.security.oauth2.client with SOAP calls, initially sent by org.springframework.ws.client.core.WebServiceTemplate?","body":"<p>We have a Spring Boot microservice that does the SOAP call to the external system using <code>org.springframework.ws.client.core.WebServiceTemplate</code>.</p>\n<p>Now the system would be protected with <code>Keycloak</code>, so all the request need to beak the auth token.</p>\n<p>If it was a REST API, I would just replace the pre-existed <code>RestTemplate</code> with <code>OAuth2RestTemplate</code>. But how to instrument the calls initially done by the <code>org.springframework.ws.client.core.WebServiceTemplate</code> ?</p>\n<p>So, I understand, I should put the <code>authentication</code> header manually with value <code>'Bearer ....token there...'</code>. How I can retrieve that part manually to put it into the request?</p>\n"},{"tags":["java","spring-boot","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1675957348,"creation_date":1675855277,"answer_id":75385041,"question_id":75384815,"body_markdown":"## Keep the Default `JwtDecoder` \r\nYou are using boot. **Don&#39;t override `JwtDecoder`** for just validating `issuer` and `audience`. Define boot properties instead.\r\n```yaml\r\nspring:\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          audiences:\r\n          - http://localhost:8087\r\n          issuer-uri: http://localhost:8080/realms/samplerealm\r\n```\r\nThere are a few good reasons for that: \r\n- if spring team figures out that the implementation to use should be switched or that some configuration should be added, (for performance, security or whatever reason) you won&#39;t benefit it by just bumping versions.\r\n- configuration will be easier to read and understand (like: &quot;nothing special regarding JWT decoder, just the standard recommended stuff&quot;) \r\n- if you define a new bean you should unit-test it. Are you sure you master enough  the specs of what a JWT decoder should do for that?\r\n\r\n## UI Client V.S. Resource-Server\r\n\r\nAs a reminder, clients consume resources when resource-servers serve it.\r\n\r\nHere I make a distinction between &quot;UI&quot; (or BFF like `spring-cloud-gateway` configured as OAuth2 client) and &quot;REST&quot; clients. the first serve what users see and trigger login and logout on the authization-server. REST clients might be used as well on &quot;UI&quot; clients and resource-server to consume a resource from a resource-server. Some specific security filter-chain config is required for the first (UI) but not for the second (REST client) which usually either use the access-token already in the security context to issue a request on behalf of the user or acquires a new access-token (with client credentials) to issue a request in its own name. \r\n\r\nSecurity concerns are different enough for spring to provide WIth different libs. For instance, resource-server can frequently be stateless (no session, the state is associated to the token) when UI clients generally need a session for the user. \r\n\r\n**Don&#39;t mix UI client and resource-server config in the same security filter-chain**.\r\nIf you need the two in the same application, create separate filter chains with order and `securityMatcher` for the first to intercept only the routes it should and let the second act as fallback. More details on that subject in &quot;[Use Keycloak Spring Adapter with Spring Boot 3][1]&quot; \r\n\r\nHere you seem to have only REST endpoints =&gt; remove client configuration from your security filter-chain (`.oauth2Client()` and also be sure you don&#39;t have `oauth2Login` which is a client concern).\r\n\r\n## Be Lean\r\n**Unless you use a REST client** autoconfigured by spring-boot (`WebClient`, `@FeignClient`, `RestTemplate`, ...) to fetch resources from another micro-service, also remove `spring.security.oauth2.resource.client` properties and `spring-boot-starter-oauth2-client`.\r\n\r\nRemoving useless dependencies, properties and Java configuration will make your project easier to maintain, easier to debug, have a smaller footprint on the hardware and easier to grasp for new developers. \r\n\r\n### Tutorials for Various OAuth2 Use-Cases\r\nOn this repo of mine: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732","title":"Spring Boot application always redirect to login despite request having valid access token","body":"<h2>Keep the Default <code>JwtDecoder</code></h2>\n<p>You are using boot. <strong>Don't override <code>JwtDecoder</code></strong> for just validating <code>issuer</code> and <code>audience</code>. Define boot properties instead.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          audiences:\n          - http://localhost:8087\n          issuer-uri: http://localhost:8080/realms/samplerealm\n</code></pre>\n<p>There are a few good reasons for that:</p>\n<ul>\n<li>if spring team figures out that the implementation to use should be switched or that some configuration should be added, (for performance, security or whatever reason) you won't benefit it by just bumping versions.</li>\n<li>configuration will be easier to read and understand (like: &quot;nothing special regarding JWT decoder, just the standard recommended stuff&quot;)</li>\n<li>if you define a new bean you should unit-test it. Are you sure you master enough  the specs of what a JWT decoder should do for that?</li>\n</ul>\n<h2>UI Client V.S. Resource-Server</h2>\n<p>As a reminder, clients consume resources when resource-servers serve it.</p>\n<p>Here I make a distinction between &quot;UI&quot; (or BFF like <code>spring-cloud-gateway</code> configured as OAuth2 client) and &quot;REST&quot; clients. the first serve what users see and trigger login and logout on the authization-server. REST clients might be used as well on &quot;UI&quot; clients and resource-server to consume a resource from a resource-server. Some specific security filter-chain config is required for the first (UI) but not for the second (REST client) which usually either use the access-token already in the security context to issue a request on behalf of the user or acquires a new access-token (with client credentials) to issue a request in its own name.</p>\n<p>Security concerns are different enough for spring to provide WIth different libs. For instance, resource-server can frequently be stateless (no session, the state is associated to the token) when UI clients generally need a session for the user.</p>\n<p><strong>Don't mix UI client and resource-server config in the same security filter-chain</strong>.\nIf you need the two in the same application, create separate filter chains with order and <code>securityMatcher</code> for the first to intercept only the routes it should and let the second act as fallback. More details on that subject in &quot;<a href=\"https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732\">Use Keycloak Spring Adapter with Spring Boot 3</a>&quot;</p>\n<p>Here you seem to have only REST endpoints =&gt; remove client configuration from your security filter-chain (<code>.oauth2Client()</code> and also be sure you don't have <code>oauth2Login</code> which is a client concern).</p>\n<h2>Be Lean</h2>\n<p><strong>Unless you use a REST client</strong> autoconfigured by spring-boot (<code>WebClient</code>, <code>@FeignClient</code>, <code>RestTemplate</code>, ...) to fetch resources from another micro-service, also remove <code>spring.security.oauth2.resource.client</code> properties and <code>spring-boot-starter-oauth2-client</code>.</p>\n<p>Removing useless dependencies, properties and Java configuration will make your project easier to maintain, easier to debug, have a smaller footprint on the hardware and easier to grasp for new developers.</p>\n<h3>Tutorials for Various OAuth2 Use-Cases</h3>\n<p>On this repo of mine: <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials</a></p>\n"}],"owner":{"account_id":9368669,"reputation":31,"user_id":6952691,"display_name":"user6952691"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":844,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682280404,"creation_date":1675854041,"question_id":75384815,"body_markdown":"I have a `Spring Boot` microservice application generated using `JHipster` with `Keycloak`. Below are the versions for the application:\r\n\r\n- JHipster - 7.9.3\r\n- Spring Boot - 3.0.2\r\n- Spring Cloud - 2022.0.1\r\n- Keycloak - 20.0.3\r\n\r\nI had manually updated the `Spring Boot` version from the one generated by `JHipster`.\r\n\r\nThe security configuration is as follows:\r\n\r\n```java\r\n@EnableWebSecurity\r\n@EnableMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n@Import(SecurityProblemSupport.class)\r\npublic class SecurityConfiguration {\r\n\r\n    private final JHipsterProperties jHipsterProperties;\r\n\r\n    @Value(&quot;${spring.security.oauth2.client.provider.oidc.issuer-uri}&quot;)\r\n    private String issuerUri;\r\n\r\n    private final SecurityProblemSupport problemSupport;\r\n\r\n    public SecurityConfiguration(JHipsterProperties jHipsterProperties, SecurityProblemSupport problemSupport) {\r\n        this.problemSupport = problemSupport;\r\n        this.jHipsterProperties = jHipsterProperties;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        // @formatter:off\r\n        http\r\n            .csrf()\r\n            .disable()\r\n            .exceptionHandling()\r\n                .authenticationEntryPoint(problemSupport)\r\n                .accessDeniedHandler(problemSupport)\r\n        .and()\r\n            .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n        .and()\r\n            .authorizeHttpRequests()\r\n            .requestMatchers(&quot;/api/authenticate&quot;).permitAll()\r\n            .requestMatchers(&quot;/api/auth-info&quot;).permitAll()\r\n            .requestMatchers(&quot;/api/admin/**&quot;).hasAuthority(AuthoritiesConstants.ADMIN)\r\n            .requestMatchers(&quot;/api/**&quot;).authenticated()\r\n            .requestMatchers(&quot;/management/health&quot;).permitAll()\r\n            .requestMatchers(&quot;/management/health/**&quot;).permitAll()\r\n            .requestMatchers(&quot;/management/info&quot;).permitAll()\r\n            .requestMatchers(&quot;/management/prometheus&quot;).permitAll()\r\n            .requestMatchers(&quot;/management/**&quot;).hasAuthority(AuthoritiesConstants.ADMIN)\r\n        .and()\r\n            .oauth2ResourceServer()\r\n                .jwt()\r\n                .jwtAuthenticationConverter(authenticationConverter())\r\n                .and()\r\n            .and()\r\n                .oauth2Client();\r\n        return http.build();\r\n        // @formatter:on\r\n    }\r\n\r\n    Converter&lt;Jwt, AbstractAuthenticationToken&gt; authenticationConverter() {\r\n        JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\r\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(new JwtGrantedAuthorityConverter());\r\n        return jwtAuthenticationConverter;\r\n    }\r\n\r\n    @Bean\r\n    JwtDecoder jwtDecoder() {\r\n        NimbusJwtDecoder jwtDecoder = JwtDecoders.fromOidcIssuerLocation(issuerUri);\r\n\r\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(jHipsterProperties.getSecurity().getOauth2().getAudience());\r\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuerUri);\r\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);\r\n\r\n        jwtDecoder.setJwtValidator(withAudience);\r\n\r\n        return jwtDecoder;\r\n    }\r\n}\r\n```\r\n\r\nThe security related application properties are:\r\n\r\n```xml\r\nspring:\r\n    security:\r\n        oauth2:\r\n          resource:\r\n              filter-order: 3\r\n          client:\r\n            provider:\r\n              oidc:\r\n                issuer-uri: http://localhost:8080/realms/samplerealm\r\n            registration:\r\n              oidc:\r\n                authorization-grant-type: client_credentials\r\n                client-id: microservice-client\r\n                client-secret: &lt;VALID_CLIENT_SECRET&gt;\r\n                scope: openid, profile, email, offline_access # last one for refresh tokens\r\n```\r\n\r\nWith these configurations, the application is listening on `localhost:8087` for `HTTP` requests.\r\n\r\nI created another client in Keycloak `dev-client` and using `Postman` to test the application `API`. I acquired an access token from `Keycloak` using this client and used the access token in `Postman` in the `Authorization` header (`Bearer ----access token----`). Even with this valid token, the `API` forwards me to `localhost:8087/login` with an `HTML` page response:\r\n\r\n```html\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n\r\n&lt;head&gt;\r\n\t&lt;meta charset=&quot;utf-8&quot;&gt;\r\n\t&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;\r\n\t&lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;\r\n\t&lt;meta name=&quot;author&quot; content=&quot;&quot;&gt;\r\n\t&lt;title&gt;Please sign in&lt;/title&gt;\r\n\t&lt;link href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;\r\n\t\tintegrity=&quot;sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M&quot; crossorigin=&quot;anonymous&quot;&gt;\r\n\t&lt;link href=&quot;https://getbootstrap.com/docs/4.0/examples/signin/signin.css&quot; rel=&quot;stylesheet&quot;\r\n\t\tcrossorigin=&quot;anonymous&quot; /&gt;\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n\t&lt;div class=&quot;container&quot;&gt;\r\n\t\t&lt;h2 class=&quot;form-signin-heading&quot;&gt;Login with OAuth 2.0&lt;/h2&gt;\r\n\t\t&lt;table class=&quot;table table-striped&quot;&gt;\r\n\t\t&lt;/table&gt;\r\n\t&lt;/div&gt;\r\n&lt;/body&gt;\r\n\r\n&lt;/html&gt;\r\n```\r\n\r\nHere is a snapshot of `Postman` console (the snapshot is cropped because of the length of the access token)\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI am not sure why are the requests being redirected/forwarded to `localhost:8087/login` even if I have provided a valid access token. I have tried poviding an access token which is acquired using `password` grant with a different client but it still gave me the same result.\r\n\r\n\r\nAny `HTTP` requests to the application gets forwarded to `localhost:8087/login`, so far I tried `GET` request and it is throwing me this issue.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/d7Nrt.png","title":"Spring Boot application always redirect to login despite request having valid access token","body":"<p>I have a <code>Spring Boot</code> microservice application generated using <code>JHipster</code> with <code>Keycloak</code>. Below are the versions for the application:</p>\n<ul>\n<li>JHipster - 7.9.3</li>\n<li>Spring Boot - 3.0.2</li>\n<li>Spring Cloud - 2022.0.1</li>\n<li>Keycloak - 20.0.3</li>\n</ul>\n<p>I had manually updated the <code>Spring Boot</code> version from the one generated by <code>JHipster</code>.</p>\n<p>The security configuration is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWebSecurity\n@EnableMethodSecurity(prePostEnabled = true, securedEnabled = true)\n@Import(SecurityProblemSupport.class)\npublic class SecurityConfiguration {\n\n    private final JHipsterProperties jHipsterProperties;\n\n    @Value(&quot;${spring.security.oauth2.client.provider.oidc.issuer-uri}&quot;)\n    private String issuerUri;\n\n    private final SecurityProblemSupport problemSupport;\n\n    public SecurityConfiguration(JHipsterProperties jHipsterProperties, SecurityProblemSupport problemSupport) {\n        this.problemSupport = problemSupport;\n        this.jHipsterProperties = jHipsterProperties;\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        // @formatter:off\n        http\n            .csrf()\n            .disable()\n            .exceptionHandling()\n                .authenticationEntryPoint(problemSupport)\n                .accessDeniedHandler(problemSupport)\n        .and()\n            .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n            .authorizeHttpRequests()\n            .requestMatchers(&quot;/api/authenticate&quot;).permitAll()\n            .requestMatchers(&quot;/api/auth-info&quot;).permitAll()\n            .requestMatchers(&quot;/api/admin/**&quot;).hasAuthority(AuthoritiesConstants.ADMIN)\n            .requestMatchers(&quot;/api/**&quot;).authenticated()\n            .requestMatchers(&quot;/management/health&quot;).permitAll()\n            .requestMatchers(&quot;/management/health/**&quot;).permitAll()\n            .requestMatchers(&quot;/management/info&quot;).permitAll()\n            .requestMatchers(&quot;/management/prometheus&quot;).permitAll()\n            .requestMatchers(&quot;/management/**&quot;).hasAuthority(AuthoritiesConstants.ADMIN)\n        .and()\n            .oauth2ResourceServer()\n                .jwt()\n                .jwtAuthenticationConverter(authenticationConverter())\n                .and()\n            .and()\n                .oauth2Client();\n        return http.build();\n        // @formatter:on\n    }\n\n    Converter&lt;Jwt, AbstractAuthenticationToken&gt; authenticationConverter() {\n        JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(new JwtGrantedAuthorityConverter());\n        return jwtAuthenticationConverter;\n    }\n\n    @Bean\n    JwtDecoder jwtDecoder() {\n        NimbusJwtDecoder jwtDecoder = JwtDecoders.fromOidcIssuerLocation(issuerUri);\n\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(jHipsterProperties.getSecurity().getOauth2().getAudience());\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuerUri);\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);\n\n        jwtDecoder.setJwtValidator(withAudience);\n\n        return jwtDecoder;\n    }\n}\n</code></pre>\n<p>The security related application properties are:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>spring:\n    security:\n        oauth2:\n          resource:\n              filter-order: 3\n          client:\n            provider:\n              oidc:\n                issuer-uri: http://localhost:8080/realms/samplerealm\n            registration:\n              oidc:\n                authorization-grant-type: client_credentials\n                client-id: microservice-client\n                client-secret: &lt;VALID_CLIENT_SECRET&gt;\n                scope: openid, profile, email, offline_access # last one for refresh tokens\n</code></pre>\n<p>With these configurations, the application is listening on <code>localhost:8087</code> for <code>HTTP</code> requests.</p>\n<p>I created another client in Keycloak <code>dev-client</code> and using <code>Postman</code> to test the application <code>API</code>. I acquired an access token from <code>Keycloak</code> using this client and used the access token in <code>Postman</code> in the <code>Authorization</code> header (<code>Bearer ----access token----</code>). Even with this valid token, the <code>API</code> forwards me to <code>localhost:8087/login</code> with an <code>HTML</code> page response:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n\n&lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;\n    &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;\n    &lt;meta name=&quot;author&quot; content=&quot;&quot;&gt;\n    &lt;title&gt;Please sign in&lt;/title&gt;\n    &lt;link href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;\n        integrity=&quot;sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M&quot; crossorigin=&quot;anonymous&quot;&gt;\n    &lt;link href=&quot;https://getbootstrap.com/docs/4.0/examples/signin/signin.css&quot; rel=&quot;stylesheet&quot;\n        crossorigin=&quot;anonymous&quot; /&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;h2 class=&quot;form-signin-heading&quot;&gt;Login with OAuth 2.0&lt;/h2&gt;\n        &lt;table class=&quot;table table-striped&quot;&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p>Here is a snapshot of <code>Postman</code> console (the snapshot is cropped because of the length of the access token)</p>\n<p><a href=\"https://i.stack.imgur.com/d7Nrt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d7Nrt.png\" alt=\"enter image description here\" /></a></p>\n<p>I am not sure why are the requests being redirected/forwarded to <code>localhost:8087/login</code> even if I have provided a valid access token. I have tried poviding an access token which is acquired using <code>password</code> grant with a different client but it still gave me the same result.</p>\n<p>Any <code>HTTP</code> requests to the application gets forwarded to <code>localhost:8087/login</code>, so far I tried <code>GET</code> request and it is throwing me this issue.</p>\n"},{"tags":["java","spring-boot","spring-security","oauth-2.0","microservices"],"owner":{"account_id":27671913,"reputation":11,"user_id":21122537,"display_name":"Gabriel Garcia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682280169,"creation_date":1675223290,"question_id":75305460,"body_markdown":"I&#39;m creating a microservice framework in spring boot 3 and spring security 6, and I&#39;m not understanding how I can make my client application validate the token in the authenticating application.\r\n\r\n```\r\n@Bean\r\n@SneakyThrows\r\npublic SecurityFilterChain filterChain(HttpSecurity http) {\r\n    http.authorizeHttpRequests().anyRequest().authenticated();\r\n\r\n    return http.build();\r\n}\r\n\r\n@Primary\r\n@Bean\r\npublic RemoteTokenServices tokenServices() {\r\n    final var tokenService = new RemoteTokenServices();\r\n    tokenService.setCheckTokenEndpointUrl(authUrl + &quot;/oauth/check_token&quot;);\r\n    tokenService.setClientId(oauthClient);\r\n    tokenService.setClientSecret(oauthClientSecret);\r\n    tokenService.setAccessTokenConverter(new JwtAccessTokenConverterCustom());\r\n\r\n    return tokenService;\r\n}\r\n```\r\n\r\n\r\nI tried to run it the same way I did with previous versions, but I got no results.","title":"How to create checkToken in SpringBoot microservice?","body":"<p>I'm creating a microservice framework in spring boot 3 and spring security 6, and I'm not understanding how I can make my client application validate the token in the authenticating application.</p>\n<pre><code>@Bean\n@SneakyThrows\npublic SecurityFilterChain filterChain(HttpSecurity http) {\n    http.authorizeHttpRequests().anyRequest().authenticated();\n\n    return http.build();\n}\n\n@Primary\n@Bean\npublic RemoteTokenServices tokenServices() {\n    final var tokenService = new RemoteTokenServices();\n    tokenService.setCheckTokenEndpointUrl(authUrl + &quot;/oauth/check_token&quot;);\n    tokenService.setClientId(oauthClient);\n    tokenService.setClientSecret(oauthClientSecret);\n    tokenService.setAccessTokenConverter(new JwtAccessTokenConverterCustom());\n\n    return tokenService;\n}\n</code></pre>\n<p>I tried to run it the same way I did with previous versions, but I got no results.</p>\n"},{"tags":["java","spring","spring-boot","oauth-2.0","spring-security-test"],"answers":[{"tags":[],"owner":{"account_id":7774266,"reputation":186,"user_id":5882852,"display_name":"Thorne"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675177089,"creation_date":1675177089,"answer_id":75299019,"question_id":75298160,"body_markdown":"As with all 3rd parties, you shouldn&#39;t test a 3rd party service (at least not from your Java project). You&#39;ll just have to trust that the devs are doing their job, and that the service correctly issues a JWT.\r\n\r\nWhat you want to test are OAuth scopes (aka Authorities in Spring Security). That is done by mocking your Authentication context so that it includes a principal with your required scopes.\r\n\r\nThe way I set it up in my projects is the following:\r\n\r\n1. Make sure you have `org.springframework.security:spring-security-test` as a dependency\r\n2. In your test source, create an annotation that will act as your fake user setup\r\n\r\n    ```java\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @WithSecurityContext(factory = WithMockUserSecurityContextFactory.class)\r\n    public @interface WithMockUser {\r\n        long userId() default 1L;\r\n        String[] authorities() default &quot;ROLE_USER&quot;;\r\n    }\r\n    ```\r\n\r\n3. Again in your test source make a class that will mock the Security Context\r\n\r\n    ```java\r\n    public class WithMockUserSecurityContextFactory implements WithSecurityContextFactory&lt;WithMockUser&gt; {\r\n        @Override\r\n        public SecurityContext createSecurityContext(WithMockUser annotation) {\r\n            var context = SecurityContextHolder.createEmptyContext();\r\n\r\n            var authorities = Arrays.stream(annotation.authorities())\r\n                    .map(SimpleGrantedAuthority::new)\r\n                    .toList();\r\n\r\n            var principal = UserPrincipal.builder()\r\n                    .userId( annotation.userId() )\r\n                    .email(&quot;test@test.com&quot;)\r\n                    .authorities( authorities )\r\n                    .enabled(true)\r\n                    .build();\r\n\r\n            var auth = new UserPrincipalAuthentication(principal);\r\n            context.setAuthentication(auth);\r\n            return context;\r\n        }\r\n    }\r\n\r\n    ```\r\n\r\n    Note that `UserPrincipalAuthentication` is my custom class that extends `AbstractAuthenticationToken`.\r\n4. Now you should be able to annotate your test methods with the custom annotation and pass in the authorities you want to test for, such as this:\r\n\r\n    ```java\r\n    @AutoConfigureMockMvc\r\n    @SpringBootTest\r\n    class EndpointTest {\r\n        @Test\r\n        @WithMockUser(authorities = &quot;scope:READ&quot;)\r\n        void returnsUserData_ifHasReadScope() {\r\n            // ...\r\n            // MockMvc calls to your endpoint, and assertions\r\n        }\r\n    }\r\n    ```\r\n\r\nWhat this does, is it completely removes the 3rd party resource server from testing scope. In our test scope we don&#39;t care which server the JWT came from, it doesn&#39;t matter how it was decoded (that can be done through other unit tests), all that matters is if Access Control is working, given that User comes with a particular set of Authorities.","title":"How to test Spring Security config with resource server?","body":"<p>As with all 3rd parties, you shouldn't test a 3rd party service (at least not from your Java project). You'll just have to trust that the devs are doing their job, and that the service correctly issues a JWT.</p>\n<p>What you want to test are OAuth scopes (aka Authorities in Spring Security). That is done by mocking your Authentication context so that it includes a principal with your required scopes.</p>\n<p>The way I set it up in my projects is the following:</p>\n<ol>\n<li><p>Make sure you have <code>org.springframework.security:spring-security-test</code> as a dependency</p>\n</li>\n<li><p>In your test source, create an annotation that will act as your fake user setup</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RetentionPolicy.RUNTIME)\n@WithSecurityContext(factory = WithMockUserSecurityContextFactory.class)\npublic @interface WithMockUser {\n    long userId() default 1L;\n    String[] authorities() default &quot;ROLE_USER&quot;;\n}\n</code></pre>\n</li>\n<li><p>Again in your test source make a class that will mock the Security Context</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class WithMockUserSecurityContextFactory implements WithSecurityContextFactory&lt;WithMockUser&gt; {\n    @Override\n    public SecurityContext createSecurityContext(WithMockUser annotation) {\n        var context = SecurityContextHolder.createEmptyContext();\n\n        var authorities = Arrays.stream(annotation.authorities())\n                .map(SimpleGrantedAuthority::new)\n                .toList();\n\n        var principal = UserPrincipal.builder()\n                .userId( annotation.userId() )\n                .email(&quot;test@test.com&quot;)\n                .authorities( authorities )\n                .enabled(true)\n                .build();\n\n        var auth = new UserPrincipalAuthentication(principal);\n        context.setAuthentication(auth);\n        return context;\n    }\n}\n\n</code></pre>\n<p>Note that <code>UserPrincipalAuthentication</code> is my custom class that extends <code>AbstractAuthenticationToken</code>.</p>\n</li>\n<li><p>Now you should be able to annotate your test methods with the custom annotation and pass in the authorities you want to test for, such as this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AutoConfigureMockMvc\n@SpringBootTest\nclass EndpointTest {\n    @Test\n    @WithMockUser(authorities = &quot;scope:READ&quot;)\n    void returnsUserData_ifHasReadScope() {\n        // ...\n        // MockMvc calls to your endpoint, and assertions\n    }\n}\n</code></pre>\n</li>\n</ol>\n<p>What this does, is it completely removes the 3rd party resource server from testing scope. In our test scope we don't care which server the JWT came from, it doesn't matter how it was decoded (that can be done through other unit tests), all that matters is if Access Control is working, given that User comes with a particular set of Authorities.</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675454225,"creation_date":1675183523,"answer_id":75300378,"question_id":75298160,"body_markdown":"For end-to-end or &quot;smoke&quot; tests (test which include more than just your resource-server: authorization-server, REST client, etc.), their are better suited tools than Java tests, and yes, this is very likely to require you to lift containers and program robots to manipulate UIs (perform user login, fill forms, etc.).\r\n\r\nAs stated by [@Thorne][1] in his answer, testing JWT decoding and validation should not be in the scope of **your** Java tests (unless you write your own decoder). Also exchange with an authorization-server to issue valid access-tokens would be way to slow and fragile for a decent coverage in unit-tests (JUnit with @ExtendWith(SpringExtension.class), `@WebMvcTest` or `@WebfluxTest`) or spring-boot integration-tests (`@SpringBootTest`).\r\n\r\nWhat I unit and integration test regarding security conf is access-control, using mocked OAuth2 identities.\r\n\r\n`spring-security-test` comes with some MockMvc request post-processors (see `org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors.jwt` in your case) as well as WebTestClient mutators (see `org.springframework.security.test.web.reactive.server.SecurityMockServerConfigurers.mockJwt`) to configure Authentication of the right type (`JwtAuthenticationToken` in your case) and set it in test security context, but this is limited to MockMvc and WebTestClient and as so to `@Controller` tests.\r\n\r\nSample usage with your security conf and a `@GetMapping(&quot;/api/v1/private/machin&quot;) @PreAuthorize(&quot;hasAuthority(&#39;SCOPE_api:read&#39;)&quot;)`:\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n```java\r\nimport static org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors.jwt;\r\n\r\n@WebMvcTest(controllers = MachinController.class, properties = { &quot;server.ssl.enabled=false&quot; })\r\nclass MachinControllerTest {\r\n\r\n\t@Autowired\r\n\tMockMvc api;\r\n\r\n\t@Test\r\n\tvoid givenUserIsAnonymous_whenGetMachin_thenUnauthorized() throws Exception {\r\n\t\tapi.perform(get(&quot;/api/v1/private/machin&quot;))\r\n\t\t\t.andExpect(status().isUnauthorized());\r\n\t}\r\n\r\n\t@Test\r\n\tvoid givenUserIsGrantedWithApiRead_whenGetMachin_thenOk() throws Exception {\r\n\t\tapi.perform(get(&quot;/api/v1/private/machin&quot;)\r\n\t\t\t\t.with(jwt().jwt(jwt -&gt; jwt.authorities(List.of(new SimpleGrantedAuthority(&quot;SCOPE_api:read&quot;))))))\r\n\t\t\t.andExpect(status().isOk());\r\n\t}\r\n\r\n\t@Test\r\n\tvoid givenUserIsAuthenticatedButNotGrantedWithApiRead_whenGetMachin_thenForbidden() throws Exception {\r\n\t\tapi.perform(get(&quot;/api/v1/private/machin&quot;)\r\n\t\t\t\t.with(jwt().jwt(jwt -&gt; jwt.authorities(List.of(new SimpleGrantedAuthority(&quot;SCOPE_openid&quot;))))))\r\n\t\t\t.andExpect(status().isForbidden());\r\n\t}\r\n}\r\n```\r\n\r\n\r\nYou might also use `@WithMockJwtAuth` from [this libs I maintain][2]. This repo contains quite a few samples for unit and integration testing of any kind of `@Component` (`@Controllers` of course but also `@Services` or `@Repositories` decorated with method-security).\r\n\r\nAbove Sample becomes:\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-addons-oauth2-test&lt;/artifactId&gt;\r\n\t&lt;version&gt;6.0.12&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n```java\r\n@WebMvcTest(controllers = MachinController.class, properties = { &quot;server.ssl.enabled=false&quot; })\r\nclass MachinControllerTest {\r\n\r\n\t@Autowired\r\n\tMockMvc api;\r\n\r\n\t@Test\r\n\tvoid givenUserIsAnonymous_whenGetMachin_thenUnauthorized() throws Exception {\r\n\t\tapi.perform(get(&quot;/api/v1/private/machin&quot;))\r\n\t\t\t.andExpect(status().isUnauthorized());\r\n\t}\r\n\r\n\t@Test\r\n\t@WithMockJwtAuth(&quot;SCOPE_api:read&quot;)\r\n\tvoid givenUserIsGrantedWithApiRead_whenGetMachin_thenOk() throws Exception {\r\n\t\tapi.perform(get(&quot;/api/v1/private/machin&quot;))\r\n\t\t\t.andExpect(status().isOk());\r\n\t}\r\n\r\n\t@Test\r\n\t@WithMockJwtAuth(&quot;SCOPE_openid&quot;)\r\n\tvoid givenUserIsAuthenticatedButNotGrantedWithApiRead_whenGetMachin_thenForbidden() throws Exception {\r\n\t\tapi.perform(get(&quot;/api/v1/private/machin&quot;))\r\n\t\t\t.andExpect(status().isForbidden());\r\n\t}\r\n}\r\n```\r\n\r\n# Spring-addons starter\r\nIn the same repo, you&#39;ll find starters to simplify your resource server security config (and also synchronize sessions and CSRF protection disabling as **the second should not be disabled with active sessions**...).\r\n\r\nUsage is super simple and **all you&#39;d have to change between environments would be properties, even if using different OIDC authorization-servers**, for instance a standalone Keycloak on your dev machine and a cloud provider like Cognito, Auth0, etc. in production.\r\n\r\nInstead of directly importing `spring-boot-starter-oauth2-resource-server`, import a thin wrapper around it ([composed of 3 files][3] only):\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-addons-webmvc-jwt-resource-server&lt;/artifactId&gt;\r\n    &lt;version&gt;6.0.12&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nAs you already apply fine grained method-security to protected routes, you could probably empty this Java conf (keep default `expressionInterceptUrlRegistryPostProcessor` bean which requires users to be authenticated to access any route but those listed in `com.c4-soft.springaddons.security.permit-all` property):\r\n```java\r\n@Configuration\r\n@EnableMethodSecurity\r\npublic class SecurityConfig {\r\n    @Bean\r\n    ExpressionInterceptUrlRegistryPostProcessor expressionInterceptUrlRegistryPostProcessor() {\r\n        return (AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;.AuthorizationManagerRequestMatcherRegistry registry) -&gt; registry\r\n            .requestMatchers(&quot;/api/v1/private/**&quot;).hasAnyAuthority(&quot;SCOPE_api:read&quot;, &quot;SCOPE_api:write&quot;)\r\n            .anyRequest().authenticated();\r\n    }\r\n}\r\n```\r\nReplace `spring.security.oauth2.resourceserver` properties with:\r\n```\r\n# Single OIDC JWT issuer but you can add as many as you like\r\ncom.c4-soft.springaddons.security.issuers[0].location=https://localhost:8443/realms/master\r\n\r\n# Mimic spring-security default authorities converter: map from &quot;scope&quot; claim (accepts a comma separated list claims), with &quot;SCOPE_&quot; prefix\r\ncom.c4-soft.springaddons.security.issuers[0].authorities.claims=scope\r\ncom.c4-soft.springaddons.security.issuers[0].authorities.prefix=SCOPE_\r\n\r\n# Fine-grained CORS configuration can be set per path as follow:\r\ncom.c4-soft.springaddons.security.cors[0].path=/api/**\r\ncom.c4-soft.springaddons.security.cors[0].allowed-origins=https://localhost,https://localhost:8100,https://localhost:4200\r\ncom.c4-soft.springaddons.security.cors[0].allowedOrigins=*\r\ncom.c4-soft.springaddons.security.cors[0].allowedMethods=*\r\ncom.c4-soft.springaddons.security.cors[0].allowedHeaders=*\r\ncom.c4-soft.springaddons.security.cors[0].exposedHeaders=*\r\n\r\n# Comma separated list of ant path matchers for resources accessible to anonymous\r\ncom.c4-soft.springaddons.security.permit-all=/api/v1/public/**\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/5882852/thorne\r\n  [2]: https://github.com/ch4mpy/spring-addons\r\n  [3]: https://github.com/ch4mpy/spring-addons/tree/master/webmvc/spring-addons-webmvc-jwt-resource-server","title":"How to test Spring Security config with resource server?","body":"<p>For end-to-end or &quot;smoke&quot; tests (test which include more than just your resource-server: authorization-server, REST client, etc.), their are better suited tools than Java tests, and yes, this is very likely to require you to lift containers and program robots to manipulate UIs (perform user login, fill forms, etc.).</p>\n<p>As stated by <a href=\"https://stackoverflow.com/users/5882852/thorne\">@Thorne</a> in his answer, testing JWT decoding and validation should not be in the scope of <strong>your</strong> Java tests (unless you write your own decoder). Also exchange with an authorization-server to issue valid access-tokens would be way to slow and fragile for a decent coverage in unit-tests (JUnit with @ExtendWith(SpringExtension.class), <code>@WebMvcTest</code> or <code>@WebfluxTest</code>) or spring-boot integration-tests (<code>@SpringBootTest</code>).</p>\n<p>What I unit and integration test regarding security conf is access-control, using mocked OAuth2 identities.</p>\n<p><code>spring-security-test</code> comes with some MockMvc request post-processors (see <code>org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors.jwt</code> in your case) as well as WebTestClient mutators (see <code>org.springframework.security.test.web.reactive.server.SecurityMockServerConfigurers.mockJwt</code>) to configure Authentication of the right type (<code>JwtAuthenticationToken</code> in your case) and set it in test security context, but this is limited to MockMvc and WebTestClient and as so to <code>@Controller</code> tests.</p>\n<p>Sample usage with your security conf and a <code>@GetMapping(&quot;/api/v1/private/machin&quot;) @PreAuthorize(&quot;hasAuthority('SCOPE_api:read')&quot;)</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors.jwt;\n\n@WebMvcTest(controllers = MachinController.class, properties = { &quot;server.ssl.enabled=false&quot; })\nclass MachinControllerTest {\n\n    @Autowired\n    MockMvc api;\n\n    @Test\n    void givenUserIsAnonymous_whenGetMachin_thenUnauthorized() throws Exception {\n        api.perform(get(&quot;/api/v1/private/machin&quot;))\n            .andExpect(status().isUnauthorized());\n    }\n\n    @Test\n    void givenUserIsGrantedWithApiRead_whenGetMachin_thenOk() throws Exception {\n        api.perform(get(&quot;/api/v1/private/machin&quot;)\n                .with(jwt().jwt(jwt -&gt; jwt.authorities(List.of(new SimpleGrantedAuthority(&quot;SCOPE_api:read&quot;))))))\n            .andExpect(status().isOk());\n    }\n\n    @Test\n    void givenUserIsAuthenticatedButNotGrantedWithApiRead_whenGetMachin_thenForbidden() throws Exception {\n        api.perform(get(&quot;/api/v1/private/machin&quot;)\n                .with(jwt().jwt(jwt -&gt; jwt.authorities(List.of(new SimpleGrantedAuthority(&quot;SCOPE_openid&quot;))))))\n            .andExpect(status().isForbidden());\n    }\n}\n</code></pre>\n<p>You might also use <code>@WithMockJwtAuth</code> from <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">this libs I maintain</a>. This repo contains quite a few samples for unit and integration testing of any kind of <code>@Component</code> (<code>@Controllers</code> of course but also <code>@Services</code> or <code>@Repositories</code> decorated with method-security).</p>\n<p>Above Sample becomes:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-addons-oauth2-test&lt;/artifactId&gt;\n    &lt;version&gt;6.0.12&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@WebMvcTest(controllers = MachinController.class, properties = { &quot;server.ssl.enabled=false&quot; })\nclass MachinControllerTest {\n\n    @Autowired\n    MockMvc api;\n\n    @Test\n    void givenUserIsAnonymous_whenGetMachin_thenUnauthorized() throws Exception {\n        api.perform(get(&quot;/api/v1/private/machin&quot;))\n            .andExpect(status().isUnauthorized());\n    }\n\n    @Test\n    @WithMockJwtAuth(&quot;SCOPE_api:read&quot;)\n    void givenUserIsGrantedWithApiRead_whenGetMachin_thenOk() throws Exception {\n        api.perform(get(&quot;/api/v1/private/machin&quot;))\n            .andExpect(status().isOk());\n    }\n\n    @Test\n    @WithMockJwtAuth(&quot;SCOPE_openid&quot;)\n    void givenUserIsAuthenticatedButNotGrantedWithApiRead_whenGetMachin_thenForbidden() throws Exception {\n        api.perform(get(&quot;/api/v1/private/machin&quot;))\n            .andExpect(status().isForbidden());\n    }\n}\n</code></pre>\n<h1>Spring-addons starter</h1>\n<p>In the same repo, you'll find starters to simplify your resource server security config (and also synchronize sessions and CSRF protection disabling as <strong>the second should not be disabled with active sessions</strong>...).</p>\n<p>Usage is super simple and <strong>all you'd have to change between environments would be properties, even if using different OIDC authorization-servers</strong>, for instance a standalone Keycloak on your dev machine and a cloud provider like Cognito, Auth0, etc. in production.</p>\n<p>Instead of directly importing <code>spring-boot-starter-oauth2-resource-server</code>, import a thin wrapper around it (<a href=\"https://github.com/ch4mpy/spring-addons/tree/master/webmvc/spring-addons-webmvc-jwt-resource-server\" rel=\"nofollow noreferrer\">composed of 3 files</a> only):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-addons-webmvc-jwt-resource-server&lt;/artifactId&gt;\n    &lt;version&gt;6.0.12&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>As you already apply fine grained method-security to protected routes, you could probably empty this Java conf (keep default <code>expressionInterceptUrlRegistryPostProcessor</code> bean which requires users to be authenticated to access any route but those listed in <code>com.c4-soft.springaddons.security.permit-all</code> property):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableMethodSecurity\npublic class SecurityConfig {\n    @Bean\n    ExpressionInterceptUrlRegistryPostProcessor expressionInterceptUrlRegistryPostProcessor() {\n        return (AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;.AuthorizationManagerRequestMatcherRegistry registry) -&gt; registry\n            .requestMatchers(&quot;/api/v1/private/**&quot;).hasAnyAuthority(&quot;SCOPE_api:read&quot;, &quot;SCOPE_api:write&quot;)\n            .anyRequest().authenticated();\n    }\n}\n</code></pre>\n<p>Replace <code>spring.security.oauth2.resourceserver</code> properties with:</p>\n<pre><code># Single OIDC JWT issuer but you can add as many as you like\ncom.c4-soft.springaddons.security.issuers[0].location=https://localhost:8443/realms/master\n\n# Mimic spring-security default authorities converter: map from &quot;scope&quot; claim (accepts a comma separated list claims), with &quot;SCOPE_&quot; prefix\ncom.c4-soft.springaddons.security.issuers[0].authorities.claims=scope\ncom.c4-soft.springaddons.security.issuers[0].authorities.prefix=SCOPE_\n\n# Fine-grained CORS configuration can be set per path as follow:\ncom.c4-soft.springaddons.security.cors[0].path=/api/**\ncom.c4-soft.springaddons.security.cors[0].allowed-origins=https://localhost,https://localhost:8100,https://localhost:4200\ncom.c4-soft.springaddons.security.cors[0].allowedOrigins=*\ncom.c4-soft.springaddons.security.cors[0].allowedMethods=*\ncom.c4-soft.springaddons.security.cors[0].allowedHeaders=*\ncom.c4-soft.springaddons.security.cors[0].exposedHeaders=*\n\n# Comma separated list of ant path matchers for resources accessible to anonymous\ncom.c4-soft.springaddons.security.permit-all=/api/v1/public/**\n</code></pre>\n"}],"owner":{"account_id":5653578,"reputation":3281,"user_id":4473386,"accept_rate":80,"display_name":"Dmytro Chasovskyi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":812,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1675203966,"answer_count":2,"score":0,"last_activity_date":1682280098,"creation_date":1675173020,"question_id":75298160,"body_markdown":"I have Spring Security config that configures OAuth2 resource server and endpoints with the predefined scopes and what you can do with what endpoint. Config is below:\r\n\r\n```\r\n@Configuration\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests(\r\n                        auth -&gt; auth\r\n                                .antMatchers(&quot;/api/v1/private/**&quot;)\r\n                                .hasAnyAuthority(&quot;SCOPE_api:read&quot;, &quot;SCOPE_api:write&quot;)\r\n                                .antMatchers(&quot;/api/v1/public/**&quot;)\r\n                                .authenticated()\r\n                ).oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\r\n                .httpBasic().disable()\r\n                .csrf().disable()\r\n                .formLogin().disable()\r\n                .logout().disable();\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nThere are multiple answers on the similar question on StackOverflow such as [1](https://www.baeldung.com/spring-security-oauth-resource-server), [2](https://stackoverflow.com/questions/57103518/spring-security-oauth2-resource-server-tests), [3](https://stackoverflow.com/questions/20384543/spring-security-oauth2-pure-resource-server), even though I look at them, I cannot wrap my head around it and how to test the setup, correctness etc.\r\n\r\nMy questions has two parts:\r\n - How can I test my config? There is a nice [Baeldung](https://www.baeldung.com/spring-security-oauth-resource-server) article but it forces to run 2 separate applications to integration tests to succeed. Great for demo, not so great for CI and development.\r\n - What is normally can be tested in these use-cases? What is normal to unit-test and what is normal to integration test?\r\n\r\n\r\nI have solved similar task with testcontainers and Keycloack, but that was possible as we had in test and prod Keycloack. This time, I have no control over resource server and I don&#39;t know it&#39;s type, so it makes my head to explode.","title":"How to test Spring Security config with resource server?","body":"<p>I have Spring Security config that configures OAuth2 resource server and endpoints with the predefined scopes and what you can do with what endpoint. Config is below:</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeRequests(\n                        auth -&gt; auth\n                                .antMatchers(&quot;/api/v1/private/**&quot;)\n                                .hasAnyAuthority(&quot;SCOPE_api:read&quot;, &quot;SCOPE_api:write&quot;)\n                                .antMatchers(&quot;/api/v1/public/**&quot;)\n                                .authenticated()\n                ).oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\n                .httpBasic().disable()\n                .csrf().disable()\n                .formLogin().disable()\n                .logout().disable();\n        return http.build();\n    }\n}\n</code></pre>\n<p>There are multiple answers on the similar question on StackOverflow such as <a href=\"https://www.baeldung.com/spring-security-oauth-resource-server\" rel=\"nofollow noreferrer\">1</a>, <a href=\"https://stackoverflow.com/questions/57103518/spring-security-oauth2-resource-server-tests\">2</a>, <a href=\"https://stackoverflow.com/questions/20384543/spring-security-oauth2-pure-resource-server\">3</a>, even though I look at them, I cannot wrap my head around it and how to test the setup, correctness etc.</p>\n<p>My questions has two parts:</p>\n<ul>\n<li>How can I test my config? There is a nice <a href=\"https://www.baeldung.com/spring-security-oauth-resource-server\" rel=\"nofollow noreferrer\">Baeldung</a> article but it forces to run 2 separate applications to integration tests to succeed. Great for demo, not so great for CI and development.</li>\n<li>What is normally can be tested in these use-cases? What is normal to unit-test and what is normal to integration test?</li>\n</ul>\n<p>I have solved similar task with testcontainers and Keycloack, but that was possible as we had in test and prod Keycloack. This time, I have no control over resource server and I don't know it's type, so it makes my head to explode.</p>\n"},{"tags":["java","xml"],"answers":[{"tags":[],"owner":{"account_id":16450692,"reputation":574,"user_id":11884183,"display_name":"Felix Schildmann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682280091,"creation_date":1682280091,"answer_id":76086994,"question_id":76086861,"body_markdown":"I think your problem is that you use `detailElement.getNodeValue()`, instead you should use `detailElement.getTextContent()` like you do for the OverallStatus and RequestId.\r\n\r\nSo just replace your switch with this:\r\n\r\n        switch (detailElement.getTagName()) {\r\n            case &quot;CreatedDate&quot;:\r\n                CreatedDate = detailElement.getTextContent();\r\n                break;\r\n            case &quot;ModifiedDate&quot;:\r\n                ModifiedDate = detailElement.getTextContent();\r\n                break;\r\n            case &quot;ObjectID&quot;:\r\n                ObjectID = detailElement.getTextContent();\r\n                break;\r\n            case &quot;CustomerKey&quot;:\r\n                CustomerKey = detailElement.getTextContent();\r\n                break;\r\n            case &quot;Name&quot;:\r\n                Name = detailElement.getTextContent();\r\n                System.out.println(&quot;Name is - &quot;+Name);\r\n                break;\r\n            case &quot;QueryText&quot;:\r\n                QueryText = detailElement.getTextContent();\r\n                break;\r\n            case &quot;TargetType&quot;:\r\n                TargetType = detailElement.getTextContent();\r\n                break;\r\n            case &quot;TargetUpdateType&quot;:\r\n                TargetUpdateType = detailElement.getTextContent();\r\n                break;\r\n            case &quot;Status&quot;:\r\n                Status = detailElement.getTextContent();\r\n                break;\r\n            case &quot;CategoryID&quot;:\r\n                CategoryID = detailElement.getTextContent();\r\n                break;\r\n        }\r\n\r\nhttps://stackoverflow.com/questions/12413450/domdocument-getnodevalue-returns-null-contains-an-output-escaped-string","title":"Java xml parsing getting always null values even though xml is correctly populated","body":"<p>I think your problem is that you use <code>detailElement.getNodeValue()</code>, instead you should use <code>detailElement.getTextContent()</code> like you do for the OverallStatus and RequestId.</p>\n<p>So just replace your switch with this:</p>\n<pre><code>    switch (detailElement.getTagName()) {\n        case &quot;CreatedDate&quot;:\n            CreatedDate = detailElement.getTextContent();\n            break;\n        case &quot;ModifiedDate&quot;:\n            ModifiedDate = detailElement.getTextContent();\n            break;\n        case &quot;ObjectID&quot;:\n            ObjectID = detailElement.getTextContent();\n            break;\n        case &quot;CustomerKey&quot;:\n            CustomerKey = detailElement.getTextContent();\n            break;\n        case &quot;Name&quot;:\n            Name = detailElement.getTextContent();\n            System.out.println(&quot;Name is - &quot;+Name);\n            break;\n        case &quot;QueryText&quot;:\n            QueryText = detailElement.getTextContent();\n            break;\n        case &quot;TargetType&quot;:\n            TargetType = detailElement.getTextContent();\n            break;\n        case &quot;TargetUpdateType&quot;:\n            TargetUpdateType = detailElement.getTextContent();\n            break;\n        case &quot;Status&quot;:\n            Status = detailElement.getTextContent();\n            break;\n        case &quot;CategoryID&quot;:\n            CategoryID = detailElement.getTextContent();\n            break;\n    }\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/12413450/domdocument-getnodevalue-returns-null-contains-an-output-escaped-string\">DOMDocument getNodeValue() returns null (contains an output escaped string)</a></p>\n"}],"owner":{"account_id":12234871,"reputation":86,"user_id":8929627,"display_name":"Chandrashekhar Dautpure"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":285,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76086994,"answer_count":1,"score":0,"last_activity_date":1682280091,"creation_date":1682278312,"question_id":76086861,"body_markdown":"I am trying to call a xml webservice  and parse its response . Below is part of response:\r\n[![enter image description here](https://i.stack.imgur.com/Mz7BI.png)](https://i.stack.imgur.com/Mz7BI.png)\r\n\r\nAs you see above, there will be multiple sections of Tag &quot;Results&quot;. I need to loop on each result section and populate a List of Object.\r\n\r\nFollowing is the code:\r\n\r\n```\r\n public PopulateQueryDefination_Wrapper PopulateQueryDefTable(String ReqId) throws IOException, UnirestException {\r\n        PopulateQueryDefination_Wrapper qd_wrap = new PopulateQueryDefination_Wrapper();\r\n        List&lt;QueryDefinationObject&gt; listOfQueryDefination = new ArrayList&lt;&gt;();\r\n        ConfigVariables con = new ConfigVariables();\r\n        String soapEndpointUrl = con.getSOAP_Base_URI() + &quot;Service.asmx&quot;;\r\n        //String soapEndpointUrl = &quot;https://shekhar.free.beeceptor.com/Service.asmx&quot;;\r\n        System.out.println(soapEndpointUrl);\r\n        URL url = null;\r\n        URLConnection connection = null;\r\n        String responseString = null;\r\n        String outputString = &quot;&quot;;\r\n        OutputStream out = null;\r\n        InputStreamReader isr = null;\r\n        BufferedReader in = null;\r\n        String OverallStatus = null;\r\n        String RequestID = null;\r\n\r\n        //Payload creation - start\r\n        CreatePayload_QueryDefination pay_QD = new CreatePayload_QueryDefination();\r\n        String xmlInput = &quot;&quot;;\r\n        if (ReqId == null) {\r\n            xmlInput = pay_QD.GetQDPayload();//To be call for 1st run\r\n        } else {\r\n            xmlInput = pay_QD.GetQDPayload();//To be called for subsequent run\r\n        }\r\n        //Payload creation - end\r\n\r\n        try {\r\n            url = new URL(soapEndpointUrl);\r\n            HttpsURLConnection httpsConn = (HttpsURLConnection) url.openConnection();\r\n\r\n            byte[] buffer = new byte[xmlInput.length()];\r\n            buffer = xmlInput.getBytes();\r\n\r\n            httpsConn.setRequestProperty(&quot;Content-Length&quot;, String.valueOf(buffer.length));\r\n            httpsConn.setRequestProperty(&quot;Content-Type&quot;, &quot;text/xml&quot;);\r\n            httpsConn.setRequestMethod(&quot;POST&quot;);\r\n            httpsConn.setDoOutput(true);\r\n            out = httpsConn.getOutputStream();\r\n            out.write(buffer);\r\n            out.close();\r\n\r\n            // Read the response and write it to standard out.\r\n            isr = new InputStreamReader(httpsConn.getInputStream());\r\n            in = new BufferedReader(isr);\r\n\r\n            String response1 = in.lines().collect(Collectors.joining());\r\n            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n            DocumentBuilder builder;\r\n            builder = factory.newDocumentBuilder();            \r\n            StringBuilder xmlStringBuilder = new StringBuilder();\r\n            xmlStringBuilder.append(response1);\r\n            ByteArrayInputStream input = new ByteArrayInputStream(\r\n                    xmlStringBuilder.toString().getBytes(&quot;UTF-8&quot;));\r\n            \r\n            Document qc_document = builder.parse(input);\r\n            qc_document.getDocumentElement().normalize();\r\n            \r\n            OverallStatus = qc_document.getElementsByTagName(&quot;OverallStatus&quot;).item(0).getTextContent();\r\n            RequestID = qc_document.getElementsByTagName(&quot;RequestID&quot;).item(0).getTextContent();\r\n\r\n            NodeList Results_Nodes = qc_document.getElementsByTagName(&quot;Results&quot;);\r\n            \r\n            for (int i = 0; i &lt; Results_Nodes.getLength(); i++) {\r\n                String CreatedDate = null;\r\n                String ModifiedDate = null;\r\n                String ObjectID = null;\r\n                String CustomerKey = null;\r\n                String Name = null;\r\n                String QueryText = null;\r\n                String TargetType = null;\r\n                String TargetUpdateType = null;\r\n                String Status = null;\r\n                String CategoryID = null;\r\n                Node Result = qc_document.getElementsByTagName(&quot;Results&quot;).item(i);\r\n                \r\n                //------------------------------\r\n                //StringWriter buf = new StringWriter();\r\n                //Transformer xform = TransformerFactory.newInstance().newTransformer();\r\n                //xform.transform(new DOMSource(Result), new StreamResult(buf));\r\n                //System.out.println(buf.toString()); // your string\r\n                \r\n                \r\n                \r\n                //-------------------------------------\r\n                \r\n                \r\n                if (Result.getNodeType() == Node.ELEMENT_NODE) {\r\n                    //Element ResultElement = (Element) Result;\r\n                    NodeList ResultDetails = Result.getChildNodes();\r\n\r\n                    for (int j = 0; j &lt; ResultDetails.getLength(); j++) {\r\n                        Node detail = ResultDetails.item(j);\r\n                        if (detail.getNodeType() == Node.ELEMENT_NODE) {\r\n                            Element detailElement = (Element) detail;\r\n                            switch (detailElement.getTagName()) {\r\n                                case &quot;CreatedDate&quot;:\r\n                                    CreatedDate = detailElement.getNodeValue();\r\n                                    break;\r\n                                case &quot;ModifiedDate&quot;:\r\n                                    ModifiedDate = detailElement.getNodeValue();\r\n                                    break;\r\n                                case &quot;ObjectID&quot;:\r\n                                    ObjectID = detailElement.getNodeValue();\r\n                                    break;\r\n                                case &quot;CustomerKey&quot;:\r\n                                    CustomerKey = detailElement.getNodeValue();\r\n                                    break;\r\n                                case &quot;Name&quot;:\r\n                                    Name = detailElement.getNodeValue();\r\n                                    System.out.println(&quot;Name is - &quot;+Name);\r\n                                    break;\r\n                                case &quot;QueryText&quot;:\r\n                                    QueryText = detailElement.getNodeValue();\r\n                                    break;\r\n                                case &quot;TargetType&quot;:\r\n                                    TargetType = detailElement.getNodeValue();\r\n                                    break;\r\n                                case &quot;TargetUpdateType&quot;:\r\n                                    TargetUpdateType = detailElement.getNodeValue();\r\n                                    break;\r\n                                case &quot;Status&quot;:\r\n                                    Status = detailElement.getNodeValue();\r\n                                    break;\r\n                                case &quot;CategoryID&quot;:\r\n                                    CategoryID = detailElement.getNodeValue();\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                QueryDefinationObject newQD = new QueryDefinationObject(Name, Status, CategoryID, CreatedDate, CustomerKey, ModifiedDate, ObjectID, TargetType, TargetUpdateType, QueryText);\r\n                listOfQueryDefination.add(newQD);\r\n            }\r\n            qd_wrap.setOverallStatus(OverallStatus);\r\n            qd_wrap.setRequestId(RequestID);\r\n            qd_wrap.setPopQD(listOfQueryDefination);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n        }\r\n\r\n        return qd_wrap;\r\n    }\r\n```\r\n\r\nThe response is coming ok. I can confirm this as i am able to get values of OveralAllStatus and RequestId properly using \r\n\r\n```\r\nOverallStatus = qc_document.getElementsByTagName(&quot;OverallStatus&quot;).item(0).getTextContent();\r\n            RequestID = qc_document.getElementsByTagName(&quot;RequestID&quot;).item(0).getTextContent();\r\n```\r\n\r\nHowever when i parse the nodelist to node and then loop each child in node, i am able to get tag names , but tag values are null\r\n\r\n```\r\nif (Result.getNodeType() == Node.ELEMENT_NODE) {\r\n                    //Element ResultElement = (Element) Result;\r\n                    NodeList ResultDetails = Result.getChildNodes();\r\n\r\n                    for (int j = 0; j &lt; ResultDetails.getLength(); j++) {\r\n                        Node detail = ResultDetails.item(j);\r\n                        if (detail.getNodeType() == Node.ELEMENT_NODE) {\r\n                            Element detailElement = (Element) detail;\r\n                            switch (detailElement.getTagName()) {\r\n                                case &quot;CreatedDate&quot;:\r\n                                    CreatedDate = detailElement.getNodeValue();\r\n                                    break;\r\n                                case &quot;ModifiedDate&quot;:\r\n                                    ModifiedDate = detailElement.getNodeValue();\r\n                                    break;\r\n```\r\n\r\nIn the above code Created date is always null even thought it has values in response message. Same for other fields as well\r\n\r\nI dont know what mistake i am doing. i have check the response using tunneling between my application and server and see good response coming back. \r\n\r\nthanks a lot \r\n\r\nI am expecting that i get values from nodes when i loop them","title":"Java xml parsing getting always null values even though xml is correctly populated","body":"<p>I am trying to call a xml webservice  and parse its response . Below is part of response:\n<a href=\"https://i.stack.imgur.com/Mz7BI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mz7BI.png\" alt=\"enter image description here\" /></a></p>\n<p>As you see above, there will be multiple sections of Tag &quot;Results&quot;. I need to loop on each result section and populate a List of Object.</p>\n<p>Following is the code:</p>\n<pre><code> public PopulateQueryDefination_Wrapper PopulateQueryDefTable(String ReqId) throws IOException, UnirestException {\n        PopulateQueryDefination_Wrapper qd_wrap = new PopulateQueryDefination_Wrapper();\n        List&lt;QueryDefinationObject&gt; listOfQueryDefination = new ArrayList&lt;&gt;();\n        ConfigVariables con = new ConfigVariables();\n        String soapEndpointUrl = con.getSOAP_Base_URI() + &quot;Service.asmx&quot;;\n        //String soapEndpointUrl = &quot;https://shekhar.free.beeceptor.com/Service.asmx&quot;;\n        System.out.println(soapEndpointUrl);\n        URL url = null;\n        URLConnection connection = null;\n        String responseString = null;\n        String outputString = &quot;&quot;;\n        OutputStream out = null;\n        InputStreamReader isr = null;\n        BufferedReader in = null;\n        String OverallStatus = null;\n        String RequestID = null;\n\n        //Payload creation - start\n        CreatePayload_QueryDefination pay_QD = new CreatePayload_QueryDefination();\n        String xmlInput = &quot;&quot;;\n        if (ReqId == null) {\n            xmlInput = pay_QD.GetQDPayload();//To be call for 1st run\n        } else {\n            xmlInput = pay_QD.GetQDPayload();//To be called for subsequent run\n        }\n        //Payload creation - end\n\n        try {\n            url = new URL(soapEndpointUrl);\n            HttpsURLConnection httpsConn = (HttpsURLConnection) url.openConnection();\n\n            byte[] buffer = new byte[xmlInput.length()];\n            buffer = xmlInput.getBytes();\n\n            httpsConn.setRequestProperty(&quot;Content-Length&quot;, String.valueOf(buffer.length));\n            httpsConn.setRequestProperty(&quot;Content-Type&quot;, &quot;text/xml&quot;);\n            httpsConn.setRequestMethod(&quot;POST&quot;);\n            httpsConn.setDoOutput(true);\n            out = httpsConn.getOutputStream();\n            out.write(buffer);\n            out.close();\n\n            // Read the response and write it to standard out.\n            isr = new InputStreamReader(httpsConn.getInputStream());\n            in = new BufferedReader(isr);\n\n            String response1 = in.lines().collect(Collectors.joining());\n            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n            DocumentBuilder builder;\n            builder = factory.newDocumentBuilder();            \n            StringBuilder xmlStringBuilder = new StringBuilder();\n            xmlStringBuilder.append(response1);\n            ByteArrayInputStream input = new ByteArrayInputStream(\n                    xmlStringBuilder.toString().getBytes(&quot;UTF-8&quot;));\n            \n            Document qc_document = builder.parse(input);\n            qc_document.getDocumentElement().normalize();\n            \n            OverallStatus = qc_document.getElementsByTagName(&quot;OverallStatus&quot;).item(0).getTextContent();\n            RequestID = qc_document.getElementsByTagName(&quot;RequestID&quot;).item(0).getTextContent();\n\n            NodeList Results_Nodes = qc_document.getElementsByTagName(&quot;Results&quot;);\n            \n            for (int i = 0; i &lt; Results_Nodes.getLength(); i++) {\n                String CreatedDate = null;\n                String ModifiedDate = null;\n                String ObjectID = null;\n                String CustomerKey = null;\n                String Name = null;\n                String QueryText = null;\n                String TargetType = null;\n                String TargetUpdateType = null;\n                String Status = null;\n                String CategoryID = null;\n                Node Result = qc_document.getElementsByTagName(&quot;Results&quot;).item(i);\n                \n                //------------------------------\n                //StringWriter buf = new StringWriter();\n                //Transformer xform = TransformerFactory.newInstance().newTransformer();\n                //xform.transform(new DOMSource(Result), new StreamResult(buf));\n                //System.out.println(buf.toString()); // your string\n                \n                \n                \n                //-------------------------------------\n                \n                \n                if (Result.getNodeType() == Node.ELEMENT_NODE) {\n                    //Element ResultElement = (Element) Result;\n                    NodeList ResultDetails = Result.getChildNodes();\n\n                    for (int j = 0; j &lt; ResultDetails.getLength(); j++) {\n                        Node detail = ResultDetails.item(j);\n                        if (detail.getNodeType() == Node.ELEMENT_NODE) {\n                            Element detailElement = (Element) detail;\n                            switch (detailElement.getTagName()) {\n                                case &quot;CreatedDate&quot;:\n                                    CreatedDate = detailElement.getNodeValue();\n                                    break;\n                                case &quot;ModifiedDate&quot;:\n                                    ModifiedDate = detailElement.getNodeValue();\n                                    break;\n                                case &quot;ObjectID&quot;:\n                                    ObjectID = detailElement.getNodeValue();\n                                    break;\n                                case &quot;CustomerKey&quot;:\n                                    CustomerKey = detailElement.getNodeValue();\n                                    break;\n                                case &quot;Name&quot;:\n                                    Name = detailElement.getNodeValue();\n                                    System.out.println(&quot;Name is - &quot;+Name);\n                                    break;\n                                case &quot;QueryText&quot;:\n                                    QueryText = detailElement.getNodeValue();\n                                    break;\n                                case &quot;TargetType&quot;:\n                                    TargetType = detailElement.getNodeValue();\n                                    break;\n                                case &quot;TargetUpdateType&quot;:\n                                    TargetUpdateType = detailElement.getNodeValue();\n                                    break;\n                                case &quot;Status&quot;:\n                                    Status = detailElement.getNodeValue();\n                                    break;\n                                case &quot;CategoryID&quot;:\n                                    CategoryID = detailElement.getNodeValue();\n                                    break;\n                            }\n                        }\n                    }\n                }\n\n                QueryDefinationObject newQD = new QueryDefinationObject(Name, Status, CategoryID, CreatedDate, CustomerKey, ModifiedDate, ObjectID, TargetType, TargetUpdateType, QueryText);\n                listOfQueryDefination.add(newQD);\n            }\n            qd_wrap.setOverallStatus(OverallStatus);\n            qd_wrap.setRequestId(RequestID);\n            qd_wrap.setPopQD(listOfQueryDefination);\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n        }\n\n        return qd_wrap;\n    }\n</code></pre>\n<p>The response is coming ok. I can confirm this as i am able to get values of OveralAllStatus and RequestId properly using</p>\n<pre><code>OverallStatus = qc_document.getElementsByTagName(&quot;OverallStatus&quot;).item(0).getTextContent();\n            RequestID = qc_document.getElementsByTagName(&quot;RequestID&quot;).item(0).getTextContent();\n</code></pre>\n<p>However when i parse the nodelist to node and then loop each child in node, i am able to get tag names , but tag values are null</p>\n<pre><code>if (Result.getNodeType() == Node.ELEMENT_NODE) {\n                    //Element ResultElement = (Element) Result;\n                    NodeList ResultDetails = Result.getChildNodes();\n\n                    for (int j = 0; j &lt; ResultDetails.getLength(); j++) {\n                        Node detail = ResultDetails.item(j);\n                        if (detail.getNodeType() == Node.ELEMENT_NODE) {\n                            Element detailElement = (Element) detail;\n                            switch (detailElement.getTagName()) {\n                                case &quot;CreatedDate&quot;:\n                                    CreatedDate = detailElement.getNodeValue();\n                                    break;\n                                case &quot;ModifiedDate&quot;:\n                                    ModifiedDate = detailElement.getNodeValue();\n                                    break;\n</code></pre>\n<p>In the above code Created date is always null even thought it has values in response message. Same for other fields as well</p>\n<p>I dont know what mistake i am doing. i have check the response using tunneling between my application and server and see good response coming back.</p>\n<p>thanks a lot</p>\n<p>I am expecting that i get values from nodes when i loop them</p>\n"},{"tags":["java","hibernate","liquibase","quarkus"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1682314919,"post_id":76086933,"comment_id":134189748,"body_markdown":"is `-` a valid PGSQL identifier char? If not, I&#39;ll start quoting all column names with `` (as describerd in Hibernate doc).\nAlso, edit OP and add full stacktrace because is not clear if the problem is generated by Liquibase or your application code.","body":"is <code>-</code> a valid PGSQL identifier char? If not, I&#39;ll start quoting all column names with `` (as describerd in Hibernate doc). Also, edit OP and add full stacktrace because is not clear if the problem is generated by Liquibase or your application code."}],"owner":{"account_id":18175403,"reputation":187,"user_id":13224253,"display_name":"GoldNova"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682279682,"creation_date":1682279343,"question_id":76086933,"body_markdown":"I&#39;m working on a quarkus project, which uses liquibase as a db.\r\n\r\nThis is my hibernate class:\r\n\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    \r\n    import javax.persistence.*;\r\n    \r\n    @Entity\r\n    @NoArgsConstructor\r\n    @Getter\r\n    @Setter\r\n    @Table(name = &quot;votingResult&quot;)\r\n    public class VotingResultEntity {\r\n    \r\n        @Id\r\n        @SequenceGenerator(\r\n                name = &quot;voting-result_id_seq&quot;,\r\n                sequenceName = &quot;voting-result_id_seq&quot;,\r\n                allocationSize = 1\r\n        )\r\n        @GeneratedValue(\r\n                strategy = GenerationType.SEQUENCE,\r\n                generator = &quot;voting-result_id_seq&quot;\r\n        )\r\n        @Column(name = &quot;voting-result_id&quot;)\r\n        private Long votingResultId;\r\n    \r\n        @Column(name=&quot;title&quot;)\r\n        private String title;\r\n    \r\n        @Column(name = &quot;end-date&quot;)\r\n        private long endDate;\r\n    \r\n    }\r\n\r\nThis is my liquibase table definition:\r\n\r\n    &lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\r\n                       xmlns:ext=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext&quot;\r\n                       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                       xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext\r\n        https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd\r\n        http://www.liquibase.org/xml/ns/dbchangelog\r\n        https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.4.xsd&quot;&gt;\r\n    \r\n        &lt;changeSet author=&quot;GoldNova&quot; id=&quot;32-create-voting-result-table&quot;&gt;\r\n    \r\n            &lt;createTable tableName=&quot;votingResult&quot;&gt;\r\n                &lt;column name=&quot;voting-result_id&quot; type=&quot;bigint&quot;&gt;\r\n                    &lt;constraints primaryKey=&quot;true&quot; nullable=&quot;false&quot; primaryKeyName=&quot;voting-result_id_pk&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;title&quot; type=&quot;varchar(255)&quot;/&gt;\r\n                &lt;column name=&quot;end-date&quot; type=&quot;bigint&quot;/&gt;\r\n            &lt;/createTable&gt;\r\n    \r\n            &lt;createSequence sequenceName=&quot;voting-result_id_seq&quot;\r\n                            dataType=&quot;bigint&quot;\r\n                            incrementBy=&quot;1&quot;\r\n                            startValue=&quot;100&quot;/&gt;\r\n        &lt;/changeSet&gt;\r\n    &lt;/databaseChangeLog&gt;\r\n\r\n\r\nthe changelog xml:\r\n\r\n    &lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\r\n                       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                       xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog\r\n        https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.4.xsd&quot;&gt;\r\n    \r\n        &lt;include file=&quot;17-create-sample-table.xml&quot; relativeToChangelogFile=&quot;true&quot;/&gt;\r\n        &lt;include file=&quot;32-create-voting-result-table.xml&quot; relativeToChangelogFile=&quot;true&quot;/&gt;\r\n    \r\n    &lt;/databaseChangeLog&gt;\r\n\r\n\r\n\r\nNow, if I execute the service I get the following errors:\r\n\r\n&gt; Caused by: javax.persistence.PersistenceException:\r\n&gt; org.hibernate.exception.SQLGrammarException: could not extract\r\n&gt; ResultSet\r\n\r\n&gt; Caused by: org.postgresql.util.PSQLException: ERROR: relation &quot;votingresult&quot; does not exist\r\n\r\nIt is not a service related error, that is for sure. But what could be the problem?\r\nI&#39;ve checked the DB definition and the hibernate annotations and they seem fine to me. Also the other error does not make sense because the table obviously does exist in the definition...\r\n\r\nWhat could be the problem?\r\n\r\nEDIT: I&#39;&#39;ve tried renaming my table to ```voting-result``` but when I do that I get an error saying ```sql error near - ```","title":"&quot;SQLGrammarException: could not extract ResultSet&quot; With liquibase and quarkus","body":"<p>I'm working on a quarkus project, which uses liquibase as a db.</p>\n<p>This is my hibernate class:</p>\n<pre><code>import lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport javax.persistence.*;\n\n@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@Table(name = &quot;votingResult&quot;)\npublic class VotingResultEntity {\n\n    @Id\n    @SequenceGenerator(\n            name = &quot;voting-result_id_seq&quot;,\n            sequenceName = &quot;voting-result_id_seq&quot;,\n            allocationSize = 1\n    )\n    @GeneratedValue(\n            strategy = GenerationType.SEQUENCE,\n            generator = &quot;voting-result_id_seq&quot;\n    )\n    @Column(name = &quot;voting-result_id&quot;)\n    private Long votingResultId;\n\n    @Column(name=&quot;title&quot;)\n    private String title;\n\n    @Column(name = &quot;end-date&quot;)\n    private long endDate;\n\n}\n</code></pre>\n<p>This is my liquibase table definition:</p>\n<pre><code>&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\n                   xmlns:ext=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext&quot;\n                   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n                   xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext\n    https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd\n    http://www.liquibase.org/xml/ns/dbchangelog\n    https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.4.xsd&quot;&gt;\n\n    &lt;changeSet author=&quot;GoldNova&quot; id=&quot;32-create-voting-result-table&quot;&gt;\n\n        &lt;createTable tableName=&quot;votingResult&quot;&gt;\n            &lt;column name=&quot;voting-result_id&quot; type=&quot;bigint&quot;&gt;\n                &lt;constraints primaryKey=&quot;true&quot; nullable=&quot;false&quot; primaryKeyName=&quot;voting-result_id_pk&quot;/&gt;\n            &lt;/column&gt;\n            &lt;column name=&quot;title&quot; type=&quot;varchar(255)&quot;/&gt;\n            &lt;column name=&quot;end-date&quot; type=&quot;bigint&quot;/&gt;\n        &lt;/createTable&gt;\n\n        &lt;createSequence sequenceName=&quot;voting-result_id_seq&quot;\n                        dataType=&quot;bigint&quot;\n                        incrementBy=&quot;1&quot;\n                        startValue=&quot;100&quot;/&gt;\n    &lt;/changeSet&gt;\n&lt;/databaseChangeLog&gt;\n</code></pre>\n<p>the changelog xml:</p>\n<pre><code>&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\n                   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n                   xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog\n    https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.4.xsd&quot;&gt;\n\n    &lt;include file=&quot;17-create-sample-table.xml&quot; relativeToChangelogFile=&quot;true&quot;/&gt;\n    &lt;include file=&quot;32-create-voting-result-table.xml&quot; relativeToChangelogFile=&quot;true&quot;/&gt;\n\n&lt;/databaseChangeLog&gt;\n</code></pre>\n<p>Now, if I execute the service I get the following errors:</p>\n<blockquote>\n<p>Caused by: javax.persistence.PersistenceException:\norg.hibernate.exception.SQLGrammarException: could not extract\nResultSet</p>\n</blockquote>\n<blockquote>\n<p>Caused by: org.postgresql.util.PSQLException: ERROR: relation &quot;votingresult&quot; does not exist</p>\n</blockquote>\n<p>It is not a service related error, that is for sure. But what could be the problem?\nI've checked the DB definition and the hibernate annotations and they seem fine to me. Also the other error does not make sense because the table obviously does exist in the definition...</p>\n<p>What could be the problem?</p>\n<p>EDIT: I''ve tried renaming my table to <code>voting-result</code> but when I do that I get an error saying <code>sql error near - </code></p>\n"},{"tags":["java","xslt","altova","xmlspy"],"comments":[{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1682258073,"post_id":76085170,"comment_id":134183409,"body_markdown":"The docs https://www.altova.com/manual/XMLSpy/spyenterprise/fxmisc_java.html suggest the tool has support for extension functions done in Java. Whether you will have the same extension function API and mapping of types like in your integration platform is something I can&#39;t tell.","body":"The docs <a href=\"https://www.altova.com/manual/XMLSpy/spyenterprise/fxmisc_java.html\" rel=\"nofollow noreferrer\">altova.com/manual/XMLSpy/spyenterprise/fxmisc_java.html</a> suggest the tool has support for extension functions done in Java. Whether you will have the same extension function API and mapping of types like in your integration platform is something I can&#39;t tell."}],"owner":{"account_id":23536729,"reputation":21,"user_id":17581577,"display_name":"feiyang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682279320,"creation_date":1682256910,"question_id":76085170,"body_markdown":"I develop XSLT mappings in XMLSpy for usage on an integration platform. There it is possible to execute static java methods which are prefixed with a namespace corresponding to the java package The java methods are used to extend built in XPath functions. The mappings can be executed in the runtime of the integration server.\r\nNow it would be great if testing could be done locally in XMLSpy.\r\n\r\nNow the technical question:\r\n\r\nIs this possible if the jar file with the static methods is available? If so, how?\r\n\r\nThank you so much for any advice.","title":"XmlSpy: Test XSLT W locally with static Java Methods","body":"<p>I develop XSLT mappings in XMLSpy for usage on an integration platform. There it is possible to execute static java methods which are prefixed with a namespace corresponding to the java package The java methods are used to extend built in XPath functions. The mappings can be executed in the runtime of the integration server.\nNow it would be great if testing could be done locally in XMLSpy.</p>\n<p>Now the technical question:</p>\n<p>Is this possible if the jar file with the static methods is available? If so, how?</p>\n<p>Thank you so much for any advice.</p>\n"},{"tags":["java","spring-boot","jwt","auth0"],"comments":[{"owner":{"account_id":180181,"reputation":76380,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":1,"creation_date":1680017854,"post_id":75866971,"comment_id":133823259,"body_markdown":"Resource servers don&#39;t do sign up and login. They only check a given JWT. This is the wrong setup for your app. Your app seems to have the role of a web app. So you should follow the [Regular Web App Spring Boot example](https://auth0.com/docs/quickstart/webapp/java-spring-boot/interactive) instead.","body":"Resource servers don&#39;t do sign up and login. They only check a given JWT. This is the wrong setup for your app. Your app seems to have the role of a web app. So you should follow the <a href=\"https://auth0.com/docs/quickstart/webapp/java-spring-boot/interactive\" rel=\"nofollow noreferrer\">Regular Web App Spring Boot example</a> instead."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1680018843,"post_id":75866971,"comment_id":133823551,"body_markdown":"Codo is right, triggering user login is client responsibility, not resource-server one. If you can&#39;t easily configure  your JavaFX application as an OAuth2 client (I have no experience with JavaFX, maybe it&#39;s easy, maybe not), have you considered inserting an OAuth2 client layer on your server between the front-end and your REST API? This called the BFF pattern. Sample with spring-cloud-gateway used as BFF there: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff","body":"Codo is right, triggering user login is client responsibility, not resource-server one. If you can&#39;t easily configure  your JavaFX application as an OAuth2 client (I have no experience with JavaFX, maybe it&#39;s easy, maybe not), have you considered inserting an OAuth2 client layer on your server between the front-end and your REST API? This called the BFF pattern. Sample with spring-cloud-gateway used as BFF there: <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">github.com/ch4mpy/spring-addons/tree/master/samples/tutorial&zwnj;&#8203;s/&hellip;</a>"},{"owner":{"account_id":15875847,"reputation":4479,"user_id":11455105,"display_name":"Amal K"},"score":0,"creation_date":1680019283,"post_id":75866971,"comment_id":133823669,"body_markdown":"@Codo My app is a REST API and has controllers exposing API endpoints. The example you have provided is for a web app that produces HTML pages using a template engine. I call this API from a client application and would like to have users login and signup to the API via the client. Am I missing something?","body":"@Codo My app is a REST API and has controllers exposing API endpoints. The example you have provided is for a web app that produces HTML pages using a template engine. I call this API from a client application and would like to have users login and signup to the API via the client. Am I missing something?"},{"owner":{"account_id":180181,"reputation":76380,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":1,"creation_date":1680019729,"post_id":75866971,"comment_id":133823797,"body_markdown":"Can you provide more context: what application will use your API? which part will provide a UI for users? Then we can describe your options.","body":"Can you provide more context: what application will use your API? which part will provide a UI for users? Then we can describe your options."},{"owner":{"account_id":180181,"reputation":76380,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":0,"creation_date":1680019815,"post_id":75866971,"comment_id":133823823,"body_markdown":"And BTW: Auth0 provides registration UI and manages users. If you implement this in your Spring Boot application, then why do you use Auth0 in the first place?","body":"And BTW: Auth0 provides registration UI and manages users. If you implement this in your Spring Boot application, then why do you use Auth0 in the first place?"},{"owner":{"account_id":15875847,"reputation":4479,"user_id":11455105,"display_name":"Amal K"},"score":0,"creation_date":1680020249,"post_id":75866971,"comment_id":133823970,"body_markdown":"@Codo My client is a JavaFX application that provides the login and signup interface and calls this Spring Boot API.  I&#39;ve included the source code links in the question.","body":"@Codo My client is a JavaFX application that provides the login and signup interface and calls this Spring Boot API.  I&#39;ve included the source code links in the question."},{"owner":{"account_id":180181,"reputation":76380,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":1,"creation_date":1680021657,"post_id":75866971,"comment_id":133824413,"body_markdown":"The best approach is probably if the JavaFX application uses a web view to host the registration/login screen. At the end, the JavaFX application has the JWT. Your Spring Boot application is configured as resource server (without any controllers for registration/login). In Auth0, use the application type &quot;SPA&quot; or &quot;Native&quot;. I&#39;m not familiar with JavaFX but it the regular web view seems to lack a few features. So the implementation is somewhat more involved. See https://developer.okta.com/blog/2019/08/14/javafx-tutorial-oauth2-oidc","body":"The best approach is probably if the JavaFX application uses a web view to host the registration/login screen. At the end, the JavaFX application has the JWT. Your Spring Boot application is configured as resource server (without any controllers for registration/login). In Auth0, use the application type &quot;SPA&quot; or &quot;Native&quot;. I&#39;m not familiar with JavaFX but it the regular web view seems to lack a few features. So the implementation is somewhat more involved. See <a href=\"https://developer.okta.com/blog/2019/08/14/javafx-tutorial-oauth2-oidc\" rel=\"nofollow noreferrer\">developer.okta.com/blog/2019/08/14/javafx-tutorial-oauth2-oi&zwnj;&#8203;dc</a>"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1680028232,"post_id":75866971,"comment_id":133826098,"body_markdown":"Definitely, looking at JavaFX limitations in the tutorial linked by Codo, the **B**ackend **F**or **F**rontend pattern is a solution you should consider. You&#39;ll remove everything related to OAuth2 from your JavaFX app (including tokens, the requests it sends to backend will be secured with good old session cookie) and the OAuth2 client will be hosted on the server. Authorization-code initiation will be initiated by the BFF and user registration handled by the OP.","body":"Definitely, looking at JavaFX limitations in the tutorial linked by Codo, the <b>B</b>ackend <b>F</b>or <b>F</b>rontend pattern is a solution you should consider. You&#39;ll remove everything related to OAuth2 from your JavaFX app (including tokens, the requests it sends to backend will be secured with good old session cookie) and the OAuth2 client will be hosted on the server. Authorization-code initiation will be initiated by the BFF and user registration handled by the OP."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1680028447,"post_id":75866971,"comment_id":133826138,"body_markdown":"P.S. The BFF sample with `spring-cloud-gateway` I linked above is configured to use Auth0 as OIDC Provider (as well as Amazon Cognito and Keycloak). The front-end is written with Angular, but replacing it with your JavaFX shouldn&#39;t be complicated (you are interested in `login.screen.ts` and `user.service.ts` only, which should be readable for a Java developer, even if he never had a look at Angular before)","body":"P.S. The BFF sample with <code>spring-cloud-gateway</code> I linked above is configured to use Auth0 as OIDC Provider (as well as Amazon Cognito and Keycloak). The front-end is written with Angular, but replacing it with your JavaFX shouldn&#39;t be complicated (you are interested in <code>login.screen.ts</code> and <code>user.service.ts</code> only, which should be readable for a Java developer, even if he never had a look at Angular before)"},{"owner":{"account_id":15875847,"reputation":4479,"user_id":11455105,"display_name":"Amal K"},"score":0,"creation_date":1680114042,"post_id":75866971,"comment_id":133844140,"body_markdown":"@ch4mp Will I require a separate application to serve as the BFF? Also, is it possible to have the BFF maintain a session with a Desktop JavaFX app? Shouldn&#39;t it be stateless?","body":"@ch4mp Will I require a separate application to serve as the BFF? Also, is it possible to have the BFF maintain a session with a Desktop JavaFX app? Shouldn&#39;t it be stateless?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1680117496,"post_id":75866971,"comment_id":133845026,"body_markdown":"BFF is not stateless, it requires session for authorization-code flow and after that to store OAuth2 tokens. Theoretically, it is possible to configure a REST API as an OAuth2 client but this is counter nature: REST APIs are much better configured as (stateless) resource servers. So yes, use a separate app and `spring-cloud-gateway` is good candidate due to its `TokenRelay` filter (replaces session cookie with OAuth2 access token stored in session)","body":"BFF is not stateless, it requires session for authorization-code flow and after that to store OAuth2 tokens. Theoretically, it is possible to configure a REST API as an OAuth2 client but this is counter nature: REST APIs are much better configured as (stateless) resource servers. So yes, use a separate app and <code>spring-cloud-gateway</code> is good candidate due to its <code>TokenRelay</code> filter (replaces session cookie with OAuth2 access token stored in session)"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1680117797,"post_id":75866971,"comment_id":133845102,"body_markdown":"Regarding JavaFX and sessions, I don&#39;t know. All I can say is it does not depend on the BFF, but just on the ability of your JavaFX application to handle the session cookie correctly: extract it from HTTP responses, store it somewhere (in memory should be fine) and then send it with new requests. It should also handle CSRF (extract CSRF cookie from responses and then set CSRF header or attribute for POST, PUT and DELETE requests)","body":"Regarding JavaFX and sessions, I don&#39;t know. All I can say is it does not depend on the BFF, but just on the ability of your JavaFX application to handle the session cookie correctly: extract it from HTTP responses, store it somewhere (in memory should be fine) and then send it with new requests. It should also handle CSRF (extract CSRF cookie from responses and then set CSRF header or attribute for POST, PUT and DELETE requests)"}],"owner":{"account_id":15875847,"reputation":4479,"user_id":11455105,"display_name":"Amal K"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":648,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682278911,"creation_date":1680010458,"question_id":75866971,"body_markdown":"I have a Spring Boot REST API (*Spring Boot Version 3.0.4*) that had been using HTTP Basic Authentication. I&#39;m now moving on to JWT authentication using Auth0. So far, I have configured JWT authentication using Spring Boot&#39;s OAuth2 Resource Server using the following security configuration:\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class ApplicationSecurityConfiguration {\r\n\r\n\r\n    public static final RequestMatcher PUBLIC_URLS = new OrRequestMatcher(\r\n            new AntPathRequestMatcher(&quot;/users/**&quot;, &quot;POST&quot;),\r\n            new AntPathRequestMatcher(&quot;/error/**&quot;)\r\n    );\r\n\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .cors(Customizer.withDefaults())\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .authorizeHttpRequests(auth -&gt; auth\r\n                        .requestMatchers(PUBLIC_URLS).permitAll()\r\n                        .anyRequest().authenticated())\r\n                .sessionManagement(session -&gt; session\r\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\nI have created an API using my Auth0 dashboard and also added the following properties in my *application. Properties*:\r\n```\r\nspring.security.oauth2.resourceserver.jwt.issuer-uri=https://&lt;my-domain-here&gt;.us.auth0.com/\r\nspring.security.oauth2.resourceserver.jwt.audiences=localhost:8000\r\nauth0.audience=localhost:8000\r\n```\r\n\r\nI have followed [this guide by Auth0](https://auth0.com/docs/quickstart/backend/java-spring-security5/01-authorization). The guide mentions how to secure endpoints but does not contain any information about how to get an access token from a client or a sign up or login process where the server associates a user in the Spring Boot API with the token. \r\n\r\nI already have an `AppUsersController` for registering and retrieving the current user that was initially using HTTP Basic Authentication:\r\n```\r\n@RestController\r\n@RequestMapping(value = &quot;users&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\npublic class AppUsersController {\r\n\r\n    private final AppUserRepository repository;\r\n    private final PasswordEncoder encoder;\r\n\r\n    public AppUsersController(AppUserRepository repository, PasswordEncoder encoder) {\r\n        this.repository = repository;\r\n        this.encoder = encoder;\r\n    }\r\n\r\n    @PostMapping\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public AppUserInfoDto register(@RequestBody @Valid AppUserRegistrationDto registration) {\r\n\r\n        String username = registration.email();\r\n\r\n        if (repository.findByUsername(username).isPresent()) {\r\n            throw new UsernameAlreadyExistsException(username);\r\n        }\r\n\r\n        AppUser user = repository.save(registration.toUser(encoder));\r\n\r\n        return AppUserInfoDto.fromAppUser(user);\r\n    }\r\n\r\n\r\n    @GetMapping\r\n    public AppUserInfoDto current(@AuthenticationPrincipal User user) {\r\n        return repository\r\n                .findByUsername(user.getUsername())\r\n                .map(AppUserInfoDto::fromAppUser)\r\n                .orElseThrow(AppUserNotFoundException::new);\r\n    }\r\n}\r\n```\r\n\r\nThe problem is most of the guides I&#39;ve found demonstrate login and sign up using a self-signed public-private key pair to generate JWT Tokens where everytime the user logs in, the token is created manually using a `TokenService` and then using `AuthenticationManager.authenticate()`. Also, there are guides like [this](https://auth0.com/docs/quickstart/webapp/java-spring-boot/01-login#add-login-to-your-application) to setup login for a web application using template engines, not REST APIs. \r\n\r\nThere are examples of obtaining access tokens for clients like Angular or React. However, what if I want to login or register using curl or Postman? (My client is originally a JavaFX application making an HTTP Request to my Spring Boot API.)\r\n\r\nHow would I modify my `AppUsersController` above to support sign up and login using the configured JWT authentication and Auth0? \r\n\r\nHere is my `UserDetailsService`:\r\n```\r\n@Service\r\npublic class AppUserDetailsService implements UserDetailsService {\r\n\r\n    private final AppUserRepository userRepository;\r\n\r\n    public AppUserDetailsService(AppUserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n\r\n        AppUser user = userRepository\r\n                .findByUsername(username)\r\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;The username &quot; + username + &quot; was not found&quot;));\r\n\r\n        return User.builder()\r\n                .username(user.getUsername())\r\n                .password(user.getPassword())\r\n                .authorities(Collections.emptyList())\r\n                .build();\r\n    }\r\n}\r\n```\r\nThe application sources are available on GitHub:\r\n* [Spring Boot API](https://github.com/amal-stack/notebooks-api)\r\n* [JavaFX Client](https://github.com/amal-stack/notebooksfx)","title":"How to implement sign up and login using JWTs by Auth0 in Spring Boot?","body":"<p>I have a Spring Boot REST API (<em>Spring Boot Version 3.0.4</em>) that had been using HTTP Basic Authentication. I'm now moving on to JWT authentication using Auth0. So far, I have configured JWT authentication using Spring Boot's OAuth2 Resource Server using the following security configuration:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class ApplicationSecurityConfiguration {\n\n\n    public static final RequestMatcher PUBLIC_URLS = new OrRequestMatcher(\n            new AntPathRequestMatcher(&quot;/users/**&quot;, &quot;POST&quot;),\n            new AntPathRequestMatcher(&quot;/error/**&quot;)\n    );\n\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http\n                .cors(Customizer.withDefaults())\n                .csrf(AbstractHttpConfigurer::disable)\n                .authorizeHttpRequests(auth -&gt; auth\n                        .requestMatchers(PUBLIC_URLS).permitAll()\n                        .anyRequest().authenticated())\n                .sessionManagement(session -&gt; session\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\n                .build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>I have created an API using my Auth0 dashboard and also added the following properties in my <em>application. Properties</em>:</p>\n<pre><code>spring.security.oauth2.resourceserver.jwt.issuer-uri=https://&lt;my-domain-here&gt;.us.auth0.com/\nspring.security.oauth2.resourceserver.jwt.audiences=localhost:8000\nauth0.audience=localhost:8000\n</code></pre>\n<p>I have followed <a href=\"https://auth0.com/docs/quickstart/backend/java-spring-security5/01-authorization\" rel=\"nofollow noreferrer\">this guide by Auth0</a>. The guide mentions how to secure endpoints but does not contain any information about how to get an access token from a client or a sign up or login process where the server associates a user in the Spring Boot API with the token.</p>\n<p>I already have an <code>AppUsersController</code> for registering and retrieving the current user that was initially using HTTP Basic Authentication:</p>\n<pre><code>@RestController\n@RequestMapping(value = &quot;users&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\npublic class AppUsersController {\n\n    private final AppUserRepository repository;\n    private final PasswordEncoder encoder;\n\n    public AppUsersController(AppUserRepository repository, PasswordEncoder encoder) {\n        this.repository = repository;\n        this.encoder = encoder;\n    }\n\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public AppUserInfoDto register(@RequestBody @Valid AppUserRegistrationDto registration) {\n\n        String username = registration.email();\n\n        if (repository.findByUsername(username).isPresent()) {\n            throw new UsernameAlreadyExistsException(username);\n        }\n\n        AppUser user = repository.save(registration.toUser(encoder));\n\n        return AppUserInfoDto.fromAppUser(user);\n    }\n\n\n    @GetMapping\n    public AppUserInfoDto current(@AuthenticationPrincipal User user) {\n        return repository\n                .findByUsername(user.getUsername())\n                .map(AppUserInfoDto::fromAppUser)\n                .orElseThrow(AppUserNotFoundException::new);\n    }\n}\n</code></pre>\n<p>The problem is most of the guides I've found demonstrate login and sign up using a self-signed public-private key pair to generate JWT Tokens where everytime the user logs in, the token is created manually using a <code>TokenService</code> and then using <code>AuthenticationManager.authenticate()</code>. Also, there are guides like <a href=\"https://auth0.com/docs/quickstart/webapp/java-spring-boot/01-login#add-login-to-your-application\" rel=\"nofollow noreferrer\">this</a> to setup login for a web application using template engines, not REST APIs.</p>\n<p>There are examples of obtaining access tokens for clients like Angular or React. However, what if I want to login or register using curl or Postman? (My client is originally a JavaFX application making an HTTP Request to my Spring Boot API.)</p>\n<p>How would I modify my <code>AppUsersController</code> above to support sign up and login using the configured JWT authentication and Auth0?</p>\n<p>Here is my <code>UserDetailsService</code>:</p>\n<pre><code>@Service\npublic class AppUserDetailsService implements UserDetailsService {\n\n    private final AppUserRepository userRepository;\n\n    public AppUserDetailsService(AppUserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n\n        AppUser user = userRepository\n                .findByUsername(username)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;The username &quot; + username + &quot; was not found&quot;));\n\n        return User.builder()\n                .username(user.getUsername())\n                .password(user.getPassword())\n                .authorities(Collections.emptyList())\n                .build();\n    }\n}\n</code></pre>\n<p>The application sources are available on GitHub:</p>\n<ul>\n<li><a href=\"https://github.com/amal-stack/notebooks-api\" rel=\"nofollow noreferrer\">Spring Boot API</a></li>\n<li><a href=\"https://github.com/amal-stack/notebooksfx\" rel=\"nofollow noreferrer\">JavaFX Client</a></li>\n</ul>\n"},{"tags":["java","spring-boot","oauth-2.0","keycloak"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1678911685,"post_id":75747088,"comment_id":133627102,"body_markdown":"Do you logout your user from the OIDC Provider (aka OP, aka authorization server) too when you invalidate user session on your Relying Party (aka RP, aka OAuth2 client)? This is done with [RP-Initiated Logout](https://openid.net/specs/openid-connect-rpinitiated-1_0.html) and Spring provides with `OidcClientInitiatedLogoutSuccessHandler` for that (provided that your OP complies with the spec, which is the case for Keycloak but not Auth0 or Cognito for instance, in which case you&#39;ll have to refer to your OP doc and write a LogoutSuccessHandler by yourself)","body":"Do you logout your user from the OIDC Provider (aka OP, aka authorization server) too when you invalidate user session on your Relying Party (aka RP, aka OAuth2 client)? This is done with <a href=\"https://openid.net/specs/openid-connect-rpinitiated-1_0.html\" rel=\"nofollow noreferrer\">RP-Initiated Logout</a> and Spring provides with <code>OidcClientInitiatedLogoutSuccessHandler</code> for that (provided that your OP complies with the spec, which is the case for Keycloak but not Auth0 or Cognito for instance, in which case you&#39;ll have to refer to your OP doc and write a LogoutSuccessHandler by yourself)"},{"owner":{"account_id":3150582,"reputation":446,"user_id":2664120,"display_name":"Nordiii"},"score":0,"creation_date":1678970959,"post_id":75747088,"comment_id":133638442,"body_markdown":"@ch4mp sorry for the late reply! My intent is only a &quot;logout&quot; / reverification for specific clients. So secure client S and open client O can both use the master realm. User U is logged into the master realm. Now he accesses client O without any need to revalidate that he indeed is the correct user. With the OIDC login still valid the user opens client S, but as the security is higher and he currently has no valid JWT Token. Therefor the user has to &quot;login&quot; against the OICD again to verify that he is user U and not anyone else. Is there a way to do this, without much client site management?","body":"@ch4mp sorry for the late reply! My intent is only a &quot;logout&quot; / reverification for specific clients. So secure client S and open client O can both use the master realm. User U is logged into the master realm. Now he accesses client O without any need to revalidate that he indeed is the correct user. With the OIDC login still valid the user opens client S, but as the security is higher and he currently has no valid JWT Token. Therefor the user has to &quot;login&quot; against the OICD again to verify that he is user U and not anyone else. Is there a way to do this, without much client site management?"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679077520,"creation_date":1678987879,"answer_id":75759697,"question_id":75747088,"body_markdown":"According to your comments, it seems that you don&#39;t trust your OP to be sure that the user actually is who he pretends to be. That&#39;s an issue you can&#39;t sort on client side. If you want to improve security, add multi-factor authentication on the authorization server and use different clients for different front-ends.\r\n\r\nThe only point you can address from the client side, is to trigger the OP logout from the client if a user thinks he logs out from the system (SSO and all the clients connected to it) when he actually only invalidates his session on one of your front-ends. A new login will not change anything in that case.\r\n\r\nYou should have in mind that your user browser has 3 different sessions:\r\n- on the OIDC Provider (Keycloak)\r\n- on the *secured* backend\r\n- on the *opened* one\r\n\r\nYou should also be aware that the user is not authenticated on clients. It is authenticated on the OP. This is even the essence of SSO: there is a single user representation across clients of a single OP. So if user is authenticated on the OP, his ID is valid for all the clients. \r\n\r\nClients maintain &quot;authorizations to act on behalf of a user authenticated on an authorization server&quot; (this being a bit long, was called `OAuth2AuthorizedClient` in Spring framework). It is saved in session and contains the user representation from the OP and tokens, along with a representation of the client config used to get it (client and registration details). \r\n\r\nNow, your use case: when an OAuth2 client triggers an authorization-code flow, if the user already has a session opened on the authorization server, the authorization code is returned silently and the client can fetch tokens and instantiate an `OAuth2AuthorizedClient` to store using an `OAuth2AuthorizedClientRepository` (provided that the user already gave consent for the  requested scopes to that client, but it&#39;s another story).\r\n\r\nOptions if you don&#39;t want that to happen:\r\n- logout the user from the OP when you invalidate a user session on your clients. This is [RP-Initiated Logout][1] and Spring provides with `OidcClientInitiatedLogoutSuccessHandler` for that (if the OP complies with spec, which Keycloak does). Just hook it in your client logout with `http.logout().logoutSuccessHandler(new OidcClientInitiatedLogoutSuccessHandler(clientRegistrationRepository));`\r\n- change the OP (use another realm or Keycloak instance)\r\n\r\nBe aware that invalidating the session on a client configured with RP initiated logout will invalidate the user session on the OP, but that this will be cascaded back from the OP to other clients only if Back Channel logout is implemented and configured on both sides.\r\n\r\nBack channel logout is not implemented in spring. I have an experimental implementation, but it is not published yet (maybe next week, once the next version of spring-cloud is released). \r\n\r\n  [1]: https://openid.net/specs/openid-connect-rpinitiated-1_0.html","title":"SSO oauth2 revalidate login for higher security in specific clients","body":"<p>According to your comments, it seems that you don't trust your OP to be sure that the user actually is who he pretends to be. That's an issue you can't sort on client side. If you want to improve security, add multi-factor authentication on the authorization server and use different clients for different front-ends.</p>\n<p>The only point you can address from the client side, is to trigger the OP logout from the client if a user thinks he logs out from the system (SSO and all the clients connected to it) when he actually only invalidates his session on one of your front-ends. A new login will not change anything in that case.</p>\n<p>You should have in mind that your user browser has 3 different sessions:</p>\n<ul>\n<li>on the OIDC Provider (Keycloak)</li>\n<li>on the <em>secured</em> backend</li>\n<li>on the <em>opened</em> one</li>\n</ul>\n<p>You should also be aware that the user is not authenticated on clients. It is authenticated on the OP. This is even the essence of SSO: there is a single user representation across clients of a single OP. So if user is authenticated on the OP, his ID is valid for all the clients.</p>\n<p>Clients maintain &quot;authorizations to act on behalf of a user authenticated on an authorization server&quot; (this being a bit long, was called <code>OAuth2AuthorizedClient</code> in Spring framework). It is saved in session and contains the user representation from the OP and tokens, along with a representation of the client config used to get it (client and registration details).</p>\n<p>Now, your use case: when an OAuth2 client triggers an authorization-code flow, if the user already has a session opened on the authorization server, the authorization code is returned silently and the client can fetch tokens and instantiate an <code>OAuth2AuthorizedClient</code> to store using an <code>OAuth2AuthorizedClientRepository</code> (provided that the user already gave consent for the  requested scopes to that client, but it's another story).</p>\n<p>Options if you don't want that to happen:</p>\n<ul>\n<li>logout the user from the OP when you invalidate a user session on your clients. This is <a href=\"https://openid.net/specs/openid-connect-rpinitiated-1_0.html\" rel=\"nofollow noreferrer\">RP-Initiated Logout</a> and Spring provides with <code>OidcClientInitiatedLogoutSuccessHandler</code> for that (if the OP complies with spec, which Keycloak does). Just hook it in your client logout with <code>http.logout().logoutSuccessHandler(new OidcClientInitiatedLogoutSuccessHandler(clientRegistrationRepository));</code></li>\n<li>change the OP (use another realm or Keycloak instance)</li>\n</ul>\n<p>Be aware that invalidating the session on a client configured with RP initiated logout will invalidate the user session on the OP, but that this will be cascaded back from the OP to other clients only if Back Channel logout is implemented and configured on both sides.</p>\n<p>Back channel logout is not implemented in spring. I have an experimental implementation, but it is not published yet (maybe next week, once the next version of spring-cloud is released).</p>\n"},{"tags":[],"owner":{"account_id":3150582,"reputation":446,"user_id":2664120,"display_name":"Nordiii"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680018496,"creation_date":1680018496,"answer_id":75868406,"question_id":75747088,"body_markdown":"So in my case I was able to Edit the Default browser flow in Keycloak.\r\n\r\nDuplicating the flow, and delete that user can login via cookies (just keep the login form).\r\nSetting the new flow as Browser flow for my Application forces the user to login every time the Application Session ends.\r\n","title":"SSO oauth2 revalidate login for higher security in specific clients","body":"<p>So in my case I was able to Edit the Default browser flow in Keycloak.</p>\n<p>Duplicating the flow, and delete that user can login via cookies (just keep the login form).\nSetting the new flow as Browser flow for my Application forces the user to login every time the Application Session ends.</p>\n"}],"owner":{"account_id":3150582,"reputation":446,"user_id":2664120,"display_name":"Nordiii"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75868406,"answer_count":2,"score":0,"last_activity_date":1682278502,"creation_date":1678895506,"question_id":75747088,"body_markdown":"I am currently working at an application which will contain sensitive data and therefor I want to revalidate that the user is still correct after the application session was terminated.\r\n\r\nNow I can terminate the session in my App but spring boot will just log me in again (without any validation) as I am still logged in at the SSO (Keycloak) Endpoint. Is there a way to force a user to revalidate the SSO login for specific clients when the current client session expired?\r\n\r\nA solution would probably be to use another realm with a quick logout, but then I see a problem to keep the users between realms in sync.\r\nThis is my first time working with SSO and Keycloak / Spring-boot-security. \r\nMy current configuration for Spring-Boot is:\r\n\r\n    spring.security.oauth2.client.registration.master.client-id=my-Client\r\n    spring.security.oauth2.client.registration.master.client-secret=&lt;secret&gt;\r\n    spring.security.oauth2.client.registration.master.scope=openid\r\n    spring.security.oauth2.client.provider.master.issuer-uri=https://localhost/realms/master\r\n\r\nAnd the code:\r\n```java\r\n    public class OAuth2LoginSecurityConfig {\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http.authorizeRequests()\r\n                    //For Healthchecks\r\n                    .antMatchers(&quot;/actuator/**&quot;)\r\n                    .permitAll()\r\n                    .and()\r\n                    .authorizeRequests()\r\n                    .anyRequest()\r\n                    .hasRole(&quot;special&quot;)\r\n                    .and()\r\n                    .oauth2Login();\r\n            return http.build();\r\n        }\r\n    }\r\n```\r\n\r\nAny help is much appreciated!\r\n","title":"SSO oauth2 revalidate login for higher security in specific clients","body":"<p>I am currently working at an application which will contain sensitive data and therefor I want to revalidate that the user is still correct after the application session was terminated.</p>\n<p>Now I can terminate the session in my App but spring boot will just log me in again (without any validation) as I am still logged in at the SSO (Keycloak) Endpoint. Is there a way to force a user to revalidate the SSO login for specific clients when the current client session expired?</p>\n<p>A solution would probably be to use another realm with a quick logout, but then I see a problem to keep the users between realms in sync.\nThis is my first time working with SSO and Keycloak / Spring-boot-security.\nMy current configuration for Spring-Boot is:</p>\n<pre><code>spring.security.oauth2.client.registration.master.client-id=my-Client\nspring.security.oauth2.client.registration.master.client-secret=&lt;secret&gt;\nspring.security.oauth2.client.registration.master.scope=openid\nspring.security.oauth2.client.provider.master.issuer-uri=https://localhost/realms/master\n</code></pre>\n<p>And the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class OAuth2LoginSecurityConfig {\n        @Bean\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n            http.authorizeRequests()\n                    //For Healthchecks\n                    .antMatchers(&quot;/actuator/**&quot;)\n                    .permitAll()\n                    .and()\n                    .authorizeRequests()\n                    .anyRequest()\n                    .hasRole(&quot;special&quot;)\n                    .and()\n                    .oauth2Login();\n            return http.build();\n        }\n    }\n</code></pre>\n<p>Any help is much appreciated!</p>\n"},{"tags":["java","android","canvas","android-view"],"comments":[{"owner":{"account_id":2776420,"reputation":5236,"user_id":2389923,"display_name":"beigirad"},"score":0,"creation_date":1681025107,"post_id":75903378,"comment_id":133990640,"body_markdown":"Can you share `hot_water_tank_container` file? also can you provide some other states of your tank? example: full, half state?","body":"Can you share <code>hot_water_tank_container</code> file? also can you provide some other states of your tank? example: full, half state?"},{"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"score":0,"creation_date":1681026003,"post_id":75903378,"comment_id":133990705,"body_markdown":"@beigirad: Thanks for your comment. I added the hot water tank container file. What do you mean by &quot;provide&quot; some states? Full means that the hot water tank should be full. Thus the blue bar should cover the whole hot water tank (but it should be made sure, that the blue water bar does not exceed the rims). Half means, that the hot water tank should be filled until the middle with water (vertically).","body":"@beigirad: Thanks for your comment. I added the hot water tank container file. What do you mean by &quot;provide&quot; some states? Full means that the hot water tank should be full. Thus the blue bar should cover the whole hot water tank (but it should be made sure, that the blue water bar does not exceed the rims). Half means, that the hot water tank should be filled until the middle with water (vertically)."}],"answers":[{"tags":[],"owner":{"account_id":25417380,"reputation":526,"user_id":19224040,"display_name":"Rob"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682278469,"creation_date":1680989158,"answer_id":75967754,"question_id":75903378,"body_markdown":"There are two issues here: \r\n\r\n1) The calculation of `innerCircleCenter` is incorrect. `innerCircleCenter` should be the X coordinate of the center of the water tank, but the current calculation seems to be set up for a specific screen size or a specific image width. The calculation should simply be `innerCircleCenter = getWidth() / 2;`.\r\n\r\n2) The lines `app:layout_constraintWidth_percent=&quot;0.15&quot;` and `app:layout_constraintHeight_percent=&quot;0.3&quot;` set the width and height of the `HotWaterTank` depending on the aspect ratio of the screen, which explains why it displays one way in your layout editor and another way on your emulator/actual device. In the example below, notice the width of the `HotWaterTank` is different depending on the aspect ratio of the screen. This is because `width` is set to 15 percent of the screen, so the wider the screen, the wider the box will be for the `HotWaterTank` (and the taller the screen, the taller the `HotWaterTank` will be). One of these constraints should be set to `wrap_content` so your image&#39;s aspect ratio is preserved (more on this below).\r\n\r\nThe top image is on a Google Pixel 1, bottom is on a Google Pixel 4: \r\n\r\n[![Google Pixel][1]][1]\r\n\r\n[![Google Pixle 4][2]][2]\r\n\r\n\r\nThis also might explain why it was working for months and then suddenly stopped working. Perhaps you recently upgraded your phone? :)\r\n\r\nThe custom view you have built is not currently set up to handle size changes like `wrap_content`. Here is an updated `onSizeChanged` and `onMeasure` that will enable you use `wrap_content` to the **width** (you&#39;ll have to make some changes if you want to `wrap_content` the height instead):\r\n\r\n```java\r\n    @Override\r\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n        super.onSizeChanged(w, h, oldw, oldh);\r\n\r\n        // init bitmap\r\n\r\n        int width = getWidth();\r\n        int height = getHeight();\r\n\r\n        mInnerCirclePaint.setStrokeWidth( (float) (width * 0.9));\r\n\r\n        bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true);\r\n\r\n        //innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72));\r\n        innerCircleCenter = getWidth() / 2;\r\n\r\n        left = (getWidth() - bitmap.getWidth()) / 2;\r\n        top = (getHeight() - bitmap.getHeight()) / 2;\r\n\r\n\r\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\r\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\r\n    }\r\n\r\n    @Override\r\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n\r\n        // the actual dimensions of your water tank image\r\n        // these are just here to set the aspect ratio and the &#39;max&#39; dimensions (we will make it smaller in the xml)\r\n        int desiredWidth = 421;\r\n        int desiredHeight = 693;\r\n\r\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\r\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\r\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\r\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\r\n\r\n        int width;\r\n        int height;\r\n\r\n        //Measure Height\r\n        if (heightMode == MeasureSpec.EXACTLY) {\r\n            //Must be this size\r\n            height = heightSize;\r\n        } else if (heightMode == MeasureSpec.AT_MOST) {\r\n            //Can&#39;t be bigger than...\r\n            height = Math.min(desiredHeight, heightSize);\r\n        } else {\r\n            //Be whatever you want\r\n            height = desiredHeight;\r\n        }\r\n\r\n        //Measure Width\r\n        if (widthMode == MeasureSpec.EXACTLY) {\r\n            //Must be this size\r\n            width = widthSize;\r\n        } else if (widthMode == MeasureSpec.AT_MOST) {\r\n            //Can&#39;t be bigger than...\r\n            width = heightSize * desiredWidth / desiredHeight;\r\n        } else {\r\n            //Be whatever you want\r\n            width = desiredWidth;\r\n        }\r\n\r\n        setMeasuredDimension(width, height);\r\n    }\r\n```\r\n\r\nAnd the updated xml for `HotWaterTank`:\r\n```xml\r\n    &lt;com.example.test.HotWaterTank\r\n        android:id=&quot;@+id/hotWaterTank&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHeight_percent=&quot;0.25&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.529&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.85&quot; /&gt;\r\n```\r\n\r\nResult: [![Updated view][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3ZwaP.jpg\r\n  [2]: https://i.stack.imgur.com/xFE4o.png\r\n  [3]: https://i.stack.imgur.com/VcCUM.png","title":"Self-made canvas view in Android is not correctly displayed (any more)","body":"<p>There are two issues here:</p>\n<ol>\n<li><p>The calculation of <code>innerCircleCenter</code> is incorrect. <code>innerCircleCenter</code> should be the X coordinate of the center of the water tank, but the current calculation seems to be set up for a specific screen size or a specific image width. The calculation should simply be <code>innerCircleCenter = getWidth() / 2;</code>.</p>\n</li>\n<li><p>The lines <code>app:layout_constraintWidth_percent=&quot;0.15&quot;</code> and <code>app:layout_constraintHeight_percent=&quot;0.3&quot;</code> set the width and height of the <code>HotWaterTank</code> depending on the aspect ratio of the screen, which explains why it displays one way in your layout editor and another way on your emulator/actual device. In the example below, notice the width of the <code>HotWaterTank</code> is different depending on the aspect ratio of the screen. This is because <code>width</code> is set to 15 percent of the screen, so the wider the screen, the wider the box will be for the <code>HotWaterTank</code> (and the taller the screen, the taller the <code>HotWaterTank</code> will be). One of these constraints should be set to <code>wrap_content</code> so your image's aspect ratio is preserved (more on this below).</p>\n</li>\n</ol>\n<p>The top image is on a Google Pixel 1, bottom is on a Google Pixel 4:</p>\n<p><a href=\"https://i.stack.imgur.com/3ZwaP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3ZwaP.jpg\" alt=\"Google Pixel\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/xFE4o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xFE4o.png\" alt=\"Google Pixle 4\" /></a></p>\n<p>This also might explain why it was working for months and then suddenly stopped working. Perhaps you recently upgraded your phone? :)</p>\n<p>The custom view you have built is not currently set up to handle size changes like <code>wrap_content</code>. Here is an updated <code>onSizeChanged</code> and <code>onMeasure</code> that will enable you use <code>wrap_content</code> to the <strong>width</strong> (you'll have to make some changes if you want to <code>wrap_content</code> the height instead):</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n\n        // init bitmap\n\n        int width = getWidth();\n        int height = getHeight();\n\n        mInnerCirclePaint.setStrokeWidth( (float) (width * 0.9));\n\n        bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true);\n\n        //innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72));\n        innerCircleCenter = getWidth() / 2;\n\n        left = (getWidth() - bitmap.getWidth()) / 2;\n        top = (getHeight() - bitmap.getHeight()) / 2;\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n\n        // the actual dimensions of your water tank image\n        // these are just here to set the aspect ratio and the 'max' dimensions (we will make it smaller in the xml)\n        int desiredWidth = 421;\n        int desiredHeight = 693;\n\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\n\n        int width;\n        int height;\n\n        //Measure Height\n        if (heightMode == MeasureSpec.EXACTLY) {\n            //Must be this size\n            height = heightSize;\n        } else if (heightMode == MeasureSpec.AT_MOST) {\n            //Can't be bigger than...\n            height = Math.min(desiredHeight, heightSize);\n        } else {\n            //Be whatever you want\n            height = desiredHeight;\n        }\n\n        //Measure Width\n        if (widthMode == MeasureSpec.EXACTLY) {\n            //Must be this size\n            width = widthSize;\n        } else if (widthMode == MeasureSpec.AT_MOST) {\n            //Can't be bigger than...\n            width = heightSize * desiredWidth / desiredHeight;\n        } else {\n            //Be whatever you want\n            width = desiredWidth;\n        }\n\n        setMeasuredDimension(width, height);\n    }\n</code></pre>\n<p>And the updated xml for <code>HotWaterTank</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;com.example.test.HotWaterTank\n        android:id=&quot;@+id/hotWaterTank&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;0dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.25&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.529&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.85&quot; /&gt;\n</code></pre>\n<p>Result: <a href=\"https://i.stack.imgur.com/VcCUM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VcCUM.png\" alt=\"Updated view\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2776420,"reputation":5236,"user_id":2389923,"display_name":"beigirad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681105130,"creation_date":1681029455,"answer_id":75969504,"question_id":75903378,"body_markdown":"Because of your `hot_water_tank_container` is a large image, I used `AppCompatImageView` as parent. Also used hard-code `android:layout_width` in xml with `setAdjustViewBounds(true)` in java code to simplify measuring calculations.\r\n\r\n```xml\r\n&lt;com.example.game.HotWaterTank\r\n    android:id=&quot;@+id/tank&quot;\r\n    android:layout_width=&quot;100dp&quot;\r\n    android:layout_height=&quot;wrap_content&quot; /&gt;\r\n```\r\nHere the `HotWaterTank` class\r\n\r\n```java\r\nimport android.content.Context;\r\nimport android.graphics.Canvas;\r\nimport android.graphics.Color;\r\nimport android.graphics.Paint;\r\nimport android.graphics.Rect;\r\nimport android.util.AttributeSet;\r\n\r\nimport androidx.appcompat.widget.AppCompatImageView;\r\n\r\npublic class HotWaterTank extends AppCompatImageView {\r\n    private Paint mPaint;\r\n    private Rect mRect;\r\n    private int mColor = Color.parseColor(&quot;#327bff&quot;);\r\n\r\n    private float percentage = 0f;\r\n\r\n    public HotWaterTank(Context context) {\r\n        this(context, null);\r\n    }\r\n\r\n    public HotWaterTank(Context context, AttributeSet attrs) {\r\n        this(context, attrs, 0);\r\n    }\r\n\r\n    public HotWaterTank(Context context, AttributeSet attrs, int defStyle) {\r\n        super(context, attrs, defStyle);\r\n\r\n        if (attrs != null) {\r\n            final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\r\n            hotWaterColor = a.getColor(R.styleable.Thermometer_therm_color, hotWaterColor);\r\n            a.recycle();\r\n        }\r\n\r\n        init();\r\n    }\r\n\r\n    private void init() {\r\n        mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);\r\n        mPaint.setColor(mColor);\r\n        mPaint.setStyle(Paint.Style.FILL);\r\n\r\n        mRect = new Rect();\r\n\r\n        setAdjustViewBounds(true);\r\n        setImageResource(R.drawable.hot_water_tank_container);\r\n    }\r\n\r\n    @Override\r\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n        super.onSizeChanged(w, h, oldw, oldh);\r\n\r\n        mRect.set(0, 0, w, h);\r\n        mRect.inset((int) (0.085f * w), (int) (0.18f * h)); /* can be refine more */\r\n    }\r\n\r\n    @Override\r\n    protected void onDraw(Canvas canvas) {\r\n        super.onDraw(canvas);\r\n\r\n        float top = mRect.bottom - (mRect.height() * percentage);\r\n        canvas.drawRect(mRect.left, top, mRect.right, mRect.bottom, mPaint);\r\n    }\r\n\r\n    public void changeVolumeBar(float percentage) {\r\n        this.percentage = percentage;\r\n        invalidate();\r\n    }\r\n}\r\n\r\n```\r\n\r\n**Shot:**\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BmMpn.gif","title":"Self-made canvas view in Android is not correctly displayed (any more)","body":"<p>Because of your <code>hot_water_tank_container</code> is a large image, I used <code>AppCompatImageView</code> as parent. Also used hard-code <code>android:layout_width</code> in xml with <code>setAdjustViewBounds(true)</code> in java code to simplify measuring calculations.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;com.example.game.HotWaterTank\n    android:id=&quot;@+id/tank&quot;\n    android:layout_width=&quot;100dp&quot;\n    android:layout_height=&quot;wrap_content&quot; /&gt;\n</code></pre>\n<p>Here the <code>HotWaterTank</code> class</p>\n<pre class=\"lang-java prettyprint-override\"><code>import android.content.Context;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.graphics.Rect;\nimport android.util.AttributeSet;\n\nimport androidx.appcompat.widget.AppCompatImageView;\n\npublic class HotWaterTank extends AppCompatImageView {\n    private Paint mPaint;\n    private Rect mRect;\n    private int mColor = Color.parseColor(&quot;#327bff&quot;);\n\n    private float percentage = 0f;\n\n    public HotWaterTank(Context context) {\n        this(context, null);\n    }\n\n    public HotWaterTank(Context context, AttributeSet attrs) {\n        this(context, attrs, 0);\n    }\n\n    public HotWaterTank(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n\n        if (attrs != null) {\n            final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\n            hotWaterColor = a.getColor(R.styleable.Thermometer_therm_color, hotWaterColor);\n            a.recycle();\n        }\n\n        init();\n    }\n\n    private void init() {\n        mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n        mPaint.setColor(mColor);\n        mPaint.setStyle(Paint.Style.FILL);\n\n        mRect = new Rect();\n\n        setAdjustViewBounds(true);\n        setImageResource(R.drawable.hot_water_tank_container);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n\n        mRect.set(0, 0, w, h);\n        mRect.inset((int) (0.085f * w), (int) (0.18f * h)); /* can be refine more */\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n\n        float top = mRect.bottom - (mRect.height() * percentage);\n        canvas.drawRect(mRect.left, top, mRect.right, mRect.bottom, mPaint);\n    }\n\n    public void changeVolumeBar(float percentage) {\n        this.percentage = percentage;\n        invalidate();\n    }\n}\n\n</code></pre>\n<p><strong>Shot:</strong>\n<a href=\"https://i.stack.imgur.com/BmMpn.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BmMpn.gif\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":277,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75967754,"answer_count":2,"score":0,"last_activity_date":1682278469,"creation_date":1680304206,"question_id":75903378,"body_markdown":"I have a strange problem. I spent quite some time designing a self-made canvas view in Android which should be a water tank (that is the rim which insert via `R.drawable.hot_water_tank_container`) and then there is also a blue bar inside the rim which depicts the water. \r\n\r\nI have been using this for many months and everything worked correct. The blue bar was always being displayed inside the water tank rim (and even drawing operations to decrease or increase the size of the water bar were all within the boundaries).\r\n\r\nNow all of a sudden (without knowingly having changed anything), the blue bar is not displayed anymore at the correct position. Further, the size of the water tank was (autmatically?) decreased somehow. I tested it on many emulators and on real devices. What makes it also strange is that on the layout editor, the self-made canvas view looks totally correct (the blue bar is within the rims and also the size is bigger).\r\n\r\nCan anyone think about a reason as to why this is happening and how to fix it?\r\n\r\nHere is the screenshot from the Layout Editor:\r\n[![enter image description here][1]][1]\r\n\r\nHere is the screenshot from the Emulator:\r\n[![enter image description here][2]][2]\r\n\r\nHere is the XML layout file of the displaying fragment:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/constraintLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n    \r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n    \r\n        &lt;com.example.game.HotWaterTank\r\n            android:id=&quot;@+id/hotWaterTank&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.3&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.529&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.895&quot;\r\n            app:layout_constraintWidth_percent=&quot;0.15&quot; /&gt;\r\n    \r\n    \r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/button_action&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:text=&quot;Action&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.102&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.373&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.745&quot;\r\n            app:layout_constraintWidth_percent=&quot;0.13&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\nHere is the Java file of the self-made water tank canvas view:\r\n\r\n    package com.example.game;\r\n    \r\n    import android.content.Context;\r\n    import android.content.res.TypedArray;\r\n    import android.graphics.Bitmap;\r\n    import android.graphics.BitmapFactory;\r\n    import android.graphics.Canvas;\r\n    import android.graphics.Color;\r\n    import android.graphics.Paint;\r\n    import android.util.AttributeSet;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    \r\n    public class HotWaterTank extends View {\r\n        private Paint mInnerCirclePaint;\r\n        private int innerCircleCenter;\r\n        private int hotWaterColor = Color.parseColor(&quot;#327bff&quot;);\r\n        private Bitmap bitmap;\r\n        private int left;\r\n        private int top;\r\n    \r\n        private int lineEndY;\r\n        private int lineStartY;\r\n    \r\n    \r\n        /*\r\n        Set the variables for the positions of the water bar\r\n         */\r\n    \r\n        double positionOfWaterBar = 0.5;\r\n    \r\n        //0.607= empty, - 0.04 = full,\r\n        final double value_positionOfWaterBar_Empty = 0.607;\r\n        final double value_positionOfWaterBar_Full = -0.04;\r\n    \r\n        final double value_positionOfWaterBar_upperLimit = -0.08;\r\n        final double value_positionOfWaterBar_lowerLimit = 0.61;\r\n    \r\n        public HotWaterTank(Context context) {\r\n            this(context, null);\r\n        }\r\n    \r\n        public HotWaterTank(Context context, AttributeSet attrs) {\r\n            this(context, attrs, 0);\r\n        }\r\n    \r\n        public HotWaterTank(Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n    \r\n            if (attrs != null) {\r\n    \r\n                final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\r\n    \r\n                hotWaterColor = a.getColor(R.styleable.Thermometer_therm_color, hotWaterColor);\r\n    \r\n                a.recycle();\r\n            }\r\n    \r\n            init();\r\n        }\r\n    \r\n        private void init() {\r\n            mInnerCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\r\n            mInnerCirclePaint.setColor(hotWaterColor);\r\n            mInnerCirclePaint.setStyle(Paint.Style.FILL);\r\n    \r\n    \r\n    \r\n            bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.hot_water_tank_container);\r\n        }\r\n    \r\n        @Override\r\n        protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n            super.onSizeChanged(w, h, oldw, oldh);\r\n    \r\n            // init bitmap\r\n            int scaledHeight;\r\n            int scaledWidth;\r\n            int width = getWidth();\r\n            int height = getHeight();\r\n            if (width &gt; height) {\r\n                scaledHeight = (int) (height * 0.5);\r\n                scaledWidth = scaledHeight * bitmap.getWidth() / bitmap.getHeight();\r\n            } else {\r\n                scaledWidth = (int) (width * 0.5);\r\n                scaledHeight = scaledWidth * bitmap.getHeight() / bitmap.getWidth();\r\n            }\r\n            mInnerCirclePaint.setStrokeWidth( (float) (scaledWidth * 0.9));\r\n    \r\n            bitmap = Bitmap.createScaledBitmap(bitmap, scaledWidth, scaledHeight, true);\r\n    \r\n            innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72));\r\n    \r\n            left = (getWidth() - bitmap.getWidth()) / 2;\r\n            top = (getHeight() - bitmap.getHeight()) / 2;\r\n    \r\n    \r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\r\n            //lineStartY = (int)(4.4*((int)(bitmap.getHeight() / 4.6f) + top));\r\n            //lineEndY = (int)(1.0* ((top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f)));\r\n        }\r\n    \r\n        @Override\r\n        protected void onDraw(Canvas canvas) {\r\n            super.onDraw(canvas);\r\n    \r\n            drawThermometer(canvas);\r\n        }\r\n    \r\n    \r\n        @Override\r\n        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n    \r\n            //takes care of paddingTop and paddingBottom\r\n            int paddingY = getPaddingBottom() + getPaddingTop();\r\n    \r\n            //get height and width\r\n            int width = MeasureSpec.getSize(widthMeasureSpec);\r\n            int height = MeasureSpec.getSize(heightMeasureSpec);\r\n    \r\n            height += paddingY;\r\n    \r\n            setMeasuredDimension(width, height);\r\n        }\r\n    \r\n        private void drawThermometer(Canvas canvas) {\r\n    \r\n            canvas.drawLine(innerCircleCenter , lineStartY, innerCircleCenter, lineEndY, mInnerCirclePaint);\r\n            canvas.drawBitmap(bitmap, left, top, new Paint());\r\n        }\r\n    \r\n        public void setThermometerColor(int thermometerColor) {\r\n            this.hotWaterColor = thermometerColor;\r\n            mInnerCirclePaint.setColor(hotWaterColor);\r\n            invalidate();\r\n        }\r\n    \r\n        public void changeVolumeBar( double percentageChangeOfTheWholeBar) {\r\n            double appliedPercentageChangeOfTheWholeBar = percentageChangeOfTheWholeBar / 100;\r\n            if (appliedPercentageChangeOfTheWholeBar&gt;1) {\r\n                appliedPercentageChangeOfTheWholeBar = 1;\r\n            }\r\n            if (appliedPercentageChangeOfTheWholeBar &lt;-1) {\r\n                appliedPercentageChangeOfTheWholeBar = -1;\r\n            }\r\n    \r\n    \r\n            double absolutValueSpanForTheWholeBar = value_positionOfWaterBar_Full - value_positionOfWaterBar_Empty;\r\n    \r\n            positionOfWaterBar = positionOfWaterBar + appliedPercentageChangeOfTheWholeBar * absolutValueSpanForTheWholeBar;\r\n            if (positionOfWaterBar &lt; value_positionOfWaterBar_upperLimit) {\r\n                positionOfWaterBar = value_positionOfWaterBar_upperLimit;\r\n            }\r\n    \r\n            if(positionOfWaterBar &gt; value_positionOfWaterBar_lowerLimit) {\r\n                positionOfWaterBar = value_positionOfWaterBar_lowerLimit;\r\n            }\r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\r\n        }\r\n    \r\n        public void setVolumeBarPosition( double percentageOfTheWholeVolume) {\r\n            double appliedVolume = percentageOfTheWholeVolume;\r\n            if (appliedVolume &lt; 0) {\r\n                appliedVolume = 0;\r\n            }\r\n            if (appliedVolume &gt;100) {\r\n                appliedVolume = 100;\r\n            }\r\n    \r\n            double absolutValueSpanForTheWholeBar = value_positionOfWaterBar_Full - value_positionOfWaterBar_Empty;\r\n    \r\n            positionOfWaterBar = value_positionOfWaterBar_Empty + (appliedVolume/100 )  * absolutValueSpanForTheWholeBar;\r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\r\n        }\r\n    \r\n    \r\n    \r\n    }\r\n\r\n**Update**:\r\n\r\nI inserted as suggested in one answer:\r\n\r\n    innerCircleCenter = left + (bitmap.getWidth() / 2)\r\n    mInnerCirclePaint.setStrokeWidth((float) (scaledWidth * 0.5))\r\n\r\nbut the result is even worse as you can see on this sceenshot:\r\n[![enter image description here][3]][3]\r\n\r\nAs requested here is the hot water tank container file:\r\n[![enter image description here][4]][4]\r\n\r\n\r\n**Update 2**: Here is the new Java class or the Hot Water Tank with the new `onMeasure` method:\r\n\r\n    package com.example.game;\r\n    \r\n    import android.content.Context;\r\n    import android.content.res.TypedArray;\r\n    import android.graphics.Bitmap;\r\n    import android.graphics.BitmapFactory;\r\n    import android.graphics.Canvas;\r\n    import android.graphics.Color;\r\n    import android.graphics.Paint;\r\n    import android.util.AttributeSet;\r\n    import android.view.View;\r\n    \r\n    public class HotWaterTank extends View {\r\n        private Paint mInnerCirclePaint;\r\n        private int innerCircleCenter;\r\n        private int hotWaterColor = Color.parseColor(&quot;#327bff&quot;);\r\n        private Bitmap bitmap;\r\n        private int left;\r\n        private int top;\r\n    \r\n        private int lineEndY;\r\n        private int lineStartY;\r\n    \r\n    \r\n        /*\r\n        Set the variables for the positions of the water bar\r\n         */\r\n    \r\n        double positionOfWaterBar = 0.5;\r\n    \r\n        //0.607= empty, - 0.04 = full,\r\n        final double value_positionOfWaterBar_Empty = 0.607;\r\n        final double value_positionOfWaterBar_Full = -0.04;\r\n    \r\n        final double value_positionOfWaterBar_upperLimit = -0.08;\r\n        final double value_positionOfWaterBar_lowerLimit = 0.61;\r\n    \r\n        public HotWaterTank(Context context) {\r\n            this(context, null);\r\n        }\r\n    \r\n        public HotWaterTank(Context context, AttributeSet attrs) {\r\n            this(context, attrs, 0);\r\n        }\r\n    \r\n        public HotWaterTank(Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n    \r\n            if (attrs != null) {\r\n    \r\n                final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\r\n    \r\n                hotWaterColor = a.getColor(R.styleable.Thermometer_therm_color, hotWaterColor);\r\n    \r\n                a.recycle();\r\n            }\r\n    \r\n            init();\r\n        }\r\n    \r\n        private void init() {\r\n            mInnerCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\r\n            mInnerCirclePaint.setColor(hotWaterColor);\r\n            mInnerCirclePaint.setStyle(Paint.Style.FILL);\r\n    \r\n    \r\n    \r\n            bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.hot_water_tank_container);\r\n        }\r\n    \r\n        @Override\r\n        protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n            super.onSizeChanged(w, h, oldw, oldh);\r\n    \r\n            // init bitmap\r\n            int scaledHeight;\r\n            int scaledWidth;\r\n            int width = getWidth();\r\n            int height = getHeight();\r\n            if (width &gt; height) {\r\n                scaledHeight = (int) (height * 0.5);\r\n                scaledWidth = scaledHeight * bitmap.getWidth() / bitmap.getHeight();\r\n            } else {\r\n                scaledWidth = (int) (width * 0.5);\r\n                scaledHeight = scaledWidth * bitmap.getHeight() / bitmap.getWidth();\r\n            }\r\n            mInnerCirclePaint.setStrokeWidth( (float) (scaledWidth * 0.9));\r\n    \r\n            bitmap = Bitmap.createScaledBitmap(bitmap, scaledWidth, scaledHeight, true);\r\n    \r\n            //innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72));\r\n            innerCircleCenter = getWidth() / 2;\r\n    \r\n            left = (getWidth() - bitmap.getWidth()) / 2;\r\n            top = (getHeight() - bitmap.getHeight()) / 2;\r\n    \r\n    \r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\r\n            //lineStartY = (int)(4.4*((int)(bitmap.getHeight() / 4.6f) + top));\r\n            //lineEndY = (int)(1.0* ((top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f)));\r\n        }\r\n    \r\n        @Override\r\n        protected void onDraw(Canvas canvas) {\r\n            super.onDraw(canvas);\r\n    \r\n            drawThermometer(canvas);\r\n        }\r\n    \r\n    \r\n        @Override\r\n        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n    \r\n            // the actual dimensions of your water tank image\r\n            // these are just here to set the aspect ratio and the &#39;max&#39; dimensions (we will make it smaller in the xml)\r\n            int desiredWidth = 421;\r\n            int desiredHeight = 693;\r\n    \r\n            // takes care of paddingTop and paddingBottom\r\n            int paddingY = getPaddingBottom() + getPaddingTop();\r\n    \r\n            int widthMode = MeasureSpec.getMode(widthMeasureSpec);\r\n            int widthSize = MeasureSpec.getSize(widthMeasureSpec);\r\n            int heightMode = MeasureSpec.getMode(heightMeasureSpec);\r\n            int heightSize = MeasureSpec.getSize(heightMeasureSpec);\r\n    \r\n            int width;\r\n            int height;\r\n    \r\n            //Measure Width\r\n            if (widthMode == MeasureSpec.EXACTLY) {\r\n                //Must be this size\r\n                width = widthSize;\r\n            } else if (widthMode == MeasureSpec.AT_MOST) {\r\n                //Can&#39;t be bigger than...\r\n                width = Math.min(desiredWidth, widthSize);\r\n            } else {\r\n                //Be whatever you want\r\n                width = desiredWidth;\r\n            }\r\n    \r\n            //Measure Height\r\n            if (heightMode == MeasureSpec.EXACTLY) {\r\n                //Must be this size\r\n                height = heightSize;\r\n            } else if (heightMode == MeasureSpec.AT_MOST) {\r\n                //Can&#39;t be bigger than...\r\n                height = Math.min(desiredHeight, heightSize);\r\n            } else {\r\n                //Be whatever you want\r\n                height = desiredHeight;\r\n            }\r\n            height += paddingY;\r\n    \r\n            setMeasuredDimension(width, height);\r\n        }\r\n    \r\n        private void drawThermometer(Canvas canvas) {\r\n    \r\n            canvas.drawLine(innerCircleCenter , lineStartY, innerCircleCenter, lineEndY, mInnerCirclePaint);\r\n            canvas.drawBitmap(bitmap, left, top, new Paint());\r\n        }\r\n    \r\n        public void setThermometerColor(int thermometerColor) {\r\n            this.hotWaterColor = thermometerColor;\r\n            mInnerCirclePaint.setColor(hotWaterColor);\r\n            invalidate();\r\n        }\r\n    \r\n        public void changeVolumeBar( double percentageChangeOfTheWholeBar) {\r\n            double appliedPercentageChangeOfTheWholeBar = percentageChangeOfTheWholeBar / 100;\r\n            if (appliedPercentageChangeOfTheWholeBar&gt;1) {\r\n                appliedPercentageChangeOfTheWholeBar = 1;\r\n            }\r\n            if (appliedPercentageChangeOfTheWholeBar &lt;-1) {\r\n                appliedPercentageChangeOfTheWholeBar = -1;\r\n            }\r\n    \r\n    \r\n            double absolutValueSpanForTheWholeBar = value_positionOfWaterBar_Full - value_positionOfWaterBar_Empty;\r\n    \r\n            positionOfWaterBar = positionOfWaterBar + appliedPercentageChangeOfTheWholeBar * absolutValueSpanForTheWholeBar;\r\n            if (positionOfWaterBar &lt; value_positionOfWaterBar_upperLimit) {\r\n                positionOfWaterBar = value_positionOfWaterBar_upperLimit;\r\n            }\r\n    \r\n            if(positionOfWaterBar &gt; value_positionOfWaterBar_lowerLimit) {\r\n                positionOfWaterBar = value_positionOfWaterBar_lowerLimit;\r\n            }\r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\r\n        }\r\n    \r\n        public void setVolumeBarPosition( double percentageOfTheWholeVolume) {\r\n            double appliedVolume = percentageOfTheWholeVolume;\r\n            if (appliedVolume &lt; 0) {\r\n                appliedVolume = 0;\r\n            }\r\n            if (appliedVolume &gt;100) {\r\n                appliedVolume = 100;\r\n            }\r\n    \r\n            double absolutValueSpanForTheWholeBar = value_positionOfWaterBar_Full - value_positionOfWaterBar_Empty;\r\n    \r\n            positionOfWaterBar = value_positionOfWaterBar_Empty + (appliedVolume/100 )  * absolutValueSpanForTheWholeBar;\r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\r\n        }\r\n    \r\n    \r\n    \r\n    }\r\n\r\nAnd here the XML layout file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/constraintLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n    \r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n    \r\n        &lt;com.example.game.HotWaterTank\r\n            android:id=&quot;@+id/hotWaterTank&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.3&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.529&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.895&quot;\r\n     /&gt;\r\n    \r\n    \r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/button_action&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:text=&quot;Action&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.102&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.373&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.745&quot;\r\n            app:layout_constraintWidth_percent=&quot;0.13&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\nThe problem is that once you set `android:layout_width=&quot;wrap_content&quot;`the layout of the views stratches to the boundaries of the display such that you can&#39;t position the View element precicesily any more, as you can see on this screenshot:\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/D64tP.png\r\n  [2]: https://i.stack.imgur.com/F1r72.png\r\n  [3]: https://i.stack.imgur.com/m9wh9.png\r\n  [4]: https://i.stack.imgur.com/S4xds.png\r\n  [5]: https://i.stack.imgur.com/mG72x.png","title":"Self-made canvas view in Android is not correctly displayed (any more)","body":"<p>I have a strange problem. I spent quite some time designing a self-made canvas view in Android which should be a water tank (that is the rim which insert via <code>R.drawable.hot_water_tank_container</code>) and then there is also a blue bar inside the rim which depicts the water.</p>\n<p>I have been using this for many months and everything worked correct. The blue bar was always being displayed inside the water tank rim (and even drawing operations to decrease or increase the size of the water bar were all within the boundaries).</p>\n<p>Now all of a sudden (without knowingly having changed anything), the blue bar is not displayed anymore at the correct position. Further, the size of the water tank was (autmatically?) decreased somehow. I tested it on many emulators and on real devices. What makes it also strange is that on the layout editor, the self-made canvas view looks totally correct (the blue bar is within the rims and also the size is bigger).</p>\n<p>Can anyone think about a reason as to why this is happening and how to fix it?</p>\n<p>Here is the screenshot from the Layout Editor:\n<a href=\"https://i.stack.imgur.com/D64tP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D64tP.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the screenshot from the Emulator:\n<a href=\"https://i.stack.imgur.com/F1r72.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F1r72.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the XML layout file of the displaying fragment:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/constraintLayout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n\n    &lt;com.example.game.HotWaterTank\n        android:id=&quot;@+id/hotWaterTank&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.3&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.529&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.895&quot;\n        app:layout_constraintWidth_percent=&quot;0.15&quot; /&gt;\n\n\n\n    &lt;Button\n        android:id=&quot;@+id/button_action&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:text=&quot;Action&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.102&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.373&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.745&quot;\n        app:layout_constraintWidth_percent=&quot;0.13&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Here is the Java file of the self-made water tank canvas view:</p>\n<pre><code>package com.example.game;\n\nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.util.AttributeSet;\nimport android.util.Log;\nimport android.view.View;\n\npublic class HotWaterTank extends View {\n    private Paint mInnerCirclePaint;\n    private int innerCircleCenter;\n    private int hotWaterColor = Color.parseColor(&quot;#327bff&quot;);\n    private Bitmap bitmap;\n    private int left;\n    private int top;\n\n    private int lineEndY;\n    private int lineStartY;\n\n\n    /*\n    Set the variables for the positions of the water bar\n     */\n\n    double positionOfWaterBar = 0.5;\n\n    //0.607= empty, - 0.04 = full,\n    final double value_positionOfWaterBar_Empty = 0.607;\n    final double value_positionOfWaterBar_Full = -0.04;\n\n    final double value_positionOfWaterBar_upperLimit = -0.08;\n    final double value_positionOfWaterBar_lowerLimit = 0.61;\n\n    public HotWaterTank(Context context) {\n        this(context, null);\n    }\n\n    public HotWaterTank(Context context, AttributeSet attrs) {\n        this(context, attrs, 0);\n    }\n\n    public HotWaterTank(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n\n        if (attrs != null) {\n\n            final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\n\n            hotWaterColor = a.getColor(R.styleable.Thermometer_therm_color, hotWaterColor);\n\n            a.recycle();\n        }\n\n        init();\n    }\n\n    private void init() {\n        mInnerCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n        mInnerCirclePaint.setColor(hotWaterColor);\n        mInnerCirclePaint.setStyle(Paint.Style.FILL);\n\n\n\n        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.hot_water_tank_container);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n\n        // init bitmap\n        int scaledHeight;\n        int scaledWidth;\n        int width = getWidth();\n        int height = getHeight();\n        if (width &gt; height) {\n            scaledHeight = (int) (height * 0.5);\n            scaledWidth = scaledHeight * bitmap.getWidth() / bitmap.getHeight();\n        } else {\n            scaledWidth = (int) (width * 0.5);\n            scaledHeight = scaledWidth * bitmap.getHeight() / bitmap.getWidth();\n        }\n        mInnerCirclePaint.setStrokeWidth( (float) (scaledWidth * 0.9));\n\n        bitmap = Bitmap.createScaledBitmap(bitmap, scaledWidth, scaledHeight, true);\n\n        innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72));\n\n        left = (getWidth() - bitmap.getWidth()) / 2;\n        top = (getHeight() - bitmap.getHeight()) / 2;\n\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\n        //lineStartY = (int)(4.4*((int)(bitmap.getHeight() / 4.6f) + top));\n        //lineEndY = (int)(1.0* ((top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f)));\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n\n        drawThermometer(canvas);\n    }\n\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n\n        //takes care of paddingTop and paddingBottom\n        int paddingY = getPaddingBottom() + getPaddingTop();\n\n        //get height and width\n        int width = MeasureSpec.getSize(widthMeasureSpec);\n        int height = MeasureSpec.getSize(heightMeasureSpec);\n\n        height += paddingY;\n\n        setMeasuredDimension(width, height);\n    }\n\n    private void drawThermometer(Canvas canvas) {\n\n        canvas.drawLine(innerCircleCenter , lineStartY, innerCircleCenter, lineEndY, mInnerCirclePaint);\n        canvas.drawBitmap(bitmap, left, top, new Paint());\n    }\n\n    public void setThermometerColor(int thermometerColor) {\n        this.hotWaterColor = thermometerColor;\n        mInnerCirclePaint.setColor(hotWaterColor);\n        invalidate();\n    }\n\n    public void changeVolumeBar( double percentageChangeOfTheWholeBar) {\n        double appliedPercentageChangeOfTheWholeBar = percentageChangeOfTheWholeBar / 100;\n        if (appliedPercentageChangeOfTheWholeBar&gt;1) {\n            appliedPercentageChangeOfTheWholeBar = 1;\n        }\n        if (appliedPercentageChangeOfTheWholeBar &lt;-1) {\n            appliedPercentageChangeOfTheWholeBar = -1;\n        }\n\n\n        double absolutValueSpanForTheWholeBar = value_positionOfWaterBar_Full - value_positionOfWaterBar_Empty;\n\n        positionOfWaterBar = positionOfWaterBar + appliedPercentageChangeOfTheWholeBar * absolutValueSpanForTheWholeBar;\n        if (positionOfWaterBar &lt; value_positionOfWaterBar_upperLimit) {\n            positionOfWaterBar = value_positionOfWaterBar_upperLimit;\n        }\n\n        if(positionOfWaterBar &gt; value_positionOfWaterBar_lowerLimit) {\n            positionOfWaterBar = value_positionOfWaterBar_lowerLimit;\n        }\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\n    }\n\n    public void setVolumeBarPosition( double percentageOfTheWholeVolume) {\n        double appliedVolume = percentageOfTheWholeVolume;\n        if (appliedVolume &lt; 0) {\n            appliedVolume = 0;\n        }\n        if (appliedVolume &gt;100) {\n            appliedVolume = 100;\n        }\n\n        double absolutValueSpanForTheWholeBar = value_positionOfWaterBar_Full - value_positionOfWaterBar_Empty;\n\n        positionOfWaterBar = value_positionOfWaterBar_Empty + (appliedVolume/100 )  * absolutValueSpanForTheWholeBar;\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\n    }\n\n\n\n}\n</code></pre>\n<p><strong>Update</strong>:</p>\n<p>I inserted as suggested in one answer:</p>\n<pre><code>innerCircleCenter = left + (bitmap.getWidth() / 2)\nmInnerCirclePaint.setStrokeWidth((float) (scaledWidth * 0.5))\n</code></pre>\n<p>but the result is even worse as you can see on this sceenshot:\n<a href=\"https://i.stack.imgur.com/m9wh9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m9wh9.png\" alt=\"enter image description here\" /></a></p>\n<p>As requested here is the hot water tank container file:\n<a href=\"https://i.stack.imgur.com/S4xds.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S4xds.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Update 2</strong>: Here is the new Java class or the Hot Water Tank with the new <code>onMeasure</code> method:</p>\n<pre><code>package com.example.game;\n\nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.util.AttributeSet;\nimport android.view.View;\n\npublic class HotWaterTank extends View {\n    private Paint mInnerCirclePaint;\n    private int innerCircleCenter;\n    private int hotWaterColor = Color.parseColor(&quot;#327bff&quot;);\n    private Bitmap bitmap;\n    private int left;\n    private int top;\n\n    private int lineEndY;\n    private int lineStartY;\n\n\n    /*\n    Set the variables for the positions of the water bar\n     */\n\n    double positionOfWaterBar = 0.5;\n\n    //0.607= empty, - 0.04 = full,\n    final double value_positionOfWaterBar_Empty = 0.607;\n    final double value_positionOfWaterBar_Full = -0.04;\n\n    final double value_positionOfWaterBar_upperLimit = -0.08;\n    final double value_positionOfWaterBar_lowerLimit = 0.61;\n\n    public HotWaterTank(Context context) {\n        this(context, null);\n    }\n\n    public HotWaterTank(Context context, AttributeSet attrs) {\n        this(context, attrs, 0);\n    }\n\n    public HotWaterTank(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n\n        if (attrs != null) {\n\n            final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\n\n            hotWaterColor = a.getColor(R.styleable.Thermometer_therm_color, hotWaterColor);\n\n            a.recycle();\n        }\n\n        init();\n    }\n\n    private void init() {\n        mInnerCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n        mInnerCirclePaint.setColor(hotWaterColor);\n        mInnerCirclePaint.setStyle(Paint.Style.FILL);\n\n\n\n        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.hot_water_tank_container);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n\n        // init bitmap\n        int scaledHeight;\n        int scaledWidth;\n        int width = getWidth();\n        int height = getHeight();\n        if (width &gt; height) {\n            scaledHeight = (int) (height * 0.5);\n            scaledWidth = scaledHeight * bitmap.getWidth() / bitmap.getHeight();\n        } else {\n            scaledWidth = (int) (width * 0.5);\n            scaledHeight = scaledWidth * bitmap.getHeight() / bitmap.getWidth();\n        }\n        mInnerCirclePaint.setStrokeWidth( (float) (scaledWidth * 0.9));\n\n        bitmap = Bitmap.createScaledBitmap(bitmap, scaledWidth, scaledHeight, true);\n\n        //innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72));\n        innerCircleCenter = getWidth() / 2;\n\n        left = (getWidth() - bitmap.getWidth()) / 2;\n        top = (getHeight() - bitmap.getHeight()) / 2;\n\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\n        //lineStartY = (int)(4.4*((int)(bitmap.getHeight() / 4.6f) + top));\n        //lineEndY = (int)(1.0* ((top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f)));\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n\n        drawThermometer(canvas);\n    }\n\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n\n        // the actual dimensions of your water tank image\n        // these are just here to set the aspect ratio and the 'max' dimensions (we will make it smaller in the xml)\n        int desiredWidth = 421;\n        int desiredHeight = 693;\n\n        // takes care of paddingTop and paddingBottom\n        int paddingY = getPaddingBottom() + getPaddingTop();\n\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\n\n        int width;\n        int height;\n\n        //Measure Width\n        if (widthMode == MeasureSpec.EXACTLY) {\n            //Must be this size\n            width = widthSize;\n        } else if (widthMode == MeasureSpec.AT_MOST) {\n            //Can't be bigger than...\n            width = Math.min(desiredWidth, widthSize);\n        } else {\n            //Be whatever you want\n            width = desiredWidth;\n        }\n\n        //Measure Height\n        if (heightMode == MeasureSpec.EXACTLY) {\n            //Must be this size\n            height = heightSize;\n        } else if (heightMode == MeasureSpec.AT_MOST) {\n            //Can't be bigger than...\n            height = Math.min(desiredHeight, heightSize);\n        } else {\n            //Be whatever you want\n            height = desiredHeight;\n        }\n        height += paddingY;\n\n        setMeasuredDimension(width, height);\n    }\n\n    private void drawThermometer(Canvas canvas) {\n\n        canvas.drawLine(innerCircleCenter , lineStartY, innerCircleCenter, lineEndY, mInnerCirclePaint);\n        canvas.drawBitmap(bitmap, left, top, new Paint());\n    }\n\n    public void setThermometerColor(int thermometerColor) {\n        this.hotWaterColor = thermometerColor;\n        mInnerCirclePaint.setColor(hotWaterColor);\n        invalidate();\n    }\n\n    public void changeVolumeBar( double percentageChangeOfTheWholeBar) {\n        double appliedPercentageChangeOfTheWholeBar = percentageChangeOfTheWholeBar / 100;\n        if (appliedPercentageChangeOfTheWholeBar&gt;1) {\n            appliedPercentageChangeOfTheWholeBar = 1;\n        }\n        if (appliedPercentageChangeOfTheWholeBar &lt;-1) {\n            appliedPercentageChangeOfTheWholeBar = -1;\n        }\n\n\n        double absolutValueSpanForTheWholeBar = value_positionOfWaterBar_Full - value_positionOfWaterBar_Empty;\n\n        positionOfWaterBar = positionOfWaterBar + appliedPercentageChangeOfTheWholeBar * absolutValueSpanForTheWholeBar;\n        if (positionOfWaterBar &lt; value_positionOfWaterBar_upperLimit) {\n            positionOfWaterBar = value_positionOfWaterBar_upperLimit;\n        }\n\n        if(positionOfWaterBar &gt; value_positionOfWaterBar_lowerLimit) {\n            positionOfWaterBar = value_positionOfWaterBar_lowerLimit;\n        }\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\n    }\n\n    public void setVolumeBarPosition( double percentageOfTheWholeVolume) {\n        double appliedVolume = percentageOfTheWholeVolume;\n        if (appliedVolume &lt; 0) {\n            appliedVolume = 0;\n        }\n        if (appliedVolume &gt;100) {\n            appliedVolume = 100;\n        }\n\n        double absolutValueSpanForTheWholeBar = value_positionOfWaterBar_Full - value_positionOfWaterBar_Empty;\n\n        positionOfWaterBar = value_positionOfWaterBar_Empty + (appliedVolume/100 )  * absolutValueSpanForTheWholeBar;\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfWaterBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\n    }\n\n\n\n}\n</code></pre>\n<p>And here the XML layout file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/constraintLayout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n\n    &lt;com.example.game.HotWaterTank\n        android:id=&quot;@+id/hotWaterTank&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;0dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.3&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.529&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.895&quot;\n /&gt;\n\n\n\n    &lt;Button\n        android:id=&quot;@+id/button_action&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:text=&quot;Action&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.102&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.373&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.745&quot;\n        app:layout_constraintWidth_percent=&quot;0.13&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>The problem is that once you set <code>android:layout_width=&quot;wrap_content&quot;</code>the layout of the views stratches to the boundaries of the display such that you can't position the View element precicesily any more, as you can see on this screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/mG72x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mG72x.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-data","r2dbc"],"comments":[{"owner":{"account_id":26113553,"reputation":196,"user_id":20333579,"display_name":"codeapplied"},"score":0,"creation_date":1681732662,"post_id":76017466,"comment_id":134099029,"body_markdown":"did you try to use &#39;join&#39; operator ? of multiple reactive queries into a single response","body":"did you try to use &#39;join&#39; operator ? of multiple reactive queries into a single response"}],"owner":{"account_id":271918,"reputation":839,"user_id":562714,"accept_rate":25,"display_name":"Harsha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682278024,"creation_date":1681491943,"question_id":76017466,"body_markdown":"How to implement the following in a r2dbc . \r\n\r\n I have an entity CatalogItem which internally references CatalogType and CatalogBrand. Since reactive doesn&#39;t have support for JPA, one of the choice is Spring data r2dbc. I want to fetch a paged List of CatalogItems along with CatalogTypeName &amp; CatalogBrandName but in a non blocking way.\r\n\r\nOne idea was to fetch the 3 tables data separately, iterating over them and populating the CatalogBrandName &amp; CatalogTypeName. But i don&#39;t know how to do this in a non blocking manner using reactor.\r\n\r\n Any ideas are welcome.\r\n\r\n","title":"fetching paginated data from related entities using Spring Data R2dbc","body":"<p>How to implement the following in a r2dbc .</p>\n<p>I have an entity CatalogItem which internally references CatalogType and CatalogBrand. Since reactive doesn't have support for JPA, one of the choice is Spring data r2dbc. I want to fetch a paged List of CatalogItems along with CatalogTypeName &amp; CatalogBrandName but in a non blocking way.</p>\n<p>One idea was to fetch the 3 tables data separately, iterating over them and populating the CatalogBrandName &amp; CatalogTypeName. But i don't know how to do this in a non blocking manner using reactor.</p>\n<p>Any ideas are welcome.</p>\n"},{"tags":["java","arraylist","histogram"],"owner":{"account_id":28390360,"reputation":1,"user_id":21716220,"display_name":"isabelgrace756"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682277457,"creation_date":1682276818,"question_id":76086741,"body_markdown":"I am doing a project where I take book ratings from a file, sort them by rating, and then create a histogram of asterisks for each rating. So basically if the list contains ratings from 3.8 to 4.6, the histogram displays 3.7 to 4.7 with asterisks for each book rated by that one. I have to print the labels and then the asterisks, and I&#39;ve tried everything it seems and nothing is working to display all the stars. Every time I run it, only one asterisk prints after one rating so I&#39;m not sure what the issue is! I would appreciate all the help I can get!\r\n\r\n```\r\npublic static void histogram(ArrayList &lt;Double&gt; theList) {\r\nSystem.out.println(&quot;Histogram of Amazon Bestseller Ratings&quot;);\r\nSystem.out.println(&quot;--------------------------------------&quot;);\r\ndouble num = theList.get(0) - 0.10;\r\nStringBuilder str = new StringBuilder();\r\n    for (double i = num; i &lt; theList.get(theList.size() - 1) + 0.10; i += 0.10) { //iterate thru labels\r\n    System.out.printf(&quot;%.1f &quot;, i);\r\n        for (int j = 0; j &lt; theList.size(); ++j) { // iterates thru list of ratings\r\n            if (theList.get(j) == i) {\r\n                System.out.print(&quot;*&quot;);\r\n                }\r\n            }\r\n        System.out.println();\r\n        }\r\n      System.out.println(&quot;--------------------------------------&quot;);\r\n       }`\r\n```","title":"Java Histogram won&#39;t display all asterisks?","body":"<p>I am doing a project where I take book ratings from a file, sort them by rating, and then create a histogram of asterisks for each rating. So basically if the list contains ratings from 3.8 to 4.6, the histogram displays 3.7 to 4.7 with asterisks for each book rated by that one. I have to print the labels and then the asterisks, and I've tried everything it seems and nothing is working to display all the stars. Every time I run it, only one asterisk prints after one rating so I'm not sure what the issue is! I would appreciate all the help I can get!</p>\n<pre><code>public static void histogram(ArrayList &lt;Double&gt; theList) {\nSystem.out.println(&quot;Histogram of Amazon Bestseller Ratings&quot;);\nSystem.out.println(&quot;--------------------------------------&quot;);\ndouble num = theList.get(0) - 0.10;\nStringBuilder str = new StringBuilder();\n    for (double i = num; i &lt; theList.get(theList.size() - 1) + 0.10; i += 0.10) { //iterate thru labels\n    System.out.printf(&quot;%.1f &quot;, i);\n        for (int j = 0; j &lt; theList.size(); ++j) { // iterates thru list of ratings\n            if (theList.get(j) == i) {\n                System.out.print(&quot;*&quot;);\n                }\n            }\n        System.out.println();\n        }\n      System.out.println(&quot;--------------------------------------&quot;);\n       }`\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security-oauth2"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1677185407,"post_id":75549618,"comment_id":133293529,"body_markdown":"have you opened [the manual](https://docs.spring.io/spring-security/reference/)? Do you know if you want to configure a client (sending requests to access REST resources) or a resource-server (responding to those requests)?","body":"have you opened <a href=\"https://docs.spring.io/spring-security/reference/\" rel=\"nofollow noreferrer\">the manual</a>? Do you know if you want to configure a client (sending requests to access REST resources) or a resource-server (responding to those requests)?"},{"owner":{"account_id":5356701,"reputation":4065,"user_id":4269187,"display_name":"Carsten"},"score":0,"creation_date":1680509824,"post_id":75549618,"comment_id":133904528,"body_markdown":"@ch4mp this looks like the authorization-server. I&#39;m looking for the same answers.","body":"@ch4mp this looks like the authorization-server. I&#39;m looking for the same answers."},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1682277317,"post_id":75549618,"comment_id":134186155,"body_markdown":"Since Spring Security 5 OAuth 2 (client and resource server) is built-in. For authorisation server you need an additional dependency.","body":"Since Spring Security 5 OAuth 2 (client and resource server) is built-in. For authorisation server you need an additional dependency."}],"owner":{"account_id":26202900,"reputation":43,"user_id":19882964,"display_name":"user19882964"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":749,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1682277227,"creation_date":1677181455,"question_id":75549618,"body_markdown":"I have read a lot about this topic but I have not found a solution to whether to replace what was used or create new methods or if there is a new dependency that can help me, referring to the deprecation of OAuth2 and JWT security.\r\n\r\nI use methods like: \r\n\r\n```\r\nTokenStore \r\nOAuth2AuthenticationDetails\r\nOAuth2AccessToken\r\nDefaultTokenServices\r\nJwtAccessTokenConverter\r\nJwtTokenStore\r\n```\r\n\r\nthat helped me recover data from a session token, I don&#39;t know if there is any other dependency or other methods to recover this data?\r\n\r\n","title":"How to replace OAuth2 in Spring Boot 3?","body":"<p>I have read a lot about this topic but I have not found a solution to whether to replace what was used or create new methods or if there is a new dependency that can help me, referring to the deprecation of OAuth2 and JWT security.</p>\n<p>I use methods like:</p>\n<pre><code>TokenStore \nOAuth2AuthenticationDetails\nOAuth2AccessToken\nDefaultTokenServices\nJwtAccessTokenConverter\nJwtTokenStore\n</code></pre>\n<p>that helped me recover data from a session token, I don't know if there is any other dependency or other methods to recover this data?</p>\n"},{"tags":["java","variables","variable-assignment"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1682267359,"post_id":76085884,"comment_id":134184786,"body_markdown":"Sure it&#39;s valid. It&#39;s a declaration of 3 variables, one of which is initialized.","body":"Sure it&#39;s valid. It&#39;s a declaration of 3 variables, one of which is initialized."},{"owner":{"account_id":3211463,"reputation":638,"user_id":2711384,"display_name":"Zag"},"score":1,"creation_date":1682267370,"post_id":76085884,"comment_id":134184789,"body_markdown":"@Pshemo It will compile, but only because comma has a little-used syntactic meaning of evaluating both expressions and returning the last one.  It is sometimes used in for loops, such as `for (i = 1, j = 2; i &lt; max; i++, j++).`  In this situation, though, it makes no sense.","body":"@Pshemo It will compile, but only because comma has a little-used syntactic meaning of evaluating both expressions and returning the last one.  It is sometimes used in for loops, such as <code>for (i = 1, j = 2; i &lt; max; i++, j++).</code>  In this situation, though, it makes no sense."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":3,"creation_date":1682267605,"post_id":76085884,"comment_id":134184818,"body_markdown":"@Zag - I think you&#39;re confusing Java and C.  There is no &#39;comma operator&#39; in Java.  The example you give is specific to `for`, not general expression syntax. And it&#39;s a list of statement expressions, not expressions -- i.e., the list has no value.","body":"@Zag - I think you&#39;re confusing Java and C.  There is no &#39;comma operator&#39; in Java.  The example you give is specific to <code>for</code>, not general expression syntax. And it&#39;s a list of statement expressions, not expressions -- i.e., the list has no value."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1682269629,"post_id":76085884,"comment_id":134185083,"body_markdown":"@Zag I stand corrected, it can compile if we assume that `loanAmount` is variable that was already declared and is guaranteed to be initialized. Removed my previous comment.","body":"@Zag I stand corrected, it can compile if we assume that <code>loanAmount</code> is variable that was already declared and is guaranteed to be initialized. Removed my previous comment."}],"answers":[{"tags":[],"owner":{"account_id":20145147,"reputation":302,"user_id":14773854,"display_name":"user14773854"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682266326,"creation_date":1682266326,"answer_id":76085923,"question_id":76085884,"body_markdown":"You have not assigned the values of `principal` and `interest` to `balance` - only `loanAmount`. \r\n\r\nInstead you have created other variables `principal` and `interest` of type double. To perform multiple assignments, simply do:\r\n```\r\ndouble loanAmount, principal, interest;\r\ndouble balance = loanAmount = principal = interest;\r\n```\r\nEnsure that `loanAmount`, `principal` and `interest` are declared and initialized **earlier** before assignment.","title":"one variable with multi assignments in java","body":"<p>You have not assigned the values of <code>principal</code> and <code>interest</code> to <code>balance</code> - only <code>loanAmount</code>.</p>\n<p>Instead you have created other variables <code>principal</code> and <code>interest</code> of type double. To perform multiple assignments, simply do:</p>\n<pre><code>double loanAmount, principal, interest;\ndouble balance = loanAmount = principal = interest;\n</code></pre>\n<p>Ensure that <code>loanAmount</code>, <code>principal</code> and <code>interest</code> are declared and initialized <strong>earlier</strong> before assignment.</p>\n"},{"tags":[],"owner":{"account_id":26625299,"reputation":11,"user_id":20243438,"display_name":"Ambabo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682266928,"creation_date":1682266928,"answer_id":76085973,"question_id":76085884,"body_markdown":"you did not include the block of code which you declared a variable loanAmount, principal, and interest.\r\n\r\nSimple Exlanation is if calculating balance is what you want to achieve, you can try this code:\r\n\r\n        double loanAmount = 1000;\r\n        double principal = 1;\r\n        double interest = 5;\r\n        double balance = (loanAmaount * interest) * principal;\r\n\r\nsomething like that.\r\n        \r\n\r\n","title":"one variable with multi assignments in java","body":"<p>you did not include the block of code which you declared a variable loanAmount, principal, and interest.</p>\n<p>Simple Exlanation is if calculating balance is what you want to achieve, you can try this code:</p>\n<pre><code>    double loanAmount = 1000;\n    double principal = 1;\n    double interest = 5;\n    double balance = (loanAmaount * interest) * principal;\n</code></pre>\n<p>something like that.</p>\n"},{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682267959,"creation_date":1682267959,"answer_id":76086057,"question_id":76085884,"body_markdown":"The declaration is valid iff there is a prior declaration of loanAmount.\r\n\r\nPerhaps:  \r\n\r\n     void someFunction(double loanAmount) {\r\n         double balance = loanAmount,principal,interest;\r\n           :\r\n     }\r\n\r\nOr maybe\r\n\r\n     double loanAmount = 1234.56;\r\n     double balance = loanAmount,principal,interest;\r\n\r\nThe declaration is equivalent to\r\n\r\n     double balance = loanAmount;\r\n     double principal;\r\n     double interest;\r\n\r\n3 variables are declared; 1 of them is initialized.\r\n","title":"one variable with multi assignments in java","body":"<p>The declaration is valid iff there is a prior declaration of loanAmount.</p>\n<p>Perhaps:</p>\n<pre><code> void someFunction(double loanAmount) {\n     double balance = loanAmount,principal,interest;\n       :\n }\n</code></pre>\n<p>Or maybe</p>\n<pre><code> double loanAmount = 1234.56;\n double balance = loanAmount,principal,interest;\n</code></pre>\n<p>The declaration is equivalent to</p>\n<pre><code> double balance = loanAmount;\n double principal;\n double interest;\n</code></pre>\n<p>3 variables are declared; 1 of them is initialized.</p>\n"},{"tags":[],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682277045,"creation_date":1682269303,"answer_id":76086161,"question_id":76085884,"body_markdown":"This statement follows the form\r\n\r\n```text\r\n&lt;type&gt; &lt;identifier&gt; [ &#39;=&#39; &lt;expression&gt; ] [&#39;,&#39; &lt;identifier&gt; [ &#39;=&#39; &lt;expression&gt; ] ...]\r\n```\r\n\r\nSo you&#39;re doing this:\r\n\r\n* Declare a variable of type `double` with the name `balance` and assign the value of `loanAmount` to it;\r\n* Declare a variable of type `double` with the name `principal`;\r\n* Declare a variable of type `double` with the name `interest`.\r\n\r\nSee [JLS &#167; 14.4][1] for more details.\r\n\r\nI wouldn&#39;t advise this kind of declaration, but it *is* valid.\r\n\r\n[1]: https://docs.oracle.com/javase/specs/jls/se20/html/jls-14.html#jls-14.4","title":"one variable with multi assignments in java","body":"<p>This statement follows the form</p>\n<pre><code>&lt;type&gt; &lt;identifier&gt; [ '=' &lt;expression&gt; ] [',' &lt;identifier&gt; [ '=' &lt;expression&gt; ] ...]\n</code></pre>\n<p>So you're doing this:</p>\n<ul>\n<li>Declare a variable of type <code>double</code> with the name <code>balance</code> and assign the value of <code>loanAmount</code> to it;</li>\n<li>Declare a variable of type <code>double</code> with the name <code>principal</code>;</li>\n<li>Declare a variable of type <code>double</code> with the name <code>interest</code>.</li>\n</ul>\n<p>See <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-14.html#jls-14.4\" rel=\"nofollow noreferrer\">JLS § 14.4</a> for more details.</p>\n<p>I wouldn't advise this kind of declaration, but it <em>is</em> valid.</p>\n"}],"owner":{"account_id":27862714,"reputation":1,"user_id":21274880,"display_name":"dopyman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76086161,"answer_count":4,"score":0,"last_activity_date":1682277045,"creation_date":1682265739,"question_id":76085884,"body_markdown":"    double balance = loanAmount,principal,interest;\r\n\r\nCan someone explain about this variable and multi assignments? How it is possible that &quot;balance&quot; can have 3 assignments (loanAmount, principal, and interest)?","title":"one variable with multi assignments in java","body":"<pre><code>double balance = loanAmount,principal,interest;\n</code></pre>\n<p>Can someone explain about this variable and multi assignments? How it is possible that &quot;balance&quot; can have 3 assignments (loanAmount, principal, and interest)?</p>\n"},{"tags":["java","android","deprecated","event-listener","exoplayer"],"answers":[{"tags":[],"owner":{"account_id":2225264,"reputation":3565,"user_id":1972388,"accept_rate":77,"display_name":"DevWithZachary"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1624623352,"creation_date":1624623352,"answer_id":68130839,"question_id":68130396,"body_markdown":"As per there [Documentation][1] you would want something like:\r\n\r\n    simpleExoPlayer.addListener(new Player.Listener() {\r\n            @Override\r\n            public void onPlaybackStateChanged(@State int state) {\r\n                if (state == Player.STATE_READY) {\r\n\r\n                    aspectRatioFrameLayout.setAspectRatio(16f / 9f);\r\n                } else {\r\n                    playerView.hideController();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n  [1]: https://exoplayer.dev/listening-to-player-events.html","title":"Player.EventListener is deprecated how to use instead of Player.Listener in Java","body":"<p>As per there <a href=\"https://exoplayer.dev/listening-to-player-events.html\" rel=\"noreferrer\">Documentation</a> you would want something like:</p>\n<pre><code>simpleExoPlayer.addListener(new Player.Listener() {\n        @Override\n        public void onPlaybackStateChanged(@State int state) {\n            if (state == Player.STATE_READY) {\n\n                aspectRatioFrameLayout.setAspectRatio(16f / 9f);\n            } else {\n                playerView.hideController();\n            }\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16192048,"reputation":2376,"user_id":11690526,"display_name":"Tippu Fisal Sheriff"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1625217310,"creation_date":1625217310,"answer_id":68222605,"question_id":68130396,"body_markdown":"In **Kotlin** use this code, for more details refer to this  [Documentation][1]\r\n\r\n\r\n     player!!.addListener(object : Player.Listener { // player listener\r\n\r\n                override fun onPlayerStateChanged(playWhenReady: Boolean, playbackState: Int) {\r\n                    when (playbackState) { // check player play back state\r\n                        Player.STATE_READY -&gt; {\r\n                          aspectRatioFrameLayout.setAspectRatio(16f / 9f)\r\n                        }\r\n                        Player.STATE_ENDED -&gt; { \r\n                             //your logic \r\n                        }\r\n                        Player.STATE_BUFFERING -&gt;{ \r\n                             //your logic \r\n                        }\r\n                        Player.STATE_IDLE -&gt; { \r\n                             //your logic \r\n                        }\r\n                        else -&gt; {\r\n                           playerView.hideController()\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n\r\n\r\n  [1]: https://exoplayer.dev/listening-to-player-events.html","title":"Player.EventListener is deprecated how to use instead of Player.Listener in Java","body":"<p>In <strong>Kotlin</strong> use this code, for more details refer to this  <a href=\"https://exoplayer.dev/listening-to-player-events.html\" rel=\"nofollow noreferrer\">Documentation</a></p>\n<pre><code> player!!.addListener(object : Player.Listener { // player listener\n\n            override fun onPlayerStateChanged(playWhenReady: Boolean, playbackState: Int) {\n                when (playbackState) { // check player play back state\n                    Player.STATE_READY -&gt; {\n                      aspectRatioFrameLayout.setAspectRatio(16f / 9f)\n                    }\n                    Player.STATE_ENDED -&gt; { \n                         //your logic \n                    }\n                    Player.STATE_BUFFERING -&gt;{ \n                         //your logic \n                    }\n                    Player.STATE_IDLE -&gt; { \n                         //your logic \n                    }\n                    else -&gt; {\n                       playerView.hideController()\n                    }\n                }\n            }\n        })\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12801596,"reputation":29,"user_id":9262717,"display_name":"Arun Kumar"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1647654849,"creation_date":1647654849,"answer_id":71534796,"question_id":68130396,"body_markdown":"```\r\n        exoPlayer.addListener(new Player.Listener() {\r\n            public void onPlaybackStateChanged(int playbackState) {\r\n                if(playbackState == Player.STATE_ENDED){\r\n                    ..............\r\n                }\r\n            }\r\n        });\r\n```\r\n\r\nThis works for me on March 2022\r\n","title":"Player.EventListener is deprecated how to use instead of Player.Listener in Java","body":"<pre><code>        exoPlayer.addListener(new Player.Listener() {\n            public void onPlaybackStateChanged(int playbackState) {\n                if(playbackState == Player.STATE_ENDED){\n                    ..............\n                }\n            }\n        });\n</code></pre>\n<p>This works for me on March 2022</p>\n"},{"tags":[],"owner":{"account_id":3082393,"reputation":385,"user_id":2610335,"display_name":"user2610335"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669908196,"creation_date":1656923431,"answer_id":72853796,"question_id":68130396,"body_markdown":"Now in player version 2 it has changed\r\n\r\n```java\r\nplayer?.addListener(object :Player.EventListener{\r\n    \r\n    override fun onPlayerStateChanged(playWhenReady: Boolean, playbackState: Int) {\r\n        super.onPlayerStateChanged(playWhenReady, playbackState)\r\n        if (playbackState == Player.STATE_READY) {\r\n                        \r\n        } else {\r\n                       \r\n        }\r\n    }\r\n})\r\n```","title":"Player.EventListener is deprecated how to use instead of Player.Listener in Java","body":"<p>Now in player version 2 it has changed</p>\n<pre class=\"lang-java prettyprint-override\"><code>player?.addListener(object :Player.EventListener{\n    \n    override fun onPlayerStateChanged(playWhenReady: Boolean, playbackState: Int) {\n        super.onPlayerStateChanged(playWhenReady, playbackState)\n        if (playbackState == Player.STATE_READY) {\n                        \n        } else {\n                       \n        }\n    }\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10587710,"reputation":2772,"user_id":7799462,"display_name":"Halil Ozel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682277002,"creation_date":1682277002,"answer_id":76086752,"question_id":68130396,"body_markdown":"You should use new version: `com.google.android.exoplayer:exoplayer:2.18.6`\r\n\r\nThis function deprecated: \r\n\r\n```kotlin\r\n@Deprecated\r\n    default void onPlayerStateChanged(boolean playWhenReady, @State int playbackState) {}\r\n```\r\n\r\nNew function is:\r\n\r\n```kotlin\r\n default void onPlaybackStateChanged(@State int playbackState) {}\r\n```\r\n\r\nNew usage:\r\n\r\n```kotlin\r\nexoPlayer?.addListener(object : Player.Listener {\r\n            override fun onPlaybackStateChanged(@Player.State state: Int) {\r\n                when (state) {\r\n                    Player.STATE_READY -&gt; {\r\n                        // The player is able to immediately play from its current position. The player will be playing if getPlayWhenReady() is true, and paused otherwise.\r\n                    }\r\n                    Player.STATE_BUFFERING -&gt; {\r\n                       // The player is not able to immediately play the media, but is doing work toward being able to do so. This state typically occurs when the player needs to buffer more data before playback can start.\r\n                    }\r\n                    Player.STATE_IDLE -&gt; {\r\n                       // The player is idle, meaning it holds only limited resources.The player must be prepared before it will play the media.\r\n                    }\r\n                    Player.STATE_ENDED -&gt; { \r\n                       // The player has finished playing the media.\r\n                    }\r\n                    else -&gt; {\r\n                      // Other things\r\n                    }\r\n                }\r\n            }\r\n        })\r\n```","title":"Player.EventListener is deprecated how to use instead of Player.Listener in Java","body":"<p>You should use new version: <code>com.google.android.exoplayer:exoplayer:2.18.6</code></p>\n<p>This function deprecated:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Deprecated\n    default void onPlayerStateChanged(boolean playWhenReady, @State int playbackState) {}\n</code></pre>\n<p>New function is:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code> default void onPlaybackStateChanged(@State int playbackState) {}\n</code></pre>\n<p>New usage:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>exoPlayer?.addListener(object : Player.Listener {\n            override fun onPlaybackStateChanged(@Player.State state: Int) {\n                when (state) {\n                    Player.STATE_READY -&gt; {\n                        // The player is able to immediately play from its current position. The player will be playing if getPlayWhenReady() is true, and paused otherwise.\n                    }\n                    Player.STATE_BUFFERING -&gt; {\n                       // The player is not able to immediately play the media, but is doing work toward being able to do so. This state typically occurs when the player needs to buffer more data before playback can start.\n                    }\n                    Player.STATE_IDLE -&gt; {\n                       // The player is idle, meaning it holds only limited resources.The player must be prepared before it will play the media.\n                    }\n                    Player.STATE_ENDED -&gt; { \n                       // The player has finished playing the media.\n                    }\n                    else -&gt; {\n                      // Other things\n                    }\n                }\n            }\n        })\n</code></pre>\n"}],"owner":{"account_id":16044068,"reputation":1129,"user_id":11579741,"display_name":"Ganesh MB"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11832,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":68130839,"answer_count":5,"score":9,"last_activity_date":1682277002,"creation_date":1624621110,"question_id":68130396,"body_markdown":"   In Exoplayer version `2.14.1` `Playerd.EventListener()` is deprecated. when I read docs its says use instead of `Player.Listener`, but I have no idea how to use that method like below code.\r\n\r\n \r\n\r\n    simpleExoPlayer.addListener(new Player.EventListener() {\r\n                @Override\r\n                public void onPlaybackStateChanged(int state) {\r\n                    if (state == simpleExoPlayer.STATE_READY) {\r\n    \r\n                        aspectRatioFrameLayout.setAspectRatio(16f / 9f);\r\n                    } else {\r\n                        playerView.hideController();\r\n                    }\r\n                }\r\n            });","title":"Player.EventListener is deprecated how to use instead of Player.Listener in Java","body":"<p>In Exoplayer version <code>2.14.1</code> <code>Playerd.EventListener()</code> is deprecated. when I read docs its says use instead of <code>Player.Listener</code>, but I have no idea how to use that method like below code.</p>\n<pre><code>simpleExoPlayer.addListener(new Player.EventListener() {\n            @Override\n            public void onPlaybackStateChanged(int state) {\n                if (state == simpleExoPlayer.STATE_READY) {\n\n                    aspectRatioFrameLayout.setAspectRatio(16f / 9f);\n                } else {\n                    playerView.hideController();\n                }\n            }\n        });\n</code></pre>\n"},{"tags":["java","spring-boot","oauth-2.0"],"comments":[{"owner":{"account_id":881640,"reputation":4624,"user_id":266254,"accept_rate":47,"display_name":"bilak"},"score":1,"creation_date":1676981961,"post_id":75519603,"comment_id":133242732,"body_markdown":"even from your question it&#39;s not visible which versions of libraries are you using and what exactly is your problem. Pprovide some application shared on some public repository and somebody could be able to help you.","body":"even from your question it&#39;s not visible which versions of libraries are you using and what exactly is your problem. Pprovide some application shared on some public repository and somebody could be able to help you."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1676992924,"post_id":75519603,"comment_id":133246571,"body_markdown":"Both stackoverflow and spring-security documentation provide detailed answers for configuring OAuth2 clients in various scenarios.","body":"Both stackoverflow and spring-security documentation provide detailed answers for configuring OAuth2 clients in various scenarios."},{"owner":{"account_id":2048784,"reputation":787,"user_id":1828243,"accept_rate":14,"display_name":"Lefteris Bab"},"score":0,"creation_date":1676996549,"post_id":75519603,"comment_id":133247764,"body_markdown":"As I saw there are migrations to libraries that have confused me. I didn’t find clear answer how I can with spring boot to implement oauth2 client with authorization code. I am not talking about a specific library here in order to be more easy to find a solution","body":"As I saw there are migrations to libraries that have confused me. I didn’t find clear answer how I can with spring boot to implement oauth2 client with authorization code. I am not talking about a specific library here in order to be more easy to find a solution"}],"owner":{"account_id":2048784,"reputation":787,"user_id":1828243,"accept_rate":14,"display_name":"Lefteris Bab"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682276942,"creation_date":1676977475,"question_id":75519603,"body_markdown":"I have looked all over the stackoverflow, but until now, I have not figured out a complete solution. I have an authorization server (not Google, Facebook, GitHub etc) and my application will use authorization_code as grant-type. I have the \r\n\r\n - authorization url\r\n - Client-id \r\n - Client-secret\r\n - Token-uri\r\n - Scope\r\n\r\nAnd I cannot configure it to run. Also I need to refresh the token. \r\nEvery post that I found mixes the dependencies and the solutions. I just need to know proper setup/example of a client that calls authorization server and then uses this token to get resources from another server. \r\n\r\nThank you very much ","title":"Oauth2 and Spring boot","body":"<p>I have looked all over the stackoverflow, but until now, I have not figured out a complete solution. I have an authorization server (not Google, Facebook, GitHub etc) and my application will use authorization_code as grant-type. I have the</p>\n<ul>\n<li>authorization url</li>\n<li>Client-id</li>\n<li>Client-secret</li>\n<li>Token-uri</li>\n<li>Scope</li>\n</ul>\n<p>And I cannot configure it to run. Also I need to refresh the token.\nEvery post that I found mixes the dependencies and the solutions. I just need to know proper setup/example of a client that calls authorization server and then uses this token to get resources from another server.</p>\n<p>Thank you very much</p>\n"},{"tags":["java","constructor"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":9,"creation_date":1517948243,"post_id":48651243,"comment_id":84300409,"body_markdown":"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html","body":"<a href=\"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/data/autoboxing.html</a>"},{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":1,"creation_date":1517948569,"post_id":48651243,"comment_id":84300607,"body_markdown":"Wrapper classes are not exactly your &quot;regular classes&quot;. They differ from &quot;other classes&quot; in that the compiler provides special support for dealing with them. One of the things the compiler does is autoboxing: it converts primitive literals into wrappers without requiring a call of `new` or `valueOf`.","body":"Wrapper classes are not exactly your &quot;regular classes&quot;. They differ from &quot;other classes&quot; in that the compiler provides special support for dealing with them. One of the things the compiler does is autoboxing: it converts primitive literals into wrappers without requiring a call of <code>new</code> or <code>valueOf</code>."},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1517948588,"post_id":48651243,"comment_id":84300617,"body_markdown":"There are all kinds of classes of which you can obtain instances without explicitly using the `new` keyword or directly invoking a constructor.  Look at the various `String.valueOf()` methods, for example.  The wrapper classes and autoboxing are a bit special, to be sure, but you seem to be starting from a more generally faulty assumption.","body":"There are all kinds of classes of which you can obtain instances without explicitly using the <code>new</code> keyword or directly invoking a constructor.  Look at the various <code>String.valueOf()</code> methods, for example.  The wrapper classes and autoboxing are a bit special, to be sure, but you seem to be starting from a more generally faulty assumption."}],"answers":[{"tags":[],"owner":{"account_id":22179024,"reputation":1,"user_id":16423036,"display_name":"Vikas Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652060938,"creation_date":1651886653,"answer_id":72148773,"question_id":48651243,"body_markdown":"In the given case, autoboxing will be done by the compiler and that&#39;s why we don&#39;t need to use &#39;new&#39; keyword.","title":"wrapper classes do not need constructor call?","body":"<p>In the given case, autoboxing will be done by the compiler and that's why we don't need to use 'new' keyword.</p>\n"}],"owner":{"account_id":9522249,"reputation":1,"user_id":8424903,"display_name":"Akshat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":796,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682275211,"creation_date":1517948166,"question_id":48651243,"body_markdown":"Wrapper classes are like any other class right?\r\nAnd to create an object we need to use the new keyword followed by the constructor call in Java. So why don&#39;t we need the new keyword and constructor call in case of wrapper class objects?\r\n\r\n    Integer j=50; // an object of Integer is created with value 50 but there is no need of new keyword!\r\n\r\n","title":"wrapper classes do not need constructor call?","body":"<p>Wrapper classes are like any other class right?\nAnd to create an object we need to use the new keyword followed by the constructor call in Java. So why don't we need the new keyword and constructor call in case of wrapper class objects?</p>\n\n<pre><code>Integer j=50; // an object of Integer is created with value 50 but there is no need of new keyword!\n</code></pre>\n"},{"tags":["java","regex","lexical-analysis"],"comments":[{"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":2,"creation_date":1682264380,"post_id":76085763,"comment_id":134184317,"body_markdown":"Maybe `\\s+|(?&lt;=;)(?!$)|(?&lt;!^)(?=;)` can help.","body":"Maybe <code>\\s+|(?&lt;=;)(?!$)|(?&lt;!^)(?=;)</code> can help."}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682274650,"creation_date":1682274650,"answer_id":76086580,"question_id":76085763,"body_markdown":"Rather than using complex, costly lookaheads and lookbehinds, I would just use a word boundary:\r\n\r\n    String[] tokens = str.split(&quot; *\\\\b *&quot;);\r\n\r\nThis will return spaces as tokens, but you can remove them easily enough:\r\n\r\n    tokens = Arrays.stream(tokens)\r\n        .filter(t -&gt; !t.isBlank()).toArray(String[]::new);\r\n\r\nYou can also do it in one step using [splitAsStream](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html#splitAsStream(java.lang.CharSequence)):\r\n\r\n    String[] tokens = Pattern.compile(&quot; *\\\\b *&quot;).splitAsStream(str)\r\n        .filter(t -&gt; !t.isBlank()).toArray(String[]::new);\r\n","title":"Regex in java for semicolon and comma as delimiter but also considered in the string","body":"<p>Rather than using complex, costly lookaheads and lookbehinds, I would just use a word boundary:</p>\n<pre><code>String[] tokens = str.split(&quot; *\\\\b *&quot;);\n</code></pre>\n<p>This will return spaces as tokens, but you can remove them easily enough:</p>\n<pre><code>tokens = Arrays.stream(tokens)\n    .filter(t -&gt; !t.isBlank()).toArray(String[]::new);\n</code></pre>\n<p>You can also do it in one step using <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html#splitAsStream(java.lang.CharSequence)\" rel=\"nofollow noreferrer\">splitAsStream</a>:</p>\n<pre><code>String[] tokens = Pattern.compile(&quot; *\\\\b *&quot;).splitAsStream(str)\n    .filter(t -&gt; !t.isBlank()).toArray(String[]::new);\n</code></pre>\n"}],"owner":{"account_id":23949672,"reputation":25,"user_id":17941475,"display_name":"Heena Mirchandani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76086580,"answer_count":1,"score":1,"last_activity_date":1682274650,"creation_date":1682264173,"question_id":76085763,"body_markdown":"I have written a lexical analyzer program in java. I am splitting the input string with a whitespace or a semicolon, but what I really wish to do is consider a semicolon or a comma as a separate token even if there is no space before it.\r\n\r\n\r\n\r\nRight now I have\r\n`arr = (str).split(&quot;[; ]&quot;);`\r\n\r\nBut when I am giving the input string as \r\n`return a = 25;`\r\n\r\nThe string is split like : `[return, a, =, 25]`\r\nIt&#39;s not recognizing ; or using it as a delimiter. I tried to find a regex for it but I can&#39;t find the one that works. I am trying to avoid StringTokenizer but if it&#39;s something that should be used and can&#39;t be avoided, please let me know. I am fairly new to regex so I am not able to figure it out.\r\n\r\nI tried the regex `((?&lt;=;)|(?=;))` but it only splits with ; no whitespace is considered.","title":"Regex in java for semicolon and comma as delimiter but also considered in the string","body":"<p>I have written a lexical analyzer program in java. I am splitting the input string with a whitespace or a semicolon, but what I really wish to do is consider a semicolon or a comma as a separate token even if there is no space before it.</p>\n<p>Right now I have\n<code>arr = (str).split(&quot;[; ]&quot;);</code></p>\n<p>But when I am giving the input string as\n<code>return a = 25;</code></p>\n<p>The string is split like : <code>[return, a, =, 25]</code>\nIt's not recognizing ; or using it as a delimiter. I tried to find a regex for it but I can't find the one that works. I am trying to avoid StringTokenizer but if it's something that should be used and can't be avoided, please let me know. I am fairly new to regex so I am not able to figure it out.</p>\n<p>I tried the regex <code>((?&lt;=;)|(?=;))</code> but it only splits with ; no whitespace is considered.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682274527,"creation_date":1682274527,"answer_id":76086571,"question_id":76043780,"body_markdown":"Try below, it will disable all and any logging for chrome driver\r\n\r\n \r\n\r\n    import java.io.FileNotFoundException;\r\n    import java.io.FileOutputStream;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriverService;\r\n    import org.openqa.selenium.chrome.ChromeDriverService.Builder;\r\n    import org.openqa.selenium.remote.service.DriverService;\r\n    \r\n    public class DisableLogging {\r\n    \r\n    \r\n    \tpublic static void main(String[] args) throws FileNotFoundException {\r\n    \t\tLogger.getLogger(&quot;org.openqa.selenium.remote&quot;).setLevel(Level.OFF);\r\n    \t\tLogger.getLogger(&quot;org.openqa.selenium&quot;).setLevel(Level.OFF);\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.silentOutput&quot;, &quot;true&quot;);\r\n    \t\tDriverService.Builder&lt;ChromeDriverService, Builder&gt; serviceBuilder = new ChromeDriverService.Builder().withSilent(\r\n    \t\t\ttrue);\r\n    \t\tChromeDriverService chromeDriverService = serviceBuilder.build();\r\n    \t\tchromeDriverService.sendOutputTo(new FileOutputStream(&quot;target/chromedriver_log.txt&quot;, true));\r\n    \t\tWebDriver driver = new ChromeDriver(chromeDriverService);\r\n    \t\tdriver.quit();\r\n    \t}","title":"Disable Selenium &amp; Chrome Driver Logging","body":"<p>Try below, it will disable all and any logging for chrome driver</p>\n<pre><code>import java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeDriverService;\nimport org.openqa.selenium.chrome.ChromeDriverService.Builder;\nimport org.openqa.selenium.remote.service.DriverService;\n\npublic class DisableLogging {\n\n\n    public static void main(String[] args) throws FileNotFoundException {\n        Logger.getLogger(&quot;org.openqa.selenium.remote&quot;).setLevel(Level.OFF);\n        Logger.getLogger(&quot;org.openqa.selenium&quot;).setLevel(Level.OFF);\n        System.setProperty(&quot;webdriver.chrome.silentOutput&quot;, &quot;true&quot;);\n        DriverService.Builder&lt;ChromeDriverService, Builder&gt; serviceBuilder = new ChromeDriverService.Builder().withSilent(\n            true);\n        ChromeDriverService chromeDriverService = serviceBuilder.build();\n        chromeDriverService.sendOutputTo(new FileOutputStream(&quot;target/chromedriver_log.txt&quot;, true));\n        WebDriver driver = new ChromeDriver(chromeDriverService);\n        driver.quit();\n    }\n</code></pre>\n"}],"owner":{"account_id":25781013,"reputation":423,"user_id":19526639,"display_name":"muell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":442,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682274527,"creation_date":1681815841,"question_id":76043780,"body_markdown":"The Chrome Driver prints `Starting ChromeDriver x on port y...`, `Only local connections are allowed.` and so on when starting, and Selenium prints `ChromeDriver was started successfully.` and also notifies me when it can&#39;t find an exact match for my CDP version.\r\n\r\nHow can I disable these messages?","title":"Disable Selenium &amp; Chrome Driver Logging","body":"<p>The Chrome Driver prints <code>Starting ChromeDriver x on port y...</code>, <code>Only local connections are allowed.</code> and so on when starting, and Selenium prints <code>ChromeDriver was started successfully.</code> and also notifies me when it can't find an exact match for my CDP version.</p>\n<p>How can I disable these messages?</p>\n"},{"tags":["java","ubuntu","jdbc","java-8"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1563098293,"post_id":57026315,"comment_id":100582172,"body_markdown":"derby is not part of the JDK. I would recommend using a build tool like [maven](https://maven.apache.org/) or [gradle](https://gradle.org/) to manage dependencies like derby.","body":"derby is not part of the JDK. I would recommend using a build tool like <a href=\"https://maven.apache.org/\" rel=\"nofollow noreferrer\">maven</a> or <a href=\"https://gradle.org/\" rel=\"nofollow noreferrer\">gradle</a> to manage dependencies like derby."},{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1563098454,"post_id":57026315,"comment_id":100582205,"body_markdown":"You can download from https://repo1.maven.org/maven2/org/apache/derby/derby/10.15.1.3/","body":"You can download from <a href=\"https://repo1.maven.org/maven2/org/apache/derby/derby/10.15.1.3/\" rel=\"nofollow noreferrer\">repo1.maven.org/maven2/org/apache/derby/derby/10.15.1.3</a>"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1563184187,"post_id":57026315,"comment_id":100602445,"body_markdown":"Related: https://stackoverflow.com/questions/53911999/where-is-the-derby-jar-file-within-my-java-11-installation-on-mac Note that Derby (JavaDB) was only ever included in the Oracle JDK distributions, it wasn&#39;t part of JDK distributions of other vendors.","body":"Related: <a href=\"https://stackoverflow.com/questions/53911999/where-is-the-derby-jar-file-within-my-java-11-installation-on-mac\" title=\"where is the derby jar file within my java 11 installation on mac\">stackoverflow.com/questions/53911999/&hellip;</a> Note that Derby (JavaDB) was only ever included in the Oracle JDK distributions, it wasn&#39;t part of JDK distributions of other vendors."}],"answers":[{"tags":[],"owner":{"account_id":3048768,"reputation":24,"user_id":2583810,"display_name":"mithz"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1563098448,"creation_date":1563098448,"answer_id":57026351,"question_id":57026315,"body_markdown":"You can download the required version from https://db.apache.org/derby/derby_downloads.html and then save it under this location. /my/jdk/home/db/lib/ \r\n","title":"Where can I find derby.jar in JDK 8?","body":"<p>You can download the required version from <a href=\"https://db.apache.org/derby/derby_downloads.html\" rel=\"nofollow noreferrer\">https://db.apache.org/derby/derby_downloads.html</a> and then save it under this location. /my/jdk/home/db/lib/ </p>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1563098946,"creation_date":1563098946,"answer_id":57026416,"question_id":57026315,"body_markdown":"The JDK is being slimmed down and derby is no longer part of the distribution. \r\n\r\nYou must download the jar manually and then use the path to the downloaded jar instead of the one you use today. ","title":"Where can I find derby.jar in JDK 8?","body":"<p>The JDK is being slimmed down and derby is no longer part of the distribution. </p>\n\n<p>You must download the jar manually and then use the path to the downloaded jar instead of the one you use today. </p>\n"},{"tags":[],"owner":{"account_id":28390136,"reputation":1,"user_id":21716031,"display_name":"karan khaswal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682274233,"creation_date":1682274233,"answer_id":76086549,"question_id":57026315,"body_markdown":"if you&#39;re using netbeans then try this path\r\nC:\\Program Files\\glassfish-4.1\\javadb\\lib\r\n\r\nyou&#39;ll found derby client name jarfile for jdbc connection\r\n","title":"Where can I find derby.jar in JDK 8?","body":"<p>if you're using netbeans then try this path\nC:\\Program Files\\glassfish-4.1\\javadb\\lib</p>\n<p>you'll found derby client name jarfile for jdbc connection</p>\n"}],"owner":{"account_id":11939237,"reputation":1048,"user_id":8736602,"display_name":"yali"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2337,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":57026416,"answer_count":3,"score":4,"last_activity_date":1682274233,"creation_date":1563098161,"question_id":57026315,"body_markdown":"I am reading about JDBC in OCP Java book, and in this book, it explains about JavaDB and before running my code, I need to add derby.jar file to my classpath.\r\n\r\n    java −cp &quot;/my/jdk/home/db/lib/derby.jar:.&quot; SetupDerbyDatabase\r\n\r\n**OS:** Ubuntu 19.04\r\n\r\n**Java version:** 8","title":"Where can I find derby.jar in JDK 8?","body":"<p>I am reading about JDBC in OCP Java book, and in this book, it explains about JavaDB and before running my code, I need to add derby.jar file to my classpath.</p>\n\n<pre><code>java −cp \"/my/jdk/home/db/lib/derby.jar:.\" SetupDerbyDatabase\n</code></pre>\n\n<p><strong>OS:</strong> Ubuntu 19.04</p>\n\n<p><strong>Java version:</strong> 8</p>\n"},{"tags":["java","swing","awt"],"comments":[{"owner":{"account_id":27728308,"reputation":19,"user_id":21253815,"display_name":"kirin"},"score":0,"creation_date":1682265802,"post_id":76085757,"comment_id":134184559,"body_markdown":"it doesn&#39;t help","body":"it doesn&#39;t help"}],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682273665,"creation_date":1682273665,"answer_id":76086506,"question_id":76085757,"body_markdown":"The code you posted was a confusing mess.  Java has methods so you can break your code into understandable bite-size pieces.\r\n\r\nHere&#39;s the GUI I created.  I reduced the size of the GUI so it fits better in the answer.\r\n\r\n[![menu][1]][1]\r\n\r\nHere&#39;s the drawing component.\r\n\r\n[![visualization][2]][2]\r\n\r\nOracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section. \r\n\r\nAll Swing applications must start with a call to the `SwingUtilities` `invokeLater` method.  This method ensures that the Swing components are created and executed on the [Event Dispatch Thread](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html).\r\n\r\nI separated the creation of the `JFrame` and the `JPanels` into separate methods and classes.  This allows me to separate my concerns and makes the code much much easier for people to read and understand.\r\n\r\nYou use the `paintComponent` method of a `JComponent` to do your drawing.  The first line of the `paintComponent` method must always be `super.paintComponent(g);`.\r\n\r\nI didn&#39;t include your `Sorting` class.  I&#39;m not sure what you&#39;re trying to do, but sorting an array is done separately from creating the view.  The only thing the view does is display your application model.  Period.  Nothing else.\r\n\r\nHere&#39;s the complete runnable code.  I made the additional classes inner classes so I could post the code as one block.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.CardLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.Font;\r\n    import java.awt.Graphics;\r\n    import java.awt.GridLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    \r\n    import javax.swing.JButton;\r\n    import javax.swing.JComponent;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    import javax.swing.border.EmptyBorder;\r\n    \r\n    public class VisualizationExample implements Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new VisualizationExample());\r\n    \t}\r\n    \r\n    \tprivate final CardLayout cardLayout;\r\n    \r\n    \tprivate final JPanel mainPanel;\r\n    \r\n    \tpublic VisualizationExample() {\r\n    \t\tthis.cardLayout = new CardLayout();\r\n    \t\tthis.mainPanel = createMainPanel();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tJFrame frame = new JFrame(&quot;Сортировка выбором&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\tframe.add(mainPanel, BorderLayout.CENTER);\r\n    \r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tprivate JPanel createMainPanel() {\r\n    \t\tJPanel panel = new JPanel(cardLayout);\r\n    \r\n    \t\tpanel.add(createMenuPanel(), &quot;menu&quot;);\r\n    \t\tint[] arr = { 1, 2, 3 };\r\n    \t\tpanel.add(new ArrayVisualization(arr, 10, 30), &quot;visualization&quot;);\r\n    \r\n    \t\treturn panel;\r\n    \t}\r\n    \r\n    \tprivate JPanel createMenuPanel() {\r\n    \t\tJPanel mainPanel = new JPanel(new GridLayout(0, 1, 5, 10));\r\n    \t\tmainPanel.setBorder(new EmptyBorder(10, 10, 10, 10));\r\n    \r\n    \t\tJLabel label = new JLabel(&quot;Сортировка выбором&quot;);\r\n    \t\tlabel.setFont(label.getFont().deriveFont(36.0f));\r\n    \t\tmainPanel.add(label);\r\n    \r\n    \t\tJLabel description = new JLabel(\r\n    \t\t\t\t&quot;&lt;html&gt;&lt;span&gt;Описание какое-то сортировки&lt;/span&gt;&lt;/html&gt;&quot;);\r\n    \t\tdescription.setFont(label.getFont().deriveFont(20.0f));\r\n    \t\tmainPanel.add(description);\r\n    \r\n    \t\tJButton visualizeButton = new JButton(&quot;Посмотреть визуализацию&quot;);\r\n    \t\tvisualizeButton.addActionListener(new ButtonListener(this));\r\n    \t\tmainPanel.add(visualizeButton);\r\n    \r\n    \t\treturn mainPanel;\r\n    \t}\r\n    \r\n    \tpublic void showArrayVisualization() {\r\n    \t\tcardLayout.show(mainPanel, &quot;visualization&quot;);\r\n    \t}\r\n    \r\n    \tpublic class ArrayVisualization extends JComponent {\r\n    \r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t\tprivate int[] arr;\r\n    \t\tprivate int x;\r\n    \t\tprivate int y;\r\n    \r\n    \t\tpublic ArrayVisualization(int[] arr, int x, int y) {\r\n    \t\t\tthis.arr = arr;\r\n    \t\t\tthis.x = x;\r\n    \t\t\tthis.y = y;\r\n    \t\t\tthis.setPreferredSize(new Dimension(400, 400));\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tprotected void paintComponent(Graphics g) {\r\n    \t\t\tsuper.paintComponent(g);\r\n    \r\n    \t\t\tg.setColor(Color.RED);\r\n    \t\t\tg.setFont(g.getFont().deriveFont(Font.BOLD, 24f));\r\n    \t\t\tfor (int i = 0; i &lt; arr.length; i++) {\r\n    \t\t\t\tg.drawString(Integer.toString(arr[i]), x, y);\r\n    \t\t\t\tx += 24;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic class ButtonListener implements ActionListener {\r\n    \r\n    \t\tprivate final VisualizationExample view;\r\n    \r\n    \t\tpublic ButtonListener(VisualizationExample view) {\r\n    \t\t\tthis.view = view;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent event) {\r\n    \t\t\tview.showArrayVisualization();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sOjGr.png\r\n  [2]: https://i.stack.imgur.com/DDtXU.png","title":"Panel is empty after changing cards in CardLayout","body":"<p>The code you posted was a confusing mess.  Java has methods so you can break your code into understandable bite-size pieces.</p>\n<p>Here's the GUI I created.  I reduced the size of the GUI so it fits better in the answer.</p>\n<p><a href=\"https://i.stack.imgur.com/sOjGr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sOjGr.png\" alt=\"menu\" /></a></p>\n<p>Here's the drawing component.</p>\n<p><a href=\"https://i.stack.imgur.com/DDtXU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DDtXU.png\" alt=\"visualization\" /></a></p>\n<p>Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.</p>\n<p>All Swing applications must start with a call to the <code>SwingUtilities</code> <code>invokeLater</code> method.  This method ensures that the Swing components are created and executed on the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html\" rel=\"nofollow noreferrer\">Event Dispatch Thread</a>.</p>\n<p>I separated the creation of the <code>JFrame</code> and the <code>JPanels</code> into separate methods and classes.  This allows me to separate my concerns and makes the code much much easier for people to read and understand.</p>\n<p>You use the <code>paintComponent</code> method of a <code>JComponent</code> to do your drawing.  The first line of the <code>paintComponent</code> method must always be <code>super.paintComponent(g);</code>.</p>\n<p>I didn't include your <code>Sorting</code> class.  I'm not sure what you're trying to do, but sorting an array is done separately from creating the view.  The only thing the view does is display your application model.  Period.  Nothing else.</p>\n<p>Here's the complete runnable code.  I made the additional classes inner classes so I could post the code as one block.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.CardLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Font;\nimport java.awt.Graphics;\nimport java.awt.GridLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport javax.swing.JButton;\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\n\npublic class VisualizationExample implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new VisualizationExample());\n    }\n\n    private final CardLayout cardLayout;\n\n    private final JPanel mainPanel;\n\n    public VisualizationExample() {\n        this.cardLayout = new CardLayout();\n        this.mainPanel = createMainPanel();\n    }\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;Сортировка выбором&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        frame.add(mainPanel, BorderLayout.CENTER);\n\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private JPanel createMainPanel() {\n        JPanel panel = new JPanel(cardLayout);\n\n        panel.add(createMenuPanel(), &quot;menu&quot;);\n        int[] arr = { 1, 2, 3 };\n        panel.add(new ArrayVisualization(arr, 10, 30), &quot;visualization&quot;);\n\n        return panel;\n    }\n\n    private JPanel createMenuPanel() {\n        JPanel mainPanel = new JPanel(new GridLayout(0, 1, 5, 10));\n        mainPanel.setBorder(new EmptyBorder(10, 10, 10, 10));\n\n        JLabel label = new JLabel(&quot;Сортировка выбором&quot;);\n        label.setFont(label.getFont().deriveFont(36.0f));\n        mainPanel.add(label);\n\n        JLabel description = new JLabel(\n                &quot;&lt;html&gt;&lt;span&gt;Описание какое-то сортировки&lt;/span&gt;&lt;/html&gt;&quot;);\n        description.setFont(label.getFont().deriveFont(20.0f));\n        mainPanel.add(description);\n\n        JButton visualizeButton = new JButton(&quot;Посмотреть визуализацию&quot;);\n        visualizeButton.addActionListener(new ButtonListener(this));\n        mainPanel.add(visualizeButton);\n\n        return mainPanel;\n    }\n\n    public void showArrayVisualization() {\n        cardLayout.show(mainPanel, &quot;visualization&quot;);\n    }\n\n    public class ArrayVisualization extends JComponent {\n\n        private static final long serialVersionUID = 1L;\n\n        private int[] arr;\n        private int x;\n        private int y;\n\n        public ArrayVisualization(int[] arr, int x, int y) {\n            this.arr = arr;\n            this.x = x;\n            this.y = y;\n            this.setPreferredSize(new Dimension(400, 400));\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n\n            g.setColor(Color.RED);\n            g.setFont(g.getFont().deriveFont(Font.BOLD, 24f));\n            for (int i = 0; i &lt; arr.length; i++) {\n                g.drawString(Integer.toString(arr[i]), x, y);\n                x += 24;\n            }\n        }\n\n    }\n\n    public class ButtonListener implements ActionListener {\n\n        private final VisualizationExample view;\n\n        public ButtonListener(VisualizationExample view) {\n            this.view = view;\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent event) {\n            view.showArrayVisualization();\n        }\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":27728308,"reputation":19,"user_id":21253815,"display_name":"kirin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76086506,"answer_count":1,"score":-1,"last_activity_date":1682273665,"creation_date":1682264079,"question_id":76085757,"body_markdown":"I&#39;m codding selection sort visualization. So, I got an issue: when I change panels(when I&#39;m in main menu and I press button for visualization) I want my array to be painted on visualization panel, but it doesn&#39;t happen. I get empty panel, nothing&#39;s there.\r\nI also use SwingExplorer Integration v2 plugin for itellij and it tells me, that menu panel is not visible and visualization panel is visible, so the way of changing panels is correct. I also tried both methods paint() and paintComponent(), it didn&#39;t help.\r\n\r\nSorting class is the panel where array visualization will happen.\r\nArrayVis class is the array visualization(not ready yet ofc).\r\n\r\nWhat am I doing wrong? Why is my visualization panel empty?\r\n\r\nI&#39;m new in java, so I hope you help me!\r\n\r\nCode:\r\n\r\n**Main.java**\r\n```\r\nimport project.MainMenu;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        new MainMenu();\r\n    }\r\n}\r\n```\r\n\r\n**MainMenu.java**\r\n```\r\npackage project;\r\n\r\nimport java.awt.*;\r\n\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.border.EmptyBorder;\r\n\r\npublic class MainMenu extends JFrame {\r\n\tprivate JPanel mainPanel;\r\n\tprivate JPanel visualization;\r\n\tprivate JPanel menu;\r\n\tprivate JLabel label;\r\n\tprivate JButton visualizeButton;\r\n\tprivate JLabel description;\r\n\tDimension screen;\r\n\r\n\tpublic MainMenu() {\r\n\t\tmenu = new JPanel();\r\n\t\tvisualization = new Sorting();\r\n\t\tmainPanel = new JPanel();\r\n\r\n\t\tCardLayout cardLayout = new CardLayout();\r\n\t\tmainPanel.setLayout(cardLayout);\r\n\r\n\t\tGridLayout layout = new GridLayout(0, 1);\r\n\t\tlayout.setVgap(10);\r\n\r\n\t\tmenu.setLayout(layout);\r\n\t\tmainPanel.setBorder(new EmptyBorder(10,10,10,10));\r\n\r\n\r\n\t\tlabel = new JLabel(&quot;Сортировка выбором&quot;);\r\n\t\tlabel.setFont(label.getFont().deriveFont(36.0f));\r\n\t\tlabel.setHorizontalAlignment(getX());\r\n\r\n\t\tdescription = new JLabel(&quot;&lt;html&gt;&lt;span&gt;Описание какое-то сортировки&lt;/span&gt;&lt;/html&gt;&quot;);\r\n\t\tdescription.setFont(label.getFont().deriveFont(20.0f));\r\n\r\n\t\tvisualizeButton = new JButton(&quot;Посмотреть визуализацию&quot;);\r\n\t\tvisualizeButton.addMouseListener(new java.awt.event.MouseAdapter() {\r\n\t\t\tboolean clicked = false;\r\n\r\n\t\t\tpublic void mouseEntered(java.awt.event.MouseEvent evt) {\r\n\t\t\t\tvisualizeButton.setBackground(new Color(155, 239, 245));\r\n\t\t\t}\r\n\r\n\t\t\tpublic void mouseExited(java.awt.event.MouseEvent evt) {\r\n\t\t\t\tif (!clicked)\r\n\t\t\t\t\tvisualizeButton.setBackground(new Color(255,255,255));\r\n\t\t\t}\r\n/// changing panels\r\n\t\t\tpublic void mousePressed(java.awt.event.MouseEvent evt) {\r\n\t\t\t\tclicked = true;\r\n\t\t\t\tmainPanel.add(visualization, &quot;visualization&quot;);\r\n\t\t\t\tcardLayout.show(mainPanel,&quot;visualization&quot;);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tJPanel buttonPanel = new JPanel();\r\n\t\tbuttonPanel.setSize(50,40);\r\n\t\tbuttonPanel.add(visualizeButton, BorderLayout.CENTER);\r\n\r\n\t\tmenu.add(label, BorderLayout.NORTH);\r\n\t\tmenu.add(description, BorderLayout.CENTER);\r\n\t\tmenu.add(buttonPanel, BorderLayout.SOUTH);\r\n\r\n\r\n\t\tmainPanel.add(menu,&quot;menu&quot;);\r\n\r\n\t\tcardLayout.show(mainPanel,&quot;menu&quot;);\r\n\r\n\t\tadd(mainPanel);\r\n\r\n\t\tscreen = Toolkit.getDefaultToolkit().getScreenSize();\r\n\r\n\t\tsetExtendedState(Frame.MAXIMIZED_BOTH);\r\n\t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tsetTitle(&quot;Сортировка выбором&quot;);\r\n\t\tsetBounds(0, 0, 500, 500);\r\n\t\tsetVisible(true);\r\n\t}\r\n}\r\n```\r\n\r\n**Sorting.java**\r\n```\r\npackage project;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\n\r\n\r\npublic class Sorting extends JPanel {\r\n\tprivate JPanel buttonPanel;\r\n\tprivate JButton addNum;\r\n\tprivate JButton startVisualizing;\r\n\tprivate JButton resetArray;\r\n\tprivate int x = 15;\r\n\tprivate int[] arr;\r\n\tprivate int y = 15;\r\n\r\n\tpublic Sorting(){\r\n\t\tsetLayout(new FlowLayout());\r\n\t\tarr = new int[]{1,2,3};\r\n\t\tadd(new ArrayVis(arr,x,y));\r\n\t\tx += 10 * arr.length;\r\n\r\n\t}\r\n\r\n\tpublic void selectionSort() {\r\n\t\tfor (int i = 0; i &lt; arr.length; i++) {\r\n\t\t\tint min = i;\r\n\t\t\tfor (int j = i + 1; j &lt; arr.length; j++) {\r\n\t\t\t\tif (arr[j] &lt; arr[min]) {\r\n\t\t\t\t\tmin = j;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tint helper = arr[i];\r\n\t\t\tarr[i] = arr[min];\r\n\t\t\tarr[min] = helper;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n**ArrayVis.java**\r\n```\r\npackage project;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\n\r\npublic class ArrayVis extends JComponent {\r\n    private int[] arr;\r\n    private int x;\r\n    private int y;\r\n\r\n    public ArrayVis(int[] arr,int x, int y){\r\n        this.arr = arr;\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    @Override\r\n    public void paint(Graphics g){\r\n        g.setColor(Color.RED);\r\n        for (int i = 0;i&lt;arr.length;i++){\r\n            g.drawString(Integer.toString(arr[i]),x,y);\r\n            x += 10;\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Panel is empty after changing cards in CardLayout","body":"<p>I'm codding selection sort visualization. So, I got an issue: when I change panels(when I'm in main menu and I press button for visualization) I want my array to be painted on visualization panel, but it doesn't happen. I get empty panel, nothing's there.\nI also use SwingExplorer Integration v2 plugin for itellij and it tells me, that menu panel is not visible and visualization panel is visible, so the way of changing panels is correct. I also tried both methods paint() and paintComponent(), it didn't help.</p>\n<p>Sorting class is the panel where array visualization will happen.\nArrayVis class is the array visualization(not ready yet ofc).</p>\n<p>What am I doing wrong? Why is my visualization panel empty?</p>\n<p>I'm new in java, so I hope you help me!</p>\n<p>Code:</p>\n<p><strong>Main.java</strong></p>\n<pre><code>import project.MainMenu;\n\npublic class Main {\n    public static void main(String[] args) {\n        new MainMenu();\n    }\n}\n</code></pre>\n<p><strong>MainMenu.java</strong></p>\n<pre><code>package project;\n\nimport java.awt.*;\n\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\n\npublic class MainMenu extends JFrame {\n    private JPanel mainPanel;\n    private JPanel visualization;\n    private JPanel menu;\n    private JLabel label;\n    private JButton visualizeButton;\n    private JLabel description;\n    Dimension screen;\n\n    public MainMenu() {\n        menu = new JPanel();\n        visualization = new Sorting();\n        mainPanel = new JPanel();\n\n        CardLayout cardLayout = new CardLayout();\n        mainPanel.setLayout(cardLayout);\n\n        GridLayout layout = new GridLayout(0, 1);\n        layout.setVgap(10);\n\n        menu.setLayout(layout);\n        mainPanel.setBorder(new EmptyBorder(10,10,10,10));\n\n\n        label = new JLabel(&quot;Сортировка выбором&quot;);\n        label.setFont(label.getFont().deriveFont(36.0f));\n        label.setHorizontalAlignment(getX());\n\n        description = new JLabel(&quot;&lt;html&gt;&lt;span&gt;Описание какое-то сортировки&lt;/span&gt;&lt;/html&gt;&quot;);\n        description.setFont(label.getFont().deriveFont(20.0f));\n\n        visualizeButton = new JButton(&quot;Посмотреть визуализацию&quot;);\n        visualizeButton.addMouseListener(new java.awt.event.MouseAdapter() {\n            boolean clicked = false;\n\n            public void mouseEntered(java.awt.event.MouseEvent evt) {\n                visualizeButton.setBackground(new Color(155, 239, 245));\n            }\n\n            public void mouseExited(java.awt.event.MouseEvent evt) {\n                if (!clicked)\n                    visualizeButton.setBackground(new Color(255,255,255));\n            }\n/// changing panels\n            public void mousePressed(java.awt.event.MouseEvent evt) {\n                clicked = true;\n                mainPanel.add(visualization, &quot;visualization&quot;);\n                cardLayout.show(mainPanel,&quot;visualization&quot;);\n            }\n        });\n\n        JPanel buttonPanel = new JPanel();\n        buttonPanel.setSize(50,40);\n        buttonPanel.add(visualizeButton, BorderLayout.CENTER);\n\n        menu.add(label, BorderLayout.NORTH);\n        menu.add(description, BorderLayout.CENTER);\n        menu.add(buttonPanel, BorderLayout.SOUTH);\n\n\n        mainPanel.add(menu,&quot;menu&quot;);\n\n        cardLayout.show(mainPanel,&quot;menu&quot;);\n\n        add(mainPanel);\n\n        screen = Toolkit.getDefaultToolkit().getScreenSize();\n\n        setExtendedState(Frame.MAXIMIZED_BOTH);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setTitle(&quot;Сортировка выбором&quot;);\n        setBounds(0, 0, 500, 500);\n        setVisible(true);\n    }\n}\n</code></pre>\n<p><strong>Sorting.java</strong></p>\n<pre><code>package project;\n\nimport javax.swing.*;\nimport java.awt.*;\n\n\npublic class Sorting extends JPanel {\n    private JPanel buttonPanel;\n    private JButton addNum;\n    private JButton startVisualizing;\n    private JButton resetArray;\n    private int x = 15;\n    private int[] arr;\n    private int y = 15;\n\n    public Sorting(){\n        setLayout(new FlowLayout());\n        arr = new int[]{1,2,3};\n        add(new ArrayVis(arr,x,y));\n        x += 10 * arr.length;\n\n    }\n\n    public void selectionSort() {\n        for (int i = 0; i &lt; arr.length; i++) {\n            int min = i;\n            for (int j = i + 1; j &lt; arr.length; j++) {\n                if (arr[j] &lt; arr[min]) {\n                    min = j;\n                }\n            }\n            int helper = arr[i];\n            arr[i] = arr[min];\n            arr[min] = helper;\n        }\n    }\n}\n</code></pre>\n<p><strong>ArrayVis.java</strong></p>\n<pre><code>package project;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class ArrayVis extends JComponent {\n    private int[] arr;\n    private int x;\n    private int y;\n\n    public ArrayVis(int[] arr,int x, int y){\n        this.arr = arr;\n        this.x = x;\n        this.y = y;\n    }\n\n    @Override\n    public void paint(Graphics g){\n        g.setColor(Color.RED);\n        for (int i = 0;i&lt;arr.length;i++){\n            g.drawString(Integer.toString(arr[i]),x,y);\n            x += 10;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","eclipse","jar","manifest"],"comments":[{"owner":{"account_id":1156609,"reputation":9392,"user_id":1137043,"accept_rate":100,"display_name":"brimborium"},"score":0,"creation_date":1339064515,"post_id":10929438,"comment_id":14258030,"body_markdown":"Have you checked if you have a folder &quot;src&quot; in the root of your jar containing your BatchTester.class?","body":"Have you checked if you have a folder &quot;src&quot; in the root of your jar containing your BatchTester.class?"},{"owner":{"account_id":1054837,"reputation":741,"user_id":1057797,"accept_rate":50,"display_name":"magodiez"},"score":0,"creation_date":1339064577,"post_id":10929438,"comment_id":14258053,"body_markdown":"Obviously my class is there...\nOtherwise I wouldn&#39;t have the other error when no classpath defined.","body":"Obviously my class is there... Otherwise I wouldn&#39;t have the other error when no classpath defined."},{"owner":{"account_id":1156609,"reputation":9392,"user_id":1137043,"accept_rate":100,"display_name":"brimborium"},"score":0,"creation_date":1339066125,"post_id":10929438,"comment_id":14258620,"body_markdown":"Ah, now I see your problem. How about `Main-Class: BatchTester` and `Class-Path: src P:/Too...`? Or is your BatchTester actually in a package &quot;src&quot; (that would be strange)?","body":"Ah, now I see your problem. How about <code>Main-Class: BatchTester</code> and <code>Class-Path: src P:&#47;Too...</code>? Or is your BatchTester actually in a package &quot;src&quot; (that would be strange)?"},{"owner":{"account_id":1054837,"reputation":741,"user_id":1057797,"accept_rate":50,"display_name":"magodiez"},"score":0,"creation_date":1339066789,"post_id":10929438,"comment_id":14258846,"body_markdown":"yes, my BatchTester is in the src package...\nI tried your solution, and same problem... :(","body":"yes, my BatchTester is in the src package... I tried your solution, and same problem... :("}],"answers":[{"tags":[],"owner":{"account_id":1041394,"reputation":5637,"user_id":1047365,"accept_rate":86,"display_name":"Jean-R&#233;my Revy"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1339157998,"creation_date":1339157998,"answer_id":10948745,"question_id":10929438,"body_markdown":"Sorry If my questions sounds obvious for you.\r\n\r\n\r\n----------\r\n***Launch Command ***\r\n\r\nIn order to exclude any doubt, didn&#39;t you tried to launch your jar with this kind of command ? \r\n\r\n    java -jar myJar.jar -cp ./lib\r\n\r\nIf you use classpath option, you probably didn&#39;t ;). Option --classpath (or -cp) and -jar can&#39;t be uses together.\r\n\r\nPrefer the use of relative path too, like ./lib instead of P:/Tools/... But, anyway, that won&#39;t solve your problem.\r\n\r\n----------\r\n***Package Location ***\r\n\r\nAs brimborium said, what is you real package ? src sounds very strange. We suspect an error around this.\r\n\r\nIn your BatchTester class, what have you written for package directive ? Nothing (i.e default package which isnot recommanded ?)?\r\n\r\nDoes you class begin with (get rid off comments)\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class BatchTester {\r\nIn that case, for sure, src should not be mentionned.\r\n\r\n\r\n\r\nHere an example of manifest which work for me.\r\n\r\n\tManifest-Version: 1.0\r\n\tArchiver-Version: Plexus Archiver\r\n\tCreated-By: Apache Maven\r\n\tBuilt-By: jrRevy\r\n\tBuild-Jdk: 1.6.0_31\r\n\tMain-Class: com.sopragroup.training.dojo1.MainSwingApp\r\n\tClass-Path: dojo1-0.5.0-SNAPSHOT-lib/spring-core-3.1.1.RELEASE.jar doj\r\n\t o1-0.5.0-SNAPSHOT-lib/spring-asm-3.1.1.RELEASE.jar [blablabla]\r\n\r\nwith the following execution structure\r\n\r\n\r\n    /\r\n    |\r\n    + --dojo1-0.5.0-SNAPSHOT.jar\r\n    |\r\n    + --dojo1-0.5.0-SNAPSHOT-lib/\r\n        |\r\n        + --spring-core-3.1.1.RELEASE.jar\r\n\r\nObviously, I&#39;m using maven for build my app, but the main idea is in.","title":"create jar with custom manifest with multiple libraries in classpath","body":"<p>Sorry If my questions sounds obvious for you.</p>\n\n<hr>\n\n<p>*<strong>Launch Command *</strong></p>\n\n<p>In order to exclude any doubt, didn't you tried to launch your jar with this kind of command ? </p>\n\n<pre><code>java -jar myJar.jar -cp ./lib\n</code></pre>\n\n<p>If you use classpath option, you probably didn't ;). Option --classpath (or -cp) and -jar can't be uses together.</p>\n\n<p>Prefer the use of relative path too, like ./lib instead of P:/Tools/... But, anyway, that won't solve your problem.</p>\n\n<hr>\n\n<p>*<strong>Package Location *</strong></p>\n\n<p>As brimborium said, what is you real package ? src sounds very strange. We suspect an error around this.</p>\n\n<p>In your BatchTester class, what have you written for package directive ? Nothing (i.e default package which isnot recommanded ?)?</p>\n\n<p>Does you class begin with (get rid off comments)\n</p>\n\n<pre><code>public class BatchTester {\n</code></pre>\n\n<p>In that case, for sure, src should not be mentionned.</p>\n\n<p>Here an example of manifest which work for me.</p>\n\n<pre><code>Manifest-Version: 1.0\nArchiver-Version: Plexus Archiver\nCreated-By: Apache Maven\nBuilt-By: jrRevy\nBuild-Jdk: 1.6.0_31\nMain-Class: com.sopragroup.training.dojo1.MainSwingApp\nClass-Path: dojo1-0.5.0-SNAPSHOT-lib/spring-core-3.1.1.RELEASE.jar doj\n o1-0.5.0-SNAPSHOT-lib/spring-asm-3.1.1.RELEASE.jar [blablabla]\n</code></pre>\n\n<p>with the following execution structure</p>\n\n<pre><code>/\n|\n+ --dojo1-0.5.0-SNAPSHOT.jar\n|\n+ --dojo1-0.5.0-SNAPSHOT-lib/\n    |\n    + --spring-core-3.1.1.RELEASE.jar\n</code></pre>\n\n<p>Obviously, I'm using maven for build my app, but the main idea is in.</p>\n"},{"tags":[],"owner":{"account_id":1054837,"reputation":741,"user_id":1057797,"accept_rate":50,"display_name":"magodiez"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1339161710,"creation_date":1339161710,"answer_id":10949702,"question_id":10929438,"body_markdown":"Finally I&#39;ve copied all the libs into the /lib folder and add them into the .jar with an ant target since seems to be OK with the IT guys (because it is a small application).\r\n\r\nHere is the ant(in case is useful for someone):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project name=&quot;BatchTester&quot; default=&quot;compile&quot; basedir=&quot;.&quot;&gt;\r\n    \t&lt;property name=&quot;external&quot; value=&quot;lib/external-libs.jar&quot;/&gt;\r\n    \t&lt;target name=&quot;compile&quot;&gt;\r\n    \t\t&lt;javac srcdir=&quot;jav&quot;\r\n    \t\t       source=&quot;1.6&quot;\r\n    \t\t/&gt;\r\n    \t\t&lt;echo&gt;Creating jar File&lt;/echo&gt;\r\n    \t\t&lt;!--create a new .jar with all the external jars in /lib--&gt;\r\n    \t\t&lt;jar jarfile=&quot;${external}&quot;&gt;\r\n    \t\t\t&lt;zipgroupfileset dir=&quot;lib/&quot;&gt;\r\n    \t\t\t\t&lt;include name=&quot;**/*.jar&quot;/&gt;\r\n    \t\t\t&lt;/zipgroupfileset&gt;\r\n    \t\t&lt;/jar&gt;\r\n    \t\t&lt;!--&lt;sleep seconds=&quot;1&quot;/&gt;--&gt;\r\n    \t\t&lt;!--create .jar file--&gt;\r\n    \t\t&lt;jar jarfile=&quot;BatchTester.jar&quot; index=&quot;true&quot; filesetmanifest=&quot;mergewithoutmain&quot;&gt;\r\n    \t\t\t&lt;fileset dir=&quot;.&quot;&gt;\r\n    \t\t\t\t&lt;include name=&quot;**/jav/**/*.class&quot;/&gt;\r\n    \t\t\t\t&lt;exclude name=&quot;**/jav/**/*.java&quot;/&gt;\r\n    \t\t\t&lt;/fileset&gt;\r\n    \t\t\t&lt;zipfileset src=&quot;${external}&quot;&gt;\r\n    \t\t\t\t&lt;exclude name=&quot;META-INF/*.SF&quot;/&gt;\r\n    \t\t\t&lt;/zipfileset&gt;\r\n    \t\t\t&lt;manifest&gt;\r\n    \t\t\t\t&lt;attribute name=&quot;Main-Class&quot; value=&quot;jav.BatchTester&quot;/&gt;\r\n    \t\t\t&lt;/manifest&gt;\r\n    \t\t&lt;/jar&gt;\r\n    \t\t&lt;!--delete previously created extern .jar--&gt;\r\n    \t\t&lt;delete file=&quot;${external}&quot;/&gt;\r\n    \t&lt;/target&gt;\r\n    &lt;/project&gt;","title":"create jar with custom manifest with multiple libraries in classpath","body":"<p>Finally I've copied all the libs into the /lib folder and add them into the .jar with an ant target since seems to be OK with the IT guys (because it is a small application).</p>\n\n<p>Here is the ant(in case is useful for someone):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project name=\"BatchTester\" default=\"compile\" basedir=\".\"&gt;\n    &lt;property name=\"external\" value=\"lib/external-libs.jar\"/&gt;\n    &lt;target name=\"compile\"&gt;\n        &lt;javac srcdir=\"jav\"\n               source=\"1.6\"\n        /&gt;\n        &lt;echo&gt;Creating jar File&lt;/echo&gt;\n        &lt;!--create a new .jar with all the external jars in /lib--&gt;\n        &lt;jar jarfile=\"${external}\"&gt;\n            &lt;zipgroupfileset dir=\"lib/\"&gt;\n                &lt;include name=\"**/*.jar\"/&gt;\n            &lt;/zipgroupfileset&gt;\n        &lt;/jar&gt;\n        &lt;!--&lt;sleep seconds=\"1\"/&gt;--&gt;\n        &lt;!--create .jar file--&gt;\n        &lt;jar jarfile=\"BatchTester.jar\" index=\"true\" filesetmanifest=\"mergewithoutmain\"&gt;\n            &lt;fileset dir=\".\"&gt;\n                &lt;include name=\"**/jav/**/*.class\"/&gt;\n                &lt;exclude name=\"**/jav/**/*.java\"/&gt;\n            &lt;/fileset&gt;\n            &lt;zipfileset src=\"${external}\"&gt;\n                &lt;exclude name=\"META-INF/*.SF\"/&gt;\n            &lt;/zipfileset&gt;\n            &lt;manifest&gt;\n                &lt;attribute name=\"Main-Class\" value=\"jav.BatchTester\"/&gt;\n            &lt;/manifest&gt;\n        &lt;/jar&gt;\n        &lt;!--delete previously created extern .jar--&gt;\n        &lt;delete file=\"${external}\"/&gt;\n    &lt;/target&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2039154,"reputation":702,"user_id":1820778,"display_name":"Pedro"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635413917,"creation_date":1536308693,"answer_id":52218395,"question_id":10929438,"body_markdown":"The manifest doesn&#39;t allow absolute paths in the *Class-Path:* tag. You have two alternatives:\r\n\r\n - Use relative paths as you already mention in your own answer\r\n - Use absolute paths via *file* protocol. This has been answered elsewhere too and it works https://stackoverflow.com/questions/47961942/absolute-versus-relative-path-names-in-jar-manifest\r\n\r\n    Class-Path: file:///P:/Tools/xstream/1.4.2/lib/kxml2-2.3.0.jar\r\n\r\nIn addition, you should not edit the manifest.mf manually without being aware of several limitations:\r\n\r\n - line maximum length must not exceed 72 characters, and after breaking one line you must insert an space in the first column.\r\n - There must be a carriage return after the last line otherwise, the file can&#39;t be parsed correctly\r\n\r\n","title":"create jar with custom manifest with multiple libraries in classpath","body":"<p>The manifest doesn't allow absolute paths in the <em>Class-Path:</em> tag. You have two alternatives:</p>\n<ul>\n<li><p>Use relative paths as you already mention in your own answer</p>\n</li>\n<li><p>Use absolute paths via <em>file</em> protocol. This has been answered elsewhere too and it works <a href=\"https://stackoverflow.com/questions/47961942/absolute-versus-relative-path-names-in-jar-manifest\">absolute versus relative path names in jar manifest</a></p>\n<p>Class-Path: file:///P:/Tools/xstream/1.4.2/lib/kxml2-2.3.0.jar</p>\n</li>\n</ul>\n<p>In addition, you should not edit the manifest.mf manually without being aware of several limitations:</p>\n<ul>\n<li>line maximum length must not exceed 72 characters, and after breaking one line you must insert an space in the first column.</li>\n<li>There must be a carriage return after the last line otherwise, the file can't be parsed correctly</li>\n</ul>\n"}],"owner":{"account_id":1054837,"reputation":741,"user_id":1057797,"accept_rate":50,"display_name":"magodiez"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38129,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":10949702,"answer_count":3,"score":5,"last_activity_date":1682273554,"creation_date":1339062473,"question_id":10929438,"body_markdown":"I&#39;m trying to create a jar from my eclipse and in order to be able to use the external .jars, I&#39;m using this manifest with multiple .jars in the classpath:\r\n\r\n    Manifest-Version: 1.0\r\n    Sealed: true\r\n    Main-Class: src.BatchTester\r\n    Class-Path: . P:/Tools/xstream/1.4.2/lib/kxml2-2.3.0.jar P:/Tools/xstream/1.4.2/lib/xstream-1.4.2.jar P:/Tools/StringTemplate/4.0.5/lib/antlr-3.3-complete.jar P:/Tools/StringTemplate/4.0.5/lib/ST-4.0.5.jar P:/Tools/Jdbc/lib/sqljdbc4.jar\r\n    \r\n\r\nObviously if I don&#39;t put the libraries in the classpath the following error appears:\r\n\r\n    java.lang.NoClassDefFoundError: com/thoughtworks/xstream/XStream\r\n\r\nBut when I put them in the classpath the error changes to:\r\n\r\n    java.lang.NoClassDefFoundError: src/BatchTester\r\nSo it seemps that it can&#39;t found my main class. I&#39;ve tryed with several possibilities in the classpath, like adding or removing `.` to the classpath, but can&#39;t make it work.\r\n\r\nAny idea of how can I solve this???\r\n\r\nThanks for your time and effort,\r\n\r\n---\r\n\r\nPS: After creating the .jar the classpath in the manifest inside looks like:\r\n\r\n    Class-Path: . P:/Tools/xstream/1.4.2/lib/kxml2-2.3.0.jar P:/Tools/xstr\r\n     eam/1.4.2/lib/xstream-1.4.2.jar P:/Tools/StringTemplate/4.0.5/lib/ant\r\n     lr-3.3-complete.jar P:/Tools/StringTemplate/4.0.5/lib/ST-4.0.5.jar P:\r\n     /Tools/Jdbc/lib/sqljdbc4.jar \r\nwith new lines and spaces, but even after changing it to the &quot;right&quot; format, I got the same problems.\r\n\r\nPS2: I know that with some plugins like Fat-Jar you can make it work, but I don&#39;t want to insert more data than needed in my .jar","title":"create jar with custom manifest with multiple libraries in classpath","body":"<p>I'm trying to create a jar from my eclipse and in order to be able to use the external .jars, I'm using this manifest with multiple .jars in the classpath:</p>\n\n<pre><code>Manifest-Version: 1.0\nSealed: true\nMain-Class: src.BatchTester\nClass-Path: . P:/Tools/xstream/1.4.2/lib/kxml2-2.3.0.jar P:/Tools/xstream/1.4.2/lib/xstream-1.4.2.jar P:/Tools/StringTemplate/4.0.5/lib/antlr-3.3-complete.jar P:/Tools/StringTemplate/4.0.5/lib/ST-4.0.5.jar P:/Tools/Jdbc/lib/sqljdbc4.jar\n</code></pre>\n\n<p>Obviously if I don't put the libraries in the classpath the following error appears:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: com/thoughtworks/xstream/XStream\n</code></pre>\n\n<p>But when I put them in the classpath the error changes to:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: src/BatchTester\n</code></pre>\n\n<p>So it seemps that it can't found my main class. I've tryed with several possibilities in the classpath, like adding or removing <code>.</code> to the classpath, but can't make it work.</p>\n\n<p>Any idea of how can I solve this???</p>\n\n<p>Thanks for your time and effort,</p>\n\n<hr>\n\n<p>PS: After creating the .jar the classpath in the manifest inside looks like:</p>\n\n<pre><code>Class-Path: . P:/Tools/xstream/1.4.2/lib/kxml2-2.3.0.jar P:/Tools/xstr\n eam/1.4.2/lib/xstream-1.4.2.jar P:/Tools/StringTemplate/4.0.5/lib/ant\n lr-3.3-complete.jar P:/Tools/StringTemplate/4.0.5/lib/ST-4.0.5.jar P:\n /Tools/Jdbc/lib/sqljdbc4.jar \n</code></pre>\n\n<p>with new lines and spaces, but even after changing it to the \"right\" format, I got the same problems.</p>\n\n<p>PS2: I know that with some plugins like Fat-Jar you can make it work, but I don't want to insert more data than needed in my .jar</p>\n"},{"tags":["java","jms","ibm-mq"],"owner":{"account_id":28385935,"reputation":1,"user_id":21712400,"display_name":"Manish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682273080,"creation_date":1682263616,"question_id":76085713,"body_markdown":"When I try this in multi-threaded context it is working properly.\r\n```java\r\nfinal QueueSession session=con.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\r\n```\r\nWhen I try the same in a try/catch block it works sometimes:\r\n```java\r\nQueueSession session = null;\r\ntry {\r\n   session= con.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\r\n} catch(Exception) {\r\n\r\n} finally {\r\n\r\n}\r\n```\r\nBut sometimes it throws an exception like:\r\n```\r\njavax.jms.JMSException: Failed to create queue session\r\n```\r\n[![enter image description here][1]][1]\r\n\r\nCould you please help ?\r\nThanks,\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/w13wi.png","title":"javax.jms.JMSException: Failed to create queue session","body":"<p>When I try this in multi-threaded context it is working properly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final QueueSession session=con.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\n</code></pre>\n<p>When I try the same in a try/catch block it works sometimes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>QueueSession session = null;\ntry {\n   session= con.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\n} catch(Exception) {\n\n} finally {\n\n}\n</code></pre>\n<p>But sometimes it throws an exception like:</p>\n<pre><code>javax.jms.JMSException: Failed to create queue session\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/w13wi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w13wi.png\" alt=\"enter image description here\" /></a></p>\n<p>Could you please help ?\nThanks,</p>\n"},{"tags":["java","mysql","linux","spring-boot","information-hiding"],"comments":[{"owner":{"account_id":1490931,"reputation":410,"user_id":1398030,"display_name":"Madhawa Gunasekara"},"score":0,"creation_date":1682251095,"post_id":76084222,"comment_id":134182549,"body_markdown":"Different suggestions to hide credentials in your SpringBoot application are use Jasypt to encrypt properties or configure an external Secrets Manager like HashiCorp Vault. https://stackoverflow.com/questions/37404703/spring-boot-how-to-hide-passwords-in-properties-file","body":"Different suggestions to hide credentials in your SpringBoot application are use Jasypt to encrypt properties or configure an external Secrets Manager like HashiCorp Vault. <a href=\"https://stackoverflow.com/questions/37404703/spring-boot-how-to-hide-passwords-in-properties-file\" title=\"spring boot how to hide passwords in properties file\">stackoverflow.com/questions/37404703/&hellip;</a>"},{"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"score":0,"creation_date":1682268802,"post_id":76084222,"comment_id":134184960,"body_markdown":"Thank you this helped, everything is fine now :)","body":"Thank you this helped, everything is fine now :)"}],"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":806,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682272023,"creation_date":1682244233,"question_id":76084222,"body_markdown":"SOLVED\r\n-----\r\n\r\n\r\n----------\r\n\r\nSolution:\r\n-----\r\n\r\nUsing **Jasypt**. You can click [here][1] for more information how to set up. There is just **one** thing to mention. For me, it didn&#39;t work as if I configure the *application.properties* as they say. Therefore, you have to add one more line. These are the steps how to encrypt your credentials and configure them in application.properties:\r\n\r\n 1. First you need to encrypt the string values running this in your terminal (**NOTE:** I am currently using Linux, so it may vary depending on your OS):\r\n \r\n```\r\nmvn jasypt:encrypt-value -Djasypt.encryptor.password=encryptorPassword -Djasypt.plugin.value=password\r\n```\r\nAfter running this you would see something like this:\r\n```\r\nENC(MBTWfX8gqMevQe5CKW0pToMbajnpJk0zlb3yoooiSWPjkfYrE8TFNF6vDEMXTu/j)\r\n```\r\nThis is going to be your encrypted value wrapped inside ENC().\r\n\r\nYou can then check if your *password* is actually encrypted. Run this command:\r\n```\r\nmvn jasypt:decrypt-value -Djasypt.encryptor.password=encryptorPassword -Djasypt.plugin.value=MBTWfX8gqMevQe5CKW0pToMbajnpJk0zlb3yoooiSWPjkfYrE8TFNF6vDEMXTu/j\r\n\r\n```\r\nAnd you should see your actual *password*.\r\nFollowing the same steps, you can encrypt your database name etc. as well.\r\n \r\n 2. Now, you have to pass **VM** argument in your IDE, I am going to show you how to do in in **IntelliJ**. Go to `Edit Configurations` in the IDE and fill `Program arguments`, therefore `apply` then `OK` button:\r\n[![enter image description here][2]][2]\r\n 3. Last step is to correctly set up configuration file, here I am showing how to configure it in **application.properties** file:\r\n\r\n```\r\nspring.datasource.url=jdbc:mysql://localhost:3306/db_name?serverTimezone=UTC&amp;useUnicode=yes&amp;characterEncoding=UTF-8\r\nspring.datasource.username=root\r\nspring.datasource.password=ENC(MBTWfX8gqMevQe5CKW0pToMbajnpJk0zlb3yoooiSWPjkfYrE8TFNF6vDEMXTu/j)\r\njasypt.encryptor.password=encryptorPassword\r\njasypt.encryptor.algorithm=PBEWithMD5AndDES\r\njasypt.encryptor.iv-generator-classname=org.jasypt.iv.NoIvGenerator\r\n```\r\n\r\nNow, your Spring Boot Application should just work fine. Good Luck!\r\n\r\n----------\r\n\r\n\r\nI am currently using the latest version of Spring Boot(version 3.0.5) in **IntelliJ IDEA**. I want to hide my database credentials, *username* and *password*, in a good way then configure them in the **application.properties**.\r\n\r\n\r\n**Note:** I am using Linux(Ubuntu) and you can assume that my credentials are correct.\r\n\r\nAs far as I know, a good way of handling this problem is setting up environment variables and configure them in the **application.properties** or whatever you are using to store your configuration properties.&lt;br/&gt;Therefore, in the **./zhsrc** file I set new environment variables: `DB_USERNAME` and `DB_PASSWORD`. After, I configured them in the **.properties** file. Here how it looks like:\r\n[click here to see the image](https://i.stack.imgur.com/JJM9E.png).&lt;br/&gt;\r\n\r\nHowever, it is like my environment variables are not recognized during the application running. I get this error:\r\n```\r\n2023-04-23 10:42:14 [main] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.\r\njava.sql.SQLException: Access denied for user &#39;${DB_USERNAME}&#39;@&#39;localhost&#39; (using password: YES)\r\n...\r\n...\r\n2023-04-23 10:42:14 [main] WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata\r\njava.sql.SQLException: Access denied for user &#39;${DB_USERNAME}&#39;@&#39;localhost&#39; (using password: YES\r\n```\r\n\r\nI solved this problem using alternative way (I don&#39;t like it though). What I did is creating two script files (in the source root) named `run_app.sh`(this sets up the same environment variables temporarily every time during running the script) and `stop_app.sh`(this kills the process running on the *8080* port). If I don&#39;t have `stop_app.sh`, I can&#39;t run the application again, as it cannot be run on the same port. It was the way of killing the process on the *8080* port. &lt;br/&gt;\r\nWhy I don&#39;t want to run these scripts is that, if I want to write some tests I will face the same issue, then I have to create other scripts, specifically for my tests.&lt;br/&gt;\r\n*AGREE...Boring and long*&lt;br/&gt;\r\n\r\nHow would you handle this problem?\r\n\r\n\r\n  [1]: https://www.codejava.net/frameworks/spring-boot/spring-boot-password-encryption\r\n  [2]: https://i.stack.imgur.com/qI0PZ.png","title":"How to hide database credentials in Spring Boot application?","body":"<h2>SOLVED</h2>\n<hr />\n<h2>Solution:</h2>\n<p>Using <strong>Jasypt</strong>. You can click <a href=\"https://www.codejava.net/frameworks/spring-boot/spring-boot-password-encryption\" rel=\"nofollow noreferrer\">here</a> for more information how to set up. There is just <strong>one</strong> thing to mention. For me, it didn't work as if I configure the <em>application.properties</em> as they say. Therefore, you have to add one more line. These are the steps how to encrypt your credentials and configure them in application.properties:</p>\n<ol>\n<li>First you need to encrypt the string values running this in your terminal (<strong>NOTE:</strong> I am currently using Linux, so it may vary depending on your OS):</li>\n</ol>\n<pre><code>mvn jasypt:encrypt-value -Djasypt.encryptor.password=encryptorPassword -Djasypt.plugin.value=password\n</code></pre>\n<p>After running this you would see something like this:</p>\n<pre><code>ENC(MBTWfX8gqMevQe5CKW0pToMbajnpJk0zlb3yoooiSWPjkfYrE8TFNF6vDEMXTu/j)\n</code></pre>\n<p>This is going to be your encrypted value wrapped inside ENC().</p>\n<p>You can then check if your <em>password</em> is actually encrypted. Run this command:</p>\n<pre><code>mvn jasypt:decrypt-value -Djasypt.encryptor.password=encryptorPassword -Djasypt.plugin.value=MBTWfX8gqMevQe5CKW0pToMbajnpJk0zlb3yoooiSWPjkfYrE8TFNF6vDEMXTu/j\n\n</code></pre>\n<p>And you should see your actual <em>password</em>.\nFollowing the same steps, you can encrypt your database name etc. as well.</p>\n<ol start=\"2\">\n<li>Now, you have to pass <strong>VM</strong> argument in your IDE, I am going to show you how to do in in <strong>IntelliJ</strong>. Go to <code>Edit Configurations</code> in the IDE and fill <code>Program arguments</code>, therefore <code>apply</code> then <code>OK</code> button:\n<a href=\"https://i.stack.imgur.com/qI0PZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qI0PZ.png\" alt=\"enter image description here\" /></a></li>\n<li>Last step is to correctly set up configuration file, here I am showing how to configure it in <strong>application.properties</strong> file:</li>\n</ol>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/db_name?serverTimezone=UTC&amp;useUnicode=yes&amp;characterEncoding=UTF-8\nspring.datasource.username=root\nspring.datasource.password=ENC(MBTWfX8gqMevQe5CKW0pToMbajnpJk0zlb3yoooiSWPjkfYrE8TFNF6vDEMXTu/j)\njasypt.encryptor.password=encryptorPassword\njasypt.encryptor.algorithm=PBEWithMD5AndDES\njasypt.encryptor.iv-generator-classname=org.jasypt.iv.NoIvGenerator\n</code></pre>\n<p>Now, your Spring Boot Application should just work fine. Good Luck!</p>\n<hr />\n<p>I am currently using the latest version of Spring Boot(version 3.0.5) in <strong>IntelliJ IDEA</strong>. I want to hide my database credentials, <em>username</em> and <em>password</em>, in a good way then configure them in the <strong>application.properties</strong>.</p>\n<p><strong>Note:</strong> I am using Linux(Ubuntu) and you can assume that my credentials are correct.</p>\n<p>As far as I know, a good way of handling this problem is setting up environment variables and configure them in the <strong>application.properties</strong> or whatever you are using to store your configuration properties.<br/>Therefore, in the <strong>./zhsrc</strong> file I set new environment variables: <code>DB_USERNAME</code> and <code>DB_PASSWORD</code>. After, I configured them in the <strong>.properties</strong> file. Here how it looks like:\n<a href=\"https://i.stack.imgur.com/JJM9E.png\" rel=\"nofollow noreferrer\">click here to see the image</a>.<br/></p>\n<p>However, it is like my environment variables are not recognized during the application running. I get this error:</p>\n<pre><code>2023-04-23 10:42:14 [main] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.\njava.sql.SQLException: Access denied for user '${DB_USERNAME}'@'localhost' (using password: YES)\n...\n...\n2023-04-23 10:42:14 [main] WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata\njava.sql.SQLException: Access denied for user '${DB_USERNAME}'@'localhost' (using password: YES\n</code></pre>\n<p>I solved this problem using alternative way (I don't like it though). What I did is creating two script files (in the source root) named <code>run_app.sh</code>(this sets up the same environment variables temporarily every time during running the script) and <code>stop_app.sh</code>(this kills the process running on the <em>8080</em> port). If I don't have <code>stop_app.sh</code>, I can't run the application again, as it cannot be run on the same port. It was the way of killing the process on the <em>8080</em> port. <br/>\nWhy I don't want to run these scripts is that, if I want to write some tests I will face the same issue, then I have to create other scripts, specifically for my tests.<br/>\n<em>AGREE...Boring and long</em><br/></p>\n<p>How would you handle this problem?</p>\n"},{"tags":["java","exception","try-catch","multi-catch"],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":5,"up_vote_count":36,"is_accepted":false,"score":31,"last_activity_date":1631795619,"creation_date":1281982142,"answer_id":3495948,"question_id":3495926,"body_markdown":"No, one per customer prior to Java 7.\r\n\r\nYou can catch a superclass, like java.lang.Exception, as long as you take the same action in all cases.\r\n\r\n    try {\r\n        // some code\r\n    } catch(Exception e) { //All exceptions are caught here as all are inheriting java.lang.Exception\r\n        e.printStackTrace();\r\n    }\r\n\r\nBut that might not be the best practice.  You should only catch an exception when you have a strategy for actually handling it - and logging and rethrowing is not &quot;handling it&quot;.  If you don&#39;t have a corrective action, better to add it to the method signature and let it bubble up to someone that can handle the situation.\r\n\r\nWith JDK 7 and later you can do this: \r\n\r\n    try {\r\n        ...     \r\n    } catch (IllegalArgumentException | SecurityException | IllegalAccessException | NoSuchFieldException e) {\r\n        someCode();\r\n    }\r\n\r\n","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>No, one per customer prior to Java 7.</p>\n<p>You can catch a superclass, like java.lang.Exception, as long as you take the same action in all cases.</p>\n<pre><code>try {\n    // some code\n} catch(Exception e) { //All exceptions are caught here as all are inheriting java.lang.Exception\n    e.printStackTrace();\n}\n</code></pre>\n<p>But that might not be the best practice.  You should only catch an exception when you have a strategy for actually handling it - and logging and rethrowing is not &quot;handling it&quot;.  If you don't have a corrective action, better to add it to the method signature and let it bubble up to someone that can handle the situation.</p>\n<p>With JDK 7 and later you can do this:</p>\n<pre><code>try {\n    ...     \n} catch (IllegalArgumentException | SecurityException | IllegalAccessException | NoSuchFieldException e) {\n    someCode();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1281982205,"creation_date":1281982205,"answer_id":3495956,"question_id":3495926,"body_markdown":"Catch the exception that happens to be a parent class in the exception hierarchy. [This is of course, bad practice][1]. In your case, the common parent exception happens to be the Exception class, and catching any exception that is an instance of Exception, is indeed bad practice - exceptions like NullPointerException are usually programming errors and should usually be resolved by checking for null values.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/21938/is-it-really-that-bad-to-catch-a-general-exception","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>Catch the exception that happens to be a parent class in the exception hierarchy. <a href=\"https://stackoverflow.com/questions/21938/is-it-really-that-bad-to-catch-a-general-exception\">This is of course, bad practice</a>. In your case, the common parent exception happens to be the Exception class, and catching any exception that is an instance of Exception, is indeed bad practice - exceptions like NullPointerException are usually programming errors and should usually be resolved by checking for null values.</p>\n"},{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"down_vote_count":1,"up_vote_count":1350,"is_accepted":true,"score":1349,"last_activity_date":1603173981,"creation_date":1281982272,"answer_id":3495968,"question_id":3495926,"body_markdown":"This has been possible [since Java 7](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html). The syntax for a multi-catch block is:\r\n\r\n```java\r\ntry { \r\n  ...\r\n} catch (IllegalArgumentException | SecurityException | IllegalAccessException |\r\n            NoSuchFieldException e) { \r\n  someCode();\r\n}\r\n```\r\n\r\nRemember, though, that if all the exceptions belong to the same class hierarchy, you can simply catch that base exception type.\r\n\r\nAlso note that you cannot catch both `ExceptionA` and `ExceptionB` in the same block if `ExceptionB` is inherited, either directly or indirectly, from `ExceptionA`. The compiler will complain:\r\n\r\n```none\r\nAlternatives in a multi-catch statement cannot be related by subclassing\r\n  Alternative ExceptionB is a subclass of alternative ExceptionA\r\n```\r\n\r\nThe fix for this is to only include the ancestor exception in the exception list, as it will also catch exceptions of the descendant type.","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>This has been possible <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html\" rel=\"noreferrer\">since Java 7</a>. The syntax for a multi-catch block is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try { \n  ...\n} catch (IllegalArgumentException | SecurityException | IllegalAccessException |\n            NoSuchFieldException e) { \n  someCode();\n}\n</code></pre>\n<p>Remember, though, that if all the exceptions belong to the same class hierarchy, you can simply catch that base exception type.</p>\n<p>Also note that you cannot catch both <code>ExceptionA</code> and <code>ExceptionB</code> in the same block if <code>ExceptionB</code> is inherited, either directly or indirectly, from <code>ExceptionA</code>. The compiler will complain:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Alternatives in a multi-catch statement cannot be related by subclassing\n  Alternative ExceptionB is a subclass of alternative ExceptionA\n</code></pre>\n<p>The fix for this is to only include the ancestor exception in the exception list, as it will also catch exceptions of the descendant type.</p>\n"},{"tags":[],"owner":{"account_id":153878,"reputation":2055,"user_id":369446,"accept_rate":100,"display_name":"Michael Shopsin"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1486263660,"creation_date":1281982337,"answer_id":3495974,"question_id":3495926,"body_markdown":"If there is a hierarchy of exceptions you can use the base class to catch all subclasses of exceptions. In the degenerate case you can catch **all** Java exceptions with:\r\n\r\n    try {\r\n       ...\r\n    } catch (Exception e) {\r\n       someCode();\r\n    }\r\n\r\nIn a more common case if RepositoryException is the the base class and PathNotFoundException is a derived class then:\r\n\r\n    try {\r\n       ...\r\n    } catch (RepositoryException re) {\r\n       someCode();\r\n    } catch (Exception e) {\r\n       someCode();\r\n    }\r\n\r\nThe above code will catch RepositoryException and PathNotFoundException for one kind of exception handling and all other exceptions are lumped together.\r\nSince Java 7, as per @OscarRyz&#39;s answer above:\r\n\r\n    try { \r\n      ...\r\n    } catch( IOException | SQLException ex ) { \r\n      ...\r\n    }","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>If there is a hierarchy of exceptions you can use the base class to catch all subclasses of exceptions. In the degenerate case you can catch <strong>all</strong> Java exceptions with:</p>\n\n<pre><code>try {\n   ...\n} catch (Exception e) {\n   someCode();\n}\n</code></pre>\n\n<p>In a more common case if RepositoryException is the the base class and PathNotFoundException is a derived class then:</p>\n\n<pre><code>try {\n   ...\n} catch (RepositoryException re) {\n   someCode();\n} catch (Exception e) {\n   someCode();\n}\n</code></pre>\n\n<p>The above code will catch RepositoryException and PathNotFoundException for one kind of exception handling and all other exceptions are lumped together.\nSince Java 7, as per @OscarRyz's answer above:</p>\n\n<pre><code>try { \n  ...\n} catch( IOException | SQLException ex ) { \n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1321914455,"creation_date":1281982364,"answer_id":3495976,"question_id":3495926,"body_markdown":"Within Java 7 you can define multiple catch clauses like:\r\n\r\n    catch (IllegalArgumentException | SecurityException e)\r\n    {\r\n        ...\r\n    }","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>Within Java 7 you can define multiple catch clauses like:</p>\n\n<pre><code>catch (IllegalArgumentException | SecurityException e)\n{\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":205522,"reputation":7359,"user_id":454322,"accept_rate":76,"display_name":"user454322"},"down_vote_count":5,"up_vote_count":124,"is_accepted":false,"score":119,"last_activity_date":1675449591,"creation_date":1346145350,"answer_id":12156157,"question_id":3495926,"body_markdown":"Not exactly before Java 7 but, I would do something like this:\r\n&lt;br&gt;&lt;br&gt;\r\n\r\nJava 6 and before\r\n\r\n\r\n    try {\r\n      //.....\r\n    } catch (Exception exc) {\r\n      if (exc instanceof IllegalArgumentException || exc instanceof SecurityException || \r\n         exc instanceof IllegalAccessException || exc instanceof NoSuchFieldException ) {\r\n        \r\n         someCode();\r\n\r\n      } else if (exc instanceof RuntimeException) {\r\n         throw (RuntimeException) exc;     \r\n\r\n      } else {\r\n        throw new RuntimeException(exc);\r\n      }\r\n\r\n    }\r\n  \r\n&lt;br&gt;  \r\nJava 7\r\n\r\n    try {\r\n      //.....\r\n    } catch ( IllegalArgumentException | SecurityException |\r\n             IllegalAccessException| NoSuchFieldException exc) {\r\n      someCode();\r\n    }\r\n    ","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>Not exactly before Java 7 but, I would do something like this:\n<br><br></p>\n<p>Java 6 and before</p>\n<pre><code>try {\n  //.....\n} catch (Exception exc) {\n  if (exc instanceof IllegalArgumentException || exc instanceof SecurityException || \n     exc instanceof IllegalAccessException || exc instanceof NoSuchFieldException ) {\n    \n     someCode();\n\n  } else if (exc instanceof RuntimeException) {\n     throw (RuntimeException) exc;     \n\n  } else {\n    throw new RuntimeException(exc);\n  }\n\n}\n</code></pre>\n<br>  \nJava 7\n<pre><code>try {\n  //.....\n} catch ( IllegalArgumentException | SecurityException |\n         IllegalAccessException| NoSuchFieldException exc) {\n  someCode();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":442250,"reputation":12524,"user_id":832776,"accept_rate":100,"display_name":"Oleg Vaskevich"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1440782282,"creation_date":1382130272,"answer_id":19459025,"question_id":3495926,"body_markdown":"A cleaner (but less verbose, and perhaps not as preferred) alternative to user454322&#39;s answer on Java 6 (i.e., Android) would be to catch all `Exception`s and re-throw `RuntimeException`s. This wouldn&#39;t work if you&#39;re planning on catching other types of exceptions further up the stack (unless you also re-throw them), but will effectively catch all *checked* exceptions.\r\n\r\nFor instance:\r\n\r\n    try {\r\n        // CODE THAT THROWS EXCEPTION\r\n    } catch (Exception e) {\r\n        if (e instanceof RuntimeException) {\r\n            // this exception was not expected, so re-throw it\r\n            throw e;\r\n        } else {\r\n            // YOUR CODE FOR ALL CHECKED EXCEPTIONS\r\n        } \r\n    }\r\n\r\nThat being said, for verbosity, it might be best to set a boolean or some other variable and based on that execute some code after the try-catch block.","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>A cleaner (but less verbose, and perhaps not as preferred) alternative to user454322's answer on Java 6 (i.e., Android) would be to catch all <code>Exception</code>s and re-throw <code>RuntimeException</code>s. This wouldn't work if you're planning on catching other types of exceptions further up the stack (unless you also re-throw them), but will effectively catch all <em>checked</em> exceptions.</p>\n\n<p>For instance:</p>\n\n<pre><code>try {\n    // CODE THAT THROWS EXCEPTION\n} catch (Exception e) {\n    if (e instanceof RuntimeException) {\n        // this exception was not expected, so re-throw it\n        throw e;\n    } else {\n        // YOUR CODE FOR ALL CHECKED EXCEPTIONS\n    } \n}\n</code></pre>\n\n<p>That being said, for verbosity, it might be best to set a boolean or some other variable and based on that execute some code after the try-catch block.</p>\n"},{"tags":[],"owner":{"account_id":5797580,"reputation":49,"user_id":4572887,"display_name":"Bill S"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1424110084,"creation_date":1424110084,"answer_id":28547679,"question_id":3495926,"body_markdown":"In pre-7 how about:\r\n\r\n      Boolean   caught = true;\r\n      Exception e;\r\n      try {\r\n         ...\r\n         caught = false;\r\n      } catch (TransformerException te) {\r\n         e = te;\r\n      } catch (SocketException se) {\r\n         e = se;\r\n      } catch (IOException ie) {\r\n         e = ie;\r\n      }\r\n      if (caught) {\r\n         someCode(); // You can reference Exception e here.\r\n      }\r\n","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>In pre-7 how about:</p>\n\n<pre><code>  Boolean   caught = true;\n  Exception e;\n  try {\n     ...\n     caught = false;\n  } catch (TransformerException te) {\n     e = te;\n  } catch (SocketException se) {\n     e = se;\n  } catch (IOException ie) {\n     e = ie;\n  }\n  if (caught) {\n     someCode(); // You can reference Exception e here.\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":185012,"reputation":3371,"user_id":421467,"accept_rate":100,"display_name":"Dr.jacky"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1568749688,"creation_date":1568749688,"answer_id":57981130,"question_id":3495926,"body_markdown":"For kotlin, it&#39;s not possible for now but they&#39;ve considered to add it: [Source][1]  \r\nBut for now, just a little trick:\r\n```\r\ntry {\r\n    // code\r\n} catch(ex:Exception) {\r\n    when(ex) {\r\n        is SomeException,\r\n        is AnotherException -&gt; {\r\n            // handle\r\n        }\r\n        else -&gt; throw ex\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://discuss.kotlinlang.org/t/does-kotlin-have-multi-catch/486","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>For kotlin, it's not possible for now but they've considered to add it: <a href=\"https://discuss.kotlinlang.org/t/does-kotlin-have-multi-catch/486\" rel=\"nofollow noreferrer\">Source</a><br>\nBut for now, just a little trick:</p>\n\n<pre><code>try {\n    // code\n} catch(ex:Exception) {\n    when(ex) {\n        is SomeException,\n        is AnotherException -&gt; {\n            // handle\n        }\n        else -&gt; throw ex\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20011413,"reputation":41,"user_id":15044564,"display_name":"Hardik Shah"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1611145451,"creation_date":1611145451,"answer_id":65809512,"question_id":3495926,"body_markdown":"It is very simple:\r\n\r\n    try { \r\n      // Your code here.\r\n    } catch (IllegalArgumentException | SecurityException | IllegalAccessException |\r\n                NoSuchFieldException e) { \r\n      // Handle exception here.\r\n    }","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>It is very simple:</p>\n<pre><code>try { \n  // Your code here.\n} catch (IllegalArgumentException | SecurityException | IllegalAccessException |\n            NoSuchFieldException e) { \n  // Handle exception here.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16967123,"reputation":3285,"user_id":12272687,"display_name":"Mori"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682271072,"creation_date":1682271072,"answer_id":76086288,"question_id":3495926,"body_markdown":"in **Kotlin**, this way can be useful:\r\n\r\n \r\n\r\n    var result = false\r\n           \r\n                try { ...\r\n                       result=false\r\n    \r\n                        }catch (ex:Exception ){\r\n    \r\n                    when (ex) {\r\n                        is SocketTimeoutException,\r\n                        is NetworkOnMainThreadException,\r\n                        is UnknownHostException,\r\n                        is IllegalThreadStateException -&gt; result=false\r\n                        else -&gt; throw ex\r\n                    }\r\n                    \r\n                     }","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>in <strong>Kotlin</strong>, this way can be useful:</p>\n<pre><code>var result = false\n       \n            try { ...\n                   result=false\n\n                    }catch (ex:Exception ){\n\n                when (ex) {\n                    is SocketTimeoutException,\n                    is NetworkOnMainThreadException,\n                    is UnknownHostException,\n                    is IllegalThreadStateException -&gt; result=false\n                    else -&gt; throw ex\n                }\n                \n                 }\n</code></pre>\n"}],"owner":{"account_id":95258,"reputation":80673,"user_id":259541,"accept_rate":81,"display_name":"froadie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":668521,"favorite_count":0,"down_vote_count":1,"up_vote_count":858,"accepted_answer_id":3495968,"answer_count":11,"score":857,"last_activity_date":1682271072,"creation_date":1281982023,"question_id":3495926,"body_markdown":"In Java, I want to do something like this:\r\n\r\n\r\n    try {\r\n    \t...\t\t\r\n    } catch (/* code to catch IllegalArgumentException, SecurityException, \r\n    \t        IllegalAccessException, and NoSuchFieldException at the same time */) {\r\n       someCode();\r\n    }\r\n\r\n...instead of:\r\n\r\n    try {\r\n    \t...\t\t\r\n    } catch (IllegalArgumentException e) {\r\n    \tsomeCode();\r\n    } catch (SecurityException e) {\r\n    \tsomeCode();\r\n    } catch (IllegalAccessException e) {\r\n    \tsomeCode();\r\n    } catch (NoSuchFieldException e) {\r\n    \tsomeCode();\r\n    }\r\n\r\nIs there any way to do this?\r\n\r\n   ","title":"Can I catch multiple Java exceptions in the same catch clause?","body":"<p>In Java, I want to do something like this:</p>\n\n<pre><code>try {\n    ...     \n} catch (/* code to catch IllegalArgumentException, SecurityException, \n            IllegalAccessException, and NoSuchFieldException at the same time */) {\n   someCode();\n}\n</code></pre>\n\n<p>...instead of:</p>\n\n<pre><code>try {\n    ...     \n} catch (IllegalArgumentException e) {\n    someCode();\n} catch (SecurityException e) {\n    someCode();\n} catch (IllegalAccessException e) {\n    someCode();\n} catch (NoSuchFieldException e) {\n    someCode();\n}\n</code></pre>\n\n<p>Is there any way to do this?</p>\n"},{"tags":["java","spring","scheduled-tasks","distributed-computing"],"comments":[{"owner":{"account_id":147773,"reputation":9594,"user_id":359120,"accept_rate":82,"display_name":"Salil"},"score":0,"creation_date":1682433859,"post_id":76086264,"comment_id":134212886,"body_markdown":"Since you said the app instances read any task in INITIAL state regardless of service_id, why are you bothering with service_id assignments while creating these tasks? You can add as many app instances as you want then.","body":"Since you said the app instances read any task in INITIAL state regardless of service_id, why are you bothering with service_id assignments while creating these tasks? You can add as many app instances as you want then."},{"owner":{"account_id":7183967,"reputation":204,"user_id":8117681,"display_name":"hq-coder"},"score":0,"creation_date":1682521564,"post_id":76086264,"comment_id":134229978,"body_markdown":"@Salil that is the first step, in the second step it updates those records with service id","body":"@Salil that is the first step, in the second step it updates those records with service id"}],"owner":{"account_id":7183967,"reputation":204,"user_id":8117681,"display_name":"hq-coder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682270785,"creation_date":1682270785,"question_id":76086264,"body_markdown":"I have a legacy .net application that run as multiple instances each having different `service_id` hardcoded into each instances&#39; server. With the help of `service_id` assigned to each instance, they are able to read some task information kept on a database table having columns (`id`, `task_content`, `service_id`, `task_status`) and execute some long running job.\r\n\r\n`task_status` represents the status of task as `INITIAL`, `PROCESSING`, `PROCESSED`, `ERROR`.\r\n\r\nDistribution of task is as follows:\r\n* Each app instances periodically read the tasks with status equal to `INITIAL` regardless of `service_id` and update those records with new status as `PROCESSING` and `service_id` as the number assigned to the instance.\r\n* Then they read `PROCESSING` tasks and `service_id` equal to their assigned number and execute the job\r\n* Then they update the status of task either as `PROCESSED` or `ERROR`.\r\n\r\nThis way, they are sharing tasks across each instance and each app does execute tasks only belongs to its instance.\r\n\r\nMy task is to add some other instances by rewriting in java/spring framework (preserving already running legacy apps) and deploy as pods to kubernetess environment where I cannot give to unique number (`service_id`) to enumerate them.\r\n\r\nIf I somehow enumerate a running container uniquely across all instances I can use this enumeration as `service_id`. Is there a way to achieve this or what other workarounds to apply?\r\n\r\nNote that I am not allowed to use any third party task distribution software.","title":"Task distribution across replicas of microservices","body":"<p>I have a legacy .net application that run as multiple instances each having different <code>service_id</code> hardcoded into each instances' server. With the help of <code>service_id</code> assigned to each instance, they are able to read some task information kept on a database table having columns (<code>id</code>, <code>task_content</code>, <code>service_id</code>, <code>task_status</code>) and execute some long running job.</p>\n<p><code>task_status</code> represents the status of task as <code>INITIAL</code>, <code>PROCESSING</code>, <code>PROCESSED</code>, <code>ERROR</code>.</p>\n<p>Distribution of task is as follows:</p>\n<ul>\n<li>Each app instances periodically read the tasks with status equal to <code>INITIAL</code> regardless of <code>service_id</code> and update those records with new status as <code>PROCESSING</code> and <code>service_id</code> as the number assigned to the instance.</li>\n<li>Then they read <code>PROCESSING</code> tasks and <code>service_id</code> equal to their assigned number and execute the job</li>\n<li>Then they update the status of task either as <code>PROCESSED</code> or <code>ERROR</code>.</li>\n</ul>\n<p>This way, they are sharing tasks across each instance and each app does execute tasks only belongs to its instance.</p>\n<p>My task is to add some other instances by rewriting in java/spring framework (preserving already running legacy apps) and deploy as pods to kubernetess environment where I cannot give to unique number (<code>service_id</code>) to enumerate them.</p>\n<p>If I somehow enumerate a running container uniquely across all instances I can use this enumeration as <code>service_id</code>. Is there a way to achieve this or what other workarounds to apply?</p>\n<p>Note that I am not allowed to use any third party task distribution software.</p>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":1,"creation_date":1682249190,"post_id":76084449,"comment_id":134182370,"body_markdown":"I believe you want `cb.isNotMember(cb.literal(“indie”), cb.lower(path))` instead of `notEqual`.","body":"I believe you want <code>cb.isNotMember(cb.literal(“indie”), cb.lower(path))</code> instead of <code>notEqual</code>."},{"owner":{"account_id":142373,"reputation":10607,"user_id":350061,"accept_rate":100,"display_name":"Stefanos Kargas"},"score":0,"creation_date":1682255497,"post_id":76084449,"comment_id":134183102,"body_markdown":"this does not compile, because the second parameter needs to be an Expression of Collection, where cb.lower(path) does not apply","body":"this does not compile, because the second parameter needs to be an Expression of Collection, where cb.lower(path) does not apply"}],"answers":[{"tags":[],"owner":{"account_id":142373,"reputation":10607,"user_id":350061,"accept_rate":100,"display_name":"Stefanos Kargas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682269185,"creation_date":1682269185,"answer_id":76086153,"question_id":76084449,"body_markdown":"I eventually found a solution. The reason for the complexity is that the SQL query  itself that we are trying to create is complex anyway by definition. So, we are trying to construct it via JPA objects. This is the solution:\r\n\r\n\tExpression&lt;Collection&lt;Genre&gt;&gt; gameGenres = root.get(&quot;genres&quot;);\r\n\tSubquery&lt;Genre&gt; genreSubquery = query.subquery(Genre.class);\r\n\tRoot&lt;Genre&gt; genreRoot = genreSubquery.from(Genre.class);\r\n\r\n\treturn cb.not(cb.exists(genreSubquery\r\n\t\t\t\t\t.select(genreRoot).where(\r\n\t\t\t\t\t\t\tcb.equal(genreRoot.get(&quot;name&quot;), &quot;Indie&quot;),\r\n\t\t\t\t\t\t\tcb.isMember(genreRoot, gameGenres))));\r\n\r\nIn this solution we are utilizing JPA&#39;s subquery object and are building our final query with it. Eventually, I enabled SQL logging to bring up the final SQL query that is sent to my database.\r\n\r\n    select game0_.id as id1_2_, game0_.name as name2_2_ from game game0_ \r\n    where not (exists (select genre3_.id from genre genre3_ where genre3_.name=? \r\n    and (genre3_.id in (select genres4_.genres_id from game_genres genres4_ where game0_.id=genres4_.games_id))))\r\n\r\n","title":"Filtering many to many not contains with JPA Specification","body":"<p>I eventually found a solution. The reason for the complexity is that the SQL query  itself that we are trying to create is complex anyway by definition. So, we are trying to construct it via JPA objects. This is the solution:</p>\n<pre><code>Expression&lt;Collection&lt;Genre&gt;&gt; gameGenres = root.get(&quot;genres&quot;);\nSubquery&lt;Genre&gt; genreSubquery = query.subquery(Genre.class);\nRoot&lt;Genre&gt; genreRoot = genreSubquery.from(Genre.class);\n\nreturn cb.not(cb.exists(genreSubquery\n                .select(genreRoot).where(\n                        cb.equal(genreRoot.get(&quot;name&quot;), &quot;Indie&quot;),\n                        cb.isMember(genreRoot, gameGenres))));\n</code></pre>\n<p>In this solution we are utilizing JPA's subquery object and are building our final query with it. Eventually, I enabled SQL logging to bring up the final SQL query that is sent to my database.</p>\n<pre><code>select game0_.id as id1_2_, game0_.name as name2_2_ from game game0_ \nwhere not (exists (select genre3_.id from genre genre3_ where genre3_.name=? \nand (genre3_.id in (select genres4_.genres_id from game_genres genres4_ where game0_.id=genres4_.games_id))))\n</code></pre>\n"}],"owner":{"account_id":142373,"reputation":10607,"user_id":350061,"accept_rate":100,"display_name":"Stefanos Kargas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76086153,"answer_count":1,"score":0,"last_activity_date":1682269185,"creation_date":1682247825,"question_id":76084449,"body_markdown":"I am implementing a database with two entities: Games and Genres\r\n\r\n    @Getter\r\n    @Setter\r\n    @Entity\r\n    public class Game extends NamedEntity {\r\n      @Id\r\n      private Long id;\r\n    \tprivate String name;\r\n    \t@ManyToMany\r\n      private Set&lt;Genre&gt; genres;\r\n    }\r\n    \r\n    \r\n    @Getter\r\n    @Setter\r\n    @Entity\r\n    public class Genre extends NamedEntity {\r\n      @Id\r\n      private Long id;\r\n    \tprivate String name;\r\n    \t@ManyToMany(mappedBy = &quot;genres&quot;)\r\n      private Set&lt;Game&gt; games;\r\n    }\r\n\r\nI am using JPA Specification for filtering, where I want: &quot;All the games that do not have the genre &#39;Indie&#39;&quot;\r\n\r\n    public class GameSpecification implements Specification&lt;Game&gt; {\r\n      @Override\r\n      public Predicate toPredicate(Root&lt;Game&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb) {\r\n        Path&lt;String&gt; path = root.join(&quot;genres&quot;).get(&quot;name&quot;);\r\n        return cb.notEqual(cb.lower(path), &quot;indie&quot;);\r\n      }\r\n    }\r\n\r\nHowever, the result is counted based on genre entity and not on games entity. To be more clear, if a game contains the genre &#39;Indie&#39; and has a total of 4 genres, I get this game in the resulted array 3 times repeated as exact the same instead of not getting it at all. If a game does not contain the genre &#39;Indie&#39; then I get as many results as the genres that it has. If it has 5 genres I get it repeated 5 times.\r\n\r\nIf I do the opposite, i.e. find &quot;All games that have the genre &#39;Indie&#39;&quot;, where I just change the &#39;notEqual&#39; to &#39;equal&#39;, then the filter works great.\r\n\r\nCan you help me with this?","title":"Filtering many to many not contains with JPA Specification","body":"<p>I am implementing a database with two entities: Games and Genres</p>\n<pre><code>@Getter\n@Setter\n@Entity\npublic class Game extends NamedEntity {\n  @Id\n  private Long id;\n    private String name;\n    @ManyToMany\n  private Set&lt;Genre&gt; genres;\n}\n\n\n@Getter\n@Setter\n@Entity\npublic class Genre extends NamedEntity {\n  @Id\n  private Long id;\n    private String name;\n    @ManyToMany(mappedBy = &quot;genres&quot;)\n  private Set&lt;Game&gt; games;\n}\n</code></pre>\n<p>I am using JPA Specification for filtering, where I want: &quot;All the games that do not have the genre 'Indie'&quot;</p>\n<pre><code>public class GameSpecification implements Specification&lt;Game&gt; {\n  @Override\n  public Predicate toPredicate(Root&lt;Game&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb) {\n    Path&lt;String&gt; path = root.join(&quot;genres&quot;).get(&quot;name&quot;);\n    return cb.notEqual(cb.lower(path), &quot;indie&quot;);\n  }\n}\n</code></pre>\n<p>However, the result is counted based on genre entity and not on games entity. To be more clear, if a game contains the genre 'Indie' and has a total of 4 genres, I get this game in the resulted array 3 times repeated as exact the same instead of not getting it at all. If a game does not contain the genre 'Indie' then I get as many results as the genres that it has. If it has 5 genres I get it repeated 5 times.</p>\n<p>If I do the opposite, i.e. find &quot;All games that have the genre 'Indie'&quot;, where I just change the 'notEqual' to 'equal', then the filter works great.</p>\n<p>Can you help me with this?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1682026101,"post_id":76068223,"comment_id":134155379,"body_markdown":"Do you need that module? The code you posted obviously does not use it.","body":"Do you need that module? The code you posted obviously does not use it."},{"owner":{"account_id":13953618,"reputation":9,"user_id":10076593,"display_name":"matt gaming"},"score":0,"creation_date":1682072649,"post_id":76068223,"comment_id":134161803,"body_markdown":"The fxml page it calls does use it so yeah i need that module","body":"The fxml page it calls does use it so yeah i need that module"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1682087503,"post_id":76068223,"comment_id":134165265,"body_markdown":"Post your `module-info.java` and your build configuration (`pom.xml` for Maven or `build.gradle` for Gradle).","body":"Post your <code>module-info.java</code> and your build configuration (<code>pom.xml</code> for Maven or <code>build.gradle</code> for Gradle)."}],"answers":[{"tags":[],"owner":{"account_id":11288679,"reputation":923,"user_id":8278630,"display_name":"Farkhod Abdukodirov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682035865,"creation_date":1682035865,"answer_id":76069027,"question_id":76068223,"body_markdown":"1. Hi there, based on your given source code it&#39;s difficult to get the solution. Try to include other source files which are in `librarysystem package`\r\n2. Based on your error message, particularly this line: \r\n\r\n       java.lang.module.FindException: Module mysql.connector.j not found, \r\n       required by system.test.librarysystem\r\n   there could be several reasons, `mysql.connector.j` may not be installed in your system. Check whether it is installed properly\r\n3. Another reason might be `module path` which is not properly configured. You can check the module path by following command on terminal: \r\n    \r\n       java --list-modules","title":"how to fix the error &quot;Process &#39;command &#39;C:/Program Files/Java/jdk-19/bin/java.exe&#39;&#39; finished with non-zero exit value 1&quot;?","body":"<ol>\n<li><p>Hi there, based on your given source code it's difficult to get the solution. Try to include other source files which are in <code>librarysystem package</code></p>\n</li>\n<li><p>Based on your error message, particularly this line:</p>\n<pre><code>java.lang.module.FindException: Module mysql.connector.j not found, \nrequired by system.test.librarysystem\n</code></pre>\n<p>there could be several reasons, <code>mysql.connector.j</code> may not be installed in your system. Check whether it is installed properly</p>\n</li>\n<li><p>Another reason might be <code>module path</code> which is not properly configured. You can check the module path by following command on terminal:</p>\n<pre><code>java --list-modules\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13953618,"reputation":9,"user_id":10076593,"display_name":"matt gaming"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682268466,"creation_date":1682268466,"answer_id":76086097,"question_id":76068223,"body_markdown":" the problem was that i had **requires mysql.connector.j;** in my module-info file and this was causing the error, removing it resolved the error","title":"how to fix the error &quot;Process &#39;command &#39;C:/Program Files/Java/jdk-19/bin/java.exe&#39;&#39; finished with non-zero exit value 1&quot;?","body":"<p>the problem was that i had <strong>requires mysql.connector.j;</strong> in my module-info file and this was causing the error, removing it resolved the error</p>\n"}],"owner":{"account_id":13953618,"reputation":9,"user_id":10076593,"display_name":"matt gaming"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":581,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76086097,"answer_count":2,"score":0,"last_activity_date":1682268466,"creation_date":1682024209,"question_id":76068223,"body_markdown":"code was working fine but now when i try to run it all i get is the error \r\n**Process &#39;command &#39;C:/Program Files/Java/jdk-19/bin/java.exe&#39;&#39; finished with non-zero exit value 1**\r\nthis is driving me insane how do i fix this?????\r\n\r\n\r\n```\r\n&gt; Task :Main.main() FAILED\r\nError occurred during initialization of boot layer\r\njava.lang.module.FindException: Module mysql.connector.j not found, required by system.test.librarysystem\r\n```\r\n\r\n**main class**\r\n```\r\npackage system.test.librarysystem;\r\n\r\nimport javafx.fxml.FXML;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.application.Application;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Objects;\r\n\r\n\r\npublic class Main extends Application {\r\n    @Override\r\n    public void start(Stage primaryStage) throws IOException {\r\n        Parent root = FXMLLoader.load(Objects.requireNonNull(getClass().getResource(&quot;Login.fxml&quot;)));\r\n        primaryStage.setTitle(&quot;Library system&quot;) ;\r\n        primaryStage.setScene(new Scene(root));\r\n        primaryStage.show();\r\n    }\r\n\r\n\r\n    public static void main(String[] args) {\r\n        launch(args); }\r\n\r\n}\r\n```\r\nEDIT:\r\nhere are the module-info and my gradle.build file\r\n\r\n**module-info**\r\n```\r\nmodule system.test.librarysystem {\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n    requires java.sql;\r\n    requires mysql.connector.j;\r\n\r\n\r\n    opens system.test.librarysystem to javafx.fxml;\r\n    exports system.test.librarysystem;\r\n}\r\n```\r\n\r\n**gradle.build**\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;application&#39;\r\n    id &#39;org.javamodularity.moduleplugin&#39; version &#39;1.8.12&#39;\r\n    id &#39;org.openjfx.javafxplugin&#39; version &#39;0.0.13&#39;\r\n    id &#39;org.beryx.jlink&#39; version &#39;2.25.0&#39;\r\n}\r\n\r\ngroup &#39;system.test&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\next {\r\n    junitVersion = &#39;5.9.1&#39;\r\n}\r\n\r\nsourceCompatibility = &#39;19&#39;\r\ntargetCompatibility = &#39;19&#39;\r\n\r\ntasks.withType(JavaCompile) {\r\n    options.encoding = &#39;UTF-8&#39;\r\n}\r\n\r\napplication {\r\n    mainModule = &#39;system.test.librarysystem&#39;\r\n    mainClass = &#39;system.test.librarysystem.HelloApplication&#39;\r\n}\r\n\r\njavafx {\r\n    version = &#39;19&#39;\r\n    modules = [&#39;javafx.controls&#39;, &#39;javafx.fxml&#39;]\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;com.mysql:mysql-connector-j:8.0.32&#39;\r\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\r\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n\r\njlink {\r\n    imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platform.classifier}.zip&quot;)\r\n    options = [&#39;--strip-debug&#39;, &#39;--compress&#39;, &#39;2&#39;, &#39;--no-header-files&#39;, &#39;--no-man-pages&#39;]\r\n    launcher {\r\n        name = &#39;app&#39;\r\n    }\r\n}\r\n\r\njlinkZip {\r\n    group = &#39;distribution&#39;\r\n}\r\n```\r\n\r\n\r\n","title":"how to fix the error &quot;Process &#39;command &#39;C:/Program Files/Java/jdk-19/bin/java.exe&#39;&#39; finished with non-zero exit value 1&quot;?","body":"<p>code was working fine but now when i try to run it all i get is the error\n<strong>Process 'command 'C:/Program Files/Java/jdk-19/bin/java.exe'' finished with non-zero exit value 1</strong>\nthis is driving me insane how do i fix this?????</p>\n<pre><code>&gt; Task :Main.main() FAILED\nError occurred during initialization of boot layer\njava.lang.module.FindException: Module mysql.connector.j not found, required by system.test.librarysystem\n</code></pre>\n<p><strong>main class</strong></p>\n<pre><code>package system.test.librarysystem;\n\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.application.Application;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\nimport java.util.Objects;\n\n\npublic class Main extends Application {\n    @Override\n    public void start(Stage primaryStage) throws IOException {\n        Parent root = FXMLLoader.load(Objects.requireNonNull(getClass().getResource(&quot;Login.fxml&quot;)));\n        primaryStage.setTitle(&quot;Library system&quot;) ;\n        primaryStage.setScene(new Scene(root));\n        primaryStage.show();\n    }\n\n\n    public static void main(String[] args) {\n        launch(args); }\n\n}\n</code></pre>\n<p>EDIT:\nhere are the module-info and my gradle.build file</p>\n<p><strong>module-info</strong></p>\n<pre><code>module system.test.librarysystem {\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires java.sql;\n    requires mysql.connector.j;\n\n\n    opens system.test.librarysystem to javafx.fxml;\n    exports system.test.librarysystem;\n}\n</code></pre>\n<p><strong>gradle.build</strong></p>\n<pre><code>plugins {\n    id 'java'\n    id 'application'\n    id 'org.javamodularity.moduleplugin' version '1.8.12'\n    id 'org.openjfx.javafxplugin' version '0.0.13'\n    id 'org.beryx.jlink' version '2.25.0'\n}\n\ngroup 'system.test'\nversion '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\next {\n    junitVersion = '5.9.1'\n}\n\nsourceCompatibility = '19'\ntargetCompatibility = '19'\n\ntasks.withType(JavaCompile) {\n    options.encoding = 'UTF-8'\n}\n\napplication {\n    mainModule = 'system.test.librarysystem'\n    mainClass = 'system.test.librarysystem.HelloApplication'\n}\n\njavafx {\n    version = '19'\n    modules = ['javafx.controls', 'javafx.fxml']\n}\n\ndependencies {\n\n    implementation 'com.mysql:mysql-connector-j:8.0.32'\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\n}\n\ntest {\n    useJUnitPlatform()\n}\n\njlink {\n    imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platform.classifier}.zip&quot;)\n    options = ['--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']\n    launcher {\n        name = 'app'\n    }\n}\n\njlinkZip {\n    group = 'distribution'\n}\n</code></pre>\n"},{"tags":["java","string","spring-boot","api","type-conversion"],"comments":[{"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"score":3,"creation_date":1682265253,"post_id":76085731,"comment_id":134184464,"body_markdown":"you should put your codes to here as text instead of image","body":"you should put your codes to here as text instead of image"},{"owner":{"account_id":3211463,"reputation":638,"user_id":2711384,"display_name":"Zag"},"score":0,"creation_date":1682268044,"post_id":76085731,"comment_id":134184869,"body_markdown":"Just put the code inline here.  \n\nTo answer your question, I&#39;m not sure what more you want from the compiler.  Your member variable &#39;characters&#39; is defined as a String, not an array of Strings.  Your getter returns a String, not an array of Strings.  But then you are calling it and trying to assign the result to an array.  \n\nIf you want &#39;characters&#39; to be an array, you not only have to define it and it&#39;s getter to be such, but also probably don&#39;t want a simple setter. You&#39;d most likely want addCharacter(String character) which can be called multiple times to build up the array.","body":"Just put the code inline here.    To answer your question, I&#39;m not sure what more you want from the compiler.  Your member variable &#39;characters&#39; is defined as a String, not an array of Strings.  Your getter returns a String, not an array of Strings.  But then you are calling it and trying to assign the result to an array.    If you want &#39;characters&#39; to be an array, you not only have to define it and it&#39;s getter to be such, but also probably don&#39;t want a simple setter. You&#39;d most likely want addCharacter(String character) which can be called multiple times to build up the array."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682320824,"post_id":76085731,"comment_id":134190544,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682267842,"creation_date":1682267842,"answer_id":76086048,"question_id":76085731,"body_markdown":"If I&#39;m not wrong, looks like you are trying to assign a `String` (type of string) value to a variable declared as `String[]` (type of array of strings).\r\n\r\nyou define the following class\r\n\r\n    public class Filme {\r\n    \r\n        //... other attributes\r\n        private String characters;\r\n        //...\r\n    \r\n        // the following getter returns an `String` which is correct because attribute\r\n        // `character` is declared as a `String`\r\n        public String getCharacters() {\r\n            return characters;\r\n        }\r\n        //... other setters and getters\r\n    \r\n    }\r\n\r\nand then when you get an array of `Filme`s from a service, you are trying to assign the attribute `characters` (String) to a variable `personagens` (String[])\r\n\r\n    // personagens is of type `String[]` (array of String) \r\n    // mean while `filme.getCharacters()` return a `String` (a String)\r\n    String[] personagens = filme.getCharacters()\r\n\r\nbased on the [docs for the endpoint that you are consuming][1], it says that `characters` is an `array`. So, it&#39;s ok to get that attribute as an String, when you try to deserialize from json to an object, but in the logic applied, you are trying to iterate over that. So, I think what you really want to do is change the type of `characters` attribute from `String` to `String[]`. After that you would need to fix the return type of the getter for that attribute\r\n\r\n\r\n  [1]: https://swapi.dev/documentation#films","title":"Problem with Java Spring Boot - &quot;Cannot convert from String to String [ ]&quot;","body":"<p>If I'm not wrong, looks like you are trying to assign a <code>String</code> (type of string) value to a variable declared as <code>String[]</code> (type of array of strings).</p>\n<p>you define the following class</p>\n<pre><code>public class Filme {\n\n    //... other attributes\n    private String characters;\n    //...\n\n    // the following getter returns an `String` which is correct because attribute\n    // `character` is declared as a `String`\n    public String getCharacters() {\n        return characters;\n    }\n    //... other setters and getters\n\n}\n</code></pre>\n<p>and then when you get an array of <code>Filme</code>s from a service, you are trying to assign the attribute <code>characters</code> (String) to a variable <code>personagens</code> (String[])</p>\n<pre><code>// personagens is of type `String[]` (array of String) \n// mean while `filme.getCharacters()` return a `String` (a String)\nString[] personagens = filme.getCharacters()\n</code></pre>\n<p>based on the <a href=\"https://swapi.dev/documentation#films\" rel=\"nofollow noreferrer\">docs for the endpoint that you are consuming</a>, it says that <code>characters</code> is an <code>array</code>. So, it's ok to get that attribute as an String, when you try to deserialize from json to an object, but in the logic applied, you are trying to iterate over that. So, I think what you really want to do is change the type of <code>characters</code> attribute from <code>String</code> to <code>String[]</code>. After that you would need to fix the return type of the getter for that attribute</p>\n"}],"owner":{"account_id":28388785,"reputation":1,"user_id":21714866,"display_name":"J&#250;lia Rocha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":330,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682267842,"creation_date":1682263866,"question_id":76085731,"body_markdown":"I am trying to use a external API, but it&#180;s returning an error that I am not understanding.\r\n\r\n[Here is the code:](https://i.stack.imgur.com/NhVuc.png)\r\n\r\n\r\nAcessing the API - (https://swapi.dev/) - Here is my controller\r\n[Where the problem is](https://i.stack.imgur.com/8C3Q8.png)","title":"Problem with Java Spring Boot - &quot;Cannot convert from String to String [ ]&quot;","body":"<p>I am trying to use a external API, but it´s returning an error that I am not understanding.</p>\n<p><a href=\"https://i.stack.imgur.com/NhVuc.png\" rel=\"nofollow noreferrer\">Here is the code:</a></p>\n<p>Acessing the API - (<a href=\"https://swapi.dev/\" rel=\"nofollow noreferrer\">https://swapi.dev/</a>) - Here is my controller\n<a href=\"https://i.stack.imgur.com/8C3Q8.png\" rel=\"nofollow noreferrer\">Where the problem is</a></p>\n"},{"tags":["java","scope","instance"],"comments":[{"owner":{"account_id":4663157,"reputation":15204,"user_id":3776927,"display_name":"derpirscher"},"score":2,"creation_date":1682264508,"post_id":76085754,"comment_id":134184334,"body_markdown":"Please provide a minimal reproducible example ... Setting the name via setter works fine. Seems you are using your class wrong ... But we won&#39;t know, because there is no call to `results` in the code you show ...","body":"Please provide a minimal reproducible example ... Setting the name via setter works fine. Seems you are using your class wrong ... But we won&#39;t know, because there is no call to <code>results</code> in the code you show ..."},{"owner":{"account_id":27913834,"reputation":11,"user_id":21315417,"display_name":"Takeshi DBXV"},"score":1,"creation_date":1682265184,"post_id":76085754,"comment_id":134184446,"body_markdown":"I should add that it&#39;s imperative that the Student class variables are not static.","body":"I should add that it&#39;s imperative that the Student class variables are not static."},{"owner":{"account_id":4663157,"reputation":15204,"user_id":3776927,"display_name":"derpirscher"},"score":2,"creation_date":1682265406,"post_id":76085754,"comment_id":134184497,"body_markdown":"You should add compilable code that shows your problem. If I add the missing parts, it works fine ...","body":"You should add compilable code that shows your problem. If I add the missing parts, it works fine ..."},{"owner":{"account_id":4663157,"reputation":15204,"user_id":3776927,"display_name":"derpirscher"},"score":4,"creation_date":1682265779,"post_id":76085754,"comment_id":134184555,"body_markdown":"Well, in `exitTutor` you are creating a new `Student` ... This has nothing to do with the `scholar` you created in `main` ...","body":"Well, in <code>exitTutor</code> you are creating a new <code>Student</code> ... This has nothing to do with the <code>scholar</code> you created in <code>main</code> ..."},{"owner":{"account_id":7121054,"reputation":5814,"user_id":5445670,"display_name":"Solomon Ucko"},"score":0,"creation_date":1682265979,"post_id":76085754,"comment_id":134184581,"body_markdown":"There&#39;s now a call to `results`, but that&#39;s only in `exitTutor`, which itself is never called. cc @derpirscher","body":"There&#39;s now a call to <code>results</code>, but that&#39;s only in <code>exitTutor</code>, which itself is never called. cc @derpirscher"},{"owner":{"account_id":4663157,"reputation":15204,"user_id":3776927,"display_name":"derpirscher"},"score":1,"creation_date":1682266097,"post_id":76085754,"comment_id":134184599,"body_markdown":"@SolomonUcko Well, obviously it has to be called from somewhere if there is an output ... So I suppose it&#39;s called from main and OP just didn&#39;t add that line of code ...","body":"@SolomonUcko Well, obviously it has to be called from somewhere if there is an output ... So I suppose it&#39;s called from main and OP just didn&#39;t add that line of code ..."},{"owner":{"account_id":20304974,"reputation":99,"user_id":14893498,"display_name":"Daniel Janz"},"score":0,"creation_date":1682266563,"post_id":76085754,"comment_id":134184663,"body_markdown":"Your `exitTutor` needs to also refer to the scholar you are creating in `main`. Like this you are doing everything right but are not refering to the scholar and instead creating a second, new scholar in the method `exit` by itself. That new sholar must always be null since you never update it.","body":"Your <code>exitTutor</code> needs to also refer to the scholar you are creating in <code>main</code>. Like this you are doing everything right but are not refering to the scholar and instead creating a second, new scholar in the method <code>exit</code> by itself. That new sholar must always be null since you never update it."},{"owner":{"account_id":27913834,"reputation":11,"user_id":21315417,"display_name":"Takeshi DBXV"},"score":0,"creation_date":1682266738,"post_id":76085754,"comment_id":134184692,"body_markdown":"@derpirscher no it&#39;s called from outside that. Sorry, I&#39;m a little sleep deprived. I added that now, and even made sure my program could run that. I didn&#39;t want to add the entire code because I felt that might that might waste everyone&#39;s time, but this didn&#39;t work out either. \n\n`exitTutor` can be called within and outside main via switches. I&#39;m thinking if I can try implementing the `exitTutor` into main, as deleting the `Student` object makes `scholar.results` cause errors (I believe it&#39;s out of scope).","body":"@derpirscher no it&#39;s called from outside that. Sorry, I&#39;m a little sleep deprived. I added that now, and even made sure my program could run that. I didn&#39;t want to add the entire code because I felt that might that might waste everyone&#39;s time, but this didn&#39;t work out either.   <code>exitTutor</code> can be called within and outside main via switches. I&#39;m thinking if I can try implementing the <code>exitTutor</code> into main, as deleting the <code>Student</code> object makes <code>scholar.results</code> cause errors (I believe it&#39;s out of scope)."}],"answers":[{"tags":[],"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682267463,"creation_date":1682267463,"answer_id":76086012,"question_id":76085754,"body_markdown":"You have 2 different `Student` instances:\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        int choice; \r\n        \r\n        //Sets the student&#39;s name\r\n        Student scholar = new Student(); // Create student 1\r\n        Scanner nameInput = new Scanner(System.in); \r\n        System.out.println(&quot;Please enter your name&quot;); \r\n        String newName = nameInput.nextLine();\r\n        scholar.setName(newName); // Set name of student 1\r\n        exitTutor();\r\n    }\r\n\r\n    public static void exitTutor() {\r\n        Student scholar = new Student(); // Create student 2\r\n        scholar.results(&quot;&quot;); // Prints the name of student 2, which wasn&#39;t set, so null\r\n        System.exit(0);\r\n    }\r\n```\r\n\r\nWhen you call `exitTutor()`, you completely ignore your previously created student with its assigned name. The first student instance you create is not in *scope* of the `exitTutor` method. In order to use the same student you create previously, you will want to pass it to the method:\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        int choice; \r\n\r\n        //Sets the student&#39;s name\r\n        Student scholar = new Student(); // Create student 1\r\n        Scanner nameInput = new Scanner(System.in); \r\n        System.out.println(&quot;Please enter your name&quot;); \r\n        String newName = nameInput.nextLine();\r\n        scholar.setName(newName); // Set name of student 1\r\n        exitTutor(scholar);\r\n    }\r\n\r\n    public static void exitTutor(Student scholar) {\r\n        scholar.results(&quot;&quot;); // Prints the name of student 1, which was set\r\n        System.exit(0);\r\n    }\r\n```\r\n\r\nYou can also assign the student to a field instead, but this is in most cases not what you want to do:\r\n\r\n```\r\n    private static Student scholar;\r\n\r\n    public static void main(String[] args) {\r\n        int choice; \r\n\r\n        //Sets the student&#39;s name\r\n        scholar = new Student(); // Create student 1\r\n        Scanner nameInput = new Scanner(System.in); \r\n        System.out.println(&quot;Please enter your name&quot;); \r\n        String newName = nameInput.nextLine();\r\n        scholar.setName(newName); // Set name of student 1\r\n        exitTutor();\r\n    }\r\n\r\n    public static void exitTutor() {\r\n        scholar.results(&quot;&quot;); // Prints the name of student 1, which was set\r\n        System.exit(0);\r\n    }\r\n```","title":"Why aren&#39;t my private variables updated after using getter-setter methods?","body":"<p>You have 2 different <code>Student</code> instances:</p>\n<pre><code>    public static void main(String[] args) {\n        int choice; \n        \n        //Sets the student's name\n        Student scholar = new Student(); // Create student 1\n        Scanner nameInput = new Scanner(System.in); \n        System.out.println(&quot;Please enter your name&quot;); \n        String newName = nameInput.nextLine();\n        scholar.setName(newName); // Set name of student 1\n        exitTutor();\n    }\n\n    public static void exitTutor() {\n        Student scholar = new Student(); // Create student 2\n        scholar.results(&quot;&quot;); // Prints the name of student 2, which wasn't set, so null\n        System.exit(0);\n    }\n</code></pre>\n<p>When you call <code>exitTutor()</code>, you completely ignore your previously created student with its assigned name. The first student instance you create is not in <em>scope</em> of the <code>exitTutor</code> method. In order to use the same student you create previously, you will want to pass it to the method:</p>\n<pre><code>    public static void main(String[] args) {\n        int choice; \n\n        //Sets the student's name\n        Student scholar = new Student(); // Create student 1\n        Scanner nameInput = new Scanner(System.in); \n        System.out.println(&quot;Please enter your name&quot;); \n        String newName = nameInput.nextLine();\n        scholar.setName(newName); // Set name of student 1\n        exitTutor(scholar);\n    }\n\n    public static void exitTutor(Student scholar) {\n        scholar.results(&quot;&quot;); // Prints the name of student 1, which was set\n        System.exit(0);\n    }\n</code></pre>\n<p>You can also assign the student to a field instead, but this is in most cases not what you want to do:</p>\n<pre><code>    private static Student scholar;\n\n    public static void main(String[] args) {\n        int choice; \n\n        //Sets the student's name\n        scholar = new Student(); // Create student 1\n        Scanner nameInput = new Scanner(System.in); \n        System.out.println(&quot;Please enter your name&quot;); \n        String newName = nameInput.nextLine();\n        scholar.setName(newName); // Set name of student 1\n        exitTutor();\n    }\n\n    public static void exitTutor() {\n        scholar.results(&quot;&quot;); // Prints the name of student 1, which was set\n        System.exit(0);\n    }\n</code></pre>\n"}],"owner":{"account_id":27913834,"reputation":11,"user_id":21315417,"display_name":"Takeshi DBXV"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682267648,"creation_date":1682264069,"question_id":76085754,"body_markdown":"I&#39;m making a program that asks for user input to enter a name. I&#39;ve done pretty much the same thing twice before. However, for some reason, the program is giving me `null` when I call the function to print it. I focused on only working on this before the `int` variables, but yes, they also had the same issue. \r\n\r\nMy code starts out like this\r\n\r\n\r\n```\r\nclass Main {\r\n    public static void main(String[] args){\r\n        int choice; \r\n        \r\n        //Sets the student&#39;s name\r\n        Student scholar = new Student(); //Access to Student.java\r\n        Scanner nameInput = new Scanner(System.in); \r\n        System.out.println(&quot;Please enter your name&quot;); \r\n        String newName = nameInput.nextLine(); //applies the string to a variable\r\n        scholar.setName(newName); //Calls a method to input the name\r\n        exitTutor();\r\n    }\r\n\r\n    public static void exitTutor(){\r\n        Student scholar = new Student();\r\n        scholar.results(&quot;&quot;); \r\n        System.exit(0);\r\n    }\r\n}\r\n\r\nclass Student {\r\n    private String studentName;\r\n\r\n    public void setName(String studentName){\r\n        this.studentName = studentName;\r\n    }\r\n\r\n    public void results(String result){\r\n        System.out.println(&quot;Final Results for &quot; + studentName);\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n```\r\nFinal Results for null\r\n```\r\nI even copied and pasted the code I used in my other programs where it works, yet it was still `null`.\r\n\r\nEdit: I added the results call. I understand that using `&quot;&quot;` and a 0, but I&#39;ll replace those later with user input\r\n\r\nEdit #2: I added a call to `exitTutor()`;","title":"Why aren&#39;t my private variables updated after using getter-setter methods?","body":"<p>I'm making a program that asks for user input to enter a name. I've done pretty much the same thing twice before. However, for some reason, the program is giving me <code>null</code> when I call the function to print it. I focused on only working on this before the <code>int</code> variables, but yes, they also had the same issue.</p>\n<p>My code starts out like this</p>\n<pre><code>class Main {\n    public static void main(String[] args){\n        int choice; \n        \n        //Sets the student's name\n        Student scholar = new Student(); //Access to Student.java\n        Scanner nameInput = new Scanner(System.in); \n        System.out.println(&quot;Please enter your name&quot;); \n        String newName = nameInput.nextLine(); //applies the string to a variable\n        scholar.setName(newName); //Calls a method to input the name\n        exitTutor();\n    }\n\n    public static void exitTutor(){\n        Student scholar = new Student();\n        scholar.results(&quot;&quot;); \n        System.exit(0);\n    }\n}\n\nclass Student {\n    private String studentName;\n\n    public void setName(String studentName){\n        this.studentName = studentName;\n    }\n\n    public void results(String result){\n        System.out.println(&quot;Final Results for &quot; + studentName);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Final Results for null\n</code></pre>\n<p>I even copied and pasted the code I used in my other programs where it works, yet it was still <code>null</code>.</p>\n<p>Edit: I added the results call. I understand that using <code>&quot;&quot;</code> and a 0, but I'll replace those later with user input</p>\n<p>Edit #2: I added a call to <code>exitTutor()</code>;</p>\n"},{"tags":["java","weka","pcap4j"],"owner":{"account_id":23858477,"reputation":19,"user_id":17861732,"display_name":"PierreBls"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682266391,"creation_date":1682266391,"question_id":76085924,"body_markdown":"I&#39;m actually developing a contextual data generator for Weka and I package it as a Weka plugins (using the templates here: https://github.com/bnjmn/weka/tree/master/packages/templates).\r\n\r\nA part of my plugins is to reading data from a pcap file so I&#39;m using the pcap4j library. Here my problem start, while I&#39;m in my dev environment the pcap file are well parsed and my plugins works but when I&#39;m in a basic &quot;prod&quot; env the pcap reader doesn&#39;t read well the pcap file and return a null header for each packets.\r\n\r\n## Dev environment\r\n\r\nMaven project\r\n\r\nJava:\r\n\r\n```bash\r\n$ java --version\r\nopenjdk 11.0.18 2023-01-17\r\nOpenJDK Runtime Environment (build 11.0.18+10-post-Ubuntu-0ubuntu122.04)\r\nOpenJDK 64-Bit Server VM (build 11.0.18+10-post-Ubuntu-0ubuntu122.04, mixed mode, sharing)\r\n```\r\n\r\nIn my dev env, I&#39;m working with the Weka-3-8-6 source code, recompile it and running it with the following command:\r\n\r\n```bash\r\n$ /usr/bin/env /usr/lib/jvm/java-11-openjdk-amd64/bin/java @/tmp/cp_1784hdtalynu1dcgm6jy5m4n0.argfile weka.gui.GUIChooser\r\n```\r\nThen I can import my zipped plugins and try it (it works well).\r\n\r\n## Prod environment\r\n\r\nTo test my plugins in real context environment (without recompiling Weka), I&#39;m downloading the Weka-3.8.6 release, running it, importing my plugins and the trying my data generator. Here are the problem, the pcap packets headers values are all at null. First I checked the pcap file, but it hasn&#39;t change from the dev environment so the problem come from the runtime environment but I dont know why.\r\n\r\nGood to know that Weka come with it&#39;s own JRE: `weka-3-8-6/jre/zulu17.32.13-ca-fx-jre17.0.2-linux_x64`\r\n\r\n## The plugins\r\n\r\nMy plugins is compiled with ant, following the [Weka plugins templates](https://github.com/bnjmn/weka/tree/master/packages/templates). Here is the compile command:\r\n\r\n```bash\r\n$ ant make_package -Dpackage &lt;MY_PLUGINS&gt;\r\n```\r\n\r\nAnd here is the related make package instruction from the `build.xml`:\r\n\r\n```xml\r\n&lt;!-- Compile the java code from ${src}/weka into ${build}/classes --&gt;\r\n  &lt;target name=&quot;compile&quot; depends=&quot;init_compile&quot;\r\n    description=&quot;Compile package and deposit class files in build/classes&quot;&gt;\r\n    &lt;javac includeantruntime=&quot;false&quot; srcdir=&quot;${src}&quot;\r\n      fork=&quot;yes&quot; memoryMaximumSize=&quot;${javac_max_memory}&quot;\r\n      destdir=&quot;${build}/classes&quot;\r\n      optimize=&quot;${optimization}&quot;\r\n      debug=&quot;${debug}&quot;\r\n      deprecation=&quot;${deprecation}&quot;\r\n      source=&quot;1.6&quot; target=&quot;1.6&quot;&gt;\r\n      &lt;!-- Import lib dependencies --&gt;\r\n      &lt;classpath&gt;\r\n        &lt;fileset dir=&quot;${lib}&quot;&gt;\r\n          &lt;include name=&quot;*.jar&quot; /&gt;\r\n          &lt;include name=&quot;*.zip&quot; /&gt;\r\n        &lt;/fileset&gt;\r\n      &lt;/classpath&gt;\r\n    &lt;/javac&gt;\r\n    &lt;copy todir=&quot;${build}/classes&quot;&gt;\r\n      &lt;fileset dir=&quot;${src}&quot;&gt;\r\n        &lt;include name=&quot;**/*.gif&quot; /&gt;\r\n        &lt;include name=&quot;**/*.png&quot; /&gt;\r\n        &lt;include name=&quot;**/*.jpeg&quot; /&gt;\r\n        &lt;include name=&quot;**/*.jpg&quot; /&gt;\r\n        &lt;include name=&quot;**/*.props&quot; /&gt;\r\n        &lt;include name=&quot;**/*.txt&quot; /&gt;\r\n        &lt;include name=&quot;**/*.xml&quot; /&gt;\r\n        &lt;include name=&quot;**/*.cup&quot; /&gt;\r\n        &lt;include name=&quot;**/*.flex&quot; /&gt;\r\n        &lt;include name=&quot;**/*.jflex&quot; /&gt;\r\n        &lt;include name=&quot;**/*.properties&quot; /&gt;\r\n        &lt;include name=&quot;**/*.default&quot; /&gt;\r\n      &lt;/fileset&gt;\r\n    &lt;/copy&gt;\r\n  &lt;/target&gt;\r\n\r\n&lt;!-- Put everything in ${build}/classes into the ${package}.jar file --&gt;\r\n&lt;target name=&quot;exejar&quot; depends=&quot;compile, docs, init_dist&quot;\r\n  description=&quot;Create a binary jar file in ./dist&quot;&gt;\r\n  &lt;jar jarfile=&quot;${dist}/${package}.jar\r\n    basedir=&quot;${build}/classes&quot;&gt;\r\n  &lt;/jar&gt;\r\n&lt;/target&gt;\r\n\r\n&lt;target name=&quot;make_package&quot; depends=&quot;clean, exejar&quot;\r\n    description=&quot;Make the package zip file. Run with -Dpackage=[package name]&quot;&gt;\r\n    &lt;mkdir dir=&quot;${dist}/${package}&quot; /&gt;\r\n    &lt;copy todir=&quot;${dist}/${package}&quot;&gt;\r\n      &lt;fileset dir=&quot;${dist}&quot;&gt;\r\n        &lt;include name=&quot;*.jar&quot; /&gt;\r\n      &lt;/fileset&gt;\r\n    &lt;/copy&gt;\r\n    &lt;delete&gt;\r\n      &lt;fileset dir=&quot;${dist}&quot;&gt;\r\n        &lt;include name=&quot;*.jar&quot; /&gt;\r\n      &lt;/fileset&gt;\r\n    &lt;/delete&gt;\r\n    &lt;copy file=&quot;Description.props&quot;\r\n      todir=&quot;${dist}/${package}&quot; /&gt;\r\n    &lt;mkdir dir=&quot;${dist}/${package}/lib&quot; /&gt;\r\n    &lt;copy todir=&quot;${dist}/${package}/lib&quot;&gt;\r\n      &lt;fileset dir=&quot;${lib}&quot;&gt;\r\n        &lt;include name=&quot;*.jar&quot; /&gt;\r\n        &lt;include name=&quot;*.zip&quot; /&gt;\r\n      &lt;/fileset&gt;\r\n    &lt;/copy&gt;\r\n    &lt;mkdir dir=&quot;${dist}/${package}/doc&quot; /&gt;\r\n    &lt;copy todir=&quot;${dist}/${package}/doc&quot;&gt;\r\n      &lt;fileset dir=&quot;${doc}&quot;&gt;\r\n        &lt;include name=&quot;**/*&quot; /&gt;\r\n      &lt;/fileset&gt;\r\n    &lt;/copy&gt;\r\n    &lt;mkdir dir=&quot;${dist}/${package}/src&quot; /&gt;\r\n    &lt;copy todir=&quot;${dist}/${package}&quot;&gt;\r\n      &lt;fileset dir=&quot;.&quot;&gt;\r\n        &lt;include name=&quot;*.xml&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.excludes&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.gif&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.java&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.jpeg&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.jpg&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.props&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.txt&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.xml&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.cup&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.flex&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.jflex&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.properties&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.default&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.cost&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.arff&quot; /&gt;\r\n        &lt;include name=&quot;src/**/*.matrix&quot; /&gt;\r\n      &lt;/fileset&gt;\r\n    &lt;/copy&gt;\r\n    &lt;zip destfile=&quot;${dist}/${package}.zip&quot;\r\n      basedir=&quot;${dist}/${package}&quot;&gt;\r\n    &lt;/zip&gt;\r\n  &lt;/target&gt;\r\n```\r\n## Test\r\n\r\n 1. I trying to run my home compiled Weka (dev env) with the jre provided by Weka-3.8.6 (jre used in prod env) but still have the same issue.\r\n\r\n```bash\r\n$ /usr/bin/env /home/marc-andre/weka-3-8-6/jre/zulu17.32.13-ca-fx-jre17.0.2-linux_x64/bin/java @/tmp/cp_1784hdtalynu1dcgm6jy5m4n0.argfile weka.gui.GUIChooser\r\n```\r\n 2. I compared the JAVA class path (by adding `System.out.println(System.getProperty(&quot;java.class.path&quot;));\r\n`), but I&#39;m not such an Java expert so I don&#39;t really know what I can concluded. Here are the output:\r\n\r\nDev env:\r\n\r\n```csv\r\n/home/marc-andre/data/ContackGen/Weka/build/classes:/home/marc-andre/.m2/repository/com/github/vbmacher/java-cup/11b-20160615/java-cup-11b-20160615.jar:/home/marc-andre/.m2/repository/com/github/vbmacher/java-cup-runtime/11b-20160615/java-cup-runtime-11b-20160615.jar:/home/marc-andre/.m2/repository/nz/ac/waikato/cms/weka/thirdparty/bounce/0.18/bounce-0.18.jar:/home/marc-andre/.m2/repository/com/squareup/okhttp3/okhttp/4.9.1/okhttp-4.9.1.jar:/home/marc-andre/.m2/repository/com/squareup/okio/okio/2.8.0/okio-2.8.0.jar:/home/marc-andre/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib-common/1.4.0/kotlin-stdlib-common-1.4.0.jar:/home/marc-andre/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.4.10/kotlin-stdlib-1.4.10.jar:/home/marc-andre/.m2/repository/org/jetbrains/annotations/13.0/annotations-13.0.jar:/home/marc-andre/.m2/repository/org/apache/commons/commons-compress/1.21/commons-compress-1.21.jar:/home/marc-andre/.m2/repository/com/googlecode/matrix-toolkits-java/mtj/1.0.4/mtj-1.0.4.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-osx-x86_64/1.1/netlib-native_ref-osx-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/native_ref-java/1.1/native_ref-java-1.1.jar:/home/marc-andre/.m2/repository/com/github/fommil/jniloader/1.1/jniloader-1.1.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-linux-x86_64/1.1/netlib-native_ref-linux-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-linux-i686/1.1/netlib-native_ref-linux-i686-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-win-x86_64/1.1/netlib-native_ref-win-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-win-i686/1.1/netlib-native_ref-win-i686-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-linux-armhf/1.1/netlib-native_ref-linux-armhf-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-osx-x86_64/1.1/netlib-native_system-osx-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/native_system-java/1.1/native_system-java-1.1.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-linux-x86_64/1.1/netlib-native_system-linux-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-linux-i686/1.1/netlib-native_system-linux-i686-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-linux-armhf/1.1/netlib-native_system-linux-armhf-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-win-x86_64/1.1/netlib-native_system-win-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-win-i686/1.1/netlib-native_system-win-i686-1.1-natives.jar:/home/marc-andre/.m2/repository/net/sourceforge/f2j/arpack_combined_all/0.1/arpack_combined_all-0.1.jar:/home/marc-andre/.m2/repository/com/googlecode/netlib-java/netlib-java/1.1/netlib-java-1.1.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/core/1.1/core-1.1.jar:/home/marc-andre/.m2/repository/com/github/fracpete/jfilechooser-bookmarks/0.1.6/jfilechooser-bookmarks-0.1.6.jar:/home/marc-andre/.m2/repository/com/github/fracpete/jclipboardhelper/0.1.0/jclipboardhelper-0.1.0.jar:/home/marc-andre/.m2/repository/com/sun/istack/istack-commons-runtime/3.0.12/istack-commons-runtime-3.0.12.jar:/home/marc-andre/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/home/marc-andre/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/home/marc-andre/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.5/jaxb-runtime-2.3.5.jar:/home/marc-andre/.m2/repository/org/glassfish/jaxb/txw2/2.3.5/txw2-2.3.5.jar:/home/marc-andre/.m2/repository/com/sun/activation/jakarta.activation/1.2.2/jakarta.activation-1.2.2.jar:/home/marc-andre/.m2/repository/com/formdev/flatlaf/2.0/flatlaf-2.0.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java/3.3.0/docker-java-3.3.0.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java-core/3.3.0/docker-java-core-3.3.0.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java-api/3.3.0/docker-java-api-3.3.0.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.10.3/jackson-annotations-2.10.3.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java-transport/3.3.0/docker-java-transport-3.3.0.jar:/home/marc-andre/.m2/repository/commons-io/commons-io/2.6/commons-io-2.6.jar:/home/marc-andre/.m2/repository/org/apache/commons/commons-lang3/3.12.0/commons-lang3-3.12.0.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.10.3/jackson-databind-2.10.3.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.10.3/jackson-core-2.10.3.jar:/home/marc-andre/.m2/repository/com/google/guava/guava/19.0/guava-19.0.jar:/home/marc-andre/.m2/repository/org/bouncycastle/bcpkix-jdk15on/1.64/bcpkix-jdk15on-1.64.jar:/home/marc-andre/.m2/repository/org/bouncycastle/bcprov-jdk15on/1.64/bcprov-jdk15on-1.64.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java-transport-jersey/3.3.0/docker-java-transport-jersey-3.3.0.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/jaxrs/jackson-jaxrs-json-provider/2.10.3/jackson-jaxrs-json-provider-2.10.3.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/jaxrs/jackson-jaxrs-base/2.10.3/jackson-jaxrs-base-2.10.3.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/module/jackson-module-jaxb-annotations/2.10.3/jackson-module-jaxb-annotations-2.10.3.jar:/home/marc-andre/.m2/repository/org/glassfish/jersey/connectors/jersey-apache-connector/2.30.1/jersey-apache-connector-2.30.1.jar:/home/marc-andre/.m2/repository/org/glassfish/jersey/core/jersey-common/2.30.1/jersey-common-2.30.1.jar:/home/marc-andre/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/osgi-resource-locator/1.0.3/osgi-resource-locator-1.0.3.jar:/home/marc-andre/.m2/repository/jakarta/ws/rs/jakarta.ws.rs-api/2.1.6/jakarta.ws.rs-api-2.1.6.jar:/home/marc-andre/.m2/repository/org/apache/httpcomponents/httpcore/4.4.13/httpcore-4.4.13.jar:/home/marc-andre/.m2/repository/org/apache/httpcomponents/httpclient/4.5.12/httpclient-4.5.12.jar:/home/marc-andre/.m2/repository/commons-codec/commons-codec/1.11/commons-codec-1.11.jar:/home/marc-andre/.m2/repository/org/glassfish/jersey/core/jersey-client/2.30.1/jersey-client-2.30.1.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/external/jakarta.inject/2.6.1/jakarta.inject-2.6.1.jar:/home/marc-andre/.m2/repository/org/glassfish/jersey/inject/jersey-hk2/2.30.1/jersey-hk2-2.30.1.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/hk2-locator/2.6.1/hk2-locator-2.6.1.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/external/aopalliance-repackaged/2.6.1/aopalliance-repackaged-2.6.1.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/hk2-api/2.6.1/hk2-api-2.6.1.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/hk2-utils/2.6.1/hk2-utils-2.6.1.jar:/home/marc-andre/.m2/repository/org/javassist/javassist/3.25.0-GA/javassist-3.25.0-GA.jar:/home/marc-andre/.m2/repository/com/kohlschutter/junixsocket/junixsocket-common/2.6.1/junixsocket-common-2.6.1.jar:/home/marc-andre/.m2/repository/com/kohlschutter/junixsocket/junixsocket-native-common/2.6.1/junixsocket-native-common-2.6.1.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java-transport-netty/3.3.0/docker-java-transport-netty-3.3.0.jar:/home/marc-andre/.m2/repository/io/netty/netty-codec-http/4.1.46.Final/netty-codec-http-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-common/4.1.46.Final/netty-common-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-buffer/4.1.46.Final/netty-buffer-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-transport/4.1.46.Final/netty-transport-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-codec/4.1.46.Final/netty-codec-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-handler/4.1.46.Final/netty-handler-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-resolver/4.1.46.Final/netty-resolver-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-handler-proxy/4.1.46.Final/netty-handler-proxy-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-codec-socks/4.1.46.Final/netty-codec-socks-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-transport-native-epoll/4.1.46.Final/netty-transport-native-epoll-4.1.46.Final-linux-x86_64.jar:/home/marc-andre/.m2/repository/io/netty/netty-transport-native-unix-common/4.1.46.Final/netty-transport-native-unix-common-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-transport-native-kqueue/4.1.46.Final/netty-transport-native-kqueue-4.1.46.Final-osx-x86_64.jar:/home/marc-andre/.m2/repository/org/slf4j/jcl-over-slf4j/1.7.30/jcl-over-slf4j-1.7.30.jar:/home/marc-andre/.m2/repository/org/slf4j/slf4j-api/2.0.7/slf4j-api-2.0.7.jar:/home/marc-andre/.m2/repository/org/slf4j/slf4j-simple/2.0.7/slf4j-simple-2.0.7.jar:/home/marc-andre/.m2/repository/org/pcap4j/pcap4j-core/1.8.2/pcap4j-core-1.8.2.jar:/home/marc-andre/.m2/repository/net/java/dev/jna/jna/5.3.1/jna-5.3.1.jar:/home/marc-andre/.m2/repository/org/pcap4j/pcap4j-packetfactory-static/1.8.2/pcap4j-packetfactory-static-1.8.2.jar\r\n```\r\nand prod Env:\r\n\r\n```bash\r\n/home/marc-andre/weka-3-8-6/weka.jar\r\n```\r\n\r\nDoes someone know what could affect the correct functioning of pcap4j ?","title":"Pcap4j return null packets header depending on runtime environment","body":"<p>I'm actually developing a contextual data generator for Weka and I package it as a Weka plugins (using the templates here: <a href=\"https://github.com/bnjmn/weka/tree/master/packages/templates\" rel=\"nofollow noreferrer\">https://github.com/bnjmn/weka/tree/master/packages/templates</a>).</p>\n<p>A part of my plugins is to reading data from a pcap file so I'm using the pcap4j library. Here my problem start, while I'm in my dev environment the pcap file are well parsed and my plugins works but when I'm in a basic &quot;prod&quot; env the pcap reader doesn't read well the pcap file and return a null header for each packets.</p>\n<h2>Dev environment</h2>\n<p>Maven project</p>\n<p>Java:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ java --version\nopenjdk 11.0.18 2023-01-17\nOpenJDK Runtime Environment (build 11.0.18+10-post-Ubuntu-0ubuntu122.04)\nOpenJDK 64-Bit Server VM (build 11.0.18+10-post-Ubuntu-0ubuntu122.04, mixed mode, sharing)\n</code></pre>\n<p>In my dev env, I'm working with the Weka-3-8-6 source code, recompile it and running it with the following command:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ /usr/bin/env /usr/lib/jvm/java-11-openjdk-amd64/bin/java @/tmp/cp_1784hdtalynu1dcgm6jy5m4n0.argfile weka.gui.GUIChooser\n</code></pre>\n<p>Then I can import my zipped plugins and try it (it works well).</p>\n<h2>Prod environment</h2>\n<p>To test my plugins in real context environment (without recompiling Weka), I'm downloading the Weka-3.8.6 release, running it, importing my plugins and the trying my data generator. Here are the problem, the pcap packets headers values are all at null. First I checked the pcap file, but it hasn't change from the dev environment so the problem come from the runtime environment but I dont know why.</p>\n<p>Good to know that Weka come with it's own JRE: <code>weka-3-8-6/jre/zulu17.32.13-ca-fx-jre17.0.2-linux_x64</code></p>\n<h2>The plugins</h2>\n<p>My plugins is compiled with ant, following the <a href=\"https://github.com/bnjmn/weka/tree/master/packages/templates\" rel=\"nofollow noreferrer\">Weka plugins templates</a>. Here is the compile command:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ ant make_package -Dpackage &lt;MY_PLUGINS&gt;\n</code></pre>\n<p>And here is the related make package instruction from the <code>build.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Compile the java code from ${src}/weka into ${build}/classes --&gt;\n  &lt;target name=&quot;compile&quot; depends=&quot;init_compile&quot;\n    description=&quot;Compile package and deposit class files in build/classes&quot;&gt;\n    &lt;javac includeantruntime=&quot;false&quot; srcdir=&quot;${src}&quot;\n      fork=&quot;yes&quot; memoryMaximumSize=&quot;${javac_max_memory}&quot;\n      destdir=&quot;${build}/classes&quot;\n      optimize=&quot;${optimization}&quot;\n      debug=&quot;${debug}&quot;\n      deprecation=&quot;${deprecation}&quot;\n      source=&quot;1.6&quot; target=&quot;1.6&quot;&gt;\n      &lt;!-- Import lib dependencies --&gt;\n      &lt;classpath&gt;\n        &lt;fileset dir=&quot;${lib}&quot;&gt;\n          &lt;include name=&quot;*.jar&quot; /&gt;\n          &lt;include name=&quot;*.zip&quot; /&gt;\n        &lt;/fileset&gt;\n      &lt;/classpath&gt;\n    &lt;/javac&gt;\n    &lt;copy todir=&quot;${build}/classes&quot;&gt;\n      &lt;fileset dir=&quot;${src}&quot;&gt;\n        &lt;include name=&quot;**/*.gif&quot; /&gt;\n        &lt;include name=&quot;**/*.png&quot; /&gt;\n        &lt;include name=&quot;**/*.jpeg&quot; /&gt;\n        &lt;include name=&quot;**/*.jpg&quot; /&gt;\n        &lt;include name=&quot;**/*.props&quot; /&gt;\n        &lt;include name=&quot;**/*.txt&quot; /&gt;\n        &lt;include name=&quot;**/*.xml&quot; /&gt;\n        &lt;include name=&quot;**/*.cup&quot; /&gt;\n        &lt;include name=&quot;**/*.flex&quot; /&gt;\n        &lt;include name=&quot;**/*.jflex&quot; /&gt;\n        &lt;include name=&quot;**/*.properties&quot; /&gt;\n        &lt;include name=&quot;**/*.default&quot; /&gt;\n      &lt;/fileset&gt;\n    &lt;/copy&gt;\n  &lt;/target&gt;\n\n&lt;!-- Put everything in ${build}/classes into the ${package}.jar file --&gt;\n&lt;target name=&quot;exejar&quot; depends=&quot;compile, docs, init_dist&quot;\n  description=&quot;Create a binary jar file in ./dist&quot;&gt;\n  &lt;jar jarfile=&quot;${dist}/${package}.jar\n    basedir=&quot;${build}/classes&quot;&gt;\n  &lt;/jar&gt;\n&lt;/target&gt;\n\n&lt;target name=&quot;make_package&quot; depends=&quot;clean, exejar&quot;\n    description=&quot;Make the package zip file. Run with -Dpackage=[package name]&quot;&gt;\n    &lt;mkdir dir=&quot;${dist}/${package}&quot; /&gt;\n    &lt;copy todir=&quot;${dist}/${package}&quot;&gt;\n      &lt;fileset dir=&quot;${dist}&quot;&gt;\n        &lt;include name=&quot;*.jar&quot; /&gt;\n      &lt;/fileset&gt;\n    &lt;/copy&gt;\n    &lt;delete&gt;\n      &lt;fileset dir=&quot;${dist}&quot;&gt;\n        &lt;include name=&quot;*.jar&quot; /&gt;\n      &lt;/fileset&gt;\n    &lt;/delete&gt;\n    &lt;copy file=&quot;Description.props&quot;\n      todir=&quot;${dist}/${package}&quot; /&gt;\n    &lt;mkdir dir=&quot;${dist}/${package}/lib&quot; /&gt;\n    &lt;copy todir=&quot;${dist}/${package}/lib&quot;&gt;\n      &lt;fileset dir=&quot;${lib}&quot;&gt;\n        &lt;include name=&quot;*.jar&quot; /&gt;\n        &lt;include name=&quot;*.zip&quot; /&gt;\n      &lt;/fileset&gt;\n    &lt;/copy&gt;\n    &lt;mkdir dir=&quot;${dist}/${package}/doc&quot; /&gt;\n    &lt;copy todir=&quot;${dist}/${package}/doc&quot;&gt;\n      &lt;fileset dir=&quot;${doc}&quot;&gt;\n        &lt;include name=&quot;**/*&quot; /&gt;\n      &lt;/fileset&gt;\n    &lt;/copy&gt;\n    &lt;mkdir dir=&quot;${dist}/${package}/src&quot; /&gt;\n    &lt;copy todir=&quot;${dist}/${package}&quot;&gt;\n      &lt;fileset dir=&quot;.&quot;&gt;\n        &lt;include name=&quot;*.xml&quot; /&gt;\n        &lt;include name=&quot;src/**/*.excludes&quot; /&gt;\n        &lt;include name=&quot;src/**/*.gif&quot; /&gt;\n        &lt;include name=&quot;src/**/*.java&quot; /&gt;\n        &lt;include name=&quot;src/**/*.jpeg&quot; /&gt;\n        &lt;include name=&quot;src/**/*.jpg&quot; /&gt;\n        &lt;include name=&quot;src/**/*.props&quot; /&gt;\n        &lt;include name=&quot;src/**/*.txt&quot; /&gt;\n        &lt;include name=&quot;src/**/*.xml&quot; /&gt;\n        &lt;include name=&quot;src/**/*.cup&quot; /&gt;\n        &lt;include name=&quot;src/**/*.flex&quot; /&gt;\n        &lt;include name=&quot;src/**/*.jflex&quot; /&gt;\n        &lt;include name=&quot;src/**/*.properties&quot; /&gt;\n        &lt;include name=&quot;src/**/*.default&quot; /&gt;\n        &lt;include name=&quot;src/**/*.cost&quot; /&gt;\n        &lt;include name=&quot;src/**/*.arff&quot; /&gt;\n        &lt;include name=&quot;src/**/*.matrix&quot; /&gt;\n      &lt;/fileset&gt;\n    &lt;/copy&gt;\n    &lt;zip destfile=&quot;${dist}/${package}.zip&quot;\n      basedir=&quot;${dist}/${package}&quot;&gt;\n    &lt;/zip&gt;\n  &lt;/target&gt;\n</code></pre>\n<h2>Test</h2>\n<ol>\n<li>I trying to run my home compiled Weka (dev env) with the jre provided by Weka-3.8.6 (jre used in prod env) but still have the same issue.</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>$ /usr/bin/env /home/marc-andre/weka-3-8-6/jre/zulu17.32.13-ca-fx-jre17.0.2-linux_x64/bin/java @/tmp/cp_1784hdtalynu1dcgm6jy5m4n0.argfile weka.gui.GUIChooser\n</code></pre>\n<ol start=\"2\">\n<li>I compared the JAVA class path (by adding <code>System.out.println(System.getProperty(&quot;java.class.path&quot;)); </code>), but I'm not such an Java expert so I don't really know what I can concluded. Here are the output:</li>\n</ol>\n<p>Dev env:</p>\n<pre><code>/home/marc-andre/data/ContackGen/Weka/build/classes:/home/marc-andre/.m2/repository/com/github/vbmacher/java-cup/11b-20160615/java-cup-11b-20160615.jar:/home/marc-andre/.m2/repository/com/github/vbmacher/java-cup-runtime/11b-20160615/java-cup-runtime-11b-20160615.jar:/home/marc-andre/.m2/repository/nz/ac/waikato/cms/weka/thirdparty/bounce/0.18/bounce-0.18.jar:/home/marc-andre/.m2/repository/com/squareup/okhttp3/okhttp/4.9.1/okhttp-4.9.1.jar:/home/marc-andre/.m2/repository/com/squareup/okio/okio/2.8.0/okio-2.8.0.jar:/home/marc-andre/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib-common/1.4.0/kotlin-stdlib-common-1.4.0.jar:/home/marc-andre/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.4.10/kotlin-stdlib-1.4.10.jar:/home/marc-andre/.m2/repository/org/jetbrains/annotations/13.0/annotations-13.0.jar:/home/marc-andre/.m2/repository/org/apache/commons/commons-compress/1.21/commons-compress-1.21.jar:/home/marc-andre/.m2/repository/com/googlecode/matrix-toolkits-java/mtj/1.0.4/mtj-1.0.4.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-osx-x86_64/1.1/netlib-native_ref-osx-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/native_ref-java/1.1/native_ref-java-1.1.jar:/home/marc-andre/.m2/repository/com/github/fommil/jniloader/1.1/jniloader-1.1.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-linux-x86_64/1.1/netlib-native_ref-linux-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-linux-i686/1.1/netlib-native_ref-linux-i686-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-win-x86_64/1.1/netlib-native_ref-win-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-win-i686/1.1/netlib-native_ref-win-i686-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_ref-linux-armhf/1.1/netlib-native_ref-linux-armhf-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-osx-x86_64/1.1/netlib-native_system-osx-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/native_system-java/1.1/native_system-java-1.1.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-linux-x86_64/1.1/netlib-native_system-linux-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-linux-i686/1.1/netlib-native_system-linux-i686-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-linux-armhf/1.1/netlib-native_system-linux-armhf-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-win-x86_64/1.1/netlib-native_system-win-x86_64-1.1-natives.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/netlib-native_system-win-i686/1.1/netlib-native_system-win-i686-1.1-natives.jar:/home/marc-andre/.m2/repository/net/sourceforge/f2j/arpack_combined_all/0.1/arpack_combined_all-0.1.jar:/home/marc-andre/.m2/repository/com/googlecode/netlib-java/netlib-java/1.1/netlib-java-1.1.jar:/home/marc-andre/.m2/repository/com/github/fommil/netlib/core/1.1/core-1.1.jar:/home/marc-andre/.m2/repository/com/github/fracpete/jfilechooser-bookmarks/0.1.6/jfilechooser-bookmarks-0.1.6.jar:/home/marc-andre/.m2/repository/com/github/fracpete/jclipboardhelper/0.1.0/jclipboardhelper-0.1.0.jar:/home/marc-andre/.m2/repository/com/sun/istack/istack-commons-runtime/3.0.12/istack-commons-runtime-3.0.12.jar:/home/marc-andre/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/home/marc-andre/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/home/marc-andre/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.5/jaxb-runtime-2.3.5.jar:/home/marc-andre/.m2/repository/org/glassfish/jaxb/txw2/2.3.5/txw2-2.3.5.jar:/home/marc-andre/.m2/repository/com/sun/activation/jakarta.activation/1.2.2/jakarta.activation-1.2.2.jar:/home/marc-andre/.m2/repository/com/formdev/flatlaf/2.0/flatlaf-2.0.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java/3.3.0/docker-java-3.3.0.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java-core/3.3.0/docker-java-core-3.3.0.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java-api/3.3.0/docker-java-api-3.3.0.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.10.3/jackson-annotations-2.10.3.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java-transport/3.3.0/docker-java-transport-3.3.0.jar:/home/marc-andre/.m2/repository/commons-io/commons-io/2.6/commons-io-2.6.jar:/home/marc-andre/.m2/repository/org/apache/commons/commons-lang3/3.12.0/commons-lang3-3.12.0.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.10.3/jackson-databind-2.10.3.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.10.3/jackson-core-2.10.3.jar:/home/marc-andre/.m2/repository/com/google/guava/guava/19.0/guava-19.0.jar:/home/marc-andre/.m2/repository/org/bouncycastle/bcpkix-jdk15on/1.64/bcpkix-jdk15on-1.64.jar:/home/marc-andre/.m2/repository/org/bouncycastle/bcprov-jdk15on/1.64/bcprov-jdk15on-1.64.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java-transport-jersey/3.3.0/docker-java-transport-jersey-3.3.0.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/jaxrs/jackson-jaxrs-json-provider/2.10.3/jackson-jaxrs-json-provider-2.10.3.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/jaxrs/jackson-jaxrs-base/2.10.3/jackson-jaxrs-base-2.10.3.jar:/home/marc-andre/.m2/repository/com/fasterxml/jackson/module/jackson-module-jaxb-annotations/2.10.3/jackson-module-jaxb-annotations-2.10.3.jar:/home/marc-andre/.m2/repository/org/glassfish/jersey/connectors/jersey-apache-connector/2.30.1/jersey-apache-connector-2.30.1.jar:/home/marc-andre/.m2/repository/org/glassfish/jersey/core/jersey-common/2.30.1/jersey-common-2.30.1.jar:/home/marc-andre/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/osgi-resource-locator/1.0.3/osgi-resource-locator-1.0.3.jar:/home/marc-andre/.m2/repository/jakarta/ws/rs/jakarta.ws.rs-api/2.1.6/jakarta.ws.rs-api-2.1.6.jar:/home/marc-andre/.m2/repository/org/apache/httpcomponents/httpcore/4.4.13/httpcore-4.4.13.jar:/home/marc-andre/.m2/repository/org/apache/httpcomponents/httpclient/4.5.12/httpclient-4.5.12.jar:/home/marc-andre/.m2/repository/commons-codec/commons-codec/1.11/commons-codec-1.11.jar:/home/marc-andre/.m2/repository/org/glassfish/jersey/core/jersey-client/2.30.1/jersey-client-2.30.1.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/external/jakarta.inject/2.6.1/jakarta.inject-2.6.1.jar:/home/marc-andre/.m2/repository/org/glassfish/jersey/inject/jersey-hk2/2.30.1/jersey-hk2-2.30.1.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/hk2-locator/2.6.1/hk2-locator-2.6.1.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/external/aopalliance-repackaged/2.6.1/aopalliance-repackaged-2.6.1.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/hk2-api/2.6.1/hk2-api-2.6.1.jar:/home/marc-andre/.m2/repository/org/glassfish/hk2/hk2-utils/2.6.1/hk2-utils-2.6.1.jar:/home/marc-andre/.m2/repository/org/javassist/javassist/3.25.0-GA/javassist-3.25.0-GA.jar:/home/marc-andre/.m2/repository/com/kohlschutter/junixsocket/junixsocket-common/2.6.1/junixsocket-common-2.6.1.jar:/home/marc-andre/.m2/repository/com/kohlschutter/junixsocket/junixsocket-native-common/2.6.1/junixsocket-native-common-2.6.1.jar:/home/marc-andre/.m2/repository/com/github/docker-java/docker-java-transport-netty/3.3.0/docker-java-transport-netty-3.3.0.jar:/home/marc-andre/.m2/repository/io/netty/netty-codec-http/4.1.46.Final/netty-codec-http-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-common/4.1.46.Final/netty-common-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-buffer/4.1.46.Final/netty-buffer-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-transport/4.1.46.Final/netty-transport-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-codec/4.1.46.Final/netty-codec-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-handler/4.1.46.Final/netty-handler-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-resolver/4.1.46.Final/netty-resolver-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-handler-proxy/4.1.46.Final/netty-handler-proxy-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-codec-socks/4.1.46.Final/netty-codec-socks-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-transport-native-epoll/4.1.46.Final/netty-transport-native-epoll-4.1.46.Final-linux-x86_64.jar:/home/marc-andre/.m2/repository/io/netty/netty-transport-native-unix-common/4.1.46.Final/netty-transport-native-unix-common-4.1.46.Final.jar:/home/marc-andre/.m2/repository/io/netty/netty-transport-native-kqueue/4.1.46.Final/netty-transport-native-kqueue-4.1.46.Final-osx-x86_64.jar:/home/marc-andre/.m2/repository/org/slf4j/jcl-over-slf4j/1.7.30/jcl-over-slf4j-1.7.30.jar:/home/marc-andre/.m2/repository/org/slf4j/slf4j-api/2.0.7/slf4j-api-2.0.7.jar:/home/marc-andre/.m2/repository/org/slf4j/slf4j-simple/2.0.7/slf4j-simple-2.0.7.jar:/home/marc-andre/.m2/repository/org/pcap4j/pcap4j-core/1.8.2/pcap4j-core-1.8.2.jar:/home/marc-andre/.m2/repository/net/java/dev/jna/jna/5.3.1/jna-5.3.1.jar:/home/marc-andre/.m2/repository/org/pcap4j/pcap4j-packetfactory-static/1.8.2/pcap4j-packetfactory-static-1.8.2.jar\n</code></pre>\n<p>and prod Env:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>/home/marc-andre/weka-3-8-6/weka.jar\n</code></pre>\n<p>Does someone know what could affect the correct functioning of pcap4j ?</p>\n"},{"tags":["java","spring","spring-boot","h2"],"answers":[{"tags":[],"owner":{"account_id":19461546,"reputation":71,"user_id":14235751,"display_name":"Vladislav Syropyatov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682263027,"creation_date":1682255769,"answer_id":76085061,"question_id":76084954,"body_markdown":"I have reproduced your problem and solved it just adding ``spring-boot-starter-data-jpa`` dependency and an entity. I think you are getting &quot;Database “mem:testdb” not found&quot; because there aren&#39;t any entities to create.","title":"Connect to H2 database with Spring Boot 2.7","body":"<p>I have reproduced your problem and solved it just adding <code>spring-boot-starter-data-jpa</code> dependency and an entity. I think you are getting &quot;Database “mem:testdb” not found&quot; because there aren't any entities to create.</p>\n"}],"owner":{"account_id":14775090,"reputation":33,"user_id":10863855,"display_name":"sergio rodriguez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":810,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":76085061,"answer_count":1,"score":2,"last_activity_date":1682266353,"creation_date":1682254399,"question_id":76084954,"body_markdown":"When I try to connect to H2 console, I get this error:\r\n\r\n&gt; Database `“mem:testdb” not found`, either pre-create it or allow\r\n&gt; remote database creation.\r\n\r\nI have read in other similar questions to copy the JDBC URL that appears in the console, but I don&#39;t have that message in the console:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis is the `aplication.properties`:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI have also tried to add the line without result\r\n\r\n    spring.datasource.generate-unique-name=false\r\n\r\nI have checked the `POM` and the dependencies are well added also the devtools. I have used the Spring initializr:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.11&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.qindel&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;test&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;test&lt;/name&gt;\r\n\t&lt;description&gt;Prueba t&#233;cnica Plataforma&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAny idea?\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HUonr.png\r\n  [2]: https://i.stack.imgur.com/I6dC7.png","title":"Connect to H2 database with Spring Boot 2.7","body":"<p>When I try to connect to H2 console, I get this error:</p>\n<blockquote>\n<p>Database <code>“mem:testdb” not found</code>, either pre-create it or allow\nremote database creation.</p>\n</blockquote>\n<p>I have read in other similar questions to copy the JDBC URL that appears in the console, but I don't have that message in the console:</p>\n<p><a href=\"https://i.stack.imgur.com/HUonr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HUonr.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the <code>aplication.properties</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/I6dC7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I6dC7.png\" alt=\"enter image description here\" /></a></p>\n<p>I have also tried to add the line without result</p>\n<pre><code>spring.datasource.generate-unique-name=false\n</code></pre>\n<p>I have checked the <code>POM</code> and the dependencies are well added also the devtools. I have used the Spring initializr:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.11&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.qindel&lt;/groupId&gt;\n    &lt;artifactId&gt;test&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;test&lt;/name&gt;\n    &lt;description&gt;Prueba técnica Plataforma&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Any idea?</p>\n"},{"tags":["java","android","android-edittext"],"comments":[{"owner":{"account_id":1281728,"reputation":73126,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"score":1,"creation_date":1682254418,"post_id":76084944,"comment_id":134182968,"body_markdown":"please include the stack trace from the crash. Or best, first read it **carefully** yourself and see if that&#39;s not self explanatory one","body":"please include the stack trace from the crash. Or best, first read it <b>carefully</b> yourself and see if that&#39;s not self explanatory one"},{"owner":{"account_id":1281728,"reputation":73126,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"score":0,"creation_date":1682258128,"post_id":76084944,"comment_id":134183414,"body_markdown":"also, are you still seeing problems when you comment out `FontSettings.setDynamicTheme()`?","body":"also, are you still seeing problems when you comment out <code>FontSettings.setDynamicTheme()</code>?"},{"owner":{"account_id":1281728,"reputation":73126,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"score":0,"creation_date":1682260346,"post_id":76084944,"comment_id":134183761,"body_markdown":"so it fails without setDynamicTheme()? what is the default application theme you got set? anything custom? can you disable it?","body":"so it fails without setDynamicTheme()? what is the default application theme you got set? anything custom? can you disable it?"},{"owner":{"account_id":28387404,"reputation":3,"user_id":21713685,"display_name":"Stanislaw"},"score":0,"creation_date":1682260771,"post_id":76084944,"comment_id":134183815,"body_markdown":"Thank you for help. That was setDynamicTheme().","body":"Thank you for help. That was setDynamicTheme()."},{"owner":{"account_id":28387404,"reputation":3,"user_id":21713685,"display_name":"Stanislaw"},"score":0,"creation_date":1682261645,"post_id":76084944,"comment_id":134183939,"body_markdown":"The default theme is available but is not part of what is being changed. The idea was to take a number representing the value of one of three font sizes from a text file. Yes, theme was customized.","body":"The default theme is available but is not part of what is being changed. The idea was to take a number representing the value of one of three font sizes from a text file. Yes, theme was customized."}],"answers":[{"tags":[],"owner":{"account_id":1281728,"reputation":73126,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682264124,"creation_date":1682262222,"answer_id":76085597,"question_id":76084944,"body_markdown":"Apparently whatever theme details is the `FontSettings.setDynamicTheme()` changing, it ends up leaving  your widget in invalid or incomplete state, or with styles referring to non existing resources. \r\n\r\nMy blind guess about why it works when there&#39;s no content entered into EditText is because if there&#39;s no content, the widget for example won&#39;t need to draw some of its elements. So you can make your empty EditText focused as many times as you want and nothing bad would happen, but if there&#39;s any content and the style i.e. refers to resources that are missing (like drawables, fonts etc), then it will crash with `ResourceNotFoundException`. I guess `FontSettings` is external project, so I&#39;d check for an update fist, then I&#39;d inspect the styles it tries to apply.","title":"Why second tap on edittext field causes application error?","body":"<p>Apparently whatever theme details is the <code>FontSettings.setDynamicTheme()</code> changing, it ends up leaving  your widget in invalid or incomplete state, or with styles referring to non existing resources.</p>\n<p>My blind guess about why it works when there's no content entered into EditText is because if there's no content, the widget for example won't need to draw some of its elements. So you can make your empty EditText focused as many times as you want and nothing bad would happen, but if there's any content and the style i.e. refers to resources that are missing (like drawables, fonts etc), then it will crash with <code>ResourceNotFoundException</code>. I guess <code>FontSettings</code> is external project, so I'd check for an update fist, then I'd inspect the styles it tries to apply.</p>\n"}],"owner":{"account_id":28387404,"reputation":3,"user_id":21713685,"display_name":"Stanislaw"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76085597,"answer_count":1,"score":0,"last_activity_date":1682266262,"creation_date":1682254271,"question_id":76084944,"body_markdown":"I have one edittext field that gets a number. When the field is clear, I can touch it as many times as I want. If even one character appears and I close the keyboard, the second time I tap edittext the app will get an get runtime. \r\n\r\nI tried to find some method or anything to help me in the Android documentation about EditText but I didn&#39;t find it.\r\n\r\nHere is my code\r\n\r\nJava\r\n\r\n```java\r\npackage com.example.aplikacja_testowa;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\npublic class CallSettings extends AppCompatActivity {\r\n    private TextView textView;\r\n    private EditText editText;\r\n    private Button saveButton;\r\n\r\n    public static final String SHARED_PREFS = &quot;sharedPrefs&quot;;\r\n    public static final String TEXT = &quot;text&quot;;\r\n    //public static final\r\n\r\n    private String text;\r\n\r\n    ////////////////\r\n    int dem=0;\r\n    int them;\r\n    int selectTheme = 2;\r\n    ////////////////\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        them=SmsSettings.loadData(CallSettings.this, &quot;style.txt&quot;, null, dem);\r\n        selectTheme = them;\r\n        Log.i(&quot;TAG&quot;, &quot;onCreate selectTheme: &quot;+selectTheme);\r\n        FontSettings.setDynamicTheme(CallSettings.this, selectTheme);\r\n\r\n        setContentView(R.layout.activity_call_settings);\r\n        textView = findViewById(R.id.callInstruction);\r\n        editText = findViewById(R.id.textPhoneNumber);\r\n        saveButton = findViewById(R.id.save_button);\r\n    }\r\n\r\n    public void savePhoneNumber(View v){\r\n        SmsSettings.saveData(this, &quot;callnumber.txt&quot;, editText, 0);\r\n        Toast.makeText(this, R.string.number_saved, Toast.LENGTH_SHORT).show();\r\n    }\r\n}\r\n```\r\n\r\nXML\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.CallSettings&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/callInstruction&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/after_ent_the_num&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/textPhoneNumber&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/textPhoneNumber&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;@string/inp_ph_num&quot;\r\n        android:inputType=&quot;phone&quot;\r\n        android:minHeight=&quot;48dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/save_button&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;80dp&quot;\r\n        android:onClick=&quot;savePhoneNumber&quot;\r\n        android:text=&quot;@string/save_sett&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/textPhoneNumber&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\n```none\r\nE/InputEventReceiver: Exception dispatching input event.\r\nE/MessageQueue-JNI: Exception in MessageQueue callback: handleReceiveCallback\r\nE/MessageQueue-JNI: android.content.res.Resources$NotFoundException: Resource ID #0x0\r\n        at android.content.res.ResourcesImpl.getValue(ResourcesImpl.java:190)\r\n        at android.content.res.Resources.getDrawable(Resources.java:766)\r\n        at android.content.Context.getDrawable(Context.java:525)\r\n        at android.widget.Editor$InsertionPointCursorController.getHandle(Editor.java:5070)\r\n        at android.widget.Editor$InsertionPointCursorController.show(Editor.java:5049)\r\n        at android.widget.Editor.onTouchUpEvent(Editor.java:2136)\r\n        at android.widget.TextView.onTouchEvent(TextView.java:8510)\r\n        at android.view.View.dispatchTouchEvent(View.java:9943)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at com.android.internal.policy.DecorView.superDispatchTouchEvent(DecorView.java:411)\r\n        at com.android.internal.policy.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1810)\r\n        at android.app.Activity.dispatchTouchEvent(Activity.java:3061)\r\n        at androidx.appcompat.view.WindowCallbackWrapper.dispatchTouchEvent(WindowCallbackWrapper.java:70)\r\n        at com.android.internal.policy.DecorView.dispatchTouchEvent(DecorView.java:373)\r\n        at android.view.View.dispatchPointerEvent(View.java:10163)\r\n        at android.view.ViewRootImpl$ViewPostImeInputStage.processPointerEvent(ViewRootImpl.java:4434)\r\n        at android.view.ViewRootImpl$ViewPostImeInputStage.onProcess(ViewRootImpl.java:4302)\r\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\r\n        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3902)\r\n        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3868)\r\n        at android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:3995)\r\n        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3876)\r\n        at android.view.ViewRootImpl$AsyncInputStage.apply(ViewRootImpl.java:4052)\r\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\r\n        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3902)\r\n        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3868)\r\n        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3876)\r\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\r\n        at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:6210)\r\n        at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:6184)\r\n        at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:6145)\r\n        at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:6313)\r\n        at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:185)\r\n        at android.os.MessageQueue.nativePollOnce(Native Method)\r\n        at android.os.MessageQueue.next(MessageQueue.java:323)\r\n        at android.os.Looper.loop(Looper.java:136)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6077)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\r\nD/AndroidRuntime: Shutting down VM\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.aplikacja_testowa, PID: 14480\r\n    android.content.res.Resources$NotFoundException: Resource ID #0x0\r\n        at android.content.res.ResourcesImpl.getValue(ResourcesImpl.java:190)\r\n        at android.content.res.Resources.getDrawable(Resources.java:766)\r\n        at android.content.Context.getDrawable(Context.java:525)\r\n        at android.widget.Editor$InsertionPointCursorController.getHandle(Editor.java:5070)\r\n        at android.widget.Editor$InsertionPointCursorController.show(Editor.java:5049)\r\n        at android.widget.Editor.onTouchUpEvent(Editor.java:2136)\r\n        at android.widget.TextView.onTouchEvent(TextView.java:8510)\r\n        at android.view.View.dispatchTouchEvent(View.java:9943)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\r\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\r\n        at com.android.internal.policy.DecorView.superDispatchTouchEvent(DecorView.java:411)\r\n        at com.android.internal.policy.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1810)\r\n        at android.app.Activity.dispatchTouchEvent(Activity.java:3061)\r\n        at androidx.appcompat.view.WindowCallbackWrapper.dispatchTouchEvent(WindowCallbackWrapper.java:70)\r\n        at com.android.internal.policy.DecorView.dispatchTouchEvent(DecorView.java:373)\r\n        at android.view.View.dispatchPointerEvent(View.java:10163)\r\n        at android.view.ViewRootImpl$ViewPostImeInputStage.processPointerEvent(ViewRootImpl.java:4434)\r\n        at android.view.ViewRootImpl$ViewPostImeInputStage.onProcess(ViewRootImpl.java:4302)\r\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\r\n        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3902)\r\n        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3868)\r\n        at android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:3995)\r\n        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3876)\r\n        at android.view.ViewRootImpl$AsyncInputStage.apply(ViewRootImpl.java:4052)\r\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\r\n        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3902)\r\n        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3868)\r\n        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3876)\r\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\r\n        at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:6210)\r\n        at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:6184)\r\n        at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:6145)\r\n        at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:6313)\r\n        at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:185)\r\n        at android.os.MessageQueue.nativePollOnce(Native Method)\r\n        at android.os.MessageQueue.next(MessageQueue.java:323)\r\n        at android.os.Looper.loop(Looper.java:136)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6077)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\r\n```\r\n","title":"Why second tap on edittext field causes application error?","body":"<p>I have one edittext field that gets a number. When the field is clear, I can touch it as many times as I want. If even one character appears and I close the keyboard, the second time I tap edittext the app will get an get runtime.</p>\n<p>I tried to find some method or anything to help me in the Android documentation about EditText but I didn't find it.</p>\n<p>Here is my code</p>\n<p>Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.aplikacja_testowa;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\npublic class CallSettings extends AppCompatActivity {\n    private TextView textView;\n    private EditText editText;\n    private Button saveButton;\n\n    public static final String SHARED_PREFS = &quot;sharedPrefs&quot;;\n    public static final String TEXT = &quot;text&quot;;\n    //public static final\n\n    private String text;\n\n    ////////////////\n    int dem=0;\n    int them;\n    int selectTheme = 2;\n    ////////////////\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        them=SmsSettings.loadData(CallSettings.this, &quot;style.txt&quot;, null, dem);\n        selectTheme = them;\n        Log.i(&quot;TAG&quot;, &quot;onCreate selectTheme: &quot;+selectTheme);\n        FontSettings.setDynamicTheme(CallSettings.this, selectTheme);\n\n        setContentView(R.layout.activity_call_settings);\n        textView = findViewById(R.id.callInstruction);\n        editText = findViewById(R.id.textPhoneNumber);\n        saveButton = findViewById(R.id.save_button);\n    }\n\n    public void savePhoneNumber(View v){\n        SmsSettings.saveData(this, &quot;callnumber.txt&quot;, editText, 0);\n        Toast.makeText(this, R.string.number_saved, Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n<p>XML</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.CallSettings&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/callInstruction&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/after_ent_the_num&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/textPhoneNumber&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/textPhoneNumber&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;@string/inp_ph_num&quot;\n        android:inputType=&quot;phone&quot;\n        android:minHeight=&quot;48dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/save_button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;80dp&quot;\n        android:onClick=&quot;savePhoneNumber&quot;\n        android:text=&quot;@string/save_sett&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/textPhoneNumber&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>E/InputEventReceiver: Exception dispatching input event.\nE/MessageQueue-JNI: Exception in MessageQueue callback: handleReceiveCallback\nE/MessageQueue-JNI: android.content.res.Resources$NotFoundException: Resource ID #0x0\n        at android.content.res.ResourcesImpl.getValue(ResourcesImpl.java:190)\n        at android.content.res.Resources.getDrawable(Resources.java:766)\n        at android.content.Context.getDrawable(Context.java:525)\n        at android.widget.Editor$InsertionPointCursorController.getHandle(Editor.java:5070)\n        at android.widget.Editor$InsertionPointCursorController.show(Editor.java:5049)\n        at android.widget.Editor.onTouchUpEvent(Editor.java:2136)\n        at android.widget.TextView.onTouchEvent(TextView.java:8510)\n        at android.view.View.dispatchTouchEvent(View.java:9943)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at com.android.internal.policy.DecorView.superDispatchTouchEvent(DecorView.java:411)\n        at com.android.internal.policy.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1810)\n        at android.app.Activity.dispatchTouchEvent(Activity.java:3061)\n        at androidx.appcompat.view.WindowCallbackWrapper.dispatchTouchEvent(WindowCallbackWrapper.java:70)\n        at com.android.internal.policy.DecorView.dispatchTouchEvent(DecorView.java:373)\n        at android.view.View.dispatchPointerEvent(View.java:10163)\n        at android.view.ViewRootImpl$ViewPostImeInputStage.processPointerEvent(ViewRootImpl.java:4434)\n        at android.view.ViewRootImpl$ViewPostImeInputStage.onProcess(ViewRootImpl.java:4302)\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\n        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3902)\n        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3868)\n        at android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:3995)\n        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3876)\n        at android.view.ViewRootImpl$AsyncInputStage.apply(ViewRootImpl.java:4052)\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\n        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3902)\n        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3868)\n        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3876)\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\n        at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:6210)\n        at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:6184)\n        at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:6145)\n        at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:6313)\n        at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:185)\n        at android.os.MessageQueue.nativePollOnce(Native Method)\n        at android.os.MessageQueue.next(MessageQueue.java:323)\n        at android.os.Looper.loop(Looper.java:136)\n        at android.app.ActivityThread.main(ActivityThread.java:6077)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\nD/AndroidRuntime: Shutting down VM\nE/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.aplikacja_testowa, PID: 14480\n    android.content.res.Resources$NotFoundException: Resource ID #0x0\n        at android.content.res.ResourcesImpl.getValue(ResourcesImpl.java:190)\n        at android.content.res.Resources.getDrawable(Resources.java:766)\n        at android.content.Context.getDrawable(Context.java:525)\n        at android.widget.Editor$InsertionPointCursorController.getHandle(Editor.java:5070)\n        at android.widget.Editor$InsertionPointCursorController.show(Editor.java:5049)\n        at android.widget.Editor.onTouchUpEvent(Editor.java:2136)\n        at android.widget.TextView.onTouchEvent(TextView.java:8510)\n        at android.view.View.dispatchTouchEvent(View.java:9943)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2669)\n        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2358)\n        at com.android.internal.policy.DecorView.superDispatchTouchEvent(DecorView.java:411)\n        at com.android.internal.policy.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1810)\n        at android.app.Activity.dispatchTouchEvent(Activity.java:3061)\n        at androidx.appcompat.view.WindowCallbackWrapper.dispatchTouchEvent(WindowCallbackWrapper.java:70)\n        at com.android.internal.policy.DecorView.dispatchTouchEvent(DecorView.java:373)\n        at android.view.View.dispatchPointerEvent(View.java:10163)\n        at android.view.ViewRootImpl$ViewPostImeInputStage.processPointerEvent(ViewRootImpl.java:4434)\n        at android.view.ViewRootImpl$ViewPostImeInputStage.onProcess(ViewRootImpl.java:4302)\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\n        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3902)\n        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3868)\n        at android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:3995)\n        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3876)\n        at android.view.ViewRootImpl$AsyncInputStage.apply(ViewRootImpl.java:4052)\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\n        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3902)\n        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3868)\n        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3876)\n        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3849)\n        at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:6210)\n        at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:6184)\n        at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:6145)\n        at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:6313)\n        at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:185)\n        at android.os.MessageQueue.nativePollOnce(Native Method)\n        at android.os.MessageQueue.next(MessageQueue.java:323)\n        at android.os.Looper.loop(Looper.java:136)\n        at android.app.ActivityThread.main(ActivityThread.java:6077)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\n</code></pre>\n"},{"tags":["java","kotlin","google-cloud-dataflow"],"owner":{"account_id":18015281,"reputation":68,"user_id":13093935,"display_name":"Pancho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682265945,"creation_date":1682264014,"question_id":76085747,"body_markdown":"I&#39;m having some trouble running this:\r\n\r\n```kotlin\r\nimport com.google.api.services.bigquery.model.TableRow\r\nimport com.google.cloud.bigquery.*\r\nimport org.apache.beam.runners.dataflow.DataflowRunner\r\nimport org.apache.beam.sdk.Pipeline\r\nimport org.apache.beam.sdk.io.gcp.bigquery.BigQueryHelpers\r\nimport org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO\r\nimport org.apache.beam.sdk.io.kafka.KafkaIO\r\nimport org.apache.beam.sdk.options.Description\r\nimport org.apache.beam.sdk.options.PipelineOptions\r\nimport org.apache.beam.sdk.options.PipelineOptionsFactory\r\nimport org.apache.beam.sdk.options.Validation\r\nimport org.apache.beam.sdk.transforms.MapElements\r\nimport org.apache.beam.sdk.transforms.SerializableFunction\r\nimport org.apache.beam.sdk.values.TypeDescriptor\r\nimport org.apache.kafka.common.serialization.ByteArrayDeserializer\r\nimport org.joda.time.Duration\r\n\r\ninterface KafkaToBigQueryOptions : PipelineOptions {\r\n    @get:Description(&quot;mytopic&quot;)\r\n    @get:Validation.Required\r\n    var inputTopic: String\r\n\r\n    @get:Description(&quot;mytable&quot;)\r\n    @get:Validation.Required\r\n    var outputTable: String\r\n\r\n    @get:Description(&quot;mydataset&quot;)\r\n    @get:Validation.Required\r\n    var outputDataset: String\r\n\r\n    @get:Description(&quot;my-project&quot;)\r\n    @get:Validation.Required\r\n    var outputProject: String\r\n}\r\n\r\nfun main(args: Array&lt;String&gt;) {\r\n    val options = PipelineOptionsFactory.fromArgs(*args)\r\n        .withValidation()\r\n        .`as`(KafkaToBigQueryOptions::class.java)\r\n    options.runner = DataflowRunner::class.java\r\n    val pipeline = Pipeline.create(options)\r\n\r\n    val kafkaReadOptions = KafkaIO.read&lt;ByteArray, ByteArray&gt;()\r\n        .withBootstrapServers(&quot;mykafka-server.local:9092&quot;)\r\n        .withTopic(options.inputTopic)\r\n        .withKeyDeserializer(ByteArrayDeserializer::class.java)\r\n        .withValueDeserializer(ByteArrayDeserializer::class.java)\r\n        .withDynamicRead(Duration.standardSeconds(5))\r\n\r\n    val bigQueryTable = BigQueryHelpers.parseTableSpec(\r\n        &quot;${options.outputProject}:${options.outputDataset}.${options.outputTable}&quot;\r\n    )\r\n\r\n    pipeline.apply(&quot;Read from Kafka&quot;, kafkaReadOptions)\r\n        .apply(&quot;Transform to TableRow&quot;, MapElements.into(TypeDescriptor.of(TableRow::class.java))\r\n            .via(SerializableFunction { value -&gt;\r\n                val row = TableRow()\r\n                row.set(&quot;message&quot;, value.toString())\r\n                row\r\n            }))\r\n        .apply(&quot;Write to BigQuery&quot;, BigQueryIO.writeTableRows()\r\n            .to(bigQueryTable)\r\n            .withCreateDisposition(BigQueryIO.Write.CreateDisposition.CREATE_IF_NEEDED)\r\n            .withWriteDisposition(BigQueryIO.Write.WriteDisposition.WRITE_APPEND))\r\n\r\n    pipeline.run().waitUntilFinish()\r\n}\r\n```\r\n\r\nWhen I run it from IntelliJ, I get the errors below. That same error shows up even if I declare the input topic in `options.inputTopic = &quot;mytopic&quot;`.\r\n\r\n```none\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Missing required value for [--inputTopic, &quot;mytopic&quot;]. \r\n\tat org.apache.beam.vendor.guava.v26_0_jre.com.google.common.base.Preconditions.checkArgument(Preconditions.java:440)\r\n\tat org.apache.beam.sdk.options.PipelineOptionsValidator.validate(PipelineOptionsValidator.java:93)\r\n\tat org.apache.beam.sdk.options.PipelineOptionsValidator.validateCli(PipelineOptionsValidator.java:65)\r\n\tat org.apache.beam.sdk.options.PipelineOptionsFactory$Builder.as(PipelineOptionsFactory.java:346)\r\n\tat MainKt.main(Main.kt:39)\r\n```\r\n\r\nRebuilt .jar, ran it with command:\r\n\r\n`java -jar jarfile.jar --experiments=beam_fn_api --runner=DataflowRunner --project=myproject --region=us-central1 --inputTopic=mytopic --outputTable=mytable --outputDataset=mydataset --outputProject=myotherproject`\r\n\r\nError:\r\n\r\n```none\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Unknown &#39;runner&#39; specified &#39;DataflowRunner&#39;, supported pipeline runners []\r\n```","title":"Unknown &#39;runner&#39; specified &#39;DataflowRunner&#39;","body":"<p>I'm having some trouble running this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import com.google.api.services.bigquery.model.TableRow\nimport com.google.cloud.bigquery.*\nimport org.apache.beam.runners.dataflow.DataflowRunner\nimport org.apache.beam.sdk.Pipeline\nimport org.apache.beam.sdk.io.gcp.bigquery.BigQueryHelpers\nimport org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO\nimport org.apache.beam.sdk.io.kafka.KafkaIO\nimport org.apache.beam.sdk.options.Description\nimport org.apache.beam.sdk.options.PipelineOptions\nimport org.apache.beam.sdk.options.PipelineOptionsFactory\nimport org.apache.beam.sdk.options.Validation\nimport org.apache.beam.sdk.transforms.MapElements\nimport org.apache.beam.sdk.transforms.SerializableFunction\nimport org.apache.beam.sdk.values.TypeDescriptor\nimport org.apache.kafka.common.serialization.ByteArrayDeserializer\nimport org.joda.time.Duration\n\ninterface KafkaToBigQueryOptions : PipelineOptions {\n    @get:Description(&quot;mytopic&quot;)\n    @get:Validation.Required\n    var inputTopic: String\n\n    @get:Description(&quot;mytable&quot;)\n    @get:Validation.Required\n    var outputTable: String\n\n    @get:Description(&quot;mydataset&quot;)\n    @get:Validation.Required\n    var outputDataset: String\n\n    @get:Description(&quot;my-project&quot;)\n    @get:Validation.Required\n    var outputProject: String\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val options = PipelineOptionsFactory.fromArgs(*args)\n        .withValidation()\n        .`as`(KafkaToBigQueryOptions::class.java)\n    options.runner = DataflowRunner::class.java\n    val pipeline = Pipeline.create(options)\n\n    val kafkaReadOptions = KafkaIO.read&lt;ByteArray, ByteArray&gt;()\n        .withBootstrapServers(&quot;mykafka-server.local:9092&quot;)\n        .withTopic(options.inputTopic)\n        .withKeyDeserializer(ByteArrayDeserializer::class.java)\n        .withValueDeserializer(ByteArrayDeserializer::class.java)\n        .withDynamicRead(Duration.standardSeconds(5))\n\n    val bigQueryTable = BigQueryHelpers.parseTableSpec(\n        &quot;${options.outputProject}:${options.outputDataset}.${options.outputTable}&quot;\n    )\n\n    pipeline.apply(&quot;Read from Kafka&quot;, kafkaReadOptions)\n        .apply(&quot;Transform to TableRow&quot;, MapElements.into(TypeDescriptor.of(TableRow::class.java))\n            .via(SerializableFunction { value -&gt;\n                val row = TableRow()\n                row.set(&quot;message&quot;, value.toString())\n                row\n            }))\n        .apply(&quot;Write to BigQuery&quot;, BigQueryIO.writeTableRows()\n            .to(bigQueryTable)\n            .withCreateDisposition(BigQueryIO.Write.CreateDisposition.CREATE_IF_NEEDED)\n            .withWriteDisposition(BigQueryIO.Write.WriteDisposition.WRITE_APPEND))\n\n    pipeline.run().waitUntilFinish()\n}\n</code></pre>\n<p>When I run it from IntelliJ, I get the errors below. That same error shows up even if I declare the input topic in <code>options.inputTopic = &quot;mytopic&quot;</code>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Missing required value for [--inputTopic, &quot;mytopic&quot;]. \n    at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.base.Preconditions.checkArgument(Preconditions.java:440)\n    at org.apache.beam.sdk.options.PipelineOptionsValidator.validate(PipelineOptionsValidator.java:93)\n    at org.apache.beam.sdk.options.PipelineOptionsValidator.validateCli(PipelineOptionsValidator.java:65)\n    at org.apache.beam.sdk.options.PipelineOptionsFactory$Builder.as(PipelineOptionsFactory.java:346)\n    at MainKt.main(Main.kt:39)\n</code></pre>\n<p>Rebuilt .jar, ran it with command:</p>\n<p><code>java -jar jarfile.jar --experiments=beam_fn_api --runner=DataflowRunner --project=myproject --region=us-central1 --inputTopic=mytopic --outputTable=mytable --outputDataset=mydataset --outputProject=myotherproject</code></p>\n<p>Error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Unknown 'runner' specified 'DataflowRunner', supported pipeline runners []\n</code></pre>\n"},{"tags":["java","user-interface","jbutton"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1682272957,"post_id":76085882,"comment_id":134185503,"body_markdown":"Where is the `Notizbuch` class?","body":"Where is the <code>Notizbuch</code> class?"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1682274267,"post_id":76085882,"comment_id":134185675,"body_markdown":"And where is the `Notiz` class?","body":"And where is the <code>Notiz</code> class?"}],"owner":{"account_id":28389065,"reputation":1,"user_id":21715105,"display_name":"Jack Tucker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682265928,"creation_date":1682265729,"question_id":76085882,"body_markdown":"For my school project i&#39;m trying to create a functioning Notebook project in Java and when i try to update a existing note in my GUI i&#39;m running into the problem, that instead of just overwriting the existing note in the GUI it just creates a new one leaving the old note still in the menu . so like the problem i&#39;m having is that i don&#39;t want duplicate note titles aswell. \r\n```\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.io.*;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\n\r\npublic class NotizbuchGUI extends JFrame {\r\n    /**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tprivate JTextArea textArea;\r\n    private JTextField titleField;\r\n    private JList&lt;Notiz&gt; noteList;\r\n    private Notizbuch notizbuch;\r\n\r\n    public NotizbuchGUI() {\r\n        super(&quot;Notizbuch&quot;);\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        setSize(600, 400);\r\n\r\n        // Erstelle GUI-Komponenten\r\n        JPanel panel = new JPanel(new BorderLayout());\r\n        textArea = new JTextArea();\r\n        titleField = new JTextField();\r\n        noteList = new JList&lt;&gt;();\r\n        JScrollPane scrollPane = new JScrollPane(noteList);\r\n        JButton newButton = new JButton(&quot;Neue Notiz&quot;);\r\n        JButton saveButton = new JButton(&quot;Speichern&quot;);\r\n        JButton deleteButton = new JButton(&quot;L&#246;schen&quot;);\r\n\r\n        // F&#252;ge GUI-Komponenten zum Panel hinzu\r\n        JPanel topPanel = new JPanel(new BorderLayout());\r\n        topPanel.add(new JLabel(&quot;Titel:&quot;), BorderLayout.WEST);\r\n        topPanel.add(titleField, BorderLayout.CENTER);\r\n        topPanel.add(newButton, BorderLayout.EAST);\r\n        panel.add(topPanel, BorderLayout.NORTH);\r\n        panel.add(textArea, BorderLayout.CENTER);\r\n        JPanel buttonPanel = new JPanel(new FlowLayout());\r\n        buttonPanel.add(saveButton);\r\n        buttonPanel.add(deleteButton);\r\n        panel.add(buttonPanel, BorderLayout.SOUTH);\r\n        panel.add(scrollPane, BorderLayout.WEST);\r\n        add(panel);\r\n\r\n        // Erstelle Notizbuch\r\n        notizbuch = new Notizbuch();\r\n\r\n        // F&#252;lle Notizliste\r\n        updateNoteList();\r\n\r\n        // F&#252;ge Listener hinzu\r\n        noteList.addListSelectionListener(e -&gt; {\r\n            if (!e.getValueIsAdjusting()) {\r\n                Notiz selectedNote = noteList.getSelectedValue();\r\n                if (selectedNote != null) {\r\n                    titleField.setText(selectedNote.getTitel());\r\n                    textArea.setText(selectedNote.getText());\r\n                }\r\n            }\r\n        });\r\n        newButton.addActionListener(e -&gt; {\r\n            titleField.setText(&quot;&quot;);\r\n            textArea.setText(&quot;&quot;);\r\n        });\r\n        saveButton.addActionListener(e -&gt; {\r\n            String titel = titleField.getText();\r\n            String text = textArea.getText();\r\n            if (!titel.isEmpty() &amp;&amp; !text.isEmpty()) {\r\n                Notiz notiz = new Notiz(titel, text);\r\n                notizbuch.addNotiz(notiz);\r\n                updateNoteList();\r\n                saveNotiz(notiz);\r\n            }\r\n        });\r\n        deleteButton.addActionListener(e -&gt; {\r\n            Notiz selectedNote = noteList.getSelectedValue();\r\n            if (selectedNote != null) {\r\n                notizbuch.removeNotiz(selectedNote);\r\n                updateNoteList();\r\n                deleteNotiz(selectedNote);\r\n                titleField.setText(&quot;&quot;);\r\n                textArea.setText(&quot;&quot;);\r\n            }\r\n        });\r\n\r\n        setVisible(true);\r\n    }\r\n\r\n    private void updateNoteList() {\r\n        DefaultListModel&lt;Notiz&gt; model = new DefaultListModel&lt;&gt;();\r\n        for (Notiz notiz : notizbuch.getNotizen()) {\r\n            model.addElement(notiz);\r\n        }\r\n        noteList.setModel(model);\r\n    }\r\n\r\n    private void saveNotiz(Notiz notiz) {\r\n        try {\r\n            String filename = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(new Date()) + &quot;.txt&quot;;\r\n            File file = new File(filename);\r\n            if (!file.exists()) {\r\n                file.createNewFile();\r\n            }\r\n            BufferedReader reader = new BufferedReader(new FileReader(file));\r\n            ArrayList&lt;String&gt; lines = new ArrayList&lt;String&gt;();\r\n            String line;\r\n            while ((line = reader.readLine()) != null) {\r\n                lines.add(line);\r\n            }\r\n            reader.close();\r\n            BufferedWriter writer = new BufferedWriter(new FileWriter(file));\r\n            boolean notizFound = false;\r\n            for (int i = 0; i &lt; lines.size(); i += 2) {\r\n                String titel = lines.get(i);\r\n                String text = lines.get(i + 1);\r\n                if (titel.equals(notiz.getTitel())) {\r\n                    writer.write(notiz.getTitel() + &quot;\\n&quot;);\r\n                    writer.write(notiz.getText() + &quot;\\n&quot;);\r\n                    notizFound = true;\r\n                } else {\r\n                    writer.write(titel + &quot;\\n&quot;);\r\n                    writer.write(text + &quot;\\n&quot;);\r\n                }\r\n            }\r\n            if (!notizFound) {\r\n                writer.write(notiz.getTitel() + &quot;\\n&quot;);\r\n                writer.write(notiz.getText() + &quot;\\n&quot;);\r\n            }\r\n            writer.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private void deleteNotiz(Notiz notiz) {\r\n        String filename = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(notiz.getDatum()) + &quot;.txt&quot;;\r\n        File file = new File(filename);\r\n        if (file.exists()) {\r\n            file.delete();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new NotizbuchGUI();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\ni don&#39;t know how to solve the problem and tried updating my save method as such:\r\n\r\n```\r\nprivate void saveNotiz(Notiz notiz) {\r\n    try {\r\n        String filename = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(new Date()) + &quot;.txt&quot;;\r\n        File file = new File(filename);\r\n        if (!file.exists()) {\r\n            file.createNewFile();\r\n        }\r\n        BufferedReader reader = new BufferedReader(new FileReader(file));\r\n        List&lt;String&gt; lines = new ArrayList&lt;String&gt;();\r\n        String line;\r\n        while ((line = reader.readLine()) != null) {\r\n            lines.add(line);\r\n        }\r\n        reader.close();\r\n        BufferedWriter writer = new BufferedWriter(new FileWriter(file));\r\n        boolean notizFound = false;\r\n        for (int i = 0; i &lt; lines.size(); i += 2) {\r\n            String titel = lines.get(i);\r\n            String text = lines.get(i + 1);\r\n            if (titel.equals(notiz.getTitel())) {\r\n                writer.write(notiz.getTitel() + &quot;\\n&quot;);\r\n                writer.write(notiz.getText() + &quot;\\n&quot;);\r\n                notizFound = true;\r\n            } else {\r\n                writer.write(titel + &quot;\\n&quot;);\r\n                writer.write(text + &quot;\\n&quot;);\r\n            }\r\n        }\r\n        if (!notizFound) {\r\n            writer.write(notiz.getTitel() + &quot;\\n&quot;);\r\n            writer.write(notiz.getText() + &quot;\\n&quot;);\r\n        }\r\n        writer.close();\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n\r\n```\r\n\r\n[GUI][1]\r\n\r\n  [1]: https://i.stack.imgur.com/YjaNd.png","title":"UpdateNote instead of Creating a new Note","body":"<p>For my school project i'm trying to create a functioning Notebook project in Java and when i try to update a existing note in my GUI i'm running into the problem, that instead of just overwriting the existing note in the GUI it just creates a new one leaving the old note still in the menu . so like the problem i'm having is that i don't want duplicate note titles aswell.</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.io.*;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Date;\n\npublic class NotizbuchGUI extends JFrame {\n    /**\n     * \n     */\n    private static final long serialVersionUID = 1L;\n    private JTextArea textArea;\n    private JTextField titleField;\n    private JList&lt;Notiz&gt; noteList;\n    private Notizbuch notizbuch;\n\n    public NotizbuchGUI() {\n        super(&quot;Notizbuch&quot;);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setSize(600, 400);\n\n        // Erstelle GUI-Komponenten\n        JPanel panel = new JPanel(new BorderLayout());\n        textArea = new JTextArea();\n        titleField = new JTextField();\n        noteList = new JList&lt;&gt;();\n        JScrollPane scrollPane = new JScrollPane(noteList);\n        JButton newButton = new JButton(&quot;Neue Notiz&quot;);\n        JButton saveButton = new JButton(&quot;Speichern&quot;);\n        JButton deleteButton = new JButton(&quot;Löschen&quot;);\n\n        // Füge GUI-Komponenten zum Panel hinzu\n        JPanel topPanel = new JPanel(new BorderLayout());\n        topPanel.add(new JLabel(&quot;Titel:&quot;), BorderLayout.WEST);\n        topPanel.add(titleField, BorderLayout.CENTER);\n        topPanel.add(newButton, BorderLayout.EAST);\n        panel.add(topPanel, BorderLayout.NORTH);\n        panel.add(textArea, BorderLayout.CENTER);\n        JPanel buttonPanel = new JPanel(new FlowLayout());\n        buttonPanel.add(saveButton);\n        buttonPanel.add(deleteButton);\n        panel.add(buttonPanel, BorderLayout.SOUTH);\n        panel.add(scrollPane, BorderLayout.WEST);\n        add(panel);\n\n        // Erstelle Notizbuch\n        notizbuch = new Notizbuch();\n\n        // Fülle Notizliste\n        updateNoteList();\n\n        // Füge Listener hinzu\n        noteList.addListSelectionListener(e -&gt; {\n            if (!e.getValueIsAdjusting()) {\n                Notiz selectedNote = noteList.getSelectedValue();\n                if (selectedNote != null) {\n                    titleField.setText(selectedNote.getTitel());\n                    textArea.setText(selectedNote.getText());\n                }\n            }\n        });\n        newButton.addActionListener(e -&gt; {\n            titleField.setText(&quot;&quot;);\n            textArea.setText(&quot;&quot;);\n        });\n        saveButton.addActionListener(e -&gt; {\n            String titel = titleField.getText();\n            String text = textArea.getText();\n            if (!titel.isEmpty() &amp;&amp; !text.isEmpty()) {\n                Notiz notiz = new Notiz(titel, text);\n                notizbuch.addNotiz(notiz);\n                updateNoteList();\n                saveNotiz(notiz);\n            }\n        });\n        deleteButton.addActionListener(e -&gt; {\n            Notiz selectedNote = noteList.getSelectedValue();\n            if (selectedNote != null) {\n                notizbuch.removeNotiz(selectedNote);\n                updateNoteList();\n                deleteNotiz(selectedNote);\n                titleField.setText(&quot;&quot;);\n                textArea.setText(&quot;&quot;);\n            }\n        });\n\n        setVisible(true);\n    }\n\n    private void updateNoteList() {\n        DefaultListModel&lt;Notiz&gt; model = new DefaultListModel&lt;&gt;();\n        for (Notiz notiz : notizbuch.getNotizen()) {\n            model.addElement(notiz);\n        }\n        noteList.setModel(model);\n    }\n\n    private void saveNotiz(Notiz notiz) {\n        try {\n            String filename = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(new Date()) + &quot;.txt&quot;;\n            File file = new File(filename);\n            if (!file.exists()) {\n                file.createNewFile();\n            }\n            BufferedReader reader = new BufferedReader(new FileReader(file));\n            ArrayList&lt;String&gt; lines = new ArrayList&lt;String&gt;();\n            String line;\n            while ((line = reader.readLine()) != null) {\n                lines.add(line);\n            }\n            reader.close();\n            BufferedWriter writer = new BufferedWriter(new FileWriter(file));\n            boolean notizFound = false;\n            for (int i = 0; i &lt; lines.size(); i += 2) {\n                String titel = lines.get(i);\n                String text = lines.get(i + 1);\n                if (titel.equals(notiz.getTitel())) {\n                    writer.write(notiz.getTitel() + &quot;\\n&quot;);\n                    writer.write(notiz.getText() + &quot;\\n&quot;);\n                    notizFound = true;\n                } else {\n                    writer.write(titel + &quot;\\n&quot;);\n                    writer.write(text + &quot;\\n&quot;);\n                }\n            }\n            if (!notizFound) {\n                writer.write(notiz.getTitel() + &quot;\\n&quot;);\n                writer.write(notiz.getText() + &quot;\\n&quot;);\n            }\n            writer.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n\n\n    private void deleteNotiz(Notiz notiz) {\n        String filename = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(notiz.getDatum()) + &quot;.txt&quot;;\n        File file = new File(filename);\n        if (file.exists()) {\n            file.delete();\n        }\n    }\n\n    public static void main(String[] args) {\n        new NotizbuchGUI();\n    }\n}\n\n</code></pre>\n<p>i don't know how to solve the problem and tried updating my save method as such:</p>\n<pre><code>private void saveNotiz(Notiz notiz) {\n    try {\n        String filename = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(new Date()) + &quot;.txt&quot;;\n        File file = new File(filename);\n        if (!file.exists()) {\n            file.createNewFile();\n        }\n        BufferedReader reader = new BufferedReader(new FileReader(file));\n        List&lt;String&gt; lines = new ArrayList&lt;String&gt;();\n        String line;\n        while ((line = reader.readLine()) != null) {\n            lines.add(line);\n        }\n        reader.close();\n        BufferedWriter writer = new BufferedWriter(new FileWriter(file));\n        boolean notizFound = false;\n        for (int i = 0; i &lt; lines.size(); i += 2) {\n            String titel = lines.get(i);\n            String text = lines.get(i + 1);\n            if (titel.equals(notiz.getTitel())) {\n                writer.write(notiz.getTitel() + &quot;\\n&quot;);\n                writer.write(notiz.getText() + &quot;\\n&quot;);\n                notizFound = true;\n            } else {\n                writer.write(titel + &quot;\\n&quot;);\n                writer.write(text + &quot;\\n&quot;);\n            }\n        }\n        if (!notizFound) {\n            writer.write(notiz.getTitel() + &quot;\\n&quot;);\n            writer.write(notiz.getText() + &quot;\\n&quot;);\n        }\n        writer.close();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/YjaNd.png\" rel=\"nofollow noreferrer\">GUI</a></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"score":0,"creation_date":1682266133,"post_id":76085891,"comment_id":134184603,"body_markdown":"check this please: https://stackoverflow.com/a/19068076","body":"check this please: <a href=\"https://stackoverflow.com/a/19068076\">stackoverflow.com/a/19068076</a>"}],"owner":{"account_id":19802967,"reputation":11,"user_id":14503509,"display_name":"Md Siamul Islam Soaib"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682265892,"creation_date":1682265892,"question_id":76085891,"body_markdown":"I have a website. I have converted it to android app via java webview. The website has the option to login with Facebook and Google. But this option can&#39;t work webapp\r\n\r\nI have used some code which makes it possible to login with facebook but it has to login separately. Login is not happening in other apps","title":"How to access data of default browser from web app","body":"<p>I have a website. I have converted it to android app via java webview. The website has the option to login with Facebook and Google. But this option can't work webapp</p>\n<p>I have used some code which makes it possible to login with facebook but it has to login separately. Login is not happening in other apps</p>\n"},{"tags":["javascript","java","spring-boot","image","fetch-api"],"answers":[{"tags":[],"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682265784,"creation_date":1682265784,"answer_id":76085885,"question_id":76085551,"body_markdown":"You should use **form data**. Additionally before uploading the file from the client, you can use **postman** and you can generate file upload code from there. Here is code:\r\n\r\n    var myHeaders = new Headers();\r\n    \r\n    var formdata = new FormData();\r\n    formdata.append(&quot;file&quot;, fileInput.files[0], &quot;&lt;PATH&gt;&quot;);\r\n    \r\n    var requestOptions = {\r\n      method: &#39;POST&#39;,\r\n      headers: myHeaders,\r\n      body: formdata,\r\n      redirect: &#39;follow&#39;\r\n    };\r\n    \r\n    fetch(&quot;http://localhost:8082/api/file/upload&quot;, requestOptions)\r\n      .then(response =&gt; response.text())\r\n      .then(result =&gt; console.log(result))\r\n      .catch(error =&gt; console.log(&#39;error&#39;, error));\r\n\r\n\r\nPostman example:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jKDQC.png","title":"Sending image from JS client to Java/Springboot server via fetch returns error 500","body":"<p>You should use <strong>form data</strong>. Additionally before uploading the file from the client, you can use <strong>postman</strong> and you can generate file upload code from there. Here is code:</p>\n<pre><code>var myHeaders = new Headers();\n\nvar formdata = new FormData();\nformdata.append(&quot;file&quot;, fileInput.files[0], &quot;&lt;PATH&gt;&quot;);\n\nvar requestOptions = {\n  method: 'POST',\n  headers: myHeaders,\n  body: formdata,\n  redirect: 'follow'\n};\n\nfetch(&quot;http://localhost:8082/api/file/upload&quot;, requestOptions)\n  .then(response =&gt; response.text())\n  .then(result =&gt; console.log(result))\n  .catch(error =&gt; console.log('error', error));\n</code></pre>\n<p>Postman example:</p>\n<p><a href=\"https://i.stack.imgur.com/jKDQC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jKDQC.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":17124342,"reputation":1,"user_id":12391920,"display_name":"vicinl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682265784,"creation_date":1682261740,"question_id":76085551,"body_markdown":"I need to send (upload) an image file from the web client (html+javascript) to the server (java/springboot) that will then store it.\r\n\r\nOn the client side I have created a form, of course\r\n\r\n```\r\n&lt;form action=&quot;&quot; name=&quot;missionForm&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; novalidate&gt;\r\n  &lt;fieldset&gt;\r\n    &lt;div class=&quot;field&quot;&gt;\r\n      &lt;label&gt;\r\n        &lt;span style=&quot;font-weight:bold&quot;&gt;Mission name&lt;/span&gt;\r\n\t&lt;input data-validate-length-range=&quot;3&quot; name=&quot;name&quot; id=&quot;name&quot; required=&quot;required&quot; /&gt;\r\n      &lt;/label&gt;\r\n    &lt;/div&gt;\r\n    &lt;div class=&quot;field&quot;&gt;\r\n      &lt;label&gt;\r\n\t&lt;span&gt;Mission image (png):&lt;/span&gt;\r\n\t&lt;input type=&#39;file&#39; class=&#39;optional&#39; name=&#39;loadImage&#39; id=&#39;loadImage&#39; accept=&#39;image/png&#39;&gt;\r\n      &lt;/label&gt;\r\n    &lt;/div&gt;\r\n &lt;/fieldset&gt;\r\n&lt;/form&gt;\r\n\r\n```\r\nThe form is read below via javascript, who sends the request via fetch\r\n\r\n\r\n```\r\ndocument.forms[0].onsubmit = function(e){\r\n    e.preventDefault();\r\n   var imageFile = document.forms[&#39;missionForm&#39;][&#39;loadImage&#39;].files[0];\r\n   \r\n   const test = fetch(url+&quot;/api/saveImage&quot;, {\r\n\tmethod: &#39;POST&#39;,\r\n        body: imageFile,\r\n    });\r\n}\r\n```\r\n\r\nOn the server side (Java / Springboot), I have created the following method in the Controller class\r\n\r\n```\r\n@PostMapping(value=&quot;/api/saveImage&quot;)\r\npublic void saveImage(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws SQLException{\r\n     String fileName = StringUtils.cleanPath(multipartFile.getOriginalFilename());\r\n     System.out.println(&quot;filename is &quot;+fileName);\t\r\n}\r\n```\r\n\r\nWhen I launch this, I get error 500 on the client.\r\nOn the server side, I get the following error &quot;org.springframework.web.multipart.MultipartException: Current request is not a multipart request&quot;\r\n\r\nI do not understand why. Can anybody help? I am sure I am missing something silly here.\r\nThanks!\r\n\r\n\r\n\r\nI tried &quot;forcing&quot; the content-type in the fetch request, but I only get a different error\r\n\r\n\r\n```\r\n   const test = fetch(url+&quot;/api/saveImage&quot;, {\r\n\tmethod: &#39;POST&#39;,\r\n        headers: {&#39;Content-Type&#39;: &#39;multipart/form-data&#39;,},\r\n        body: imageFile,\r\n    });\t\r\n```\r\n\r\nand the error is &quot;org.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found&quot;\r\n","title":"Sending image from JS client to Java/Springboot server via fetch returns error 500","body":"<p>I need to send (upload) an image file from the web client (html+javascript) to the server (java/springboot) that will then store it.</p>\n<p>On the client side I have created a form, of course</p>\n<pre><code>&lt;form action=&quot;&quot; name=&quot;missionForm&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; novalidate&gt;\n  &lt;fieldset&gt;\n    &lt;div class=&quot;field&quot;&gt;\n      &lt;label&gt;\n        &lt;span style=&quot;font-weight:bold&quot;&gt;Mission name&lt;/span&gt;\n    &lt;input data-validate-length-range=&quot;3&quot; name=&quot;name&quot; id=&quot;name&quot; required=&quot;required&quot; /&gt;\n      &lt;/label&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;field&quot;&gt;\n      &lt;label&gt;\n    &lt;span&gt;Mission image (png):&lt;/span&gt;\n    &lt;input type='file' class='optional' name='loadImage' id='loadImage' accept='image/png'&gt;\n      &lt;/label&gt;\n    &lt;/div&gt;\n &lt;/fieldset&gt;\n&lt;/form&gt;\n\n</code></pre>\n<p>The form is read below via javascript, who sends the request via fetch</p>\n<pre><code>document.forms[0].onsubmit = function(e){\n    e.preventDefault();\n   var imageFile = document.forms['missionForm']['loadImage'].files[0];\n   \n   const test = fetch(url+&quot;/api/saveImage&quot;, {\n    method: 'POST',\n        body: imageFile,\n    });\n}\n</code></pre>\n<p>On the server side (Java / Springboot), I have created the following method in the Controller class</p>\n<pre><code>@PostMapping(value=&quot;/api/saveImage&quot;)\npublic void saveImage(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws SQLException{\n     String fileName = StringUtils.cleanPath(multipartFile.getOriginalFilename());\n     System.out.println(&quot;filename is &quot;+fileName);   \n}\n</code></pre>\n<p>When I launch this, I get error 500 on the client.\nOn the server side, I get the following error &quot;org.springframework.web.multipart.MultipartException: Current request is not a multipart request&quot;</p>\n<p>I do not understand why. Can anybody help? I am sure I am missing something silly here.\nThanks!</p>\n<p>I tried &quot;forcing&quot; the content-type in the fetch request, but I only get a different error</p>\n<pre><code>   const test = fetch(url+&quot;/api/saveImage&quot;, {\n    method: 'POST',\n        headers: {'Content-Type': 'multipart/form-data',},\n        body: imageFile,\n    }); \n</code></pre>\n<p>and the error is &quot;org.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found&quot;</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1682273315,"post_id":76085846,"comment_id":134185558,"body_markdown":"What build tool do you use ? Maven ? If yes, post the pom.xml. Inspect the application.properties in the jar.  Post the application.properties.","body":"What build tool do you use ? Maven ? If yes, post the pom.xml. Inspect the application.properties in the jar.  Post the application.properties."},{"owner":{"account_id":28387859,"reputation":1,"user_id":21714076,"display_name":"popfumo"},"score":0,"creation_date":1682436271,"post_id":76085846,"comment_id":134213620,"body_markdown":"I use maven:\n\nHere is the application.properties:\nspring.datasource.url=jdbc:mysql://localhost:8080/\nspring.datasource.username=user\nspring.datasource.password=pass\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.properties.hibernate.globally_quoted_identifiers=true\nspring.jpa.properties.hibernate.globally_quoted_identifiers_skip_column_definitions=true\nspring.jackson.serialization.fail-on-empty-beans=false","body":"I use maven:  Here is the application.properties: spring.datasource.url=jdbc:mysql://localhost:8080/ spring.datasource.username=user spring.datasource.password=pass spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver spring.jpa.hibernate.ddl-auto=update spring.jpa.properties.hibernate.dialect=org.hibernate.dialec&zwnj;&#8203;t.MySQLDialect spring.jpa.properties.hibernate.globally_quoted_identifiers=&zwnj;&#8203;true spring.jpa.properties.hibernate.globally_quoted_identifiers_&zwnj;&#8203;skip_column_definiti&zwnj;&#8203;ons=true spring.jackson.serialization.fail-on-empty-beans=false"},{"owner":{"account_id":28387859,"reputation":1,"user_id":21714076,"display_name":"popfumo"},"score":0,"creation_date":1682436316,"post_id":76085846,"comment_id":134213633,"body_markdown":"I cant post the whole pom.xml due to charcter limit. But my dependencies are: \nSpring Boot starter web, \nSpring Boot starter data jpa, \nSpring Boot starter validation, \nMySQL connector java, \nLombok, Spring Boot starter test ,\nJUnit","body":"I cant post the whole pom.xml due to charcter limit. But my dependencies are:  Spring Boot starter web,  Spring Boot starter data jpa,  Spring Boot starter validation,  MySQL connector java,  Lombok, Spring Boot starter test , JUnit"}],"owner":{"account_id":28387859,"reputation":1,"user_id":21714076,"display_name":"popfumo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":277,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682265683,"creation_date":1682265301,"question_id":76085846,"body_markdown":"I&#39;m having issues with my Spring Boot application that is running Hibernate and MySQL. When running the code live in my IDE, it works just fine, but when I build the code into a jar-file, it changes the SQL-dialect to H2 database instead of MySQL.\r\n\r\nRunning in the IDE:\r\n\r\n```none\r\n17:51:21.326 [main] INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\r\n```\r\n\r\nRunning the jar-file:\r\n\r\n```none\r\n17:24:58.789 [main] INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect\r\n```\r\n\r\nBecause of that, it won&#39;t create some of the tables because some of the columns are using reserved words in H2 that are not reserved in MySQL. \r\n\r\nI&#39;ve tried to force Hibernate to use the MySQL dialect in the application.properties by entering:\r\n\r\n```none\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\nspring.jpa.database=mysql\r\n```\r\nbut it won&#39;t do anything. I&#39;ve also added a Hibernate configuration file into main/resources, but it doesn&#39;t do anything either. Am I missing something? I use IntelliJ Ultimate as my IDE, MySQL version 8.0.28 and Spring Boot version 3.0.5.&#160;","title":"Spring Boot application with Hibernate runs a different SQL-dialect than specified","body":"<p>I'm having issues with my Spring Boot application that is running Hibernate and MySQL. When running the code live in my IDE, it works just fine, but when I build the code into a jar-file, it changes the SQL-dialect to H2 database instead of MySQL.</p>\n<p>Running in the IDE:</p>\n<pre class=\"lang-none prettyprint-override\"><code>17:51:21.326 [main] INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\n</code></pre>\n<p>Running the jar-file:</p>\n<pre class=\"lang-none prettyprint-override\"><code>17:24:58.789 [main] INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect\n</code></pre>\n<p>Because of that, it won't create some of the tables because some of the columns are using reserved words in H2 that are not reserved in MySQL.</p>\n<p>I've tried to force Hibernate to use the MySQL dialect in the application.properties by entering:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.database=mysql\n</code></pre>\n<p>but it won't do anything. I've also added a Hibernate configuration file into main/resources, but it doesn't do anything either. Am I missing something? I use IntelliJ Ultimate as my IDE, MySQL version 8.0.28 and Spring Boot version 3.0.5. </p>\n"},{"tags":["java","android","zxing"],"answers":[{"tags":[],"owner":{"account_id":1902989,"reputation":351,"user_id":1718445,"display_name":"Edwin M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682265458,"creation_date":1682265458,"answer_id":76085861,"question_id":72946677,"body_markdown":"One way to improve the scan speed is to put the barcode format. This is if all barcode you&#39;ll be scanning are of the same format eg CODE 128, EAN_13\r\n\r\n    \r\n\r\n    integrator.setDesiredBarcodeFormats(IntentIntegrator.CODE_128);","title":"Please tell me how to upgrade the QR code scanning recognition rate","body":"<p>One way to improve the scan speed is to put the barcode format. This is if all barcode you'll be scanning are of the same format eg CODE 128, EAN_13</p>\n<pre><code>integrator.setDesiredBarcodeFormats(IntentIntegrator.CODE_128);\n</code></pre>\n"}],"owner":{"account_id":25786368,"reputation":1,"user_id":19531104,"display_name":"kch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682265561,"creation_date":1657596102,"question_id":72946677,"body_markdown":"I am developing using android studio and java and am a beginner developer.\r\n\r\nIt works by implementing zxing-android-embedded:4.3.0 in the app to scan the QR.\r\n\r\nDepending on the angle, light, etc., there are many cases in which recognition is delayed.\r\n\r\nPlease tell me how to improve the recognition rate.\r\n\r\nPlease help.\r\n\r\n&lt;build.gragle&gt;\r\n\r\n    implementation &#39;com.journeyapps:zxing-android-embedded:4.3.0&#39;\r\n\r\n&lt;mainactivity.java&gt;\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        scanCode();\r\n    }\r\n\r\n    private void scanCode(){\r\n        IntentIntegrator integrator = new IntentIntegrator(this);\r\n        integrator.setCaptureActivity(CaptureAct.class);\r\n        integrator.setOrientationLocked(false);\r\n        integrator.setDesiredBarcodeFormats(IntentIntegrator.ALL_CODE_TYPES);\r\n        integrator.addExtra(Intents.Scan.SCAN_TYPE, Intents.Scan.MIXED_SCAN);\r\n        integrator.setPrompt(&quot;Code를 스캔해주세요.&quot;);\r\n        integrator.initiateScan();\r\n    }\r\n&lt;CaptureAct.java&gt;\r\n\r\n    package com.emtech.gscmapp;\r\n    import com.journeyapps.barcodescanner.CaptureActivity;\r\n    public class CaptureAct extends CaptureActivity {\r\n    }\r\n\r\n\r\nps. I am a beginner developer in Korea. If the translation is wrong, please understand.\r\n\r\nsorry, thank you, Plz help me","title":"Please tell me how to upgrade the QR code scanning recognition rate","body":"<p>I am developing using android studio and java and am a beginner developer.</p>\n<p>It works by implementing zxing-android-embedded:4.3.0 in the app to scan the QR.</p>\n<p>Depending on the angle, light, etc., there are many cases in which recognition is delayed.</p>\n<p>Please tell me how to improve the recognition rate.</p>\n<p>Please help.</p>\n<p>&lt;build.gragle&gt;</p>\n<pre><code>implementation 'com.journeyapps:zxing-android-embedded:4.3.0'\n</code></pre>\n<p>&lt;mainactivity.java&gt;</p>\n<pre><code>@Override\npublic void onClick(View v) {\n    scanCode();\n}\n\nprivate void scanCode(){\n    IntentIntegrator integrator = new IntentIntegrator(this);\n    integrator.setCaptureActivity(CaptureAct.class);\n    integrator.setOrientationLocked(false);\n    integrator.setDesiredBarcodeFormats(IntentIntegrator.ALL_CODE_TYPES);\n    integrator.addExtra(Intents.Scan.SCAN_TYPE, Intents.Scan.MIXED_SCAN);\n    integrator.setPrompt(&quot;Code를 스캔해주세요.&quot;);\n    integrator.initiateScan();\n}\n</code></pre>\n<p>&lt;CaptureAct.java&gt;</p>\n<pre><code>package com.emtech.gscmapp;\nimport com.journeyapps.barcodescanner.CaptureActivity;\npublic class CaptureAct extends CaptureActivity {\n}\n</code></pre>\n<p>ps. I am a beginner developer in Korea. If the translation is wrong, please understand.</p>\n<p>sorry, thank you, Plz help me</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1682009319,"post_id":76066029,"comment_id":134152089,"body_markdown":"If you can get away with using a `KeyListener`, it can do exactly this for you. Let me know if that is a viable solution for you and then I can type up an answer.","body":"If you can get away with using a <code>KeyListener</code>, it can do exactly this for you. Let me know if that is a viable solution for you and then I can type up an answer."},{"owner":{"account_id":14866375,"reputation":465,"user_id":10735351,"display_name":"Graham Meehan"},"score":1,"creation_date":1682009526,"post_id":76066029,"comment_id":134152140,"body_markdown":"Absolutely! We are not tied to any particular constraints for this task. I appreciate it.","body":"Absolutely! We are not tied to any particular constraints for this task. I appreciate it."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1682010767,"post_id":76066029,"comment_id":134152423,"body_markdown":"Ok, typing up now","body":"Ok, typing up now"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1682012974,"post_id":76066029,"comment_id":134152901,"body_markdown":"@davidalayachew: and I&#39;m going to tell you right now that a KeyListener is not the way to solve this problem since it will only work if the listened-to component has and maintains keyboard focus. The OP has already started to use Key Bindings, which is the right path, why offer a solution that has them moving backwards?","body":"@davidalayachew: and I&#39;m going to tell you right now that a KeyListener is not the way to solve this problem since it will only work if the listened-to component has and maintains keyboard focus. The OP has already started to use Key Bindings, which is the right path, why offer a solution that has them moving backwards?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1682013092,"post_id":76066029,"comment_id":134152932,"body_markdown":"No you should NOT use a KeyListener. Swing was designed to be used with Key Bindings. *it triggered the action multiple times instead of just once* - you will have the same issue with a KeyListener.  *Is there a good Java-native option to handle this problem* If you have a &quot;Proceed&quot; button, why not set a mnemonic for the button to use &quot;Alt p&quot;. Then the &quot;p&quot; on the button will be underlined to give the user a visual cue how to invoke the button with the keyboard. Check out the Swing tutorial on [How to Use Actions](https://docs.oracle.com/javase/tutorial/uiswing/misc/action.html) for an example.","body":"No you should NOT use a KeyListener. Swing was designed to be used with Key Bindings. <i>it triggered the action multiple times instead of just once</i> - you will have the same issue with a KeyListener.  <i>Is there a good Java-native option to handle this problem</i> If you have a &quot;Proceed&quot; button, why not set a mnemonic for the button to use &quot;Alt p&quot;. Then the &quot;p&quot; on the button will be underlined to give the user a visual cue how to invoke the button with the keyboard. Check out the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/action.html\" rel=\"nofollow noreferrer\">How to Use Actions</a> for an example."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1682014815,"post_id":76066029,"comment_id":134153253,"body_markdown":"Seems like multiple people disagree, so I will leave it alone.","body":"Seems like multiple people disagree, so I will leave it alone."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1682014929,"post_id":76066029,"comment_id":134153289,"body_markdown":"@HovercraftFullOfEels to answer your questions, KeyListener is very convenient for me whenever I need to simply parse and handle basic key press behaviour. Focus issues never really came up for me that couldn&#39;t be easily dealt with. Perhaps the nature of OP&#39;s project makes it less than ideal, but I&#39;ve used them to great effect.","body":"@HovercraftFullOfEels to answer your questions, KeyListener is very convenient for me whenever I need to simply parse and handle basic key press behaviour. Focus issues never really came up for me that couldn&#39;t be easily dealt with. Perhaps the nature of OP&#39;s project makes it less than ideal, but I&#39;ve used them to great effect."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1682015016,"post_id":76066029,"comment_id":134153308,"body_markdown":"@camickr I wasn&#39;t implying that the KeyListener alone would solve the problem. Clearly, more effort than that is required. I suggested KeyListener because I solved this exact same problem multiple times before, and KeyListener was an important part of the solution.","body":"@camickr I wasn&#39;t implying that the KeyListener alone would solve the problem. Clearly, more effort than that is required. I suggested KeyListener because I solved this exact same problem multiple times before, and KeyListener was an important part of the solution."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1682024718,"post_id":76066029,"comment_id":134155135,"body_markdown":"@davidalayachew *because I solved this exact same problem multiple times before*  - there is no problem so solve if you use the proper API. Using Actions and Key Bindings is the newer solution used by all Swing components. I suggest you also read the tutorial I linked to so you can better understand the benefits of this approach.","body":"@davidalayachew <i>because I solved this exact same problem multiple times before</i>  - there is no problem so solve if you use the proper API. Using Actions and Key Bindings is the newer solution used by all Swing components. I suggest you also read the tutorial I linked to so you can better understand the benefits of this approach."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1682028510,"post_id":76066029,"comment_id":134155740,"body_markdown":"@camickr I understand the benefits of the approach just fine, I have used bindings multiple times before as well. And when I say problem, I am trying to say &quot;achieve a specific functionality&quot;. I am not saying that Key Bindings are in any way problematic, or that they are somehow incapable of solving this problem. I brought up KeyListener because it is a perfectly serviceable solution that is easy to explain and meets basic needs. When I wrote my first comment, I was very much aware of the fact that the same could be achieved using Key Bindings.","body":"@camickr I understand the benefits of the approach just fine, I have used bindings multiple times before as well. And when I say problem, I am trying to say &quot;achieve a specific functionality&quot;. I am not saying that Key Bindings are in any way problematic, or that they are somehow incapable of solving this problem. I brought up KeyListener because it is a perfectly serviceable solution that is easy to explain and meets basic needs. When I wrote my first comment, I was very much aware of the fact that the same could be achieved using Key Bindings."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1682028780,"post_id":76066029,"comment_id":134155770,"body_markdown":"@GrahamMeehan since everyone feels so strongly against using KeyListener, I will type up a solution instead that uses Key Bindings","body":"@GrahamMeehan since everyone feels so strongly against using KeyListener, I will type up a solution instead that uses Key Bindings"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1682030037,"post_id":76066029,"comment_id":134155934,"body_markdown":"@davidalayachew There was no reason to suggest using a KeyListener since Key Bindings is the preferred Swing solution. We attempt to answer question with with current Swing design approaches. There was no reason for you to suggest a KeyListener to confuse the issue (or do continue to dwell on the point)  I already gave the solution in my first comment. Have you not yet read the tutorial? Swing will built the Key Bindings for you.","body":"@davidalayachew There was no reason to suggest using a KeyListener since Key Bindings is the preferred Swing solution. We attempt to answer question with with current Swing design approaches. There was no reason for you to suggest a KeyListener to confuse the issue (or do continue to dwell on the point)  I already gave the solution in my first comment. Have you not yet read the tutorial? Swing will built the Key Bindings for you."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1682030368,"post_id":76066029,"comment_id":134155986,"body_markdown":"[mcve] please .","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please ."},{"owner":{"account_id":14866375,"reputation":465,"user_id":10735351,"display_name":"Graham Meehan"},"score":0,"creation_date":1682030656,"post_id":76066029,"comment_id":134156024,"body_markdown":"@camickr - your first comment only links to a broad tutorial and mentions changing which letter I use for the shortcut, which is not something I have flexibility over due to the business requirements imposed on me.","body":"@camickr - your first comment only links to a broad tutorial and mentions changing which letter I use for the shortcut, which is not something I have flexibility over due to the business requirements imposed on me."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1682031478,"post_id":76066029,"comment_id":134156108,"body_markdown":"@camickr *&quot;We attempt to answer questions with current Swing design approaches&quot;* -- If this is the reason why I should not have suggested KeyListener in the first place, then I accept this reason. And when I say I am typing up a solution, I am not saying that your link doesn&#39;t provide the functionality they are aiming for. I am saying that a fully coded example similar to what the OP is trying to do would likely be helpful to both them and everyone else who sees this post, so I will do that. In fact, I am going to be linking the tutorial you linked in my answer as well.","body":"@camickr <i>&quot;We attempt to answer questions with current Swing design approaches&quot;</i> -- If this is the reason why I should not have suggested KeyListener in the first place, then I accept this reason. And when I say I am typing up a solution, I am not saying that your link doesn&#39;t provide the functionality they are aiming for. I am saying that a fully coded example similar to what the OP is trying to do would likely be helpful to both them and everyone else who sees this post, so I will do that. In fact, I am going to be linking the tutorial you linked in my answer as well."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1682042545,"post_id":76066029,"comment_id":134157285,"body_markdown":"Answer has been posted.","body":"Answer has been posted."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1682052334,"post_id":76066029,"comment_id":134158113,"body_markdown":"@GrahamMeehan *...and mentions changing which letter I use for the shortcut,* - the suggestion was to use a mnemonic. The logical choice is to do what a standard UI does an pick a mnemonic that matches the text of the button. However, that is not a requirement. I guess you didn&#39;t try it. All you had to do was copy the demo code and change a single character for one of the mnemonics the see if &quot;Alt-V&quot; would work. We should not have to explain the code in the tutorial. If there is something about the tutorial you don&#39;t understand then ask a question. We can&#39;t guess what you might find confusing.","body":"@GrahamMeehan <i>...and mentions changing which letter I use for the shortcut,</i> - the suggestion was to use a mnemonic. The logical choice is to do what a standard UI does an pick a mnemonic that matches the text of the button. However, that is not a requirement. I guess you didn&#39;t try it. All you had to do was copy the demo code and change a single character for one of the mnemonics the see if &quot;Alt-V&quot; would work. We should not have to explain the code in the tutorial. If there is something about the tutorial you don&#39;t understand then ask a question. We can&#39;t guess what you might find confusing."}],"answers":[{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682093019,"creation_date":1682042531,"answer_id":76069389,"question_id":76066029,"body_markdown":"## Short Answer ##\r\n\r\nYou should use Mnemonics. They don&#39;t run into the problem you ran into because, with Mnemonics, holding Alt+V is the same thing as holding the button with your computer mouse. The button remains pressed until you let go of V, regardless of if you let go of Alt before or after V.\r\n\r\nThat solves the multiple click problem, but please note that that means that ***input only happens when you let go of the button, not when you push it down***. I think that I am solving your actual issue here ([sounds like an XY Problem][1]), but please note that ***the button event will not occur on push, but on release***.\r\n\r\n---\r\n\r\n## Long Answer ##\r\n\r\nSo, what you are trying to do is to have your button be triggered only once upon key press. If that is your goal, then we can accomplish that more easily using Mnemonics and [`javax.swing.Action`][2]. Following the suggestion from [`@camickr`][3] above, I would also encourage you to look at the [&quot;How to Use Actions&quot; tutorial][4] provided by Oracle themselves. Their Swing tutorials are excellent.\r\n\r\nSo to begin, Swing provides developers the ability to attach a [Mnemonic][5] to many of the key Swing components. Mnemonics are an accessibility feature that allows the user to perform more complex actions through key combinations. In Swing, that is commonly done via Alt+SomeKey. Mnemonics can be activated by attaching an `Action` to the component that you want to make easily accessible.\r\n\r\nAccording to the [Action supported Swing Components diagram][6], all buttons that subtype [`JComponent`][7] have the ability to use Mnemonics (***PLEASE NOTE that not all Swing components can use Mnemonics***). They each have a method on them called `setAction(Action action)`. The method definition for it is [`AbstractButton::setAction`][8]. And since [`JButton`][9] is a child of `AbstractButton`, that means that `JButton` also has this method too.\r\n\r\nSo, we know how to achieve what we want (using an `Action` on a `JButton`) and we know that it is possible for buttons (according to the diagram I listed above). Let&#39;s build the `Action`.\r\n\r\nIn order to make a button get triggered by an `Action`, we must first create an `Action`, set the Mnemonic on the Action, then attach it to the button via `JButton::setAction`. Here is a quick and dirty demo that shows that off.\r\n\r\n```java\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JButton;\r\nimport javax.swing.AbstractAction;\r\nimport javax.swing.Action;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.KeyEvent;\r\n\r\npublic class Example1\r\n{\r\n\r\n   public static void main(String[] args)\r\n   {\r\n    \r\n      JFrame frame = new JFrame();\r\n   \r\n      JButton button = new JButton();\r\n   \r\n      Action action = \r\n         new AbstractAction()\r\n         {\r\n         \r\n            public void actionPerformed(ActionEvent event)\r\n            {\r\n            \r\n               System.out.println(&quot;You pressed Alt-V&quot;);\r\n            \r\n            }\r\n         \r\n         };\r\n   \r\n      action.putValue(Action.NAME, &quot;This is the button text -- press Alt-V&quot;);\r\n   \r\n      action.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_V);\r\n   \r\n      button.setAction(action);\r\n   \r\n      frame.getContentPane().add(button);\r\n   \r\n      frame.pack();\r\n   \r\n      frame.setVisible(true);\r\n   \r\n    \r\n   }\r\n\r\n}\r\n```\r\n\r\nAs you can see if you run the above, it creates a tiny little `JFrame` holding nothing but a button. If you press Alt-V when the window is in focus, you can trigger the button presses. And, by default, the keyboard combination doesn&#39;t run into any of the potholes that InputMap and ActionMap brought you into.\r\n\r\nThe code is mostly self-explanatory, but the 4 lines that matter most are the 2 [`Action::putValue`][10] lines, the `AbstractButton::setAction` line, and the line inside of the `actionPerformed(ActionEvent event)` method.\r\n\r\nThe `actionPerformed(ActionEvent event)` method is what happens whenever the button is pressed. The `Action::putValue` lines configure the action. The first one specifies the text that should show up on the `JButton`. The second one attaches the keyboard combination to the `Action` itself. Then, we attach this `Action` to the `JButton` using the `setAction(Action action)` method. Once that is done, then the `JButton` can be triggered by using `Alt-V`.\r\n\r\nHere is a more complicated example that shows how this might look when nested inside of multiple `JPanel` instances.\r\n\r\n```java\r\n\r\nimport javax.swing.AbstractAction;\r\nimport javax.swing.Action;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\nimport java.awt.BorderLayout;\r\nimport java.awt.CardLayout;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.KeyEvent;\r\n\r\npublic class KeyboardControls\r\n{\r\n\r\n   public static void main(String[] args)\r\n   {\r\n   \r\n      new KeyboardControls();\r\n   \r\n   }\r\n \r\n   public KeyboardControls()\r\n   {\r\n   \r\n      final JFrame frame = makeBasicJFrame();\r\n   \r\n      final JPanel parentPanel = makeParentPanel();\r\n   \r\n      frame.add(parentPanel);\r\n   \r\n      frame.setVisible(true);\r\n   \r\n   }\r\n \r\n   private JFrame makeBasicJFrame()\r\n   {\r\n   \r\n      final JFrame frame = new JFrame();\r\n   \r\n      frame.setSize(500, 500);\r\n      frame.setLocationByPlatform(true);\r\n      frame.setTitle(&quot;Keyboard Controls&quot;);\r\n      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n   \r\n      return frame;\r\n   \r\n   }\r\n \r\n   private JPanel makeParentPanel()\r\n   {\r\n   \r\n      final JPanel parentPanel = new JPanel();\r\n      parentPanel.setLayout(new BorderLayout());\r\n   \r\n      final CardLayout cardLayout = new CardLayout();\r\n   \r\n      final JPanel cardLayoutPanel = makeCardLayoutPanel(cardLayout);\r\n   \r\n      final Action nextAction =\r\n               new AbstractAction()\r\n               {\r\n               \r\n                  public void actionPerformed(final ActionEvent event)\r\n                  {\r\n                  \r\n                     cardLayout.next(cardLayoutPanel);\r\n                  \r\n                  }\r\n               \r\n               };\r\n   \r\n      final JButton nextButton = makeNextButton(nextAction);\r\n   \r\n      parentPanel.add(cardLayoutPanel, BorderLayout.CENTER);\r\n      parentPanel.add(nextButton, BorderLayout.SOUTH);\r\n   \r\n      return parentPanel;\r\n   \r\n   }\r\n \r\n   private void addPageToGivenPanel(final JPanel givenPanel, final String pageName)\r\n   {\r\n   \r\n      final JPanel pagePanel = new JPanel();\r\n   \r\n      final JLabel pageLabel = new JLabel();\r\n      pageLabel.setText(pageName);\r\n   \r\n      pagePanel.add(pageLabel);\r\n   \r\n      givenPanel.add(pagePanel, pageName);\r\n   \r\n   }\r\n \r\n   private JPanel makeCardLayoutPanel(final CardLayout cardLayout)\r\n   {\r\n   \r\n      final JPanel cardLayoutPanel = new JPanel();\r\n   \r\n      cardLayoutPanel.setLayout(cardLayout);\r\n   \r\n      addPageToGivenPanel(cardLayoutPanel, &quot;PAGE_1&quot;);\r\n      addPageToGivenPanel(cardLayoutPanel, &quot;PAGE_2&quot;);\r\n      addPageToGivenPanel(cardLayoutPanel, &quot;PAGE_3&quot;);\r\n      addPageToGivenPanel(cardLayoutPanel, &quot;PAGE_4&quot;);\r\n      addPageToGivenPanel(cardLayoutPanel, &quot;PAGE_5&quot;);\r\n   \r\n      return cardLayoutPanel;\r\n   \r\n   }\r\n \r\n   private JButton makeNextButton(final Action nextAction)\r\n   {\r\n   \r\n      final JButton nextButton = new JButton();\r\n      nextButton.setAction(nextAction);\r\n   \r\n      final String buttonText = &quot;NEXT -- Press Alt-V on your keyboard&quot;;\r\n   \r\n      nextAction.putValue(Action.NAME, buttonText);\r\n      nextAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_V);\r\n   \r\n      return nextButton;\r\n   \r\n   }\r\n \r\n}\r\n```\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/XY_problem\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/Action.html\r\n  [3]: https://stackoverflow.com/questions/76066029/how-to-make-altv-only-process-one-time-when-held-down-then-released#comment134152932_76066029\r\n  [4]: https://docs.oracle.com/javase/tutorial/uiswing/misc/action.html\r\n  [5]: https://stackoverflow.com/questions/13614887/what-is-a-mnemonic-in-java#13614933\r\n  [6]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/Action.html#buttonActions\r\n  [7]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/JComponent.html\r\n  [8]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/AbstractButton.html#setAction(javax.swing.Action)\r\n  [9]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/JButton.html\r\n  [10]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/Action.html#putValue(java.lang.String,java.lang.Object)","title":"How to make Alt+V only process one time when held down then released?","body":"<h2>Short Answer</h2>\n<p>You should use Mnemonics. They don't run into the problem you ran into because, with Mnemonics, holding Alt+V is the same thing as holding the button with your computer mouse. The button remains pressed until you let go of V, regardless of if you let go of Alt before or after V.</p>\n<p>That solves the multiple click problem, but please note that that means that <em><strong>input only happens when you let go of the button, not when you push it down</strong></em>. I think that I am solving your actual issue here (<a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">sounds like an XY Problem</a>), but please note that <em><strong>the button event will not occur on push, but on release</strong></em>.</p>\n<hr />\n<h2>Long Answer</h2>\n<p>So, what you are trying to do is to have your button be triggered only once upon key press. If that is your goal, then we can accomplish that more easily using Mnemonics and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/Action.html\" rel=\"nofollow noreferrer\"><code>javax.swing.Action</code></a>. Following the suggestion from <a href=\"https://stackoverflow.com/questions/76066029/how-to-make-altv-only-process-one-time-when-held-down-then-released#comment134152932_76066029\"><code>@camickr</code></a> above, I would also encourage you to look at the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/action.html\" rel=\"nofollow noreferrer\">&quot;How to Use Actions&quot; tutorial</a> provided by Oracle themselves. Their Swing tutorials are excellent.</p>\n<p>So to begin, Swing provides developers the ability to attach a <a href=\"https://stackoverflow.com/questions/13614887/what-is-a-mnemonic-in-java#13614933\">Mnemonic</a> to many of the key Swing components. Mnemonics are an accessibility feature that allows the user to perform more complex actions through key combinations. In Swing, that is commonly done via Alt+SomeKey. Mnemonics can be activated by attaching an <code>Action</code> to the component that you want to make easily accessible.</p>\n<p>According to the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/Action.html#buttonActions\" rel=\"nofollow noreferrer\">Action supported Swing Components diagram</a>, all buttons that subtype <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/JComponent.html\" rel=\"nofollow noreferrer\"><code>JComponent</code></a> have the ability to use Mnemonics (<em><strong>PLEASE NOTE that not all Swing components can use Mnemonics</strong></em>). They each have a method on them called <code>setAction(Action action)</code>. The method definition for it is <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/AbstractButton.html#setAction(javax.swing.Action)\" rel=\"nofollow noreferrer\"><code>AbstractButton::setAction</code></a>. And since <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/JButton.html\" rel=\"nofollow noreferrer\"><code>JButton</code></a> is a child of <code>AbstractButton</code>, that means that <code>JButton</code> also has this method too.</p>\n<p>So, we know how to achieve what we want (using an <code>Action</code> on a <code>JButton</code>) and we know that it is possible for buttons (according to the diagram I listed above). Let's build the <code>Action</code>.</p>\n<p>In order to make a button get triggered by an <code>Action</code>, we must first create an <code>Action</code>, set the Mnemonic on the Action, then attach it to the button via <code>JButton::setAction</code>. Here is a quick and dirty demo that shows that off.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.JFrame;\nimport javax.swing.JButton;\nimport javax.swing.AbstractAction;\nimport javax.swing.Action;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.KeyEvent;\n\npublic class Example1\n{\n\n   public static void main(String[] args)\n   {\n    \n      JFrame frame = new JFrame();\n   \n      JButton button = new JButton();\n   \n      Action action = \n         new AbstractAction()\n         {\n         \n            public void actionPerformed(ActionEvent event)\n            {\n            \n               System.out.println(&quot;You pressed Alt-V&quot;);\n            \n            }\n         \n         };\n   \n      action.putValue(Action.NAME, &quot;This is the button text -- press Alt-V&quot;);\n   \n      action.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_V);\n   \n      button.setAction(action);\n   \n      frame.getContentPane().add(button);\n   \n      frame.pack();\n   \n      frame.setVisible(true);\n   \n    \n   }\n\n}\n</code></pre>\n<p>As you can see if you run the above, it creates a tiny little <code>JFrame</code> holding nothing but a button. If you press Alt-V when the window is in focus, you can trigger the button presses. And, by default, the keyboard combination doesn't run into any of the potholes that InputMap and ActionMap brought you into.</p>\n<p>The code is mostly self-explanatory, but the 4 lines that matter most are the 2 <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/Action.html#putValue(java.lang.String,java.lang.Object)\" rel=\"nofollow noreferrer\"><code>Action::putValue</code></a> lines, the <code>AbstractButton::setAction</code> line, and the line inside of the <code>actionPerformed(ActionEvent event)</code> method.</p>\n<p>The <code>actionPerformed(ActionEvent event)</code> method is what happens whenever the button is pressed. The <code>Action::putValue</code> lines configure the action. The first one specifies the text that should show up on the <code>JButton</code>. The second one attaches the keyboard combination to the <code>Action</code> itself. Then, we attach this <code>Action</code> to the <code>JButton</code> using the <code>setAction(Action action)</code> method. Once that is done, then the <code>JButton</code> can be triggered by using <code>Alt-V</code>.</p>\n<p>Here is a more complicated example that shows how this might look when nested inside of multiple <code>JPanel</code> instances.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport javax.swing.AbstractAction;\nimport javax.swing.Action;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport java.awt.BorderLayout;\nimport java.awt.CardLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.KeyEvent;\n\npublic class KeyboardControls\n{\n\n   public static void main(String[] args)\n   {\n   \n      new KeyboardControls();\n   \n   }\n \n   public KeyboardControls()\n   {\n   \n      final JFrame frame = makeBasicJFrame();\n   \n      final JPanel parentPanel = makeParentPanel();\n   \n      frame.add(parentPanel);\n   \n      frame.setVisible(true);\n   \n   }\n \n   private JFrame makeBasicJFrame()\n   {\n   \n      final JFrame frame = new JFrame();\n   \n      frame.setSize(500, 500);\n      frame.setLocationByPlatform(true);\n      frame.setTitle(&quot;Keyboard Controls&quot;);\n      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n   \n      return frame;\n   \n   }\n \n   private JPanel makeParentPanel()\n   {\n   \n      final JPanel parentPanel = new JPanel();\n      parentPanel.setLayout(new BorderLayout());\n   \n      final CardLayout cardLayout = new CardLayout();\n   \n      final JPanel cardLayoutPanel = makeCardLayoutPanel(cardLayout);\n   \n      final Action nextAction =\n               new AbstractAction()\n               {\n               \n                  public void actionPerformed(final ActionEvent event)\n                  {\n                  \n                     cardLayout.next(cardLayoutPanel);\n                  \n                  }\n               \n               };\n   \n      final JButton nextButton = makeNextButton(nextAction);\n   \n      parentPanel.add(cardLayoutPanel, BorderLayout.CENTER);\n      parentPanel.add(nextButton, BorderLayout.SOUTH);\n   \n      return parentPanel;\n   \n   }\n \n   private void addPageToGivenPanel(final JPanel givenPanel, final String pageName)\n   {\n   \n      final JPanel pagePanel = new JPanel();\n   \n      final JLabel pageLabel = new JLabel();\n      pageLabel.setText(pageName);\n   \n      pagePanel.add(pageLabel);\n   \n      givenPanel.add(pagePanel, pageName);\n   \n   }\n \n   private JPanel makeCardLayoutPanel(final CardLayout cardLayout)\n   {\n   \n      final JPanel cardLayoutPanel = new JPanel();\n   \n      cardLayoutPanel.setLayout(cardLayout);\n   \n      addPageToGivenPanel(cardLayoutPanel, &quot;PAGE_1&quot;);\n      addPageToGivenPanel(cardLayoutPanel, &quot;PAGE_2&quot;);\n      addPageToGivenPanel(cardLayoutPanel, &quot;PAGE_3&quot;);\n      addPageToGivenPanel(cardLayoutPanel, &quot;PAGE_4&quot;);\n      addPageToGivenPanel(cardLayoutPanel, &quot;PAGE_5&quot;);\n   \n      return cardLayoutPanel;\n   \n   }\n \n   private JButton makeNextButton(final Action nextAction)\n   {\n   \n      final JButton nextButton = new JButton();\n      nextButton.setAction(nextAction);\n   \n      final String buttonText = &quot;NEXT -- Press Alt-V on your keyboard&quot;;\n   \n      nextAction.putValue(Action.NAME, buttonText);\n      nextAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_V);\n   \n      return nextButton;\n   \n   }\n \n}\n</code></pre>\n"}],"owner":{"account_id":14866375,"reputation":465,"user_id":10735351,"display_name":"Graham Meehan"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76069389,"answer_count":1,"score":-1,"last_activity_date":1682265464,"creation_date":1682005884,"question_id":76066029,"body_markdown":"I have a keyboard shortcut in my Java Swing application to save some inputs to a server and go to the next screen if the user presses Alt+V. The action is tied to a JButton, which can alternatively be clicked to save/proceed. \r\n\r\nI found that when Alt+V was held down, it triggered the action multiple times instead of just once, using the following code:\r\n\r\n    proceedBttn.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)\r\n                .put(KeyStroke.getKeyStroke(KeyEvent.VK_V, InputEvent.ALT_DOWN_MASK), &quot;proceedBtn&quot;);\r\n\r\nMy thought was to fix with the following, which instead only triggers the action on release of the keyboard shortcut:\r\n\r\n    proceedBttn().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)\r\n                .put(KeyStroke.getKeyStroke(KeyEvent.VK_V, InputEvent.ALT_DOWN_MASK, true), &quot;proceedBtn&quot;);\r\n\r\nHowever, the above code only triggers if the user is still holding Alt when they let go of V. When a user types Alt+V quickly, it&#39;s common that they let go of Alt prior to V (or at the same time), which causes the action not to trigger at all.\r\n\r\nIs there a good Java-native option to handle this problem, rather than some potentially complex latch logic on every shortcut in my application?\r\n\r\n\r\n\r\n","title":"How to make Alt+V only process one time when held down then released?","body":"<p>I have a keyboard shortcut in my Java Swing application to save some inputs to a server and go to the next screen if the user presses Alt+V. The action is tied to a JButton, which can alternatively be clicked to save/proceed.</p>\n<p>I found that when Alt+V was held down, it triggered the action multiple times instead of just once, using the following code:</p>\n<pre><code>proceedBttn.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)\n            .put(KeyStroke.getKeyStroke(KeyEvent.VK_V, InputEvent.ALT_DOWN_MASK), &quot;proceedBtn&quot;);\n</code></pre>\n<p>My thought was to fix with the following, which instead only triggers the action on release of the keyboard shortcut:</p>\n<pre><code>proceedBttn().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)\n            .put(KeyStroke.getKeyStroke(KeyEvent.VK_V, InputEvent.ALT_DOWN_MASK, true), &quot;proceedBtn&quot;);\n</code></pre>\n<p>However, the above code only triggers if the user is still holding Alt when they let go of V. When a user types Alt+V quickly, it's common that they let go of Alt prior to V (or at the same time), which causes the action not to trigger at all.</p>\n<p>Is there a good Java-native option to handle this problem, rather than some potentially complex latch logic on every shortcut in my application?</p>\n"},{"tags":["java","assert","assertion"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682265231,"post_id":76069995,"comment_id":134184459,"body_markdown":"Note that the `assert` statement is not meant to write tests, but to write inline assertions to check invariants of your code. If you want to write assertions in tests, you should use the appropriate assertion methods from your test framework.","body":"Note that the <code>assert</code> statement is not meant to write tests, but to write inline assertions to check invariants of your code. If you want to write assertions in tests, you should use the appropriate assertion methods from your test framework."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682053341,"creation_date":1682053341,"answer_id":76070034,"question_id":76069995,"body_markdown":"You are modifying the instance field `currentSaving` in the method, so calling `getWorkingMonth()` a second time will return `0`.\r\n\r\nAvoid doing this if you want consistent results. You could use a local variable instead.\r\n\r\n```java\r\npublic int getWorkingMonth() {\r\n    double Saving = monthlySaving * (annualSalary / 12);\r\n    int months = 0;\r\n    double curr = currentSaving;\r\n    while (curr &lt; pensionTarget) {\r\n        curr += Saving + (curr * (interestRate / 12));\r\n        months++;\r\n    }\r\n    return months;\r\n}\r\n```","title":"Function returns correct value when printed but fails assertion","body":"<p>You are modifying the instance field <code>currentSaving</code> in the method, so calling <code>getWorkingMonth()</code> a second time will return <code>0</code>.</p>\n<p>Avoid doing this if you want consistent results. You could use a local variable instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int getWorkingMonth() {\n    double Saving = monthlySaving * (annualSalary / 12);\n    int months = 0;\n    double curr = currentSaving;\n    while (curr &lt; pensionTarget) {\n        curr += Saving + (curr * (interestRate / 12));\n        months++;\n    }\n    return months;\n}\n</code></pre>\n"}],"owner":{"account_id":10656065,"reputation":3,"user_id":7845586,"display_name":"Vikraman Arumugam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76070034,"answer_count":1,"score":-1,"last_activity_date":1682265163,"creation_date":1682052726,"question_id":76069995,"body_markdown":"I need to write a code for a pension plan.\r\n\r\nThe main function is such\r\n \r\n```\r\ndouble pensionTarget = 240000;\r\ndouble currentSaving = 0;\r\ndouble annualSalary = 40000;\r\ndouble monthlySaving = 0.1;\r\ndouble interestRate = 0.04;\r\n\r\nPensionPlanner fp = new PensionPlanner(pensionTarget, currentSaving,\r\n        annualSalary, monthlySaving, interestRate);\r\n\r\nSystem.out.println(&quot;Example: Test case 1 working months: &quot; + fp.getWorkingMonth());\r\nassert fp.getWorkingMonth() == 368: &quot;Failed test case 1: Expected working months to be 368, but got &quot; + fp.getWorkingMonth();\r\n```\r\nThe getWorkingMonth() function in the PensionPlanner class is as such\r\n\r\n\r\n```\r\npublic int getWorkingMonth() {\r\n    double Saving = monthlySaving * (annualSalary / 12);\r\n    int months = 0;\r\n\r\n    while (currentSaving &lt; pensionTarget) {\r\n        currentSaving += Saving + (currentSaving * (interestRate / 12));\r\n        months++;\r\n    }\r\n\r\n    return months;\r\n}\r\n```\r\nI keep failing the assertion test.\r\n\r\nI have debugged the code and made sure the values are calculated correctly. In the main function this line, does give the expected number of months,\r\n\r\n```\r\nSystem.out.println(&quot;Example: Test case 1 working months: &quot; + fp.getWorkingMonth());\r\n```\r\nBut it fails the assertion and the function getWorkingMonth() returns a value of 0 in this line\r\n\r\n```\r\nassert fp.getWorkingMonth() == 368: &quot;Failed test case 1: Expected working months to be 368, but got &quot; + fp.getWorkingMonth();\r\n```\r\nI don&#39;t know what I&#39;m doing wrong, and would appreciate any help.","title":"Function returns correct value when printed but fails assertion","body":"<p>I need to write a code for a pension plan.</p>\n<p>The main function is such</p>\n<pre><code>double pensionTarget = 240000;\ndouble currentSaving = 0;\ndouble annualSalary = 40000;\ndouble monthlySaving = 0.1;\ndouble interestRate = 0.04;\n\nPensionPlanner fp = new PensionPlanner(pensionTarget, currentSaving,\n        annualSalary, monthlySaving, interestRate);\n\nSystem.out.println(&quot;Example: Test case 1 working months: &quot; + fp.getWorkingMonth());\nassert fp.getWorkingMonth() == 368: &quot;Failed test case 1: Expected working months to be 368, but got &quot; + fp.getWorkingMonth();\n</code></pre>\n<p>The getWorkingMonth() function in the PensionPlanner class is as such</p>\n<pre><code>public int getWorkingMonth() {\n    double Saving = monthlySaving * (annualSalary / 12);\n    int months = 0;\n\n    while (currentSaving &lt; pensionTarget) {\n        currentSaving += Saving + (currentSaving * (interestRate / 12));\n        months++;\n    }\n\n    return months;\n}\n</code></pre>\n<p>I keep failing the assertion test.</p>\n<p>I have debugged the code and made sure the values are calculated correctly. In the main function this line, does give the expected number of months,</p>\n<pre><code>System.out.println(&quot;Example: Test case 1 working months: &quot; + fp.getWorkingMonth());\n</code></pre>\n<p>But it fails the assertion and the function getWorkingMonth() returns a value of 0 in this line</p>\n<pre><code>assert fp.getWorkingMonth() == 368: &quot;Failed test case 1: Expected working months to be 368, but got &quot; + fp.getWorkingMonth();\n</code></pre>\n<p>I don't know what I'm doing wrong, and would appreciate any help.</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":3,"creation_date":1682126825,"post_id":76077584,"comment_id":134171391,"body_markdown":"Your loop re-assigns the `ss` variable each time through, blowing away all of your work from the previous call. Don&#39;t do that.","body":"Your loop re-assigns the <code>ss</code> variable each time through, blowing away all of your work from the previous call. Don&#39;t do that."},{"owner":{"account_id":26254848,"reputation":21,"user_id":19927038,"display_name":"xercase"},"score":0,"creation_date":1682131655,"post_id":76077584,"comment_id":134171656,"body_markdown":"Thanks for pointing that out! It makes sense now why I kept getting nothing. I removed that statement and initialized ss in the constructor instead and that did the trick.","body":"Thanks for pointing that out! It makes sense now why I kept getting nothing. I removed that statement and initialized ss in the constructor instead and that did the trick."}],"owner":{"account_id":26254848,"reputation":21,"user_id":19927038,"display_name":"xercase"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682264999,"creation_date":1682126448,"question_id":76077584,"body_markdown":"My task is to print out the list of files in the current directory.\r\nHere is my current code:\r\n\r\n```\r\nclass StringSet {\r\n    private String[] ss;\r\n\r\n    File currentDirectory = new File(&quot;.&quot;);\r\n    File[] dirFiles = currentDirectory.listFiles();\r\n\r\n    public StringSet() {\r\n        StringToFile(0, dirFiles.length);\r\n       \r\n\r\n    }\r\n\r\n    public void StringToFile(int start, int end) {\r\n        /*ss = new String[dirFiles.length];\r\n        for (int i = 0; i &lt; dirFiles.length; i++) {\r\n            if (dirFiles[i].isFile())\r\n                ss[i] = dirFiles[i].getPath();\r\n        }\r\n    }*/\r\n        ss = new String[dirFiles.length];\r\n        if (start == end)\r\n            return;\r\n\r\n        if (dirFiles[start].isFile())\r\n            ss[start] = dirFiles[start].getPath();\r\n\r\n        StringToFile(start + 1, end);\r\n    }\r\n\r\n    public String toString() {\r\n        String s=&quot;&quot;;\r\n        for (int i=0; i&lt;ss.length; i++)\r\n            if (ss[i]!=null)\r\n                s+=ss[i]+&quot;\\n&quot;;\r\n        if (s.length()&gt;0)\r\n            s = s.substring(0,s.length()-1);\r\n        return s;\r\n    }\r\n```\r\n\r\n\r\nThe `for` loop that I commented here, produces the desired result of assigning the current directory&#39;s pathnames to `ss[i]`. The `toString()` method works off of that and produces all of the filenames. The uncommented code depicts the recursive approach, however it does not seem to be assigning the pathnames to `ss` like the `for` loop does, unless I specifically add a `println()` in the method, which isn&#39;t what I want. It produces nothing. How would I make it achieve the same effect as the for loop?","title":"How to initialize the state of a class using recursion","body":"<p>My task is to print out the list of files in the current directory.\nHere is my current code:</p>\n<pre><code>class StringSet {\n    private String[] ss;\n\n    File currentDirectory = new File(&quot;.&quot;);\n    File[] dirFiles = currentDirectory.listFiles();\n\n    public StringSet() {\n        StringToFile(0, dirFiles.length);\n       \n\n    }\n\n    public void StringToFile(int start, int end) {\n        /*ss = new String[dirFiles.length];\n        for (int i = 0; i &lt; dirFiles.length; i++) {\n            if (dirFiles[i].isFile())\n                ss[i] = dirFiles[i].getPath();\n        }\n    }*/\n        ss = new String[dirFiles.length];\n        if (start == end)\n            return;\n\n        if (dirFiles[start].isFile())\n            ss[start] = dirFiles[start].getPath();\n\n        StringToFile(start + 1, end);\n    }\n\n    public String toString() {\n        String s=&quot;&quot;;\n        for (int i=0; i&lt;ss.length; i++)\n            if (ss[i]!=null)\n                s+=ss[i]+&quot;\\n&quot;;\n        if (s.length()&gt;0)\n            s = s.substring(0,s.length()-1);\n        return s;\n    }\n</code></pre>\n<p>The <code>for</code> loop that I commented here, produces the desired result of assigning the current directory's pathnames to <code>ss[i]</code>. The <code>toString()</code> method works off of that and produces all of the filenames. The uncommented code depicts the recursive approach, however it does not seem to be assigning the pathnames to <code>ss</code> like the <code>for</code> loop does, unless I specifically add a <code>println()</code> in the method, which isn't what I want. It produces nothing. How would I make it achieve the same effect as the for loop?</p>\n"},{"tags":["java","mysql"],"comments":[{"owner":{"account_id":4996428,"reputation":362,"user_id":4016860,"accept_rate":75,"display_name":"Popeye"},"score":0,"creation_date":1682257050,"post_id":76085109,"comment_id":134183280,"body_markdown":"Well, you can check the number of connections in mysqldb.","body":"Well, you can check the number of connections in mysqldb."}],"answers":[{"tags":[],"owner":{"account_id":26268359,"reputation":46,"user_id":19938590,"display_name":"sachinM"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682257311,"creation_date":1682257311,"answer_id":76085201,"question_id":76085109,"body_markdown":"Seems like a logical issue in the loginUsersIntoStore() method. The loginUsersIntoStore() method is recursively calling itself in the found block, which can lead to an infinite loop and may cause the program to crash. The pStatement.executeQuery() method is being called twice in the found block, which may not be necessary. To fix this issue you should remove the recursive call to loginUsersIntoStore() in the found block and only call pStatement.executeQuery() once.  \r\n  \r\n\r\n\r\n\r\n    public void loginUsersIntoStore(User user) \r\n    throws SQLException { \r\n    connection = DriverManager.getConnection(JDBC_URL, USER, PASSWORD);\r\n    String sql = &quot;SELECT id FROM users WHERE username=? AND password=?&quot;;\r\n    pStatement = connection.prepareStatement(sql);\r\n    pStatement.setString(1, user.getUsername());\r\n    pStatement.setString(2, user.getPassword());\r\n    ResultSet resultSet = pStatement.executeQuery();\r\n    boolean found = false;\r\n\r\n    if (resultSet.next()) {\r\n        int id = resultSet.getInt(&quot;ID&quot;);\r\n        if (id != 0) {\r\n            found = true;\r\n        }\r\n    }\r\n\r\n    if (found) {\r\n        System.out.println(&quot;Login was successful!&quot;);\r\n    } else {\r\n        System.out.println(&quot;Invalid login credentials&quot;);\r\n    }\r\n    pStatement.close();\r\n    connection.close();\r\n    }    \r\n\r\n\r\n\r\n\r\ncheck that the credentials entered by the user in the login() method are being passed correctly to the loginUsersIntoStore() method.","title":"How to resolve the error too many connections?","body":"<p>Seems like a logical issue in the loginUsersIntoStore() method. The loginUsersIntoStore() method is recursively calling itself in the found block, which can lead to an infinite loop and may cause the program to crash. The pStatement.executeQuery() method is being called twice in the found block, which may not be necessary. To fix this issue you should remove the recursive call to loginUsersIntoStore() in the found block and only call pStatement.executeQuery() once.</p>\n<pre><code>public void loginUsersIntoStore(User user) \nthrows SQLException { \nconnection = DriverManager.getConnection(JDBC_URL, USER, PASSWORD);\nString sql = &quot;SELECT id FROM users WHERE username=? AND password=?&quot;;\npStatement = connection.prepareStatement(sql);\npStatement.setString(1, user.getUsername());\npStatement.setString(2, user.getPassword());\nResultSet resultSet = pStatement.executeQuery();\nboolean found = false;\n\nif (resultSet.next()) {\n    int id = resultSet.getInt(&quot;ID&quot;);\n    if (id != 0) {\n        found = true;\n    }\n}\n\nif (found) {\n    System.out.println(&quot;Login was successful!&quot;);\n} else {\n    System.out.println(&quot;Invalid login credentials&quot;);\n}\npStatement.close();\nconnection.close();\n}    \n</code></pre>\n<p>check that the credentials entered by the user in the login() method are being passed correctly to the loginUsersIntoStore() method.</p>\n"}],"owner":{"account_id":26768049,"reputation":7,"user_id":20364883,"display_name":"Raduci"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682264816,"accepted_answer_id":76085201,"answer_count":1,"score":0,"last_activity_date":1682264923,"creation_date":1682256269,"question_id":76085109,"body_markdown":"This code is part of DBConnector class:\r\n```\r\npublic void loginUsersIntoStore(User user) throws SQLException{\r\n    connection = DriverManager.getConnection(JDBC_URL, USER, PASSWORD);\r\n    String sql = &quot;SELECT id FROM users WHERE username=? AND password=?&quot;;\r\n    pStatement = connection.prepareStatement(sql);\r\n    pStatement.setString(1, user.getUsername());\r\n    pStatement.setString(2, user.getPassword());\r\n\r\n    ResultSet resultSet = pStatement.executeQuery();\r\n    boolean found = false;\r\n\r\n    if(resultSet.next()) {\r\n        int id = resultSet.getInt(&quot;ID&quot;);\r\n        if (id != 0) {\r\n            found = true;\r\n        }\r\n    }\r\n\r\n    if(found){\r\n        loginUsersIntoStore(user);\r\n        pStatement.executeQuery();\r\n        pStatement.close();\r\n        connection.close();\r\n    }\r\n    if(!found){\r\n        System.out.println(&quot;Invalid login credentials&quot;);\r\n    }\r\n}\r\n```\r\n\r\n\r\nThis part of code is where I call the method in Main.\r\n```\r\nprivate static void login(UserManager userManager, Scanner input) throws SQLException {\r\n    System.out.print(&quot;Enter username: &quot;);\r\n    String userName = input.next();\r\n\r\n    System.out.print(&quot;Enter password: &quot;);\r\n    String password = input.next();\r\n\r\n    User user = new User(userName, password);\r\n    boolean isAuthenticated = userManager.authenticate(user);\r\n\r\n    if (isAuthenticated) {\r\n        DBConnector.getInstance().loginUsersIntoStore(user);\r\n        System.out.println(&quot;Login was successful!&quot;);\r\n\r\n    } else {\r\n        System.out.println(&quot;Invalid username or passwordl!&quot;);\r\n    }\r\n}\r\n```\r\n\r\n\r\nI am trying to make an online store (console application), the product part works fine (where I add products to the database and then display them). When it comes to users part, it saves the users in the database, but I cannot login from there. If I close the app and run it again, and I try to login with users that exist in the database, it prints _&quot;Invalid username or password&quot;_.\r\n\r\nFirst, I forgot to close the connection and the statement. After I closed, nothing changes.\r\n","title":"How to resolve the error too many connections?","body":"<p>This code is part of DBConnector class:</p>\n<pre><code>public void loginUsersIntoStore(User user) throws SQLException{\n    connection = DriverManager.getConnection(JDBC_URL, USER, PASSWORD);\n    String sql = &quot;SELECT id FROM users WHERE username=? AND password=?&quot;;\n    pStatement = connection.prepareStatement(sql);\n    pStatement.setString(1, user.getUsername());\n    pStatement.setString(2, user.getPassword());\n\n    ResultSet resultSet = pStatement.executeQuery();\n    boolean found = false;\n\n    if(resultSet.next()) {\n        int id = resultSet.getInt(&quot;ID&quot;);\n        if (id != 0) {\n            found = true;\n        }\n    }\n\n    if(found){\n        loginUsersIntoStore(user);\n        pStatement.executeQuery();\n        pStatement.close();\n        connection.close();\n    }\n    if(!found){\n        System.out.println(&quot;Invalid login credentials&quot;);\n    }\n}\n</code></pre>\n<p>This part of code is where I call the method in Main.</p>\n<pre><code>private static void login(UserManager userManager, Scanner input) throws SQLException {\n    System.out.print(&quot;Enter username: &quot;);\n    String userName = input.next();\n\n    System.out.print(&quot;Enter password: &quot;);\n    String password = input.next();\n\n    User user = new User(userName, password);\n    boolean isAuthenticated = userManager.authenticate(user);\n\n    if (isAuthenticated) {\n        DBConnector.getInstance().loginUsersIntoStore(user);\n        System.out.println(&quot;Login was successful!&quot;);\n\n    } else {\n        System.out.println(&quot;Invalid username or passwordl!&quot;);\n    }\n}\n</code></pre>\n<p>I am trying to make an online store (console application), the product part works fine (where I add products to the database and then display them). When it comes to users part, it saves the users in the database, but I cannot login from there. If I close the app and run it again, and I try to login with users that exist in the database, it prints <em>&quot;Invalid username or password&quot;</em>.</p>\n<p>First, I forgot to close the connection and the statement. After I closed, nothing changes.</p>\n"},{"tags":["java","java-8"],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682150506,"creation_date":1682150506,"answer_id":76078600,"question_id":76078576,"body_markdown":"You could use `Stream#map` to create the new `List` of DTOs from the `data` list, but there&#39;s not much that can be done to simplify the creation of the `EcomDto` objects.\r\n\r\n```java\r\nvar response = data.stream().map(obj -&gt; {\r\n\tEcomDto dto = new EcomDto();\r\n\tif (obj[0] != null) dto.setZeroIndexData((String) obj[0]);\r\n\tif (obj[1] != null) dto.setFirstIndexData((Long) obj[1]);\r\n    if (obj[2] != null) dto.setSecondIndexData((UserDefinedEnum) obj[2]);\r\n    return dto;\r\n}).toList();\r\n```","title":"Convert List&lt;Object[]&gt; to a user defined List objects List&lt;EcomDto&gt; in java 8","body":"<p>You could use <code>Stream#map</code> to create the new <code>List</code> of DTOs from the <code>data</code> list, but there's not much that can be done to simplify the creation of the <code>EcomDto</code> objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var response = data.stream().map(obj -&gt; {\n    EcomDto dto = new EcomDto();\n    if (obj[0] != null) dto.setZeroIndexData((String) obj[0]);\n    if (obj[1] != null) dto.setFirstIndexData((Long) obj[1]);\n    if (obj[2] != null) dto.setSecondIndexData((UserDefinedEnum) obj[2]);\n    return dto;\n}).toList();\n</code></pre>\n"}],"owner":{"account_id":28377917,"reputation":23,"user_id":21705670,"display_name":"tkz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76078600,"answer_count":1,"score":2,"last_activity_date":1682264886,"creation_date":1682149975,"question_id":76078576,"body_markdown":"I have List&lt;Object[]&gt; data in which object array length is 7 and data of array are combination of different types. (i.e. string, date, enum and long)\r\n\r\nI have one DTO class (EcomDto.java) in which I want to set data which I read from above object[].\r\nI am doing it by using if else statement like:\r\n\r\n    List&lt;Object[]&gt; data=getActualData();//\r\n    List&lt;EcomDto&gt; response=new ArrayList&lt;&gt;();\r\n    EcomDto dto=null;\r\n    for(Object[] obj:data){\r\n     dto=new EcomDto();\r\n     if(obj[0]!=null){\r\n     dto.setZeroIndexData((String)obj[0]);\r\n    }\r\n    if(obj[1]!=null){\r\n     dto.setFirstIndexData((Long)obj[1]);\r\n    }\r\n    if(obj[2]!=null){\r\n     dto.setSecondIndexData((UserDefinedEnum)obj[2]);\r\n    }\r\n    }\r\n\r\n\r\nCan this be improved in some way?\r\n\r\nTried to do in stream way, but I am not much familiar with Java streams","title":"Convert List&lt;Object[]&gt; to a user defined List objects List&lt;EcomDto&gt; in java 8","body":"<p>I have List&lt;Object[]&gt; data in which object array length is 7 and data of array are combination of different types. (i.e. string, date, enum and long)</p>\n<p>I have one DTO class (EcomDto.java) in which I want to set data which I read from above object[].\nI am doing it by using if else statement like:</p>\n<pre><code>List&lt;Object[]&gt; data=getActualData();//\nList&lt;EcomDto&gt; response=new ArrayList&lt;&gt;();\nEcomDto dto=null;\nfor(Object[] obj:data){\n dto=new EcomDto();\n if(obj[0]!=null){\n dto.setZeroIndexData((String)obj[0]);\n}\nif(obj[1]!=null){\n dto.setFirstIndexData((Long)obj[1]);\n}\nif(obj[2]!=null){\n dto.setSecondIndexData((UserDefinedEnum)obj[2]);\n}\n}\n</code></pre>\n<p>Can this be improved in some way?</p>\n<p>Tried to do in stream way, but I am not much familiar with Java streams</p>\n"},{"tags":["java","video","xuggler"],"answers":[{"tags":[],"owner":{"account_id":190177,"reputation":10331,"user_id":429972,"accept_rate":67,"display_name":"jontro"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1322681777,"creation_date":1322681777,"answer_id":8331835,"question_id":8327847,"body_markdown":"Xuggler is complaining that it cannot find a converter for the BufferedImage.\r\n\r\nCreate the BufferedImage with `BufferedImage.TYPE_3BYTE_BGR` instead of `BufferedImage.TYPE_INT_RGB`\r\n\r\nSee http://wiki.xuggle.com/Encoding_Video_from_a_sequence_of_Images for more information","title":"Can&#39;t encode video with Xuggler","body":"<p>Xuggler is complaining that it cannot find a converter for the BufferedImage.</p>\n\n<p>Create the BufferedImage with <code>BufferedImage.TYPE_3BYTE_BGR</code> instead of <code>BufferedImage.TYPE_INT_RGB</code></p>\n\n<p>See <a href=\"http://wiki.xuggle.com/Encoding_Video_from_a_sequence_of_Images\" rel=\"noreferrer\">http://wiki.xuggle.com/Encoding_Video_from_a_sequence_of_Images</a> for more information</p>\n"}],"owner":{"account_id":329794,"reputation":5980,"user_id":653511,"accept_rate":86,"display_name":"stemm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4314,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":8331835,"answer_count":1,"score":4,"last_activity_date":1682264845,"creation_date":1322664858,"question_id":8327847,"body_markdown":"I&#39;m trying to create simple application with Xuggler, which has to encode sequence of pictures into video.\r\nI&#39;ve installed xuggler, as described in official site.\r\nHere is example of code (which I&#39;ve actually found on Xuggler wiki site)\r\n\r\n    import java.awt.Color;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.image.BufferedImage;\r\n            \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n            \r\n    import com.xuggle.mediatool.IMediaViewer;\r\n    import com.xuggle.mediatool.IMediaWriter;\r\n    import com.xuggle.mediatool.ToolFactory;\r\n    import com.xuggle.xuggler.ICodec;\r\n            \r\n    import static com.xuggle.xuggler.Global.DEFAULT_TIME_UNIT;\r\n    import static java.util.concurrent.TimeUnit.SECONDS;\r\n    import static java.util.concurrent.TimeUnit.MILLISECONDS;\r\n        \r\n        \r\n    public class Test {\r\n        \r\n        private static final Logger log = LoggerFactory.getLogger(Test.class);\r\n        {\r\n        \tlog.trace(&quot;&lt;init&gt;&quot;);\r\n        }\r\n        \t\r\n        public static void main(String[] args) {\r\n        \r\n        \tfinal long duration = DEFAULT_TIME_UNIT.convert( 3, SECONDS );\r\n        \t\t\r\n        \tfinal int videoStreamIndex = 0;\r\n        \tfinal int videoStreamId = 0;\r\n        \tfinal long frameRate = DEFAULT_TIME_UNIT.convert(15, MILLISECONDS);\r\n        \tfinal int width = 320;\r\n        \tfinal int height = 200;\r\n        \t    \r\n        \tlong nextFrameTime = 0;\r\n        \t    \r\n        \tfinal IMediaWriter writer = ToolFactory.makeWriter(&quot;/out.mov&quot;);\r\n        \t\t\r\n        \twriter.addVideoStream(videoStreamIndex, videoStreamId, \r\n        \t\t\t      width, height);\r\n        \t    \r\n        \twhile ( nextFrameTime &lt; duration )\r\n        \t    {\r\n        \t    \tBufferedImage frame = new BufferedImage( 320, 200, BufferedImage.TYPE_INT_RGB );\r\n        \t    \tGraphics2D gr = (Graphics2D) frame.getGraphics();\r\n        \t    \tgr.setColor(Color.RED);\r\n        \t    \tgr.drawLine(0, 0, 200, 200);\r\n        \t    \twriter.encodeVideo(videoStreamIndex, frame, nextFrameTime, \r\n        \t\t\t\t   DEFAULT_TIME_UNIT);\r\n        \t    \tnextFrameTime += frameRate;\r\n        \t    }\r\n        \t    \r\n        \twriter.close();\r\n        \t    \r\n        }\r\n        \r\n    }\r\n\r\nAfter launching, I&#39;ve got exception:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException: No converter &quot;null&quot; found.\r\n    \tat com.xuggle.xuggler.video.ConverterFactory.createConverter(ConverterFactory.java:313)\r\n    \tat com.xuggle.mediatool.MediaWriter.convertToPicture(MediaWriter.java:967)\r\n    \tat com.xuggle.mediatool.MediaWriter.encodeVideo(MediaWriter.java:812)\r\n    \tat Test.main(Test.java:48)\r\n\r\n\r\nCould you advise me something to solve this problem?\r\nThanks","title":"Can&#39;t encode video with Xuggler","body":"<p>I'm trying to create simple application with Xuggler, which has to encode sequence of pictures into video.\nI've installed xuggler, as described in official site.\nHere is example of code (which I've actually found on Xuggler wiki site)</p>\n\n<pre><code>import java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport com.xuggle.mediatool.IMediaViewer;\nimport com.xuggle.mediatool.IMediaWriter;\nimport com.xuggle.mediatool.ToolFactory;\nimport com.xuggle.xuggler.ICodec;\n\nimport static com.xuggle.xuggler.Global.DEFAULT_TIME_UNIT;\nimport static java.util.concurrent.TimeUnit.SECONDS;\nimport static java.util.concurrent.TimeUnit.MILLISECONDS;\n\n\npublic class Test {\n\n    private static final Logger log = LoggerFactory.getLogger(Test.class);\n    {\n        log.trace(\"&lt;init&gt;\");\n    }\n\n    public static void main(String[] args) {\n\n        final long duration = DEFAULT_TIME_UNIT.convert( 3, SECONDS );\n\n        final int videoStreamIndex = 0;\n        final int videoStreamId = 0;\n        final long frameRate = DEFAULT_TIME_UNIT.convert(15, MILLISECONDS);\n        final int width = 320;\n        final int height = 200;\n\n        long nextFrameTime = 0;\n\n        final IMediaWriter writer = ToolFactory.makeWriter(\"/out.mov\");\n\n        writer.addVideoStream(videoStreamIndex, videoStreamId, \n                      width, height);\n\n        while ( nextFrameTime &lt; duration )\n            {\n                BufferedImage frame = new BufferedImage( 320, 200, BufferedImage.TYPE_INT_RGB );\n                Graphics2D gr = (Graphics2D) frame.getGraphics();\n                gr.setColor(Color.RED);\n                gr.drawLine(0, 0, 200, 200);\n                writer.encodeVideo(videoStreamIndex, frame, nextFrameTime, \n                       DEFAULT_TIME_UNIT);\n                nextFrameTime += frameRate;\n            }\n\n        writer.close();\n\n    }\n\n}\n</code></pre>\n\n<p>After launching, I've got exception:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsupportedOperationException: No converter \"null\" found.\n    at com.xuggle.xuggler.video.ConverterFactory.createConverter(ConverterFactory.java:313)\n    at com.xuggle.mediatool.MediaWriter.convertToPicture(MediaWriter.java:967)\n    at com.xuggle.mediatool.MediaWriter.encodeVideo(MediaWriter.java:812)\n    at Test.main(Test.java:48)\n</code></pre>\n\n<p>Could you advise me something to solve this problem?\nThanks</p>\n"},{"tags":["java","spring-mvc"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":1,"creation_date":1682264770,"post_id":76085786,"comment_id":134184377,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551) Instead, edit your question to include the code as properly formatted text.","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Instead, edit your question to include the code as properly formatted text."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682265790,"post_id":76085786,"comment_id":134184557,"body_markdown":"You cannot use Spring 5 or earlier with Tomcat 10. If you want to use Tomcat 10, you have to use Spring 6. If you want to use older Spring versions, you have to use Tomcat 9 or even earlier (Spring 3 is ancient, and you really shouldn&#39;t be using it these days).","body":"You cannot use Spring 5 or earlier with Tomcat 10. If you want to use Tomcat 10, you have to use Spring 6. If you want to use older Spring versions, you have to use Tomcat 9 or even earlier (Spring 3 is ancient, and you really shouldn&#39;t be using it these days)."}],"owner":{"account_id":22980869,"reputation":33,"user_id":17107814,"display_name":"do hai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682264488,"creation_date":1682264488,"question_id":76085786,"body_markdown":"I am using maven : spring webmvc version 6.0.4 .But when I use a bean :\r\n&quot;&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;/&gt;&quot;. to upload the file, it gives an error.\r\nbut when I remove version 6.0.4 instead version : &quot;spring-webmvc-3.2.2.RELEASE&quot; it gives no error. but my website is not working.\r\n\r\n\r\n\r\n\r\nthis is the error when I add the bean to &quot;webmvc version 6.0.4&quot;:\r\nthis is my file xml:\r\n[![enter image description here](https://i.stack.imgur.com/P2lOk.png)](https://i.stack.imgur.com/P2lOk.png)\r\nthis is my servlet.xml:\r\n[![enter image description here](https://i.stack.imgur.com/WkRSe.png)](https://i.stack.imgur.com/WkRSe.png)\r\n\r\nthis is when i remove &quot;webmvc version 6.0.4&quot; and add &quot;spring-webmvc-3.2.2.RELEASE&quot; version:\r\nthis is my file xml:\r\n[![enter image description here](https://i.stack.imgur.com/2N0nf.png)](https://i.stack.imgur.com/2N0nf.png)\r\nAfter adding, the bean file does not report any more errors:\r\n[![enter image description here](https://i.stack.imgur.com/jo4Z5.png)](https://i.stack.imgur.com/jo4Z5.png)\r\nbut the website is not working anymore:\r\n[![enter image description here](https://i.stack.imgur.com/lU9Pb.png)](https://i.stack.imgur.com/lU9Pb.png)\r\n","title":"why the maven spring web MVC error version","body":"<p>I am using maven : spring webmvc version 6.0.4 .But when I use a bean :\n&quot;&quot;. to upload the file, it gives an error.\nbut when I remove version 6.0.4 instead version : &quot;spring-webmvc-3.2.2.RELEASE&quot; it gives no error. but my website is not working.</p>\n<p>this is the error when I add the bean to &quot;webmvc version 6.0.4&quot;:\nthis is my file xml:\n<a href=\"https://i.stack.imgur.com/P2lOk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P2lOk.png\" alt=\"enter image description here\" /></a>\nthis is my servlet.xml:\n<a href=\"https://i.stack.imgur.com/WkRSe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WkRSe.png\" alt=\"enter image description here\" /></a></p>\n<p>this is when i remove &quot;webmvc version 6.0.4&quot; and add &quot;spring-webmvc-3.2.2.RELEASE&quot; version:\nthis is my file xml:\n<a href=\"https://i.stack.imgur.com/2N0nf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2N0nf.png\" alt=\"enter image description here\" /></a>\nAfter adding, the bean file does not report any more errors:\n<a href=\"https://i.stack.imgur.com/jo4Z5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jo4Z5.png\" alt=\"enter image description here\" /></a>\nbut the website is not working anymore:\n<a href=\"https://i.stack.imgur.com/lU9Pb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lU9Pb.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jersey","grizzly","hk2"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1627080147,"post_id":68499168,"comment_id":121070280,"body_markdown":"_&quot; After beeing stuck in dependency-hell for a while&quot;_ - I highly suggest you use/learn a dependency manager like Maven. Nobody is going to be able to test out your problem unless they download all the jars you are using. And I doubt anybody is going to do that. It would be easier if you just had a list of Maven dependencies. Not for just others, but using Maven will definitely make your life a lot easier. I&#39;ve never seen the problem you are facing, but I wouldn&#39;t doubt that it might have something to do with a dependency problem.","body":"<i>&quot; After beeing stuck in dependency-hell for a while&quot;</i> - I highly suggest you use/learn a dependency manager like Maven. Nobody is going to be able to test out your problem unless they download all the jars you are using. And I doubt anybody is going to do that. It would be easier if you just had a list of Maven dependencies. Not for just others, but using Maven will definitely make your life a lot easier. I&#39;ve never seen the problem you are facing, but I wouldn&#39;t doubt that it might have something to do with a dependency problem."},{"owner":{"account_id":3372490,"reputation":445,"user_id":2831409,"accept_rate":29,"display_name":"MUmla"},"score":0,"creation_date":1627280505,"post_id":68499168,"comment_id":121103905,"body_markdown":"I definitely know that and generelly prefer Maven. Unfortunately the project must be realized for internal reasons without Maven...","body":"I definitely know that and generelly prefer Maven. Unfortunately the project must be realized for internal reasons without Maven..."}],"answers":[{"tags":[],"owner":{"account_id":17141018,"reputation":21,"user_id":12405036,"display_name":"Juan Bonastre"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682264075,"creation_date":1682264075,"answer_id":76085755,"question_id":68499168,"body_markdown":"Maybe this is not your solution, but for other people that run to the same problem. In my case, this was caused because of a conflict between libraries.\r\n\r\nI have a Dynamic Web Project using Tomcat 8.5 (with the javax libraries for jersey). I created another project, but for Tomcat 10. I copied all the files in the src folder, added the Tomcat 10 libraries (jakarta) and updated the imports from &quot;javax.ws.rs...&quot; to &quot;jakarta.ws.rs...&quot; but got that error.\r\n\r\nWhen cleaning the jar files in the lib folder, the problem disappeared.","title":"How to fix &quot;org.glassfish.jersey.inject.hk2.RequestContext.RequestContext must be in the Singleton scope&quot;","body":"<p>Maybe this is not your solution, but for other people that run to the same problem. In my case, this was caused because of a conflict between libraries.</p>\n<p>I have a Dynamic Web Project using Tomcat 8.5 (with the javax libraries for jersey). I created another project, but for Tomcat 10. I copied all the files in the src folder, added the Tomcat 10 libraries (jakarta) and updated the imports from &quot;javax.ws.rs...&quot; to &quot;jakarta.ws.rs...&quot; but got that error.</p>\n<p>When cleaning the jar files in the lib folder, the problem disappeared.</p>\n"}],"owner":{"account_id":3372490,"reputation":445,"user_id":2831409,"accept_rate":29,"display_name":"MUmla"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1709,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1682264075,"creation_date":1627043126,"question_id":68499168,"body_markdown":"I&#39;d like to implement a simple REST-API with Jersey and grizzly. After beeing stuck in dependency-hell for a while, I ended up with an exception and I have no idea how to handle/interpret:\r\n\r\n    java.lang.IllegalArgumentException: The implementation class org.glassfish.jersey.inject.hk2.RequestContext must be in the Singleton scope\r\n    \tat org.jvnet.hk2.internal.ServiceLocatorImpl.checkConfiguration(ServiceLocatorImpl.java:1713)\r\n    \tat org.jvnet.hk2.internal.ServiceLocatorImpl.addConfiguration(ServiceLocatorImpl.java:2108)\r\n    \tat org.jvnet.hk2.internal.DynamicConfigurationImpl.commit(DynamicConfigurationImpl.java:262)\r\n    \tat org.glassfish.hk2.utilities.ServiceLocatorUtilities.bind(ServiceLocatorUtilities.java:166)\r\n    \tat org.glassfish.jersey.inject.hk2.AbstractHk2InjectionManager.&lt;init&gt;(AbstractHk2InjectionManager.java:65)\r\n    \tat org.glassfish.jersey.inject.hk2.ImmediateHk2InjectionManager.&lt;init&gt;(ImmediateHk2InjectionManager.java:38)\r\n    \tat org.glassfish.jersey.inject.hk2.Hk2InjectionManagerFactory$Hk2InjectionManagerStrategy$1.createInjectionManager(Hk2InjectionManagerFactory.java:55)\r\n    \tat org.glassfish.jersey.inject.hk2.Hk2InjectionManagerFactory.create(Hk2InjectionManagerFactory.java:73)\r\n    \tat org.glassfish.jersey.internal.inject.Injections.createInjectionManager(Injections.java:69)\r\n    \tat org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:259)\r\n    \tat org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:246)\r\n    \tat org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpContainer.&lt;init&gt;(GrizzlyHttpContainer.java:310)\r\n    \tat org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpServerFactory.createHttpServer(GrizzlyHttpServerFactory.java:93)\r\n    \tat src.main.java.myApplication.main(myApplication.java:141)\r\n\r\nThe exception happens in my main-class on creating the http-server:\r\n\r\n    URI uri= URI.create(&quot;http://localhost:8080&quot;);\t\t\r\n    ResourceConfig config = new ResourceConfig();\r\n\tconfig.register(myAPI.class);\r\n\r\n\tHttpServer server = GrizzlyHttpServerFactory.createHttpServer(uri, config);\r\n\ttry{\r\n\t\tserver.start();\r\n\t} catch( IOException e ) {\r\n\t\tlogger.error(&quot;Exception on starting HTTP-Server.&quot;, e);\r\n\t}\r\n\r\nThe myAPI.java is nothing special yet and also not important for the problem here, I think. Nevertheless, it looks like this:\r\n\r\n    public class myAPI extends ResourceConfig{\r\n    \tprivate static final ObjectMapper mapper = new ObjectMapper();\r\n    \r\n    \tpublic myAPI(){\r\n    \t}\r\n    \r\n    \t@Path(&quot;/hello&quot;)\r\n    \t@GET\r\n    \t@Produces(MediaType.APPLICATION_JSON)\r\n    \tpublic Response foo() {\r\n    \t\tObjectNode json = mapper.createObjectNode();\r\n    \t\tjson.put(&quot;status&quot;, &quot;ok&quot;);\r\n    \t\treturn Response.status(Response.Status.OK).entity(json).build();\r\n    \t}    \r\n    }\r\n\r\nMy classpath contains the following huge amount of libraries:\r\n\r\n    commons-logging-1.1.3.jar\r\n    grizzly-framework-3.0.0.jar\r\n    grizzly-http-server-3.0.0.jar\r\n    grizzly-http-server-multipart-3.0.0.jar\r\n    hk2-api-2.6.1.jar\r\n    hk2-locator-2.6.1.jar\r\n    hk2-utils-2.6.1.jar\r\n    jakarta.annotation-api-2.0.0.jar\r\n    jakarta.inject-api-2.0.0.jar\r\n    jakarta.ws.rs-api-3.0.0.jar\r\n    javax.annotation-api-1.3.2.jar\r\n    javax.inject-1.jar\r\n    jersey-common-3.0.2.jar\r\n    jersey-container-grizzly2-http-3.0.2.jar\r\n    jersey-guava-2.22.1.jar\r\n    jersey-hk2-3.0.2.jar\r\n    jersey-server-3.0.2.jar\r\n    org.apache.commons.logging-1.1.3.jar\r\n    jackson-annotations-2.9.0.jar\r\n    jackson-core-2.9.4.jar\r\n    jackson-databind-2.9.4.jar\r\n    -\r\n    httpclient-4.5.13.jar\r\n    httpcore-4.4.14.jar\r\n    httpmime-4.5.13.jar\r\n    log4j-api-2.14.1.jar\r\n    log4j-core-2.14.1.jar\r\n\r\nThe libraries below the dash are needed for another module (http-client) inside my application. I know that I probably could have used some of the libraries there, which I also use for the http-server, but I couldn&#39;t get it to work otherwise. But that&#39;s not the focus here, only when this is responsible for some kind of collusions due to multiple implementations?! After the long trail-and-error in dependency-hell, it is also possible that some libraries are even not needed.\r\n\r\nSo the core-question is, how I can put the RequestContext into the singleton-scope?! I haven&#39;t even declared a RequestContext anywhere. Do I have to add it in some way?\r\n\r\nSide-fact: I also tried the same with the Jersey-JdkHttpServerFactory and ended up with the same error.\r\n\r\n","title":"How to fix &quot;org.glassfish.jersey.inject.hk2.RequestContext.RequestContext must be in the Singleton scope&quot;","body":"<p>I'd like to implement a simple REST-API with Jersey and grizzly. After beeing stuck in dependency-hell for a while, I ended up with an exception and I have no idea how to handle/interpret:</p>\n<pre><code>java.lang.IllegalArgumentException: The implementation class org.glassfish.jersey.inject.hk2.RequestContext must be in the Singleton scope\n    at org.jvnet.hk2.internal.ServiceLocatorImpl.checkConfiguration(ServiceLocatorImpl.java:1713)\n    at org.jvnet.hk2.internal.ServiceLocatorImpl.addConfiguration(ServiceLocatorImpl.java:2108)\n    at org.jvnet.hk2.internal.DynamicConfigurationImpl.commit(DynamicConfigurationImpl.java:262)\n    at org.glassfish.hk2.utilities.ServiceLocatorUtilities.bind(ServiceLocatorUtilities.java:166)\n    at org.glassfish.jersey.inject.hk2.AbstractHk2InjectionManager.&lt;init&gt;(AbstractHk2InjectionManager.java:65)\n    at org.glassfish.jersey.inject.hk2.ImmediateHk2InjectionManager.&lt;init&gt;(ImmediateHk2InjectionManager.java:38)\n    at org.glassfish.jersey.inject.hk2.Hk2InjectionManagerFactory$Hk2InjectionManagerStrategy$1.createInjectionManager(Hk2InjectionManagerFactory.java:55)\n    at org.glassfish.jersey.inject.hk2.Hk2InjectionManagerFactory.create(Hk2InjectionManagerFactory.java:73)\n    at org.glassfish.jersey.internal.inject.Injections.createInjectionManager(Injections.java:69)\n    at org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:259)\n    at org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:246)\n    at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpContainer.&lt;init&gt;(GrizzlyHttpContainer.java:310)\n    at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpServerFactory.createHttpServer(GrizzlyHttpServerFactory.java:93)\n    at src.main.java.myApplication.main(myApplication.java:141)\n</code></pre>\n<p>The exception happens in my main-class on creating the http-server:</p>\n<pre><code>URI uri= URI.create(&quot;http://localhost:8080&quot;);       \nResourceConfig config = new ResourceConfig();\nconfig.register(myAPI.class);\n\nHttpServer server = GrizzlyHttpServerFactory.createHttpServer(uri, config);\ntry{\n    server.start();\n} catch( IOException e ) {\n    logger.error(&quot;Exception on starting HTTP-Server.&quot;, e);\n}\n</code></pre>\n<p>The myAPI.java is nothing special yet and also not important for the problem here, I think. Nevertheless, it looks like this:</p>\n<pre><code>public class myAPI extends ResourceConfig{\n    private static final ObjectMapper mapper = new ObjectMapper();\n\n    public myAPI(){\n    }\n\n    @Path(&quot;/hello&quot;)\n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    public Response foo() {\n        ObjectNode json = mapper.createObjectNode();\n        json.put(&quot;status&quot;, &quot;ok&quot;);\n        return Response.status(Response.Status.OK).entity(json).build();\n    }    \n}\n</code></pre>\n<p>My classpath contains the following huge amount of libraries:</p>\n<pre><code>commons-logging-1.1.3.jar\ngrizzly-framework-3.0.0.jar\ngrizzly-http-server-3.0.0.jar\ngrizzly-http-server-multipart-3.0.0.jar\nhk2-api-2.6.1.jar\nhk2-locator-2.6.1.jar\nhk2-utils-2.6.1.jar\njakarta.annotation-api-2.0.0.jar\njakarta.inject-api-2.0.0.jar\njakarta.ws.rs-api-3.0.0.jar\njavax.annotation-api-1.3.2.jar\njavax.inject-1.jar\njersey-common-3.0.2.jar\njersey-container-grizzly2-http-3.0.2.jar\njersey-guava-2.22.1.jar\njersey-hk2-3.0.2.jar\njersey-server-3.0.2.jar\norg.apache.commons.logging-1.1.3.jar\njackson-annotations-2.9.0.jar\njackson-core-2.9.4.jar\njackson-databind-2.9.4.jar\n-\nhttpclient-4.5.13.jar\nhttpcore-4.4.14.jar\nhttpmime-4.5.13.jar\nlog4j-api-2.14.1.jar\nlog4j-core-2.14.1.jar\n</code></pre>\n<p>The libraries below the dash are needed for another module (http-client) inside my application. I know that I probably could have used some of the libraries there, which I also use for the http-server, but I couldn't get it to work otherwise. But that's not the focus here, only when this is responsible for some kind of collusions due to multiple implementations?! After the long trail-and-error in dependency-hell, it is also possible that some libraries are even not needed.</p>\n<p>So the core-question is, how I can put the RequestContext into the singleton-scope?! I haven't even declared a RequestContext anywhere. Do I have to add it in some way?</p>\n<p>Side-fact: I also tried the same with the Jersey-JdkHttpServerFactory and ended up with the same error.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver","gitlab-ci-runner","cicd"],"answers":[{"tags":[],"owner":{"account_id":18553557,"reputation":75,"user_id":13519244,"display_name":"Amad Bin Mumtaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682263810,"creation_date":1682263810,"answer_id":76085726,"question_id":75944563,"body_markdown":"So we connected with the GitLab support team on this and it seems to be a limitation from the runner that it always runs tests in a headless mode regardless of what configurations are applied in the automation framework. Also, this goes for other scripts (PowerShell or ms cmd) and the execution will be done in silent/ headless mode.","title":"Selenium test cases execution in maximized browser state","body":"<p>So we connected with the GitLab support team on this and it seems to be a limitation from the runner that it always runs tests in a headless mode regardless of what configurations are applied in the automation framework. Also, this goes for other scripts (PowerShell or ms cmd) and the execution will be done in silent/ headless mode.</p>\n"}],"owner":{"account_id":18553557,"reputation":75,"user_id":13519244,"display_name":"Amad Bin Mumtaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682263810,"creation_date":1680735206,"question_id":75944563,"body_markdown":"I want to run my selenium test cases on Chrome/Firefox in maximized state. Currently, I have a pipeline that works and runs my Selenium java tests (mvn test) only in headless mode regardless of the configuration I set in my driver definition. GitLab runner is configured under my VM where all pipeline stages are running. Is there a way or something I am missing with which I can run my tests in a maximized browser state?\r\n\r\nPipeline stage:\r\n\r\n    stages:\r\n      - test_regression_suite\r\n    \r\n    E2E_tests:\r\n      image: maven:3-jdk-11\r\n      stage: test_regression_suite\r\n      tags:\r\n        - ci-runner\r\n      variables:\r\n        JAVA_HOME: &quot;C:\\\\Program Files\\\\Java\\\\jdk1.8.0_361&quot;\r\n      script:\r\n        - cd pth\\to\\my\\framework\\src\\runner\\file\r\n        - mvn test\r\n      timeout: 1200 seconds\r\n      allow_failure: true\r\n\r\nBrowser configurations:\r\n\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, System.getProperty(&quot;user.dir&quot;) + operatingPlatform);\r\n\t\tMap&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\r\n\t\tprefs.put(&quot;plugins.plugins_disabled&quot;, new String[]{&quot;Chrome PDF Viewer&quot;});\r\n\r\n\t\tChromeOptions options = new ChromeOptions();\r\n\t\toptions.addArguments(&quot;--start-maximized&quot;);\r\n\t\toptions.setExperimentalOption(&quot;prefs&quot;, prefs);\r\n\t\tHashMap&lt;String, Object&gt; options1 = new HashMap&lt;String, Object&gt;();\r\n\t\toptions1.put(&quot;prefs&quot;, prefs);\r\n\t\tdriver = new ChromeDriver(options);\r\n\r\nDespite the option (&quot;--start-maximized&quot;) already defined above, it still runs the test cases in the headless mode because of which several of my test cases are getting failed (due to application UI dependencies).\r\n\r\n","title":"Selenium test cases execution in maximized browser state","body":"<p>I want to run my selenium test cases on Chrome/Firefox in maximized state. Currently, I have a pipeline that works and runs my Selenium java tests (mvn test) only in headless mode regardless of the configuration I set in my driver definition. GitLab runner is configured under my VM where all pipeline stages are running. Is there a way or something I am missing with which I can run my tests in a maximized browser state?</p>\n<p>Pipeline stage:</p>\n<pre><code>stages:\n  - test_regression_suite\n\nE2E_tests:\n  image: maven:3-jdk-11\n  stage: test_regression_suite\n  tags:\n    - ci-runner\n  variables:\n    JAVA_HOME: &quot;C:\\\\Program Files\\\\Java\\\\jdk1.8.0_361&quot;\n  script:\n    - cd pth\\to\\my\\framework\\src\\runner\\file\n    - mvn test\n  timeout: 1200 seconds\n  allow_failure: true\n</code></pre>\n<p>Browser configurations:</p>\n<pre><code>    System.setProperty(&quot;webdriver.chrome.driver&quot;, System.getProperty(&quot;user.dir&quot;) + operatingPlatform);\n    Map&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\n    prefs.put(&quot;plugins.plugins_disabled&quot;, new String[]{&quot;Chrome PDF Viewer&quot;});\n\n    ChromeOptions options = new ChromeOptions();\n    options.addArguments(&quot;--start-maximized&quot;);\n    options.setExperimentalOption(&quot;prefs&quot;, prefs);\n    HashMap&lt;String, Object&gt; options1 = new HashMap&lt;String, Object&gt;();\n    options1.put(&quot;prefs&quot;, prefs);\n    driver = new ChromeDriver(options);\n</code></pre>\n<p>Despite the option (&quot;--start-maximized&quot;) already defined above, it still runs the test cases in the headless mode because of which several of my test cases are getting failed (due to application UI dependencies).</p>\n"},{"tags":["java","windows","explorer"],"comments":[{"owner":{"account_id":269588,"reputation":934,"user_id":559011,"accept_rate":25,"display_name":"Charles Wu"},"score":1,"creation_date":1315555470,"post_id":7357969,"comment_id":8878931,"body_markdown":"I read every answers and comments of my question, but there are no satisfied answers. I vote some answers which close to my aim, though those are not the complete solutions. So I didn&#39;t accept any answers to prevent others misunderstood. Hope someone someday can give me a complete solution of those questions, and of course, I will accept. At last, I invite to you to join my discussions. Maybe you are the one who can solve my questions. Thanks for your comment.","body":"I read every answers and comments of my question, but there are no satisfied answers. I vote some answers which close to my aim, though those are not the complete solutions. So I didn&#39;t accept any answers to prevent others misunderstood. Hope someone someday can give me a complete solution of those questions, and of course, I will accept. At last, I invite to you to join my discussions. Maybe you are the one who can solve my questions. Thanks for your comment."}],"answers":[{"tags":[],"owner":{"account_id":144642,"reputation":29072,"user_id":353852,"display_name":"krock"},"down_vote_count":1,"up_vote_count":29,"is_accepted":false,"score":28,"last_activity_date":1315628380,"creation_date":1315627951,"answer_id":7369564,"question_id":7357969,"body_markdown":"The Desktop API does not support this. You are going to have to use [`ProcessBuilder`][1] (or alternatively [`Runtime.exec()`][2]) to execute explorer.exe explicitly [with the options you want][3]. This will only work on windows though, if you want to run this on another OS you will have to use the Desktop API anyway.\r\n\r\n    Process p = new ProcessBuilder(&quot;explorer.exe&quot;, &quot;/select,C:\\\\directory\\\\selectedFile&quot;).start();\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html\r\n  [2]: http://download.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29\r\n  [3]: http://support.microsoft.com/kb/152457","title":"How to use java code to open Windows file explorer and highlight the specified file?","body":"<p>The Desktop API does not support this. You are going to have to use <a href=\"http://download.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html\" rel=\"noreferrer\"><code>ProcessBuilder</code></a> (or alternatively <a href=\"http://download.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29\" rel=\"noreferrer\"><code>Runtime.exec()</code></a>) to execute explorer.exe explicitly <a href=\"http://support.microsoft.com/kb/152457\" rel=\"noreferrer\">with the options you want</a>. This will only work on windows though, if you want to run this on another OS you will have to use the Desktop API anyway.</p>\n\n<pre><code>Process p = new ProcessBuilder(\"explorer.exe\", \"/select,C:\\\\directory\\\\selectedFile\").start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2137097,"reputation":947,"user_id":1896581,"accept_rate":88,"display_name":"Zixradoom"},"down_vote_count":2,"up_vote_count":44,"is_accepted":false,"score":42,"last_activity_date":1540308648,"creation_date":1356583091,"answer_id":14049416,"question_id":7357969,"body_markdown":"EDIT:\r\n\r\nAs of java 9 there is now a method in the Desktop API to select the file\r\n\r\n    desktop.browseFileDirectory(&lt;file&gt;)\r\n\r\nEDIT:\r\n\r\nYou cannot highlight a specific file with the java Desktop API.\r\n\r\nANSWER TO ORIGINAL QUESTION:\r\n\r\nThe Desktop API will allow you to do this by using this snippet,\r\n\r\n    File file = new File (&quot;c:\\&lt;directory&gt;&quot;);\r\n    Desktop desktop = Desktop.getDesktop();\r\n    desktop.open(file);\r\n\r\nThe documentation for the code used above is at these links, \r\nhttp://docs.oracle.com/javase/10/docs/api/java/awt/Desktop.html and\r\nhttp://docs.oracle.com/javase/10/docs/api/java/io/File.html\r\n\r\nOn a Windows computer this will open the default file explorer and on other systems it will open their default explorers respectively.\r\n\r\nAlternatively you could use the new java Path API to build the required path and then invoke the method that returns the corresponding File object.\r\n\r\nFor brevity I excluded the checking code to make sure the Desktop and File objects exist.","title":"How to use java code to open Windows file explorer and highlight the specified file?","body":"<p>EDIT:</p>\n\n<p>As of java 9 there is now a method in the Desktop API to select the file</p>\n\n<pre><code>desktop.browseFileDirectory(&lt;file&gt;)\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>You cannot highlight a specific file with the java Desktop API.</p>\n\n<p>ANSWER TO ORIGINAL QUESTION:</p>\n\n<p>The Desktop API will allow you to do this by using this snippet,</p>\n\n<pre><code>File file = new File (\"c:\\&lt;directory&gt;\");\nDesktop desktop = Desktop.getDesktop();\ndesktop.open(file);\n</code></pre>\n\n<p>The documentation for the code used above is at these links, \n<a href=\"http://docs.oracle.com/javase/10/docs/api/java/awt/Desktop.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/10/docs/api/java/awt/Desktop.html</a> and\n<a href=\"http://docs.oracle.com/javase/10/docs/api/java/io/File.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/10/docs/api/java/io/File.html</a></p>\n\n<p>On a Windows computer this will open the default file explorer and on other systems it will open their default explorers respectively.</p>\n\n<p>Alternatively you could use the new java Path API to build the required path and then invoke the method that returns the corresponding File object.</p>\n\n<p>For brevity I excluded the checking code to make sure the Desktop and File objects exist.</p>\n"},{"tags":[],"owner":{"account_id":2669824,"reputation":3092,"user_id":2307466,"accept_rate":56,"display_name":"Stone"},"down_vote_count":0,"up_vote_count":57,"is_accepted":true,"score":57,"last_activity_date":1438937170,"creation_date":1410186175,"answer_id":25726480,"question_id":7357969,"body_markdown":"Use: `Runtime.getRuntime().exec(&quot;explorer.exe /select,&quot; + path);`\r\n\r\nThis also works if there is a space in the `PATH`. ","title":"How to use java code to open Windows file explorer and highlight the specified file?","body":"<p>Use: <code>Runtime.getRuntime().exec(\"explorer.exe /select,\" + path);</code></p>\n\n<p>This also works if there is a space in the <code>PATH</code>. </p>\n"},{"tags":[],"owner":{"account_id":6868781,"reputation":68,"user_id":5280071,"display_name":"Aravind Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461473644,"creation_date":1461473644,"answer_id":36819412,"question_id":7357969,"body_markdown":"This works even if file/folder name has multiple spaces between words.\r\n\r\n\r\n        //In this example there are 3 spaces between &quot;GAME&quot; and &quot;OF&quot; and 2 spaces between &quot;OF&quot; and &quot;Thrones&quot;\r\n        String onlyPath = &quot;D:\\\\GAME   OF  Thrones&quot;;\r\n        String selectPath = &quot;/select,&quot; + onlyPath;        \r\n\r\n        //START: Strip one SPACE among consecutive spaces\r\n        LinkedList&lt;String&gt; list = new LinkedList&lt;&gt;();\r\n        StringBuilder sb = new StringBuilder();\r\n        boolean flag = true;\r\n        \r\n        for (int i = 0; i &lt; selectPath.length(); i++) {\r\n            if (i == 0) {\r\n                sb.append(selectPath.charAt(i));\r\n                continue;\r\n            }\r\n\r\n            if (selectPath.charAt(i) == &#39; &#39; &amp;&amp; flag) {\r\n                list.add(sb.toString());\r\n                sb.setLength(0);\r\n                flag = false;\r\n                continue;\r\n            }\r\n\r\n            if (!flag &amp;&amp; selectPath.charAt(i) != &#39; &#39;) {\r\n                flag = true;\r\n            }\r\n\r\n            sb.append(selectPath.charAt(i));\r\n        }\r\n\r\n        list.add(sb.toString());\r\n\r\n        list.addFirst(&quot;explorer.exe&quot;);\r\n        //END: Strip one SPACE among consecutive spaces\r\n        \r\n        //Output List\r\n        for (String s : list) {\r\n            System.out.println(&quot;string:&quot;+s);\r\n        }\r\n        /*output of above loop\r\n        \r\n        string:explorer.exe\r\n        string:/select,D:\\GAME\r\n        string:  OF\r\n        string: Thrones\r\n        \r\n        */\r\n        \r\n        //Open in Explorer and Highlight\r\n        Process p = new ProcessBuilder(list).start();\r\n    ","title":"How to use java code to open Windows file explorer and highlight the specified file?","body":"<p>This works even if file/folder name has multiple spaces between words.</p>\n\n<pre><code>    //In this example there are 3 spaces between \"GAME\" and \"OF\" and 2 spaces between \"OF\" and \"Thrones\"\n    String onlyPath = \"D:\\\\GAME   OF  Thrones\";\n    String selectPath = \"/select,\" + onlyPath;        \n\n    //START: Strip one SPACE among consecutive spaces\n    LinkedList&lt;String&gt; list = new LinkedList&lt;&gt;();\n    StringBuilder sb = new StringBuilder();\n    boolean flag = true;\n\n    for (int i = 0; i &lt; selectPath.length(); i++) {\n        if (i == 0) {\n            sb.append(selectPath.charAt(i));\n            continue;\n        }\n\n        if (selectPath.charAt(i) == ' ' &amp;&amp; flag) {\n            list.add(sb.toString());\n            sb.setLength(0);\n            flag = false;\n            continue;\n        }\n\n        if (!flag &amp;&amp; selectPath.charAt(i) != ' ') {\n            flag = true;\n        }\n\n        sb.append(selectPath.charAt(i));\n    }\n\n    list.add(sb.toString());\n\n    list.addFirst(\"explorer.exe\");\n    //END: Strip one SPACE among consecutive spaces\n\n    //Output List\n    for (String s : list) {\n        System.out.println(\"string:\"+s);\n    }\n    /*output of above loop\n\n    string:explorer.exe\n    string:/select,D:\\GAME\n    string:  OF\n    string: Thrones\n\n    */\n\n    //Open in Explorer and Highlight\n    Process p = new ProcessBuilder(list).start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3009640,"reputation":3898,"user_id":2553431,"accept_rate":50,"display_name":"Iamat8"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1473664753,"creation_date":1473664753,"answer_id":39445156,"question_id":7357969,"body_markdown":"We can open a specific path from command line with :\r\n\r\n    start C:/ProgramData\r\n\r\nThere are two ways in java you can use to open windows explorer with specific path:\r\n\r\n1. Use Process class(as already answered) but with start command\r\n \r\n\r\n        try {\r\n\t\t\tProcess builder = Runtime.getRuntime().exec(&quot;cmd /c start C:/ProgramData&quot;);\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n2. Use Desktop class \r\n\r\n        try {\r\n\t\t\tDesktop.getDesktop().open(new File(&quot;C:/ProgramData&quot;));\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}","title":"How to use java code to open Windows file explorer and highlight the specified file?","body":"<p>We can open a specific path from command line with :</p>\n\n<pre><code>start C:/ProgramData\n</code></pre>\n\n<p>There are two ways in java you can use to open windows explorer with specific path:</p>\n\n<ol>\n<li><p>Use Process class(as already answered) but with start command</p>\n\n<pre><code>try {\n    Process builder = Runtime.getRuntime().exec(\"cmd /c start C:/ProgramData\");\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre></li>\n<li><p>Use Desktop class </p>\n\n<pre><code>try {\n    Desktop.getDesktop().open(new File(\"C:/ProgramData\"));\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10827469,"reputation":11,"user_id":7962955,"display_name":"Martin Koukal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1493898546,"creation_date":1493898546,"answer_id":43782091,"question_id":7357969,"body_markdown":"Here is shorter version of above.\r\n\r\n        String onlyPath = &quot;D:\\\\GAME   OF  Thrones&quot;;\r\n        String completeCmd = &quot;explorer.exe /select,&quot; + onlyPath;\r\n        new ProcessBuilder((&quot;explorer.exe &quot; + completeCmd).split(&quot; &quot;)).start();\r\n","title":"How to use java code to open Windows file explorer and highlight the specified file?","body":"<p>Here is shorter version of above.</p>\n\n<pre><code>    String onlyPath = \"D:\\\\GAME   OF  Thrones\";\n    String completeCmd = \"explorer.exe /select,\" + onlyPath;\n    new ProcessBuilder((\"explorer.exe \" + completeCmd).split(\" \")).start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4835491,"reputation":4717,"user_id":3902339,"accept_rate":100,"display_name":"ArifMustafa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1510222244,"creation_date":1510221536,"answer_id":47198826,"question_id":7357969,"body_markdown":"Always use the &quot;\\&quot; instead of &quot;/&quot;, otherwise only the Explorer will open, fore more read this - [Command-line switches that you can use to open the GUI Windows Explorer (Explorer.exe)][1]\r\n\r\nUsing Windows CLI : \r\n\r\n    C:\\Users\\Md Arif Mustafa&gt;explorer.exe /select, &quot;C:\\Users\\Md Arif Mustafa\\Music\\Aafreen-Himesh.mp3&quot;\r\n\r\nSame in Java source code :\r\nHere variable filePaths is an `ArrayList&lt;String&gt;` and contains a folder all files path.\r\n\r\n    try {\r\n    \tProcess proc = Runtime.getRuntime().exec(&quot;explorer.exe /select, &quot; + filePaths.get(i).replaceAll(&quot;/&quot;, &quot;\\\\\\\\&quot;));\r\n    \tproc.waitFor();\r\n    } catch (IOException | InterruptedException ex ) {\r\n    \tex.printStackTrace();\r\n    }\r\n\r\nIt worked for me and hope it helps you!\r\n\r\n  [1]: https://ss64.com/nt/explorer.html","title":"How to use java code to open Windows file explorer and highlight the specified file?","body":"<p>Always use the \"\\\" instead of \"/\", otherwise only the Explorer will open, fore more read this - <a href=\"https://ss64.com/nt/explorer.html\" rel=\"nofollow noreferrer\">Command-line switches that you can use to open the GUI Windows Explorer (Explorer.exe)</a></p>\n\n<p>Using Windows CLI : </p>\n\n<pre><code>C:\\Users\\Md Arif Mustafa&gt;explorer.exe /select, \"C:\\Users\\Md Arif Mustafa\\Music\\Aafreen-Himesh.mp3\"\n</code></pre>\n\n<p>Same in Java source code :\nHere variable filePaths is an <code>ArrayList&lt;String&gt;</code> and contains a folder all files path.</p>\n\n<pre><code>try {\n    Process proc = Runtime.getRuntime().exec(\"explorer.exe /select, \" + filePaths.get(i).replaceAll(\"/\", \"\\\\\\\\\"));\n    proc.waitFor();\n} catch (IOException | InterruptedException ex ) {\n    ex.printStackTrace();\n}\n</code></pre>\n\n<p>It worked for me and hope it helps you!</p>\n"},{"tags":[],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682263288,"creation_date":1682263288,"answer_id":76085694,"question_id":7357969,"body_markdown":"The **correct** `ProcessBuilder` code is actually the following:\r\n\r\n    public static void selectFileInFileExplorer(final Path filePath) throws IOException {\r\n    \tfinal String windowsDirectory = System.getenv(&quot;WINDIR&quot;);\r\n    \tfinal String explorerFilePath = windowsDirectory + &quot;\\\\explorer.exe&quot;;\r\n    \tfinal ProcessBuilder builder = new ProcessBuilder(explorerFilePath, &quot;/select,&quot;, filePath.toString());\r\n    \tbuilder.start();\r\n    }\r\n\r\nNote that you need to start a new command after `/select,`, otherwise it will open the `Documents` folder.","title":"How to use java code to open Windows file explorer and highlight the specified file?","body":"<p>The <strong>correct</strong> <code>ProcessBuilder</code> code is actually the following:</p>\n<pre><code>public static void selectFileInFileExplorer(final Path filePath) throws IOException {\n    final String windowsDirectory = System.getenv(&quot;WINDIR&quot;);\n    final String explorerFilePath = windowsDirectory + &quot;\\\\explorer.exe&quot;;\n    final ProcessBuilder builder = new ProcessBuilder(explorerFilePath, &quot;/select,&quot;, filePath.toString());\n    builder.start();\n}\n</code></pre>\n<p>Note that you need to start a new command after <code>/select,</code>, otherwise it will open the <code>Documents</code> folder.</p>\n"}],"owner":{"account_id":269588,"reputation":934,"user_id":559011,"accept_rate":25,"display_name":"Charles Wu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88608,"favorite_count":0,"down_vote_count":0,"up_vote_count":52,"accepted_answer_id":25726480,"answer_count":8,"score":52,"last_activity_date":1682263288,"creation_date":1315550217,"question_id":7357969,"body_markdown":"I am now using java Desktop API to manipulate file explorer. \r\nI know how to open the file explorer but I don&#39;t know how to open it and highlight the specified file.\r\n\r\nAs we using the Chrome, after downloading files, we can choose &quot;show in folder&quot; to open the file explorer and highlight the downloaded file.\r\n\r\nHow to use java Desktop API to do so?\r\nOr is there any other API in java can realize this action?\r\n","title":"How to use java code to open Windows file explorer and highlight the specified file?","body":"<p>I am now using java Desktop API to manipulate file explorer. \nI know how to open the file explorer but I don't know how to open it and highlight the specified file.</p>\n\n<p>As we using the Chrome, after downloading files, we can choose \"show in folder\" to open the file explorer and highlight the downloaded file.</p>\n\n<p>How to use java Desktop API to do so?\nOr is there any other API in java can realize this action?</p>\n"},{"tags":["java","groovy","soapui"],"comments":[{"owner":{"account_id":1883209,"reputation":20919,"user_id":1702943,"accept_rate":86,"display_name":"Rao"},"score":0,"creation_date":1512972794,"post_id":47743187,"comment_id":82454723,"body_markdown":"Benjamin, would you please take a look at below solution to see if that resolves the above mentioned issue? If that helps, you may mark it as [answered](https://stackoverflow.com/tour)","body":"Benjamin, would you please take a look at below solution to see if that resolves the above mentioned issue? If that helps, you may mark it as <a href=\"https://stackoverflow.com/tour\">answered</a>"}],"answers":[{"tags":[],"owner":{"account_id":1883209,"reputation":20919,"user_id":1702943,"accept_rate":86,"display_name":"Rao"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512955409,"creation_date":1512955409,"answer_id":47745295,"question_id":47743187,"body_markdown":"`project.testSuites` gives you the map. Hence the error. Instead use `project.testSuiteList` which gives the list. So, that the above mentioned error goes away.\r\n\r\nSimilarly, other objects as well. See below changed code snippet.\r\n\r\n    for (suite in project.testSuiteList) {\r\n        for (kase in suite.testCaseList) {\r\n            for (step in kase.testStepList) {\r\n                someFile.withWriterAppend{out -&gt;out.println testStep.toString()}\r\n            }\r\n        }\r\n    }","title":"Iterate test steps in soapuI using groovy script","body":"<p><code>project.testSuites</code> gives you the map. Hence the error. Instead use <code>project.testSuiteList</code> which gives the list. So, that the above mentioned error goes away.</p>\n\n<p>Similarly, other objects as well. See below changed code snippet.</p>\n\n<pre><code>for (suite in project.testSuiteList) {\n    for (kase in suite.testCaseList) {\n        for (step in kase.testStepList) {\n            someFile.withWriterAppend{out -&gt;out.println testStep.toString()}\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6270507,"reputation":11,"user_id":4874903,"display_name":"Benjamin fraquet"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1057,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682263180,"creation_date":1512938203,"question_id":47743187,"body_markdown":"I&#39;m currently trying to generate a report for my test suite in SoapUI.\r\n\r\nMy old working code was a line this, in the testSuite teardown script:\r\n\r\n    def testc = project.testSuites[&#39;TestSuite&#39;].testCases[&#39;TestCase&#39;].testSteps[&#39;xxxxx&#39;]\r\n\r\nBut it had to be duplicated for each new test step.\r\n\r\nThe code that I&#39;m trying to use is this one:\r\n\r\n    for (service in project.testSuites) {\r\n        for (testCase in service.testCases) {\r\n            for (testStep in testCase.testSteps) {\r\n                someFile.withWriterAppend{out -&gt;out.println testStep.toString()}\r\n            }\r\n        }\r\n    }\r\n\r\nWhich is giving me this error:\r\n \r\n&gt;groovy?lang.MissingPropertyException: No such property: testCases for class: javaUtil.hashMap$Node\r\n\r\nSince I&#39;m using the same path to access every test step, I was surprised to not be able to do it with an iteration.","title":"Iterate test steps in soapuI using groovy script","body":"<p>I'm currently trying to generate a report for my test suite in SoapUI.</p>\n<p>My old working code was a line this, in the testSuite teardown script:</p>\n<pre><code>def testc = project.testSuites['TestSuite'].testCases['TestCase'].testSteps['xxxxx']\n</code></pre>\n<p>But it had to be duplicated for each new test step.</p>\n<p>The code that I'm trying to use is this one:</p>\n<pre><code>for (service in project.testSuites) {\n    for (testCase in service.testCases) {\n        for (testStep in testCase.testSteps) {\n            someFile.withWriterAppend{out -&gt;out.println testStep.toString()}\n        }\n    }\n}\n</code></pre>\n<p>Which is giving me this error:</p>\n<blockquote>\n<p>groovy?lang.MissingPropertyException: No such property: testCases for class: javaUtil.hashMap$Node</p>\n</blockquote>\n<p>Since I'm using the same path to access every test step, I was surprised to not be able to do it with an iteration.</p>\n"},{"tags":["java","testing","groovy","spock","wiremock"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1682243187,"post_id":76083999,"comment_id":134181715,"body_markdown":"no screenshots of plain text please","body":"no screenshots of plain text please"}],"answers":[{"tags":[],"owner":{"account_id":3716230,"reputation":17016,"user_id":3092377,"accept_rate":73,"display_name":"Shashank Vivek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682254696,"creation_date":1682254696,"answer_id":76084974,"question_id":76083999,"body_markdown":"Try with `\\` to handle the double quotes\r\n\r\n```\r\n&quot;startDateTime&quot; : ${myTime? &quot;\\&quot;${myTime}\\&quot;&quot; : null}\r\n```","title":"Use Ternary operator in Groovy ,Spock and Rest Assured Testing - Intergation Test","body":"<p>Try with <code>\\</code> to handle the double quotes</p>\n<pre><code>&quot;startDateTime&quot; : ${myTime? &quot;\\&quot;${myTime}\\&quot;&quot; : null}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682262520,"creation_date":1682256026,"answer_id":76085082,"question_id":76083999,"body_markdown":"Like I said in my comment under _Shashank Vivek_&#39;s answer, you can also do this, avoiding nested GString interpolation altogether:\r\n\r\n```java\r\nclass MySpec extends Specification {\r\n  def &#39;should pass some test&#39;() {\r\n    given:\r\n    println \\\r\n      &quot;&quot;&quot;\\\r\n      {\r\n        &quot;startDateTime&quot; : ${myTime? &#39;&quot;&#39; + myTime + &#39;&quot;&#39; : null}\r\n      }\\\r\n      &quot;&quot;&quot;.stripIndent()\r\n\r\n    expect: true\r\n   \r\n    where:\r\n    productOrderId | myTime\r\n    &quot;1&quot;            | &quot;2023-04-23T07:13:15.862Z&quot;  \r\n    &quot;2&quot;            | null\r\n  }\r\n}\r\n```\r\n\r\nConsole log:\r\n\r\n```none\r\n{\r\n  &quot;startDateTime&quot; : &quot;2023-04-23T07:13:15.862Z&quot;\r\n}    \r\n{\r\n  &quot;startDateTime&quot; : null\r\n}\r\n```\r\n\r\nTry it in the [Groovy Web Console](https://gwc-experiment.appspot.com/?g=groovy_2_5&amp;codez=eJxdT7tOwzAU3fMVRxZSWqFWiQO08sLC0gEx0AmxRPEttZQ4kX0DrdL8O7FJpQov9zx87qOqS-_xen7vqAKdmKz2CMQcTFWyaS2GBNB0QOqPbV9rdCHh24bA5DldLOMP4Mt8k1URds5Yri0-IwOEEFc4zHUSPZeOX0qmvWlIQOFuaM4BPyMVKe7xxyYQqILt63qc4-NN67VnZ7qd1WR5sUyiQafpBlZg11MQovhzJEfXDVvdV_zmNLmdxmWeFT2RC9y8C4TMZLHKHlay2GcblRcqf1xvn-SHmBsL-S8RVp2cMRmTX7A6XD4).\r\n\r\nFeel free to ignore the backslashes and indentation removal. I was just being precise about avoiding unnecessary indentation and newline characters.","title":"Use Ternary operator in Groovy ,Spock and Rest Assured Testing - Intergation Test","body":"<p>Like I said in my comment under <em>Shashank Vivek</em>'s answer, you can also do this, avoiding nested GString interpolation altogether:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MySpec extends Specification {\n  def 'should pass some test'() {\n    given:\n    println \\\n      &quot;&quot;&quot;\\\n      {\n        &quot;startDateTime&quot; : ${myTime? '&quot;' + myTime + '&quot;' : null}\n      }\\\n      &quot;&quot;&quot;.stripIndent()\n\n    expect: true\n   \n    where:\n    productOrderId | myTime\n    &quot;1&quot;            | &quot;2023-04-23T07:13:15.862Z&quot;  \n    &quot;2&quot;            | null\n  }\n}\n</code></pre>\n<p>Console log:</p>\n<pre class=\"lang-none prettyprint-override\"><code>{\n  &quot;startDateTime&quot; : &quot;2023-04-23T07:13:15.862Z&quot;\n}    \n{\n  &quot;startDateTime&quot; : null\n}\n</code></pre>\n<p>Try it in the <a href=\"https://gwc-experiment.appspot.com/?g=groovy_2_5&amp;codez=eJxdT7tOwzAU3fMVRxZSWqFWiQO08sLC0gEx0AmxRPEttZQ4kX0DrdL8O7FJpQov9zx87qOqS-_xen7vqAKdmKz2CMQcTFWyaS2GBNB0QOqPbV9rdCHh24bA5DldLOMP4Mt8k1URds5Yri0-IwOEEFc4zHUSPZeOX0qmvWlIQOFuaM4BPyMVKe7xxyYQqILt63qc4-NN67VnZ7qd1WR5sUyiQafpBlZg11MQovhzJEfXDVvdV_zmNLmdxmWeFT2RC9y8C4TMZLHKHlay2GcblRcqf1xvn-SHmBsL-S8RVp2cMRmTX7A6XD4\" rel=\"nofollow noreferrer\">Groovy Web Console</a>.</p>\n<p>Feel free to ignore the backslashes and indentation removal. I was just being precise about avoiding unnecessary indentation and newline characters.</p>\n"}],"owner":{"account_id":9223153,"reputation":1182,"user_id":6851769,"accept_rate":80,"display_name":"Samuel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76084974,"answer_count":2,"score":0,"last_activity_date":1682262520,"creation_date":1682240910,"question_id":76083999,"body_markdown":"I have below code where I want to replace values based on `where` section of the test:\r\n\r\n```groovy\r\nvoid &#39;should pass some test() {\r\n  given:\r\n  stubFor(get(urlEqualTo(&quot;/someVal/$productOrderId&quot;))\r\n     .willReturn(defaultWiremockResponse()\r\n       .withBody(&quot;&quot;&quot; \r\n          {\r\n            &quot;startDateTime&quot; : ${myTime? &quot;$myTime&quot; : null}\r\n          }\r\n       &quot;&quot;&quot;\r\n    )\r\n   //...... some when\r\n   //...... some then\r\n   where:\r\n   productOrderId | myTime\r\n   &quot;1&quot;            | &quot;2023-04-23T07:13:15.862Z&quot;  \r\n   &quot;2&quot;            | &quot;null&quot; \r\n}\r\n```\r\n\r\nThis tests works for `null` but gives error for value like `&quot;2023-04-23T07:13:15.862Z&quot;`\r\n\r\n&gt; nested exception is com.fasterxml.jackson.databind.JsonMappingException: Unexpected character (&#39;-&#39; (code 45)): was expecting comma to separate Object entries\r\n\r\nI think somehow the `&quot;startDateTime&quot;` is not getting the value as wrapped around double quotes `&quot;&quot;` and getting as below \r\n\r\n```\r\n{\r\n  &quot;startDateTime&quot; : 2023-04-23T07:13:15.862Z   // missing quotes around the value\r\n}\r\n```\r\n\r\nand that could be the issue. Can someone help me understand this and fix this error for string interpolation\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c9cFH.png","title":"Use Ternary operator in Groovy ,Spock and Rest Assured Testing - Intergation Test","body":"<p>I have below code where I want to replace values based on <code>where</code> section of the test:</p>\n<pre><code>void 'should pass some test() {\n  given:\n  stubFor(get(urlEqualTo(&quot;/someVal/$productOrderId&quot;))\n     .willReturn(defaultWiremockResponse()\n       .withBody(&quot;&quot;&quot; \n          {\n            &quot;startDateTime&quot; : ${myTime? &quot;$myTime&quot; : null}\n          }\n       &quot;&quot;&quot;\n    )\n   //...... some when\n   //...... some then\n   where:\n   productOrderId | myTime\n   &quot;1&quot;            | &quot;2023-04-23T07:13:15.862Z&quot;  \n   &quot;2&quot;            | &quot;null&quot; \n}\n</code></pre>\n<p>This tests works for <code>null</code> but gives error for value like <code>&quot;2023-04-23T07:13:15.862Z&quot;</code></p>\n<blockquote>\n<p>nested exception is com.fasterxml.jackson.databind.JsonMappingException: Unexpected character ('-' (code 45)): was expecting comma to separate Object entries</p>\n</blockquote>\n<p>I think somehow the <code>&quot;startDateTime&quot;</code> is not getting the value as wrapped around double quotes <code>&quot;&quot;</code> and getting as below</p>\n<pre><code>{\n  &quot;startDateTime&quot; : 2023-04-23T07:13:15.862Z   // missing quotes around the value\n}\n</code></pre>\n<p>and that could be the issue. Can someone help me understand this and fix this error for string interpolation</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9512,"page":480,"page_size":100}
