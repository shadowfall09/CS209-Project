{"items":[{"tags":["java","if-statement"],"comments":[{"owner":{"account_id":1810644,"reputation":7223,"user_id":1646783,"accept_rate":81,"display_name":"jlars62"},"score":1,"creation_date":1674715578,"post_id":75242858,"comment_id":132774021,"body_markdown":"I am guessing you want `if((arr.get(i) - arr.get(j))==0)` instead of `if(arr.get(i) - arr.get(j)==0)`","body":"I am guessing you want <code>if((arr.get(i) - arr.get(j))==0)</code> instead of <code>if(arr.get(i) - arr.get(j)==0)</code>"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":3,"creation_date":1674715682,"post_id":75242858,"comment_id":132774036,"body_markdown":"Please don&#39;t shout. Lists can&#39;t contain primitive values, so comparing the identity may lead to surprising results.","body":"Please don&#39;t shout. Lists can&#39;t contain primitive values, so comparing the identity may lead to surprising results."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1674716625,"post_id":75242858,"comment_id":132774181,"body_markdown":"Why are you [SHOUTING](https://www.netlingo.com/word/shouting.php) at us?","body":"Why are you <a href=\"https://www.netlingo.com/word/shouting.php\" rel=\"nofollow noreferrer\">SHOUTING</a> at us?"}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1674763931,"creation_date":1674716562,"answer_id":75242997,"question_id":75242858,"body_markdown":"The two statements are not the same. Assuming that `arr` is a collection of a `Number` class (eg `List&lt;Integer&gt;`), this expression:\r\n\r\n    arr.get(i) - arr.get(j)\r\n\r\nunboxes the object to the corresponding primitive (eg `int`), then performs the arithmetic subtraction, while this expression:\r\n\r\n    arr.get(i) == arr.get(j)\r\n\r\nTests if the two object are _the same_ object (the same object reference), which is not what you want.\r\n\r\nThe correct way to test if two objects represent the same _value_ is via the `equals()` method.\r\n\r\nThe best way to fix the code is to use `equals()`, not subtraction:\r\n\r\n    arr.get(i).equals(arr.get(j))\r\n\r\n","title":"Are &quot;if (arr.get(i) - arr.get(j) == 0)&quot; and &quot;if (arr.get(i) == arr.get(j))&quot; different?","body":"<p>The two statements are not the same. Assuming that <code>arr</code> is a collection of a <code>Number</code> class (eg <code>List&lt;Integer&gt;</code>), this expression:</p>\n<pre><code>arr.get(i) - arr.get(j)\n</code></pre>\n<p>unboxes the object to the corresponding primitive (eg <code>int</code>), then performs the arithmetic subtraction, while this expression:</p>\n<pre><code>arr.get(i) == arr.get(j)\n</code></pre>\n<p>Tests if the two object are <em>the same</em> object (the same object reference), which is not what you want.</p>\n<p>The correct way to test if two objects represent the same <em>value</em> is via the <code>equals()</code> method.</p>\n<p>The best way to fix the code is to use <code>equals()</code>, not subtraction:</p>\n<pre><code>arr.get(i).equals(arr.get(j))\n</code></pre>\n"}],"owner":{"account_id":26156800,"reputation":11,"user_id":19843945,"display_name":"Shantanu Gaware"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1674906866,"answer_count":1,"score":0,"last_activity_date":1674764035,"creation_date":1674715027,"question_id":75242858,"body_markdown":"Are these 2 statements different in any way?\r\n\r\n    if (arr.get(i) - arr.get(j) == 0)\r\n    if (arr.get(i) == arr.get(j))\r\n\r\nBecause I got different passed test cases.\r\n\r\n`if (arr.get(i) == arr.get(j))` passed only 7/10 test cases. Someone changed it to `if (arr.get(i) - arr.get(j)==0)` and all test cases passed.\r\n\r\nThis was the only difference in the code.","title":"Are &quot;if (arr.get(i) - arr.get(j) == 0)&quot; and &quot;if (arr.get(i) == arr.get(j))&quot; different?","body":"<p>Are these 2 statements different in any way?</p>\n<pre><code>if (arr.get(i) - arr.get(j) == 0)\nif (arr.get(i) == arr.get(j))\n</code></pre>\n<p>Because I got different passed test cases.</p>\n<p><code>if (arr.get(i) == arr.get(j))</code> passed only 7/10 test cases. Someone changed it to <code>if (arr.get(i) - arr.get(j)==0)</code> and all test cases passed.</p>\n<p>This was the only difference in the code.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":14927040,"reputation":358,"user_id":10777578,"display_name":"Julian Kreuzer"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1674763381,"creation_date":1674763381,"answer_id":75251085,"question_id":75251035,"body_markdown":"The Problem is that you using the `%d` in `System.out.printf(&quot;Your payment is : %d&#39;\\n&#39;&quot; , pay);` the `%d` sign is used for integer&#39;s. Use `%f` for all floating point numbers instead. \r\n\r\n`System.out.printf(&quot;Your payment is : %f&#39;\\n&#39;&quot; , pay);`","title":"I met a mistake : Exception in thread &quot;main&quot; java.util.IllegalFormatConversionException: d != java.lang.Double","body":"<p>The Problem is that you using the <code>%d</code> in <code>System.out.printf(&quot;Your payment is : %d'\\n'&quot; , pay);</code> the <code>%d</code> sign is used for integer's. Use <code>%f</code> for all floating point numbers instead.</p>\n<p><code>System.out.printf(&quot;Your payment is : %f'\\n'&quot; , pay);</code></p>\n"}],"owner":{"account_id":27536158,"reputation":9,"user_id":21013761,"display_name":"Valeryin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1674765315,"answer_count":1,"score":0,"last_activity_date":1674763921,"creation_date":1674762975,"question_id":75251035,"body_markdown":"I am writing a program to compute payment.\r\n\r\nThe whole code is here :\r\n\r\n```java\r\nclass DaisyDriveIn {\r\n    double computePay(double hours){\r\n        if (hours &gt; 20) {\r\n            return 8.00 * 20 + (hours - 20) * 10.00;\r\n        } else {\r\n            return hours * 7.00;\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        DaisyDriveIn m = new DaisyDriveIn();\r\n        double pay;\r\n        pay = m.computePay(23);\r\n        System.out.printf(&quot;Your payment is : %d&#39;\\n&#39;&quot; , pay);\r\n    }\r\n}\r\n```\r\n\r\nBut it failed and gave me warning that :\r\nYour payment is : Exception in thread &quot;main&quot; java.util.IllegalFormatConversionException: d != java.lang.Double\r\n\r\nHow to fix it? Thanking you for your attention.","title":"I met a mistake : Exception in thread &quot;main&quot; java.util.IllegalFormatConversionException: d != java.lang.Double","body":"<p>I am writing a program to compute payment.</p>\n<p>The whole code is here :</p>\n<pre class=\"lang-java prettyprint-override\"><code>class DaisyDriveIn {\n    double computePay(double hours){\n        if (hours &gt; 20) {\n            return 8.00 * 20 + (hours - 20) * 10.00;\n        } else {\n            return hours * 7.00;\n        }\n    }\n\n    public static void main(String[] args) {\n        DaisyDriveIn m = new DaisyDriveIn();\n        double pay;\n        pay = m.computePay(23);\n        System.out.printf(&quot;Your payment is : %d'\\n'&quot; , pay);\n    }\n}\n</code></pre>\n<p>But it failed and gave me warning that :\nYour payment is : Exception in thread &quot;main&quot; java.util.IllegalFormatConversionException: d != java.lang.Double</p>\n<p>How to fix it? Thanking you for your attention.</p>\n"},{"tags":["java",".net","parquet"],"comments":[{"owner":{"account_id":1571062,"reputation":5218,"user_id":1458738,"accept_rate":78,"display_name":"Sal"},"score":8,"creation_date":1529427542,"post_id":50933429,"comment_id":88865495,"body_markdown":"Windows utility to open and view Parquet files: https://github.com/mukunku/ParquetViewer","body":"Windows utility to open and view Parquet files: <a href=\"https://github.com/mukunku/ParquetViewer\" rel=\"nofollow noreferrer\">github.com/mukunku/ParquetViewer</a>"},{"owner":{"account_id":8779511,"reputation":6414,"user_id":6563567,"accept_rate":100,"display_name":"ns15"},"score":0,"creation_date":1667208171,"post_id":50933429,"comment_id":131107665,"body_markdown":"DUCKDB CLI tool to view parquet data or schema - https://stackoverflow.com/a/74260936/6563567","body":"DUCKDB CLI tool to view parquet data or schema - <a href=\"https://stackoverflow.com/a/74260936/6563567\">stackoverflow.com/a/74260936/6563567</a>"}],"answers":[{"comments":[{"owner":{"account_id":1412466,"reputation":8275,"user_id":1338797,"display_name":"Tomasz Gandor"},"score":3,"creation_date":1575020572,"post_id":50933430,"comment_id":104436771,"body_markdown":"I couldn&#39;t find any information about file extension for Parquet files elsewhere. I think I&#39;ll go with `.parquet` ;)","body":"I couldn&#39;t find any information about file extension for Parquet files elsewhere. I think I&#39;ll go with <code>.parquet</code> ;)"},{"owner":{"account_id":292051,"reputation":4849,"user_id":594571,"accept_rate":63,"display_name":"Shahar Prish"},"score":2,"creation_date":1618241073,"post_id":50933430,"comment_id":118536633,"body_markdown":"The ParquetViewer has been able to open almost none of my files .:(","body":"The ParquetViewer has been able to open almost none of my files .:("},{"owner":{"account_id":1571062,"reputation":5218,"user_id":1458738,"accept_rate":78,"display_name":"Sal"},"score":1,"creation_date":1618345157,"post_id":50933430,"comment_id":118573222,"body_markdown":"@ShaharPrish I would open an issue ticket in the repo with some sample files.","body":"@ShaharPrish I would open an issue ticket in the repo with some sample files."}],"tags":[],"owner":{"account_id":1571062,"reputation":5218,"user_id":1458738,"accept_rate":78,"display_name":"Sal"},"comment_count":3,"down_vote_count":2,"up_vote_count":91,"is_accepted":true,"score":89,"last_activity_date":1550170848,"creation_date":1529427344,"answer_id":50933430,"question_id":50933429,"body_markdown":" \r\n\r\nWhat is Apache Parquet?\r\n=======================\r\n\r\n\r\nApache Parquet is a binary file format that stores data in a columnar fashion. \r\nData inside a Parquet file is similar to an RDBMS style table where you have columns and rows. But instead of accessing the data one row at a time, you typically access it one column at a time.\r\n\r\nApache Parquet is one of the modern big data storage formats. It has several advantages, some of which are:\r\n\r\n - **Columnar storage**: efficient data retrieval, efficient compression, etc...\r\n - **Metadata is at the end of the file**: allows Parquet files to be generated from a stream of data. (common in big data scenarios)\r\n - **Supported by all Apache big data products**\r\n\r\n\r\n## Do I need Hadoop or HDFS? ##\r\nNo. Parquet files can be stored in any file system, not just HDFS. As mentioned above it is a file format. So it&#39;s just like any other file where it has a name and a **.parquet** extension. What will usually happen in big data environments though is that one dataset will be split (or partitioned) into multiple parquet files for even more efficiency.\r\n\r\nAll Apache big data products support Parquet files by default. So that is why it might seem like it only can exist in the Apache ecosystem.\r\n\r\n## How can I create/read Parquet Files? ##\r\nAs mentioned, all current Apache big data products such as Hadoop, Hive, Spark, etc. support Parquet files by default.\r\n\r\nSo it&#39;s possible to leverage these systems to generate or read Parquet data. But this is far from practical. Imagine that in order to read or create a CSV file you had to install Hadoop/HDFS + Hive and configure them. Luckily there are other solutions. \r\n\r\n**To create your own parquet files:**\r\n\r\n - In Java please see my following post: [Generate Parquet File using Java][1] \r\n - In .NET please see the following library: [parquet-dotnet][2]\r\n\r\n**To view parquet file contents:**\r\n\r\n - Please try the following Windows utility: https://github.com/mukunku/ParquetViewer\r\n\r\n**Are there other methods?**\r\n\r\nPossibly. But not many exist and they mostly aren&#39;t well documented. This is due to Parquet being a very complicated file format (I could not even find a formal definition). The ones I&#39;ve listed are the only ones I&#39;m aware of as I&#39;m writing this response\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/47355038/how-to-generate-parquet-file-using-pure-java-including-date-decimal-types-an\r\n  [2]: https://github.com/elastacloud/parquet-dotnet","title":"How to view Apache Parquet file in Windows?","body":"<h1>What is Apache Parquet?</h1>\n\n<p>Apache Parquet is a binary file format that stores data in a columnar fashion. \nData inside a Parquet file is similar to an RDBMS style table where you have columns and rows. But instead of accessing the data one row at a time, you typically access it one column at a time.</p>\n\n<p>Apache Parquet is one of the modern big data storage formats. It has several advantages, some of which are:</p>\n\n<ul>\n<li><strong>Columnar storage</strong>: efficient data retrieval, efficient compression, etc...</li>\n<li><strong>Metadata is at the end of the file</strong>: allows Parquet files to be generated from a stream of data. (common in big data scenarios)</li>\n<li><strong>Supported by all Apache big data products</strong></li>\n</ul>\n\n<h2>Do I need Hadoop or HDFS?</h2>\n\n<p>No. Parquet files can be stored in any file system, not just HDFS. As mentioned above it is a file format. So it's just like any other file where it has a name and a <strong>.parquet</strong> extension. What will usually happen in big data environments though is that one dataset will be split (or partitioned) into multiple parquet files for even more efficiency.</p>\n\n<p>All Apache big data products support Parquet files by default. So that is why it might seem like it only can exist in the Apache ecosystem.</p>\n\n<h2>How can I create/read Parquet Files?</h2>\n\n<p>As mentioned, all current Apache big data products such as Hadoop, Hive, Spark, etc. support Parquet files by default.</p>\n\n<p>So it's possible to leverage these systems to generate or read Parquet data. But this is far from practical. Imagine that in order to read or create a CSV file you had to install Hadoop/HDFS + Hive and configure them. Luckily there are other solutions. </p>\n\n<p><strong>To create your own parquet files:</strong></p>\n\n<ul>\n<li>In Java please see my following post: <a href=\"https://stackoverflow.com/questions/47355038/how-to-generate-parquet-file-using-pure-java-including-date-decimal-types-an\">Generate Parquet File using Java</a> </li>\n<li>In .NET please see the following library: <a href=\"https://github.com/elastacloud/parquet-dotnet\" rel=\"noreferrer\">parquet-dotnet</a></li>\n</ul>\n\n<p><strong>To view parquet file contents:</strong></p>\n\n<ul>\n<li>Please try the following Windows utility: <a href=\"https://github.com/mukunku/ParquetViewer\" rel=\"noreferrer\">https://github.com/mukunku/ParquetViewer</a></li>\n</ul>\n\n<p><strong>Are there other methods?</strong></p>\n\n<p>Possibly. But not many exist and they mostly aren't well documented. This is due to Parquet being a very complicated file format (I could not even find a formal definition). The ones I've listed are the only ones I'm aware of as I'm writing this response</p>\n"},{"tags":[],"owner":{"account_id":3496870,"reputation":71,"user_id":3999862,"display_name":"nirolo"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1585590941,"creation_date":1550093188,"answer_id":54679698,"question_id":50933429,"body_markdown":"In addition to @sal&#39;s extensive answer there is one further question I encountered in this context:\r\n\r\n## How can I access the data in a parquet file with SQL?\r\nAs we are still in the Windows context here, I know of not that many ways to do that. The best results were achieved by using [Spark][1] as the SQL engine with [Python][2] as interface to Spark. However, I assume that the [Zeppelin][3] environment works as well, but did not try that out myself yet.\r\n\r\n[There is very well done guide by Michael Garlanyk][4] to guide one through the installation of the Spark/Python combination.\r\n\r\nOnce set up, I&#39;m able to interact with parquets through:\r\n```python\r\nfrom os import walk\r\nfrom pyspark.sql import SQLContext\r\n\r\nsc = SparkContext.getOrCreate()\r\nsqlContext = SQLContext(sc)\r\n\r\nparquetdir = r&#39;C:\\PATH\\TO\\YOUR\\PARQUET\\FILES&#39;\r\n\r\n# Getting all parquet files in a dir as spark contexts.\r\n# There might be more easy ways to access single parquets, but I had nested dirs\r\ndirpath, dirnames, filenames = next(walk(parquetdir), (None, [], []))\r\n\r\n# for each parquet file, i.e. table in our database, spark creates a tempview with\r\n# the respective table name equal the parquet filename\r\nprint(&#39;New tables available: \\n&#39;)\r\n\r\nfor parquet in filenames:\r\n    print(parquet[:-8])\r\n    spark.read.parquet(parquetdir+&#39;\\\\&#39;+parquet).createOrReplaceTempView(parquet[:-8])\r\n```\r\n\r\nOnce loaded your parquets this way, you can interact with the Pyspark API e.g. via:\r\n\r\n```python\r\nmy_test_query = spark.sql(&quot;&quot;&quot;\r\nselect\r\n  field1,\r\n  field2\r\nfrom parquetfilename1\r\nwhere\r\n  field1 = &#39;something&#39;\r\n&quot;&quot;&quot;)\r\n\r\nmy_test_query.show()\r\n```\r\n\r\n  [1]: https://spark.apache.org/\r\n  [2]: https://spark.apache.org/docs/latest/api/python/\r\n  [3]: https://zeppelin.apache.org/\r\n  [4]: https://medium.com/@GalarnykMichael/install-spark-on-windows-pyspark-4498a5d8d66c","title":"How to view Apache Parquet file in Windows?","body":"<p>In addition to @sal's extensive answer there is one further question I encountered in this context:</p>\n\n<h2>How can I access the data in a parquet file with SQL?</h2>\n\n<p>As we are still in the Windows context here, I know of not that many ways to do that. The best results were achieved by using <a href=\"https://spark.apache.org/\" rel=\"nofollow noreferrer\">Spark</a> as the SQL engine with <a href=\"https://spark.apache.org/docs/latest/api/python/\" rel=\"nofollow noreferrer\">Python</a> as interface to Spark. However, I assume that the <a href=\"https://zeppelin.apache.org/\" rel=\"nofollow noreferrer\">Zeppelin</a> environment works as well, but did not try that out myself yet.</p>\n\n<p><a href=\"https://medium.com/@GalarnykMichael/install-spark-on-windows-pyspark-4498a5d8d66c\" rel=\"nofollow noreferrer\">There is very well done guide by Michael Garlanyk</a> to guide one through the installation of the Spark/Python combination.</p>\n\n<p>Once set up, I'm able to interact with parquets through:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from os import walk\nfrom pyspark.sql import SQLContext\n\nsc = SparkContext.getOrCreate()\nsqlContext = SQLContext(sc)\n\nparquetdir = r'C:\\PATH\\TO\\YOUR\\PARQUET\\FILES'\n\n# Getting all parquet files in a dir as spark contexts.\n# There might be more easy ways to access single parquets, but I had nested dirs\ndirpath, dirnames, filenames = next(walk(parquetdir), (None, [], []))\n\n# for each parquet file, i.e. table in our database, spark creates a tempview with\n# the respective table name equal the parquet filename\nprint('New tables available: \\n')\n\nfor parquet in filenames:\n    print(parquet[:-8])\n    spark.read.parquet(parquetdir+'\\\\'+parquet).createOrReplaceTempView(parquet[:-8])\n</code></pre>\n\n<p>Once loaded your parquets this way, you can interact with the Pyspark API e.g. via:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>my_test_query = spark.sql(\"\"\"\nselect\n  field1,\n  field2\nfrom parquetfilename1\nwhere\n  field1 = 'something'\n\"\"\")\n\nmy_test_query.show()\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3838953,"reputation":2411,"user_id":3182598,"display_name":"nomadSK25"},"score":1,"creation_date":1668807557,"post_id":54915243,"comment_id":131504199,"body_markdown":"As of 2022, this is the only way to read parquet file in mac OS as parquet-tools is deprecated and even jar file is not working.","body":"As of 2022, this is the only way to read parquet file in mac OS as parquet-tools is deprecated and even jar file is not working."},{"owner":{"account_id":8461,"reputation":346,"user_id":15267,"display_name":"timvw"},"score":1,"creation_date":1671907952,"post_id":54915243,"comment_id":132196190,"body_markdown":"I have created [qv](https://github.com/timvw/qv) which has builds for macos, windows and linux...","body":"I have created <a href=\"https://github.com/timvw/qv\" rel=\"nofollow noreferrer\">qv</a> which has builds for macos, windows and linux..."}],"tags":[],"owner":{"account_id":6772956,"reputation":2102,"user_id":6313007,"accept_rate":92,"display_name":"meow"},"comment_count":2,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1588249065,"creation_date":1551305149,"answer_id":54915243,"question_id":50933429,"body_markdown":"This is possible now through [Apache Arrow](https://arrow.apache.org/), which helps to simplify communication/transfer between different data formats, see my answer [here](https://stackoverflow.com/questions/29279865/parquet-without-hadoop/54915105#54915105) or the [official docs](https://arrow.apache.org/docs/python/parquet.html) in case of Python.\r\n\r\nBasically this allows you to quickly read/ write parquet files in a pandas `DataFrame` like fashion giving you the benefits of using `notebooks` to view and handle such files like it was a regular `csv` file.\r\n\r\nEDIT: \r\n\r\nAs an example, given the latest version of `Pandas`, make sure `pyarrow` is installed:\r\n\r\n\r\nThen you can simply use pandas to manipulate parquet files:\r\n\r\n```python\r\nimport pandas as pd\r\n\r\n# read\r\ndf = pd.read_parquet(&#39;myfile.parquet&#39;)\r\n\r\n# write\r\ndf.to_parquet(&#39;my_newfile.parquet&#39;)\r\n\r\ndf.head()\r\n```","title":"How to view Apache Parquet file in Windows?","body":"<p>This is possible now through <a href=\"https://arrow.apache.org/\" rel=\"noreferrer\">Apache Arrow</a>, which helps to simplify communication/transfer between different data formats, see my answer <a href=\"https://stackoverflow.com/questions/29279865/parquet-without-hadoop/54915105#54915105\">here</a> or the <a href=\"https://arrow.apache.org/docs/python/parquet.html\" rel=\"noreferrer\">official docs</a> in case of Python.</p>\n\n<p>Basically this allows you to quickly read/ write parquet files in a pandas <code>DataFrame</code> like fashion giving you the benefits of using <code>notebooks</code> to view and handle such files like it was a regular <code>csv</code> file.</p>\n\n<p>EDIT: </p>\n\n<p>As an example, given the latest version of <code>Pandas</code>, make sure <code>pyarrow</code> is installed:</p>\n\n<p>Then you can simply use pandas to manipulate parquet files:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\n# read\ndf = pd.read_parquet('myfile.parquet')\n\n# write\ndf.to_parquet('my_newfile.parquet')\n\ndf.head()\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5286751,"reputation":61,"user_id":4220503,"accept_rate":0,"display_name":"Davide Scicolone"},"score":1,"creation_date":1590767195,"post_id":60139397,"comment_id":109814901,"body_markdown":"I cannot read big files (parquet about 116MB) since it holds and the file is not shown...","body":"I cannot read big files (parquet about 116MB) since it holds and the file is not shown..."},{"owner":{"account_id":4116853,"reputation":10757,"user_id":3378204,"accept_rate":91,"display_name":"Eugene"},"score":0,"creation_date":1590991384,"post_id":60139397,"comment_id":109878150,"body_markdown":"@DavideScicolone Thanks for your feedback, may I know could you pls submit a issue at the git repo and provides us where we can download the file which you can&#39;t open?","body":"@DavideScicolone Thanks for your feedback, may I know could you pls submit a issue at the git repo and provides us where we can download the file which you can&#39;t open?"},{"owner":{"account_id":4570754,"reputation":1810,"user_id":3710514,"accept_rate":50,"display_name":"J&#233;r&#233;my"},"score":1,"creation_date":1622709321,"post_id":60139397,"comment_id":119871036,"body_markdown":"I created an issue on GitHub because I cannot read my parquet files: `INT96 is not implemented` They are generated files from pyspark 2.4.3","body":"I created an issue on GitHub because I cannot read my parquet files: <code>INT96 is not implemented</code> They are generated files from pyspark 2.4.3"}],"tags":[],"owner":{"account_id":4116853,"reputation":10757,"user_id":3378204,"accept_rate":91,"display_name":"Eugene"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1581523380,"creation_date":1581269839,"answer_id":60139397,"question_id":50933429,"body_markdown":"Maybe too late for this thread, just make some complement for anyone who wants to view Parquet file with a desktop application running on MAC or Linux.    \r\nThere is a desktop application to view [Parquet][1] and also other binary format data like [ORC][2] and [AVRO][3]. It&#39;s pure Java application so that can be run at Linux, Mac and also Windows. Please check [Bigdata File Viewer][4] for details. \r\n\r\nIt supports complex data type like array, map, etc.\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://parquet.apache.org/\r\n  [2]: https://orc.apache.org/\r\n  [3]: https://avro.apache.org/\r\n  [4]: https://github.com/Eugene-Mark/bigdata-file-viewer\r\n  [5]: https://i.stack.imgur.com/mCU8z.png","title":"How to view Apache Parquet file in Windows?","body":"<p>Maybe too late for this thread, just make some complement for anyone who wants to view Parquet file with a desktop application running on MAC or Linux.<br>\nThere is a desktop application to view <a href=\"https://parquet.apache.org/\" rel=\"noreferrer\">Parquet</a> and also other binary format data like <a href=\"https://orc.apache.org/\" rel=\"noreferrer\">ORC</a> and <a href=\"https://avro.apache.org/\" rel=\"noreferrer\">AVRO</a>. It's pure Java application so that can be run at Linux, Mac and also Windows. Please check <a href=\"https://github.com/Eugene-Mark/bigdata-file-viewer\" rel=\"noreferrer\">Bigdata File Viewer</a> for details. </p>\n\n<p>It supports complex data type like array, map, etc.</p>\n\n<p><a href=\"https://i.stack.imgur.com/mCU8z.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mCU8z.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"account_id":1571062,"reputation":5218,"user_id":1458738,"accept_rate":78,"display_name":"Sal"},"score":4,"creation_date":1613582874,"post_id":65282744,"comment_id":117121674,"body_markdown":"Thanks for the info. It&#39;s indeed worth mentioning that Parquet files are immutable. So to make any changes to the file contents a whole new file would need to be created. So write once and read many makes the most sense. Although it is possible to optimize writes by partitioning the data into separate parquet files based on a certain key.","body":"Thanks for the info. It&#39;s indeed worth mentioning that Parquet files are immutable. So to make any changes to the file contents a whole new file would need to be created. So write once and read many makes the most sense. Although it is possible to optimize writes by partitioning the data into separate parquet files based on a certain key."}],"tags":[],"owner":{"account_id":10715290,"reputation":477,"user_id":7886174,"display_name":"RaHuL VeNuGoPaL  "},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1607911553,"creation_date":1607911553,"answer_id":65282744,"question_id":50933429,"body_markdown":"On Mac if we want to view the content we can install  &#39;parquet-tools&#39;\r\n\r\n - brew install parquet-tools\r\n - parquet-tools head filename\r\n\r\nWe can always read the parquet file to a dataframe in Spark and see the content.\r\n\r\nThey are of columnar formats and are more suitable for analytical environments,write once and read many. Parquet files are more suitable for Read intensive applications.\r\n ","title":"How to view Apache Parquet file in Windows?","body":"<p>On Mac if we want to view the content we can install  'parquet-tools'</p>\n<ul>\n<li>brew install parquet-tools</li>\n<li>parquet-tools head filename</li>\n</ul>\n<p>We can always read the parquet file to a dataframe in Spark and see the content.</p>\n<p>They are of columnar formats and are more suitable for analytical environments,write once and read many. Parquet files are more suitable for Read intensive applications.</p>\n"},{"comments":[{"owner":{"account_id":37565,"reputation":77454,"user_id":107409,"accept_rate":83,"display_name":"Contango"},"score":1,"creation_date":1642949776,"post_id":68067859,"comment_id":125204407,"body_markdown":"Use `where python` to find the path to python. Run a DOS Admin prompt (not Powershell). If there is a pre-existing file association, right click on any `.parquet` file, select `Open With ... Choose Another App` and select `parquetfile`. It&#39;s very slow with 100MB+ files.","body":"Use <code>where python</code> to find the path to python. Run a DOS Admin prompt (not Powershell). If there is a pre-existing file association, right click on any <code>.parquet</code> file, select <code>Open With ... Choose Another App</code> and select <code>parquetfile</code>. It&#39;s very slow with 100MB+ files."}],"tags":[],"owner":{"account_id":10470,"reputation":3179,"user_id":19808,"accept_rate":95,"display_name":"Enrico Detoma"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1626682808,"creation_date":1624278115,"answer_id":68067859,"question_id":50933429,"body_markdown":"Here&#39;s a quick &quot;hack&quot; to show **single table** parquet files using Python in Windows (I use Anaconda Python):\r\n\r\n - Install `pyarrow` package https://pypi.org/project/pyarrow/\r\n - Install `pandasgui` package https://pypi.org/project/pandasgui/\r\n - Create this simple script `parquet_viewer.py`:\r\n\r\n       import pandas as pd\r\n       from pandasgui import show\r\n       import sys\r\n       import os\r\n\r\n       dfs = {}\r\n       for fn in sys.argv[1:]:\r\n           dfs[os.path.basename(fn)] = pd.read_parquet(fn)\r\n       show(**dfs)\r\n - Associate `.parquet` file extension by running these commands as administrator (of course you need to adapth the paths to your Python installation):\r\n\r\n       assoc .parquet=parquetfile\r\n       ftype parquetfile=&quot;c:\\Python3\\python.exe&quot; &quot;\\&lt;path to&gt;\\parquet_viewer.py&quot; &quot;%1&quot;\r\nThis will allow to open parquet files compressed with compression formats (e.g. Zstd) not supported by the .NET viewer in @Sal&#39;s answer.","title":"How to view Apache Parquet file in Windows?","body":"<p>Here's a quick &quot;hack&quot; to show <strong>single table</strong> parquet files using Python in Windows (I use Anaconda Python):</p>\n<ul>\n<li><p>Install <code>pyarrow</code> package <a href=\"https://pypi.org/project/pyarrow/\" rel=\"noreferrer\">https://pypi.org/project/pyarrow/</a></p>\n</li>\n<li><p>Install <code>pandasgui</code> package <a href=\"https://pypi.org/project/pandasgui/\" rel=\"noreferrer\">https://pypi.org/project/pandasgui/</a></p>\n</li>\n<li><p>Create this simple script <code>parquet_viewer.py</code>:</p>\n<pre><code>import pandas as pd\nfrom pandasgui import show\nimport sys\nimport os\n\ndfs = {}\nfor fn in sys.argv[1:]:\n    dfs[os.path.basename(fn)] = pd.read_parquet(fn)\nshow(**dfs)\n</code></pre>\n</li>\n<li><p>Associate <code>.parquet</code> file extension by running these commands as administrator (of course you need to adapth the paths to your Python installation):</p>\n<pre><code>assoc .parquet=parquetfile\nftype parquetfile=&quot;c:\\Python3\\python.exe&quot; &quot;\\&lt;path to&gt;\\parquet_viewer.py&quot; &quot;%1&quot;\n</code></pre>\n</li>\n</ul>\n<p>This will allow to open parquet files compressed with compression formats (e.g. Zstd) not supported by the .NET viewer in @Sal's answer.</p>\n"},{"tags":[],"owner":{"account_id":22219355,"reputation":223,"user_id":16524074,"display_name":"Mickle-The-Pickle"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633121875,"creation_date":1633121875,"answer_id":69411918,"question_id":50933429,"body_markdown":"This link allows you to view small parquet files:\r\nhttp://parquet-viewer-online.com/\r\n\r\nIt was originally submitted by Rodrigo Lozano. This site is based on the github project here: https://github.com/elastacloud/parquet-dotnet","title":"How to view Apache Parquet file in Windows?","body":"<p>This link allows you to view small parquet files:\n<a href=\"http://parquet-viewer-online.com/\" rel=\"nofollow noreferrer\">http://parquet-viewer-online.com/</a></p>\n<p>It was originally submitted by Rodrigo Lozano. This site is based on the github project here: <a href=\"https://github.com/elastacloud/parquet-dotnet\" rel=\"nofollow noreferrer\">https://github.com/elastacloud/parquet-dotnet</a></p>\n"},{"tags":[],"owner":{"account_id":7130641,"reputation":8139,"user_id":5452008,"accept_rate":0,"display_name":"Soerendip"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658432906,"creation_date":1658432906,"answer_id":73071875,"question_id":50933429,"body_markdown":"There is a plugin for Excel that allows to connect to qarquet files, but it is behind a paywall:\r\n\r\nhttps://www.cdata.com/drivers/parquet/excel/","title":"How to view Apache Parquet file in Windows?","body":"<p>There is a plugin for Excel that allows to connect to qarquet files, but it is behind a paywall:</p>\n<p><a href=\"https://www.cdata.com/drivers/parquet/excel/\" rel=\"nofollow noreferrer\">https://www.cdata.com/drivers/parquet/excel/</a></p>\n"},{"comments":[{"owner":{"account_id":3362884,"reputation":449,"user_id":3102039,"accept_rate":67,"display_name":"ADataGMan"},"score":2,"creation_date":1684350100,"post_id":74010343,"comment_id":134507170,"body_markdown":"The DBeaver solution worked immediately. It took me longer to watch the part of the video I needed.\n\nSteps for those who don&#39;t want watch:\nConnect to DuckDB &gt; Set Path to `:memory:` &gt; `select * from &quot;d:\\folder\\file_00.parquet&quot;`","body":"The DBeaver solution worked immediately. It took me longer to watch the part of the video I needed.  Steps for those who don&#39;t want watch: Connect to DuckDB &gt; Set Path to <code>:memory:</code> &gt; <code>select * from &quot;d:\\folder\\file_00.parquet&quot;</code>"},{"owner":{"account_id":10062911,"reputation":1019,"user_id":7438905,"display_name":"Chen Ni"},"score":0,"creation_date":1701065155,"post_id":74010343,"comment_id":136724124,"body_markdown":"Weird that DBeaver + DuckDB solution doesn&#39;t work for me on mac","body":"Weird that DBeaver + DuckDB solution doesn&#39;t work for me on mac"}],"tags":[],"owner":{"account_id":8779511,"reputation":6414,"user_id":6563567,"accept_rate":100,"display_name":"ns15"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1667208418,"creation_date":1665377615,"answer_id":74010343,"question_id":50933429,"body_markdown":"&gt; Do I need Hadoop or HDFS to view/create/store them?\r\n\r\nNo. Can be done using a library from your favorite language. Ex: With Python you can use. **PyArrow**, **FastParquet**, **pandas**.\r\n\r\n\r\n&gt; How can I view parquet files? How can I create parquet files?\r\n\r\n(**GUI option for Windows, Linux, MAC**)\r\n\r\nYou can use **DBeaver** to view parquet data, view metadata and statistics, run sql query on one or multiple files, generate new parquet files etc..\r\n\r\nDBeaver leverages DuckDB driver to perform operations on parquet file.\r\n\r\nSimply create an [in-memory instance of DuckDB][1] using Dbeaver and run the queries like mentioned in this [document][2].\r\n\r\nHere is a Youtube video that explains this - https://youtu.be/j9_YmAKSHoA\r\n\r\n[![enter image description here][3]][3]\r\n\r\n**Alternative:**\r\nDuckDB [CLI tool usage][4]\r\n\r\n\r\n  [1]: https://duckdb.org/docs/guides/sql_editors/dbeaver\r\n  [2]: https://duckdb.org/docs/data/parquet\r\n  [3]: https://i.stack.imgur.com/vOheO.png\r\n  [4]: https://stackoverflow.com/a/74260936/6563567","title":"How to view Apache Parquet file in Windows?","body":"<blockquote>\n<p>Do I need Hadoop or HDFS to view/create/store them?</p>\n</blockquote>\n<p>No. Can be done using a library from your favorite language. Ex: With Python you can use. <strong>PyArrow</strong>, <strong>FastParquet</strong>, <strong>pandas</strong>.</p>\n<blockquote>\n<p>How can I view parquet files? How can I create parquet files?</p>\n</blockquote>\n<p>(<strong>GUI option for Windows, Linux, MAC</strong>)</p>\n<p>You can use <strong>DBeaver</strong> to view parquet data, view metadata and statistics, run sql query on one or multiple files, generate new parquet files etc..</p>\n<p>DBeaver leverages DuckDB driver to perform operations on parquet file.</p>\n<p>Simply create an <a href=\"https://duckdb.org/docs/guides/sql_editors/dbeaver\" rel=\"noreferrer\">in-memory instance of DuckDB</a> using Dbeaver and run the queries like mentioned in this <a href=\"https://duckdb.org/docs/data/parquet\" rel=\"noreferrer\">document</a>.</p>\n<p>Here is a Youtube video that explains this - <a href=\"https://youtu.be/j9_YmAKSHoA\" rel=\"noreferrer\">https://youtu.be/j9_YmAKSHoA</a></p>\n<p><a href=\"https://i.stack.imgur.com/vOheO.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vOheO.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Alternative:</strong>\nDuckDB <a href=\"https://stackoverflow.com/a/74260936/6563567\">CLI tool usage</a></p>\n"},{"tags":[],"owner":{"account_id":1904855,"reputation":3361,"user_id":1719931,"accept_rate":40,"display_name":"robertspierre"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665833565,"creation_date":1665833565,"answer_id":74079053,"question_id":50933429,"body_markdown":"You can view Parquet files on Windows / MacOS / Linux by having DBeaver connect to an Apache Drill instance through the JDBC interface of the latter:\r\n\r\n1. [Download Apache Drill](https://drill.apache.org/download/)\r\n\r\n    Choose the links for &quot;non-Hadoop environments&quot;. \r\n\r\n    Click either on &quot;Find an Apache Mirror&quot; or &quot;Direct File Download&quot;, not on &quot;Client Drivers (ODBC/JDBC)&quot;\r\n\r\n2. Extract the file\r\n\r\n    `tar -xzvf apache-drill-1.20.2.tar.gz`\r\n\r\n3. cd in the extracted folder and run Apache Drill in embedded mode:\r\n\r\n    ```bash\r\n    cd apache-drill-1.20.2/\r\n    bin/drill-embedded\r\n    ```\r\n\r\n    You should end up at a prompt saying `apache drill&gt;` with no errors.\r\n\r\n    Make sure the server is running by connecting from your web browser to the web interface of Apache Drill at `http://localhost:8047/`.\r\n\r\n4. Download [DBeaver](https://dbeaver.io/)\r\n\r\n5. From DBeaver, click on File -&gt; New, under the &quot;DBeaver&quot; folder, select &quot;Database Connection&quot;, then click &quot;Next&quot;\r\n\r\n6. Select &quot;Apache Drill&quot; and click &quot;Next&quot;\r\n\r\n7. In the connection settings, under the &quot;Main&quot; tab:\r\n\r\n    In &quot;Connect by:&quot; select &quot;URL&quot;\r\n\r\n    In &quot;JDBC URL:&quot;, write &quot;jdbc:drill:drillbit=localhost&quot;\r\n\r\n    In username, write &quot;admin&quot;\r\n\r\n    In password, write &quot;admin&quot;\r\n\r\n    Click &quot;OK&quot;\r\n\r\n8. Now to view your parquet database, click on &quot;SQL Editor&quot; -&gt; &quot;Open SQL script&quot;, write:\r\n\r\n    ```sql\r\n    SELECT * \r\n    FROM `dfs`.`[PATH_TO_PARQUET_FILE]` \r\n    LIMIT 10;\r\n    ```\r\n\r\n    and click the play button.\r\n\r\nDone!\r\n\r\n","title":"How to view Apache Parquet file in Windows?","body":"<p>You can view Parquet files on Windows / MacOS / Linux by having DBeaver connect to an Apache Drill instance through the JDBC interface of the latter:</p>\n<ol>\n<li><p><a href=\"https://drill.apache.org/download/\" rel=\"nofollow noreferrer\">Download Apache Drill</a></p>\n<p>Choose the links for &quot;non-Hadoop environments&quot;.</p>\n<p>Click either on &quot;Find an Apache Mirror&quot; or &quot;Direct File Download&quot;, not on &quot;Client Drivers (ODBC/JDBC)&quot;</p>\n</li>\n<li><p>Extract the file</p>\n<p><code>tar -xzvf apache-drill-1.20.2.tar.gz</code></p>\n</li>\n<li><p>cd in the extracted folder and run Apache Drill in embedded mode:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>cd apache-drill-1.20.2/\nbin/drill-embedded\n</code></pre>\n<p>You should end up at a prompt saying <code>apache drill&gt;</code> with no errors.</p>\n<p>Make sure the server is running by connecting from your web browser to the web interface of Apache Drill at <code>http://localhost:8047/</code>.</p>\n</li>\n<li><p>Download <a href=\"https://dbeaver.io/\" rel=\"nofollow noreferrer\">DBeaver</a></p>\n</li>\n<li><p>From DBeaver, click on File -&gt; New, under the &quot;DBeaver&quot; folder, select &quot;Database Connection&quot;, then click &quot;Next&quot;</p>\n</li>\n<li><p>Select &quot;Apache Drill&quot; and click &quot;Next&quot;</p>\n</li>\n<li><p>In the connection settings, under the &quot;Main&quot; tab:</p>\n<p>In &quot;Connect by:&quot; select &quot;URL&quot;</p>\n<p>In &quot;JDBC URL:&quot;, write &quot;jdbc:drill:drillbit=localhost&quot;</p>\n<p>In username, write &quot;admin&quot;</p>\n<p>In password, write &quot;admin&quot;</p>\n<p>Click &quot;OK&quot;</p>\n</li>\n<li><p>Now to view your parquet database, click on &quot;SQL Editor&quot; -&gt; &quot;Open SQL script&quot;, write:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * \nFROM `dfs`.`[PATH_TO_PARQUET_FILE]` \nLIMIT 10;\n</code></pre>\n<p>and click the play button.</p>\n</li>\n</ol>\n<p>Done!</p>\n"},{"tags":[],"owner":{"account_id":29825,"reputation":5057,"user_id":80858,"accept_rate":44,"display_name":"Ivan G."},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1674763800,"creation_date":1674763800,"answer_id":75251140,"question_id":50933429,"body_markdown":"You can view it with web assembly app completely in browser https://parquetdbg.aloneguid.uk/","title":"How to view Apache Parquet file in Windows?","body":"<p>You can view it with web assembly app completely in browser <a href=\"https://parquetdbg.aloneguid.uk/\" rel=\"nofollow noreferrer\">https://parquetdbg.aloneguid.uk/</a></p>\n"}],"owner":{"account_id":1571062,"reputation":5218,"user_id":1458738,"accept_rate":78,"display_name":"Sal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235263,"favorite_count":0,"down_vote_count":3,"up_vote_count":72,"closed_date":1674766293,"accepted_answer_id":50933430,"answer_count":11,"score":69,"last_activity_date":1674763800,"creation_date":1529427344,"question_id":50933429,"body_markdown":"I couldn&#39;t find any plain English explanations regarding Apache Parquet files. Such as:\r\n\r\n 1. What are they?\r\n 2. Do I need Hadoop or HDFS to view/create/store them?\r\n 3. How can I create parquet files?\r\n 4. How can I view parquet files?\r\n\r\nAny help regarding these questions is appreciated.","title":"How to view Apache Parquet file in Windows?","body":"<p>I couldn't find any plain English explanations regarding Apache Parquet files. Such as:</p>\n\n<ol>\n<li>What are they?</li>\n<li>Do I need Hadoop or HDFS to view/create/store them?</li>\n<li>How can I create parquet files?</li>\n<li>How can I view parquet files?</li>\n</ol>\n\n<p>Any help regarding these questions is appreciated.</p>\n"},{"tags":["java","web-scraping","youtube","jsoup","youtube-data-api"],"answers":[{"tags":[],"owner":{"account_id":9593777,"reputation":3971,"user_id":7123660,"display_name":"Benjamin Loison"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674763235,"creation_date":1632169791,"answer_id":69260457,"question_id":67349029,"body_markdown":"There are two possibilities:\r\n\r\n1. Click on the &quot;accept&quot; button for cookies with your web scraper (Selenium does it well)\r\n2. Manually click on &quot;accept&quot; and then refresh the webpage while checking the `Network` tab of your web browser with &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Shift&lt;/kbd&gt;  +&lt;kbd&gt;E&lt;/kbd&gt;. Copy as cURL with and without having clicked on the &quot;accept&quot; button you will find the difference and what parameter to provide to your web scraper to express your consent and bypass this menu.","title":"Using Jsoup to scrape Youtube","body":"<p>There are two possibilities:</p>\n<ol>\n<li>Click on the &quot;accept&quot; button for cookies with your web scraper (Selenium does it well)</li>\n<li>Manually click on &quot;accept&quot; and then refresh the webpage while checking the <code>Network</code> tab of your web browser with <kbd>Ctrl</kbd> + <kbd>Shift</kbd>  +<kbd>E</kbd>. Copy as cURL with and without having clicked on the &quot;accept&quot; button you will find the difference and what parameter to provide to your web scraper to express your consent and bypass this menu.</li>\n</ol>\n"}],"owner":{"account_id":13760108,"reputation":21,"user_id":9930062,"display_name":"Karsten Schindler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1674763235,"creation_date":1619889901,"question_id":67349029,"body_markdown":"I am trying to get some data from Youtube videos that the Youtube Data API doesn&#39;t provide. (Music Metadata when you press Read More)\r\n\r\nJsoup seems to be the right library to gather this data. I try to get the Document Object by calling&lt;br/&gt;\r\n```java\r\nJsoup.connect(videoUrl).get()\r\n```\r\nThe problem now is that I always get the page where you get redirected to, to accept cookies. \r\nI also tried adding the userAgent but it didn&#39;t work. \r\n\r\nDoes anybody know how to get past the cookie page with Jsoup?&lt;br/&gt;\r\nOr maybe any other idea to gather the music metadata\r\n\r\nThanks","title":"Using Jsoup to scrape Youtube","body":"<p>I am trying to get some data from Youtube videos that the Youtube Data API doesn't provide. (Music Metadata when you press Read More)</p>\n<p>Jsoup seems to be the right library to gather this data. I try to get the Document Object by calling<br/></p>\n<pre class=\"lang-java prettyprint-override\"><code>Jsoup.connect(videoUrl).get()\n</code></pre>\n<p>The problem now is that I always get the page where you get redirected to, to accept cookies.\nI also tried adding the userAgent but it didn't work.</p>\n<p>Does anybody know how to get past the cookie page with Jsoup?<br/>\nOr maybe any other idea to gather the music metadata</p>\n<p>Thanks</p>\n"},{"tags":["java","android","arrays","json","sorting"],"comments":[{"owner":{"account_id":3177881,"reputation":1649,"user_id":2685304,"accept_rate":68,"display_name":"Nomesh DeSilva"},"score":0,"creation_date":1438769042,"post_id":31828574,"comment_id":51581249,"body_markdown":"use undercore.js library , you have various sorting solutions are with it.","body":"use undercore.js library , you have various sorting solutions are with it."},{"owner":{"account_id":6318502,"reputation":234,"user_id":4907554,"accept_rate":50,"display_name":"Manish"},"score":0,"creation_date":1476090230,"post_id":31828574,"comment_id":67189168,"body_markdown":"please take a look at my [question](http://stackoverflow.com/questions/39952230/after-sorting-jsonarray-custom-list-view-not-changed) ..same issue","body":"please take a look at my <a href=\"http://stackoverflow.com/questions/39952230/after-sorting-jsonarray-custom-list-view-not-changed\">question</a> ..same issue"}],"answers":[{"tags":[],"owner":{"account_id":5309978,"reputation":3863,"user_id":4236672,"display_name":"Nitesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438767590,"creation_date":1438767210,"answer_id":31828630,"question_id":31828574,"body_markdown":"Parse your json object into a model say array-List and sort it using comparator.\r\n\r\n    ArrayList&lt;ClassObject&gt; dataList = new ArrayList&lt;String&gt;();\r\n    JSONArray array = new JSONArray(json);     \r\n    for(Object obj : jsonArray){\r\n       dataList.add(//your data model);\r\n    }\r\n\r\n\r\n\r\nPlease refer this link for sorting of array-list\r\nhttp://java2novice.com/java-collections-and-util/arraylist/sort-comparator/\r\n ","title":"Java Android - How to sort a JSONArray based on keys","body":"<p>Parse your json object into a model say array-List and sort it using comparator.</p>\n\n<pre><code>ArrayList&lt;ClassObject&gt; dataList = new ArrayList&lt;String&gt;();\nJSONArray array = new JSONArray(json);     \nfor(Object obj : jsonArray){\n   dataList.add(//your data model);\n}\n</code></pre>\n\n<p>Please refer this link for sorting of array-list\n<a href=\"http://java2novice.com/java-collections-and-util/arraylist/sort-comparator/\" rel=\"nofollow\">http://java2novice.com/java-collections-and-util/arraylist/sort-comparator/</a></p>\n"},{"comments":[{"owner":{"account_id":6318502,"reputation":234,"user_id":4907554,"accept_rate":50,"display_name":"Manish"},"score":0,"creation_date":1476080788,"post_id":31829030,"comment_id":67184644,"body_markdown":"plz see [this](http://stackoverflow.com/questions/39952230/sorting-custom-adapter-list-item-in-custom-listview) how to sort listview by name","body":"plz see <a href=\"http://stackoverflow.com/questions/39952230/sorting-custom-adapter-list-item-in-custom-listview\">this</a> how to sort listview by name"},{"owner":{"account_id":5714233,"reputation":135,"user_id":4515109,"accept_rate":60,"display_name":"Quan Pham"},"score":0,"creation_date":1484215178,"post_id":31829030,"comment_id":70421649,"body_markdown":"Thank you so much, It helps me lots of time","body":"Thank you so much, It helps me lots of time"},{"owner":{"account_id":3358051,"reputation":4973,"user_id":2820534,"accept_rate":82,"display_name":"Prabs"},"score":0,"creation_date":1497265255,"post_id":31829030,"comment_id":75988552,"body_markdown":"to switch among the order --&gt; `valA.compareTo(valB)` vs `valB.compareTo(valA)`","body":"to switch among the order --&gt; <code>valA.compareTo(valB)</code> vs <code>valB.compareTo(valA)</code>"}],"tags":[],"owner":{"account_id":5858071,"reputation":1544,"user_id":4614720,"accept_rate":44,"display_name":"crysis"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1438768275,"creation_date":1438768275,"answer_id":31829030,"question_id":31828574,"body_markdown":"First parse your array in a list\r\n\r\n    JSONArray sortedJsonArray = new JSONArray();\r\n    List&lt;JSONObject&gt; jsonList = new ArrayList&lt;JSONObject&gt;();\r\n    for (int i = 0; i &lt; jsonArray.length(); i++) {\r\n        jsonList.add(jsonArray.getJSONObject(i));\r\n    }\r\nthen use collection.sort to sort the newly created list\r\n\r\n    Collections.sort( jsonList, new Comparator&lt;JSONObject&gt;() {\r\n\r\n        public int compare(JSONObject a, JSONObject b) {\r\n            String valA = new String();\r\n            String valB = new String();\r\n\r\n            try {\r\n                valA = (String) a.get(&quot;distance&quot;);\r\n                valB = (String) b.get(&quot;distance&quot;);\r\n            } \r\n            catch (JSONException e) {\r\n                //do something\r\n            }\r\n\r\n            return valA.compareTo(valB);\r\n        }\r\n    });\r\nInsert the sorted values in your array\r\n\r\n    for (int i = 0; i &lt; jsonArray.length(); i++) {\r\n        sortedJsonArray.put(jsonList.get(i));\r\n    }","title":"Java Android - How to sort a JSONArray based on keys","body":"<p>First parse your array in a list</p>\n\n<pre><code>JSONArray sortedJsonArray = new JSONArray();\nList&lt;JSONObject&gt; jsonList = new ArrayList&lt;JSONObject&gt;();\nfor (int i = 0; i &lt; jsonArray.length(); i++) {\n    jsonList.add(jsonArray.getJSONObject(i));\n}\n</code></pre>\n\n<p>then use collection.sort to sort the newly created list</p>\n\n<pre><code>Collections.sort( jsonList, new Comparator&lt;JSONObject&gt;() {\n\n    public int compare(JSONObject a, JSONObject b) {\n        String valA = new String();\n        String valB = new String();\n\n        try {\n            valA = (String) a.get(\"distance\");\n            valB = (String) b.get(\"distance\");\n        } \n        catch (JSONException e) {\n            //do something\n        }\n\n        return valA.compareTo(valB);\n    }\n});\n</code></pre>\n\n<p>Insert the sorted values in your array</p>\n\n<pre><code>for (int i = 0; i &lt; jsonArray.length(); i++) {\n    sortedJsonArray.put(jsonList.get(i));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3584093,"reputation":3735,"user_id":2991628,"accept_rate":75,"display_name":"Noman Rafique"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438768330,"creation_date":1438768330,"answer_id":31829054,"question_id":31828574,"body_markdown":"Try this. It should work \r\n\r\n    ArrayList&lt;JSONObject&gt; array = new ArrayList&lt;JSONObject&gt;();\r\n    JSONArray jsonArray = new JSONArray();\r\n    for (int i = 0; i &lt; jsonArray.length(); i++) {\r\n       try {\r\n           array.add(jsonArray.getJSONObject(i));\r\n       } catch (JSONException e) {\r\n          // TODO Auto-generated catch block\r\n          e.printStackTrace();\r\n       }\r\n    }   \r\n\r\n    Collections.sort(array, new Comparator&lt;JSONObject&gt;() {\r\n\r\n    @Override\r\n    public int compare(JSONObject lhs, JSONObject rhs) {\r\n        // TODO Auto-generated method stub\r\n\r\n        try {\r\n            return (lhs.getDouble(&quot;distance&quot;).compareTo(rhs.getDouble(&quot;distance&quot;)));\r\n        } catch (JSONException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n            return 0;\r\n        }\r\n    }\r\n    });\r\n\r\nAnd after this you can convert sorted `ArrayList` `array` into `JSONArray`.\r\n\r\n    JSONArray jsonArray = new JSONArray(array);\r\n    String jsonArrayStr = jsonArray.toString();","title":"Java Android - How to sort a JSONArray based on keys","body":"<p>Try this. It should work </p>\n\n<pre><code>ArrayList&lt;JSONObject&gt; array = new ArrayList&lt;JSONObject&gt;();\nJSONArray jsonArray = new JSONArray();\nfor (int i = 0; i &lt; jsonArray.length(); i++) {\n   try {\n       array.add(jsonArray.getJSONObject(i));\n   } catch (JSONException e) {\n      // TODO Auto-generated catch block\n      e.printStackTrace();\n   }\n}   \n\nCollections.sort(array, new Comparator&lt;JSONObject&gt;() {\n\n@Override\npublic int compare(JSONObject lhs, JSONObject rhs) {\n    // TODO Auto-generated method stub\n\n    try {\n        return (lhs.getDouble(\"distance\").compareTo(rhs.getDouble(\"distance\")));\n    } catch (JSONException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n        return 0;\n    }\n}\n});\n</code></pre>\n\n<p>And after this you can convert sorted <code>ArrayList</code> <code>array</code> into <code>JSONArray</code>.</p>\n\n<pre><code>JSONArray jsonArray = new JSONArray(array);\nString jsonArrayStr = jsonArray.toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6001980,"reputation":458,"user_id":4714948,"display_name":"Md. Arif"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674763022,"creation_date":1674763022,"answer_id":75251043,"question_id":31828574,"body_markdown":"**In kotlin you can do as below**\r\n\r\n&gt; Parse your array in a list\r\n\r\n    val sortedJsonArray = JSONArray()\r\n    val jsonList = ArrayList&lt;JSONObject&gt;()\r\n    for (i in 0 until jsonArray.length()) {\r\n        jsonList.add(jsonArray.getJSONObject(i))\r\n    }\r\n    \r\n&gt; Sort the newly created list\r\n\r\n    jsonList.sortWith { a, b -&gt;\r\n        var valA = String()\r\n        var valB = String()\r\n        try {\r\n            valA = a.get(&quot;distance&quot;) as String\r\n            valB = b.get(&quot;distance&quot;) as String\r\n        } catch (e: JSONException) {\r\n            e.printStackTrace()\r\n        }\r\n        valA.compareTo(valB)\r\n    }\r\n\r\n&gt; Insert the sorted values in your json array\r\n\r\n    for (i in 0 until jsonArray.length()) {\r\n        sortedJsonArray.put(jsonList[i])\r\n    }\r\n\r\n*Thanks to @crysis for his answer.*","title":"Java Android - How to sort a JSONArray based on keys","body":"<p><strong>In kotlin you can do as below</strong></p>\n<blockquote>\n<p>Parse your array in a list</p>\n</blockquote>\n<pre><code>val sortedJsonArray = JSONArray()\nval jsonList = ArrayList&lt;JSONObject&gt;()\nfor (i in 0 until jsonArray.length()) {\n    jsonList.add(jsonArray.getJSONObject(i))\n}\n</code></pre>\n<blockquote>\n<p>Sort the newly created list</p>\n</blockquote>\n<pre><code>jsonList.sortWith { a, b -&gt;\n    var valA = String()\n    var valB = String()\n    try {\n        valA = a.get(&quot;distance&quot;) as String\n        valB = b.get(&quot;distance&quot;) as String\n    } catch (e: JSONException) {\n        e.printStackTrace()\n    }\n    valA.compareTo(valB)\n}\n</code></pre>\n<blockquote>\n<p>Insert the sorted values in your json array</p>\n</blockquote>\n<pre><code>for (i in 0 until jsonArray.length()) {\n    sortedJsonArray.put(jsonList[i])\n}\n</code></pre>\n<p><em>Thanks to @crysis for his answer.</em></p>\n"}],"owner":{"account_id":3122998,"reputation":1283,"user_id":2642419,"accept_rate":68,"display_name":"Jhonatan Sandoval"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14978,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":31829030,"answer_count":4,"score":3,"last_activity_date":1674763022,"creation_date":1438767058,"question_id":31828574,"body_markdown":"I&#39;m getting this string (from a webservice) into a JSONArray like this,\r\n\r\n    [\r\n     {\r\n      &quot;lat&quot;: &quot;-16.408545&quot;,\r\n      &quot;lon&quot;: &quot;-71.539105&quot;,\r\n      &quot;type&quot;: &quot;0&quot;,\r\n      &quot;distance&quot;: &quot;0.54&quot;\r\n     },\r\n     {\r\n      &quot;lat&quot;: &quot;-16.4244317845&quot;,\r\n      &quot;lon&quot;: &quot;-71.52562186&quot;,\r\n      &quot;type&quot;: &quot;1&quot;,\r\n      &quot;distance&quot;: &quot;1.87&quot;\r\n     },\r\n     {\r\n      &quot;lat&quot;: &quot;-16.4244317845&quot;,\r\n      &quot;lon&quot;: &quot;-71.52562186&quot;,\r\n      &quot;type&quot;: &quot;1&quot;,\r\n      &quot;distance&quot;: &quot;0.22&quot;\r\n     }\r\n    ]\r\n\r\n\r\nI need to sort it by the **distance** key to show the nearest first and farthest last. I didn&#39;t try any code because I really don&#39;t have any ideas. I&#39;m not using the GSON library, I&#39;m using `org.json.JSONArray`.","title":"Java Android - How to sort a JSONArray based on keys","body":"<p>I'm getting this string (from a webservice) into a JSONArray like this,</p>\n\n<pre><code>[\n {\n  \"lat\": \"-16.408545\",\n  \"lon\": \"-71.539105\",\n  \"type\": \"0\",\n  \"distance\": \"0.54\"\n },\n {\n  \"lat\": \"-16.4244317845\",\n  \"lon\": \"-71.52562186\",\n  \"type\": \"1\",\n  \"distance\": \"1.87\"\n },\n {\n  \"lat\": \"-16.4244317845\",\n  \"lon\": \"-71.52562186\",\n  \"type\": \"1\",\n  \"distance\": \"0.22\"\n }\n]\n</code></pre>\n\n<p>I need to sort it by the <strong>distance</strong> key to show the nearest first and farthest last. I didn't try any code because I really don't have any ideas. I'm not using the GSON library, I'm using <code>org.json.JSONArray</code>.</p>\n"},{"tags":["java","android","kotlin","generics"],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86172,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674761389,"creation_date":1674747259,"answer_id":75248326,"question_id":75248103,"body_markdown":"I believe it is a weakness in the design of Java&#39;s array types implementation that allows you to do that. It leaves open the possibility of a `T` (Parent in this case) being put into an array that can only accept some subtype of `T`, which will throw an exception at runtime.\r\n\r\nKotlin is more strict with generics, preventing possible runtime crashes from any accidental assumptions like that you could make. Java arrays don&#39;t use generics to begin with.\r\n\r\nChange the type of the function parameter to `Array&lt;out T&gt;`. This means it&#39;s an Array that you can pull `Parent`s out of, but the compiler will prevent you from putting any arbitrary subtype of Parent into it (it&#39;s a Parent producer, but not consumer). That means an array of `Child1` or `Child2` is a valid subtype of an array of Parents that only produces.\r\n\r\n```\r\nfun &lt;T&gt; join(vararg collections: Array&lt;out T&gt;): List&lt;T&gt; {\r\n    //...\r\n```\r\n","title":"Type mismatch error after converting java generic to kotlin","body":"<p>I believe it is a weakness in the design of Java's array types implementation that allows you to do that. It leaves open the possibility of a <code>T</code> (Parent in this case) being put into an array that can only accept some subtype of <code>T</code>, which will throw an exception at runtime.</p>\n<p>Kotlin is more strict with generics, preventing possible runtime crashes from any accidental assumptions like that you could make. Java arrays don't use generics to begin with.</p>\n<p>Change the type of the function parameter to <code>Array&lt;out T&gt;</code>. This means it's an Array that you can pull <code>Parent</code>s out of, but the compiler will prevent you from putting any arbitrary subtype of Parent into it (it's a Parent producer, but not consumer). That means an array of <code>Child1</code> or <code>Child2</code> is a valid subtype of an array of Parents that only produces.</p>\n<pre><code>fun &lt;T&gt; join(vararg collections: Array&lt;out T&gt;): List&lt;T&gt; {\n    //...\n</code></pre>\n"}],"owner":{"account_id":8561292,"reputation":33,"user_id":6790125,"display_name":"Cartman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75248326,"answer_count":1,"score":1,"last_activity_date":1674761389,"creation_date":1674746218,"question_id":75248103,"body_markdown":"After converting to kotlin the following error occurs:[![type mismatch error](https://i.stack.imgur.com/gxU9X.png)](https://i.stack.imgur.com/gxU9X.png)\r\n\r\njava code. no errors:\r\n\r\n```\r\npublic class Test {\r\n\r\n    public void getList() {\r\n        List&lt;Parent&gt; list = join(\r\n                Parent.Child1.values(),\r\n                Parent.Child2.values()\r\n        );\r\n    }\r\n    public interface Parent {\r\n        enum Child1 implements Parent {}\r\n        enum Child2 implements Parent {}\r\n    }\r\n    public &lt;T&gt; List&lt;T&gt; join(T[]... collections) {\r\n        ArrayList&lt;T&gt; result = new ArrayList&lt;&gt;();\r\n        for (T[] collection : collections) {\r\n            result.addAll(Arrays.asList(collection));\r\n        }\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\nkotlin code. type mismatch error\r\n\r\n```\r\nclass Test2 {\r\n    val list: Unit\r\n        get() {\r\n            val list = join&lt;Parent&gt;(\r\n                Parent.Child1.values(),\r\n                Parent.Child2.values()\r\n            )\r\n        }\r\n\r\n    interface Parent {\r\n        enum class Child1 : Parent\r\n        enum class Child2 : Parent\r\n    }\r\n\r\n    fun &lt;T&gt; join(vararg collections: Array&lt;T&gt;): List&lt;T&gt; {\r\n        val result = ArrayList&lt;T&gt;()\r\n        for (collection in collections) {\r\n            result.addAll(collection.toList())\r\n        }\r\n        return result\r\n    }\r\n}\r\n```\r\n\r\nHelp me please, how i can fix this error?\r\n\r\nNo idea how to fix it","title":"Type mismatch error after converting java generic to kotlin","body":"<p>After converting to kotlin the following error occurs:<a href=\"https://i.stack.imgur.com/gxU9X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gxU9X.png\" alt=\"type mismatch error\" /></a></p>\n<p>java code. no errors:</p>\n<pre><code>public class Test {\n\n    public void getList() {\n        List&lt;Parent&gt; list = join(\n                Parent.Child1.values(),\n                Parent.Child2.values()\n        );\n    }\n    public interface Parent {\n        enum Child1 implements Parent {}\n        enum Child2 implements Parent {}\n    }\n    public &lt;T&gt; List&lt;T&gt; join(T[]... collections) {\n        ArrayList&lt;T&gt; result = new ArrayList&lt;&gt;();\n        for (T[] collection : collections) {\n            result.addAll(Arrays.asList(collection));\n        }\n        return result;\n    }\n}\n</code></pre>\n<p>kotlin code. type mismatch error</p>\n<pre><code>class Test2 {\n    val list: Unit\n        get() {\n            val list = join&lt;Parent&gt;(\n                Parent.Child1.values(),\n                Parent.Child2.values()\n            )\n        }\n\n    interface Parent {\n        enum class Child1 : Parent\n        enum class Child2 : Parent\n    }\n\n    fun &lt;T&gt; join(vararg collections: Array&lt;T&gt;): List&lt;T&gt; {\n        val result = ArrayList&lt;T&gt;()\n        for (collection in collections) {\n            result.addAll(collection.toList())\n        }\n        return result\n    }\n}\n</code></pre>\n<p>Help me please, how i can fix this error?</p>\n<p>No idea how to fix it</p>\n"},{"tags":["java","spring","mongodb","pagination","slice"],"answers":[{"comments":[{"owner":{"account_id":10769785,"reputation":341,"user_id":7923565,"display_name":"Markus Schreiber"},"score":0,"creation_date":1575023823,"post_id":45187973,"comment_id":104438403,"body_markdown":"Do you know why spring has this behaviour ?","body":"Do you know why spring has this behaviour ?"},{"owner":{"account_id":2542200,"reputation":89,"user_id":2207761,"display_name":"Daniel Ludwig"},"score":0,"creation_date":1675616092,"post_id":45187973,"comment_id":132963193,"body_markdown":"This happens if you modify documents in that way that searched properties are modified. For example search for documents with an id greater than value x. Then modify the id of the documents that were returned by the query so that their id does not match the following query. If you have a page size of 5 and a total of 10 documents that match the query the first query would find 5 documents an their id is modified. The next query with page 2 would find nothing cause their are only 5 documents left with a matching id.","body":"This happens if you modify documents in that way that searched properties are modified. For example search for documents with an id greater than value x. Then modify the id of the documents that were returned by the query so that their id does not match the following query. If you have a page size of 5 and a total of 10 documents that match the query the first query would find 5 documents an their id is modified. The next query with page 2 would find nothing cause their are only 5 documents left with a matching id."}],"tags":[],"owner":{"account_id":10825414,"reputation":221,"user_id":7961451,"accept_rate":0,"display_name":"t-rex-50"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1500460456,"creation_date":1500460456,"answer_id":45187973,"question_id":45141736,"body_markdown":"The problem was that I was using BOTH sorting by _id AND increasing the requested page number at the same time.\r\n\r\nOnce I keep on requesting page number 0 all the time, the problem is over.","title":"Page / Slice containing unknown instances in spring&#39;s pagination and slicing over mongodb","body":"<p>The problem was that I was using BOTH sorting by _id AND increasing the requested page number at the same time.</p>\n\n<p>Once I keep on requesting page number 0 all the time, the problem is over.</p>\n"},{"tags":[],"owner":{"account_id":5972466,"reputation":1293,"user_id":4694415,"display_name":"Guilherme Alencar"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1543005673,"creation_date":1543005673,"answer_id":53452725,"question_id":45141736,"body_markdown":"Normally it happens when you are requesting a pageNumber &quot;out of bounds&quot;. \r\nSuppose you have 10 registers in db that you want and you define a `PAGE_SIZE=10`, so you have only one page and its index is 0, that means if you request for `pageNumber=1`, you will get containing unknown instances problem.\r\n\r\nSummarizing, try for `pageNumber=0`.","title":"Page / Slice containing unknown instances in spring&#39;s pagination and slicing over mongodb","body":"<p>Normally it happens when you are requesting a pageNumber \"out of bounds\". \nSuppose you have 10 registers in db that you want and you define a <code>PAGE_SIZE=10</code>, so you have only one page and its index is 0, that means if you request for <code>pageNumber=1</code>, you will get containing unknown instances problem.</p>\n\n<p>Summarizing, try for <code>pageNumber=0</code>.</p>\n"}],"owner":{"account_id":10825414,"reputation":221,"user_id":7961451,"accept_rate":0,"display_name":"t-rex-50"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19122,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1674760917,"creation_date":1500287109,"question_id":45141736,"body_markdown":"When trying to use spring&#39;s pagination or slicing to iterate a very large mongodb collection, the program runs ok but at certain point the next page / slice is empty and in debug there is the message of &quot;Page / Slice containing unknown instances&quot;.\r\n\r\nHere is the code sample:\r\n\r\n\r\n    do {\r\n      Pageable pageable = new PageRequest(pageNumber, PAGE_SIZE, sort);\r\n      nextPage = catsRepository.findByTypeAndIdGreaterThan(&quot;street cat&quot;, lastId, \r\n              pageable);\r\n      dbRecords = nextPage.getContent();\r\n       if (dbRecords.size() &gt; 0) {\r\n           lastId = new ObjectId( doSomthing());\r\n           pageNumber++; \r\n\r\n        }\r\n     } while (nextPage.hasNext());\r\n\r\n\r\n\r\nAlso, when using different page size, it seems like the location of the problem is different:\r\n\r\nAfter running with slice of size 1, problem at slice 133\r\n\r\nAfter running with slice of size 2, problem at slice  98\r\n\r\nAfter running with slice of size 3, problem at slice 76\r\n\r\n\r\n\r\nIs there a malformed document in the DB that can cause this?\r\n\r\n\r\n\r\nDuring the iteration I calculate the expected number of slices / pages and the loops stops before it reaches that number.\r\n\r\n\r\nwhat can cause such a thing?\r\n\r\nThanks.","title":"Page / Slice containing unknown instances in spring&#39;s pagination and slicing over mongodb","body":"<p>When trying to use spring's pagination or slicing to iterate a very large mongodb collection, the program runs ok but at certain point the next page / slice is empty and in debug there is the message of \"Page / Slice containing unknown instances\".</p>\n\n<p>Here is the code sample:</p>\n\n<pre><code>do {\n  Pageable pageable = new PageRequest(pageNumber, PAGE_SIZE, sort);\n  nextPage = catsRepository.findByTypeAndIdGreaterThan(\"street cat\", lastId, \n          pageable);\n  dbRecords = nextPage.getContent();\n   if (dbRecords.size() &gt; 0) {\n       lastId = new ObjectId( doSomthing());\n       pageNumber++; \n\n    }\n } while (nextPage.hasNext());\n</code></pre>\n\n<p>Also, when using different page size, it seems like the location of the problem is different:</p>\n\n<p>After running with slice of size 1, problem at slice 133</p>\n\n<p>After running with slice of size 2, problem at slice  98</p>\n\n<p>After running with slice of size 3, problem at slice 76</p>\n\n<p>Is there a malformed document in the DB that can cause this?</p>\n\n<p>During the iteration I calculate the expected number of slices / pages and the loops stops before it reaches that number.</p>\n\n<p>what can cause such a thing?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","android","firebase","android-recyclerview","android-adapter"],"comments":[{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1669699218,"post_id":74609416,"comment_id":131695881,"body_markdown":"There&#39;s no stack-trace, which means the question is insufficient. Calling `notifyDataSetChanged()` on a new instance of an adapter appears strange to me, as it provides no meaning.","body":"There&#39;s no stack-trace, which means the question is insufficient. Calling <code>notifyDataSetChanged()</code> on a new instance of an adapter appears strange to me, as it provides no meaning."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1669699439,"post_id":74609416,"comment_id":131695926,"body_markdown":"If the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question. Please respond using @AlexMamo","body":"If the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question. Please respond using @AlexMamo"},{"owner":{"account_id":20760485,"reputation":3,"user_id":15245812,"display_name":"RodrigoMardones"},"score":0,"creation_date":1669702978,"post_id":74609416,"comment_id":131696588,"body_markdown":"@AlexMamo my Android Studio device manager and emulator is not working correctly so I just build the apk and execute on a physichal device, so I got not access to the logcat when this error happens, but the &quot;crash&quot; it just the app closing itself when I upload data to the collection on firestore. Looking for solutions I found some way to do the document snapshot on another void, related to some &quot;refreshing button&quot; or something, that reads the data again, but also I would have change the recyclerview to a &quot;listview&quot;. I don&#39;t have experiencie with these stuff I apologize.","body":"@AlexMamo my Android Studio device manager and emulator is not working correctly so I just build the apk and execute on a physichal device, so I got not access to the logcat when this error happens, but the &quot;crash&quot; it just the app closing itself when I upload data to the collection on firestore. Looking for solutions I found some way to do the document snapshot on another void, related to some &quot;refreshing button&quot; or something, that reads the data again, but also I would have change the recyclerview to a &quot;listview&quot;. I don&#39;t have experiencie with these stuff I apologize."},{"owner":{"account_id":15714846,"reputation":139,"user_id":11339304,"display_name":"REX"},"score":0,"creation_date":1669728749,"post_id":74609416,"comment_id":131704766,"body_markdown":"Why have you written mAdapter.notifyDataSetChanged() when you are using mAdapter.startListening() and mAdapter.stopListening() ?. Doesn&#39;t make sense","body":"Why have you written mAdapter.notifyDataSetChanged() when you are using mAdapter.startListening() and mAdapter.stopListening() ?. Doesn&#39;t make sense"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1670034656,"post_id":74623248,"comment_id":131785509,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74623248/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26280709,"reputation":93,"user_id":19949241,"display_name":"Awais ul Hassan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669786178,"creation_date":1669786178,"answer_id":74623248,"question_id":74609416,"body_markdown":"    class ExampleViewModel : ViewModel() {\r\n    var mFirestore : FirebaseFirestore? = null\r\n    private val _list = MutableLiveData&lt;FirestoreRecyclerOptions&lt;Monitor&gt;&gt;()\r\n    val list: LiveData&lt;FirestoreRecyclerOptions&lt;Monitor&gt;&gt; = _list\r\n\r\n    init{\r\n        mFirestore = FirebaseFirestore.getInstance()\r\n        list.value= FirestoreRecyclerOptions.Builder&lt;Monitor&gt;().setQuery(mFirestore!!.collection(&quot;dispositivos&quot;),Monitor::class.java).build()\r\n    }\r\n}","title":"RecyclerView crashes when I update data to Firestore","body":"<pre><code>class ExampleViewModel : ViewModel() {\nvar mFirestore : FirebaseFirestore? = null\nprivate val _list = MutableLiveData&lt;FirestoreRecyclerOptions&lt;Monitor&gt;&gt;()\nval list: LiveData&lt;FirestoreRecyclerOptions&lt;Monitor&gt;&gt; = _list\n\ninit{\n    mFirestore = FirebaseFirestore.getInstance()\n    list.value= FirestoreRecyclerOptions.Builder&lt;Monitor&gt;().setQuery(mFirestore!!.collection(&quot;dispositivos&quot;),Monitor::class.java).build()\n}\n</code></pre>\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674801815,"post_id":75250584,"comment_id":132794594,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75250584/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":20760485,"reputation":3,"user_id":15245812,"display_name":"RodrigoMardones"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674759868,"creation_date":1674759868,"answer_id":75250584,"question_id":74609416,"body_markdown":"The problem has solved fixing the AndroidManifest Permissions and outside the code on the Firebase Firestore console, the attribute was supose to be an string but it recieves an int.","title":"RecyclerView crashes when I update data to Firestore","body":"<p>The problem has solved fixing the AndroidManifest Permissions and outside the code on the Firebase Firestore console, the attribute was supose to be an string but it recieves an int.</p>\n"}],"owner":{"account_id":20760485,"reputation":3,"user_id":15245812,"display_name":"RodrigoMardones"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74623248,"answer_count":2,"score":0,"last_activity_date":1674759868,"creation_date":1669698844,"question_id":74609416,"body_markdown":"I&#39;m showing data from a Firebase Firestore collection, the app worked fine while but when I update data to the collection from other device (I got an Arduino with sensors connected to a PC that executes a Python script to transform the serial data to JSON and then I update that data on the Firestore collection, all the back end of these functionality works perfectly. My problem it&#39;s the Java on Android.\r\n\r\n\r\nI already search for solutions on this forum and It seems like something doesn&#39;t work with the Adapter, the RecyclerView and the &quot;notifyDataSetChanged();&quot; None of the current solutions worked for me or maybe I just don&#39;t know how to implement them on my project.\r\n\r\n\r\nThis is my model\r\n\r\n\r\n```\r\npublic class Monitor {\r\n    String alias, placa, temp, acid;\r\n\r\n    public Monitor(){}\r\n\r\n    public Monitor(String alias, String placa, String temp, String acid) {\r\n        this.alias = alias;\r\n        this.placa = placa;\r\n        this.temp = temp;\r\n        this.acid = acid;\r\n    }\r\n\r\n    public String getAlias() {\r\n        return alias;\r\n    }\r\n\r\n    public void setAlias(String alias) {\r\n        this.alias = alias;\r\n    }\r\n\r\n    public String getPlaca() {\r\n        return placa;\r\n    }\r\n\r\n    public void setPlaca(String placa) {\r\n        this.placa = placa;\r\n    }\r\n\r\n    public String getTemp() {\r\n        return temp;\r\n    }\r\n\r\n    public void setTemp(String temp) {\r\n        this.temp = temp;\r\n    }\r\n\r\n    public String getAcid() {\r\n        return acid;\r\n    }\r\n\r\n    public void setAcid(String acid) {\r\n        this.acid = acid;\r\n    }\r\n}\r\n```\r\n\r\nThe adapter\r\n\r\n\r\n```\r\npublic class MonitorAdapter extends FirestoreRecyclerAdapter&lt;Monitor, MonitorAdapter.ViewHolder&gt; {\r\n    private FirebaseFirestore mFirestore = FirebaseFirestore.getInstance();\r\n    Activity activity;\r\n    /**\r\n     * Create a new RecyclerView adapter that listens to a Firestore Query.  See {@link\r\n     * FirestoreRecyclerOptions} for configuration options.\r\n     *\r\n     * @param options\r\n     */\r\n    public MonitorAdapter(@NonNull FirestoreRecyclerOptions&lt;Monitor&gt; options, Activity activity) {\r\n        super(options);\r\n        this.activity = activity;\r\n    }\r\n\r\n    @Override\r\n    protected void onBindViewHolder(@NonNull ViewHolder holder, int position, @NonNull Monitor model) {\r\n        DocumentSnapshot documentSnapshot = getSnapshots().getSnapshot(holder.getAbsoluteAdapterPosition());\r\n        final String id = documentSnapshot.getId();\r\n        holder.alias.setText(model.getAlias());\r\n        holder.temp.setText(model.getTemp());\r\n        holder.acid.setText(model.getAcid());\r\n\r\n        holder.btn_edit.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent i = new Intent(activity, VincularPlaca.class);\r\n                i.putExtra(&quot;id_placa&quot;,id);\r\n                activity.startActivity(i);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.view_monitor_single,parent,false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n        TextView alias, temp, acid;\r\n        Button btn_edit;\r\n\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            alias = itemView.findViewById(R.id.alias);\r\n            temp = itemView.findViewById(R.id.temp);\r\n            acid = itemView.findViewById(R.id.acid);\r\n            btn_edit = itemView.findViewById(R.id.btn_edit);\r\n\r\n        }\r\n    }\r\n\r\n}\r\n```\r\nAnd my MainActivity\r\n\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    Button btn_add, btn_exit;\r\n    RecyclerView mRecycler;\r\n    MonitorAdapter mAdapter;\r\n    FirebaseFirestore mFirestore;\r\n    FirebaseAuth mAuth;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        mFirestore = FirebaseFirestore.getInstance();\r\n        mRecycler = findViewById(R.id.recyclerViewSingle);\r\n        mRecycler.setLayoutManager(new LinearLayoutManager(this));\r\n        Query query = mFirestore.collection(&quot;dispositivos&quot;);\r\n\r\n        FirestoreRecyclerOptions&lt;Monitor&gt; firestoreRecyclerOptions =\r\n                new FirestoreRecyclerOptions.Builder&lt;Monitor&gt;().setQuery(query,Monitor.class).build();\r\n\r\n        mAdapter = new MonitorAdapter(firestoreRecyclerOptions, this);\r\n\r\n        mAdapter.notifyDataSetChanged();\r\n        mRecycler.setAdapter(mAdapter);\r\n\r\n        btn_add = findViewById(R.id.btn_add);\r\n        btn_exit = findViewById(R.id.btn_close);\r\n\r\n        btn_add.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(MainActivity.this,VincularPlaca.class));\r\n            }\r\n        });\r\n\r\n        btn_exit.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(MainActivity.this,LoginActivity.class));\r\n                mAuth.signOut();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        mAdapter.startListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        mAdapter.stopListening();\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n","title":"RecyclerView crashes when I update data to Firestore","body":"<p>I'm showing data from a Firebase Firestore collection, the app worked fine while but when I update data to the collection from other device (I got an Arduino with sensors connected to a PC that executes a Python script to transform the serial data to JSON and then I update that data on the Firestore collection, all the back end of these functionality works perfectly. My problem it's the Java on Android.</p>\n<p>I already search for solutions on this forum and It seems like something doesn't work with the Adapter, the RecyclerView and the &quot;notifyDataSetChanged();&quot; None of the current solutions worked for me or maybe I just don't know how to implement them on my project.</p>\n<p>This is my model</p>\n<pre><code>public class Monitor {\n    String alias, placa, temp, acid;\n\n    public Monitor(){}\n\n    public Monitor(String alias, String placa, String temp, String acid) {\n        this.alias = alias;\n        this.placa = placa;\n        this.temp = temp;\n        this.acid = acid;\n    }\n\n    public String getAlias() {\n        return alias;\n    }\n\n    public void setAlias(String alias) {\n        this.alias = alias;\n    }\n\n    public String getPlaca() {\n        return placa;\n    }\n\n    public void setPlaca(String placa) {\n        this.placa = placa;\n    }\n\n    public String getTemp() {\n        return temp;\n    }\n\n    public void setTemp(String temp) {\n        this.temp = temp;\n    }\n\n    public String getAcid() {\n        return acid;\n    }\n\n    public void setAcid(String acid) {\n        this.acid = acid;\n    }\n}\n</code></pre>\n<p>The adapter</p>\n<pre><code>public class MonitorAdapter extends FirestoreRecyclerAdapter&lt;Monitor, MonitorAdapter.ViewHolder&gt; {\n    private FirebaseFirestore mFirestore = FirebaseFirestore.getInstance();\n    Activity activity;\n    /**\n     * Create a new RecyclerView adapter that listens to a Firestore Query.  See {@link\n     * FirestoreRecyclerOptions} for configuration options.\n     *\n     * @param options\n     */\n    public MonitorAdapter(@NonNull FirestoreRecyclerOptions&lt;Monitor&gt; options, Activity activity) {\n        super(options);\n        this.activity = activity;\n    }\n\n    @Override\n    protected void onBindViewHolder(@NonNull ViewHolder holder, int position, @NonNull Monitor model) {\n        DocumentSnapshot documentSnapshot = getSnapshots().getSnapshot(holder.getAbsoluteAdapterPosition());\n        final String id = documentSnapshot.getId();\n        holder.alias.setText(model.getAlias());\n        holder.temp.setText(model.getTemp());\n        holder.acid.setText(model.getAcid());\n\n        holder.btn_edit.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Intent i = new Intent(activity, VincularPlaca.class);\n                i.putExtra(&quot;id_placa&quot;,id);\n                activity.startActivity(i);\n            }\n        });\n\n    }\n\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.view_monitor_single,parent,false);\n        return new ViewHolder(view);\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n        TextView alias, temp, acid;\n        Button btn_edit;\n\n        public ViewHolder(@NonNull View itemView) {\n            super(itemView);\n\n            alias = itemView.findViewById(R.id.alias);\n            temp = itemView.findViewById(R.id.temp);\n            acid = itemView.findViewById(R.id.acid);\n            btn_edit = itemView.findViewById(R.id.btn_edit);\n\n        }\n    }\n\n}\n</code></pre>\n<p>And my MainActivity</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    Button btn_add, btn_exit;\n    RecyclerView mRecycler;\n    MonitorAdapter mAdapter;\n    FirebaseFirestore mFirestore;\n    FirebaseAuth mAuth;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mFirestore = FirebaseFirestore.getInstance();\n        mRecycler = findViewById(R.id.recyclerViewSingle);\n        mRecycler.setLayoutManager(new LinearLayoutManager(this));\n        Query query = mFirestore.collection(&quot;dispositivos&quot;);\n\n        FirestoreRecyclerOptions&lt;Monitor&gt; firestoreRecyclerOptions =\n                new FirestoreRecyclerOptions.Builder&lt;Monitor&gt;().setQuery(query,Monitor.class).build();\n\n        mAdapter = new MonitorAdapter(firestoreRecyclerOptions, this);\n\n        mAdapter.notifyDataSetChanged();\n        mRecycler.setAdapter(mAdapter);\n\n        btn_add = findViewById(R.id.btn_add);\n        btn_exit = findViewById(R.id.btn_close);\n\n        btn_add.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                startActivity(new Intent(MainActivity.this,VincularPlaca.class));\n            }\n        });\n\n        btn_exit.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                startActivity(new Intent(MainActivity.this,LoginActivity.class));\n                mAuth.signOut();\n            }\n        });\n\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n        mAdapter.startListening();\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n        mAdapter.stopListening();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","elasticsearch","elasticsearch-aggregation"],"owner":{"account_id":27629514,"reputation":1,"user_id":21088794,"display_name":"DuckMcQuack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674759781,"creation_date":1674759781,"question_id":75250569,"body_markdown":"I&#39;m having a diffuculties with aggregations over dynamic templates. I have values stored like this.\r\n```\r\n[\r\n  {\r\n    &quot;country&quot;: &quot;CZ&quot;,\r\n    &quot;countryName&quot;: {\r\n      &quot;en&quot;: &quot;Czech Republic&quot;,\r\n      &quot;es&quot;: &quot;Republica checa&quot;,\r\n      &quot;de&quot;: &quot;Tschechische Republik&quot;\r\n    },\r\n    &quot;ownerName&quot;: &quot;...&quot;\r\n  },\r\n  {\r\n    &quot;ownerName&quot;: &quot;...&quot;\r\n  }\r\n]\r\n```\r\nCountry field is classic keyword, mapping for country name is indexed as dynamic template according to the fact that I want to extend with with another languages when I need to. \r\n\r\n```\r\n{\r\n  &quot;dynamic_templates&quot;: [\r\n    {\r\n      &quot;countryName_lsi_object_template&quot;: {\r\n        &quot;path_match&quot;: &quot;countryName.*&quot;,\r\n        &quot;mapping&quot;: {\r\n          &quot;type&quot;: &quot;keyword&quot;\r\n        }\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\ncountryName and country are not mandatory parameters - when the document is not assigned to any country, I can&#39;t have countryName filled either. However I need to do a sorted aggregation over the country names with according to chosen key and also need to include buckets with null countries. Is there any way to do that? \r\n\r\nPreviously, I used TermsValuesSourceBuilder with order on &quot;country&quot; field, but I need data sorted according to specifix language and name and that can&#39;t be done over country codes. \r\n\r\n(I&#39;m using elasticsearch 7.7.1 and java 8 and recreation of index / changing data structure is not my option.)\r\n\r\nI tried to use missing bucket option, but the response does not include buckets with &quot;countryName&quot; missing at all. \r\n```\r\nTermsValuesSourceBuilder(&quot;countryName&quot;).field(&quot;countryName.en&quot;).missingBucket(true);\r\n```\r\n","title":"ElasticSearch / Java - Dynamic Templates aggregation with null values included","body":"<p>I'm having a diffuculties with aggregations over dynamic templates. I have values stored like this.</p>\n<pre><code>[\n  {\n    &quot;country&quot;: &quot;CZ&quot;,\n    &quot;countryName&quot;: {\n      &quot;en&quot;: &quot;Czech Republic&quot;,\n      &quot;es&quot;: &quot;Republica checa&quot;,\n      &quot;de&quot;: &quot;Tschechische Republik&quot;\n    },\n    &quot;ownerName&quot;: &quot;...&quot;\n  },\n  {\n    &quot;ownerName&quot;: &quot;...&quot;\n  }\n]\n</code></pre>\n<p>Country field is classic keyword, mapping for country name is indexed as dynamic template according to the fact that I want to extend with with another languages when I need to.</p>\n<pre><code>{\n  &quot;dynamic_templates&quot;: [\n    {\n      &quot;countryName_lsi_object_template&quot;: {\n        &quot;path_match&quot;: &quot;countryName.*&quot;,\n        &quot;mapping&quot;: {\n          &quot;type&quot;: &quot;keyword&quot;\n        }\n      }\n    }\n  ]\n}\n</code></pre>\n<p>countryName and country are not mandatory parameters - when the document is not assigned to any country, I can't have countryName filled either. However I need to do a sorted aggregation over the country names with according to chosen key and also need to include buckets with null countries. Is there any way to do that?</p>\n<p>Previously, I used TermsValuesSourceBuilder with order on &quot;country&quot; field, but I need data sorted according to specifix language and name and that can't be done over country codes.</p>\n<p>(I'm using elasticsearch 7.7.1 and java 8 and recreation of index / changing data structure is not my option.)</p>\n<p>I tried to use missing bucket option, but the response does not include buckets with &quot;countryName&quot; missing at all.</p>\n<pre><code>TermsValuesSourceBuilder(&quot;countryName&quot;).field(&quot;countryName.en&quot;).missingBucket(true);\n</code></pre>\n"},{"tags":["java","bpmn","kie","kogito"],"answers":[{"tags":[],"owner":{"account_id":20260580,"reputation":135,"user_id":14859042,"display_name":"codeforHarman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673872914,"creation_date":1673872914,"answer_id":75134379,"question_id":75134378,"body_markdown":"In order to solve, we can pick the ioSpec from the currently running Node instance and then get the **DataDefinition** of the variables we need to use as results.\r\n\r\n```\r\n WorkItemNode node =(WorkItemNode) workItem.getNodeInstance().getNode();\r\n        IOSpecification ioSpec = node.getIoSpecification();\r\n        for(DataDefinition dataDefinition : ioSpec.getDataOutputs()){\r\n            if(dataDefinition.getType().equals(fullyQualifiedName)){\r\n                return dataDefinition.getLabel();\r\n            }\r\n        }\r\n```\r\nHere, the **fullyQualifiedName** is the name of the custom input object, whcih you can obtain from the input ```workItem.getParameters().get(parameter).getClass().getName()```. It loops through all the output and finds out the name corresponding to the custom type of the input. \r\n\r\n","title":"How to obtain the Output variables in a Kogito Custom Task","body":"<p>In order to solve, we can pick the ioSpec from the currently running Node instance and then get the <strong>DataDefinition</strong> of the variables we need to use as results.</p>\n<pre><code> WorkItemNode node =(WorkItemNode) workItem.getNodeInstance().getNode();\n        IOSpecification ioSpec = node.getIoSpecification();\n        for(DataDefinition dataDefinition : ioSpec.getDataOutputs()){\n            if(dataDefinition.getType().equals(fullyQualifiedName)){\n                return dataDefinition.getLabel();\n            }\n        }\n</code></pre>\n<p>Here, the <strong>fullyQualifiedName</strong> is the name of the custom input object, whcih you can obtain from the input <code>workItem.getParameters().get(parameter).getClass().getName()</code>. It loops through all the output and finds out the name corresponding to the custom type of the input.</p>\n"}],"owner":{"account_id":20260580,"reputation":135,"user_id":14859042,"display_name":"codeforHarman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674759356,"creation_date":1673872914,"question_id":75134378,"body_markdown":"I have created a Custom Task in my BPMN and have written a handler extending **KogitoWorkItemHandler**. The input values were obtained as the parameters and the result was pushed back as a ```Map&lt;String, Object&gt;```. This was working fine in case of an single varaible.\r\n\r\nWhen in case using multiple custom object inputs and expecting multiple custom object outputs, how to identify the specific output variable name corresponding to the same custom object as input, so that it can be assigned correctly?","title":"How to obtain the Output variables in a Kogito Custom Task","body":"<p>I have created a Custom Task in my BPMN and have written a handler extending <strong>KogitoWorkItemHandler</strong>. The input values were obtained as the parameters and the result was pushed back as a <code>Map&lt;String, Object&gt;</code>. This was working fine in case of an single varaible.</p>\n<p>When in case using multiple custom object inputs and expecting multiple custom object outputs, how to identify the specific output variable name corresponding to the same custom object as input, so that it can be assigned correctly?</p>\n"},{"tags":["java","spring-boot","cassandra","spring-data-cassandra"],"comments":[{"owner":{"account_id":4819783,"reputation":1505,"user_id":3890779,"display_name":"clunven"},"score":0,"creation_date":1674689833,"post_id":75240859,"comment_id":132771128,"body_markdown":"Could you please add the spring-data code, you share a camel route which is not related to Spring. Also the table you share is not the same as the bean. In the table the Partitioned key is `itemnbr` and everything else is clustering column `clubnbr,price,pricestartts,status`. As composite primaary key you will need a dedicated PrimaryKey Class probably.","body":"Could you please add the spring-data code, you share a camel route which is not related to Spring. Also the table you share is not the same as the bean. In the table the Partitioned key is <code>itemnbr</code> and everything else is clustering column <code>clubnbr,price,pricestartts,status</code>. As composite primaary key you will need a dedicated PrimaryKey Class probably."},{"owner":{"account_id":4819783,"reputation":1505,"user_id":3890779,"display_name":"clunven"},"score":0,"creation_date":1674689916,"post_id":75240859,"comment_id":132771136,"body_markdown":"Please share the real cassandra schema `uniqueid` is probably a UUID and not a varchar.","body":"Please share the real cassandra schema <code>uniqueid</code> is probably a UUID and not a varchar."},{"owner":{"account_id":26014900,"reputation":23,"user_id":20825594,"display_name":"John"},"score":0,"creation_date":1674692220,"post_id":75240859,"comment_id":132771461,"body_markdown":"Have updated the question - I am not sure what you mean by spring data-code could you please elaborate","body":"Have updated the question - I am not sure what you mean by spring data-code could you please elaborate"},{"owner":{"account_id":26014900,"reputation":23,"user_id":20825594,"display_name":"John"},"score":0,"creation_date":1674703460,"post_id":75240859,"comment_id":132772795,"body_markdown":"Have left an answer I manually inserted event It generated by the UUID into the string however now it is saying that the table does not exist please refer to the answer below","body":"Have left an answer I manually inserted event It generated by the UUID into the string however now it is saying that the table does not exist please refer to the answer below"}],"answers":[{"tags":[],"owner":{"account_id":26014900,"reputation":23,"user_id":20825594,"display_name":"John"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674703486,"creation_date":1674703116,"answer_id":75241997,"question_id":75240859,"body_markdown":"Fixed it by manually sending in an event ID but now getting this error - looked like it was a type mismatch.\r\n\r\n&gt; reactor.core.Exceptions$ErrorCallbackNotImplemented:\r\n&gt; org.springframework.data.cassandra.CassandraInvalidQueryException:\r\n&gt; ReactivePreparedStatementCallback; CQL [INSERT INTO retail_lifecycle\r\n&gt; (itemnbr,price,status,clubnbr,pricestartts,createts,currency,lastupdatets,priceendts,pricereasoncode,pricereasoncodedesc,pricetype,pricetypedesc,statusdesc,submissionclient,submissionts,submissionuserid,uniqueid)\r\n&gt; VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; table retail_lifecycle\r\n&gt; does not exist; nested exception is\r\n&gt; com.datastax.oss.driver.api.core.servererrors.InvalidQueryException:\r\n&gt; table retail_lifecycle does not exist Caused by:\r\n&gt; org.springframework.data.cassandra.CassandraInvalidQueryException:\r\n&gt; ReactivePreparedStatementCallback; CQL [INSERT INTO retail_lifecycle\r\n&gt; (itemnbr,price,status,clubnbr,pricestartts,createts,currency,lastupdatets,priceendts,pricereasoncode,pricereasoncodedesc,pricetype,pricetypedesc,statusdesc,submissionclient,submissionts,submissionuserid,uniqueid)\r\n&gt; VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; table retail_lifecycle\r\n&gt; does not exist; nested exception is\r\n&gt; com.datastax.oss.driver.api.core.servererrors.InvalidQueryException:\r\n&gt; table retail_lifecycle does not exist\r\n\r\n","title":"Cassandra Db insertion issue Via springboot","body":"<p>Fixed it by manually sending in an event ID but now getting this error - looked like it was a type mismatch.</p>\n<blockquote>\n<p>reactor.core.Exceptions$ErrorCallbackNotImplemented:\norg.springframework.data.cassandra.CassandraInvalidQueryException:\nReactivePreparedStatementCallback; CQL [INSERT INTO retail_lifecycle\n(itemnbr,price,status,clubnbr,pricestartts,createts,currency,lastupdatets,priceendts,pricereasoncode,pricereasoncodedesc,pricetype,pricetypedesc,statusdesc,submissionclient,submissionts,submissionuserid,uniqueid)\nVALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; table retail_lifecycle\ndoes not exist; nested exception is\ncom.datastax.oss.driver.api.core.servererrors.InvalidQueryException:\ntable retail_lifecycle does not exist Caused by:\norg.springframework.data.cassandra.CassandraInvalidQueryException:\nReactivePreparedStatementCallback; CQL [INSERT INTO retail_lifecycle\n(itemnbr,price,status,clubnbr,pricestartts,createts,currency,lastupdatets,priceendts,pricereasoncode,pricereasoncodedesc,pricetype,pricetypedesc,statusdesc,submissionclient,submissionts,submissionuserid,uniqueid)\nVALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; table retail_lifecycle\ndoes not exist; nested exception is\ncom.datastax.oss.driver.api.core.servererrors.InvalidQueryException:\ntable retail_lifecycle does not exist</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":26014900,"reputation":23,"user_id":20825594,"display_name":"John"},"score":0,"creation_date":1674759042,"post_id":75243491,"comment_id":132787429,"body_markdown":"Error 1 is resolved and I have uploaded a screenshot of the create table code - I hope that is sufficient, Will work on getting the associated Cassandra code","body":"Error 1 is resolved and I have uploaded a screenshot of the create table code - I hope that is sufficient, Will work on getting the associated Cassandra code"},{"owner":{"account_id":26014900,"reputation":23,"user_id":20825594,"display_name":"John"},"score":1,"creation_date":1674769083,"post_id":75243491,"comment_id":132789920,"body_markdown":"Resolved issue - looks like the cassandra Keyspace was not properly picking up the correct name","body":"Resolved issue - looks like the cassandra Keyspace was not properly picking up the correct name"}],"tags":[],"owner":{"account_id":4819783,"reputation":1505,"user_id":3890779,"display_name":"clunven"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674720378,"creation_date":1674720378,"answer_id":75243491,"question_id":75240859,"body_markdown":"Notice that:\r\n- In your `test2` you are not using Cassandra what so ever, it would be valuable if you can add the associated code.\r\n- The table schema is still unclear as you share screenshots of a JDBC tools maybe. The best would be to get the output of `describe table retail_lifecycle` using cqlsh to have the detailed schema.\r\n\r\n**Error 1: CodecNotFoundException**\r\n\r\n```\r\nreactor.core.Exceptions$ErrorCallbackNotImplemented: \r\ncom.datastax.oss.driver.api.core.type.codec.CodecNotFoundException: \r\nCodec not found for requested operation: [UUID &lt;-&gt; java.lang.String]...\r\n```\r\n\r\nThis message means that in your Java Entity there is an attribute with invalid type:\r\n- either the java field is as an `UUID` whereas the column in the databases was rather a `TEXT` or a `VARCHAR`. \r\n- or the java field is as String and the expected column is an UUID.\r\n\r\n\r\n**Error 2: InvalidQueryException**\r\n\r\n```\r\ntable retail_lifecycle does not exist; nested exception is com.datastax.oss.driver.api.core.servererrors.InvalidQueryException: table retail_lifecycle does not exist\r\n```\r\n\r\nThis message tells you that the table your want to write does not exist. Either the table `retail_lifecycle` does not exist at all or you may have not provide a keyspace in the `CqlSession` definition.\r\n\r\n","title":"Cassandra Db insertion issue Via springboot","body":"<p>Notice that:</p>\n<ul>\n<li>In your <code>test2</code> you are not using Cassandra what so ever, it would be valuable if you can add the associated code.</li>\n<li>The table schema is still unclear as you share screenshots of a JDBC tools maybe. The best would be to get the output of <code>describe table retail_lifecycle</code> using cqlsh to have the detailed schema.</li>\n</ul>\n<p><strong>Error 1: CodecNotFoundException</strong></p>\n<pre><code>reactor.core.Exceptions$ErrorCallbackNotImplemented: \ncom.datastax.oss.driver.api.core.type.codec.CodecNotFoundException: \nCodec not found for requested operation: [UUID &lt;-&gt; java.lang.String]...\n</code></pre>\n<p>This message means that in your Java Entity there is an attribute with invalid type:</p>\n<ul>\n<li>either the java field is as an <code>UUID</code> whereas the column in the databases was rather a <code>TEXT</code> or a <code>VARCHAR</code>.</li>\n<li>or the java field is as String and the expected column is an UUID.</li>\n</ul>\n<p><strong>Error 2: InvalidQueryException</strong></p>\n<pre><code>table retail_lifecycle does not exist; nested exception is com.datastax.oss.driver.api.core.servererrors.InvalidQueryException: table retail_lifecycle does not exist\n</code></pre>\n<p>This message tells you that the table your want to write does not exist. Either the table <code>retail_lifecycle</code> does not exist at all or you may have not provide a keyspace in the <code>CqlSession</code> definition.</p>\n"}],"owner":{"account_id":26014900,"reputation":23,"user_id":20825594,"display_name":"John"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1674758954,"creation_date":1674688356,"question_id":75240859,"body_markdown":"Am trying to insert values into my Cassandra database but am getting this error. Referred to data type mapping here everything seems to be ok... http://itdoc.hitachi.co.jp/manuals/3020/30203V0300e/BV030040.HTM\r\n\r\n&gt; reactor.core.Exceptions$ErrorCallbackNotImplemented:\r\n&gt; com.datastax.oss.driver.api.core.type.codec.CodecNotFoundException:\r\n&gt; Codec not found for requested operation: [UUID &lt;-&gt; java.lang.String]\r\n&gt; Caused by:\r\n&gt; com.datastax.oss.driver.api.core.type.codec.CodecNotFoundException:\r\n&gt; Codec not found for requested operation: [UUID &lt;-&gt; java.lang.String]\r\n\r\n\r\nHere is the entity object \r\n\r\n    package com.sams.pricing.prism.data.processor.entity;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    import lombok.*;\r\n    import org.springframework.boot.autoconfigure.domain.EntityScan;\r\n    import org.springframework.data.cassandra.core.cql.PrimaryKeyType;\r\n    import org.springframework.data.cassandra.core.mapping.Column;\r\n    import org.springframework.data.cassandra.core.mapping.PrimaryKeyColumn;\r\n    import org.springframework.data.cassandra.core.mapping.Table;\r\n    \r\n    import java.sql.Timestamp;\r\n    \r\n    //import java.time.Instant;\r\n    \r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    @Table(value = &quot;retail_lifecycle&quot;)\r\n    @EntityScan\r\n    @ToString\r\n    public class PricingLifeCycleEntity {\r\n    \r\n      @PrimaryKeyColumn(name = &quot;itemnbr&quot;, ordinal = 0, type = PrimaryKeyType.PARTITIONED)\r\n      private Integer itemNbr;\r\n    \r\n      @PrimaryKeyColumn(name = &quot;clubnbr&quot;, ordinal = 1, type = PrimaryKeyType.CLUSTERED)\r\n      private Short locationNbr;\r\n    \r\n      @PrimaryKeyColumn(name = &quot;price&quot;, ordinal = 2, type = PrimaryKeyType.PARTITIONED)\r\n      private Double price;\r\n    \r\n      @PrimaryKeyColumn(name = &quot;pricestartts&quot;, ordinal = 3, type = PrimaryKeyType.CLUSTERED)\r\n      private Timestamp priceStartTs;\r\n    \r\n      @PrimaryKeyColumn(name = &quot;status&quot;, ordinal = 4, type = PrimaryKeyType.PARTITIONED)\r\n      private String status;\r\n    \r\n      @Column(value = &quot;createts&quot;)\r\n      private Timestamp createTs;\r\n    \r\n      @Column(value = &quot;currency&quot;)\r\n      private String currency;\r\n      \r\n      @Column(value = &quot;lastupdatets&quot;)\r\n      private Timestamp lastUpdateTs;\r\n      \r\n      @Column(value = &quot;priceendts&quot;)\r\n      private Timestamp priceEndTs;\r\n      \r\n      @Column(value = &quot;pricereasoncode&quot;)\r\n      private String priceReasonCode;\r\n      \r\n      @Column(value = &quot;pricereasoncodedesc&quot;)\r\n      private String priceReasonCodeDesc;\r\n      \r\n      @Column(value = &quot;pricetype&quot;)\r\n      private String priceType;\r\n      \r\n      @Column(value = &quot;pricetypedesc&quot;)\r\n      private String priceTypeDesc;\r\n       \r\n      @Column(value = &quot;statusdesc&quot;)\r\n      private String statusDesc;\r\n      \r\n      @Column(value = &quot;submissionclient&quot;)\r\n      private String submissionClient;\r\n    \r\n      @Column(value = &quot;submissionts&quot;)\r\n      private Timestamp submissionTs;\r\n    \r\n      @Column(value = &quot;submissionuserid&quot;)\r\n      private String submissionUserId;\r\n      \r\n      @Column(value = &quot;uniqueid&quot;)\r\n      private String uniqueId;\r\n     \r\n    }\r\n\r\n\r\nHere is the database\r\n\r\n    CREATE TABLE cassandra.prism.retail_lifecycle (\r\n    \titemnbr INTEGER NOT NULL,\r\n    \tclubnbr SMALLINT NOT NULL,\r\n    \tprice DOUBLE NOT NULL,\r\n    \tpricestartts TYPE_TIMESTAMP NOT NULL,\r\n    \tstatus VARCHAR NOT NULL,\r\n    \tcreatets TYPE_TIMESTAMP,\r\n    \tcurrency VARCHAR,\r\n    \tlastupdatets TYPE_TIMESTAMP,\r\n    \tpriceendts TYPE_TIMESTAMP,\r\n    \tpricereasoncode VARCHAR,\r\n    \tpricereasoncodedesc VARCHAR,\r\n    \tpricetype VARCHAR,\r\n    \tpricetypedesc VARCHAR,\r\n    \tstatusdesc VARCHAR,\r\n    \tsubmissionclient VARCHAR,\r\n    \tsubmissionts TYPE_TIMESTAMP,\r\n    \tsubmissionuserid VARCHAR,\r\n    \tuniqueid VARCHAR,\r\n    \tCONSTRAINT RETAIL_LIFECYCLE_PK PRIMARY KEY (itemnbr,clubnbr,price,pricestartts,status)\r\n\r\nand here is the test case \r\n\r\n\r\n    @Test\r\n      public void test2() throws Exception {\r\n        MockEndpoint mock =\r\n            camelContext.getEndpoint(&quot;mock:&quot; + Endpoints.SEDA_PROCESS_ENDPOINT, MockEndpoint.class);\r\n    \r\n        AdviceWith.adviceWith(\r\n            camelContext,\r\n            Endpoints.SEDA_SEND_ENDPOINT,\r\n            // intercepting an exchange on route\r\n            r -&gt; {\r\n              // replacing consumer with direct component\r\n              r.replaceFromWith(Endpoints.SEDA_SEND_ENDPOINT);\r\n              // mocking producer\r\n              r.mockEndpoints(&quot;seda*&quot;);\r\n    \r\n              // weaving a last step to your route that will redirect the message to mock:result\r\n              r.weaveAddLast().to(mock);\r\n            });\r\n        \r\n        var eventId = UUID.randomUUID().toString();\r\n        \r\n        System.out.println(&quot;hereeeee &quot;+eventId );\r\n        String message = &quot;{\\&quot;itemNbr\\&quot;:8831,\\&quot;locationNbr\\&quot;:4707,\\&quot;price\\&quot;:55.0,\\&quot;priceStartTs\\&quot;:\\&quot;2022-11-11T03:24:14.749Z\\&quot;,\\&quot;status\\&quot;:\\&quot;SUCCESS\\&quot;,\\&quot;createTs\\&quot;:\\&quot;2022-11-11T03:24:14.749Z\\&quot;,\\&quot;currency\\&quot;:\\&quot;USD\\&quot;,\\&quot;lastUpdateTs\\&quot;:\\&quot;2022-11-11T03:24:14.749Z\\&quot;,\\&quot;priceEndTs\\&quot;:\\&quot;2022-11-11T03:24:14.749Z\\&quot;,\\&quot;priceReasonCode\\&quot;:\\&quot;TEST\\&quot;,\\&quot;priceReasonCodeDesc\\&quot;:\\&quot;TEST\\&quot;,\\&quot;priceType\\&quot;:\\&quot;TST\\&quot;,\\&quot;priceTypeDesc\\&quot;:\\&quot;TST\\&quot;,\\&quot;statusDesc\\&quot;:\\&quot;TST\\&quot;,\\&quot;submissionClient\\&quot;:\\&quot;TST\\&quot;,\\&quot;submissionTs\\&quot;:\\&quot;2022-11-11T03:24:14.749Z\\&quot;,\\&quot;submissionUserId\\&quot;:\\&quot;TST\\&quot;,\\&quot;uniqueId\\&quot;:\\&quot;121212111212112121212121\\&quot;}&quot;;\r\n   \r\n    \r\n        // setting expectations\r\n        mock.expectedMessageCount(1);\r\n    \r\n        Map&lt;String, Object&gt; headers = new HashMap&lt;&gt;();\r\n        headers.put(PrismConstants.APP_NAME, PrismConstants.PRICING_LIFE_CYCLE_APP_NAME);\r\n        headers.put(PrismConstants.EVENT_ID, UUID.randomUUID().toString());\r\n    \r\n        // invoking consumer\r\n        // we are going to send as a Json body object\r\n        producerTemplate.sendBodyAndHeaders(\r\n            Endpoints.SEDA_SEND_ENDPOINT,\r\n            message,\r\n            headers);\r\n    \r\n        // asserting mock is satisfied\r\n        mock.assertIsSatisfied();\r\n        var result = mock.getExchanges().get(0).getIn();\r\n        System.out.println(result.getBody().toString());\r\n      }\r\n\r\nEdit - DB info and schema update\r\n\r\nPrimary Key entity class\r\n\r\n    package com.sams.pricing.prism.data.processor.entity;\r\n    \r\n    import lombok.*;\r\n    import org.springframework.data.cassandra.core.cql.PrimaryKeyType;\r\n    import org.springframework.data.cassandra.core.mapping.PrimaryKeyClass;\r\n    import org.springframework.data.cassandra.core.mapping.PrimaryKeyColumn;\r\n    \r\n    import java.sql.Timestamp;\r\n    \r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @PrimaryKeyClass\r\n    @ToString\r\n    public class PricingLifeCyclePrimaryKey {\r\n    \r\n    \t@PrimaryKeyColumn(name = &quot;itemnbr&quot;, ordinal = 0, type = PrimaryKeyType.PARTITIONED)\r\n    \tprivate Integer itemNumber;\r\n    \r\n    \t@PrimaryKeyColumn(name = &quot;clubnbr&quot;, ordinal = 1, type = PrimaryKeyType.CLUSTERED)\r\n    \tprivate Short locationNumber;\r\n    \r\n    \t@PrimaryKeyColumn(name = &quot;price&quot;, ordinal = 2, type = PrimaryKeyType.PARTITIONED)\r\n    \tprivate Double price;\r\n    \r\n    \t@PrimaryKeyColumn(name = &quot;pricestartts&quot;, ordinal = 3, type = PrimaryKeyType.CLUSTERED)\r\n    \tprivate Timestamp pricestartTs;\r\n    \r\n    \t@PrimaryKeyColumn(name = &quot;status&quot;, ordinal = 4, type = PrimaryKeyType.PARTITIONED)\r\n    \tprivate String status;\r\n    \r\n    \r\n    }\r\n\r\nSchema code for primary key \r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4hpon.png\r\n  [2]: https://i.stack.imgur.com/AOoDn.png\r\n  [3]: https://i.stack.imgur.com/xCBNz.png","title":"Cassandra Db insertion issue Via springboot","body":"<p>Am trying to insert values into my Cassandra database but am getting this error. Referred to data type mapping here everything seems to be ok... <a href=\"http://itdoc.hitachi.co.jp/manuals/3020/30203V0300e/BV030040.HTM\" rel=\"nofollow noreferrer\">http://itdoc.hitachi.co.jp/manuals/3020/30203V0300e/BV030040.HTM</a></p>\n<blockquote>\n<p>reactor.core.Exceptions$ErrorCallbackNotImplemented:\ncom.datastax.oss.driver.api.core.type.codec.CodecNotFoundException:\nCodec not found for requested operation: [UUID &lt;-&gt; java.lang.String]\nCaused by:\ncom.datastax.oss.driver.api.core.type.codec.CodecNotFoundException:\nCodec not found for requested operation: [UUID &lt;-&gt; java.lang.String]</p>\n</blockquote>\n<p>Here is the entity object</p>\n<pre><code>package com.sams.pricing.prism.data.processor.entity;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport lombok.*;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.data.cassandra.core.cql.PrimaryKeyType;\nimport org.springframework.data.cassandra.core.mapping.Column;\nimport org.springframework.data.cassandra.core.mapping.PrimaryKeyColumn;\nimport org.springframework.data.cassandra.core.mapping.Table;\n\nimport java.sql.Timestamp;\n\n//import java.time.Instant;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonIgnoreProperties(ignoreUnknown = true)\n@Table(value = &quot;retail_lifecycle&quot;)\n@EntityScan\n@ToString\npublic class PricingLifeCycleEntity {\n\n  @PrimaryKeyColumn(name = &quot;itemnbr&quot;, ordinal = 0, type = PrimaryKeyType.PARTITIONED)\n  private Integer itemNbr;\n\n  @PrimaryKeyColumn(name = &quot;clubnbr&quot;, ordinal = 1, type = PrimaryKeyType.CLUSTERED)\n  private Short locationNbr;\n\n  @PrimaryKeyColumn(name = &quot;price&quot;, ordinal = 2, type = PrimaryKeyType.PARTITIONED)\n  private Double price;\n\n  @PrimaryKeyColumn(name = &quot;pricestartts&quot;, ordinal = 3, type = PrimaryKeyType.CLUSTERED)\n  private Timestamp priceStartTs;\n\n  @PrimaryKeyColumn(name = &quot;status&quot;, ordinal = 4, type = PrimaryKeyType.PARTITIONED)\n  private String status;\n\n  @Column(value = &quot;createts&quot;)\n  private Timestamp createTs;\n\n  @Column(value = &quot;currency&quot;)\n  private String currency;\n  \n  @Column(value = &quot;lastupdatets&quot;)\n  private Timestamp lastUpdateTs;\n  \n  @Column(value = &quot;priceendts&quot;)\n  private Timestamp priceEndTs;\n  \n  @Column(value = &quot;pricereasoncode&quot;)\n  private String priceReasonCode;\n  \n  @Column(value = &quot;pricereasoncodedesc&quot;)\n  private String priceReasonCodeDesc;\n  \n  @Column(value = &quot;pricetype&quot;)\n  private String priceType;\n  \n  @Column(value = &quot;pricetypedesc&quot;)\n  private String priceTypeDesc;\n   \n  @Column(value = &quot;statusdesc&quot;)\n  private String statusDesc;\n  \n  @Column(value = &quot;submissionclient&quot;)\n  private String submissionClient;\n\n  @Column(value = &quot;submissionts&quot;)\n  private Timestamp submissionTs;\n\n  @Column(value = &quot;submissionuserid&quot;)\n  private String submissionUserId;\n  \n  @Column(value = &quot;uniqueid&quot;)\n  private String uniqueId;\n \n}\n</code></pre>\n<p>Here is the database</p>\n<pre><code>CREATE TABLE cassandra.prism.retail_lifecycle (\n    itemnbr INTEGER NOT NULL,\n    clubnbr SMALLINT NOT NULL,\n    price DOUBLE NOT NULL,\n    pricestartts TYPE_TIMESTAMP NOT NULL,\n    status VARCHAR NOT NULL,\n    createts TYPE_TIMESTAMP,\n    currency VARCHAR,\n    lastupdatets TYPE_TIMESTAMP,\n    priceendts TYPE_TIMESTAMP,\n    pricereasoncode VARCHAR,\n    pricereasoncodedesc VARCHAR,\n    pricetype VARCHAR,\n    pricetypedesc VARCHAR,\n    statusdesc VARCHAR,\n    submissionclient VARCHAR,\n    submissionts TYPE_TIMESTAMP,\n    submissionuserid VARCHAR,\n    uniqueid VARCHAR,\n    CONSTRAINT RETAIL_LIFECYCLE_PK PRIMARY KEY (itemnbr,clubnbr,price,pricestartts,status)\n</code></pre>\n<p>and here is the test case</p>\n<pre><code>@Test\n  public void test2() throws Exception {\n    MockEndpoint mock =\n        camelContext.getEndpoint(&quot;mock:&quot; + Endpoints.SEDA_PROCESS_ENDPOINT, MockEndpoint.class);\n\n    AdviceWith.adviceWith(\n        camelContext,\n        Endpoints.SEDA_SEND_ENDPOINT,\n        // intercepting an exchange on route\n        r -&gt; {\n          // replacing consumer with direct component\n          r.replaceFromWith(Endpoints.SEDA_SEND_ENDPOINT);\n          // mocking producer\n          r.mockEndpoints(&quot;seda*&quot;);\n\n          // weaving a last step to your route that will redirect the message to mock:result\n          r.weaveAddLast().to(mock);\n        });\n    \n    var eventId = UUID.randomUUID().toString();\n    \n    System.out.println(&quot;hereeeee &quot;+eventId );\n    String message = &quot;{\\&quot;itemNbr\\&quot;:8831,\\&quot;locationNbr\\&quot;:4707,\\&quot;price\\&quot;:55.0,\\&quot;priceStartTs\\&quot;:\\&quot;2022-11-11T03:24:14.749Z\\&quot;,\\&quot;status\\&quot;:\\&quot;SUCCESS\\&quot;,\\&quot;createTs\\&quot;:\\&quot;2022-11-11T03:24:14.749Z\\&quot;,\\&quot;currency\\&quot;:\\&quot;USD\\&quot;,\\&quot;lastUpdateTs\\&quot;:\\&quot;2022-11-11T03:24:14.749Z\\&quot;,\\&quot;priceEndTs\\&quot;:\\&quot;2022-11-11T03:24:14.749Z\\&quot;,\\&quot;priceReasonCode\\&quot;:\\&quot;TEST\\&quot;,\\&quot;priceReasonCodeDesc\\&quot;:\\&quot;TEST\\&quot;,\\&quot;priceType\\&quot;:\\&quot;TST\\&quot;,\\&quot;priceTypeDesc\\&quot;:\\&quot;TST\\&quot;,\\&quot;statusDesc\\&quot;:\\&quot;TST\\&quot;,\\&quot;submissionClient\\&quot;:\\&quot;TST\\&quot;,\\&quot;submissionTs\\&quot;:\\&quot;2022-11-11T03:24:14.749Z\\&quot;,\\&quot;submissionUserId\\&quot;:\\&quot;TST\\&quot;,\\&quot;uniqueId\\&quot;:\\&quot;121212111212112121212121\\&quot;}&quot;;\n\n\n    // setting expectations\n    mock.expectedMessageCount(1);\n\n    Map&lt;String, Object&gt; headers = new HashMap&lt;&gt;();\n    headers.put(PrismConstants.APP_NAME, PrismConstants.PRICING_LIFE_CYCLE_APP_NAME);\n    headers.put(PrismConstants.EVENT_ID, UUID.randomUUID().toString());\n\n    // invoking consumer\n    // we are going to send as a Json body object\n    producerTemplate.sendBodyAndHeaders(\n        Endpoints.SEDA_SEND_ENDPOINT,\n        message,\n        headers);\n\n    // asserting mock is satisfied\n    mock.assertIsSatisfied();\n    var result = mock.getExchanges().get(0).getIn();\n    System.out.println(result.getBody().toString());\n  }\n</code></pre>\n<p>Edit - DB info and schema update</p>\n<p>Primary Key entity class</p>\n<pre><code>package com.sams.pricing.prism.data.processor.entity;\n\nimport lombok.*;\nimport org.springframework.data.cassandra.core.cql.PrimaryKeyType;\nimport org.springframework.data.cassandra.core.mapping.PrimaryKeyClass;\nimport org.springframework.data.cassandra.core.mapping.PrimaryKeyColumn;\n\nimport java.sql.Timestamp;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@PrimaryKeyClass\n@ToString\npublic class PricingLifeCyclePrimaryKey {\n\n    @PrimaryKeyColumn(name = &quot;itemnbr&quot;, ordinal = 0, type = PrimaryKeyType.PARTITIONED)\n    private Integer itemNumber;\n\n    @PrimaryKeyColumn(name = &quot;clubnbr&quot;, ordinal = 1, type = PrimaryKeyType.CLUSTERED)\n    private Short locationNumber;\n\n    @PrimaryKeyColumn(name = &quot;price&quot;, ordinal = 2, type = PrimaryKeyType.PARTITIONED)\n    private Double price;\n\n    @PrimaryKeyColumn(name = &quot;pricestartts&quot;, ordinal = 3, type = PrimaryKeyType.CLUSTERED)\n    private Timestamp pricestartTs;\n\n    @PrimaryKeyColumn(name = &quot;status&quot;, ordinal = 4, type = PrimaryKeyType.PARTITIONED)\n    private String status;\n\n\n}\n</code></pre>\n<p>Schema code for primary key</p>\n<p><a href=\"https://i.stack.imgur.com/4hpon.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4hpon.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/AOoDn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AOoDn.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/xCBNz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xCBNz.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","amazon-web-services","encryption","amazon-dynamodb","amazon-kms"],"answers":[{"comments":[{"owner":{"account_id":3911664,"reputation":578,"user_id":3236794,"accept_rate":50,"display_name":"user3236794"},"score":0,"creation_date":1674765334,"post_id":75250422,"comment_id":132788978,"body_markdown":"Thanks for the response but I&#39;m trying to use the DynamoDB Mapper example.","body":"Thanks for the response but I&#39;m trying to use the DynamoDB Mapper example."}],"tags":[],"owner":{"account_id":10749774,"reputation":14484,"user_id":7909676,"display_name":"Leeroy Hannigan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674758895,"creation_date":1674758895,"answer_id":75250422,"question_id":75250278,"body_markdown":"You haven&#39;t encrypted anything. Follow step 5:\r\n\r\n```\r\nfinal EnumSet&lt;EncryptionFlags&gt; signOnly = EnumSet.of(EncryptionFlags.SIGN);\r\nfinal EnumSet&lt;EncryptionFlags&gt; encryptAndSign = EnumSet.of(EncryptionFlags.ENCRYPT, EncryptionFlags.SIGN);\r\nfinal Map&lt;String, Set&lt;EncryptionFlags&gt;&gt; actions = new HashMap&lt;&gt;();\r\n\r\nfor (final String attributeName : record.keySet()) {\r\n  switch (attributeName) {\r\n    case partitionKeyName: // fall through to the next case\r\n    case sortKeyName:\r\n      // Partition and sort keys must not be encrypted, but should be signed\r\n      actions.put(attributeName, signOnly);\r\n      break;\r\n    case &quot;test&quot;:\r\n      // Neither encrypted nor signed\r\n      break;\r\n    default:\r\n      // Encrypt and sign all other attributes\r\n      actions.put(attributeName, encryptAndSign);\r\n      break;\r\n  }\r\n}\r\n```","title":"How do I encrypt a DynamoDB column using DynamoDB Encryption Client for Java","body":"<p>You haven't encrypted anything. Follow step 5:</p>\n<pre><code>final EnumSet&lt;EncryptionFlags&gt; signOnly = EnumSet.of(EncryptionFlags.SIGN);\nfinal EnumSet&lt;EncryptionFlags&gt; encryptAndSign = EnumSet.of(EncryptionFlags.ENCRYPT, EncryptionFlags.SIGN);\nfinal Map&lt;String, Set&lt;EncryptionFlags&gt;&gt; actions = new HashMap&lt;&gt;();\n\nfor (final String attributeName : record.keySet()) {\n  switch (attributeName) {\n    case partitionKeyName: // fall through to the next case\n    case sortKeyName:\n      // Partition and sort keys must not be encrypted, but should be signed\n      actions.put(attributeName, signOnly);\n      break;\n    case &quot;test&quot;:\n      // Neither encrypted nor signed\n      break;\n    default:\n      // Encrypt and sign all other attributes\n      actions.put(attributeName, encryptAndSign);\n      break;\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":3911664,"reputation":578,"user_id":3236794,"accept_rate":50,"display_name":"user3236794"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1674758895,"creation_date":1674757908,"question_id":75250278,"body_markdown":"I&#39;m trying to encrypt data being saved into a dynamo table. This is production PII data that shouldn&#39;t be visible even to someone with permissions to view the table data. Things like social security numbers. I&#39;m trying to follow the example [here][1]. \r\n\r\n\r\nThis is my code: \r\n```java\r\nAmazonDynamoDBClient client = new AmazonDynamoDBClient();\r\nAWSKMS kmsClient = AWSKMSClientBuilder.defaultClient();\r\nDirectKmsMaterialProvider cmp = new DirectKmsMaterialProvider(kmsClient, &quot;my-key-arn&quot;);\r\nDynamoDBEncryptor encryptor = DynamoDBEncryptor.getInstance(cmp);\r\nDynamoDBMapper mapper = new DynamoDBMapper(client, DynamoDBMapperConfig.builder().withSaveBehavior(\r\n    SaveBehavior.PUT).build(),\r\n    new AttributeEncryptor(encryptor));\r\n\r\n\r\nCustomer customer = new Customer();\r\ncustomer.setCustomerId(&quot;some-id&quot;);\r\n\r\n//set some other values\r\n...\r\n\r\nmapper.save(customer);\r\n\r\n```\r\n\r\nThe customer is saved to the DB but nothing is encrypted and everything is visible. What am I doing wrong? \r\n\r\n  [1]: https://docs.aws.amazon.com/dynamodb-encryption-client/latest/devguide/java-examples.html","title":"How do I encrypt a DynamoDB column using DynamoDB Encryption Client for Java","body":"<p>I'm trying to encrypt data being saved into a dynamo table. This is production PII data that shouldn't be visible even to someone with permissions to view the table data. Things like social security numbers. I'm trying to follow the example <a href=\"https://docs.aws.amazon.com/dynamodb-encryption-client/latest/devguide/java-examples.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>AmazonDynamoDBClient client = new AmazonDynamoDBClient();\nAWSKMS kmsClient = AWSKMSClientBuilder.defaultClient();\nDirectKmsMaterialProvider cmp = new DirectKmsMaterialProvider(kmsClient, &quot;my-key-arn&quot;);\nDynamoDBEncryptor encryptor = DynamoDBEncryptor.getInstance(cmp);\nDynamoDBMapper mapper = new DynamoDBMapper(client, DynamoDBMapperConfig.builder().withSaveBehavior(\n    SaveBehavior.PUT).build(),\n    new AttributeEncryptor(encryptor));\n\n\nCustomer customer = new Customer();\ncustomer.setCustomerId(&quot;some-id&quot;);\n\n//set some other values\n...\n\nmapper.save(customer);\n\n</code></pre>\n<p>The customer is saved to the DB but nothing is encrypted and everything is visible. What am I doing wrong?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":3,"creation_date":1674755472,"post_id":75249860,"comment_id":132786433,"body_markdown":"The Android SDK documentation has https://developer.android.com/studio/build/building-cmdline and https://developer.android.com/studio/command-line among other pages on this.","body":"The Android SDK documentation has <a href=\"https://developer.android.com/studio/build/building-cmdline\" rel=\"nofollow noreferrer\">developer.android.com/studio/build/building-cmdline</a> and <a href=\"https://developer.android.com/studio/command-line\" rel=\"nofollow noreferrer\">developer.android.com/studio/command-line</a> among other pages on this."},{"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"score":1,"creation_date":1674758095,"post_id":75249860,"comment_id":132787183,"body_markdown":"Can I ask why you would want to do this? Modern IDEs offer so many performance benefits for developers (basically doing a ton of the work for you, and catching lots of errors immediately during development)","body":"Can I ask why you would want to do this? Modern IDEs offer so many performance benefits for developers (basically doing a ton of the work for you, and catching lots of errors immediately during development)"}],"answers":[{"tags":[],"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674758617,"creation_date":1674758617,"answer_id":75250385,"question_id":75249860,"body_markdown":"Sure you can! You&#39;ll need to type an awful lot of stuff though, that Android Studio does for you automatically:\r\n\r\nYou&#39;ll need to create gradle files to build your project, you&#39;ll need to create an Android manifest to describe your Android components and your app (permissions, themes, target SDK, etc.).\r\n\r\nYou&#39;ll need to create the code files containing your Android components (`Activity`, `Fragment`, `Service`, `BroadcastReceiver`, etc.). You&#39;ll need to create all your UI definition files in XML (layouts and other resources).\r\n\r\nThen you can use gradle on the command line to run all the necessary preprocessors, code generators, compilers, linkers, resource builders and package builders to give you an APK which you can then install on your device for testing. And you can debug by writing lots of stuff to the logs and using `adb` commands to get the logcat off the device to see the log messages, exceptions and stack traces.","title":"How to develop an Android application without Android Studio?","body":"<p>Sure you can! You'll need to type an awful lot of stuff though, that Android Studio does for you automatically:</p>\n<p>You'll need to create gradle files to build your project, you'll need to create an Android manifest to describe your Android components and your app (permissions, themes, target SDK, etc.).</p>\n<p>You'll need to create the code files containing your Android components (<code>Activity</code>, <code>Fragment</code>, <code>Service</code>, <code>BroadcastReceiver</code>, etc.). You'll need to create all your UI definition files in XML (layouts and other resources).</p>\n<p>Then you can use gradle on the command line to run all the necessary preprocessors, code generators, compilers, linkers, resource builders and package builders to give you an APK which you can then install on your device for testing. And you can debug by writing lots of stuff to the logs and using <code>adb</code> commands to get the logcat off the device to see the log messages, exceptions and stack traces.</p>\n"}],"owner":{"account_id":3294578,"reputation":884,"user_id":2772127,"accept_rate":25,"display_name":"Duddy67"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674758617,"creation_date":1674755291,"question_id":75249860,"body_markdown":"I&#39;ve installed and set up Java JDK 17 as well as Android SDK (the manual way) on my Ubuntu 22.04.  \r\nFrom there, is it possible to develop an Android application in Java WITHOUT Android Studio ?  \r\nDeveloping through the command line or through a light IDE is fine by me, but there are very few guidance and information out there.  \r\nThanks to enlighten me.","title":"How to develop an Android application without Android Studio?","body":"<p>I've installed and set up Java JDK 17 as well as Android SDK (the manual way) on my Ubuntu 22.04.<br />\nFrom there, is it possible to develop an Android application in Java WITHOUT Android Studio ?<br />\nDeveloping through the command line or through a light IDE is fine by me, but there are very few guidance and information out there.<br />\nThanks to enlighten me.</p>\n"},{"tags":["java","class","methods"],"comments":[{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1674757925,"post_id":75249989,"comment_id":132787128,"body_markdown":"In `wprowadzSamochod(Samochod s)`, did you intend to write `samochody [liczbaSamochodow] = new Samochod();` or `samochody [liczbaSamochodow] = s;`? Because the code you have is storing a new, default object. If you won&#39;t need a default object, you can comment out the default constructor and you&#39;ll get an error if you accidentally do that.","body":"In <code>wprowadzSamochod(Samochod s)</code>, did you intend to write <code>samochody [liczbaSamochodow] = new Samochod();</code> or <code>samochody [liczbaSamochodow] = s;</code>? Because the code you have is storing a new, default object. If you won&#39;t need a default object, you can comment out the default constructor and you&#39;ll get an error if you accidentally do that."},{"owner":{"account_id":27629214,"reputation":13,"user_id":21088580,"display_name":"Mazureekk"},"score":0,"creation_date":1674760015,"post_id":75249989,"comment_id":132787691,"body_markdown":"Yes, that was my problem, thank you.","body":"Yes, that was my problem, thank you."}],"answers":[{"tags":[],"owner":{"account_id":25802749,"reputation":1420,"user_id":19544859,"display_name":"mikyll98"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674758283,"creation_date":1674758283,"answer_id":75250331,"question_id":75249989,"body_markdown":"In `wprowadzSamochod(Samochod s)` method you&#39;re creating a new `Samochod` instance, instead of using the one passed as parameter. Since you have a default constructor, you are always using it, setting information to default values:\r\n```java\r\npublic void wprowadzSamochod(Samochod s) {\r\n\tif(liczbaSamochodow &gt;= pojemnosc) {\r\n\t\tSystem.out.println(&quot;W garazu jest maksymalna ilość pojazdow.&quot;);\r\n\t}\r\n\telse {\r\n\t\tsamochody [liczbaSamochodow] = new Samochod(); // &lt;-- there\r\n\t\tliczbaSamochodow++;                     \r\n\t\tSystem.out.println(&quot;Samochod zostal wprowadzony.&quot;);\r\n\t}        \r\n}\r\n```\r\n\r\nHow it should be:\r\n```java\r\npublic void wprowadzSamochod(Samochod s) {\r\n\tif(liczbaSamochodow &gt;= pojemnosc) {\r\n\t\tSystem.out.println(&quot;W garazu jest maksymalna ilość pojazdow.&quot;);\r\n\t}\r\n\telse {\r\n\t\tsamochody [liczbaSamochodow] = s; // &lt;-- there\r\n\t\tliczbaSamochodow++;                     \r\n\t\tSystem.out.println(&quot;Samochod zostal wprowadzony.&quot;);\r\n\t}        \r\n}\r\n```\r\n\r\n---\r\n\r\nJust a micro-suggestion: inside the exit condition of a for loop you can just use `i &lt; max`, instead of `i &lt;= max-1` (e.g. in `wypiszInfo()`).","title":"Simple problem with method getting default valuse from class","body":"<p>In <code>wprowadzSamochod(Samochod s)</code> method you're creating a new <code>Samochod</code> instance, instead of using the one passed as parameter. Since you have a default constructor, you are always using it, setting information to default values:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void wprowadzSamochod(Samochod s) {\n    if(liczbaSamochodow &gt;= pojemnosc) {\n        System.out.println(&quot;W garazu jest maksymalna ilość pojazdow.&quot;);\n    }\n    else {\n        samochody [liczbaSamochodow] = new Samochod(); // &lt;-- there\n        liczbaSamochodow++;                     \n        System.out.println(&quot;Samochod zostal wprowadzony.&quot;);\n    }        \n}\n</code></pre>\n<p>How it should be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void wprowadzSamochod(Samochod s) {\n    if(liczbaSamochodow &gt;= pojemnosc) {\n        System.out.println(&quot;W garazu jest maksymalna ilość pojazdow.&quot;);\n    }\n    else {\n        samochody [liczbaSamochodow] = s; // &lt;-- there\n        liczbaSamochodow++;                     \n        System.out.println(&quot;Samochod zostal wprowadzony.&quot;);\n    }        \n}\n</code></pre>\n<hr />\n<p>Just a micro-suggestion: inside the exit condition of a for loop you can just use <code>i &lt; max</code>, instead of <code>i &lt;= max-1</code> (e.g. in <code>wypiszInfo()</code>).</p>\n"}],"owner":{"account_id":27629214,"reputation":13,"user_id":21088580,"display_name":"Mazureekk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1674768483,"accepted_answer_id":75250331,"answer_count":1,"score":0,"last_activity_date":1674758283,"creation_date":1674756033,"question_id":75249989,"body_markdown":"I started to learn java and i cant get past my problem with method getting default vaules from class. The code is about cars and garage. Everything works just as I intended with the execption of returning default values for Samochod s1 instead of the values that were set in the main function.\r\n\r\nMain:\r\n```\r\n    public static void main(String[] args) {\r\n        Samochod s1 = new Samochod(&quot;Fiat&quot;, &quot;126p&quot;, 2, 650, 6.0);\r\n        Samochod s2 = new Samochod(&quot;Syrena&quot;, &quot;105&quot;, 2, 800, 7.6);\r\n        Garaz g1 = new Garaz();\r\n        g1.setAdres( &quot;ul. Garażowa 1&quot; );\r\n        g1.setPojemnosc( 1 );\r\n        Garaz g2 = new Garaz(&quot;ul. Garażowa 2&quot;, 2);\r\n        g1.wprowadzSamochod(s1);\r\n        g1.wypiszInfo();\r\n        g1.wprowadzSamochod(s2);\r\n        g2.wprowadzSamochod(s2);\r\n        g2.wprowadzSamochod(s1);\r\n        g2.wypiszInfo();\r\n        g2.wyprowadzSamochod();\r\n        g2.wypiszInfo();\r\n        g2.wyprowadzSamochod();\r\n        g2.wyprowadzSamochod();\r\n     }\r\n```\r\n\r\n\r\n```\r\npackage Lab2_02;\r\n\r\npublic class Samochod {\r\n    private String marka;\r\n    private String model;\r\n    private int iloscDrzwi;\r\n    private int pojemnoscSilnika;\r\n    private double srednieSpalanie;\r\n    private static int iloscSamochodow = 0;\r\n\r\n    public String getMarka() {\r\n        return marka;\r\n    }\r\n\r\n    public String getModel() {\r\n        return model;\r\n    }\r\n\r\n    public int getIloscDrzwi() {\r\n        return iloscDrzwi;\r\n    }\r\n\r\n    public int getPojemnoscSilnika() {\r\n        return pojemnoscSilnika;\r\n    }\r\n\r\n    public double getSrednieSpalanie() {\r\n        return srednieSpalanie;\r\n    }\r\n\r\n    public void setMarka(String marka) {\r\n        this.marka = marka;\r\n    }\r\n\r\n    public void setModel(String model) {\r\n        this.model = model;\r\n    }\r\n\r\n    public void setIloscDrzwi(int iloscDrzwi) {\r\n        this.iloscDrzwi = iloscDrzwi;\r\n    }\r\n\r\n    public void setPojemnoscSilnika(int pojemnoscSilnika) {\r\n        this.pojemnoscSilnika = pojemnoscSilnika;\r\n    }\r\n\r\n    public void setSrednieSpalanie(double stednieSpalanie) {\r\n        this.srednieSpalanie = stednieSpalanie;\r\n    }\r\n    \r\n    \r\n    public Samochod() {\r\n        marka = &quot;nieznany&quot;;\r\n        model = &quot;nieznany&quot;;\r\n        iloscDrzwi =  0;\r\n        pojemnoscSilnika = 0;\r\n        srednieSpalanie = 0.0;\r\n        iloscSamochodow++;\r\n    }\r\n    \r\n    public Samochod(String marka_, String model_, int iloscDrzwi_, int pojemnoscSilnika_, double srednieSpalanie_) {\r\n        marka = marka_;\r\n        model = model_;\r\n        iloscDrzwi = iloscDrzwi_;\r\n        pojemnoscSilnika = pojemnoscSilnika_;\r\n        srednieSpalanie = srednieSpalanie_;\r\n        iloscSamochodow++;\r\n    }\r\n    public double obliczSpalanie(double dlugoscTrasy) {\r\n        double spalanie = (srednieSpalanie * dlugoscTrasy)/100;\r\n        return spalanie;    \r\n    }\r\n    public double obliczKosztPrzejazdu(double dlugoscTrasy, double cenaPaliwa) {\r\n        double kosztPrzejazdu = obliczSpalanie(dlugoscTrasy) *  cenaPaliwa;\r\n        return kosztPrzejazdu;\r\n    }\r\n    public void wypiszInfo() { \r\n        System.out.println(&quot;Marka: &quot; + marka);\r\n        System.out.println(&quot;Model: &quot; + model);\r\n        System.out.println(&quot;Ilosc drzwi: &quot; + iloscDrzwi);\r\n        System.out.println(&quot;Pojemnosc silnika: &quot; + pojemnoscSilnika);\r\n        System.out.println(&quot;Srednie spalanie: &quot; + srednieSpalanie);   \r\n    }\r\n    public static void wypiszIloscSamochodow() {\r\n        System.out.println(&quot;Ilosc samochodow: &quot; + iloscSamochodow);\r\n    }\r\n    \r\n}\r\n```\r\n\r\n\r\n```\r\n\r\npackage Lab2_02;\r\n\r\n\r\npublic class Garaz {\r\n    private String adres;\r\n    private int pojemnosc;\r\n    private int liczbaSamochodow = 0;\r\n    private Samochod [] samochody;\r\n\r\n    public String getAdres() {\r\n        return adres;\r\n    }\r\n\r\n    public int getPojemnosc() {\r\n        return pojemnosc;\r\n    }\r\n\r\n    public void setAdres(String adres) {\r\n        this.adres = adres;\r\n    }\r\n\r\n    public void setPojemnosc(int pojemnosc) {\r\n        this.pojemnosc = pojemnosc;\r\n        samochody = new Samochod[pojemnosc];\r\n    }\r\n    \r\n    public Garaz() {\r\n        adres = &quot;nieznany&quot;;\r\n        pojemnosc = 0;\r\n        samochody = null;\r\n    }\r\n    public Garaz(String adres_, int pojemnosc_) {\r\n        adres = adres_;\r\n        pojemnosc = pojemnosc_;\r\n        samochody = new Samochod[pojemnosc];\r\n    }\r\n    public void wprowadzSamochod(Samochod s) {\r\n        if(liczbaSamochodow &gt;= pojemnosc) {\r\n            System.out.println(&quot;W garazu jest maksymalna ilość pojazdow.&quot;);\r\n        }\r\n        else {\r\n            samochody [liczbaSamochodow] = new Samochod();\r\n            liczbaSamochodow++;                     \r\n            System.out.println(&quot;Samochod zostal wprowadzony.&quot;);\r\n        }        \r\n    }\r\n    public void wyprowadzSamochod() {\r\n        if(liczbaSamochodow == 0) {\r\n            System.out.println(&quot;W garazu nie ma zadnego auta.&quot;);\r\n        }\r\n        else {\r\n            samochody [liczbaSamochodow-1] = null;\r\n            liczbaSamochodow--;\r\n            System.out.println(&quot;Samochod zostal wyprowadzony.&quot;);           \r\n        }\r\n    }\r\n    public void wypiszInfo(){\r\n        for(int i = 0; i &lt;= liczbaSamochodow-1; i++){\r\n            \r\n            samochody[i].wypiszInfo();        \r\n        }\r\n    }\r\n        \r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nSo my problem is that instead of returning in console info about my car &quot;Fiat&quot;, it say &quot;nieznany&quot; from default class. I know it is simple problem but i can&#39;t get past it for a few days. My problem is with this line: \r\n```\r\n public void wypiszInfo(){\r\n        for(int i = 0; i &lt;= liczbaSamochodow-1; i++){\r\n\r\n            samochody[i].wypiszInfo();\r\n```\r\nInstead of showing this:\r\n```\r\n Samochod zostal wprowadzony.\r\nMarka: nieznany\r\nModel: nieznany\r\nIlosc drzwi: 0\r\nPojemnosc silnika: 0\r\nSrednie spalanie: 0.0\r\n```\r\nI can&#39;t make it show this:\r\n```\r\nMarka: Fiat\r\nModel: 126p\r\nIlosc drzwi: 2\r\nPojemnosc silnika: 650\r\nSrednie spalanie: 6.0\r\n```","title":"Simple problem with method getting default valuse from class","body":"<p>I started to learn java and i cant get past my problem with method getting default vaules from class. The code is about cars and garage. Everything works just as I intended with the execption of returning default values for Samochod s1 instead of the values that were set in the main function.</p>\n<p>Main:</p>\n<pre><code>    public static void main(String[] args) {\n        Samochod s1 = new Samochod(&quot;Fiat&quot;, &quot;126p&quot;, 2, 650, 6.0);\n        Samochod s2 = new Samochod(&quot;Syrena&quot;, &quot;105&quot;, 2, 800, 7.6);\n        Garaz g1 = new Garaz();\n        g1.setAdres( &quot;ul. Garażowa 1&quot; );\n        g1.setPojemnosc( 1 );\n        Garaz g2 = new Garaz(&quot;ul. Garażowa 2&quot;, 2);\n        g1.wprowadzSamochod(s1);\n        g1.wypiszInfo();\n        g1.wprowadzSamochod(s2);\n        g2.wprowadzSamochod(s2);\n        g2.wprowadzSamochod(s1);\n        g2.wypiszInfo();\n        g2.wyprowadzSamochod();\n        g2.wypiszInfo();\n        g2.wyprowadzSamochod();\n        g2.wyprowadzSamochod();\n     }\n</code></pre>\n<pre><code>package Lab2_02;\n\npublic class Samochod {\n    private String marka;\n    private String model;\n    private int iloscDrzwi;\n    private int pojemnoscSilnika;\n    private double srednieSpalanie;\n    private static int iloscSamochodow = 0;\n\n    public String getMarka() {\n        return marka;\n    }\n\n    public String getModel() {\n        return model;\n    }\n\n    public int getIloscDrzwi() {\n        return iloscDrzwi;\n    }\n\n    public int getPojemnoscSilnika() {\n        return pojemnoscSilnika;\n    }\n\n    public double getSrednieSpalanie() {\n        return srednieSpalanie;\n    }\n\n    public void setMarka(String marka) {\n        this.marka = marka;\n    }\n\n    public void setModel(String model) {\n        this.model = model;\n    }\n\n    public void setIloscDrzwi(int iloscDrzwi) {\n        this.iloscDrzwi = iloscDrzwi;\n    }\n\n    public void setPojemnoscSilnika(int pojemnoscSilnika) {\n        this.pojemnoscSilnika = pojemnoscSilnika;\n    }\n\n    public void setSrednieSpalanie(double stednieSpalanie) {\n        this.srednieSpalanie = stednieSpalanie;\n    }\n    \n    \n    public Samochod() {\n        marka = &quot;nieznany&quot;;\n        model = &quot;nieznany&quot;;\n        iloscDrzwi =  0;\n        pojemnoscSilnika = 0;\n        srednieSpalanie = 0.0;\n        iloscSamochodow++;\n    }\n    \n    public Samochod(String marka_, String model_, int iloscDrzwi_, int pojemnoscSilnika_, double srednieSpalanie_) {\n        marka = marka_;\n        model = model_;\n        iloscDrzwi = iloscDrzwi_;\n        pojemnoscSilnika = pojemnoscSilnika_;\n        srednieSpalanie = srednieSpalanie_;\n        iloscSamochodow++;\n    }\n    public double obliczSpalanie(double dlugoscTrasy) {\n        double spalanie = (srednieSpalanie * dlugoscTrasy)/100;\n        return spalanie;    \n    }\n    public double obliczKosztPrzejazdu(double dlugoscTrasy, double cenaPaliwa) {\n        double kosztPrzejazdu = obliczSpalanie(dlugoscTrasy) *  cenaPaliwa;\n        return kosztPrzejazdu;\n    }\n    public void wypiszInfo() { \n        System.out.println(&quot;Marka: &quot; + marka);\n        System.out.println(&quot;Model: &quot; + model);\n        System.out.println(&quot;Ilosc drzwi: &quot; + iloscDrzwi);\n        System.out.println(&quot;Pojemnosc silnika: &quot; + pojemnoscSilnika);\n        System.out.println(&quot;Srednie spalanie: &quot; + srednieSpalanie);   \n    }\n    public static void wypiszIloscSamochodow() {\n        System.out.println(&quot;Ilosc samochodow: &quot; + iloscSamochodow);\n    }\n    \n}\n</code></pre>\n<pre><code>\npackage Lab2_02;\n\n\npublic class Garaz {\n    private String adres;\n    private int pojemnosc;\n    private int liczbaSamochodow = 0;\n    private Samochod [] samochody;\n\n    public String getAdres() {\n        return adres;\n    }\n\n    public int getPojemnosc() {\n        return pojemnosc;\n    }\n\n    public void setAdres(String adres) {\n        this.adres = adres;\n    }\n\n    public void setPojemnosc(int pojemnosc) {\n        this.pojemnosc = pojemnosc;\n        samochody = new Samochod[pojemnosc];\n    }\n    \n    public Garaz() {\n        adres = &quot;nieznany&quot;;\n        pojemnosc = 0;\n        samochody = null;\n    }\n    public Garaz(String adres_, int pojemnosc_) {\n        adres = adres_;\n        pojemnosc = pojemnosc_;\n        samochody = new Samochod[pojemnosc];\n    }\n    public void wprowadzSamochod(Samochod s) {\n        if(liczbaSamochodow &gt;= pojemnosc) {\n            System.out.println(&quot;W garazu jest maksymalna ilość pojazdow.&quot;);\n        }\n        else {\n            samochody [liczbaSamochodow] = new Samochod();\n            liczbaSamochodow++;                     \n            System.out.println(&quot;Samochod zostal wprowadzony.&quot;);\n        }        \n    }\n    public void wyprowadzSamochod() {\n        if(liczbaSamochodow == 0) {\n            System.out.println(&quot;W garazu nie ma zadnego auta.&quot;);\n        }\n        else {\n            samochody [liczbaSamochodow-1] = null;\n            liczbaSamochodow--;\n            System.out.println(&quot;Samochod zostal wyprowadzony.&quot;);           \n        }\n    }\n    public void wypiszInfo(){\n        for(int i = 0; i &lt;= liczbaSamochodow-1; i++){\n            \n            samochody[i].wypiszInfo();        \n        }\n    }\n        \n}\n\n</code></pre>\n<p>So my problem is that instead of returning in console info about my car &quot;Fiat&quot;, it say &quot;nieznany&quot; from default class. I know it is simple problem but i can't get past it for a few days. My problem is with this line:</p>\n<pre><code> public void wypiszInfo(){\n        for(int i = 0; i &lt;= liczbaSamochodow-1; i++){\n\n            samochody[i].wypiszInfo();\n</code></pre>\n<p>Instead of showing this:</p>\n<pre><code> Samochod zostal wprowadzony.\nMarka: nieznany\nModel: nieznany\nIlosc drzwi: 0\nPojemnosc silnika: 0\nSrednie spalanie: 0.0\n</code></pre>\n<p>I can't make it show this:</p>\n<pre><code>Marka: Fiat\nModel: 126p\nIlosc drzwi: 2\nPojemnosc silnika: 650\nSrednie spalanie: 6.0\n</code></pre>\n"},{"tags":["java","android","retrofit","okhttp"],"answers":[{"comments":[{"owner":{"account_id":5373467,"reputation":339,"user_id":9205480,"display_name":"dan"},"score":0,"creation_date":1674734234,"post_id":75243703,"comment_id":132779123,"body_markdown":"Hi, I added the timeout to my okhttpcient as well as the two additional headers to my AuthInterceptor, but I am still unable to see the header","body":"Hi, I added the timeout to my okhttpcient as well as the two additional headers to my AuthInterceptor, but I am still unable to see the header"},{"owner":{"account_id":5373467,"reputation":339,"user_id":9205480,"display_name":"dan"},"score":0,"creation_date":1674740482,"post_id":75243703,"comment_id":132781005,"body_markdown":"Using just the code you suggested and not using my AuthInterceptor, I am able to see headers on my request, but not in the response.","body":"Using just the code you suggested and not using my AuthInterceptor, I am able to see headers on my request, but not in the response."}],"tags":[],"owner":{"account_id":21714454,"reputation":11,"user_id":16025685,"display_name":"Eyad"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674721840,"creation_date":1674721840,"answer_id":75243703,"question_id":75243264,"body_markdown":"try this I hope helpful you\r\n\r\n     private final OkHttpClient client = new OkHttpClient().newBuilder().connectTimeout(1, TimeUnit.MINUTES)\r\n                .readTimeout(30, TimeUnit.SECONDS)\r\n                .writeTimeout(15, TimeUnit.SECONDS).addInterceptor(chain -&gt; {\r\n                Request request = chain.request()\r\n                        .newBuilder()\r\n                        .addHeader(&quot;Accept&quot;, &quot;application/json&quot;)\r\n                        .addHeader(&quot;Content-Type&quot;, &quot;application/json; charset=utf-8&quot;)\r\n                     .addHeader(&quot;Authorization&quot;,sessionManagement.getSessionToken() != null ? &quot;Bearer &quot; + sessionManagement.getSessionToken(): &quot;&quot;)\r\n                        .build();\r\n                return chain.proceed(request);\r\n            })\r\n            .addInterceptor(logging)\r\n            .build();\r\n","title":"Headers missing from okhttpclient using custom interceptor (but work if I add statically/dynamically)","body":"<p>try this I hope helpful you</p>\n<pre><code> private final OkHttpClient client = new OkHttpClient().newBuilder().connectTimeout(1, TimeUnit.MINUTES)\n            .readTimeout(30, TimeUnit.SECONDS)\n            .writeTimeout(15, TimeUnit.SECONDS).addInterceptor(chain -&gt; {\n            Request request = chain.request()\n                    .newBuilder()\n                    .addHeader(&quot;Accept&quot;, &quot;application/json&quot;)\n                    .addHeader(&quot;Content-Type&quot;, &quot;application/json; charset=utf-8&quot;)\n                 .addHeader(&quot;Authorization&quot;,sessionManagement.getSessionToken() != null ? &quot;Bearer &quot; + sessionManagement.getSessionToken(): &quot;&quot;)\n                    .build();\n            return chain.proceed(request);\n        })\n        .addInterceptor(logging)\n        .build();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5373467,"reputation":339,"user_id":9205480,"display_name":"dan"},"score":0,"creation_date":1674734170,"post_id":75244250,"comment_id":132779095,"body_markdown":"Hi, it looks like I am still unable to see the header even after switching them around ;(","body":"Hi, it looks like I am still unable to see the header even after switching them around ;("}],"tags":[],"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674725266,"creation_date":1674725266,"answer_id":75244250,"question_id":75243264,"body_markdown":"Interceptor that you set works in sequence that you set\r\n\r\nIt means if you set ```authInterceptor``` before ```logging``` then first ```authInterceptor``` executed and then ```logging``` will start to print so here you just need to change sequence \r\n\r\nFrom \r\n```\r\nOkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                    .addInterceptor(authInterceptor)\r\n                    .addInterceptor(logging)\r\n                    .cookieJar(cookieJar)\r\n                    .build();\r\n```\r\n\r\nTo\r\n```\r\nOkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                    .addInterceptor(logging)\r\n                    .addInterceptor(authInterceptor)\r\n                    .cookieJar(cookieJar)\r\n                    .build();\r\n```","title":"Headers missing from okhttpclient using custom interceptor (but work if I add statically/dynamically)","body":"<p>Interceptor that you set works in sequence that you set</p>\n<p>It means if you set <code>authInterceptor</code> before <code>logging</code> then first <code>authInterceptor</code> executed and then <code>logging</code> will start to print so here you just need to change sequence</p>\n<p>From</p>\n<pre><code>OkHttpClient okHttpClient = new OkHttpClient.Builder()\n                    .addInterceptor(authInterceptor)\n                    .addInterceptor(logging)\n                    .cookieJar(cookieJar)\n                    .build();\n</code></pre>\n<p>To</p>\n<pre><code>OkHttpClient okHttpClient = new OkHttpClient.Builder()\n                    .addInterceptor(logging)\n                    .addInterceptor(authInterceptor)\n                    .cookieJar(cookieJar)\n                    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5373467,"reputation":339,"user_id":9205480,"display_name":"dan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674758165,"creation_date":1674758165,"answer_id":75250315,"question_id":75243264,"body_markdown":"It looks like maybe my token was missing, because the original sequence seems to work fine now that I moved the code outside of the if statement (for now):\r\n\r\n```\r\nOkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                    .addInterceptor(authInterceptor)\r\n                    .addInterceptor(logging)\r\n                    .cookieJar(cookieJar)\r\n                    .build();\r\n```\r\n\r\nAnd my AuthInterceptor now looks like this:\r\n\r\n```\r\nrequestBuilder.addHeader(&quot;Accept&quot;, &quot;application/json&quot;)\r\n                      .addHeader(&quot;Content-Type&quot;, &quot;application/json; charset=utf-8&quot;)\r\n                      .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + token);\r\n```\r\n\r\nHowever, I was wondering why I wasn&#39;t getting a header with the json response. Is this supposed to also be handled by the Interceptor?\r\n\r\nFor the time being, I went ahead and added headers to my php code before passing back a response. I am not sure if this is how it&#39;s actually supposed to be done.\r\n\r\n```\r\nheader(&quot;Accept: application/json&quot;);\r\n            header(&#39;Content-Type: application/json; charset=utf-8&#39;);\r\n            header(&quot;Authorization: Bearer &quot; . $response[&#39;auth_token&#39;]);\r\n\r\n\r\n            echo json_encode($response);\r\n            exit;\r\n```","title":"Headers missing from okhttpclient using custom interceptor (but work if I add statically/dynamically)","body":"<p>It looks like maybe my token was missing, because the original sequence seems to work fine now that I moved the code outside of the if statement (for now):</p>\n<pre><code>OkHttpClient okHttpClient = new OkHttpClient.Builder()\n                    .addInterceptor(authInterceptor)\n                    .addInterceptor(logging)\n                    .cookieJar(cookieJar)\n                    .build();\n</code></pre>\n<p>And my AuthInterceptor now looks like this:</p>\n<pre><code>requestBuilder.addHeader(&quot;Accept&quot;, &quot;application/json&quot;)\n                      .addHeader(&quot;Content-Type&quot;, &quot;application/json; charset=utf-8&quot;)\n                      .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + token);\n</code></pre>\n<p>However, I was wondering why I wasn't getting a header with the json response. Is this supposed to also be handled by the Interceptor?</p>\n<p>For the time being, I went ahead and added headers to my php code before passing back a response. I am not sure if this is how it's actually supposed to be done.</p>\n<pre><code>header(&quot;Accept: application/json&quot;);\n            header('Content-Type: application/json; charset=utf-8');\n            header(&quot;Authorization: Bearer &quot; . $response['auth_token']);\n\n\n            echo json_encode($response);\n            exit;\n</code></pre>\n"}],"owner":{"account_id":5373467,"reputation":339,"user_id":9205480,"display_name":"dan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1674758165,"creation_date":1674718788,"question_id":75243264,"body_markdown":"I am having a bit of an issue with logging my headers.\r\n\r\nHere is my class that implements interceptor:\r\n\r\n```\r\npublic class AuthInterceptor implements Interceptor {\r\n    private SessionManagement sessionManagement;\r\n\r\n    public AuthInterceptor(Context ctx) {\r\n        this.sessionManagement = new SessionManagement(ctx);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Response intercept(@NonNull Chain chain) throws IOException {\r\n        Request request = chain.request();\r\n        Request.Builder requestBuilder = request.newBuilder();\r\n\r\n        // if token saved, add to request\r\n        String token = sessionManagement.getSessionToken();\r\n\r\n        if (token != null) {\r\n            requestBuilder.addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + token);\r\n        }\r\n\r\n        return chain.proceed(requestBuilder.build());\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd here is my ApiClient class:\r\n\r\n```\r\npublic class ApiClient {\r\n    public static final String BASE_URL = &quot;some/url&quot;;\r\n\r\n    public static Retrofit retrofit = null;\r\n\r\n    public static Retrofit getApiClient(Context context) {\r\n        if (retrofit == null) {\r\n            Gson gson = new GsonBuilder()\r\n                    .setLenient()\r\n                    .create();\r\n\r\n            AuthInterceptor authInterceptor = new AuthInterceptor(context);\r\n\r\n            HttpLoggingInterceptor logging = new HttpLoggingInterceptor();\r\n            logging.setLevel(HttpLoggingInterceptor.Level.BODY);\r\n\r\n            ClearableCookieJar cookieJar = new PersistentCookieJar(new SetCookieCache(), new SharedPrefsCookiePersistor(context));\r\n\r\n            OkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                    .addInterceptor(authInterceptor)\r\n                    .addInterceptor(logging)\r\n                    .cookieJar(cookieJar)\r\n                    .build();\r\n\r\n            retrofit = new Retrofit.Builder()\r\n                    .baseUrl(BASE_URL)\r\n                    .addConverterFactory(GsonConverterFactory.create(gson))\r\n                    .client(okHttpClient)\r\n                    .build();\r\n        }\r\n\r\n        return retrofit;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI feel these have been implemented correctly, but I am still unable to see the headers in my logs:\r\n\r\n```\r\n2023-01-26 13:35:53.361  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  --&gt; POST http://.../loginuser.php\r\n2023-01-26 13:35:53.361  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Content-Type: application/json; charset=UTF-8\r\n2023-01-26 13:35:53.361  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Content-Length: 41\r\n2023-01-26 13:35:53.361  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  {&quot;email&quot;:&quot;t@t.com&quot;,&quot;password&quot;:&quot;test1234&quot;}\r\n2023-01-26 13:35:53.361  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  --&gt; END POST (41-byte body)\r\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  &lt;-- 200 OK http://.../loginuser.php (96ms)\r\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Date: Thu, 26 Jan 2023 12:35:54 GMT\r\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Server: Apache/2.4.54 (Win64) OpenSSL/1.1.1p PHP/8.1.10\r\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  X-Powered-By: PHP/8.1.10\r\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Expires: Thu, 19 Nov 1981 08:52:00 GMT\r\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Cache-Control: no-store, no-cache, must-revalidate\r\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Pragma: no-cache\r\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Set-Cookie: PHPSESSID=l08iqa7cs8tvt1bfnijkl1r7d8; path=/\r\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Content-Length: 194\r\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Keep-Alive: timeout=5, max=100\r\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Connection: Keep-Alive\r\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Content-Type: text/html; charset=UTF-8\r\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  {&quot;status_code&quot;:200,&quot;auth_token&quot;:&quot;TEMPTOKEN&quot;,&quot;user&quot;:{&quot;id&quot;:&quot;30&quot;,&quot;full_name&quot;:null,&quot;username&quot;:&quot;t&quot;,&quot;password_hash&quot;:&quot;$2y&quot;,&quot;email&quot;:&quot;t@t.com&quot;}}\r\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  &lt;-- END HTTP (194-byte body)\r\n```\r\n\r\nAdditionally, if I completely comment out my OkHttpClient (as well as the .client(okHttpClient) line), my log still shows okhttpclient. Is this normal?\r\n\r\nAppreciate any help I can get with this.","title":"Headers missing from okhttpclient using custom interceptor (but work if I add statically/dynamically)","body":"<p>I am having a bit of an issue with logging my headers.</p>\n<p>Here is my class that implements interceptor:</p>\n<pre><code>public class AuthInterceptor implements Interceptor {\n    private SessionManagement sessionManagement;\n\n    public AuthInterceptor(Context ctx) {\n        this.sessionManagement = new SessionManagement(ctx);\n    }\n\n    @NonNull\n    @Override\n    public Response intercept(@NonNull Chain chain) throws IOException {\n        Request request = chain.request();\n        Request.Builder requestBuilder = request.newBuilder();\n\n        // if token saved, add to request\n        String token = sessionManagement.getSessionToken();\n\n        if (token != null) {\n            requestBuilder.addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + token);\n        }\n\n        return chain.proceed(requestBuilder.build());\n    }\n\n}\n</code></pre>\n<p>And here is my ApiClient class:</p>\n<pre><code>public class ApiClient {\n    public static final String BASE_URL = &quot;some/url&quot;;\n\n    public static Retrofit retrofit = null;\n\n    public static Retrofit getApiClient(Context context) {\n        if (retrofit == null) {\n            Gson gson = new GsonBuilder()\n                    .setLenient()\n                    .create();\n\n            AuthInterceptor authInterceptor = new AuthInterceptor(context);\n\n            HttpLoggingInterceptor logging = new HttpLoggingInterceptor();\n            logging.setLevel(HttpLoggingInterceptor.Level.BODY);\n\n            ClearableCookieJar cookieJar = new PersistentCookieJar(new SetCookieCache(), new SharedPrefsCookiePersistor(context));\n\n            OkHttpClient okHttpClient = new OkHttpClient.Builder()\n                    .addInterceptor(authInterceptor)\n                    .addInterceptor(logging)\n                    .cookieJar(cookieJar)\n                    .build();\n\n            retrofit = new Retrofit.Builder()\n                    .baseUrl(BASE_URL)\n                    .addConverterFactory(GsonConverterFactory.create(gson))\n                    .client(okHttpClient)\n                    .build();\n        }\n\n        return retrofit;\n    }\n\n}\n</code></pre>\n<p>I feel these have been implemented correctly, but I am still unable to see the headers in my logs:</p>\n<pre><code>2023-01-26 13:35:53.361  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  --&gt; POST http://.../loginuser.php\n2023-01-26 13:35:53.361  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Content-Type: application/json; charset=UTF-8\n2023-01-26 13:35:53.361  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Content-Length: 41\n2023-01-26 13:35:53.361  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  {&quot;email&quot;:&quot;t@t.com&quot;,&quot;password&quot;:&quot;test1234&quot;}\n2023-01-26 13:35:53.361  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  --&gt; END POST (41-byte body)\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  &lt;-- 200 OK http://.../loginuser.php (96ms)\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Date: Thu, 26 Jan 2023 12:35:54 GMT\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Server: Apache/2.4.54 (Win64) OpenSSL/1.1.1p PHP/8.1.10\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  X-Powered-By: PHP/8.1.10\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Expires: Thu, 19 Nov 1981 08:52:00 GMT\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Cache-Control: no-store, no-cache, must-revalidate\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Pragma: no-cache\n2023-01-26 13:35:53.458  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Set-Cookie: PHPSESSID=l08iqa7cs8tvt1bfnijkl1r7d8; path=/\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Content-Length: 194\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Keep-Alive: timeout=5, max=100\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Connection: Keep-Alive\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  Content-Type: text/html; charset=UTF-8\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  {&quot;status_code&quot;:200,&quot;auth_token&quot;:&quot;TEMPTOKEN&quot;,&quot;user&quot;:{&quot;id&quot;:&quot;30&quot;,&quot;full_name&quot;:null,&quot;username&quot;:&quot;t&quot;,&quot;password_hash&quot;:&quot;$2y&quot;,&quot;email&quot;:&quot;t@t.com&quot;}}\n2023-01-26 13:35:53.459  7841-7924  okhttp.OkHttpClient     com.example.releasesapp              I  &lt;-- END HTTP (194-byte body)\n</code></pre>\n<p>Additionally, if I completely comment out my OkHttpClient (as well as the .client(okHttpClient) line), my log still shows okhttpclient. Is this normal?</p>\n<p>Appreciate any help I can get with this.</p>\n"},{"tags":["java","xml","logging","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":5776684,"reputation":817,"user_id":4558565,"display_name":"wangyuntao"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1674758065,"creation_date":1490669450,"answer_id":43059840,"question_id":43050243,"body_markdown":"You need to nest one `%replace` statement inside another.\r\n\r\nTry this:\r\n\r\n    %replace{ %replace{%msg}{&amp;apos;}{&amp;quot;} }{\\{|\\}}{&amp;quot;&amp;quot;}\r\n\r\nThe result is:\r\n\r\n    &quot;&quot; &quot;name&quot;:&quot;person&quot;, age:&quot;42&quot; &quot;&quot;\r\n\r\nI hope it helps.","title":"Multiple regular expression replacements log4j2 xml pattern tag","body":"<p>You need to nest one <code>%replace</code> statement inside another.</p>\n<p>Try this:</p>\n<pre><code>%replace{ %replace{%msg}{&amp;apos;}{&amp;quot;} }{\\{|\\}}{&amp;quot;&amp;quot;}\n</code></pre>\n<p>The result is:</p>\n<pre><code>&quot;&quot; &quot;name&quot;:&quot;person&quot;, age:&quot;42&quot; &quot;&quot;\n</code></pre>\n<p>I hope it helps.</p>\n"}],"owner":{"account_id":6779785,"reputation":3954,"user_id":5220489,"display_name":"Jack Gore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4301,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":43059840,"answer_count":1,"score":2,"last_activity_date":1674758065,"creation_date":1490627774,"question_id":43050243,"body_markdown":"Hi I am configuring log4j2 via an xml file. I have set up an appender and its is logging properly. I am having issue configuring two regular expressions to replace text in the %message variable of my log.\r\n\r\nI am logging messages in my java code like this:\r\n\r\n    logger.info(&quot;{ &#39;name&#39;:&#39;person&#39;, age:&#39;42&#39; }&quot;);\r\n\r\nI am sending these logs to Kafka and want to replace all { or } with &quot;&quot; and all &#39; with &quot;.\r\n\r\nThe current pattern I am using looks like this:\r\n\r\n    &lt;pattern&gt;{ &quot;logTimestamp&quot;:&quot;%date{ISO8601}&quot;, %replace{%replace{%message{nolookups}}{\\\\&quot;|\\\\&#39;|&quot;}{&#39;}}{{|}}{},&quot;host&quot;:&quot;${hostname}&quot; }&lt;/pattern&gt;\r\n\r\nHowever this is not working and I am getting the following parsed message as a result of the replacement: \r\n\r\n    { &quot;logTimestamp&quot;:&quot;2017-03-27T11:11:17,247&quot;, %replace}{&quot;}{&#39;},&quot;host&quot;:&quot;hostname&quot; }\r\n\r\nWhat is the proper way to match and replace two patterns with log4j2 %replace? ","title":"Multiple regular expression replacements log4j2 xml pattern tag","body":"<p>Hi I am configuring log4j2 via an xml file. I have set up an appender and its is logging properly. I am having issue configuring two regular expressions to replace text in the %message variable of my log.</p>\n\n<p>I am logging messages in my java code like this:</p>\n\n<pre><code>logger.info(\"{ 'name':'person', age:'42' }\");\n</code></pre>\n\n<p>I am sending these logs to Kafka and want to replace all { or } with \"\" and all ' with \".</p>\n\n<p>The current pattern I am using looks like this:</p>\n\n<pre><code>&lt;pattern&gt;{ \"logTimestamp\":\"%date{ISO8601}\", %replace{%replace{%message{nolookups}}{\\\\\"|\\\\'|\"}{'}}{{|}}{},\"host\":\"${hostname}\" }&lt;/pattern&gt;\n</code></pre>\n\n<p>However this is not working and I am getting the following parsed message as a result of the replacement: </p>\n\n<pre><code>{ \"logTimestamp\":\"2017-03-27T11:11:17,247\", %replace}{\"}{'},\"host\":\"hostname\" }\n</code></pre>\n\n<p>What is the proper way to match and replace two patterns with log4j2 %replace? </p>\n"},{"tags":["java","sdk","cognos"],"comments":[{"owner":{"account_id":13769091,"reputation":2913,"user_id":9937026,"display_name":"dougp"},"score":0,"creation_date":1674842199,"post_id":75250288,"comment_id":132806733,"body_markdown":"This question is confusing.  Are you saying you want to use product Y, or are you saying you want to accomplish outcome X?  The problem being that product Y may not help you accomplish outcome X.","body":"This question is confusing.  Are you saying you want to use product Y, or are you saying you want to accomplish outcome X?  The problem being that product Y may not help you accomplish outcome X."},{"owner":{"account_id":3205682,"reputation":41,"user_id":4043802,"display_name":"Haythem Jedidi"},"score":0,"creation_date":1675078321,"post_id":75250288,"comment_id":132843932,"body_markdown":"i want to get the history of runned reports using cognos SDK (Java)","body":"i want to get the history of runned reports using cognos SDK (Java)"},{"owner":{"account_id":13769091,"reputation":2913,"user_id":9937026,"display_name":"dougp"},"score":0,"creation_date":1675094680,"post_id":75250288,"comment_id":132849513,"body_markdown":"Good luck.  I wouldn&#39;t use SDK to get that info.","body":"Good luck.  I wouldn&#39;t use SDK to get that info."}],"owner":{"account_id":3205682,"reputation":41,"user_id":4043802,"display_name":"Haythem Jedidi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674757986,"creation_date":1674757986,"question_id":75250288,"body_markdown":"I am working with **Cognos 11.2.2** for the first time and I need to get the history of the runned reports using **Java SDK**, i looked at the samples provided by IBM and I only found how to list all reports (name and searchpath) but there is no explanation how to get history.\r\nAny help or code example would be appreciated.\r\n\r\nNote: I tried the ViewAll code and got a list of reports but i did not success extracting history.","title":"History of runned Reports","body":"<p>I am working with <strong>Cognos 11.2.2</strong> for the first time and I need to get the history of the runned reports using <strong>Java SDK</strong>, i looked at the samples provided by IBM and I only found how to list all reports (name and searchpath) but there is no explanation how to get history.\nAny help or code example would be appreciated.</p>\n<p>Note: I tried the ViewAll code and got a list of reports but i did not success extracting history.</p>\n"},{"tags":["java","kotlin","intellij-idea","intellij-13"],"answers":[{"comments":[{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1674756364,"post_id":75249980,"comment_id":132786708,"body_markdown":"https://youtrack.jetbrains.com/issue/KTIJ-24435","body":"<a href=\"https://youtrack.jetbrains.com/issue/KTIJ-24435\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KTIJ-24435</a>"}],"tags":[],"owner":{"display_name":"user19483562"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674756013,"creation_date":1674756013,"answer_id":75249980,"question_id":75249847,"body_markdown":"Well its resolved by jetbrains -\r\n\r\n`Settings (Preferences on macOS) | Build, Execution, Deployment | Debugger | Kotlin | Disable coroutine agent.`\r\n\r\n","title":"intellij IDEA debug mode: Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: kotlinx.coroutines.debug.AgentPremain","body":"<p>Well its resolved by jetbrains -</p>\n<p><code>Settings (Preferences on macOS) | Build, Execution, Deployment | Debugger | Kotlin | Disable coroutine agent.</code></p>\n"}],"owner":{"display_name":"user19483562"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":759,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1674757921,"creation_date":1674755196,"question_id":75249847,"body_markdown":"I am using intellij:\r\n\r\n    IntelliJ IDEA 2022.3.1 (Ultimate Edition).\r\n    Build #IU-223.8214.52, built on December 20, 2022\r\n    \r\n    Runtime version: 17.0.5+1-b653.23 aarch64.  \r\n    VM: OpenJDK 64-Bit Server VM by JetBrains s.r.o.\r\n\r\nThe architecture is `aarch64`. And I am using Apple `M1 Pro` based MacBook Pro and the MacOS version is `13.1 (22C65)`.\r\n\r\n------\r\nMy project is based on `spring boot` and I am able to run it as usual. But when I run the project in debug mode, I am facing below error:\r\n\r\n&gt; Connected to the target VM, address: &#39;127.0.0.1:59789&#39;, transport:\r\n&gt; &#39;socket&#39; Exception in thread &quot;main&quot; java.lang.ClassNotFoundException:\r\n&gt; kotlinx.coroutines.debug.AgentPremain \tat\r\n&gt; java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n&gt; \tat\r\n&gt; java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n&gt; \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n&gt; \tat\r\n&gt; java.instrument/sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:431)\r\n&gt; \tat\r\n&gt; java.instrument/sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:525)\r\n&gt; FATAL ERROR in native method: processing of -javaagent failed\r\n&gt; Disconnected from the target VM, address: &#39;127.0.0.1:59789&#39;,\r\n&gt; transport: &#39;socket&#39;\r\n&gt; \r\n&gt; Process finished with exit code 134 (interrupted by signal 6: SIGABRT)\r\n\r\nI have no idea why intellij is expecting `kotlinx` based classes. My project has no kotlin dependencies at all. \r\n\r\nOn looking at wiki - i see below\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIntelliJ Idea itself is written in Java and Kotlin, so i think this issue is specific to the intellij idea `binary/version/architecute` i am using. \r\n\r\nCould anyone suggest me how to get this resolved.\r\n\r\n-------------\r\nNote: I am able to run the same project in `STS/Eclipse` in debug mode, so definitely its not my project issue but intellij idea ide issue.\r\n\r\nI raised a [bug][2] on jetbrains but believe more in sof, so this post.\r\n\r\n  [1]: https://i.stack.imgur.com/RBsRX.png\r\n  [2]: https://IDEA-debug-mode-Exception-in-thread-main-java.lang.ClassNotFoundException-kotlinx.coroutines.debug.AgentPremain","title":"intellij IDEA debug mode: Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: kotlinx.coroutines.debug.AgentPremain","body":"<p>I am using intellij:</p>\n<pre><code>IntelliJ IDEA 2022.3.1 (Ultimate Edition).\nBuild #IU-223.8214.52, built on December 20, 2022\n\nRuntime version: 17.0.5+1-b653.23 aarch64.  \nVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o.\n</code></pre>\n<p>The architecture is <code>aarch64</code>. And I am using Apple <code>M1 Pro</code> based MacBook Pro and the MacOS version is <code>13.1 (22C65)</code>.</p>\n<hr />\n<p>My project is based on <code>spring boot</code> and I am able to run it as usual. But when I run the project in debug mode, I am facing below error:</p>\n<blockquote>\n<p>Connected to the target VM, address: '127.0.0.1:59789', transport:\n'socket' Exception in thread &quot;main&quot; java.lang.ClassNotFoundException:\nkotlinx.coroutines.debug.AgentPremain     at\njava.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\nat\njava.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\nat\njava.instrument/sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:431)\nat\njava.instrument/sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:525)\nFATAL ERROR in native method: processing of -javaagent failed\nDisconnected from the target VM, address: '127.0.0.1:59789',\ntransport: 'socket'</p>\n<p>Process finished with exit code 134 (interrupted by signal 6: SIGABRT)</p>\n</blockquote>\n<p>I have no idea why intellij is expecting <code>kotlinx</code> based classes. My project has no kotlin dependencies at all.</p>\n<p>On looking at wiki - i see below</p>\n<p><a href=\"https://i.stack.imgur.com/RBsRX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RBsRX.png\" alt=\"enter image description here\" /></a></p>\n<p>IntelliJ Idea itself is written in Java and Kotlin, so i think this issue is specific to the intellij idea <code>binary/version/architecute</code> i am using.</p>\n<p>Could anyone suggest me how to get this resolved.</p>\n<hr />\n<p>Note: I am able to run the same project in <code>STS/Eclipse</code> in debug mode, so definitely its not my project issue but intellij idea ide issue.</p>\n<p>I raised a <a href=\"https://IDEA-debug-mode-Exception-in-thread-main-java.lang.ClassNotFoundException-kotlinx.coroutines.debug.AgentPremain\" rel=\"nofollow noreferrer\">bug</a> on jetbrains but believe more in sof, so this post.</p>\n"},{"tags":["java","git","apache","maven","mvn-repo"],"comments":[{"owner":{"account_id":3758602,"reputation":10072,"user_id":3124333,"accept_rate":100,"display_name":"SiKing"},"score":2,"creation_date":1533939768,"post_id":51792830,"comment_id":90546975,"body_markdown":"Definitely .gitignore.","body":"Definitely .gitignore."}],"answers":[{"tags":[],"owner":{"account_id":4845075,"reputation":1145,"user_id":3908919,"accept_rate":71,"display_name":"mc20"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1674419123,"creation_date":1533929413,"answer_id":51793006,"question_id":51792830,"body_markdown":"Check this:\r\n\r\nhttps://www.gitignore.io/api/maven\r\n\r\n```shell\r\n# Created by https://www.toptal.com/developers/gitignore/api/maven\r\n# Edit at https://www.toptal.com/developers/gitignore?templates=maven\r\n\r\n### Maven ###\r\ntarget/\r\npom.xml.tag\r\npom.xml.releaseBackup\r\npom.xml.versionsBackup\r\npom.xml.next\r\nrelease.properties\r\ndependency-reduced-pom.xml\r\nbuildNumber.properties\r\n.mvn/timing.properties\r\n# https://github.com/takari/maven-wrapper#usage-without-binary-jar\r\n.mvn/wrapper/maven-wrapper.jar\r\n\r\n# Eclipse m2e generated files\r\n# Eclipse Core\r\n.project\r\n# JDT-specific (Eclipse Java Development Tools)\r\n.classpath\r\n\r\n# End of https://www.toptal.com/developers/gitignore/api/maven\r\n```\r\n\r\nIn general you should ignore all targets and metadata. If you ignore targets, `mvn clean` is not required before pushing.","title":"What files in a Maven project should be committed to git?","body":"<p>Check this:</p>\n<p><a href=\"https://www.gitignore.io/api/maven\" rel=\"nofollow noreferrer\">https://www.gitignore.io/api/maven</a></p>\n<pre class=\"lang-bash prettyprint-override\"><code># Created by https://www.toptal.com/developers/gitignore/api/maven\n# Edit at https://www.toptal.com/developers/gitignore?templates=maven\n\n### Maven ###\ntarget/\npom.xml.tag\npom.xml.releaseBackup\npom.xml.versionsBackup\npom.xml.next\nrelease.properties\ndependency-reduced-pom.xml\nbuildNumber.properties\n.mvn/timing.properties\n# https://github.com/takari/maven-wrapper#usage-without-binary-jar\n.mvn/wrapper/maven-wrapper.jar\n\n# Eclipse m2e generated files\n# Eclipse Core\n.project\n# JDT-specific (Eclipse Java Development Tools)\n.classpath\n\n# End of https://www.toptal.com/developers/gitignore/api/maven\n</code></pre>\n<p>In general you should ignore all targets and metadata. If you ignore targets, <code>mvn clean</code> is not required before pushing.</p>\n"},{"comments":[{"owner":{"account_id":473189,"reputation":4096,"user_id":882150,"accept_rate":68,"display_name":"ElPiter"},"score":0,"creation_date":1616490613,"post_id":51793051,"comment_id":118011562,"body_markdown":"Does this avoid .mvn directory to be tracked? Does .mvn directory need to be tracked? I am not talking about the local Maven repo, which can be somewhere else in your filesystem, but the .mvn directory WITHIN the Springboot project itself (where wrapper/MavenWrapperDownloader.java for instance is located).","body":"Does this avoid .mvn directory to be tracked? Does .mvn directory need to be tracked? I am not talking about the local Maven repo, which can be somewhere else in your filesystem, but the .mvn directory WITHIN the Springboot project itself (where wrapper/MavenWrapperDownloader.java for instance is located)."},{"owner":{"account_id":5516910,"reputation":5424,"user_id":4381330,"accept_rate":92,"display_name":"Mincong Huang"},"score":0,"creation_date":1616531251,"post_id":51793051,"comment_id":118031097,"body_markdown":"@ElPiter the `Maven.gitignore` file that I shared, it does not prevent the whole `.mvn` directory being tracked, it only excluded some files there. According to https://maven.apache.org/configure.html#mvn-folder , `.mvn` is located within the project’s top level directory, the files `maven.config`, `jvm.config`, and `extensions.xml` contain project specific configuration for running Maven. This folder is part of the project and may be checked in into your version control. For example, JGit uses `.mvn`, see source code here https://github.com/eclipse/jgit/tree/v5.11.0.202103091610-r/.mvn","body":"@ElPiter the <code>Maven.gitignore</code> file that I shared, it does not prevent the whole <code>.mvn</code> directory being tracked, it only excluded some files there. According to <a href=\"https://maven.apache.org/configure.html#mvn-folder\" rel=\"nofollow noreferrer\">maven.apache.org/configure.html#mvn-folder</a> , <code>.mvn</code> is located within the project’s top level directory, the files <code>maven.config</code>, <code>jvm.config</code>, and <code>extensions.xml</code> contain project specific configuration for running Maven. This folder is part of the project and may be checked in into your version control. For example, JGit uses <code>.mvn</code>, see source code here <a href=\"https://github.com/eclipse/jgit/tree/v5.11.0.202103091610-r/.mvn\" rel=\"nofollow noreferrer\">github.com/eclipse/jgit/tree/v5.11.0.202103091610-r/.mvn</a>"}],"tags":[],"owner":{"account_id":5516910,"reputation":5424,"user_id":4381330,"accept_rate":92,"display_name":"Mincong Huang"},"comment_count":2,"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1571390707,"creation_date":1533929635,"answer_id":51793051,"question_id":51792830,"body_markdown":"Personally I use Maven gitignore and Java gitignore for a Maven project. You might need to adjust it with the languages used in your Maven project.\r\n\r\nhttps://github.com/github/gitignore/blob/master/Maven.gitignore\r\n\r\n    target/\r\n    pom.xml.tag\r\n    pom.xml.releaseBackup\r\n    pom.xml.versionsBackup\r\n    pom.xml.next\r\n    release.properties\r\n    dependency-reduced-pom.xml\r\n    buildNumber.properties\r\n    .mvn/timing.properties\r\n    # https://github.com/takari/maven-wrapper#usage-without-binary-jar\r\n    .mvn/wrapper/maven-wrapper.jar\r\n\r\nhttps://github.com/github/gitignore/blob/master/Java.gitignore\r\n\r\n    # Compiled class file\r\n    *.class\r\n    \r\n    # Log file\r\n    *.log\r\n    \r\n    # BlueJ files\r\n    *.ctxt\r\n    \r\n    # Mobile Tools for Java (J2ME)\r\n    .mtj.tmp/\r\n    \r\n    # Package Files #\r\n    *.jar\r\n    *.war\r\n    *.nar\r\n    *.ear\r\n    *.zip\r\n    *.tar.gz\r\n    *.rar\r\n    \r\n    # virtual machine crash logs, see http://www.java.com/en/download/help/error_hotspot.xml\r\n    hs_err_pid*\r\n\r\n&gt; Is it good practice to perform `mvn clean` before committing, or do I add certain files to the .gitignore file?\r\n\r\nAdd rules to your `.gitignore` file first, which makes Git ignores the undesired files correctly. Understanding [Maven standard directory layout](https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html) will also help you better determine which are the undesired directories. ","title":"What files in a Maven project should be committed to git?","body":"<p>Personally I use Maven gitignore and Java gitignore for a Maven project. You might need to adjust it with the languages used in your Maven project.</p>\n\n<p><a href=\"https://github.com/github/gitignore/blob/master/Maven.gitignore\" rel=\"noreferrer\">https://github.com/github/gitignore/blob/master/Maven.gitignore</a></p>\n\n<pre><code>target/\npom.xml.tag\npom.xml.releaseBackup\npom.xml.versionsBackup\npom.xml.next\nrelease.properties\ndependency-reduced-pom.xml\nbuildNumber.properties\n.mvn/timing.properties\n# https://github.com/takari/maven-wrapper#usage-without-binary-jar\n.mvn/wrapper/maven-wrapper.jar\n</code></pre>\n\n<p><a href=\"https://github.com/github/gitignore/blob/master/Java.gitignore\" rel=\"noreferrer\">https://github.com/github/gitignore/blob/master/Java.gitignore</a></p>\n\n<pre><code># Compiled class file\n*.class\n\n# Log file\n*.log\n\n# BlueJ files\n*.ctxt\n\n# Mobile Tools for Java (J2ME)\n.mtj.tmp/\n\n# Package Files #\n*.jar\n*.war\n*.nar\n*.ear\n*.zip\n*.tar.gz\n*.rar\n\n# virtual machine crash logs, see http://www.java.com/en/download/help/error_hotspot.xml\nhs_err_pid*\n</code></pre>\n\n<blockquote>\n  <p>Is it good practice to perform <code>mvn clean</code> before committing, or do I add certain files to the .gitignore file?</p>\n</blockquote>\n\n<p>Add rules to your <code>.gitignore</code> file first, which makes Git ignores the undesired files correctly. Understanding <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html\" rel=\"noreferrer\">Maven standard directory layout</a> will also help you better determine which are the undesired directories. </p>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1533930245,"creation_date":1533929844,"answer_id":51793095,"question_id":51792830,"body_markdown":"&gt; Is it good practice to perform mvn clean before committing, or do I\r\n&gt; add certain files to the .gitignore file?\r\n\r\nExecuting`mvn clean` before committing is not practical at all. Developers can forget that and besides they should rebuild their projects at each commit.  \r\nThe correct way is using `.gitignore` to specify files to ignored in the tracking. Just commit it and push into the remote branch and all developers could work with the same rules.   \r\n\r\n&gt; I want to know what files in a Maven project should be committed to\r\n&gt; git.\r\n\r\n\r\n\r\nYou want to commit/push files that you want to version/track.   \r\nBut it is very broad. You cannot have rules just for Maven. Maven have some specificities (`target` folder for example that you want to ignore) but you would have probably more things to ignore.   \r\nYou want to generally commit/push the source code and application configuration files such as `pom.xml` or any configuration files used in your build but you can also add any other kind of files. For example committing a changelog or even a word document (more rare but possible) may also be valid.     \r\nGenerally what you don&#39;t want to commit are files that : \r\n \r\n- depends on the developer machine (IDE, custom files)\r\n- created by a build operation (`target` folder in Maven but you could also have other folders according to your pom configuration)\r\n- temporary files using during the build, the application execution or still the release operations.\r\n- archives  ","title":"What files in a Maven project should be committed to git?","body":"<blockquote>\n  <p>Is it good practice to perform mvn clean before committing, or do I\n  add certain files to the .gitignore file?</p>\n</blockquote>\n\n<p>Executing<code>mvn clean</code> before committing is not practical at all. Developers can forget that and besides they should rebuild their projects at each commit.<br>\nThe correct way is using <code>.gitignore</code> to specify files to ignored in the tracking. Just commit it and push into the remote branch and all developers could work with the same rules.   </p>\n\n<blockquote>\n  <p>I want to know what files in a Maven project should be committed to\n  git.</p>\n</blockquote>\n\n<p>You want to commit/push files that you want to version/track.<br>\nBut it is very broad. You cannot have rules just for Maven. Maven have some specificities (<code>target</code> folder for example that you want to ignore) but you would have probably more things to ignore.<br>\nYou want to generally commit/push the source code and application configuration files such as <code>pom.xml</code> or any configuration files used in your build but you can also add any other kind of files. For example committing a changelog or even a word document (more rare but possible) may also be valid.<br>\nGenerally what you don't want to commit are files that : </p>\n\n<ul>\n<li>depends on the developer machine (IDE, custom files)</li>\n<li>created by a build operation (<code>target</code> folder in Maven but you could also have other folders according to your pom configuration)</li>\n<li>temporary files using during the build, the application execution or still the release operations.</li>\n<li>archives  </li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15462527,"reputation":7563,"user_id":11154841,"display_name":"questionto42"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674757555,"creation_date":1674421409,"answer_id":75203898,"question_id":51792830,"body_markdown":"I had a Maven project in VSCodium and had to decide whether to commit the *.project* file or not. That should be linked to in this Q/A since it happens with other IDE:s as well that have Maven extensions. \r\n\r\nThis is 2010, only for Eclipse:\r\n\r\n[.classpath and .project - check into version control or not?](https://stackoverflow.com/questions/2818239/classpath-and-project-check-into-version-control-or-not)\r\n\r\nwhich says overall that it should be committed. I guess the discussion is timeless. It is a Maven generated file, but it should still be in the repository, and even more, if the repository is at work with the same setup and tools by the team. \r\n\r\nOther questions:\r\n- [Should I keep my project files under version control? \\[closed\\]](https://stackoverflow.com/questions/116121/should-i-keep-my-project-files-under-version-control)\r\n- [Java project: should .classpath .project file be committed into repository? \\[duplicate\\]](https://stackoverflow.com/questions/3611728/java-project-should-classpath-project-file-be-committed-into-repository)\r\n\r\nThe same for the *.classpath*. Even if it is made by Maven, it should be in the repo.\r\n\r\nI am a beginner at Maven and only guess this. I cannot understand why this was not in this Q/A up to now. The accepted answer lists the ignored files, but from reading that, I was not fully sure what to do with these meta files from Maven. And there is even one [answer that lists the two files as files that are to be ignored](https://stackoverflow.com/a/51793006/11154841) in this Q/A here. Which, as far as I can see from a repository I took over, and guessing from the accepted answer, is wrong: the two files belong to the version control.","title":"What files in a Maven project should be committed to git?","body":"<p>I had a Maven project in VSCodium and had to decide whether to commit the <em>.project</em> file or not. That should be linked to in this Q/A since it happens with other IDE:s as well that have Maven extensions.</p>\n<p>This is 2010, only for Eclipse:</p>\n<p><a href=\"https://stackoverflow.com/questions/2818239/classpath-and-project-check-into-version-control-or-not\">.classpath and .project - check into version control or not?</a></p>\n<p>which says overall that it should be committed. I guess the discussion is timeless. It is a Maven generated file, but it should still be in the repository, and even more, if the repository is at work with the same setup and tools by the team.</p>\n<p>Other questions:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/116121/should-i-keep-my-project-files-under-version-control\">Should I keep my project files under version control? [closed]</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3611728/java-project-should-classpath-project-file-be-committed-into-repository\">Java project: should .classpath .project file be committed into repository? [duplicate]</a></li>\n</ul>\n<p>The same for the <em>.classpath</em>. Even if it is made by Maven, it should be in the repo.</p>\n<p>I am a beginner at Maven and only guess this. I cannot understand why this was not in this Q/A up to now. The accepted answer lists the ignored files, but from reading that, I was not fully sure what to do with these meta files from Maven. And there is even one <a href=\"https://stackoverflow.com/a/51793006/11154841\">answer that lists the two files as files that are to be ignored</a> in this Q/A here. Which, as far as I can see from a repository I took over, and guessing from the accepted answer, is wrong: the two files belong to the version control.</p>\n"}],"owner":{"account_id":10328696,"reputation":1586,"user_id":7619353,"accept_rate":33,"display_name":"tyleax"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54827,"favorite_count":0,"down_vote_count":2,"up_vote_count":30,"accepted_answer_id":51793051,"answer_count":4,"score":28,"last_activity_date":1674757555,"creation_date":1533928560,"question_id":51792830,"body_markdown":"I want to know what files in a Maven project should be committed to git.\r\n\r\nAm I suppose to perform a `mvn clean` before committing, or do I add certain files to the `.gitignore` file?","title":"What files in a Maven project should be committed to git?","body":"<p>I want to know what files in a Maven project should be committed to git.</p>\n\n<p>Am I suppose to perform a <code>mvn clean</code> before committing, or do I add certain files to the <code>.gitignore</code> file?</p>\n"},{"tags":["java","maven","annotations","indentation","checkstyle"],"comments":[{"owner":{"account_id":14751077,"reputation":556,"user_id":10653163,"display_name":"Bal&#225;zs B&#246;rcs&#246;k"},"score":0,"creation_date":1673525720,"post_id":69753371,"comment_id":132521586,"body_markdown":"I do not have access to the codebase anymore, but still, answers are welcome :) !","body":"I do not have access to the codebase anymore, but still, answers are welcome :) !"}],"answers":[{"tags":[],"owner":{"account_id":2345147,"reputation":118,"user_id":2055614,"display_name":"mlebedy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674757123,"creation_date":1674757123,"answer_id":75250144,"question_id":69753371,"body_markdown":"You can either change the `arrayInitIndent` option in the configuration to 8 (because your code is indented using 8 spaces), or you can change the indentation level in your code to 4.\r\n\r\n    @ApiResponses(value = {\r\n        @ApiResponse(description = &quot;foo&quot;,\r\n            content = {\r\n                @Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\r\n                    schema = @Schema(implementation = UgyTableDataResponse.class)),\r\n                @Content(mediaType = MediaType.APPLICATION_XML_VALUE,\r\n                    schema = @Schema(implementation = UgyTableDataResponse.class))\r\n            })\r\n    })","title":"How to change the allowed indentation level of an annotation array initialization child in Checkstyle?","body":"<p>You can either change the <code>arrayInitIndent</code> option in the configuration to 8 (because your code is indented using 8 spaces), or you can change the indentation level in your code to 4.</p>\n<pre><code>@ApiResponses(value = {\n    @ApiResponse(description = &quot;foo&quot;,\n        content = {\n            @Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\n                schema = @Schema(implementation = UgyTableDataResponse.class)),\n            @Content(mediaType = MediaType.APPLICATION_XML_VALUE,\n                schema = @Schema(implementation = UgyTableDataResponse.class))\n        })\n})\n</code></pre>\n"}],"owner":{"account_id":14751077,"reputation":556,"user_id":10653163,"display_name":"Bal&#225;zs B&#246;rcs&#246;k"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1440,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1674757123,"creation_date":1635420930,"question_id":69753371,"body_markdown":"In a project I work on we use Checkstyle via the `maven-checkstyle-plugin`. We also use `springdoc-openapi-ui`, thus on the controllers we use the `@ApiReponses` annotation. It has a rather complex syntax, but it works well, so I wrote something like this on a controller:\r\n\r\n    @ApiResponses(value = {\r\n            @ApiResponse(description = &quot;foo&quot;,\r\n                    content = {\r\n                            @Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\r\n                                    schema = @Schema(implementation = UgyTableDataResponse.class)),\r\n                            @Content(mediaType = MediaType.APPLICATION_XML_VALUE,\r\n                                    schema = @Schema(implementation = UgyTableDataResponse.class))\r\n                    })\r\n    })\r\n\r\nHowever both the `@ApiResponse` and `@Content` annotations are marked by Checkstyle with **Checkstyle: &#39;annotation array initialization&#39; child has incorrect indentation level 12, expected level should be 8.**\r\n\r\nI would like to change the Checkstyle settings so that I can keep the annotations in this well readable format.\r\n\r\nThe indentation settings in my `checkstyle.xml` are:\r\n\r\n    &lt;module name=&quot;Indentation&quot;&gt;\r\n            &lt;property name=&quot;basicOffset&quot; value=&quot;4&quot;/&gt;\r\n            &lt;property name=&quot;braceAdjustment&quot; value=&quot;0&quot;/&gt;\r\n            &lt;property name=&quot;caseIndent&quot; value=&quot;4&quot;/&gt;\r\n            &lt;property name=&quot;throwsIndent&quot; value=&quot;4&quot;/&gt;\r\n            &lt;property name=&quot;lineWrappingIndentation&quot; value=&quot;4&quot;/&gt;\r\n            &lt;property name=&quot;arrayInitIndent&quot; value=&quot;4&quot;/&gt;\r\n        &lt;/module&gt;\r\nThe plugin dependency in the POM is:\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.1.2&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;configLocation&gt;checkstyle.xml&lt;/configLocation&gt;\r\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n    &lt;consoleOutput&gt;true&lt;/consoleOutput&gt;\r\n    &lt;failsOnError&gt;true&lt;/failsOnError&gt;\r\n    &lt;linkXRef&gt;false&lt;/linkXRef&gt;\r\n  &lt;/configuration&gt;\r\n  &lt;executions&gt;\r\n    &lt;execution&gt;\r\n        &lt;id&gt;validate&lt;/id&gt;\r\n        &lt;phase&gt;validate&lt;/phase&gt;\r\n        &lt;goals&gt;\r\n          &lt;goal&gt;check&lt;/goal&gt;\r\n        &lt;/goals&gt;\r\n    &lt;/execution&gt;\r\n  &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"How to change the allowed indentation level of an annotation array initialization child in Checkstyle?","body":"<p>In a project I work on we use Checkstyle via the <code>maven-checkstyle-plugin</code>. We also use <code>springdoc-openapi-ui</code>, thus on the controllers we use the <code>@ApiReponses</code> annotation. It has a rather complex syntax, but it works well, so I wrote something like this on a controller:</p>\n<pre><code>@ApiResponses(value = {\n        @ApiResponse(description = &quot;foo&quot;,\n                content = {\n                        @Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\n                                schema = @Schema(implementation = UgyTableDataResponse.class)),\n                        @Content(mediaType = MediaType.APPLICATION_XML_VALUE,\n                                schema = @Schema(implementation = UgyTableDataResponse.class))\n                })\n})\n</code></pre>\n<p>However both the <code>@ApiResponse</code> and <code>@Content</code> annotations are marked by Checkstyle with <strong>Checkstyle: 'annotation array initialization' child has incorrect indentation level 12, expected level should be 8.</strong></p>\n<p>I would like to change the Checkstyle settings so that I can keep the annotations in this well readable format.</p>\n<p>The indentation settings in my <code>checkstyle.xml</code> are:</p>\n<pre><code>&lt;module name=&quot;Indentation&quot;&gt;\n        &lt;property name=&quot;basicOffset&quot; value=&quot;4&quot;/&gt;\n        &lt;property name=&quot;braceAdjustment&quot; value=&quot;0&quot;/&gt;\n        &lt;property name=&quot;caseIndent&quot; value=&quot;4&quot;/&gt;\n        &lt;property name=&quot;throwsIndent&quot; value=&quot;4&quot;/&gt;\n        &lt;property name=&quot;lineWrappingIndentation&quot; value=&quot;4&quot;/&gt;\n        &lt;property name=&quot;arrayInitIndent&quot; value=&quot;4&quot;/&gt;\n    &lt;/module&gt;\n</code></pre>\n<p>The plugin dependency in the POM is:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.1.2&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;configLocation&gt;checkstyle.xml&lt;/configLocation&gt;\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n    &lt;consoleOutput&gt;true&lt;/consoleOutput&gt;\n    &lt;failsOnError&gt;true&lt;/failsOnError&gt;\n    &lt;linkXRef&gt;false&lt;/linkXRef&gt;\n  &lt;/configuration&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n        &lt;id&gt;validate&lt;/id&gt;\n        &lt;phase&gt;validate&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;check&lt;/goal&gt;\n        &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","spring","network-programming","grpc","grpc-java"],"answers":[{"tags":[],"owner":{"account_id":19047941,"reputation":39,"user_id":13906745,"display_name":"Aniket Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674489967,"creation_date":1674489967,"answer_id":75212081,"question_id":75211164,"body_markdown":" - If you are using official grpc library then create client in following way.\r\n\r\n```\r\nManagedChannel channel = ManagedChannelBuilder.forAddress(&quot;localhost&quot;, 9089).usePlaintext().maxInboundMessageSize(Integer.MAX_VALUE).build();\r\n\r\nproductsBlockingStub prodStub = productsGrpc.newBlockingStub(channel);\r\n```\r\nYou can refer the grpc project [here][1]. Just add modification formaxInboundMessageSize\r\n\r\n- If you are using grpc-client-spring-boot-starter then you can either.\r\n\r\n```\r\n@GrpcClient(&quot;greeting-service&quot;)\r\n    private GreetingServiceGrpc.GreetingServiceBlockingStub greetingServiceBlockingStub;\r\n\r\n    greetingServiceBlockingStub = greetingServiceBlockingStub.withMaxInboundMessageSize(Integer.MAX_VALUE);\r\n    greetingServiceBlockingStub = greetingServiceBlockingStub.withMaxOutboundMessageSize(Integer.MAX_VALUE);\r\n```\r\nOr add this in props.\r\n```\r\ngrpc.client.greeting-service.max-inbound-message-size=9155241000\r\ngrpc.client.greeting-service.package-max-inbound-message-size=9155241000\r\ngrpc.client.greeting-service.server.max-inbound-message-size=9155241000\r\n```\r\n\r\n  [1]: https://github.com/deepakchandh/gRPC-java-implementation","title":"gRPC message exceeds maximum size 4194304: 5145024 java","body":"<ul>\n<li>If you are using official grpc library then create client in following way.</li>\n</ul>\n<pre><code>ManagedChannel channel = ManagedChannelBuilder.forAddress(&quot;localhost&quot;, 9089).usePlaintext().maxInboundMessageSize(Integer.MAX_VALUE).build();\n\nproductsBlockingStub prodStub = productsGrpc.newBlockingStub(channel);\n</code></pre>\n<p>You can refer the grpc project <a href=\"https://github.com/deepakchandh/gRPC-java-implementation\" rel=\"nofollow noreferrer\">here</a>. Just add modification formaxInboundMessageSize</p>\n<ul>\n<li>If you are using grpc-client-spring-boot-starter then you can either.</li>\n</ul>\n<pre><code>@GrpcClient(&quot;greeting-service&quot;)\n    private GreetingServiceGrpc.GreetingServiceBlockingStub greetingServiceBlockingStub;\n\n    greetingServiceBlockingStub = greetingServiceBlockingStub.withMaxInboundMessageSize(Integer.MAX_VALUE);\n    greetingServiceBlockingStub = greetingServiceBlockingStub.withMaxOutboundMessageSize(Integer.MAX_VALUE);\n</code></pre>\n<p>Or add this in props.</p>\n<pre><code>grpc.client.greeting-service.max-inbound-message-size=9155241000\ngrpc.client.greeting-service.package-max-inbound-message-size=9155241000\ngrpc.client.greeting-service.server.max-inbound-message-size=9155241000\n</code></pre>\n"}],"owner":{"account_id":19047941,"reputation":39,"user_id":13906745,"display_name":"Aniket Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3329,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75212081,"answer_count":1,"score":0,"last_activity_date":1674756651,"creation_date":1674485441,"question_id":75211164,"body_markdown":"On grpc client I am getting this error after calling the rpc method in server.\r\nI am using grpc-spring-boot-starter (java). Please tell me how to increase response size.\r\n\r\n\r\n``` io.grpc.StatusRuntimeException: RESOURCE_EXHAUSTED: gRPC message exceeds maximum size 4194304: 5145024\r\n    \tat io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:262)\r\n    \tat io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:243)\r\n    \tat io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:156)\r\n```","title":"gRPC message exceeds maximum size 4194304: 5145024 java","body":"<p>On grpc client I am getting this error after calling the rpc method in server.\nI am using grpc-spring-boot-starter (java). Please tell me how to increase response size.</p>\n<pre><code>        at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:262)\n        at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:243)\n        at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:156)\n</code></pre>\n"},{"tags":["java","maven","lombok"],"comments":[{"owner":{"account_id":11358426,"reputation":1127,"user_id":8327330,"display_name":"iamgirdhar"},"score":0,"creation_date":1666717693,"post_id":74197324,"comment_id":131001148,"body_markdown":"Please mention the dependency also that you are using for lombok in pom.xml","body":"Please mention the dependency also that you are using for lombok in pom.xml"},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1666717926,"post_id":74197324,"comment_id":131001219,"body_markdown":"Yes, this sounds like trying to use an older lombok jar when compiling on a newer release of `javac`.","body":"Yes, this sounds like trying to use an older lombok jar when compiling on a newer release of <code>javac</code>."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1666719194,"post_id":74197324,"comment_id":131001581,"body_markdown":"The JAR you&#39;re using for Lombok contains a class that doesn&#39;t have that method.  Looks like 1.18.24 is the latest version.  Try upgrading.","body":"The JAR you&#39;re using for Lombok contains a class that doesn&#39;t have that method.  Looks like 1.18.24 is the latest version.  Try upgrading."},{"owner":{"account_id":14495512,"reputation":107,"user_id":10470234,"display_name":"Young User"},"score":0,"creation_date":1666719212,"post_id":74197324,"comment_id":131001592,"body_markdown":"I have updated my question about some content from pom.xml.","body":"I have updated my question about some content from pom.xml."},{"owner":{"account_id":14495512,"reputation":107,"user_id":10470234,"display_name":"Young User"},"score":0,"creation_date":1666720077,"post_id":74197324,"comment_id":131001855,"body_markdown":"It;s interesting that when i change version of lomobok over 1.16.12 it&#39;s even not compile with mvn due to problem with mapping ... But in version 1.16.12 I get same erros (as version over 1.16.12 in mvn) in inteliJ... java: Unknown property &quot;averageTimeInSeconds&quot; in result type XXXX. Did you mean &quot;null&quot;?   CODE of mapping use mapstruct - &gt; @Mappings({\n\t\t\t@Mapping(target = &quot;averageTimeInSeconds&quot;, source = &quot;averageTimeInSeconds&quot;),\n\t})","body":"It;s interesting that when i change version of lomobok over 1.16.12 it&#39;s even not compile with mvn due to problem with mapping ... But in version 1.16.12 I get same erros (as version over 1.16.12 in mvn) in inteliJ... java: Unknown property &quot;averageTimeInSeconds&quot; in result type XXXX. Did you mean &quot;null&quot;?   CODE of mapping use mapstruct - &gt; @Mappings({ \t\t\t@Mapping(target = &quot;averageTimeInSeconds&quot;, source = &quot;averageTimeInSeconds&quot;), \t})"}],"answers":[{"tags":[],"owner":{"account_id":14495512,"reputation":107,"user_id":10470234,"display_name":"Young User"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667220546,"creation_date":1667220546,"answer_id":74263524,"question_id":74197324,"body_markdown":"Finally, I find a little strange solution on this error... I have changed Project settings -&gt; project sdk version from 1.7(Version of project in pom.xml) to  version with path which my mvn command have used (mvn --version jdk):\r\nJava version: 11.0.12, vendor: Eclipse Foundation, runtime: .\\Local\\Programs\\Eclipse Foundation\\jdk-11.0.12.7-hotspot .\r\nThank you for your help.","title":"Problem with lombok when compile with inteliJ","body":"<p>Finally, I find a little strange solution on this error... I have changed Project settings -&gt; project sdk version from 1.7(Version of project in pom.xml) to  version with path which my mvn command have used (mvn --version jdk):\nJava version: 11.0.12, vendor: Eclipse Foundation, runtime: .\\Local\\Programs\\Eclipse Foundation\\jdk-11.0.12.7-hotspot .\nThank you for your help.</p>\n"},{"tags":[],"owner":{"account_id":77251,"reputation":17324,"user_id":220627,"accept_rate":79,"display_name":"Adrian Smith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667920901,"creation_date":1667920901,"answer_id":74363140,"question_id":74197324,"body_markdown":"To whom it may concern: I had this exact error, in this case it was another IntelliJ module that I wasn&#39;t paying attention to which was causing the problem (as IntelliJ did not state which module, I had assumed it was the one I was working on and changing). Try:\r\n\r\n* Removing all modules that you aren&#39;t working on\r\n* Upgrading Lombok to the latest version","title":"Problem with lombok when compile with inteliJ","body":"<p>To whom it may concern: I had this exact error, in this case it was another IntelliJ module that I wasn't paying attention to which was causing the problem (as IntelliJ did not state which module, I had assumed it was the one I was working on and changing). Try:</p>\n<ul>\n<li>Removing all modules that you aren't working on</li>\n<li>Upgrading Lombok to the latest version</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":273044,"reputation":718,"user_id":564413,"display_name":"blandger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674756251,"creation_date":1674756251,"answer_id":75250040,"question_id":74197324,"body_markdown":"Error can happen when there is **JDK version mismatch**. E.g. sources are compiled with pom.xml and have a jdk11 version, but IDEA project has jdk17 configured. I switched between branches with 11 and 17 and forgot to change settings.","title":"Problem with lombok when compile with inteliJ","body":"<p>Error can happen when there is <strong>JDK version mismatch</strong>. E.g. sources are compiled with pom.xml and have a jdk11 version, but IDEA project has jdk17 configured. I switched between branches with 11 and 17 and forgot to change settings.</p>\n"}],"owner":{"account_id":14495512,"reputation":107,"user_id":10470234,"display_name":"Young User"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1747,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1674756251,"creation_date":1666715237,"question_id":74197324,"body_markdown":"I would like to compile my project. It works fine with command mvn clean install -U , but when I try to build it with intelij or run tests InteliJ throws :\r\n``` \r\njava: Lombok visitor handler class lombok.javac.handlers.HandleVal failed: java.lang.NoSuchMethodError: &#39;boolean com.sun.tools.javac.code.Symbol$TypeSymbol.isLocal()&#39;\r\n \r\n```\r\nI tried:\r\n - remove .idea\r\n - remove .m2\r\n - invalidate caches\r\n - mvn idea:idea / mvn clean:idea\r\n - processing annotation is on and lombok plugin is installed\r\n\r\nThis problem occurs in some microservices.\r\n\r\nDo you know a solution ?\r\n\r\nIn project (parent) Pom.xml dependency :\r\n```\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n...\r\n\t\t&lt;lombok.version&gt;1.18.10&lt;/lombok.version&gt;\r\n...\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nIn services pom.xml:\r\n```\r\n        &lt;path&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lombok.version}&lt;/version&gt;\r\n\t\t&lt;/path&gt;\r\n```","title":"Problem with lombok when compile with inteliJ","body":"<p>I would like to compile my project. It works fine with command mvn clean install -U , but when I try to build it with intelij or run tests InteliJ throws :</p>\n<pre><code>java: Lombok visitor handler class lombok.javac.handlers.HandleVal failed: java.lang.NoSuchMethodError: 'boolean com.sun.tools.javac.code.Symbol$TypeSymbol.isLocal()'\n \n</code></pre>\n<p>I tried:</p>\n<ul>\n<li>remove .idea</li>\n<li>remove .m2</li>\n<li>invalidate caches</li>\n<li>mvn idea:idea / mvn clean:idea</li>\n<li>processing annotation is on and lombok plugin is installed</li>\n</ul>\n<p>This problem occurs in some microservices.</p>\n<p>Do you know a solution ?</p>\n<p>In project (parent) Pom.xml dependency :</p>\n<pre><code>        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n...\n        &lt;lombok.version&gt;1.18.10&lt;/lombok.version&gt;\n...\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>In services pom.xml:</p>\n<pre><code>        &lt;path&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;${lombok.version}&lt;/version&gt;\n        &lt;/path&gt;\n</code></pre>\n"},{"tags":["java","android","mobile"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674650243,"post_id":75233713,"comment_id":132758761,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674726200,"post_id":75234555,"comment_id":132776718,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75234555/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26708408,"reputation":1,"user_id":20314223,"display_name":"Zukhriddin Kamolov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674756218,"creation_date":1674652679,"answer_id":75234555,"question_id":75233713,"body_markdown":"You can use this:        \r\n        \r\n        EditText editText = findViewById(R.id.edit_text);\r\n        if (editText.getText().toString().length() &gt;= 2){\r\n           String slice = editText.getText().toString().substring(0,2);\r\n        } else {\r\n            slice = editText.getText().toString();\r\n        }\r\n        Log.d(&quot;TAG&quot;, &quot;slice = &quot; + slice);\r\n\r\nWith this code, you can get first three digit or if editText has less numbers, you get max digits. \r\n\r\nExamples:\r\nhttps://www.programiz.com/java-programming/library/string/substring","title":"How to get into a variable only a part of the entered in EditText?","body":"<p>You can use this:</p>\n<pre><code>    EditText editText = findViewById(R.id.edit_text);\n    if (editText.getText().toString().length() &gt;= 2){\n       String slice = editText.getText().toString().substring(0,2);\n    } else {\n        slice = editText.getText().toString();\n    }\n    Log.d(&quot;TAG&quot;, &quot;slice = &quot; + slice);\n</code></pre>\n<p>With this code, you can get first three digit or if editText has less numbers, you get max digits.</p>\n<p>Examples:\n<a href=\"https://www.programiz.com/java-programming/library/string/substring\" rel=\"nofollow noreferrer\">https://www.programiz.com/java-programming/library/string/substring</a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674726252,"post_id":75235174,"comment_id":132776742,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75235174/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":13527126,"reputation":23,"user_id":9758652,"display_name":"El_Microman"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674655653,"creation_date":1674655538,"answer_id":75235174,"question_id":75233713,"body_markdown":"You can use the substring method to get the number of characters you want:\r\n\r\n    String num = editText.toString().substring(0,3); //&lt;-- gets the first 3 \r\n                                                        characters of input\r\n\r\nhttps://www.javatpoint.com/java-string-substring\r\n\r\n","title":"How to get into a variable only a part of the entered in EditText?","body":"<p>You can use the substring method to get the number of characters you want:</p>\n<pre><code>String num = editText.toString().substring(0,3); //&lt;-- gets the first 3 \n                                                    characters of input\n</code></pre>\n<p><a href=\"https://www.javatpoint.com/java-string-substring\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/java-string-substring</a></p>\n"}],"owner":{"account_id":27615999,"reputation":1,"user_id":21078046,"display_name":"Amir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1674756218,"creation_date":1674648231,"question_id":75233713,"body_markdown":"How to get into a variable in Java only part of the text or numbers entered in EditText (android). For example, from the entered number 123456789 to get only the first three digits 123?\r\n\r\nLooked on the Internet but didnt find anything sensible","title":"How to get into a variable only a part of the entered in EditText?","body":"<p>How to get into a variable in Java only part of the text or numbers entered in EditText (android). For example, from the entered number 123456789 to get only the first three digits 123?</p>\n<p>Looked on the Internet but didnt find anything sensible</p>\n"},{"tags":["java","mysql","spring-boot","h2"],"comments":[{"owner":{"account_id":10929,"reputation":545362,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"score":0,"creation_date":1674756537,"post_id":75249981,"comment_id":132786769,"body_markdown":"I searched the H2 SQL grammar documentation but as far as I can tell, it doesn&#39;t implement common table expressions. Do you have some reason to think H2 supports CTE syntax?","body":"I searched the H2 SQL grammar documentation but as far as I can tell, it doesn&#39;t implement common table expressions. Do you have some reason to think H2 supports CTE syntax?"},{"owner":{"account_id":10929,"reputation":545362,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"score":0,"creation_date":1674756617,"post_id":75249981,"comment_id":132786791,"body_markdown":"Many CTE queries can be rewritten as `SELECT ... FROM (SELECT ...) AS t`. Often you don&#39;t need to use a CTE except for recursive queries or if you reference the CTE more than once in the outer query.","body":"Many CTE queries can be rewritten as <code>SELECT ... FROM (SELECT ...) AS t</code>. Often you don&#39;t need to use a CTE except for recursive queries or if you reference the CTE more than once in the outer query."},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1674757304,"post_id":75249981,"comment_id":132786967,"body_markdown":"@BillKarwin, thanks. I thought the MYSQL mode can give such opportunity. It seems it isn&#39;t. So I&#39;ll follow your tip and will avoid such syntaxis","body":"@BillKarwin, thanks. I thought the MYSQL mode can give such opportunity. It seems it isn&#39;t. So I&#39;ll follow your tip and will avoid such syntaxis"},{"owner":{"account_id":16247179,"reputation":7205,"user_id":11731987,"display_name":"Evgenij Ryazanov"},"score":0,"creation_date":1674778324,"post_id":75249981,"comment_id":132791596,"body_markdown":"You need to provide a real query and complete stack trace of exception. `WITH cte as (SELECT * from personal_best LIMIT 1) SELECT * FROM cte` is valid for H2.","body":"You need to provide a real query and complete stack trace of exception. <code>WITH cte as (SELECT * from personal_best LIMIT 1) SELECT * FROM cte</code> is valid for H2."},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1674818651,"post_id":75249981,"comment_id":132798984,"body_markdown":"@EvgenijRyazanov let it be a real query. `WITH cte as (SELECT * from personal_best LIMIT 1) SELECT * FROM cte` also throws exception","body":"@EvgenijRyazanov let it be a real query. <code>WITH cte as (SELECT * from personal_best LIMIT 1) SELECT * FROM cte</code> also throws exception"},{"owner":{"account_id":16247179,"reputation":7205,"user_id":11731987,"display_name":"Evgenij Ryazanov"},"score":0,"creation_date":1674820046,"post_id":75249981,"comment_id":132799362,"body_markdown":"You need to provide full information about this exception, `Caused by:` part in the stack trace should contain original error from database.","body":"You need to provide full information about this exception, <code>Caused by:</code> part in the stack trace should contain original error from database."}],"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1674756015,"creation_date":1674756015,"question_id":75249981,"body_markdown":"I try to use the `WITH` statement in my SQL query via H2 database on the test layer, but I receive  the error:\r\n\r\n&gt; SQLGrammarException: could not prepare statement\r\n\r\n- I simplified the query for clear understanding:\r\n\r\n    WITH cte as (SELECT * from personal_best LIMIT 1) SELECT * FROM cte;\r\n\r\nThis query works well from the dev stage via MYSQL8:\r\n\r\n```java\r\n @Query(nativeQuery = true,\r\n            value = &quot;WITH cte as (SELECT * from personal_best LIMIT 1) SELECT * FROM cte&quot;)\r\n    PersonalBest getLastByExerciseAndRepeats();\r\n```\r\n\r\nBut I can&#39;t use such functionality on the `test` stage, where I use `H2`.\r\n\r\napplication.properties (test):\r\n\r\n```\r\nspring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=MYSQL\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=root\r\nspring.datasource.password=password\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.data.jpa.repositories.bootstrap-mode=default\r\nspring.h2.console.enabled=true\r\n\r\nspring.h2.console.settings.web-allow-others=true\r\nspring.datasource.generate-unique-name = false \r\nspring.h2.console.path=/h2-console/\r\n...\r\n```\r\n\r\nSo, does exist the way to use needed functionality via `H2`?\r\n\r\n","title":"How to correctly apply MYSQL mode to the H2 database? SQLGrammarException: could not prepare statement","body":"<p>I try to use the <code>WITH</code> statement in my SQL query via H2 database on the test layer, but I receive  the error:</p>\n<blockquote>\n<p>SQLGrammarException: could not prepare statement</p>\n</blockquote>\n<ul>\n<li><p>I simplified the query for clear understanding:</p>\n<p>WITH cte as (SELECT * from personal_best LIMIT 1) SELECT * FROM cte;</p>\n</li>\n</ul>\n<p>This query works well from the dev stage via MYSQL8:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Query(nativeQuery = true,\n            value = &quot;WITH cte as (SELECT * from personal_best LIMIT 1) SELECT * FROM cte&quot;)\n    PersonalBest getLastByExerciseAndRepeats();\n</code></pre>\n<p>But I can't use such functionality on the <code>test</code> stage, where I use <code>H2</code>.</p>\n<p>application.properties (test):</p>\n<pre><code>spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=MYSQL\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=root\nspring.datasource.password=password\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.data.jpa.repositories.bootstrap-mode=default\nspring.h2.console.enabled=true\n\nspring.h2.console.settings.web-allow-others=true\nspring.datasource.generate-unique-name = false \nspring.h2.console.path=/h2-console/\n...\n</code></pre>\n<p>So, does exist the way to use needed functionality via <code>H2</code>?</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1674741412,"post_id":75246607,"comment_id":132781336,"body_markdown":"Is this a paragraph indent?","body":"Is this a paragraph indent?"},{"owner":{"account_id":985099,"reputation":6304,"user_id":1003815,"accept_rate":73,"display_name":"RTF"},"score":1,"creation_date":1674748442,"post_id":75246607,"comment_id":132784041,"body_markdown":"It is the indent that I have a problem with. I hadn&#39;t thought of that terminology, I was only thinking of spacing/margin/padding, but I&#39;ve updated my example code with indentation set to zero on the paragraphs, it hasn&#39;t fixed it.","body":"It is the indent that I have a problem with. I hadn&#39;t thought of that terminology, I was only thinking of spacing/margin/padding, but I&#39;ve updated my example code with indentation set to zero on the paragraphs, it hasn&#39;t fixed it."}],"answers":[{"comments":[{"owner":{"account_id":985099,"reputation":6304,"user_id":1003815,"accept_rate":73,"display_name":"RTF"},"score":0,"creation_date":1674748021,"post_id":75247125,"comment_id":132783864,"body_markdown":"I think you&#39;re talking about the spacing above and below the paragraph, aren&#39;t you? The spacing that I have a problem with is to the left of the text (for &quot;Section Title&quot;) and to the right of the text (for &quot;Sub-Title&quot;). Its minor, but I really want it to line up with the document body indent i.e. &quot;Development...&quot;.","body":"I think you&#39;re talking about the spacing above and below the paragraph, aren&#39;t you? The spacing that I have a problem with is to the left of the text (for &quot;Section Title&quot;) and to the right of the text (for &quot;Sub-Title&quot;). Its minor, but I really want it to line up with the document body indent i.e. &quot;Development...&quot;."}],"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674755937,"creation_date":1674741550,"answer_id":75247125,"question_id":75246607,"body_markdown":"Those gaps, where the red arrows are pointing to, are not removable. The only thing one can set for a table is a negative left indent and additionally set the table size to be greater than the usable size between left and right page margin. After that, the table hangs at left into the left page margin and at right into the right page margin.\r\n\r\nTo do so, the page size and the left and right page margins must be known. Additional the table width needs to be set absolute (in TwIps) and not relative in percent.\r\n\r\nExample:\r\n\r\n    import java.io.*;\r\n    \r\n    import org.apache.poi.xwpf.usermodel.*;\r\n    import org.apache.poi.wp.usermodel.HeaderFooterType;\r\n    \r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.*;\r\n    \r\n    import java.math.BigInteger;\r\n    \r\n    public class CreateWordHeaderTable {\r\n        \r\n     static void setTableIndent(XWPFTable table, int tblIndW) {\r\n      if (table.getCTTbl().getTblPr() == null) table.getCTTbl().addNewTblPr();  \r\n      if (table.getCTTbl().getTblPr().getTblInd() == null) table.getCTTbl().getTblPr().addNewTblInd();  \r\n      table.getCTTbl().getTblPr().getTblInd().setW(tblIndW);\r\n      table.getCTTbl().getTblPr().getTblInd().setType(org.openxmlformats.schemas.wordprocessingml.x2006.main.STTblWidth.DXA);\r\n     }\r\n     \r\n     static void setDefaultPageSettings(XWPFDocument doc, int pageWidth, int pageHeight, int pageLeftMargin , int pageRightMargin) {\r\n      CTSectPr sectPr = doc.getDocument().getBody().getSectPr();\r\n      if (sectPr == null) sectPr = doc.getDocument().getBody().addNewSectPr();\r\n      CTPageSz pageSz = sectPr.addNewPgSz();\r\n      pageSz.setW(BigInteger.valueOf(pageWidth));\r\n      pageSz.setH(BigInteger.valueOf(pageHeight));\r\n      CTPageMar pageMar = sectPr.getPgMar();\r\n      if (pageMar == null) pageMar = sectPr.addNewPgMar();\r\n      pageMar.setLeft(BigInteger.valueOf(pageLeftMargin)); \r\n      pageMar.setRight(BigInteger.valueOf(pageRightMargin));\r\n      //pageMar.setTop(BigInteger.valueOf(720)); //720 TWentieths of an Inch Point (Twips) = 720/20 = 36 pt = 36/72 = 0.5&quot;\r\n      //pageMar.setBottom(BigInteger.valueOf(720));\r\n      //pageMar.setFooter(BigInteger.valueOf(720));\r\n      //pageMar.setHeader(BigInteger.valueOf(720));\r\n      //pageMar.setGutter(BigInteger.valueOf(720));\r\n     }\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n         \r\n      int TWIPS_PER_INCH = 1440;\r\n      \r\n      try (\r\n       XWPFDocument doc = new XWPFDocument();\r\n       FileOutputStream out = new FileOutputStream(&quot;./CreateWordHeaderTable.docx&quot;);\r\n       ) {\r\n           \r\n       int pageWidth = (int)Math.round(8.5 * TWIPS_PER_INCH); // page size letter\r\n       int pageHeight = (int)Math.round(11 * TWIPS_PER_INCH); // page size letter\r\n       int pageLeftMargin = (int)Math.round(1 * TWIPS_PER_INCH);\r\n       int pageRightMargin = (int)Math.round(1 * TWIPS_PER_INCH);\r\n    \r\n       setDefaultPageSettings(doc, pageWidth, pageHeight, pageLeftMargin, pageRightMargin);\r\n       \r\n       // the body content\r\n       XWPFParagraph paragraph = doc.createParagraph();\r\n       XWPFRun run = paragraph.createRun();  \r\n       run.setText(&quot;The Body... lorem ipsum...&quot;);\r\n    \r\n       // create header\r\n       XWPFHeader header = doc.createHeader(HeaderFooterType.DEFAULT);\r\n       XWPFTable table = header.createTable(1, 2);\r\n       //table.removeBorders();\r\n       table.setCellMargins(0, 0, 0, 0);\r\n       \r\n       int leftTableIndent = (int)Math.round(-0.025 * TWIPS_PER_INCH);\r\n       setTableIndent(table, leftTableIndent);\r\n       //table.setWidth(&quot;100%&quot;);\r\n       int tableOversize = (int)Math.round(0.15 * TWIPS_PER_INCH);\r\n       int tableWidth = pageWidth - pageLeftMargin - pageRightMargin + tableOversize;\r\n       table.setWidth(tableWidth);\r\n       \r\n       /*\r\n        * Create CTTblGrid for this table with widths of the 2 columns. \r\n        * Necessary for Libreoffice/Openoffice to accept the column widths.\r\n        */\r\n       table.getCTTbl().addNewTblGrid().addNewGridCol().setW(BigInteger.valueOf(1 * TWIPS_PER_INCH));\r\n       table.getCTTbl().getTblGrid().addNewGridCol().setW(BigInteger.valueOf(1 * TWIPS_PER_INCH));\r\n      \r\n       /*\r\n        * Left-Hand Cell\r\n        */\r\n       XWPFTableRow tableRow = table.getRow(0);\r\n       XWPFTableCell cell = tableRow.getCell(0); \r\n    \r\n       cell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.BOTTOM);\r\n       cell.setWidth(&quot;50%&quot;);\r\n    \r\n       paragraph = doc.createParagraph();\r\n       paragraph = cell.getParagraphArray(0);\r\n       if (paragraph == null) paragraph = cell.addParagraph();\r\n    \r\n       paragraph.setAlignment(ParagraphAlignment.LEFT);\r\n       run = paragraph.createRun();\r\n       run = paragraph.createRun();\r\n       run.setFontFamily(&quot;Helvetica&quot;);\r\n       run.setFontSize(18);\r\n       run.setText(&quot;Section Title&quot;);\r\n    \r\n       /*\r\n        * Right-Hand Cell\r\n        */\r\n       cell = tableRow.getCell(1); \r\n       cell.setWidth(&quot;50%&quot;);\r\n       cell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.BOTTOM);\r\n    \r\n       paragraph = cell.getParagraphArray(0);\r\n       if (paragraph == null) paragraph = cell.addParagraph();\r\n    \r\n       paragraph.setAlignment(ParagraphAlignment.RIGHT);\r\n       run = paragraph.createRun();\r\n       run.setFontFamily(&quot;Helvetica&quot;);\r\n       run.setFontSize(15);\r\n       run.setText(&quot;Sub-Title&quot;);\r\n    \r\n       paragraph = header.createParagraph();\r\n       paragraph.setAlignment(ParagraphAlignment.LEFT);\r\n       run = paragraph.createRun();\r\n       run.setText(&quot;|...Next Line in Header...|&quot;);\r\n      \r\n       doc.write(out);\r\n       \r\n      }\r\n     }\r\n    }\r\n\r\nNevertheless the exact size of the negative left indent and the oversize of the table can only be got via try and error. And I doubt all word processing applications, which are able to render `*.docx`, will rendering this the same. So I would not do this and ignore those small gaps. Word processing is word processing and not graphic processing. Means: Word processing is not pixel accurate.","title":"Unexplained spacing created in Word Doc table using Apache POI","body":"<p>Those gaps, where the red arrows are pointing to, are not removable. The only thing one can set for a table is a negative left indent and additionally set the table size to be greater than the usable size between left and right page margin. After that, the table hangs at left into the left page margin and at right into the right page margin.</p>\n<p>To do so, the page size and the left and right page margins must be known. Additional the table width needs to be set absolute (in TwIps) and not relative in percent.</p>\n<p>Example:</p>\n<pre><code>import java.io.*;\n\nimport org.apache.poi.xwpf.usermodel.*;\nimport org.apache.poi.wp.usermodel.HeaderFooterType;\n\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.*;\n\nimport java.math.BigInteger;\n\npublic class CreateWordHeaderTable {\n    \n static void setTableIndent(XWPFTable table, int tblIndW) {\n  if (table.getCTTbl().getTblPr() == null) table.getCTTbl().addNewTblPr();  \n  if (table.getCTTbl().getTblPr().getTblInd() == null) table.getCTTbl().getTblPr().addNewTblInd();  \n  table.getCTTbl().getTblPr().getTblInd().setW(tblIndW);\n  table.getCTTbl().getTblPr().getTblInd().setType(org.openxmlformats.schemas.wordprocessingml.x2006.main.STTblWidth.DXA);\n }\n \n static void setDefaultPageSettings(XWPFDocument doc, int pageWidth, int pageHeight, int pageLeftMargin , int pageRightMargin) {\n  CTSectPr sectPr = doc.getDocument().getBody().getSectPr();\n  if (sectPr == null) sectPr = doc.getDocument().getBody().addNewSectPr();\n  CTPageSz pageSz = sectPr.addNewPgSz();\n  pageSz.setW(BigInteger.valueOf(pageWidth));\n  pageSz.setH(BigInteger.valueOf(pageHeight));\n  CTPageMar pageMar = sectPr.getPgMar();\n  if (pageMar == null) pageMar = sectPr.addNewPgMar();\n  pageMar.setLeft(BigInteger.valueOf(pageLeftMargin)); \n  pageMar.setRight(BigInteger.valueOf(pageRightMargin));\n  //pageMar.setTop(BigInteger.valueOf(720)); //720 TWentieths of an Inch Point (Twips) = 720/20 = 36 pt = 36/72 = 0.5&quot;\n  //pageMar.setBottom(BigInteger.valueOf(720));\n  //pageMar.setFooter(BigInteger.valueOf(720));\n  //pageMar.setHeader(BigInteger.valueOf(720));\n  //pageMar.setGutter(BigInteger.valueOf(720));\n }\n\n public static void main(String[] args) throws Exception {\n     \n  int TWIPS_PER_INCH = 1440;\n  \n  try (\n   XWPFDocument doc = new XWPFDocument();\n   FileOutputStream out = new FileOutputStream(&quot;./CreateWordHeaderTable.docx&quot;);\n   ) {\n       \n   int pageWidth = (int)Math.round(8.5 * TWIPS_PER_INCH); // page size letter\n   int pageHeight = (int)Math.round(11 * TWIPS_PER_INCH); // page size letter\n   int pageLeftMargin = (int)Math.round(1 * TWIPS_PER_INCH);\n   int pageRightMargin = (int)Math.round(1 * TWIPS_PER_INCH);\n\n   setDefaultPageSettings(doc, pageWidth, pageHeight, pageLeftMargin, pageRightMargin);\n   \n   // the body content\n   XWPFParagraph paragraph = doc.createParagraph();\n   XWPFRun run = paragraph.createRun();  \n   run.setText(&quot;The Body... lorem ipsum...&quot;);\n\n   // create header\n   XWPFHeader header = doc.createHeader(HeaderFooterType.DEFAULT);\n   XWPFTable table = header.createTable(1, 2);\n   //table.removeBorders();\n   table.setCellMargins(0, 0, 0, 0);\n   \n   int leftTableIndent = (int)Math.round(-0.025 * TWIPS_PER_INCH);\n   setTableIndent(table, leftTableIndent);\n   //table.setWidth(&quot;100%&quot;);\n   int tableOversize = (int)Math.round(0.15 * TWIPS_PER_INCH);\n   int tableWidth = pageWidth - pageLeftMargin - pageRightMargin + tableOversize;\n   table.setWidth(tableWidth);\n   \n   /*\n    * Create CTTblGrid for this table with widths of the 2 columns. \n    * Necessary for Libreoffice/Openoffice to accept the column widths.\n    */\n   table.getCTTbl().addNewTblGrid().addNewGridCol().setW(BigInteger.valueOf(1 * TWIPS_PER_INCH));\n   table.getCTTbl().getTblGrid().addNewGridCol().setW(BigInteger.valueOf(1 * TWIPS_PER_INCH));\n  \n   /*\n    * Left-Hand Cell\n    */\n   XWPFTableRow tableRow = table.getRow(0);\n   XWPFTableCell cell = tableRow.getCell(0); \n\n   cell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.BOTTOM);\n   cell.setWidth(&quot;50%&quot;);\n\n   paragraph = doc.createParagraph();\n   paragraph = cell.getParagraphArray(0);\n   if (paragraph == null) paragraph = cell.addParagraph();\n\n   paragraph.setAlignment(ParagraphAlignment.LEFT);\n   run = paragraph.createRun();\n   run = paragraph.createRun();\n   run.setFontFamily(&quot;Helvetica&quot;);\n   run.setFontSize(18);\n   run.setText(&quot;Section Title&quot;);\n\n   /*\n    * Right-Hand Cell\n    */\n   cell = tableRow.getCell(1); \n   cell.setWidth(&quot;50%&quot;);\n   cell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.BOTTOM);\n\n   paragraph = cell.getParagraphArray(0);\n   if (paragraph == null) paragraph = cell.addParagraph();\n\n   paragraph.setAlignment(ParagraphAlignment.RIGHT);\n   run = paragraph.createRun();\n   run.setFontFamily(&quot;Helvetica&quot;);\n   run.setFontSize(15);\n   run.setText(&quot;Sub-Title&quot;);\n\n   paragraph = header.createParagraph();\n   paragraph.setAlignment(ParagraphAlignment.LEFT);\n   run = paragraph.createRun();\n   run.setText(&quot;|...Next Line in Header...|&quot;);\n  \n   doc.write(out);\n   \n  }\n }\n}\n</code></pre>\n<p>Nevertheless the exact size of the negative left indent and the oversize of the table can only be got via try and error. And I doubt all word processing applications, which are able to render <code>*.docx</code>, will rendering this the same. So I would not do this and ignore those small gaps. Word processing is word processing and not graphic processing. Means: Word processing is not pixel accurate.</p>\n"}],"owner":{"account_id":985099,"reputation":6304,"user_id":1003815,"accept_rate":73,"display_name":"RTF"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75247125,"answer_count":1,"score":1,"last_activity_date":1674755937,"creation_date":1674738813,"question_id":75246607,"body_markdown":"I&#39;m trying to create a header in a Word Document with the Apache POI library (v5.2.3). I&#39;m using a table so I can get the alignment that I&#39;m looking for. This is the result I&#39;m getting:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI won&#39;t be keeping the table/cell borders, but I&#39;ve left them in to explain the problem. There&#39;s some margin/padding/spacing between the left-most edge of the table and the &quot;Section Title&quot; text, and then similar problem on the right side. I can&#39;t figure out what is creating this spacing or how to remove it. I&#39;ve tried investigating the word doc result in LibreOffice, but I don&#39;t understand what element is causing the spacing i.e. the table, the cells or the paragraph wrapper for the text. The text labels themselves definitely do not contain any extra whitespace characters around them. The phantom indentation does not disappear when the table/cell borders are removed.\r\n\r\n    int TWIPS_PER_INCH = 1440;\r\n    \r\n    XWPFHeader header = doc.createHeader(HeaderFooterType.DEFAULT);\r\n    XWPFTable table = header.createTable(1, 2);\r\n    //table.removeBorders();\r\n    table.setWidth(&quot;100%&quot;);\r\n    table.setCellMargins(0, 0, 0, 0);\r\n\r\n    /*\r\n     * Create CTTblGrid for this table with widths of the 2 columns. \r\n     * Necessary for Libreoffice/Openoffice to accept the column widths.\r\n     */\r\n    table.getCTTbl().addNewTblGrid().addNewGridCol().setW(BigInteger.valueOf(3 * TWIPS_PER_INCH));\r\n    table.getCTTbl().getTblGrid().addNewGridCol().setW(BigInteger.valueOf(3 * TWIPS_PER_INCH));\r\n    \r\n    /*\r\n     * Left-Hand Cell\r\n     */\r\n    XWPFTableRow tableRow = table.getRow(0);\r\n    XWPFTableCell cell = tableRow.getCell(0); \r\n    \r\n    cell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.BOTTOM);\r\n    cell.setWidth(&quot;50%&quot;);\r\n\r\n    XWPFParagraph paragraph = doc.createParagraph();\r\n    paragraph = cell.getParagraphArray(0);\r\n    if (paragraph == null) paragraph = cell.addParagraph();\r\n    \r\n    paragraph.setAlignment(ParagraphAlignment.LEFT);\r\n    paragraph.setSpacingBefore(0);\r\n    paragraph.setSpacingAfter(0);\r\n    paragraph.setFirstLineIndent(0);\r\n    paragraph.setIndentationLeft(0);\r\n\r\n    XWPFRun run = paragraph.createRun();\r\n    run = paragraph.createRun();\r\n    run.setFontFamily(&quot;Helvetica&quot;);\r\n    run.setFontSize(18);\r\n    run.setText(&quot;Section Title&quot;);\r\n\r\n    /*\r\n     * Right-Hand Cell\r\n     */\r\n    cell = tableRow.getCell(1); \r\n    cell.setWidth(&quot;50%&quot;);\r\n    cell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.BOTTOM);\r\n    \r\n    paragraph = cell.getParagraphArray(0);\r\n    if (paragraph == null) paragraph = cell.addParagraph();\r\n    \r\n    paragraph.setAlignment(ParagraphAlignment.RIGHT);\r\n    paragraph.setSpacingBefore(0);\r\n    paragraph.setSpacingAfter(0);\r\n    paragraph.setFirstLineIndent(0);\r\n    paragraph.setIndentationRight(0);\r\n    \r\n    run = paragraph.createRun();\r\n    run.setFontFamily(&quot;Helvetica&quot;);\r\n    run.setFontSize(15);\r\n    run.setText(&quot;Sub-Title&quot;);\r\n    \r\n    logger.log( String.format(&quot;BOTTOM BORDER SPACE: [%s]\\n&quot;, table.getBottomBorderSpace()) );\r\n    logger.log( String.format(&quot;TOP BORDER SPACE: [%s]\\n&quot;, table.getTopBorderSpace()) );\r\n    logger.log( String.format(&quot;LEFT BORDER SPACE: [%s]\\n&quot;, table.getLeftBorderSpace()) );\r\n    logger.log( String.format(&quot;RIGHT BORDER SPACE: [%s]\\n&quot;, table.getRightBorderSpace()) );\r\n    logger.log( String.format(&quot;INSIDE HOR BORDER SPACE: [%s]\\n&quot;, table.getInsideHBorderSpace()) );\r\n    logger.log( String.format(&quot;INSIDE VERT BORDER SPACE: [%s]\\n&quot;, table.getInsideVBorderSpace()) );\r\n    \r\n    logger.log( String.format(&quot;BOTTOM CELL MARGIN: [%s]\\n&quot;, table.getCellMarginBottom()) );\r\n    logger.log( String.format(&quot;TOP CELL MARGIN: [%s]\\n&quot;, table.getCellMarginTop()) );\r\n    logger.log( String.format(&quot;LEFT CELL MARGIN: [%s]\\n&quot;, table.getCellMarginLeft()) );\r\n    logger.log( String.format(&quot;RIGHT CELL MARGIN: [%s]\\n&quot;, table.getCellMarginRight()) );\r\n\r\nHere&#39;s the output from that logging above:\r\n\r\n    BOTTOM BORDER SPACE: [-1]\r\n    TOP BORDER SPACE: [-1]\r\n    LEFT BORDER SPACE: [-1]\r\n    RIGHT BORDER SPACE: [-1]\r\n    INSIDE HOR BORDER SPACE: [-1]\r\n    INSIDE VERT BORDER SPACE: [-1]\r\n    BOTTOM CELL MARGIN: [0]\r\n    TOP CELL MARGIN: [0]\r\n    LEFT CELL MARGIN: [0]\r\n    RIGHT CELL MARGIN: [0]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/61Wdh.png","title":"Unexplained spacing created in Word Doc table using Apache POI","body":"<p>I'm trying to create a header in a Word Document with the Apache POI library (v5.2.3). I'm using a table so I can get the alignment that I'm looking for. This is the result I'm getting:</p>\n<p><a href=\"https://i.stack.imgur.com/61Wdh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/61Wdh.png\" alt=\"enter image description here\" /></a></p>\n<p>I won't be keeping the table/cell borders, but I've left them in to explain the problem. There's some margin/padding/spacing between the left-most edge of the table and the &quot;Section Title&quot; text, and then similar problem on the right side. I can't figure out what is creating this spacing or how to remove it. I've tried investigating the word doc result in LibreOffice, but I don't understand what element is causing the spacing i.e. the table, the cells or the paragraph wrapper for the text. The text labels themselves definitely do not contain any extra whitespace characters around them. The phantom indentation does not disappear when the table/cell borders are removed.</p>\n<pre><code>int TWIPS_PER_INCH = 1440;\n\nXWPFHeader header = doc.createHeader(HeaderFooterType.DEFAULT);\nXWPFTable table = header.createTable(1, 2);\n//table.removeBorders();\ntable.setWidth(&quot;100%&quot;);\ntable.setCellMargins(0, 0, 0, 0);\n\n/*\n * Create CTTblGrid for this table with widths of the 2 columns. \n * Necessary for Libreoffice/Openoffice to accept the column widths.\n */\ntable.getCTTbl().addNewTblGrid().addNewGridCol().setW(BigInteger.valueOf(3 * TWIPS_PER_INCH));\ntable.getCTTbl().getTblGrid().addNewGridCol().setW(BigInteger.valueOf(3 * TWIPS_PER_INCH));\n\n/*\n * Left-Hand Cell\n */\nXWPFTableRow tableRow = table.getRow(0);\nXWPFTableCell cell = tableRow.getCell(0); \n\ncell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.BOTTOM);\ncell.setWidth(&quot;50%&quot;);\n\nXWPFParagraph paragraph = doc.createParagraph();\nparagraph = cell.getParagraphArray(0);\nif (paragraph == null) paragraph = cell.addParagraph();\n\nparagraph.setAlignment(ParagraphAlignment.LEFT);\nparagraph.setSpacingBefore(0);\nparagraph.setSpacingAfter(0);\nparagraph.setFirstLineIndent(0);\nparagraph.setIndentationLeft(0);\n\nXWPFRun run = paragraph.createRun();\nrun = paragraph.createRun();\nrun.setFontFamily(&quot;Helvetica&quot;);\nrun.setFontSize(18);\nrun.setText(&quot;Section Title&quot;);\n\n/*\n * Right-Hand Cell\n */\ncell = tableRow.getCell(1); \ncell.setWidth(&quot;50%&quot;);\ncell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.BOTTOM);\n\nparagraph = cell.getParagraphArray(0);\nif (paragraph == null) paragraph = cell.addParagraph();\n\nparagraph.setAlignment(ParagraphAlignment.RIGHT);\nparagraph.setSpacingBefore(0);\nparagraph.setSpacingAfter(0);\nparagraph.setFirstLineIndent(0);\nparagraph.setIndentationRight(0);\n\nrun = paragraph.createRun();\nrun.setFontFamily(&quot;Helvetica&quot;);\nrun.setFontSize(15);\nrun.setText(&quot;Sub-Title&quot;);\n\nlogger.log( String.format(&quot;BOTTOM BORDER SPACE: [%s]\\n&quot;, table.getBottomBorderSpace()) );\nlogger.log( String.format(&quot;TOP BORDER SPACE: [%s]\\n&quot;, table.getTopBorderSpace()) );\nlogger.log( String.format(&quot;LEFT BORDER SPACE: [%s]\\n&quot;, table.getLeftBorderSpace()) );\nlogger.log( String.format(&quot;RIGHT BORDER SPACE: [%s]\\n&quot;, table.getRightBorderSpace()) );\nlogger.log( String.format(&quot;INSIDE HOR BORDER SPACE: [%s]\\n&quot;, table.getInsideHBorderSpace()) );\nlogger.log( String.format(&quot;INSIDE VERT BORDER SPACE: [%s]\\n&quot;, table.getInsideVBorderSpace()) );\n\nlogger.log( String.format(&quot;BOTTOM CELL MARGIN: [%s]\\n&quot;, table.getCellMarginBottom()) );\nlogger.log( String.format(&quot;TOP CELL MARGIN: [%s]\\n&quot;, table.getCellMarginTop()) );\nlogger.log( String.format(&quot;LEFT CELL MARGIN: [%s]\\n&quot;, table.getCellMarginLeft()) );\nlogger.log( String.format(&quot;RIGHT CELL MARGIN: [%s]\\n&quot;, table.getCellMarginRight()) );\n</code></pre>\n<p>Here's the output from that logging above:</p>\n<pre><code>BOTTOM BORDER SPACE: [-1]\nTOP BORDER SPACE: [-1]\nLEFT BORDER SPACE: [-1]\nRIGHT BORDER SPACE: [-1]\nINSIDE HOR BORDER SPACE: [-1]\nINSIDE VERT BORDER SPACE: [-1]\nBOTTOM CELL MARGIN: [0]\nTOP CELL MARGIN: [0]\nLEFT CELL MARGIN: [0]\nRIGHT CELL MARGIN: [0]\n</code></pre>\n"},{"tags":["java","javafx","keyboard","event-handling"],"answers":[{"tags":[],"owner":{"account_id":2069490,"reputation":18155,"user_id":1844265,"accept_rate":72,"display_name":"Roland"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1445290120,"creation_date":1445290120,"answer_id":33224242,"question_id":33224161,"body_markdown":"Use an event filter and whatever [keyevent][1] you need, here I use [ANY][2]:\r\n\r\n\t\t\tscene.addEventFilter(KeyEvent.ANY, keyEvent -&gt; {\r\n\t\t\t\tSystem.out.println(keyEvent);\r\n\t\t\t});\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/api/javafx/scene/input/KeyEvent.html\r\n  [2]: https://docs.oracle.com/javase/8/javafx/api/javafx/scene/input/KeyEvent.html#ANY","title":"How do I run a function on a specific key press in JavaFX?","body":"<p>Use an event filter and whatever <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/input/KeyEvent.html\" rel=\"nofollow\">keyevent</a> you need, here I use <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/input/KeyEvent.html#ANY\" rel=\"nofollow\">ANY</a>:</p>\n\n<pre><code>        scene.addEventFilter(KeyEvent.ANY, keyEvent -&gt; {\n            System.out.println(keyEvent);\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1674755842,"creation_date":1445290368,"answer_id":33224297,"question_id":33224161,"body_markdown":"Just check the code of the key that was pressed:\r\n\r\n    scene.setOnKeyPressed(e -&gt; {\r\n        if (e.getCode() == KeyCode.A) {\r\n            System.out.println(&quot;The &#39;A&#39; key was pressed&quot;);\r\n        }\r\n    });","title":"How do I run a function on a specific key press in JavaFX?","body":"<p>Just check the code of the key that was pressed:</p>\n<pre><code>scene.setOnKeyPressed(e -&gt; {\n    if (e.getCode() == KeyCode.A) {\n        System.out.println(&quot;The 'A' key was pressed&quot;);\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":3018489,"reputation":711,"user_id":2560035,"accept_rate":86,"display_name":"user2560035"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36479,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":33224297,"answer_count":2,"score":9,"last_activity_date":1674755842,"creation_date":1445289810,"question_id":33224161,"body_markdown":"I have a program in javafx that is running and I want to call a function inside that program when a specific key is pressed on the keyboard (for example, the &quot;a&quot; key).  I tried using an event handler on my scene but KEY_PRESSED seems to go off when any key is pressed, unless I am using it wrong. KEY_TYPED seems like it might suit my needs, but I&#39;ve only found examples of that one in relation to text boxes, which is not what I&#39;m looking for. Does anyone know how to do this, or have a good resource I can consult for something like this","title":"How do I run a function on a specific key press in JavaFX?","body":"<p>I have a program in javafx that is running and I want to call a function inside that program when a specific key is pressed on the keyboard (for example, the \"a\" key).  I tried using an event handler on my scene but KEY_PRESSED seems to go off when any key is pressed, unless I am using it wrong. KEY_TYPED seems like it might suit my needs, but I've only found examples of that one in relation to text boxes, which is not what I'm looking for. Does anyone know how to do this, or have a good resource I can consult for something like this</p>\n"},{"tags":["java","arrays","stringtokenizer"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1674750411,"post_id":75248773,"comment_id":132784786,"body_markdown":"You don&#39;t show how you initialized the (legacy class) `StringTokenizer`","body":"You don&#39;t show how you initialized the (legacy class) <code>StringTokenizer</code>"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1674750465,"post_id":75248773,"comment_id":132784805,"body_markdown":"Can you provide a full example of input and the output you&#39;re expecting? That 7-level split doesn&#39;t seem very efficient or maintainable.","body":"Can you provide a full example of input and the output you&#39;re expecting? That 7-level split doesn&#39;t seem very efficient or maintainable."},{"owner":{"account_id":23924614,"reputation":1,"user_id":17919871,"display_name":"astroprab"},"score":0,"creation_date":1674750778,"post_id":75248773,"comment_id":132784908,"body_markdown":"for( ; ; ){\n                    currentString = asciiFile.readString();\n                    StringTokenizer tokenizer = new StringTokenizer(currentString);","body":"for( ; ; ){                     currentString = asciiFile.readString();                     StringTokenizer tokenizer = new StringTokenizer(currentString);"},{"owner":{"account_id":23924614,"reputation":1,"user_id":17919871,"display_name":"astroprab"},"score":0,"creation_date":1674750797,"post_id":75248773,"comment_id":132784915,"body_markdown":"And the input right now is &quot;Have\n\noutputting to [ ]","body":"And the input right now is &quot;Have  outputting to [ ]"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1674750881,"post_id":75248773,"comment_id":132784944,"body_markdown":"That&#39;s not how you use a `StringTokenizer` (not that you should be using it at all). Are you saying your file contains *&quot;Have outputting to [ ]*?","body":"That&#39;s not how you use a <code>StringTokenizer</code> (not that you should be using it at all). Are you saying your file contains <i>&quot;Have outputting to [ ]</i>?"},{"owner":{"account_id":23924614,"reputation":1,"user_id":17919871,"display_name":"astroprab"},"score":0,"creation_date":1674750967,"post_id":75248773,"comment_id":132784968,"body_markdown":"no the input is &quot;Have\n\nand this outputs to [ ]\n\nall other words output normally\nword. to [word]\n\nback?&quot; to [back]","body":"no the input is &quot;Have  and this outputs to [ ]  all other words output normally word. to [word]  back?&quot; to [back]"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1674750969,"post_id":75248773,"comment_id":132784969,"body_markdown":"Please show an example of your String you are trying to split.","body":"Please show an example of your String you are trying to split."},{"owner":{"account_id":23924614,"reputation":1,"user_id":17919871,"display_name":"astroprab"},"score":0,"creation_date":1674751037,"post_id":75248773,"comment_id":132784988,"body_markdown":"Losing my identity, wondering, &quot;Have I gone insane?&quot;\n\nthis is the string it has trouble with, u can see it&#39;s because of the , and &quot; in the same area","body":"Losing my identity, wondering, &quot;Have I gone insane?&quot;  this is the string it has trouble with, u can see it&#39;s because of the , and &quot; in the same area"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1674751104,"post_id":75248773,"comment_id":132785011,"body_markdown":"*no the input is &quot;Have and this outputs to [ ] all other words output normally word. to [word] back?&quot;* And what output are you hoping for?","body":"<i>no the input is &quot;Have and this outputs to [ ] all other words output normally word. to [word] back?&quot;</i> And what output are you hoping for?"},{"owner":{"account_id":23924614,"reputation":1,"user_id":17919871,"display_name":"astroprab"},"score":0,"creation_date":1674751252,"post_id":75248773,"comment_id":132785059,"body_markdown":"I&#39;m hoping for , &quot;Have to output to [Have]","body":"I&#39;m hoping for , &quot;Have to output to [Have]"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1674755508,"post_id":75248773,"comment_id":132786452,"body_markdown":"what are some examples of input and expected output?","body":"what are some examples of input and expected output?"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674752030,"creation_date":1674751348,"answer_id":75249148,"question_id":75248773,"body_markdown":"Here is one way if you want to split the line on non-letters.\r\n\r\n`[^A-Za-z]+` split on one or more of non-letters\r\n```\r\nString line = &quot;wordA, wordB; wordC;;; wordD, wordE!?+- !wordF??, !wordG!, wordH, wordI&quot;;\r\nString[] words = line.split(&quot;[^A-Za-z]+&quot;);\r\nfor (String word : words) {\r\n    System.out.println(word);\r\n}\r\n```\r\nprints\r\n```\r\nwordA\r\nwordB\r\nwordC\r\nwordD\r\nwordE\r\nwordF\r\nwordG\r\nwordH\r\nwordI\r\n```\r\n\r\nOn the other hand, if you want to remove those characters from a word, use a similar pattern. No need to specify the non-letter characters separately.\r\n```\r\nString word = &quot;C:om!&gt;{}.p*u**te,;rs&quot;;\r\nword = word.replaceAll(&quot;[^A-Za-z]&quot;,&quot;&quot;);\r\nSystem.out.println(word);\r\n```\r\nprints\r\n```\r\nComputers","title":"Trying to delete all non letter parts of a word but this line deletes the whole word &#39;&quot;Have&#39; from the tokenizer","body":"<p>Here is one way if you want to split the line on non-letters.</p>\n<p><code>[^A-Za-z]+</code> split on one or more of non-letters</p>\n<pre><code>String line = &quot;wordA, wordB; wordC;;; wordD, wordE!?+- !wordF??, !wordG!, wordH, wordI&quot;;\nString[] words = line.split(&quot;[^A-Za-z]+&quot;);\nfor (String word : words) {\n    System.out.println(word);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>wordA\nwordB\nwordC\nwordD\nwordE\nwordF\nwordG\nwordH\nwordI\n</code></pre>\n<p>On the other hand, if you want to remove those characters from a word, use a similar pattern. No need to specify the non-letter characters separately.</p>\n<pre><code>String word = &quot;C:om!&gt;{}.p*u**te,;rs&quot;;\nword = word.replaceAll(&quot;[^A-Za-z]&quot;,&quot;&quot;);\nSystem.out.println(word);\n</code></pre>\n<p>prints</p>\n<pre><code>Computers\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675685752,"post_id":75249158,"comment_id":132975749,"body_markdown":"If this is the correct answer to your question please accept it.","body":"If this is the correct answer to your question please accept it."}],"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674751396,"creation_date":1674751396,"answer_id":75249158,"question_id":75248773,"body_markdown":"Try this. \r\n\r\nThe \\ is to escape the &quot;, and the &quot;\\\\\\\\&quot; are to escape the regex special characters &quot;.&quot; &amp; &quot;?&quot;. We are replacing any of these .,&quot;:? with an empty string.\r\n\r\n\t\twhile(tokenizer.hasMoreTokens()){\r\n\t\t\tcurrentWord = tokenizer.nextToken();\r\n\t\t\tfinal String cleanWord = currentWord.replaceAll(&quot;[\\\\.,\\&quot;:\\\\?]&quot;, &quot;&quot;);\r\n\t\t\tSystem.out.println(cleanWord);\r\n\t\t}\r\n","title":"Trying to delete all non letter parts of a word but this line deletes the whole word &#39;&quot;Have&#39; from the tokenizer","body":"<p>Try this.</p>\n<p>The \\ is to escape the &quot;, and the &quot;\\\\&quot; are to escape the regex special characters &quot;.&quot; &amp; &quot;?&quot;. We are replacing any of these .,&quot;:? with an empty string.</p>\n<pre><code>    while(tokenizer.hasMoreTokens()){\n        currentWord = tokenizer.nextToken();\n        final String cleanWord = currentWord.replaceAll(&quot;[\\\\.,\\&quot;:\\\\?]&quot;, &quot;&quot;);\n        System.out.println(cleanWord);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674751759,"creation_date":1674751759,"answer_id":75249241,"question_id":75248773,"body_markdown":"There are specialized classes in the API to parse words out of text. Here is one such:\r\n\r\n    import java.text.BreakIterator;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.stream.Stream;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Paths;\r\n    \r\n    public class WordCollector {\r\n    \r\n        public static void main(String[] args) {\r\n            try {\r\n                List&lt;String&gt; words = WordCollector.getWords(Files.lines(Paths.get(args[0])));\r\n                System.out.println(words);\r\n            } catch (Throwable t) {\r\n                t.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public static List&lt;String&gt; getWords(Stream&lt;String&gt; lines) {\r\n            List&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n            BreakIterator boundary = BreakIterator.getWordInstance();\r\n            lines.forEach(line -&gt; {\r\n                boundary.setText(line);\r\n    \r\n                int start = boundary.first();\r\n                for (int end = boundary.next(); end != BreakIterator.DONE; start = end, end = boundary.next()) {\r\n                    String candidate = line.substring(start, end).replaceAll(&quot;\\\\p{Punct}&quot;, &quot;&quot;).trim();\r\n                    if (candidate.length() &gt; 0) {\r\n                        result.add(candidate);\r\n                    }\r\n                }\r\n            });\r\n            return result;\r\n        }\r\n    }\r\n\r\n","title":"Trying to delete all non letter parts of a word but this line deletes the whole word &#39;&quot;Have&#39; from the tokenizer","body":"<p>There are specialized classes in the API to parse words out of text. Here is one such:</p>\n<pre><code>import java.text.BreakIterator;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.stream.Stream;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\n\npublic class WordCollector {\n\n    public static void main(String[] args) {\n        try {\n            List&lt;String&gt; words = WordCollector.getWords(Files.lines(Paths.get(args[0])));\n            System.out.println(words);\n        } catch (Throwable t) {\n            t.printStackTrace();\n        }\n    }\n\n    public static List&lt;String&gt; getWords(Stream&lt;String&gt; lines) {\n        List&lt;String&gt; result = new ArrayList&lt;&gt;();\n        BreakIterator boundary = BreakIterator.getWordInstance();\n        lines.forEach(line -&gt; {\n            boundary.setText(line);\n\n            int start = boundary.first();\n            for (int end = boundary.next(); end != BreakIterator.DONE; start = end, end = boundary.next()) {\n                String candidate = line.substring(start, end).replaceAll(&quot;\\\\p{Punct}&quot;, &quot;&quot;).trim();\n                if (candidate.length() &gt; 0) {\n                    result.add(candidate);\n                }\n            }\n        });\n        return result;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1674755646,"creation_date":1674755646,"answer_id":75249919,"question_id":75248773,"body_markdown":"The code below shows how you can ignore all none alpha characters.  \r\n\r\n```\r\nimport java.io.*;\r\npublic class Main{\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\tint c = 0;\r\n\t\twhile((c=System.in.read())!=-1)\r\n\t\t   if ((&#39;a&#39; &lt;= c &amp;&amp; c &lt;= &#39;z&#39;) || (&#39;A&#39; &lt;= c &amp;&amp; c &lt;=&#39;Z&#39;)\r\n\t\t      System.out.print((char)c);\r\n\t}\r\n}\r\n```","title":"Trying to delete all non letter parts of a word but this line deletes the whole word &#39;&quot;Have&#39; from the tokenizer","body":"<p>The code below shows how you can ignore all none alpha characters.</p>\n<pre><code>import java.io.*;\npublic class Main{\n    public static void main(String[] args) throws IOException {\n        int c = 0;\n        while((c=System.in.read())!=-1)\n           if (('a' &lt;= c &amp;&amp; c &lt;= 'z') || ('A' &lt;= c &amp;&amp; c &lt;='Z')\n              System.out.print((char)c);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23924614,"reputation":1,"user_id":17919871,"display_name":"astroprab"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1674755646,"creation_date":1674749572,"question_id":75248773,"body_markdown":"\r\n```\r\nwhile(tokenizer.hasMoreTokens()){\r\ncurrentWord = tokenizer.nextToken();\r\nString[] parts = currentWord.split(Pattern.quote(&quot;.&quot;));\r\nString[] parts2 = parts[0].split(Pattern.quote(&quot;,&quot;));\r\nString[] parts3 = parts2[0].split(Pattern.quote(&quot;?&quot;));\r\nString[] parts4 = parts3[0].split(Pattern.quote(&quot;\\\\.| &quot;));\r\nString[] parts5 = parts4[0].split(&quot;\\&quot;&quot;);\r\nString[] parts6 = parts5[0].split(Pattern.quote(&quot;:&quot;));\r\n\r\nSystem.out.println(Arrays.toString(parts6));\r\n```\r\n\r\n\r\nI&#39;m just trying to get this text to split properly, only issue right now is the word:\r\n\r\n&quot;Have\r\n\r\nAlso if someone could provide a solution that combines all this into one line that would be nice but I couldn&#39;t get that to work thanks","title":"Trying to delete all non letter parts of a word but this line deletes the whole word &#39;&quot;Have&#39; from the tokenizer","body":"<pre><code>while(tokenizer.hasMoreTokens()){\ncurrentWord = tokenizer.nextToken();\nString[] parts = currentWord.split(Pattern.quote(&quot;.&quot;));\nString[] parts2 = parts[0].split(Pattern.quote(&quot;,&quot;));\nString[] parts3 = parts2[0].split(Pattern.quote(&quot;?&quot;));\nString[] parts4 = parts3[0].split(Pattern.quote(&quot;\\\\.| &quot;));\nString[] parts5 = parts4[0].split(&quot;\\&quot;&quot;);\nString[] parts6 = parts5[0].split(Pattern.quote(&quot;:&quot;));\n\nSystem.out.println(Arrays.toString(parts6));\n</code></pre>\n<p>I'm just trying to get this text to split properly, only issue right now is the word:</p>\n<p>&quot;Have</p>\n<p>Also if someone could provide a solution that combines all this into one line that would be nice but I couldn't get that to work thanks</p>\n"},{"tags":["java","multithreading","java-threads"],"comments":[{"owner":{"account_id":7501162,"reputation":820,"user_id":5699459,"accept_rate":50,"display_name":"Michael"},"score":0,"creation_date":1673834647,"post_id":75129640,"comment_id":132579390,"body_markdown":"`notify()` wakes up 1 waiting thread and `notifyAll()` wakes up all waiting threads. There&#39;s no guarantee on the order in which they&#39;re woken up. `If any threads are waiting on this object, one of them is chosen to be awakened. The choice is arbitrary and occurs at the discretion of the implementation.`[notify()](https://docs.oracle.com/javase/10/docs/api/java/lang/Object.html#notify())\n\nIf you want to ensure all students read once before the teacher writes again you need separate locks for the teacher and the students (similar to a read/write lock)","body":"<code>notify()</code> wakes up 1 waiting thread and <code>notifyAll()</code> wakes up all waiting threads. There&#39;s no guarantee on the order in which they&#39;re woken up. <code>If any threads are waiting on this object, one of them is chosen to be awakened. The choice is arbitrary and occurs at the discretion of the implementation.</code><a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/Object.html#notify()\" rel=\"nofollow noreferrer\">notify()</a>  If you want to ensure all students read once before the teacher writes again you need separate locks for the teacher and the students (similar to a read/write lock)"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1673835048,"post_id":75129640,"comment_id":132579428,"body_markdown":"Intrinsic locks are not &quot;fair.&quot; There&#39;s no guarantee the same thread won&#39;t be notified twice in a row while others are waiting.","body":"Intrinsic locks are not &quot;fair.&quot; There&#39;s no guarantee the same thread won&#39;t be notified twice in a row while others are waiting."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1673835345,"post_id":75129640,"comment_id":132579450,"body_markdown":"You might want to look at [CyclicBarrier](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CyclicBarrier.html) for this type of case.","body":"You might want to look at <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CyclicBarrier.html\" rel=\"nofollow noreferrer\">CyclicBarrier</a> for this type of case."},{"owner":{"account_id":27394967,"reputation":25,"user_id":20897331,"display_name":"Henrique Rodrigues"},"score":0,"creation_date":1673923057,"post_id":75129640,"comment_id":132600266,"body_markdown":"Thank you for your help @shmosel! Inter-thread communication can do really weird things when we don&#39;t know what we are doing lol","body":"Thank you for your help @shmosel! Inter-thread communication can do really weird things when we don&#39;t know what we are doing lol"}],"answers":[{"comments":[{"owner":{"account_id":27394967,"reputation":25,"user_id":20897331,"display_name":"Henrique Rodrigues"},"score":0,"creation_date":1673922823,"post_id":75129972,"comment_id":132600227,"body_markdown":"Bro, thank you so much! I learned a lot with your response, and now i have a lot of content to search and learn about. I just didn&#39;t expect that multithreading could be so confusing and complex. I mean, it&#39;s really hard to know what are you doing when there is no concrete way to know what are you doing and the phase of the moon can change everything LOL","body":"Bro, thank you so much! I learned a lot with your response, and now i have a lot of content to search and learn about. I just didn&#39;t expect that multithreading could be so confusing and complex. I mean, it&#39;s really hard to know what are you doing when there is no concrete way to know what are you doing and the phase of the moon can change everything LOL"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1673928342,"post_id":75129972,"comment_id":132600906,"body_markdown":"I don&#39;t think you&#39;re right about `noOfStudents`. It&#39;s modified in the constructor, before any threads are started, and `Thread.start()` creates a *happens-before* edge.","body":"I don&#39;t think you&#39;re right about <code>noOfStudents</code>. It&#39;s modified in the constructor, before any threads are started, and <code>Thread.start()</code> creates a <i>happens-before</i> edge."},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1673930215,"post_id":75129972,"comment_id":132601156,"body_markdown":"@shmosel good eye! Yes, you&#39;re right, I thought it was in the `run()` for some reason.","body":"@shmosel good eye! Yes, you&#39;re right, I thought it was in the <code>run()</code> for some reason."}],"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673839221,"creation_date":1673839221,"answer_id":75129972,"question_id":75129640,"body_markdown":"There are lots of little things wrong with this code; wrong in ways that you might not ever be able to reproduce, because the Java Memory Model, which is rather relevant when dealing with multi-threaded code written with these obsolete/ill-advised strategies, is filled to the brink with &#39;may&#39; - a JVM __might__ do one thing or it __might__ do another. This makes testing impossible (maybe on your hardware, on this day, with this song on your music player, it always goes one way. Tomorrow it might go a different way).\r\n\r\nYou may be thinking: What the heck, that sounds downright stupid, why would java be designed to act like an evil monkey&#39;s pay?? This answer cannot be right!\r\n\r\nRegrettably, it really works like that. The thing is, trying to give you a ton of guarantees (such as: All things ran by a JVM always act like they ran in some order), then any realistic java app would run incredibly slowly - giving such guarantees is incredibly difficult, given that modern CPUs (&#39;modern&#39; - 20 years+ at this point) have multiple cores and each core has multiple pipelines, and CPUs cannot access main memory at all (they can only access on-die caches, and they can ask the memory controller to swap one cached page out for another, they can&#39;t ask the memory controller to read or write a single value and CPUs haven&#39;t been able to do that for decades now). Because JVMs are supposed to run on many platforms, there are really only 2 options:\r\n\r\n1. The java spec gives all sorts of guarantees, and thus JVMs are slow.\r\n2. A spec (The JMM -Java Memory Model) spells out the many &#39;rights&#39; as JVM enjoys about what various weird things it gets to do, and as a consequence many JVM impls exist that do quite different things, because they all need to do what &#39;works fast&#39; on the local architecture and OS. This spec tells you the few things that _are_ guaranteed, and as a programmer your job is to stay within these guarantees. Knowing that colouring outside the lines is a problem that on your hardware you may __never__ be able to test for, ouch.\r\n\r\nAs you might surmise, #2 is the actual way java works.\r\n\r\nThis more generally highlights why you shouldn&#39;t do any of this. Using `wait()` and `notify()` requires a very high level of expertise _because_ it is effectively impossible to test. It&#39;s very hard to get this expertise: Ordinarily, you learn best by trying stuff, but here, trying stuff will just mislead you: You end up writing some code that seems to work reliably only to realize much later on that it doesn&#39;t work. It&#39;s just that _at the time you wrote it_, for whatever reason, the &#39;the JVM may do X or Y&#39; aspect of it always went the same way. Or, on a certain CPU it always goes one way, but on another CPU that isn&#39;t always true.\r\n\r\nI&#39;ll name a few:\r\n\r\n## `noOfStudents` violated HB/HA. (I&#39;ll explain what HB/HA is in a bit).\r\n\r\nYour student1 thread starts and holds no locks (`Student`&#39;s `run()` method isn&#39;t synchronized, for example), then invokes `oneMoreStudent()` on the one `Whiteboard` instance. This then runs `noOfStudents++`. `noOfStudents` is an ordinary, non-volatile field.\r\n\r\n__This is a JMM violation__. The JMM states that a JVM implementation is allowed to re-order statements (run stuff in any order), and to locally cache any field of any object at any time (as in, give each thread its own little copy of that `noOfStudents` field), __or not__, at will. That means each student thread could be incrementing its local cached copy of `noOfStudents`, (so each student thread would see that noOfStudents is 1, even after all 3 have ran and it is clear, from other evidence, they&#39;ve all long since passed that `oneMoreStudent()` call - remember, the JVM is free to re-order or to appear re-ordered if you don&#39;t establish HBHA). And Teacher sees 0, even. Which messes up its loop and would explain that your code doesn&#39;t work. It isn&#39;t necessarily the right explanation or the only way, just, it&#39;s one of a few problems that __could__ cause what you witness, depending on your CPU, your OS, and the phase of the moon.\r\n\r\n## HB/HA\r\n\r\nHappens-Before / Happens-After. As I said, the JVM is free to re-order statements and to create local caches with undefined synchronization behaviour (any local cache can overwrite any other, or not, at any time, with no guarantees whatsoever) -- __unless__ HB/HA is involved.\r\n\r\nHB/HA is a set of rules for which the JMM guarantees that a &#39;happens-before&#39; / &#39;happens-after&#39; relationship exists. One action (e.g. a statement) is &#39;HB&#39; relative to some other action (another statement).\r\n\r\nIn which case, the JVM guarantees that, other than timing (how long things take), it is __not possible__ to observe from the HA line any state such as it was _before_ the HB line ran. In other words, a &quot;Happens After&quot; line is guaranteed to happen after the &#39;Happens Before&#39; line it is HA to, unless it wouldn&#39;t be possible for you to observe this except using very sly trickery such as using timing, in which case the JVM is free to ignore HB/HA rules.\r\n\r\nOne trivial way to gain HB/HA relationships is consecutive statements executing in the same thread: Given `void foo() { a(); b(); }` That `b()` is HA relative to `a()` for the obvious reason.\r\n\r\nAnother way is threads itself: `thread.start()` is HB relative to the first line in the `run()` method of the Runnable that `thread` ends up starting. Similarly, `thread.yield()`&#39;s returning is HA relative to the last statement that `thread` ran.\r\n\r\nThe common ways to establish HB/HA is `synchronized`: If 2 threads are both executing code that lock the same monitor (`synchronized(x)` where `x` is referring to the exact same object in both threads), one &#39;wins&#39; and runs first - all synchronized blocks are &#39;ordered&#39; in some undefined order. Whatever order that might be, the entering and exiting is all HB/HA to each other as you&#39;d expect - if one thread &#39;goes first&#39;, then its breaking out of the `synchronized` is HA relative to the other thread&#39;s entering of it.\r\n\r\nBecause HB/HA guarantees you can&#39;t witness things running out of order, __you solve the caching issue__ - the JMM guarantees that it is no longer the case that each thread could be operating on a cached value.\r\n\r\nMaking `oneMoreStudent` `synchronized` therefore solves this particular problem: One thread (at random, more or less, there is no guarantee that if you start 3 threads in a row, that the first started thread also starts running first) wins and passes the synchronized {} first, updates that value, exits the synchronized block, and in so doing is HB relative to the next thread that &#39;wins&#39; and enters the block, and thus, that cannot observe the state as it was _before_ the first thread exited: `noOfStudents` having been incremented is a change in state, thus, the second thread is guaranteed to see that `noOfStudents` is 1, and increments it to 2. For the same reason, the third student thread ends up witnessing 2 and increments to 3, and the teacher thread is guaranteed to see it be &#39;3&#39;. Unless, of course.\r\n\r\n## Violation: Depending on starting order\r\n\r\nIf the Teacher thread gets truckin&#39; before all 3 student threads have initialized (Such as incrementing `noOfStudents`), then all heck breaks loose, as the teacher thread will not be waiting for the requisite amount of student reads and will thus write some more before all students managed to read the data. The fact that you start the teacher thread 4th is __immaterial__, the JVM does not guarantee that threads actually run in order. That&#39;d be silly, the point of threads is to do things simultaneously if at all possible. So, all 4 threads __simulatenously__ get to a point where they need to acquire the lock on the whiteboard object (the `synchronized` keyword does that), and thus one wins at random. As is usual with the JMM, you can&#39;t &quot;prove&quot; this with a test. On your hardware/Java/Phase-of-the-moon setup it may well be that you reliably observe the student threads going first, _then_ the teacher thread. But that is no guarantee, and any JVM that doesn&#39;t do that, isn&#39;t broken.\r\n\r\nTo make life even more complicated, `System.out` is a very big iron call (takes a ton of time) and acquires various locks, which means attempting to sysout your way into understanding what happens severely changes how your app runs, so you can&#39;t do that either. Not that witnessing anything is all that useful - JVMs don&#39;t have to be consistent when it comes to the JMM.\r\n\r\n## Singleton violation\r\n\r\nYour `getInstance()` method is itself a violation - your code checks if the `whiteboard` field is `null` and if so, makes a new whiteboard. This is on its face already completely wrong: What if 2 threads end up simultaneously invoking `getInstance()`? Both will check &quot;is it null?&quot; and will then both say: Yeah, it is, they then both make a whiteboard instance, both assign it to the one static `whiteboard` variable, which may or may not be a local cache. You now have 2 whiteboard instances and obviously the rest of the code will completely fail.\r\n\r\nIt gets worse, due to the reordering rules, trying to dance around this is more complicated than you think. Search the web for &#39;singleton double checked locking&#39; for more, but note that 90% of the tutorials out there are dead wrong.\r\n\r\nThe solution to this is to realize that __`getInstance()` is a silly idea__. Java doesn&#39;t load all classes on bootup, it loads the main class, and just starts running it. If, as part of running it, some other as-yet-unloaded class comes up, that class is loaded on demand. However, once a class is loaded it stays loaded (unless you are engaging in class loader shenanigans which is beyond the scope of this answer). Java __itself__ therefore needs to do advanced singleton locking because the JMM guarantees that a class is only loaded at most one time. That means this is the only correct way to do a singleton:\r\n\r\n```\r\nclass Whiteboard {\r\n  private static final INSTANCE = new Whiteboard();\r\n\r\n  public static Whiteboard getInstance() {\r\n    return INSTANCE;\r\n  }\r\n}\r\n```\r\n\r\nThis works because the JMM guarantees a class is only loaded once, thus guaranteeing that `INSTANCE` is only assigned to once. THis isn&#39;t &#39;needlessly wasteful&#39; because the class isn&#39;t loaded at all unless you actually mention `Whiteboard` somewhere, in which case... you&#39;re going to want that instance. Java&#39;s baked in locking behaviour to ensure classes are loaded once is the most efficient locking construct in java available to you.\r\n\r\nIn the __exceedingly, one-in-a-million unlikely__ chance that you are likely to refer to a class from time to time _but not_ fetch the singleton, and you really want it to lazy-load, this is the correct way to do that:\r\n\r\n```\r\nclass Whiteboard {\r\n  private static class WhiteboardInstanceHolder {\r\n    static final Whiteboard INSTANCE = new Whiteboard();\r\n  }\r\n\r\n  public static Whiteboard getInstance() {\r\n    return WhiteboardInstanceHolder.INSTANCE;\r\n  }\r\n}\r\n```\r\n\r\nThis works because, as I said, java does not load classes until it is actually needed, and here it won&#39;t be needed until someone invokes `getInstance()`. This snippet is much more complicated and the only advantage is that you can mention `Whiteboard` as a type _without_ invoking `.getInstance()` and avoid the load. Which generally isn&#39;t relevant, so you shouldn&#39;t bother with this generally needlessly convoluted example.\r\n\r\n## Closing notes - what should you really be doing\r\n\r\nAny of the above can explain what you witness. And I wouldn&#39;t be surprised in the code you wrote. If you fix all 3 and the code works reliably, you really have no idea if you actually fixed it all, or if the errors that remain are simply of a nature that doesn&#39;t occur on your hardware/OS combo.\r\n\r\nHence, just.. this is rocket science. You shouldn&#39;t be doing this. There are different programming models that are vastly superior and much easier to reason about:\r\n\r\n1. Concurrency &#39;in the large&#39; - send all inter-thread comms through a medium that is explicitly designed for it. Such as a database (set up a transaction, voila), or a message queue.\r\n\r\n2. With something from the `java.util.concurrent` package. Here a `CyclicBarrier` could work, or perhaps one of the many collections it has.\r\n","title":"Can notify( ) in Java wake its own thread?","body":"<p>There are lots of little things wrong with this code; wrong in ways that you might not ever be able to reproduce, because the Java Memory Model, which is rather relevant when dealing with multi-threaded code written with these obsolete/ill-advised strategies, is filled to the brink with 'may' - a JVM <strong>might</strong> do one thing or it <strong>might</strong> do another. This makes testing impossible (maybe on your hardware, on this day, with this song on your music player, it always goes one way. Tomorrow it might go a different way).</p>\n<p>You may be thinking: What the heck, that sounds downright stupid, why would java be designed to act like an evil monkey's pay?? This answer cannot be right!</p>\n<p>Regrettably, it really works like that. The thing is, trying to give you a ton of guarantees (such as: All things ran by a JVM always act like they ran in some order), then any realistic java app would run incredibly slowly - giving such guarantees is incredibly difficult, given that modern CPUs ('modern' - 20 years+ at this point) have multiple cores and each core has multiple pipelines, and CPUs cannot access main memory at all (they can only access on-die caches, and they can ask the memory controller to swap one cached page out for another, they can't ask the memory controller to read or write a single value and CPUs haven't been able to do that for decades now). Because JVMs are supposed to run on many platforms, there are really only 2 options:</p>\n<ol>\n<li>The java spec gives all sorts of guarantees, and thus JVMs are slow.</li>\n<li>A spec (The JMM -Java Memory Model) spells out the many 'rights' as JVM enjoys about what various weird things it gets to do, and as a consequence many JVM impls exist that do quite different things, because they all need to do what 'works fast' on the local architecture and OS. This spec tells you the few things that <em>are</em> guaranteed, and as a programmer your job is to stay within these guarantees. Knowing that colouring outside the lines is a problem that on your hardware you may <strong>never</strong> be able to test for, ouch.</li>\n</ol>\n<p>As you might surmise, #2 is the actual way java works.</p>\n<p>This more generally highlights why you shouldn't do any of this. Using <code>wait()</code> and <code>notify()</code> requires a very high level of expertise <em>because</em> it is effectively impossible to test. It's very hard to get this expertise: Ordinarily, you learn best by trying stuff, but here, trying stuff will just mislead you: You end up writing some code that seems to work reliably only to realize much later on that it doesn't work. It's just that <em>at the time you wrote it</em>, for whatever reason, the 'the JVM may do X or Y' aspect of it always went the same way. Or, on a certain CPU it always goes one way, but on another CPU that isn't always true.</p>\n<p>I'll name a few:</p>\n<h2><code>noOfStudents</code> violated HB/HA. (I'll explain what HB/HA is in a bit).</h2>\n<p>Your student1 thread starts and holds no locks (<code>Student</code>'s <code>run()</code> method isn't synchronized, for example), then invokes <code>oneMoreStudent()</code> on the one <code>Whiteboard</code> instance. This then runs <code>noOfStudents++</code>. <code>noOfStudents</code> is an ordinary, non-volatile field.</p>\n<p><strong>This is a JMM violation</strong>. The JMM states that a JVM implementation is allowed to re-order statements (run stuff in any order), and to locally cache any field of any object at any time (as in, give each thread its own little copy of that <code>noOfStudents</code> field), <strong>or not</strong>, at will. That means each student thread could be incrementing its local cached copy of <code>noOfStudents</code>, (so each student thread would see that noOfStudents is 1, even after all 3 have ran and it is clear, from other evidence, they've all long since passed that <code>oneMoreStudent()</code> call - remember, the JVM is free to re-order or to appear re-ordered if you don't establish HBHA). And Teacher sees 0, even. Which messes up its loop and would explain that your code doesn't work. It isn't necessarily the right explanation or the only way, just, it's one of a few problems that <strong>could</strong> cause what you witness, depending on your CPU, your OS, and the phase of the moon.</p>\n<h2>HB/HA</h2>\n<p>Happens-Before / Happens-After. As I said, the JVM is free to re-order statements and to create local caches with undefined synchronization behaviour (any local cache can overwrite any other, or not, at any time, with no guarantees whatsoever) -- <strong>unless</strong> HB/HA is involved.</p>\n<p>HB/HA is a set of rules for which the JMM guarantees that a 'happens-before' / 'happens-after' relationship exists. One action (e.g. a statement) is 'HB' relative to some other action (another statement).</p>\n<p>In which case, the JVM guarantees that, other than timing (how long things take), it is <strong>not possible</strong> to observe from the HA line any state such as it was <em>before</em> the HB line ran. In other words, a &quot;Happens After&quot; line is guaranteed to happen after the 'Happens Before' line it is HA to, unless it wouldn't be possible for you to observe this except using very sly trickery such as using timing, in which case the JVM is free to ignore HB/HA rules.</p>\n<p>One trivial way to gain HB/HA relationships is consecutive statements executing in the same thread: Given <code>void foo() { a(); b(); }</code> That <code>b()</code> is HA relative to <code>a()</code> for the obvious reason.</p>\n<p>Another way is threads itself: <code>thread.start()</code> is HB relative to the first line in the <code>run()</code> method of the Runnable that <code>thread</code> ends up starting. Similarly, <code>thread.yield()</code>'s returning is HA relative to the last statement that <code>thread</code> ran.</p>\n<p>The common ways to establish HB/HA is <code>synchronized</code>: If 2 threads are both executing code that lock the same monitor (<code>synchronized(x)</code> where <code>x</code> is referring to the exact same object in both threads), one 'wins' and runs first - all synchronized blocks are 'ordered' in some undefined order. Whatever order that might be, the entering and exiting is all HB/HA to each other as you'd expect - if one thread 'goes first', then its breaking out of the <code>synchronized</code> is HA relative to the other thread's entering of it.</p>\n<p>Because HB/HA guarantees you can't witness things running out of order, <strong>you solve the caching issue</strong> - the JMM guarantees that it is no longer the case that each thread could be operating on a cached value.</p>\n<p>Making <code>oneMoreStudent</code> <code>synchronized</code> therefore solves this particular problem: One thread (at random, more or less, there is no guarantee that if you start 3 threads in a row, that the first started thread also starts running first) wins and passes the synchronized {} first, updates that value, exits the synchronized block, and in so doing is HB relative to the next thread that 'wins' and enters the block, and thus, that cannot observe the state as it was <em>before</em> the first thread exited: <code>noOfStudents</code> having been incremented is a change in state, thus, the second thread is guaranteed to see that <code>noOfStudents</code> is 1, and increments it to 2. For the same reason, the third student thread ends up witnessing 2 and increments to 3, and the teacher thread is guaranteed to see it be '3'. Unless, of course.</p>\n<h2>Violation: Depending on starting order</h2>\n<p>If the Teacher thread gets truckin' before all 3 student threads have initialized (Such as incrementing <code>noOfStudents</code>), then all heck breaks loose, as the teacher thread will not be waiting for the requisite amount of student reads and will thus write some more before all students managed to read the data. The fact that you start the teacher thread 4th is <strong>immaterial</strong>, the JVM does not guarantee that threads actually run in order. That'd be silly, the point of threads is to do things simultaneously if at all possible. So, all 4 threads <strong>simulatenously</strong> get to a point where they need to acquire the lock on the whiteboard object (the <code>synchronized</code> keyword does that), and thus one wins at random. As is usual with the JMM, you can't &quot;prove&quot; this with a test. On your hardware/Java/Phase-of-the-moon setup it may well be that you reliably observe the student threads going first, <em>then</em> the teacher thread. But that is no guarantee, and any JVM that doesn't do that, isn't broken.</p>\n<p>To make life even more complicated, <code>System.out</code> is a very big iron call (takes a ton of time) and acquires various locks, which means attempting to sysout your way into understanding what happens severely changes how your app runs, so you can't do that either. Not that witnessing anything is all that useful - JVMs don't have to be consistent when it comes to the JMM.</p>\n<h2>Singleton violation</h2>\n<p>Your <code>getInstance()</code> method is itself a violation - your code checks if the <code>whiteboard</code> field is <code>null</code> and if so, makes a new whiteboard. This is on its face already completely wrong: What if 2 threads end up simultaneously invoking <code>getInstance()</code>? Both will check &quot;is it null?&quot; and will then both say: Yeah, it is, they then both make a whiteboard instance, both assign it to the one static <code>whiteboard</code> variable, which may or may not be a local cache. You now have 2 whiteboard instances and obviously the rest of the code will completely fail.</p>\n<p>It gets worse, due to the reordering rules, trying to dance around this is more complicated than you think. Search the web for 'singleton double checked locking' for more, but note that 90% of the tutorials out there are dead wrong.</p>\n<p>The solution to this is to realize that <strong><code>getInstance()</code> is a silly idea</strong>. Java doesn't load all classes on bootup, it loads the main class, and just starts running it. If, as part of running it, some other as-yet-unloaded class comes up, that class is loaded on demand. However, once a class is loaded it stays loaded (unless you are engaging in class loader shenanigans which is beyond the scope of this answer). Java <strong>itself</strong> therefore needs to do advanced singleton locking because the JMM guarantees that a class is only loaded at most one time. That means this is the only correct way to do a singleton:</p>\n<pre><code>class Whiteboard {\n  private static final INSTANCE = new Whiteboard();\n\n  public static Whiteboard getInstance() {\n    return INSTANCE;\n  }\n}\n</code></pre>\n<p>This works because the JMM guarantees a class is only loaded once, thus guaranteeing that <code>INSTANCE</code> is only assigned to once. THis isn't 'needlessly wasteful' because the class isn't loaded at all unless you actually mention <code>Whiteboard</code> somewhere, in which case... you're going to want that instance. Java's baked in locking behaviour to ensure classes are loaded once is the most efficient locking construct in java available to you.</p>\n<p>In the <strong>exceedingly, one-in-a-million unlikely</strong> chance that you are likely to refer to a class from time to time <em>but not</em> fetch the singleton, and you really want it to lazy-load, this is the correct way to do that:</p>\n<pre><code>class Whiteboard {\n  private static class WhiteboardInstanceHolder {\n    static final Whiteboard INSTANCE = new Whiteboard();\n  }\n\n  public static Whiteboard getInstance() {\n    return WhiteboardInstanceHolder.INSTANCE;\n  }\n}\n</code></pre>\n<p>This works because, as I said, java does not load classes until it is actually needed, and here it won't be needed until someone invokes <code>getInstance()</code>. This snippet is much more complicated and the only advantage is that you can mention <code>Whiteboard</code> as a type <em>without</em> invoking <code>.getInstance()</code> and avoid the load. Which generally isn't relevant, so you shouldn't bother with this generally needlessly convoluted example.</p>\n<h2>Closing notes - what should you really be doing</h2>\n<p>Any of the above can explain what you witness. And I wouldn't be surprised in the code you wrote. If you fix all 3 and the code works reliably, you really have no idea if you actually fixed it all, or if the errors that remain are simply of a nature that doesn't occur on your hardware/OS combo.</p>\n<p>Hence, just.. this is rocket science. You shouldn't be doing this. There are different programming models that are vastly superior and much easier to reason about:</p>\n<ol>\n<li><p>Concurrency 'in the large' - send all inter-thread comms through a medium that is explicitly designed for it. Such as a database (set up a transaction, voila), or a message queue.</p>\n</li>\n<li><p>With something from the <code>java.util.concurrent</code> package. Here a <code>CyclicBarrier</code> could work, or perhaps one of the many collections it has.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":27394967,"reputation":25,"user_id":20897331,"display_name":"Henrique Rodrigues"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674755606,"creation_date":1674755606,"answer_id":75249912,"question_id":75129640,"body_markdown":"Here&#39;s an update for those interested in the topic :)\r\n\r\nI fixed the problem using the Executor Framework. I take some tips from @rzwitserloot answer and wrote a much cleaner and **stable** code using a thread pool and the CompletableFuture class.\r\n\r\nObjects of the Student class no longer depend on a counter in the WhiteBoard class. Instead, they just read the text and print it on the terminal - if it&#39;s not the &quot;end&quot; string.\r\n\r\nThe Teacher class now has an internal counter that keeps track of what text it must write on the board. And the WhiteBoard class now have a proper Lock object that avoid a race condition in the read() method. The write() method didn&#39;t need a lock, as only the Teacher thread will access it anyway.\r\n\r\nThe get() method in the Teacher class will return *false* when it reaches the &quot;end&quot; string. I used this to exit the while loop. And if you are wondering why i used the get() method on the call to the students tasks (since this returns basically &quot;void&quot;). It&#39;s because this will make the main thread wait for all the student threads finish their tasks. Otherwise, the program may ends suddenly. Here&#39;s a screenshot with the new output: \r\n\r\n[![New output.][1]][1]\r\n\r\nAs you can see, the students access and print the whiteboard text in random order, but the teacher will *always* write first. And that was the intention :)\r\n\r\nIf needed, the order of the student threads can be defined using the `thenRunAsync(Runnable action)` method. \r\n\r\nHere&#39;s the new code:\r\n\r\n    class WhiteBoard {\r\n        // Text written in the whiteboard\r\n        private volatile String texto;\r\n        \r\n        // Read lock\r\n        private Lock readLock = new ReentrantLock();\r\n    \r\n        // Private constructor\r\n        private WhiteBoard() { }\r\n        // Whiteboard instance\r\n        private final static WhiteBoard wbInstance = new WhiteBoard();\r\n        \r\n        // Returns the instance of the whiteboard (i&#39;m using a singleton pattern)\r\n        public static WhiteBoard getInstance() {\r\n            return wbInstance;\r\n        }\r\n    \r\n        public void write(String str) {\r\n            // Write&#39;s the text\r\n            texto = str;\r\n        }\r\n    \r\n        public String read() {\r\n            // Lock to avoid race condition\r\n            readLock.lock();\r\n    \r\n            try {\r\n                return texto;\r\n            } \r\n            finally {\r\n                readLock.unlock();\r\n            }\r\n        }\r\n    }\r\n    \r\n    // Student class\r\n    class Student implements Runnable {\r\n        // Student name\r\n        private String name;\r\n    \r\n        // Whiteboard instance\r\n        private WhiteBoard wb;\r\n    \r\n        // Constructor\r\n        public Student(String name)\r\n        {\r\n            this.name = name;\r\n            wb = WhiteBoard.getInstance();\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            // Reads the text\r\n            String txtCopiado = wb.read();\r\n    \r\n            // If the text is &quot;end&quot;, returns\r\n            if(txtCopiado.equals(&quot;end&quot;))\r\n                return;\r\n            \r\n            // Print student name and the text he read\r\n            System.out.println(name + &quot;: &quot; + txtCopiado + &quot; | Thread -&gt; &quot; + Thread.currentThread().getName());\r\n        }\r\n    }\r\n    \r\n    // Teacher class\r\n    class Teacher implements Supplier&lt;Boolean&gt; {\r\n    \r\n        // This is the array of texts he will write\r\n        private String[] textos = {&quot;Ola amigos&quot;, &quot;Java Programming&quot;, &quot;Jacare&quot;, &quot;end&quot;};\r\n    \r\n        // Index of the text he is writing\r\n        private int index = 0;\r\n        \r\n        // Whiteboard instance\r\n        private WhiteBoard wb;\r\n    \r\n        // Constructor \r\n        public Teacher() {\r\n            wb = WhiteBoard.getInstance();\r\n        }\r\n    \r\n        @Override\r\n        public Boolean get() {\r\n            // Write each text on the whiteboard\r\n            wb.write(textos[index]);\r\n            \r\n            // Print what the teacher wrote\r\n            System.out.println(&quot;Teacher: &quot; + textos[index] + &quot; | Thread -&gt; &quot; + Thread.currentThread().getName());\r\n    \r\n            return !textos[index++].equals(&quot;end&quot;);\r\n        }\r\n    }\r\n    \r\n    // Main class\r\n    public class Classroom {\r\n    \r\n        public static void main(String[] args) {\r\n            var prof = new Teacher();\r\n    \r\n            var alun1 = new Student(&quot;1. Pablo&quot;);\r\n            var alun2 = new Student(&quot;2. Kiki&quot;);\r\n            var alun3 = new Student(&quot;3. Lucas&quot;);\r\n    \r\n            // Creates thread pool with 4 trheads\r\n            ExecutorService es = Executors.newFixedThreadPool(4);\r\n    \r\n            try {\r\n                boolean flag = true;\r\n                while(flag)\r\n                {\r\n                    // Check if the teacher has more texts to write\r\n                    flag = CompletableFuture.supplyAsync(prof, es).get();\r\n    \r\n                    // Call students tasks\r\n                    CompletableFuture.allOf(\r\n                            CompletableFuture.runAsync(alun1, es),\r\n                            CompletableFuture.runAsync(alun2, es),\r\n                            CompletableFuture.runAsync(alun3, es))\r\n                        .get();\r\n                }\r\n    \r\n                // Shutdown thread pool\r\n                es.shutdown();\r\n            } \r\n            catch (InterruptedException | ExecutionException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/FzejO.png","title":"Can notify( ) in Java wake its own thread?","body":"<p>Here's an update for those interested in the topic :)</p>\n<p>I fixed the problem using the Executor Framework. I take some tips from @rzwitserloot answer and wrote a much cleaner and <strong>stable</strong> code using a thread pool and the CompletableFuture class.</p>\n<p>Objects of the Student class no longer depend on a counter in the WhiteBoard class. Instead, they just read the text and print it on the terminal - if it's not the &quot;end&quot; string.</p>\n<p>The Teacher class now has an internal counter that keeps track of what text it must write on the board. And the WhiteBoard class now have a proper Lock object that avoid a race condition in the read() method. The write() method didn't need a lock, as only the Teacher thread will access it anyway.</p>\n<p>The get() method in the Teacher class will return <em>false</em> when it reaches the &quot;end&quot; string. I used this to exit the while loop. And if you are wondering why i used the get() method on the call to the students tasks (since this returns basically &quot;void&quot;). It's because this will make the main thread wait for all the student threads finish their tasks. Otherwise, the program may ends suddenly. Here's a screenshot with the new output:</p>\n<p><a href=\"https://i.stack.imgur.com/FzejO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FzejO.png\" alt=\"New output.\" /></a></p>\n<p>As you can see, the students access and print the whiteboard text in random order, but the teacher will <em>always</em> write first. And that was the intention :)</p>\n<p>If needed, the order of the student threads can be defined using the <code>thenRunAsync(Runnable action)</code> method.</p>\n<p>Here's the new code:</p>\n<pre><code>class WhiteBoard {\n    // Text written in the whiteboard\n    private volatile String texto;\n    \n    // Read lock\n    private Lock readLock = new ReentrantLock();\n\n    // Private constructor\n    private WhiteBoard() { }\n    // Whiteboard instance\n    private final static WhiteBoard wbInstance = new WhiteBoard();\n    \n    // Returns the instance of the whiteboard (i'm using a singleton pattern)\n    public static WhiteBoard getInstance() {\n        return wbInstance;\n    }\n\n    public void write(String str) {\n        // Write's the text\n        texto = str;\n    }\n\n    public String read() {\n        // Lock to avoid race condition\n        readLock.lock();\n\n        try {\n            return texto;\n        } \n        finally {\n            readLock.unlock();\n        }\n    }\n}\n\n// Student class\nclass Student implements Runnable {\n    // Student name\n    private String name;\n\n    // Whiteboard instance\n    private WhiteBoard wb;\n\n    // Constructor\n    public Student(String name)\n    {\n        this.name = name;\n        wb = WhiteBoard.getInstance();\n    }\n\n    @Override\n    public void run() {\n        // Reads the text\n        String txtCopiado = wb.read();\n\n        // If the text is &quot;end&quot;, returns\n        if(txtCopiado.equals(&quot;end&quot;))\n            return;\n        \n        // Print student name and the text he read\n        System.out.println(name + &quot;: &quot; + txtCopiado + &quot; | Thread -&gt; &quot; + Thread.currentThread().getName());\n    }\n}\n\n// Teacher class\nclass Teacher implements Supplier&lt;Boolean&gt; {\n\n    // This is the array of texts he will write\n    private String[] textos = {&quot;Ola amigos&quot;, &quot;Java Programming&quot;, &quot;Jacare&quot;, &quot;end&quot;};\n\n    // Index of the text he is writing\n    private int index = 0;\n    \n    // Whiteboard instance\n    private WhiteBoard wb;\n\n    // Constructor \n    public Teacher() {\n        wb = WhiteBoard.getInstance();\n    }\n\n    @Override\n    public Boolean get() {\n        // Write each text on the whiteboard\n        wb.write(textos[index]);\n        \n        // Print what the teacher wrote\n        System.out.println(&quot;Teacher: &quot; + textos[index] + &quot; | Thread -&gt; &quot; + Thread.currentThread().getName());\n\n        return !textos[index++].equals(&quot;end&quot;);\n    }\n}\n\n// Main class\npublic class Classroom {\n\n    public static void main(String[] args) {\n        var prof = new Teacher();\n\n        var alun1 = new Student(&quot;1. Pablo&quot;);\n        var alun2 = new Student(&quot;2. Kiki&quot;);\n        var alun3 = new Student(&quot;3. Lucas&quot;);\n\n        // Creates thread pool with 4 trheads\n        ExecutorService es = Executors.newFixedThreadPool(4);\n\n        try {\n            boolean flag = true;\n            while(flag)\n            {\n                // Check if the teacher has more texts to write\n                flag = CompletableFuture.supplyAsync(prof, es).get();\n\n                // Call students tasks\n                CompletableFuture.allOf(\n                        CompletableFuture.runAsync(alun1, es),\n                        CompletableFuture.runAsync(alun2, es),\n                        CompletableFuture.runAsync(alun3, es))\n                    .get();\n            }\n\n            // Shutdown thread pool\n            es.shutdown();\n        } \n        catch (InterruptedException | ExecutionException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27394967,"reputation":25,"user_id":20897331,"display_name":"Henrique Rodrigues"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75129972,"answer_count":2,"score":1,"last_activity_date":1674755606,"creation_date":1673834115,"question_id":75129640,"body_markdown":"I&#39;m studying multithreading and wrote a simple program that simulates a classroom. There are three main classes: WhiteBoard, Student and Teacher.\r\n\r\nThe WhiteBoard is a singleton that holds a string containing text written by the teacher, and also the methods to write and read from that string. The teacher object will write on the WhiteBoard and wait for all the students to read. When all students are done, they will notify the teacher to write again. The program ends when he writes &quot;end&quot;. \r\n\r\nWhen i tested the code, i noticed that some students read the text more than once. Here&#39;s a [screenshot with the output](https://i.stack.imgur.com/xXwFM.png). As you can see, Pablo read the text twice in a row. How is that possible? I thought that when we call the method *notify( )*, one of the threads waiting in the monitor&#39;s queue would be woken up. Does that include the calling thread itself? If not, why this is happening and how to fix this correctly?\r\n\r\nThanks for any help! Here is the code:\r\n\r\n```\r\nclass WhiteBoard {\r\n    \r\n    // Text written in the whiteboard\r\n    private String texto;\r\n    \r\n    // Total number of students\r\n    private int noOfStudents = 0;\r\n    \r\n    // Counter that keep control of which thread is accessing the whiteboard\r\n    private int counter = 0;\r\n\r\n    // Whiteboard instance\r\n    private static WhiteBoard wbInstance;\r\n    // Private constructor\r\n    private WhiteBoard() { }\r\n    \r\n    // Returns the instance of the whiteboard (i&#39;m using a singleton pattern)\r\n    public static WhiteBoard getInstance() {\r\n        if(wbInstance == null)\r\n            wbInstance = new WhiteBoard();\r\n        \r\n        return wbInstance;\r\n    }\r\n\r\n    // This method is called when a new student is created\r\n    public void oneMoreStudent() {\r\n        noOfStudents++;\r\n    }\r\n\r\n    public synchronized void write(String str) {\r\n        // If it&#39;s not the teacher&#39;s turn to write, his thread waits\r\n        while(counter != 0) {\r\n            try { \r\n                wait(); \r\n            } \r\n            catch(InterruptedException e) {\r\n                e.printStackTrace(); \r\n            }\r\n        }\r\n        \r\n        // Write&#39;s the text\r\n        texto = str;\r\n\r\n        // Increases the counter \r\n        counter++;\r\n\r\n        // Notify students threads\r\n        notifyAll();\r\n    }\r\n\r\n    public synchronized String read() {\r\n        // If it&#39;s not the students&#39; turn to read, their threads wait\r\n        while(counter == 0) {\r\n            try { \r\n                wait(); \r\n            } \r\n            catch(InterruptedException e) {\r\n                e.printStackTrace(); \r\n            }\r\n        }\r\n\r\n        // Saves current text\r\n        String temp = texto;\r\n\r\n        if(counter == noOfStudents)\r\n        {\r\n            // If everyone read, reset counter and notify the teacher\r\n\r\n            counter = 0;\r\n            notify();\r\n        }\r\n        else\r\n            // If not, increase counter\r\n            counter++;\r\n\r\n        // Return the text\r\n        return temp;\r\n    }\r\n}\r\n\r\n// Student class\r\nclass Student implements Runnable {\r\n    // Student name\r\n    private String name;\r\n\r\n    // Whiteboard instance\r\n    private WhiteBoard wb;\r\n\r\n    // Constructor\r\n    public Student(String nome)\r\n    {\r\n        this.name = nome;\r\n        wb = WhiteBoard.getInstance();\r\n        wb.oneMoreStudent();\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        \r\n        String txtCopiado;\r\n\r\n        while (true) {\r\n            // Reads the text\r\n            txtCopiado = wb.read();\r\n\r\n            // If the text is &quot;end&quot;, breaks the while loop\r\n            if(txtCopiado.equals(&quot;end&quot;))\r\n                break;\r\n\r\n            // Print student name and the text he read\r\n            System.out.println(name + &quot;: &quot; + txtCopiado);\r\n        }\r\n    }\r\n}\r\n\r\n// Teacher class\r\nclass Teacher implements Runnable {\r\n\r\n    // This is the array of texts he will write\r\n    private String[] textos = {&quot;Ola amigos&quot;, &quot;Java Programming&quot;, &quot;Jacare&quot;, &quot;end&quot;};\r\n    \r\n    // Whiteboard instance\r\n    private WhiteBoard wb;\r\n\r\n    // Constructor \r\n    public Teacher() {\r\n        wb = WhiteBoard.getInstance();\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        \r\n        // Write each text on the whiteboard\r\n        for(String str : textos) {\r\n            wb.write(str);\r\n            \r\n            // Print what the teacher wrote\r\n            System.out.println(&quot;Teacher: &quot; + str);\r\n        }\r\n    }\r\n}\r\n\r\n// Main class\r\npublic class Classroom {\r\n\r\n    public static void main(String[] args) {\r\n        \r\n        Thread prof = new Thread(new Teacher());\r\n\r\n        Thread alun1 = new Thread(new Student(&quot;1. Pablo&quot;));\r\n        Thread alun2 = new Thread(new Student(&quot;2. Kiki&quot;));\r\n        Thread alun3 = new Thread(new Student(&quot;3. Lucas&quot;));\r\n\r\n        prof.start();\r\n\r\n        alun1.start();\r\n        alun2.start();\r\n        alun3.start();\r\n    }\r\n}\r\n```","title":"Can notify( ) in Java wake its own thread?","body":"<p>I'm studying multithreading and wrote a simple program that simulates a classroom. There are three main classes: WhiteBoard, Student and Teacher.</p>\n<p>The WhiteBoard is a singleton that holds a string containing text written by the teacher, and also the methods to write and read from that string. The teacher object will write on the WhiteBoard and wait for all the students to read. When all students are done, they will notify the teacher to write again. The program ends when he writes &quot;end&quot;.</p>\n<p>When i tested the code, i noticed that some students read the text more than once. Here's a <a href=\"https://i.stack.imgur.com/xXwFM.png\" rel=\"nofollow noreferrer\">screenshot with the output</a>. As you can see, Pablo read the text twice in a row. How is that possible? I thought that when we call the method <em>notify( )</em>, one of the threads waiting in the monitor's queue would be woken up. Does that include the calling thread itself? If not, why this is happening and how to fix this correctly?</p>\n<p>Thanks for any help! Here is the code:</p>\n<pre><code>class WhiteBoard {\n    \n    // Text written in the whiteboard\n    private String texto;\n    \n    // Total number of students\n    private int noOfStudents = 0;\n    \n    // Counter that keep control of which thread is accessing the whiteboard\n    private int counter = 0;\n\n    // Whiteboard instance\n    private static WhiteBoard wbInstance;\n    // Private constructor\n    private WhiteBoard() { }\n    \n    // Returns the instance of the whiteboard (i'm using a singleton pattern)\n    public static WhiteBoard getInstance() {\n        if(wbInstance == null)\n            wbInstance = new WhiteBoard();\n        \n        return wbInstance;\n    }\n\n    // This method is called when a new student is created\n    public void oneMoreStudent() {\n        noOfStudents++;\n    }\n\n    public synchronized void write(String str) {\n        // If it's not the teacher's turn to write, his thread waits\n        while(counter != 0) {\n            try { \n                wait(); \n            } \n            catch(InterruptedException e) {\n                e.printStackTrace(); \n            }\n        }\n        \n        // Write's the text\n        texto = str;\n\n        // Increases the counter \n        counter++;\n\n        // Notify students threads\n        notifyAll();\n    }\n\n    public synchronized String read() {\n        // If it's not the students' turn to read, their threads wait\n        while(counter == 0) {\n            try { \n                wait(); \n            } \n            catch(InterruptedException e) {\n                e.printStackTrace(); \n            }\n        }\n\n        // Saves current text\n        String temp = texto;\n\n        if(counter == noOfStudents)\n        {\n            // If everyone read, reset counter and notify the teacher\n\n            counter = 0;\n            notify();\n        }\n        else\n            // If not, increase counter\n            counter++;\n\n        // Return the text\n        return temp;\n    }\n}\n\n// Student class\nclass Student implements Runnable {\n    // Student name\n    private String name;\n\n    // Whiteboard instance\n    private WhiteBoard wb;\n\n    // Constructor\n    public Student(String nome)\n    {\n        this.name = nome;\n        wb = WhiteBoard.getInstance();\n        wb.oneMoreStudent();\n    }\n\n    @Override\n    public void run() {\n        \n        String txtCopiado;\n\n        while (true) {\n            // Reads the text\n            txtCopiado = wb.read();\n\n            // If the text is &quot;end&quot;, breaks the while loop\n            if(txtCopiado.equals(&quot;end&quot;))\n                break;\n\n            // Print student name and the text he read\n            System.out.println(name + &quot;: &quot; + txtCopiado);\n        }\n    }\n}\n\n// Teacher class\nclass Teacher implements Runnable {\n\n    // This is the array of texts he will write\n    private String[] textos = {&quot;Ola amigos&quot;, &quot;Java Programming&quot;, &quot;Jacare&quot;, &quot;end&quot;};\n    \n    // Whiteboard instance\n    private WhiteBoard wb;\n\n    // Constructor \n    public Teacher() {\n        wb = WhiteBoard.getInstance();\n    }\n\n    @Override\n    public void run() {\n        \n        // Write each text on the whiteboard\n        for(String str : textos) {\n            wb.write(str);\n            \n            // Print what the teacher wrote\n            System.out.println(&quot;Teacher: &quot; + str);\n        }\n    }\n}\n\n// Main class\npublic class Classroom {\n\n    public static void main(String[] args) {\n        \n        Thread prof = new Thread(new Teacher());\n\n        Thread alun1 = new Thread(new Student(&quot;1. Pablo&quot;));\n        Thread alun2 = new Thread(new Student(&quot;2. Kiki&quot;));\n        Thread alun3 = new Thread(new Student(&quot;3. Lucas&quot;));\n\n        prof.start();\n\n        alun1.start();\n        alun2.start();\n        alun3.start();\n    }\n}\n</code></pre>\n"},{"tags":["java","xml","jdom-2"],"comments":[{"owner":{"account_id":3360953,"reputation":1823,"user_id":2822762,"accept_rate":100,"display_name":"Dave"},"score":2,"creation_date":1441362441,"post_id":32395751,"comment_id":52659990,"body_markdown":"If you just want the string just read the file to string like you would read any other file to a string. No need for JDOM2 or any other framework.","body":"If you just want the string just read the file to string like you would read any other file to a string. No need for JDOM2 or any other framework."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":2,"creation_date":1441371278,"post_id":32395751,"comment_id":52665205,"body_markdown":"If you&#39;re going to parse and reserialize the XML then you&#39;re going to lose &quot;non-information-bearing&quot; details such as the encoding, the order of attributes, or whitespace delimiters within tags. But there&#39;s nothing in your stated requirement that explains why you want to parse and reserialize the XML.","body":"If you&#39;re going to parse and reserialize the XML then you&#39;re going to lose &quot;non-information-bearing&quot; details such as the encoding, the order of attributes, or whitespace delimiters within tags. But there&#39;s nothing in your stated requirement that explains why you want to parse and reserialize the XML."}],"answers":[{"tags":[],"owner":{"account_id":6301348,"reputation":173,"user_id":4895885,"accept_rate":60,"display_name":"Droy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508479897,"creation_date":1441363147,"answer_id":32396027,"question_id":32395751,"body_markdown":"See if this works for you.\r\n\r\n    //filename is filepath string\r\n    BufferedReader br = new BufferedReader(new FileReader(new File(filename)));\r\n    String line;\r\n    StringBuilder sb = new StringBuilder();\r\n    while((line=br.readLine())!= null){\r\n\t\tsb.append(line.trim());\r\n    }","title":"Convert XML-File to string without manipulation or optimization in Java","body":"<p>See if this works for you.</p>\n\n<pre><code>//filename is filepath string\nBufferedReader br = new BufferedReader(new FileReader(new File(filename)));\nString line;\nStringBuilder sb = new StringBuilder();\nwhile((line=br.readLine())!= null){\n    sb.append(line.trim());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6576586,"reputation":317,"user_id":5082393,"accept_rate":92,"display_name":"Alucard"},"score":0,"creation_date":1441367241,"post_id":32396207,"comment_id":52662781,"body_markdown":"It doesn&#180;t fix the problem with the umlauts.","body":"It doesn&#180;t fix the problem with the umlauts."},{"owner":{"account_id":1876517,"reputation":1209,"user_id":1697631,"display_name":"jmccure"},"score":0,"creation_date":1642988468,"post_id":32396207,"comment_id":125213045,"body_markdown":"deprecated, use:`String xmlToString=FileUtils.readFileToString(new File(&quot;/file/path/file.xml&quot;),StandardCharsets.UTF_8);`","body":"deprecated, use:<code>String xmlToString=FileUtils.readFileToString(new File(&quot;&#47;file&#47;path&#47;file.xml&quot;),StandardCharsets.UTF_8);</code>"}],"tags":[],"owner":{"account_id":6689752,"reputation":29,"user_id":5159589,"display_name":"Prateek1421"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441363687,"creation_date":1441363687,"answer_id":32396207,"question_id":32395751,"body_markdown":"try this :\r\n\r\n    String xmlToString=FileUtils.readFileToString(new File(&quot;/file/path/file.xml&quot;));\r\n\r\nYou need to have Commons-io jar for this.\r\n","title":"Convert XML-File to string without manipulation or optimization in Java","body":"<p>try this :</p>\n\n<pre><code>String xmlToString=FileUtils.readFileToString(new File(\"/file/path/file.xml\"));\n</code></pre>\n\n<p>You need to have Commons-io jar for this.</p>\n"},{"comments":[{"owner":{"account_id":6576586,"reputation":317,"user_id":5082393,"accept_rate":92,"display_name":"Alucard"},"score":0,"creation_date":1441606316,"post_id":32419197,"comment_id":52729006,"body_markdown":"Thanks for your reply. I had some trouble with UTF_8 too, but xml = new String(Files.readAllBytes(f.toPath()), StandardCharsets.ISO_8859_1); works for me.","body":"Thanks for your reply. I had some trouble with UTF_8 too, but xml = new String(Files.readAllBytes(f.toPath()), StandardCharsets.ISO_8859_1); works for me."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1441644179,"post_id":32419197,"comment_id":52749697,"body_markdown":"You may want replace StandardCharsets.ISO_8859_1 with `Charset.forName(&quot;windows-1252&quot;)`, since your file does say it&#39;s encoded in 1252, which is a superset of ISO-8859-1.  Using ISO-8859-1 means eventually you may encounter characters in the U+0080 to U+009F range, which are valid in 1252 but which ISO-8859-1 will treat as unknown (and convert to &quot;?&quot; or &quot;�&quot;).","body":"You may want replace StandardCharsets.ISO_8859_1 with <code>Charset.forName(&quot;windows-1252&quot;)</code>, since your file does say it&#39;s encoded in 1252, which is a superset of ISO-8859-1.  Using ISO-8859-1 means eventually you may encounter characters in the U+0080 to U+009F range, which are valid in 1252 but which ISO-8859-1 will treat as unknown (and convert to &quot;?&quot; or &quot;�&quot;)."},{"owner":{"account_id":6576586,"reputation":317,"user_id":5082393,"accept_rate":92,"display_name":"Alucard"},"score":0,"creation_date":1441702357,"post_id":32419197,"comment_id":52769008,"body_markdown":"Thanks for your improvements! You are right. There are such cases, whitch are fixed with your suggestion. I changed it to: `xml = new String(Files.readAllBytes(f.toPath()), Charset.forName(&quot;windows-1252&quot;));`","body":"Thanks for your improvements! You are right. There are such cases, whitch are fixed with your suggestion. I changed it to: <code>xml = new String(Files.readAllBytes(f.toPath()), Charset.forName(&quot;windows-1252&quot;));</code>"}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1674755559,"creation_date":1441503147,"answer_id":32419197,"question_id":32395751,"body_markdown":"Firstly, as others have stated, you shouldn&#39;t use any XML processing.  Just read the file as a text file.\r\n\r\nSecondly, your umlaut characters showing up as &#39;�&#39; is due to an incorrect charset (encoding) being used.  The charset error may be in your code, or it may be the XML file.\r\n\r\nThe original XML file contains `encoding=&quot;windows-1252&quot;`, but it&#39;s unusual for XML to be encoded in anything other than UTF-8, so I suspect the file is really a UTF-8 file and the encoding it claims to use is not correct.\r\n\r\nTry forcing UTF-8 when reading the file.  It&#39;s good practice, regardless, to specify the charset when converting bytes to text:\r\n\r\n    String xml = new String(\r\n        Files.readAllBytes(xmlFile.toPath(), StandardCharsets.UTF_8));\r\n","title":"Convert XML-File to string without manipulation or optimization in Java","body":"<p>Firstly, as others have stated, you shouldn't use any XML processing.  Just read the file as a text file.</p>\n<p>Secondly, your umlaut characters showing up as '�' is due to an incorrect charset (encoding) being used.  The charset error may be in your code, or it may be the XML file.</p>\n<p>The original XML file contains <code>encoding=&quot;windows-1252&quot;</code>, but it's unusual for XML to be encoded in anything other than UTF-8, so I suspect the file is really a UTF-8 file and the encoding it claims to use is not correct.</p>\n<p>Try forcing UTF-8 when reading the file.  It's good practice, regardless, to specify the charset when converting bytes to text:</p>\n<pre><code>String xml = new String(\n    Files.readAllBytes(xmlFile.toPath(), StandardCharsets.UTF_8));\n</code></pre>\n"}],"owner":{"account_id":6576586,"reputation":317,"user_id":5082393,"accept_rate":92,"display_name":"Alucard"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11824,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":32419197,"answer_count":3,"score":1,"last_activity_date":1674755559,"creation_date":1441362245,"question_id":32395751,"body_markdown":"I have some trouble with the JDOM2 whitch i use to work with XML files.\r\nI want to convert the XML file to a string without any manipulation or optimization. \r\n\r\nThats my Java code to do that:\r\n\r\n    SAXBuilder builder = new SAXBuilder();\r\n        File xmlFile = f;\r\n\r\n        try \r\n        {\r\n            Document document = (Document) builder.build(xmlFile);\r\n\t\t\r\n            xml = new XMLOutputter().outputString(document);\r\n\r\n        } catch (Exception e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n\r\n        return xml;\r\n\r\nBut when I compare my string with the original XML file I notice some changes.\r\n\r\nThe original:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;windows-1252&quot;?&gt;\r\n    &lt;xmi:XMI xmi:version=&quot;2.1&quot; xmlns:uml=&quot;http://schema.omg.org/spec/UML/2.0&quot; xmlns:xmi=&quot;http://schema.omg.org/spec/XMI/2.1&quot; xmlns:thecustomprofile=&quot;http://www.sparxsystems.com/profiles/thecustomprofile/1.0&quot; xmlns:SoaML=&quot;http://www.sparxsystems.com/profiles/SoaML/1.0&quot;&gt;\r\n\r\n\r\n\r\nAnd the string:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;xmi:XMI xmlns:xmi=&quot;http://schema.omg.org/spec/XMI/2.1&quot; xmlns:SoaML=&quot;http://www.sparxsystems.com/profiles/SoaML/1.0&quot; xmlns:thecustomprofile=&quot;http://www.sparxsystems.com/profiles/thecustomprofile/1.0&quot; xmlns:uml=&quot;http://schema.omg.org/spec/UML/2.0&quot; xmi:version=&quot;2.1&quot;&gt;\r\n\r\nAnd all umlauts (&#228;, &#246; , &#252;) are changed too. I will get something like that: &#39;�&#39; instead of &#39;&#228;&#39;.\r\n\r\nIs there any way to stop that behaviore?","title":"Convert XML-File to string without manipulation or optimization in Java","body":"<p>I have some trouble with the JDOM2 whitch i use to work with XML files.\nI want to convert the XML file to a string without any manipulation or optimization. </p>\n\n<p>Thats my Java code to do that:</p>\n\n<pre><code>SAXBuilder builder = new SAXBuilder();\n    File xmlFile = f;\n\n    try \n    {\n        Document document = (Document) builder.build(xmlFile);\n\n        xml = new XMLOutputter().outputString(document);\n\n    } catch (Exception e) {\n        System.out.println(e.getMessage());\n    }\n\n    return xml;\n</code></pre>\n\n<p>But when I compare my string with the original XML file I notice some changes.</p>\n\n<p>The original:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"windows-1252\"?&gt;\n&lt;xmi:XMI xmi:version=\"2.1\" xmlns:uml=\"http://schema.omg.org/spec/UML/2.0\" xmlns:xmi=\"http://schema.omg.org/spec/XMI/2.1\" xmlns:thecustomprofile=\"http://www.sparxsystems.com/profiles/thecustomprofile/1.0\" xmlns:SoaML=\"http://www.sparxsystems.com/profiles/SoaML/1.0\"&gt;\n</code></pre>\n\n<p>And the string:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xmi:XMI xmlns:xmi=\"http://schema.omg.org/spec/XMI/2.1\" xmlns:SoaML=\"http://www.sparxsystems.com/profiles/SoaML/1.0\" xmlns:thecustomprofile=\"http://www.sparxsystems.com/profiles/thecustomprofile/1.0\" xmlns:uml=\"http://schema.omg.org/spec/UML/2.0\" xmi:version=\"2.1\"&gt;\n</code></pre>\n\n<p>And all umlauts (ä, ö , ü) are changed too. I will get something like that: '�' instead of 'ä'.</p>\n\n<p>Is there any way to stop that behaviore?</p>\n"},{"tags":["java","internationalization","jasper-reports","reportviewer","arabic"],"comments":[{"owner":{"account_id":80593,"reputation":6741,"user_id":227804,"display_name":"lschin"},"score":0,"creation_date":1304422225,"post_id":5868762,"comment_id":6746593,"body_markdown":"What about double quote?","body":"What about double quote?"}],"answers":[{"comments":[{"owner":{"account_id":282589,"reputation":8239,"user_id":579580,"accept_rate":85,"display_name":"aviad"},"score":0,"creation_date":1304426753,"post_id":5868875,"comment_id":6747755,"body_markdown":"@Feras Odeh, this does the escaping, however, you need your DB Vendor driver to be configured to support an appropriate charset . I do not know who is your JDBC vendor, but probably you need to configure the driver to &quot;set client_encoding to\niso-8859-8&quot; in your case.","body":"@Feras Odeh, this does the escaping, however, you need your DB Vendor driver to be configured to support an appropriate charset . I do not know who is your JDBC vendor, but probably you need to configure the driver to &quot;set client_encoding to iso-8859-8&quot; in your case."},{"owner":{"account_id":151106,"reputation":9166,"user_id":364746,"accept_rate":84,"display_name":"Feras Odeh"},"score":0,"creation_date":1304428506,"post_id":5868875,"comment_id":6748273,"body_markdown":"I don&#39;t think it is an encoding problem as I can insert arabic chars into datbase without any problem.as for my sql I but the UTF-8 encoding in the connection URL","body":"I don&#39;t think it is an encoding problem as I can insert arabic chars into datbase without any problem.as for my sql I but the UTF-8 encoding in the connection URL"},{"owner":{"account_id":282589,"reputation":8239,"user_id":579580,"accept_rate":85,"display_name":"aviad"},"score":0,"creation_date":1304428628,"post_id":5868875,"comment_id":6748315,"body_markdown":"don&#39;t you do the insert on the same (URL) connection?","body":"don&#39;t you do the insert on the same (URL) connection?"}],"tags":[],"owner":{"account_id":282589,"reputation":8239,"user_id":579580,"accept_rate":85,"display_name":"aviad"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1304429918,"creation_date":1304422636,"answer_id":5868875,"question_id":5868762,"body_markdown":"I assume that the database is set to work with UNICODE encoding, In Java you need to escape the input string (treat special chars) and turn the encoding to UTF-8 ( or 16) Check [this][1] out.\r\n\r\n...and also try this:\r\n&lt;code&gt;\r\n\r\n  exporter.setParameter(JRExporterParameter.CHARACTER_ENCODING, &quot;UTF-8&quot;); \r\n\r\n&lt;/code&gt;\r\n\r\n\r\n  [1]: http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#escapeSql%28java.lang.String%29","title":"Jasper Report arabic query problem","body":"<p>I assume that the database is set to work with UNICODE encoding, In Java you need to escape the input string (treat special chars) and turn the encoding to UTF-8 ( or 16) Check <a href=\"http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#escapeSql%28java.lang.String%29\" rel=\"nofollow\">this</a> out.</p>\n\n<p>...and also try this:\n<code></p>\n\n<p>exporter.setParameter(JRExporterParameter.CHARACTER_ENCODING, \"UTF-8\"); </p>\n\n<p></code></p>\n"}],"owner":{"account_id":151106,"reputation":9166,"user_id":364746,"accept_rate":84,"display_name":"Feras Odeh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":915,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":5868875,"answer_count":1,"score":2,"last_activity_date":1674755141,"creation_date":1304422126,"question_id":5868762,"body_markdown":"I&#39;m trying to make a report in jasper the report query contains this where statement \r\n\r\n    where payment=&#39;شيك&#39;\r\n\r\nwhen I try to run the report using the JRViewer300 I got the following exception \r\n\r\n    net.sf.jasperreports.engine.fill.JRExpresssionEvalException : Error evaluating expression...\r\n\r\n\r\nWhen I change the where statement to \r\n\r\n    where payment=&#39;cheque&#39;\r\n\r\nthe report runs without any problem. So what is all this about?\r\n\r\nThanks","title":"Jasper Report arabic query problem","body":"<p>I'm trying to make a report in jasper the report query contains this where statement </p>\n\n<pre><code>where payment='شيك'\n</code></pre>\n\n<p>when I try to run the report using the JRViewer300 I got the following exception </p>\n\n<pre><code>net.sf.jasperreports.engine.fill.JRExpresssionEvalException : Error evaluating expression...\n</code></pre>\n\n<p>When I change the where statement to </p>\n\n<pre><code>where payment='cheque'\n</code></pre>\n\n<p>the report runs without any problem. So what is all this about?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","multithreading","console","testng","progress-bar"],"owner":{"account_id":7781762,"reputation":35,"user_id":5887961,"display_name":"Kirill Kogan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674755086,"creation_date":1674755086,"question_id":75249831,"body_markdown":"i wrote a code that prints a progress bar in the console that shows how many tasks in the airflow area successfully done (i use this method also as smart wait  )   \r\n\r\n        public static void waitUntilDagCompleteToRun() throws IOException {\r\n        airFlowConnection();\r\n        long total = 52;\r\n        long startTime = System.currentTimeMillis();\r\n        int completeTask = getCompletedTask();\r\n        for (int i = 0; i &lt;= total; i = getCompletedTask()) {\r\n            sleep(50,TimeUnit.MILLISECONDS);\r\n\r\n            printProgress(startTime, total, i);\r\n            String dagStatus =getDagStatus();\r\n            if (dagStatus.contains(&quot;success&quot;))\r\n                break;\r\n            else if (dagStatus.contains(&quot;failed&quot;) || dagStatus.contains(&quot;paused&quot;) || dagStatus.contains(&quot;None&quot;))\r\n                Assert.fail(&quot;DAG STATUS IS &quot; + dagStatus);\r\n        }\r\n    } \r\n\r\n    public static void main(String[] args) throws IOException {\r\n        APIFlows.waitUntilDagCompleteToRun();\r\n    }\r\nthe code works perfectly!! but the printing part inside the console works only when I execute the code inside the main java method, \r\nbut I write automation tests and i use TestNG framework,\r\nI execute my test inside the method with annotation @Test \r\n\r\n        @Test\r\n    public void test045() throws IOException {\r\n        APIFlows.waitUntilDagCompleteToRun();\r\n    }\r\n\r\n\r\nthe problem is that the progress bar is not printing inside the console when i execute the code inside @Test . \r\n\r\ni tried execute it as a new thread like this \r\n\r\n        @Test()\r\n    public void testdas() throws IOException, InterruptedException {\r\n        Thread progressThread = new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    APIFlows.waitUntilDagCompleteToRun();\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n\r\n\r\n            }\r\n        });\r\n        progressThread.start();\r\n        progressThread.join();\r\n    }\r\n\r\nbut still, the printing of the progress bar doesn&#39;t happen, how i can make it work? ","title":"print Progress Bar in the console while executing the code happening inside @Test annotation of testing with java","body":"<p>i wrote a code that prints a progress bar in the console that shows how many tasks in the airflow area successfully done (i use this method also as smart wait  )</p>\n<pre><code>    public static void waitUntilDagCompleteToRun() throws IOException {\n    airFlowConnection();\n    long total = 52;\n    long startTime = System.currentTimeMillis();\n    int completeTask = getCompletedTask();\n    for (int i = 0; i &lt;= total; i = getCompletedTask()) {\n        sleep(50,TimeUnit.MILLISECONDS);\n\n        printProgress(startTime, total, i);\n        String dagStatus =getDagStatus();\n        if (dagStatus.contains(&quot;success&quot;))\n            break;\n        else if (dagStatus.contains(&quot;failed&quot;) || dagStatus.contains(&quot;paused&quot;) || dagStatus.contains(&quot;None&quot;))\n            Assert.fail(&quot;DAG STATUS IS &quot; + dagStatus);\n    }\n} \n\npublic static void main(String[] args) throws IOException {\n    APIFlows.waitUntilDagCompleteToRun();\n}\n</code></pre>\n<p>the code works perfectly!! but the printing part inside the console works only when I execute the code inside the main java method,\nbut I write automation tests and i use TestNG framework,\nI execute my test inside the method with annotation @Test</p>\n<pre><code>    @Test\npublic void test045() throws IOException {\n    APIFlows.waitUntilDagCompleteToRun();\n}\n</code></pre>\n<p>the problem is that the progress bar is not printing inside the console when i execute the code inside @Test .</p>\n<p>i tried execute it as a new thread like this</p>\n<pre><code>    @Test()\npublic void testdas() throws IOException, InterruptedException {\n    Thread progressThread = new Thread(new Runnable() {\n        @Override\n        public void run() {\n            try {\n                APIFlows.waitUntilDagCompleteToRun();\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n\n\n        }\n    });\n    progressThread.start();\n    progressThread.join();\n}\n</code></pre>\n<p>but still, the printing of the progress bar doesn't happen, how i can make it work?</p>\n"},{"tags":["java","while-loop","prime-factoring"],"comments":[{"owner":{"account_id":11147483,"reputation":1772,"user_id":8181750,"display_name":"L.Spillner"},"score":1,"creation_date":1522935891,"post_id":49673888,"comment_id":86358584,"body_markdown":"This is a very basic implementation of the [Sieve of Eratosthenes](https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes).","body":"This is a very basic implementation of the <a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow noreferrer\">Sieve of Eratosthenes</a>."},{"owner":{"account_id":5370447,"reputation":16262,"user_id":4279155,"accept_rate":55,"display_name":"Dominique"},"score":1,"creation_date":1522935910,"post_id":49673888,"comment_id":86358601,"body_markdown":"As you&#39;re new, I&#39;m advising you put more `System.out.println()` statements in your code (you can remove them afterwards), more information will be written on screen and you will be able to follow how your variables are evolving through the program.","body":"As you&#39;re new, I&#39;m advising you put more <code>System.out.println()</code> statements in your code (you can remove them afterwards), more information will be written on screen and you will be able to follow how your variables are evolving through the program."},{"owner":{"account_id":13300901,"reputation":23,"user_id":9602440,"display_name":"FacePalmProgramming"},"score":0,"creation_date":1522936169,"post_id":49673888,"comment_id":86358786,"body_markdown":"Thanks for the suggestion, can I put in as many as I like without messing things up?","body":"Thanks for the suggestion, can I put in as many as I like without messing things up?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1522936192,"post_id":49673888,"comment_id":86358805,"body_markdown":"@L.Spillner - Not really.  The SoE algorithm uses an array, and is more efficient than this.  This just the &quot;trial division&quot; approach; see https://en.wikipedia.org/wiki/Generating_primes","body":"@L.Spillner - Not really.  The SoE algorithm uses an array, and is more efficient than this.  This just the &quot;trial division&quot; approach; see <a href=\"https://en.wikipedia.org/wiki/Generating_primes\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Generating_primes</a>"},{"owner":{"account_id":11147483,"reputation":1772,"user_id":8181750,"display_name":"L.Spillner"},"score":0,"creation_date":1522936338,"post_id":49673888,"comment_id":86358922,"body_markdown":"@StephenC Ah thanks for correcting me there. Didn&#39;t think about that.","body":"@StephenC Ah thanks for correcting me there. Didn&#39;t think about that."},{"owner":{"account_id":281857,"reputation":41669,"user_id":578411,"accept_rate":83,"display_name":"rene"},"score":2,"creation_date":1523703668,"post_id":49673888,"comment_id":86676542,"body_markdown":"Please do not vandalize your posts.  By posting on the Stack Exchange network, you&#39;ve granted a non-revocable right for SE to distribute that content (under the [CC BY-SA 3.0 license](https://creativecommons.org/licenses/by-sa/3.0/)).  By SE policy, any vandalism will be reverted.","body":"Please do not vandalize your posts.  By posting on the Stack Exchange network, you&#39;ve granted a non-revocable right for SE to distribute that content (under the <a href=\"https://creativecommons.org/licenses/by-sa/3.0/\" rel=\"nofollow noreferrer\">CC BY-SA 3.0 license</a>).  By SE policy, any vandalism will be reverted."}],"answers":[{"tags":[],"owner":{"account_id":7821678,"reputation":2208,"user_id":5914654,"display_name":"vincrichaud"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522936556,"creation_date":1522936556,"answer_id":49674195,"question_id":49673888,"body_markdown":"The variable `x` iterate all the number from 2 to 100. Inside this loop you will process some stuff to determine if x is a prime number or not. This stuff your code do is to iterate through all the number from 2 to x and try for each one if it divides x. The variable `y` is this second number.\r\n\r\nFor example when you&#39;re at the iteration where `x = 4`. y will first be equal to 2. Then you check if `x%y==0`, this means you check if x is divisible by y. In this case it&#39;s true. so x is not a prime number so you exit the inner loop (`break;` statement). Then `x=5`, you have `y=2`. this does not divide x. you increment y (`y=3`). This does not divide x either. You increment y (`y=4`). This does not divide x. you increment y (`y=5`). The if `y==x` return true. It means you&#39;ve iterate through all value of y. So x is a prime number. So you print x. You exit your inner loop. you increment x (`x=6`). And so on...","title":"While Loop Prime Numbers between 1 - 100","body":"<p>The variable <code>x</code> iterate all the number from 2 to 100. Inside this loop you will process some stuff to determine if x is a prime number or not. This stuff your code do is to iterate through all the number from 2 to x and try for each one if it divides x. The variable <code>y</code> is this second number.</p>\n\n<p>For example when you're at the iteration where <code>x = 4</code>. y will first be equal to 2. Then you check if <code>x%y==0</code>, this means you check if x is divisible by y. In this case it's true. so x is not a prime number so you exit the inner loop (<code>break;</code> statement). Then <code>x=5</code>, you have <code>y=2</code>. this does not divide x. you increment y (<code>y=3</code>). This does not divide x either. You increment y (<code>y=4</code>). This does not divide x. you increment y (<code>y=5</code>). The if <code>y==x</code> return true. It means you've iterate through all value of y. So x is a prime number. So you print x. You exit your inner loop. you increment x (<code>x=6</code>). And so on...</p>\n"},{"comments":[{"owner":{"account_id":13300901,"reputation":23,"user_id":9602440,"display_name":"FacePalmProgramming"},"score":0,"creation_date":1522938992,"post_id":49674285,"comment_id":86360952,"body_markdown":"Succinct, it makes sense now!!","body":"Succinct, it makes sense now!!"}],"tags":[],"owner":{"account_id":10640876,"reputation":152,"user_id":7835955,"display_name":"pranavmalhotra"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1522936801,"creation_date":1522936801,"answer_id":49674285,"question_id":49673888,"body_markdown":"**Why the need to nest the y variable in the loop, why is it set to 2 and why does it need to increment by one each time?** \r\n\r\nWe need to reset the variable within the loop because the test needs to be applied for each value of x. The values of x are the potential candidates for prime numbers. Why is it set to 2 is because every number is divisible by 1. \r\n\r\n**Also, is there a way to get out of the loop without using the break; ?**\r\n\r\nYou can add another condition to the second while loop. This flag could then be set once you exit condition has been satisfied. ","title":"While Loop Prime Numbers between 1 - 100","body":"<p><strong>Why the need to nest the y variable in the loop, why is it set to 2 and why does it need to increment by one each time?</strong> </p>\n\n<p>We need to reset the variable within the loop because the test needs to be applied for each value of x. The values of x are the potential candidates for prime numbers. Why is it set to 2 is because every number is divisible by 1. </p>\n\n<p><strong>Also, is there a way to get out of the loop without using the break; ?</strong></p>\n\n<p>You can add another condition to the second while loop. This flag could then be set once you exit condition has been satisfied. </p>\n"},{"tags":[],"owner":{"account_id":10657616,"reputation":595,"user_id":7846650,"display_name":"Raguel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522936824,"creation_date":1522936824,"answer_id":49674291,"question_id":49673888,"body_markdown":"As you can see your first loop is checking whether or not x is smaller than 100. Then your next while dividing all numbers that is smaller than x, and if there is some number that is smaller than x and have 0 mod it is not prime. For example our x = 5 in first iteration y = 2, 5 % 2 = 1 as you can it is not possible to divide because mod is not zero, then y increments by one, 5 % 3 = 2 mod is 2 again not dividable, and so on in the you would that y increments till the 5 this means there is no smaller integer that you could divide to x from that our x=5 is prime number. When you don&#39;t understand what is going on, try to print all things. ","title":"While Loop Prime Numbers between 1 - 100","body":"<p>As you can see your first loop is checking whether or not x is smaller than 100. Then your next while dividing all numbers that is smaller than x, and if there is some number that is smaller than x and have 0 mod it is not prime. For example our x = 5 in first iteration y = 2, 5 % 2 = 1 as you can it is not possible to divide because mod is not zero, then y increments by one, 5 % 3 = 2 mod is 2 again not dividable, and so on in the you would that y increments till the 5 this means there is no smaller integer that you could divide to x from that our x=5 is prime number. When you don't understand what is going on, try to print all things. </p>\n"},{"tags":[],"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1522936871,"creation_date":1522936871,"answer_id":49674306,"question_id":49673888,"body_markdown":"Comments are your friend:\r\n\r\n    class PrimeNumbers {\r\n        public static void main(String args[]) {\r\n            // No point checking below 2 since the definition of a prime is &quot;A prime number (or a prime) is a natural number greater than 1 ...&quot;\r\n            int x = 2;\r\n            // Looking for primes up-to and including 100\r\n            while (x &lt;= 100) {\r\n                // Same argument as above - start checking at 2 and work upwards.\r\n                int y = 2;\r\n                // stop when y &gt; x as obviously y will not divide x\r\n                while (y &lt;= x) {\r\n                    // if y reaches x then we have not found any divisors\r\n                    if (x == y) {\r\n                        // success! This x is prime.\r\n                        System.out.println(x);\r\n                    }\r\n                    // if y divides x leaving no remainder then not prime - give up this y loop and select our next x\r\n                    if (x % y == 0) {\r\n                        break;\r\n                    }\r\n                    // Try next y divisor.\r\n                    y++;\r\n                }\r\n                // Try next x candidate.\r\n                x++;\r\n            }\r\n        }\r\n    }\r\n\r\nand naming your variables more helpfully it gets even easier\r\n\r\n    class PrimeNumbers {\r\n        public static void main(String args[]) {\r\n            // No point checking below 2 since the definition of a prime is &quot;A prime number (or a prime) is a natural number greater than 1 ...&quot;\r\n            int candidate = 2;\r\n            // Looking for primes up-to and including 100\r\n            while (candidate &lt;= 100) {\r\n                // Same argument as above - start checking at 2 and work upwards.\r\n                int divisor = 2;\r\n                // stop when divisor &gt; candidate as obviously divisor will not divide candidate\r\n                while (divisor &lt;= candidate) {\r\n                    // if divisor reaches candidate then we have not found any divisors (because of the `break` below).\r\n                    if (candidate == divisor) {\r\n                        // success! This candidate is prime.\r\n                        System.out.println(candidate);\r\n                    }\r\n                    // if divisor divides candidate leaving no remainder then not prime - give up this divisor loop and select our next candidate\r\n                    if (candidate % divisor == 0) {\r\n                        break;\r\n                    }\r\n                    // Try next divisor.\r\n                    divisor++;\r\n                }\r\n                // Try next candidate.\r\n                candidate++;\r\n            }\r\n        }\r\n    }\r\n","title":"While Loop Prime Numbers between 1 - 100","body":"<p>Comments are your friend:</p>\n\n<pre><code>class PrimeNumbers {\n    public static void main(String args[]) {\n        // No point checking below 2 since the definition of a prime is \"A prime number (or a prime) is a natural number greater than 1 ...\"\n        int x = 2;\n        // Looking for primes up-to and including 100\n        while (x &lt;= 100) {\n            // Same argument as above - start checking at 2 and work upwards.\n            int y = 2;\n            // stop when y &gt; x as obviously y will not divide x\n            while (y &lt;= x) {\n                // if y reaches x then we have not found any divisors\n                if (x == y) {\n                    // success! This x is prime.\n                    System.out.println(x);\n                }\n                // if y divides x leaving no remainder then not prime - give up this y loop and select our next x\n                if (x % y == 0) {\n                    break;\n                }\n                // Try next y divisor.\n                y++;\n            }\n            // Try next x candidate.\n            x++;\n        }\n    }\n}\n</code></pre>\n\n<p>and naming your variables more helpfully it gets even easier</p>\n\n<pre><code>class PrimeNumbers {\n    public static void main(String args[]) {\n        // No point checking below 2 since the definition of a prime is \"A prime number (or a prime) is a natural number greater than 1 ...\"\n        int candidate = 2;\n        // Looking for primes up-to and including 100\n        while (candidate &lt;= 100) {\n            // Same argument as above - start checking at 2 and work upwards.\n            int divisor = 2;\n            // stop when divisor &gt; candidate as obviously divisor will not divide candidate\n            while (divisor &lt;= candidate) {\n                // if divisor reaches candidate then we have not found any divisors (because of the `break` below).\n                if (candidate == divisor) {\n                    // success! This candidate is prime.\n                    System.out.println(candidate);\n                }\n                // if divisor divides candidate leaving no remainder then not prime - give up this divisor loop and select our next candidate\n                if (candidate % divisor == 0) {\n                    break;\n                }\n                // Try next divisor.\n                divisor++;\n            }\n            // Try next candidate.\n            candidate++;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8937054,"reputation":1080,"user_id":6667539,"display_name":"Paplusc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522937387,"creation_date":1522937387,"answer_id":49674473,"question_id":49673888,"body_markdown":"To know if a number is prime, the rest will only be zero when the number(x) is divided between himself or 1.\r\n\r\nSo in this code you divide each number(x) by all the numbers(y) between 1 and the number itself.\r\n\r\nThat&#39;s the reason when\r\n\r\n `if (x % y == 0) {\r\n          break;\r\n        }`\r\n\r\nThis means,if dividing `y` there is a `rest = 0` between 1 and X you stop the loop cause it is not gonna be a prime.\r\n\r\nYou can remove the break using a variable flag but the loop would do many more iterations.","title":"While Loop Prime Numbers between 1 - 100","body":"<p>To know if a number is prime, the rest will only be zero when the number(x) is divided between himself or 1.</p>\n\n<p>So in this code you divide each number(x) by all the numbers(y) between 1 and the number itself.</p>\n\n<p>That's the reason when</p>\n\n<p><code>if (x % y == 0) {\n          break;\n        }</code></p>\n\n<p>This means,if dividing <code>y</code> there is a <code>rest = 0</code> between 1 and X you stop the loop cause it is not gonna be a prime.</p>\n\n<p>You can remove the break using a variable flag but the loop would do many more iterations.</p>\n"},{"comments":[{"owner":{"account_id":508927,"reputation":2023,"user_id":1251613,"accept_rate":100,"display_name":"Markus"},"score":1,"creation_date":1585727218,"post_id":60965868,"comment_id":107860206,"body_markdown":"Your answer should be formatted better and it is obviously wrong because not every odd number is a prime number.","body":"Your answer should be formatted better and it is obviously wrong because not every odd number is a prime number."}],"tags":[],"owner":{"account_id":18124423,"reputation":1,"user_id":13180061,"display_name":"Kamaldeen Ayodele Raji"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585727056,"creation_date":1585727056,"answer_id":60965868,"question_id":49673888,"body_markdown":"print(&#39;Prime numbers between 1 and 100 are:&#39;)\r\n \r\nfor num in range(2,101):\r\n   if num &gt; 1:\r\n       for i in range(2,num):\r\n           if (num % i) == 0:\r\n               break\r\n       else:\r\n           print(num)","title":"While Loop Prime Numbers between 1 - 100","body":"<p>print('Prime numbers between 1 and 100 are:')</p>\n\n<p>for num in range(2,101):\n   if num > 1:\n       for i in range(2,num):\n           if (num % i) == 0:\n               break\n       else:\n           print(num)</p>\n"},{"tags":[],"owner":{"account_id":27629128,"reputation":1,"user_id":21088507,"display_name":"sasindu eshan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674754827,"creation_date":1674754827,"answer_id":75249790,"question_id":49673888,"body_markdown":"    class Example{\r\n        public static void main(String[] args) {\r\n            int i=2;\r\n            int j;\r\n            int count;\r\n    \r\n            while(i&lt;100){\r\n                j=1;\r\n                count=0;\r\n                while(j&lt;=i){\r\n                    if (i%j==0){\r\n                        count++;\r\n                    }\r\n                    j++;\r\n                }\r\n                if (count==2){\r\n                System.out.println(i);\r\n                }\r\n                i++;\r\n            }\r\n        }\r\n    }","title":"While Loop Prime Numbers between 1 - 100","body":"<pre><code>class Example{\n    public static void main(String[] args) {\n        int i=2;\n        int j;\n        int count;\n\n        while(i&lt;100){\n            j=1;\n            count=0;\n            while(j&lt;=i){\n                if (i%j==0){\n                    count++;\n                }\n                j++;\n            }\n            if (count==2){\n            System.out.println(i);\n            }\n            i++;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13300901,"reputation":23,"user_id":9602440,"display_name":"FacePalmProgramming"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9165,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":49674285,"answer_count":7,"score":1,"last_activity_date":1674754827,"creation_date":1522935729,"question_id":49673888,"body_markdown":"I&#39;m pretty new to programming, and I&#39;m trying to get my head around loops. I managed to get a piece of code working, but I&#39;m still not fully understanding how it works. I found code for a similar program online which was written using a for loop and I managed to get it to work as a while loop (took me a few days!!!). I&#39;m trying to understand what the inner loop is doing. \r\n\r\nI know the outer loop is checking that **x** is less than 100 for each iteration of the loop. Why the need to nest the **y** variable in the loop, why is it set to 2 and why does it need to increment by one each time? Also, is there a way to get out of the loop without using the **break;** ?\r\n\r\nI&#39;ve seen a few other examples of this type of program here, but I am hoping someone can shed some light on how this one is working specifically.\r\n\r\nThanks in advance!!!\r\n\r\n\r\n    class PrimeNumbers {\r\n      public static void main(String args[]) {\r\n        int x = 2;\r\n        while (x &lt;= 100) {\r\n          int y = 2;\r\n          while (y &lt;= x) {\r\n            if (x == y) {\r\n              System.out.println(x);\r\n            }\r\n            if (x % y == 0) {\r\n              break;\r\n            }\r\n            y++;\r\n          }\r\n          x++;\r\n        }\r\n      }\r\n    }\r\n","title":"While Loop Prime Numbers between 1 - 100","body":"<p>I'm pretty new to programming, and I'm trying to get my head around loops. I managed to get a piece of code working, but I'm still not fully understanding how it works. I found code for a similar program online which was written using a for loop and I managed to get it to work as a while loop (took me a few days!!!). I'm trying to understand what the inner loop is doing. </p>\n\n<p>I know the outer loop is checking that <strong>x</strong> is less than 100 for each iteration of the loop. Why the need to nest the <strong>y</strong> variable in the loop, why is it set to 2 and why does it need to increment by one each time? Also, is there a way to get out of the loop without using the <strong>break;</strong> ?</p>\n\n<p>I've seen a few other examples of this type of program here, but I am hoping someone can shed some light on how this one is working specifically.</p>\n\n<p>Thanks in advance!!!</p>\n\n<pre><code>class PrimeNumbers {\n  public static void main(String args[]) {\n    int x = 2;\n    while (x &lt;= 100) {\n      int y = 2;\n      while (y &lt;= x) {\n        if (x == y) {\n          System.out.println(x);\n        }\n        if (x % y == 0) {\n          break;\n        }\n        y++;\n      }\n      x++;\n    }\n  }\n}\n</code></pre>\n"},{"tags":["java","junit","callback"],"answers":[{"tags":[],"owner":{"account_id":299745,"reputation":739,"user_id":606513,"accept_rate":74,"display_name":"schneida"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674475666,"creation_date":1674475666,"answer_id":75209273,"question_id":75209197,"body_markdown":"I&#39;m not certain this is the best pattern, but what I often do is to use [`CompletableFuture`][1] to work with these kind of callbacks.\r\n\r\n\r\n```\r\n@Test\r\npublic void testMethod() throws Exception {\r\n    JAXBElement&lt;MyCustomObject&gt; obj = null;\r\n\r\n    //Instantiate a future before the callback\r\n    final CompletableFuture&lt;MyMessageClass&gt; callbackFuture = new CompletableFuture&lt;&gt;();\r\n\r\n    try {\r\n        obj = (JAXBElement&lt;MyCustomObject&gt;) template.marshall(&quot;some string&quot;, new     SoapActionCallback(&quot;some string&quot;) {\r\n        public void doWithMessage(MyMessageClass message) {\r\n          //Complete the future within the callback\r\n          callbackFuture.complete(message);\r\n        });\r\n    }\r\n\r\n   //Wait until the future has completed in your callback and do the verification afterwards\r\n   MyMessageClass message = callbackFuture.get(5, TimeUnit.SECONDS);\r\n   assertEquals(&quot;your verification&quot;, message.toString());\r\n\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html","title":"Junit, How to cover the callback code using Junit?","body":"<p>I'm not certain this is the best pattern, but what I often do is to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\"><code>CompletableFuture</code></a> to work with these kind of callbacks.</p>\n<pre><code>@Test\npublic void testMethod() throws Exception {\n    JAXBElement&lt;MyCustomObject&gt; obj = null;\n\n    //Instantiate a future before the callback\n    final CompletableFuture&lt;MyMessageClass&gt; callbackFuture = new CompletableFuture&lt;&gt;();\n\n    try {\n        obj = (JAXBElement&lt;MyCustomObject&gt;) template.marshall(&quot;some string&quot;, new     SoapActionCallback(&quot;some string&quot;) {\n        public void doWithMessage(MyMessageClass message) {\n          //Complete the future within the callback\n          callbackFuture.complete(message);\n        });\n    }\n\n   //Wait until the future has completed in your callback and do the verification afterwards\n   MyMessageClass message = callbackFuture.get(5, TimeUnit.SECONDS);\n   assertEquals(&quot;your verification&quot;, message.toString());\n\n}\n</code></pre>\n"}],"owner":{"account_id":20937325,"reputation":1,"user_id":15382223,"display_name":"k-block"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674754677,"creation_date":1674475239,"question_id":75209197,"body_markdown":"I have to write a test case to cover a method which has a callback as one of the parameters. It looks something like the snippet below. \r\n\r\n\r\n```\r\nJAXBElement&lt;MyCustomObject&gt; obj = null;\r\n\r\ntry {\r\n    obj = (JAXBElement&lt;MyCustomObject&gt;) template.marshall(&quot;some string&quot;, new SoapActionCallback(&quot;some string&quot;) {\r\n        public void doWithMessage(MyMessageClass message) {\r\n          // some logic \r\n});\r\n}\r\n```\r\nHow do cover the callback logic ?\r\n\r\nI am not able to figure out how to cover the callback logic.","title":"Junit, How to cover the callback code using Junit?","body":"<p>I have to write a test case to cover a method which has a callback as one of the parameters. It looks something like the snippet below.</p>\n<pre><code>JAXBElement&lt;MyCustomObject&gt; obj = null;\n\ntry {\n    obj = (JAXBElement&lt;MyCustomObject&gt;) template.marshall(&quot;some string&quot;, new SoapActionCallback(&quot;some string&quot;) {\n        public void doWithMessage(MyMessageClass message) {\n          // some logic \n});\n}\n</code></pre>\n<p>How do cover the callback logic ?</p>\n<p>I am not able to figure out how to cover the callback logic.</p>\n"},{"tags":["java","swing","jtable","resultset","tablemodel"],"answers":[{"comments":[{"owner":{"account_id":1382739,"reputation":2171,"user_id":1315408,"accept_rate":67,"display_name":"Tarik"},"score":0,"creation_date":1335524989,"post_id":10349510,"comment_id":13332268,"body_markdown":"-_- i want to create the table, i only have the reslutset from the statement","body":"-_- i want to create the table, i only have the reslutset from the statement"},{"owner":{"account_id":1247126,"reputation":4475,"user_id":1312147,"accept_rate":61,"display_name":"Sachin Mhetre"},"score":0,"creation_date":1335525065,"post_id":10349510,"comment_id":13332302,"body_markdown":"You mean you have data and you want to create table?","body":"You mean you have data and you want to create table?"}],"tags":[],"owner":{"account_id":1247126,"reputation":4475,"user_id":1312147,"accept_rate":61,"display_name":"Sachin Mhetre"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1335524825,"creation_date":1335524825,"answer_id":10349510,"question_id":10349359,"body_markdown":"If you have a table object, then you can a tablemodel by using `getModel()`.\r\n","title":"get table model from table with unknown rows and columns","body":"<p>If you have a table object, then you can a tablemodel by using <code>getModel()</code>.</p>\n"},{"comments":[{"owner":{"account_id":1382739,"reputation":2171,"user_id":1315408,"accept_rate":67,"display_name":"Tarik"},"score":0,"creation_date":1335525511,"post_id":10349588,"comment_id":13332475,"body_markdown":"why did i use complicated tags in my searching --&quot;","body":"why did i use complicated tags in my searching --&quot;"}],"tags":[],"owner":{"account_id":114756,"reputation":57127,"user_id":301607,"accept_rate":100,"display_name":"StanislavL"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1335525171,"creation_date":1335525171,"answer_id":10349588,"question_id":10349359,"body_markdown":"Use this http://technojeeves.com/joomla/index.php/free/59-resultset-to-tablemodel\r\n","title":"get table model from table with unknown rows and columns","body":"<p>Use this <a href=\"http://technojeeves.com/joomla/index.php/free/59-resultset-to-tablemodel\" rel=\"nofollow\">http://technojeeves.com/joomla/index.php/free/59-resultset-to-tablemodel</a></p>\n"}],"owner":{"account_id":1382739,"reputation":2171,"user_id":1315408,"accept_rate":67,"display_name":"Tarik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1631,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1674822172,"accepted_answer_id":10349588,"answer_count":2,"score":0,"last_activity_date":1674754665,"creation_date":1335524180,"question_id":10349359,"body_markdown":"I know how to get a simple TableModel from a table that I knew.\r\n\r\nBut I wanted to know how to get a TableModel from a table which I don&#39;t know its columns and rows details.\r\n\r\nIsn&#39;t there a way to get the table model directly from the `ResultSet`?","title":"get table model from table with unknown rows and columns","body":"<p>I know how to get a simple TableModel from a table that I knew.</p>\n<p>But I wanted to know how to get a TableModel from a table which I don't know its columns and rows details.</p>\n<p>Isn't there a way to get the table model directly from the <code>ResultSet</code>?</p>\n"},{"tags":["java","selenium","appium"],"answers":[{"comments":[{"owner":{"account_id":19352838,"reputation":9,"user_id":14149835,"display_name":"user14149835"},"score":0,"creation_date":1674794501,"post_id":75246542,"comment_id":132793611,"body_markdown":"I tried but still contexts are not getting detected, tried for 10 tries also. I&#39;m trying to execute my scripts in Kobiton real devices","body":"I tried but still contexts are not getting detected, tried for 10 tries also. I&#39;m trying to execute my scripts in Kobiton real devices"}],"tags":[],"owner":{"account_id":26782210,"reputation":96,"user_id":20376910,"display_name":"valies"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674738426,"creation_date":1674738426,"answer_id":75246542,"question_id":75245159,"body_markdown":"If you notice that the web context has a delay of appearing in the list of contexts, you can add a while loop that checks for a certain amount of time if there are 2 contexts (native and web) before switching to it.\r\n\r\n    int tries = 0;\r\n    while (driver.getContextHandles().size() &lt; 2 &amp;&amp; tries &lt; 5) {\r\n        Thread.sleep(500);\r\n        tries++;\r\n    }\r\n\r\nI believe you should first change the context to the web view:\r\n\r\n    driver.context(&quot;name_of_the_webview_context&quot;);\r\n\r\nAnd only then start switching between WindowHandles (not 100% sure as I&#39;ve never used this, it just feels more logical).\r\n\r\n    driver.switchTo().window(&quot;name_of_your_window_handle&quot;);\r\n","title":"iOS - No context detected and sometimes unable to switch to WebView context when contexts are available","body":"<p>If you notice that the web context has a delay of appearing in the list of contexts, you can add a while loop that checks for a certain amount of time if there are 2 contexts (native and web) before switching to it.</p>\n<pre><code>int tries = 0;\nwhile (driver.getContextHandles().size() &lt; 2 &amp;&amp; tries &lt; 5) {\n    Thread.sleep(500);\n    tries++;\n}\n</code></pre>\n<p>I believe you should first change the context to the web view:</p>\n<pre><code>driver.context(&quot;name_of_the_webview_context&quot;);\n</code></pre>\n<p>And only then start switching between WindowHandles (not 100% sure as I've never used this, it just feels more logical).</p>\n<pre><code>driver.switchTo().window(&quot;name_of_your_window_handle&quot;);\n</code></pre>\n"}],"owner":{"account_id":19352838,"reputation":9,"user_id":14149835,"display_name":"user14149835"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1674754652,"creation_date":1674730508,"question_id":75245159,"body_markdown":"Below is my code:\r\n\r\n    Set&lt;String&gt; contextNames1 = appiumDriver.getContextHandles();\r\n\r\n    for (String winHandle: appiumDriver.getWindowHandles()) {\r\n        System.out.println(contextNames1);\r\n\r\n        if (winHandle.contains(&quot;WEBVIEW&quot;)) {\r\n            ((AppiumDriver) appiumDriver).context(winHandle);\r\n            System.out.println(&quot;Switched to &quot; + winHandle);\r\n            appiumDriver.switchTo().window(winHandle);\r\n        }\r\n    }\r\n\r\n1) No contexts are detected. I added a `wait` statement but still not working\r\n2) If contexts are detected, then I&#39;m getting an exception saying that &quot;Unrecognized WebView context&quot;","title":"iOS - No context detected and sometimes unable to switch to WebView context when contexts are available","body":"<p>Below is my code:</p>\n<pre><code>Set&lt;String&gt; contextNames1 = appiumDriver.getContextHandles();\n\nfor (String winHandle: appiumDriver.getWindowHandles()) {\n    System.out.println(contextNames1);\n\n    if (winHandle.contains(&quot;WEBVIEW&quot;)) {\n        ((AppiumDriver) appiumDriver).context(winHandle);\n        System.out.println(&quot;Switched to &quot; + winHandle);\n        appiumDriver.switchTo().window(winHandle);\n    }\n}\n</code></pre>\n<ol>\n<li>No contexts are detected. I added a <code>wait</code> statement but still not working</li>\n<li>If contexts are detected, then I'm getting an exception saying that &quot;Unrecognized WebView context&quot;</li>\n</ol>\n"},{"tags":["java","android","mysql","chat"],"comments":[{"owner":{"account_id":24021591,"reputation":114,"user_id":18003799,"display_name":"Seife"},"score":0,"creation_date":1674711732,"post_id":75240185,"comment_id":132773517,"body_markdown":"MYSQL is not a realtime database so there is no easy way to do it, You didn&#39;t mention your backend also. But you could look in to socket to achieve what you are doing. I recommend switch your database to firebase realtime.","body":"MYSQL is not a realtime database so there is no easy way to do it, You didn&#39;t mention your backend also. But you could look in to socket to achieve what you are doing. I recommend switch your database to firebase realtime."}],"answers":[{"tags":[],"owner":{"account_id":15044323,"reputation":135,"user_id":10857976,"display_name":"Abbas Ghassemi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674754257,"creation_date":1674754257,"answer_id":75249699,"question_id":75240185,"body_markdown":"You must use the **WebSocket** protocol to receive real-time changes and reduce costs, chat applications use WebSockets to establish the connection only once for exchange, publishing, and broadcasting the message among the subscribers. It reuses the same WebSocket connection, for sending and receiving the message and for one-to-one message transfer.\r\n\r\n**Otherwise**, you can check the existence of a new message every 3 seconds, you can use the id or time of the last message as a criterion for identifying new messages.","title":"Android: How to automatically refresh chat screen when new message in MySQL Database detected","body":"<p>You must use the <strong>WebSocket</strong> protocol to receive real-time changes and reduce costs, chat applications use WebSockets to establish the connection only once for exchange, publishing, and broadcasting the message among the subscribers. It reuses the same WebSocket connection, for sending and receiving the message and for one-to-one message transfer.</p>\n<p><strong>Otherwise</strong>, you can check the existence of a new message every 3 seconds, you can use the id or time of the last message as a criterion for identifying new messages.</p>\n"}],"owner":{"account_id":16541199,"reputation":1,"user_id":11951922,"display_name":"Abdullah Akram"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674754257,"creation_date":1674683044,"question_id":75240185,"body_markdown":"I am working on a android(java) chat app using MYSQL as database. Is there any way to automatically refresh and update the chat screen upon receiving new messages in database without having to reload the entire activity manually?...Like Whatsapp...\r\n\r\nRn upon sending a message, I get all the messages from database again which is not a good approach. But when other user send a message, for me to receive it and get it displayed on my screen I have to manually restart the activity. ","title":"Android: How to automatically refresh chat screen when new message in MySQL Database detected","body":"<p>I am working on a android(java) chat app using MYSQL as database. Is there any way to automatically refresh and update the chat screen upon receiving new messages in database without having to reload the entire activity manually?...Like Whatsapp...</p>\n<p>Rn upon sending a message, I get all the messages from database again which is not a good approach. But when other user send a message, for me to receive it and get it displayed on my screen I have to manually restart the activity.</p>\n"},{"tags":["java","windows","tomcat","windows-services"],"comments":[{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":1,"creation_date":1404888494,"post_id":24647003,"comment_id":38204392,"body_markdown":"_bizarre error_ :) probably IIS is running blocking ports ?","body":"<i>bizarre error</i> :) probably IIS is running blocking ports ?"},{"owner":{"account_id":302471,"reputation":8627,"user_id":1130032,"accept_rate":69,"display_name":"Ved"},"score":0,"creation_date":1404888678,"post_id":24647003,"comment_id":38204476,"body_markdown":"Seems to be Firewall blockage for tomcat6.","body":"Seems to be Firewall blockage for tomcat6."},{"owner":{"account_id":4671438,"reputation":209,"user_id":3783134,"accept_rate":0,"display_name":"melo"},"score":0,"creation_date":1404907102,"post_id":24647003,"comment_id":38215425,"body_markdown":"in the log file /logs/jakarta_service.log it says &quot;%1 is not a valid Win32 application.&quot;. Also I am already using a different port than 8080.","body":"in the log file /logs/jakarta_service.log it says &quot;%1 is not a valid Win32 application.&quot;. Also I am already using a different port than 8080."}],"answers":[{"tags":[],"owner":{"account_id":1154976,"reputation":366,"user_id":1135831,"accept_rate":44,"display_name":"Anup Ganatra"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1404889229,"creation_date":1404889229,"answer_id":24647210,"question_id":24647003,"body_markdown":"You need to check the ports first. It might be situation that default port(8080) is used by some other application.\r\n\r\nTry changing the port from 8080 to some different port in conf/server.xml file. \r\n\r\nAlso please check that your JRE_HOME variable is set correctly because tomcat needs JRE to run. You can also set your JRE_HOME variable in system. For that go to my computer-&gt;right click and select properties-&gt;Advanced system settings-&gt;Advanced-&gt;Environment variable and click on new-&gt; variable name = &quot;JRE_HOME&quot; and variable value = &quot;C:\\Program Files\\Java\\jre7&quot;","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>You need to check the ports first. It might be situation that default port(8080) is used by some other application.</p>\n\n<p>Try changing the port from 8080 to some different port in conf/server.xml file. </p>\n\n<p>Also please check that your JRE_HOME variable is set correctly because tomcat needs JRE to run. You can also set your JRE_HOME variable in system. For that go to my computer->right click and select properties->Advanced system settings->Advanced->Environment variable and click on new-> variable name = \"JRE_HOME\" and variable value = \"C:\\Program Files\\Java\\jre7\"</p>\n"},{"tags":[],"owner":{"account_id":2241006,"reputation":183,"user_id":1975267,"display_name":"KingQQ"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1404889601,"creation_date":1404889601,"answer_id":24647302,"question_id":24647003,"body_markdown":"1. Check the apache tomcat catalina log:\r\n../logs/catalina.log\r\n2. If in the log you find the &quot;port was used&quot; exception, then Check windows used ports and processes with following command:\r\nRun cmd\r\nnetstat -ao\r\nit will list all listening ports and corresponding process Id, you can find the port which was used by Tomcat from the configuration file:\r\n../conf/server.xml\r\n\r\n        &lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;\r\n               connectionTimeout=&quot;20000&quot;\r\n               redirectPort=&quot;8443&quot; /&gt;\r\n\r\nand kill the process which use the tomcat port","title":"Can&#39;t start Tomcat as Windows Service","body":"<ol>\n<li>Check the apache tomcat catalina log:\n../logs/catalina.log</li>\n<li><p>If in the log you find the \"port was used\" exception, then Check windows used ports and processes with following command:\nRun cmd\nnetstat -ao\nit will list all listening ports and corresponding process Id, you can find the port which was used by Tomcat from the configuration file:\n../conf/server.xml</p>\n\n<pre><code>&lt;Connector port=\"8080\" protocol=\"HTTP/1.1\"\n       connectionTimeout=\"20000\"\n       redirectPort=\"8443\" /&gt;\n</code></pre></li>\n</ol>\n\n<p>and kill the process which use the tomcat port</p>\n"},{"comments":[{"owner":{"account_id":4536033,"reputation":95,"user_id":3685227,"display_name":"schattenjager"},"score":1,"creation_date":1591226723,"post_id":28966888,"comment_id":109979498,"body_markdown":"2020 and it just happened to me with Tomcat 9.3. TomcatXw is located (Win 10) in C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\bin. Changed mode from &quot;jvm&quot; to &quot;java&quot; and problem was solved. THANKS!","body":"2020 and it just happened to me with Tomcat 9.3. TomcatXw is located (Win 10) in C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\bin. Changed mode from &quot;jvm&quot; to &quot;java&quot; and problem was solved. THANKS!"}],"tags":[],"owner":{"account_id":5915539,"reputation":81,"user_id":4654460,"display_name":"Nivedita Gopal"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1425999087,"creation_date":1425999087,"answer_id":28966888,"question_id":24647003,"body_markdown":"&quot;Windows could not start the Apache Tomcat 6 on Local Computer. For more information, review the System Event Log. If this is a non-Microsoft service, contact the service vendor, and refer to service-specific error code 0&quot;\r\n\r\nWhen an error of this sort come. please go to start -&gt; configure tomcat -&gt; startup -&gt; Mode  -&gt; java\r\nsimilarly\r\nstart -&gt; configure tomcat -&gt; shutdown -&gt; Mode  -&gt; java\r\n","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>\"Windows could not start the Apache Tomcat 6 on Local Computer. For more information, review the System Event Log. If this is a non-Microsoft service, contact the service vendor, and refer to service-specific error code 0\"</p>\n\n<p>When an error of this sort come. please go to start -> configure tomcat -> startup -> Mode  -> java\nsimilarly\nstart -> configure tomcat -> shutdown -> Mode  -> java</p>\n"},{"comments":[{"owner":{"account_id":5444683,"reputation":112,"user_id":4476612,"display_name":"Rushikesh Gaidhani"},"score":1,"creation_date":1636743374,"post_id":29228972,"comment_id":123647028,"body_markdown":"In layman terms, \n\n- Go to bin folder of your tomcat installed/extracted path (example,\n   C:\\tomcat\\bin) \n -  run the program Tomcat8w (it will open tomcat\n   properties GUI) \n -  switch to Startup tab and set Mode = Java \n -  select Shutdown tab and set Mode = Java \n - Start/Restart Tomcat windows service","body":"In layman terms,   - Go to bin folder of your tomcat installed/extracted path (example,    C:\\tomcat\\bin)   -  run the program Tomcat8w (it will open tomcat    properties GUI)   -  switch to Startup tab and set Mode = Java   -  select Shutdown tab and set Mode = Java   - Start/Restart Tomcat windows service"}],"tags":[],"owner":{"account_id":1558180,"reputation":611,"user_id":1448687,"display_name":"Prashant"},"comment_count":1,"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1540563495,"creation_date":1427189203,"answer_id":29228972,"question_id":24647003,"body_markdown":"Go to Start &gt; Configure Tomcat &gt; \r\n\r\n- Startup &gt; Mode = Java\r\n- Shutdown &gt; Mode = Java\r\n\r\nThis worked for me!\r\n","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>Go to Start > Configure Tomcat > </p>\n\n<ul>\n<li>Startup > Mode = Java</li>\n<li>Shutdown > Mode = Java</li>\n</ul>\n\n<p>This worked for me!</p>\n"},{"tags":[],"owner":{"account_id":6843815,"reputation":1,"user_id":5263244,"display_name":"Nitin Mestry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454502554,"creation_date":1454502554,"answer_id":35177138,"question_id":24647003,"body_markdown":"I had the similar issue, But installing tomcat 32bit and jdk 32 bit worked, This happens mostly because of mismatch Bit.","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>I had the similar issue, But installing tomcat 32bit and jdk 32 bit worked, This happens mostly because of mismatch Bit.</p>\n"},{"tags":[],"owner":{"account_id":2630551,"reputation":538,"user_id":3192788,"display_name":"elin"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1469409227,"creation_date":1469408862,"answer_id":38558410,"question_id":24647003,"body_markdown":"I have the problem because I updated Java version.\r\n\r\nThe following steps work for me:\r\n\r\n&gt; 1. Run `\\Tomcat\\bin\\tomcat7w.exe`\r\n2. Confirm &quot;Startup&quot; tab -&gt; &quot;Mode&quot; choose &quot;jvm&quot;\r\n3. &quot;Java&quot; tab -&gt; update &quot;Java Virtual Machine&quot; path to new version path\r\n4. Restart Tomcat\r\n\r\nDone.","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>I have the problem because I updated Java version.</p>\n\n<p>The following steps work for me:</p>\n\n<blockquote>\n  <ol>\n  <li>Run <code>\\Tomcat\\bin\\tomcat7w.exe</code></li>\n  <li>Confirm \"Startup\" tab -> \"Mode\" choose \"jvm\"</li>\n  <li>\"Java\" tab -> update \"Java Virtual Machine\" path to new version path</li>\n  <li>Restart Tomcat</li>\n  </ol>\n</blockquote>\n\n<p>Done.</p>\n"},{"tags":[],"owner":{"account_id":7838012,"reputation":631,"user_id":5925278,"accept_rate":20,"display_name":"Comm4nd0"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1499091654,"creation_date":1499091654,"answer_id":44887965,"question_id":24647003,"body_markdown":"In my case it helps if you don&#39;t install the x86 version over the x64 version... DOH!!!","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>In my case it helps if you don't install the x86 version over the x64 version... DOH!!!</p>\n"},{"tags":[],"owner":{"account_id":5410302,"reputation":10890,"user_id":4307338,"accept_rate":67,"display_name":"Hoque MD Zahidul"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1507521613,"creation_date":1507521613,"answer_id":46638670,"question_id":24647003,"body_markdown":"**Cause :** \r\n\r\nThis issue is caused:\r\n\r\n    1- tomcat can&#39;t find the jvm file from the directory specified to start the service because is deleted.\r\n    \r\n    2- Incorrect permissions to the java folder for read&amp;write access\r\n    \r\n    3- Incorrect JAVA_HOME path.\r\n   \r\n    4- Antivirus deleted the jvm file from java folder\r\n\r\n**Resolution:**\r\n\r\n&gt; 1- confirm that especified file exisit in the java directoy.\r\n&gt; \r\n&gt; 2- Make sure that file has read&amp;write permissions.\r\n&gt; \r\n&gt; 3- Confirm that JAVA_HOME is correct for java version.\r\n&gt; \r\n&gt; 4- if file has been deleted reinstall same java version to recreate\r\n&gt; missing files.\r\n\r\n \r\n","title":"Can&#39;t start Tomcat as Windows Service","body":"<p><strong>Cause :</strong> </p>\n\n<p>This issue is caused:</p>\n\n<pre><code>1- tomcat can't find the jvm file from the directory specified to start the service because is deleted.\n\n2- Incorrect permissions to the java folder for read&amp;write access\n\n3- Incorrect JAVA_HOME path.\n\n4- Antivirus deleted the jvm file from java folder\n</code></pre>\n\n<p><strong>Resolution:</strong></p>\n\n<blockquote>\n  <p>1- confirm that especified file exisit in the java directoy.</p>\n  \n  <p>2- Make sure that file has read&amp;write permissions.</p>\n  \n  <p>3- Confirm that JAVA_HOME is correct for java version.</p>\n  \n  <p>4- if file has been deleted reinstall same java version to recreate\n  missing files.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9900577,"reputation":852,"user_id":7330713,"accept_rate":67,"display_name":"Zack Zilic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1518537623,"creation_date":1518537623,"answer_id":48770806,"question_id":24647003,"body_markdown":"All those mistakes are related to badly connected Apache and JDK.\r\n\r\n1. go to start&gt;System&gt;Advanced_system_settings&gt;\r\n2. System Properties will pop-up go to Environment Variables\r\n3. in User variables you have to set variable: JAVA_HOME value: C:\\Program_Files\\Java\\jdk1.8.0_161\r\n4. in System variables you need to put in the path: jdk/bin path &amp; jre/bin path\r\nand also you need to have JAVA_HOME C:\\Program_Files\\Java\\jdk1.8.0_161\r\n\r\n\r\npeople usually forget to setup JAVA_HOME in System variables.\r\n\r\nif you still have an error try to think step by step\r\n\r\n1. Open Event viewer&gt;Check Administrative Events and Windows Logs&gt;System\r\nsee the error. If that doesn&#39;t help\r\n2. go to C:\\Program Files\\Apache Software Foundation\\Tomcat 7.0\\logs commons-daemon.XXXX-XX-XX.log\r\nand READ THE ERRORS AND WARNINGS...\r\nthere should be nicely put down in words what&#39;s the problem.","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>All those mistakes are related to badly connected Apache and JDK.</p>\n\n<ol>\n<li>go to start>System>Advanced_system_settings></li>\n<li>System Properties will pop-up go to Environment Variables</li>\n<li>in User variables you have to set variable: JAVA_HOME value: C:\\Program_Files\\Java\\jdk1.8.0_161</li>\n<li>in System variables you need to put in the path: jdk/bin path &amp; jre/bin path\nand also you need to have JAVA_HOME C:\\Program_Files\\Java\\jdk1.8.0_161</li>\n</ol>\n\n<p>people usually forget to setup JAVA_HOME in System variables.</p>\n\n<p>if you still have an error try to think step by step</p>\n\n<ol>\n<li>Open Event viewer>Check Administrative Events and Windows Logs>System\nsee the error. If that doesn't help</li>\n<li>go to C:\\Program Files\\Apache Software Foundation\\Tomcat 7.0\\logs commons-daemon.XXXX-XX-XX.log\nand READ THE ERRORS AND WARNINGS...\nthere should be nicely put down in words what's the problem.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15124749,"reputation":11,"user_id":10914468,"display_name":"ReL"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1547510933,"creation_date":1547510933,"answer_id":54191014,"question_id":24647003,"body_markdown":"The simplest answer that worked for me was the one mentioned by Prashant, and edited by Bluish.\r\n\r\n&gt; Go to Start &gt; Configure Tomcat &gt; Startup &gt; Mode = Java Shutdown &gt; Mode\r\n&gt; = Java\r\n\r\nUnfortunately I had(and possibly others) to do this in a different way, I went to the tomcat bin directory and ran the &quot;tomcat7w&quot; application, which is how I changed the configuration. \r\n\r\nThere I was able to change the startup mode and shutdown mode to *Java*. Like this:\r\n\r\nStep1) Locate\r\n**tomcat7w**:\r\n\r\n  general location =&gt; *%TomCatHomeDIR%/bin* \r\n  In my case tomcat was in the xampp folder so my address was:\r\n\r\n&gt; C:\\xampp\\tomcat\\bin\r\n\r\n[tomcat7w file location screenshot][1]\r\n\r\n\r\nStep2) Launch **tomcat7w** &amp;&amp; change the Mode in the Startup and Shutdown tabs\r\n\r\n[tomcat7w startup tab screenshot][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GiJd2.png\r\n  [2]: https://i.stack.imgur.com/z2ZMW.png\r\n\r\nNote &gt;**This based on version 7.0.22 that comes standard with XAMPP.** ","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>The simplest answer that worked for me was the one mentioned by Prashant, and edited by Bluish.</p>\n\n<blockquote>\n  <p>Go to Start > Configure Tomcat > Startup > Mode = Java Shutdown > Mode\n  = Java</p>\n</blockquote>\n\n<p>Unfortunately I had(and possibly others) to do this in a different way, I went to the tomcat bin directory and ran the \"tomcat7w\" application, which is how I changed the configuration. </p>\n\n<p>There I was able to change the startup mode and shutdown mode to <em>Java</em>. Like this:</p>\n\n<p>Step1) Locate\n<strong>tomcat7w</strong>:</p>\n\n<p>general location => <em>%TomCatHomeDIR%/bin</em> \n  In my case tomcat was in the xampp folder so my address was:</p>\n\n<blockquote>\n  <p>C:\\xampp\\tomcat\\bin</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/GiJd2.png\" rel=\"nofollow noreferrer\">tomcat7w file location screenshot</a></p>\n\n<p>Step2) Launch <strong>tomcat7w</strong> &amp;&amp; change the Mode in the Startup and Shutdown tabs</p>\n\n<p><a href=\"https://i.stack.imgur.com/z2ZMW.png\" rel=\"nofollow noreferrer\">tomcat7w startup tab screenshot</a></p>\n\n<p>Note ><strong>This based on version 7.0.22 that comes standard with XAMPP.</strong> </p>\n"},{"tags":[],"owner":{"account_id":10131551,"reputation":159,"user_id":7484761,"display_name":"sabeena kumarawadu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561350823,"creation_date":1561350823,"answer_id":56729885,"question_id":24647003,"body_markdown":"It is very important that you don&#39;t include *bin* in your JAVA_HOME path. It should be like,\r\n\r\n*C:\\Program Files\\Java\\jdk-11.0.3*\r\n","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>It is very important that you don't include <em>bin</em> in your JAVA_HOME path. It should be like,</p>\n\n<p><em>C:\\Program Files\\Java\\jdk-11.0.3</em></p>\n"},{"tags":[],"owner":{"account_id":15422259,"reputation":3,"user_id":11125993,"display_name":"Jan Hirschkuh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564234866,"creation_date":1564234866,"answer_id":57232667,"question_id":24647003,"body_markdown":"On a 64-bit system you have to make sure that both the Tomcat application and the JDK are the same architecture: either both are x86 or x64.\r\n\r\nIn case you want to change the Tomcat instance to x64 you might have to download the `tomcat8.exe` or `tomcat9.exe` and the `tcnative-1.dll` with the appropriate x64 versions. You can get those at http://svn.apache.org/viewvc/tomcat/.\r\n\r\nAlternatively you can point Tomcat to the x86 JDK by changing the Java Virtual Machine path in the Tomcat config.","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>On a 64-bit system you have to make sure that both the Tomcat application and the JDK are the same architecture: either both are x86 or x64.</p>\n\n<p>In case you want to change the Tomcat instance to x64 you might have to download the <code>tomcat8.exe</code> or <code>tomcat9.exe</code> and the <code>tcnative-1.dll</code> with the appropriate x64 versions. You can get those at <a href=\"http://svn.apache.org/viewvc/tomcat/\" rel=\"nofollow noreferrer\">http://svn.apache.org/viewvc/tomcat/</a>.</p>\n\n<p>Alternatively you can point Tomcat to the x86 JDK by changing the Java Virtual Machine path in the Tomcat config.</p>\n"},{"comments":[{"owner":{"account_id":10310871,"reputation":25632,"user_id":7606764,"display_name":"Andronicus"},"score":0,"creation_date":1566274648,"post_id":57566491,"comment_id":101594359,"body_markdown":"This is a duplicated answer, please provide your own or delete the post","body":"This is a duplicated answer, please provide your own or delete the post"}],"tags":[],"owner":{"account_id":16538022,"reputation":11,"user_id":11949457,"display_name":"Ravi G"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566273113,"creation_date":1566273113,"answer_id":57566491,"question_id":24647003,"body_markdown":"Solution suggested by Prashant worked fine for me.\r\n\r\nTomcat9 Properties &gt; Configure &gt; Startup &gt; Mode = Java\r\nTomcat9 Properties &gt; Configure &gt; Shutdown &gt; Mode = Java","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>Solution suggested by Prashant worked fine for me.</p>\n\n<p>Tomcat9 Properties > Configure > Startup > Mode = Java\nTomcat9 Properties > Configure > Shutdown > Mode = Java</p>\n"},{"tags":[],"owner":{"account_id":8203672,"reputation":87,"user_id":6174171,"display_name":"Saffa Seraj"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1621800587,"creation_date":1588803563,"answer_id":61646411,"question_id":24647003,"body_markdown":"Well before going so far, first make sure that you have the path to the Java directory in your Windows Environment Path\r\n\r\n 1. **Start** &gt; **Control Panel** &gt; lookup for the &quot;**System**&quot;\r\n 2. Choose &quot;**Edit the system environment variables**&quot;\r\n 3. Select the &quot;**Advanced**&quot; tab.\r\n 4. Click on &quot;**Environment Variables...**&quot; button. (bottom of the window)\r\n 5. in the System Variables group box, click on the &quot;**New...**&quot; button\r\n 6. assign the desired name like &quot;Java_Home&quot;\r\n 7. Click on &quot;Browse Directory&quot; and address your Java jdk directory. ex: `C:\\Program Files\\Java\\jdk-13.0.2`\r\n 8. go to the Tomcat &#39;`bin`&#39; folder and start it up.\r\n\r\nSupposed to work now.\r\n\r\n","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>Well before going so far, first make sure that you have the path to the Java directory in your Windows Environment Path</p>\n<ol>\n<li><strong>Start</strong> &gt; <strong>Control Panel</strong> &gt; lookup for the &quot;<strong>System</strong>&quot;</li>\n<li>Choose &quot;<strong>Edit the system environment variables</strong>&quot;</li>\n<li>Select the &quot;<strong>Advanced</strong>&quot; tab.</li>\n<li>Click on &quot;<strong>Environment Variables...</strong>&quot; button. (bottom of the window)</li>\n<li>in the System Variables group box, click on the &quot;<strong>New...</strong>&quot; button</li>\n<li>assign the desired name like &quot;Java_Home&quot;</li>\n<li>Click on &quot;Browse Directory&quot; and address your Java jdk directory. ex: <code>C:\\Program Files\\Java\\jdk-13.0.2</code></li>\n<li>go to the Tomcat '<code>bin</code>' folder and start it up.</li>\n</ol>\n<p>Supposed to work now.</p>\n"},{"tags":[],"owner":{"account_id":18117686,"reputation":198,"user_id":13174149,"display_name":"Charlo Poitras"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674753265,"creation_date":1674753265,"answer_id":75249545,"question_id":24647003,"body_markdown":"I solved this problem setting the correct `JVM` path inside the `tomcatXw.exe`\r\n\r\n1. Locate your Tomcat server installation\\\r\n(C:\\Program Files\\Apache Software Foundation\\Tomcat X\\bin)\r\n2. Click `tomcatXw.exe`\r\n3. Go to the `Java` tab\r\n4. Uncheck `use default` and be sure that your `Java Virtual Machine` is set to the correct path. \\\r\n(C:\\Program Files\\Java\\jre1.8.0_361\\bin\\server\\jvm.dll) in my case\r\n\r\nFor more informations check out [this][1]\r\n\r\n\r\n  [1]: https://www.ibm.com/support/pages/tomcat-service-doesnt-start-how-can-i-resolve-error-could-not-complete-operation-defpackagemng-failed-incorrect-function-error-cod","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>I solved this problem setting the correct <code>JVM</code> path inside the <code>tomcatXw.exe</code></p>\n<ol>\n<li>Locate your Tomcat server installation<br />\n(C:\\Program Files\\Apache Software Foundation\\Tomcat X\\bin)</li>\n<li>Click <code>tomcatXw.exe</code></li>\n<li>Go to the <code>Java</code> tab</li>\n<li>Uncheck <code>use default</code> and be sure that your <code>Java Virtual Machine</code> is set to the correct path. <br />\n(C:\\Program Files\\Java\\jre1.8.0_361\\bin\\server\\jvm.dll) in my case</li>\n</ol>\n<p>For more informations check out <a href=\"https://www.ibm.com/support/pages/tomcat-service-doesnt-start-how-can-i-resolve-error-could-not-complete-operation-defpackagemng-failed-incorrect-function-error-cod\" rel=\"nofollow noreferrer\">this</a></p>\n"}],"owner":{"account_id":4671438,"reputation":209,"user_id":3783134,"accept_rate":0,"display_name":"melo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144406,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":15,"score":18,"last_activity_date":1674753265,"creation_date":1404888422,"question_id":24647003,"body_markdown":"I am using Tomcat6 on Windows 8. I am able to start Tomcat via startup.bat without error. I&#39;ve copied Tomcat6.exe, Tomcat6w.exe and service.bat under tomcat/bin directory and set the .exe files to run as administrator. \r\n\r\nI open command line with administrator rights and execute &quot;service.bat install&quot; which ran without error. In Windows Services, I can see Apache Tomcat 6 which I want to run automatically. \r\n\r\nBut both running from Windows Services using &quot;Start&quot; button and on start up of Windows I got the same error.\r\n\r\n*&quot;Windows could not start the Apache Tomcat 6 on Local Computer. For more information, review the System Event Log. If this is a non-Microsoft service, contact the service vendor, and refer to service-specific error code 0.*\r\n\r\nWhen I check Windows Event Log, I see the following bizarre error.\r\n\r\n*&quot;Apache Tomcat 6 service terminated with the following service-specific error:\r\nThe operation completed successfully.&quot;*\r\n\r\nI tried copying msvcr71.dll under tomcat/bin directory, but nothing changed. What else can I do?\r\n\r\n**Update:**\r\n\r\nI am using a different port than 8080. And I saw the error below in the log file /logs/jakarta_service.log:\r\n\r\n&gt;%1 is not a valid Win32 application.","title":"Can&#39;t start Tomcat as Windows Service","body":"<p>I am using Tomcat6 on Windows 8. I am able to start Tomcat via startup.bat without error. I've copied Tomcat6.exe, Tomcat6w.exe and service.bat under tomcat/bin directory and set the .exe files to run as administrator. </p>\n\n<p>I open command line with administrator rights and execute \"service.bat install\" which ran without error. In Windows Services, I can see Apache Tomcat 6 which I want to run automatically. </p>\n\n<p>But both running from Windows Services using \"Start\" button and on start up of Windows I got the same error.</p>\n\n<p><em>\"Windows could not start the Apache Tomcat 6 on Local Computer. For more information, review the System Event Log. If this is a non-Microsoft service, contact the service vendor, and refer to service-specific error code 0.</em></p>\n\n<p>When I check Windows Event Log, I see the following bizarre error.</p>\n\n<p><em>\"Apache Tomcat 6 service terminated with the following service-specific error:\nThe operation completed successfully.\"</em></p>\n\n<p>I tried copying msvcr71.dll under tomcat/bin directory, but nothing changed. What else can I do?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I am using a different port than 8080. And I saw the error below in the log file /logs/jakarta_service.log:</p>\n\n<blockquote>\n  <p>%1 is not a valid Win32 application.</p>\n</blockquote>\n"},{"tags":["java","swing","actionlistener"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1674710469,"post_id":75237742,"comment_id":132773403,"body_markdown":"You wrote in your question: _how to make a queue work_ Are you referring to [java.util.Queue](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Queue.html)? Have you searched the Internet for **java swing battleship game** to see how others have done it? I think maybe you need to use a [_Swing_] [timer](https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)","body":"You wrote in your question: <i>how to make a queue work</i> Are you referring to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Queue.html\" rel=\"nofollow noreferrer\">java.util.Queue</a>? Have you searched the Internet for <b>java swing battleship game</b> to see how others have done it? I think maybe you need to use a [<i>Swing</i>] <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">timer</a>"},{"owner":{"account_id":27439774,"reputation":21,"user_id":20934879,"display_name":"Lewakosmos"},"score":0,"creation_date":1674749478,"post_id":75237742,"comment_id":132784420,"body_markdown":"Sorry, i think i asked my question incorrectly. I found a couple examples, but havent found same realisation. \nI&#39;ll try to use a swing timer. Thank you.","body":"Sorry, i think i asked my question incorrectly. I found a couple examples, but havent found same realisation.  I&#39;ll try to use a swing timer. Thank you."}],"answers":[{"tags":[],"owner":{"account_id":27439774,"reputation":21,"user_id":20934879,"display_name":"Lewakosmos"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674753030,"creation_date":1674753030,"answer_id":75249497,"question_id":75237742,"body_markdown":"Found solution.\r\nI placed method that starts when i click and dont get on opponents boat inside \r\nactionPerformed part. \r\n\r\n    public void buttonListCreator(){\r\n        OpponentDeckGUI odGUI = new OpponentDeckGUI();\r\n        for(JButton button : odGUI.getOpponentCommonButtonList()){\r\n            button.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    if(odGUI.getOpponentPinkButtonList().contains(button)){\r\n                        button.setBackground(Color.PINK);\r\n                    }\r\n                    else{\r\n                        button.setBackground(Color.CYAN);\r\n                            PlayerDeckAggregator pda = new PlayerDeckAggregator();\r\n                            pda.randomChooser();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nSo now, when i click on opponens deck and miss, i get \r\nprogram turn to check tile on players deck. \r\n","title":"How to make a queue with ActionListener","body":"<p>Found solution.\nI placed method that starts when i click and dont get on opponents boat inside\nactionPerformed part.</p>\n<pre><code>public void buttonListCreator(){\n    OpponentDeckGUI odGUI = new OpponentDeckGUI();\n    for(JButton button : odGUI.getOpponentCommonButtonList()){\n        button.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                if(odGUI.getOpponentPinkButtonList().contains(button)){\n                    button.setBackground(Color.PINK);\n                }\n                else{\n                    button.setBackground(Color.CYAN);\n                        PlayerDeckAggregator pda = new PlayerDeckAggregator();\n                        pda.randomChooser();\n                }\n            }\n        });\n    }\n}\n</code></pre>\n<p>So now, when i click on opponens deck and miss, i get\nprogram turn to check tile on players deck.</p>\n"}],"owner":{"account_id":27439774,"reputation":21,"user_id":20934879,"display_name":"Lewakosmos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1674753030,"creation_date":1674668028,"question_id":75237742,"body_markdown":"Have a problem making battleship game.\r\nI created 2 panels with game decks for player and opponent.\r\n[enter image description here](https://i.stack.imgur.com/wpXwz.png)\r\nWhen i click on opponents tile and miss i want programm to choose random tile on \r\nplayer deck and make a move.\r\n\r\nAll opponents deck buttons placed inside List of button.\r\nI use actionlistener for opponents deck\r\nProgram choose random tile on player deck\r\n\r\n1. Action listener for amount of button placed on deck\r\n```\r\npublic void buttonPress(){\r\n        OpponentDeckGUI odGUI = new OpponentDeckGUI();\r\n        PlayerDeckAggregator pda = new PlayerDeckAggregator();\r\n        ArrayList&lt;JButton&gt; localList = new ArrayList&lt;&gt;();\r\n        for(JButton button : odGUI.getOpponentCommonButtonList()){\r\n            button.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    if(odGUI.getOpponentPinkButtonList().contains(button)){\r\n                        button.setBackground(Color.PINK);\r\n                    }else{\r\n                        button.setBackground(Color.CYAN);\r\n                    }\r\n                    localList.add(button);\r\n                }\r\n            });\r\n            odGUI.getOpponentPinkButtonList().remove(button);\r\n        }\r\n    }\r\n```\r\n\r\n2. method that choose random tile on player deck and check if move was right\r\n```\r\n public void randomChooser(){\r\n        PlayerDeckCreationListener pdcl = new PlayerDeckCreationListener();\r\n        PlayerDeckGUI pdGUI = new PlayerDeckGUI();\r\n        int randomTile = (int) (Math.random()*pdGUI.getPlayerCommonButtonList().size());\r\n        JButton localButton = pdGUI.getPlayerCommonButtonList().get(randomTile);\r\n        if(pdcl.getPlayerDeckList().contains(localButton)){\r\n            localButton.setBackground(Color.RED);\r\n        }\r\n        else {\r\n            localButton.setBackground(Color.CYAN);\r\n        }\r\n        pdGUI.getPlayerCommonButtonList().remove(localButton);\r\n    }\r\n```\r\ngive me advise, how to make a queue work when i click button on opponents deck and get a response on player deck.","title":"How to make a queue with ActionListener","body":"<p>Have a problem making battleship game.\nI created 2 panels with game decks for player and opponent.\n<a href=\"https://i.stack.imgur.com/wpXwz.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nWhen i click on opponents tile and miss i want programm to choose random tile on\nplayer deck and make a move.</p>\n<p>All opponents deck buttons placed inside List of button.\nI use actionlistener for opponents deck\nProgram choose random tile on player deck</p>\n<ol>\n<li>Action listener for amount of button placed on deck</li>\n</ol>\n<pre><code>public void buttonPress(){\n        OpponentDeckGUI odGUI = new OpponentDeckGUI();\n        PlayerDeckAggregator pda = new PlayerDeckAggregator();\n        ArrayList&lt;JButton&gt; localList = new ArrayList&lt;&gt;();\n        for(JButton button : odGUI.getOpponentCommonButtonList()){\n            button.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    if(odGUI.getOpponentPinkButtonList().contains(button)){\n                        button.setBackground(Color.PINK);\n                    }else{\n                        button.setBackground(Color.CYAN);\n                    }\n                    localList.add(button);\n                }\n            });\n            odGUI.getOpponentPinkButtonList().remove(button);\n        }\n    }\n</code></pre>\n<ol start=\"2\">\n<li>method that choose random tile on player deck and check if move was right</li>\n</ol>\n<pre><code> public void randomChooser(){\n        PlayerDeckCreationListener pdcl = new PlayerDeckCreationListener();\n        PlayerDeckGUI pdGUI = new PlayerDeckGUI();\n        int randomTile = (int) (Math.random()*pdGUI.getPlayerCommonButtonList().size());\n        JButton localButton = pdGUI.getPlayerCommonButtonList().get(randomTile);\n        if(pdcl.getPlayerDeckList().contains(localButton)){\n            localButton.setBackground(Color.RED);\n        }\n        else {\n            localButton.setBackground(Color.CYAN);\n        }\n        pdGUI.getPlayerCommonButtonList().remove(localButton);\n    }\n</code></pre>\n<p>give me advise, how to make a queue work when i click button on opponents deck and get a response on player deck.</p>\n"},{"tags":["java"],"owner":{"account_id":1697325,"reputation":7484,"user_id":1558430,"accept_rate":76,"display_name":"Brian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674752993,"creation_date":1674752993,"question_id":75249487,"body_markdown":"I have an MSSQL (very much simplified) query that looks like this:\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION\r\n        IF OBJECT_ID(N\\&#39;tempdb..#temptable\\&#39;) IS NOT NULL DROP TABLE #temptable;\r\n\r\n        CREATE TABLE #temptable (\r\n            id INT,\r\n            id2 INT\r\n        );\r\n\r\n        INSERT INTO #temptable (\r\n            id\r\n            id2\r\n        )\r\n        VALUES\r\n        %1$s;  -- One or more (int, int) pairs\r\n\r\n        INSERT INTO anothertable (\r\n            --other stuff\r\n        ) VALUES (\r\n            -- values dervied from #temptable\r\n        );\r\n\r\n        INSERT INTO anothertable2 (\r\n            --other stuff\r\n        ) VALUES (\r\n            -- values dervied from #temptable\r\n        );\r\n\r\n        COMMIT TRANSACTION;\r\n        SELECT 1 AS Result;\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION\r\n        SELECT 0 AS Result, ERROR_MESSAGE() AS Error;\r\n    END CATCH\r\n\r\nIn the transaction, I need to be able to do a variable number of inserts, and also return the result of the transaction.\r\n\r\nThe `%1$s` in the query string preferably something that I can feed into a `NamedParameterJdbcTemplate`, which I call in the manner of:\r\n\r\n    // parameters is a Map&lt;String, Object&gt;\r\n    jdbcTemplate.queryForList(query, parameters)\r\n\r\n\r\n1. Due to the transactional and multi-statement nature of the query, I cannot use [`batchupdate`](https://stackoverflow.com/questions/42839595/namedparameterjdbctemplate-batchupdate-vs-insert-into-select) to generate the parameterized inserts.\r\n2. Due to the specific returns that I need from the query in the case of a failure, I cannot replace the `BEGIN TRANSACTION` with a java-side `@Transactional` either.\r\n3. Due to the variable nature of the number of inserts I need to make in `%1$s`, I cannot prepare the statement with [`?`s](https://stackoverflow.com/a/32096984/1558430).\r\n\r\n\r\nHow can I best generate the values for `%1$s` in the query?","title":"Insert dynamic values into DB with NamedParameterJdbcTemplate","body":"<p>I have an MSSQL (very much simplified) query that looks like this:</p>\n<pre><code>BEGIN TRY\n    BEGIN TRANSACTION\n    IF OBJECT_ID(N\\'tempdb..#temptable\\') IS NOT NULL DROP TABLE #temptable;\n\n    CREATE TABLE #temptable (\n        id INT,\n        id2 INT\n    );\n\n    INSERT INTO #temptable (\n        id\n        id2\n    )\n    VALUES\n    %1$s;  -- One or more (int, int) pairs\n\n    INSERT INTO anothertable (\n        --other stuff\n    ) VALUES (\n        -- values dervied from #temptable\n    );\n\n    INSERT INTO anothertable2 (\n        --other stuff\n    ) VALUES (\n        -- values dervied from #temptable\n    );\n\n    COMMIT TRANSACTION;\n    SELECT 1 AS Result;\nEND TRY\nBEGIN CATCH\n    ROLLBACK TRANSACTION\n    SELECT 0 AS Result, ERROR_MESSAGE() AS Error;\nEND CATCH\n</code></pre>\n<p>In the transaction, I need to be able to do a variable number of inserts, and also return the result of the transaction.</p>\n<p>The <code>%1$s</code> in the query string preferably something that I can feed into a <code>NamedParameterJdbcTemplate</code>, which I call in the manner of:</p>\n<pre><code>// parameters is a Map&lt;String, Object&gt;\njdbcTemplate.queryForList(query, parameters)\n</code></pre>\n<ol>\n<li>Due to the transactional and multi-statement nature of the query, I cannot use <a href=\"https://stackoverflow.com/questions/42839595/namedparameterjdbctemplate-batchupdate-vs-insert-into-select\"><code>batchupdate</code></a> to generate the parameterized inserts.</li>\n<li>Due to the specific returns that I need from the query in the case of a failure, I cannot replace the <code>BEGIN TRANSACTION</code> with a java-side <code>@Transactional</code> either.</li>\n<li>Due to the variable nature of the number of inserts I need to make in <code>%1$s</code>, I cannot prepare the statement with <a href=\"https://stackoverflow.com/a/32096984/1558430\"><code>?</code>s</a>.</li>\n</ol>\n<p>How can I best generate the values for <code>%1$s</code> in the query?</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":7134819,"reputation":5068,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1674668713,"post_id":75237651,"comment_id":132765530,"body_markdown":"At first, it seems that everything is fine. Please add `logging.level.org.springframework.security=TRACE` to your `application.properties` and paste the output in the question.","body":"At first, it seems that everything is fine. Please add <code>logging.level.org.springframework.security=TRACE</code> to your <code>application.properties</code> and paste the output in the question."},{"owner":{"account_id":7134819,"reputation":5068,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1674680273,"post_id":75237651,"comment_id":132768942,"body_markdown":"Did you add `@EnableWebSecurity`  and `@Configuration` to your `SecurityConfiguration` class?","body":"Did you add <code>@EnableWebSecurity</code>  and <code>@Configuration</code> to your <code>SecurityConfiguration</code> class?"},{"owner":{"account_id":1074107,"reputation":238,"user_id":1072625,"display_name":"Neeraj"},"score":0,"creation_date":1674697385,"post_id":75237651,"comment_id":132772123,"body_markdown":"If you have the @Configuration on the SecurityConfig it should work, it works perfectly on my machine.. If you have more set up details please share... With above we wont be able to replicate the issue...","body":"If you have the @Configuration on the SecurityConfig it should work, it works perfectly on my machine.. If you have more set up details please share... With above we wont be able to replicate the issue..."}],"answers":[{"tags":[],"owner":{"account_id":27572615,"reputation":1,"user_id":21043500,"display_name":"anar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674752256,"creation_date":1674752256,"answer_id":75249337,"question_id":75237651,"body_markdown":"I effectively forgot @Configuration annotation on my security configuration class. With it, it works as expected.\r\n\r\nThank you all.","title":"Spring boot + security 3.0 expose public services","body":"<p>I effectively forgot @Configuration annotation on my security configuration class. With it, it works as expected.</p>\n<p>Thank you all.</p>\n"}],"owner":{"account_id":27572615,"reputation":1,"user_id":21043500,"display_name":"anar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":552,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674752256,"creation_date":1674667386,"question_id":75237651,"body_markdown":"I&#39;m trying to figure out how we may secure applications with spring boot.\r\n\r\nI have a very basic HelloWorld Controller, with a services is supposed to be called only by authenticated users, and one that may be called by anyone :\r\n\r\n```\r\n@RestController \r\npublic class HelloWorldController {\r\n    \r\n    private static final Logger logger = LoggerFactory.getLogger(HelloWorldController.class);\r\n    \r\n    @GetMapping(&quot;/private&quot;)\r\n    public Map&lt;String, Object&gt; securedResource() {\r\n        logger.info(&quot;Called : HelloWorldController/private&quot;);\r\n        \r\n        Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\r\n        model.put(&quot;id&quot;, UUID.randomUUID().toString());\r\n        model.put(&quot;content&quot;, &quot;Hello collection&#39;s Private World&quot;);\r\n        return model;\r\n    }\r\n    \r\n    @GetMapping(&quot;/public&quot;)\r\n    public Map&lt;String, Object&gt; publicResource() {\r\n        logger.info(&quot;Called : HelloWorldController/public&quot;);\r\n        \r\n        Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\r\n        model.put(&quot;content&quot;, &quot;You well got public resource.&quot;);\r\n        return model;\r\n    }\r\n}\r\n```\r\n\r\n\r\nFor managing my authorizations, I tried to configure it :\r\n\r\n\r\n```\r\npublic class SecurityConfiguration {\r\n\r\n\t@Bean\r\n\tpublic SecurityFilterChain configure(HttpSecurity http)  throws Exception {\r\n\t\thttp\r\n\t\t\t// Beware : order of request matchers is important.\r\n\t\t\t.authorizeHttpRequests(requests -&gt; requests\r\n\t\t\t\t// Specify that requests on &quot;/public&quot; services&#39;s pattern may be called by anyone.\r\n\t\t\t\t.requestMatchers(HttpMethod.GET, &quot;/public&quot;).permitAll()\r\n\t\t\t\t// Specify that requests on &quot;/private&quot; services&#39;s pattern may be called by any authenticated user.\r\n\t\t\t\t.requestMatchers(HttpMethod.GET, &quot;/private&quot;).authenticated()\r\n\t\t\t\t// Specify that any other requests are not allowed by anyone.\r\n\t\t\t\t.anyRequest().denyAll())\r\n\t\t\t.httpBasic();\r\n\t\t\r\n\t\treturn http.build();\r\n\t}\r\n}\r\n```\r\n\r\nI though doing so will allow unauthenticated users to call the &quot;/public&quot; service. But when I call &quot;http://localhost:8080/public&quot; from postman, I get a 401 error, and it work only if I provide credentials in Basic Auth when I call the service.\r\n\r\nPerhaps have I done something wrong ? \r\n\r\nEdit : Below are some logs when calling the service\r\n```\r\n2023-01-25T19:25:11.888+01:00  INFO 2352 --- [nio-8080-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-01-25T19:25:11.888+01:00  INFO 2352 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-01-25T19:25:11.889+01:00  INFO 2352 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n2023-01-25T19:25:11.895+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@8adba4e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@37348e64, org.springframework.security.web.context.SecurityContextHolderFilter@44ab0b55, org.springframework.security.web.header.HeaderWriterFilter@26490443, org.springframework.security.web.csrf.CsrfFilter@6c3ee96d, org.springframework.security.web.authentication.logout.LogoutFilter@6b97305f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@36d829c6, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3894a5e1, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@56ebb12, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@44bf732c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@44ef0221, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@18a1c2ab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4390a01d, org.springframework.security.web.access.ExceptionTranslationFilter@2bb41cea, org.springframework.security.web.access.intercept.AuthorizationFilter@2aaea4a6]] (1/1)\r\n2023-01-25T19:25:11.896+01:00 DEBUG 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /public\r\n2023-01-25T19:25:11.897+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/15)\r\n2023-01-25T19:25:11.897+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/15)\r\n2023-01-25T19:25:11.899+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/15)\r\n2023-01-25T19:25:11.900+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/15)\r\n2023-01-25T19:25:11.901+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/15)\r\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match CsrfNotRequired [TRACE, HEAD, GET, OPTIONS]\r\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/15)\r\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern=&#39;/logout&#39;, POST]\r\n2023-01-25T19:25:11.903+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking UsernamePasswordAuthenticationFilter (7/15)\r\n2023-01-25T19:25:11.903+01:00 TRACE 2352 --- [nio-8080-exec-3] w.a.UsernamePasswordAuthenticationFilter : Did not match request to Ant [pattern=&#39;/login&#39;, POST]\r\n2023-01-25T19:25:11.905+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DefaultLoginPageGeneratingFilter (8/15)\r\n2023-01-25T19:25:11.905+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DefaultLogoutPageGeneratingFilter (9/15)\r\n2023-01-25T19:25:11.907+01:00 TRACE 2352 --- [nio-8080-exec-3] .w.a.u.DefaultLogoutPageGeneratingFilter : Did not render default logout page since request did not match [Ant [pattern=&#39;/logout&#39;, GET]]\r\n2023-01-25T19:25:11.909+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BasicAuthenticationFilter (10/15)\r\n2023-01-25T19:25:11.911+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.www.BasicAuthenticationFilter  : Did not process authentication request since failed to find username and password in Basic Authorization header\r\n2023-01-25T19:25:11.912+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (11/15)\r\n2023-01-25T19:25:11.913+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided\r\n2023-01-25T19:25:11.914+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (12/15)\r\n2023-01-25T19:25:11.915+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (13/15)\r\n2023-01-25T19:25:11.916+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (14/15)\r\n2023-01-25T19:25:11.916+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (15/15)\r\n2023-01-25T19:25:11.917+01:00 TRACE 2352 --- [nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@843dacb]\r\n2023-01-25T19:25:11.917+01:00 TRACE 2352 --- [nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@843dacb] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@5dd1b7b8\r\n2023-01-25T19:25:11.918+01:00 TRACE 2352 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists\r\n2023-01-25T19:25:11.918+01:00 TRACE 2352 --- [nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n2023-01-25T19:25:11.919+01:00 TRACE 2352 --- [nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n2023-01-25T19:25:11.921+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\r\n2023-01-25T19:25:11.921+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\r\n\r\norg.springframework.security.access.AccessDeniedException: Access Denied\r\n        at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:170) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:188) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:174) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:116) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\r\n```\r\n","title":"Spring boot + security 3.0 expose public services","body":"<p>I'm trying to figure out how we may secure applications with spring boot.</p>\n<p>I have a very basic HelloWorld Controller, with a services is supposed to be called only by authenticated users, and one that may be called by anyone :</p>\n<pre><code>@RestController \npublic class HelloWorldController {\n    \n    private static final Logger logger = LoggerFactory.getLogger(HelloWorldController.class);\n    \n    @GetMapping(&quot;/private&quot;)\n    public Map&lt;String, Object&gt; securedResource() {\n        logger.info(&quot;Called : HelloWorldController/private&quot;);\n        \n        Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\n        model.put(&quot;id&quot;, UUID.randomUUID().toString());\n        model.put(&quot;content&quot;, &quot;Hello collection's Private World&quot;);\n        return model;\n    }\n    \n    @GetMapping(&quot;/public&quot;)\n    public Map&lt;String, Object&gt; publicResource() {\n        logger.info(&quot;Called : HelloWorldController/public&quot;);\n        \n        Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\n        model.put(&quot;content&quot;, &quot;You well got public resource.&quot;);\n        return model;\n    }\n}\n</code></pre>\n<p>For managing my authorizations, I tried to configure it :</p>\n<pre><code>public class SecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain configure(HttpSecurity http)  throws Exception {\n        http\n            // Beware : order of request matchers is important.\n            .authorizeHttpRequests(requests -&gt; requests\n                // Specify that requests on &quot;/public&quot; services's pattern may be called by anyone.\n                .requestMatchers(HttpMethod.GET, &quot;/public&quot;).permitAll()\n                // Specify that requests on &quot;/private&quot; services's pattern may be called by any authenticated user.\n                .requestMatchers(HttpMethod.GET, &quot;/private&quot;).authenticated()\n                // Specify that any other requests are not allowed by anyone.\n                .anyRequest().denyAll())\n            .httpBasic();\n        \n        return http.build();\n    }\n}\n</code></pre>\n<p>I though doing so will allow unauthenticated users to call the &quot;/public&quot; service. But when I call &quot;http://localhost:8080/public&quot; from postman, I get a 401 error, and it work only if I provide credentials in Basic Auth when I call the service.</p>\n<p>Perhaps have I done something wrong ?</p>\n<p>Edit : Below are some logs when calling the service</p>\n<pre><code>2023-01-25T19:25:11.888+01:00  INFO 2352 --- [nio-8080-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-01-25T19:25:11.888+01:00  INFO 2352 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-01-25T19:25:11.889+01:00  INFO 2352 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2023-01-25T19:25:11.895+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@8adba4e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@37348e64, org.springframework.security.web.context.SecurityContextHolderFilter@44ab0b55, org.springframework.security.web.header.HeaderWriterFilter@26490443, org.springframework.security.web.csrf.CsrfFilter@6c3ee96d, org.springframework.security.web.authentication.logout.LogoutFilter@6b97305f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@36d829c6, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3894a5e1, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@56ebb12, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@44bf732c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@44ef0221, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@18a1c2ab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4390a01d, org.springframework.security.web.access.ExceptionTranslationFilter@2bb41cea, org.springframework.security.web.access.intercept.AuthorizationFilter@2aaea4a6]] (1/1)\n2023-01-25T19:25:11.896+01:00 DEBUG 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /public\n2023-01-25T19:25:11.897+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/15)\n2023-01-25T19:25:11.897+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/15)\n2023-01-25T19:25:11.899+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/15)\n2023-01-25T19:25:11.900+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/15)\n2023-01-25T19:25:11.901+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/15)\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match CsrfNotRequired [TRACE, HEAD, GET, OPTIONS]\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/15)\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern='/logout', POST]\n2023-01-25T19:25:11.903+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking UsernamePasswordAuthenticationFilter (7/15)\n2023-01-25T19:25:11.903+01:00 TRACE 2352 --- [nio-8080-exec-3] w.a.UsernamePasswordAuthenticationFilter : Did not match request to Ant [pattern='/login', POST]\n2023-01-25T19:25:11.905+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DefaultLoginPageGeneratingFilter (8/15)\n2023-01-25T19:25:11.905+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DefaultLogoutPageGeneratingFilter (9/15)\n2023-01-25T19:25:11.907+01:00 TRACE 2352 --- [nio-8080-exec-3] .w.a.u.DefaultLogoutPageGeneratingFilter : Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]\n2023-01-25T19:25:11.909+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BasicAuthenticationFilter (10/15)\n2023-01-25T19:25:11.911+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.www.BasicAuthenticationFilter  : Did not process authentication request since failed to find username and password in Basic Authorization header\n2023-01-25T19:25:11.912+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (11/15)\n2023-01-25T19:25:11.913+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided\n2023-01-25T19:25:11.914+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (12/15)\n2023-01-25T19:25:11.915+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (13/15)\n2023-01-25T19:25:11.916+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (14/15)\n2023-01-25T19:25:11.916+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (15/15)\n2023-01-25T19:25:11.917+01:00 TRACE 2352 --- [nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@843dacb]\n2023-01-25T19:25:11.917+01:00 TRACE 2352 --- [nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@843dacb] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@5dd1b7b8\n2023-01-25T19:25:11.918+01:00 TRACE 2352 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists\n2023-01-25T19:25:11.918+01:00 TRACE 2352 --- [nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-01-25T19:25:11.919+01:00 TRACE 2352 --- [nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-01-25T19:25:11.921+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\n2023-01-25T19:25:11.921+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\n\norg.springframework.security.access.AccessDeniedException: Access Denied\n        at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:170) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:188) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:174) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:116) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1519267975,"post_id":48918884,"comment_id":84844078,"body_markdown":"I see a question mark but no question.","body":"I see a question mark but no question."},{"owner":{"account_id":4225251,"reputation":2272,"user_id":3458919,"accept_rate":55,"display_name":"Balwinder Singh"},"score":0,"creation_date":1519268018,"post_id":48918884,"comment_id":84844096,"body_markdown":"Whats the question exactly?","body":"Whats the question exactly?"},{"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"score":0,"creation_date":1519268083,"post_id":48918884,"comment_id":84844114,"body_markdown":"you mean in the regex ?","body":"you mean in the regex ?"},{"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"score":0,"creation_date":1519268187,"post_id":48918884,"comment_id":84844131,"body_markdown":"@BalwinderSingh i will edit the question to make it more clearer, the question is how can i generate a string from regex correctly.","body":"@BalwinderSingh i will edit the question to make it more clearer, the question is how can i generate a string from regex correctly."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1519268421,"post_id":48918884,"comment_id":84844206,"body_markdown":"@shmosel *I see a question mark* I see three","body":"@shmosel <i>I see a question mark</i> I see three"},{"owner":{"account_id":6512643,"reputation":3777,"user_id":5039394,"display_name":"Keerthana Prabhakaran"},"score":0,"creation_date":1519268595,"post_id":48918884,"comment_id":84844251,"body_markdown":"Possible duplicate of [Using Regex to generate Strings rather than match them](https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them\">Using Regex to generate Strings rather than match them</a>"},{"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"score":0,"creation_date":1519269607,"post_id":48918884,"comment_id":84844474,"body_markdown":"@KeerthanaPrabhakaran it isn&#39;t really a duplicate, the suggession from that question doesn&#39;t work for me, They did advise using Xeger/Generex","body":"@KeerthanaPrabhakaran it isn&#39;t really a duplicate, the suggession from that question doesn&#39;t work for me, They did advise using Xeger/Generex"},{"owner":{"account_id":120028,"reputation":35744,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"score":0,"creation_date":1519271139,"post_id":48918884,"comment_id":84844859,"body_markdown":"Might be a good fit for CodeGolf like here: https://codegolf.stackexchange.com/q/156315/373 - maybe not welcomed, if you don&#39;t have a solution, just ask on meta. I would try the usual way: Didivide and impera. Solve subexpressions, than bigger expressions. Maybe a combination of analisis and brute forcing?","body":"Might be a good fit for CodeGolf like here: <a href=\"https://codegolf.stackexchange.com/q/156315/373\">codegolf.stackexchange.com/q/156315/373</a> - maybe not welcomed, if you don&#39;t have a solution, just ask on meta. I would try the usual way: Didivide and impera. Solve subexpressions, than bigger expressions. Maybe a combination of analisis and brute forcing?"},{"owner":{"account_id":4225251,"reputation":2272,"user_id":3458919,"accept_rate":55,"display_name":"Balwinder Singh"},"score":0,"creation_date":1519276645,"post_id":48918884,"comment_id":84846534,"body_markdown":"Have you looked at https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them? Why Generex/Xeger isn&#39;t working for you?","body":"Have you looked at <a href=\"https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them\" title=\"using regex to generate strings rather than match them\">stackoverflow.com/questions/22115/&hellip;</a>? Why Generex/Xeger isn&#39;t working for you?"},{"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"score":0,"creation_date":1519281044,"post_id":48918884,"comment_id":84848185,"body_markdown":"yes, Generex works with more simpler format of regex rather than the complicated onces, the two examples above is kinda complicated, but those regex isn&#39;t decided by me, so there is no way i can modify it","body":"yes, Generex works with more simpler format of regex rather than the complicated onces, the two examples above is kinda complicated, but those regex isn&#39;t decided by me, so there is no way i can modify it"},{"owner":{"account_id":3731798,"reputation":5057,"user_id":3103891,"display_name":"GalAbra"},"score":0,"creation_date":1519289695,"post_id":48918884,"comment_id":84852573,"body_markdown":"Xeger works for me with the regular expressions you&#39;ve provided","body":"Xeger works for me with the regular expressions you&#39;ve provided"},{"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"score":0,"creation_date":1519353359,"post_id":48918884,"comment_id":84887607,"body_markdown":"@G i tried using it, but it&#39;s generation some characters that isn&#39;t recognize and after validating with my PatternMatcher component return false","body":"@G i tried using it, but it&#39;s generation some characters that isn&#39;t recognize and after validating with my PatternMatcher component return false"}],"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1363,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1674752019,"creation_date":1519267906,"question_id":48918884,"body_markdown":"am currently trying to generate a string that matches a given regex, I&#39;ve been working on this for few days without good solution. I tried using the Generex library which works find until i put in some more complicated regex like this \r\n\r\n`&quot;^((\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*)\\s*[;]{0,1}\\s*)+$&quot;` \r\n\r\nor \r\n\r\n`&quot;(?:(NGN|USA|TWN|IND|VN)\\h*,?\\h*(?!.*\\1))+&quot;`, \r\n\r\nthis have proven to be the biggest issue I&#39;ve encountered in Software Engineering Field.\r\n\r\nThe question is how can i generate random matching String from Regex correctly.\r\n\r\nNOTE: https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them doesn&#39;t work for me, Generex works with more simpler format of regex rather than the complicated onces, the two examples above is kinda complicated, but those regex isn&#39;t decided by me, so there is no way i can modify it.","title":"How to generate a random String from a Regex?","body":"<p>am currently trying to generate a string that matches a given regex, I've been working on this for few days without good solution. I tried using the Generex library which works find until i put in some more complicated regex like this </p>\n\n<p><code>\"^((\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*)\\s*[;]{0,1}\\s*)+$\"</code> </p>\n\n<p>or </p>\n\n<p><code>\"(?:(NGN|USA|TWN|IND|VN)\\h*,?\\h*(?!.*\\1))+\"</code>, </p>\n\n<p>this have proven to be the biggest issue I've encountered in Software Engineering Field.</p>\n\n<p>The question is how can i generate random matching String from Regex correctly.</p>\n\n<p>NOTE: <a href=\"https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them\">Using Regex to generate Strings rather than match them</a> doesn't work for me, Generex works with more simpler format of regex rather than the complicated onces, the two examples above is kinda complicated, but those regex isn't decided by me, so there is no way i can modify it.</p>\n"},{"tags":["java","rest","jax-rs","hibernate-validator"],"answers":[{"comments":[{"owner":{"account_id":2174240,"reputation":1419,"user_id":1925356,"accept_rate":33,"display_name":"Alex Mi"},"score":0,"creation_date":1674808258,"post_id":75249287,"comment_id":132796045,"body_markdown":"Unfortunately, this did not solve my problem. Any other ideas?","body":"Unfortunately, this did not solve my problem. Any other ideas?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1674810259,"post_id":75249287,"comment_id":132796573,"body_markdown":"Are you sure that `MethodConstraintViolationException` is still thrown? I did a search in a JBoss project, and couldn&#39;t find it. I did find `ResteasyViolationException` which extends from `ConstraintViolationException`. The latter is what we catch at work.","body":"Are you sure that <code>MethodConstraintViolationException</code> is still thrown? I did a search in a JBoss project, and couldn&#39;t find it. I did find <code>ResteasyViolationException</code> which extends from <code>ConstraintViolationException</code>. The latter is what we catch at work."}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674751997,"creation_date":1674751997,"answer_id":75249287,"question_id":75246849,"body_markdown":"Your `javax.ws.rs-api` dependency is not marked as provided. That means that it gets bundled into your application. The `@Provider` annotation on your class is the bundled one, but it&#39;s not the one JBoss is looking for - that&#39;s the one provided by JBoss.\r\n\r\nAny APIs from Java/Jakarta EE should be marked as provided when you&#39;re working with JBoss, WildFly, GlassFish, or other JEE containers. In your case that&#39;s not just `javax.ws.rs-api` but also `jaxb-api`. I think that the same holds for `resteasy-hibernatevalidator-provider`. I expected the same for `rt` but apparently you&#39;re getting errors without it.","title":"jax-rs @.Provider is not being called","body":"<p>Your <code>javax.ws.rs-api</code> dependency is not marked as provided. That means that it gets bundled into your application. The <code>@Provider</code> annotation on your class is the bundled one, but it's not the one JBoss is looking for - that's the one provided by JBoss.</p>\n<p>Any APIs from Java/Jakarta EE should be marked as provided when you're working with JBoss, WildFly, GlassFish, or other JEE containers. In your case that's not just <code>javax.ws.rs-api</code> but also <code>jaxb-api</code>. I think that the same holds for <code>resteasy-hibernatevalidator-provider</code>. I expected the same for <code>rt</code> but apparently you're getting errors without it.</p>\n"}],"owner":{"account_id":2174240,"reputation":1419,"user_id":1925356,"accept_rate":33,"display_name":"Alex Mi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":338,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674751997,"creation_date":1674740079,"question_id":75246849,"body_markdown":"I have a RESTfull JAX-RS , which uses a custom @Provider for exception handling, which looks as follows:\r\n\r\n    @Provider\r\n    public class ValidationExceptionHandler implements ExceptionMapper&lt;MethodConstraintViolationException&gt; {\r\n    \t@Override\r\n    \tpublic Response toResponse(MethodConstraintViolationException exception) {\r\n                // some code here\r\n    \t\t\treturn Response.status(Status.OK).entity(claimWithPaymentResponse).build();\r\n    \t}\r\n    }\r\n\r\nThis provider used to work OK, when my application run under JBoss 6 EAP and Java 7. However, since upgrading to JBoss 7 EAP with JDK 11 and updating the required dependencies in my pom.xml, this Provider is not called at all.\r\n\r\nThis is an excerpt from my pom.xml with the relvant frameworks:\r\n\r\n    \t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.0.0.GA&lt;/version&gt;\r\n\t\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.6.Final&lt;/version&gt;\r\n\t\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;!-- https://mvnrepository.com/artifact/javax.ws.rs/javax.ws.rs-api --&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.1.1&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;resteasy-hibernatevalidator-provider&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.6.Final&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt; &lt;!-- vpc9528, 2022-07-14, P1681-311 fixed &quot;Provider com.sun.xml.internal.ws.spi.ProviderImpl not found&quot;, @see https://stackoverflow.com/questions/54032558/jdk-11-jax-ws-provider-com-sun-xml-internal-ws-spi-providerimpl-not-found --&gt;\r\n\t\t\t\t&lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;rt&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.3&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.jws&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;javax.jws-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\r\n","title":"jax-rs @.Provider is not being called","body":"<p>I have a RESTfull JAX-RS , which uses a custom @Provider for exception handling, which looks as follows:</p>\n<pre><code>@Provider\npublic class ValidationExceptionHandler implements ExceptionMapper&lt;MethodConstraintViolationException&gt; {\n    @Override\n    public Response toResponse(MethodConstraintViolationException exception) {\n            // some code here\n            return Response.status(Status.OK).entity(claimWithPaymentResponse).build();\n    }\n}\n</code></pre>\n<p>This provider used to work OK, when my application run under JBoss 6 EAP and Java 7. However, since upgrading to JBoss 7 EAP with JDK 11 and updating the required dependencies in my pom.xml, this Provider is not called at all.</p>\n<p>This is an excerpt from my pom.xml with the relvant frameworks:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.GA&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;\n            &lt;version&gt;2.3.6.Final&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.ws.rs/javax.ws.rs-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-hibernatevalidator-provider&lt;/artifactId&gt;\n            &lt;version&gt;2.3.6.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt; &lt;!-- vpc9528, 2022-07-14, P1681-311 fixed &quot;Provider com.sun.xml.internal.ws.spi.ProviderImpl not found&quot;, @see https://stackoverflow.com/questions/54032558/jdk-11-jax-ws-provider-com-sun-xml-internal-ws-spi-providerimpl-not-found --&gt;\n            &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;rt&lt;/artifactId&gt;\n            &lt;version&gt;2.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.jws&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.jws-api&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n</code></pre>\n"},{"tags":["java","git","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":18419016,"reputation":21,"user_id":13417162,"display_name":"Naga"},"score":0,"creation_date":1588009920,"post_id":61461320,"comment_id":108729547,"body_markdown":"getting same error after trying with your suggestion  (java.lang.IllegalStateException: No directory at file:\\\\\\C:lenovo G50\\git-localconfig-repo\\limits-service.properties)  plz help me how to fix this","body":"getting same error after trying with your suggestion  (java.lang.IllegalStateException: No directory at file:\\\\\\C:lenovo G50\\git-localconfig-repo\\limits-service.properties)  plz help me how to fix this"},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1588047625,"post_id":61461320,"comment_id":108742129,"body_markdown":"@Naga Please read more carefully, both the error messages and the answers you get: do not use backslashes, use forward slashes instead.","body":"@Naga Please read more carefully, both the error messages and the answers you get: do not use backslashes, use forward slashes instead."},{"owner":{"account_id":18419016,"reputation":21,"user_id":13417162,"display_name":"Naga"},"score":0,"creation_date":1588185568,"post_id":61461320,"comment_id":108806303,"body_markdown":"please help me for below question @Robert","body":"please help me for below question @Robert"}],"tags":[],"owner":{"account_id":1916554,"reputation":714,"user_id":1729034,"display_name":"ithinkisam"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587998192,"creation_date":1587998192,"answer_id":61461320,"question_id":61458033,"body_markdown":"The last entry in your stack trace shows an invalid resource location.\r\n\r\n`java.lang.IllegalStateException: No directory at file:///C:lenovo G50git-localconfig-repo/limits-service.properties`\r\n\r\nSince this is running within a JVM, you don&#39;t need to use backslashes in the path. In this instance, the backslashes are being used to escape the character immediately following the slash. Change the backslashes to forward slashes and that should get you past this error. This isn&#39;t directly related to getting a config server up and running, so no guarantees that this will fix all your problems.\r\n\r\nAlso, best to format your stack trace as code to make it more readable for other users.","title":"connecting spring cloud config server to local git repo failed","body":"<p>The last entry in your stack trace shows an invalid resource location.</p>\n\n<p><code>java.lang.IllegalStateException: No directory at file:///C:lenovo G50git-localconfig-repo/limits-service.properties</code></p>\n\n<p>Since this is running within a JVM, you don't need to use backslashes in the path. In this instance, the backslashes are being used to escape the character immediately following the slash. Change the backslashes to forward slashes and that should get you past this error. This isn't directly related to getting a config server up and running, so no guarantees that this will fix all your problems.</p>\n\n<p>Also, best to format your stack trace as code to make it more readable for other users.</p>\n"},{"tags":[],"owner":{"account_id":18998523,"reputation":11,"user_id":13866367,"display_name":"Lakshay Sehgal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593907420,"creation_date":1593890775,"answer_id":62733520,"question_id":61458033,"body_markdown":"Remove all the backslashes from location path also and replace this with forward slash. Always remember to use `file://` before location path.\r\n\r\nE.g.: `file://C:/Users/google/Desktop/SpringLearning/Mocroservice_new_June/git-localconfig-repo`\r\n\r\nTry like this","title":"connecting spring cloud config server to local git repo failed","body":"<p>Remove all the backslashes from location path also and replace this with forward slash. Always remember to use <code>file://</code> before location path.</p>\n<p>E.g.: <code>file://C:/Users/google/Desktop/SpringLearning/Mocroservice_new_June/git-localconfig-repo</code></p>\n<p>Try like this</p>\n"},{"tags":[],"owner":{"account_id":18896655,"reputation":1,"user_id":13785666,"display_name":"Pavan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595790557,"creation_date":1595788929,"answer_id":63104226,"question_id":61458033,"body_markdown":"You should remove `file://` and try like this:\r\n\r\n    C:/lenovo G50/git-localconfig-repo/","title":"connecting spring cloud config server to local git repo failed","body":"<p>You should remove <code>file://</code> and try like this:</p>\n<pre><code>C:/lenovo G50/git-localconfig-repo/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8742947,"reputation":1,"user_id":6539406,"display_name":"Pankaj Vyas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629104317,"creation_date":1611381659,"answer_id":65856213,"question_id":61458033,"body_markdown":"There should not be any space in the file names.\r\n\r\nRemove the space, change the folder name from &quot;lenovo G50&quot; to &quot;lenovo_G50&quot; and is not required to point to the properties files that it picked up from URL which is been used.\r\n\r\nUse below uri after removing the space:\r\n```text\r\nspring.cloud.config.server.git.uri=C:/lenovo_G50/git-localconfig-repo\r\n```","title":"connecting spring cloud config server to local git repo failed","body":"<p>There should not be any space in the file names.</p>\n<p>Remove the space, change the folder name from &quot;lenovo G50&quot; to &quot;lenovo_G50&quot; and is not required to point to the properties files that it picked up from URL which is been used.</p>\n<p>Use below uri after removing the space:</p>\n<pre><code>spring.cloud.config.server.git.uri=C:/lenovo_G50/git-localconfig-repo\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":2,"creation_date":1618900998,"post_id":67173657,"comment_id":118735517,"body_markdown":"I think one of your pictures is broken. And please show textual information as text, not as (link to) picture of text.","body":"I think one of your pictures is broken. And please show textual information as text, not as (link to) picture of text."},{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":2,"creation_date":1618901121,"post_id":67173657,"comment_id":118735560,"body_markdown":"Apart from the pictures of questionable helpfulness, what is the additional insight your post provides on top of the existing answers?","body":"Apart from the pictures of questionable helpfulness, what is the additional insight your post provides on top of the existing answers?"},{"owner":{"account_id":9121648,"reputation":3234,"user_id":6786876,"display_name":"Alexander Leithner"},"score":0,"creation_date":1618922023,"post_id":67173657,"comment_id":118744796,"body_markdown":"Welcome to Stack Overflow! Please make sure to read [answer] and swap the images you have posted for actual text. *Never, **ever*** post images of code or error messages. Also, as stated above, when your answer is already present, please refrain from posting it yet another time and up-vote helpful, correct answers instead. Thanks.","body":"Welcome to Stack Overflow! Please make sure to read <a href=\"https://stackoverflow.com/questions/how-to-answer\">How to Answer</a> and swap the images you have posted for actual text. <i>Never, <b>ever</i></b> post images of code or error messages. Also, as stated above, when your answer is already present, please refrain from posting it yet another time and up-vote helpful, correct answers instead. Thanks."}],"tags":[],"owner":{"account_id":21330074,"reputation":21,"user_id":15701979,"display_name":"chandra c"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619183351,"creation_date":1618900395,"answer_id":67173657,"question_id":61458033,"body_markdown":"Replace application.properties:\r\n\r\n    spring.cloud.config.server.git.uri=file:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\r\n\r\nwith \r\n\r\n    spring.cloud.config.server.git.uri=file://C:/lenovo G50/git-localconfig-repo\r\n\r\n![Check out this configuration for your reference][1]\r\n\r\n\r\n![check this output for your reference][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/R02Yi.png\r\n  [2]: https://i.stack.imgur.com/IU63p.png","title":"connecting spring cloud config server to local git repo failed","body":"<p>Replace application.properties:</p>\n<pre><code>spring.cloud.config.server.git.uri=file:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\n</code></pre>\n<p>with</p>\n<pre><code>spring.cloud.config.server.git.uri=file://C:/lenovo G50/git-localconfig-repo\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/R02Yi.png\" alt=\"Check out this configuration for your reference\" /></p>\n<p><img src=\"https://i.stack.imgur.com/IU63p.png\" alt=\"check this output for your reference\" /></p>\n"},{"tags":[],"owner":{"account_id":4909492,"reputation":71,"user_id":3955182,"display_name":"Janardhan Maithil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629098853,"creation_date":1629048480,"answer_id":68793859,"question_id":61458033,"body_markdown":"I hope you would have gotten the answer by now.\r\nFaced same problem myself. Figured the exception say \r\n\r\n&gt; No directory at file\r\n\r\nthat means you are not providing the directory instead providing the path to file:\r\n```text\r\nfile:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\r\n```\r\n\r\nJust Remove the file from the path:\r\n```text\r\nfile:///C:\\lenovo G50\\git-localconfig-repo/\r\n```\r\n\r\nCheers!","title":"connecting spring cloud config server to local git repo failed","body":"<p>I hope you would have gotten the answer by now.\nFaced same problem myself. Figured the exception say</p>\n<blockquote>\n<p>No directory at file</p>\n</blockquote>\n<p>that means you are not providing the directory instead providing the path to file:</p>\n<pre><code>file:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\n</code></pre>\n<p>Just Remove the file from the path:</p>\n<pre><code>file:///C:\\lenovo G50\\git-localconfig-repo/\n</code></pre>\n<p>Cheers!</p>\n"},{"tags":[],"owner":{"account_id":7085635,"reputation":1,"user_id":5422527,"display_name":"user5422527"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649478453,"creation_date":1649478453,"answer_id":71805245,"question_id":61458033,"body_markdown":"windows it says to put \\ but I replaced it with / it works for me. \r\nlike \r\n\r\nspring.cloud.config.server.git.uri=file:///D:\\Programming\\git-localconfig-repo\r\n\r\nI got the same error I revert it and it works :) \r\n\r\nserver.port=8888\r\n\r\nspring.cloud.config.server.git.uri=file:///D:/Programming/git-localconfig-repo","title":"connecting spring cloud config server to local git repo failed","body":"<p>windows it says to put \\ but I replaced it with / it works for me.\nlike</p>\n<p>spring.cloud.config.server.git.uri=file:///D:\\Programming\\git-localconfig-repo</p>\n<p>I got the same error I revert it and it works :)</p>\n<p>server.port=8888</p>\n<p>spring.cloud.config.server.git.uri=file:///D:/Programming/git-localconfig-repo</p>\n"},{"tags":[],"owner":{"account_id":17059330,"reputation":81,"user_id":12343139,"display_name":"Edward795"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674302682,"creation_date":1674302682,"answer_id":75193177,"question_id":61458033,"body_markdown":"&lt;h3&gt;This has nothing to do with java or spring framework,it completely depends on your os (development environment) -&gt; Windows/Mac/Linux&lt;/h3&gt;\r\n\r\n&lt;p&gt;For windows i used the path syntax as below &amp; everything worked out perfectly:&lt;/p&gt;\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n  \r\n    spring.application.name=spring-cloud-config-server\r\n    server.port=8888\r\n    spring.cloud.config.server.git.uri=E:\\\\__WORKSPACE__\\\\MICROSERVICES\\\\git-local-config\r\n   \r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"connecting spring cloud config server to local git repo failed","body":"<h3>This has nothing to do with java or spring framework,it completely depends on your os (development environment) -> Windows/Mac/Linux</h3>\n<p>For windows i used the path syntax as below & everything worked out perfectly:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>  \nspring.application.name=spring-cloud-config-server\nserver.port=8888\nspring.cloud.config.server.git.uri=E:\\\\__WORKSPACE__\\\\MICROSERVICES\\\\git-local-config\n   </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":27598970,"reputation":1,"user_id":21064600,"display_name":"Aishwarya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674558690,"creation_date":1674466638,"answer_id":75207684,"question_id":61458033,"body_markdown":"If you are on windows make sure you are using the correct formats. These formats always work for me.\r\n```\r\nspring.cloud.config.server.git.uri=file:\\\\\\C:/lenovo G50/git-localconfig-repo\r\n\r\nspring.cloud.config.server.git.uri=file:///C:/lenovo G50/git-localconfig-repo\r\n```\r\nHope this helps.","title":"connecting spring cloud config server to local git repo failed","body":"<p>If you are on windows make sure you are using the correct formats. These formats always work for me.</p>\n<pre><code>spring.cloud.config.server.git.uri=file:\\\\\\C:/lenovo G50/git-localconfig-repo\n\nspring.cloud.config.server.git.uri=file:///C:/lenovo G50/git-localconfig-repo\n</code></pre>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":18419016,"reputation":21,"user_id":13417162,"display_name":"Naga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2205,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":9,"score":0,"last_activity_date":1674751650,"creation_date":1587987513,"question_id":61458033,"body_markdown":"When I hit http://localhost:8888/limits-service/default I&#39;m getting:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    This application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n    \r\n    Mon Apr 27 16:40:38 IST 2020\r\n    There was an unexpected error (type=Internal Server Error, status=500).\r\n    Cannot load environment\r\n    java.lang.IllegalStateException: Cannot load environment\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:299)\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.getLocations(JGitEnvironmentRepository.java:246)\r\n    \tat org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.getLocations(MultipleJGitEnvironmentRepository.java:146)\r\n    \tat org.springframework.cloud.config.server.environment.AbstractScmEnvironmentRepository.findOne(AbstractScmEnvironmentRepository.java:57)\r\n    \tat org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOne(MultipleJGitEnvironmentRepository.java:187)\r\n    \tat org.springframework.cloud.config.server.environment.CompositeEnvironmentRepository.findOne(CompositeEnvironmentRepository.java:58)\r\n    \tat org.springframework.cloud.config.server.environment.EnvironmentEncryptorEnvironmentRepository.findOne(EnvironmentEncryptorEnvironmentRepository.java:61)\r\n    \tat org.springframework.cloud.config.server.environment.EnvironmentController.getEnvironment(EnvironmentController.java:136)\r\n    \tat org.springframework.cloud.config.server.environment.EnvironmentController.defaultLabel(EnvironmentController.java:108)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\r\n    \tat org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:499)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\r\n    \tat org.springframework.cloud.config.server.environment.EnvironmentController$$EnhancerBySpringCGLIB$$61a7f28e.defaultLabel(&lt;generated&gt;)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:109)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373)\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1594)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    Caused by: java.lang.IllegalStateException: No directory at file:///C:lenovo G50git-localconfig-repo/limits-service.properties\r\n    \tat org.springframework.util.Assert.state(Assert.java:73)\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.copyFromLocalRepository(JGitEnvironmentRepository.java:576)\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.copyRepository(JGitEnvironmentRepository.java:561)\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.createGitClient(JGitEnvironmentRepository.java:547)\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:268)\r\n    \t... 72 more\r\n\r\n\r\nThis is my application.properties file:\r\n\r\n    spring.application.name=spring-cloud-config-server\r\n    server.port=8888\r\n    spring.cloud.config.server.git.uri=file:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\r\n\r\nThis is the my local git repo file:\r\n\r\n    limits-service.minimum=8\r\n    limits-service.maximum=888\r\n\r\n\r\nThis is my main class:\r\n\r\n    package com.in28minutes.microservices.springcloudconfigserver;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.cloud.config.server.EnableConfigServer;\r\n    \r\n    @EnableConfigServer\r\n    @SpringBootApplication\r\n    public class SpringCloudConfigServerApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(SpringCloudConfigServerApplication.class, args);\r\n    \t}\r\n    }\r\n\r\nPlease help me to fix this.\r\n","title":"connecting spring cloud config server to local git repo failed","body":"<p>When I hit <a href=\"http://localhost:8888/limits-service/default\" rel=\"nofollow noreferrer\">http://localhost:8888/limits-service/default</a> I'm getting:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>This application has no explicit mapping for /error, so you are seeing this as a fallback.\n\nMon Apr 27 16:40:38 IST 2020\nThere was an unexpected error (type=Internal Server Error, status=500).\nCannot load environment\njava.lang.IllegalStateException: Cannot load environment\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:299)\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.getLocations(JGitEnvironmentRepository.java:246)\n    at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.getLocations(MultipleJGitEnvironmentRepository.java:146)\n    at org.springframework.cloud.config.server.environment.AbstractScmEnvironmentRepository.findOne(AbstractScmEnvironmentRepository.java:57)\n    at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOne(MultipleJGitEnvironmentRepository.java:187)\n    at org.springframework.cloud.config.server.environment.CompositeEnvironmentRepository.findOne(CompositeEnvironmentRepository.java:58)\n    at org.springframework.cloud.config.server.environment.EnvironmentEncryptorEnvironmentRepository.findOne(EnvironmentEncryptorEnvironmentRepository.java:61)\n    at org.springframework.cloud.config.server.environment.EnvironmentController.getEnvironment(EnvironmentController.java:136)\n    at org.springframework.cloud.config.server.environment.EnvironmentController.defaultLabel(EnvironmentController.java:108)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\n    at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:499)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\n    at org.springframework.cloud.config.server.environment.EnvironmentController$$EnhancerBySpringCGLIB$$61a7f28e.defaultLabel(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:109)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1594)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.IllegalStateException: No directory at file:///C:lenovo G50git-localconfig-repo/limits-service.properties\n    at org.springframework.util.Assert.state(Assert.java:73)\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.copyFromLocalRepository(JGitEnvironmentRepository.java:576)\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.copyRepository(JGitEnvironmentRepository.java:561)\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.createGitClient(JGitEnvironmentRepository.java:547)\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:268)\n    ... 72 more\n</code></pre>\n\n<p>This is my application.properties file:</p>\n\n<pre><code>spring.application.name=spring-cloud-config-server\nserver.port=8888\nspring.cloud.config.server.git.uri=file:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\n</code></pre>\n\n<p>This is the my local git repo file:</p>\n\n<pre><code>limits-service.minimum=8\nlimits-service.maximum=888\n</code></pre>\n\n<p>This is my main class:</p>\n\n<pre><code>package com.in28minutes.microservices.springcloudconfigserver;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.config.server.EnableConfigServer;\n\n@EnableConfigServer\n@SpringBootApplication\npublic class SpringCloudConfigServerApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringCloudConfigServerApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>Please help me to fix this.</p>\n"},{"tags":["java","excel","selenium","html-table","cucumber"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674807443,"post_id":75249211,"comment_id":132795832,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27628529,"reputation":11,"user_id":21088046,"display_name":"Michelle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1674751646,"creation_date":1674751646,"question_id":75249211,"body_markdown":"### **Html table data**\r\n\r\n| Field | Value |\r\n| --- | --- |\r\n| account no | 127993388 |\r\n| name | Derek |\r\n| location | London |\r\n| credit date | 01/22/2023 |\r\n| amount | 168637286.367 |\r\n\r\n### **Excel sheet data**\r\n\r\n| Account no | name | location | credit date | amount |\r\n| --- | --- | --- | --- | --- |\r\n| 127993388 | Derek | London | 01/22/2023 | 168637286.367 |","title":"How can i compare my HTML table data with excel sheet using selenium java,","body":"<h3><strong>Html table data</strong></h3>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Field</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>account no</td>\n<td>127993388</td>\n</tr>\n<tr>\n<td>name</td>\n<td>Derek</td>\n</tr>\n<tr>\n<td>location</td>\n<td>London</td>\n</tr>\n<tr>\n<td>credit date</td>\n<td>01/22/2023</td>\n</tr>\n<tr>\n<td>amount</td>\n<td>168637286.367</td>\n</tr>\n</tbody>\n</table>\n</div><h3><strong>Excel sheet data</strong></h3>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Account no</th>\n<th>name</th>\n<th>location</th>\n<th>credit date</th>\n<th>amount</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>127993388</td>\n<td>Derek</td>\n<td>London</td>\n<td>01/22/2023</td>\n<td>168637286.367</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["java","selenium","selenium-webdriver","webdriver","screenshot"],"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1495285915,"post_id":44085722,"comment_id":75194731,"body_markdown":"I have a Answer for you but I want to confirm if that works for you. So can you please consider detailing out what you mean by  `full entire web page, not only partial from the top using selenium` ? Thanks","body":"I have a Answer for you but I want to confirm if that works for you. So can you please consider detailing out what you mean by  <code>full entire web page, not only partial from the top using selenium</code> ? Thanks"}],"answers":[{"tags":[],"owner":{"account_id":1570316,"reputation":4062,"user_id":1458144,"display_name":"iamdanchiv"},"comment_count":0,"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1546432412,"creation_date":1495285125,"answer_id":44086163,"question_id":44085722,"body_markdown":"**LE:** I see quite a lot of people are interested in the full-page screenshot, so I thought I might update the answer with some positives (*silver bullets*).\r\n\r\nThere are quite a handful of web testing frameworks that can (*with minimal setup &amp; effort*) produce a ***full-page screenshot***. I come from a NodeJS testing environment, so I can only vouch the following: [WebdriverIO](http://webdriver.io) &amp; Google&#39;s [Puppeteer](https://pptr.dev/). \r\n\r\nIf anyone is interested in an easy way to do it with WebdriverIO, check [this](https://stackoverflow.com/a/53964987/1458144) answer.\r\n\r\n----------\r\n\r\n\r\nShort answer is **NO, YOU CANNOT**, *if you&#39;re only using Selenium* (detailed reason bellow). But, what you can do is make the most out of your device&#39;s(monitor) [viewport][1]. \r\n\r\nSo, start your browser instance (driver) using `ChromeOptions()`, which is the method for setting ChromeDriver-specific capabilities. We can do the following:\r\n\r\n - maximize the window (using the `--start-maximized` switch);\r\n - go full-screen (`F11`-key on Windows, `Control+Cmd+F` on Mac, using the `--start-fullscreen` switch). \r\n - Note: complete list of Chrome command-line-switches can be found [here][2].\r\n\r\n&gt; Your code should look like this:\r\n\r\n    // Setting your Chrome options (Desired capabilities)\r\n\tChromeOptions options = new ChromeOptions();\r\n\toptions.add_argument(&#39;--start-maximized&#39;);\r\n\toptions.add_argument(&#39;--start-fullscreen&#39;);\r\n\r\n\t// Creating a driver instance with the previous capabilities\r\n\tWebDriver driver = new ChromeDriver(options);\r\n\r\n\t// Load page &amp; take screenshot of full-screen page\r\n    driver.get(&quot;http://google.com&quot;);\r\n    File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\r\n\r\n\r\n  Now regarding the full page problem, all drivers (`chromedriver`, `geckodriver`, `IEDriver`, `EdgeDriver`, etc.) are implementing the [WebDriver W3C][3] standard. Thus, they are dependent on the way the WebDriver team wants to expose the functionality of different features, in our case, [&#39;Take Screenshot&#39;][4].\r\n\r\nIf you read the definition, it clearly states the following:\r\n&gt; The Take Screenshot command takes a screenshot of the top-level browsing context’s **VIEWPORT**.\r\n\r\nLegacy-wise, some drivers were able to produce a full-page screenshot (read more about it [here][5]), like the old FirefoxDriver, IEDriver, etc. That is no longer the case as they now all implement (to the letter) the WebDriver W3C standard.\r\n\r\n  [1]: https://www.w3schools.com/css/css_rwd_viewport.asp\r\n  [2]: http://peter.sh/experiments/chromium-command-line-switches/\r\n  [3]: https://w3c.github.io/webdriver/webdriver-spec.html\r\n  [4]: https://w3c.github.io/webdriver/webdriver-spec.html#take-screenshot\r\n  [5]: https://github.com/seleniumhq/selenium/issues/1141","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p><strong>LE:</strong> I see quite a lot of people are interested in the full-page screenshot, so I thought I might update the answer with some positives (<em>silver bullets</em>).</p>\n\n<p>There are quite a handful of web testing frameworks that can (<em>with minimal setup &amp; effort</em>) produce a <strong><em>full-page screenshot</em></strong>. I come from a NodeJS testing environment, so I can only vouch the following: <a href=\"http://webdriver.io\" rel=\"noreferrer\">WebdriverIO</a> &amp; Google's <a href=\"https://pptr.dev/\" rel=\"noreferrer\">Puppeteer</a>. </p>\n\n<p>If anyone is interested in an easy way to do it with WebdriverIO, check <a href=\"https://stackoverflow.com/a/53964987/1458144\">this</a> answer.</p>\n\n<hr>\n\n<p>Short answer is <strong>NO, YOU CANNOT</strong>, <em>if you're only using Selenium</em> (detailed reason bellow). But, what you can do is make the most out of your device's(monitor) <a href=\"https://www.w3schools.com/css/css_rwd_viewport.asp\" rel=\"noreferrer\">viewport</a>. </p>\n\n<p>So, start your browser instance (driver) using <code>ChromeOptions()</code>, which is the method for setting ChromeDriver-specific capabilities. We can do the following:</p>\n\n<ul>\n<li>maximize the window (using the <code>--start-maximized</code> switch);</li>\n<li>go full-screen (<code>F11</code>-key on Windows, <code>Control+Cmd+F</code> on Mac, using the <code>--start-fullscreen</code> switch). </li>\n<li>Note: complete list of Chrome command-line-switches can be found <a href=\"http://peter.sh/experiments/chromium-command-line-switches/\" rel=\"noreferrer\">here</a>.</li>\n</ul>\n\n<blockquote>\n  <p>Your code should look like this:</p>\n</blockquote>\n\n<pre><code>// Setting your Chrome options (Desired capabilities)\nChromeOptions options = new ChromeOptions();\noptions.add_argument('--start-maximized');\noptions.add_argument('--start-fullscreen');\n\n// Creating a driver instance with the previous capabilities\nWebDriver driver = new ChromeDriver(options);\n\n// Load page &amp; take screenshot of full-screen page\ndriver.get(\"http://google.com\");\nFile scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\n</code></pre>\n\n<p>Now regarding the full page problem, all drivers (<code>chromedriver</code>, <code>geckodriver</code>, <code>IEDriver</code>, <code>EdgeDriver</code>, etc.) are implementing the <a href=\"https://w3c.github.io/webdriver/webdriver-spec.html\" rel=\"noreferrer\">WebDriver W3C</a> standard. Thus, they are dependent on the way the WebDriver team wants to expose the functionality of different features, in our case, <a href=\"https://w3c.github.io/webdriver/webdriver-spec.html#take-screenshot\" rel=\"noreferrer\">'Take Screenshot'</a>.</p>\n\n<p>If you read the definition, it clearly states the following:</p>\n\n<blockquote>\n  <p>The Take Screenshot command takes a screenshot of the top-level browsing context’s <strong>VIEWPORT</strong>.</p>\n</blockquote>\n\n<p>Legacy-wise, some drivers were able to produce a full-page screenshot (read more about it <a href=\"https://github.com/seleniumhq/selenium/issues/1141\" rel=\"noreferrer\">here</a>), like the old FirefoxDriver, IEDriver, etc. That is no longer the case as they now all implement (to the letter) the WebDriver W3C standard.</p>\n"},{"comments":[{"owner":{"account_id":8572689,"reputation":502,"user_id":6422979,"accept_rate":38,"display_name":"Rajesh Om"},"score":0,"creation_date":1563874305,"post_id":46946751,"comment_id":100836052,"body_markdown":"This code is not working properly in Angujar js application","body":"This code is not working properly in Angujar js application"}],"tags":[],"owner":{"account_id":9972562,"reputation":670,"user_id":7378175,"accept_rate":60,"display_name":"Krzysztof Walczewski"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1508997109,"creation_date":1508997109,"answer_id":46946751,"question_id":44085722,"body_markdown":"I have found a tutorial http://www.softwaretestingmaterial.com/how-to-capture-full-page-screenshot-using-selenium-webdriver/\r\nFor maven users: remember about adding dependendency from https://mvnrepository.com/artifact/ru.yandex.qatools.ashot/ashot\r\nWhen I testing this script, I&#39;ve got large pictures, which can&#39;t be open in browser (too large or broken).\r\n\r\nSo maybe someone know any script, which focus page on last used locator?","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>I have found a tutorial <a href=\"http://www.softwaretestingmaterial.com/how-to-capture-full-page-screenshot-using-selenium-webdriver/\" rel=\"noreferrer\">http://www.softwaretestingmaterial.com/how-to-capture-full-page-screenshot-using-selenium-webdriver/</a>\nFor maven users: remember about adding dependendency from <a href=\"https://mvnrepository.com/artifact/ru.yandex.qatools.ashot/ashot\" rel=\"noreferrer\">https://mvnrepository.com/artifact/ru.yandex.qatools.ashot/ashot</a>\nWhen I testing this script, I've got large pictures, which can't be open in browser (too large or broken).</p>\n\n<p>So maybe someone know any script, which focus page on last used locator?</p>\n"},{"tags":[],"owner":{"account_id":9972562,"reputation":670,"user_id":7378175,"accept_rate":60,"display_name":"Krzysztof Walczewski"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510756316,"creation_date":1510756316,"answer_id":47310063,"question_id":44085722,"body_markdown":"For some pages I neeed to take screenshot of begin and end of page. So I use to take 2 screenshots:\r\n\r\n    public static String javaIoTmpDir = System.getProperty(&quot;java.io.tmpdir&quot;); //tmp dir\r\n    //create screenshot\r\n\t\tdriver.manage().window().fullscreen();\r\n\t\t//For large pages - body over 850 px highh - take addition screenshot of the end of page\r\n\t\tif (driver.findElements(By.id(&quot;panel_body&quot;)).size()&gt;0) {\r\n\t\t\tWebElement body = driver.findElement(By.id(&quot;panel_body&quot;));\r\n\t\t\tint bodyHight = body.getSize().getHeight();\r\n\t\t\tif (bodyHight &gt; 850) {\r\n\t\t\t\tRobot robot = new Robot();\r\n\t\t\t\trobot.keyPress(KeyEvent.VK_END);\r\n\t\t\t\trobot.keyRelease(KeyEvent.VK_END);\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\tFile scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\r\n\t\t\t\tString timePictureEnd = javaIoTmpDir+&quot;\\\\scr_&quot;+String.valueOf(System.currentTimeMillis())+getClass().toString().substring(getClass().toString().lastIndexOf(&quot;.qa.&quot;)+3)+&quot;.png&quot;;\r\n\t\t\t\tFileUtils.copyFile(scrFile, new File(timePictureEnd));\r\n\t\t\t\trobot.keyPress(KeyEvent.VK_HOME); //back to top page for next screen\r\n\t\t\t\trobot.keyRelease(KeyEvent.VK_HOME);\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t}\r\n\t\t}\r\n\t\tString timePicture = javaIoTmpDir+&quot;\\\\scr_&quot;+String.valueOf(System.currentTimeMillis())+getClass().toString().substring(getClass().toString().lastIndexOf(&quot;.qa.&quot;)+3)+&quot;.png&quot;;\r\n\t\tFile scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\r\n\t\tFileUtils.copyFile(scrFile, new File(timePicture));","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>For some pages I neeed to take screenshot of begin and end of page. So I use to take 2 screenshots:</p>\n\n<pre><code>public static String javaIoTmpDir = System.getProperty(\"java.io.tmpdir\"); //tmp dir\n//create screenshot\n    driver.manage().window().fullscreen();\n    //For large pages - body over 850 px highh - take addition screenshot of the end of page\n    if (driver.findElements(By.id(\"panel_body\")).size()&gt;0) {\n        WebElement body = driver.findElement(By.id(\"panel_body\"));\n        int bodyHight = body.getSize().getHeight();\n        if (bodyHight &gt; 850) {\n            Robot robot = new Robot();\n            robot.keyPress(KeyEvent.VK_END);\n            robot.keyRelease(KeyEvent.VK_END);\n            Thread.sleep(1000);\n            File scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\n            String timePictureEnd = javaIoTmpDir+\"\\\\scr_\"+String.valueOf(System.currentTimeMillis())+getClass().toString().substring(getClass().toString().lastIndexOf(\".qa.\")+3)+\".png\";\n            FileUtils.copyFile(scrFile, new File(timePictureEnd));\n            robot.keyPress(KeyEvent.VK_HOME); //back to top page for next screen\n            robot.keyRelease(KeyEvent.VK_HOME);\n            Thread.sleep(1000);\n        }\n    }\n    String timePicture = javaIoTmpDir+\"\\\\scr_\"+String.valueOf(System.currentTimeMillis())+getClass().toString().substring(getClass().toString().lastIndexOf(\".qa.\")+3)+\".png\";\n    File scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\n    FileUtils.copyFile(scrFile, new File(timePicture));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11481068,"reputation":48,"user_id":8415112,"display_name":"TiantianHe"},"score":0,"creation_date":1538117452,"post_id":52549283,"comment_id":92038551,"body_markdown":"@Pierre.Vriens Sorry, my English is not good. What I want to express is you can get screenshot of full webpage by Phantomjs. When you use Phantomjs to get a full screenshot, you need to download Phantomjs first.Then run Phantomjs script to screenshot. More about it you can reference http://phantomjs.org/","body":"@Pierre.Vriens Sorry, my English is not good. What I want to express is you can get screenshot of full webpage by Phantomjs. When you use Phantomjs to get a full screenshot, you need to download Phantomjs first.Then run Phantomjs script to screenshot. More about it you can reference <a href=\"http://phantomjs.org/\" rel=\"nofollow noreferrer\">phantomjs.org</a>"},{"owner":{"account_id":1570316,"reputation":4062,"user_id":1458144,"display_name":"iamdanchiv"},"score":1,"creation_date":1548668184,"post_id":52549283,"comment_id":95608824,"body_markdown":"PhantomJS has been abandoned for [at least two years](https://github.com/ariya/phantomjs/issues/15105), and officially archived [since early 2018](https://github.com/ariya/phantomjs/issues/15344). Stop using software that is _end-of-life, or which lacks proper support_. Also, since `--headless` switch for Chrome &amp; the extensive Chromium efforts put into headless browsers, third-party projects like PhantomJS have become obsolete, thus the project being abandoned...","body":"PhantomJS has been abandoned for <a href=\"https://github.com/ariya/phantomjs/issues/15105\" rel=\"nofollow noreferrer\">at least two years</a>, and officially archived <a href=\"https://github.com/ariya/phantomjs/issues/15344\" rel=\"nofollow noreferrer\">since early 2018</a>. Stop using software that is <i>end-of-life, or which lacks proper support</i>. Also, since <code>--headless</code> switch for Chrome &amp; the extensive Chromium efforts put into headless browsers, third-party projects like PhantomJS have become obsolete, thus the project being abandoned..."}],"tags":[],"owner":{"account_id":11481068,"reputation":48,"user_id":8415112,"display_name":"TiantianHe"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538133408,"creation_date":1538114751,"answer_id":52549283,"question_id":44085722,"body_markdown":"You can use Phantomjs to achieve it.\r\n\r\nHere is my java code:\r\n\r\n    public class PhantomjsTest {\r\n        public static void main(String[] args) {\r\n            try {\r\n    \r\n                long start=System.currentTimeMillis();\r\n                //The page you want to screenshot\r\n                String targetUrl=&quot;https://www.iqiyi.com/&quot;;\r\n                //File path\r\n                String targetImg=&quot;iqiyi.png&quot;;\r\n                String command = &quot;/Users/hetiantian/SoftWares/phantomjs/bin/phantomjs /Users/hetiantian/SoftWares/phantomjs/examples/rasterize.js &quot;+targetUrl + &quot; &quot; +targetImg;\r\n                Process p = Runtime.getRuntime().exec(command);\r\n                p.waitFor();\r\n                System.out.println((System.currentTimeMillis()-start));\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n    \r\n        }\r\n    }\r\n\r\nSo you can get a screenshot of full webpage by Phantomjs. When you use Phantomjs to get a full screenshot, you need to download Phantomjs first. Then run Phantomjs script to screenshot. More about it you can reference [phantomjs.org][1].\r\n\r\n\r\n  [1]: http://phantomjs.org/","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>You can use Phantomjs to achieve it.</p>\n\n<p>Here is my java code:</p>\n\n<pre><code>public class PhantomjsTest {\n    public static void main(String[] args) {\n        try {\n\n            long start=System.currentTimeMillis();\n            //The page you want to screenshot\n            String targetUrl=\"https://www.iqiyi.com/\";\n            //File path\n            String targetImg=\"iqiyi.png\";\n            String command = \"/Users/hetiantian/SoftWares/phantomjs/bin/phantomjs /Users/hetiantian/SoftWares/phantomjs/examples/rasterize.js \"+targetUrl + \" \" +targetImg;\n            Process p = Runtime.getRuntime().exec(command);\n            p.waitFor();\n            System.out.println((System.currentTimeMillis()-start));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n\n    }\n}\n</code></pre>\n\n<p>So you can get a screenshot of full webpage by Phantomjs. When you use Phantomjs to get a full screenshot, you need to download Phantomjs first. Then run Phantomjs script to screenshot. More about it you can reference <a href=\"http://phantomjs.org/\" rel=\"nofollow noreferrer\">phantomjs.org</a>.</p>\n"},{"comments":[{"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"score":0,"creation_date":1653150539,"post_id":55252674,"comment_id":127783336,"body_markdown":"Outdated. Do not use this any more - very slow. See the below solutions which work for Firefox and Chrome which did not exist back when this library had been created.","body":"Outdated. Do not use this any more - very slow. See the below solutions which work for Firefox and Chrome which did not exist back when this library had been created."}],"tags":[],"owner":{"account_id":15004353,"reputation":174,"user_id":10830909,"display_name":"Wenzhong Hu"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1553048798,"creation_date":1553048798,"answer_id":55252674,"question_id":44085722,"body_markdown":"Looks like this [article][1] suggesting [AShot][2] works for me. Also, I successfully embeded the full page screenshot into Cucumber report with following code\r\n\r\n\r\n        scenario.embed(takeScreenShotAsByte(getWebDriver()), &quot;image/png&quot;);\r\n    \r\n        private static byte[] takeScreenShotAsByte(WebDriver webDriver) throws IOException {\r\n            return takeFullPageScreenShotAsByte(webDriver);\r\n        }\r\n    \r\n        private static byte[] takeFullPageScreenShotAsByte(WebDriver webDriver) throws IOException {\r\n            Screenshot fpScreenshot = new AShot().shootingStrategy(ShootingStrategies.viewportPasting(1000))\r\n                    .takeScreenshot(webDriver);\r\n    \r\n            BufferedImage originalImage = fpScreenshot.getImage();\r\n    \r\n            try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\r\n                ImageIO.write(originalImage, &quot;png&quot;, baos);\r\n                baos.flush();\r\n                return baos.toByteArray();\r\n            }\r\n        }\r\n\r\n\r\n  [1]: https://www.softwaretestingmaterial.com/how-to-capture-full-page-screenshot-using-selenium-webdriver/\r\n  [2]: https://github.com/pazone/ashot","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>Looks like this <a href=\"https://www.softwaretestingmaterial.com/how-to-capture-full-page-screenshot-using-selenium-webdriver/\" rel=\"noreferrer\">article</a> suggesting <a href=\"https://github.com/pazone/ashot\" rel=\"noreferrer\">AShot</a> works for me. Also, I successfully embeded the full page screenshot into Cucumber report with following code</p>\n\n<pre><code>    scenario.embed(takeScreenShotAsByte(getWebDriver()), \"image/png\");\n\n    private static byte[] takeScreenShotAsByte(WebDriver webDriver) throws IOException {\n        return takeFullPageScreenShotAsByte(webDriver);\n    }\n\n    private static byte[] takeFullPageScreenShotAsByte(WebDriver webDriver) throws IOException {\n        Screenshot fpScreenshot = new AShot().shootingStrategy(ShootingStrategies.viewportPasting(1000))\n                .takeScreenshot(webDriver);\n\n        BufferedImage originalImage = fpScreenshot.getImage();\n\n        try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\n            ImageIO.write(originalImage, \"png\", baos);\n            baos.flush();\n            return baos.toByteArray();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16108367,"reputation":51,"user_id":11627322,"display_name":"Andre Fernandes Luiz"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1621671571,"creation_date":1560216535,"answer_id":56535317,"question_id":44085722,"body_markdown":"Here is my sample of get Full Screen ScreenShot using C#, but just change:\r\n\r\n&lt;!-- language: lang-cs --&gt;\r\n\r\n    string _currentPath = Path.GetDirectoryName(Assembly.GetAssembly(typeof(One of your objects)).Location) + @&quot;\\Attachs\\&quot;;\r\n    var filePath = _currentPath + sSName;\r\n\r\n    if (!Directory.Exists(_currentPath))\r\n        Directory.CreateDirectory(_currentPath);\r\n\r\n    Dictionary&lt;string, Object&gt; metrics = new Dictionary&lt;string, Object&gt;();\r\n    metrics[&quot;width&quot;] = _driver.ExecuteScript(&quot;return Math.max(window.innerWidth,document.body.scrollWidth,document.documentElement.scrollWidth)&quot;);\r\n    metrics[&quot;height&quot;] = _driver.ExecuteScript(&quot;return Math.max(window.innerHeight,document.body.scrollHeight,document.documentElement.scrollHeight)&quot;);\r\n    metrics[&quot;deviceScaleFactor&quot;] = (double)_driver.ExecuteScript(&quot;return window.devicePixelRatio&quot;);\r\n    metrics[&quot;mobile&quot;] = _driver.ExecuteScript(&quot;return typeof window.orientation !== &#39;undefined&#39;&quot;);\r\n    _driver.ExecuteChromeCommand(&quot;Emulation.setDeviceMetricsOverride&quot;, metrics);\r\n\r\n    _driver.GetScreenshot().SaveAsFile(filePath, ScreenshotImageFormat.Png);\r\n\r\n    _driver.ExecuteChromeCommand(&quot;Emulation.clearDeviceMetricsOverride&quot;, new Dictionary&lt;string, Object&gt;());\r\n    _driver.Close();","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>Here is my sample of get Full Screen ScreenShot using C#, but just change:</p>\n<pre class=\"lang-cs prettyprint-override\"><code>string _currentPath = Path.GetDirectoryName(Assembly.GetAssembly(typeof(One of your objects)).Location) + @&quot;\\Attachs\\&quot;;\nvar filePath = _currentPath + sSName;\n\nif (!Directory.Exists(_currentPath))\n    Directory.CreateDirectory(_currentPath);\n\nDictionary&lt;string, Object&gt; metrics = new Dictionary&lt;string, Object&gt;();\nmetrics[&quot;width&quot;] = _driver.ExecuteScript(&quot;return Math.max(window.innerWidth,document.body.scrollWidth,document.documentElement.scrollWidth)&quot;);\nmetrics[&quot;height&quot;] = _driver.ExecuteScript(&quot;return Math.max(window.innerHeight,document.body.scrollHeight,document.documentElement.scrollHeight)&quot;);\nmetrics[&quot;deviceScaleFactor&quot;] = (double)_driver.ExecuteScript(&quot;return window.devicePixelRatio&quot;);\nmetrics[&quot;mobile&quot;] = _driver.ExecuteScript(&quot;return typeof window.orientation !== 'undefined'&quot;);\n_driver.ExecuteChromeCommand(&quot;Emulation.setDeviceMetricsOverride&quot;, metrics);\n\n_driver.GetScreenshot().SaveAsFile(filePath, ScreenshotImageFormat.Png);\n\n_driver.ExecuteChromeCommand(&quot;Emulation.clearDeviceMetricsOverride&quot;, new Dictionary&lt;string, Object&gt;());\n_driver.Close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9404982,"reputation":123,"user_id":7411203,"display_name":"Talmtikisan"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1579711843,"creation_date":1579711843,"answer_id":59864595,"question_id":44085722,"body_markdown":"It is possible to start Chrome in headless mode and then set the window size to the same height of the page body.\r\n\r\nSince the height of your headless browser is not dependent on your monitor size you can use this headless mode to get full length screenshots as they are rendered in the Chrome browser.\r\n\r\nThe top answer for [Headless Chrome run with selenium][1] seems to show the right way to start Chrome in headless mode with java. I work with python bindings but the answer looks pretty similar to what I do.\r\n\r\nThis is the relevant part. This code should go before you start an instance of ChromeDriver.\r\n\r\n    ChromeOptions chromeOptions = new ChromeOptions();\r\n    chromeOptions.addArguments(&quot;--headless&quot;);\r\n\r\n    ChromeDriver driver = new ChromeDriver(chromeOptions);\r\n\r\nIf running chrome in a headless browser is not a viable option then you&#39;ll have to use Firefox or IE. Both of these browsers will give you a full length screenshot\r\n\r\n  [1]: https://stackoverflow.com/questions/47067188/headless-chrome-run-with-selenium\r\n","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>It is possible to start Chrome in headless mode and then set the window size to the same height of the page body.</p>\n\n<p>Since the height of your headless browser is not dependent on your monitor size you can use this headless mode to get full length screenshots as they are rendered in the Chrome browser.</p>\n\n<p>The top answer for <a href=\"https://stackoverflow.com/questions/47067188/headless-chrome-run-with-selenium\">Headless Chrome run with selenium</a> seems to show the right way to start Chrome in headless mode with java. I work with python bindings but the answer looks pretty similar to what I do.</p>\n\n<p>This is the relevant part. This code should go before you start an instance of ChromeDriver.</p>\n\n<pre><code>ChromeOptions chromeOptions = new ChromeOptions();\nchromeOptions.addArguments(\"--headless\");\n\nChromeDriver driver = new ChromeDriver(chromeOptions);\n</code></pre>\n\n<p>If running chrome in a headless browser is not a viable option then you'll have to use Firefox or IE. Both of these browsers will give you a full length screenshot</p>\n"},{"tags":[],"owner":{"account_id":49071,"reputation":8690,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1607285852,"creation_date":1607285852,"answer_id":65172667,"question_id":44085722,"body_markdown":"Java code without using third party library:\r\n```\r\nint bodyHeight = webDriver.findElement(By.tagName(&quot;body&quot;)).getSize().getHeight();\r\nint windowChromeHeight = (int) (long) webDriver.executeScript(&quot;return window.outerHeight - window.innerHeight&quot;);\r\nDimension size = new Dimension(webDriver.manage().window().getSize().getWidth(), bodyHeight + windowChromeHeight);\r\nwebDriver.executeScript(&quot;window.scrollTo(0, 0);&quot;);\r\nwebDriver.manage().window().setSize(size);\r\n\t\t\t\r\nFile screenshotFile = new File(&quot;screenshot.png&quot;);\r\nFiles.write(screenshotFile.toPath(), webDriver.getScreenshotAs(OutputType.BYTES));\r\n```","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>Java code without using third party library:</p>\n<pre><code>int bodyHeight = webDriver.findElement(By.tagName(&quot;body&quot;)).getSize().getHeight();\nint windowChromeHeight = (int) (long) webDriver.executeScript(&quot;return window.outerHeight - window.innerHeight&quot;);\nDimension size = new Dimension(webDriver.manage().window().getSize().getWidth(), bodyHeight + windowChromeHeight);\nwebDriver.executeScript(&quot;window.scrollTo(0, 0);&quot;);\nwebDriver.manage().window().setSize(size);\n            \nFile screenshotFile = new File(&quot;screenshot.png&quot;);\nFiles.write(screenshotFile.toPath(), webDriver.getScreenshotAs(OutputType.BYTES));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1868856,"reputation":1929,"user_id":1691651,"display_name":"JohnP2"},"score":0,"creation_date":1617210470,"post_id":66859108,"comment_id":118243181,"body_markdown":"Does this work for a full-page screenshot of &quot;https://acrobat.adobe.com&quot;? For me I only get a small viewport, not a full page.","body":"Does this work for a full-page screenshot of &quot;<a href=\"https://acrobat.adobe.com\" rel=\"nofollow noreferrer\">acrobat.adobe.com</a>&quot;? For me I only get a small viewport, not a full page."},{"owner":{"account_id":2691426,"reputation":3360,"user_id":2324685,"accept_rate":70,"display_name":"John29"},"score":0,"creation_date":1617210985,"post_id":66859108,"comment_id":118243426,"body_markdown":"Yes, a full-page screenshot of &quot;acrobat.adobe.com&quot; works fine for me with Selenium 4 beta 2.","body":"Yes, a full-page screenshot of &quot;acrobat.adobe.com&quot; works fine for me with Selenium 4 beta 2."},{"owner":{"account_id":1868856,"reputation":1929,"user_id":1691651,"display_name":"JohnP2"},"score":0,"creation_date":1617222869,"post_id":66859108,"comment_id":118248042,"body_markdown":"Ah, I had to use Thread.sleep(5000) for the page to load, and this is working now.","body":"Ah, I had to use Thread.sleep(5000) for the page to load, and this is working now."},{"owner":{"account_id":2573794,"reputation":488,"user_id":2231950,"accept_rate":80,"display_name":"kontextify"},"score":0,"creation_date":1643987338,"post_id":66859108,"comment_id":125492378,"body_markdown":"No amount of sleeping helps the page render correctly for me. Some elements appear strangely cut off.","body":"No amount of sleeping helps the page render correctly for me. Some elements appear strangely cut off."},{"owner":{"account_id":8170109,"reputation":484,"user_id":6150881,"display_name":"Rabhi salim"},"score":0,"creation_date":1671007786,"post_id":66859108,"comment_id":132001804,"body_markdown":"don&#39;t sleep, instead:\n(new WebDriverWait(base.driver, Duration.ofSeconds(45))).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//foo[bar]&quot;))).click();","body":"don&#39;t sleep, instead: (new WebDriverWait(base.driver, Duration.ofSeconds(45))).until(ExpectedConditions.elementToB&zwnj;&#8203;eClickable(By.xpath(&zwnj;&#8203;&quot;//foo[bar]&quot;))).clic&zwnj;&#8203;k();"}],"tags":[],"owner":{"account_id":2691426,"reputation":3360,"user_id":2324685,"accept_rate":70,"display_name":"John29"},"comment_count":5,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1617040137,"creation_date":1617040137,"answer_id":66859108,"question_id":44085722,"body_markdown":"Now there&#39;s an easy way to do it with Selenium 4 and Firefox.\r\n\r\n    byte[] imageBytes = ((FirefoxDriver)driver).getFullPageScreenshotAs(OutputType.BYTES);\r\n    Files.write(Paths.get(RESULT_FILENAME), imageBytes);\r\n\r\nOther browsers don&#39;t support `getFullPageScreenshotAs()` yet.","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>Now there's an easy way to do it with Selenium 4 and Firefox.</p>\n<pre><code>byte[] imageBytes = ((FirefoxDriver)driver).getFullPageScreenshotAs(OutputType.BYTES);\nFiles.write(Paths.get(RESULT_FILENAME), imageBytes);\n</code></pre>\n<p>Other browsers don't support <code>getFullPageScreenshotAs()</code> yet.</p>\n"},{"tags":[],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1653150338,"creation_date":1653150338,"answer_id":72331370,"question_id":44085722,"body_markdown":"Here is a way to use DevTools + Chromedriver to do it:\r\n\r\n```\r\n  private String takeScreenshot(ChromeDriver driver, boolean fullscreen) {\r\n    if (fullscreen) {\r\n      Map&lt;String, Object&gt; layoutMetrics = driver.executeCdpCommand(&quot;Page.getLayoutMetrics&quot;, Collections.emptyMap());\r\n      Map&lt;String, Object&gt; screenshotConfig = Maps.newHashMap();\r\n      screenshotConfig.put(&quot;captureBeyondViewport&quot;, true);\r\n      screenshotConfig.put(&quot;fromSurface&quot;, true);\r\n      Map contentSize = (Map)layoutMetrics.get(&quot;contentSize&quot;);\r\n      screenshotConfig.put(&quot;clip&quot;, ImmutableMap.of(\r\n          &quot;width&quot;, contentSize.get(&quot;width&quot;),\r\n          &quot;height&quot;, contentSize.get(&quot;height&quot;),\r\n          &quot;x&quot;, 0,\r\n          &quot;y&quot;, 0,\r\n          &quot;scale&quot;, 1\r\n      ));\r\n      Map&lt;String, Object&gt; base64PngResult = driver.executeCdpCommand(&quot;Page.captureScreenshot&quot;, screenshotConfig);\r\n      return (String)base64PngResult.get(&quot;data&quot;);\r\n    }\r\n    return driver.getScreenshotAs(OutputType.BASE64);\r\n  }\r\n```","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>Here is a way to use DevTools + Chromedriver to do it:</p>\n<pre><code>  private String takeScreenshot(ChromeDriver driver, boolean fullscreen) {\n    if (fullscreen) {\n      Map&lt;String, Object&gt; layoutMetrics = driver.executeCdpCommand(&quot;Page.getLayoutMetrics&quot;, Collections.emptyMap());\n      Map&lt;String, Object&gt; screenshotConfig = Maps.newHashMap();\n      screenshotConfig.put(&quot;captureBeyondViewport&quot;, true);\n      screenshotConfig.put(&quot;fromSurface&quot;, true);\n      Map contentSize = (Map)layoutMetrics.get(&quot;contentSize&quot;);\n      screenshotConfig.put(&quot;clip&quot;, ImmutableMap.of(\n          &quot;width&quot;, contentSize.get(&quot;width&quot;),\n          &quot;height&quot;, contentSize.get(&quot;height&quot;),\n          &quot;x&quot;, 0,\n          &quot;y&quot;, 0,\n          &quot;scale&quot;, 1\n      ));\n      Map&lt;String, Object&gt; base64PngResult = driver.executeCdpCommand(&quot;Page.captureScreenshot&quot;, screenshotConfig);\n      return (String)base64PngResult.get(&quot;data&quot;);\n    }\n    return driver.getScreenshotAs(OutputType.BASE64);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13945822,"reputation":291,"user_id":10070611,"display_name":"Vitaliy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661418880,"creation_date":1661418880,"answer_id":73484931,"question_id":44085722,"body_markdown":"None of the options described here worked for me in my environment (go lang, chromedriver, fedesog implementation of web driver) What came to me eventually is zoom out! This approach can work for pages which are not too long, in which zooming out makes sense.\r\n\r\nI think this may be relevant for java or any other language using selenium, so posting it here for anyone who comes across this issue in any programming language :)\r\nThe following javascript code snippet allows to set zoom level:\r\n\r\n    document.body.style.zoom = &#39;0.5&#39;\r\n\r\nWhere 0.5 is the zoom level you want. It can be calculated dynamically based on actual page size, which can be retrieved using:\r\n\r\n    document.body.scrollHeight\r\nand \r\n\r\n    document.body.scrollWidth\r\n\r\nlike mentioned above, and executed like:\r\n\r\n    webDriver.executeScript(...)\r\nin java or \r\n\r\n    session.ExecuteScript(...)\r\nin golang using fedesog or similar webdriver framework\r\n\r\n\r\n\r\n \r\n\r\n","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>None of the options described here worked for me in my environment (go lang, chromedriver, fedesog implementation of web driver) What came to me eventually is zoom out! This approach can work for pages which are not too long, in which zooming out makes sense.</p>\n<p>I think this may be relevant for java or any other language using selenium, so posting it here for anyone who comes across this issue in any programming language :)\nThe following javascript code snippet allows to set zoom level:</p>\n<pre><code>document.body.style.zoom = '0.5'\n</code></pre>\n<p>Where 0.5 is the zoom level you want. It can be calculated dynamically based on actual page size, which can be retrieved using:</p>\n<pre><code>document.body.scrollHeight\n</code></pre>\n<p>and</p>\n<pre><code>document.body.scrollWidth\n</code></pre>\n<p>like mentioned above, and executed like:</p>\n<pre><code>webDriver.executeScript(...)\n</code></pre>\n<p>in java or</p>\n<pre><code>session.ExecuteScript(...)\n</code></pre>\n<p>in golang using fedesog or similar webdriver framework</p>\n"},{"tags":[],"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674751057,"creation_date":1674751057,"answer_id":75249083,"question_id":44085722,"body_markdown":"This is the simplest solution I found, which I guess should work most of the times:\r\n\r\nIn headless mode, you can set the viewport to virtually any size you want, indepedent from any existing physical screen size. For example:\r\n\r\n\t\tfinal ChromeOptions options = new ChromeOptions().setHeadless(true).addArguments(&quot;window-size=1200,3000&quot;);\r\n\t\tdriver = new RemoteWebDriver(remoteAddress, options);\r\n\r\nNote that you can use a large heights to try and fit the whole page.\r\n","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>This is the simplest solution I found, which I guess should work most of the times:</p>\n<p>In headless mode, you can set the viewport to virtually any size you want, indepedent from any existing physical screen size. For example:</p>\n<pre><code>    final ChromeOptions options = new ChromeOptions().setHeadless(true).addArguments(&quot;window-size=1200,3000&quot;);\n    driver = new RemoteWebDriver(remoteAddress, options);\n</code></pre>\n<p>Note that you can use a large heights to try and fit the whole page.</p>\n"}],"owner":{"account_id":6391551,"reputation":483,"user_id":4957499,"accept_rate":78,"display_name":"Placinta Alexandru"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83812,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":44086163,"answer_count":12,"score":27,"last_activity_date":1674751057,"creation_date":1495282356,"question_id":44085722,"body_markdown":"How to take a screenshot of the entire web page (*full-page screenshot*), not only partial (*top-to-bottom*) using Selenium WebDriver?\r\n\r\n**My code:** (*Java bindings*)\r\n    \r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/home/alex/Downloads/chromedriver_linux64/chromedriver&quot;);\r\n    WebDriver driver = new ChromeDriver();\r\n    driver.get(&quot;http://google.com&quot;);\r\n    File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\r\n    FileUtils.copyFile(scrFile, new File(RESULT_FILENAME));\r\n\r\nAny ideas on how to tackle this?","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>How to take a screenshot of the entire web page (<em>full-page screenshot</em>), not only partial (<em>top-to-bottom</em>) using Selenium WebDriver?</p>\n\n<p><strong>My code:</strong> (<em>Java bindings</em>)</p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\",\"/home/alex/Downloads/chromedriver_linux64/chromedriver\");\nWebDriver driver = new ChromeDriver();\ndriver.get(\"http://google.com\");\nFile scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\nFileUtils.copyFile(scrFile, new File(RESULT_FILENAME));\n</code></pre>\n\n<p>Any ideas on how to tackle this?</p>\n"},{"tags":["java","minecraft"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1655443350,"post_id":72654113,"comment_id":128338113,"body_markdown":"version 63 is Java 19","body":"version 63 is Java 19"},{"owner":{"account_id":22514501,"reputation":41,"user_id":16708933,"display_name":"Gavin Niederman"},"score":0,"creation_date":1655443697,"post_id":72654113,"comment_id":128338172,"body_markdown":"ok but is there any way to fix this issue, I need to use java 17","body":"ok but is there any way to fix this issue, I need to use java 17"}],"answers":[{"tags":[],"owner":{"account_id":20215646,"reputation":11,"user_id":14826547,"display_name":"ImSamhel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655804775,"creation_date":1655804775,"answer_id":72698638,"question_id":72654113,"body_markdown":"1. Try and use JDK17 if you&#39;re using the newest gradle version\r\n2. Use Loom&#39;s &quot;0.12-SNAPSHOT&quot; version instead of the current one","title":"Compiling a fabric mod yeilds the error &quot;Unsupported class file major version 63&quot;","body":"<ol>\n<li>Try and use JDK17 if you're using the newest gradle version</li>\n<li>Use Loom's &quot;0.12-SNAPSHOT&quot; version instead of the current one</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20967162,"reputation":381,"user_id":15405114,"display_name":"Usaid Asif"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674750838,"creation_date":1674750838,"answer_id":75249037,"question_id":72654113,"body_markdown":"I finally found the solution of this error :-\r\n\r\n[Unsupported class file major version 63][1]\r\n\r\nsoo just go at your project folder and then open :-\r\n\r\nandroid/gradle/wrapper/gradle-wrapper-properties\r\n\r\nchange this :- \r\n\r\ndistributionUrl=https://services.gradle.org/distributions/gradle-7.4-all.zip \r\n\r\nTo This :- \r\n\r\ndistributionUrl=https://services.gradle.org/distributions/gradle-7.6-all.zip \r\n\r\nand then your issue get solved &#128513;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dhRJ0.jpg","title":"Compiling a fabric mod yeilds the error &quot;Unsupported class file major version 63&quot;","body":"<p>I finally found the solution of this error :-</p>\n<p><a href=\"https://i.stack.imgur.com/dhRJ0.jpg\" rel=\"nofollow noreferrer\">Unsupported class file major version 63</a></p>\n<p>soo just go at your project folder and then open :-</p>\n<p>android/gradle/wrapper/gradle-wrapper-properties</p>\n<p>change this :-</p>\n<p>distributionUrl=https://services.gradle.org/distributions/gradle-7.4-all.zip</p>\n<p>To This :-</p>\n<p>distributionUrl=https://services.gradle.org/distributions/gradle-7.6-all.zip</p>\n<p>and then your issue get solved 😁</p>\n"}],"owner":{"account_id":22514501,"reputation":41,"user_id":16708933,"display_name":"Gavin Niederman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2748,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1674750838,"creation_date":1655437652,"question_id":72654113,"body_markdown":"When I try to compile my fabric mod in intellij with gradle it fails during the :remapJar task and gives the error ```Unsupported class file major version 63``` I&#39;m pretty sure that class file major versions only go up to 61 so I am very confused about this error. Any help would be amazing. I&#39;m happy to give additional details if necessary.","title":"Compiling a fabric mod yeilds the error &quot;Unsupported class file major version 63&quot;","body":"<p>When I try to compile my fabric mod in intellij with gradle it fails during the :remapJar task and gives the error <code>Unsupported class file major version 63</code> I'm pretty sure that class file major versions only go up to 61 so I am very confused about this error. Any help would be amazing. I'm happy to give additional details if necessary.</p>\n"},{"tags":["java","oracle","hibernate","jpa","intellij-idea"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1673549396,"post_id":75100996,"comment_id":132530179,"body_markdown":"You already have a unique identifier, why do you think you need another?","body":"You already have a unique identifier, why do you think you need another?"},{"owner":{"account_id":19585505,"reputation":71,"user_id":14333706,"display_name":"nejlasahin"},"score":1,"creation_date":1673550588,"post_id":75100996,"comment_id":132530580,"body_markdown":"It might be more accurate to associate it with a foreign key. You can establish a One To One relationship between Person and PoliceMan.","body":"It might be more accurate to associate it with a foreign key. You can establish a One To One relationship between Person and PoliceMan."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1673556816,"post_id":75100996,"comment_id":132532355,"body_markdown":"Your table structure doesn&#39;t show a FK from police-&gt;person. Nothing stops you from having a police_id attribute within your entity, it just can&#39;t be marked as THE id. You can have any number of unique identifiers within entities and tables - just mark the column with a uniqueness constraint. Plus one on this shouldn&#39;t be using inheritance despite that though. An officer (PoliceMan) is a role, not a defining characteristic of a person, and you&#39;ll have issues maintaining their existence as a person if it isn&#39;t separated out, just as you apparently are for the table data.","body":"Your table structure doesn&#39;t show a FK from police-&gt;person. Nothing stops you from having a police_id attribute within your entity, it just can&#39;t be marked as THE id. You can have any number of unique identifiers within entities and tables - just mark the column with a uniqueness constraint. Plus one on this shouldn&#39;t be using inheritance despite that though. An officer (PoliceMan) is a role, not a defining characteristic of a person, and you&#39;ll have issues maintaining their existence as a person if it isn&#39;t separated out, just as you apparently are for the table data."}],"answers":[{"tags":[],"owner":{"account_id":9045176,"reputation":21,"user_id":6737805,"display_name":"Csaba Ocsk&#243;-S&#243;s"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673899649,"creation_date":1673899649,"answer_id":75139199,"question_id":75100996,"body_markdown":"You missed the Inheritance mapping. Just extending the Person class is not a JPA inheritance. By looking at your code I suppose that you wanted to make a joined table inheritance, because you tried to map each entity to a different table. \r\n\r\nTo do so you have to use the **@Inheritance(strategy = InheritanceType.JOINED)** annotation on the PoliceMan class.\r\n\r\n Also you should use the **@PrimaryKeyJoinColumn(referencedColumnName = &quot;person_id&quot;)** annotation on the PoliceMan class. This indicates that the PK of the PoliceMan entity is person_id and it has a foreign key constraint to the PK of the Person. **Remove the policeId field**. With the annotations above you already have the **person_id** column in both of your tables (you don&#39;t have to declare an id in your PoliceMan class).\r\n\r\nSo if you do it manually on SQL side you have to create a person_id primary key column in PERSON table and also in POLICE_MAN table, and you should have a foreign key in POLICE_MAN table on person_id column that references the person_id column of the PERSON table.\r\n\r\n\r\n","title":"Java Hibernate INHERITANCE","body":"<p>You missed the Inheritance mapping. Just extending the Person class is not a JPA inheritance. By looking at your code I suppose that you wanted to make a joined table inheritance, because you tried to map each entity to a different table.</p>\n<p>To do so you have to use the <strong>@Inheritance(strategy = InheritanceType.JOINED)</strong> annotation on the PoliceMan class.</p>\n<p>Also you should use the <strong>@PrimaryKeyJoinColumn(referencedColumnName = &quot;person_id&quot;)</strong> annotation on the PoliceMan class. This indicates that the PK of the PoliceMan entity is person_id and it has a foreign key constraint to the PK of the Person. <strong>Remove the policeId field</strong>. With the annotations above you already have the <strong>person_id</strong> column in both of your tables (you don't have to declare an id in your PoliceMan class).</p>\n<p>So if you do it manually on SQL side you have to create a person_id primary key column in PERSON table and also in POLICE_MAN table, and you should have a foreign key in POLICE_MAN table on person_id column that references the person_id column of the PERSON table.</p>\n"},{"tags":[],"owner":{"account_id":27512948,"reputation":71,"user_id":20994494,"display_name":"Amentos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674750164,"creation_date":1674750164,"answer_id":75248894,"question_id":75100996,"body_markdown":"&quot;It might be more accurate to associate it with a foreign key. You can establish a One To One relationship between Person and PoliceMan.&quot;\r\n\r\n&quot;our table structure doesn&#39;t show a FK from police-&gt;person. Nothing stops you from having a police_id attribute within your entity, it just can&#39;t be marked as THE id. You can have any number of unique identifiers within entities and tables - just mark the column with a uniqueness constraint. Plus one on this shouldn&#39;t be using inheritance despite that though. An officer (PoliceMan) is a role, not a defining characteristic of a person, and you&#39;ll have issues maintaining their existence as a person if it isn&#39;t separated out, just as you apparently are for the table data.&quot;\r\n\r\n\r\n\r\nThanks you all have right.","title":"Java Hibernate INHERITANCE","body":"<p>&quot;It might be more accurate to associate it with a foreign key. You can establish a One To One relationship between Person and PoliceMan.&quot;</p>\n<p>&quot;our table structure doesn't show a FK from police-&gt;person. Nothing stops you from having a police_id attribute within your entity, it just can't be marked as THE id. You can have any number of unique identifiers within entities and tables - just mark the column with a uniqueness constraint. Plus one on this shouldn't be using inheritance despite that though. An officer (PoliceMan) is a role, not a defining characteristic of a person, and you'll have issues maintaining their existence as a person if it isn't separated out, just as you apparently are for the table data.&quot;</p>\n<p>Thanks you all have right.</p>\n"}],"owner":{"account_id":27512948,"reputation":71,"user_id":20994494,"display_name":"Amentos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75248894,"answer_count":2,"score":0,"last_activity_date":1674750164,"creation_date":1673549206,"question_id":75100996,"body_markdown":"Here is a basic drawing for my problem.\r\n\r\n[![Description of my problem](https://i.stack.imgur.com/jqLsH.png)](https://i.stack.imgur.com/jqLsH.png)\r\n\r\nSo I have a Person class.\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;PERSON&quot;)\r\npublic class Person {\r\n    @Id\r\n    @Column(name = &quot;person_id&quot;)\r\n    @SequenceGenerator(sequenceName = &quot;PERSON_ID_SEQ&quot;, allocationSize = 1, name=&quot;PERSON_ID_SEQ&quot;)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;PERSON_ID_SEQ&quot;)\r\n    private Long personId;\r\n    \r\n    private String name;\r\n}\r\n```\r\n\r\nand for example a Police class that is inherited from a Person.\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;POLICE_MAN&quot;)\r\npublic class PoliceMan extends Person{\r\n    @Id\r\n    @Column(name = &quot;police_id&quot;)\r\n    private Long policeId;\r\n    \r\n    private String something;\r\n}\r\n```\r\nSo the problem is, I can&#39;t use @Id annotation in PoliceMan because I have one in the Person class. How could I solve that? How can a police_id be an uniqu identifier?\r\n\r\nThanks for help.\r\n\r\n\r\nhttps://www.baeldung.com/hibernate-inheritance\r\n\r\nI tried something from that page, but ... ","title":"Java Hibernate INHERITANCE","body":"<p>Here is a basic drawing for my problem.</p>\n<p><a href=\"https://i.stack.imgur.com/jqLsH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jqLsH.png\" alt=\"Description of my problem\" /></a></p>\n<p>So I have a Person class.</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;PERSON&quot;)\npublic class Person {\n    @Id\n    @Column(name = &quot;person_id&quot;)\n    @SequenceGenerator(sequenceName = &quot;PERSON_ID_SEQ&quot;, allocationSize = 1, name=&quot;PERSON_ID_SEQ&quot;)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;PERSON_ID_SEQ&quot;)\n    private Long personId;\n    \n    private String name;\n}\n</code></pre>\n<p>and for example a Police class that is inherited from a Person.</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;POLICE_MAN&quot;)\npublic class PoliceMan extends Person{\n    @Id\n    @Column(name = &quot;police_id&quot;)\n    private Long policeId;\n    \n    private String something;\n}\n</code></pre>\n<p>So the problem is, I can't use @Id annotation in PoliceMan because I have one in the Person class. How could I solve that? How can a police_id be an uniqu identifier?</p>\n<p>Thanks for help.</p>\n<p><a href=\"https://www.baeldung.com/hibernate-inheritance\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-inheritance</a></p>\n<p>I tried something from that page, but ...</p>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":1313740,"reputation":2571,"user_id":1261162,"accept_rate":60,"display_name":"Rafael"},"score":0,"creation_date":1682420730,"post_id":75248892,"comment_id":134208972,"body_markdown":"I am working in something similar and still not tested my code, but it seems you can pass a Query object to `UpdateQuery.builder` ... in fact it is called updateByQuery because you want to use a query to get the set of docs to apply the script. If you don&#39;t want that then probably you should try a different approach instead of updatebyQuery","body":"I am working in something similar and still not tested my code, but it seems you can pass a Query object to <code>UpdateQuery.builder</code> ... in fact it is called updateByQuery because you want to use a query to get the set of docs to apply the script. If you don&#39;t want that then probably you should try a different approach instead of updatebyQuery"}],"owner":{"account_id":20410879,"reputation":31,"user_id":14974303,"display_name":"Barbara"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674750158,"creation_date":1674750158,"question_id":75248892,"body_markdown":"I want to remove a certain value from a list in every document that contains that value in that list. I tried using Update Query but it&#39;s not working, the UpdateQuery.builder() requires an id of the object I want to update.\r\n\r\n```\r\n  private final ElasticsearchRestTemplate restTemplate;\r\n\r\n  public void removeValueFromListInObjects(String listName, String value, Class&lt;?&gt; clazz) {\r\n    Map&lt;String, Object&gt; parameters = Collections.singletonMap(&quot;value&quot;, value);\r\n    String script =\r\n        &quot;if(ctx._source.&quot; + listName + &quot;.contains(params.value)) ctx._source.&quot; + listName + &quot;.remove(ctx._source.&quot;\r\n            + listName + &quot;.indexOf(params.value));&quot;;\r\n    updateAllByQuery(script, parameters, clazz);\r\n  }\r\n\r\n  private void updateAllByQuery(String script, Map&lt;String, Object&gt; parameters, Class&lt;?&gt; clazz) {\r\n    IndexCoordinates index = restTemplate.getIndexCoordinatesFor(clazz);\r\n    final UpdateQuery updateQuery = UpdateQuery.builder(&quot;&quot;)\r\n        .withScriptType(ScriptType.INLINE)\r\n        .withScript(script)\r\n        .withParams(parameters)\r\n        .build();\r\n    restTemplate.update(updateQuery, index);\r\n  }\r\n```\r\n\r\nIs there a workaround or am I completely off trying to use UpdateQuery here?","title":"How to run Elasticsearch updateQuery in Java without passing object id to UpdateQuery.builder()?","body":"<p>I want to remove a certain value from a list in every document that contains that value in that list. I tried using Update Query but it's not working, the UpdateQuery.builder() requires an id of the object I want to update.</p>\n<pre><code>  private final ElasticsearchRestTemplate restTemplate;\n\n  public void removeValueFromListInObjects(String listName, String value, Class&lt;?&gt; clazz) {\n    Map&lt;String, Object&gt; parameters = Collections.singletonMap(&quot;value&quot;, value);\n    String script =\n        &quot;if(ctx._source.&quot; + listName + &quot;.contains(params.value)) ctx._source.&quot; + listName + &quot;.remove(ctx._source.&quot;\n            + listName + &quot;.indexOf(params.value));&quot;;\n    updateAllByQuery(script, parameters, clazz);\n  }\n\n  private void updateAllByQuery(String script, Map&lt;String, Object&gt; parameters, Class&lt;?&gt; clazz) {\n    IndexCoordinates index = restTemplate.getIndexCoordinatesFor(clazz);\n    final UpdateQuery updateQuery = UpdateQuery.builder(&quot;&quot;)\n        .withScriptType(ScriptType.INLINE)\n        .withScript(script)\n        .withParams(parameters)\n        .build();\n    restTemplate.update(updateQuery, index);\n  }\n</code></pre>\n<p>Is there a workaround or am I completely off trying to use UpdateQuery here?</p>\n"},{"tags":["java","spring","spring-boot","websocket","spring-websocket"],"owner":{"account_id":15525089,"reputation":99,"user_id":11200149,"display_name":"NoobSailboat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674750085,"creation_date":1674680238,"question_id":75239777,"body_markdown":"I followed the https://spring.io/guides/gs/messaging-stomp-websocket/ and added a few modifications (mainly Spring Security Auth and dynamic topics(Rooms)). \r\n\r\nMy goal was to broadcast a **JOIN** message to all users except the one *joining*. I originally came from Socket.IO and there is a simple method that does this but in spring there doesn&#39;t seem to be one so I just used the `SimpUserRegistry`, to get a list of users, then removed the user joining the topic, and `simpMessagingTemplate.convertAndSendToUser` to send the message to the rest of the users.\r\n\r\n    // Socket.IO: sending to all clients except sender (Can&#39;t find if Spring has something like this.)\r\n    // My Spring Solution seems janky compared to this.\r\n    socket.broadcast.emit(&#39;message&#39;, &quot;this is a test&quot;);\r\nBut to even send messages directly to users already subscribed to a topic I need to have the client subscribe twice:\r\n\r\n        // Client-Side JS\r\n        // public/general\r\n        stompClient.subscribe(`/topic/${roomId}`, (message) =&gt; {...}\r\n        // private/direct user message\r\n        stompClient.subscribe(`/user/topic/${roomId}`, (message) =&gt; {...}\r\n\r\nIs my solution as janky as I think it is or is there a correct/better way that Spring already provides similar to the socket.io way?\r\n\r\nWebSocket Configuration file just in case:\r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n    \t\r\n    \t@Override\r\n    \tpublic void configureMessageBroker(MessageBrokerRegistry config) {\r\n    \t\tconfig.enableSimpleBroker(&quot;/topic&quot;); \r\n    \t\tconfig.setApplicationDestinationPrefixes(&quot;/app&quot;); \r\n    \t\tconfig.setUserDestinationPrefix(&quot;/user&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void registerStompEndpoints(StompEndpointRegistry registry) {\r\n    \t\tregistry.addEndpoint(&quot;/fallback-websocket&quot;).withSockJS();\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Spring WebSocket: Public &amp; Private(User specific) messaging using the same subscription","body":"<p>I followed the <a href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/messaging-stomp-websocket/</a> and added a few modifications (mainly Spring Security Auth and dynamic topics(Rooms)).</p>\n<p>My goal was to broadcast a <strong>JOIN</strong> message to all users except the one <em>joining</em>. I originally came from Socket.IO and there is a simple method that does this but in spring there doesn't seem to be one so I just used the <code>SimpUserRegistry</code>, to get a list of users, then removed the user joining the topic, and <code>simpMessagingTemplate.convertAndSendToUser</code> to send the message to the rest of the users.</p>\n<pre><code>// Socket.IO: sending to all clients except sender (Can't find if Spring has something like this.)\n// My Spring Solution seems janky compared to this.\nsocket.broadcast.emit('message', &quot;this is a test&quot;);\n</code></pre>\n<p>But to even send messages directly to users already subscribed to a topic I need to have the client subscribe twice:</p>\n<pre><code>    // Client-Side JS\n    // public/general\n    stompClient.subscribe(`/topic/${roomId}`, (message) =&gt; {...}\n    // private/direct user message\n    stompClient.subscribe(`/user/topic/${roomId}`, (message) =&gt; {...}\n</code></pre>\n<p>Is my solution as janky as I think it is or is there a correct/better way that Spring already provides similar to the socket.io way?</p>\n<p>WebSocket Configuration file just in case:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n    \n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry config) {\n        config.enableSimpleBroker(&quot;/topic&quot;); \n        config.setApplicationDestinationPrefixes(&quot;/app&quot;); \n        config.setUserDestinationPrefix(&quot;/user&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/fallback-websocket&quot;).withSockJS();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","ssl","apache-kafka","sasl"],"answers":[{"tags":[],"owner":{"account_id":18562970,"reputation":392,"user_id":13526580,"display_name":"Jessica Vasey"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674722426,"creation_date":1674722426,"answer_id":75243795,"question_id":75243265,"body_markdown":"SASL_SSL used TLS encryption like SSL so you will need to create a certificate, and with SASL_SSL you need to specify an authentication method. \r\n\r\nThis page should help you https://developer.confluent.io/learn-kafka/security/authentication-ssl-and-sasl-ssl/\r\n\r\nSASL_PLAINTEXT doesn&#39;t use TLS encryption (SASL_PLAIN does and this uses the username/password authentication). \r\n\r\nIt really all depends on your security requirements. SASL_SSL is mainly used when integrating with a existing authentication server but this increases your vulnerability to attacks. ","title":"Do we need Certificate for Kafka SASL_SSL?","body":"<p>SASL_SSL used TLS encryption like SSL so you will need to create a certificate, and with SASL_SSL you need to specify an authentication method.</p>\n<p>This page should help you <a href=\"https://developer.confluent.io/learn-kafka/security/authentication-ssl-and-sasl-ssl/\" rel=\"nofollow noreferrer\">https://developer.confluent.io/learn-kafka/security/authentication-ssl-and-sasl-ssl/</a></p>\n<p>SASL_PLAINTEXT doesn't use TLS encryption (SASL_PLAIN does and this uses the username/password authentication).</p>\n<p>It really all depends on your security requirements. SASL_SSL is mainly used when integrating with a existing authentication server but this increases your vulnerability to attacks.</p>\n"}],"owner":{"account_id":8898928,"reputation":419,"user_id":6642944,"accept_rate":43,"display_name":"Thomson Mathew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75243795,"answer_count":1,"score":1,"last_activity_date":1674749608,"creation_date":1674718796,"question_id":75243265,"body_markdown":"I am confused on SASL_SSL. Do we need SSL certificate configured for the Kafka producer application ? Or is it just the username and password ? What is the difference between SASL_SSL and SASL_PLAINTEXT ? I am sending message from a plain java application to a topic.","title":"Do we need Certificate for Kafka SASL_SSL?","body":"<p>I am confused on SASL_SSL. Do we need SSL certificate configured for the Kafka producer application ? Or is it just the username and password ? What is the difference between SASL_SSL and SASL_PLAINTEXT ? I am sending message from a plain java application to a topic.</p>\n"},{"tags":["java","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":19112276,"reputation":777,"user_id":13958041,"display_name":"Rishabh Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674749530,"creation_date":1674749530,"answer_id":75248766,"question_id":75154758,"body_markdown":"As per the [documentation][1]:\r\n\r\n\r\n&gt; Note that this method will raise TimeoutException if the transaction\r\n&gt; cannot be committed before expiration of max.block.ms. Additionally,\r\n&gt; it will raise InterruptException if interrupted. It is safe to retry\r\n&gt; in either case, but it is not possible to attempt a different\r\n&gt; operation (such as abortTransaction) since the commit may already be\r\n&gt; in the progress of completing. If not retrying, the only option is to\r\n&gt; close the producer.\r\n\r\nThe problem here is that the kafka producer has timed out and it does not know whether the kafka broker will complete the transaction or not. So it cannot provide you abort transaction functionality as there is a chance that the transaction might have been committed by the broker even after the producer times out.\r\n\r\nYou should configure your kafka producer with a sufficiently large `max.block.ms` and good number of `retries` to handle such scenarios (Not sure why you have configured your retries to 1). Ideally you should be timing out very rarely - like when there is some issue in the network or there is some actual issue going on in kafka brokers.\r\n\r\nIn such scenarios, it won&#39;t be possible for you to know if your last transaction was actually successful or not. You cannot do anything but close your kafka producer and create a new one.\r\n\r\n\r\n  [1]: https://kafka.apache.org/23/javadoc/org/apache/kafka/clients/producer/KafkaProducer.html#commitTransaction--","title":"Kafka transaction commit timeout exception handling","body":"<p>As per the <a href=\"https://kafka.apache.org/23/javadoc/org/apache/kafka/clients/producer/KafkaProducer.html#commitTransaction--\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>Note that this method will raise TimeoutException if the transaction\ncannot be committed before expiration of max.block.ms. Additionally,\nit will raise InterruptException if interrupted. It is safe to retry\nin either case, but it is not possible to attempt a different\noperation (such as abortTransaction) since the commit may already be\nin the progress of completing. If not retrying, the only option is to\nclose the producer.</p>\n</blockquote>\n<p>The problem here is that the kafka producer has timed out and it does not know whether the kafka broker will complete the transaction or not. So it cannot provide you abort transaction functionality as there is a chance that the transaction might have been committed by the broker even after the producer times out.</p>\n<p>You should configure your kafka producer with a sufficiently large <code>max.block.ms</code> and good number of <code>retries</code> to handle such scenarios (Not sure why you have configured your retries to 1). Ideally you should be timing out very rarely - like when there is some issue in the network or there is some actual issue going on in kafka brokers.</p>\n<p>In such scenarios, it won't be possible for you to know if your last transaction was actually successful or not. You cannot do anything but close your kafka producer and create a new one.</p>\n"}],"owner":{"account_id":16025247,"reputation":1,"user_id":11565660,"display_name":"pooja Mamidwar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":526,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674749530,"creation_date":1674016856,"question_id":75154758,"body_markdown":"I am running kafka transactions on a large scale and below is the codepiece.\r\n\r\n    producer.initTransaction();\r\n    try {\r\n        producer.beginTransaction();\r\n        producer.send(new ProducerRecord&lt;&gt;(producerTopic, element));\r\n        producer.commitTransaction();\r\n    } catch (ProducerFencedException | OutOfOrderSequenceException | AuthorizationException e) {\r\n        producer.close();\r\n        canSendNext = false;\r\n    }catch (KafkaException e) {\r\n        producer.abortTransaction();\r\n    }\r\n\r\n\r\nproperties used:\r\n&gt; ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, STRING_SERIALIZER\r\n&gt; ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, BYTE_ARRAY_SERIALIZER\r\n&gt; ProducerConfig.TRANSACTIONAL_ID_CONFIG, UUID.randomUUID().toString()\r\n&gt; bootstrap.servers=localhost:9092\r\n&gt; acks=all\r\n&gt; retries=1\r\n&gt; partitioner.class=org.apache.kafka.clients.producer.RoundRobinPartitioner\r\n\r\n        \r\nwhile the commitTransaction is timing out the catch block of KafkaException runs and try to abort the transaction.\r\nWhich fails with the error: **\r\nCannot attempt operation `abortTransaction` because the previous call to `commitTransaction` timed out and must be retried**\r\n\r\nhow to handle commit transaction timeout scenario\r\n\r\nexpecting the code to work","title":"Kafka transaction commit timeout exception handling","body":"<p>I am running kafka transactions on a large scale and below is the codepiece.</p>\n<pre><code>producer.initTransaction();\ntry {\n    producer.beginTransaction();\n    producer.send(new ProducerRecord&lt;&gt;(producerTopic, element));\n    producer.commitTransaction();\n} catch (ProducerFencedException | OutOfOrderSequenceException | AuthorizationException e) {\n    producer.close();\n    canSendNext = false;\n}catch (KafkaException e) {\n    producer.abortTransaction();\n}\n</code></pre>\n<p>properties used:</p>\n<blockquote>\n<p>ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, STRING_SERIALIZER\nProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, BYTE_ARRAY_SERIALIZER\nProducerConfig.TRANSACTIONAL_ID_CONFIG, UUID.randomUUID().toString()\nbootstrap.servers=localhost:9092\nacks=all\nretries=1\npartitioner.class=org.apache.kafka.clients.producer.RoundRobinPartitioner</p>\n</blockquote>\n<p>while the commitTransaction is timing out the catch block of KafkaException runs and try to abort the transaction.\nWhich fails with the error: **\nCannot attempt operation <code>abortTransaction</code> because the previous call to <code>commitTransaction</code> timed out and must be retried**</p>\n<p>how to handle commit transaction timeout scenario</p>\n<p>expecting the code to work</p>\n"},{"tags":["java","file","file-upload","upload","submit"],"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1481754988,"post_id":41153410,"comment_id":69508780,"body_markdown":"What does &quot;no real personal help&quot; mean?","body":"What does &quot;no real personal help&quot; mean?"},{"owner":{"display_name":"user7298925"},"score":0,"creation_date":1481755389,"post_id":41153410,"comment_id":69508939,"body_markdown":"@chrylis I appreciate the question, I just mean that it should be able to run by itself by one click. The user should not have to click multiple things to upload one file, just one click and the app would do the rest.","body":"@chrylis I appreciate the question, I just mean that it should be able to run by itself by one click. The user should not have to click multiple things to upload one file, just one click and the app would do the rest."},{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1481755504,"post_id":41153410,"comment_id":69508983,"body_markdown":"Are you writing the backend as well?","body":"Are you writing the backend as well?"},{"owner":{"display_name":"user7298925"},"score":0,"creation_date":1481756429,"post_id":41153410,"comment_id":69509337,"body_markdown":"@chrylis If you mean the website, form and submit (PHP) then yes.","body":"@chrylis If you mean the website, form and submit (PHP) then yes."}],"answers":[{"comments":[{"owner":{"display_name":"user7298925"},"score":0,"creation_date":1481760049,"post_id":41154121,"comment_id":69510436,"body_markdown":"I appreciate the feedback, I actually did not know the commons.apache package had file upload packages.","body":"I appreciate the feedback, I actually did not know the commons.apache package had file upload packages."}],"tags":[],"owner":{"account_id":9853597,"reputation":21,"user_id":7298878,"display_name":"R. Salame"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481758901,"creation_date":1481758901,"answer_id":41154121,"question_id":41153410,"body_markdown":"This link might be useful to you:\r\nhttp://commons.apache.org/proper/commons-fileupload/ \r\n\r\nThe Commons FileUpload package makes it easy to add robust, high-performance, file upload capability to your servlets and web applications.","title":"Upload file to a website using Java","body":"<p>This link might be useful to you:\n<a href=\"http://commons.apache.org/proper/commons-fileupload/\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-fileupload/</a> </p>\n\n<p>The Commons FileUpload package makes it easy to add robust, high-performance, file upload capability to your servlets and web applications.</p>\n"},{"comments":[{"owner":{"display_name":"user7298925"},"score":1,"creation_date":1481759969,"post_id":41154134,"comment_id":69510415,"body_markdown":"I really appreciate the feedback, I will try it out and see if it works and get back.","body":"I really appreciate the feedback, I will try it out and see if it works and get back."},{"owner":{"account_id":4526333,"reputation":1103,"user_id":3678023,"accept_rate":86,"display_name":"Aaron Esau"},"score":0,"creation_date":1481760141,"post_id":41154134,"comment_id":69510460,"body_markdown":"@fkrottenkirk Sure! Ah, my fault! I just realized I set it `void`, but it should return a String. Updated the answer.","body":"@fkrottenkirk Sure! Ah, my fault! I just realized I set it <code>void</code>, but it should return a String. Updated the answer."},{"owner":{"display_name":"user7298925"},"score":0,"creation_date":1481761414,"post_id":41154134,"comment_id":69510833,"body_markdown":"I have imported the package and code, when declaring url, parameter and file I should just do it outside of the function or how? Also a great part of the code has stripes over it.","body":"I have imported the package and code, when declaring url, parameter and file I should just do it outside of the function or how? Also a great part of the code has stripes over it."},{"owner":{"account_id":4526333,"reputation":1103,"user_id":3678023,"accept_rate":86,"display_name":"Aaron Esau"},"score":0,"creation_date":1481762979,"post_id":41154134,"comment_id":69511217,"body_markdown":"@fkrottenkirk Ok. So now, to upload a file, you run `uploadFile(&quot;http://example.com/uploadfile.php&quot;, &quot;file&quot;, file)` and change the fields to match your needs. The parameter is the POST parameter the contains the file. I don&#39;t know what your application set it to, though. I don&#39;t know about the green stripes, but here&#39;s the function (on another source in hope to evade the green thing) https://gist.github.com/Arinerron/1fc812f62d4679c70eae85682ff4607d","body":"@fkrottenkirk Ok. So now, to upload a file, you run <code>uploadFile(&quot;http:&#47;&#47;example.com&#47;uploadfile.php&quot;, &quot;file&quot;, file)</code> and change the fields to match your needs. The parameter is the POST parameter the contains the file. I don&#39;t know what your application set it to, though. I don&#39;t know about the green stripes, but here&#39;s the function (on another source in hope to evade the green thing) <a href=\"https://gist.github.com/Arinerron/1fc812f62d4679c70eae85682ff4607d\" rel=\"nofollow noreferrer\">gist.github.com/Arinerron/1fc812f62d4679c70eae85682ff4607d</a>"},{"owner":{"display_name":"user7298925"},"score":1,"creation_date":1481773750,"post_id":41154134,"comment_id":69513964,"body_markdown":"okay so currently my code looks like in this link http://pastebin.com/85Fw0Gtn I have commented out where the errors are and what they are.","body":"okay so currently my code looks like in this link <a href=\"http://pastebin.com/85Fw0Gtn\" rel=\"nofollow noreferrer\">pastebin.com/85Fw0Gtn</a> I have commented out where the errors are and what they are."}],"tags":[],"owner":{"account_id":4526333,"reputation":1103,"user_id":3678023,"accept_rate":86,"display_name":"Aaron Esau"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481760054,"creation_date":1481758962,"answer_id":41154134,"question_id":41153410,"body_markdown":"This can be accomplished more easily by using [Apache HttpComponents][1]. I&#39;d advise using it, because Java&#39;s http client is not very good. If you don&#39;t want to use a 3rd party library, you can find a more complicated and less robust version [on this post][2]. Here&#39;s a sample using Apache HttpComponents:\r\n\r\n    public String uploadFile(String url, String paramater, File file)\r\n        HttpClient httpclient = new DefaultHttpClient();\r\n        httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);\r\n        HttpPost httppost = new HttpPost(url);\r\n        MultipartEntity mpEntity = new MultipartEntity();\r\n        ContentBody cbFile = new FileBody(file, &quot;image/jpeg&quot;);\r\n        mpEntity.addPart(parameter, cbFile);\r\n        httppost.setEntity(mpEntity);\r\n        HttpResponse response = httpclient.execute(httppost);\r\n        HttpEntity resEntity = response.getEntity();\r\n        String response = response.getStatusLine();\r\n        httpclient.getConnectionManager().shutdown();\r\n        return response;\r\n    }\r\n\r\nWhere `String url` is the URL to upload the file to, `String parameter` is the parameter name for the http post request, and `File file` is the file to upload.\r\n\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/\r\n  [2]: https://stackoverflow.com/questions/2469451/upload-files-from-java-client-to-a-http-server","title":"Upload file to a website using Java","body":"<p>This can be accomplished more easily by using <a href=\"http://hc.apache.org/httpcomponents-client-ga/\" rel=\"nofollow noreferrer\">Apache HttpComponents</a>. I'd advise using it, because Java's http client is not very good. If you don't want to use a 3rd party library, you can find a more complicated and less robust version <a href=\"https://stackoverflow.com/questions/2469451/upload-files-from-java-client-to-a-http-server\">on this post</a>. Here's a sample using Apache HttpComponents:</p>\n\n<pre><code>public String uploadFile(String url, String paramater, File file)\n    HttpClient httpclient = new DefaultHttpClient();\n    httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);\n    HttpPost httppost = new HttpPost(url);\n    MultipartEntity mpEntity = new MultipartEntity();\n    ContentBody cbFile = new FileBody(file, \"image/jpeg\");\n    mpEntity.addPart(parameter, cbFile);\n    httppost.setEntity(mpEntity);\n    HttpResponse response = httpclient.execute(httppost);\n    HttpEntity resEntity = response.getEntity();\n    String response = response.getStatusLine();\n    httpclient.getConnectionManager().shutdown();\n    return response;\n}\n</code></pre>\n\n<p>Where <code>String url</code> is the URL to upload the file to, <code>String parameter</code> is the parameter name for the http post request, and <code>File file</code> is the file to upload.</p>\n"},{"comments":[{"owner":{"display_name":"user7298925"},"score":0,"creation_date":1481771339,"post_id":41154987,"comment_id":69513368,"body_markdown":"I really appreciate the answer, there are quite a load of things going on. I can see you have added where I have to change, the URL and the file, but shouldn&#39;t there also be a place where I enter what the form or file upload field is called?","body":"I really appreciate the answer, there are quite a load of things going on. I can see you have added where I have to change, the URL and the file, but shouldn&#39;t there also be a place where I enter what the form or file upload field is called?"},{"owner":{"account_id":2029577,"reputation":1180,"user_id":1813682,"accept_rate":50,"display_name":"toto"},"score":0,"creation_date":1481775676,"post_id":41154987,"comment_id":69514398,"body_markdown":"yes. you can use the mehod example:  addVariable(&quot;key&quot;, &quot;value&quot;) example for this example  upload.addVariable(&quot;var1&quot;, &quot;hello&quot;);","body":"yes. you can use the mehod example:  addVariable(&quot;key&quot;, &quot;value&quot;) example for this example  upload.addVariable(&quot;var1&quot;, &quot;hello&quot;);"}],"tags":[],"owner":{"account_id":2029577,"reputation":1180,"user_id":1813682,"accept_rate":50,"display_name":"toto"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481775749,"creation_date":1481765397,"answer_id":41154987,"question_id":41153410,"body_markdown":"Try it: \r\nSTEP1: created and interface for events.\r\n\r\n    public interface IHTTPMultipart {\r\n    \r\n        public void OnFileUploading(String fileName, long uploading, long filesize, float porcent);\r\n    \r\n        public void OnFileUploaded(String fileName);\r\n        \r\n        public void OnAllFilesUploaded();\r\n    \r\n        public void OnDataReceived(byte[] content);\r\n    \r\n        public void OnError(int codeError);\r\n    \r\n        public void OnDownloadingData(long received, long max, float porcent);\r\n    }\r\n\r\nStep 2: Created a class uploader a files that implements IHTTPMultipart\r\n\r\n    import java.io.BufferedInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.OutputStream;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    import java.util.HashMap;\r\n    import java.util.Iterator;\r\n    import java.util.Map;\r\n    \r\n    /**\r\n     *\r\n     * @author Owner\r\n     */\r\n    public class HTTPMultipart implements Runnable {\r\n    \r\n        private final String boundary = &quot;===&quot; + System.currentTimeMillis() + &quot;===&quot;;\r\n        private static final String LINE_FEED = &quot;\\r\\n&quot;;\r\n        private HttpURLConnection httpConn;\r\n        private String charset = &quot;uft-8&quot;;\r\n        private final HashMap&lt;String, String&gt; variables = new HashMap&lt;String, String&gt;();\r\n        private final HashMap&lt;String, File&gt; files = new HashMap&lt;String, File&gt;();\r\n        private final String url;\r\n        private Thread th1 = null;\r\n        private IHTTPMultipart event = null;\r\n        private int buffer = 4096;\r\n        private int responseCode = -1;\r\n        private byte[] responseData = null;\r\n        private int timeOut = 120000;\r\n    \r\n        HTTPMultipart(String url) {\r\n            this.url = url;\r\n        }\r\n    \r\n        public void setEvent(IHTTPMultipart event) {\r\n            this.event = event;\r\n        }\r\n    \r\n        public void setBuffer(int buffer) {\r\n            this.buffer = buffer;\r\n        }\r\n    \r\n        public void setEncode(String enc) {\r\n            this.charset = enc;\r\n        }\r\n    \r\n        public void addVariable(String key, String value) {\r\n            if (!variables.containsKey(key)) {\r\n                variables.put(key, value);\r\n            }\r\n        }\r\n    \r\n        public void addFile(String key, File file) {\r\n            if (!files.containsKey(key)) {\r\n                files.put(key, file);\r\n            }\r\n        }\r\n    \r\n        public void addFile(String key, String file) {\r\n            if (!files.containsKey(key)) {\r\n                files.put(key, new File(file));\r\n            }\r\n        }\r\n    \r\n        public void setTimeOut(int timeOut) {\r\n            this.timeOut = timeOut;\r\n        }\r\n    \r\n        public int getResponseCode() {\r\n            return this.responseCode;\r\n        }\r\n    \r\n        public byte[] getResponseData() {\r\n            return this.responseData;\r\n        }\r\n    \r\n        public void send() {\r\n            th1 = new Thread(this);\r\n            th1.start();\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            try {\r\n    \r\n                URL url1 = new URL(this.url);\r\n                httpConn = (HttpURLConnection) url1.openConnection();\r\n                httpConn.setUseCaches(false);\r\n                httpConn.setDoOutput(true); // indicates POST method\r\n                httpConn.setDoInput(true);\r\n                if (this.timeOut&gt;0){\r\n                httpConn.setConnectTimeout(this.timeOut);\r\n                }\r\n                httpConn.setRequestProperty(&quot;Content-Type&quot;,\r\n                        &quot;multipart/form-data; boundary=&quot; + boundary);\r\n                \r\n    \r\n                StringBuilder str = new StringBuilder();\r\n                //Read all variables.\r\n                Iterator it = this.variables.entrySet().iterator();\r\n    \r\n                while (it.hasNext()) {\r\n                    Map.Entry pairs = (Map.Entry) it.next();\r\n                    str.append(&quot;--&quot;).append(boundary).append(LINE_FEED);\r\n                    str.append(&quot;Content-Disposition: form-data; name=\\&quot;&quot;).append(String.valueOf(pairs.getKey())).append(&quot;\\&quot;&quot;)\r\n                            .append(LINE_FEED);\r\n                    str.append(&quot;Content-Type: text/plain; charset=&quot;).append(charset).append(\r\n                            LINE_FEED);\r\n                    str.append(LINE_FEED);\r\n                    str.append(String.valueOf(pairs.getValue())).append(LINE_FEED);\r\n                }\r\n    \r\n                \r\n                OutputStream os = httpConn.getOutputStream();\r\n                os.write(str.toString().getBytes());\r\n    \r\n              \r\n                it = this.files.entrySet().iterator();\r\n    \r\n                while (it.hasNext()) {\r\n                    str = new StringBuilder();\r\n                    Map.Entry pairs = (Map.Entry) it.next();\r\n                    File file = (File) pairs.getValue();\r\n                    String fieldName = String.valueOf(pairs.getKey());\r\n    \r\n                    String fileName = file.getName();\r\n                    str.append(&quot;--&quot;).append(boundary).append(LINE_FEED);\r\n                    str.append(&quot;Content-Disposition: form-data; name=\\&quot;&quot;).append(fieldName).append(&quot;\\&quot;; filename=\\&quot;&quot;).append(fileName).append(&quot;\\&quot;&quot;)\r\n                            .append(LINE_FEED);\r\n                    str.append(&quot;Content-Type: &quot;).append(URLConnection.guessContentTypeFromName(fileName))\r\n                            .append(LINE_FEED);\r\n                    str.append(&quot;Content-Transfer-Encoding: binary&quot;).append(LINE_FEED);\r\n                    str.append(LINE_FEED);\r\n                    \r\n    \r\n                    os.write(str.toString().getBytes());\r\n    \r\n                    FileInputStream inputStream = new FileInputStream(file);\r\n    \r\n                    byte[] buff = new byte[buffer];\r\n                    int bytesRead;\r\n                    long fileSize = file.length();\r\n                    long uploading = 0;\r\n                    while ((bytesRead = inputStream.read(buff)) != -1) {\r\n                        os.write(buff, 0, bytesRead);\r\n                        uploading += bytesRead;\r\n                        if (event != null) {\r\n                            float porcent = (uploading * 100) / fileSize;\r\n                            event.OnFileUploading(fileName, uploading, fileSize, porcent);\r\n                        }\r\n                    }\r\n                    inputStream.close();\r\n                    if (event != null) {\r\n                        event.OnFileUploading(fileName, fileSize, fileSize, 100f);\r\n                        event.OnFileUploaded(fileName);\r\n                    }\r\n    \r\n                }\r\n    \r\n                try {\r\n                    os.flush();\r\n                } catch (Exception e) {\r\n                }\r\n    \r\n                os.close();\r\n    \r\n                if (event != null) {\r\n                    event.OnAllFilesUploaded();\r\n                }\r\n    \r\n                if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {\r\n    \r\n                    BufferedInputStream bis2 = new BufferedInputStream(httpConn.getInputStream());\r\n                    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n                    long maxSize = httpConn.getContentLengthLong();\r\n                    long received = 0l;\r\n                    byte[] buf = new byte[buffer];\r\n                    int bytesRead = -1;\r\n                    while ((bytesRead = bis2.read(buf)) != -1) {\r\n                        bos.write(buf, 0, bytesRead);\r\n                        received += bytesRead;\r\n                        if (event != null) {\r\n                            float porcent = (received * 100) / maxSize;\r\n                            event.OnDownloadingData(received, maxSize, porcent);\r\n                        }\r\n                    }\r\n    \r\n                    bis2.close();\r\n                    bos.close();\r\n    \r\n                    this.responseCode = 0;\r\n                    this.responseData = bos.toByteArray();\r\n    \r\n                    if (event != null) {\r\n                        this.event.OnDataReceived(this.responseData);\r\n                    }\r\n    \r\n                } else {\r\n    \r\n                    this.responseCode = 998;\r\n                    this.responseData = (httpConn.getResponseCode() + &quot;&quot;).getBytes();\r\n                    if (event != null) {\r\n                        this.event.OnError(httpConn.getResponseCode());\r\n                    }\r\n    \r\n                }\r\n    \r\n            } catch (Exception e) {\r\n                this.responseCode = 999;\r\n                this.responseData = e.getMessage().getBytes();\r\n                if (event != null) {\r\n                    event.OnError(999);\r\n                }\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nSTEP 3: TEST THE CODE.\r\n\r\n   \r\n\r\n    String url = &quot;add here your url http&quot;;\r\n    HTTPMultipart upload = new HTTPMultipart(url);\r\n    File file = new File(&quot;add here your file dir&quot;);\r\n    String variableName = &quot;myFile&quot;;\r\n    //Add one file or more files.\r\n    upload.addFile(variableName, file);\r\n    //Add variable example\r\n    upload.addVariable(&quot;var1&quot;, &quot;hello&quot;);\r\n    //Set the asyncronic events.\r\n    upload.setEvent(new Net.HTTP.IHTTPMultipart() {\r\n        @Override\r\n        public void OnFileUploading(String fileName, long uploading, long filesize, float porcent) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void OnFileUploaded(String fileName) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void OnAllFilesUploaded() {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void OnDataReceived(byte[] content) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void OnError(int codeError) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void OnDownloadingData(long received, long max, float porcent) {\r\n\r\n        }\r\n    });\r\n    upload.send();\r\n\r\n","title":"Upload file to a website using Java","body":"<p>Try it: \nSTEP1: created and interface for events.</p>\n\n<pre><code>public interface IHTTPMultipart {\n\n    public void OnFileUploading(String fileName, long uploading, long filesize, float porcent);\n\n    public void OnFileUploaded(String fileName);\n\n    public void OnAllFilesUploaded();\n\n    public void OnDataReceived(byte[] content);\n\n    public void OnError(int codeError);\n\n    public void OnDownloadingData(long received, long max, float porcent);\n}\n</code></pre>\n\n<p>Step 2: Created a class uploader a files that implements IHTTPMultipart</p>\n\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.OutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.Map;\n\n/**\n *\n * @author Owner\n */\npublic class HTTPMultipart implements Runnable {\n\n    private final String boundary = \"===\" + System.currentTimeMillis() + \"===\";\n    private static final String LINE_FEED = \"\\r\\n\";\n    private HttpURLConnection httpConn;\n    private String charset = \"uft-8\";\n    private final HashMap&lt;String, String&gt; variables = new HashMap&lt;String, String&gt;();\n    private final HashMap&lt;String, File&gt; files = new HashMap&lt;String, File&gt;();\n    private final String url;\n    private Thread th1 = null;\n    private IHTTPMultipart event = null;\n    private int buffer = 4096;\n    private int responseCode = -1;\n    private byte[] responseData = null;\n    private int timeOut = 120000;\n\n    HTTPMultipart(String url) {\n        this.url = url;\n    }\n\n    public void setEvent(IHTTPMultipart event) {\n        this.event = event;\n    }\n\n    public void setBuffer(int buffer) {\n        this.buffer = buffer;\n    }\n\n    public void setEncode(String enc) {\n        this.charset = enc;\n    }\n\n    public void addVariable(String key, String value) {\n        if (!variables.containsKey(key)) {\n            variables.put(key, value);\n        }\n    }\n\n    public void addFile(String key, File file) {\n        if (!files.containsKey(key)) {\n            files.put(key, file);\n        }\n    }\n\n    public void addFile(String key, String file) {\n        if (!files.containsKey(key)) {\n            files.put(key, new File(file));\n        }\n    }\n\n    public void setTimeOut(int timeOut) {\n        this.timeOut = timeOut;\n    }\n\n    public int getResponseCode() {\n        return this.responseCode;\n    }\n\n    public byte[] getResponseData() {\n        return this.responseData;\n    }\n\n    public void send() {\n        th1 = new Thread(this);\n        th1.start();\n    }\n\n    @Override\n    public void run() {\n        try {\n\n            URL url1 = new URL(this.url);\n            httpConn = (HttpURLConnection) url1.openConnection();\n            httpConn.setUseCaches(false);\n            httpConn.setDoOutput(true); // indicates POST method\n            httpConn.setDoInput(true);\n            if (this.timeOut&gt;0){\n            httpConn.setConnectTimeout(this.timeOut);\n            }\n            httpConn.setRequestProperty(\"Content-Type\",\n                    \"multipart/form-data; boundary=\" + boundary);\n\n\n            StringBuilder str = new StringBuilder();\n            //Read all variables.\n            Iterator it = this.variables.entrySet().iterator();\n\n            while (it.hasNext()) {\n                Map.Entry pairs = (Map.Entry) it.next();\n                str.append(\"--\").append(boundary).append(LINE_FEED);\n                str.append(\"Content-Disposition: form-data; name=\\\"\").append(String.valueOf(pairs.getKey())).append(\"\\\"\")\n                        .append(LINE_FEED);\n                str.append(\"Content-Type: text/plain; charset=\").append(charset).append(\n                        LINE_FEED);\n                str.append(LINE_FEED);\n                str.append(String.valueOf(pairs.getValue())).append(LINE_FEED);\n            }\n\n\n            OutputStream os = httpConn.getOutputStream();\n            os.write(str.toString().getBytes());\n\n\n            it = this.files.entrySet().iterator();\n\n            while (it.hasNext()) {\n                str = new StringBuilder();\n                Map.Entry pairs = (Map.Entry) it.next();\n                File file = (File) pairs.getValue();\n                String fieldName = String.valueOf(pairs.getKey());\n\n                String fileName = file.getName();\n                str.append(\"--\").append(boundary).append(LINE_FEED);\n                str.append(\"Content-Disposition: form-data; name=\\\"\").append(fieldName).append(\"\\\"; filename=\\\"\").append(fileName).append(\"\\\"\")\n                        .append(LINE_FEED);\n                str.append(\"Content-Type: \").append(URLConnection.guessContentTypeFromName(fileName))\n                        .append(LINE_FEED);\n                str.append(\"Content-Transfer-Encoding: binary\").append(LINE_FEED);\n                str.append(LINE_FEED);\n\n\n                os.write(str.toString().getBytes());\n\n                FileInputStream inputStream = new FileInputStream(file);\n\n                byte[] buff = new byte[buffer];\n                int bytesRead;\n                long fileSize = file.length();\n                long uploading = 0;\n                while ((bytesRead = inputStream.read(buff)) != -1) {\n                    os.write(buff, 0, bytesRead);\n                    uploading += bytesRead;\n                    if (event != null) {\n                        float porcent = (uploading * 100) / fileSize;\n                        event.OnFileUploading(fileName, uploading, fileSize, porcent);\n                    }\n                }\n                inputStream.close();\n                if (event != null) {\n                    event.OnFileUploading(fileName, fileSize, fileSize, 100f);\n                    event.OnFileUploaded(fileName);\n                }\n\n            }\n\n            try {\n                os.flush();\n            } catch (Exception e) {\n            }\n\n            os.close();\n\n            if (event != null) {\n                event.OnAllFilesUploaded();\n            }\n\n            if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {\n\n                BufferedInputStream bis2 = new BufferedInputStream(httpConn.getInputStream());\n                ByteArrayOutputStream bos = new ByteArrayOutputStream();\n                long maxSize = httpConn.getContentLengthLong();\n                long received = 0l;\n                byte[] buf = new byte[buffer];\n                int bytesRead = -1;\n                while ((bytesRead = bis2.read(buf)) != -1) {\n                    bos.write(buf, 0, bytesRead);\n                    received += bytesRead;\n                    if (event != null) {\n                        float porcent = (received * 100) / maxSize;\n                        event.OnDownloadingData(received, maxSize, porcent);\n                    }\n                }\n\n                bis2.close();\n                bos.close();\n\n                this.responseCode = 0;\n                this.responseData = bos.toByteArray();\n\n                if (event != null) {\n                    this.event.OnDataReceived(this.responseData);\n                }\n\n            } else {\n\n                this.responseCode = 998;\n                this.responseData = (httpConn.getResponseCode() + \"\").getBytes();\n                if (event != null) {\n                    this.event.OnError(httpConn.getResponseCode());\n                }\n\n            }\n\n        } catch (Exception e) {\n            this.responseCode = 999;\n            this.responseData = e.getMessage().getBytes();\n            if (event != null) {\n                event.OnError(999);\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>STEP 3: TEST THE CODE.</p>\n\n<pre><code>String url = \"add here your url http\";\nHTTPMultipart upload = new HTTPMultipart(url);\nFile file = new File(\"add here your file dir\");\nString variableName = \"myFile\";\n//Add one file or more files.\nupload.addFile(variableName, file);\n//Add variable example\nupload.addVariable(\"var1\", \"hello\");\n//Set the asyncronic events.\nupload.setEvent(new Net.HTTP.IHTTPMultipart() {\n    @Override\n    public void OnFileUploading(String fileName, long uploading, long filesize, float porcent) {\n\n    }\n\n    @Override\n    public void OnFileUploaded(String fileName) {\n\n    }\n\n    @Override\n    public void OnAllFilesUploaded() {\n\n    }\n\n    @Override\n    public void OnDataReceived(byte[] content) {\n\n    }\n\n    @Override\n    public void OnError(int codeError) {\n\n    }\n\n    @Override\n    public void OnDownloadingData(long received, long max, float porcent) {\n\n    }\n});\nupload.send();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2868397,"reputation":39,"user_id":2462210,"display_name":"user2462210"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674749508,"creation_date":1674490687,"answer_id":75212230,"question_id":41153410,"body_markdown":"My suggestion : \r\nuse Asynchronous Http Client from com.ning.http.client.\r\n\r\nversion in the example below : \r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.ning&lt;/groupId&gt;\r\n    &lt;artifactId&gt;async-http-client&lt;/artifactId&gt;\r\n    &lt;version&gt;1.9.31&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nCode Example :\r\n```\r\npackage url;\r\n\r\nimport com.ning.http.client.AsyncHttpClient;\r\nimport com.ning.http.client.AsyncHttpClientConfig;\r\nimport com.ning.http.client.Response;\r\nimport com.ning.http.client.multipart.FilePart;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.concurrent.ExecutionException;\r\n\r\npublic class Upload {\r\n    public static void main(String[] args) throws IOException, ExecutionException, InterruptedException {\r\n        String url = &quot;http://...&quot;;\r\n        FilePart file = new FilePart(&quot;file&quot;, new File(&quot;c:/tmp/014.csv&quot;), &quot;text/csv&quot;, StandardCharsets.UTF_8, &quot;014.csv&quot;);\r\n        AsyncHttpClientConfig.Builder builder = new AsyncHttpClientConfig.Builder();\r\n        try (AsyncHttpClient httpClient = new AsyncHttpClient(builder.build())) {\r\n            AsyncHttpClient.BoundRequestBuilder requestBuilder = httpClient.preparePost(url).addBodyPart(file);\r\n            requestBuilder.addHeader(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;);\r\n            Response response = requestBuilder.execute().get();\r\n            int status = response.getStatusCode();\r\n            String body = response.getResponseBody();\r\n            System.out.println(status + &quot;|&quot; + body + &quot;|&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\nYou do not have to use MultipartBody or MultipartUtils classes.\r\n\r\nFrom this code, the request body will be :\r\n```\r\n--6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk\r\nContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;014.csv&quot;\r\nContent-Type: text/csv; charset=UTF-8\r\nContent-Transfer-Encoding: binary\r\n\r\n014;csv\r\n--6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk--\r\n```\r\nwhere &#39;014;csv&#39; is the content of the file named 014.csv.\r\n\r\nThe headers are :\r\n```\r\ncontent-length=238\r\ncontent-type=multipart/form-data; boundary=6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk\r\nconnection=keep-alive\r\nhost=localhost:8580\r\naccept=*/*\r\nuser-agent=AHC/1.0\r\n```\r\n\r\nNote that the physical name of the file is not transmitted, only the file name passed as last argument of FilePart constructor.\r\n","title":"Upload file to a website using Java","body":"<p>My suggestion :\nuse Asynchronous Http Client from com.ning.http.client.</p>\n<p>version in the example below :</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.ning&lt;/groupId&gt;\n    &lt;artifactId&gt;async-http-client&lt;/artifactId&gt;\n    &lt;version&gt;1.9.31&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Code Example :</p>\n<pre><code>package url;\n\nimport com.ning.http.client.AsyncHttpClient;\nimport com.ning.http.client.AsyncHttpClientConfig;\nimport com.ning.http.client.Response;\nimport com.ning.http.client.multipart.FilePart;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport java.util.concurrent.ExecutionException;\n\npublic class Upload {\n    public static void main(String[] args) throws IOException, ExecutionException, InterruptedException {\n        String url = &quot;http://...&quot;;\n        FilePart file = new FilePart(&quot;file&quot;, new File(&quot;c:/tmp/014.csv&quot;), &quot;text/csv&quot;, StandardCharsets.UTF_8, &quot;014.csv&quot;);\n        AsyncHttpClientConfig.Builder builder = new AsyncHttpClientConfig.Builder();\n        try (AsyncHttpClient httpClient = new AsyncHttpClient(builder.build())) {\n            AsyncHttpClient.BoundRequestBuilder requestBuilder = httpClient.preparePost(url).addBodyPart(file);\n            requestBuilder.addHeader(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;);\n            Response response = requestBuilder.execute().get();\n            int status = response.getStatusCode();\n            String body = response.getResponseBody();\n            System.out.println(status + &quot;|&quot; + body + &quot;|&quot;);\n        }\n    }\n}\n</code></pre>\n<p>You do not have to use MultipartBody or MultipartUtils classes.</p>\n<p>From this code, the request body will be :</p>\n<pre><code>--6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk\nContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;014.csv&quot;\nContent-Type: text/csv; charset=UTF-8\nContent-Transfer-Encoding: binary\n\n014;csv\n--6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk--\n</code></pre>\n<p>where '014;csv' is the content of the file named 014.csv.</p>\n<p>The headers are :</p>\n<pre><code>content-length=238\ncontent-type=multipart/form-data; boundary=6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk\nconnection=keep-alive\nhost=localhost:8580\naccept=*/*\nuser-agent=AHC/1.0\n</code></pre>\n<p>Note that the physical name of the file is not transmitted, only the file name passed as last argument of FilePart constructor.</p>\n"}],"owner":{"display_name":"user7298925"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4301,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1674749508,"creation_date":1481754884,"question_id":41153410,"body_markdown":"I am not completely sure if this is possible, but I would like to upload a file to a website of which I have created. I would like to upload this file, by only using Java and no real personal help. By this I mean a user would be able to click the application and then the application would do the rest. \r\nSo lets say I have a variable with the file like so `final static File file = new File (”file.txt”);` and then in some way connect to a website like `http://example.com/` which would then have a form to upload files to. The code would then upload the `file.txt` to the form and submit it. \r\nIn theory it seems possible, but I am not completely sure where to start and whether there are any Jar libraries or already written codes, which could possibly help. If this is not possible I would like to know if there are any other possible way, which could achieve the same thing in another way.  ","title":"Upload file to a website using Java","body":"<p>I am not completely sure if this is possible, but I would like to upload a file to a website of which I have created. I would like to upload this file, by only using Java and no real personal help. By this I mean a user would be able to click the application and then the application would do the rest. \nSo lets say I have a variable with the file like so <code>final static File file = new File (”file.txt”);</code> and then in some way connect to a website like <code>http://example.com/</code> which would then have a form to upload files to. The code would then upload the <code>file.txt</code> to the form and submit it. \nIn theory it seems possible, but I am not completely sure where to start and whether there are any Jar libraries or already written codes, which could possibly help. If this is not possible I would like to know if there are any other possible way, which could achieve the same thing in another way.  </p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"answers":[{"comments":[{"owner":{"account_id":5814483,"reputation":1,"user_id":4584576,"display_name":"Dmitriy M."},"score":0,"creation_date":1674641016,"post_id":75228329,"comment_id":132755914,"body_markdown":"OK, thanx :), and then I should do something like this, right? =&gt;\n\nbranches.get(&quot;prepare_databoth&quot;)\n                .transform(supplier2)\n                .to(&quot;output.abc&quot;)\n                .to(&quot;output.xyz&quot;);","body":"OK, thanx :), and then I should do something like this, right? =&gt;  branches.get(&quot;prepare_databoth&quot;)                 .transform(supplier2)                 .to(&quot;output.abc&quot;)                 .to(&quot;output.xyz&quot;);"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1674663837,"post_id":75228329,"comment_id":132763816,"body_markdown":"Or `.through(&quot;output.abc&quot;).to(&quot;output.xyz&quot;)`","body":"Or <code>.through(&quot;output.abc&quot;).to(&quot;output.xyz&quot;)</code>"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674602961,"creation_date":1674602961,"answer_id":75228329,"question_id":75227682,"body_markdown":"Don&#39;t use just one `String#contains`, then. \r\n\r\n```\r\n.branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;abc&quot;) &amp;&amp; v.contains(&quot;xyz&quot;), Branched.as(&quot;both&quot;))\r\n```","title":"Kafka Stream with Java: Send the same object to multiple topics if it matches certain criteria","body":"<p>Don't use just one <code>String#contains</code>, then.</p>\n<pre><code>.branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;abc&quot;) &amp;&amp; v.contains(&quot;xyz&quot;), Branched.as(&quot;both&quot;))\n</code></pre>\n"}],"owner":{"account_id":5814483,"reputation":1,"user_id":4584576,"display_name":"Dmitriy M."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":411,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674749416,"creation_date":1674597263,"question_id":75227682,"body_markdown":"**Task**: there is a Kafka-topic we listen to. After processing we want to see messages in three different output topics whereas *the same message might go to several output topics*. How to model a such demultiplexer with Kafka-Streams?\r\n\r\nI have tried to use:\r\n\r\n```\r\n        Map&lt;String, KStream&lt;String, String&gt;&gt; branches = builder\r\n                .stream(&quot;input&quot;, Consumed.with(Serdes.String(), Serdes.String()))\r\n                .transform(supplier1, &quot;TRANSIT_STORE_NAME&quot;)\r\n                .split(Named.as(&quot;prepare_data&quot;))\r\n                .branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;xyz&quot;), Branched.as(&quot;xyz&quot;))\r\n                .branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;abc&quot;), Branched.as(&quot;abc&quot;))\r\n                .noDefaultBranch();\r\n        branches.get(&quot;prepare_dataxyz&quot;)\r\n                .transform(supplier2)\r\n                .to(&quot;output.xyz&quot;);\r\n        branches.get(&quot;prepare_dataabc&quot;)\r\n                .transform(supplier2)\r\n                .to(&quot;output.abc&quot;);\r\n```\r\n\r\nSo a record having value = *&quot;abcxyz_blabla&quot;* should theoretically go to the topic &quot;output.xyz&quot; __and__ to the topic &quot;output.abc&quot;.\r\n\r\nBut *branch()* acts in the way that the messages go to the first appropriate branch/topic.\r\nThe same effect has *filter()*.","title":"Kafka Stream with Java: Send the same object to multiple topics if it matches certain criteria","body":"<p><strong>Task</strong>: there is a Kafka-topic we listen to. After processing we want to see messages in three different output topics whereas <em>the same message might go to several output topics</em>. How to model a such demultiplexer with Kafka-Streams?</p>\n<p>I have tried to use:</p>\n<pre><code>        Map&lt;String, KStream&lt;String, String&gt;&gt; branches = builder\n                .stream(&quot;input&quot;, Consumed.with(Serdes.String(), Serdes.String()))\n                .transform(supplier1, &quot;TRANSIT_STORE_NAME&quot;)\n                .split(Named.as(&quot;prepare_data&quot;))\n                .branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;xyz&quot;), Branched.as(&quot;xyz&quot;))\n                .branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;abc&quot;), Branched.as(&quot;abc&quot;))\n                .noDefaultBranch();\n        branches.get(&quot;prepare_dataxyz&quot;)\n                .transform(supplier2)\n                .to(&quot;output.xyz&quot;);\n        branches.get(&quot;prepare_dataabc&quot;)\n                .transform(supplier2)\n                .to(&quot;output.abc&quot;);\n</code></pre>\n<p>So a record having value = <em>&quot;abcxyz_blabla&quot;</em> should theoretically go to the topic &quot;output.xyz&quot; <strong>and</strong> to the topic &quot;output.abc&quot;.</p>\n<p>But <em>branch()</em> acts in the way that the messages go to the first appropriate branch/topic.\nThe same effect has <em>filter()</em>.</p>\n"},{"tags":["java","imap","gmail-imap"],"comments":[{"owner":{"account_id":1550376,"reputation":10772,"user_id":1442918,"display_name":"Max"},"score":1,"creation_date":1674745650,"post_id":75247657,"comment_id":132782951,"body_markdown":"It has been a while but I do seem to believe that in some positions GIMAP would eat the character;  it if you fetched the whole message raw (so it didn’t have to parse it) it would come through fine (eg fetch part RFC822 or BODY)","body":"It has been a while but I do seem to believe that in some positions GIMAP would eat the character;  it if you fetched the whole message raw (so it didn’t have to parse it) it would come through fine (eg fetch part RFC822 or BODY)"},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1674748222,"post_id":75247657,"comment_id":132783949,"body_markdown":"I&#39;m storing the raw header in a CLOB, so I&#39;ll try that right now. Thank you.","body":"I&#39;m storing the raw header in a CLOB, so I&#39;ll try that right now. Thank you."},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1674748882,"post_id":75247657,"comment_id":132784193,"body_markdown":"Yes! That is definitely how to do it.  I&#39;m now fetching `UID FETCH 936238 (RFC822)` and I added `System.out.println( new String( bytes, StandardCharsets.ISO_8859_1 ) );`\n\nPlease create in the format of an answer, and I will accept it.","body":"Yes! That is definitely how to do it.  I&#39;m now fetching <code>UID FETCH 936238 (RFC822)</code> and I added <code>System.out.println( new String( bytes, StandardCharsets.ISO_8859_1 ) );</code>  Please create in the format of an answer, and I will accept it."},{"owner":{"account_id":1550376,"reputation":10772,"user_id":1442918,"display_name":"Max"},"score":0,"creation_date":1674749053,"post_id":75247657,"comment_id":132784255,"body_markdown":"Will do!  One moment.","body":"Will do!  One moment."},{"owner":{"account_id":458052,"reputation":9149,"user_id":857727,"display_name":"arnt"},"score":0,"creation_date":1674814889,"post_id":75247657,"comment_id":132797893,"body_markdown":"Max&#39;s answer solvers your problem, but I&#39;m such a pedant, I digress, and I love to answer side trivia that solve noone&#39;s problems. So... IMAP&#39;s semantics are such that Google has to either provide access to the original bytes in the message or provide access to the output of their charset guesser. IMAP lets a server do either, but not both. And that&#39;s why you don&#39;t get the guessed charset.","body":"Max&#39;s answer solvers your problem, but I&#39;m such a pedant, I digress, and I love to answer side trivia that solve noone&#39;s problems. So... IMAP&#39;s semantics are such that Google has to either provide access to the original bytes in the message or provide access to the output of their charset guesser. IMAP lets a server do either, but not both. And that&#39;s why you don&#39;t get the guessed charset."},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1674815151,"post_id":75247657,"comment_id":132797978,"body_markdown":"Please turn in your pedant card, now. I would have been happy with either, but I believe Google provided neither. They returned to me the original bytes - after interpreting as UTF-8 - which lost the information of the ISO-8859-1 character value.","body":"Please turn in your pedant card, now. I would have been happy with either, but I believe Google provided neither. They returned to me the original bytes - after interpreting as UTF-8 - which lost the information of the ISO-8859-1 character value."}],"answers":[{"comments":[{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1674749288,"post_id":75248698,"comment_id":132784353,"body_markdown":"Thank you, the solution that works for me is `FETCH uid-specifier (RFC822)`. The message as originally encoded (in ISO8859-1) was returned intact.","body":"Thank you, the solution that works for me is <code>FETCH uid-specifier (RFC822)</code>. The message as originally encoded (in ISO8859-1) was returned intact."}],"tags":[],"owner":{"account_id":1550376,"reputation":10772,"user_id":1442918,"display_name":"Max"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1674749176,"creation_date":1674749176,"answer_id":75248698,"question_id":75247657,"body_markdown":"In my past experience with GIMAP server, if it had to parse the headers to fulfill your request, it would tend to eat illegal characters. You can work around this by fetching the whole message in one go, and then the server will likely give you the raw data, unfiltered.\r\n\r\nI recommend trying to fetch RFC822 or the whole BODY section.","title":"How to retrieve an original byte from Google Gimap (rather than the replacement character)","body":"<p>In my past experience with GIMAP server, if it had to parse the headers to fulfill your request, it would tend to eat illegal characters. You can work around this by fetching the whole message in one go, and then the server will likely give you the raw data, unfiltered.</p>\n<p>I recommend trying to fetch RFC822 or the whole BODY section.</p>\n"}],"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75248698,"answer_count":1,"score":0,"last_activity_date":1674749176,"creation_date":1674744210,"question_id":75247657,"body_markdown":"I am creating an IMAP client for Google&#39;s Gimap service (IMAP4v2 with some extensions).\r\n\r\nI have a small number of emails for which, the FETCH command is returning the UTF-8 replacement character. Meanwhile, the character is displayed correctly in the Gmail web ui.\r\n\r\nFor an orientation, here&#39;s what the protocol exchange looks like with openssl s_client:\r\n\r\n&lt;pre&gt;\r\n    &lt;b&gt;openssl s_client -crlf -quiet -connect imap.gmail.com:993&lt;/b&gt;\r\n    * OK Gimap ready for requests from 80.229.146.237 q15mb3103507wmo\r\n    &lt;b&gt;1 LOGIN user@gmail.com app-password&lt;/b&gt;\r\n    * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE ENABLE MOVE CONDSTORE ESEARCH UTF8=ACCEPT LIST-EXTENDED LIST-STATUS LITERAL- SPECIAL-USE APPENDLIMIT=35651584\r\n    1 OK user@gmail.com authenticated (Success)\r\n    &lt;b&gt;2 EXAMINE &quot;[Gmail]/All Mail&quot;&lt;/b&gt;\r\n    * FLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen $Forwarded $Junk $MailFlagBit0 $NotJunk $NotPhishing $Phishing Forwarded Junk NotJunk)\r\n    * OK [PERMANENTFLAGS ()] Flags permitted.\r\n    * OK [UIDVALIDITY 1] UIDs valid.\r\n    * 95696 EXISTS\r\n    * 0 RECENT\r\n    * OK [UIDNEXT 1110737] Predicted next UID.\r\n    * OK [HIGHESTMODSEQ 11952911]\r\n    2 OK [READ-ONLY] [Gmail]/All Mail selected. (Success)\r\n    &lt;b&gt;3 UID FETCH 936238 (BODY[HEADER.FIELDS (Subject)])&lt;/b&gt;\r\n    * 44300 FETCH (UID 936238 BODY[HEADER.FIELDS (Subject)] {64}\r\n    Subject: Luc�a Cxxxxxxxxxxxxxxx posted a discussion on ASW\r\n    \r\n    )\r\n    3 OK Success\r\n    &lt;b&gt;4 LOGOUT&lt;/b&gt;\r\n    * BYE LOGOUT Requested\r\n    LOGOUT OK 73 good day (Success)\r\n    read:errno=0\r\n&lt;/pre&gt;\r\n\r\nThe terminal shows the UTF-8 replacement character, but that&#39;s not a necessary indicator of the problem. The true finding is when I read the bytes in Java code, Gimap passes me back the three UTF-8 bytes encoding the Unicode replacement character. I have underlined them below:\r\n\r\n    [ 53 , 75 , 62 , 6A , 65 , 63 , 74 , 3A , 20 , 4C , 75 , 63 , EF , BF , BD , 61 , 20 ,\r\n                                                                  ^^^  ^^^  ^^^\r\n\r\nMeanwhile, the email displays correctly in Gmail. Here is Google&#39;s &quot;view original&quot;...\r\n[![Screenshot of the Gmail &quot;view original&quot; page. The image shows the Subject header which includes a West European accented letter E character.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xQXPj.png\r\n\r\nBy RFC2822 all these header keys and values should be in 7-bit ASCII characters. That is obviously not the case with this email - but how does that explain that Google &quot;knows&quot; what the correct character is, but won&#39;t provide that same character to me through their API?\r\n\r\nI just wondered, if possibly I am not using IMAP4v1 correctly? I notice Gimap supports &quot;ENABLE=UTF-8&quot;, but the addition of this command sequence did not result in a difference in the behaviour.\r\n\r\n**Summary:**\r\n\r\n**Observation:** Original email to Google was invalid, and Google figured out how to store the proper character that was intended by the sender.\r\n\r\n**Expected result:** Google would give me the bytes they display, when I request this field\r\n\r\n**Actual result:** Google does not give me any bytes to describe the &#237;. Instead, Google&#39;s API returns to me bytes for the replacement character.\r\n\r\n**Discussion:** Maybe it is a Google implementation error - but I came here with my post to ensure I am actually handling the protocol interaction incorrectly.\r\n\r\nBelow is my minimal test case, Java code that I can use to access and print out the bytes.\r\n\r\n    package stackoverflow;\r\n    \r\n    import java.io.IOException;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.util.regex.Pattern;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.PrintWriter;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.Socket;\r\n    import javax.net.ssl.SSLSocketFactory;\r\n    \r\n    public class StackOverflowTestCase {\r\n    \r\n    \t/**\r\n    \t * Connect to Gimap server, download a single email&#39;s Subject header.\r\n    \t */\r\n    \tpublic static void main( String[] argzes ) throws IOException {\r\n    \r\n    \t\tSimpleIMAPClient g = new SimpleIMAPClient();\r\n    \t\ttry {\r\n    \t\t\tg.changeToLoggedInState().changeToSelectedState();\r\n    \t\t\tString input = &quot;&quot;;\r\n    \t\t\tPattern expectedResponse = Pattern.compile( &quot;\\\\* [1234567890]+ FETCH \\\\(UID 936238 .*&quot; );\r\n    \t\t\tg.sendCommand( &quot;4 UID FETCH 936238 (BODY[HEADER.FIELDS (Subject)])&quot; );\r\n    \t\t\twhile (!input.startsWith( &quot;4 OK &quot; )) {\r\n    \t\t\t\tinput = g.readLine();\r\n    \t\t\t\tif ( expectedResponse.matcher( input ).matches() ) {\r\n    \t\t\t\t\t// find the {999} construct in the response and parse the number.\r\n    \t\t\t\t\tint bytesToRead = Integer.parseInt( input.split( &quot;\\\\{|}&quot; )[1] );\r\n    \t\t\t\t\tbyte[] bytes = g.response.readNBytes( bytesToRead );\r\n    \t\t\t\t\tlog( bytes );\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\tg.logout();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Pretty-print a byte array.\r\n    \t */\r\n    \tprivate static void log( byte[] bytes ) {\r\n    \t\tStringBuffer out = new StringBuffer();\r\n    \t\tout.append( &#39;[&#39; );\r\n    \t\tString prefix = &quot; &quot;;\r\n    \t\tfor (byte b : bytes) {\r\n    \t\t\tout.append( prefix + String.format( &quot;%02X &quot;, b ) );\r\n    \t\t\tprefix = &quot;, &quot;;\r\n    \t\t}\r\n    \t\tout.append( &#39;]&#39; );\r\n    \t\tSystem.out.println( out.toString() );\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Class that implements a subset of the IMAP 4v2 protocol.\r\n    \t * Only enough function is available to reproduce the test case for downloading one email header.\r\n    \t * */\r\n    \tprivate static class SimpleIMAPClient {\r\n    \r\n    \t\t/**\r\n    \t\t * When true, the line exchanges between IMAP client and IMAP server\r\n    \t\t * are printed to stdout and stderr respectively.\r\n    \t\t * */\r\n    \t\tstatic final boolean debug = true;\r\n    \r\n    \t\t/**\r\n    \t\t * IMAP connection state, per RFC3501#3\r\n    \t\t * */\r\n    \t\tpublic static class State {\r\n    \t\t\tpublic static final State NOT_AUTHENTICATED = new State();\r\n    \t\t\tpublic static final State AUTHENTICATED = new State();\r\n    \t\t\tpublic static final State SELECTED = new State();\r\n    \t\t\tpublic static final State LOGGED_OUT = new State();\r\n    \r\n    \t\t\tprivate State () {\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Outbound stream to the server\r\n    \t\t * */\r\n    \t\tpublic final PrintWriter request;\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Inbound stream from the server\r\n    \t\t */\r\n    \t\tpublic final InputStream response;\r\n    \t\t\r\n    \t\tprivate final Socket imap;\r\n    \t\tprivate State state;\r\n    \r\n    \t\t/**\r\n    \t\t * Constructs a connection to the Gmail Gimap server using the default ciphers available in the JDK.\r\n    \t\t * If established successfully, the object enters NOT_AUTHENTICATED state.\r\n    \t\t * @throws ExceptionInInitializerError if the connection cannot be established.\r\n    \t\t * */\r\n    \t\tpublic SimpleIMAPClient () {\r\n    \t\t\ttry {\r\n    \t\t\t\timap = SSLSocketFactory.getDefault().createSocket();\r\n    \t\t\t\timap.connect( new InetSocketAddress( &quot;imap.gmail.com&quot;, 993 ) );\r\n    \t\t\t\tSystem.out.println( &quot;Connection established to &quot; + imap.getRemoteSocketAddress() + &quot; from local port &quot;\r\n    \t\t\t\t\t\t+ imap.getLocalPort() );\r\n    \t\t\t\trequest = new PrintWriter( imap.getOutputStream(), true );\r\n    \t\t\t\tresponse = imap.getInputStream();\r\n    \t\t\t}\r\n    \t\t\tcatch ( IOException e ) {\r\n    \t\t\t\tthrow new ExceptionInInitializerError( e );\r\n    \t\t\t}\r\n    \t\t\tthis.state = State.NOT_AUTHENTICATED;\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Moves the state to LOGGED_OUT. The class can no longer be used after calling this method.\r\n    \t\t * */\r\n    \t\tpublic void logout() throws IOException {\r\n    \t\t\tsendCommand( &quot;LOGOUT LOGOUT&quot; );\r\n    \t\t\tString input = readLine();\r\n    \t\t\twhile (!input.startsWith( &quot;LOGOUT OK&quot; )) {\r\n    \t\t\t\tinput = readLine();\r\n    \t\t\t}\r\n    \t\t\tresponse.close();\r\n    \t\t\trequest.close();\r\n    \t\t\timap.close();\r\n    \t\t\tSystem.out.println( &quot;Disconnected.&quot; );\r\n    \t\t\tthis.state = State.LOGGED_OUT;\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Change the state to SELECTED by opening the &quot;All Mail&quot; mailbox in\r\n    \t\t * readonly mode. Returns a reference to this object.\r\n    \t\t * @throws IllegalStateException if the beginning state is not AUTHENTICATED.\r\n    \t\t */\r\n    \t\tpublic SimpleIMAPClient changeToSelectedState() throws IOException {\r\n    \r\n    \t\t\tif ( !state.equals( State.AUTHENTICATED ) )\r\n    \t\t\t\tthrow new IllegalStateException();\r\n    \r\n    \t\t\tsendCommand( &quot;3 EXAMINE \\&quot;[Gmail]/All Mail\\&quot;&quot; );\r\n    \t\t\tString input = readLine();\r\n    \t\t\twhile (!input.startsWith( &quot;3 OK &quot; )) {\r\n    \t\t\t\tinput = readLine();\r\n    \t\t\t}\r\n    \t\t\tthis.state = State.SELECTED;\r\n    \t\t\treturn this;\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Change the state to AUTHENTICATED; and then returns a reference to\r\n    \t\t * this object.\r\n    \t\t * TODO Note, the account and app-password are hard-coded into this method implementation.\r\n    \t\t * @throws IllegalStateException if the beginning state is not NOT_AUTHENTICATED.\r\n    \t\t */\r\n    \t\tpublic SimpleIMAPClient changeToLoggedInState() throws IOException {\r\n    \r\n    \t\t\tif ( !state.equals( State.NOT_AUTHENTICATED ) )\r\n    \t\t\t\tthrow new IllegalStateException();\r\n    \r\n    \t\t\tString input = readLine();\r\n    \t\t\twhile (!input.startsWith( &quot;* OK &quot; )) {\r\n    \t\t\t\tinput = readLine();\r\n    \t\t\t}\r\n    \t\t\tsendCommand( &quot;1 LOGIN user@gmail.com ***********&quot; );\r\n    \t\t\twhile (!input.startsWith( &quot;1 OK &quot; )) {\r\n    \t\t\t\tinput = readLine();\r\n    \t\t\t}\r\n    \r\n    \t\t\tthis.state = State.AUTHENTICATED;\r\n    \t\t\treturn this;\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Send the command to the IMAP server.\r\n    \t\t */\r\n    \t\tpublic void sendCommand( String message ) {\r\n    \r\n    \t\t\trequest.print( message );\r\n    \t\t\tif ( !message.endsWith( &quot;\\r\\n&quot; ) )\r\n    \t\t\t\trequest.print( &quot;\\r\\n&quot; );\r\n    \t\t\trequest.flush();\r\n    \t\t\tSystem.out.println( message );\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Reads String in the default Charset. Stray \\\\r or \\\\n characters will raise\r\n    \t\t * IOException. Only the \\\\r\\\\n sequence is allowed per RFC 3501#2.2.\r\n    \t\t * \r\n    \t\t * @returns The line, identified by its terminator \\\\r\\\\n.\r\n    \t\t */\r\n    \t\tpublic String readLine() throws IOException {\r\n    \r\n    \t\t\tStringBuffer line = new StringBuffer();\r\n    \t\t\tint ch = response.read();\r\n    \t\t\tchar prev = &#39;\\0&#39;;\r\n    \t\t\twhile (ch != -1) {\r\n    \t\t\t\tif ( line.length() == 0 ) {\r\n    \t\t\t\t\tif ( ( char ) ch == &#39;\\n&#39; ) {\r\n    \t\t\t\t\t\tthrow new IOException( &quot;Line begins with \\\\n&quot; );\r\n    \t\t\t\t\t}\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tif ( prev == &#39;\\r&#39; &amp;&amp; ( char ) ch == &#39;\\n&#39; ) {\r\n    \t\t\t\t\t\tline.setLength( line.length() - 1 ); // chop off \\r\r\n    \t\t\t\t\t\tSystem.err.println( line.toString() );\r\n    \t\t\t\t\t\treturn line.toString();\r\n    \t\t\t\t\t} else if ( ( char ) ch == &#39;\\n&#39; ) {\r\n    \t\t\t\t\t\tthrow new IOException( &quot;Encountered \\\\n without \\\\r.&quot; );\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\tprev = ( char ) ch;\r\n    \t\t\t\tline.append( prev );\r\n    \t\t\t\tch = response.read();\r\n    \t\t\t}\r\n    \t\t\tthrow new IOException( &quot;end of stream.&quot; );\r\n    \t\t}\r\n    \t}\r\n    }\r\n","title":"How to retrieve an original byte from Google Gimap (rather than the replacement character)","body":"<p>I am creating an IMAP client for Google's Gimap service (IMAP4v2 with some extensions).</p>\n<p>I have a small number of emails for which, the FETCH command is returning the UTF-8 replacement character. Meanwhile, the character is displayed correctly in the Gmail web ui.</p>\n<p>For an orientation, here's what the protocol exchange looks like with openssl s_client:</p>\n<pre>\n    <b>openssl s_client -crlf -quiet -connect imap.gmail.com:993</b>\n    * OK Gimap ready for requests from 80.229.146.237 q15mb3103507wmo\n    <b>1 LOGIN user@gmail.com app-password</b>\n    * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE ENABLE MOVE CONDSTORE ESEARCH UTF8=ACCEPT LIST-EXTENDED LIST-STATUS LITERAL- SPECIAL-USE APPENDLIMIT=35651584\n    1 OK user@gmail.com authenticated (Success)\n    <b>2 EXAMINE \"[Gmail]/All Mail\"</b>\n    * FLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen $Forwarded $Junk $MailFlagBit0 $NotJunk $NotPhishing $Phishing Forwarded Junk NotJunk)\n    * OK [PERMANENTFLAGS ()] Flags permitted.\n    * OK [UIDVALIDITY 1] UIDs valid.\n    * 95696 EXISTS\n    * 0 RECENT\n    * OK [UIDNEXT 1110737] Predicted next UID.\n    * OK [HIGHESTMODSEQ 11952911]\n    2 OK [READ-ONLY] [Gmail]/All Mail selected. (Success)\n    <b>3 UID FETCH 936238 (BODY[HEADER.FIELDS (Subject)])</b>\n    * 44300 FETCH (UID 936238 BODY[HEADER.FIELDS (Subject)] {64}\n    Subject: Luc�a Cxxxxxxxxxxxxxxx posted a discussion on ASW\n    \n    )\n    3 OK Success\n    <b>4 LOGOUT</b>\n    * BYE LOGOUT Requested\n    LOGOUT OK 73 good day (Success)\n    read:errno=0\n</pre>\n<p>The terminal shows the UTF-8 replacement character, but that's not a necessary indicator of the problem. The true finding is when I read the bytes in Java code, Gimap passes me back the three UTF-8 bytes encoding the Unicode replacement character. I have underlined them below:</p>\n<pre><code>[ 53 , 75 , 62 , 6A , 65 , 63 , 74 , 3A , 20 , 4C , 75 , 63 , EF , BF , BD , 61 , 20 ,\n                                                              ^^^  ^^^  ^^^\n</code></pre>\n<p>Meanwhile, the email displays correctly in Gmail. Here is Google's &quot;view original&quot;...\n<a href=\"https://i.stack.imgur.com/xQXPj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xQXPj.png\" alt=\"Screenshot of the Gmail &quot;view original&quot; page. The image shows the Subject header which includes a West European accented letter E character.\" /></a></p>\n<p>By RFC2822 all these header keys and values should be in 7-bit ASCII characters. That is obviously not the case with this email - but how does that explain that Google &quot;knows&quot; what the correct character is, but won't provide that same character to me through their API?</p>\n<p>I just wondered, if possibly I am not using IMAP4v1 correctly? I notice Gimap supports &quot;ENABLE=UTF-8&quot;, but the addition of this command sequence did not result in a difference in the behaviour.</p>\n<p><strong>Summary:</strong></p>\n<p><strong>Observation:</strong> Original email to Google was invalid, and Google figured out how to store the proper character that was intended by the sender.</p>\n<p><strong>Expected result:</strong> Google would give me the bytes they display, when I request this field</p>\n<p><strong>Actual result:</strong> Google does not give me any bytes to describe the í. Instead, Google's API returns to me bytes for the replacement character.</p>\n<p><strong>Discussion:</strong> Maybe it is a Google implementation error - but I came here with my post to ensure I am actually handling the protocol interaction incorrectly.</p>\n<p>Below is my minimal test case, Java code that I can use to access and print out the bytes.</p>\n<pre><code>package stackoverflow;\n\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport java.util.regex.Pattern;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.PrintWriter;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport javax.net.ssl.SSLSocketFactory;\n\npublic class StackOverflowTestCase {\n\n    /**\n     * Connect to Gimap server, download a single email's Subject header.\n     */\n    public static void main( String[] argzes ) throws IOException {\n\n        SimpleIMAPClient g = new SimpleIMAPClient();\n        try {\n            g.changeToLoggedInState().changeToSelectedState();\n            String input = &quot;&quot;;\n            Pattern expectedResponse = Pattern.compile( &quot;\\\\* [1234567890]+ FETCH \\\\(UID 936238 .*&quot; );\n            g.sendCommand( &quot;4 UID FETCH 936238 (BODY[HEADER.FIELDS (Subject)])&quot; );\n            while (!input.startsWith( &quot;4 OK &quot; )) {\n                input = g.readLine();\n                if ( expectedResponse.matcher( input ).matches() ) {\n                    // find the {999} construct in the response and parse the number.\n                    int bytesToRead = Integer.parseInt( input.split( &quot;\\\\{|}&quot; )[1] );\n                    byte[] bytes = g.response.readNBytes( bytesToRead );\n                    log( bytes );\n                }\n            }\n        }\n        finally {\n            g.logout();\n        }\n    }\n\n    /**\n     * Pretty-print a byte array.\n     */\n    private static void log( byte[] bytes ) {\n        StringBuffer out = new StringBuffer();\n        out.append( '[' );\n        String prefix = &quot; &quot;;\n        for (byte b : bytes) {\n            out.append( prefix + String.format( &quot;%02X &quot;, b ) );\n            prefix = &quot;, &quot;;\n        }\n        out.append( ']' );\n        System.out.println( out.toString() );\n    }\n\n    /**\n     * Class that implements a subset of the IMAP 4v2 protocol.\n     * Only enough function is available to reproduce the test case for downloading one email header.\n     * */\n    private static class SimpleIMAPClient {\n\n        /**\n         * When true, the line exchanges between IMAP client and IMAP server\n         * are printed to stdout and stderr respectively.\n         * */\n        static final boolean debug = true;\n\n        /**\n         * IMAP connection state, per RFC3501#3\n         * */\n        public static class State {\n            public static final State NOT_AUTHENTICATED = new State();\n            public static final State AUTHENTICATED = new State();\n            public static final State SELECTED = new State();\n            public static final State LOGGED_OUT = new State();\n\n            private State () {\n            }\n        }\n\n        /**\n         * Outbound stream to the server\n         * */\n        public final PrintWriter request;\n        \n        /**\n         * Inbound stream from the server\n         */\n        public final InputStream response;\n        \n        private final Socket imap;\n        private State state;\n\n        /**\n         * Constructs a connection to the Gmail Gimap server using the default ciphers available in the JDK.\n         * If established successfully, the object enters NOT_AUTHENTICATED state.\n         * @throws ExceptionInInitializerError if the connection cannot be established.\n         * */\n        public SimpleIMAPClient () {\n            try {\n                imap = SSLSocketFactory.getDefault().createSocket();\n                imap.connect( new InetSocketAddress( &quot;imap.gmail.com&quot;, 993 ) );\n                System.out.println( &quot;Connection established to &quot; + imap.getRemoteSocketAddress() + &quot; from local port &quot;\n                        + imap.getLocalPort() );\n                request = new PrintWriter( imap.getOutputStream(), true );\n                response = imap.getInputStream();\n            }\n            catch ( IOException e ) {\n                throw new ExceptionInInitializerError( e );\n            }\n            this.state = State.NOT_AUTHENTICATED;\n        }\n\n        /**\n         * Moves the state to LOGGED_OUT. The class can no longer be used after calling this method.\n         * */\n        public void logout() throws IOException {\n            sendCommand( &quot;LOGOUT LOGOUT&quot; );\n            String input = readLine();\n            while (!input.startsWith( &quot;LOGOUT OK&quot; )) {\n                input = readLine();\n            }\n            response.close();\n            request.close();\n            imap.close();\n            System.out.println( &quot;Disconnected.&quot; );\n            this.state = State.LOGGED_OUT;\n        }\n\n        /**\n         * Change the state to SELECTED by opening the &quot;All Mail&quot; mailbox in\n         * readonly mode. Returns a reference to this object.\n         * @throws IllegalStateException if the beginning state is not AUTHENTICATED.\n         */\n        public SimpleIMAPClient changeToSelectedState() throws IOException {\n\n            if ( !state.equals( State.AUTHENTICATED ) )\n                throw new IllegalStateException();\n\n            sendCommand( &quot;3 EXAMINE \\&quot;[Gmail]/All Mail\\&quot;&quot; );\n            String input = readLine();\n            while (!input.startsWith( &quot;3 OK &quot; )) {\n                input = readLine();\n            }\n            this.state = State.SELECTED;\n            return this;\n        }\n\n        /**\n         * Change the state to AUTHENTICATED; and then returns a reference to\n         * this object.\n         * TODO Note, the account and app-password are hard-coded into this method implementation.\n         * @throws IllegalStateException if the beginning state is not NOT_AUTHENTICATED.\n         */\n        public SimpleIMAPClient changeToLoggedInState() throws IOException {\n\n            if ( !state.equals( State.NOT_AUTHENTICATED ) )\n                throw new IllegalStateException();\n\n            String input = readLine();\n            while (!input.startsWith( &quot;* OK &quot; )) {\n                input = readLine();\n            }\n            sendCommand( &quot;1 LOGIN user@gmail.com ***********&quot; );\n            while (!input.startsWith( &quot;1 OK &quot; )) {\n                input = readLine();\n            }\n\n            this.state = State.AUTHENTICATED;\n            return this;\n        }\n\n        /**\n         * Send the command to the IMAP server.\n         */\n        public void sendCommand( String message ) {\n\n            request.print( message );\n            if ( !message.endsWith( &quot;\\r\\n&quot; ) )\n                request.print( &quot;\\r\\n&quot; );\n            request.flush();\n            System.out.println( message );\n        }\n\n        /**\n         * Reads String in the default Charset. Stray \\\\r or \\\\n characters will raise\n         * IOException. Only the \\\\r\\\\n sequence is allowed per RFC 3501#2.2.\n         * \n         * @returns The line, identified by its terminator \\\\r\\\\n.\n         */\n        public String readLine() throws IOException {\n\n            StringBuffer line = new StringBuffer();\n            int ch = response.read();\n            char prev = '\\0';\n            while (ch != -1) {\n                if ( line.length() == 0 ) {\n                    if ( ( char ) ch == '\\n' ) {\n                        throw new IOException( &quot;Line begins with \\\\n&quot; );\n                    }\n                } else {\n                    if ( prev == '\\r' &amp;&amp; ( char ) ch == '\\n' ) {\n                        line.setLength( line.length() - 1 ); // chop off \\r\n                        System.err.println( line.toString() );\n                        return line.toString();\n                    } else if ( ( char ) ch == '\\n' ) {\n                        throw new IOException( &quot;Encountered \\\\n without \\\\r.&quot; );\n                    }\n                }\n                prev = ( char ) ch;\n                line.append( prev );\n                ch = response.read();\n            }\n            throw new IOException( &quot;end of stream.&quot; );\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","kotlin","arraylist","collections","get"],"answers":[{"tags":[],"owner":{"account_id":55050,"reputation":190529,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674731019,"creation_date":1674731019,"answer_id":75245256,"question_id":75245118,"body_markdown":"do you really need an extension for it? To call the extension you have to pass the concrete type of `T` right? Otherwise, he function doesn&#39;t know which type to check.\r\n\r\nHow about simply:\r\n\r\n    yourResult = yourList[5] as? ConcreteT","title":"How I can do it: typed Extension for Arraylist","body":"<p>do you really need an extension for it? To call the extension you have to pass the concrete type of <code>T</code> right? Otherwise, he function doesn't know which type to check.</p>\n<p>How about simply:</p>\n<pre><code>yourResult = yourList[5] as? ConcreteT\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23772235,"reputation":11,"user_id":18251378,"display_name":"Антон"},"score":0,"creation_date":1674740616,"post_id":75246219,"comment_id":132781043,"body_markdown":"Thx, I think it must to help me","body":"Thx, I think it must to help me"}],"tags":[],"owner":{"account_id":269240,"reputation":5686,"user_id":558457,"accept_rate":62,"display_name":"Viacheslav Smityukh"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674736546,"creation_date":1674736546,"answer_id":75246219,"question_id":75245118,"body_markdown":"I think you have to check requirements because the function seems strange:\r\n\r\nBut if you really need it:\r\n\r\n    inline fun &lt;TE : Any, reified T: TE&gt; ArrayList&lt;TE&gt;.getTypeOrNull(index:Int) : T? =\r\n        getOrNull(index) as? T\r\n\r\nand now you can use it:\r\n\r\n    fun test() {\r\n        val list = ArrayList&lt;CharSequence&gt;()\r\n        val str: String? = list.getTypeOrNull(5)\r\n    }","title":"How I can do it: typed Extension for Arraylist","body":"<p>I think you have to check requirements because the function seems strange:</p>\n<p>But if you really need it:</p>\n<pre><code>inline fun &lt;TE : Any, reified T: TE&gt; ArrayList&lt;TE&gt;.getTypeOrNull(index:Int) : T? =\n    getOrNull(index) as? T\n</code></pre>\n<p>and now you can use it:</p>\n<pre><code>fun test() {\n    val list = ArrayList&lt;CharSequence&gt;()\n    val str: String? = list.getTypeOrNull(5)\n}\n</code></pre>\n"}],"owner":{"account_id":23772235,"reputation":11,"user_id":18251378,"display_name":"Антон"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1674749095,"creation_date":1674730252,"question_id":75245118,"body_markdown":"I try it:\r\n\r\n\r\n```\r\nfun &lt;T : E&gt; ArrayList&lt;E&gt;.getTypeOrNull(index:Int) : T? {\r\n  val item = this.getOrNull(index)\r\n  return if(item is T) item else null\r\n}\r\n```\r\n\r\n\r\nHow I can do it? I am newb on kotlin java","title":"How I can do it: typed Extension for Arraylist","body":"<p>I try it:</p>\n<pre><code>fun &lt;T : E&gt; ArrayList&lt;E&gt;.getTypeOrNull(index:Int) : T? {\n  val item = this.getOrNull(index)\n  return if(item is T) item else null\n}\n</code></pre>\n<p>How I can do it? I am newb on kotlin java</p>\n"},{"tags":["java","spring","algorithm","rest","tic-tac-toe"],"comments":[{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1674738040,"post_id":75246421,"comment_id":132780257,"body_markdown":"What&#39;s your question exacly, an idea for what? If you have errors, please include them in the question","body":"What&#39;s your question exacly, an idea for what? If you have errors, please include them in the question"},{"owner":{"account_id":23058102,"reputation":11,"user_id":17173862,"display_name":"Kacper Rydzyński"},"score":0,"creation_date":1674738263,"post_id":75246421,"comment_id":132780317,"body_markdown":"Sorry, just did","body":"Sorry, just did"},{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1674742580,"post_id":75246421,"comment_id":132781775,"body_markdown":"I find the code quite complex for what it does, it would have been easier to work with arrays rather than a flat list. Can you expand on &quot;not working as it&#39;s should&quot;, what do you get that inexpected?","body":"I find the code quite complex for what it does, it would have been easier to work with arrays rather than a flat list. Can you expand on &quot;not working as it&#39;s should&quot;, what do you get that inexpected?"},{"owner":{"account_id":23058102,"reputation":11,"user_id":17173862,"display_name":"Kacper Rydzyński"},"score":0,"creation_date":1674746450,"post_id":75246421,"comment_id":132783260,"body_markdown":"Then I will need to convert GameBoard to arrays just for those menthods, that&#39;s unnecessary. I got different bugs in differnet board corners. Sometimes its one player move too fast sometimes I nned to put 4 in row not 3.","body":"Then I will need to convert GameBoard to arrays just for those menthods, that&#39;s unnecessary. I got different bugs in differnet board corners. Sometimes its one player move too fast sometimes I nned to put 4 in row not 3."},{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1674746981,"post_id":75246421,"comment_id":132783463,"body_markdown":"Yes this was just a remark, don&#39;t change your data just to fit some methods, but it can be a reminder for future projects, what I meant is that does the method return win when it shouldn&#39;t, or does it fail to report a win, or both? You seem to say that it fails to report wins rather?","body":"Yes this was just a remark, don&#39;t change your data just to fit some methods, but it can be a reminder for future projects, what I meant is that does the method return win when it shouldn&#39;t, or does it fail to report a win, or both? You seem to say that it fails to report wins rather?"}],"answers":[{"comments":[{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1674751079,"post_id":75248598,"comment_id":132785000,"body_markdown":"Nice catch, I would add that there are other design flaws, such as the params `board, gameSize, gameDifficulty` passed to each function, while these should be accessible by the functions. Indeed there is nothing else than check right and left of the last move while testing if the border of the board has not been reached","body":"Nice catch, I would add that there are other design flaws, such as the params <code>board, gameSize, gameDifficulty</code> passed to each function, while these should be accessible by the functions. Indeed there is nothing else than check right and left of the last move while testing if the border of the board has not been reached"}],"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674748988,"creation_date":1674748657,"answer_id":75248598,"question_id":75246421,"body_markdown":"The problem is that with `candidate = getPawnAtCoords(gameBoard, gameSize, row, 0)` you read a cell that might not be in the region you want to inspect: the column 0 might not be anywhere near. Yet, you **count** that cell. So for instance, with a 3-in-a-row game, when you scan the first row where a move was made in column 10, then that row might look like this:\r\n\r\n```none\r\nX------XX-X----\r\n          ^ last move\r\n       ^ inner loop starts here, but count is already 1 before it starts\r\n^ this X is counted erroneously\r\n```\r\n\r\nYour initialisation of `candidate` will count the left X and then will find two more X starting at index 7 (i.e. 10 - 3), and conclude there is a 3-in-a-row, but this is a false positive.\r\n\r\nYou can solve this in many ways. For instance, this will do the trick:\r\n\r\n    char candidate = &#39;-&#39;;\r\n    int counter = 0;\r\n\r\nSecondly, your encoding of an index (from row/column) is different from the *decoding* of an index (into row/column). In `getPawnAtCoords` the `column` is the smaller unit, and the `row` the bigger one (it is multiplied), yet in `checkHorizontalWin` you extract `moveX` as the bigger unit (as you divide), which is later used for the loop variable `column`.\r\n\r\nYou can fix this by changing the initialisation of `moveX` and `moveY` to:\r\n\r\n```\r\n    int moveX = moveIdx % gameSize;\r\n    int moveY = moveIdx / gameSize;\r\n```\r\n\r\nFinally, this is an overly complex algorithm. You already know what the last move was, as you can read `gameBoard[moveX]` and it is **that** character you want to check with, nothing else. So the variable `candidate` could be set to it -- only once. Then you don&#39;t need that `pawn == &#39;-&#39;` check anymore and only need to reset the counter to 0 when you find a character that is different from `candidate`.\r\n\r\nMoreover, for horizontal wins it is not necessary to look at any other row than the row of the last move.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Algorithm That Checks Just Part Of Custom Size TicTacToe Game","body":"<p>The problem is that with <code>candidate = getPawnAtCoords(gameBoard, gameSize, row, 0)</code> you read a cell that might not be in the region you want to inspect: the column 0 might not be anywhere near. Yet, you <strong>count</strong> that cell. So for instance, with a 3-in-a-row game, when you scan the first row where a move was made in column 10, then that row might look like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>X------XX-X----\n          ^ last move\n       ^ inner loop starts here, but count is already 1 before it starts\n^ this X is counted erroneously\n</code></pre>\n<p>Your initialisation of <code>candidate</code> will count the left X and then will find two more X starting at index 7 (i.e. 10 - 3), and conclude there is a 3-in-a-row, but this is a false positive.</p>\n<p>You can solve this in many ways. For instance, this will do the trick:</p>\n<pre><code>char candidate = '-';\nint counter = 0;\n</code></pre>\n<p>Secondly, your encoding of an index (from row/column) is different from the <em>decoding</em> of an index (into row/column). In <code>getPawnAtCoords</code> the <code>column</code> is the smaller unit, and the <code>row</code> the bigger one (it is multiplied), yet in <code>checkHorizontalWin</code> you extract <code>moveX</code> as the bigger unit (as you divide), which is later used for the loop variable <code>column</code>.</p>\n<p>You can fix this by changing the initialisation of <code>moveX</code> and <code>moveY</code> to:</p>\n<pre><code>    int moveX = moveIdx % gameSize;\n    int moveY = moveIdx / gameSize;\n</code></pre>\n<p>Finally, this is an overly complex algorithm. You already know what the last move was, as you can read <code>gameBoard[moveX]</code> and it is <strong>that</strong> character you want to check with, nothing else. So the variable <code>candidate</code> could be set to it -- only once. Then you don't need that <code>pawn == '-'</code> check anymore and only need to reset the counter to 0 when you find a character that is different from <code>candidate</code>.</p>\n<p>Moreover, for horizontal wins it is not necessary to look at any other row than the row of the last move.</p>\n"}],"owner":{"account_id":23058102,"reputation":11,"user_id":17173862,"display_name":"Kacper Rydzyński"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674748988,"creation_date":1674737648,"question_id":75246421,"body_markdown":"I wrote algortihm tht checks just part of tic tac toe game board, let&#39;s say its 10x10 size.\r\nThere&#39;s no need to iterate throught whole board every time, just around player move index + game diffuculty in each direction.\r\n\r\nHere is my impl:\r\n\r\n     private boolean checkHorizontalWin(String gameBoard, int gameSize, int gameDifficulty, int moveIdx) {\r\n        // CHECK HORIZONTAL WIN\r\n        int moveX = moveIdx / gameSize; // 15/10=1\r\n        int moveY = moveIdx % gameSize; // 15%10=5\r\n\r\n        int startX = clamp(moveX - gameDifficulty, 0, gameSize);\r\n        int startY = clamp(moveY - gameDifficulty, 0, gameSize);\r\n        int endX = clamp(moveX + gameDifficulty, 0, gameSize);\r\n        int endY = clamp(moveY + gameDifficulty, 0, gameSize);\r\n\r\n        for (int row = startY; row &lt; endY; row++) {\r\n            char candidate = getPawnAtCoords(gameBoard, gameSize, row, 0);\r\n            int counter = 1;\r\n            for (int column = startX; column &lt; endX; column++) {\r\n                char pawn = getPawnAtCoords(gameBoard, gameSize, row, column);\r\n\r\n                if ((pawn == candidate) &amp;&amp; (pawn != &#39;-&#39;)) {\r\n                    counter++;\r\n                } else {\r\n                    counter = 1;\r\n                    candidate = pawn;\r\n                }\r\n\r\n                if (counter == gameDifficulty) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n-----\r\n\r\n     private int clamp(int val, int min, int max) {\r\n        return Math.max(min, Math.min(max, val));\r\n    }\r\n\r\n-----\r\n\r\n     private char getPawnAtCoords(String board, int gameSize, int row, int column) {\r\n        int index = row * gameSize + column; // 1 * 10 + 5\r\n        return board.charAt(index);\r\n    }\r\n\r\nAlgorithm is not working as it&#39;s should when player move index is placed on board corner.\r\nAnyone gat an idea?","title":"Algorithm That Checks Just Part Of Custom Size TicTacToe Game","body":"<p>I wrote algortihm tht checks just part of tic tac toe game board, let's say its 10x10 size.\nThere's no need to iterate throught whole board every time, just around player move index + game diffuculty in each direction.</p>\n<p>Here is my impl:</p>\n<pre><code> private boolean checkHorizontalWin(String gameBoard, int gameSize, int gameDifficulty, int moveIdx) {\n    // CHECK HORIZONTAL WIN\n    int moveX = moveIdx / gameSize; // 15/10=1\n    int moveY = moveIdx % gameSize; // 15%10=5\n\n    int startX = clamp(moveX - gameDifficulty, 0, gameSize);\n    int startY = clamp(moveY - gameDifficulty, 0, gameSize);\n    int endX = clamp(moveX + gameDifficulty, 0, gameSize);\n    int endY = clamp(moveY + gameDifficulty, 0, gameSize);\n\n    for (int row = startY; row &lt; endY; row++) {\n        char candidate = getPawnAtCoords(gameBoard, gameSize, row, 0);\n        int counter = 1;\n        for (int column = startX; column &lt; endX; column++) {\n            char pawn = getPawnAtCoords(gameBoard, gameSize, row, column);\n\n            if ((pawn == candidate) &amp;&amp; (pawn != '-')) {\n                counter++;\n            } else {\n                counter = 1;\n                candidate = pawn;\n            }\n\n            if (counter == gameDifficulty) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n</code></pre>\n<hr />\n<pre><code> private int clamp(int val, int min, int max) {\n    return Math.max(min, Math.min(max, val));\n}\n</code></pre>\n<hr />\n<pre><code> private char getPawnAtCoords(String board, int gameSize, int row, int column) {\n    int index = row * gameSize + column; // 1 * 10 + 5\n    return board.charAt(index);\n}\n</code></pre>\n<p>Algorithm is not working as it's should when player move index is placed on board corner.\nAnyone gat an idea?</p>\n"},{"tags":["java","unit-testing","gradle","mocking","mockito"],"comments":[{"owner":{"account_id":4623673,"reputation":6002,"user_id":4161471,"display_name":"aSemy"},"score":0,"creation_date":1674897112,"post_id":75248610,"comment_id":132814945,"body_markdown":"_&quot;there is zero articles/documentation on how to properly test and mock Gradle Plugins&quot;_ There is documentation on testing Gradle plugins here: https://docs.gradle.org/7.6/userguide/testing_gradle_plugins.html","body":"<i>&quot;there is zero articles/documentation on how to properly test and mock Gradle Plugins&quot;</i> There is documentation on testing Gradle plugins here: <a href=\"https://docs.gradle.org/7.6/userguide/testing_gradle_plugins.html\" rel=\"nofollow noreferrer\">docs.gradle.org/7.6/userguide/testing_gradle_plugins.html</a>"},{"owner":{"account_id":57416,"reputation":7345,"user_id":171991,"accept_rate":86,"display_name":"marverix"},"score":2,"creation_date":1675012619,"post_id":75248610,"comment_id":132832196,"body_markdown":"Sorry, but this documentation is almost useless. There is no information how to mock Gradle projects.","body":"Sorry, but this documentation is almost useless. There is no information how to mock Gradle projects."}],"owner":{"account_id":57416,"reputation":7345,"user_id":171991,"accept_rate":86,"display_name":"marverix"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1674748715,"creation_date":1674748715,"question_id":75248610,"body_markdown":"I&#39;m trying to write UT for my Gradle plugin. I faced a wall while trying to mock Gradle Project methods. Under the hood, I&#39;m using Gradle Properties to calculate the plugin&#39;s extension providers. Example:\r\n\r\n```java\r\nthis.outputDir = project.getObjects().property(String.class);\r\nthis.outputDir.convention(project.provider(() -&gt; {\r\n  if (project.hasProperty(&quot;com.example.outputDir&quot;)) {\r\n    return project.property(&quot;com.example.outputDir&quot;).toString();\r\n  }\r\n  return &quot;./default-output&quot;;\r\n}));\r\n```\r\n\r\nI wanted to write simple tests checking if I provide the `com.example.outputDir` property, it will be returned by the convention. So I figured out, that I will mock `project.hasProperty` and `project.property`:\r\n\r\n```java\r\n// Creating Gradle Project on the fly\r\nProjectBuilder builder = ProjectBuilder.builder();\r\n\r\n// Mocking the Project (Project is an interface)\r\nProject testProject = Mockito.spy(builder.build());\r\n\r\n// Applying the plugin to the mocked project\r\ntestProject.getPlugins().apply(PLUGIN_NAME);\r\n\r\n// Enabling mock\r\nwhen(testProject.hasProperty(&quot;com.example.outputDir&quot;)).thenReturn(true);\r\n\r\n// This works (obviously)\r\nAssertions.assertEquals(true, testProject.hasProperty(&quot;com.example.outputDir&quot;));\r\n\r\n// This does not work\r\nMyExtension ext = (MyExtension) testProject.getExtensions().getByName(&quot;my-extension&quot;);\r\nAssertions.assertEquals(&quot;hello-world&quot;, ext.ouputDir.get());\r\n```\r\n\r\nAfter digging in into IntelliJ debugger, it seems that Gradle is keeping a registry of the projects... So when the extension is created, it&#39;s getting a reference to the original project, not mocked one. Which is super weird for me, because I&#39;m using `testProject.getPlugins().apply(PLUGIN_NAME);` so why on earth Gradle would not use a reference of the project that has called the function, and instead it&#39;s checking &quot;own source&quot;?\r\n\r\nSo I&#39;m wondering if is it even possible to test and mock Gradle Projects (and Plugins)? I heard that Gradle is a super popular tool, but there is zero articles/documentation on how to properly test and mock Gradle Plugins.\r\n\r\nI would appreciate for any help and guidance in this area. ","title":"Is it possible to mock Gradle Project methods?","body":"<p>I'm trying to write UT for my Gradle plugin. I faced a wall while trying to mock Gradle Project methods. Under the hood, I'm using Gradle Properties to calculate the plugin's extension providers. Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>this.outputDir = project.getObjects().property(String.class);\nthis.outputDir.convention(project.provider(() -&gt; {\n  if (project.hasProperty(&quot;com.example.outputDir&quot;)) {\n    return project.property(&quot;com.example.outputDir&quot;).toString();\n  }\n  return &quot;./default-output&quot;;\n}));\n</code></pre>\n<p>I wanted to write simple tests checking if I provide the <code>com.example.outputDir</code> property, it will be returned by the convention. So I figured out, that I will mock <code>project.hasProperty</code> and <code>project.property</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Creating Gradle Project on the fly\nProjectBuilder builder = ProjectBuilder.builder();\n\n// Mocking the Project (Project is an interface)\nProject testProject = Mockito.spy(builder.build());\n\n// Applying the plugin to the mocked project\ntestProject.getPlugins().apply(PLUGIN_NAME);\n\n// Enabling mock\nwhen(testProject.hasProperty(&quot;com.example.outputDir&quot;)).thenReturn(true);\n\n// This works (obviously)\nAssertions.assertEquals(true, testProject.hasProperty(&quot;com.example.outputDir&quot;));\n\n// This does not work\nMyExtension ext = (MyExtension) testProject.getExtensions().getByName(&quot;my-extension&quot;);\nAssertions.assertEquals(&quot;hello-world&quot;, ext.ouputDir.get());\n</code></pre>\n<p>After digging in into IntelliJ debugger, it seems that Gradle is keeping a registry of the projects... So when the extension is created, it's getting a reference to the original project, not mocked one. Which is super weird for me, because I'm using <code>testProject.getPlugins().apply(PLUGIN_NAME);</code> so why on earth Gradle would not use a reference of the project that has called the function, and instead it's checking &quot;own source&quot;?</p>\n<p>So I'm wondering if is it even possible to test and mock Gradle Projects (and Plugins)? I heard that Gradle is a super popular tool, but there is zero articles/documentation on how to properly test and mock Gradle Plugins.</p>\n<p>I would appreciate for any help and guidance in this area.</p>\n"},{"tags":["java","html","css","angular","typescript"],"answers":[{"comments":[{"owner":{"account_id":21173734,"reputation":5524,"user_id":15569492,"display_name":"Mic Fung"},"score":0,"creation_date":1621444958,"post_id":67607980,"comment_id":119500253,"body_markdown":"i think your id is a string and you should avoid using `any` as much as possible.  the type should be `{ [key:string]: { content: string, title: string } }`","body":"i think your id is a string and you should avoid using <code>any</code> as much as possible.  the type should be <code>{ [key:string]: { content: string, title: string } }</code>"},{"owner":{"account_id":12440419,"reputation":485,"user_id":9058905,"display_name":"bitvalser"},"score":0,"creation_date":1621445111,"post_id":67607980,"comment_id":119500331,"body_markdown":"Can you consolidate the posts object (at least partially) in your function and show which fields come? But in your place, instead of using the REST API (it is very limited compared to the library), I would suggest using a special library for working with firebase for angular https://www.npmjs.com/package/@angular/fire","body":"Can you consolidate the posts object (at least partially) in your function and show which fields come? But in your place, instead of using the REST API (it is very limited compared to the library), I would suggest using a special library for working with firebase for angular <a href=\"https://www.npmjs.com/package/@angular/fire\" rel=\"nofollow noreferrer\">npmjs.com/package/@angular/fire</a>"}],"tags":[],"owner":{"account_id":21589224,"reputation":101,"user_id":15919145,"display_name":"NaingMinZaw"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1621444724,"creation_date":1621444724,"answer_id":67607980,"question_id":67607412,"body_markdown":"the solution\r\n\r\n          private fetchPost(){\r\n          return this.http.get(&#39;https://ng-complete-guide-b3d7f-default- \r\n          rtdb.firebaseio.com/posts.json&#39;)\r\n        .pipe(map((responseData:{[data:number]:any}) =&gt;  {\r\n         const dataArray = [];\r\n         for(let key in responseData){\r\n      if(responseData.hasOwnProperty(key)){\r\n        dataArray.push({...responseData[key], id:key});\r\n      }\r\n      }\r\n        return dataArray;\r\n      }))\r\n     .subscribe( responseData =&gt; {\r\n      console.log(responseData)\r\n     })\r\n     }\r\n\r\n     .pipe(map((responseData:{[data:number]:any}) //object type","title":"TS7053: Element implicitly has an &#39;any&#39; type because expression of type &#39;string&#39; can&#39;t be used to index type &#39;Object&#39;","body":"<p>the solution</p>\n<pre><code>      private fetchPost(){\n      return this.http.get('https://ng-complete-guide-b3d7f-default- \n      rtdb.firebaseio.com/posts.json')\n    .pipe(map((responseData:{[data:number]:any}) =&gt;  {\n     const dataArray = [];\n     for(let key in responseData){\n  if(responseData.hasOwnProperty(key)){\n    dataArray.push({...responseData[key], id:key});\n  }\n  }\n    return dataArray;\n  }))\n .subscribe( responseData =&gt; {\n  console.log(responseData)\n })\n }\n\n .pipe(map((responseData:{[data:number]:any}) //object type\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20908619,"reputation":1,"user_id":15360002,"display_name":"HHH"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674748544,"creation_date":1674748412,"answer_id":75248552,"question_id":67607412,"body_markdown":"The Firebase nested object can be converted to this data type in the map function:&lt;br&gt;\r\n**responseData:{[key:string]:any}**\r\n\r\n ```javascript\r\nprivate fetchPosts() {\r\n    this.http\r\n      .get(&#39;https://ng-complete-guide-b3d7f-default- \r\n      rtdb.firebaseio.com/posts.json&#39;)\r\n      .pipe(map(\r\n        (responseData:{[key:string]:any}) =&gt; {\r\n        const dataArray = [];\r\n        for (const key in responseData) {\r\n          if(responseData.hasOwnProperty(key)){\r\n            dataArray.push({ ...responseData[key], id:key})\r\n          }\r\n        }\r\n        return dataArray;\r\n      }))\r\n      .subscribe(posts =&gt; {\r\n        console.log(posts);\r\n      });\r\n  }\r\n```\r\nI agree that we should avoid using &#39;any&#39; as much as possible. If you find a more accurate type compilable with the latest Angular version, please share it!","title":"TS7053: Element implicitly has an &#39;any&#39; type because expression of type &#39;string&#39; can&#39;t be used to index type &#39;Object&#39;","body":"<p>The Firebase nested object can be converted to this data type in the map function:<br>\n<strong>responseData:{[key:string]:any}</strong></p>\n<pre class=\"lang-js prettyprint-override\"><code>private fetchPosts() {\n   this.http\n     .get('https://ng-complete-guide-b3d7f-default- \n     rtdb.firebaseio.com/posts.json')\n     .pipe(map(\n       (responseData:{[key:string]:any}) =&gt; {\n       const dataArray = [];\n       for (const key in responseData) {\n         if(responseData.hasOwnProperty(key)){\n           dataArray.push({ ...responseData[key], id:key})\n         }\n       }\n       return dataArray;\n     }))\n     .subscribe(posts =&gt; {\n       console.log(posts);\n     });\n }\n</code></pre>\n<p>I agree that we should avoid using 'any' as much as possible. If you find a more accurate type compilable with the latest Angular version, please share it!</p>\n"}],"owner":{"account_id":21589224,"reputation":101,"user_id":15919145,"display_name":"NaingMinZaw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":656,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67607980,"answer_count":2,"score":1,"last_activity_date":1674748544,"creation_date":1621442505,"question_id":67607412,"body_markdown":"I try to post datas by using templateDrivenForm directly and get datas from fireBase but show the following type error.\r\n\r\nMy part of codes\r\n\r\n    //directly posts datas using submitButton from templateDrivenForm\r\n     onCreatePosts(postDatas:{title:string, content:string}){\r\n    this.http.post(&#39;https://ng-complete-guide-b3d7f-default-rtdb.firebaseio.com/posts.json&#39;,\r\n     postDatas)\r\n    .subscribe(\r\n     responseData =&gt; {\r\n      console.log(responseData);\r\n     });\r\n     }\r\n\r\n     //get datas from database\r\n       private fetchPost(){\r\n         return this.http.get(&#39;https://ng-complete-guide-b3d7f-default-rtdb.firebaseio.com/posts.json&#39;)\r\n       .pipe(map(responseData =&gt;  {\r\n         const dataArray = [];\r\n        for(let key in responseData){\r\n        if(responseData.hasOwnProperty(key)){\r\n        dataArray.push({...responseData[key], id:key});\r\n        }\r\n      }\r\n      return dataArray;\r\n     }))\r\n      .subscribe( responseData =&gt; {\r\n      console.log(responseData)\r\n     })\r\n    }\r\n\r\nMy error is \r\n\r\n         Error: src/app/app.component.ts:40:28 - error TS7053: Element implicitly has an &#39;any&#39; type \r\n          because \r\n         expression of type &#39;string&#39; can&#39;t be used to index type &#39;Object&#39;.\r\n          No index signature with a parameter of type &#39;string&#39; was found on type &#39;Object&#39;.\r\n\r\n         40         dataArray.push({...responseData[key], id:key});","title":"TS7053: Element implicitly has an &#39;any&#39; type because expression of type &#39;string&#39; can&#39;t be used to index type &#39;Object&#39;","body":"<p>I try to post datas by using templateDrivenForm directly and get datas from fireBase but show the following type error.</p>\n<p>My part of codes</p>\n<pre><code>//directly posts datas using submitButton from templateDrivenForm\n onCreatePosts(postDatas:{title:string, content:string}){\nthis.http.post('https://ng-complete-guide-b3d7f-default-rtdb.firebaseio.com/posts.json',\n postDatas)\n.subscribe(\n responseData =&gt; {\n  console.log(responseData);\n });\n }\n\n //get datas from database\n   private fetchPost(){\n     return this.http.get('https://ng-complete-guide-b3d7f-default-rtdb.firebaseio.com/posts.json')\n   .pipe(map(responseData =&gt;  {\n     const dataArray = [];\n    for(let key in responseData){\n    if(responseData.hasOwnProperty(key)){\n    dataArray.push({...responseData[key], id:key});\n    }\n  }\n  return dataArray;\n }))\n  .subscribe( responseData =&gt; {\n  console.log(responseData)\n })\n}\n</code></pre>\n<p>My error is</p>\n<pre><code>     Error: src/app/app.component.ts:40:28 - error TS7053: Element implicitly has an 'any' type \n      because \n     expression of type 'string' can't be used to index type 'Object'.\n      No index signature with a parameter of type 'string' was found on type 'Object'.\n\n     40         dataArray.push({...responseData[key], id:key});\n</code></pre>\n"},{"tags":["java","proxy","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":27625246,"reputation":29,"user_id":21085370,"display_name":"Daniel Delimata"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674747998,"creation_date":1674747998,"answer_id":75248487,"question_id":12033981,"body_markdown":"One way to connect to a proxy server with a user name and password is by using the tool `sshuttle` running on your machine. This tool allows you to create a connection to your proxy server using SSH, and then route all of your traffic.\r\n```\r\n$ sshuttle -r username@remotehost 0.0.0.0/0\r\n```\r\n\r\nSee https://sshuttle.readthedocs.io/en/stable/usage.html for further information.\r\n\r\nAnother approach is to add a Chrome extension. This approach is a bit more complex, but it allows you to use the Chrome WebDriver without any tools running in the background. You would need to create a Chrome extension by including two files in an archive named `proxy.zip`: `Background.js` and `manifest.js`.\r\n\r\n**Background.js**:\r\n```javascript\r\nvar config = {\r\n    mode: &quot;fixed_servers&quot;,\r\n    rules: {\r\n        singleProxy: {\r\n            scheme: &quot;http&quot;,\r\n            host: &quot;YOUR_PROXY_ADDRESS&quot;,\r\n            port: parseInt(PROXY_PORT)\r\n        },\r\n        bypassList: [&quot;foobar.com&quot;]\r\n    }\r\n};\r\nchrome.proxy.settings.set({ value: config, scope: &quot;regular&quot; }, function () { });\r\nfunction callbackFn(details) {\r\n    return {\r\n        authCredentials: {\r\n            username: &quot;PROXY_USERNAME&quot;,\r\n            password: &quot;PROXY_PASSWORD&quot;\r\n        }\r\n    };\r\n}\r\n\r\nchrome.webRequest.onAuthRequired.addListener(\r\n    callbackFn,\r\n    { urls: [&quot;&lt;all_urls&gt;&quot;] },\r\n    [&#39;blocking&#39;]\r\n);\r\n```\r\n\r\n**manifest.js**:\r\n```javascript\r\nvar config = {\r\n    mode: &quot;fixed_servers&quot;,\r\n    rules: {\r\n        singleProxy: {\r\n            scheme: &quot;http&quot;,\r\n            host: &quot;YOUR_PROXY_ADDRESS&quot;,\r\n            port: parseInt(PROXY_PORT)\r\n        },\r\n        bypassList: [&quot;foobar.com&quot;]\r\n    }\r\n};\r\nchrome.proxy.settings.set({ value: config, scope: &quot;regular&quot; }, function () { });\r\nfunction callbackFn(details) {\r\n    return {\r\n        authCredentials: {\r\n            username: &quot;PROXY_USERNAME&quot;,\r\n            password: &quot;PROXY_PASSWORD&quot;\r\n        }{\r\n            &quot;version&quot;: &quot;1.0.0&quot;,\r\n            &quot;manifest_version&quot;: 3,\r\n            &quot;name&quot;: &quot;Chrome Proxy&quot;,\r\n            &quot;permissions&quot;: [\r\n            &quot;Proxy&quot;,\r\n            &quot;Tabs&quot;,\r\n            &quot;unlimitedStorage&quot;,\r\n            &quot;Storage&quot;,\r\n            &quot;&lt;all_urls&gt;&quot;,\r\n            &quot;webRequest&quot;,\r\n            &quot;webRequestBlocking&quot;\r\n            ],\r\n            &quot;background&quot;: {\r\n            &quot;scripts&quot;: [&quot;background.js&quot;]\r\n            },\r\n            &quot;Minimum_chrome_version&quot;:&quot;76.0.0&quot;\r\n            }\r\n    };\r\n}\r\n\r\nchrome.webRequest.onAuthRequired.addListener(\r\n    callbackFn,\r\n    { urls: [&quot;&lt;all_urls&gt;&quot;] },\r\n    [&#39;blocking&#39;]\r\n);\r\n```\r\n\r\nThen you would need to add the Chrome extension to the ChromeOptions using the `addExtension` method:\r\n```java\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.addExtensions(&quot;proxy.zip&quot;);\r\n```\r\n\r\nThe details are described (for Python) on the page: https://www.browserstack.com/guide/set-proxy-in-selenium","title":"selenium chromedriver authentication proxy","body":"<p>One way to connect to a proxy server with a user name and password is by using the tool <code>sshuttle</code> running on your machine. This tool allows you to create a connection to your proxy server using SSH, and then route all of your traffic.</p>\n<pre><code>$ sshuttle -r username@remotehost 0.0.0.0/0\n</code></pre>\n<p>See <a href=\"https://sshuttle.readthedocs.io/en/stable/usage.html\" rel=\"nofollow noreferrer\">https://sshuttle.readthedocs.io/en/stable/usage.html</a> for further information.</p>\n<p>Another approach is to add a Chrome extension. This approach is a bit more complex, but it allows you to use the Chrome WebDriver without any tools running in the background. You would need to create a Chrome extension by including two files in an archive named <code>proxy.zip</code>: <code>Background.js</code> and <code>manifest.js</code>.</p>\n<p><strong>Background.js</strong>:</p>\n<pre class=\"lang-js prettyprint-override\"><code>var config = {\n    mode: &quot;fixed_servers&quot;,\n    rules: {\n        singleProxy: {\n            scheme: &quot;http&quot;,\n            host: &quot;YOUR_PROXY_ADDRESS&quot;,\n            port: parseInt(PROXY_PORT)\n        },\n        bypassList: [&quot;foobar.com&quot;]\n    }\n};\nchrome.proxy.settings.set({ value: config, scope: &quot;regular&quot; }, function () { });\nfunction callbackFn(details) {\n    return {\n        authCredentials: {\n            username: &quot;PROXY_USERNAME&quot;,\n            password: &quot;PROXY_PASSWORD&quot;\n        }\n    };\n}\n\nchrome.webRequest.onAuthRequired.addListener(\n    callbackFn,\n    { urls: [&quot;&lt;all_urls&gt;&quot;] },\n    ['blocking']\n);\n</code></pre>\n<p><strong>manifest.js</strong>:</p>\n<pre class=\"lang-js prettyprint-override\"><code>var config = {\n    mode: &quot;fixed_servers&quot;,\n    rules: {\n        singleProxy: {\n            scheme: &quot;http&quot;,\n            host: &quot;YOUR_PROXY_ADDRESS&quot;,\n            port: parseInt(PROXY_PORT)\n        },\n        bypassList: [&quot;foobar.com&quot;]\n    }\n};\nchrome.proxy.settings.set({ value: config, scope: &quot;regular&quot; }, function () { });\nfunction callbackFn(details) {\n    return {\n        authCredentials: {\n            username: &quot;PROXY_USERNAME&quot;,\n            password: &quot;PROXY_PASSWORD&quot;\n        }{\n            &quot;version&quot;: &quot;1.0.0&quot;,\n            &quot;manifest_version&quot;: 3,\n            &quot;name&quot;: &quot;Chrome Proxy&quot;,\n            &quot;permissions&quot;: [\n            &quot;Proxy&quot;,\n            &quot;Tabs&quot;,\n            &quot;unlimitedStorage&quot;,\n            &quot;Storage&quot;,\n            &quot;&lt;all_urls&gt;&quot;,\n            &quot;webRequest&quot;,\n            &quot;webRequestBlocking&quot;\n            ],\n            &quot;background&quot;: {\n            &quot;scripts&quot;: [&quot;background.js&quot;]\n            },\n            &quot;Minimum_chrome_version&quot;:&quot;76.0.0&quot;\n            }\n    };\n}\n\nchrome.webRequest.onAuthRequired.addListener(\n    callbackFn,\n    { urls: [&quot;&lt;all_urls&gt;&quot;] },\n    ['blocking']\n);\n</code></pre>\n<p>Then you would need to add the Chrome extension to the ChromeOptions using the <code>addExtension</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        ChromeOptions options = new ChromeOptions();\n        options.addExtensions(&quot;proxy.zip&quot;);\n</code></pre>\n<p>The details are described (for Python) on the page: <a href=\"https://www.browserstack.com/guide/set-proxy-in-selenium\" rel=\"nofollow noreferrer\">https://www.browserstack.com/guide/set-proxy-in-selenium</a></p>\n"}],"owner":{"account_id":1659886,"reputation":71,"user_id":1609459,"display_name":"Nimrod Ben-Simon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4037,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1674747998,"creation_date":1345449025,"question_id":12033981,"body_markdown":"I need to connect to a proxy server with a\r\nuser name and password (i.e USERNAME:PASSWD@IP:PORT)\r\nwith chromedriver webdriver in selenium 2 in java.\r\nI&#39;ve found how to do it without using a user name \r\nand password, but haven&#39;t found a way to do it with.\r\n\r\nThanks.","title":"selenium chromedriver authentication proxy","body":"<p>I need to connect to a proxy server with a\nuser name and password (i.e USERNAME:PASSWD@IP:PORT)\nwith chromedriver webdriver in selenium 2 in java.\nI've found how to do it without using a user name \nand password, but haven't found a way to do it with.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","date","java-8","localdate"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1674715500,"post_id":75241672,"comment_id":132774005,"body_markdown":"*looking for an alternate solution in java 8* Yes, this is 100 % what you want. What you have observed is how `SimpleDateFormat` misbehaves. Also you have got nothing to use it for here. Try the no-arg `LocalDate.parse()` without giving any formatter, or try `DateTimeFormatter.ISO_LOCAL_DATE`. `LocalDate.parse(&quot;2023-02-29&quot;)` and `LocalDate.parse(&quot;2023-13-21&quot;)` both throw exceptions.","body":"<i>looking for an alternate solution in java 8</i> Yes, this is 100 % what you want. What you have observed is how <code>SimpleDateFormat</code> misbehaves. Also you have got nothing to use it for here. Try the no-arg <code>LocalDate.parse()</code> without giving any formatter, or try <code>DateTimeFormatter.ISO_LOCAL_DATE</code>. <code>LocalDate.parse(&quot;2023-02-29&quot;)</code> and <code>LocalDate.parse(&quot;2023-13-21&quot;)</code> both throw exceptions."}],"answers":[{"comments":[{"owner":{"account_id":17965359,"reputation":305,"user_id":13055352,"display_name":"happytohelp"},"score":0,"creation_date":1674702494,"post_id":75241764,"comment_id":132772689,"body_markdown":"same results actually may be I have to use .withResolverStyle(STRICT)","body":"same results actually may be I have to use .withResolverStyle(STRICT)"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1674702549,"post_id":75241764,"comment_id":132772695,"body_markdown":"What do you mean &quot;same results?&quot; Only the first call succeeds.  The others throw exceptions.","body":"What do you mean &quot;same results?&quot; Only the first call succeeds.  The others throw exceptions."},{"owner":{"account_id":17965359,"reputation":305,"user_id":13055352,"display_name":"happytohelp"},"score":0,"creation_date":1674702990,"post_id":75241764,"comment_id":132772750,"body_markdown":"you are correct, I had to recompile and restart my server. it worked. Thank you!!","body":"you are correct, I had to recompile and restart my server. it worked. Thank you!!"},{"owner":{"account_id":17965359,"reputation":305,"user_id":13055352,"display_name":"happytohelp"},"score":0,"creation_date":1674703002,"post_id":75241764,"comment_id":132772751,"body_markdown":"btw any idea why sdf wont work?","body":"btw any idea why sdf wont work?"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1674703285,"post_id":75241764,"comment_id":132772783,"body_markdown":"*btw any idea why sdf wont work?*  I&#39;m not certain.  The JavaDoc doesn&#39;t say but I believe it is doing a lenient parse and correcting the date to match.","body":"<i>btw any idea why sdf wont work?</i>  I&#39;m not certain.  The JavaDoc doesn&#39;t say but I believe it is doing a lenient parse and correcting the date to match."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":2,"creation_date":1674703627,"post_id":75241764,"comment_id":132772815,"body_markdown":"OK I found it.  SimpleDateFormat extends DateFormat which has a `setLenient` method.  It defaults to `lenient` as shown by print `sdf.isLenient()`  Had you done a `setLenient(false)` it would probably have worked for you.  But I would still use `LocalDate` and stay away from the legacy date/time methods as they are buggy.","body":"OK I found it.  SimpleDateFormat extends DateFormat which has a <code>setLenient</code> method.  It defaults to <code>lenient</code> as shown by print <code>sdf.isLenient()</code>  Had you done a <code>setLenient(false)</code> it would probably have worked for you.  But I would still use <code>LocalDate</code> and stay away from the legacy date/time methods as they are buggy."},{"owner":{"account_id":17965359,"reputation":305,"user_id":13055352,"display_name":"happytohelp"},"score":0,"creation_date":1674704756,"post_id":75241764,"comment_id":132772927,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/251399/discussion-between-happytohelp-and-wjs).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/251399/discussion-between-happytohelp-and-wjs\">continue this discussion in chat</a>."},{"owner":{"account_id":17965359,"reputation":305,"user_id":13055352,"display_name":"happytohelp"},"score":1,"creation_date":1674705297,"post_id":75241764,"comment_id":132772974,"body_markdown":"2003-02-31 will not throw error with above code","body":"2003-02-31 will not throw error with above code"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1674715720,"post_id":75241764,"comment_id":132774043,"body_markdown":"Do not give any explicit formatter here. The one-arg `LocalDate.parse(CharSequence)` resolves strictly so rejects for example `2003-02-31`.","body":"Do not give any explicit formatter here. The one-arg <code>LocalDate.parse(CharSequence)</code> resolves strictly so rejects for example <code>2003-02-31</code>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1674716110,"post_id":75241764,"comment_id":132774102,"body_markdown":"There are first of all many ways in which `SimpleDateFormat` won’t work and therefore many corresponding reasons. Leniency is just one of the problems.","body":"There are first of all many ways in which <code>SimpleDateFormat</code> won’t work and therefore many corresponding reasons. Leniency is just one of the problems."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1674731936,"post_id":75241764,"comment_id":132778453,"body_markdown":"@OleV.V. Why would some be rejected and others not.  Seems sort of partially strict.","body":"@OleV.V. Why would some be rejected and others not.  Seems sort of partially strict."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1674732550,"post_id":75241764,"comment_id":132778610,"body_markdown":"The formatter you get from `ofPattern()` is “smart” which is supposed to be something between lenient and strict. From [the documentation](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/format/ResolverStyle.html#SMART): *For example, resolving year-month and day-of-month in the ISO calendar system using smart mode will ensure that the day-of-month is from 1 to 31, converting any value beyond the last valid day-of-month to be the last valid day-of-month.*","body":"The formatter you get from <code>ofPattern()</code> is “smart” which is supposed to be something between lenient and strict. From <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/format/ResolverStyle.html#SMART\" rel=\"nofollow noreferrer\">the documentation</a>: <i>For example, resolving year-month and day-of-month in the ISO calendar system using smart mode will ensure that the day-of-month is from 1 to 31, converting any value beyond the last valid day-of-month to be the last valid day-of-month.</i>"},{"owner":{"account_id":17965359,"reputation":305,"user_id":13055352,"display_name":"happytohelp"},"score":0,"creation_date":1674742176,"post_id":75241764,"comment_id":132781614,"body_markdown":"@OleV.V., so if I use one arg, how can I format the date to my requirement (2003-02-31)? or do you mean its by default formats in yyyy-MM-dd?","body":"@OleV.V., so if I use one arg, how can I format the date to my requirement (2003-02-31)? or do you mean its by default formats in yyyy-MM-dd?"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1674742535,"post_id":75241764,"comment_id":132781756,"body_markdown":"@happytohelp  Yes that is the default.  `DateTimeFormatter.ISO_LOCAL_DATE` which matches your dashed format.","body":"@happytohelp  Yes that is the default.  <code>DateTimeFormatter.ISO_LOCAL_DATE</code> which matches your dashed format."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1674743014,"post_id":75241764,"comment_id":132781950,"body_markdown":"@happytohelp  I modified my answer to include that information.","body":"@happytohelp  I modified my answer to include that information."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1674743044,"post_id":75241764,"comment_id":132781963,"body_markdown":"@happytohelp Are you overthinking it? I thought you asked about converting a string to a `LocalDate`, that which is called *parsing*. Do you want to *format* instead? A `LocalDate` cannot have a format, only a string can. And `LocalDate.toString()` produces a string in `yyyy-MM-dd` format. Really `uuuu-MM-dd`, but for years in the 1–9999 range they are the same. The full explanation is [here](https://stackoverflow.com/questions/41177442/uuuu-versus-yyyy-in-datetimeformatter-formatting-pattern-codes-in-java).","body":"@happytohelp Are you overthinking it? I thought you asked about converting a string to a <code>LocalDate</code>, that which is called <i>parsing</i>. Do you want to <i>format</i> instead? A <code>LocalDate</code> cannot have a format, only a string can. And <code>LocalDate.toString()</code> produces a string in <code>yyyy-MM-dd</code> format. Really <code>uuuu-MM-dd</code>, but for years in the 1–9999 range they are the same. The full explanation is <a href=\"https://stackoverflow.com/questions/41177442/uuuu-versus-yyyy-in-datetimeformatter-formatting-pattern-codes-in-java\">here</a>."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1674743149,"post_id":75241764,"comment_id":132782015,"body_markdown":"@OleV.V.  I&#39;m pretty certain the OP is concerned about the source String being able to be parsed correctly.  And since it is specified in ISO_LOCAL_DATE format, it will work, as you explained in the comments.  The ultimate desired output format was never discussed.","body":"@OleV.V.  I&#39;m pretty certain the OP is concerned about the source String being able to be parsed correctly.  And since it is specified in ISO_LOCAL_DATE format, it will work, as you explained in the comments.  The ultimate desired output format was never discussed."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":17,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1674742975,"creation_date":1674699666,"answer_id":75241764,"question_id":75241672,"body_markdown":"Try it like this. Don&#39;t use Date or SimpleDateFormat. As stated by [Ole V.V](https://stackoverflow.com/users/5772882/ole-v-v) the default, strict, format is `DateTimeFormatter.ISO_LOCAL_DATE` is used by `LocalDate.parse()`. \r\nThat also matches your requirements.  \r\n```\r\nimport java.time.LocalDate;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.time.format.DateTimeParseException;\r\n\r\npublic static LocalDate stringToLD(String inputDate) {\r\n    \r\n    try {\r\n        return LocalDate.parse(inputDate);\r\n       \r\n    } catch (DateTimeParseException e) {\r\n        throw new IllegalArgumentException(&quot;Unable to parse date, &quot; + inputDate);\r\n    }\r\n}","title":"Why is the below SimpleDateFormat showing incorrect date?","body":"<p>Try it like this. Don't use Date or SimpleDateFormat. As stated by <a href=\"https://stackoverflow.com/users/5772882/ole-v-v\">Ole V.V</a> the default, strict, format is <code>DateTimeFormatter.ISO_LOCAL_DATE</code> is used by <code>LocalDate.parse()</code>.\nThat also matches your requirements.</p>\n<pre><code>import java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.time.format.DateTimeParseException;\n\npublic static LocalDate stringToLD(String inputDate) {\n    \n    try {\n        return LocalDate.parse(inputDate);\n       \n    } catch (DateTimeParseException e) {\n        throw new IllegalArgumentException(&quot;Unable to parse date, &quot; + inputDate);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17965359,"reputation":305,"user_id":13055352,"display_name":"happytohelp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1674745792,"accepted_answer_id":75241764,"answer_count":1,"score":1,"last_activity_date":1674747342,"creation_date":1674698377,"question_id":75241672,"body_markdown":"I am trying to validate incoming date string and then convert it to a LocalDate. Here is my code:\r\n\r\n```java\r\npublic class DateTester {\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-01-23&quot;)); \r\n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-13-21&quot;)); \r\n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-24-31&quot;)); \r\n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-36-34&quot;));\r\n\r\n//        converted date is 2023-01-23\r\n//        converted date is2024-01-21\r\n//        converted date is2024-12-31\r\n//        converted date is2026-01-03 \r\n    }\r\n\r\n    public static LocalDate stringToLD(String inputDate) {\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n        Date date;\r\n        try {\r\n            date = sdf.parse(inputDate);\r\n        } catch (ParseException e) {\r\n            throw new IllegalArgumentException(&quot;Unable to parse date, &quot; + inputDate);\r\n        }\r\n        return LocalDate.parse(sdf.format(date));\r\n    }\r\n}\r\n```\r\n\r\nbut however when I send invalid date like 2023-13-21 I get back converted date as 2024-01-21 which is invalid and unwanted result. So I wanted to understand why this is happening and also looking for an alternate solution in java 8","title":"Why is the below SimpleDateFormat showing incorrect date?","body":"<p>I am trying to validate incoming date string and then convert it to a LocalDate. Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DateTester {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-01-23&quot;)); \n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-13-21&quot;)); \n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-24-31&quot;)); \n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-36-34&quot;));\n\n//        converted date is 2023-01-23\n//        converted date is2024-01-21\n//        converted date is2024-12-31\n//        converted date is2026-01-03 \n    }\n\n    public static LocalDate stringToLD(String inputDate) {\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\n        Date date;\n        try {\n            date = sdf.parse(inputDate);\n        } catch (ParseException e) {\n            throw new IllegalArgumentException(&quot;Unable to parse date, &quot; + inputDate);\n        }\n        return LocalDate.parse(sdf.format(date));\n    }\n}\n</code></pre>\n<p>but however when I send invalid date like 2023-13-21 I get back converted date as 2024-01-21 which is invalid and unwanted result. So I wanted to understand why this is happening and also looking for an alternate solution in java 8</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1674738727,"post_id":75246529,"comment_id":132780478,"body_markdown":"You basically can&#39;t (see https://stackoverflow.com/a/501284/1968 for the reason why). What you *can* do of course is use type erasure and store the specific enum inside a non-generic `SomeDomainValidationException` in an `object`. It&#39;s not very satisfactory but here we are.","body":"You basically can&#39;t (see <a href=\"https://stackoverflow.com/a/501284/1968\">stackoverflow.com/a/501284/1968</a> for the reason why). What you <i>can</i> do of course is use type erasure and store the specific enum inside a non-generic <code>SomeDomainValidationException</code> in an <code>object</code>. It&#39;s not very satisfactory but here we are."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1674738865,"post_id":75246529,"comment_id":132780520,"body_markdown":"Why not just have the upper bounds for your field instead of an E?","body":"Why not just have the upper bounds for your field instead of an E?"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1674738885,"post_id":75246529,"comment_id":132780525,"body_markdown":"Why is it generic in the first place? Do you just not want to rewrite the `hint` field and the constructor every time?","body":"Why is it generic in the first place? Do you just not want to rewrite the <code>hint</code> field and the constructor every time?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1674738975,"post_id":75246529,"comment_id":132780552,"body_markdown":"@Sweeper wouldn&#39;t the constructor have to be written in any case? Or did you mean the getter instead?","body":"@Sweeper wouldn&#39;t the constructor have to be written in any case? Or did you mean the getter instead?"},{"owner":{"account_id":7980951,"reputation":2013,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"score":0,"creation_date":1674739129,"post_id":75246529,"comment_id":132780602,"body_markdown":"@Sweeper can you give me some example?","body":"@Sweeper can you give me some example?"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1674739254,"post_id":75246529,"comment_id":132780658,"body_markdown":"The whole abstract exception seems useless. You save typing `private final WarehouseWrongDatesEnum hint;` and equivalents in each impl, but instead have to type `extends SomeDomainValidationException&lt;WarehouseWrongDatesEnum&gt;`.","body":"The whole abstract exception seems useless. You save typing <code>private final WarehouseWrongDatesEnum hint;</code> and equivalents in each impl, but instead have to type <code>extends SomeDomainValidationException&lt;WarehouseWrongDatesEnum&gt;</code>."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1674739269,"post_id":75246529,"comment_id":132780661,"body_markdown":"I mean just inherit `WarehouseMatchingException` directly from `ValidationException`. `hint` would be of type `WarehouseWrongDatesEnum` rather than `E`. I don&#39;t understand why the generic abstract class is needed.","body":"I mean just inherit <code>WarehouseMatchingException</code> directly from <code>ValidationException</code>. <code>hint</code> would be of type <code>WarehouseWrongDatesEnum</code> rather than <code>E</code>. I don&#39;t understand why the generic abstract class is needed."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1674739354,"post_id":75246529,"comment_id":132780693,"body_markdown":"@Thomas Yeah you&#39;re right. I brainfarted.","body":"@Thomas Yeah you&#39;re right. I brainfarted."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1674838040,"post_id":75246529,"comment_id":132805396,"body_markdown":"@Sweeper especially enums. If it is an enum it should be an enum of the necessary type. Why would you have types extending an Enum?","body":"@Sweeper especially enums. If it is an enum it should be an enum of the necessary type. Why would you have types extending an Enum?"}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674747107,"creation_date":1674741429,"answer_id":75247098,"question_id":75246529,"body_markdown":"You _could_ use some interfaces to achieve something like this but this feels a little hacky. I&#39;ll post it anyway to let you decide for yourself.\r\n\r\nFirst, we&#39;ll create 3 interfaces: one to return the &quot;raw&quot; hin, one to return the &quot;generic&quot; hint and one to do a cast:\r\n\r\n    //return the raw hint - this is an internal interface\r\n    interface RawxceptionHint {\r\n\t\tObject getRawHint();\r\n\t}\r\n\r\n    //return the generic hint - this is a public interface\r\n    interface ExceptionHint&lt;T&gt;{\r\n\t\tT getHint();\r\n\t}\r\n\r\n    //adapter to cast the raw hint to the generic one\r\n    interface ExceptionHintAdapter&lt;T&gt; extends ExceptionHint&lt;T&gt;, RawxceptionHint {\r\n\t\tdefault T getHint() {\r\n\t\t\treturn (T)getRawHint();\r\n\t\t}\t\t\t\t\r\n\t}\r\n\r\nNow you can implement your exceptions:  \r\n\r\n    public abstract class SomeDomainValidationException extends ValidationException implements RawxceptionHint {\r\n\r\n      private final Object  hint;\r\n\r\n      public SomeDomainValidationException(String message, Object hint) {\r\n          super(message);\r\n          this.hint = hint;\r\n      }\r\n \r\n      public Object getRawHint() {\r\n        return hint;\r\n      }\r\n    }\r\n   \r\n    class WarehouseMatchingException \r\n               extends SomeDomainValidationException \r\n               implements ExceptionHintAdapter&lt;WarehouseWrongDatesEnum&gt; {\r\n      WarehouseMatchingException (String message, WarehouseWrongDatesEnum hint) {\r\n         super(message, hint);\r\n      }\r\n    }\r\n\r\nNow you can access the hint via `Object getRawHint()` or `WarehouseWrongDatesEnum getHint()`. If you want to restrict access to `getRawHint()` you could cast the exception to `ExceptionHint&lt;WarehouseWrongDatesEnum&gt;`.\r\n\r\n**Note**: as stated initially this feels somewhat hacky and I&#39;m not sure this would even provide any benefit. Maybe there&#39;s a better solution that I can&#39;t think of right now and which supports what you need/want. However, not using that generic &quot;middle class&quot; `SomeDomainValidationException` and putting the hint and its methods directly into `WarehouseMatchingException` would be the safer and less hacky option.","title":"How to create abstract generic class that extends RuntimeException","body":"<p>You <em>could</em> use some interfaces to achieve something like this but this feels a little hacky. I'll post it anyway to let you decide for yourself.</p>\n<p>First, we'll create 3 interfaces: one to return the &quot;raw&quot; hin, one to return the &quot;generic&quot; hint and one to do a cast:</p>\n<pre><code>//return the raw hint - this is an internal interface\ninterface RawxceptionHint {\n    Object getRawHint();\n}\n\n//return the generic hint - this is a public interface\ninterface ExceptionHint&lt;T&gt;{\n    T getHint();\n}\n\n//adapter to cast the raw hint to the generic one\ninterface ExceptionHintAdapter&lt;T&gt; extends ExceptionHint&lt;T&gt;, RawxceptionHint {\n    default T getHint() {\n        return (T)getRawHint();\n    }               \n}\n</code></pre>\n<p>Now you can implement your exceptions:</p>\n<pre><code>public abstract class SomeDomainValidationException extends ValidationException implements RawxceptionHint {\n\n  private final Object  hint;\n\n  public SomeDomainValidationException(String message, Object hint) {\n      super(message);\n      this.hint = hint;\n  }\n\n  public Object getRawHint() {\n    return hint;\n  }\n}\n\nclass WarehouseMatchingException \n           extends SomeDomainValidationException \n           implements ExceptionHintAdapter&lt;WarehouseWrongDatesEnum&gt; {\n  WarehouseMatchingException (String message, WarehouseWrongDatesEnum hint) {\n     super(message, hint);\n  }\n}\n</code></pre>\n<p>Now you can access the hint via <code>Object getRawHint()</code> or <code>WarehouseWrongDatesEnum getHint()</code>. If you want to restrict access to <code>getRawHint()</code> you could cast the exception to <code>ExceptionHint&lt;WarehouseWrongDatesEnum&gt;</code>.</p>\n<p><strong>Note</strong>: as stated initially this feels somewhat hacky and I'm not sure this would even provide any benefit. Maybe there's a better solution that I can't think of right now and which supports what you need/want. However, not using that generic &quot;middle class&quot; <code>SomeDomainValidationException</code> and putting the hint and its methods directly into <code>WarehouseMatchingException</code> would be the safer and less hacky option.</p>\n"}],"owner":{"account_id":7980951,"reputation":2013,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674747107,"creation_date":1674738347,"question_id":75246529,"body_markdown":"I want to create some generic abstract class:\r\n\r\n```\r\npublic abstract class SomeDomainValidationException&lt;E extends Enum&lt;E&gt;&gt; extends ValidationException {\r\n\r\n    private final E hint;\r\n\r\n    public SomeDomainValidationException(String message, E hint) {\r\n        super(message);\r\n        this.hint = hint;\r\n    }\r\n}\r\n```\r\n\r\nwhere:\r\n\r\n```\r\n@ResponseStatus(value = HttpStatus.BAD_REQUEST)\r\npublic class ValidationException extends RuntimeException {\r\n    public ValidationException(String message) {\r\n        super(message);\r\n    }\r\n}\r\n```\r\n\r\nI want to group different types of exceptions in my code, eg I want to create different types of exceptions like:\r\n\r\n```\r\nWarehouseMatchingException \r\n               extends SomeDomainValidationException&lt;WarehouseWrongDatesEnum&gt;\r\n```\r\nbut of course I can&#39;t because generic class may not extend &#39;java.lang.Throwable&#39;\r\n\r\n\r\nHow to create generic class that represents different types of exceptions included in some enums like `WarehouseWrongDatesEnum`?","title":"How to create abstract generic class that extends RuntimeException","body":"<p>I want to create some generic abstract class:</p>\n<pre><code>public abstract class SomeDomainValidationException&lt;E extends Enum&lt;E&gt;&gt; extends ValidationException {\n\n    private final E hint;\n\n    public SomeDomainValidationException(String message, E hint) {\n        super(message);\n        this.hint = hint;\n    }\n}\n</code></pre>\n<p>where:</p>\n<pre><code>@ResponseStatus(value = HttpStatus.BAD_REQUEST)\npublic class ValidationException extends RuntimeException {\n    public ValidationException(String message) {\n        super(message);\n    }\n}\n</code></pre>\n<p>I want to group different types of exceptions in my code, eg I want to create different types of exceptions like:</p>\n<pre><code>WarehouseMatchingException \n               extends SomeDomainValidationException&lt;WarehouseWrongDatesEnum&gt;\n</code></pre>\n<p>but of course I can't because generic class may not extend 'java.lang.Throwable'</p>\n<p>How to create generic class that represents different types of exceptions included in some enums like <code>WarehouseWrongDatesEnum</code>?</p>\n"},{"tags":["java","sql","hibernate","join","hql"],"comments":[{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":0,"creation_date":1674741376,"post_id":75246613,"comment_id":132781328,"body_markdown":"`...FROM t1 JOIN t2 ON t1.cx = t2.cy...`","body":"<code>...FROM t1 JOIN t2 ON t1.cx = t2.cy...</code>"}],"answers":[{"comments":[{"owner":{"account_id":27626884,"reputation":1,"user_id":21086709,"display_name":"Dani"},"score":0,"creation_date":1674755855,"post_id":75248292,"comment_id":132786548,"body_markdown":"After editing I get the following error:  java.lang.ClassCastException: class [Ljava.lang.Object; cannot be cast to class com.danycode.hibernate.entity.Employees ([Ljava.lang.Object; is in module java.base of loader &#39;bootstrap&#39;; com.danycode.hibernate.entity.Employees is in unnamed module of loader org.apache.catalina.loader.ParallelWebappClassLoader @7c351808)","body":"After editing I get the following error:  java.lang.ClassCastException: class [Ljava.lang.Object; cannot be cast to class com.danycode.hibernate.entity.Employees ([Ljava.lang.Object; is in module java.base of loader &#39;bootstrap&#39;; com.danycode.hibernate.entity.Employees is in unnamed module of loader org.apache.catalina.loader.ParallelWebappClassLoader @7c351808)"}],"tags":[],"owner":{"account_id":22384219,"reputation":108,"user_id":16597286,"display_name":"Windir"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674747089,"creation_date":1674747089,"answer_id":75248292,"question_id":75246613,"body_markdown":"```\r\nSELECT e.employeeNumber, \r\n       e.fullName, \r\n       d.departmentName \r\nFROM  \r\n       Employee e \r\nJOIN   Department d where e.department=d.departmentId&quot;).getResultList();\r\n```\r\n&quot;HQL queries are case insensitive; however, the names of Java classes and properties are case-sensitive HQL is used to execute queries against database.&quot;\r\n","title":"HQL with where clause with join doesn&#39;t work","body":"<pre><code>SELECT e.employeeNumber, \n       e.fullName, \n       d.departmentName \nFROM  \n       Employee e \nJOIN   Department d where e.department=d.departmentId&quot;).getResultList();\n</code></pre>\n<p>&quot;HQL queries are case insensitive; however, the names of Java classes and properties are case-sensitive HQL is used to execute queries against database.&quot;</p>\n"}],"owner":{"account_id":27626884,"reputation":1,"user_id":21086709,"display_name":"Dani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674747089,"creation_date":1674738822,"question_id":75246613,"body_markdown":"`Hi, I&#39;m beginner to hibernate and I have to make a select with join. I have two classes Employees and Departments mapped one-to-one, bidirectional that look like this: \r\n\r\n\r\n         @Entity(name=&quot;employee&quot;)\r\n         @Table(name=&quot;employee&quot;)\r\n         public class Employees {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name=&quot;employee_id&quot;)\r\n\tInteger employeeNumber;\r\n\t@Column(name=&quot;full_name&quot;)\r\n\tString fullName;\r\n\t@Column(name=&quot;email_address&quot;)\r\n\tString emailAddress;\r\n\t@Column(name=&quot;phone_number&quot;)\r\n\tlong phoneNumber;\r\n\t@Column(name=&quot;birth_date&quot;)\r\n\tDate birthDate;\r\n\t@Column(name=&quot;gender&quot;)\r\n\tString gender;\r\n\t@Column(name=&quot;address&quot;)\r\n\tString address;\r\n\t@Column(name=&quot;country&quot;)\r\n\tString country;\r\n\t@Column(name=&quot;city&quot;)\r\n\tString city;\r\n\t@Column(name=&quot;region&quot;)\r\n\tString region;\r\n\t@Column(name=&quot;post_code&quot;)\r\n\tString postCode;\r\n\t@Column(name=&quot;hire_date&quot;)\r\n\tDate hireDate;\r\n\t@Column(name=&quot;resignation_date&quot;)\r\n\tDate resignationDate;\r\n\t@Column(name=&quot;position&quot;)\r\n\tString position;\r\n\t@Column(name=&quot;cnp_pin&quot;)\r\n\tString cnp;\r\n\t@Column(name=&quot;document_no&quot;)\r\n\tInteger documentNumber;\r\n\t@Column(name=&quot;expire_doc_no&quot;)\r\n\tDate expireDocument;\r\n\t\r\n\t @OneToOne(cascade=CascadeType.ALL)\r\n\t @JoinColumn(name=&quot;department_id&quot;)\r\n\tDepartments department;\r\n\r\n\r\n\r\n    @Entity(name=&quot;department&quot;)\r\n    @Table(name=&quot;department&quot;)\r\n    public class Departments {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name=&quot;department_id&quot;)\r\n    int departmentId;\r\n    @Column(name=&quot;department_name&quot;)\r\n    String departmentName;\r\n    @Column(name=&quot;leader&quot;)\r\n    String leader;\r\n\r\n    @OneToOne(mappedBy=&quot;department&quot;)\r\n    Employees employee;\r\n\t\r\n\t\r\n\t\r\n\r\nI tried this: \r\n\r\n    @Test\r\n    public List&lt;Employees&gt; listEmployee() {\r\n\t\t   session.beginTransaction();\r\n\t\t  List&lt;Employees&gt; employee = (List&lt;Employees&gt;) session.createQuery(&quot;select         e.employeeNumber, e.fullName, d.departmentName from  employee e JOIN department d where e.department=d.departmentId&quot;).getResultList();\r\n    for(Employees emp:employee) {\r\n    System.out.println(emp);\r\n\t\t}\r\n\t\treturn employee;\r\n\r\n\t}\r\n\r\n  I want to select employeeNumber, fullName and departmentName with JOIN between tables but I have this         error: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that  corresponds to your MySQL server version for the right syntax to use near &#39;where employees0_.department_id=department1_.department_id&#39; at line 1. Can You help me please?`","title":"HQL with where clause with join doesn&#39;t work","body":"<p>`Hi, I'm beginner to hibernate and I have to make a select with join. I have two classes Employees and Departments mapped one-to-one, bidirectional that look like this:</p>\n<pre><code>     @Entity(name=&quot;employee&quot;)\n     @Table(name=&quot;employee&quot;)\n     public class Employees {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name=&quot;employee_id&quot;)\nInteger employeeNumber;\n@Column(name=&quot;full_name&quot;)\nString fullName;\n@Column(name=&quot;email_address&quot;)\nString emailAddress;\n@Column(name=&quot;phone_number&quot;)\nlong phoneNumber;\n@Column(name=&quot;birth_date&quot;)\nDate birthDate;\n@Column(name=&quot;gender&quot;)\nString gender;\n@Column(name=&quot;address&quot;)\nString address;\n@Column(name=&quot;country&quot;)\nString country;\n@Column(name=&quot;city&quot;)\nString city;\n@Column(name=&quot;region&quot;)\nString region;\n@Column(name=&quot;post_code&quot;)\nString postCode;\n@Column(name=&quot;hire_date&quot;)\nDate hireDate;\n@Column(name=&quot;resignation_date&quot;)\nDate resignationDate;\n@Column(name=&quot;position&quot;)\nString position;\n@Column(name=&quot;cnp_pin&quot;)\nString cnp;\n@Column(name=&quot;document_no&quot;)\nInteger documentNumber;\n@Column(name=&quot;expire_doc_no&quot;)\nDate expireDocument;\n\n @OneToOne(cascade=CascadeType.ALL)\n @JoinColumn(name=&quot;department_id&quot;)\nDepartments department;\n\n\n\n@Entity(name=&quot;department&quot;)\n@Table(name=&quot;department&quot;)\npublic class Departments {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name=&quot;department_id&quot;)\nint departmentId;\n@Column(name=&quot;department_name&quot;)\nString departmentName;\n@Column(name=&quot;leader&quot;)\nString leader;\n\n@OneToOne(mappedBy=&quot;department&quot;)\nEmployees employee;\n</code></pre>\n<p>I tried this:</p>\n<pre><code>@Test\npublic List&lt;Employees&gt; listEmployee() {\n       session.beginTransaction();\n      List&lt;Employees&gt; employee = (List&lt;Employees&gt;) session.createQuery(&quot;select         e.employeeNumber, e.fullName, d.departmentName from  employee e JOIN department d where e.department=d.departmentId&quot;).getResultList();\nfor(Employees emp:employee) {\nSystem.out.println(emp);\n    }\n    return employee;\n\n}\n</code></pre>\n<p>I want to select employeeNumber, fullName and departmentName with JOIN between tables but I have this         error: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that  corresponds to your MySQL server version for the right syntax to use near 'where employees0_.department_id=department1_.department_id' at line 1. Can You help me please?`</p>\n"},{"tags":["java","redis","jedis"],"answers":[{"comments":[{"owner":{"account_id":2365474,"reputation":345,"user_id":2071226,"display_name":"Ve9"},"score":0,"creation_date":1674751363,"post_id":75248262,"comment_id":132785088,"body_markdown":"Thanks that was my doubt! Do you also think using UnifiedJedis as singleton is correct?","body":"Thanks that was my doubt! Do you also think using UnifiedJedis as singleton is correct?"},{"owner":{"account_id":4829511,"reputation":5855,"user_id":4021802,"display_name":"sazzad"},"score":1,"creation_date":1674755495,"post_id":75248262,"comment_id":132786442,"body_markdown":"Yes, that&#39;s fine.","body":"Yes, that&#39;s fine."}],"tags":[],"owner":{"account_id":4829511,"reputation":5855,"user_id":4021802,"display_name":"sazzad"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674746960,"creation_date":1674746960,"answer_id":75248262,"question_id":75246783,"body_markdown":"`UnifiedJedis` could act differently depending on parameters.\r\n\r\nIn your object creation, I can see `new JedisPooled(poolConfig, dbUrl, dbPort);`, which means you are actually creating and using `JedisPooled`&lt;sup&gt;[1]&lt;/sup&gt;. This narrows down the possible behaviors of UnifiedJedis and so I am providing answer to your questions only for JedisPooled.\r\n\r\n---\r\n\r\n### The Answer:\r\n\r\nIn JedisPooled you don&#39;t have to get a connection from pool and release it after sending a command. It is automatically done JedisPooled methods.\r\n\r\n---\r\n\r\nNote [1]: JedisPooled is a sub-class of UnifiedJedis. That&#39;s why you could set a JedisPooled object in a UnifiedJedis variable.","title":"Using UnifiedJedis with ConnectionPoolConfig in multi-thread environment","body":"<p><code>UnifiedJedis</code> could act differently depending on parameters.</p>\n<p>In your object creation, I can see <code>new JedisPooled(poolConfig, dbUrl, dbPort);</code>, which means you are actually creating and using <code>JedisPooled</code><sup>[1]</sup>. This narrows down the possible behaviors of UnifiedJedis and so I am providing answer to your questions only for JedisPooled.</p>\n<hr />\n<h3>The Answer:</h3>\n<p>In JedisPooled you don't have to get a connection from pool and release it after sending a command. It is automatically done JedisPooled methods.</p>\n<hr />\n<p>Note [1]: JedisPooled is a sub-class of UnifiedJedis. That's why you could set a JedisPooled object in a UnifiedJedis variable.</p>\n"}],"owner":{"account_id":2365474,"reputation":345,"user_id":2071226,"display_name":"Ve9"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75248262,"answer_count":1,"score":0,"last_activity_date":1674746960,"creation_date":1674739708,"question_id":75246783,"body_markdown":"I&#39;m new using Jedis and I&#39;m not sure if the configuration i used is correct.\r\n\r\nI&#39;m trying to use Jedis in a API server application as a cache used by my handlers. For this reason the environment is a multi-threaded one and i&#39;m looking for the correct configuration for this scenario.\r\n\r\nI found lot of example mentioning the &quot;JedisPool&quot; such as the following:\r\n\r\n    JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();\r\n    ShardedJedisPool pool = new ShardedJedisPool(jedisPoolConfig, shards);\r\n\r\n    try (ShardedJedis jedis = pool.getResource()) {\r\n        jedis.set(&quot;a&quot;, &quot;foo&quot;);\r\n    }\r\n    pool.close();\r\n\r\nBut in my case i need to use a **UnifiedJadis** object in order to have access to **jsonSet** and **jsonGet** methods, which &quot;normal&quot; Jedis does not provide.\r\n\r\nThis is what i&#39;ve done.\r\n\r\nThis is the class i use to manage a UnifiedJedis object as **singleton**.\r\n\r\n```\r\npublic class MyDB{\r\n    //singleton\r\n    public static UnifiedJedis jedisPooled;\r\n    \r\n    //called at startup\r\n    public void init() throws DBConnectionException {\r\n        ConnectionPoolConfig poolConfig = RedisConfig.getRediConfiguration();\r\n        jedisPooled = new JedisPooled(poolConfig, dbUrl, dbPort);\r\n    }\r\n}\r\n```\r\nAt application startup i initialize the connection and inject the singleton everywhere is needed (e.g. in my handlers).\r\n\r\n```\r\npublic class App{\r\n    public static void main(String[] args) throws Exception {\r\n        MyDB db = new MyDB();\r\n        db.init();\r\n        \r\n        //...inject db where needed\r\n    }\r\n}\r\n```\r\n\r\nFinally in my handlers I use the variable injected to use the **jedisPooled** methods jsonGet and jsonSet.\r\n\r\n```\r\npublic class MyHandler{\r\n\r\n    // in the MyHandler constructor i receive the db variable\r\n\r\n    @Override\r\n    public void handle() throws Exception {\r\n        //...\r\n        db.jedisPooled.jsonSet(redisKey, Path.of(&quot;.&quot;), myPojo);\r\n    }\r\n}\r\n```\r\n\r\nMy question is: since there is no method &quot;getResource&quot; in the UnifiedJedis object, i can i get a connection from the pool and then release it after i send a command? Is it automatically done by the UnifiedJedis methods?\r\n\r\nIs my solution correct?\r\n\r\nThank you","title":"Using UnifiedJedis with ConnectionPoolConfig in multi-thread environment","body":"<p>I'm new using Jedis and I'm not sure if the configuration i used is correct.</p>\n<p>I'm trying to use Jedis in a API server application as a cache used by my handlers. For this reason the environment is a multi-threaded one and i'm looking for the correct configuration for this scenario.</p>\n<p>I found lot of example mentioning the &quot;JedisPool&quot; such as the following:</p>\n<pre><code>JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();\nShardedJedisPool pool = new ShardedJedisPool(jedisPoolConfig, shards);\n\ntry (ShardedJedis jedis = pool.getResource()) {\n    jedis.set(&quot;a&quot;, &quot;foo&quot;);\n}\npool.close();\n</code></pre>\n<p>But in my case i need to use a <strong>UnifiedJadis</strong> object in order to have access to <strong>jsonSet</strong> and <strong>jsonGet</strong> methods, which &quot;normal&quot; Jedis does not provide.</p>\n<p>This is what i've done.</p>\n<p>This is the class i use to manage a UnifiedJedis object as <strong>singleton</strong>.</p>\n<pre><code>public class MyDB{\n    //singleton\n    public static UnifiedJedis jedisPooled;\n    \n    //called at startup\n    public void init() throws DBConnectionException {\n        ConnectionPoolConfig poolConfig = RedisConfig.getRediConfiguration();\n        jedisPooled = new JedisPooled(poolConfig, dbUrl, dbPort);\n    }\n}\n</code></pre>\n<p>At application startup i initialize the connection and inject the singleton everywhere is needed (e.g. in my handlers).</p>\n<pre><code>public class App{\n    public static void main(String[] args) throws Exception {\n        MyDB db = new MyDB();\n        db.init();\n        \n        //...inject db where needed\n    }\n}\n</code></pre>\n<p>Finally in my handlers I use the variable injected to use the <strong>jedisPooled</strong> methods jsonGet and jsonSet.</p>\n<pre><code>public class MyHandler{\n\n    // in the MyHandler constructor i receive the db variable\n\n    @Override\n    public void handle() throws Exception {\n        //...\n        db.jedisPooled.jsonSet(redisKey, Path.of(&quot;.&quot;), myPojo);\n    }\n}\n</code></pre>\n<p>My question is: since there is no method &quot;getResource&quot; in the UnifiedJedis object, i can i get a connection from the pool and then release it after i send a command? Is it automatically done by the UnifiedJedis methods?</p>\n<p>Is my solution correct?</p>\n<p>Thank you</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":1330083,"reputation":619,"user_id":1274184,"accept_rate":47,"display_name":"Alex Smoke"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674746608,"creation_date":1674746608,"answer_id":75248194,"question_id":75248094,"body_markdown":"My mistake, it does everything automatically, just fixed path format like this:\r\n\r\n    screenshot.path=D:\\\\Projects\\\\myproject\\\\screenshots","title":"Inject @Value to a Path variable directly","body":"<p>My mistake, it does everything automatically, just fixed path format like this:</p>\n<pre><code>screenshot.path=D:\\\\Projects\\\\myproject\\\\screenshots\n</code></pre>\n"}],"owner":{"account_id":1330083,"reputation":619,"user_id":1274184,"accept_rate":47,"display_name":"Alex Smoke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1674746608,"creation_date":1674746179,"question_id":75248094,"body_markdown":"I want to inject Path variable directly without converting it from string like this:\r\n\r\n    @Value(&quot;${screenshot.path}&quot;)\r\n    private Path path;\r\n\r\nproperty file:\r\n\r\n    screenshot.path=D:\\Projects\\myproject\\screenshots\r\n\r\n\r\nError:\r\n\r\n&gt; Unsatisfied dependency expressed through field &#39;path&#39;; nested\r\n&gt; exception is org.springframework.beans.TypeMismatchException: Failed\r\n&gt; to convert value of type &#39;java.lang.String&#39; to required type\r\n&gt; &#39;java.nio.file.Path&#39;; nested exception is\r\n&gt; java.lang.IllegalArgumentException: Failed to retrieve file for class\r\n&gt; path resource [D:/Projects/myproject/screenshots]\r\n\r\nIs there a way to do that without injecting String and then doing Paths.get?","title":"Inject @Value to a Path variable directly","body":"<p>I want to inject Path variable directly without converting it from string like this:</p>\n<pre><code>@Value(&quot;${screenshot.path}&quot;)\nprivate Path path;\n</code></pre>\n<p>property file:</p>\n<pre><code>screenshot.path=D:\\Projects\\myproject\\screenshots\n</code></pre>\n<p>Error:</p>\n<blockquote>\n<p>Unsatisfied dependency expressed through field 'path'; nested\nexception is org.springframework.beans.TypeMismatchException: Failed\nto convert value of type 'java.lang.String' to required type\n'java.nio.file.Path'; nested exception is\njava.lang.IllegalArgumentException: Failed to retrieve file for class\npath resource [D:/Projects/myproject/screenshots]</p>\n</blockquote>\n<p>Is there a way to do that without injecting String and then doing Paths.get?</p>\n"},{"tags":["java","spring"],"owner":{"account_id":13717542,"reputation":125,"user_id":9898348,"display_name":"Federico Arona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674746531,"creation_date":1674746531,"question_id":75248175,"body_markdown":"I want to create a generic controller that would like something like this:\r\n\r\n```\r\n@RequestMapping(&quot;/api/v1/resource/{resource}&quot;)\r\npublic class StandardController {\r\n\r\n    private StandardResourceService standardResourceService;\r\n\r\n\r\n    public StandardController(StandardResourceService standardResourceService) {\r\n        this.standardResourceService = standardResourceService;\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public Object getResource(\r\n            @PathVariable(value=&quot;resource&quot;) String resource,\r\n            @PathVariable(value=&quot;id&quot;) Long id,\r\n            HttpServletRequest request){\r\n\r\n        return standardResourceService.getEntity(id, resource);\r\n    }\r\n\r\n    @PostMapping\r\n    @Transactional\r\n    Object newResource(@PathVariable(value=&quot;resource&quot;) String resource, @RequestBody Object newObject) {\r\n        standardResourceService.postResource(resource, newObject);\r\n        return newObject;\r\n    }\r\n}\r\n```\r\n\r\nThe idea is that I don&#39;t want to have a lot of endpoints/services/controllers for each entity I&#39;ll define in the project. I want to create a standard one for each entity and if I need some custom behaviour for some entities, I&#39;ll just extend the base service/controller.\r\n\r\nThe service I&#39;ve made looks like this:\r\n\r\n```\r\n@Service\r\npublic class StandardResourceService {\r\n\r\n    @Autowired\r\n    private EntityManager entityManager;\r\n\r\n    @Autowired\r\n    private ModelMapper modelMapper;\r\n\r\n    public &lt;T, ID&gt; T findById(Class&lt;T&gt; type, ID id) {\r\n        return entityManager.find(type, id);\r\n    }\r\n\r\n    @Transactional\r\n    public void saveObject(Object object) {\r\n        entityManager.persist(object);\r\n    }\r\n\r\n    public Object getEntity(long resourceId, String resource) throws EntityNotFoundException {\r\n        Object resourceOpt;\r\n        Object dto;\r\n\r\n        try{\r\n            Class&lt;?&gt; cls = Class.forName(&quot;com.base.package.models.&quot; + resource);\r\n            resourceOpt = findById(cls, resourceId);\r\n\r\n        }catch (ClassNotFoundException ex){\r\n            throw new EntityNotFoundException(&quot;Resource &quot; + resource + &quot; could not be found with id: &quot; + resourceId);\r\n        }\r\n\r\n        if(resourceOpt == null) {\r\n            throw new EntityNotFoundException(&quot;Resource &quot; + resource + &quot; could not be found with id: &quot; + resourceId);\r\n        }\r\n\r\n        try {\r\n            Class&lt;?&gt; dtoClass = Class.forName(&quot;com.base.package.dto.&quot; + resource + &quot;DTO&quot;);\r\n            dto = modelMapper.map(resourceOpt, dtoClass);\r\n        } catch (ClassNotFoundException ex) {\r\n            return resourceOpt;\r\n        }\r\n\r\n        return dto;\r\n    }\r\n\r\n    public Object postResource(String resource, Object newObject) throws RuntimeException {\r\n        try{\r\n            Class&lt;?&gt; clazz = Class.forName(&quot;com.base.package.models.&quot; + resource);\r\n\r\n            //saveObject(instance);\r\n\r\n\r\n        }catch (ClassNotFoundException ex){\r\n            throw new EntityNotFoundException(&quot;&quot;);\r\n        } catch (InvocationTargetException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (NoSuchMethodException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InstantiationException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IllegalAccessException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        return newObject;\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe GET is working pretty good. I return a DTO if any, otherwise I return the entity itself.\r\n\r\nBy the way when using the POST I don&#39;t know how to instantiate the correct class with the body I&#39;m sending in the POST.\r\n\r\nIs there a way to do this? \r\nAm I approaching this problem correctly?","title":"Spring: Generic Resource Controller","body":"<p>I want to create a generic controller that would like something like this:</p>\n<pre><code>@RequestMapping(&quot;/api/v1/resource/{resource}&quot;)\npublic class StandardController {\n\n    private StandardResourceService standardResourceService;\n\n\n    public StandardController(StandardResourceService standardResourceService) {\n        this.standardResourceService = standardResourceService;\n    }\n\n    @GetMapping(&quot;/{id}&quot;)\n    public Object getResource(\n            @PathVariable(value=&quot;resource&quot;) String resource,\n            @PathVariable(value=&quot;id&quot;) Long id,\n            HttpServletRequest request){\n\n        return standardResourceService.getEntity(id, resource);\n    }\n\n    @PostMapping\n    @Transactional\n    Object newResource(@PathVariable(value=&quot;resource&quot;) String resource, @RequestBody Object newObject) {\n        standardResourceService.postResource(resource, newObject);\n        return newObject;\n    }\n}\n</code></pre>\n<p>The idea is that I don't want to have a lot of endpoints/services/controllers for each entity I'll define in the project. I want to create a standard one for each entity and if I need some custom behaviour for some entities, I'll just extend the base service/controller.</p>\n<p>The service I've made looks like this:</p>\n<pre><code>@Service\npublic class StandardResourceService {\n\n    @Autowired\n    private EntityManager entityManager;\n\n    @Autowired\n    private ModelMapper modelMapper;\n\n    public &lt;T, ID&gt; T findById(Class&lt;T&gt; type, ID id) {\n        return entityManager.find(type, id);\n    }\n\n    @Transactional\n    public void saveObject(Object object) {\n        entityManager.persist(object);\n    }\n\n    public Object getEntity(long resourceId, String resource) throws EntityNotFoundException {\n        Object resourceOpt;\n        Object dto;\n\n        try{\n            Class&lt;?&gt; cls = Class.forName(&quot;com.base.package.models.&quot; + resource);\n            resourceOpt = findById(cls, resourceId);\n\n        }catch (ClassNotFoundException ex){\n            throw new EntityNotFoundException(&quot;Resource &quot; + resource + &quot; could not be found with id: &quot; + resourceId);\n        }\n\n        if(resourceOpt == null) {\n            throw new EntityNotFoundException(&quot;Resource &quot; + resource + &quot; could not be found with id: &quot; + resourceId);\n        }\n\n        try {\n            Class&lt;?&gt; dtoClass = Class.forName(&quot;com.base.package.dto.&quot; + resource + &quot;DTO&quot;);\n            dto = modelMapper.map(resourceOpt, dtoClass);\n        } catch (ClassNotFoundException ex) {\n            return resourceOpt;\n        }\n\n        return dto;\n    }\n\n    public Object postResource(String resource, Object newObject) throws RuntimeException {\n        try{\n            Class&lt;?&gt; clazz = Class.forName(&quot;com.base.package.models.&quot; + resource);\n\n            //saveObject(instance);\n\n\n        }catch (ClassNotFoundException ex){\n            throw new EntityNotFoundException(&quot;&quot;);\n        } catch (InvocationTargetException e) {\n            throw new RuntimeException(e);\n        } catch (NoSuchMethodException e) {\n            throw new RuntimeException(e);\n        } catch (InstantiationException e) {\n            throw new RuntimeException(e);\n        } catch (IllegalAccessException e) {\n            throw new RuntimeException(e);\n        }\n\n        return newObject;\n    }\n}\n\n</code></pre>\n<p>The GET is working pretty good. I return a DTO if any, otherwise I return the entity itself.</p>\n<p>By the way when using the POST I don't know how to instantiate the correct class with the body I'm sending in the POST.</p>\n<p>Is there a way to do this?\nAm I approaching this problem correctly?</p>\n"},{"tags":["java","spring","mongodb","spring-boot","mongo-java-driver"],"answers":[{"tags":[],"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674746469,"creation_date":1674746469,"answer_id":75248156,"question_id":75227881,"body_markdown":"Ok so the Problem was on the GCP cloud run side. The CPU wasn&#39;t dedicated so the connections to Mongo were getting cut.","title":"Spring Mongo - Connecting to Multiple Mongo DB&#39;s results in Connection Timeouts","body":"<p>Ok so the Problem was on the GCP cloud run side. The CPU wasn't dedicated so the connections to Mongo were getting cut.</p>\n"}],"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75248156,"answer_count":1,"score":0,"last_activity_date":1674746469,"creation_date":1674598883,"question_id":75227881,"body_markdown":"I have a problem which has me stumped. Hoping someone can help me here.\r\n\r\nSo I&#39;m sadly in the position of having a micro-service which for the moment needs to connect to 4 mongo databases all running in the cloud (Mongo Cloud Atlas) and on the same cluster. After setting everything up and deploying my service, I&#39;m constantly getting errors for timeouts etc every couple of hours. \r\n\r\nThe various errors are as follows:\r\n```\r\nMongoSocketReadTimeoutException: Timeout while receiving message\r\nMongoSocketReadException: Exception receiving message\r\nMongoSocketOpenException: Exception opening socket\r\nMongoSocketWriteException: Exception sending message\r\nMongoSocketException: cluster0-shard-00-00-pri.xxxxxx.mongodb.net: Temporary failure in name resolution\r\n```\r\n\r\n** Its worth noting that all my other Spring services which connect to the same cluster but are only configured for a single database do not have any timeout issues\r\n\r\nFor further context, all my Java services are in in GCP (using cloud run) and all services are running on a VPC with peering to Mongo Atlas. \r\n\r\nFor the micro-service(s) which connect to a single Mongo DB I configure my Mongo Client like so:\r\n\r\n```java\r\n\r\n@Configuration\r\npublic class MongoConfiguration {\r\n\r\n    @Value(&quot;${spring.data.mongodb.host}&quot;)\r\n    private String connectionString;\r\n\r\n    @Bean\r\n    public MongoClient mongoClient() {\r\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\r\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\r\n        return MongoClients.create(MongoClientSettings.builder()\r\n                .applyConnectionString(new ConnectionString(connectionString))\r\n                .uuidRepresentation(UuidRepresentation.STANDARD)\r\n                .codecRegistry(codecRegistry)\r\n                .build());\r\n    }\r\n\r\n    @Bean\r\n    public MongoClientSettings mongoClientSettings() {\r\n        return MongoClientSettings.builder()\r\n                .retryWrites(true)\r\n                .applyToClusterSettings(builder -&gt;\r\n                        builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS))\r\n                .applyToConnectionPoolSettings((ConnectionPoolSettings.Builder builder) -&gt; builder.maxSize(300) //connections count\r\n                        .minSize(100)\r\n                        .maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\r\n                        .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\r\n                        .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\r\n                        .maxWaitTime(150, TimeUnit.MILLISECONDS))\r\n                .applyToSocketSettings(builder -&gt; builder.connectTimeout(10, TimeUnit.SECONDS)\r\n                        .readTimeout(15, TimeUnit.SECONDS))\r\n                .applicationName(&quot;ProfileServiceApplication&quot;)\r\n                .retryWrites(true)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public MongoCustomConversions mongoCustomConversions() {\r\n        return new MongoCustomConversions(Arrays.asList(\r\n                new BigDecimalDecimal128Converter(),\r\n                new Decimal128BigDecimalConverter()\r\n        ));\r\n\r\n    }\r\n\r\n    @WritingConverter\r\n    private static class BigDecimalDecimal128Converter implements Converter&lt;BigDecimal, Decimal128&gt; {\r\n\r\n        @Override\r\n        public Decimal128 convert(@NonNull BigDecimal source) {\r\n            return new Decimal128(source);\r\n        }\r\n    }\r\n\r\n    @ReadingConverter\r\n    private static class Decimal128BigDecimalConverter implements Converter&lt;Decimal128, BigDecimal&gt; {\r\n\r\n        @Override\r\n        public BigDecimal convert(@NonNull Decimal128 source) {\r\n            return source.bigDecimalValue();\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\nOn the (problematic) service which connects to multiple Mongo DB&#39;s here&#39;s how I&#39;ve configured my mongo clients:\r\n\r\n*Primary Mongo Client*\r\n\r\n```java\r\n@Configuration\r\npublic class TorchMongoConfig {\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    @Primary\r\n    @Bean(name = &quot;TorchMongoDBFactory&quot;)\r\n    public MongoDatabaseFactory torchFactory(@Qualifier(&quot;TORCH_CLIENT&quot;) MongoClient mongoClient) {\r\n        return new SimpleMongoClientDatabaseFactory(mongoClient, &quot;Torch&quot;);\r\n    }\r\n\r\n    @Primary\r\n    @Bean\r\n    public MongoTemplate torchMongoTemplate(@Qualifier(&quot;TORCH_CLIENT&quot;) MongoClient client) {\r\n        return new MongoTemplate(torchFactory(client));\r\n    }\r\n\r\n    @Bean(&quot;TORCH_CLIENT&quot;)\r\n    @Primary\r\n    public MongoClient mongoClient() {\r\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\r\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\r\n        return MongoClients.create(MongoClientSettings.builder()\r\n                .applyConnectionString(new ConnectionString(env.getProperty(&quot;spring.data.mongo.torchdb.uri&quot;)))\r\n                .uuidRepresentation(UuidRepresentation.STANDARD)\r\n                .codecRegistry(codecRegistry)\r\n                .applyToConnectionPoolSettings(builder -&gt; {\r\n                    builder.maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\r\n                            .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\r\n                            .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\r\n                            .maxWaitTime(150, TimeUnit.MILLISECONDS);\r\n                })\r\n                .applyToClusterSettings(builder -&gt; {\r\n                    builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\r\n                })\r\n                .build());\r\n        }\r\n        \r\n    @Bean\r\n    public MongoClientSettingsBuilderCustomizer mongoDBDefaultSettings() {\r\n        return builder -&gt; {\r\n            builder.applyToSocketSettings(builderSettings -&gt; {\r\n                builderSettings.connectTimeout(10, TimeUnit.SECONDS)\r\n                        .readTimeout(15, TimeUnit.SECONDS);\r\n            });\r\n\r\n            builder.applyToClusterSettings(builderSettings -&gt; {\r\n                builderSettings\r\n                        .serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\r\n            });\r\n\r\n            builder.applyToConnectionPoolSettings(builderSettings -&gt; {\r\n                builderSettings.maxSize(300) //connections count\r\n                        .minSize(100)\r\n                        .maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\r\n                        .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\r\n                        .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\r\n                        .maxWaitTime(150, TimeUnit.MILLISECONDS);\r\n            });\r\n            // Apply other settings to the builder.\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    public MongoCustomConversions mongoCustomConversions() {\r\n        return new MongoCustomConversions(Arrays.asList(\r\n                new BigDecimalDecimal128Converter(),\r\n                new Decimal128BigDecimalConverter()\r\n        ));\r\n    }\r\n\r\n    @WritingConverter\r\n    private static class BigDecimalDecimal128Converter implements Converter&lt;BigDecimal, Decimal128&gt; {\r\n\r\n        @Override\r\n        public Decimal128 convert(@NonNull BigDecimal source) {\r\n            return new Decimal128(source);\r\n        }\r\n    }\r\n\r\n    @ReadingConverter\r\n    private static class Decimal128BigDecimalConverter implements Converter&lt;Decimal128, BigDecimal&gt; {\r\n\r\n        @Override\r\n        public BigDecimal convert(@NonNull Decimal128 source) {\r\n            return source.bigDecimalValue();\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n*Secondary MongoClient*\r\n```java\r\n@Configuration\r\npublic class ProjectInformationMongoConfig {\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    @Bean(name = &quot;ProjectInformationMongoDBFactory&quot;)\r\n    public MongoDatabaseFactory userProjectMongoDatabaseFactory(@Qualifier(&quot;ProjectInformation&quot;) MongoClient mongoClient) {\r\n        return new SimpleMongoClientDatabaseFactory(mongoClient, &quot;ProjectInformation&quot;);\r\n    }\r\n\r\n    @Bean(name = &quot;projectInformationMongoTemplate&quot;)\r\n    public MongoTemplate userProjectMongoTemplate(@Qualifier(&quot;ProjectInformationMongoDBFactory&quot;) MongoDatabaseFactory mongoDatabaseFactory) {\r\n        return new MongoTemplate(mongoDatabaseFactory);\r\n    }\r\n\r\n    @Bean(&quot;ProjectInformation&quot;)\r\n    public MongoClient mongoClient() {\r\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\r\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\r\n        return MongoClients.create(MongoClientSettings.builder()\r\n                .applyConnectionString(new ConnectionString(env.getProperty(&quot;spring.data.mongo.projectinformation.uri&quot;)))\r\n                .uuidRepresentation(UuidRepresentation.STANDARD)\r\n                .codecRegistry(codecRegistry)\r\n                .applyToConnectionPoolSettings(builder -&gt; {\r\n                    builder.maxConnectionLifeTime(30, TimeUnit.MINUTES)\r\n                            .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\r\n                            .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\r\n                            .maxWaitTime(150, TimeUnit.MILLISECONDS);\r\n                })\r\n                .applyToClusterSettings(builder -&gt; {\r\n                    builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\r\n                })\r\n                .build());\r\n    }\r\n}\r\n```\r\n\r\nThe third and forth connections are identical to the above two so I will not repeat the code again.\r\n\r\nNow when I want to access data on Mongo here&#39;s how I&#39;m doing it via my DAL:\r\n\r\n```java\r\nRepository\r\npublic class SavedUserProfilesDALImpl implements SavedUserProfilesDal {\r\n    private static final Logger logger = LoggerFactory.getLogger(SavedUserProfilesDal.class);\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;torchMongoTemplate&quot;)\r\n    private final MongoTemplate mongoTemplate;\r\n\r\n    public SavedUserProfilesDALImpl(@Qualifier(&quot;torchMongoTemplate&quot;) MongoTemplate mongoTemplate) {\r\n        this.mongoTemplate = mongoTemplate;\r\n    }\r\n\r\n\r\n    @Override\r\n    public SavedUserProfiles save(SavedUserProfiles savedUserProfile) {\r\n        logger.info(&quot;MONGO: Executing query save / update UserSavedQuery with userId {}&quot;, savedUserProfile.getUserId());\r\n        try {\r\n            return mongoTemplate.save(savedUserProfile);\r\n        } catch (Exception ex) {\r\n            logger.error(&quot;Unable to perform Mongo Operation Save SavedUserProfiles  {}&quot;, ex.getLocalizedMessage());\r\n            throw new ServiceUnavailableException(&quot;Unable to perform Mongo Operation {&quot; + ex.getLocalizedMessage() + &quot;}&quot;, &quot;SavedUserProfiles&quot;);\r\n        }\r\n    }\r\n```\r\nAnd when I want to query something which is not using the primary bean I do like so:\r\n\r\n```java\r\n@Repository\r\npublic class ThirdPartyDALImpl implements ThirdPartyContentDAL {\r\n    private final static Logger logger = LoggerFactory.getLogger(ThirdPartyDALImpl.class);\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;projectInformationMongoTemplate&quot;)\r\n    private final MongoTemplate mongoTemplate;\r\n\r\n    public ThirdPartyDALImpl(@Qualifier(&quot;projectInformationMongoTemplate&quot;) MongoTemplate mongoTemplate) {\r\n        this.mongoTemplate = mongoTemplate;\r\n    }\r\n\r\n  @Override\r\n    public ThirdPartyContent fetchContentById(String thirdPartyContentId) {\r\n        Query query = new Query();\r\n        query.addCriteria(Criteria.where(&quot;_id&quot;).is(thirdPartyContentId));\r\n        try {\r\n            return mongoTemplate.findOne(query, ThirdPartyContent.class);\r\n        } catch (Exception ex) {\r\n            throw new ServiceUnavailableException(&quot;Unable to perform Mongo Operation {&quot; + ex.getLocalizedMessage() + &quot;}&quot;, &quot;Project&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nI&#39;d like to stress, I believe the issues I&#39;m having are related to something in my configuration above. I think given that all other services (connecting to a single Mongo DB) are all on the same network, firewall, VPC etc. \r\n\r\nI guess this is a cry for help as I&#39;m pulling my hair out with constant alerts :-D \r\nAny help would be amazing.\r\n\r\nThanks","title":"Spring Mongo - Connecting to Multiple Mongo DB&#39;s results in Connection Timeouts","body":"<p>I have a problem which has me stumped. Hoping someone can help me here.</p>\n<p>So I'm sadly in the position of having a micro-service which for the moment needs to connect to 4 mongo databases all running in the cloud (Mongo Cloud Atlas) and on the same cluster. After setting everything up and deploying my service, I'm constantly getting errors for timeouts etc every couple of hours.</p>\n<p>The various errors are as follows:</p>\n<pre><code>MongoSocketReadTimeoutException: Timeout while receiving message\nMongoSocketReadException: Exception receiving message\nMongoSocketOpenException: Exception opening socket\nMongoSocketWriteException: Exception sending message\nMongoSocketException: cluster0-shard-00-00-pri.xxxxxx.mongodb.net: Temporary failure in name resolution\n</code></pre>\n<p>** Its worth noting that all my other Spring services which connect to the same cluster but are only configured for a single database do not have any timeout issues</p>\n<p>For further context, all my Java services are in in GCP (using cloud run) and all services are running on a VPC with peering to Mongo Atlas.</p>\n<p>For the micro-service(s) which connect to a single Mongo DB I configure my Mongo Client like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Configuration\npublic class MongoConfiguration {\n\n    @Value(&quot;${spring.data.mongodb.host}&quot;)\n    private String connectionString;\n\n    @Bean\n    public MongoClient mongoClient() {\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\n        return MongoClients.create(MongoClientSettings.builder()\n                .applyConnectionString(new ConnectionString(connectionString))\n                .uuidRepresentation(UuidRepresentation.STANDARD)\n                .codecRegistry(codecRegistry)\n                .build());\n    }\n\n    @Bean\n    public MongoClientSettings mongoClientSettings() {\n        return MongoClientSettings.builder()\n                .retryWrites(true)\n                .applyToClusterSettings(builder -&gt;\n                        builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS))\n                .applyToConnectionPoolSettings((ConnectionPoolSettings.Builder builder) -&gt; builder.maxSize(300) //connections count\n                        .minSize(100)\n                        .maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\n                        .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\n                        .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\n                        .maxWaitTime(150, TimeUnit.MILLISECONDS))\n                .applyToSocketSettings(builder -&gt; builder.connectTimeout(10, TimeUnit.SECONDS)\n                        .readTimeout(15, TimeUnit.SECONDS))\n                .applicationName(&quot;ProfileServiceApplication&quot;)\n                .retryWrites(true)\n                .build();\n    }\n\n    @Bean\n    public MongoCustomConversions mongoCustomConversions() {\n        return new MongoCustomConversions(Arrays.asList(\n                new BigDecimalDecimal128Converter(),\n                new Decimal128BigDecimalConverter()\n        ));\n\n    }\n\n    @WritingConverter\n    private static class BigDecimalDecimal128Converter implements Converter&lt;BigDecimal, Decimal128&gt; {\n\n        @Override\n        public Decimal128 convert(@NonNull BigDecimal source) {\n            return new Decimal128(source);\n        }\n    }\n\n    @ReadingConverter\n    private static class Decimal128BigDecimalConverter implements Converter&lt;Decimal128, BigDecimal&gt; {\n\n        @Override\n        public BigDecimal convert(@NonNull Decimal128 source) {\n            return source.bigDecimalValue();\n        }\n\n    }\n}\n</code></pre>\n<p>On the (problematic) service which connects to multiple Mongo DB's here's how I've configured my mongo clients:</p>\n<p><em>Primary Mongo Client</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class TorchMongoConfig {\n    @Autowired\n    private Environment env;\n\n    @Primary\n    @Bean(name = &quot;TorchMongoDBFactory&quot;)\n    public MongoDatabaseFactory torchFactory(@Qualifier(&quot;TORCH_CLIENT&quot;) MongoClient mongoClient) {\n        return new SimpleMongoClientDatabaseFactory(mongoClient, &quot;Torch&quot;);\n    }\n\n    @Primary\n    @Bean\n    public MongoTemplate torchMongoTemplate(@Qualifier(&quot;TORCH_CLIENT&quot;) MongoClient client) {\n        return new MongoTemplate(torchFactory(client));\n    }\n\n    @Bean(&quot;TORCH_CLIENT&quot;)\n    @Primary\n    public MongoClient mongoClient() {\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\n        return MongoClients.create(MongoClientSettings.builder()\n                .applyConnectionString(new ConnectionString(env.getProperty(&quot;spring.data.mongo.torchdb.uri&quot;)))\n                .uuidRepresentation(UuidRepresentation.STANDARD)\n                .codecRegistry(codecRegistry)\n                .applyToConnectionPoolSettings(builder -&gt; {\n                    builder.maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\n                            .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\n                            .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\n                            .maxWaitTime(150, TimeUnit.MILLISECONDS);\n                })\n                .applyToClusterSettings(builder -&gt; {\n                    builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\n                })\n                .build());\n        }\n        \n    @Bean\n    public MongoClientSettingsBuilderCustomizer mongoDBDefaultSettings() {\n        return builder -&gt; {\n            builder.applyToSocketSettings(builderSettings -&gt; {\n                builderSettings.connectTimeout(10, TimeUnit.SECONDS)\n                        .readTimeout(15, TimeUnit.SECONDS);\n            });\n\n            builder.applyToClusterSettings(builderSettings -&gt; {\n                builderSettings\n                        .serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\n            });\n\n            builder.applyToConnectionPoolSettings(builderSettings -&gt; {\n                builderSettings.maxSize(300) //connections count\n                        .minSize(100)\n                        .maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\n                        .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\n                        .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\n                        .maxWaitTime(150, TimeUnit.MILLISECONDS);\n            });\n            // Apply other settings to the builder.\n        };\n    }\n\n    @Bean\n    public MongoCustomConversions mongoCustomConversions() {\n        return new MongoCustomConversions(Arrays.asList(\n                new BigDecimalDecimal128Converter(),\n                new Decimal128BigDecimalConverter()\n        ));\n    }\n\n    @WritingConverter\n    private static class BigDecimalDecimal128Converter implements Converter&lt;BigDecimal, Decimal128&gt; {\n\n        @Override\n        public Decimal128 convert(@NonNull BigDecimal source) {\n            return new Decimal128(source);\n        }\n    }\n\n    @ReadingConverter\n    private static class Decimal128BigDecimalConverter implements Converter&lt;Decimal128, BigDecimal&gt; {\n\n        @Override\n        public BigDecimal convert(@NonNull Decimal128 source) {\n            return source.bigDecimalValue();\n        }\n\n    }\n}\n</code></pre>\n<p><em>Secondary MongoClient</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class ProjectInformationMongoConfig {\n    @Autowired\n    private Environment env;\n\n    @Bean(name = &quot;ProjectInformationMongoDBFactory&quot;)\n    public MongoDatabaseFactory userProjectMongoDatabaseFactory(@Qualifier(&quot;ProjectInformation&quot;) MongoClient mongoClient) {\n        return new SimpleMongoClientDatabaseFactory(mongoClient, &quot;ProjectInformation&quot;);\n    }\n\n    @Bean(name = &quot;projectInformationMongoTemplate&quot;)\n    public MongoTemplate userProjectMongoTemplate(@Qualifier(&quot;ProjectInformationMongoDBFactory&quot;) MongoDatabaseFactory mongoDatabaseFactory) {\n        return new MongoTemplate(mongoDatabaseFactory);\n    }\n\n    @Bean(&quot;ProjectInformation&quot;)\n    public MongoClient mongoClient() {\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\n        return MongoClients.create(MongoClientSettings.builder()\n                .applyConnectionString(new ConnectionString(env.getProperty(&quot;spring.data.mongo.projectinformation.uri&quot;)))\n                .uuidRepresentation(UuidRepresentation.STANDARD)\n                .codecRegistry(codecRegistry)\n                .applyToConnectionPoolSettings(builder -&gt; {\n                    builder.maxConnectionLifeTime(30, TimeUnit.MINUTES)\n                            .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\n                            .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\n                            .maxWaitTime(150, TimeUnit.MILLISECONDS);\n                })\n                .applyToClusterSettings(builder -&gt; {\n                    builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\n                })\n                .build());\n    }\n}\n</code></pre>\n<p>The third and forth connections are identical to the above two so I will not repeat the code again.</p>\n<p>Now when I want to access data on Mongo here's how I'm doing it via my DAL:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Repository\npublic class SavedUserProfilesDALImpl implements SavedUserProfilesDal {\n    private static final Logger logger = LoggerFactory.getLogger(SavedUserProfilesDal.class);\n\n    @Autowired\n    @Qualifier(&quot;torchMongoTemplate&quot;)\n    private final MongoTemplate mongoTemplate;\n\n    public SavedUserProfilesDALImpl(@Qualifier(&quot;torchMongoTemplate&quot;) MongoTemplate mongoTemplate) {\n        this.mongoTemplate = mongoTemplate;\n    }\n\n\n    @Override\n    public SavedUserProfiles save(SavedUserProfiles savedUserProfile) {\n        logger.info(&quot;MONGO: Executing query save / update UserSavedQuery with userId {}&quot;, savedUserProfile.getUserId());\n        try {\n            return mongoTemplate.save(savedUserProfile);\n        } catch (Exception ex) {\n            logger.error(&quot;Unable to perform Mongo Operation Save SavedUserProfiles  {}&quot;, ex.getLocalizedMessage());\n            throw new ServiceUnavailableException(&quot;Unable to perform Mongo Operation {&quot; + ex.getLocalizedMessage() + &quot;}&quot;, &quot;SavedUserProfiles&quot;);\n        }\n    }\n</code></pre>\n<p>And when I want to query something which is not using the primary bean I do like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic class ThirdPartyDALImpl implements ThirdPartyContentDAL {\n    private final static Logger logger = LoggerFactory.getLogger(ThirdPartyDALImpl.class);\n\n    @Autowired\n    @Qualifier(&quot;projectInformationMongoTemplate&quot;)\n    private final MongoTemplate mongoTemplate;\n\n    public ThirdPartyDALImpl(@Qualifier(&quot;projectInformationMongoTemplate&quot;) MongoTemplate mongoTemplate) {\n        this.mongoTemplate = mongoTemplate;\n    }\n\n  @Override\n    public ThirdPartyContent fetchContentById(String thirdPartyContentId) {\n        Query query = new Query();\n        query.addCriteria(Criteria.where(&quot;_id&quot;).is(thirdPartyContentId));\n        try {\n            return mongoTemplate.findOne(query, ThirdPartyContent.class);\n        } catch (Exception ex) {\n            throw new ServiceUnavailableException(&quot;Unable to perform Mongo Operation {&quot; + ex.getLocalizedMessage() + &quot;}&quot;, &quot;Project&quot;);\n        }\n    }\n</code></pre>\n<p>I'd like to stress, I believe the issues I'm having are related to something in my configuration above. I think given that all other services (connecting to a single Mongo DB) are all on the same network, firewall, VPC etc.</p>\n<p>I guess this is a cry for help as I'm pulling my hair out with constant alerts :-D\nAny help would be amazing.</p>\n<p>Thanks</p>\n"},{"tags":["java","amazon-s3","apache-flink"],"comments":[{"owner":{"account_id":3092852,"reputation":113,"user_id":2618629,"display_name":"Xogaz"},"score":0,"creation_date":1674749541,"post_id":75245278,"comment_id":132784445,"body_markdown":"Ok, I dramatically increased the memory limit (from 512Mb to 2Gig) and the task manager is not crashing anymore.","body":"Ok, I dramatically increased the memory limit (from 512Mb to 2Gig) and the task manager is not crashing anymore."}],"owner":{"account_id":3092852,"reputation":113,"user_id":2618629,"display_name":"Xogaz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674746282,"creation_date":1674731197,"question_id":75245278,"body_markdown":"I have a job receiving events with a s3 link. It attempts to load the resource using the following snippet \r\n\r\n```java\r\n// value of s3 source is &quot;s3://bucket_id/path/to/object.json&quot;\r\nList&lt;String&gt; collect = ExecutionEnvironment.getExecutionEnvironment().readTextFile(s3_source.toString()).collect();\r\n````\r\n\r\nFlink is configured accordingly in flink-conf.yaml\r\n````yaml\r\n    s3.access-key: XXX\r\n    s3.secret-key: XXX\r\n    s3.endpoint: s3.openshift-storage.svc\r\n    s3.path.style.access: true  \r\n````\r\n\r\nThe library `flink-s3-fs-hadoop-1.16.0.jar` is in path `/opt/flink/plugins/flink-s3-fs-hadoop`. I had some issues setting up the self-signed certificates (see [this Gist][1] for my config), but it seems to be working. \r\n\r\nWhen starting the job through the JobManager&#39;s WebUI, I get the following logs\r\n\r\n*Job is starting*\r\n````\r\n2023-01-26 10:33:09,891 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Receive slot request f9f291f0e4b74471e59a74602212060b for job c62504dec97d185a3e86fc390256e3f9 from resource manager with leader id 00000000000000000000000000000000.\r\n2023-01-26 10:33:09,894 DEBUG org.apache.flink.runtime.memory.MemoryManager                [] - Initialized MemoryManager with total memory size 178956973 and page size 32768.\r\n2023-01-26 10:33:09,895 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Allocated slot for f9f291f0e4b74471e59a74602212060b.\r\n2023-01-26 10:33:09,896 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Add job c62504dec97d185a3e86fc390256e3f9 for job leader monitoring.\r\n2023-01-26 10:33:09,897 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - New leader information for job c62504dec97d185a3e86fc390256e3f9. Address: akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10, leader id: 00000000000000000000000000000000.\r\n2023-01-26 10:33:09,897 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Try to register at job manager akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 with leader id 00000000-0000-0000-0000-000000000000.\r\n2023-01-26 10:33:09,898 DEBUG org.apache.flink.runtime.rpc.akka.AkkaRpcService             [] - Try to connect to remote RPC endpoint with address akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10. Returning a org.apache.flink.runtime.jobmaster.JobMasterGateway gateway.\r\n2023-01-26 10:33:09,910 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Resolved JobManager address, beginning registration\r\n2023-01-26 10:33:09,910 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Registration at JobManager attempt 1 (timeout=100ms)\r\n2023-01-26 10:33:09,991 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Registration with JobManager at akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 was successful.\r\n2023-01-26 10:33:09,993 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Successful registration at job manager akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 for job c62504dec97d185a3e86fc390256e3f9.\r\n2023-01-26 10:33:09,993 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Establish JobManager connection for job c62504dec97d185a3e86fc390256e3f9.\r\n2023-01-26 10:33:09,995 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Offer reserved slots to the leader of job c62504dec97d185a3e86fc390256e3f9.\r\n2023-01-26 10:33:10,011 INFO  org.apache.flink.runtime.taskexecutor.slot.TaskSlotTableImpl [] - Activate slot f9f291f0e4b74471e59a74602212060b.\r\n````\r\n\r\n*Event is received from RabbitMQ Stream*\r\n````\r\n2023-01-26 10:33:11,193 INFO  io.av360.maverick.insights.rmqstreams.RMQStreamSource        [] - Running event consumer as stream source\r\n2023-01-26 10:33:11,194 INFO  io.av360.maverick.insights.rmqstreams.config.RMQStreamsConfig [] - Creating consumer for stream &#39;events&#39;\r\n2023-01-26 10:33:11,195 INFO  io.av360.maverick.insights.rmqstreams.config.RMQStreamsConfig [] - Creating environment required to connect to a RabbitMQ Stream.\r\n2023-01-26 10:33:11,195 DEBUG io.av360.maverick.insights.rmqstreams.config.StreamsClientFactory [] - Building environment\r\n2023-01-26 10:33:11,195 INFO  io.av360.maverick.insights.rmqstreams.config.StreamsClientFactory [] - Valid configuration for host &#39;rabbitmq&#39;\r\n....\r\n2023-01-26 10:33:14,907 INFO  XXX   [] - Event of type &#39;crawled.source.channel&#39; with source &#39;s3://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json&#39;\r\n````\r\n\r\n*Attempting to read from s3*\r\n```\r\n2023-01-26 10:33:15,303 DEBUG org.apache.flink.fs.s3.common.AbstractS3FileSystemFactory    [] - Creating S3 file system backed by Hadoop s3a file system\r\n2023-01-26 10:33:15,303 DEBUG org.apache.flink.fs.s3.common.AbstractS3FileSystemFactory    [] - Loading Hadoop configuration for Hadoop s3a file system\r\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.secret-key as fs.s3a.secret-key to Hadoop config\r\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.endpoint as fs.s3a.endpoint to Hadoop config\r\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.access-key as fs.s3a.access-key to Hadoop config\r\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.path.style.access as fs.s3a.path.style.access to Hadoop config\r\n2023-01-26 10:33:15,705 DEBUG org.apache.flink.fs.s3hadoop.S3FileSystemFactory             [] - Using scheme s3://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json for s3a file system backing the S3 File System\r\n```\r\n\r\n*a few hadoop exceptions (relevant?)*\r\n```\r\n2023-01-26 10:33:15,800 DEBUG org.apache.hadoop.util.Shell                                 [] - Failed to detect a valid hadoop home directory\r\njava.io.FileNotFoundException: HADOOP_HOME and hadoop.home.dir are unset.\r\n...\r\n2023-01-26 10:33:16,108 DEBUG org.apache.hadoop.metrics2.impl.MetricsConfig                [] - Could not locate file hadoop-metrics2-s3a-file-system.properties\r\norg.apache.commons.configuration2.ex.ConfigurationException: Could not locate: org.apache.commons.configuration2.io.FileLocator@4ac69a5d[fileName=hadoop-metrics2-s3a-file-system.properties,basePath=&lt;null&gt;,sourceURL=,encoding=&lt;null&gt;,fileSystem=&lt;null&gt;,locationStrategy=&lt;null&gt;]\r\n...\r\n2023-01-26 10:33:16,111 DEBUG org.apache.hadoop.metrics2.impl.MetricsConfig                [] - Could not locate file hadoop-metrics2.properties\r\norg.apache.commons.configuration2.ex.ConfigurationException: Could not locate: org.apache.commons.configuration2.io.FileLocator@4faa9611[fileName=hadoop-metrics2.properties,basePath=&lt;null&gt;,sourceURL=,encoding=&lt;null&gt;,fileSystem=&lt;null&gt;,locationStrategy=&lt;null&gt;]\r\n...\r\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.NativeCodeLoader                      [] - Failed to load native-hadoop with error: java.lang.UnsatisfiedLinkError: no hadoop in java.library.path: [/usr/java/packages/lib, /usr/lib64, /lib64, /lib, /usr/lib]\r\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.NativeCodeLoader                      [] - java.library.path=/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib\r\n2023-01-26 10:33:16,508 WARN  org.apache.hadoop.util.NativeCodeLoader                      [] - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.PerformanceAdvisory                   [] - Falling back to shell based\r\n...\r\n2023-01-26 10:33:17,119 DEBUG org.apache.hadoop.security.ssl.DelegatingSSLSocketFactory    [] - Initializing SSL Context to channel mode Default_JSSE\r\n2023-01-26 10:33:17,710 DEBUG org.apache.hadoop.fs.s3a.impl.NetworkBinding                 [] - Unable to create class org.apache.hadoop.fs.s3a.impl.ConfigureShadedAWSSocketFactory, value of fs.s3a.ssl.channel.mode will be ignored\r\njava.lang.NoClassDefFoundError: com/amazonaws/thirdparty/apache/http/conn/socket/ConnectionSocketFactory\r\n```\r\n\r\n*Connection attempt*\r\n```\r\n2023-01-26 10:33:17,997 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Creating endpoint configuration for &quot;s3.openshift-storage.svc&quot;\r\n2023-01-26 10:33:17,998 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Endpoint URI = https://s3.openshift-storage.svc\r\n2023-01-26 10:33:18,096 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Endpoint https://s3.openshift-storage.svc is not the default; parsing\r\n2023-01-26 10:33:18,097 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Region for endpoint s3.openshift-storage.svc, URI https://s3.openshift-storage.svc is determined as openshift-storage\r\n...\r\n2023-01-26 10:33:18,806 DEBUG com.amazonaws.request                                        [] - Sending Request: HEAD https://s3.openshift-storage.svc /bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json Headers: (amz-sdk-invocation-id: xxx, Content-Type: application/octet-stream, User-Agent: Hadoop 3.3.2, aws-sdk-java/1.11.951 Linux/4.18.0-372.26.1.el8_6.x86_64 OpenJDK_64-Bit_Server_VM/11.0.17+8 java/11.0.17 vendor/Eclipse_Adoptium, ) \r\n\r\n...\r\n2023-01-26 10:33:20,108 DEBUG org.apache.hadoop.fs.s3a.Invoker                             [] - Starting: open s3a://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json at 0\r\n\r\n...\r\n2023-01-26 10:33:19,598 DEBUG com.amazonaws.request                                        [] - Received successful response: 200, AWS Request ID: ldcyiwlo-6w4j96-om3\r\n```\r\n\r\n*Everything looks fine for now, last logs are*\r\n\r\n```\r\n2023-01-26 10:33:24,299 INFO  org.apache.flink.runtime.taskexecutor.TaskManagerServices    [] - Temporary file directory &#39;/tmp&#39;: total 119 GB, usable 48 GB (40.34% usable)\r\n2023-01-26 10:33:24,299 DEBUG org.apache.flink.runtime.io.disk.FileChannelManagerImpl      [] - FileChannelManager uses directory /tmp/flink-io-15f45aea-fa25-4f90-be7e-ad49e8722980 for spill files.\r\n2023-01-26 10:33:24,299 INFO  org.apache.flink.runtime.io.disk.iomanager.IOManager         [] - Created a new FileChannelManager for spilling of task related data to disk (joins, sorting, ...). Used directories:\r\n\t/tmp/flink-io-15f45aea-fa25-4f90-be7e-ad49e8722980\r\n2023-01-26 10:33:24,301 DEBUG org.apache.flink.runtime.io.disk.FileChannelManagerImpl      [] - FileChannelManager uses directory /tmp/flink-netty-shuffle-ff78f4af-d02b-412b-b305-414b570917a8 for spill files.\r\n2023-01-26 10:33:24,301 INFO  org.apache.flink.runtime.io.network.NettyShuffleServiceFactory [] - Created a new FileChannelManager for storing result partitions of BLOCKING shuffles. Used directories:\r\n\t/tmp/flink-netty-shuffle-ff78f4af-d02b-412b-b305-414b570917a8\r\n\r\n```\r\n\r\nThese are the last logs. From this point on, the job fails and the task manager is gone (and restarted through K8S). \r\n\r\nMy two questions are: \r\n- Can I tune the log levels to find out more (root and hadoop are on trace)?\r\n- What am I missing here?\r\n\r\n  [1]: https://gist.github.com/pajoma/b01ef58f21f38e0a5e1f34c2110f39ee","title":"Flink Taskmanager crashed while accessing S3 FileSource (on Kubernetes/OpenShift)","body":"<p>I have a job receiving events with a s3 link. It attempts to load the resource using the following snippet</p>\n<pre class=\"lang-java prettyprint-override\"><code>// value of s3 source is &quot;s3://bucket_id/path/to/object.json&quot;\nList&lt;String&gt; collect = ExecutionEnvironment.getExecutionEnvironment().readTextFile(s3_source.toString()).collect();\n</code></pre>\n<p>Flink is configured accordingly in flink-conf.yaml</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>    s3.access-key: XXX\n    s3.secret-key: XXX\n    s3.endpoint: s3.openshift-storage.svc\n    s3.path.style.access: true  \n</code></pre>\n<p>The library <code>flink-s3-fs-hadoop-1.16.0.jar</code> is in path <code>/opt/flink/plugins/flink-s3-fs-hadoop</code>. I had some issues setting up the self-signed certificates (see <a href=\"https://gist.github.com/pajoma/b01ef58f21f38e0a5e1f34c2110f39ee\" rel=\"nofollow noreferrer\">this Gist</a> for my config), but it seems to be working.</p>\n<p>When starting the job through the JobManager's WebUI, I get the following logs</p>\n<p><em>Job is starting</em></p>\n<pre><code>2023-01-26 10:33:09,891 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Receive slot request f9f291f0e4b74471e59a74602212060b for job c62504dec97d185a3e86fc390256e3f9 from resource manager with leader id 00000000000000000000000000000000.\n2023-01-26 10:33:09,894 DEBUG org.apache.flink.runtime.memory.MemoryManager                [] - Initialized MemoryManager with total memory size 178956973 and page size 32768.\n2023-01-26 10:33:09,895 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Allocated slot for f9f291f0e4b74471e59a74602212060b.\n2023-01-26 10:33:09,896 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Add job c62504dec97d185a3e86fc390256e3f9 for job leader monitoring.\n2023-01-26 10:33:09,897 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - New leader information for job c62504dec97d185a3e86fc390256e3f9. Address: akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10, leader id: 00000000000000000000000000000000.\n2023-01-26 10:33:09,897 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Try to register at job manager akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 with leader id 00000000-0000-0000-0000-000000000000.\n2023-01-26 10:33:09,898 DEBUG org.apache.flink.runtime.rpc.akka.AkkaRpcService             [] - Try to connect to remote RPC endpoint with address akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10. Returning a org.apache.flink.runtime.jobmaster.JobMasterGateway gateway.\n2023-01-26 10:33:09,910 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Resolved JobManager address, beginning registration\n2023-01-26 10:33:09,910 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Registration at JobManager attempt 1 (timeout=100ms)\n2023-01-26 10:33:09,991 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Registration with JobManager at akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 was successful.\n2023-01-26 10:33:09,993 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Successful registration at job manager akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 for job c62504dec97d185a3e86fc390256e3f9.\n2023-01-26 10:33:09,993 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Establish JobManager connection for job c62504dec97d185a3e86fc390256e3f9.\n2023-01-26 10:33:09,995 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Offer reserved slots to the leader of job c62504dec97d185a3e86fc390256e3f9.\n2023-01-26 10:33:10,011 INFO  org.apache.flink.runtime.taskexecutor.slot.TaskSlotTableImpl [] - Activate slot f9f291f0e4b74471e59a74602212060b.\n</code></pre>\n<p><em>Event is received from RabbitMQ Stream</em></p>\n<pre><code>2023-01-26 10:33:11,193 INFO  io.av360.maverick.insights.rmqstreams.RMQStreamSource        [] - Running event consumer as stream source\n2023-01-26 10:33:11,194 INFO  io.av360.maverick.insights.rmqstreams.config.RMQStreamsConfig [] - Creating consumer for stream 'events'\n2023-01-26 10:33:11,195 INFO  io.av360.maverick.insights.rmqstreams.config.RMQStreamsConfig [] - Creating environment required to connect to a RabbitMQ Stream.\n2023-01-26 10:33:11,195 DEBUG io.av360.maverick.insights.rmqstreams.config.StreamsClientFactory [] - Building environment\n2023-01-26 10:33:11,195 INFO  io.av360.maverick.insights.rmqstreams.config.StreamsClientFactory [] - Valid configuration for host 'rabbitmq'\n....\n2023-01-26 10:33:14,907 INFO  XXX   [] - Event of type 'crawled.source.channel' with source 's3://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json'\n</code></pre>\n<p><em>Attempting to read from s3</em></p>\n<pre><code>2023-01-26 10:33:15,303 DEBUG org.apache.flink.fs.s3.common.AbstractS3FileSystemFactory    [] - Creating S3 file system backed by Hadoop s3a file system\n2023-01-26 10:33:15,303 DEBUG org.apache.flink.fs.s3.common.AbstractS3FileSystemFactory    [] - Loading Hadoop configuration for Hadoop s3a file system\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.secret-key as fs.s3a.secret-key to Hadoop config\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.endpoint as fs.s3a.endpoint to Hadoop config\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.access-key as fs.s3a.access-key to Hadoop config\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.path.style.access as fs.s3a.path.style.access to Hadoop config\n2023-01-26 10:33:15,705 DEBUG org.apache.flink.fs.s3hadoop.S3FileSystemFactory             [] - Using scheme s3://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json for s3a file system backing the S3 File System\n</code></pre>\n<p><em>a few hadoop exceptions (relevant?)</em></p>\n<pre><code>2023-01-26 10:33:15,800 DEBUG org.apache.hadoop.util.Shell                                 [] - Failed to detect a valid hadoop home directory\njava.io.FileNotFoundException: HADOOP_HOME and hadoop.home.dir are unset.\n...\n2023-01-26 10:33:16,108 DEBUG org.apache.hadoop.metrics2.impl.MetricsConfig                [] - Could not locate file hadoop-metrics2-s3a-file-system.properties\norg.apache.commons.configuration2.ex.ConfigurationException: Could not locate: org.apache.commons.configuration2.io.FileLocator@4ac69a5d[fileName=hadoop-metrics2-s3a-file-system.properties,basePath=&lt;null&gt;,sourceURL=,encoding=&lt;null&gt;,fileSystem=&lt;null&gt;,locationStrategy=&lt;null&gt;]\n...\n2023-01-26 10:33:16,111 DEBUG org.apache.hadoop.metrics2.impl.MetricsConfig                [] - Could not locate file hadoop-metrics2.properties\norg.apache.commons.configuration2.ex.ConfigurationException: Could not locate: org.apache.commons.configuration2.io.FileLocator@4faa9611[fileName=hadoop-metrics2.properties,basePath=&lt;null&gt;,sourceURL=,encoding=&lt;null&gt;,fileSystem=&lt;null&gt;,locationStrategy=&lt;null&gt;]\n...\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.NativeCodeLoader                      [] - Failed to load native-hadoop with error: java.lang.UnsatisfiedLinkError: no hadoop in java.library.path: [/usr/java/packages/lib, /usr/lib64, /lib64, /lib, /usr/lib]\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.NativeCodeLoader                      [] - java.library.path=/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib\n2023-01-26 10:33:16,508 WARN  org.apache.hadoop.util.NativeCodeLoader                      [] - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.PerformanceAdvisory                   [] - Falling back to shell based\n...\n2023-01-26 10:33:17,119 DEBUG org.apache.hadoop.security.ssl.DelegatingSSLSocketFactory    [] - Initializing SSL Context to channel mode Default_JSSE\n2023-01-26 10:33:17,710 DEBUG org.apache.hadoop.fs.s3a.impl.NetworkBinding                 [] - Unable to create class org.apache.hadoop.fs.s3a.impl.ConfigureShadedAWSSocketFactory, value of fs.s3a.ssl.channel.mode will be ignored\njava.lang.NoClassDefFoundError: com/amazonaws/thirdparty/apache/http/conn/socket/ConnectionSocketFactory\n</code></pre>\n<p><em>Connection attempt</em></p>\n<pre><code>2023-01-26 10:33:17,997 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Creating endpoint configuration for &quot;s3.openshift-storage.svc&quot;\n2023-01-26 10:33:17,998 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Endpoint URI = https://s3.openshift-storage.svc\n2023-01-26 10:33:18,096 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Endpoint https://s3.openshift-storage.svc is not the default; parsing\n2023-01-26 10:33:18,097 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Region for endpoint s3.openshift-storage.svc, URI https://s3.openshift-storage.svc is determined as openshift-storage\n...\n2023-01-26 10:33:18,806 DEBUG com.amazonaws.request                                        [] - Sending Request: HEAD https://s3.openshift-storage.svc /bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json Headers: (amz-sdk-invocation-id: xxx, Content-Type: application/octet-stream, User-Agent: Hadoop 3.3.2, aws-sdk-java/1.11.951 Linux/4.18.0-372.26.1.el8_6.x86_64 OpenJDK_64-Bit_Server_VM/11.0.17+8 java/11.0.17 vendor/Eclipse_Adoptium, ) \n\n...\n2023-01-26 10:33:20,108 DEBUG org.apache.hadoop.fs.s3a.Invoker                             [] - Starting: open s3a://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json at 0\n\n...\n2023-01-26 10:33:19,598 DEBUG com.amazonaws.request                                        [] - Received successful response: 200, AWS Request ID: ldcyiwlo-6w4j96-om3\n</code></pre>\n<p><em>Everything looks fine for now, last logs are</em></p>\n<pre><code>2023-01-26 10:33:24,299 INFO  org.apache.flink.runtime.taskexecutor.TaskManagerServices    [] - Temporary file directory '/tmp': total 119 GB, usable 48 GB (40.34% usable)\n2023-01-26 10:33:24,299 DEBUG org.apache.flink.runtime.io.disk.FileChannelManagerImpl      [] - FileChannelManager uses directory /tmp/flink-io-15f45aea-fa25-4f90-be7e-ad49e8722980 for spill files.\n2023-01-26 10:33:24,299 INFO  org.apache.flink.runtime.io.disk.iomanager.IOManager         [] - Created a new FileChannelManager for spilling of task related data to disk (joins, sorting, ...). Used directories:\n    /tmp/flink-io-15f45aea-fa25-4f90-be7e-ad49e8722980\n2023-01-26 10:33:24,301 DEBUG org.apache.flink.runtime.io.disk.FileChannelManagerImpl      [] - FileChannelManager uses directory /tmp/flink-netty-shuffle-ff78f4af-d02b-412b-b305-414b570917a8 for spill files.\n2023-01-26 10:33:24,301 INFO  org.apache.flink.runtime.io.network.NettyShuffleServiceFactory [] - Created a new FileChannelManager for storing result partitions of BLOCKING shuffles. Used directories:\n    /tmp/flink-netty-shuffle-ff78f4af-d02b-412b-b305-414b570917a8\n\n</code></pre>\n<p>These are the last logs. From this point on, the job fails and the task manager is gone (and restarted through K8S).</p>\n<p>My two questions are:</p>\n<ul>\n<li>Can I tune the log levels to find out more (root and hadoop are on trace)?</li>\n<li>What am I missing here?</li>\n</ul>\n"},{"tags":["java","eclipse","github","clone"],"answers":[{"comments":[{"owner":{"account_id":24154267,"reputation":13,"user_id":18118704,"display_name":"Comet"},"score":0,"creation_date":1674747314,"post_id":75248093,"comment_id":132783584,"body_markdown":"yes I use that smart import but it&#39;s not work","body":"yes I use that smart import but it&#39;s not work"},{"owner":{"account_id":24154267,"reputation":13,"user_id":18118704,"display_name":"Comet"},"score":1,"creation_date":1674748664,"post_id":75248093,"comment_id":132784118,"body_markdown":"thank you very much now I can do it &lt;3","body":"thank you very much now I can do it &lt;3"}],"tags":[],"owner":{"account_id":8754628,"reputation":582,"user_id":6546584,"display_name":"desoss"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674746170,"creation_date":1674746170,"answer_id":75248093,"question_id":75247919,"body_markdown":"If it&#39;s a Maven project using the smart import might help.\r\n\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rS0lV.png","title":"Why I can&#39;t build path for a project that was cloned from Github in Eclipse?","body":"<p>If it's a Maven project using the smart import might help.</p>\n<p><a href=\"https://i.stack.imgur.com/rS0lV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rS0lV.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":24154267,"reputation":13,"user_id":18118704,"display_name":"Comet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75248093,"answer_count":1,"score":0,"last_activity_date":1674746170,"creation_date":1674745407,"question_id":75247919,"body_markdown":"I cloned a project of my teams from Github using a link to my Folder Java. I only used the Clone tools in Eclipse and added it to my Package Explorer as a General Project. But when I open the project, all the package became normal folder, I click into the folder to the Build Path but there&#39;s nothing I can&#39;t do. I don&#39;t understand why, please help me!","title":"Why I can&#39;t build path for a project that was cloned from Github in Eclipse?","body":"<p>I cloned a project of my teams from Github using a link to my Folder Java. I only used the Clone tools in Eclipse and added it to my Package Explorer as a General Project. But when I open the project, all the package became normal folder, I click into the folder to the Build Path but there's nothing I can't do. I don't understand why, please help me!</p>\n"},{"tags":["java","xpath","expression"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1674745974,"post_id":75247990,"comment_id":132783070,"body_markdown":"`//SomeNode[boolean(Text_2/@*)]/Text` is a vague attempt, i am not 100% sure that `boolean(Text_2/@*)` reliably checks for the existence of attributes.","body":"<code>&#47;&#47;SomeNode[boolean(Text_2&#47;@*)]&#47;Text</code> is a vague attempt, i am not 100% sure that <code>boolean(Text_2&#47;@*)</code> reliably checks for the existence of attributes."}],"answers":[{"tags":[],"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674746109,"creation_date":1674746109,"answer_id":75248079,"question_id":75247990,"body_markdown":"Your text says &quot;want to get, using xpath expression, text from Text node only if Text_2 contains elements&quot;, with your given sample that would be `//SomeNode[Text_2/*]/Text`. For some reasons I don&#39;t understand, however, in your sample the `Text_2` element doesn&#39;t have any child elements.","title":"XPath expression with where statement","body":"<p>Your text says &quot;want to get, using xpath expression, text from Text node only if Text_2 contains elements&quot;, with your given sample that would be <code>//SomeNode[Text_2/*]/Text</code>. For some reasons I don't understand, however, in your sample the <code>Text_2</code> element doesn't have any child elements.</p>\n"}],"owner":{"account_id":19882007,"reputation":17,"user_id":14565822,"display_name":"blindDriver"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1674746109,"creation_date":1674745725,"question_id":75247990,"body_markdown":"I have xml and I want to get, using xpath expression, text from Text node only if Text_2 contains elements. Is there any possibility? I couldn&#39;t find out any. \r\n\r\n```\r\n&lt;List&gt;\r\n   &lt;Response&gt;\r\n\t&lt;Node&gt;\r\n\t   &lt;SomeNode&gt;\r\n\t\t&lt;Text&gt;text&lt;/Text&gt;\r\n\t\t&lt;Text_1&gt;text_1&lt;/Text_1&gt;\r\n\t\t&lt;Text_2 value_1=&quot;some value 1&quot; value_2=&quot;some value 2&quot; /&gt;\r\n\t   &lt;/SomeNode&gt;\r\n\t&lt;/Node&gt;\r\n    &lt;/Response&gt;\r\n&lt;/List&gt;\r\n```\r\n\r\nI tried to get Text_2 elements using //*[@value_1] but I stuck and do not have any other idea","title":"XPath expression with where statement","body":"<p>I have xml and I want to get, using xpath expression, text from Text node only if Text_2 contains elements. Is there any possibility? I couldn't find out any.</p>\n<pre><code>&lt;List&gt;\n   &lt;Response&gt;\n    &lt;Node&gt;\n       &lt;SomeNode&gt;\n        &lt;Text&gt;text&lt;/Text&gt;\n        &lt;Text_1&gt;text_1&lt;/Text_1&gt;\n        &lt;Text_2 value_1=&quot;some value 1&quot; value_2=&quot;some value 2&quot; /&gt;\n       &lt;/SomeNode&gt;\n    &lt;/Node&gt;\n    &lt;/Response&gt;\n&lt;/List&gt;\n</code></pre>\n<p>I tried to get Text_2 elements using //*[@value_1] but I stuck and do not have any other idea</p>\n"},{"tags":["java","selenium","cucumber"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1674748991,"post_id":75248006,"comment_id":132784238,"body_markdown":"debug and check complexityComboBox value.  It may be null.  (If the element doesn&#39;t exist yet, it&#39;ll throw no such element exception and I don&#39;t think it&#39;ll ever intialize.)  The webdriverwait should be added to the findby....","body":"debug and check complexityComboBox value.  It may be null.  (If the element doesn&#39;t exist yet, it&#39;ll throw no such element exception and I don&#39;t think it&#39;ll ever intialize.)  The webdriverwait should be added to the findby...."},{"owner":{"account_id":27528457,"reputation":39,"user_id":21007380,"display_name":"Pratik"},"score":0,"creation_date":1674836925,"post_id":75248006,"comment_id":132805044,"body_markdown":"I tried debugging and found the same. The complexity combo box element value is shown as the exception value","body":"I tried debugging and found the same. The complexity combo box element value is shown as the exception value"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1674842956,"post_id":75248006,"comment_id":132806958,"body_markdown":"I&#39;d add the webdriverwait to the findby annotations/methods... you should try/catch there so you can deal with any timeout exceptions thrown.","body":"I&#39;d add the webdriverwait to the findby annotations/methods... you should try/catch there so you can deal with any timeout exceptions thrown."}],"owner":{"account_id":27528457,"reputation":39,"user_id":21007380,"display_name":"Pratik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":372,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1674745863,"creation_date":1674745813,"question_id":75248006,"body_markdown":"I am writing a UI automation code wherein I am trying to wait for an element to load i.e. visibility of an element but getting a null pointer exception. When I tried to debug, I found that the element value being passed is &quot;com.sun.jdi.InvocationException: Exception occurred in target VM occurred invoking method&quot; hence I am getting null pointer.\r\n\r\nI am not aware what this error is and I am stuck. \r\n\r\nBelow is my code.\r\n\r\n`\r\n\r\n    public static void waitForElementToLoad(WebDriver driver, WebElement element, int waitTimeInSeconds) {\r\n            WebDriverWait wait = new WebDriverWait(driver,waitTimeInSeconds);\r\n            wait.until(ExpectedConditions.visibilityOf(element));\r\n        }\r\n\r\n`\r\n\r\nThe argument element says Invocation exception. The method where I am calling this method is\r\n`\r\n\r\n    public void waitForShareHolderInputScreenToLoad() {\r\n    \t\tWaitActions.waitForElementToLoad(driver, complexityComboBox, Utils.EXPLICIT_WAIT_VALUE_LONG);\r\n    \t}\r\n\r\n`\r\n\r\nThe locator complexityComboBox is as follows.\r\n`\r\n\r\n    @FindBy(xpath = &quot;//div[@role=&#39;combobox&#39;]/span&quot;)\r\n    \tprivate static WebElement complexityComboBox;\r\n\r\n`\r\n\r\nNot getting what exactly is the issue here.","title":"Getting com.sun.jdi.InvocationException: Exception occurred in target VM occurred invoking method Selenium","body":"<p>I am writing a UI automation code wherein I am trying to wait for an element to load i.e. visibility of an element but getting a null pointer exception. When I tried to debug, I found that the element value being passed is &quot;com.sun.jdi.InvocationException: Exception occurred in target VM occurred invoking method&quot; hence I am getting null pointer.</p>\n<p>I am not aware what this error is and I am stuck.</p>\n<p>Below is my code.</p>\n<p>`</p>\n<pre><code>public static void waitForElementToLoad(WebDriver driver, WebElement element, int waitTimeInSeconds) {\n        WebDriverWait wait = new WebDriverWait(driver,waitTimeInSeconds);\n        wait.until(ExpectedConditions.visibilityOf(element));\n    }\n</code></pre>\n<p>`</p>\n<p>The argument element says Invocation exception. The method where I am calling this method is\n`</p>\n<pre><code>public void waitForShareHolderInputScreenToLoad() {\n        WaitActions.waitForElementToLoad(driver, complexityComboBox, Utils.EXPLICIT_WAIT_VALUE_LONG);\n    }\n</code></pre>\n<p>`</p>\n<p>The locator complexityComboBox is as follows.\n`</p>\n<pre><code>@FindBy(xpath = &quot;//div[@role='combobox']/span&quot;)\n    private static WebElement complexityComboBox;\n</code></pre>\n<p>`</p>\n<p>Not getting what exactly is the issue here.</p>\n"},{"tags":["java","google-cloud-platform","recaptcha","invisible-recaptcha"],"owner":{"account_id":20545235,"reputation":19,"user_id":15079261,"display_name":"SUCHITRA GIRI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674745761,"creation_date":1674734307,"question_id":75245807,"body_markdown":"```java\r\npublic static float getRecaptchaScore(\r\n    String projectName, String recaptchaSiteKey, String token, String action) {\r\n  log.info(&quot;inside getRecaptchaScore&quot;);\r\n  float recaptchaScore = 0;\r\n  String assessmentName = action + &quot;_assessment&quot;;\r\n  String projectPath = &quot;projects/&quot; + projectName;\r\n  log.info(&quot;inside getRecaptchaScore&quot;);\r\n  try (RecaptchaEnterpriseServiceClient client = RecaptchaEnterpriseServiceClient.create()) {\r\n    log.info(&quot;inside RecaptchaEnterpriseServiceClient&quot;);\r\n    Event event =\r\n        Event.newBuilder().setToken(token).setSiteKey(recaptchaSiteKey).setExpectedAction(action)\r\n            .build();\r\n    log.info(&quot;event: &quot; + event);\r\n    Assessment assessment =\r\n        Assessment.newBuilder().setEvent(event).setName(assessmentName).build();\r\n    log.info(&quot;assessment: &quot; + assessment);\r\n    CreateAssessmentRequest createAssessmentRequest =\r\n        CreateAssessmentRequest.newBuilder()\r\n            .setParent(projectPath)\r\n            .setAssessment(assessment)\r\n            .build();\r\n    log.info(&quot;createAssessmentRequest: &quot; + createAssessmentRequest);\r\n    Assessment assessmentResponse = client.createAssessment(createAssessmentRequest);\r\n    log.info(&quot;assessmentResponse: &quot; + assessmentResponse);\r\n    if (assessmentResponse.getTokenProperties().getValid()\r\n        &amp;&amp; assessmentResponse.getEvent().getExpectedAction().equalsIgnoreCase(action)) {\r\n      recaptchaScore = assessmentResponse.getRiskAnalysis().getScore();\r\n\r\n      log.info(&quot;The reCAPTCHA score is: &quot; + recaptchaScore);\r\n      log.info(&quot;Assessment Response :: &quot; + assessmentResponse);\r\n    }\r\n  } catch (Exception e) {\r\n    log.log(Level.SEVERE, &quot;Exception while recaptcha process getRecaptchaScore:: &quot;,\r\n        e.getMessage());\r\n  }\r\n  return recaptchaScore;\r\n}\r\n```\r\n\r\nThe above code snippet in `RecaptchaEnterpriseServiceClient.create()` is getting unexpected error, so unable to get score from google recaptcha enterprise.\r\nHere is the error can someone help me out that where might be the issue.\r\n\r\nI am using java8, Gradle for build tool, spring project.\r\n\r\n```none\r\ncom.google.auth.oauth2.ComputeEngineCredentials runningOnComputeEngine: Failed to detect whether we are running on Google Compute Engine.\r\njava.io.IOException: \r\n\tat com.google.appengine.api.urlfetch.URLFetchServiceImpl.convertApplicationException(URLFetchServiceImpl.java:209)\r\n\tat com.google.appengine.api.urlfetch.URLFetchServiceImpl.fetch(URLFetchServiceImpl.java:59)\r\n\tat com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.fetchResponse(URLFetchServiceStreamHandler.java:608)\r\n\tat com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getInputStream(URLFetchServiceStreamHandler.java:487)\r\n\tat com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getResponseCode(URLFetchServiceStreamHandler.java:340)\r\n\tat com.google.api.client.http.javanet.NetHttpResponse.&lt;init&gt;(NetHttpResponse.java:37)\r\n\tat com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:105)\r\n\tat com.google.api.client.http.HttpRequest.execute(HttpRequest.java:981)\r\n\tat com.google.auth.oauth2.ComputeEngineCredentials.runningOnComputeEngine(ComputeEngineCredentials.java:191)\r\n\tat com.google.auth.oauth2.DefaultCredentialsProvider.tryGetComputeCredentials(DefaultCredentialsProvider.java:270)\r\n\tat com.google.auth.oauth2.DefaultCredentialsProvider.getDefaultCredentialsUnsynchronized(DefaultCredentialsProvider.java:194)\r\n\tat com.google.auth.oauth2.DefaultCredentialsProvider.getDefaultCredentials(DefaultCredentialsProvider.java:112)\r\n\tat com.google.auth.oauth2.GoogleCredentials.getApplicationDefault(GoogleCredentials.java:127)\r\n\tat com.google.auth.oauth2.GoogleCredentials.getApplicationDefault(GoogleCredentials.java:100)\r\n\tat com.google.api.gax.core.GoogleCredentialsProvider.getCredentials(GoogleCredentialsProvider.java:59)\r\n\tat com.google.api.gax.rpc.ClientContext.create(ClientContext.java:134)\r\n\tat com.google.cloud.recaptchaenterprise.v1.stub.GrpcRecaptchaEnterpriseServiceStub.create(GrpcRecaptchaEnterpriseServiceStub.java:137)\r\n\tat com.google.cloud.recaptchaenterprise.v1.stub.RecaptchaEnterpriseServiceStubSettings.createStub(RecaptchaEnterpriseServiceStubSettings.java:155)\r\n\tat com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.&lt;init&gt;(RecaptchaEnterpriseServiceClient.java:156)\r\n\tat com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.create(RecaptchaEnterpriseServiceClient.java:136)\r\n\tat com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.create(RecaptchaEnterpriseServiceClient.java:126)\r\n\tat website.register.v2.RegistrationHelper.getRecaptchaScore(RegistrationHelper.java:151)\r\n\tat website.register.v2.RegistrationService.processRecaptcha(RegistrationService.java:167)\r\n\tat website.register.v2.RegistrationController.leadRegisteration(RegistrationController.java:43)\r\n\tat website.register.v2.RegistrationController$$FastClassBySpringCGLIB$$6617efaf.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:746)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)\r\n\tat signup.fullmetrics.FullMetricsAspect.newRegistrationFullMetricsAspect(FullMetricsAspect.java:34)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\r\n\tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\r\n\tat website.register.v2.RegistrationController$$EnhancerBySpringCGLIB$$ea08a53c.leadRegisteration(&lt;generated&gt;)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n\tat org.eclipse.jetty.servlet.ServletHolder$NotAsync.service(ServletHolder.java:1459)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656)\r\n\tat com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:78)\r\n\tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\r\n\tat website.register.Filters.RateLimitValidatorFilter.doFilter(RateLimitValidatorFilter.java:71)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat website.register.Filters.RequestOriginValidatorFilter.doFilter(RequestOriginValidatorFilter.java:45)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270)\r\n\tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\r\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:571)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat com.google.apphosting.runtime.jetty9.ParseBlobUploadHandler.handle(ParseBlobUploadHandler.java:124)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440)\r\n\tat com.google.apphosting.runtime.jetty94.AppEngineWebAppContext.doHandle(AppEngineWebAppContext.java:289)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat com.google.apphosting.runtime.jetty94.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:113)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:516)\r\n\tat org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487)\r\n\tat org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479)\r\n\tat com.google.apphosting.runtime.jetty94.RpcConnection.handle(RpcConnection.java:270)\r\n\tat com.google.apphosting.runtime.jetty94.RpcConnector.serviceRequest(RpcConnector.java:99)\r\n\tat com.google.apphosting.runtime.jetty94.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:184)\r\n\tat com.google.apphosting.runtime.RequestRunner.dispatchServletRequest(RequestRunner.java:264)\r\n\tat com.google.apphosting.runtime.RequestRunner.dispatchRequest(RequestRunner.java:229)\r\n\tat com.google.apphosting.runtime.RequestRunner.run(RequestRunner.java:194)\r\n\tat com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:273)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```    \r\n\r\nThank you in advance","title":"Getting error while using recaptcha enterprise to get score","body":"<pre class=\"lang-java prettyprint-override\"><code>public static float getRecaptchaScore(\n    String projectName, String recaptchaSiteKey, String token, String action) {\n  log.info(&quot;inside getRecaptchaScore&quot;);\n  float recaptchaScore = 0;\n  String assessmentName = action + &quot;_assessment&quot;;\n  String projectPath = &quot;projects/&quot; + projectName;\n  log.info(&quot;inside getRecaptchaScore&quot;);\n  try (RecaptchaEnterpriseServiceClient client = RecaptchaEnterpriseServiceClient.create()) {\n    log.info(&quot;inside RecaptchaEnterpriseServiceClient&quot;);\n    Event event =\n        Event.newBuilder().setToken(token).setSiteKey(recaptchaSiteKey).setExpectedAction(action)\n            .build();\n    log.info(&quot;event: &quot; + event);\n    Assessment assessment =\n        Assessment.newBuilder().setEvent(event).setName(assessmentName).build();\n    log.info(&quot;assessment: &quot; + assessment);\n    CreateAssessmentRequest createAssessmentRequest =\n        CreateAssessmentRequest.newBuilder()\n            .setParent(projectPath)\n            .setAssessment(assessment)\n            .build();\n    log.info(&quot;createAssessmentRequest: &quot; + createAssessmentRequest);\n    Assessment assessmentResponse = client.createAssessment(createAssessmentRequest);\n    log.info(&quot;assessmentResponse: &quot; + assessmentResponse);\n    if (assessmentResponse.getTokenProperties().getValid()\n        &amp;&amp; assessmentResponse.getEvent().getExpectedAction().equalsIgnoreCase(action)) {\n      recaptchaScore = assessmentResponse.getRiskAnalysis().getScore();\n\n      log.info(&quot;The reCAPTCHA score is: &quot; + recaptchaScore);\n      log.info(&quot;Assessment Response :: &quot; + assessmentResponse);\n    }\n  } catch (Exception e) {\n    log.log(Level.SEVERE, &quot;Exception while recaptcha process getRecaptchaScore:: &quot;,\n        e.getMessage());\n  }\n  return recaptchaScore;\n}\n</code></pre>\n<p>The above code snippet in <code>RecaptchaEnterpriseServiceClient.create()</code> is getting unexpected error, so unable to get score from google recaptcha enterprise.\nHere is the error can someone help me out that where might be the issue.</p>\n<p>I am using java8, Gradle for build tool, spring project.</p>\n<pre class=\"lang-none prettyprint-override\"><code>com.google.auth.oauth2.ComputeEngineCredentials runningOnComputeEngine: Failed to detect whether we are running on Google Compute Engine.\njava.io.IOException: \n    at com.google.appengine.api.urlfetch.URLFetchServiceImpl.convertApplicationException(URLFetchServiceImpl.java:209)\n    at com.google.appengine.api.urlfetch.URLFetchServiceImpl.fetch(URLFetchServiceImpl.java:59)\n    at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.fetchResponse(URLFetchServiceStreamHandler.java:608)\n    at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getInputStream(URLFetchServiceStreamHandler.java:487)\n    at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getResponseCode(URLFetchServiceStreamHandler.java:340)\n    at com.google.api.client.http.javanet.NetHttpResponse.&lt;init&gt;(NetHttpResponse.java:37)\n    at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:105)\n    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:981)\n    at com.google.auth.oauth2.ComputeEngineCredentials.runningOnComputeEngine(ComputeEngineCredentials.java:191)\n    at com.google.auth.oauth2.DefaultCredentialsProvider.tryGetComputeCredentials(DefaultCredentialsProvider.java:270)\n    at com.google.auth.oauth2.DefaultCredentialsProvider.getDefaultCredentialsUnsynchronized(DefaultCredentialsProvider.java:194)\n    at com.google.auth.oauth2.DefaultCredentialsProvider.getDefaultCredentials(DefaultCredentialsProvider.java:112)\n    at com.google.auth.oauth2.GoogleCredentials.getApplicationDefault(GoogleCredentials.java:127)\n    at com.google.auth.oauth2.GoogleCredentials.getApplicationDefault(GoogleCredentials.java:100)\n    at com.google.api.gax.core.GoogleCredentialsProvider.getCredentials(GoogleCredentialsProvider.java:59)\n    at com.google.api.gax.rpc.ClientContext.create(ClientContext.java:134)\n    at com.google.cloud.recaptchaenterprise.v1.stub.GrpcRecaptchaEnterpriseServiceStub.create(GrpcRecaptchaEnterpriseServiceStub.java:137)\n    at com.google.cloud.recaptchaenterprise.v1.stub.RecaptchaEnterpriseServiceStubSettings.createStub(RecaptchaEnterpriseServiceStubSettings.java:155)\n    at com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.&lt;init&gt;(RecaptchaEnterpriseServiceClient.java:156)\n    at com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.create(RecaptchaEnterpriseServiceClient.java:136)\n    at com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.create(RecaptchaEnterpriseServiceClient.java:126)\n    at website.register.v2.RegistrationHelper.getRecaptchaScore(RegistrationHelper.java:151)\n    at website.register.v2.RegistrationService.processRecaptcha(RegistrationService.java:167)\n    at website.register.v2.RegistrationController.leadRegisteration(RegistrationController.java:43)\n    at website.register.v2.RegistrationController$$FastClassBySpringCGLIB$$6617efaf.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:746)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)\n    at signup.fullmetrics.FullMetricsAspect.newRegistrationFullMetricsAspect(FullMetricsAspect.java:34)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n    at website.register.v2.RegistrationController$$EnhancerBySpringCGLIB$$ea08a53c.leadRegisteration(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.eclipse.jetty.servlet.ServletHolder$NotAsync.service(ServletHolder.java:1459)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)\n    at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656)\n    at com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:78)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\n    at website.register.Filters.RateLimitValidatorFilter.doFilter(RateLimitValidatorFilter.java:71)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at website.register.Filters.RequestOriginValidatorFilter.doFilter(RequestOriginValidatorFilter.java:45)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:571)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at com.google.apphosting.runtime.jetty9.ParseBlobUploadHandler.handle(ParseBlobUploadHandler.java:124)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440)\n    at com.google.apphosting.runtime.jetty94.AppEngineWebAppContext.doHandle(AppEngineWebAppContext.java:289)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at com.google.apphosting.runtime.jetty94.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:113)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.Server.handle(Server.java:516)\n    at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487)\n    at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479)\n    at com.google.apphosting.runtime.jetty94.RpcConnection.handle(RpcConnection.java:270)\n    at com.google.apphosting.runtime.jetty94.RpcConnector.serviceRequest(RpcConnector.java:99)\n    at com.google.apphosting.runtime.jetty94.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:184)\n    at com.google.apphosting.runtime.RequestRunner.dispatchServletRequest(RequestRunner.java:264)\n    at com.google.apphosting.runtime.RequestRunner.dispatchRequest(RequestRunner.java:229)\n    at com.google.apphosting.runtime.RequestRunner.run(RequestRunner.java:194)\n    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:273)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>Thank you in advance</p>\n"},{"tags":["java","spring-boot","hibernate"],"comments":[{"owner":{"account_id":11260582,"reputation":102,"user_id":8259045,"display_name":"T4puSD"},"score":0,"creation_date":1674751687,"post_id":75247947,"comment_id":132785202,"body_markdown":"What are you actually trying to do? Are you trying to remove the `cardid` property from the response or want help fixing the exception?","body":"What are you actually trying to do? Are you trying to remove the <code>cardid</code> property from the response or want help fixing the exception?"},{"owner":{"account_id":27316723,"reputation":42,"user_id":20837394,"display_name":"Yevgeniy"},"score":0,"creation_date":1674757332,"post_id":75247947,"comment_id":132786969,"body_markdown":"@T4puSD I am trying to remove the cardid from the response","body":"@T4puSD I am trying to remove the cardid from the response"}],"owner":{"account_id":27316723,"reputation":42,"user_id":20837394,"display_name":"Yevgeniy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674745507,"creation_date":1674745507,"question_id":75247947,"body_markdown":"Such a problem. I have a DTO in which the fields of the tables **boat_cards** and **engines** are combined. Now I want to get data from table **engines** excluding the **cardid** field. The option with the **@JsonIgnore** annotation is not suitable, since this field may need to be displayed when querying the **engines** table itself Here is my code:\r\n\r\nDAO class:\r\n\r\n    @Repository\r\n    public interface EnginesDao extends JpaRepository&lt;Engines, Integer&gt; {\r\n    \r\n        List&lt;Engines&gt; findAllByCardidCardid(Integer cardid);\r\n    \r\n        @Query(value = &quot;SELECT engid, engname, engvin, engpwr, recdate FROM gims.engines  where cardid = :cardid&quot;,\r\n                nativeQuery = true)\r\n        List&lt;Engines&gt; findAllByCardidQuery(@Param(&quot;cardid&quot;) Integer cardid);\r\n    \r\n    }\r\n\r\nService class:\r\n\r\n    @Service\r\n    public class EnginesServiceImpl implements EnginesService{\r\n    \r\n        @Autowired\r\n        private EnginesDao enginesDao;\r\n    \r\n        @Override\r\n        public List&lt;Engines&gt; getAllByCardidQuery(Integer id) {\r\n            return enginesDao.findAllByCardidQuery(id);\r\n        }\r\n    }\r\n\r\nDTO class:\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class BoatCardsDto extends BoatCards implements Serializable {\r\n    \r\n        private List&lt;Engines&gt; engines;\r\n    \r\n    \r\n        public BoatCardsDto(BoatCards boatCards, List&lt;Engines&gt; engines) {\r\n            this.cardid = boatCards.getCardid();\r\n            this.regNum = boatCards.getRegNum();\r\n            this.tiketNum = boatCards.getTiketNum();\r\n            this.boatName = boatCards.getBoatName();\r\n            this.boatType = boatCards.getBoatType();\r\n            this.boatYear = boatCards.getBoatYear();\r\n            this.boatVin = boatCards.getBoatVin();\r\n            this.parkingPlace = boatCards.getParkingPlace();\r\n            this.saCategory = boatCards.getSaCategory();\r\n            this.boatLength = boatCards.getBoatLength();\r\n            this.boatWidth = boatCards.getBoatWidth();\r\n            this.boatHeight = boatCards.getBoatHeight();\r\n            this.bodyMaterial = boatCards.getBodyMaterial();\r\n            this.boatPayload = boatCards.getBoatPayload();\r\n            this.passengersNum = boatCards.getPassengersNum();\r\n            this.serviceLife = boatCards.getServiceLife();\r\n            this.engineNum = boatCards.getEngineNum();\r\n            this.owner = boatCards.getOwner();\r\n            this.agent = boatCards.getAgent();\r\n            this.note = boatCards.getNote();\r\n            this.engines = engines;\r\n        }\r\n    \r\n        public List&lt;Engines&gt; getEngines() {\r\n            return engines;\r\n        }\r\n    \r\n        public void setEngines(List&lt;Engines&gt; engines) {\r\n            this.engines = engines;\r\n        }\r\n    }\r\n\r\nand my exception is:\r\n\r\n    2023-01-26T18:02:10.206+03:00 ERROR 19892 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]:\r\n    Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\r\n    [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException:\r\n    Unable to find column position by name: cardid; SQL [n/a]] with root cause\r\n\r\nMy engine entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;engines&quot;)\r\n    @Data\r\n    @NoArgsConstructor\r\n    @FieldDefaults(level = AccessLevel.PRIVATE)\r\n    public class Engines {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;engid&quot;)\r\n        Integer engid;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;cardid&quot;)\r\n        BoatCards cardid;\r\n    \r\n        @Column(name = &quot;engname&quot;)\r\n        String engname;\r\n    \r\n        @Column(name = &quot;engvin&quot;)\r\n        String engvin;\r\n    \r\n        @Column(name = &quot;engpwr&quot;)\r\n        String engpwr;\r\n    \r\n        @Column(name = &quot;recdate&quot;)\r\n        @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss.SSS&quot;)\r\n        Timestamp recdate;\r\n    \r\n    }\r\n\r\n","title":"How not to display a field from a table?","body":"<p>Such a problem. I have a DTO in which the fields of the tables <strong>boat_cards</strong> and <strong>engines</strong> are combined. Now I want to get data from table <strong>engines</strong> excluding the <strong>cardid</strong> field. The option with the <strong>@JsonIgnore</strong> annotation is not suitable, since this field may need to be displayed when querying the <strong>engines</strong> table itself Here is my code:</p>\n<p>DAO class:</p>\n<pre><code>@Repository\npublic interface EnginesDao extends JpaRepository&lt;Engines, Integer&gt; {\n\n    List&lt;Engines&gt; findAllByCardidCardid(Integer cardid);\n\n    @Query(value = &quot;SELECT engid, engname, engvin, engpwr, recdate FROM gims.engines  where cardid = :cardid&quot;,\n            nativeQuery = true)\n    List&lt;Engines&gt; findAllByCardidQuery(@Param(&quot;cardid&quot;) Integer cardid);\n\n}\n</code></pre>\n<p>Service class:</p>\n<pre><code>@Service\npublic class EnginesServiceImpl implements EnginesService{\n\n    @Autowired\n    private EnginesDao enginesDao;\n\n    @Override\n    public List&lt;Engines&gt; getAllByCardidQuery(Integer id) {\n        return enginesDao.findAllByCardidQuery(id);\n    }\n}\n</code></pre>\n<p>DTO class:</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class BoatCardsDto extends BoatCards implements Serializable {\n\n    private List&lt;Engines&gt; engines;\n\n\n    public BoatCardsDto(BoatCards boatCards, List&lt;Engines&gt; engines) {\n        this.cardid = boatCards.getCardid();\n        this.regNum = boatCards.getRegNum();\n        this.tiketNum = boatCards.getTiketNum();\n        this.boatName = boatCards.getBoatName();\n        this.boatType = boatCards.getBoatType();\n        this.boatYear = boatCards.getBoatYear();\n        this.boatVin = boatCards.getBoatVin();\n        this.parkingPlace = boatCards.getParkingPlace();\n        this.saCategory = boatCards.getSaCategory();\n        this.boatLength = boatCards.getBoatLength();\n        this.boatWidth = boatCards.getBoatWidth();\n        this.boatHeight = boatCards.getBoatHeight();\n        this.bodyMaterial = boatCards.getBodyMaterial();\n        this.boatPayload = boatCards.getBoatPayload();\n        this.passengersNum = boatCards.getPassengersNum();\n        this.serviceLife = boatCards.getServiceLife();\n        this.engineNum = boatCards.getEngineNum();\n        this.owner = boatCards.getOwner();\n        this.agent = boatCards.getAgent();\n        this.note = boatCards.getNote();\n        this.engines = engines;\n    }\n\n    public List&lt;Engines&gt; getEngines() {\n        return engines;\n    }\n\n    public void setEngines(List&lt;Engines&gt; engines) {\n        this.engines = engines;\n    }\n}\n</code></pre>\n<p>and my exception is:</p>\n<pre><code>2023-01-26T18:02:10.206+03:00 ERROR 19892 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]:\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\n[Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException:\nUnable to find column position by name: cardid; SQL [n/a]] with root cause\n</code></pre>\n<p>My engine entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;engines&quot;)\n@Data\n@NoArgsConstructor\n@FieldDefaults(level = AccessLevel.PRIVATE)\npublic class Engines {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;engid&quot;)\n    Integer engid;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;cardid&quot;)\n    BoatCards cardid;\n\n    @Column(name = &quot;engname&quot;)\n    String engname;\n\n    @Column(name = &quot;engvin&quot;)\n    String engvin;\n\n    @Column(name = &quot;engpwr&quot;)\n    String engpwr;\n\n    @Column(name = &quot;recdate&quot;)\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss.SSS&quot;)\n    Timestamp recdate;\n\n}\n</code></pre>\n"},{"tags":["java","amazon-s3"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674807174,"post_id":75247711,"comment_id":132795759,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":18160037,"reputation":1,"user_id":21087335,"display_name":"A V"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674744482,"creation_date":1674744482,"question_id":75247711,"body_markdown":"I need to write into a file on amazon s3.\r\n\r\nWhen event A occurs, I need to get the object and write it to the end of the csv file on s3. When event B occurs I need to get the object and write it to the end of the same csv file on s3.\r\n\r\nHow can I do it?\r\n\r\nP.S. Java\r\n\r\nI tried to use outputstream but the one there isn&#39;t in c3 library &quot;sofware.amazone.awssdk.services.s3&quot;","title":"Row-by-row writing into a file on amazon s3","body":"<p>I need to write into a file on amazon s3.</p>\n<p>When event A occurs, I need to get the object and write it to the end of the csv file on s3. When event B occurs I need to get the object and write it to the end of the same csv file on s3.</p>\n<p>How can I do it?</p>\n<p>P.S. Java</p>\n<p>I tried to use outputstream but the one there isn't in c3 library &quot;sofware.amazone.awssdk.services.s3&quot;</p>\n"},{"tags":["java","spring-boot","visual-studio-code"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1674743920,"post_id":75246554,"comment_id":132782313,"body_markdown":"You are using the spring boot maven plugin from Spring Boot 3.0.2 where the rest is Spring BOot 2.3.3.. THe versions don&#39;t match. Ideally you should have a spring boot starter as parent and don&#39;t specify any further versions. You also marked tomcat as provided and thus no servlet container is going to be available. Finally you should use `Main.class` instead of `myController.class` in your main method to launch the app.","body":"You are using the spring boot maven plugin from Spring Boot 3.0.2 where the rest is Spring BOot 2.3.3.. THe versions don&#39;t match. Ideally you should have a spring boot starter as parent and don&#39;t specify any further versions. You also marked tomcat as provided and thus no servlet container is going to be available. Finally you should use <code>Main.class</code> instead of <code>myController.class</code> in your main method to launch the app."}],"answers":[{"comments":[{"owner":{"account_id":27626862,"reputation":33,"user_id":21086690,"display_name":"user21086690"},"score":0,"creation_date":1674748022,"post_id":75247543,"comment_id":132783865,"body_markdown":"Thank you for answering. Sorry I didn&#39;t include the other classes.","body":"Thank you for answering. Sorry I didn&#39;t include the other classes."}],"tags":[],"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674744272,"creation_date":1674743637,"answer_id":75247543,"question_id":75246554,"body_markdown":"Change Main.java\r\n\r\nchange `SpringApplication.run(myController.class,args);`\r\n\r\nto\r\n   `SpringApplication.run(Main.class, args);`\r\n\r\n```\r\npublic static void main(String[] args)\r\n    {\r\n        //SpringApplication.run(myController.class,args);\r\n        SpringApplication.run(Main.class, args);\r\n    }\r\n```\r\n\r\n# pom.xml\r\n\r\nyou can remove `spring-boot-starter-tomcat`\r\n\r\n```\r\n&lt;project&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;com.example.myproject&lt;/groupId&gt;\r\n  &lt;artifactId&gt;Java_API&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n      &lt;!--\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    --&gt;\r\n  &lt;/dependencies&gt;\r\n  &lt;properties&gt;\r\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n         &lt;version&gt;3.0.2&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\npackage and run\r\n\r\n```\r\nmvn clean package spring-boot:run\r\n```\r\n\r\ntest\r\n\r\n```\r\ncurl http://localhost:8080/employee/22\r\n```\r\n\r\n# I can&#39;t get enough information from your question. I change my test code:\r\n\r\n## myController.java\r\n\r\n```\r\npackage com.example.myproject;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class myController {\r\n    //@Autowired\r\n    //private EmployeeService employeeService;\r\n\r\n    @GetMapping(&quot;/employee/{id}&quot;)\r\n    public Employee getEmployee(@PathVariable int id) {\r\n        Employee e1=new Employee();\r\n        e1.setId(id);\r\n        e1.setName(&quot;Hello World&quot;);\r\n        return e1;\r\n        //return employeeService.getEmployee(id);\r\n    }\r\n\r\n    @PostMapping(&quot;/employee&quot;)\r\n    public void createEmployee(@RequestBody Employee employee) {\r\n        System.out.println(&quot;DEBUG-&quot;+ employee.getId()+&quot;\\t&quot;+employee.getName());\r\n        //EmployeeService.createEmployee(employee);\r\n    }\r\n}\r\n```\r\n\r\n## Employee.java\r\n\r\n```\r\npackage com.example.myproject;\r\n\r\npublic class Employee {\r\n    private int id;\r\n    private String name;\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n}\r\n```\r\n\r\nI use the following code to test on my machine and it can be executed. At the same time, when you change `SpringApplication.run(Main.class, args);` back to `SpringApplication.run(myController.class, args) ;`, when executed it throws the same error message as in the question, `Unable to start web server; nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.`\r\n\r\n\r\nIf there are other error messages generated, it should be part of your `EmployeeService`. You did not provide enough information.\r\n","title":"Maven Spring Boot App Failing to Start from VS Code","body":"<p>Change Main.java</p>\n<p>change <code>SpringApplication.run(myController.class,args);</code></p>\n<p>to\n<code>SpringApplication.run(Main.class, args);</code></p>\n<pre><code>public static void main(String[] args)\n    {\n        //SpringApplication.run(myController.class,args);\n        SpringApplication.run(Main.class, args);\n    }\n</code></pre>\n<h1>pom.xml</h1>\n<p>you can remove <code>spring-boot-starter-tomcat</code></p>\n<pre><code>&lt;project&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.example.myproject&lt;/groupId&gt;\n  &lt;artifactId&gt;Java_API&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n      &lt;!--\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    --&gt;\n  &lt;/dependencies&gt;\n  &lt;properties&gt;\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n         &lt;version&gt;3.0.2&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>package and run</p>\n<pre><code>mvn clean package spring-boot:run\n</code></pre>\n<p>test</p>\n<pre><code>curl http://localhost:8080/employee/22\n</code></pre>\n<h1>I can't get enough information from your question. I change my test code:</h1>\n<h2>myController.java</h2>\n<pre><code>package com.example.myproject;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class myController {\n    //@Autowired\n    //private EmployeeService employeeService;\n\n    @GetMapping(&quot;/employee/{id}&quot;)\n    public Employee getEmployee(@PathVariable int id) {\n        Employee e1=new Employee();\n        e1.setId(id);\n        e1.setName(&quot;Hello World&quot;);\n        return e1;\n        //return employeeService.getEmployee(id);\n    }\n\n    @PostMapping(&quot;/employee&quot;)\n    public void createEmployee(@RequestBody Employee employee) {\n        System.out.println(&quot;DEBUG-&quot;+ employee.getId()+&quot;\\t&quot;+employee.getName());\n        //EmployeeService.createEmployee(employee);\n    }\n}\n</code></pre>\n<h2>Employee.java</h2>\n<pre><code>package com.example.myproject;\n\npublic class Employee {\n    private int id;\n    private String name;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n}\n</code></pre>\n<p>I use the following code to test on my machine and it can be executed. At the same time, when you change <code>SpringApplication.run(Main.class, args);</code> back to <code>SpringApplication.run(myController.class, args) ;</code>, when executed it throws the same error message as in the question, <code>Unable to start web server; nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.</code></p>\n<p>If there are other error messages generated, it should be part of your <code>EmployeeService</code>. You did not provide enough information.</p>\n"}],"owner":{"account_id":27626862,"reputation":33,"user_id":21086690,"display_name":"user21086690"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":513,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75247543,"answer_count":1,"score":1,"last_activity_date":1674744272,"creation_date":1674738509,"question_id":75246554,"body_markdown":"Attempting to write a Java RESTful API When I run `mvn clean install` I build no problem. When I run `mvn spring-boot run` I get the following runtime error. I have included the `pom.xml` and `classes` that I think are relevant. I also have a service layer and entity class not listed, though I don&#39;t think they are the issue. I can add if maybe someone would like to see them as well. Any help would be greatly appreciated.Thank you in advance.\r\n\r\n\r\n```\r\norg.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:161) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:545) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n```\r\n\r\n\r\nbelow is code that I think could potentially be causing the problem:\r\n\r\n`pom.xml` \r\n\r\n\r\n```\r\n&lt;project&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;com.example.myproject&lt;/groupId&gt;\r\n  &lt;artifactId&gt;Java_API&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n  &lt;properties&gt;\r\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n         &lt;version&gt;3.0.2&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\n`Main.java`\r\n```\r\npackage com.example.myproject;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class Main {\r\n    \r\n    public static void main(String[] args)\r\n    {\r\n        SpringApplication.run(myController.class,args);\r\n    }\r\n}\r\n```\r\n`myController.java`\r\n\r\n\r\n```\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class myController {\r\n\r\n\r\n    @Autowired\r\n    private EmployeeService employeeService;\r\n\r\n    @GetMapping(&quot;/employee/{id}&quot;)\r\n    public Employee getEmployee(@PathVariable int id) {\r\n        return employeeService.getEmployee(id);\r\n    }\r\n\r\n    @PostMapping(&quot;/employee&quot;)\r\n    public void createEmployee(@RequestBody Employee employee) {\r\n        EmployeeService.createEmployee(employee);\r\n    }\r\n}\r\n```\r\n\r\n\r\n- I have tried only having `starter-web` instead of both `starter-web` and `starter-tomcat`, but it yields the same result. The versioning seems right.\r\n- tried adding `&lt;scope&gt;provided&lt;/scope&gt;`, granted I&#39;m not entirely sure what it does. \r\n- A number of other things that may come to me, blanking on everything I have tried. Really stumped on what it does not like.","title":"Maven Spring Boot App Failing to Start from VS Code","body":"<p>Attempting to write a Java RESTful API When I run <code>mvn clean install</code> I build no problem. When I run <code>mvn spring-boot run</code> I get the following runtime error. I have included the <code>pom.xml</code> and <code>classes</code> that I think are relevant. I also have a service layer and entity class not listed, though I don't think they are the issue. I can add if maybe someone would like to see them as well. Any help would be greatly appreciated.Thank you in advance.</p>\n<pre><code>org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:161) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:545) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n</code></pre>\n<p>below is code that I think could potentially be causing the problem:</p>\n<p><code>pom.xml</code></p>\n<pre><code>&lt;project&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.example.myproject&lt;/groupId&gt;\n  &lt;artifactId&gt;Java_API&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;properties&gt;\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n         &lt;version&gt;3.0.2&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><code>Main.java</code></p>\n<pre><code>package com.example.myproject;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Main {\n    \n    public static void main(String[] args)\n    {\n        SpringApplication.run(myController.class,args);\n    }\n}\n</code></pre>\n<p><code>myController.java</code></p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class myController {\n\n\n    @Autowired\n    private EmployeeService employeeService;\n\n    @GetMapping(&quot;/employee/{id}&quot;)\n    public Employee getEmployee(@PathVariable int id) {\n        return employeeService.getEmployee(id);\n    }\n\n    @PostMapping(&quot;/employee&quot;)\n    public void createEmployee(@RequestBody Employee employee) {\n        EmployeeService.createEmployee(employee);\n    }\n}\n</code></pre>\n<ul>\n<li>I have tried only having <code>starter-web</code> instead of both <code>starter-web</code> and <code>starter-tomcat</code>, but it yields the same result. The versioning seems right.</li>\n<li>tried adding <code>&lt;scope&gt;provided&lt;/scope&gt;</code>, granted I'm not entirely sure what it does.</li>\n<li>A number of other things that may come to me, blanking on everything I have tried. Really stumped on what it does not like.</li>\n</ul>\n"},{"tags":["java","spring","exception","named-query"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1674743501,"post_id":75247501,"comment_id":132782148,"body_markdown":"It looks like your `employee_id` is an integer value - what are you hoping that a `LIKE` filter will achieve?","body":"It looks like your <code>employee_id</code> is an integer value - what are you hoping that a <code>LIKE</code> filter will achieve?"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1674743618,"post_id":75247501,"comment_id":132782194,"body_markdown":"Where are you calling `searchDaysForMonth`? You are not showing the call of that method. Or is the exception already thrown in/before the controller method?","body":"Where are you calling <code>searchDaysForMonth</code>? You are not showing the call of that method. Or is the exception already thrown in/before the controller method?"},{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1674743967,"post_id":75247501,"comment_id":132782334,"body_markdown":"Just use `AND e.employee_id = :employee_id`","body":"Just use <code>AND e.employee_id = :employee_id</code>"},{"owner":{"account_id":25979860,"reputation":9,"user_id":19712163,"display_name":"SealAnia"},"score":0,"creation_date":1674744474,"post_id":75247501,"comment_id":132782544,"body_markdown":"After I corrected my query it still doesn&#39;t work.  @Query(value = &quot;SELECT * FROM working_day w INNER JOIN \\r\\n&quot;\n\t\t\t+ &quot;employees_days e ON \\r\\n&quot;\n\t\t\t+ &quot;w.day_id = e.day_id\\r\\n&quot;\n\t\t\t+ &quot;WHERE w.date LIKE %:date% AND e.employee_id = %:employee_id%&quot;, nativeQuery = true)","body":"After I corrected my query it still doesn&#39;t work.  @Query(value = &quot;SELECT * FROM working_day w INNER JOIN \\r\\n&quot; \t\t\t+ &quot;employees_days e ON \\r\\n&quot; \t\t\t+ &quot;w.day_id = e.day_id\\r\\n&quot; \t\t\t+ &quot;WHERE w.date LIKE %:date% AND e.employee_id = %:employee_id%&quot;, nativeQuery = true)"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1674744787,"post_id":75247501,"comment_id":132782678,"body_markdown":"`&quot;...e.employee_id = %:employee_id%&quot;` doesn&#39;t seem corrected. Do you realize that the `%...%` syntax is for the `like` operator? Why don&#39;t you use what Tim suggested: `&quot; ... e.employee_id = :employee_id&quot;`?","body":"<code>&quot;...e.employee_id = %:employee_id%&quot;</code> doesn&#39;t seem corrected. Do you realize that the <code>%...%</code> syntax is for the <code>like</code> operator? Why don&#39;t you use what Tim suggested: <code>&quot; ... e.employee_id = :employee_id&quot;</code>?"},{"owner":{"account_id":25979860,"reputation":9,"user_id":19712163,"display_name":"SealAnia"},"score":0,"creation_date":1674744949,"post_id":75247501,"comment_id":132782706,"body_markdown":"e.employee_id = :employee_id doesn&#39;t work too","body":"e.employee_id = :employee_id doesn&#39;t work too"}],"owner":{"account_id":25979860,"reputation":9,"user_id":19712163,"display_name":"SealAnia"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674743920,"creation_date":1674743395,"question_id":75247501,"body_markdown":"I make a method of search using named query\r\n\r\n```\r\n@Query(value = &quot;SELECT * FROM working_day w INNER JOIN \\r\\n&quot;\r\n\t\t\t+ &quot;employees_days e ON \\r\\n&quot;\r\n\t\t\t+ &quot;w.day_id = e.day_id\\r\\n&quot;\r\n\t\t\t+ &quot;WHERE w.date LIKE %:date% AND e.employee_id LIKE %:employee_id%&quot;, nativeQuery = true)\r\n\tList&lt;WorkingDay&gt; searchDaysForMonth(@Param(&quot;date&quot;) String date, @Param(&quot;employee_id&quot;) Long employeeId);\r\n```\r\n\r\nService: \r\n\r\n    public List&lt;WorkingDay&gt; countDays(String date, Long employeeId) {\r\n\t\treturn workingDayRepository.searchDaysForMonth(date, employeeId);\r\n\t}\r\n\r\nController method: \r\n\r\n```\r\n@RequestMapping(value = &quot;/employees&quot;)\r\n\r\n@GetMapping(value = &quot;/employees/days_in_month&quot;)\r\n    public ModelAndView getDaysForEmployee(@RequestParam(value = &quot;date&quot;, required = false) String date,\r\n                                           @RequestParam(value = &quot;employee_id&quot;) Long employeeId) {\r\n\r\n        ModelAndView modelAndView = new ModelAndView();\r\n        modelAndView.setViewName(&quot;days_employees&quot;);\r\n\r\n        var daysForEmployee = employeeService.countDays(date, employeeId);\r\n        modelAndView.addObject(&quot;days_employees&quot;, daysForEmployee);\r\n\r\n        Employee employee = employeeService.getById(employeeId);\r\n        modelAndView.addObject(&quot;employee&quot;, employee);\r\n\r\n        var totalDays = daysForEmployee.size();\r\n        modelAndView.addObject(&quot;totalDays&quot;, totalDays);\r\n\r\n        return modelAndView;\r\n    }\r\n```\r\n\r\n\r\nWhen I enter the following mapping value \r\n\r\n`http://localhost:8080/employees/days_in_month?date=2023-01&amp;employee_id=2`\r\n\r\nI get `MethodArgumentTypeMismatchException. Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Long&#39;;`\r\n\r\nHow to solve this? ","title":"Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Long&#39;;","body":"<p>I make a method of search using named query</p>\n<pre><code>@Query(value = &quot;SELECT * FROM working_day w INNER JOIN \\r\\n&quot;\n            + &quot;employees_days e ON \\r\\n&quot;\n            + &quot;w.day_id = e.day_id\\r\\n&quot;\n            + &quot;WHERE w.date LIKE %:date% AND e.employee_id LIKE %:employee_id%&quot;, nativeQuery = true)\n    List&lt;WorkingDay&gt; searchDaysForMonth(@Param(&quot;date&quot;) String date, @Param(&quot;employee_id&quot;) Long employeeId);\n</code></pre>\n<p>Service:</p>\n<pre><code>public List&lt;WorkingDay&gt; countDays(String date, Long employeeId) {\n    return workingDayRepository.searchDaysForMonth(date, employeeId);\n}\n</code></pre>\n<p>Controller method:</p>\n<pre><code>@RequestMapping(value = &quot;/employees&quot;)\n\n@GetMapping(value = &quot;/employees/days_in_month&quot;)\n    public ModelAndView getDaysForEmployee(@RequestParam(value = &quot;date&quot;, required = false) String date,\n                                           @RequestParam(value = &quot;employee_id&quot;) Long employeeId) {\n\n        ModelAndView modelAndView = new ModelAndView();\n        modelAndView.setViewName(&quot;days_employees&quot;);\n\n        var daysForEmployee = employeeService.countDays(date, employeeId);\n        modelAndView.addObject(&quot;days_employees&quot;, daysForEmployee);\n\n        Employee employee = employeeService.getById(employeeId);\n        modelAndView.addObject(&quot;employee&quot;, employee);\n\n        var totalDays = daysForEmployee.size();\n        modelAndView.addObject(&quot;totalDays&quot;, totalDays);\n\n        return modelAndView;\n    }\n</code></pre>\n<p>When I enter the following mapping value</p>\n<p><code>http://localhost:8080/employees/days_in_month?date=2023-01&amp;employee_id=2</code></p>\n<p>I get <code>MethodArgumentTypeMismatchException. Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long';</code></p>\n<p>How to solve this?</p>\n"},{"tags":["java","android","android-studio","react-native"],"comments":[{"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"score":0,"creation_date":1614431920,"post_id":66399125,"comment_id":117386567,"body_markdown":"_&quot;If the jdk path is invalid then why it is running in android studio?&quot;_ My first guess would be that Android Studio is using its own bundled JDK.","body":"<i>&quot;If the jdk path is invalid then why it is running in android studio?&quot;</i> My first guess would be that Android Studio is using its own bundled JDK."},{"owner":{"account_id":14088702,"reputation":65,"user_id":10177756,"display_name":"Muhammad Shah Sawar"},"score":0,"creation_date":1614432325,"post_id":66399125,"comment_id":117386674,"body_markdown":"hi Michael! can you please guide me on how I check and if it is using its own bundle how could I set my own to either as code or both, as for environment variables I set JAVA_HOME already as mentioned above,","body":"hi Michael! can you please guide me on how I check and if it is using its own bundle how could I set my own to either as code or both, as for environment variables I set JAVA_HOME already as mentioned above,"},{"owner":{"account_id":13445819,"reputation":1965,"user_id":9701793,"display_name":"rahat"},"score":0,"creation_date":1614434265,"post_id":66399125,"comment_id":117387147,"body_markdown":"I had the same issue while setting up for react native, set up java home to the proper directory, and then check in the terminal if `java` command and `javac` command works. If both works then shutdown the system after closing all programs and then start it over.","body":"I had the same issue while setting up for react native, set up java home to the proper directory, and then check in the terminal if <code>java</code> command and <code>javac</code> command works. If both works then shutdown the system after closing all programs and then start it over."},{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1614437045,"post_id":66399125,"comment_id":117387830,"body_markdown":"JAVA_HOME should be a single directory. In your case, it should be C:\\Program Files\\Java\\jdk-15.0.1","body":"JAVA_HOME should be a single directory. In your case, it should be C:\\Program Files\\Java\\jdk-15.0.1"},{"owner":{"account_id":7121054,"reputation":5814,"user_id":5445670,"display_name":"Solomon Ucko"},"score":0,"creation_date":1674742454,"post_id":66399125,"comment_id":132781727,"body_markdown":"Are you using Android Studio or VS Code??","body":"Are you using Android Studio or VS Code??"}],"answers":[{"tags":[],"owner":{"account_id":19353288,"reputation":69,"user_id":14150158,"display_name":"Rojhat"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1614435559,"creation_date":1614435559,"answer_id":66399706,"question_id":66399125,"body_markdown":"You should edit your path as &quot;C:\\Program Files\\Java\\jdk-15.0.1&quot; bin is not required.\r\n\r\nTo set JAVA_HOME&lt;br&gt;\r\n1-Search for Environment Variables &lt;br&gt;\r\n2-Under system variables click new &lt;br&gt;\r\n3-In the variable name enter JAVA_HOME, in the variable value enter the JDK path  &lt;br&gt;which is &quot;C:\\Program Files\\Java\\jdk-15.0.1&quot;","title":"JAVA_HOME is set to an invalid directory- vs code","body":"<p>You should edit your path as &quot;C:\\Program Files\\Java\\jdk-15.0.1&quot; bin is not required.</p>\n<p>To set JAVA_HOME<br>\n1-Search for Environment Variables <br>\n2-Under system variables click new <br>\n3-In the variable name enter JAVA_HOME, in the variable value enter the JDK path  <br>which is &quot;C:\\Program Files\\Java\\jdk-15.0.1&quot;</p>\n"},{"comments":[{"owner":{"account_id":369303,"reputation":379,"user_id":716602,"display_name":"sanme98"},"score":1,"creation_date":1642137489,"post_id":70087116,"comment_id":124996571,"body_markdown":"Thanks. Just some additional info, it needs close the terminal using the Kill Terminal (Bin icon) and then restart VS Code.","body":"Thanks. Just some additional info, it needs close the terminal using the Kill Terminal (Bin icon) and then restart VS Code."},{"owner":{"account_id":12690043,"reputation":489,"user_id":9220478,"display_name":"Sudarshan Gaikwad"},"score":0,"creation_date":1693480734,"post_id":70087116,"comment_id":135768241,"body_markdown":"yes ! you are right.","body":"yes ! you are right."}],"tags":[],"owner":{"account_id":12690043,"reputation":489,"user_id":9220478,"display_name":"Sudarshan Gaikwad"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637697605,"creation_date":1637697605,"answer_id":70087116,"question_id":66399125,"body_markdown":"It seems the terminal caches the earlier environment variables.\r\nBefore moving ahead make sure you have already changed the correct path for JAVA_HOME.\r\n\r\nNow, Open Visual code and close the terminal, and reopen it (ctrl + ~) \r\nerror should be gone","title":"JAVA_HOME is set to an invalid directory- vs code","body":"<p>It seems the terminal caches the earlier environment variables.\nBefore moving ahead make sure you have already changed the correct path for JAVA_HOME.</p>\n<p>Now, Open Visual code and close the terminal, and reopen it (ctrl + ~)\nerror should be gone</p>\n"},{"tags":[],"owner":{"account_id":23101759,"reputation":81,"user_id":17211088,"display_name":"BurhanY"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674743258,"creation_date":1674741746,"answer_id":75247175,"question_id":66399125,"body_markdown":"I was getting this error in flutter. I deleted the &quot;JAVA_HOME&quot; &quot;C:\\Program Files\\Java\\jre7&quot; value that I wrote earlier in the system variables section under the environment variables menu. I ran the terminal again and ran &quot;flutter doctor --android-licenses&quot; in the terminal. Problem solved.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CpjPf.png","title":"JAVA_HOME is set to an invalid directory- vs code","body":"<p>I was getting this error in flutter. I deleted the &quot;JAVA_HOME&quot; &quot;C:\\Program Files\\Java\\jre7&quot; value that I wrote earlier in the system variables section under the environment variables menu. I ran the terminal again and ran &quot;flutter doctor --android-licenses&quot; in the terminal. Problem solved.\n<a href=\"https://i.stack.imgur.com/CpjPf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CpjPf.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":14088702,"reputation":65,"user_id":10177756,"display_name":"Muhammad Shah Sawar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10888,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1674743258,"creation_date":1614431267,"question_id":66399125,"body_markdown":"I have completely followed [Setting up the development environment][1] for the **react-native project**, now when I am running the first app from Andriod studio **run BUTTON** it installs and runs perfectly. The problem comes when I run the command ` yarn react-native run-android` it throws the following error:\r\n\r\n\r\n----------\r\n\r\ninfo JS server already running\r\n\r\ninfo Installing the app...\r\n\r\n    ERROR: JAVA_HOME is set to an invalid directory: C:\\Program Files\\Java\\jdk-15.0.1;C:\\Program Files\\Java\\jdk-15.0.1\\bin;\r\n\r\nPlease set the `JAVA_HOME` variable in your environment to match the\r\nlocation of your Java installation.\r\n\r\nerror Failed to install the app. Make sure you have the Android development environment set up:\r\n\r\n https://reactnative.dev/docs/environment-setup. Run CLI with --verbose flag for more details.\r\n\r\n        Error: Command failed: gradlew.bat app:installDebug -PreactNativeDevServerPort=8081\r\n    \r\n    error Command failed with exit code 1.\r\n    info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this co\r\n\r\n----------\r\n[snapshot is here][2]\r\n\r\n**My jdk path:**\r\nC:\\Program Files\\Java\\jdk-15.0.1;\r\nC:\\Program Files\\Java\\jdk-15.0.1\\bin;\r\n\r\nMy question is:\r\n=======\r\n\r\nIf the jdk path is invalid then why it is running in android studio? \r\n\r\n  [1]: https://reactnative.dev/docs/environment-setup\r\n  [2]: https://i.stack.imgur.com/dydbG.png\r\n\r\n","title":"JAVA_HOME is set to an invalid directory- vs code","body":"<p>I have completely followed <a href=\"https://reactnative.dev/docs/environment-setup\" rel=\"nofollow noreferrer\">Setting up the development environment</a> for the <strong>react-native project</strong>, now when I am running the first app from Andriod studio <strong>run BUTTON</strong> it installs and runs perfectly. The problem comes when I run the command <code> yarn react-native run-android</code> it throws the following error:</p>\n<hr />\n<p>info JS server already running</p>\n<p>info Installing the app...</p>\n<pre><code>ERROR: JAVA_HOME is set to an invalid directory: C:\\Program Files\\Java\\jdk-15.0.1;C:\\Program Files\\Java\\jdk-15.0.1\\bin;\n</code></pre>\n<p>Please set the <code>JAVA_HOME</code> variable in your environment to match the\nlocation of your Java installation.</p>\n<p>error Failed to install the app. Make sure you have the Android development environment set up:</p>\n<p><a href=\"https://reactnative.dev/docs/environment-setup\" rel=\"nofollow noreferrer\">https://reactnative.dev/docs/environment-setup</a>. Run CLI with --verbose flag for more details.</p>\n<pre><code>    Error: Command failed: gradlew.bat app:installDebug -PreactNativeDevServerPort=8081\n\nerror Command failed with exit code 1.\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this co\n</code></pre>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/dydbG.png\" rel=\"nofollow noreferrer\">snapshot is here</a></p>\n<p><strong>My jdk path:</strong>\nC:\\Program Files\\Java\\jdk-15.0.1;\nC:\\Program Files\\Java\\jdk-15.0.1\\bin;</p>\n<h1>My question is:</h1>\n<p>If the jdk path is invalid then why it is running in android studio?</p>\n"},{"tags":["java","spring-boot","keycloak"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1598204687,"post_id":62199105,"comment_id":112375089,"body_markdown":"Do not esitate to comment why my answer doesn&#39;t solve your problem (or accept it...)","body":"Do not esitate to comment why my answer doesn&#39;t solve your problem (or accept it...)"}],"answers":[{"comments":[{"owner":{"account_id":3242884,"reputation":347,"user_id":2735423,"display_name":"Chris K"},"score":0,"creation_date":1653386498,"post_id":63405348,"comment_id":127834146,"body_markdown":"The links to GitHub repo are not valid. Can you please update them?","body":"The links to GitHub repo are not valid. Can you please update them?"}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1674742737,"creation_date":1597369249,"answer_id":63405348,"question_id":62199105,"body_markdown":"# 2023 update\r\nThe [deprecated Keycloak adapters for Spring](https://github.com/keycloak/keycloak/discussions/10187) (where `KeycloakAuthenticationToken` is defined) are not compatible with spring-boot 3. Alternatives in the accepted answer to [&quot;Use Keycloak Spring Adapter with Spring Boot 3&quot;](https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732) \r\n\r\n# Original answer\r\n\r\nAs I already wrote in my answer to the first question you linked, `@WithMockUser` populates the security context with a `UsernamePaswordAuthenticationToken` when your code / conf probably expect a `KeycloakAuthenticationToken`.\r\n\r\nIf you read carefully the same answer, you&#39;ll find an alternative to using my lib to do this: manually populate the security-context with a  `KeycloakAuthenticationToken` instance or mock in each test.\r\n\r\n**Minimal** sample with Mockito I [added to my repo][1]:\r\n``` java\r\n    @Test\r\n    public void test() {\r\n\t\tfinal var principal = mock(Principal.class);\r\n\t\twhen(principal.getName()).thenReturn(&quot;user&quot;);\r\n\r\n\t\tfinal var account = mock(OidcKeycloakAccount.class);\r\n\t\twhen(account.getRoles()).thenReturn(Set.of(&quot;offline_access&quot;, &quot;uma_authorization&quot;));\r\n\t\twhen(account.getPrincipal()).thenReturn(principal);\r\n\r\n\t\tfinal var authentication = mock(KeycloakAuthenticationToken.class);\r\n\t\twhen(authentication.getAccount()).thenReturn(account);\r\n\r\n        // post(...).with(authentication(authentication))\r\n        // limits to testing secured @Controller with MockMvc\r\n        // I prefer to set security context directly instead:\r\n\t\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n\r\n        //TODO: invoque mockmvc to test @Controller or test any other type of @Component as usual\r\n    }\r\n```\r\n\r\nMaybe, after you mesure how much this clutters your tests (there are very few claims set here) you&#39;ll reconsider using my lib (or copying from it as it&#39;s opensource).\r\n\r\nWith my annotation, above sample becomes:\r\n``` java\r\n\t@Test\r\n\t@WithMockKeycloakAuth\r\n\tpublic void test() throws Exception {\r\n        //TODO: invoque mockmvc to test @Controller or test any other type of @Component as usual\r\n\t}\r\n```\r\n\r\nRegarding spring test config with Keycloak involved, you could dig a bit into the tests of `spring-addons-keycloak` module. You&#39;d find a [complete app using `KeycloakAuthenticationToken`][2] with unit tests (and working test conf).\r\n\r\nLast (and maybe off-topic) you could read the [repo main README][3] and consider using a more generic OIDC implementation than Keycloak&#39;s one. I provide one, along with test annotation, and wrote tutorials on how to extend it to your app specific needs.\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/blob/84fa11c483555c636e09363d7d50c19d0e901714/spring-addons-keycloak/src/test/java/com/c4_soft/springaddons/samples/webmvc/keycloak/web/GreetingControllerMockitoTest.java#L61\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/84fa11c483555c636e09363d7d50c19d0e901714/spring-addons-keycloak/src/test/java/com/c4_soft/springaddons/samples/webmvc/keycloak\r\n  [3]: https://github.com/ch4mpy/spring-addons","title":"How to unit test a SpringBoot controller secured by keycloak?","body":"<h1>2023 update</h1>\n<p>The <a href=\"https://github.com/keycloak/keycloak/discussions/10187\" rel=\"nofollow noreferrer\">deprecated Keycloak adapters for Spring</a> (where <code>KeycloakAuthenticationToken</code> is defined) are not compatible with spring-boot 3. Alternatives in the accepted answer to <a href=\"https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732\">&quot;Use Keycloak Spring Adapter with Spring Boot 3&quot;</a></p>\n<h1>Original answer</h1>\n<p>As I already wrote in my answer to the first question you linked, <code>@WithMockUser</code> populates the security context with a <code>UsernamePaswordAuthenticationToken</code> when your code / conf probably expect a <code>KeycloakAuthenticationToken</code>.</p>\n<p>If you read carefully the same answer, you'll find an alternative to using my lib to do this: manually populate the security-context with a  <code>KeycloakAuthenticationToken</code> instance or mock in each test.</p>\n<p><strong>Minimal</strong> sample with Mockito I <a href=\"https://github.com/ch4mpy/spring-addons/blob/84fa11c483555c636e09363d7d50c19d0e901714/spring-addons-keycloak/src/test/java/com/c4_soft/springaddons/samples/webmvc/keycloak/web/GreetingControllerMockitoTest.java#L61\" rel=\"nofollow noreferrer\">added to my repo</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    public void test() {\n        final var principal = mock(Principal.class);\n        when(principal.getName()).thenReturn(&quot;user&quot;);\n\n        final var account = mock(OidcKeycloakAccount.class);\n        when(account.getRoles()).thenReturn(Set.of(&quot;offline_access&quot;, &quot;uma_authorization&quot;));\n        when(account.getPrincipal()).thenReturn(principal);\n\n        final var authentication = mock(KeycloakAuthenticationToken.class);\n        when(authentication.getAccount()).thenReturn(account);\n\n        // post(...).with(authentication(authentication))\n        // limits to testing secured @Controller with MockMvc\n        // I prefer to set security context directly instead:\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n\n        //TODO: invoque mockmvc to test @Controller or test any other type of @Component as usual\n    }\n</code></pre>\n<p>Maybe, after you mesure how much this clutters your tests (there are very few claims set here) you'll reconsider using my lib (or copying from it as it's opensource).</p>\n<p>With my annotation, above sample becomes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    @WithMockKeycloakAuth\n    public void test() throws Exception {\n        //TODO: invoque mockmvc to test @Controller or test any other type of @Component as usual\n    }\n</code></pre>\n<p>Regarding spring test config with Keycloak involved, you could dig a bit into the tests of <code>spring-addons-keycloak</code> module. You'd find a <a href=\"https://github.com/ch4mpy/spring-addons/tree/84fa11c483555c636e09363d7d50c19d0e901714/spring-addons-keycloak/src/test/java/com/c4_soft/springaddons/samples/webmvc/keycloak\" rel=\"nofollow noreferrer\">complete app using <code>KeycloakAuthenticationToken</code></a> with unit tests (and working test conf).</p>\n<p>Last (and maybe off-topic) you could read the <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">repo main README</a> and consider using a more generic OIDC implementation than Keycloak's one. I provide one, along with test annotation, and wrote tutorials on how to extend it to your app specific needs.</p>\n"}],"owner":{"account_id":6085757,"reputation":1307,"user_id":4749871,"accept_rate":80,"display_name":"Ant&#243;nio Quadrado"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5005,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":1,"score":6,"last_activity_date":1674742737,"creation_date":1591286495,"question_id":62199105,"body_markdown":"I know that there are already similar questions, [here][1] and [here][2], regarding this problem but every solution proposed failed to help me. There is also mention to [this][3] library in most of those answers but (with all due respect) I would like to avoid depending on an external library just to be able to test a simple controller. \r\n\r\nSo, I have a very simple api that is accessed using a bearer token generated by keycloak and I would like to test the controller. Something along these lines:\r\n\r\n    @Test\r\n    @DisplayName(&quot;Should be ok&quot;)\r\n    @WithMockUser\r\n    void whenCalled_shouldBeOk() throws Exception {\r\n        SecurityContext context = SecurityContextHolder.getContext();\r\n        Authentication authentication = context.getAuthentication();\r\n        mockMvc.perform(\r\n            post(&quot;/api/url/something&quot;)\r\n                .content(&quot;{}&quot;)\r\n                .contentType(APPLICATION_JSON)\r\n                .with(authentication(authentication))\r\n        ).andExpect(status().isOk());\r\n    }\r\n\r\n\r\nThe problem is that I will always get a null pointer exception thrown by the `KeycloakDeploymentBuilder` for it&#39;s missing the adapter config. In our SecurityConfig we extend the `KeycloakWebSecurityConfigurerAdapter` and do all the required configurations for the app to work but I am failing to mock/by-pass this process in the test. Normally I find my way around this authentication problems in the tests (when keycloak isn&#39;t used) with @WithMockUser annotation but not this time.\r\n\r\nIsn&#39;t there way to mock the adapter or the filter process in order to by-pass this issue?\r\n\r\nI have tried everything that was answered in the other questions (except the library) with no luck. If you have any clue that could be of help or at least point me in the correct direction (since this can be due to a lack of knowledge on spring security from my part) that would very much appreciated.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/49144953/mocking-a-keycloak-token-for-testing-a-spring-controller\r\n  [2]: https://stackoverflow.com/questions/51711268/how-to-test-keycloak-authentication-in-spring-boot-application\r\n  [3]: https://github.com/ch4mpy/spring-addons","title":"How to unit test a SpringBoot controller secured by keycloak?","body":"<p>I know that there are already similar questions, <a href=\"https://stackoverflow.com/questions/49144953/mocking-a-keycloak-token-for-testing-a-spring-controller\">here</a> and <a href=\"https://stackoverflow.com/questions/51711268/how-to-test-keycloak-authentication-in-spring-boot-application\">here</a>, regarding this problem but every solution proposed failed to help me. There is also mention to <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"noreferrer\">this</a> library in most of those answers but (with all due respect) I would like to avoid depending on an external library just to be able to test a simple controller. </p>\n\n<p>So, I have a very simple api that is accessed using a bearer token generated by keycloak and I would like to test the controller. Something along these lines:</p>\n\n<pre><code>@Test\n@DisplayName(\"Should be ok\")\n@WithMockUser\nvoid whenCalled_shouldBeOk() throws Exception {\n    SecurityContext context = SecurityContextHolder.getContext();\n    Authentication authentication = context.getAuthentication();\n    mockMvc.perform(\n        post(\"/api/url/something\")\n            .content(\"{}\")\n            .contentType(APPLICATION_JSON)\n            .with(authentication(authentication))\n    ).andExpect(status().isOk());\n}\n</code></pre>\n\n<p>The problem is that I will always get a null pointer exception thrown by the <code>KeycloakDeploymentBuilder</code> for it's missing the adapter config. In our SecurityConfig we extend the <code>KeycloakWebSecurityConfigurerAdapter</code> and do all the required configurations for the app to work but I am failing to mock/by-pass this process in the test. Normally I find my way around this authentication problems in the tests (when keycloak isn't used) with @WithMockUser annotation but not this time.</p>\n\n<p>Isn't there way to mock the adapter or the filter process in order to by-pass this issue?</p>\n\n<p>I have tried everything that was answered in the other questions (except the library) with no luck. If you have any clue that could be of help or at least point me in the correct direction (since this can be due to a lack of knowledge on spring security from my part) that would very much appreciated.</p>\n"},{"tags":["java","liferay","liferay-7"],"answers":[{"tags":[],"owner":{"account_id":1693594,"reputation":482,"user_id":1555487,"display_name":"Byob "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674742598,"creation_date":1674742598,"answer_id":75247345,"question_id":75159617,"body_markdown":"I had similar permissions issues during the execution of custom code that updated ExpandoBridge attributes.  Try the following update:\r\n\r\n```\r\nboolean isSecure = false; // Forces the use of ExpandoBridgeLocalService w/o permissions checking\r\n// I first update a custom field showing if the site is active or not\r\ngroup.getExpandoBridge().setAttribute(&quot;Status&quot;, &quot;Actief&quot;, isSecure);\r\n\r\nLayoutSetLocalServiceUtil.updateLayoutSetPrototypeLinkEnabled(groupId, true, true, privateTemp);\r\n```\r\n\r\nReference:\r\nhttps://docs.liferay.com/dxp/portal/7.4-latest/javadocs/portal-kernel/com/liferay/expando/kernel/model/ExpandoBridge.html#setAttribute-java.lang.String-java.io.Serializable-boolean-","title":"I keep getting a permission error when trying to update a site&#39;s template in liferay 7.3","body":"<p>I had similar permissions issues during the execution of custom code that updated ExpandoBridge attributes.  Try the following update:</p>\n<pre><code>boolean isSecure = false; // Forces the use of ExpandoBridgeLocalService w/o permissions checking\n// I first update a custom field showing if the site is active or not\ngroup.getExpandoBridge().setAttribute(&quot;Status&quot;, &quot;Actief&quot;, isSecure);\n\nLayoutSetLocalServiceUtil.updateLayoutSetPrototypeLinkEnabled(groupId, true, true, privateTemp);\n</code></pre>\n<p>Reference:\n<a href=\"https://docs.liferay.com/dxp/portal/7.4-latest/javadocs/portal-kernel/com/liferay/expando/kernel/model/ExpandoBridge.html#setAttribute-java.lang.String-java.io.Serializable-boolean-\" rel=\"nofollow noreferrer\">https://docs.liferay.com/dxp/portal/7.4-latest/javadocs/portal-kernel/com/liferay/expando/kernel/model/ExpandoBridge.html#setAttribute-java.lang.String-java.io.Serializable-boolean-</a></p>\n"}],"owner":{"account_id":20696487,"reputation":57,"user_id":15196570,"display_name":"Lincolnmyth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674742598,"creation_date":1674046776,"question_id":75159617,"body_markdown":"I&#39;ve encountered an issue when trying to update a site&#39;s(group) template. The template is assigned and works correctly but a couple errors are thrown when doing so. They all read the same thing:\r\n\r\n\r\n```\r\n2023-01-18 10:42:24.934 ERROR [http-nio-8080-exec-48][FragmentRendererControllerImpl:120] Unable to render content of fragment entry 0:com.liferay.fragment.exception.FragmentEntryContentException: com.liferay.portal.kernel.portlet.PortletContainerException: java.lang.IllegalArgumentException: Someone may be trying to circumvent the permission checker: {company&gt;\r\n2023-01-18 10:42:24.936 ERROR [http-nio-8080-exec-48][FragmentRendererControllerImpl:120] Unable to render content of fragment entry 0:com.liferay.fragment.exception.FragmentEntryContentException: java.lang.NullPointerException\r\n\r\n```\r\n\r\nthis is not an error i understand. As i&#39;m not checking for permission, someone without permission simply wouldn&#39;t see the button and couldn&#39;t press it. I have code for that in my view.jsp, but even when i remove it the error still persist.\r\n\r\nThis is the code i have for updating a group:\r\n\r\n```\r\n// I first update a custom field showing if the site is active or not\r\ngroup.getExpandoBridge().setAttribute(&quot;Status&quot;, &quot;Actief&quot; );\r\n\r\nLayoutSetLocalServiceUtil.updateLayoutSetPrototypeLinkEnabled(groupId, true, true, privateTemp);\r\n```\r\n\r\n\r\nLike I said I tried removing any permission checking code but this had no effect. The method i&#39;m using is from the LayoutSetLocalServiceUtil class. Given that it&#39;s a local this method shouldn&#39;t check for permission either. I&#39;m also logged in as admin when I try to run my code so I should have the permission to do this anyway.\r\n\r\nI also tried to hide the error using:\r\n\r\n\r\n```\r\nSessionMessages.add(portletRequest, PortalUtil.getPortletId(portletRequest) + SessionMessages.KEY_SUFFIX_HIDE_DEFAULT_ERROR_MESSAGE);\r\n```\r\nBut this didn&#39;t actually hide it for some reason and it doesn&#39;t solve the issue either. Did anyone encounter this before? And why do i keep getting a permission error without checking any permission?","title":"I keep getting a permission error when trying to update a site&#39;s template in liferay 7.3","body":"<p>I've encountered an issue when trying to update a site's(group) template. The template is assigned and works correctly but a couple errors are thrown when doing so. They all read the same thing:</p>\n<pre><code>2023-01-18 10:42:24.934 ERROR [http-nio-8080-exec-48][FragmentRendererControllerImpl:120] Unable to render content of fragment entry 0:com.liferay.fragment.exception.FragmentEntryContentException: com.liferay.portal.kernel.portlet.PortletContainerException: java.lang.IllegalArgumentException: Someone may be trying to circumvent the permission checker: {company&gt;\n2023-01-18 10:42:24.936 ERROR [http-nio-8080-exec-48][FragmentRendererControllerImpl:120] Unable to render content of fragment entry 0:com.liferay.fragment.exception.FragmentEntryContentException: java.lang.NullPointerException\n\n</code></pre>\n<p>this is not an error i understand. As i'm not checking for permission, someone without permission simply wouldn't see the button and couldn't press it. I have code for that in my view.jsp, but even when i remove it the error still persist.</p>\n<p>This is the code i have for updating a group:</p>\n<pre><code>// I first update a custom field showing if the site is active or not\ngroup.getExpandoBridge().setAttribute(&quot;Status&quot;, &quot;Actief&quot; );\n\nLayoutSetLocalServiceUtil.updateLayoutSetPrototypeLinkEnabled(groupId, true, true, privateTemp);\n</code></pre>\n<p>Like I said I tried removing any permission checking code but this had no effect. The method i'm using is from the LayoutSetLocalServiceUtil class. Given that it's a local this method shouldn't check for permission either. I'm also logged in as admin when I try to run my code so I should have the permission to do this anyway.</p>\n<p>I also tried to hide the error using:</p>\n<pre><code>SessionMessages.add(portletRequest, PortalUtil.getPortletId(portletRequest) + SessionMessages.KEY_SUFFIX_HIDE_DEFAULT_ERROR_MESSAGE);\n</code></pre>\n<p>But this didn't actually hide it for some reason and it doesn't solve the issue either. Did anyone encounter this before? And why do i keep getting a permission error without checking any permission?</p>\n"},{"tags":["java","jmx","java-module","java-17","illegalaccessexception"],"answers":[{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1674742538,"creation_date":1674742538,"answer_id":75247336,"question_id":75239006,"body_markdown":"In the command:\r\n\r\n    printf &quot;open  25522\\n&quot; | java -jar jmxterm/target/jmxterm-1.0.4-uber.jar --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -v verbose\r\n\r\nYou are passing the `--add-exports` flag as a program argument, rather than a VM argument.\r\n\r\nThe flag should be passed before the `-jar` flag instead:\r\n\r\n    printf &quot;open  25522\\n&quot; | java --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -jar jmxterm/target/jmxterm-1.0.4-uber.jar -v verbose","title":"How do I give jmxterm access to sun.tools.jconsole.LocalVirtualMachine in Java 17?","body":"<p>In the command:</p>\n<pre><code>printf &quot;open  25522\\n&quot; | java -jar jmxterm/target/jmxterm-1.0.4-uber.jar --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -v verbose\n</code></pre>\n<p>You are passing the <code>--add-exports</code> flag as a program argument, rather than a VM argument.</p>\n<p>The flag should be passed before the <code>-jar</code> flag instead:</p>\n<pre><code>printf &quot;open  25522\\n&quot; | java --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -jar jmxterm/target/jmxterm-1.0.4-uber.jar -v verbose\n</code></pre>\n"}],"owner":{"account_id":2164330,"reputation":2179,"user_id":1917745,"display_name":"gla3dr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75247336,"answer_count":1,"score":1,"last_activity_date":1674742538,"creation_date":1674675360,"question_id":75239006,"body_markdown":"I am trying to use [jmxterm](https://github.com/jiaqi/jmxterm) with [Eclipse Temurin Java 17](https://adoptium.net/temurin/releases/?version=17), but because of the module encapsulation changes in Java 17, jmxterm no longer has access to the class [`sun.tools.jconsole.LocalVirtualMachine`](https://github.com/openjdk/jdk17/blob/master/src/jdk.jconsole/share/classes/sun/tools/jconsole/LocalVirtualMachine.java) in the `jdk.jconsole` module. So, running the following command:\r\n\r\n```\r\nprintf &quot;open  25522\\n&quot; | java -jar jmxterm-1.0.4-uber.jar -v verbose\r\n```\r\noutputs the following exception:\r\n```\r\njava.lang.reflect.UndeclaredThrowableException\r\n        at jdk.proxy2/jdk.proxy2.$Proxy6.getAllVirtualMachines(Unknown Source)\r\n        at org.cyclopsgroup.jmxterm.jdk6.Jdk6JavaProcessManager.get(Jdk6JavaProcessManager.java:28)\r\n        at org.cyclopsgroup.jmxterm.SyntaxUtils.getUrl(SyntaxUtils.java:41)\r\n        at org.cyclopsgroup.jmxterm.cmd.OpenCommand.execute(OpenCommand.java:64)\r\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.doExecute(CommandCenter.java:161)\r\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.doExecute(CommandCenter.java:134)\r\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.execute(CommandCenter.java:176)\r\n        at org.cyclopsgroup.jmxterm.boot.CliMain.execute(CliMain.java:149)\r\n        at org.cyclopsgroup.jmxterm.boot.CliMain.main(CliMain.java:41)\r\nCaused by: java.lang.IllegalAccessException: class org.cyclopsgroup.jmxterm.utils.WeakCastUtils$2 cannot access class sun.tools.jconsole.LocalVirtualMachine (in module jdk.jconsole) because module jdk.jconsole does not export sun.tools.jconsole to unnamed module @3bb50eaa\r\n        at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:392)\r\n        at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:674)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:560)\r\n        at org.cyclopsgroup.jmxterm.utils.WeakCastUtils$2.invoke(WeakCastUtils.java:136)\r\n        ... 9 more\r\n```\r\n\r\nTo fix this, I thought I would have to recompile jmxterm with the `--add-exports` option, so to do that, I added this plugin to the [pom.xml](https://github.com/jiaqi/jmxterm/blob/main/pom.xml):\r\n```lang-xml\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.10.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;8&lt;/source&gt;\r\n          &lt;target&gt;17&lt;/target&gt;\r\n          &lt;compilerArgs&gt;\r\n            &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n            &lt;arg&gt;jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED&lt;/arg&gt;\r\n          &lt;/compilerArgs&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n```\r\nand I also had to add this config to the surefire plugin:\r\n```lang-xml\r\n          &lt;argLine&gt;\r\n              --add-opens java.base/java.lang=ALL-UNNAMED\r\n              --add-opens java.management/javax.management.openmbean=ALL-UNNAMED\r\n          &lt;/argLine&gt;\r\n```\r\nI have verified that Maven is using the correct JDK to build jmxterm:\r\n```\r\n$ mvn --version\r\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\r\nMaven home: /opt/maven\r\nJava version: 17.0.4.1, vendor: Eclipse Adoptium, runtime: /usr/lib/jvm/temurin-17-jdk\r\nDefault locale: en_CA, platform encoding: UTF-8\r\nOS name: &quot;linux&quot;, version: &quot;3.10.0-1160.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\r\n```\r\nSo with these changes I was able to build a new jmxterm uber jar with `mvn package`.\r\n\r\nI then tried to run my new jmxterm jar with `--add-exports` using this command:\r\n```\r\nprintf &quot;open  25522\\n&quot; | java -jar jmxterm/target/jmxterm-1.0.4-uber.jar --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -v verbose\r\n```\r\nbut it still threw the same exception as above.\r\n\r\nOther things I have tried that also didn&#39;t work:\r\n* Using `--add-opens` instead of `--add-exports` in the `java` command even though I don&#39;t think that should be necessary\r\n* Setting the `source` to 17 in `pom.xml`\r\n* Adding `--add-modules jdk.jconsole` argument to the `java` command as well as to `pom.xml`\r\n\r\nIs there something I am missing or is this just not possible?","title":"How do I give jmxterm access to sun.tools.jconsole.LocalVirtualMachine in Java 17?","body":"<p>I am trying to use <a href=\"https://github.com/jiaqi/jmxterm\" rel=\"nofollow noreferrer\">jmxterm</a> with <a href=\"https://adoptium.net/temurin/releases/?version=17\" rel=\"nofollow noreferrer\">Eclipse Temurin Java 17</a>, but because of the module encapsulation changes in Java 17, jmxterm no longer has access to the class <a href=\"https://github.com/openjdk/jdk17/blob/master/src/jdk.jconsole/share/classes/sun/tools/jconsole/LocalVirtualMachine.java\" rel=\"nofollow noreferrer\"><code>sun.tools.jconsole.LocalVirtualMachine</code></a> in the <code>jdk.jconsole</code> module. So, running the following command:</p>\n<pre><code>printf &quot;open  25522\\n&quot; | java -jar jmxterm-1.0.4-uber.jar -v verbose\n</code></pre>\n<p>outputs the following exception:</p>\n<pre><code>java.lang.reflect.UndeclaredThrowableException\n        at jdk.proxy2/jdk.proxy2.$Proxy6.getAllVirtualMachines(Unknown Source)\n        at org.cyclopsgroup.jmxterm.jdk6.Jdk6JavaProcessManager.get(Jdk6JavaProcessManager.java:28)\n        at org.cyclopsgroup.jmxterm.SyntaxUtils.getUrl(SyntaxUtils.java:41)\n        at org.cyclopsgroup.jmxterm.cmd.OpenCommand.execute(OpenCommand.java:64)\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.doExecute(CommandCenter.java:161)\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.doExecute(CommandCenter.java:134)\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.execute(CommandCenter.java:176)\n        at org.cyclopsgroup.jmxterm.boot.CliMain.execute(CliMain.java:149)\n        at org.cyclopsgroup.jmxterm.boot.CliMain.main(CliMain.java:41)\nCaused by: java.lang.IllegalAccessException: class org.cyclopsgroup.jmxterm.utils.WeakCastUtils$2 cannot access class sun.tools.jconsole.LocalVirtualMachine (in module jdk.jconsole) because module jdk.jconsole does not export sun.tools.jconsole to unnamed module @3bb50eaa\n        at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:392)\n        at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:674)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:560)\n        at org.cyclopsgroup.jmxterm.utils.WeakCastUtils$2.invoke(WeakCastUtils.java:136)\n        ... 9 more\n</code></pre>\n<p>To fix this, I thought I would have to recompile jmxterm with the <code>--add-exports</code> option, so to do that, I added this plugin to the <a href=\"https://github.com/jiaqi/jmxterm/blob/main/pom.xml\" rel=\"nofollow noreferrer\">pom.xml</a>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.10.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;8&lt;/source&gt;\n          &lt;target&gt;17&lt;/target&gt;\n          &lt;compilerArgs&gt;\n            &lt;arg&gt;--add-exports&lt;/arg&gt;\n            &lt;arg&gt;jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED&lt;/arg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>and I also had to add this config to the surefire plugin:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>          &lt;argLine&gt;\n              --add-opens java.base/java.lang=ALL-UNNAMED\n              --add-opens java.management/javax.management.openmbean=ALL-UNNAMED\n          &lt;/argLine&gt;\n</code></pre>\n<p>I have verified that Maven is using the correct JDK to build jmxterm:</p>\n<pre><code>$ mvn --version\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nMaven home: /opt/maven\nJava version: 17.0.4.1, vendor: Eclipse Adoptium, runtime: /usr/lib/jvm/temurin-17-jdk\nDefault locale: en_CA, platform encoding: UTF-8\nOS name: &quot;linux&quot;, version: &quot;3.10.0-1160.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\n</code></pre>\n<p>So with these changes I was able to build a new jmxterm uber jar with <code>mvn package</code>.</p>\n<p>I then tried to run my new jmxterm jar with <code>--add-exports</code> using this command:</p>\n<pre><code>printf &quot;open  25522\\n&quot; | java -jar jmxterm/target/jmxterm-1.0.4-uber.jar --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -v verbose\n</code></pre>\n<p>but it still threw the same exception as above.</p>\n<p>Other things I have tried that also didn't work:</p>\n<ul>\n<li>Using <code>--add-opens</code> instead of <code>--add-exports</code> in the <code>java</code> command even though I don't think that should be necessary</li>\n<li>Setting the <code>source</code> to 17 in <code>pom.xml</code></li>\n<li>Adding <code>--add-modules jdk.jconsole</code> argument to the <code>java</code> command as well as to <code>pom.xml</code></li>\n</ul>\n<p>Is there something I am missing or is this just not possible?</p>\n"},{"tags":["java","spring-boot","redis","spring-data","spring-data-redis"],"comments":[{"owner":{"account_id":5336230,"reputation":5228,"user_id":4255107,"accept_rate":50,"display_name":"sonus21"},"score":0,"creation_date":1608637100,"post_id":65392303,"comment_id":115638463,"body_markdown":"Once a key is expired means you won&#39;t find the same key in Redis. What&#39;s the deal here?","body":"Once a key is expired means you won&#39;t find the same key in Redis. What&#39;s the deal here?"},{"owner":{"account_id":8825988,"reputation":61,"user_id":6594226,"display_name":"Andreea"},"score":0,"creation_date":1623655023,"post_id":65392303,"comment_id":120130407,"body_markdown":"@sonus21 I was talking about the phantom key","body":"@sonus21 I was talking about the phantom key"}],"answers":[{"tags":[],"owner":{"account_id":2230810,"reputation":66,"user_id":1968425,"display_name":"anche"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674742317,"creation_date":1674742317,"answer_id":75247284,"question_id":65392303,"body_markdown":"I had a similar issue and I had to set the property enableKeyspaceEvents in @EnableRedisRepositories annotation.\r\n       \r\n`enableKeyspaceEvents = RedisKeyValueAdapter.EnableKeyspaceEvents.ON_STARTUP`  \r\n\r\nI got the idea after reading the documentation for [Spring Data Redis (Time To Live section) ][1]\r\n\r\n&gt; By default, the key expiry listener is disabled when initializing the application. The startup mode can be adjusted in @EnableRedisRepositories or RedisKeyValueAdapter to start the listener with the application or upon the first insert of an entity with a TTL. See EnableKeyspaceEvents for possible values.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/redis/docs/2.7.2/reference/html/#redis.repositories.expirations\r\n\r\nI hope this helps.","title":"Redis Template does not automatically save a phantom entity","body":"<p>I had a similar issue and I had to set the property enableKeyspaceEvents in @EnableRedisRepositories annotation.</p>\n<p><code>enableKeyspaceEvents = RedisKeyValueAdapter.EnableKeyspaceEvents.ON_STARTUP</code></p>\n<p>I got the idea after reading the documentation for <a href=\"https://docs.spring.io/spring-data/redis/docs/2.7.2/reference/html/#redis.repositories.expirations\" rel=\"nofollow noreferrer\">Spring Data Redis (Time To Live section) </a></p>\n<blockquote>\n<p>By default, the key expiry listener is disabled when initializing the application. The startup mode can be adjusted in @EnableRedisRepositories or RedisKeyValueAdapter to start the listener with the application or upon the first insert of an entity with a TTL. See EnableKeyspaceEvents for possible values.</p>\n</blockquote>\n<p>I hope this helps.</p>\n"}],"owner":{"account_id":8825988,"reputation":61,"user_id":6594226,"display_name":"Andreea"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":547,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674742317,"creation_date":1608551592,"question_id":65392303,"body_markdown":"At the risk of making a fool out of myself, I have a question regarding redis that has plagued me for 2 days.\r\nI have a basic project with spring boot 2.4.0 (spring-data-redis included).\r\nI have the following RedisEntity:\r\n\r\n     @RedisHash\r\n     @Getter\r\n     @Setter\r\n     @ToString\r\n    public class RedisEntity implements Serializable {\r\n      private @Id String id;\r\n      private @Indexed String secondaryIndex;\r\n      private @TimeToLive Long expirationTime;\r\n    \r\n     \r\n     \r\n\r\nAnd a basic service that saves my redis entity:\r\n \r\n\r\n     public String persistEntity() {\r\n        RedisEntity myEntity = new RedisEntity();\r\n        myEntity.setId(&quot;1234&quot;);\r\n        myEntity.setExpirationTime(10L);\r\n        myEntity.setSecondaryIndex(&quot;456&quot;);\r\n    \r\n        cacheTemplate.opsForValue().set(myEntity.getId(), myEntity,\r\n    \t\tmyEntity.getExpirationTime(), TimeUnit.SECONDS);\r\n          \r\n        log.info(&quot;Saved entity to REDIS! Entity=&quot; + myEntity);\r\n        return myEntity.toString();\r\n      }\r\n\r\nThe redis template configuration is the following:\r\n \r\n\r\n    @Bean\r\n      public RedisTemplate redisTemplate(RedisConnectionFactory rcf) {\r\n        return createTemplate(rcf, new Jackson2JsonRedisSerializer(RedisEntity.class));\r\n    \r\n      }\r\n    \r\n      private &lt;K, V, S extends RedisSerializer&gt; RedisTemplate&lt;K, V&gt; createTemplate(\r\n          RedisConnectionFactory factory, S valueSerializer) {\r\n        RedisTemplate&lt;K, V&gt; redisTemplate = new RedisTemplate&lt;&gt;();\r\n        redisTemplate.setConnectionFactory(factory);\r\n        redisTemplate.setKeySerializer(new StringRedisSerializer());\r\n        redisTemplate.setValueSerializer(valueSerializer);\r\n        redisTemplate.setHashKeySerializer(new StringRedisSerializer());\r\n        redisTemplate.setHashValueSerializer(new GenericJackson2JsonRedisSerializer());\r\n        redisTemplate.afterPropertiesSet();\r\n        return redisTemplate;\r\n      }\r\nThe entity is saved in redis, but when it expires, I cannot retrieve the value ( the phantom entity is not present)\r\nI have put the `@EnableRedisRepositories(shadowCopy = ShadowCopy.ON)` on my main class but to no avail.\r\nWhen the entity expires, redis deletes everything.\r\n\r\nHas someone experienced something similar? Do I need to manually save a copy and put its expiration time at 5 minutes?\r\n\r\n","title":"Redis Template does not automatically save a phantom entity","body":"<p>At the risk of making a fool out of myself, I have a question regarding redis that has plagued me for 2 days.\nI have a basic project with spring boot 2.4.0 (spring-data-redis included).\nI have the following RedisEntity:</p>\n<pre><code> @RedisHash\n @Getter\n @Setter\n @ToString\npublic class RedisEntity implements Serializable {\n  private @Id String id;\n  private @Indexed String secondaryIndex;\n  private @TimeToLive Long expirationTime;\n\n \n \n</code></pre>\n<p>And a basic service that saves my redis entity:</p>\n<pre><code> public String persistEntity() {\n    RedisEntity myEntity = new RedisEntity();\n    myEntity.setId(&quot;1234&quot;);\n    myEntity.setExpirationTime(10L);\n    myEntity.setSecondaryIndex(&quot;456&quot;);\n\n    cacheTemplate.opsForValue().set(myEntity.getId(), myEntity,\n        myEntity.getExpirationTime(), TimeUnit.SECONDS);\n      \n    log.info(&quot;Saved entity to REDIS! Entity=&quot; + myEntity);\n    return myEntity.toString();\n  }\n</code></pre>\n<p>The redis template configuration is the following:</p>\n<pre><code>@Bean\n  public RedisTemplate redisTemplate(RedisConnectionFactory rcf) {\n    return createTemplate(rcf, new Jackson2JsonRedisSerializer(RedisEntity.class));\n\n  }\n\n  private &lt;K, V, S extends RedisSerializer&gt; RedisTemplate&lt;K, V&gt; createTemplate(\n      RedisConnectionFactory factory, S valueSerializer) {\n    RedisTemplate&lt;K, V&gt; redisTemplate = new RedisTemplate&lt;&gt;();\n    redisTemplate.setConnectionFactory(factory);\n    redisTemplate.setKeySerializer(new StringRedisSerializer());\n    redisTemplate.setValueSerializer(valueSerializer);\n    redisTemplate.setHashKeySerializer(new StringRedisSerializer());\n    redisTemplate.setHashValueSerializer(new GenericJackson2JsonRedisSerializer());\n    redisTemplate.afterPropertiesSet();\n    return redisTemplate;\n  }\n</code></pre>\n<p>The entity is saved in redis, but when it expires, I cannot retrieve the value ( the phantom entity is not present)\nI have put the <code>@EnableRedisRepositories(shadowCopy = ShadowCopy.ON)</code> on my main class but to no avail.\nWhen the entity expires, redis deletes everything.</p>\n<p>Has someone experienced something similar? Do I need to manually save a copy and put its expiration time at 5 minutes?</p>\n"},{"tags":["java","json","protocol-buffers","grpc","grpc-java"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674680113,"post_id":75233997,"comment_id":132768887,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"owner":{"account_id":24057171,"reputation":73,"user_id":18034851,"display_name":"GlidingSwords997"},"score":0,"creation_date":1674740334,"post_id":75234627,"comment_id":132780950,"body_markdown":"Hey John,\nThanks for the response.\n\nI have added a sample schema in the main question so that we can get an idea of the schema we are referring to.\nThe message.getAllFields() just returns the first level fields, not the nested fields, is there any suggestion how we are going to refer them.\n\nAlso, message.getDescriptorForType().findFieldByName(&quot;someField&quot;); gives null pointer, as the map has keys in FieldDesriptor format, while we are giving string here.","body":"Hey John, Thanks for the response.  I have added a sample schema in the main question so that we can get an idea of the schema we are referring to. The message.getAllFields() just returns the first level fields, not the nested fields, is there any suggestion how we are going to refer them.  Also, message.getDescriptorForType().findFieldByName(&quot;someField&quot;); gives null pointer, as the map has keys in FieldDesriptor format, while we are giving string here."},{"owner":{"account_id":24057171,"reputation":73,"user_id":18034851,"display_name":"GlidingSwords997"},"score":0,"creation_date":1674740519,"post_id":75234627,"comment_id":132781013,"body_markdown":"Hey John,\nI have updated the comment and the question, could you please share some more light there ?","body":"Hey John, I have updated the comment and the question, could you please share some more light there ?"},{"owner":{"account_id":24057171,"reputation":73,"user_id":18034851,"display_name":"GlidingSwords997"},"score":0,"creation_date":1674741052,"post_id":75234627,"comment_id":132781211,"body_markdown":"I was able to resolve the NPE, but still not able to fetch values based on nested keys.","body":"I was able to resolve the NPE, but still not able to fetch values based on nested keys."},{"owner":{"account_id":24057171,"reputation":73,"user_id":18034851,"display_name":"GlidingSwords997"},"score":0,"creation_date":1674797486,"post_id":75234627,"comment_id":132793958,"body_markdown":"I am getting the error of unmodifiable list while typecasting to Message: \nFailed to read message., cause=java.lang.ClassCastException: java.util.Collections$UnmodifiableRandomAccessList cannot be cast to com.google.protobuf.Message","body":"I am getting the error of unmodifiable list while typecasting to Message:  Failed to read message., cause=java.lang.ClassCastException: java.util.Collections$UnmodifiableRandomAccessList cannot be cast to com.google.protobuf.Message"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1674812197,"post_id":75234627,"comment_id":132797107,"body_markdown":"In debug mode, without the cast, can you inspect the element types within the UnmodifiableRandomAccessList?","body":"In debug mode, without the cast, can you inspect the element types within the UnmodifiableRandomAccessList?"},{"owner":{"account_id":14947494,"reputation":521,"user_id":10792320,"display_name":"San P"},"score":0,"creation_date":1675113579,"post_id":75234627,"comment_id":132855316,"body_markdown":"If the field you are accessing is a repeating field you will need to use `message.getRepeatedField` instead of `message.getField`. Is that the case for `field3` ?","body":"If the field you are accessing is a repeating field you will need to use <code>message.getRepeatedField</code> instead of <code>message.getField</code>. Is that the case for <code>field3</code> ?"}],"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674741518,"creation_date":1674652951,"answer_id":75234627,"question_id":75233997,"body_markdown":"Try this:\r\n\r\n    FieldDescriptor fieldDescriptor = message.getDescriptorForType().findFieldByName(&quot;someField&quot;);\r\n    Object value = message.getField(fieldDescriptor);\r\n\r\n\r\nTo get a list of all the fields:\r\n\r\n    Map&lt;Descriptors.FieldDescriptor, Object&gt; allFields = message.getAllFields();\r\n\r\nTo get a nested value do this:\r\n\r\n    Message subMessage =\r\n        (Message)message.getField(\r\n            message.getDescriptorForType().findFieldByName(&quot;field3&quot;));\r\n    Message subSubMessage =\r\n        (Message)subMessage.getField(\r\n        subMessage.getDescriptorForType().findFieldByName(&quot;key3&quot;));\r\n    String subSubSubMessage veryNestedString =\r\n        (String)subSubMessage.getField(\r\n        subSubMessage.getDescriptorForType().findFieldByName(&quot;netsed_key_1&quot;));","title":"Converting protobuf Dynamic Message returned by gRPC call into JSON or similar object","body":"<p>Try this:</p>\n<pre><code>FieldDescriptor fieldDescriptor = message.getDescriptorForType().findFieldByName(&quot;someField&quot;);\nObject value = message.getField(fieldDescriptor);\n</code></pre>\n<p>To get a list of all the fields:</p>\n<pre><code>Map&lt;Descriptors.FieldDescriptor, Object&gt; allFields = message.getAllFields();\n</code></pre>\n<p>To get a nested value do this:</p>\n<pre><code>Message subMessage =\n    (Message)message.getField(\n        message.getDescriptorForType().findFieldByName(&quot;field3&quot;));\nMessage subSubMessage =\n    (Message)subMessage.getField(\n    subMessage.getDescriptorForType().findFieldByName(&quot;key3&quot;));\nString subSubSubMessage veryNestedString =\n    (String)subSubMessage.getField(\n    subSubMessage.getDescriptorForType().findFieldByName(&quot;netsed_key_1&quot;));\n</code></pre>\n"}],"owner":{"account_id":24057171,"reputation":73,"user_id":18034851,"display_name":"GlidingSwords997"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":610,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75234627,"answer_count":1,"score":0,"last_activity_date":1674741518,"creation_date":1674649686,"question_id":75233997,"body_markdown":"I am making a gRPC call to a server using reflection which returns Dynamic Message as the response message. Now, although this object looks similar to a nested object, its structure is slightly different from a JSON. This makes fetching of values based on fields, like \r\n```\r\nsomeObject.get(someField) \r\n```\r\ndifficult. One way is to parse this message to an object and then fetch the desired values. Any suggestions on parsing here ?\r\n\r\nThis is the class getting returned : \r\n```\r\ncom.google.protobuf.DynamicMessage\r\n\r\n```\r\nBut, although it looks like a nested JSON, we can&#39;t fetch values based on fields.\r\n\r\nTo have an overview of the shema, this is how the response looks:\r\n\r\n    field1 {\r\n      key1: &quot;value1&quot;\r\n    }\r\n    field2 {\r\n      key1: &quot;value1&quot;\r\n      key2: value2\r\n      key3 {\r\n        netsed_key_1: &quot;nested_val_1&quot;\r\n        netsed_key_2: &quot;nested_val_2&quot;\r\n      }\r\n      key4 {\r\n        netsed_key_1: &quot;nested_val_1&quot;\r\n        netsed_key_2: &quot;nested_val_2&quot;\r\n      }\r\n    }","title":"Converting protobuf Dynamic Message returned by gRPC call into JSON or similar object","body":"<p>I am making a gRPC call to a server using reflection which returns Dynamic Message as the response message. Now, although this object looks similar to a nested object, its structure is slightly different from a JSON. This makes fetching of values based on fields, like</p>\n<pre><code>someObject.get(someField) \n</code></pre>\n<p>difficult. One way is to parse this message to an object and then fetch the desired values. Any suggestions on parsing here ?</p>\n<p>This is the class getting returned :</p>\n<pre><code>com.google.protobuf.DynamicMessage\n\n</code></pre>\n<p>But, although it looks like a nested JSON, we can't fetch values based on fields.</p>\n<p>To have an overview of the shema, this is how the response looks:</p>\n<pre><code>field1 {\n  key1: &quot;value1&quot;\n}\nfield2 {\n  key1: &quot;value1&quot;\n  key2: value2\n  key3 {\n    netsed_key_1: &quot;nested_val_1&quot;\n    netsed_key_2: &quot;nested_val_2&quot;\n  }\n  key4 {\n    netsed_key_1: &quot;nested_val_1&quot;\n    netsed_key_2: &quot;nested_val_2&quot;\n  }\n}\n</code></pre>\n"},{"tags":["java","android","clock"],"comments":[{"owner":{"account_id":3131299,"reputation":37922,"user_id":2649012,"accept_rate":100,"display_name":"Phant&#244;maxx"},"score":0,"creation_date":1392308910,"post_id":21759456,"comment_id":32915090,"body_markdown":"I think you have to resort to some atomic clock around the world. So, an internet connection must be active, to sync the internal clock of the device - and it will sync basing on the current UTC offset setting.","body":"I think you have to resort to some atomic clock around the world. So, an internet connection must be active, to sync the internal clock of the device - and it will sync basing on the current UTC offset setting."}],"answers":[{"comments":[{"owner":{"account_id":12539,"reputation":39420,"user_id":24762,"accept_rate":71,"display_name":"Andrew Aylett"},"score":0,"creation_date":1392310370,"post_id":21760337,"comment_id":32916240,"body_markdown":"Nice answer.  I don&#39;t think that Aeroplane mode directly disables GPS, though, as it disables *transmitters* and GPS devices only receive.  As you point out though, there are still other reasons why GPS might not work.","body":"Nice answer.  I don&#39;t think that Aeroplane mode directly disables GPS, though, as it disables <i>transmitters</i> and GPS devices only receive.  As you point out though, there are still other reasons why GPS might not work."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1392311013,"post_id":21760337,"comment_id":32916693,"body_markdown":"@AndrewAylett: &quot;I don&#39;t think that Aeroplane mode directly disables GPS&quot; -- good point, and I&#39;ve added a strikethrough to my answer for that. Thanks!","body":"@AndrewAylett: &quot;I don&#39;t think that Aeroplane mode directly disables GPS&quot; -- good point, and I&#39;ve added a strikethrough to my answer for that. Thanks!"},{"owner":{"account_id":1188022,"reputation":2187,"user_id":1161573,"accept_rate":68,"display_name":"ScottyB"},"score":0,"creation_date":1392317330,"post_id":21760337,"comment_id":32920804,"body_markdown":"Thanks for the info. Looks like SNTP is the way to go, and if that fails, currentTimeMillis() is the best (only?) alternative.","body":"Thanks for the info. Looks like SNTP is the way to go, and if that fails, currentTimeMillis() is the best (only?) alternative."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1392317850,"post_id":21760337,"comment_id":32921097,"body_markdown":"@ScottBowers: Well, there&#39;s only one system clock, which is what feeds `currentTimeMillis()`. You&#39;re welcome to try to figure out how to whitelist GPS implementations and try to use GPS time values for devices where that data appears good. At some point, though, you need to weigh how much of this is &quot;gilding the lily&quot; compared to spending that time on other aspects of your app, or on other aspects of your overall business if you&#39;re an independent developer.","body":"@ScottBowers: Well, there&#39;s only one system clock, which is what feeds <code>currentTimeMillis()</code>. You&#39;re welcome to try to figure out how to whitelist GPS implementations and try to use GPS time values for devices where that data appears good. At some point, though, you need to weigh how much of this is &quot;gilding the lily&quot; compared to spending that time on other aspects of your app, or on other aspects of your overall business if you&#39;re an independent developer."}],"tags":[],"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"comment_count":4,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1392310996,"creation_date":1392310056,"answer_id":21760337,"question_id":21759456,"body_markdown":"&gt; Is that possible?\r\n\r\nThat depends upon your definition of &quot;that&quot;.\r\n\r\nSo, let&#39;s examine the rest of your material first...\r\n\r\n&gt; it would start with the GPS\r\n\r\n[GPS times are not especially accurate depending on hardware][1]. I think you&#39;d also need to use an `NmeaListener` to try to parse the time data out of the NMEA sentences directly, as AFAIK `getTime()` on `Location` is the system time, not some GPS time. Also, bear in mind that GPS access is not universal (user may have disabled it specifically, &lt;strike&gt;user might have put device in airplane mode,&lt;/strike&gt; user may be in a large building with no available GPS signals).\r\n\r\n&gt; fall back to SNTP\r\n\r\nThere are plenty of SNTP client code bits out there that you can try. Bear in mind that Internet connectivity is not universal (device may be WiFi-only outside of any known access point, user might have put device in airplane mode, device may be mobile-data-capable but have no signal strength in current location).\r\n\r\n&gt; if that doesn&#39;t work ask Android to refresh its wall clock with via its own SNTP or carrier NITZ\r\n\r\nIt&#39;s conceivable that a rooted device might be able to do this, somehow, but there&#39;s nothing in the Android SDK for ordinary apps to force such a refresh. Bear in mind that connectivity is not universal (see roster in previous paragraph).\r\n\r\nSo, going back to:\r\n\r\n&gt; Is that possible?\r\n\r\nIf &quot;that&quot; is a solution that is guaranteed to work in all cases, then no, it is not possible, as you are not guaranteed any ability to communicate with any time source.\r\n\r\nIf &quot;that&quot; is a solution that is guaranteed to work if the device has Internet connectivity, then you&#39;d need to ask your SNTP client library implementers if they can achieve 100ms accuracy. SNTP is the only one of your strategies that is completely under your control, other than the connectivity issue, as GPS may not be accurate and NITZ isn&#39;t something you manage yourself.\r\n\r\n  [1]: https://groups.google.com/forum/#!topic/android-developers/VwbqlB9ugLg","title":"How do I get the most accurate time with Android?","body":"<blockquote>\n  <p>Is that possible?</p>\n</blockquote>\n\n<p>That depends upon your definition of \"that\".</p>\n\n<p>So, let's examine the rest of your material first...</p>\n\n<blockquote>\n  <p>it would start with the GPS</p>\n</blockquote>\n\n<p><a href=\"https://groups.google.com/forum/#!topic/android-developers/VwbqlB9ugLg\" rel=\"noreferrer\">GPS times are not especially accurate depending on hardware</a>. I think you'd also need to use an <code>NmeaListener</code> to try to parse the time data out of the NMEA sentences directly, as AFAIK <code>getTime()</code> on <code>Location</code> is the system time, not some GPS time. Also, bear in mind that GPS access is not universal (user may have disabled it specifically, <strike>user might have put device in airplane mode,</strike> user may be in a large building with no available GPS signals).</p>\n\n<blockquote>\n  <p>fall back to SNTP</p>\n</blockquote>\n\n<p>There are plenty of SNTP client code bits out there that you can try. Bear in mind that Internet connectivity is not universal (device may be WiFi-only outside of any known access point, user might have put device in airplane mode, device may be mobile-data-capable but have no signal strength in current location).</p>\n\n<blockquote>\n  <p>if that doesn't work ask Android to refresh its wall clock with via its own SNTP or carrier NITZ</p>\n</blockquote>\n\n<p>It's conceivable that a rooted device might be able to do this, somehow, but there's nothing in the Android SDK for ordinary apps to force such a refresh. Bear in mind that connectivity is not universal (see roster in previous paragraph).</p>\n\n<p>So, going back to:</p>\n\n<blockquote>\n  <p>Is that possible?</p>\n</blockquote>\n\n<p>If \"that\" is a solution that is guaranteed to work in all cases, then no, it is not possible, as you are not guaranteed any ability to communicate with any time source.</p>\n\n<p>If \"that\" is a solution that is guaranteed to work if the device has Internet connectivity, then you'd need to ask your SNTP client library implementers if they can achieve 100ms accuracy. SNTP is the only one of your strategies that is completely under your control, other than the connectivity issue, as GPS may not be accurate and NITZ isn't something you manage yourself.</p>\n"},{"tags":[],"owner":{"account_id":7022008,"reputation":6287,"user_id":5380942,"display_name":"Googlian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674741349,"creation_date":1674741349,"answer_id":75247078,"question_id":21759456,"body_markdown":"Simple SNTP Client class for retrieving network time on Android (SNTPClient)\r\n\r\nGet the SNTP Helper class from the below repository\r\n\r\nhttps://github.com/aslamanver/sntp-client-android\r\n\r\nCopy the `SNTPClient.java` into your project, and there you go. It&#39;s ready.\r\n\r\nUsage\r\nRetrieve the time of a specific time zone.\r\n```java\r\nSNTPClient.getDate(TimeZone.getTimeZone(&quot;Asia/Colombo&quot;), new SNTPClient.Listener() {\r\n\r\n    @Override\r\n    public void onTimeResponse(String rawDate, Date date, Exception ex) {\r\n\r\n    }\r\n});\r\n```\r\n\r\nCurrent time zone can be passed to retrieve the current time of the device zone.\r\n\r\n```java\r\nCalendar.getInstance().getTimeZone();\r\n```\r\n\r\nAbout more\r\n\r\nThe output time is formatted according to ISO 8601 format.\r\n&gt; yyyy-MM-dd&#39;T&#39;HH:mm:ssZ\r\n\r\nTime server host is Google\r\n&gt; time.google.com","title":"How do I get the most accurate time with Android?","body":"<p>Simple SNTP Client class for retrieving network time on Android (SNTPClient)</p>\n<p>Get the SNTP Helper class from the below repository</p>\n<p><a href=\"https://github.com/aslamanver/sntp-client-android\" rel=\"nofollow noreferrer\">https://github.com/aslamanver/sntp-client-android</a></p>\n<p>Copy the <code>SNTPClient.java</code> into your project, and there you go. It's ready.</p>\n<p>Usage\nRetrieve the time of a specific time zone.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SNTPClient.getDate(TimeZone.getTimeZone(&quot;Asia/Colombo&quot;), new SNTPClient.Listener() {\n\n    @Override\n    public void onTimeResponse(String rawDate, Date date, Exception ex) {\n\n    }\n});\n</code></pre>\n<p>Current time zone can be passed to retrieve the current time of the device zone.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Calendar.getInstance().getTimeZone();\n</code></pre>\n<p>About more</p>\n<p>The output time is formatted according to ISO 8601 format.</p>\n<blockquote>\n<p>yyyy-MM-dd'T'HH:mm:ssZ</p>\n</blockquote>\n<p>Time server host is Google</p>\n<blockquote>\n<p>time.google.com</p>\n</blockquote>\n"}],"owner":{"account_id":1188022,"reputation":2187,"user_id":1161573,"accept_rate":68,"display_name":"ScottyB"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5039,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"accepted_answer_id":21760337,"answer_count":2,"score":8,"last_activity_date":1674741349,"creation_date":1392307741,"question_id":21759456,"body_markdown":"I really don&#39;t think this question is a duplicate.  \r\nMost answers to similar questions say to use System.currentTimeMillis() as the most accurate time, but I&#39;ve noticed that two Android devices side-by-side may be off up to 5 seconds or more from each other or (more importantly) the real time, and I believe currentTimeMillis() will reflect that difference.\r\n\r\nSo what I&#39;m really looking for is a comprehensive solution to get the most **accurate** time possible in a given moment.  \r\nFor example, it would start with the GPS and, if that&#39;s not available or there&#39;s no signal, fall back to SNTP, or if that doesn&#39;t work ask Android to refresh its wall clock with via its own SNTP or carrier NITZ.\r\n\r\nMy goal is accuracy within .1 seconds.  \r\nIs that possible?  \r\nThanks.\r\n","title":"How do I get the most accurate time with Android?","body":"<p>I really don't think this question is a duplicate.<br>\nMost answers to similar questions say to use System.currentTimeMillis() as the most accurate time, but I've noticed that two Android devices side-by-side may be off up to 5 seconds or more from each other or (more importantly) the real time, and I believe currentTimeMillis() will reflect that difference.</p>\n\n<p>So what I'm really looking for is a comprehensive solution to get the most <strong>accurate</strong> time possible in a given moment.<br>\nFor example, it would start with the GPS and, if that's not available or there's no signal, fall back to SNTP, or if that doesn't work ask Android to refresh its wall clock with via its own SNTP or carrier NITZ.</p>\n\n<p>My goal is accuracy within .1 seconds.<br>\nIs that possible?<br>\nThanks.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674741300,"creation_date":1674741300,"answer_id":75247067,"question_id":75246264,"body_markdown":"With Jmx / MBean you can get that kind of info. Java process will run as fast as the CPU limit. So that measurement doesn&#39;t make sense on different machine. \r\n\r\nTo have an idea you need to develop on docker with CPU limits and check wall clock to validate requirement of the service with load tests like gatling https://gatling.io/.","title":"Getting cpu usage by process within container with limits","body":"<p>With Jmx / MBean you can get that kind of info. Java process will run as fast as the CPU limit. So that measurement doesn't make sense on different machine.</p>\n<p>To have an idea you need to develop on docker with CPU limits and check wall clock to validate requirement of the service with load tests like gatling <a href=\"https://gatling.io/\" rel=\"nofollow noreferrer\">https://gatling.io/</a>.</p>\n"}],"owner":{"account_id":7023980,"reputation":4823,"user_id":5382150,"accept_rate":86,"display_name":"Gilgamesz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674741300,"creation_date":1674736828,"question_id":75246264,"body_markdown":"Do you know whether exist a library for Java that makes it possible to get recent CPU usage, let&#39;s say for the last few seconds?\r\n\r\nThis library should work on different OSes (Mac, Linux, Windows) and be container-aware - let&#39;s say that our JVM was run in container and CPU was limited to 1000 ticks per any period. Then, cpu usage by process should be relative to the limit.","title":"Getting cpu usage by process within container with limits","body":"<p>Do you know whether exist a library for Java that makes it possible to get recent CPU usage, let's say for the last few seconds?</p>\n<p>This library should work on different OSes (Mac, Linux, Windows) and be container-aware - let's say that our JVM was run in container and CPU was limited to 1000 ticks per any period. Then, cpu usage by process should be relative to the limit.</p>\n"},{"tags":["java","spring","hibernate","hibernate-onetomany"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1674742923,"post_id":75247052,"comment_id":132781918,"body_markdown":"I would think that `SistemaEntidad sistema = this.tablasServicio.buscarSistemaByIdEntidad(sistemaId);` causes the problem, as that entity has multiple lazily fetched collections. If lazy fetched, the collection is a proxy only that has not been initialized. You could try to force initialization using `Hibernate.initialize()`","body":"I would think that <code>SistemaEntidad sistema = this.tablasServicio.buscarSistemaByIdEntidad(sistemaId);</code> causes the problem, as that entity has multiple lazily fetched collections. If lazy fetched, the collection is a proxy only that has not been initialized. You could try to force initialization using <code>Hibernate.initialize()</code>"},{"owner":{"account_id":27626965,"reputation":1,"user_id":21086770,"display_name":"Samuelpi"},"score":0,"creation_date":1674747744,"post_id":75247052,"comment_id":132783757,"body_markdown":"I have tried with Hibernate.initialize to every lazy collection of SistemaEntidad. Now the error is: `org.hibernate.PersistentObjectException: detached entity passed to persist: es.sjtr.persistencia.TipoSistemaEntidad`...","body":"I have tried with Hibernate.initialize to every lazy collection of SistemaEntidad. Now the error is: <code>org.hibernate.PersistentObjectException: detached entity passed to persist: es.sjtr.persistencia.TipoSistemaEntidad</code>..."},{"owner":{"account_id":27626965,"reputation":1,"user_id":21086770,"display_name":"Samuelpi"},"score":0,"creation_date":1674748094,"post_id":75247052,"comment_id":132783901,"body_markdown":"To avoid detached entity error, I have changed on SistemaEntidad all cascadeType.All to cascadeType.Merge. Now the problem is Hibernate is trying to insert on table SISTEMAS, but that is wrong because that SISTEMA exists, so PK constrsint violation is throw","body":"To avoid detached entity error, I have changed on SistemaEntidad all cascadeType.All to cascadeType.Merge. Now the problem is Hibernate is trying to insert on table SISTEMAS, but that is wrong because that SISTEMA exists, so PK constrsint violation is throw"},{"owner":{"account_id":27626965,"reputation":1,"user_id":21086770,"display_name":"Samuelpi"},"score":0,"creation_date":1674804545,"post_id":75247052,"comment_id":132795109,"body_markdown":"Finally resolved calling to Hibernate.initialize just before persisting DestinatariosAlertasEntidad. Thanks for your help!","body":"Finally resolved calling to Hibernate.initialize just before persisting DestinatariosAlertasEntidad. Thanks for your help!"}],"owner":{"account_id":27626965,"reputation":1,"user_id":21086770,"display_name":"Samuelpi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674741212,"creation_date":1674741212,"question_id":75247052,"body_markdown":"I have googled a lot, but I have not found any solution. Error showed in the log:\r\n\r\n```\r\norg.hibernate.PersistentObjectException: uninitialized proxy passed to persist()\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:99)\r\n\tat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:762)\r\n\tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:755)\r\n\tat org.hibernate.engine.spi.CascadingAction$7.cascade(CascadingAction.java:315)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:399)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:342)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)\r\n\tat org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:424)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:263)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:135)\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)\r\n```\r\n\r\nHibernate querys in the log:\r\n\r\n```\r\n(SqlStatementLogger.java:104) - insert into DEST_ALERTAS (EMAIL, ID_DESTINATARIO) values (?, ?)\r\n(SqlStatementLogger.java:104) - update DEST_ALERTAS_SISTEMA set ACTIVO=? where ID_DESTINATARIO=? and ID_SISTEMA=?\r\n```\r\nI am inserting a new DEST_ALERTAS, so the first insert is ok, and **the update is wrong, it should also be a insert**.\r\n\r\nMy code: \r\n\r\n**DEST_ALERTAS entity**\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;DEST_ALERTAS&quot;)\r\npublic class DestinatariosAlertasEntidad implements Serializable {\r\n\r\n \r\n  private static final long serialVersionUID = 1L;\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;Identificador_DEST_ALERTAS_PK&quot;)\r\n  @SequenceGenerator(name = &quot;Identificador_DEST_ALERTAS_PK&quot;, sequenceName = &quot;SEC_GI_DEST_ALERTAS&quot;, allocationSize = 1)\r\n  @Column(name = &quot;ID_DESTINATARIO&quot;, unique = true, nullable = false)\r\n  private int idDestinatario;\r\n\r\n  @Column(name = &quot;EMAIL&quot;, length = 100)\r\n  private String email;\r\n\r\n  @OneToMany(mappedBy = &quot;destinatario&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n  @JsonIgnore\r\n  private Set&lt;DestinatariosAlertasSistemaEntidad&gt; destinatarioSistema = new HashSet&lt;DestinatariosAlertasSistemaEntidad&gt;();\r\n  \r\n\r\n```\r\n\r\n**DEST_ALERTAS_SISTEMA entity**\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;DEST_ALERTAS_SISTEMA&quot;)\r\npublic class DestinatariosAlertasSistemaEntidad implements Serializable {\r\n\r\n\r\n  private static final long serialVersionUID = 1L;\r\n  \r\n  @EmbeddedId\r\n  private DestinatarioSistemaKey clave;\r\n\r\n  @MapsId(&quot;idSistema&quot;)\r\n  @ManyToOne(fetch = FetchType.EAGER)\r\n  @JoinColumn(name = &quot;ID_SISTEMA&quot;, referencedColumnName = &quot;ID_SISTEMA&quot;, insertable = false, updatable = false)\r\n  private SistemaEntidad sistema;\r\n\r\n  @MapsId(&quot;idDestinatario&quot;)\r\n  @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n  @JoinColumn(name = &quot;ID_DESTINATARIO&quot;, referencedColumnName = &quot;ID_DESTINATARIO&quot;, insertable = false, updatable = false)\r\n  private DestinatariosAlertasEntidad destinatario;\r\n\r\n\r\n```\r\n\r\nClass used to map the composite key is **DestinatarioSistemaKey**\r\n\r\n```\r\n@Embeddable\r\npublic class DestinatarioSistemaKey implements Serializable {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@Column(name = &quot;ID_SISTEMA&quot;)\r\n\tprivate Integer idSistema;\r\n\t\r\n\t@Column(name = &quot;ID_DESTINATARIO&quot;)\r\n\tprivate Integer idDestinatario;\r\n```\r\n\r\n**SISTEMAS entity class**:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;SISTEMAS&quot;)\r\npublic class SistemaEntidad implements Serializable {\r\n\r\n  private static final long serialVersionUID = 1L;\r\n\r\n  @Id\r\n  @Column(name = &quot;ID_SISTEMA&quot;, unique = true, nullable = false, precision = 10)\r\n  private Integer id;\r\n\r\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n  private Set&lt;SistemaMotivoEntidad&gt; motivos = new HashSet&lt;SistemaMotivoEntidad&gt;();\r\n\r\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n  private Set&lt;SistemaCausaEntidad&gt; causas = new HashSet&lt;SistemaCausaEntidad&gt;();\r\n\r\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n  private Set&lt;SistemaProblemaEntidad&gt; problemas = new HashSet&lt;SistemaProblemaEntidad&gt;();\r\n\r\n  @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n  @JoinColumn(name = &quot;ID_TIPO_SISTEMA&quot;)\r\n  private TipoSistemaEntidad tipo;\r\n\r\n```\r\n\r\nMy controller is:\r\n\r\n\r\n```\r\n@RequestMapping(value = &quot;/creaDestinatariosAlertas&quot;, method = RequestMethod.POST)\r\n  public String creaDestinatariosAlertas(\r\n      @Validated @ModelAttribute(&quot;filtro&quot;) FiltroDestinatarioSistemaAlertas usuarioAlerta,\r\n      Model model, RedirectAttributes flash, SessionStatus status, HttpServletRequest request, BindingResult result) {\r\n    \r\n    if (result.hasErrors()) {\r\n      return VISTA_CREACION_DESTINATARIOS_ALERTAS;\r\n    }\r\n    \r\n    DestinatariosAlertasEntidad entidad = new DestinatariosAlertasEntidad();\r\n    try {\r\n      entidad.setEmail(usuarioAlerta.getEmail());\r\n      entidad.setDestinatarioSistema(obtenerListaEntidad(usuarioAlerta.getSistemas(), entidad));\r\n      alertasServicio.guardarDestinatario(entidad);\r\n    } catch (Exception e) {\r\n      logger.error(&quot; Ha fallado a la hora de crear un destinatario. &quot; + e.getMessage() + &quot; - &quot; + e);\r\n    }\r\n    String mensajeFlash = (entidad.getIdDestinatario() != 0) ? &quot;Destinatario Creado con &#233;xito!&quot;\r\n        : &quot;No se ha podido crear el Destinatario.!&quot;;\r\n    flash.addFlashAttribute(SUCCESS, mensajeFlash);\r\n\r\n    // Se procede a borrar la sesion.\r\n    status.setComplete();\r\n\r\n    return OK;\r\n  }\r\n\r\n\r\n  private Set&lt;DestinatariosAlertasSistemaEntidad&gt; obtenerListaEntidad(List&lt;Integer&gt; lista, DestinatariosAlertasEntidad usuarioAlerta) {\r\n\r\n    Set&lt;DestinatariosAlertasSistemaEntidad&gt; sistemas = new HashSet&lt;DestinatariosAlertasSistemaEntidad&gt;();\r\n    \r\n    for (Integer sistemaId:lista) {\r\n      //Get sistema from DB\r\n      SistemaEntidad sistema = this.tablasServicio.buscarSistemaByIdEntidad(sistemaId);\r\n      \r\n      //Composite key creation\r\n      DestinatarioSistemaKey key = new DestinatarioSistemaKey();\r\n      key.setIdDestinatario(usuarioAlerta.getIdDestinatario());\r\n      key.setIdSistema(sistemaId);\r\n      \r\n      DestinatariosAlertasSistemaEntidad entidad = new DestinatariosAlertasSistemaEntidad();\r\n      entidad.setClave(key);\r\n      entidad.setDestinatario(usuarioAlerta);\r\n      entidad.setSistema(sistema);\r\n      entidad.setActivo(true);\r\n      \r\n      sistemas.add(entidad);\r\n    }\r\n    \r\n    return sistemas;\r\n  }\r\n\r\n```\r\nAlertasServicio is an interface for calling RepoClass. What RepoClass does is: *this.persist(destinatarioAlertasEntidad);*\r\n\r\nAny help appreciated.\r\n\r\nSorry for the spanish code!\r\n\r\nI have tried deleting cascades on SistemaEntidad , but same result.","title":"@OneToMany relationship with @EmbeddedId, giving uninitialized proxy passed to persist()","body":"<p>I have googled a lot, but I have not found any solution. Error showed in the log:</p>\n<pre><code>org.hibernate.PersistentObjectException: uninitialized proxy passed to persist()\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:99)\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:762)\n    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:755)\n    at org.hibernate.engine.spi.CascadingAction$7.cascade(CascadingAction.java:315)\n    at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:399)\n    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:342)\n    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)\n    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)\n    at org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:424)\n    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:263)\n    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)\n    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:135)\n    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)\n</code></pre>\n<p>Hibernate querys in the log:</p>\n<pre><code>(SqlStatementLogger.java:104) - insert into DEST_ALERTAS (EMAIL, ID_DESTINATARIO) values (?, ?)\n(SqlStatementLogger.java:104) - update DEST_ALERTAS_SISTEMA set ACTIVO=? where ID_DESTINATARIO=? and ID_SISTEMA=?\n</code></pre>\n<p>I am inserting a new DEST_ALERTAS, so the first insert is ok, and <strong>the update is wrong, it should also be a insert</strong>.</p>\n<p>My code:</p>\n<p><strong>DEST_ALERTAS entity</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;DEST_ALERTAS&quot;)\npublic class DestinatariosAlertasEntidad implements Serializable {\n\n \n  private static final long serialVersionUID = 1L;\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;Identificador_DEST_ALERTAS_PK&quot;)\n  @SequenceGenerator(name = &quot;Identificador_DEST_ALERTAS_PK&quot;, sequenceName = &quot;SEC_GI_DEST_ALERTAS&quot;, allocationSize = 1)\n  @Column(name = &quot;ID_DESTINATARIO&quot;, unique = true, nullable = false)\n  private int idDestinatario;\n\n  @Column(name = &quot;EMAIL&quot;, length = 100)\n  private String email;\n\n  @OneToMany(mappedBy = &quot;destinatario&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n  @JsonIgnore\n  private Set&lt;DestinatariosAlertasSistemaEntidad&gt; destinatarioSistema = new HashSet&lt;DestinatariosAlertasSistemaEntidad&gt;();\n  \n\n</code></pre>\n<p><strong>DEST_ALERTAS_SISTEMA entity</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;DEST_ALERTAS_SISTEMA&quot;)\npublic class DestinatariosAlertasSistemaEntidad implements Serializable {\n\n\n  private static final long serialVersionUID = 1L;\n  \n  @EmbeddedId\n  private DestinatarioSistemaKey clave;\n\n  @MapsId(&quot;idSistema&quot;)\n  @ManyToOne(fetch = FetchType.EAGER)\n  @JoinColumn(name = &quot;ID_SISTEMA&quot;, referencedColumnName = &quot;ID_SISTEMA&quot;, insertable = false, updatable = false)\n  private SistemaEntidad sistema;\n\n  @MapsId(&quot;idDestinatario&quot;)\n  @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n  @JoinColumn(name = &quot;ID_DESTINATARIO&quot;, referencedColumnName = &quot;ID_DESTINATARIO&quot;, insertable = false, updatable = false)\n  private DestinatariosAlertasEntidad destinatario;\n\n\n</code></pre>\n<p>Class used to map the composite key is <strong>DestinatarioSistemaKey</strong></p>\n<pre><code>@Embeddable\npublic class DestinatarioSistemaKey implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Column(name = &quot;ID_SISTEMA&quot;)\n    private Integer idSistema;\n    \n    @Column(name = &quot;ID_DESTINATARIO&quot;)\n    private Integer idDestinatario;\n</code></pre>\n<p><strong>SISTEMAS entity class</strong>:</p>\n<pre><code>@Entity\n@Table(name = &quot;SISTEMAS&quot;)\npublic class SistemaEntidad implements Serializable {\n\n  private static final long serialVersionUID = 1L;\n\n  @Id\n  @Column(name = &quot;ID_SISTEMA&quot;, unique = true, nullable = false, precision = 10)\n  private Integer id;\n\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n  private Set&lt;SistemaMotivoEntidad&gt; motivos = new HashSet&lt;SistemaMotivoEntidad&gt;();\n\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n  private Set&lt;SistemaCausaEntidad&gt; causas = new HashSet&lt;SistemaCausaEntidad&gt;();\n\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n  private Set&lt;SistemaProblemaEntidad&gt; problemas = new HashSet&lt;SistemaProblemaEntidad&gt;();\n\n  @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n  @JoinColumn(name = &quot;ID_TIPO_SISTEMA&quot;)\n  private TipoSistemaEntidad tipo;\n\n</code></pre>\n<p>My controller is:</p>\n<pre><code>@RequestMapping(value = &quot;/creaDestinatariosAlertas&quot;, method = RequestMethod.POST)\n  public String creaDestinatariosAlertas(\n      @Validated @ModelAttribute(&quot;filtro&quot;) FiltroDestinatarioSistemaAlertas usuarioAlerta,\n      Model model, RedirectAttributes flash, SessionStatus status, HttpServletRequest request, BindingResult result) {\n    \n    if (result.hasErrors()) {\n      return VISTA_CREACION_DESTINATARIOS_ALERTAS;\n    }\n    \n    DestinatariosAlertasEntidad entidad = new DestinatariosAlertasEntidad();\n    try {\n      entidad.setEmail(usuarioAlerta.getEmail());\n      entidad.setDestinatarioSistema(obtenerListaEntidad(usuarioAlerta.getSistemas(), entidad));\n      alertasServicio.guardarDestinatario(entidad);\n    } catch (Exception e) {\n      logger.error(&quot; Ha fallado a la hora de crear un destinatario. &quot; + e.getMessage() + &quot; - &quot; + e);\n    }\n    String mensajeFlash = (entidad.getIdDestinatario() != 0) ? &quot;Destinatario Creado con éxito!&quot;\n        : &quot;No se ha podido crear el Destinatario.!&quot;;\n    flash.addFlashAttribute(SUCCESS, mensajeFlash);\n\n    // Se procede a borrar la sesion.\n    status.setComplete();\n\n    return OK;\n  }\n\n\n  private Set&lt;DestinatariosAlertasSistemaEntidad&gt; obtenerListaEntidad(List&lt;Integer&gt; lista, DestinatariosAlertasEntidad usuarioAlerta) {\n\n    Set&lt;DestinatariosAlertasSistemaEntidad&gt; sistemas = new HashSet&lt;DestinatariosAlertasSistemaEntidad&gt;();\n    \n    for (Integer sistemaId:lista) {\n      //Get sistema from DB\n      SistemaEntidad sistema = this.tablasServicio.buscarSistemaByIdEntidad(sistemaId);\n      \n      //Composite key creation\n      DestinatarioSistemaKey key = new DestinatarioSistemaKey();\n      key.setIdDestinatario(usuarioAlerta.getIdDestinatario());\n      key.setIdSistema(sistemaId);\n      \n      DestinatariosAlertasSistemaEntidad entidad = new DestinatariosAlertasSistemaEntidad();\n      entidad.setClave(key);\n      entidad.setDestinatario(usuarioAlerta);\n      entidad.setSistema(sistema);\n      entidad.setActivo(true);\n      \n      sistemas.add(entidad);\n    }\n    \n    return sistemas;\n  }\n\n</code></pre>\n<p>AlertasServicio is an interface for calling RepoClass. What RepoClass does is: <em>this.persist(destinatarioAlertasEntidad);</em></p>\n<p>Any help appreciated.</p>\n<p>Sorry for the spanish code!</p>\n<p>I have tried deleting cascades on SistemaEntidad , but same result.</p>\n"},{"tags":["java","android","android-studio","geolocation"],"owner":{"account_id":27627208,"reputation":1,"user_id":21086974,"display_name":"nimesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674741106,"creation_date":1674741106,"question_id":75247033,"body_markdown":"i want my app to sent message with cordinates even when my app is not in ram \r\n\r\n\r\n```\r\npublic class ReceiveSms extends BroadcastReceiver {\r\n    FusedLocationProviderClient fusedLocationProviderClient;\r\n    SmsManager mySmsManager = SmsManager.getDefault();\r\n    final String password = &quot;pass&quot;;\r\n\r\n\r\n    @Override\r\n    public void onReceive(Context context, @NonNull Intent intent) {\r\n        fusedLocationProviderClient = LocationServices.getFusedLocationProviderClient(context);\r\n\r\n\r\n        Bundle b = intent.getExtras();\r\n        if (intent.getAction().equalsIgnoreCase(&quot;android.provider.Telephony.SMS_RECEIVED&quot;)) {\r\n            Toast.makeText(context, &quot;SmsReceived!&quot;, Toast.LENGTH_SHORT).show();\r\n            if (b != null) {\r\n\r\n                final Object[] pdusObj = (Object[]) b.get(&quot;pdus&quot;);\r\n                SmsMessage[] messages = new SmsMessage[pdusObj.length];\r\n                for (int i = 0; i &lt; messages.length; i++) {\r\n                    String format = b.getString(&quot;format&quot;);\r\n                    messages[i] = SmsMessage.createFromPdu((byte[]) pdusObj[i], format);\r\n                    ///SmsMessage currentMessage = SmsMessage.createFromPdu((byte[]) pdusObj[i]);\r\n                    String senderNum = messages[i].getOriginatingAddress();\r\n                    String message = messages[i].getMessageBody();//\r\n                    String[] messagess = message.split(&quot; &quot;);\r\n                    if (messagess[0].equalsIgnoreCase(&quot;myhelper&quot;)&amp;&amp;messagess[1].equalsIgnoreCase(password)) {\r\n\r\n                        SmsManager mySmsManager = SmsManager.getDefault();\r\n                        Toast.makeText(context, senderNum + &quot;:&quot; + message, Toast.LENGTH_SHORT).show();\r\n\r\n                        //location\r\n                        if (messagess[2].equalsIgnoreCase(&quot;location&quot;)) {\r\n                            setlocation(senderNum, context);\r\n\r\n                        }\r\n                        else {\r\n                        Toast.makeText(context, &quot;message not found&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nthis is my location function\r\n\r\n\r\n```\r\npublic void setlocation(String phno, Context context) {\r\n\r\n        Toast.makeText(context, &quot;null1&quot;, Toast.LENGTH_SHORT).show();\r\n        final String[] cordinates = new String[2];\r\n        LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\r\n        Toast.makeText(context, &quot;null2&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) || locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {\r\n            Toast.makeText(context, &quot;null3&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n            fusedLocationProviderClient.getLastLocation().addOnCompleteListener(task -&gt; {\r\n                Location location = task.getResult();\r\n                if (location != null) {\r\n\r\n\r\n                    Toast.makeText(context,&quot; null 7&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                    mySmsManager.sendTextMessage(phno, null, &quot;latitude = &quot; + location.getLatitude() + &quot; longitude = &quot; + location.getLongitude() + &quot;1&quot;, null, null);\r\n                    Toast.makeText(context,&quot; null 8&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                } else {\r\n                    Toast.makeText(context, &quot;null4&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                    LocationRequest locationRequest = LocationRequest.create().setPriority(Priority.PRIORITY_HIGH_ACCURACY).setInterval(10000).setFastestInterval(1000).setNumUpdates(1);\r\n                    LocationCallback locationCallback = new LocationCallback() {\r\n\r\n\r\n                        public void onLocationResult(@NonNull LocationResult locationResult) {\r\n                            Location location1 = locationResult.getLastLocation();\r\n\r\n\r\n                            cordinates[0] = String.valueOf(location1.getLatitude());\r\n                            cordinates[1] = String.valueOf(location1.getLongitude());\r\n                            String messages = &quot;latitude = &quot; + cordinates[0] + &quot; longitude = &quot; + cordinates[1] + &quot;2&quot;;\r\n\r\n                            Toast.makeText(context, messages, Toast.LENGTH_SHORT).show();\r\n\r\n                            SmsManager mySmsManager = SmsManager.getDefault();\r\n                            mySmsManager.sendTextMessage(phno, null, messages, null, null);\r\n\r\n\r\n                        }\r\n\r\n                    };\r\n                    fusedLocationProviderClient.requestLocationUpdates(locationRequest, locationCallback, Looper.myLooper());\r\n                }\r\n            });\r\n\r\n        } else {\r\n            Toast.makeText(context, &quot;null5&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n            context.startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK));\r\n        }\r\n\r\n    }\r\n```\r\nyou can sell full code in this github repository : https://github.com/Nimeshchandegra/android-spottr.git\r\n\r\nwell I am currently new to android studio so can someone help\r\n\r\n\r\ncurrently the app is sending message with cordinates if the app is on(not even working in background )","title":"want to send location cordinates using text message whenever i get a specific message","body":"<p>i want my app to sent message with cordinates even when my app is not in ram</p>\n<pre><code>public class ReceiveSms extends BroadcastReceiver {\n    FusedLocationProviderClient fusedLocationProviderClient;\n    SmsManager mySmsManager = SmsManager.getDefault();\n    final String password = &quot;pass&quot;;\n\n\n    @Override\n    public void onReceive(Context context, @NonNull Intent intent) {\n        fusedLocationProviderClient = LocationServices.getFusedLocationProviderClient(context);\n\n\n        Bundle b = intent.getExtras();\n        if (intent.getAction().equalsIgnoreCase(&quot;android.provider.Telephony.SMS_RECEIVED&quot;)) {\n            Toast.makeText(context, &quot;SmsReceived!&quot;, Toast.LENGTH_SHORT).show();\n            if (b != null) {\n\n                final Object[] pdusObj = (Object[]) b.get(&quot;pdus&quot;);\n                SmsMessage[] messages = new SmsMessage[pdusObj.length];\n                for (int i = 0; i &lt; messages.length; i++) {\n                    String format = b.getString(&quot;format&quot;);\n                    messages[i] = SmsMessage.createFromPdu((byte[]) pdusObj[i], format);\n                    ///SmsMessage currentMessage = SmsMessage.createFromPdu((byte[]) pdusObj[i]);\n                    String senderNum = messages[i].getOriginatingAddress();\n                    String message = messages[i].getMessageBody();//\n                    String[] messagess = message.split(&quot; &quot;);\n                    if (messagess[0].equalsIgnoreCase(&quot;myhelper&quot;)&amp;&amp;messagess[1].equalsIgnoreCase(password)) {\n\n                        SmsManager mySmsManager = SmsManager.getDefault();\n                        Toast.makeText(context, senderNum + &quot;:&quot; + message, Toast.LENGTH_SHORT).show();\n\n                        //location\n                        if (messagess[2].equalsIgnoreCase(&quot;location&quot;)) {\n                            setlocation(senderNum, context);\n\n                        }\n                        else {\n                        Toast.makeText(context, &quot;message not found&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n<p>this is my location function</p>\n<pre><code>public void setlocation(String phno, Context context) {\n\n        Toast.makeText(context, &quot;null1&quot;, Toast.LENGTH_SHORT).show();\n        final String[] cordinates = new String[2];\n        LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\n        Toast.makeText(context, &quot;null2&quot;, Toast.LENGTH_SHORT).show();\n\n        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) || locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {\n            Toast.makeText(context, &quot;null3&quot;, Toast.LENGTH_SHORT).show();\n\n            fusedLocationProviderClient.getLastLocation().addOnCompleteListener(task -&gt; {\n                Location location = task.getResult();\n                if (location != null) {\n\n\n                    Toast.makeText(context,&quot; null 7&quot;, Toast.LENGTH_SHORT).show();\n\n                    mySmsManager.sendTextMessage(phno, null, &quot;latitude = &quot; + location.getLatitude() + &quot; longitude = &quot; + location.getLongitude() + &quot;1&quot;, null, null);\n                    Toast.makeText(context,&quot; null 8&quot;, Toast.LENGTH_SHORT).show();\n\n                } else {\n                    Toast.makeText(context, &quot;null4&quot;, Toast.LENGTH_SHORT).show();\n\n                    LocationRequest locationRequest = LocationRequest.create().setPriority(Priority.PRIORITY_HIGH_ACCURACY).setInterval(10000).setFastestInterval(1000).setNumUpdates(1);\n                    LocationCallback locationCallback = new LocationCallback() {\n\n\n                        public void onLocationResult(@NonNull LocationResult locationResult) {\n                            Location location1 = locationResult.getLastLocation();\n\n\n                            cordinates[0] = String.valueOf(location1.getLatitude());\n                            cordinates[1] = String.valueOf(location1.getLongitude());\n                            String messages = &quot;latitude = &quot; + cordinates[0] + &quot; longitude = &quot; + cordinates[1] + &quot;2&quot;;\n\n                            Toast.makeText(context, messages, Toast.LENGTH_SHORT).show();\n\n                            SmsManager mySmsManager = SmsManager.getDefault();\n                            mySmsManager.sendTextMessage(phno, null, messages, null, null);\n\n\n                        }\n\n                    };\n                    fusedLocationProviderClient.requestLocationUpdates(locationRequest, locationCallback, Looper.myLooper());\n                }\n            });\n\n        } else {\n            Toast.makeText(context, &quot;null5&quot;, Toast.LENGTH_SHORT).show();\n\n            context.startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK));\n        }\n\n    }\n</code></pre>\n<p>you can sell full code in this github repository : <a href=\"https://github.com/Nimeshchandegra/android-spottr.git\" rel=\"nofollow noreferrer\">https://github.com/Nimeshchandegra/android-spottr.git</a></p>\n<p>well I am currently new to android studio so can someone help</p>\n<p>currently the app is sending message with cordinates if the app is on(not even working in background )</p>\n"},{"tags":["java","spring","reactive"],"comments":[{"owner":{"account_id":27619142,"reputation":11,"user_id":21080621,"display_name":"truongt2"},"score":0,"creation_date":1674855878,"post_id":75246809,"comment_id":132810241,"body_markdown":"Is there anyone has information about this?","body":"Is there anyone has information about this?"}],"owner":{"account_id":27619142,"reputation":11,"user_id":21080621,"display_name":"truongt2"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674740858,"creation_date":1674739882,"question_id":75246809,"body_markdown":"I am using Spring boot to implement reactive micro-services. However, the reactive code is never executed in lambda function. My implementation as below. publishEventScheduler is created during application start-up. I am using this code together with Kafka to send an event to user micro-service to create user.\r\n\r\nMainServiceApplication.java\r\n```\r\n\r\npublic class MainServiceApplication {\r\n\tprivate final Integer threadPoolSize;\r\n\tprivate final Integer taskQueueSize;\r\n\r\n\tpublic MainServiceApplication(\r\n\t\t@Value(&quot;${app.threadPoolSize:10}&quot;) Integer threadPoolSize,\r\n\t\t@Value(&quot;${app.taskQueueSize:100}&quot;) Integer taskQueueSize) {\r\n\t\tthis.threadPoolSize = threadPoolSize;\r\n\t\tthis.taskQueueSize = taskQueueSize;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic Scheduler publishEventScheduler() {\r\n\t\tLOG.info(&quot;Creating a message scheduler with connectionPoolSize = {}&quot;, threadPoolSize);\r\n\t\treturn Schedulers.newBoundedElastic(threadPoolSize, taskQueueSize, &quot;publish-pool&quot;);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(MainServiceApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nMainIntegration.java\r\nthe function createUser() is called with a POST request from Postman (break point stop at subscribeOn(publishEventScheduler)) but sendMessageUser() is never executed (break point in the function not working) \r\n```\r\n@Component\r\npublic class MainIntegration implements UserService, TodoService {\r\n    private final String todoServiceUrl;\r\n    private final String userServiceUrl;\r\n\r\n    private final WebClient webClient;\r\n    private final StreamBridge streamBridge;\r\n    private final Scheduler publishEventScheduler;\r\n\r\n    public MainIntegration(\r\n        @Qualifier(&quot;publishEventScheduler&quot;) Scheduler publishEventScheduler,\r\n\r\n        WebClient.Builder webClient,\r\n        StreamBridge streamBridge,\r\n\r\n        @Value(&quot;${app.user-service.host}&quot;) String userServiceHost,\r\n        @Value(&quot;${app.user-service.port}&quot;) int userServicePort\r\n    ) {\r\n        this.publishEventScheduler = publishEventScheduler;\r\n        this.webClient = webClient.build();\r\n        this.streamBridge = streamBridge;\r\n\r\n        userServiceUrl = &quot;http://&quot; + userServiceHost + &quot;:&quot; + userServicePort + &quot;/user&quot;;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;User&gt; createUser(User body) {\r\n        return Mono.fromCallable(() -&gt; {\r\n            sendMessageUser(&quot;user-out-0&quot;, new Event&lt;Event.Type, String, User &gt;(Event.Type.CREATE, body.getUserName(), body));\r\n            return body;\r\n        }).subscribeOn(publishEventScheduler);\r\n    }\r\n\r\n    private void sendMessageUser(String bindingName, Event&lt;Type, String, User&gt; event) {\r\n        LOG.debug(&quot;Sending a {} message to {}&quot;, bindingName, event.getEventType());\r\n        Message&lt;Event&lt;Type, String, User&gt;&gt; message = MessageBuilder.withPayload(event)\r\n            .setHeader(&quot;partitionKey&quot;, event.getKey())\r\n            .build();\r\n        streamBridge.send(bindingName, message);\r\n    }\r\n```\r\n\r\napplication.yaml\r\n\r\n```\r\nserver.port: 7000\r\nserver.error.include-message: always\r\n\r\napp:\r\n  user-service:\r\n    host: localhost\r\n    port: 7002\r\n\r\nspring:\r\n  cloud:\r\n    stream:\r\n      default-binder: kafka\r\n      default-contentType: application/json\r\n      bindings:\r\n        user-out-0:\r\n          destination: user-service\r\n          producer:\r\n            required-groups: auditGroup\r\n\r\n      kafka:\r\n        binder:\r\n          brokers: 127.0.0.1\r\n          defaultBrokerPort: 2181\r\n      rabbitmq:\r\n        host: 127.0.0.1\r\n        port: 5672\r\n        username: guest\r\n        password: guest\r\n\r\n```\r\n","title":"Why the the reactive code is not executed in spring-boot?","body":"<p>I am using Spring boot to implement reactive micro-services. However, the reactive code is never executed in lambda function. My implementation as below. publishEventScheduler is created during application start-up. I am using this code together with Kafka to send an event to user micro-service to create user.</p>\n<p>MainServiceApplication.java</p>\n<pre><code>\npublic class MainServiceApplication {\n    private final Integer threadPoolSize;\n    private final Integer taskQueueSize;\n\n    public MainServiceApplication(\n        @Value(&quot;${app.threadPoolSize:10}&quot;) Integer threadPoolSize,\n        @Value(&quot;${app.taskQueueSize:100}&quot;) Integer taskQueueSize) {\n        this.threadPoolSize = threadPoolSize;\n        this.taskQueueSize = taskQueueSize;\n    }\n\n    @Bean\n    public Scheduler publishEventScheduler() {\n        LOG.info(&quot;Creating a message scheduler with connectionPoolSize = {}&quot;, threadPoolSize);\n        return Schedulers.newBoundedElastic(threadPoolSize, taskQueueSize, &quot;publish-pool&quot;);\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(MainServiceApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>MainIntegration.java\nthe function createUser() is called with a POST request from Postman (break point stop at subscribeOn(publishEventScheduler)) but sendMessageUser() is never executed (break point in the function not working)</p>\n<pre><code>@Component\npublic class MainIntegration implements UserService, TodoService {\n    private final String todoServiceUrl;\n    private final String userServiceUrl;\n\n    private final WebClient webClient;\n    private final StreamBridge streamBridge;\n    private final Scheduler publishEventScheduler;\n\n    public MainIntegration(\n        @Qualifier(&quot;publishEventScheduler&quot;) Scheduler publishEventScheduler,\n\n        WebClient.Builder webClient,\n        StreamBridge streamBridge,\n\n        @Value(&quot;${app.user-service.host}&quot;) String userServiceHost,\n        @Value(&quot;${app.user-service.port}&quot;) int userServicePort\n    ) {\n        this.publishEventScheduler = publishEventScheduler;\n        this.webClient = webClient.build();\n        this.streamBridge = streamBridge;\n\n        userServiceUrl = &quot;http://&quot; + userServiceHost + &quot;:&quot; + userServicePort + &quot;/user&quot;;\n    }\n\n    @Override\n    public Mono&lt;User&gt; createUser(User body) {\n        return Mono.fromCallable(() -&gt; {\n            sendMessageUser(&quot;user-out-0&quot;, new Event&lt;Event.Type, String, User &gt;(Event.Type.CREATE, body.getUserName(), body));\n            return body;\n        }).subscribeOn(publishEventScheduler);\n    }\n\n    private void sendMessageUser(String bindingName, Event&lt;Type, String, User&gt; event) {\n        LOG.debug(&quot;Sending a {} message to {}&quot;, bindingName, event.getEventType());\n        Message&lt;Event&lt;Type, String, User&gt;&gt; message = MessageBuilder.withPayload(event)\n            .setHeader(&quot;partitionKey&quot;, event.getKey())\n            .build();\n        streamBridge.send(bindingName, message);\n    }\n</code></pre>\n<p>application.yaml</p>\n<pre><code>server.port: 7000\nserver.error.include-message: always\n\napp:\n  user-service:\n    host: localhost\n    port: 7002\n\nspring:\n  cloud:\n    stream:\n      default-binder: kafka\n      default-contentType: application/json\n      bindings:\n        user-out-0:\n          destination: user-service\n          producer:\n            required-groups: auditGroup\n\n      kafka:\n        binder:\n          brokers: 127.0.0.1\n          defaultBrokerPort: 2181\n      rabbitmq:\n        host: 127.0.0.1\n        port: 5672\n        username: guest\n        password: guest\n\n</code></pre>\n"},{"tags":["java","maven","quarkus","bitbucket-pipelines","azure-container-registry"],"owner":{"account_id":9109578,"reputation":1,"user_id":6778812,"display_name":"Zalo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674740827,"creation_date":1674740827,"question_id":75246993,"body_markdown":"I have used Quarkus and bitbucket pipelines for more than 2 years and it normally functions very well. From Quarkus version 2.15 I got a problem when pushing the tag/container to Azure Container Registry. The error is:\r\n\r\n\r\n```\r\n [io.quarkus.deployment.util.ExecUtil] tag does not exist: my-company.azurecr.io/my-app:1.2.30\r\n```\r\n\r\nThe only difference from when it functions is that the Quarkus version is 2.15 and 2.16.\r\n\r\nHere is the pipeline:\r\n\r\n\r\n```\r\nimage: maven:3.8.7\r\npipelines:\r\n  branches:\r\n    master:\r\n      - step:\r\n          size: 2x\r\n          name: Build and Deploy Artifacts\r\n          caches:\r\n            - maven\r\n            - docker\r\n          services:\r\n            - docker\r\n          script:\r\n            - git config --global user.email &quot;pipeline@bitbucket.com&quot;\r\n            - git config --global user.name &quot;Bitbucket Pipeline&quot;\r\n            - git remote set-url origin ${BITBUCKET_GIT_SSH_ORIGIN}\r\n\r\n            - docker login my-company.azurecr.io -u $AZURE_CLIENT_ID --password $AZURE_SECRET\r\n\r\n            - mvn -B -DdryRun=true release:prepare -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN}\r\n            - mvn -B release:clean release:prepare -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN} -DscmCommentPrefix=&quot;[skip ci] &quot; -Darguments=&quot;-Dmaven.test.skip=true&quot;\r\n            - mvn -B release:perform -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN} -DscmCommentPrefix=&quot;[skip ci] &quot; -Darguments=&quot;-Dmaven.deploy.skip=true -Dmaven.test.skip=true -Pnative -Dquarkus.native.container-build=true -Dquarkus.container-image.push=true -Dquarkus.native.native-image-xmx=4g -Dquarkus.container-image.additional-tags=latest&quot;\r\n            - git status\r\n            - git push\r\n\r\ndefinitions:\r\n  services:\r\n    docker:\r\n      memory: 7100\r\n```\r\n\r\n\r\nStack trace:\r\n\r\n\r\n```\r\n[INFO] [INFO] [io.quarkus.deployment.util.ExecUtil] tag does not exist: my-company.azurecr.io/my-app:1.2.30\r\n[INFO] [INFO] ------------------------------------------------------------------------\r\n[INFO] [INFO] BUILD FAILURE\r\n[INFO] [INFO] ------------------------------------------------------------------------\r\n[INFO] [INFO] Total time:  04:50 min\r\n[INFO] [INFO] Finished at: 2023-01-26T10:43:00Z\r\n[INFO] [INFO] ------------------------------------------------------------------------\r\n[INFO] [ERROR] Failed to execute goal io.quarkus.platform:quarkus-maven-plugin:2.16.0.Final:build (default) on project integration-experian: Failed to build quarkus application: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n[INFO] [ERROR] \t[error]: Build step io.quarkus.container.image.docker.deployment.DockerProcessor#dockerBuildFromNativeImage threw an exception: java.lang.RuntimeException: Execution of &#39;docker push $ACR_HELM_REPOinsight.azurecr.io/si-integration-experian:1.2.30&#39; failed. See docker output for more details\r\n[INFO] [ERROR] \tat io.quarkus.container.image.docker.deployment.DockerProcessor.dockerException(DockerProcessor.java:338)\r\n[INFO] [ERROR] \tat io.quarkus.container.image.docker.deployment.DockerProcessor.pushImage(DockerProcessor.java:331)\r\n[INFO] [ERROR] \tat io.quarkus.container.image.docker.deployment.DockerProcessor.lambda$createContainerImage$3(DockerProcessor.java:229)\r\n[INFO] [ERROR] \tat java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)\r\n[INFO] [ERROR] \tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n[INFO] [ERROR] \tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n[INFO] [ERROR] \tat io.quarkus.container.image.docker.deployment.DockerProcessor.createContainerImage(DockerProcessor.java:229)\r\n[INFO] [ERROR] \tat io.quarkus.container.image.docker.deployment.DockerProcessor.dockerBuildFromNativeImage(DockerProcessor.java:153)\r\n[INFO] [ERROR] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n[INFO] [ERROR] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n[INFO] [ERROR] \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n[INFO] [ERROR] \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n[INFO] [ERROR] \tat io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:909)\r\n[INFO] [ERROR] \tat io.quarkus.builder.BuildContext.run(BuildContext.java:281)\r\n[INFO] [ERROR] \tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n[INFO] [ERROR] \tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n[INFO] [ERROR] \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n[INFO] [ERROR] \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n[INFO] [ERROR] \tat org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n[INFO] [ERROR] -&gt; [Help 1]\r\n[INFO] [ERROR] \r\n[INFO] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[INFO] [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[INFO] [ERROR] \r\n[INFO] [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[INFO] [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n```\r\n\r\n\r\nI just tried to build the Quarkus app using bitbucket pipeline and push it to ACR.","title":"Error: &quot;tag does not exist&quot; when using maven release:perform to push container to ACR in bitbucket pipelines","body":"<p>I have used Quarkus and bitbucket pipelines for more than 2 years and it normally functions very well. From Quarkus version 2.15 I got a problem when pushing the tag/container to Azure Container Registry. The error is:</p>\n<pre><code> [io.quarkus.deployment.util.ExecUtil] tag does not exist: my-company.azurecr.io/my-app:1.2.30\n</code></pre>\n<p>The only difference from when it functions is that the Quarkus version is 2.15 and 2.16.</p>\n<p>Here is the pipeline:</p>\n<pre><code>image: maven:3.8.7\npipelines:\n  branches:\n    master:\n      - step:\n          size: 2x\n          name: Build and Deploy Artifacts\n          caches:\n            - maven\n            - docker\n          services:\n            - docker\n          script:\n            - git config --global user.email &quot;pipeline@bitbucket.com&quot;\n            - git config --global user.name &quot;Bitbucket Pipeline&quot;\n            - git remote set-url origin ${BITBUCKET_GIT_SSH_ORIGIN}\n\n            - docker login my-company.azurecr.io -u $AZURE_CLIENT_ID --password $AZURE_SECRET\n\n            - mvn -B -DdryRun=true release:prepare -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN}\n            - mvn -B release:clean release:prepare -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN} -DscmCommentPrefix=&quot;[skip ci] &quot; -Darguments=&quot;-Dmaven.test.skip=true&quot;\n            - mvn -B release:perform -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN} -DscmCommentPrefix=&quot;[skip ci] &quot; -Darguments=&quot;-Dmaven.deploy.skip=true -Dmaven.test.skip=true -Pnative -Dquarkus.native.container-build=true -Dquarkus.container-image.push=true -Dquarkus.native.native-image-xmx=4g -Dquarkus.container-image.additional-tags=latest&quot;\n            - git status\n            - git push\n\ndefinitions:\n  services:\n    docker:\n      memory: 7100\n</code></pre>\n<p>Stack trace:</p>\n<pre><code>[INFO] [INFO] [io.quarkus.deployment.util.ExecUtil] tag does not exist: my-company.azurecr.io/my-app:1.2.30\n[INFO] [INFO] ------------------------------------------------------------------------\n[INFO] [INFO] BUILD FAILURE\n[INFO] [INFO] ------------------------------------------------------------------------\n[INFO] [INFO] Total time:  04:50 min\n[INFO] [INFO] Finished at: 2023-01-26T10:43:00Z\n[INFO] [INFO] ------------------------------------------------------------------------\n[INFO] [ERROR] Failed to execute goal io.quarkus.platform:quarkus-maven-plugin:2.16.0.Final:build (default) on project integration-experian: Failed to build quarkus application: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\n[INFO] [ERROR]  [error]: Build step io.quarkus.container.image.docker.deployment.DockerProcessor#dockerBuildFromNativeImage threw an exception: java.lang.RuntimeException: Execution of 'docker push $ACR_HELM_REPOinsight.azurecr.io/si-integration-experian:1.2.30' failed. See docker output for more details\n[INFO] [ERROR]  at io.quarkus.container.image.docker.deployment.DockerProcessor.dockerException(DockerProcessor.java:338)\n[INFO] [ERROR]  at io.quarkus.container.image.docker.deployment.DockerProcessor.pushImage(DockerProcessor.java:331)\n[INFO] [ERROR]  at io.quarkus.container.image.docker.deployment.DockerProcessor.lambda$createContainerImage$3(DockerProcessor.java:229)\n[INFO] [ERROR]  at java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)\n[INFO] [ERROR]  at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n[INFO] [ERROR]  at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n[INFO] [ERROR]  at io.quarkus.container.image.docker.deployment.DockerProcessor.createContainerImage(DockerProcessor.java:229)\n[INFO] [ERROR]  at io.quarkus.container.image.docker.deployment.DockerProcessor.dockerBuildFromNativeImage(DockerProcessor.java:153)\n[INFO] [ERROR]  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[INFO] [ERROR]  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n[INFO] [ERROR]  at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[INFO] [ERROR]  at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n[INFO] [ERROR]  at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:909)\n[INFO] [ERROR]  at io.quarkus.builder.BuildContext.run(BuildContext.java:281)\n[INFO] [ERROR]  at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n[INFO] [ERROR]  at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\n[INFO] [ERROR]  at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\n[INFO] [ERROR]  at java.base/java.lang.Thread.run(Thread.java:833)\n[INFO] [ERROR]  at org.jboss.threads.JBossThread.run(JBossThread.java:501)\n[INFO] [ERROR] -&gt; [Help 1]\n[INFO] [ERROR] \n[INFO] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[INFO] [ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[INFO] [ERROR] \n[INFO] [ERROR] For more information about the errors and possible solutions, please read the following articles:\n[INFO] [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p>I just tried to build the Quarkus app using bitbucket pipeline and push it to ACR.</p>\n"},{"tags":["java","amazon-ec2","jboss","wildfly","cicd"],"owner":{"account_id":26434968,"reputation":45,"user_id":20080481,"display_name":"User01"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674740695,"creation_date":1674740695,"question_id":75246965,"body_markdown":"I&#39;m trying do deploy a java spring project on ec2 but the deployment fails.\r\nOn Jenkins I get this message:\r\n\r\n    &quot;Failed to connect to the host via ssh: Shared connection to *ip* closed.&quot;, &quot;unreachable&quot;: true\r\n\r\nchecking the server logs, I found this error:\r\n\r\n    ERROR [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0022: \r\n    Deploy of deployment &quot;*.war&quot; was rolled back with no failure message","title":"deployment &quot;.war&quot; was rolled back with no failure message","body":"<p>I'm trying do deploy a java spring project on ec2 but the deployment fails.\nOn Jenkins I get this message:</p>\n<pre><code>&quot;Failed to connect to the host via ssh: Shared connection to *ip* closed.&quot;, &quot;unreachable&quot;: true\n</code></pre>\n<p>checking the server logs, I found this error:</p>\n<pre><code>ERROR [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0022: \nDeploy of deployment &quot;*.war&quot; was rolled back with no failure message\n</code></pre>\n"},{"tags":["java","java-ee-8"],"comments":[{"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"score":0,"creation_date":1674738210,"post_id":75246450,"comment_id":132780301,"body_markdown":"Why you convert byte[] to String with new String(bytes) ? Maybe try to avoid that.","body":"Why you convert byte[] to String with new String(bytes) ? Maybe try to avoid that."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":1,"creation_date":1674738836,"post_id":75246450,"comment_id":132780512,"body_markdown":"W**? `new String(bytes)`","body":"W**? <code>new String(bytes)</code>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1674742611,"post_id":75246450,"comment_id":132781788,"body_markdown":"As Thomas said, `new String(bytes)` *corrupts your data.*  Java is not C.  A Java String is *not* a holder of bytes; it holds text.  If you want to send bytes, always send them as a byte array, not as a String.","body":"As Thomas said, <code>new String(bytes)</code> <i>corrupts your data.</i>  Java is not C.  A Java String is <i>not</i> a holder of bytes; it holds text.  If you want to send bytes, always send them as a byte array, not as a String."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674740544,"creation_date":1674740544,"answer_id":75246945,"question_id":75246450,"body_markdown":"A zip file is not a string. You should drop the round trip from byte array to string and back to byte array.\r\n\r\nDeclare your `sendFile()` method as\r\n\r\n    public default void sendFile(byte[] content, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\r\n        response.setContentType(type.getExpression());\r\n        response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + FileUtils.encodeForFileName(fileName) + &quot;.&quot; + extension.getExtension() + &quot;\\&quot;&quot;);\r\n        OutputStream out = response.getOutputStream();\r\n        out.write(content);\r\n        out.flush();\r\n        out.close();\r\n    }\r\n\r\nAnd call it as\r\n\r\n    sendFile(bytes, fileName, extension, type, response);\r\n\r\nThe problem with your approach is that `new String(content).getBytes()` does not return a byte array with the same content as you started with.","title":"Corrupted Zip File , sent to the client side , java ee","body":"<p>A zip file is not a string. You should drop the round trip from byte array to string and back to byte array.</p>\n<p>Declare your <code>sendFile()</code> method as</p>\n<pre><code>public default void sendFile(byte[] content, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\n    response.setContentType(type.getExpression());\n    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + FileUtils.encodeForFileName(fileName) + &quot;.&quot; + extension.getExtension() + &quot;\\&quot;&quot;);\n    OutputStream out = response.getOutputStream();\n    out.write(content);\n    out.flush();\n    out.close();\n}\n</code></pre>\n<p>And call it as</p>\n<pre><code>sendFile(bytes, fileName, extension, type, response);\n</code></pre>\n<p>The problem with your approach is that <code>new String(content).getBytes()</code> does not return a byte array with the same content as you started with.</p>\n"}],"owner":{"account_id":27625844,"reputation":11,"user_id":21085855,"display_name":"loupTerawatt"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1674740544,"creation_date":1674737884,"question_id":75246450,"body_markdown":"I&#39;m currently developping on a webserver for my company , and i&#39;am facing a corrupted zip file problem. At the end of a servlet. Here&#39;s the function header called at the very end of the servlet.\r\n\r\n```\r\nsendFile(directory, &quot;s&quot; + this.optimizerId + &quot;-&quot; + this.optimizerName + &quot;-&quot; + start.toDate(Defs.DB.DATE_PATTERN) + &quot;-&quot; + end.toDate(Defs.DB.DATE_PATTERN), FileExtension.NONE, ContentType.ZIP, response);\r\n```\r\n\r\nHere is the first send File function ...\r\n\r\n```\r\npublic default void sendFile(File file, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\r\n\tif(type == ContentType.ZIP) {\r\n\t\tString[] files = file.list();\r\n\t\tif(files != null &amp;&amp; files.length &gt; 0) {\r\n\t\t\tbyte[] bytes = FileUtils.getZipBytes(file, files);\r\n\t\t\tsendFile(new String(bytes), fileName, extension, type, response);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nThe &quot;FileUtils.getZipBytes(file, files)&quot; function is doing fine , it returns a byteArray.\r\nI even tried to create a zip file with ZipOutputStream a File , and on the server , the zip has litterally no problem.\r\n( I will send the source code of this function if you think it&#39;s important , but i don&#39;t want to add useless complexity ).\r\n\r\nThen , here&#39;s the code of the second sendFile function that is called from the first one.\r\n\r\n```\r\npublic default void sendFile(String content, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\r\n\tresponse.setContentType(type.getExpression());\r\n\tresponse.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + FileUtils.encodeForFileName(fileName) + &quot;.&quot; + extension.getExtension() + &quot;\\&quot;&quot;);\r\n\tOutputStream out = response.getOutputStream();\r\n\tout.write(content.getBytes());\r\n\tout.flush();\r\n\tout.close();\r\n}\r\n```\r\n\r\nDo you see any problem in these functions ?\r\n\r\nThe zip file is downloaded from the server. He is not empty (about 15.7KB).\r\nBut when i try to open it , the file explorer of Fedora tell me that the file is corrupted.\r\n\r\nI also tried to use the unzip command on the file , and i have the following error message.\r\n\r\n```\r\nArchive:  s192-Syst&#232;me U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip\r\n\r\ncaution:  zipfile comment truncated\r\nerror [s192-Syst&#232;me U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip]:  missing 3249308257 bytes in zipfile\r\n  (attempting to process anyway)\r\nerror [s192-Syst&#232;me U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip]:  attempt to seek before beginning of zipfile\r\n  (please check that you have transferred or created the zipfile in the\r\n  appropriate BINARY mode and that you have compiled UnZip properly)\r\n```\r\n\r\nI thought it may be the FileUtils.getZipBytes(file, files) that returns a corrupted ByteArray. But i really don&#39;t think it is ... Here&#39;s the source code of this function\r\n\r\n```\r\n\tpublic static byte[] getZipBytes(File directory, String[] files) throws IOException {\r\n\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\tZipOutputStream zos = new ZipOutputStream(baos);\r\n\t\tbyte bytes[] = new byte[2048];\r\n\t\tfor (String fileName : files) {\r\n\t\t\tFileInputStream fis = new FileInputStream(directory.getPath() + \r\n\t\t\t\t\tSystem.getProperty(&quot;file.separator&quot;) + fileName);\r\n\t\t\tBufferedInputStream bis = new BufferedInputStream(fis);\r\n\t\t\tzos.putNextEntry(new ZipEntry(fileName));\r\n\t\t\tint bytesRead;\r\n\t\t\twhile ((bytesRead = bis.read(bytes)) != -1) {\r\n\t\t\t\tzos.write(bytes, 0, bytesRead);\r\n\t\t\t}\r\n\t\t\tzos.closeEntry();\r\n\t\t\tbis.close();\r\n\t\t\tfis.close();\r\n\t\t}\r\n\t\tzos.flush();\r\n\t\tbaos.flush();\r\n\t\tzos.close();\r\n\t\tbaos.close();\r\n\t\treturn baos.toByteArray();\r\n}\r\n```","title":"Corrupted Zip File , sent to the client side , java ee","body":"<p>I'm currently developping on a webserver for my company , and i'am facing a corrupted zip file problem. At the end of a servlet. Here's the function header called at the very end of the servlet.</p>\n<pre><code>sendFile(directory, &quot;s&quot; + this.optimizerId + &quot;-&quot; + this.optimizerName + &quot;-&quot; + start.toDate(Defs.DB.DATE_PATTERN) + &quot;-&quot; + end.toDate(Defs.DB.DATE_PATTERN), FileExtension.NONE, ContentType.ZIP, response);\n</code></pre>\n<p>Here is the first send File function ...</p>\n<pre><code>public default void sendFile(File file, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\n    if(type == ContentType.ZIP) {\n        String[] files = file.list();\n        if(files != null &amp;&amp; files.length &gt; 0) {\n            byte[] bytes = FileUtils.getZipBytes(file, files);\n            sendFile(new String(bytes), fileName, extension, type, response);\n        }\n    }\n}\n</code></pre>\n<p>The &quot;FileUtils.getZipBytes(file, files)&quot; function is doing fine , it returns a byteArray.\nI even tried to create a zip file with ZipOutputStream a File , and on the server , the zip has litterally no problem.\n( I will send the source code of this function if you think it's important , but i don't want to add useless complexity ).</p>\n<p>Then , here's the code of the second sendFile function that is called from the first one.</p>\n<pre><code>public default void sendFile(String content, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\n    response.setContentType(type.getExpression());\n    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + FileUtils.encodeForFileName(fileName) + &quot;.&quot; + extension.getExtension() + &quot;\\&quot;&quot;);\n    OutputStream out = response.getOutputStream();\n    out.write(content.getBytes());\n    out.flush();\n    out.close();\n}\n</code></pre>\n<p>Do you see any problem in these functions ?</p>\n<p>The zip file is downloaded from the server. He is not empty (about 15.7KB).\nBut when i try to open it , the file explorer of Fedora tell me that the file is corrupted.</p>\n<p>I also tried to use the unzip command on the file , and i have the following error message.</p>\n<pre><code>Archive:  s192-Système U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip\n\ncaution:  zipfile comment truncated\nerror [s192-Système U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip]:  missing 3249308257 bytes in zipfile\n  (attempting to process anyway)\nerror [s192-Système U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip]:  attempt to seek before beginning of zipfile\n  (please check that you have transferred or created the zipfile in the\n  appropriate BINARY mode and that you have compiled UnZip properly)\n</code></pre>\n<p>I thought it may be the FileUtils.getZipBytes(file, files) that returns a corrupted ByteArray. But i really don't think it is ... Here's the source code of this function</p>\n<pre><code>    public static byte[] getZipBytes(File directory, String[] files) throws IOException {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        ZipOutputStream zos = new ZipOutputStream(baos);\n        byte bytes[] = new byte[2048];\n        for (String fileName : files) {\n            FileInputStream fis = new FileInputStream(directory.getPath() + \n                    System.getProperty(&quot;file.separator&quot;) + fileName);\n            BufferedInputStream bis = new BufferedInputStream(fis);\n            zos.putNextEntry(new ZipEntry(fileName));\n            int bytesRead;\n            while ((bytesRead = bis.read(bytes)) != -1) {\n                zos.write(bytes, 0, bytesRead);\n            }\n            zos.closeEntry();\n            bis.close();\n            fis.close();\n        }\n        zos.flush();\n        baos.flush();\n        zos.close();\n        baos.close();\n        return baos.toByteArray();\n}\n</code></pre>\n"},{"tags":["java","hql","hibernate-mapping","coalesce"],"owner":{"account_id":10339877,"reputation":21,"user_id":7626644,"display_name":"Alassane"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674740476,"creation_date":1674740476,"question_id":75246931,"body_markdown":"I&#39;d like to do the following in HQL: join the main truncated table only if corresponding entry is found - IF NOT FOUND - join with table&#39;s backup (which contains the rest of the data)\r\nSomething like:\r\n```\r\nselect a TranxtionAuthorization left join fetch a.tranxtion *left join fetch mybackupTable IF main join entries are NULL*\r\n```\r\nNow two issues:\r\n\r\n 1. coalesce is not an option since I am not fetching individual fields\r\n 2. and mainly my myBackupTable is not mapped in TranxtionAuthorization\r\n    xml file (only the main table is &lt;=&gt; 1st join). So I cannot build\r\n    the second join anyway\r\n\r\nI would like to know what options if this is possible and if so - what are my options.\r\n\r\nBest answers I&#39;ve found so far would be to reference the two tables in Tranxtion xml file (which itself is referenced to in TranxtionAuthorization). Details here: [https://stackoverflow.com/questions/4997950/map-two-identical-tables-same-schema-to-same-entity-in-hibernate][1]. \r\nIt seems like that could help figure out Issue #2 liste above. In that case does it mean that I would not need the second join. And would actually fetch the first non null entry mapped from either main table or the backup?\r\n\r\nNot sure. Any input/guidance is appreciated.\r\n\r\nThanks in advance\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4997950/map-two-identical-tables-same-schema-to-same-entity-in-hibernate","title":"Hibernate | HQL join with table1 if exists OR table1_OLD_backup if not","body":"<p>I'd like to do the following in HQL: join the main truncated table only if corresponding entry is found - IF NOT FOUND - join with table's backup (which contains the rest of the data)\nSomething like:</p>\n<pre><code>select a TranxtionAuthorization left join fetch a.tranxtion *left join fetch mybackupTable IF main join entries are NULL*\n</code></pre>\n<p>Now two issues:</p>\n<ol>\n<li>coalesce is not an option since I am not fetching individual fields</li>\n<li>and mainly my myBackupTable is not mapped in TranxtionAuthorization\nxml file (only the main table is &lt;=&gt; 1st join). So I cannot build\nthe second join anyway</li>\n</ol>\n<p>I would like to know what options if this is possible and if so - what are my options.</p>\n<p>Best answers I've found so far would be to reference the two tables in Tranxtion xml file (which itself is referenced to in TranxtionAuthorization). Details here: <a href=\"https://stackoverflow.com/questions/4997950/map-two-identical-tables-same-schema-to-same-entity-in-hibernate\">Map Two Identical tables ( same schema...) to same entity in Hibernate</a>.\nIt seems like that could help figure out Issue #2 liste above. In that case does it mean that I would not need the second join. And would actually fetch the first non null entry mapped from either main table or the backup?</p>\n<p>Not sure. Any input/guidance is appreciated.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","algorithm","maps"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1674740591,"post_id":75238964,"comment_id":132781036,"body_markdown":"You appear to be using a *Mercator projection* for your map.  You may find https://en.wikipedia.org/wiki/Mercator_projection#Mercator_projection_transformations or https://mathworld.wolfram.com/MercatorProjection.html helpful.","body":"You appear to be using a <i>Mercator projection</i> for your map.  You may find <a href=\"https://en.wikipedia.org/wiki/Mercator_projection#Mercator_projection_transformations\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a> or <a href=\"https://mathworld.wolfram.com/MercatorProjection.html\" rel=\"nofollow noreferrer\">mathworld.wolfram.com/MercatorProjection.html</a> helpful."}],"answers":[{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674676550,"creation_date":1674676550,"answer_id":75239179,"question_id":75238964,"body_markdown":"Unfortunately, this problem is **way** harder than it seems.\r\n\r\nThat map is a **Projection**, so it is distorted from the original (roughly) spherical coordinate system your data is in. \r\n\r\n(actually, your lat &amp; long values may themselve be in one of several different projections, but that only really matters if you are doing very precise measurements.)\r\n\r\nSo your first order of business is to find out exactly what projection the map is using, then start looking for GIS libraries you can use in Java (I think there are several) to perform the translation.","title":"how to Convert longitude and latitude coordinates for world map image to cordinates (x , y) in pixels using java","body":"<p>Unfortunately, this problem is <strong>way</strong> harder than it seems.</p>\n<p>That map is a <strong>Projection</strong>, so it is distorted from the original (roughly) spherical coordinate system your data is in.</p>\n<p>(actually, your lat &amp; long values may themselve be in one of several different projections, but that only really matters if you are doing very precise measurements.)</p>\n<p>So your first order of business is to find out exactly what projection the map is using, then start looking for GIS libraries you can use in Java (I think there are several) to perform the translation.</p>\n"},{"comments":[{"owner":{"account_id":24590318,"reputation":9,"user_id":18494324,"display_name":"Tareq Khanfar"},"score":0,"creation_date":1674715442,"post_id":75239496,"comment_id":132773995,"body_markdown":"to find r          double radius = imgWidth / (2*Math.PI) ;   ???","body":"to find r          double radius = imgWidth / (2*Math.PI) ;   ???"}],"tags":[],"owner":{"account_id":4058424,"reputation":11,"user_id":3335599,"display_name":"MBucari"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674678412,"creation_date":1674678412,"answer_id":75239496,"question_id":75238964,"body_markdown":"Decide on a radius, r, for your globe model. Your map will be 2πr pixels wide.\r\nDecide on a a latitude cutoff. You can&#39;t project a pole to a plane, and at extreme latitudes things get so distorted as to be unusable. 85 degrees is a common choice.\r\n\r\nExpress your latitude in radians: lat_r\r\n\r\nYou X coordinate is r * (lat_r+ π). So at 180&#176; W your X coordinate is r * (-π + π) = 0, and at 180&#176; E your X coordinate is r * (π + π) = 2πr\r\n\r\nExpress your longitude in radians: lon_r\r\n\r\nYour Y coordinate is r * tan(lon_r) * (1 - cos(lon_r)). So at 85&#176; N your Y coordinate is r * tan(1.4835) * (1 - cos(1.4835)) = 10.4r","title":"how to Convert longitude and latitude coordinates for world map image to cordinates (x , y) in pixels using java","body":"<p>Decide on a radius, r, for your globe model. Your map will be 2πr pixels wide.\nDecide on a a latitude cutoff. You can't project a pole to a plane, and at extreme latitudes things get so distorted as to be unusable. 85 degrees is a common choice.</p>\n<p>Express your latitude in radians: lat_r</p>\n<p>You X coordinate is r * (lat_r+ π). So at 180° W your X coordinate is r * (-π + π) = 0, and at 180° E your X coordinate is r * (π + π) = 2πr</p>\n<p>Express your longitude in radians: lon_r</p>\n<p>Your Y coordinate is r * tan(lon_r) * (1 - cos(lon_r)). So at 85° N your Y coordinate is r * tan(1.4835) * (1 - cos(1.4835)) = 10.4r</p>\n"}],"owner":{"account_id":24590318,"reputation":9,"user_id":18494324,"display_name":"Tareq Khanfar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1674740389,"creation_date":1674675117,"question_id":75238964,"body_markdown":"I have a map of world.\r\n\r\nI need to create a function that gets two double parameters (longitude and latitude) and that function should draw a small circle on that area in the map image.\r\n\r\nI have the following info about the map:\r\n\r\n* The width of the map in pixels\r\n* The height of the map in pixels\r\n\r\n** I get to pixel X, Y based on that image.\r\n\r\nI tried longitude = -106.346771 and latitude = 56.130366;\r\n\r\nmapWidth = 3840.0 and mapHeight = 2160.0 ;\r\n\r\n\r\n\r\n\r\n    double x = (longitude + 180) / 360 * mapWidth;\r\n    double y = (1 - Math.log(Math.tan(Math.toRadians(latitude)) + 1 / \r\n        Math.cos(Math.toRadians(latitude))) / Math.PI) / 2 * mapHeight;\r\n\r\n\r\n\r\nresult : [lon: -106.346771 lat: 56.130366]: X: 785.6344426666666 Y: 671.2084211650845\r\n\r\nbut not selected in right location.\r\n\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eTEOv.jpg","title":"how to Convert longitude and latitude coordinates for world map image to cordinates (x , y) in pixels using java","body":"<p>I have a map of world.</p>\n<p>I need to create a function that gets two double parameters (longitude and latitude) and that function should draw a small circle on that area in the map image.</p>\n<p>I have the following info about the map:</p>\n<ul>\n<li>The width of the map in pixels</li>\n<li>The height of the map in pixels</li>\n</ul>\n<p>** I get to pixel X, Y based on that image.</p>\n<p>I tried longitude = -106.346771 and latitude = 56.130366;</p>\n<p>mapWidth = 3840.0 and mapHeight = 2160.0 ;</p>\n<pre><code>double x = (longitude + 180) / 360 * mapWidth;\ndouble y = (1 - Math.log(Math.tan(Math.toRadians(latitude)) + 1 / \n    Math.cos(Math.toRadians(latitude))) / Math.PI) / 2 * mapHeight;\n</code></pre>\n<p>result : [lon: -106.346771 lat: 56.130366]: X: 785.6344426666666 Y: 671.2084211650845</p>\n<p>but not selected in right location.</p>\n<p><a href=\"https://i.stack.imgur.com/eTEOv.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring","jpa","spring-data","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":1957539,"reputation":5468,"user_id":1760179,"accept_rate":56,"display_name":"Espresso"},"score":1,"creation_date":1380050619,"post_id":18987480,"comment_id":28052973,"body_markdown":"Thanks, this works. Was looking for a &quot;more cleaner&quot; solution i.e without writing the @Query.","body":"Thanks, this works. Was looking for a &quot;more cleaner&quot; solution i.e without writing the @Query."},{"owner":{"account_id":26084,"reputation":26325,"user_id":67598,"accept_rate":79,"display_name":"digitaljoel"},"score":3,"creation_date":1380128140,"post_id":18987480,"comment_id":28087421,"body_markdown":"Oliver Gierke is the man that would know the answer to this and he has the &quot;more cleaner&quot; solution. You should accept his answer.","body":"Oliver Gierke is the man that would know the answer to this and he has the &quot;more cleaner&quot; solution. You should accept his answer."},{"owner":{"account_id":157528,"reputation":7454,"user_id":375551,"accept_rate":66,"display_name":"Muneer"},"score":2,"creation_date":1503220340,"post_id":18987480,"comment_id":78518145,"body_markdown":"Great! I used a `Set&lt;String&gt;` as a parameter, worked well.","body":"Great! I used a <code>Set&lt;String&gt;</code> as a parameter, worked well."},{"owner":{"account_id":4440254,"reputation":211,"user_id":3614936,"display_name":"Varun Sood"},"score":0,"creation_date":1537775214,"post_id":18987480,"comment_id":91890949,"body_markdown":"what if I want to pass 2 paramemeters to my method one list and other a normal string  , will that work? if yes how shall I name my method","body":"what if I want to pass 2 paramemeters to my method one list and other a normal string  , will that work? if yes how shall I name my method"}],"tags":[],"owner":{"account_id":26084,"reputation":26325,"user_id":67598,"accept_rate":79,"display_name":"digitaljoel"},"comment_count":4,"down_vote_count":2,"up_vote_count":141,"is_accepted":false,"score":139,"last_activity_date":1470947206,"creation_date":1380041236,"answer_id":18987480,"question_id":18987292,"body_markdown":"For any method in a Spring CrudRepository you should be able to specify the @Query yourself.  Something like this should work: \r\n\r\n    @Query( &quot;select o from MyObject o where inventoryId in :ids&quot; )\r\n    List&lt;MyObject&gt; findByInventoryIds(@Param(&quot;ids&quot;) List&lt;Long&gt; inventoryIdList);\r\n\r\n","title":"Spring CrudRepository findByInventoryIds(List&lt;Long&gt; inventoryIdList) - equivalent to IN clause","body":"<p>For any method in a Spring CrudRepository you should be able to specify the @Query yourself.  Something like this should work: </p>\n\n<pre><code>@Query( \"select o from MyObject o where inventoryId in :ids\" )\nList&lt;MyObject&gt; findByInventoryIds(@Param(\"ids\") List&lt;Long&gt; inventoryIdList);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1957539,"reputation":5468,"user_id":1760179,"accept_rate":56,"display_name":"Espresso"},"score":0,"creation_date":1380207303,"post_id":18996367,"comment_id":28122279,"body_markdown":"Thanks, that was exactly I was looking for. Do they have it documented in CrudRepository page, or discover by reading the code?","body":"Thanks, that was exactly I was looking for. Do they have it documented in CrudRepository page, or discover by reading the code?"},{"owner":{"account_id":1957539,"reputation":5468,"user_id":1760179,"accept_rate":56,"display_name":"Espresso"},"score":0,"creation_date":1380293655,"post_id":18996367,"comment_id":28159692,"body_markdown":"Thanks. That &quot;gem is hidden in the appendix B&quot;, rightly so :)","body":"Thanks. That &quot;gem is hidden in the appendix B&quot;, rightly so :)"},{"owner":{"account_id":470389,"reputation":5211,"user_id":877570,"accept_rate":40,"display_name":"user64141"},"score":1,"creation_date":1455469499,"post_id":18996367,"comment_id":58492857,"body_markdown":"For the method signature:\nList&lt;Person&gt; findByIdIn(List&lt;Integer&gt; ids);\n\nI get the error:\nCaused by: java.lang.NumberFormatException: For input string: &quot;(1, 2)&quot;","body":"For the method signature: List&lt;Person&gt; findByIdIn(List&lt;Integer&gt; ids);  I get the error: Caused by: java.lang.NumberFormatException: For input string: &quot;(1, 2)&quot;"},{"owner":{"account_id":1899115,"reputation":1781,"user_id":1715376,"accept_rate":67,"display_name":"Miguel Pereira"},"score":0,"creation_date":1461945295,"post_id":18996367,"comment_id":61444271,"body_markdown":"When accessing this search method via Spring Data REST How would you specify multiple inventoryIds in an HTTP GET request?","body":"When accessing this search method via Spring Data REST How would you specify multiple inventoryIds in an HTTP GET request?"},{"owner":{"account_id":1730033,"reputation":1538,"user_id":1583815,"accept_rate":75,"display_name":"Piyush"},"score":0,"creation_date":1494251918,"post_id":18996367,"comment_id":74735151,"body_markdown":"@OliverGierke following repository method `@Modifying\n    @Query(value = &quot;SELECT * FROM badge WHERE threshold_type=?1 AND threshold&lt;?2 AND id NOT IN (SELECT id FROM badge_achieved WHERE user_id=?3)&quot;, nativeQuery = true)\n    List&lt;Badge&gt; getAchievableBadgeByThreshold(BadgeThresholdType thresholdType, Integer threshold, Long userId);` is not returning any result. If I run same query with same bounded parameter it&#39;s working. Any hint?","body":"@OliverGierke following repository method <code>@Modifying     @Query(value = &quot;SELECT * FROM badge WHERE threshold_type=?1 AND threshold&lt;?2 AND id NOT IN (SELECT id FROM badge_achieved WHERE user_id=?3)&quot;, nativeQuery = true)     List&lt;Badge&gt; getAchievableBadgeByThreshold(BadgeThresholdType thresholdType, Integer threshold, Long userId);</code> is not returning any result. If I run same query with same bounded parameter it&#39;s working. Any hint?"},{"owner":{"account_id":11729259,"reputation":392,"user_id":8618438,"display_name":"chill appreciator"},"score":2,"creation_date":1593045062,"post_id":18996367,"comment_id":110645040,"body_markdown":"I&#39;m curious does author of the question(or even answer) checked the number of queries that spawns by accepted solution.\nFrom the question: &quot;Firing queries for each id may not be optimal.&quot;.\nAccepted code will do query per entity. So if inventoryIdList.size == 100 this code will do 100 selects with possible joins and stuff.","body":"I&#39;m curious does author of the question(or even answer) checked the number of queries that spawns by accepted solution. From the question: &quot;Firing queries for each id may not be optimal.&quot;. Accepted code will do query per entity. So if inventoryIdList.size == 100 this code will do 100 selects with possible joins and stuff."},{"owner":{"account_id":1962480,"reputation":15483,"user_id":1763602,"accept_rate":76,"display_name":"Marco Sulla"},"score":0,"creation_date":1674740297,"post_id":18996367,"comment_id":132780936,"body_markdown":"If `inventoryId` has the primary key, you can simply use `yourRepo.findAll(inventoryIds)`","body":"If <code>inventoryId</code> has the primary key, you can simply use <code>yourRepo.findAll(inventoryIds)</code>"}],"tags":[],"owner":{"account_id":9744,"reputation":80816,"user_id":18122,"accept_rate":80,"display_name":"Oliver Drotbohm"},"comment_count":7,"down_vote_count":0,"up_vote_count":427,"is_accepted":true,"score":427,"last_activity_date":1674740385,"creation_date":1380084127,"answer_id":18996367,"question_id":18987292,"body_markdown":"`findByInventoryIdIn(List&lt;Long&gt; inventoryIdList)` should do the trick.\r\n\r\nThe HTTP request parameter format would be like so:\r\n    \r\n    Yes ?id=1,2,3\r\n    No  ?id=1&amp;id=2&amp;id=3\r\n\r\nThe complete list of JPA repository keywords can be found in the [current documentation listing][1]. It shows that `IsIn` is equivalent – if you prefer the verb for readability – and that JPA also supports `NotIn` and `IsNotIn`.\r\n\r\nIf `inventoryId` has the primary key, you can simply use `yourRepo.findAll(inventoryIdList)`.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords","title":"Spring CrudRepository findByInventoryIds(List&lt;Long&gt; inventoryIdList) - equivalent to IN clause","body":"<p><code>findByInventoryIdIn(List&lt;Long&gt; inventoryIdList)</code> should do the trick.</p>\n<p>The HTTP request parameter format would be like so:</p>\n<pre><code>Yes ?id=1,2,3\nNo  ?id=1&amp;id=2&amp;id=3\n</code></pre>\n<p>The complete list of JPA repository keywords can be found in the <a href=\"http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords\" rel=\"noreferrer\">current documentation listing</a>. It shows that <code>IsIn</code> is equivalent – if you prefer the verb for readability – and that JPA also supports <code>NotIn</code> and <code>IsNotIn</code>.</p>\n<p>If <code>inventoryId</code> has the primary key, you can simply use <code>yourRepo.findAll(inventoryIdList)</code>.</p>\n"},{"comments":[{"owner":{"account_id":9792584,"reputation":509,"user_id":7256724,"display_name":"Dzinot"},"score":0,"creation_date":1494515776,"post_id":43919322,"comment_id":74872215,"body_markdown":"This works for all interfaces that are extending the **CrudRepository** interface.","body":"This works for all interfaces that are extending the <b>CrudRepository</b> interface."},{"owner":{"account_id":2040271,"reputation":179,"user_id":1821658,"accept_rate":42,"display_name":"Julie"},"score":4,"creation_date":1549657525,"post_id":43919322,"comment_id":95995768,"body_markdown":"This won&#39;t work if the ids size is over 1000 or certain size depending on the DB. How about this?    **List&lt;Inventory&gt; findByIdIn(List&lt;Long&gt; ids, Pageable pageable);**","body":"This won&#39;t work if the ids size is over 1000 or certain size depending on the DB. How about this?    <b>List&lt;Inventory&gt; findByIdIn(List&lt;Long&gt; ids, Pageable pageable);</b>"}],"tags":[],"owner":{"account_id":9792584,"reputation":509,"user_id":7256724,"display_name":"Dzinot"},"comment_count":2,"down_vote_count":1,"up_vote_count":45,"is_accepted":false,"score":44,"last_activity_date":1494515438,"creation_date":1494515438,"answer_id":43919322,"question_id":18987292,"body_markdown":"Yes, that is supported.\r\n\r\nCheck the documentation provided [here][1] for the supported keywords inside method names.\r\n\r\nYou can just define the method in the repository interface without using the **@Query** annotation and writing your custom query. In your case it would be as followed:\r\n\r\n    List&lt;Inventory&gt; findByIdIn(List&lt;Long&gt; ids);\r\n\r\nI assume that you have the **Inventory** entity and the **InventoryRepository** interface. The code in your case should look like this:\r\n\r\n**The Entity**\r\n\r\n    @Entity\r\n    public class Inventory implements Serializable {\r\n\r\n      private static final long serialVersionUID = 1L;\r\n\r\n      private Long id;\r\n\r\n      // other fields\r\n      // getters/setters\r\n\r\n    }\r\n\r\n**The Repository**\r\n\r\n    @Repository\r\n    @Transactional\r\n    public interface InventoryRepository extends PagingAndSortingRepository&lt;Inventory, Long&gt; {\r\n\r\n\t  List&lt;Inventory&gt; findByIdIn(List&lt;Long&gt; ids);\r\n\r\n    }\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation &quot;here&quot; ","title":"Spring CrudRepository findByInventoryIds(List&lt;Long&gt; inventoryIdList) - equivalent to IN clause","body":"<p>Yes, that is supported.</p>\n\n<p>Check the documentation provided <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation\" rel=\"noreferrer\" title=\"here\">here</a> for the supported keywords inside method names.</p>\n\n<p>You can just define the method in the repository interface without using the <strong>@Query</strong> annotation and writing your custom query. In your case it would be as followed:</p>\n\n<pre><code>List&lt;Inventory&gt; findByIdIn(List&lt;Long&gt; ids);\n</code></pre>\n\n<p>I assume that you have the <strong>Inventory</strong> entity and the <strong>InventoryRepository</strong> interface. The code in your case should look like this:</p>\n\n<p><strong>The Entity</strong></p>\n\n<pre><code>@Entity\npublic class Inventory implements Serializable {\n\n  private static final long serialVersionUID = 1L;\n\n  private Long id;\n\n  // other fields\n  // getters/setters\n\n}\n</code></pre>\n\n<p><strong>The Repository</strong></p>\n\n<pre><code>@Repository\n@Transactional\npublic interface InventoryRepository extends PagingAndSortingRepository&lt;Inventory, Long&gt; {\n\n  List&lt;Inventory&gt; findByIdIn(List&lt;Long&gt; ids);\n\n}\n</code></pre>\n"}],"owner":{"account_id":1957539,"reputation":5468,"user_id":1760179,"accept_rate":56,"display_name":"Espresso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365481,"favorite_count":0,"down_vote_count":1,"up_vote_count":271,"accepted_answer_id":18996367,"answer_count":3,"score":270,"last_activity_date":1674740385,"creation_date":1380040622,"question_id":18987292,"body_markdown":"In Spring CrudRepository, do we have support for &quot;IN clause&quot; for a field? ie something similar to the following? \r\n\r\n\r\n     findByInventoryIds(List&lt;Long&gt; inventoryIdList) \r\n\r\n\r\nIf such support is not available, what elegant options can be considered? Firing queries for each id may not be optimal.","title":"Spring CrudRepository findByInventoryIds(List&lt;Long&gt; inventoryIdList) - equivalent to IN clause","body":"<p>In Spring CrudRepository, do we have support for \"IN clause\" for a field? ie something similar to the following? </p>\n\n<pre><code> findByInventoryIds(List&lt;Long&gt; inventoryIdList) \n</code></pre>\n\n<p>If such support is not available, what elegant options can be considered? Firing queries for each id may not be optimal.</p>\n"},{"tags":["java","metasploit","interactive-shell"],"comments":[{"owner":{"account_id":462194,"reputation":5746,"user_id":864369,"accept_rate":100,"display_name":"Dan W"},"score":0,"creation_date":1522701470,"post_id":49618073,"comment_id":86243923,"body_markdown":"See this answer using the Robot class - https://stackoverflow.com/a/2549184/864369","body":"See this answer using the Robot class - <a href=\"https://stackoverflow.com/a/2549184/864369\">stackoverflow.com/a/2549184/864369</a>"},{"owner":{"account_id":12506710,"reputation":49,"user_id":9103340,"display_name":"Vru26"},"score":0,"creation_date":1522916327,"post_id":49618073,"comment_id":86344682,"body_markdown":"Thank you for your reply but I am still not able to execute commands. I have included an image indicating where I actually want to execute the commands. Using &quot;Robot&quot; class I am able to execute the terminal specific commands on the terminal but I am not able to execute the commands after starting the Metasploit Console.","body":"Thank you for your reply but I am still not able to execute commands. I have included an image indicating where I actually want to execute the commands. Using &quot;Robot&quot; class I am able to execute the terminal specific commands on the terminal but I am not able to execute the commands after starting the Metasploit Console."},{"owner":{"account_id":12506710,"reputation":49,"user_id":9103340,"display_name":"Vru26"},"score":0,"creation_date":1523471823,"post_id":49618073,"comment_id":86579757,"body_markdown":"The above problem has been solved but now when I try to invoke the functions to type the commands by clicking on a button then the actionPerformed function is executed infinite number of times. The commands are typed using the Robot Class as suggested above. Can anyone help me out with this new problem?","body":"The above problem has been solved but now when I try to invoke the functions to type the commands by clicking on a button then the actionPerformed function is executed infinite number of times. The commands are typed using the Robot Class as suggested above. Can anyone help me out with this new problem?"},{"owner":{"account_id":326479,"reputation":34449,"user_id":648265,"accept_rate":88,"display_name":"ivan_pozdeev"},"score":0,"creation_date":1536542206,"post_id":49618073,"comment_id":91447955,"body_markdown":"Possible duplicate of [Running interactive shell program in Java](https://stackoverflow.com/questions/29733038/running-interactive-shell-program-in-java)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/29733038/running-interactive-shell-program-in-java\">Running interactive shell program in Java</a>"}],"owner":{"account_id":12506710,"reputation":49,"user_id":9103340,"display_name":"Vru26"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":587,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":0,"score":4,"last_activity_date":1674740306,"creation_date":1522699643,"question_id":49618073,"body_markdown":"I am trying to develop a UI based app in Java to use Metasploit (OS: Kali Linux). Basically I want to start a terminal and run the command &quot;msfconsole&quot; and then once the Metasploit Framework Console starts I want to execute commands in it.\r\n\r\nUsing ProcessBuilder Class of Java I am able to open up a terminal and start the Metasploit Framework Console but I am unable to execute any commands under the Framework. I am new to Runtime and ProcessBuilder class of Java. After starting the Framework Console, I did try executing the &quot;help&quot; command of the Metasploit Framework but that command was directly executed under the terminal and hence terminal help was displayed. So can anyone help me out with this? The code snippet is given below. Also I have included a supporting image at the end of this post.\r\n\r\n        String line;\r\n        Scanner scan = new Scanner(System.in);\r\n\r\n        ProcessBuilder builder = new ProcessBuilder(&quot;/bin/bash&quot;);\r\n        builder.redirectErrorStream(true);\r\n        Process process = builder.start();\r\n\r\n        OutputStream stdin = process.getOutputStream();\r\n        InputStream stderr = process.getErrorStream();\r\n        InputStream stdout = process.getInputStream();\r\n        BufferedReader reader = new BufferedReader(new InputStreamReader(stdout));\r\n        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stdin));\r\n\r\n        String input = scan.nextLine();\r\n        input += &quot;\\n&quot;;\r\n        writer.write(input);\r\n        writer.flush()\r\n\r\n        input = scan.nextLine();\r\n        input += &quot;\\n&quot;;\r\n        writer.write(input);\r\n        writer.flush();\r\n\r\n        while ((line = reader.readLine()) != null) {\r\n            System.out.println(&quot;Stdout: &quot; + line);\r\n        }\r\n        writer.close();\r\n\r\nI have encircled the part where I want to enter the commands. The image shows Metasploit Console running inside a terminal window:\r\n\r\n[![I have encircled the part where I want to enter the commands. The image shows Metasploit Console running inside a terminal window.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1d4CT.png","title":"Executing metasploit commands using Java","body":"<p>I am trying to develop a UI based app in Java to use Metasploit (OS: Kali Linux). Basically I want to start a terminal and run the command \"msfconsole\" and then once the Metasploit Framework Console starts I want to execute commands in it.</p>\n\n<p>Using ProcessBuilder Class of Java I am able to open up a terminal and start the Metasploit Framework Console but I am unable to execute any commands under the Framework. I am new to Runtime and ProcessBuilder class of Java. After starting the Framework Console, I did try executing the \"help\" command of the Metasploit Framework but that command was directly executed under the terminal and hence terminal help was displayed. So can anyone help me out with this? The code snippet is given below. Also I have included a supporting image at the end of this post.</p>\n\n<pre><code>    String line;\n    Scanner scan = new Scanner(System.in);\n\n    ProcessBuilder builder = new ProcessBuilder(\"/bin/bash\");\n    builder.redirectErrorStream(true);\n    Process process = builder.start();\n\n    OutputStream stdin = process.getOutputStream();\n    InputStream stderr = process.getErrorStream();\n    InputStream stdout = process.getInputStream();\n    BufferedReader reader = new BufferedReader(new InputStreamReader(stdout));\n    BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stdin));\n\n    String input = scan.nextLine();\n    input += \"\\n\";\n    writer.write(input);\n    writer.flush()\n\n    input = scan.nextLine();\n    input += \"\\n\";\n    writer.write(input);\n    writer.flush();\n\n    while ((line = reader.readLine()) != null) {\n        System.out.println(\"Stdout: \" + line);\n    }\n    writer.close();\n</code></pre>\n\n<p>I have encircled the part where I want to enter the commands. The image shows Metasploit Console running inside a terminal window:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1d4CT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1d4CT.png\" alt=\"I have encircled the part where I want to enter the commands. The image shows Metasploit Console running inside a terminal window.\"></a></p>\n"},{"tags":["java","multithreading","httpclient","executorservice"],"owner":{"account_id":149784,"reputation":8168,"user_id":362531,"accept_rate":69,"display_name":"adamw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1674739518,"creation_date":1674739518,"question_id":75246754,"body_markdown":"I&#39;m trying to send an HTTP request using the `HttpClient` bundled with Java (tested using JDK17), but using a custom thread pool / executor. Such an executor can be specified when building the client, as in the code below:\r\n\r\n```java\r\npackage test;\r\n\r\nimport java.io.IOException;\r\nimport java.net.URI;\r\nimport java.net.http.HttpClient;\r\nimport java.net.http.HttpRequest;\r\nimport java.net.http.HttpResponse;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class Test {\r\n    public static void main(String[] args) throws IOException, InterruptedException, ExecutionException {\r\n        var executor = Executors.newCachedThreadPool();\r\n        var client = HttpClient.newBuilder().executor(executor).build();\r\n\r\n        client.sendAsync(\r\n                HttpRequest\r\n                        .newBuilder()\r\n                        .uri(URI.create(&quot;https://www.google.com&quot;))\r\n                        .build(),\r\n                HttpResponse.BodyHandlers.ofInputStream()\r\n        ).get();\r\n\r\n        System.out.println(&quot;Done&quot;);\r\n        System.in.read();\r\n    }\r\n}\r\n```\r\n\r\nHowever, some additional threads are always started. One is a `SelectorManager`, which is hard-coded to be started [here](https://github.com/openjdk/jdk/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/HttpClientImpl.java#L507-L531). It has a clear scope and probably needs to be a separate thread. \r\n\r\nAdditionally, when using `.sendAsync`, the default fork-join pool is also *always* started. I think this is due to the [following code in `HttpClient`](https://github.com/openjdk/jdk/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/HttpClientImpl.java#L990-L995):\r\n\r\n```java\r\n// makes sure that any dependent actions happen in the CF default\r\n// executor. This is only needed for sendAsync(...), when\r\n// exchangeExecutor is non-null.\r\nif (exchangeExecutor != null) {\r\n    res = res.whenCompleteAsync((r, t) -&gt; { /* do nothing */}, ASYNC_POOL);\r\n}\r\n```\r\n\r\nI suspect this is needed to always shift any further processing of the response (which might block) to another thread pool (to avoid blocking the thread that processes incoming HTTP data). However:\r\n\r\n1. shouldn&#39;t this shifting happen onto the provided executor, instead of shifting to `ASYNC_POOL` always?\r\n2. is my justification for the existence of the above `HttpClient` snippet correct?\r\n3. maybe there are other reasons why the ForkJoin pool must be started?","title":"Why is the default fork-join pool always started when sending a request using JDK&#39;s HttpClient?","body":"<p>I'm trying to send an HTTP request using the <code>HttpClient</code> bundled with Java (tested using JDK17), but using a custom thread pool / executor. Such an executor can be specified when building the client, as in the code below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package test;\n\nimport java.io.IOException;\nimport java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.Executors;\n\npublic class Test {\n    public static void main(String[] args) throws IOException, InterruptedException, ExecutionException {\n        var executor = Executors.newCachedThreadPool();\n        var client = HttpClient.newBuilder().executor(executor).build();\n\n        client.sendAsync(\n                HttpRequest\n                        .newBuilder()\n                        .uri(URI.create(&quot;https://www.google.com&quot;))\n                        .build(),\n                HttpResponse.BodyHandlers.ofInputStream()\n        ).get();\n\n        System.out.println(&quot;Done&quot;);\n        System.in.read();\n    }\n}\n</code></pre>\n<p>However, some additional threads are always started. One is a <code>SelectorManager</code>, which is hard-coded to be started <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/HttpClientImpl.java#L507-L531\" rel=\"nofollow noreferrer\">here</a>. It has a clear scope and probably needs to be a separate thread.</p>\n<p>Additionally, when using <code>.sendAsync</code>, the default fork-join pool is also <em>always</em> started. I think this is due to the <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/HttpClientImpl.java#L990-L995\" rel=\"nofollow noreferrer\">following code in <code>HttpClient</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// makes sure that any dependent actions happen in the CF default\n// executor. This is only needed for sendAsync(...), when\n// exchangeExecutor is non-null.\nif (exchangeExecutor != null) {\n    res = res.whenCompleteAsync((r, t) -&gt; { /* do nothing */}, ASYNC_POOL);\n}\n</code></pre>\n<p>I suspect this is needed to always shift any further processing of the response (which might block) to another thread pool (to avoid blocking the thread that processes incoming HTTP data). However:</p>\n<ol>\n<li>shouldn't this shifting happen onto the provided executor, instead of shifting to <code>ASYNC_POOL</code> always?</li>\n<li>is my justification for the existence of the above <code>HttpClient</code> snippet correct?</li>\n<li>maybe there are other reasons why the ForkJoin pool must be started?</li>\n</ol>\n"},{"tags":["java","spring","spring-mvc","spring-data-jpa","thymeleaf"],"comments":[{"owner":{"account_id":13318942,"reputation":3000,"user_id":9614331,"display_name":"Avijit Barua"},"score":0,"creation_date":1537273533,"post_id":52380195,"comment_id":91717417,"body_markdown":"Did you check your database ? Is there data available ?","body":"Did you check your database ? Is there data available ?"},{"owner":{"account_id":2372172,"reputation":366,"user_id":2076538,"accept_rate":81,"display_name":"Vishal Torne"},"score":0,"creation_date":1537308171,"post_id":52380195,"comment_id":91735473,"body_markdown":"Service method?","body":"Service method?"}],"answers":[{"comments":[{"owner":{"account_id":12920306,"reputation":81,"user_id":9343040,"display_name":"James121"},"score":0,"creation_date":1537276304,"post_id":52383446,"comment_id":91719244,"body_markdown":"In this case, the compiler can&#39;t resolve the findAll() method.","body":"In this case, the compiler can&#39;t resolve the findAll() method."}],"tags":[],"owner":{"account_id":2372172,"reputation":366,"user_id":2076538,"accept_rate":81,"display_name":"Vishal Torne"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537263217,"creation_date":1537263217,"answer_id":52383446,"question_id":52380195,"body_markdown":"Try to use \r\n\r\n    List&lt;Customer&gt; customers = new customerRepository.findAll();\r\n    Model.addAttribute(&quot;c&quot; , customers);\r\nSee my question for more information https://stackoverflow.com/questions/52114455/store-pictures-in-h2-database-spring-boot-thymleaf","title":"Problem with saving data from Thymeleaf form to database with Spring MVC","body":"<p>Try to use </p>\n\n<pre><code>List&lt;Customer&gt; customers = new customerRepository.findAll();\nModel.addAttribute(\"c\" , customers);\n</code></pre>\n\n<p>See my question for more information <a href=\"https://stackoverflow.com/questions/52114455/store-pictures-in-h2-database-spring-boot-thymleaf\">Store pictures in H2 database spring boot thymleaf</a></p>\n"},{"tags":[],"owner":{"account_id":13786274,"reputation":358,"user_id":9950085,"display_name":"Falcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546638337,"creation_date":1546638337,"answer_id":54046522,"question_id":52380195,"body_markdown":"Another way, with this code:\r\n\r\n      model.addAttribute(&quot;customers&quot;, customerRepository.findAll());\r\n\r\n\r\nfor result template:\r\n\r\n    &lt;th:block th:each=&quot;customer : ${customers}&quot;&gt;\r\n      &lt;td th:text=&quot;${customer.id}&quot;&gt;customer ID&lt;/td&gt;\r\n      &lt;td th:text=&quot;${customer.firstName}&quot;&gt;first name&lt;/td&gt;\r\n      &lt;td th:text=&quot;${customer.lastName}&quot;&gt;last name&lt;/td&gt;\r\n    &lt;/th:block&gt;\r\n\r\n\r\n\r\n","title":"Problem with saving data from Thymeleaf form to database with Spring MVC","body":"<p>Another way, with this code:</p>\n\n<pre><code>  model.addAttribute(\"customers\", customerRepository.findAll());\n</code></pre>\n\n<p>for result template:</p>\n\n<pre><code>&lt;th:block th:each=\"customer : ${customers}\"&gt;\n  &lt;td th:text=\"${customer.id}\"&gt;customer ID&lt;/td&gt;\n  &lt;td th:text=\"${customer.firstName}\"&gt;first name&lt;/td&gt;\n  &lt;td th:text=\"${customer.lastName}\"&gt;last name&lt;/td&gt;\n&lt;/th:block&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5903717,"reputation":1708,"user_id":6306190,"display_name":"thyu"},"score":0,"creation_date":1605158220,"post_id":64797850,"comment_id":114567085,"body_markdown":"It&#39;d be better if you could include explanation for your code.","body":"It&#39;d be better if you could include explanation for your code."}],"tags":[],"owner":{"account_id":9591005,"reputation":53,"user_id":7121896,"display_name":"Mattyas yahya"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605154616,"creation_date":1605154616,"answer_id":64797850,"question_id":52380195,"body_markdown":"try this :\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @PostMapping(&quot;/customer&quot;)\r\n    public String createCustomer(Customer customer,BindingResult result)\r\n    {\r\n        if (result.hasErrors())\r\n     {\r\n                return &quot;your error page in here&quot;;\r\n            }\r\n        customerRepository.save(customer);\r\n        return &quot;customer&quot;;\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Problem with saving data from Thymeleaf form to database with Spring MVC","body":"<p>try this :</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@PostMapping(\"/customer\")\npublic String createCustomer(Customer customer,BindingResult result)\n{\n    if (result.hasErrors())\n {\n            return \"your error page in here\";\n        }\n    customerRepository.save(customer);\n    return \"customer\";\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":19396277,"reputation":1,"user_id":14183899,"display_name":"Kyera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674739472,"creation_date":1674739472,"answer_id":75246748,"question_id":52380195,"body_markdown":"Although this post is already old, I just stumbled upon it when debugging my own code; my answer may still help someone in the future.\r\n\r\nI believe I had a similar issue, where the Thymeleaf form didn&#39;t actually assign values to the entity&#39;s fields. For me the issue was that the entity had no setters for its fields - it looks like you have that problem here as well.","title":"Problem with saving data from Thymeleaf form to database with Spring MVC","body":"<p>Although this post is already old, I just stumbled upon it when debugging my own code; my answer may still help someone in the future.</p>\n<p>I believe I had a similar issue, where the Thymeleaf form didn't actually assign values to the entity's fields. For me the issue was that the entity had no setters for its fields - it looks like you have that problem here as well.</p>\n"}],"owner":{"account_id":12920306,"reputation":81,"user_id":9343040,"display_name":"James121"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2294,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1674739472,"creation_date":1537252086,"question_id":52380195,"body_markdown":"I&#39;ve just started learning Spring MVC. I try to save some data from the Thymeleaf form to repository, which extends CrudRepository. Unfortunately, the data doesn&#39;t display.\r\n\r\nWhen I go to the results page I see used IDs but no data typed to form. Where is the mistake?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nHere is a **Controller**\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.jtm.twiservice.controller;\r\n    import com.jtm.twiservice.Main;\r\n    import com.jtm.twiservice.model.Customer;\r\n    import com.jtm.twiservice.repository.CustomerRepository;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.*;\r\n\r\n    @Controller\r\n    public class CustomerClientController {\r\n    private static final Logger myLog = LoggerFactory.getLogger(Main.class);\r\n    \r\n    @Autowired\r\n    private CustomerRepository customerRepository;\r\n\r\n    @GetMapping(&quot;/customer&quot;)\r\n    public String customerForm(Model model) {\r\n        model.addAttribute(&quot;customer&quot;, new Customer());\r\n        return &quot;customer&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/customer&quot;)\r\n    public String createCustomer(Customer customer, Model model) {\r\n        customerRepository.save(customer);\r\n        return &quot;customer&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/customers&quot;)\r\n    public String getCustomers(Model model) {\r\n        model.addAttribute(&quot;customers&quot;, customerRepository.findAll());\r\n        return &quot;customers;\r\n    }\r\n    }\r\n\r\n`**Model**:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.jtm.twiservice.model;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n\r\n    @Entity\r\n    public class Customer {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.AUTO)\r\n    private Long id;\r\n    private String firstName;\r\n    private String lastName;\r\n    private String email;\r\n    private String schoolForm;\r\n\r\n    public Customer() {}\r\n\r\n    public Customer(String firstName, String lastName, String email, String schoolForm) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.email = email;\r\n        this.schoolForm = schoolForm;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return String.format(\r\n                &quot;Customer[id=%d, firstName=&#39;%s&#39;, lastName=&#39;%s&#39;, email=&#39;%s&#39;, schoolForm=&#39;%s&#39;]&quot;,\r\n                id, firstName, lastName, email, schoolForm);\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public String getLastName() {\r\n        return lastName;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public String getSchoolForm() {\r\n        return schoolForm;\r\n    }\r\n    }\r\n\r\n**repository**:\r\n        \r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.jtm.twiservice.repository;\r\n\r\n    import com.jtm.twiservice.model.Customer;\r\n    import org.springframework.data.repository.CrudRepository;\r\n\r\n    public interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt; { }\r\n\r\n**form** extract:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n            &lt;form action=&quot;#&quot; th:action=&quot;@{/customer}&quot; th:object=&quot;${customer}&quot; method=&quot;post&quot;&gt;\r\n                &lt;p class=&quot;text&quot;&gt;&lt;label&gt;first name:&lt;/label&gt;  &lt;input type=&quot;text&quot; th:field=&quot;*{firstName}&quot; /&gt;&lt;/p&gt;\r\n                &lt;p class=&quot;text&quot;&gt;&lt;label&gt;last name:&lt;/label&gt; &lt;input type=&quot;text&quot; th:field=&quot;*{lastName}&quot; /&gt;&lt;/p\r\n                &lt;p class=&quot;text&quot;&gt;&lt;label&gt;school form:&lt;/label&gt; &lt;input type=&quot;text&quot; th:field=&quot;*{schoolForm}&quot; /&gt;&lt;/p&gt;\r\n                &lt;div class=&quot;text&quot;&gt;email: &lt;input type=&quot;text&quot; th:field=&quot;*{email}&quot; /&gt;&lt;/div&gt;\r\n                &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt; &lt;input type=&quot;reset&quot; value=&quot;Reset&quot; /&gt; &lt;/p&gt;\r\n\r\n            &lt;/form&gt;\r\nAnd extract from **results template**:\r\n\r\n&lt;!-- language: lang-xml --&gt;    \r\n\r\n    &lt;td th:text=&quot;${customer.id}&quot;&gt;customer ID&lt;/td&gt;\r\n    &lt;td th:text=&quot;${customer.firstName}&quot;&gt;first name&lt;/td&gt;\r\n    &lt;td th:text=&quot;${customer.lastName}&quot;&gt;last name&lt;/td&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fdT9a.png","title":"Problem with saving data from Thymeleaf form to database with Spring MVC","body":"<p>I've just started learning Spring MVC. I try to save some data from the Thymeleaf form to repository, which extends CrudRepository. Unfortunately, the data doesn't display.</p>\n\n<p>When I go to the results page I see used IDs but no data typed to form. Where is the mistake?</p>\n\n<p><a href=\"https://i.stack.imgur.com/fdT9a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fdT9a.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is a <strong>Controller</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.jtm.twiservice.controller;\nimport com.jtm.twiservice.Main;\nimport com.jtm.twiservice.model.Customer;\nimport com.jtm.twiservice.repository.CustomerRepository;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.*;\n\n@Controller\npublic class CustomerClientController {\nprivate static final Logger myLog = LoggerFactory.getLogger(Main.class);\n\n@Autowired\nprivate CustomerRepository customerRepository;\n\n@GetMapping(\"/customer\")\npublic String customerForm(Model model) {\n    model.addAttribute(\"customer\", new Customer());\n    return \"customer\";\n}\n\n@PostMapping(\"/customer\")\npublic String createCustomer(Customer customer, Model model) {\n    customerRepository.save(customer);\n    return \"customer\";\n}\n\n@GetMapping(\"/customers\")\npublic String getCustomers(Model model) {\n    model.addAttribute(\"customers\", customerRepository.findAll());\n    return \"customers;\n}\n}\n</code></pre>\n\n<p>`<strong>Model</strong>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.jtm.twiservice.model;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Customer {\n\n@Id\n@GeneratedValue(strategy=GenerationType.AUTO)\nprivate Long id;\nprivate String firstName;\nprivate String lastName;\nprivate String email;\nprivate String schoolForm;\n\npublic Customer() {}\n\npublic Customer(String firstName, String lastName, String email, String schoolForm) {\n    this.firstName = firstName;\n    this.lastName = lastName;\n    this.email = email;\n    this.schoolForm = schoolForm;\n}\n\n@Override\npublic String toString() {\n    return String.format(\n            \"Customer[id=%d, firstName='%s', lastName='%s', email='%s', schoolForm='%s']\",\n            id, firstName, lastName, email, schoolForm);\n}\n\npublic Long getId() {\n    return id;\n}\n\npublic String getFirstName() {\n    return firstName;\n}\n\npublic String getLastName() {\n    return lastName;\n}\n\npublic String getEmail() {\n    return email;\n}\n\npublic String getSchoolForm() {\n    return schoolForm;\n}\n}\n</code></pre>\n\n<p><strong>repository</strong>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.jtm.twiservice.repository;\n\nimport com.jtm.twiservice.model.Customer;\nimport org.springframework.data.repository.CrudRepository;\n\npublic interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt; { }\n</code></pre>\n\n<p><strong>form</strong> extract:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;form action=\"#\" th:action=\"@{/customer}\" th:object=\"${customer}\" method=\"post\"&gt;\n            &lt;p class=\"text\"&gt;&lt;label&gt;first name:&lt;/label&gt;  &lt;input type=\"text\" th:field=\"*{firstName}\" /&gt;&lt;/p&gt;\n            &lt;p class=\"text\"&gt;&lt;label&gt;last name:&lt;/label&gt; &lt;input type=\"text\" th:field=\"*{lastName}\" /&gt;&lt;/p\n            &lt;p class=\"text\"&gt;&lt;label&gt;school form:&lt;/label&gt; &lt;input type=\"text\" th:field=\"*{schoolForm}\" /&gt;&lt;/p&gt;\n            &lt;div class=\"text\"&gt;email: &lt;input type=\"text\" th:field=\"*{email}\" /&gt;&lt;/div&gt;\n            &lt;p&gt;&lt;input type=\"submit\" value=\"Submit\" /&gt; &lt;input type=\"reset\" value=\"Reset\" /&gt; &lt;/p&gt;\n\n        &lt;/form&gt;\n</code></pre>\n\n<p>And extract from <strong>results template</strong>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;td th:text=\"${customer.id}\"&gt;customer ID&lt;/td&gt;\n&lt;td th:text=\"${customer.firstName}\"&gt;first name&lt;/td&gt;\n&lt;td th:text=\"${customer.lastName}\"&gt;last name&lt;/td&gt;\n</code></pre>\n"},{"tags":["java","criteria-api"],"comments":[{"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"score":0,"creation_date":1491836892,"post_id":43322504,"comment_id":73717810,"body_markdown":"What do you mean by `where p1 and p2 or p3`? `where (p1 and p2) or p3`? `where p1 and (p2 or p3)`?","body":"What do you mean by <code>where p1 and p2 or p3</code>? <code>where (p1 and p2) or p3</code>? <code>where p1 and (p2 or p3)</code>?"}],"answers":[{"tags":[],"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1491901885,"creation_date":1491839083,"answer_id":43327590,"question_id":43322504,"body_markdown":"Simply combine your arrays of predicates into simple predicates, using [`CriteriaBuilder.and(Predicate... restrictions)`][1] and [`CriteriaBuilder.or(Predicate... restrictions)`][2]\r\n\r\nFor getting `where (p1 and p2) or p3`, where `p1`, `p2` and `p3` are all arrays of predicates concatenated with `and` statements:\r\n\r\n    Predicate[] p1 = new Predicate[2];\r\n    Predicate[] p2 = new Predicate[2];\r\n    Predicate[] p3 = new Predicate[2];\r\n    // add your predicates to the arrays.     \r\n    Predicate p1all = cb.and(p1);    \r\n    Predicate p2all = cb.and(p2);\r\n    Predicate p3all = cb.and(p3);\r\n    Predicate pFinal = cb.or(cb.and(p1all, p2all), p3all);\r\n    criteria.where(pFinal);\r\n\r\nFor getting `where p1 and (p2 or p3)`:\r\n\r\n    Predicate pFinal = cb.and(cb.or(p2all, p3all), p1all);\r\n    criteria.where(pFinal);\r\n\r\nFinally, if you want to build a single predicate by concatenating an array of predicates with `or` statements, use this:\r\n\r\n    Predicate p1all = cb.or(p1); \r\n\r\n\r\n  [1]: http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#and(javax.persistence.criteria.Predicate...)\r\n  [2]: http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#or(javax.persistence.criteria.Predicate...)","title":"Criteria query combine and predicates and or predicates in where method","body":"<p>Simply combine your arrays of predicates into simple predicates, using <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#and(javax.persistence.criteria.Predicate...)\" rel=\"nofollow noreferrer\"><code>CriteriaBuilder.and(Predicate... restrictions)</code></a> and <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#or(javax.persistence.criteria.Predicate...)\" rel=\"nofollow noreferrer\"><code>CriteriaBuilder.or(Predicate... restrictions)</code></a></p>\n\n<p>For getting <code>where (p1 and p2) or p3</code>, where <code>p1</code>, <code>p2</code> and <code>p3</code> are all arrays of predicates concatenated with <code>and</code> statements:</p>\n\n<pre><code>Predicate[] p1 = new Predicate[2];\nPredicate[] p2 = new Predicate[2];\nPredicate[] p3 = new Predicate[2];\n// add your predicates to the arrays.     \nPredicate p1all = cb.and(p1);    \nPredicate p2all = cb.and(p2);\nPredicate p3all = cb.and(p3);\nPredicate pFinal = cb.or(cb.and(p1all, p2all), p3all);\ncriteria.where(pFinal);\n</code></pre>\n\n<p>For getting <code>where p1 and (p2 or p3)</code>:</p>\n\n<pre><code>Predicate pFinal = cb.and(cb.or(p2all, p3all), p1all);\ncriteria.where(pFinal);\n</code></pre>\n\n<p>Finally, if you want to build a single predicate by concatenating an array of predicates with <code>or</code> statements, use this:</p>\n\n<pre><code>Predicate p1all = cb.or(p1); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1570860,"reputation":384,"user_id":1458576,"accept_rate":50,"display_name":"ieselisra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674739214,"creation_date":1674738792,"answer_id":75246601,"question_id":43322504,"body_markdown":"By default all predicates are understood as &quot;AND&quot;.\r\n\r\nYou can &quot;play&quot; adding more complexity to the predicates using cb.and / cb.or (nested if needed)\r\n\r\nYou can create a list like this:\r\n\r\n    Root&lt;BeanA&gt; queryRoot = cq.from(BeanA.class);\r\n    \r\n    List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n    predicates.add(cb.equal(queryRoot.get(&quot;id&quot;), valueA);\r\n    predicates.add(cb.or(\r\n                    cb.equal(queryRoot.get(&quot;id&quot;), valueA,\r\n                    cb.equal(queryRoot.get(&quot;id&quot;), valueB\r\n            ));\r\n    predicates.add(cb.and(\r\n           cb.equal(queryRoot.get(&quot;valueC&quot;), valueC),\r\n           cb.or(\r\n                 cb.equal(queryRoot.get(&quot;id&quot;), valueA,\r\n                 cb.equal(queryRoot.get(&quot;id&quot;), valueB\r\n            ))\r\n    );\r\n    \r\n    cq.where(predicates.toArray(Predicate[]::new));\r\n\r\n\r\nIf needed, you can use a multiselect too (adding here the result of subqueries if you want to handle them)\r\n\r\n     List&lt;Selection&gt; selectList = new ArrayList&lt;&gt;();\r\n\r\n     selectList.add(queryRoot.get(&quot;id&quot;));\r\n     selectList.add(queryRoot.get(&quot;title&quot;));\r\n\r\n     cq.multiselect(selectList.toArray(Selection[]::new));\r\n\r\n\r\nAfter adding a multiselect you could need an orderBy.\r\nyou can follow the same concept but using a Expression list\r\n\r\n    List&lt;Expression&gt; groupByList = new ArrayList&lt;&gt;();\r\n\r\n    groupByList.add(proyectoJoin.get(&quot;id&quot;));\r\n    groupByList.add(proyectoJoin.get(&quot;title&quot;));\r\n     \r\n    cq.groupBy(groupByList.toArray(Expression[]::new));","title":"Criteria query combine and predicates and or predicates in where method","body":"<p>By default all predicates are understood as &quot;AND&quot;.</p>\n<p>You can &quot;play&quot; adding more complexity to the predicates using cb.and / cb.or (nested if needed)</p>\n<p>You can create a list like this:</p>\n<pre><code>Root&lt;BeanA&gt; queryRoot = cq.from(BeanA.class);\n\nList&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\npredicates.add(cb.equal(queryRoot.get(&quot;id&quot;), valueA);\npredicates.add(cb.or(\n                cb.equal(queryRoot.get(&quot;id&quot;), valueA,\n                cb.equal(queryRoot.get(&quot;id&quot;), valueB\n        ));\npredicates.add(cb.and(\n       cb.equal(queryRoot.get(&quot;valueC&quot;), valueC),\n       cb.or(\n             cb.equal(queryRoot.get(&quot;id&quot;), valueA,\n             cb.equal(queryRoot.get(&quot;id&quot;), valueB\n        ))\n);\n\ncq.where(predicates.toArray(Predicate[]::new));\n</code></pre>\n<p>If needed, you can use a multiselect too (adding here the result of subqueries if you want to handle them)</p>\n<pre><code> List&lt;Selection&gt; selectList = new ArrayList&lt;&gt;();\n\n selectList.add(queryRoot.get(&quot;id&quot;));\n selectList.add(queryRoot.get(&quot;title&quot;));\n\n cq.multiselect(selectList.toArray(Selection[]::new));\n</code></pre>\n<p>After adding a multiselect you could need an orderBy.\nyou can follow the same concept but using a Expression list</p>\n<pre><code>List&lt;Expression&gt; groupByList = new ArrayList&lt;&gt;();\n\ngroupByList.add(proyectoJoin.get(&quot;id&quot;));\ngroupByList.add(proyectoJoin.get(&quot;title&quot;));\n \ncq.groupBy(groupByList.toArray(Expression[]::new));\n</code></pre>\n"}],"owner":{"account_id":7279932,"reputation":724,"user_id":5550041,"accept_rate":56,"display_name":"V&#237;ctor G&#243;mez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7498,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":43327590,"answer_count":2,"score":1,"last_activity_date":1674739214,"creation_date":1491825365,"question_id":43322504,"body_markdown":"The `where` method of CriteriBuilder \r\n\r\n&gt; restricts the query result according to the conjunction of the specified restriction predicates\r\n\r\nIn other words, concatenate all predicates with AND. I pass a list of predicates to this method in this way:\r\n\r\n    criteria.where(preds.toArray(new Predicate[0]));\r\n\r\nThe result query is something like this:\r\n\r\n    ... where p1 and p2 and p3\r\n\r\nhowever what I need is:\r\n\r\n    ... where p1 and p2 or p3\r\n\r\nI tried to use two list of preds, one for &quot;ANDS&quot; and another one for &quot;ORS&quot;:\r\n\r\n    if(preds.isEmpty() &amp;&amp; !orPreds.isEmpty()) {\r\n\t    criteria.where(cb.or(orPreds.toArray(new Predicate[orPreds.size()])));\r\n\t}\r\n\telse if(!preds.isEmpty() &amp;&amp; !orPreds.isEmpty()) {\r\n\t    criteria.where(cb.and(preds.toArray(new Predicate[preds.size()])), \r\n        cb.or(orPreds.toArray(new Predicate[orPreds.size()])));\r\n\t}\r\n\telse {\r\n\t    criteria.where(preds.toArray(new Predicate[0]));\r\n\t}\r\n\r\nBut the result query is the same:\r\n\r\n    ... where p1 and p2 and p3\r\n\r\nAny idea?","title":"Criteria query combine and predicates and or predicates in where method","body":"<p>The <code>where</code> method of CriteriBuilder </p>\n\n<blockquote>\n  <p>restricts the query result according to the conjunction of the specified restriction predicates</p>\n</blockquote>\n\n<p>In other words, concatenate all predicates with AND. I pass a list of predicates to this method in this way:</p>\n\n<pre><code>criteria.where(preds.toArray(new Predicate[0]));\n</code></pre>\n\n<p>The result query is something like this:</p>\n\n<pre><code>... where p1 and p2 and p3\n</code></pre>\n\n<p>however what I need is:</p>\n\n<pre><code>... where p1 and p2 or p3\n</code></pre>\n\n<p>I tried to use two list of preds, one for \"ANDS\" and another one for \"ORS\":</p>\n\n<pre><code>if(preds.isEmpty() &amp;&amp; !orPreds.isEmpty()) {\n    criteria.where(cb.or(orPreds.toArray(new Predicate[orPreds.size()])));\n}\nelse if(!preds.isEmpty() &amp;&amp; !orPreds.isEmpty()) {\n    criteria.where(cb.and(preds.toArray(new Predicate[preds.size()])), \n    cb.or(orPreds.toArray(new Predicate[orPreds.size()])));\n}\nelse {\n    criteria.where(preds.toArray(new Predicate[0]));\n}\n</code></pre>\n\n<p>But the result query is the same:</p>\n\n<pre><code>... where p1 and p2 and p3\n</code></pre>\n\n<p>Any idea?</p>\n"},{"tags":["java","kotlin"],"owner":{"account_id":24365613,"reputation":36,"user_id":18299392,"display_name":"cls_404"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":405,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1674739045,"creation_date":1674739045,"question_id":75246662,"body_markdown":"Im getting this error.&lt;br/&gt; What I was doing was the code I want to run didnt run rather it showed up the **Edit Configurations**&lt;br/&gt;\r\n&lt;br/&gt;The error: ```Failed to download Amazon Corretto 18.0.2. EventQueue.isDispatchThread()=false Current thread: Thread[ApplicationImpl pooled thread 110,4,main] 2031890033 SystemEventQueueThread: Thread[AWT-EventQueue-0,6,main] 1808191328```&lt;br/&gt;\r\n\r\n&lt;br/&gt; This was what I was trying to fix: [Image][1] ``` Cannot access &#39;java.io.Serializable&#39; which is a supertype of &#39;kotlin.Array&#39;. Check your module classpath for missing or conflicting dependencies ```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vmT0a.png\r\n\r\nAnd it says that the **JDK &quot;corretto-18&quot; is not found on the disk or corrupted**.\r\n&lt;br/&gt;&lt;br/&gt;Im using: IntelliJ up to date, Java 18\r\n\r\nDoes anyone has a solution for this issue??\r\n\r\nThanks-","title":"Error on Intellij Idea when trying to run a kotlin project","body":"<p>Im getting this error.<br/> What I was doing was the code I want to run didnt run rather it showed up the <strong>Edit Configurations</strong><br/>\n<br/>The error: <code>Failed to download Amazon Corretto 18.0.2. EventQueue.isDispatchThread()=false Current thread: Thread[ApplicationImpl pooled thread 110,4,main] 2031890033 SystemEventQueueThread: Thread[AWT-EventQueue-0,6,main] 1808191328</code><br/></p>\n<p><br/> This was what I was trying to fix: <a href=\"https://i.stack.imgur.com/vmT0a.png\" rel=\"nofollow noreferrer\">Image</a> <code>Cannot access 'java.io.Serializable' which is a supertype of 'kotlin.Array'. Check your module classpath for missing or conflicting dependencies</code></p>\n<p>And it says that the <strong>JDK &quot;corretto-18&quot; is not found on the disk or corrupted</strong>.\n<br/><br/>Im using: IntelliJ up to date, Java 18</p>\n<p>Does anyone has a solution for this issue??</p>\n<p>Thanks-</p>\n"},{"tags":["java","jpa","criteria"],"comments":[{"owner":{"account_id":228790,"reputation":2446,"user_id":491320,"accept_rate":85,"display_name":"danizmax"},"score":0,"creation_date":1433493843,"post_id":18958614,"comment_id":49386422,"body_markdown":"possible duplicate of [Union All and Sum with JPA CriteriaBuilder](http://stackoverflow.com/questions/9104989/union-all-and-sum-with-jpa-criteriabuilder)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/9104989/union-all-and-sum-with-jpa-criteriabuilder\">Union All and Sum with JPA CriteriaBuilder</a>"}],"answers":[{"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":2,"creation_date":1379950511,"post_id":18958802,"comment_id":28007171,"body_markdown":"http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#UNION link to EL docs with examples","body":"<a href=\"http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#UNION\" rel=\"nofollow noreferrer\">wiki.eclipse.org/EclipseLink/UserGuide/JPA/&hellip;</a> link to EL docs with examples"}],"tags":[],"owner":{"account_id":1319573,"reputation":21851,"user_id":1265660,"accept_rate":75,"display_name":"Masudul"},"comment_count":1,"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1550601302,"creation_date":1379937870,"answer_id":18958802,"question_id":18958614,"body_markdown":"SQL supports UNION, but JPA 2.0 JPQL does not. Most unions can be done in terms of joins, but some can not, and some are more difficult to express using joins.\r\n\r\nEclipseLink supports UNION.","title":"UNION to JPA Query","body":"<p>SQL supports UNION, but JPA 2.0 JPQL does not. Most unions can be done in terms of joins, but some can not, and some are more difficult to express using joins.</p>\n\n<p>EclipseLink supports UNION.</p>\n"},{"comments":[{"owner":{"account_id":303904,"reputation":2751,"user_id":613114,"accept_rate":70,"display_name":"user613114"},"score":2,"creation_date":1470668675,"post_id":25135559,"comment_id":65030597,"body_markdown":"How to handle scenario if in subquery has more than 1000 results?","body":"How to handle scenario if in subquery has more than 1000 results?"},{"owner":{"account_id":4845979,"reputation":809,"user_id":3909596,"display_name":"szczepanpp"},"score":0,"creation_date":1473373331,"post_id":25135559,"comment_id":66128174,"body_markdown":"For MS SQL it&#39;s over 2000 actually, which doesn&#39;t change the fact it&#39;s not going to work.\n\nYou could fetch all those id&#39;s and then partition resulting list by the limit you want to set and then execute query for all sublists and join results. It&#39;s not that bad considering the way JPA works but then, as always, it depends on your use case.","body":"For MS SQL it&#39;s over 2000 actually, which doesn&#39;t change the fact it&#39;s not going to work.  You could fetch all those id&#39;s and then partition resulting list by the limit you want to set and then execute query for all sublists and join results. It&#39;s not that bad considering the way JPA works but then, as always, it depends on your use case."},{"owner":{"account_id":21945,"reputation":1757,"user_id":53732,"accept_rate":58,"display_name":"takacsot"},"score":1,"creation_date":1509114202,"post_id":25135559,"comment_id":80902080,"body_markdown":"Not even mentioning that certain usage of UNION is about avoiding OR (when tuning SQL performance). I personally have a sub-expression with OR what is very slow. After rewriting to use union it become  magnitude faster. Now I have to find a solution to build it up with CriteriaBuilder :(","body":"Not even mentioning that certain usage of UNION is about avoiding OR (when tuning SQL performance). I personally have a sub-expression with OR what is very slow. After rewriting to use union it become  magnitude faster. Now I have to find a solution to build it up with CriteriaBuilder :("},{"owner":{"account_id":2065937,"reputation":587,"user_id":1841447,"accept_rate":50,"display_name":"webyildirim"},"score":0,"creation_date":1512743476,"post_id":25135559,"comment_id":82392894,"body_markdown":"This &#39;or&#39; solution might cause to block usage of some indexes unfortunatelly","body":"This &#39;or&#39; solution might cause to block usage of some indexes unfortunatelly"},{"owner":{"account_id":1084159,"reputation":624,"user_id":1080301,"accept_rate":78,"display_name":"Thomas"},"score":0,"creation_date":1583321718,"post_id":25135559,"comment_id":107074543,"body_markdown":"The problem with over 1000 values (can be configured) does not apply with subqueries in Oracle. It only occurs when using parameters.","body":"The problem with over 1000 values (can be configured) does not apply with subqueries in Oracle. It only occurs when using parameters."}],"tags":[],"owner":{"account_id":4845979,"reputation":809,"user_id":3909596,"display_name":"szczepanpp"},"comment_count":5,"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1407231372,"creation_date":1407231372,"answer_id":25135559,"question_id":18958614,"body_markdown":"Depending on the case, one could use sub queries, something like:\r\n\r\n    select e\r\n    from Entity e\r\n    where e.id in\r\n    (\r\n      select e.id\r\n      from Entity2 e2\r\n           join e2.entity e\r\n      where e2.someProperty = &#39;value&#39;\r\n    )\r\n          or e.id in\r\n    (\r\n      select e.id\r\n      from Entity3 e3\r\n           join e3.entity e\r\n      where e3.someProperty = &#39;value2&#39;\r\n    )\r\n\r\n","title":"UNION to JPA Query","body":"<p>Depending on the case, one could use sub queries, something like:</p>\n\n<pre><code>select e\nfrom Entity e\nwhere e.id in\n(\n  select e.id\n  from Entity2 e2\n       join e2.entity e\n  where e2.someProperty = 'value'\n)\n      or e.id in\n(\n  select e.id\n  from Entity3 e3\n       join e3.entity e\n  where e3.someProperty = 'value2'\n)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2978147,"reputation":1529,"user_id":2528761,"display_name":"Ali Saeed"},"score":1,"creation_date":1480010925,"post_id":38977477,"comment_id":68807189,"body_markdown":"genius!!! should be considered the best answer until JPQL supports unions","body":"genius!!! should be considered the best answer until JPQL supports unions"},{"owner":{"account_id":428741,"reputation":3863,"user_id":811257,"display_name":"kopelitsa"},"score":11,"creation_date":1509096365,"post_id":38977477,"comment_id":80890795,"body_markdown":"Well, this is one of the obvious workarounds, but I also want to order the results all together for example and i prefer to do this in sql than in java","body":"Well, this is one of the obvious workarounds, but I also want to order the results all together for example and i prefer to do this in sql than in java"},{"owner":{"account_id":1811553,"reputation":1736,"user_id":1647509,"display_name":"cslotty"},"score":0,"creation_date":1509354225,"post_id":38977477,"comment_id":80969035,"body_markdown":"But that was not the question, kopelitsa, and you can always use SQL and make views.","body":"But that was not the question, kopelitsa, and you can always use SQL and make views."},{"owner":{"account_id":3476620,"reputation":1368,"user_id":2909636,"accept_rate":100,"display_name":"chaserb"},"score":1,"creation_date":1517350727,"post_id":38977477,"comment_id":84058411,"body_markdown":"I disagree. @Giovane asked if UNIONS could be performed in JPA, and the fact that a UNION could be accomplished in a SQL view is beside the point. Not all JPA use cases have the latitude to require database owners to create views in their databases.","body":"I disagree. @Giovane asked if UNIONS could be performed in JPA, and the fact that a UNION could be accomplished in a SQL view is beside the point. Not all JPA use cases have the latitude to require database owners to create views in their databases."},{"owner":{"account_id":1683624,"reputation":505,"user_id":1547327,"accept_rate":33,"display_name":"Sml004"},"score":9,"creation_date":1545038317,"post_id":38977477,"comment_id":94472469,"body_markdown":"but we cannot do pagination.","body":"but we cannot do pagination."},{"owner":{"account_id":2017031,"reputation":368,"user_id":1804091,"accept_rate":0,"display_name":"Motolola"},"score":0,"creation_date":1595453418,"post_id":38977477,"comment_id":111483979,"body_markdown":"This is a solution I had considered, but I guess there will be multiple database connections which will mean lesser performance, but with UNION ALL, you only throw you SQL query once.","body":"This is a solution I had considered, but I guess there will be multiple database connections which will mean lesser performance, but with UNION ALL, you only throw you SQL query once."},{"owner":{"account_id":1811553,"reputation":1736,"user_id":1647509,"display_name":"cslotty"},"score":0,"creation_date":1595491358,"post_id":38977477,"comment_id":111494456,"body_markdown":"@Motolola That&#39;s right, but on the other hand can a UNION ALL be very expensive in database systems. The connection shouldn&#39;t be a problem as long as you use connection pools.","body":"@Motolola That&#39;s right, but on the other hand can a UNION ALL be very expensive in database systems. The connection shouldn&#39;t be a problem as long as you use connection pools."},{"owner":{"account_id":2017031,"reputation":368,"user_id":1804091,"accept_rate":0,"display_name":"Motolola"},"score":0,"creation_date":1595501370,"post_id":38977477,"comment_id":111499673,"body_markdown":"@cslotty I haven&#39;t put both methods in a comparative tests, but my guess is one big call with &quot;UNION ALL&quot; should perform better than multiple smaller calls (considering multiple connections as well) on the overall app-database system.","body":"@cslotty I haven&#39;t put both methods in a comparative tests, but my guess is one big call with &quot;UNION ALL&quot; should perform better than multiple smaller calls (considering multiple connections as well) on the overall app-database system."},{"owner":{"account_id":1811553,"reputation":1736,"user_id":1647509,"display_name":"cslotty"},"score":0,"creation_date":1595576441,"post_id":38977477,"comment_id":111528460,"body_markdown":"@Motolola It really depends on the individual database system and the regarding context, and needs to be compared. Any assumption on the outcome is speculative as long as it can&#39;t be compared using JPA. I can only say from my experience, that UNION ALL could even be more costly than joining arrays in code, when using a connection pool.","body":"@Motolola It really depends on the individual database system and the regarding context, and needs to be compared. Any assumption on the outcome is speculative as long as it can&#39;t be compared using JPA. I can only say from my experience, that UNION ALL could even be more costly than joining arrays in code, when using a connection pool."},{"owner":{"account_id":2017031,"reputation":368,"user_id":1804091,"accept_rate":0,"display_name":"Motolola"},"score":0,"creation_date":1595588856,"post_id":38977477,"comment_id":111534138,"body_markdown":"@cslotty definitely speculative, I used a &quot;UNION ALL&quot; on a certain project that requires more than 1000 lists to be sent to Oracle, although the overall consensus from my team was to avoid multiple calls when possible, but i &#39;ll admit we never put it to a benchmark test, so it is a speculation as you have mentioned.","body":"@cslotty definitely speculative, I used a &quot;UNION ALL&quot; on a certain project that requires more than 1000 lists to be sent to Oracle, although the overall consensus from my team was to avoid multiple calls when possible, but i &#39;ll admit we never put it to a benchmark test, so it is a speculation as you have mentioned."},{"owner":{"account_id":1811553,"reputation":1736,"user_id":1647509,"display_name":"cslotty"},"score":0,"creation_date":1626791665,"post_id":38977477,"comment_id":120984294,"body_markdown":"@Sml004 Right - for pagination, again, you would have to make a proper view and then query the view. This is always an option, and it always depends on the use case, which solution you choose.","body":"@Sml004 Right - for pagination, again, you would have to make a proper view and then query the view. This is always an option, and it always depends on the use case, which solution you choose."}],"tags":[],"owner":{"account_id":1811553,"reputation":1736,"user_id":1647509,"display_name":"cslotty"},"comment_count":11,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1471358680,"creation_date":1471357365,"answer_id":38977477,"question_id":18958614,"body_markdown":"One thing just comes to my mind (searching for the exact same problem): \r\n\r\nPerform two different JPA queries on the same entity mapping and simply add the objects of the second result to the list (or set to avoid duplicates) of the first result.\r\n\r\nThat way you get the same effect as with a UNION, the difference being that you use two SQL statements instead of one. But actually, I would expect that to perform just as good as issueing one UNION statement.","title":"UNION to JPA Query","body":"<p>One thing just comes to my mind (searching for the exact same problem): </p>\n\n<p>Perform two different JPA queries on the same entity mapping and simply add the objects of the second result to the list (or set to avoid duplicates) of the first result.</p>\n\n<p>That way you get the same effect as with a UNION, the difference being that you use two SQL statements instead of one. But actually, I would expect that to perform just as good as issueing one UNION statement.</p>\n"},{"comments":[{"owner":{"display_name":"user8558216"},"score":2,"creation_date":1517510690,"post_id":43117761,"comment_id":84135703,"body_markdown":"Errm nope. JPQL has no &quot;UNION&quot; as all answers tell you. The only way that a JPA provider will accept that is if it provides a VENDOR EXTENSION. And has the OP said what JPA provider is used? Nope.","body":"Errm nope. JPQL has no &quot;UNION&quot; as all answers tell you. The only way that a JPA provider will accept that is if it provides a VENDOR EXTENSION. And has the OP said what JPA provider is used? Nope."}],"tags":[],"owner":{"account_id":3343454,"reputation":11,"user_id":2809140,"display_name":"Aman Sehgal"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1490876573,"creation_date":1490876573,"answer_id":43117761,"question_id":18958614,"body_markdown":"You can directly use UNION in your query.\r\nThe following query returns id of friends from FRIENDSHIP table.\r\n \r\nEg:\r\n\r\n    TypedQuery&lt;String&gt; queryFriend = em.createQuery(&quot;SELECT f.Id FROM Friendship f WHERE f.frStuId = :stuId UNION &quot;\r\n                                     + &quot;SELECT f.frStuId FROM Friendship f WHERE f.FriendId = :stuId&quot;, String.class);\r\n    queryFriend.setParameter(&quot;stuId&quot;, stuId);\r\n        \r\n    List&lt;String&gt; futureFriends = queryFriend.getResultList();","title":"UNION to JPA Query","body":"<p>You can directly use UNION in your query.\nThe following query returns id of friends from FRIENDSHIP table.</p>\n\n<p>Eg:</p>\n\n<pre><code>TypedQuery&lt;String&gt; queryFriend = em.createQuery(\"SELECT f.Id FROM Friendship f WHERE f.frStuId = :stuId UNION \"\n                                 + \"SELECT f.frStuId FROM Friendship f WHERE f.FriendId = :stuId\", String.class);\nqueryFriend.setParameter(\"stuId\", stuId);\n\nList&lt;String&gt; futureFriends = queryFriend.getResultList();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2017031,"reputation":368,"user_id":1804091,"accept_rate":0,"display_name":"Motolola"},"score":0,"creation_date":1595453508,"post_id":50961822,"comment_id":111484002,"body_markdown":"True, I don&#39;t know why this is voted down, but it is a very valid option, especially in terms of performance.","body":"True, I don&#39;t know why this is voted down, but it is a very valid option, especially in terms of performance."},{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":1,"creation_date":1619592152,"post_id":50961822,"comment_id":118948110,"body_markdown":"@Motolola maybe it&#39;s because the Answer is about JPA and not about Native queries?","body":"@Motolola maybe it&#39;s because the Answer is about JPA and not about Native queries?"}],"tags":[],"owner":{"account_id":10693952,"reputation":115,"user_id":7871836,"display_name":"Thieu Anh"},"comment_count":2,"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1529562777,"creation_date":1529562777,"answer_id":50961822,"question_id":18958614,"body_markdown":"using EntityManager.createNativeQuery(...);\r\nIt&#39;s allow you use UNION","title":"UNION to JPA Query","body":"<p>using EntityManager.createNativeQuery(...);\nIt's allow you use UNION</p>\n"},{"comments":[{"owner":{"account_id":3403134,"reputation":188,"user_id":2854878,"display_name":"Cleberson Falk"},"score":0,"creation_date":1700961741,"post_id":54718344,"comment_id":136716088,"body_markdown":"Can i return an pageable result like a Page&lt;MyCustomDataDto&gt;?","body":"Can i return an pageable result like a Page&lt;MyCustomDataDto&gt;?"}],"tags":[],"owner":{"account_id":8088812,"reputation":4423,"user_id":6095444,"display_name":"Pravin Bansal"},"comment_count":1,"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1550273325,"creation_date":1550273325,"answer_id":54718344,"question_id":18958614,"body_markdown":"write native query (set it true , default its false) - ex.\r\n\r\n    String findQuery = &quot;select xyz from abc union select abc from def&quot;\r\n    @Query(value = findQuery, nativeQuery = true)\r\n    //method","title":"UNION to JPA Query","body":"<p>write native query (set it true , default its false) - ex.</p>\n\n<pre><code>String findQuery = \"select xyz from abc union select abc from def\"\n@Query(value = findQuery, nativeQuery = true)\n//method\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7184343,"reputation":850,"user_id":5486945,"display_name":"yOshi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553267377,"creation_date":1553266981,"answer_id":55302501,"question_id":18958614,"body_markdown":"There is no direct union for JPA, what I did was to build two specifications.\r\n\r\n    Specification&lt;Task&gt; specification = Specification.where(null);\r\n    Specification&lt;Task&gt; specification2 = Specification.where(null;\r\n\r\nThey belong to a single table but return different values\r\n\r\n    specification = specification.and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.equal(criteriaBuilder.function(MONTH, Integer.class, root.get(&quot;deliveryExpirationDate&quot;)), month));\r\n            specification2 = specification2.and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.lessThan(criteriaBuilder.function(MONTH, Integer.class, root.get(&quot;deliveryExpirationDate&quot;)), month))\r\n                .and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.equal(root.get(&quot;enable&quot;), true));\r\n\r\nfor this example it is a table of tasks that in the first specification I need the tasks of the current month enabled and disabled, and in the second specification I only need the tasks enabled of the previous months.\r\n\r\n    Specification&lt;Task&gt; specificationFullJoin = Specification.where(specification).or(specification2);\r\n\r\nEsto es muy &#250;til para que la lista de tareas devueltas tenga paginaci&#243;n.\r\n\r\n    taskRepository.findAll(specificationFullJoin, pageable).map(TaskResponse::new); //Here you can continue adding filters, sort or search.\r\n\r\nIt helps me a lot, I hope it is what they are looking for or that it serves them something.\r\n\r\n\r\n","title":"UNION to JPA Query","body":"<p>There is no direct union for JPA, what I did was to build two specifications.</p>\n\n<pre><code>Specification&lt;Task&gt; specification = Specification.where(null);\nSpecification&lt;Task&gt; specification2 = Specification.where(null;\n</code></pre>\n\n<p>They belong to a single table but return different values</p>\n\n<pre><code>specification = specification.and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.equal(criteriaBuilder.function(MONTH, Integer.class, root.get(\"deliveryExpirationDate\")), month));\n        specification2 = specification2.and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.lessThan(criteriaBuilder.function(MONTH, Integer.class, root.get(\"deliveryExpirationDate\")), month))\n            .and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.equal(root.get(\"enable\"), true));\n</code></pre>\n\n<p>for this example it is a table of tasks that in the first specification I need the tasks of the current month enabled and disabled, and in the second specification I only need the tasks enabled of the previous months.</p>\n\n<pre><code>Specification&lt;Task&gt; specificationFullJoin = Specification.where(specification).or(specification2);\n</code></pre>\n\n<p>Esto es muy útil para que la lista de tareas devueltas tenga paginación.</p>\n\n<pre><code>taskRepository.findAll(specificationFullJoin, pageable).map(TaskResponse::new); //Here you can continue adding filters, sort or search.\n</code></pre>\n\n<p>It helps me a lot, I hope it is what they are looking for or that it serves them something.</p>\n"},{"tags":[],"owner":{"account_id":4790702,"reputation":21,"user_id":3869979,"display_name":"user3869979"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656234448,"creation_date":1656234448,"answer_id":72760234,"question_id":18958614,"body_markdown":"I have solved this in my project.\r\n\r\n**Union/Union All will work if you change it to native query and use like below** \r\n\r\n    //In Your Entity class\r\n    @NamedNativeQuery(name=&quot;EntityClassName.functionName&quot;, \r\n    query=&quot;your_native_query&quot;)\r\n\r\n    //In your Repository class\r\n    @Query(native=true)\r\n    List&lt;Result&gt; functionName();\r\n\r\n**Below method of defining Native query in JPA repository will not solve this problem** \r\n\r\n    @Query(value=&quot;your_native_query&quot;, native=true)\r\n\r\n will not","title":"UNION to JPA Query","body":"<p>I have solved this in my project.</p>\n<p><strong>Union/Union All will work if you change it to native query and use like below</strong></p>\n<pre><code>//In Your Entity class\n@NamedNativeQuery(name=&quot;EntityClassName.functionName&quot;, \nquery=&quot;your_native_query&quot;)\n\n//In your Repository class\n@Query(native=true)\nList&lt;Result&gt; functionName();\n</code></pre>\n<p><strong>Below method of defining Native query in JPA repository will not solve this problem</strong></p>\n<pre><code>@Query(value=&quot;your_native_query&quot;, native=true)\n</code></pre>\n<p>will not</p>\n"}],"owner":{"account_id":3168929,"reputation":753,"user_id":2678337,"accept_rate":80,"display_name":"Giovane"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121415,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":18958802,"answer_count":8,"score":46,"last_activity_date":1674738965,"creation_date":1379937337,"question_id":18958614,"body_markdown":"Is it possible to query &quot;UNION&quot; in JPA and even &quot;Criteria Builder&quot;?\r\n\r\nI&#39;m looking for examples, but so far i got no result.\r\n\r\nDoes anyone have any examples of how to use it?\r\n\r\nOr would that be with native sql?","title":"UNION to JPA Query","body":"<p>Is it possible to query \"UNION\" in JPA and even \"Criteria Builder\"?</p>\n\n<p>I'm looking for examples, but so far i got no result.</p>\n\n<p>Does anyone have any examples of how to use it?</p>\n\n<p>Or would that be with native sql?</p>\n"},{"tags":["java","maven","pom.xml","dependency-management"],"comments":[{"owner":{"account_id":19716283,"reputation":79,"user_id":14435654,"display_name":"mrxaxen"},"score":0,"creation_date":1674216388,"post_id":75183519,"comment_id":132671875,"body_markdown":"It seems maven can&#39;t find the package `com.hcb.neurotec.migrations.conversion` in the poms. Are you sure you have included it?","body":"It seems maven can&#39;t find the package <code>com.hcb.neurotec.migrations.conversion</code> in the poms. Are you sure you have included it?"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1674218810,"post_id":75183519,"comment_id":132672634,"body_markdown":"Did you `mvn install`ed the required dependency before?","body":"Did you <code>mvn install</code>ed the required dependency before?"},{"owner":{"account_id":25606831,"reputation":1,"user_id":19380802,"display_name":"Ikechukwu Paul Anene"},"score":0,"creation_date":1674403700,"post_id":75183519,"comment_id":132702588,"body_markdown":"@mrxaxen, yes it is included in the older module. \n\nPS: Excuse the late reply please, been very unwell.","body":"@mrxaxen, yes it is included in the older module.   PS: Excuse the late reply please, been very unwell."},{"owner":{"account_id":25606831,"reputation":1,"user_id":19380802,"display_name":"Ikechukwu Paul Anene"},"score":0,"creation_date":1674403711,"post_id":75183519,"comment_id":132702591,"body_markdown":"@ValerijDobler, yes I did this first before building the new module.","body":"@ValerijDobler, yes I did this first before building the new module."}],"answers":[{"tags":[],"owner":{"account_id":25606831,"reputation":1,"user_id":19380802,"display_name":"Ikechukwu Paul Anene"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674738946,"creation_date":1674738946,"answer_id":75246642,"question_id":75183519,"body_markdown":"Solved the error. Found out that the module I intend on importing as a dependency when built with mvn clean install, does not build correctly in the first place because:\r\n\r\n```\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n&lt;!--            Add class with main method to manifest--&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.hcb.neurotec.migrations.conversion.AbisExportConverter&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```\r\n\r\nThe module is not a spring project, so when the build gets to this block of code, it encounters issues that aren&#39;t surprisingly flagged. Removing this block in the old module allowed the new module build successfully.","title":"Cannot find classes from imported module during maven build","body":"<p>Solved the error. Found out that the module I intend on importing as a dependency when built with mvn clean install, does not build correctly in the first place because:</p>\n<pre><code>    &lt;build&gt;\n        &lt;plugins&gt;\n&lt;!--            Add class with main method to manifest--&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.hcb.neurotec.migrations.conversion.AbisExportConverter&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>The module is not a spring project, so when the build gets to this block of code, it encounters issues that aren't surprisingly flagged. Removing this block in the old module allowed the new module build successfully.</p>\n"}],"owner":{"account_id":25606831,"reputation":1,"user_id":19380802,"display_name":"Ikechukwu Paul Anene"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674738946,"creation_date":1674214728,"question_id":75183519,"body_markdown":"I am working on a module in a project that&#39;s to convert old data structure to match updated data structure. Since most of the methods and classes required for said conversion have already been implemented in a prior module in the same project, I added the prior module as a dependency in the new module.\r\nIt works, as I can access the required classes and their public methods. However, when I run &#39;mvn clean install&#39; to build the new module, the new module&#39;s build fails with errors about not finding the imported classes.\r\n\r\nHere is the parent pom file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!--suppress MavenModelInspection --&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\r\n        &lt;maven.compiler.version&gt;3.8.0&lt;/maven.compiler.version&gt;\r\n        &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.build.resourceEncoding&gt;UTF-8&lt;/project.build.resourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;modules&gt;\r\n        &lt;module&gt;abis-migrations-imports&lt;/module&gt;\r\n        &lt;module&gt;abis-migrations-export&lt;/module&gt;\r\n        &lt;module&gt;abis-migrations-conversion&lt;/module&gt;\r\n        &lt;module&gt;runtime-migrations-export&lt;/module&gt;\r\n        &lt;module&gt;runtime-migrations-conversion&lt;/module&gt;\r\n        &lt;module&gt;runtime-migrations-import&lt;/module&gt;\r\n\r\n    &lt;/modules&gt;\r\n    &lt;distributionManagement&gt;\r\n        &lt;snapshotRepository&gt;\r\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\r\n            &lt;id&gt;archiva-snapshot-repo&lt;/id&gt;\r\n            &lt;name&gt;hcb-snapshot-repo&lt;/name&gt;\r\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-snapshot-repo/&lt;/url&gt;\r\n        &lt;/snapshotRepository&gt;\r\n        &lt;repository&gt;\r\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\r\n            &lt;id&gt;archiva-release-repo&lt;/id&gt;\r\n            &lt;name&gt;hcb-release-repo&lt;/name&gt;\r\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-release-repo/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/distributionManagement&gt;\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n            &lt;id&gt;archiva-snapshot-repo&lt;/id&gt;\r\n            &lt;name&gt;hcb-snapshot-repo&lt;/name&gt;\r\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-snapshot-repo/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\r\n            &lt;id&gt;archiva-release-repo&lt;/id&gt;\r\n            &lt;name&gt;hcb-release-repo&lt;/name&gt;\r\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-release-repo/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nThis is the pom file of the older module:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\r\n        &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;artifactId&gt;abis-migrations-conversion&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;!-- MMABIS client --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hcb.3rdparty.libs&lt;/groupId&gt;\r\n            &lt;artifactId&gt;neurotec-abis-client-management-rest&lt;/artifactId&gt;\r\n            &lt;version&gt;12.0.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hcb.services.bioenroll&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bioenroll-inf&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n&lt;!--            Add class with main method to manifest--&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.hcb.neurotec.migrations.conversion.AbisExportConverter&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n\r\n            &lt;/plugin&gt;\r\n\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nThis is the pom file of the module I am working on whose build fails:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\r\n        &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;artifactId&gt;runtime-migrations-conversion&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\r\n            &lt;artifactId&gt;abis-migrations-conversion&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.hcb.runtime.migrations.conversion.RuntimeConversionApplication&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nHere is the build error:\r\n\r\n\r\n```\r\n[INFO] 45 errors\r\n[INFO] -------------------------------------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  12.418 s\r\n[INFO] Finished at: 2023-01-20T12:23:07+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project runtime-migrations-conversion: Compilation failure: Compilation failure:\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[4,46] package com.hcb.neurotec.migrations.conversion does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[5,46] package com.hcb.neurotec.migrations.conversion does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[6,46] package com.hcb.neurotec.migrations.conversion does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[7,46] package com.hcb.neurotec.migrations.conversion does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[8,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[9,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[10,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[11,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[12,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[13,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[27,59] package com.hcb.neurotec.migrations.conversion.utils does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[31,13] cannot find symbol\r\n[ERROR]   symbol:   class DirectoryUtils\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[32,13] cannot find symbol\r\n[ERROR]   symbol:   class ConversionDemograhpicsInfo\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[33,13] cannot find symbol\r\n[ERROR]   symbol:   class ConversionFaceInfo\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[34,13] cannot find symbol\r\n[ERROR]   symbol:   class ConversionPrintInfo\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[35,13] cannot find symbol\r\n[ERROR]   symbol:   class ConversionIrisInfo\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[39,13] cannot find symbol\r\n[ERROR]   symbol:   class SubjectDemographicsConverter\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[44,74] cannot find symbol\r\n[ERROR]   symbol:   class SubjectDemographicsConverter\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[50,42] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[63,42] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[95,35] cannot find symbol\r\n[ERROR]   symbol:   class SubjectDemographicsConverter\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[95,101] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[171,43] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[205,43] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[238,12] cannot find symbol\r\n[ERROR]   symbol:   class ConversionDemograhpicsInfo\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[7,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[8,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[25,13] cannot find symbol\r\n[ERROR]   symbol:   class DirectoryUtils\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RConvertedRecordInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[63,69] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RConvertedRecordInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[3,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[4,54] package com.hcb.neurotec.migrations.conversion.network does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[5,54] package com.hcb.neurotec.migrations.conversion.network does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[6,61] package com.hcb.neurotec.migrations.conversion.network.config does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[18,51] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionApplication\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[3,46] package com.hcb.neurotec.migrations.conversion does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[4,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[5,54] package com.hcb.neurotec.migrations.conversion.network does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[6,54] package com.hcb.neurotec.migrations.conversion.network does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[7,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[15,59] package com.hcb.neurotec.migrations.conversion.utils does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[15,1] static import only from classes and interfaces\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[19,19] cannot find symbol\r\n[ERROR]   symbol:   class SubjectDemographicsConverter\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[22,34] cannot find symbol\r\n[ERROR]   symbol:   class EnrolmentAPI\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[22,61] cannot find symbol\r\n[ERROR]   symbol:   class ConfigurationAPI\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[26,80] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\r\n[ERROR] -&gt; [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI have checked that they&#39;re both accounted for in the parent pom, I also ensured that the older module built successfully with &#39;mvn clean install&#39; before trying to build the module where it is used as a dependency.\r\n\r\n","title":"Cannot find classes from imported module during maven build","body":"<p>I am working on a module in a project that's to convert old data structure to match updated data structure. Since most of the methods and classes required for said conversion have already been implemented in a prior module in the same project, I added the prior module as a dependency in the new module.\nIt works, as I can access the required classes and their public methods. However, when I run 'mvn clean install' to build the new module, the new module's build fails with errors about not finding the imported classes.</p>\n<p>Here is the parent pom file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!--suppress MavenModelInspection --&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\n    &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n\n        &lt;maven.compiler.version&gt;3.8.0&lt;/maven.compiler.version&gt;\n        &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.build.resourceEncoding&gt;UTF-8&lt;/project.build.resourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;modules&gt;\n        &lt;module&gt;abis-migrations-imports&lt;/module&gt;\n        &lt;module&gt;abis-migrations-export&lt;/module&gt;\n        &lt;module&gt;abis-migrations-conversion&lt;/module&gt;\n        &lt;module&gt;runtime-migrations-export&lt;/module&gt;\n        &lt;module&gt;runtime-migrations-conversion&lt;/module&gt;\n        &lt;module&gt;runtime-migrations-import&lt;/module&gt;\n\n    &lt;/modules&gt;\n    &lt;distributionManagement&gt;\n        &lt;snapshotRepository&gt;\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\n            &lt;id&gt;archiva-snapshot-repo&lt;/id&gt;\n            &lt;name&gt;hcb-snapshot-repo&lt;/name&gt;\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-snapshot-repo/&lt;/url&gt;\n        &lt;/snapshotRepository&gt;\n        &lt;repository&gt;\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\n            &lt;id&gt;archiva-release-repo&lt;/id&gt;\n            &lt;name&gt;hcb-release-repo&lt;/name&gt;\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-release-repo/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n            &lt;id&gt;archiva-snapshot-repo&lt;/id&gt;\n            &lt;name&gt;hcb-snapshot-repo&lt;/name&gt;\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-snapshot-repo/&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\n            &lt;id&gt;archiva-release-repo&lt;/id&gt;\n            &lt;name&gt;hcb-release-repo&lt;/name&gt;\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-release-repo/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n&lt;/project&gt;\n</code></pre>\n<p>This is the pom file of the older module:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\n        &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;artifactId&gt;abis-migrations-conversion&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- MMABIS client --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.hcb.3rdparty.libs&lt;/groupId&gt;\n            &lt;artifactId&gt;neurotec-abis-client-management-rest&lt;/artifactId&gt;\n            &lt;version&gt;12.0.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.hcb.services.bioenroll&lt;/groupId&gt;\n            &lt;artifactId&gt;bioenroll-inf&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n&lt;!--            Add class with main method to manifest--&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.hcb.neurotec.migrations.conversion.AbisExportConverter&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>This is the pom file of the module I am working on whose build fails:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\n        &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;artifactId&gt;runtime-migrations-conversion&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\n            &lt;artifactId&gt;abis-migrations-conversion&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.hcb.runtime.migrations.conversion.RuntimeConversionApplication&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Here is the build error:</p>\n<pre><code>[INFO] 45 errors\n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  12.418 s\n[INFO] Finished at: 2023-01-20T12:23:07+01:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project runtime-migrations-conversion: Compilation failure: Compilation failure:\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[4,46] package com.hcb.neurotec.migrations.conversion does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[5,46] package com.hcb.neurotec.migrations.conversion does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[6,46] package com.hcb.neurotec.migrations.conversion does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[7,46] package com.hcb.neurotec.migrations.conversion does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[8,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[9,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[10,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[11,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[12,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[13,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[27,59] package com.hcb.neurotec.migrations.conversion.utils does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[31,13] cannot find symbol\n[ERROR]   symbol:   class DirectoryUtils\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[32,13] cannot find symbol\n[ERROR]   symbol:   class ConversionDemograhpicsInfo\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[33,13] cannot find symbol\n[ERROR]   symbol:   class ConversionFaceInfo\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[34,13] cannot find symbol\n[ERROR]   symbol:   class ConversionPrintInfo\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[35,13] cannot find symbol\n[ERROR]   symbol:   class ConversionIrisInfo\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[39,13] cannot find symbol\n[ERROR]   symbol:   class SubjectDemographicsConverter\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[44,74] cannot find symbol\n[ERROR]   symbol:   class SubjectDemographicsConverter\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[50,42] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[63,42] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[95,35] cannot find symbol\n[ERROR]   symbol:   class SubjectDemographicsConverter\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[95,101] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[171,43] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[205,43] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[238,12] cannot find symbol\n[ERROR]   symbol:   class ConversionDemograhpicsInfo\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[7,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[8,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[25,13] cannot find symbol\n[ERROR]   symbol:   class DirectoryUtils\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RConvertedRecordInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[63,69] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RConvertedRecordInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[3,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[4,54] package com.hcb.neurotec.migrations.conversion.network does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[5,54] package com.hcb.neurotec.migrations.conversion.network does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[6,61] package com.hcb.neurotec.migrations.conversion.network.config does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[18,51] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionApplication\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[3,46] package com.hcb.neurotec.migrations.conversion does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[4,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[5,54] package com.hcb.neurotec.migrations.conversion.network does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[6,54] package com.hcb.neurotec.migrations.conversion.network does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[7,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[15,59] package com.hcb.neurotec.migrations.conversion.utils does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[15,1] static import only from classes and interfaces\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[19,19] cannot find symbol\n[ERROR]   symbol:   class SubjectDemographicsConverter\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[22,34] cannot find symbol\n[ERROR]   symbol:   class EnrolmentAPI\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[22,61] cannot find symbol\n[ERROR]   symbol:   class ConfigurationAPI\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[26,80] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n\n</code></pre>\n<p>I have checked that they're both accounted for in the parent pom, I also ensured that the older module built successfully with 'mvn clean install' before trying to build the module where it is used as a dependency.</p>\n"},{"tags":["java","spring-boot","spring-boot-test"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1674673140,"post_id":75237933,"comment_id":132766968,"body_markdown":"The first one fails because you should use or `@DataJpaTest` (for a test slice) **or** `@SpringBootTest` for a full blown integration test. Adding both to a testcase doesn&#39;t make sense. Your tests fail because there is no `@SpringBootConfiguration` class to be found because you removed the application. You now basically have a regular Spring application without Spring Boot features. So you will need to manually configure your testing by providing the configuration.","body":"The first one fails because you should use or <code>@DataJpaTest</code> (for a test slice) <b>or</b> <code>@SpringBootTest</code> for a full blown integration test. Adding both to a testcase doesn&#39;t make sense. Your tests fail because there is no <code>@SpringBootConfiguration</code> class to be found because you removed the application. You now basically have a regular Spring application without Spring Boot features. So you will need to manually configure your testing by providing the configuration."},{"owner":{"account_id":90166,"reputation":3781,"user_id":248304,"accept_rate":88,"display_name":"angelcervera"},"score":0,"creation_date":1674684165,"post_id":75237933,"comment_id":132770000,"body_markdown":"Thanks for your comment, but this is exactly what I explain (I don&#39;t have SpringBootTest because it&#39;s not an application and first case is not working because I have multiple initialisations). My question is about how to test it and which set of annotations I need. I expected the last one working.","body":"Thanks for your comment, but this is exactly what I explain (I don&#39;t have SpringBootTest because it&#39;s not an application and first case is not working because I have multiple initialisations). My question is about how to test it and which set of annotations I need. I expected the last one working."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1674713726,"post_id":75237933,"comment_id":132773765,"body_markdown":"Why would the last one work as that still is an `@SpringBootTest` which cannot find the class with `@SpringBootApplication` to inspect it to know what to instantiate. (Or the `@SpringBootConfiguration` that is), without that ther will be no auto configuration.","body":"Why would the last one work as that still is an <code>@SpringBootTest</code> which cannot find the class with <code>@SpringBootApplication</code> to inspect it to know what to instantiate. (Or the <code>@SpringBootConfiguration</code> that is), without that ther will be no auto configuration."},{"owner":{"account_id":90166,"reputation":3781,"user_id":248304,"accept_rate":88,"display_name":"angelcervera"},"score":0,"creation_date":1674718082,"post_id":75237933,"comment_id":132774428,"body_markdown":"Could I use @SpringBootConfiguration someplace in the Test to enable the Spring Boot autoconfiguration?","body":"Could I use @SpringBootConfiguration someplace in the Test to enable the Spring Boot autoconfiguration?"}],"answers":[{"tags":[],"owner":{"account_id":90166,"reputation":3781,"user_id":248304,"accept_rate":88,"display_name":"angelcervera"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674738834,"creation_date":1674737945,"answer_id":75246454,"question_id":75237933,"body_markdown":"This is the working approach:\r\n\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@DataJpaTest\r\npublic class CustomerRepositoryTests {\r\n\r\n   @SpringBootApplication\r\n   static class TestConfig {}\r\n\r\n   @Autowired\r\n   private TestEntityManager entityManager;\r\n\r\n   @Autowired\r\n   private CustomerRepository customers;\r\n\r\n   @Test\r\n   public void testFindByLastName() {\r\n      ......\r\n\r\n   }\r\n}\r\n```\r\n\r\nSo each test class will autoconfigure the context using Spring Boot.\r\n\r\nReference: [spring-data-examples repository](https://github.com/spring-projects/spring-data-examples/blob/main/jpa/showcase/src/test/java/example/springdata/jpa/showcase/AbstractShowcaseTest.java)\r\n\r\n\r\n","title":"Testing library that is using spring boot 3","body":"<p>This is the working approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@DataJpaTest\npublic class CustomerRepositoryTests {\n\n   @SpringBootApplication\n   static class TestConfig {}\n\n   @Autowired\n   private TestEntityManager entityManager;\n\n   @Autowired\n   private CustomerRepository customers;\n\n   @Test\n   public void testFindByLastName() {\n      ......\n\n   }\n}\n</code></pre>\n<p>So each test class will autoconfigure the context using Spring Boot.</p>\n<p>Reference: <a href=\"https://github.com/spring-projects/spring-data-examples/blob/main/jpa/showcase/src/test/java/example/springdata/jpa/showcase/AbstractShowcaseTest.java\" rel=\"nofollow noreferrer\">spring-data-examples repository</a></p>\n"}],"owner":{"account_id":90166,"reputation":3781,"user_id":248304,"accept_rate":88,"display_name":"angelcervera"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1717,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":75246454,"answer_count":1,"score":1,"last_activity_date":1674738834,"creation_date":1674669176,"question_id":75237933,"body_markdown":"I have a library and I want to implement an integrations test for the Repository (only an example for a more complex case).\r\n\r\nTo reproduce the case, I used [this official example](https://github.com/spring-guides/gs-accessing-data-jpa/tree/main/complete), but removing the [`AccessingDataJpaApplication.java`](https://github.com/spring-guides/gs-accessing-data-jpa/blob/main/complete/src/main/java/com/example/accessingdatajpa/AccessingDataJpaApplication.java) class because I will expose it as a library and not as application.\r\n\r\nNow that the repo does not have the `@SpringBootApplication` annotation, [the test](https://github.com/spring-guides/gs-accessing-data-jpa/blob/main/complete/src/test/java/com/example/accessingdatajpa/CustomerRepositoryTests.java) will fail because can not inject the [`private CustomerRepository customers;`](https://github.com/spring-guides/gs-accessing-data-jpa/blob/968981c6a08362eab5ef864b86418347e959bb1d/complete/src/test/java/com/example/accessingdatajpa/CustomerRepositoryTests.java#L34)\r\n\r\n\r\nHow to reproduce the case:\r\n```bash\r\ngit clone https://github.com/spring-guides/gs-accessing-data-jpa.git\r\ncd gs-accessing-data-jpa/complete\r\nmvn test # Working\r\nrm src/main/java/com/example/accessingdatajpa/AccessingDataJpaApplication.java\r\nmvn test # not working\r\n```\r\n\r\n**The question is, which is the right way to annotate this test if it is not an application?**\r\n\r\n\r\nI tried annotating the test with few combinations like:\r\n- Adding `@SpringBootTest`:\r\n  ```java\r\n  @ExtendWith(SpringExtension.class)\r\n  @DataJpaTest\r\n  @SpringBootTest\r\n  public class CustomerRepositoryTests {\r\n  }\r\n  ```\r\n  The error looks like try to say that there are multiple inizializations, I suppose that each annotation try to do its own:\r\n  ```txt\r\n    [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.067 s &lt;&lt;&lt; FAILURE! - in com.example.accessingdatajpa.CustomerRepositoryTests\r\n    [ERROR] com.example.accessingdatajpa.CustomerRepositoryTests  Time elapsed: 0.067 s  &lt;&lt;&lt; ERROR!\r\n    java.lang.IllegalStateException: Configuration error: found multiple declarations of @BootstrapWith for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: [@org.springframework.test.context.BootstrapWith(value=org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper.class), @org.springframework.test.context.BootstrapWith(value=org.springframework.boot.test.context.SpringBootTestContextBootstrapper.class)]\r\n    ```\r\n- Setting only `@SpringBootTest`\r\n  ```java\r\n  @ExtendWith(SpringExtension.class)\r\n  @SpringBootTest\r\n  public class CustomerRepositoryTests {}\r\n  ```\r\n  Then I can not use the `TestEntityManager` and still is not able to inject the repository\r\n  ```txt\r\n   17:29:01.951 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [CustomerRepositoryTests]: using SpringBootContextLoader\r\n   17:29:01.954 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: no resource found for suffixes {-context.xml, Context.groovy}.\r\n   17:29:01.954 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: CustomerRepositoryTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\r\n   17:29:01.964 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using ContextCustomizers for test class [CustomerRepositoryTests]: [ExcludeFilterContextCustomizer, DuplicateJsonObjectContextCustomizer, MockitoContextCustomizer, TestRestTemplateContextCustomizer, DisableObservabilityContextCustomizer, PropertyMappingContextCustomizer, Customizer]\r\n   [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.117 s &lt;&lt;&lt; FAILURE! - in com.example.accessingdatajpa.CustomerRepositoryTests\r\n   [ERROR] com.example.accessingdatajpa.CustomerRepositoryTests  Time elapsed: 0.116 s  &lt;&lt;&lt; ERROR!\r\n   java.lang.NullPointerException: Cannot invoke &quot;java.lang.Class.getName()&quot; because &quot;found&quot; is null\r\n  ```\r\n- And `@SpringBootTest(classes = {CustomerRepository.class})`:\r\n  ```java \r\n  @ExtendWith(SpringExtension.class)\r\n  @SpringBootTest(classes = {CustomerRepository.class})\r\n  public class CustomerRepositoryTests {}\r\n  ```\r\n  With error: \r\n  ```text\r\n   org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;com.example.accessingdatajpa.CustomerRepositoryTests&#39;: Unsatisfied dependency expressed through field &#39;customers&#39;: No qualifying bean of type &#39;com.example.accessingdatajpa.CustomerRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n  ```\r\n  \r\nMaybe the solution is related to `[com.example.accessingdatajpa.CustomerRepositoryTests]: CustomerRepositoryTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.`. But how to do it exactly? \r\n\r\nBTW: I found [this response](https://stackoverflow.com/questions/58175467/testing-spring-boot-library-modules) in Stackoverflow, but it is not working. Maybe because the Spring version.\r\n  \r\n","title":"Testing library that is using spring boot 3","body":"<p>I have a library and I want to implement an integrations test for the Repository (only an example for a more complex case).</p>\n<p>To reproduce the case, I used <a href=\"https://github.com/spring-guides/gs-accessing-data-jpa/tree/main/complete\" rel=\"nofollow noreferrer\">this official example</a>, but removing the <a href=\"https://github.com/spring-guides/gs-accessing-data-jpa/blob/main/complete/src/main/java/com/example/accessingdatajpa/AccessingDataJpaApplication.java\" rel=\"nofollow noreferrer\"><code>AccessingDataJpaApplication.java</code></a> class because I will expose it as a library and not as application.</p>\n<p>Now that the repo does not have the <code>@SpringBootApplication</code> annotation, <a href=\"https://github.com/spring-guides/gs-accessing-data-jpa/blob/main/complete/src/test/java/com/example/accessingdatajpa/CustomerRepositoryTests.java\" rel=\"nofollow noreferrer\">the test</a> will fail because can not inject the <a href=\"https://github.com/spring-guides/gs-accessing-data-jpa/blob/968981c6a08362eab5ef864b86418347e959bb1d/complete/src/test/java/com/example/accessingdatajpa/CustomerRepositoryTests.java#L34\" rel=\"nofollow noreferrer\"><code>private CustomerRepository customers;</code></a></p>\n<p>How to reproduce the case:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git clone https://github.com/spring-guides/gs-accessing-data-jpa.git\ncd gs-accessing-data-jpa/complete\nmvn test # Working\nrm src/main/java/com/example/accessingdatajpa/AccessingDataJpaApplication.java\nmvn test # not working\n</code></pre>\n<p><strong>The question is, which is the right way to annotate this test if it is not an application?</strong></p>\n<p>I tried annotating the test with few combinations like:</p>\n<ul>\n<li>Adding <code>@SpringBootTest</code>:\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@DataJpaTest\n@SpringBootTest\npublic class CustomerRepositoryTests {\n}\n</code></pre>\nThe error looks like try to say that there are multiple inizializations, I suppose that each annotation try to do its own:\n<pre><code>  [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.067 s &lt;&lt;&lt; FAILURE! - in com.example.accessingdatajpa.CustomerRepositoryTests\n  [ERROR] com.example.accessingdatajpa.CustomerRepositoryTests  Time elapsed: 0.067 s  &lt;&lt;&lt; ERROR!\n  java.lang.IllegalStateException: Configuration error: found multiple declarations of @BootstrapWith for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: [@org.springframework.test.context.BootstrapWith(value=org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper.class), @org.springframework.test.context.BootstrapWith(value=org.springframework.boot.test.context.SpringBootTestContextBootstrapper.class)]\n</code></pre>\n</li>\n<li>Setting only <code>@SpringBootTest</code>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest\npublic class CustomerRepositoryTests {}\n</code></pre>\nThen I can not use the <code>TestEntityManager</code> and still is not able to inject the repository\n<pre><code>17:29:01.951 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [CustomerRepositoryTests]: using SpringBootContextLoader\n17:29:01.954 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: no resource found for suffixes {-context.xml, Context.groovy}.\n17:29:01.954 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: CustomerRepositoryTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\n17:29:01.964 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using ContextCustomizers for test class [CustomerRepositoryTests]: [ExcludeFilterContextCustomizer, DuplicateJsonObjectContextCustomizer, MockitoContextCustomizer, TestRestTemplateContextCustomizer, DisableObservabilityContextCustomizer, PropertyMappingContextCustomizer, Customizer]\n[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.117 s &lt;&lt;&lt; FAILURE! - in com.example.accessingdatajpa.CustomerRepositoryTests\n[ERROR] com.example.accessingdatajpa.CustomerRepositoryTests  Time elapsed: 0.116 s  &lt;&lt;&lt; ERROR!\njava.lang.NullPointerException: Cannot invoke &quot;java.lang.Class.getName()&quot; because &quot;found&quot; is null\n</code></pre>\n</li>\n<li>And <code>@SpringBootTest(classes = {CustomerRepository.class})</code>:\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(classes = {CustomerRepository.class})\npublic class CustomerRepositoryTests {}\n</code></pre>\nWith error:\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'com.example.accessingdatajpa.CustomerRepositoryTests': Unsatisfied dependency expressed through field 'customers': No qualifying bean of type 'com.example.accessingdatajpa.CustomerRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n</code></pre>\n</li>\n</ul>\n<p>Maybe the solution is related to <code>[com.example.accessingdatajpa.CustomerRepositoryTests]: CustomerRepositoryTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.</code>. But how to do it exactly?</p>\n<p>BTW: I found <a href=\"https://stackoverflow.com/questions/58175467/testing-spring-boot-library-modules\">this response</a> in Stackoverflow, but it is not working. Maybe because the Spring version.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9524,"page":699,"page_size":100}
