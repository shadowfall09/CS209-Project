{"items":[{"tags":["java","azure","blob"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1663693813,"post_id":73782477,"comment_id":130298394,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":2972412,"reputation":4264,"user_id":2524202,"accept_rate":72,"display_name":"SK."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663657057,"creation_date":1663657057,"answer_id":73782690,"question_id":73782477,"body_markdown":"Yes, it&#39;s possible to upload a file (PDF) into Azure Storage Account using Java, you need to use **Azure Blob Storage client library** for Java provided by Microsoft. A couple of links to get you started;\r\n\r\n[Microsoft Documentation: Manage blobs with Java v12 SDK][1]\r\n\r\n[Azure Storage libraries for Java][3]\r\n\r\n[Microsoft Documentation: Sample code][2] \r\n\r\n    // Create a local file in the ./data/ directory for uploading and downloading\r\n    String localPath = &quot;./data/&quot;;\r\n    String fileName = &quot;quickstart&quot; + java.util.UUID.randomUUID() + &quot;.txt&quot;;\r\n    File localFile = new File(localPath + fileName);\r\n    \r\n    // Write text to the file\r\n    FileWriter writer = new FileWriter(localPath + fileName, true);\r\n    writer.write(&quot;Hello, World!&quot;);\r\n    writer.close();\r\n    \r\n    // Get a reference to a blob\r\n    BlobClient blobClient = containerClient.getBlobClient(fileName);\r\n    \r\n    System.out.println(&quot;\\nUploading to Blob storage as blob:\\n\\t&quot; + blobClient.getBlobUrl());\r\n    \r\n    // Upload the blob\r\n    blobClient.uploadFromFile(localPath + fileName);\r\n\r\nIf this information helps you get going then consider accepting this answer and do a up vote, if not then provide your feedback. Thanks.\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java\r\n  [2]: https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java?tabs=powershell%2Cenvironment-variable-windows#upload-blobs-to-a-container\r\n  [3]: https://learn.microsoft.com/en-us/java/api/overview/azure/storage?view=azure-java-stable","title":"PDF to Azure Blob storage","body":"<p>Yes, it's possible to upload a file (PDF) into Azure Storage Account using Java, you need to use <strong>Azure Blob Storage client library</strong> for Java provided by Microsoft. A couple of links to get you started;</p>\n<p><a href=\"https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java\" rel=\"nofollow noreferrer\">Microsoft Documentation: Manage blobs with Java v12 SDK</a></p>\n<p><a href=\"https://learn.microsoft.com/en-us/java/api/overview/azure/storage?view=azure-java-stable\" rel=\"nofollow noreferrer\">Azure Storage libraries for Java</a></p>\n<p><a href=\"https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java?tabs=powershell%2Cenvironment-variable-windows#upload-blobs-to-a-container\" rel=\"nofollow noreferrer\">Microsoft Documentation: Sample code</a></p>\n<pre><code>// Create a local file in the ./data/ directory for uploading and downloading\nString localPath = &quot;./data/&quot;;\nString fileName = &quot;quickstart&quot; + java.util.UUID.randomUUID() + &quot;.txt&quot;;\nFile localFile = new File(localPath + fileName);\n\n// Write text to the file\nFileWriter writer = new FileWriter(localPath + fileName, true);\nwriter.write(&quot;Hello, World!&quot;);\nwriter.close();\n\n// Get a reference to a blob\nBlobClient blobClient = containerClient.getBlobClient(fileName);\n\nSystem.out.println(&quot;\\nUploading to Blob storage as blob:\\n\\t&quot; + blobClient.getBlobUrl());\n\n// Upload the blob\nblobClient.uploadFromFile(localPath + fileName);\n</code></pre>\n<p>If this information helps you get going then consider accepting this answer and do a up vote, if not then provide your feedback. Thanks.</p>\n"}],"owner":{"account_id":18527098,"reputation":11,"user_id":13498738,"display_name":"Nikhil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":423,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1663657057,"creation_date":1663655703,"question_id":73782477,"body_markdown":"I have requirement where I need to upload a pdf to Azure Blob.\r\nI have it pdf in base64 encoded form. Application do not have any storage. Is it possible to convert base64 to pdf and upload it as pdf without storing it in any location using java code.","title":"PDF to Azure Blob storage","body":"<p>I have requirement where I need to upload a pdf to Azure Blob.\nI have it pdf in base64 encoded form. Application do not have any storage. Is it possible to convert base64 to pdf and upload it as pdf without storing it in any location using java code.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":12991330,"reputation":94,"user_id":9390458,"display_name":"&#199;iğdem Erşep&#231;iler"},"score":0,"creation_date":1663654888,"post_id":73781748,"comment_id":130284399,"body_markdown":"code needs to stop if it finds the same numbers, thus needs a break statement. If there is no break then it will continue until j=num.length or i=num.length, and removes last duplicates.","body":"code needs to stop if it finds the same numbers, thus needs a break statement. If there is no break then it will continue until j=num.length or i=num.length, and removes last duplicates."},{"owner":{"account_id":18824736,"reputation":241,"user_id":13729933,"display_name":"Zabon"},"score":0,"creation_date":1663679593,"post_id":73781748,"comment_id":130292829,"body_markdown":"You could also use streams if you&#39;re on a java version &gt; 8:\nint[] nums = {0,0,1,1,1,2,2,3,3,4};\n\nreturn Arrays.stream(nums).distinct().toArray();\n\nThis should do the job too and is way more concise and readable.","body":"You could also use streams if you&#39;re on a java version &gt; 8: int[] nums = {0,0,1,1,1,2,2,3,3,4};  return Arrays.stream(nums).distinct().toArray();  This should do the job too and is way more concise and readable."}],"answers":[{"tags":[],"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663656961,"creation_date":1663656961,"answer_id":73782675,"question_id":73781748,"body_markdown":"Indent your code correctly, and you&#39;ll see that the corresponding part reads as:\r\n\r\n```\r\n            int found = 0;\r\n            for (int j = 0; j &lt; nums.length; j++) {\r\n                if ((nums[i] == nums[j]) &amp;&amp; (i != j) &amp;&amp; (j &lt; i))\r\n                    found = 1;\r\n                break;\r\n            }\r\n```\r\n\r\nYou can see, that the `break` is not only executed if the condition holds true but in every iteration, so also in the first one. The loop terminates as soon as you&#39;ve inspected the case `j == 0` which is incorrect, of course.\r\n\r\nAs you want to terminate the loop only if the condition holds true, just put the two lines after the if-statement into a code block:\r\n```\r\n            int found = 0;\r\n            for (int j = 0; j &lt; nums.length; j++) {\r\n                if ((nums[i] == nums[j]) &amp;&amp; (i != j) &amp;&amp; (j &lt; i)) {\r\n                    found = 1;\r\n                    break;\r\n                } \r\n            }\r\n```\r\n","title":"Why does my code only work when I comment out &quot;break;&quot;?","body":"<p>Indent your code correctly, and you'll see that the corresponding part reads as:</p>\n<pre><code>            int found = 0;\n            for (int j = 0; j &lt; nums.length; j++) {\n                if ((nums[i] == nums[j]) &amp;&amp; (i != j) &amp;&amp; (j &lt; i))\n                    found = 1;\n                break;\n            }\n</code></pre>\n<p>You can see, that the <code>break</code> is not only executed if the condition holds true but in every iteration, so also in the first one. The loop terminates as soon as you've inspected the case <code>j == 0</code> which is incorrect, of course.</p>\n<p>As you want to terminate the loop only if the condition holds true, just put the two lines after the if-statement into a code block:</p>\n<pre><code>            int found = 0;\n            for (int j = 0; j &lt; nums.length; j++) {\n                if ((nums[i] == nums[j]) &amp;&amp; (i != j) &amp;&amp; (j &lt; i)) {\n                    found = 1;\n                    break;\n                } \n            }\n</code></pre>\n"}],"owner":{"account_id":26303055,"reputation":3,"user_id":19968039,"display_name":"Bereket Mezgebu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73782675,"answer_count":1,"score":-1,"last_activity_date":1663656986,"creation_date":1663649031,"question_id":73781748,"body_markdown":"I am trying to solve a LeetCode question ([26. Remove Duplicates from Sorted Array][1]) and my code was not working until I commented out &quot;break;&quot;. Could someone explain why this is so? Here&#39;s my code:\r\n \r\n    class Solution {\r\n        public int removeDuplicates(int[] nums) {\r\n            int read = 0;\r\n            int write = 0;\r\n            \r\n            for (int i = 0; i &lt; nums.length; i++) {\r\n                int found = 0;\r\n                for (int j = 0; j &lt; nums.length; j++) {\r\n                    if ((nums[i] == nums[j]) &amp;&amp; (i != j) &amp;&amp; (j &lt; i))\r\n                        found = 1;\r\n                       // break;\r\n                    }\r\n                \r\n                if (found == 0) {\r\n                    nums[write] = nums[read];\r\n                    write++;\r\n                }\r\n                \r\n                read++;\r\n                \r\n            }\r\n            return write;\r\n        }\r\n    }\r\n\r\n  [1]: https://leetcode.com/problems/remove-duplicates-from-sorted-array/","title":"Why does my code only work when I comment out &quot;break;&quot;?","body":"<p>I am trying to solve a LeetCode question (<a href=\"https://leetcode.com/problems/remove-duplicates-from-sorted-array/\" rel=\"nofollow noreferrer\">26. Remove Duplicates from Sorted Array</a>) and my code was not working until I commented out &quot;break;&quot;. Could someone explain why this is so? Here's my code:</p>\n<pre><code>class Solution {\n    public int removeDuplicates(int[] nums) {\n        int read = 0;\n        int write = 0;\n        \n        for (int i = 0; i &lt; nums.length; i++) {\n            int found = 0;\n            for (int j = 0; j &lt; nums.length; j++) {\n                if ((nums[i] == nums[j]) &amp;&amp; (i != j) &amp;&amp; (j &lt; i))\n                    found = 1;\n                   // break;\n                }\n            \n            if (found == 0) {\n                nums[write] = nums[read];\n                write++;\n            }\n            \n            read++;\n            \n        }\n        return write;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","ignite","gridgain"],"answers":[{"tags":[],"owner":{"account_id":2182,"reputation":51860,"user_id":2998,"accept_rate":69,"display_name":"Stephen Darlington"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663656902,"creation_date":1616671050,"answer_id":66798384,"question_id":66798014,"body_markdown":"Ignite is only really tested with the LTS versions of Java, i.e., Java 8 and 11. I would stick with those versions.\r\n\r\nUpdate: Apache Ignite 2.13 supports Java 17.","title":"Apache Ignite Server Node(2.9.1) with Persistence Enabled using Java 15 throwing Exception","body":"<p>Ignite is only really tested with the LTS versions of Java, i.e., Java 8 and 11. I would stick with those versions.</p>\n<p>Update: Apache Ignite 2.13 supports Java 17.</p>\n"},{"tags":[],"owner":{"account_id":4755377,"reputation":1060,"user_id":3844277,"accept_rate":25,"display_name":"Milan Pandey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659344158,"creation_date":1659344158,"answer_id":73191201,"question_id":66798014,"body_markdown":"Try using following VM arguments, mentioned here:&lt;br/&gt; https://ignite.apache.org/docs/latest/quick-start/java#running-ignite-with-java-11\r\n\r\n&gt;     --add-exports=java.base/jdk.internal.misc=ALL-UNNAMED\r\n&gt;     --add-exports=java.base/sun.nio.ch=ALL-UNNAMED\r\n&gt;     --add-exports=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED\r\n&gt;     --add-exports=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED\r\n&gt;     --add-exports=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED\r\n&gt;     --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED\r\n&gt;     --illegal-access=permit\r\n\r\n","title":"Apache Ignite Server Node(2.9.1) with Persistence Enabled using Java 15 throwing Exception","body":"<p>Try using following VM arguments, mentioned here:<br/> <a href=\"https://ignite.apache.org/docs/latest/quick-start/java#running-ignite-with-java-11\" rel=\"nofollow noreferrer\">https://ignite.apache.org/docs/latest/quick-start/java#running-ignite-with-java-11</a></p>\n<blockquote>\n<pre><code>--add-exports=java.base/jdk.internal.misc=ALL-UNNAMED\n--add-exports=java.base/sun.nio.ch=ALL-UNNAMED\n--add-exports=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED\n--add-exports=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED\n--add-exports=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED\n--add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED\n--illegal-access=permit\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":15742512,"reputation":99,"user_id":11359474,"display_name":"Muhammad Osama Khan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1663656902,"creation_date":1616669705,"question_id":66798014,"body_markdown":"**Exception:**\r\n\r\n```\r\n[15:30:27,658][SEVERE][main][IgniteKernal] Exception during start processors, node will be stopped and close connections\r\njava.lang.NullPointerException: Cannot invoke &quot;java.lang.reflect.Method.invoke(Object, Object[])&quot; because &quot;org.apache.ignite.internal.processors.cache.persistence.wal.filehandle.FileWriteHandleImpl.mappingOffset&quot; is null\r\n\tat org.apache.ignite.internal.processors.cache.persistence.wal.filehandle.FileWriteHandleImpl.fsync(FileWriteHandleImpl.java:450)\r\n\tat org.apache.ignite.internal.processors.cache.persistence.wal.filehandle.FileWriteHandleImpl.fsync(FileWriteHandleImpl.java:419)\r\n\tat org.apache.ignite.internal.processors.cache.persistence.wal.filehandle.FileHandleManagerImpl.flush(FileHandleManagerImpl.java:270)\r\n\tat org.apache.ignite.internal.processors.cache.persistence.wal.FileWriteAheadLogManager.flush(FileWriteAheadLogManager.java:905)\r\n\tat org.apache.ignite.internal.processors.cache.persistence.GridCacheDatabaseSharedManager.tailPointer(GridCacheDatabaseSharedManager.java:2159)\r\n\tat org.apache.ignite.internal.processors.cache.persistence.GridCacheDatabaseSharedManager.startMemoryRestore(GridCacheDatabaseSharedManager.java:2087)\r\n\tat org.apache.ignite.internal.IgniteKernal.start(IgniteKernal.java:1257)\r\n\tat org.apache.ignite.internal.IgnitionEx$IgniteNamedInstance.start0(IgnitionEx.java:2052)\r\n\tat org.apache.ignite.internal.IgnitionEx$IgniteNamedInstance.start(IgnitionEx.java:1698)\r\n\tat org.apache.ignite.internal.IgnitionEx.start0(IgnitionEx.java:1114)\r\n\tat org.apache.ignite.internal.IgnitionEx.start(IgnitionEx.java:634)\r\n\tat org.apache.ignite.internal.IgnitionEx.start(IgnitionEx.java:560)\r\n\tat org.apache.ignite.Ignition.start(Ignition.java:328)\r\n\r\n```\r\n\r\n**Ignite Configuration :**\r\n\r\n```\r\n  public static IgniteConfiguration createConfiguration() {\r\n    \r\n    IgniteConfiguration cfg = new IgniteConfiguration();\r\n\r\n    // Enabling peer-class loading feature.\r\n    cfg.setPeerClassLoadingEnabled(true);\r\n\r\n    DataStorageConfiguration dataStorageCfg = new DataStorageConfiguration();\r\n    // Setting Persistence Enabled true\r\n    dataStorageCfg.getDefaultDataRegionConfiguration().setPersistenceEnabled(true);\r\n    cfg.setDataStorageConfiguration(dataStorageCfg);\r\n    \r\n    return cfg;\r\n    \r\n  }\r\n```\r\n\r\n**Although same configuration with Java 8 &amp; 11 is working fine.**\r\n\r\nAlso there is no issue with **PersistenceEnabled(false)** in Java 15 ","title":"Apache Ignite Server Node(2.9.1) with Persistence Enabled using Java 15 throwing Exception","body":"<p><strong>Exception:</strong></p>\n<pre><code>[15:30:27,658][SEVERE][main][IgniteKernal] Exception during start processors, node will be stopped and close connections\njava.lang.NullPointerException: Cannot invoke &quot;java.lang.reflect.Method.invoke(Object, Object[])&quot; because &quot;org.apache.ignite.internal.processors.cache.persistence.wal.filehandle.FileWriteHandleImpl.mappingOffset&quot; is null\n    at org.apache.ignite.internal.processors.cache.persistence.wal.filehandle.FileWriteHandleImpl.fsync(FileWriteHandleImpl.java:450)\n    at org.apache.ignite.internal.processors.cache.persistence.wal.filehandle.FileWriteHandleImpl.fsync(FileWriteHandleImpl.java:419)\n    at org.apache.ignite.internal.processors.cache.persistence.wal.filehandle.FileHandleManagerImpl.flush(FileHandleManagerImpl.java:270)\n    at org.apache.ignite.internal.processors.cache.persistence.wal.FileWriteAheadLogManager.flush(FileWriteAheadLogManager.java:905)\n    at org.apache.ignite.internal.processors.cache.persistence.GridCacheDatabaseSharedManager.tailPointer(GridCacheDatabaseSharedManager.java:2159)\n    at org.apache.ignite.internal.processors.cache.persistence.GridCacheDatabaseSharedManager.startMemoryRestore(GridCacheDatabaseSharedManager.java:2087)\n    at org.apache.ignite.internal.IgniteKernal.start(IgniteKernal.java:1257)\n    at org.apache.ignite.internal.IgnitionEx$IgniteNamedInstance.start0(IgnitionEx.java:2052)\n    at org.apache.ignite.internal.IgnitionEx$IgniteNamedInstance.start(IgnitionEx.java:1698)\n    at org.apache.ignite.internal.IgnitionEx.start0(IgnitionEx.java:1114)\n    at org.apache.ignite.internal.IgnitionEx.start(IgnitionEx.java:634)\n    at org.apache.ignite.internal.IgnitionEx.start(IgnitionEx.java:560)\n    at org.apache.ignite.Ignition.start(Ignition.java:328)\n\n</code></pre>\n<p><strong>Ignite Configuration :</strong></p>\n<pre><code>  public static IgniteConfiguration createConfiguration() {\n    \n    IgniteConfiguration cfg = new IgniteConfiguration();\n\n    // Enabling peer-class loading feature.\n    cfg.setPeerClassLoadingEnabled(true);\n\n    DataStorageConfiguration dataStorageCfg = new DataStorageConfiguration();\n    // Setting Persistence Enabled true\n    dataStorageCfg.getDefaultDataRegionConfiguration().setPersistenceEnabled(true);\n    cfg.setDataStorageConfiguration(dataStorageCfg);\n    \n    return cfg;\n    \n  }\n</code></pre>\n<p><strong>Although same configuration with Java 8 &amp; 11 is working fine.</strong></p>\n<p>Also there is no issue with <strong>PersistenceEnabled(false)</strong> in Java 15</p>\n"},{"tags":["java","spring","rest","cucumber","boot"],"comments":[{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1663575899,"post_id":73770463,"comment_id":130263697,"body_markdown":"It&#39;s possible. You&#39;d do it the same way you&#39;d mock the external service in a regular test with spring boot. So using Wiremock or some other framework.","body":"It&#39;s possible. You&#39;d do it the same way you&#39;d mock the external service in a regular test with spring boot. So using Wiremock or some other framework."},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1663582002,"post_id":73770463,"comment_id":130265641,"body_markdown":"It is not clear what place does your external service take within the entire topology. Who does call it? Is your cucumber test assumed to call that or it is external dependency to the application that is being tested with your cucumber test.","body":"It is not clear what place does your external service take within the entire topology. Who does call it? Is your cucumber test assumed to call that or it is external dependency to the application that is being tested with your cucumber test."},{"owner":{"account_id":17233715,"reputation":195,"user_id":12477643,"display_name":"askwer"},"score":0,"creation_date":1663631180,"post_id":73770463,"comment_id":130280842,"body_markdown":"@AlexeyR. hi, kindly see my edit.","body":"@AlexeyR. hi, kindly see my edit."}],"answers":[{"tags":[],"owner":{"account_id":17233715,"reputation":195,"user_id":12477643,"display_name":"askwer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663656709,"creation_date":1663656709,"answer_id":73782625,"question_id":73770463,"body_markdown":"OK I managed to make my tests using wiremock by following [this](https://blog.devgenius.io/how-to-test-spring-boot-microservice-independently-using-wiremock-d269d20fa626) .\r\n\r\n\r\nFor stubs be sure not to include the parameters in the path:\r\n\r\nif your request url looks like this\r\n\r\n```\r\nmyrequest/?value1=someValue\r\n```\r\n\r\nmake it like this in the stubs and append the parameters on the rest template or else it won&#39;t work\r\n\r\n```\r\nmyrequest/\r\n```\r\n\r\n```\r\nrestTemplate.getForEntity(url+&quot;value1=someValue&quot;....)\r\n```\r\n","title":"My rest services relies on an external service. How do I mock it to use on my cucumber tests?","body":"<p>OK I managed to make my tests using wiremock by following <a href=\"https://blog.devgenius.io/how-to-test-spring-boot-microservice-independently-using-wiremock-d269d20fa626\" rel=\"nofollow noreferrer\">this</a> .</p>\n<p>For stubs be sure not to include the parameters in the path:</p>\n<p>if your request url looks like this</p>\n<pre><code>myrequest/?value1=someValue\n</code></pre>\n<p>make it like this in the stubs and append the parameters on the rest template or else it won't work</p>\n<pre><code>myrequest/\n</code></pre>\n<pre><code>restTemplate.getForEntity(url+&quot;value1=someValue&quot;....)\n</code></pre>\n"}],"owner":{"account_id":17233715,"reputation":195,"user_id":12477643,"display_name":"askwer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":994,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73782625,"answer_count":1,"score":0,"last_activity_date":1663656709,"creation_date":1663575767,"question_id":73770463,"body_markdown":"I made some cucumber tests (given, when, then integration tests) in spring boot maven, and I was able to test my endpoints using TestRestTemplate, but only if the external service is running.\r\n\r\nThe external service job is to check some fields before I save the information to the database.\r\n\r\nWhen running the application normally the external service is called by FeignClient. \r\n\r\nIs it possible to mock the external service while using TestRestTemplate to test the endpoints?\r\n\r\n\r\nEDIT:\r\n\r\nSample mockup of the structure\r\n\r\nController.java\r\n```\r\n@Autowired\r\nEmployeeSvc employeeSvc;\r\n\r\n@PostMapping(/save)\r\npublic ResponseEntity&lt;String&gt; saveEmployee(@RequestBody EmployeeDTO employeeDTO) {\r\n    employeeSvc.save(employeeDTO);\r\n}\r\n```\r\n\r\nEmployeeSvc.java\r\n```\r\n@Autowired\r\nExternalSvcClient externalSvcClient;    //External service is called by feignclient here.\r\n@Autowired\r\nEmployeeRepository employeeRepository;\r\n\r\npublic void save(EmployeeDTO employeeDTO) {\r\n    externalSvcClient.check(employeeDTO);\r\n    \r\n    ...some other code\r\n    \r\n    Employee employee = dtoTransformer.transoform(employeeDTO);\r\n    employeeRepository.save(employee);\r\n}\r\n\r\n```","title":"My rest services relies on an external service. How do I mock it to use on my cucumber tests?","body":"<p>I made some cucumber tests (given, when, then integration tests) in spring boot maven, and I was able to test my endpoints using TestRestTemplate, but only if the external service is running.</p>\n<p>The external service job is to check some fields before I save the information to the database.</p>\n<p>When running the application normally the external service is called by FeignClient.</p>\n<p>Is it possible to mock the external service while using TestRestTemplate to test the endpoints?</p>\n<p>EDIT:</p>\n<p>Sample mockup of the structure</p>\n<p>Controller.java</p>\n<pre><code>@Autowired\nEmployeeSvc employeeSvc;\n\n@PostMapping(/save)\npublic ResponseEntity&lt;String&gt; saveEmployee(@RequestBody EmployeeDTO employeeDTO) {\n    employeeSvc.save(employeeDTO);\n}\n</code></pre>\n<p>EmployeeSvc.java</p>\n<pre><code>@Autowired\nExternalSvcClient externalSvcClient;    //External service is called by feignclient here.\n@Autowired\nEmployeeRepository employeeRepository;\n\npublic void save(EmployeeDTO employeeDTO) {\n    externalSvcClient.check(employeeDTO);\n    \n    ...some other code\n    \n    Employee employee = dtoTransformer.transoform(employeeDTO);\n    employeeRepository.save(employee);\n}\n\n</code></pre>\n"},{"tags":["java","eclipse","rest","jersey"],"comments":[{"owner":{"account_id":6072621,"reputation":898,"user_id":4740914,"display_name":"Yugerten"},"score":0,"creation_date":1564275325,"post_id":47970010,"comment_id":100976384,"body_markdown":"First,Jax-Rs 2.x (Jersey 2x) is better than 1.x, how can you have  &#39;javax.ws.rs.core.MediaType cannot be resolved&#39; exception from Jax-RS 1.x?","body":"First,Jax-Rs 2.x (Jersey 2x) is better than 1.x, how can you have  &#39;javax.ws.rs.core.MediaType cannot be resolved&#39; exception from Jax-RS 1.x?"}],"answers":[{"tags":[],"owner":{"account_id":12483588,"reputation":191,"user_id":9087497,"display_name":"yoav"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1663656625,"creation_date":1514220244,"answer_id":47970456,"question_id":47970010,"body_markdown":"I downloaded Jersey Client 1.19.4 from the [Maven Repository][1]\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.sun.jersey/jersey-client/1.19.4\r\n\r\nand I got the same problem as you.\r\n\r\n\r\nThis is how I overcome the problem:\r\n\r\n\r\nIf your project is not maven, convert it to maven.\r\nThen go to pom.xml and add this:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.sun.jersey/jersey-client --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n        &lt;version&gt;1.19.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nto your `&lt;dependencies&gt;` tag.\r\n\r\n\r\n\r\n","title":"The type javax.ws.rs.core.MediaType cannot be resolved","body":"<p>I downloaded Jersey Client 1.19.4 from the <a href=\"https://mvnrepository.com/artifact/com.sun.jersey/jersey-client/1.19.4\" rel=\"nofollow noreferrer\">Maven Repository</a></p>\n<p>and I got the same problem as you.</p>\n<p>This is how I overcome the problem:</p>\n<p>If your project is not maven, convert it to maven.\nThen go to pom.xml and add this:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.sun.jersey/jersey-client --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n    &lt;version&gt;1.19.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to your <code>&lt;dependencies&gt;</code> tag.</p>\n"},{"tags":[],"owner":{"account_id":9527261,"reputation":93,"user_id":7080129,"display_name":"sstlv_seraph"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1615599929,"creation_date":1564261792,"answer_id":57236098,"question_id":47970010,"body_markdown":"The solution from @yoav is great, but if someone has the same issue and doesn&#39;t want / need to convert to maven (which is better for dependency management) you just need to include all files from the zip file that you find following this [link][1]. \r\n\r\nYou will find: \r\n\r\n* jersey-client-1.19.4.jar\r\n* jersey-core-1.19.4.jar\r\n* jsr311-api-1.1.1.jar \r\n\r\nPut all of them into your lib.\r\n\r\n\r\n  [1]: https://jar-download.com/artifacts/com.sun.jersey/jersey-client/1.19.4/source-code","title":"The type javax.ws.rs.core.MediaType cannot be resolved","body":"<p>The solution from @yoav is great, but if someone has the same issue and doesn't want / need to convert to maven (which is better for dependency management) you just need to include all files from the zip file that you find following this <a href=\"https://jar-download.com/artifacts/com.sun.jersey/jersey-client/1.19.4/source-code\" rel=\"nofollow noreferrer\">link</a>.</p>\n<p>You will find:</p>\n<ul>\n<li>jersey-client-1.19.4.jar</li>\n<li>jersey-core-1.19.4.jar</li>\n<li>jsr311-api-1.1.1.jar</li>\n</ul>\n<p>Put all of them into your lib.</p>\n"}],"owner":{"account_id":12497827,"reputation":103,"user_id":9097199,"display_name":"K Raghu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12143,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":47970456,"answer_count":2,"score":4,"last_activity_date":1663656625,"creation_date":1514216332,"question_id":47970010,"body_markdown":"I am developing a Rest Client test program. I am new to this. From net I downloaded jersey-client-1.19.4.jar and added to Build Path in the eclipse. Every thing is fine except that webResource.accept gives below error.\r\n\r\n&gt; The type javax.ws.rs.core.MediaType cannot be resolved\r\n\r\nI am referring to REST Tutorials mentioned in below URL as reference for my test program development.\r\n\r\n[REST Client Tutorial][1]\r\n\r\nBelow is my code: Kindly help\r\n\r\n    import java.io.*;\r\n\r\n    import com.sun.jersey.api.client.Client;\r\n    import com.sun.jersey.api.client.ClientResponse;\r\n    import com.sun.jersey.api.client.WebResource;\r\n\r\n    public class Test {\r\n\r\n\tpublic static void main(String[] args) throws IOException{\r\n\t\t// TODO Auto-generated method stub\r\n\t\tSystem.out.println(&quot;File Name: &quot;+args[0]);\r\n\t\tString fileName = args[0];\r\n\t\t\r\n\t\tClient client = Client.create();\r\n\t\tWebResource webResource = client.resource(&quot;http://services.groupkt.com/country/get/iso2code/AX&quot;);\r\n\t\tClientResponse response = webResource.accept(&quot;application/json&quot;).get(ClientResponse.class);\r\n\t\t\r\n\t\tif (response.getStatus() != 200) \r\n        {\r\n           throw new Exception(&quot;Exception Occured - HTTP Error Code : &quot;\r\n            + response.getStatus());\r\n        }\r\n\r\n        String output = response.getEntity(String.class);\r\n\r\n        System.out.println(&quot;Fetching Output....&quot;);\r\n        System.out.println(output);\r\n\t}\r\n\r\n}\r\n\r\n\r\n  [1]: http://www.javainterviewpoint.com/restful-java-client-jersey-client/","title":"The type javax.ws.rs.core.MediaType cannot be resolved","body":"<p>I am developing a Rest Client test program. I am new to this. From net I downloaded jersey-client-1.19.4.jar and added to Build Path in the eclipse. Every thing is fine except that webResource.accept gives below error.</p>\n\n<blockquote>\n  <p>The type javax.ws.rs.core.MediaType cannot be resolved</p>\n</blockquote>\n\n<p>I am referring to REST Tutorials mentioned in below URL as reference for my test program development.</p>\n\n<p><a href=\"http://www.javainterviewpoint.com/restful-java-client-jersey-client/\" rel=\"nofollow noreferrer\">REST Client Tutorial</a></p>\n\n<p>Below is my code: Kindly help</p>\n\n<pre><code>import java.io.*;\n\nimport com.sun.jersey.api.client.Client;\nimport com.sun.jersey.api.client.ClientResponse;\nimport com.sun.jersey.api.client.WebResource;\n\npublic class Test {\n\npublic static void main(String[] args) throws IOException{\n    // TODO Auto-generated method stub\n    System.out.println(\"File Name: \"+args[0]);\n    String fileName = args[0];\n\n    Client client = Client.create();\n    WebResource webResource = client.resource(\"http://services.groupkt.com/country/get/iso2code/AX\");\n    ClientResponse response = webResource.accept(\"application/json\").get(ClientResponse.class);\n\n    if (response.getStatus() != 200) \n    {\n       throw new Exception(\"Exception Occured - HTTP Error Code : \"\n        + response.getStatus());\n    }\n\n    String output = response.getEntity(String.class);\n\n    System.out.println(\"Fetching Output....\");\n    System.out.println(output);\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","json","tomcat"],"answers":[{"tags":[],"owner":{"account_id":29885,"reputation":41593,"user_id":81071,"accept_rate":77,"display_name":"Koraktor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1416208326,"creation_date":1416208326,"answer_id":26967362,"question_id":26967234,"body_markdown":"This can be done using multiple reverse proxies that provide different parameters to the Tomcat webapp. The simplest setup (with Apache HTTP and [mod_proxy_ajp](http://httpd.apache.org/docs/2.4/mod/mod_proxy_ajp.html)) would probably be to preserve the original request&#39;s host and resolve that inside the web app.\r\n\r\n    &lt;VirtualHost *:80&gt;\r\n        ServerName companyname1.domain.com\r\n\r\n        ProxyPass / ajp://localhost:8009/\r\n        ProxyPassReverse / ajp://localhost:8009/\r\n        ProxyPreserveHost On\r\n    &lt;/VirtualHost&gt;\r\n\r\n    &lt;VirtualHost *:80&gt;\r\n        ServerName companyname2.domain.com\r\n\r\n        ProxyPass /api ajp://localhost:8009/\r\n        ProxyPassReverse / ajp://localhost:8009/\r\n        ProxyPreserveHost On\r\n    &lt;/VirtualHost&gt;\r\n\r\n    &lt;VirtualHost *:80&gt;\r\n        ServerName companyname3.domain.com\r\n\r\n        ProxyPass / ajp://localhost:8009/\r\n        ProxyPassReverse / ajp://localhost:8009/\r\n        ProxyPreserveHost On\r\n    &lt;/VirtualHost&gt;","title":"Multi-tenancy on tomcat","body":"<p>This can be done using multiple reverse proxies that provide different parameters to the Tomcat webapp. The simplest setup (with Apache HTTP and <a href=\"http://httpd.apache.org/docs/2.4/mod/mod_proxy_ajp.html\" rel=\"nofollow\">mod_proxy_ajp</a>) would probably be to preserve the original request's host and resolve that inside the web app.</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    ServerName companyname1.domain.com\n\n    ProxyPass / ajp://localhost:8009/\n    ProxyPassReverse / ajp://localhost:8009/\n    ProxyPreserveHost On\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:80&gt;\n    ServerName companyname2.domain.com\n\n    ProxyPass /api ajp://localhost:8009/\n    ProxyPassReverse / ajp://localhost:8009/\n    ProxyPreserveHost On\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:80&gt;\n    ServerName companyname3.domain.com\n\n    ProxyPass / ajp://localhost:8009/\n    ProxyPassReverse / ajp://localhost:8009/\n    ProxyPreserveHost On\n&lt;/VirtualHost&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1390146,"reputation":2976,"user_id":1321158,"accept_rate":0,"display_name":"Ashish Agarwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416209139,"creation_date":1416209139,"answer_id":26967536,"question_id":26967234,"body_markdown":"    I can not comment because of my reputation is below than 50.\r\n    \r\n    if URI is same like \r\n    companyname1.domain.com/api/getUsers\r\n    companyname2.domain.com/api/getUsers\r\n    companyname3.domain.com/api/getUsers\r\n    \r\n    then Apache web server found domain companyname1.domain.com and from httpd file, it send call to tomcat application server through AJP connector. But problem is that how can it found which war file to run. \r\nSo application name is required in URL\r\n    \r\n    companyname1.domain.com/abc/api/getUsers\r\n    companyname2.domain.com/xyz/api/getUsers\r\n    companyname3.domain.com/fgf/api/getUsers","title":"Multi-tenancy on tomcat","body":"<pre><code>I can not comment because of my reputation is below than 50.\n\nif URI is same like \ncompanyname1.domain.com/api/getUsers\ncompanyname2.domain.com/api/getUsers\ncompanyname3.domain.com/api/getUsers\n\nthen Apache web server found domain companyname1.domain.com and from httpd file, it send call to tomcat application server through AJP connector. But problem is that how can it found which war file to run. \n</code></pre>\n\n<p>So application name is required in URL</p>\n\n<pre><code>companyname1.domain.com/abc/api/getUsers\ncompanyname2.domain.com/xyz/api/getUsers\ncompanyname3.domain.com/fgf/api/getUsers\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1416209677,"creation_date":1416209677,"answer_id":26967650,"question_id":26967234,"body_markdown":"Create several [virtual hosts](http://tomcat.apache.org/tomcat-7.0-doc/virtual-hosting-howto.html) in your Tomcats **server.xml**, that listen to your domains. These should point to **different webapps directories**, hosting your particular application in the **ROOT** directory:\r\n\r\n    &lt;Host name=&quot;localhost&quot; appBase=&quot;domain1-webapps&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot;&gt;&lt;/Host&gt;\r\n    &lt;Host name=&quot;companyname1.domain.com&quot; appBase=&quot;domain1-webapps&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot;&gt;&lt;/Host&gt;\r\n    &lt;Host name=&quot;companyname2.domain.com&quot; appBase=&quot;domain2-webapps&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot;&gt;&lt;/Host&gt;\r\n    ...\r\n","title":"Multi-tenancy on tomcat","body":"<p>Create several <a href=\"http://tomcat.apache.org/tomcat-7.0-doc/virtual-hosting-howto.html\" rel=\"nofollow\">virtual hosts</a> in your Tomcats <strong>server.xml</strong>, that listen to your domains. These should point to <strong>different webapps directories</strong>, hosting your particular application in the <strong>ROOT</strong> directory:</p>\n\n<pre><code>&lt;Host name=\"localhost\" appBase=\"domain1-webapps\" autoDeploy=\"true\" unpackWARs=\"true\"&gt;&lt;/Host&gt;\n&lt;Host name=\"companyname1.domain.com\" appBase=\"domain1-webapps\" autoDeploy=\"true\" unpackWARs=\"true\"&gt;&lt;/Host&gt;\n&lt;Host name=\"companyname2.domain.com\" appBase=\"domain2-webapps\" autoDeploy=\"true\" unpackWARs=\"true\"&gt;&lt;/Host&gt;\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10593161,"reputation":79,"user_id":7802954,"display_name":"Bhanu PS Kushwah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663656559,"creation_date":1497269801,"answer_id":44499225,"question_id":26967234,"body_markdown":"    We can use server context setting. As per tomcat server specification. \r\n    \r\n    The Host element represents a virtual host, which is an association of a network name for a server (such as &quot;www.mycompany.com&quot;) \r\n    with the particular server on which Tomcat is running. For clients to be able to connect to a Tomcat server using its network name,\r\n    this name must be registered in the Domain Name Service (DNS) server that manages the Internet domain you belong to - contact your Network Administrator \r\n    for more information.\r\n        \r\n    In many cases, System Administrators wish to associate more than one network name (such as www.mycompany.com and company.com) \r\n    with the same virtual host and applications. This can be accomplished using the Host Name Aliases feature discussed below.\r\n        \r\n    One or more Host elements are nested inside an Engine element. \r\n    Inside the Host element, you can nest Context elements for the web applications associated with this virtual host. \r\n    Exactly one of the Hosts associated with each Engine MUST have a name matching the defaultHost attribute of that Engine.\r\n        \r\n    Clients normally use host names to identify the server they wish to connect to. This host name is also included in the HTTP request headers. \r\n    Tomcat extracts the host name from the HTTP headers and looks for a Host with a matching name. \r\n    If no match is found, the request is routed to the default host. \r\n    The name of the default host does not have to match a DNS name (although it can) since any request where the \r\n    DNS name does not match the name of a Host element will be routed to the default host.\r\n    \r\n    For more info. go through this link. \r\n    :https://tomcat.apache.org/tomcat-8.0-doc/config/host.html","title":"Multi-tenancy on tomcat","body":"<pre><code>We can use server context setting. As per tomcat server specification. \n\nThe Host element represents a virtual host, which is an association of a network name for a server (such as &quot;www.mycompany.com&quot;) \nwith the particular server on which Tomcat is running. For clients to be able to connect to a Tomcat server using its network name,\nthis name must be registered in the Domain Name Service (DNS) server that manages the Internet domain you belong to - contact your Network Administrator \nfor more information.\n    \nIn many cases, System Administrators wish to associate more than one network name (such as www.mycompany.com and company.com) \nwith the same virtual host and applications. This can be accomplished using the Host Name Aliases feature discussed below.\n    \nOne or more Host elements are nested inside an Engine element. \nInside the Host element, you can nest Context elements for the web applications associated with this virtual host. \nExactly one of the Hosts associated with each Engine MUST have a name matching the defaultHost attribute of that Engine.\n    \nClients normally use host names to identify the server they wish to connect to. This host name is also included in the HTTP request headers. \nTomcat extracts the host name from the HTTP headers and looks for a Host with a matching name. \nIf no match is found, the request is routed to the default host. \nThe name of the default host does not have to match a DNS name (although it can) since any request where the \nDNS name does not match the name of a Host element will be routed to the default host.\n\nFor more info. go through this link. \n:https://tomcat.apache.org/tomcat-8.0-doc/config/host.html\n</code></pre>\n"}],"owner":{"account_id":1575126,"reputation":228,"user_id":1461800,"accept_rate":50,"display_name":"Moshe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2485,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":26967650,"answer_count":4,"score":1,"last_activity_date":1663656559,"creation_date":1416207778,"question_id":26967234,"body_markdown":"I&#39;ve set of JSON APIs that are exposed and implemented on Tomcat.\r\nI would like to implement Multi-tenancy for these APIs on Tomcat with the following URL approach:\r\n\r\n    companyname1.domain.com/api/getUsers...\r\n    companyname2.domain.com/api/getUsers...\r\n    companyname3.domain.com/api/getUsers...\r\n\r\nLet me know if there is a best practice for implementing it using context or other mechanism. I don&#39;t want to create a separate Tomcat instance for each and every company.\r\nIn addition is there any way to create it dynamically once company is registered.\r\n\r\nThank you in advance,\r\nMoshe","title":"Multi-tenancy on tomcat","body":"<p>I've set of JSON APIs that are exposed and implemented on Tomcat.\nI would like to implement Multi-tenancy for these APIs on Tomcat with the following URL approach:</p>\n\n<pre><code>companyname1.domain.com/api/getUsers...\ncompanyname2.domain.com/api/getUsers...\ncompanyname3.domain.com/api/getUsers...\n</code></pre>\n\n<p>Let me know if there is a best practice for implementing it using context or other mechanism. I don't want to create a separate Tomcat instance for each and every company.\nIn addition is there any way to create it dynamically once company is registered.</p>\n\n<p>Thank you in advance,\nMoshe</p>\n"},{"tags":["python","java","database","cassandra","datastax"],"answers":[{"tags":[],"owner":{"account_id":9963,"reputation":82983,"user_id":18627,"display_name":"Alex Ott"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663656041,"creation_date":1663656041,"answer_id":73782528,"question_id":73781265,"body_markdown":"Instead of trying to write data loading code yourself, I would recommend to adopt a [DSBulk tool][1] that is heavily optimized for loading/unloading data to/from Cassandra. And it&#39;s [open source][2], so you can even use it as a Java library.\r\n\r\nThere are few reason for that:\r\n\r\n* Writing async code isn&#39;t easy - you need to make sure that you aren&#39;t sending too many requests over the same connection (Cassandra has a limit on number of the in-flight requests).  For driver 3.x you can use something like [this][3], and driver 4.x has built-in rate limiting capabilities\r\n* Batch in Cassandra often leads to performance degradation when isn&#39;t used correctly. Batch should be used only for submitting the data that belongs to the same partition, otherwise it would cause a higher load on the coordinating node. Plus you also need to implement a custom routing.\r\n\r\nDSBulk is doing all of that very efficiently as it was written by people who are working with Cassandra every day in large scale setups.\r\n\r\nP.S. in your case, consistency level ANY means that coordinator just acknowledge receiving of data, but doesn&#39;t guarantee that it will be written (for example if it&#39;s crashed).\r\n\r\n  [1]: https://docs.datastax.com/en/dsbulk/docs/reference/dsbulkCmd.html\r\n  [2]: https://github.com/datastax/dsbulk\r\n  [3]: https://github.com/alexott/cassandra-dse-playground/blob/master/driver-1.x/src/main/java/com/datastax/alexott/demos/SessionLimiter.java","title":"How to efficiently write large amounts of data to Cassandra via Java or Python?","body":"<p>Instead of trying to write data loading code yourself, I would recommend to adopt a <a href=\"https://docs.datastax.com/en/dsbulk/docs/reference/dsbulkCmd.html\" rel=\"nofollow noreferrer\">DSBulk tool</a> that is heavily optimized for loading/unloading data to/from Cassandra. And it's <a href=\"https://github.com/datastax/dsbulk\" rel=\"nofollow noreferrer\">open source</a>, so you can even use it as a Java library.</p>\n<p>There are few reason for that:</p>\n<ul>\n<li>Writing async code isn't easy - you need to make sure that you aren't sending too many requests over the same connection (Cassandra has a limit on number of the in-flight requests).  For driver 3.x you can use something like <a href=\"https://github.com/alexott/cassandra-dse-playground/blob/master/driver-1.x/src/main/java/com/datastax/alexott/demos/SessionLimiter.java\" rel=\"nofollow noreferrer\">this</a>, and driver 4.x has built-in rate limiting capabilities</li>\n<li>Batch in Cassandra often leads to performance degradation when isn't used correctly. Batch should be used only for submitting the data that belongs to the same partition, otherwise it would cause a higher load on the coordinating node. Plus you also need to implement a custom routing.</li>\n</ul>\n<p>DSBulk is doing all of that very efficiently as it was written by people who are working with Cassandra every day in large scale setups.</p>\n<p>P.S. in your case, consistency level ANY means that coordinator just acknowledge receiving of data, but doesn't guarantee that it will be written (for example if it's crashed).</p>\n"}],"owner":{"account_id":17864196,"reputation":21,"user_id":12976935,"display_name":"HuhangChen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":516,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1663656234,"creation_date":1663643675,"question_id":73781265,"body_markdown":"There are about **millions of rows** of data that need to be written to Cassandra.I have tried the following methods:\r\n\r\nThe first: According to the reference code given by Datastax [java-driver][1] or [python-driver][2] on GitHub, my code is similar to:\r\n\r\n        // The following code is fixed, and this part will be omitted later.\r\n        String cassandraHost = &quot;******&quot;;\r\n        String keyspace = &quot;******&quot;;\r\n        String table = &quot;******&quot;;\r\n        String insertCqlStr = &quot; insert into &quot; + keyspace + &quot;.&quot; + table +&quot;( &quot;\r\n                +     &quot;id,date,value)&quot;\r\n                +     &quot; values ( ?, ?, ?) ;&quot;;\r\n        CqlSession session = CqlSession.builder()\r\n                .addContactPoint(new InetSocketAddress(cassandraHost, 9042))\r\n                .withLocalDatacenter(&quot;datacenter1&quot;)\r\n                .withKeyspace(CqlIdentifier.fromCql(keyspace))\r\n                .build();\r\n\r\n        PreparedStatement preparedStatement = session.prepare(insertCqlStr);\r\n\r\n        // The code below is changed, or just what I think it is.\r\n        for(List&lt;String&gt; row: rows){\r\n            session.execute(\r\n                preparedInsertStatement.bind(row.get(0),     \r\n                row.get(1), row.get(2))\r\n              .setConsistencyLevel(ConsistencyLevel.ANY));\r\n        }\r\n        session.close();\r\n        \r\nThis code works fine, but it&#39;s just too inefficient to write for me to accept.So I tried the asynchronous API provided by the driver, and the code is almost the same as the above code:\r\n\r\n       for(List&lt;String&gt; row: rows){\r\n            session.executeAsync(\r\n                preparedInsertStatement.bind(row.get(0),     \r\n                row.get(1), row.get(2))\r\n              .setConsistencyLevel(ConsistencyLevel.ANY));\r\n        }\r\n        session.close();\r\nPlease excuse my lack of asynchronous programming experience for being so rude. It works, but it has a fatal problem, I found that it does not write all the data into the database. I would like to know the **correct usage** for calling an async API.\r\n\r\n   Also, I tried the relevant methods of the **BatchStatement** provided by the driver. I know this method is officially deprecated to improve performance and it has many limitations. For example, as far as I know, the number of statements in a batch cannot exceed 65535, and in the default configuration, the data length warning limit of batch is 5kb, and the error limit is 50kb. But I kept the number of statements below 65535 and modified the above default configuration:\r\n\r\n        List&lt;BoundStatement&gt; boundStatements = new ArrayList&lt;&gt;();\r\n        Integer count = 0;\r\n        BatchStatement batchStatement = BatchStatement.newInstance(BatchType.UNLOGGED);\r\n        for (List&lt;String&gt; row : rows){\r\n        // The actual code here is looping multiple times instead of exiting directly.\r\n            if(count &gt;= 65535){\r\n                break;\r\n            }\r\n            BoundStatement boundStatement = preparedStatement.bind(row.get(0),\r\n                                            row.get(1), row.get(2));\r\n            boundStatements.add(boundStatement);\r\n            count += 1;\r\n        }\r\n        BatchStatement batch = batchStatement.addAll(boundStatements);\r\n        session.execute(batch.setConsistencyLevel(ConsistencyLevel.ANY));\r\n        // session.executeAsync(batch.setConsistencyLevel().ANY);\r\n        session.close();\r\nIt also works. And it is actually more efficient than asynchronous APIs, and using synchronous interfaces can ensure data integrity. If the asynchronous API is used to execute **BatchStatement** here, the incomplete data mentioned above will also occur. But this method still doesn&#39;t meet my requirements, I need to execute it with multithreading. When I execute multiple threads it gives error:\r\n**Caused by: com.datastax.oss.driver.api.core.DriverTimeoutException: Query timed out after PT2S**\r\n\r\n**Summary**: I&#39;ve tried both synchronous and asynchronous writes and Batch related methods, and there are some issues that I can&#39;t accept. I now need to know how to properly use the async API to not lose data, and why I&#39;m wrong. As for the BatchStatement related methods, I don&#39;t expect it to work, it would be great if you could give me a workable suggestion. Thank you!\r\n\r\n  [1]: https://github.com/datastax/java-driver/tree/4.x/manual\r\n  [2]: https://github.com/datastax/python-driver","title":"How to efficiently write large amounts of data to Cassandra via Java or Python?","body":"<p>There are about <strong>millions of rows</strong> of data that need to be written to Cassandra.I have tried the following methods:</p>\n<p>The first: According to the reference code given by Datastax <a href=\"https://github.com/datastax/java-driver/tree/4.x/manual\" rel=\"nofollow noreferrer\">java-driver</a> or <a href=\"https://github.com/datastax/python-driver\" rel=\"nofollow noreferrer\">python-driver</a> on GitHub, my code is similar to:</p>\n<pre><code>    // The following code is fixed, and this part will be omitted later.\n    String cassandraHost = &quot;******&quot;;\n    String keyspace = &quot;******&quot;;\n    String table = &quot;******&quot;;\n    String insertCqlStr = &quot; insert into &quot; + keyspace + &quot;.&quot; + table +&quot;( &quot;\n            +     &quot;id,date,value)&quot;\n            +     &quot; values ( ?, ?, ?) ;&quot;;\n    CqlSession session = CqlSession.builder()\n            .addContactPoint(new InetSocketAddress(cassandraHost, 9042))\n            .withLocalDatacenter(&quot;datacenter1&quot;)\n            .withKeyspace(CqlIdentifier.fromCql(keyspace))\n            .build();\n\n    PreparedStatement preparedStatement = session.prepare(insertCqlStr);\n\n    // The code below is changed, or just what I think it is.\n    for(List&lt;String&gt; row: rows){\n        session.execute(\n            preparedInsertStatement.bind(row.get(0),     \n            row.get(1), row.get(2))\n          .setConsistencyLevel(ConsistencyLevel.ANY));\n    }\n    session.close();\n    \n</code></pre>\n<p>This code works fine, but it's just too inefficient to write for me to accept.So I tried the asynchronous API provided by the driver, and the code is almost the same as the above code:</p>\n<pre><code>   for(List&lt;String&gt; row: rows){\n        session.executeAsync(\n            preparedInsertStatement.bind(row.get(0),     \n            row.get(1), row.get(2))\n          .setConsistencyLevel(ConsistencyLevel.ANY));\n    }\n    session.close();\n</code></pre>\n<p>Please excuse my lack of asynchronous programming experience for being so rude. It works, but it has a fatal problem, I found that it does not write all the data into the database. I would like to know the <strong>correct usage</strong> for calling an async API.</p>\n<p>Also, I tried the relevant methods of the <strong>BatchStatement</strong> provided by the driver. I know this method is officially deprecated to improve performance and it has many limitations. For example, as far as I know, the number of statements in a batch cannot exceed 65535, and in the default configuration, the data length warning limit of batch is 5kb, and the error limit is 50kb. But I kept the number of statements below 65535 and modified the above default configuration:</p>\n<pre><code>    List&lt;BoundStatement&gt; boundStatements = new ArrayList&lt;&gt;();\n    Integer count = 0;\n    BatchStatement batchStatement = BatchStatement.newInstance(BatchType.UNLOGGED);\n    for (List&lt;String&gt; row : rows){\n    // The actual code here is looping multiple times instead of exiting directly.\n        if(count &gt;= 65535){\n            break;\n        }\n        BoundStatement boundStatement = preparedStatement.bind(row.get(0),\n                                        row.get(1), row.get(2));\n        boundStatements.add(boundStatement);\n        count += 1;\n    }\n    BatchStatement batch = batchStatement.addAll(boundStatements);\n    session.execute(batch.setConsistencyLevel(ConsistencyLevel.ANY));\n    // session.executeAsync(batch.setConsistencyLevel().ANY);\n    session.close();\n</code></pre>\n<p>It also works. And it is actually more efficient than asynchronous APIs, and using synchronous interfaces can ensure data integrity. If the asynchronous API is used to execute <strong>BatchStatement</strong> here, the incomplete data mentioned above will also occur. But this method still doesn't meet my requirements, I need to execute it with multithreading. When I execute multiple threads it gives error:\n<strong>Caused by: com.datastax.oss.driver.api.core.DriverTimeoutException: Query timed out after PT2S</strong></p>\n<p><strong>Summary</strong>: I've tried both synchronous and asynchronous writes and Batch related methods, and there are some issues that I can't accept. I now need to know how to properly use the async API to not lose data, and why I'm wrong. As for the BatchStatement related methods, I don't expect it to work, it would be great if you could give me a workable suggestion. Thank you!</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663615901,"creation_date":1663614043,"answer_id":73778150,"question_id":73773658,"body_markdown":"Rather than chaining `flatMap()` calls in a single pipeline, nest one inside the other:\r\n\r\n```java\r\nList&lt;String&gt; grandchilds = parents.stream()\r\n  .flatMap(parent -&gt; parent.getChilds().stream()\r\n    .filter(tagMatch(SEARCHED_TAG))\r\n    .flatMap(child -&gt; child.getGrandchilds().stream().map(gc -&gt; parent.getName() + &quot;.&quot; + gc.getName())))\r\n  .toList();\r\n\r\nprivate static Predicate&lt;Child&gt; tagMatch(String tag) {\r\n  return child -&gt; {\r\n    List&lt;String&gt; tags = child.getTags();\r\n    return tags != null &amp;&amp; tags.size() == 1 &amp;&amp; tags.get(0).equals(tag);\r\n  };\r\n}\r\n```\r\n\r\nI didn&#39;t test that and may have missed a parens in there, but that&#39;s the gist of it.\r\n\r\nAs far as advantages go, I don&#39;t see any. That aspect is opinion-based, but in my opinion, the for-loops are easier to read and verify, even after factoring out the rather complicated filtering predicate.","title":"How can you access elements of a previous step when using Java Stream API?","body":"<p>Rather than chaining <code>flatMap()</code> calls in a single pipeline, nest one inside the other:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; grandchilds = parents.stream()\n  .flatMap(parent -&gt; parent.getChilds().stream()\n    .filter(tagMatch(SEARCHED_TAG))\n    .flatMap(child -&gt; child.getGrandchilds().stream().map(gc -&gt; parent.getName() + &quot;.&quot; + gc.getName())))\n  .toList();\n\nprivate static Predicate&lt;Child&gt; tagMatch(String tag) {\n  return child -&gt; {\n    List&lt;String&gt; tags = child.getTags();\n    return tags != null &amp;&amp; tags.size() == 1 &amp;&amp; tags.get(0).equals(tag);\n  };\n}\n</code></pre>\n<p>I didn't test that and may have missed a parens in there, but that's the gist of it.</p>\n<p>As far as advantages go, I don't see any. That aspect is opinion-based, but in my opinion, the for-loops are easier to read and verify, even after factoring out the rather complicated filtering predicate.</p>\n"}],"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":379,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":73778150,"answer_count":1,"score":-2,"last_activity_date":1663655640,"creation_date":1663592000,"question_id":73773658,"body_markdown":"I tried to write the following code using the stream API, but found that being not able to access the Parent objects in the stream of Grandchild objects, it is way easier to use classic for-loops. How could a solution using the stream API look like? And are there any advantages to such a solution?\r\nThe task is to find certain elements in a structure like this: parent -&gt; List&lt;Children&gt; -&gt; List&lt;Grandchild&gt; and to get for each matching Grandchildren a String of nameOfParent.nameOfGrandchild. \r\nSimple, working code with for-loops:\r\n\r\n            List&lt;String&gt; grandchilds = new ArrayList&lt;&gt;();\r\n            for (Parent parent : parents) {\r\n                String parentName = parent.getName() + &quot;.&quot;;\r\n                for (Child child : parent.getChilds()) {\r\n                    if (null != child.getTags() &amp;&amp; child.getTags().size() == 1\r\n                            &amp;&amp; SEARCHED_TAG.equals(child.getTags().get(0))) {\r\n                        for (Grandchild gc : child.getGrandchilds()) {\r\n                            grandchilds.add(parentName + gc.getName());\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\nI was at this point using stream API where i realized that accessing properties of parent is no longer possible when i have the stream of Grandchild. \r\n\r\n                List&lt;Grandchild&gt; grandchildren = parents.stream()\r\n                    .flatMap(parent -&gt; parent.getChilds().stream())\r\n                    .filter(child -&gt; null != child.getTags() &amp;&amp; child.getTags().size() == 1 &amp;&amp; SEARCHED_TAG.equals(child.getTags().get(0)))\r\n                    .flatMap(child -&gt; child.getGrandchilds().stream())\r\n                    .collect(Collectors.toList());        \r\n\r\n\r\nI found some hints like in the following questions, but the resulting code seemed unnecessarily complex and there is the occasional recommendation to use for-loops instead.\r\n\r\nhttps://stackoverflow.com/questions/39993595/access-element-of-previous-step-in-a-stream-or-pass-down-element-as-parameter \r\n\r\nhttps://stackoverflow.com/questions/48906718/get-parent-object-from-stream\r\n\r\nhttps://stackoverflow.com/questions/29235567/how-to-iterate-nested-for-loops-referring-to-parent-elements-using-java-8-stream","title":"How can you access elements of a previous step when using Java Stream API?","body":"<p>I tried to write the following code using the stream API, but found that being not able to access the Parent objects in the stream of Grandchild objects, it is way easier to use classic for-loops. How could a solution using the stream API look like? And are there any advantages to such a solution?\nThe task is to find certain elements in a structure like this: parent -&gt; List -&gt; List and to get for each matching Grandchildren a String of nameOfParent.nameOfGrandchild.\nSimple, working code with for-loops:</p>\n<pre><code>        List&lt;String&gt; grandchilds = new ArrayList&lt;&gt;();\n        for (Parent parent : parents) {\n            String parentName = parent.getName() + &quot;.&quot;;\n            for (Child child : parent.getChilds()) {\n                if (null != child.getTags() &amp;&amp; child.getTags().size() == 1\n                        &amp;&amp; SEARCHED_TAG.equals(child.getTags().get(0))) {\n                    for (Grandchild gc : child.getGrandchilds()) {\n                        grandchilds.add(parentName + gc.getName());\n                    }\n                }\n            }\n        }\n</code></pre>\n<p>I was at this point using stream API where i realized that accessing properties of parent is no longer possible when i have the stream of Grandchild.</p>\n<pre><code>            List&lt;Grandchild&gt; grandchildren = parents.stream()\n                .flatMap(parent -&gt; parent.getChilds().stream())\n                .filter(child -&gt; null != child.getTags() &amp;&amp; child.getTags().size() == 1 &amp;&amp; SEARCHED_TAG.equals(child.getTags().get(0)))\n                .flatMap(child -&gt; child.getGrandchilds().stream())\n                .collect(Collectors.toList());        \n</code></pre>\n<p>I found some hints like in the following questions, but the resulting code seemed unnecessarily complex and there is the occasional recommendation to use for-loops instead.</p>\n<p><a href=\"https://stackoverflow.com/questions/39993595/access-element-of-previous-step-in-a-stream-or-pass-down-element-as-parameter\">Access element of previous step in a stream or pass down element as &quot;parameter&quot; to next step?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/48906718/get-parent-object-from-stream\">Get parent object from stream</a></p>\n<p><a href=\"https://stackoverflow.com/questions/29235567/how-to-iterate-nested-for-loops-referring-to-parent-elements-using-java-8-stream\">How to iterate nested for loops referring to parent elements using Java 8 streams?</a></p>\n"},{"tags":["java","sonarqube"],"answers":[{"tags":[],"owner":{"account_id":5285623,"reputation":126,"user_id":4219745,"display_name":"William Helgeson"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1415211076,"creation_date":1415211076,"answer_id":26764149,"question_id":26762506,"body_markdown":"Make sure you are logged into Sonar. \r\n\r\nClick on Quality Profiles in the top navigation bar, then click on &quot;Restore Profile&quot; on the right hand side under the search bar. Make sure you have all the applicable quality plugins that the export is using or the restore will choke. \r\n\r\n","title":"How can I load a predefined rule set to a sonar profile","body":"<p>Make sure you are logged into Sonar. </p>\n\n<p>Click on Quality Profiles in the top navigation bar, then click on \"Restore Profile\" on the right hand side under the search bar. Make sure you have all the applicable quality plugins that the export is using or the restore will choke. </p>\n"},{"tags":[],"owner":{"account_id":13789828,"reputation":187,"user_id":9952631,"display_name":"Parth Kansara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663655244,"creation_date":1663655244,"answer_id":73782402,"question_id":26762506,"body_markdown":"May be a bit old thread but worth answering this question with exact steps as I struggled alot with this problem.\r\n\r\nThough its a hacky way to import rulebook from prod to your local. But it works and can save valuable time.\r\n\r\nHere are the steps:\r\n\r\n - Login to SonarQube as admin.\r\n - Create a new Quality Profile as below:\r\n[![enter image description here][1]][1]\r\n - Download the default xml from local sonarqube by clicking on `Backup` button. Lets call this file `local-rulebook.xml`\r\n[![enter image description here][2]][2]\r\n - Open both the `prod-rulebook.xml` file &amp; `local-rulebook.xml` in notepad.\r\n- Delete the selected part from `local-rulebook.xml` &amp; replace with the content from `prod-rulebook.xml`. Save the file. \r\nP.S: Do not change the value of `&lt;profile&gt;&lt;name&gt;{yourProfileName}&lt;/name&gt;`.\r\n[![enter image description here][3]][3]\r\n- Go back to sonarQube and Click `Restore` at top-right corner of the screen.\r\n[![enter image description here][4]][4]\r\n- Import the newly updated file \r\n[![enter image description here][5]][5]\r\n- Change the default profile type.\r\n[![enter image description here][6]][6]\r\n\r\nCongrats you successfully imported the `prod-rulebook.xml` to your `local` sonarqube.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p9qv8.png\r\n  [2]: https://i.stack.imgur.com/6rG9x.png\r\n  [3]: https://i.stack.imgur.com/VDdPP.png\r\n  [4]: https://i.stack.imgur.com/cLKtx.png\r\n  [5]: https://i.stack.imgur.com/vBU86.png\r\n  [6]: https://i.stack.imgur.com/Audve.png","title":"How can I load a predefined rule set to a sonar profile","body":"<p>May be a bit old thread but worth answering this question with exact steps as I struggled alot with this problem.</p>\n<p>Though its a hacky way to import rulebook from prod to your local. But it works and can save valuable time.</p>\n<p>Here are the steps:</p>\n<ul>\n<li>Login to SonarQube as admin.</li>\n<li>Create a new Quality Profile as below:\n<a href=\"https://i.stack.imgur.com/p9qv8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p9qv8.png\" alt=\"enter image description here\" /></a></li>\n<li>Download the default xml from local sonarqube by clicking on <code>Backup</code> button. Lets call this file <code>local-rulebook.xml</code>\n<a href=\"https://i.stack.imgur.com/6rG9x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6rG9x.png\" alt=\"enter image description here\" /></a></li>\n<li>Open both the <code>prod-rulebook.xml</code> file &amp; <code>local-rulebook.xml</code> in notepad.</li>\n<li>Delete the selected part from <code>local-rulebook.xml</code> &amp; replace with the content from <code>prod-rulebook.xml</code>. Save the file.\nP.S: Do not change the value of <code>&lt;profile&gt;&lt;name&gt;{yourProfileName}&lt;/name&gt;</code>.\n<a href=\"https://i.stack.imgur.com/VDdPP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VDdPP.png\" alt=\"enter image description here\" /></a></li>\n<li>Go back to sonarQube and Click <code>Restore</code> at top-right corner of the screen.\n<a href=\"https://i.stack.imgur.com/cLKtx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cLKtx.png\" alt=\"enter image description here\" /></a></li>\n<li>Import the newly updated file\n<a href=\"https://i.stack.imgur.com/vBU86.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vBU86.png\" alt=\"enter image description here\" /></a></li>\n<li>Change the default profile type.\n<a href=\"https://i.stack.imgur.com/Audve.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Audve.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n<p>Congrats you successfully imported the <code>prod-rulebook.xml</code> to your <code>local</code> sonarqube.</p>\n"}],"owner":{"account_id":1812902,"reputation":761,"user_id":1648600,"accept_rate":71,"display_name":"meirrav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8189,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":26764149,"answer_count":2,"score":4,"last_activity_date":1663655244,"creation_date":1415205845,"question_id":26762506,"body_markdown":"i have a local sonar server running. i would like to create a new profile with a set of rules that were predefined by someone else. i have the XML file containing all the rules.\r\n\r\nis there a way to upload the XML file to the profile and not define the rules manually?\r\n\r\nthanks\r\n","title":"How can I load a predefined rule set to a sonar profile","body":"<p>i have a local sonar server running. i would like to create a new profile with a set of rules that were predefined by someone else. i have the XML file containing all the rules.</p>\n\n<p>is there a way to upload the XML file to the profile and not define the rules manually?</p>\n\n<p>thanks</p>\n"},{"tags":["java","eclipse","junit4","classnotfoundexception"],"comments":[{"owner":{"account_id":269622,"reputation":58936,"user_id":559070,"accept_rate":74,"display_name":"Harry Joy"},"score":18,"creation_date":1303216061,"post_id":5716308,"comment_id":6535314,"body_markdown":"try clean &amp; build your project.","body":"try clean &amp; build your project."},{"owner":{"account_id":101026,"reputation":39048,"user_id":271999,"accept_rate":92,"display_name":"Mouna Cheikhna"},"score":1,"creation_date":1303216787,"post_id":5716308,"comment_id":6535550,"body_markdown":"tried it many times , i keep getting the same error","body":"tried it many times , i keep getting the same error"},{"owner":{"account_id":64584,"reputation":15556,"user_id":190596,"accept_rate":81,"display_name":"Stijn Geukens"},"score":3,"creation_date":1303217021,"post_id":5716308,"comment_id":6535613,"body_markdown":"Open the Run Configuration window in eclipse, select the unit test you ran and go to tab classpath: here you can check what is actually in the classpath.","body":"Open the Run Configuration window in eclipse, select the unit test you ran and go to tab classpath: here you can check what is actually in the classpath."},{"owner":{"account_id":101026,"reputation":39048,"user_id":271999,"accept_rate":92,"display_name":"Mouna Cheikhna"},"score":0,"creation_date":1303217608,"post_id":5716308,"comment_id":6535790,"body_markdown":"thanks, i saw an error above in the classpath tab :  [JRE]: JRE not compatible with workspace .class file compatibility: 1.6 , maybe this the cause ?","body":"thanks, i saw an error above in the classpath tab :  [JRE]: JRE not compatible with workspace .class file compatibility: 1.6 , maybe this the cause ?"},{"owner":{"account_id":8695,"reputation":1603,"user_id":15789,"accept_rate":75,"display_name":"RuntimeException"},"score":0,"creation_date":1347967776,"post_id":5716308,"comment_id":16783398,"body_markdown":"I faced the same problem with a standalone Java class and a JUnit test, using Eclipse 4.2. I checked all paths etc.  I tried &quot;clean and build your project&quot;.  It worked! Thanks Harry Joy.","body":"I faced the same problem with a standalone Java class and a JUnit test, using Eclipse 4.2. I checked all paths etc.  I tried &quot;clean and build your project&quot;.  It worked! Thanks Harry Joy."},{"owner":{"account_id":86852,"reputation":635,"user_id":241234,"display_name":"Finn Johnsen"},"score":0,"creation_date":1417526151,"post_id":5716308,"comment_id":42974840,"body_markdown":"Do not use the eclipse gradle plugin. Use the gradle command to generate eclipse project files by (first deleting .project .classpath .settings) adding the eclipse plugin to build.gradle then running &#39;gradle eclipse&#39; and importing a general project into eclipse.","body":"Do not use the eclipse gradle plugin. Use the gradle command to generate eclipse project files by (first deleting .project .classpath .settings) adding the eclipse plugin to build.gradle then running &#39;gradle eclipse&#39; and importing a general project into eclipse."},{"owner":{"account_id":2731737,"reputation":803,"user_id":2355376,"accept_rate":43,"display_name":"riteshkasat"},"score":0,"creation_date":1428506110,"post_id":5716308,"comment_id":47192349,"body_markdown":"refresh your project and then do clean and build","body":"refresh your project and then do clean and build"}],"answers":[{"tags":[],"owner":{"account_id":368054,"reputation":11,"user_id":714630,"display_name":"Jam"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1303216407,"creation_date":1303216407,"answer_id":5716397,"question_id":5716308,"body_markdown":"Are you sure your test class is in the build folder? You&#39;re invoking junit in a separate JVM (fork=true) so it&#39;s possible that working folder would change during that invocation and with build being relative, that may cause a problem.\r\n\r\nRun ant from command line (not from Eclipse) with -verbose or -debug switch to see the detailed classpath / working dir junit is being invoked with and post the results back here if you&#39;re still can&#39;t resolve this issue.\r\n","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>Are you sure your test class is in the build folder? You're invoking junit in a separate JVM (fork=true) so it's possible that working folder would change during that invocation and with build being relative, that may cause a problem.</p>\n\n<p>Run ant from command line (not from Eclipse) with -verbose or -debug switch to see the detailed classpath / working dir junit is being invoked with and post the results back here if you're still can't resolve this issue.</p>\n"},{"tags":[],"owner":{"account_id":231541,"reputation":3509,"user_id":495832,"accept_rate":71,"display_name":"Alan Escreet"},"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1303225527,"creation_date":1303225527,"answer_id":5718520,"question_id":5716308,"body_markdown":"`ConfigurationManagerTest` is not being found on your classpath. Ensure that the `ConfigurationManagerTest.class` file is available on your classpath.  \r\n\r\nIt might not exist if it wasn&#39;t successfully compiled or if it&#39;s being created in a directory that you haven&#39;t told the Eclipse project should be on the classpath.  \r\n\r\nAssuming that you&#39;ve put your test classes in a separate folder, make sure that it shows up in the &quot;Package Explorer&quot; view (rather than the &quot;Navigator&quot; view).  \r\n\r\nUnder the project properties, &quot;Java Build Path&quot; and the &quot;Source&quot; tab, you can also see if the source folder is included for building as well as where the .class files are generated.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p><code>ConfigurationManagerTest</code> is not being found on your classpath. Ensure that the <code>ConfigurationManagerTest.class</code> file is available on your classpath.  </p>\n\n<p>It might not exist if it wasn't successfully compiled or if it's being created in a directory that you haven't told the Eclipse project should be on the classpath.  </p>\n\n<p>Assuming that you've put your test classes in a separate folder, make sure that it shows up in the \"Package Explorer\" view (rather than the \"Navigator\" view).  </p>\n\n<p>Under the project properties, \"Java Build Path\" and the \"Source\" tab, you can also see if the source folder is included for building as well as where the .class files are generated.</p>\n"},{"tags":[],"owner":{"account_id":60064,"reputation":12550,"user_id":179529,"accept_rate":60,"display_name":"Guy"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1334256919,"creation_date":1334256919,"answer_id":10129948,"question_id":5716308,"body_markdown":"Another possible problem is a missing builder (it will prevent from your .class file from being built).\r\n\r\nCheck that your .project file has the following lines\r\n\r\n    &lt;buildSpec&gt;\r\n      &lt;buildCommand&gt;\r\n        &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;\r\n        &lt;arguments&gt;\r\n        &lt;/arguments&gt;\r\n      &lt;/buildCommand&gt;\r\n    &lt;/buildSpec&gt;\r\n    &lt;natures&gt;\r\n      &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;\r\n    &lt;/natures&gt;","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>Another possible problem is a missing builder (it will prevent from your .class file from being built).</p>\n\n<p>Check that your .project file has the following lines</p>\n\n<pre><code>&lt;buildSpec&gt;\n  &lt;buildCommand&gt;\n    &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;\n    &lt;arguments&gt;\n    &lt;/arguments&gt;\n  &lt;/buildCommand&gt;\n&lt;/buildSpec&gt;\n&lt;natures&gt;\n  &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;\n&lt;/natures&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":873890,"reputation":31,"user_id":924124,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1436883049,"creation_date":1334671906,"answer_id":10192907,"question_id":5716308,"body_markdown":"This happened to me when I was dragging and dropping test classes to different packages.  I just did the following\r\n\r\n 1. Saved the class in a text editor.\r\n 2. Deleted the offending class from eclipse project explorer.\r\n 3. Re-created the class.\r\n\r\nBingo! I can now run the test!\r\n\r\n","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>This happened to me when I was dragging and dropping test classes to different packages.  I just did the following</p>\n\n<ol>\n<li>Saved the class in a text editor.</li>\n<li>Deleted the offending class from eclipse project explorer.</li>\n<li>Re-created the class.</li>\n</ol>\n\n<p>Bingo! I can now run the test!</p>\n"},{"tags":[],"owner":{"account_id":204168,"reputation":7140,"user_id":452210,"accept_rate":75,"display_name":"javabrett"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352420004,"creation_date":1352420004,"answer_id":13300174,"question_id":5716308,"body_markdown":"A variation on Guy&#39;s answer above, involving additional builders.  Say you have an Ant builder configured:\r\n\r\n\t&lt;buildSpec&gt;\r\n\t\t&lt;buildCommand&gt;\r\n\t\t\t&lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;\r\n\t\t\t&lt;arguments&gt;\r\n\t\t\t&lt;/arguments&gt;\r\n\t\t&lt;/buildCommand&gt;\r\n\t\t&lt;buildCommand&gt;\r\n\t\t\t&lt;name&gt;org.eclipse.ui.externaltools.ExternalToolBuilder&lt;/name&gt;\r\n\t\t\t&lt;arguments&gt;\r\n\t\t\t\t&lt;dictionary&gt;\r\n\t\t\t\t\t&lt;key&gt;LaunchConfigHandle&lt;/key&gt;\r\n\t\t\t\t\t&lt;value&gt;&amp;lt;project&amp;gt;/.externalToolBuilders/myprojectantlaunch.launch&lt;/value&gt;\r\n\t\t\t\t&lt;/dictionary&gt;\r\n\t\t\t&lt;/arguments&gt;\r\n\t\t&lt;/buildCommand&gt;\r\n\t&lt;/buildSpec&gt;\r\n\r\nIf the Ant build and Eclipse build have differing output locations, Eclipse may not be able to locate the test class on the classpath.  In the case of an Ant builder, also check the configured targets for clean, auto, manual and after-clean builds, to ensure that the target which builds the unit tests is called.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>A variation on Guy's answer above, involving additional builders.  Say you have an Ant builder configured:</p>\n\n<pre><code>&lt;buildSpec&gt;\n    &lt;buildCommand&gt;\n        &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;\n        &lt;arguments&gt;\n        &lt;/arguments&gt;\n    &lt;/buildCommand&gt;\n    &lt;buildCommand&gt;\n        &lt;name&gt;org.eclipse.ui.externaltools.ExternalToolBuilder&lt;/name&gt;\n        &lt;arguments&gt;\n            &lt;dictionary&gt;\n                &lt;key&gt;LaunchConfigHandle&lt;/key&gt;\n                &lt;value&gt;&amp;lt;project&amp;gt;/.externalToolBuilders/myprojectantlaunch.launch&lt;/value&gt;\n            &lt;/dictionary&gt;\n        &lt;/arguments&gt;\n    &lt;/buildCommand&gt;\n&lt;/buildSpec&gt;\n</code></pre>\n\n<p>If the Ant build and Eclipse build have differing output locations, Eclipse may not be able to locate the test class on the classpath.  In the case of an Ant builder, also check the configured targets for clean, auto, manual and after-clean builds, to ensure that the target which builds the unit tests is called.</p>\n"},{"tags":[],"owner":{"display_name":"user813853"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1355502499,"creation_date":1355502499,"answer_id":13882625,"question_id":5716308,"body_markdown":"I add this answer as my solution review from the above. \r\n\r\n 1. You simply edit the file `.project` in the main project folder. Use a proper XML Editor otherwise you will get a `fatal error` from Eclipse that stats you can not open this project.\r\n 2. I made my project nature `Java`by adding this `&lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;` to `&lt;natures&gt;&lt;/natures&gt;`.\r\n 3. I then added those lines correctly indented `&lt;buildCommand&gt;&lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;&lt;arguments&gt;&lt;/arguments&gt;&lt;/buildCommand&gt;` to `&lt;buildSpec&gt;&lt;/buildSpec&gt;`.\r\n 4. `Run as JUnit` ... **Success**\r\n\r\n   ","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>I add this answer as my solution review from the above. </p>\n\n<ol>\n<li>You simply edit the file <code>.project</code> in the main project folder. Use a proper XML Editor otherwise you will get a <code>fatal error</code> from Eclipse that stats you can not open this project.</li>\n<li>I made my project nature <code>Java</code>by adding this <code>&lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;</code> to <code>&lt;natures&gt;&lt;/natures&gt;</code>.</li>\n<li>I then added those lines correctly indented <code>&lt;buildCommand&gt;&lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;&lt;arguments&gt;&lt;/arguments&gt;&lt;/buildCommand&gt;</code> to <code>&lt;buildSpec&gt;&lt;/buildSpec&gt;</code>.</li>\n<li><code>Run as JUnit</code> ... <strong>Success</strong></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1474048,"reputation":2775,"user_id":1384913,"accept_rate":90,"display_name":"Daniel Pereira"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1361120972,"creation_date":1361120972,"answer_id":14923687,"question_id":5716308,"body_markdown":"I had this problem and it was kind of tricky to realise what was wrong. The project had a dependency project with some error, which stopped the build from execute. When I remove this dependency problem, the project was built as expected.\r\n\r\nPs.: I am working on a project that has many compilation errors, because we are porting an application that was converted from Delphi to Java, so I didn&#39;t care to the compilation error at the beginning, that&#39;s why it took me some time to find out the problem.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>I had this problem and it was kind of tricky to realise what was wrong. The project had a dependency project with some error, which stopped the build from execute. When I remove this dependency problem, the project was built as expected.</p>\n\n<p>Ps.: I am working on a project that has many compilation errors, because we are porting an application that was converted from Delphi to Java, so I didn't care to the compilation error at the beginning, that's why it took me some time to find out the problem.</p>\n"},{"tags":[],"owner":{"account_id":368447,"reputation":24110,"user_id":715269,"accept_rate":60,"display_name":"Gangnus"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1510744786,"creation_date":1363261849,"answer_id":15408453,"question_id":5716308,"body_markdown":"There is one more possibility. I had the same problem just now and no one of the solutions here helped. Except removing and recreating of the project - I didn&#39;t want to try it. What did help, was to **clean** the project **two times** immediately one after another! Clean + build could be repeated any number of times - it won&#39;t help. Only clean+clean and after that build goes OK. (Eclipse 3.6). Of course, you should disable autobuild for that.\r\n\r\nEdit: This post has got its last plus on 15.11.2017. So, the problem (and the solution) remains actual.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>There is one more possibility. I had the same problem just now and no one of the solutions here helped. Except removing and recreating of the project - I didn't want to try it. What did help, was to <strong>clean</strong> the project <strong>two times</strong> immediately one after another! Clean + build could be repeated any number of times - it won't help. Only clean+clean and after that build goes OK. (Eclipse 3.6). Of course, you should disable autobuild for that.</p>\n\n<p>Edit: This post has got its last plus on 15.11.2017. So, the problem (and the solution) remains actual.</p>\n"},{"tags":[],"owner":{"account_id":438649,"reputation":7731,"user_id":827047,"accept_rate":93,"display_name":"Simon Bengtsson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1534943099,"creation_date":1365773679,"answer_id":15972773,"question_id":5716308,"body_markdown":"I tried all the answers described here but none worked, but found this [thread][1] where slomek solves the problem in a very easy manner. Just go to project -&gt; properties --&gt; java build path. Then move Junit to the top by hitting the up bottom to the right. Then everything compiles just fine.\r\n\r\n  [1]: https://stackoverflow.com/questions/11381068/class-not-found-exception-when-running-junit-test","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>I tried all the answers described here but none worked, but found this <a href=\"https://stackoverflow.com/questions/11381068/class-not-found-exception-when-running-junit-test\">thread</a> where slomek solves the problem in a very easy manner. Just go to project -> properties --> java build path. Then move Junit to the top by hitting the up bottom to the right. Then everything compiles just fine.</p>\n"},{"tags":[],"owner":{"account_id":456353,"reputation":436,"user_id":855086,"display_name":"gffny"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1368802799,"creation_date":1368802799,"answer_id":16612205,"question_id":5716308,"body_markdown":"I tried everything mentioned here and in other posts. Some of the solutions that people proffered were:\r\n\r\n1. Change the output folder for the test\r\n2. Create a custom builder for the project that would run test-compile from Maven\r\n3. Move the Maven dependencies higher in the Order and Export list in the project build path\r\n\r\nThere were many, many more but the one that I found to work was as follows: Close the development environment. Delete the jars used by the project from my local Maven repository. Open the IDE. Build the project. Run the test.\r\n\r\nAfter hours of beating my head against my keyboard and following suggested solutions, this one worked!","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>I tried everything mentioned here and in other posts. Some of the solutions that people proffered were:</p>\n\n<ol>\n<li>Change the output folder for the test</li>\n<li>Create a custom builder for the project that would run test-compile from Maven</li>\n<li>Move the Maven dependencies higher in the Order and Export list in the project build path</li>\n</ol>\n\n<p>There were many, many more but the one that I found to work was as follows: Close the development environment. Delete the jars used by the project from my local Maven repository. Open the IDE. Build the project. Run the test.</p>\n\n<p>After hours of beating my head against my keyboard and following suggested solutions, this one worked!</p>\n"},{"tags":[],"owner":{"account_id":210409,"reputation":305,"user_id":462009,"accept_rate":15,"display_name":"vamsi-vegi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1369801861,"creation_date":1369801861,"answer_id":16805523,"question_id":5716308,"body_markdown":"check properties-&gt;java build path -&gt; libraries. there should be no errors, in my case there was errors in the maven. once I put the required jar in the maven repo, it worked fine","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>check properties->java build path -> libraries. there should be no errors, in my case there was errors in the maven. once I put the required jar in the maven repo, it worked fine</p>\n"},{"tags":[],"owner":{"account_id":3549742,"reputation":4749,"user_id":2964890,"accept_rate":72,"display_name":"javaPlease42"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1383921269,"creation_date":1383921269,"answer_id":19861551,"question_id":5716308,"body_markdown":"Right click the project in the Explorer: Build Path -&gt; Order and Export -&gt; Select JRE System Library [jdk] and click Bottom button.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>Right click the project in the Explorer: Build Path -> Order and Export -> Select JRE System Library [jdk] and click Bottom button.</p>\n"},{"tags":[],"owner":{"account_id":255111,"reputation":1916,"user_id":534932,"accept_rate":84,"display_name":"Marten Sytema"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387987449,"creation_date":1387987449,"answer_id":20774570,"question_id":5716308,"body_markdown":"what worked for me is to remove the runconfiguration of the test. Then right click the testclass and click run as junit test. \r\n\r\nnow it recreates a correct run config for me.\r\n\r\n","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>what worked for me is to remove the runconfiguration of the test. Then right click the testclass and click run as junit test. </p>\n\n<p>now it recreates a correct run config for me.</p>\n"},{"tags":[],"owner":{"account_id":996124,"reputation":939,"user_id":1012003,"accept_rate":0,"display_name":"J Slick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398998238,"creation_date":1398998238,"answer_id":23419895,"question_id":5716308,"body_markdown":"Yet another variation.  \r\nSomehow, my formerly working test classes appeared to be running from some other location; my edits would not execute when I ran the tests.  \r\n\r\nI found that the output folder for my ${project_loc}src/test/java files was not what I expected.  It had inadvertently been set to ${project_loc}target/classes.\r\nI set it properly in project properties, Java Build Path, Source tab.  ","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>Yet another variation.<br>\nSomehow, my formerly working test classes appeared to be running from some other location; my edits would not execute when I ran the tests.  </p>\n\n<p>I found that the output folder for my ${project_loc}src/test/java files was not what I expected.  It had inadvertently been set to ${project_loc}target/classes.\nI set it properly in project properties, Java Build Path, Source tab.  </p>\n"},{"tags":[],"owner":{"account_id":206955,"reputation":22515,"user_id":456564,"accept_rate":89,"display_name":"German Attanasio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1403052202,"creation_date":1403052202,"answer_id":24275433,"question_id":5716308,"body_markdown":"If you have a maven project try to run:\r\n\r\n    mvn clean compile\r\n\r\nand then in eclipse clean &amp; build your project.\r\n\r\n","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>If you have a maven project try to run:</p>\n\n<pre><code>mvn clean compile\n</code></pre>\n\n<p>and then in eclipse clean &amp; build your project.</p>\n"},{"tags":[],"owner":{"account_id":1262480,"reputation":588,"user_id":1220424,"accept_rate":0,"display_name":"Nayan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1406791063,"creation_date":1406791063,"answer_id":25052908,"question_id":5716308,"body_markdown":"I had the similar problem with my Eclipse Helios which debugging Junits. My problem was little different as i was able to run Junits successfully but when i was getting ClassNotFoundException while debugging the same JUNITs.\r\n\r\nI have tried all sort of different solutions available in Stackoverflow.com and forums elsewhere, but nothing seem to work. After banging my head with these issue for close to two days, finally i figured out the solution to it.\r\n\r\nIf none of the solutions seem to work, just delete the .metadata folder created in your workspace. This would create an additional overhead of importing the projects and all sorts of configuration you have done, but these will surely solve these issue.\r\n\r\nHope these helps.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>I had the similar problem with my Eclipse Helios which debugging Junits. My problem was little different as i was able to run Junits successfully but when i was getting ClassNotFoundException while debugging the same JUNITs.</p>\n\n<p>I have tried all sort of different solutions available in Stackoverflow.com and forums elsewhere, but nothing seem to work. After banging my head with these issue for close to two days, finally i figured out the solution to it.</p>\n\n<p>If none of the solutions seem to work, just delete the .metadata folder created in your workspace. This would create an additional overhead of importing the projects and all sorts of configuration you have done, but these will surely solve these issue.</p>\n\n<p>Hope these helps.</p>\n"},{"tags":[],"owner":{"account_id":6001822,"reputation":1,"user_id":4714842,"display_name":"user4714842"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427337824,"creation_date":1427337824,"answer_id":29270211,"question_id":5716308,"body_markdown":"In &quot;Package Explorer&quot; view, Right click your test class, then &quot;Build Path&quot;&gt;&gt;&quot;Include&quot;, it should be OK.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>In \"Package Explorer\" view, Right click your test class, then \"Build Path\">>\"Include\", it should be OK.</p>\n"},{"tags":[],"owner":{"account_id":5770083,"reputation":1,"user_id":4553752,"display_name":"Sneha Latha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431088656,"creation_date":1431088656,"answer_id":30124075,"question_id":5716308,"body_markdown":"I too faced the same exception, none of the solutions over internet helped me out.\r\nmy project contains multiple modules. My Junit code resides in Web module. And it&#39;s referring to client module&#39;s code.\r\n\r\nFinally , I tried :\r\nRight click on (Web module) project --&gt;build path--&gt; source tab--&gt; Link  source --&gt; added the src files location (Client module&#39;s)\r\n\r\nThats it! It worked like a charm \r\nHope it helps","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>I too faced the same exception, none of the solutions over internet helped me out.\nmy project contains multiple modules. My Junit code resides in Web module. And it's referring to client module's code.</p>\n\n<p>Finally , I tried :\nRight click on (Web module) project -->build path--> source tab--> Link  source --> added the src files location (Client module's)</p>\n\n<p>Thats it! It worked like a charm \nHope it helps</p>\n"},{"tags":[],"owner":{"account_id":436670,"reputation":102,"user_id":823981,"display_name":"user823981"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442429997,"creation_date":1442429997,"answer_id":32616619,"question_id":5716308,"body_markdown":"Another way that this can unfold, and just did for me, is if you have a build error that Eclipse doesn&#39;t tell you about. If compiling the unit test fails then there is no .class file and you will get the ClassNotFoundException.\r\n\r\nIn my case there was a missing 3rd party jar file. When I ran the test I got a pop-up window that said &quot;Errors exist in required project(s)&quot;. I work with a huge project and I _always_ get that message because some of the source is not available to eclipse (long story). Also it doesn&#39;t say what the errors are. So I click &quot;Continue&quot; and then I get the exception.\r\n\r\nOnce I realized what was going on it was easy to fix by adding the missing jar to the classpath under Run -&gt; Debug Configurations...\r\n\r\nI&#39;m not sure how to best detect or prevent this from happening except to be aware of this possibility when something goes wrong and to review your most recent changes for what might have gone wrong.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>Another way that this can unfold, and just did for me, is if you have a build error that Eclipse doesn't tell you about. If compiling the unit test fails then there is no .class file and you will get the ClassNotFoundException.</p>\n\n<p>In my case there was a missing 3rd party jar file. When I ran the test I got a pop-up window that said \"Errors exist in required project(s)\". I work with a huge project and I <em>always</em> get that message because some of the source is not available to eclipse (long story). Also it doesn't say what the errors are. So I click \"Continue\" and then I get the exception.</p>\n\n<p>Once I realized what was going on it was easy to fix by adding the missing jar to the classpath under Run -> Debug Configurations...</p>\n\n<p>I'm not sure how to best detect or prevent this from happening except to be aware of this possibility when something goes wrong and to review your most recent changes for what might have gone wrong.</p>\n"},{"tags":[],"owner":{"account_id":1795106,"reputation":1052,"user_id":1634677,"display_name":"HoppyKamper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446148327,"creation_date":1446148327,"answer_id":33423393,"question_id":5716308,"body_markdown":"I received this error because I had recently created a new workspace and my &quot;Installed JREs&quot; were not set up correctly. Make sure in `Preferences -&gt; Java -&gt; Installed JREs` \r\nthe root folder of your JDK is selected. The default for me in a new workspace was a JRE for some reason.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>I received this error because I had recently created a new workspace and my \"Installed JREs\" were not set up correctly. Make sure in <code>Preferences -&gt; Java -&gt; Installed JREs</code> \nthe root folder of your JDK is selected. The default for me in a new workspace was a JRE for some reason.</p>\n"},{"tags":[],"owner":{"account_id":4600428,"reputation":356,"user_id":3731335,"accept_rate":75,"display_name":"Jakob Hartman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461868788,"creation_date":1461868788,"answer_id":36922949,"question_id":5716308,"body_markdown":"I know this has been already answered a long time ago but the answer didnt fix it for me but, I just removed everything from the sources in the buildpath settings and re-added them","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>I know this has been already answered a long time ago but the answer didnt fix it for me but, I just removed everything from the sources in the buildpath settings and re-added them</p>\n"},{"tags":[],"owner":{"account_id":5938469,"reputation":889,"user_id":4670625,"accept_rate":67,"display_name":"David Marciel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537347993,"creation_date":1537347993,"answer_id":52402117,"question_id":5716308,"body_markdown":"I had this problem, in my case the problem relies in the compilation, I am using maven and test classes didn&#39;t compile.\r\n\r\nI fixed it by doing a maven install (it compiles all the files), also you can check for other reasons, that avoid test to compile like if your &quot;run configurations&quot; is skipping the tests to save time.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>I had this problem, in my case the problem relies in the compilation, I am using maven and test classes didn't compile.</p>\n\n<p>I fixed it by doing a maven install (it compiles all the files), also you can check for other reasons, that avoid test to compile like if your \"run configurations\" is skipping the tests to save time.</p>\n"},{"tags":[],"owner":{"account_id":9337303,"reputation":9995,"user_id":6931119,"accept_rate":89,"display_name":"Witold Kaczurba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551718287,"creation_date":1551718287,"answer_id":54987899,"question_id":5716308,"body_markdown":"- Assumming you tried everything reasonable (delete target, refresh, clean, rebuild, maven install...) and that you realized that Eclipse does not behave reasonable...\r\n- **Now**: Check if there is no errors suggesting it can be a plugin (any plugin) that has something to do with tests.\r\n\r\n- In my case:\r\n - **I removed EclEmma.**\r\n - **It started working...**\r\n\r\nSpent few hours on trying to guess it!.\r\n","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<ul>\n<li>Assumming you tried everything reasonable (delete target, refresh, clean, rebuild, maven install...) and that you realized that Eclipse does not behave reasonable...</li>\n<li><p><strong>Now</strong>: Check if there is no errors suggesting it can be a plugin (any plugin) that has something to do with tests.</p></li>\n<li><p>In my case:</p>\n\n<ul>\n<li><strong>I removed EclEmma.</strong></li>\n<li><strong>It started working...</strong></li>\n</ul></li>\n</ul>\n\n<p>Spent few hours on trying to guess it!.</p>\n"},{"tags":[],"owner":{"account_id":9279641,"reputation":401,"user_id":6891192,"display_name":"K.Andy Wang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556682824,"creation_date":1556682228,"answer_id":55931356,"question_id":5716308,"body_markdown":"Please make sure the output folder in `Java Build Path` tab set as like below,which would determine where the .class file are generated.Then clean the project.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PLWs6.png","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>Please make sure the output folder in <code>Java Build Path</code> tab set as like below,which would determine where the .class file are generated.Then clean the project.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PLWs6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PLWs6.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":13035163,"reputation":1085,"user_id":9420335,"display_name":"Akshay Chopra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580725758,"creation_date":1580725758,"answer_id":60037352,"question_id":5716308,"body_markdown":"The above mentioned solutions didn&#39;t work for me.\r\n\r\nI just restarted my IDE by closing it and reopening it.\r\n\r\nAnd then error disappeared and its working fine now.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>The above mentioned solutions didn't work for me.</p>\n\n<p>I just restarted my IDE by closing it and reopening it.</p>\n\n<p>And then error disappeared and its working fine now.</p>\n"},{"tags":[],"owner":{"account_id":2164314,"reputation":963,"user_id":3753021,"accept_rate":40,"display_name":"DivDiff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601637227,"creation_date":1601637227,"answer_id":64170569,"question_id":5716308,"body_markdown":"You may need to do a combination of the above to resolve this problem. I normally get this error when I do \r\n\r\n`mvn clean install`\r\n\r\nand see a compile error preventing the my tests from fully compiling.\r\n\r\nAssuming the issues resolved by the above have been dealt with, try clicking Project, Clean, and clean the project which contains the test you want to run. Also make sure Build Automatically is checked.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>You may need to do a combination of the above to resolve this problem. I normally get this error when I do</p>\n<p><code>mvn clean install</code></p>\n<p>and see a compile error preventing the my tests from fully compiling.</p>\n<p>Assuming the issues resolved by the above have been dealt with, try clicking Project, Clean, and clean the project which contains the test you want to run. Also make sure Build Automatically is checked.</p>\n"},{"tags":[],"owner":{"account_id":10593161,"reputation":79,"user_id":7802954,"display_name":"Bhanu PS Kushwah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663655095,"creation_date":1663655095,"answer_id":73782383,"question_id":5716308,"body_markdown":"    I also faced similar issue as mention in comment below.\r\n        \r\n    \t**org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:766)**\r\n        \r\n    Check all mention possibility above but still could not find root cause why test case not getting execute.\r\n    Then I found that there is one package issue in my class. So due to that I was getting compilation error in my Test class. \r\n    Reason is quite simple, Due to compilation error class did not compile and could not create class file. \r\n    I fixed that compilation error and executed that Test class and its run successfully.","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<pre><code>I also faced similar issue as mention in comment below.\n    \n    **org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:766)**\n    \nCheck all mention possibility above but still could not find root cause why test case not getting execute.\nThen I found that there is one package issue in my class. So due to that I was getting compilation error in my Test class. \nReason is quite simple, Due to compilation error class did not compile and could not create class file. \nI fixed that compilation error and executed that Test class and its run successfully.\n</code></pre>\n"}],"owner":{"account_id":101026,"reputation":39048,"user_id":271999,"accept_rate":92,"display_name":"Mouna Cheikhna"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172895,"favorite_count":0,"down_vote_count":0,"up_vote_count":59,"accepted_answer_id":5718520,"answer_count":27,"score":59,"last_activity_date":1663655095,"creation_date":1303215971,"question_id":5716308,"body_markdown":"I&#39;m trying to run my junit test (to verify that a properties file loads correctly) but \r\nI get `ClassNotFoundException` although the class is there and all required libraries are there too.\r\n\r\nHere it is the error I get :\r\n\r\n    Class not found ConfigurationManagerTest                                                 java.lang.ClassNotFoundException: ConfigurationManagerTest\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:200)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:251)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:693)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClasses(RemoteTestRunner.java:429)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\r\n\r\nany ideas on how to fix this ?\r\n\r\nThanks.\r\n","title":"JUNIT Test class in Eclipse - java.lang.ClassNotFoundException","body":"<p>I'm trying to run my junit test (to verify that a properties file loads correctly) but \nI get <code>ClassNotFoundException</code> although the class is there and all required libraries are there too.</p>\n\n<p>Here it is the error I get :</p>\n\n<pre><code>Class not found ConfigurationManagerTest                                                 java.lang.ClassNotFoundException: ConfigurationManagerTest\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:693)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClasses(RemoteTestRunner.java:429)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n</code></pre>\n\n<p>any ideas on how to fix this ?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","linux","ubuntu","coredump"],"answers":[{"tags":[],"owner":{"account_id":16628839,"reputation":593,"user_id":12017165,"display_name":"Dwa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608836906,"creation_date":1608836906,"answer_id":65442393,"question_id":65442343,"body_markdown":"Consider using [Git Large File Storage][1] as 131.63MB&gt;100.00MB, which exceeds the [file size limit][2] for git push, as indicated by GitHub official:\r\n\r\n&gt; If you attempt to add or update a file that is larger than 50 MB, you will receive a warning from Git. The changes will still successfully push to your repository, but you can consider removing the commit to minimize performance impact. \r\n\r\n\r\n&gt; GitHub blocks pushes that exceed 100 MB.\r\n\r\nYou removed the file but the problem persists, *I think* it&#39;s probably because you committed the file before, but this push still contains the original commit. Try to [delete the old commit with the large file][3].\r\n\r\n\r\n  [1]: https://git-lfs.github.com\r\n  [2]: https://docs.github.com/en/free-pro-team@latest/github/managing-large-files/conditions-for-large-files\r\n  [3]: https://stackoverflow.com/questions/1338728/delete-commits-from-a-branch-in-git","title":"File core is 131.63 MB; this exceeds GitHub&#39;s file size limit of 100.00 MB","body":"<p>Consider using <a href=\"https://git-lfs.github.com\" rel=\"nofollow noreferrer\">Git Large File Storage</a> as 131.63MB&gt;100.00MB, which exceeds the <a href=\"https://docs.github.com/en/free-pro-team@latest/github/managing-large-files/conditions-for-large-files\" rel=\"nofollow noreferrer\">file size limit</a> for git push, as indicated by GitHub official:</p>\n<blockquote>\n<p>If you attempt to add or update a file that is larger than 50 MB, you will receive a warning from Git. The changes will still successfully push to your repository, but you can consider removing the commit to minimize performance impact.</p>\n</blockquote>\n<blockquote>\n<p>GitHub blocks pushes that exceed 100 MB.</p>\n</blockquote>\n<p>You removed the file but the problem persists, <em>I think</em> it's probably because you committed the file before, but this push still contains the original commit. Try to <a href=\"https://stackoverflow.com/questions/1338728/delete-commits-from-a-branch-in-git\">delete the old commit with the large file</a>.</p>\n"}],"owner":{"account_id":19484226,"reputation":41,"user_id":14253916,"display_name":"Sonam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3953,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"closed_date":1608845673,"answer_count":1,"score":4,"last_activity_date":1663654927,"creation_date":1608836568,"question_id":65442343,"body_markdown":"Core- Program crash data.\r\nI have no idea from where core file was generated. I deleted the file from my local, tried to push to the changes again to the remote, but still I am getting `File core is 131.63 MB; this exceeds GitHub&#39;s file size limit of 100.00 MB`\r\n\r\ni cleared the cache as well, still get no luck.  There is not occurrence of core file in my entire pc.","title":"File core is 131.63 MB; this exceeds GitHub&#39;s file size limit of 100.00 MB","body":"<p>Core- Program crash data.\nI have no idea from where core file was generated. I deleted the file from my local, tried to push to the changes again to the remote, but still I am getting <code>File core is 131.63 MB; this exceeds GitHub's file size limit of 100.00 MB</code></p>\n<p>i cleared the cache as well, still get no luck.  There is not occurrence of core file in my entire pc.</p>\n"},{"tags":["java","java-8","java-time"],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663568849,"creation_date":1663568535,"answer_id":73769221,"question_id":73769155,"body_markdown":"You need to use the following pattern `h:mma` because of one-digit hour, also `a` parses `AM/PM` in uppercase\r\n\r\n\r\n\r\n    String dtStr = &quot;1:23am-1:08am&quot;;\r\n    String t1 = dtStr.split(&quot;-&quot;)[0].toUpperCase();\r\n    String t2 = dtStr.split(&quot;-&quot;)[1].toUpperCase();\r\n    DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;h:mma&quot;);\r\n    \r\n    LocalTime time1 = LocalTime.parse(t1, format);\r\n    LocalTime time2 = LocalTime.parse(t2, format);\r\n    Duration dur = Duration.between(time1, time2);\r\n    System.out.println(dur.toMinutes() + &quot; minutes &quot; + dur.toSecondsPart() + &quot; seconds&quot;);\r\n&lt;!-- --&gt;\r\n    -15 minutes 0 seconds\r\n\r\n\r\n[`java.time format specifications`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/time/format/DateTimeFormatter.html)","title":"Parsing time-of-day with am/pm using Java DateTimeFormatter class","body":"<p>You need to use the following pattern <code>h:mma</code> because of one-digit hour, also <code>a</code> parses <code>AM/PM</code> in uppercase</p>\n<pre><code>String dtStr = &quot;1:23am-1:08am&quot;;\nString t1 = dtStr.split(&quot;-&quot;)[0].toUpperCase();\nString t2 = dtStr.split(&quot;-&quot;)[1].toUpperCase();\nDateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;h:mma&quot;);\n\nLocalTime time1 = LocalTime.parse(t1, format);\nLocalTime time2 = LocalTime.parse(t2, format);\nDuration dur = Duration.between(time1, time2);\nSystem.out.println(dur.toMinutes() + &quot; minutes &quot; + dur.toSecondsPart() + &quot; seconds&quot;);\n</code></pre>\n\n<pre><code>-15 minutes 0 seconds\n</code></pre>\n<p><a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\"><code>java.time format specifications</code></a></p>\n"},{"tags":[],"owner":{"account_id":16632079,"reputation":2166,"user_id":16547945,"display_name":"Vojin Purić"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663568820,"creation_date":1663568820,"answer_id":73769256,"question_id":73769155,"body_markdown":"When you put `hh` you are saying that hours have to be 2 digits you need just 1 and same should apply for the minutes `h:ma` \r\n\r\n[DateTimeFormatter docs][1]\r\n&gt; If the count of letters is one, then the value is output using the minimum number of digits and without padding. Otherwise, the count of digits is used as the width of the output field, with the value zero-padded as necessary\r\n\r\nNext the &quot;am&quot; &quot;pm&quot; needs to be upper case to be parsed without an error.\r\n\r\n```\r\nString t1 = dtStr.split(&quot;-&quot;)[0].toUpperCase();;\r\nString t2 = dtStr.split(&quot;-&quot;)[1].toUpperCase();;\r\nDateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;h:ma&quot;);\r\n```\r\n\r\nNote that if you don&#39;t have fixed length for minutes as 2 and pass for example 1:5am instead of 1:05am parsing would fail if you put h:mma as pattern\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html","title":"Parsing time-of-day with am/pm using Java DateTimeFormatter class","body":"<p>When you put <code>hh</code> you are saying that hours have to be 2 digits you need just 1 and same should apply for the minutes <code>h:ma</code></p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">DateTimeFormatter docs</a></p>\n<blockquote>\n<p>If the count of letters is one, then the value is output using the minimum number of digits and without padding. Otherwise, the count of digits is used as the width of the output field, with the value zero-padded as necessary</p>\n</blockquote>\n<p>Next the &quot;am&quot; &quot;pm&quot; needs to be upper case to be parsed without an error.</p>\n<pre><code>String t1 = dtStr.split(&quot;-&quot;)[0].toUpperCase();;\nString t2 = dtStr.split(&quot;-&quot;)[1].toUpperCase();;\nDateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;h:ma&quot;);\n</code></pre>\n<p>Note that if you don't have fixed length for minutes as 2 and pass for example 1:5am instead of 1:05am parsing would fail if you put h:mma as pattern</p>\n"},{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1663569880,"creation_date":1663568967,"answer_id":73769279,"question_id":73769155,"body_markdown":"You cannot parse the `String`s due to two `h` in your format pattern instead of just one, and due to *am-pm of day* being in lower case letters. The `a` in the pattern `String` expects (standard/default) upper case, like `AM`.\r\n\r\nYou can either manipulate the `String`s as shown in the other answer(s), but you can also use a `DateTimeFormatter` that can handle lower-case things. All you need is to build one with a `DateTimeFormatterBuilder` and make it `parseCaseInsensitive()` **and** apply a `Locale`:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n\tString dtStr = &quot;1:23am-1:08am&quot;;\r\n\tString t1 = dtStr.split(&quot;-&quot;)[0];\r\n\tString t2 = dtStr.split(&quot;-&quot;)[1];\r\n\t// build a formatter that parses lower case am-pm of day\r\n\tDateTimeFormatter format = new DateTimeFormatterBuilder()\r\n\t\t\t\t\t\t\t\t\t.parseCaseInsensitive() // handles lower- and upper-case \r\n\t\t\t\t\t\t\t\t\t.appendPattern(&quot;h:mma&quot;)\r\n\t\t\t\t\t\t\t\t\t.toFormatter(Locale.ENGLISH); // doesn&#39;t reliably work without a Locale\r\n\tLocalTime time1 = LocalTime.parse(t1, format);\r\n\tLocalTime time2 = LocalTime.parse(t2, format);\r\n\tDuration dur = Duration.between(time1, time2);\r\n\tSystem.out.println(dur.toMinutes() + &quot; minutes &quot; + dur.toSecondsPart() + &quot; seconds&quot;);\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\n-15 minutes 0 seconds\r\n```\r\n\r\nThis is a little more flexible than manipulating the input before parsing, because this one can also parse upper-case am-pm of day.","title":"Parsing time-of-day with am/pm using Java DateTimeFormatter class","body":"<p>You cannot parse the <code>String</code>s due to two <code>h</code> in your format pattern instead of just one, and due to <em>am-pm of day</em> being in lower case letters. The <code>a</code> in the pattern <code>String</code> expects (standard/default) upper case, like <code>AM</code>.</p>\n<p>You can either manipulate the <code>String</code>s as shown in the other answer(s), but you can also use a <code>DateTimeFormatter</code> that can handle lower-case things. All you need is to build one with a <code>DateTimeFormatterBuilder</code> and make it <code>parseCaseInsensitive()</code> <strong>and</strong> apply a <code>Locale</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    String dtStr = &quot;1:23am-1:08am&quot;;\n    String t1 = dtStr.split(&quot;-&quot;)[0];\n    String t2 = dtStr.split(&quot;-&quot;)[1];\n    // build a formatter that parses lower case am-pm of day\n    DateTimeFormatter format = new DateTimeFormatterBuilder()\n                                    .parseCaseInsensitive() // handles lower- and upper-case \n                                    .appendPattern(&quot;h:mma&quot;)\n                                    .toFormatter(Locale.ENGLISH); // doesn't reliably work without a Locale\n    LocalTime time1 = LocalTime.parse(t1, format);\n    LocalTime time2 = LocalTime.parse(t2, format);\n    Duration dur = Duration.between(time1, time2);\n    System.out.println(dur.toMinutes() + &quot; minutes &quot; + dur.toSecondsPart() + &quot; seconds&quot;);\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-15 minutes 0 seconds\n</code></pre>\n<p>This is a little more flexible than manipulating the input before parsing, because this one can also parse upper-case am-pm of day.</p>\n"}],"owner":{"account_id":4059813,"reputation":117,"user_id":3336647,"accept_rate":0,"display_name":"DpkTheJavaCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":489,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1663654827,"answer_count":3,"score":2,"last_activity_date":1663654916,"creation_date":1663568105,"question_id":73769155,"body_markdown":"I am using Java DateTimeFormatter for formatting given time and get difference between given start and end time. But I am getting below exception:\r\n\r\n    Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text &#39;1:23am&#39; could not be parsed at index 0\r\n\r\nBelow is my code:\r\n\r\n    String dtStr = &quot;1:23am-1:08am&quot;;\r\n\tString t1 = dtStr.split(&quot;-&quot;)[0];\r\n\tString t2 = dtStr.split(&quot;-&quot;)[1];\r\n\tDateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;hh:mma&quot;);\r\n\tLocalTime time1 = LocalTime.parse(t1, format);\r\n\tLocalTime time2 = LocalTime.parse(t2, format);\r\n\tDuration dur = Duration.between(time1, time2);\r\n\tSystem.out.println(dur.toMinutes() + &quot; minutes &quot; + dur.toSecondsPart() + &quot; seconds&quot;);\r\n\r\n I am not sure if I am doing anything wrong. Any help would be appreciated.","title":"Parsing time-of-day with am/pm using Java DateTimeFormatter class","body":"<p>I am using Java DateTimeFormatter for formatting given time and get difference between given start and end time. But I am getting below exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text '1:23am' could not be parsed at index 0\n</code></pre>\n<p>Below is my code:</p>\n<pre><code>String dtStr = &quot;1:23am-1:08am&quot;;\nString t1 = dtStr.split(&quot;-&quot;)[0];\nString t2 = dtStr.split(&quot;-&quot;)[1];\nDateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;hh:mma&quot;);\nLocalTime time1 = LocalTime.parse(t1, format);\nLocalTime time2 = LocalTime.parse(t2, format);\nDuration dur = Duration.between(time1, time2);\nSystem.out.println(dur.toMinutes() + &quot; minutes &quot; + dur.toSecondsPart() + &quot; seconds&quot;);\n</code></pre>\n<p>I am not sure if I am doing anything wrong. Any help would be appreciated.</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":7137920,"reputation":1714,"user_id":5456789,"display_name":"Amir Azizkhani"},"score":0,"creation_date":1663646943,"post_id":73778743,"comment_id":130282985,"body_markdown":"Can you provide your converter class too?","body":"Can you provide your converter class too?"}],"owner":{"account_id":8796832,"reputation":306,"user_id":6574475,"display_name":"Milad Amery"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663654882,"creation_date":1663618114,"question_id":73778743,"body_markdown":"In our application we need to encrypt a column of table due to security demands, but this table has a lot of rows so we decided that we do this gradually over time. new entries come with encrypted value and old values will be migrated slowly. I&#39;m doing this by adding a new column to table and via AttributeConverter/@Convert encryption/decryption is done.\r\n```java\r\npublic class AccountCard {\r\n    @Column(name = &quot;card_number&quot;)\r\n    private String number;\r\n\r\n    @Column(name = &quot;encrypted_card_number&quot;)\r\n    @Convert(converter = CardNumberConverter.class)\r\n    private String encryptedCardNumber;\r\n}\r\n```\r\nIn AccountCardRepository we have changed previous queries to search for both `number` and `encryptedCardNumber` like below:\r\n```java\r\n    @Query(&quot;&quot;&quot;\r\n                SELECT a FROM AccountCard a\r\n                WHERE a.encryptedCardNumber = :cardNumber\r\n                OR a.number = :cardNumber\r\n    &quot;&quot;&quot;)\r\n    AccountCard findByCardNumber(@Param(&quot;cardNumber&quot;) String cardNumber);\r\n```\r\nSpring data jpa does the transformation that is required for `encryptedCardNumber` which is very nice but problem is for `number` column the same transformed parameter is being set. By activating \r\n```\r\norg.hibernate.type.descriptor.sql: TRACE\r\n```\r\nlogs are shown like this:\r\n```\r\n2022-09-20 00:28:09.059 TRACE 21768 --- [nio-8082-exec-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [UfcfN9potyyzs8pR3fyXxVL6SxLcLoaQUN5ZDr7nJ3Y=]\r\n2022-09-20 00:28:09.060 TRACE 21768 --- [nio-8082-exec-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - [UfcfN9potyyzs8pR3fyXxVL6SxLcLoaQUN5ZDr7nJ3Y=]\r\n```\r\nAs you see for both columns the encrypted value is being set. \r\nIf I put 2 parameters for query things gets resolved but its ugly. like below:\r\n```\r\n    @Query(&quot;&quot;&quot;\r\n                SELECT a FROM AccountCard a\r\n                WHERE a.encryptedCardNumber = :cardNumber1\r\n                OR a.number = :cardNumber2\r\n    &quot;&quot;&quot;)\r\n    AccountCard findByCardNumber(@Param(&quot;cardNumber&quot;) String cardNumber1, @Param(&quot;cardNumber2&quot;) String cardNumber2);\r\n```\r\nand call it with same card number.\r\n\r\n**How can I tell spring data that put encryptedValue for `encryptedCardNumber` and plain value for `number`**\r\n\r\n**EDIT**\r\n\r\nHere is CardNumberConverter\r\n```java\r\npublic class CardNumberConverter implements AttributeConverter&lt;String, String&gt; {\r\n\r\n    @Override\r\n    public String convertToDatabaseColumn(String s) {\r\n        return AES.encrypt(s);\r\n    }\r\n\r\n    @Override\r\n    public String convertToEntityAttribute(String s) {\r\n        return AES.decrypt(s);\r\n    }\r\n}\r\n```","title":"Setting AttributeConverter on a column changes @Query parameter and that parameter cant be reused","body":"<p>In our application we need to encrypt a column of table due to security demands, but this table has a lot of rows so we decided that we do this gradually over time. new entries come with encrypted value and old values will be migrated slowly. I'm doing this by adding a new column to table and via AttributeConverter/@Convert encryption/decryption is done.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AccountCard {\n    @Column(name = &quot;card_number&quot;)\n    private String number;\n\n    @Column(name = &quot;encrypted_card_number&quot;)\n    @Convert(converter = CardNumberConverter.class)\n    private String encryptedCardNumber;\n}\n</code></pre>\n<p>In AccountCardRepository we have changed previous queries to search for both <code>number</code> and <code>encryptedCardNumber</code> like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Query(&quot;&quot;&quot;\n                SELECT a FROM AccountCard a\n                WHERE a.encryptedCardNumber = :cardNumber\n                OR a.number = :cardNumber\n    &quot;&quot;&quot;)\n    AccountCard findByCardNumber(@Param(&quot;cardNumber&quot;) String cardNumber);\n</code></pre>\n<p>Spring data jpa does the transformation that is required for <code>encryptedCardNumber</code> which is very nice but problem is for <code>number</code> column the same transformed parameter is being set. By activating</p>\n<pre><code>org.hibernate.type.descriptor.sql: TRACE\n</code></pre>\n<p>logs are shown like this:</p>\n<pre><code>2022-09-20 00:28:09.059 TRACE 21768 --- [nio-8082-exec-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [UfcfN9potyyzs8pR3fyXxVL6SxLcLoaQUN5ZDr7nJ3Y=]\n2022-09-20 00:28:09.060 TRACE 21768 --- [nio-8082-exec-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - [UfcfN9potyyzs8pR3fyXxVL6SxLcLoaQUN5ZDr7nJ3Y=]\n</code></pre>\n<p>As you see for both columns the encrypted value is being set.\nIf I put 2 parameters for query things gets resolved but its ugly. like below:</p>\n<pre><code>    @Query(&quot;&quot;&quot;\n                SELECT a FROM AccountCard a\n                WHERE a.encryptedCardNumber = :cardNumber1\n                OR a.number = :cardNumber2\n    &quot;&quot;&quot;)\n    AccountCard findByCardNumber(@Param(&quot;cardNumber&quot;) String cardNumber1, @Param(&quot;cardNumber2&quot;) String cardNumber2);\n</code></pre>\n<p>and call it with same card number.</p>\n<p><strong>How can I tell spring data that put encryptedValue for <code>encryptedCardNumber</code> and plain value for <code>number</code></strong></p>\n<p><strong>EDIT</strong></p>\n<p>Here is CardNumberConverter</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CardNumberConverter implements AttributeConverter&lt;String, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(String s) {\n        return AES.encrypt(s);\n    }\n\n    @Override\n    public String convertToEntityAttribute(String s) {\n        return AES.decrypt(s);\n    }\n}\n</code></pre>\n"},{"tags":["java","twilio","twilio-api","verify","totp"],"answers":[{"tags":[],"owner":{"account_id":13515266,"reputation":10571,"user_id":9750066,"display_name":"Alan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590408007,"creation_date":1590408007,"answer_id":62001994,"question_id":61998688,"body_markdown":"There is a standard time of 10 minutes, reference the documentation below.\r\n\r\n&gt; [Twilio Verify Best Practices][1]\r\n\r\n\r\n  [1]: https://www.twilio.com/docs/verify/developer-best-practices#token-validity-period","title":"Is it possible to set Twilio Verify api token expiry time?","body":"<p>There is a standard time of 10 minutes, reference the documentation below.</p>\n\n<blockquote>\n  <p><a href=\"https://www.twilio.com/docs/verify/developer-best-practices#token-validity-period\" rel=\"nofollow noreferrer\">Twilio Verify Best Practices</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8543844,"reputation":141,"user_id":6402968,"display_name":"Ernis A."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663654412,"creation_date":1663654412,"answer_id":73782300,"question_id":61998688,"body_markdown":"Tokens are valid for a default period of 10 minutes once generated. You can customize the validity period of your Service&#39;s tokens to any value between 2 minutes and 24 hours by [contacting Support][1].\r\n\r\nMore details: [Twillio Docs][2]\r\n\r\n\r\n  [1]: https://www.twilio.com/console/support/tickets/create\r\n  [2]: https://www.twilio.com/docs/verify/api/rate-limits-and-timeouts","title":"Is it possible to set Twilio Verify api token expiry time?","body":"<p>Tokens are valid for a default period of 10 minutes once generated. You can customize the validity period of your Service's tokens to any value between 2 minutes and 24 hours by <a href=\"https://www.twilio.com/console/support/tickets/create\" rel=\"nofollow noreferrer\">contacting Support</a>.</p>\n<p>More details: <a href=\"https://www.twilio.com/docs/verify/api/rate-limits-and-timeouts\" rel=\"nofollow noreferrer\">Twillio Docs</a></p>\n"}],"owner":{"account_id":6168346,"reputation":1290,"user_id":4807443,"accept_rate":61,"display_name":"shamila"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1709,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1663654412,"creation_date":1590395737,"question_id":61998688,"body_markdown":"I want to use Twilio&#39;s &quot;Verify&quot; service for my 4 digits OTP verification, but I don&#39;t see any expiry time mentioned in there api documents. I can&#39;t use there &quot;Authy&quot; service since my requirement is to have 4 digits OTP. Is it possible to set expiry time in Verify api or is there any standard time?","title":"Is it possible to set Twilio Verify api token expiry time?","body":"<p>I want to use Twilio's \"Verify\" service for my 4 digits OTP verification, but I don't see any expiry time mentioned in there api documents. I can't use there \"Authy\" service since my requirement is to have 4 digits OTP. Is it possible to set expiry time in Verify api or is there any standard time?</p>\n"},{"tags":["java","multithreading","volatile","compare-and-swap","atomicinteger"],"comments":[{"owner":{"account_id":15988,"reputation":872878,"user_id":34397,"accept_rate":87,"display_name":"SLaks"},"score":1,"creation_date":1442504386,"post_id":32634280,"comment_id":53117602,"body_markdown":"http://blog.slaks.net/2013-07-22/thread-safe-data-structures/","body":"<a href=\"http://blog.slaks.net/2013-07-22/thread-safe-data-structures/\" rel=\"nofollow noreferrer\">blog.slaks.net/2013-07-22/thread-safe-data-structures</a>"},{"owner":{"account_id":1353175,"reputation":3781,"user_id":1292104,"accept_rate":53,"display_name":"nir"},"score":0,"creation_date":1563070205,"post_id":32634280,"comment_id":100578138,"body_markdown":"More complete explanation: https://www.baeldung.com/java-atomic-variables","body":"More complete explanation: <a href=\"https://www.baeldung.com/java-atomic-variables\" rel=\"nofollow noreferrer\">baeldung.com/java-atomic-variables</a>"},{"owner":{"account_id":442748,"reputation":5867,"user_id":833538,"accept_rate":90,"display_name":"RoundPi"},"score":0,"creation_date":1592165632,"post_id":32634280,"comment_id":110320656,"body_markdown":"The loop is there till the next value is have been successfully updated, but since java 8+ you can simply call getAndAdd(1), N.B just need to pass in the delta which is 1 here. No need to loop anymore, all taken care for  you by JDK. https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html#getAndAdd-int-","body":"The loop is there till the next value is have been successfully updated, but since java 8+ you can simply call getAndAdd(1), N.B just need to pass in the delta which is 1 here. No need to loop anymore, all taken care for  you by JDK. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html#getAndAdd-int-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomi&zwnj;&#8203;c/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6093107,"reputation":23152,"user_id":4754790,"accept_rate":94,"display_name":"Dragan Bozanovic"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1442503908,"creation_date":1442503908,"answer_id":32634392,"question_id":32634280,"body_markdown":"`for (;;)` is an infinite loop, so it will just retry the attempt.","title":"How does &quot;Compare And Set&quot; in AtomicInteger works","body":"<p><code>for (;;)</code> is an infinite loop, so it will just retry the attempt.</p>\n"},{"tags":[],"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1505775582,"creation_date":1442504665,"answer_id":32634631,"question_id":32634280,"body_markdown":"The atomic objects make use of [Compare and Swap](https://en.wikipedia.org/wiki/Compare-and-swap) mechanism to make them atomic - i.e. it is possible to guarantee that the value **was** as specified **and is now** at the new value.\r\n\r\nThe code you posted continually tries to set the current value to one more than it was before. Remember that another thread could also have performed a `get` and is trying to set it too. If two threads race each other to change the value it is possible for one of the increments to fail.\r\n\r\nConsider the following scenario:\r\n\r\n 1. Thread 1 calls `get` and gets the value `1`.\r\n 2. Thread 1 calculates `next` to be `2`.\r\n 3. Thread 2 calls `get` and gets the value `1`.\r\n 4. Thread 2 calculates `next` to be `2`.\r\n 5. Both threads try to write the value.\r\n\r\nNow because of atomics - **only one thread will succeed**, the other will recieve `false` from the `compareAndSet` and go around again.\r\n\r\nIf this mechanism was not used it would be quite possible for both threads to increment the value resulting in only one increment actually being done.\r\n\r\nThe confusing infinite loop `for(;;)` will only really loop if many threads are writing to the variable at the same time. Under very heavy load it may loop around several times but it should complete quite quickly.","title":"How does &quot;Compare And Set&quot; in AtomicInteger works","body":"<p>The atomic objects make use of <a href=\"https://en.wikipedia.org/wiki/Compare-and-swap\" rel=\"noreferrer\">Compare and Swap</a> mechanism to make them atomic - i.e. it is possible to guarantee that the value <strong>was</strong> as specified <strong>and is now</strong> at the new value.</p>\n\n<p>The code you posted continually tries to set the current value to one more than it was before. Remember that another thread could also have performed a <code>get</code> and is trying to set it too. If two threads race each other to change the value it is possible for one of the increments to fail.</p>\n\n<p>Consider the following scenario:</p>\n\n<ol>\n<li>Thread 1 calls <code>get</code> and gets the value <code>1</code>.</li>\n<li>Thread 1 calculates <code>next</code> to be <code>2</code>.</li>\n<li>Thread 2 calls <code>get</code> and gets the value <code>1</code>.</li>\n<li>Thread 2 calculates <code>next</code> to be <code>2</code>.</li>\n<li>Both threads try to write the value.</li>\n</ol>\n\n<p>Now because of atomics - <strong>only one thread will succeed</strong>, the other will recieve <code>false</code> from the <code>compareAndSet</code> and go around again.</p>\n\n<p>If this mechanism was not used it would be quite possible for both threads to increment the value resulting in only one increment actually being done.</p>\n\n<p>The confusing infinite loop <code>for(;;)</code> will only really loop if many threads are writing to the variable at the same time. Under very heavy load it may loop around several times but it should complete quite quickly.</p>\n"}],"owner":{"account_id":4434750,"reputation":1949,"user_id":3610891,"accept_rate":62,"display_name":"Onki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27513,"favorite_count":0,"down_vote_count":1,"up_vote_count":34,"accepted_answer_id":32634631,"answer_count":2,"score":33,"last_activity_date":1663653815,"creation_date":1442503644,"question_id":32634280,"body_markdown":"`AtomicInteger` works with two concepts : CAS and `volatile` variable.\r\n\r\nUsing `volatile` variable insures that the current value will be visible to all threads and it will not be cached.\r\n\r\nBut I am confused over CAS(compare AND set) concept which is explained below:\r\n\r\n    public final int getAndIncrement() {\r\n        for (;;) {\r\n            int current = get();\r\n            int next = current + 1;\r\n            if (compareAndSet(current, next))\r\n                return current;\r\n        }\r\n     }\r\n\r\nMy question is that what`if(compareAndSet(current, next)` returns `false`? Will the value not be updated? \r\nIn this case what will happen when a Thread is executing the below case:\r\n\r\n    private AtomicInteger count = new AtomicInteger();\r\n    count.incrementAndGet();\r\n\r\n","title":"How does &quot;Compare And Set&quot; in AtomicInteger works","body":"<p><code>AtomicInteger</code> works with two concepts : CAS and <code>volatile</code> variable.</p>\n\n<p>Using <code>volatile</code> variable insures that the current value will be visible to all threads and it will not be cached.</p>\n\n<p>But I am confused over CAS(compare AND set) concept which is explained below:</p>\n\n<pre><code>public final int getAndIncrement() {\n    for (;;) {\n        int current = get();\n        int next = current + 1;\n        if (compareAndSet(current, next))\n            return current;\n    }\n }\n</code></pre>\n\n<p>My question is that what<code>if(compareAndSet(current, next)</code> returns <code>false</code>? Will the value not be updated? \nIn this case what will happen when a Thread is executing the below case:</p>\n\n<pre><code>private AtomicInteger count = new AtomicInteger();\ncount.incrementAndGet();\n</code></pre>\n"},{"tags":["java","soap","jaxb","http-status-code-415"],"answers":[{"tags":[],"owner":{"account_id":1826348,"reputation":13,"user_id":1659049,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663653466,"creation_date":1663653466,"answer_id":73782184,"question_id":63703495,"body_markdown":"@Akshita Mathur Issue should be the SOAP protocol version of the client not matching the protocol version of the server. With SOAP protocol v1.0 spring boot generates the Content-Type as text/xml and for SOAP v1.2 it generates the Content-Type in request header as application/soap+xml. By default spring boot soap client points to SOAP protocol v1.0. Please refer to the below mentioned code if you want to re-point the SOAP protocol version of the client to v1.2.\r\n\r\nPlease add the below mentioned bean to SoapClient class \r\n\r\n```\r\n\r\n@Bean\r\nWebServiceMessageFactory messageFactory()\r\n{\r\n   SaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory();\r\n   messageFactory.setSoapVersion(SoapVersion.SOAP_12);\r\n   return messageFactory;\r\n}\r\n```\r\nand below mentioned line to the method soapConnector() on SoapConfig class to enforce SOAP v1.2 protocol.\r\n\r\n```\r\nclient.setMessageFactory(messageFactory());\r\n```\r\nPlease let me know how it goes.","title":"415 Unsupported Media Exception even after setting application/soap+xml for SOAP 1.2 call","body":"<p>@Akshita Mathur Issue should be the SOAP protocol version of the client not matching the protocol version of the server. With SOAP protocol v1.0 spring boot generates the Content-Type as text/xml and for SOAP v1.2 it generates the Content-Type in request header as application/soap+xml. By default spring boot soap client points to SOAP protocol v1.0. Please refer to the below mentioned code if you want to re-point the SOAP protocol version of the client to v1.2.</p>\n<p>Please add the below mentioned bean to SoapClient class</p>\n<pre><code>\n@Bean\nWebServiceMessageFactory messageFactory()\n{\n   SaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory();\n   messageFactory.setSoapVersion(SoapVersion.SOAP_12);\n   return messageFactory;\n}\n</code></pre>\n<p>and below mentioned line to the method soapConnector() on SoapConfig class to enforce SOAP v1.2 protocol.</p>\n<pre><code>client.setMessageFactory(messageFactory());\n</code></pre>\n<p>Please let me know how it goes.</p>\n"}],"owner":{"account_id":19149981,"reputation":11,"user_id":13988118,"display_name":"Akshita Mathur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":897,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663653466,"creation_date":1599042005,"question_id":63703495,"body_markdown":"I am getting org.springframework.ws.client.WebServiceTransportException: Unsupported Media Type [415] when trying for a SOAP call. The code is as follows:\r\n```\r\npublic class SoapClient extends WebServiceGatewaySupport {\r\n\r\n    public RunReportResponse getCostingDetails(RunReport request) {\r\n        return (RunReportResponse) getWebServiceTemplate()\r\n                .marshalSendAndReceive(\r\n                        &quot;https://domain:443/xmlpserver/services/ReportService&quot;\r\n                        ,request);\r\n    }\r\n}\r\n```\r\n**SoapConfig.java**\r\n```\r\n@Configuration\r\npublic class SoapConfig {\r\n\r\n    @Bean\r\n    public Jaxb2Marshaller marshaller() {\r\n        Jaxb2Marshaller marshaller=new Jaxb2Marshaller();\r\n        marshaller.setContextPath(&quot;com.report.dto&quot;);\r\n        return marshaller;\r\n    }\r\n\r\n    @Bean\r\n    public SoapClient soapConnector() {\r\n        SoapClient client = new SoapClient();\r\n        client.setDefaultUri(&quot;https://domain:443/xmlpserver/services/ReportService&quot;);\r\n        client.setMarshaller(marshaller());\r\n        client.setUnmarshaller(marshaller());\r\n        client.setMessageSender(httpComponentsMessageSender());\r\n        return client;\r\n    }\r\n\r\n    @Bean\r\n    public HttpComponentsMessageSender httpComponentsMessageSender() {\r\n        return new HttpComponentsMessageSender(createHttpClient());\r\n    }\r\n\r\n    @Bean\r\n    HttpClient createHttpClient() {\r\n        List&lt;Header&gt; headers = new ArrayList&lt;&gt;();\r\n        BasicHeader authHeader = new BasicHeader(&quot;Authorization&quot;, &quot;Basic username:password&quot;);\r\n        BasicHeader contentType = new BasicHeader(HttpHeaders.CONTENT_TYPE, &quot;application/soap+xml&quot;);\r\n        headers.add(contentType);\r\n        headers.add(authHeader);\r\n\r\n        // add more header as more as needed\r\n        RequestDefaultHeaders reqHeader = new RequestDefaultHeaders(headers);\r\n\r\n       return HttpClients.custom()\r\n                        .addInterceptorFirst(new HttpComponentsMessageSender.RemoveSoapHeadersInterceptor())\r\n                        .addInterceptorLast(reqHeader)\r\n                        .build();\r\n\r\n    }\r\n}\r\n```\r\nI am calling the getCostingDetails() through a Controller class, but receiving the error:\r\n```\r\nERROR[http-nio-8080-exec-1] [dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.ws.client.WebServiceTransportException: Unsupported Media Type [415]] with root cause\r\norg.springframework.ws.client.WebServiceTransportException: Unsupported Media Type [415]\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.handleError(WebServiceTemplate.java:695) ~[spring-ws-core-2.2.0.RELEASE.jar:2.2.0.RELEASE]\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:606) ~[spring-ws-core-2.2.0.RELEASE.jar:2.2.0.RELEASE]\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:555) ~[spring-ws-core-2.2.0.RELEASE.jar:2.2.0.RELEASE]\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:390) ~[spring-ws-core-2.2.0.RELEASE.jar:2.2.0.RELEASE]\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:378) ~[spring-ws-core-2.2.0.RELEASE.jar:2.2.0.RELEASE]\r\nat com.report.client.SoapClient.getCostingDetails(SoapClient.java:11) ~[main/:?]\r\n```","title":"415 Unsupported Media Exception even after setting application/soap+xml for SOAP 1.2 call","body":"<p>I am getting org.springframework.ws.client.WebServiceTransportException: Unsupported Media Type [415] when trying for a SOAP call. The code is as follows:</p>\n<pre><code>public class SoapClient extends WebServiceGatewaySupport {\n\n    public RunReportResponse getCostingDetails(RunReport request) {\n        return (RunReportResponse) getWebServiceTemplate()\n                .marshalSendAndReceive(\n                        &quot;https://domain:443/xmlpserver/services/ReportService&quot;\n                        ,request);\n    }\n}\n</code></pre>\n<p><strong>SoapConfig.java</strong></p>\n<pre><code>@Configuration\npublic class SoapConfig {\n\n    @Bean\n    public Jaxb2Marshaller marshaller() {\n        Jaxb2Marshaller marshaller=new Jaxb2Marshaller();\n        marshaller.setContextPath(&quot;com.report.dto&quot;);\n        return marshaller;\n    }\n\n    @Bean\n    public SoapClient soapConnector() {\n        SoapClient client = new SoapClient();\n        client.setDefaultUri(&quot;https://domain:443/xmlpserver/services/ReportService&quot;);\n        client.setMarshaller(marshaller());\n        client.setUnmarshaller(marshaller());\n        client.setMessageSender(httpComponentsMessageSender());\n        return client;\n    }\n\n    @Bean\n    public HttpComponentsMessageSender httpComponentsMessageSender() {\n        return new HttpComponentsMessageSender(createHttpClient());\n    }\n\n    @Bean\n    HttpClient createHttpClient() {\n        List&lt;Header&gt; headers = new ArrayList&lt;&gt;();\n        BasicHeader authHeader = new BasicHeader(&quot;Authorization&quot;, &quot;Basic username:password&quot;);\n        BasicHeader contentType = new BasicHeader(HttpHeaders.CONTENT_TYPE, &quot;application/soap+xml&quot;);\n        headers.add(contentType);\n        headers.add(authHeader);\n\n        // add more header as more as needed\n        RequestDefaultHeaders reqHeader = new RequestDefaultHeaders(headers);\n\n       return HttpClients.custom()\n                        .addInterceptorFirst(new HttpComponentsMessageSender.RemoveSoapHeadersInterceptor())\n                        .addInterceptorLast(reqHeader)\n                        .build();\n\n    }\n}\n</code></pre>\n<p>I am calling the getCostingDetails() through a Controller class, but receiving the error:</p>\n<pre><code>ERROR[http-nio-8080-exec-1] [dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.ws.client.WebServiceTransportException: Unsupported Media Type [415]] with root cause\norg.springframework.ws.client.WebServiceTransportException: Unsupported Media Type [415]\n    at org.springframework.ws.client.core.WebServiceTemplate.handleError(WebServiceTemplate.java:695) ~[spring-ws-core-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:606) ~[spring-ws-core-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:555) ~[spring-ws-core-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:390) ~[spring-ws-core-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:378) ~[spring-ws-core-2.2.0.RELEASE.jar:2.2.0.RELEASE]\nat com.report.client.SoapClient.getCostingDetails(SoapClient.java:11) ~[main/:?]\n</code></pre>\n"},{"tags":["java","atomic","java-9","compare-and-swap","atomicinteger"],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1583994948,"creation_date":1583994521,"answer_id":60648679,"question_id":60648557,"body_markdown":"The two methods have a different return type.\r\n\r\n`compareAndSet` returns `boolean`:\r\n\r\n&gt;true if successful. False return indicates that the actual value was not equal to the expected value.\r\n\r\n`compareAndExchange` returns an `int`:\r\n\r\n&gt;the witness value, which will be the same as the expected value if successful\r\n\r\ni.e. `compareAndSet` indicates whether the value of the variable was updated, while `compareAndExchange` returns the current value of the variable, which gives you more information.\r\n\r\n`compareAndSet(1,2)` will set the value of the atomic integer to `2` if the previous value was `1`, and will return `true` in that case. Otherwise, it will not set the value, and it will return `false`.\r\n\r\n`compareAndExchange​(1,2)` will set the value of the atomic integer to `2` if the previous value was `1`, and will return `1` in that case. If the previous value wasn&#39;t `1`, it will not set the value, and will return the current (unchanged) value.","title":"compareandexchange() vs compareandset() of Atomic-Integer","body":"<p>The two methods have a different return type.</p>\n\n<p><code>compareAndSet</code> returns <code>boolean</code>:</p>\n\n<blockquote>\n  <p>true if successful. False return indicates that the actual value was not equal to the expected value.</p>\n</blockquote>\n\n<p><code>compareAndExchange</code> returns an <code>int</code>:</p>\n\n<blockquote>\n  <p>the witness value, which will be the same as the expected value if successful</p>\n</blockquote>\n\n<p>i.e. <code>compareAndSet</code> indicates whether the value of the variable was updated, while <code>compareAndExchange</code> returns the current value of the variable, which gives you more information.</p>\n\n<p><code>compareAndSet(1,2)</code> will set the value of the atomic integer to <code>2</code> if the previous value was <code>1</code>, and will return <code>true</code> in that case. Otherwise, it will not set the value, and it will return <code>false</code>.</p>\n\n<p><code>compareAndExchange​(1,2)</code> will set the value of the atomic integer to <code>2</code> if the previous value was <code>1</code>, and will return <code>1</code> in that case. If the previous value wasn't <code>1</code>, it will not set the value, and will return the current (unchanged) value.</p>\n"}],"owner":{"account_id":4761031,"reputation":11006,"user_id":3848411,"accept_rate":60,"display_name":"Joker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3147,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":1,"score":6,"last_activity_date":1663653423,"creation_date":1583993818,"question_id":60648557,"body_markdown":"While working on AtomicInteger, I found this API provides two Methods.\r\n\r\n**compareAndExchange**:\r\n\r\n&gt; Atomically sets the value to newValue if the current value, referred\r\n&gt; to as the witness value, == expectedValue, with memory effects as\r\n&gt; specified by `VarHandle.compareAndExchange(java.lang.Object...)`\r\n\r\n**compareAndSet**:\r\n\r\n&gt; Atomically sets the value to `newValue` if the current `value == expectedValue`, with memory effects as specified by\r\n&gt; `VarHandle.compareAndSet(java.lang.Object...)`.\r\n\r\nI am unable to understand difference between two, Please help with suitable example.","title":"compareandexchange() vs compareandset() of Atomic-Integer","body":"<p>While working on AtomicInteger, I found this API provides two Methods.</p>\n\n<p><strong>compareAndExchange</strong>:</p>\n\n<blockquote>\n  <p>Atomically sets the value to newValue if the current value, referred\n  to as the witness value, == expectedValue, with memory effects as\n  specified by <code>VarHandle.compareAndExchange(java.lang.Object...)</code></p>\n</blockquote>\n\n<p><strong>compareAndSet</strong>:</p>\n\n<blockquote>\n  <p>Atomically sets the value to <code>newValue</code> if the current <code>value == expectedValue</code>, with memory effects as specified by\n  <code>VarHandle.compareAndSet(java.lang.Object...)</code>.</p>\n</blockquote>\n\n<p>I am unable to understand difference between two, Please help with suitable example.</p>\n"},{"tags":["java","list","iterator"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1663646384,"post_id":73781507,"comment_id":130282917,"body_markdown":"What do you mean by &quot;generic&quot;? And how is this way not &quot;easy&quot;?","body":"What do you mean by &quot;generic&quot;? And how is this way not &quot;easy&quot;?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1663646414,"post_id":73781507,"comment_id":130282920,"body_markdown":"It looks slightly simpler if you use an enhanced for loop across `resultBean`.","body":"It looks slightly simpler if you use an enhanced for loop across <code>resultBean</code>."}],"answers":[{"tags":[],"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663653150,"creation_date":1663653150,"answer_id":73782156,"question_id":73781507,"body_markdown":"As you can see from the Java Language Specification (JLS), [14.14](https://docs.oracle.com/javase/specs/jls/se19/html/jls-14.html#jls-14.14), there are two kinds of for loops. The basic for loop, which uses an index, and the enhanced for loop, which doesn&#39;t.\r\n\r\nYou used the basic for loop but violated the DRY (Don&#39;t Repeat Yourself) principle in that you&#39;re calling `resultBean.get(i)` twice. To cure that, you can introduce a variable which makes the code much more readable:\r\n\r\n```\r\n    for (int i = 0; i &lt; resultBean.size(); i++) {\r\n        UserBean user = resultBean.get(i);\r\n        user.setChabi(encode(decryptChabi(user.getChabi())));\r\n    }\r\n```\r\n\r\nIn your example, you don&#39;t even need the index variable, so you can replace the basic for loop with an enhanced for loop which would be even more concise:\r\n\r\n```\r\n    for (UserBean user : resultBean) {\r\n        user.setChabi(encode(decryptChabi(user.getChabi())));\r\n    }\r\n```\r\n\r\nWhatever you do, prefer code that is easy to read over code that is fast/easy to write.","title":"for list iterator and has to manipulate by index","body":"<p>As you can see from the Java Language Specification (JLS), <a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-14.html#jls-14.14\" rel=\"nofollow noreferrer\">14.14</a>, there are two kinds of for loops. The basic for loop, which uses an index, and the enhanced for loop, which doesn't.</p>\n<p>You used the basic for loop but violated the DRY (Don't Repeat Yourself) principle in that you're calling <code>resultBean.get(i)</code> twice. To cure that, you can introduce a variable which makes the code much more readable:</p>\n<pre><code>    for (int i = 0; i &lt; resultBean.size(); i++) {\n        UserBean user = resultBean.get(i);\n        user.setChabi(encode(decryptChabi(user.getChabi())));\n    }\n</code></pre>\n<p>In your example, you don't even need the index variable, so you can replace the basic for loop with an enhanced for loop which would be even more concise:</p>\n<pre><code>    for (UserBean user : resultBean) {\n        user.setChabi(encode(decryptChabi(user.getChabi())));\n    }\n</code></pre>\n<p>Whatever you do, prefer code that is easy to read over code that is fast/easy to write.</p>\n"}],"owner":{"account_id":26386415,"reputation":1,"user_id":20038861,"display_name":"learner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1663653150,"creation_date":1663646259,"question_id":73781507,"body_markdown":"have a list of bean and I want to manipulate by its index and I tried below way, is there any other way of doing this which is easier and generic?\r\n\r\n    List&lt;UserBean&gt; resultBean = query.setFirstResult(offset).setMaxResults(limit).getResultList();\t\t\t\r\n        for (int i = 0; i &lt; resultBean.size(); i++) {\r\n\t       resultBean.get(i).setChabi(encode(decyptChabi(resultBean.get(i).getChabi())));\r\n\t    }","title":"for list iterator and has to manipulate by index","body":"<p>have a list of bean and I want to manipulate by its index and I tried below way, is there any other way of doing this which is easier and generic?</p>\n<pre><code>List&lt;UserBean&gt; resultBean = query.setFirstResult(offset).setMaxResults(limit).getResultList();          \n    for (int i = 0; i &lt; resultBean.size(); i++) {\n       resultBean.get(i).setChabi(encode(decyptChabi(resultBean.get(i).getChabi())));\n    }\n</code></pre>\n"},{"tags":["java","maven","testng","maven-surefire-plugin"],"comments":[{"owner":{"account_id":25125122,"reputation":468,"user_id":18973005,"display_name":"Randommm"},"score":0,"creation_date":1663575315,"post_id":73770022,"comment_id":130263553,"body_markdown":"`mvn clean test -Dsmoke=smokeSuite.xml` should be the right way, but make sure the path is correct (relative to current dir)","body":"<code>mvn clean test -Dsmoke=smokeSuite.xml</code> should be the right way, but make sure the path is correct (relative to current dir)"},{"owner":{"account_id":9894359,"reputation":507,"user_id":7326377,"accept_rate":100,"display_name":"Алекса Јевтић"},"score":0,"creation_date":1663575870,"post_id":73770022,"comment_id":130263690,"body_markdown":"@Randommm\nI checked and the path is correct, but when I use that command I get an error saying  Unknown lifecycle phase &quot;.xml&quot;. \nI know the path is correct because when I use\nmvn clean test -Dsmoke=src/test/smokeSuite (without .xml) I get the error that the suite file is not a valid file... but at least it&#39;s showing the path and it&#39;s correct.\nSo it looks like every time I add .xml I get this error about the lifecycle phase","body":"@Randommm I checked and the path is correct, but when I use that command I get an error saying  Unknown lifecycle phase &quot;.xml&quot;.  I know the path is correct because when I use mvn clean test -Dsmoke=src/test/smokeSuite (without .xml) I get the error that the suite file is not a valid file... but at least it&#39;s showing the path and it&#39;s correct. So it looks like every time I add .xml I get this error about the lifecycle phase"},{"owner":{"account_id":25125122,"reputation":468,"user_id":18973005,"display_name":"Randommm"},"score":1,"creation_date":1663578922,"post_id":73770022,"comment_id":130264688,"body_markdown":"Have you tried with quotes?","body":"Have you tried with quotes?"},{"owner":{"account_id":9894359,"reputation":507,"user_id":7326377,"accept_rate":100,"display_name":"Алекса Јевтић"},"score":0,"creation_date":1663596382,"post_id":73770022,"comment_id":130270733,"body_markdown":"@Randommm It works .. hahaha, I don&#39;t get why no one is using the quotes in all of the similar questions, and why it didn&#39;t occur to me to try it. Thank you a lot! Now I can create a proper Readme file finally. If you want you can post it as an answer as well","body":"@Randommm It works .. hahaha, I don&#39;t get why no one is using the quotes in all of the similar questions, and why it didn&#39;t occur to me to try it. Thank you a lot! Now I can create a proper Readme file finally. If you want you can post it as an answer as well"}],"answers":[{"tags":[],"owner":{"account_id":25125122,"reputation":468,"user_id":18973005,"display_name":"Randommm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663652922,"creation_date":1663652922,"answer_id":73782124,"question_id":73770022,"body_markdown":"Since you set it up as `&lt;suiteXmlFile&gt;${smoke}&lt;/suiteXmlFile&gt;` you need to pass the variable with `-Dsmoke` and to make sure the value is parsed correctly you should wrap it in quotes to prevent it from being wrongly interpreted. So the full command should be\r\n\r\n```\r\nmvn clean test -Dsmoke=&quot;src/test/smokeSuite.xml&quot;\r\n``` ","title":"Passing xmlFile path as a parameter with maven cmd to surefire plugin on -mvn test","body":"<p>Since you set it up as <code>&lt;suiteXmlFile&gt;${smoke}&lt;/suiteXmlFile&gt;</code> you need to pass the variable with <code>-Dsmoke</code> and to make sure the value is parsed correctly you should wrap it in quotes to prevent it from being wrongly interpreted. So the full command should be</p>\n<pre><code>mvn clean test -Dsmoke=&quot;src/test/smokeSuite.xml&quot;\n</code></pre>\n"}],"owner":{"account_id":9894359,"reputation":507,"user_id":7326377,"accept_rate":100,"display_name":"Алекса Јевтић"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":427,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73782124,"answer_count":1,"score":0,"last_activity_date":1663652922,"creation_date":1663573443,"question_id":73770022,"body_markdown":"I&#39;m trying to pass the xml file path through command line on maven project, and nothing seems to work. I almost always get *&quot;Unknown lifecycle phase &quot;.xml&quot;.* error for every solution I found so far online.\r\n\r\nThis is how my plugin looks like:\r\n       \r\n\r\n     &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-M7&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;suiteXmlFiles&gt;\r\n                        &lt;suiteXmlFile&gt;${smoke}&lt;/suiteXmlFile&gt;\r\n                    &lt;/suiteXmlFiles&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\nFirst of all, I wasn&#39;t able to save it if I didn&#39;t set it as a property of pom.xml, so I did it and hardcoded the path to my xml and it works. However, I can&#39;t seem to find a way to change that value while running mvn clean test ...\r\n\r\nI tried things like these:\r\n\r\n    mvn clean test -Dsurefire.suiteXmlFile=smokeSuite.xml`\r\n    mvn clean test -Dsurefire.suiteXmlFile=src/test/smokeSuite.xml\r\n    mvn clean test -DsuiteXmlFile=smokeSuite.xml\r\n    mvn clean test -Dsurefire.smoke=smokeSuite.xml`\r\n    mvn clean test -Dsurefire.smoke=src/test/smokeSuite.xml\r\n    mvn clean test -Dsmoke=smokeSuite.xml\r\n\r\nAlmost always I get the error that .xml is an unknown lyfecycle phase, or when I add a space after suiteXmlFile, like this, \r\n\r\n    mvn clean test -Dsurefire.suiteXmlFile =src/test/smokeSuite.xml\r\n\r\nI get that = is not a lyfecycle phase...\r\n\r\nThere&#39;s obviously something wrong with the command in the first place, but I cannot seem to find any documentation on how should the suiteXmlFile be passed down with mvn test ...\r\n\r\n","title":"Passing xmlFile path as a parameter with maven cmd to surefire plugin on -mvn test","body":"<p>I'm trying to pass the xml file path through command line on maven project, and nothing seems to work. I almost always get <em>&quot;Unknown lifecycle phase &quot;.xml&quot;.</em> error for every solution I found so far online.</p>\n<p>This is how my plugin looks like:</p>\n<pre><code> &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-M7&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;suiteXmlFiles&gt;\n                    &lt;suiteXmlFile&gt;${smoke}&lt;/suiteXmlFile&gt;\n                &lt;/suiteXmlFiles&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>First of all, I wasn't able to save it if I didn't set it as a property of pom.xml, so I did it and hardcoded the path to my xml and it works. However, I can't seem to find a way to change that value while running mvn clean test ...</p>\n<p>I tried things like these:</p>\n<pre><code>mvn clean test -Dsurefire.suiteXmlFile=smokeSuite.xml`\nmvn clean test -Dsurefire.suiteXmlFile=src/test/smokeSuite.xml\nmvn clean test -DsuiteXmlFile=smokeSuite.xml\nmvn clean test -Dsurefire.smoke=smokeSuite.xml`\nmvn clean test -Dsurefire.smoke=src/test/smokeSuite.xml\nmvn clean test -Dsmoke=smokeSuite.xml\n</code></pre>\n<p>Almost always I get the error that .xml is an unknown lyfecycle phase, or when I add a space after suiteXmlFile, like this,</p>\n<pre><code>mvn clean test -Dsurefire.suiteXmlFile =src/test/smokeSuite.xml\n</code></pre>\n<p>I get that = is not a lyfecycle phase...</p>\n<p>There's obviously something wrong with the command in the first place, but I cannot seem to find any documentation on how should the suiteXmlFile be passed down with mvn test ...</p>\n"},{"tags":["java","scala"],"comments":[{"owner":{"account_id":5131293,"reputation":21831,"user_id":4111404,"accept_rate":80,"display_name":"Luis Miguel Mej&#237;a Su&#225;rez"},"score":1,"creation_date":1663609791,"post_id":73777406,"comment_id":130275529,"body_markdown":"Just copy the data using a `foreach`","body":"Just copy the data using a <code>foreach</code>"}],"answers":[{"tags":[],"owner":{"account_id":20119723,"reputation":443,"user_id":14754410,"display_name":"BccHnw"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1663652616,"creation_date":1663652616,"answer_id":73782089,"question_id":73777406,"body_markdown":"It is possible to copy a wrapped map with the `java.util.HashMap`&#39;s copy constructor.\r\n\r\n```\r\nimport scala.collection.JavaConverters.mapAsJavaMapConverter\r\n\r\ndef doSomethingCool(): util.Map[String, String] = {\r\n\r\n    // ... Cool processing here ...\r\n    // Return results as a Java Map\r\n    new java.util.HashMap[String, String](myScalaMap.asJava)\r\n}\r\n```","title":"Workaround for notserializable exception when converting Scala map to Java Map","body":"<p>It is possible to copy a wrapped map with the <code>java.util.HashMap</code>'s copy constructor.</p>\n<pre><code>import scala.collection.JavaConverters.mapAsJavaMapConverter\n\ndef doSomethingCool(): util.Map[String, String] = {\n\n    // ... Cool processing here ...\n    // Return results as a Java Map\n    new java.util.HashMap[String, String](myScalaMap.asJava)\n}\n</code></pre>\n"}],"owner":{"account_id":9030717,"reputation":706,"user_id":6728433,"display_name":"S.S."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73782089,"answer_count":1,"score":1,"last_activity_date":1663652616,"creation_date":1663609715,"question_id":73777406,"body_markdown":"As described in [this Github issue][1], Scala Maps that are wrapped as Java Maps are not serializable because `scala.collection.convert.Wrappers$MapWrapper` is not serializable.\r\n\r\nThis issue was fixed in Scala 2.12, but I have to use 2.11 for various reasons.\r\nSo what is a good workaround for converting a Scala Map to a Java Map without having this serialization error? I have no choice but to return a java map from this function.\r\n\r\nMy code looks like this: \r\n```\r\nimport scala.collection.JavaConverters.mapAsJavaMapConverter\r\n\r\ndef doSomethingCool(): util.Map[String, String] = {\r\n\r\n    // ... Cool processing here ...\r\n    // Return results as a Java Map\r\n    myScalaMap.asJava\r\n}\r\n\r\n```\r\n\r\nI feel like there should be a simple way to work around this issue, but I haven&#39;t been able to figure it out...\r\n\r\n\r\n  [1]: https://github.com/scala/bug/issues/8911","title":"Workaround for notserializable exception when converting Scala map to Java Map","body":"<p>As described in <a href=\"https://github.com/scala/bug/issues/8911\" rel=\"nofollow noreferrer\">this Github issue</a>, Scala Maps that are wrapped as Java Maps are not serializable because <code>scala.collection.convert.Wrappers$MapWrapper</code> is not serializable.</p>\n<p>This issue was fixed in Scala 2.12, but I have to use 2.11 for various reasons.\nSo what is a good workaround for converting a Scala Map to a Java Map without having this serialization error? I have no choice but to return a java map from this function.</p>\n<p>My code looks like this:</p>\n<pre><code>import scala.collection.JavaConverters.mapAsJavaMapConverter\n\ndef doSomethingCool(): util.Map[String, String] = {\n\n    // ... Cool processing here ...\n    // Return results as a Java Map\n    myScalaMap.asJava\n}\n\n</code></pre>\n<p>I feel like there should be a simple way to work around this issue, but I haven't been able to figure it out...</p>\n"},{"tags":["java","math","modulo","negative-number"],"comments":[{"owner":{"account_id":105081,"reputation":51982,"user_id":280598,"display_name":"Dan Grossman"},"score":1,"creation_date":1291931984,"post_id":4403542,"comment_id":4801423,"body_markdown":"Is this a math question, or a programming question? If it&#39;s a programming question, you should share code.","body":"Is this a math question, or a programming question? If it&#39;s a programming question, you should share code."},{"owner":{"account_id":189452,"reputation":107051,"user_id":428790,"accept_rate":84,"display_name":"Joris Meys"},"score":105,"creation_date":1291932266,"post_id":4403542,"comment_id":4801473,"body_markdown":"@Dan Even without a static main void ... I see code.","body":"@Dan Even without a static main void ... I see code."},{"owner":{"account_id":203002,"reputation":21637,"user_id":450398,"accept_rate":85,"display_name":"Grodriguez"},"score":23,"creation_date":1343895590,"post_id":4403542,"comment_id":15635679,"body_markdown":"I get -13 &amp; 64 == -13","body":"I get -13 &amp; 64 == -13"},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":7,"creation_date":1407145432,"post_id":4403542,"comment_id":39087564,"body_markdown":"*How* is it you are getting 51 ratehr than -13.","body":"<i>How</i> is it you are getting 51 ratehr than -13."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":4,"creation_date":1454806969,"post_id":4403542,"comment_id":58210748,"body_markdown":"You aren&#39;t doing modulus at all. There is no modulo operator in Java. `%` is a remainder operator.","body":"You aren&#39;t doing modulus at all. There is no modulo operator in Java. <code>%</code> is a remainder operator."},{"owner":{"account_id":5861327,"reputation":1178,"user_id":4616912,"display_name":"Ganesh Karewad"},"score":0,"creation_date":1474356477,"post_id":4403542,"comment_id":66485497,"body_markdown":"remainder is never negative, basic math concept. you will have to subastratct denom from output","body":"remainder is never negative, basic math concept. you will have to subastratct denom from output"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1476629852,"post_id":4403542,"comment_id":67416663,"body_markdown":"I don&#39;t know how you&#39;re getting a positive number. Given the expression `x % y`, A) if `x` is negative the remainder is negative, ie `x % y == -(-x % y)`. B) the sign of `y` has no effect ie `x % y == x % -y`","body":"I don&#39;t know how you&#39;re getting a positive number. Given the expression <code>x % y</code>, A) if <code>x</code> is negative the remainder is negative, ie <code>x % y == -(-x % y)</code>. B) the sign of <code>y</code> has no effect ie <code>x % y == x % -y</code>"},{"owner":{"account_id":43958,"reputation":8780,"user_id":128734,"accept_rate":67,"display_name":"Jan Żankowski"},"score":3,"creation_date":1490436820,"post_id":4403542,"comment_id":73118817,"body_markdown":"Confusing question: Java 8 gives -13, as some other people say. Which Java version did you supposedly get that with?","body":"Confusing question: Java 8 gives -13, as some other people say. Which Java version did you supposedly get that with?"},{"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":1,"creation_date":1497776963,"post_id":4403542,"comment_id":76213193,"body_markdown":"Related: [Best way to make Java&#39;s modulus behave like it should with negative numbers](https://stackoverflow.com/questions/4412179/best-way-to-make-javas-modulus-behave-like-it-should-with-negative-numbers)","body":"Related: <a href=\"https://stackoverflow.com/questions/4412179/best-way-to-make-javas-modulus-behave-like-it-should-with-negative-numbers\">Best way to make Java&#39;s modulus behave like it should with negative numbers</a>"},{"owner":{"account_id":465230,"reputation":22171,"user_id":869184,"accept_rate":40,"display_name":"Ilya"},"score":0,"creation_date":1624549830,"post_id":4403542,"comment_id":120395323,"body_markdown":"I&#39;ve checked the original question wording, where the author said &quot;I keep getting -13 % 64 = -13 not -13 % 64 = 51&quot; which is the opposite of what this question became after series of edits. So I&#39;ve restored the original meaning.","body":"I&#39;ve checked the original question wording, where the author said &quot;I keep getting -13 % 64 = -13 not -13 % 64 = 51&quot; which is the opposite of what this question became after series of edits. So I&#39;ve restored the original meaning."},{"owner":{"account_id":3032157,"reputation":40021,"user_id":4561887,"accept_rate":73,"display_name":"Gabriel Staples"},"score":0,"creation_date":1663649185,"post_id":4403542,"comment_id":130283273,"body_markdown":"Same thing, but for JavaScript: [JavaScript % (modulo) gives a negative result for negative numbers](https://stackoverflow.com/q/4467539/4561887)","body":"Same thing, but for JavaScript: <a href=\"https://stackoverflow.com/q/4467539/4561887\">JavaScript % (modulo) gives a negative result for negative numbers</a>"}],"answers":[{"tags":[],"owner":{"account_id":201896,"reputation":57765,"user_id":448625,"accept_rate":96,"display_name":"Caner"},"down_vote_count":1,"up_vote_count":79,"is_accepted":false,"score":78,"last_activity_date":1432024280,"creation_date":1291931933,"answer_id":4403556,"question_id":4403542,"body_markdown":"Since &quot;mathematically&quot; both are correct:    \r\n\r\n    -13 % 64 = -13 (on modulus 64)  \r\n    -13 % 64 = 51 (on modulus 64)\r\n\r\nOne of the options had to be chosen by Java language developers and they chose:\r\n&gt; the sign of the result equals the sign of the dividend.\r\n\r\nSays it in Java specs:\r\n\r\nhttps://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.3","title":"How does java do modulus calculations with negative numbers?","body":"<p>Since \"mathematically\" both are correct:    </p>\n\n<pre><code>-13 % 64 = -13 (on modulus 64)  \n-13 % 64 = 51 (on modulus 64)\n</code></pre>\n\n<p>One of the options had to be chosen by Java language developers and they chose:</p>\n\n<blockquote>\n  <p>the sign of the result equals the sign of the dividend.</p>\n</blockquote>\n\n<p>Says it in Java specs:</p>\n\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.3\">https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.3</a></p>\n"},{"tags":[],"owner":{"account_id":24377,"reputation":818003,"user_id":61974,"display_name":"Mark Byers"},"down_vote_count":3,"up_vote_count":115,"is_accepted":true,"score":112,"last_activity_date":1291936697,"creation_date":1291932002,"answer_id":4403570,"question_id":4403542,"body_markdown":"Both definitions of modulus of negative numbers are in use - some languages use one definition and some the other.\r\n\r\nIf you want to get a negative number for negative inputs then you can use this:\r\n\r\n    int r = x % n;\r\n    if (r &gt; 0 &amp;&amp; x &lt; 0)\r\n    {\r\n        r -= n;\r\n    }\r\n\r\nLikewise if you were using a language that returns a negative number on a negative input and you would prefer positive:\r\n\r\n    int r = x % n;\r\n    if (r &lt; 0)\r\n    {\r\n        r += n;\r\n    }\r\n","title":"How does java do modulus calculations with negative numbers?","body":"<p>Both definitions of modulus of negative numbers are in use - some languages use one definition and some the other.</p>\n\n<p>If you want to get a negative number for negative inputs then you can use this:</p>\n\n<pre><code>int r = x % n;\nif (r &gt; 0 &amp;&amp; x &lt; 0)\n{\n    r -= n;\n}\n</code></pre>\n\n<p>Likewise if you were using a language that returns a negative number on a negative input and you would prefer positive:</p>\n\n<pre><code>int r = x % n;\nif (r &lt; 0)\n{\n    r += n;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":67956,"reputation":57056,"user_id":198536,"accept_rate":100,"display_name":"wallyk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1338885043,"creation_date":1291932144,"answer_id":4403594,"question_id":4403542,"body_markdown":"Modulo arithmetic with negative operands is defined by the language designer, who might leave it to the language implementation, who might defer the definition to the CPU architecture.\r\n\r\n&lt;s&gt;I wasn&#39;t able to find a Java language definition.&lt;/s&gt;  \r\n Thanks Ishtar, Java Language Specification for the [Remainder Operator %][1] says that the sign of the result is the same as the sign of the numerator.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.17.3","title":"How does java do modulus calculations with negative numbers?","body":"<p>Modulo arithmetic with negative operands is defined by the language designer, who might leave it to the language implementation, who might defer the definition to the CPU architecture.</p>\n\n<p><s>I wasn't able to find a Java language definition.</s><br>\n Thanks Ishtar, Java Language Specification for the <a href=\"http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.17.3\" rel=\"nofollow\">Remainder Operator %</a> says that the sign of the result is the same as the sign of the numerator.</p>\n"},{"tags":[],"owner":{"display_name":"user415789"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1291932590,"creation_date":1291932158,"answer_id":4403597,"question_id":4403542,"body_markdown":"`x = x + m = x - m` in modulus `m`.   \r\nso `-13 = -13 + 64` in modulus `64`  and `-13 = 51` in modulus `64`.  \r\nassume `Z = X * d + r`, if ` 0 &lt; r &lt; X` then in division `Z/X` we call `r` the remainder.  \r\n`Z % X` returns the remainder of `Z/X`. ","title":"How does java do modulus calculations with negative numbers?","body":"<p><code>x = x + m = x - m</code> in modulus <code>m</code>.<br>\nso <code>-13 = -13 + 64</code> in modulus <code>64</code>  and <code>-13 = 51</code> in modulus <code>64</code>.<br>\nassume <code>Z = X * d + r</code>, if <code>0 &lt; r &lt; X</code> then in division <code>Z/X</code> we call <code>r</code> the remainder.<br>\n<code>Z % X</code> returns the remainder of <code>Z/X</code>. </p>\n"},{"tags":[],"owner":{"account_id":169500,"reputation":14774,"user_id":395626,"display_name":"ruslik"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1388156079,"creation_date":1291932336,"answer_id":4403631,"question_id":4403542,"body_markdown":"you can use \r\n\r\n    (x % n) - (x &lt; 0 ? n : 0);","title":"How does java do modulus calculations with negative numbers?","body":"<p>you can use </p>\n\n<pre><code>(x % n) - (x &lt; 0 ? n : 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":48841,"reputation":4523,"user_id":145261,"accept_rate":83,"display_name":"Nava Carmon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1291932362,"creation_date":1291932362,"answer_id":4403633,"question_id":4403542,"body_markdown":"Your answer is in wikipedia:\r\n[modulo operation][1]\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Modulo_operation\r\n\r\nIt says, that in Java the sign on modulo operation is the same as that of dividend. and since we&#39;re talking about the rest of the division operation is just fine, that it returns -13 in your case, since -13/64 = 0. -13-0 = -13. \r\n\r\nEDIT: Sorry, misunderstood your question...You&#39;re right, java should give -13. Can you provide more surrounding code?","title":"How does java do modulus calculations with negative numbers?","body":"<p>Your answer is in wikipedia:\n<a href=\"http://en.wikipedia.org/wiki/Modulo_operation\" rel=\"nofollow\">modulo operation</a></p>\n\n<p>It says, that in Java the sign on modulo operation is the same as that of dividend. and since we're talking about the rest of the division operation is just fine, that it returns -13 in your case, since -13/64 = 0. -13-0 = -13. </p>\n\n<p>EDIT: Sorry, misunderstood your question...You're right, java should give -13. Can you provide more surrounding code?</p>\n"},{"tags":[],"owner":{"account_id":154897,"reputation":3959,"user_id":371169,"display_name":"Andreas"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1291932439,"creation_date":1291932439,"answer_id":4403642,"question_id":4403542,"body_markdown":"To overcome this, you could add `64` (or whatever your modulus base is) to the negative value until it is positive\r\n\r\n    int k = -13;\r\n    int modbase = 64;\r\n        \r\n    while (k &lt; 0) {\r\n        k += modbase;\r\n    }\r\n\r\n    int result = k % modbase;\r\n\r\nThe result will still be in the same equivalence class.","title":"How does java do modulus calculations with negative numbers?","body":"<p>To overcome this, you could add <code>64</code> (or whatever your modulus base is) to the negative value until it is positive</p>\n\n<pre><code>int k = -13;\nint modbase = 64;\n\nwhile (k &lt; 0) {\n    k += modbase;\n}\n\nint result = k % modbase;\n</code></pre>\n\n<p>The result will still be in the same equivalence class.</p>\n"},{"tags":[],"owner":{"account_id":91304,"reputation":1697,"user_id":250789,"accept_rate":67,"display_name":"Salman Paracha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1291932596,"creation_date":1291932596,"answer_id":4403657,"question_id":4403542,"body_markdown":"The mod function is defined as the amount by which a number exceeds the largest integer multiple of the divisor that is not greater than that number. So in your case of \r\n\r\n    -13 % 64\r\n\r\nthe largest integer multiple of 64 that does not exceed -13 is -64. Now, when you subtract -13 from -64 it equals 51 `-13 - (-64) = -13 + 64 = 51`\r\n","title":"How does java do modulus calculations with negative numbers?","body":"<p>The mod function is defined as the amount by which a number exceeds the largest integer multiple of the divisor that is not greater than that number. So in your case of </p>\n\n<pre><code>-13 % 64\n</code></pre>\n\n<p>the largest integer multiple of 64 that does not exceed -13 is -64. Now, when you subtract -13 from -64 it equals 51 <code>-13 - (-64) = -13 + 64 = 51</code></p>\n"},{"tags":[],"owner":{"account_id":20562,"reputation":55673,"user_id":49246,"accept_rate":73,"display_name":"starblue"},"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1650893413,"creation_date":1292013277,"answer_id":4413073,"question_id":4403542,"body_markdown":"**Note that this answer was for a previous, different version of the question.**\r\n\r\nYour result is wrong for Java.\r\nPlease provide some context how you arrived at it (your program, implementation and version of Java).\r\n\r\nFrom the &lt;a href=&quot;https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.17.3&quot;&gt;Java Language Specification&lt;/a&gt;\r\n\r\n&lt;blockquote&gt;\r\n15.17.3 Remainder Operator %\r\n&lt;br/&gt;\r\n[...]\r\n&lt;br/&gt;\r\nThe remainder operation for operands that are integers after binary numeric promotion (&#167;5.6.2) produces a result value such that (a/b)*b+(a%b) is equal to a.\r\n&lt;/blockquote&gt;\r\n\r\n&lt;blockquote&gt;\r\n15.17.2 Division Operator /&lt;br/&gt;\r\n[...]&lt;br/&gt;\r\nInteger division rounds toward 0.\r\n&lt;/blockquote&gt;\r\n\r\nSince / is rounded towards zero (resulting in zero), the result of % should be negative in this case.","title":"How does java do modulus calculations with negative numbers?","body":"<p><strong>Note that this answer was for a previous, different version of the question.</strong></p>\n<p>Your result is wrong for Java.\nPlease provide some context how you arrived at it (your program, implementation and version of Java).</p>\n<p>From the <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.17.3\" rel=\"nofollow noreferrer\">Java Language Specification</a></p>\n<blockquote>\n15.17.3 Remainder Operator %\n<br/>\n[...]\n<br/>\nThe remainder operation for operands that are integers after binary numeric promotion (§5.6.2) produces a result value such that (a/b)*b+(a%b) is equal to a.\n</blockquote>\n<blockquote>\n15.17.2 Division Operator /<br/>\n[...]<br/>\nInteger division rounds toward 0.\n</blockquote>\n<p>Since / is rounded towards zero (resulting in zero), the result of % should be negative in this case.</p>\n"},{"tags":[],"owner":{"account_id":275688,"reputation":211,"user_id":568700,"display_name":"Keyxeq"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1294569881,"creation_date":1294569881,"answer_id":4638733,"question_id":4403542,"body_markdown":"Are you sure you are working in Java? &#39;cause Java gives -13 % 64 = -13 as expected. The sign of dividend!","title":"How does java do modulus calculations with negative numbers?","body":"<p>Are you sure you are working in Java? 'cause Java gives -13 % 64 = -13 as expected. The sign of dividend!</p>\n"},{"tags":[],"owner":{"account_id":1620719,"reputation":11,"user_id":1497350,"display_name":"ceprateek"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1403537922,"creation_date":1403536532,"answer_id":24369473,"question_id":4403542,"body_markdown":"I don&#39;t think Java returns 51 in this case. I am running Java 8 on a Mac and I get:\r\n\r\n    -13 % 64 = -13\r\n\r\nProgram:\r\n \r\n\r\n    public class Test {\r\n    \tpublic static void main(String[] args) {\r\n            int i = -13;\r\n    \t    int j = 64;\r\n    \t    System.out.println(i % j);\r\n    \t}\r\n    }\r\n\r\n","title":"How does java do modulus calculations with negative numbers?","body":"<p>I don't think Java returns 51 in this case. I am running Java 8 on a Mac and I get:</p>\n\n<pre><code>-13 % 64 = -13\n</code></pre>\n\n<p>Program:</p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        int i = -13;\n        int j = 64;\n        System.out.println(i % j);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5924749,"reputation":1,"user_id":4660996,"display_name":"Robert Green"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426125614,"creation_date":1426125614,"answer_id":29000690,"question_id":4403542,"body_markdown":"In my version of Java  JDK 1.8.0_05  -13%64=-13\r\n\r\nyou could try  -13-(int(-13/64))\r\nin other words  do division cast to an integer to get rid of the fraction part\r\nthen subtract from numerator\r\nSo numerator-(int(numerator/denominator))   should give the correct remainder &amp; sign","title":"How does java do modulus calculations with negative numbers?","body":"<p>In my version of Java  JDK 1.8.0_05  -13%64=-13</p>\n\n<p>you could try  -13-(int(-13/64))\nin other words  do division cast to an integer to get rid of the fraction part\nthen subtract from numerator\nSo numerator-(int(numerator/denominator))   should give the correct remainder &amp; sign</p>\n"},{"tags":[],"owner":{"account_id":7002735,"reputation":31,"user_id":5368232,"display_name":"vsn harish rayasam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443022869,"creation_date":1443019242,"answer_id":32742616,"question_id":4403542,"body_markdown":"In Java latest versions you get `-13%64 = -13`. The answer will always have sign of numerator.","title":"How does java do modulus calculations with negative numbers?","body":"<p>In Java latest versions you get <code>-13%64 = -13</code>. The answer will always have sign of numerator.</p>\n"},{"tags":[],"owner":{"account_id":7809970,"reputation":349,"user_id":5906477,"accept_rate":33,"display_name":"samridh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460642982,"creation_date":1460642982,"answer_id":36625711,"question_id":4403542,"body_markdown":"According to section 15.17.3 of the JLS, &quot;The remainder operation for operands that are integers after binary numeric promotion produces a result value such that (a/b)*b+(a%b) is equal to a.\r\nThis identity holds even in the special case that the dividend is the negative integer of largest possible magnitude for its type and the divisor is -1 (the remainder is 0).&quot;\r\n\r\nHope that helps.\r\n","title":"How does java do modulus calculations with negative numbers?","body":"<p>According to section 15.17.3 of the JLS, \"The remainder operation for operands that are integers after binary numeric promotion produces a result value such that (a/b)*b+(a%b) is equal to a.\nThis identity holds even in the special case that the dividend is the negative integer of largest possible magnitude for its type and the divisor is -1 (the remainder is 0).\"</p>\n\n<p>Hope that helps.</p>\n"},{"tags":[],"owner":{"account_id":3032157,"reputation":40021,"user_id":4561887,"accept_rate":73,"display_name":"Gabriel Staples"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663652556,"creation_date":1663651863,"answer_id":73782011,"question_id":4403542,"body_markdown":"## How to get only positive modulus numbers in C or C++ (since the `%` operator allows negative numbers)\r\n\r\nJava and C and C++ all appear to act similarly in this manner. Without opening a new question, I&#39;d like to present the approach for C and C++ as well. \r\n\r\nFrom [modulus_of_positive_and_negative_integers.c](https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world/blob/master/c/modulus_of_positive_and_negative_integers.c) in my [eRCaGuy_hello_world](https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world) repo:\r\n\r\n```c\r\n/// A function to perform and return the mathematical modulus as returned by\r\n/// programming calculators and Google. In other words, it will **always**\r\n/// return a positive value, unlike the `%` remainder operator in C!\r\n/// Example:\r\n/// So, `-5 % 180` in C or C++ is `-5`, but `mathematical_modulo(-5, 180)`\r\n/// is the same as &quot;-5 mod 180&quot; in a calculator or on Google, and is `175`.\r\nint mathematical_modulo(int num1, int num2)\r\n{\r\n    int mod = num1 % num2;\r\n    if (mod &lt; 0)\r\n    {\r\n        mod += num2;\r\n    }\r\n\r\n    return mod;\r\n}\r\n```\r\n\r\n### Sample tests of the code above: \r\n\r\nNotice that `-10 % 180` produces `-10` in C and C++ since the `%` operator acts like a simple remainder, not a roll-over modulo, whereas `mathematical_modulo(-10, 180)` produces `170`, since the underflow wraps back around to the max value of 180 in this case, and then down 10 steps again.\r\n\r\n```c\r\nprintf(&quot;-10 %% 180 = %4i\\n&quot;, -10 % 180);\r\nprintf(&quot;  0 %% 180 = %4i\\n&quot;,   0 % 180);\r\nprintf(&quot; 10 %% 180 = %4i\\n&quot;,  10 % 180);\r\nprintf(&quot;\\n&quot;);\r\n\r\nprintf(&quot;mathematical_modulo(-10, 180) = %4i\\n&quot;,\r\n        mathematical_modulo(-10, 180));\r\nprintf(&quot;mathematical_modulo(  0, 180) = %4i\\n&quot;,\r\n        mathematical_modulo(  0, 180));\r\nprintf(&quot;mathematical_modulo( 10, 180) = %4i\\n&quot;,\r\n        mathematical_modulo( 10, 180));\r\nprintf(&quot;\\n&quot;);\r\n```\r\n\r\nSample output: \r\n\r\n```\r\n-10 % 180 =  -10\r\n  0 % 180 =    0\r\n 10 % 180 =   10\r\n\r\nmathematical_modulo(-10, 180) =  170\r\nmathematical_modulo(  0, 180) =    0\r\nmathematical_modulo( 10, 180) =   10\r\n```\r\n\r\n### Calculator tool on Linux\r\n\r\nIn C or C++, `-10 % 180` is `-10`. But, on my Linux calculator, `-10 mod 180` is `170`:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n### Google calculator in browser\r\n\r\nOn Google, [`-10 % 180`](https://www.google.com/search?q=-10+%25+180&amp;oq=-10+%25+180&amp;aqs=chrome..69i57.1366j0j7&amp;sourceid=chrome&amp;ie=UTF-8), _or_ [`-10 mod 180`](https://www.google.com/search?q=-10+mod+180&amp;sxsrf=ALiCzsbGMTLP7UIf0g7GTFZwbf-RrnNWvA%3A1663652436218&amp;ei=VFIpY9aFDevekPIPyrm3uAo&amp;ved=0ahUKEwjW__Wj1KL6AhVrL0QIHcrcDacQ4dUDCA8&amp;uact=5&amp;oq=-10+mod+180&amp;gs_lcp=Cgdnd3Mtd2l6EANKBAhBGAFKBAhGGABQyAZYkwpg0gtoAXAAeACAAW-IAZQDkgEDMy4xmAEAoAEBwAEB&amp;sclient=gws-wiz) (same thing on Google) are both `170` as well:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n## References\r\n\r\n1. My own experimentation, learning, and self-study via my code linked-to above.\r\n1. [JavaScript `%` (modulo) gives a negative result for negative numbers](   https://stackoverflow.com/q/4467539/4561887)\r\n1. This answer: [How does java do modulus calculations with negative numbers?](https://stackoverflow.com/a/4403570/4561887)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VgjIu.png\r\n  [2]: https://i.stack.imgur.com/UJhku.png","title":"How does java do modulus calculations with negative numbers?","body":"<h2>How to get only positive modulus numbers in C or C++ (since the <code>%</code> operator allows negative numbers)</h2>\n<p>Java and C and C++ all appear to act similarly in this manner. Without opening a new question, I'd like to present the approach for C and C++ as well.</p>\n<p>From <a href=\"https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world/blob/master/c/modulus_of_positive_and_negative_integers.c\" rel=\"nofollow noreferrer\">modulus_of_positive_and_negative_integers.c</a> in my <a href=\"https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world\" rel=\"nofollow noreferrer\">eRCaGuy_hello_world</a> repo:</p>\n<pre class=\"lang-c prettyprint-override\"><code>/// A function to perform and return the mathematical modulus as returned by\n/// programming calculators and Google. In other words, it will **always**\n/// return a positive value, unlike the `%` remainder operator in C!\n/// Example:\n/// So, `-5 % 180` in C or C++ is `-5`, but `mathematical_modulo(-5, 180)`\n/// is the same as &quot;-5 mod 180&quot; in a calculator or on Google, and is `175`.\nint mathematical_modulo(int num1, int num2)\n{\n    int mod = num1 % num2;\n    if (mod &lt; 0)\n    {\n        mod += num2;\n    }\n\n    return mod;\n}\n</code></pre>\n<h3>Sample tests of the code above:</h3>\n<p>Notice that <code>-10 % 180</code> produces <code>-10</code> in C and C++ since the <code>%</code> operator acts like a simple remainder, not a roll-over modulo, whereas <code>mathematical_modulo(-10, 180)</code> produces <code>170</code>, since the underflow wraps back around to the max value of 180 in this case, and then down 10 steps again.</p>\n<pre class=\"lang-c prettyprint-override\"><code>printf(&quot;-10 %% 180 = %4i\\n&quot;, -10 % 180);\nprintf(&quot;  0 %% 180 = %4i\\n&quot;,   0 % 180);\nprintf(&quot; 10 %% 180 = %4i\\n&quot;,  10 % 180);\nprintf(&quot;\\n&quot;);\n\nprintf(&quot;mathematical_modulo(-10, 180) = %4i\\n&quot;,\n        mathematical_modulo(-10, 180));\nprintf(&quot;mathematical_modulo(  0, 180) = %4i\\n&quot;,\n        mathematical_modulo(  0, 180));\nprintf(&quot;mathematical_modulo( 10, 180) = %4i\\n&quot;,\n        mathematical_modulo( 10, 180));\nprintf(&quot;\\n&quot;);\n</code></pre>\n<p>Sample output:</p>\n<pre><code>-10 % 180 =  -10\n  0 % 180 =    0\n 10 % 180 =   10\n\nmathematical_modulo(-10, 180) =  170\nmathematical_modulo(  0, 180) =    0\nmathematical_modulo( 10, 180) =   10\n</code></pre>\n<h3>Calculator tool on Linux</h3>\n<p>In C or C++, <code>-10 % 180</code> is <code>-10</code>. But, on my Linux calculator, <code>-10 mod 180</code> is <code>170</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/VgjIu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VgjIu.png\" alt=\"enter image description here\" /></a></p>\n<h3>Google calculator in browser</h3>\n<p>On Google, <a href=\"https://www.google.com/search?q=-10+%25+180&amp;oq=-10+%25+180&amp;aqs=chrome..69i57.1366j0j7&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\"><code>-10 % 180</code></a>, <em>or</em> <a href=\"https://www.google.com/search?q=-10+mod+180&amp;sxsrf=ALiCzsbGMTLP7UIf0g7GTFZwbf-RrnNWvA%3A1663652436218&amp;ei=VFIpY9aFDevekPIPyrm3uAo&amp;ved=0ahUKEwjW__Wj1KL6AhVrL0QIHcrcDacQ4dUDCA8&amp;uact=5&amp;oq=-10+mod+180&amp;gs_lcp=Cgdnd3Mtd2l6EANKBAhBGAFKBAhGGABQyAZYkwpg0gtoAXAAeACAAW-IAZQDkgEDMy4xmAEAoAEBwAEB&amp;sclient=gws-wiz\" rel=\"nofollow noreferrer\"><code>-10 mod 180</code></a> (same thing on Google) are both <code>170</code> as well:</p>\n<p><a href=\"https://i.stack.imgur.com/UJhku.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UJhku.png\" alt=\"enter image description here\" /></a></p>\n<h2>References</h2>\n<ol>\n<li>My own experimentation, learning, and self-study via my code linked-to above.</li>\n<li><a href=\"https://stackoverflow.com/q/4467539/4561887\">JavaScript <code>%</code> (modulo) gives a negative result for negative numbers</a></li>\n<li>This answer: <a href=\"https://stackoverflow.com/a/4403570/4561887\">How does java do modulus calculations with negative numbers?</a></li>\n</ol>\n"}],"owner":{"account_id":151576,"reputation":2043,"user_id":1146504,"accept_rate":96,"display_name":"Jakir00"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133157,"favorite_count":0,"down_vote_count":9,"up_vote_count":115,"accepted_answer_id":4403570,"answer_count":15,"score":106,"last_activity_date":1663652556,"creation_date":1291931848,"question_id":4403542,"body_markdown":"Am I doing modulus wrong? Because in Java `-13 % 64` evaluates to `-13` but I want to get `51`.\r\n","title":"How does java do modulus calculations with negative numbers?","body":"<p>Am I doing modulus wrong? Because in Java <code>-13 % 64</code> evaluates to <code>-13</code> but I want to get <code>51</code>.</p>\n"},{"tags":["java","pdf","jsoup","flying-saucer"],"comments":[{"owner":{"account_id":400683,"reputation":7350,"user_id":766786,"accept_rate":68,"display_name":"Amedee Van Gasse"},"score":0,"creation_date":1517472008,"post_id":48556696,"comment_id":84111455,"body_markdown":"Your question seems to be about Flying Saucer, not about iText.","body":"Your question seems to be about Flying Saucer, not about iText."},{"owner":{"account_id":10560034,"reputation":396,"user_id":7780086,"accept_rate":83,"display_name":"Mohanraj"},"score":0,"creation_date":1517476118,"post_id":48556696,"comment_id":84113515,"body_markdown":"sorry for that.","body":"sorry for that."},{"owner":{"account_id":1008655,"reputation":8966,"user_id":1021720,"accept_rate":60,"display_name":"obourgain"},"score":0,"creation_date":1517507733,"post_id":48556696,"comment_id":84134072,"body_markdown":"Can you show the HTML used to generated the PDF, and explain what you mean by &quot;not aligned properly&quot; ?","body":"Can you show the HTML used to generated the PDF, and explain what you mean by &quot;not aligned properly&quot; ?"},{"owner":{"account_id":10560034,"reputation":396,"user_id":7780086,"accept_rate":83,"display_name":"Mohanraj"},"score":1,"creation_date":1517547210,"post_id":48556696,"comment_id":84148318,"body_markdown":"I am having sample pdf consist 3 pages.I converted it into `html` and I am generating pdf using that html file. Issue is generated pdf contains 4 pages.I am having 2 tables in html which are not aligned properly in pdf, like row of the table separately printed in different pages.I used`@page {\n                margin-left: 1cm;\n                margin-right: 1cm;\n                }\n                tr{\n                page-break-inside:avoid;\n                }`  in my html but it cheats me","body":"I am having sample pdf consist 3 pages.I converted it into <code>html</code> and I am generating pdf using that html file. Issue is generated pdf contains 4 pages.I am having 2 tables in html which are not aligned properly in pdf, like row of the table separately printed in different pages.I used<code>@page {                 margin-left: 1cm;                 margin-right: 1cm;                 }                 tr{                 page-break-inside:avoid;                 }</code>  in my html but it cheats me"}],"answers":[{"tags":[],"owner":{"account_id":26337110,"reputation":11,"user_id":19996793,"display_name":"Dhara Basida"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663651588,"creation_date":1663173871,"answer_id":73720473,"question_id":48556696,"body_markdown":"Margin can be set in html in head tag using style tag. Sample for adding 1px margin is shown. In my case for flying saucer library it worked well with this.\r\n```html\r\n&lt;head&gt;&lt;style&gt;@page {size: Wpx 1px;margin:0px;}&lt;style/&gt;&lt;head/&gt;\r\n```","title":"Unable to set Page margin in flying-saucer","body":"<p>Margin can be set in html in head tag using style tag. Sample for adding 1px margin is shown. In my case for flying saucer library it worked well with this.</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;head&gt;&lt;style&gt;@page {size: Wpx 1px;margin:0px;}&lt;style/&gt;&lt;head/&gt;\n</code></pre>\n"}],"owner":{"account_id":10560034,"reputation":396,"user_id":7780086,"accept_rate":83,"display_name":"Mohanraj"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1086,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663651588,"creation_date":1517466964,"question_id":48556696,"body_markdown":"I am generating pdf from html. I am using dynamic html generator(`Apache-velocity`) and using `jsoup` for html parsing. I generate pdf successfully, issue is `html` content not aligned properly in `pdf` after generation. I already visited this [question](https://stackoverflow.com/questions/15280995/itextrenderer-adjust-page-height-to-content) unluckily its unanswered.","title":"Unable to set Page margin in flying-saucer","body":"<p>I am generating pdf from html. I am using dynamic html generator(<code>Apache-velocity</code>) and using <code>jsoup</code> for html parsing. I generate pdf successfully, issue is <code>html</code> content not aligned properly in <code>pdf</code> after generation. I already visited this <a href=\"https://stackoverflow.com/questions/15280995/itextrenderer-adjust-page-height-to-content\">question</a> unluckily its unanswered.</p>\n"},{"tags":["java","math"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1313942589,"creation_date":1313942589,"answer_id":7139388,"question_id":7139382,"body_markdown":"157/32 is `int/int`, which results in an `int`.\r\n\r\nTry using the double literal - `157/32d`, which is `int/double`, which results in a `double`.","title":"Java rounding up to an int using Math.ceil","body":"<p>157/32 is <code>int/int</code>, which results in an <code>int</code>.</p>\n\n<p>Try using the double literal - <code>157/32d</code>, which is <code>int/double</code>, which results in a <code>double</code>.</p>\n"},{"tags":[],"owner":{"account_id":378721,"reputation":47508,"user_id":731620,"accept_rate":80,"display_name":"ratchet freak"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1313942966,"creation_date":1313942966,"answer_id":7139416,"question_id":7139382,"body_markdown":"`157/32` is an integer division because all numerical literals are integers unless otherwise specified with a suffix (`d` for double `l` for long)\r\n\r\nthe division is rounded down (to 4) before it is converted to a double (4.0) which is then rounded up (to 4.0)\r\n\r\nif you use a variables you can avoid that\r\n\r\n    double a1=157;\r\n    double a2=32;\r\n    int total = (int) Math.ceil(a1/a2);\r\n\r\n","title":"Java rounding up to an int using Math.ceil","body":"<p><code>157/32</code> is an integer division because all numerical literals are integers unless otherwise specified with a suffix (<code>d</code> for double <code>l</code> for long)</p>\n\n<p>the division is rounded down (to 4) before it is converted to a double (4.0) which is then rounded up (to 4.0)</p>\n\n<p>if you use a variables you can avoid that</p>\n\n<pre><code>double a1=157;\ndouble a2=32;\nint total = (int) Math.ceil(a1/a2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":775329,"reputation":661,"user_id":815348,"accept_rate":80,"display_name":"Phoebus"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1363854606,"creation_date":1363854606,"answer_id":15542587,"question_id":7139382,"body_markdown":"    int total = (int) Math.ceil((double)157/32);","title":"Java rounding up to an int using Math.ceil","body":"<pre><code>int total = (int) Math.ceil((double)157/32);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3195747,"reputation":852,"user_id":2698960,"accept_rate":83,"display_name":"Vitaliy Borisok"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1377202441,"creation_date":1377202441,"answer_id":18389983,"question_id":7139382,"body_markdown":"Also to convert a number from integer to real number you can add a dot:\r\n\r\n    int total = (int) Math.ceil(157/32.);\r\n\r\nAnd the result of (157/32.) will be real too. ;)","title":"Java rounding up to an int using Math.ceil","body":"<p>Also to convert a number from integer to real number you can add a dot:</p>\n\n<pre><code>int total = (int) Math.ceil(157/32.);\n</code></pre>\n\n<p>And the result of (157/32.) will be real too. ;)</p>\n"},{"tags":[],"owner":{"account_id":966511,"reputation":8668,"user_id":989857,"accept_rate":0,"display_name":"stones333"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1392642790,"creation_date":1391105868,"answer_id":21464435,"question_id":7139382,"body_markdown":"    int total = (int) Math.ceil( (double)157/ (double) 32);","title":"Java rounding up to an int using Math.ceil","body":"<pre><code>int total = (int) Math.ceil( (double)157/ (double) 32);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3595837,"reputation":3572,"user_id":3000589,"accept_rate":100,"display_name":"martijnn2008"},"down_vote_count":0,"up_vote_count":238,"is_accepted":false,"score":238,"last_activity_date":1663651582,"creation_date":1392643201,"answer_id":21830188,"question_id":7139382,"body_markdown":"You are doing `157/32` which is dividing two integers with each other, which always result in a rounded down integer. Therefore the `(int) Math.ceil(...)` isn&#39;t doing anything. There are three possible solutions to achieve what you want. I **recommend** using either **option 1** or **option 2**. Please do **NOT** use **option 0**.\r\n\r\n## Option 0\r\n\r\nConvert `a` and `b` to a double, and you can use the division and `Math.ceil` as you wanted it to work. However I strongly discourage the use of this approach, because double division can be imprecise. To read more about imprecision of doubles see [this question](https://stackoverflow.com/questions/10444350/c-sharp-loss-of-precision-when-dividing-doubles).\r\n\r\n    int n = (int) Math.ceil((double) a / b));\r\n\r\n## Option 1\r\n\r\n    int n = a / b + ((a % b == 0) ? 0 : 1); \r\n\r\nYou do `a / b` with always floor if `a` and `b` are both integers. Then you have an inline if-statement which checks whether or not you should ceil instead of floor. So +1 or +0, if there is a remainder with the division you need +1. `a % b == 0` checks for the remainder. \r\n\r\n## Option 2\r\n\r\nThis option is very short, but maybe for some less intuitive. I think this less intuitive approach would be faster than the double division and comparison approach:\\\r\nPlease note that this doesn&#39;t work for `b &lt; 0`.\r\n\r\n    int n = (a + b - 1) / b;\r\n\r\nTo reduce the chance of overflow you could use the following. However please note that it doesn&#39;t work for `a = 0` and `b &lt; 1`.\r\n\r\n    int n = (a - 1) / b + 1;\r\n\r\n## Explanation behind the &quot;less intuitive approach&quot;\r\n\r\nSince dividing two integers in Java (and most other programming languages) will always floor the result. So:\r\n\r\n    int a, b;\r\n    int result = a/b (is the same as floor(a/b) )\r\n\r\nBut we don&#39;t want `floor(a/b)`, but `ceil(a/b)`, and using the definitions and plots from [Wikipedia][1]: ![enter image description here][2]\r\n\r\nWith these plots of the floor and ceil functions, you can see the relationship. \r\n\r\n![Floor function][3] ![Ceil function][4]\r\n\r\nYou can see that `floor(x) &lt;= ceil(x)`. We need `floor(x + s) = ceil(x)`. So we need to find `s`. If we take `1/2 &lt;= s &lt; 1` it will be just right (try some numbers and you will see it does, I find it hard myself to prove this). And `1/2 &lt;= (b-1) / b &lt; 1`, so\r\n\r\n    ceil(a/b) = floor(a/b + s)\r\n              = floor(a/b + (b-1)/b)\r\n              = floor( (a+b-1)/b) )\r\n\r\nThis is not a real proof, but I hope you&#39;re satisfied with it. If someone can explain it better I would appreciate it too. Maybe ask it on [MathOverflow][5].\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Floor_and_ceiling_functions\r\n  [2]: http://i.stack.imgur.com/AMB1H.png\r\n  [3]: http://i.stack.imgur.com/ry8ss.png\r\n  [4]: http://i.stack.imgur.com/ZQyDC.png\r\n  [5]: https://mathoverflow.net/","title":"Java rounding up to an int using Math.ceil","body":"<p>You are doing <code>157/32</code> which is dividing two integers with each other, which always result in a rounded down integer. Therefore the <code>(int) Math.ceil(...)</code> isn't doing anything. There are three possible solutions to achieve what you want. I <strong>recommend</strong> using either <strong>option 1</strong> or <strong>option 2</strong>. Please do <strong>NOT</strong> use <strong>option 0</strong>.</p>\n<h2>Option 0</h2>\n<p>Convert <code>a</code> and <code>b</code> to a double, and you can use the division and <code>Math.ceil</code> as you wanted it to work. However I strongly discourage the use of this approach, because double division can be imprecise. To read more about imprecision of doubles see <a href=\"https://stackoverflow.com/questions/10444350/c-sharp-loss-of-precision-when-dividing-doubles\">this question</a>.</p>\n<pre><code>int n = (int) Math.ceil((double) a / b));\n</code></pre>\n<h2>Option 1</h2>\n<pre><code>int n = a / b + ((a % b == 0) ? 0 : 1); \n</code></pre>\n<p>You do <code>a / b</code> with always floor if <code>a</code> and <code>b</code> are both integers. Then you have an inline if-statement which checks whether or not you should ceil instead of floor. So +1 or +0, if there is a remainder with the division you need +1. <code>a % b == 0</code> checks for the remainder.</p>\n<h2>Option 2</h2>\n<p>This option is very short, but maybe for some less intuitive. I think this less intuitive approach would be faster than the double division and comparison approach:<br />\nPlease note that this doesn't work for <code>b &lt; 0</code>.</p>\n<pre><code>int n = (a + b - 1) / b;\n</code></pre>\n<p>To reduce the chance of overflow you could use the following. However please note that it doesn't work for <code>a = 0</code> and <code>b &lt; 1</code>.</p>\n<pre><code>int n = (a - 1) / b + 1;\n</code></pre>\n<h2>Explanation behind the &quot;less intuitive approach&quot;</h2>\n<p>Since dividing two integers in Java (and most other programming languages) will always floor the result. So:</p>\n<pre><code>int a, b;\nint result = a/b (is the same as floor(a/b) )\n</code></pre>\n<p>But we don't want <code>floor(a/b)</code>, but <code>ceil(a/b)</code>, and using the definitions and plots from <a href=\"http://en.wikipedia.org/wiki/Floor_and_ceiling_functions\" rel=\"noreferrer\">Wikipedia</a>: <img src=\"https://i.stack.imgur.com/AMB1H.png\" alt=\"enter image description here\" /></p>\n<p>With these plots of the floor and ceil functions, you can see the relationship.</p>\n<p><img src=\"https://i.stack.imgur.com/ry8ss.png\" alt=\"Floor function\" /> <img src=\"https://i.stack.imgur.com/ZQyDC.png\" alt=\"Ceil function\" /></p>\n<p>You can see that <code>floor(x) &lt;= ceil(x)</code>. We need <code>floor(x + s) = ceil(x)</code>. So we need to find <code>s</code>. If we take <code>1/2 &lt;= s &lt; 1</code> it will be just right (try some numbers and you will see it does, I find it hard myself to prove this). And <code>1/2 &lt;= (b-1) / b &lt; 1</code>, so</p>\n<pre><code>ceil(a/b) = floor(a/b + s)\n          = floor(a/b + (b-1)/b)\n          = floor( (a+b-1)/b) )\n</code></pre>\n<p>This is not a real proof, but I hope you're satisfied with it. If someone can explain it better I would appreciate it too. Maybe ask it on <a href=\"https://mathoverflow.net/\">MathOverflow</a>.</p>\n"},{"tags":[],"owner":{"account_id":4668280,"reputation":41,"user_id":3780780,"display_name":"Scott Higgins"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1403811979,"creation_date":1403811979,"answer_id":24438949,"question_id":7139382,"body_markdown":"In Java adding a .0 will make it a double...\r\n\r\n    int total = (int) Math.ceil(157.0 / 32.0);","title":"Java rounding up to an int using Math.ceil","body":"<p>In Java adding a .0 will make it a double...</p>\n\n<pre><code>int total = (int) Math.ceil(157.0 / 32.0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5144551,"reputation":1,"user_id":4120892,"display_name":"oldcolder"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1412768063,"creation_date":1412765462,"answer_id":26255124,"question_id":7139382,"body_markdown":"    int total = (157-1)/32 + 1\r\n\r\nor more general\r\n\r\n    (a-1)/b +1 ","title":"Java rounding up to an int using Math.ceil","body":"<pre><code>int total = (157-1)/32 + 1\n</code></pre>\n\n<p>or more general</p>\n\n<pre><code>(a-1)/b +1 \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1277621,"reputation":1329,"user_id":1232520,"accept_rate":81,"display_name":"Bhupinder"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1415355588,"creation_date":1415355588,"answer_id":26798956,"question_id":7139382,"body_markdown":"Use double to cast like \r\n\r\n`Math.ceil((double)value)` or like\r\n\r\n    Math.ceil((double)value1/(double)value2);","title":"Java rounding up to an int using Math.ceil","body":"<p>Use double to cast like </p>\n\n<p><code>Math.ceil((double)value)</code> or like</p>\n\n<pre><code>Math.ceil((double)value1/(double)value2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2929062,"reputation":81,"user_id":2509784,"display_name":"jorgenman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1434147138,"creation_date":1434147138,"answer_id":30812908,"question_id":7139382,"body_markdown":"When dividing two integers, e.g.,\r\n\r\n`int c = (int) a / (int) b;`\r\n\r\nthe result is an `int`, the value of which is `a` divided by `b`, rounded toward zero. Because the result is already rounded, `ceil()` doesn&#39;t do anything. Note that this rounding is not the same as `floor()`, which rounds towards negative infinity. So, `3/2` equals `1` (and `floor(1.5)` equals `1.0`, but `(-3)/2` equals `-1` (but `floor(-1.5)` equals `-2.0`).\r\n\r\nThis is significant because if `a/b` were always the same as `floor(a / (double) b)`, then you could just implement `ceil()` of `a/b` as `-( (-a) / b)`.\r\n\r\nThe suggestion of getting `ceil(a/b)` from\r\n\r\n`int n = (a + b - 1) / b;`, which is equivalent to `a / b + (b - 1) / b`, or `(a - 1) / b + 1`\r\n\r\nworks because `ceil(a/b)` is always one greater than `floor(a/b)`, except when `a/b` is a whole number. So, you want to bump it to (or past) the next whole number, unless `a/b` is a whole number. Adding `1 - 1 / b` will do this. For whole numbers, it won&#39;t quite push them up to the next whole number. For everything else, it will.\r\n\r\nYikes. Hopefully that makes sense. I&#39;m sure there&#39;s a more mathematically elegant way to explain it.","title":"Java rounding up to an int using Math.ceil","body":"<p>When dividing two integers, e.g.,</p>\n\n<p><code>int c = (int) a / (int) b;</code></p>\n\n<p>the result is an <code>int</code>, the value of which is <code>a</code> divided by <code>b</code>, rounded toward zero. Because the result is already rounded, <code>ceil()</code> doesn't do anything. Note that this rounding is not the same as <code>floor()</code>, which rounds towards negative infinity. So, <code>3/2</code> equals <code>1</code> (and <code>floor(1.5)</code> equals <code>1.0</code>, but <code>(-3)/2</code> equals <code>-1</code> (but <code>floor(-1.5)</code> equals <code>-2.0</code>).</p>\n\n<p>This is significant because if <code>a/b</code> were always the same as <code>floor(a / (double) b)</code>, then you could just implement <code>ceil()</code> of <code>a/b</code> as <code>-( (-a) / b)</code>.</p>\n\n<p>The suggestion of getting <code>ceil(a/b)</code> from</p>\n\n<p><code>int n = (a + b - 1) / b;</code>, which is equivalent to <code>a / b + (b - 1) / b</code>, or <code>(a - 1) / b + 1</code></p>\n\n<p>works because <code>ceil(a/b)</code> is always one greater than <code>floor(a/b)</code>, except when <code>a/b</code> is a whole number. So, you want to bump it to (or past) the next whole number, unless <code>a/b</code> is a whole number. Adding <code>1 - 1 / b</code> will do this. For whole numbers, it won't quite push them up to the next whole number. For everything else, it will.</p>\n\n<p>Yikes. Hopefully that makes sense. I'm sure there's a more mathematically elegant way to explain it.</p>\n"},{"tags":[],"owner":{"account_id":4080287,"reputation":11,"user_id":5073455,"display_name":"Un known"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435839143,"creation_date":1435837546,"answer_id":31183765,"question_id":7139382,"body_markdown":"Check the solution below for your question:\r\n\r\n    int total = (int) Math.ceil(157/32);\r\n\r\nHere you should multiply Numerator with 1.0, then it will give your answer.\r\n\r\n    int total = (int) Math.ceil(157*1.0/32);","title":"Java rounding up to an int using Math.ceil","body":"<p>Check the solution below for your question:</p>\n\n<pre><code>int total = (int) Math.ceil(157/32);\n</code></pre>\n\n<p>Here you should multiply Numerator with 1.0, then it will give your answer.</p>\n\n<pre><code>int total = (int) Math.ceil(157*1.0/32);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3726628,"reputation":337,"user_id":3100360,"display_name":"ShellayLee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487149660,"creation_date":1487115937,"answer_id":42238309,"question_id":7139382,"body_markdown":"Java provides only floor division `/` by default. But we can **write ceiling in terms of floor**. Let&#39;s see:\r\n\r\nAny integer `y` can be written with the form `y == q*k+r`. According to the definition of floor division (here `floor`) which rounds off `r`,\r\n\r\n    floor(q*k+r, k) == q  , where 0 ≤ r ≤ k-1\r\n\r\nand of ceiling division (here `ceil`) which rounds up `r₁`,\r\n\r\n    ceil(q*k+r₁, k) == q+1  , where 1 ≤ r₁ ≤ k\r\n\r\nwhere we can substitute `r+1` for `r₁`:\r\n\r\n    ceil(q*k+r+1, k) == q+1  , where 0 ≤ r ≤ k-1\r\n\r\n&lt;br/&gt;\r\n\r\nThen we substitute the first equation into the third for `q` getting\r\n\r\n    ceil(q*k+r+1, k) == floor(q*k+r, k) + 1  , where 0 ≤ r ≤ k-1\r\n\r\nFinally, given any integer `y` where `y = q*k+r+1` for some `q`,`k`,`r`, we have\r\n\r\n    ceil(y, k) == floor(y-1, k) + 1\r\n\r\nAnd we are done. Hope this helps.","title":"Java rounding up to an int using Math.ceil","body":"<p>Java provides only floor division <code>/</code> by default. But we can <strong>write ceiling in terms of floor</strong>. Let's see:</p>\n\n<p>Any integer <code>y</code> can be written with the form <code>y == q*k+r</code>. According to the definition of floor division (here <code>floor</code>) which rounds off <code>r</code>,</p>\n\n<pre><code>floor(q*k+r, k) == q  , where 0 ≤ r ≤ k-1\n</code></pre>\n\n<p>and of ceiling division (here <code>ceil</code>) which rounds up <code>r₁</code>,</p>\n\n<pre><code>ceil(q*k+r₁, k) == q+1  , where 1 ≤ r₁ ≤ k\n</code></pre>\n\n<p>where we can substitute <code>r+1</code> for <code>r₁</code>:</p>\n\n<pre><code>ceil(q*k+r+1, k) == q+1  , where 0 ≤ r ≤ k-1\n</code></pre>\n\n<p><br/></p>\n\n<p>Then we substitute the first equation into the third for <code>q</code> getting</p>\n\n<pre><code>ceil(q*k+r+1, k) == floor(q*k+r, k) + 1  , where 0 ≤ r ≤ k-1\n</code></pre>\n\n<p>Finally, given any integer <code>y</code> where <code>y = q*k+r+1</code> for some <code>q</code>,<code>k</code>,<code>r</code>, we have</p>\n\n<pre><code>ceil(y, k) == floor(y-1, k) + 1\n</code></pre>\n\n<p>And we are done. Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":198568,"reputation":5868,"user_id":443310,"accept_rate":100,"display_name":"I.G. Pascual"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1553774761,"creation_date":1504081727,"answer_id":45955534,"question_id":7139382,"body_markdown":"Nobody has mentioned the most intuitive:\r\n\r\n    int x = (int) Math.round(Math.ceil((double) 157 / 32));\r\n\r\nThis solution fixes the _double_ division imprecision.","title":"Java rounding up to an int using Math.ceil","body":"<p>Nobody has mentioned the most intuitive:</p>\n\n<pre><code>int x = (int) Math.round(Math.ceil((double) 157 / 32));\n</code></pre>\n\n<p>This solution fixes the <em>double</em> division imprecision.</p>\n"},{"tags":[],"owner":{"account_id":11597050,"reputation":494,"user_id":8495479,"accept_rate":50,"display_name":"Deepak Kumbhar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1516693419,"creation_date":1516693419,"answer_id":48396527,"question_id":7139382,"body_markdown":"There are two methods by which you can round up your double value.\r\n\r\n 1. *Math.ceil* \r\n 2. *Math.floor*\r\n\r\n\r\n\r\nIf you want your answer 4.90625 as 4 then you should use Math.floor and if you want your answer 4.90625 as 5 then you can use Math.ceil\r\n\r\nYou can refer following code for that.\r\n\r\n    public class TestClass {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tint floorValue = (int) Math.floor((double)157 / 32);\r\n    \t\tint ceilValue = (int) Math.ceil((double)157 / 32);\r\n    \t\tSystem.out.println(&quot;Floor: &quot;+floorValue);\r\n    \t\tSystem.out.println(&quot;Ceil: &quot;+ceilValue);\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Java rounding up to an int using Math.ceil","body":"<p>There are two methods by which you can round up your double value.</p>\n\n<ol>\n<li><em>Math.ceil</em> </li>\n<li><em>Math.floor</em></li>\n</ol>\n\n<p>If you want your answer 4.90625 as 4 then you should use Math.floor and if you want your answer 4.90625 as 5 then you can use Math.ceil</p>\n\n<p>You can refer following code for that.</p>\n\n<pre><code>public class TestClass {\n\n    public static void main(String[] args) {\n        int floorValue = (int) Math.floor((double)157 / 32);\n        int ceilValue = (int) Math.ceil((double)157 / 32);\n        System.out.println(\"Floor: \"+floorValue);\n        System.out.println(\"Ceil: \"+ceilValue);\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12038215,"reputation":1,"user_id":8806032,"display_name":"Felipe Miranda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599141365,"creation_date":1599106234,"answer_id":63716716,"question_id":7139382,"body_markdown":"I know this is an old question but in my opinion, we have a better approach which is using [BigDecimal][1] to avoid precision loss. By the way, using this solution we have the possibility to use several rounding and scale strategies.\r\n\r\n    final var dividend = BigDecimal.valueOf(157);\r\n    final var divisor = BigDecimal.valueOf(32);\r\n    final var result = dividend.divide(divisor, RoundingMode.CEILING).intValue();\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html","title":"Java rounding up to an int using Math.ceil","body":"<p>I know this is an old question but in my opinion, we have a better approach which is using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a> to avoid precision loss. By the way, using this solution we have the possibility to use several rounding and scale strategies.</p>\n<pre><code>final var dividend = BigDecimal.valueOf(157);\nfinal var divisor = BigDecimal.valueOf(32);\nfinal var result = dividend.divide(divisor, RoundingMode.CEILING).intValue();\n</code></pre>\n"}],"owner":{"account_id":738369,"reputation":1277,"user_id":904708,"display_name":"tom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202344,"favorite_count":0,"down_vote_count":2,"up_vote_count":128,"answer_count":15,"score":126,"last_activity_date":1663651582,"creation_date":1313942530,"question_id":7139382,"body_markdown":"    int total = (int) Math.ceil(157/32);\r\n\r\nWhy does it still return 4? `157/32 = 4.90625`, I need to round up, I&#39;ve looked around and this seems to be the right method.\r\n\r\nI tried `total` as `double` type, but get 4.0.\r\n\r\nWhat am I doing wrong?","title":"Java rounding up to an int using Math.ceil","body":"<pre><code>int total = (int) Math.ceil(157/32);\n</code></pre>\n\n<p>Why does it still return 4? <code>157/32 = 4.90625</code>, I need to round up, I've looked around and this seems to be the right method.</p>\n\n<p>I tried <code>total</code> as <code>double</code> type, but get 4.0.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["java","hibernate","annotations"],"comments":[{"owner":{"account_id":174366,"reputation":12158,"user_id":403682,"accept_rate":95,"display_name":"Kenny Cason"},"score":6,"creation_date":1478561855,"post_id":25681386,"comment_id":68197766,"body_markdown":"I can&#39;t find the class `@DatabaseIsUnderscoreAndThisAnnotationConvertsThemToCamelCaseByDefault` ... Just kidding, but I really wanted to paste this to my friend. :)","body":"I can&#39;t find the class <code>@DatabaseIsUnderscoreAndThisAnnotationConvertsThemToCamelCas&zwnj;&#8203;eByDefault</code> ... Just kidding, but I really wanted to paste this to my friend. :)"}],"answers":[{"tags":[],"owner":{"account_id":4979623,"reputation":3944,"user_id":4005008,"display_name":"przemek hertel"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1409907064,"creation_date":1409906358,"answer_id":25681802,"question_id":25681386,"body_markdown":"You can use hibernate&#39;s naming strategy. Such naming strategy class describes how to generate database names for given java names.\r\n\r\nSee:\r\n\r\n[naming strategy example][1]\r\n\r\n\r\n[second example][2]\r\n\r\n\r\n[very good oracle naming strategy][3] - it converts camel to underscore convention, and much more\r\n\r\n\r\n  [1]: http://www.petrikainulainen.net/programming/tips-and-tricks/implementing-a-custom-namingstrategy-with-hibernate/\r\n  [2]: http://sudhirmongia.blogspot.com/2010/08/naming-strategy-in-hibernate.html\r\n  [3]: https://code.google.com/p/hibernate-naming-strategy-for-oracle/source/browse/trunk/src/de/schauderhaft/hibernate/OracleNamingStrategy.java","title":"How to map Hibernate entity fields using camelCase to snake_case (underscore) database identifiers","body":"<p>You can use hibernate's naming strategy. Such naming strategy class describes how to generate database names for given java names.</p>\n\n<p>See:</p>\n\n<p><a href=\"http://www.petrikainulainen.net/programming/tips-and-tricks/implementing-a-custom-namingstrategy-with-hibernate/\" rel=\"noreferrer\">naming strategy example</a></p>\n\n<p><a href=\"http://sudhirmongia.blogspot.com/2010/08/naming-strategy-in-hibernate.html\" rel=\"noreferrer\">second example</a></p>\n\n<p><a href=\"https://code.google.com/p/hibernate-naming-strategy-for-oracle/source/browse/trunk/src/de/schauderhaft/hibernate/OracleNamingStrategy.java\" rel=\"noreferrer\">very good oracle naming strategy</a> - it converts camel to underscore convention, and much more</p>\n"},{"tags":[],"owner":{"account_id":160026,"reputation":8395,"user_id":379779,"accept_rate":57,"display_name":"zawhtut"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1542314424,"creation_date":1522600147,"answer_id":49600193,"question_id":25681386,"body_markdown":"    import org.hibernate.cfg.DefaultNamingStrategy;\r\n    import org.hibernate.cfg.ImprovedNamingStrategy;\r\n\r\n    public class NamingStratagyTest {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString colName = DefaultNamingStrategy.INSTANCE.columnName(&quot;UserName&quot;);\r\n    \t\tSystem.out.println(colName); // UserName\r\n    \t\tcolName = ImprovedNamingStrategy.INSTANCE.columnName(&quot;UserName&quot;);\r\n    \t\tSystem.out.println(colName);// user_name\r\n    \t}\r\n    }\r\n\r\nThere you go, choose the naming strategy that suits your need.","title":"How to map Hibernate entity fields using camelCase to snake_case (underscore) database identifiers","body":"<pre><code>import org.hibernate.cfg.DefaultNamingStrategy;\nimport org.hibernate.cfg.ImprovedNamingStrategy;\n\npublic class NamingStratagyTest {\n    public static void main(String[] args) {\n        String colName = DefaultNamingStrategy.INSTANCE.columnName(\"UserName\");\n        System.out.println(colName); // UserName\n        colName = ImprovedNamingStrategy.INSTANCE.columnName(\"UserName\");\n        System.out.println(colName);// user_name\n    }\n}\n</code></pre>\n\n<p>There you go, choose the naming strategy that suits your need.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1610198725,"creation_date":1542174554,"answer_id":53293897,"question_id":25681386,"body_markdown":"You can achieve this using a custom Hibernate naming strategy.\r\n\r\nAll you need to do is to use the `hibernate-types` open-source project.\r\n\r\nHibernate 5.2 or later\r\n----------------------\r\n\r\nYou need to add the following Maven dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\r\n        &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd set the following Hibernate configuration property:\r\n\r\n    &lt;property name=&quot;hibernate.physical_naming_strategy&quot;\r\n              value=&quot;com.vladmihalcea.hibernate.type.util.CamelCaseToSnakeCaseNamingStrategy&quot;\r\n    /&gt;\r\n\r\nHibernate 5.0 and 5.1\r\n----------------------\r\n\r\nYou need to add the following Maven dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-types-5&lt;/artifactId&gt;\r\n        &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd set the following Hibernate configuration property:\r\n\r\n    &lt;property name=&quot;hibernate.physical_naming_strategy&quot;\r\n              value=&quot;com.vladmihalcea.hibernate.type.util.CamelCaseToSnakeCaseNamingStrategy&quot;\r\n    /&gt;\r\n\r\nHibernate 4.3\r\n-------------\r\n\r\nYou need to add the following Maven dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-types-43&lt;/artifactId&gt;\r\n        &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd set the following Hibernate configuration property:\r\n\r\n    &lt;property name=&quot;hibernate.ejb.naming_strategy&quot;\r\n              value=&quot;com.vladmihalcea.hibernate.type.util.CamelCaseToSnakeCaseNamingStrategy&quot;\r\n    /&gt;\r\n\r\nHibernate 4.2 and 4.1\r\n--------------------------\r\n\r\nYou need to add the following Maven dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-types-4&lt;/artifactId&gt;\r\n        &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd set the following Hibernate configuration property:\r\n\r\n    &lt;property name=&quot;hibernate.ejb.naming_strategy&quot;\r\n              value=&quot;com.vladmihalcea.hibernate.type.util.CamelCaseToSnakeCaseNamingStrategy&quot;\r\n    /&gt;\r\n\r\nTesting time\r\n------------\r\n\r\nAssuming you have the following entities:\r\n\r\n    @Entity(name = &quot;BookAuthor&quot;)\r\n    public class BookAuthor {\r\n     \r\n        @Id\r\n        private Long id;\r\n     \r\n        private String firstName;\r\n     \r\n        private String lastName;\r\n     \r\n        //Getters and setters omitted for brevity\r\n    }\r\n     \r\n    @Entity(name = &quot;PaperBackBook&quot;)\r\n    public class PaperBackBook {\r\n     \r\n        @Id\r\n        @GeneratedValue(\r\n            strategy = GenerationType.SEQUENCE\r\n        )\r\n        private Long id;\r\n     \r\n        @NaturalId\r\n        private String ISBN;\r\n     \r\n        private String title;\r\n     \r\n        private LocalDate publishedOn;\r\n     \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        private BookAuthor publishedBy;\r\n     \r\n        //Getters and setters omitted for brevity\r\n    }\r\n\r\nWhen using the `CamelCaseToSnakeCaseNamingStrategy` custom naming strategy, Hibernate is going to generate the following database schema using the `hbm2ddl` tool:\r\n\r\n    CREATE SEQUENCE hibernate_sequence\r\n    START WITH 1 INCREMENT BY 1\r\n     \r\n    CREATE TABLE book_author (\r\n        id          BIGINT NOT NULL,\r\n        first_name  VARCHAR(255),\r\n        last_name   VARCHAR(255),\r\n        PRIMARY KEY (id)\r\n    )\r\n     \r\n    CREATE TABLE paper_back_book (\r\n        id              BIGINT NOT NULL,\r\n        isbn            VARCHAR(255),\r\n        published_on    DATE, \r\n        title           VARCHAR(255),\r\n        published_by_id BIGINT, \r\n        PRIMARY KEY (id)\r\n    )\r\n\r\nCool, right?\r\n","title":"How to map Hibernate entity fields using camelCase to snake_case (underscore) database identifiers","body":"<p>You can achieve this using a custom Hibernate naming strategy.</p>\n<p>All you need to do is to use the <code>hibernate-types</code> open-source project.</p>\n<h2>Hibernate 5.2 or later</h2>\n<p>You need to add the following Maven dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\n    &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And set the following Hibernate configuration property:</p>\n<pre><code>&lt;property name=&quot;hibernate.physical_naming_strategy&quot;\n          value=&quot;com.vladmihalcea.hibernate.type.util.CamelCaseToSnakeCaseNamingStrategy&quot;\n/&gt;\n</code></pre>\n<h2>Hibernate 5.0 and 5.1</h2>\n<p>You need to add the following Maven dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-types-5&lt;/artifactId&gt;\n    &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And set the following Hibernate configuration property:</p>\n<pre><code>&lt;property name=&quot;hibernate.physical_naming_strategy&quot;\n          value=&quot;com.vladmihalcea.hibernate.type.util.CamelCaseToSnakeCaseNamingStrategy&quot;\n/&gt;\n</code></pre>\n<h2>Hibernate 4.3</h2>\n<p>You need to add the following Maven dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-types-43&lt;/artifactId&gt;\n    &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And set the following Hibernate configuration property:</p>\n<pre><code>&lt;property name=&quot;hibernate.ejb.naming_strategy&quot;\n          value=&quot;com.vladmihalcea.hibernate.type.util.CamelCaseToSnakeCaseNamingStrategy&quot;\n/&gt;\n</code></pre>\n<h2>Hibernate 4.2 and 4.1</h2>\n<p>You need to add the following Maven dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-types-4&lt;/artifactId&gt;\n    &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And set the following Hibernate configuration property:</p>\n<pre><code>&lt;property name=&quot;hibernate.ejb.naming_strategy&quot;\n          value=&quot;com.vladmihalcea.hibernate.type.util.CamelCaseToSnakeCaseNamingStrategy&quot;\n/&gt;\n</code></pre>\n<h2>Testing time</h2>\n<p>Assuming you have the following entities:</p>\n<pre><code>@Entity(name = &quot;BookAuthor&quot;)\npublic class BookAuthor {\n \n    @Id\n    private Long id;\n \n    private String firstName;\n \n    private String lastName;\n \n    //Getters and setters omitted for brevity\n}\n \n@Entity(name = &quot;PaperBackBook&quot;)\npublic class PaperBackBook {\n \n    @Id\n    @GeneratedValue(\n        strategy = GenerationType.SEQUENCE\n    )\n    private Long id;\n \n    @NaturalId\n    private String ISBN;\n \n    private String title;\n \n    private LocalDate publishedOn;\n \n    @ManyToOne(fetch = FetchType.LAZY)\n    private BookAuthor publishedBy;\n \n    //Getters and setters omitted for brevity\n}\n</code></pre>\n<p>When using the <code>CamelCaseToSnakeCaseNamingStrategy</code> custom naming strategy, Hibernate is going to generate the following database schema using the <code>hbm2ddl</code> tool:</p>\n<pre><code>CREATE SEQUENCE hibernate_sequence\nSTART WITH 1 INCREMENT BY 1\n \nCREATE TABLE book_author (\n    id          BIGINT NOT NULL,\n    first_name  VARCHAR(255),\n    last_name   VARCHAR(255),\n    PRIMARY KEY (id)\n)\n \nCREATE TABLE paper_back_book (\n    id              BIGINT NOT NULL,\n    isbn            VARCHAR(255),\n    published_on    DATE, \n    title           VARCHAR(255),\n    published_by_id BIGINT, \n    PRIMARY KEY (id)\n)\n</code></pre>\n<p>Cool, right?</p>\n"},{"tags":[],"owner":{"account_id":4893749,"reputation":490,"user_id":3944040,"display_name":"Leroy"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1633459035,"creation_date":1561637468,"answer_id":56790680,"question_id":25681386,"body_markdown":"I was experiencing the same problem in a Spring boot application, I tried adding the above Hibernate config to the spring properties file with no success, added it as a java bean, again with no success.\r\n\r\nI am using Hibernate `Properties` object, adding the hibernate configuration within this solved my issue:\r\n```\r\n    protected Properties buildHibernateProperties() {\r\n\t\tProperties hibernateProperties = new Properties();\r\n\t\thibernateProperties.setProperty(&quot;hibernate.implicit_naming_strategy&quot;, SpringImplicitNamingStrategy.class.getName());\r\n\t\thibernateProperties.setProperty(&quot;hibernate.physical_naming_strategy&quot;, SpringPhysicalNamingStrategy.class.getName());\r\n\r\n\t\treturn hibernateProperties;\r\n\t}","title":"How to map Hibernate entity fields using camelCase to snake_case (underscore) database identifiers","body":"<p>I was experiencing the same problem in a Spring boot application, I tried adding the above Hibernate config to the spring properties file with no success, added it as a java bean, again with no success.</p>\n<p>I am using Hibernate <code>Properties</code> object, adding the hibernate configuration within this solved my issue:</p>\n<pre><code>    protected Properties buildHibernateProperties() {\n        Properties hibernateProperties = new Properties();\n        hibernateProperties.setProperty(&quot;hibernate.implicit_naming_strategy&quot;, SpringImplicitNamingStrategy.class.getName());\n        hibernateProperties.setProperty(&quot;hibernate.physical_naming_strategy&quot;, SpringPhysicalNamingStrategy.class.getName());\n\n        return hibernateProperties;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1202593,"reputation":9569,"user_id":1173495,"accept_rate":46,"display_name":"SANN3"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663651311,"creation_date":1663651311,"answer_id":73781958,"question_id":25681386,"body_markdown":"From Hibernate `5.5.4.Final`, `CamelCaseToUnderscoresNamingStrategy` has been introduced, the new strategy is the equivalent of the Spring `SpringPhysicalNamingStrategy`.\r\n\r\nThe `CamelCaseToUnderscoresNamingStrategy` replaces all dots with underscores, all camel casing with underscores and generates all table names in lower case.\r\n\r\nFor example, the `LineItem` entity will be mapped to the `line_item` table.\r\n","title":"How to map Hibernate entity fields using camelCase to snake_case (underscore) database identifiers","body":"<p>From Hibernate <code>5.5.4.Final</code>, <code>CamelCaseToUnderscoresNamingStrategy</code> has been introduced, the new strategy is the equivalent of the Spring <code>SpringPhysicalNamingStrategy</code>.</p>\n<p>The <code>CamelCaseToUnderscoresNamingStrategy</code> replaces all dots with underscores, all camel casing with underscores and generates all table names in lower case.</p>\n<p>For example, the <code>LineItem</code> entity will be mapped to the <code>line_item</code> table.</p>\n"}],"owner":{"account_id":950166,"reputation":4058,"user_id":976482,"accept_rate":82,"display_name":"Paul Stanley"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58008,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"accepted_answer_id":25681802,"answer_count":5,"score":41,"last_activity_date":1663651311,"creation_date":1409904859,"question_id":25681386,"body_markdown":"I have database fields in underscore. I have entity fields in camelcase. I can&#39;t change either of those.\r\n\r\nIs there something, maybe a class level annotation I can use to default entity column name annotations to the camelcase equivalent?\r\n\r\nfor example, I have an entity like this:\r\n\r\n    @Entity\r\n    public class AuthorisationEntity {\r\n\r\n        @Column(name = &quot;non_recoverable&quot;)\r\n        private BigDecimal nonRecoverable;\r\n\r\n        @Column(name = &quot;supplier_recoverable&quot;)\r\n        private BigDecimal supplierRecoverable;\r\n\r\n        @Column(name = &quot;refund_amount&quot;)\r\n        private BigDecimal refundAmount;\r\n\r\n    }\r\n\r\nI dream of this:\r\n    \r\n    @Entity\r\n    @DatabaseIsUnderscoreAndThisAnnotationConvertsThemToCamelCaseByDefault\r\n    public class AuthorisationEntity {\r\n\r\n        private BigDecimal nonRecoverable;\r\n\r\n        private BigDecimal supplierRecoverable;\r\n\r\n        private BigDecimal refundAmount;\r\n\r\n    }","title":"How to map Hibernate entity fields using camelCase to snake_case (underscore) database identifiers","body":"<p>I have database fields in underscore. I have entity fields in camelcase. I can't change either of those.</p>\n\n<p>Is there something, maybe a class level annotation I can use to default entity column name annotations to the camelcase equivalent?</p>\n\n<p>for example, I have an entity like this:</p>\n\n<pre><code>@Entity\npublic class AuthorisationEntity {\n\n    @Column(name = \"non_recoverable\")\n    private BigDecimal nonRecoverable;\n\n    @Column(name = \"supplier_recoverable\")\n    private BigDecimal supplierRecoverable;\n\n    @Column(name = \"refund_amount\")\n    private BigDecimal refundAmount;\n\n}\n</code></pre>\n\n<p>I dream of this:</p>\n\n<pre><code>@Entity\n@DatabaseIsUnderscoreAndThisAnnotationConvertsThemToCamelCaseByDefault\npublic class AuthorisationEntity {\n\n    private BigDecimal nonRecoverable;\n\n    private BigDecimal supplierRecoverable;\n\n    private BigDecimal refundAmount;\n\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1521543463,"post_id":49382359,"comment_id":85765472,"body_markdown":"you mean for the main method? even in an IDE you can pass parameters to the main method","body":"you mean for the main method? even in an IDE you can pass parameters to the main method"},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1521543483,"post_id":49382359,"comment_id":85765489,"body_markdown":"Because JVM is written in C, and thats the callback the JVM gives you. And not everyone uses an IDE, so compiled programs/jars shouldn&#39;t conform to IDEs only.","body":"Because JVM is written in C, and thats the callback the JVM gives you. And not everyone uses an IDE, so compiled programs/jars shouldn&#39;t conform to IDEs only."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1521543566,"post_id":49382359,"comment_id":85765536,"body_markdown":"It is a way to parametrize your application. Even in the IDE or for a graphical application it makes sense: file to open or such.","body":"It is a way to parametrize your application. Even in the IDE or for a graphical application it makes sense: file to open or such."},{"owner":{"account_id":7821678,"reputation":2208,"user_id":5914654,"display_name":"vincrichaud"},"score":0,"creation_date":1521543570,"post_id":49382359,"comment_id":85765541,"body_markdown":"Cause you can add argument through eclipse (look [here](https://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_run_arg.htm))","body":"Cause you can add argument through eclipse (look <a href=\"https://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_run_arg.htm\" rel=\"nofollow noreferrer\">here</a>)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1521546310,"post_id":49382359,"comment_id":85767330,"body_markdown":"@Shark - It is nothing to do with the implementation language for the JVM.","body":"@Shark - It is nothing to do with the implementation language for the JVM."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1521553379,"post_id":49382359,"comment_id":85772585,"body_markdown":"@StephenC yes, I am aware, but I had nothing better to say really; it&#39;s a pretty logical extension of `main (int argc, char** argv)`","body":"@StephenC yes, I am aware, but I had nothing better to say really; it&#39;s a pretty logical extension of <code>main (int argc, char** argv)</code>"}],"answers":[{"tags":[],"owner":{"account_id":7799093,"reputation":1830,"user_id":5899172,"accept_rate":71,"display_name":"Yassine Badache"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1521543640,"creation_date":1521543640,"answer_id":49382466,"question_id":49382359,"body_markdown":"Because an IDE is not a substitute for the Java language. The language itself expects to take a `String[]` for its `main` method&#39;s arguments. People that are not using an IDE will need this as well in order to make their program work.\r\n\r\n---\r\nPS: Take note that you can [input command lines in an IDE][1] when executing a program such as a Java `main` program. This how you are supposed to use it, in order to simulate a Java execution from an IDE.\r\n\r\n\r\n  [1]: https://help.eclipse.org/neon/topic/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html","title":"As i have seen (String[] args) is used to give inputs through Command Line in JAVA. But why we should write it even we are using an IDE like eclips?","body":"<p>Because an IDE is not a substitute for the Java language. The language itself expects to take a <code>String[]</code> for its <code>main</code> method's arguments. People that are not using an IDE will need this as well in order to make their program work.</p>\n\n<hr>\n\n<p>PS: Take note that you can <a href=\"https://help.eclipse.org/neon/topic/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html\" rel=\"nofollow noreferrer\">input command lines in an IDE</a> when executing a program such as a Java <code>main</code> program. This how you are supposed to use it, in order to simulate a Java execution from an IDE.</p>\n"},{"tags":[],"owner":{"account_id":20559350,"reputation":1,"user_id":15090191,"display_name":"Gaurav Srivastava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663648818,"creation_date":1663648625,"answer_id":73781707,"question_id":49382359,"body_markdown":"Link to similar question [link][3]\r\n\r\nSo the java compiler **javac** (after ver 1.7) is designed in a way that \r\n\r\nwhen ever **any class is complied in java** it first **checks** the main function with signature\r\n\r\n    public static void main(String[] args)\r\n\r\nIf it is found then only the program is going to run \r\notherwise it will show you an error\r\n\r\nGiving you a YT video link of Durga Sir\r\nexplained in detailed manner\r\n\r\n[Part 1][1] (8 min) enough for this question\r\n\r\n[Part 2][2] (10 min) for some more details\r\n\r\n*After watching this you will never have any doubt in main method*\r\n\r\nBecause same question I also have why we create String array  \r\n \r\n\r\n\r\n  [1]: https://youtu.be/by58arnoV4c\r\n  [2]: https://youtu.be/L0SdH2Dtrnw\r\n  [3]: https://stackoverflow.com/questions/890966/what-is-string-args-parameter-in-main-method-java","title":"As i have seen (String[] args) is used to give inputs through Command Line in JAVA. But why we should write it even we are using an IDE like eclips?","body":"<p>Link to similar question <a href=\"https://stackoverflow.com/questions/890966/what-is-string-args-parameter-in-main-method-java\">link</a></p>\n<p>So the java compiler <strong>javac</strong> (after ver 1.7) is designed in a way that</p>\n<p>when ever <strong>any class is complied in java</strong> it first <strong>checks</strong> the main function with signature</p>\n<pre><code>public static void main(String[] args)\n</code></pre>\n<p>If it is found then only the program is going to run\notherwise it will show you an error</p>\n<p>Giving you a YT video link of Durga Sir\nexplained in detailed manner</p>\n<p><a href=\"https://youtu.be/by58arnoV4c\" rel=\"nofollow noreferrer\">Part 1</a> (8 min) enough for this question</p>\n<p><a href=\"https://youtu.be/L0SdH2Dtrnw\" rel=\"nofollow noreferrer\">Part 2</a> (10 min) for some more details</p>\n<p><em>After watching this you will never have any doubt in main method</em></p>\n<p>Because same question I also have why we create String array</p>\n"}],"owner":{"account_id":5749553,"reputation":101,"user_id":4539698,"display_name":"Learnee"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":49382466,"answer_count":2,"score":-2,"last_activity_date":1663648818,"creation_date":1521543370,"question_id":49382359,"body_markdown":"As I have seen (String[] args) is used to give inputs through Command Line in JAVA. But why we should write it even we are using an IDE like eclipse?","title":"As i have seen (String[] args) is used to give inputs through Command Line in JAVA. But why we should write it even we are using an IDE like eclips?","body":"<p>As I have seen (String[] args) is used to give inputs through Command Line in JAVA. But why we should write it even we are using an IDE like eclipse?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":21114192,"reputation":444,"user_id":15521590,"display_name":"Piyush Pranjal"},"score":1,"creation_date":1663647951,"post_id":73781642,"comment_id":130283096,"body_markdown":"class B is public, and should be declared in a file named B.java","body":"class B is public, and should be declared in a file named B.java"},{"owner":{"account_id":21114192,"reputation":444,"user_id":15521590,"display_name":"Piyush Pranjal"},"score":0,"creation_date":1663648032,"post_id":73781642,"comment_id":130283111,"body_markdown":"While writing a java program first it is saved as a &quot;.java&quot; file, when it is compiled it forms byte code which is a &quot;.class&quot; file as such that if we made our program file similar to the class it will be comfortable for us to understand without any ambiguity. We are allowed to use any name for a filename only when class is not public. In the case of a public class, we can’t use a different file name.\nThe filename must have the same name as the public class name in that file, which is the way to tell the JVM that this is an entry point.","body":"While writing a java program first it is saved as a &quot;.java&quot; file, when it is compiled it forms byte code which is a &quot;.class&quot; file as such that if we made our program file similar to the class it will be comfortable for us to understand without any ambiguity. We are allowed to use any name for a filename only when class is not public. In the case of a public class, we can’t use a different file name. The filename must have the same name as the public class name in that file, which is the way to tell the JVM that this is an entry point."}],"owner":{"account_id":12938549,"reputation":39,"user_id":19079065,"display_name":"puneetred"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1663649906,"answer_count":0,"score":0,"last_activity_date":1663647775,"creation_date":1663647775,"question_id":73781642,"body_markdown":"I created a class named `A` and put this code under this class. I created a subclass named `B` under the same file.\r\n\r\n```java\r\npackage com.puneetred.sem3;\r\n\r\nclass A extends B {\r\n\t\r\n\tpublic static void methodB() {\r\n\t\tSystem.out.println(&quot;Second Class&quot;);\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tmethodA();\r\n\t\tmethodB();\r\n\t}\r\n}\r\n\r\n\r\npublic class B {\r\n\t \r\n\tpublic static void methodA() {\r\n\t\t\r\n\t\tSystem.out.println(&quot;First class&quot;);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nCompiling the above code throws this exception:\r\n```\r\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem: \r\n\r\n\tat com.puneetred.sem3/com.puneetred.sem3.B.methodA(A.java:18)\r\n\tat com.puneetred.sem3/com.puneetred.sem3.A.main(A.java:10)\r\n```\r\n\r\nBut when I remove the `public` keyword before `class B`, the code just runs fine.","title":"Why doesn&#39;t this java program compile when specifying a subclass as public?","body":"<p>I created a class named <code>A</code> and put this code under this class. I created a subclass named <code>B</code> under the same file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.puneetred.sem3;\n\nclass A extends B {\n    \n    public static void methodB() {\n        System.out.println(&quot;Second Class&quot;);\n    }\n    \n    public static void main(String[] args) {\n        methodA();\n        methodB();\n    }\n}\n\n\npublic class B {\n     \n    public static void methodA() {\n        \n        System.out.println(&quot;First class&quot;);\n    }\n\n}\n</code></pre>\n<p>Compiling the above code throws this exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem: \n\n    at com.puneetred.sem3/com.puneetred.sem3.B.methodA(A.java:18)\n    at com.puneetred.sem3/com.puneetred.sem3.A.main(A.java:10)\n</code></pre>\n<p>But when I remove the <code>public</code> keyword before <code>class B</code>, the code just runs fine.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1663482245,"post_id":73759463,"comment_id":130247209,"body_markdown":"You need to add the COMPLETE stacktrace for the crash AS TEXT within the question.  Then someone may be able to help you.","body":"You need to add the COMPLETE stacktrace for the crash AS TEXT within the question.  Then someone may be able to help you."},{"owner":{"account_id":25846164,"reputation":1,"user_id":19580977,"display_name":"Nova"},"score":0,"creation_date":1663535448,"post_id":73759463,"comment_id":130257527,"body_markdown":"Maybe can you help me? I Just added the complete stacktrace.","body":"Maybe can you help me? I Just added the complete stacktrace."}],"answers":[{"tags":[],"owner":{"account_id":7612800,"reputation":16,"user_id":5773181,"display_name":"Jo&#227;o Pedro Pedrosa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663628830,"creation_date":1663628830,"answer_id":73780090,"question_id":73759463,"body_markdown":"```\r\njava.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\r\n```\r\n\r\nIn this peace of code you are saying that `mEmail` and `mPassword` are the type `MaterialEditText`.\r\n\r\n```\r\nMaterialEditText mEmail, mPassword;\r\n```\r\n\r\nhowever in the XML layout `(R.layout.activity_main)` they should be the type of `AppCompatEditText`, and is that cast that is making your app crash.\r\nYou should change in the XML layout from `AppCompatEditText` to `MaterialEditText` or in your code change to:\r\n\r\n```\r\nAppCompatEditText mEmail, mPassword;\r\n```\r\n\r\n\r\n","title":"App keep crashing (Login function is used)","body":"<pre><code>java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\n</code></pre>\n<p>In this peace of code you are saying that <code>mEmail</code> and <code>mPassword</code> are the type <code>MaterialEditText</code>.</p>\n<pre><code>MaterialEditText mEmail, mPassword;\n</code></pre>\n<p>however in the XML layout <code>(R.layout.activity_main)</code> they should be the type of <code>AppCompatEditText</code>, and is that cast that is making your app crash.\nYou should change in the XML layout from <code>AppCompatEditText</code> to <code>MaterialEditText</code> or in your code change to:</p>\n<pre><code>AppCompatEditText mEmail, mPassword;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663647480,"creation_date":1663647328,"answer_id":73781597,"question_id":73759463,"body_markdown":"**Error is:** java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\r\n\r\n\r\nSolution 1 is:\r\n\r\nchange in `MainActivity.java` class\r\n\r\n    MaterialEditText mEmail, mPassword;\r\n\r\nto\r\n\r\n    AppCompatEditText mEmail, mPassword;\r\n\r\n\r\nOr Solution 2 is...\r\n\r\nChnage ExitText in `activity_main.xml`\r\n\r\n    &lt;com.rengwuxian.materialedittext.MaterialEditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;/&gt;\r\n\r\nTo\r\n\r\n    &lt;androidx.appcompat.widget.AppCompatEditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;/&gt;","title":"App keep crashing (Login function is used)","body":"<p><strong>Error is:</strong> java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText</p>\n<p>Solution 1 is:</p>\n<p>change in <code>MainActivity.java</code> class</p>\n<pre><code>MaterialEditText mEmail, mPassword;\n</code></pre>\n<p>to</p>\n<pre><code>AppCompatEditText mEmail, mPassword;\n</code></pre>\n<p>Or Solution 2 is...</p>\n<p>Chnage ExitText in <code>activity_main.xml</code></p>\n<pre><code>&lt;com.rengwuxian.materialedittext.MaterialEditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;/&gt;\n</code></pre>\n<p>To</p>\n<pre><code>&lt;androidx.appcompat.widget.AppCompatEditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":25846164,"reputation":1,"user_id":19580977,"display_name":"Nova"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1663647480,"creation_date":1663462845,"question_id":73759463,"body_markdown":"\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    --------- beginning of system\r\n    --------- beginning of main\r\n    --------- beginning of crash\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime: FATAL EXCEPTION: main\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime: Process: com.example.basicaccount, PID: hidden\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.basicaccount/com.example.basicaccount.MainActivity}: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3827)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4003)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.os.Looper.loop(Looper.java:246)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.ActivityThread.main(ActivityThread.java:8625)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at java.lang.reflect.Method.invoke(Native Method)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)09-19 18:33:08.542  8788  8788 E AndroidRuntime: Caused by: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at com.example.basicaccount.MainActivity.onCreate(MainActivity.java:42)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8207)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8191)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3800)\r\n    09-19 18:33:08.542  8788  8788 E AndroidRuntime:        ... 11 more\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime: FATAL EXCEPTION: main\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime: Process: com.example.basicaccount, PID: hidden\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.basicaccount/com.example.basicaccount.MainActivity}: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3827)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4003)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.os.Looper.loop(Looper.java:246)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.ActivityThread.main(ActivityThread.java:8625)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at java.lang.reflect.Method.invoke(Native Method)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)09-19 18:35:36.177 18856 18856 E AndroidRuntime: Caused by: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at com.example.basicaccount.MainActivity.onCreate(MainActivity.java:42)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8207)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8191)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3800)\r\n    09-19 18:35:36.177 18856 18856 E AndroidRuntime:        ... 11 more\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime: FATAL EXCEPTION: main\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime: Process: com.example.basicaccount, PID: hidden\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.basicaccount/com.example.basicaccount.MainActivity}: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3827)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4003)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.os.Looper.loop(Looper.java:246)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.ActivityThread.main(ActivityThread.java:8625)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at java.lang.reflect.Method.invoke(Native Method)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)09-19 18:35:39.394 21952 21952 E AndroidRuntime: Caused by: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at com.example.basicaccount.MainActivity.onCreate(MainActivity.java:42)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8207)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8191)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3800)\r\n    09-19 18:35:39.394 21952 21952 E AndroidRuntime:        ... 11 more\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n```none\r\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.basicaccount/com.example.basicaccount.MainActivity}: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3827)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4003)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:246)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8625)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\r\n     Caused by: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\r\n        at com.example.basicaccount.MainActivity.onCreate(MainActivity.java:42)\r\n        at android.app.Activity.performCreate(Activity.java:8207)\r\n        at android.app.Activity.performCreate(Activity.java:8191)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3800)\r\n```\r\n            \r\n\r\nI&#39;m currently working on a login and sign up app (PHP backend). After dragging the function&quot;logIn()&quot; and the list of edit text and buttons are inside &quot;onCreate&quot; function, the app crashes. On the Logcat, the error indicates that it starts from line 42. After cutting and pasting line 42 to inside the function logIn(), then the error shows from line 41. After repeating the process, the error of the line decreases each time. \r\n\r\nIn contrary, after cutting from line 42 &quot;mEmail = findViewById(R.id.loginEmail);&quot; to line 60 (closing tag) and pasting into the function logIn(), the app runs, but the buttons do not work because the logIn() function is unused. Basically, the logIn() codes became useless. \r\n\r\nI want to make the logIn() function work without crashing the app. \r\n\r\nHow do I fix this bug? \r\n\r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AlertDialog;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n\r\n    import android.annotation.SuppressLint;\r\n    import android.content.DialogInterface;\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.TextView;\r\n\r\n    import com.android.volley.AuthFailureError;\r\n    import com.android.volley.NetworkResponse;\r\n    import com.android.volley.Request;\r\n    import com.android.volley.Response;\r\n    import com.android.volley.VolleyError;\r\n    import com.android.volley.toolbox.StringRequest;\r\n    import com.rengwuxian.materialedittext.MaterialEditText;\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n        private String appURL;\r\n        private String EMAIL, PASSWORD;\r\n        MaterialEditText mEmail, mPassword;\r\n        Button mButton;\r\n        TextView mCreateAccount;\r\n\r\n        @SuppressLint(&quot;WrongViewCast&quot;)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n\r\n            appURL = &quot;anonymous_link&quot;;\r\n\r\n            mEmail = findViewById(R.id.loginEmail);\r\n            mPassword = findViewById(R.id.loginPassword);\r\n            mCreateAccount = findViewById(R.id.leadSignup);\r\n            mCreateAccount.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    Intent intent = new Intent(getApplicationContext(), SignUp.class);\r\n                    startActivity(intent);\r\n                }\r\n            });\r\n\r\n            mButton = findViewById(R.id.loginBut);\r\n            mButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    logIn();\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        @SuppressLint(&quot;WrongViewCast&quot;)\r\n        private void logIn() {\r\n\r\n\r\n\r\n            EMAIL = mEmail.getText().toString();\r\n            PASSWORD = mPassword.getText().toString();\r\n\r\n            if (EMAIL.isEmpty()) {\r\n                AlertDialog.Builder alert = new AlertDialog.Builder(getApplicationContext());\r\n                alert.setMessage(&quot;Please enter your email&quot;);\r\n                alert.setCancelable(false);\r\n                alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialogInterface, int i) {\r\n                        dialogInterface.dismiss();\r\n                    }\r\n                });\r\n                alert.show();\r\n            }\r\n                else if (PASSWORD.isEmpty()) {\r\n                AlertDialog.Builder alert = new AlertDialog.Builder(getApplicationContext());\r\n                alert.setMessage(&quot;Please enter your password&quot;);\r\n                alert.setCancelable(false);\r\n                alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialogInterface, int i) {\r\n                        dialogInterface.dismiss();\r\n                    }\r\n                });\r\n                alert.show();\r\n            }\r\n            else if (PASSWORD.length() &lt; 10) {\r\n                AlertDialog.Builder alert = new AlertDialog.Builder(getApplicationContext());\r\n                alert.setMessage(&quot;Password length must not be less than 10 charc!&quot;);\r\n                alert.setCancelable(false);\r\n                alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialogInterface, int i) {\r\n                        dialogInterface.dismiss();\r\n                    }\r\n                });\r\n                alert.show();\r\n            }\r\n            else {\r\n                StringRequest stringRequest;\r\n                stringRequest = new StringRequest(Request.Method.POST, appURL, new Response.Listener&lt;String&gt;() {\r\n                    @Override\r\n                    public void onResponse(String response) {\r\n                        if (response.equals(&quot;true&quot;)) {\r\n                            Intent intent = new Intent(getApplicationContext(), Dashboard.class);\r\n                            startActivity(intent);\r\n                        } else {\r\n                            AlertDialog.Builder alert = new AlertDialog.Builder(getApplicationContext());\r\n                            alert.setMessage(response);\r\n                            alert.setCancelable(false);\r\n                            alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                                @Override\r\n                                public void onClick(DialogInterface dialogInterface, int i) {\r\n                                    dialogInterface.dismiss();\r\n                                }\r\n                            });\r\n                            alert.show();\r\n                        }\r\n                    }\r\n                }, new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        AlertDialog.Builder alert, alert1, alert2;\r\n                        NetworkResponse response = error.networkResponse;\r\n                        if (response != null &amp;&amp; response.data != null) {\r\n                            switch (response.statusCode) {\r\n                                case 400:\r\n                                    alert = new AlertDialog.Builder(getApplicationContext());\r\n                                    alert.setTitle(&quot;Error&quot;);\r\n                                    alert.setMessage(response.data.toString());\r\n                                    alert.setCancelable(false);\r\n                                    alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialogInterface, int i) {\r\n                                            dialogInterface.dismiss();\r\n                                        }\r\n                                    });\r\n                                    alert.show();\r\n                                    break;\r\n                                case 404:\r\n                                    alert1 = new AlertDialog.Builder(getApplicationContext());\r\n                                    alert1.setTitle(&quot;Error&quot;);\r\n                                    alert1.setMessage(response.data.toString());\r\n                                    alert1.setCancelable(false);\r\n                                    alert1.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialogInterface, int i) {\r\n                                            dialogInterface.dismiss();\r\n                                        }\r\n                                    });\r\n                                    alert1.show();\r\n                                    break;\r\n                                case 403:\r\n                                    alert2 = new AlertDialog.Builder(getApplicationContext());\r\n                                    alert2.setTitle(&quot;Error&quot;);\r\n                                    alert2.setMessage(response.data.toString());\r\n                                    alert2.setCancelable(false);\r\n                                    alert2.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialogInterface, int i) {\r\n                                            dialogInterface.dismiss();\r\n                                        }\r\n                                    });\r\n                                    alert2.show();\r\n                                    break;\r\n                            }\r\n                        }\r\n                        else {\r\n                            alert = new AlertDialog.Builder(getApplicationContext());\r\n                            alert.setTitle(&quot;Error&quot;);\r\n                            alert.setMessage(&quot;An error occured. Please try again&quot;);\r\n                            alert.setCancelable(false);\r\n                            alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                                @Override\r\n                                public void onClick(DialogInterface dialogInterface, int i) {\r\n                                    dialogInterface.dismiss();\r\n                                }\r\n                            });\r\n                            alert.show();\r\n                        }\r\n                    }\r\n                })\r\n                {\r\n                    @Nullable\r\n                    @Override\r\n                    protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\r\n                        HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n                        params.put(&quot;email&quot;, EMAIL);\r\n                        params.put(&quot;password&quot;, PASSWORD);\r\n\r\n                        return params;\r\n                    }\r\n\r\n                    @Override\r\n                    public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\r\n                        HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n                        params.put(&quot;Accept&quot;, &quot;Application/json: charset = UTF-8&quot;);\r\n                        return super.getHeaders();\r\n                    }\r\n                };\r\n                VolleySingleton.getInstance().addRequestQueue(stringRequest);\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"App keep crashing (Login function is used)","body":"<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>--------- beginning of system\n--------- beginning of main\n--------- beginning of crash\n09-19 18:33:08.542  8788  8788 E AndroidRuntime: FATAL EXCEPTION: main\n09-19 18:33:08.542  8788  8788 E AndroidRuntime: Process: com.example.basicaccount, PID: hidden\n09-19 18:33:08.542  8788  8788 E AndroidRuntime: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.basicaccount/com.example.basicaccount.MainActivity}: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3827)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4003)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:106)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.os.Looper.loop(Looper.java:246)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.ActivityThread.main(ActivityThread.java:8625)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at java.lang.reflect.Method.invoke(Native Method)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)09-19 18:33:08.542  8788  8788 E AndroidRuntime: Caused by: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at com.example.basicaccount.MainActivity.onCreate(MainActivity.java:42)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8207)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8191)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3800)\n09-19 18:33:08.542  8788  8788 E AndroidRuntime:        ... 11 more\n09-19 18:35:36.177 18856 18856 E AndroidRuntime: FATAL EXCEPTION: main\n09-19 18:35:36.177 18856 18856 E AndroidRuntime: Process: com.example.basicaccount, PID: hidden\n09-19 18:35:36.177 18856 18856 E AndroidRuntime: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.basicaccount/com.example.basicaccount.MainActivity}: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3827)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4003)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:106)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.os.Looper.loop(Looper.java:246)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.ActivityThread.main(ActivityThread.java:8625)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at java.lang.reflect.Method.invoke(Native Method)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)09-19 18:35:36.177 18856 18856 E AndroidRuntime: Caused by: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at com.example.basicaccount.MainActivity.onCreate(MainActivity.java:42)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8207)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8191)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3800)\n09-19 18:35:36.177 18856 18856 E AndroidRuntime:        ... 11 more\n09-19 18:35:39.394 21952 21952 E AndroidRuntime: FATAL EXCEPTION: main\n09-19 18:35:39.394 21952 21952 E AndroidRuntime: Process: com.example.basicaccount, PID: hidden\n09-19 18:35:39.394 21952 21952 E AndroidRuntime: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.basicaccount/com.example.basicaccount.MainActivity}: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3827)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4003)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:106)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.os.Looper.loop(Looper.java:246)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.ActivityThread.main(ActivityThread.java:8625)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at java.lang.reflect.Method.invoke(Native Method)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)09-19 18:35:39.394 21952 21952 E AndroidRuntime: Caused by: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at com.example.basicaccount.MainActivity.onCreate(MainActivity.java:42)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8207)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.Activity.performCreate(Activity.java:8191)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3800)\n09-19 18:35:39.394 21952 21952 E AndroidRuntime:        ... 11 more</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.basicaccount/com.example.basicaccount.MainActivity}: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3827)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4003)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2317)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:246)\n        at android.app.ActivityThread.main(ActivityThread.java:8625)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n     Caused by: java.lang.ClassCastException: androidx.appcompat.widget.AppCompatEditText cannot be cast to com.rengwuxian.materialedittext.MaterialEditText\n        at com.example.basicaccount.MainActivity.onCreate(MainActivity.java:42)\n        at android.app.Activity.performCreate(Activity.java:8207)\n        at android.app.Activity.performCreate(Activity.java:8191)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3800)\n</code></pre>\n<p>I'm currently working on a login and sign up app (PHP backend). After dragging the function&quot;logIn()&quot; and the list of edit text and buttons are inside &quot;onCreate&quot; function, the app crashes. On the Logcat, the error indicates that it starts from line 42. After cutting and pasting line 42 to inside the function logIn(), then the error shows from line 41. After repeating the process, the error of the line decreases each time.</p>\n<p>In contrary, after cutting from line 42 &quot;mEmail = findViewById(R.id.loginEmail);&quot; to line 60 (closing tag) and pasting into the function logIn(), the app runs, but the buttons do not work because the logIn() function is unused. Basically, the logIn() codes became useless.</p>\n<p>I want to make the logIn() function work without crashing the app.</p>\n<p>How do I fix this bug?</p>\n<pre><code>import androidx.annotation.Nullable;\nimport androidx.appcompat.app.AlertDialog;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.TextView;\n\nimport com.android.volley.AuthFailureError;\nimport com.android.volley.NetworkResponse;\nimport com.android.volley.Request;\nimport com.android.volley.Response;\nimport com.android.volley.VolleyError;\nimport com.android.volley.toolbox.StringRequest;\nimport com.rengwuxian.materialedittext.MaterialEditText;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private String appURL;\n    private String EMAIL, PASSWORD;\n    MaterialEditText mEmail, mPassword;\n    Button mButton;\n    TextView mCreateAccount;\n\n    @SuppressLint(&quot;WrongViewCast&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        appURL = &quot;anonymous_link&quot;;\n\n        mEmail = findViewById(R.id.loginEmail);\n        mPassword = findViewById(R.id.loginPassword);\n        mCreateAccount = findViewById(R.id.leadSignup);\n        mCreateAccount.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Intent intent = new Intent(getApplicationContext(), SignUp.class);\n                startActivity(intent);\n            }\n        });\n\n        mButton = findViewById(R.id.loginBut);\n        mButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                logIn();\n            }\n        });\n    }\n\n\n\n\n\n    @SuppressLint(&quot;WrongViewCast&quot;)\n    private void logIn() {\n\n\n\n        EMAIL = mEmail.getText().toString();\n        PASSWORD = mPassword.getText().toString();\n\n        if (EMAIL.isEmpty()) {\n            AlertDialog.Builder alert = new AlertDialog.Builder(getApplicationContext());\n            alert.setMessage(&quot;Please enter your email&quot;);\n            alert.setCancelable(false);\n            alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialogInterface, int i) {\n                    dialogInterface.dismiss();\n                }\n            });\n            alert.show();\n        }\n            else if (PASSWORD.isEmpty()) {\n            AlertDialog.Builder alert = new AlertDialog.Builder(getApplicationContext());\n            alert.setMessage(&quot;Please enter your password&quot;);\n            alert.setCancelable(false);\n            alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialogInterface, int i) {\n                    dialogInterface.dismiss();\n                }\n            });\n            alert.show();\n        }\n        else if (PASSWORD.length() &lt; 10) {\n            AlertDialog.Builder alert = new AlertDialog.Builder(getApplicationContext());\n            alert.setMessage(&quot;Password length must not be less than 10 charc!&quot;);\n            alert.setCancelable(false);\n            alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialogInterface, int i) {\n                    dialogInterface.dismiss();\n                }\n            });\n            alert.show();\n        }\n        else {\n            StringRequest stringRequest;\n            stringRequest = new StringRequest(Request.Method.POST, appURL, new Response.Listener&lt;String&gt;() {\n                @Override\n                public void onResponse(String response) {\n                    if (response.equals(&quot;true&quot;)) {\n                        Intent intent = new Intent(getApplicationContext(), Dashboard.class);\n                        startActivity(intent);\n                    } else {\n                        AlertDialog.Builder alert = new AlertDialog.Builder(getApplicationContext());\n                        alert.setMessage(response);\n                        alert.setCancelable(false);\n                        alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                            @Override\n                            public void onClick(DialogInterface dialogInterface, int i) {\n                                dialogInterface.dismiss();\n                            }\n                        });\n                        alert.show();\n                    }\n                }\n            }, new Response.ErrorListener() {\n                @Override\n                public void onErrorResponse(VolleyError error) {\n                    AlertDialog.Builder alert, alert1, alert2;\n                    NetworkResponse response = error.networkResponse;\n                    if (response != null &amp;&amp; response.data != null) {\n                        switch (response.statusCode) {\n                            case 400:\n                                alert = new AlertDialog.Builder(getApplicationContext());\n                                alert.setTitle(&quot;Error&quot;);\n                                alert.setMessage(response.data.toString());\n                                alert.setCancelable(false);\n                                alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                                    @Override\n                                    public void onClick(DialogInterface dialogInterface, int i) {\n                                        dialogInterface.dismiss();\n                                    }\n                                });\n                                alert.show();\n                                break;\n                            case 404:\n                                alert1 = new AlertDialog.Builder(getApplicationContext());\n                                alert1.setTitle(&quot;Error&quot;);\n                                alert1.setMessage(response.data.toString());\n                                alert1.setCancelable(false);\n                                alert1.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                                    @Override\n                                    public void onClick(DialogInterface dialogInterface, int i) {\n                                        dialogInterface.dismiss();\n                                    }\n                                });\n                                alert1.show();\n                                break;\n                            case 403:\n                                alert2 = new AlertDialog.Builder(getApplicationContext());\n                                alert2.setTitle(&quot;Error&quot;);\n                                alert2.setMessage(response.data.toString());\n                                alert2.setCancelable(false);\n                                alert2.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                                    @Override\n                                    public void onClick(DialogInterface dialogInterface, int i) {\n                                        dialogInterface.dismiss();\n                                    }\n                                });\n                                alert2.show();\n                                break;\n                        }\n                    }\n                    else {\n                        alert = new AlertDialog.Builder(getApplicationContext());\n                        alert.setTitle(&quot;Error&quot;);\n                        alert.setMessage(&quot;An error occured. Please try again&quot;);\n                        alert.setCancelable(false);\n                        alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                            @Override\n                            public void onClick(DialogInterface dialogInterface, int i) {\n                                dialogInterface.dismiss();\n                            }\n                        });\n                        alert.show();\n                    }\n                }\n            })\n            {\n                @Nullable\n                @Override\n                protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\n                    HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\n                    params.put(&quot;email&quot;, EMAIL);\n                    params.put(&quot;password&quot;, PASSWORD);\n\n                    return params;\n                }\n\n                @Override\n                public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n                    HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\n                    params.put(&quot;Accept&quot;, &quot;Application/json: charset = UTF-8&quot;);\n                    return super.getHeaders();\n                }\n            };\n            VolleySingleton.getInstance().addRequestQueue(stringRequest);\n        }\n\n\n\n\n\n    }\n\n\n\n}\n</code></pre>\n\n"},{"tags":["java","private-key","pkcs#1","pkcs#8"],"comments":[{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":0,"creation_date":1525860193,"post_id":50250582,"comment_id":87518394,"body_markdown":"You can do so using openssl with a command like `openssl pkcs8 -topk8 -inform PEM -outform PEM -nocrypt -in pkcs1.key -out pkcs8.key`. Compare [here](https://stackoverflow.com/questions/8290435/)","body":"You can do so using openssl with a command like <code>openssl pkcs8 -topk8 -inform PEM -outform PEM -nocrypt -in pkcs1.key -out pkcs8.key</code>. Compare <a href=\"https://stackoverflow.com/questions/8290435/\">here</a>"},{"owner":{"account_id":6893949,"reputation":55,"user_id":5296521,"display_name":"Thanh Vũ"},"score":0,"creation_date":1525860608,"post_id":50250582,"comment_id":87518687,"body_markdown":"Thank you, I know that I can do by using openssl command line.\nBut what I ask is anyway we can do it by java.","body":"Thank you, I know that I can do by using openssl command line. But what I ask is anyway we can do it by java."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1525861141,"post_id":50250582,"comment_id":87518985,"body_markdown":"Why? You only have to do this process every few years when you re-key. Why write new Java code when an existing utility already does it correctly?","body":"Why? You only have to do this process every few years when you re-key. Why write new Java code when an existing utility already does it correctly?"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1661736182,"post_id":50250582,"comment_id":129835223,"body_markdown":"Do (did) you need to _convert_ it or only to _use_ it? Those aren&#39;t the same. To _use_ a PKCS1 RSAPrivateKey (aka OpenSSL traditional clear) in Java with BouncyCastle see https://stackoverflow.com/questions/41934846/read-rsa-private-key-of-format-pkcs1-in-java .","body":"Do (did) you need to <i>convert</i> it or only to <i>use</i> it? Those aren&#39;t the same. To <i>use</i> a PKCS1 RSAPrivateKey (aka OpenSSL traditional clear) in Java with BouncyCastle see <a href=\"https://stackoverflow.com/questions/41934846/read-rsa-private-key-of-format-pkcs1-in-java\" title=\"read rsa private key of format pkcs1 in java\">stackoverflow.com/questions/41934846/&hellip;</a> ."}],"answers":[{"tags":[],"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1525860921,"creation_date":1525860921,"answer_id":50250867,"question_id":50250582,"body_markdown":"**Disclaimer**: I did not come up with this solution myself, it was written by marcoscottwright over at github. [Find the original code here][1]\r\n\r\n-----\r\n\r\nYou can do so using BouncyCastle given you have a `PrivateKey k` object.\r\n\r\n    try (ASN1InputStream asn1InputStream = new ASN1InputStream(k.getEncoded()))\r\n   \t{\r\n   \t\tDERObject rsaPrivateKey = asn1InputStream.readObject();\r\n   \t\treturn new PrivateKeyInfo(new AlgorithmIdentifier(PKCSObjectIdentifiers.rsaEncryption), rsaPrivateKey).getDEREncoded();\r\n   \t}\r\n\r\n  [1]: https://gist.github.com/markscottwright/4bd563fa91e9a72bf1ce12a0ff6567aa","title":"Convert PKCS#1-formatted private key to PKCS#8-formatted private key by java","body":"<p><strong>Disclaimer</strong>: I did not come up with this solution myself, it was written by marcoscottwright over at github. <a href=\"https://gist.github.com/markscottwright/4bd563fa91e9a72bf1ce12a0ff6567aa\" rel=\"nofollow noreferrer\">Find the original code here</a></p>\n\n<hr>\n\n<p>You can do so using BouncyCastle given you have a <code>PrivateKey k</code> object.</p>\n\n<pre><code>try (ASN1InputStream asn1InputStream = new ASN1InputStream(k.getEncoded()))\n{\n    DERObject rsaPrivateKey = asn1InputStream.readObject();\n    return new PrivateKeyInfo(new AlgorithmIdentifier(PKCSObjectIdentifiers.rsaEncryption), rsaPrivateKey).getDEREncoded();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1027813,"reputation":19711,"user_id":1036728,"accept_rate":53,"display_name":"antak"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663647384,"creation_date":1663647384,"answer_id":73781604,"question_id":50250582,"body_markdown":"Converting a PKCS#1 encoded RSA private key to PKCS#8 that&#39;s consumable by vanilla Java is possible using Bouncy Castle&#39;s [bcprov](https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on) library.\r\n\r\n\r\nSince the difference between PKCS#1 and PKCS#8 is simply the leading PrivateKeyAlgorithmIdentifier, we can supplement that to get PKCS#8:\r\n\r\n```java\r\nbyte[] pkcs1Encoded = ...;\r\n\r\nAlgorithmIdentifier algId = new AlgorithmIdentifier(PKCSObjectIdentifiers.rsaEncryption, DERNull.INSTANCE);\r\nPrivateKeyInfo privateKeyInfo = new PrivateKeyInfo(algId, ASN1Sequence.getInstance(pkcs1Encoded));\r\n\r\nbyte[] pkcs8Encoded = privateKeyInfo.getEncoded();\r\n```\r\n\r\nThis is then consumable by vanilla Java:\r\n\r\n```\r\njava.security.spec.KeySpec spec = new java.security.spec.PKCS8EncodedKeySpec(pkcs8Encoded);\r\njava.security.KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(spec);\r\n```\r\n\r\nHowever, if you&#39;re using Bouncy Castle anyway, you can use their provider and you don&#39;t need to explicitly convert PKCS#1 to PKCS#8 since their KeyFactorySpi can consume a `PKCS8EncodedKeySpec` with a PKCS#1 shoved into it.\r\n\r\n e.g.:\r\n```\r\njava.security.spec.KeySpec spec = new java.security.spec.PKCS8EncodedKeySpec(pkcs1Encoded);\r\njava.security.KeyFactory.getInstance(&quot;RSA&quot;, new BouncyCastleProvider()).generatePrivate(spec);\r\n```\r\n\r\nThe Bouncy Castle provider can also be registered globally:\r\n```\r\nSecurity.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());\r\n\r\n...\r\n\r\njava.security.spec.KeySpec spec = new java.security.spec.PKCS8EncodedKeySpec(pkcs1Encoded);\r\njava.security.KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(spec);\r\n```","title":"Convert PKCS#1-formatted private key to PKCS#8-formatted private key by java","body":"<p>Converting a PKCS#1 encoded RSA private key to PKCS#8 that's consumable by vanilla Java is possible using Bouncy Castle's <a href=\"https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on\" rel=\"nofollow noreferrer\">bcprov</a> library.</p>\n<p>Since the difference between PKCS#1 and PKCS#8 is simply the leading PrivateKeyAlgorithmIdentifier, we can supplement that to get PKCS#8:</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] pkcs1Encoded = ...;\n\nAlgorithmIdentifier algId = new AlgorithmIdentifier(PKCSObjectIdentifiers.rsaEncryption, DERNull.INSTANCE);\nPrivateKeyInfo privateKeyInfo = new PrivateKeyInfo(algId, ASN1Sequence.getInstance(pkcs1Encoded));\n\nbyte[] pkcs8Encoded = privateKeyInfo.getEncoded();\n</code></pre>\n<p>This is then consumable by vanilla Java:</p>\n<pre><code>java.security.spec.KeySpec spec = new java.security.spec.PKCS8EncodedKeySpec(pkcs8Encoded);\njava.security.KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(spec);\n</code></pre>\n<p>However, if you're using Bouncy Castle anyway, you can use their provider and you don't need to explicitly convert PKCS#1 to PKCS#8 since their KeyFactorySpi can consume a <code>PKCS8EncodedKeySpec</code> with a PKCS#1 shoved into it.</p>\n<p>e.g.:</p>\n<pre><code>java.security.spec.KeySpec spec = new java.security.spec.PKCS8EncodedKeySpec(pkcs1Encoded);\njava.security.KeyFactory.getInstance(&quot;RSA&quot;, new BouncyCastleProvider()).generatePrivate(spec);\n</code></pre>\n<p>The Bouncy Castle provider can also be registered globally:</p>\n<pre><code>Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());\n\n...\n\njava.security.spec.KeySpec spec = new java.security.spec.PKCS8EncodedKeySpec(pkcs1Encoded);\njava.security.KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(spec);\n</code></pre>\n"}],"owner":{"account_id":6893949,"reputation":55,"user_id":5296521,"display_name":"Thanh Vũ"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7397,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":50250867,"answer_count":2,"score":5,"last_activity_date":1663647384,"creation_date":1525860053,"question_id":50250582,"body_markdown":"I have a PKCS#1-formatted private key (generated by opendkim-genkey) like this\r\n\r\n    -----BEGIN RSA PRIVATE KEY-----\r\n    \r\n    Base64 encoded data\r\n    \r\n    -----END RSA PRIVATE KEY-----\r\n\r\nNow I have to use it in Java to generate java.security.PrivateKey\r\n\r\nBut Java only support PKCS#8-formatted private key.\r\n\r\nI know there is a way to convert from PKCS#8 to PKCS#1 by Java (using Bouncycastle), but is there anyway convert from PKCS#1 to PKCS#8 by Java?\r\n","title":"Convert PKCS#1-formatted private key to PKCS#8-formatted private key by java","body":"<p>I have a PKCS#1-formatted private key (generated by opendkim-genkey) like this</p>\n\n<pre><code>-----BEGIN RSA PRIVATE KEY-----\n\nBase64 encoded data\n\n-----END RSA PRIVATE KEY-----\n</code></pre>\n\n<p>Now I have to use it in Java to generate java.security.PrivateKey</p>\n\n<p>But Java only support PKCS#8-formatted private key.</p>\n\n<p>I know there is a way to convert from PKCS#8 to PKCS#1 by Java (using Bouncycastle), but is there anyway convert from PKCS#1 to PKCS#8 by Java?</p>\n"},{"tags":["java","design-patterns"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":1,"creation_date":1663595220,"post_id":73774368,"comment_id":130270217,"body_markdown":"Sounds more like a need for the `Factory` or even `Builder` pattern. There would need to be more information regarding the actual code in use.","body":"Sounds more like a need for the <code>Factory</code> or even <code>Builder</code> pattern. There would need to be more information regarding the actual code in use."},{"owner":{"account_id":155388,"reputation":382,"user_id":372010,"display_name":"Jan Linxweiler"},"score":0,"creation_date":1663653831,"post_id":73774368,"comment_id":130284171,"body_markdown":"I do agree with @Rogue. More information about the actual use case would be nice. Generally lots of if-statements or a switch statement are a good indicator that probably you could introduce an abstraction and make use of polymorphism.","body":"I do agree with @Rogue. More information about the actual use case would be nice. Generally lots of if-statements or a switch statement are a good indicator that probably you could introduce an abstraction and make use of polymorphism."}],"answers":[{"tags":[],"owner":{"account_id":18295743,"reputation":111,"user_id":13321721,"display_name":"maslosh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663602959,"creation_date":1663602959,"answer_id":73776163,"question_id":73774368,"body_markdown":"It&#39;s a perfect case for the factory pattern. From https://www.tutorialspoint.com/design_pattern/factory_pattern.htm:\r\n\r\n&gt; In Factory pattern, we create object without exposing the creation logic to the client and refer to newly created object using a common interface.\r\n\r\nSince in all cases we are returning MyType instance, there is no problem to use that `methodWithIfs` body as a factory method, which would return MyType instance created in line with rules which we should keep in specific cases.\r\n\r\n````\r\npublic MyType createMyType(Object param1, Object param2) {\r\n  if (condition1) {\r\n    return new MyType(param1);\r\n  }\r\n\r\n  if (condition2) {\r\n    return new MyType(param2);\r\n  }\r\n  ....\r\n}\r\n\r\npublic MyType methodWithIfs(){\r\n    return createMyTypeObj(param1, param2)\r\n}\r\n\r\n````\r\n\r\nIt&#39;s kinda important when we are talking about design patterns - things like 100-line long switch/case or ifs chain aren&#39;t simply *internally* bad. It&#39;s all about **maintenance** - creating code in line with rules that would provide that the code will be clean, readable and easy to maintain in the future.","title":"Replace ordered if condition with design pattern","body":"<p>It's a perfect case for the factory pattern. From <a href=\"https://www.tutorialspoint.com/design_pattern/factory_pattern.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/design_pattern/factory_pattern.htm</a>:</p>\n<blockquote>\n<p>In Factory pattern, we create object without exposing the creation logic to the client and refer to newly created object using a common interface.</p>\n</blockquote>\n<p>Since in all cases we are returning MyType instance, there is no problem to use that <code>methodWithIfs</code> body as a factory method, which would return MyType instance created in line with rules which we should keep in specific cases.</p>\n<pre><code>public MyType createMyType(Object param1, Object param2) {\n  if (condition1) {\n    return new MyType(param1);\n  }\n\n  if (condition2) {\n    return new MyType(param2);\n  }\n  ....\n}\n\npublic MyType methodWithIfs(){\n    return createMyTypeObj(param1, param2)\n}\n\n</code></pre>\n<p>It's kinda important when we are talking about design patterns - things like 100-line long switch/case or ifs chain aren't simply <em>internally</em> bad. It's all about <strong>maintenance</strong> - creating code in line with rules that would provide that the code will be clean, readable and easy to maintain in the future.</p>\n"},{"tags":[],"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663646710,"creation_date":1663646710,"answer_id":73781545,"question_id":73774368,"body_markdown":"One of the way is to use [Chain of Responsibility pattern][1]. As wiki says:\r\n\r\n&gt; The chain-of-responsibility pattern is a behavioral design pattern\r\n&gt; consisting of a source of command objects and a series of processing\r\n&gt; objects. **Each processing object contains logic that defines the\r\n&gt; types of command objects that it can handle; the rest are passed to\r\n&gt; the next processing object in the chain.** A mechanism also exists for\r\n&gt; adding new processing objects to the end of this chain\r\n\r\nSo let&#39;s dive in code. I am sorry, I am not Java guy. Let me show an example via C#. I&#39;ve provided comments how code would be look in Java.\r\n\r\n\r\nSo this is out model class which we want to create based on some conditions:\r\n\r\n    public class Vehicle\r\n    {\r\n        public string _color;\r\n    \r\n        public int _doorsCount;\r\n    \r\n        public int _wheelCount;\r\n    \r\n        public Vehicle(string color)\r\n        {\r\n            _color = color;\r\n        }\r\n    \r\n        public Vehicle(int doorsCount)\r\n        {\r\n            _doorsCount = doorsCount;\r\n        }\r\n    \r\n        public Vehicle(int doorsCount, int wheelCount)\r\n        {\r\n            _doorsCount = doorsCount;\r\n            _wheelCount = wheelCount;\r\n        }\r\n    }\r\n\r\nAnd this is parameter class which you use in your `if else` statements:\r\n\r\n    public class Parameter\r\n    {\r\n        public string Parameter_1 { get; set; } // just simple variable in Java\r\n        public string Parameter_2 { get; set; }\r\n        public string Parameter_3 { get; set; }\r\n    }\r\n\r\nAnd this is an abstraction of VehicleHandler which defines behaviour to to set next handler:\r\n\r\n    public abstract class VehicleHandler\r\n    {\r\n        private VehicleHandler _nextVehicleHandler;\r\n    \r\n        public void SetSuccessor(VehicleHandler nextVehicleHandler)\r\n        { \r\n            _nextVehicleHandler = nextVehicleHandler;\r\n        }\r\n    \r\n        public virtual Vehicle Execute(Parameter parameter)\r\n        { \r\n            if (_nextVehicleHandler != null)\r\n                return _nextVehicleHandler.Execute(parameter);\r\n    \r\n            return null;\r\n        }\r\n    }\r\n\r\nand its concrete implementations of `VehicleHandler`:\r\n\r\n    public class FirstVehicleHandler : VehicleHandler // &quot;inherits&quot; in Java\r\n    {\r\n        public override Vehicle Execute(Parameter parameter)\r\n        {\r\n            if (parameter.Parameter_1 != null)\r\n                return new Vehicle(&quot;green&quot;);\r\n    \r\n            return base.Execute(parameter);\r\n        }\r\n    }\r\n    \r\n    public class SecondVehicleHandler : VehicleHandler // &quot;inherits&quot; in Java\r\n    {\r\n        public override Vehicle Execute(Parameter parameter)\r\n        {\r\n            if (parameter.Parameter_2 != null)\r\n                return new Vehicle(4);\r\n    \r\n            return base.Execute(parameter);\r\n        }\r\n    }\r\n    \r\n    public class ThirdVehicleHandler : VehicleHandler // &quot;inherits&quot; in Java\r\n    {\r\n        public override Vehicle Execute(Parameter parameter)\r\n        {\r\n            if (parameter.Parameter_3 != null)\r\n                return new Vehicle(4, 4);\r\n    \r\n            return base.Execute(parameter);\r\n        }\r\n    }\r\n\r\nAnd then you can call the above code like this:\r\n\r\n    VehicleHandler chain = new FirstVehicleHandler();\r\n    VehicleHandler secondVehicleHandler = new SecondVehicleHandler();\r\n    VehicleHandler thirdVehicleHandler = new ThirdVehicleHandler();\r\n    \r\n    chain.SetSuccessor(secondVehicleHandler);\r\n    secondVehicleHandler.SetSuccessor(thirdVehicleHandler);\r\n    \r\n    Parameter parameter = new Parameter();\r\n    parameter.Parameter_1 = &quot;The color should be green&quot;;\r\n    \r\n    Vehicle vehicle = chain.Execute(parameter); // color of vehicle is green\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern\r\n\r\n\r\n","title":"Replace ordered if condition with design pattern","body":"<p>One of the way is to use <a href=\"https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern\" rel=\"nofollow noreferrer\">Chain of Responsibility pattern</a>. As wiki says:</p>\n<blockquote>\n<p>The chain-of-responsibility pattern is a behavioral design pattern\nconsisting of a source of command objects and a series of processing\nobjects. <strong>Each processing object contains logic that defines the\ntypes of command objects that it can handle; the rest are passed to\nthe next processing object in the chain.</strong> A mechanism also exists for\nadding new processing objects to the end of this chain</p>\n</blockquote>\n<p>So let's dive in code. I am sorry, I am not Java guy. Let me show an example via C#. I've provided comments how code would be look in Java.</p>\n<p>So this is out model class which we want to create based on some conditions:</p>\n<pre><code>public class Vehicle\n{\n    public string _color;\n\n    public int _doorsCount;\n\n    public int _wheelCount;\n\n    public Vehicle(string color)\n    {\n        _color = color;\n    }\n\n    public Vehicle(int doorsCount)\n    {\n        _doorsCount = doorsCount;\n    }\n\n    public Vehicle(int doorsCount, int wheelCount)\n    {\n        _doorsCount = doorsCount;\n        _wheelCount = wheelCount;\n    }\n}\n</code></pre>\n<p>And this is parameter class which you use in your <code>if else</code> statements:</p>\n<pre><code>public class Parameter\n{\n    public string Parameter_1 { get; set; } // just simple variable in Java\n    public string Parameter_2 { get; set; }\n    public string Parameter_3 { get; set; }\n}\n</code></pre>\n<p>And this is an abstraction of VehicleHandler which defines behaviour to to set next handler:</p>\n<pre><code>public abstract class VehicleHandler\n{\n    private VehicleHandler _nextVehicleHandler;\n\n    public void SetSuccessor(VehicleHandler nextVehicleHandler)\n    { \n        _nextVehicleHandler = nextVehicleHandler;\n    }\n\n    public virtual Vehicle Execute(Parameter parameter)\n    { \n        if (_nextVehicleHandler != null)\n            return _nextVehicleHandler.Execute(parameter);\n\n        return null;\n    }\n}\n</code></pre>\n<p>and its concrete implementations of <code>VehicleHandler</code>:</p>\n<pre><code>public class FirstVehicleHandler : VehicleHandler // &quot;inherits&quot; in Java\n{\n    public override Vehicle Execute(Parameter parameter)\n    {\n        if (parameter.Parameter_1 != null)\n            return new Vehicle(&quot;green&quot;);\n\n        return base.Execute(parameter);\n    }\n}\n\npublic class SecondVehicleHandler : VehicleHandler // &quot;inherits&quot; in Java\n{\n    public override Vehicle Execute(Parameter parameter)\n    {\n        if (parameter.Parameter_2 != null)\n            return new Vehicle(4);\n\n        return base.Execute(parameter);\n    }\n}\n\npublic class ThirdVehicleHandler : VehicleHandler // &quot;inherits&quot; in Java\n{\n    public override Vehicle Execute(Parameter parameter)\n    {\n        if (parameter.Parameter_3 != null)\n            return new Vehicle(4, 4);\n\n        return base.Execute(parameter);\n    }\n}\n</code></pre>\n<p>And then you can call the above code like this:</p>\n<pre><code>VehicleHandler chain = new FirstVehicleHandler();\nVehicleHandler secondVehicleHandler = new SecondVehicleHandler();\nVehicleHandler thirdVehicleHandler = new ThirdVehicleHandler();\n\nchain.SetSuccessor(secondVehicleHandler);\nsecondVehicleHandler.SetSuccessor(thirdVehicleHandler);\n\nParameter parameter = new Parameter();\nparameter.Parameter_1 = &quot;The color should be green&quot;;\n\nVehicle vehicle = chain.Execute(parameter); // color of vehicle is green\n</code></pre>\n"}],"owner":{"account_id":887484,"reputation":784,"user_id":926572,"accept_rate":50,"display_name":"sonic boom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1663652374,"answer_count":2,"score":1,"last_activity_date":1663646710,"creation_date":1663595007,"question_id":73774368,"body_markdown":"I&#39;ve a legacy class with lots of if conditions, like:\r\n\r\n    public MyType methodWithIfs() {\r\n      if (condition1) {\r\n        return new MyType(param1);\r\n      }\r\n    \r\n      if (condition2) {\r\n        return new MyType(param2);\r\n      }\r\n      ....\r\n    }\r\n\r\n\r\nEvery if condition returns a type of `MyType`.\r\n\r\nAlso there is a order in which these conditions are mentioned. Two conditions can be true but only first that matched the criteria should be executed based on order.\r\n\r\nI was thinking of replacing these conditions with [Conditional Dispatcher with Command][1] design pattern\r\n\r\nSince there is an order to be maintained, instead of using `HashMap&lt;Boolean, MyType&gt;`, I was thinking of using `LinkedHashMap&lt;Boolean, MyType&gt;`.\r\n\r\nBut this seems dodgy. Is there any cleaner way I can replace these conditions?\r\n\r\n*Thanks!*\r\n\r\n\r\n  [1]: https://www.industriallogic.com/xp/refactoring/conditionDispatcherWithCommand.html","title":"Replace ordered if condition with design pattern","body":"<p>I've a legacy class with lots of if conditions, like:</p>\n<pre><code>public MyType methodWithIfs() {\n  if (condition1) {\n    return new MyType(param1);\n  }\n\n  if (condition2) {\n    return new MyType(param2);\n  }\n  ....\n}\n</code></pre>\n<p>Every if condition returns a type of <code>MyType</code>.</p>\n<p>Also there is a order in which these conditions are mentioned. Two conditions can be true but only first that matched the criteria should be executed based on order.</p>\n<p>I was thinking of replacing these conditions with <a href=\"https://www.industriallogic.com/xp/refactoring/conditionDispatcherWithCommand.html\" rel=\"nofollow noreferrer\">Conditional Dispatcher with Command</a> design pattern</p>\n<p>Since there is an order to be maintained, instead of using <code>HashMap&lt;Boolean, MyType&gt;</code>, I was thinking of using <code>LinkedHashMap&lt;Boolean, MyType&gt;</code>.</p>\n<p>But this seems dodgy. Is there any cleaner way I can replace these conditions?</p>\n<p><em>Thanks!</em></p>\n"},{"tags":["java","elasticsearch","java-8","elasticsearch-java-api","elasticsearch-high-level-restclient"],"comments":[{"owner":{"account_id":12526038,"reputation":353,"user_id":9115820,"display_name":"Clark Ngo"},"score":0,"creation_date":1663624283,"post_id":73777700,"comment_id":130279733,"body_markdown":"from the docs, it says to use RestClientBuilder https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/master/_timeouts.html. There&#39;s another post similar to this. https://stackoverflow.com/questions/65503584/change-timeout-in-run-time-elasticsearch-resthighlevelclient","body":"from the docs, it says to use RestClientBuilder <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/master/_timeouts.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/client/java-api-client/mas&zwnj;&#8203;ter/&hellip;</a>. There&#39;s another post similar to this. <a href=\"https://stackoverflow.com/questions/65503584/change-timeout-in-run-time-elasticsearch-resthighlevelclient\" title=\"change timeout in run time elasticsearch resthighlevelclient\">stackoverflow.com/questions/65503584/&hellip;</a>"},{"owner":{"account_id":9690499,"reputation":145,"user_id":7188713,"display_name":"Ashish Mishra"},"score":0,"creation_date":1663638137,"post_id":73777700,"comment_id":130281731,"body_markdown":"RestClientBuilder will help to set connect and socket timeout, I am trying to set a timeout for individual queries. Also, the link you shared was for High LevelRest client, whereas I am trying to use Low-Level Rest CLient, as the high level is getting deprecated","body":"RestClientBuilder will help to set connect and socket timeout, I am trying to set a timeout for individual queries. Also, the link you shared was for High LevelRest client, whereas I am trying to use Low-Level Rest CLient, as the high level is getting deprecated"}],"answers":[{"tags":[],"owner":{"account_id":9690499,"reputation":145,"user_id":7188713,"display_name":"Ashish Mishra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663646431,"creation_date":1663646431,"answer_id":73781519,"question_id":73777700,"body_markdown":"I was able to solve this by passing a simple time value, \r\n\r\n```\r\nString searchText = &quot;bike&quot;;\r\n\r\nSearchResponse&lt;Product&gt; response = esClient.search(s -&gt; s\r\n    .index(&quot;products&quot;) \r\n .timeout(&quot;450ms&quot;)\r\n    .query(q -&gt; q      \r\n        .match(t -&gt; t   \r\n            .field(&quot;name&quot;)  \r\n            .query(searchText)\r\n        )\r\n    ),\r\n    Product.class      \r\n);\r\n\r\n```","title":"Set timeout in Elastic Java API Client","body":"<p>I was able to solve this by passing a simple time value,</p>\n<pre><code>String searchText = &quot;bike&quot;;\n\nSearchResponse&lt;Product&gt; response = esClient.search(s -&gt; s\n    .index(&quot;products&quot;) \n .timeout(&quot;450ms&quot;)\n    .query(q -&gt; q      \n        .match(t -&gt; t   \n            .field(&quot;name&quot;)  \n            .query(searchText)\n        )\n    ),\n    Product.class      \n);\n\n</code></pre>\n"}],"owner":{"account_id":9690499,"reputation":145,"user_id":7188713,"display_name":"Ashish Mishra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":706,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73781519,"answer_count":1,"score":0,"last_activity_date":1663646431,"creation_date":1663611500,"question_id":73777700,"body_markdown":"I am trying to move from Elastic High level rest client to Elastic Java API Client (Low Level Rest Client). I am able to get the response, but i want to set the timeout for my elastic query.\r\n\r\nBut this timeout method is accepting a string value, which i am not able to pass the value here. \r\n```\r\nString searchText = &quot;bike&quot;;\r\n\r\nSearchResponse&lt;Product&gt; response = esClient.search(s -&gt; s\r\n    .index(&quot;products&quot;) \r\n .timeout()\r\n    .query(q -&gt; q      \r\n        .match(t -&gt; t   \r\n            .field(&quot;name&quot;)  \r\n            .query(searchText)\r\n        )\r\n    ),\r\n    Product.class      \r\n);\r\n``` \r\nThis is the documentation for the method https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.0.1/co/elastic/clients/elasticsearch/core/SearchRequest.Builder.html#timeout(java.lang.String) \r\n\r\nCan someone help, how can I pass timeout value as String ??","title":"Set timeout in Elastic Java API Client","body":"<p>I am trying to move from Elastic High level rest client to Elastic Java API Client (Low Level Rest Client). I am able to get the response, but i want to set the timeout for my elastic query.</p>\n<p>But this timeout method is accepting a string value, which i am not able to pass the value here.</p>\n<pre><code>String searchText = &quot;bike&quot;;\n\nSearchResponse&lt;Product&gt; response = esClient.search(s -&gt; s\n    .index(&quot;products&quot;) \n .timeout()\n    .query(q -&gt; q      \n        .match(t -&gt; t   \n            .field(&quot;name&quot;)  \n            .query(searchText)\n        )\n    ),\n    Product.class      \n);\n</code></pre>\n<p>This is the documentation for the method <a href=\"https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.0.1/co/elastic/clients/elasticsearch/core/SearchRequest.Builder.html#timeout(java.lang.String)\" rel=\"nofollow noreferrer\">https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.0.1/co/elastic/clients/elasticsearch/core/SearchRequest.Builder.html#timeout(java.lang.String)</a></p>\n<p>Can someone help, how can I pass timeout value as String ??</p>\n"},{"tags":["java","libgdx"],"comments":[{"owner":{"account_id":2378568,"reputation":2040,"user_id":4489263,"display_name":"Stefan Wuebbe"},"score":1,"creation_date":1663198735,"post_id":73722676,"comment_id":130185544,"body_markdown":"_&quot; I need a solution to this as fast as possible if you can&quot;_ That&#39;s not how SO &quot;works&quot;","body":"<i>&quot; I need a solution to this as fast as possible if you can&quot;</i> That&#39;s not how SO &quot;works&quot;"}],"answers":[{"tags":[],"owner":{"account_id":422872,"reputation":656,"user_id":801899,"display_name":"londonBadger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663646381,"creation_date":1663406091,"answer_id":73753616,"question_id":73722676,"body_markdown":"Your second call to \r\n```\r\npixmap.setColor(Color.BLACK); // add your 2 color here\r\npixmap.fillRectangle(0, 0, 80, 80);\r\n```\r\noverwrites the colour set by the first because you are writing to the same area.\r\n\r\nWithin the nested loop iterating over the board, you could simplify finding the alternating cell type for the chessboard to\r\n```\r\nif ((x+(y*8)) % 2 = 0 ) {\r\n//Cell is bottom left square color\r\n} else {\r\n//Cell is the other colour\r\n}\r\n```\r\n\r\nAlthough its nice to generate the chess board for special effects later, you could also just import one from the tiled editor and then you can experiment more with how it looks. Tile map loaders absolutely not the pain you might imagine they are super short, literally a snippets worth, there is a written loader here \r\nhttps://gamefromscratch.com/libgdx-tutorial-11-tiled-maps-part-1-simple-orthogonal-maps/\r\n\r\n(also and not relevant this\r\n``` Pixmap pixmap = new Pixmap(100, 80, Format.RGBA8888);``` is a larger region than you ever use.)\r\n\r\nThere is a no AI libGDX chess game here as well if you want to just extend with AI.\r\nhttps://github.com/axlan/libgdx-chess\r\n\r\n\r\n","title":"LibGdx Chess Board","body":"<p>Your second call to</p>\n<pre><code>pixmap.setColor(Color.BLACK); // add your 2 color here\npixmap.fillRectangle(0, 0, 80, 80);\n</code></pre>\n<p>overwrites the colour set by the first because you are writing to the same area.</p>\n<p>Within the nested loop iterating over the board, you could simplify finding the alternating cell type for the chessboard to</p>\n<pre><code>if ((x+(y*8)) % 2 = 0 ) {\n//Cell is bottom left square color\n} else {\n//Cell is the other colour\n}\n</code></pre>\n<p>Although its nice to generate the chess board for special effects later, you could also just import one from the tiled editor and then you can experiment more with how it looks. Tile map loaders absolutely not the pain you might imagine they are super short, literally a snippets worth, there is a written loader here\n<a href=\"https://gamefromscratch.com/libgdx-tutorial-11-tiled-maps-part-1-simple-orthogonal-maps/\" rel=\"nofollow noreferrer\">https://gamefromscratch.com/libgdx-tutorial-11-tiled-maps-part-1-simple-orthogonal-maps/</a></p>\n<p>(also and not relevant this\n<code> Pixmap pixmap = new Pixmap(100, 80, Format.RGBA8888);</code> is a larger region than you ever use.)</p>\n<p>There is a no AI libGDX chess game here as well if you want to just extend with AI.\n<a href=\"https://github.com/axlan/libgdx-chess\" rel=\"nofollow noreferrer\">https://github.com/axlan/libgdx-chess</a></p>\n"}],"owner":{"account_id":23198615,"reputation":1,"user_id":17293838,"display_name":"alexandra zamfir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1663646381,"creation_date":1663186293,"question_id":73722676,"body_markdown":"I try to create a chess board, just the board in libGdx but for some reason, I can&#39;t. \r\nI still miss two other rows in the chess. I will show you my code, maybe you can find the problem in my code, if not, I can easily accept another solution. \r\n\r\n    package com.mygdx.game;\r\n\r\n     import com.badlogic.gdx.ApplicationAdapter;\r\n     import com.badlogic.gdx.Gdx;\r\n     import com.badlogic.gdx.Input.Keys;\r\n     import com.badlogic.gdx.graphics.Color;\r\n     import com.badlogic.gdx.graphics.GL20;\r\n     import com.badlogic.gdx.graphics.OrthographicCamera;\r\n     import com.badlogic.gdx.graphics.Pixmap;\r\n     import com.badlogic.gdx.graphics.Texture;\r\n     import com.badlogic.gdx.graphics.Pixmap.Format;\r\n     import com.badlogic.gdx.graphics.g2d.SpriteBatch;\r\n     import com.badlogic.gdx.graphics.g2d.TextureRegion;\r\n     import com.badlogic.gdx.maps.MapLayers;\r\n     import com.badlogic.gdx.maps.tiled.TiledMap;\r\n     import com.badlogic.gdx.maps.tiled.TiledMapTileLayer;\r\n     import com.badlogic.gdx.maps.tiled.TiledMapTileLayer.Cell;\r\n      import com.badlogic.gdx.maps.tiled.renderers.OrthogonalTiledMapRenderer;\r\n      import com.badlogic.gdx.maps.tiled.tiles.StaticTiledMapTile;\r\n      import com.badlogic.gdx.utils.ScreenUtils;\r\n       import com.badlogic.gdx.utils.viewport.Viewport;\r\n\r\n    public class MyGdxGame extends ApplicationAdapter {\r\n\tSpriteBatch batch;\r\n\tTexture img;\r\n\tprivate OrthographicCamera camera;\r\n\tprivate OrthogonalTiledMapRenderer render;\r\n\tprivate final static int width = 100, height = 80, layercount = 8;\r\n\tprivate TiledMap map;\r\n\r\n\t@Override\r\n\tpublic void create() {\r\n\t\tfloat w = Gdx.graphics.getWidth();\r\n\t\tfloat h = Gdx.graphics.getHeight();\r\n\r\n\t\tcamera = new OrthographicCamera(w, h);\r\n\r\n\t\tPixmap pixmap = new Pixmap(100, 80, Format.RGBA8888);\r\n\t\tpixmap.setColor(Color.WHITE); // add your 1 color here\r\n\t\tpixmap.fillRectangle(0, 0, 80, 80);\r\n\r\n\t\tpixmap.setColor(Color.BLACK); // add your 2 color here\r\n\t\tpixmap.fillRectangle(0, 0, 80, 80);\r\n\t\t// the outcome is an texture with an blue left square and an red right\r\n\t\t// square\r\n\t\tTexture t = new Texture(pixmap);\r\n\t\tTextureRegion reg1 = new TextureRegion(t, 0, 0, 80, 80);\r\n\t\tTextureRegion reg2 = new TextureRegion(t, 80, 0, 80, 80);\r\n\r\n\t\tTiledMap map = new TiledMap();\r\n\t\tMapLayers layers = map.getLayers();\r\n\t\tfor (int l = 0; l &lt; layercount; l++) {\r\n\t\t\tTiledMapTileLayer layer = new TiledMapTileLayer(width, height, 80,\r\n\t\t\t\t\t80);\r\n\t\t\tfor (int x = 0; x &lt; width; x++) {\r\n\t\t\t\tfor (int y = 0; y &lt; height; y++) {\r\n\t\t\t\t\tCell cell = new Cell();\r\n\t\t\t\t\tif (y % 2!= 0) {\r\n\t\t\t\t\t\tif (x % 2 != 0) {\r\n\t\t\t\t\t\t\tcell.setTile(new StaticTiledMapTile(reg1));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcell.setTile(new StaticTiledMapTile(reg2));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (x % 2 != 0) {\r\n\t\t\t\t\t\t\tcell.setTile(new StaticTiledMapTile(reg2));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcell.setTile(new StaticTiledMapTile(reg1));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlayer.setCell(x, y, cell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlayers.add(layer);\r\n\t\t}\r\n\t\trender = new OrthogonalTiledMapRenderer(map);\r\n\t\trender.setView(camera);\r\n\t\tcamera.translate(Gdx.graphics.getWidth() / 2,\r\n\t\t\t\tGdx.graphics.getHeight() / 2);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void dispose() {\r\n\t\trender.dispose();\r\n\t\tmap.dispose();\r\n\t}\r\n\r\n\tprivate static final float movmentspeed = 5f;\r\n\r\n\t@Override\r\n\tpublic void render() {\r\n\r\n\t\tGdx.gl.glClearColor(1, 1, 1, 1);\r\n\t\tGdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\r\n\t\tcamera.update();\r\n\t\trender.setView(camera);\r\n\t\trender.render();\r\n\r\n\t\tif (Gdx.input.isKeyPressed(Keys.LEFT)) {\r\n\t\t\tcamera.translate(-movmentspeed, 0);\r\n\t\t} else if (Gdx.input.isKeyPressed(Keys.RIGHT)) {\r\n\t\t\tcamera.translate(movmentspeed, 0);\r\n\t\t} else if (Gdx.input.isKeyPressed(Keys.UP)) {\r\n\t\t\tcamera.translate(0, movmentspeed);\r\n\t\t} else if (Gdx.input.isKeyPressed(Keys.DOWN)) {\r\n\t\t\tcamera.translate(0, -movmentspeed);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void resize(int width, int height) {\r\n\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void pause() {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void resume() {\r\n\t}\r\n    }\r\n\r\nHere is my code. I need a solution to this as fast as possible if you can...","title":"LibGdx Chess Board","body":"<p>I try to create a chess board, just the board in libGdx but for some reason, I can't.\nI still miss two other rows in the chess. I will show you my code, maybe you can find the problem in my code, if not, I can easily accept another solution.</p>\n<pre><code>package com.mygdx.game;\n\n import com.badlogic.gdx.ApplicationAdapter;\n import com.badlogic.gdx.Gdx;\n import com.badlogic.gdx.Input.Keys;\n import com.badlogic.gdx.graphics.Color;\n import com.badlogic.gdx.graphics.GL20;\n import com.badlogic.gdx.graphics.OrthographicCamera;\n import com.badlogic.gdx.graphics.Pixmap;\n import com.badlogic.gdx.graphics.Texture;\n import com.badlogic.gdx.graphics.Pixmap.Format;\n import com.badlogic.gdx.graphics.g2d.SpriteBatch;\n import com.badlogic.gdx.graphics.g2d.TextureRegion;\n import com.badlogic.gdx.maps.MapLayers;\n import com.badlogic.gdx.maps.tiled.TiledMap;\n import com.badlogic.gdx.maps.tiled.TiledMapTileLayer;\n import com.badlogic.gdx.maps.tiled.TiledMapTileLayer.Cell;\n  import com.badlogic.gdx.maps.tiled.renderers.OrthogonalTiledMapRenderer;\n  import com.badlogic.gdx.maps.tiled.tiles.StaticTiledMapTile;\n  import com.badlogic.gdx.utils.ScreenUtils;\n   import com.badlogic.gdx.utils.viewport.Viewport;\n\npublic class MyGdxGame extends ApplicationAdapter {\nSpriteBatch batch;\nTexture img;\nprivate OrthographicCamera camera;\nprivate OrthogonalTiledMapRenderer render;\nprivate final static int width = 100, height = 80, layercount = 8;\nprivate TiledMap map;\n\n@Override\npublic void create() {\n    float w = Gdx.graphics.getWidth();\n    float h = Gdx.graphics.getHeight();\n\n    camera = new OrthographicCamera(w, h);\n\n    Pixmap pixmap = new Pixmap(100, 80, Format.RGBA8888);\n    pixmap.setColor(Color.WHITE); // add your 1 color here\n    pixmap.fillRectangle(0, 0, 80, 80);\n\n    pixmap.setColor(Color.BLACK); // add your 2 color here\n    pixmap.fillRectangle(0, 0, 80, 80);\n    // the outcome is an texture with an blue left square and an red right\n    // square\n    Texture t = new Texture(pixmap);\n    TextureRegion reg1 = new TextureRegion(t, 0, 0, 80, 80);\n    TextureRegion reg2 = new TextureRegion(t, 80, 0, 80, 80);\n\n    TiledMap map = new TiledMap();\n    MapLayers layers = map.getLayers();\n    for (int l = 0; l &lt; layercount; l++) {\n        TiledMapTileLayer layer = new TiledMapTileLayer(width, height, 80,\n                80);\n        for (int x = 0; x &lt; width; x++) {\n            for (int y = 0; y &lt; height; y++) {\n                Cell cell = new Cell();\n                if (y % 2!= 0) {\n                    if (x % 2 != 0) {\n                        cell.setTile(new StaticTiledMapTile(reg1));\n                    } else {\n                        cell.setTile(new StaticTiledMapTile(reg2));\n                    }\n                } else {\n                    if (x % 2 != 0) {\n                        cell.setTile(new StaticTiledMapTile(reg2));\n                    } else {\n                        cell.setTile(new StaticTiledMapTile(reg1));\n                    }\n                }\n                layer.setCell(x, y, cell);\n            }\n        }\n        layers.add(layer);\n    }\n    render = new OrthogonalTiledMapRenderer(map);\n    render.setView(camera);\n    camera.translate(Gdx.graphics.getWidth() / 2,\n            Gdx.graphics.getHeight() / 2);\n}\n\n@Override\npublic void dispose() {\n    render.dispose();\n    map.dispose();\n}\n\nprivate static final float movmentspeed = 5f;\n\n@Override\npublic void render() {\n\n    Gdx.gl.glClearColor(1, 1, 1, 1);\n    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\n    camera.update();\n    render.setView(camera);\n    render.render();\n\n    if (Gdx.input.isKeyPressed(Keys.LEFT)) {\n        camera.translate(-movmentspeed, 0);\n    } else if (Gdx.input.isKeyPressed(Keys.RIGHT)) {\n        camera.translate(movmentspeed, 0);\n    } else if (Gdx.input.isKeyPressed(Keys.UP)) {\n        camera.translate(0, movmentspeed);\n    } else if (Gdx.input.isKeyPressed(Keys.DOWN)) {\n        camera.translate(0, -movmentspeed);\n    }\n}\n\n@Override\npublic void resize(int width, int height) {\n\n}\n\n@Override\npublic void pause() {\n}\n\n@Override\npublic void resume() {\n}\n}\n</code></pre>\n<p>Here is my code. I need a solution to this as fast as possible if you can...</p>\n"},{"tags":["java","mongodb","log4j2"],"comments":[{"owner":{"account_id":15029915,"reputation":11,"user_id":10848382,"display_name":"Spirit_wolf"},"score":0,"creation_date":1663653844,"post_id":73781440,"comment_id":130284176,"body_markdown":"log4j2 Version: 2.18.0","body":"log4j2 Version: 2.18.0"},{"owner":{"account_id":15029915,"reputation":11,"user_id":10848382,"display_name":"Spirit_wolf"},"score":0,"creation_date":1663754753,"post_id":73781440,"comment_id":130312189,"body_markdown":"log4j2 Version: 2.19.0, also have this bug..","body":"log4j2 Version: 2.19.0, also have this bug.."}],"owner":{"account_id":15029915,"reputation":11,"user_id":10848382,"display_name":"Spirit_wolf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663645570,"creation_date":1663645570,"question_id":73781440,"body_markdown":"log4j2 NoSQLAppender for MongoDB4, log4j2.xml capped config not work.MongoDb Collection status capped is false.\r\n\r\n    &lt;Appenders&gt;\r\n    &lt;NoSql name=&quot;MongoDbAppender&quot;&gt;\r\n      &lt;MongoDb4 \r\n        connection=&quot;mongodb://localhost:${sys:MongoDBTestPort:-27017}/testDb.testCollection&quot; \r\n        capped=&quot;true&quot; \r\n        collectionSize=&quot;4096&quot;/&gt;\r\n    &lt;/NoSql&gt;\r\n  &lt;/Appenders&gt;","title":"log4j2 NoSQLAppender for MongoDB4 capped config not work","body":"<p>log4j2 NoSQLAppender for MongoDB4, log4j2.xml capped config not work.MongoDb Collection status capped is false.</p>\n<pre><code>&lt;Appenders&gt;\n&lt;NoSql name=&quot;MongoDbAppender&quot;&gt;\n  &lt;MongoDb4 \n    connection=&quot;mongodb://localhost:${sys:MongoDBTestPort:-27017}/testDb.testCollection&quot; \n    capped=&quot;true&quot; \n    collectionSize=&quot;4096&quot;/&gt;\n&lt;/NoSql&gt;\n</code></pre>\n  \n"},{"tags":["java","sqlite","triggers"],"comments":[{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":2,"creation_date":1663642789,"post_id":73781162,"comment_id":130282400,"body_markdown":"You could create a trigger which writes a log entry to a file or other database table.  Then, poll that file or table from your Java code.","body":"You could create a trigger which writes a log entry to a file or other database table.  Then, poll that file or table from your Java code."}],"answers":[{"tags":[],"owner":{"account_id":13789219,"reputation":48460,"user_id":9952196,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663645223,"creation_date":1663645223,"answer_id":73781410,"question_id":73781162,"body_markdown":"You can use the [`data_version` pragma](https://sqlite.org/pragma.html#pragma_data_version) (in any language, not just Java), to see if something else has modified a database.\r\n\r\n&gt;The integer values returned by two invocations of &quot;PRAGMA data_version&quot; from the same connection will be different if changes were committed to the database by any other connection in the interim. The &quot;PRAGMA data_version&quot; value is unchanged for commits made on the same database connection.\r\n\r\nSo, basically you execute a `PRAGMA data_version` statement, which gives you a single row with an integer value that you save. Next time you want to see if something else has modified the database, do it again and compare the old and new numbers to see if they&#39;re different.\r\n\r\nIf you want more of a push notification, you might combine that with the Java NIO `WatchService` mechanism to watch for changes to the database file (And WAL journal if you&#39;re using one), and then check `data_version` when that triggers. [This SO Q&amp;A](https://stackoverflow.com/questions/23452527/watching-a-directory-for-changes-in-java) can hopefully help you get started with that if needed.","title":"Java and SQLite triggers","body":"<p>You can use the <a href=\"https://sqlite.org/pragma.html#pragma_data_version\" rel=\"nofollow noreferrer\"><code>data_version</code> pragma</a> (in any language, not just Java), to see if something else has modified a database.</p>\n<blockquote>\n<p>The integer values returned by two invocations of &quot;PRAGMA data_version&quot; from the same connection will be different if changes were committed to the database by any other connection in the interim. The &quot;PRAGMA data_version&quot; value is unchanged for commits made on the same database connection.</p>\n</blockquote>\n<p>So, basically you execute a <code>PRAGMA data_version</code> statement, which gives you a single row with an integer value that you save. Next time you want to see if something else has modified the database, do it again and compare the old and new numbers to see if they're different.</p>\n<p>If you want more of a push notification, you might combine that with the Java NIO <code>WatchService</code> mechanism to watch for changes to the database file (And WAL journal if you're using one), and then check <code>data_version</code> when that triggers. <a href=\"https://stackoverflow.com/questions/23452527/watching-a-directory-for-changes-in-java\">This SO Q&amp;A</a> can hopefully help you get started with that if needed.</p>\n"}],"owner":{"account_id":2021659,"reputation":21,"user_id":1807688,"display_name":"Joe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663645223,"creation_date":1663642547,"question_id":73781162,"body_markdown":"I have a Java program that is connected to a SQLite3 database.  \r\nI want to know if there is a way for my program to be notified if a record is added or deleted from a table (not necessarily from my program).  I was thinking triggers but can&#39;t find any examples of how to hook my Java code to a trigger.","title":"Java and SQLite triggers","body":"<p>I have a Java program that is connected to a SQLite3 database.<br />\nI want to know if there is a way for my program to be notified if a record is added or deleted from a table (not necessarily from my program).  I was thinking triggers but can't find any examples of how to hook my Java code to a trigger.</p>\n"},{"tags":["java","string","file",".class-file"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1477465575,"post_id":40255749,"comment_id":67773069,"body_markdown":"Java classes compile to byteCode - bytes are not necessarily convertable to Strings","body":"Java classes compile to byteCode - bytes are not necessarily convertable to Strings"},{"owner":{"account_id":3920628,"reputation":1259,"user_id":3247467,"display_name":"kjsebastian"},"score":1,"creation_date":1477465592,"post_id":40255749,"comment_id":67773080,"body_markdown":"`.class` files are compiled code. You might want to change to read `.java` files instead","body":"<code>.class</code> files are compiled code. You might want to change to read <code>.java</code> files instead"},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1477465600,"post_id":40255749,"comment_id":67773083,"body_markdown":"Your expectation is wrong. The &quot;.class&quot; file does not contain the java source code. You can see that opening one with a simple text editor. Outside that, you should be able to read it in as string like any other plain text file.","body":"Your expectation is wrong. The &quot;.class&quot; file does not contain the java source code. You can see that opening one with a simple text editor. Outside that, you should be able to read it in as string like any other plain text file."},{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":0,"creation_date":1477465616,"post_id":40255749,"comment_id":67773090,"body_markdown":"open a `.class` file with notepad and see what you get. It won&#39;t be what you expect","body":"open a <code>.class</code> file with notepad and see what you get. It won&#39;t be what you expect"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1477465760,"post_id":40255749,"comment_id":67773164,"body_markdown":"The requirement is that you spent more time studying your requirements: like doing some research to **understand** them in the first place. So that you dont need other people to point the obvious to you.","body":"The requirement is that you spent more time studying your requirements: like doing some research to <b>understand</b> them in the first place. So that you dont need other people to point the obvious to you."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1477466603,"creation_date":1477465623,"answer_id":40255802,"question_id":40255749,"body_markdown":"&gt; Please Let me know what are the changes I need to take care so that I read it as a simple text file.\r\n\r\nWhat you are trying to do is not possible.  The &quot;.class&quot; file contains bytecodes not source code, and bytecodes cannot be turned back into the original Java source code.\r\n\r\nThe best you can do is use a decompiler.  But beware:\r\n\r\n  - a decompiler won&#39;t give you the original source code back, and \r\n  - in many case a decompiler will give you stuff that is unreadable or uncompilable Java code.\r\n\r\nAnother alternative would be to use a disassembler, to get the code in format like the output of the `javap` command.\r\n\r\n---------------------\r\n\r\nOn the other hand, if you simply want to read a &quot;.java&quot; file in Java, your code will do that just fine.  The only wrinkle might be the character encoding used in the source code file, but most Java source code is encoded in ASCII ... \r\n\r\n","title":"How to read java class file as a java string?","body":"<blockquote>\n  <p>Please Let me know what are the changes I need to take care so that I read it as a simple text file.</p>\n</blockquote>\n\n<p>What you are trying to do is not possible.  The \".class\" file contains bytecodes not source code, and bytecodes cannot be turned back into the original Java source code.</p>\n\n<p>The best you can do is use a decompiler.  But beware:</p>\n\n<ul>\n<li>a decompiler won't give you the original source code back, and </li>\n<li>in many case a decompiler will give you stuff that is unreadable or uncompilable Java code.</li>\n</ul>\n\n<p>Another alternative would be to use a disassembler, to get the code in format like the output of the <code>javap</code> command.</p>\n\n<hr>\n\n<p>On the other hand, if you simply want to read a \".java\" file in Java, your code will do that just fine.  The only wrinkle might be the character encoding used in the source code file, but most Java source code is encoded in ASCII ... </p>\n"},{"tags":[],"owner":{"account_id":19600355,"reputation":1,"user_id":14345345,"display_name":"Tian90Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663645212,"creation_date":1663645098,"answer_id":73781398,"question_id":40255749,"body_markdown":"The [cfr][1] library supports reading &#39;class&#39; files into strings at runtime\r\n\r\n\r\n  [1]: https://github.com/leibnitz27/cfr","title":"How to read java class file as a java string?","body":"<p>The <a href=\"https://github.com/leibnitz27/cfr\" rel=\"nofollow noreferrer\">cfr</a> library supports reading 'class' files into strings at runtime</p>\n"}],"owner":{"account_id":3915346,"reputation":833,"user_id":3711029,"accept_rate":57,"display_name":"vjnan369"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3558,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1663645212,"creation_date":1477465427,"question_id":40255749,"body_markdown":"I have a requirement in which I need to read java class file as a string in java.\r\n\r\nmy code is\r\n\r\n    String path = &quot;C:/java/MainClass.class&quot;;\r\n    String content = new String(Files.readAllBytes(Paths.get(path)));\r\n\r\nWhen ever I print content variable, I am expecting the code to work as it works for simple text file, my expected output is something like this\r\n\r\n&gt; public class MainClass { public static void main(String[] args) {\r\n&gt; System.out.print(&quot;This is a test file&quot;); } }\r\n\r\nIn future I also want to read files in other formats as a string for ex: .cs, .py, .config\r\n\r\nPlease Let me know what are the changes I need to take care so that I read it as a simple text file.\r\n","title":"How to read java class file as a java string?","body":"<p>I have a requirement in which I need to read java class file as a string in java.</p>\n\n<p>my code is</p>\n\n<pre><code>String path = \"C:/java/MainClass.class\";\nString content = new String(Files.readAllBytes(Paths.get(path)));\n</code></pre>\n\n<p>When ever I print content variable, I am expecting the code to work as it works for simple text file, my expected output is something like this</p>\n\n<blockquote>\n  <p>public class MainClass { public static void main(String[] args) {\n  System.out.print(\"This is a test file\"); } }</p>\n</blockquote>\n\n<p>In future I also want to read files in other formats as a string for ex: .cs, .py, .config</p>\n\n<p>Please Let me know what are the changes I need to take care so that I read it as a simple text file.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1663660013,"post_id":73781407,"comment_id":130285945,"body_markdown":"With `ModelMapper` perhaps? https://www.baeldung.com/java-modelmapper","body":"With <code>ModelMapper</code> perhaps? <a href=\"https://www.baeldung.com/java-modelmapper\" rel=\"nofollow noreferrer\">baeldung.com/java-modelmapper</a>"},{"owner":{"account_id":9051618,"reputation":3658,"user_id":6741482,"accept_rate":95,"display_name":"pstatix"},"score":0,"creation_date":1663702213,"post_id":73781407,"comment_id":130301041,"body_markdown":"@slindenau yes this would work, however the package is not a part of our dependency chain and I would like to avoid adding any in for something like this. Is there a native Java way or a Lomok-ism to support this?","body":"@slindenau yes this would work, however the package is not a part of our dependency chain and I would like to avoid adding any in for something like this. Is there a native Java way or a Lomok-ism to support this?"},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1663932937,"post_id":73781407,"comment_id":130361235,"body_markdown":"Perhaps, but i don&#39;t know about it. Perhaps with a bit of manual work you could match properties with this? https://docs.oracle.com/javase/8/docs/api/java/beans/Introspector.html","body":"Perhaps, but i don&#39;t know about it. Perhaps with a bit of manual work you could match properties with this? <a href=\"https://docs.oracle.com/javase/8/docs/api/java/beans/Introspector.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/beans/Introspector.ht&zwnj;&#8203;ml</a>"}],"owner":{"account_id":9051618,"reputation":3658,"user_id":6741482,"accept_rate":95,"display_name":"pstatix"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663645184,"creation_date":1663645184,"question_id":73781407,"body_markdown":"Newer Java user, finding myself doing something I&#39;d like to do cleaner.\r\n\r\nSuppose I have a class that get&#39;s updated through a call `update(final Parameters params)`:\r\n\r\n    @Data // using lombok\r\n    class Updatable {\r\n        public int x = 0;\r\n        public String a = &#39;hello&#39;\r\n       \r\n        // some ctors/methods\r\n    \r\n        public void update(final Parameters params) {\r\n            x = params.getX();\r\n            a = params.getA();\r\n        }\r\n    }\r\n\r\nWhere there `Parameters ` POJO is simply:\r\n\r\n    @Value\r\n    class Parameters {\r\n        int x;\r\n        String a;\r\n    }\r\n\r\nSo the fields of the POJO will always (by convention, not contract). Is there a way to avoid calling the getter for each field an simply map the fields of the POJO to the corresponding fields of the class being updated?\r\n\r\n","title":"Java - Update object fields with matching fields of POJO","body":"<p>Newer Java user, finding myself doing something I'd like to do cleaner.</p>\n<p>Suppose I have a class that get's updated through a call <code>update(final Parameters params)</code>:</p>\n<pre><code>@Data // using lombok\nclass Updatable {\n    public int x = 0;\n    public String a = 'hello'\n   \n    // some ctors/methods\n\n    public void update(final Parameters params) {\n        x = params.getX();\n        a = params.getA();\n    }\n}\n</code></pre>\n<p>Where there <code>Parameters </code> POJO is simply:</p>\n<pre><code>@Value\nclass Parameters {\n    int x;\n    String a;\n}\n</code></pre>\n<p>So the fields of the POJO will always (by convention, not contract). Is there a way to avoid calling the getter for each field an simply map the fields of the POJO to the corresponding fields of the class being updated?</p>\n"},{"tags":["java","generics","reflection"],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":2,"up_vote_count":106,"is_accepted":true,"score":104,"last_activity_date":1496332512,"creation_date":1227039849,"answer_id":300013,"question_id":299998,"body_markdown":"After type erasure, all that is known about `T` is that it is some subclass of `Object`. You need to specify some factory to create instances of `T`.\r\n\r\nOne approach could use a [`Supplier&lt;T&gt;`][1]:\r\n\r\n    class MyClass&lt;T&gt; {\r\n    \r\n      private final Supplier&lt;? extends T&gt; ctor;\r\n\r\n      private T field;\r\n    \r\n      MyClass(Supplier&lt;? extends T&gt; ctor) {\r\n        this.ctor = Objects.requireNonNull(ctor);\r\n      }\r\n    \r\n      public void myMethod() {\r\n        field = ctor.get();\r\n      }\r\n    \r\n    }\r\n\r\nUsage might look like this:\r\n\r\n    MyClass&lt;StringBuilder&gt; it = new MyClass&lt;&gt;(StringBuilder::new);\r\n\r\nAlternatively, you can provide a `Class&lt;T&gt;` object, and then use reflection. \r\n\r\n    class MyClass&lt;T&gt; {\r\n    \r\n      private final Constructor&lt;? extends T&gt; ctor;\r\n    \r\n      private T field;\r\n    \r\n      MyClass(Class&lt;? extends T&gt; impl) throws NoSuchMethodException {\r\n        this.ctor = impl.getConstructor();\r\n      }\r\n    \r\n      public void myMethod() throws Exception {\r\n        field = ctor.newInstance();\r\n      }\r\n    \r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html","title":"Instantiating object of type parameter","body":"<p>After type erasure, all that is known about <code>T</code> is that it is some subclass of <code>Object</code>. You need to specify some factory to create instances of <code>T</code>.</p>\n\n<p>One approach could use a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html\" rel=\"noreferrer\"><code>Supplier&lt;T&gt;</code></a>:</p>\n\n<pre><code>class MyClass&lt;T&gt; {\n\n  private final Supplier&lt;? extends T&gt; ctor;\n\n  private T field;\n\n  MyClass(Supplier&lt;? extends T&gt; ctor) {\n    this.ctor = Objects.requireNonNull(ctor);\n  }\n\n  public void myMethod() {\n    field = ctor.get();\n  }\n\n}\n</code></pre>\n\n<p>Usage might look like this:</p>\n\n<pre><code>MyClass&lt;StringBuilder&gt; it = new MyClass&lt;&gt;(StringBuilder::new);\n</code></pre>\n\n<p>Alternatively, you can provide a <code>Class&lt;T&gt;</code> object, and then use reflection. </p>\n\n<pre><code>class MyClass&lt;T&gt; {\n\n  private final Constructor&lt;? extends T&gt; ctor;\n\n  private T field;\n\n  MyClass(Class&lt;? extends T&gt; impl) throws NoSuchMethodException {\n    this.ctor = impl.getConstructor();\n  }\n\n  public void myMethod() throws Exception {\n    field = ctor.newInstance();\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12111,"reputation":75875,"user_id":23691,"accept_rate":71,"display_name":"krosenvold"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1227041418,"creation_date":1227041418,"answer_id":300096,"question_id":299998,"body_markdown":"If you&#39;re willing to subclass you can avoid erasure as well, check out\r\nhttp://www.artima.com/weblogs/viewpost.jsp?thread=208860\r\n","title":"Instantiating object of type parameter","body":"<p>If you're willing to subclass you can avoid erasure as well, check out\n<a href=\"http://www.artima.com/weblogs/viewpost.jsp?thread=208860\" rel=\"nofollow noreferrer\">http://www.artima.com/weblogs/viewpost.jsp?thread=208860</a></p>\n"},{"tags":[],"owner":{"account_id":17346,"reputation":256,"user_id":38739,"display_name":"Dan Hodge"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1431348271,"creation_date":1227050437,"answer_id":300526,"question_id":299998,"body_markdown":"This may be more heavyweight than what you&#39;re looking for, but it will also work. Note that if you take this approach, it would make more sense to inject the factory into MyClass when it is constructed instead of passing it into your method each time it is called.\r\n\r\n    interface MyFactory&lt;T&gt; \r\n    {\r\n        T newObject();\r\n    }\r\n\r\n    class MyClass&lt;T&gt; \r\n    {\r\n        T field;\r\n        public void myMethod(MyFactory&lt;T&gt; factory)\r\n        {\r\n           field = factory.newObject()\r\n        }\r\n    }\r\n","title":"Instantiating object of type parameter","body":"<p>This may be more heavyweight than what you're looking for, but it will also work. Note that if you take this approach, it would make more sense to inject the factory into MyClass when it is constructed instead of passing it into your method each time it is called.</p>\n\n<pre><code>interface MyFactory&lt;T&gt; \n{\n    T newObject();\n}\n\nclass MyClass&lt;T&gt; \n{\n    T field;\n    public void myMethod(MyFactory&lt;T&gt; factory)\n    {\n       field = factory.newObject()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"InverseFalcon"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1227132301,"creation_date":1227132301,"answer_id":303553,"question_id":299998,"body_markdown":"Another non-reflective approach is to use a hybrid Builder / Abstract Factory pattern.\r\n\r\nIn Effective Java, Joshua Bloch goes over the Builder pattern in detail, and advocates a generic Builder interface:\r\n\r\n    public interface Builder&lt;T&gt; {\r\n      public T build();\r\n    }\r\n\r\nConcrete builders can implement this interface, and outside classes can use the concrete builder to configure the Builder as required.  The builder can be passed to MyClass as a `Builder&lt;T&gt;`.  \r\n\r\nUsing this pattern, you can get new instances of `T`, even if `T` has constructor parameters or requires additional configuration.  Of course, you&#39;ll need some way to pass the Builder into MyClass.  If you can&#39;t pass anything into MyClass, then Builder and Abstract Factory are out.","title":"Instantiating object of type parameter","body":"<p>Another non-reflective approach is to use a hybrid Builder / Abstract Factory pattern.</p>\n\n<p>In Effective Java, Joshua Bloch goes over the Builder pattern in detail, and advocates a generic Builder interface:</p>\n\n<pre><code>public interface Builder&lt;T&gt; {\n  public T build();\n}\n</code></pre>\n\n<p>Concrete builders can implement this interface, and outside classes can use the concrete builder to configure the Builder as required.  The builder can be passed to MyClass as a <code>Builder&lt;T&gt;</code>.  </p>\n\n<p>Using this pattern, you can get new instances of <code>T</code>, even if <code>T</code> has constructor parameters or requires additional configuration.  Of course, you'll need some way to pass the Builder into MyClass.  If you can't pass anything into MyClass, then Builder and Abstract Factory are out.</p>\n"},{"tags":[],"owner":{"account_id":1585528,"reputation":79,"user_id":1469995,"display_name":"Kevendra"},"down_vote_count":6,"up_vote_count":2,"is_accepted":false,"score":-4,"last_activity_date":1511000532,"creation_date":1511000532,"answer_id":47364949,"question_id":299998,"body_markdown":"Class&lt;T&gt; classOfT\r\n\r\n            try {\r\n                t = classOfT.newInstance();//new T(); NOTE: type parameter T cannot be instantiated directly\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }","title":"Instantiating object of type parameter","body":"<p>Class classOfT</p>\n\n<pre><code>        try {\n            t = classOfT.newInstance();//new T(); NOTE: type parameter T cannot be instantiated directly\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15958446,"reputation":195,"user_id":11516148,"display_name":"Zakir"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1608179674,"creation_date":1608179674,"answer_id":65334783,"question_id":299998,"body_markdown":"One option would be to cast it with Object\r\n\r\n\r\n    {field = (T) new Object();}\r\n\r\n\r\nfield will initially be type Object, but then it will cast down to type T. This is an ugly one because reducing casting to zero is what the goal should be for object initializations. But I think this will work.\r\n","title":"Instantiating object of type parameter","body":"<p>One option would be to cast it with Object</p>\n<pre><code>{field = (T) new Object();}\n</code></pre>\n<p>field will initially be type Object, but then it will cast down to type T. This is an ugly one because reducing casting to zero is what the goal should be for object initializations. But I think this will work.</p>\n"},{"tags":[],"owner":{"display_name":"user4910279"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1629758773,"creation_date":1629756722,"answer_id":68899592,"question_id":299998,"body_markdown":"You can get the class object of type `T` without passing any arguments.\r\n\r\nTry this.\r\n\r\n    static class MyClass&lt;T&gt; {\r\n        Class&lt;?&gt; clazz;\r\n\r\n        @SafeVarargs\r\n        public MyClass(T... dummy) {\r\n            if (dummy.length &gt; 0)\r\n                throw new IllegalArgumentException(&quot;Do not specify arguments&quot;);\r\n            clazz = dummy.getClass().componentType();\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;MyClass&lt;T = &quot; + clazz.getName() + &quot;&gt;&quot;;\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        MyClass&lt;String&gt; s = new MyClass&lt;&gt;();\r\n        System.out.println(s);\r\n        Object i = new MyClass&lt;Integer&gt;();\r\n        System.out.println(i);\r\n    }\r\n\r\noutput:\r\n\r\n    MyClass&lt;T = java.lang.String&gt;\r\n    MyClass&lt;T = java.lang.Integer&gt;\r\n\r\nYou can instantiate an object of type parameter `T` like this.\r\n\r\n    clazz.getConstructor().newInstance();\r\n\r\n","title":"Instantiating object of type parameter","body":"<p>You can get the class object of type <code>T</code> without passing any arguments.</p>\n<p>Try this.</p>\n<pre><code>static class MyClass&lt;T&gt; {\n    Class&lt;?&gt; clazz;\n\n    @SafeVarargs\n    public MyClass(T... dummy) {\n        if (dummy.length &gt; 0)\n            throw new IllegalArgumentException(&quot;Do not specify arguments&quot;);\n        clazz = dummy.getClass().componentType();\n    }\n\n    @Override\n    public String toString() {\n        return &quot;MyClass&lt;T = &quot; + clazz.getName() + &quot;&gt;&quot;;\n    }\n}\n\npublic static void main(String[] args) {\n    MyClass&lt;String&gt; s = new MyClass&lt;&gt;();\n    System.out.println(s);\n    Object i = new MyClass&lt;Integer&gt;();\n    System.out.println(i);\n}\n</code></pre>\n<p>output:</p>\n<pre><code>MyClass&lt;T = java.lang.String&gt;\nMyClass&lt;T = java.lang.Integer&gt;\n</code></pre>\n<p>You can instantiate an object of type parameter <code>T</code> like this.</p>\n<pre><code>clazz.getConstructor().newInstance();\n</code></pre>\n"}],"owner":{"account_id":16763,"reputation":3228,"user_id":36858,"accept_rate":67,"display_name":"Mercurious"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97224,"favorite_count":0,"down_vote_count":0,"up_vote_count":118,"accepted_answer_id":300013,"answer_count":7,"score":118,"last_activity_date":1663644822,"creation_date":1227039605,"question_id":299998,"body_markdown":"I have got a template class as follows:\r\n\r\n    class MyClass&lt;T&gt;\r\n    {\r\n        T field;\r\n        public void myMethod()\r\n        {\r\n           field = new T(); // gives compiler error\r\n        }\r\n    }\r\n\r\nHow do I create a new instance of T in my class?","title":"Instantiating object of type parameter","body":"<p>I have got a template class as follows:</p>\n\n<pre><code>class MyClass&lt;T&gt;\n{\n    T field;\n    public void myMethod()\n    {\n       field = new T(); // gives compiler error\n    }\n}\n</code></pre>\n\n<p>How do I create a new instance of T in my class?</p>\n"},{"tags":["java","class","generics","reflection"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1648227729,"post_id":71620574,"comment_id":126579373,"body_markdown":"What do you actually want to retrieve? The `E` in `Consumer&lt;E&gt;` is not representable as a `Class`. You should be able to get it as a `TypeVariable` though.","body":"What do you actually want to retrieve? The <code>E</code> in <code>Consumer&lt;E&gt;</code> is not representable as a <code>Class</code>. You should be able to get it as a <code>TypeVariable</code> though."},{"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"score":0,"creation_date":1648227867,"post_id":71620574,"comment_id":126579402,"body_markdown":"The `E` is what I want to retrieve. If thought it was possible to be represented as a `Class`, [this answer](https://stackoverflow.com/questions/1901164/get-type-of-a-generic-parameter-in-java-with-reflection/1901275#1901275) makes it seem like that. \n\nHow would I obtain this `TypeVariable`?","body":"The <code>E</code> is what I want to retrieve. If thought it was possible to be represented as a <code>Class</code>, <a href=\"https://stackoverflow.com/questions/1901164/get-type-of-a-generic-parameter-in-java-with-reflection/1901275#1901275\">this answer</a> makes it seem like that.   How would I obtain this <code>TypeVariable</code>?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1648227868,"post_id":71620574,"comment_id":126579403,"body_markdown":"You should be able to also get the bound of `E` - `Exception` - as an instance of `Class`. Is that what you want to do?","body":"You should be able to also get the bound of <code>E</code> - <code>Exception</code> - as an instance of <code>Class</code>. Is that what you want to do?"},{"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"score":0,"creation_date":1648227904,"post_id":71620574,"comment_id":126579422,"body_markdown":"I need the specific subclass of `Exception` this `E` represents","body":"I need the specific subclass of <code>Exception</code> this <code>E</code> represents"},{"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"score":0,"creation_date":1648228505,"post_id":71620574,"comment_id":126579645,"body_markdown":"@Sweeper I tried this as well and the cast failed there as well, because `Type` was an instance of `Class` instead of `ParameterizedType`, the same as with the other &quot;solution&quot;","body":"@Sweeper I tried this as well and the cast failed there as well, because <code>Type</code> was an instance of <code>Class</code> instead of <code>ParameterizedType</code>, the same as with the other &quot;solution&quot;"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1648228788,"post_id":71620574,"comment_id":126579742,"body_markdown":"Oh I see. It appears that as an implementation detail, javac doesn&#39;t emit the type parameter metadata when creating a lambda instance with invokedynamic... If the caller does `onCatch(new Consumer&lt;RuntimeException&gt;() { ... })`, then getting the generic interface would work correctly.","body":"Oh I see. It appears that as an implementation detail, javac doesn&#39;t emit the type parameter metadata when creating a lambda instance with invokedynamic... If the caller does <code>onCatch(new Consumer&lt;RuntimeException&gt;() { ... })</code>, then getting the generic interface would work correctly."},{"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"score":0,"creation_date":1648228867,"post_id":71620574,"comment_id":126579770,"body_markdown":"So when using a lambda literal without an explicit type definition this will not work in any way? This already helps me out a lot, thanks!","body":"So when using a lambda literal without an explicit type definition this will not work in any way? This already helps me out a lot, thanks!"}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649875763,"creation_date":1648230972,"answer_id":71621244,"question_id":71620574,"body_markdown":"The reason why\r\n\r\n```\r\nClass&lt;T&gt; persistentClass = (Class&lt;T&gt;)\r\n   ((ParameterizedType)getClass().getGenericSuperclass())\r\n      .getActualTypeArguments()[0];\r\n```\r\n\r\nworks was because the superclass of `this` happens to be a class with a parameterised type as its superclass. Therefore you can get the actual type arguments of that type. The type parameters of superclasses are stored as metadata in the class file if you write them in the source file.\r\n\r\nHowever, in your case, whatever is passed to the `onCatch` parameter is not going to have a superclass of `Consumer&lt;T&gt;`. After all, `Consumer&lt;T&gt;` is not a class! You need to use `getGenericInterfaces` and find the one that has the name that starts with `java.util.function.Consumer`.\r\n\r\n    System.out.println(\r\n        // I&#39;ve assumed the Consumer interface is the first one, to keep it brief\r\n        ((ParameterizedType)onCatch.getClass().getGenericInterfaces()[0])\r\n            .getActualTypeArguments()[0]\r\n     );\r\n\r\nThis would work if the caller calls `onCatch` like this:\r\n\r\n    onCatch(new Consumer&lt;RuntimeException&gt;() {\r\n        @Override\r\n        public void accept(RuntimeException e) {\r\n\r\n        }\r\n    });\r\n\r\nThe anonymous class will implement `Consumer&lt;RuntimeException&gt;`, and this information will be written to the class file representing the anonymous class.\r\n\r\nHowever, if you use a lambda:\r\n\r\n    onCatch((RuntimeException e) -&gt; {});\r\n\r\nThen only a method like this is generated in the same class as the caller:\r\n\r\n```\r\nprivate static void lambda$caller$0(RuntimeException e) {\r\n\r\n}\r\n```\r\n\r\nand at runtime, [`invokedynamic` is used to create an instance that implements `Consumer`][2], and this is the bad news: the type parameter `RuntimeException` is not part of the generated class for this instance, for whatever reason.\r\n\r\nThe only way you can find `RuntimeException` now then, is if you somehow know who the caller is, and find the `lambda$caller$0` method, and look at its parameter.\r\n\r\nThat said, everything I&#39;ve wrote so far is pretty much all implementation detail, and I wouldn&#39;t use any of that in production code. I would say you should just add a `Class&lt;E&gt;` parameter:\r\n\r\n    onCatch(RuntimeException.class, e -&gt; {});\r\n\r\nIt doesn&#39;t look that different on the caller&#39;s side anyway.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/1901164/5133585\r\n  [2]: https://stackoverflow.com/questions/30002380/why-are-java-8-lambdas-invoked-using-invokedynamic","title":"Get Class-object representation of generic parameter in Java","body":"<p>The reason why</p>\n<pre><code>Class&lt;T&gt; persistentClass = (Class&lt;T&gt;)\n   ((ParameterizedType)getClass().getGenericSuperclass())\n      .getActualTypeArguments()[0];\n</code></pre>\n<p>works was because the superclass of <code>this</code> happens to be a class with a parameterised type as its superclass. Therefore you can get the actual type arguments of that type. The type parameters of superclasses are stored as metadata in the class file if you write them in the source file.</p>\n<p>However, in your case, whatever is passed to the <code>onCatch</code> parameter is not going to have a superclass of <code>Consumer&lt;T&gt;</code>. After all, <code>Consumer&lt;T&gt;</code> is not a class! You need to use <code>getGenericInterfaces</code> and find the one that has the name that starts with <code>java.util.function.Consumer</code>.</p>\n<pre><code>System.out.println(\n    // I've assumed the Consumer interface is the first one, to keep it brief\n    ((ParameterizedType)onCatch.getClass().getGenericInterfaces()[0])\n        .getActualTypeArguments()[0]\n );\n</code></pre>\n<p>This would work if the caller calls <code>onCatch</code> like this:</p>\n<pre><code>onCatch(new Consumer&lt;RuntimeException&gt;() {\n    @Override\n    public void accept(RuntimeException e) {\n\n    }\n});\n</code></pre>\n<p>The anonymous class will implement <code>Consumer&lt;RuntimeException&gt;</code>, and this information will be written to the class file representing the anonymous class.</p>\n<p>However, if you use a lambda:</p>\n<pre><code>onCatch((RuntimeException e) -&gt; {});\n</code></pre>\n<p>Then only a method like this is generated in the same class as the caller:</p>\n<pre><code>private static void lambda$caller$0(RuntimeException e) {\n\n}\n</code></pre>\n<p>and at runtime, <a href=\"https://stackoverflow.com/questions/30002380/why-are-java-8-lambdas-invoked-using-invokedynamic\"><code>invokedynamic</code> is used to create an instance that implements <code>Consumer</code></a>, and this is the bad news: the type parameter <code>RuntimeException</code> is not part of the generated class for this instance, for whatever reason.</p>\n<p>The only way you can find <code>RuntimeException</code> now then, is if you somehow know who the caller is, and find the <code>lambda$caller$0</code> method, and look at its parameter.</p>\n<p>That said, everything I've wrote so far is pretty much all implementation detail, and I wouldn't use any of that in production code. I would say you should just add a <code>Class&lt;E&gt;</code> parameter:</p>\n<pre><code>onCatch(RuntimeException.class, e -&gt; {});\n</code></pre>\n<p>It doesn't look that different on the caller's side anyway.</p>\n"},{"tags":[],"owner":{"account_id":23797652,"reputation":21,"user_id":17808289,"display_name":"judekeyser"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648234354,"creation_date":1648234354,"answer_id":71621824,"question_id":71620574,"body_markdown":"(not a good enough reputation to answer, but:)\r\n\r\nI think it must be said that it&#39;s not only a &quot;first-order&quot; inheritance issue. As the following example shows:\r\n\r\n```\r\nabstract class Lifted&lt;T&gt; implements Consumer&lt;T&gt; { public abstract void accept(T x); }\r\n\r\n&lt;T&gt; Consumer&lt;T&gt; lift(Consumer&lt;T&gt; f) { return new Lifted&lt;T&gt;() { @Override public void accept(T x) { f.accept(x);}};}\r\n\r\nConsumer&lt;String&gt; g = System.out::println;\r\nConsumer&lt;String&gt; c = lift(g);\r\n\r\n((java.lang.reflect.ParameterizedType) c.getClass().getGenericSuperclass()).getActualTypeArguments();\r\n```\r\n\r\nThe above example will print `Type[1] { T }` and doesn&#39;t contain any reference to the runtime-type `String`. \r\n\r\nOn JShell (haven&#39;t investigated a &quot;standard&quot; runtime), the type of `g` is a lambda whose direct super type is `Object`. I haven&#39;t found type parameters on it.","title":"Get Class-object representation of generic parameter in Java","body":"<p>(not a good enough reputation to answer, but:)</p>\n<p>I think it must be said that it's not only a &quot;first-order&quot; inheritance issue. As the following example shows:</p>\n<pre><code>abstract class Lifted&lt;T&gt; implements Consumer&lt;T&gt; { public abstract void accept(T x); }\n\n&lt;T&gt; Consumer&lt;T&gt; lift(Consumer&lt;T&gt; f) { return new Lifted&lt;T&gt;() { @Override public void accept(T x) { f.accept(x);}};}\n\nConsumer&lt;String&gt; g = System.out::println;\nConsumer&lt;String&gt; c = lift(g);\n\n((java.lang.reflect.ParameterizedType) c.getClass().getGenericSuperclass()).getActualTypeArguments();\n</code></pre>\n<p>The above example will print <code>Type[1] { T }</code> and doesn't contain any reference to the runtime-type <code>String</code>.</p>\n<p>On JShell (haven't investigated a &quot;standard&quot; runtime), the type of <code>g</code> is a lambda whose direct super type is <code>Object</code>. I haven't found type parameters on it.</p>\n"}],"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1751,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71621244,"answer_count":2,"score":0,"last_activity_date":1663644576,"creation_date":1648227477,"question_id":71620574,"body_markdown":"I am trying to retrieve the `Class&lt;?&gt;` representation of a type parameter at runtime like this:\r\n```java\r\npublic &lt;E extends Exception&gt; Try&lt;T&gt; onCatch (Consumer&lt;E&gt; onCatch) { \r\n    // retrieve `Class&lt;E&gt;`\r\n}\r\n```\r\nWhile normally it is not possible to retrieve the types at runtime because of type erasure, due to reflection utilities and meta-data stored about generics in bytecode it *should* be possible like seen in [this answer](https://stackoverflow.com/a/1901275/16720064) to the [same question](https://stackoverflow.com/q/1901164/16720064) I have.\r\n\r\n\r\nThe accepted answer looks the following\r\n```java\r\nClass&lt;T&gt; persistentClass = (Class&lt;T&gt;)\r\n   ((ParameterizedType)getClass().getGenericSuperclass())\r\n      .getActualTypeArguments()[0];\r\n```\r\nbut does not work for me, due to `.getActualTypeArguments()[0]` not being an instance of `ParameterizedType` but `Class` and thus failing the cast.\r\n\r\nIs there any way to reliably do this? I know I can manually pass a `Class&lt;E&gt;` reference to the method but due to this being a library being able to just use the generic type would be much more convenient.","title":"Get Class-object representation of generic parameter in Java","body":"<p>I am trying to retrieve the <code>Class&lt;?&gt;</code> representation of a type parameter at runtime like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public &lt;E extends Exception&gt; Try&lt;T&gt; onCatch (Consumer&lt;E&gt; onCatch) { \n    // retrieve `Class&lt;E&gt;`\n}\n</code></pre>\n<p>While normally it is not possible to retrieve the types at runtime because of type erasure, due to reflection utilities and meta-data stored about generics in bytecode it <em>should</em> be possible like seen in <a href=\"https://stackoverflow.com/a/1901275/16720064\">this answer</a> to the <a href=\"https://stackoverflow.com/q/1901164/16720064\">same question</a> I have.</p>\n<p>The accepted answer looks the following</p>\n<pre class=\"lang-java prettyprint-override\"><code>Class&lt;T&gt; persistentClass = (Class&lt;T&gt;)\n   ((ParameterizedType)getClass().getGenericSuperclass())\n      .getActualTypeArguments()[0];\n</code></pre>\n<p>but does not work for me, due to <code>.getActualTypeArguments()[0]</code> not being an instance of <code>ParameterizedType</code> but <code>Class</code> and thus failing the cast.</p>\n<p>Is there any way to reliably do this? I know I can manually pass a <code>Class&lt;E&gt;</code> reference to the method but due to this being a library being able to just use the generic type would be much more convenient.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1663633816,"post_id":73780360,"comment_id":130281150,"body_markdown":"Does it work at runtime?","body":"Does it work at runtime?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663638471,"post_id":73780360,"comment_id":130281774,"body_markdown":"I don&#39;t see a guarantee that everything in `objects` is actually a `String`. You could use the no-argument constructor for `roleList`, or the constructor specifying an initial capacity.   Then, move elements of `objects` using a `for` loop, checking each time the element is actually a `String` before casting it and adding it to `roleList`.","body":"I don&#39;t see a guarantee that everything in <code>objects</code> is actually a <code>String</code>. You could use the no-argument constructor for <code>roleList</code>, or the constructor specifying an initial capacity.   Then, move elements of <code>objects</code> using a <code>for</code> loop, checking each time the element is actually a <code>String</code> before casting it and adding it to <code>roleList</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663777371,"post_id":73780360,"comment_id":130320890,"body_markdown":"Uh, Is the &#39;7&#39; in &#39;objects[7]&#39; a typo made when posting the question,  or is that actually part of your code?  In your code, that would result in an attempt to cast a single `java.lang.Object` to a `java.util.Collection&lt;java.lang.String&gt;&#39;.","body":"Uh, Is the &#39;7&#39; in &#39;objects[7]&#39; a typo made when posting the question,  or is that actually part of your code?  In your code, that would result in an attempt to cast a single <code>java.lang.Object</code> to a `java.util.Collection&lt;java.lang.String&gt;&#39;."},{"owner":{"account_id":17654983,"reputation":115,"user_id":12814777,"display_name":"dataman"},"score":0,"creation_date":1663874106,"post_id":73780360,"comment_id":130348206,"body_markdown":"The [7] is not a typo, since it is an array.. although for more simplicity I could&#39;ve made that a [0]","body":"The [7] is not a typo, since it is an array.. although for more simplicity I could&#39;ve made that a [0]"}],"answers":[{"tags":[],"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1663643990,"creation_date":1663643059,"answer_id":73781200,"question_id":73780360,"body_markdown":"You need to create Custom Types so that your java application can map postgresql data type into your application, I assume you are using hibernate in this scenario so here is a reference [link][1] for further details.\r\n\r\nAnd here other link reference you can look \r\n\r\n[Using Java arrays to insert, retrieve, &amp; update PostgreSQL arrays][2]\r\n\r\n[PostgreSQL Array][3]\r\n\r\n\r\n  [1]: https://www.baeldung.com/hibernate-custom-types\r\n  [2]: https://www.enterprisedb.com/blog/using-java-arrays-insert-retrieve-update-postgresql-arrays\r\n  [3]: https://www.postgresqltutorial.com/postgresql-tutorial/postgresql-array/","title":"unchecked cast warning on Collection","body":"<p>You need to create Custom Types so that your java application can map postgresql data type into your application, I assume you are using hibernate in this scenario so here is a reference <a href=\"https://www.baeldung.com/hibernate-custom-types\" rel=\"nofollow noreferrer\">link</a> for further details.</p>\n<p>And here other link reference you can look</p>\n<p><a href=\"https://www.enterprisedb.com/blog/using-java-arrays-insert-retrieve-update-postgresql-arrays\" rel=\"nofollow noreferrer\">Using Java arrays to insert, retrieve, &amp; update PostgreSQL arrays</a></p>\n<p><a href=\"https://www.postgresqltutorial.com/postgresql-tutorial/postgresql-array/\" rel=\"nofollow noreferrer\">PostgreSQL Array</a></p>\n"}],"owner":{"account_id":17654983,"reputation":115,"user_id":12814777,"display_name":"dataman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663643990,"creation_date":1663632161,"question_id":73780360,"body_markdown":"I am mapping a postgres array_agg value to a list, but I&#39;m getting a warning below \r\nUnchecked cast: &#39;java.lang.Object&#39; to &#39;java.util.Collection&lt;java.lang.String&gt;\r\nWhat is the fix for this?\r\n\r\n    public UserDTO transformTuple(Object[] objects, String[] strings) {\r\n        List&lt;String&gt; roleList = new ArrayList&lt;&gt;((Collection&lt;String&gt;)objects[7]);","title":"unchecked cast warning on Collection","body":"<p>I am mapping a postgres array_agg value to a list, but I'm getting a warning below\nUnchecked cast: 'java.lang.Object' to 'java.util.Collection&lt;java.lang.String&gt;\nWhat is the fix for this?</p>\n<pre><code>public UserDTO transformTuple(Object[] objects, String[] strings) {\n    List&lt;String&gt; roleList = new ArrayList&lt;&gt;((Collection&lt;String&gt;)objects[7]);\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1663643006,"post_id":73781178,"comment_id":130282435,"body_markdown":"Did you mean `init = new InitializeTest();`, not `InitializeTest init = new InitializeTest();`?","body":"Did you mean <code>init = new InitializeTest();</code>, not <code>InitializeTest init = new InitializeTest();</code>?"},{"owner":{"account_id":26256748,"reputation":1,"user_id":19928681,"display_name":"Chr0miumCranium"},"score":0,"creation_date":1663643449,"post_id":73781178,"comment_id":130282509,"body_markdown":"@Sweeper Yes; after changing that and making init static, it worked. Do you mind explaining why that makes a difference?","body":"@Sweeper Yes; after changing that and making init static, it worked. Do you mind explaining why that makes a difference?"}],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663643902,"creation_date":1663643902,"answer_id":73781286,"question_id":73781178,"body_markdown":"You include the type when you&#39;re *declaring* variables, not when simply assigning to an existing one. When you write\r\n\r\n    InitializeTest init = new InitializeTest();\r\n\r\nThat makes a *new* `init` variable, unrelated to the previous one, which stores the newly constructed object. That new variable *shadows* the existing one, but it gets released after the `switch` block is over (variables in Java are block-scoped).\r\n\r\nTo put it to an analogy, it&#39;s as though you wanted to tell your friend Alice a secret. But when you went to her house, her neighbor whose name is also Alice happened to be there instead. If you tell *that* Alice your secret, then your friend doesn&#39;t find out. Even though the two happen to share a name, they don&#39;t share any memory.","title":"How to deal with an unitialized constructor in an if statement (Java)","body":"<p>You include the type when you're <em>declaring</em> variables, not when simply assigning to an existing one. When you write</p>\n<pre><code>InitializeTest init = new InitializeTest();\n</code></pre>\n<p>That makes a <em>new</em> <code>init</code> variable, unrelated to the previous one, which stores the newly constructed object. That new variable <em>shadows</em> the existing one, but it gets released after the <code>switch</code> block is over (variables in Java are block-scoped).</p>\n<p>To put it to an analogy, it's as though you wanted to tell your friend Alice a secret. But when you went to her house, her neighbor whose name is also Alice happened to be there instead. If you tell <em>that</em> Alice your secret, then your friend doesn't find out. Even though the two happen to share a name, they don't share any memory.</p>\n"}],"owner":{"account_id":26256748,"reputation":1,"user_id":19928681,"display_name":"Chr0miumCranium"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73781286,"answer_count":1,"score":-1,"last_activity_date":1663643902,"creation_date":1663642787,"question_id":73781178,"body_markdown":"I&#39;ve run into a problem where I attempt to define a constructor in the first part of a switch/case statement, and then I can&#39;t run the code because the program can&#39;t get the definition later. \r\n\r\nThe idea behind passing the constructor information from a switch/case function is that the user chooses what to do, but for some options, one must be done before the other is possible (e.g. Create password and Check password). \r\n\r\nIf I try doing it this way, it throws a VarMayNotHaveBeenInitialized error (I get the sense the answer is in a try/catch statement, but I don&#39;t know enough about them to be sure). I&#39;ve included some code that is what I&#39;ve been essentially trying to do below. (The two classes are to best simulate the project I&#39;m working on.) \r\n\r\nAny help is appreciated! : )\r\n\r\nTestMain.java:\r\n```\r\npackage exitTest;\r\n\r\npublic class TestMain {\r\n\tInitializeTest init;\r\n\tpublic static void main(String[] args) {\r\n\t\twhile (true) {\r\n\t\t\tString x = InitializeTest.askQuestion();\r\n\t\t\t\r\n\t\t\tswitch (x) {\r\n\t\t\t\tcase &quot;set&quot;:\r\n\t\t\t\t\tInitializeTest init = new InitializeTest();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase &quot;get&quot;:\r\n\t\t\t\t\tif (init != null) {\r\n\t\t\t\t\t\tinit.showExample();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tSystem.out.println(&quot;Error: init not initialized.&quot;);\r\n\t\t\t\t\t} break;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\nInitializeTest.java:\r\n```\r\npackage exitTest;\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class InitializeTest {\r\n\tstatic Scanner in = new Scanner(System.in);\r\n\tpublic InitializeTest thing1;\r\n\tpublic String example;\r\n\t\r\n\tpublic static String askQuestion() {\r\n\t\tSystem.out.println(&quot;set for set example\\nget for check example&quot;);\r\n\t\tString action = in.nextLine();\r\n\t\treturn action;\r\n\t}\r\n\t\r\n\tpublic InitializeTest() {\r\n\tSystem.out.println(&quot;Input string:&quot;);\r\n\tString example = in.nextLine();\r\n\t}\r\n\r\n\tvoid showExample() { System.out.println(example); }\r\n\r\n}\r\n```","title":"How to deal with an unitialized constructor in an if statement (Java)","body":"<p>I've run into a problem where I attempt to define a constructor in the first part of a switch/case statement, and then I can't run the code because the program can't get the definition later.</p>\n<p>The idea behind passing the constructor information from a switch/case function is that the user chooses what to do, but for some options, one must be done before the other is possible (e.g. Create password and Check password).</p>\n<p>If I try doing it this way, it throws a VarMayNotHaveBeenInitialized error (I get the sense the answer is in a try/catch statement, but I don't know enough about them to be sure). I've included some code that is what I've been essentially trying to do below. (The two classes are to best simulate the project I'm working on.)</p>\n<p>Any help is appreciated! : )</p>\n<p>TestMain.java:</p>\n<pre><code>package exitTest;\n\npublic class TestMain {\n    InitializeTest init;\n    public static void main(String[] args) {\n        while (true) {\n            String x = InitializeTest.askQuestion();\n            \n            switch (x) {\n                case &quot;set&quot;:\n                    InitializeTest init = new InitializeTest();\n                    break;\n                case &quot;get&quot;:\n                    if (init != null) {\n                        init.showExample();\n                    } else {\n                        System.out.println(&quot;Error: init not initialized.&quot;);\n                    } break;\n            }\n        }\n    }\n\n}\n</code></pre>\n<p>InitializeTest.java:</p>\n<pre><code>package exitTest;\n\nimport java.util.Scanner;\n\npublic class InitializeTest {\n    static Scanner in = new Scanner(System.in);\n    public InitializeTest thing1;\n    public String example;\n    \n    public static String askQuestion() {\n        System.out.println(&quot;set for set example\\nget for check example&quot;);\n        String action = in.nextLine();\n        return action;\n    }\n    \n    public InitializeTest() {\n    System.out.println(&quot;Input string:&quot;);\n    String example = in.nextLine();\n    }\n\n    void showExample() { System.out.println(example); }\n\n}\n</code></pre>\n"},{"tags":["java","generics","reflection"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1662671899,"post_id":73653369,"comment_id":130066522,"body_markdown":"No matter how much you try to hack this: for `getGenericType()` the `T` can be any class, only the caller of `getGenericType()` knows what he expects. If the caller doesn&#39;t tell `getGenericType()` what he expects (by providing some hint) the method `getGenericType()` has no way of knowing.","body":"No matter how much you try to hack this: for <code>getGenericType()</code> the <code>T</code> can be any class, only the caller of <code>getGenericType()</code> knows what he expects. If the caller doesn&#39;t tell <code>getGenericType()</code> what he expects (by providing some hint) the method <code>getGenericType()</code> has no way of knowing."},{"owner":{"account_id":23646042,"reputation":447,"user_id":18197654,"display_name":"xtay2"},"score":0,"creation_date":1662672202,"post_id":73653369,"comment_id":130066582,"body_markdown":"But isn&#39;t it then possible to go up the stack and searching through the caller info?","body":"But isn&#39;t it then possible to go up the stack and searching through the caller info?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1662746457,"post_id":73653369,"comment_id":130085429,"body_markdown":"You could try the answers from https://stackoverflow.com/questions/421280/how-do-i-find-the-caller-of-a-method-using-stacktrace-or-reflection to find information about the caller. When using the `StackWalker` you even get the byte code offset where the call occurs. Your code would then somehow need to analyse the byte code after the call to find out what happens there.","body":"You could try the answers from <a href=\"https://stackoverflow.com/questions/421280/how-do-i-find-the-caller-of-a-method-using-stacktrace-or-reflection\" title=\"how do i find the caller of a method using stacktrace or reflection\">stackoverflow.com/questions/421280/&hellip;</a> to find information about the caller. When using the <code>StackWalker</code> you even get the byte code offset where the call occurs. Your code would then somehow need to analyse the byte code after the call to find out what happens there."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1662746571,"post_id":73653369,"comment_id":130085465,"body_markdown":"To analyse the byte code you will need to load the class first, which means that you have to find out: which class loader loaded the class? what is the source of the class (where was it loaded from)?","body":"To analyse the byte code you will need to load the class first, which means that you have to find out: which class loader loaded the class? what is the source of the class (where was it loaded from)?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1662746637,"post_id":73653369,"comment_id":130085486,"body_markdown":"IMHO this might prove nearly impossible. While good men have said &quot;this is impossible&quot; an someone proved them wrong, the question is whether it is worth the effort needed.","body":"IMHO this might prove nearly impossible. While good men have said &quot;this is impossible&quot; an someone proved them wrong, the question is whether it is worth the effort needed."},{"owner":{"account_id":23646042,"reputation":447,"user_id":18197654,"display_name":"xtay2"},"score":0,"creation_date":1662748133,"post_id":73653369,"comment_id":130085904,"body_markdown":"Believe me, it is :D I live for stuff like this.","body":"Believe me, it is :D I live for stuff like this."}],"owner":{"account_id":23646042,"reputation":447,"user_id":18197654,"display_name":"xtay2"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663643359,"creation_date":1662660287,"question_id":73653369,"body_markdown":"I know about type-erasure, I know it shouldn&#39;t be possible and every stackoverflow-post answers with workarounds but I&#39;m willing to use the hackiest, bytecode-manipulating, reflective functionality to make this work:\r\n\r\n    static &lt;T&gt; Class&lt;T&gt; getGenericType() {...}\r\n\r\n","title":"get return type of generic method","body":"<p>I know about type-erasure, I know it shouldn't be possible and every stackoverflow-post answers with workarounds but I'm willing to use the hackiest, bytecode-manipulating, reflective functionality to make this work:</p>\n<pre><code>static &lt;T&gt; Class&lt;T&gt; getGenericType() {...}\n</code></pre>\n"},{"tags":["java","generics","reflection","parameters"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1662877128,"post_id":73677209,"comment_id":130104894,"body_markdown":"&quot;*Inside the TestClass constructor, I want to extract the generic type of that ArrayList from input parameter.*&quot; - Due to [type erasure](https://docs.oracle.com/javase/tutorial/java/generics/erasure.html), this is not possible.","body":"&quot;<i>Inside the TestClass constructor, I want to extract the generic type of that ArrayList from input parameter.</i>&quot; - Due to <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">type erasure</a>, this is not possible."},{"owner":{"account_id":3607184,"reputation":185,"user_id":3009097,"display_name":"user3009097"},"score":0,"creation_date":1662973542,"post_id":73677209,"comment_id":130121394,"body_markdown":"That&#39;s a different case @samabcde. His parameter type is equal to variable type which was passed on to it. In my case, the parameter type is *Object* and not the same as the variable type which was passed on to it.","body":"That&#39;s a different case @samabcde. His parameter type is equal to variable type which was passed on to it. In my case, the parameter type is <i>Object</i> and not the same as the variable type which was passed on to it."}],"answers":[{"tags":[],"owner":{"account_id":12731703,"reputation":3217,"user_id":9248098,"display_name":"Gowtham K K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662888933,"creation_date":1662888933,"answer_id":73678212,"question_id":73677209,"body_markdown":"This is not possible in Java because the generic type is only saved during compile type. You cannot get type runtime as you are expecting. Internally it will create every type as `Object` only which is base class for all java class. This concept is called as type erasure. You can read about it more [here][1].\r\n\r\nOne way you can do is something like this. It will work only if List is not empty.\r\n\r\n    public class TestClass{\r\n        public Class clazz;\r\n    \r\n        public TestClass(List&lt;String&gt; input) {\r\n            if (input instanceof ArrayList) {\r\n                if(!input.isEmpty()){\r\n                    this.clazz = input.get(0).getClass();\r\n                    System.out.println(clazz);\r\n                }\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            List&lt;String&gt; all = new ArrayList&lt;&gt;();\r\n            all.add(&quot;21&quot;);\r\n            new TestClass(all);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/generics/erasure.html","title":"Get generic type from a run-time type parameter in Java","body":"<p>This is not possible in Java because the generic type is only saved during compile type. You cannot get type runtime as you are expecting. Internally it will create every type as <code>Object</code> only which is base class for all java class. This concept is called as type erasure. You can read about it more <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>One way you can do is something like this. It will work only if List is not empty.</p>\n<pre><code>public class TestClass{\n    public Class clazz;\n\n    public TestClass(List&lt;String&gt; input) {\n        if (input instanceof ArrayList) {\n            if(!input.isEmpty()){\n                this.clazz = input.get(0).getClass();\n                System.out.println(clazz);\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        List&lt;String&gt; all = new ArrayList&lt;&gt;();\n        all.add(&quot;21&quot;);\n        new TestClass(all);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3607184,"reputation":185,"user_id":3009097,"display_name":"user3009097"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1663648620,"answer_count":1,"score":0,"last_activity_date":1663643206,"creation_date":1662876747,"question_id":73677209,"body_markdown":"I&#39;ve read a lot of other questions out there, but I cannot find one with similar case as mine. Assume I have the following code:\r\n\r\n    public class TestClass\r\n    {\r\n        public Class clazz;\r\n    \r\n        public TestClass(Object input)\r\n        {\r\n            this.clazz = ........ ?? // how to get String.class from &quot;input&quot; parameter?\r\n        }\r\n\r\n        public static void main(String[] args)\r\n        {\r\n            List&lt;String&gt; all = new ArrayList&lt;&gt;();\r\n            new TestClass(all);\r\n        }\r\n    }\r\n\r\nThe constructor of `TestClass` has 1 parameter which is an `Object` type. At runtime, it receives a variable of type `List`, but the actual instance is an `ArrayList`. Inside the `TestClass` constructor, I want to extract the generic type of that `ArrayList` from `input` parameter. The expected result should be `String.class` object, which can be stored in `clazz` variable.","title":"Get generic type from a run-time type parameter in Java","body":"<p>I've read a lot of other questions out there, but I cannot find one with similar case as mine. Assume I have the following code:</p>\n<pre><code>public class TestClass\n{\n    public Class clazz;\n\n    public TestClass(Object input)\n    {\n        this.clazz = ........ ?? // how to get String.class from &quot;input&quot; parameter?\n    }\n\n    public static void main(String[] args)\n    {\n        List&lt;String&gt; all = new ArrayList&lt;&gt;();\n        new TestClass(all);\n    }\n}\n</code></pre>\n<p>The constructor of <code>TestClass</code> has 1 parameter which is an <code>Object</code> type. At runtime, it receives a variable of type <code>List</code>, but the actual instance is an <code>ArrayList</code>. Inside the <code>TestClass</code> constructor, I want to extract the generic type of that <code>ArrayList</code> from <code>input</code> parameter. The expected result should be <code>String.class</code> object, which can be stored in <code>clazz</code> variable.</p>\n"},{"tags":["java","generics","reflection"],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176607,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1454708073,"creation_date":1454708073,"answer_id":35233936,"question_id":35233683,"body_markdown":"You have the `Method` object already.  Starting from here, get the type parameters that are declared on the method with [the `getTypeParameters` method][1], which returns a `TypeVariable&lt;Method&gt;[]`.  This is an array of the type parameter declared on the method.  In this case it has one type parameter, so the returned array has only one element.\r\n\r\n[1]: https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Method.html#getTypeParameters--\r\n\r\nThe [`TypeVariable` interface][2] has a method to retrieve the name `T`, `getName`, and a method to retrieve the bounds, `getBounds`.  The `getBounds` method returns a `Type[]`.  You can be sure that any bounds here are upper bounds, because the declarations of type variables aren&#39;t allowed to use `super`, only `extends`.\r\n\r\nIn this case, the `Type` variable is just the `Class` object for `AssertDelegateTarget`.\r\n\r\nNow you can re-construct the `&quot;&lt;T extends AssertDelegateTarget&gt;&quot;` string from the above information.  Only use &quot;extends&quot; if the `Type[]` is non-empty.  If there were multiple bounds, you would place a comma in between them, e.g. `T extends Bound1, Bound2`.\r\n\r\n[2]: https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/TypeVariable.html","title":"Java reflection and generics - parameterized type info missing &quot;extends&quot;","body":"<p>You have the <code>Method</code> object already.  Starting from here, get the type parameters that are declared on the method with <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Method.html#getTypeParameters--\" rel=\"nofollow\">the <code>getTypeParameters</code> method</a>, which returns a <code>TypeVariable&lt;Method&gt;[]</code>.  This is an array of the type parameter declared on the method.  In this case it has one type parameter, so the returned array has only one element.</p>\n\n<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/TypeVariable.html\" rel=\"nofollow\"><code>TypeVariable</code> interface</a> has a method to retrieve the name <code>T</code>, <code>getName</code>, and a method to retrieve the bounds, <code>getBounds</code>.  The <code>getBounds</code> method returns a <code>Type[]</code>.  You can be sure that any bounds here are upper bounds, because the declarations of type variables aren't allowed to use <code>super</code>, only <code>extends</code>.</p>\n\n<p>In this case, the <code>Type</code> variable is just the <code>Class</code> object for <code>AssertDelegateTarget</code>.</p>\n\n<p>Now you can re-construct the <code>\"&lt;T extends AssertDelegateTarget&gt;\"</code> string from the above information.  Only use \"extends\" if the <code>Type[]</code> is non-empty.  If there were multiple bounds, you would place a comma in between them, e.g. <code>T extends Bound1, Bound2</code>.</p>\n"}],"owner":{"account_id":6575531,"reputation":1123,"user_id":5081731,"accept_rate":80,"display_name":"aro_tech"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":35233936,"answer_count":1,"score":1,"last_activity_date":1663642637,"creation_date":1454707024,"question_id":35233683,"body_markdown":"I would like to reconstitute the signature of a method using reflection in Java 8.  I&#39;ve run into some issues with generic methods.\r\nIn particular, I find nothing to help recover information about cases of &quot;extends&quot; or &quot;super&quot; in the template type declaration.\r\n\r\nHere&#39;s a specific test case, based on known source code:\r\n\r\nSignature of the method from source code:  \r\n`public static &lt;T extends AssertDelegateTarget&gt; T assertThat(T assertion)`\r\n\r\n**First of all, is there an elegant way to reconstitute the `&lt;T extends AssertDelegateTarget&gt;` part without having to parse Strings?** \r\n\r\nHere&#39;s the main info I was able to get by reflection:\r\n\r\n - `method.toString()`:\r\n\r\n    `public static org.assertj.core.api.AssertDelegateTarget org.assertj.core.api.Assertions.assertThat(org.assertj.core.api.AssertDelegateTarget)`\r\n\r\n - `method.toGenericString()`:\r\n\r\n    `public static &lt;T&gt; T org.assertj.core.api.Assertions.assertThat(T)`\r\n\r\n    **What happened to &quot;extends AssertDelegateTarget&quot;?**\r\n\r\n - `method.getReturnType.toString()`:\r\n\r\n    `interface org.assertj.core.api.AssertDelegateTarget`\r\n\r\n - `method.getGenericParameterTypes()[0].getTypeName()`:\r\n\r\n    `T`\r\n\r\n**Based on the above reflection info, I could assume a relationship between T and AssertDelegateTarget, but how do I know whether it&#39;s &quot;extends&quot; or &quot;super&quot;?**\r\n","title":"Java reflection and generics - parameterized type info missing &quot;extends&quot;","body":"<p>I would like to reconstitute the signature of a method using reflection in Java 8.  I've run into some issues with generic methods.\nIn particular, I find nothing to help recover information about cases of \"extends\" or \"super\" in the template type declaration.</p>\n\n<p>Here's a specific test case, based on known source code:</p>\n\n<p>Signature of the method from source code:<br>\n<code>public static &lt;T extends AssertDelegateTarget&gt; T assertThat(T assertion)</code></p>\n\n<p><strong>First of all, is there an elegant way to reconstitute the <code>&lt;T extends AssertDelegateTarget&gt;</code> part without having to parse Strings?</strong> </p>\n\n<p>Here's the main info I was able to get by reflection:</p>\n\n<ul>\n<li><p><code>method.toString()</code>:</p>\n\n<p><code>public static org.assertj.core.api.AssertDelegateTarget org.assertj.core.api.Assertions.assertThat(org.assertj.core.api.AssertDelegateTarget)</code></p></li>\n<li><p><code>method.toGenericString()</code>:</p>\n\n<p><code>public static &lt;T&gt; T org.assertj.core.api.Assertions.assertThat(T)</code></p>\n\n<p><strong>What happened to \"extends AssertDelegateTarget\"?</strong></p></li>\n<li><p><code>method.getReturnType.toString()</code>:</p>\n\n<p><code>interface org.assertj.core.api.AssertDelegateTarget</code></p></li>\n<li><p><code>method.getGenericParameterTypes()[0].getTypeName()</code>:</p>\n\n<p><code>T</code></p></li>\n</ul>\n\n<p><strong>Based on the above reflection info, I could assume a relationship between T and AssertDelegateTarget, but how do I know whether it's \"extends\" or \"super\"?</strong></p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":289963,"reputation":2107,"user_id":591234,"accept_rate":50,"display_name":"Sashi"},"score":0,"creation_date":1663625714,"post_id":73779668,"comment_id":130279980,"body_markdown":"Doesn&#39;t your UI send back all 50 variables as part of the athleteDTO? If so, you don&#39;t have to do a null check, right? You have to assume whatever is being sent in AthleteDTO is what needs to go into the database. The onus is upon your UI to just change the variables it needs to and send the rest as is on an update. \nIf you also want to support a &#39;PATCH&#39; request, you can have your UI send a few variables that needs to be updated and you should handle only those specific variables as part of your PATCH update.","body":"Doesn&#39;t your UI send back all 50 variables as part of the athleteDTO? If so, you don&#39;t have to do a null check, right? You have to assume whatever is being sent in AthleteDTO is what needs to go into the database. The onus is upon your UI to just change the variables it needs to and send the rest as is on an update.  If you also want to support a &#39;PATCH&#39; request, you can have your UI send a few variables that needs to be updated and you should handle only those specific variables as part of your PATCH update."},{"owner":{"account_id":13557961,"reputation":893,"user_id":9780713,"display_name":"F4NT0"},"score":0,"creation_date":1663626007,"post_id":73779668,"comment_id":130280032,"body_markdown":"when i send the request from postman, i don&#39;t need to send all the variables, so i check if the variable/object is null for do not ferify if it&#39;s different from the data previous save on the database","body":"when i send the request from postman, i don&#39;t need to send all the variables, so i check if the variable/object is null for do not ferify if it&#39;s different from the data previous save on the database"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":1,"creation_date":1663626066,"post_id":73779668,"comment_id":130280050,"body_markdown":"a) the `!updated.x().equals(saved.x())` checks aren&#39;t really required b) It&#39;s still common to manually write such code but this `@Mapper`/`@BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)` approach might work for you https://www.baeldung.com/spring-data-partial-update#1-mapping-strategy c) you don&#39;t have to write any controller code if you use [`spring-data-rest`](https://docs.spring.io/spring-data/rest/docs/current/reference/html/) (and like the api it produces). d) reflection can loop over properties d) there&#39;s usually an h in `athlete`","body":"a) the <code>!updated.x().equals(saved.x())</code> checks aren&#39;t really required b) It&#39;s still common to manually write such code but this <code>@Mapper</code>/<code>@BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)</code> approach might work for you <a href=\"https://www.baeldung.com/spring-data-partial-update#1-mapping-strategy\" rel=\"nofollow noreferrer\">baeldung.com/spring-data-partial-update#1-mapping-strategy</a> c) you don&#39;t have to write any controller code if you use <a href=\"https://docs.spring.io/spring-data/rest/docs/current/reference/html/\" rel=\"nofollow noreferrer\"><code>spring-data-rest</code></a> (and like the api it produces). d) reflection can loop over properties d) there&#39;s usually an h in <code>athlete</code>"}],"answers":[{"tags":[],"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663633167,"creation_date":1663631565,"answer_id":73780306,"question_id":73779668,"body_markdown":"I remember I had a similar issue and I used Reflection, it was the easiest way of doing it.\r\n\r\nIterate over the attributed of the first object, and get the exact same attribute of the other object and compare them.\r\n\r\nExample:\r\n\r\n```Java\r\n\tpublic static void main(String[] args) throws IllegalAccessException {\r\n\t\tTestClass testObject1 = new TestClass();\r\n\t\ttestObject1.setId(1L);\r\n\t\ttestObject1.setName(&quot;TestObject1&quot;);\r\n\r\n\t\tTestClass testObject2 = new TestClass();\r\n\t\ttestObject2.setId(2L);\r\n\t\ttestObject2.setName(&quot;TestObject2&quot;);\r\n\r\n\t\tfor (Field field : testObject1.getClass().getDeclaredFields()) {\r\n\t\t\tboolean accessibleValue = field.isAccessible();\r\n\t\t\tfield.setAccessible(true);\r\n\t\t\tObject otherValue = field.get(testObject2);\r\n\r\n\t\t\tif (!field.get(testObject1).equals(otherValue))\r\n\t\t\t\tfield.set(testObject1, otherValue);\r\n\r\n\t\t\tfield.setAccessible(accessibleValue);\r\n\t\t}\r\n\r\n\t\tSystem.out.println(testObject1);\r\n\t}\r\n\r\n\tpublic static class TestClass {\r\n\r\n\t\tprivate long id;\r\n\t\tprivate String name;\r\n\r\n\t\tpublic void setId(long id) {\r\n\t\t\tthis.id = id;\r\n\t\t}\r\n\r\n\t\tpublic String getName() {\r\n\t\t\treturn name;\r\n\t\t}\r\n\r\n\t\tpublic void setName(String name) {\r\n\t\t\tthis.name = name;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\treturn &quot;TestClass{&quot; +\r\n\t\t\t\t\t&quot;id=&quot; + id +\r\n\t\t\t\t\t&quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n\t\t\t\t\t&#39;}&#39;;\r\n\t\t}\r\n\t}\r\n```\r\n\r\nOutput:\r\n```\r\nTestClass{id=2, name=&#39;TestObject2&#39;}\r\n```","title":"Design Pattern to a better update on Spring boot REST API","body":"<p>I remember I had a similar issue and I used Reflection, it was the easiest way of doing it.</p>\n<p>Iterate over the attributed of the first object, and get the exact same attribute of the other object and compare them.</p>\n<p>Example:</p>\n<pre><code>    public static void main(String[] args) throws IllegalAccessException {\n        TestClass testObject1 = new TestClass();\n        testObject1.setId(1L);\n        testObject1.setName(&quot;TestObject1&quot;);\n\n        TestClass testObject2 = new TestClass();\n        testObject2.setId(2L);\n        testObject2.setName(&quot;TestObject2&quot;);\n\n        for (Field field : testObject1.getClass().getDeclaredFields()) {\n            boolean accessibleValue = field.isAccessible();\n            field.setAccessible(true);\n            Object otherValue = field.get(testObject2);\n\n            if (!field.get(testObject1).equals(otherValue))\n                field.set(testObject1, otherValue);\n\n            field.setAccessible(accessibleValue);\n        }\n\n        System.out.println(testObject1);\n    }\n\n    public static class TestClass {\n\n        private long id;\n        private String name;\n\n        public void setId(long id) {\n            this.id = id;\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        public void setName(String name) {\n            this.name = name;\n        }\n\n        @Override\n        public String toString() {\n            return &quot;TestClass{&quot; +\n                    &quot;id=&quot; + id +\n                    &quot;, name='&quot; + name + '\\'' +\n                    '}';\n        }\n    }\n</code></pre>\n<p>Output:</p>\n<pre><code>TestClass{id=2, name='TestObject2'}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663642327,"creation_date":1663642327,"answer_id":73781143,"question_id":73779668,"body_markdown":"Perhaps what you need is @DynamicUpdate annotation that provided by the Spring Data JPA.\r\n\r\n&gt; @DynamicUpdate is a class-level annotation that can be applied to a\r\n&gt; JPA entity. It ensures that Hibernate uses only the modified columns\r\n&gt; in the SQL statement that it generates for the update of an entity.\r\n\r\nI quoted it directly from the reference link below, please look at the reference link for further details.\r\n\r\nReference [link][1] . \r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-data-jpa-dynamicupdate","title":"Design Pattern to a better update on Spring boot REST API","body":"<p>Perhaps what you need is @DynamicUpdate annotation that provided by the Spring Data JPA.</p>\n<blockquote>\n<p>@DynamicUpdate is a class-level annotation that can be applied to a\nJPA entity. It ensures that Hibernate uses only the modified columns\nin the SQL statement that it generates for the update of an entity.</p>\n</blockquote>\n<p>I quoted it directly from the reference link below, please look at the reference link for further details.</p>\n<p>Reference <a href=\"https://www.baeldung.com/spring-data-jpa-dynamicupdate\" rel=\"nofollow noreferrer\">link</a> .</p>\n"}],"owner":{"account_id":13557961,"reputation":893,"user_id":9780713,"display_name":"F4NT0"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":445,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73781143,"answer_count":2,"score":-1,"last_activity_date":1663642327,"creation_date":1663624525,"question_id":73779668,"body_markdown":"I have created a REST API using Java with Spring boot, i&#39;m new using Design Patterns but i need to improve my ppdate method to verify all information on my Atlete entity.\r\n\r\nMy Entity is about atletes informations:\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@Entity\r\n@JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\r\n@Table(name = &quot;atletes&quot;, schema = &quot;personas&quot;)\r\npublic class Atlete {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id_atlete&quot;)\r\n    private Long idAtlete;\r\n\r\n    @Lob\r\n    @Type(type = &quot;org.hibernate.type.TextType&quot;)\r\n    @Column(name = &quot;atlete_name&quot;)\r\n    private String atleteName;\r\n\r\n    @Temporal(TemporalType.DATE)\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\r\n    @Column(name = &quot;date_birth&quot;)\r\n    private Date dateBirth;\r\n\r\n    @Column(name = &quot;atlete_height&quot;)\r\n    private Double atleteHeight;\r\n\r\n    @Column(name = &quot;atlete_weight&quot;)\r\n    private Double atleteWeight;\r\n\r\n    @Column(name = &quot;atlete_imc&quot;)\r\n    private Double atleteImc;\r\n\r\n    @Lob\r\n    @Type(type = &quot;org.hibernate.type.TextType&quot;)\r\n    @Column(name = &quot;atlete_bid&quot;)\r\n    private String atleteBid;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;dominant_leg&quot;)\r\n    private DominantLeg dominantLeg;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;position&quot;)\r\n    private Position position;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;id_adress&quot;)\r\n    private Adress adress;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;id_contact&quot;)\r\n    private Contact contact;\r\n\r\n    @JsonProperty(&quot;atleteClubs&quot;)\r\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;atlete&quot;, cascade = CascadeType.REMOVE)\r\n    private List&lt;AtleteClub&gt; atleteClubs;\r\n\r\n    @Lob\r\n    @Type(type = &quot;org.hibernate.type.TextType&quot;)\r\n    @Column(name = &quot;atlete_deceases&quot;)\r\n    private String deceases;\r\n```\r\n\r\n\r\nMy PUT requisition on my AtleteController:\r\n\r\n```java\r\n@PutMapping(value = URL_SINGULAR, produces = MediaType.APPLICATION_JSON_VALUE)\r\npublic ResponseEntity&lt;AtleteDTO&gt; updateAtlete(@PathVariable Long id, @RequestBody @Valid AtleteDTO atleteDTO) {\r\n        Optional&lt;Atlete&gt; verifyId = atleteRepository.findById(id);\r\n        if (verifyId.isPresent()) {\r\n            Atlete updatedAtlete = atleteService.desconvertObject(atleteDTO);\r\n            Atlete atlete = atleteService.update(id, updatedAtlete, atleteRepository);\r\n            return ResponseEntity.ok(new AtleteDTO(atlete));\r\n        }\r\n        return ResponseEntity.notFound().build();\r\n    }\r\n```\r\n\r\nOn my AtleteService i&#39;m verifying if my variables and objects are updated, like below:\r\n\r\n```java\r\n@Transactional\r\n    public Atlete update(Long id, Atlete updated, AtleteRepository atleteRepository) {\r\n        Atlete saved = atleteRepository.findByidAtlete(id);\r\n        if (updated.getAtleteName() != null &amp;&amp; !updated.getAtleteName().equals(saved.getAtleteName())) {\r\n            saved.setAtleteName(updated.getAtleteName());\r\n        }\r\n        if (updated.getDateBirth() != null &amp;&amp; !updated.getDateBirth().equals(saved.getDateBirth())) {\r\n            saved.setDateBirth(updated.getDateBirth());\r\n        }\r\n        if (updated.getAtleteHeight() != null &amp;&amp; !updated.getAtleteHeight().equals(saved.getAtleteHeight())) {\r\n            saved.setAtleteHeight(updated.getAtleteHeight());\r\n        }\r\n        if (updated.getAtleteWeight() != null &amp;&amp; !updated.getAtleteWeight().equals(saved.getAtleteWeight())) {\r\n            saved.setAtleteWeight(updated.getAtleteWeight());\r\n        }\r\n        if (updated.getAtleteImc() != null &amp;&amp; !updated.getAtleteImc().equals(saved.getAtleteImc())) {\r\n            saved.setAtleteImc(updated.getAtleteImc());\r\n        }\r\n        if (updated.getAtleteBid() != null &amp;&amp; !updated.getAtleteBid().equals(saved.getAtleteBid())) {\r\n            saved.setAtleteBid(updated.getAtleteBid());\r\n        }\r\n        if (updated.getDominantLeg() != null &amp;&amp; !updated.getDominantLeg().equals(saved.getDominantLeg())) {\r\n            saved.setDominantLeg(updated.getDominantLeg());\r\n        }\r\n        if (updated.getPosition() != null &amp;&amp; !updated.getPosition().equals(saved.getPosition())) {\r\n            saved.setPosition(updated.getPosition());\r\n        }\r\n        if (updated.getContact() != null &amp;&amp; !updated.getContact().equals(saved.getContact())) {\r\n            saved.setContact(contactService.update(updated.getContact().getId(), updated.getContact(), contactRepository));\r\n        }\r\n        if (updated.getAdress() != null &amp;&amp; !updated.getAdress().equals(saved.getAdress())) {\r\n            saved.setAdress(adressService.update(updated.getAdress().getId(), updated.getAdress(), adressRepository));\r\n        }\r\n        if (updated.getAtleteClubs() != null &amp;&amp; !updated.getAtleteClubs().isEmpty()) {\r\n            for (AtleteClub atleteClub : updated.getAtleteClubs()) {\r\n                atleteClubService.update(atleteClub.getId(), atleteClub,atleteClubRepository);\r\n            }\r\n        }\r\n        if (updated.getDeceases() != null &amp;&amp; !updated.getDeceases().equals(saved.getDeceases())) {\r\n            saved.setDeceases(updated.getDeceases());\r\n        }\r\n        return saved;\r\n}\r\n```\r\n\r\nIs there some Design Pattern or Spring utility to make an update without verifying each variable and object of my Entity? if i have 50 variables i need to verify all of them like that?","title":"Design Pattern to a better update on Spring boot REST API","body":"<p>I have created a REST API using Java with Spring boot, i'm new using Design Patterns but i need to improve my ppdate method to verify all information on my Atlete entity.</p>\n<p>My Entity is about atletes informations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@Entity\n@JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\n@Table(name = &quot;atletes&quot;, schema = &quot;personas&quot;)\npublic class Atlete {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id_atlete&quot;)\n    private Long idAtlete;\n\n    @Lob\n    @Type(type = &quot;org.hibernate.type.TextType&quot;)\n    @Column(name = &quot;atlete_name&quot;)\n    private String atleteName;\n\n    @Temporal(TemporalType.DATE)\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\n    @Column(name = &quot;date_birth&quot;)\n    private Date dateBirth;\n\n    @Column(name = &quot;atlete_height&quot;)\n    private Double atleteHeight;\n\n    @Column(name = &quot;atlete_weight&quot;)\n    private Double atleteWeight;\n\n    @Column(name = &quot;atlete_imc&quot;)\n    private Double atleteImc;\n\n    @Lob\n    @Type(type = &quot;org.hibernate.type.TextType&quot;)\n    @Column(name = &quot;atlete_bid&quot;)\n    private String atleteBid;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;dominant_leg&quot;)\n    private DominantLeg dominantLeg;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;position&quot;)\n    private Position position;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;id_adress&quot;)\n    private Adress adress;\n\n    @OneToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;id_contact&quot;)\n    private Contact contact;\n\n    @JsonProperty(&quot;atleteClubs&quot;)\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;atlete&quot;, cascade = CascadeType.REMOVE)\n    private List&lt;AtleteClub&gt; atleteClubs;\n\n    @Lob\n    @Type(type = &quot;org.hibernate.type.TextType&quot;)\n    @Column(name = &quot;atlete_deceases&quot;)\n    private String deceases;\n</code></pre>\n<p>My PUT requisition on my AtleteController:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PutMapping(value = URL_SINGULAR, produces = MediaType.APPLICATION_JSON_VALUE)\npublic ResponseEntity&lt;AtleteDTO&gt; updateAtlete(@PathVariable Long id, @RequestBody @Valid AtleteDTO atleteDTO) {\n        Optional&lt;Atlete&gt; verifyId = atleteRepository.findById(id);\n        if (verifyId.isPresent()) {\n            Atlete updatedAtlete = atleteService.desconvertObject(atleteDTO);\n            Atlete atlete = atleteService.update(id, updatedAtlete, atleteRepository);\n            return ResponseEntity.ok(new AtleteDTO(atlete));\n        }\n        return ResponseEntity.notFound().build();\n    }\n</code></pre>\n<p>On my AtleteService i'm verifying if my variables and objects are updated, like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\n    public Atlete update(Long id, Atlete updated, AtleteRepository atleteRepository) {\n        Atlete saved = atleteRepository.findByidAtlete(id);\n        if (updated.getAtleteName() != null &amp;&amp; !updated.getAtleteName().equals(saved.getAtleteName())) {\n            saved.setAtleteName(updated.getAtleteName());\n        }\n        if (updated.getDateBirth() != null &amp;&amp; !updated.getDateBirth().equals(saved.getDateBirth())) {\n            saved.setDateBirth(updated.getDateBirth());\n        }\n        if (updated.getAtleteHeight() != null &amp;&amp; !updated.getAtleteHeight().equals(saved.getAtleteHeight())) {\n            saved.setAtleteHeight(updated.getAtleteHeight());\n        }\n        if (updated.getAtleteWeight() != null &amp;&amp; !updated.getAtleteWeight().equals(saved.getAtleteWeight())) {\n            saved.setAtleteWeight(updated.getAtleteWeight());\n        }\n        if (updated.getAtleteImc() != null &amp;&amp; !updated.getAtleteImc().equals(saved.getAtleteImc())) {\n            saved.setAtleteImc(updated.getAtleteImc());\n        }\n        if (updated.getAtleteBid() != null &amp;&amp; !updated.getAtleteBid().equals(saved.getAtleteBid())) {\n            saved.setAtleteBid(updated.getAtleteBid());\n        }\n        if (updated.getDominantLeg() != null &amp;&amp; !updated.getDominantLeg().equals(saved.getDominantLeg())) {\n            saved.setDominantLeg(updated.getDominantLeg());\n        }\n        if (updated.getPosition() != null &amp;&amp; !updated.getPosition().equals(saved.getPosition())) {\n            saved.setPosition(updated.getPosition());\n        }\n        if (updated.getContact() != null &amp;&amp; !updated.getContact().equals(saved.getContact())) {\n            saved.setContact(contactService.update(updated.getContact().getId(), updated.getContact(), contactRepository));\n        }\n        if (updated.getAdress() != null &amp;&amp; !updated.getAdress().equals(saved.getAdress())) {\n            saved.setAdress(adressService.update(updated.getAdress().getId(), updated.getAdress(), adressRepository));\n        }\n        if (updated.getAtleteClubs() != null &amp;&amp; !updated.getAtleteClubs().isEmpty()) {\n            for (AtleteClub atleteClub : updated.getAtleteClubs()) {\n                atleteClubService.update(atleteClub.getId(), atleteClub,atleteClubRepository);\n            }\n        }\n        if (updated.getDeceases() != null &amp;&amp; !updated.getDeceases().equals(saved.getDeceases())) {\n            saved.setDeceases(updated.getDeceases());\n        }\n        return saved;\n}\n</code></pre>\n<p>Is there some Design Pattern or Spring utility to make an update without verifying each variable and object of my Entity? if i have 50 variables i need to verify all of them like that?</p>\n"},{"tags":["java","spring","spring-boot","api","authentication"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663651241,"post_id":73781045,"comment_id":130283619,"body_markdown":"Which is propably because you aren&#39;t using `spring-boot-starter-security` but rather individual and non compatible versions.","body":"Which is propably because you aren&#39;t using <code>spring-boot-starter-security</code> but rather individual and non compatible versions."},{"owner":{"account_id":21705522,"reputation":5,"user_id":16018045,"display_name":"Rezan"},"score":0,"creation_date":1663736462,"post_id":73781045,"comment_id":130306829,"body_markdown":"@M.Deinum      \nYep you&#39;re right. Actually I&#39;m using both spring-boot-starter-security and the individual one. Its just that i was using the older version and not the latest one. Thanks for clarifying..","body":"@M.Deinum       Yep you&#39;re right. Actually I&#39;m using both spring-boot-starter-security and the individual one. Its just that i was using the older version and not the latest one. Thanks for clarifying.."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663739178,"post_id":73781045,"comment_id":130307301,"body_markdown":"If you have `spring-boot-starter-security` you don&#39;t need the individual ones.","body":"If you have <code>spring-boot-starter-security</code> you don&#39;t need the individual ones."},{"owner":{"account_id":21705522,"reputation":5,"user_id":16018045,"display_name":"Rezan"},"score":0,"creation_date":1663747249,"post_id":73781045,"comment_id":130309560,"body_markdown":"@M.Deinum   \nYea got it.. took them down already. Thanks again","body":"@M.Deinum    Yea got it.. took them down already. Thanks again"}],"owner":{"account_id":21705522,"reputation":5,"user_id":16018045,"display_name":"Rezan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663641347,"creation_date":1663641042,"question_id":73781045,"body_markdown":"Hi there so I&#39;m trying to create a Spring Security Login page which roots back to my DB(sql server) where my credentials are stored.\r\n\r\n\r\n    import java.util.List;\r\n\r\n    import javax.sql.DataSource;\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.core.annotation.Order;\r\n    import org.springframework.jdbc.core.BeanPropertyRowMapper;\r\n    import org.springframework.jdbc.core.JdbcTemplate;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n\r\n    //Some imports like JDBC template and beanrowmapper are present but dont mind them.. as i was trying somethings out..\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfigWithDB extends WebSecurityConfigurerAdapter{\r\n\t\r\n\t@Autowired\r\n    private DataSource dataSource;\t\r\n\t\r\n\t@Bean \r\n\tpublic PasswordEncoder passwordEncoder1() { \r\n\t    return new BCryptPasswordEncoder(); \r\n\t}\r\n\t\r\n\t\r\n\t public void configAuthentication(AuthenticationManagerBuilder auth) throws Exception {\r\n\t        auth\r\n\t        .jdbcAuthentication()\r\n\t        .passwordEncoder(new BCryptPasswordEncoder()) // this is where i get the error//\r\n\t            .dataSource(dataSource)\r\n\t            .usersByUsernameQuery(&quot;Select UserName, Password, Enable FROM LoginDetails WHERE Username=?&quot;)\r\n\t            .authoritiesByUsernameQuery(&quot;Select UserName, Role FROM LoginDetails WHERE Username=?&quot;);\r\n\t        \r\n\t        \r\n\t    }\r\n\r\n\t @Override\r\n\t    protected void configure(HttpSecurity http) throws Exception {\r\n\t        http.authorizeRequests()\r\n\t            .anyRequest().authenticated()\r\n\t            .and()\r\n\t            .formLogin().permitAll()\r\n\t            .and()\r\n\t            .logout().permitAll();     \r\n\t    }\r\n    }\r\n\r\nAnd the error goes like : \r\n**The type org.springframework.security.authentication.encoding.PasswordEncoder cannot be resolved. It is indirectly referenced from required .class files**","title":"type org.springframework.security.authentication.encoding.PasswordEncoder cannot be resolved. It is indirectly referenced from required .class files","body":"<p>Hi there so I'm trying to create a Spring Security Login page which roots back to my DB(sql server) where my credentials are stored.</p>\n<pre><code>import java.util.List;\n\nimport javax.sql.DataSource;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.jdbc.core.BeanPropertyRowMapper;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n//Some imports like JDBC template and beanrowmapper are present but dont mind them.. as i was trying somethings out..\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfigWithDB extends WebSecurityConfigurerAdapter{\n\n@Autowired\nprivate DataSource dataSource;  \n\n@Bean \npublic PasswordEncoder passwordEncoder1() { \n    return new BCryptPasswordEncoder(); \n}\n\n\n public void configAuthentication(AuthenticationManagerBuilder auth) throws Exception {\n        auth\n        .jdbcAuthentication()\n        .passwordEncoder(new BCryptPasswordEncoder()) // this is where i get the error//\n            .dataSource(dataSource)\n            .usersByUsernameQuery(&quot;Select UserName, Password, Enable FROM LoginDetails WHERE Username=?&quot;)\n            .authoritiesByUsernameQuery(&quot;Select UserName, Role FROM LoginDetails WHERE Username=?&quot;);\n        \n        \n    }\n\n @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n            .anyRequest().authenticated()\n            .and()\n            .formLogin().permitAll()\n            .and()\n            .logout().permitAll();     \n    }\n}\n</code></pre>\n<p>And the error goes like :\n<strong>The type org.springframework.security.authentication.encoding.PasswordEncoder cannot be resolved. It is indirectly referenced from required .class files</strong></p>\n"},{"tags":["java","multithreading","apache-kafka","apache-curator"],"comments":[{"owner":{"account_id":355283,"reputation":1333,"user_id":694143,"display_name":"asolanki"},"score":0,"creation_date":1545207752,"post_id":53847066,"comment_id":94541797,"body_markdown":"CuratorFrameworkFactory.newClient() creates a zookeeper client. This seems to be ir-relevant. The Kafka consumer you have created may be getting accessed from one more than one thread. Check all the places consumer instance is referenced.","body":"CuratorFrameworkFactory.newClient() creates a zookeeper client. This seems to be ir-relevant. The Kafka consumer you have created may be getting accessed from one more than one thread. Check all the places consumer instance is referenced."},{"owner":{"account_id":4686317,"reputation":113,"user_id":3793648,"display_name":"edrichhans"},"score":0,"creation_date":1545208039,"post_id":53847066,"comment_id":94541917,"body_markdown":"@asolanki It should be irrelevant, but if I comment out that line the error goes away.","body":"@asolanki It should be irrelevant, but if I comment out that line the error goes away."},{"owner":{"account_id":6512090,"reputation":336,"user_id":5038981,"display_name":"Sammy"},"score":0,"creation_date":1545218489,"post_id":53847066,"comment_id":94547727,"body_markdown":"Not sure what exactly is the requirement to use CuratorFramework. BTW , What Kafka Version you are using?","body":"Not sure what exactly is the requirement to use CuratorFramework. BTW , What Kafka Version you are using?"}],"answers":[{"tags":[],"owner":{"account_id":6512090,"reputation":336,"user_id":5038981,"display_name":"Sammy"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1545220906,"creation_date":1545220906,"answer_id":53850809,"question_id":53847066,"body_markdown":"Kafka Javdocs clearly mentions that :\r\n\r\nThe Kafka consumer is NOT thread-safe. All network I/O happens in the thread of the application making the call. It is the responsibility of the user to ensure that multi-threaded access is properly synchronized. Un-synchronized access will result in ConcurrentModificationException.\r\n\r\nMore details present at http://kafka.apache.org/21/javadoc/org/apache/kafka/clients/consumer/KafkaConsumer.html#multithreaded","title":"Getting KafkaConsumer is not safe for multi-threaded access error when I use CuratorFrameworkFactory.newClient()","body":"<p>Kafka Javdocs clearly mentions that :</p>\n\n<p>The Kafka consumer is NOT thread-safe. All network I/O happens in the thread of the application making the call. It is the responsibility of the user to ensure that multi-threaded access is properly synchronized. Un-synchronized access will result in ConcurrentModificationException.</p>\n\n<p>More details present at <a href=\"http://kafka.apache.org/21/javadoc/org/apache/kafka/clients/consumer/KafkaConsumer.html#multithreaded\" rel=\"noreferrer\">http://kafka.apache.org/21/javadoc/org/apache/kafka/clients/consumer/KafkaConsumer.html#multithreaded</a></p>\n"},{"tags":[],"owner":{"account_id":16419918,"reputation":2129,"user_id":11861378,"display_name":"Ad&#225;n Escobar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663641151,"creation_date":1663639712,"answer_id":73780935,"question_id":53847066,"body_markdown":"here are some example to handle several topics thread-safe.\r\n\r\n 1. One topic Consumer Per Thread, avoiding multi-threaded access error\r\n\r\n        class Consumer implements Runnable {\r\n            private volatile boolean exit = false;\r\n\r\n            private String topic;\r\n\r\n            Consumer(String topic){\r\n                this.topic=topic;\r\n            }\r\n\r\n            @Override\r\n            public void run() {\r\n                KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;String,String&gt;(props);\r\n\r\n                try{\r\n                    consumer.subscribe(Collections.singletonList(topic));\r\n\r\n                    while (!exit) {\r\n                        ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofSeconds(1));\r\n            \r\n                        for (ConsumerRecord&lt;String, String&gt; record : records){\r\n                            System.out.print(&quot;Topic: &quot; + record.topic() + &quot;, &quot;);\r\n                            System.out.print(&quot;Partition: &quot; + record.partition() + &quot;,&quot;);\r\n                            System.out.print(&quot;Key:&quot; + record.key() + &quot;, &quot;);\r\n                            System.out.println(&quot;Value: &quot; + record.value() + &quot;, &quot;);\r\n\r\n                            //do your stuff here\r\n\r\n                        }\r\n                    }\r\n                } catch (Exception e){\r\n                    e.printStackTrace();\r\n                }finally {\r\n                    consumer.close();\r\n                }\r\n            }\r\n            public void stop() {\r\n               exit = true;\r\n            }\r\n         }\r\n\r\n 2. One consumer with dynamic topic add, and multi-threaded access synchronized.\r\n\r\n        class Consumer implements Runnable {\r\n            private volatile boolean exit = false;\r\n\r\n            private final List&lt;String&gt; topics;\r\n            private final KafkaConsumer&lt;String, String&gt; consumer;\r\n\r\n            Consumer(){\r\n                topics = new ArrayList&lt;&gt;();\r\n                consumer = new KafkaConsumer&lt;String,String&gt;(props);\r\n            }\r\n\r\n            public void addTopic(String newTopic){\r\n                 synchronized(this) {\r\n                    topics.add(newTopic);\r\n                    consumer.subscribe(topics);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void run() {\r\n                try{\r\n                    while (!exit) {\r\n                        synchronized(this) {\r\n                            ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofSeconds(1));\r\n                            for (ConsumerRecord&lt;String, String&gt; record : records){\r\n                                System.out.print(&quot;Topic: &quot; + record.topic() + &quot;, &quot;);\r\n                                System.out.print(&quot;Partition: &quot; + record.partition() + &quot;,&quot;);\r\n                                System.out.print(&quot;Key:&quot; + record.key() + &quot;, &quot;);\r\n                                System.out.println(&quot;Value: &quot; + record.value() + &quot;, &quot;);\r\n\r\n                                //do your stuff here\r\n                            }\r\n                        }\r\n\r\n                        //IMPORTANT: sleep to avoid lock addTopic method\r\n                        try { Thread.sleep(200); } catch (Exception ex) { }\r\n                    }\r\n                } catch (Exception e){\r\n                    e.printStackTrace();\r\n                }finally {\r\n                    consumer.close();\r\n                }\r\n            }\r\n            public void stop() {\r\n               exit = true;\r\n            }\r\n         }\r\n\r\nI hope it helps\r\n","title":"Getting KafkaConsumer is not safe for multi-threaded access error when I use CuratorFrameworkFactory.newClient()","body":"<p>here are some example to handle several topics thread-safe.</p>\n<ol>\n<li><p>One topic Consumer Per Thread, avoiding multi-threaded access error</p>\n<pre><code>class Consumer implements Runnable {\n    private volatile boolean exit = false;\n\n    private String topic;\n\n    Consumer(String topic){\n        this.topic=topic;\n    }\n\n    @Override\n    public void run() {\n        KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;String,String&gt;(props);\n\n        try{\n            consumer.subscribe(Collections.singletonList(topic));\n\n            while (!exit) {\n                ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofSeconds(1));\n\n                for (ConsumerRecord&lt;String, String&gt; record : records){\n                    System.out.print(&quot;Topic: &quot; + record.topic() + &quot;, &quot;);\n                    System.out.print(&quot;Partition: &quot; + record.partition() + &quot;,&quot;);\n                    System.out.print(&quot;Key:&quot; + record.key() + &quot;, &quot;);\n                    System.out.println(&quot;Value: &quot; + record.value() + &quot;, &quot;);\n\n                    //do your stuff here\n\n                }\n            }\n        } catch (Exception e){\n            e.printStackTrace();\n        }finally {\n            consumer.close();\n        }\n    }\n    public void stop() {\n       exit = true;\n    }\n }\n</code></pre>\n</li>\n<li><p>One consumer with dynamic topic add, and multi-threaded access synchronized.</p>\n<pre><code>class Consumer implements Runnable {\n    private volatile boolean exit = false;\n\n    private final List&lt;String&gt; topics;\n    private final KafkaConsumer&lt;String, String&gt; consumer;\n\n    Consumer(){\n        topics = new ArrayList&lt;&gt;();\n        consumer = new KafkaConsumer&lt;String,String&gt;(props);\n    }\n\n    public void addTopic(String newTopic){\n         synchronized(this) {\n            topics.add(newTopic);\n            consumer.subscribe(topics);\n        }\n    }\n\n    @Override\n    public void run() {\n        try{\n            while (!exit) {\n                synchronized(this) {\n                    ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofSeconds(1));\n                    for (ConsumerRecord&lt;String, String&gt; record : records){\n                        System.out.print(&quot;Topic: &quot; + record.topic() + &quot;, &quot;);\n                        System.out.print(&quot;Partition: &quot; + record.partition() + &quot;,&quot;);\n                        System.out.print(&quot;Key:&quot; + record.key() + &quot;, &quot;);\n                        System.out.println(&quot;Value: &quot; + record.value() + &quot;, &quot;);\n\n                        //do your stuff here\n                    }\n                }\n\n                //IMPORTANT: sleep to avoid lock addTopic method\n                try { Thread.sleep(200); } catch (Exception ex) { }\n            }\n        } catch (Exception e){\n            e.printStackTrace();\n        }finally {\n            consumer.close();\n        }\n    }\n    public void stop() {\n       exit = true;\n    }\n }\n</code></pre>\n</li>\n</ol>\n<p>I hope it helps</p>\n"}],"owner":{"account_id":4686317,"reputation":113,"user_id":3793648,"display_name":"edrichhans"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20915,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1663641151,"creation_date":1545207354,"question_id":53847066,"body_markdown":"I am receiving this error below:\r\n\r\n    java.util.ConcurrentModificationException: KafkaConsumer is not safe for multi-threaded access\r\n\r\nwhen I include this in my code:\r\n\r\n    CuratorFrameworkFactory.newClient()\r\n\r\nI don&#39;t understand what&#39;s causing the error. Any help?\r\n\r\nThanks.","title":"Getting KafkaConsumer is not safe for multi-threaded access error when I use CuratorFrameworkFactory.newClient()","body":"<p>I am receiving this error below:</p>\n\n<pre><code>java.util.ConcurrentModificationException: KafkaConsumer is not safe for multi-threaded access\n</code></pre>\n\n<p>when I include this in my code:</p>\n\n<pre><code>CuratorFrameworkFactory.newClient()\n</code></pre>\n\n<p>I don't understand what's causing the error. Any help?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","jvm","bytecode","jvm-bytecode","java-record"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":4,"creation_date":1660668718,"post_id":73377190,"comment_id":129584733,"body_markdown":"You are partially correct - for bytecode, the JVMS is more relevant, and this does not have many of the restrictions of the Java language. Afaik, for the JVM to trust a final field in a record, the record must extend `java.lang.Record` and have a `Record` attribute. See the JVMS to see if such a class is according to spec: https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.7.30","body":"You are partially correct - for bytecode, the JVMS is more relevant, and this does not have many of the restrictions of the Java language. Afaik, for the JVM to trust a final field in a record, the record must extend <code>java.lang.Record</code> and have a <code>Record</code> attribute. See the JVMS to see if such a class is according to spec: <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.7.30\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jvms/se17/html/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"down_vote_count":2,"up_vote_count":10,"is_accepted":true,"score":8,"last_activity_date":1662987964,"creation_date":1660748491,"answer_id":73390758,"question_id":73377190,"body_markdown":"Your question posits a false dichotomy.  Records are a language feature, with some degree of JVM support (primarily for reflection), but that doesn&#39;t mean that the JVM will (or even can) enforce all the requirements on records that the language requires.  (Gaps like this are inevitable, as the JVM is a more general computing substrate, and which services other languages besides Java; for example, the JVM permits methods to be overloaded on return type, but the language does not.)  \r\n\r\nThat said, the behavior you describe is a pretty serious party foul, and those who engage in it should be shamed out of the community.  (It is also possible they are doing so out of ignorance, in which case they might be educable.)  Most likely, these people think they are being &quot;clever&quot; in subverting rules they don&#39;t like, but in the process, poisoning the well by promoting behaviors that users may find astonishing.  \r\n\r\n**EDIT**\r\n\r\nThe author of the transformer posted some further context here about what they were trying to accomplish.  I&#39;ll give them credit for making a good faith effort to conform with the semantics of records, but it undermines the final field semantics, and only appears to work for records that do not customize the constructor, accessors, equals, or hashCode methods.  This describes a lot of records, but not all.  This is a good cautionary tale; even when trying to preserve the semantics of a class while transforming it, it is easy to make questionable assumptions about what the class does or does not do that can get in the way.\r\n\r\nThe author waves away the concern about the final field semantics as &quot;not likely to cause a problem.&quot;  But this is not the bar.  The language provides certain semantics for records.  This transformation undermines those semantics, and yet still tells the user they are records.  Even if they are &quot;minor&quot; and &quot;unlikely&quot;, you are breaking the semantics that the Java language promises.  &quot;99% compatible&quot; rounds to zero in this case.  So I stand by my assertion that this framework is taking inappropriate liberties with the language semantics.  They may have been well-intentioned, they may have tried hard to not break things, but break things they did.  ","title":"Bytecode transforming record class to be mutable","body":"<p>Your question posits a false dichotomy.  Records are a language feature, with some degree of JVM support (primarily for reflection), but that doesn't mean that the JVM will (or even can) enforce all the requirements on records that the language requires.  (Gaps like this are inevitable, as the JVM is a more general computing substrate, and which services other languages besides Java; for example, the JVM permits methods to be overloaded on return type, but the language does not.)</p>\n<p>That said, the behavior you describe is a pretty serious party foul, and those who engage in it should be shamed out of the community.  (It is also possible they are doing so out of ignorance, in which case they might be educable.)  Most likely, these people think they are being &quot;clever&quot; in subverting rules they don't like, but in the process, poisoning the well by promoting behaviors that users may find astonishing.</p>\n<p><strong>EDIT</strong></p>\n<p>The author of the transformer posted some further context here about what they were trying to accomplish.  I'll give them credit for making a good faith effort to conform with the semantics of records, but it undermines the final field semantics, and only appears to work for records that do not customize the constructor, accessors, equals, or hashCode methods.  This describes a lot of records, but not all.  This is a good cautionary tale; even when trying to preserve the semantics of a class while transforming it, it is easy to make questionable assumptions about what the class does or does not do that can get in the way.</p>\n<p>The author waves away the concern about the final field semantics as &quot;not likely to cause a problem.&quot;  But this is not the bar.  The language provides certain semantics for records.  This transformation undermines those semantics, and yet still tells the user they are records.  Even if they are &quot;minor&quot; and &quot;unlikely&quot;, you are breaking the semantics that the Java language promises.  &quot;99% compatible&quot; rounds to zero in this case.  So I stand by my assertion that this framework is taking inappropriate liberties with the language semantics.  They may have been well-intentioned, they may have tried hard to not break things, but break things they did.</p>\n"},{"tags":[],"owner":{"account_id":72209,"reputation":3901,"user_id":208581,"display_name":"Rob Bygrave"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1663640932,"creation_date":1662677983,"answer_id":73655750,"question_id":73377190,"body_markdown":"Background\r\n-----\r\nFor a [background to this question][1] with respect to ORM modelling of concatenated primary keys.\r\n\r\n\r\nUpdate 13th Sept\r\n------\r\nSo it&#39;s been stated: a bytecode transformer can&#39;t remove the final modifier of a record field. So ends the story.\r\n\r\n----\r\nFor what its worth I&#39;ll add the thoughts that came out of our review. \r\n\r\nThis issue as we saw it really boiled down to the **final modifier** and the view record types are a **language feature (not a jvm feature)** and the issues around what that means. \r\n\r\nIn that way you can almost paraphrase the posted question as: Are records a language feature or a jvm feature? We could view the first part of the response as - Yes, records are a language feature (hence the requirements on javac with jdk support and semantic requirements of equals/hashCode etc).\r\n\r\nAll the various questions around breaking record semantics equals/hashCode, accessors, constructors, customisation of those etc - this all reinforced the view that record types are indeed a language feature. We were super happy to get those [false] claims because we could prove via tests that nothing was broken and we could explain the details on why that was.\r\n\r\nQ: But it&#39;s dodgy removing the final modifier and we broke records right? Well, it went to effectively final / effectively immutable. Another way of looking at that is to play devils advocate and see how to stuff it up - e.g. If we were to create a record instance, partially populate it and hand it off in that partially populated state that would stuff up equals/hashCode. Obviously you don&#39;t hand off a partially loaded record / partially initialised instance. Where we ended was more the question around whether record type could go from being a language feature to a jvm feature (would a future jvm assume a final) and thoughts around that.\r\n\r\nTo be clear, we don&#39;t have a failing test or jvm error or anything like that we can point to - there is no case where the ebean bytecode transformer is applied to records and that breaks anything. What we do have is the question around the assumption that record types are a language feature vs jvm feature, and that question of effectively final/effectively immutable vs actual final/immutable [a question of semantics like equals/hashCode vs bytecode &amp; Java memory model &quot;proper construction&quot; etc].\r\n\r\n\r\n\r\nUpdate 12th Sept\r\n--------\r\nUltimately I think there are 2 ways to look at this:\r\n\r\n1. **Language view:** Record types are extremely important, they allow pattern matching are a kind of golden key that will unlock lots of cool language features going forward. The details don&#39;t matter and the message is simple - ***don&#39;t anyone **** this up !!***\r\n\r\n2. **Details view:** When we look at the bytecode, semantics, java memory model and we compare to how we would write shallowly immutable types without records we see ***exactly nothing new***. No new bytecode, no different semantics etc. This is typified by ORM `@EmbeddedId` being an exact match to record type. Similarly the changes ebean needed to make to support record type where exactly ***none***. \r\n\r\nBrian read &#39;mutable&#39; and &#39;not final&#39; and fired his bazooka and that is fair enough. What the question didn&#39;t say was ***&#39;effectively immutable&#39;, &#39;effectively final&#39;, &#39;late initialisation&#39;*** - heck, its even a language feature in kotlin - `lateinit`.\r\n\r\nA ***bytecode transformation agent that does not even know about record types*** is lined up for some choice words. What is it actually getting wrong?  Well, once you get into the details - nothing.\r\n\r\n**Q: But the semantics of `Record::equals()` is new?** Not to a bytecode transformer no. The only way to **** this up is for a dev to provide a customised equals/hashCode implementation and for that to not follow the semantics of `Record::equals()` - but that is on the dev providing the equals/hashCode implementation and not on the bytecode transformer.\r\n\r\nAlso noting the semantics of `Record::equals()` match the old and existing `@EmbeddedId`. This actually isn&#39;t new from an ORM perspective.\r\n\r\n**Q: So ebean supported java records by doing nothing?**\r\nWell yeah, ebean doesn&#39;t require a default constructor and hence we been supporting shallowly immutable types for years. Hence records presented as nothing new. Cool and useful but nothing new.\r\n\r\nI&#39;ll write up all the details and we will have a review and go from there.\r\n\r\n\r\nUpdate 11th Sept - Review session\r\n-------\r\n- I will look to organise a session for people who are interested in the details around this issue. The questions Brian has posed. What record type bytecode looks like, what the enhancement does and why it does it. What actually occurs when we deal with customisation code in constructor, equals/hashCode, accessors, toString etc (it&#39;s actually pretty simple once you understand what its doing).\r\n\r\n- I&#39;ll happily take any test using `@Embeddable`,`record`,junit5, Java 16. If it fails under enhancement I will buy you a beer! We likely will ask permission to add the test to our test suite (Apache2).\r\n\r\n- Ebean being in the ORM business deals with interesting problems like interception, lazy loading, partial objects, dirty checking etc. Bytecode transformation is a commonly used tool in this space because it can greatly simplify how we handle some tough problems. Record type are nice, interesting and useful but they also don&#39;t present anything new to ebean bytecode transformation and in fact have the same semantics and needs of `EmbeddedId`.\r\n\r\n- **Next steps:** Have the review session and determine how to proceed.\r\n\r\nUpdate 11th Sept\r\n----------\r\n- Still no actual evidence of incorrect behaviour, broken semantics, incorrect bytecode\r\n- Brian has expressed concern that the ebean transformation does not support the semantics of `Record::equals()`. This concern is misplaced, there is nothing new, different or difficult here as far as the bytecode transformation is concerned. We are now really solidly in the comfort zone of what the ebean transformation does. The chance of a real problem here has significantly dropped. The chance of an issue specific to record type has now gone to almost zero. To explain that, we have no problem with the record supplied equals/hashCode implementations. If people provide customized equals/hashCode implementation then these of course must honor the semantics of record but that aspect is on the author of those implementations - as far as ebean bytecode transformation is concerned it just needs to support a provided implementation (in interception terms) that but this no different to the non-record normal class case. There is nothing new or different here in terms of what the ebean transformation has been doing for 16 years. \r\n\r\n\r\nSummary\r\n-------\r\n- Currently there is no evidence of incorrect behaviour, broken semantics, incorrect bytecode\r\n- Brian is concerned that the bytecode transformation might not handle the cases of customisation of constructor, accessors, equals, or hashCode methods. This is very good news indeed because I&#39;d suggest Brian&#39;s concern is misplaced. To explain that, these customisations are not specific to record type and are cases that the bytecode transformation has to deal with in normal classes (normal non-record `@Entity` and `@Embeddable` classes). These cases is what ebean has been dealing with for 16 years now and I&#39;d suggest is highly battle tested.\r\n- To state clearly, an issue in this area around customisation of those methods is *extremely* unlikely to be specific to record type. Let that sink in. \r\n- Of course there is a chance we might manage to find a new edge case in this area where the bytecode transformation does work correctly. If you could pick someone to do that, Brian would be your pick. The good news here is that these cases and this area are absolutely in our wheelhouse and I&#39;d be confident of fixing them.\r\n\r\n\r\n---------\r\n\r\nDetails\r\n------\r\nAs the author of the bytecode transformation in question I&#39;ll just add some details.\r\n\r\nTLDR: The intention and my expectation is that the semantics of record (as I understand those semantics) is still 100% honored. At this stage I need to get more clarity on the specific semantics that Brian is unhappy about.\r\n\r\n- The transformed record still looks immutable and acts immutably to code using it (effectively immutable)\r\n- The semantics of hashcode() and equals() is honored (unchanged)\r\n- The semantics and result of accessor methods is unchanged\r\n- The semantics and result of toString() is unchanged\r\n- The semantics and result of constructor us unchanged\r\n\r\nThe effective change of this bytecode transformation is that the bytecode is going from &#39;strictly shallowly immutable at construction&#39; to &#39;effectively shallowly immutable allowing for some late initialisation&#39;.\r\n\r\nThe late initialisation that can occur is transparent to any code/bytecode that uses the transformed record - code using the transformed record will experience no difference in behaviour or result and I would suggest no difference in semantics.\r\n\r\nCode using this transformed record will still think it is immutable and is not able to mutate it.\r\n\r\nFor folks familiar with Kotlin `lateinit` it is a bit similar to that - still effectively immutable but allows for late initialisation of the record fields in question. [With &#39;late&#39; meaning after construction]\r\n\r\nAlso noting that the transformation is adding some extra fields, methods and some interception on the accessors all for &#39;internal use only&#39; and nothing is added to the record publicly in terms of fields or methods - none of this is visible to code using the transformed record. My expectation is that they have not changed the semantics of record but more clarity is required here.\r\n\r\nThe fields have the final modifier removed to allow late initialisation. This means from a Java memory model perspective we have indeed lost the nice &#39;final on construction JMM semantic&#39; that we get with final fields in general. I&#39;d be super surprised if this was the specific issue but ideally we get that clarified.\r\n\r\n----\r\nIn reviewing the bytecode again and reading the comments above it isn&#39;t yet clear to me what the specific semantics of records Brian is especially unhappy about. As I see it the possible options could be:\r\n\r\n- No transformation of records is allowed at all?\r\n- No extra fields or methods are allowed at all even if they are internal only?\r\n- We can&#39;t go from &#39;strictly immutable at construction&#39; to &#39;effectively immutable with late initialisation&#39;? (Noting the associated slight JMM change due to loss of final modifier on those fields)\r\n\r\n\r\nAgain, the semantics and results of all record methods (hashcode, equals, toString, constructor) are unchanged so it would be good to get good clarity on what the specific party foul is and hence what specific semantics are in question.\r\n\r\n\r\n------------\r\nEdit:\r\n\r\nQuick overview example  \r\n\r\n**Before** transformation\r\n\r\n    @Embeddable\r\n    public record UserRoleId(Integer userId, String roleId) {}\r\n\r\n\r\n**After** transformsation (without synthetic fields and methods, IntelliJ decompile to source form)\r\n\r\n    @Embeddable\r\n    public record UserRoleId(Integer userId, String roleId) implements EntityBean {\r\n      private Integer userId;\r\n      private String roleId;\r\n\r\n      public UserRoleId(Integer userId, String roleId) {\r\n        this._ebean_intercept = new InterceptReadWrite(this);\r\n        this._ebean_set_userId(userId);\r\n        this._ebean_set_roleId(roleId);\r\n      }\r\n\r\n      public Integer userId() {\r\n        return this._ebean_get_userId();\r\n      }\r\n\r\n      public String roleId() {\r\n        return this._ebean_get_roleId();\r\n      }\r\n    }\r\n\r\n\r\n**Diff in bytecode**: \r\n\r\nI&#39;ve put the before and after in bytecode form in a second answer as otherwise we exceed the character limit here.\r\n\r\nFolks reviewing the bytecode, please have a look at that second posted answer.\r\n\r\n\r\n**Edit re customisation of record types**\r\n\r\nBrian has suggested that &quot;but it only seems to work for records that do not customize the constructor, accessors, equals, or hashCode methods&quot;.\r\n\r\nThis isn&#39;t the case. Customisation of all those is expected, allowed, handled + multiple constructors. To explain that a bit more, these cases are not different to the non-record class cases that we have already been dealing with for many years. Ebean is 16 years old, we have been doing bytecode transformation for that time.\r\n\r\nQ: Have we made mistakes in the past? \r\nAbsolutely.  \r\n\r\nQ: Do we have a mistake in what the transformation is doing with `@Embeddable` `record`? \r\nAt the moment we have no evidence of a mistake. (ok, it&#39;s a bug that we have that _ebean_identity field there but I&#39;ve just fixed that).\r\n\r\nAlthough record type is new&#39;ish (Java 16) the concept of shallow immutability isn&#39;t new and bytecode wise records are not too different from immutable types we have been able to code forever in java.\r\n\r\nThe JPA spec requires default constructor (btw: a restriction soon to be removed it seems) and getters/setters but ebean does not have those restrictions. This means that the customisations that Brian mentions are things that ebean transformation has had to deal with for a very long time - 16 years actually, as these are all the things with expect with non record entity classes. For the mutating entity class case there are other slightly interesting things that we need to deal with (around collections) that we do not for record types.\r\n\r\nThat is, there isn&#39;t any customisation of record types that would be new or different to what the ebean transformer has been dealing with. \r\n\r\nAnother detail to put in here is that the JVM didn&#39;t always enforce final. From vague memory from around Java 8 or so the JVM really did enforce final. This is the sort of little detail that might be concerning/nagging Brian. \r\n\r\n-------\r\n**Edit:** \r\n\r\nAbsolutely we should not be taking things personally but lets put this in context. I&#39;ve been in the Java community for 25 years, I&#39;m the organiser of the local JUG, I have an open source project that is 16 years old that is taking a serious reputational hit right here.\r\n\r\nBrian Geotz, a literal Java God has said &quot;pretty serious party foul&quot;, &quot;shamed out of the community&quot;, &quot;ignorance&quot;, &quot;poisoning the well&quot; - to someone like me who is a Java fanboy these are literally hammer blows from a God. Being referred to as &quot;the author&quot; doesn&#39;t actually soften those blows in case you were wondering, in fact it hurts more because it suggests this isn&#39;t a really serious issue. In case it isn&#39;t obvious, I&#39;m taking this issue really really really seriously and I&#39;ll be pushing to get right to the detail of this and confirm if there is indeed a problem with the bytecode transformation here. \r\n\r\n24 hours in and I&#39;m holding up. I might even foolishly be thinking I am starting to get to the heart of the matter. The current TLDR is probably that you should not take on bytecode transformation unless you really know what you are doing. For myself, I&#39;ve got 16 years of taking bytecode transformation seriously. I&#39;m not ignorant of the size of the challenge and the depth of knowledge you need to get this right. This is not tiddly winks.\r\n\r\nAt this stage we don&#39;t actually have evidence of wrong doing and it&#39;s more a suggestion that ebean might be incorrectly handling customisation of record types. This is actually *really really good news* to me because I&#39;ve got 16 years of experience to fall back on that suggests that the bytecode transformation does indeed cover all the cases Brian is concerned about (plus other cases thrown in by Kotlin, Scala and Groovy compilers and other cases thrown in by mutable types). \r\n\r\nRecord types are actually the nice easy case as far as ebean transformation is concerned. \r\n\r\n\r\n**Next steps:** \r\n\r\nCan we get actual evidence of ebean transformation doing the wrong thing? \r\n\r\nBrian might be able to give me a curly example to test out and report back the bytecode. I think this is where we are at.\r\n\r\n\r\n  [1]: https://ebean.io/docs/interesting/embedded-id","title":"Bytecode transforming record class to be mutable","body":"<h2>Background</h2>\n<p>For a <a href=\"https://ebean.io/docs/interesting/embedded-id\" rel=\"nofollow noreferrer\">background to this question</a> with respect to ORM modelling of concatenated primary keys.</p>\n<h2>Update 13th Sept</h2>\n<p>So it's been stated: a bytecode transformer can't remove the final modifier of a record field. So ends the story.</p>\n<hr />\n<p>For what its worth I'll add the thoughts that came out of our review.</p>\n<p>This issue as we saw it really boiled down to the <strong>final modifier</strong> and the view record types are a <strong>language feature (not a jvm feature)</strong> and the issues around what that means.</p>\n<p>In that way you can almost paraphrase the posted question as: Are records a language feature or a jvm feature? We could view the first part of the response as - Yes, records are a language feature (hence the requirements on javac with jdk support and semantic requirements of equals/hashCode etc).</p>\n<p>All the various questions around breaking record semantics equals/hashCode, accessors, constructors, customisation of those etc - this all reinforced the view that record types are indeed a language feature. We were super happy to get those [false] claims because we could prove via tests that nothing was broken and we could explain the details on why that was.</p>\n<p>Q: But it's dodgy removing the final modifier and we broke records right? Well, it went to effectively final / effectively immutable. Another way of looking at that is to play devils advocate and see how to stuff it up - e.g. If we were to create a record instance, partially populate it and hand it off in that partially populated state that would stuff up equals/hashCode. Obviously you don't hand off a partially loaded record / partially initialised instance. Where we ended was more the question around whether record type could go from being a language feature to a jvm feature (would a future jvm assume a final) and thoughts around that.</p>\n<p>To be clear, we don't have a failing test or jvm error or anything like that we can point to - there is no case where the ebean bytecode transformer is applied to records and that breaks anything. What we do have is the question around the assumption that record types are a language feature vs jvm feature, and that question of effectively final/effectively immutable vs actual final/immutable [a question of semantics like equals/hashCode vs bytecode &amp; Java memory model &quot;proper construction&quot; etc].</p>\n<h2>Update 12th Sept</h2>\n<p>Ultimately I think there are 2 ways to look at this:</p>\n<ol>\n<li><p><strong>Language view:</strong> Record types are extremely important, they allow pattern matching are a kind of golden key that will unlock lots of cool language features going forward. The details don't matter and the message is simple - <em><strong>don't anyone **** this up !!</strong></em></p>\n</li>\n<li><p><strong>Details view:</strong> When we look at the bytecode, semantics, java memory model and we compare to how we would write shallowly immutable types without records we see <em><strong>exactly nothing new</strong></em>. No new bytecode, no different semantics etc. This is typified by ORM <code>@EmbeddedId</code> being an exact match to record type. Similarly the changes ebean needed to make to support record type where exactly <em><strong>none</strong></em>.</p>\n</li>\n</ol>\n<p>Brian read 'mutable' and 'not final' and fired his bazooka and that is fair enough. What the question didn't say was <em><strong>'effectively immutable', 'effectively final', 'late initialisation'</strong></em> - heck, its even a language feature in kotlin - <code>lateinit</code>.</p>\n<p>A <em><strong>bytecode transformation agent that does not even know about record types</strong></em> is lined up for some choice words. What is it actually getting wrong?  Well, once you get into the details - nothing.</p>\n<p><strong>Q: But the semantics of <code>Record::equals()</code> is new?</strong> Not to a bytecode transformer no. The only way to **** this up is for a dev to provide a customised equals/hashCode implementation and for that to not follow the semantics of <code>Record::equals()</code> - but that is on the dev providing the equals/hashCode implementation and not on the bytecode transformer.</p>\n<p>Also noting the semantics of <code>Record::equals()</code> match the old and existing <code>@EmbeddedId</code>. This actually isn't new from an ORM perspective.</p>\n<p><strong>Q: So ebean supported java records by doing nothing?</strong>\nWell yeah, ebean doesn't require a default constructor and hence we been supporting shallowly immutable types for years. Hence records presented as nothing new. Cool and useful but nothing new.</p>\n<p>I'll write up all the details and we will have a review and go from there.</p>\n<h2>Update 11th Sept - Review session</h2>\n<ul>\n<li><p>I will look to organise a session for people who are interested in the details around this issue. The questions Brian has posed. What record type bytecode looks like, what the enhancement does and why it does it. What actually occurs when we deal with customisation code in constructor, equals/hashCode, accessors, toString etc (it's actually pretty simple once you understand what its doing).</p>\n</li>\n<li><p>I'll happily take any test using <code>@Embeddable</code>,<code>record</code>,junit5, Java 16. If it fails under enhancement I will buy you a beer! We likely will ask permission to add the test to our test suite (Apache2).</p>\n</li>\n<li><p>Ebean being in the ORM business deals with interesting problems like interception, lazy loading, partial objects, dirty checking etc. Bytecode transformation is a commonly used tool in this space because it can greatly simplify how we handle some tough problems. Record type are nice, interesting and useful but they also don't present anything new to ebean bytecode transformation and in fact have the same semantics and needs of <code>EmbeddedId</code>.</p>\n</li>\n<li><p><strong>Next steps:</strong> Have the review session and determine how to proceed.</p>\n</li>\n</ul>\n<h2>Update 11th Sept</h2>\n<ul>\n<li>Still no actual evidence of incorrect behaviour, broken semantics, incorrect bytecode</li>\n<li>Brian has expressed concern that the ebean transformation does not support the semantics of <code>Record::equals()</code>. This concern is misplaced, there is nothing new, different or difficult here as far as the bytecode transformation is concerned. We are now really solidly in the comfort zone of what the ebean transformation does. The chance of a real problem here has significantly dropped. The chance of an issue specific to record type has now gone to almost zero. To explain that, we have no problem with the record supplied equals/hashCode implementations. If people provide customized equals/hashCode implementation then these of course must honor the semantics of record but that aspect is on the author of those implementations - as far as ebean bytecode transformation is concerned it just needs to support a provided implementation (in interception terms) that but this no different to the non-record normal class case. There is nothing new or different here in terms of what the ebean transformation has been doing for 16 years.</li>\n</ul>\n<h2>Summary</h2>\n<ul>\n<li>Currently there is no evidence of incorrect behaviour, broken semantics, incorrect bytecode</li>\n<li>Brian is concerned that the bytecode transformation might not handle the cases of customisation of constructor, accessors, equals, or hashCode methods. This is very good news indeed because I'd suggest Brian's concern is misplaced. To explain that, these customisations are not specific to record type and are cases that the bytecode transformation has to deal with in normal classes (normal non-record <code>@Entity</code> and <code>@Embeddable</code> classes). These cases is what ebean has been dealing with for 16 years now and I'd suggest is highly battle tested.</li>\n<li>To state clearly, an issue in this area around customisation of those methods is <em>extremely</em> unlikely to be specific to record type. Let that sink in.</li>\n<li>Of course there is a chance we might manage to find a new edge case in this area where the bytecode transformation does work correctly. If you could pick someone to do that, Brian would be your pick. The good news here is that these cases and this area are absolutely in our wheelhouse and I'd be confident of fixing them.</li>\n</ul>\n<hr />\n<h2>Details</h2>\n<p>As the author of the bytecode transformation in question I'll just add some details.</p>\n<p>TLDR: The intention and my expectation is that the semantics of record (as I understand those semantics) is still 100% honored. At this stage I need to get more clarity on the specific semantics that Brian is unhappy about.</p>\n<ul>\n<li>The transformed record still looks immutable and acts immutably to code using it (effectively immutable)</li>\n<li>The semantics of hashcode() and equals() is honored (unchanged)</li>\n<li>The semantics and result of accessor methods is unchanged</li>\n<li>The semantics and result of toString() is unchanged</li>\n<li>The semantics and result of constructor us unchanged</li>\n</ul>\n<p>The effective change of this bytecode transformation is that the bytecode is going from 'strictly shallowly immutable at construction' to 'effectively shallowly immutable allowing for some late initialisation'.</p>\n<p>The late initialisation that can occur is transparent to any code/bytecode that uses the transformed record - code using the transformed record will experience no difference in behaviour or result and I would suggest no difference in semantics.</p>\n<p>Code using this transformed record will still think it is immutable and is not able to mutate it.</p>\n<p>For folks familiar with Kotlin <code>lateinit</code> it is a bit similar to that - still effectively immutable but allows for late initialisation of the record fields in question. [With 'late' meaning after construction]</p>\n<p>Also noting that the transformation is adding some extra fields, methods and some interception on the accessors all for 'internal use only' and nothing is added to the record publicly in terms of fields or methods - none of this is visible to code using the transformed record. My expectation is that they have not changed the semantics of record but more clarity is required here.</p>\n<p>The fields have the final modifier removed to allow late initialisation. This means from a Java memory model perspective we have indeed lost the nice 'final on construction JMM semantic' that we get with final fields in general. I'd be super surprised if this was the specific issue but ideally we get that clarified.</p>\n<hr />\n<p>In reviewing the bytecode again and reading the comments above it isn't yet clear to me what the specific semantics of records Brian is especially unhappy about. As I see it the possible options could be:</p>\n<ul>\n<li>No transformation of records is allowed at all?</li>\n<li>No extra fields or methods are allowed at all even if they are internal only?</li>\n<li>We can't go from 'strictly immutable at construction' to 'effectively immutable with late initialisation'? (Noting the associated slight JMM change due to loss of final modifier on those fields)</li>\n</ul>\n<p>Again, the semantics and results of all record methods (hashcode, equals, toString, constructor) are unchanged so it would be good to get good clarity on what the specific party foul is and hence what specific semantics are in question.</p>\n<hr />\n<p>Edit:</p>\n<p>Quick overview example</p>\n<p><strong>Before</strong> transformation</p>\n<pre><code>@Embeddable\npublic record UserRoleId(Integer userId, String roleId) {}\n</code></pre>\n<p><strong>After</strong> transformsation (without synthetic fields and methods, IntelliJ decompile to source form)</p>\n<pre><code>@Embeddable\npublic record UserRoleId(Integer userId, String roleId) implements EntityBean {\n  private Integer userId;\n  private String roleId;\n\n  public UserRoleId(Integer userId, String roleId) {\n    this._ebean_intercept = new InterceptReadWrite(this);\n    this._ebean_set_userId(userId);\n    this._ebean_set_roleId(roleId);\n  }\n\n  public Integer userId() {\n    return this._ebean_get_userId();\n  }\n\n  public String roleId() {\n    return this._ebean_get_roleId();\n  }\n}\n</code></pre>\n<p><strong>Diff in bytecode</strong>:</p>\n<p>I've put the before and after in bytecode form in a second answer as otherwise we exceed the character limit here.</p>\n<p>Folks reviewing the bytecode, please have a look at that second posted answer.</p>\n<p><strong>Edit re customisation of record types</strong></p>\n<p>Brian has suggested that &quot;but it only seems to work for records that do not customize the constructor, accessors, equals, or hashCode methods&quot;.</p>\n<p>This isn't the case. Customisation of all those is expected, allowed, handled + multiple constructors. To explain that a bit more, these cases are not different to the non-record class cases that we have already been dealing with for many years. Ebean is 16 years old, we have been doing bytecode transformation for that time.</p>\n<p>Q: Have we made mistakes in the past?\nAbsolutely.</p>\n<p>Q: Do we have a mistake in what the transformation is doing with <code>@Embeddable</code> <code>record</code>?\nAt the moment we have no evidence of a mistake. (ok, it's a bug that we have that _ebean_identity field there but I've just fixed that).</p>\n<p>Although record type is new'ish (Java 16) the concept of shallow immutability isn't new and bytecode wise records are not too different from immutable types we have been able to code forever in java.</p>\n<p>The JPA spec requires default constructor (btw: a restriction soon to be removed it seems) and getters/setters but ebean does not have those restrictions. This means that the customisations that Brian mentions are things that ebean transformation has had to deal with for a very long time - 16 years actually, as these are all the things with expect with non record entity classes. For the mutating entity class case there are other slightly interesting things that we need to deal with (around collections) that we do not for record types.</p>\n<p>That is, there isn't any customisation of record types that would be new or different to what the ebean transformer has been dealing with.</p>\n<p>Another detail to put in here is that the JVM didn't always enforce final. From vague memory from around Java 8 or so the JVM really did enforce final. This is the sort of little detail that might be concerning/nagging Brian.</p>\n<hr />\n<p><strong>Edit:</strong></p>\n<p>Absolutely we should not be taking things personally but lets put this in context. I've been in the Java community for 25 years, I'm the organiser of the local JUG, I have an open source project that is 16 years old that is taking a serious reputational hit right here.</p>\n<p>Brian Geotz, a literal Java God has said &quot;pretty serious party foul&quot;, &quot;shamed out of the community&quot;, &quot;ignorance&quot;, &quot;poisoning the well&quot; - to someone like me who is a Java fanboy these are literally hammer blows from a God. Being referred to as &quot;the author&quot; doesn't actually soften those blows in case you were wondering, in fact it hurts more because it suggests this isn't a really serious issue. In case it isn't obvious, I'm taking this issue really really really seriously and I'll be pushing to get right to the detail of this and confirm if there is indeed a problem with the bytecode transformation here.</p>\n<p>24 hours in and I'm holding up. I might even foolishly be thinking I am starting to get to the heart of the matter. The current TLDR is probably that you should not take on bytecode transformation unless you really know what you are doing. For myself, I've got 16 years of taking bytecode transformation seriously. I'm not ignorant of the size of the challenge and the depth of knowledge you need to get this right. This is not tiddly winks.</p>\n<p>At this stage we don't actually have evidence of wrong doing and it's more a suggestion that ebean might be incorrectly handling customisation of record types. This is actually <em>really really good news</em> to me because I've got 16 years of experience to fall back on that suggests that the bytecode transformation does indeed cover all the cases Brian is concerned about (plus other cases thrown in by Kotlin, Scala and Groovy compilers and other cases thrown in by mutable types).</p>\n<p>Record types are actually the nice easy case as far as ebean transformation is concerned.</p>\n<p><strong>Next steps:</strong></p>\n<p>Can we get actual evidence of ebean transformation doing the wrong thing?</p>\n<p>Brian might be able to give me a curly example to test out and report back the bytecode. I think this is where we are at.</p>\n"},{"tags":[],"owner":{"account_id":72209,"reputation":3901,"user_id":208581,"display_name":"Rob Bygrave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662694325,"creation_date":1662694325,"answer_id":73657056,"question_id":73377190,"body_markdown":"Adding a second answer with the bytecode diff as adding the bytecode exceeds the character limit.\r\n\r\n\r\n\r\n**Edit2**:  Before and After in bytecode form.\r\n\r\n**Before**\r\n\r\n\r\n    // class version 60.0 (60)\r\n    // RECORD\r\n    // access flags 0x10031\r\n    public final class org/example/records/UserRoleId extends java/lang/Record {\r\n    \r\n      // compiled from: UserRoleId.java\r\n    \r\n      @Ljavax/persistence/Embeddable;()\r\n      // access flags 0x19\r\n      public final static INNERCLASS java/lang/invoke/MethodHandles$Lookup java/lang/invoke/MethodHandles Lookup\r\n      RECORDCOMPONENT   Ljava/lang/Integer; userId\r\n      RECORDCOMPONENT   Ljava/lang/String; roleId\r\n    \r\n      // access flags 0x12\r\n      private final Ljava/lang/Integer; userId\r\n    \r\n      // access flags 0x12\r\n      private final Ljava/lang/String; roleId\r\n    \r\n      // access flags 0x1\r\n      public &lt;init&gt;(Ljava/lang/Integer;Ljava/lang/String;)V\r\n        // parameter  userId\r\n        // parameter  roleId\r\n       L0\r\n        LINENUMBER 6 L0\r\n        ALOAD 0\r\n        INVOKESPECIAL java/lang/Record.&lt;init&gt; ()V\r\n        ALOAD 0\r\n        ALOAD 1\r\n        PUTFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\r\n        ALOAD 0\r\n        ALOAD 2\r\n        PUTFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\r\n        RETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        LOCALVARIABLE userId Ljava/lang/Integer; L0 L1 1\r\n        LOCALVARIABLE roleId Ljava/lang/String; L0 L1 2\r\n        MAXSTACK = 2\r\n        MAXLOCALS = 3\r\n    \r\n      // access flags 0x11\r\n      public final toString()Ljava/lang/String;\r\n       L0\r\n        LINENUMBER 5 L0\r\n        ALOAD 0\r\n        INVOKEDYNAMIC toString(Lorg/example/records/UserRoleId;)Ljava/lang/String; [\r\n          // handle kind 0x6 : INVOKESTATIC\r\n          java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\r\n          // arguments:\r\n          org.example.records.UserRoleId.class, \r\n          &quot;userId;roleId&quot;, \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.roleId(Ljava/lang/String;)\r\n        ]\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x11\r\n      public final hashCode()I\r\n       L0\r\n        LINENUMBER 5 L0\r\n        ALOAD 0\r\n        INVOKEDYNAMIC hashCode(Lorg/example/records/UserRoleId;)I [\r\n          // handle kind 0x6 : INVOKESTATIC\r\n          java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\r\n          // arguments:\r\n          org.example.records.UserRoleId.class, \r\n          &quot;userId;roleId&quot;, \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.roleId(Ljava/lang/String;)\r\n        ]\r\n        IRETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x11\r\n      public final equals(Ljava/lang/Object;)Z\r\n       L0\r\n        LINENUMBER 5 L0\r\n        ALOAD 0\r\n        ALOAD 1\r\n        INVOKEDYNAMIC equals(Lorg/example/records/UserRoleId;Ljava/lang/Object;)Z [\r\n          // handle kind 0x6 : INVOKESTATIC\r\n          java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\r\n          // arguments:\r\n          org.example.records.UserRoleId.class, \r\n          &quot;userId;roleId&quot;, \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.roleId(Ljava/lang/String;)\r\n        ]\r\n        IRETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        LOCALVARIABLE o Ljava/lang/Object; L0 L1 1\r\n        MAXSTACK = 2\r\n        MAXLOCALS = 2\r\n    \r\n      // access flags 0x1\r\n      public userId()Ljava/lang/Integer;\r\n       L0\r\n        LINENUMBER 5 L0\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1\r\n      public roleId()Ljava/lang/String;\r\n       L0\r\n        LINENUMBER 5 L0\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    }\r\n\r\n----\r\n\r\n**After** \r\n\r\n    // class version 60.0 (60)\r\n    // RECORD\r\n    // access flags 0x10031\r\n    public final class org/example/records/UserRoleId extends java/lang/Record implements io/ebean/bean/EntityBean {\r\n    \r\n      // compiled from: UserRoleId.java\r\n    \r\n      @Ljavax/persistence/Embeddable;()\r\n      // access flags 0x19\r\n      public final static INNERCLASS java/lang/invoke/MethodHandles$Lookup java/lang/invoke/MethodHandles Lookup\r\n      RECORDCOMPONENT   Ljava/lang/Integer; userId\r\n      RECORDCOMPONENT   Ljava/lang/String; roleId\r\n    \r\n      // access flags 0x2\r\n      private Ljava/lang/Integer; userId\r\n    \r\n      // access flags 0x2\r\n      private Ljava/lang/String; roleId\r\n    \r\n      // access flags 0x1009\r\n      public static synthetic [Ljava/lang/String; _ebean_props\r\n    \r\n      // access flags 0x1004\r\n      protected synthetic Lio/ebean/bean/EntityBeanIntercept; _ebean_intercept\r\n    \r\n      // access flags 0x1084\r\n      protected transient synthetic Ljava/lang/Object; _ebean_identity\r\n    \r\n      // access flags 0x1\r\n      public &lt;init&gt;(Ljava/lang/Integer;Ljava/lang/String;)V\r\n        // parameter  userId\r\n        // parameter  roleId\r\n       L0\r\n        LINENUMBER 6 L0\r\n        ALOAD 0\r\n        INVOKESPECIAL java/lang/Record.&lt;init&gt; ()V\r\n        ALOAD 0\r\n        NEW io/ebean/bean/InterceptReadWrite\r\n        DUP\r\n        ALOAD 0\r\n        INVOKESPECIAL io/ebean/bean/InterceptReadWrite.&lt;init&gt; (Ljava/lang/Object;)V\r\n        PUTFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n        ALOAD 0\r\n        ALOAD 1\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_set_userId (Ljava/lang/Integer;)V\r\n        ALOAD 0\r\n        ALOAD 2\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_set_roleId (Ljava/lang/String;)V\r\n        RETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        LOCALVARIABLE userId Ljava/lang/Integer; L0 L1 1\r\n        LOCALVARIABLE roleId Ljava/lang/String; L0 L1 2\r\n        MAXSTACK = 4\r\n        MAXLOCALS = 3\r\n    \r\n      // access flags 0x11\r\n      public final toString()Ljava/lang/String;\r\n       L0\r\n        LINENUMBER 5 L0\r\n        ALOAD 0\r\n        INVOKEDYNAMIC toString(Lorg/example/records/UserRoleId;)Ljava/lang/String; [\r\n          // handle kind 0x6 : INVOKESTATIC\r\n          java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\r\n          // arguments:\r\n          org.example.records.UserRoleId.class, \r\n          &quot;userId;roleId&quot;, \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.roleId(Ljava/lang/String;)\r\n        ]\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x11\r\n      public final hashCode()I\r\n       L0\r\n        LINENUMBER 5 L0\r\n        ALOAD 0\r\n        INVOKEDYNAMIC hashCode(Lorg/example/records/UserRoleId;)I [\r\n          // handle kind 0x6 : INVOKESTATIC\r\n          java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\r\n          // arguments:\r\n          org.example.records.UserRoleId.class, \r\n          &quot;userId;roleId&quot;, \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.roleId(Ljava/lang/String;)\r\n        ]\r\n        IRETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x11\r\n      public final equals(Ljava/lang/Object;)Z\r\n       L0\r\n        LINENUMBER 5 L0\r\n        ALOAD 0\r\n        ALOAD 1\r\n        INVOKEDYNAMIC equals(Lorg/example/records/UserRoleId;Ljava/lang/Object;)Z [\r\n          // handle kind 0x6 : INVOKESTATIC\r\n          java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\r\n          // arguments:\r\n          org.example.records.UserRoleId.class, \r\n          &quot;userId;roleId&quot;, \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \r\n          // handle kind 0x1 : GETFIELD\r\n          org/example/records/UserRoleId.roleId(Ljava/lang/String;)\r\n        ]\r\n        IRETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        LOCALVARIABLE o Ljava/lang/Object; L0 L1 1\r\n        MAXSTACK = 2\r\n        MAXLOCALS = 2\r\n    \r\n      // access flags 0x1\r\n      public userId()Ljava/lang/Integer;\r\n       L0\r\n        LINENUMBER 5 L0\r\n        ALOAD 0\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_userId ()Ljava/lang/Integer;\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1\r\n      public roleId()Ljava/lang/String;\r\n       L0\r\n        LINENUMBER 5 L0\r\n        ALOAD 0\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_roleId ()Ljava/lang/String;\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x8\r\n      static &lt;clinit&gt;()V\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ICONST_2\r\n        ANEWARRAY java/lang/String\r\n        DUP\r\n        ICONST_0\r\n        LDC &quot;userId&quot;\r\n        AASTORE\r\n        DUP\r\n        ICONST_1\r\n        LDC &quot;roleId&quot;\r\n        AASTORE\r\n        PUTSTATIC org/example/records/UserRoleId._ebean_props : [Ljava/lang/String;\r\n       L1\r\n        LINENUMBER 1 L1\r\n        RETURN\r\n        MAXSTACK = 4\r\n        MAXLOCALS = 0\r\n    \r\n      // access flags 0x1001\r\n      public synthetic &lt;init&gt;()V\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ALOAD 0\r\n        INVOKESPECIAL java/lang/Record.&lt;init&gt; ()V\r\n        ALOAD 0\r\n        NEW io/ebean/bean/InterceptReadWrite\r\n        DUP\r\n        ALOAD 0\r\n        INVOKESPECIAL io/ebean/bean/InterceptReadWrite.&lt;init&gt; (Ljava/lang/Object;)V\r\n        PUTFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n       L1\r\n        LINENUMBER 2 L1\r\n        RETURN\r\n       L2\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L2 0\r\n        MAXSTACK = 4\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_getPropertyNames()[Ljava/lang/String;\r\n       L0\r\n        LINENUMBER 13 L0\r\n        GETSTATIC org/example/records/UserRoleId._ebean_props : [Ljava/lang/String;\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_getPropertyName(I)Ljava/lang/String;\r\n       L0\r\n        LINENUMBER 16 L0\r\n        GETSTATIC org/example/records/UserRoleId._ebean_props : [Ljava/lang/String;\r\n        ILOAD 1\r\n        AALOAD\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        LOCALVARIABLE pos I L0 L1 1\r\n        MAXSTACK = 2\r\n        MAXLOCALS = 2\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_getIntercept()Lio/ebean/bean/EntityBeanIntercept;\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_intercept()Lio/ebean/bean/EntityBeanIntercept;\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n        IFNONNULL L1\r\n       L2\r\n        LINENUMBER 2 L2\r\n        ALOAD 0\r\n        NEW io/ebean/bean/InterceptReadWrite\r\n        DUP\r\n        ALOAD 0\r\n        INVOKESPECIAL io/ebean/bean/InterceptReadWrite.&lt;init&gt; (Ljava/lang/Object;)V\r\n        PUTFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n       L1\r\n        LINENUMBER 3 L1\r\n       FRAME SAME\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n        ARETURN\r\n       L3\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\r\n        MAXSTACK = 4\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1004\r\n      protected synthetic _ebean_get_userId()Ljava/lang/Integer;\r\n       L0\r\n        LINENUMBER 6 L0\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n        ICONST_0\r\n        INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.preGetter (I)V (itf)\r\n       L1\r\n        LINENUMBER 7 L1\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\r\n        ARETURN\r\n       L2\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L2 0\r\n        MAXSTACK = 2\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1004\r\n      protected synthetic _ebean_set_userId(Ljava/lang/Integer;)V\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n        ICONST_1\r\n        ICONST_0\r\n        ALOAD 0\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_userId ()Ljava/lang/Integer;\r\n        ALOAD 1\r\n        INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.preSetter (ZILjava/lang/Object;Ljava/lang/Object;)V (itf)\r\n       L1\r\n        LINENUMBER 2 L1\r\n        ALOAD 0\r\n        ALOAD 1\r\n        PUTFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\r\n       L2\r\n        LINENUMBER 4 L2\r\n        RETURN\r\n       L3\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\r\n        LOCALVARIABLE newValue Ljava/lang/Integer; L0 L3 1\r\n        MAXSTACK = 5\r\n        MAXLOCALS = 2\r\n    \r\n      // access flags 0x1004\r\n      protected synthetic _ebean_getni_userId()Ljava/lang/Integer;\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1004\r\n      protected synthetic _ebean_setni_userId(Ljava/lang/Integer;)V\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ALOAD 0\r\n        ALOAD 1\r\n        PUTFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\r\n       L1\r\n        LINENUMBER 2 L1\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n        ICONST_0\r\n        INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.setLoadedProperty (I)V (itf)\r\n       L2\r\n        LINENUMBER 1 L2\r\n        RETURN\r\n       L3\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\r\n        LOCALVARIABLE _newValue Ljava/lang/Integer; L0 L3 1\r\n        MAXSTACK = 2\r\n        MAXLOCALS = 2\r\n    \r\n      // access flags 0x1004\r\n      protected synthetic _ebean_get_roleId()Ljava/lang/String;\r\n       L0\r\n        LINENUMBER 6 L0\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n        ICONST_1\r\n        INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.preGetter (I)V (itf)\r\n       L1\r\n        LINENUMBER 7 L1\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\r\n        ARETURN\r\n       L2\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L2 0\r\n        MAXSTACK = 2\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1004\r\n      protected synthetic _ebean_set_roleId(Ljava/lang/String;)V\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n        ICONST_1\r\n        ICONST_1\r\n        ALOAD 0\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_roleId ()Ljava/lang/String;\r\n        ALOAD 1\r\n        INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.preSetter (ZILjava/lang/Object;Ljava/lang/Object;)V (itf)\r\n       L1\r\n        LINENUMBER 2 L1\r\n        ALOAD 0\r\n        ALOAD 1\r\n        PUTFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\r\n       L2\r\n        LINENUMBER 4 L2\r\n        RETURN\r\n       L3\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\r\n        LOCALVARIABLE newValue Ljava/lang/String; L0 L3 1\r\n        MAXSTACK = 5\r\n        MAXLOCALS = 2\r\n    \r\n      // access flags 0x1004\r\n      protected synthetic _ebean_getni_roleId()Ljava/lang/String;\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1004\r\n      protected synthetic _ebean_setni_roleId(Ljava/lang/String;)V\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ALOAD 0\r\n        ALOAD 1\r\n        PUTFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\r\n       L1\r\n        LINENUMBER 2 L1\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n        ICONST_1\r\n        INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.setLoadedProperty (I)V (itf)\r\n       L2\r\n        LINENUMBER 1 L2\r\n        RETURN\r\n       L3\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\r\n        LOCALVARIABLE _newValue Ljava/lang/String; L0 L3 1\r\n        MAXSTACK = 2\r\n        MAXLOCALS = 2\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_getField(I)Ljava/lang/Object;\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ILOAD 1\r\n        TABLESWITCH\r\n          0: L1\r\n          1: L2\r\n          default: L3\r\n       L1\r\n        LINENUMBER 1 L1\r\n       FRAME SAME\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\r\n        ARETURN\r\n       L2\r\n        LINENUMBER 1 L2\r\n       FRAME SAME\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\r\n        ARETURN\r\n       L3\r\n        LINENUMBER 1 L3\r\n       FRAME SAME\r\n        NEW java/lang/RuntimeException\r\n        DUP\r\n        NEW java/lang/StringBuilder\r\n        DUP\r\n        LDC &quot;Invalid index &quot;\r\n        INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; (Ljava/lang/String;)V\r\n        ILOAD 1\r\n        INVOKEVIRTUAL java/lang/StringBuilder.append (I)Ljava/lang/StringBuilder;\r\n        INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\r\n        INVOKESPECIAL java/lang/RuntimeException.&lt;init&gt; (Ljava/lang/String;)V\r\n        ATHROW\r\n       L4\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L4 0\r\n        LOCALVARIABLE index I L0 L4 1\r\n        MAXSTACK = 5\r\n        MAXLOCALS = 2\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_getFieldIntercept(I)Ljava/lang/Object;\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ILOAD 1\r\n        TABLESWITCH\r\n          0: L1\r\n          1: L2\r\n          default: L3\r\n       L1\r\n        LINENUMBER 1 L1\r\n       FRAME SAME\r\n        ALOAD 0\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_userId ()Ljava/lang/Integer;\r\n        ARETURN\r\n       L2\r\n        LINENUMBER 1 L2\r\n       FRAME SAME\r\n        ALOAD 0\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_roleId ()Ljava/lang/String;\r\n        ARETURN\r\n       L3\r\n        LINENUMBER 1 L3\r\n       FRAME SAME\r\n        NEW java/lang/RuntimeException\r\n        DUP\r\n        NEW java/lang/StringBuilder\r\n        DUP\r\n        LDC &quot;Invalid index &quot;\r\n        INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; (Ljava/lang/String;)V\r\n        ILOAD 1\r\n        INVOKEVIRTUAL java/lang/StringBuilder.append (I)Ljava/lang/StringBuilder;\r\n        INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\r\n        INVOKESPECIAL java/lang/RuntimeException.&lt;init&gt; (Ljava/lang/String;)V\r\n        ATHROW\r\n       L4\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L4 0\r\n        LOCALVARIABLE index I L0 L4 1\r\n        MAXSTACK = 5\r\n        MAXLOCALS = 2\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_setField(ILjava/lang/Object;)V\r\n       L0\r\n        LINENUMBER 1 L0\r\n        LINENUMBER 1 L0\r\n        ILOAD 1\r\n        TABLESWITCH\r\n          0: L1\r\n          1: L2\r\n          default: L3\r\n       L1\r\n        LINENUMBER 1 L1\r\n       FRAME SAME\r\n        ALOAD 0\r\n        ALOAD 2\r\n        CHECKCAST java/lang/Integer\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_setni_userId (Ljava/lang/Integer;)V\r\n       L4\r\n        LINENUMBER 1 L4\r\n        RETURN\r\n       L2\r\n        LINENUMBER 1 L2\r\n       FRAME SAME\r\n        ALOAD 0\r\n        ALOAD 2\r\n        CHECKCAST java/lang/String\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_setni_roleId (Ljava/lang/String;)V\r\n       L5\r\n        LINENUMBER 1 L5\r\n        RETURN\r\n       L3\r\n        LINENUMBER 1 L3\r\n       FRAME SAME\r\n        NEW java/lang/RuntimeException\r\n        DUP\r\n        NEW java/lang/StringBuilder\r\n        DUP\r\n        LDC &quot;Invalid index &quot;\r\n        INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; (Ljava/lang/String;)V\r\n        ILOAD 1\r\n        INVOKEVIRTUAL java/lang/StringBuilder.append (I)Ljava/lang/StringBuilder;\r\n        INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\r\n        INVOKESPECIAL java/lang/RuntimeException.&lt;init&gt; (Ljava/lang/String;)V\r\n        ATHROW\r\n       L6\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L6 0\r\n        LOCALVARIABLE index I L0 L6 1\r\n        LOCALVARIABLE o Ljava/lang/Object; L0 L6 2\r\n        LOCALVARIABLE arg Ljava/lang/Object; L0 L6 3\r\n        LOCALVARIABLE p Lorg/example/records/UserRoleId; L0 L6 4\r\n        MAXSTACK = 5\r\n        MAXLOCALS = 5\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_setFieldIntercept(ILjava/lang/Object;)V\r\n       L0\r\n        LINENUMBER 1 L0\r\n        LINENUMBER 1 L0\r\n        ILOAD 1\r\n        TABLESWITCH\r\n          0: L1\r\n          1: L2\r\n          default: L3\r\n       L1\r\n        LINENUMBER 1 L1\r\n       FRAME SAME\r\n        ALOAD 0\r\n        ALOAD 2\r\n        CHECKCAST java/lang/Integer\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_set_userId (Ljava/lang/Integer;)V\r\n       L4\r\n        LINENUMBER 1 L4\r\n        RETURN\r\n       L2\r\n        LINENUMBER 1 L2\r\n       FRAME SAME\r\n        ALOAD 0\r\n        ALOAD 2\r\n        CHECKCAST java/lang/String\r\n        INVOKEVIRTUAL org/example/records/UserRoleId._ebean_set_roleId (Ljava/lang/String;)V\r\n       L5\r\n        LINENUMBER 1 L5\r\n        RETURN\r\n       L3\r\n        LINENUMBER 1 L3\r\n       FRAME SAME\r\n        NEW java/lang/RuntimeException\r\n        DUP\r\n        NEW java/lang/StringBuilder\r\n        DUP\r\n        LDC &quot;Invalid index &quot;\r\n        INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; (Ljava/lang/String;)V\r\n        ILOAD 1\r\n        INVOKEVIRTUAL java/lang/StringBuilder.append (I)Ljava/lang/StringBuilder;\r\n        INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\r\n        INVOKESPECIAL java/lang/RuntimeException.&lt;init&gt; (Ljava/lang/String;)V\r\n        ATHROW\r\n       L6\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L6 0\r\n        LOCALVARIABLE index I L0 L6 1\r\n        LOCALVARIABLE o Ljava/lang/Object; L0 L6 2\r\n        LOCALVARIABLE arg Ljava/lang/Object; L0 L6 3\r\n        LOCALVARIABLE p Lorg/example/records/UserRoleId; L0 L6 4\r\n        MAXSTACK = 5\r\n        MAXLOCALS = 5\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_setEmbeddedLoaded()V\r\n       L0\r\n        LINENUMBER 1 L0\r\n        RETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 0\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_isEmbeddedNewOrDirty()Z\r\n       L0\r\n        LINENUMBER 1 L0\r\n        ICONST_0\r\n        IRETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 1\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1001\r\n      public synthetic _ebean_newInstance()Ljava/lang/Object;\r\n       L0\r\n        LINENUMBER 10 L0\r\n        NEW org/example/records/UserRoleId\r\n        DUP\r\n        INVOKESPECIAL org/example/records/UserRoleId.&lt;init&gt; ()V\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 2\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x4\r\n      protected synthetic &lt;init&gt;(Lio/ebean/bean/EntityBean;)V\r\n       L0\r\n        LINENUMBER 2 L0\r\n        ALOAD 0\r\n        INVOKESPECIAL java/lang/Record.&lt;init&gt; ()V\r\n       L1\r\n        LINENUMBER 3 L1\r\n        ALOAD 0\r\n        NEW io/ebean/bean/InterceptReadOnly\r\n        DUP\r\n        ALOAD 0\r\n        INVOKESPECIAL io/ebean/bean/InterceptReadOnly.&lt;init&gt; (Ljava/lang/Object;)V\r\n        PUTFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\r\n       L2\r\n        LINENUMBER 25 L2\r\n        RETURN\r\n       L3\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\r\n        LOCALVARIABLE ignore Lio/ebean/bean/EntityBean; L0 L3 1\r\n        MAXSTACK = 4\r\n        MAXLOCALS = 2\r\n    \r\n      // access flags 0x1\r\n      public synthetic _ebean_newInstanceReadOnly()Ljava/lang/Object;\r\n       L0\r\n        LINENUMBER 4 L0\r\n        NEW org/example/records/UserRoleId\r\n        DUP\r\n        ACONST_NULL\r\n        INVOKESPECIAL org/example/records/UserRoleId.&lt;init&gt; (Lio/ebean/bean/EntityBean;)V\r\n        ARETURN\r\n       L1\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\r\n        MAXSTACK = 3\r\n        MAXLOCALS = 1\r\n    \r\n      // access flags 0x1001\r\n      public synthetic toString(Lio/ebean/bean/ToStringBuilder;)V\r\n       L0\r\n        LINENUMBER 2 L0\r\n        ALOAD 1\r\n        ALOAD 0\r\n        INVOKEVIRTUAL io/ebean/bean/ToStringBuilder.start (Ljava/lang/Object;)V\r\n       L1\r\n        LINENUMBER 3 L1\r\n        ALOAD 1\r\n        LDC &quot;userId&quot;\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\r\n        INVOKEVIRTUAL io/ebean/bean/ToStringBuilder.add (Ljava/lang/String;Ljava/lang/Object;)V\r\n       L2\r\n        LINENUMBER 3 L2\r\n        ALOAD 1\r\n        LDC &quot;roleId&quot;\r\n        ALOAD 0\r\n        GETFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\r\n        INVOKEVIRTUAL io/ebean/bean/ToStringBuilder.add (Ljava/lang/String;Ljava/lang/Object;)V\r\n       L3\r\n        LINENUMBER 4 L3\r\n        ALOAD 1\r\n        INVOKEVIRTUAL io/ebean/bean/ToStringBuilder.end ()V\r\n       L4\r\n        LINENUMBER 5 L4\r\n        RETURN\r\n       L5\r\n        LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L5 0\r\n        LOCALVARIABLE sb Lio/ebean/bean/ToStringBuilder; L0 L5 1\r\n        MAXSTACK = 3\r\n        MAXLOCALS = 2\r\n    }\r\n\r\n\r\n\r\nNotes:\r\n- The synthetic mutation methods exist (so potential for abuse). The &quot;promise&quot; is that Ebean will not mutate after any public methods are called - hashcode, equals, toString, accessors. The hashcode value must not change, equals must not change. Ebean must honor this promise.  \r\n- This somewhat boils down to not mutating after an accessor is called as hashcode, equals, toString use accessors via method handles. \r\n- The current bytecode enhancement does not currently detect and treat records differently. e.g. the _ebean_identity field isn&#39;t needed or used for records at all. \r\n- Ebean has 2 interception modes - read-only and read-write. As records are always read-only its possible that record specific enhancement could be simplified to reflect that (hmmm).","title":"Bytecode transforming record class to be mutable","body":"<p>Adding a second answer with the bytecode diff as adding the bytecode exceeds the character limit.</p>\n<p><strong>Edit2</strong>:  Before and After in bytecode form.</p>\n<p><strong>Before</strong></p>\n<pre><code>// class version 60.0 (60)\n// RECORD\n// access flags 0x10031\npublic final class org/example/records/UserRoleId extends java/lang/Record {\n\n  // compiled from: UserRoleId.java\n\n  @Ljavax/persistence/Embeddable;()\n  // access flags 0x19\n  public final static INNERCLASS java/lang/invoke/MethodHandles$Lookup java/lang/invoke/MethodHandles Lookup\n  RECORDCOMPONENT   Ljava/lang/Integer; userId\n  RECORDCOMPONENT   Ljava/lang/String; roleId\n\n  // access flags 0x12\n  private final Ljava/lang/Integer; userId\n\n  // access flags 0x12\n  private final Ljava/lang/String; roleId\n\n  // access flags 0x1\n  public &lt;init&gt;(Ljava/lang/Integer;Ljava/lang/String;)V\n    // parameter  userId\n    // parameter  roleId\n   L0\n    LINENUMBER 6 L0\n    ALOAD 0\n    INVOKESPECIAL java/lang/Record.&lt;init&gt; ()V\n    ALOAD 0\n    ALOAD 1\n    PUTFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\n    ALOAD 0\n    ALOAD 2\n    PUTFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\n    RETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    LOCALVARIABLE userId Ljava/lang/Integer; L0 L1 1\n    LOCALVARIABLE roleId Ljava/lang/String; L0 L1 2\n    MAXSTACK = 2\n    MAXLOCALS = 3\n\n  // access flags 0x11\n  public final toString()Ljava/lang/String;\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    INVOKEDYNAMIC toString(Lorg/example/records/UserRoleId;)Ljava/lang/String; [\n      // handle kind 0x6 : INVOKESTATIC\n      java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\n      // arguments:\n      org.example.records.UserRoleId.class, \n      &quot;userId;roleId&quot;, \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.roleId(Ljava/lang/String;)\n    ]\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x11\n  public final hashCode()I\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    INVOKEDYNAMIC hashCode(Lorg/example/records/UserRoleId;)I [\n      // handle kind 0x6 : INVOKESTATIC\n      java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\n      // arguments:\n      org.example.records.UserRoleId.class, \n      &quot;userId;roleId&quot;, \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.roleId(Ljava/lang/String;)\n    ]\n    IRETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x11\n  public final equals(Ljava/lang/Object;)Z\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    ALOAD 1\n    INVOKEDYNAMIC equals(Lorg/example/records/UserRoleId;Ljava/lang/Object;)Z [\n      // handle kind 0x6 : INVOKESTATIC\n      java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\n      // arguments:\n      org.example.records.UserRoleId.class, \n      &quot;userId;roleId&quot;, \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.roleId(Ljava/lang/String;)\n    ]\n    IRETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    LOCALVARIABLE o Ljava/lang/Object; L0 L1 1\n    MAXSTACK = 2\n    MAXLOCALS = 2\n\n  // access flags 0x1\n  public userId()Ljava/lang/Integer;\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x1\n  public roleId()Ljava/lang/String;\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n}\n</code></pre>\n<hr />\n<p><strong>After</strong></p>\n<pre><code>// class version 60.0 (60)\n// RECORD\n// access flags 0x10031\npublic final class org/example/records/UserRoleId extends java/lang/Record implements io/ebean/bean/EntityBean {\n\n  // compiled from: UserRoleId.java\n\n  @Ljavax/persistence/Embeddable;()\n  // access flags 0x19\n  public final static INNERCLASS java/lang/invoke/MethodHandles$Lookup java/lang/invoke/MethodHandles Lookup\n  RECORDCOMPONENT   Ljava/lang/Integer; userId\n  RECORDCOMPONENT   Ljava/lang/String; roleId\n\n  // access flags 0x2\n  private Ljava/lang/Integer; userId\n\n  // access flags 0x2\n  private Ljava/lang/String; roleId\n\n  // access flags 0x1009\n  public static synthetic [Ljava/lang/String; _ebean_props\n\n  // access flags 0x1004\n  protected synthetic Lio/ebean/bean/EntityBeanIntercept; _ebean_intercept\n\n  // access flags 0x1084\n  protected transient synthetic Ljava/lang/Object; _ebean_identity\n\n  // access flags 0x1\n  public &lt;init&gt;(Ljava/lang/Integer;Ljava/lang/String;)V\n    // parameter  userId\n    // parameter  roleId\n   L0\n    LINENUMBER 6 L0\n    ALOAD 0\n    INVOKESPECIAL java/lang/Record.&lt;init&gt; ()V\n    ALOAD 0\n    NEW io/ebean/bean/InterceptReadWrite\n    DUP\n    ALOAD 0\n    INVOKESPECIAL io/ebean/bean/InterceptReadWrite.&lt;init&gt; (Ljava/lang/Object;)V\n    PUTFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n    ALOAD 0\n    ALOAD 1\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_set_userId (Ljava/lang/Integer;)V\n    ALOAD 0\n    ALOAD 2\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_set_roleId (Ljava/lang/String;)V\n    RETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    LOCALVARIABLE userId Ljava/lang/Integer; L0 L1 1\n    LOCALVARIABLE roleId Ljava/lang/String; L0 L1 2\n    MAXSTACK = 4\n    MAXLOCALS = 3\n\n  // access flags 0x11\n  public final toString()Ljava/lang/String;\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    INVOKEDYNAMIC toString(Lorg/example/records/UserRoleId;)Ljava/lang/String; [\n      // handle kind 0x6 : INVOKESTATIC\n      java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\n      // arguments:\n      org.example.records.UserRoleId.class, \n      &quot;userId;roleId&quot;, \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.roleId(Ljava/lang/String;)\n    ]\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x11\n  public final hashCode()I\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    INVOKEDYNAMIC hashCode(Lorg/example/records/UserRoleId;)I [\n      // handle kind 0x6 : INVOKESTATIC\n      java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\n      // arguments:\n      org.example.records.UserRoleId.class, \n      &quot;userId;roleId&quot;, \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.roleId(Ljava/lang/String;)\n    ]\n    IRETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x11\n  public final equals(Ljava/lang/Object;)Z\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    ALOAD 1\n    INVOKEDYNAMIC equals(Lorg/example/records/UserRoleId;Ljava/lang/Object;)Z [\n      // handle kind 0x6 : INVOKESTATIC\n      java/lang/runtime/ObjectMethods.bootstrap(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/TypeDescriptor;Ljava/lang/Class;Ljava/lang/String;[Ljava/lang/invoke/MethodHandle;)Ljava/lang/Object;\n      // arguments:\n      org.example.records.UserRoleId.class, \n      &quot;userId;roleId&quot;, \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.userId(Ljava/lang/Integer;), \n      // handle kind 0x1 : GETFIELD\n      org/example/records/UserRoleId.roleId(Ljava/lang/String;)\n    ]\n    IRETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    LOCALVARIABLE o Ljava/lang/Object; L0 L1 1\n    MAXSTACK = 2\n    MAXLOCALS = 2\n\n  // access flags 0x1\n  public userId()Ljava/lang/Integer;\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_userId ()Ljava/lang/Integer;\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x1\n  public roleId()Ljava/lang/String;\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_roleId ()Ljava/lang/String;\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x8\n  static &lt;clinit&gt;()V\n   L0\n    LINENUMBER 1 L0\n    ICONST_2\n    ANEWARRAY java/lang/String\n    DUP\n    ICONST_0\n    LDC &quot;userId&quot;\n    AASTORE\n    DUP\n    ICONST_1\n    LDC &quot;roleId&quot;\n    AASTORE\n    PUTSTATIC org/example/records/UserRoleId._ebean_props : [Ljava/lang/String;\n   L1\n    LINENUMBER 1 L1\n    RETURN\n    MAXSTACK = 4\n    MAXLOCALS = 0\n\n  // access flags 0x1001\n  public synthetic &lt;init&gt;()V\n   L0\n    LINENUMBER 1 L0\n    ALOAD 0\n    INVOKESPECIAL java/lang/Record.&lt;init&gt; ()V\n    ALOAD 0\n    NEW io/ebean/bean/InterceptReadWrite\n    DUP\n    ALOAD 0\n    INVOKESPECIAL io/ebean/bean/InterceptReadWrite.&lt;init&gt; (Ljava/lang/Object;)V\n    PUTFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n   L1\n    LINENUMBER 2 L1\n    RETURN\n   L2\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L2 0\n    MAXSTACK = 4\n    MAXLOCALS = 1\n\n  // access flags 0x1001\n  public synthetic _ebean_getPropertyNames()[Ljava/lang/String;\n   L0\n    LINENUMBER 13 L0\n    GETSTATIC org/example/records/UserRoleId._ebean_props : [Ljava/lang/String;\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x1001\n  public synthetic _ebean_getPropertyName(I)Ljava/lang/String;\n   L0\n    LINENUMBER 16 L0\n    GETSTATIC org/example/records/UserRoleId._ebean_props : [Ljava/lang/String;\n    ILOAD 1\n    AALOAD\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    LOCALVARIABLE pos I L0 L1 1\n    MAXSTACK = 2\n    MAXLOCALS = 2\n\n  // access flags 0x1001\n  public synthetic _ebean_getIntercept()Lio/ebean/bean/EntityBeanIntercept;\n   L0\n    LINENUMBER 1 L0\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x1001\n  public synthetic _ebean_intercept()Lio/ebean/bean/EntityBeanIntercept;\n   L0\n    LINENUMBER 1 L0\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n    IFNONNULL L1\n   L2\n    LINENUMBER 2 L2\n    ALOAD 0\n    NEW io/ebean/bean/InterceptReadWrite\n    DUP\n    ALOAD 0\n    INVOKESPECIAL io/ebean/bean/InterceptReadWrite.&lt;init&gt; (Ljava/lang/Object;)V\n    PUTFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n   L1\n    LINENUMBER 3 L1\n   FRAME SAME\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n    ARETURN\n   L3\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\n    MAXSTACK = 4\n    MAXLOCALS = 1\n\n  // access flags 0x1004\n  protected synthetic _ebean_get_userId()Ljava/lang/Integer;\n   L0\n    LINENUMBER 6 L0\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n    ICONST_0\n    INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.preGetter (I)V (itf)\n   L1\n    LINENUMBER 7 L1\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\n    ARETURN\n   L2\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L2 0\n    MAXSTACK = 2\n    MAXLOCALS = 1\n\n  // access flags 0x1004\n  protected synthetic _ebean_set_userId(Ljava/lang/Integer;)V\n   L0\n    LINENUMBER 1 L0\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n    ICONST_1\n    ICONST_0\n    ALOAD 0\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_userId ()Ljava/lang/Integer;\n    ALOAD 1\n    INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.preSetter (ZILjava/lang/Object;Ljava/lang/Object;)V (itf)\n   L1\n    LINENUMBER 2 L1\n    ALOAD 0\n    ALOAD 1\n    PUTFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\n   L2\n    LINENUMBER 4 L2\n    RETURN\n   L3\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\n    LOCALVARIABLE newValue Ljava/lang/Integer; L0 L3 1\n    MAXSTACK = 5\n    MAXLOCALS = 2\n\n  // access flags 0x1004\n  protected synthetic _ebean_getni_userId()Ljava/lang/Integer;\n   L0\n    LINENUMBER 1 L0\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x1004\n  protected synthetic _ebean_setni_userId(Ljava/lang/Integer;)V\n   L0\n    LINENUMBER 1 L0\n    ALOAD 0\n    ALOAD 1\n    PUTFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\n   L1\n    LINENUMBER 2 L1\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n    ICONST_0\n    INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.setLoadedProperty (I)V (itf)\n   L2\n    LINENUMBER 1 L2\n    RETURN\n   L3\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\n    LOCALVARIABLE _newValue Ljava/lang/Integer; L0 L3 1\n    MAXSTACK = 2\n    MAXLOCALS = 2\n\n  // access flags 0x1004\n  protected synthetic _ebean_get_roleId()Ljava/lang/String;\n   L0\n    LINENUMBER 6 L0\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n    ICONST_1\n    INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.preGetter (I)V (itf)\n   L1\n    LINENUMBER 7 L1\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\n    ARETURN\n   L2\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L2 0\n    MAXSTACK = 2\n    MAXLOCALS = 1\n\n  // access flags 0x1004\n  protected synthetic _ebean_set_roleId(Ljava/lang/String;)V\n   L0\n    LINENUMBER 1 L0\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n    ICONST_1\n    ICONST_1\n    ALOAD 0\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_roleId ()Ljava/lang/String;\n    ALOAD 1\n    INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.preSetter (ZILjava/lang/Object;Ljava/lang/Object;)V (itf)\n   L1\n    LINENUMBER 2 L1\n    ALOAD 0\n    ALOAD 1\n    PUTFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\n   L2\n    LINENUMBER 4 L2\n    RETURN\n   L3\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\n    LOCALVARIABLE newValue Ljava/lang/String; L0 L3 1\n    MAXSTACK = 5\n    MAXLOCALS = 2\n\n  // access flags 0x1004\n  protected synthetic _ebean_getni_roleId()Ljava/lang/String;\n   L0\n    LINENUMBER 1 L0\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x1004\n  protected synthetic _ebean_setni_roleId(Ljava/lang/String;)V\n   L0\n    LINENUMBER 1 L0\n    ALOAD 0\n    ALOAD 1\n    PUTFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\n   L1\n    LINENUMBER 2 L1\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n    ICONST_1\n    INVOKEINTERFACE io/ebean/bean/EntityBeanIntercept.setLoadedProperty (I)V (itf)\n   L2\n    LINENUMBER 1 L2\n    RETURN\n   L3\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\n    LOCALVARIABLE _newValue Ljava/lang/String; L0 L3 1\n    MAXSTACK = 2\n    MAXLOCALS = 2\n\n  // access flags 0x1001\n  public synthetic _ebean_getField(I)Ljava/lang/Object;\n   L0\n    LINENUMBER 1 L0\n    ILOAD 1\n    TABLESWITCH\n      0: L1\n      1: L2\n      default: L3\n   L1\n    LINENUMBER 1 L1\n   FRAME SAME\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\n    ARETURN\n   L2\n    LINENUMBER 1 L2\n   FRAME SAME\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\n    ARETURN\n   L3\n    LINENUMBER 1 L3\n   FRAME SAME\n    NEW java/lang/RuntimeException\n    DUP\n    NEW java/lang/StringBuilder\n    DUP\n    LDC &quot;Invalid index &quot;\n    INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; (Ljava/lang/String;)V\n    ILOAD 1\n    INVOKEVIRTUAL java/lang/StringBuilder.append (I)Ljava/lang/StringBuilder;\n    INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\n    INVOKESPECIAL java/lang/RuntimeException.&lt;init&gt; (Ljava/lang/String;)V\n    ATHROW\n   L4\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L4 0\n    LOCALVARIABLE index I L0 L4 1\n    MAXSTACK = 5\n    MAXLOCALS = 2\n\n  // access flags 0x1001\n  public synthetic _ebean_getFieldIntercept(I)Ljava/lang/Object;\n   L0\n    LINENUMBER 1 L0\n    ILOAD 1\n    TABLESWITCH\n      0: L1\n      1: L2\n      default: L3\n   L1\n    LINENUMBER 1 L1\n   FRAME SAME\n    ALOAD 0\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_userId ()Ljava/lang/Integer;\n    ARETURN\n   L2\n    LINENUMBER 1 L2\n   FRAME SAME\n    ALOAD 0\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_get_roleId ()Ljava/lang/String;\n    ARETURN\n   L3\n    LINENUMBER 1 L3\n   FRAME SAME\n    NEW java/lang/RuntimeException\n    DUP\n    NEW java/lang/StringBuilder\n    DUP\n    LDC &quot;Invalid index &quot;\n    INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; (Ljava/lang/String;)V\n    ILOAD 1\n    INVOKEVIRTUAL java/lang/StringBuilder.append (I)Ljava/lang/StringBuilder;\n    INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\n    INVOKESPECIAL java/lang/RuntimeException.&lt;init&gt; (Ljava/lang/String;)V\n    ATHROW\n   L4\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L4 0\n    LOCALVARIABLE index I L0 L4 1\n    MAXSTACK = 5\n    MAXLOCALS = 2\n\n  // access flags 0x1001\n  public synthetic _ebean_setField(ILjava/lang/Object;)V\n   L0\n    LINENUMBER 1 L0\n    LINENUMBER 1 L0\n    ILOAD 1\n    TABLESWITCH\n      0: L1\n      1: L2\n      default: L3\n   L1\n    LINENUMBER 1 L1\n   FRAME SAME\n    ALOAD 0\n    ALOAD 2\n    CHECKCAST java/lang/Integer\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_setni_userId (Ljava/lang/Integer;)V\n   L4\n    LINENUMBER 1 L4\n    RETURN\n   L2\n    LINENUMBER 1 L2\n   FRAME SAME\n    ALOAD 0\n    ALOAD 2\n    CHECKCAST java/lang/String\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_setni_roleId (Ljava/lang/String;)V\n   L5\n    LINENUMBER 1 L5\n    RETURN\n   L3\n    LINENUMBER 1 L3\n   FRAME SAME\n    NEW java/lang/RuntimeException\n    DUP\n    NEW java/lang/StringBuilder\n    DUP\n    LDC &quot;Invalid index &quot;\n    INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; (Ljava/lang/String;)V\n    ILOAD 1\n    INVOKEVIRTUAL java/lang/StringBuilder.append (I)Ljava/lang/StringBuilder;\n    INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\n    INVOKESPECIAL java/lang/RuntimeException.&lt;init&gt; (Ljava/lang/String;)V\n    ATHROW\n   L6\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L6 0\n    LOCALVARIABLE index I L0 L6 1\n    LOCALVARIABLE o Ljava/lang/Object; L0 L6 2\n    LOCALVARIABLE arg Ljava/lang/Object; L0 L6 3\n    LOCALVARIABLE p Lorg/example/records/UserRoleId; L0 L6 4\n    MAXSTACK = 5\n    MAXLOCALS = 5\n\n  // access flags 0x1001\n  public synthetic _ebean_setFieldIntercept(ILjava/lang/Object;)V\n   L0\n    LINENUMBER 1 L0\n    LINENUMBER 1 L0\n    ILOAD 1\n    TABLESWITCH\n      0: L1\n      1: L2\n      default: L3\n   L1\n    LINENUMBER 1 L1\n   FRAME SAME\n    ALOAD 0\n    ALOAD 2\n    CHECKCAST java/lang/Integer\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_set_userId (Ljava/lang/Integer;)V\n   L4\n    LINENUMBER 1 L4\n    RETURN\n   L2\n    LINENUMBER 1 L2\n   FRAME SAME\n    ALOAD 0\n    ALOAD 2\n    CHECKCAST java/lang/String\n    INVOKEVIRTUAL org/example/records/UserRoleId._ebean_set_roleId (Ljava/lang/String;)V\n   L5\n    LINENUMBER 1 L5\n    RETURN\n   L3\n    LINENUMBER 1 L3\n   FRAME SAME\n    NEW java/lang/RuntimeException\n    DUP\n    NEW java/lang/StringBuilder\n    DUP\n    LDC &quot;Invalid index &quot;\n    INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; (Ljava/lang/String;)V\n    ILOAD 1\n    INVOKEVIRTUAL java/lang/StringBuilder.append (I)Ljava/lang/StringBuilder;\n    INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\n    INVOKESPECIAL java/lang/RuntimeException.&lt;init&gt; (Ljava/lang/String;)V\n    ATHROW\n   L6\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L6 0\n    LOCALVARIABLE index I L0 L6 1\n    LOCALVARIABLE o Ljava/lang/Object; L0 L6 2\n    LOCALVARIABLE arg Ljava/lang/Object; L0 L6 3\n    LOCALVARIABLE p Lorg/example/records/UserRoleId; L0 L6 4\n    MAXSTACK = 5\n    MAXLOCALS = 5\n\n  // access flags 0x1001\n  public synthetic _ebean_setEmbeddedLoaded()V\n   L0\n    LINENUMBER 1 L0\n    RETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 0\n    MAXLOCALS = 1\n\n  // access flags 0x1001\n  public synthetic _ebean_isEmbeddedNewOrDirty()Z\n   L0\n    LINENUMBER 1 L0\n    ICONST_0\n    IRETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x1001\n  public synthetic _ebean_newInstance()Ljava/lang/Object;\n   L0\n    LINENUMBER 10 L0\n    NEW org/example/records/UserRoleId\n    DUP\n    INVOKESPECIAL org/example/records/UserRoleId.&lt;init&gt; ()V\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 2\n    MAXLOCALS = 1\n\n  // access flags 0x4\n  protected synthetic &lt;init&gt;(Lio/ebean/bean/EntityBean;)V\n   L0\n    LINENUMBER 2 L0\n    ALOAD 0\n    INVOKESPECIAL java/lang/Record.&lt;init&gt; ()V\n   L1\n    LINENUMBER 3 L1\n    ALOAD 0\n    NEW io/ebean/bean/InterceptReadOnly\n    DUP\n    ALOAD 0\n    INVOKESPECIAL io/ebean/bean/InterceptReadOnly.&lt;init&gt; (Ljava/lang/Object;)V\n    PUTFIELD org/example/records/UserRoleId._ebean_intercept : Lio/ebean/bean/EntityBeanIntercept;\n   L2\n    LINENUMBER 25 L2\n    RETURN\n   L3\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L3 0\n    LOCALVARIABLE ignore Lio/ebean/bean/EntityBean; L0 L3 1\n    MAXSTACK = 4\n    MAXLOCALS = 2\n\n  // access flags 0x1\n  public synthetic _ebean_newInstanceReadOnly()Ljava/lang/Object;\n   L0\n    LINENUMBER 4 L0\n    NEW org/example/records/UserRoleId\n    DUP\n    ACONST_NULL\n    INVOKESPECIAL org/example/records/UserRoleId.&lt;init&gt; (Lio/ebean/bean/EntityBean;)V\n    ARETURN\n   L1\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L1 0\n    MAXSTACK = 3\n    MAXLOCALS = 1\n\n  // access flags 0x1001\n  public synthetic toString(Lio/ebean/bean/ToStringBuilder;)V\n   L0\n    LINENUMBER 2 L0\n    ALOAD 1\n    ALOAD 0\n    INVOKEVIRTUAL io/ebean/bean/ToStringBuilder.start (Ljava/lang/Object;)V\n   L1\n    LINENUMBER 3 L1\n    ALOAD 1\n    LDC &quot;userId&quot;\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId.userId : Ljava/lang/Integer;\n    INVOKEVIRTUAL io/ebean/bean/ToStringBuilder.add (Ljava/lang/String;Ljava/lang/Object;)V\n   L2\n    LINENUMBER 3 L2\n    ALOAD 1\n    LDC &quot;roleId&quot;\n    ALOAD 0\n    GETFIELD org/example/records/UserRoleId.roleId : Ljava/lang/String;\n    INVOKEVIRTUAL io/ebean/bean/ToStringBuilder.add (Ljava/lang/String;Ljava/lang/Object;)V\n   L3\n    LINENUMBER 4 L3\n    ALOAD 1\n    INVOKEVIRTUAL io/ebean/bean/ToStringBuilder.end ()V\n   L4\n    LINENUMBER 5 L4\n    RETURN\n   L5\n    LOCALVARIABLE this Lorg/example/records/UserRoleId; L0 L5 0\n    LOCALVARIABLE sb Lio/ebean/bean/ToStringBuilder; L0 L5 1\n    MAXSTACK = 3\n    MAXLOCALS = 2\n}\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>The synthetic mutation methods exist (so potential for abuse). The &quot;promise&quot; is that Ebean will not mutate after any public methods are called - hashcode, equals, toString, accessors. The hashcode value must not change, equals must not change. Ebean must honor this promise.</li>\n<li>This somewhat boils down to not mutating after an accessor is called as hashcode, equals, toString use accessors via method handles.</li>\n<li>The current bytecode enhancement does not currently detect and treat records differently. e.g. the _ebean_identity field isn't needed or used for records at all.</li>\n<li>Ebean has 2 interception modes - read-only and read-write. As records are always read-only its possible that record specific enhancement could be simplified to reflect that (hmmm).</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":72209,"reputation":3901,"user_id":208581,"display_name":"Rob Bygrave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662703804,"creation_date":1662703804,"answer_id":73657983,"question_id":73377190,"body_markdown":"Ok, my comments are too big for comments so ...\r\n\r\n-----\r\n**More notes**:\r\n\r\nSo the enhancement as it is has design aspects orientated to mutating entity beans and so there is bytecode here that isn&#39;t strictly required or effectively is a noop for the `@Embedded` / `@EmbeddedId` `record` case:\r\n\r\n- The _ebean_identity field isn&#39;t needed at all. Its really a bug that it&#39;s there (records -&gt; no inheritance + equals/hashcode implementation).\r\n- The interception on accessors is effectively a noop in the records case. There are no partials, no lazy loading, always fully populated, no shallow mutation. The interception, preGetter, preSetter etc are all effectively noop. Ideally the enhancement didn&#39;t do that for the record case. e.g. The accessors just returned the fields and the constructor just set the fields.\r\n- The actual interceptor field _ebean_intercept is almost redundant but not quite. We are shallowly immutable but not deap immutable. e.g A record field could be a mutable embeddable or a mutable type like `@DbJson` and the _ebean_intercept in employed in those 2 cases. Could we lose that for the record case? Maybe, hmmm.\r\n- There are 2 synthetic constructors. One for InterceptReadWrite and one for InterceptReadOnly. Really in the case with record we could probably always use the InterceptReadOnly and simplify this.\r\n\r\n\r\n-----\r\n**How did we get here?**\r\n\r\nWell, with ebean we have been dealing with entity and embedded beans that have final fields and non-default constructors for years. These cases go from &#39;partially&#39; immutable (very common) to &#39;fully&#39; immutable (no setters and look very similar to records but yes this is rare) and the fully immutable tend to be for the reporting cases (views, aggregations/group by etc). Other ORMs like DataNucleus have also been doing this so for some ORM folks relaxing the final modifier on fields isn&#39;t a new thing.  \r\n\r\nIn this sense `record` in terms of bytecode doesn&#39;t look too different to what we have been doing except that they come with hashCode/equals implementation but even this isn&#39;t actually any different to what we have been doing for many years - ebean **must** honor a hashCode/equals implementation if it&#39;s been provided etc.\r\n\r\nIn terms of JMM and removing the final modifier - I&#39;m comfortable that we are not being a bad actor. Perhaps too comfortable but this isn&#39;t Valhalla.\r\n \r\n","title":"Bytecode transforming record class to be mutable","body":"<p>Ok, my comments are too big for comments so ...</p>\n<hr />\n<p><strong>More notes</strong>:</p>\n<p>So the enhancement as it is has design aspects orientated to mutating entity beans and so there is bytecode here that isn't strictly required or effectively is a noop for the <code>@Embedded</code> / <code>@EmbeddedId</code> <code>record</code> case:</p>\n<ul>\n<li>The _ebean_identity field isn't needed at all. Its really a bug that it's there (records -&gt; no inheritance + equals/hashcode implementation).</li>\n<li>The interception on accessors is effectively a noop in the records case. There are no partials, no lazy loading, always fully populated, no shallow mutation. The interception, preGetter, preSetter etc are all effectively noop. Ideally the enhancement didn't do that for the record case. e.g. The accessors just returned the fields and the constructor just set the fields.</li>\n<li>The actual interceptor field _ebean_intercept is almost redundant but not quite. We are shallowly immutable but not deap immutable. e.g A record field could be a mutable embeddable or a mutable type like <code>@DbJson</code> and the _ebean_intercept in employed in those 2 cases. Could we lose that for the record case? Maybe, hmmm.</li>\n<li>There are 2 synthetic constructors. One for InterceptReadWrite and one for InterceptReadOnly. Really in the case with record we could probably always use the InterceptReadOnly and simplify this.</li>\n</ul>\n<hr />\n<p><strong>How did we get here?</strong></p>\n<p>Well, with ebean we have been dealing with entity and embedded beans that have final fields and non-default constructors for years. These cases go from 'partially' immutable (very common) to 'fully' immutable (no setters and look very similar to records but yes this is rare) and the fully immutable tend to be for the reporting cases (views, aggregations/group by etc). Other ORMs like DataNucleus have also been doing this so for some ORM folks relaxing the final modifier on fields isn't a new thing.</p>\n<p>In this sense <code>record</code> in terms of bytecode doesn't look too different to what we have been doing except that they come with hashCode/equals implementation but even this isn't actually any different to what we have been doing for many years - ebean <strong>must</strong> honor a hashCode/equals implementation if it's been provided etc.</p>\n<p>In terms of JMM and removing the final modifier - I'm comfortable that we are not being a bad actor. Perhaps too comfortable but this isn't Valhalla.</p>\n"}],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":965,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":73390758,"answer_count":4,"score":9,"last_activity_date":1663640932,"creation_date":1660666851,"question_id":73377190,"body_markdown":"I just saw that EBean does bytecode transformation of record class files in a way that feels odd to me and I seek an answer about whether this is legal from a JVM point of view.\r\n\r\nApparently, it is possible to have a class file, where the class extends `java.lang.Record` and defines record component attributes (so it&#39;s a &quot;record&quot; like javac would create it), but with the following additional &quot;features&quot; which javac would not allow:\r\n\r\n* Make fields for record components non-final\r\n* Add additional fields that are not set through the canonical constructor, nor exposed through record component attributes\r\n\r\nTo me, this seems illegal and I would have expected a JVM verification error. I would like to know if this is something that is &quot;supported&quot;, which I can build upon, or if the lack of verification is a JVM bug. Are records just a Java language feature without JVM support?! I read that final fields of records are &quot;truly final&quot; and can&#39;t be changed even through reflection and assumed there must be special JVM support that makes sure records match the Java language semantics...","title":"Bytecode transforming record class to be mutable","body":"<p>I just saw that EBean does bytecode transformation of record class files in a way that feels odd to me and I seek an answer about whether this is legal from a JVM point of view.</p>\n<p>Apparently, it is possible to have a class file, where the class extends <code>java.lang.Record</code> and defines record component attributes (so it's a &quot;record&quot; like javac would create it), but with the following additional &quot;features&quot; which javac would not allow:</p>\n<ul>\n<li>Make fields for record components non-final</li>\n<li>Add additional fields that are not set through the canonical constructor, nor exposed through record component attributes</li>\n</ul>\n<p>To me, this seems illegal and I would have expected a JVM verification error. I would like to know if this is something that is &quot;supported&quot;, which I can build upon, or if the lack of verification is a JVM bug. Are records just a Java language feature without JVM support?! I read that final fields of records are &quot;truly final&quot; and can't be changed even through reflection and assumed there must be special JVM support that makes sure records match the Java language semantics...</p>\n"},{"tags":["java","apache-kafka","apache-flink"],"comments":[{"owner":{"account_id":21886042,"reputation":1703,"user_id":16173669,"display_name":"Martijn Visser"},"score":0,"creation_date":1663597303,"post_id":73771565,"comment_id":130271110,"body_markdown":"I&#39;m not sure what you&#39;re trying to achieve. The moment you&#39;re starting your Flink job, the application will start consuming from the source.","body":"I&#39;m not sure what you&#39;re trying to achieve. The moment you&#39;re starting your Flink job, the application will start consuming from the source."}],"answers":[{"tags":[],"owner":{"account_id":5449795,"reputation":2687,"user_id":6352160,"accept_rate":75,"display_name":"Shankar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1663640253,"creation_date":1663640253,"answer_id":73780971,"question_id":73771565,"body_markdown":"It looks like you want to ensure that no message is missed for processing. Kafka will retain your messages, so there is no need to send messages only when the Flink consumer is ready. You can simplify your design by avoiding the status message.\r\n\r\nAny Kafka Consumer (not just Flink Connector) will have an offset associated with it in Kafka Server to track the id of the last message that was consumed.\r\n\r\nFrom kafka docs:\r\n\r\n&gt; Kafka maintains a numerical offset for each record in a partition. This\r\n&gt; offset acts as a unique identifier of a record within that partition,\r\n&gt; and also denotes the position of the consumer in the partition. For\r\n&gt; example, a consumer which is at position 5 has consumed records with\r\n&gt; offsets 0 through 4 and will next receive the record with offset 5\r\n\r\nIn your Flink Kafka Connector, specify the offset as the committed offset. \r\n\r\n     OffsetsInitializer.committedOffsets(OffsetResetStrategy.EARLIEST)\r\n\r\nThis will ensure that if your Flink Connector is restarted, it will consume from the last position that it left off, before the restart. \r\n\r\nIf for some reason, the offset is lost, this will read from the beginning (earliest message) in your Kafka topic. Note that this approach will cause you to reprocess the messages.\r\n\r\nThere are many more offset strategies you can explore to choose the right one for you.\r\n\r\nRefer - https://nightlies.apache.org/flink/flink-docs-master/docs/connectors/datastream/kafka/#starting-offset","title":"When can a Flink job consume from Kafka?","body":"<p>It looks like you want to ensure that no message is missed for processing. Kafka will retain your messages, so there is no need to send messages only when the Flink consumer is ready. You can simplify your design by avoiding the status message.</p>\n<p>Any Kafka Consumer (not just Flink Connector) will have an offset associated with it in Kafka Server to track the id of the last message that was consumed.</p>\n<p>From kafka docs:</p>\n<blockquote>\n<p>Kafka maintains a numerical offset for each record in a partition. This\noffset acts as a unique identifier of a record within that partition,\nand also denotes the position of the consumer in the partition. For\nexample, a consumer which is at position 5 has consumed records with\noffsets 0 through 4 and will next receive the record with offset 5</p>\n</blockquote>\n<p>In your Flink Kafka Connector, specify the offset as the committed offset.</p>\n<pre><code> OffsetsInitializer.committedOffsets(OffsetResetStrategy.EARLIEST)\n</code></pre>\n<p>This will ensure that if your Flink Connector is restarted, it will consume from the last position that it left off, before the restart.</p>\n<p>If for some reason, the offset is lost, this will read from the beginning (earliest message) in your Kafka topic. Note that this approach will cause you to reprocess the messages.</p>\n<p>There are many more offset strategies you can explore to choose the right one for you.</p>\n<p>Refer - <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/connectors/datastream/kafka/#starting-offset\" rel=\"nofollow noreferrer\">https://nightlies.apache.org/flink/flink-docs-master/docs/connectors/datastream/kafka/#starting-offset</a></p>\n"}],"owner":{"account_id":11556206,"reputation":117,"user_id":8467309,"accept_rate":100,"display_name":"Jeff"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73780971,"answer_count":1,"score":0,"last_activity_date":1663640253,"creation_date":1663581110,"question_id":73771565,"body_markdown":"We have a Flink job which has the following topology:\r\n\r\n`source -&gt; filter -&gt; map -&gt; sink`\r\n\r\nWe set a live(ready) status at the sink operator `open`-override function. After we get that status, we send events. Sometimes it can&#39;t consume the events sent early. \r\n\r\nWe want to know the exact time/step that we can send data which will not be missing.","title":"When can a Flink job consume from Kafka?","body":"<p>We have a Flink job which has the following topology:</p>\n<p><code>source -&gt; filter -&gt; map -&gt; sink</code></p>\n<p>We set a live(ready) status at the sink operator <code>open</code>-override function. After we get that status, we send events. Sometimes it can't consume the events sent early.</p>\n<p>We want to know the exact time/step that we can send data which will not be missing.</p>\n"},{"tags":["java","json","log4j"],"answers":[{"tags":[],"owner":{"account_id":5172178,"reputation":161,"user_id":4140340,"display_name":"Abhinav Suryawanshi"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1511951775,"creation_date":1427881032,"answer_id":29387370,"question_id":29387007,"body_markdown":"Yes It is possible.\r\n[Take a look at this link][1]\r\nIt can generate\r\n\r\n \r\n\r\n    {\r\n       &quot;timestamp&quot;:1352412458890,\r\n       &quot;date&quot;:&quot;Nov 8, 2012 10:07:38 PM&quot;,\r\n       &quot;hostname&quot;:&quot;michael1&quot;,\r\n       &quot;username&quot;:&quot;michael&quot;,\r\n       &quot;level&quot;:&quot;INFO&quot;,\r\n       &quot;thread&quot;:&quot;main&quot;,\r\n       &quot;classname&quot;:&quot;uk.me.mjt.log4jjson.SimpleJsonLayoutTest&quot;,\r\n       &quot;filename&quot;:&quot;SimpleJsonLayoutTest.java&quot;,\r\n       &quot;linenumber&quot;:25,\r\n       &quot;methodname&quot;:&quot;testDemonstration&quot;,\r\n       &quot;message&quot;:&quot;Example of some logging&quot;\r\n     }\r\n\r\n\r\n  [1]: https://github.com/michaeltandy/log4j-json\r\n\r\n","title":"Does log4j support JSON format?","body":"<p>Yes It is possible.\n<a href=\"https://github.com/michaeltandy/log4j-json\" rel=\"nofollow noreferrer\">Take a look at this link</a>\nIt can generate</p>\n\n<pre><code>{\n   \"timestamp\":1352412458890,\n   \"date\":\"Nov 8, 2012 10:07:38 PM\",\n   \"hostname\":\"michael1\",\n   \"username\":\"michael\",\n   \"level\":\"INFO\",\n   \"thread\":\"main\",\n   \"classname\":\"uk.me.mjt.log4jjson.SimpleJsonLayoutTest\",\n   \"filename\":\"SimpleJsonLayoutTest.java\",\n   \"linenumber\":25,\n   \"methodname\":\"testDemonstration\",\n   \"message\":\"Example of some logging\"\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6761331,"reputation":482,"user_id":5207993,"display_name":"chad chen"},"down_vote_count":18,"up_vote_count":49,"is_accepted":true,"score":31,"last_activity_date":1464252384,"creation_date":1464252384,"answer_id":37455869,"question_id":29387007,"body_markdown":"just use buildin PatternLayout is ok:\r\n\r\n    log4j.appender.stdout=org.apache.log4j.ConsoleAppender\r\n    log4j.appender.stdout.encoding=UTF-8\r\n    log4j.appender.stdout.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.stdout.layout.ConversionPattern={&quot;debug_level&quot;:&quot;%p&quot;,&quot;debug_timestamp&quot;:&quot;%d{ISO8601}&quot;,&quot;debug_thread&quot;:&quot;%t&quot;,&quot;debug_file&quot;:&quot;%F&quot;, &quot;debug_line&quot;:&quot;%L&quot;,&quot;debug_message&quot;:&quot;%m&quot;}%n\r\n\r\nwill out put like:\r\n\r\n    {\r\n\t    &quot;debug_level&quot; : &quot;INFO&quot;,\r\n\t    &quot;debug_timestamp&quot; : &quot;2016-05-26 16:37:08,938&quot;,\r\n\t    &quot;debug_thread&quot; : &quot;main&quot;,\r\n\t    &quot;debug_file&quot; : &quot;TestLogOutPut.java&quot;,\r\n\t    &quot;debug_line&quot; : &quot;316&quot;,\r\n\t    &quot;debug_message&quot; : &quot;hello i am a log message&quot;\r\n    }","title":"Does log4j support JSON format?","body":"<p>just use buildin PatternLayout is ok:</p>\n\n<pre><code>log4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.encoding=UTF-8\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern={\"debug_level\":\"%p\",\"debug_timestamp\":\"%d{ISO8601}\",\"debug_thread\":\"%t\",\"debug_file\":\"%F\", \"debug_line\":\"%L\",\"debug_message\":\"%m\"}%n\n</code></pre>\n\n<p>will out put like:</p>\n\n<pre><code>{\n    \"debug_level\" : \"INFO\",\n    \"debug_timestamp\" : \"2016-05-26 16:37:08,938\",\n    \"debug_thread\" : \"main\",\n    \"debug_file\" : \"TestLogOutPut.java\",\n    \"debug_line\" : \"316\",\n    \"debug_message\" : \"hello i am a log message\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":905453,"reputation":689,"user_id":940459,"display_name":"Karpov S.Y."},"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1511951647,"creation_date":1474633532,"answer_id":39660734,"question_id":29387007,"body_markdown":"this is official JSON layout\r\n\r\nhttps://github.com/logstash/log4j-jsonevent-layout\r\n\r\n1) Add maven dependency https://mvnrepository.com/artifact/net.logstash.log4j/jsonevent-layout\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.logstash.log4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jsonevent-layout&lt;/artifactId&gt;\r\n        &lt;version&gt;1.7&lt;/version&gt;  \r\n    &lt;/dependency&gt;\r\n\r\n2) Add configuration to your `log4j.properties` file\r\n\r\n     log4j.rootCategory=WARN, RollingLog\r\n     log4j.appender.RollingLog=org.apache.log4j.DailyRollingFileAppender\r\n     log4j.appender.RollingLog.Threshold=TRACE\r\n     log4j.appender.RollingLog.File=api.log\r\n     log4j.appender.RollingLog.DatePattern=.yyyy-MM-dd\r\n     log4j.appender.RollingLog.layout=net.logstash.log4j.JSONEventLayoutV1","title":"Does log4j support JSON format?","body":"<p>this is official JSON layout</p>\n\n<p><a href=\"https://github.com/logstash/log4j-jsonevent-layout\" rel=\"noreferrer\">https://github.com/logstash/log4j-jsonevent-layout</a></p>\n\n<p>1) Add maven dependency <a href=\"https://mvnrepository.com/artifact/net.logstash.log4j/jsonevent-layout\" rel=\"noreferrer\">https://mvnrepository.com/artifact/net.logstash.log4j/jsonevent-layout</a></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.logstash.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;jsonevent-layout&lt;/artifactId&gt;\n    &lt;version&gt;1.7&lt;/version&gt;  \n&lt;/dependency&gt;\n</code></pre>\n\n<p>2) Add configuration to your <code>log4j.properties</code> file</p>\n\n<pre><code> log4j.rootCategory=WARN, RollingLog\n log4j.appender.RollingLog=org.apache.log4j.DailyRollingFileAppender\n log4j.appender.RollingLog.Threshold=TRACE\n log4j.appender.RollingLog.File=api.log\n log4j.appender.RollingLog.DatePattern=.yyyy-MM-dd\n log4j.appender.RollingLog.layout=net.logstash.log4j.JSONEventLayoutV1\n</code></pre>\n"}],"owner":{"account_id":3934029,"reputation":1289,"user_id":3251222,"accept_rate":68,"display_name":"Stefan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71897,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"accepted_answer_id":37455869,"answer_count":3,"score":41,"last_activity_date":1663639765,"creation_date":1427879853,"question_id":29387007,"body_markdown":"Is it possible to let log4j output its logging in JSON format by only altering the `log4j.properties` / `xml` configuration files?\r\n   \r\nI make use of an old application that uses `log4j 1.2`. I only see the standard layout but no JSON layout.","title":"Does log4j support JSON format?","body":"<p>Is it possible to let log4j output its logging in JSON format by only altering the <code>log4j.properties</code> / <code>xml</code> configuration files?</p>\n<p>I make use of an old application that uses <code>log4j 1.2</code>. I only see the standard layout but no JSON layout.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","liquibase"],"answers":[{"tags":[],"owner":{"account_id":24666064,"reputation":365,"user_id":18561714,"display_name":"tabbyfoo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1663638898,"creation_date":1663638898,"answer_id":73780871,"question_id":73648159,"body_markdown":"I found this solution on another site, but it has horrible pop-ups so I&#39;ll spare you the link unless you really want it: \r\n\r\n&gt; The problem was with my `referenceUrl` in liquibase.properties \r\n&gt; The `referenceUrl` is\r\n&gt; `liquibase-hibernate` using package scan, so the url has to\r\n&gt; `liquibase-hibernate` start with `hibernate:spring:`\r\n&gt; \r\n&gt; I changed\r\n&gt; ```\r\n&gt; referenceUrl=com.sample.App?=org.hibernate.dialect.PostgreSQLDialect\r\n&gt; ```\r\n&gt; into\r\n&gt; ```\r\n&gt; referenceUrl=hibernate:spring:com.sample.App?dialect=org.hibernate.dialect.PostgreSQLDialect\r\n&gt; ```\r\n&gt; This solved my problem.\r\n\r\n","title":"Using Maven, Liquibase and Hibernate in Spring Boot to generate Diff-Files between a Database and Entities yields Error","body":"<p>I found this solution on another site, but it has horrible pop-ups so I'll spare you the link unless you really want it:</p>\n<blockquote>\n<p>The problem was with my <code>referenceUrl</code> in liquibase.properties\nThe <code>referenceUrl</code> is\n<code>liquibase-hibernate</code> using package scan, so the url has to\n<code>liquibase-hibernate</code> start with <code>hibernate:spring:</code></p>\n<p>I changed</p>\n<pre><code>referenceUrl=com.sample.App?=org.hibernate.dialect.PostgreSQLDialect\n</code></pre>\n<p>into</p>\n<pre><code>referenceUrl=hibernate:spring:com.sample.App?dialect=org.hibernate.dialect.PostgreSQLDialect\n</code></pre>\n<p>This solved my problem.</p>\n</blockquote>\n"}],"owner":{"account_id":26280468,"reputation":1,"user_id":19949015,"display_name":"CorSenDev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1925,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663638898,"creation_date":1662635648,"question_id":73648159,"body_markdown":"I am trying to generate a Diff-File using Liquibase and Hibernate in a Spring Boot Application that contains the changes between the database I am using and my JPA entities. \r\nI am following this tutorial: https://www.baeldung.com/liquibase-refactor-schema-of-java-app (particularly step 7).\r\n\r\nHowever, when executing the mvn liquidate:diff command, I am only getting the following error: \r\n\r\n    liquibase.exception.DatabaseException: java.lang.RuntimeException: Driver class was not specified and could not be determined from the url (hibernate:spring:com.example.demo?dialect=org.hibernate.dialect.PostgreSQLDialect&amp;amp; hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&amp;amp; hibernate.implicit_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy)\r\n\r\nI have already searched the Internet and there are people that had similar issues, however their solutions did not work in my case. \r\n\r\nHere is my liquidate.properties file:\r\n\r\n    url = jdbc:postgresql://localhost:5432/employeediff\r\n    username = myuser\r\n    password =\r\n    driver=org.postgresql.Driver\r\n    classpath=/usr/local/opt/liquibase/internal/lib/postgresql.jar\r\n    \r\n    changeLogFile = src/main/resources/db/changelog/changelog-master.xml\r\n    diffChangeLogFile = src/main/resources/db/changelog/diffchangelog.xml\r\n    \r\n    referenceUrl= hibernate:spring:com.example.demo?dialect=org.hibernate.dialect.PostgreSQLDialect\r\n\r\nThis is my pom.xml file:\r\n\r\n    &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.liquibase/liquibase-maven-plugin --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.10.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.1.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.1.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    &lt;!--\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;--&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.18.24&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;4.1.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;propertyFile&gt;src/main/resources/liquibase.properties&lt;/propertyFile&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;dependencies&gt;\r\n    \t\t\t\t\t&lt;dependency&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.liquibase.ext&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;liquibase-hibernate5&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;3.6&lt;/version&gt;\r\n    \t\t\t\t\t&lt;/dependency&gt;\r\n    \t\t\t\t\t&lt;dependency&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;5.3.22&lt;/version&gt;\r\n    \t\t\t\t\t&lt;/dependency&gt;\r\n    \t\t\t\t\t&lt;dependency&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;2.7.2&lt;/version&gt;\r\n    \t\t\t\t\t&lt;/dependency&gt;\r\n    \t\t\t\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-jdbc --&gt;\r\n    \t\t\t\t\t&lt;dependency&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;2.7.3&lt;/version&gt;\r\n    \t\t\t\t\t&lt;/dependency&gt;\r\n    \t\t\t\t&lt;/dependencies&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n\r\nAny help is highly appreciated! Thank you very much!\r\n\r\nKind regards","title":"Using Maven, Liquibase and Hibernate in Spring Boot to generate Diff-Files between a Database and Entities yields Error","body":"<p>I am trying to generate a Diff-File using Liquibase and Hibernate in a Spring Boot Application that contains the changes between the database I am using and my JPA entities.\nI am following this tutorial: <a href=\"https://www.baeldung.com/liquibase-refactor-schema-of-java-app\" rel=\"nofollow noreferrer\">https://www.baeldung.com/liquibase-refactor-schema-of-java-app</a> (particularly step 7).</p>\n<p>However, when executing the mvn liquidate:diff command, I am only getting the following error:</p>\n<pre><code>liquibase.exception.DatabaseException: java.lang.RuntimeException: Driver class was not specified and could not be determined from the url (hibernate:spring:com.example.demo?dialect=org.hibernate.dialect.PostgreSQLDialect&amp;amp; hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&amp;amp; hibernate.implicit_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy)\n</code></pre>\n<p>I have already searched the Internet and there are people that had similar issues, however their solutions did not work in my case.</p>\n<p>Here is my liquidate.properties file:</p>\n<pre><code>url = jdbc:postgresql://localhost:5432/employeediff\nusername = myuser\npassword =\ndriver=org.postgresql.Driver\nclasspath=/usr/local/opt/liquibase/internal/lib/postgresql.jar\n\nchangeLogFile = src/main/resources/db/changelog/changelog-master.xml\ndiffChangeLogFile = src/main/resources/db/changelog/diffchangelog.xml\n\nreferenceUrl= hibernate:spring:com.example.demo?dialect=org.hibernate.dialect.PostgreSQLDialect\n</code></pre>\n<p>This is my pom.xml file:</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.liquibase/liquibase-maven-plugin --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n            &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;4.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n            &lt;version&gt;4.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n&lt;!--            &lt;scope&gt;runtime&lt;/scope&gt;--&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.24&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n                &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;4.1.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;propertyFile&gt;src/main/resources/liquibase.properties&lt;/propertyFile&gt;\n                &lt;/configuration&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.liquibase.ext&lt;/groupId&gt;\n                        &lt;artifactId&gt;liquibase-hibernate5&lt;/artifactId&gt;\n                        &lt;version&gt;3.6&lt;/version&gt;\n                    &lt;/dependency&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n                        &lt;version&gt;5.3.22&lt;/version&gt;\n                    &lt;/dependency&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n                        &lt;version&gt;2.7.2&lt;/version&gt;\n                    &lt;/dependency&gt;\n                    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-jdbc --&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n                        &lt;version&gt;2.7.3&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>Any help is highly appreciated! Thank you very much!</p>\n<p>Kind regards</p>\n"},{"tags":["java","design-patterns","factory"],"comments":[{"owner":{"account_id":494571,"reputation":1741,"user_id":1181553,"accept_rate":80,"display_name":"miniBill"},"score":1,"creation_date":1355517216,"post_id":13885836,"comment_id":19128077,"body_markdown":"Why do you want to use a factory? What are you trying to achieve?","body":"Why do you want to use a factory? What are you trying to achieve?"},{"owner":{"account_id":550963,"reputation":549,"user_id":915663,"accept_rate":43,"display_name":"nidu"},"score":1,"creation_date":1355517502,"post_id":13885836,"comment_id":19128179,"body_markdown":"Thought it&#39;s not a sweet solution, you can pass addition map of concrete Shape specific parameters.\nMoreover: is it necessary to provide the radius on creation? You can set some default radius on creation and then set required radius after creating the shape.","body":"Thought it&#39;s not a sweet solution, you can pass addition map of concrete Shape specific parameters. Moreover: is it necessary to provide the radius on creation? You can set some default radius on creation and then set required radius after creating the shape."},{"owner":{"account_id":1407438,"reputation":11298,"user_id":1334761,"accept_rate":62,"display_name":"Jjang"},"score":0,"creation_date":1355517591,"post_id":13885836,"comment_id":19128229,"body_markdown":"Well, I thought about this option, but it contradicts the idea of constructor...","body":"Well, I thought about this option, but it contradicts the idea of constructor..."},{"owner":{"account_id":347037,"reputation":79658,"user_id":680925,"display_name":"Perception"},"score":1,"creation_date":1355517609,"post_id":13885836,"comment_id":19128238,"body_markdown":"The error can&#39;t be where you are showing it. What you are probably getting is an error because your circle factory is not abstract, yet you do not implement any of the methods from your `ShapeFactory` interface. Why do you think you need factories for this use case?","body":"The error can&#39;t be where you are showing it. What you are probably getting is an error because your circle factory is not abstract, yet you do not implement any of the methods from your <code>ShapeFactory</code> interface. Why do you think you need factories for this use case?"},{"owner":{"account_id":28346,"reputation":3660,"user_id":75668,"display_name":"Chad Ruppert"},"score":0,"creation_date":1355517732,"post_id":13885836,"comment_id":19128293,"body_markdown":"Agreed. To do so here would probably be a case where everything is a cargo container, made of the same nails with the same hammer.","body":"Agreed. To do so here would probably be a case where everything is a cargo container, made of the same nails with the same hammer."}],"answers":[{"tags":[],"owner":{"account_id":1413944,"reputation":59678,"user_id":1339987,"accept_rate":54,"display_name":"djechlin"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1355517546,"creation_date":1355517546,"answer_id":13885923,"question_id":13885836,"body_markdown":"What you are trying to do is simply impossible.  If the constructor arguments are different, then the client code will have to do different work for a `Circle` as for a `Square` and you can&#39;t solve this with uniform code.  If there is other work the factory is doing besides handling the constructor arguments that you believe should happen in a factory, then you need to post this to your question and state the difficulty you are having in factoring out this common code-work.","title":"Factory in Java when concrete objects take different constructor parameters","body":"<p>What you are trying to do is simply impossible.  If the constructor arguments are different, then the client code will have to do different work for a <code>Circle</code> as for a <code>Square</code> and you can't solve this with uniform code.  If there is other work the factory is doing besides handling the constructor arguments that you believe should happen in a factory, then you need to post this to your question and state the difficulty you are having in factoring out this common code-work.</p>\n"},{"tags":[],"owner":{"account_id":1351838,"reputation":9009,"user_id":1291238,"accept_rate":81,"display_name":"Random42"},"down_vote_count":1,"up_vote_count":38,"is_accepted":true,"score":37,"last_activity_date":1355519120,"creation_date":1355518760,"answer_id":13886166,"question_id":13885836,"body_markdown":"You have two options:\r\n\r\n 1) [Abstract Factory][1]:\r\n\r\n`RectangularShape extends Shape`\r\n\r\n`RoundShape extends Shape`\r\n\r\nand `RectangularShapeFactory` and `RoundShapeFactory`\r\n\r\n 2) [Builder][2] (see also Item 2 in Effective Java)\r\n\r\n    public Shape {\r\n        private final int x;\r\n        private final int y;\r\n        private final double radius;\r\n    \r\n        private Shape(Builder builder) {\r\n            x = builder.x;\r\n            y = builder.y;\r\n            radius = builder.radius;\r\n        }\r\n    \r\n        public static class Builder {\r\n            private final int x;\r\n            private final int y;\r\n            private double radius;\r\n    \r\n            public Builder(int x, int y) {\r\n                this.x = x;\r\n                this.y = y;\r\n            }\r\n      \r\n            public Builder radius(double radius) {\r\n                this.radius = radius;\r\n                return this;\r\n            }\r\n    \r\n            public Shape build() {\r\n                return new Shape(this);\r\n            }    \r\n        }\r\n    }\r\n    \r\n    //in client code \r\n    \r\n        Shape rectangle = new Shape.Builder(x,y).build();\r\n        Shape circle = new Shape.Builder(x,y).radius(radiusValue).build();\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Abstract_factory\r\n  [2]: http://en.wikipedia.org/wiki/Builder_pattern","title":"Factory in Java when concrete objects take different constructor parameters","body":"<p>You have two options:</p>\n\n<p>1) <a href=\"http://en.wikipedia.org/wiki/Abstract_factory\" rel=\"noreferrer\">Abstract Factory</a>:</p>\n\n<p><code>RectangularShape extends Shape</code></p>\n\n<p><code>RoundShape extends Shape</code></p>\n\n<p>and <code>RectangularShapeFactory</code> and <code>RoundShapeFactory</code></p>\n\n<p>2) <a href=\"http://en.wikipedia.org/wiki/Builder_pattern\" rel=\"noreferrer\">Builder</a> (see also Item 2 in Effective Java)</p>\n\n<pre><code>public Shape {\n    private final int x;\n    private final int y;\n    private final double radius;\n\n    private Shape(Builder builder) {\n        x = builder.x;\n        y = builder.y;\n        radius = builder.radius;\n    }\n\n    public static class Builder {\n        private final int x;\n        private final int y;\n        private double radius;\n\n        public Builder(int x, int y) {\n            this.x = x;\n            this.y = y;\n        }\n\n        public Builder radius(double radius) {\n            this.radius = radius;\n            return this;\n        }\n\n        public Shape build() {\n            return new Shape(this);\n        }    \n    }\n}\n\n//in client code \n\n    Shape rectangle = new Shape.Builder(x,y).build();\n    Shape circle = new Shape.Builder(x,y).radius(radiusValue).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1523286334,"creation_date":1355519734,"answer_id":13886345,"question_id":13885836,"body_markdown":"All of your implementations must take the same number of arguments, you have three options:\r\n\r\n- have the factory store the addition arguments so you only need to provide the centre for example.\r\n- have the factory take all arguments even though some factories might ignore some of them.\r\n- have an argument be variable length. e.g. &#39;double...&#39; the problem with this is the caller needs to know what the factory needs which defeats the purpose of a factory. IMHO.","title":"Factory in Java when concrete objects take different constructor parameters","body":"<p>All of your implementations must take the same number of arguments, you have three options:</p>\n\n<ul>\n<li>have the factory store the addition arguments so you only need to provide the centre for example.</li>\n<li>have the factory take all arguments even though some factories might ignore some of them.</li>\n<li>have an argument be variable length. e.g. 'double...' the problem with this is the caller needs to know what the factory needs which defeats the purpose of a factory. IMHO.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":300083,"reputation":25180,"user_id":607033,"accept_rate":94,"display_name":"inf3rno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578977132,"creation_date":1578972342,"answer_id":59727124,"question_id":13885836,"body_markdown":"Having a Shape interface is usually a bad design, because it is very limited. You need different information to describe different shapes. Resize is a good example for this. For a circle you need to change the radius, for the rectangle you need to change both sides, which means passing two parameters instead of one.\r\n\r\nYou can overcome this by passing some sort of shape descriptor, for example a rectangle the actual shape must fit in. So it can be resized properly assuming that all your shapes are predefined with classes and all you want to scale them. If you want to have custom shapes then the shape descriptor must be extended somehow to contain all the information necessary for the custom shapes, but stay compatible with the existing shapes. That is not necessarily very hard, you can add a property or a parameter that can be null. Here I add only new parameters.\r\n\r\n    private interface ShapeFactory{\r\n        public Shape create(float x, float y, float width, float height);\r\n    }\r\n\r\n    private class CircleFactory implements ShapeFactory{\r\n        public Shape create(float x, float y, float width, float height){\r\n            float radius = Math.min(width, height);\r\n            return new Circle(radius, x, y);\r\n        }\r\n    }\r\n\r\nAnother thought that you use the factory usually this way (ofc. the upper can be good too depending on what you want):\r\n\r\n    private interface ShapeFactory{\r\n        public Shape create(float x, float y, float width, float height, bool isCircle);\r\n    }\r\n\r\n    private class MyShapeFactory implements ShapeFactory{\r\n        public Shape create(float x, float y, float width, float height, bool isCircle){\r\n            if (isCircle)\r\n                return new Circle(Math.min(width, height), x, y);\r\n            else\r\n                return new Rectangle(width, height, x, y);\r\n        }\r\n    }\r\n\r\nSo the factory does not necessarily has the same parameters as the constructors. Many people have this impression, because I guess they try to automate factories and pass only a class list without any info about how to instantiate them. It is the same mistake people use to commit by automated DI containers as well.\r\n\r\nWhat is really important here whether the upper level code wants to know about what kind of Shape implementation it gets back. But in some cases it can happen, that you have or refactor to some sort of general descriptor. For example you don&#39;t necessarily have a `Shape.scale(width, height)` method, and if so, you won&#39;t be able to resize your circle or rectangle, because just as by constructors, the scaling is different there. But if all you want is call something like `Shape.draw(canvas)`, then I guess you are good to go.\r\n\r\nI found a similar question with a similar answer meanwhile, maybe you can learn from that too: https://softwareengineering.stackexchange.com/a/389507/65755","title":"Factory in Java when concrete objects take different constructor parameters","body":"<p>Having a Shape interface is usually a bad design, because it is very limited. You need different information to describe different shapes. Resize is a good example for this. For a circle you need to change the radius, for the rectangle you need to change both sides, which means passing two parameters instead of one.</p>\n\n<p>You can overcome this by passing some sort of shape descriptor, for example a rectangle the actual shape must fit in. So it can be resized properly assuming that all your shapes are predefined with classes and all you want to scale them. If you want to have custom shapes then the shape descriptor must be extended somehow to contain all the information necessary for the custom shapes, but stay compatible with the existing shapes. That is not necessarily very hard, you can add a property or a parameter that can be null. Here I add only new parameters.</p>\n\n<pre><code>private interface ShapeFactory{\n    public Shape create(float x, float y, float width, float height);\n}\n\nprivate class CircleFactory implements ShapeFactory{\n    public Shape create(float x, float y, float width, float height){\n        float radius = Math.min(width, height);\n        return new Circle(radius, x, y);\n    }\n}\n</code></pre>\n\n<p>Another thought that you use the factory usually this way (ofc. the upper can be good too depending on what you want):</p>\n\n<pre><code>private interface ShapeFactory{\n    public Shape create(float x, float y, float width, float height, bool isCircle);\n}\n\nprivate class MyShapeFactory implements ShapeFactory{\n    public Shape create(float x, float y, float width, float height, bool isCircle){\n        if (isCircle)\n            return new Circle(Math.min(width, height), x, y);\n        else\n            return new Rectangle(width, height, x, y);\n    }\n}\n</code></pre>\n\n<p>So the factory does not necessarily has the same parameters as the constructors. Many people have this impression, because I guess they try to automate factories and pass only a class list without any info about how to instantiate them. It is the same mistake people use to commit by automated DI containers as well.</p>\n\n<p>What is really important here whether the upper level code wants to know about what kind of Shape implementation it gets back. But in some cases it can happen, that you have or refactor to some sort of general descriptor. For example you don't necessarily have a <code>Shape.scale(width, height)</code> method, and if so, you won't be able to resize your circle or rectangle, because just as by constructors, the scaling is different there. But if all you want is call something like <code>Shape.draw(canvas)</code>, then I guess you are good to go.</p>\n\n<p>I found a similar question with a similar answer meanwhile, maybe you can learn from that too: <a href=\"https://softwareengineering.stackexchange.com/a/389507/65755\">https://softwareengineering.stackexchange.com/a/389507/65755</a></p>\n"},{"tags":[],"owner":{"account_id":7428185,"reputation":35,"user_id":5650029,"display_name":"user5650029"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613858397,"creation_date":1613858397,"answer_id":66296981,"question_id":13885836,"body_markdown":"You can use a class to wrap the factory arguments, like this:\r\n \r\n```\r\npublic interface ShapeArguments{\r\n}\r\n\r\npublic class CircleArguments implements ShapeArguments{\r\n ...\r\n\r\n public CircleArguments(... radius,... x,... y){\r\n    ...\r\n }\r\n}\r\n\r\nprivate interface ShapeFactory{\r\n        public Shape create(ShapeArguments args);\r\n    }\r\n\r\n    private class CircleFactory implements ShapeFactory{\r\n        public Shape create(ShapeArguments args){\r\n            CircleArguments circleArgs = (CircleArguments)args;\r\n            return new Circle(circleArgs.radius, circleArgs.x,circleArgs.y);\r\n        }\r\n    }\r\n```\r\n\r\nIf there are any common arguments between the shape arguments you can use the inheritence to manage it better","title":"Factory in Java when concrete objects take different constructor parameters","body":"<p>You can use a class to wrap the factory arguments, like this:</p>\n<pre><code>public interface ShapeArguments{\n}\n\npublic class CircleArguments implements ShapeArguments{\n ...\n\n public CircleArguments(... radius,... x,... y){\n    ...\n }\n}\n\nprivate interface ShapeFactory{\n        public Shape create(ShapeArguments args);\n    }\n\n    private class CircleFactory implements ShapeFactory{\n        public Shape create(ShapeArguments args){\n            CircleArguments circleArgs = (CircleArguments)args;\n            return new Circle(circleArgs.radius, circleArgs.x,circleArgs.y);\n        }\n    }\n</code></pre>\n<p>If there are any common arguments between the shape arguments you can use the inheritence to manage it better</p>\n"},{"tags":[],"owner":{"account_id":5954045,"reputation":3379,"user_id":4681265,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653227848,"creation_date":1653224638,"answer_id":72337807,"question_id":13885836,"body_markdown":"The factory parameters are not mandatory to be the object-to-construct constructor’s parameters but merely information necessary for *the construction logic*; e.g. a DataSource factory method could receive no parameters, all of them might already be present (aka configured) into the factory (e.g. maxConnections). So you’re factory method’s parameters could be anything, e.g. an object containing the object-to-construct constructor’s parameters; additionally, that parameters-object could be used to *identify the kind of object to create*.\r\n\r\nAccording to the book (Design Patterns):\r\n\r\n&gt; Another variation on the pattern lets the factory method create\r\n&gt; multiple kinds of products. The factory method takes a parameter that\r\n&gt; identifies the kind of object to create. All objects the factory\r\n&gt; method creates will share the Product interface. In the Document\r\n&gt; example, Application might support different kinds of Documents. You\r\n&gt; pass CreateDocument an extra parameter to specify the kind of document\r\n&gt; to create.","title":"Factory in Java when concrete objects take different constructor parameters","body":"<p>The factory parameters are not mandatory to be the object-to-construct constructor’s parameters but merely information necessary for <em>the construction logic</em>; e.g. a DataSource factory method could receive no parameters, all of them might already be present (aka configured) into the factory (e.g. maxConnections). So you’re factory method’s parameters could be anything, e.g. an object containing the object-to-construct constructor’s parameters; additionally, that parameters-object could be used to <em>identify the kind of object to create</em>.</p>\n<p>According to the book (Design Patterns):</p>\n<blockquote>\n<p>Another variation on the pattern lets the factory method create\nmultiple kinds of products. The factory method takes a parameter that\nidentifies the kind of object to create. All objects the factory\nmethod creates will share the Product interface. In the Document\nexample, Application might support different kinds of Documents. You\npass CreateDocument an extra parameter to specify the kind of document\nto create.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":109445,"reputation":3624,"user_id":289995,"accept_rate":85,"display_name":"Manius"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663638632,"creation_date":1663638632,"answer_id":73780848,"question_id":13885836,"body_markdown":"Hard to know if this completely addresses the OP&#39;s problem (only 9 years late!) but given the provided info this would seem to do so. Design Patterns page 114 has an example where a factory has multiple create() methods, which could translate to something like this. \r\n\r\n    public interface ShapeFactory {\r\n      Circle createCircle(int radius);\r\n      Triangle createTriangle(int l1, int l2, int l3);\r\n    }\r\n    \r\n    public class MockShapeFactory {\r\n      Circle createCircle(int radius) {\r\n        return new MockCircle();\r\n      }\r\n    \r\n      Triangle createTriangle(int l1, int l2, int l3) {\r\n        return new MockTriangle();\r\n      }\r\n    }\r\n    \r\n    public class RasterShapeFactory {\r\n      Circle createCircle(int radius) {\r\n        return new MockCircle(radius);\r\n      }\r\n    \r\n      Triangle createTriangle(int l1, int l2, int l3) {\r\n        return new MockTriangle(l1, l2, l3);\r\n      }\r\n    }\r\n\r\nEach created Shape can still implement a common interface despite taking different parameters. (Ignoring the &#39;questionableness&#39; of having these classes implement a draw() method in this theoretical example...) \r\n\r\n    public interface Shape {\r\n      draw();\r\n    }","title":"Factory in Java when concrete objects take different constructor parameters","body":"<p>Hard to know if this completely addresses the OP's problem (only 9 years late!) but given the provided info this would seem to do so. Design Patterns page 114 has an example where a factory has multiple create() methods, which could translate to something like this.</p>\n<pre><code>public interface ShapeFactory {\n  Circle createCircle(int radius);\n  Triangle createTriangle(int l1, int l2, int l3);\n}\n\npublic class MockShapeFactory {\n  Circle createCircle(int radius) {\n    return new MockCircle();\n  }\n\n  Triangle createTriangle(int l1, int l2, int l3) {\n    return new MockTriangle();\n  }\n}\n\npublic class RasterShapeFactory {\n  Circle createCircle(int radius) {\n    return new MockCircle(radius);\n  }\n\n  Triangle createTriangle(int l1, int l2, int l3) {\n    return new MockTriangle(l1, l2, l3);\n  }\n}\n</code></pre>\n<p>Each created Shape can still implement a common interface despite taking different parameters. (Ignoring the 'questionableness' of having these classes implement a draw() method in this theoretical example...)</p>\n<pre><code>public interface Shape {\n  draw();\n}\n</code></pre>\n"}],"owner":{"account_id":1407438,"reputation":11298,"user_id":1334761,"accept_rate":62,"display_name":"Jjang"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37029,"favorite_count":0,"down_vote_count":2,"up_vote_count":57,"accepted_answer_id":13886166,"answer_count":7,"score":55,"last_activity_date":1663638632,"creation_date":1355517158,"question_id":13885836,"body_markdown":"I&#39;m trying to implement a Factory pattern in Java.\r\nI have a class called Shape which Circle and Triangle extends.\r\nThe problem is that Shape constructor gets only 2 parameters while Circle gets 3 parameters and so is Triangle (which I won&#39;t show in the code section because is identical to Circle).\r\nTo demonstrate it better:\r\n\r\n        private interface ShapeFactory{\r\n\t    \tpublic Shape create(int x, int y);\r\n\t    }\r\n\t\r\n\t    private class CircleFactory implements ShapeFactory{\r\n\t    \tpublic Shape create(float radius, int x, int y){ //error\r\n\t    \t\treturn new Circle(radius, x,y);\r\n\t    \t}\r\n\t    }\r\n\r\nAny ideas how to overcome this problem? I must not recieve an input from user inside the factory (must be recieved from outside).\r\n\r\nThanks!","title":"Factory in Java when concrete objects take different constructor parameters","body":"<p>I'm trying to implement a Factory pattern in Java.\nI have a class called Shape which Circle and Triangle extends.\nThe problem is that Shape constructor gets only 2 parameters while Circle gets 3 parameters and so is Triangle (which I won't show in the code section because is identical to Circle).\nTo demonstrate it better:</p>\n\n<pre><code>    private interface ShapeFactory{\n        public Shape create(int x, int y);\n    }\n\n    private class CircleFactory implements ShapeFactory{\n        public Shape create(float radius, int x, int y){ //error\n            return new Circle(radius, x,y);\n        }\n    }\n</code></pre>\n\n<p>Any ideas how to overcome this problem? I must not recieve an input from user inside the factory (must be recieved from outside).</p>\n\n<p>Thanks!</p>\n"},{"tags":["java",".net","stream","language-agnostic","iostream"],"comments":[{"owner":{"account_id":17500,"reputation":3468,"user_id":39233,"accept_rate":100,"display_name":"dmajkic"},"score":0,"creation_date":1233677585,"post_id":507747,"comment_id":130039814,"body_markdown":"It&#39;s not about streams - it&#39;s about swimming. If you can swim one Stream, than you can swim any Stream you encounter.","body":"It&#39;s not about streams - it&#39;s about swimming. If you can swim one Stream, than you can swim any Stream you encounter."},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":0,"creation_date":1360803201,"post_id":507747,"comment_id":130039819,"body_markdown":"Another analogy: You can&#39;t swim against a stream, that&#39;s why you just can take the next bit, byte, string or object from the stream, while the already read data is deleted. A one-way-ticket...or basically just a **queue** without storing persistence. So do we need queues? You decide.","body":"Another analogy: You can&#39;t swim against a stream, that&#39;s why you just can take the next bit, byte, string or object from the stream, while the already read data is deleted. A one-way-ticket...or basically just a <b>queue</b> without storing persistence. So do we need queues? You decide."}],"answers":[{"tags":[],"owner":{"account_id":3628,"reputation":4415,"user_id":5243,"display_name":"Torlack"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1233677293,"creation_date":1233677293,"answer_id":507750,"question_id":507747,"body_markdown":"The point of the stream is to provide a layer of abstraction between you and the backing store.  Thus a given block of code that uses a stream need not care if the backing store is a disk file, memory, etc...","title":"Can you explain the concept of streams?","body":"<p>The point of the stream is to provide a layer of abstraction between you and the backing store.  Thus a given block of code that uses a stream need not care if the backing store is a disk file, memory, etc...</p>\n"},{"tags":[],"owner":{"account_id":4212,"reputation":25011,"user_id":6258,"accept_rate":70,"display_name":"vava"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1233677683,"creation_date":1233677367,"answer_id":507755,"question_id":507747,"body_markdown":"It&#39;s just a concept, another level of abstraction that makes your life easier. And they all have common interface which means you can combine them in a pipe like manner. For example, encode to base64, then zip and then write this to disk and all in one line!","title":"Can you explain the concept of streams?","body":"<p>It's just a concept, another level of abstraction that makes your life easier. And they all have common interface which means you can combine them in a pipe like manner. For example, encode to base64, then zip and then write this to disk and all in one line!</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1233677372,"creation_date":1233677372,"answer_id":507756,"question_id":507747,"body_markdown":"The point is that you shouldn&#39;t have to know what the backing store is - it&#39;s an abstraction over it. Indeed, there might not even *be* a backing store - you could be reading from a network, and the data is never &quot;stored&quot; at all.\r\n\r\nIf you can write code that works whether you&#39;re talking to a file system, memory, a network or anything else which supports the stream idea, your code is a lot more flexible.\r\n\r\nIn addition, streams are often chained together - you can have a stream which compresses whatever is put into it, writing the compressed form on to another stream, or one which encrypts the data, etc. At the other end there&#39;d be the reverse chain, decrypting, decompressing or whatever.","title":"Can you explain the concept of streams?","body":"<p>The point is that you shouldn't have to know what the backing store is - it's an abstraction over it. Indeed, there might not even <em>be</em> a backing store - you could be reading from a network, and the data is never \"stored\" at all.</p>\n\n<p>If you can write code that works whether you're talking to a file system, memory, a network or anything else which supports the stream idea, your code is a lot more flexible.</p>\n\n<p>In addition, streams are often chained together - you can have a stream which compresses whatever is put into it, writing the compressed form on to another stream, or one which encrypts the data, etc. At the other end there'd be the reverse chain, decrypting, decompressing or whatever.</p>\n"},{"tags":[],"owner":{"account_id":13088,"reputation":61347,"user_id":26095,"accept_rate":83,"display_name":"Sean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1233677390,"creation_date":1233677390,"answer_id":507758,"question_id":507747,"body_markdown":"A stream is an abstracting of a sequence of bytes. The idea is that you don&#39;t need to know where the bytes come from, just that you can read them in a standardized manner.\r\n\r\nFor example, if you process data via a stream then it doesn&#39;t matter to your code if the data comes from a file, a network connection, a string, a blob in a database etc etc etc.\r\n\r\nThere&#39;s nothing wrong per-se with interacting with the backing store itself except for the fact that it ties you to the backing store implementation.","title":"Can you explain the concept of streams?","body":"<p>A stream is an abstracting of a sequence of bytes. The idea is that you don't need to know where the bytes come from, just that you can read them in a standardized manner.</p>\n\n<p>For example, if you process data via a stream then it doesn't matter to your code if the data comes from a file, a network connection, a string, a blob in a database etc etc etc.</p>\n\n<p>There's nothing wrong per-se with interacting with the backing store itself except for the fact that it ties you to the backing store implementation.</p>\n"},{"tags":[],"owner":{"account_id":23860,"reputation":114051,"user_id":60188,"accept_rate":56,"display_name":"Anton Gogolev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1233677434,"creation_date":1233677434,"answer_id":507763,"question_id":507747,"body_markdown":"Think of streams as of an abstract source of data (bytes, characters, etc.). They abstract actual mechanics of reading from and writing to the concrete datasource, be it a network socket, file on a disk or a response from the web server.","title":"Can you explain the concept of streams?","body":"<p>Think of streams as of an abstract source of data (bytes, characters, etc.). They abstract actual mechanics of reading from and writing to the concrete datasource, be it a network socket, file on a disk or a response from the web server.</p>\n"},{"tags":[],"owner":{"account_id":11929,"reputation":61635,"user_id":23234,"accept_rate":85,"display_name":"Jeff Yates"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1233677561,"creation_date":1233677561,"answer_id":507778,"question_id":507747,"body_markdown":"A stream is an abstraction that provides a standard set of methods and properties for interacting with data. By abstracting away from the actual storage medium, your code can be written without total reliance on what that medium is or even the implementation of that medium.\r\n\r\nAn good analogy might be to consider a bag. You don&#39;t care what a bag is made of or what it does when you put your stuff in it, as long as the bag performs the job of being a bag and you can get your stuff back out. A stream defines for storage media what the concept of bag defines for different instances of a bag (such as trash bag, handbag, rucksack, etc.) - the rules of interaction.","title":"Can you explain the concept of streams?","body":"<p>A stream is an abstraction that provides a standard set of methods and properties for interacting with data. By abstracting away from the actual storage medium, your code can be written without total reliance on what that medium is or even the implementation of that medium.</p>\n\n<p>An good analogy might be to consider a bag. You don't care what a bag is made of or what it does when you put your stuff in it, as long as the bag performs the job of being a bag and you can get your stuff back out. A stream defines for storage media what the concept of bag defines for different instances of a bag (such as trash bag, handbag, rucksack, etc.) - the rules of interaction.</p>\n"},{"tags":[],"owner":{"account_id":14333,"reputation":2606,"user_id":29408,"accept_rate":78,"display_name":"Julian Birch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1233677933,"creation_date":1233677933,"answer_id":507804,"question_id":507747,"body_markdown":"I think you need to consider that the backing store itself is often just another abstraction.  A memory stream is pretty easy to understand, but a file is radically different depending on which file system you&#39;re using, never mind what hard drive you are using.  Not all streams do in fact sit on top of a backing store: network streams pretty much just are streams.\r\n\r\nThe point of a stream is that we restrict our attention to what is important.  By having a standard abstraction, we can perform common operations.  Even if you don&#39;t want to, for instance, search a file or an HTTP response for URLs today, doesn&#39;t mean you won&#39;t wish to tomorrow.\r\n\r\nStreams were originally conceived when memory was tiny compared to storage.  Just reading a C file could be a significant load.  Minimizing the memory footprint was extremely important.  Hence, an abstraction in which very little needed to be loaded was very useful.  Today, it is equally useful when performing network communication and, it turns out, rarely that restrictive when we deal with files.  The ability to transparently add things like buffering in a general fashion makes it even more useful.","title":"Can you explain the concept of streams?","body":"<p>I think you need to consider that the backing store itself is often just another abstraction.  A memory stream is pretty easy to understand, but a file is radically different depending on which file system you're using, never mind what hard drive you are using.  Not all streams do in fact sit on top of a backing store: network streams pretty much just are streams.</p>\n\n<p>The point of a stream is that we restrict our attention to what is important.  By having a standard abstraction, we can perform common operations.  Even if you don't want to, for instance, search a file or an HTTP response for URLs today, doesn't mean you won't wish to tomorrow.</p>\n\n<p>Streams were originally conceived when memory was tiny compared to storage.  Just reading a C file could be a significant load.  Minimizing the memory footprint was extremely important.  Hence, an abstraction in which very little needed to be loaded was very useful.  Today, it is equally useful when performing network communication and, it turns out, rarely that restrictive when we deal with files.  The ability to transparently add things like buffering in a general fashion makes it even more useful.</p>\n"},{"tags":[],"owner":{"account_id":1850,"reputation":25068,"user_id":2547,"accept_rate":85,"display_name":"OwenP"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1233678150,"creation_date":1233678150,"answer_id":507812,"question_id":507747,"body_markdown":"To add to the echo chamber, the stream is an abstraction so you don&#39;t care about the underlying store.  It makes the most sense when you consider scenarios with and without streams.\r\n\r\nFiles are uninteresting for the most part because streams don&#39;t do much above and beyond what non-stream-based methods I&#39;m familiar with did.  Let&#39;s start with internet files.\r\n\r\nIf I want to download a file from the internet, I have to open a TCP socket, make a connection, and receive bytes until there are no more bytes.  I have to manage a buffer, know the size of the expected file, and write code to detect when the connection is dropped and handle this appropriately.\r\n\r\nLet&#39;s say I have some sort of TcpDataStream object.  I create it with the appropriate connection information, then read bytes from the stream until it says there aren&#39;t any more bytes.  The stream handles the buffer management, end-of-data conditions, and connection management.\r\n\r\nIn this way, streams make I/O easier.  You could certainly write a TcpFileDownloader class that does what the stream does, but then you have  a class that&#39;s specific to TCP.  Most stream interfaces simply provide a Read() and Write() method, and any more complicated concepts are handled by the internal implementation.  Because of this, you can use the same basic code to read or write to memory, disk files, sockets, and many other data stores.","title":"Can you explain the concept of streams?","body":"<p>To add to the echo chamber, the stream is an abstraction so you don't care about the underlying store.  It makes the most sense when you consider scenarios with and without streams.</p>\n\n<p>Files are uninteresting for the most part because streams don't do much above and beyond what non-stream-based methods I'm familiar with did.  Let's start with internet files.</p>\n\n<p>If I want to download a file from the internet, I have to open a TCP socket, make a connection, and receive bytes until there are no more bytes.  I have to manage a buffer, know the size of the expected file, and write code to detect when the connection is dropped and handle this appropriately.</p>\n\n<p>Let's say I have some sort of TcpDataStream object.  I create it with the appropriate connection information, then read bytes from the stream until it says there aren't any more bytes.  The stream handles the buffer management, end-of-data conditions, and connection management.</p>\n\n<p>In this way, streams make I/O easier.  You could certainly write a TcpFileDownloader class that does what the stream does, but then you have  a class that's specific to TCP.  Most stream interfaces simply provide a Read() and Write() method, and any more complicated concepts are handled by the internal implementation.  Because of this, you can use the same basic code to read or write to memory, disk files, sockets, and many other data stores.</p>\n"},{"tags":[],"owner":{"account_id":18139,"reputation":41753,"user_id":41283,"accept_rate":87,"display_name":"Hosam Aly"},"down_vote_count":0,"up_vote_count":259,"is_accepted":true,"score":259,"last_activity_date":1256735062,"creation_date":1233678393,"answer_id":507829,"question_id":507747,"body_markdown":"The word &quot;stream&quot; has been chosen because it represents (in real life) a very similar meaning to what we want to convey when we use it.\r\n\r\nLet&#39;s forget about the backing store for a little, and start thinking about the analogy to a water stream. You receive a continuous flow of data, just like water continuously flows in a river. You don&#39;t necessarily know where the data is coming from, and most often you don&#39;t need to; be it from a file, a socket, or any other source, it doesn&#39;t (shouldn&#39;t) really matter. This is very similar to receiving a stream of water, whereby you don&#39;t need to know where it is coming from; be it from a lake, a fountain, or any other source, it doesn&#39;t (shouldn&#39;t) really matter.\r\n\r\nThat said, once you start thinking that you only care about getting the data you need, regardless of where it comes from, the abstractions other people talked about become clearer. You start thinking that you can wrap streams, and your methods will still work perfectly. For example, you could do this:\r\n\r\n    int ReadInt(StreamReader reader) { return Int32.Parse(reader.ReadLine()); }\r\n\r\n    // in another method:\r\n    Stream fileStream = new FileStream(&quot;My Data.dat&quot;);\r\n    Stream zipStream = new ZipDecompressorStream(fileStream);\r\n    Stream decryptedStream = new DecryptionStream(zipStream);\r\n    StreamReader reader = new StreamReader(decryptedStream);\r\n\r\n    int x = ReadInt(reader);\r\n\r\nAs you see, it becomes very easy to change your input source without changing your processing logic. For example, to read your data from a network socket instead of a file:\r\n\r\n    Stream stream = new NetworkStream(mySocket);\r\n    StreamReader reader = new StreamReader(stream);\r\n    int x = ReadInt(reader);\r\n\r\nAs easy as it can be. And the beauty continues, as you can use any kind of input source, as long as you can build a stream &quot;wrapper&quot; for it. You could even do this:\r\n\r\n    public class RandomNumbersStreamReader : StreamReader {\r\n        private Random random = new Random();\r\n\r\n        public String ReadLine() { return random.Next().ToString(); }\r\n    }\r\n\r\n    // and to call it:\r\n    int x = ReadInt(new RandomNumbersStreamReader());\r\n\r\nSee? As long as your method doesn&#39;t care what the input source is, you can customize your source in various ways. The abstraction allows you to decouple input from processing logic in a very elegant way.\r\n\r\nNote that the stream we created ourselves does not have a backing store, but it still serves our purposes perfectly.\r\n\r\nSo, to summarize, a stream is just a source of input, hiding away (abstracting) another source. As long as you don&#39;t break the abstraction, your code will be very flexible.","title":"Can you explain the concept of streams?","body":"<p>The word \"stream\" has been chosen because it represents (in real life) a very similar meaning to what we want to convey when we use it.</p>\n\n<p>Let's forget about the backing store for a little, and start thinking about the analogy to a water stream. You receive a continuous flow of data, just like water continuously flows in a river. You don't necessarily know where the data is coming from, and most often you don't need to; be it from a file, a socket, or any other source, it doesn't (shouldn't) really matter. This is very similar to receiving a stream of water, whereby you don't need to know where it is coming from; be it from a lake, a fountain, or any other source, it doesn't (shouldn't) really matter.</p>\n\n<p>That said, once you start thinking that you only care about getting the data you need, regardless of where it comes from, the abstractions other people talked about become clearer. You start thinking that you can wrap streams, and your methods will still work perfectly. For example, you could do this:</p>\n\n<pre><code>int ReadInt(StreamReader reader) { return Int32.Parse(reader.ReadLine()); }\n\n// in another method:\nStream fileStream = new FileStream(\"My Data.dat\");\nStream zipStream = new ZipDecompressorStream(fileStream);\nStream decryptedStream = new DecryptionStream(zipStream);\nStreamReader reader = new StreamReader(decryptedStream);\n\nint x = ReadInt(reader);\n</code></pre>\n\n<p>As you see, it becomes very easy to change your input source without changing your processing logic. For example, to read your data from a network socket instead of a file:</p>\n\n<pre><code>Stream stream = new NetworkStream(mySocket);\nStreamReader reader = new StreamReader(stream);\nint x = ReadInt(reader);\n</code></pre>\n\n<p>As easy as it can be. And the beauty continues, as you can use any kind of input source, as long as you can build a stream \"wrapper\" for it. You could even do this:</p>\n\n<pre><code>public class RandomNumbersStreamReader : StreamReader {\n    private Random random = new Random();\n\n    public String ReadLine() { return random.Next().ToString(); }\n}\n\n// and to call it:\nint x = ReadInt(new RandomNumbersStreamReader());\n</code></pre>\n\n<p>See? As long as your method doesn't care what the input source is, you can customize your source in various ways. The abstraction allows you to decouple input from processing logic in a very elegant way.</p>\n\n<p>Note that the stream we created ourselves does not have a backing store, but it still serves our purposes perfectly.</p>\n\n<p>So, to summarize, a stream is just a source of input, hiding away (abstracting) another source. As long as you don't break the abstraction, your code will be very flexible.</p>\n"},{"tags":[],"owner":{"display_name":"user8599"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1233686848,"creation_date":1233686848,"answer_id":508395,"question_id":507747,"body_markdown":"The visualisation I use is conveyor belts, not in real factories because I don&#39;t know anything about that, but in cartoon factories where items move along lines and get stamped and boxed and counted and checked by a sequence of dumb devices.\r\n\r\nYou have simple components that do one thing, for example a device to put a cherry on a cake. This device has an input stream of cherryless cakes, and an output stream of cakes with cherries. There are three advantages worth mentioning structuring your processing in this way.\r\n\r\nFirstly it simplifies the components themselves: if you want to put chocolate icing on a cake, you don&#39;t need a complicated device that knows everything about cakes, you can create a dumb device that sticks chocolate icing onto whatever is fed into it (in the cartoons, this goes as far as not knowing that the next item in isn&#39;t a cake, it&#39;s Wile E. Coyote).\r\n\r\nSecondly you can create different products by putting the devices into different sequences: maybe you want your cakes to have icing on top of the cherry instead of cherry on top of the icing, and you can do that simply by swapping the devices around on the line. \r\n\r\nThirdly, the devices don&#39;t need to manage inventory, boxing, or unboxing. The most efficient way of aggregating and packaging things is changeable: maybe today you&#39;re putting your cakes into boxes of 48 and sending them out by the truckload, but tomorrow you want to send out boxes of six in response to custom orders. This kind of change can be accommodated by replacing or reconfiguring the machines at the start and end of the production line; the cherry machine in the middle of the line doesn&#39;t have to be changed to process a different number of items at a time, it always works with one item at a time and it doesn&#39;t have to know how its input or output is being grouped.\r\n\r\n\r\n\r\n\r\n","title":"Can you explain the concept of streams?","body":"<p>The visualisation I use is conveyor belts, not in real factories because I don't know anything about that, but in cartoon factories where items move along lines and get stamped and boxed and counted and checked by a sequence of dumb devices.</p>\n\n<p>You have simple components that do one thing, for example a device to put a cherry on a cake. This device has an input stream of cherryless cakes, and an output stream of cakes with cherries. There are three advantages worth mentioning structuring your processing in this way.</p>\n\n<p>Firstly it simplifies the components themselves: if you want to put chocolate icing on a cake, you don't need a complicated device that knows everything about cakes, you can create a dumb device that sticks chocolate icing onto whatever is fed into it (in the cartoons, this goes as far as not knowing that the next item in isn't a cake, it's Wile E. Coyote).</p>\n\n<p>Secondly you can create different products by putting the devices into different sequences: maybe you want your cakes to have icing on top of the cherry instead of cherry on top of the icing, and you can do that simply by swapping the devices around on the line. </p>\n\n<p>Thirdly, the devices don't need to manage inventory, boxing, or unboxing. The most efficient way of aggregating and packaging things is changeable: maybe today you're putting your cakes into boxes of 48 and sending them out by the truckload, but tomorrow you want to send out boxes of six in response to custom orders. This kind of change can be accommodated by replacing or reconfiguring the machines at the start and end of the production line; the cherry machine in the middle of the line doesn't have to be changed to process a different number of items at a time, it always works with one item at a time and it doesn't have to know how its input or output is being grouped.</p>\n"},{"tags":[],"owner":{"account_id":564388,"reputation":5104,"user_id":53607,"accept_rate":73,"display_name":"Ken"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1233687833,"creation_date":1233687833,"answer_id":508451,"question_id":507747,"body_markdown":"The best explanation of streams I&#39;ve seen is [chapter 3 of SICP][1].  (You may need to read the first 2 chapters for it to make sense, but you should anyway.  :-)\r\n\r\nThey don&#39;t use sterams for bytes at all, but rather integers.  The big points that I got from it were:\r\n\r\n * Streams are delayed lists\r\n * The computational overhead [of eagerly computing everything ahead of time, in some cases] is outrageous\r\n * We can use streams to represent sequences that are infinitely long\r\n\r\n  [1]: http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-24.html#%_sec_3.5","title":"Can you explain the concept of streams?","body":"<p>The best explanation of streams I've seen is <a href=\"http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-24.html#%_sec_3.5\" rel=\"nofollow noreferrer\">chapter 3 of SICP</a>.  (You may need to read the first 2 chapters for it to make sense, but you should anyway.  :-)</p>\n\n<p>They don't use sterams for bytes at all, but rather integers.  The big points that I got from it were:</p>\n\n<ul>\n<li>Streams are delayed lists</li>\n<li>The computational overhead [of eagerly computing everything ahead of time, in some cases] is outrageous</li>\n<li>We can use streams to represent sequences that are infinitely long</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":46294,"reputation":4365,"user_id":136683,"display_name":"IRBMe"},"down_vote_count":0,"up_vote_count":138,"is_accepted":false,"score":138,"last_activity_date":1636275064,"creation_date":1249124970,"answer_id":1216397,"question_id":507747,"body_markdown":"A stream is already a metaphor, an analogy, so there&#39;s really no need to provide another one. You can think of it basically as a pipe with a flow of water in it where the water is actually data and the pipe is the stream. I suppose it&#39;s kind of a 2-way pipe if the stream is bi-directional. It&#39;s basically a common abstraction that is placed upon things where there is a flow or sequence of data in one or both directions.\r\n\r\nIn languages such as C#, VB.Net, C++, Java etc., the stream metaphor is used for many things. There are file streams, in which you open a file and can read from the stream or write to it continuously; There are network streams where reading from and writing to the stream reads from and writes to an underlying established network connection. Streams for writing only are typically called output streams, as in [this][1] example, and similarly, streams that are for reading only are called input streams, as in [this][2] example.\r\n\r\nA stream can perform transformation or encoding of data (an [SslStream][3] in .Net, for example, will eat up the SSL negotiation data and hide it from you; A TelnetStream might hide the Telnet negotiations from you, but provide access to the data; A [ZipOutputStream][4] in Java allows you to write to files in a zip archive without having to worry about the internals of the zip file format.\r\n\r\nAnother common thing you might find is textual streams that allow you to write strings instead of bytes, or some languages provide binary streams that allow you to write primitive types. A common thing you&#39;ll find in textual streams is a character encoding, which you should be aware of.\r\n\r\nSome streams also support random access, as in [this][5] example. A network stream, on the other hand, for obvious reasons, wouldn&#39;t.\r\n\r\n* [MSDN][6] gives a good overview of streams in .Net.\r\n* Sun also have an overview of their general [OutputStream][7] class and [InputStream][8] class.\r\n* In C++, here is the [istream][9] (input stream), [ostream][10] (output stream) and [iostream][11] (bidirectional stream) documentation.\r\n\r\nUNIX like operating systems also support the stream model with program input and output, as described [here][12].\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.4.2/docs/api/java/io/FileOutputStream.html\r\n  [2]: http://java.sun.com/j2se/1.4.2/docs/api/java/io/FileInputStream.html\r\n  [3]: http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx\r\n  [4]: http://java.sun.com/j2se/1.4.2/docs/api/java/util/zip/ZipOutputStream.html\r\n  [5]: http://msdn.microsoft.com/en-us/library/system.io.memorystream.seek.aspx\r\n  [6]: http://msdn.microsoft.com/en-us/library/system.io.stream.aspx\r\n  [7]: http://java.sun.com/j2se/1.5.0/docs/api/java/io/OutputStream.html\r\n  [8]: http://java.sun.com/j2se/1.5.0/docs/api/java/io/InputStream.html\r\n  [9]: http://www.cplusplus.com/reference/iostream/istream/\r\n  [10]: http://www.cplusplus.com/reference/iostream/ostream/\r\n  [11]: http://www.cplusplus.com/reference/iostream/iostream/\r\n  [12]: http://en.wikipedia.org/wiki/Standard_streams","title":"Can you explain the concept of streams?","body":"<p>A stream is already a metaphor, an analogy, so there's really no need to provide another one. You can think of it basically as a pipe with a flow of water in it where the water is actually data and the pipe is the stream. I suppose it's kind of a 2-way pipe if the stream is bi-directional. It's basically a common abstraction that is placed upon things where there is a flow or sequence of data in one or both directions.</p>\n<p>In languages such as C#, VB.Net, C++, Java etc., the stream metaphor is used for many things. There are file streams, in which you open a file and can read from the stream or write to it continuously; There are network streams where reading from and writing to the stream reads from and writes to an underlying established network connection. Streams for writing only are typically called output streams, as in <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/io/FileOutputStream.html\" rel=\"noreferrer\">this</a> example, and similarly, streams that are for reading only are called input streams, as in <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/io/FileInputStream.html\" rel=\"noreferrer\">this</a> example.</p>\n<p>A stream can perform transformation or encoding of data (an <a href=\"http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx\" rel=\"noreferrer\">SslStream</a> in .Net, for example, will eat up the SSL negotiation data and hide it from you; A TelnetStream might hide the Telnet negotiations from you, but provide access to the data; A <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/util/zip/ZipOutputStream.html\" rel=\"noreferrer\">ZipOutputStream</a> in Java allows you to write to files in a zip archive without having to worry about the internals of the zip file format.</p>\n<p>Another common thing you might find is textual streams that allow you to write strings instead of bytes, or some languages provide binary streams that allow you to write primitive types. A common thing you'll find in textual streams is a character encoding, which you should be aware of.</p>\n<p>Some streams also support random access, as in <a href=\"http://msdn.microsoft.com/en-us/library/system.io.memorystream.seek.aspx\" rel=\"noreferrer\">this</a> example. A network stream, on the other hand, for obvious reasons, wouldn't.</p>\n<ul>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/system.io.stream.aspx\" rel=\"noreferrer\">MSDN</a> gives a good overview of streams in .Net.</li>\n<li>Sun also have an overview of their general <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/io/OutputStream.html\" rel=\"noreferrer\">OutputStream</a> class and <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/io/InputStream.html\" rel=\"noreferrer\">InputStream</a> class.</li>\n<li>In C++, here is the <a href=\"http://www.cplusplus.com/reference/iostream/istream/\" rel=\"noreferrer\">istream</a> (input stream), <a href=\"http://www.cplusplus.com/reference/iostream/ostream/\" rel=\"noreferrer\">ostream</a> (output stream) and <a href=\"http://www.cplusplus.com/reference/iostream/iostream/\" rel=\"noreferrer\">iostream</a> (bidirectional stream) documentation.</li>\n</ul>\n<p>UNIX like operating systems also support the stream model with program input and output, as described <a href=\"http://en.wikipedia.org/wiki/Standard_streams\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"down_vote_count":0,"up_vote_count":223,"is_accepted":false,"score":223,"last_activity_date":1249126946,"creation_date":1249125029,"answer_id":1216400,"question_id":507747,"body_markdown":"A stream represents a sequence of objects (usually bytes, but not necessarily so), which can be accessed in sequential order. Typical operations on a stream:\r\n\r\n* read one byte. Next time you read, you&#39;ll get the next byte, and so on.\r\n* read several bytes from the stream into an array\r\n* seek (move your current position in the stream, so that next time you read you get bytes from the new position)\r\n* write one byte\r\n* write several bytes from an array into the stream\r\n* skip bytes from the stream (this is like read, but you ignore the data. Or if you prefer it&#39;s like seek but can only go forwards.)\r\n* push back bytes into an input stream (this is like &quot;undo&quot; for read - you shove a few bytes back up the stream, so that next time you read that&#39;s what you&#39;ll see. It&#39;s occasionally useful for parsers, as is:\r\n* peek (look at bytes without reading them, so that they&#39;re still there in the stream to be read later)\r\n\r\nA particular stream might support reading (in which case it is an &quot;input stream&quot;), writing (&quot;output stream&quot;) or both. Not all streams are seekable. \r\n\r\nPush back is fairly rare, but you can always add it to a stream by wrapping the real input stream in another input stream that holds an internal buffer. Reads come from the buffer, and if you push back then data is placed in the buffer. If there&#39;s nothing in the buffer then the push back stream reads from the real stream. This is a simple example of a &quot;stream adaptor&quot;: it sits on the &quot;end&quot; of an input stream, it is an input stream itself, and it does something extra that the original stream didn&#39;t.\r\n\r\nStream is a useful abstraction because it can describe files (which are really arrays, hence seek is straightforward) but also terminal input/output (which is not seekable unless buffered), sockets, serial ports, etc. So you can write code which says either &quot;I want some data, and I don&#39;t care where it comes from or how it got here&quot;, or &quot;I&#39;ll produce some data, and it&#39;s entirely up to my caller what happens to it&quot;. The former takes an input stream parameter, the latter takes an output stream parameter.\r\n\r\nBest analogy I can think of is that a stream is a conveyor belt coming towards you or leading away from you (or sometimes both). You take stuff off an input stream, you put stuff on an output stream. Some conveyors you can think of as coming out of a hole in the wall - they aren&#39;t seekable, reading or writing is a one-time-only deal. Some conveyors are laid out in front of you, and you can move along choosing whereabouts in the stream you want to read/write - that&#39;s seeking.\r\n\r\nAs IRBMe says, though, it&#39;s best to think of a stream in terms of the operations it offers (which vary from implementation to implementation, but have a lot in common) rather than by a physical analogy. Streams are &quot;things you can read or write&quot;. When you start connecting up stream adaptors, you can think of them as a box with a conveyor in, and a conveyor out, that you connect to other streams and then the box performs some transformation on the data (zipping it, or changing UNIX linefeeds to DOS ones, or whatever). Pipes are another thorough test of the metaphor: that&#39;s where you create a pair of streams such that anything you write into one can be read out of the other. Think wormholes :-)","title":"Can you explain the concept of streams?","body":"<p>A stream represents a sequence of objects (usually bytes, but not necessarily so), which can be accessed in sequential order. Typical operations on a stream:</p>\n\n<ul>\n<li>read one byte. Next time you read, you'll get the next byte, and so on.</li>\n<li>read several bytes from the stream into an array</li>\n<li>seek (move your current position in the stream, so that next time you read you get bytes from the new position)</li>\n<li>write one byte</li>\n<li>write several bytes from an array into the stream</li>\n<li>skip bytes from the stream (this is like read, but you ignore the data. Or if you prefer it's like seek but can only go forwards.)</li>\n<li>push back bytes into an input stream (this is like \"undo\" for read - you shove a few bytes back up the stream, so that next time you read that's what you'll see. It's occasionally useful for parsers, as is:</li>\n<li>peek (look at bytes without reading them, so that they're still there in the stream to be read later)</li>\n</ul>\n\n<p>A particular stream might support reading (in which case it is an \"input stream\"), writing (\"output stream\") or both. Not all streams are seekable. </p>\n\n<p>Push back is fairly rare, but you can always add it to a stream by wrapping the real input stream in another input stream that holds an internal buffer. Reads come from the buffer, and if you push back then data is placed in the buffer. If there's nothing in the buffer then the push back stream reads from the real stream. This is a simple example of a \"stream adaptor\": it sits on the \"end\" of an input stream, it is an input stream itself, and it does something extra that the original stream didn't.</p>\n\n<p>Stream is a useful abstraction because it can describe files (which are really arrays, hence seek is straightforward) but also terminal input/output (which is not seekable unless buffered), sockets, serial ports, etc. So you can write code which says either \"I want some data, and I don't care where it comes from or how it got here\", or \"I'll produce some data, and it's entirely up to my caller what happens to it\". The former takes an input stream parameter, the latter takes an output stream parameter.</p>\n\n<p>Best analogy I can think of is that a stream is a conveyor belt coming towards you or leading away from you (or sometimes both). You take stuff off an input stream, you put stuff on an output stream. Some conveyors you can think of as coming out of a hole in the wall - they aren't seekable, reading or writing is a one-time-only deal. Some conveyors are laid out in front of you, and you can move along choosing whereabouts in the stream you want to read/write - that's seeking.</p>\n\n<p>As IRBMe says, though, it's best to think of a stream in terms of the operations it offers (which vary from implementation to implementation, but have a lot in common) rather than by a physical analogy. Streams are \"things you can read or write\". When you start connecting up stream adaptors, you can think of them as a box with a conveyor in, and a conveyor out, that you connect to other streams and then the box performs some transformation on the data (zipping it, or changing UNIX linefeeds to DOS ones, or whatever). Pipes are another thorough test of the metaphor: that's where you create a pair of streams such that anything you write into one can be read out of the other. Think wormholes :-)</p>\n"},{"tags":[],"owner":{"account_id":27564,"reputation":12881,"user_id":72896,"accept_rate":83,"display_name":"EFraim"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1249126536,"creation_date":1249126536,"answer_id":1216430,"question_id":507747,"body_markdown":"In addition to things mentioned above there is a different kind of streams - as defined in functional programming languages such as Scheme or Haskell - a possibly infinite datastructure which is generated by some function on-demand.","title":"Can you explain the concept of streams?","body":"<p>In addition to things mentioned above there is a different kind of streams - as defined in functional programming languages such as Scheme or Haskell - a possibly infinite datastructure which is generated by some function on-demand.</p>\n"},{"tags":[],"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360796366,"creation_date":1360796366,"answer_id":14864911,"question_id":507747,"body_markdown":"I&#39;ll keep it short, I was just missing the word here:\r\n\r\n*Streams are **queues** usually stored in buffer containing any kind of data.*\r\n\r\n(Now, since we all know what queues are, there&#39;s no need to explain this any further.)","title":"Can you explain the concept of streams?","body":"<p>I'll keep it short, I was just missing the word here:</p>\n\n<p><em>Streams are <strong>queues</strong> usually stored in buffer containing any kind of data.</em></p>\n\n<p>(Now, since we all know what queues are, there's no need to explain this any further.)</p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71911,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1448447351,"creation_date":1448447351,"answer_id":33914070,"question_id":507747,"body_markdown":"The word &quot;stream&quot; has been chosen because it represents (in real life) a very similar meaning to what we want to convey when we use it.  \r\n\r\n\r\nStart thinking about the analogy to a water stream. You receive a continuous flow of data, just like water continuously flows in a river. You don&#39;t necessarily know where the data is coming from, and most often you don&#39;t need to; be it from a file, a socket, or any other source, it doesn&#39;t (shouldn&#39;t) really matter. This is very similar to receiving a stream of water, whereby you don&#39;t need to know where it is coming from; be it from a lake, a fountain, or any other source, it doesn&#39;t (shouldn&#39;t) really matter. [source][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/507829/1697099","title":"Can you explain the concept of streams?","body":"<p>The word \"stream\" has been chosen because it represents (in real life) a very similar meaning to what we want to convey when we use it.  </p>\n\n<p>Start thinking about the analogy to a water stream. You receive a continuous flow of data, just like water continuously flows in a river. You don't necessarily know where the data is coming from, and most often you don't need to; be it from a file, a socket, or any other source, it doesn't (shouldn't) really matter. This is very similar to receiving a stream of water, whereby you don't need to know where it is coming from; be it from a lake, a fountain, or any other source, it doesn't (shouldn't) really matter. <a href=\"https://stackoverflow.com/a/507829/1697099\">source</a></p>\n"},{"tags":[],"owner":{"account_id":1338298,"reputation":4496,"user_id":1280520,"accept_rate":84,"display_name":"Julian"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1578316648,"creation_date":1453635661,"answer_id":34975302,"question_id":507747,"body_markdown":"When I heard about streaming for the first time, it was in the context of **live streaming** with a webcam. So, one host is broadcasting video content, and the other host is receiving the video content. So is this streaming? Well... yes... but a live stream is a concrete concept, and I think that the question refers to the abstract concept of Streaming. See https://en.wikipedia.org/wiki/Live_streaming\r\n\r\nSo let&#39;s move on.\r\n\r\n&lt;hr&gt;\r\n\r\nVideo is not the only resource that can be streamed. Audio can be streamed too. So we are talking about Streaming media now. See https://en.wikipedia.org/wiki/Streaming_media . Audio can be delivered from source to target in numerous of ways. So let&#39;s compare some data delivery methods to each other. \r\n\r\n**Classic file downloading**\r\nClassic file downloading doesn&#39;t happen real-time. Before taking the file to use, you&#39;ll have to wait until the download is complete. \r\n\r\n**Progressive download**\r\nProgressive download chunks download data from the streamed media file to a temporary buffer. Data in that buffer is workable: audio-video data in the buffer is playable. Because of that users can watch / listen to the streamed media file while downloading. Fast-forwarding and rewinding is possible, offcourse withing the buffer. Anyway, progressive download is not live streaming. \r\n\r\n**Streaming**\r\nHappens real-time, and chunks data. Streaming is implemented in live broadcasts. Clients listening to the broadcast can&#39;t fast-forwarding or rewind. In video streams, data is discarded after playback. \r\n\r\nA Streaming Server keeps a 2-way connection with its client, while a Web Server closes connection after a server response. \r\n\r\n&lt;hr&gt;\r\n\r\nAudio and video are not the only thing that can be streamed. Let&#39;s have a look at the concept of streams in the PHP manual.\r\n\r\n&gt; a stream is a resource object which exhibits streamable behavior. That\r\n&gt; is, it can be **read from** or **written to** in a linear fashion, and may be\r\n&gt; able to fseek() to an arbitrary location within the stream.\r\nLink: https://www.php.net/manual/en/intro.stream.php\r\n\r\nIn PHP, a resource is a reference to an external source like a file, database connection. So in other words, a stream is a source that can be read from or written to. So, If you worked with `fopen()`, then you already worked with streams. \r\n\r\nAn example of a Text-file that is subjected to Streaming:  \r\n\r\n    // Let&#39;s say that cheese.txt is a file that contains this content: \r\n    // I like cheese, a lot! My favorite cheese brand is Leerdammer.\r\n    $fp = fopen(&#39;cheese.txt&#39;, &#39;r&#39;);\r\n    \r\n    $str8 = fread($fp, 8); // read first 8 characters from stream. \r\n    \r\n    fseek($fp, 21); // set position indicator from stream at the 21th position (0 = first position)\r\n    $str30 = fread($fp, 30); // read 30 characters from stream\r\n    \r\n    echo $str8; // Output: I like c \r\n    echo $str30; // Output: My favorite cheese brand is L\r\n\r\nZip files can be streamed too. On top of that, streaming is not limited to files. HTTP, FTP, SSH connections and Input/Output can be streamed as well. \r\n\r\n&lt;hr&gt; \r\n\r\nWhat does wikipedia say about the concept of Streaming?\r\n\r\n&gt; In computer science, a stream is a sequence of data elements made\r\n&gt; available over time. A stream can be thought of as items on a conveyor\r\n&gt; belt being processed one at a time rather than in large batches.\r\n\r\nSee: https://en.wikipedia.org/wiki/Stream_%28computing%29 . \r\n\r\nWikipedia links to this: https://srfi.schemers.org/srfi-41/srfi-41.html\r\nand the writers have this to say about streams: \r\n\r\n&gt; Streams, sometimes called lazy lists, are a sequential data structure\r\n&gt; containing elements computed only on demand. A stream is either null\r\n&gt; or is a pair with a stream in its cdr. Since elements of a stream are\r\n&gt; computed only when accessed, streams can be infinite.\r\n\r\nSo a Stream is actually a data structure. \r\n\r\n&lt;hr&gt;\r\n\r\nMy conclusion: a stream is a source that can contains data that can be read from or written to in a sequential way. A stream does not read everything that the source contains at once, it reads/writes sequentially. \r\n \r\n&lt;hr&gt;\r\n\r\n**Usefull links:**\r\n \r\n 1. http://www.slideshare.net/auroraeosrose/writing-and-using-php-streams-and-sockets-zendcon-2011 Provides a very clear presentation\r\n 2. https://www.sk89q.com/2010/04/introduction-to-php-streams/\r\n 3. http://www.netlingo.com/word/stream-or-streaming.php\r\n 4. http://www.brainbell.com/tutorials/php/Using_PHP_Streams.htm\r\n 5. http://www.sitepoint.com/php-streaming-output-buffering-explained/\r\n 6. http://php.net/manual/en/wrappers.php\r\n 7. http://www.digidata-lb.com/streaming/Streaming_Proposal.pdf\r\n 8. http://www.webopedia.com/TERM/S/streaming.html\r\n 9. https://en.wikipedia.org/wiki/Stream_%28computing%29\r\n 10. https://srfi.schemers.org/srfi-41/srfi-41.html\r\n\r\n\r\n\r\n\r\n","title":"Can you explain the concept of streams?","body":"<p>When I heard about streaming for the first time, it was in the context of <strong>live streaming</strong> with a webcam. So, one host is broadcasting video content, and the other host is receiving the video content. So is this streaming? Well... yes... but a live stream is a concrete concept, and I think that the question refers to the abstract concept of Streaming. See <a href=\"https://en.wikipedia.org/wiki/Live_streaming\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Live_streaming</a></p>\n\n<p>So let's move on.</p>\n\n<hr>\n\n<p>Video is not the only resource that can be streamed. Audio can be streamed too. So we are talking about Streaming media now. See <a href=\"https://en.wikipedia.org/wiki/Streaming_media\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Streaming_media</a> . Audio can be delivered from source to target in numerous of ways. So let's compare some data delivery methods to each other. </p>\n\n<p><strong>Classic file downloading</strong>\nClassic file downloading doesn't happen real-time. Before taking the file to use, you'll have to wait until the download is complete. </p>\n\n<p><strong>Progressive download</strong>\nProgressive download chunks download data from the streamed media file to a temporary buffer. Data in that buffer is workable: audio-video data in the buffer is playable. Because of that users can watch / listen to the streamed media file while downloading. Fast-forwarding and rewinding is possible, offcourse withing the buffer. Anyway, progressive download is not live streaming. </p>\n\n<p><strong>Streaming</strong>\nHappens real-time, and chunks data. Streaming is implemented in live broadcasts. Clients listening to the broadcast can't fast-forwarding or rewind. In video streams, data is discarded after playback. </p>\n\n<p>A Streaming Server keeps a 2-way connection with its client, while a Web Server closes connection after a server response. </p>\n\n<hr>\n\n<p>Audio and video are not the only thing that can be streamed. Let's have a look at the concept of streams in the PHP manual.</p>\n\n<blockquote>\n  <p>a stream is a resource object which exhibits streamable behavior. That\n  is, it can be <strong>read from</strong> or <strong>written to</strong> in a linear fashion, and may be\n  able to fseek() to an arbitrary location within the stream.\n  Link: <a href=\"https://www.php.net/manual/en/intro.stream.php\" rel=\"nofollow noreferrer\">https://www.php.net/manual/en/intro.stream.php</a></p>\n</blockquote>\n\n<p>In PHP, a resource is a reference to an external source like a file, database connection. So in other words, a stream is a source that can be read from or written to. So, If you worked with <code>fopen()</code>, then you already worked with streams. </p>\n\n<p>An example of a Text-file that is subjected to Streaming:  </p>\n\n<pre><code>// Let's say that cheese.txt is a file that contains this content: \n// I like cheese, a lot! My favorite cheese brand is Leerdammer.\n$fp = fopen('cheese.txt', 'r');\n\n$str8 = fread($fp, 8); // read first 8 characters from stream. \n\nfseek($fp, 21); // set position indicator from stream at the 21th position (0 = first position)\n$str30 = fread($fp, 30); // read 30 characters from stream\n\necho $str8; // Output: I like c \necho $str30; // Output: My favorite cheese brand is L\n</code></pre>\n\n<p>Zip files can be streamed too. On top of that, streaming is not limited to files. HTTP, FTP, SSH connections and Input/Output can be streamed as well. </p>\n\n<hr> \n\n<p>What does wikipedia say about the concept of Streaming?</p>\n\n<blockquote>\n  <p>In computer science, a stream is a sequence of data elements made\n  available over time. A stream can be thought of as items on a conveyor\n  belt being processed one at a time rather than in large batches.</p>\n</blockquote>\n\n<p>See: <a href=\"https://en.wikipedia.org/wiki/Stream_%28computing%29\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Stream_%28computing%29</a> . </p>\n\n<p>Wikipedia links to this: <a href=\"https://srfi.schemers.org/srfi-41/srfi-41.html\" rel=\"nofollow noreferrer\">https://srfi.schemers.org/srfi-41/srfi-41.html</a>\nand the writers have this to say about streams: </p>\n\n<blockquote>\n  <p>Streams, sometimes called lazy lists, are a sequential data structure\n  containing elements computed only on demand. A stream is either null\n  or is a pair with a stream in its cdr. Since elements of a stream are\n  computed only when accessed, streams can be infinite.</p>\n</blockquote>\n\n<p>So a Stream is actually a data structure. </p>\n\n<hr>\n\n<p>My conclusion: a stream is a source that can contains data that can be read from or written to in a sequential way. A stream does not read everything that the source contains at once, it reads/writes sequentially. </p>\n\n<hr>\n\n<p><strong>Usefull links:</strong></p>\n\n<ol>\n<li><a href=\"http://www.slideshare.net/auroraeosrose/writing-and-using-php-streams-and-sockets-zendcon-2011\" rel=\"nofollow noreferrer\">http://www.slideshare.net/auroraeosrose/writing-and-using-php-streams-and-sockets-zendcon-2011</a> Provides a very clear presentation</li>\n<li><a href=\"https://www.sk89q.com/2010/04/introduction-to-php-streams/\" rel=\"nofollow noreferrer\">https://www.sk89q.com/2010/04/introduction-to-php-streams/</a></li>\n<li><a href=\"http://www.netlingo.com/word/stream-or-streaming.php\" rel=\"nofollow noreferrer\">http://www.netlingo.com/word/stream-or-streaming.php</a></li>\n<li><a href=\"http://www.brainbell.com/tutorials/php/Using_PHP_Streams.htm\" rel=\"nofollow noreferrer\">http://www.brainbell.com/tutorials/php/Using_PHP_Streams.htm</a></li>\n<li><a href=\"http://www.sitepoint.com/php-streaming-output-buffering-explained/\" rel=\"nofollow noreferrer\">http://www.sitepoint.com/php-streaming-output-buffering-explained/</a></li>\n<li><a href=\"http://php.net/manual/en/wrappers.php\" rel=\"nofollow noreferrer\">http://php.net/manual/en/wrappers.php</a></li>\n<li><a href=\"http://www.digidata-lb.com/streaming/Streaming_Proposal.pdf\" rel=\"nofollow noreferrer\">http://www.digidata-lb.com/streaming/Streaming_Proposal.pdf</a></li>\n<li><a href=\"http://www.webopedia.com/TERM/S/streaming.html\" rel=\"nofollow noreferrer\">http://www.webopedia.com/TERM/S/streaming.html</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Stream_%28computing%29\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Stream_%28computing%29</a></li>\n<li><a href=\"https://srfi.schemers.org/srfi-41/srfi-41.html\" rel=\"nofollow noreferrer\">https://srfi.schemers.org/srfi-41/srfi-41.html</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3268834,"reputation":1853,"user_id":2752670,"display_name":"vikyd"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500643449,"creation_date":1472700200,"answer_id":39262218,"question_id":507747,"body_markdown":"Another point (For reading file situation): \r\n\r\n1. `stream` can allow you to do something else before `finished reading all content of the file`.\r\n2. you can save memory, because do not need to load all file content at once.","title":"Can you explain the concept of streams?","body":"<p>Another point (For reading file situation): </p>\n\n<ol>\n<li><code>stream</code> can allow you to do something else before <code>finished reading all content of the file</code>.</li>\n<li>you can save memory, because do not need to load all file content at once.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15036970,"reputation":391,"user_id":10853001,"display_name":"rekurzion"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1553129780,"creation_date":1546828783,"answer_id":54067961,"question_id":507747,"body_markdown":"The answers given so far are excellent. I&#39;m only providing another to highlight that a stream is not a sequence of bytes or specific to a programming language since the concept is universal (while its implementation may be unique). I often see an abundance of explanations online in terms of SQL, or C or Java, which make sense as a filestream deals with memory locations and low level operations. But they often address how to create a filestream and operate on the potential file in their given language rather than discuss the concept of a stream.\r\n\r\n# The Metaphor\r\n\r\nAs mentioned a `stream` is a metaphor, an abstraction of something more complex. To get your imagination working I offer some other metaphors:\r\n\r\n1. you want to fill an empty pool with water. one way to accomplish this is to attach a hose to a spigot, placing the end of the hose in the pool and turning on the water.\r\n\r\n**the hose is the stream**\r\n\r\n2. similarly, if you wanted to refill your car with gas, you would go to a gas pump, insert the nozzle into your gas tank and open the valve by squeezing the locking lever.\r\n\r\n**the hose, nozzle and associated mechanisms to allow the gas to flow into your tank is the stream**\r\n\r\n3. if you need to get to work you would start driving from your home to the office using the freeway.\r\n\r\n**the freeway is the stream**\r\n\r\n4. if you want to have a conversation with someone you would use your ears to hear and your mouth to speak.\r\n\r\n**your ears and eyes are streams**\r\n\r\nHopefully you notice in these examples that the stream metaphors only exist to allow something to travel through it (or on it in the case of the freeway) and do not themselves always poses the thing they are transferring. An important distinction. We don&#39;t refer to our ears as a sequence of words. A hose is still a hose if no water is flowing through it, but we have to connect it to a spigot for it do its job correctly. A car is not the only &#39;kind&#39; of vehicle that can traverse a freeway.\r\n\r\nThus a stream can exist that has no data travelling through it as long as it is *connected* to a *file*.\r\n\r\n# Removing the Abstraction\r\n\r\nNext, we need to answer a few questions. I&#39;m going to use files to describe streams so... What is a file? And how do we read a file? I will attempt to answer this while maintaining a certain level of abstraction to avoid unneeded complexity and will use the concept of a file relative to a linux operating system because of its simplicity and accessibility.\r\n\r\n## What is a file?\r\n\r\nA file is an abstraction :)\r\n\r\nOr, as simply as I can explain, a file is one part data structure describing the file and one part data which is the actual content. \r\n\r\nThe data structure part (called an inode in UNIX/linux systems) identities important pieces of information about the content, but does not include the content itself (or a name of the file for that matter). One of the pieces of information it keeps is a memory address to where the content starts. So with a file name (or a hard link in linux), a file descriptor (a numeric file name that the operating system cares about) and a starting location in memory we have something we can call a file.\r\n\r\n(the key takeaway is a &#39;file&#39; is defined by the operating system since it is the OS that ultimately has to deal with it. and yes, *files* are much more complex).\r\n\r\nSo far so good. But how do we get the content of the file, say a love letter to your beau, so we can print it? \r\n\r\n## Reading a file\r\n\r\nIf we start from the result and move backwards, when we open a file on our computer its entire contents is splashed on our screen for us to read. But how? Very methodically is the answer. The content of the file itself is another data structure. Suppose an array of characters. We can also think of this as a string. \r\n\r\nSo how do we &#39;read&#39; this string? By finding its location in memory and iterating through our array of characters, one character at a time until reaching an end of file character. In other words a program.\r\n\r\nA stream is &#39;created&#39; when its program is called and it has a memory location to *attach to* or *connect to*. Much like our water hose example, the hose is ineffective if it is not connected to a spigot. In the case of the stream, it must be connected to a file for it to exist.\r\n\r\nStreams can be further refined, e.g, a stream to receive input or a stream to send a files contents to standard output. UNIX/linux connects and keeps open 3 filestreams for us right off the bat, stdin (standard input), stdout (standard output) and stderr (standard error). Streams can be built as data structures themselves or objects which allows us to perform more complex operations of the data streaming through them, like opening the stream, closing the stream or error checking the file a stream is connected to. C++&#39;s `cin` is an example of a stream object.\r\n\r\nSurely, if you so choose, you can write your own stream.\r\n\r\n# Definition\r\n\r\nA stream is a reusable piece of code that abstracts the complexity of dealing with data while providing useful operations to perform on data. ","title":"Can you explain the concept of streams?","body":"<p>The answers given so far are excellent. I'm only providing another to highlight that a stream is not a sequence of bytes or specific to a programming language since the concept is universal (while its implementation may be unique). I often see an abundance of explanations online in terms of SQL, or C or Java, which make sense as a filestream deals with memory locations and low level operations. But they often address how to create a filestream and operate on the potential file in their given language rather than discuss the concept of a stream.</p>\n\n<h1>The Metaphor</h1>\n\n<p>As mentioned a <code>stream</code> is a metaphor, an abstraction of something more complex. To get your imagination working I offer some other metaphors:</p>\n\n<ol>\n<li>you want to fill an empty pool with water. one way to accomplish this is to attach a hose to a spigot, placing the end of the hose in the pool and turning on the water.</li>\n</ol>\n\n<p><strong>the hose is the stream</strong></p>\n\n<ol start=\"2\">\n<li>similarly, if you wanted to refill your car with gas, you would go to a gas pump, insert the nozzle into your gas tank and open the valve by squeezing the locking lever.</li>\n</ol>\n\n<p><strong>the hose, nozzle and associated mechanisms to allow the gas to flow into your tank is the stream</strong></p>\n\n<ol start=\"3\">\n<li>if you need to get to work you would start driving from your home to the office using the freeway.</li>\n</ol>\n\n<p><strong>the freeway is the stream</strong></p>\n\n<ol start=\"4\">\n<li>if you want to have a conversation with someone you would use your ears to hear and your mouth to speak.</li>\n</ol>\n\n<p><strong>your ears and eyes are streams</strong></p>\n\n<p>Hopefully you notice in these examples that the stream metaphors only exist to allow something to travel through it (or on it in the case of the freeway) and do not themselves always poses the thing they are transferring. An important distinction. We don't refer to our ears as a sequence of words. A hose is still a hose if no water is flowing through it, but we have to connect it to a spigot for it do its job correctly. A car is not the only 'kind' of vehicle that can traverse a freeway.</p>\n\n<p>Thus a stream can exist that has no data travelling through it as long as it is <em>connected</em> to a <em>file</em>.</p>\n\n<h1>Removing the Abstraction</h1>\n\n<p>Next, we need to answer a few questions. I'm going to use files to describe streams so... What is a file? And how do we read a file? I will attempt to answer this while maintaining a certain level of abstraction to avoid unneeded complexity and will use the concept of a file relative to a linux operating system because of its simplicity and accessibility.</p>\n\n<h2>What is a file?</h2>\n\n<p>A file is an abstraction :)</p>\n\n<p>Or, as simply as I can explain, a file is one part data structure describing the file and one part data which is the actual content. </p>\n\n<p>The data structure part (called an inode in UNIX/linux systems) identities important pieces of information about the content, but does not include the content itself (or a name of the file for that matter). One of the pieces of information it keeps is a memory address to where the content starts. So with a file name (or a hard link in linux), a file descriptor (a numeric file name that the operating system cares about) and a starting location in memory we have something we can call a file.</p>\n\n<p>(the key takeaway is a 'file' is defined by the operating system since it is the OS that ultimately has to deal with it. and yes, <em>files</em> are much more complex).</p>\n\n<p>So far so good. But how do we get the content of the file, say a love letter to your beau, so we can print it? </p>\n\n<h2>Reading a file</h2>\n\n<p>If we start from the result and move backwards, when we open a file on our computer its entire contents is splashed on our screen for us to read. But how? Very methodically is the answer. The content of the file itself is another data structure. Suppose an array of characters. We can also think of this as a string. </p>\n\n<p>So how do we 'read' this string? By finding its location in memory and iterating through our array of characters, one character at a time until reaching an end of file character. In other words a program.</p>\n\n<p>A stream is 'created' when its program is called and it has a memory location to <em>attach to</em> or <em>connect to</em>. Much like our water hose example, the hose is ineffective if it is not connected to a spigot. In the case of the stream, it must be connected to a file for it to exist.</p>\n\n<p>Streams can be further refined, e.g, a stream to receive input or a stream to send a files contents to standard output. UNIX/linux connects and keeps open 3 filestreams for us right off the bat, stdin (standard input), stdout (standard output) and stderr (standard error). Streams can be built as data structures themselves or objects which allows us to perform more complex operations of the data streaming through them, like opening the stream, closing the stream or error checking the file a stream is connected to. C++'s <code>cin</code> is an example of a stream object.</p>\n\n<p>Surely, if you so choose, you can write your own stream.</p>\n\n<h1>Definition</h1>\n\n<p>A stream is a reusable piece of code that abstracts the complexity of dealing with data while providing useful operations to perform on data. </p>\n"},{"tags":[],"owner":{"account_id":9524543,"reputation":119,"user_id":7078263,"display_name":"Tim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663638624,"creation_date":1661855455,"answer_id":73540946,"question_id":507747,"body_markdown":"\r\nA stream is a highly abstracted metaphor and **a strict contract**. It means that you can manipulate objects in sequence **without concern about gaps**. That is to say, a stream must have no vacuum or gaps. Objects in it are arranged in sequence one by one continuously. As a result, we don&#39;t have to worry about encountering a vacuum abruptly in the midst of processing a stream, or we can&#39;t leave a vacuum deliberately when producing a stream. In other words, we don&#39;t have to consider the case of a void in processing or producing a stream. There is no way we can come across it or produce it on purpose. If you are constructing a stream, you must not leave any gaps in the stream. \r\n\r\n**Put another way, if there is a gap, it must not be a stream.** When you refer to a sequence as a stream, either you are warranted there is no gaps in it or you have to keep the promise there is no gaps in the sequence you produce.\r\n\r\nTo recap, think about a water stream. What is the most prominent characteristic of it? \r\n\r\n**Continuous!**\r\n\r\nThe spirit of the abstraction of a stream is all about it.","title":"Can you explain the concept of streams?","body":"<p>A stream is a highly abstracted metaphor and <strong>a strict contract</strong>. It means that you can manipulate objects in sequence <strong>without concern about gaps</strong>. That is to say, a stream must have no vacuum or gaps. Objects in it are arranged in sequence one by one continuously. As a result, we don't have to worry about encountering a vacuum abruptly in the midst of processing a stream, or we can't leave a vacuum deliberately when producing a stream. In other words, we don't have to consider the case of a void in processing or producing a stream. There is no way we can come across it or produce it on purpose. If you are constructing a stream, you must not leave any gaps in the stream.</p>\n<p><strong>Put another way, if there is a gap, it must not be a stream.</strong> When you refer to a sequence as a stream, either you are warranted there is no gaps in it or you have to keep the promise there is no gaps in the sequence you produce.</p>\n<p>To recap, think about a water stream. What is the most prominent characteristic of it?</p>\n<p><strong>Continuous!</strong></p>\n<p>The spirit of the abstraction of a stream is all about it.</p>\n"}],"owner":{"account_id":45139,"reputation":20817,"user_id":132931,"accept_rate":82,"display_name":"Rob Sobers"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32982,"favorite_count":0,"down_vote_count":0,"up_vote_count":213,"accepted_answer_id":507829,"answer_count":20,"score":213,"last_activity_date":1663638624,"creation_date":1233677204,"question_id":507747,"body_markdown":"I understand that a stream is a representation of a sequence of bytes.  Each stream provides means for reading and writing bytes to its given backing store.  But what is the point of the stream?  Why isn&#39;t the backing store itself what we interact with?  \r\n\r\nFor whatever reason this concept just isn&#39;t clicking for me.  I&#39;ve read a bunch of articles, but I think I need an analogy or something.\r\n","title":"Can you explain the concept of streams?","body":"<p>I understand that a stream is a representation of a sequence of bytes.  Each stream provides means for reading and writing bytes to its given backing store.  But what is the point of the stream?  Why isn't the backing store itself what we interact with?  </p>\n\n<p>For whatever reason this concept just isn't clicking for me.  I've read a bunch of articles, but I think I need an analogy or something.</p>\n"},{"tags":["java","shell","visual-studio-code","environment-variables"],"comments":[{"owner":{"account_id":13770793,"reputation":25892,"user_id":9938317,"display_name":"rioV8"},"score":1,"creation_date":1656750217,"post_id":72837365,"comment_id":128651797,"body_markdown":"have you looked at the command line options of `java`","body":"have you looked at the command line options of <code>java</code>"},{"owner":{"account_id":13770793,"reputation":25892,"user_id":9938317,"display_name":"rioV8"},"score":0,"creation_date":1656757224,"post_id":72837365,"comment_id":128652914,"body_markdown":"can you enlighten us with the meaning of `@`? by text or a link","body":"can you enlighten us with the meaning of <code>@</code>? by text or a link"},{"owner":{"account_id":4294753,"reputation":965,"user_id":3510108,"accept_rate":75,"display_name":"kensuke1984"},"score":0,"creation_date":1656983855,"post_id":72837365,"comment_id":128696560,"body_markdown":"I wonder it stands for ```argument file```.. thank you I looked at the options list of Java","body":"I wonder it stands for <code>argument file</code>.. thank you I looked at the options list of Java"}],"answers":[{"tags":[],"owner":{"account_id":26385628,"reputation":1,"user_id":20038175,"display_name":"plosa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663637830,"creation_date":1663637830,"answer_id":73780794,"question_id":72837365,"body_markdown":"I guess you are running a maven project with VSCode. The &#39;@&#39; is a mechanism of java command line. You can see the doc [here](https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html#using-source-file-mode-to-launch-single-file-source-code-programs). The &#39;@&#39; follows by a file path, and java will use the file content as argument. You can check the content of `/tmp/....` file. It&#39;s probably like `-cp ...`. The argument is too long, so VSCode generated a temp file to run java.","title":"What is @ in /usr/bin/env /usr/local/bin/java @/tmp/cp...... com.hoge.Application?","body":"<p>I guess you are running a maven project with VSCode. The '@' is a mechanism of java command line. You can see the doc <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html#using-source-file-mode-to-launch-single-file-source-code-programs\" rel=\"nofollow noreferrer\">here</a>. The '@' follows by a file path, and java will use the file content as argument. You can check the content of <code>/tmp/....</code> file. It's probably like <code>-cp ...</code>. The argument is too long, so VSCode generated a temp file to run java.</p>\n"}],"owner":{"account_id":4294753,"reputation":965,"user_id":3510108,"accept_rate":75,"display_name":"kensuke1984"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663637830,"creation_date":1656747712,"question_id":72837365,"body_markdown":"I am not sure this question is related to ```/usr/bin/env``` or ```java``` ..w/e shell?\r\n\r\nWhat does the part ```@/path``` mean?\r\n\r\nWhat does ```@``` mean?\r\n\r\n\r\n```/usr/bin/env /path/to/java .... @/tmp/....```\r\nIt appears when I launch an Application in VScode.","title":"What is @ in /usr/bin/env /usr/local/bin/java @/tmp/cp...... com.hoge.Application?","body":"<p>I am not sure this question is related to <code>/usr/bin/env</code> or <code>java</code> ..w/e shell?</p>\n<p>What does the part <code>@/path</code> mean?</p>\n<p>What does <code>@</code> mean?</p>\n<p><code>/usr/bin/env /path/to/java .... @/tmp/....</code>\nIt appears when I launch an Application in VScode.</p>\n"},{"tags":["java","java-stream"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663633228,"creation_date":1663633228,"answer_id":73780454,"question_id":73780375,"body_markdown":"You can replace the nested loop with a stream over the map entries and condition that checks the presence of the result and extracts `id` property with `Optional.map()`:\r\n\r\n    public Optional&lt;String&gt; getIdFromMatchedMovie(List&lt;Movie&gt; movies,\r\n                                                  Map&lt;String, Object&gt; attributes) {\r\n        return movies.stream()\r\n            .filter(movie -&gt; attributes.entrySet().stream()\r\n                .allMatch(entry -&gt; Objects.equals(\r\n                    movie.getAttributes().get(entry.getKey()),\r\n                    entry.getValue()\r\n                ))\r\n                .findFirst()\r\n                .map(Movie::getId);\r\n    }","title":"Rewrite for loop as Java 8 Stream","body":"<p>You can replace the nested loop with a stream over the map entries and condition that checks the presence of the result and extracts <code>id</code> property with <code>Optional.map()</code>:</p>\n<pre><code>public Optional&lt;String&gt; getIdFromMatchedMovie(List&lt;Movie&gt; movies,\n                                              Map&lt;String, Object&gt; attributes) {\n    return movies.stream()\n        .filter(movie -&gt; attributes.entrySet().stream()\n            .allMatch(entry -&gt; Objects.equals(\n                movie.getAttributes().get(entry.getKey()),\n                entry.getValue()\n            ))\n            .findFirst()\n            .map(Movie::getId);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1663633301,"creation_date":1663633301,"answer_id":73780462,"question_id":73780375,"body_markdown":"Sure, you can convert the filter loop to another nested stream. Also, the `isPresent()`-then-`get()` is often an anti-pattern when you&#39;re using optionals. In this case, you can use `Optional.map()` or even move it into the stream:\r\n\r\n    return movies.stream()\r\n            .filter(movie -&gt; attributes.entrySet()\r\n                    .stream()\r\n                    .allMatch(attr -&gt; attr.getValue().equals(\r\n                            movie.getAttributes().get(attr.getKey())))\r\n            .map(Movie::getId)\r\n            .findFirst();","title":"Rewrite for loop as Java 8 Stream","body":"<p>Sure, you can convert the filter loop to another nested stream. Also, the <code>isPresent()</code>-then-<code>get()</code> is often an anti-pattern when you're using optionals. In this case, you can use <code>Optional.map()</code> or even move it into the stream:</p>\n<pre><code>return movies.stream()\n        .filter(movie -&gt; attributes.entrySet()\n                .stream()\n                .allMatch(attr -&gt; attr.getValue().equals(\n                        movie.getAttributes().get(attr.getKey())))\n        .map(Movie::getId)\n        .findFirst();\n</code></pre>\n"}],"owner":{"account_id":24167753,"reputation":3,"user_id":18130292,"display_name":"Yamazaki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73780462,"answer_count":2,"score":-1,"last_activity_date":1663636989,"creation_date":1663632303,"question_id":73780375,"body_markdown":"I have the following java method which returns the ID of a single matched movie from a list of movies, the filter criteria is the movie&#39;s attributes, all attributes provided must match:\r\n```\r\npublic Optional&lt;String&gt; getIdFromMatchedMovie(List&lt;Movie&gt; movies, Map&lt;String, Object&gt; attributes)\r\n{\r\n    Optional&lt;Movie&gt; movieOption = \r\n        movies.stream()\r\n              .filter(movie -&gt; {\r\n                      for (Map.Entry&lt;String, Object&gt; attr : attributes.entrySet()) {\r\n\r\n                           Object returnedAttrValue = movie.getAttributes()\r\n                                                           .get(attr.getKey());\r\n\r\n                           // Attribute provided not exists in movie&#39;s attributes\r\n                           // or the attributes value don&#39;t match\r\n                           if (returnedAttrValue == null\r\n                               || !returnedAttrValue.equals(attr.getValue())) {\r\n                                    return false;\r\n                           }\r\n                       }\r\n\r\n                       return true;\r\n               })\r\n               .findFirst();\r\n\r\n               if (movieOption.isPresent()) {\r\n                   return movieOption.get().getId());\r\n               }\r\n               return Optional.empty();\r\n}\r\n\r\n```\r\nIs there a way to rewrite this by remove the inner for loop and still leveraging the Java 8 Stream?","title":"Rewrite for loop as Java 8 Stream","body":"<p>I have the following java method which returns the ID of a single matched movie from a list of movies, the filter criteria is the movie's attributes, all attributes provided must match:</p>\n<pre><code>public Optional&lt;String&gt; getIdFromMatchedMovie(List&lt;Movie&gt; movies, Map&lt;String, Object&gt; attributes)\n{\n    Optional&lt;Movie&gt; movieOption = \n        movies.stream()\n              .filter(movie -&gt; {\n                      for (Map.Entry&lt;String, Object&gt; attr : attributes.entrySet()) {\n\n                           Object returnedAttrValue = movie.getAttributes()\n                                                           .get(attr.getKey());\n\n                           // Attribute provided not exists in movie's attributes\n                           // or the attributes value don't match\n                           if (returnedAttrValue == null\n                               || !returnedAttrValue.equals(attr.getValue())) {\n                                    return false;\n                           }\n                       }\n\n                       return true;\n               })\n               .findFirst();\n\n               if (movieOption.isPresent()) {\n                   return movieOption.get().getId());\n               }\n               return Optional.empty();\n}\n\n</code></pre>\n<p>Is there a way to rewrite this by remove the inner for loop and still leveraging the Java 8 Stream?</p>\n"},{"tags":["java","arrays","list","arraylist","nested-lists"],"comments":[{"owner":{"account_id":2976512,"reputation":3160,"user_id":2527458,"accept_rate":36,"display_name":"Majid Hajibaba"},"score":0,"creation_date":1634472688,"post_id":69603909,"comment_id":123028797,"body_markdown":"Does this answer your question? [Java multidimensional list](https://stackoverflow.com/questions/31151248/java-multidimensional-list)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/31151248/java-multidimensional-list\">Java multidimensional list</a>"},{"owner":{"account_id":18956765,"reputation":41,"user_id":13833206,"display_name":"Hakeem MRK"},"score":0,"creation_date":1636993659,"post_id":69603909,"comment_id":123700200,"body_markdown":"No thats not what I meant :-)","body":"No thats not what I meant :-)"}],"answers":[{"tags":[],"owner":{"account_id":18956765,"reputation":41,"user_id":13833206,"display_name":"Hakeem MRK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635775765,"creation_date":1634472260,"answer_id":69604155,"question_id":69603909,"body_markdown":"```\r\nint maxval = -6*9;\r\nfor(int i = 0; i &lt; 4; i++) {\r\n    for(int j = 0; j &lt; 4; j++) {\r\n        //System.out.print(arr.get(i).get(j) + &quot; &quot;);\r\n        int sum = arr.get(i).get(j) + arr.get(i).get(j+1) + arr.get(i).get(j+2);\r\n        sum+=arr.get(i+1).get(j+1);\r\n        sum+=arr.get(i+2).get(j) + arr.get(i+2).get(j+1) + arr.get(i+2).get(j+2);\r\n        if(sum &gt; maxval)   \r\n            maxval = sum;\r\n        }\r\n    }\r\n    System.out.println(maxval);\r\n```","title":"Accessing elements of multi-dimensional Lists in Java","body":"<pre><code>int maxval = -6*9;\nfor(int i = 0; i &lt; 4; i++) {\n    for(int j = 0; j &lt; 4; j++) {\n        //System.out.print(arr.get(i).get(j) + &quot; &quot;);\n        int sum = arr.get(i).get(j) + arr.get(i).get(j+1) + arr.get(i).get(j+2);\n        sum+=arr.get(i+1).get(j+1);\n        sum+=arr.get(i+2).get(j) + arr.get(i+2).get(j+1) + arr.get(i+2).get(j+2);\n        if(sum &gt; maxval)   \n            maxval = sum;\n        }\n    }\n    System.out.println(maxval);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16801428,"reputation":910,"user_id":12146581,"display_name":"Mohamad Ghaith Alzin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663635830,"creation_date":1663635830,"answer_id":73780647,"question_id":69603909,"body_markdown":"# 100% Java solution\r\nThis is one way of solving this using three loops;\r\n\r\n - **While loop** to loop **4 * 4 times** since we got **6 * 6 2D array**, then you need to keep the counter for the possible hourglass array which is **3 * 3 2D array**\r\n - **Nested 2 for loops** to loop and sum the elements of an hourglass array \r\n\r\nPlease note that I&#39;ve included a detailed explanation in the code below!\r\n\r\n            // this is to save all hourglasses arrays sum\r\n            ArrayList&lt;Integer&gt; allSum = new ArrayList&lt;Integer&gt;();\r\n            \r\n            int fromRow = 0;\r\n            int toRow = 3;\r\n            \r\n            int fromColumn = 0;\r\n            int toColumn = 3;\r\n            \r\n            int counter = 0;\r\n            \r\n            // since the array that is given is always (6 * 6 2D array), then we need to consider\r\n            // to loop 4 * 4 times to calculate the sum for all the 3 * 3 hourglass arrays.\r\n            while(counter &lt; 16) {\r\n                \r\n                // the sum at an instant time for an hourglass\r\n                int sum = 0;\r\n                \r\n                // if we reached the last column in a specific row, then:\r\n                if (toColumn == 7) {\r\n                    \r\n                    // reset column index to start again from 0 to 2 \r\n                    fromColumn = 0;\r\n                    toColumn = 3;\r\n                    \r\n                    // move to the next row \r\n                    fromRow += 1;\r\n                    toRow += 1;\r\n                }\r\n                \r\n                // we need these values to make sure that we do not add (1, 0) and (1, 2) to the sum considering \r\n                // (row, column) \r\n                int row = 0;\r\n                int column = 0;\r\n    \r\n                for (int i = fromRow ; i &lt; toRow ; i++) {\r\n                    for (int j = fromColumn ; j &lt; toColumn ; j++) {\r\n                        \r\n                        if (row == 1 &amp;&amp; column == 0) { // skip the case (1, 0)\r\n                            column++;\r\n                            continue;\r\n                        }\r\n                        else if (row == 1 &amp;&amp; column == 2) { // skip the case (1, 2)\r\n                            column++;\r\n                            continue;   \r\n                        }\r\n                        // add the value at a certain (i, j)\r\n                        sum += arr.get(i).get(j);     \r\n                        column++;\r\n                    }\r\n                    column = 0;\r\n                    row++;\r\n                }\r\n                allSum.add(sum);\r\n                \r\n                // move to a new column\r\n                fromColumn += 1;\r\n                toColumn += 1;\r\n                \r\n                counter++;\r\n            }\r\n            \r\n            // print the max sum in allSum\r\n            System.out.println(Collections.max(allSum));","title":"Accessing elements of multi-dimensional Lists in Java","body":"<h1>100% Java solution</h1>\n<p>This is one way of solving this using three loops;</p>\n<ul>\n<li><strong>While loop</strong> to loop <strong>4 * 4 times</strong> since we got <strong>6 * 6 2D array</strong>, then you need to keep the counter for the possible hourglass array which is <strong>3 * 3 2D array</strong></li>\n<li><strong>Nested 2 for loops</strong> to loop and sum the elements of an hourglass array</li>\n</ul>\n<p>Please note that I've included a detailed explanation in the code below!</p>\n<pre><code>        // this is to save all hourglasses arrays sum\n        ArrayList&lt;Integer&gt; allSum = new ArrayList&lt;Integer&gt;();\n        \n        int fromRow = 0;\n        int toRow = 3;\n        \n        int fromColumn = 0;\n        int toColumn = 3;\n        \n        int counter = 0;\n        \n        // since the array that is given is always (6 * 6 2D array), then we need to consider\n        // to loop 4 * 4 times to calculate the sum for all the 3 * 3 hourglass arrays.\n        while(counter &lt; 16) {\n            \n            // the sum at an instant time for an hourglass\n            int sum = 0;\n            \n            // if we reached the last column in a specific row, then:\n            if (toColumn == 7) {\n                \n                // reset column index to start again from 0 to 2 \n                fromColumn = 0;\n                toColumn = 3;\n                \n                // move to the next row \n                fromRow += 1;\n                toRow += 1;\n            }\n            \n            // we need these values to make sure that we do not add (1, 0) and (1, 2) to the sum considering \n            // (row, column) \n            int row = 0;\n            int column = 0;\n\n            for (int i = fromRow ; i &lt; toRow ; i++) {\n                for (int j = fromColumn ; j &lt; toColumn ; j++) {\n                    \n                    if (row == 1 &amp;&amp; column == 0) { // skip the case (1, 0)\n                        column++;\n                        continue;\n                    }\n                    else if (row == 1 &amp;&amp; column == 2) { // skip the case (1, 2)\n                        column++;\n                        continue;   \n                    }\n                    // add the value at a certain (i, j)\n                    sum += arr.get(i).get(j);     \n                    column++;\n                }\n                column = 0;\n                row++;\n            }\n            allSum.add(sum);\n            \n            // move to a new column\n            fromColumn += 1;\n            toColumn += 1;\n            \n            counter++;\n        }\n        \n        // print the max sum in allSum\n        System.out.println(Collections.max(allSum));\n</code></pre>\n"}],"owner":{"account_id":18956765,"reputation":41,"user_id":13833206,"display_name":"Hakeem MRK"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":799,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69604155,"answer_count":2,"score":0,"last_activity_date":1663635830,"creation_date":1634470438,"question_id":69603909,"body_markdown":"There was this problem on HackerRank **Day 11: 2D Arrays**[1](Read the problem statement here) in which can be solved easily using arrays. But they have used 2D lists to store the data. But i could&#39;nt figure out anyways to access contents of multi-dimensional lists by refering their index.\r\n\r\nThis is the code given to solve:\r\n```\r\nimport java.io.*;\r\nimport java.math.*;\r\nimport java.security.*;\r\nimport java.text.*;\r\nimport java.util.*;\r\nimport java.util.concurrent.*;\r\nimport java.util.function.*;\r\nimport java.util.regex.*;\r\nimport java.util.stream.*;\r\nimport static java.util.stream.Collectors.joining;\r\nimport static java.util.stream.Collectors.toList;\r\n\r\npublic class Solution {\r\n    public static void main(String[] args) throws IOException {\r\n        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(System.in));\r\n\r\n        List&lt;List&lt;Integer&gt;&gt; arr = new ArrayList&lt;&gt;();\r\n\r\n        IntStream.range(0, 6).forEach(i -&gt; {\r\n            try {\r\n                arr.add(\r\n                    Stream.of(bufferedReader.readLine().replaceAll(&quot;\\\\s+$&quot;, &quot;&quot;).split(&quot; &quot;))\r\n                        .map(Integer::parseInt)\r\n                        .collect(toList())\r\n                );\r\n            } catch (IOException ex) {\r\n                throw new RuntimeException(ex);\r\n            }\r\n        });\r\n\r\n        bufferedReader.close();\r\n    }\r\n}\r\n```\r\nWhat are the possible solutions for this problem using Lists.\r\n\r\nI tried by using toArray() method and get() method in various ways but failed. Any help would be appreciated.\r\n  [1]: https://www.hackerrank.com/challenges/30-2d-arrays/problem","title":"Accessing elements of multi-dimensional Lists in Java","body":"<p>There was this problem on HackerRank <strong>Day 11: 2D Arrays</strong>[1](Read the problem statement here) in which can be solved easily using arrays. But they have used 2D lists to store the data. But i could'nt figure out anyways to access contents of multi-dimensional lists by refering their index.</p>\n<p>This is the code given to solve:</p>\n<pre><code>import java.io.*;\nimport java.math.*;\nimport java.security.*;\nimport java.text.*;\nimport java.util.*;\nimport java.util.concurrent.*;\nimport java.util.function.*;\nimport java.util.regex.*;\nimport java.util.stream.*;\nimport static java.util.stream.Collectors.joining;\nimport static java.util.stream.Collectors.toList;\n\npublic class Solution {\n    public static void main(String[] args) throws IOException {\n        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(System.in));\n\n        List&lt;List&lt;Integer&gt;&gt; arr = new ArrayList&lt;&gt;();\n\n        IntStream.range(0, 6).forEach(i -&gt; {\n            try {\n                arr.add(\n                    Stream.of(bufferedReader.readLine().replaceAll(&quot;\\\\s+$&quot;, &quot;&quot;).split(&quot; &quot;))\n                        .map(Integer::parseInt)\n                        .collect(toList())\n                );\n            } catch (IOException ex) {\n                throw new RuntimeException(ex);\n            }\n        });\n\n        bufferedReader.close();\n    }\n}\n</code></pre>\n<p>What are the possible solutions for this problem using Lists.</p>\n<p>I tried by using toArray() method and get() method in various ways but failed. Any help would be appreciated.\n[1]: <a href=\"https://www.hackerrank.com/challenges/30-2d-arrays/problem\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/30-2d-arrays/problem</a></p>\n"},{"tags":["java","if-statement","while-loop"],"answers":[{"tags":[],"owner":{"account_id":26385187,"reputation":19,"user_id":20037808,"display_name":"Gary L."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663635282,"creation_date":1663635282,"answer_id":73780598,"question_id":73780303,"body_markdown":"After playing around with the code more and researching more, I found the solution. the issue I was having was due to not including the line \r\ninput.next(); in my else statement (input is the name of my scanner, if you named your scanner something else, that name would be in it&#39;s place)\r\n\r\n\r\n            while(numCheck)\r\n            {\r\n            System.out.println(&quot;Now, please enter 2 numbers, seperated by a space: &quot;);\r\n            \r\n            if(!input.hasNextInt())\r\n            {\r\n            System.out.println(&quot;That is an invalid entry. &quot;);       \r\n            input.next();\r\n            }\r\n            else\r\n            {\r\n            n1 = input.nextInt();\r\n            n2 = input.nextInt();\r\n            numCheck = false;\r\n            }            \r\n            }\r\n            \r\n","title":"java while loop with if/else statement, else argument runs forever instead of restarting while loop","body":"<p>After playing around with the code more and researching more, I found the solution. the issue I was having was due to not including the line\ninput.next(); in my else statement (input is the name of my scanner, if you named your scanner something else, that name would be in it's place)</p>\n<pre><code>        while(numCheck)\n        {\n        System.out.println(&quot;Now, please enter 2 numbers, seperated by a space: &quot;);\n        \n        if(!input.hasNextInt())\n        {\n        System.out.println(&quot;That is an invalid entry. &quot;);       \n        input.next();\n        }\n        else\n        {\n        n1 = input.nextInt();\n        n2 = input.nextInt();\n        numCheck = false;\n        }            \n        }\n        \n</code></pre>\n"}],"owner":{"account_id":26385187,"reputation":19,"user_id":20037808,"display_name":"Gary L."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663635282,"creation_date":1663631489,"question_id":73780303,"body_markdown":"So I have an assignment where I am supposed to prompt the user to enter an arithmetic operator, and then 2 numbers, and produce the result; i.e. user enters /, 20, 2 and the OUTPUT should be 10. I am using checks to ensure the proper value types are entered by the user, and my check for the integers entered runs forever if the else statement is activated. I am not sure where I am going wrong here. any guidance would be greatly appreciated.\r\n\r\n\r\nimport java.util.Scanner; \r\npublic class mainClass {\r\n\r\n    /**\r\n     * @param args the command line arguments\r\n     */\r\n    public static void main(String[] args)\r\n    {\r\n        Scanner input = new Scanner(System.in);\r\n        boolean charCheck = true; //for verifying user arithmetic input\r\n        boolean numCheck = true; //for verifying user int input\r\n        boolean sysCheck = true; //for program outer while loop\r\n        int n1 = -1; //user entered number 1\r\n        int n2 = -2; //user entered number 2\r\n        char x = &#39; &#39;; //user entered arithmetic operator\r\n        while (sysCheck == true)\r\n        {\r\n        while (charCheck == true)\r\n        {\r\n            System.out.println(&quot;Please enter either +, -, *, /to proceed. Enter x to end the program&quot;);\r\n            x = input.next().charAt(0);\r\n\r\n            switch(x) //check input validity for x before the program proceeds\r\n            {\r\n                case &#39;+&#39;:\r\n                case &#39;-&#39;:\r\n                case &#39;*&#39;:\r\n                case &#39;/&#39;:    \r\n                  System.out.println(x);\r\n                  charCheck = false;\r\n                  break;\r\n                case &#39;x&#39;:\r\n                    System.exit(0);\r\n                    break;\r\n                default:\r\n                    System.out.print(&quot;That is an invalid entry. &quot;);\r\n            }\r\n        }\r\n            System.out.println(&quot;Now, please enter 2 numbers, seperated by a space: &quot;);\r\n            while(numCheck)\r\n            {\r\n            if(input.hasNextInt())\r\n            {\r\n            n1 = input.nextInt();\r\n            n2 = input.nextInt();\r\n            System.out.println(n1 + &quot; &quot; + n2);\r\n            numCheck = false;\r\n            }\r\n            else\r\n                System.out.print(&quot;That is an invalid entry. &quot;);                \r\n            }\r\n            \r\n            switch(x) //check input validity for x before the program proceeds\r\n            {\r\n                case &#39;+&#39;:\r\n                    System.out.print(&quot;The result is: &quot; + (n1 + n2));\r\n                    break;\r\n                case &#39;-&#39;:\r\n                    System.out.print(&quot;The result is: &quot; + (n1 - n2));\r\n                    break;\r\n                case &#39;*&#39;:\r\n                    System.out.print(&quot;The result is: &quot; + (n1 * n2));\r\n                    break;                   \r\n                case &#39;/&#39;:\r\n                    System.out.print(&quot;The result is: &quot; + (n1 / n2));\r\n                    break;\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n    }","title":"java while loop with if/else statement, else argument runs forever instead of restarting while loop","body":"<p>So I have an assignment where I am supposed to prompt the user to enter an arithmetic operator, and then 2 numbers, and produce the result; i.e. user enters /, 20, 2 and the OUTPUT should be 10. I am using checks to ensure the proper value types are entered by the user, and my check for the integers entered runs forever if the else statement is activated. I am not sure where I am going wrong here. any guidance would be greatly appreciated.</p>\n<p>import java.util.Scanner;\npublic class mainClass {</p>\n<pre><code>/**\n * @param args the command line arguments\n */\npublic static void main(String[] args)\n{\n    Scanner input = new Scanner(System.in);\n    boolean charCheck = true; //for verifying user arithmetic input\n    boolean numCheck = true; //for verifying user int input\n    boolean sysCheck = true; //for program outer while loop\n    int n1 = -1; //user entered number 1\n    int n2 = -2; //user entered number 2\n    char x = ' '; //user entered arithmetic operator\n    while (sysCheck == true)\n    {\n    while (charCheck == true)\n    {\n        System.out.println(&quot;Please enter either +, -, *, /to proceed. Enter x to end the program&quot;);\n        x = input.next().charAt(0);\n\n        switch(x) //check input validity for x before the program proceeds\n        {\n            case '+':\n            case '-':\n            case '*':\n            case '/':    \n              System.out.println(x);\n              charCheck = false;\n              break;\n            case 'x':\n                System.exit(0);\n                break;\n            default:\n                System.out.print(&quot;That is an invalid entry. &quot;);\n        }\n    }\n        System.out.println(&quot;Now, please enter 2 numbers, seperated by a space: &quot;);\n        while(numCheck)\n        {\n        if(input.hasNextInt())\n        {\n        n1 = input.nextInt();\n        n2 = input.nextInt();\n        System.out.println(n1 + &quot; &quot; + n2);\n        numCheck = false;\n        }\n        else\n            System.out.print(&quot;That is an invalid entry. &quot;);                \n        }\n        \n        switch(x) //check input validity for x before the program proceeds\n        {\n            case '+':\n                System.out.print(&quot;The result is: &quot; + (n1 + n2));\n                break;\n            case '-':\n                System.out.print(&quot;The result is: &quot; + (n1 - n2));\n                break;\n            case '*':\n                System.out.print(&quot;The result is: &quot; + (n1 * n2));\n                break;                   \n            case '/':\n                System.out.print(&quot;The result is: &quot; + (n1 / n2));\n                break;\n        }\n\n\n    }\n}\n}\n</code></pre>\n"},{"tags":["java","spring","maven","versioning"],"comments":[{"owner":{"account_id":125988,"reputation":4853,"user_id":2115021,"accept_rate":20,"display_name":"Kick"},"score":0,"creation_date":1389359121,"post_id":21045007,"comment_id":31639820,"body_markdown":"Do you mean to say version of the build ? If yes then simply add &lt;version&gt;1.0.0&lt;/version&gt; in the POM","body":"Do you mean to say version of the build ? If yes then simply add &lt;version&gt;1.0.0&lt;/version&gt; in the POM"},{"owner":{"account_id":1230408,"reputation":6991,"user_id":1195139,"accept_rate":76,"display_name":"Ben Thurley"},"score":2,"creation_date":1389359316,"post_id":21045007,"comment_id":31639934,"body_markdown":"I think he means how does he then read that version at runtime... http://stackoverflow.com/questions/2712970/how-to-get-maven-artifact-version-at-runtime","body":"I think he means how does he then read that version at runtime... <a href=\"http://stackoverflow.com/questions/2712970/how-to-get-maven-artifact-version-at-runtime\" title=\"how to get maven artifact version at runtime\">stackoverflow.com/questions/2712970/&hellip;</a>"},{"owner":{"account_id":3832499,"reputation":672,"user_id":3177710,"display_name":"marek.kapowicki"},"score":0,"creation_date":1389359980,"post_id":21045007,"comment_id":31640377,"body_markdown":"Yes I would like to read current version (value of &lt;version&gt; tag) from pom and use it in java code. And I want to do it in simple and elegant way","body":"Yes I would like to read current version (value of &lt;version&gt; tag) from pom and use it in java code. And I want to do it in simple and elegant way"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1389362200,"post_id":21045007,"comment_id":31641779,"body_markdown":"Just take a look [here](http://blog.soebes.de/blog/2014/01/02/version-information-into-your-appas-with-maven/).","body":"Just take a look <a href=\"http://blog.soebes.de/blog/2014/01/02/version-information-into-your-appas-with-maven/\" rel=\"nofollow noreferrer\">here</a>."}],"answers":[{"tags":[],"owner":{"account_id":243786,"reputation":30863,"user_id":516167,"accept_rate":94,"display_name":"MariuszS"},"down_vote_count":2,"up_vote_count":10,"is_accepted":true,"score":8,"last_activity_date":1527849793,"creation_date":1389360032,"answer_id":21045417,"question_id":21045007,"body_markdown":"There is amazing project named [Appinfo](http://appinfo.sf.net/), please use it and enjoy! (It has an ugly page, I know - but it works :)\r\n\r\n&gt;&gt; AppInfo allows to automatically feed your application with a current version number, build date or build number. \r\n\r\n---\r\nAlso excellent [Spring Boot Actuator](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready) provides feature named [Info Endpoint](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready-application-info-env) which can publish version information to web or REST. \r\n\r\n&gt;&gt; By default the Actuator adds an /info endpoint to the main server. It contains the commit and timestamp information from git.properties (if that file exists) and also any properties it finds in the environment with prefix &quot;info&quot;.","title":"Getting application version from pom","body":"<p>There is amazing project named <a href=\"http://appinfo.sf.net/\" rel=\"nofollow noreferrer\">Appinfo</a>, please use it and enjoy! (It has an ugly page, I know - but it works :)</p>\n\n<blockquote>\n  <blockquote>\n    <p>AppInfo allows to automatically feed your application with a current version number, build date or build number. </p>\n  </blockquote>\n</blockquote>\n\n<hr>\n\n<p>Also excellent <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready\" rel=\"nofollow noreferrer\">Spring Boot Actuator</a> provides feature named <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready-application-info-env\" rel=\"nofollow noreferrer\">Info Endpoint</a> which can publish version information to web or REST. </p>\n\n<blockquote>\n  <blockquote>\n    <p>By default the Actuator adds an /info endpoint to the main server. It contains the commit and timestamp information from git.properties (if that file exists) and also any properties it finds in the environment with prefix \"info\".</p>\n  </blockquote>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2310149,"reputation":1275,"user_id":2028459,"accept_rate":50,"display_name":"MrD"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1389360641,"creation_date":1389360641,"answer_id":21045635,"question_id":21045007,"body_markdown":"You could use the [resource filtering][1] of maven or something like the `maven-substitute-plugin`.\r\n\r\n\r\n  [1]: http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-description.html","title":"Getting application version from pom","body":"<p>You could use the <a href=\"http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-description.html\" rel=\"nofollow\">resource filtering</a> of maven or something like the <code>maven-substitute-plugin</code>.</p>\n"},{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1488592289,"creation_date":1389362437,"answer_id":21046257,"question_id":21045007,"body_markdown":"You better use build-in manifest.\r\n\r\n    new Manifest(Application.class.getResourceAsStream(&quot;/META-INF/manifest.mf&quot;))\r\n\r\nFor the concrete impl-version:\r\n\r\n    new Manifest(Application.class.getResourceAsStream(&quot;/META-INF/manifest.mf&quot;))\r\n                .getMainAttributes()\r\n                .get(Attributes.Name.IMPLEMENTATION_VERSION)\r\n\r\nUsing maven do not forget to create the manifest using:\r\n\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;project&gt;\r\n\t\t&lt;build&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t\t&lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\r\n\t\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/build&gt;\r\n\t&lt;/project&gt;\r\n","title":"Getting application version from pom","body":"<p>You better use build-in manifest.</p>\n\n<pre><code>new Manifest(Application.class.getResourceAsStream(\"/META-INF/manifest.mf\"))\n</code></pre>\n\n<p>For the concrete impl-version:</p>\n\n<pre><code>new Manifest(Application.class.getResourceAsStream(\"/META-INF/manifest.mf\"))\n            .getMainAttributes()\n            .get(Attributes.Name.IMPLEMENTATION_VERSION)\n</code></pre>\n\n<p>Using maven do not forget to create the manifest using:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.4&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2195588,"reputation":1361,"user_id":1941359,"display_name":"AlexO"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1503629857,"creation_date":1503629857,"answer_id":45873767,"question_id":21045007,"body_markdown":"Spring Boot can refer to the project version defined in pom.xml and expose it via REST using [Actuator][1]:\r\n\r\n    # application.properties\r\n    endpoints.info.enabled=true\r\n    info.app.version=@project.version@\r\n\r\nThen accessing the /info URL (e.g. http://localhost:8080/info) will return:\r\n\r\n    {&quot;app&quot;: {&quot;version&quot;: &quot;&lt;major.minor.incremental&gt;&quot;}}\r\n\r\nSee also: https://stackoverflow.com/questions/34772726/spring-boot-spring-web-app-embedded-version-number\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-application-info-env","title":"Getting application version from pom","body":"<p>Spring Boot can refer to the project version defined in pom.xml and expose it via REST using <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-application-info-env\" rel=\"noreferrer\">Actuator</a>:</p>\n\n<pre><code># application.properties\nendpoints.info.enabled=true\ninfo.app.version=@project.version@\n</code></pre>\n\n<p>Then accessing the /info URL (e.g. <a href=\"http://localhost:8080/info\" rel=\"noreferrer\">http://localhost:8080/info</a>) will return:</p>\n\n<pre><code>{\"app\": {\"version\": \"&lt;major.minor.incremental&gt;\"}}\n</code></pre>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/34772726/spring-boot-spring-web-app-embedded-version-number\">spring boot/spring web app embedded version number</a></p>\n"}],"owner":{"account_id":3832499,"reputation":672,"user_id":3177710,"display_name":"marek.kapowicki"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26131,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":21045417,"answer_count":4,"score":15,"last_activity_date":1663635199,"creation_date":1389358769,"question_id":21045007,"body_markdown":"I have a rest endpoint used to return information about application (so far only app version)\r\nBut so far this info is hardcoded, and it&#39;s pretty easy to forget to change it.\r\nI will be better to retrieve app version from pom or manifest file. Is there any project that brings such functionality?","title":"Getting application version from pom","body":"<p>I have a rest endpoint used to return information about application (so far only app version)\nBut so far this info is hardcoded, and it's pretty easy to forget to change it.\nI will be better to retrieve app version from pom or manifest file. Is there any project that brings such functionality?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1325884188,"post_id":8764500,"comment_id":10923585,"body_markdown":"Do you mean in a plugin, or in the app itself?","body":"Do you mean in a plugin, or in the app itself?"},{"owner":{"account_id":109059,"reputation":20712,"user_id":289171,"accept_rate":100,"display_name":"CoolBeans"},"score":0,"creation_date":1325884297,"post_id":8764500,"comment_id":10923621,"body_markdown":"What do you intend to do with the maven version? If the need is to like include the info in some file during the buil process then you can utilize the [build-helper-maven-plugin](http://mojo.codehaus.org/build-helper-maven-plugin/maven-version-mojo.html) that will give you the maven version.","body":"What do you intend to do with the maven version? If the need is to like include the info in some file during the buil process then you can utilize the <a href=\"http://mojo.codehaus.org/build-helper-maven-plugin/maven-version-mojo.html\" rel=\"nofollow noreferrer\">build-helper-maven-plugin</a> that will give you the maven version."},{"owner":{"account_id":109059,"reputation":20712,"user_id":289171,"accept_rate":100,"display_name":"CoolBeans"},"score":0,"creation_date":1325884382,"post_id":8764500,"comment_id":10923653,"body_markdown":"I may have misconstrued your question. If you want to get the version of your project (not the version of maven like my earlier comment) then take a peek [here](http://blog.nigelsim.org/2011/08/31/programmatically-getting-the-maven-version-of-your-project/).","body":"I may have misconstrued your question. If you want to get the version of your project (not the version of maven like my earlier comment) then take a peek <a href=\"http://blog.nigelsim.org/2011/08/31/programmatically-getting-the-maven-version-of-your-project/\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":3324,"reputation":14696,"user_id":4792,"accept_rate":50,"display_name":"Kevin Wong"},"score":0,"creation_date":1325884528,"post_id":8764500,"comment_id":10923707,"body_markdown":"In the app itself. As an example, I want to show the version in an About box.","body":"In the app itself. As an example, I want to show the version in an About box."},{"owner":{"account_id":425393,"reputation":1372,"user_id":805976,"display_name":"Mason Bryant"},"score":2,"creation_date":1325884558,"post_id":8764500,"comment_id":10923722,"body_markdown":"this is covered in: http://stackoverflow.com/questions/3697449/retrieve-version-from-maven-pom-xml-in-code","body":"this is covered in: <a href=\"http://stackoverflow.com/questions/3697449/retrieve-version-from-maven-pom-xml-in-code\" title=\"retrieve version from maven pom xml in code\">stackoverflow.com/questions/3697449/&hellip;</a>"},{"owner":{"account_id":109059,"reputation":20712,"user_id":289171,"accept_rate":100,"display_name":"CoolBeans"},"score":0,"creation_date":1325884586,"post_id":8764500,"comment_id":10923728,"body_markdown":"@KevinWong - Yup, my second link was the correct one.","body":"@KevinWong - Yup, my second link was the correct one."},{"owner":{"account_id":109059,"reputation":20712,"user_id":289171,"accept_rate":100,"display_name":"CoolBeans"},"score":0,"creation_date":1325884648,"post_id":8764500,"comment_id":10923753,"body_markdown":"@MasonBryant - good catch. Voting to close it as duplicate.","body":"@MasonBryant - good catch. Voting to close it as duplicate."},{"owner":{"account_id":3324,"reputation":14696,"user_id":4792,"accept_rate":50,"display_name":"Kevin Wong"},"score":1,"creation_date":1325884880,"post_id":8764500,"comment_id":10923828,"body_markdown":"Sorry, I did several searches but didn&#39;t find that one. Also voting to close as dup.","body":"Sorry, I did several searches but didn&#39;t find that one. Also voting to close as dup."}],"answers":[{"tags":[],"owner":{"account_id":3324,"reputation":14696,"user_id":4792,"accept_rate":50,"display_name":"Kevin Wong"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1325884401,"creation_date":1325884401,"answer_id":8764604,"question_id":8764500,"body_markdown":"Create file `version.prop` in `src/main/resources` with the following contents:\r\n\r\n    version=${project.version}\r\n\r\nAdd the following to your project&#39;s pom:\r\n\r\n\r\n\t&lt;build&gt;\r\n\t...\r\n\t\t&lt;resources&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n\t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t&lt;include&gt;**/version.prop&lt;/include&gt;\r\n\t\t\t\t&lt;/includes&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n\t\t\t\t&lt;filtering&gt;false&lt;/filtering&gt;\r\n\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t&lt;exclude&gt;**/version.prop&lt;/exclude&gt;\r\n\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t&lt;/resources&gt;\r\n\t...\r\n\t&lt;/build&gt;\r\n\r\nAdd the following method:\r\n\r\n\tpublic String getVersion()\r\n\t{\r\n\t\tString path = &quot;/version.prop&quot;;\r\n\t\tInputStream stream = getClass().class.getResourceAsStream(path);\r\n\t\tif (stream == null)\r\n\t\t\treturn &quot;UNKNOWN&quot;;\r\n\t\tProperties props = new Properties();\r\n\t\ttry {\r\n\t\t\tprops.load(stream);\r\n\t\t\tstream.close();\r\n\t\t\treturn (String) props.get(&quot;version&quot;);\r\n\t\t} catch (IOException e) {\r\n\t\t\treturn &quot;UNKNOWN&quot;;\r\n\t\t}\r\n\t}\r\n\r\np.s. Found most of this solution here: http://blog.nigelsim.org/2011/08/31/programmatically-getting-the-maven-version-of-your-project/#comment-124","title":"Programmatically getting the Maven version of your project","body":"<p>Create file <code>version.prop</code> in <code>src/main/resources</code> with the following contents:</p>\n\n<pre><code>version=${project.version}\n</code></pre>\n\n<p>Add the following to your project's pom:</p>\n\n<pre><code>&lt;build&gt;\n...\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;includes&gt;\n                &lt;include&gt;**/version.prop&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/resource&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;false&lt;/filtering&gt;\n            &lt;excludes&gt;\n                &lt;exclude&gt;**/version.prop&lt;/exclude&gt;\n            &lt;/excludes&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n...\n&lt;/build&gt;\n</code></pre>\n\n<p>Add the following method:</p>\n\n<pre><code>public String getVersion()\n{\n    String path = \"/version.prop\";\n    InputStream stream = getClass().class.getResourceAsStream(path);\n    if (stream == null)\n        return \"UNKNOWN\";\n    Properties props = new Properties();\n    try {\n        props.load(stream);\n        stream.close();\n        return (String) props.get(\"version\");\n    } catch (IOException e) {\n        return \"UNKNOWN\";\n    }\n}\n</code></pre>\n\n<p>p.s. Found most of this solution here: <a href=\"http://blog.nigelsim.org/2011/08/31/programmatically-getting-the-maven-version-of-your-project/#comment-124\">http://blog.nigelsim.org/2011/08/31/programmatically-getting-the-maven-version-of-your-project/#comment-124</a></p>\n"},{"tags":[],"owner":{"account_id":11171319,"reputation":2160,"user_id":8198203,"accept_rate":75,"display_name":"Frischling"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1521559706,"creation_date":1521559706,"answer_id":49388238,"question_id":8764500,"body_markdown":"For jar files, you have the MANIFEST.MF as the default place to put the Implementation-Version there. Maven supports building the jar file like this.\r\n\r\nSee also\r\nhttps://stackoverflow.com/questions/921667/how-do-i-add-an-implementation-version-value-to-a-jar-manifest-using-maven#921753\r\n","title":"Programmatically getting the Maven version of your project","body":"<p>For jar files, you have the MANIFEST.MF as the default place to put the Implementation-Version there. Maven supports building the jar file like this.</p>\n\n<p>See also\n<a href=\"https://stackoverflow.com/questions/921667/how-do-i-add-an-implementation-version-value-to-a-jar-manifest-using-maven#921753\">How do I add an Implementation-Version value to a jar manifest using Maven?</a></p>\n"}],"owner":{"account_id":3324,"reputation":14696,"user_id":4792,"accept_rate":50,"display_name":"Kevin Wong"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5190,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":2,"score":11,"last_activity_date":1663635185,"creation_date":1325883845,"question_id":8764500,"body_markdown":"How do I get the Maven version of my project programatically?\r\n\r\nIn other words:\r\n\r\n\tstatic public String getVersion()\r\n\t{\r\n\t\t...what goes here?...\r\n\t}\r\n\r\nFor example, if my project would generate the jar `CalculatorApp-1.2.3.jar`, I want `getVersion()` to return `1.2.3`.","title":"Programmatically getting the Maven version of your project","body":"<p>How do I get the Maven version of my project programatically?</p>\n\n<p>In other words:</p>\n\n<pre><code>static public String getVersion()\n{\n    ...what goes here?...\n}\n</code></pre>\n\n<p>For example, if my project would generate the jar <code>CalculatorApp-1.2.3.jar</code>, I want <code>getVersion()</code> to return <code>1.2.3</code>.</p>\n"},{"tags":["java","maven-3","pom.xml"],"comments":[{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1414185455,"post_id":26551439,"comment_id":41734304,"body_markdown":"Accessing the `pom.xml` as ... well ... `XML` is not an option? What is _&quot;the program&quot;_&#39;s intention? Is _the program_ implemented as Maven plugin an option?","body":"Accessing the <code>pom.xml</code> as ... well ... <code>XML</code> is not an option? What is <i>&quot;the program&quot;</i>&#39;s intention? Is <i>the program</i> implemented as Maven plugin an option?"},{"owner":{"account_id":2574860,"reputation":471,"user_id":2232795,"accept_rate":100,"display_name":"swhite"},"score":0,"creation_date":1414417868,"post_id":26551439,"comment_id":41792929,"body_markdown":"so my problem was that my property variable was the same name as my local variable and I forgot to enclose the property variable call in quotes.","body":"so my problem was that my property variable was the same name as my local variable and I forgot to enclose the property variable call in quotes."}],"answers":[{"tags":[],"owner":{"account_id":406137,"reputation":5823,"user_id":775467,"accept_rate":75,"display_name":"coderplus"},"down_vote_count":0,"up_vote_count":104,"is_accepted":true,"score":104,"last_activity_date":1532596095,"creation_date":1414332735,"answer_id":26573884,"question_id":26551439,"body_markdown":"Create a property file\r\n\r\n    src/main/resources/project.properties\r\n\r\nwith the below content\r\n\r\n    version=${project.version}\r\n    artifactId=${project.artifactId}\r\n\r\nNow turn on [maven resource filtering][1]\r\n\r\n      &lt;resource&gt;\r\n        &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n        &lt;filtering&gt;true&lt;/filtering&gt;\r\n      &lt;/resource&gt;\r\n so that this file is processed into\r\n\r\n    target/classes/project.properties\r\n\r\nwith some content similar to this\r\n\r\n    version=1.5\r\n    artifactId=my-artifact\r\n\r\nNow you can read this property file to get what you want and this should work every time.\r\n\r\n\r\n    final Properties properties = new Properties();\r\n    properties.load(this.getClassLoader().getResourceAsStream(&quot;project.properties&quot;));\r\n    System.out.println(properties.getProperty(&quot;version&quot;));\r\n    System.out.println(properties.getProperty(&quot;artifactId&quot;));\r\n\r\n\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html","title":"Getting maven project version and artifact ID from pom while running in Eclipse","body":"<p>Create a property file</p>\n\n<pre><code>src/main/resources/project.properties\n</code></pre>\n\n<p>with the below content</p>\n\n<pre><code>version=${project.version}\nartifactId=${project.artifactId}\n</code></pre>\n\n<p>Now turn on <a href=\"http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html\" rel=\"noreferrer\">maven resource filtering</a></p>\n\n<pre><code>  &lt;resource&gt;\n    &lt;directory&gt;src/main/resources&lt;/directory&gt;\n    &lt;filtering&gt;true&lt;/filtering&gt;\n  &lt;/resource&gt;\n</code></pre>\n\n<p>so that this file is processed into</p>\n\n<pre><code>target/classes/project.properties\n</code></pre>\n\n<p>with some content similar to this</p>\n\n<pre><code>version=1.5\nartifactId=my-artifact\n</code></pre>\n\n<p>Now you can read this property file to get what you want and this should work every time.</p>\n\n<pre><code>final Properties properties = new Properties();\nproperties.load(this.getClassLoader().getResourceAsStream(\"project.properties\"));\nSystem.out.println(properties.getProperty(\"version\"));\nSystem.out.println(properties.getProperty(\"artifactId\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7976378,"reputation":8249,"user_id":6019417,"accept_rate":85,"display_name":"J. Chomel"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1573734451,"creation_date":1573734451,"answer_id":58856780,"question_id":26551439,"body_markdown":"An easy solution with maven 4 is now to add a `VersionUtil` static method in your package:\r\n\r\n    package my.domain.package;\r\n    public class VersionUtil {\r\n      public static String getApplicationVersion(){\r\n        String version = VersionUtil.class.getPackage().getImplementationVersion();\r\n        return (version == null)? &quot;unable to reach&quot;: version;\r\n      }\r\n    }\r\n\r\nThe thing is you need this &#180;mave-war-plugin&#180; in the project&#39;s pom, saying you want to add `addDefaultImplementationEntries`:\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t ...\r\n  \t\t  &lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.2.2&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t&lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\r\n\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n        ...\r\n\r\nThen call the `VersionUtil.getApplicationVersion()` from some place in your code.","title":"Getting maven project version and artifact ID from pom while running in Eclipse","body":"<p>An easy solution with maven 4 is now to add a <code>VersionUtil</code> static method in your package:</p>\n\n<pre><code>package my.domain.package;\npublic class VersionUtil {\n  public static String getApplicationVersion(){\n    String version = VersionUtil.class.getPackage().getImplementationVersion();\n    return (version == null)? \"unable to reach\": version;\n  }\n}\n</code></pre>\n\n<p>The thing is you need this ´mave-war-plugin´ in the project's pom, saying you want to add <code>addDefaultImplementationEntries</code>:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\n    &lt;plugins&gt;\n     ...\n      &lt;plugin&gt;\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.2.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    ...\n</code></pre>\n\n<p>Then call the <code>VersionUtil.getApplicationVersion()</code> from some place in your code.</p>\n"}],"owner":{"account_id":2574860,"reputation":471,"user_id":2232795,"accept_rate":100,"display_name":"swhite"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56462,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"accepted_answer_id":26573884,"answer_count":2,"score":41,"last_activity_date":1663635165,"creation_date":1414165426,"question_id":26551439,"body_markdown":"I was looking up how to get the application name(artifact id) and version from maven pom or manifest when I came across this question https://stackoverflow.com/questions/2712970/how-to-get-maven-artifact-version-at-runtime?rq=1.\r\n\r\nThe above works for me when I package the project but I can&#39;t seem to get anything to work when I try to run the program using eclipse. I tried using the .properties method when building since I assumed that is not package dependent but I am still not getting a result. If anyone has an idea or solution to this problem it would be greatly appreciated.\r\n\r\nMy last attempt is below. This uses the manifest when packaged(which works) and trying to get the .properties file when running in eclipse. \r\n\r\n    String appVersion = getClass().getPackage().getImplementationVersion();\r\n\t\tif(appVersion == null || &quot;&quot;.equals(appVersion)) {\r\n\t\t\tappVersion = Glob.getString(appVersion);\r\n\t\t\tif(appVersion == null || &quot;&quot;.equals(appVersion)) {\r\n\t\t\t\tSystem.exit(0);\r\n\t\t\t}\r\n\t\t}","title":"Getting maven project version and artifact ID from pom while running in Eclipse","body":"<p>I was looking up how to get the application name(artifact id) and version from maven pom or manifest when I came across this question <a href=\"https://stackoverflow.com/questions/2712970/how-to-get-maven-artifact-version-at-runtime?rq=1\">Get Maven artifact version at runtime</a>.</p>\n\n<p>The above works for me when I package the project but I can't seem to get anything to work when I try to run the program using eclipse. I tried using the .properties method when building since I assumed that is not package dependent but I am still not getting a result. If anyone has an idea or solution to this problem it would be greatly appreciated.</p>\n\n<p>My last attempt is below. This uses the manifest when packaged(which works) and trying to get the .properties file when running in eclipse. </p>\n\n<pre><code>String appVersion = getClass().getPackage().getImplementationVersion();\n    if(appVersion == null || \"\".equals(appVersion)) {\n        appVersion = Glob.getString(appVersion);\n        if(appVersion == null || \"\".equals(appVersion)) {\n            System.exit(0);\n        }\n    }\n</code></pre>\n"},{"tags":["java","localization","cldr"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663631698,"creation_date":1663631698,"answer_id":73780319,"question_id":73779640,"body_markdown":"You got the wrong version. [Java 17 supports CLDR 39][1], not 41. If you look at the version-39 [en_CA.xml][2] file, you can clearly see them all laid out there:\r\n\r\n```\r\n&lt;monthWidth type=&quot;abbreviated&quot;&gt;\r\n    &lt;month type=&quot;1&quot;&gt;Jan.&lt;/month&gt;\r\n    &lt;month type=&quot;2&quot;&gt;Feb.&lt;/month&gt;\r\n    &lt;month type=&quot;3&quot;&gt;Mar.&lt;/month&gt;\r\n    &lt;month type=&quot;4&quot;&gt;Apr.&lt;/month&gt;\r\n    &lt;month type=&quot;5&quot;&gt;May&lt;/month&gt;\r\n    &lt;month type=&quot;6&quot;&gt;Jun.&lt;/month&gt;\r\n    &lt;month type=&quot;7&quot;&gt;Jul.&lt;/month&gt;\r\n    &lt;month type=&quot;8&quot;&gt;Aug.&lt;/month&gt;\r\n    &lt;month type=&quot;9&quot;&gt;Sep.&lt;/month&gt;\r\n    &lt;month type=&quot;10&quot;&gt;Oct.&lt;/month&gt;\r\n    &lt;month type=&quot;11&quot;&gt;Nov.&lt;/month&gt;\r\n    &lt;month type=&quot;12&quot;&gt;Dec.&lt;/month&gt;\r\n&lt;/monthWidth&gt;\r\n```\r\n\r\nEvidently, in newer versions, this trailing dot is removed :)\r\n\r\n\r\n  [1]: https://bugs.openjdk.org/browse/JDK-8258794\r\n  [2]: https://github.com/unicode-org/cldr/blob/release-39/common/main/en_CA.xml#L1623","title":"How does the CLDR define its rules for month abbreviations - specifically for en_CA?","body":"<p>You got the wrong version. <a href=\"https://bugs.openjdk.org/browse/JDK-8258794\" rel=\"nofollow noreferrer\">Java 17 supports CLDR 39</a>, not 41. If you look at the version-39 <a href=\"https://github.com/unicode-org/cldr/blob/release-39/common/main/en_CA.xml#L1623\" rel=\"nofollow noreferrer\">en_CA.xml</a> file, you can clearly see them all laid out there:</p>\n<pre><code>&lt;monthWidth type=&quot;abbreviated&quot;&gt;\n    &lt;month type=&quot;1&quot;&gt;Jan.&lt;/month&gt;\n    &lt;month type=&quot;2&quot;&gt;Feb.&lt;/month&gt;\n    &lt;month type=&quot;3&quot;&gt;Mar.&lt;/month&gt;\n    &lt;month type=&quot;4&quot;&gt;Apr.&lt;/month&gt;\n    &lt;month type=&quot;5&quot;&gt;May&lt;/month&gt;\n    &lt;month type=&quot;6&quot;&gt;Jun.&lt;/month&gt;\n    &lt;month type=&quot;7&quot;&gt;Jul.&lt;/month&gt;\n    &lt;month type=&quot;8&quot;&gt;Aug.&lt;/month&gt;\n    &lt;month type=&quot;9&quot;&gt;Sep.&lt;/month&gt;\n    &lt;month type=&quot;10&quot;&gt;Oct.&lt;/month&gt;\n    &lt;month type=&quot;11&quot;&gt;Nov.&lt;/month&gt;\n    &lt;month type=&quot;12&quot;&gt;Dec.&lt;/month&gt;\n&lt;/monthWidth&gt;\n</code></pre>\n<p>Evidently, in newer versions, this trailing dot is removed :)</p>\n"}],"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73780319,"answer_count":1,"score":1,"last_activity_date":1663631698,"creation_date":1663624142,"question_id":73779640,"body_markdown":"The [CLDR](https://cldr.unicode.org/) provides a repository of locale data. In Java, you can access a list of CLDR month abbreviations for a given locale, as follows:\r\n\r\n```java\r\nString[] usMonthAbbrevs = new DateFormatSymbols(Locale.US).getShortMonths();\r\nSystem.out.println(usMonthAbbrevs[0]);\r\n```\r\n\r\nThe above (in Java 17, using the default CLDR provider) prints `Jan`.\r\n\r\nI have been assuming (maybe wrongly) that this list of abbreviations is defined in the relevant CLDR XML file for the `en` locale:  \r\n\r\n`cldr` &gt; `common` &gt; `main` &gt; [`en.xml`](https://github.com/unicode-org/cldr/blob/release-41/common/main/en.xml#L2167) &gt; `&lt;month type=&quot;1&quot;&gt;Jan&lt;/month&gt;`\r\n\r\nBut for Canadian English, the same month abbreviations all have periods at the end:\r\n\r\n```java\r\nString[] canMonthAbbrevs = new DateFormatSymbols(Locale.CANADA).getShortMonths();\r\nSystem.out.println(canMonthAbbrevs[0]);\r\n```\r\n\r\nThe above prints `Jan.` - note that period at the end.\r\n\r\n---\r\n\r\n**Question: Where is the CLDR list, or rule, which specifies this extra period for the `en_CA` locale?**\r\n\r\nI did not see anything obvious in the [`en_CA.xml`](https://github.com/unicode-org/cldr/blob/release-41/common/main/en_CA.xml) file. Maybe I missed it, or I did not understand what I was looking at.\r\n\r\n---\r\n\r\nTo research this, I tried to trace the code back through Java&#39;s resource bundle classes.\r\n\r\nThis led me to the following class:\r\n\r\n    sun.text.resources.cldr.ext.FormatData_en_CA\r\n\r\nI found this class in my Java installation in `jmods/jdk.localedata.jmod`. After unzipping that `jmod` file, I opened the following class file:\r\n\r\n    classes/sun/text/resources/cldr/ext/FormatData_en_CA.class\r\n\r\nIn there, I saw bytecode which contains the month abbreviations with periods - for example:\r\n\r\n    * 7: ldc           #9                  // String Jan.\r\n\r\nMy guess is that all the classes in `jdk.localedata.jmod` are pre-built (presumably from CLDR data/rules). But I was not able to see how that process happens. Maybe a tool which is part of the JDK build process?\r\n\r\nSo, my question remains: Where is the CLDR list, or rule, which specifies this extra period for the `en_CA` locale&#39;s month abbreviations?\r\n\r\n&lt;sup&gt;Why am I asking? Just because I got curious about this, after noticing the difference between the US and Canadian abbreviations.&lt;/sup&gt;","title":"How does the CLDR define its rules for month abbreviations - specifically for en_CA?","body":"<p>The <a href=\"https://cldr.unicode.org/\" rel=\"nofollow noreferrer\">CLDR</a> provides a repository of locale data. In Java, you can access a list of CLDR month abbreviations for a given locale, as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] usMonthAbbrevs = new DateFormatSymbols(Locale.US).getShortMonths();\nSystem.out.println(usMonthAbbrevs[0]);\n</code></pre>\n<p>The above (in Java 17, using the default CLDR provider) prints <code>Jan</code>.</p>\n<p>I have been assuming (maybe wrongly) that this list of abbreviations is defined in the relevant CLDR XML file for the <code>en</code> locale:</p>\n<p><code>cldr</code> &gt; <code>common</code> &gt; <code>main</code> &gt; <a href=\"https://github.com/unicode-org/cldr/blob/release-41/common/main/en.xml#L2167\" rel=\"nofollow noreferrer\"><code>en.xml</code></a> &gt; <code>&lt;month type=&quot;1&quot;&gt;Jan&lt;/month&gt;</code></p>\n<p>But for Canadian English, the same month abbreviations all have periods at the end:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] canMonthAbbrevs = new DateFormatSymbols(Locale.CANADA).getShortMonths();\nSystem.out.println(canMonthAbbrevs[0]);\n</code></pre>\n<p>The above prints <code>Jan.</code> - note that period at the end.</p>\n<hr />\n<p><strong>Question: Where is the CLDR list, or rule, which specifies this extra period for the <code>en_CA</code> locale?</strong></p>\n<p>I did not see anything obvious in the <a href=\"https://github.com/unicode-org/cldr/blob/release-41/common/main/en_CA.xml\" rel=\"nofollow noreferrer\"><code>en_CA.xml</code></a> file. Maybe I missed it, or I did not understand what I was looking at.</p>\n<hr />\n<p>To research this, I tried to trace the code back through Java's resource bundle classes.</p>\n<p>This led me to the following class:</p>\n<pre><code>sun.text.resources.cldr.ext.FormatData_en_CA\n</code></pre>\n<p>I found this class in my Java installation in <code>jmods/jdk.localedata.jmod</code>. After unzipping that <code>jmod</code> file, I opened the following class file:</p>\n<pre><code>classes/sun/text/resources/cldr/ext/FormatData_en_CA.class\n</code></pre>\n<p>In there, I saw bytecode which contains the month abbreviations with periods - for example:</p>\n<pre><code>* 7: ldc           #9                  // String Jan.\n</code></pre>\n<p>My guess is that all the classes in <code>jdk.localedata.jmod</code> are pre-built (presumably from CLDR data/rules). But I was not able to see how that process happens. Maybe a tool which is part of the JDK build process?</p>\n<p>So, my question remains: Where is the CLDR list, or rule, which specifies this extra period for the <code>en_CA</code> locale's month abbreviations?</p>\n<p><sup>Why am I asking? Just because I got curious about this, after noticing the difference between the US and Canadian abbreviations.</sup></p>\n"},{"tags":["java","quarkus","vert.x","quarkus-reactive"],"comments":[{"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"score":0,"creation_date":1662231616,"post_id":73593663,"comment_id":129960450,"body_markdown":"`  stream.transferTo(body);` this line might need to be moved to an executeBlocking","body":"`  stream.transferTo(body);` this line might need to be moved to an executeBlocking"}],"answers":[{"tags":[],"owner":{"account_id":17178181,"reputation":1,"user_id":12433996,"display_name":"yazinnnn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662342912,"creation_date":1662342912,"answer_id":73603916,"question_id":73593663,"body_markdown":"https://quarkus.io/guides/resteasy-reactive#request-or-response-filters\r\n\r\nhttps://smallrye.io/smallrye-mutiny/1.7.0/guides/framework-integration/\r\n```\r\n    @RequestScoped\r\n    class Filter(\r\n        private val vertx: Vertx\r\n    ) {\r\n    \r\n    //  you can run blocking code on mutiny&#39;s Infrastructure defaultWorkerPool\r\n        @ServerRequestFilter\r\n        fun filter(requestContext: ContainerRequestContext): Uni&lt;RestResponse&lt;*&gt;&gt; {\r\n            return Uni.createFrom().item { work() }\r\n                .map&lt;RestResponse&lt;*&gt;&gt; { null }\r\n                .runSubscriptionOn(Infrastructure.getDefaultWorkerPool())\r\n        }\r\n    // or use vertx.executeBlocking api\r\n        @ServerRequestFilter\r\n        fun filter(requestContext: ContainerRequestContext): Uni&lt;RestResponse&lt;*&gt;&gt; {\r\n            return vertx.executeBlocking(\r\n                Uni.createFrom().item { work() }\r\n                    .map { null }\r\n            )\r\n        }\r\n    \r\n    \r\n    \r\n        private fun work(){\r\n            Log.info(&quot;filter&quot;)\r\n            Thread.sleep(3000)\r\n        }\r\n    }\r\n```","title":"How should Blocking Operations in a ContainerRequestFilter be handled Quarkus/Vert.x","body":"<p><a href=\"https://quarkus.io/guides/resteasy-reactive#request-or-response-filters\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/resteasy-reactive#request-or-response-filters</a></p>\n<p><a href=\"https://smallrye.io/smallrye-mutiny/1.7.0/guides/framework-integration/\" rel=\"nofollow noreferrer\">https://smallrye.io/smallrye-mutiny/1.7.0/guides/framework-integration/</a></p>\n<pre><code>    @RequestScoped\n    class Filter(\n        private val vertx: Vertx\n    ) {\n    \n    //  you can run blocking code on mutiny's Infrastructure defaultWorkerPool\n        @ServerRequestFilter\n        fun filter(requestContext: ContainerRequestContext): Uni&lt;RestResponse&lt;*&gt;&gt; {\n            return Uni.createFrom().item { work() }\n                .map&lt;RestResponse&lt;*&gt;&gt; { null }\n                .runSubscriptionOn(Infrastructure.getDefaultWorkerPool())\n        }\n    // or use vertx.executeBlocking api\n        @ServerRequestFilter\n        fun filter(requestContext: ContainerRequestContext): Uni&lt;RestResponse&lt;*&gt;&gt; {\n            return vertx.executeBlocking(\n                Uni.createFrom().item { work() }\n                    .map { null }\n            )\n        }\n    \n    \n    \n        private fun work(){\n            Log.info(&quot;filter&quot;)\n            Thread.sleep(3000)\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1306964,"reputation":11,"user_id":1255755,"display_name":"Damon Sutherland"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663088307,"creation_date":1663088307,"answer_id":73706720,"question_id":73593663,"body_markdown":"In the end, the advice in the exception lead me to simply annotating a delegate ContainerRequestFilter:\r\n\r\n```java\r\npublic class DigestValidationFilterBlocking implements ContainerRequestFilter {\r\n\r\n    private final DigestValidationFilter delegate;\r\n\r\n    public DigestValidationFilterBlocking(DigestValidationFilter delegate) {\r\n        this.delegate = delegate;\r\n    }\r\n\r\n    @Blocking // &lt;-- This annotation allowed Vert.x to accept the I/O operation\r\n    @Override\r\n    public void filter(ContainerRequestContext context) throws IOException {\r\n        delegate.filter(context);\r\n    }\r\n}\r\n```\r\n","title":"How should Blocking Operations in a ContainerRequestFilter be handled Quarkus/Vert.x","body":"<p>In the end, the advice in the exception lead me to simply annotating a delegate ContainerRequestFilter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DigestValidationFilterBlocking implements ContainerRequestFilter {\n\n    private final DigestValidationFilter delegate;\n\n    public DigestValidationFilterBlocking(DigestValidationFilter delegate) {\n        this.delegate = delegate;\n    }\n\n    @Blocking // &lt;-- This annotation allowed Vert.x to accept the I/O operation\n    @Override\n    public void filter(ContainerRequestContext context) throws IOException {\n        delegate.filter(context);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26385136,"reputation":1,"user_id":20037765,"display_name":"Szabolcs Csiszer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663630886,"creation_date":1663630886,"answer_id":73780262,"question_id":73593663,"body_markdown":"I had the same problem. You can try using this in your `@ServerRequestFilter`:\r\n\r\n    @Context\r\n    HttpServerRequest request;","title":"How should Blocking Operations in a ContainerRequestFilter be handled Quarkus/Vert.x","body":"<p>I had the same problem. You can try using this in your <code>@ServerRequestFilter</code>:</p>\n<pre><code>@Context\nHttpServerRequest request;\n</code></pre>\n"}],"owner":{"account_id":1306964,"reputation":11,"user_id":1255755,"display_name":"Damon Sutherland"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":834,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1663630886,"creation_date":1662221156,"question_id":73593663,"body_markdown":"**Background**: \r\n\r\nWe are implementing a signed request mechanism for communication between services. Part of that process generates a digest on the contents of the request body. To validate the body on receipt, we re-generate the digest at the receiver and compare. It&#39;s pretty straight-forward stuff.\r\n\r\n```java\r\n@PreMatching\r\n@Priority(Priorities.ENTITY_CODER)\r\npublic class DigestValidationFilter implements ContainerRequestFilter {\r\n\r\n   private final DigestGenerator generator;\r\n\r\n   @Inject\r\n   public DigestValidationFilter(DigestGenerator generator) {\r\n      this.generator = generator;\r\n   }\r\n\r\n   @Override\r\n   public void filter(ContainerRequestContext context) throws IOException {\r\n      if (context.hasEntity() &amp;&amp; context.getHeaderString(Headers.DIGEST) != null) {\r\n         String digest = context.getHeaderString(Headers.DIGEST);\r\n\r\n         ByteArrayOutputStream body = new ByteArrayOutputStream();\r\n         try (InputStream stream = context.getEntityStream()) {\r\n             stream.transferTo(body); // &lt;-- This is line 36 from the provided stack-trace\r\n         }\r\n\r\n         String algorithm = digest.split(&quot;=&quot;, 2)[0];\r\n         try {\r\n             String calculated = generator.generate(algorithm, body.toByteArray());\r\n\r\n             if (digest.equals(calculated)) {\r\n                 context.setEntityStream(new ByteArrayInputStream(body.toByteArray()));\r\n             } else {\r\n                 throw new InvalidDigestException(&quot;Calculated digest does not match supplied digest. Request body may have been tampered with.&quot;);\r\n             }\r\n         } catch (NoSuchAlgorithmException e) {\r\n             throw new InvalidDigestException(String.format(&quot;Unsupported hash algorithm: %s&quot;, algorithm), e);\r\n         }\r\n      }\r\n   }\r\n}\r\n```\r\n\r\nThe above filter is made available to services as a java-lib. We also supply a set of RequestFilters that can be used with various Http clients, i.e., okhttp3, apache-httpclient, etc. These clients only generate digests when the body is &quot;repeatable&quot;, i.e., not streaming.\r\n\r\n**The Issue**:\r\n\r\nIn Jersey services and Spring Boot services, we do not run into issues. However, when we use Quarkus, we receive the following stack-trace:\r\n\r\n```\r\n2022-09-02 15:18:25 5.13.0 ERROR A blocking operation occurred on the IO thread. This likely means you need to use the @io.smallrye.common.annotation.Blocking annotation on the Resource method, class or javax.ws.rs.core.Application class. \r\n2022-09-02 15:18:25 5.13.0 ERROR HTTP Request to /v1/policy/internal/policies/72575947-45ac-4358-bc40-b5c7ffbd3f35/target-resources failed, error id: c79aa557-c742-43d7-93d9-0e362b2dff79-1 \r\norg.jboss.resteasy.reactive.common.core.BlockingNotAllowedException: Attempting a blocking read on io thread\r\n\tat org.jboss.resteasy.reactive.server.vertx.VertxInputStream$VertxBlockingInput.readBlocking(VertxInputStream.java:242)\r\n\tat org.jboss.resteasy.reactive.server.vertx.VertxInputStream.readIntoBuffer(VertxInputStream.java:120)\r\n\tat org.jboss.resteasy.reactive.server.vertx.VertxInputStream.read(VertxInputStream.java:82)\r\n\tat java.base/java.io.InputStream.transferTo(InputStream.java:782)\r\n\tat com.###.ciam.jaxrs.DigestValidationFilter.filter(DigestValidationFilter.java:36)\r\n\tat org.jboss.resteasy.reactive.server.handlers.ResourceRequestFilterHandler.handle(ResourceRequestFilterHandler.java:47)\r\n\tat org.jboss.resteasy.reactive.server.handlers.ResourceRequestFilterHandler.handle(ResourceRequestFilterHandler.java:8)\r\n\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:141)\r\n\tat org.jboss.resteasy.reactive.server.handlers.RestInitialHandler.beginProcessing(RestInitialHandler.java:49)\r\n\tat org.jboss.resteasy.reactive.server.vertx.ResteasyReactiveVertxHandler.handle(ResteasyReactiveVertxHandler.java:17)\r\n\tat org.jboss.resteasy.reactive.server.vertx.ResteasyReactiveVertxHandler.handle(ResteasyReactiveVertxHandler.java:7)\r\n\tat io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1212)\r\n\tat io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:163)\r\n\tat io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141)\r\n\tat io.quarkus.vertx.http.runtime.StaticResourcesRecorder$2.handle(StaticResourcesRecorder.java:67) ... elided ...\r\n```\r\n\r\nI completely understand why Vert.x would like to prevent long-running I/O operations on the request processing threads. That said, the advice provided in the exception only accounts for I/O operations at the end of the request processing, i.e., it assumes the I/O is happening in the endpoint. Although we do control the filter code, it is in an external library, making it almost like a 3rd party library.\r\n\r\n**My Question**:\r\n\r\nWhat is the right way to handle this? \r\n\r\nI&#39;ve been scouring documentation, but haven&#39;t stumbled on the answer yet (or haven&#39;t recognized the answer). Is there a set of recommended docs I should review?","title":"How should Blocking Operations in a ContainerRequestFilter be handled Quarkus/Vert.x","body":"<p><strong>Background</strong>:</p>\n<p>We are implementing a signed request mechanism for communication between services. Part of that process generates a digest on the contents of the request body. To validate the body on receipt, we re-generate the digest at the receiver and compare. It's pretty straight-forward stuff.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PreMatching\n@Priority(Priorities.ENTITY_CODER)\npublic class DigestValidationFilter implements ContainerRequestFilter {\n\n   private final DigestGenerator generator;\n\n   @Inject\n   public DigestValidationFilter(DigestGenerator generator) {\n      this.generator = generator;\n   }\n\n   @Override\n   public void filter(ContainerRequestContext context) throws IOException {\n      if (context.hasEntity() &amp;&amp; context.getHeaderString(Headers.DIGEST) != null) {\n         String digest = context.getHeaderString(Headers.DIGEST);\n\n         ByteArrayOutputStream body = new ByteArrayOutputStream();\n         try (InputStream stream = context.getEntityStream()) {\n             stream.transferTo(body); // &lt;-- This is line 36 from the provided stack-trace\n         }\n\n         String algorithm = digest.split(&quot;=&quot;, 2)[0];\n         try {\n             String calculated = generator.generate(algorithm, body.toByteArray());\n\n             if (digest.equals(calculated)) {\n                 context.setEntityStream(new ByteArrayInputStream(body.toByteArray()));\n             } else {\n                 throw new InvalidDigestException(&quot;Calculated digest does not match supplied digest. Request body may have been tampered with.&quot;);\n             }\n         } catch (NoSuchAlgorithmException e) {\n             throw new InvalidDigestException(String.format(&quot;Unsupported hash algorithm: %s&quot;, algorithm), e);\n         }\n      }\n   }\n}\n</code></pre>\n<p>The above filter is made available to services as a java-lib. We also supply a set of RequestFilters that can be used with various Http clients, i.e., okhttp3, apache-httpclient, etc. These clients only generate digests when the body is &quot;repeatable&quot;, i.e., not streaming.</p>\n<p><strong>The Issue</strong>:</p>\n<p>In Jersey services and Spring Boot services, we do not run into issues. However, when we use Quarkus, we receive the following stack-trace:</p>\n<pre><code>2022-09-02 15:18:25 5.13.0 ERROR A blocking operation occurred on the IO thread. This likely means you need to use the @io.smallrye.common.annotation.Blocking annotation on the Resource method, class or javax.ws.rs.core.Application class. \n2022-09-02 15:18:25 5.13.0 ERROR HTTP Request to /v1/policy/internal/policies/72575947-45ac-4358-bc40-b5c7ffbd3f35/target-resources failed, error id: c79aa557-c742-43d7-93d9-0e362b2dff79-1 \norg.jboss.resteasy.reactive.common.core.BlockingNotAllowedException: Attempting a blocking read on io thread\n    at org.jboss.resteasy.reactive.server.vertx.VertxInputStream$VertxBlockingInput.readBlocking(VertxInputStream.java:242)\n    at org.jboss.resteasy.reactive.server.vertx.VertxInputStream.readIntoBuffer(VertxInputStream.java:120)\n    at org.jboss.resteasy.reactive.server.vertx.VertxInputStream.read(VertxInputStream.java:82)\n    at java.base/java.io.InputStream.transferTo(InputStream.java:782)\n    at com.###.ciam.jaxrs.DigestValidationFilter.filter(DigestValidationFilter.java:36)\n    at org.jboss.resteasy.reactive.server.handlers.ResourceRequestFilterHandler.handle(ResourceRequestFilterHandler.java:47)\n    at org.jboss.resteasy.reactive.server.handlers.ResourceRequestFilterHandler.handle(ResourceRequestFilterHandler.java:8)\n    at org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:141)\n    at org.jboss.resteasy.reactive.server.handlers.RestInitialHandler.beginProcessing(RestInitialHandler.java:49)\n    at org.jboss.resteasy.reactive.server.vertx.ResteasyReactiveVertxHandler.handle(ResteasyReactiveVertxHandler.java:17)\n    at org.jboss.resteasy.reactive.server.vertx.ResteasyReactiveVertxHandler.handle(ResteasyReactiveVertxHandler.java:7)\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1212)\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:163)\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141)\n    at io.quarkus.vertx.http.runtime.StaticResourcesRecorder$2.handle(StaticResourcesRecorder.java:67) ... elided ...\n</code></pre>\n<p>I completely understand why Vert.x would like to prevent long-running I/O operations on the request processing threads. That said, the advice provided in the exception only accounts for I/O operations at the end of the request processing, i.e., it assumes the I/O is happening in the endpoint. Although we do control the filter code, it is in an external library, making it almost like a 3rd party library.</p>\n<p><strong>My Question</strong>:</p>\n<p>What is the right way to handle this?</p>\n<p>I've been scouring documentation, but haven't stumbled on the answer yet (or haven't recognized the answer). Is there a set of recommended docs I should review?</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":41545,"reputation":52021,"user_id":120808,"accept_rate":90,"display_name":"Adam Batkin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1317221927,"creation_date":1317221927,"answer_id":7585236,"question_id":7585212,"body_markdown":"The HQL query should look pretty similar, except instead of using table and column names, you should use the entity and property names (i.e. whatever you use in Java).","title":"Hibernate update query","body":"<p>The HQL query should look pretty similar, except instead of using table and column names, you should use the entity and property names (i.e. whatever you use in Java).</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1317222224,"creation_date":1317222224,"answer_id":7585293,"question_id":7585212,"body_markdown":"In addition to Adam Batkin&#39;s answer, I would like to add that such queries are generally not used (except if you need to modify a whole loat of rows at once) in Hibernate. The goal of Hibernate is to work with objects. So you generally do:\r\n\r\n    MyEntity m = (MyEntity) session.get(MyEntity.class, &quot;001&quot;);\r\n    m.setValue(m.getValue() + 10);\r\n    // and the new value will automatically be written to database at flush time\r\n","title":"Hibernate update query","body":"<p>In addition to Adam Batkin's answer, I would like to add that such queries are generally not used (except if you need to modify a whole loat of rows at once) in Hibernate. The goal of Hibernate is to work with objects. So you generally do:</p>\n\n<pre><code>MyEntity m = (MyEntity) session.get(MyEntity.class, \"001\");\nm.setValue(m.getValue() + 10);\n// and the new value will automatically be written to database at flush time\n</code></pre>\n"},{"tags":[],"owner":{"account_id":940484,"reputation":22724,"user_id":968632,"accept_rate":100,"display_name":"Guillaume"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1317222298,"creation_date":1317222298,"answer_id":7585309,"question_id":7585212,"body_markdown":"There is no point using HQL to do that, you can use direct SQL if you want to do that, through a JDBC query (or even through a Hibernate query, you can use SQL queries).\r\n\r\nUsing HQL queries to update is only recommended when doing batch updates, not a single row.\r\nhttp://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html#batch-direct\r\n\r\nA more object-oriented way would be to load your object using HQL, do what you need to do in the Java world (columnValue +=10, whatever else you need to do), and then persist it back using hibernate session flush.\r\n\r\nI suppose it involves more operations so it&#39;s less efficient (in pure performance) but depending on your Hibernate configuration (caching, clustering, second-level cache, etc.) it could be a lot better. Not to mention more testable, of course.","title":"Hibernate update query","body":"<p>There is no point using HQL to do that, you can use direct SQL if you want to do that, through a JDBC query (or even through a Hibernate query, you can use SQL queries).</p>\n\n<p>Using HQL queries to update is only recommended when doing batch updates, not a single row.\n<a href=\"http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html#batch-direct\" rel=\"noreferrer\">http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html#batch-direct</a></p>\n\n<p>A more object-oriented way would be to load your object using HQL, do what you need to do in the Java world (columnValue +=10, whatever else you need to do), and then persist it back using hibernate session flush.</p>\n\n<p>I suppose it involves more operations so it's less efficient (in pure performance) but depending on your Hibernate configuration (caching, clustering, second-level cache, etc.) it could be a lot better. Not to mention more testable, of course.</p>\n"},{"tags":[],"owner":{"account_id":40939,"reputation":41525,"user_id":118846,"display_name":"Mikko Maunu"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1317227336,"creation_date":1317227336,"answer_id":7586445,"question_id":7585212,"body_markdown":"As others say, there is better ways, but if you really have to, then for example with following syntax:\r\n\r\n    update EntityName m set m.salary = m.salary +10 where m.id = 1","title":"Hibernate update query","body":"<p>As others say, there is better ways, but if you really have to, then for example with following syntax:</p>\n\n<pre><code>update EntityName m set m.salary = m.salary +10 where m.id = 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2365305,"reputation":11,"user_id":2071090,"display_name":"Lavanyavathi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1368117654,"creation_date":1360826331,"answer_id":14869654,"question_id":7585212,"body_markdown":"Please try this one\r\n\r\n    Query q = session.createQuery(&quot;from ModelClassname where ClassVariableId= :ClassVariableId&quot;);\r\n    q.setParameter(&quot;ClassVariableId&quot;, 001);\r\n    \r\n    ModelClassname result = (ModelClassname)q.list().get(0);\r\n    Integer i = result.getClassVariableName();\r\n    result.setClassVariableName(i+10);\r\n    session.update(result);\r\n    \r\nWith Regards,\r\n  Lavanyavathi.Bharathidhasan","title":"Hibernate update query","body":"<p>Please try this one</p>\n\n<pre><code>Query q = session.createQuery(\"from ModelClassname where ClassVariableId= :ClassVariableId\");\nq.setParameter(\"ClassVariableId\", 001);\n\nModelClassname result = (ModelClassname)q.list().get(0);\nInteger i = result.getClassVariableName();\nresult.setClassVariableName(i+10);\nsession.update(result);\n</code></pre>\n\n<p>With Regards,\n  Lavanyavathi.Bharathidhasan</p>\n"},{"tags":[],"owner":{"account_id":24323906,"reputation":128,"user_id":18263761,"display_name":"ilia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663630392,"creation_date":1663630392,"answer_id":73780212,"question_id":7585212,"body_markdown":" HQL will help you here with bringing object to you with its session&#39;s help that you can update easily. \r\n\r\n      //id of employee that you want to update\r\n     int updatedEmployeeID = 6; \r\n        \r\n        //exact employee that you want to update\r\n        Employee updateEmployee = session.get(Employee.class, updatedEmployeeID);\r\n     \r\n       //for debug to see is that exact data that you want to update\r\n        System.out.println(&quot;Employee before update: &quot;+updateEmployee); \r\n           \r\n    //basically we use setter to update from the @Entity class\r\n      updateEmployee.setCompany(&quot;Arthur House&quot;);\r\n             \r\n     //commit\r\n     session.getTransaction().commit();\r\n\r\n\r\n","title":"Hibernate update query","body":"<p>HQL will help you here with bringing object to you with its session's help that you can update easily.</p>\n<pre><code>  //id of employee that you want to update\n int updatedEmployeeID = 6; \n    \n    //exact employee that you want to update\n    Employee updateEmployee = session.get(Employee.class, updatedEmployeeID);\n \n   //for debug to see is that exact data that you want to update\n    System.out.println(&quot;Employee before update: &quot;+updateEmployee); \n       \n//basically we use setter to update from the @Entity class\n  updateEmployee.setCompany(&quot;Arthur House&quot;);\n         \n //commit\n session.getTransaction().commit();\n</code></pre>\n"}],"owner":{"account_id":484421,"reputation":5836,"user_id":900081,"accept_rate":58,"display_name":"D&#233;bora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46293,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":6,"score":7,"last_activity_date":1663630392,"creation_date":1317221799,"question_id":7585212,"body_markdown":"Any one tell me the HQL for this SQL code\r\n\r\n&gt;UPDATE ModelClassname SET ClassVariablename=ClassVariablename+10 WHERE ClassVariableId=001;","title":"Hibernate update query","body":"<p>Any one tell me the HQL for this SQL code</p>\n\n<blockquote>\n  <p>UPDATE ModelClassname SET ClassVariablename=ClassVariablename+10 WHERE ClassVariableId=001;</p>\n</blockquote>\n"},{"tags":["java","byte"],"comments":[{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":7,"creation_date":1379251408,"post_id":18812864,"comment_id":27746784,"body_markdown":"neither of these work","body":"neither of these work"},{"owner":{"account_id":1126136,"reputation":17393,"user_id":1113392,"display_name":"A4L"},"score":1,"creation_date":1379251556,"post_id":18812864,"comment_id":27746825,"body_markdown":"see the docs for [primitives](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html) in java","body":"see the docs for <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">primitives</a> in java"},{"owner":{"account_id":2925966,"reputation":469,"user_id":2507266,"accept_rate":83,"display_name":"Jeremy Johnson"},"score":0,"creation_date":1379252479,"post_id":18812864,"comment_id":27747088,"body_markdown":"In Java, a byte is restricted to -128 to 127 because it is considered a signed primitive. You cannot cast an integer into a byte because primitives can only move up in hierarchy, not down.","body":"In Java, a byte is restricted to -128 to 127 because it is considered a signed primitive. You cannot cast an integer into a byte because primitives can only move up in hierarchy, not down."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":1,"up_vote_count":59,"is_accepted":true,"score":58,"last_activity_date":1663629090,"creation_date":1379251431,"answer_id":18812878,"question_id":18812864,"body_markdown":"The Java `byte` type is an 8 bit signed integral type with values in the range `-128` to `+127`.  The literal `0xff` represents `+255` which is outside of that range.\r\n\r\nIn the first example, you are attempting to assign a value that is out of range to a `byte`.  That is a compilation error.\r\n\r\nIn the second example, the `(byte)` cast is performing an explicit narrowing conversion, that removes the high order bits of the integer literal ... giving you the value `-127` in your `byte` variable.\r\n\r\n-----------------\r\n\r\nIn fact, the situation with the first example is a bit more complicated than that.  Consider this:\r\n\r\n    byte a = 1;         // OK\r\n    int i = 1;\r\n    byte b = i;         // Compilation error\r\n    byte c = (byte) i;  // OK\r\n\r\nUnder normal circumstances, you cannot assign an `int` to a `byte` without a cast.  However, if the value are assigning is a literal, and the literal value is within the range of the target type, the Java language permits the assignment *without* a cast.  The literal&#39;s value is implicitly narrowed from `int` to `byte`.\r\n\r\nThis is described in [JLS &#167;5.2][1] which defines the conversions that may be performed in an assignment:\r\n\r\n&gt; *&quot;A narrowing primitive conversion may be used if the type of the variable is byte, short, or char, and the value of the constant expression is representable in the type of the variable.&quot;*\r\n\r\nAnd as you can see, this doesn&#39;t *just* apply to literals.  It applies to all (compile-time) constant expressions!\r\n\r\n----------------\r\n\r\n**FOLLOW-UP**\r\n\r\n&gt; I read the answer claiming that `0xff` is `255`, how so? Is it not `1111 1111`, What makes `0xff`, `-128` or `255` or anything for that matter?\r\n\r\nThe literal `0xff` is an *integer literal*.  It has type `int`.  The `int` value of the literal `0xff` is actually `0000 0000 0000 0000 0000 0000 1111 1111` in binary or +255 in decimal.  By contrast, the integer value `-128` has the bit pattern `1111 1111 1111 1111 1111 1111 1000 0000`.\r\n\r\n&gt; Why will it not just treat it as `1111 1111` and not the 8 bits of that byte to 1?\r\n\r\nBecause `0xff` is an *integer literal*; i.e. 32 bits.  It is not an 8-bit literal, because 8-bit literals do not exist in Java.  As [JLS &#167;3.10.1][2] says:\r\n\r\n&gt; *&quot;An integer literal is of type `long` if it is suffixed with an ASCII letter `L` or `l` (ell); otherwise it is of type `int` ([&#167;4.2.1][3]).&quot;*\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2\r\n  [2]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1\r\n  [3]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.1","title":"Why will byte not take 0xff in java?","body":"<p>The Java <code>byte</code> type is an 8 bit signed integral type with values in the range <code>-128</code> to <code>+127</code>.  The literal <code>0xff</code> represents <code>+255</code> which is outside of that range.</p>\n<p>In the first example, you are attempting to assign a value that is out of range to a <code>byte</code>.  That is a compilation error.</p>\n<p>In the second example, the <code>(byte)</code> cast is performing an explicit narrowing conversion, that removes the high order bits of the integer literal ... giving you the value <code>-127</code> in your <code>byte</code> variable.</p>\n<hr />\n<p>In fact, the situation with the first example is a bit more complicated than that.  Consider this:</p>\n<pre><code>byte a = 1;         // OK\nint i = 1;\nbyte b = i;         // Compilation error\nbyte c = (byte) i;  // OK\n</code></pre>\n<p>Under normal circumstances, you cannot assign an <code>int</code> to a <code>byte</code> without a cast.  However, if the value are assigning is a literal, and the literal value is within the range of the target type, the Java language permits the assignment <em>without</em> a cast.  The literal's value is implicitly narrowed from <code>int</code> to <code>byte</code>.</p>\n<p>This is described in <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2\" rel=\"nofollow noreferrer\">JLS §5.2</a> which defines the conversions that may be performed in an assignment:</p>\n<blockquote>\n<p><em>&quot;A narrowing primitive conversion may be used if the type of the variable is byte, short, or char, and the value of the constant expression is representable in the type of the variable.&quot;</em></p>\n</blockquote>\n<p>And as you can see, this doesn't <em>just</em> apply to literals.  It applies to all (compile-time) constant expressions!</p>\n<hr />\n<p><strong>FOLLOW-UP</strong></p>\n<blockquote>\n<p>I read the answer claiming that <code>0xff</code> is <code>255</code>, how so? Is it not <code>1111 1111</code>, What makes <code>0xff</code>, <code>-128</code> or <code>255</code> or anything for that matter?</p>\n</blockquote>\n<p>The literal <code>0xff</code> is an <em>integer literal</em>.  It has type <code>int</code>.  The <code>int</code> value of the literal <code>0xff</code> is actually <code>0000 0000 0000 0000 0000 0000 1111 1111</code> in binary or +255 in decimal.  By contrast, the integer value <code>-128</code> has the bit pattern <code>1111 1111 1111 1111 1111 1111 1000 0000</code>.</p>\n<blockquote>\n<p>Why will it not just treat it as <code>1111 1111</code> and not the 8 bits of that byte to 1?</p>\n</blockquote>\n<p>Because <code>0xff</code> is an <em>integer literal</em>; i.e. 32 bits.  It is not an 8-bit literal, because 8-bit literals do not exist in Java.  As <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1\" rel=\"nofollow noreferrer\">JLS §3.10.1</a> says:</p>\n<blockquote>\n<p><em>&quot;An integer literal is of type <code>long</code> if it is suffixed with an ASCII letter <code>L</code> or <code>l</code> (ell); otherwise it is of type <code>int</code> (<a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.1\" rel=\"nofollow noreferrer\">§4.2.1</a>).&quot;</em></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1394089,"reputation":40460,"user_id":1424875,"accept_rate":86,"display_name":"nanofarad"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1442431640,"creation_date":1379251443,"answer_id":18812879,"question_id":18812864,"body_markdown":"`0xff` is 255. While this does fit into an 8-bit *unsigned* integer, `byte` is signed(-128 to 127). The narrowing will remove the high bits and fit 8 into 8 without regard for sign.","title":"Why will byte not take 0xff in java?","body":"<p><code>0xff</code> is 255. While this does fit into an 8-bit <em>unsigned</em> integer, <code>byte</code> is signed(-128 to 127). The narrowing will remove the high bits and fit 8 into 8 without regard for sign.</p>\n"},{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1494599982,"creation_date":1379251569,"answer_id":18812899,"question_id":18812864,"body_markdown":"`0xff` is a [hexadecimal representation][1] of a number. In other words the number is base 16.\r\n\r\n`f = 15` in hex.\r\n\r\nThe value is equal to\r\n \r\n    15 * 16^1 + 15 * 16^0 = 255\r\n\r\nThis is an [integer literal][2] (uses 4 bytes), which exceeds `byte`&#39;s value range. \r\n\r\nNeither of the two examples you&#39;ve posted will compile as neither fits into `byte`&#39;s value range of `-128 to 127`. You can read about primitive type value ranges [here][3].\r\n\r\nThis will work\r\n\r\n    byte a = (byte)0xff; \r\n    System.out.println(a);\r\n\r\nand print `-1`, because a byte narrowing conversion of `255` is `-1`.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Hexadecimal\r\n  [2]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1\r\n  [3]: http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html","title":"Why will byte not take 0xff in java?","body":"<p><code>0xff</code> is a <a href=\"http://en.wikipedia.org/wiki/Hexadecimal\" rel=\"nofollow noreferrer\">hexadecimal representation</a> of a number. In other words the number is base 16.</p>\n\n<p><code>f = 15</code> in hex.</p>\n\n<p>The value is equal to</p>\n\n<pre><code>15 * 16^1 + 15 * 16^0 = 255\n</code></pre>\n\n<p>This is an <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1\" rel=\"nofollow noreferrer\">integer literal</a> (uses 4 bytes), which exceeds <code>byte</code>'s value range. </p>\n\n<p>Neither of the two examples you've posted will compile as neither fits into <code>byte</code>'s value range of <code>-128 to 127</code>. You can read about primitive type value ranges <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>This will work</p>\n\n<pre><code>byte a = (byte)0xff; \nSystem.out.println(a);\n</code></pre>\n\n<p>and print <code>-1</code>, because a byte narrowing conversion of <code>255</code> is <code>-1</code>.</p>\n"},{"tags":[],"owner":{"account_id":3300764,"reputation":150,"user_id":2777012,"display_name":"Philipp Seeger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1379252149,"creation_date":1379252149,"answer_id":18813006,"question_id":18812864,"body_markdown":"First, if I try to run your code, the 2. case doesn&#39;t work either. You cast 0xff to the primitive datatype int (which has 32 bit) and want to store it in a &#39;byte&#39; with only 8bit. Java treats your first case as int too, resulting in the same problem.\r\n\r\nBecause the java &#39;byte&#39; type is an 8-bit signed integer value (from -128 to 127), to output / print the byte as hex, you can use Integer.toHexString(&#39;the primitive byte&#39; &amp; 0xFF) where &#39; &amp; 0xFF &#39; is a bitmask to take into account that Integer uses a 32bit int and byte uses 8bit.\r\n\r\n        byte myByte = (byte)0xff;\r\n        System.out.println(Integer.toHexString(myByte &amp; 0xFF));\r\n\r\nThis outputs:\r\n\r\n    ff","title":"Why will byte not take 0xff in java?","body":"<p>First, if I try to run your code, the 2. case doesn't work either. You cast 0xff to the primitive datatype int (which has 32 bit) and want to store it in a 'byte' with only 8bit. Java treats your first case as int too, resulting in the same problem.</p>\n\n<p>Because the java 'byte' type is an 8-bit signed integer value (from -128 to 127), to output / print the byte as hex, you can use Integer.toHexString('the primitive byte' &amp; 0xFF) where ' &amp; 0xFF ' is a bitmask to take into account that Integer uses a 32bit int and byte uses 8bit.</p>\n\n<pre><code>    byte myByte = (byte)0xff;\n    System.out.println(Integer.toHexString(myByte &amp; 0xFF));\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>ff\n</code></pre>\n"}],"owner":{"account_id":943531,"reputation":3200,"user_id":971222,"accept_rate":77,"display_name":"vikkyhacks"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31796,"favorite_count":0,"down_vote_count":1,"up_vote_count":32,"accepted_answer_id":18812878,"answer_count":4,"score":31,"last_activity_date":1663629090,"creation_date":1379251303,"question_id":18812864,"body_markdown":"Why will java compiler not let me put `0xff` into a `byte`, `0xff` is 8 bits long which is just the size of `byte` datatype.\r\n&lt;br&gt;&lt;br&gt; *Can someone explain why 1 works and why 2 does not ?*\r\n\r\n    class a\r\n    {\r\n            public static void main(String[] args)\r\n            {\r\n                    // 1 :: results in error\r\n                    byte a = 0xff;          \r\n                    System.out.printf(&quot;%x\\n&quot;,a);\r\n    \r\n                    //2 :: works fine\r\n                    byte a = (int)0xff              \r\n                    System.out.printf(&quot;%x\\n&quot;,a);\r\n            }\r\n    }\r\n\r\n**EDIT** I read the answer claiming that 0xff is 255, how so ? Is it not `1111 1111`, What makes 0xff, -128 or 255 or anything for that matter. Why will it not just treat it as `1111 1111` and not the 8 bits of that byte to 1.","title":"Why will byte not take 0xff in java?","body":"<p>Why will java compiler not let me put <code>0xff</code> into a <code>byte</code>, <code>0xff</code> is 8 bits long which is just the size of <code>byte</code> datatype.\n<br><br> <em>Can someone explain why 1 works and why 2 does not ?</em></p>\n\n<pre><code>class a\n{\n        public static void main(String[] args)\n        {\n                // 1 :: results in error\n                byte a = 0xff;          \n                System.out.printf(\"%x\\n\",a);\n\n                //2 :: works fine\n                byte a = (int)0xff              \n                System.out.printf(\"%x\\n\",a);\n        }\n}\n</code></pre>\n\n<p><strong>EDIT</strong> I read the answer claiming that 0xff is 255, how so ? Is it not <code>1111 1111</code>, What makes 0xff, -128 or 255 or anything for that matter. Why will it not just treat it as <code>1111 1111</code> and not the 8 bits of that byte to 1.</p>\n"},{"tags":["java","spring","micrometer"],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663628568,"creation_date":1663628568,"answer_id":73780060,"question_id":73769558,"body_markdown":"You can&#39;t really put dynamic things into annotations since based on the Java specs, annotation parameters needs to be constant. I don&#39;t think there is support for this in Boot, but I think there are two-three ways to make this work.\r\n\r\n 1. Spring Boot does this for you automatically, check the `http.server.request` metric, it will contain the uri that will separate your controller endpoints.\r\n\r\n 2. Instead of renaming the metric, you can add a tag that will separate your controllers, take a look at `WebMvcTagsContributor` (also `WebMvcTagsProvider`).\r\n\r\n 3. If you really want to rename the metric, take a look at Micrometer&#39;s [`MeterFilter`](https://micrometer.io/docs/concepts#_transforming_metrics) first. It lets you rename meters and add/remove/modify tags. You can write a `MeterFilter` that renames all of the metrics that&#39;s name `startsWith` `generic_controller_*`. You can use the tags that are currently there for the naming but you can also use the `WebMvcTagsContributor` to add new tags as needed.\r\n\r\nI&#39;m not recommending separating the controllers in the metric name but I recommend doing it in the tags. Separating controllers in the name will make it harder to aggregate metrics across your controllers, e.g.: show me all of the errors for all of my controllers or show me all of the errors for all of the `GET` calls, etc.","title":"Spring Boot Micrometer : timing abstract controller with dynamic metric name","body":"<p>You can't really put dynamic things into annotations since based on the Java specs, annotation parameters needs to be constant. I don't think there is support for this in Boot, but I think there are two-three ways to make this work.</p>\n<ol>\n<li><p>Spring Boot does this for you automatically, check the <code>http.server.request</code> metric, it will contain the uri that will separate your controller endpoints.</p>\n</li>\n<li><p>Instead of renaming the metric, you can add a tag that will separate your controllers, take a look at <code>WebMvcTagsContributor</code> (also <code>WebMvcTagsProvider</code>).</p>\n</li>\n<li><p>If you really want to rename the metric, take a look at Micrometer's <a href=\"https://micrometer.io/docs/concepts#_transforming_metrics\" rel=\"nofollow noreferrer\"><code>MeterFilter</code></a> first. It lets you rename meters and add/remove/modify tags. You can write a <code>MeterFilter</code> that renames all of the metrics that's name <code>startsWith</code> <code>generic_controller_*</code>. You can use the tags that are currently there for the naming but you can also use the <code>WebMvcTagsContributor</code> to add new tags as needed.</p>\n</li>\n</ol>\n<p>I'm not recommending separating the controllers in the metric name but I recommend doing it in the tags. Separating controllers in the name will make it harder to aggregate metrics across your controllers, e.g.: show me all of the errors for all of my controllers or show me all of the errors for all of the <code>GET</code> calls, etc.</p>\n"}],"owner":{"account_id":4723263,"reputation":167,"user_id":3820633,"accept_rate":17,"display_name":"robynico"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":507,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663628568,"creation_date":1663570843,"question_id":73769558,"body_markdown":"We have an abstract generic controller for commons methods :\r\n\r\n```java\r\npublic abstract class GenericController&lt;T&gt; {\r\n\r\n    @Timed(value = &quot;generic_controller_get_one&quot;, description = &quot;Time taken to getOne&quot;)\r\n    public T getOne(ID id) {\r\n    }\r\n\r\n    @Timed(value = &quot;generic_controller_search&quot;, description = &quot;Time taken to search&quot;)\r\n    public Page&lt;T&gt; search (int page, int size) {\r\n    }\r\n}\r\n```\r\n\r\nAn then implemented controllers :\r\n\r\n```java\r\n@RestController\r\npublic class ModelAController extends GenericController&lt;ModelA&gt; {\r\n\r\n}\r\n```\r\n\r\n```java\r\n@RestController\r\npublic class ModelBController extends GenericController&lt;ModelB&gt; {\r\n\r\n}\r\n```\r\n\r\n# Question :\r\n\r\nIs there a way to time implemented controller with a dynamic metric name like `modela_controller_search` ?\r\n\r\nCurrently all controllers are timed with `generic_controller_*` metric name.","title":"Spring Boot Micrometer : timing abstract controller with dynamic metric name","body":"<p>We have an abstract generic controller for commons methods :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class GenericController&lt;T&gt; {\n\n    @Timed(value = &quot;generic_controller_get_one&quot;, description = &quot;Time taken to getOne&quot;)\n    public T getOne(ID id) {\n    }\n\n    @Timed(value = &quot;generic_controller_search&quot;, description = &quot;Time taken to search&quot;)\n    public Page&lt;T&gt; search (int page, int size) {\n    }\n}\n</code></pre>\n<p>An then implemented controllers :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class ModelAController extends GenericController&lt;ModelA&gt; {\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class ModelBController extends GenericController&lt;ModelB&gt; {\n\n}\n</code></pre>\n<h1>Question :</h1>\n<p>Is there a way to time implemented controller with a dynamic metric name like <code>modela_controller_search</code> ?</p>\n<p>Currently all controllers are timed with <code>generic_controller_*</code> metric name.</p>\n"},{"tags":["java","jframe","jpanel","jlayeredpane"],"comments":[{"owner":{"account_id":7405785,"reputation":2672,"user_id":5634769,"display_name":"gpasch"},"score":0,"creation_date":1554398153,"post_id":55512472,"comment_id":97747548,"body_markdown":"i dont know the jay-layer guy will be right with you","body":"i dont know the jay-layer guy will be right with you"}],"answers":[{"tags":[],"owner":{"account_id":13219126,"reputation":9,"user_id":9546541,"display_name":"Martin Daniel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554487477,"creation_date":1554487477,"answer_id":55541114,"question_id":55512472,"body_markdown":"Set all sizes before determining the layout manager.\r\n\r\nAlso call your method last (after you set panel visible at the end. )","title":"why won&#39;t my object show in a frame although I work with a JLayeredpane in Java?","body":"<p>Set all sizes before determining the layout manager.</p>\n\n<p>Also call your method last (after you set panel visible at the end. )</p>\n"}],"owner":{"account_id":14553929,"reputation":9,"user_id":10512006,"display_name":"T.F.Berkers"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663628567,"creation_date":1554370262,"question_id":55512472,"body_markdown":"I currently am making a maze game. The player is finished and the map works as well. I now have the problem where I can get the panel which includes the map into my frame, but I cannot get the player above the map. When I use a JLayeredPane the player won&#39;t show and when I don&#39;t use it my player is underneath the map. I have the following classes: \r\n\r\nMy class where I make the map and the frame: \r\n\r\n     import javax.swing.*;\r\n        import java.awt.*;\r\n    \r\n       public class Speelveld extends JFrame {\r\n            private int x = 0;\r\n            private int y = 0;\r\n            private Speler speler;\r\n            private JPanel panel;\r\n            private JLayeredPane layeredPane;\r\n    \r\n            private int[][] map = {\r\n                    {5, 5, 3, 3, 3, 5, 0, 5, 0, 5},\r\n                    {5, 5, 3, 0, 0, 5, 4, 5, 0, 5},\r\n                    {5, 1, 3, 4, 0, 5, 5, 0, 0, 5},\r\n                    {0, 3, 3, 5, 6, 5, 0, 5, 0, 0},\r\n                    {5, 3, 3, 0, 0, 6, 0, 0, 5, 0},\r\n                    {5, 5, 5, 0, 0, 5, 0, 0, 0, 0},\r\n                    {5, 4, 5, 5, 4, 5, 0, 5, 0, 0},\r\n                    {0, 5, 0, 0, 5, 0, 5, 0, 0, 0},\r\n                    {0, 4, 6, 0, 5, 0, 0, 0, 0, 6},\r\n                    {0, 0, 6, 0, 0, 0, 0, 0, 5, 2}\r\n            };\r\n    \r\n        private Vakje[][] vakjes = new Vakje[10][10];\r\n    \r\n    \r\n            public Speelveld() {\r\n                createComponents();\r\n                setTitle(&quot;Sleutel Barricade&quot;);\r\n                setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n            }\r\n    \r\n            public void createComponents() {\r\n                panel = new JPanel();\r\n                speler = new Speler();\r\n                layeredPane = getLayeredPane();\r\n                this.setSize(400,400);\r\n                vakjesAanmaken();\r\n                setLocationRelativeTo(null);\r\n                panel.setLayout(new GridLayout(10,10,1,1));\r\n                panel.setSize(300,300);\r\n                layeredPane.add(panel, new Integer(1));\r\n                layeredPane.add(speler, new Integer(5));\r\n    \r\n                this.setVisible(true);\r\n    \r\n            }\r\n    \r\n    \r\n            public void vakjesAanmaken() {\r\n                int X = 0;\r\n                int Y = 0;\r\n    \r\n                for (int i = 0; i &lt; map.length; i++) {\r\n                    for (int j = 0; j &lt; map[0].length; j++) {\r\n                        Vakje vakje;\r\n                        switch (map[i][j]) {\r\n                            case 0 :\r\n                                vakje = new Barricade(20,X ,Y);\r\n                                vakjes[i][j] = vakje;\r\n                                break;\r\n                            case 1:\r\n                                vakje = new Sleutel(20, X,Y);\r\n                                vakjes[i][j] = vakje;\r\n                                break;\r\n                            case 2:\r\n                                vakje = new Eindveld(X,Y);\r\n                                vakjes[i][j] = vakje;\r\n                                break;\r\n                            case 3:\r\n                                vakje = new DichtVakje(X,Y);\r\n                                vakjes[i][j] = vakje;\r\n                                break;\r\n                            default:\r\n                                vakje = new LeegVakje(X,Y);\r\n                                vakjes[i][j] = vakje;\r\n    \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            public void paint(Graphics g){\r\n                super.paint(g);\r\n                g.translate(50,50);\r\n                for (int i = 0; i &lt; vakjes.length; i++) {\r\n                    for (int j = 0; j &lt;vakjes[0].length ; j++) {\r\n                        panel.add(vakjes[i][j]);\r\n                    }\r\n                }\r\n            }\r\n    \r\n            public boolean mogelijkeStapRecht(int X,int Y){\r\n                if(X != 10){\r\n                    if (map[Y][X + 1] != 3){\r\n                        return true;\r\n                    }\r\n                    else{\r\n                        return false;\r\n                    }\r\n                }\r\n                else{\r\n                    return false;\r\n                }\r\n            }\r\n        public boolean mogelijkeStapLinks(int X,int Y){\r\n            if(X != 0){\r\n                if (map[Y][X - 1] != 3){\r\n                    return true;\r\n                }\r\n                else{\r\n                    return false;\r\n                }\r\n            }\r\n            else{\r\n                return false;\r\n            }\r\n        }\r\n        public boolean mogelijkeStapOmhoog(int X,int Y){\r\n            if(y != 0){\r\n                if (map[Y-1][X] != 3){\r\n                    return true;\r\n                }\r\n                else{\r\n                    return false;\r\n                }\r\n            }\r\n            else{\r\n                return false;\r\n            }\r\n        }\r\n        public boolean mogelijkeStapOmlaag(int X,int Y){\r\n            if(X != 10){\r\n                if (map[Y + 1][X] != 3){\r\n                    return true;\r\n                }\r\n                else{\r\n                    return false;\r\n                }\r\n            }\r\n            else{\r\n                return false;\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nMy class where I make the Player: \r\n\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.KeyAdapter;\r\n    import java.awt.event.KeyEvent;\r\n    import java.awt.image.BufferedImage;\r\n    \r\n    public class Speler extends JComponent {\r\n        Speelveld speelveld;\r\n        private int zak;\r\n        private int XCoordinaat;\r\n        private  int YCoordinaat;\r\n        private int dx;\r\n        private int dy;\r\n        private int x = 0;\r\n        private int y = 0;\r\n        Image square = new BufferedImage(30, 30, BufferedImage.TYPE_INT_RGB);\r\n    \r\n    \r\n    \r\n        public Speler(){\r\n            addKeyListener (new KeyAdapter()\r\n            {\r\n                public void keyPressed(KeyEvent e)\r\n                {\r\n                    int key = e.getKeyCode();\r\n                    if (key == KeyEvent.VK_LEFT) dx -= 30;\r\n                    if (key == KeyEvent.VK_RIGHT) dx += 30;\r\n                    if (key == KeyEvent.VK_UP) dy -= 30;\r\n                    if (key == KeyEvent.VK_DOWN) dy += 30;\r\n                    repaint();\r\n                }\r\n            });\r\n            initVeld();\r\n        }\r\n        void initVeld()\r\n        {\r\n            setFocusable(true);\r\n        }\r\n    \r\n    \r\n    \r\n        public void oppakkenControleren(Sleutel sleutel) {\r\n            if (YCoordinaat == sleutel.getYCoordinaat() &amp;&amp; XCoordinaat == sleutel.getXCoordinaat()){\r\n                zak = sleutel.getPincode();\r\n            }\r\n        }\r\n    \r\n        public int getXCoordinaat(){\r\n            return XCoordinaat;\r\n        }\r\n    \r\n        public int getYCoordinaat(){\r\n            return YCoordinaat;\r\n        }\r\n    \r\n        public void setXCoordinaat(int XCoordinaat) {\r\n            this.XCoordinaat = XCoordinaat;\r\n        }\r\n    \r\n        public void setYCoordinaat(int YCoordinaat) {\r\n            this.YCoordinaat = YCoordinaat;\r\n        }\r\n    \r\n        public void paintComponent(Graphics g){\r\n            super.paintComponent(g);\r\n            drawSquare(g);\r\n        }\r\n        public void drawSquare(Graphics g)\r\n        {\r\n            Graphics2D g2d = (Graphics2D) g;\r\n            g2d.drawImage(square, dx + getXCoordinaat(), dy + getYCoordinaat(), this);\r\n        }\r\n    }\r\n\r\n","title":"why won&#39;t my object show in a frame although I work with a JLayeredpane in Java?","body":"<p>I currently am making a maze game. The player is finished and the map works as well. I now have the problem where I can get the panel which includes the map into my frame, but I cannot get the player above the map. When I use a JLayeredPane the player won't show and when I don't use it my player is underneath the map. I have the following classes:</p>\n<p>My class where I make the map and the frame:</p>\n<pre><code> import javax.swing.*;\n    import java.awt.*;\n\n   public class Speelveld extends JFrame {\n        private int x = 0;\n        private int y = 0;\n        private Speler speler;\n        private JPanel panel;\n        private JLayeredPane layeredPane;\n\n        private int[][] map = {\n                {5, 5, 3, 3, 3, 5, 0, 5, 0, 5},\n                {5, 5, 3, 0, 0, 5, 4, 5, 0, 5},\n                {5, 1, 3, 4, 0, 5, 5, 0, 0, 5},\n                {0, 3, 3, 5, 6, 5, 0, 5, 0, 0},\n                {5, 3, 3, 0, 0, 6, 0, 0, 5, 0},\n                {5, 5, 5, 0, 0, 5, 0, 0, 0, 0},\n                {5, 4, 5, 5, 4, 5, 0, 5, 0, 0},\n                {0, 5, 0, 0, 5, 0, 5, 0, 0, 0},\n                {0, 4, 6, 0, 5, 0, 0, 0, 0, 6},\n                {0, 0, 6, 0, 0, 0, 0, 0, 5, 2}\n        };\n\n    private Vakje[][] vakjes = new Vakje[10][10];\n\n\n        public Speelveld() {\n            createComponents();\n            setTitle(&quot;Sleutel Barricade&quot;);\n            setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        }\n\n        public void createComponents() {\n            panel = new JPanel();\n            speler = new Speler();\n            layeredPane = getLayeredPane();\n            this.setSize(400,400);\n            vakjesAanmaken();\n            setLocationRelativeTo(null);\n            panel.setLayout(new GridLayout(10,10,1,1));\n            panel.setSize(300,300);\n            layeredPane.add(panel, new Integer(1));\n            layeredPane.add(speler, new Integer(5));\n\n            this.setVisible(true);\n\n        }\n\n\n        public void vakjesAanmaken() {\n            int X = 0;\n            int Y = 0;\n\n            for (int i = 0; i &lt; map.length; i++) {\n                for (int j = 0; j &lt; map[0].length; j++) {\n                    Vakje vakje;\n                    switch (map[i][j]) {\n                        case 0 :\n                            vakje = new Barricade(20,X ,Y);\n                            vakjes[i][j] = vakje;\n                            break;\n                        case 1:\n                            vakje = new Sleutel(20, X,Y);\n                            vakjes[i][j] = vakje;\n                            break;\n                        case 2:\n                            vakje = new Eindveld(X,Y);\n                            vakjes[i][j] = vakje;\n                            break;\n                        case 3:\n                            vakje = new DichtVakje(X,Y);\n                            vakjes[i][j] = vakje;\n                            break;\n                        default:\n                            vakje = new LeegVakje(X,Y);\n                            vakjes[i][j] = vakje;\n\n                    }\n                }\n            }\n        }\n\n        public void paint(Graphics g){\n            super.paint(g);\n            g.translate(50,50);\n            for (int i = 0; i &lt; vakjes.length; i++) {\n                for (int j = 0; j &lt;vakjes[0].length ; j++) {\n                    panel.add(vakjes[i][j]);\n                }\n            }\n        }\n\n        public boolean mogelijkeStapRecht(int X,int Y){\n            if(X != 10){\n                if (map[Y][X + 1] != 3){\n                    return true;\n                }\n                else{\n                    return false;\n                }\n            }\n            else{\n                return false;\n            }\n        }\n    public boolean mogelijkeStapLinks(int X,int Y){\n        if(X != 0){\n            if (map[Y][X - 1] != 3){\n                return true;\n            }\n            else{\n                return false;\n            }\n        }\n        else{\n            return false;\n        }\n    }\n    public boolean mogelijkeStapOmhoog(int X,int Y){\n        if(y != 0){\n            if (map[Y-1][X] != 3){\n                return true;\n            }\n            else{\n                return false;\n            }\n        }\n        else{\n            return false;\n        }\n    }\n    public boolean mogelijkeStapOmlaag(int X,int Y){\n        if(X != 10){\n            if (map[Y + 1][X] != 3){\n                return true;\n            }\n            else{\n                return false;\n            }\n        }\n        else{\n            return false;\n        }\n    }\n\n}\n</code></pre>\n<p>My class where I make the Player:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.KeyAdapter;\nimport java.awt.event.KeyEvent;\nimport java.awt.image.BufferedImage;\n\npublic class Speler extends JComponent {\n    Speelveld speelveld;\n    private int zak;\n    private int XCoordinaat;\n    private  int YCoordinaat;\n    private int dx;\n    private int dy;\n    private int x = 0;\n    private int y = 0;\n    Image square = new BufferedImage(30, 30, BufferedImage.TYPE_INT_RGB);\n\n\n\n    public Speler(){\n        addKeyListener (new KeyAdapter()\n        {\n            public void keyPressed(KeyEvent e)\n            {\n                int key = e.getKeyCode();\n                if (key == KeyEvent.VK_LEFT) dx -= 30;\n                if (key == KeyEvent.VK_RIGHT) dx += 30;\n                if (key == KeyEvent.VK_UP) dy -= 30;\n                if (key == KeyEvent.VK_DOWN) dy += 30;\n                repaint();\n            }\n        });\n        initVeld();\n    }\n    void initVeld()\n    {\n        setFocusable(true);\n    }\n\n\n\n    public void oppakkenControleren(Sleutel sleutel) {\n        if (YCoordinaat == sleutel.getYCoordinaat() &amp;&amp; XCoordinaat == sleutel.getXCoordinaat()){\n            zak = sleutel.getPincode();\n        }\n    }\n\n    public int getXCoordinaat(){\n        return XCoordinaat;\n    }\n\n    public int getYCoordinaat(){\n        return YCoordinaat;\n    }\n\n    public void setXCoordinaat(int XCoordinaat) {\n        this.XCoordinaat = XCoordinaat;\n    }\n\n    public void setYCoordinaat(int YCoordinaat) {\n        this.YCoordinaat = YCoordinaat;\n    }\n\n    public void paintComponent(Graphics g){\n        super.paintComponent(g);\n        drawSquare(g);\n    }\n    public void drawSquare(Graphics g)\n    {\n        Graphics2D g2d = (Graphics2D) g;\n        g2d.drawImage(square, dx + getXCoordinaat(), dy + getYCoordinaat(), this);\n    }\n}\n</code></pre>\n"},{"tags":["java","math","methods"],"answers":[{"tags":[],"owner":{"account_id":9915041,"reputation":29,"user_id":7340256,"display_name":"Til"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663611105,"creation_date":1663611105,"answer_id":73777646,"question_id":73777485,"body_markdown":"Not sure if I understand your question, but in displayOutput you call computeTravelSpeedOne without any arguments, this might fail...","title":"JAVA Methods problem - Calculate speed of car trying to reach a certain distance at a certain time","body":"<p>Not sure if I understand your question, but in displayOutput you call computeTravelSpeedOne without any arguments, this might fail...</p>\n"}],"owner":{"account_id":26383091,"reputation":11,"user_id":20036028,"display_name":"Zaisk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1663627995,"creation_date":1663610148,"question_id":73777485,"body_markdown":"I was tasked to create a program that would calculate how fast you must go to reach a certain distance (miles per hour) at a certain time (in hours). You are supposed to consider a 5 minute break for every 100 miles. Also, the program has to be written using 4 methods and a main method. I already did a majority of the program but I don&#39;t know how to properly output my results. I am positive that I am doing something wrong with one of the methods but I don&#39;t know how to fix it. Heres what I have:\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class I95Machine {\r\n\r\n    public static void userMessage() {\r\n        System.out.println(&quot;Welcome to I95 Speed Machine&quot;);\r\n\r\n        System.out.println(&quot;You will have to supply:\\n+ The distance you want to travel, in miles\\n+ The time you have available, in hours&quot;);\r\n\r\n    }\r\n\r\n    public static double computeTravelSpeedOne(double inputDist, double inputTime) {\r\n        double stopTime, travelSpeed;\r\n        int timeQuotient;\r\n\r\n        timeQuotient = (int) (inputDist / 100);\r\n        stopTime = timeQuotient * 5;\r\n\r\n        if ((timeQuotient % 100) &gt; 0) {\r\n            stopTime += 5;\r\n        }\r\n\r\n        stopTime /= 60;\r\n\r\n        inputTime = inputTime - stopTime;\r\n\r\n        travelSpeed = inputDist / inputTime;\r\n\r\n        if (inputTime &gt; 0) {\r\n            return travelSpeed;\r\n        } else {\r\n            return 0.0;\r\n        }\r\n    }\r\n\r\n    public static double inputDistAndTime() {\r\n        Scanner keyboard = new Scanner(System.in);\r\n        double distNum = 0, timeNum = 0, distance, time;\r\n\r\n        System.out.print(&quot;Enter distance to travel : &quot;);\r\n            distNum = keyboard.nextDouble();\r\n                distance = distNum;\r\n        System.out.print(&quot;Enter time available     : &quot;);\r\n            timeNum = keyboard.nextDouble();\r\n                time = timeNum;\r\n\r\n        return computeTravelSpeedOne(distance, time);\r\n    }\r\n\r\n    public static void displayOutput(double travelSpeed) {\r\n        boolean speedLim = computeTravelSpeedOne() &gt; 65;\r\n\r\n        System.out.print(&quot;You will have to travel at &quot;);\r\n        System.out.println(computeTravelSpeedOne() + &quot; MPH&quot;);\r\n        System.out.print(&quot;Over the speed limit     : &quot;);\r\n        System.out.print(speedLim);\r\n\r\n    }\r\n\r\n\r\n    public static void main(String[] args) {\r\n        userMessage();\r\n        inputDistAndTime();\r\n        displayOutput();\r\n    }\r\n}\r\n```\r\n","title":"JAVA Methods problem - Calculate speed of car trying to reach a certain distance at a certain time","body":"<p>I was tasked to create a program that would calculate how fast you must go to reach a certain distance (miles per hour) at a certain time (in hours). You are supposed to consider a 5 minute break for every 100 miles. Also, the program has to be written using 4 methods and a main method. I already did a majority of the program but I don't know how to properly output my results. I am positive that I am doing something wrong with one of the methods but I don't know how to fix it. Heres what I have:</p>\n<pre><code>import java.util.Scanner;\n\npublic class I95Machine {\n\n    public static void userMessage() {\n        System.out.println(&quot;Welcome to I95 Speed Machine&quot;);\n\n        System.out.println(&quot;You will have to supply:\\n+ The distance you want to travel, in miles\\n+ The time you have available, in hours&quot;);\n\n    }\n\n    public static double computeTravelSpeedOne(double inputDist, double inputTime) {\n        double stopTime, travelSpeed;\n        int timeQuotient;\n\n        timeQuotient = (int) (inputDist / 100);\n        stopTime = timeQuotient * 5;\n\n        if ((timeQuotient % 100) &gt; 0) {\n            stopTime += 5;\n        }\n\n        stopTime /= 60;\n\n        inputTime = inputTime - stopTime;\n\n        travelSpeed = inputDist / inputTime;\n\n        if (inputTime &gt; 0) {\n            return travelSpeed;\n        } else {\n            return 0.0;\n        }\n    }\n\n    public static double inputDistAndTime() {\n        Scanner keyboard = new Scanner(System.in);\n        double distNum = 0, timeNum = 0, distance, time;\n\n        System.out.print(&quot;Enter distance to travel : &quot;);\n            distNum = keyboard.nextDouble();\n                distance = distNum;\n        System.out.print(&quot;Enter time available     : &quot;);\n            timeNum = keyboard.nextDouble();\n                time = timeNum;\n\n        return computeTravelSpeedOne(distance, time);\n    }\n\n    public static void displayOutput(double travelSpeed) {\n        boolean speedLim = computeTravelSpeedOne() &gt; 65;\n\n        System.out.print(&quot;You will have to travel at &quot;);\n        System.out.println(computeTravelSpeedOne() + &quot; MPH&quot;);\n        System.out.print(&quot;Over the speed limit     : &quot;);\n        System.out.print(speedLim);\n\n    }\n\n\n    public static void main(String[] args) {\n        userMessage();\n        inputDistAndTime();\n        displayOutput();\n    }\n}\n</code></pre>\n"},{"tags":["java","object-detection","google-mlkit"],"answers":[{"tags":[],"owner":{"account_id":18396529,"reputation":321,"user_id":13400836,"display_name":"Steven"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663367461,"creation_date":1663367461,"answer_id":73750844,"question_id":73738393,"body_markdown":"You are already at the right place.\r\nIn the following method \r\n\r\n&gt; protected void onSuccess(\r\n      @NonNull List&lt;DetectedObject&gt; results, @NonNull GraphicOverlay graphicOverlay) {\r\n\r\nYou should check the object&#39;s label&#39;s confidence, and only if the confidence is higher than threshold, you call\r\n&gt; graphicOverlay.add(new ObjectGraphic(graphicOverlay, object));","title":"Display Label with Minimum Threshold","body":"<p>You are already at the right place.\nIn the following method</p>\n<blockquote>\n<p>protected void onSuccess(\n@NonNull List results, @NonNull GraphicOverlay graphicOverlay) {</p>\n</blockquote>\n<p>You should check the object's label's confidence, and only if the confidence is higher than threshold, you call</p>\n<blockquote>\n<p>graphicOverlay.add(new ObjectGraphic(graphicOverlay, object));</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":20281343,"reputation":23,"user_id":14875035,"display_name":"jw-smc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663627623,"creation_date":1663627623,"answer_id":73779971,"question_id":73738393,"body_markdown":"# Solution #\r\nFigured it out and no changes are required for any other files. Turned out to be quite simple but I&#39;m just not familiar with java. Not sure if nesting for loops is the optimal solution but it works :/\r\n\r\n```java\r\n// ObjectDetectorProcessor.java\r\nimport com.google.mlkit.vision.objects.DetectedObject.Label;\r\n...\r\nprivate static final float CONFIDENCE_THRESHOLD = 0.5f;\r\n...\r\n// Before (right image)\r\n@Override\r\nprotected void onSuccess(\r\n    @NonNull List&lt;DetectedObject&gt; results, @NonNull GraphicOverlay graphicOverlay) {\r\n  for (DetectedObject object : results) {\r\n    graphicOverlay.add(new ObjectGraphic(graphicOverlay, object));\r\n  }\r\n}\r\n// After (left image)\r\nprotected void onSuccess(\r\n    @NonNull List&lt;DetectedObject&gt; results, @NonNull GraphicOverlay graphicOverlay) {\r\n  for (DetectedObject object : results) {\r\n    for (Label label : object.getLabels()) {\r\n      if (label.getConfidence() &lt; CONFIDENCE_THRESHOLD) {continue;}\r\n      else {graphicOverlay.add(new ObjectGraphic(graphicOverlay, object));}\r\n    }\r\n  }\r\n}\r\n```\r\n[![Before (right) and After (left)][1]][1]\r\nAdditionally, I found that the above results (removing just the label text, but not the boxes) can be reproduced with the following built-in method. Found in PreferenceUtils.java  of the mlkit vision-quickstart google sample. \r\nDirect link to method below:\r\n[https://developers.google.com/android/reference/com/google/mlkit/vision/objects/custom/CustomObjectDetectorOptions.Builder#public-customobjectdetectoroptions.builder-setclassificationconfidencethreshold-float-classificationconfidencethreshold](https://developers.google.com/android/reference/com/google/mlkit/vision/objects/custom/CustomObjectDetectorOptions.Builder#public-customobjectdetectoroptions.builder-setclassificationconfidencethreshold-float-classificationconfidencethreshold)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0ff0g.jpg","title":"Display Label with Minimum Threshold","body":"<h1>Solution</h1>\n<p>Figured it out and no changes are required for any other files. Turned out to be quite simple but I'm just not familiar with java. Not sure if nesting for loops is the optimal solution but it works :/</p>\n<pre class=\"lang-java prettyprint-override\"><code>// ObjectDetectorProcessor.java\nimport com.google.mlkit.vision.objects.DetectedObject.Label;\n...\nprivate static final float CONFIDENCE_THRESHOLD = 0.5f;\n...\n// Before (right image)\n@Override\nprotected void onSuccess(\n    @NonNull List&lt;DetectedObject&gt; results, @NonNull GraphicOverlay graphicOverlay) {\n  for (DetectedObject object : results) {\n    graphicOverlay.add(new ObjectGraphic(graphicOverlay, object));\n  }\n}\n// After (left image)\nprotected void onSuccess(\n    @NonNull List&lt;DetectedObject&gt; results, @NonNull GraphicOverlay graphicOverlay) {\n  for (DetectedObject object : results) {\n    for (Label label : object.getLabels()) {\n      if (label.getConfidence() &lt; CONFIDENCE_THRESHOLD) {continue;}\n      else {graphicOverlay.add(new ObjectGraphic(graphicOverlay, object));}\n    }\n  }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/0ff0g.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0ff0g.jpg\" alt=\"Before (right) and After (left)\" /></a>\nAdditionally, I found that the above results (removing just the label text, but not the boxes) can be reproduced with the following built-in method. Found in PreferenceUtils.java  of the mlkit vision-quickstart google sample.\nDirect link to method below:\n<a href=\"https://developers.google.com/android/reference/com/google/mlkit/vision/objects/custom/CustomObjectDetectorOptions.Builder#public-customobjectdetectoroptions.builder-setclassificationconfidencethreshold-float-classificationconfidencethreshold\" rel=\"nofollow noreferrer\">https://developers.google.com/android/reference/com/google/mlkit/vision/objects/custom/CustomObjectDetectorOptions.Builder#public-customobjectdetectoroptions.builder-setclassificationconfidencethreshold-float-classificationconfidencethreshold</a></p>\n"}],"owner":{"account_id":20281343,"reputation":23,"user_id":14875035,"display_name":"jw-smc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73779971,"answer_count":2,"score":0,"last_activity_date":1663627623,"creation_date":1663284976,"question_id":73738393,"body_markdown":"I&#39;m modifying a custom object detector based off this sample provided by google:\r\n[vision-quickstart](https://github.com/googlesamples/mlkit/tree/master/android/vision-quickstart)\r\nI&#39;d like to prevent displaying a detected object altogether if that object doesn&#39;t meet a specified confidence level. \r\n\r\n\r\n**Original**\r\n[![server part object detection][1]][1]\r\n\r\nThen I modified the code to delete the label text with the following:\r\n```java\r\n// ObjectGraphic.java\r\nprivate static final float CONFIDENCE_THRESHOLD = 0.50f;\r\n...\r\nfor (Label label : object.getLabels()) {\r\n  if (label.getConfidence() &lt; CONFIDENCE_THRESHOLD) {continue;}\r\n  canvas.drawText...\r\n````\r\n**Label Text Removed but not the bounding/label boxes**\r\n[![enter image description here][2]][2]\r\nObviously, this is one step in the right direction but not the final objective. \r\nHere&#39;s what I found so far:\r\n```java\r\n// ObjectDetectorProcessor.java\r\n\r\n  @Override\r\n  protected void onSuccess(\r\n      @NonNull List&lt;DetectedObject&gt; results, @NonNull GraphicOverlay graphicOverlay) {\r\n    for (DetectedObject object : results) {\r\n      graphicOverlay.add(new ObjectGraphic(graphicOverlay, object));\r\n      // commenting this preventing object overlays from being drawn\r\n      // possibly add graphicOverlay.remove() based on label.confidence, but how do I do that?\r\n    }\r\n  }\r\n```\r\n```java\r\n// GraphicOverlay.java\r\n  /** Adds a graphic to the overlay. */\r\n  public void add(Graphic graphic) {\r\n    synchronized (lock) {\r\n      graphics.add(graphic);\r\n    }\r\n  }\r\n\r\n  /** Removes a graphic from the overlay. */\r\n  public void remove(Graphic graphic) {\r\n    synchronized (lock) {\r\n      graphics.remove(graphic);\r\n    }\r\n    postInvalidate();\r\n  }\r\n```\r\nPlease let me know if I&#39;m not mentioning anything. I&#39;d be more than willing to provide additional information for your questions. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ucujj.jpg\r\n  [2]: https://i.stack.imgur.com/ZUdDH.jpg","title":"Display Label with Minimum Threshold","body":"<p>I'm modifying a custom object detector based off this sample provided by google:\n<a href=\"https://github.com/googlesamples/mlkit/tree/master/android/vision-quickstart\" rel=\"nofollow noreferrer\">vision-quickstart</a>\nI'd like to prevent displaying a detected object altogether if that object doesn't meet a specified confidence level.</p>\n<p><strong>Original</strong>\n<a href=\"https://i.stack.imgur.com/ucujj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ucujj.jpg\" alt=\"server part object detection\" /></a></p>\n<p>Then I modified the code to delete the label text with the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// ObjectGraphic.java\nprivate static final float CONFIDENCE_THRESHOLD = 0.50f;\n...\nfor (Label label : object.getLabels()) {\n  if (label.getConfidence() &lt; CONFIDENCE_THRESHOLD) {continue;}\n  canvas.drawText...\n</code></pre>\n<p><strong>Label Text Removed but not the bounding/label boxes</strong>\n<a href=\"https://i.stack.imgur.com/ZUdDH.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZUdDH.jpg\" alt=\"enter image description here\" /></a>\nObviously, this is one step in the right direction but not the final objective.\nHere's what I found so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// ObjectDetectorProcessor.java\n\n  @Override\n  protected void onSuccess(\n      @NonNull List&lt;DetectedObject&gt; results, @NonNull GraphicOverlay graphicOverlay) {\n    for (DetectedObject object : results) {\n      graphicOverlay.add(new ObjectGraphic(graphicOverlay, object));\n      // commenting this preventing object overlays from being drawn\n      // possibly add graphicOverlay.remove() based on label.confidence, but how do I do that?\n    }\n  }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// GraphicOverlay.java\n  /** Adds a graphic to the overlay. */\n  public void add(Graphic graphic) {\n    synchronized (lock) {\n      graphics.add(graphic);\n    }\n  }\n\n  /** Removes a graphic from the overlay. */\n  public void remove(Graphic graphic) {\n    synchronized (lock) {\n      graphics.remove(graphic);\n    }\n    postInvalidate();\n  }\n</code></pre>\n<p>Please let me know if I'm not mentioning anything. I'd be more than willing to provide additional information for your questions.</p>\n"},{"tags":["java","groovy","metrics","dropwizard","micrometer"],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663627205,"creation_date":1663627205,"answer_id":73779930,"question_id":73747224,"body_markdown":"I’m not 100% sure what you are doing but Micrometer has a `MeterRegistry` but you might be already aware of that.\r\nI don’t recommend writing metrics to logs but you can take a look at `LoggingMeterRegistry` if you really want to.","title":"Dropwizard to Micrometer migration (MetricRegistry &amp; ConsoleReporter)","body":"<p>I’m not 100% sure what you are doing but Micrometer has a <code>MeterRegistry</code> but you might be already aware of that.\nI don’t recommend writing metrics to logs but you can take a look at <code>LoggingMeterRegistry</code> if you really want to.</p>\n"}],"owner":{"account_id":1228866,"reputation":5887,"user_id":1193867,"display_name":"Aeonitis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":481,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663627205,"creation_date":1663342640,"question_id":73747224,"body_markdown":"I had an old project I am trying to migrate to micrometer that I previously set with Dropwizard metrics which essentially followed this getting started tutorial https://metrics.dropwizard.io/4.2.0/getting-started.html\r\n\r\nNaturally Everything else in my code has moved perfectly, all my other classes were similar, but it seemed two classes, MetricRegistry and ConsoleReporter are not part of the Micrometer family... And the code is identical to that tutorial link I just shared.\r\n\r\nAny advice or links to make the migration to micrometer for these two classes? I&#39;d like to change as little as possible in the process of course. Just two classes and the MetricRegistry meter function of Dropwizard https://javadoc.io/doc/io.dropwizard.metrics/metrics-core/4.1.0-rc2/com/codahale/metrics/MetricRegistry.html#meter-java.lang.String-com.codahale.metrics.MetricRegistry.MetricSupplier- as you can see in use for the tutorial too","title":"Dropwizard to Micrometer migration (MetricRegistry &amp; ConsoleReporter)","body":"<p>I had an old project I am trying to migrate to micrometer that I previously set with Dropwizard metrics which essentially followed this getting started tutorial <a href=\"https://metrics.dropwizard.io/4.2.0/getting-started.html\" rel=\"nofollow noreferrer\">https://metrics.dropwizard.io/4.2.0/getting-started.html</a></p>\n<p>Naturally Everything else in my code has moved perfectly, all my other classes were similar, but it seemed two classes, MetricRegistry and ConsoleReporter are not part of the Micrometer family... And the code is identical to that tutorial link I just shared.</p>\n<p>Any advice or links to make the migration to micrometer for these two classes? I'd like to change as little as possible in the process of course. Just two classes and the MetricRegistry meter function of Dropwizard <a href=\"https://javadoc.io/doc/io.dropwizard.metrics/metrics-core/4.1.0-rc2/com/codahale/metrics/MetricRegistry.html#meter-java.lang.String-com.codahale.metrics.MetricRegistry.MetricSupplier-\" rel=\"nofollow noreferrer\">https://javadoc.io/doc/io.dropwizard.metrics/metrics-core/4.1.0-rc2/com/codahale/metrics/MetricRegistry.html#meter-java.lang.String-com.codahale.metrics.MetricRegistry.MetricSupplier-</a> as you can see in use for the tutorial too</p>\n"},{"tags":["java","prometheus","micronaut","micrometer"],"comments":[{"owner":{"account_id":24603296,"reputation":624,"user_id":18505867,"display_name":"ShingJo"},"score":0,"creation_date":1663175078,"post_id":73720002,"comment_id":130179282,"body_markdown":"Maybe this guide can help: https://guides.micronaut.io/latest/micronaut-metrics-gradle-java.html","body":"Maybe this guide can help: <a href=\"https://guides.micronaut.io/latest/micronaut-metrics-gradle-java.html\" rel=\"nofollow noreferrer\">guides.micronaut.io/latest/micronaut-metrics-gradle-java.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":5413747,"reputation":373,"user_id":4309568,"accept_rate":40,"display_name":"Aarij Siddiqui"},"score":0,"creation_date":1663227165,"post_id":73720002,"comment_id":130190467,"body_markdown":"In the example you shared they are triggering it through scheduled annotation in a service. I want to do it when metrics endpoint (/prometheus) is called.","body":"In the example you shared they are triggering it through scheduled annotation in a service. I want to do it when metrics endpoint (/prometheus) is called."},{"owner":{"account_id":24603296,"reputation":624,"user_id":18505867,"display_name":"ShingJo"},"score":0,"creation_date":1663263082,"post_id":73720002,"comment_id":130203985,"body_markdown":"If you want to set a metric only when the Micronaut Metric Prometheus endpoint is call, you are going to have to create your own version of the endpoint (https://github.com/micronaut-projects/micronaut-micrometer/blob/master/micrometer-registry-prometheus/src/main/java/io/micronaut/configuration/metrics/micrometer/prometheus/management/PrometheusEndpoint.java) and `@Replace` on your class. (Not sure it will work, since I have never tried)","body":"If you want to set a metric only when the Micronaut Metric Prometheus endpoint is call, you are going to have to create your own version of the endpoint (<a href=\"https://github.com/micronaut-projects/micronaut-micrometer/blob/master/micrometer-registry-prometheus/src/main/java/io/micronaut/configuration/metrics/micrometer/prometheus/management/PrometheusEndpoint.java\" rel=\"nofollow noreferrer\">github.com/micronaut-projects/micronaut-micrometer/blob/mas&zwnj;&#8203;ter/&hellip;</a>) and <code>@Replace</code> on your class. (Not sure it will work, since I have never tried)"}],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663627108,"creation_date":1663627108,"answer_id":73779920,"question_id":73720002,"body_markdown":"`Gauge`s are queried every time the Prometheus registry is scraped (prometheus endpoint call).\r\nAlso `Gauge` supports providing your own state object and own method that fetches the current value, please see the docs: https://micrometer.io/docs/concepts#_gauge_fluent_builder\r\n\r\nIf you follow the example in the docs:\r\n```java\r\nGauge.builder(&quot;gauge&quot;, myObj, myObj::gaugeValue).register(registry);\r\n```\r\n\r\n`myObj.gaugeValue()` is called every time the prometheus endpoint is called.","title":"How to trigger Metrics calculation at the time of prometheus endpoint call","body":"<p><code>Gauge</code>s are queried every time the Prometheus registry is scraped (prometheus endpoint call).\nAlso <code>Gauge</code> supports providing your own state object and own method that fetches the current value, please see the docs: <a href=\"https://micrometer.io/docs/concepts#_gauge_fluent_builder\" rel=\"nofollow noreferrer\">https://micrometer.io/docs/concepts#_gauge_fluent_builder</a></p>\n<p>If you follow the example in the docs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Gauge.builder(&quot;gauge&quot;, myObj, myObj::gaugeValue).register(registry);\n</code></pre>\n<p><code>myObj.gaugeValue()</code> is called every time the prometheus endpoint is called.</p>\n"}],"owner":{"account_id":5413747,"reputation":373,"user_id":4309568,"accept_rate":40,"display_name":"Aarij Siddiqui"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":548,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73779920,"answer_count":1,"score":0,"last_activity_date":1663627108,"creation_date":1663171429,"question_id":73720002,"body_markdown":"I am trying to configure my Micronaut Application with Micrometer and Prometheus. I want to do some calculation at the time of prometheus endpoint call. Can someone guide me here?\r\n\r\nI tried to define a bean in Micronaut as follows, but it didn&#39;t get triggered and no metric with name SampleMetric was there:\r\n\r\n```\r\n@Prototype\r\npublic class MyBean {\r\n\r\n  @Inject\r\n  MeterRegistry registry;\r\n\r\n  public MyBean() {\r\n    Gauge.builder(&quot;SampleMetric&quot;, 12).register(registry);\r\n    // I also tried the following but that also didn&#39;t work\r\n    //registry.gauge(&quot;SampleMetric&quot;, 12);\r\n  }\r\n}\r\n```\r\n\r\nThanks in advance","title":"How to trigger Metrics calculation at the time of prometheus endpoint call","body":"<p>I am trying to configure my Micronaut Application with Micrometer and Prometheus. I want to do some calculation at the time of prometheus endpoint call. Can someone guide me here?</p>\n<p>I tried to define a bean in Micronaut as follows, but it didn't get triggered and no metric with name SampleMetric was there:</p>\n<pre><code>@Prototype\npublic class MyBean {\n\n  @Inject\n  MeterRegistry registry;\n\n  public MyBean() {\n    Gauge.builder(&quot;SampleMetric&quot;, 12).register(registry);\n    // I also tried the following but that also didn't work\n    //registry.gauge(&quot;SampleMetric&quot;, 12);\n  }\n}\n</code></pre>\n<p>Thanks in advance</p>\n"},{"tags":["java","spring","swagger","springfox"],"answers":[{"tags":[],"owner":{"account_id":7025899,"reputation":2192,"user_id":5383281,"display_name":"Mebin Joe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548855503,"creation_date":1548855503,"answer_id":54441884,"question_id":54441704,"body_markdown":"Try using latest swagger-ui(swagger-js 2.1.17) as specified in \r\n\r\nhttps://github.com/swagger-api/swagger-ui/issues/1919","title":"Java Spring Swagger Startuptime Startupbehaviour","body":"<p>Try using latest swagger-ui(swagger-js 2.1.17) as specified in </p>\n\n<p><a href=\"https://github.com/swagger-api/swagger-ui/issues/1919\" rel=\"nofollow noreferrer\">https://github.com/swagger-api/swagger-ui/issues/1919</a></p>\n"},{"tags":[],"owner":{"account_id":18734186,"reputation":11,"user_id":13658909,"display_name":"Magnus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663626877,"creation_date":1663626877,"answer_id":73779898,"question_id":54441704,"body_markdown":"Use @JsonIgnore in Many-To-Many relations","title":"Java Spring Swagger Startuptime Startupbehaviour","body":"<p>Use @JsonIgnore in Many-To-Many relations</p>\n"}],"owner":{"account_id":450009,"reputation":1499,"user_id":845117,"display_name":"Dirk Schumacher"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1110,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1663626877,"creation_date":1548854873,"question_id":54441704,"body_markdown":"I am having a Springboot application where I integrated Swagger for creating REST documentations.  \r\n\r\nWhen using swagger my startup time increases dramatically by factor 5. I&#39;m having 30secs without swagger. 2min plus with swagger.  \r\n\r\nAlso having the docket listed in the snipped underneath startup time becomes endlessly! - And this is a no-go.  \r\n\r\nMy Problem is endless startup times + Exceptions regarding memory usage from google guava.  \r\n\r\nWhy is it that way? What am I doing wrong? Where is the missing point? Why is the API not protecting me from very wrong setups?  \r\n\r\nIt feels like that swagger is on the one hand a number one tool for documenting rest APIs but using it feels very ancient for me.  \r\n\r\nSome setup info (located at maven pom.xml):  \r\n- org.springframework.boot; spring-boot-starter-parent; 1.5.5.RELEASE  \r\n- io.springfox; springfox-swagger2; 2.9.2  \r\n- io.springfox; springfox-swagger-ui; 2.9.2  \r\n\r\nI somewhere picked up that googles guava library needs to be exchanged; which I did: https://github.com/springfox/springfox/issues/2616#issuecomment-412811912\r\n\r\nIs swagger/springfox really so good to use for documenting an API coming from Spring? - What would be some alternatives to render documentation?\r\n\r\n    @Configuration\r\n    @EnableSwagger2\r\n    public class Swagger2UiConfiguration extends WebMvcConfigurerAdapter {\r\n      ...\r\n      @Bean(name=&quot;restPublicSwaggerV1Api&quot;)\r\n      public Docket publicV1Api(BuildProperties build) {\r\n\r\n        final ApiInfoBuilder apiInfo = new ApiInfoBuilder()\r\n                .title(build.getName())\r\n                .description(&quot;Description for public API&quot;)\r\n                .version( build.getVersion() );\r\n\r\n        final long TIME = System.currentTimeMillis();\r\n\r\n        final Docket docket = new Docket(DocumentationType.SWAGGER_2)\r\n                .groupName( &quot;public-v1&quot; )\r\n                .apiInfo( apiInfo.build() )\r\n                .select()\r\n                .apis( (wmrh)-&gt;{ // springfox.documentation.spring.web.WebMvcRequestHandler\r\n\r\n                    final StringBuffer sb = new StringBuffer();\r\n                    sb.append( wmrh.getClass().getTypeName()  +&quot;\\n\\t&quot;+ wmrh );\r\n                    final RequestHandlerKey rhk = wmrh.key();\r\n\r\n                    boolean result = false;\r\n\r\n                    for( String pathMapping : rhk.getPathMappings() ) {\r\n                        sb.append( &quot;\\n\\t-&gt; &quot;+ pathMapping );\r\n                        result |= pathMapping.startsWith( &quot;/api/public/&quot; );\r\n                    }\r\n\r\n                    sb.append( &quot;\\n\\t=&gt;&gt; &quot;+ result +&quot;, time: &quot;+ Util.formatTime( System.currentTimeMillis() - TIME ) +&quot; after start.&quot; );\r\n\r\n                    LOG.debug( sb.toString() );\r\n                    \r\n                    return result;\r\n                } )\r\n                .paths( (p)-&gt;{ return true; } )\r\n                .build();\r\n\r\n        LOG.debug( &quot;instantiated: {}&quot;, docket );\r\n        return docket;\r\n    }","title":"Java Spring Swagger Startuptime Startupbehaviour","body":"<p>I am having a Springboot application where I integrated Swagger for creating REST documentations.  </p>\n\n<p>When using swagger my startup time increases dramatically by factor 5. I'm having 30secs without swagger. 2min plus with swagger.  </p>\n\n<p>Also having the docket listed in the snipped underneath startup time becomes endlessly! - And this is a no-go.  </p>\n\n<p>My Problem is endless startup times + Exceptions regarding memory usage from google guava.  </p>\n\n<p>Why is it that way? What am I doing wrong? Where is the missing point? Why is the API not protecting me from very wrong setups?  </p>\n\n<p>It feels like that swagger is on the one hand a number one tool for documenting rest APIs but using it feels very ancient for me.  </p>\n\n<p>Some setup info (located at maven pom.xml):<br>\n- org.springframework.boot; spring-boot-starter-parent; 1.5.5.RELEASE<br>\n- io.springfox; springfox-swagger2; 2.9.2<br>\n- io.springfox; springfox-swagger-ui; 2.9.2  </p>\n\n<p>I somewhere picked up that googles guava library needs to be exchanged; which I did: <a href=\"https://github.com/springfox/springfox/issues/2616#issuecomment-412811912\" rel=\"nofollow noreferrer\">https://github.com/springfox/springfox/issues/2616#issuecomment-412811912</a></p>\n\n<p>Is swagger/springfox really so good to use for documenting an API coming from Spring? - What would be some alternatives to render documentation?</p>\n\n<pre><code>@Configuration\n@EnableSwagger2\npublic class Swagger2UiConfiguration extends WebMvcConfigurerAdapter {\n  ...\n  @Bean(name=\"restPublicSwaggerV1Api\")\n  public Docket publicV1Api(BuildProperties build) {\n\n    final ApiInfoBuilder apiInfo = new ApiInfoBuilder()\n            .title(build.getName())\n            .description(\"Description for public API\")\n            .version( build.getVersion() );\n\n    final long TIME = System.currentTimeMillis();\n\n    final Docket docket = new Docket(DocumentationType.SWAGGER_2)\n            .groupName( \"public-v1\" )\n            .apiInfo( apiInfo.build() )\n            .select()\n            .apis( (wmrh)-&gt;{ // springfox.documentation.spring.web.WebMvcRequestHandler\n\n                final StringBuffer sb = new StringBuffer();\n                sb.append( wmrh.getClass().getTypeName()  +\"\\n\\t\"+ wmrh );\n                final RequestHandlerKey rhk = wmrh.key();\n\n                boolean result = false;\n\n                for( String pathMapping : rhk.getPathMappings() ) {\n                    sb.append( \"\\n\\t-&gt; \"+ pathMapping );\n                    result |= pathMapping.startsWith( \"/api/public/\" );\n                }\n\n                sb.append( \"\\n\\t=&gt;&gt; \"+ result +\", time: \"+ Util.formatTime( System.currentTimeMillis() - TIME ) +\" after start.\" );\n\n                LOG.debug( sb.toString() );\n\n                return result;\n            } )\n            .paths( (p)-&gt;{ return true; } )\n            .build();\n\n    LOG.debug( \"instantiated: {}\", docket );\n    return docket;\n}\n</code></pre>\n"},{"tags":["java","spring-cloud-sleuth","spring-data-r2dbc","r2dbc","p6spy"],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663626581,"creation_date":1663626581,"answer_id":73779877,"question_id":73576750,"body_markdown":"P6Spy (and datasource-proxy) is for JDBC not for R2DBC.\r\nR2DBC has its own proxy (formerly: datasource-proxy-r2dbc): https://github.com/r2dbc/r2dbc-proxy","title":"How would I instrument an R2DBC for Spring Cloud Sleuth Zipkin?","body":"<p>P6Spy (and datasource-proxy) is for JDBC not for R2DBC.\nR2DBC has its own proxy (formerly: datasource-proxy-r2dbc): <a href=\"https://github.com/r2dbc/r2dbc-proxy\" rel=\"nofollow noreferrer\">https://github.com/r2dbc/r2dbc-proxy</a></p>\n"}],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663626581,"creation_date":1662079950,"question_id":73576750,"body_markdown":"For a normal data source I would do the following using P6Spy\r\n\r\n```java\r\n@Configuration\r\n@Order(LOWEST_PRECEDENCE)\r\n@Slf4j\r\npublic class DataSourceBeanPostProcessor implements BeanPostProcessor {\r\n  @Override\r\n  public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\r\n    if (bean instanceof DataSource &amp;&amp; !ScopedProxyUtils.isScopedTarget(beanName)) {\r\n      log.debug(&quot;Decorating {} with P6Spy&quot;, bean);\r\n      return new P6DataSource((DataSource) bean);\r\n    } else {\r\n      return bean;\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\nBut since R2BC uses a reactive DataSource how would I instrument that?","title":"How would I instrument an R2DBC for Spring Cloud Sleuth Zipkin?","body":"<p>For a normal data source I would do the following using P6Spy</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Order(LOWEST_PRECEDENCE)\n@Slf4j\npublic class DataSourceBeanPostProcessor implements BeanPostProcessor {\n  @Override\n  public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n    if (bean instanceof DataSource &amp;&amp; !ScopedProxyUtils.isScopedTarget(beanName)) {\n      log.debug(&quot;Decorating {} with P6Spy&quot;, bean);\n      return new P6DataSource((DataSource) bean);\n    } else {\n      return bean;\n    }\n  }\n}\n\n</code></pre>\n<p>But since R2BC uses a reactive DataSource how would I instrument that?</p>\n"},{"tags":["java","spring","web.xml"],"comments":[{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1663511731,"post_id":73748625,"comment_id":130252304,"body_markdown":"I am confused. Do you like to modify the web.xml or not????","body":"I am confused. Do you like to modify the web.xml or not????"},{"owner":{"account_id":22514493,"reputation":35,"user_id":16708926,"display_name":"GC_"},"score":0,"creation_date":1663624691,"post_id":73748625,"comment_id":130279834,"body_markdown":"@Grim I was to modify the web.xml.  I don&#39;t want to replace it.","body":"@Grim I was to modify the web.xml.  I don&#39;t want to replace it."},{"owner":{"account_id":22514493,"reputation":35,"user_id":16708926,"display_name":"GC_"},"score":0,"creation_date":1663624753,"post_id":73748625,"comment_id":130279844,"body_markdown":"Is there a way to register the AppConfig in wab.xml?","body":"Is there a way to register the AppConfig in wab.xml?"}],"answers":[{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663625422,"creation_date":1663625422,"answer_id":73779768,"question_id":73748625,"body_markdown":"Using spring (without spring-boot) there is a second path used by vintage programmers of old, an anicent and a forgotten path, by defining a `listener`. Scolls of new recommend a 3.0 servlet-api.\r\n\r\n\t&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\r\n\t\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\txsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee \r\n\t\t      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;\r\n\t\tversion=&quot;3.0&quot;&gt;\r\n\t\t&lt;listener&gt;\r\n\t\t\t&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n\t\t&lt;/listener&gt;\r\n\t\t&lt;context-param&gt;\r\n\t\t\t&lt;param-name&gt;contextClass&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\r\n\t\t&lt;/context-param&gt;\r\n\t\t&lt;context-param&gt;\r\n\t\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;aware.like.fox.crossing.water.AppConfig&lt;/param-value&gt;\r\n\t\t&lt;/context-param&gt;\r\n\t&lt;/web-app&gt;\r\n\r\nOld black, mighty magic. \r\n\r\nWhy do we change from xml to java. Xml is for configuration, java is for intelligence. We changed for false reasons or both is true?","title":"How do you add Java Based Spring config to an existing web.xml?","body":"<p>Using spring (without spring-boot) there is a second path used by vintage programmers of old, an anicent and a forgotten path, by defining a <code>listener</code>. Scolls of new recommend a 3.0 servlet-api.</p>\n<pre><code>&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee \n          http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;\n    version=&quot;3.0&quot;&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextClass&lt;/param-name&gt;\n        &lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;aware.like.fox.crossing.water.AppConfig&lt;/param-value&gt;\n    &lt;/context-param&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p>Old black, mighty magic.</p>\n<p>Why do we change from xml to java. Xml is for configuration, java is for intelligence. We changed for false reasons or both is true?</p>\n"}],"owner":{"account_id":22514493,"reputation":35,"user_id":16708926,"display_name":"GC_"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73779768,"answer_count":1,"score":0,"last_activity_date":1663625422,"creation_date":1663350648,"question_id":73748625,"body_markdown":"I have an existing web.xml and I am trying to add springs to a project.  I would like to use java based spring config: like the following.\r\n\r\n    AnnotationConfigWebApplicationContext appContext = new AnnotationConfigWebApplicationContext();\r\n            appContext.register(AppConfig.class);\r\n      \r\n\r\nHowever, I don&#39;t want a WebApplicationInitializer, because I don&#39;t want to rewrite the web.xml.\r\n\r\nIs there way to reference the AppConfig.class from the web.xml? I don&#39;t want to define all my object in xml like old spring.\r\n\r\nThanks\r\n","title":"How do you add Java Based Spring config to an existing web.xml?","body":"<p>I have an existing web.xml and I am trying to add springs to a project.  I would like to use java based spring config: like the following.</p>\n<pre><code>AnnotationConfigWebApplicationContext appContext = new AnnotationConfigWebApplicationContext();\n        appContext.register(AppConfig.class);\n  \n</code></pre>\n<p>However, I don't want a WebApplicationInitializer, because I don't want to rewrite the web.xml.</p>\n<p>Is there way to reference the AppConfig.class from the web.xml? I don't want to define all my object in xml like old spring.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","neo4j"],"owner":{"account_id":2052414,"reputation":27,"user_id":1831107,"display_name":"Morgan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1663623378,"creation_date":1663623378,"question_id":73779540,"body_markdown":"When I am trying to create composite keys with two @id I am getting the following error.\r\norg.springframework.data.mapping.MappingException: Attempt to add id property private java.lang.String ANumber but already have property private java.lang.String BNumber registered as id. Check your mapping configuration!\r\n \r\nHow can I define composite keys in entity class for spring data neo4j ?\r\n\r\nI was trying to do the same as here (https://www.baeldung.com/jpa-composite-primary-keys)\r\n\r\nCustomer.java\r\n```\r\n​\r\n@Node(&quot;customer&quot;)\r\npublic class Customer{\r\n​\r\n    public CustomerId getCustomerId() {\r\n        return customerId;\r\n    }\r\n​\r\n    public void setCustomerId(CustomerId customerId) {\r\n        this.customerId= customerId;\r\n    }\r\n​\r\n    @EmbeddedId\r\n    private CustomerId customerId ;\r\n```\r\n\r\nCustomerId.java\r\n```\r\n\r\n@Embeddable\r\npublic class CustomerId implements Serializable {\r\n​\r\n​\r\n    private String ANumber;\r\n​\r\n    private String BNumber;\r\n​\r\n    public CustomerId() {\r\n​\r\n    }\r\n    public CustomerId(String ANumber, String BNumber) {\r\n        this.ANumber= ANumber;\r\n        this.BNumber= BNumber;\r\n    }\r\n​```","title":"How to create composite keys in entity class for spring data neo4j","body":"<p>When I am trying to create composite keys with two @id I am getting the following error.\norg.springframework.data.mapping.MappingException: Attempt to add id property private java.lang.String ANumber but already have property private java.lang.String BNumber registered as id. Check your mapping configuration!</p>\n<p>How can I define composite keys in entity class for spring data neo4j ?</p>\n<p>I was trying to do the same as here (<a href=\"https://www.baeldung.com/jpa-composite-primary-keys\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-composite-primary-keys</a>)</p>\n<p>Customer.java</p>\n<pre><code>​\n@Node(&quot;customer&quot;)\npublic class Customer{\n​\n    public CustomerId getCustomerId() {\n        return customerId;\n    }\n​\n    public void setCustomerId(CustomerId customerId) {\n        this.customerId= customerId;\n    }\n​\n    @EmbeddedId\n    private CustomerId customerId ;\n</code></pre>\n<p>CustomerId.java</p>\n<pre><code>\n@Embeddable\npublic class CustomerId implements Serializable {\n​\n​\n    private String ANumber;\n​\n    private String BNumber;\n​\n    public CustomerId() {\n​\n    }\n    public CustomerId(String ANumber, String BNumber) {\n        this.ANumber= ANumber;\n        this.BNumber= BNumber;\n    }\n​```\n</code></pre>\n"},{"tags":["java","spring-batch","jobs"],"answers":[{"tags":[],"owner":{"account_id":5157043,"reputation":1369,"user_id":4130003,"display_name":"johnnyutts"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1663623208,"creation_date":1663623208,"answer_id":73779516,"question_id":73778819,"body_markdown":"Remove @StepScope from your step beans, @StepScope is only for beans used in steps, not steps themselves","title":"Spring batch : how to use create two two steps in one job","body":"<p>Remove @StepScope from your step beans, @StepScope is only for beans used in steps, not steps themselves</p>\n"}],"owner":{"account_id":2303324,"reputation":915,"user_id":2023141,"accept_rate":20,"display_name":"user2023141"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":639,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73779516,"answer_count":1,"score":0,"last_activity_date":1663623208,"creation_date":1663618549,"question_id":73778819,"body_markdown":"I&#39;ve a one class that I use to create two different Beans. These two Beans are then used to create two Steps and these two steps must be executed in sequence.\r\nI use one class to create two beans because the logic to be executed is the same. By passing different values in the constructor, the data to be fetched is different.\r\n\r\nBut when Spring-batch is running, an IllegalStateException exception is thrown: \r\nWhat causes this exception to be thrown ?\r\n\r\n    Caused by: org.springframework.beans.factory.support.ScopeNotActiveException: Error creating bean with name &#39;scopedTarget.stepBrussels&#39;: Scope &#39;step&#39; is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No context holder available for step scope\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:383)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \tat org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:195)\r\n    \tat com.sun.proxy.$Proxy50.getName(Unknown Source)\r\n    \tat org.springframework.batch.core.job.flow.JobFlowExecutor.isStepRestart(JobFlowExecutor.java:86)\r\n    \tat org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:67)\r\n    \tat org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:68)\r\n    \tat org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169)\r\n    \t... 28 common frames omitted\r\n    Caused by: java.lang.IllegalStateException: No context holder available for step scope\r\n    \tat org.springframework.batch.core.scope.StepScope.getContext(StepScope.java:167)\r\n    \tat org.springframework.batch.core.scope.StepScope.get(StepScope.java:99)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:371)\r\n\r\n\r\n\r\n\r\n    @Configuration\r\n    @Slf4j\r\n    public class InstrumentReaderConfig {\r\n    \r\n        @Value(&quot;${chartinvest.url.admin}&quot;)\r\n        private String adminUrl;\r\n    \r\n        @Value(&quot;${eodHistoricalData.url.listOfTickers}&quot;)\r\n        private String listOfTickerslUrl;\r\n    \r\n        @Bean\r\n        public ItemReader&lt;TickerDto&gt; itemReaderBr() throws JsonProcessingException {\r\n            return new InstrumentReader(adminUrl, listOfTickerslUrl, &quot;XBRU&quot;, &quot;BR&quot;, &quot;BE&quot;);\r\n        }\r\n    \r\n        @Bean\r\n        public ItemReader&lt;TickerDto&gt; itemReaderAs() throws JsonProcessingException {\r\n            return new InstrumentReader(adminUrl, listOfTickerslUrl, &quot;XAMS&quot;, &quot;AS&quot;, &quot;NL&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n    @Configuration\r\n    public class StepConfig {\r\n    \r\n        @Autowired\r\n        private StepBuilderFactory stepBuilderFactory;\r\n    \r\n        @Autowired\r\n        private ItemReader itemReaderBr;\r\n    \r\n        @Autowired\r\n        private ItemReader itemReaderAs;\r\n    \r\n        @Autowired\r\n        private ItemProcessor itemProcessorEodHistorical;\r\n    \r\n        @Autowired\r\n        private ItemWriter&lt;TickerDto&gt; itemWriterEodHistorical;\r\n    \r\n        @Bean\r\n        @StepScope\r\n        public Step stepBrussels() {\r\n            return stepBuilderFactory.get(&quot;Brussels&quot;).&lt;TickerDto, TickerDto&gt;chunk(1)\r\n                    .reader(itemReaderBr)\r\n                    .processor(itemProcessorEodHistorical)\r\n                    .writer(itemWriterEodHistorical)\r\n                    .build();\r\n        }\r\n    \r\n    \r\n        @Bean\r\n        @StepScope\r\n        public Step stepAmsterdam() {\r\n            return stepBuilderFactory.get(&quot;Amsterdam&quot;).&lt;TickerDto, TickerDto&gt;chunk(1)\r\n                    .reader(itemReaderAs)\r\n                    .processor(itemProcessorEodHistorical)\r\n                    .writer(itemWriterEodHistorical)\r\n                    .build();\r\n        }\r\n    }\r\n\r\n\r\n    @Configuration\r\n    public class JobConfig {\r\n    \r\n        @Autowired\r\n        private JobBuilderFactory jobBuilderFactory;\r\n    \r\n  \r\n        @Bean\r\n        public Job processJob(Step stepBrussels, Step stepAmsterdam, JobExecutionListener listener) {\r\n            return jobBuilderFactory\r\n                    .get(&quot;processJob&quot;)\r\n                    .incrementer(new RunIdIncrementer())\r\n                    .listener(listener)\r\n                    .flow(stepBrussels)\r\n                    .next(stepAmsterdam)\r\n                    .end()\r\n                    .build();\r\n        }\r\n    \r\n    }\r\n","title":"Spring batch : how to use create two two steps in one job","body":"<p>I've a one class that I use to create two different Beans. These two Beans are then used to create two Steps and these two steps must be executed in sequence.\nI use one class to create two beans because the logic to be executed is the same. By passing different values in the constructor, the data to be fetched is different.</p>\n<p>But when Spring-batch is running, an IllegalStateException exception is thrown:\nWhat causes this exception to be thrown ?</p>\n<pre><code>Caused by: org.springframework.beans.factory.support.ScopeNotActiveException: Error creating bean with name 'scopedTarget.stepBrussels': Scope 'step' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No context holder available for step scope\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:383)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:195)\n    at com.sun.proxy.$Proxy50.getName(Unknown Source)\n    at org.springframework.batch.core.job.flow.JobFlowExecutor.isStepRestart(JobFlowExecutor.java:86)\n    at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:67)\n    at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:68)\n    at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169)\n    ... 28 common frames omitted\nCaused by: java.lang.IllegalStateException: No context holder available for step scope\n    at org.springframework.batch.core.scope.StepScope.getContext(StepScope.java:167)\n    at org.springframework.batch.core.scope.StepScope.get(StepScope.java:99)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:371)\n\n\n\n\n@Configuration\n@Slf4j\npublic class InstrumentReaderConfig {\n\n    @Value(&quot;${chartinvest.url.admin}&quot;)\n    private String adminUrl;\n\n    @Value(&quot;${eodHistoricalData.url.listOfTickers}&quot;)\n    private String listOfTickerslUrl;\n\n    @Bean\n    public ItemReader&lt;TickerDto&gt; itemReaderBr() throws JsonProcessingException {\n        return new InstrumentReader(adminUrl, listOfTickerslUrl, &quot;XBRU&quot;, &quot;BR&quot;, &quot;BE&quot;);\n    }\n\n    @Bean\n    public ItemReader&lt;TickerDto&gt; itemReaderAs() throws JsonProcessingException {\n        return new InstrumentReader(adminUrl, listOfTickerslUrl, &quot;XAMS&quot;, &quot;AS&quot;, &quot;NL&quot;);\n    }\n\n}\n\n\n\n@Configuration\npublic class StepConfig {\n\n    @Autowired\n    private StepBuilderFactory stepBuilderFactory;\n\n    @Autowired\n    private ItemReader itemReaderBr;\n\n    @Autowired\n    private ItemReader itemReaderAs;\n\n    @Autowired\n    private ItemProcessor itemProcessorEodHistorical;\n\n    @Autowired\n    private ItemWriter&lt;TickerDto&gt; itemWriterEodHistorical;\n\n    @Bean\n    @StepScope\n    public Step stepBrussels() {\n        return stepBuilderFactory.get(&quot;Brussels&quot;).&lt;TickerDto, TickerDto&gt;chunk(1)\n                .reader(itemReaderBr)\n                .processor(itemProcessorEodHistorical)\n                .writer(itemWriterEodHistorical)\n                .build();\n    }\n\n\n    @Bean\n    @StepScope\n    public Step stepAmsterdam() {\n        return stepBuilderFactory.get(&quot;Amsterdam&quot;).&lt;TickerDto, TickerDto&gt;chunk(1)\n                .reader(itemReaderAs)\n                .processor(itemProcessorEodHistorical)\n                .writer(itemWriterEodHistorical)\n                .build();\n    }\n}\n\n\n@Configuration\npublic class JobConfig {\n\n    @Autowired\n    private JobBuilderFactory jobBuilderFactory;\n\n\n    @Bean\n    public Job processJob(Step stepBrussels, Step stepAmsterdam, JobExecutionListener listener) {\n        return jobBuilderFactory\n                .get(&quot;processJob&quot;)\n                .incrementer(new RunIdIncrementer())\n                .listener(listener)\n                .flow(stepBrussels)\n                .next(stepAmsterdam)\n                .end()\n                .build();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","properties"],"answers":[{"tags":[],"owner":{"account_id":9824858,"reputation":121,"user_id":7278190,"display_name":"WPW"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663623163,"creation_date":1663622862,"answer_id":73779469,"question_id":73779068,"body_markdown":"@SaltukKezer, yes you can. First step make a config class like \r\n  \r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.PropertySource;\r\n\r\n    @Configuration\r\n    @PropertySource(&quot;classpath:/updater.properties&quot;)\r\n    public class UpdaterProperties{\r\n  \r\n\r\n         @Autowired\r\n         Environment env;\r\n    \r\n         public String getMyPropertyValue() {\r\n    \t    return env.getProperty(&quot;your.property.name&quot;);\r\n         }\r\n      \r\n     }\r\n\r\n\r\n\r\nThen second step, just get an instance of this class and call the getters","title":"Spring override non-application.properties file in Tests","body":"<p>@SaltukKezer, yes you can. First step make a config class like</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.PropertySource;\n\n@Configuration\n@PropertySource(&quot;classpath:/updater.properties&quot;)\npublic class UpdaterProperties{\n\n\n     @Autowired\n     Environment env;\n\n     public String getMyPropertyValue() {\n        return env.getProperty(&quot;your.property.name&quot;);\n     }\n  \n }\n</code></pre>\n<p>Then second step, just get an instance of this class and call the getters</p>\n"}],"owner":{"account_id":20279529,"reputation":107,"user_id":16368673,"display_name":"Saltuk Kezer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663623163,"creation_date":1663620047,"question_id":73779068,"body_markdown":"I use an external pure Java library that uses a file that is called `updater.properties`.\r\nIm currently writing some Spring-Boot Integration Tests with `@SpringBootTest`.\r\nThe problem I currently have is that i don’t find any option to pass/use a different `updater.properties` file with Spring. Is there a solution for this? Or does the library need to be updated for this to work? \r\nThe `updater.properties` is in my resource folder and being parsed internally by the library.\r\nWould be happy for any help!","title":"Spring override non-application.properties file in Tests","body":"<p>I use an external pure Java library that uses a file that is called <code>updater.properties</code>.\nIm currently writing some Spring-Boot Integration Tests with <code>@SpringBootTest</code>.\nThe problem I currently have is that i don’t find any option to pass/use a different <code>updater.properties</code> file with Spring. Is there a solution for this? Or does the library need to be updated for this to work?\nThe <code>updater.properties</code> is in my resource folder and being parsed internally by the library.\nWould be happy for any help!</p>\n"},{"tags":["java","scala","memory-profiling","scala-reflect","heap-profiling"],"comments":[{"owner":{"account_id":5994994,"reputation":19189,"user_id":5641244,"display_name":"Levi Ramsey"},"score":1,"creation_date":1663600799,"post_id":73775296,"comment_id":130272544,"body_markdown":"Most likely things like `ts.members` are creating a new collection every time; each call to `filter` would then also be allocating an intermediate collection.  You may want to memoize `newDefault2`","body":"Most likely things like <code>ts.members</code> are creating a new collection every time; each call to <code>filter</code> would then also be allocating an intermediate collection.  You may want to memoize <code>newDefault2</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1663604423,"post_id":73775296,"comment_id":130273899,"body_markdown":"Are you aware that on the left chart, i.e. the CPU utilization, the blue line (that one that is at zero all the time), represents the garbage collection, in other words, that the garbage collection has no influence on the performance at all here?","body":"Are you aware that on the left chart, i.e. the CPU utilization, the blue line (that one that is at zero all the time), represents the garbage collection, in other words, that the garbage collection has no influence on the performance at all here?"},{"owner":{"account_id":2114524,"reputation":830,"user_id":1879109,"accept_rate":38,"display_name":"iamsmkr"},"score":0,"creation_date":1663612142,"post_id":73775296,"comment_id":130276320,"body_markdown":"@Holger This seems misleading! Blue line that represents GC activiity is 0% in both the cases. Yet in first case GC Activity is 500.1% and in second case it is 0%. Could you please explain that? Also on the right side of the graph there clearly are crest and trough. Don&#39;t they represent GC as well?","body":"@Holger This seems misleading! Blue line that represents GC activiity is 0% in both the cases. Yet in first case GC Activity is 500.1% and in second case it is 0%. Could you please explain that? Also on the right side of the graph there clearly are crest and trough. Don&#39;t they represent GC as well?"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1663613922,"post_id":73775296,"comment_id":130276882,"body_markdown":"@iamsmkr better, those show up as _negative_ 500%? :)","body":"@iamsmkr better, those show up as <i>negative</i> 500%? :)"},{"owner":{"account_id":2114524,"reputation":830,"user_id":1879109,"accept_rate":38,"display_name":"iamsmkr"},"score":0,"creation_date":1663622329,"post_id":73775296,"comment_id":130279371,"body_markdown":"@LeviRamsey Please see the updated answer. It does seem to make a difference, a small one however!","body":"@LeviRamsey Please see the updated answer. It does seem to make a difference, a small one however!"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1663656928,"post_id":73775296,"comment_id":130285008,"body_markdown":"@iamsmkr that value refers to the current value, not the progress shown in the graph. You can see that the graph goes down at the end; apparently you stopped the application right at this moment which led to the obviously not-to-be-taken-serious value of “-500%”. The graph on the right hand side shows the *memory usage* and yes there *is* activity but as indicated, the time needed for cleaning up that amount of memory is so small, that the *CPU activity* is rounded to “0.0%” throughout the minutes shown here. You are trying to optimize something entirely irrelevant to the overall performance.","body":"@iamsmkr that value refers to the current value, not the progress shown in the graph. You can see that the graph goes down at the end; apparently you stopped the application right at this moment which led to the obviously not-to-be-taken-serious value of “-500%”. The graph on the right hand side shows the <i>memory usage</i> and yes there <i>is</i> activity but as indicated, the time needed for cleaning up that amount of memory is so small, that the <i>CPU activity</i> is rounded to “0.0%” throughout the minutes shown here. You are trying to optimize something entirely irrelevant to the overall performance."}],"owner":{"account_id":2114524,"reputation":830,"user_id":1879109,"accept_rate":38,"display_name":"iamsmkr"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663622283,"creation_date":1663598878,"question_id":73775296,"body_markdown":"In the example code below, I am trying to create case class objects with default values using runtime Scala reflection (required for my use case)!\r\n\r\n**First Approach**\r\n1. Define default values for case class fields \r\n2. Create objects at runtime\r\n\r\n**Second Approach** \r\n1. Create a case class object in the companion object\r\n2. Fetch that object using reflection\r\n\r\nAt first glance, the second approach seemed better because we are creating object only once but upon profiling these two approaches, the second doesn&#39;t seem to add much value. Although while sampling only one object is created indeed throughout the runtime of the application! Though it looks obvious that those objects are being created every time when using reflection (Correct me if I am wrong).\r\n\r\nnewDefault\r\n[![newDefault][1]][1]\r\n\r\nnewDefault2\r\n[![newDefault2][2]][2]\r\n\r\n```scala\r\nobject TestDefault extends App {\r\n\r\n  case class XYZ(str: String = &quot;Shivam&quot;)\r\n  object XYZ { private val default: XYZ = XYZ() }\r\n  case class ABC(int: Int = 99)\r\n  object ABC { private val default: ABC = ABC() }\r\n\r\n  def newDefault[A](implicit t: reflect.ClassTag[A]): A = {\r\n    import reflect.runtime.{universe =&gt; ru}\r\n    import reflect.runtime.{currentMirror =&gt; cm}\r\n\r\n    val clazz  = cm.classSymbol(t.runtimeClass)\r\n    val mod    = clazz.companion.asModule\r\n    val im     = cm.reflect(cm.reflectModule(mod).instance)\r\n    val ts     = im.symbol.typeSignature\r\n    val mApply = ts.member(ru.TermName(&quot;apply&quot;)).asMethod\r\n    val syms   = mApply.paramLists.flatten\r\n    val args   = syms.zipWithIndex.map {\r\n      case (p, i) =&gt;\r\n        val mDef = ts.member(ru.TermName(s&quot;apply$$default$$${i + 1}&quot;)).asMethod\r\n        im.reflectMethod(mDef)()\r\n    }\r\n    im.reflectMethod(mApply)(args: _*).asInstanceOf[A]\r\n  }\r\n\r\n  for (i &lt;- 0 to 1000000000)\r\n    newDefault[XYZ]\r\n\r\n//  println(s&quot;newDefault XYZ = ${newDefault[XYZ]}&quot;)\r\n//  println(s&quot;newDefault ABC = ${newDefault[ABC]}&quot;)\r\n\r\n  def newDefault2[A](implicit t: reflect.ClassTag[A]): A = {\r\n    import reflect.runtime.{currentMirror =&gt; cm}\r\n\r\n    val clazz = cm.classSymbol(t.runtimeClass)\r\n    val mod   = clazz.companion.asModule\r\n    val im    = cm.reflect(cm.reflectModule(mod).instance)\r\n    val ts    = im.symbol.typeSignature\r\n\r\n    val defaultMember = ts.members.filter(_.isMethod).filter(d =&gt; d.name.toString == &quot;default&quot;).head.asMethod\r\n\r\n    val result = im.reflectMethod(defaultMember).apply()\r\n    result.asInstanceOf[A]\r\n  }\r\n\r\n  for (i &lt;- 0 to 1000000000)\r\n    newDefault2[XYZ]\r\n}\r\n```\r\n\r\nIs there any way to reduce the memory footprint? Any other better approach to achieve the same?\r\n\r\nP.S. If are trying to run this app, comment the following lines alternatively:\r\n```scala\r\n  for (i &lt;- 0 to 1000000000)\r\n    newDefault[XYZ]\r\n\r\n  for (i &lt;- 0 to 1000000000)\r\n    newDefault2[XYZ]\r\n```\r\n\r\n**EDIT**\r\n\r\nAs per @Levi Ramsey&#39;s suggestion, I did try memoization but it seems to only make a small difference!\r\n\r\n```scala\r\n  val cache = new ConcurrentHashMap[universe.Type, XYZ]()\r\n\r\n  def newDefault2[A](implicit t: reflect.ClassTag[A]): A = {\r\n    import reflect.runtime.{currentMirror =&gt; cm}\r\n\r\n    val clazz = cm.classSymbol(t.runtimeClass)\r\n    val mod   = clazz.companion.asModule\r\n    val im    = cm.reflect(cm.reflectModule(mod).instance)\r\n    val ts    = im.symbol.typeSignature\r\n\r\n    if (!cache.contains(ts)) {\r\n      val default = ts.members.filter(_.isMethod).filter(d =&gt; d.name.toString == &quot;default&quot;).head.asMethod\r\n      cache.put(ts, im.reflectMethod(default).apply().asInstanceOf[XYZ])\r\n    }\r\n\r\n    cache.get(ts).asInstanceOf[A]\r\n  }\r\n\r\n  for (i &lt;- 0 to 1000000000)\r\n    newDefault2[XYZ]\r\n```\r\n\r\n[![memoization][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/K3vYT.png\r\n  [2]: https://i.stack.imgur.com/XzL0l.png\r\n  [3]: https://i.stack.imgur.com/gvaUA.png","title":"Avoiding garbage while creating objects using Scala runtime reflection","body":"<p>In the example code below, I am trying to create case class objects with default values using runtime Scala reflection (required for my use case)!</p>\n<p><strong>First Approach</strong></p>\n<ol>\n<li>Define default values for case class fields</li>\n<li>Create objects at runtime</li>\n</ol>\n<p><strong>Second Approach</strong></p>\n<ol>\n<li>Create a case class object in the companion object</li>\n<li>Fetch that object using reflection</li>\n</ol>\n<p>At first glance, the second approach seemed better because we are creating object only once but upon profiling these two approaches, the second doesn't seem to add much value. Although while sampling only one object is created indeed throughout the runtime of the application! Though it looks obvious that those objects are being created every time when using reflection (Correct me if I am wrong).</p>\n<p>newDefault\n<a href=\"https://i.stack.imgur.com/K3vYT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K3vYT.png\" alt=\"newDefault\" /></a></p>\n<p>newDefault2\n<a href=\"https://i.stack.imgur.com/XzL0l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XzL0l.png\" alt=\"newDefault2\" /></a></p>\n<pre class=\"lang-scala prettyprint-override\"><code>object TestDefault extends App {\n\n  case class XYZ(str: String = &quot;Shivam&quot;)\n  object XYZ { private val default: XYZ = XYZ() }\n  case class ABC(int: Int = 99)\n  object ABC { private val default: ABC = ABC() }\n\n  def newDefault[A](implicit t: reflect.ClassTag[A]): A = {\n    import reflect.runtime.{universe =&gt; ru}\n    import reflect.runtime.{currentMirror =&gt; cm}\n\n    val clazz  = cm.classSymbol(t.runtimeClass)\n    val mod    = clazz.companion.asModule\n    val im     = cm.reflect(cm.reflectModule(mod).instance)\n    val ts     = im.symbol.typeSignature\n    val mApply = ts.member(ru.TermName(&quot;apply&quot;)).asMethod\n    val syms   = mApply.paramLists.flatten\n    val args   = syms.zipWithIndex.map {\n      case (p, i) =&gt;\n        val mDef = ts.member(ru.TermName(s&quot;apply$$default$$${i + 1}&quot;)).asMethod\n        im.reflectMethod(mDef)()\n    }\n    im.reflectMethod(mApply)(args: _*).asInstanceOf[A]\n  }\n\n  for (i &lt;- 0 to 1000000000)\n    newDefault[XYZ]\n\n//  println(s&quot;newDefault XYZ = ${newDefault[XYZ]}&quot;)\n//  println(s&quot;newDefault ABC = ${newDefault[ABC]}&quot;)\n\n  def newDefault2[A](implicit t: reflect.ClassTag[A]): A = {\n    import reflect.runtime.{currentMirror =&gt; cm}\n\n    val clazz = cm.classSymbol(t.runtimeClass)\n    val mod   = clazz.companion.asModule\n    val im    = cm.reflect(cm.reflectModule(mod).instance)\n    val ts    = im.symbol.typeSignature\n\n    val defaultMember = ts.members.filter(_.isMethod).filter(d =&gt; d.name.toString == &quot;default&quot;).head.asMethod\n\n    val result = im.reflectMethod(defaultMember).apply()\n    result.asInstanceOf[A]\n  }\n\n  for (i &lt;- 0 to 1000000000)\n    newDefault2[XYZ]\n}\n</code></pre>\n<p>Is there any way to reduce the memory footprint? Any other better approach to achieve the same?</p>\n<p>P.S. If are trying to run this app, comment the following lines alternatively:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>  for (i &lt;- 0 to 1000000000)\n    newDefault[XYZ]\n\n  for (i &lt;- 0 to 1000000000)\n    newDefault2[XYZ]\n</code></pre>\n<p><strong>EDIT</strong></p>\n<p>As per @Levi Ramsey's suggestion, I did try memoization but it seems to only make a small difference!</p>\n<pre class=\"lang-scala prettyprint-override\"><code>  val cache = new ConcurrentHashMap[universe.Type, XYZ]()\n\n  def newDefault2[A](implicit t: reflect.ClassTag[A]): A = {\n    import reflect.runtime.{currentMirror =&gt; cm}\n\n    val clazz = cm.classSymbol(t.runtimeClass)\n    val mod   = clazz.companion.asModule\n    val im    = cm.reflect(cm.reflectModule(mod).instance)\n    val ts    = im.symbol.typeSignature\n\n    if (!cache.contains(ts)) {\n      val default = ts.members.filter(_.isMethod).filter(d =&gt; d.name.toString == &quot;default&quot;).head.asMethod\n      cache.put(ts, im.reflectMethod(default).apply().asInstanceOf[XYZ])\n    }\n\n    cache.get(ts).asInstanceOf[A]\n  }\n\n  for (i &lt;- 0 to 1000000000)\n    newDefault2[XYZ]\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gvaUA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gvaUA.png\" alt=\"memoization\" /></a></p>\n"},{"tags":["java","apache-kafka","apache-flink","flink-streaming"],"answers":[{"tags":[],"owner":{"account_id":21886042,"reputation":1703,"user_id":16173669,"display_name":"Martijn Visser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663594155,"creation_date":1663594155,"answer_id":73774164,"question_id":73768283,"body_markdown":"I would recommend to read up on Flink&#39;s fault tolerance mechanisms, checkpointing &amp; savepointing. https://nightlies.apache.org/flink/flink-docs-master/docs/learn-flink/fault_tolerance/ and https://nightlies.apache.org/flink/flink-docs-master/docs/ops/state/checkpoints/ are good places to start. \r\n\r\nI think you could also achieve your deduplication easier by using Table API/SQL. See https://nightlies.apache.org/flink/flink-docs-master/docs/dev/table/sql/queries/deduplication/ ","title":"Interesting Flink Problem - How to restore state in Flink if the task manager fails in order to gurantee exactly once processing?","body":"<p>I would recommend to read up on Flink's fault tolerance mechanisms, checkpointing &amp; savepointing. <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/learn-flink/fault_tolerance/\" rel=\"nofollow noreferrer\">https://nightlies.apache.org/flink/flink-docs-master/docs/learn-flink/fault_tolerance/</a> and <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/ops/state/checkpoints/\" rel=\"nofollow noreferrer\">https://nightlies.apache.org/flink/flink-docs-master/docs/ops/state/checkpoints/</a> are good places to start.</p>\n<p>I think you could also achieve your deduplication easier by using Table API/SQL. See <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/dev/table/sql/queries/deduplication/\" rel=\"nofollow noreferrer\">https://nightlies.apache.org/flink/flink-docs-master/docs/dev/table/sql/queries/deduplication/</a></p>\n"},{"tags":[],"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663621381,"creation_date":1663621381,"answer_id":73779267,"question_id":73768283,"body_markdown":"You need to use flink&#39;s managed keyed state, which Flink will maintain in a manner that is consistent with the sources and sinks, and Flink will guarantee exactly-once behavior provided you setup checkpointing and configure the sinks properly.\r\n\r\nThere&#39;s a [tutorial on this topic in the Flink documentation](https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/learn-flink/etl/#stateful-transformations), and it happens to use deduplication as the [example use case](https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/learn-flink/etl/#an-example-with-keyed-state).\r\n\r\nFor more info on how to configure Kafka for exactly-once operation, see [Exactly-once with Apache Kafka](https://www.docs.immerok.cloud/docs/cookbook/exactly-once-with-apache-kafka-and-apache-flink/).\r\n\r\nDisclaimer: I wrote that part of the Flink documentation, and I work for Immerok.","title":"Interesting Flink Problem - How to restore state in Flink if the task manager fails in order to gurantee exactly once processing?","body":"<p>You need to use flink's managed keyed state, which Flink will maintain in a manner that is consistent with the sources and sinks, and Flink will guarantee exactly-once behavior provided you setup checkpointing and configure the sinks properly.</p>\n<p>There's a <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/learn-flink/etl/#stateful-transformations\" rel=\"nofollow noreferrer\">tutorial on this topic in the Flink documentation</a>, and it happens to use deduplication as the <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/learn-flink/etl/#an-example-with-keyed-state\" rel=\"nofollow noreferrer\">example use case</a>.</p>\n<p>For more info on how to configure Kafka for exactly-once operation, see <a href=\"https://www.docs.immerok.cloud/docs/cookbook/exactly-once-with-apache-kafka-and-apache-flink/\" rel=\"nofollow noreferrer\">Exactly-once with Apache Kafka</a>.</p>\n<p>Disclaimer: I wrote that part of the Flink documentation, and I work for Immerok.</p>\n"}],"owner":{"account_id":25468454,"reputation":21,"user_id":19267091,"display_name":"Tartartartaglia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":322,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1663621381,"creation_date":1663559161,"question_id":73768283,"body_markdown":"Hi I am new to Flink and trying to figure out some best practices with the following scenerio:\r\n\r\nI am playing around with a Flink job that reads unique data from multiple CSV files. Each row in the CSV is composed of three columns: userId, appId, name. I have to do some processing on each of these records (capitalize the name) and post the record to a Kafka Topic.\r\n\r\nThe goal is to filter out any duplicate records that exist so we do not have duplicate messages in the output Kafka Topic.\r\n\r\nI am doing a keyBy(userId, appId) on the stream and keeping a boolean value state &quot;Processed&quot; to filter out duplicate records.\r\n\r\nThe issue is when I cancel the Task Manager in the middle of processing a file, to simulate a failure, it will start processing the file from the beginning once it restarts. \r\n\r\nThis is a problem because the &quot;Processed&quot; State in the Flink job is also wiped clean after the Task Manager fails! \r\n\r\nThis leads to duplicate messages in the output Kafka topic.\r\n\r\nHow can I prevent this?\r\n\r\nI need to restore the &quot;Processed&quot; Flink state to what it was prior to the Task Manager failing. What is the best practice to do this?\r\n\r\nWould Flink&#39;s checkpointed function https://nightlies.apache.org/flink/flink-docs-master/docs/dev/datastream/fault-tolerance/state/#checkpointedfunction help? I think not because this is a keyed stream.\r\n\r\nThings to consider:\r\n\r\n 1. Flink Checkpointing is already enabled.\r\n 2. K8 pod for Task Manager (can be scaled very fast) and Parallelism is always &gt; 1.\r\n 3. Files can have millions of rows and need to be processed in parallel.\r\n\r\nThank you for the help!","title":"Interesting Flink Problem - How to restore state in Flink if the task manager fails in order to gurantee exactly once processing?","body":"<p>Hi I am new to Flink and trying to figure out some best practices with the following scenerio:</p>\n<p>I am playing around with a Flink job that reads unique data from multiple CSV files. Each row in the CSV is composed of three columns: userId, appId, name. I have to do some processing on each of these records (capitalize the name) and post the record to a Kafka Topic.</p>\n<p>The goal is to filter out any duplicate records that exist so we do not have duplicate messages in the output Kafka Topic.</p>\n<p>I am doing a keyBy(userId, appId) on the stream and keeping a boolean value state &quot;Processed&quot; to filter out duplicate records.</p>\n<p>The issue is when I cancel the Task Manager in the middle of processing a file, to simulate a failure, it will start processing the file from the beginning once it restarts.</p>\n<p>This is a problem because the &quot;Processed&quot; State in the Flink job is also wiped clean after the Task Manager fails!</p>\n<p>This leads to duplicate messages in the output Kafka topic.</p>\n<p>How can I prevent this?</p>\n<p>I need to restore the &quot;Processed&quot; Flink state to what it was prior to the Task Manager failing. What is the best practice to do this?</p>\n<p>Would Flink's checkpointed function <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/dev/datastream/fault-tolerance/state/#checkpointedfunction\" rel=\"nofollow noreferrer\">https://nightlies.apache.org/flink/flink-docs-master/docs/dev/datastream/fault-tolerance/state/#checkpointedfunction</a> help? I think not because this is a keyed stream.</p>\n<p>Things to consider:</p>\n<ol>\n<li>Flink Checkpointing is already enabled.</li>\n<li>K8 pod for Task Manager (can be scaled very fast) and Parallelism is always &gt; 1.</li>\n<li>Files can have millions of rows and need to be processed in parallel.</li>\n</ol>\n<p>Thank you for the help!</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4376953,"reputation":19,"user_id":3569730,"display_name":"Stefano Falconetti"},"score":0,"creation_date":1662552296,"post_id":73634288,"comment_id":130031353,"body_markdown":"Well I could have begin of line or a special control char like a Tab..so not only spaces.","body":"Well I could have begin of line or a special control char like a Tab..so not only spaces."},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1663640128,"post_id":73634288,"comment_id":130282010,"body_markdown":"3.67 *is* a decimal number with no leading zeroes.  Did you mean no leading _digits_?","body":"3.67 <i>is</i> a decimal number with no leading zeroes.  Did you mean no leading <i>digits</i>?"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1663640306,"post_id":73634288,"comment_id":130282028,"body_markdown":"Alternately, does &quot;decimal number&quot; mean a number that is between 0 and 1?  Also, should negative numbers be allowed?","body":"Alternately, does &quot;decimal number&quot; mean a number that is between 0 and 1?  Also, should negative numbers be allowed?"}],"answers":[{"tags":[],"owner":{"account_id":6426510,"reputation":17091,"user_id":5527985,"display_name":"bobble bubble"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663620502,"creation_date":1662548656,"answer_id":73634401,"question_id":73634288,"body_markdown":"You want to match the opposite of `\\b` at the start of the pattern. For this, there is [uppercase `\\B`, which matches where `\\b` doesn&#39;t][1].\r\n\r\nBasically, you&#39;re looking for a decimal point that is *not* at a word boundary (because there would be a word boundary between the decimal point and any other numbers), followed by numbers, followed by a word boundary.\r\n\r\n&gt; \\B matches at every position where \\b does not. Effectively, \\B matches at any position between two word characters as well as at any position between two non-word characters.\r\n\r\n    \\B\\.\\d+\\b\r\n\r\n[See this demo at regex101][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/11874899/5527985\r\n  [2]: https://regex101.com/r/GioMy5/1","title":"How to match decimal numbers with no leading zeros?","body":"<p>You want to match the opposite of <code>\\b</code> at the start of the pattern. For this, there is <a href=\"https://stackoverflow.com/a/11874899/5527985\">uppercase <code>\\B</code>, which matches where <code>\\b</code> doesn't</a>.</p>\n<p>Basically, you're looking for a decimal point that is <em>not</em> at a word boundary (because there would be a word boundary between the decimal point and any other numbers), followed by numbers, followed by a word boundary.</p>\n<blockquote>\n<p>\\B matches at every position where \\b does not. Effectively, \\B matches at any position between two word characters as well as at any position between two non-word characters.</p>\n</blockquote>\n<pre><code>\\B\\.\\d+\\b\n</code></pre>\n<p><a href=\"https://regex101.com/r/GioMy5/1\" rel=\"nofollow noreferrer\">See this demo at regex101</a></p>\n"}],"owner":{"account_id":4376953,"reputation":19,"user_id":3569730,"display_name":"Stefano Falconetti"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"closed_date":1662550356,"answer_count":1,"score":-3,"last_activity_date":1663621076,"creation_date":1662548169,"question_id":73634288,"body_markdown":"I&#39;m dealing with a regex in Java that should capture all occurrences of decimal numbers with no leading zeros. \r\n\r\nExample:\r\n\r\n&gt; The cat is .75 high but the dog id 3.67 high instead. All animals\r\n&gt; aren&#39;t higher that .87.\r\n\r\nI expect to capture only **.75** and **.87** as they are decimals with whatever numbers of digits, but without the leading zero. I should not capture **3.67** instead.\r\n\r\nI tried capturing it with word boundaries on both sides:\r\n\r\n    \\b\\.\\d+\\b\r\n\r\nBut the word boundary on the left side of this doesn&#39;t work well. Without the word boundary, it matches **3.67** too.\r\n\r\nWhat would be the correct regex syntax to achieve this requirement?\r\n","title":"How to match decimal numbers with no leading zeros?","body":"<p>I'm dealing with a regex in Java that should capture all occurrences of decimal numbers with no leading zeros.</p>\n<p>Example:</p>\n<blockquote>\n<p>The cat is .75 high but the dog id 3.67 high instead. All animals\naren't higher that .87.</p>\n</blockquote>\n<p>I expect to capture only <strong>.75</strong> and <strong>.87</strong> as they are decimals with whatever numbers of digits, but without the leading zero. I should not capture <strong>3.67</strong> instead.</p>\n<p>I tried capturing it with word boundaries on both sides:</p>\n<pre><code>\\b\\.\\d+\\b\n</code></pre>\n<p>But the word boundary on the left side of this doesn't work well. Without the word boundary, it matches <strong>3.67</strong> too.</p>\n<p>What would be the correct regex syntax to achieve this requirement?</p>\n"},{"tags":["java","elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":12526038,"reputation":353,"user_id":9115820,"display_name":"Clark Ngo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663620887,"creation_date":1663620887,"answer_id":73779191,"question_id":73727157,"body_markdown":"I assume you are retrieving JSON and processing it in Java. Make sure you defined or only capture the fields or nested fields you wanted by defining POJOs. Without this, ElasticSearch would dynamically map any keys inserted resulting to mapping explosion.\r\n\r\nHere are the list of references in ElasticSearch that might help you fix your problem:\r\n\r\nAdding explicit mapping for `objects`\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/object.html\r\n\r\nAdding a limit to avoid mapping explosion\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html#mapping-limit-settings\r\n\r\nAdding explicit mapping in general\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/explicit-mapping.html","title":"Store Map with Collection as Value in Elasticsearch","body":"<p>I assume you are retrieving JSON and processing it in Java. Make sure you defined or only capture the fields or nested fields you wanted by defining POJOs. Without this, ElasticSearch would dynamically map any keys inserted resulting to mapping explosion.</p>\n<p>Here are the list of references in ElasticSearch that might help you fix your problem:</p>\n<p>Adding explicit mapping for <code>objects</code>\n<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/object.html\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/current/object.html</a></p>\n<p>Adding a limit to avoid mapping explosion\n<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html#mapping-limit-settings\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html#mapping-limit-settings</a></p>\n<p>Adding explicit mapping in general\n<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/explicit-mapping.html\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/current/explicit-mapping.html</a></p>\n"}],"owner":{"account_id":2470631,"reputation":99,"user_id":3700923,"accept_rate":40,"display_name":"Clemens"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663620887,"creation_date":1663226898,"question_id":73727157,"body_markdown":"I have a problem storing `private Map&lt;String, Set&lt;String&gt;&gt;` in elastic.\r\n\r\nFor example, I have a variable `private Map&lt;String, Set&lt;String&gt;&gt; updatedFields` with the following content:\r\n\r\n      &quot;updatedFields&quot;: {\r\n        &quot;key1&quot;: [\r\n          &quot;val1&quot;,\r\n          &quot;val2&quot;,\r\n          &quot;val3&quot;\r\n        ],\r\n        &quot;key2&quot;: [\r\n          &quot;val1&quot;,\r\n          &quot;val2&quot;,\r\n          &quot;val3&quot;\r\n        ]\r\n      }\r\n\r\nWith the template mapping `&quot;updatedFields&quot;: {&quot;type&quot;: &quot;object&quot;}` elastic will create automappings for every key stored. This will lead to the following error if more than 1000 unique keys are stored:\r\n\r\n\r\n    failure in bulk execution:\r\n    [0]: index [md_activity_log_stg_ii], type [_doc], id [969d12df-d2c4-446f-975a-d95e76d6e720], message [ElasticsearchException[Elasticsearch exception [type=mapper_parsing_exception, reason=failed to parse]]; nested: ElasticsearchException[Elasticsearch exception [type=illegal_argument_exception, reason=Limit of total fields [1000] has been exceeded while adding new fields [1]]];]\r\n\r\nBy changing the setting to `&quot;updatedFields&quot;: {&quot;type&quot;: &quot;object&quot;, &quot;enabled&quot;: false}` the object is stored but without any content of the array itmes\r\nExample of a document in Elastic after storing:\r\n\r\n\r\n    &quot;updatedFields&quot; : {\r\n          &quot;34b49fbb-7ca8-4dc2-8c1f-21f88324b393&quot; : [ ]\r\n     },\r\n\r\nAnyone knows you to configure the field so that map is correctly stored without exceeding the field limit?\r\n","title":"Store Map with Collection as Value in Elasticsearch","body":"<p>I have a problem storing <code>private Map&lt;String, Set&lt;String&gt;&gt;</code> in elastic.</p>\n<p>For example, I have a variable <code>private Map&lt;String, Set&lt;String&gt;&gt; updatedFields</code> with the following content:</p>\n<pre><code>  &quot;updatedFields&quot;: {\n    &quot;key1&quot;: [\n      &quot;val1&quot;,\n      &quot;val2&quot;,\n      &quot;val3&quot;\n    ],\n    &quot;key2&quot;: [\n      &quot;val1&quot;,\n      &quot;val2&quot;,\n      &quot;val3&quot;\n    ]\n  }\n</code></pre>\n<p>With the template mapping <code>&quot;updatedFields&quot;: {&quot;type&quot;: &quot;object&quot;}</code> elastic will create automappings for every key stored. This will lead to the following error if more than 1000 unique keys are stored:</p>\n<pre><code>failure in bulk execution:\n[0]: index [md_activity_log_stg_ii], type [_doc], id [969d12df-d2c4-446f-975a-d95e76d6e720], message [ElasticsearchException[Elasticsearch exception [type=mapper_parsing_exception, reason=failed to parse]]; nested: ElasticsearchException[Elasticsearch exception [type=illegal_argument_exception, reason=Limit of total fields [1000] has been exceeded while adding new fields [1]]];]\n</code></pre>\n<p>By changing the setting to <code>&quot;updatedFields&quot;: {&quot;type&quot;: &quot;object&quot;, &quot;enabled&quot;: false}</code> the object is stored but without any content of the array itmes\nExample of a document in Elastic after storing:</p>\n<pre><code>&quot;updatedFields&quot; : {\n      &quot;34b49fbb-7ca8-4dc2-8c1f-21f88324b393&quot; : [ ]\n },\n</code></pre>\n<p>Anyone knows you to configure the field so that map is correctly stored without exceeding the field limit?</p>\n"},{"tags":["java","collections","java-stream","comparable","collectors"],"comments":[{"owner":{"account_id":26383273,"reputation":7,"user_id":20036186,"display_name":"Mark Skylarkxx"},"score":0,"creation_date":1663614498,"post_id":73777815,"comment_id":130277071,"body_markdown":"I have  already grouped the Dish by the dish type. But I want to sort the names in ascending order","body":"I have  already grouped the Dish by the dish type. But I want to sort the names in ascending order"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1663615477,"post_id":73777815,"comment_id":130277401,"body_markdown":"Can you explain this phrase *`&quot;supposed to sort the values in ascending order&quot;`*? Value - is not a single object, but a list of strings. `List` doesn&#39;t implements comparable. Do you want it to be compared as a single string?","body":"Can you explain this phrase <i><code>&quot;supposed to sort the values in ascending order&quot;</code></i>? Value - is not a single object, but a list of strings. <code>List</code> doesn&#39;t implements comparable. Do you want it to be compared as a single string?"}],"answers":[{"tags":[],"owner":{"account_id":7474452,"reputation":101,"user_id":5681287,"display_name":"taismile"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663616879,"creation_date":1663616681,"answer_id":73778536,"question_id":73777815,"body_markdown":"Just implement available method of list\r\n- Compare Strings\r\n```java\r\npublic static void main(String[] args) {\r\n        Map&lt;String, List&lt;String&gt;&gt; hmap = new LinkedHashMap&lt;&gt;();\r\n        List&lt;String&gt; values = new ArrayList&lt;&gt;();\r\n        values.add(&quot;d&quot;);\r\n        values.add(&quot;a&quot;);\r\n        values.add(&quot;g&quot;);\r\n\r\n        hmap.put(&quot;1&quot;, values);\r\n        hmap.put(&quot;2&quot;, values); \r\n\r\n        System.out.println(hmap); // --&gt; {1=[d, a, g], 2=[d, a, g]}\r\n\r\n        for(Map.Entry&lt;String,List&lt;String&gt;&gt; entry: hmap.entrySet()){\r\n            entry.getValue().sort(Comparator.naturalOrder());\r\n        }\r\n        System.out.println(hmap); // --&gt; {1=[a, d, g], 2=[a, d, g]}\r\n    }\r\n```\r\n\r\n- Compare by attribute list object\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n        final List menu = Arrays.asList(\r\n                new Dish(&quot;pork&quot;, 800, &quot;Meat&quot;),\r\n                new Dish(&quot;beef&quot;, 700, &quot;Meat&quot;),\r\n                new Dish(&quot;chicken&quot;, 200, &quot;Meat&quot;),\r\n                new Dish(&quot;prawns&quot;, 300, &quot;Fish&quot;),\r\n                new Dish(&quot;salmon&quot;, 450, &quot;Fish&quot;));\r\n\r\n        Map&lt;String, List&lt;Dish&gt;&gt; hmap = new LinkedHashMap&lt;&gt;();\r\n\r\n        hmap.put(&quot;1&quot;, menu);\r\n        hmap.put(&quot;2&quot;, menu);\r\n\r\n        System.out.println(hmap); // --&gt; {1=[Dish{name=&#39;pork&#39;, price=800, type=&#39;Meat&#39;}, Dish{name=&#39;beef&#39;, price=700, type=&#39;Meat&#39;}, Dish{name=&#39;chicken&#39;, price=200, type=&#39;Meat&#39;}, Dish{name=&#39;prawns&#39;, price=300, type=&#39;Fish&#39;}, Dish{name=&#39;salmon&#39;, price=450, type=&#39;Fish&#39;}], 2=[Dish{name=&#39;pork&#39;, price=800, type=&#39;Meat&#39;}, Dish{name=&#39;beef&#39;, price=700, type=&#39;Meat&#39;}, Dish{name=&#39;chicken&#39;, price=200, type=&#39;Meat&#39;}, Dish{name=&#39;prawns&#39;, price=300, type=&#39;Fish&#39;}, Dish{name=&#39;salmon&#39;, price=450, type=&#39;Fish&#39;}]}\r\n\r\n        for (Map.Entry&lt;String, List&lt;Dish&gt;&gt; entry : hmap.entrySet()) {\r\n            entry.getValue().sort(Comparator.comparing(Dish::getName));\r\n        }\r\n        System.out.println(hmap); // --&gt; {1=[Dish{name=&#39;beef&#39;, price=700, type=&#39;Meat&#39;}, Dish{name=&#39;chicken&#39;, price=200, type=&#39;Meat&#39;}, Dish{name=&#39;pork&#39;, price=800, type=&#39;Meat&#39;}, Dish{name=&#39;prawns&#39;, price=300, type=&#39;Fish&#39;}, Dish{name=&#39;salmon&#39;, price=450, type=&#39;Fish&#39;}], 2=[Dish{name=&#39;beef&#39;, price=700, type=&#39;Meat&#39;}, Dish{name=&#39;chicken&#39;, price=200, type=&#39;Meat&#39;}, Dish{name=&#39;pork&#39;, price=800, type=&#39;Meat&#39;}, Dish{name=&#39;prawns&#39;, price=300, type=&#39;Fish&#39;}, Dish{name=&#39;salmon&#39;, price=450, type=&#39;Fish&#39;}]}\r\n\r\n    }\r\n```","title":"How do sort Entries of the Map&lt;Type,List&lt;String&gt;&gt; by Value and store into a LinkedHashMap","body":"<p>Just implement available method of list</p>\n<ul>\n<li>Compare Strings</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n        Map&lt;String, List&lt;String&gt;&gt; hmap = new LinkedHashMap&lt;&gt;();\n        List&lt;String&gt; values = new ArrayList&lt;&gt;();\n        values.add(&quot;d&quot;);\n        values.add(&quot;a&quot;);\n        values.add(&quot;g&quot;);\n\n        hmap.put(&quot;1&quot;, values);\n        hmap.put(&quot;2&quot;, values); \n\n        System.out.println(hmap); // --&gt; {1=[d, a, g], 2=[d, a, g]}\n\n        for(Map.Entry&lt;String,List&lt;String&gt;&gt; entry: hmap.entrySet()){\n            entry.getValue().sort(Comparator.naturalOrder());\n        }\n        System.out.println(hmap); // --&gt; {1=[a, d, g], 2=[a, d, g]}\n    }\n</code></pre>\n<ul>\n<li>Compare by attribute list object</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n        final List menu = Arrays.asList(\n                new Dish(&quot;pork&quot;, 800, &quot;Meat&quot;),\n                new Dish(&quot;beef&quot;, 700, &quot;Meat&quot;),\n                new Dish(&quot;chicken&quot;, 200, &quot;Meat&quot;),\n                new Dish(&quot;prawns&quot;, 300, &quot;Fish&quot;),\n                new Dish(&quot;salmon&quot;, 450, &quot;Fish&quot;));\n\n        Map&lt;String, List&lt;Dish&gt;&gt; hmap = new LinkedHashMap&lt;&gt;();\n\n        hmap.put(&quot;1&quot;, menu);\n        hmap.put(&quot;2&quot;, menu);\n\n        System.out.println(hmap); // --&gt; {1=[Dish{name='pork', price=800, type='Meat'}, Dish{name='beef', price=700, type='Meat'}, Dish{name='chicken', price=200, type='Meat'}, Dish{name='prawns', price=300, type='Fish'}, Dish{name='salmon', price=450, type='Fish'}], 2=[Dish{name='pork', price=800, type='Meat'}, Dish{name='beef', price=700, type='Meat'}, Dish{name='chicken', price=200, type='Meat'}, Dish{name='prawns', price=300, type='Fish'}, Dish{name='salmon', price=450, type='Fish'}]}\n\n        for (Map.Entry&lt;String, List&lt;Dish&gt;&gt; entry : hmap.entrySet()) {\n            entry.getValue().sort(Comparator.comparing(Dish::getName));\n        }\n        System.out.println(hmap); // --&gt; {1=[Dish{name='beef', price=700, type='Meat'}, Dish{name='chicken', price=200, type='Meat'}, Dish{name='pork', price=800, type='Meat'}, Dish{name='prawns', price=300, type='Fish'}, Dish{name='salmon', price=450, type='Fish'}], 2=[Dish{name='beef', price=700, type='Meat'}, Dish{name='chicken', price=200, type='Meat'}, Dish{name='pork', price=800, type='Meat'}, Dish{name='prawns', price=300, type='Fish'}, Dish{name='salmon', price=450, type='Fish'}]}\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663620832,"creation_date":1663616828,"answer_id":73778554,"question_id":73777815,"body_markdown":"None of the Collections implement `Comparable` interface. There&#39;s no point in it, because they are containers of data, if you need to sort the data you&#39;re sorting it within the collection that is capable of maintaining the order. When you need to sort collections - that&#39;s a weird task.\r\n\r\nI said weird because collections like `List` have no knowledge of how to compare their elements, meaning it&#39;s not mandatory for the elements to be comparable, and you can&#39;t provide a comparator while instantiating a list. As a consequence of this, it&#39;s not possible to establish the natural order for a `List`, in other words a list doesn&#39;t &quot;know&quot; how it can be compared with another list.\r\n\r\nYou need to define a *custom* `Comparator` for that purpose.\r\n\r\n&gt; When I have just a `String` as a value (Not `List&lt;String&gt;`). The code works perfectly well.\r\n\r\nAssuming that you want your lists of string to be compared as if each of them is single is a single string (let&#39;s call it *comparison key*), then it would be wise to generate such strings in advance and associate every `Type` of item with a *comparison key* (if you have in mind different comparison strategy - then tweak the code accordingly).\r\n\r\n*Comparison keys* can be generated right on the spot (in the stream), but it would lead to recreating the same strings multiple times. In this case it&#39;s not a big issue since `Item.Type` is an *enum* therefore the number of string comparison keys that correspond to each *enum-constant* is limited, but it wouldn&#39;t hurt to have them ready to use in advance.\r\n\r\n```\r\nList&lt;Item&gt; menu = Arrays.asList(\r\n    new Item(&quot;pork&quot;, 800, Item.Type.Meat),\r\n    new Item(&quot;beef&quot;, 700, Item.Type.Meat),\r\n    new Item(&quot;chicken&quot;, 200, Item.Type.Meat),\r\n    new Item(&quot;prawns&quot;, 300, Item.Type.Fish),\r\n    new Item(&quot;salmon&quot;, 450, Item.Type.Fish)\r\n);\r\n    \r\nMap&lt;Item.Type, List&lt;String&gt;&gt; itemNamesByType = menu.stream()\r\n    .collect(Collectors.groupingBy(\r\n        Item:: getType,\r\n        Collectors.mapping(Item::getName, Collectors.toList())\r\n    ));\r\n\r\n// generating Comparison Keys for every Type\r\n\r\nMap&lt;Item.Type, String&gt; comparisonKeyByType = itemNamesByType.entrySet().stream()\r\n    .collect(Collectors.toMap(\r\n        Map.Entry::getKey,\r\n        entry -&gt; String.join(&quot;&quot;, entry.getValue())\r\n    ));\r\n    \r\nMap&lt;Item.Type, List&lt;String&gt;&gt; itemNamesByTypeSorted = itemNamesByType.entrySet().stream()\r\n    .sorted(Map.Entry.comparingByKey(\r\n        Comparator.comparing(comparisonKeyByType::get)\r\n    ))\r\n    .collect(Collectors.toMap(\r\n        Map.Entry::getKey,   // keyMapper\r\n        Map.Entry::getValue, // valueMapper\r\n        (left, right) -&gt; { throw new AssertionError(&quot;duplicates not expected&quot;); }, // since the source is an entry set - there shouldn&#39;t be duplicate keys (but we need to provide this argument in order to be able to use version of toMap() which allows to provide a mapFactory\r\n        LinkedHashMap::new   // mapFactory\r\n    ));\r\n    \r\nitemNamesByTypeSorted.forEach((k, v) -&gt; System.out.println(k + &quot; -&gt; &quot; + v));\r\n```\r\n*Output:*\r\n```\r\nMeat -&gt; [pork, beef, chicken]\r\nFish -&gt; [prawns, salmon]\r\n```","title":"How do sort Entries of the Map&lt;Type,List&lt;String&gt;&gt; by Value and store into a LinkedHashMap","body":"<p>None of the Collections implement <code>Comparable</code> interface. There's no point in it, because they are containers of data, if you need to sort the data you're sorting it within the collection that is capable of maintaining the order. When you need to sort collections - that's a weird task.</p>\n<p>I said weird because collections like <code>List</code> have no knowledge of how to compare their elements, meaning it's not mandatory for the elements to be comparable, and you can't provide a comparator while instantiating a list. As a consequence of this, it's not possible to establish the natural order for a <code>List</code>, in other words a list doesn't &quot;know&quot; how it can be compared with another list.</p>\n<p>You need to define a <em>custom</em> <code>Comparator</code> for that purpose.</p>\n<blockquote>\n<p>When I have just a <code>String</code> as a value (Not <code>List&lt;String&gt;</code>). The code works perfectly well.</p>\n</blockquote>\n<p>Assuming that you want your lists of string to be compared as if each of them is single is a single string (let's call it <em>comparison key</em>), then it would be wise to generate such strings in advance and associate every <code>Type</code> of item with a <em>comparison key</em> (if you have in mind different comparison strategy - then tweak the code accordingly).</p>\n<p><em>Comparison keys</em> can be generated right on the spot (in the stream), but it would lead to recreating the same strings multiple times. In this case it's not a big issue since <code>Item.Type</code> is an <em>enum</em> therefore the number of string comparison keys that correspond to each <em>enum-constant</em> is limited, but it wouldn't hurt to have them ready to use in advance.</p>\n<pre><code>List&lt;Item&gt; menu = Arrays.asList(\n    new Item(&quot;pork&quot;, 800, Item.Type.Meat),\n    new Item(&quot;beef&quot;, 700, Item.Type.Meat),\n    new Item(&quot;chicken&quot;, 200, Item.Type.Meat),\n    new Item(&quot;prawns&quot;, 300, Item.Type.Fish),\n    new Item(&quot;salmon&quot;, 450, Item.Type.Fish)\n);\n    \nMap&lt;Item.Type, List&lt;String&gt;&gt; itemNamesByType = menu.stream()\n    .collect(Collectors.groupingBy(\n        Item:: getType,\n        Collectors.mapping(Item::getName, Collectors.toList())\n    ));\n\n// generating Comparison Keys for every Type\n\nMap&lt;Item.Type, String&gt; comparisonKeyByType = itemNamesByType.entrySet().stream()\n    .collect(Collectors.toMap(\n        Map.Entry::getKey,\n        entry -&gt; String.join(&quot;&quot;, entry.getValue())\n    ));\n    \nMap&lt;Item.Type, List&lt;String&gt;&gt; itemNamesByTypeSorted = itemNamesByType.entrySet().stream()\n    .sorted(Map.Entry.comparingByKey(\n        Comparator.comparing(comparisonKeyByType::get)\n    ))\n    .collect(Collectors.toMap(\n        Map.Entry::getKey,   // keyMapper\n        Map.Entry::getValue, // valueMapper\n        (left, right) -&gt; { throw new AssertionError(&quot;duplicates not expected&quot;); }, // since the source is an entry set - there shouldn't be duplicate keys (but we need to provide this argument in order to be able to use version of toMap() which allows to provide a mapFactory\n        LinkedHashMap::new   // mapFactory\n    ));\n    \nitemNamesByTypeSorted.forEach((k, v) -&gt; System.out.println(k + &quot; -&gt; &quot; + v));\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>Meat -&gt; [pork, beef, chicken]\nFish -&gt; [prawns, salmon]\n</code></pre>\n"}],"owner":{"account_id":26383273,"reputation":7,"user_id":20036186,"display_name":"Mark Skylarkxx"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":2,"score":-3,"last_activity_date":1663620832,"creation_date":1663612172,"question_id":73777815,"body_markdown":"I have the following `Item` class:\r\n\r\n    @AllArgsConstructor\r\n    @Getter\r\n    public static class Item {\r\n        public enum Type { Meat, Fish }\r\n    \r\n        private String name;\r\n        private int price;\r\n        private Type type;\r\n    }\r\n\r\nAnd there&#39;s a `List` of items like shown below:\r\n\r\n```\r\nList&lt;Item&gt; menu = Arrays.asList(\r\n\tnew Item(&quot;pork&quot; 800, Item.Type.Meat), \r\n\tnew Item(&quot;beef&quot; 700, Item.Type.Meat), \r\n\tnew Item(&quot;chicken&quot;, 200, Item.Type.meat), \r\n\tnew Item(&quot;prawns&quot; 300, Item.Type.Fish),\r\n\tnew Item(&quot;salmon&quot;, 450, Item.Type.Fish)\r\n);\r\n```\r\n\r\nI need to group `Item` by `Type` and store into a map.\r\n\r\nAnd then I need to sort *map entries* by *Value* (which in this case is a `List` of `String`s) in ascending order and store into a `LinkedHashMap`.\r\n\r\nHow do I sort a *map entries* based on a `List&lt;String&gt;` value?\r\n\r\n*My code:*\r\n```\r\n// grouping items by type\r\n\r\nMap&lt;Item.Type, List&lt;String&gt;&gt; map = menu.stream()\r\n    .collect(Collectors.groupingBy(\r\n        Item:: getType,\r\n        Collectors.mapping(Item::getName, Collectors.toList())\r\n    ));\r\n\r\n// a LinkedHashMap to store sorted entries\r\n\r\nMap&lt;Item.Type, List&lt;String&gt;&gt; hmap = new LinkedHashMap&lt;&gt;();\r\n\r\n// attempting to sort map entries by value and put them\r\n//  into the resulting map\r\n\r\nmap.entrySet().stream()\r\n    .sorted(Map.Entry.&lt;Item.Type, List&lt;String&gt;&gt; comparingByValue())\r\n    .forEachOrdered(e -&gt; hmap.put(e.getKey(), e.getValue()));\r\n```\r\nBut I&#39;m getting a compilation error:\r\n```\r\nType parameter &#39;java.util.List&#39; is not within its bound;\r\nshould extend &#39;java.lang.Comparable&lt;? super java.util.List&gt;&#39;\r\n```\r\n\r\nI think the reason is because I have a list of String in a map which I want to sort.\r\n\r\nWhen I have just a `String` as a *value* (Not `List&lt;String&gt;`). The code works perfectly well.","title":"How do sort Entries of the Map&lt;Type,List&lt;String&gt;&gt; by Value and store into a LinkedHashMap","body":"<p>I have the following <code>Item</code> class:</p>\n<pre><code>@AllArgsConstructor\n@Getter\npublic static class Item {\n    public enum Type { Meat, Fish }\n\n    private String name;\n    private int price;\n    private Type type;\n}\n</code></pre>\n<p>And there's a <code>List</code> of items like shown below:</p>\n<pre><code>List&lt;Item&gt; menu = Arrays.asList(\n    new Item(&quot;pork&quot; 800, Item.Type.Meat), \n    new Item(&quot;beef&quot; 700, Item.Type.Meat), \n    new Item(&quot;chicken&quot;, 200, Item.Type.meat), \n    new Item(&quot;prawns&quot; 300, Item.Type.Fish),\n    new Item(&quot;salmon&quot;, 450, Item.Type.Fish)\n);\n</code></pre>\n<p>I need to group <code>Item</code> by <code>Type</code> and store into a map.</p>\n<p>And then I need to sort <em>map entries</em> by <em>Value</em> (which in this case is a <code>List</code> of <code>String</code>s) in ascending order and store into a <code>LinkedHashMap</code>.</p>\n<p>How do I sort a <em>map entries</em> based on a <code>List&lt;String&gt;</code> value?</p>\n<p><em>My code:</em></p>\n<pre><code>// grouping items by type\n\nMap&lt;Item.Type, List&lt;String&gt;&gt; map = menu.stream()\n    .collect(Collectors.groupingBy(\n        Item:: getType,\n        Collectors.mapping(Item::getName, Collectors.toList())\n    ));\n\n// a LinkedHashMap to store sorted entries\n\nMap&lt;Item.Type, List&lt;String&gt;&gt; hmap = new LinkedHashMap&lt;&gt;();\n\n// attempting to sort map entries by value and put them\n//  into the resulting map\n\nmap.entrySet().stream()\n    .sorted(Map.Entry.&lt;Item.Type, List&lt;String&gt;&gt; comparingByValue())\n    .forEachOrdered(e -&gt; hmap.put(e.getKey(), e.getValue()));\n</code></pre>\n<p>But I'm getting a compilation error:</p>\n<pre><code>Type parameter 'java.util.List' is not within its bound;\nshould extend 'java.lang.Comparable&lt;? super java.util.List&gt;'\n</code></pre>\n<p>I think the reason is because I have a list of String in a map which I want to sort.</p>\n<p>When I have just a <code>String</code> as a <em>value</em> (Not <code>List&lt;String&gt;</code>). The code works perfectly well.</p>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":12256232,"reputation":617,"user_id":8945198,"display_name":"AP11"},"score":0,"creation_date":1611402425,"post_id":65858749,"comment_id":116442763,"body_markdown":"I don&#39;t understand, you have some `path` in some `file` and you want to extract that `path` and create new `file` on that path?","body":"I don&#39;t understand, you have some <code>path</code> in some <code>file</code> and you want to extract that <code>path</code> and create new <code>file</code> on that path?"},{"owner":{"account_id":15294974,"reputation":3,"user_id":11035370,"display_name":"vishal mukkapati"},"score":0,"creation_date":1611406899,"post_id":65858749,"comment_id":116444004,"body_markdown":"Actually the i want to display the Path available in file writer and i have updated code to avoid confusion","body":"Actually the i want to display the Path available in file writer and i have updated code to avoid confusion"}],"answers":[{"tags":[],"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611409231,"creation_date":1611409231,"answer_id":65859849,"question_id":65858749,"body_markdown":"You should do it the other way around. First create the `File` instance and then the `FileWriter` with that `File` instance.\r\n\r\n    File f = new File(&quot;C:/Users/91870/Downloads/Boss.txt&quot;);\r\n    FileWriter fw = new FileWriter(f);\r\n    ...\r\n","title":"copy Path in file writer Class into File Class","body":"<p>You should do it the other way around. First create the <code>File</code> instance and then the <code>FileWriter</code> with that <code>File</code> instance.</p>\n<pre><code>File f = new File(&quot;C:/Users/91870/Downloads/Boss.txt&quot;);\nFileWriter fw = new FileWriter(f);\n...\n</code></pre>\n"}],"owner":{"account_id":15294974,"reputation":3,"user_id":11035370,"display_name":"vishal mukkapati"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663620634,"creation_date":1611401831,"question_id":65858749,"body_markdown":"I would like to create a new file using filewriter class and use the exact path in file class (don&#39;t want to copy/paste the manually, any changes in file writer path, we would like to reflect the instances) to get absolute path of the particular file. Can anyone suggest me how?\r\n\r\nFirst I would create a filewriter and later want to use File to display it&#39;s attributes such that any chnages in Fiewriter URL would be displayed.\r\n\r\n```\r\nimport java.io.File;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\npublic class files_read {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\r\ntry {\r\nFileWriter FW=new FileWriter(&quot;C:/Users/91870/Downloads/Boss.txt&quot;);\r\n\r\nFW.write(&quot;yoyo&quot;);\r\nFW.close();\r\nFile f=new File(FW);\r\n\r\n}\r\ncatch(IOException ie)\r\n\r\n{\r\n    System.out.println(&quot;An error occurred.&quot;);\r\n    ie.printStackTrace();\r\n}\r\n\r\n\t}\r\n}\r\n```\r\n","title":"copy Path in file writer Class into File Class","body":"<p>I would like to create a new file using filewriter class and use the exact path in file class (don't want to copy/paste the manually, any changes in file writer path, we would like to reflect the instances) to get absolute path of the particular file. Can anyone suggest me how?</p>\n<p>First I would create a filewriter and later want to use File to display it's attributes such that any chnages in Fiewriter URL would be displayed.</p>\n<pre><code>import java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\npublic class files_read {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\ntry {\nFileWriter FW=new FileWriter(&quot;C:/Users/91870/Downloads/Boss.txt&quot;);\n\nFW.write(&quot;yoyo&quot;);\nFW.close();\nFile f=new File(FW);\n\n}\ncatch(IOException ie)\n\n{\n    System.out.println(&quot;An error occurred.&quot;);\n    ie.printStackTrace();\n}\n\n    }\n}\n</code></pre>\n"},{"tags":["java","html","jsp"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1663561835,"post_id":73768386,"comment_id":130260566,"body_markdown":"You seem to be missing `&lt;/table&gt;`, but I&#39;m not sure that that would cause your problem.  Have you tried looking at the HTML source for the page after it is rendered?  It&#39;s not clear to me whether the HTML is not being generated at all, or whether the browser is just not showing it in the way you expect.","body":"You seem to be missing <code>&lt;&#47;table&gt;</code>, but I&#39;m not sure that that would cause your problem.  Have you tried looking at the HTML source for the page after it is rendered?  It&#39;s not clear to me whether the HTML is not being generated at all, or whether the browser is just not showing it in the way you expect."},{"owner":{"account_id":24872956,"reputation":31,"user_id":18747245,"display_name":"Pherix"},"score":0,"creation_date":1663588167,"post_id":73768386,"comment_id":130267645,"body_markdown":"Yes, I do have the &lt;/table&gt; in it.  (Sorry, was trying to clean up all the comments and things I have tried / commented out for ease of readability.)  As far as the HTML goes, yes - when I view the page source, the HTML just isn&#39;t there.  As if anything that is a result of the out.print lines I have was just simply not generated.","body":"Yes, I do have the &lt;/table&gt; in it.  (Sorry, was trying to clean up all the comments and things I have tried / commented out for ease of readability.)  As far as the HTML goes, yes - when I view the page source, the HTML just isn&#39;t there.  As if anything that is a result of the out.print lines I have was just simply not generated."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1663616547,"post_id":73768386,"comment_id":130277745,"body_markdown":"OK, then I&#39;m wondering if an exception got thrown when you tried to connect to your database.  I see you&#39;re printing a stack trace to the log.  Did you look at the log?  Or if you can&#39;t find the right log to look at, try changing `System.out.println(e);` to `out.print(e);` which will let you see the exception in the page itself.  That might give you a clue as to what&#39;s happening.  It might, for example, be a DNS error or something that prevents the application server from finding the database server.","body":"OK, then I&#39;m wondering if an exception got thrown when you tried to connect to your database.  I see you&#39;re printing a stack trace to the log.  Did you look at the log?  Or if you can&#39;t find the right log to look at, try changing <code>System.out.println(e);</code> to <code>out.print(e);</code> which will let you see the exception in the page itself.  That might give you a clue as to what&#39;s happening.  It might, for example, be a DNS error or something that prevents the application server from finding the database server."},{"owner":{"account_id":24872956,"reputation":31,"user_id":18747245,"display_name":"Pherix"},"score":0,"creation_date":1663618218,"post_id":73768386,"comment_id":130278266,"body_markdown":"@DawoodibnKareem - Thank you for that info.  Yes, I am now seeing the error, &quot;java.sql.SQLException: No suitable driver found for jdbc:mysql:&quot;, and am attempting to read some of the other questions where this was answered, but quite frankly, it seems a little tricky to find.  I found a driver and loaded it in the Tomcat lib folder, but I am still getting the error.","body":"@DawoodibnKareem - Thank you for that info.  Yes, I am now seeing the error, &quot;java.sql.SQLException: No suitable driver found for jdbc:mysql:&quot;, and am attempting to read some of the other questions where this was answered, but quite frankly, it seems a little tricky to find.  I found a driver and loaded it in the Tomcat lib folder, but I am still getting the error."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1663619262,"post_id":73768386,"comment_id":130278581,"body_markdown":"OK, if you&#39;ve found a jar for the mysql driver, added it to the tomcat lib folder, and restarted tomcat; then I don&#39;t know why you&#39;d still get the exception.  Maybe you could try building that same jar into the application itself.  If that doesn&#39;t work, definitely ask a new question here.  Somebody smarter than me might be able to figure it out.","body":"OK, if you&#39;ve found a jar for the mysql driver, added it to the tomcat lib folder, and restarted tomcat; then I don&#39;t know why you&#39;d still get the exception.  Maybe you could try building that same jar into the application itself.  If that doesn&#39;t work, definitely ask a new question here.  Somebody smarter than me might be able to figure it out."},{"owner":{"account_id":24872956,"reputation":31,"user_id":18747245,"display_name":"Pherix"},"score":0,"creation_date":1663620231,"post_id":73768386,"comment_id":130278845,"body_markdown":"@DawoodibnKareem - Ok, thanks to your help, I solved it.  I needed to insert a dependency in my pom.xml file and also add the Class.forName(&quot;com.mysql.jdbc.Driver&quot;) line.","body":"@DawoodibnKareem - Ok, thanks to your help, I solved it.  I needed to insert a dependency in my pom.xml file and also add the Class.forName(&quot;com.mysql.jdbc.Driver&quot;) line."}],"answers":[{"tags":[],"owner":{"account_id":24872956,"reputation":31,"user_id":18747245,"display_name":"Pherix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663620475,"creation_date":1663620475,"answer_id":73779121,"question_id":73768386,"body_markdown":"Was missing a dependency in the pom.xml file, and resolved with the following:\r\n```\r\n &lt;dependency&gt;\r\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n      &lt;version&gt;5.1.39&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n```\r\nThen, had to additionally add the following code on the JSP page for DB connectivity:\r\n```\r\n Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n```\r\n\r\nAll seems to be working now.  Thanks to @DawoodibnKareem for pointing me in the right direction.\r\n","title":"Having trouble with SQL Query to JSP Page","body":"<p>Was missing a dependency in the pom.xml file, and resolved with the following:</p>\n<pre><code> &lt;dependency&gt;\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n      &lt;version&gt;5.1.39&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>Then, had to additionally add the following code on the JSP page for DB connectivity:</p>\n<pre><code> Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\n</code></pre>\n<p>All seems to be working now.  Thanks to @DawoodibnKareem for pointing me in the right direction.</p>\n"}],"owner":{"account_id":24872956,"reputation":31,"user_id":18747245,"display_name":"Pherix"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663620475,"creation_date":1663560280,"question_id":73768386,"body_markdown":"I am trying to write some JAVA to send an SQL query and then return that data back as a table in a JSP page.  The code in JAVA itself works fine outputting to the console, but when I attempt to put into the JSP page for a table, it just ignores it.\r\n\r\nThe following is the code I have for the JSP page:\r\n\r\n```\r\n&lt;%@page import=&quot;entd481.week3_v2_miller.DB&quot;%&gt;\r\n&lt;%@page import=&quot;java.sql.Connection&quot;%&gt;\r\n&lt;%@page import=&quot;java.sql.DriverManager&quot;%&gt;\r\n&lt;%@page import=&quot;java.sql.ResultSet&quot;%&gt;\r\n&lt;%@page import=&quot;java.sql.Statement&quot;%&gt;\r\n&lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n     &lt;body&gt;\r\n        \r\n          &lt;table align=&quot;center&quot; cellpadding=&quot;5&quot; cellspacing=&quot;5&quot; border=&quot;1&quot;&gt;\r\n               &lt;tr bgcolor=&quot;#A52A2A&quot;&gt;\r\n                    &lt;td&gt;&lt;b&gt;Customer ID&lt;/b&gt;&lt;/td&gt;\r\n                    &lt;td&gt;&lt;b&gt;First Name&lt;/b&gt;&lt;/td&gt;\r\n                    &lt;td&gt;&lt;b&gt;Last Name&lt;/b&gt;&lt;/td&gt;\r\n                    &lt;td&gt;&lt;b&gt;E-Mail&lt;/b&gt;&lt;/td&gt;\r\n                    &lt;td&gt;&lt;b&gt;Phone&lt;/b&gt;&lt;/td&gt;\r\n\r\n                    &lt;%       \r\n                         String url = &quot;jdbc:mysql://XXX.XXX.XXX.XX:XXXX/XXXXXXXX&quot;;\r\n                         String username = &quot;XXXXXXX&quot;;\r\n                         String password = &quot;XXXXXXXXX&quot;;\r\n                         String query = &quot;SELECT * FROM XXXXXXX.Customers;&quot;;\r\n             \r\n                         try {\r\n                              Connection conn = DriverManager.getConnection(url, username, password);\r\n                              Statement st = conn.createStatement();\r\n                              ResultSet rs = st.executeQuery(query);\r\n                              while (rs.next()) {\r\n                                   String customerID = rs.getString(&quot;Customer_ID&quot;);\r\n                                   String firstName = rs.getString(&quot;FirstName&quot;);\r\n                                   String lastName = rs.getString(&quot;LastName&quot;);\r\n                                   String email = rs.getString(&quot;email&quot;);\r\n                                   String phoneNumber = rs.getString(&quot;PhoneNumber&quot;); \r\n                \r\n                                   out.print(&quot;&lt;tr&gt;&quot;);\r\n                                   out.print(&quot;&lt;td&gt;&quot; + customerID + &quot;&lt;/td&gt;&quot;);\r\n                                   out.print(&quot;&lt;td&gt;&quot; + firstName + &quot;&lt;/td&gt;&quot;);\r\n                                   out.print(&quot;&lt;td&gt;&quot; + lastName + &quot;&lt;/td&gt;&quot;);\r\n                                   out.print(&quot;&lt;td&gt;&quot; + email + &quot;&lt;/td&gt;&quot;);\r\n                                   out.print(&quot;&lt;td&gt;&quot; + phoneNumber + &quot;&lt;/td&gt;&quot;);\r\n                                   out.print(&quot;&lt;/tr&gt;&quot;);                 \r\n                              }\r\n                              st.close();\r\n                              conn.close();\r\n                         }   \r\n                         catch (Exception e) {\r\n                              System.out.println(e);            \r\n                         }\r\n                    %&gt;\r\n          &lt;/table&gt;\r\n     &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nPrinting out to the console (from the JAVA code standpoint) works great - get all the contents of the DB.  But I am stuck as to why when I run this, the resulting page is blank for results, and none of the HTML that I am telling it to out.print is coming through.\r\n\r\nAny help would be appreciated.","title":"Having trouble with SQL Query to JSP Page","body":"<p>I am trying to write some JAVA to send an SQL query and then return that data back as a table in a JSP page.  The code in JAVA itself works fine outputting to the console, but when I attempt to put into the JSP page for a table, it just ignores it.</p>\n<p>The following is the code I have for the JSP page:</p>\n<pre><code>&lt;%@page import=&quot;entd481.week3_v2_miller.DB&quot;%&gt;\n&lt;%@page import=&quot;java.sql.Connection&quot;%&gt;\n&lt;%@page import=&quot;java.sql.DriverManager&quot;%&gt;\n&lt;%@page import=&quot;java.sql.ResultSet&quot;%&gt;\n&lt;%@page import=&quot;java.sql.Statement&quot;%&gt;\n&lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n     &lt;body&gt;\n        \n          &lt;table align=&quot;center&quot; cellpadding=&quot;5&quot; cellspacing=&quot;5&quot; border=&quot;1&quot;&gt;\n               &lt;tr bgcolor=&quot;#A52A2A&quot;&gt;\n                    &lt;td&gt;&lt;b&gt;Customer ID&lt;/b&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;b&gt;First Name&lt;/b&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;b&gt;Last Name&lt;/b&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;b&gt;E-Mail&lt;/b&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;b&gt;Phone&lt;/b&gt;&lt;/td&gt;\n\n                    &lt;%       \n                         String url = &quot;jdbc:mysql://XXX.XXX.XXX.XX:XXXX/XXXXXXXX&quot;;\n                         String username = &quot;XXXXXXX&quot;;\n                         String password = &quot;XXXXXXXXX&quot;;\n                         String query = &quot;SELECT * FROM XXXXXXX.Customers;&quot;;\n             \n                         try {\n                              Connection conn = DriverManager.getConnection(url, username, password);\n                              Statement st = conn.createStatement();\n                              ResultSet rs = st.executeQuery(query);\n                              while (rs.next()) {\n                                   String customerID = rs.getString(&quot;Customer_ID&quot;);\n                                   String firstName = rs.getString(&quot;FirstName&quot;);\n                                   String lastName = rs.getString(&quot;LastName&quot;);\n                                   String email = rs.getString(&quot;email&quot;);\n                                   String phoneNumber = rs.getString(&quot;PhoneNumber&quot;); \n                \n                                   out.print(&quot;&lt;tr&gt;&quot;);\n                                   out.print(&quot;&lt;td&gt;&quot; + customerID + &quot;&lt;/td&gt;&quot;);\n                                   out.print(&quot;&lt;td&gt;&quot; + firstName + &quot;&lt;/td&gt;&quot;);\n                                   out.print(&quot;&lt;td&gt;&quot; + lastName + &quot;&lt;/td&gt;&quot;);\n                                   out.print(&quot;&lt;td&gt;&quot; + email + &quot;&lt;/td&gt;&quot;);\n                                   out.print(&quot;&lt;td&gt;&quot; + phoneNumber + &quot;&lt;/td&gt;&quot;);\n                                   out.print(&quot;&lt;/tr&gt;&quot;);                 \n                              }\n                              st.close();\n                              conn.close();\n                         }   \n                         catch (Exception e) {\n                              System.out.println(e);            \n                         }\n                    %&gt;\n          &lt;/table&gt;\n     &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Printing out to the console (from the JAVA code standpoint) works great - get all the contents of the DB.  But I am stuck as to why when I run this, the resulting page is blank for results, and none of the HTML that I am telling it to out.print is coming through.</p>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":2,"creation_date":1663612245,"post_id":73777787,"comment_id":130276352,"body_markdown":"You give too little information for us to be able to help you. Please read [ask] then [edit] your question to add some details about a specific problem you need help with.","body":"You give too little information for us to be able to help you. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> then <a href=\"https://stackoverflow.com/posts/73777787/edit\">edit</a> your question to add some details about a specific problem you need help with."},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":2,"creation_date":1663612336,"post_id":73777787,"comment_id":130276383,"body_markdown":"With that said, step away from your computer and think about how you would solve this by hand. Let&#39;s say you have a die, paper, and pencil. You roll the die and then what do you do to keep track of the counts for each number? Try to describe this as clearly as you can in plain English.","body":"With that said, step away from your computer and think about how you would solve this by hand. Let&#39;s say you have a die, paper, and pencil. You roll the die and then what do you do to keep track of the counts for each number? Try to describe this as clearly as you can in plain English."},{"owner":{"account_id":26383372,"reputation":11,"user_id":20036279,"display_name":"Carlos"},"score":2,"creation_date":1663613089,"post_id":73777787,"comment_id":130276620,"body_markdown":"I would use the pencil to write down a list on the paper of all the sums I get. After that I just go down the list and count the amount of times I get a specific number. I would then write down the sum and how many times it came up. I would repeat this process for all 100 rolls.","body":"I would use the pencil to write down a list on the paper of all the sums I get. After that I just go down the list and count the amount of times I get a specific number. I would then write down the sum and how many times it came up. I would repeat this process for all 100 rolls."},{"owner":{"account_id":4924789,"reputation":602,"user_id":4038800,"display_name":"DonCarleone"},"score":0,"creation_date":1663613837,"post_id":73777787,"comment_id":130276856,"body_markdown":"You can use a hashmap to pair up each number with a frequency, but it sounds like you want to use an array. You can create an array of integers of size 11 (2-12 is 11 numbers). Each time a particular number occurs, you can increment the index for that number. Being that you&#39;re dealing with 2-12, you would need to offset the index by 2, `freq_array[current_dice_roll -2] += 1`","body":"You can use a hashmap to pair up each number with a frequency, but it sounds like you want to use an array. You can create an array of integers of size 11 (2-12 is 11 numbers). Each time a particular number occurs, you can increment the index for that number. Being that you&#39;re dealing with 2-12, you would need to offset the index by 2, <code>freq_array[current_dice_roll -2] += 1</code>"},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1663616100,"post_id":73777787,"comment_id":130277600,"body_markdown":"@Carlos That&#39;s a good start! So start with the first step &quot;write down a list on the paper of all the sums I get&quot;. Try to figure out how you would store that list of sums in an array.","body":"@Carlos That&#39;s a good start! So start with the first step &quot;write down a list on the paper of all the sums I get&quot;. Try to figure out how you would store that list of sums in an array."}],"answers":[{"tags":[],"owner":{"account_id":8052320,"reputation":180,"user_id":6070462,"display_name":"Aastha Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663620099,"creation_date":1663620099,"answer_id":73779072,"question_id":73777787,"body_markdown":"You can use an array(or hashmap) to store the count of the number of times the sum is repeated(2- 12). Here is the solution using an array:\r\n\r\n***Solution using Array:***\r\n\r\nint[] diceSum = new int[12]; \r\n\r\n 1. index -&gt; 2 - 12 denotes the sum of the dices (can ignore 0,1 index)\r\n 2. diceSum[index] = frequency [ tells the frequency/count of each sum ]\r\n\r\nEvery-time user throw Dice, put the frequency in index position. If it is zero, put one or otherwise increment the old value by 1.\r\n\r\n**diceSum[index] = diceSum[index] + 1;**\r\n----------------------------------------\r\n\r\n&gt; *Function*:\r\n&gt; \r\n&gt; *throwDice() -&gt; throwing a pair of dice which return&#39;s sum (M+N)*\r\n\r\n    int[] diceSum = new int[12]; //by default all index have value 0&#39;s\r\n    \r\n    for(int j = 0; j &lt; numberOfThrows; j++){\r\n        int sum = throwDice(); // throwDice returns number between 2-12\r\n        diceSum[index] = diceSum[index] + 1; //increment the count for each sum\r\n    }\r\n    \r\n    return diceSum;\r\n\r\n\r\n    throwDice() -&gt; returns (2,3) -&gt; 2 + 3 = 5;   --&gt;  diceSum[5] = 1;\r\n    throwDice() -&gt; returns (2,3) -&gt; 3 + 4 = 7;   --&gt;  diceSum[7] = 1;\r\n    throwDice() -&gt; returns (2,3) -&gt; 2 + 8 = 10;   --&gt; diceSum[10] = 1;\r\n    throwDice() -&gt; returns (2,3) -&gt; 4 + 1 = 5;   --&gt;  diceSum[5] = 2;\r\n    throwDice() -&gt; returns (2,3) -&gt; 6 + 6 = 5;   --&gt;  diceSum[12] = 1;\r\n    throwDice() -&gt; returns (2,3) -&gt; 4 + 8 = 5;   --&gt;  diceSum[12] = 2;\r\n\r\n***Solution using HashMap:***\r\n\r\nSimilarly, 2-12 can be considered as key in the hashMap and value can be the frequency for the sum. Solution is given below :\r\n\r\n    Map&lt;Integer,Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();\r\n    \r\n    for(int diceSum = 2; diceSum &lt;= 12; diceSum++){\r\n         map.put(diceSum, 0);\r\n    }\r\n    \r\n    for(int j = 0; j &lt; numberOfThrows; j++){\r\n        int sum = throwDice(); // throwDice returns number between 2-12\r\n        map.put(sum, map.get(sum) + 1); //increment the count for each sum\r\n    }\r\n\r\n    return map;\r\n\r\n\r\nHope this helps.","title":"How to count the number of times a number comes up?","body":"<p>You can use an array(or hashmap) to store the count of the number of times the sum is repeated(2- 12). Here is the solution using an array:</p>\n<p><em><strong>Solution using Array:</strong></em></p>\n<p>int[] diceSum = new int[12];</p>\n<ol>\n<li>index -&gt; 2 - 12 denotes the sum of the dices (can ignore 0,1 index)</li>\n<li>diceSum[index] = frequency [ tells the frequency/count of each sum ]</li>\n</ol>\n<p>Every-time user throw Dice, put the frequency in index position. If it is zero, put one or otherwise increment the old value by 1.</p>\n<h2><strong>diceSum[index] = diceSum[index] + 1;</strong></h2>\n<blockquote>\n<p><em>Function</em>:</p>\n<p><em>throwDice() -&gt; throwing a pair of dice which return's sum (M+N)</em></p>\n</blockquote>\n<pre><code>int[] diceSum = new int[12]; //by default all index have value 0's\n\nfor(int j = 0; j &lt; numberOfThrows; j++){\n    int sum = throwDice(); // throwDice returns number between 2-12\n    diceSum[index] = diceSum[index] + 1; //increment the count for each sum\n}\n\nreturn diceSum;\n\n\nthrowDice() -&gt; returns (2,3) -&gt; 2 + 3 = 5;   --&gt;  diceSum[5] = 1;\nthrowDice() -&gt; returns (2,3) -&gt; 3 + 4 = 7;   --&gt;  diceSum[7] = 1;\nthrowDice() -&gt; returns (2,3) -&gt; 2 + 8 = 10;   --&gt; diceSum[10] = 1;\nthrowDice() -&gt; returns (2,3) -&gt; 4 + 1 = 5;   --&gt;  diceSum[5] = 2;\nthrowDice() -&gt; returns (2,3) -&gt; 6 + 6 = 5;   --&gt;  diceSum[12] = 1;\nthrowDice() -&gt; returns (2,3) -&gt; 4 + 8 = 5;   --&gt;  diceSum[12] = 2;\n</code></pre>\n<p><em><strong>Solution using HashMap:</strong></em></p>\n<p>Similarly, 2-12 can be considered as key in the hashMap and value can be the frequency for the sum. Solution is given below :</p>\n<pre><code>Map&lt;Integer,Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();\n\nfor(int diceSum = 2; diceSum &lt;= 12; diceSum++){\n     map.put(diceSum, 0);\n}\n\nfor(int j = 0; j &lt; numberOfThrows; j++){\n    int sum = throwDice(); // throwDice returns number between 2-12\n    map.put(sum, map.get(sum) + 1); //increment the count for each sum\n}\n\nreturn map;\n</code></pre>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":26383372,"reputation":11,"user_id":20036279,"display_name":"Carlos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1663621632,"answer_count":1,"score":1,"last_activity_date":1663620099,"creation_date":1663612026,"question_id":73777787,"body_markdown":"Im making a code for class where you roll a pair of dice x amount of times. I got the loop and values working, but I&#39;m not sure how to go on and actually count how many times a sum is repeated (2-12). I was looking online and saw that an array could help, but nowhere in the directions does it mention anything about an array. Im still a very new cs student so I am not 100 percent familiar with everything. Thank you.  ","title":"How to count the number of times a number comes up?","body":"<p>Im making a code for class where you roll a pair of dice x amount of times. I got the loop and values working, but I'm not sure how to go on and actually count how many times a sum is repeated (2-12). I was looking online and saw that an array could help, but nowhere in the directions does it mention anything about an array. Im still a very new cs student so I am not 100 percent familiar with everything. Thank you.</p>\n"},{"tags":["java","xls","jxl"],"comments":[{"owner":{"account_id":928781,"reputation":746,"user_id":959053,"display_name":"Ben van Gompel"},"score":0,"creation_date":1323177134,"post_id":8400236,"comment_id":10372266,"body_markdown":"The stack trace above does not appear to refer to any of your code. Did you include the complete stack trace from the exception?","body":"The stack trace above does not appear to refer to any of your code. Did you include the complete stack trace from the exception?"},{"owner":{"account_id":84585,"reputation":7493,"user_id":236345,"accept_rate":87,"display_name":"Alfabravo"},"score":0,"creation_date":1323179414,"post_id":8400236,"comment_id":10372973,"body_markdown":"Surround the code with try/catch. Are you sure the file is being created in C:\\?","body":"Surround the code with try/catch. Are you sure the file is being created in C:\\?"}],"answers":[{"tags":[],"owner":{"account_id":2606845,"reputation":81,"user_id":2257845,"display_name":"MattW"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1394037941,"creation_date":1394012418,"answer_id":22193878,"question_id":8400236,"body_markdown":"I face the same problem. But it occurs only if I try to create more than one excel file by the same class. Means if i create two files by one junit test it occurs. If I do this by two separate unit test classes everything works fine. I am just searching for a kind of strong reference in the jxl code.&lt;br&gt;\r\nUntil then I found a Workaround:\r\n\r\n    WorkbookSettings wbSettings = new WorkbookSettings();\r\n    wbSettings.setRationalization(false);\r\n\r\nThe problem occurs due to the FormattingRecords.rationalize() method. This setting above switches of the rationalization process. DateFormats and NumberFormats and so on will work **BUT** you will loose the WritableFonts for the cell format by doing this.\r\n\r\nStay tuned - maybe I will find more.\r\n\r\n... I found more:\r\nThe main problem is that the jxl.biff.Fonts class is not reinitialized correctly and only contains the 4 default FontRecord entities. I dug a bit deeper and found that in the initialize method of the XFRecord class there is an if statement:\r\n\r\n    if (!font.isInitialized())\r\n    {\r\n       fonts.addFont(font);\r\n    }\r\nFor the very first time a font is not initialized and will be added here successfully. For all other iterations the font is initialized and won&#39;t be added. No idea who holds the XFRecords and why it isn&#39;t refreshed correctly. But I found a working workaround:\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private void adjustUsedFonts(WritableWorkbook workbook) throws NoSuchFieldException, IllegalAccessException {\r\n        WritableWorkbookImpl workbookImpl = (WritableWorkbookImpl) workbook;\r\n        Field fontsField = WritableWorkbookImpl.class.getDeclaredField(&quot;fonts&quot;);\r\n        fontsField.setAccessible(true);\r\n        Fonts fonts = (Fonts) fontsField.get(workbookImpl);\r\n        Field fontsListField = Fonts.class.getDeclaredField(&quot;fonts&quot;);\r\n        fontsListField.setAccessible(true);\r\n        ArrayList&lt;FontRecord&gt; fontRecords = (ArrayList&lt;FontRecord&gt;) fontsListField.get(fonts);\r\n        // just to get to know which fonts are available\r\n        for (FontRecord fontRecord : fontRecords) {\r\n            logger.info(&quot;found font: name={}; size={}&quot;, fontRecord.getName(), fontRecord.getPointSize());\r\n        }\r\n        // DON&#39;T DO THIS HARDCODED LIKE THIS \r\n        // BUT CHECK IF YOUR FONTS ARE AVAILABLE AND ADD IF NOT\r\n        if (fontRecords.size() == 4) {\r\n            logger.info(&quot;only 4 fonts available - add necessary ones&quot;);\r\n            fontRecords.add(tableDefaultFont);\r\n        }\r\n    }\r\nI put this method in front of calling the workbook.write method. And it works all fonts are available.\r\nI know this is a hack and no good solution. This is why I will open an issue at their Ticket-Queue (the hack is only for those who cannot wait until the fix is available).\r\n\r\nI used this version of jxl and it seemed to be the latest:&lt;br&gt;\r\ngroupId: net.sourceforge.jexcelapi&lt;br&gt;\r\nartifactId: jxl&lt;br&gt;\r\nversion: 2.6.12\r\n\r\nADDITION:\r\nIf you have more than one own font you will also need to add it in the right order by using its fontIndex. Otherwise fonts will be mixed up. I wrote a helpful method to find out the right index:\r\n\r\n        private void determineFontIndizesOfOwnFonts(WritableWorkbook workbook) throws NoSuchFieldException, IllegalAccessException {\r\n        WritableWorkbookImpl workbookImpl = (WritableWorkbookImpl) workbook;\r\n        Field frField = WritableWorkbookImpl.class.getDeclaredField(&quot;formatRecords&quot;);\r\n        frField.setAccessible(true);\r\n        FormattingRecords formRecords = (FormattingRecords) frField.get(workbookImpl);\r\n        Field xfRecordListField = FormattingRecords.class.getDeclaredField(&quot;xfRecords&quot;);\r\n        xfRecordListField.setAccessible(true);\r\n        ArrayList&lt;XFRecord&gt; xfRecords = (ArrayList&lt;XFRecord&gt;) xfRecordListField.get(formRecords);\r\n        logger.debug(&quot;amount of xfRecords: {}&quot;, xfRecords.size());\r\n        for (XFRecord curXfRecord : xfRecords) {\r\n            Font curFont = curXfRecord.getFont();\r\n            if (curFont.equals(tableHeaderFont)) {\r\n                logger.debug(&quot;font &#39;tableHeaderFont&#39; info: idx={}, initialized={}, font[{}, {}px]&quot;, curXfRecord.getFontIndex(), curXfRecord.isInitialized(),\r\n                        curFont.getName(), curFont.getPointSize());\r\n                if (!fontIdxToName.containsKey(curXfRecord.getFontIndex())) {\r\n                    fontIdxToName.put(curXfRecord.getFontIndex(), tableHeaderFont);\r\n                }\r\n            }\r\n            if (curFont.equals(tableContentFont)) {\r\n                logger.debug(&quot;font &#39;tableContentFont&#39; info: idx={}, initialized={}, font[{}, {}px]&quot;, curXfRecord.getFontIndex(), curXfRecord.isInitialized(),\r\n                        curFont.getName(), curFont.getPointSize());\r\n                if (!fontIdxToName.containsKey(curXfRecord.getFontIndex())) {\r\n                    fontIdxToName.put(curXfRecord.getFontIndex(), tableContentFont);\r\n                }\r\n            }\r\n            if (curFont.equals(tableImportantOrFooterFont)) {\r\n                logger.debug(&quot;font &#39;tableImportantOrFooterFont&#39; info: idx={}, initialized={}, font[{}, {}px]&quot;, curXfRecord.getFontIndex(),\r\n                        curXfRecord.isInitialized(), curFont.getName(), curFont.getPointSize());\r\n                if (!fontIdxToName.containsKey(curXfRecord.getFontIndex())) {\r\n                    fontIdxToName.put(curXfRecord.getFontIndex(), tableImportantOrFooterFont);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nthen afterwards just add it in the right order see other method.","title":"ArrayIndexOutOfBoundException with jxl api when trying to copy content from one sheet to another","body":"<p>I face the same problem. But it occurs only if I try to create more than one excel file by the same class. Means if i create two files by one junit test it occurs. If I do this by two separate unit test classes everything works fine. I am just searching for a kind of strong reference in the jxl code.<br>\nUntil then I found a Workaround:</p>\n\n<pre><code>WorkbookSettings wbSettings = new WorkbookSettings();\nwbSettings.setRationalization(false);\n</code></pre>\n\n<p>The problem occurs due to the FormattingRecords.rationalize() method. This setting above switches of the rationalization process. DateFormats and NumberFormats and so on will work <strong>BUT</strong> you will loose the WritableFonts for the cell format by doing this.</p>\n\n<p>Stay tuned - maybe I will find more.</p>\n\n<p>... I found more:\nThe main problem is that the jxl.biff.Fonts class is not reinitialized correctly and only contains the 4 default FontRecord entities. I dug a bit deeper and found that in the initialize method of the XFRecord class there is an if statement:</p>\n\n<pre><code>if (!font.isInitialized())\n{\n   fonts.addFont(font);\n}\n</code></pre>\n\n<p>For the very first time a font is not initialized and will be added here successfully. For all other iterations the font is initialized and won't be added. No idea who holds the XFRecords and why it isn't refreshed correctly. But I found a working workaround:</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\nprivate void adjustUsedFonts(WritableWorkbook workbook) throws NoSuchFieldException, IllegalAccessException {\n    WritableWorkbookImpl workbookImpl = (WritableWorkbookImpl) workbook;\n    Field fontsField = WritableWorkbookImpl.class.getDeclaredField(\"fonts\");\n    fontsField.setAccessible(true);\n    Fonts fonts = (Fonts) fontsField.get(workbookImpl);\n    Field fontsListField = Fonts.class.getDeclaredField(\"fonts\");\n    fontsListField.setAccessible(true);\n    ArrayList&lt;FontRecord&gt; fontRecords = (ArrayList&lt;FontRecord&gt;) fontsListField.get(fonts);\n    // just to get to know which fonts are available\n    for (FontRecord fontRecord : fontRecords) {\n        logger.info(\"found font: name={}; size={}\", fontRecord.getName(), fontRecord.getPointSize());\n    }\n    // DON'T DO THIS HARDCODED LIKE THIS \n    // BUT CHECK IF YOUR FONTS ARE AVAILABLE AND ADD IF NOT\n    if (fontRecords.size() == 4) {\n        logger.info(\"only 4 fonts available - add necessary ones\");\n        fontRecords.add(tableDefaultFont);\n    }\n}\n</code></pre>\n\n<p>I put this method in front of calling the workbook.write method. And it works all fonts are available.\nI know this is a hack and no good solution. This is why I will open an issue at their Ticket-Queue (the hack is only for those who cannot wait until the fix is available).</p>\n\n<p>I used this version of jxl and it seemed to be the latest:<br>\ngroupId: net.sourceforge.jexcelapi<br>\nartifactId: jxl<br>\nversion: 2.6.12</p>\n\n<p>ADDITION:\nIf you have more than one own font you will also need to add it in the right order by using its fontIndex. Otherwise fonts will be mixed up. I wrote a helpful method to find out the right index:</p>\n\n<pre><code>    private void determineFontIndizesOfOwnFonts(WritableWorkbook workbook) throws NoSuchFieldException, IllegalAccessException {\n    WritableWorkbookImpl workbookImpl = (WritableWorkbookImpl) workbook;\n    Field frField = WritableWorkbookImpl.class.getDeclaredField(\"formatRecords\");\n    frField.setAccessible(true);\n    FormattingRecords formRecords = (FormattingRecords) frField.get(workbookImpl);\n    Field xfRecordListField = FormattingRecords.class.getDeclaredField(\"xfRecords\");\n    xfRecordListField.setAccessible(true);\n    ArrayList&lt;XFRecord&gt; xfRecords = (ArrayList&lt;XFRecord&gt;) xfRecordListField.get(formRecords);\n    logger.debug(\"amount of xfRecords: {}\", xfRecords.size());\n    for (XFRecord curXfRecord : xfRecords) {\n        Font curFont = curXfRecord.getFont();\n        if (curFont.equals(tableHeaderFont)) {\n            logger.debug(\"font 'tableHeaderFont' info: idx={}, initialized={}, font[{}, {}px]\", curXfRecord.getFontIndex(), curXfRecord.isInitialized(),\n                    curFont.getName(), curFont.getPointSize());\n            if (!fontIdxToName.containsKey(curXfRecord.getFontIndex())) {\n                fontIdxToName.put(curXfRecord.getFontIndex(), tableHeaderFont);\n            }\n        }\n        if (curFont.equals(tableContentFont)) {\n            logger.debug(\"font 'tableContentFont' info: idx={}, initialized={}, font[{}, {}px]\", curXfRecord.getFontIndex(), curXfRecord.isInitialized(),\n                    curFont.getName(), curFont.getPointSize());\n            if (!fontIdxToName.containsKey(curXfRecord.getFontIndex())) {\n                fontIdxToName.put(curXfRecord.getFontIndex(), tableContentFont);\n            }\n        }\n        if (curFont.equals(tableImportantOrFooterFont)) {\n            logger.debug(\"font 'tableImportantOrFooterFont' info: idx={}, initialized={}, font[{}, {}px]\", curXfRecord.getFontIndex(),\n                    curXfRecord.isInitialized(), curFont.getName(), curFont.getPointSize());\n            if (!fontIdxToName.containsKey(curXfRecord.getFontIndex())) {\n                fontIdxToName.put(curXfRecord.getFontIndex(), tableImportantOrFooterFont);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>then afterwards just add it in the right order see other method.</p>\n"},{"tags":[],"owner":{"account_id":2031219,"reputation":2191,"user_id":1814867,"accept_rate":50,"display_name":"Mandar Pandit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1432269241,"creation_date":1432269241,"answer_id":30388430,"question_id":8400236,"body_markdown":"I was also facing the same problem. I am using JXL library 2.6.12.\r\nI was working with two different &quot;.xls&quot; files and was applying 3 different WritableCellFormat styles. When I was using the same three writable format objects in both the &quot;.xls&quot; cells, it was causing the problem.&lt;br&gt;\r\n&lt;br&gt;&lt;b&gt;Solution:&lt;/b&gt;&lt;br&gt; I have created a method where I am creating different objects for WritableCellFormat. I called this method on both &quot;.xls&quot; workbook creation, separately. This worked as, both &quot;.xls&quot; files workbook creation is done with different objects of writable cell format.","title":"ArrayIndexOutOfBoundException with jxl api when trying to copy content from one sheet to another","body":"<p>I was also facing the same problem. I am using JXL library 2.6.12.\nI was working with two different \".xls\" files and was applying 3 different WritableCellFormat styles. When I was using the same three writable format objects in both the \".xls\" cells, it was causing the problem.<br>\n<br><b>Solution:</b><br> I have created a method where I am creating different objects for WritableCellFormat. I called this method on both \".xls\" workbook creation, separately. This worked as, both \".xls\" files workbook creation is done with different objects of writable cell format.</p>\n"},{"tags":[],"owner":{"account_id":12855735,"reputation":11,"user_id":11696721,"display_name":"JohnCPun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579631477,"creation_date":1561455283,"answer_id":56750955,"question_id":8400236,"body_markdown":"I have just had this problem as well, both with version 2.4.2 and 2.6.12.\r\n\r\nI solved it by no longer making any of the Fonts / DisplayFormats / WritableCellFormats objects static.\r\n\r\nTo be fair, I did find the solution here:\r\nhttp://www.logikdev.com/2010/01/18/writablefont-doesnt-like-to-be-static/\r\nWhich also references the JExcelAPI FAQ:\r\n&gt; From http://jexcelapi.sourceforge.net/resources/faq/\r\n&gt; \r\n&gt; “also, it’s important that you Do Not declare your cell formats as static. As a cell format is added to a sheet, it gets assigned an internal index number. If you have two threads (such as in a Web environment) writing two different spreadsheets, the format numbers will get confused and the resulting sheet could either be corrupted or incorrect.”\r\n\r\n------------\r\n\r\n***Edit: little clarification based on comments.***\r\n\r\nInitially my implementation was like this:\r\n\r\n```\r\npublic class SomeExcelThing() { \r\n   private final static MY_FONT = new Font(); \r\n\r\n   public createCell() { \r\n      return new Cell(MY_FONT);\r\n   }\r\n}\r\n```\r\n\r\nBecause it was now re-using the same Font object everytime a new cell was created, it gave that error. So then I changed it around to be: \r\n\r\n```\r\npublic class SomeExcelThing() {\r\n   public createCell() {\r\n      return new Cell(new Font());\r\n   }\r\n}\r\n```\r\n\r\nSo you should not make a constant out of Fonts, DisplayFormats, WritableCellFormats, as these would create these errors. So if you want to reuse a certain font, I would create a method to get the font you want, which would each time create a new font-object, instead of using a constant: \r\n```\r\npublic class SomeExcelThing() {\r\n   public createCell() {\r\n      return new Cell(getMyFont());\r\n   }\r\n\r\n   private Font getMyFont() {\r\n      return new Font();\r\n   }\r\n}\r\n```","title":"ArrayIndexOutOfBoundException with jxl api when trying to copy content from one sheet to another","body":"<p>I have just had this problem as well, both with version 2.4.2 and 2.6.12.</p>\n\n<p>I solved it by no longer making any of the Fonts / DisplayFormats / WritableCellFormats objects static.</p>\n\n<p>To be fair, I did find the solution here:\n<a href=\"http://www.logikdev.com/2010/01/18/writablefont-doesnt-like-to-be-static/\" rel=\"nofollow noreferrer\">http://www.logikdev.com/2010/01/18/writablefont-doesnt-like-to-be-static/</a>\nWhich also references the JExcelAPI FAQ:</p>\n\n<blockquote>\n  <p>From <a href=\"http://jexcelapi.sourceforge.net/resources/faq/\" rel=\"nofollow noreferrer\">http://jexcelapi.sourceforge.net/resources/faq/</a></p>\n  \n  <p>“also, it’s important that you Do Not declare your cell formats as static. As a cell format is added to a sheet, it gets assigned an internal index number. If you have two threads (such as in a Web environment) writing two different spreadsheets, the format numbers will get confused and the resulting sheet could either be corrupted or incorrect.”</p>\n</blockquote>\n\n<hr>\n\n<p><strong><em>Edit: little clarification based on comments.</em></strong></p>\n\n<p>Initially my implementation was like this:</p>\n\n<pre><code>public class SomeExcelThing() { \n   private final static MY_FONT = new Font(); \n\n   public createCell() { \n      return new Cell(MY_FONT);\n   }\n}\n</code></pre>\n\n<p>Because it was now re-using the same Font object everytime a new cell was created, it gave that error. So then I changed it around to be: </p>\n\n<pre><code>public class SomeExcelThing() {\n   public createCell() {\n      return new Cell(new Font());\n   }\n}\n</code></pre>\n\n<p>So you should not make a constant out of Fonts, DisplayFormats, WritableCellFormats, as these would create these errors. So if you want to reuse a certain font, I would create a method to get the font you want, which would each time create a new font-object, instead of using a constant: </p>\n\n<pre><code>public class SomeExcelThing() {\n   public createCell() {\n      return new Cell(getMyFont());\n   }\n\n   private Font getMyFont() {\n      return new Font();\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8385152,"reputation":11,"user_id":6295798,"display_name":"Ali Haider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663619834,"creation_date":1663619834,"answer_id":73779026,"question_id":8400236,"body_markdown":"try this\r\n\r\n    // make sure you only use .xls extension\r\n        String filepath = &quot;/Users/username/Downloads/Projects/Java/jExcelProject/reports/file.xls&quot;;\r\n        Workbook workbook = Workbook.getWorkbook(new File(filePath));","title":"ArrayIndexOutOfBoundException with jxl api when trying to copy content from one sheet to another","body":"<p>try this</p>\n<pre><code>// make sure you only use .xls extension\n    String filepath = &quot;/Users/username/Downloads/Projects/Java/jExcelProject/reports/file.xls&quot;;\n    Workbook workbook = Workbook.getWorkbook(new File(filePath));\n</code></pre>\n"}],"owner":{"account_id":421918,"reputation":2090,"user_id":800409,"accept_rate":53,"display_name":"Amit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3566,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1663619834,"creation_date":1323176156,"question_id":8400236,"body_markdown":"Whenever I am trying to use template to create xls using jxl API running into weird ArrayIndexOutOfBoundException.\r\nHere is the snippet of code I am trying to use\r\n\r\n    private static void readWorkSheet()throws Exception{\r\n    \t\t\tFile file = new File(&quot;C:\\\\reports\\\\&quot;);\r\n    \t\t\tMap template = new HashMap();\r\n    \t\t\tFile[] listFiles = file.listFiles();\r\n    \t\t\tfor(File file1:listFiles){\r\n    \t\t\t\tif(file1.getName().endsWith(&quot;.xls&quot;)){\r\n    \t\t\t\t\tSystem.out.println(&quot; ==&gt; &quot;+file1.getName());\r\n    \t\t\t\t\tWorkbook workbookTemplate = Workbook.getWorkbook(file1);\r\n    \t\t\t\t\ttemplate.put(file1.getName(), workbookTemplate);\r\n    \t\t\t\t}\r\n    \t\t\t\t\t\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;template &quot;+template);\r\n    \t\t\tWorkbook templateWorkBook = (Workbook)template.get(&quot;TestReport.xls&quot;);\r\n    \t\t\tSheet readSheet = templateWorkBook.getSheet(&quot;Sheet1&quot;);\r\n    \t\t\t\r\n    \t\t\tWritableWorkbook copy = Workbook.createWorkbook(new File(&quot;c://myfile_copy2.xls&quot;));\r\n    \t\t\t\r\n    \t\t\tWritableSheet sheet = copy.createSheet(&quot;Test&quot;, 0);\r\n    \t\t\tfor (int i = 0; i &lt; readSheet.getRows(); i++) {\r\n    \t\t\t\tfor (int j = 0; j &lt; readSheet.getColumns(); j++) {\r\n    \t\t\t\t\tCell readCell = readSheet.getCell(j, i);\r\n    \t\t\t\t\tCellFormat readFormat = readCell.getCellFormat();\r\n    \t\t\t\t\tif(readFormat != null &amp;&amp; readCell.getContents() != null &amp;&amp; readCell.getContents() != &quot;&quot;){\r\n    \t\t\t\t\t\tWritableCell newCell = new Label(i,j,readCell.getContents());\r\n    \t\t\t\t\t\tWritableCellFormat newFormat = new WritableCellFormat(readFormat);\r\n    \t\t\t\t\t\tnewCell.setCellFormat(newFormat);\r\n    \t\t\t\t\t\tSystem.out.println(&quot;details of cell [&quot;+i+&quot;, &quot;+j+&quot;]&quot;+&quot; Name = &quot;+readCell.getContents());\r\n    \t\t\t\t\t\tSystem.out.println(&quot;details of newCell [&quot;+i+&quot;, &quot;+j+&quot;]&quot;+&quot; Name = &quot;+newCell.getContents());\r\n    \t\t\t\t\t\tsheet.addCell(newCell);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t}\r\n    \t\t\tcopy.write();\r\n    \t\t\tcopy.close(); \r\n    \t\t}\r\n\r\nNot sure what I am missing in this !!!\r\n\r\nException I am running into\r\n\r\n      Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 56\r\n    \tat jxl.biff.IndexMapping.getNewIndex(IndexMapping.java:68)\r\n    \tat jxl.biff.XFRecord.rationalize(XFRecord.java:1667)\r\n    \tat jxl.biff.FormattingRecords.rationalize(FormattingRecords.java:443)\r\n    \tat jxl.write.biff.WritableWorkbookImpl.rationalize(WritableWorkbookImpl.java:1023)\r\n    \tat jxl.write.biff.WritableWorkbookImpl.write(WritableWorkbookImpl.java:701)\r\n    \tat com.jxl.test.JXLTest.readWorkSheet(JXLTest.java:83)\r\n    \tat com.jxl.test.JXLTest.main(JXLTest.java:30)\r\n\r\n\r\n","title":"ArrayIndexOutOfBoundException with jxl api when trying to copy content from one sheet to another","body":"<p>Whenever I am trying to use template to create xls using jxl API running into weird ArrayIndexOutOfBoundException.\nHere is the snippet of code I am trying to use</p>\n\n<pre><code>private static void readWorkSheet()throws Exception{\n            File file = new File(\"C:\\\\reports\\\\\");\n            Map template = new HashMap();\n            File[] listFiles = file.listFiles();\n            for(File file1:listFiles){\n                if(file1.getName().endsWith(\".xls\")){\n                    System.out.println(\" ==&gt; \"+file1.getName());\n                    Workbook workbookTemplate = Workbook.getWorkbook(file1);\n                    template.put(file1.getName(), workbookTemplate);\n                }\n\n            }\n            System.out.println(\"template \"+template);\n            Workbook templateWorkBook = (Workbook)template.get(\"TestReport.xls\");\n            Sheet readSheet = templateWorkBook.getSheet(\"Sheet1\");\n\n            WritableWorkbook copy = Workbook.createWorkbook(new File(\"c://myfile_copy2.xls\"));\n\n            WritableSheet sheet = copy.createSheet(\"Test\", 0);\n            for (int i = 0; i &lt; readSheet.getRows(); i++) {\n                for (int j = 0; j &lt; readSheet.getColumns(); j++) {\n                    Cell readCell = readSheet.getCell(j, i);\n                    CellFormat readFormat = readCell.getCellFormat();\n                    if(readFormat != null &amp;&amp; readCell.getContents() != null &amp;&amp; readCell.getContents() != \"\"){\n                        WritableCell newCell = new Label(i,j,readCell.getContents());\n                        WritableCellFormat newFormat = new WritableCellFormat(readFormat);\n                        newCell.setCellFormat(newFormat);\n                        System.out.println(\"details of cell [\"+i+\", \"+j+\"]\"+\" Name = \"+readCell.getContents());\n                        System.out.println(\"details of newCell [\"+i+\", \"+j+\"]\"+\" Name = \"+newCell.getContents());\n                        sheet.addCell(newCell);\n                    }\n                }\n        }\n            copy.write();\n            copy.close(); \n        }\n</code></pre>\n\n<p>Not sure what I am missing in this !!!</p>\n\n<p>Exception I am running into</p>\n\n<pre><code>  Exception in thread \"main\" java.lang.ArrayIndexOutOfBoundsException: 56\n    at jxl.biff.IndexMapping.getNewIndex(IndexMapping.java:68)\n    at jxl.biff.XFRecord.rationalize(XFRecord.java:1667)\n    at jxl.biff.FormattingRecords.rationalize(FormattingRecords.java:443)\n    at jxl.write.biff.WritableWorkbookImpl.rationalize(WritableWorkbookImpl.java:1023)\n    at jxl.write.biff.WritableWorkbookImpl.write(WritableWorkbookImpl.java:701)\n    at com.jxl.test.JXLTest.readWorkSheet(JXLTest.java:83)\n    at com.jxl.test.JXLTest.main(JXLTest.java:30)\n</code></pre>\n"},{"tags":["java","httpclient"],"comments":[{"owner":{"display_name":"user3440678"},"score":0,"creation_date":1395387692,"post_id":22552933,"comment_id":34324787,"body_markdown":"you means you want to get the value of the response paramete?","body":"you means you want to get the value of the response paramete?"},{"owner":{"account_id":4097117,"reputation":1257,"user_id":3363563,"accept_rate":59,"display_name":"Uday A. Navapara"},"score":0,"creation_date":1395387733,"post_id":22552933,"comment_id":34324803,"body_markdown":"yes but i got it in String i want it in it&#39;s original data type","body":"yes but i got it in String i want it in it&#39;s original data type"},{"owner":{"account_id":2103622,"reputation":26956,"user_id":1870555,"accept_rate":75,"display_name":"christopher"},"score":0,"creation_date":1395387788,"post_id":22552933,"comment_id":34324823,"body_markdown":"So parse it and cast it..","body":"So parse it and cast it.."},{"owner":{"account_id":4097117,"reputation":1257,"user_id":3363563,"accept_rate":59,"display_name":"Uday A. Navapara"},"score":0,"creation_date":1395387900,"post_id":22552933,"comment_id":34324876,"body_markdown":"how i can not get proper way to do this if you know please explain me i am beginner in this","body":"how i can not get proper way to do this if you know please explain me i am beginner in this"}],"answers":[{"tags":[],"owner":{"account_id":2251312,"reputation":334,"user_id":1983492,"accept_rate":53,"display_name":"Akolopez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1395634399,"creation_date":1395388246,"answer_id":22553087,"question_id":22552933,"body_markdown":"All attributes stored in the request are strings. You will have to manually cast it to whatever type they are.\r\n\r\nFor example you are trying to get a boolean attribute from the request. You will have to do this:\r\n\r\n    String attr = request.getAttribute(&quot;nameOfAttribute&quot;);\r\n    Boolean bool = Boolean.getBoolean(attr);","title":"How to get response parameter in HttpClient","body":"<p>All attributes stored in the request are strings. You will have to manually cast it to whatever type they are.</p>\n\n<p>For example you are trying to get a boolean attribute from the request. You will have to do this:</p>\n\n<pre><code>String attr = request.getAttribute(\"nameOfAttribute\");\nBoolean bool = Boolean.getBoolean(attr);\n</code></pre>\n"}],"owner":{"account_id":4097117,"reputation":1257,"user_id":3363563,"accept_rate":59,"display_name":"Uday A. Navapara"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5170,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":22553087,"answer_count":1,"score":-1,"last_activity_date":1663619489,"creation_date":1395387614,"question_id":22552933,"body_markdown":"I am trying to pass some data in one application and get the response from that. For that I am using HttpClient and want to use the value of response in my application. It  may be string, int, or boolean\r\n\r\nI wrote the following code \r\n  \r\n    HttpClient client = new DefaultHttpClient();\r\n\r\n\tHttpPost request = new HttpPost(\r\n\t    &quot;http://index.html?email=&quot; + email + \r\n        &quot;&amp;password=&quot; + password\r\n    );\r\n\r\n\ttry {\r\n\t\tHttpResponse response = client.execute(request);\r\n\t\tHttpEntity entity = response.getEntity();\r\n\t\tInputStream is = entity.getContent();\r\n\t\tBufferedReader bf = new BufferedReader(\r\n            new InputStreamReader(is,&quot;UTF-8&quot;)\r\n        );\r\n\r\n\t\tString str = bf.readLine();\r\n\t\t\t\r\n\r\n\t} catch (Exception e) {\r\n\t\tSystem.out.println(&quot;Error is :- &quot; + e);\r\n\t}\r\n\r\nThis link will return parameter login=true/false. Now how can I get the value of the login parameter using response?","title":"How to get response parameter in HttpClient","body":"<p>I am trying to pass some data in one application and get the response from that. For that I am using HttpClient and want to use the value of response in my application. It  may be string, int, or boolean</p>\n<p>I wrote the following code</p>\n<pre><code>HttpClient client = new DefaultHttpClient();\n\nHttpPost request = new HttpPost(\n    &quot;http://index.html?email=&quot; + email + \n    &quot;&amp;password=&quot; + password\n);\n\ntry {\n    HttpResponse response = client.execute(request);\n    HttpEntity entity = response.getEntity();\n    InputStream is = entity.getContent();\n    BufferedReader bf = new BufferedReader(\n        new InputStreamReader(is,&quot;UTF-8&quot;)\n    );\n\n    String str = bf.readLine();\n        \n\n} catch (Exception e) {\n    System.out.println(&quot;Error is :- &quot; + e);\n}\n</code></pre>\n<p>This link will return parameter login=true/false. Now how can I get the value of the login parameter using response?</p>\n"},{"tags":["java","spring-boot","aws-lambda","amazon-dynamodb"],"comments":[{"owner":{"account_id":24084564,"reputation":330,"user_id":18058767,"display_name":"zemaj"},"score":0,"creation_date":1663611257,"post_id":73777619,"comment_id":130276005,"body_markdown":"You are trying to do two different operations, you should have two different lambdas.","body":"You are trying to do two different operations, you should have two different lambdas."},{"owner":{"account_id":26383174,"reputation":1,"user_id":20036101,"display_name":"Nssss"},"score":0,"creation_date":1663611531,"post_id":73777619,"comment_id":130276075,"body_markdown":"https://aws.amazon.com/blogs/compute/using-api-gateway-stage-variables-to-manage-lambda-functions/  -- Here it is mentioned that we can replace environment variable with stage variable, is there any way to replace it?","body":"<a href=\"https://aws.amazon.com/blogs/compute/using-api-gateway-stage-variables-to-manage-lambda-functions/\" rel=\"nofollow noreferrer\">aws.amazon.com/blogs/compute/&hellip;</a>  -- Here it is mentioned that we can replace environment variable with stage variable, is there any way to replace it?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1663706029,"post_id":73777619,"comment_id":130302108,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":6198556,"reputation":1049,"user_id":5622918,"display_name":"ddtraveller"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663619437,"creation_date":1663619437,"answer_id":73778955,"question_id":73777619,"body_markdown":"You can use the java sdk and invoke the lambda with a param.\r\nThe lambda can have your read and write functions inside and when you invoke it, just pass a param to indicate whether the lambda should run in which mode you like.\r\n\r\nhttps://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/examples-lambda.html#invoke-function\r\n\r\nYou don&#39;t need an API Gateway. ","title":"How we can execute multiple function at same time or we can use multiple function in environmental variables in AWS lambda","body":"<p>You can use the java sdk and invoke the lambda with a param.\nThe lambda can have your read and write functions inside and when you invoke it, just pass a param to indicate whether the lambda should run in which mode you like.</p>\n<p><a href=\"https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/examples-lambda.html#invoke-function\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/examples-lambda.html#invoke-function</a></p>\n<p>You don't need an API Gateway.</p>\n"}],"owner":{"account_id":26383174,"reputation":1,"user_id":20036101,"display_name":"Nssss"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663619437,"creation_date":1663610964,"question_id":73777619,"body_markdown":"Suppose I have created two method read and insert in my springboot application( read method will fetch data from dynamodb while insert method will insert data into the database).And in spingboot application.property I have define spring.cloud.function.definiton=read;insert but in AWS lambda in environmental vairable I can only define one method at a time(either read or insert but not at same time),I am stuck at that point, so for resolving this problem I have create API using AWS API gateway but for read and insert API I have created two different lambda function,So is there any way either we can define both read and insert method parallel in aws environmental variable or using single lambda function we can hit API for both method????","title":"How we can execute multiple function at same time or we can use multiple function in environmental variables in AWS lambda","body":"<p>Suppose I have created two method read and insert in my springboot application( read method will fetch data from dynamodb while insert method will insert data into the database).And in spingboot application.property I have define spring.cloud.function.definiton=read;insert but in AWS lambda in environmental vairable I can only define one method at a time(either read or insert but not at same time),I am stuck at that point, so for resolving this problem I have create API using AWS API gateway but for read and insert API I have created two different lambda function,So is there any way either we can define both read and insert method parallel in aws environmental variable or using single lambda function we can hit API for both method????</p>\n"},{"tags":["java","mysql","jpa","eclipselink","criteria-api"],"comments":[{"owner":{"account_id":443256,"reputation":12498,"user_id":834362,"display_name":"home"},"score":0,"creation_date":1325186026,"post_id":8672292,"comment_id":10779394,"body_markdown":"Which JPA provider do you use (e.g. OpenJPA, Hibernate)?","body":"Which JPA provider do you use (e.g. OpenJPA, Hibernate)?"},{"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"score":0,"creation_date":1325186208,"post_id":8672292,"comment_id":10779438,"body_markdown":"@home, I have added the info you have requested","body":"@home, I have added the info you have requested"},{"owner":{"account_id":443256,"reputation":12498,"user_id":834362,"display_name":"home"},"score":0,"creation_date":1325186376,"post_id":8672292,"comment_id":10779489,"body_markdown":"No prob; check this: http://stackoverflow.com/questions/2374395/is-it-possible-to-output-generated-sql-using-eclipselink-without-having-to-incre","body":"No prob; check this: <a href=\"http://stackoverflow.com/questions/2374395/is-it-possible-to-output-generated-sql-using-eclipselink-without-having-to-incre\" title=\"is it possible to output generated sql using eclipselink without having to incre\">stackoverflow.com/questions/2374395/&hellip;</a>"},{"owner":{"account_id":217137,"reputation":37872,"user_id":472792,"accept_rate":50,"display_name":"Arjan Tijms"},"score":0,"creation_date":1325186416,"post_id":8672292,"comment_id":10779499,"body_markdown":"@home, since OP indicated GlassFish is being used, I guess EclipseLink would be a safe guess ;)","body":"@home, since OP indicated GlassFish is being used, I guess EclipseLink would be a safe guess ;)"},{"owner":{"account_id":443256,"reputation":12498,"user_id":834362,"display_name":"home"},"score":0,"creation_date":1325186489,"post_id":8672292,"comment_id":10779520,"body_markdown":"@Arjan: ... but still a guess :-)","body":"@Arjan: ... but still a guess :-)"},{"owner":{"account_id":2052314,"reputation":352,"user_id":1831027,"accept_rate":83,"display_name":"Marcus Becker"},"score":0,"creation_date":1386865594,"post_id":8672292,"comment_id":30728778,"body_markdown":"Similar question: [http://stackoverflow.com/questions/4362876/how-to-view-the-sql-queries-issued-by-jpa][1]\r\n\r\n\r\n  [1]: http://stackoverflow.com/questions/4362876/how-to-view-the-sql-queries-issued-by-jpa","body":"Similar question: [<a href=\"http://stackoverflow.com/questions/4362876/how-to-view-the-sql-queries-issued-by-jpa][1]\" title=\"how to view the sql queries issued by jpa%5d%5b1%5d\">stackoverflow.com/questions/4362876/&hellip;</a>        [1]: <a href=\"http://stackoverflow.com/questions/4362876/how-to-view-the-sql-queries-issued-by-jpa\" title=\"how to view the sql queries issued by jpa\">stackoverflow.com/questions/4362876/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":217137,"reputation":37872,"user_id":472792,"accept_rate":50,"display_name":"Arjan Tijms"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1325187044,"creation_date":1325186328,"answer_id":8672385,"question_id":8672292,"body_markdown":"The same attributes in persistence.xml that also print the SQL that is generated from regular JPQL queries, should also print the SQL that is generated from Criteria queries.\r\n\r\nE.g.\r\n\r\nFor Hibernate (used by e.g. JBoss AS) it&#39;s:\r\n\r\n    &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot; /&gt;\r\n\r\nFor EclipseLink (used by e.g. GlassFish) it&#39;s:\r\n\r\n    &lt;property name=&quot;eclipselink.logging.level&quot; value=&quot;FINE&quot;/&gt;\r\n    &lt;property name=&quot;eclipselink.logging.parameters&quot; value=&quot;true&quot;/&gt;\r\n\r\nAlso see: https://stackoverflow.com/questions/4362876/how-to-view-the-sql-queries-issued-by-jpa","title":"How to debug JPA CriteriaBuilder queries","body":"<p>The same attributes in persistence.xml that also print the SQL that is generated from regular JPQL queries, should also print the SQL that is generated from Criteria queries.</p>\n\n<p>E.g.</p>\n\n<p>For Hibernate (used by e.g. JBoss AS) it's:</p>\n\n<pre><code>&lt;property name=\"hibernate.show_sql\" value=\"true\" /&gt;\n</code></pre>\n\n<p>For EclipseLink (used by e.g. GlassFish) it's:</p>\n\n<pre><code>&lt;property name=\"eclipselink.logging.level\" value=\"FINE\"/&gt;\n&lt;property name=\"eclipselink.logging.parameters\" value=\"true\"/&gt;\n</code></pre>\n\n<p>Also see: <a href=\"https://stackoverflow.com/questions/4362876/how-to-view-the-sql-queries-issued-by-jpa\">How to view the SQL queries issued by JPA?</a></p>\n"},{"tags":[],"owner":{"account_id":6248735,"reputation":1758,"user_id":4859626,"display_name":"Sithija Piyuman Thewa Hettige"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663619262,"creation_date":1588242670,"answer_id":61521340,"question_id":8672292,"body_markdown":"If you are using Java and Spring, under resources, you can adjust your `application.properties` file and add the line below:\r\n\r\n~~~none\r\nspring.jpa.show-sql=true\r\n~~~","title":"How to debug JPA CriteriaBuilder queries","body":"<p>If you are using Java and Spring, under resources, you can adjust your <code>application.properties</code> file and add the line below:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.show-sql=true\n</code></pre>\n"}],"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18456,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":8672385,"answer_count":2,"score":9,"last_activity_date":1663619262,"creation_date":1325185867,"question_id":8672292,"body_markdown":"How can I debug a query built with `JPA 2.0` `CriteriaBuilder`? Is there a way to print out the query that is being executed? \r\n\r\nI am developing a web application using `NetBeans`, `MySql`, `GlassFish`. I would avoid starting MySql in debug mode, because it is used also for other applications. JPA provider is `EclipseLink`.","title":"How to debug JPA CriteriaBuilder queries","body":"<p>How can I debug a query built with <code>JPA 2.0</code> <code>CriteriaBuilder</code>? Is there a way to print out the query that is being executed? </p>\n\n<p>I am developing a web application using <code>NetBeans</code>, <code>MySql</code>, <code>GlassFish</code>. I would avoid starting MySql in debug mode, because it is used also for other applications. JPA provider is <code>EclipseLink</code>.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1663617458,"post_id":73778627,"comment_id":130278013,"body_markdown":"Did you initialize `events` in the first class?","body":"Did you initialize <code>events</code> in the first class?"},{"owner":{"account_id":1395389,"reputation":97,"user_id":7183732,"display_name":"boutheina"},"score":0,"creation_date":1663617733,"post_id":73778627,"comment_id":130278105,"body_markdown":"no I don&#39;t initialize event in the first class","body":"no I don&#39;t initialize event in the first class"},{"owner":{"account_id":1395389,"reputation":97,"user_id":7183732,"display_name":"boutheina"},"score":0,"creation_date":1663617943,"post_id":73778627,"comment_id":130278173,"body_markdown":"I think that the problem because the two classes are not in the same package but I can&#39;t resolve this","body":"I think that the problem because the two classes are not in the same package but I can&#39;t resolve this"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1663655449,"post_id":73778627,"comment_id":130284540,"body_markdown":"The fact they are in different packages is irrelevant. You just need to initialize `events`, either in `Student`&#39;s constructor or from a public method in `Student` you call from `StudentTest` or, if `events` is public, directly from `StudentTest`.","body":"The fact they are in different packages is irrelevant. You just need to initialize <code>events</code>, either in <code>Student</code>&#39;s constructor or from a public method in <code>Student</code> you call from <code>StudentTest</code> or, if <code>events</code> is public, directly from <code>StudentTest</code>."}],"owner":{"account_id":1395389,"reputation":97,"user_id":7183732,"display_name":"boutheina"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1663617808,"answer_count":0,"score":0,"last_activity_date":1663617349,"creation_date":1663617305,"question_id":73778627,"body_markdown":"I have a problem, I have a package event which contains a class student in this class I have this method\r\n```\r\npublic void addEvents( Event e) {\r\n    if(e!=null)\r\n\t    events.add(e);\t\t\t\r\n}\r\n```\r\nin a second package I have created an event and I want to call the above method to add the event created to a ArrayList\r\n\r\n    event.setDateEvent(new Date(day,month,year));\r\n\tstudent.addEvents(event);\r\n\r\nthis error is displayed\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.util.ArrayList.add(Object)&quot; because &quot;this.events&quot; is null\r\n    \tat event.Student.addEvents(Student.java:48)\r\n    \tat test.StudentTest.main(StudentTest.java:43)","title":"using an object from different package","body":"<p>I have a problem, I have a package event which contains a class student in this class I have this method</p>\n<pre><code>public void addEvents( Event e) {\n    if(e!=null)\n        events.add(e);          \n}\n</code></pre>\n<p>in a second package I have created an event and I want to call the above method to add the event created to a ArrayList</p>\n<pre><code>event.setDateEvent(new Date(day,month,year));\nstudent.addEvents(event);\n</code></pre>\n<p>this error is displayed</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.util.ArrayList.add(Object)&quot; because &quot;this.events&quot; is null\n    at event.Student.addEvents(Student.java:48)\n    at test.StudentTest.main(StudentTest.java:43)\n</code></pre>\n"},{"tags":["java","eclipse","eclipse-plugin","eclipse-rcp","e4"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1663615805,"post_id":73778206,"comment_id":130277504,"body_markdown":"You say &quot;e4&quot; but a pure e4 RCP doesn&#39;t include any of the p2 code - so is this really e4 or just a compatability mode RCP (using the org.eclipse.ui plugins and the p2 code)? Your question is expecting us to watch a video and look at a github project - that isn&#39;t going to happen.","body":"You say &quot;e4&quot; but a pure e4 RCP doesn&#39;t include any of the p2 code - so is this really e4 or just a compatability mode RCP (using the org.eclipse.ui plugins and the p2 code)? Your question is expecting us to watch a video and look at a github project - that isn&#39;t going to happen."},{"owner":{"account_id":2154382,"reputation":403,"user_id":1909950,"accept_rate":38,"display_name":"Deepak Ramesh"},"score":0,"creation_date":1663648221,"post_id":73778206,"comment_id":130283144,"body_markdown":"Greg, The request is not to watch video and look at github project. I searched in google for Auto update and got sample project. I am unable to get current running profile, hence I am unable to proceed further. If there is any simple and sample rcp java application which auto updates pls share it would be helpful...or reference is also is fine.","body":"Greg, The request is not to watch video and look at github project. I searched in google for Auto update and got sample project. I am unable to get current running profile, hence I am unable to proceed further. If there is any simple and sample rcp java application which auto updates pls share it would be helpful...or reference is also is fine."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1663657040,"post_id":73778206,"comment_id":130285048,"body_markdown":"What does _&quot;I have gone through&quot;_ mean? Do you get the same issue running the unmodified mentioned GitHub repository? Eclipse itself has built-in auto update.","body":"What does <i>&quot;I have gone through&quot;</i> mean? Do you get the same issue running the unmodified mentioned GitHub repository? Eclipse itself has built-in auto update."},{"owner":{"account_id":2154382,"reputation":403,"user_id":1909950,"accept_rate":38,"display_name":"Deepak Ramesh"},"score":0,"creation_date":1663691170,"post_id":73778206,"comment_id":130297502,"body_markdown":"&quot;I have gone through&quot; means updatemanager was perfect example which I got from github. I imported to eclipse and ran the product. I see null while getting IProfile. Hence need help. Sharing reference to sample project which does auto update would also be helpful.. Thanks in advance..","body":"&quot;I have gone through&quot; means updatemanager was perfect example which I got from github. I imported to eclipse and ran the product. I see null while getting IProfile. Hence need help. Sharing reference to sample project which does auto update would also be helpful.. Thanks in advance.."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1663742263,"post_id":73778206,"comment_id":130307990,"body_markdown":"I guess this is because you run it as Eclipse application from within Eclipse rather than as a product that has been built. Are you aware that you could configure the defaults of the preferences _Install/Update &gt; Automatic Updates_ via `plugin_customization.ini`? https://wiki.eclipse.org/Equinox/p2/Adding_Self-Update_to_an_RCP_Application","body":"I guess this is because you run it as Eclipse application from within Eclipse rather than as a product that has been built. Are you aware that you could configure the defaults of the preferences <i>Install/Update &gt; Automatic Updates</i> via <code>plugin_customization.ini</code>? <a href=\"https://wiki.eclipse.org/Equinox/p2/Adding_Self-Update_to_an_RCP_Application\" rel=\"nofollow noreferrer\">wiki.eclipse.org/Equinox/p2/&hellip;</a>"},{"owner":{"account_id":2154382,"reputation":403,"user_id":1909950,"accept_rate":38,"display_name":"Deepak Ramesh"},"score":1,"creation_date":1666968073,"post_id":73778206,"comment_id":131066568,"body_markdown":"Thanks all for your reply, I found a way and issue resolved..","body":"Thanks all for your reply, I found a way and issue resolved.."}],"owner":{"account_id":2154382,"reputation":403,"user_id":1909950,"accept_rate":38,"display_name":"Deepak Ramesh"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663615885,"creation_date":1663614406,"question_id":73778206,"body_markdown":"I have requirement to develop E4 application which updates automatically when updates found, on launch of application. Currently I have exported feature in local folder. Have multiple version of feature. So application should check for latest version of feature and if available it should install on launch and restart.\r\n\r\nI have gone through https://www.youtube.com/watch?v=mfNIt_b5mt4 and I wont see the code in repo.\r\nI am not able to get below bundles \r\ngetBundle(&quot;org.eclipse.equinox.p2.exomplorysetup&quot;).start(Bundle.START_TRANSIENT);\r\ngetBundle(&quot;org.eclipse.equinox.p2.simpleconfigurator.manipulator&quot;).start(Bundle.START_TRANSIENT);\r\n\r\n\r\nAlso I have gone through https://github.com/modular-mind/updatemanager.\r\n\r\nI have used com.modumind.updatemanager.example.ui code but Profiles are not getting created and I see null. \r\n\r\n```\r\nprivate ProvisioningJob getInstallJob(ProvisioningSession provisioningSession) {\r\n\t\tIStatus loadStatus = loadP2Repository(provisioningSession.getProvisioningAgent());\r\n\t\tif (loadStatus != Status.OK_STATUS) {\r\n\t\t\tdumpStatus(loadStatus);\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tIProfile profile = profileRegistry.getProfile(IProfileRegistry.SELF);\r\n\t\tif (profile == null) {\r\n\t\t\tthis.log(\r\n\t\t\t\t\t&quot;No profile found for this installation, ending auto update process. Profiles are not available when running in Eclipse.&quot;);\r\n\t\t\treturn null;\r\n\t\t}}\r\n```\r\nPls help, if there are any sample applications pls share.\r\n","title":"Auto update E4 application, unable to get current running IProfile","body":"<p>I have requirement to develop E4 application which updates automatically when updates found, on launch of application. Currently I have exported feature in local folder. Have multiple version of feature. So application should check for latest version of feature and if available it should install on launch and restart.</p>\n<p>I have gone through <a href=\"https://www.youtube.com/watch?v=mfNIt_b5mt4\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=mfNIt_b5mt4</a> and I wont see the code in repo.\nI am not able to get below bundles\ngetBundle(&quot;org.eclipse.equinox.p2.exomplorysetup&quot;).start(Bundle.START_TRANSIENT);\ngetBundle(&quot;org.eclipse.equinox.p2.simpleconfigurator.manipulator&quot;).start(Bundle.START_TRANSIENT);</p>\n<p>Also I have gone through <a href=\"https://github.com/modular-mind/updatemanager\" rel=\"nofollow noreferrer\">https://github.com/modular-mind/updatemanager</a>.</p>\n<p>I have used com.modumind.updatemanager.example.ui code but Profiles are not getting created and I see null.</p>\n<pre><code>private ProvisioningJob getInstallJob(ProvisioningSession provisioningSession) {\n        IStatus loadStatus = loadP2Repository(provisioningSession.getProvisioningAgent());\n        if (loadStatus != Status.OK_STATUS) {\n            dumpStatus(loadStatus);\n            return null;\n        }\n\n        IProfile profile = profileRegistry.getProfile(IProfileRegistry.SELF);\n        if (profile == null) {\n            this.log(\n                    &quot;No profile found for this installation, ending auto update process. Profiles are not available when running in Eclipse.&quot;);\n            return null;\n        }}\n</code></pre>\n<p>Pls help, if there are any sample applications pls share.</p>\n"},{"tags":["java","rest"],"comments":[{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":0,"creation_date":1348251935,"post_id":12535870,"comment_id":16879327,"body_markdown":"http://docs.oracle.com/cd/E19798-01/821-1841/gipxf/index.html","body":"<a href=\"http://docs.oracle.com/cd/E19798-01/821-1841/gipxf/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19798-01/821-1841/gipxf/index.html</a>"},{"owner":{"account_id":83351,"reputation":1229,"user_id":233751,"display_name":"Pl&#237;nio Pantale&#227;o"},"score":0,"creation_date":1348258869,"post_id":12535870,"comment_id":16881799,"body_markdown":"Did you tried to remove the @Produces annotation?","body":"Did you tried to remove the @Produces annotation?"},{"owner":{"account_id":542524,"reputation":2399,"user_id":911391,"accept_rate":65,"display_name":"orak"},"score":0,"creation_date":1348291218,"post_id":12535870,"comment_id":16887155,"body_markdown":"Why would i remove @Produces annotation when all i want is a json? Whatever, i gave it a try...doesn&#39;t help.","body":"Why would i remove @Produces annotation when all i want is a json? Whatever, i gave it a try...doesn&#39;t help."},{"owner":{"account_id":37969,"reputation":2730,"user_id":108758,"accept_rate":100,"display_name":"albogdano"},"score":0,"creation_date":1579358524,"post_id":12535870,"comment_id":105743783,"body_markdown":"What makes you think that &quot;hello world&quot; is not valid JSON?","body":"What makes you think that &quot;hello world&quot; is not valid JSON?"},{"owner":{"account_id":5715690,"reputation":2296,"user_id":4515989,"accept_rate":78,"display_name":"Felix"},"score":1,"creation_date":1610966024,"post_id":12535870,"comment_id":116290120,"body_markdown":"@albogdano `&quot;hello world&quot;` is valid json but `hello world` is not. He said that the endpoint returns the latter","body":"@albogdano <code>&quot;hello world&quot;</code> is valid json but <code>hello world</code> is not. He said that the endpoint returns the latter"}],"answers":[{"tags":[],"owner":{"account_id":1344597,"reputation":4122,"user_id":1285589,"accept_rate":75,"display_name":"shashankaholic"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1348477868,"creation_date":1348477868,"answer_id":12561951,"question_id":12535870,"body_markdown":"Try this \r\n\r\n    @GET \r\n    @Produces(&quot;application/json&quot;) \r\n    @Path(&quot;plain&quot;) \r\n    public String getPlain() \r\n    { \r\n    String result= &quot;hello world&quot;;\r\n        return result;\r\n    } \r\n\r\nJSON needs a key-value pair.","title":"Returning plain String in Rest service does not return json?","body":"<p>Try this </p>\n\n<pre><code>@GET \n@Produces(\"application/json\") \n@Path(\"plain\") \npublic String getPlain() \n{ \nString result= \"hello world\";\n    return result;\n} \n</code></pre>\n\n<p>JSON needs a key-value pair.</p>\n"},{"tags":[],"owner":{"account_id":879821,"reputation":393,"user_id":199867,"accept_rate":12,"display_name":"Jaga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1355997312,"creation_date":1355997312,"answer_id":13969433,"question_id":12535870,"body_markdown":"I tried the above option, it does not work.\r\n\r\n    String result=&quot;hello world&quot;;\r\n    return result;\r\n\r\nThe reason why String is not getting auto-converted seems to be due to missing @XmlRootElement.  Based on the docuementation in cxf http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-HandlingJAXBbeanswithoutXmlRootElementannotations we need to use some jaxbElementClassMap. But unable to find further details.","title":"Returning plain String in Rest service does not return json?","body":"<p>I tried the above option, it does not work.</p>\n\n<pre><code>String result=\"hello world\";\nreturn result;\n</code></pre>\n\n<p>The reason why String is not getting auto-converted seems to be due to missing @XmlRootElement.  Based on the docuementation in cxf <a href=\"http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-HandlingJAXBbeanswithoutXmlRootElementannotations\" rel=\"nofollow\">http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-HandlingJAXBbeanswithoutXmlRootElementannotations</a> we need to use some jaxbElementClassMap. But unable to find further details.</p>\n"},{"tags":[],"owner":{"account_id":5242101,"reputation":874,"user_id":4188827,"display_name":"Santosh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663607575,"creation_date":1663607575,"answer_id":73777009,"question_id":12535870,"body_markdown":"I think these will give you what you need.\r\n\r\n    @GET\r\n    @Produces(&quot;application/json&quot;)\r\n    @Path(&quot;plain&quot;)\r\n    public String getPlain()\r\n    {\r\n    return JSONObject.quote(&quot;Hello World&quot;);\r\n    }\r\n\r\nOR\r\n\r\n    @GET\r\n    @Produces(&quot;application/json&quot;)\r\n    @Path(&quot;plain&quot;)\r\n    public String getPlain()\r\n    {\r\n    return &quot;\\&quot;Hello World\\&quot;&quot;;\r\n    }\r\n\r\nOR\r\n\r\n    @GET\r\n    @Produces(&quot;application/json&quot;)\r\n    @Path(&quot;plain&quot;)\r\n    public char[] getPlain()\r\n    {\r\n    return &quot;Hello World!&quot;.toCharArray();\r\n    }\r\n\r\n\r\n","title":"Returning plain String in Rest service does not return json?","body":"<p>I think these will give you what you need.</p>\n<pre><code>@GET\n@Produces(&quot;application/json&quot;)\n@Path(&quot;plain&quot;)\npublic String getPlain()\n{\nreturn JSONObject.quote(&quot;Hello World&quot;);\n}\n</code></pre>\n<p>OR</p>\n<pre><code>@GET\n@Produces(&quot;application/json&quot;)\n@Path(&quot;plain&quot;)\npublic String getPlain()\n{\nreturn &quot;\\&quot;Hello World\\&quot;&quot;;\n}\n</code></pre>\n<p>OR</p>\n<pre><code>@GET\n@Produces(&quot;application/json&quot;)\n@Path(&quot;plain&quot;)\npublic char[] getPlain()\n{\nreturn &quot;Hello World!&quot;.toCharArray();\n}\n</code></pre>\n"}],"owner":{"account_id":542524,"reputation":2399,"user_id":911391,"accept_rate":65,"display_name":"orak"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8880,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1663615823,"creation_date":1348250878,"question_id":12535870,"body_markdown":"I created the following rest methods in my rest based web service\r\n\r\n\r\n    @GET\r\n    @Produces(&quot;application/json&quot;)\r\n    @Path(&quot;plain&quot;)\r\n    public String getPlain()\r\n    {\r\n        return &quot;hello world&quot;;\r\n    }\r\n\r\n    @GET\r\n    @Produces(&quot;application/json&quot;)\r\n    @Path(&quot;wrapper&quot;)\r\n    public Response getWrapper()\r\n    {\r\n        return Response.ok(new Object(){ public String data = &quot;hello world&quot;;}).build();\r\n    }\r\n\r\nWhen I call plain service, it returns a raw string **hello world** rather than a JSON formatted output. However, wrapping the string in an object returns the JSON **{&quot;data&quot;:&quot;hello world&quot;}**\r\n\r\nWhy is it showing such a behaviour? How do I send the plain String as JSON?","title":"Returning plain String in Rest service does not return json?","body":"<p>I created the following rest methods in my rest based web service</p>\n<pre><code>@GET\n@Produces(&quot;application/json&quot;)\n@Path(&quot;plain&quot;)\npublic String getPlain()\n{\n    return &quot;hello world&quot;;\n}\n\n@GET\n@Produces(&quot;application/json&quot;)\n@Path(&quot;wrapper&quot;)\npublic Response getWrapper()\n{\n    return Response.ok(new Object(){ public String data = &quot;hello world&quot;;}).build();\n}\n</code></pre>\n<p>When I call plain service, it returns a raw string <strong>hello world</strong> rather than a JSON formatted output. However, wrapping the string in an object returns the JSON <strong>{&quot;data&quot;:&quot;hello world&quot;}</strong></p>\n<p>Why is it showing such a behaviour? How do I send the plain String as JSON?</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1663313048,"post_id":73735957,"comment_id":130214150,"body_markdown":"Have you solved the issue?","body":"Have you solved the issue?"},{"owner":{"account_id":18735960,"reputation":322,"user_id":13660296,"display_name":"swiftlearneer"},"score":0,"creation_date":1663342303,"post_id":73735957,"comment_id":130224486,"body_markdown":"@AlexMamo Hi Alex, thanks for the response. Not yet. I also tried using if statement for `is.clicked` for the two radio buttons but still can&#39;t update. Can I edit with more codes and ask you for help?","body":"@AlexMamo Hi Alex, thanks for the response. Not yet. I also tried using if statement for <code>is.clicked</code> for the two radio buttons but still can&#39;t update. Can I edit with more codes and ask you for help?"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1663417621,"post_id":73735957,"comment_id":130237543,"body_markdown":"So you&#39;re actually looking for having the radio button set, according to what you have stored in the database? And each time you select, you need to update that in the database?","body":"So you&#39;re actually looking for having the radio button set, according to what you have stored in the database? And each time you select, you need to update that in the database?"},{"owner":{"account_id":18735960,"reputation":322,"user_id":13660296,"display_name":"swiftlearneer"},"score":0,"creation_date":1663419380,"post_id":73735957,"comment_id":130237904,"body_markdown":"@AlexMamo Yes! I have a button `buttonfor`. After each time the radio button is selected and clicked and button `buttonfor`, I&#39;d like to update the value in the Firestore database","body":"@AlexMamo Yes! I have a button <code>buttonfor</code>. After each time the radio button is selected and clicked and button <code>buttonfor</code>, I&#39;d like to update the value in the Firestore database"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1663419764,"post_id":73735957,"comment_id":130237980,"body_markdown":"And each time, you open the app, would you like to read it first, so it can be set according to what already exists in the database, right?","body":"And each time, you open the app, would you like to read it first, so it can be set according to what already exists in the database, right?"},{"owner":{"account_id":18735960,"reputation":322,"user_id":13660296,"display_name":"swiftlearneer"},"score":0,"creation_date":1663426985,"post_id":73735957,"comment_id":130239644,"body_markdown":"@AlexMamo Yes! Each time when the app is open, the user select a radio button and store there. If the user changes the selection, it should be updated. Would it be wise to stored the old response as well? At the moment, my code only save once and did not update / stack a new response","body":"@AlexMamo Yes! Each time when the app is open, the user select a radio button and store there. If the user changes the selection, it should be updated. Would it be wise to stored the old response as well? At the moment, my code only save once and did not update / stack a new response"}],"answers":[{"tags":[],"owner":{"account_id":22301228,"reputation":19,"user_id":16526426,"display_name":"NNAMDI HENRY"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1663330056,"creation_date":1663330056,"answer_id":73744627,"question_id":73735957,"body_markdown":"Sorry I am not able to comment yet!\r\nIf your question is not solved yet, please may you provide more code because per my check on the code snippet you provided I cannot detect where the error is coming from.\r\n","title":"Save and update radiobutton response correctly java","body":"<p>Sorry I am not able to comment yet!\nIf your question is not solved yet, please may you provide more code because per my check on the code snippet you provided I cannot detect where the error is coming from.</p>\n"},{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663615780,"creation_date":1663498870,"answer_id":73762181,"question_id":73735957,"body_markdown":"To solve this, first, you have to create a layout that contains two radio buttons:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;RadioGroup\r\n        android:id=&quot;@+id/radioGroup&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/yesRadioButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Yes&quot;/&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/noRadioButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;No&quot;/&gt;\r\n    &lt;/RadioGroup&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nThen inside your activity, you have to find them by id and attach a real-time listener. Assuming that your Firestore schema looks like this:\r\n\r\n    Firestore-root\r\n      |\r\n      --- users\r\n           |\r\n           --- $uid\r\n                |\r\n                --- participate: true\r\n                |\r\n                --- //other fields\r\n\r\nHere is the code:\r\n\r\nDefine them as members of the class (global variables):\r\n\r\n    String uid = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    DocumentReference uidRef = db.collection(&quot;users&quot;).document(uid);\r\n\r\nAdd inside onCreate:\r\n\r\n    RadioButton yesRadioButton = findViewById(R.id.yesRadioButton);\r\n    RadioButton noRadioButton = findViewById(R.id.noRadioButton);\r\n    uidRef.addSnapshotListener(new EventListener&lt;DocumentSnapshot&gt;() {\r\n        @Override\r\n        public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n            if (e != null) {\r\n                Log.w(TAG, &quot;Listen failed.&quot;, e);\r\n                return;\r\n            }\r\n\r\n            if (snapshot != null &amp;&amp; snapshot.exists()) {\r\n                Boolean participate = snapshot.getBoolean(&quot;participate&quot;);\r\n                if(participate != null) {\r\n                    if (participate) {\r\n                        yesRadioButton.setChecked(true);\r\n                    } else {\r\n                        noRadioButton.setChecked(true);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\nHere is to code for attaching a click listener on each radio button:\r\n\r\n    yesRadioButton.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            if (yesRadioButton.isChecked()) {\r\n                updateParticipate(true);\r\n            }\r\n        }\r\n    });\r\n    noRadioButton.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            if (noRadioButton.isChecked()) {\r\n                updateParticipate(false);\r\n            }\r\n        }\r\n    });\r\n\r\nAnd here is the method which is responsible for the update:\r\n\r\n    void updateParticipate(boolean participate) {\r\n        Map&lt;String, Object&gt; update = new HashMap&lt;&gt;();\r\n        update.put(&quot;participate&quot;, participate);\r\n        uidRef.update(update).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                Toast.makeText(getApplicationContext(), &quot;Updated: &quot; + participate, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }","title":"Save and update radiobutton response correctly java","body":"<p>To solve this, first, you have to create a layout that contains two radio buttons:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;RadioGroup\n        android:id=&quot;@+id/radioGroup&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/yesRadioButton&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Yes&quot;/&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/noRadioButton&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;No&quot;/&gt;\n    &lt;/RadioGroup&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Then inside your activity, you have to find them by id and attach a real-time listener. Assuming that your Firestore schema looks like this:</p>\n<pre><code>Firestore-root\n  |\n  --- users\n       |\n       --- $uid\n            |\n            --- participate: true\n            |\n            --- //other fields\n</code></pre>\n<p>Here is the code:</p>\n<p>Define them as members of the class (global variables):</p>\n<pre><code>String uid = FirebaseAuth.getInstance().getCurrentUser().getUid();\nFirebaseFirestore db = FirebaseFirestore.getInstance();\nDocumentReference uidRef = db.collection(&quot;users&quot;).document(uid);\n</code></pre>\n<p>Add inside onCreate:</p>\n<pre><code>RadioButton yesRadioButton = findViewById(R.id.yesRadioButton);\nRadioButton noRadioButton = findViewById(R.id.noRadioButton);\nuidRef.addSnapshotListener(new EventListener&lt;DocumentSnapshot&gt;() {\n    @Override\n    public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\n        if (e != null) {\n            Log.w(TAG, &quot;Listen failed.&quot;, e);\n            return;\n        }\n\n        if (snapshot != null &amp;&amp; snapshot.exists()) {\n            Boolean participate = snapshot.getBoolean(&quot;participate&quot;);\n            if(participate != null) {\n                if (participate) {\n                    yesRadioButton.setChecked(true);\n                } else {\n                    noRadioButton.setChecked(true);\n                }\n            }\n        }\n    }\n});\n</code></pre>\n<p>Here is to code for attaching a click listener on each radio button:</p>\n<pre><code>yesRadioButton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        if (yesRadioButton.isChecked()) {\n            updateParticipate(true);\n        }\n    }\n});\nnoRadioButton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        if (noRadioButton.isChecked()) {\n            updateParticipate(false);\n        }\n    }\n});\n</code></pre>\n<p>And here is the method which is responsible for the update:</p>\n<pre><code>void updateParticipate(boolean participate) {\n    Map&lt;String, Object&gt; update = new HashMap&lt;&gt;();\n    update.put(&quot;participate&quot;, participate);\n    uidRef.update(update).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;Void&gt; task) {\n            Toast.makeText(getApplicationContext(), &quot;Updated: &quot; + participate, Toast.LENGTH_SHORT).show();\n        }\n    });\n}\n</code></pre>\n"}],"owner":{"account_id":18735960,"reputation":322,"user_id":13660296,"display_name":"swiftlearneer"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73762181,"answer_count":2,"score":0,"last_activity_date":1663615780,"creation_date":1663267032,"question_id":73735957,"body_markdown":"I am trying to save the radio button user response in Firestore under the UID. I have two choices `yes` and `no` to the question. It only works one time that the user selects a choice with a button pressed but if the user wants to change the answer it does not update (replace the old response). \r\n\r\nI am wondering if anyone can help so that the selected response can be updated. \r\n\r\n       \r\n \r\n\r\n    buttonfor.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    String yes = yesButton.getText().toString();\r\n                    String no = yesButton.getText().toString();\r\n\r\n                   Map&lt;String, Object&gt; user = new HashMap&lt;&gt;();\r\n                    if (radioGroup.getCheckedRadioButtonId() == R.id.question_a1) {\r\n                        user.put(&quot;I am wiling to participate&quot;, yes);\r\n                    } else if (radioGroup.getCheckedRadioButtonId() == R.id.question_a2){\r\n                        user.put(&quot;I am wiling to participate&quot;, no);\r\n                    }\r\n    \r\n                    userID = fAuth.getCurrentUser().getUid();\r\n                    fStore.collection(&quot;users&quot;).document(userID).set(user).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(question.this, &quot;User Response Saved&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            Toast.makeText(question.this, &quot;Error!&quot;, Toast.LENGTH_SHORT).show();\r\n                            Log.d(TAG, e.toString());\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\nIn addition, I also tried but the response does not update in Firestore\r\n\r\n     if (yesButton.isChecked()){\r\n                user.put(&quot;I am wiling to participate&quot;, yes);\r\n            } else if (noButton.isChecked()){\r\n                user.put(&quot;I am wiling to participate&quot;, no);\r\n            }\r\n\r\nAnd with `update` instead of `set` also did not work...\r\n\r\n    fStore.collection(&quot;users&quot;).document(userID).update(user).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;()","title":"Save and update radiobutton response correctly java","body":"<p>I am trying to save the radio button user response in Firestore under the UID. I have two choices <code>yes</code> and <code>no</code> to the question. It only works one time that the user selects a choice with a button pressed but if the user wants to change the answer it does not update (replace the old response).</p>\n<p>I am wondering if anyone can help so that the selected response can be updated.</p>\n<pre><code>buttonfor.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String yes = yesButton.getText().toString();\n                String no = yesButton.getText().toString();\n\n               Map&lt;String, Object&gt; user = new HashMap&lt;&gt;();\n                if (radioGroup.getCheckedRadioButtonId() == R.id.question_a1) {\n                    user.put(&quot;I am wiling to participate&quot;, yes);\n                } else if (radioGroup.getCheckedRadioButtonId() == R.id.question_a2){\n                    user.put(&quot;I am wiling to participate&quot;, no);\n                }\n\n                userID = fAuth.getCurrentUser().getUid();\n                fStore.collection(&quot;users&quot;).document(userID).set(user).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                    @Override\n                    public void onSuccess(Void aVoid) {\n                        Toast.makeText(question.this, &quot;User Response Saved&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                }).addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        Toast.makeText(question.this, &quot;Error!&quot;, Toast.LENGTH_SHORT).show();\n                        Log.d(TAG, e.toString());\n                    }\n                });\n            }\n        });\n</code></pre>\n<p>In addition, I also tried but the response does not update in Firestore</p>\n<pre><code> if (yesButton.isChecked()){\n            user.put(&quot;I am wiling to participate&quot;, yes);\n        } else if (noButton.isChecked()){\n            user.put(&quot;I am wiling to participate&quot;, no);\n        }\n</code></pre>\n<p>And with <code>update</code> instead of <code>set</code> also did not work...</p>\n<pre><code>fStore.collection(&quot;users&quot;).document(userID).update(user).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;()\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","http-status-code-403"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660949999,"post_id":73420080,"comment_id":129662767,"body_markdown":"why are you double posting? https://stackoverflow.com/questions/73419419/403-forbidden-for-openapiswagger-in-spring-boot-security","body":"why are you double posting? <a href=\"https://stackoverflow.com/questions/73419419/403-forbidden-for-openapiswagger-in-spring-boot-security\" title=\"403 forbidden for openapiswagger in spring boot security\">stackoverflow.com/questions/73419419/&hellip;</a>"},{"owner":{"account_id":15991228,"reputation":669,"user_id":12091152,"display_name":"Artur Vartanyan"},"score":0,"creation_date":1660988906,"post_id":73420080,"comment_id":129667080,"body_markdown":"there is another problem, and here is another","body":"there is another problem, and here is another"}],"answers":[{"tags":[],"owner":{"account_id":15302648,"reputation":92,"user_id":11042152,"display_name":"knowNothing"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661073520,"creation_date":1661073520,"answer_id":73433067,"question_id":73420080,"body_markdown":"try to use this configurations, these works for me\r\n`    \r\n\r\n    @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.csrf().disable()\r\n                    .authorizeRequests().antMatchers( apiUrl + &quot;/login&quot;,&quot;/user-openapi/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;,&quot;/index.html&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n                    .and().sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    \r\n            http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);\r\n        }\r\n    \r\n        @Override\r\n        public void configure(WebSecurity web) throws Exception {\r\n            web.ignoring().antMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;);\r\n        }\r\n\r\n`","title":"All requests through OpenApi return 403 FORBIDDEN","body":"<p>try to use this configurations, these works for me\n`</p>\n<pre><code>@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .authorizeRequests().antMatchers( apiUrl + &quot;/login&quot;,&quot;/user-openapi/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;,&quot;/index.html&quot;).permitAll()\n                .anyRequest().authenticated()\n                .and().sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring().antMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;);\n    }\n</code></pre>\n<p>`</p>\n"},{"tags":[],"owner":{"account_id":16632667,"reputation":1,"user_id":12020166,"display_name":"incondensable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663615160,"creation_date":1663615036,"answer_id":73778300,"question_id":73420080,"body_markdown":"I was struggling with the exact same problem.\r\nI decided to request for my swagger UI again and at the same time I opened the Developer Options of my Safari Browser, there was the place that I saw what Requests (Paths) are filtered out and Spring Security didn&#39;t allow to pass!\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n                http. // ...\r\n                .antMatchers(&quot;/api/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll()\r\n                // ...\r\nthis works for me.\r\n\r\nI am using Spring Boot version 2.7.3 and Springdoc-openapi-ui version 1.6.10","title":"All requests through OpenApi return 403 FORBIDDEN","body":"<p>I was struggling with the exact same problem.\nI decided to request for my swagger UI again and at the same time I opened the Developer Options of my Safari Browser, there was the place that I saw what Requests (Paths) are filtered out and Spring Security didn't allow to pass!</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n            http. // ...\n            .antMatchers(&quot;/api/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll()\n            // ...\n</code></pre>\n<p>this works for me.</p>\n<p>I am using Spring Boot version 2.7.3 and Springdoc-openapi-ui version 1.6.10</p>\n"}],"owner":{"account_id":15991228,"reputation":669,"user_id":12091152,"display_name":"Artur Vartanyan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1701,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1663615160,"creation_date":1660928765,"question_id":73420080,"body_markdown":"There is a `Spring Boot` application that uses `Spring Security`. Added `OpenApi Swagger` to the project. The login request returns `403` even though added to *permitAll()*. Through Postman everything works fine.\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfiguration {\r\n\r\n    @Bean\r\n    public SessionRegistry sessionRegistry() {\r\n        return new SessionRegistryImpl();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\r\n            throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .cors().disable().csrf().disable().authorizeRequests()\r\n                .antMatchers(&quot;/api/user/login&quot;).permitAll()\r\n                .anyRequest().authenticated();\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.ignoring()\r\n                           .antMatchers(&quot;/v3/api-docs/**&quot;)\r\n                           .antMatchers(&quot;configuration/**&quot;)\r\n                           .antMatchers(&quot;/swagger*/**&quot;)\r\n                           .antMatchers(&quot;/webjars/**&quot;)\r\n                           .antMatchers(&quot;/swagger-ui/**&quot;);\r\n    }\r\n}\r\n```\r\n\r\nI tried to register in the webSecurityCustomizer () method, but still nothing works.\r\n\r\nbuild.gradle:\r\n```java\r\ndependencies {\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-web&#39;, version: &#39;2.7.2&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-jdbc&#39;, version: &#39;2.7.2&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-security&#39;, version: &#39;2.7.2&#39;\r\n\r\n    implementation group: &#39;com.microsoft.sqlserver&#39;, name: &#39;mssql-jdbc&#39;, version: &#39;9.4.1.jre16&#39;\r\n\r\n    implementation group: &#39;org.json&#39;, name: &#39;json&#39;, version: &#39;20220320&#39;\r\n\r\n    implementation group: &#39;org.springdoc&#39;, name: &#39;springdoc-openapi-ui&#39;, version: &#39;1.6.10&#39;\r\n\r\n    implementation group: &#39;javax.xml.bind&#39;, name: &#39;jaxb-api&#39;, version: &#39;2.3.1&#39;\r\n\r\n    compileOnly &#39;org.projectlombok:lombok:1.18.24&#39;\r\n\r\n    annotationProcessor &#39;org.projectlombok:lombok:1.18.24&#39;\r\n}\r\n```","title":"All requests through OpenApi return 403 FORBIDDEN","body":"<p>There is a <code>Spring Boot</code> application that uses <code>Spring Security</code>. Added <code>OpenApi Swagger</code> to the project. The login request returns <code>403</code> even though added to <em>permitAll()</em>. Through Postman everything works fine.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n\n    @Bean\n    public SessionRegistry sessionRegistry() {\n        return new SessionRegistryImpl();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\n            throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .cors().disable().csrf().disable().authorizeRequests()\n                .antMatchers(&quot;/api/user/login&quot;).permitAll()\n                .anyRequest().authenticated();\n\n        return http.build();\n    }\n\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.ignoring()\n                           .antMatchers(&quot;/v3/api-docs/**&quot;)\n                           .antMatchers(&quot;configuration/**&quot;)\n                           .antMatchers(&quot;/swagger*/**&quot;)\n                           .antMatchers(&quot;/webjars/**&quot;)\n                           .antMatchers(&quot;/swagger-ui/**&quot;);\n    }\n}\n</code></pre>\n<p>I tried to register in the webSecurityCustomizer () method, but still nothing works.</p>\n<p>build.gradle:</p>\n<pre class=\"lang-java prettyprint-override\"><code>dependencies {\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-web', version: '2.7.2'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-jdbc', version: '2.7.2'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-security', version: '2.7.2'\n\n    implementation group: 'com.microsoft.sqlserver', name: 'mssql-jdbc', version: '9.4.1.jre16'\n\n    implementation group: 'org.json', name: 'json', version: '20220320'\n\n    implementation group: 'org.springdoc', name: 'springdoc-openapi-ui', version: '1.6.10'\n\n    implementation group: 'javax.xml.bind', name: 'jaxb-api', version: '2.3.1'\n\n    compileOnly 'org.projectlombok:lombok:1.18.24'\n\n    annotationProcessor 'org.projectlombok:lombok:1.18.24'\n}\n</code></pre>\n"},{"tags":["java","spring-boot","token","keycloak","http-status-code-500"],"comments":[{"owner":{"account_id":22100829,"reputation":1647,"user_id":16357334,"display_name":"sventorben"},"score":0,"creation_date":1657290461,"post_id":72904982,"comment_id":128782499,"body_markdown":"Which version of Keycloak do you use? Quarkus-based or Wildfly-based distribution?\nIf wildfly-based, you may be missing a `/auth` at the end of `keycloak.auth-server-url`.","body":"Which version of Keycloak do you use? Quarkus-based or Wildfly-based distribution? If wildfly-based, you may be missing a <code>&#47;auth</code> at the end of <code>keycloak.auth-server-url</code>."},{"owner":{"account_id":25752780,"reputation":31,"user_id":19505068,"display_name":"mansillalucas"},"score":0,"creation_date":1657311698,"post_id":72904982,"comment_id":128788998,"body_markdown":"It&#39;s Keycloak 18.0.0 working under Quarkus 2.7.5.Final","body":"It&#39;s Keycloak 18.0.0 working under Quarkus 2.7.5.Final"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1659124732,"post_id":72904982,"comment_id":129227058,"body_markdown":"Any feedback about the answer?","body":"Any feedback about the answer?"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659489787,"creation_date":1657362503,"answer_id":72920622,"question_id":72904982,"body_markdown":"[Keycloak adapters are deprecated][1] and not quite ready for spring-boot 2.7 and later (still extend WebSecurityConfigurerAdapter for instance).\r\n\r\nGet a look at [`spring-addons-webmvc-jwt-resource-server`][2]. It is ready for latest boot versions and much more portable to other OIDC servers. Tutorial [here][3] (or [there][4] if you prefer to use `spring-boot-starter-oauth2-resource-server` at the price of quite some more Java conf)\r\n\r\n\r\n  [1]: https://github.com/keycloak/keycloak/discussions/10187\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/webmvc/spring-addons-webmvc-jwt-resource-server\r\n  [3]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_oauthentication\r\n  [4]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_jwtauthenticationtoken","title":"Error 500 while using bearer token with Spring boot + Keycloak","body":"<p><a href=\"https://github.com/keycloak/keycloak/discussions/10187\" rel=\"nofollow noreferrer\">Keycloak adapters are deprecated</a> and not quite ready for spring-boot 2.7 and later (still extend WebSecurityConfigurerAdapter for instance).</p>\n<p>Get a look at <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/webmvc/spring-addons-webmvc-jwt-resource-server\" rel=\"nofollow noreferrer\"><code>spring-addons-webmvc-jwt-resource-server</code></a>. It is ready for latest boot versions and much more portable to other OIDC servers. Tutorial <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_oauthentication\" rel=\"nofollow noreferrer\">here</a> (or <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_jwtauthenticationtoken\" rel=\"nofollow noreferrer\">there</a> if you prefer to use <code>spring-boot-starter-oauth2-resource-server</code> at the price of quite some more Java conf)</p>\n"},{"tags":[],"owner":{"account_id":25752780,"reputation":31,"user_id":19505068,"display_name":"mansillalucas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663614828,"creation_date":1663614828,"answer_id":73778266,"question_id":72904982,"body_markdown":"So apparently, the server url wasn&#39;t properly configured. Taking out the /auth in the path helped solving it. The localhost:8000/auth was deprecated since KC 17, and from now on, it&#39;s just the server url.\r\n\r\nhttps://www.keycloak.org/migration/migrating-to-quarkus","title":"Error 500 while using bearer token with Spring boot + Keycloak","body":"<p>So apparently, the server url wasn't properly configured. Taking out the /auth in the path helped solving it. The localhost:8000/auth was deprecated since KC 17, and from now on, it's just the server url.</p>\n<p><a href=\"https://www.keycloak.org/migration/migrating-to-quarkus\" rel=\"nofollow noreferrer\">https://www.keycloak.org/migration/migrating-to-quarkus</a></p>\n"}],"owner":{"account_id":25752780,"reputation":31,"user_id":19505068,"display_name":"mansillalucas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1758,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73778266,"answer_count":2,"score":2,"last_activity_date":1663614828,"creation_date":1657234105,"question_id":72904982,"body_markdown":"This is my first Keycloack integration with a SpringBoot + Spring Security app, and i found myself in a problem. I am using the Keycloak Spring Security Adapter, but something is missing since an error 500 is shown instead of authorizing the request by bearer_token. When i don&#39;t send the token, an authorization problem presents which makes sense (401 Unauthorized), but when i do insert a token an error 500 is presented. This happens however with endpoint that specify @RolesAllowed(), since those that doesn&#39;t have it can be fetch just fine.\r\n\r\nSomething you might notice is that for this kind of services is that usually the Access Type would be *bearer-only*, but for this instance is *public*. For this project is necessary unless there&#39;s no other choice to this and *bearer-only* is the only way.\r\n\r\n**General information**\r\n```\r\nKeycloak:\r\n- Running at port 3000\r\n- Version 18.0.0\r\nSpringboot:\r\n- Running at port 8080\r\n- Version 2.7.1\r\n\r\nRealm:\r\n- Name:\r\n  * TRP (all uppercase)\r\n\r\nClient:\r\n- Client ID: &lt;clientName&gt;\r\n- Access type: Public\r\n- Standard Flow Enabled and Direct Access Grants Enabled enabled\r\n- Valid Redirect URIs: http://localhost:8080/*\r\n- Base URL: http://localhost:3000/\r\n- Admin URL: http://localhost:3000/\r\n- Web Origins: *\r\n- Roles:\r\n    * extern-user(Users in role: *&lt;user001&gt;*)\r\n\r\nRoles:\r\n- app-user\r\n    * Composite Roles enabled\r\n    * Client Roles (Associated Roles:extern-user)\r\n```\r\n\r\n\r\n**application.properties**\r\n```\r\nserver.port=8080\r\nkeycloak.auth-server-url            = http://localhost:3000/\r\nkeycloak.realm                      = &lt;realmName&gt;\r\nkeycloak.resource                   = &lt;clientName&gt;\r\nkeycloak.ssl-required               = external\r\nkeycloak.use-resource-role-mappings = true\r\nkeycloak.bearer-only                = true\r\nkeycloak.public-client              = true\r\n```\r\n\r\n**pom.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.package&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;TRP&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;name&lt;/name&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;keycloak.version&gt;18.0.0&lt;/keycloak.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;!-- Agregado con Springboot Initializr --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Agregado para este proyecto --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.keycloak&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;keycloak-spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${keycloak.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.keycloak&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;keycloak-spring-security-adapter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${keycloak.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.keycloak.bom&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;keycloak-adapter-bom&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${keycloak.version}&lt;/version&gt;\r\n\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n**KeycloakSecurityConfig.java**\r\n```\r\npackage com.package.realm.config;\r\nimport org.keycloak.adapters.KeycloakConfigResolver;\r\nimport org.keycloak.adapters.springboot.KeycloakSpringBootProperties;\r\nimport org.keycloak.adapters.springsecurity.KeycloakConfiguration;\r\nimport org.keycloak.adapters.springsecurity.authentication.KeycloakAuthenticationProvider;\r\nimport org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.web.servlet.ServletListenerRegistrationBean;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Primary;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.core.authority.mapping.SimpleAuthorityMapper;\r\nimport org.springframework.security.web.authentication.session.RegisterSessionAuthenticationStrategy;\r\nimport org.springframework.security.core.session.SessionRegistryImpl;\r\n\r\nimport org.springframework.security.web.authentication.session.SessionAuthenticationStrategy;\r\nimport org.springframework.security.web.session.HttpSessionEventPublisher;\r\n\r\n@KeycloakConfiguration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\r\npublic class KeycloakSecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\r\n    \r\n    // Registra el keycloakAuthenticationProvider con el administrador de autenticaci&#243;n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception{\r\n        KeycloakAuthenticationProvider provider = new KeycloakAuthenticationProvider();\r\n        provider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\r\n        auth.authenticationProvider(provider);\r\n    }\r\n\r\n    // Define la estrategia de autenticaci&#243;n\r\n    @Bean\r\n    @Override\r\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy(){\r\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\r\n    }\r\n\r\n    // Define desde donde se integran las propiedades de Keycloak\r\n    @Bean\r\n    @Primary\r\n    public KeycloakConfigResolver keycloakConfigResolver(KeycloakSpringBootProperties properties) {\r\n        System.out.println(&quot;\\n&quot; \r\n        + &quot;\\nAuthentication server:&quot; + properties.getAuthServerUrl() \r\n        + &quot;\\nRealm:&quot; + properties.getRealm() \r\n        + &quot;\\nClient: &quot; + properties.getResource()\r\n        + &quot;\\n&quot;);\r\n        return new MyKeycloakSpringBootConfigResolver(properties);\r\n    }\r\n\r\n    @Bean\r\n    public ServletListenerRegistrationBean&lt;HttpSessionEventPublisher&gt; httpSessionEventPublisher() {\r\n        return new ServletListenerRegistrationBean&lt;HttpSessionEventPublisher&gt;(new HttpSessionEventPublisher());\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception\r\n    {\r\n        super.configure(http);\r\n        http.authorizeRequests()\r\n            .anyRequest().permitAll();\r\n        http.csrf().disable();  //Con tokens no hay problemas de ataques de Cross Reference \r\n    }\r\n\r\n}\r\n```\r\n\r\n**MyKeycloakSpringBootConfigResolver** (class to resolve bean circular reference)\r\n```\r\npackage com.package.realm.config;\r\nimport org.keycloak.adapters.KeycloakDeployment;\r\nimport org.keycloak.adapters.KeycloakDeploymentBuilder;\r\nimport org.keycloak.adapters.spi.HttpFacade;\r\nimport org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver;\r\nimport org.keycloak.adapters.springboot.KeycloakSpringBootProperties;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n    /*\r\n    *  Por defecto, el adaptador Spring Security busca por un archivo de configuraci&#243;n keycloak.json.\r\n        Podemos asegurarnos que busque por la configuraci&#243;n otorgada por el adaptador para Spring boot\r\n        al agregar este bean indicando que aca se encuentran las variables de configuraci&#243;n para acceder\r\n        a KeyCloak\r\n    */\r\n\r\n@Configuration\r\npublic class MyKeycloakSpringBootConfigResolver extends KeycloakSpringBootConfigResolver {\r\n    \r\n    private final KeycloakDeployment keycloakDeployment;\r\n\r\n    public MyKeycloakSpringBootConfigResolver(KeycloakSpringBootProperties properties) {\r\n        keycloakDeployment = KeycloakDeploymentBuilder.build(properties);\r\n    }\r\n\r\n    @Override\r\n    public KeycloakDeployment resolve(HttpFacade.Request facade) {\r\n        return keycloakDeployment;\r\n    }\r\n}\r\n```\r\n\r\n**TestController.java**\r\n```\r\npackage com.package.realm.controller;\r\n\r\nimport javax.annotation.security.RolesAllowed;\r\n\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestMethod;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/test&quot;)\r\npublic class TestController {\r\n\r\n    @RolesAllowed(&quot;extern-user&quot;) //This creates problem\r\n    @RequestMapping(value = &quot;/user&quot;, method = RequestMethod.GET)\r\n    public ResponseEntity&lt;String&gt; getUser() {\r\n        return ResponseEntity.ok(&quot;Hola usuario&quot;);\r\n    }\r\n\r\n    @RequestMapping(value = &quot;/admin&quot;, method = RequestMethod.GET)\r\n    public ResponseEntity&lt;String&gt; getAdmin() {\r\n        return ResponseEntity.ok(&quot;Hola administrador&quot;);\r\n    }\r\n}\r\n```\r\nHere&#39;s an image with every outcome.\r\n[Text](https://i.stack.imgur.com/py2J8.jpg)\r\n\r\n**The error stack**\r\n```\r\n2022-07-07 17:56:42.297 ERROR 4292 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost]           : Exception Processing ErrorPage[errorCode=0, location=/error]\r\n\r\njava.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;this.input&quot; is null\r\n        at java.base/java.net.URI$Parser.parse(URI.java:3164) ~[na:na]\r\n        at java.base/java.net.URI.&lt;init&gt;(URI.java:623) ~[na:na]\r\n        at java.base/java.net.URI.create(URI.java:904) ~[na:na]\r\n        at org.apache.http.client.methods.HttpGet.&lt;init&gt;(HttpGet.java:66) ~[httpclient-4.5.13.jar:4.5.13]\r\n        at org.keycloak.adapters.rotation.JWKPublicKeyLocator.sendRequest(JWKPublicKeyLocator.java:98) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\r\n        at org.keycloak.adapters.rotation.JWKPublicKeyLocator.getPublicKey(JWKPublicKeyLocator.java:63) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\r\n        at org.keycloak.adapters.rotation.AdapterTokenVerifier.getPublicKey(AdapterTokenVerifier.java:121) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\r\n        at org.keycloak.adapters.rotation.AdapterTokenVerifier.createVerifier(AdapterTokenVerifier.java:111) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\r\n        at org.keycloak.adapters.rotation.AdapterTokenVerifier.verifyToken(AdapterTokenVerifier.java:47) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\r\n        at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticateToken(BearerTokenRequestAuthenticator.java:103) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\r\n        at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticate(BearerTokenRequestAuthenticator.java:88) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\r\n        at org.keycloak.adapters.RequestAuthenticator.authenticate(RequestAuthenticator.java:67) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\r\n        at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.attemptAuthentication(KeycloakAuthenticationProcessingFilter.java:154) ~[keycloak-spring-security-adapter-18.0.0.jar:18.0.0]\r\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96) ~[keycloak-spring-security-adapter-18.0.0.jar:18.0.0]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.7.2.jar:5.7.2]\r\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:385) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:403) ~[tomcat-embed-core-9.0.64.jar:9.0.64]        at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:249) ~[tomcat-embed-core-9.0.64.jar:9.0.64]        at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:344) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:169) ~[tomcat-embed-core-9.0.64.jar:9.0.64]        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.64.jar:9.0.64] \r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.64.jar:9.0.64]  \r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.64.jar:9.0.64]   \r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1787) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```\r\n\r\nSo, at this point i tried a couple of changes on application.properties, change and test different options on the config file, putting and taking out dependencies, etc. but everything leads to the same 500 error. I don&#39;t know what else configure, and the stack doesn&#39;t really show something that i can work on.\r\nDid anyone had a similar error? Does anyone have an idea what could i do?","title":"Error 500 while using bearer token with Spring boot + Keycloak","body":"<p>This is my first Keycloack integration with a SpringBoot + Spring Security app, and i found myself in a problem. I am using the Keycloak Spring Security Adapter, but something is missing since an error 500 is shown instead of authorizing the request by bearer_token. When i don't send the token, an authorization problem presents which makes sense (401 Unauthorized), but when i do insert a token an error 500 is presented. This happens however with endpoint that specify @RolesAllowed(), since those that doesn't have it can be fetch just fine.</p>\n<p>Something you might notice is that for this kind of services is that usually the Access Type would be <em>bearer-only</em>, but for this instance is <em>public</em>. For this project is necessary unless there's no other choice to this and <em>bearer-only</em> is the only way.</p>\n<p><strong>General information</strong></p>\n<pre><code>Keycloak:\n- Running at port 3000\n- Version 18.0.0\nSpringboot:\n- Running at port 8080\n- Version 2.7.1\n\nRealm:\n- Name:\n  * TRP (all uppercase)\n\nClient:\n- Client ID: &lt;clientName&gt;\n- Access type: Public\n- Standard Flow Enabled and Direct Access Grants Enabled enabled\n- Valid Redirect URIs: http://localhost:8080/*\n- Base URL: http://localhost:3000/\n- Admin URL: http://localhost:3000/\n- Web Origins: *\n- Roles:\n    * extern-user(Users in role: *&lt;user001&gt;*)\n\nRoles:\n- app-user\n    * Composite Roles enabled\n    * Client Roles (Associated Roles:extern-user)\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>server.port=8080\nkeycloak.auth-server-url            = http://localhost:3000/\nkeycloak.realm                      = &lt;realmName&gt;\nkeycloak.resource                   = &lt;clientName&gt;\nkeycloak.ssl-required               = external\nkeycloak.use-resource-role-mappings = true\nkeycloak.bearer-only                = true\nkeycloak.public-client              = true\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.package&lt;/groupId&gt;\n    &lt;artifactId&gt;TRP&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;name&lt;/name&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;keycloak.version&gt;18.0.0&lt;/keycloak.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- Agregado con Springboot Initializr --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Agregado para este proyecto --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\n            &lt;artifactId&gt;keycloak-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;${keycloak.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\n            &lt;artifactId&gt;keycloak-spring-security-adapter&lt;/artifactId&gt;\n            &lt;version&gt;${keycloak.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.keycloak.bom&lt;/groupId&gt;\n            &lt;artifactId&gt;keycloak-adapter-bom&lt;/artifactId&gt;\n            &lt;version&gt;${keycloak.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            \n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>KeycloakSecurityConfig.java</strong></p>\n<pre><code>package com.package.realm.config;\nimport org.keycloak.adapters.KeycloakConfigResolver;\nimport org.keycloak.adapters.springboot.KeycloakSpringBootProperties;\nimport org.keycloak.adapters.springsecurity.KeycloakConfiguration;\nimport org.keycloak.adapters.springsecurity.authentication.KeycloakAuthenticationProvider;\nimport org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.web.servlet.ServletListenerRegistrationBean;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.core.authority.mapping.SimpleAuthorityMapper;\nimport org.springframework.security.web.authentication.session.RegisterSessionAuthenticationStrategy;\nimport org.springframework.security.core.session.SessionRegistryImpl;\n\nimport org.springframework.security.web.authentication.session.SessionAuthenticationStrategy;\nimport org.springframework.security.web.session.HttpSessionEventPublisher;\n\n@KeycloakConfiguration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\npublic class KeycloakSecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\n    \n    // Registra el keycloakAuthenticationProvider con el administrador de autenticación\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception{\n        KeycloakAuthenticationProvider provider = new KeycloakAuthenticationProvider();\n        provider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\n        auth.authenticationProvider(provider);\n    }\n\n    // Define la estrategia de autenticación\n    @Bean\n    @Override\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy(){\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\n    }\n\n    // Define desde donde se integran las propiedades de Keycloak\n    @Bean\n    @Primary\n    public KeycloakConfigResolver keycloakConfigResolver(KeycloakSpringBootProperties properties) {\n        System.out.println(&quot;\\n&quot; \n        + &quot;\\nAuthentication server:&quot; + properties.getAuthServerUrl() \n        + &quot;\\nRealm:&quot; + properties.getRealm() \n        + &quot;\\nClient: &quot; + properties.getResource()\n        + &quot;\\n&quot;);\n        return new MyKeycloakSpringBootConfigResolver(properties);\n    }\n\n    @Bean\n    public ServletListenerRegistrationBean&lt;HttpSessionEventPublisher&gt; httpSessionEventPublisher() {\n        return new ServletListenerRegistrationBean&lt;HttpSessionEventPublisher&gt;(new HttpSessionEventPublisher());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception\n    {\n        super.configure(http);\n        http.authorizeRequests()\n            .anyRequest().permitAll();\n        http.csrf().disable();  //Con tokens no hay problemas de ataques de Cross Reference \n    }\n\n}\n</code></pre>\n<p><strong>MyKeycloakSpringBootConfigResolver</strong> (class to resolve bean circular reference)</p>\n<pre><code>package com.package.realm.config;\nimport org.keycloak.adapters.KeycloakDeployment;\nimport org.keycloak.adapters.KeycloakDeploymentBuilder;\nimport org.keycloak.adapters.spi.HttpFacade;\nimport org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver;\nimport org.keycloak.adapters.springboot.KeycloakSpringBootProperties;\nimport org.springframework.context.annotation.Configuration;\n\n    /*\n    *  Por defecto, el adaptador Spring Security busca por un archivo de configuración keycloak.json.\n        Podemos asegurarnos que busque por la configuración otorgada por el adaptador para Spring boot\n        al agregar este bean indicando que aca se encuentran las variables de configuración para acceder\n        a KeyCloak\n    */\n\n@Configuration\npublic class MyKeycloakSpringBootConfigResolver extends KeycloakSpringBootConfigResolver {\n    \n    private final KeycloakDeployment keycloakDeployment;\n\n    public MyKeycloakSpringBootConfigResolver(KeycloakSpringBootProperties properties) {\n        keycloakDeployment = KeycloakDeploymentBuilder.build(properties);\n    }\n\n    @Override\n    public KeycloakDeployment resolve(HttpFacade.Request facade) {\n        return keycloakDeployment;\n    }\n}\n</code></pre>\n<p><strong>TestController.java</strong></p>\n<pre><code>package com.package.realm.controller;\n\nimport javax.annotation.security.RolesAllowed;\n\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(&quot;/test&quot;)\npublic class TestController {\n\n    @RolesAllowed(&quot;extern-user&quot;) //This creates problem\n    @RequestMapping(value = &quot;/user&quot;, method = RequestMethod.GET)\n    public ResponseEntity&lt;String&gt; getUser() {\n        return ResponseEntity.ok(&quot;Hola usuario&quot;);\n    }\n\n    @RequestMapping(value = &quot;/admin&quot;, method = RequestMethod.GET)\n    public ResponseEntity&lt;String&gt; getAdmin() {\n        return ResponseEntity.ok(&quot;Hola administrador&quot;);\n    }\n}\n</code></pre>\n<p>Here's an image with every outcome.\n<a href=\"https://i.stack.imgur.com/py2J8.jpg\" rel=\"nofollow noreferrer\">Text</a></p>\n<p><strong>The error stack</strong></p>\n<pre><code>2022-07-07 17:56:42.297 ERROR 4292 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost]           : Exception Processing ErrorPage[errorCode=0, location=/error]\n\njava.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;this.input&quot; is null\n        at java.base/java.net.URI$Parser.parse(URI.java:3164) ~[na:na]\n        at java.base/java.net.URI.&lt;init&gt;(URI.java:623) ~[na:na]\n        at java.base/java.net.URI.create(URI.java:904) ~[na:na]\n        at org.apache.http.client.methods.HttpGet.&lt;init&gt;(HttpGet.java:66) ~[httpclient-4.5.13.jar:4.5.13]\n        at org.keycloak.adapters.rotation.JWKPublicKeyLocator.sendRequest(JWKPublicKeyLocator.java:98) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\n        at org.keycloak.adapters.rotation.JWKPublicKeyLocator.getPublicKey(JWKPublicKeyLocator.java:63) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\n        at org.keycloak.adapters.rotation.AdapterTokenVerifier.getPublicKey(AdapterTokenVerifier.java:121) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\n        at org.keycloak.adapters.rotation.AdapterTokenVerifier.createVerifier(AdapterTokenVerifier.java:111) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\n        at org.keycloak.adapters.rotation.AdapterTokenVerifier.verifyToken(AdapterTokenVerifier.java:47) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\n        at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticateToken(BearerTokenRequestAuthenticator.java:103) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\n        at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticate(BearerTokenRequestAuthenticator.java:88) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\n        at org.keycloak.adapters.RequestAuthenticator.authenticate(RequestAuthenticator.java:67) ~[keycloak-adapter-core-18.0.0.jar:18.0.0]\n        at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.attemptAuthentication(KeycloakAuthenticationProcessingFilter.java:154) ~[keycloak-spring-security-adapter-18.0.0.jar:18.0.0]\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96) ~[keycloak-spring-security-adapter-18.0.0.jar:18.0.0]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.7.2.jar:5.7.2]\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:385) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:403) ~[tomcat-embed-core-9.0.64.jar:9.0.64]        at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:249) ~[tomcat-embed-core-9.0.64.jar:9.0.64]        at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:344) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:169) ~[tomcat-embed-core-9.0.64.jar:9.0.64]        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.64.jar:9.0.64] \n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.64.jar:9.0.64]  \n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.64.jar:9.0.64]   \n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1787) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>So, at this point i tried a couple of changes on application.properties, change and test different options on the config file, putting and taking out dependencies, etc. but everything leads to the same 500 error. I don't know what else configure, and the stack doesn't really show something that i can work on.\nDid anyone had a similar error? Does anyone have an idea what could i do?</p>\n"},{"tags":["java","jetty","httpclient"],"answers":[{"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663614657,"creation_date":1663506673,"answer_id":73763058,"question_id":73720540,"body_markdown":"#### Most Common Cause\r\n\r\nYou&#39;ve specified an `HttpClient.setBindAddress(SocketAddress)` that forces the client to use the same *local* `InetAddress` every time it wants to connect out to a remote server.\r\n\r\nEither be careful of how you use the local bind address, or just don&#39;t set the local bind address on the `HttpClient`.\r\n\r\nJetty&#39;s `HttpClient` is essentially calling [`java.net.Socket.bind(SocketAddress)`][1] and that&#39;s what is causing your problem.\r\n\r\nMost projects *do not need a local bind address* when initiating an outgoing connection request.  If your organization requires it, then you&#39;ll have to deal with everything that it entails, namely that if one client application is using that bind address, another client application cannot.   Not even 2 clients in the same application can share it.\r\n\r\n#### Common Cause\r\n\r\nYour local address (ip + port) space has exhausted all of it&#39;s local outgoing ports.  This can happen if you are too aggressive with your client socket creation, but lazy with your socket usage and cleanup. (such as opening a connection, making a request, but not reading the response, possibly not even closing properly).\r\n\r\nSince you are on Windows, hopefully Windows 10 or better, use the `netstat` command line to check your open sockets, and pay attention to the TIME_WAIT entries, you likely have run out of local address combos (ip + port) you can use.  Check for TIME_WAIT entries, as those are an indication that you have a socket that was closed improperly.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/Socket.html#bind(java.net.SocketAddress)","title":"BindException using Jetty HttpClient","body":"<h4>Most Common Cause</h4>\n<p>You've specified an <code>HttpClient.setBindAddress(SocketAddress)</code> that forces the client to use the same <em>local</em> <code>InetAddress</code> every time it wants to connect out to a remote server.</p>\n<p>Either be careful of how you use the local bind address, or just don't set the local bind address on the <code>HttpClient</code>.</p>\n<p>Jetty's <code>HttpClient</code> is essentially calling <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/Socket.html#bind(java.net.SocketAddress)\" rel=\"nofollow noreferrer\"><code>java.net.Socket.bind(SocketAddress)</code></a> and that's what is causing your problem.</p>\n<p>Most projects <em>do not need a local bind address</em> when initiating an outgoing connection request.  If your organization requires it, then you'll have to deal with everything that it entails, namely that if one client application is using that bind address, another client application cannot.   Not even 2 clients in the same application can share it.</p>\n<h4>Common Cause</h4>\n<p>Your local address (ip + port) space has exhausted all of it's local outgoing ports.  This can happen if you are too aggressive with your client socket creation, but lazy with your socket usage and cleanup. (such as opening a connection, making a request, but not reading the response, possibly not even closing properly).</p>\n<p>Since you are on Windows, hopefully Windows 10 or better, use the <code>netstat</code> command line to check your open sockets, and pay attention to the TIME_WAIT entries, you likely have run out of local address combos (ip + port) you can use.  Check for TIME_WAIT entries, as those are an indication that you have a socket that was closed improperly.</p>\n"}],"owner":{"account_id":4565460,"reputation":480,"user_id":3706576,"display_name":"mperktold"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663614657,"creation_date":1663174196,"question_id":73720540,"body_markdown":"The following exception occurs intermittently when making requests with Jetty&#39;s HttpClient:\r\n\r\n```\r\n    java.net.BindException: Address already in use: connect\r\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\r\n        at java.base/sun.nio.ch.Net.connect(Unknown Source)\r\n        at java.base/sun.nio.ch.Net.connect(Unknown Source)\r\n        at java.base/sun.nio.ch.SocketChannelImpl.connect(Unknown Source)\r\n        at org.eclipse.jetty.io.ClientConnector.connect(ClientConnector.java:433)\r\n        at org.eclipse.jetty.client.AbstractConnectorHttpClientTransport.connect(AbstractConnectorHttpClientTransport.java:73)\r\n        at org.eclipse.jetty.client.HttpClient$1.connect(HttpClient.java:602)\r\n        at org.eclipse.jetty.client.HttpClient$1.succeeded(HttpClient.java:579)\r\n        at org.eclipse.jetty.client.HttpClient$1.succeeded(HttpClient.java:575)\r\n        at org.eclipse.jetty.util.SocketAddressResolver$Async.lambda$resolve$1(SocketAddressResolver.java:181)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n        at java.base/java.lang.Thread.run(Unknown Source)\r\n```\r\n\r\nUnfortunately, I don&#39;t know much about the specific scenario in which this happens.\r\n\r\nWe are using an Eclipse Distribution of OpenJDK 17.0.4 with Jetty 10.0.11 on a Windows machine.\r\n\r\nDoes anyone have an idea what the cause could be?\r\n\r\nA quick research (e.g. question [1][1], [2][2], and [3][3]) suggests that the system is running out of &quot;ephemeral ports&quot;, so it&#39;s a TCP issue.\r\nIf that&#39;s the case here too, what am I doing wrong, and how can I fix the problem with a Jetty client?\r\n\r\n  [1]: https://stackoverflow.com/questions/1978053/bindexception-address-already-in-use-on-a-client-socket\r\n  [2]: https://stackoverflow.com/questions/14419555/apache-http-client-local-address-bind-bindexception-after-some-time\r\n  [3]: https://stackoverflow.com/questions/31876441/java-net-bindexception-cannot-assign-requested-address-when-opening-too-many-co\r\n","title":"BindException using Jetty HttpClient","body":"<p>The following exception occurs intermittently when making requests with Jetty's HttpClient:</p>\n<pre><code>    java.net.BindException: Address already in use: connect\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\n        at java.base/sun.nio.ch.Net.connect(Unknown Source)\n        at java.base/sun.nio.ch.Net.connect(Unknown Source)\n        at java.base/sun.nio.ch.SocketChannelImpl.connect(Unknown Source)\n        at org.eclipse.jetty.io.ClientConnector.connect(ClientConnector.java:433)\n        at org.eclipse.jetty.client.AbstractConnectorHttpClientTransport.connect(AbstractConnectorHttpClientTransport.java:73)\n        at org.eclipse.jetty.client.HttpClient$1.connect(HttpClient.java:602)\n        at org.eclipse.jetty.client.HttpClient$1.succeeded(HttpClient.java:579)\n        at org.eclipse.jetty.client.HttpClient$1.succeeded(HttpClient.java:575)\n        at org.eclipse.jetty.util.SocketAddressResolver$Async.lambda$resolve$1(SocketAddressResolver.java:181)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.base/java.lang.Thread.run(Unknown Source)\n</code></pre>\n<p>Unfortunately, I don't know much about the specific scenario in which this happens.</p>\n<p>We are using an Eclipse Distribution of OpenJDK 17.0.4 with Jetty 10.0.11 on a Windows machine.</p>\n<p>Does anyone have an idea what the cause could be?</p>\n<p>A quick research (e.g. question <a href=\"https://stackoverflow.com/questions/1978053/bindexception-address-already-in-use-on-a-client-socket\">1</a>, <a href=\"https://stackoverflow.com/questions/14419555/apache-http-client-local-address-bind-bindexception-after-some-time\">2</a>, and <a href=\"https://stackoverflow.com/questions/31876441/java-net-bindexception-cannot-assign-requested-address-when-opening-too-many-co\">3</a>) suggests that the system is running out of &quot;ephemeral ports&quot;, so it's a TCP issue.\nIf that's the case here too, what am I doing wrong, and how can I fix the problem with a Jetty client?</p>\n"},{"tags":["java","python","class","instantiation"],"comments":[{"owner":{"account_id":40336,"reputation":16553,"user_id":116891,"accept_rate":62,"display_name":"Pat"},"score":0,"creation_date":1430786828,"post_id":452969,"comment_id":48200568,"body_markdown":"See http://stackoverflow.com/a/10675081/116891 for an example of using `importlib.import`, which was backported from python 3 to 2.7 (https://docs.python.org/2/library/importlib.html)","body":"See <a href=\"http://stackoverflow.com/a/10675081/116891\">stackoverflow.com/a/10675081/116891</a> for an example of using <code>importlib.import</code>, which was backported from python 3 to 2.7 (<a href=\"https://docs.python.org/2/library/importlib.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/importlib.html</a>)"},{"owner":{"account_id":56734,"reputation":23054,"user_id":169947,"accept_rate":62,"display_name":"Ken Williams"},"score":0,"creation_date":1654272540,"post_id":452969,"comment_id":128059216,"body_markdown":"I think all the complex gymnastics in the answers here directly contradict the assertion in the accepted answer that &quot;reflection in python is a lot easier and far more flexible than it is in Java.&quot;  I think a correct answer would be &quot;no, it doesn&#39;t, so you have to write one yourself&quot; (which is basically what @hasen&#39;s answer says).","body":"I think all the complex gymnastics in the answers here directly contradict the assertion in the accepted answer that &quot;reflection in python is a lot easier and far more flexible than it is in Java.&quot;  I think a correct answer would be &quot;no, it doesn&#39;t, so you have to write one yourself&quot; (which is basically what @hasen&#39;s answer says)."}],"answers":[{"tags":[],"owner":{"account_id":3448,"reputation":30451,"user_id":4977,"accept_rate":76,"display_name":"Serafina Brocious"},"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1232184254,"creation_date":1232179985,"answer_id":452971,"question_id":452969,"body_markdown":"Assuming the class is in your scope:\r\n\r\n    globals()[&#39;classname&#39;](args, to, constructor)\r\n\r\nOtherwise:\r\n\r\n    getattr(someModule, &#39;classname&#39;)(args, to, constructor)\r\n\r\nEdit:  Note, you can&#39;t give a name like &#39;foo.bar&#39; to getattr.  You&#39;ll need to split it by . and call getattr() on each piece left-to-right.  This will handle that:\r\n\r\n    module, rest = &#39;foo.bar.baz&#39;.split(&#39;.&#39;, 1)\r\n    fooBar = reduce(lambda a, b: getattr(a, b), rest.split(&#39;.&#39;), globals()[module])\r\n    someVar = fooBar(args, to, constructor)","title":"Does python have an equivalent to Java Class.forName()?","body":"<p>Assuming the class is in your scope:</p>\n\n<pre><code>globals()['classname'](args, to, constructor)\n</code></pre>\n\n<p>Otherwise:</p>\n\n<pre><code>getattr(someModule, 'classname')(args, to, constructor)\n</code></pre>\n\n<p>Edit:  Note, you can't give a name like 'foo.bar' to getattr.  You'll need to split it by . and call getattr() on each piece left-to-right.  This will handle that:</p>\n\n<pre><code>module, rest = 'foo.bar.baz'.split('.', 1)\nfooBar = reduce(lambda a, b: getattr(a, b), rest.split('.'), globals()[module])\nsomeVar = fooBar(args, to, constructor)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16316,"reputation":162735,"user_id":35364,"accept_rate":72,"display_name":"hasen"},"down_vote_count":2,"up_vote_count":192,"is_accepted":true,"score":190,"last_activity_date":1663614177,"creation_date":1232180739,"answer_id":452981,"question_id":452969,"body_markdown":"Reflection in python is a lot easier and far more flexible than it is in Java.\r\n\r\nI recommend reading this [tutorial](https://web.archive.org/web/20160304105303/http://www.diveintopython.net/power_of_introspection/index.html) (on archive.org)\r\n\r\nThere&#39;s no direct function (that I know of) which takes a fully qualified class name and returns the class, however you have all the pieces needed to build that, and you can connect them together.\r\n\r\nOne bit of advice though: don&#39;t try to program in Java style when you&#39;re in python.\r\n\r\nIf you can explain what is it that you&#39;re trying to do, maybe we can help you find a more pythonic way of doing it.\r\n\r\nHere&#39;s a function that does what you want:\r\n\r\n    def get_class( kls ):\r\n        parts = kls.split(&#39;.&#39;)\r\n        module = &quot;.&quot;.join(parts[:-1])\r\n        m = __import__( module )\r\n        for comp in parts[1:]:\r\n            m = getattr(m, comp)            \r\n        return m\r\n\r\n\r\nYou can use the return value of this function as if it were the class itself.\r\n\r\nHere&#39;s a usage example:\r\n\r\n    &gt;&gt;&gt; D = get_class(&quot;datetime.datetime&quot;)\r\n    &gt;&gt;&gt; D\r\n    &lt;type &#39;datetime.datetime&#39;&gt;\r\n    &gt;&gt;&gt; D.now()\r\n    datetime.datetime(2009, 1, 17, 2, 15, 58, 883000)\r\n    &gt;&gt;&gt; a = D( 2010, 4, 22 )\r\n    &gt;&gt;&gt; a\r\n    datetime.datetime(2010, 4, 22, 0, 0)\r\n    &gt;&gt;&gt; \r\n\r\n**How does that work?**\r\n\r\nWe&#39;re using `__import__` to import the module that holds the class, which required that we first extract the module name from the fully qualified name. Then we import the module:\r\n    \r\n    m = __import__( module )\r\n\r\nIn this case, `m` will only refer to the top level module, \r\n\r\nFor example, if your class lives in `foo.baz` module, then `m` will be the module `foo`  \r\nWe can easily obtain a reference to `foo.baz` using `getattr( m, &#39;baz&#39; )`\r\n\r\nTo get from the top level module to the class, have to recursively use `gettatr` on the parts of the class name\r\n\r\nSay for example, if you class name is `foo.baz.bar.Model` then we do this:\r\n\r\n    m = __import__( &quot;foo.baz.bar&quot; ) #m is package foo\r\n    m = getattr( m, &quot;baz&quot; ) #m is package baz\r\n    m = getattr( m, &quot;bar&quot; ) #m is module bar\r\n    m = getattr( m, &quot;Model&quot; ) #m is class Model\r\n    \r\n\r\nThis is what&#39;s happening in this loop:\r\n\r\n    for comp in parts[1:]:\r\n        m = getattr(m, comp)    \r\n\r\nAt the end of the loop, `m` will be a reference to the class. This means that `m` is actually the class itslef, you can do for instance:\r\n\r\n    a = m() #instantiate a new instance of the class    \r\n    b = m( arg1, arg2 ) # pass arguments to the constructor\r\n\r\n      ","title":"Does python have an equivalent to Java Class.forName()?","body":"<p>Reflection in python is a lot easier and far more flexible than it is in Java.</p>\n<p>I recommend reading this <a href=\"https://web.archive.org/web/20160304105303/http://www.diveintopython.net/power_of_introspection/index.html\" rel=\"noreferrer\">tutorial</a> (on archive.org)</p>\n<p>There's no direct function (that I know of) which takes a fully qualified class name and returns the class, however you have all the pieces needed to build that, and you can connect them together.</p>\n<p>One bit of advice though: don't try to program in Java style when you're in python.</p>\n<p>If you can explain what is it that you're trying to do, maybe we can help you find a more pythonic way of doing it.</p>\n<p>Here's a function that does what you want:</p>\n<pre><code>def get_class( kls ):\n    parts = kls.split('.')\n    module = &quot;.&quot;.join(parts[:-1])\n    m = __import__( module )\n    for comp in parts[1:]:\n        m = getattr(m, comp)            \n    return m\n</code></pre>\n<p>You can use the return value of this function as if it were the class itself.</p>\n<p>Here's a usage example:</p>\n<pre><code>&gt;&gt;&gt; D = get_class(&quot;datetime.datetime&quot;)\n&gt;&gt;&gt; D\n&lt;type 'datetime.datetime'&gt;\n&gt;&gt;&gt; D.now()\ndatetime.datetime(2009, 1, 17, 2, 15, 58, 883000)\n&gt;&gt;&gt; a = D( 2010, 4, 22 )\n&gt;&gt;&gt; a\ndatetime.datetime(2010, 4, 22, 0, 0)\n&gt;&gt;&gt; \n</code></pre>\n<p><strong>How does that work?</strong></p>\n<p>We're using <code>__import__</code> to import the module that holds the class, which required that we first extract the module name from the fully qualified name. Then we import the module:</p>\n<pre><code>m = __import__( module )\n</code></pre>\n<p>In this case, <code>m</code> will only refer to the top level module,</p>\n<p>For example, if your class lives in <code>foo.baz</code> module, then <code>m</code> will be the module <code>foo</code><br />\nWe can easily obtain a reference to <code>foo.baz</code> using <code>getattr( m, 'baz' )</code></p>\n<p>To get from the top level module to the class, have to recursively use <code>gettatr</code> on the parts of the class name</p>\n<p>Say for example, if you class name is <code>foo.baz.bar.Model</code> then we do this:</p>\n<pre><code>m = __import__( &quot;foo.baz.bar&quot; ) #m is package foo\nm = getattr( m, &quot;baz&quot; ) #m is package baz\nm = getattr( m, &quot;bar&quot; ) #m is module bar\nm = getattr( m, &quot;Model&quot; ) #m is class Model\n</code></pre>\n<p>This is what's happening in this loop:</p>\n<pre><code>for comp in parts[1:]:\n    m = getattr(m, comp)    \n</code></pre>\n<p>At the end of the loop, <code>m</code> will be a reference to the class. This means that <code>m</code> is actually the class itslef, you can do for instance:</p>\n<pre><code>a = m() #instantiate a new instance of the class    \nb = m( arg1, arg2 ) # pass arguments to the constructor\n\n  \n</code></pre>\n"},{"tags":[],"owner":{"display_name":"Roger Pate"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1232206660,"creation_date":1232206660,"answer_id":453459,"question_id":452969,"body_markdown":"It seems you&#39;re approaching this from the middle instead of the beginning. What are you really trying to do? Finding the class associated with a given string is a means to an end.\r\n\r\nIf you clarify your problem, which might require your own mental refactoring, a better solution may present itself.\r\n\r\nFor instance: Are you trying to load a saved object based on its type name and a set of parameters? Python spells this unpickling and you should look at the [pickle module][1]. And even though the unpickling process does exactly what you describe, you don&#39;t have to worry about how it works internally:\r\n\r\n  [1]: http://docs.python.org/library/pickle.html\r\n\r\n    &gt;&gt;&gt; class A(object):\r\n    ...   def __init__(self, v):\r\n    ...     self.v = v\r\n    ...   def __reduce__(self):\r\n    ...     return (self.__class__, (self.v,))\r\n    &gt;&gt;&gt; a = A(&quot;example&quot;)\r\n    &gt;&gt;&gt; import pickle\r\n    &gt;&gt;&gt; b = pickle.loads(pickle.dumps(a))\r\n    &gt;&gt;&gt; a.v, b.v\r\n    (&#39;example&#39;, &#39;example&#39;)\r\n    &gt;&gt;&gt; a is b\r\n    False\r\n","title":"Does python have an equivalent to Java Class.forName()?","body":"<p>It seems you're approaching this from the middle instead of the beginning. What are you really trying to do? Finding the class associated with a given string is a means to an end.</p>\n\n<p>If you clarify your problem, which might require your own mental refactoring, a better solution may present itself.</p>\n\n<p>For instance: Are you trying to load a saved object based on its type name and a set of parameters? Python spells this unpickling and you should look at the <a href=\"http://docs.python.org/library/pickle.html\" rel=\"nofollow noreferrer\">pickle module</a>. And even though the unpickling process does exactly what you describe, you don't have to worry about how it works internally:</p>\n\n<pre><code>&gt;&gt;&gt; class A(object):\n...   def __init__(self, v):\n...     self.v = v\n...   def __reduce__(self):\n...     return (self.__class__, (self.v,))\n&gt;&gt;&gt; a = A(\"example\")\n&gt;&gt;&gt; import pickle\n&gt;&gt;&gt; b = pickle.loads(pickle.dumps(a))\n&gt;&gt;&gt; a.v, b.v\n('example', 'example')\n&gt;&gt;&gt; a is b\nFalse\n</code></pre>\n"},{"tags":[],"owner":{"account_id":193994,"reputation":391,"user_id":436044,"display_name":"grayhemp"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1283265718,"creation_date":1283265718,"answer_id":3610097,"question_id":452969,"body_markdown":"Yet another implementation.\r\n\r\n    def import_class(class_string):\r\n        &quot;&quot;&quot;Returns class object specified by a string.\r\n    \r\n        Args:\r\n            class_string: The string representing a class.\r\n    \r\n        Raises:\r\n            ValueError if module part of the class is not specified.\r\n        &quot;&quot;&quot;\r\n        module_name, _, class_name = class_string.rpartition(&#39;.&#39;)\r\n        if module_name == &#39;&#39;:\r\n            raise ValueError(&#39;Class name must contain module part.&#39;)\r\n        return getattr(\r\n            __import__(module_name, globals(), locals(), [class_name], -1),\r\n            class_name)\r\n\r\n","title":"Does python have an equivalent to Java Class.forName()?","body":"<p>Yet another implementation.</p>\n\n<pre><code>def import_class(class_string):\n    \"\"\"Returns class object specified by a string.\n\n    Args:\n        class_string: The string representing a class.\n\n    Raises:\n        ValueError if module part of the class is not specified.\n    \"\"\"\n    module_name, _, class_name = class_string.rpartition('.')\n    if module_name == '':\n        raise ValueError('Class name must contain module part.')\n    return getattr(\n        __import__(module_name, globals(), locals(), [class_name], -1),\n        class_name)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":49328,"reputation":37718,"user_id":146821,"accept_rate":45,"display_name":"bukzor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1386719695,"creation_date":1386719695,"answer_id":20507847,"question_id":452969,"body_markdown":"This is found in the python standard library, as unittest.TestLoader.loadTestsFromName. Unfortunately the method goes on to do additional test-related activities, but this first ha looks re-usable. I&#39;ve edited it to remove the test-related functionality:\r\n\r\n    def get_object(name):\r\n        &quot;&quot;&quot;Retrieve a python object, given its dotted.name.&quot;&quot;&quot;\r\n        parts = name.split(&#39;.&#39;)\r\n        parts_copy = parts[:]\r\n        while parts_copy:\r\n            try:\r\n                module = __import__(&#39;.&#39;.join(parts_copy))\r\n                break\r\n            except ImportError:\r\n                del parts_copy[-1]\r\n                if not parts_copy: raise\r\n        parts = parts[1:]\r\n    \r\n        obj = module\r\n        for part in parts:\r\n            parent, obj = obj, getattr(obj, part)\r\n        \r\n        return obj","title":"Does python have an equivalent to Java Class.forName()?","body":"<p>This is found in the python standard library, as unittest.TestLoader.loadTestsFromName. Unfortunately the method goes on to do additional test-related activities, but this first ha looks re-usable. I've edited it to remove the test-related functionality:</p>\n\n<pre><code>def get_object(name):\n    \"\"\"Retrieve a python object, given its dotted.name.\"\"\"\n    parts = name.split('.')\n    parts_copy = parts[:]\n    while parts_copy:\n        try:\n            module = __import__('.'.join(parts_copy))\n            break\n        except ImportError:\n            del parts_copy[-1]\n            if not parts_copy: raise\n    parts = parts[1:]\n\n    obj = module\n    for part in parts:\n        parent, obj = obj, getattr(obj, part)\n\n    return obj\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40336,"reputation":16553,"user_id":116891,"accept_rate":62,"display_name":"Pat"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1430787638,"creation_date":1430787638,"answer_id":30042585,"question_id":452969,"body_markdown":"    def import_class_from_string(path):\r\n        from importlib import import_module\r\n        module_path, _, class_name = path.rpartition(&#39;.&#39;)\r\n        mod = import_module(module_path)\r\n        klass = getattr(mod, class_name)\r\n        return klass\r\n\r\n## Usage\r\n    In [59]: raise import_class_from_string(&#39;google.appengine.runtime.apiproxy_errors.DeadlineExceededError&#39;)()\r\n    ---------------------------------------------------------------------------\r\n    DeadlineExceededError                     Traceback (most recent call last)\r\n    &lt;ipython-input-59-b4e59d809b2f&gt; in &lt;module&gt;()\r\n    ----&gt; 1 raise import_class_from_string(&#39;google.appengine.runtime.apiproxy_errors.DeadlineExceededError&#39;)()\r\n    \r\n    DeadlineExceededError: \r\n\r\n","title":"Does python have an equivalent to Java Class.forName()?","body":"<pre><code>def import_class_from_string(path):\n    from importlib import import_module\n    module_path, _, class_name = path.rpartition('.')\n    mod = import_module(module_path)\n    klass = getattr(mod, class_name)\n    return klass\n</code></pre>\n\n<h2>Usage</h2>\n\n<pre><code>In [59]: raise import_class_from_string('google.appengine.runtime.apiproxy_errors.DeadlineExceededError')()\n---------------------------------------------------------------------------\nDeadlineExceededError                     Traceback (most recent call last)\n&lt;ipython-input-59-b4e59d809b2f&gt; in &lt;module&gt;()\n----&gt; 1 raise import_class_from_string('google.appengine.runtime.apiproxy_errors.DeadlineExceededError')()\n\nDeadlineExceededError: \n</code></pre>\n"},{"tags":[],"owner":{"account_id":13671466,"reputation":1,"user_id":12005356,"display_name":"Sushant Chaudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571395059,"creation_date":1571395059,"answer_id":58449145,"question_id":452969,"body_markdown":"I needed to get objects for all existing classes in `my_package`. So I import all necessary classes into `my_package`&#39;s `__init__.py`.\r\n\r\nSo my directory structure is like this:\r\n```\r\n/my_package\r\n    - __init__.py\r\n    - module1.py\r\n    - module2.py\r\n    - module3.py\r\n```\r\n\r\nAnd my `__init__.py` looks like this:\r\n```\r\nfrom .module1 import ClassA\r\nfrom .module2 import ClassB\r\n```\r\n\r\nThen I create a function like this:\r\n```\r\ndef get_classes_from_module_name(module_name):\r\n    return [_cls() for _, _cls in inspect.getmembers(__import__(module_name), inspect.isclass)]\r\n```\r\n\r\nWhere `module_name = &#39;my_package&#39;`\r\n\r\ninspect doc: https://docs.python.org/3/library/inspect.html#inspect.getmembers","title":"Does python have an equivalent to Java Class.forName()?","body":"<p>I needed to get objects for all existing classes in <code>my_package</code>. So I import all necessary classes into <code>my_package</code>'s <code>__init__.py</code>.</p>\n\n<p>So my directory structure is like this:</p>\n\n<pre><code>/my_package\n    - __init__.py\n    - module1.py\n    - module2.py\n    - module3.py\n</code></pre>\n\n<p>And my <code>__init__.py</code> looks like this:</p>\n\n<pre><code>from .module1 import ClassA\nfrom .module2 import ClassB\n</code></pre>\n\n<p>Then I create a function like this:</p>\n\n<pre><code>def get_classes_from_module_name(module_name):\n    return [_cls() for _, _cls in inspect.getmembers(__import__(module_name), inspect.isclass)]\n</code></pre>\n\n<p>Where <code>module_name = 'my_package'</code></p>\n\n<p>inspect doc: <a href=\"https://docs.python.org/3/library/inspect.html#inspect.getmembers\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/inspect.html#inspect.getmembers</a></p>\n"}],"owner":{"account_id":5612,"reputation":1428,"user_id":9133,"display_name":"Jason"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64050,"favorite_count":0,"down_vote_count":0,"up_vote_count":111,"accepted_answer_id":452981,"answer_count":7,"score":111,"last_activity_date":1663614177,"creation_date":1232179848,"question_id":452969,"body_markdown":"I have the need to take a string argument and create an object of the class named in that string in Python.  In Java, I would use `Class.forName().newInstance()`.  Is there an equivalent in Python?\r\n\r\n\r\n----------\r\nThanks for the responses.  To answer those who want to know what I&#39;m doing: I want to use a command line argument as the class name, and instantiate it.  I&#39;m actually programming in Jython and instantiating Java classes, hence the Java-ness of the question.  `getattr()` works great.  Thanks much.","title":"Does python have an equivalent to Java Class.forName()?","body":"<p>I have the need to take a string argument and create an object of the class named in that string in Python.  In Java, I would use <code>Class.forName().newInstance()</code>.  Is there an equivalent in Python?</p>\n\n<hr>\n\n<p>Thanks for the responses.  To answer those who want to know what I'm doing: I want to use a command line argument as the class name, and instantiate it.  I'm actually programming in Jython and instantiating Java classes, hence the Java-ness of the question.  <code>getattr()</code> works great.  Thanks much.</p>\n"},{"tags":["java","json","spring-boot","jackson"],"comments":[{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":1,"creation_date":1663575320,"post_id":73752793,"comment_id":130263556,"body_markdown":"Jackson ObjectMapper is stateless, so it&#39;s thread-safe and can be declared as class member or static class member","body":"Jackson ObjectMapper is stateless, so it&#39;s thread-safe and can be declared as class member or static class member"},{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1663576521,"post_id":73752793,"comment_id":130263918,"body_markdown":"hi @NikolaiShevchenko feel free to write as answer, and I can send points, thanks","body":"hi @NikolaiShevchenko feel free to write as answer, and I can send points, thanks"},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1663614133,"post_id":73752793,"comment_id":130276952,"body_markdown":"An `ObjectMapper` is not stateless.","body":"An <code>ObjectMapper</code> is not stateless."}],"answers":[{"tags":[],"owner":{"account_id":7768515,"reputation":1636,"user_id":7972621,"display_name":"Ankit Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663398049,"creation_date":1663398049,"answer_id":73752837,"question_id":73752793,"body_markdown":"Yes, probably you should declare it is a class level field. \r\nIt&#39;s never recommended to create redundant objects.","title":"Jackson&#39;s ObjectMapper with RowMapper in SQL","body":"<p>Yes, probably you should declare it is a class level field.\nIt's never recommended to create redundant objects.</p>\n"},{"tags":[],"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1663613977,"creation_date":1663613977,"answer_id":73778137,"question_id":73752793,"body_markdown":"An [`ObjectMapper`](https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html) instance is not immutable but, as stated in the documentation:\r\n\r\n&gt; Mapper instances are fully thread-safe provided that ALL configuration of the instance occurs before ANY\r\n&gt; read or write calls.\r\n\r\nWhich means that this code is perfectly thread-safe:\r\n\r\n```\r\npublic class ProductMapper implements RowMapper&lt;Product&gt; {\r\n\tprivate ObjectMapper mapper;\r\n\r\n\tpublic ProductMapper()\r\n\t{\r\n\t\tobjectMapper = new ObjectMapper();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Product mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n\t\tProduct product = new Product();\r\n\t\tproduct.setLocations(objectMapper.readValue(rs.getString(&quot;Locations&quot;), new TypeReference&lt;List&lt;ServiceLocation&gt;&gt;(){}));\r\n\t\treturn product;\r\n\t}\r\n}\r\n```\r\n\r\nHowever, the `TypeReference` object is still created for each row, which is not very efficient. A better way is to create\r\nan [`ObjectReader`](https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectReader.html)\r\ninstance via the [`readerFor()`](https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#readerFor(com.fasterxml.jackson.core.type.TypeReference)) method:\r\n\r\n```\r\npublic class ProductMapper implements RowMapper&lt;Product&gt; {\r\n\tprivate ObjectReader objectReader;\r\n\r\n\tpublic ProductMapper()\r\n\t{\r\n\t\tObjectMapper objectMapper = new ObjectMapper();\r\n\t\tobjectReader = objectMapper.readerFor(new TypeReference&lt;List&lt;ServiceLocation&gt;&gt;(){});\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Product mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n\t\tProduct product = new Product();\r\n\t\tproduct.setLocations(objectReader.readValue(rs.getString(&quot;Locations&quot;)));\r\n\t\treturn product;\r\n\t}\r\n}\r\n```\r\n\r\nAn `ObjectReader` instance is immutable and thread-safe.","title":"Jackson&#39;s ObjectMapper with RowMapper in SQL","body":"<p>An <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html\" rel=\"nofollow noreferrer\"><code>ObjectMapper</code></a> instance is not immutable but, as stated in the documentation:</p>\n<blockquote>\n<p>Mapper instances are fully thread-safe provided that ALL configuration of the instance occurs before ANY\nread or write calls.</p>\n</blockquote>\n<p>Which means that this code is perfectly thread-safe:</p>\n<pre><code>public class ProductMapper implements RowMapper&lt;Product&gt; {\n    private ObjectMapper mapper;\n\n    public ProductMapper()\n    {\n        objectMapper = new ObjectMapper();\n    }\n\n    @Override\n    public Product mapRow(ResultSet rs, int rowNum) throws SQLException {\n        Product product = new Product();\n        product.setLocations(objectMapper.readValue(rs.getString(&quot;Locations&quot;), new TypeReference&lt;List&lt;ServiceLocation&gt;&gt;(){}));\n        return product;\n    }\n}\n</code></pre>\n<p>However, the <code>TypeReference</code> object is still created for each row, which is not very efficient. A better way is to create\nan <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectReader.html\" rel=\"nofollow noreferrer\"><code>ObjectReader</code></a>\ninstance via the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#readerFor(com.fasterxml.jackson.core.type.TypeReference)\" rel=\"nofollow noreferrer\"><code>readerFor()</code></a> method:</p>\n<pre><code>public class ProductMapper implements RowMapper&lt;Product&gt; {\n    private ObjectReader objectReader;\n\n    public ProductMapper()\n    {\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectReader = objectMapper.readerFor(new TypeReference&lt;List&lt;ServiceLocation&gt;&gt;(){});\n    }\n\n    @Override\n    public Product mapRow(ResultSet rs, int rowNum) throws SQLException {\n        Product product = new Product();\n        product.setLocations(objectReader.readValue(rs.getString(&quot;Locations&quot;)));\n        return product;\n    }\n}\n</code></pre>\n<p>An <code>ObjectReader</code> instance is immutable and thread-safe.</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":648,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73778137,"answer_count":2,"score":4,"last_activity_date":1663613977,"creation_date":1663397578,"question_id":73752793,"body_markdown":"We are using ObjectMapper. When using ObjectMapper with RowMapper, should it be declared inside each mapRow (seen below), or outside of mapRow as a class public member? I assume it should be outside as a public class member per this article. https://stackoverflow.com/questions/3907929/should-i-declare-jacksons-objectmapper-as-a-static-field\r\n\r\nCurrently using Spring boot with SQL Server database. Researching thread safety with thousands/millions of sql rows its getting.\r\n\r\n\r\n    List&lt;Product&gt; productList =  namedParameterJdbcTemplate.query(sqlQuery,\r\n            parameters,\r\n            new ProductMapper(productRequest));\r\n\r\n\r\n    public class ProductMapper implements RowMapper&lt;Product&gt; {\r\n        \r\n        @Override\r\n        public Product mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n    \r\n            ObjectMapper objectMapper = new ObjectMapper()\r\n    \r\n            Product product = new Product();\r\n    \r\n            product.setProductId(rs.getLong(&quot;ProductId&quot;));\r\n            product.setProductType(rs.getString(&quot;ProductType&quot;));\r\n            product.setLocations(objectMapper.readValue(rs.getString(&quot;Locations&quot;), new TypeReference&lt;List&lt;ServiceLocation&gt;&gt;(){}));\r\n                } catch (Exception e) {\r\n                    throw new ServiceException(e);\r\n                }\r\n            }\r\n\r\n\r\nNote: Please don&#39;t ask why we are writing this manual mapper with ObjectMapper, we are doing legacy coding, and architects requested to do this.","title":"Jackson&#39;s ObjectMapper with RowMapper in SQL","body":"<p>We are using ObjectMapper. When using ObjectMapper with RowMapper, should it be declared inside each mapRow (seen below), or outside of mapRow as a class public member? I assume it should be outside as a public class member per this article. <a href=\"https://stackoverflow.com/questions/3907929/should-i-declare-jacksons-objectmapper-as-a-static-field\">Should I declare Jackson&#39;s ObjectMapper as a static field?</a></p>\n<p>Currently using Spring boot with SQL Server database. Researching thread safety with thousands/millions of sql rows its getting.</p>\n<pre><code>List&lt;Product&gt; productList =  namedParameterJdbcTemplate.query(sqlQuery,\n        parameters,\n        new ProductMapper(productRequest));\n\n\npublic class ProductMapper implements RowMapper&lt;Product&gt; {\n    \n    @Override\n    public Product mapRow(ResultSet rs, int rowNum) throws SQLException {\n\n        ObjectMapper objectMapper = new ObjectMapper()\n\n        Product product = new Product();\n\n        product.setProductId(rs.getLong(&quot;ProductId&quot;));\n        product.setProductType(rs.getString(&quot;ProductType&quot;));\n        product.setLocations(objectMapper.readValue(rs.getString(&quot;Locations&quot;), new TypeReference&lt;List&lt;ServiceLocation&gt;&gt;(){}));\n            } catch (Exception e) {\n                throw new ServiceException(e);\n            }\n        }\n</code></pre>\n<p>Note: Please don't ask why we are writing this manual mapper with ObjectMapper, we are doing legacy coding, and architects requested to do this.</p>\n"},{"tags":["java","android","android-fragments"],"comments":[{"owner":{"account_id":2344485,"reputation":2741,"user_id":3518278,"accept_rate":92,"display_name":"usr30911"},"score":0,"creation_date":1538142645,"post_id":52556850,"comment_id":92052202,"body_markdown":"Can you share the crash logs?","body":"Can you share the crash logs?"},{"owner":{"account_id":7616268,"reputation":897,"user_id":5775589,"display_name":"Koustuv Ganguly"},"score":0,"creation_date":1538142663,"post_id":52556850,"comment_id":92052217,"body_markdown":"Logcat error please.","body":"Logcat error please."},{"owner":{"account_id":14208469,"reputation":215,"user_id":10264383,"display_name":"abdelhamied mostafa"},"score":0,"creation_date":1538142866,"post_id":52556850,"comment_id":92052343,"body_markdown":"that&#39;s the problem the log has no errors, but sometimes i get this error .i added it,","body":"that&#39;s the problem the log has no errors, but sometimes i get this error .i added it,"},{"owner":{"account_id":14218047,"reputation":11740,"user_id":10271334,"display_name":"Jeel Vankhede"},"score":0,"creation_date":1538143020,"post_id":52556850,"comment_id":92052431,"body_markdown":"add `android:id=&quot;&quot;` to your `FrameLayout` in fragment xml and also for main xml `fragment` tag.","body":"add <code>android:id=&quot;&quot;</code> to your <code>FrameLayout</code> in fragment xml and also for main xml <code>fragment</code> tag."},{"owner":{"account_id":7616268,"reputation":897,"user_id":5775589,"display_name":"Koustuv Ganguly"},"score":0,"creation_date":1538143107,"post_id":52556850,"comment_id":92052486,"body_markdown":"Change the code as like my answer. It will fix your problem","body":"Change the code as like my answer. It will fix your problem"}],"answers":[{"tags":[],"owner":{"account_id":7616268,"reputation":897,"user_id":5775589,"display_name":"Koustuv Ganguly"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538143074,"creation_date":1538143074,"answer_id":52556976,"question_id":52556850,"body_markdown":"Change your code to this:\r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.group.peixa.test.MainActivity&quot;&gt;\r\n    \r\n    \r\n        &lt;fragment\r\n            android:id=&quot;@+id/frag_blank&quot;\r\n            android:name=&quot;com.group.peixa.test.BlankFragment&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    \r\n    \r\n    &lt;/android.support.constraint.ConstraintLayout&gt;","title":"adding fragment to xml crashes my app - how to fix that?","body":"<p>Change your code to this:</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.group.peixa.test.MainActivity\"&gt;\n\n\n    &lt;fragment\n        android:id=\"@+id/frag_blank\"\n        android:name=\"com.group.peixa.test.BlankFragment\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" /&gt;\n\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2344485,"reputation":2741,"user_id":3518278,"accept_rate":92,"display_name":"usr30911"},"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1538143161,"creation_date":1538143161,"answer_id":52557001,"question_id":52556850,"body_markdown":"Your xml will look something like below, just add\r\n\r\n    android:id=&quot;@+id/frag1&quot;\r\n\r\nto your &lt; fragment &gt; tag.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.constraint.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.group.peixa.test.MainActivity&quot;&gt;\r\n    \r\n        &lt;fragment\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:id=&quot;@+id/frag1&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:name=&quot;com.group.peixa.test.BlankFragment&quot;\r\n        /&gt;\r\n    &lt;/android.support.constraint.ConstraintLayout&gt;\r\n\r\n\r\nCheck out the official documentation \r\nhttps://developer.android.com/guide/components/fragments.html\r\n\r\n&gt; Note: Each fragment requires a unique identifier that the system can\r\n&gt; use to restore the fragment if the activity is restarted (and which\r\n&gt; you can use to capture the fragment to perform transactions, such as\r\n&gt; remove it). There are three ways to provide an ID for a fragment:\r\n&gt; \r\n&gt; Supply the android:id attribute with a unique ID. Supply the\r\n&gt; android:tag attribute with a unique string. If you provide neither of\r\n&gt; the previous two, the system uses the ID of the container view.\r\n\r\n","title":"adding fragment to xml crashes my app - how to fix that?","body":"<p>Your xml will look something like below, just add</p>\n\n<pre><code>android:id=\"@+id/frag1\"\n</code></pre>\n\n<p>to your &lt; fragment > tag.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.group.peixa.test.MainActivity\"&gt;\n\n    &lt;fragment\n        android:layout_width=\"match_parent\"\n        android:id=\"@+id/frag1\"\n        android:layout_height=\"wrap_content\"\n        android:name=\"com.group.peixa.test.BlankFragment\"\n    /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>Check out the official documentation \n<a href=\"https://developer.android.com/guide/components/fragments.html\" rel=\"noreferrer\">https://developer.android.com/guide/components/fragments.html</a></p>\n\n<blockquote>\n  <p>Note: Each fragment requires a unique identifier that the system can\n  use to restore the fragment if the activity is restarted (and which\n  you can use to capture the fragment to perform transactions, such as\n  remove it). There are three ways to provide an ID for a fragment:</p>\n  \n  <p>Supply the android:id attribute with a unique ID. Supply the\n  android:tag attribute with a unique string. If you provide neither of\n  the previous two, the system uses the ID of the container view.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2360496,"reputation":7506,"user_id":2067264,"accept_rate":67,"display_name":"Drunken Daddy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663613850,"creation_date":1663613850,"answer_id":73778111,"question_id":52556850,"body_markdown":"android 30+\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.group.peixa.test.MainActivity&quot;&gt;\r\n    \r\n    \r\n        &lt;androidx.fragment.app.FragmentContainerView\r\n            android:id=&quot;@+id/frag_blank&quot;\r\n            android:name=&quot;com.group.peixa.test.BlankFragment&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    \r\n    \r\n    &lt;/android.support.constraint.ConstraintLayout&gt;\r\n\r\n","title":"adding fragment to xml crashes my app - how to fix that?","body":"<p>android 30+</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;com.group.peixa.test.MainActivity&quot;&gt;\n\n\n    &lt;androidx.fragment.app.FragmentContainerView\n        android:id=&quot;@+id/frag_blank&quot;\n        android:name=&quot;com.group.peixa.test.BlankFragment&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot; /&gt;\n\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n"}],"owner":{"account_id":14208469,"reputation":215,"user_id":10264383,"display_name":"abdelhamied mostafa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6465,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":52557001,"answer_count":3,"score":3,"last_activity_date":1663613850,"creation_date":1538142610,"question_id":52556850,"body_markdown":"it&#39;s my first time dealing with fragments in android.&lt;br&gt;\r\nand for some reason my app crashes when i try to add fragment tag to my main activity.\r\ni know there is a lot of questions similar to mine but i can&#39;t find any of them useful for this situation.\r\n\r\n\r\nactivity_main.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.constraint.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.group.peixa.test.MainActivity&quot;&gt;\r\n\r\n\r\n        &lt;fragment\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:name=&quot;com.group.peixa.test.BlankFragment&quot;\r\n        /&gt;\r\n\r\n\r\n    &lt;/android.support.constraint.ConstraintLayout&gt;\r\n\r\n\r\nfragment_blank.xml\r\n\r\n    &lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;com.group.peixa.test.BlankFragment&quot;&gt;\r\n\r\n        &lt;!-- TODO: Update blank fragment layout --&gt;\r\n        &lt;TextView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:text=&quot;@string/hello_blank_fragment&quot; /&gt;\r\n\r\n    &lt;/FrameLayout&gt;\r\n\r\n\r\nBlankFragment.java&lt;br&gt;\r\n\r\n    import android.os.Bundle;\r\n    import android.support.v4.app.Fragment;\r\n    import android.support.v7.app.AppCompatDialogFragment;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n\r\n\r\n    /**\r\n     * A simple {@link Fragment} subclass.\r\n     */\r\n    public class BlankFragment extends AppCompatDialogFragment {\r\n\r\n\r\n        public BlankFragment() {\r\n            // Required empty public constructor\r\n        }\r\n\r\n\r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                                 Bundle savedInstanceState) {\r\n            // Inflate the layout for this fragment\r\n            return inflater.inflate(R.layout.fragment_blank, container, false);\r\n        }\r\n\r\n    }\r\n\r\n\r\nMainActivity.java\r\n\r\n    import android.support.v4.app.FragmentActivity;\r\n    import android.os.Bundle;\r\n\r\n    public class MainActivity extends FragmentActivity {\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n        }\r\n     }\r\n\r\ncrash log\r\n\r\n    09-28 09:28:18.288 3931-3931/? E/AndroidRuntime: FATAL EXCEPTION: main\r\n                                                 Process: com.group.peixa.test, PID: 3931\r\n                                                 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.group.peixa.test/com.group.peixa.test.MainActivity}: android.view.InflateException: Binary XML file line #0: Binary XML file line #0: Error inflating class fragment\r\n                                                     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2416)\r\n                                                     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2476)\r\n                                                     at android.app.ActivityThread.-wrap11(ActivityThread.java)\r\n                                                     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1344)\r\n                                                     at android.os.Handler.dispatchMessage(Handler.java:102)\r\n                                                     at android.os.Looper.loop(Looper.java:148)\r\n                                                     at android.app.ActivityThread.main(ActivityThread.java:5417)\r\n                                                     at java.lang.reflect.Method.invoke(Native Method)\r\n                                                     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\r\n                                                     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\r\n                                                  Caused by: android.view.InflateException: Binary XML file line #0: Binary XML file line #0: Error inflating class fragment\r\n                                                     at android.view.LayoutInflater.inflate(LayoutInflater.java:539)\r\n                                                     at android.view.LayoutInflater.inflate(LayoutInflater.java:423)\r\n                                                     at android.view.LayoutInflater.inflate(LayoutInflater.java:374)\r\n                                                     at com.android.internal.policy.PhoneWindow.setContentView(PhoneWindow.java:393)\r\n                                                     at android.app.Activity.setContentView(Activity.java:2166)\r\n                                                     at com.group.peixa.test.MainActivity.onCreate(MainActivity.java:11)\r\n                                                     at android.app.Activity.performCreate(Activity.java:6237)\r\n                                                     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1107)\r\n                                                     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2369)\r\n                                                     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2476)&#160;\r\n                                                     at android.app.ActivityThread.-wrap11(ActivityThread.java)&#160;\r\n                                                     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1344)&#160;\r\n                                                     at android.os.Handler.dispatchMessage(Handler.java:102)&#160;\r\n                                                     at android.os.Looper.loop(Looper.java:148)&#160;\r\n                                                     at android.app.ActivityThread.main(ActivityThread.java:5417)&#160;\r\n                                                     at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n                                                     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)&#160;\r\n                                                     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)&#160;\r\n                                                  Caused by: android.view.InflateException: Binary XML file line #0: Error inflating class fragment\r\n                                                     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:782)\r\n                                                     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)\r\n                                                     at android.view.LayoutInflater.rInflate(LayoutInflater.java:835)\r\n                                                     at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:798)\r\n                                                     at android.view.LayoutInflater.inflate(LayoutInflater.java:515)\r\n                                                     at android.view.LayoutInflater.inflate(LayoutInflater.java:423)&#160;\r\n                                                     at android.view.LayoutInflater.inflate(LayoutInflater.java:374)&#160;\r\n                                                     at com.android.internal.policy.PhoneWindow.setContentView(PhoneWindow.java:393)&#160;\r\n                                                     at android.app.Activity.setContentView(Activity.java:2166)&#160;\r\n                                                     at com.group.peixa.test.MainActivity.onCreate(MainActivity.java:11)&#160;\r\n                                                     at android.app.Activity.performCreate(Activity.java:6237)&#160;\r\n                                                     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1107)&#160;\r\n                                                     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2369)&#160;\r\n                                                     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2476)&#160;\r\n                                                     at android.app.ActivityThread.-wrap11(ActivityThread.java)&#160;\r\n                                                     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1344)&#160;\r\n                                                     at android.os.Handler.dispatchMessage(Handler.java:102)&#160;\r\n                                                     at android.os.Looper.loop(Looper.java:148)&#160;\r\n                                                     at android.app.ActivityThread.main(ActivityThread.java:5417)&#160;\r\n                                                     at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n                                                     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)&#160;\r\n                                                     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)&#160;\r\n                                                  Caused by: java.lang.IllegalArgumentException: Binary XML file line #0: Must specify unique android:id, android:tag, or have a parent with an id for com.group.peixa.test.BlankFragment\r\n                                                     at android.support.v4.app.FragmentManagerImpl.onCreateView(FragmentManager.java:3645)\r\n                                                     at android.support.v4.app.FragmentController.onCreateView(FragmentController.java:111)\r\n                                                     at android.support.v4.app.FragmentActivity.dispatchFragmentsOnCreateView(FragmentActivity.java:338)\r\n                                                     at android.support.v4.app.BaseFragmentActivityApi14.onCreateView(BaseFragmentActivityApi14.java:39)\r\n                                                     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:67)\r\n                                                     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:754)\r\n                                                     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)&#160;\r\n                                                     at android.view.LayoutInflater.rInflate(LayoutInflater.java:835)&#160;\r\n                                                     at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:798)&#160;\r\n                                                     at android.view.LayoutInflater.inflate(LayoutInflater.java:515)&#160;\r\n                                                     at android.view.LayoutInflater.inflate(LayoutInflater.java:423)&#160;\r\n                                                     at android.view.LayoutInflater.inflate(LayoutInflater.java:374)&#160;\r\n                                                     at com.android.internal.policy.PhoneWindow.setContentView(PhoneWindow.java:393)&#160;\r\n                                                     at android.app.Activity.setContentView(Activity.java:2166)&#160;\r\n                                                     at com.group.peixa.test.MainActivity.onCreate(MainActivity.java:11)&#160;\r\n                                                     at android.app.Activity.performCreate(Activity.java:6237)&#160;\r\n                                                     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1107)&#160;\r\n                                                     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2369)&#160;\r\n                                                     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2476)&#160;\r\n                                                     at android.app.ActivityThread.-wrap11(ActivityThread.java)&#160;\r\n                                                     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1344)&#160;\r\n                                                     at android.os.Handler.dispatchMessage(Handler.java:102)&#160;\r\n                                                     at android.os.Looper.loop(Looper.java:148)&#160;\r\n                                                     at android.app.ActivityThread.main(ActivityThread.java:5417)&#160;\r\n                                                     at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n                                                     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)&#160;\r\n                                                     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)&#160;\r\n\r\n\r\n\r\n","title":"adding fragment to xml crashes my app - how to fix that?","body":"<p>it's my first time dealing with fragments in android.<br>\nand for some reason my app crashes when i try to add fragment tag to my main activity.\ni know there is a lot of questions similar to mine but i can't find any of them useful for this situation.</p>\n\n<p>activity_main.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.group.peixa.test.MainActivity\"&gt;\n\n\n    &lt;fragment\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:name=\"com.group.peixa.test.BlankFragment\"\n    /&gt;\n\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>fragment_blank.xml</p>\n\n<pre><code>&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\"com.group.peixa.test.BlankFragment\"&gt;\n\n    &lt;!-- TODO: Update blank fragment layout --&gt;\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:text=\"@string/hello_blank_fragment\" /&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n\n<p>BlankFragment.java<br></p>\n\n<pre><code>import android.os.Bundle;\nimport android.support.v4.app.Fragment;\nimport android.support.v7.app.AppCompatDialogFragment;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\n\n\n/**\n * A simple {@link Fragment} subclass.\n */\npublic class BlankFragment extends AppCompatDialogFragment {\n\n\n    public BlankFragment() {\n        // Required empty public constructor\n    }\n\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        return inflater.inflate(R.layout.fragment_blank, container, false);\n    }\n\n}\n</code></pre>\n\n<p>MainActivity.java</p>\n\n<pre><code>import android.support.v4.app.FragmentActivity;\nimport android.os.Bundle;\n\npublic class MainActivity extends FragmentActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n }\n</code></pre>\n\n<p>crash log</p>\n\n<pre><code>09-28 09:28:18.288 3931-3931/? E/AndroidRuntime: FATAL EXCEPTION: main\n                                             Process: com.group.peixa.test, PID: 3931\n                                             java.lang.RuntimeException: Unable to start activity ComponentInfo{com.group.peixa.test/com.group.peixa.test.MainActivity}: android.view.InflateException: Binary XML file line #0: Binary XML file line #0: Error inflating class fragment\n                                                 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2416)\n                                                 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2476)\n                                                 at android.app.ActivityThread.-wrap11(ActivityThread.java)\n                                                 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1344)\n                                                 at android.os.Handler.dispatchMessage(Handler.java:102)\n                                                 at android.os.Looper.loop(Looper.java:148)\n                                                 at android.app.ActivityThread.main(ActivityThread.java:5417)\n                                                 at java.lang.reflect.Method.invoke(Native Method)\n                                                 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n                                                 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n                                              Caused by: android.view.InflateException: Binary XML file line #0: Binary XML file line #0: Error inflating class fragment\n                                                 at android.view.LayoutInflater.inflate(LayoutInflater.java:539)\n                                                 at android.view.LayoutInflater.inflate(LayoutInflater.java:423)\n                                                 at android.view.LayoutInflater.inflate(LayoutInflater.java:374)\n                                                 at com.android.internal.policy.PhoneWindow.setContentView(PhoneWindow.java:393)\n                                                 at android.app.Activity.setContentView(Activity.java:2166)\n                                                 at com.group.peixa.test.MainActivity.onCreate(MainActivity.java:11)\n                                                 at android.app.Activity.performCreate(Activity.java:6237)\n                                                 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1107)\n                                                 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2369)\n                                                 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2476) \n                                                 at android.app.ActivityThread.-wrap11(ActivityThread.java) \n                                                 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1344) \n                                                 at android.os.Handler.dispatchMessage(Handler.java:102) \n                                                 at android.os.Looper.loop(Looper.java:148) \n                                                 at android.app.ActivityThread.main(ActivityThread.java:5417) \n                                                 at java.lang.reflect.Method.invoke(Native Method) \n                                                 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726) \n                                                 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) \n                                              Caused by: android.view.InflateException: Binary XML file line #0: Error inflating class fragment\n                                                 at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:782)\n                                                 at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)\n                                                 at android.view.LayoutInflater.rInflate(LayoutInflater.java:835)\n                                                 at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:798)\n                                                 at android.view.LayoutInflater.inflate(LayoutInflater.java:515)\n                                                 at android.view.LayoutInflater.inflate(LayoutInflater.java:423) \n                                                 at android.view.LayoutInflater.inflate(LayoutInflater.java:374) \n                                                 at com.android.internal.policy.PhoneWindow.setContentView(PhoneWindow.java:393) \n                                                 at android.app.Activity.setContentView(Activity.java:2166) \n                                                 at com.group.peixa.test.MainActivity.onCreate(MainActivity.java:11) \n                                                 at android.app.Activity.performCreate(Activity.java:6237) \n                                                 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1107) \n                                                 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2369) \n                                                 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2476) \n                                                 at android.app.ActivityThread.-wrap11(ActivityThread.java) \n                                                 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1344) \n                                                 at android.os.Handler.dispatchMessage(Handler.java:102) \n                                                 at android.os.Looper.loop(Looper.java:148) \n                                                 at android.app.ActivityThread.main(ActivityThread.java:5417) \n                                                 at java.lang.reflect.Method.invoke(Native Method) \n                                                 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726) \n                                                 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) \n                                              Caused by: java.lang.IllegalArgumentException: Binary XML file line #0: Must specify unique android:id, android:tag, or have a parent with an id for com.group.peixa.test.BlankFragment\n                                                 at android.support.v4.app.FragmentManagerImpl.onCreateView(FragmentManager.java:3645)\n                                                 at android.support.v4.app.FragmentController.onCreateView(FragmentController.java:111)\n                                                 at android.support.v4.app.FragmentActivity.dispatchFragmentsOnCreateView(FragmentActivity.java:338)\n                                                 at android.support.v4.app.BaseFragmentActivityApi14.onCreateView(BaseFragmentActivityApi14.java:39)\n                                                 at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:67)\n                                                 at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:754)\n                                                 at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704) \n                                                 at android.view.LayoutInflater.rInflate(LayoutInflater.java:835) \n                                                 at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:798) \n                                                 at android.view.LayoutInflater.inflate(LayoutInflater.java:515) \n                                                 at android.view.LayoutInflater.inflate(LayoutInflater.java:423) \n                                                 at android.view.LayoutInflater.inflate(LayoutInflater.java:374) \n                                                 at com.android.internal.policy.PhoneWindow.setContentView(PhoneWindow.java:393) \n                                                 at android.app.Activity.setContentView(Activity.java:2166) \n                                                 at com.group.peixa.test.MainActivity.onCreate(MainActivity.java:11) \n                                                 at android.app.Activity.performCreate(Activity.java:6237) \n                                                 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1107) \n                                                 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2369) \n                                                 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2476) \n                                                 at android.app.ActivityThread.-wrap11(ActivityThread.java) \n                                                 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1344) \n                                                 at android.os.Handler.dispatchMessage(Handler.java:102) \n                                                 at android.os.Looper.loop(Looper.java:148) \n                                                 at android.app.ActivityThread.main(ActivityThread.java:5417) \n                                                 at java.lang.reflect.Method.invoke(Native Method) \n                                                 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726) \n                                                 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) \n</code></pre>\n"},{"tags":["java","sonarqube"],"answers":[{"tags":[],"owner":{"account_id":3148809,"reputation":22476,"user_id":2662707,"display_name":"G. Ann - SonarSource Team"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663613740,"creation_date":1539244994,"answer_id":52755120,"question_id":52754120,"body_markdown":"Those exclusions apply to the metrics, but not to the rules. Try a [multi-criteria Issue Exclusion][1] instead.\r\n\r\n\r\n  [1]: https://docs.sonarqube.org/latest/project-administration/narrowing-the-focus/#header-10","title":"Sonarqube cpd exclusion not honored","body":"<p>Those exclusions apply to the metrics, but not to the rules. Try a <a href=\"https://docs.sonarqube.org/latest/project-administration/narrowing-the-focus/#header-10\" rel=\"nofollow noreferrer\">multi-criteria Issue Exclusion</a> instead.</p>\n"}],"owner":{"account_id":5084245,"reputation":1010,"user_id":4079473,"display_name":"anstue"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6562,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663613740,"creation_date":1539241225,"question_id":52754120,"body_markdown":"I want to exclude all files which end in DTO.java from sonarqube code duplication checks. I did this with:\r\n\r\n\r\n    sonar.cpd.exclusions=**/*DTO.java\r\n\r\nAlso when I look into the background tasks and the scanner context, I can see that the parameter is correctly set:\r\n\r\n      - sonar.cpd.exclusions=**/*DTO.java\r\n\r\nAlthough all this settings I get a &quot;1 duplicated blocks of code must be removed.&quot;(common-java:DuplicatedBlocks) in my ImportantDTO.java\r\n\r\nI also excluded these files from coverage, with the same expression and this works fine:\r\n\r\n    sonar.coverage.exclusions=**/*DTO.java,...\r\n\r\nSonarqube-Version: Version 6.7.5 (build 38563)\r\nSonar-Scanner: Gradle Plugin org.sonarqube 2.6.2\r\n\r\nAny advice?","title":"Sonarqube cpd exclusion not honored","body":"<p>I want to exclude all files which end in DTO.java from sonarqube code duplication checks. I did this with:</p>\n\n<pre><code>sonar.cpd.exclusions=**/*DTO.java\n</code></pre>\n\n<p>Also when I look into the background tasks and the scanner context, I can see that the parameter is correctly set:</p>\n\n<pre><code>  - sonar.cpd.exclusions=**/*DTO.java\n</code></pre>\n\n<p>Although all this settings I get a \"1 duplicated blocks of code must be removed.\"(common-java:DuplicatedBlocks) in my ImportantDTO.java</p>\n\n<p>I also excluded these files from coverage, with the same expression and this works fine:</p>\n\n<pre><code>sonar.coverage.exclusions=**/*DTO.java,...\n</code></pre>\n\n<p>Sonarqube-Version: Version 6.7.5 (build 38563)\nSonar-Scanner: Gradle Plugin org.sonarqube 2.6.2</p>\n\n<p>Any advice?</p>\n"},{"tags":["java","http-proxy","java-11","java-http-client"],"comments":[{"owner":{"account_id":3204393,"reputation":778,"user_id":2705702,"display_name":"Keijack"},"score":0,"creation_date":1589876587,"post_id":53333556,"comment_id":109459290,"body_markdown":"It seems that it works when visit a http site, but not https. Have you found any solution yet?","body":"It seems that it works when visit a http site, but not https. Have you found any solution yet?"},{"owner":{"account_id":4291079,"reputation":799,"user_id":3507435,"display_name":"Toparvion"},"score":0,"creation_date":1589942457,"post_id":53333556,"comment_id":109490503,"body_markdown":"@Keijack, for that particular application I had to use Apache HTTP client because it was the only one capable of handling the NTLM authentication. But I still wonder how to make it work with JDK HttpClient.","body":"@Keijack, for that particular application I had to use Apache HTTP client because it was the only one capable of handling the NTLM authentication. But I still wonder how to make it work with JDK HttpClient."},{"owner":{"account_id":6678507,"reputation":334,"user_id":5152432,"display_name":"Marco Carlo Moriggi"},"score":0,"creation_date":1649752367,"post_id":53333556,"comment_id":126949530,"body_markdown":"Have you tried with system property `-Djava.net.useSystemProxies=true`?","body":"Have you tried with system property <code>-Djava.net.useSystemProxies=true</code>?"}],"answers":[{"tags":[],"owner":{"account_id":14531657,"reputation":2813,"user_id":10496385,"display_name":"daniel"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1542533663,"creation_date":1542369394,"answer_id":53337424,"question_id":53333556,"body_markdown":"By default, basic authentication with the proxy is disabled when tunneling through an authenticating proxy since java 8u111. \r\n\r\nYou can re-enable it by specifying `-Djdk.http.auth.tunneling.disabledSchemes=&quot;&quot;` on the java command line.\r\n\r\nSee the [jdk 8u111 release notes](https://www.oracle.com/technetwork/java/javase/8u111-relnotes-3124969.html)","title":"Proxy Authentication with JDK 11 HttpClient","body":"<p>By default, basic authentication with the proxy is disabled when tunneling through an authenticating proxy since java 8u111. </p>\n\n<p>You can re-enable it by specifying <code>-Djdk.http.auth.tunneling.disabledSchemes=\"\"</code> on the java command line.</p>\n\n<p>See the <a href=\"https://www.oracle.com/technetwork/java/javase/8u111-relnotes-3124969.html\" rel=\"noreferrer\">jdk 8u111 release notes</a></p>\n"},{"tags":[],"owner":{"account_id":3924857,"reputation":1007,"user_id":3245762,"accept_rate":88,"display_name":"hbelmiro"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1581428585,"creation_date":1581428585,"answer_id":60170227,"question_id":53333556,"body_markdown":"You have to set the &quot;Proxy-Authorization&quot; header on the request.\r\n\r\n    HttpClient httpClient = HttpClient.newBuilder()\r\n            .version(HTTP_1_1)\r\n            .proxy(ProxySelector.of(new InetSocketAddress(&quot;proxy.mycompany.com&quot;, 3128)))\r\n            .build();\r\n\r\n    String encoded = new String(Base64.getEncoder().encode(&quot;login:password&quot;.getBytes()));\r\n\r\n    HttpRequest outRequest = HttpRequest.newBuilder()\r\n                                        .version(HTTP_1_1)\r\n                                        .GET()\r\n                                        .uri(URI.create(&quot;https://httpwg.org/asset/http.svg&quot;)) // no matter which URI to request\r\n                                        .setHeader(&quot;Proxy-Authorization&quot;, &quot;Basic &quot; + encoded)\r\n                                        .build();","title":"Proxy Authentication with JDK 11 HttpClient","body":"<p>You have to set the \"Proxy-Authorization\" header on the request.</p>\n\n<pre><code>HttpClient httpClient = HttpClient.newBuilder()\n        .version(HTTP_1_1)\n        .proxy(ProxySelector.of(new InetSocketAddress(\"proxy.mycompany.com\", 3128)))\n        .build();\n\nString encoded = new String(Base64.getEncoder().encode(\"login:password\".getBytes()));\n\nHttpRequest outRequest = HttpRequest.newBuilder()\n                                    .version(HTTP_1_1)\n                                    .GET()\n                                    .uri(URI.create(\"https://httpwg.org/asset/http.svg\")) // no matter which URI to request\n                                    .setHeader(\"Proxy-Authorization\", \"Basic \" + encoded)\n                                    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5613115,"reputation":11,"user_id":8080942,"display_name":"pepemsk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663613715,"creation_date":1663613715,"answer_id":73778091,"question_id":53333556,"body_markdown":"Use\r\n\r\n    System.setProperty(&quot;jdk.http.auth.proxying.disabledSchemes&quot;, &quot;&quot;);\r\n    System.setProperty(&quot;jdk.http.auth.tunneling.disabledSchemes&quot;, &quot;&quot;);\r\n\r\nConstruct your http client with proxy selector and authenticator\r\n\r\n    HttpClient client = HttpClient.newBuilder()\r\n        .authenticator(yourCustomAuthenticator)\r\n        .proxy(yourCustomProxySelector)\r\n        .build();\r\n\r\nIn your Authenticator override\r\n\r\n    @Override\r\n    protected PasswordAuthentication getPasswordAuthentication() {\r\n        if (getRequestorType().equals(RequestorType.PROXY)) {\r\n            return getPasswordAuthentication(getRequestingHost());\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    protected PasswordAuthentication getPasswordAuthentication(String proxyHost) {\r\n        // your logic to find username and password for proxyHost\r\n        return new PasswordAuthentication(proxyUsername, proxyPassword.toCharArray());\r\n        // or return null\r\n    }\r\n\r\n","title":"Proxy Authentication with JDK 11 HttpClient","body":"<p>Use</p>\n<pre><code>System.setProperty(&quot;jdk.http.auth.proxying.disabledSchemes&quot;, &quot;&quot;);\nSystem.setProperty(&quot;jdk.http.auth.tunneling.disabledSchemes&quot;, &quot;&quot;);\n</code></pre>\n<p>Construct your http client with proxy selector and authenticator</p>\n<pre><code>HttpClient client = HttpClient.newBuilder()\n    .authenticator(yourCustomAuthenticator)\n    .proxy(yourCustomProxySelector)\n    .build();\n</code></pre>\n<p>In your Authenticator override</p>\n<pre><code>@Override\nprotected PasswordAuthentication getPasswordAuthentication() {\n    if (getRequestorType().equals(RequestorType.PROXY)) {\n        return getPasswordAuthentication(getRequestingHost());\n    } else {\n        return null;\n    }\n}\nprotected PasswordAuthentication getPasswordAuthentication(String proxyHost) {\n    // your logic to find username and password for proxyHost\n    return new PasswordAuthentication(proxyUsername, proxyPassword.toCharArray());\n    // or return null\n}\n</code></pre>\n"}],"owner":{"account_id":4291079,"reputation":799,"user_id":3507435,"display_name":"Toparvion"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10516,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1663613715,"creation_date":1542354759,"question_id":53333556,"body_markdown":"I&#39;m trying to use JDK 11 [HttpClient][1] to make requests through a corporate proxy which requires authentication by login and password. According to JDK&#39;s [intro][2], I&#39;m building an instance of client by means of:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    HttpClient httpClient = HttpClient.newBuilder()\r\n            .version(HTTP_1_1)\r\n            .proxy(ProxySelector.of(new InetSocketAddress(&quot;proxy.mycompany.com&quot;, 3128)))\r\n            .authenticator(authenticator)\r\n            .build();\r\n\r\n, where `authenticator` is:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    Authenticator authenticator = new Authenticator() {\r\n      @Override\r\n      protected PasswordAuthentication getPasswordAuthentication() {\r\n        return new PasswordAuthentication(&quot;login&quot;, &quot;password&quot;.toCharArray());\r\n      }\r\n    };\r\n\r\nAnd then I execute the request itself:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    HttpRequest outRequest = HttpRequest.newBuilder()\r\n            .version(HTTP_1_1)\r\n            .GET()\r\n            .uri(URI.create(&quot;https://httpwg.org/asset/http.svg&quot;)) // no matter which URI to request\r\n            .build();\r\n    HttpResponse&lt;String&gt; inResponse = httpClient.send(outRequest, BodyHandlers.ofString());\r\n\r\nBut instead of valid response from the target server (https://httpwg.org) I receive *HTTP 407 (Proxy Authentication Required)*, i.e. `HttpClient` does not use the provided `authenticator`.\r\n\r\nI&#39;ve tried various solutions mentioned [here][3] and [here][4] but none of them helped.\r\n\r\nWhat is the correct way to make it work?\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/package-summary.html\r\n  [2]: https://openjdk.java.net/groups/net/httpclient/intro.html\r\n  [3]: https://dzone.com/articles/java-11-standardized-http-client-api\r\n  [4]: https://blogs.oracle.com/wssfc/handling-proxy-server-authentication-requests-in-java","title":"Proxy Authentication with JDK 11 HttpClient","body":"<p>I'm trying to use JDK 11 <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/package-summary.html\" rel=\"noreferrer\">HttpClient</a> to make requests through a corporate proxy which requires authentication by login and password. According to JDK's <a href=\"https://openjdk.java.net/groups/net/httpclient/intro.html\" rel=\"noreferrer\">intro</a>, I'm building an instance of client by means of:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>HttpClient httpClient = HttpClient.newBuilder()\n        .version(HTTP_1_1)\n        .proxy(ProxySelector.of(new InetSocketAddress(\"proxy.mycompany.com\", 3128)))\n        .authenticator(authenticator)\n        .build();\n</code></pre>\n\n<p>, where <code>authenticator</code> is:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Authenticator authenticator = new Authenticator() {\n  @Override\n  protected PasswordAuthentication getPasswordAuthentication() {\n    return new PasswordAuthentication(\"login\", \"password\".toCharArray());\n  }\n};\n</code></pre>\n\n<p>And then I execute the request itself:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>HttpRequest outRequest = HttpRequest.newBuilder()\n        .version(HTTP_1_1)\n        .GET()\n        .uri(URI.create(\"https://httpwg.org/asset/http.svg\")) // no matter which URI to request\n        .build();\nHttpResponse&lt;String&gt; inResponse = httpClient.send(outRequest, BodyHandlers.ofString());\n</code></pre>\n\n<p>But instead of valid response from the target server (<a href=\"https://httpwg.org\" rel=\"noreferrer\">https://httpwg.org</a>) I receive <em>HTTP 407 (Proxy Authentication Required)</em>, i.e. <code>HttpClient</code> does not use the provided <code>authenticator</code>.</p>\n\n<p>I've tried various solutions mentioned <a href=\"https://dzone.com/articles/java-11-standardized-http-client-api\" rel=\"noreferrer\">here</a> and <a href=\"https://blogs.oracle.com/wssfc/handling-proxy-server-authentication-requests-in-java\" rel=\"noreferrer\">here</a> but none of them helped.</p>\n\n<p>What is the correct way to make it work?</p>\n"},{"tags":["javascript","java","node.js","spring-boot","fetch-api"],"answers":[{"tags":[],"owner":{"account_id":10162,"reputation":922331,"user_id":19068,"display_name":"Quentin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663613326,"creation_date":1663613326,"answer_id":73778017,"question_id":73777961,"body_markdown":"When you make an HTTP request in a browser, you can use a relative URL. The absolute URL will be computed using the URL of the HTML document as the base URL.\r\n\r\nSo if you had an HTML document at `http://example.com/` and make an HTTP request to `/foo` then the request would go to `http://example.com/foo`.\r\n\r\nWhen your code is running in Node.js, there is no HTML document. There is no base URL. There is no automatic conversion of a relative URL to an absolute one.\r\n\r\nYou need to use an absolute URL. (Or a mechanism that supports relative URLs and lets you specify the base URL).","title":"How can I perform a fetch call in a Node.js app with a Java/Spring Boot function as the url?","body":"<p>When you make an HTTP request in a browser, you can use a relative URL. The absolute URL will be computed using the URL of the HTML document as the base URL.</p>\n<p>So if you had an HTML document at <code>http://example.com/</code> and make an HTTP request to <code>/foo</code> then the request would go to <code>http://example.com/foo</code>.</p>\n<p>When your code is running in Node.js, there is no HTML document. There is no base URL. There is no automatic conversion of a relative URL to an absolute one.</p>\n<p>You need to use an absolute URL. (Or a mechanism that supports relative URLs and lets you specify the base URL).</p>\n"}],"owner":{"account_id":10504325,"reputation":89,"user_id":7742055,"display_name":"Darth_Zitro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":453,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663613405,"creation_date":1663612940,"question_id":73777961,"body_markdown":"I&#39;m completely new to Node and Spring Boot and am having a difficult time performing a fetch call in my Node.js app. The overall structure of the project is a React front-end with a Java/Spring Boot back-end and Gradle. I&#39;m trying to create a service that automatically runs in the background that the user will never interact with or even know of its existence.  \r\n\r\nI&#39;m using Google BigQuery for this task and am running some simple SQL queries using the [Node.js client library][1] that Google provides. My issue is that after pulling in my data from BigQuery, I want to take that information and perform a POST call using fetch. However, this requires a Java function to make use of this external service I&#39;m trying to trigger with my POST call and when I try running `node GetBigQuery.mjs` in my terminal I get an error message:\r\n\r\n`TypeError: Failed to parse URL from /api/delayorders`\r\n\r\n`[cause]: TypeError [ERR_INVALID_URL]: Invalid URL`\r\n\r\n`input: &#39;/api/delayorders&#39;, code: &#39;ERR_INVALID_URL&#39;`\r\n\r\nI&#39;m not using node-fetch, axios, or any external library to make the POST request as I&#39;m running node 18.8.0 that comes built-in with fetch. \r\n\r\nThree main files in total:\r\n\r\n**BigQuery.js**\r\n\r\nIncludes boilerplate code copied and pasted from Google&#39;s documentation.\r\n\r\n\r\n----------\r\n\r\n\r\n**GetBigQuery.mjs**\r\n\r\n    // There is more code above and below but it&#39;s not\r\n    // necessary in order to understand my question\r\n\r\n    value.forEach(element =&gt; {\r\n        fetch(&quot;/api/delayorders&quot;, {\r\n            method: &quot;POST&quot;,\r\n            body: JSON.stringify({\r\n                &quot;orderIds&quot;: element.OrderReferenceId,\r\n                &quot;date&quot;: tomorrow,\r\n                &quot;time&quot;: &quot;12:00&quot;,\r\n                &quot;minutesFromUTC&quot;: new Date().getTimezoneOffset(),\r\n                &quot;buCode&quot;: element.StoreNo,\r\n            }),\r\n            headers: {\r\n                &quot;Content-Type&quot;: &quot;application/json&quot;,\r\n            }\r\n        }).then(response =&gt; {\r\n            console.log(response);\r\n        })\r\n    })\r\n\r\n\r\n----------\r\n**Delay.java**\r\n\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Getter;\r\n    import lombok.extern.log4j.Log4j2;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.web.bind.annotation.*;\r\n\r\n    @Log4j2\r\n    @RestController\r\n    @AllArgsConstructor\r\n    @RequestMapping(&quot;api&quot;)\r\n\r\n    public class Delay {\r\n\r\n        @Getter\r\n        private final OrderDelayService orderDelayService;\r\n\r\n        @PostMapping(&quot;/delayorders&quot;)\r\n        @ResponseStatus(HttpStatus.OK)\r\n        public String delayOrders(@RequestBody OrderDelayDto orderDelayDto) throws Exception {\r\n            orderDelayService.delayOrders(orderDelayDto.getOrderIds(), orderDelayDto.getDate(), orderDelayDto.getTime(), orderDelayDto.getMinutesFromUTC(), orderDelayDto.getBuCode());\r\n        return &quot;OK&quot;;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://cloud.google.com/bigquery/docs/reference/libraries#client-libraries-install-nodejs","title":"How can I perform a fetch call in a Node.js app with a Java/Spring Boot function as the url?","body":"<p>I'm completely new to Node and Spring Boot and am having a difficult time performing a fetch call in my Node.js app. The overall structure of the project is a React front-end with a Java/Spring Boot back-end and Gradle. I'm trying to create a service that automatically runs in the background that the user will never interact with or even know of its existence.</p>\n<p>I'm using Google BigQuery for this task and am running some simple SQL queries using the <a href=\"https://cloud.google.com/bigquery/docs/reference/libraries#client-libraries-install-nodejs\" rel=\"nofollow noreferrer\">Node.js client library</a> that Google provides. My issue is that after pulling in my data from BigQuery, I want to take that information and perform a POST call using fetch. However, this requires a Java function to make use of this external service I'm trying to trigger with my POST call and when I try running <code>node GetBigQuery.mjs</code> in my terminal I get an error message:</p>\n<p><code>TypeError: Failed to parse URL from /api/delayorders</code></p>\n<p><code>[cause]: TypeError [ERR_INVALID_URL]: Invalid URL</code></p>\n<p><code>input: '/api/delayorders', code: 'ERR_INVALID_URL'</code></p>\n<p>I'm not using node-fetch, axios, or any external library to make the POST request as I'm running node 18.8.0 that comes built-in with fetch.</p>\n<p>Three main files in total:</p>\n<p><strong>BigQuery.js</strong></p>\n<p>Includes boilerplate code copied and pasted from Google's documentation.</p>\n<hr />\n<p><strong>GetBigQuery.mjs</strong></p>\n<pre><code>// There is more code above and below but it's not\n// necessary in order to understand my question\n\nvalue.forEach(element =&gt; {\n    fetch(&quot;/api/delayorders&quot;, {\n        method: &quot;POST&quot;,\n        body: JSON.stringify({\n            &quot;orderIds&quot;: element.OrderReferenceId,\n            &quot;date&quot;: tomorrow,\n            &quot;time&quot;: &quot;12:00&quot;,\n            &quot;minutesFromUTC&quot;: new Date().getTimezoneOffset(),\n            &quot;buCode&quot;: element.StoreNo,\n        }),\n        headers: {\n            &quot;Content-Type&quot;: &quot;application/json&quot;,\n        }\n    }).then(response =&gt; {\n        console.log(response);\n    })\n})\n</code></pre>\n<hr />\n<p><strong>Delay.java</strong></p>\n<pre><code>import lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.extern.log4j.Log4j2;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.*;\n\n@Log4j2\n@RestController\n@AllArgsConstructor\n@RequestMapping(&quot;api&quot;)\n\npublic class Delay {\n\n    @Getter\n    private final OrderDelayService orderDelayService;\n\n    @PostMapping(&quot;/delayorders&quot;)\n    @ResponseStatus(HttpStatus.OK)\n    public String delayOrders(@RequestBody OrderDelayDto orderDelayDto) throws Exception {\n        orderDelayService.delayOrders(orderDelayDto.getOrderIds(), orderDelayDto.getDate(), orderDelayDto.getTime(), orderDelayDto.getMinutesFromUTC(), orderDelayDto.getBuCode());\n    return &quot;OK&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","regex","delimiter"],"comments":[{"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1663609678,"post_id":73777376,"comment_id":130275499,"body_markdown":"Does it have to be done using `Scanner` only?","body":"Does it have to be done using <code>Scanner</code> only?"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1663610075,"post_id":73777376,"comment_id":130275618,"body_markdown":"Scanner is not capable of doing this job properly. The solution is trivial: Don&#39;t use scanner. Presumably this is as simple as splitting on double colon first, then splitting each result you get from that on single colons, or even just a simple `.replace(&quot;;&quot;, &quot; &quot;)` call.","body":"Scanner is not capable of doing this job properly. The solution is trivial: Don&#39;t use scanner. Presumably this is as simple as splitting on double colon first, then splitting each result you get from that on single colons, or even just a simple <code>.replace(&quot;;&quot;, &quot; &quot;)</code> call."},{"owner":{"account_id":20844487,"reputation":41,"user_id":15310328,"display_name":"Fuji"},"score":0,"creation_date":1663612334,"post_id":73777376,"comment_id":130276381,"body_markdown":"@rzwitserloot That is a correct way to do it, and is how we made a program previous to this. Our professor wants us to expand upon using the useDelimiter() method with scanner input rather than hardcoding the string.","body":"@rzwitserloot That is a correct way to do it, and is how we made a program previous to this. Our professor wants us to expand upon using the useDelimiter() method with scanner input rather than hardcoding the string."},{"owner":{"account_id":20844487,"reputation":41,"user_id":15310328,"display_name":"Fuji"},"score":0,"creation_date":1663612465,"post_id":73777376,"comment_id":130276424,"body_markdown":"@Anubhava While it doesn&#39;t necessarily have to be solely the Scanner, that is the direction in which our professor is pushing us. He wants us to take input from the console, and use the useDelimiter() method to parse through and add the spaces / new lines","body":"@Anubhava While it doesn&#39;t necessarily have to be solely the Scanner, that is the direction in which our professor is pushing us. He wants us to take input from the console, and use the useDelimiter() method to parse through and add the spaces / new lines"}],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663613225,"creation_date":1663613225,"answer_id":73778006,"question_id":73777376,"body_markdown":"You may use this code:\r\n\r\n```Java\r\npublic class Hw3p2 {\r\n\tpublic static void main(String[] args) {\r\n\t\t// Initializes scanner class.\r\n\t\tScanner input = new Scanner(System.in).useDelimiter(&quot;;;&quot;);\r\n\r\n\t\t// Prompts user for input.\r\n\t\tSystem.out.print(&quot;Enter the string you wish to filter &amp; parse: &quot;);\r\n\r\n\t\t// Reads user input.\r\n\t\twhile(input.hasNext()) {\r\n\t\t\tString filterString = input.next();\r\n\t\t\t//System.err.println(&quot;filterString: &quot; + filterString);\r\n\r\n\t\t\t// Initiates new scanner reading the user inputted string.\r\n\t\t\tScanner a = new Scanner(filterString).useDelimiter(&quot;;&quot;);\r\n\r\n\t\t\t// Loop that parses through string while there are more tokens.\r\n\t\t\twhile(a.hasNext()) {\r\n\t\t\t\tSystem.out.print(a.next() + &quot; &quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t\ta.close();\r\n\t\t}\r\n\r\n\t\tinput.close();\r\n\t}\r\n}\r\n```\r\n\r\n**Output:**\r\n\r\n```sh\r\nEnter the string you wish to filter &amp; parse: This;is;the;first;line;;This;is;the;second;line!;;;;Done!;;\r\nThis is the first line \r\nThis is the second line! \r\n\r\nDone!\r\n```\r\n\r\nNote use of outer scanner with delimiter `;;` and an inner one with `;`. ","title":"How do I process different delimiters in a RegEx expression with Java?","body":"<p>You may use this code:</p>\n<pre><code>public class Hw3p2 {\n    public static void main(String[] args) {\n        // Initializes scanner class.\n        Scanner input = new Scanner(System.in).useDelimiter(&quot;;;&quot;);\n\n        // Prompts user for input.\n        System.out.print(&quot;Enter the string you wish to filter &amp; parse: &quot;);\n\n        // Reads user input.\n        while(input.hasNext()) {\n            String filterString = input.next();\n            //System.err.println(&quot;filterString: &quot; + filterString);\n\n            // Initiates new scanner reading the user inputted string.\n            Scanner a = new Scanner(filterString).useDelimiter(&quot;;&quot;);\n\n            // Loop that parses through string while there are more tokens.\n            while(a.hasNext()) {\n                System.out.print(a.next() + &quot; &quot;);\n            }\n            System.out.println();\n            a.close();\n        }\n\n        input.close();\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre class=\"lang-bash prettyprint-override\"><code>Enter the string you wish to filter &amp; parse: This;is;the;first;line;;This;is;the;second;line!;;;;Done!;;\nThis is the first line \nThis is the second line! \n\nDone!\n</code></pre>\n<p>Note use of outer scanner with delimiter <code>;;</code> and an inner one with <code>;</code>.</p>\n"}],"owner":{"account_id":20844487,"reputation":41,"user_id":15310328,"display_name":"Fuji"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73778006,"answer_count":1,"score":1,"last_activity_date":1663613225,"creation_date":1663609600,"question_id":73777376,"body_markdown":"I am working on creating a program for my course, in which I am required to divide the string: ```This;is;the;first;line;;This;is;the;second;line!;;;;Done!;;```. \r\n\r\nIn the requirements, I need to read a ```single semicolon``` as a ```space```, and a ```double semicolon``` as a ```new line```. How do I create a regular expression in the useDelimiter() method that allows me to parse through and differentiate between both ```;``` and ```;;```? Thank you!\r\n\r\nAssignment Excerpt:\r\n*Instead of hard-coding the string, this time you will read it from the console.  Study the useDelimiter() method and use it to set the delimiter for the scanner input. This time allow either colons or semicolons as the delimiters.  One might prefer to use the String Tokenizer here, but don’t -- use the Scanner’s useDelimiter() method to set the delimiter in the Scanner and process each token as it comes.*\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Hw3p2 {\r\n    public static void main(String[] args) {\r\n        // Initializes scanner class.\r\n        Scanner input = new Scanner(System.in);\r\n\r\n        // Prompts user for input.\r\n        System.out.println(&quot;Enter the string you wish to filter &amp; parse: &quot;);\r\n\r\n        // Reads user input.\r\n        String filterString = input.nextLine();\r\n\r\n        // Initiates new scanner reading the user inputted string.\r\n        Scanner a = new Scanner(filterString);\r\n\r\n        a.useDelimiter(&quot;;|;;&quot;);\r\n\r\n        System.out.printf(&quot;\\n&quot;);\r\n\r\n        // Loop that parses through string while there are more tokens.\r\n        while(a.hasNext()) {\r\n            System.out.print(a.next());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe Expected output is to be:\r\n\r\n[![Code output][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/a0u7i.png","title":"How do I process different delimiters in a RegEx expression with Java?","body":"<p>I am working on creating a program for my course, in which I am required to divide the string: <code>This;is;the;first;line;;This;is;the;second;line!;;;;Done!;;</code>.</p>\n<p>In the requirements, I need to read a <code>single semicolon</code> as a <code>space</code>, and a <code>double semicolon</code> as a <code>new line</code>. How do I create a regular expression in the useDelimiter() method that allows me to parse through and differentiate between both <code>;</code> and <code>;;</code>? Thank you!</p>\n<p>Assignment Excerpt:\n<em>Instead of hard-coding the string, this time you will read it from the console.  Study the useDelimiter() method and use it to set the delimiter for the scanner input. This time allow either colons or semicolons as the delimiters.  One might prefer to use the String Tokenizer here, but don’t -- use the Scanner’s useDelimiter() method to set the delimiter in the Scanner and process each token as it comes.</em></p>\n<pre><code>import java.util.Scanner;\n\npublic class Hw3p2 {\n    public static void main(String[] args) {\n        // Initializes scanner class.\n        Scanner input = new Scanner(System.in);\n\n        // Prompts user for input.\n        System.out.println(&quot;Enter the string you wish to filter &amp; parse: &quot;);\n\n        // Reads user input.\n        String filterString = input.nextLine();\n\n        // Initiates new scanner reading the user inputted string.\n        Scanner a = new Scanner(filterString);\n\n        a.useDelimiter(&quot;;|;;&quot;);\n\n        System.out.printf(&quot;\\n&quot;);\n\n        // Loop that parses through string while there are more tokens.\n        while(a.hasNext()) {\n            System.out.print(a.next());\n        }\n    }\n}\n</code></pre>\n<p>The Expected output is to be:</p>\n<p><a href=\"https://i.stack.imgur.com/a0u7i.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a0u7i.png\" alt=\"Code output\" /></a></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8968,"page":1024,"page_size":100}
