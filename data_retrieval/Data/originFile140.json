{"items":[{"tags":["java","android","android-recyclerview"],"answers":[{"comments":[{"owner":{"account_id":29593861,"reputation":11,"user_id":22680768,"display_name":"MyLaptop Friday"},"score":0,"creation_date":1696695362,"post_id":77248828,"comment_id":136187671,"body_markdown":"Still No change","body":"Still No change"}],"tags":[],"owner":{"account_id":13692468,"reputation":71,"user_id":9879923,"display_name":"storytellerF"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696663985,"creation_date":1696663985,"answer_id":77248828,"question_id":77248725,"body_markdown":"need reattach adapter\r\n\r\n```\r\nrecycleView.adapter = null\r\nrecycleView.adapter = adapter\r\n```","title":"How to add dividers or spacers with text to a recylerview which dynamically adapts to status attribute","body":"<p>need reattach adapter</p>\n<pre><code>recycleView.adapter = null\nrecycleView.adapter = adapter\n</code></pre>\n"}],"owner":{"account_id":29593861,"reputation":11,"user_id":22680768,"display_name":"MyLaptop Friday"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696663985,"creation_date":1696661867,"question_id":77248725,"body_markdown":"I&#39;ve got a RecylerView that is displaying a list of data. I need to add dividers or spacers that I need to add two Dividers or spacers too that I can add text [Present and Invited] the header should dynamically adapt to status of the item present in the list. As the person joins the party they should move from invite to present \r\n\r\n** Note : Invites can are size can increase or decrease as well as Present with respect to status of the item **\r\n\r\nI have achieved the following but the alignment wont fit for dynamic changes\r\n\r\nPls refer the image for clarity : \r\n[https://i.stack.imgur.com/mssFl.gif](https://i.stack.imgur.com/mssFl.gif)  \r\n\r\nSeparationDecorator class :\r\n\r\n\r\n```\r\npublic class SeparationDecorator extends RecyclerView.ItemDecoration {\r\n    private int textSize = 50;\r\n    private int groupSpacing = 100;\r\n\r\n    private static int printPresentAt;\r\n    private static int printInviteAt;\r\n\r\n    private Paint paint = new Paint();\r\n    {\r\n        paint.setTextSize(textSize);\r\n    }\r\n\r\n    @Override\r\n    public void onDrawOver(Canvas c, RecyclerView parent, RecyclerView.State state) {\r\n\r\n        // TODO : Allignment Problem\r\n\r\n        for (int i = 0; i &lt; parent.getChildCount(); i++) {\r\n\r\n            View view = parent.getChildAt(i);\r\n            int position = parent.getChildAdapterPosition(view);\r\n\r\n            int present = MyGlobal.getPresentCount();\r\n            int invited = MyGlobal.getInviteCount();\r\n\r\n            if(present == 0 &amp;&amp; invited&gt;0){\r\n                SeparationDecorator.printPresentAt = invited;\r\n                SeparationDecorator.printInviteAt = 0;\r\n            } else if (present &gt; 0 &amp;&amp; invited&gt;0) {\r\n                SeparationDecorator. printPresentAt = 0;\r\n                SeparationDecorator.printInviteAt = present;\r\n            } else if (present &gt; 0 &amp;&amp; invited == 0) {\r\n                SeparationDecorator.printPresentAt = 0;\r\n                SeparationDecorator.printInviteAt = present;\r\n            }\r\n\r\n            if (position == SeparationDecorator.printPresentAt) {\r\n                c.drawText(&quot;Present&quot;, view.getLeft(),\r\n                        view.getTop() - groupSpacing + textSize, paint);\r\n            } else {\r\n                if(position == SeparationDecorator.printInviteAt) {\r\n                    c.drawText(&quot;Invited&quot;, view.getLeft(),\r\n                            view.getTop() - groupSpacing + textSize, paint);\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void getItemOffsets(Rect outRect, View view, RecyclerView parent, RecyclerView.State state) {\r\n        if (parent.getChildAdapterPosition(view) == SeparationDecorator.printInviteAt\r\n                ||parent.getChildAdapterPosition(view) == SeparationDecorator.printPresentAt) {\r\n            outRect.set(0, groupSpacing, 0, 0);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nMyGlobal.getPresentCount() is the count of present members \r\nMyGlobal.getInviteCount() is the count of invited members\r\n** They will change dynamically **\r\n\r\nItem class : \r\n\r\n```\r\npublic class FriendsModel {\r\n\r\n    String userName;\r\n    String handleName;\r\n    int status;\r\n    /*\r\n    *   0 - Invited\r\n    *   1 - Accepted\r\n    *\r\n    * */\r\n    String fcm;\r\n\r\n    String uid;\r\n\r\n    public FriendsModel(String userName, String handleName, int status, String fcm, String uid) {\r\n        this.userName = userName;\r\n        this.handleName = handleName;\r\n        this.status = status;\r\n        this.fcm = fcm;\r\n        this.uid = uid;\r\n    }\r\n\r\n    public FriendsModel() {\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object obj) {\r\n\r\n        FriendsModel model = (FriendsModel) obj;\r\n\r\n        if(this.uid.equals(model.uid))\r\n            return true;\r\n\r\n        return false;\r\n    }\r\n\r\n    /* All getters and setters */\r\n\r\n}\r\n```\r\n\r\n","title":"How to add dividers or spacers with text to a recylerview which dynamically adapts to status attribute","body":"<p>I've got a RecylerView that is displaying a list of data. I need to add dividers or spacers that I need to add two Dividers or spacers too that I can add text [Present and Invited] the header should dynamically adapt to status of the item present in the list. As the person joins the party they should move from invite to present</p>\n<p>** Note : Invites can are size can increase or decrease as well as Present with respect to status of the item **</p>\n<p>I have achieved the following but the alignment wont fit for dynamic changes</p>\n<p>Pls refer the image for clarity :\n<a href=\"https://i.stack.imgur.com/mssFl.gif\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/mssFl.gif</a></p>\n<p>SeparationDecorator class :</p>\n<pre><code>public class SeparationDecorator extends RecyclerView.ItemDecoration {\n    private int textSize = 50;\n    private int groupSpacing = 100;\n\n    private static int printPresentAt;\n    private static int printInviteAt;\n\n    private Paint paint = new Paint();\n    {\n        paint.setTextSize(textSize);\n    }\n\n    @Override\n    public void onDrawOver(Canvas c, RecyclerView parent, RecyclerView.State state) {\n\n        // TODO : Allignment Problem\n\n        for (int i = 0; i &lt; parent.getChildCount(); i++) {\n\n            View view = parent.getChildAt(i);\n            int position = parent.getChildAdapterPosition(view);\n\n            int present = MyGlobal.getPresentCount();\n            int invited = MyGlobal.getInviteCount();\n\n            if(present == 0 &amp;&amp; invited&gt;0){\n                SeparationDecorator.printPresentAt = invited;\n                SeparationDecorator.printInviteAt = 0;\n            } else if (present &gt; 0 &amp;&amp; invited&gt;0) {\n                SeparationDecorator. printPresentAt = 0;\n                SeparationDecorator.printInviteAt = present;\n            } else if (present &gt; 0 &amp;&amp; invited == 0) {\n                SeparationDecorator.printPresentAt = 0;\n                SeparationDecorator.printInviteAt = present;\n            }\n\n            if (position == SeparationDecorator.printPresentAt) {\n                c.drawText(&quot;Present&quot;, view.getLeft(),\n                        view.getTop() - groupSpacing + textSize, paint);\n            } else {\n                if(position == SeparationDecorator.printInviteAt) {\n                    c.drawText(&quot;Invited&quot;, view.getLeft(),\n                            view.getTop() - groupSpacing + textSize, paint);\n                }\n            }\n\n\n        }\n    }\n\n    @Override\n    public void getItemOffsets(Rect outRect, View view, RecyclerView parent, RecyclerView.State state) {\n        if (parent.getChildAdapterPosition(view) == SeparationDecorator.printInviteAt\n                ||parent.getChildAdapterPosition(view) == SeparationDecorator.printPresentAt) {\n            outRect.set(0, groupSpacing, 0, 0);\n        }\n    }\n}\n</code></pre>\n<p>MyGlobal.getPresentCount() is the count of present members\nMyGlobal.getInviteCount() is the count of invited members\n** They will change dynamically **</p>\n<p>Item class :</p>\n<pre><code>public class FriendsModel {\n\n    String userName;\n    String handleName;\n    int status;\n    /*\n    *   0 - Invited\n    *   1 - Accepted\n    *\n    * */\n    String fcm;\n\n    String uid;\n\n    public FriendsModel(String userName, String handleName, int status, String fcm, String uid) {\n        this.userName = userName;\n        this.handleName = handleName;\n        this.status = status;\n        this.fcm = fcm;\n        this.uid = uid;\n    }\n\n    public FriendsModel() {\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n\n        FriendsModel model = (FriendsModel) obj;\n\n        if(this.uid.equals(model.uid))\n            return true;\n\n        return false;\n    }\n\n    /* All getters and setters */\n\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1696660573,"post_id":77248647,"comment_id":136184653,"body_markdown":"https://en.wikipedia.org/wiki/External_sorting","body":"<a href=\"https://en.wikipedia.org/wiki/External_sorting\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/External_sorting</a>"}],"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696663504,"answer_count":0,"score":0,"last_activity_date":1696663973,"creation_date":1696660406,"question_id":77248647,"body_markdown":"Someone asked me this question in an interview like if I have a file which is 1 GB of size which has number in random order, I want to sort the numbers in the file. My machine doesn’t have this much space to read 1 GB file in one go. How can I read the file and sort the data and store it back to file again in sorted format.","title":"How to read a file of 1 GB and sort the data within the file","body":"<p>Someone asked me this question in an interview like if I have a file which is 1 GB of size which has number in random order, I want to sort the numbers in the file. My machine doesn’t have this much space to read 1 GB file in one go. How can I read the file and sort the data and store it back to file again in sorted format.</p>\n"},{"tags":["java","spring","firebase"],"answers":[{"tags":[],"owner":{"account_id":17598658,"reputation":573,"user_id":12769096,"display_name":"NoobCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696634889,"creation_date":1696634889,"answer_id":77247771,"question_id":77247601,"body_markdown":"The problem is here:\r\n\r\n    final FirebaseApp app = FirebaseApp.getInstance();\r\n\r\nYou initiate a new app and save it into `app`, but you don&#39;t provide any name so it fetches the default.\r\nAs the documentation (https://github.com/firebase/firebase-android-sdk/blob/master/firebase-common/src/main/java/com/google/firebase/FirebaseApp.java#L172) says:\r\n\r\n          /**\r\n       * Returns the default (first initialized) instance of the {@link FirebaseApp}.\r\n       *\r\n       * @throws IllegalStateException if the default app was not initialized.\r\n       */\r\n      @NonNull\r\n      public static FirebaseApp getInstance() {\r\nand also:\r\n\r\n        /**\r\n       * Returns the instance identified by the unique name, or throws if it does not exist.\r\n       *\r\n       * @param name represents the name of the {@link FirebaseApp} instance.\r\n       * @throws IllegalStateException if the {@link FirebaseApp} was not initialized, either via {@link\r\n       *     #initializeApp(Context, FirebaseOptions, String)}.\r\n       */\r\n      @NonNull\r\n      public static FirebaseApp getInstance(@NonNull String name) {\r\n\r\nSo if you initiate an app with a certain name, i.e as you did:\r\n\r\n    FirebaseApp.initializeApp(&quot;my-project-id&quot;);\r\n   \r\nYou also need later to fetch it:\r\n\r\n    final FirebaseApp app = FirebaseApp.getInstance(&quot;my-project-id&quot;);","title":"Firebase in Spring Boot Java application - FirebaseApp with name [DEFAULT] doesn&#39;t exist","body":"<p>The problem is here:</p>\n<pre><code>final FirebaseApp app = FirebaseApp.getInstance();\n</code></pre>\n<p>You initiate a new app and save it into <code>app</code>, but you don't provide any name so it fetches the default.\nAs the documentation (<a href=\"https://github.com/firebase/firebase-android-sdk/blob/master/firebase-common/src/main/java/com/google/firebase/FirebaseApp.java#L172\" rel=\"nofollow noreferrer\">https://github.com/firebase/firebase-android-sdk/blob/master/firebase-common/src/main/java/com/google/firebase/FirebaseApp.java#L172</a>) says:</p>\n<pre><code>      /**\n   * Returns the default (first initialized) instance of the {@link FirebaseApp}.\n   *\n   * @throws IllegalStateException if the default app was not initialized.\n   */\n  @NonNull\n  public static FirebaseApp getInstance() {\n</code></pre>\n<p>and also:</p>\n<pre><code>    /**\n   * Returns the instance identified by the unique name, or throws if it does not exist.\n   *\n   * @param name represents the name of the {@link FirebaseApp} instance.\n   * @throws IllegalStateException if the {@link FirebaseApp} was not initialized, either via {@link\n   *     #initializeApp(Context, FirebaseOptions, String)}.\n   */\n  @NonNull\n  public static FirebaseApp getInstance(@NonNull String name) {\n</code></pre>\n<p>So if you initiate an app with a certain name, i.e as you did:</p>\n<pre><code>FirebaseApp.initializeApp(&quot;my-project-id&quot;);\n</code></pre>\n<p>You also need later to fetch it:</p>\n<pre><code>final FirebaseApp app = FirebaseApp.getInstance(&quot;my-project-id&quot;);\n</code></pre>\n"}],"owner":{"account_id":4033079,"reputation":5307,"user_id":3318489,"accept_rate":65,"display_name":"quma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77247771,"answer_count":1,"score":0,"last_activity_date":1696663967,"creation_date":1696630500,"question_id":77247601,"body_markdown":"I use Firebase in order to send Push messages to mobiles from Spring Boot backend (I use Maven):\r\n\r\n    public class FirebaseServiceImpl extends AbstractService implements FirebaseService {\r\n\r\n    public FirebaseServiceImpl() {\r\n    }\r\n\r\n    @Override\r\n    public void initFirebase() {\r\n        FirebaseApp.initializeApp(&quot;my-project-id&quot;);\r\n        logger.info(&quot;firebase service initialized in FirebaseServiceImpl#initFirebase&quot;);\r\n    }\r\n\r\n    public void sendFirebaseMessage() {\r\n        try {\r\n            String registrationToken = &quot;1:7250343492:android:3679c552666668aa369f09&quot;; // &quot;YOUR_REGISTRATION_TOKEN&quot;;\r\n\r\n            // See documentation on defining a message payload.\r\n            Message message = Message.builder().putData(&quot;score&quot;, &quot;850&quot;).putData(&quot;time&quot;, &quot;2:45&quot;).setToken(registrationToken).build();\r\n\r\n            // Send a message to the device corresponding to the provided\r\n            // registration token.\r\n            String response;\r\n\r\n            final FirebaseApp app = FirebaseApp.getInstance();\r\n            response = FirebaseMessaging.getInstance(app).send(message);\r\n            System.out.println(&quot;Successfully sent message: &quot; + response);\r\n        } catch (FirebaseMessagingException e) {\r\n            e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\nIf I invoke the method **sendFirebaseMessage** I get the following error: \r\n\r\n    handle request error &#39;FirebaseApp with name [DEFAULT] doesn&#39;t exist. Available app names: my- \r\n    project-id\r\n\r\nActually I dont know what I am doing wrong. \r\n","title":"Firebase in Spring Boot Java application - FirebaseApp with name [DEFAULT] doesn&#39;t exist","body":"<p>I use Firebase in order to send Push messages to mobiles from Spring Boot backend (I use Maven):</p>\n<pre><code>public class FirebaseServiceImpl extends AbstractService implements FirebaseService {\n\npublic FirebaseServiceImpl() {\n}\n\n@Override\npublic void initFirebase() {\n    FirebaseApp.initializeApp(&quot;my-project-id&quot;);\n    logger.info(&quot;firebase service initialized in FirebaseServiceImpl#initFirebase&quot;);\n}\n\npublic void sendFirebaseMessage() {\n    try {\n        String registrationToken = &quot;1:7250343492:android:3679c552666668aa369f09&quot;; // &quot;YOUR_REGISTRATION_TOKEN&quot;;\n\n        // See documentation on defining a message payload.\n        Message message = Message.builder().putData(&quot;score&quot;, &quot;850&quot;).putData(&quot;time&quot;, &quot;2:45&quot;).setToken(registrationToken).build();\n\n        // Send a message to the device corresponding to the provided\n        // registration token.\n        String response;\n\n        final FirebaseApp app = FirebaseApp.getInstance();\n        response = FirebaseMessaging.getInstance(app).send(message);\n        System.out.println(&quot;Successfully sent message: &quot; + response);\n    } catch (FirebaseMessagingException e) {\n        e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n<p>If I invoke the method <strong>sendFirebaseMessage</strong> I get the following error:</p>\n<pre><code>handle request error 'FirebaseApp with name [DEFAULT] doesn't exist. Available app names: my- \nproject-id\n</code></pre>\n<p>Actually I dont know what I am doing wrong.</p>\n"},{"tags":["java","android","android-recyclerview"],"comments":[{"owner":{"account_id":414977,"reputation":199,"user_id":789512,"display_name":"rajesh"},"score":0,"creation_date":1492517933,"post_id":43471357,"comment_id":73998719,"body_markdown":"Plz debug and check if you r getting updated design and cart list in your adapter.","body":"Plz debug and check if you r getting updated design and cart list in your adapter."},{"owner":{"account_id":3800959,"reputation":1240,"user_id":3154636,"accept_rate":79,"display_name":"Ashish Kudale"},"score":0,"creation_date":1492520862,"post_id":43471357,"comment_id":74000980,"body_markdown":"no I am not getting updated designList. I always get cartList as null.","body":"no I am not getting updated designList. I always get cartList as null."}],"answers":[{"tags":[],"owner":{"account_id":3800959,"reputation":1240,"user_id":3154636,"accept_rate":79,"display_name":"Ashish Kudale"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492576915,"creation_date":1492525392,"answer_id":43474866,"question_id":43471357,"body_markdown":"Just changed following constructor code and it started working.\r\n\r\n    public Single_DesignAdapter(Context context, ArrayList&lt;Design&gt; designList) {\r\n        this.designList = designList;\r\n        this.context = context;\r\n        this.layoutInflater = LayoutInflater.from(context);\r\n\r\n        String cart = getSharePref(context, &quot;cart&quot;);\r\n        Design[] designs = new Gson().fromJson(cart, Design[].class);\r\n\r\n        if (cartList != null) {\r\n            cartList = new ArrayList&lt;Design&gt;(Arrays.asList(designs));\r\n        } else {\r\n            if (designs != null) {\r\n                cartList = new ArrayList&lt;Design&gt;();\r\n                for (Design d : designs) {\r\n                    cartList.add(d);\r\n                }\r\n            }\r\n        }\r\n    }","title":"Add to cart design working in android","body":"<p>Just changed following constructor code and it started working.</p>\n\n<pre><code>public Single_DesignAdapter(Context context, ArrayList&lt;Design&gt; designList) {\n    this.designList = designList;\n    this.context = context;\n    this.layoutInflater = LayoutInflater.from(context);\n\n    String cart = getSharePref(context, \"cart\");\n    Design[] designs = new Gson().fromJson(cart, Design[].class);\n\n    if (cartList != null) {\n        cartList = new ArrayList&lt;Design&gt;(Arrays.asList(designs));\n    } else {\n        if (designs != null) {\n            cartList = new ArrayList&lt;Design&gt;();\n            for (Design d : designs) {\n                cartList.add(d);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19067428,"reputation":9,"user_id":13922281,"display_name":"Hiren Pithwa"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1594641167,"creation_date":1594641167,"answer_id":62875281,"question_id":43471357,"body_markdown":"Add To Cart Method in the shopping app.\r\n\r\n     \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    addtocart=(Button)findViewById(R.id.addtocartbtn);\r\n            addtocart.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Cart cart=new Cart();\r\n                    cart.setId(id);\r\n                    cart.setImageid(imageurl);\r\n                    cart.setName(prname);\r\n                    cart.setPrice(prprice);\r\n                   if (MainActivity.myDatabase.cartDao().isAddToCart(id)!=1){\r\n                       MainActivity.myDatabase.cartDao().addToCart(cart);\r\n                   }else {\r\n                       Toast.makeText(AddTocartActivity.this, &quot;You are Already added to cart!&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                   }\r\n                }\r\n            });\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIf you want learn more about add to cart in android go to [Add to cart][1]\r\n\r\n\r\n  [1]: https://uniqueandrocode.com/add-to-cart-and-display-in-recyclerview/","title":"Add to cart design working in android","body":"<p>Add To Cart Method in the shopping app.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>addtocart=(Button)findViewById(R.id.addtocartbtn);\n        addtocart.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Cart cart=new Cart();\n                cart.setId(id);\n                cart.setImageid(imageurl);\n                cart.setName(prname);\n                cart.setPrice(prprice);\n               if (MainActivity.myDatabase.cartDao().isAddToCart(id)!=1){\n                   MainActivity.myDatabase.cartDao().addToCart(cart);\n               }else {\n                   Toast.makeText(AddTocartActivity.this, \"You are Already added to cart!\", Toast.LENGTH_SHORT).show();\n\n               }\n            }\n        });</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>If you want learn more about add to cart in android go to <a href=\"https://uniqueandrocode.com/add-to-cart-and-display-in-recyclerview/\" rel=\"nofollow noreferrer\">Add to cart</a></p>\n"}],"owner":{"account_id":3800959,"reputation":1240,"user_id":3154636,"accept_rate":79,"display_name":"Ashish Kudale"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8423,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1696662205,"creation_date":1492516276,"question_id":43471357,"body_markdown":"I am working on app which is some what similar to e-commerce app. User can add products to cart.  \r\nI have two arrayLists of mention below.\r\n\r\n    public ArrayList&lt;Design&gt; cartList = new ArrayList&lt;Design&gt;();\r\n    public ArrayList&lt;Design&gt; designList = new ArrayList&lt;Design&gt;(); \r\n\r\nOne for showing lists of products and other to save products added by user.\r\nI have two activity (see images) \r\n\r\nThis activity is to show products in recyclerview. In this I have added two items in cart.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis is my second activity shows all cart items. (User can delete, increase or decrease qty from this activity also.)\r\n\r\n[![enter image description here][2]][2]\r\n\r\nNow What I wanted is when user comes back to first activity I wanted to compare two lists update qty(pcs) in designList from cartList. Below screenshot is of first activity when I press back or revisit. \r\n\r\n[![enter image description here][3]][3]\r\n\r\nThis image should similar to first image. I will share my code here.\r\n\r\n&gt; Design.java\r\n\r\n    public class Design implements Serializable {\r\n        public int id;\r\n        public String qualityId;\r\n        public String qualityName;\r\n        public String designId;\r\n        public String designName;\r\n        public String image;\r\n        public String name; //use as shade name\r\n        public String discPercent;\r\n        public String amount;\r\n        public int pcs; //consider quantity here.\r\n    }\r\n\r\n&gt; Single_DesignAdapter.java\r\n\r\n\r\n    public class Single_DesignAdapter extends RecyclerView.Adapter&lt;Single_DesignAdapter.ViewHolder&gt; {\r\n    \r\n        public ArrayList&lt;Design&gt; designList;\r\n        private Context context;\r\n        private LayoutInflater layoutInflater;\r\n        public ArrayList&lt;Design&gt; cartList = null;\r\n    \r\n        public Single_DesignAdapter(Context context, ArrayList&lt;Design&gt; designList) {\r\n            this.designList = designList;\r\n            this.context = context;\r\n            this.layoutInflater = LayoutInflater.from(context);\r\n    \r\n            if (cartList != null) {\r\n                String cart = getSharePref(context, &quot;cart&quot;);\r\n                Design[] designs = new Gson().fromJson(cart, Design[].class);\r\n                cartList = (ArrayList&lt;Design&gt;) Arrays.asList(designs);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n            View view = layoutInflater.inflate(R.layout.single_design, parent, false);\r\n            return new ViewHolder(view);\r\n        }\r\n    \r\n        @Override\r\n        public void onBindViewHolder(final ViewHolder holder, final int position) {\r\n    \r\n            final Design design = designList.get(position);\r\n            holder.tvQuality.setText(design.qualityName);\r\n            holder.tvDesign.setText(design.designName);\r\n            holder.tvShade.setText(design.name);\r\n    \r\n            if (!design.discPercent.equals(&quot;0&quot;)) {\r\n                holder.tvDisPer.setText(&quot;-&quot;+design.discPercent+&quot;%&quot;);\r\n                holder.tvAmount.setPaintFlags(holder.tvAmount.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);\r\n                int a = Integer.parseInt(design.amount);\r\n                float b = Float.parseFloat(design.discPercent) / 100;\r\n                holder.tvAmount.setText(&quot;₹ &quot; + design.amount);\r\n                int c = (int) (a * b);\r\n                int d = a-c;\r\n                holder.tvDiscAmt.setText(&quot;₹ &quot; +d);\r\n                Picasso.with(context).load(design.image).into(holder.ivDesign);\r\n            } else {\r\n                holder.tvAmount.setText(&quot;₹ &quot; + design.amount);\r\n                Picasso.with(context).load(design.image).into(holder.ivDesign);\r\n                holder.tvDisPer.setVisibility(View.INVISIBLE);\r\n                holder.tvDiscAmt.setVisibility(View.INVISIBLE);\r\n            }\r\n    \r\n            if (cartList != null) {\r\n                for (Design d : cartList) {\r\n                    if (design.id == d.id) {\r\n                        design.pcs = d.pcs;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            if (design.pcs != 0) {\r\n                holder.llAdd.setVisibility(View.GONE);\r\n                holder.llPlusMinus.setVisibility(View.VISIBLE);\r\n                holder.btPcsCount.setText(Integer.toString(design.pcs));\r\n            }\r\n    \r\n            holder.btAdd.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    holder.llAdd.setVisibility(View.GONE);\r\n                    holder.llPlusMinus.setVisibility(View.VISIBLE);\r\n                    if (cartList != null) {\r\n                        if (cartList.contains(design)) {\r\n                            cartList.remove(design);\r\n                            design.pcs = 1;\r\n                            cartList.add(design);\r\n                            saveSharedPref(context, &quot;cart&quot;, new Gson().toJson(cartList));\r\n                            ((Activity) context).invalidateOptionsMenu();\r\n                        } else {\r\n                            design.pcs = 1;\r\n                            cartList.add(design);\r\n                            saveSharedPref(context, &quot;cart&quot;, new Gson().toJson(cartList));\r\n                            ((Activity) context).invalidateOptionsMenu();\r\n                        }\r\n                    } else {\r\n                        cartList = new ArrayList&lt;Design&gt;(Arrays.asList(design));\r\n                        cartList.remove(design);\r\n                        design.pcs = 1;\r\n                        cartList.add(design);\r\n                        saveSharedPref(context, &quot;cart&quot;, new Gson().toJson(cartList));\r\n                        ((Activity) context).invalidateOptionsMenu();\r\n                    }\r\n                }\r\n            });\r\n    \r\n            holder.btPlus.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (Integer.parseInt(holder.btPcsCount.getText().toString()) &gt;= 1) {\r\n                        int a = Integer.parseInt(holder.btPcsCount.getText().toString());\r\n                        a++;\r\n                        holder.btPcsCount.setText(Integer.toString(a));\r\n                        if (cartList != null) {\r\n                            if (cartList.contains(design)) {\r\n                                cartList.remove(design);\r\n                                design.pcs = a;\r\n                                cartList.add(design);\r\n                                saveSharedPref(context, &quot;cart&quot;, new Gson().toJson(cartList));\r\n                                ((Activity) context).invalidateOptionsMenu();\r\n                            } else {\r\n                                design.pcs = a;\r\n                                cartList.add(design);\r\n                                saveSharedPref(context, &quot;cart&quot;, new Gson().toJson(cartList));\r\n                                ((Activity) context).invalidateOptionsMenu();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n    \r\n            holder.btMinus.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (Integer.parseInt(holder.btPcsCount.getText().toString()) &lt;= 1) {\r\n                        holder.llAdd.setVisibility(View.VISIBLE);\r\n                        holder.llPlusMinus.setVisibility(View.GONE);\r\n                            cartList.remove(design);\r\n                            saveSharedPref(context, &quot;cart&quot;, new Gson().toJson(cartList));\r\n                            ((Activity) context).invalidateOptionsMenu();\r\n                    } else {\r\n                        int a = Integer.parseInt(holder.btPcsCount.getText().toString());\r\n                        a--;\r\n                        holder.btPcsCount.setText(Integer.toString(a));\r\n                            cartList.remove(design);\r\n                            design.pcs = a;\r\n                            cartList.add(design);\r\n                            saveSharedPref(context, &quot;cart&quot;, new Gson().toJson(cartList));\r\n                            ((Activity) context).invalidateOptionsMenu();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        @Override\r\n        public int getItemCount() {\r\n            return designList.size();\r\n        }\r\n    \r\n        public class ViewHolder extends RecyclerView.ViewHolder {\r\n    \r\n            public LinearLayout llPer, llAdd, llPlusMinus;\r\n            public Button btPlus, btMinus, btPcsCount, btAdd;\r\n            public ImageView ivDesign;\r\n            public TextView tvDesign, tvQuality, tvShade, tvAmount, tvDiscAmt, tvDisPer;\r\n    \r\n            public ViewHolder(View itemView) {\r\n                super(itemView);\r\n    \r\n                llAdd = (LinearLayout) itemView.findViewById(R.id.llAdd);\r\n                llPlusMinus = (LinearLayout) itemView.findViewById(R.id.llPlusMinus);\r\n                btPlus = (Button) itemView.findViewById(R.id.btPlus);\r\n                btAdd = (Button) itemView.findViewById(R.id.btAdd);\r\n                //other findViewByIds\r\n            }\r\n        }\r\n    }\r\n\r\n&gt; MainActivity.java\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        private RecyclerView recyclerView;\r\n        private Single_DesignAdapter adapter;\r\n        private ArrayList&lt;Design&gt; designList;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            recyclerView = (RecyclerView) findViewById(R.id.recycler_view);\r\n        }\r\n    \r\n        @Override\r\n        protected void onResume() {\r\n            super.onResume();\r\n            designList = new ArrayList&lt;Design&gt;();\r\n            designList = list();\r\n    \r\n            /*if (cartList != null) {\r\n                String cart = getSharePref(MainActivity.this, &quot;cart&quot;);\r\n                Design[] designs = new Gson().fromJson(cart, Design[].class);\r\n                cartList = (ArrayList&lt;Design&gt;) Arrays.asList(designs);\r\n            }*/\r\n    \r\n            recyclerView.setLayoutManager(new LinearLayoutManager(MainActivity.this));\r\n            recyclerView.setHasFixedSize(true);\r\n            adapter = new Single_DesignAdapter(MainActivity.this, designList);\r\n            recyclerView.setAdapter(adapter);\r\n    \r\n            invalidateOptionsMenu();\r\n        }\r\n    \r\n        public ArrayList&lt;Design&gt; list() {\r\n            ArrayList&lt;Design&gt; arrayList = new ArrayList&lt;Design&gt;();\r\n    \r\n            Design design = new Design();\r\n            design.id = 1;\r\n            design.name = &quot;Black&quot;;\r\n            design.image = &quot;http://linksolutions.in/Demo/images/1.jpg&quot;;\r\n            design.designName = &quot;11001&quot;;\r\n            design.qualityName = &quot;Cotton&quot;;\r\n            design.amount = &quot;1000&quot;;\r\n            design.discPercent = &quot;5&quot;;\r\n    \r\n            Design design2 = new Design();\r\n            design2.id = 2;\r\n            design2.name = &quot;Green&quot;;\r\n            design2.image = &quot;http://linksolutions.in/Demo/images/2.jpg&quot;;\r\n            design2.designName = &quot;11001&quot;;\r\n            design2.qualityName = &quot;Cotton&quot;;\r\n            design2.amount = &quot;900&quot;;\r\n            design2.discPercent = &quot;9&quot;;\r\n    \r\n            Design design3 = new Design();\r\n            design3.id = 3;\r\n            design3.name = &quot;Green&quot;;\r\n            design3.image = &quot;http://linksolutions.in/Demo/images/2.jpg&quot;;\r\n            design3.designName = &quot;11002&quot;;\r\n            design3.qualityName = &quot;Satin&quot;;\r\n            design3.amount = &quot;1200&quot;;\r\n            design3.discPercent = &quot;12&quot;;\r\n    \r\n            arrayList.add(design);\r\n            arrayList.add(design2);\r\n            arrayList.add(design3);\r\n    \r\n            return arrayList;\r\n        }\r\n    \r\n        public static void setBadgeCount(Context context, LayerDrawable icon, int count) {\r\n    \r\n            BadgeDrawable badge;\r\n    \r\n            // Reuse drawable if possible\r\n            Drawable reuse = icon.findDrawableByLayerId(R.id.ic_badge);\r\n            if (reuse != null &amp;&amp; reuse instanceof BadgeDrawable) {\r\n                badge = (BadgeDrawable) reuse;\r\n            } else {\r\n                badge = new BadgeDrawable(context);\r\n            }\r\n    \r\n            badge.setCount(count);\r\n            icon.mutate();\r\n            icon.setDrawableByLayerId(R.id.ic_badge, badge);\r\n        }\r\n    \r\n        @Override\r\n        public boolean onCreateOptionsMenu(Menu menu) {\r\n    \r\n            getMenuInflater().inflate(R.menu.cart_menu, menu);\r\n            MenuItem itemCart = menu.findItem(R.id.menu_cart);\r\n            LayerDrawable icon = (LayerDrawable) itemCart.getIcon();\r\n            String list = getSharePref(MainActivity.this, &quot;cart&quot;);\r\n            if (list != null) {\r\n                Design[] designs = new Gson().fromJson(list, Design[].class);\r\n                int count = designs.length;\r\n                setBadgeCount(MainActivity.this, icon, count);\r\n            }\r\n            return super.onCreateOptionsMenu(menu);\r\n        }\r\n    \r\n        @Override\r\n        public boolean onOptionsItemSelected(MenuItem item) {\r\n            switch (item.getItemId()) {\r\n    \r\n                case R.id.menu_cart:\r\n                    Intent intent = new Intent(MainActivity.this, CheckOutActivity.class);\r\n                    startActivity(intent);\r\n                    return false;\r\n                default:\r\n                    break;\r\n            }\r\n            return false;\r\n    \r\n        }\r\n    }\r\n\r\nI thought this code will work but it didn&#39;t. Is there is any other way to tackle this please suggest.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ATpMX.png\r\n  [2]: https://i.stack.imgur.com/PX5cE.png\r\n  [3]: https://i.stack.imgur.com/8zcpK.png\r\n","title":"Add to cart design working in android","body":"<p>I am working on app which is some what similar to e-commerce app. User can add products to cart.<br>\nI have two arrayLists of mention below.</p>\n\n<pre><code>public ArrayList&lt;Design&gt; cartList = new ArrayList&lt;Design&gt;();\npublic ArrayList&lt;Design&gt; designList = new ArrayList&lt;Design&gt;(); \n</code></pre>\n\n<p>One for showing lists of products and other to save products added by user.\nI have two activity (see images) </p>\n\n<p>This activity is to show products in recyclerview. In this I have added two items in cart.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ATpMX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ATpMX.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is my second activity shows all cart items. (User can delete, increase or decrease qty from this activity also.)</p>\n\n<p><a href=\"https://i.stack.imgur.com/PX5cE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PX5cE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now What I wanted is when user comes back to first activity I wanted to compare two lists update qty(pcs) in designList from cartList. Below screenshot is of first activity when I press back or revisit. </p>\n\n<p><a href=\"https://i.stack.imgur.com/8zcpK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8zcpK.png\" alt=\"enter image description here\"></a></p>\n\n<p>This image should similar to first image. I will share my code here.</p>\n\n<blockquote>\n  <p>Design.java</p>\n</blockquote>\n\n<pre><code>public class Design implements Serializable {\n    public int id;\n    public String qualityId;\n    public String qualityName;\n    public String designId;\n    public String designName;\n    public String image;\n    public String name; //use as shade name\n    public String discPercent;\n    public String amount;\n    public int pcs; //consider quantity here.\n}\n</code></pre>\n\n<blockquote>\n  <p>Single_DesignAdapter.java</p>\n</blockquote>\n\n<pre><code>public class Single_DesignAdapter extends RecyclerView.Adapter&lt;Single_DesignAdapter.ViewHolder&gt; {\n\n    public ArrayList&lt;Design&gt; designList;\n    private Context context;\n    private LayoutInflater layoutInflater;\n    public ArrayList&lt;Design&gt; cartList = null;\n\n    public Single_DesignAdapter(Context context, ArrayList&lt;Design&gt; designList) {\n        this.designList = designList;\n        this.context = context;\n        this.layoutInflater = LayoutInflater.from(context);\n\n        if (cartList != null) {\n            String cart = getSharePref(context, \"cart\");\n            Design[] designs = new Gson().fromJson(cart, Design[].class);\n            cartList = (ArrayList&lt;Design&gt;) Arrays.asList(designs);\n        }\n    }\n\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = layoutInflater.inflate(R.layout.single_design, parent, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(final ViewHolder holder, final int position) {\n\n        final Design design = designList.get(position);\n        holder.tvQuality.setText(design.qualityName);\n        holder.tvDesign.setText(design.designName);\n        holder.tvShade.setText(design.name);\n\n        if (!design.discPercent.equals(\"0\")) {\n            holder.tvDisPer.setText(\"-\"+design.discPercent+\"%\");\n            holder.tvAmount.setPaintFlags(holder.tvAmount.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);\n            int a = Integer.parseInt(design.amount);\n            float b = Float.parseFloat(design.discPercent) / 100;\n            holder.tvAmount.setText(\"₹ \" + design.amount);\n            int c = (int) (a * b);\n            int d = a-c;\n            holder.tvDiscAmt.setText(\"₹ \" +d);\n            Picasso.with(context).load(design.image).into(holder.ivDesign);\n        } else {\n            holder.tvAmount.setText(\"₹ \" + design.amount);\n            Picasso.with(context).load(design.image).into(holder.ivDesign);\n            holder.tvDisPer.setVisibility(View.INVISIBLE);\n            holder.tvDiscAmt.setVisibility(View.INVISIBLE);\n        }\n\n        if (cartList != null) {\n            for (Design d : cartList) {\n                if (design.id == d.id) {\n                    design.pcs = d.pcs;\n                }\n            }\n        }\n\n        if (design.pcs != 0) {\n            holder.llAdd.setVisibility(View.GONE);\n            holder.llPlusMinus.setVisibility(View.VISIBLE);\n            holder.btPcsCount.setText(Integer.toString(design.pcs));\n        }\n\n        holder.btAdd.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                holder.llAdd.setVisibility(View.GONE);\n                holder.llPlusMinus.setVisibility(View.VISIBLE);\n                if (cartList != null) {\n                    if (cartList.contains(design)) {\n                        cartList.remove(design);\n                        design.pcs = 1;\n                        cartList.add(design);\n                        saveSharedPref(context, \"cart\", new Gson().toJson(cartList));\n                        ((Activity) context).invalidateOptionsMenu();\n                    } else {\n                        design.pcs = 1;\n                        cartList.add(design);\n                        saveSharedPref(context, \"cart\", new Gson().toJson(cartList));\n                        ((Activity) context).invalidateOptionsMenu();\n                    }\n                } else {\n                    cartList = new ArrayList&lt;Design&gt;(Arrays.asList(design));\n                    cartList.remove(design);\n                    design.pcs = 1;\n                    cartList.add(design);\n                    saveSharedPref(context, \"cart\", new Gson().toJson(cartList));\n                    ((Activity) context).invalidateOptionsMenu();\n                }\n            }\n        });\n\n        holder.btPlus.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if (Integer.parseInt(holder.btPcsCount.getText().toString()) &gt;= 1) {\n                    int a = Integer.parseInt(holder.btPcsCount.getText().toString());\n                    a++;\n                    holder.btPcsCount.setText(Integer.toString(a));\n                    if (cartList != null) {\n                        if (cartList.contains(design)) {\n                            cartList.remove(design);\n                            design.pcs = a;\n                            cartList.add(design);\n                            saveSharedPref(context, \"cart\", new Gson().toJson(cartList));\n                            ((Activity) context).invalidateOptionsMenu();\n                        } else {\n                            design.pcs = a;\n                            cartList.add(design);\n                            saveSharedPref(context, \"cart\", new Gson().toJson(cartList));\n                            ((Activity) context).invalidateOptionsMenu();\n                        }\n                    }\n                }\n            }\n        });\n\n        holder.btMinus.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if (Integer.parseInt(holder.btPcsCount.getText().toString()) &lt;= 1) {\n                    holder.llAdd.setVisibility(View.VISIBLE);\n                    holder.llPlusMinus.setVisibility(View.GONE);\n                        cartList.remove(design);\n                        saveSharedPref(context, \"cart\", new Gson().toJson(cartList));\n                        ((Activity) context).invalidateOptionsMenu();\n                } else {\n                    int a = Integer.parseInt(holder.btPcsCount.getText().toString());\n                    a--;\n                    holder.btPcsCount.setText(Integer.toString(a));\n                        cartList.remove(design);\n                        design.pcs = a;\n                        cartList.add(design);\n                        saveSharedPref(context, \"cart\", new Gson().toJson(cartList));\n                        ((Activity) context).invalidateOptionsMenu();\n                }\n            }\n        });\n    }\n\n    @Override\n    public int getItemCount() {\n        return designList.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n\n        public LinearLayout llPer, llAdd, llPlusMinus;\n        public Button btPlus, btMinus, btPcsCount, btAdd;\n        public ImageView ivDesign;\n        public TextView tvDesign, tvQuality, tvShade, tvAmount, tvDiscAmt, tvDisPer;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n\n            llAdd = (LinearLayout) itemView.findViewById(R.id.llAdd);\n            llPlusMinus = (LinearLayout) itemView.findViewById(R.id.llPlusMinus);\n            btPlus = (Button) itemView.findViewById(R.id.btPlus);\n            btAdd = (Button) itemView.findViewById(R.id.btAdd);\n            //other findViewByIds\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>MainActivity.java</p>\n</blockquote>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private RecyclerView recyclerView;\n    private Single_DesignAdapter adapter;\n    private ArrayList&lt;Design&gt; designList;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        recyclerView = (RecyclerView) findViewById(R.id.recycler_view);\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        designList = new ArrayList&lt;Design&gt;();\n        designList = list();\n\n        /*if (cartList != null) {\n            String cart = getSharePref(MainActivity.this, \"cart\");\n            Design[] designs = new Gson().fromJson(cart, Design[].class);\n            cartList = (ArrayList&lt;Design&gt;) Arrays.asList(designs);\n        }*/\n\n        recyclerView.setLayoutManager(new LinearLayoutManager(MainActivity.this));\n        recyclerView.setHasFixedSize(true);\n        adapter = new Single_DesignAdapter(MainActivity.this, designList);\n        recyclerView.setAdapter(adapter);\n\n        invalidateOptionsMenu();\n    }\n\n    public ArrayList&lt;Design&gt; list() {\n        ArrayList&lt;Design&gt; arrayList = new ArrayList&lt;Design&gt;();\n\n        Design design = new Design();\n        design.id = 1;\n        design.name = \"Black\";\n        design.image = \"http://linksolutions.in/Demo/images/1.jpg\";\n        design.designName = \"11001\";\n        design.qualityName = \"Cotton\";\n        design.amount = \"1000\";\n        design.discPercent = \"5\";\n\n        Design design2 = new Design();\n        design2.id = 2;\n        design2.name = \"Green\";\n        design2.image = \"http://linksolutions.in/Demo/images/2.jpg\";\n        design2.designName = \"11001\";\n        design2.qualityName = \"Cotton\";\n        design2.amount = \"900\";\n        design2.discPercent = \"9\";\n\n        Design design3 = new Design();\n        design3.id = 3;\n        design3.name = \"Green\";\n        design3.image = \"http://linksolutions.in/Demo/images/2.jpg\";\n        design3.designName = \"11002\";\n        design3.qualityName = \"Satin\";\n        design3.amount = \"1200\";\n        design3.discPercent = \"12\";\n\n        arrayList.add(design);\n        arrayList.add(design2);\n        arrayList.add(design3);\n\n        return arrayList;\n    }\n\n    public static void setBadgeCount(Context context, LayerDrawable icon, int count) {\n\n        BadgeDrawable badge;\n\n        // Reuse drawable if possible\n        Drawable reuse = icon.findDrawableByLayerId(R.id.ic_badge);\n        if (reuse != null &amp;&amp; reuse instanceof BadgeDrawable) {\n            badge = (BadgeDrawable) reuse;\n        } else {\n            badge = new BadgeDrawable(context);\n        }\n\n        badge.setCount(count);\n        icon.mutate();\n        icon.setDrawableByLayerId(R.id.ic_badge, badge);\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n\n        getMenuInflater().inflate(R.menu.cart_menu, menu);\n        MenuItem itemCart = menu.findItem(R.id.menu_cart);\n        LayerDrawable icon = (LayerDrawable) itemCart.getIcon();\n        String list = getSharePref(MainActivity.this, \"cart\");\n        if (list != null) {\n            Design[] designs = new Gson().fromJson(list, Design[].class);\n            int count = designs.length;\n            setBadgeCount(MainActivity.this, icon, count);\n        }\n        return super.onCreateOptionsMenu(menu);\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        switch (item.getItemId()) {\n\n            case R.id.menu_cart:\n                Intent intent = new Intent(MainActivity.this, CheckOutActivity.class);\n                startActivity(intent);\n                return false;\n            default:\n                break;\n        }\n        return false;\n\n    }\n}\n</code></pre>\n\n<p>I thought this code will work but it didn't. Is there is any other way to tackle this please suggest.</p>\n"},{"tags":["java","firefox","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":2824883,"reputation":3123,"user_id":2427729,"accept_rate":19,"display_name":"Sitam Jana"},"score":0,"creation_date":1400850432,"post_id":21871568,"comment_id":36665079,"body_markdown":"What version of FF and Selenium are you using?","body":"What version of FF and Selenium are you using?"},{"owner":{"account_id":139109,"reputation":7472,"user_id":344480,"accept_rate":92,"display_name":"Matthias"},"score":0,"creation_date":1400852731,"post_id":21871568,"comment_id":36666678,"body_markdown":"Just for the record: My problem were no installed fonts. Welcome to the club if `fc-match` has no output.","body":"Just for the record: My problem were no installed fonts. Welcome to the club if <code>fc-match</code> has no output."},{"owner":{"account_id":1322892,"reputation":2106,"user_id":1684778,"accept_rate":83,"display_name":"Dan"},"score":0,"creation_date":1401282022,"post_id":21871568,"comment_id":36822202,"body_markdown":"@Matthias i also solved already, by installing fonts","body":"@Matthias i also solved already, by installing fonts"},{"owner":{"account_id":1625203,"reputation":4768,"user_id":1500898,"accept_rate":77,"display_name":"batman"},"score":0,"creation_date":1404966105,"post_id":21871568,"comment_id":38243792,"body_markdown":"What version your using?","body":"What version your using?"},{"owner":{"account_id":1322892,"reputation":2106,"user_id":1684778,"accept_rate":83,"display_name":"Dan"},"score":0,"creation_date":1405426890,"post_id":21871568,"comment_id":38413350,"body_markdown":"@batman forget now. i solve it that time by doing something , I think latest selenium i was using","body":"@batman forget now. i solve it that time by doing something , I think latest selenium i was using"}],"answers":[{"comments":[{"owner":{"account_id":1322892,"reputation":2106,"user_id":1684778,"accept_rate":83,"display_name":"Dan"},"score":0,"creation_date":1409335265,"post_id":25564753,"comment_id":39940604,"body_markdown":"@i tried this installing the things which you are pointing but still could not ..","body":"@i tried this installing the things which you are pointing but still could not .."}],"tags":[],"owner":{"account_id":139109,"reputation":7472,"user_id":344480,"accept_rate":92,"display_name":"Matthias"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1409302001,"creation_date":1409302001,"answer_id":25564753,"question_id":21871568,"body_markdown":"Referring to my last comment, the log message `&quot;RANDR&quot; missing on display &quot;:99&quot;` is often not a problem. Check if you have installed any fonts, running `fc-match`. Otherwise, your Firefox won&#39;t start and therefore the WebDriver won&#39;t be able to connect.\r\n\r\n    org.openqa.selenium.firefox.NotConnectedException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms.","title":"Xlib: extension &quot;RANDR&quot; missing on display &quot;:99&quot;","body":"<p>Referring to my last comment, the log message <code>\"RANDR\" missing on display \":99\"</code> is often not a problem. Check if you have installed any fonts, running <code>fc-match</code>. Otherwise, your Firefox won't start and therefore the WebDriver won't be able to connect.</p>\n\n<pre><code>org.openqa.selenium.firefox.NotConnectedException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519634825,"creation_date":1519634825,"answer_id":48984485,"question_id":21871568,"body_markdown":"create a bash script file and put the following code. Run this file before running test.\r\n\r\n    #!/usr/bin/env bash\r\n    ##script to install the necessary dependency for headless firefox browser\r\n    remove_Xvfb (){\r\n    kill -9 $(ps -ef | grep [X]vfb | awk &#39;{print $2}&#39;)\r\n    }\r\n    remove_screenLock (){\r\n    Xvfb :3000 -screen 0 1024x768x16 &amp;\r\n    file=&quot;/tmp/.X3000-lock&quot;\r\n    if [ -f &quot;$file&quot; ]; then\r\n        echo &quot;Screen Exits..removing it and installing it again&quot;\r\n        sudo rm -rf &quot;$file&quot;\r\n        export DISPLAY=:3000\r\n    else\r\n        echo &quot;Screen Does not Exists....Creating one&quot;\r\n        export DISPLAY=:3000\r\n    fi\r\n    }\r\n    yum install -y xdg-utils xorg-x11-server-Xvfb fontconfig freetype freetype-devel fontconfig-devel libstdc++ Xvfb firefox\r\n    sudo ln -s /usr/lib64/firefox/firefox /usr/bin/firefox\r\n    running=`ps ax | grep -v grep | grep Xvfb | wc -l`\r\n    if [ $running -gt 0 ]; then\r\n        echo &quot; Xvfb is running, removing it&quot;\r\n        remove_Xvfb\r\n        remove_screenLock\r\n    else\r\n        remove_screenLock\r\n    fi\r\nThis will create a virtual display for your UI bases test cases with firefox browser.","title":"Xlib: extension &quot;RANDR&quot; missing on display &quot;:99&quot;","body":"<p>create a bash script file and put the following code. Run this file before running test.</p>\n\n<pre><code>#!/usr/bin/env bash\n##script to install the necessary dependency for headless firefox browser\nremove_Xvfb (){\nkill -9 $(ps -ef | grep [X]vfb | awk '{print $2}')\n}\nremove_screenLock (){\nXvfb :3000 -screen 0 1024x768x16 &amp;\nfile=\"/tmp/.X3000-lock\"\nif [ -f \"$file\" ]; then\n    echo \"Screen Exits..removing it and installing it again\"\n    sudo rm -rf \"$file\"\n    export DISPLAY=:3000\nelse\n    echo \"Screen Does not Exists....Creating one\"\n    export DISPLAY=:3000\nfi\n}\nyum install -y xdg-utils xorg-x11-server-Xvfb fontconfig freetype freetype-devel fontconfig-devel libstdc++ Xvfb firefox\nsudo ln -s /usr/lib64/firefox/firefox /usr/bin/firefox\nrunning=`ps ax | grep -v grep | grep Xvfb | wc -l`\nif [ $running -gt 0 ]; then\n    echo \" Xvfb is running, removing it\"\n    remove_Xvfb\n    remove_screenLock\nelse\n    remove_screenLock\nfi\n</code></pre>\n\n<p>This will create a virtual display for your UI bases test cases with firefox browser.</p>\n"}],"owner":{"account_id":1322892,"reputation":2106,"user_id":1684778,"accept_rate":83,"display_name":"Dan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8274,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"answer_count":2,"score":8,"last_activity_date":1696662205,"creation_date":1392786503,"question_id":21871568,"body_markdown":"I have run into an issue. Whenever I run my test class it is showing the following error:  \r\n\r\n    Testsuite: com.lo.test.selenium.AssignCampaignTestCase\r\n\tTests run: 1, Failures: 0, Errors: 1, Time elapsed: 46.991 sec\r\n\t------------- Standard Error -----------------\r\n\torg.openqa.selenium.firefox.NotConnectedException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms. Firefox console output:\r\n\tXlib:  extension &quot;RANDR&quot; missing on display &quot;:99&quot;.\r\n\t*** LOG addons.manager: Application has been upgraded\r\n\t*** LOG addons.xpi: startup\r\n\t*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: /tmp/anonymous4942696774897131989webdriver-profile/extensions/webdriver-staging\r\n\t*** LOG addons.xpi: checkForChanges\r\n\t*** LOG addons.xpi-utils: Opening database\r\n\t*** LOG addons.xpi-utils: Creating database schema\r\n\t*** LOG addons.xpi: New add-on fxdriver@googlecode.com installed in app-profile\r\n\t*** LOG addons.xpi: New add-on {972ce4c6-7e08-4474-a285-3208198ce6fd} installed in app-global\r\n\t*** LOG addons.xpi: Updating database with changes to installed add-ons\r\n\t*** LOG addons.xpi-utils: Updating add-on states\r\n\t*** LOG addons.xpi-utils: Writing add-ons list\r\n\t*** LOG addons.manager: shutdown\r\n\t*** LOG addons.xpi: shutdown\r\n\t*** LOG addons.xpi-utils: shutdown\r\n\t*** LOG addons.xpi-utils: Database closed\r\n\tXlib:  extension &quot;RANDR&quot; missing on display &quot;:99&quot;.\r\n\t*** LOG addons.xpi: startup\r\n\t*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: /tmp/anonymous4942696774897131989webdriver-profile/extensions/webdriver-staging\r\n\t*** LOG addons.xpi: checkForChanges\r\n\t*** LOG addons.xpi: No changes found\r\n\t\r\n\t        at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:109)\r\n\t        at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:245)\r\n\t        at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:109)\r\n\r\n\r\n\r\n\r\n\r\nMy test class:\r\n\r\n    package com.lo.test.selenium; \r\n\r\n\timport static org.junit.Assert.assertTrue;\r\n\timport static org.junit.Assert.fail;\r\n\t\t\r\n\timport java.util.Properties;\r\n\timport java.util.ResourceBundle;\r\n\t\t\r\n\timport javax.mail.Flags;\r\n\timport javax.mail.Folder;\r\n\timport javax.mail.Message;\r\n\timport javax.mail.MessagingException;\r\n\timport javax.mail.NoSuchProviderException;\r\n\timport javax.mail.Session;\r\n\timport javax.mail.Store; \r\n\timport org.junit.Test;\r\n\timport org.openqa.selenium.By;\r\n\timport org.openqa.selenium.WebDriver;\r\n\timport org.openqa.selenium.WebElement;\r\n\timport org.openqa.selenium.firefox.FirefoxDriver;\r\n\timport org.openqa.selenium.support.ui.ExpectedConditions;\r\n\timport org.openqa.selenium.support.ui.Select;\r\n\timport org.openqa.selenium.support.ui.WebDriverWait;\r\n     \r\n    public class MyExampleTestCase {\r\n\r\n        private static ResourceBundle rb = ResourceBundle.getBundle(&quot;global-messages&quot;);\r\n\t    \r\n        static WebDriver driver = new FirefoxDriver();  //Make it static in order to make one instance of this class(helps to avoid opening of 2 browsers at once)\r\n\r\n\t    @Test\r\n\t    public void campaignEmailTestCase() throws InterruptedException { \r\n            MyExampleTestCase emTesObj = new MyExampleTestCase ();  \r\n            String fName = &quot;test LO&quot;;\r\n            Integer LeadId = 570903;\r\n            String campaignName = &quot;2Get&quot;; \r\n            String SubjName = &quot;Welcome&quot;; //NOTE: No problem, Type without double quotes. It will work for you \r\n            \r\n            emTesObj.doLogin(); \r\n            emTesObj.goToLeadsListPage();\r\n            emTesObj.searchByFirstName(fName); //without this also,it will work but gives you the correct navigation on UI\r\n            emTesObj.waitBeforePageLoads(LeadId.toString()); //pass the Id attribute which you aspect to see after the page is loaded\r\n            emTesObj.assignCampaign(LeadId, campaignName);  \r\n            emTesObj.readRecentEmail(SubjName);  \r\n        }\r\n    }\r\n\r\n\r\n\r\n**Update:**\r\n\r\nI tried the code below but it still is showing the same error after executing this code and [also showed some error with this code][1]\r\n\r\n    Xvfb :21 -screen 0 1024x768x24 -extension RANDR &amp;\r\n\r\nLooks like this code did not run properly. Could someone please help me with this?\r\n  [1]: http://i.stack.imgur.com/qeS4j.jpg","title":"Xlib: extension &quot;RANDR&quot; missing on display &quot;:99&quot;","body":"<p>I have run into an issue. Whenever I run my test class it is showing the following error:  </p>\n\n<pre><code>Testsuite: com.lo.test.selenium.AssignCampaignTestCase\nTests run: 1, Failures: 0, Errors: 1, Time elapsed: 46.991 sec\n------------- Standard Error -----------------\norg.openqa.selenium.firefox.NotConnectedException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms. Firefox console output:\nXlib:  extension \"RANDR\" missing on display \":99\".\n*** LOG addons.manager: Application has been upgraded\n*** LOG addons.xpi: startup\n*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: /tmp/anonymous4942696774897131989webdriver-profile/extensions/webdriver-staging\n*** LOG addons.xpi: checkForChanges\n*** LOG addons.xpi-utils: Opening database\n*** LOG addons.xpi-utils: Creating database schema\n*** LOG addons.xpi: New add-on fxdriver@googlecode.com installed in app-profile\n*** LOG addons.xpi: New add-on {972ce4c6-7e08-4474-a285-3208198ce6fd} installed in app-global\n*** LOG addons.xpi: Updating database with changes to installed add-ons\n*** LOG addons.xpi-utils: Updating add-on states\n*** LOG addons.xpi-utils: Writing add-ons list\n*** LOG addons.manager: shutdown\n*** LOG addons.xpi: shutdown\n*** LOG addons.xpi-utils: shutdown\n*** LOG addons.xpi-utils: Database closed\nXlib:  extension \"RANDR\" missing on display \":99\".\n*** LOG addons.xpi: startup\n*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: /tmp/anonymous4942696774897131989webdriver-profile/extensions/webdriver-staging\n*** LOG addons.xpi: checkForChanges\n*** LOG addons.xpi: No changes found\n\n        at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:109)\n        at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:245)\n        at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:109)\n</code></pre>\n\n<p>My test class:</p>\n\n<pre><code>package com.lo.test.selenium; \n\nimport static org.junit.Assert.assertTrue;\nimport static org.junit.Assert.fail;\n\nimport java.util.Properties;\nimport java.util.ResourceBundle;\n\nimport javax.mail.Flags;\nimport javax.mail.Folder;\nimport javax.mail.Message;\nimport javax.mail.MessagingException;\nimport javax.mail.NoSuchProviderException;\nimport javax.mail.Session;\nimport javax.mail.Store; \nimport org.junit.Test;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.Select;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\npublic class MyExampleTestCase {\n\n    private static ResourceBundle rb = ResourceBundle.getBundle(\"global-messages\");\n\n    static WebDriver driver = new FirefoxDriver();  //Make it static in order to make one instance of this class(helps to avoid opening of 2 browsers at once)\n\n    @Test\n    public void campaignEmailTestCase() throws InterruptedException { \n        MyExampleTestCase emTesObj = new MyExampleTestCase ();  \n        String fName = \"test LO\";\n        Integer LeadId = 570903;\n        String campaignName = \"2Get\"; \n        String SubjName = \"Welcome\"; //NOTE: No problem, Type without double quotes. It will work for you \n\n        emTesObj.doLogin(); \n        emTesObj.goToLeadsListPage();\n        emTesObj.searchByFirstName(fName); //without this also,it will work but gives you the correct navigation on UI\n        emTesObj.waitBeforePageLoads(LeadId.toString()); //pass the Id attribute which you aspect to see after the page is loaded\n        emTesObj.assignCampaign(LeadId, campaignName);  \n        emTesObj.readRecentEmail(SubjName);  \n    }\n}\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>I tried the code below but it still is showing the same error after executing this code and <a href=\"https://i.stack.imgur.com/qeS4j.jpg\" rel=\"nofollow noreferrer\">also showed some error with this code</a></p>\n\n<pre><code>Xvfb :21 -screen 0 1024x768x24 -extension RANDR &amp;\n</code></pre>\n\n<p>Looks like this code did not run properly. Could someone please help me with this?</p>\n"},{"tags":["java","war","tomcat8"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1696500772,"post_id":77234945,"comment_id":136162224,"body_markdown":"*&quot;I might not have been clear: what I have is 2 web applications hosted on the different virtual hosts ... &quot;* - If you want to be clear, you need to explain what &gt;you&lt; mean by &quot;virtual host&quot;.  It has multiple (plausible) meanings.","body":"<i>&quot;I might not have been clear: what I have is 2 web applications hosted on the different virtual hosts ... &quot;</i> - If you want to be clear, you need to explain what &gt;you&lt; mean by &quot;virtual host&quot;.  It has multiple (plausible) meanings."},{"owner":{"account_id":21616750,"reputation":11,"user_id":15942430,"display_name":"Robert Kovacs"},"score":0,"creation_date":1696501997,"post_id":77234945,"comment_id":136162453,"body_markdown":"Ah I mean virtual host as in Virtual Hosting and Tomcat on this Tomcat page https://tomcat.apache.org/tomcat-8.0-doc/virtual-hosting-howto.html","body":"Ah I mean virtual host as in Virtual Hosting and Tomcat on this Tomcat page <a href=\"https://tomcat.apache.org/tomcat-8.0-doc/virtual-hosting-howto.html\" rel=\"nofollow noreferrer\">tomcat.apache.org/tomcat-8.0-doc/virtual-hosting-howto.html</a>"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1696505406,"post_id":77234945,"comment_id":136163073,"body_markdown":"Yes: it&#39;s possible","body":"Yes: it&#39;s possible"},{"owner":{"account_id":21616750,"reputation":11,"user_id":15942430,"display_name":"Robert Kovacs"},"score":0,"creation_date":1696516069,"post_id":77234945,"comment_id":136165621,"body_markdown":"@MauricePerry Can you elaborate on that please?","body":"@MauricePerry Can you elaborate on that please?"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1696572846,"post_id":77234945,"comment_id":136172850,"body_markdown":"@RobertKovacs well as you said: you can have your API on either virtual host (or even a third one), and both your webapps can send requests to it.","body":"@RobertKovacs well as you said: you can have your API on either virtual host (or even a third one), and both your webapps can send requests to it."}],"answers":[{"comments":[{"owner":{"account_id":21616750,"reputation":11,"user_id":15942430,"display_name":"Robert Kovacs"},"score":0,"creation_date":1696499919,"post_id":77235144,"comment_id":136162067,"body_markdown":"Thanks for this reply. However I might not have been clear. what I have is 2 web applications hosted on the different virtual hosts but they call restful APIs. Some of those APIs are common and rather than having a war module instanced in both virtual hosts is it possible to have a common instance used by both virtual hosts?\nThe only thing I could think of is having all the API war modules in one virtual host and have the other virtual host web app call API there. \nDoes that make sense?","body":"Thanks for this reply. However I might not have been clear. what I have is 2 web applications hosted on the different virtual hosts but they call restful APIs. Some of those APIs are common and rather than having a war module instanced in both virtual hosts is it possible to have a common instance used by both virtual hosts? The only thing I could think of is having all the API war modules in one virtual host and have the other virtual host web app call API there.  Does that make sense?"},{"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"score":0,"creation_date":1696510417,"post_id":77235144,"comment_id":136164182,"body_markdown":"OK maybe use a symlink","body":"OK maybe use a symlink"},{"owner":{"account_id":21616750,"reputation":11,"user_id":15942430,"display_name":"Robert Kovacs"},"score":0,"creation_date":1696516598,"post_id":77235144,"comment_id":136165750,"body_markdown":"Can you elaborate on how the symlink would work in this case? I do not think that would work as I only want 1 instance of the war running I do not believe a symlink would stop that.","body":"Can you elaborate on how the symlink would work in this case? I do not think that would work as I only want 1 instance of the war running I do not believe a symlink would stop that."}],"tags":[],"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1696492058,"creation_date":1696492058,"answer_id":77235144,"question_id":77234945,"body_markdown":"In tomcat you don&#39;t have .ear like in JEE server that can do complexe sharing.\r\nIt&#39;s more simple :\r\n   \r\n\r\n          Bootstrap\r\n              |\r\n           System\r\n              |\r\n           Common\r\n           /     \\\r\n      Webapp1   Webapp2 ...\r\n\r\nSo you can put .jar files in &quot;Common&quot; to copy jar files in $CATALINA_BASE/lib and you can remove them from .war files.  ","title":"Shared war between virtual hosts","body":"<p>In tomcat you don't have .ear like in JEE server that can do complexe sharing.\nIt's more simple :</p>\n<pre><code>      Bootstrap\n          |\n       System\n          |\n       Common\n       /     \\\n  Webapp1   Webapp2 ...\n</code></pre>\n<p>So you can put .jar files in &quot;Common&quot; to copy jar files in $CATALINA_BASE/lib and you can remove them from .war files.</p>\n"},{"tags":[],"owner":{"account_id":21616750,"reputation":11,"user_id":15942430,"display_name":"Robert Kovacs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696662081,"creation_date":1696662081,"answer_id":77248738,"question_id":77234945,"body_markdown":"So the solution I have adopted is to have the 2 web apps to call a common url for all api calls.\r\n\r\nSo I will have virtualhost domain1 hosting its own angular web components and the backend server modules.\r\n\r\nVirtualhost domain2 will hostonly its angular web components and make calls to the backend server modules using the domain1 url.\r\n\r\nThanks go to @mauriceperry for confirming  this idea.","title":"Shared war between virtual hosts","body":"<p>So the solution I have adopted is to have the 2 web apps to call a common url for all api calls.</p>\n<p>So I will have virtualhost domain1 hosting its own angular web components and the backend server modules.</p>\n<p>Virtualhost domain2 will hostonly its angular web components and make calls to the backend server modules using the domain1 url.</p>\n<p>Thanks go to @mauriceperry for confirming  this idea.</p>\n"}],"owner":{"account_id":21616750,"reputation":11,"user_id":15942430,"display_name":"Robert Kovacs"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77248738,"answer_count":2,"score":0,"last_activity_date":1696662081,"creation_date":1696490278,"question_id":77234945,"body_markdown":"I am running Tomcat 8.5 on a windows server. I have setup a virtual host in the server.xml so that I now have domain1.com which goes to the defaultapp and domain2.com which goes to the virtual host. This works fine.\r\n\r\nThe 2 domains have different web apps but share some of the Java war modules. Is it possible to share these so that they are loaded only once and not twice for each host?\r\n\r\nI might not have been clear: what I have is 2 web applications hosted on the different virtual hosts but they call restful APIs. \r\n\r\nSome of those APIs are common and rather than having a war module instanced in both virtual hosts is it possible to have a common instance used by both virtual hosts?\r\n\r\nThe only thing I could think of is having all the API war modules in one virtual host and have the other virtual host web app call API there. \r\n\r\nDoes that make sense? Is there an alternative?\r\n\r\nEDIT: To be clearer a virtual host refers to Virtual Hosting and Tomcat on this page https://tomcat.apache.org/tomcat-8.0-doc/virtual-hosting-howto.html\r\n","title":"Shared war between virtual hosts","body":"<p>I am running Tomcat 8.5 on a windows server. I have setup a virtual host in the server.xml so that I now have domain1.com which goes to the defaultapp and domain2.com which goes to the virtual host. This works fine.</p>\n<p>The 2 domains have different web apps but share some of the Java war modules. Is it possible to share these so that they are loaded only once and not twice for each host?</p>\n<p>I might not have been clear: what I have is 2 web applications hosted on the different virtual hosts but they call restful APIs.</p>\n<p>Some of those APIs are common and rather than having a war module instanced in both virtual hosts is it possible to have a common instance used by both virtual hosts?</p>\n<p>The only thing I could think of is having all the API war modules in one virtual host and have the other virtual host web app call API there.</p>\n<p>Does that make sense? Is there an alternative?</p>\n<p>EDIT: To be clearer a virtual host refers to Virtual Hosting and Tomcat on this page <a href=\"https://tomcat.apache.org/tomcat-8.0-doc/virtual-hosting-howto.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-8.0-doc/virtual-hosting-howto.html</a></p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1696604206,"post_id":77244842,"comment_id":136178803,"body_markdown":"I think [in-app updates](https://developer.android.com/guide/playcore/in-app-updates) are your only option for this. Of course, the device itself cannot be offline or Google Play won&#39;t detect new updates either.","body":"I think <a href=\"https://developer.android.com/guide/playcore/in-app-updates\" rel=\"nofollow noreferrer\">in-app updates</a> are your only option for this. Of course, the device itself cannot be offline or Google Play won&#39;t detect new updates either."}],"answers":[{"tags":[],"owner":{"account_id":29439484,"reputation":94,"user_id":22557788,"display_name":"Davit Hovhannisyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696662027,"creation_date":1696662027,"answer_id":77248734,"question_id":77244842,"body_markdown":"Implementing push notifications in an Android app requires several steps. You&#39;ll need to set up a push notification service (e.g., Firebase Cloud Messaging, OneSignal, or your own server), integrate it with your Android app, and send notifications from your server or a web interface. Here&#39;s a basic outline of how to implement the first option using Firebase Cloud Messaging (FCM) in Android using Java:\r\n\r\nSet up Firebase Project:\r\n\r\nGo to the Firebase Console (https://console.firebase.google.com/).\r\nCreate a new Firebase project or use an existing one.\r\nAdd your Android app to the Firebase project, and follow the setup instructions to download the google-services.json configuration file.\r\nAdd Firebase to Your Android App:\r\n\r\nIn your Android Studio project, add the Firebase SDK by including the google-services Gradle plugin and the Firebase Cloud Messaging dependency in your app&#39;s build.gradle file:\r\n\r\nGradle :\r\n\r\n    // Add the following to the top-level build.gradle file\r\n    classpath &#39;com.google.gms:google-services:4.3.10&#39;\r\n    \r\n    // Add the following to your app-level build.gradle file\r\n    implementation &#39;com.google.firebase:firebase-messaging:22.0.0&#39;\r\n\r\nApply the Google Services Plugin:\r\n\r\nIn your app-level build.gradle file, apply the Google Services plugin at the bottom of the file:\r\n\r\n    apply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\nIn your app&#39;s main Application class or the onCreate method of your main activity, initialize Firebase:\r\n\r\n    import com.google.firebase.FirebaseApp;\r\n    \r\n    public class MyApplication extends Application {\r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n            FirebaseApp.initializeApp(this);\r\n        }\r\n\r\n}\r\n\r\nImplement a service that extends FirebaseMessagingService to receive and handle incoming push notifications. Override the onMessageReceived method to customize how you handle notifications when your app is in the foreground:\r\n\r\n    import com.google.firebase.messaging.FirebaseMessagingService;\r\n    import com.google.firebase.messaging.RemoteMessage;\r\n    \r\n    public class MyFirebaseMessagingService extends FirebaseMessagingService {\r\n        @Override\r\n        public void onMessageReceived(RemoteMessage remoteMessage) {\r\n            // Handle incoming push notifications here.\r\n            // You can display a notification or perform custom actions.\r\n        }\r\n    }\r\n\r\nRegister the Service in AndroidManifest.xml:\r\n\r\nAdd your MyFirebaseMessagingService to the AndroidManifest.xml file:\r\n\r\n    &lt;service\r\n        android:name=&quot;.MyFirebaseMessagingService&quot;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;com.google.firebase.MESSAGING_EVENT&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/service\r\n\r\n\r\n\r\n&gt;\r\n\r\n\r\n\r\n\r\n","title":"Is there any possible way to notify large number of users about latest update in Android?","body":"<p>Implementing push notifications in an Android app requires several steps. You'll need to set up a push notification service (e.g., Firebase Cloud Messaging, OneSignal, or your own server), integrate it with your Android app, and send notifications from your server or a web interface. Here's a basic outline of how to implement the first option using Firebase Cloud Messaging (FCM) in Android using Java:</p>\n<p>Set up Firebase Project:</p>\n<p>Go to the Firebase Console (<a href=\"https://console.firebase.google.com/\" rel=\"nofollow noreferrer\">https://console.firebase.google.com/</a>).\nCreate a new Firebase project or use an existing one.\nAdd your Android app to the Firebase project, and follow the setup instructions to download the google-services.json configuration file.\nAdd Firebase to Your Android App:</p>\n<p>In your Android Studio project, add the Firebase SDK by including the google-services Gradle plugin and the Firebase Cloud Messaging dependency in your app's build.gradle file:</p>\n<p>Gradle :</p>\n<pre><code>// Add the following to the top-level build.gradle file\nclasspath 'com.google.gms:google-services:4.3.10'\n\n// Add the following to your app-level build.gradle file\nimplementation 'com.google.firebase:firebase-messaging:22.0.0'\n</code></pre>\n<p>Apply the Google Services Plugin:</p>\n<p>In your app-level build.gradle file, apply the Google Services plugin at the bottom of the file:</p>\n<pre><code>apply plugin: 'com.google.gms.google-services'\n</code></pre>\n<p>In your app's main Application class or the onCreate method of your main activity, initialize Firebase:</p>\n<pre><code>import com.google.firebase.FirebaseApp;\n\npublic class MyApplication extends Application {\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        FirebaseApp.initializeApp(this);\n    }\n</code></pre>\n<p>}</p>\n<p>Implement a service that extends FirebaseMessagingService to receive and handle incoming push notifications. Override the onMessageReceived method to customize how you handle notifications when your app is in the foreground:</p>\n<pre><code>import com.google.firebase.messaging.FirebaseMessagingService;\nimport com.google.firebase.messaging.RemoteMessage;\n\npublic class MyFirebaseMessagingService extends FirebaseMessagingService {\n    @Override\n    public void onMessageReceived(RemoteMessage remoteMessage) {\n        // Handle incoming push notifications here.\n        // You can display a notification or perform custom actions.\n    }\n}\n</code></pre>\n<p>Register the Service in AndroidManifest.xml:</p>\n<p>Add your MyFirebaseMessagingService to the AndroidManifest.xml file:</p>\n<pre><code>&lt;service\n    android:name=&quot;.MyFirebaseMessagingService&quot;&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=&quot;com.google.firebase.MESSAGING_EVENT&quot; /&gt;\n    &lt;/intent-filter&gt;\n&lt;/service\n</code></pre>\n<blockquote>\n</blockquote>\n"}],"owner":{"account_id":29002776,"reputation":11,"user_id":22216025,"display_name":"Karthiga Ganesan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1696662027,"creation_date":1696598697,"question_id":77244842,"body_markdown":"**Problem**:\r\n\r\nHere I want to notify about latest update to users. In present we are using API call in splash screen to show the update to users . But the problem is , in our application we have support offline usage , so users can navigate all other pagers , so we couldn&#39;t update to users.\r\n\r\nIs there any solution to get updated data from anywhere without API call and show to users when they are in any pages?\r\n\r\nImportant: \r\nI don&#39;t prefer API calling in every pages for this updated because it will affect app performance , in our project we have more than 40 pages and 10000 users.\r\n\r\n\r\n\r\nWe are storing updated data in web config and get that data using API call in landing screen.\r\n\r\nIs there any solution to get updated data from anywhere without API call and show to users when they are in any pages?","title":"Is there any possible way to notify large number of users about latest update in Android?","body":"<p><strong>Problem</strong>:</p>\n<p>Here I want to notify about latest update to users. In present we are using API call in splash screen to show the update to users . But the problem is , in our application we have support offline usage , so users can navigate all other pagers , so we couldn't update to users.</p>\n<p>Is there any solution to get updated data from anywhere without API call and show to users when they are in any pages?</p>\n<p>Important:\nI don't prefer API calling in every pages for this updated because it will affect app performance , in our project we have more than 40 pages and 10000 users.</p>\n<p>We are storing updated data in web config and get that data using API call in landing screen.</p>\n<p>Is there any solution to get updated data from anywhere without API call and show to users when they are in any pages?</p>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1696659735,"post_id":77248572,"comment_id":136184602,"body_markdown":"When you say &quot;it didn&#39;t work&quot;, what specifically do you mean?  What error are you getting?","body":"When you say &quot;it didn&#39;t work&quot;, what specifically do you mean?  What error are you getting?"},{"owner":{"account_id":24658497,"reputation":33,"user_id":18554958,"display_name":"icyrla"},"score":0,"creation_date":1696660280,"post_id":77248572,"comment_id":136184638,"body_markdown":"It says &quot;Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem:\n        Unhandled exception type Exception&quot;","body":"It says &quot;Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem:         Unhandled exception type Exception&quot;"}],"answers":[{"tags":[],"owner":{"account_id":22093934,"reputation":448,"user_id":16351561,"display_name":"AndreaCavallo.class"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696659395,"creation_date":1696659395,"answer_id":77248613,"question_id":77248572,"body_markdown":"use : `IllegalArgumentException` is a Runtime exception \r\n\r\n    public MyMatrix addMatrix(MyMatrix matB) {\r\n        if (myR != matB.myR || myC != matB.myC) {\r\n            throw new IllegalArgumentException(&quot;Matrices must have the same number of rows and columns to be added.&quot;);\r\n        }\r\n        MyMatrix res = new MyMatrix(&quot;&quot;, myR, myC, 0.0);\r\n        for (int i = 0; i &lt; myR; i++) {\r\n            for (int j = 0; j &lt; myC; j++) {\r\n                res.myElements[i][j] = myElements[i][j] + matB.myElements[i][j];\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n","title":"making an exception in java","body":"<p>use : <code>IllegalArgumentException</code> is a Runtime exception</p>\n<pre><code>public MyMatrix addMatrix(MyMatrix matB) {\n    if (myR != matB.myR || myC != matB.myC) {\n        throw new IllegalArgumentException(&quot;Matrices must have the same number of rows and columns to be added.&quot;);\n    }\n    MyMatrix res = new MyMatrix(&quot;&quot;, myR, myC, 0.0);\n    for (int i = 0; i &lt; myR; i++) {\n        for (int j = 0; j &lt; myC; j++) {\n            res.myElements[i][j] = myElements[i][j] + matB.myElements[i][j];\n        }\n    }\n    return res;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696661346,"creation_date":1696661346,"answer_id":77248701,"question_id":77248572,"body_markdown":"[`Exception`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html) is an checked exception type, as it does not extend either [`RuntimeException`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/RuntimeException.html) or [`Error`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Error.html).  Therefore, it needs to be declared in the throws clause of the method signature.  Alternatively, an unchecked exception type such as [`IllegalArgumentException`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html) could be thrown.\r\n\r\n```lang-java\r\npublic MyMatrix addMatrix(MyMatrix matB) throws Exception {\r\n        if (myR != matB.myR || myC != matB.myC) throw new Exception();\r\n\r\n        MyMatrix res = new MyMatrix(&quot;&quot;, myR, myC, 0.0);\r\n        // ...\r\n        return res;\r\n}\r\n```\r\n\r\nor\r\n\r\n```lang-java\r\npublic MyMatrix addMatrix(MyMatrix matB) {\r\n        if (myR != matB.myR || myC != matB.myC) throw new IllegalArgumentException();\r\n\r\n        MyMatrix res = new MyMatrix(&quot;&quot;, myR, myC, 0.0);\r\n        // ...\r\n        return res;\r\n}\r\n```\r\n\r\nPer the [Java Language Specification](https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html):\r\n\r\n&gt; ## 11.1.1. The Kinds of Exceptions\r\n&gt; […]\r\n&gt; \r\n&gt; The _unchecked exception classes_ are the run-time exception classes and the error classes.\r\n&gt;\r\n&gt; The _checked exception classes_ are all exception classes other than the unchecked exception classes. That is, the checked exception classes are `Throwable` and all its subclasses other than `RuntimeException` and its subclasses and `Error` and its subclasses.\r\n&gt;\r\n&gt; […]\r\n&gt;\r\n&gt; # 11.2. Compile-Time Checking of Exceptions\r\n&gt;\r\n&gt; The Java programming language requires that a program contains handlers for _checked exceptions_ which can result from execution of a method or constructor ([&#167;8.4.6](https://docs.oracle.com/javase/specs/jls/se21/html/jls-8.html#jls-8.4.6 &quot;8.4.6.&#160;Method Throws&quot;), [&#167;8.8.5](https://docs.oracle.com/javase/specs/jls/se21/html/jls-8.html#jls-8.8.5 &quot;8.8.5.&#160;Constructor Throws&quot;)). This compile-time checking for the presence of exception handlers is designed to reduce the number of exceptions which are not properly handled. For each checked exception which is a possible result, the `throws` clause for the method or constructor must mention the class of that exception or one of the superclasses of the class of that exception ([&#167;11.2.3](https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html#jls-11.2.3 &quot;11.2.3.&#160;Exception Checking&quot;)).\r\n&gt;\r\n&gt; […]\r\n&gt; The unchecked exception classes ([&#167;11.1.1](https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html#jls-11.1.1 &quot;11.1.1.&#160;The Kinds of Exceptions&quot;)) are exempted from compile-time checking.","title":"making an exception in java","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html\" rel=\"nofollow noreferrer\"><code>Exception</code></a> is an checked exception type, as it does not extend either <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/RuntimeException.html\" rel=\"nofollow noreferrer\"><code>RuntimeException</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Error.html\" rel=\"nofollow noreferrer\"><code>Error</code></a>.  Therefore, it needs to be declared in the throws clause of the method signature.  Alternatively, an unchecked exception type such as <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html\" rel=\"nofollow noreferrer\"><code>IllegalArgumentException</code></a> could be thrown.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public MyMatrix addMatrix(MyMatrix matB) throws Exception {\n        if (myR != matB.myR || myC != matB.myC) throw new Exception();\n\n        MyMatrix res = new MyMatrix(&quot;&quot;, myR, myC, 0.0);\n        // ...\n        return res;\n}\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>public MyMatrix addMatrix(MyMatrix matB) {\n        if (myR != matB.myR || myC != matB.myC) throw new IllegalArgumentException();\n\n        MyMatrix res = new MyMatrix(&quot;&quot;, myR, myC, 0.0);\n        // ...\n        return res;\n}\n</code></pre>\n<p>Per the <a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html\" rel=\"nofollow noreferrer\">Java Language Specification</a>:</p>\n<blockquote>\n<h2>11.1.1. The Kinds of Exceptions</h2>\n<p>[…]</p>\n<p>The <em>unchecked exception classes</em> are the run-time exception classes and the error classes.</p>\n<p>The <em>checked exception classes</em> are all exception classes other than the unchecked exception classes. That is, the checked exception classes are <code>Throwable</code> and all its subclasses other than <code>RuntimeException</code> and its subclasses and <code>Error</code> and its subclasses.</p>\n<p>[…]</p>\n<h1>11.2. Compile-Time Checking of Exceptions</h1>\n<p>The Java programming language requires that a program contains handlers for <em>checked exceptions</em> which can result from execution of a method or constructor (<a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-8.html#jls-8.4.6\" rel=\"nofollow noreferrer\" title=\"8.4.6. Method Throws\">§8.4.6</a>, <a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-8.html#jls-8.8.5\" rel=\"nofollow noreferrer\" title=\"8.8.5. Constructor Throws\">§8.8.5</a>). This compile-time checking for the presence of exception handlers is designed to reduce the number of exceptions which are not properly handled. For each checked exception which is a possible result, the <code>throws</code> clause for the method or constructor must mention the class of that exception or one of the superclasses of the class of that exception (<a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html#jls-11.2.3\" rel=\"nofollow noreferrer\" title=\"11.2.3. Exception Checking\">§11.2.3</a>).</p>\n<p>[…]\nThe unchecked exception classes (<a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html#jls-11.1.1\" rel=\"nofollow noreferrer\" title=\"11.1.1. The Kinds of Exceptions\">§11.1.1</a>) are exempted from compile-time checking.</p>\n</blockquote>\n"}],"owner":{"account_id":24658497,"reputation":33,"user_id":18554958,"display_name":"icyrla"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1696664612,"accepted_answer_id":77248613,"answer_count":2,"score":0,"last_activity_date":1696661346,"creation_date":1696658773,"question_id":77248572,"body_markdown":"I am creating a matrix class in java, and the following is the method for adding two matrices.\r\n\r\n```\r\npublic MyMatrix addMatrix(MyMatrix matB) {\r\n        // if (myR != matB.myR || myC != matB.myC) throw an exception\r\n        MyMatrix res = new MyMatrix(&quot;&quot;, myR, myC, 0.0);\r\n        for (int i = 0; i &lt; myR; i++) {\r\n            for (int j = 0; j &lt; myC; j++) {\r\n                res.myElements[i][j] = myElements[i][j] + matB.myElements[i][j];\r\n            }\r\n        }\r\n        return res;\r\n}\r\n```\r\nmyR is the number of rows and myC is the number of columns in the MyMatrix class.\r\nI want to throw an exception if the number of rows or columns of two matrices are different.\r\nHow can I throw an exception in the simplest way possible, without having to create a custom exception or anything else?\r\n\r\n\r\n\r\nI tried\r\n`if (myR != matB.myR || myC != matB.myC) throw new Exception();`\r\nbut it didn&#39;t work.  Specifically, it is giving the error &quot;main&quot; java.lang.Error: Unresolved compilation problem: Unhandled exception type Exception&quot;.","title":"making an exception in java","body":"<p>I am creating a matrix class in java, and the following is the method for adding two matrices.</p>\n<pre><code>public MyMatrix addMatrix(MyMatrix matB) {\n        // if (myR != matB.myR || myC != matB.myC) throw an exception\n        MyMatrix res = new MyMatrix(&quot;&quot;, myR, myC, 0.0);\n        for (int i = 0; i &lt; myR; i++) {\n            for (int j = 0; j &lt; myC; j++) {\n                res.myElements[i][j] = myElements[i][j] + matB.myElements[i][j];\n            }\n        }\n        return res;\n}\n</code></pre>\n<p>myR is the number of rows and myC is the number of columns in the MyMatrix class.\nI want to throw an exception if the number of rows or columns of two matrices are different.\nHow can I throw an exception in the simplest way possible, without having to create a custom exception or anything else?</p>\n<p>I tried\n<code>if (myR != matB.myR || myC != matB.myC) throw new Exception();</code>\nbut it didn't work.  Specifically, it is giving the error &quot;main&quot; java.lang.Error: Unresolved compilation problem: Unhandled exception type Exception&quot;.</p>\n"},{"tags":["java","spring","spring-boot","rest"],"answers":[{"comments":[{"owner":{"account_id":1827342,"reputation":195,"user_id":1659690,"accept_rate":62,"display_name":"Naresh Kavala"},"score":0,"creation_date":1697877826,"post_id":77248671,"comment_id":136336958,"body_markdown":"Thanks, this has given me a direction.","body":"Thanks, this has given me a direction."}],"tags":[],"owner":{"account_id":22093934,"reputation":448,"user_id":16351561,"display_name":"AndreaCavallo.class"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696660833,"creation_date":1696660833,"answer_id":77248671,"question_id":77243518,"body_markdown":"Use a Filter to capture incoming headers and store them in a ThreadLocal variable.\r\n\r\nUse the **ThreadLocal** variable within the **ClientHttpRequestInterceptor** to get the incoming header and add it to the outgoing request.\r\n\r\nCapture the response header in **ClientHttpRequestInterceptor** and store it back in a **ThreadLocal**.\r\n\r\nUse an **Interceptor or Aspect** to set the response header based on the ThreadLocal variable before the response is sent back.\r\n\r\n\r\n    public class HeaderCapturingFilter extends OncePerRequestFilter {\r\n        public static final ThreadLocal&lt;String&gt; incomingHeader = ThreadLocal.withInitial(() -&gt; &quot;&quot;);\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request,\r\n                                        HttpServletResponse response,\r\n                                        FilterChain filterChain) throws ServletException, IOException {\r\n            incomingHeader.set(request.getHeader(&quot;Your-Incoming-Header-Name&quot;));\r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\n","title":"Add header through intermediate micro service with Spring Boot and Rest Template","body":"<p>Use a Filter to capture incoming headers and store them in a ThreadLocal variable.</p>\n<p>Use the <strong>ThreadLocal</strong> variable within the <strong>ClientHttpRequestInterceptor</strong> to get the incoming header and add it to the outgoing request.</p>\n<p>Capture the response header in <strong>ClientHttpRequestInterceptor</strong> and store it back in a <strong>ThreadLocal</strong>.</p>\n<p>Use an <strong>Interceptor or Aspect</strong> to set the response header based on the ThreadLocal variable before the response is sent back.</p>\n<pre><code>public class HeaderCapturingFilter extends OncePerRequestFilter {\n    public static final ThreadLocal&lt;String&gt; incomingHeader = ThreadLocal.withInitial(() -&gt; &quot;&quot;);\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request,\n                                    HttpServletResponse response,\n                                    FilterChain filterChain) throws ServletException, IOException {\n        incomingHeader.set(request.getHeader(&quot;Your-Incoming-Header-Name&quot;));\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1827342,"reputation":195,"user_id":1659690,"accept_rate":62,"display_name":"Naresh Kavala"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77248671,"answer_count":1,"score":0,"last_activity_date":1696660833,"creation_date":1696586386,"question_id":77243518,"body_markdown":"In my spring-boot application, I have several endpoints, invoking them will send these requests to another application with RestTemplate and returns the response to the client application. My requirement is to extract an header from client service and send to target service and extract another header from target service response and set to the client&#39;s response.\r\nI am not able to achieve this with ClientHttpRequestInterceptor due to below code structure,\r\n\r\nController:  \r\n\r\n    public ResponseEntity&lt;EntityResponse&gt; checkValidity(RequestEntity request){\r\n            ResponseDTO response =\r\n                entityService.checkValidity(request);\r\n            return ResponseEntity.ok(response);\r\n          }\r\nentityService.checkValidity(request) is invoking a json rpc method of target application.\r\n\r\nI created an interceptor and attached to my RestTemplate, which is getting invoked properly.\r\n\r\n        public class HeaderModifierInterceptor implements ClientHttpRequestInterceptor {\r\n        \r\n          ClientHttpRequestInterceptor {\r\n    \r\n      @Override\r\n      public ClientHttpResponse intercept(\r\n          @NonNull HttpRequest request,\r\n          byte @NonNull [] body,\r\n          @NonNull ClientHttpRequestExecution execution)\r\n          throws IOException {\r\n    if(check to if header present in incoming request) // this is never true as I am losing the header by the time request reaches here\r\n       request.getHeaders().add(key, value);\r\n        ClientHttpResponse response = execution.execute(request, body);\r\n    if(check to if header present in response)\r\n       response.getHeaders().add(key, value);\r\n        }\r\n        return response;\r\n      }\r\n    }\r\n\r\nSo, I am losing the incoming header by the time it reaches the interceptor and outgoing header by the time it reaches the controller as we are only converting the bodies in the transition.\r\n\r\nIs there any way that I can capture incoming header from client app and response header from target app during this transition?\r\nNote: My application does not maintain the session state to preserve values. ","title":"Add header through intermediate micro service with Spring Boot and Rest Template","body":"<p>In my spring-boot application, I have several endpoints, invoking them will send these requests to another application with RestTemplate and returns the response to the client application. My requirement is to extract an header from client service and send to target service and extract another header from target service response and set to the client's response.\nI am not able to achieve this with ClientHttpRequestInterceptor due to below code structure,</p>\n<p>Controller:</p>\n<pre><code>public ResponseEntity&lt;EntityResponse&gt; checkValidity(RequestEntity request){\n        ResponseDTO response =\n            entityService.checkValidity(request);\n        return ResponseEntity.ok(response);\n      }\n</code></pre>\n<p>entityService.checkValidity(request) is invoking a json rpc method of target application.</p>\n<p>I created an interceptor and attached to my RestTemplate, which is getting invoked properly.</p>\n<pre><code>    public class HeaderModifierInterceptor implements ClientHttpRequestInterceptor {\n    \n      ClientHttpRequestInterceptor {\n\n  @Override\n  public ClientHttpResponse intercept(\n      @NonNull HttpRequest request,\n      byte @NonNull [] body,\n      @NonNull ClientHttpRequestExecution execution)\n      throws IOException {\nif(check to if header present in incoming request) // this is never true as I am losing the header by the time request reaches here\n   request.getHeaders().add(key, value);\n    ClientHttpResponse response = execution.execute(request, body);\nif(check to if header present in response)\n   response.getHeaders().add(key, value);\n    }\n    return response;\n  }\n}\n</code></pre>\n<p>So, I am losing the incoming header by the time it reaches the interceptor and outgoing header by the time it reaches the controller as we are only converting the bodies in the transition.</p>\n<p>Is there any way that I can capture incoming header from client app and response header from target app during this transition?\nNote: My application does not maintain the session state to preserve values.</p>\n"},{"tags":["java","spring-boot","junit","jackson","yaml"],"comments":[{"owner":{"account_id":274366,"reputation":1144,"user_id":566556,"display_name":"Knut Forkalsrud"},"score":0,"creation_date":1696635714,"post_id":77247178,"comment_id":136183292,"body_markdown":"If you have a given `objectToSerialize` and know what the serialized output should look like...  Just assert away.  Not mocking or special support classes needed.","body":"If you have a given <code>objectToSerialize</code> and know what the serialized output should look like...  Just assert away.  Not mocking or special support classes needed."},{"owner":{"account_id":5764185,"reputation":424,"user_id":4549619,"accept_rate":75,"display_name":"Chanandler Bong"},"score":0,"creation_date":1696762407,"post_id":77247178,"comment_id":136192475,"body_markdown":"@KnutForkalsrud I&#39;m not sure what you mean with &#39;assert away&#39;. Could you elaborate on that?","body":"@KnutForkalsrud I&#39;m not sure what you mean with &#39;assert away&#39;. Could you elaborate on that?"},{"owner":{"account_id":274366,"reputation":1144,"user_id":566556,"display_name":"Knut Forkalsrud"},"score":0,"creation_date":1696962570,"post_id":77247178,"comment_id":136218819,"body_markdown":"Tests usually involve some sort of assertion.  Typically that some output equals what&#39;s expected. Serialized YAML is text.  You might simply compare strings.  Or am I misunderstanding the question?","body":"Tests usually involve some sort of assertion.  Typically that some output equals what&#39;s expected. Serialized YAML is text.  You might simply compare strings.  Or am I misunderstanding the question?"},{"owner":{"account_id":5764185,"reputation":424,"user_id":4549619,"accept_rate":75,"display_name":"Chanandler Bong"},"score":0,"creation_date":1697012546,"post_id":77247178,"comment_id":136224543,"body_markdown":"@KnutForkalsrud Thanks, I basically wasn&#39;t sure what the expression &#39;assert away&#39; means.","body":"@KnutForkalsrud Thanks, I basically wasn&#39;t sure what the expression &#39;assert away&#39; means."},{"owner":{"account_id":5764185,"reputation":424,"user_id":4549619,"accept_rate":75,"display_name":"Chanandler Bong"},"score":0,"creation_date":1698654024,"post_id":77247178,"comment_id":136427832,"body_markdown":"@KnutForkalsrud If you want you can write an answer based on your comment as that&#39;s the approach I took in the end.","body":"@KnutForkalsrud If you want you can write an answer based on your comment as that&#39;s the approach I took in the end."}],"answers":[{"comments":[{"owner":{"account_id":5764185,"reputation":424,"user_id":4549619,"accept_rate":75,"display_name":"Chanandler Bong"},"score":0,"creation_date":1696762657,"post_id":77248625,"comment_id":136192493,"body_markdown":"As I wrote in my question it&#39;s not what I&#39;m looking for. That&#39;s mocking the actual serialization code, so it tests everything, but the serialization.","body":"As I wrote in my question it&#39;s not what I&#39;m looking for. That&#39;s mocking the actual serialization code, so it tests everything, but the serialization."}],"tags":[],"owner":{"account_id":22093934,"reputation":448,"user_id":16351561,"display_name":"AndreaCavallo.class"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696659671,"creation_date":1696659671,"answer_id":77248625,"question_id":77247178,"body_markdown":"Test with mock!\r\n\r\n  \r\n\r\n      import static org.mockito.Mockito.*;\r\n        \r\n        @SpringBootTest\r\n        class MyMethodTest {\r\n        \r\n            @Mock\r\n            private ObjectMapper mockYamlMapper;\r\n        \r\n            @InjectMocks\r\n            private YourService yourService; // Assume that someMethod() is in this service class\r\n        \r\n            @Test\r\n            void testSomeMethod() throws Exception {\r\n    // better if you mock your object with real data here create a method to get //the object\r\n                SomeClass mockObject = mock(SomeClass.class);\r\n                doReturn(&quot;mock_serialized_string&quot;).when(mockYamlMapper).writeValueAsBytes(mockObject);\r\n        \r\n                yourService.someMethod(mockObject);\r\n        \r\n                // further verification of your method logic\r\n            }\r\n        }\r\n\r\n","title":"Testing Jackson YAML serialization in Spring Boot","body":"<p>Test with mock!</p>\n<pre><code>  import static org.mockito.Mockito.*;\n    \n    @SpringBootTest\n    class MyMethodTest {\n    \n        @Mock\n        private ObjectMapper mockYamlMapper;\n    \n        @InjectMocks\n        private YourService yourService; // Assume that someMethod() is in this service class\n    \n        @Test\n        void testSomeMethod() throws Exception {\n// better if you mock your object with real data here create a method to get //the object\n            SomeClass mockObject = mock(SomeClass.class);\n            doReturn(&quot;mock_serialized_string&quot;).when(mockYamlMapper).writeValueAsBytes(mockObject);\n    \n            yourService.someMethod(mockObject);\n    \n            // further verification of your method logic\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":5764185,"reputation":424,"user_id":4549619,"accept_rate":75,"display_name":"Chanandler Bong"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696659671,"creation_date":1696623635,"question_id":77247178,"body_markdown":"In a Spring Boot application I have a method were I serialize a class into YAML using Jackson, then I&#39;m performing some further operations.\r\n\r\n```\r\npublic void someMethod(SomeClass objectToSerialize) {\r\n   var serialized = yamlMapper.writeValueAsBytes(objectToSerialize);\r\n   //more code\r\n}\r\n```\r\nyamlMapper is an ObjectMapper bean being created in @Configuration class.\r\n\r\nI&#39;m wondering what is the best way to test the serialization.\r\nI can mock the yamlMapper to test the rest of the method code, but I would also like to have a test that verifies that the class is being serialized properly, i.e. all my custom mapping settings are not changed and the result is as expected (e.g. order of fields is preserved).\r\n\r\nThere is @JsonTest that can be used for Jackson serialization testing, but that seems to work only for JSON serialization, not YAML.\r\n\r\nAny suggestions?","title":"Testing Jackson YAML serialization in Spring Boot","body":"<p>In a Spring Boot application I have a method were I serialize a class into YAML using Jackson, then I'm performing some further operations.</p>\n<pre><code>public void someMethod(SomeClass objectToSerialize) {\n   var serialized = yamlMapper.writeValueAsBytes(objectToSerialize);\n   //more code\n}\n</code></pre>\n<p>yamlMapper is an ObjectMapper bean being created in @Configuration class.</p>\n<p>I'm wondering what is the best way to test the serialization.\nI can mock the yamlMapper to test the rest of the method code, but I would also like to have a test that verifies that the class is being serialized properly, i.e. all my custom mapping settings are not changed and the result is as expected (e.g. order of fields is preserved).</p>\n<p>There is @JsonTest that can be used for Jackson serialization testing, but that seems to work only for JSON serialization, not YAML.</p>\n<p>Any suggestions?</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1696544180,"post_id":77240830,"comment_id":136170719,"body_markdown":"What about parallelizing it? Get the input, divide it in N (N=number of processors) clusters, run this in parallel. Also (I didn&#39;t know what Armstrong number was) &quot;An Armstrong number is one whose sum of digits raised to the power /three/ of number of  digits equals the number itself&quot; it looks you have too many loops to find this? get the number, split into chars, raise each to power of count of chars, sum them all, check with original number... this only requires a single loop ? (Sorry I&#39;m no mathematician)","body":"What about parallelizing it? Get the input, divide it in N (N=number of processors) clusters, run this in parallel. Also (I didn&#39;t know what Armstrong number was) &quot;An Armstrong number is one whose sum of digits raised to the power /three/ of number of  digits equals the number itself&quot; it looks you have too many loops to find this? get the number, split into chars, raise each to power of count of chars, sum them all, check with original number... this only requires a single loop ? (Sorry I&#39;m no mathematician)"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1696544934,"post_id":77240830,"comment_id":136170785,"body_markdown":"If it is a matter of the program working, except it takes too long, would it be a candidate for [Code Review](https://codereview.stackexchange.com/) ?  ( I don&#39;t know. I&#39;m not that familiar with Code Review, so I really am asking. )","body":"If it is a matter of the program working, except it takes too long, would it be a candidate for <a href=\"https://codereview.stackexchange.com/\">Code Review</a> ?  ( I don&#39;t know. I&#39;m not that familiar with Code Review, so I really am asking. )"},{"owner":{"account_id":26661976,"reputation":31,"user_id":20274661,"display_name":"Oleksandra"},"score":0,"creation_date":1696545980,"post_id":77240830,"comment_id":136170860,"body_markdown":"Thanks for the answers! I really tried several options: using String to find the length, and elevation of numbers to a power in one loop - the result is, unfortunately, the same: too long on big numbers. I&#39;m sure there is an algorithm for this task, but I haven&#39;t found it yet)) And thanks for giving the link on Code Review - I didn&#39;t know about it, so I&#39;ll check.","body":"Thanks for the answers! I really tried several options: using String to find the length, and elevation of numbers to a power in one loop - the result is, unfortunately, the same: too long on big numbers. I&#39;m sure there is an algorithm for this task, but I haven&#39;t found it yet)) And thanks for giving the link on Code Review - I didn&#39;t know about it, so I&#39;ll check."},{"owner":{"account_id":2326766,"reputation":8079,"user_id":2041077,"accept_rate":40,"display_name":"Dave"},"score":0,"creation_date":1696546517,"post_id":77240830,"comment_id":136170901,"body_markdown":"https://oeis.org/A005188","body":"<a href=\"https://oeis.org/A005188\" rel=\"nofollow noreferrer\">oeis.org/A005188</a>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1696564606,"post_id":77240830,"comment_id":136172184,"body_markdown":"By the way, it won&#39;t help you, but one way to find the number of digits in a number is to use a logarithm:  `int length = (int)Math.floor(Math.log10((double) n) + 1);`","body":"By the way, it won&#39;t help you, but one way to find the number of digits in a number is to use a logarithm:  <code>int length = (int)Math.floor(Math.log10((double) n) + 1);</code>"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1696596155,"post_id":77240830,"comment_id":136176997,"body_markdown":"@OldDogProgrammer Use it quite often. But I believe  `(int)Math.log10(n)+1` is sufficient where `n` is a `long`","body":"@OldDogProgrammer Use it quite often. But I believe  <code>(int)Math.log10(n)+1</code> is sufficient where <code>n</code> is a <code>long</code>"},{"owner":{"account_id":26661976,"reputation":31,"user_id":20274661,"display_name":"Oleksandra"},"score":0,"creation_date":1696612084,"post_id":77240830,"comment_id":136180286,"body_markdown":"Thank you very much for your help and the tips on how to improve my code!","body":"Thank you very much for your help and the tips on how to improve my code!"}],"answers":[{"comments":[{"owner":{"account_id":26661976,"reputation":31,"user_id":20274661,"display_name":"Oleksandra"},"score":1,"creation_date":1696611777,"post_id":77241820,"comment_id":136180225,"body_markdown":"Thanks a lot for this advice, I&#39;m not yet used to the parallel stream, so it&#39;s a good chance for me to practice))","body":"Thanks a lot for this advice, I&#39;m not yet used to the parallel stream, so it&#39;s a good chance for me to practice))"}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696641830,"creation_date":1696565333,"answer_id":77241820,"question_id":77240830,"body_markdown":"&gt; _&quot;... And I have no clue what else I can do. I would appreciate a lot if you could give me an idea. ...&quot;_\r\n\r\nYou can try using a _[parallel stream](https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html)_, although the performance increase is negligible.\r\n\r\n```java\r\nList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\nIntStream.range(1, (int) 1e5)\r\n         .parallel()\r\n         .forEachOrdered(\r\n             x -&gt; {\r\n                 if (plusPerfect(String.valueOf(x)))\r\n                     list.add(String.valueOf(x));\r\n             });\r\n```\r\n\r\n```java\r\nboolean plusPerfect(String n) {\r\n    int m = n.length();\r\n    BigInteger x = BigInteger.ZERO;\r\n    for (char c : n.toCharArray())\r\n        x = x.add(new BigInteger(String.valueOf(c)).pow(m));\r\n    return n.equals(x.toString());\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 153, 370, 371, 407, 1634, 8208, 9474, 54748, 92727, 93084]\r\n```","title":"Output of all the Armstrong numbers in the range from 1 to Long.MAX_VALUE","body":"<blockquote>\n<p><em>&quot;... And I have no clue what else I can do. I would appreciate a lot if you could give me an idea. ...&quot;</em></p>\n</blockquote>\n<p>You can try using a <em><a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html\" rel=\"nofollow noreferrer\">parallel stream</a></em>, although the performance increase is negligible.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\nIntStream.range(1, (int) 1e5)\n         .parallel()\n         .forEachOrdered(\n             x -&gt; {\n                 if (plusPerfect(String.valueOf(x)))\n                     list.add(String.valueOf(x));\n             });\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>boolean plusPerfect(String n) {\n    int m = n.length();\n    BigInteger x = BigInteger.ZERO;\n    for (char c : n.toCharArray())\n        x = x.add(new BigInteger(String.valueOf(c)).pow(m));\n    return n.equals(x.toString());\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 153, 370, 371, 407, 1634, 8208, 9474, 54748, 92727, 93084]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696602006,"creation_date":1696593426,"answer_id":77244262,"question_id":77240830,"body_markdown":"&gt;This code works if N &lt; 1000000000, but if I&#39;m trying Long.MAX_VALUE - the program even doesn&#39;t finish work.\r\n\r\nAnd it never will, at least not in a reasonable amount of time unless you find a significant mathematical shortcut and/or use a fast processor with sufficient number of cores, or some combination of all three. \r\n\r\nAssume that you can iterate from `1 to Long.MAX_VALUE` and test each value as an Armstrong number in one picosecond (i.e. 1/1e12 of a second) which is highly optimistic.\r\n```\r\nlong days = TimeUnit.NANOSECONDS.toDays(Long.MAX_VALUE/1000);\r\nSystem.out.println(days);\r\n\r\n```\r\nprints\r\n```\r\n106\r\n```\r\nIt would take just over 106 days to finish the computation using a single thread.\r\n\r\n**Interesting Factoid**\r\n\r\nFrom [Math Lair](https://mathlair.allfunandgames.ca/armstrong.php)\r\n\r\n&gt;There are only 89 Armstrong numbers in total. The largest Armstrong number is 115,132,219,018,763,992,565,095,597,973,971,522,401, which has 39 digits. It has been proven that there are no Armstrong numbers with more than 39 digits.  \r\n\r\n  ","title":"Output of all the Armstrong numbers in the range from 1 to Long.MAX_VALUE","body":"<blockquote>\n<p>This code works if N &lt; 1000000000, but if I'm trying Long.MAX_VALUE - the program even doesn't finish work.</p>\n</blockquote>\n<p>And it never will, at least not in a reasonable amount of time unless you find a significant mathematical shortcut and/or use a fast processor with sufficient number of cores, or some combination of all three.</p>\n<p>Assume that you can iterate from <code>1 to Long.MAX_VALUE</code> and test each value as an Armstrong number in one picosecond (i.e. 1/1e12 of a second) which is highly optimistic.</p>\n<pre><code>long days = TimeUnit.NANOSECONDS.toDays(Long.MAX_VALUE/1000);\nSystem.out.println(days);\n\n</code></pre>\n<p>prints</p>\n<pre><code>106\n</code></pre>\n<p>It would take just over 106 days to finish the computation using a single thread.</p>\n<p><strong>Interesting Factoid</strong></p>\n<p>From <a href=\"https://mathlair.allfunandgames.ca/armstrong.php\" rel=\"nofollow noreferrer\">Math Lair</a></p>\n<blockquote>\n<p>There are only 89 Armstrong numbers in total. The largest Armstrong number is 115,132,219,018,763,992,565,095,597,973,971,522,401, which has 39 digits. It has been proven that there are no Armstrong numbers with more than 39 digits.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":26661976,"reputation":31,"user_id":20274661,"display_name":"Oleksandra"},"score":0,"creation_date":1696611466,"post_id":77245400,"comment_id":136180166,"body_markdown":"Wow, thank you so much, yes, that is it! You helped me a lot. And thank you for the comments, now I can understand how it works!","body":"Wow, thank you so much, yes, that is it! You helped me a lot. And thank you for the comments, now I can understand how it works!"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1696612888,"post_id":77245400,"comment_id":136180431,"body_markdown":"Very nice! +1: But there&#39;s a lot more to this algorithm than just noticing the permutations of digit runs of the same length result in the same sum. You should really provide more detail for those that search this site.","body":"Very nice! +1: But there&#39;s a lot more to this algorithm than just noticing the permutations of digit runs of the same length result in the same sum. You should really provide more detail for those that search this site."},{"owner":{"account_id":453149,"reputation":413,"user_id":849978,"display_name":"Viktor"},"score":0,"creation_date":1696626167,"post_id":77245400,"comment_id":136182403,"body_markdown":"@WJS, Tried to write more detailed answer, but was blocked by &quot;Your post appears to contain code that is not properly formatted as code.&quot; warning. Looks like StackOverflow punishes authors for long answers.","body":"@WJS, Tried to write more detailed answer, but was blocked by &quot;Your post appears to contain code that is not properly formatted as code.&quot; warning. Looks like StackOverflow punishes authors for long answers."},{"owner":{"account_id":433754,"reputation":38783,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"score":0,"creation_date":1696643563,"post_id":77245400,"comment_id":136183744,"body_markdown":"no there are much much longer answers than this","body":"no there are much much longer answers than this"},{"owner":{"account_id":453149,"reputation":413,"user_id":849978,"display_name":"Viktor"},"score":0,"creation_date":1696659343,"post_id":77245400,"comment_id":136184574,"body_markdown":"@WJS I have updated my answer, hope now is clearer","body":"@WJS I have updated my answer, hope now is clearer"},{"owner":{"account_id":453149,"reputation":413,"user_id":849978,"display_name":"Viktor"},"score":0,"creation_date":1696659392,"post_id":77245400,"comment_id":136184580,"body_markdown":"@phucls tried to format formulas with &lt;sub&gt;&lt;sup&gt; but looks like SO does not accept that.","body":"@phucls tried to format formulas with &lt;sub&gt;&lt;sup&gt; but looks like SO does not accept that."},{"owner":{"account_id":453149,"reputation":413,"user_id":849978,"display_name":"Viktor"},"score":0,"creation_date":1696659524,"post_id":77245400,"comment_id":136184585,"body_markdown":"@AndreyB.Panfilov thank you for your explanation, you are right","body":"@AndreyB.Panfilov thank you for your explanation, you are right"},{"owner":{"account_id":433754,"reputation":38783,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"score":0,"creation_date":1696731389,"post_id":77245400,"comment_id":136190449,"body_markdown":"@Viktor it does, just not in code blocks, so if code formatting is required then you need to put into `&lt;code&gt;&lt;pre&gt;`, otherwise just use in blockquote format","body":"@Viktor it does, just not in code blocks, so if code formatting is required then you need to put into <code>&lt;code&gt;&lt;pre&gt;</code>, otherwise just use in blockquote format"}],"tags":[],"owner":{"account_id":453149,"reputation":413,"user_id":849978,"display_name":"Viktor"},"comment_count":8,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696659135,"creation_date":1696603547,"answer_id":77245400,"question_id":77240830,"body_markdown":"Instead of iterating over all possible integer numbers, let&#39;s iterate over all possible sequences&lt;br&gt;\r\n\r\n    a1^n + a2^n + a3^n +  .. + an^n = A, where 0 ≤ ai ≤ 9\r\n\r\nand checking corresponding sums A for &quot;Armstrongeness&quot;.\r\n\r\nAs sum is commutative (a+b = b+a) we need to iterate only over non-decreasing sequences:&lt;br&gt;\r\n\r\n    a1^n ≤ a2^n ≤ a3^n ≤  .. ≤ an^n\r\n\r\nFor example, lets find all 3-digit Armstrong numbers:\r\n\r\n    0^3 + 0^3 + 0^3 = 0\r\n    0^3 + 0^3 + 1^3 = 1\r\n    0^3 + 0^3 + 2^3 = 8\r\n    ...\r\n    0^3 + 3^3 + 6^3 = 243\r\n    0^3 + 3^3 + 7^3 = 370 &lt;--  Armstrong number\r\n    0^3 + 3^3 + 8^3 = 539\r\n    ...\r\n    0^3 + 4^3 + 6^3 = 280\r\n    0^3 + 4^3 + 7^3 = 407 &lt;-- Armstrong number\r\n    0^3 + 4^3 + 8^3 = 576\r\n    ...\r\n    1^3 + 3^3 + 4^3 = 92\r\n    1^3 + 3^3 + 5^3 = 153 &lt;-- Armstrong number\r\n    1^3 + 3^3 + 6^3 = 244\r\n    1^3 + 3^3 + 7^3 = 371 &lt;-- Armstrong number\r\n    1^3 + 3^3 + 8^3 = 540\r\n    ...\r\n    9^3 + 9^3 + 9^3 = 2187\r\n\r\nThere is 900 3-digit numbers, but only 178 possible 3-digit permutations. Does not sound like big deal, however for 900&#39;000&#39;000&#39;000&#39;000&#39;000 18-digit numbers, there is only 4&#39;515&#39;854 permutations.\r\n\r\nAlgorithm complexity is `10^N / N!`, still exponential, but drastically faster than initial  `10^N` solution.\r\n\r\nMy written on Java implementation computes all numbers by ~2 sec on my machine:\r\n\r\n```java\r\npackage org.example;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\npublic class Main {\r\n    private static int[] digits;\r\n    private static long sumOfPows = 0;\r\n    private static long[] pows;\r\n    private static long min = 0;\r\n    private static long max = 0;\r\n    private static List&lt;Long&gt; result = new ArrayList&lt;&gt;();\r\n\r\n    public static void main(String[] args) {\r\n        for (int numOfDigits = 1; numOfDigits &lt;= 19 ; numOfDigits++) {\r\n            search(numOfDigits);\r\n        }\r\n\r\n        System.out.println(result);\r\n    }\r\n\r\n\r\n    private static void search(int numOfDigits) {\r\n        digits = new int[numOfDigits];\r\n        sumOfPows = 0;\r\n        pows = new long[10];\r\n        min = powerN(10, numOfDigits-1);\r\n        max = powerN(10, numOfDigits);\r\n        if (max &lt; 0) { // check for overflow\r\n            max = Long.MAX_VALUE;\r\n        }\r\n        for (int i = 0; i &lt; pows.length; i++) {\r\n            pows[i] = powerN(i, numOfDigits);\r\n        }\r\n        searchRecursively(0);\r\n    }\r\n\r\n\r\n    private static void searchRecursively(int i) {\r\n        if (i == digits.length) {\r\n            // sequence fully constructed, lets test it for &quot;Armstrongeness&quot;\r\n            if (min &lt;= sumOfPows &amp;&amp; sumOfPows &lt; max) { // check for right number of digits\r\n                if (isArmstrong(digits, sumOfPows)) {\r\n                    result.add(sumOfPows);\r\n                }\r\n            }\r\n        } else {\r\n            // we have a_1, a_2, a_(i-1) sequence, let&#39;s construct next a_i member\r\n            // a_i should be in interval [a_(i-1)..9] or in interval [0..9] if i=0\r\n            int minDigit = i &gt; 0 ? digits[i-1] : 0;\r\n            for (int j = minDigit; j &lt;= 9; j++) {\r\n                digits[i] = j;\r\n                sumOfPows += pows[j];\r\n                if (sumOfPows &gt;= 0 &amp;&amp; sumOfPows &lt; max) { // check for overflow\r\n                    searchRecursively(i + 1);\r\n                }\r\n                sumOfPows -= pows[j]; // backtracking\r\n            }\r\n        }\r\n    }\r\n\r\n    private static boolean isArmstrong(int[] digits, long sumOfPows) {\r\n        int[] digitsSorted = toDigits(sumOfPows, digits.length);\r\n        return Arrays.equals(digits, digitsSorted);\r\n    }\r\n\r\n    private static int[] toDigits(long num, int len) {\r\n        int[] result = new int[len];\r\n        while(num &gt; 0) {\r\n            result[--len] = (int)(num % 10);\r\n            num /= 10;\r\n        }\r\n        Arrays.sort(result);\r\n        return result;\r\n    }\r\n\r\n    private static long powerN(int number, int power){\r\n        long res = 1;\r\n        for (int i = 0; i &lt; power; i++) {\r\n            res *= number;\r\n        }\r\n        return res;\r\n    }\r\n}\r\n```","title":"Output of all the Armstrong numbers in the range from 1 to Long.MAX_VALUE","body":"<p>Instead of iterating over all possible integer numbers, let's iterate over all possible sequences<br></p>\n<pre><code>a1^n + a2^n + a3^n +  .. + an^n = A, where 0 ≤ ai ≤ 9\n</code></pre>\n<p>and checking corresponding sums A for &quot;Armstrongeness&quot;.</p>\n<p>As sum is commutative (a+b = b+a) we need to iterate only over non-decreasing sequences:<br></p>\n<pre><code>a1^n ≤ a2^n ≤ a3^n ≤  .. ≤ an^n\n</code></pre>\n<p>For example, lets find all 3-digit Armstrong numbers:</p>\n<pre><code>0^3 + 0^3 + 0^3 = 0\n0^3 + 0^3 + 1^3 = 1\n0^3 + 0^3 + 2^3 = 8\n...\n0^3 + 3^3 + 6^3 = 243\n0^3 + 3^3 + 7^3 = 370 &lt;--  Armstrong number\n0^3 + 3^3 + 8^3 = 539\n...\n0^3 + 4^3 + 6^3 = 280\n0^3 + 4^3 + 7^3 = 407 &lt;-- Armstrong number\n0^3 + 4^3 + 8^3 = 576\n...\n1^3 + 3^3 + 4^3 = 92\n1^3 + 3^3 + 5^3 = 153 &lt;-- Armstrong number\n1^3 + 3^3 + 6^3 = 244\n1^3 + 3^3 + 7^3 = 371 &lt;-- Armstrong number\n1^3 + 3^3 + 8^3 = 540\n...\n9^3 + 9^3 + 9^3 = 2187\n</code></pre>\n<p>There is 900 3-digit numbers, but only 178 possible 3-digit permutations. Does not sound like big deal, however for 900'000'000'000'000'000 18-digit numbers, there is only 4'515'854 permutations.</p>\n<p>Algorithm complexity is <code>10^N / N!</code>, still exponential, but drastically faster than initial  <code>10^N</code> solution.</p>\n<p>My written on Java implementation computes all numbers by ~2 sec on my machine:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class Main {\n    private static int[] digits;\n    private static long sumOfPows = 0;\n    private static long[] pows;\n    private static long min = 0;\n    private static long max = 0;\n    private static List&lt;Long&gt; result = new ArrayList&lt;&gt;();\n\n    public static void main(String[] args) {\n        for (int numOfDigits = 1; numOfDigits &lt;= 19 ; numOfDigits++) {\n            search(numOfDigits);\n        }\n\n        System.out.println(result);\n    }\n\n\n    private static void search(int numOfDigits) {\n        digits = new int[numOfDigits];\n        sumOfPows = 0;\n        pows = new long[10];\n        min = powerN(10, numOfDigits-1);\n        max = powerN(10, numOfDigits);\n        if (max &lt; 0) { // check for overflow\n            max = Long.MAX_VALUE;\n        }\n        for (int i = 0; i &lt; pows.length; i++) {\n            pows[i] = powerN(i, numOfDigits);\n        }\n        searchRecursively(0);\n    }\n\n\n    private static void searchRecursively(int i) {\n        if (i == digits.length) {\n            // sequence fully constructed, lets test it for &quot;Armstrongeness&quot;\n            if (min &lt;= sumOfPows &amp;&amp; sumOfPows &lt; max) { // check for right number of digits\n                if (isArmstrong(digits, sumOfPows)) {\n                    result.add(sumOfPows);\n                }\n            }\n        } else {\n            // we have a_1, a_2, a_(i-1) sequence, let's construct next a_i member\n            // a_i should be in interval [a_(i-1)..9] or in interval [0..9] if i=0\n            int minDigit = i &gt; 0 ? digits[i-1] : 0;\n            for (int j = minDigit; j &lt;= 9; j++) {\n                digits[i] = j;\n                sumOfPows += pows[j];\n                if (sumOfPows &gt;= 0 &amp;&amp; sumOfPows &lt; max) { // check for overflow\n                    searchRecursively(i + 1);\n                }\n                sumOfPows -= pows[j]; // backtracking\n            }\n        }\n    }\n\n    private static boolean isArmstrong(int[] digits, long sumOfPows) {\n        int[] digitsSorted = toDigits(sumOfPows, digits.length);\n        return Arrays.equals(digits, digitsSorted);\n    }\n\n    private static int[] toDigits(long num, int len) {\n        int[] result = new int[len];\n        while(num &gt; 0) {\n            result[--len] = (int)(num % 10);\n            num /= 10;\n        }\n        Arrays.sort(result);\n        return result;\n    }\n\n    private static long powerN(int number, int power){\n        long res = 1;\n        for (int i = 0; i &lt; power; i++) {\n            res *= number;\n        }\n        return res;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26661976,"reputation":31,"user_id":20274661,"display_name":"Oleksandra"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1696659135,"creation_date":1696543428,"question_id":77240830,"body_markdown":"I&#39;m dealing with a task: I have to write a method to find all the Armstrong numbers from 1 to N. \r\n\r\n&gt; In number theory, an Armstrong number number (also known as a narcissistic number, a pluperfect digital invariant (PPDI), or a plus perfect number) in a given number base b is a number that is the sum of its own digits each raised to the power of the number of digits. **&#185;**\r\n\r\nThis code works if N &lt; 1000000000, but if I&#39;m trying Long.MAX_VALUE - the program even doesn&#39;t finish work. I understand that the problem is that I&#39;m trying to check all the numbers, and it&#39;s too long. \r\n\r\nI don&#39;t know what else I can do. \r\n\r\n```\r\npublic class Solution {\r\n    static List&lt;Long&gt; list = new ArrayList&lt;&gt;();\r\n    static int[][] powers;\r\n\r\n    public static long[] getNumbers(long N) {\r\n        fillPowers();\r\n        if(N &lt;= 0) {\r\n            return new long[0];\r\n        }\r\n        list.clear();\r\n        long res = 0L;\r\n        for (long i = 1L; i &lt; N; i++) {\r\n            int t = getDigitFromLong(i);\r\n            long temp = i;\r\n            while (temp &gt;= 1) {\r\n                long devidedIntoTen = temp % 10;\r\n                res += powers[t] [(int) devidedIntoTen];\r\n                temp/=10;\r\n            }\r\n            if(res == i) {\r\n                list.add(res);\r\n                res = 0;\r\n            } else {\r\n                res = 0;\r\n            }\r\n        }\r\n\r\n        Collections.sort(list);\r\n        long[] l = new long[list.size()];\r\n        for (int i = 0; i &lt; list.size(); i++) {\r\n            l[i] = list.get(i);\r\n        }\r\n        return l;\r\n    }\r\n\r\n    public static void fillPowers() {\r\n        int numDigits = getDigitFromLong(Long.MAX_VALUE);\r\n        powers = new int[numDigits][10];\r\n\r\n        for (int i = 0; i &lt; numDigits; i++) {\r\n            for (int j = 0; j &lt; 10; j++) {\r\n                powers[i][j] = (int) Math.pow(j, i);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static int getDigitFromLong (long number) {\r\n        int numDigits = 0;\r\n        while (number &gt; 0) {\r\n            number /= 10;\r\n            numDigits++;\r\n        }\r\n        return numDigits;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI&#39;ve created the matrix with the powers of numbers so as not to waste resources on counting them every iteration. \r\n\r\nI also tried to write the permutations of the numbers that I&#39;ve found to skip them in my loop. But still, it&#39;s too long and ineffective. \r\n\r\nAnd I have no clue what else I can do. I would appreciate a lot if you could give me an idea. \r\n\r\n-----\r\n\r\n&lt;sub&gt;**1** [Wikipedia](https://en.wikipedia.org/wiki/Narcissistic_number)&lt;/sub&gt;","title":"Output of all the Armstrong numbers in the range from 1 to Long.MAX_VALUE","body":"<p>I'm dealing with a task: I have to write a method to find all the Armstrong numbers from 1 to N.</p>\n<blockquote>\n<p>In number theory, an Armstrong number number (also known as a narcissistic number, a pluperfect digital invariant (PPDI), or a plus perfect number) in a given number base b is a number that is the sum of its own digits each raised to the power of the number of digits. <strong>¹</strong></p>\n</blockquote>\n<p>This code works if N &lt; 1000000000, but if I'm trying Long.MAX_VALUE - the program even doesn't finish work. I understand that the problem is that I'm trying to check all the numbers, and it's too long.</p>\n<p>I don't know what else I can do.</p>\n<pre><code>public class Solution {\n    static List&lt;Long&gt; list = new ArrayList&lt;&gt;();\n    static int[][] powers;\n\n    public static long[] getNumbers(long N) {\n        fillPowers();\n        if(N &lt;= 0) {\n            return new long[0];\n        }\n        list.clear();\n        long res = 0L;\n        for (long i = 1L; i &lt; N; i++) {\n            int t = getDigitFromLong(i);\n            long temp = i;\n            while (temp &gt;= 1) {\n                long devidedIntoTen = temp % 10;\n                res += powers[t] [(int) devidedIntoTen];\n                temp/=10;\n            }\n            if(res == i) {\n                list.add(res);\n                res = 0;\n            } else {\n                res = 0;\n            }\n        }\n\n        Collections.sort(list);\n        long[] l = new long[list.size()];\n        for (int i = 0; i &lt; list.size(); i++) {\n            l[i] = list.get(i);\n        }\n        return l;\n    }\n\n    public static void fillPowers() {\n        int numDigits = getDigitFromLong(Long.MAX_VALUE);\n        powers = new int[numDigits][10];\n\n        for (int i = 0; i &lt; numDigits; i++) {\n            for (int j = 0; j &lt; 10; j++) {\n                powers[i][j] = (int) Math.pow(j, i);\n            }\n        }\n    }\n\n    public static int getDigitFromLong (long number) {\n        int numDigits = 0;\n        while (number &gt; 0) {\n            number /= 10;\n            numDigits++;\n        }\n        return numDigits;\n    }\n\n}\n</code></pre>\n<p>I've created the matrix with the powers of numbers so as not to waste resources on counting them every iteration.</p>\n<p>I also tried to write the permutations of the numbers that I've found to skip them in my loop. But still, it's too long and ineffective.</p>\n<p>And I have no clue what else I can do. I would appreciate a lot if you could give me an idea.</p>\n<hr />\n<p><sub><strong>1</strong> <a href=\"https://en.wikipedia.org/wiki/Narcissistic_number\" rel=\"nofollow noreferrer\">Wikipedia</a></sub></p>\n"},{"tags":["java","encryption","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1535424187,"post_id":52047944,"comment_id":91049344,"body_markdown":"Why not use the Acroform fields instead? `doc.getDocumentCatalog().getAcroForm().getField(&quot;form1[0].#subform[3].address[0]&quot;).getValueAsString()`. To get a list of all fields, see the PrintFields example in the source code download.","body":"Why not use the Acroform fields instead? <code>doc.getDocumentCatalog().getAcroForm().getField(&quot;form1[0].#s&zwnj;&#8203;ubform[3].address[0]&zwnj;&#8203;&quot;).getValueAsString(&zwnj;&#8203;)</code>. To get a list of all fields, see the PrintFields example in the source code download."},{"owner":{"account_id":1779372,"reputation":76342,"user_id":1622493,"display_name":"Bruno Lowagie"},"score":1,"creation_date":1535440381,"post_id":52047944,"comment_id":91054285,"body_markdown":"A PDF can be encrypted with two passwords: a *user* password and an *owner* password. When a PDF is encrypted with a *user* password, you can&#39;t open the document in a PDF viewer without entering that password. When a PDF is encrypted with an *owner* password only, everyone can open a PDF without that password, but some restrictions may be in place. You can recognize PDFs encrypted with an owner password because they mention &quot;SECURED&quot; in Adobe Reader. You need to find a way to ignore that security similar to using the &quot;unethicalreading&quot; flag in iText.","body":"A PDF can be encrypted with two passwords: a <i>user</i> password and an <i>owner</i> password. When a PDF is encrypted with a <i>user</i> password, you can&#39;t open the document in a PDF viewer without entering that password. When a PDF is encrypted with an <i>owner</i> password only, everyone can open a PDF without that password, but some restrictions may be in place. You can recognize PDFs encrypted with an owner password because they mention &quot;SECURED&quot; in Adobe Reader. You need to find a way to ignore that security similar to using the &quot;unethicalreading&quot; flag in iText."},{"owner":{"account_id":158306,"reputation":1124,"user_id":376844,"accept_rate":66,"display_name":"jamzsabb"},"score":0,"creation_date":1535480634,"post_id":52047944,"comment_id":91078696,"body_markdown":"@TilmanHausherr YES!  It would appear that my document is using floating annotation, so my issue is not with decrypting but data not being where I think it is.  I&#39;m in an area with awful signal so the 16MB for the source is too much, I&#39;ll check when I get home though thanks!","body":"@TilmanHausherr YES!  It would appear that my document is using floating annotation, so my issue is not with decrypting but data not being where I think it is.  I&#39;m in an area with awful signal so the 16MB for the source is too much, I&#39;ll check when I get home though thanks!"}],"answers":[{"comments":[{"owner":{"account_id":158306,"reputation":1124,"user_id":376844,"accept_rate":66,"display_name":"jamzsabb"},"score":0,"creation_date":1535572587,"post_id":52060733,"comment_id":91120583,"body_markdown":"Looks like that was it, @TilmanHausherr was right.  The examples in the source files had everything I needed to get moving again.  Thanks!","body":"Looks like that was it, @TilmanHausherr was right.  The examples in the source files had everything I needed to get moving again.  Thanks!"}],"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1535467809,"creation_date":1535467809,"answer_id":52060733,"question_id":52047944,"body_markdown":"Brunos comment explains why the PDF is encrypted even though you do not need to enter a password:\r\n\r\n&gt; A PDF can be encrypted with two passwords: a _user_ password and an _owner_ password. When a PDF is encrypted with a _user_ password, you can&#39;t open the document in a PDF viewer without entering that password. When a PDF is encrypted with an _owner_ password only, everyone can open a PDF without that password, but some restrictions may be in place. You can recognize PDFs encrypted with an owner password because they mention &quot;SECURED&quot; in Adobe Reader.\r\n\r\nYour PDF is encrypted using only an owner password, i.e. the user password is empty. Thus, you can decrypt it using the empty password `&quot;&quot;` like this in your PDFBox version:\r\n\r\n    document.decrypt(&quot;&quot;);\r\n\r\n*(This &quot;method 1&quot;, by the way, is exactly the same as your &quot;method 2&quot;*\r\n\r\n    document.openProtection(new StandardDecryptionMaterial(&quot;&quot;));\r\n\r\n*plus some exception wrapping.)*\r\n\r\n---\r\n\r\nTilman&#39;s comment implies the reason why you don&#39;t retrieve the form values: Your code uses the `PDFTextStripperByArea` to do text extraction, but this text extraction only extracts the *fixed page content*, not the content of the *annotations* floating on that page.\r\n\r\nThe content you want to extract is the content of form fields whose widgets are annotations.\r\n\r\nTilman&#39;s proposal\r\n\r\n&gt;     doc.getDocumentCatalog().getAcroForm().getField(&quot;form1[0].#subform[3].address[0]&quot;).getValueAsString()\r\n\r\nshows how to extract the value of a form field you know the name of, `&quot;form1[0].#subform[3].address[0]&quot;` in this case. If you don&#39;t know the name of the field you want to extract content from, the `PDAcroForm` object returned by `doc.getDocumentCatalog().getAcroForm()` has a number of other methods to access field contents.\r\n\r\n---\r\n\r\nBy the way, a field name like `&quot;form1[0].#subform[3].address[0]&quot;` in the **AcroForm** definition indicates yet another specialty of your PDF: It actually contains **two form definitions**, the core PDF *AcroForm* definition and the more independent *XFA* definition. Both describe the same visual form. Such a PDF form is called a *hybrid PDF form*.\r\n\r\nThe advantage of hybrid forms is that they can be viewed and filled in using PDF tools which only know *AcroForm* forms (which is essentially all software except Adobe&#39;s) while PDF tools with XFA support (essentially only Adobe&#39;s software) can make use of additional XFA features.\r\n\r\nThe drawback of hybrid forms is that if they are filled in using a tool without XFA support, only the *AcroForm* information are updated while the XFA information remain as before. Thus, the hybrid document can contain different data for the same field...\r\n","title":"PDFBox extracting blanks from PDF encrypted with no password","body":"<p>Brunos comment explains why the PDF is encrypted even though you do not need to enter a password:</p>\n\n<blockquote>\n  <p>A PDF can be encrypted with two passwords: a <em>user</em> password and an <em>owner</em> password. When a PDF is encrypted with a <em>user</em> password, you can't open the document in a PDF viewer without entering that password. When a PDF is encrypted with an <em>owner</em> password only, everyone can open a PDF without that password, but some restrictions may be in place. You can recognize PDFs encrypted with an owner password because they mention \"SECURED\" in Adobe Reader.</p>\n</blockquote>\n\n<p>Your PDF is encrypted using only an owner password, i.e. the user password is empty. Thus, you can decrypt it using the empty password <code>\"\"</code> like this in your PDFBox version:</p>\n\n<pre><code>document.decrypt(\"\");\n</code></pre>\n\n<p><em>(This \"method 1\", by the way, is exactly the same as your \"method 2\"</em></p>\n\n<pre><code>document.openProtection(new StandardDecryptionMaterial(\"\"));\n</code></pre>\n\n<p><em>plus some exception wrapping.)</em></p>\n\n<hr>\n\n<p>Tilman's comment implies the reason why you don't retrieve the form values: Your code uses the <code>PDFTextStripperByArea</code> to do text extraction, but this text extraction only extracts the <em>fixed page content</em>, not the content of the <em>annotations</em> floating on that page.</p>\n\n<p>The content you want to extract is the content of form fields whose widgets are annotations.</p>\n\n<p>Tilman's proposal</p>\n\n<blockquote>\n<pre><code>doc.getDocumentCatalog().getAcroForm().getField(\"form1[0].#subform[3].address[0]\").getValueAsString()\n</code></pre>\n</blockquote>\n\n<p>shows how to extract the value of a form field you know the name of, <code>\"form1[0].#subform[3].address[0]\"</code> in this case. If you don't know the name of the field you want to extract content from, the <code>PDAcroForm</code> object returned by <code>doc.getDocumentCatalog().getAcroForm()</code> has a number of other methods to access field contents.</p>\n\n<hr>\n\n<p>By the way, a field name like <code>\"form1[0].#subform[3].address[0]\"</code> in the <strong>AcroForm</strong> definition indicates yet another specialty of your PDF: It actually contains <strong>two form definitions</strong>, the core PDF <em>AcroForm</em> definition and the more independent <em>XFA</em> definition. Both describe the same visual form. Such a PDF form is called a <em>hybrid PDF form</em>.</p>\n\n<p>The advantage of hybrid forms is that they can be viewed and filled in using PDF tools which only know <em>AcroForm</em> forms (which is essentially all software except Adobe's) while PDF tools with XFA support (essentially only Adobe's software) can make use of additional XFA features.</p>\n\n<p>The drawback of hybrid forms is that if they are filled in using a tool without XFA support, only the <em>AcroForm</em> information are updated while the XFA information remain as before. Thus, the hybrid document can contain different data for the same field...</p>\n"},{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1696851286,"post_id":77248594,"comment_id":136201591,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77248594/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29617742,"reputation":1,"user_id":22699445,"display_name":"Yogesh Jajoo"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1696659116,"creation_date":1696659116,"answer_id":77248594,"question_id":52047944,"body_markdown":"    PDDocument document = PDDocument.load(file);\r\n    \r\n    // Check if the PDF is encrypted.\r\n    if (document.isEncrypted()) {\r\n        // Get the document&#39;s access permissions.\r\n        AccessPermission accessPermission = document.getCurrentAccessPermission();\r\n    \r\n        // Check if the document has content extraction restrictions or owner permissions.\r\n        if (!accessPermission.canExtractContent() || accessPermission.isOwnerPermission()) {\r\n            // The PDF is encrypted and has content extraction restrictions or owner permissions.\r\n            // It is not password-protected.\r\n        } else {\r\n            // The PDF is encrypted and does not have content extraction restrictions or owner permissions.\r\n            // It is password-protected.\r\n        }\r\n    }","title":"PDFBox extracting blanks from PDF encrypted with no password","body":"<pre><code>PDDocument document = PDDocument.load(file);\n\n// Check if the PDF is encrypted.\nif (document.isEncrypted()) {\n    // Get the document's access permissions.\n    AccessPermission accessPermission = document.getCurrentAccessPermission();\n\n    // Check if the document has content extraction restrictions or owner permissions.\n    if (!accessPermission.canExtractContent() || accessPermission.isOwnerPermission()) {\n        // The PDF is encrypted and has content extraction restrictions or owner permissions.\n        // It is not password-protected.\n    } else {\n        // The PDF is encrypted and does not have content extraction restrictions or owner permissions.\n        // It is password-protected.\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":158306,"reputation":1124,"user_id":376844,"accept_rate":66,"display_name":"jamzsabb"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1933,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":52060733,"answer_count":2,"score":3,"last_activity_date":1696659116,"creation_date":1535410511,"question_id":52047944,"body_markdown":"I&#39;m using PDFBox to extract text from forms and I have a PDF that is not encrypted with a password but PDFBox says is encrypted.  I suspect some sort of Adobe &quot;feature&quot; since when I open it it says (SECURED), while other PDFs that I don&#39;t have issues with do not.  `isEncrypted()` returns `true` so despite not having a password it appears to be secured somehow.  \r\n\r\nI suspect that it is not decrypting properly, as it is able to pull the form&#39;s text prompts but not the responses themselves.  In the code below it pulls `Address (Street Name and Number)` and `City` from the sample PDF, but not the response in between them.\r\n\r\nI am using PDFBox 2.0, but I have also tried 1.8.\r\n\r\nI&#39;ve tried every method of decrypting that I can find for PDFBox, including the deprecated ones (why not).  I get the same result as not trying to decrypt at all, just the Address and City prompts.  \r\n\r\nWith PDF&#39;s being the absolute nightmare that they are, this PDF was likely created in some non-standard way.  Any help in identifying this and getting moving again is appreciated.\r\n\r\n[Sample PDF][1]\r\n\r\n    import org.apache.pdfbox.pdmodel.PDDocument;\r\n    import org.apache.pdfbox.pdmodel.PDPageTree;\r\n    import org.apache.pdfbox.pdmodel.encryption.StandardDecryptionMaterial;\r\n    import org.apache.pdfbox.text.PDFTextStripperByArea;\r\n    import java.io.File;\r\n    import org.apache.pdfbox.pdmodel.PDPage;\r\n    import java.awt.Rectangle;\r\n    import java.util.List;\r\n    \r\n    \r\n    class Scratch {\r\n    \r\n        private static float pwidth;\r\n        private static float pheight;\r\n    \r\n        private static int widthByPercent(double percent) {\r\n            return (int)Math.round(percent * pwidth);\r\n        }\r\n    \r\n        private static int heightByPercent(double percent) {\r\n            return (int)Math.round(percent * pheight);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            try {\r\n                //Create objects\r\n                File inputStream = new File(&quot;ocr/TestDataFiles/i-9_08-07-09.pdf&quot;);\r\n    \r\n                PDDocument document = PDDocument.load(inputStream);\r\n    \r\n                // Try every decryption method I&#39;ve found\r\n                if(document.isEncrypted()) {\r\n    \r\n                    // Method 1\r\n                    document.decrypt(&quot;&quot;);\r\n    \r\n                    // Method 2\r\n                    document.openProtection(new StandardDecryptionMaterial(&quot;&quot;));\r\n    \r\n                    // Method 3\r\n                    document.setAllSecurityToBeRemoved(true);\r\n    \r\n                    System.out.println(&quot;Removed encryption&quot;);\r\n                }\r\n    \r\n                PDFTextStripperByArea stripper = new PDFTextStripperByArea();\r\n    \r\n                //Get the page with data on it\r\n                PDPageTree allPages = document.getDocumentCatalog().getPages();\r\n                PDPage page = allPages.get(3);\r\n    \r\n                pheight = page.getMediaBox().getHeight();\r\n                pwidth = page.getMediaBox().getWidth();\r\n    \r\n                Rectangle LastName = new Rectangle(widthByPercent(0.02), heightByPercent(0.195), widthByPercent(0.27), heightByPercent(0.1));\r\n                stripper.addRegion(&quot;LastName&quot;, LastName);\r\n                stripper.setSortByPosition(true);\r\n                stripper.extractRegions(page);\r\n                List&lt;String&gt; regions = stripper.getRegions();\r\n    \r\n                System.out.println(stripper.getTextForRegion(&quot;LastName&quot;));\r\n    \r\n            } catch (Exception e){\r\n                System.out.println(e.getMessage());\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://www.dropbox.com/s/0x6wntz936m7hjo/i-9_08-07-09.pdf?dl=0","title":"PDFBox extracting blanks from PDF encrypted with no password","body":"<p>I'm using PDFBox to extract text from forms and I have a PDF that is not encrypted with a password but PDFBox says is encrypted.  I suspect some sort of Adobe \"feature\" since when I open it it says (SECURED), while other PDFs that I don't have issues with do not.  <code>isEncrypted()</code> returns <code>true</code> so despite not having a password it appears to be secured somehow.  </p>\n\n<p>I suspect that it is not decrypting properly, as it is able to pull the form's text prompts but not the responses themselves.  In the code below it pulls <code>Address (Street Name and Number)</code> and <code>City</code> from the sample PDF, but not the response in between them.</p>\n\n<p>I am using PDFBox 2.0, but I have also tried 1.8.</p>\n\n<p>I've tried every method of decrypting that I can find for PDFBox, including the deprecated ones (why not).  I get the same result as not trying to decrypt at all, just the Address and City prompts.  </p>\n\n<p>With PDF's being the absolute nightmare that they are, this PDF was likely created in some non-standard way.  Any help in identifying this and getting moving again is appreciated.</p>\n\n<p><a href=\"https://www.dropbox.com/s/0x6wntz936m7hjo/i-9_08-07-09.pdf?dl=0\" rel=\"nofollow noreferrer\">Sample PDF</a></p>\n\n<pre><code>import org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.PDPageTree;\nimport org.apache.pdfbox.pdmodel.encryption.StandardDecryptionMaterial;\nimport org.apache.pdfbox.text.PDFTextStripperByArea;\nimport java.io.File;\nimport org.apache.pdfbox.pdmodel.PDPage;\nimport java.awt.Rectangle;\nimport java.util.List;\n\n\nclass Scratch {\n\n    private static float pwidth;\n    private static float pheight;\n\n    private static int widthByPercent(double percent) {\n        return (int)Math.round(percent * pwidth);\n    }\n\n    private static int heightByPercent(double percent) {\n        return (int)Math.round(percent * pheight);\n    }\n\n    public static void main(String[] args) {\n        try {\n            //Create objects\n            File inputStream = new File(\"ocr/TestDataFiles/i-9_08-07-09.pdf\");\n\n            PDDocument document = PDDocument.load(inputStream);\n\n            // Try every decryption method I've found\n            if(document.isEncrypted()) {\n\n                // Method 1\n                document.decrypt(\"\");\n\n                // Method 2\n                document.openProtection(new StandardDecryptionMaterial(\"\"));\n\n                // Method 3\n                document.setAllSecurityToBeRemoved(true);\n\n                System.out.println(\"Removed encryption\");\n            }\n\n            PDFTextStripperByArea stripper = new PDFTextStripperByArea();\n\n            //Get the page with data on it\n            PDPageTree allPages = document.getDocumentCatalog().getPages();\n            PDPage page = allPages.get(3);\n\n            pheight = page.getMediaBox().getHeight();\n            pwidth = page.getMediaBox().getWidth();\n\n            Rectangle LastName = new Rectangle(widthByPercent(0.02), heightByPercent(0.195), widthByPercent(0.27), heightByPercent(0.1));\n            stripper.addRegion(\"LastName\", LastName);\n            stripper.setSortByPosition(true);\n            stripper.extractRegions(page);\n            List&lt;String&gt; regions = stripper.getRegions();\n\n            System.out.println(stripper.getTextForRegion(\"LastName\"));\n\n        } catch (Exception e){\n            System.out.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","css","web-scraping","jsoup"],"comments":[{"owner":{"account_id":3688125,"reputation":592,"user_id":3071446,"accept_rate":75,"display_name":"fasaas"},"score":0,"creation_date":1539630744,"post_id":52823273,"comment_id":92563772,"body_markdown":"A couple of alternatives: Have you tried putting whitespaces between classes? And two, instead of selecting that div, maybe you can actually select the second div (not ideal but it can be a dirty fix until the solution has been figured out)","body":"A couple of alternatives: Have you tried putting whitespaces between classes? And two, instead of selecting that div, maybe you can actually select the second div (not ideal but it can be a dirty fix until the solution has been figured out)"},{"owner":{"account_id":11954896,"reputation":519,"user_id":8747553,"display_name":"Truica Sorin"},"score":0,"creation_date":1539630979,"post_id":52823273,"comment_id":92563885,"body_markdown":"I&#39;ve tried that and it&#39;s not working:( i was thinking that maybe i&#39;m doing the checking in a wrong way","body":"I&#39;ve tried that and it&#39;s not working:( i was thinking that maybe i&#39;m doing the checking in a wrong way"},{"owner":{"account_id":3688125,"reputation":592,"user_id":3071446,"accept_rate":75,"display_name":"fasaas"},"score":0,"creation_date":1539631036,"post_id":52823273,"comment_id":92563915,"body_markdown":"Have you debugged the program to see if you actually are getting the correct `pageSearchPrice` object?","body":"Have you debugged the program to see if you actually are getting the correct <code>pageSearchPrice</code> object?"},{"owner":{"account_id":11954896,"reputation":519,"user_id":8747553,"display_name":"Truica Sorin"},"score":0,"creation_date":1539631249,"post_id":52823273,"comment_id":92564016,"body_markdown":"Yes, i mean pageSearchPrice returns the right number of elements but i need to check for every element if it has that div","body":"Yes, i mean pageSearchPrice returns the right number of elements but i need to check for every element if it has that div"},{"owner":{"account_id":3688125,"reputation":592,"user_id":3071446,"accept_rate":75,"display_name":"fasaas"},"score":0,"creation_date":1539631564,"post_id":52823273,"comment_id":92564138,"body_markdown":"Can you try making multiple `hasClass` calls? Such as `pageSearchPrice.get(j).hasClass(&quot;large-4&quot;) &amp;&amp; pageSearchPrice.get(j).hasClass(&quot;medium-5&quot;)` and so on? I would also suggest that looking for classes with dots, i.e. `.large-4` is not going to be valid","body":"Can you try making multiple <code>hasClass</code> calls? Such as <code>pageSearchPrice.get(j).hasClass(&quot;large-4&quot;) &amp;&amp; pageSearchPrice.get(j).hasClass(&quot;medium-5&quot;)</code> and so on? I would also suggest that looking for classes with dots, i.e. <code>.large-4</code> is not going to be valid"},{"owner":{"account_id":11954896,"reputation":519,"user_id":8747553,"display_name":"Truica Sorin"},"score":0,"creation_date":1539631790,"post_id":52823273,"comment_id":92564234,"body_markdown":"I&#39;ve tried that and it&#39;s not working:(","body":"I&#39;ve tried that and it&#39;s not working:("},{"owner":{"account_id":3688125,"reputation":592,"user_id":3071446,"accept_rate":75,"display_name":"fasaas"},"score":0,"creation_date":1539631819,"post_id":52823273,"comment_id":92564248,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/181904/discussion-between-mayhem-and-truica-sorin).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/181904/discussion-between-mayhem-and-truica-sorin\">continue this discussion in chat</a>."},{"owner":{"account_id":2570317,"reputation":11557,"user_id":2229229,"accept_rate":76,"display_name":"luksch"},"score":0,"creation_date":1540361499,"post_id":52823273,"comment_id":92830774,"body_markdown":"Side note: In your code you iterate over ```pageSearchTitle```, but in the loop body you read out ```pageSearchPrice```. Seems strange to me, why you would not loop over ```pageSearchPrice``` directly with a foreach loop","body":"Side note: In your code you iterate over <code>pageSearchTitle</code>, but in the loop body you read out <code>pageSearchPrice</code>. Seems strange to me, why you would not loop over <code>pageSearchPrice</code> directly with a foreach loop"},{"owner":{"account_id":2570317,"reputation":11557,"user_id":2229229,"accept_rate":76,"display_name":"luksch"},"score":0,"creation_date":1540361660,"post_id":52823273,"comment_id":92830837,"body_markdown":"What is not working about your code? Do you get an error, or is ```pageSearchPrice``` not containing the ```div``` you are loking for after all? Did you check with a debugger? If you get a StackTrace, please include it in your question.","body":"What is not working about your code? Do you get an error, or is <code>pageSearchPrice</code> not containing the <code>div</code> you are loking for after all? Did you check with a debugger? If you get a StackTrace, please include it in your question."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1696917935,"post_id":77248541,"comment_id":136210369,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77248541/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29617652,"reputation":1,"user_id":22699376,"display_name":"4evLover"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696657856,"creation_date":1696657856,"answer_id":77248541,"question_id":52823273,"body_markdown":"Maybe it will be better to choose an object and compare it with an empty string &quot;&quot;, if it turns out to be true, then there is no object, if it is false, it exists, or vice versa, as it is more convenient\r\n","title":"Jsoup Check if a tag exists","body":"<p>Maybe it will be better to choose an object and compare it with an empty string &quot;&quot;, if it turns out to be true, then there is no object, if it is false, it exists, or vice versa, as it is more convenient</p>\n"}],"owner":{"account_id":11954896,"reputation":519,"user_id":8747553,"display_name":"Truica Sorin"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":658,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696657856,"creation_date":1539630504,"question_id":52823273,"body_markdown":"I&#39;m using jsoup to extract some ads from a page and i need to check if a class exists but i&#39;m not doing it right:(\r\nHere is the html:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/U4tD9.png\r\n\r\nI need to check if the class .large-4.medium-5.large-text-right.medium-text-right.columns exists and if so, i need to extract the element inside  it but i&#39;ve got stuck at checking if that class exists:(\r\n\r\nHere is my code:\r\n\r\n        Elements pageSearchPrice = page2\r\n        \t\t\t\t\t\t\t.select(&quot;li[itemtype=https://schema.org/Offer] &gt; div[class=listing-data]&quot;);\r\n        for(int j=0; j &lt; pageSearchTitle.size(); j++) {\r\n           if(pageSearchPrice.get(j).hasClass(&quot;.large-4.medium-5.large-text-right.medium-text-right.columns&quot;)) {\r\n              String price = pageSearchPrice.get(j).select(&quot;strong[itemprop=price]&quot;).text();\r\n              list.get(index1).setPrice(price);\r\n              index1++;\r\n        }else {\r\n              list.get(index1).setPrice(&quot;No price&quot;);\r\n               index1++;\r\n        }\r\n    }\r\n\r\n","title":"Jsoup Check if a tag exists","body":"<p>I'm using jsoup to extract some ads from a page and i need to check if a class exists but i'm not doing it right:(\nHere is the html:\n<a href=\"https://i.stack.imgur.com/U4tD9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U4tD9.png\" alt=\"enter image description here\"></a></p>\n\n<p>I need to check if the class .large-4.medium-5.large-text-right.medium-text-right.columns exists and if so, i need to extract the element inside  it but i've got stuck at checking if that class exists:(</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    Elements pageSearchPrice = page2\n                                .select(\"li[itemtype=https://schema.org/Offer] &gt; div[class=listing-data]\");\n    for(int j=0; j &lt; pageSearchTitle.size(); j++) {\n       if(pageSearchPrice.get(j).hasClass(\".large-4.medium-5.large-text-right.medium-text-right.columns\")) {\n          String price = pageSearchPrice.get(j).select(\"strong[itemprop=price]\").text();\n          list.get(index1).setPrice(price);\n          index1++;\n    }else {\n          list.get(index1).setPrice(\"No price\");\n           index1++;\n    }\n}\n</code></pre>\n"},{"tags":["java","xml","android-studio","bottomsheetdialogfragment"],"comments":[{"owner":{"account_id":22580507,"reputation":821,"user_id":16765223,"display_name":"M DEV"},"score":0,"creation_date":1696767755,"post_id":77248450,"comment_id":136192973,"body_markdown":"this is not enough code to understand the problem. Add more code and explain properly. Your BottomNavigationView XML, code where you init your BottomNavigation.","body":"this is not enough code to understand the problem. Add more code and explain properly. Your BottomNavigationView XML, code where you init your BottomNavigation."}],"owner":{"account_id":29280357,"reputation":1,"user_id":22433098,"display_name":"Hero"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696656367,"creation_date":1696655799,"question_id":77248450,"body_markdown":"I have written code for bottom pop in fragment view. \r\n\r\n.JAVA\r\n```\r\nlanguages_btn.setOnClickListener(new View.OnClickListener() {\r\n  @Override\r\n  public void onClick(View v) {\r\n  BottomSheetFragment bottomSheetFragment = new BottomSheetFragment();\r\n  Bundle args = new Bundle();\r\n  args.putString(&quot;key&quot;, &quot;2&quot;);\r\n  bottomSheetFragment.setArguments(args);\r\n  bottomSheetFragment.show(getParentFragmentManager(), bottomSheetFragment.getTag());\r\n  }\r\n});\r\n```\r\n\r\n.XML\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_gravity=&quot;bottom&quot;\r\n    android:background=&quot;@android:color/white&quot;\r\n    tools:context=&quot;.BottomSheetFragment&quot;&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n\r\n    &lt;View\r\n        android:padding=&quot;20dp&quot;\r\n        android:layout_width=&quot;150dp&quot;\r\n        android:layout_height=&quot;6dp&quot;\r\n        android:layout_gravity=&quot;center&quot;\r\n        android:background=&quot;@color/cardview_shadow_start_color&quot; /&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/viewData&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:gravity=&quot;center&quot;/&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnClosePopup&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Close&quot;\r\n            android:layout_gravity=&quot;end&quot;/&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;RadioGroup\r\n        android:layout_marginTop=&quot;20dp&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:padding=&quot;15dp&quot;&gt;\r\n\r\n        &lt;RadioButton\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:text=&quot;English&quot;/&gt;\r\n\r\n        &lt;RadioButton\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:text=&quot;English&quot;/&gt;\r\n\r\n        &lt;RadioButton\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:text=&quot;English&quot;/&gt;\r\n\r\n    &lt;/RadioGroup&gt;\r\n\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n&lt;/LinearLayout&gt;\r\n\r\n```\r\n\r\n\r\nfor this I am getting output like this: \r\n[enter image description here](https://i.stack.imgur.com/vHHhr.jpg)\r\n[enter image description here](https://i.stack.imgur.com/8B5g0.jpg)\r\n\r\n\r\nbut, when i do this code in activity \r\n\r\n\r\n```\r\nbtnShowPopup.setOnClickListener(new View.OnClickListener() {\r\n  @Override\r\n  public void onClick(View v) {\r\n    BottomSheetFragment bottomSheetFragment = new BottomSheetFragment();\r\n    Bundle args = new Bundle();\r\n    args.putString(&quot;key&quot;, &quot;2&quot;);\r\n    bottomSheetFragment.setArguments(args);\r\n    bottomSheetFragment.show(getSupportFragmentManager(), bottomSheetFragment.getTag());\r\n  }\r\n});\r\n```\r\n[enter image description here](https://i.stack.imgur.com/37tot.jpg)\r\n[enter image description here](https://i.stack.imgur.com/IPsCw.jpg)\r\n\r\n\r\n\r\n\r\nhere I want to output as same as activity,\r\nwhen we click the \r\nbtnShowPopup btn then we can see the background of that activity \r\n\r\ni need same when we click on languages_btn btn then we need to able to see fragment in background.\r\n\r\nI use only Java XML Android Studio \r\n","title":"BottomSheetFragment is Do not working as expected in Fragment. Android Studio Java XML","body":"<p>I have written code for bottom pop in fragment view.</p>\n<p>.JAVA</p>\n<pre><code>languages_btn.setOnClickListener(new View.OnClickListener() {\n  @Override\n  public void onClick(View v) {\n  BottomSheetFragment bottomSheetFragment = new BottomSheetFragment();\n  Bundle args = new Bundle();\n  args.putString(&quot;key&quot;, &quot;2&quot;);\n  bottomSheetFragment.setArguments(args);\n  bottomSheetFragment.show(getParentFragmentManager(), bottomSheetFragment.getTag());\n  }\n});\n</code></pre>\n<p>.XML</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_gravity=&quot;bottom&quot;\n    android:background=&quot;@android:color/white&quot;\n    tools:context=&quot;.BottomSheetFragment&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n\n    &lt;View\n        android:padding=&quot;20dp&quot;\n        android:layout_width=&quot;150dp&quot;\n        android:layout_height=&quot;6dp&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:background=&quot;@color/cardview_shadow_start_color&quot; /&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/viewData&quot;\n            android:layout_width=&quot;0dp&quot;\n            android:layout_weight=&quot;1&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:gravity=&quot;center&quot;/&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnClosePopup&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Close&quot;\n            android:layout_gravity=&quot;end&quot;/&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;RadioGroup\n        android:layout_marginTop=&quot;20dp&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:padding=&quot;15dp&quot;&gt;\n\n        &lt;RadioButton\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:text=&quot;English&quot;/&gt;\n\n        &lt;RadioButton\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:text=&quot;English&quot;/&gt;\n\n        &lt;RadioButton\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:text=&quot;English&quot;/&gt;\n\n    &lt;/RadioGroup&gt;\n\n\n    &lt;/LinearLayout&gt;\n\n\n&lt;/LinearLayout&gt;\n\n</code></pre>\n<p>for this I am getting output like this:\n<a href=\"https://i.stack.imgur.com/vHHhr.jpg\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/8B5g0.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>but, when i do this code in activity</p>\n<pre><code>btnShowPopup.setOnClickListener(new View.OnClickListener() {\n  @Override\n  public void onClick(View v) {\n    BottomSheetFragment bottomSheetFragment = new BottomSheetFragment();\n    Bundle args = new Bundle();\n    args.putString(&quot;key&quot;, &quot;2&quot;);\n    bottomSheetFragment.setArguments(args);\n    bottomSheetFragment.show(getSupportFragmentManager(), bottomSheetFragment.getTag());\n  }\n});\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/37tot.jpg\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/IPsCw.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>here I want to output as same as activity,\nwhen we click the\nbtnShowPopup btn then we can see the background of that activity</p>\n<p>i need same when we click on languages_btn btn then we need to able to see fragment in background.</p>\n<p>I use only Java XML Android Studio</p>\n"},{"tags":["java","oop","awt"],"comments":[{"owner":{"account_id":251706,"reputation":5323,"user_id":529282,"display_name":"Martheen"},"score":1,"creation_date":1696494817,"post_id":77235429,"comment_id":136160937,"body_markdown":"https://stackoverflow.com/questions/258057/unable-to-change-font-in-java-awt-menubar implies there are some limitations in AWT with fonts, not sure if these have ever been fixed since later development were in Swing, which in turn has been replaced by JavaFX","body":"<a href=\"https://stackoverflow.com/questions/258057/unable-to-change-font-in-java-awt-menubar\" title=\"unable to change font in java awt menubar\">stackoverflow.com/questions/258057/&hellip;</a> implies there are some limitations in AWT with fonts, not sure if these have ever been fixed since later development were in Swing, which in turn has been replaced by JavaFX"},{"owner":{"account_id":29602914,"reputation":1,"user_id":22687928,"display_name":"Егор"},"score":0,"creation_date":1696495556,"post_id":77235429,"comment_id":136161120,"body_markdown":"oh... ok, thanks","body":"oh... ok, thanks"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1696496951,"post_id":77235429,"comment_id":136161425,"body_markdown":"Missing the **TextPanel** class.","body":"Missing the <b>TextPanel</b> class."},{"owner":{"account_id":29602914,"reputation":1,"user_id":22687928,"display_name":"Егор"},"score":0,"creation_date":1696533815,"post_id":77235429,"comment_id":136169155,"body_markdown":"it&#39;s in the program, didn&#39;t add it bc it&#39;s empty. forgot to comment some parts of code, sorry","body":"it&#39;s in the program, didn&#39;t add it bc it&#39;s empty. forgot to comment some parts of code, sorry"}],"answers":[{"comments":[{"owner":{"account_id":29602914,"reputation":1,"user_id":22687928,"display_name":"Егор"},"score":0,"creation_date":1696718217,"post_id":77248372,"comment_id":136189712,"body_markdown":"didn&#39;t help, still this problem","body":"didn&#39;t help, still this problem"}],"tags":[],"owner":{"account_id":29546559,"reputation":72,"user_id":22644160,"display_name":"الرحمن الرحیم"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696652884,"creation_date":1696652884,"answer_id":77248372,"question_id":77235429,"body_markdown":"try this changes. this should update the font of the label in real-time when you select different fonts, font styles, or font sizes in your gui:\r\n\r\n    public static void setFont(Font font) {\r\n        label.setFont(font);\r\n        main_window.revalidate(); // Revalidate the container to apply changes\r\n    }\r\n\r\n","title":"Why doesn&#39;t the font family change in my program?","body":"<p>try this changes. this should update the font of the label in real-time when you select different fonts, font styles, or font sizes in your gui:</p>\n<pre><code>public static void setFont(Font font) {\n    label.setFont(font);\n    main_window.revalidate(); // Revalidate the container to apply changes\n}\n</code></pre>\n"}],"owner":{"account_id":29602914,"reputation":1,"user_id":22687928,"display_name":"Егор"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696652884,"creation_date":1696494371,"question_id":77235429,"body_markdown":"Sorry for my bad english.\r\nI did laboratory work at the university, which consisted of implementing a graphical interface using java.awt. \r\nidk why, but when i try to change Font with my interface, it assignes to the label font, but it doen&#39;t change in the interface. However Font size and Font angle changes.\r\n\r\nMaybe it&#39;s sth stupid but i really don&#39;t know why it doesn&#39;t work\r\n\r\nHere is my code\r\n\r\nMain.java\r\n```\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        MainWindow mainWindow = new MainWindow();\r\n        MainWindow.set_main_window();\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nMainWindow.java\r\n```\r\nimport java.awt.*;\r\nimport java.util.Scanner;\r\n\r\npublic class MainWindow {\r\n\r\n    private static Frame main_window;\r\n    private static int height;\r\n    private static int width;\r\n    private static Label label;\r\n\r\n    MainWindow(){\r\n        main_window = new Frame();\r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.print(&quot;Width: &quot;);\r\n        width = sc.nextInt();\r\n        System.out.print(&quot;Height: &quot;);\r\n        height = sc.nextInt();\r\n        main_window.setSize(width, height);\r\n    }\r\n\r\n    public static int getHeight(){\r\n        return height;\r\n    }\r\n\r\n    public static int getWidth(){\r\n        return width;\r\n    }\r\n\r\n    public static void setFont(Font font){\r\n        label.setFont(font);\r\n        main_window.repaint();\r\n        //System.out.println(&quot;!!! &quot;+font.getFontName());\r\n        System.out.println(label.getFont().getFontName());\r\n    }\r\n\r\n    public static void set_main_window(){\r\n        Scanner sc = new Scanner(System.in);\r\n        ChooseFontPanel Panel2 = new ChooseFontPanel();\r\n        TextPanel Panel = new TextPanel();\r\n        //System.out.print(&quot;Type text: &quot;);\r\n        //String labelText = sc.next();\r\n        label = new Label(&quot;123&quot;);\r\n        label.setBounds(main_window.getWidth()/2,\r\n                main_window.getHeight()/6*5,\r\n                50,\r\n                25);\r\n        label.setFont(ChooseFontPanel.getFont());\r\n\r\n        List[] ListArray = ChooseFontPanel.getFontPanel();\r\n        for (List item: ListArray)\r\n            main_window.add(item);\r\n\r\n        TextField t = TextPanel.getTextInputField();\r\n\r\n        main_window.add(t);\r\n        main_window.add(label);\r\n        main_window.setLayout(null);\r\n        main_window.setVisible(true);\r\n    }\r\n}\r\n\r\n```\r\n\r\nChooseFontPanel.java\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\n\r\n\r\npublic class ChooseFontPanel{\r\n    private static String fontName = &quot;Agency FB&quot;;\r\n    private static int fontSize = 12;\r\n    private static int fontAngle = 0;\r\n    private static Font chosenFont = new Font(fontName,fontAngle,fontSize);\r\n    private static List fontList;\r\n    private static List fontTypeList;\r\n    private static List fontSizeList;\r\n    public static List[] getFontPanel(){\r\n        return new List[] {fontList,fontTypeList,fontSizeList};\r\n    }\r\n\r\n    public static List getFontList(){\r\n        return fontList;\r\n    }\r\n    public static List getFontTypeList(){\r\n        return fontTypeList;\r\n    }\r\n    public static List getFontSizeList(){\r\n        return fontSizeList;\r\n    }\r\n    public static Font getFont(){\r\n        return chosenFont;\r\n    }\r\n    ChooseFontPanel() {\r\n\r\n        fontList = new List(267,false);\r\n        String fontArray[] =\r\n                GraphicsEnvironment.getLocalGraphicsEnvironment().getAvailableFontFamilyNames();\r\n        for(int i=0;i&lt;fontArray.length;i++) fontList.add(fontArray[i]);\r\n\r\n\r\n        fontList.setBounds(10,\r\n                MainWindow.getHeight()/3,\r\n                MainWindow.getWidth()/3,\r\n                MainWindow.getHeight()/3\r\n        );\r\n        fontList.select(0);\r\n        fontList.addActionListener(new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                //System.out.print(fontName+&quot;-&gt;&quot;);\r\n                fontName = fontList.getSelectedItem();\r\n                chosenFont = new Font(fontName,fontAngle,fontSize);\r\n                MainWindow.setFont(chosenFont);\r\n\r\n                //System.out.println(fontName);\r\n                //System.out.println(chosenfont.getFontName());\r\n            }\r\n        });\r\n\r\n        fontTypeList = new List(3,false);\r\n        fontTypeList.add(&quot;Plain&quot;);\r\n        fontTypeList.add(&quot;Bold&quot;);\r\n        fontTypeList.add(&quot;Italic&quot;);\r\n        fontTypeList.setBounds(MainWindow.getWidth()/3+10,\r\n                MainWindow.getHeight()/3,\r\n                MainWindow.getWidth()/3,\r\n                MainWindow.getHeight()/3\r\n        );\r\n        fontTypeList.select(0);\r\n        fontTypeList.addActionListener(new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                //System.out.print(fontAngle+&quot;-&gt;&quot;);\r\n                fontAngle = fontTypeList.getSelectedIndex();\r\n                chosenFont = new Font(fontName,fontAngle,fontSize);\r\n                MainWindow.setFont(chosenFont);\r\n                //System.out.println(fontAngle);\r\n\r\n            }\r\n        });\r\n\r\n        fontSizeList = new List(40,false);\r\n        for(int i=2;i&lt;=80;i+=2){\r\n            fontSizeList.add(String.valueOf(i));\r\n        }\r\n        fontSizeList.setBounds(MainWindow.getWidth()/3*2+10,\r\n                MainWindow.getHeight()/3,\r\n                MainWindow.getWidth()/3-15,\r\n                MainWindow.getHeight()/3\r\n        );\r\n        fontSizeList.select(5);\r\n\r\n        fontSizeList.addActionListener(new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                //System.out.println(fontSizeList.getSelectedItem());\r\n                //System.out.print(fontSize+&quot;-&gt;&quot;);\r\n                fontSize = Integer.parseInt(fontSizeList.getSelectedItem());\r\n                chosenFont = new Font(fontName,fontAngle,fontSize);\r\n                MainWindow.setFont(chosenFont);\r\n                //System.out.println(fontSize);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nP.S. I know this code is bad, sorry haha","title":"Why doesn&#39;t the font family change in my program?","body":"<p>Sorry for my bad english.\nI did laboratory work at the university, which consisted of implementing a graphical interface using java.awt.\nidk why, but when i try to change Font with my interface, it assignes to the label font, but it doen't change in the interface. However Font size and Font angle changes.</p>\n<p>Maybe it's sth stupid but i really don't know why it doesn't work</p>\n<p>Here is my code</p>\n<p>Main.java</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n\n        MainWindow mainWindow = new MainWindow();\n        MainWindow.set_main_window();\n\n    }\n}\n\n</code></pre>\n<p>MainWindow.java</p>\n<pre><code>import java.awt.*;\nimport java.util.Scanner;\n\npublic class MainWindow {\n\n    private static Frame main_window;\n    private static int height;\n    private static int width;\n    private static Label label;\n\n    MainWindow(){\n        main_window = new Frame();\n        Scanner sc = new Scanner(System.in);\n        System.out.print(&quot;Width: &quot;);\n        width = sc.nextInt();\n        System.out.print(&quot;Height: &quot;);\n        height = sc.nextInt();\n        main_window.setSize(width, height);\n    }\n\n    public static int getHeight(){\n        return height;\n    }\n\n    public static int getWidth(){\n        return width;\n    }\n\n    public static void setFont(Font font){\n        label.setFont(font);\n        main_window.repaint();\n        //System.out.println(&quot;!!! &quot;+font.getFontName());\n        System.out.println(label.getFont().getFontName());\n    }\n\n    public static void set_main_window(){\n        Scanner sc = new Scanner(System.in);\n        ChooseFontPanel Panel2 = new ChooseFontPanel();\n        TextPanel Panel = new TextPanel();\n        //System.out.print(&quot;Type text: &quot;);\n        //String labelText = sc.next();\n        label = new Label(&quot;123&quot;);\n        label.setBounds(main_window.getWidth()/2,\n                main_window.getHeight()/6*5,\n                50,\n                25);\n        label.setFont(ChooseFontPanel.getFont());\n\n        List[] ListArray = ChooseFontPanel.getFontPanel();\n        for (List item: ListArray)\n            main_window.add(item);\n\n        TextField t = TextPanel.getTextInputField();\n\n        main_window.add(t);\n        main_window.add(label);\n        main_window.setLayout(null);\n        main_window.setVisible(true);\n    }\n}\n\n</code></pre>\n<p>ChooseFontPanel.java</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\n\npublic class ChooseFontPanel{\n    private static String fontName = &quot;Agency FB&quot;;\n    private static int fontSize = 12;\n    private static int fontAngle = 0;\n    private static Font chosenFont = new Font(fontName,fontAngle,fontSize);\n    private static List fontList;\n    private static List fontTypeList;\n    private static List fontSizeList;\n    public static List[] getFontPanel(){\n        return new List[] {fontList,fontTypeList,fontSizeList};\n    }\n\n    public static List getFontList(){\n        return fontList;\n    }\n    public static List getFontTypeList(){\n        return fontTypeList;\n    }\n    public static List getFontSizeList(){\n        return fontSizeList;\n    }\n    public static Font getFont(){\n        return chosenFont;\n    }\n    ChooseFontPanel() {\n\n        fontList = new List(267,false);\n        String fontArray[] =\n                GraphicsEnvironment.getLocalGraphicsEnvironment().getAvailableFontFamilyNames();\n        for(int i=0;i&lt;fontArray.length;i++) fontList.add(fontArray[i]);\n\n\n        fontList.setBounds(10,\n                MainWindow.getHeight()/3,\n                MainWindow.getWidth()/3,\n                MainWindow.getHeight()/3\n        );\n        fontList.select(0);\n        fontList.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                //System.out.print(fontName+&quot;-&gt;&quot;);\n                fontName = fontList.getSelectedItem();\n                chosenFont = new Font(fontName,fontAngle,fontSize);\n                MainWindow.setFont(chosenFont);\n\n                //System.out.println(fontName);\n                //System.out.println(chosenfont.getFontName());\n            }\n        });\n\n        fontTypeList = new List(3,false);\n        fontTypeList.add(&quot;Plain&quot;);\n        fontTypeList.add(&quot;Bold&quot;);\n        fontTypeList.add(&quot;Italic&quot;);\n        fontTypeList.setBounds(MainWindow.getWidth()/3+10,\n                MainWindow.getHeight()/3,\n                MainWindow.getWidth()/3,\n                MainWindow.getHeight()/3\n        );\n        fontTypeList.select(0);\n        fontTypeList.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                //System.out.print(fontAngle+&quot;-&gt;&quot;);\n                fontAngle = fontTypeList.getSelectedIndex();\n                chosenFont = new Font(fontName,fontAngle,fontSize);\n                MainWindow.setFont(chosenFont);\n                //System.out.println(fontAngle);\n\n            }\n        });\n\n        fontSizeList = new List(40,false);\n        for(int i=2;i&lt;=80;i+=2){\n            fontSizeList.add(String.valueOf(i));\n        }\n        fontSizeList.setBounds(MainWindow.getWidth()/3*2+10,\n                MainWindow.getHeight()/3,\n                MainWindow.getWidth()/3-15,\n                MainWindow.getHeight()/3\n        );\n        fontSizeList.select(5);\n\n        fontSizeList.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                //System.out.println(fontSizeList.getSelectedItem());\n                //System.out.print(fontSize+&quot;-&gt;&quot;);\n                fontSize = Integer.parseInt(fontSizeList.getSelectedItem());\n                chosenFont = new Font(fontName,fontAngle,fontSize);\n                MainWindow.setFont(chosenFont);\n                //System.out.println(fontSize);\n            }\n        });\n    }\n\n}\n\n</code></pre>\n<p>P.S. I know this code is bad, sorry haha</p>\n"},{"tags":["java","spring","spring-boot","rest","spring-mvc"],"comments":[{"owner":{"account_id":8206242,"reputation":1370,"user_id":6175872,"display_name":"PatrickChen"},"score":0,"creation_date":1588732728,"post_id":61626367,"comment_id":109009838,"body_markdown":"What&#39;s the issue? you don&#39;t know how to return the response?","body":"What&#39;s the issue? you don&#39;t know how to return the response?"},{"owner":{"account_id":7398689,"reputation":67,"user_id":5629799,"display_name":"Ravi Kumar"},"score":0,"creation_date":1588733144,"post_id":61626367,"comment_id":109009943,"body_markdown":"I want to download the csv file through this api, I have tried several ways but its failing.","body":"I want to download the csv file through this api, I have tried several ways but its failing."},{"owner":{"account_id":8206242,"reputation":1370,"user_id":6175872,"display_name":"PatrickChen"},"score":0,"creation_date":1588733304,"post_id":61626367,"comment_id":109009980,"body_markdown":"better list the code or the exception,  there are many ways you can download the file through API, check this https://stackoverflow.com/questions/35680932/download-a-file-from-spring-boot-rest-service","body":"better list the code or the exception,  there are many ways you can download the file through API, check this <a href=\"https://stackoverflow.com/questions/35680932/download-a-file-from-spring-boot-rest-service\" title=\"download a file from spring boot rest service\">stackoverflow.com/questions/35680932/&hellip;</a>"},{"owner":{"account_id":7398689,"reputation":67,"user_id":5629799,"display_name":"Ravi Kumar"},"score":0,"creation_date":1588733935,"post_id":61626367,"comment_id":109010114,"body_markdown":"I have tried but the file is empty, no content is present","body":"I have tried but the file is empty, no content is present"},{"owner":{"account_id":8206242,"reputation":1370,"user_id":6175872,"display_name":"PatrickChen"},"score":0,"creation_date":1588734085,"post_id":61626367,"comment_id":109010152,"body_markdown":"make sure the media-type is correct, I post some my old code example, you could try","body":"make sure the media-type is correct, I post some my old code example, you could try"}],"answers":[{"tags":[],"owner":{"account_id":8206242,"reputation":1370,"user_id":6175872,"display_name":"PatrickChen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588734199,"creation_date":1588734199,"answer_id":61626642,"question_id":61626367,"body_markdown":"```java\r\n//image\r\n@GetMapping(value = &quot;/image&quot;)\r\npublic @ResponseBody byte[] getImage() throws IOException {\r\n    InputStream in = getClass()\r\n      .getResourceAsStream(&quot;/com/baeldung/produceimage/image.jpg&quot;);\r\n    return IOUtils.toByteArray(in);\r\n}\r\n\r\n\r\n//normal file\r\n@GetMapping(\r\n  value = &quot;/get-file&quot;,\r\n  produces = MediaType.APPLICATION_OCTET_STREAM_VALUE\r\n)\r\npublic @ResponseBody byte[] getFile() throws IOException {\r\n    InputStream in = getClass()\r\n      .getResourceAsStream(&quot;/com/baeldung/produceimage/data.txt&quot;);\r\n    return IOUtils.toByteArray(in);\r\n}\r\n\r\n```","title":"How to download csv file using spring boot controller with contents?","body":"<pre class=\"lang-java prettyprint-override\"><code>//image\n@GetMapping(value = \"/image\")\npublic @ResponseBody byte[] getImage() throws IOException {\n    InputStream in = getClass()\n      .getResourceAsStream(\"/com/baeldung/produceimage/image.jpg\");\n    return IOUtils.toByteArray(in);\n}\n\n\n//normal file\n@GetMapping(\n  value = \"/get-file\",\n  produces = MediaType.APPLICATION_OCTET_STREAM_VALUE\n)\npublic @ResponseBody byte[] getFile() throws IOException {\n    InputStream in = getClass()\n      .getResourceAsStream(\"/com/baeldung/produceimage/data.txt\");\n    return IOUtils.toByteArray(in);\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13691149,"reputation":76,"user_id":9878888,"display_name":"Li danyang"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1588736248,"creation_date":1588736248,"answer_id":61626972,"question_id":61626367,"body_markdown":"    HSSFWorkbook wb = new HSSFWorkbook();\r\n    HSSFSheet sheet=wkb.createSheet(&quot;sheet1&quot;);\r\n    HSSFRow row1=sheet.createRow(0);\r\n    HSSFCell cell=row1.createCell(0);\r\n    cell.setCellValue(&quot;table_demo&quot;);\r\n    sheet.addMergedRegion(new CellRangeAddress(0,0,0,3));\r\n    \r\n    //input Excel date\r\n    HSSFRow row2=sheet.createRow(1);    \r\n    row2.createCell(0).setCellValue(&quot;name&quot;);\r\n    row2.createCell(1).setCellValue(&quot;class&quot;);    \r\n    row2.createCell(2).setCellValue(&quot;score_1&quot;);\r\n    row2.createCell(3).setCellValue(&quot;score_2&quot;);    \r\n    HSSFRow row3=sheet.createRow(2);\r\n    row3.createCell(0).setCellValue(&quot;Jeams&quot;);\r\n    row3.createCell(1).setCellValue(&quot;High 3&quot;);\r\n    row3.createCell(2).setCellValue(87);    \r\n    row3.createCell(3).setCellValue(78);    \r\n     \r\n    //output Excel file\r\n    OutputStream output=response.getOutputStream();\r\n    response.reset();\r\n    response.setHeader(&quot;Content-disposition&quot;, &quot;attachment; filename=details.xls&quot;);\r\n    response.setContentType(&quot;application/msexcel&quot;);        \r\n    wkb.write(output);\r\n    output.close();\r\n\r\nThis code can get a simple excel file","title":"How to download csv file using spring boot controller with contents?","body":"<pre><code>HSSFWorkbook wb = new HSSFWorkbook();\nHSSFSheet sheet=wkb.createSheet(\"sheet1\");\nHSSFRow row1=sheet.createRow(0);\nHSSFCell cell=row1.createCell(0);\ncell.setCellValue(\"table_demo\");\nsheet.addMergedRegion(new CellRangeAddress(0,0,0,3));\n\n//input Excel date\nHSSFRow row2=sheet.createRow(1);    \nrow2.createCell(0).setCellValue(\"name\");\nrow2.createCell(1).setCellValue(\"class\");    \nrow2.createCell(2).setCellValue(\"score_1\");\nrow2.createCell(3).setCellValue(\"score_2\");    \nHSSFRow row3=sheet.createRow(2);\nrow3.createCell(0).setCellValue(\"Jeams\");\nrow3.createCell(1).setCellValue(\"High 3\");\nrow3.createCell(2).setCellValue(87);    \nrow3.createCell(3).setCellValue(78);    \n\n//output Excel file\nOutputStream output=response.getOutputStream();\nresponse.reset();\nresponse.setHeader(\"Content-disposition\", \"attachment; filename=details.xls\");\nresponse.setContentType(\"application/msexcel\");        \nwkb.write(output);\noutput.close();\n</code></pre>\n\n<p>This code can get a simple excel file</p>\n"},{"tags":[],"owner":{"account_id":18921485,"reputation":1,"user_id":13805464,"display_name":"Udaya Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696652123,"creation_date":1696652123,"answer_id":77248345,"question_id":61626367,"body_markdown":"To get the output or response in csv format we have to use open csv dependencies or apachepoicsv dependency.\r\nWhile we use HSSF (Horrible Spreadsheet Format) − It is used to read and write xls format of MS-Excel files.\r\n\r\nXSSF (XML Spreadsheet Format) − It is used for xlsx file format of MS-Excel.","title":"How to download csv file using spring boot controller with contents?","body":"<p>To get the output or response in csv format we have to use open csv dependencies or apachepoicsv dependency.\nWhile we use HSSF (Horrible Spreadsheet Format) − It is used to read and write xls format of MS-Excel files.</p>\n<p>XSSF (XML Spreadsheet Format) − It is used for xlsx file format of MS-Excel.</p>\n"}],"owner":{"account_id":7398689,"reputation":67,"user_id":5629799,"display_name":"Ravi Kumar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12266,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":61626972,"answer_count":3,"score":4,"last_activity_date":1696652123,"creation_date":1588732333,"question_id":61626367,"body_markdown":"I am facing the issue while downloading the csv file. I have created get api in spring boot and wanted to download the file through that api. Here is my code.\r\n\r\n    @GetMapping(value = &quot;/citydetails/download&quot;)\r\n\tpublic ResponseEntity&lt;Object&gt; getCityDetails() throws IOException {\r\n\t\tSystem.out.println(&quot;Starting the rest call.&quot;);\r\n\t\tFileWriter filewriter = null;\r\n\t\tservice = new LocalityService();\r\n\t\ttry {\r\n\t\t\tList&lt;CityDetails&gt; details = service.getCityDetailsList();\r\n\t\t\tif (details.isEmpty()) {\r\n\t\t\t\tSystem.out.println(&quot;List is empty.&quot;);\r\n\t\t\t}\r\n\t\t\tStringBuilder fileContent = new StringBuilder(&quot;STATE,DISTRICT,CITY,VILLAGE,PIN\\n&quot;);\r\n\t\t\tfor (CityDetails data : details)\r\n\t\t\t\tfileContent.append(data.getStatename()).append(data.getDistrict()).append(data.getCity())\r\n\t\t\t\t\t\t.append(data.getVillage()).append(data.getPindode());\r\n\r\n\t\t\tXSSFWorkbook workbook = service.saveFileContents(details);\r\n\t\t\tString filename = &quot;C:\\\\Users\\\\&quot; + System.getProperty(&quot;user.name&quot;) + &quot;\\\\Downloads\\\\cityDetails.csv&quot;;\r\n\t\t\tFileOutputStream out = new FileOutputStream(filename);\r\n\t\t\tFile file = new File(&quot;cityDetails.csv&quot;);\r\n\t\t\tworkbook.write(out);\r\n\t\t\tout = new FileOutputStream(file);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\treturn ResponseEntity.ok()\r\n\t                .contentType(MediaType.parseMediaType(&quot;text/csv&quot;))\r\n\t                .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + &quot;cityDetails.csv&quot; + &quot;\\&quot;&quot;)\r\n\t                .body(file);\r\n\t\t} catch (Exception ex) {\r\n\t\t\tSystem.out.println(&quot;Failed to execute rest&quot; + ex.getStackTrace() + &quot;Locale: &quot; + ex.getLocalizedMessage());\r\n\t\t\tErrorDetails errorDetails = new ErrorDetails(new Date(), ex.getMessage(), &quot;false&quot;);\r\n\t\t\treturn new ResponseEntity&lt;&gt;(errorDetails, HttpStatus.INTERNAL_SERVER_ERROR);\r\n\t\t} finally {\r\n\t\t\tif (filewriter != null)\r\n\t\t\t\tfilewriter.close();\r\n\t\t}\r\n\t}\r\n\r\n**Exception:**\r\n[![enter image description here][1]][1]\r\n\r\nHere i have used XSSFWorkbook to save my content to csv. Now i wanted to download the csv file through Rest api which will contain the data.I have tried multiple ways but i am getting empty file.With the above code it will save the csv file in download folder in windows machine, but i want this api to work on every system so I wanted to download the csv file with contents instead of saving it to specific location. I am facing the issue, how to resolve that?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X9FfS.png","title":"How to download csv file using spring boot controller with contents?","body":"<p>I am facing the issue while downloading the csv file. I have created get api in spring boot and wanted to download the file through that api. Here is my code.</p>\n\n<pre><code>@GetMapping(value = \"/citydetails/download\")\npublic ResponseEntity&lt;Object&gt; getCityDetails() throws IOException {\n    System.out.println(\"Starting the rest call.\");\n    FileWriter filewriter = null;\n    service = new LocalityService();\n    try {\n        List&lt;CityDetails&gt; details = service.getCityDetailsList();\n        if (details.isEmpty()) {\n            System.out.println(\"List is empty.\");\n        }\n        StringBuilder fileContent = new StringBuilder(\"STATE,DISTRICT,CITY,VILLAGE,PIN\\n\");\n        for (CityDetails data : details)\n            fileContent.append(data.getStatename()).append(data.getDistrict()).append(data.getCity())\n                    .append(data.getVillage()).append(data.getPindode());\n\n        XSSFWorkbook workbook = service.saveFileContents(details);\n        String filename = \"C:\\\\Users\\\\\" + System.getProperty(\"user.name\") + \"\\\\Downloads\\\\cityDetails.csv\";\n        FileOutputStream out = new FileOutputStream(filename);\n        File file = new File(\"cityDetails.csv\");\n        workbook.write(out);\n        out = new FileOutputStream(file);\n\n\n        return ResponseEntity.ok()\n                .contentType(MediaType.parseMediaType(\"text/csv\"))\n                .header(HttpHeaders.CONTENT_DISPOSITION, \"attachment; filename=\\\"\" + \"cityDetails.csv\" + \"\\\"\")\n                .body(file);\n    } catch (Exception ex) {\n        System.out.println(\"Failed to execute rest\" + ex.getStackTrace() + \"Locale: \" + ex.getLocalizedMessage());\n        ErrorDetails errorDetails = new ErrorDetails(new Date(), ex.getMessage(), \"false\");\n        return new ResponseEntity&lt;&gt;(errorDetails, HttpStatus.INTERNAL_SERVER_ERROR);\n    } finally {\n        if (filewriter != null)\n            filewriter.close();\n    }\n}\n</code></pre>\n\n<p><strong>Exception:</strong>\n<a href=\"https://i.stack.imgur.com/X9FfS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X9FfS.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here i have used XSSFWorkbook to save my content to csv. Now i wanted to download the csv file through Rest api which will contain the data.I have tried multiple ways but i am getting empty file.With the above code it will save the csv file in download folder in windows machine, but i want this api to work on every system so I wanted to download the csv file with contents instead of saving it to specific location. I am facing the issue, how to resolve that?</p>\n"},{"tags":["java","button","focus","swt"],"answers":[{"tags":[],"owner":{"account_id":2002472,"reputation":85,"user_id":1927719,"accept_rate":40,"display_name":"KILL3RTACO"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443517426,"creation_date":1443517426,"answer_id":32839981,"question_id":32839943,"body_markdown":"Perhaps the easiest work around to this is by using the following steps:\r\n\r\n 1. Create a dummy button that doesn&#39;t do anything\r\n 2. Assign the focus to that button\r\n 3. Hide it (position it so it can&#39;t be seen)\r\n\r\nThis is most easily done if you are using a `FormLayout`:\r\n\r\n    Button dummy = new Button(parent, SWT.PUSH)\r\n    dummy.setFocus()\r\n    FormData data = new FormData();\r\n    data.bottom = new FormAttachment(-1);\r\n    dummy.setLayoutData(data);\r\n\r\nThis is assuming the parent `Composite`&#39;s `clientArea` takes up the entire  window, or is positioned at the top.\r\n\r\n## Full working example\r\n\r\n    import org.eclipse.swt.SWT;\r\n    import org.eclipse.swt.layout.FillLayout;\r\n    import org.eclipse.swt.layout.FormAttachment;\r\n    import org.eclipse.swt.layout.FormData;\r\n    import org.eclipse.swt.layout.FormLayout;\r\n    import org.eclipse.swt.widgets.Button;\r\n    import org.eclipse.swt.widgets.Composite;\r\n    import org.eclipse.swt.widgets.Display;\r\n    import org.eclipse.swt.widgets.Shell;\r\n    \r\n    public class SOClass {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tDisplay d = new Display();\r\n    \t\tShell shell = new Shell(d);\r\n    \t\tshell.setSize(500, 500);\r\n    \t\tshell.setText(&quot;Remove focus from first button&quot;);\r\n    \t\t\r\n    \t\tshell.setLayout(new FillLayout());\r\n    \t\t\r\n    \t\tComposite comp = new Composite(shell, SWT.NONE);\r\n    \t\tcomp.setLayout(new FormLayout());\r\n    \t\t\r\n    \t\tint style = SWT.PUSH | SWT.BORDER;\r\n    \t\tButton b1 = new Button(comp, style);\r\n    \t\tButton b2 = new Button(comp, style);\r\n    \t\t\r\n    \t\tb1.setText(&quot;Button 1&quot;);\r\n    \t\t//position: top, spanning the majority of the windows width\r\n    \t\tFormData b1Data = new FormData();\r\n    \t\tb1Data.top = new FormAttachment(0, 5);\r\n    \t\tb1Data.left = new FormAttachment(0, 5);\r\n    \t\tb1Data.right = new FormAttachment(100, -5);\r\n    \t\tb1.setLayoutData(b1Data);\r\n    \t\t\r\n    \t\tb2.setText(&quot;Button 2&quot;);\r\n    \t\t//position: under b1, spanning the majority of the windows width\r\n    \t\tFormData b2Data = new FormData();\r\n    \t\tb2Data.top = new FormAttachment(b1, 5);\r\n    \t\tb2Data.left = new FormAttachment(0, 5);\r\n    \t\tb2Data.right = new FormAttachment(100, -5);\r\n    \t\tb2.setLayoutData(b2Data);\r\n    \t\t\r\n    \t\t//try removing/commenting this section to see the effect\r\n    \t\tButton dummy = new Button(comp, style);\r\n    \t\tdummy.setFocus();\r\n    \t\tFormData dummyData = new FormData();\r\n    \t\tdummyData.bottom = new FormAttachment(-1);\r\n    \t\tdummy.setLayoutData(dummyData);\r\n    \t\t\r\n    \t\tshell.open();\r\n    \t\t\r\n    \t\twhile (!shell.isDisposed()) {\r\n    \t\t\tif(!d.readAndDispatch())\r\n    \t\t\t\td.sleep();\r\n    \t\t}\r\n    \t\td.dispose();\r\n    \t}\r\n    \t\r\n    }\r\n\r\n## Why does this work?\r\nThe dummy button is still usable, you are still able to click it (physically and programmatically), but it isn&#39;t visible, so to the user it  looks like a button wasn&#39;t assigned focus.\r\n\r\n`Button.setVisible(false)` does not work for this - The button is recognized by SWT as hidden and SWT therefore looks for the next button to give focus to.\r\n\r\nIf you need to remove focus on any of the buttons again, you can simply use `dummy.setFocus()`","title":"SWT - Remove Focus from Button/Control in Shell","body":"<p>Perhaps the easiest work around to this is by using the following steps:</p>\n\n<ol>\n<li>Create a dummy button that doesn't do anything</li>\n<li>Assign the focus to that button</li>\n<li>Hide it (position it so it can't be seen)</li>\n</ol>\n\n<p>This is most easily done if you are using a <code>FormLayout</code>:</p>\n\n<pre><code>Button dummy = new Button(parent, SWT.PUSH)\ndummy.setFocus()\nFormData data = new FormData();\ndata.bottom = new FormAttachment(-1);\ndummy.setLayoutData(data);\n</code></pre>\n\n<p>This is assuming the parent <code>Composite</code>'s <code>clientArea</code> takes up the entire  window, or is positioned at the top.</p>\n\n<h2>Full working example</h2>\n\n<pre><code>import org.eclipse.swt.SWT;\nimport org.eclipse.swt.layout.FillLayout;\nimport org.eclipse.swt.layout.FormAttachment;\nimport org.eclipse.swt.layout.FormData;\nimport org.eclipse.swt.layout.FormLayout;\nimport org.eclipse.swt.widgets.Button;\nimport org.eclipse.swt.widgets.Composite;\nimport org.eclipse.swt.widgets.Display;\nimport org.eclipse.swt.widgets.Shell;\n\npublic class SOClass {\n\n    public static void main(String[] args) {\n        Display d = new Display();\n        Shell shell = new Shell(d);\n        shell.setSize(500, 500);\n        shell.setText(\"Remove focus from first button\");\n\n        shell.setLayout(new FillLayout());\n\n        Composite comp = new Composite(shell, SWT.NONE);\n        comp.setLayout(new FormLayout());\n\n        int style = SWT.PUSH | SWT.BORDER;\n        Button b1 = new Button(comp, style);\n        Button b2 = new Button(comp, style);\n\n        b1.setText(\"Button 1\");\n        //position: top, spanning the majority of the windows width\n        FormData b1Data = new FormData();\n        b1Data.top = new FormAttachment(0, 5);\n        b1Data.left = new FormAttachment(0, 5);\n        b1Data.right = new FormAttachment(100, -5);\n        b1.setLayoutData(b1Data);\n\n        b2.setText(\"Button 2\");\n        //position: under b1, spanning the majority of the windows width\n        FormData b2Data = new FormData();\n        b2Data.top = new FormAttachment(b1, 5);\n        b2Data.left = new FormAttachment(0, 5);\n        b2Data.right = new FormAttachment(100, -5);\n        b2.setLayoutData(b2Data);\n\n        //try removing/commenting this section to see the effect\n        Button dummy = new Button(comp, style);\n        dummy.setFocus();\n        FormData dummyData = new FormData();\n        dummyData.bottom = new FormAttachment(-1);\n        dummy.setLayoutData(dummyData);\n\n        shell.open();\n\n        while (!shell.isDisposed()) {\n            if(!d.readAndDispatch())\n                d.sleep();\n        }\n        d.dispose();\n    }\n\n}\n</code></pre>\n\n<h2>Why does this work?</h2>\n\n<p>The dummy button is still usable, you are still able to click it (physically and programmatically), but it isn't visible, so to the user it  looks like a button wasn't assigned focus.</p>\n\n<p><code>Button.setVisible(false)</code> does not work for this - The button is recognized by SWT as hidden and SWT therefore looks for the next button to give focus to.</p>\n\n<p>If you need to remove focus on any of the buttons again, you can simply use <code>dummy.setFocus()</code></p>\n"},{"comments":[{"owner":{"account_id":1558798,"reputation":36540,"user_id":1449199,"accept_rate":95,"display_name":"Baz"},"score":1,"creation_date":1443524173,"post_id":32841936,"comment_id":53518537,"body_markdown":"Works on Windows as well.","body":"Works on Windows as well."}],"tags":[],"owner":{"account_id":3214311,"reputation":517,"user_id":2713504,"accept_rate":80,"display_name":"Kuba"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1443523645,"creation_date":1443523645,"answer_id":32841936,"question_id":32839943,"body_markdown":"Instead of creating dummy/unnecessary button You can just focus your shell:\r\n\r\n    shell.open();\r\n    shell.forceFocus();\r\n\r\nThis do the trick at least in gtk.","title":"SWT - Remove Focus from Button/Control in Shell","body":"<p>Instead of creating dummy/unnecessary button You can just focus your shell:</p>\n\n<pre><code>shell.open();\nshell.forceFocus();\n</code></pre>\n\n<p>This do the trick at least in gtk.</p>\n"},{"tags":[],"owner":{"account_id":44321,"reputation":9248,"user_id":130028,"accept_rate":79,"display_name":"marcolopes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696651252,"creation_date":1696651252,"answer_id":77248320,"question_id":32839943,"body_markdown":"    Button button=new Button(shell, SWT.PUSH);\r\n    button.setVisible(false); // hide &amp; avoid focus\r\n    shell.setDefaultButton(button);\r\n","title":"SWT - Remove Focus from Button/Control in Shell","body":"<pre><code>Button button=new Button(shell, SWT.PUSH);\nbutton.setVisible(false); // hide &amp; avoid focus\nshell.setDefaultButton(button);\n</code></pre>\n"}],"owner":{"account_id":2002472,"reputation":85,"user_id":1927719,"accept_rate":40,"display_name":"KILL3RTACO"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1909,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1696651252,"creation_date":1443517322,"question_id":32839943,"body_markdown":"I have a window that contains a few buttons (the window acts as a starting page). When I first create and open the `Shell`, the first `Button` created is assigned the focus. Is there a way to remove the focus from this `Button`?\r\n\r\nUsing `SWT.NO_FOCUS` does not help.","title":"SWT - Remove Focus from Button/Control in Shell","body":"<p>I have a window that contains a few buttons (the window acts as a starting page). When I first create and open the <code>Shell</code>, the first <code>Button</code> created is assigned the focus. Is there a way to remove the focus from this <code>Button</code>?</p>\n\n<p>Using <code>SWT.NO_FOCUS</code> does not help.</p>\n"},{"tags":["java","ascii"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679144490,"post_id":75776010,"comment_id":133670741,"body_markdown":"The reason you get the same value each time is because your `ascii` variable is assigned *before* user input and is not changed thereafter","body":"The reason you get the same value each time is because your <code>ascii</code> variable is assigned <i>before</i> user input and is not changed thereafter"},{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":0,"creation_date":1679145086,"post_id":75776010,"comment_id":133670847,"body_markdown":"`=` is assignment, which happens when the statement is executed.  It is not some sort of declaration of mathematical identity, such that &#39;ascii&#39; will always depend on the current value of &#39;character&#39;.","body":"<code>=</code> is assignment, which happens when the statement is executed.  It is not some sort of declaration of mathematical identity, such that &#39;ascii&#39; will always depend on the current value of &#39;character&#39;."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1679145433,"post_id":75776010,"comment_id":133670914,"body_markdown":"Even if fixed, your code will not necessarily produce ASCII values, it will produce UTF-16 codepoint values, only Unicode codepoints 0 - 127 (U+0000 - U+007F) are also ASCII, all codepoints beyond that are not ASCII.","body":"Even if fixed, your code will not necessarily produce ASCII values, it will produce UTF-16 codepoint values, only Unicode codepoints 0 - 127 (U+0000 - U+007F) are also ASCII, all codepoints beyond that are not ASCII."}],"answers":[{"tags":[],"owner":{"account_id":11884902,"reputation":193,"user_id":8697563,"display_name":"Santosh Sagar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679144296,"creation_date":1679144296,"answer_id":75776039,"question_id":75776010,"body_markdown":"You forgot to calculate and print ASCII value for input(character). \r\n\r\n    import java.util.Scanner;\r\n    public class CharConvertor\r\n    {\r\n        public static void main (String[] args)\r\n        {\r\n          Scanner input = new Scanner(System.in);\r\n    \r\n          char character = &#39;A&#39;;\r\n          \r\n          System.out.println(&quot;Please enter an uppercase character: &quot;);\r\n          character = input.next().charAt(0); // Allows user to choose an uppercase character\r\n          System.out.println(character+&quot; in ASCII is &quot;+((int) character )+&quot;.&quot;);    \r\n          \r\n        }\r\n    \r\n    }","title":"How do I convert an uppercase character to an ASCII value in Java?","body":"<p>You forgot to calculate and print ASCII value for input(character).</p>\n<pre><code>import java.util.Scanner;\npublic class CharConvertor\n{\n    public static void main (String[] args)\n    {\n      Scanner input = new Scanner(System.in);\n\n      char character = 'A';\n      \n      System.out.println(&quot;Please enter an uppercase character: &quot;);\n      character = input.next().charAt(0); // Allows user to choose an uppercase character\n      System.out.println(character+&quot; in ASCII is &quot;+((int) character )+&quot;.&quot;);    \n      \n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679149832,"creation_date":1679149372,"answer_id":75776470,"question_id":75776010,"body_markdown":"I would use one of the Character class methods.  This also enforces the input requirements.\r\n```\r\nScanner input = new Scanner(System.in);\r\nString str;\r\nSystem.out.print(&quot;Please enter an uppercase character: &quot;);\r\n\r\n//Allows user to choose an uppercase character\r\nwhile((str = input.next()).length() != 1 || Character.isLowerCase(str.charAt(0))) {\r\n     System.out.print(&quot;Please enter a single uppercase character: &quot;);\r\n}   \r\nSystem.out.println(str.charAt(0)+&quot; in ASCII is &quot;+ Character.codePointAt(str, 0));  ","title":"How do I convert an uppercase character to an ASCII value in Java?","body":"<p>I would use one of the Character class methods.  This also enforces the input requirements.</p>\n<pre><code>Scanner input = new Scanner(System.in);\nString str;\nSystem.out.print(&quot;Please enter an uppercase character: &quot;);\n\n//Allows user to choose an uppercase character\nwhile((str = input.next()).length() != 1 || Character.isLowerCase(str.charAt(0))) {\n     System.out.print(&quot;Please enter a single uppercase character: &quot;);\n}   \nSystem.out.println(str.charAt(0)+&quot; in ASCII is &quot;+ Character.codePointAt(str, 0));  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696649292,"creation_date":1679152708,"answer_id":75776764,"question_id":75776010,"body_markdown":"# tl;dr\r\n\r\n```java\r\nString input = scanner.nextLine();  // Gather input from user.\r\n\r\nint codePoint = input.codePointAt( 0 );  // Get code point (ASCII code) for first character of input.\r\nString upper = Character.toString( codePoint );  // Convert back to a `String` textual object.\r\n\r\nint codePointOfLowercase = Character.toLowerCase( codePoint );  // Get the code point (ASCII code) of the partner lowercase character.\r\nString lower = Character.toString( codePointOfLowercase );  // Generate a `String` textual object containing that lowercase letter.\r\n\r\nSystem.out.println( &quot;You entered uppercase letter: &quot; + upper + &quot; which has a code point of: &quot; + codePoint + &quot;.&quot; );  // Dump to console.\r\nSystem.out.println( &quot;The matching lowercase character is: &quot; + lower + &quot;, code point: &quot; + codePointOfLowercase + &quot;.&quot; );\r\n```\r\n\r\n# Write super-simple code\r\n\r\nYou are combining functions within a single line of code. Debugging your app is generally made easier if you restrict each line to a single operation. \r\n\r\nAlso, super simple code happens to be easiest for a [JVM][1] to optimize at runtime.\r\n\r\nAnother benefit is that short sweet lines provide an opportunity to name results with an explanatory name. This makes your code more [self-documenting][2].\r\n\r\nSo notice in example code below how we accomplish one step at a time, one line at a time.\r\n\r\n# Code point\r\n\r\nOther Answers are correct. However, those Answers and your Question use the legacy type `char`. \r\n\r\nAs a 16-bit value, `char` is physically incapable of representing most characters. The `char` type and its wrapper class `Character` have been essentially broken since Java 2, and legacy since Java 5. \r\n\r\nInstead, make a habit of using [code point][3] integer numbers. \r\n\r\n    String input = &quot;A&quot; ; \r\n    int codePoint = input.codePointAt( 0 );\r\n\r\nUnicode is a superset of US-ASCII. So the first 128 code points (0-127) are indeed the ASCII codes you requested.  \r\n\r\nTest if the input is a letter:\r\n\r\n    if( Character.isLetter( codePoint ) ) {\r\n        … \r\n    } else { … reject user’s input }\r\n\r\nTest if the input is uppercase:\r\n\r\n    if( Character.isUpperCase( codePoint ) ) { … } else { … reject user’s input } \r\n\r\nConvert the code point back to text. \r\n\r\n    String upper = Character.toString( codePoint ) ;\r\n\r\nGet the lowercase partner for that uppercase letter.  \r\n\r\n    int codePointOfLowercase = Character.toLowerCase( codePoint ) ;\r\n    String lower = Character.toString( codePointOfLowercase ) ;\r\n\r\n\r\nBe aware that not all languages have the notion of upper and lower case.\r\n\r\n## Example code\r\n\r\nHere is an entire example app.\r\n\r\n```java\r\npackage work.basil.example.text;\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class UpperLower\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        Scanner scanner = new Scanner( System.in );\r\n\r\n        System.out.println( &quot;Enter an uppercase letter A-Z, from basic English/Latin alphabet:&quot; );\r\n\r\n        String input = scanner.nextLine();  // Read user input\r\n        int codePoint = input.codePointAt( 0 );\r\n        if ( Character.isLetter( codePoint ) )\r\n        {\r\n            if ( Character.isUpperCase( codePoint ) )\r\n            {\r\n                String upper = Character.toString( codePoint );\r\n                int codePointOfLowercase = Character.toLowerCase( codePoint );\r\n                String lower = Character.toString( codePointOfLowercase );\r\n                System.out.println( &quot;You entered uppercase letter: &quot; + upper + &quot; which has a code point of: &quot; + codePoint + &quot;.&quot; );\r\n                System.out.println( &quot;The matching lowercase character is: &quot; + lower + &quot;, code point: &quot; + codePointOfLowercase + &quot;.&quot; );\r\n            }\r\n            else\r\n            {\r\n                System.out.println( &quot;Oops, the letter you entered was not uppercase. Program ending. &quot; );\r\n            }\r\n        }\r\n        else\r\n        {\r\n            System.out.println( &quot;Oops, you entered something other than a letter, such as a digit or punctuation. Program ending. &quot; );\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nA\r\nYou entered uppercase letter: A which has a code point of: 65.\r\nThe matching lowercase character is: a, code point: 97.\r\n```\r\n\r\n    \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_virtual_machine\r\n  [2]: https://en.wikipedia.org/wiki/Self-documenting_code\r\n  [3]: https://en.wikipedia.org/wiki/Code_point","title":"How do I convert an uppercase character to an ASCII value in Java?","body":"<h1>tl;dr</h1>\n<pre class=\"lang-java prettyprint-override\"><code>String input = scanner.nextLine();  // Gather input from user.\n\nint codePoint = input.codePointAt( 0 );  // Get code point (ASCII code) for first character of input.\nString upper = Character.toString( codePoint );  // Convert back to a `String` textual object.\n\nint codePointOfLowercase = Character.toLowerCase( codePoint );  // Get the code point (ASCII code) of the partner lowercase character.\nString lower = Character.toString( codePointOfLowercase );  // Generate a `String` textual object containing that lowercase letter.\n\nSystem.out.println( &quot;You entered uppercase letter: &quot; + upper + &quot; which has a code point of: &quot; + codePoint + &quot;.&quot; );  // Dump to console.\nSystem.out.println( &quot;The matching lowercase character is: &quot; + lower + &quot;, code point: &quot; + codePointOfLowercase + &quot;.&quot; );\n</code></pre>\n<h1>Write super-simple code</h1>\n<p>You are combining functions within a single line of code. Debugging your app is generally made easier if you restrict each line to a single operation.</p>\n<p>Also, super simple code happens to be easiest for a <a href=\"https://en.wikipedia.org/wiki/Java_virtual_machine\" rel=\"nofollow noreferrer\">JVM</a> to optimize at runtime.</p>\n<p>Another benefit is that short sweet lines provide an opportunity to name results with an explanatory name. This makes your code more <a href=\"https://en.wikipedia.org/wiki/Self-documenting_code\" rel=\"nofollow noreferrer\">self-documenting</a>.</p>\n<p>So notice in example code below how we accomplish one step at a time, one line at a time.</p>\n<h1>Code point</h1>\n<p>Other Answers are correct. However, those Answers and your Question use the legacy type <code>char</code>.</p>\n<p>As a 16-bit value, <code>char</code> is physically incapable of representing most characters. The <code>char</code> type and its wrapper class <code>Character</code> have been essentially broken since Java 2, and legacy since Java 5.</p>\n<p>Instead, make a habit of using <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers.</p>\n<pre><code>String input = &quot;A&quot; ; \nint codePoint = input.codePointAt( 0 );\n</code></pre>\n<p>Unicode is a superset of US-ASCII. So the first 128 code points (0-127) are indeed the ASCII codes you requested.</p>\n<p>Test if the input is a letter:</p>\n<pre><code>if( Character.isLetter( codePoint ) ) {\n    … \n} else { … reject user’s input }\n</code></pre>\n<p>Test if the input is uppercase:</p>\n<pre><code>if( Character.isUpperCase( codePoint ) ) { … } else { … reject user’s input } \n</code></pre>\n<p>Convert the code point back to text.</p>\n<pre><code>String upper = Character.toString( codePoint ) ;\n</code></pre>\n<p>Get the lowercase partner for that uppercase letter.</p>\n<pre><code>int codePointOfLowercase = Character.toLowerCase( codePoint ) ;\nString lower = Character.toString( codePointOfLowercase ) ;\n</code></pre>\n<p>Be aware that not all languages have the notion of upper and lower case.</p>\n<h2>Example code</h2>\n<p>Here is an entire example app.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.text;\n\nimport java.util.Scanner;\n\npublic class UpperLower\n{\n    public static void main ( String[] args )\n    {\n        Scanner scanner = new Scanner( System.in );\n\n        System.out.println( &quot;Enter an uppercase letter A-Z, from basic English/Latin alphabet:&quot; );\n\n        String input = scanner.nextLine();  // Read user input\n        int codePoint = input.codePointAt( 0 );\n        if ( Character.isLetter( codePoint ) )\n        {\n            if ( Character.isUpperCase( codePoint ) )\n            {\n                String upper = Character.toString( codePoint );\n                int codePointOfLowercase = Character.toLowerCase( codePoint );\n                String lower = Character.toString( codePointOfLowercase );\n                System.out.println( &quot;You entered uppercase letter: &quot; + upper + &quot; which has a code point of: &quot; + codePoint + &quot;.&quot; );\n                System.out.println( &quot;The matching lowercase character is: &quot; + lower + &quot;, code point: &quot; + codePointOfLowercase + &quot;.&quot; );\n            }\n            else\n            {\n                System.out.println( &quot;Oops, the letter you entered was not uppercase. Program ending. &quot; );\n            }\n        }\n        else\n        {\n            System.out.println( &quot;Oops, you entered something other than a letter, such as a digit or punctuation. Program ending. &quot; );\n        }\n    }\n}\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>A\nYou entered uppercase letter: A which has a code point of: 65.\nThe matching lowercase character is: a, code point: 97.\n</code></pre>\n"}],"owner":{"account_id":28050289,"reputation":41,"user_id":21426307,"display_name":"efx"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":214,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1696649292,"creation_date":1679143910,"question_id":75776010,"body_markdown":"Apologies, very new to this.\r\n\r\nMy task is to create an ASCII convertor wherein the user provides an uppercase character, and it is converted to an ASCII value. It also returns the lowercase equivalent. I&#39;m still on the first step, because I&#39;m not sure how to do it, and even from watching a few videos I&#39;m not too sure. Each time I run the code and enter an uppercase character, it always returns 65. Any help would be much appreciated.\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class CharConvertor\r\n{\r\n    public static void main (String[] args)\r\n    {\r\n      Scanner input = new Scanner(System.in);\r\n\r\n      char character = &#39;A&#39;;\r\n      int ascii = (int) character; \r\n      \r\n      System.out.println(&quot;Please enter an uppercase character: &quot;);\r\n      character = input.next().charAt(0); // Allows user to choose an uppercase character\r\n      System.out.println(character+&quot; in ASCII is &quot;+ascii+&quot;.&quot;);    \r\n      \r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nI thought &#39;A&#39; would be like a placeholder for any letter, but that didn&#39;t work, and it returned 65 each time. I also tried to just do *char character;*, but I just received an error message saying it was not initialized. ","title":"How do I convert an uppercase character to an ASCII value in Java?","body":"<p>Apologies, very new to this.</p>\n<p>My task is to create an ASCII convertor wherein the user provides an uppercase character, and it is converted to an ASCII value. It also returns the lowercase equivalent. I'm still on the first step, because I'm not sure how to do it, and even from watching a few videos I'm not too sure. Each time I run the code and enter an uppercase character, it always returns 65. Any help would be much appreciated.</p>\n<pre><code>import java.util.Scanner;\npublic class CharConvertor\n{\n    public static void main (String[] args)\n    {\n      Scanner input = new Scanner(System.in);\n\n      char character = 'A';\n      int ascii = (int) character; \n      \n      System.out.println(&quot;Please enter an uppercase character: &quot;);\n      character = input.next().charAt(0); // Allows user to choose an uppercase character\n      System.out.println(character+&quot; in ASCII is &quot;+ascii+&quot;.&quot;);    \n      \n    }\n\n}\n</code></pre>\n<p>I thought 'A' would be like a placeholder for any letter, but that didn't work, and it returned 65 each time. I also tried to just do <em>char character;</em>, but I just received an error message saying it was not initialized.</p>\n"},{"tags":["java","shebang","java-11"],"comments":[{"owner":{"account_id":231117,"reputation":8541,"user_id":495157,"accept_rate":40,"display_name":"JGFMK"},"score":0,"creation_date":1567898252,"post_id":52530470,"comment_id":102104319,"body_markdown":"Is this only an option with 1) OpenJDK 2) Unix flavour OS only... ie. does it work with Windows?","body":"Is this only an option with 1) OpenJDK 2) Unix flavour OS only... ie. does it work with Windows?"}],"answers":[{"tags":[],"owner":{"account_id":8096613,"reputation":996,"user_id":6100981,"display_name":"mam10eks"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1538028984,"creation_date":1538028984,"answer_id":52530570,"question_id":52530470,"body_markdown":"A bit of trial and error gave me the correct solution.\r\nIt was the file extension `.java` which causes those problems.\r\n\r\nI.e. if I rename the file to `Test.sh` everything is working.\r\n\r\nHere is a complete Hello-World-Shebang-Example:\r\n\r\nCreate a File `Test.sh` with content like\r\n\r\n    #!/opt/java/jdk-11/bin/java --source 11\r\n    \r\n    public class Test\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            System.out.println(&quot;Hello World!&quot;);\r\n        }\r\n    }\r\n\r\nMake it executable (i.e. `chmod +x Test.sh`).\r\n\r\nLast but not least execute it using `./Test.sh`\r\n","title":"Java 11: Executing Source File via Shebang is not working","body":"<p>A bit of trial and error gave me the correct solution.\nIt was the file extension <code>.java</code> which causes those problems.</p>\n\n<p>I.e. if I rename the file to <code>Test.sh</code> everything is working.</p>\n\n<p>Here is a complete Hello-World-Shebang-Example:</p>\n\n<p>Create a File <code>Test.sh</code> with content like</p>\n\n<pre><code>#!/opt/java/jdk-11/bin/java --source 11\n\npublic class Test\n{\n    public static void main(String[] args)\n    {\n        System.out.println(\"Hello World!\");\n    }\n}\n</code></pre>\n\n<p>Make it executable (i.e. <code>chmod +x Test.sh</code>).</p>\n\n<p>Last but not least execute it using <code>./Test.sh</code></p>\n"},{"comments":[{"owner":{"account_id":49303,"reputation":4598,"user_id":146745,"accept_rate":71,"display_name":"andrej"},"score":0,"creation_date":1538056744,"post_id":52530656,"comment_id":92016994,"body_markdown":"this does not work, the script filename should not have .java suffix","body":"this does not work, the script filename should not have .java suffix"},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1538056915,"post_id":52530656,"comment_id":92017123,"body_markdown":"@andrej did you notice that it&#39;s being renamed in this answer?","body":"@andrej did you notice that it&#39;s being renamed in this answer?"},{"owner":{"account_id":49303,"reputation":4598,"user_id":146745,"accept_rate":71,"display_name":"andrej"},"score":0,"creation_date":1538122244,"post_id":52530656,"comment_id":92040916,"body_markdown":"@ernest-k nope. my bad. sorry. maybe you could mention this essential renaming","body":"@ernest-k nope. my bad. sorry. maybe you could mention this essential renaming"},{"owner":{"account_id":9961024,"reputation":1076,"user_id":7370354,"display_name":"Kartik Soneji"},"score":1,"creation_date":1626720852,"post_id":52530656,"comment_id":120964580,"body_markdown":"@ernest_k `move` is a Windows command. The UNIX equivalent is `mv`.","body":"@ernest_k <code>move</code> is a Windows command. The UNIX equivalent is <code>mv</code>."}],"tags":[],"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538127032,"creation_date":1538029378,"answer_id":52530656,"question_id":52530470,"body_markdown":"According to the JEP you&#39;ve linked to (see the [shebang files section][1]), the shebang file is to be used to launch the java process, not to be used as a parameter for java:\n\n&gt; A shebang file to invoke the Java launcher using source-file mode must begin with something like:\n&gt;\n&gt; `#!/path/to/java --source version`\n&gt;\n&gt; For example, we could take the source code for a &quot;Hello World&quot; program, and put it in a file called hello, after an initial line of #!/path/to/java --source 10, **and then mark the file as executable**. Then, if the file is in the current directory, we could execute it with:\n&gt;\n&gt; `$ ./hello`\n\nIn other words, what you want to do is rather make `Test.java` executable. You&#39;d also have to rename it since it won&#39;t work as shebang and strip first line when it&#39;s named *.java.\n\n    $ move Test.java test\n    $ chmod +x test\n    $ ./test \n\nThis will launch shebang processor which will strip first line and pass the rest of the script to /path/to/java and Java will compile the script and run the main method.\n\n\n  [1]: http://openjdk.java.net/jeps/330#Shebang_files","title":"Java 11: Executing Source File via Shebang is not working","body":"<p>According to the JEP you've linked to (see the <a href=\"http://openjdk.java.net/jeps/330#Shebang_files\" rel=\"nofollow noreferrer\">shebang files section</a>), the shebang file is to be used to launch the java process, not to be used as a parameter for java:</p>\n<blockquote>\n<p>A shebang file to invoke the Java launcher using source-file mode must begin with something like:</p>\n<p><code>#!/path/to/java --source version</code></p>\n<p>For example, we could take the source code for a &quot;Hello World&quot; program, and put it in a file called hello, after an initial line of #!/path/to/java --source 10, <strong>and then mark the file as executable</strong>. Then, if the file is in the current directory, we could execute it with:</p>\n<p><code>$ ./hello</code></p>\n</blockquote>\n<p>In other words, what you want to do is rather make <code>Test.java</code> executable. You'd also have to rename it since it won't work as shebang and strip first line when it's named *.java.</p>\n<pre><code>$ move Test.java test\n$ chmod +x test\n$ ./test \n</code></pre>\n<p>This will launch shebang processor which will strip first line and pass the rest of the script to /path/to/java and Java will compile the script and run the main method.</p>\n"},{"comments":[{"owner":{"account_id":4427390,"reputation":5224,"user_id":3605497,"display_name":"Tripp Kinetics"},"score":3,"creation_date":1620926390,"post_id":52543589,"comment_id":119349628,"body_markdown":"I think this is dumb.  Why should it even concern itself with the filename to change its behavior?  As far as I can tell, there is no disadvantage to ignoring the shebang even when the filename ends in `.java`.","body":"I think this is dumb.  Why should it even concern itself with the filename to change its behavior?  As far as I can tell, there is no disadvantage to ignoring the shebang even when the filename ends in <code>.java</code>."}],"tags":[],"owner":{"account_id":25162,"reputation":31580,"user_id":64474,"display_name":"Miles"},"comment_count":1,"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1538075151,"creation_date":1538075151,"answer_id":52543589,"question_id":52530470,"body_markdown":"The file name must not end with `.java` in order for the `java` executable to ignore the shebang line. You can use a different extension, or just have no extension at all (which is what they do in the JEP example and is what I would recommend).\r\n\r\nFrom [JEP 330](http://openjdk.java.net/jeps/330#Shebang_files) (emphasis added):\r\n\r\n&gt; When the launcher reads the source file, **if the file is not a Java source file (i.e. it is not a file whose name ends with .java)** and if the first line begins with #!, then the contents of that line up to but not including the first newline are ignored when determining the source code to be passed to the compiler. The content of the file that appears after the first line must consist of a valid CompilationUnit as defined by &#167;7.3 in the edition of the Java Language Specification that is appropriate to the version of the platform given in the --source option, if present, or the version of the platform being used to run the program if the --source option is not present.\r\n\r\nIt doesn&#39;t need to end with &quot;.sh&quot; specifically; also, that&#39;s potentially misleading because the file is not actually a shell script.","title":"Java 11: Executing Source File via Shebang is not working","body":"<p>The file name must not end with <code>.java</code> in order for the <code>java</code> executable to ignore the shebang line. You can use a different extension, or just have no extension at all (which is what they do in the JEP example and is what I would recommend).</p>\n\n<p>From <a href=\"http://openjdk.java.net/jeps/330#Shebang_files\" rel=\"noreferrer\">JEP 330</a> (emphasis added):</p>\n\n<blockquote>\n  <p>When the launcher reads the source file, <strong>if the file is not a Java source file (i.e. it is not a file whose name ends with .java)</strong> and if the first line begins with #!, then the contents of that line up to but not including the first newline are ignored when determining the source code to be passed to the compiler. The content of the file that appears after the first line must consist of a valid CompilationUnit as defined by §7.3 in the edition of the Java Language Specification that is appropriate to the version of the platform given in the --source option, if present, or the version of the platform being used to run the program if the --source option is not present.</p>\n</blockquote>\n\n<p>It doesn't need to end with \".sh\" specifically; also, that's potentially misleading because the file is not actually a shell script.</p>\n"}],"owner":{"account_id":8096613,"reputation":996,"user_id":6100981,"display_name":"mam10eks"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7086,"favorite_count":0,"down_vote_count":1,"up_vote_count":26,"accepted_answer_id":52543589,"answer_count":3,"score":25,"last_activity_date":1696648149,"creation_date":1538028550,"question_id":52530470,"body_markdown":"I wanted to check out some new features of java 11 which was released two days ago.\r\n[JEP 330](http://openjdk.java.net/jeps/330) states that I could launch a Java-Source-Code-Program without compiling.\r\nIt should also support the usage of Shebang-Files.\r\n\r\nHence I have written this small Hello-World Program `Test.java`:\r\n\r\n\r\n    #!/opt/java/jdk-11/bin/java --source 11\r\n\r\n    public class Test\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            System.out.println(&quot;Hello World!&quot;);\r\n        }\r\n    }\r\n\r\n\r\nI [downloaded JDK 11](http://jdk.java.net/11/) and extracted it to `/opt/java`.\r\nHence the Shebang itself is working.\r\nI.e. executing `/opt/java/jdk-11/bin/java --version` gives me \r\n\r\n\r\n    openjdk 11 2018-09-25\r\n    OpenJDK Runtime Environment 18.9 (build 11+28)\r\n    OpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)\r\n\r\n\r\nAfter making `Test.java` executable (using `chmod +x Test.java`) the execution is failing.\r\nI.e. `./Test.java` gives me:\r\n\r\n\r\n    ./Test.java:1: error: illegal character: &#39;#&#39;\r\n    #!/opt/java/jdk-11/bin/java --source 11\r\n    ^\r\n    ./Test.java:1: error: class, interface, or enum expected\r\n    #!/opt/java/jdk-11/bin/java --source 11\r\n    ^\r\n    2 errors\r\n    error: compilation failed\r\n\r\n\r\nAs soon as I remove the Shebang-Line from `Test.java` and start it with `/opt/java/jdk-11/bin/java --source 11 Test.java`\r\neverything is working like a charm and I get the expected output: `Hello World!`\r\n\r\nMy machine is running `Ubuntu 17.04`.\r\nI have linked `javac` to the one from JDK 11 (i.e. executing `javac -version` gives `javac 11`).\r\n\r\n","title":"Java 11: Executing Source File via Shebang is not working","body":"<p>I wanted to check out some new features of java 11 which was released two days ago.\n<a href=\"http://openjdk.java.net/jeps/330\" rel=\"noreferrer\">JEP 330</a> states that I could launch a Java-Source-Code-Program without compiling.\nIt should also support the usage of Shebang-Files.</p>\n\n<p>Hence I have written this small Hello-World Program <code>Test.java</code>:</p>\n\n<pre><code>#!/opt/java/jdk-11/bin/java --source 11\n\npublic class Test\n{\n    public static void main(String[] args)\n    {\n        System.out.println(\"Hello World!\");\n    }\n}\n</code></pre>\n\n<p>I <a href=\"http://jdk.java.net/11/\" rel=\"noreferrer\">downloaded JDK 11</a> and extracted it to <code>/opt/java</code>.\nHence the Shebang itself is working.\nI.e. executing <code>/opt/java/jdk-11/bin/java --version</code> gives me </p>\n\n<pre><code>openjdk 11 2018-09-25\nOpenJDK Runtime Environment 18.9 (build 11+28)\nOpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)\n</code></pre>\n\n<p>After making <code>Test.java</code> executable (using <code>chmod +x Test.java</code>) the execution is failing.\nI.e. <code>./Test.java</code> gives me:</p>\n\n<pre><code>./Test.java:1: error: illegal character: '#'\n#!/opt/java/jdk-11/bin/java --source 11\n^\n./Test.java:1: error: class, interface, or enum expected\n#!/opt/java/jdk-11/bin/java --source 11\n^\n2 errors\nerror: compilation failed\n</code></pre>\n\n<p>As soon as I remove the Shebang-Line from <code>Test.java</code> and start it with <code>/opt/java/jdk-11/bin/java --source 11 Test.java</code>\neverything is working like a charm and I get the expected output: <code>Hello World!</code></p>\n\n<p>My machine is running <code>Ubuntu 17.04</code>.\nI have linked <code>javac</code> to the one from JDK 11 (i.e. executing <code>javac -version</code> gives <code>javac 11</code>).</p>\n"},{"tags":["java","excel"],"answers":[{"comments":[{"owner":{"account_id":6588743,"reputation":121,"user_id":11335285,"display_name":"libero"},"score":1,"creation_date":1647621311,"post_id":71530195,"comment_id":126424788,"body_markdown":"I get same error. But when I use latest version 2.11.0, then I got this error: org.apache.poi.hssf.OldExcelFormatException: The supplied spreadsheet seems to be Excel 5.0/7.0 (BIFF5) format. POI only supports BIFF8 format (from Excel versions 97/2000/XP/2003)","body":"I get same error. But when I use latest version 2.11.0, then I got this error: org.apache.poi.hssf.OldExcelFormatException: The supplied spreadsheet seems to be Excel 5.0/7.0 (BIFF5) format. POI only supports BIFF8 format (from Excel versions 97/2000/XP/2003)"},{"owner":{"account_id":6588743,"reputation":121,"user_id":11335285,"display_name":"libero"},"score":0,"creation_date":1647858641,"post_id":71530195,"comment_id":126468227,"body_markdown":"I used OldExcelExtractor.","body":"I used OldExcelExtractor."},{"owner":{"account_id":3424585,"reputation":12345,"user_id":2870735,"accept_rate":60,"display_name":"Mihai Răducanu"},"score":3,"creation_date":1652338717,"post_id":71530195,"comment_id":127583139,"body_markdown":"fixed the error by specifying a newer version of commons-io","body":"fixed the error by specifying a newer version of commons-io"}],"tags":[],"owner":{"account_id":5979633,"reputation":2842,"user_id":4699160,"accept_rate":48,"display_name":"Saurabh Jhunjhunwala"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1647620685,"creation_date":1647620685,"answer_id":71530195,"question_id":71530141,"body_markdown":"Add\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n          &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\nto you pom","title":"java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream on using HSSFWorkbook","body":"<p>Add</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;commons-io&lt;/groupId&gt;\n      &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n    &lt;version&gt;1.4&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n<p>to you pom</p>\n"},{"tags":[],"owner":{"account_id":25528824,"reputation":57,"user_id":19317317,"display_name":"Anon"},"comment_count":0,"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1654910327,"creation_date":1654910327,"answer_id":72581072,"question_id":71530141,"body_markdown":"Change the dependency to \r\n```\r\n&lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n        &lt;version&gt;4.1.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI used the version 5.2.0 as well and was getting the same error and changing that fixed it.","title":"java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream on using HSSFWorkbook","body":"<p>Change the dependency to</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n        &lt;version&gt;4.1.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I used the version 5.2.0 as well and was getting the same error and changing that fixed it.</p>\n"},{"tags":[],"owner":{"account_id":19326421,"reputation":11,"user_id":14128959,"display_name":"Winky"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663577329,"creation_date":1663577329,"answer_id":73770777,"question_id":71530141,"body_markdown":"When I read excel to XSSFWorkbook, it prompt error message that &quot;commons.io.output.UnsynchronizedByteArrayOutputStream&quot; finally fixed it by downgrad the version of poi from 5.2.3 to 5.2.2\r\n","title":"java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream on using HSSFWorkbook","body":"<p>When I read excel to XSSFWorkbook, it prompt error message that &quot;commons.io.output.UnsynchronizedByteArrayOutputStream&quot; finally fixed it by downgrad the version of poi from 5.2.3 to 5.2.2</p>\n"},{"comments":[{"owner":{"account_id":1464832,"reputation":186,"user_id":1378018,"display_name":"David Bradley"},"score":0,"creation_date":1699565540,"post_id":73829185,"comment_id":136551835,"body_markdown":"So I must not understand something about Maven and dependencies. How as POI package built without this dependency in its pom.xml?","body":"So I must not understand something about Maven and dependencies. How as POI package built without this dependency in its pom.xml?"},{"owner":{"account_id":14365136,"reputation":890,"user_id":10376405,"display_name":"Paul"},"score":0,"creation_date":1699631517,"post_id":73829185,"comment_id":136560315,"body_markdown":"as David mentions: I had only the poi-ooxml dependency when working with Java17. After upgrading to Java21, I also needed to add the commons-io 2.15.0 in order to prevent OP&#39;s mentioned exception when generating a new XSSFWorkBook","body":"as David mentions: I had only the poi-ooxml dependency when working with Java17. After upgrading to Java21, I also needed to add the commons-io 2.15.0 in order to prevent OP&#39;s mentioned exception when generating a new XSSFWorkBook"}],"tags":[],"owner":{"account_id":5246581,"reputation":111,"user_id":4192102,"display_name":"Luiz Henrique Serafim"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1663942852,"creation_date":1663942852,"answer_id":73829185,"question_id":71530141,"body_markdown":"It worked for me\r\n\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.11.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream on using HSSFWorkbook","body":"<p>It worked for me</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.11.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi&lt;/artifactId&gt;\n        &lt;version&gt;5.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n        &lt;version&gt;5.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25341504,"reputation":23,"user_id":19159837,"display_name":"neel jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669804810,"creation_date":1669804810,"answer_id":74626388,"question_id":71530141,"body_markdown":"It worked for me by removing this dependency\r\n\r\n     &lt;dependency&gt;\r\n      &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\r\n      &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\r\n      &lt;version&gt;1.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n","title":"java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream on using HSSFWorkbook","body":"<p>It worked for me by removing this dependency</p>\n<pre><code> &lt;dependency&gt;\n  &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n  &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n  &lt;version&gt;1.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27565610,"reputation":71,"user_id":21037848,"display_name":"Jeffrey Wang"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1674063381,"creation_date":1674063381,"answer_id":75163146,"question_id":71530141,"body_markdown":"I recently upgraded Apache POI to 5.2.3 and was having the same ClassNotFoundException. Since the application was working fine before the upgrade, so I quickly did three things to debug:\r\n\r\n 1. Search on stackoverflow.com ;-)\r\n 2. Check to see from what version of Apache Commons IO has the\r\n    org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream\r\n    class. ***In the JavaDoc, it was since 2.7.***\r\n 3. Check my maven dependency tree to find out what version of the Apache Commons IO I am using. ***Turns\r\n    out the commons-io I had was 2.2 and it was from the\r\n    commons-fileupload 1.4 in my maven pom.xml***\r\n\r\nOnce I added the latest available Apache Commons IO 2.11.0 to my maven pom.xml and rebuild the application, the problem solved. I hope this help!\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n        &lt;version&gt;2.11.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream on using HSSFWorkbook","body":"<p>I recently upgraded Apache POI to 5.2.3 and was having the same ClassNotFoundException. Since the application was working fine before the upgrade, so I quickly did three things to debug:</p>\n<ol>\n<li>Search on stackoverflow.com ;-)</li>\n<li>Check to see from what version of Apache Commons IO has the\norg.apache.commons.io.output.UnsynchronizedByteArrayOutputStream\nclass. <em><strong>In the JavaDoc, it was since 2.7.</strong></em></li>\n<li>Check my maven dependency tree to find out what version of the Apache Commons IO I am using. <em><strong>Turns\nout the commons-io I had was 2.2 and it was from the\ncommons-fileupload 1.4 in my maven pom.xml</strong></em></li>\n</ol>\n<p>Once I added the latest available Apache Commons IO 2.11.0 to my maven pom.xml and rebuild the application, the problem solved. I hope this help!</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;commons-io&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n    &lt;version&gt;2.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12110238,"reputation":190,"user_id":8847395,"accept_rate":100,"display_name":"Kiran Antony"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676913462,"creation_date":1676913462,"answer_id":75512354,"question_id":71530141,"body_markdown":"Looks like you don&#39;t have commons-io dependency. please add this dependency \r\n\r\n     &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.11.0&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream on using HSSFWorkbook","body":"<p>Looks like you don't have commons-io dependency. please add this dependency</p>\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.11.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681525040,"post_id":75965770,"comment_id":134075025,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75965770/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27862806,"reputation":1,"user_id":21274949,"display_name":"Prakash Manikandan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680963750,"creation_date":1680963726,"answer_id":75965770,"question_id":71530141,"body_markdown":"This issue is resolved with following dependencies:\r\n[Dependencies]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uIsOC.png","title":"java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream on using HSSFWorkbook","body":"<p>This issue is resolved with following dependencies:\n[Dependencies]</p>\n"},{"tags":[],"owner":{"account_id":10371815,"reputation":1,"user_id":7649264,"display_name":"Balbino Gachuz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696645420,"creation_date":1696645420,"answer_id":77248144,"question_id":71530141,"body_markdown":"Works for me:\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.11.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n","title":"java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream on using HSSFWorkbook","body":"<p>Works for me:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi&lt;/artifactId&gt;\n        &lt;version&gt;5.2.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n        &lt;version&gt;5.2.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.11.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":6588743,"reputation":121,"user_id":11335285,"display_name":"libero"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38721,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":9,"score":10,"last_activity_date":1696645420,"creation_date":1647620411,"question_id":71530141,"body_markdown":"I&#39;m trying to implement reading from .xls file. I have the following code:\r\n\r\n    FileInputStream file = null;\r\n        Workbook workbook = null;\r\n        try {\r\n            file = new FileInputStream(System.getProperty(&quot;user.home&quot;) + &quot;/Downloads/&quot; + fileName);\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        if (fileName.endsWith(&quot;.xls&quot;)) {\r\n            try {\r\n                **workbook = new HSSFWorkbook(file);**\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\nThis marked code line crashes.\r\n\r\nI imported in pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nbut I got the error:\r\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream\r\n\r\nI would appreciate help on this.\r\nThanks.","title":"java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream on using HSSFWorkbook","body":"<p>I'm trying to implement reading from .xls file. I have the following code:</p>\n<pre><code>FileInputStream file = null;\n    Workbook workbook = null;\n    try {\n        file = new FileInputStream(System.getProperty(&quot;user.home&quot;) + &quot;/Downloads/&quot; + fileName);\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    }\n\n    if (fileName.endsWith(&quot;.xls&quot;)) {\n        try {\n            **workbook = new HSSFWorkbook(file);**\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>This marked code line crashes.</p>\n<p>I imported in pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi&lt;/artifactId&gt;\n        &lt;version&gt;5.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n        &lt;version&gt;5.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>but I got the error:\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream</p>\n<p>I would appreciate help on this.\nThanks.</p>\n"},{"tags":["java","environment-variables"],"comments":[{"owner":{"account_id":375461,"reputation":2234,"user_id":726315,"accept_rate":89,"display_name":"arkon"},"score":1,"creation_date":1336783461,"post_id":318239,"comment_id":13668835,"body_markdown":"System.getEnv() is intended to be universal-ish, some environments don&#39;t even have environment variables.","body":"System.getEnv() is intended to be universal-ish, some environments don&#39;t even have environment variables."},{"owner":{"account_id":337871,"reputation":1438,"user_id":666397,"display_name":"Atif"},"score":18,"creation_date":1497280877,"post_id":318239,"comment_id":75999759,"body_markdown":"For anyone who needed this for a unit testing use case: https://stackoverflow.com/questions/8168884/how-to-test-code-dependent-on-environment-variables-using-junit","body":"For anyone who needed this for a unit testing use case: <a href=\"https://stackoverflow.com/questions/8168884/how-to-test-code-dependent-on-environment-variables-using-junit\" title=\"how to test code dependent on environment variables using junit\">stackoverflow.com/questions/8168884/&hellip;</a>"},{"owner":{"account_id":402762,"reputation":1387,"user_id":770110,"display_name":"Vlad Patryshev"},"score":1,"creation_date":1579036811,"post_id":318239,"comment_id":105632159,"body_markdown":"For Scala, use this: https://gist.github.com/vpatryshev/b1bbd15e2b759c157b58b68c58891ff4","body":"For Scala, use this: <a href=\"https://gist.github.com/vpatryshev/b1bbd15e2b759c157b58b68c58891ff4\" rel=\"nofollow noreferrer\">gist.github.com/vpatryshev/b1bbd15e2b759c157b58b68c58891ff4</a>"}],"answers":[{"comments":[{"owner":{"account_id":9733,"reputation":98826,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"score":0,"creation_date":1227635119,"post_id":318247,"comment_id":159629,"body_markdown":"The values are not known at execution time; they become known during the program&#39;s execution when the user provides/selects them.  And that sets only system properties, not environment variables.","body":"The values are not known at execution time; they become known during the program&#39;s execution when the user provides/selects them.  And that sets only system properties, not environment variables."},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1227635607,"post_id":318247,"comment_id":159654,"body_markdown":"Then in that case you probably want to find a regular way (via the args[] parameter to the main method) to invoke your subprocesses.","body":"Then in that case you probably want to find a regular way (via the args[] parameter to the main method) to invoke your subprocesses."},{"owner":{"account_id":9733,"reputation":98826,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"score":0,"creation_date":1227636508,"post_id":318247,"comment_id":159706,"body_markdown":"matt b, the regular way is via ProcessBuilder, as mentioned in my original question. :)","body":"matt b, the regular way is via ProcessBuilder, as mentioned in my original question. :)"},{"owner":{"account_id":165652,"reputation":4817,"user_id":389287,"accept_rate":63,"display_name":"anirvan"},"score":9,"creation_date":1280301261,"post_id":318247,"comment_id":3478289,"body_markdown":"-D parameters are available through `System.getProperty` and are not the same as `System.getenv`.\n\nBesides, the `System` class also allows to set these properties statically using `setProperty`","body":"-D parameters are available through <code>System.getProperty</code> and are not the same as <code>System.getenv</code>.  Besides, the <code>System</code> class also allows to set these properties statically using <code>setProperty</code>"}],"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"comment_count":4,"down_vote_count":20,"up_vote_count":3,"is_accepted":false,"score":-17,"last_activity_date":1227634929,"creation_date":1227634929,"answer_id":318247,"question_id":318239,"body_markdown":"You can pass parameters into your initial java process with -D:\r\n\r\n    java -cp &lt;classpath&gt; -Dkey1=value -Dkey2=value ...\r\n\r\n","title":"How do I set environment variables from Java?","body":"<p>You can pass parameters into your initial java process with -D:</p>\n\n<pre><code>java -cp &lt;classpath&gt; -Dkey1=value -Dkey2=value ...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9733,"reputation":98826,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"score":1,"creation_date":1227635247,"post_id":318252,"comment_id":159633,"body_markdown":"It&#39;s a shame management won&#39;t let me use a different portable language for running this set of evil, obsolete subprocesses, then. :)","body":"It&#39;s a shame management won&#39;t let me use a different portable language for running this set of evil, obsolete subprocesses, then. :)"},{"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":0,"creation_date":1227636261,"post_id":318252,"comment_id":159685,"body_markdown":"@skiphoppy: no tool can set the parent&#39;s environment -- it&#39;s not a tool issue, it&#39;s an OS issue.","body":"@skiphoppy: no tool can set the parent&#39;s environment -- it&#39;s not a tool issue, it&#39;s an OS issue."},{"owner":{"account_id":9733,"reputation":98826,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"score":23,"creation_date":1227636418,"post_id":318252,"comment_id":159699,"body_markdown":"S.Lott, I&#39;m not looking to set a parent&#39;s environment.  I&#39;m looking to set my own environment.","body":"S.Lott, I&#39;m not looking to set a parent&#39;s environment.  I&#39;m looking to set my own environment."},{"owner":{"account_id":9733,"reputation":98826,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"score":0,"creation_date":1227636471,"post_id":318252,"comment_id":159703,"body_markdown":"Thanks, mmyers.  I think I&#39;m definitely going to have to factor out such a method.  I already have a ProcessUtils class, so it&#39;s going to have to grow to manage changes to the environment.","body":"Thanks, mmyers.  I think I&#39;m definitely going to have to factor out such a method.  I already have a ProcessUtils class, so it&#39;s going to have to grow to manage changes to the environment."},{"owner":{"account_id":156475,"reputation":468,"user_id":373790,"display_name":"sullivan-"},"score":3,"creation_date":1327547810,"post_id":318252,"comment_id":11300505,"body_markdown":"That works great, unless it is somebody else&#39;s library (e.g. Sun&#39;s) that is launching the process.","body":"That works great, unless it is somebody else&#39;s library (e.g. Sun&#39;s) that is launching the process."},{"owner":{"account_id":375461,"reputation":2234,"user_id":726315,"accept_rate":89,"display_name":"arkon"},"score":1,"creation_date":1336783224,"post_id":318252,"comment_id":13668809,"body_markdown":"&quot;I think you&#39;ve hit the nail on the head.&quot; Couldn&#39;t agree more, the last thing I (as a user) want is your or any program mucking with my environment variables.","body":"&quot;I think you&#39;ve hit the nail on the head.&quot; Couldn&#39;t agree more, the last thing I (as a user) want is your or any program mucking with my environment variables."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":30,"creation_date":1340930164,"post_id":318252,"comment_id":14792713,"body_markdown":"@b1naryatr0phy You missed the point. Nobody can play with *your environment variables* since those variables are local to a process (what you set in Windows are the default values). Each process is free to change its own variables... unless its Java.","body":"@b1naryatr0phy You missed the point. Nobody can play with <i>your environment variables</i> since those variables are local to a process (what you set in Windows are the default values). Each process is free to change its own variables... unless its Java."},{"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"score":1,"creation_date":1369143673,"post_id":318252,"comment_id":23987109,"body_markdown":"Microsoft&#39;s .Net has a method that allows modification of the current process&#39; environment variables: http://msdn.microsoft.com/en-us/library/system.environment.setenvironmentvariable.aspx.  In my last project, it was used to auto-configure paths to proprietary libraries.","body":"Microsoft&#39;s .Net has a method that allows modification of the current process&#39; environment variables: <a href=\"http://msdn.microsoft.com/en-us/library/system.environment.setenvironmentvariable.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/&hellip;</a>.  In my last project, it was used to auto-configure paths to proprietary libraries."},{"owner":{"account_id":49796,"reputation":7155,"user_id":148415,"accept_rate":80,"display_name":"IanNorton"},"score":19,"creation_date":1488186092,"post_id":318252,"comment_id":72102798,"body_markdown":"This limitation of java is a little bit of a cop out. There is no reason for java not letting you set env vars other than &quot;because we don&#39;t want java to do this&quot;.","body":"This limitation of java is a little bit of a cop out. There is no reason for java not letting you set env vars other than &quot;because we don&#39;t want java to do this&quot;."}],"tags":[],"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"comment_count":9,"down_vote_count":1,"up_vote_count":111,"is_accepted":true,"score":110,"last_activity_date":1227635807,"creation_date":1227635104,"answer_id":318252,"question_id":318239,"body_markdown":"&gt;(Is it because this is Java and therefore I shouldn&#39;t be doing evil nonportable obsolete things like touching my environment?)\r\n\r\nI think you&#39;ve hit the nail on the head.\r\n\r\nA possible way to ease the burden would be to factor out a method\r\n\r\n    void setUpEnvironment(ProcessBuilder builder) {\r\n        Map&lt;String, String&gt; env = builder.environment();\r\n        // blah blah\r\n    }\r\n\r\nand pass any `ProcessBuilder`s through it before starting them.\r\n\r\nAlso, you probably already know this, but you can start more than one process with the same `ProcessBuilder`. So if your subprocesses are the same, you don&#39;t need to do this setup over and over.","title":"How do I set environment variables from Java?","body":"<blockquote>\n  <p>(Is it because this is Java and therefore I shouldn't be doing evil nonportable obsolete things like touching my environment?)</p>\n</blockquote>\n\n<p>I think you've hit the nail on the head.</p>\n\n<p>A possible way to ease the burden would be to factor out a method</p>\n\n<pre><code>void setUpEnvironment(ProcessBuilder builder) {\n    Map&lt;String, String&gt; env = builder.environment();\n    // blah blah\n}\n</code></pre>\n\n<p>and pass any <code>ProcessBuilder</code>s through it before starting them.</p>\n\n<p>Also, you probably already know this, but you can start more than one process with the same <code>ProcessBuilder</code>. So if your subprocesses are the same, you don't need to do this setup over and over.</p>\n"},{"comments":[{"owner":{"account_id":11708,"reputation":21399,"user_id":22704,"display_name":"Darron"},"score":0,"creation_date":1227647343,"post_id":318833,"comment_id":160089,"body_markdown":"Yes, you can set the processes environment from C code.  But I wouldn&#39;t count on that working in Java.  There is a good chance that the JVM copies the environment into Java String objects during startup, so your changes would not be used for future JVM operations.","body":"Yes, you can set the processes environment from C code.  But I wouldn&#39;t count on that working in Java.  There is a good chance that the JVM copies the environment into Java String objects during startup, so your changes would not be used for future JVM operations."},{"owner":{"account_id":9733,"reputation":98826,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"score":0,"creation_date":1227647442,"post_id":318833,"comment_id":160093,"body_markdown":"Thanks for the warning, Darron.  There&#39;s probably a good chance you&#39;re right.","body":"Thanks for the warning, Darron.  There&#39;s probably a good chance you&#39;re right."},{"owner":{"account_id":8002,"reputation":283812,"user_id":14122,"accept_rate":71,"display_name":"Charles Duffy"},"score":2,"creation_date":1383058534,"post_id":318833,"comment_id":29196975,"body_markdown":"@Darron many of the reasons one would want to do this have nothing at all to do with what the JVM thinks the environment is. (Think of setting `LD_LIBRARY_PATH` before calling `Runtime.loadLibrary()`; the `dlopen()` call it invokes looks at the _real_ environment, not at Java&#39;s idea of same).","body":"@Darron many of the reasons one would want to do this have nothing at all to do with what the JVM thinks the environment is. (Think of setting <code>LD_LIBRARY_PATH</code> before calling <code>Runtime.loadLibrary()</code>; the <code>dlopen()</code> call it invokes looks at the <i>real</i> environment, not at Java&#39;s idea of same)."},{"owner":{"account_id":436596,"reputation":7317,"user_id":823872,"accept_rate":71,"display_name":"Dan"},"score":0,"creation_date":1407529994,"post_id":318833,"comment_id":39266516,"body_markdown":"This works for subprocesses started by a native library (which in my case is most of them), but unfortunately does not work for subprocesses started by Java&#39;s Process or ProcessBuilder classes.","body":"This works for subprocesses started by a native library (which in my case is most of them), but unfortunately does not work for subprocesses started by Java&#39;s Process or ProcessBuilder classes."},{"owner":{"account_id":1434179,"reputation":5113,"user_id":1355930,"display_name":"Ashley Frieze"},"score":0,"creation_date":1697976183,"post_id":318833,"comment_id":136344312,"body_markdown":"This won&#39;t modify the environment variables in the running JVM. They&#39;re loaded when the process starts and they&#39;re immutable, unless you deliberately find a way to hack them.\n\nFor launching a new process, you get to specify its environment variables. That&#39;s easily done, whether it&#39;s before your JVM process starts, or a child process spawned by your JVM","body":"This won&#39;t modify the environment variables in the running JVM. They&#39;re loaded when the process starts and they&#39;re immutable, unless you deliberately find a way to hack them.  For launching a new process, you get to specify its environment variables. That&#39;s easily done, whether it&#39;s before your JVM process starts, or a child process spawned by your JVM"}],"tags":[],"owner":{"account_id":9733,"reputation":98826,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"comment_count":5,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1227714707,"creation_date":1227646742,"answer_id":318833,"question_id":318239,"body_markdown":"Poking around online, it looks like it might be possible to do this with JNI.  You&#39;d then have to make a call to putenv() from C, and you&#39;d (presumably) have to do it in a way that worked on both Windows and UNIX.\r\n\r\nIf all that can be done, it surely wouldn&#39;t be too hard for Java itself to support this instead of putting me in a straight jacket.\r\n\r\nA Perl-speaking friend elsewhere suggests that this is because environment variables are process global and Java is striving for good isolation for good design.","title":"How do I set environment variables from Java?","body":"<p>Poking around online, it looks like it might be possible to do this with JNI.  You'd then have to make a call to putenv() from C, and you'd (presumably) have to do it in a way that worked on both Windows and UNIX.</p>\n\n<p>If all that can be done, it surely wouldn't be too hard for Java itself to support this instead of putting me in a straight jacket.</p>\n\n<p>A Perl-speaking friend elsewhere suggests that this is because environment variables are process global and Java is striving for good isolation for good design.</p>\n"},{"comments":[{"owner":{"account_id":45002,"reputation":13531,"user_id":132374,"accept_rate":87,"display_name":"Jon Onstott"},"score":3,"creation_date":1260035601,"post_id":496849,"comment_id":1747447,"body_markdown":"It sounds like that would modify the map in memory, but would it save the value to the system?","body":"It sounds like that would modify the map in memory, but would it save the value to the system?"},{"owner":{"account_id":165652,"reputation":4817,"user_id":389287,"accept_rate":63,"display_name":"anirvan"},"score":1,"creation_date":1280235210,"post_id":496849,"comment_id":3469693,"body_markdown":"well it does change the memory map of environment variables. i guess that suffices in a whole lot of use-cases.  \n@Edward - gosh, it&#39;s hard to imagine how this solution was figured out in the first place!","body":"well it does change the memory map of environment variables. i guess that suffices in a whole lot of use-cases.   @Edward - gosh, it&#39;s hard to imagine how this solution was figured out in the first place!"},{"owner":{"account_id":35374,"reputation":3222,"user_id":100172,"accept_rate":75,"display_name":"Stuart K"},"score":23,"creation_date":1297692474,"post_id":496849,"comment_id":5578931,"body_markdown":"This won&#39;t change the environment variables on the system, but will change them in the current invocation of Java. This is very useful for unit testing.","body":"This won&#39;t change the environment variables on the system, but will change them in the current invocation of Java. This is very useful for unit testing."},{"owner":{"account_id":160808,"reputation":2328,"user_id":381140,"display_name":"Stevo Slavić"},"score":0,"creation_date":1305826521,"post_id":496849,"comment_id":7018379,"body_markdown":"This one doesn&#39;t work on Windows 7 x64; one with theCaseInsensitiveEnvironment does.","body":"This one doesn&#39;t work on Windows 7 x64; one with theCaseInsensitiveEnvironment does."},{"owner":{"account_id":152980,"reputation":5368,"user_id":367916,"display_name":"thejoshwolfe"},"score":11,"creation_date":1336532400,"post_id":496849,"comment_id":13588132,"body_markdown":"why not use `Class&lt;?&gt; cl = env.getClass();` instead of that for loop?","body":"why not use <code>Class&lt;?&gt; cl = env.getClass();</code> instead of that for loop?"},{"owner":{"account_id":1282139,"reputation":2420,"user_id":1236018,"accept_rate":84,"display_name":"David DeMar"},"score":1,"creation_date":1436925926,"post_id":496849,"comment_id":50812929,"body_markdown":"This is exactly what I&#39;ve been looking for! I&#39;ve been writing integration tests for some code that uses a third party tool that, for some reason, only lets you modify its absurdly short default timeout length with an environmental variable.","body":"This is exactly what I&#39;ve been looking for! I&#39;ve been writing integration tests for some code that uses a third party tool that, for some reason, only lets you modify its absurdly short default timeout length with an environmental variable."},{"owner":{"account_id":447397,"reputation":608,"user_id":840997,"accept_rate":71,"display_name":"Bat0u89"},"score":0,"creation_date":1581610704,"post_id":496849,"comment_id":106502387,"body_markdown":"Doesn&#39;t work for me in my integration test, anonymous answer does though.","body":"Doesn&#39;t work for me in my integration test, anonymous answer does though."},{"owner":{"account_id":334861,"reputation":18962,"user_id":661589,"accept_rate":79,"display_name":"Gavriel"},"score":8,"creation_date":1656408160,"post_id":496849,"comment_id":128558778,"body_markdown":"it stopped working on java17","body":"it stopped working on java17"}],"tags":[],"owner":{"display_name":"Edward Campbell"},"comment_count":8,"down_vote_count":3,"up_vote_count":95,"is_accepted":false,"score":92,"last_activity_date":1554839118,"creation_date":1233343491,"answer_id":496849,"question_id":318239,"body_markdown":"    public static void set(Map&lt;String, String&gt; newenv) throws Exception {\r\n        Class[] classes = Collections.class.getDeclaredClasses();\r\n        Map&lt;String, String&gt; env = System.getenv();\r\n        for(Class cl : classes) {\r\n            if(&quot;java.util.Collections$UnmodifiableMap&quot;.equals(cl.getName())) {\r\n                Field field = cl.getDeclaredField(&quot;m&quot;);\r\n                field.setAccessible(true);\r\n                Object obj = field.get(env);\r\n                Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) obj;\r\n                map.clear();\r\n                map.putAll(newenv);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nOr to add/update a single var and removing the loop as per thejoshwolfe&#39;s suggestion.\r\n\r\n\r\n  \r\n\r\n    @SuppressWarnings({ &quot;unchecked&quot; })\r\n      public static void updateEnv(String name, String val) throws ReflectiveOperationException {\r\n        Map&lt;String, String&gt; env = System.getenv();\r\n        Field field = env.getClass().getDeclaredField(&quot;m&quot;);\r\n        field.setAccessible(true);\r\n        ((Map&lt;String, String&gt;) field.get(env)).put(name, val);\r\n      }\r\n\r\n","title":"How do I set environment variables from Java?","body":"<pre><code>public static void set(Map&lt;String, String&gt; newenv) throws Exception {\n    Class[] classes = Collections.class.getDeclaredClasses();\n    Map&lt;String, String&gt; env = System.getenv();\n    for(Class cl : classes) {\n        if(\"java.util.Collections$UnmodifiableMap\".equals(cl.getName())) {\n            Field field = cl.getDeclaredField(\"m\");\n            field.setAccessible(true);\n            Object obj = field.get(env);\n            Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) obj;\n            map.clear();\n            map.putAll(newenv);\n        }\n    }\n}\n</code></pre>\n\n<p>Or to add/update a single var and removing the loop as per thejoshwolfe's suggestion.</p>\n\n<pre><code>@SuppressWarnings({ \"unchecked\" })\n  public static void updateEnv(String name, String val) throws ReflectiveOperationException {\n    Map&lt;String, String&gt; env = System.getenv();\n    Field field = env.getClass().getDeclaredField(\"m\");\n    field.setAccessible(true);\n    ((Map&lt;String, String&gt;) field.get(env)).put(name, val);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":687013,"reputation":241,"user_id":548337,"display_name":"anonymous"},"comment_count":0,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1471275073,"creation_date":1292831141,"answer_id":4487735,"question_id":318239,"body_markdown":"\r\n  \r\n\r\n    // this is a dirty hack - but should be ok for a unittest.\r\n    private void setNewEnvironmentHack(Map&lt;String, String&gt; newenv) throws Exception\r\n    {\r\n      Class&lt;?&gt; processEnvironmentClass = Class.forName(&quot;java.lang.ProcessEnvironment&quot;);\r\n      Field theEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theEnvironment&quot;);\r\n      theEnvironmentField.setAccessible(true);\r\n      Map&lt;String, String&gt; env = (Map&lt;String, String&gt;) theEnvironmentField.get(null);\r\n      env.clear();\r\n      env.putAll(newenv);\r\n      Field theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theCaseInsensitiveEnvironment&quot;);\r\n      theCaseInsensitiveEnvironmentField.setAccessible(true);\r\n      Map&lt;String, String&gt; cienv = (Map&lt;String, String&gt;) theCaseInsensitiveEnvironmentField.get(null);\r\n      cienv.clear();\r\n      cienv.putAll(newenv);\r\n    }\r\n\r\n","title":"How do I set environment variables from Java?","body":"<pre><code>// this is a dirty hack - but should be ok for a unittest.\nprivate void setNewEnvironmentHack(Map&lt;String, String&gt; newenv) throws Exception\n{\n  Class&lt;?&gt; processEnvironmentClass = Class.forName(\"java.lang.ProcessEnvironment\");\n  Field theEnvironmentField = processEnvironmentClass.getDeclaredField(\"theEnvironment\");\n  theEnvironmentField.setAccessible(true);\n  Map&lt;String, String&gt; env = (Map&lt;String, String&gt;) theEnvironmentField.get(null);\n  env.clear();\n  env.putAll(newenv);\n  Field theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(\"theCaseInsensitiveEnvironment\");\n  theCaseInsensitiveEnvironmentField.setAccessible(true);\n  Map&lt;String, String&gt; cienv = (Map&lt;String, String&gt;) theCaseInsensitiveEnvironmentField.get(null);\n  cienv.clear();\n  cienv.putAll(newenv);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16900,"reputation":24039,"user_id":37298,"accept_rate":88,"display_name":"Shervin Asgari"},"score":2,"creation_date":1340608375,"post_id":7201825,"comment_id":14677736,"body_markdown":"Will this only change in memory, or actually change the entire environment variable in the system?","body":"Will this only change in memory, or actually change the entire environment variable in the system?"},{"owner":{"account_id":335827,"reputation":9535,"user_id":663130,"accept_rate":89,"display_name":"pushy"},"score":51,"creation_date":1340611773,"post_id":7201825,"comment_id":14678739,"body_markdown":"This will only change the environment variable in memory. This is good for testing, because you can set the environment variable as necessary for your test, but leave the envs in the system as they are. In fact, I would strongly discourage anyone from using this code for any other purpose than testing. This code is evil ;-)","body":"This will only change the environment variable in memory. This is good for testing, because you can set the environment variable as necessary for your test, but leave the envs in the system as they are. In fact, I would strongly discourage anyone from using this code for any other purpose than testing. This code is evil ;-)"},{"owner":{"account_id":154607,"reputation":617,"user_id":370651,"accept_rate":50,"display_name":"bmeding"},"score":15,"creation_date":1345039926,"post_id":7201825,"comment_id":15955960,"body_markdown":"As an FYI, the JVM creates a copy of the environment variables when it starts.  This will edit that copy, not the environment variables for the parent process that started the JVM.","body":"As an FYI, the JVM creates a copy of the environment variables when it starts.  This will edit that copy, not the environment variables for the parent process that started the JVM."},{"owner":{"account_id":117129,"reputation":2602,"user_id":306864,"accept_rate":75,"display_name":"Hans-Christoph Steiner"},"score":1,"creation_date":1346782992,"post_id":7201825,"comment_id":16451913,"body_markdown":"I tried this on Android and it didn&#39;t seem to take.  Anyone else have any luck on Android?","body":"I tried this on Android and it didn&#39;t seem to take.  Anyone else have any luck on Android?"},{"owner":{"account_id":335827,"reputation":9535,"user_id":663130,"accept_rate":89,"display_name":"pushy"},"score":5,"creation_date":1358761477,"post_id":7201825,"comment_id":20098241,"body_markdown":"Sure, `import java.lang.reflect.Field;`","body":"Sure, <code>import java.lang.reflect.Field;</code>"},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1382886702,"post_id":7201825,"comment_id":29125235,"body_markdown":"@pushy Process Explorer doesn&#39;t show the newly set variable. I&#39;m using Java 1.7.0_45 and calling setEnv() first thing in main().","body":"@pushy Process Explorer doesn&#39;t show the newly set variable. I&#39;m using Java 1.7.0_45 and calling setEnv() first thing in main()."},{"owner":{"account_id":335827,"reputation":9535,"user_id":663130,"accept_rate":89,"display_name":"pushy"},"score":0,"creation_date":1382946595,"post_id":7201825,"comment_id":29142428,"body_markdown":"Thanks for the feedback, which OS are you using? I will try to test the code with the newest java version in the coming days.","body":"Thanks for the feedback, which OS are you using? I will try to test the code with the newest java version in the coming days."},{"owner":{"account_id":8002,"reputation":283812,"user_id":14122,"accept_rate":71,"display_name":"Charles Duffy"},"score":0,"creation_date":1383058413,"post_id":7201825,"comment_id":29196898,"body_markdown":"Doesn&#39;t call `setenv()`, so while this may *look* like it works, it&#39;s not actually changing environment variables at all, just changing the Java map that displays them. Look at `/proc/PID/environ` (on Linux) if you don&#39;t believe me.","body":"Doesn&#39;t call <code>setenv()</code>, so while this may <i>look</i> like it works, it&#39;s not actually changing environment variables at all, just changing the Java map that displays them. Look at <code>&#47;proc&#47;PID&#47;environ</code> (on Linux) if you don&#39;t believe me."},{"owner":{"account_id":335827,"reputation":9535,"user_id":663130,"accept_rate":89,"display_name":"pushy"},"score":0,"creation_date":1383059940,"post_id":7201825,"comment_id":29198023,"body_markdown":"I believe you just fine. Also, this is exactly what most people need. This is a very dirty hack to change environment variables during unit testing. The changes will not be (and should not be) seen outside of the JVM. Also, this issue was already discussed in comments #3 and #4. It may be worthwhile to state that fact in the answer text though.","body":"I believe you just fine. Also, this is exactly what most people need. This is a very dirty hack to change environment variables during unit testing. The changes will not be (and should not be) seen outside of the JVM. Also, this issue was already discussed in comments #3 and #4. It may be worthwhile to state that fact in the answer text though."},{"owner":{"account_id":6609714,"reputation":4086,"user_id":5105305,"accept_rate":58,"display_name":"Kasun Siyambalapitiya"},"score":0,"creation_date":1506423956,"post_id":7201825,"comment_id":79806558,"body_markdown":"@pushy the code segment `cl.getDeclaredField(&quot;m&quot;);` also throws `NoSuchFieldException` so we may need to throw it in method declaration or else we need to have another `try catch` in initial `catch (NoSuchFieldException e) `","body":"@pushy the code segment <code>cl.getDeclaredField(&quot;m&quot;);</code> also throws <code>NoSuchFieldException</code> so we may need to throw it in method declaration or else we need to have another <code>try catch</code> in initial <code>catch (NoSuchFieldException e) </code>"},{"owner":{"account_id":238745,"reputation":790,"user_id":2219288,"display_name":"Rik"},"score":0,"creation_date":1530688652,"post_id":7201825,"comment_id":89318767,"body_markdown":"If you want to avoid hardcoding the class string and doing that loop to find the correct class, I found this approach worked: `var unmodifiablemapClass = Collections.unmodifiableMap(new HashMap&lt;&gt;()).getClass()`\n\n(code untested as I actually wrote it in Kotlin, but you get the idea)","body":"If you want to avoid hardcoding the class string and doing that loop to find the correct class, I found this approach worked: <code>var unmodifiablemapClass = Collections.unmodifiableMap(new HashMap&lt;&gt;()).getClass()</code>  (code untested as I actually wrote it in Kotlin, but you get the idea)"},{"owner":{"account_id":343830,"reputation":1025,"user_id":675784,"accept_rate":60,"display_name":"Karl Henselin"},"score":0,"creation_date":1540402917,"post_id":7201825,"comment_id":92856538,"body_markdown":"I also needed to add a cienv.clear(); and env.clear(); as my unit test required verifying that if the env was not set a correct error would be shown. This is a great set of code for solving the problem though!","body":"I also needed to add a cienv.clear(); and env.clear(); as my unit test required verifying that if the env was not set a correct error would be shown. This is a great set of code for solving the problem though!"},{"owner":{"account_id":8313151,"reputation":2815,"user_id":6247478,"display_name":"Kevin"},"score":0,"creation_date":1556247696,"post_id":7201825,"comment_id":98381186,"body_markdown":"prepend `newenv.values().removeIf(Objects::isNull)` to avoid potential bugs","body":"prepend <code>newenv.values().removeIf(Objects::isNull)</code> to avoid potential bugs"},{"owner":{"account_id":376000,"reputation":3773,"user_id":727184,"accept_rate":62,"display_name":"GarouDan"},"score":0,"creation_date":1556470091,"post_id":7201825,"comment_id":98441632,"body_markdown":"I was trying to use this on a gradle project of mine, since I was aiming to automatically find and set the ANDROID_HOME environment variable if it wasn&#39;t already defined. But it looks like this code could be cleaning the other environment variables (in the catch we have this), one other thing is that we are letting our fields accessible, which could not be a good thing, and I don&#39;t know why but this was causing another problem too. So, for now, I&#39;m not using it, but it could be nice to find improvements for it.","body":"I was trying to use this on a gradle project of mine, since I was aiming to automatically find and set the ANDROID_HOME environment variable if it wasn&#39;t already defined. But it looks like this code could be cleaning the other environment variables (in the catch we have this), one other thing is that we are letting our fields accessible, which could not be a good thing, and I don&#39;t know why but this was causing another problem too. So, for now, I&#39;m not using it, but it could be nice to find improvements for it."},{"owner":{"account_id":10292174,"reputation":361,"user_id":7936960,"display_name":"Arttu"},"score":0,"creation_date":1574435426,"post_id":7201825,"comment_id":104244295,"body_markdown":"What would be the solution for production then?","body":"What would be the solution for production then?"},{"owner":{"account_id":978493,"reputation":549,"user_id":998832,"display_name":"jacobcs"},"score":1,"creation_date":1588124720,"post_id":7201825,"comment_id":108777950,"body_markdown":"Works great @pushy! @Arttu the best considerable solution for production would  be to have these environment variables defined in the server.","body":"Works great @pushy! @Arttu the best considerable solution for production would  be to have these environment variables defined in the server."},{"owner":{"account_id":1934653,"reputation":528,"user_id":3480359,"display_name":"geosmart"},"score":2,"creation_date":1618799730,"post_id":7201825,"comment_id":118703413,"body_markdown":"the method not working,ProcessEnvironment has no theCaseInsensitiveEnvironment field in jdk8!","body":"the method not working,ProcessEnvironment has no theCaseInsensitiveEnvironment field in jdk8!"},{"owner":{"account_id":14938,"reputation":1011,"user_id":31090,"accept_rate":83,"display_name":"Ed Gomoliako"},"score":2,"creation_date":1668156790,"post_id":7201825,"comment_id":131342065,"body_markdown":"Doesn&#39;t work in OpenJDK 17. And the corresponding implementation differs from Linux to Windows.","body":"Doesn&#39;t work in OpenJDK 17. And the corresponding implementation differs from Linux to Windows."},{"owner":{"account_id":13108403,"reputation":88,"user_id":9470347,"display_name":"PulseBeat_02"},"score":0,"creation_date":1696645467,"post_id":7201825,"comment_id":136183854,"body_markdown":"Hi @EdGomoliako Do you mind trying out my solution which uses `Unsafe`? I&#39;m not sure if you resolved your issue yet.","body":"Hi @EdGomoliako Do you mind trying out my solution which uses <code>Unsafe</code>? I&#39;m not sure if you resolved your issue yet."}],"tags":[],"owner":{"account_id":335827,"reputation":9535,"user_id":663130,"accept_rate":89,"display_name":"pushy"},"comment_count":19,"down_vote_count":2,"up_vote_count":278,"is_accepted":false,"score":276,"last_activity_date":1652991876,"creation_date":1314346623,"answer_id":7201825,"question_id":318239,"body_markdown":"For use in scenarios where you need to set specific environment values for unit tests, you might find the following hack useful. It will change the environment variables throughout the JVM (so make sure you reset any changes after your test), but will not alter your system environment.\r\n\r\nI found that a combination of the two dirty hacks by Edward Campbell and anonymous works best, as one does not work under linux, and the other does not work under windows 7. So to get a multiplatform evil hack I combined them:\r\n\r\n    protected static void setEnv(Map&lt;String, String&gt; newenv) throws Exception {\r\n      try {\r\n        Class&lt;?&gt; processEnvironmentClass = Class.forName(&quot;java.lang.ProcessEnvironment&quot;);\r\n        Field theEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theEnvironment&quot;);\r\n        theEnvironmentField.setAccessible(true);\r\n        Map&lt;String, String&gt; env = (Map&lt;String, String&gt;) theEnvironmentField.get(null);\r\n        env.putAll(newenv);\r\n        Field theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theCaseInsensitiveEnvironment&quot;);\r\n        theCaseInsensitiveEnvironmentField.setAccessible(true);\r\n        Map&lt;String, String&gt; cienv = (Map&lt;String, String&gt;) theCaseInsensitiveEnvironmentField.get(null);\r\n        cienv.putAll(newenv);\r\n      } catch (NoSuchFieldException e) {\r\n        Class[] classes = Collections.class.getDeclaredClasses();\r\n        Map&lt;String, String&gt; env = System.getenv();\r\n        for(Class cl : classes) {\r\n          if(&quot;java.util.Collections$UnmodifiableMap&quot;.equals(cl.getName())) {\r\n            Field field = cl.getDeclaredField(&quot;m&quot;);\r\n            field.setAccessible(true);\r\n            Object obj = field.get(env);\r\n            Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) obj;\r\n            map.clear();\r\n            map.putAll(newenv);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nThis Works like a charm. Full credits to the two authors of these hacks.","title":"How do I set environment variables from Java?","body":"<p>For use in scenarios where you need to set specific environment values for unit tests, you might find the following hack useful. It will change the environment variables throughout the JVM (so make sure you reset any changes after your test), but will not alter your system environment.</p>\n<p>I found that a combination of the two dirty hacks by Edward Campbell and anonymous works best, as one does not work under linux, and the other does not work under windows 7. So to get a multiplatform evil hack I combined them:</p>\n<pre><code>protected static void setEnv(Map&lt;String, String&gt; newenv) throws Exception {\n  try {\n    Class&lt;?&gt; processEnvironmentClass = Class.forName(&quot;java.lang.ProcessEnvironment&quot;);\n    Field theEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theEnvironment&quot;);\n    theEnvironmentField.setAccessible(true);\n    Map&lt;String, String&gt; env = (Map&lt;String, String&gt;) theEnvironmentField.get(null);\n    env.putAll(newenv);\n    Field theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theCaseInsensitiveEnvironment&quot;);\n    theCaseInsensitiveEnvironmentField.setAccessible(true);\n    Map&lt;String, String&gt; cienv = (Map&lt;String, String&gt;) theCaseInsensitiveEnvironmentField.get(null);\n    cienv.putAll(newenv);\n  } catch (NoSuchFieldException e) {\n    Class[] classes = Collections.class.getDeclaredClasses();\n    Map&lt;String, String&gt; env = System.getenv();\n    for(Class cl : classes) {\n      if(&quot;java.util.Collections$UnmodifiableMap&quot;.equals(cl.getName())) {\n        Field field = cl.getDeclaredField(&quot;m&quot;);\n        field.setAccessible(true);\n        Object obj = field.get(env);\n        Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) obj;\n        map.clear();\n        map.putAll(newenv);\n      }\n    }\n  }\n}\n</code></pre>\n<p>This Works like a charm. Full credits to the two authors of these hacks.</p>\n"},{"comments":[{"owner":{"account_id":266342,"reputation":7863,"user_id":553865,"accept_rate":67,"display_name":"Mike Slinn"},"score":0,"creation_date":1419033630,"post_id":19040660,"comment_id":43576673,"body_markdown":"Where is JavaClass defined?","body":"Where is JavaClass defined?"},{"owner":{"account_id":1946667,"reputation":411,"user_id":1751642,"display_name":"Randall Whitman"},"score":1,"creation_date":1506715947,"post_id":19040660,"comment_id":79947211,"body_markdown":"Presumably `import java.lang.{Class =&gt; JavaClass}`.","body":"Presumably <code>import java.lang.{Class =&gt; JavaClass}</code>."},{"owner":{"account_id":386531,"reputation":79,"user_id":744335,"display_name":"Alex Konshin"},"score":2,"creation_date":1532480735,"post_id":19040660,"comment_id":89988013,"body_markdown":"Implementation of java.lang.ProcessEnvironment is different on different platforms even for the same build. For example, there is no class java.lang.ProcessEnvironment$Variable in the implementation of Windows but this class exists in one for Linux. You can easily check it. Just download tar.gz JDK distribution for Linux and extract the source from src.zip then compare it with the same file from the distribution for Windows. They are totally different in JDK 1.8.0_181. I have not checked them in Java 10 but I will not be surprised if there is the same picture.","body":"Implementation of java.lang.ProcessEnvironment is different on different platforms even for the same build. For example, there is no class java.lang.ProcessEnvironment$Variable in the implementation of Windows but this class exists in one for Linux. You can easily check it. Just download tar.gz JDK distribution for Linux and extract the source from src.zip then compare it with the same file from the distribution for Windows. They are totally different in JDK 1.8.0_181. I have not checked them in Java 10 but I will not be surprised if there is the same picture."}],"tags":[],"owner":{"account_id":1594336,"reputation":321,"user_id":1476910,"accept_rate":25,"display_name":"Paul Blair"},"comment_count":3,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1380240113,"creation_date":1380240113,"answer_id":19040660,"question_id":318239,"body_markdown":"Tried pushy&#39;s answer above and it worked for the most part. However, in certain circumstances, I would see this exception:\r\n\r\n    java.lang.String cannot be cast to java.lang.ProcessEnvironment$Variable\r\n\r\nThis turns out to happen when the method was called more than once, owing to the implementation of certain inner classes of `ProcessEnvironment.` If the `setEnv(..)` method is called more than once, when the keys are retrieved from the `theEnvironment` map, they are now strings (having been put in as strings by the first invocation of `setEnv(...)` ) and cannot be cast to the map&#39;s generic type, `Variable,` which is a private inner class of `ProcessEnvironment.`\r\n\r\nA fixed version (in Scala), is below. Hopefully it isn&#39;t too difficult to carry over into Java.\r\n\r\n    def setEnv(newenv: java.util.Map[String, String]): Unit = {\r\n      try {\r\n        val processEnvironmentClass = JavaClass.forName(&quot;java.lang.ProcessEnvironment&quot;)\r\n        val theEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theEnvironment&quot;)\r\n        theEnvironmentField.setAccessible(true)\r\n\r\n        val variableClass = JavaClass.forName(&quot;java.lang.ProcessEnvironment$Variable&quot;)\r\n        val convertToVariable = variableClass.getMethod(&quot;valueOf&quot;, classOf[java.lang.String])\r\n        convertToVariable.setAccessible(true)\r\n\r\n        val valueClass = JavaClass.forName(&quot;java.lang.ProcessEnvironment$Value&quot;)\r\n        val convertToValue = valueClass.getMethod(&quot;valueOf&quot;, classOf[java.lang.String])\r\n        convertToValue.setAccessible(true)\r\n\r\n        val sampleVariable = convertToVariable.invoke(null, &quot;&quot;)\r\n        val sampleValue = convertToValue.invoke(null, &quot;&quot;)\r\n        val env = theEnvironmentField.get(null).asInstanceOf[java.util.Map[sampleVariable.type, sampleValue.type]]\r\n        newenv.foreach { case (k, v) =&gt; {\r\n            val variable = convertToVariable.invoke(null, k).asInstanceOf[sampleVariable.type]\r\n            val value = convertToValue.invoke(null, v).asInstanceOf[sampleValue.type]\r\n            env.put(variable, value)\r\n          }\r\n        }\r\n\r\n        val theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theCaseInsensitiveEnvironment&quot;)\r\n        theCaseInsensitiveEnvironmentField.setAccessible(true)\r\n        val cienv = theCaseInsensitiveEnvironmentField.get(null).asInstanceOf[java.util.Map[String, String]]\r\n        cienv.putAll(newenv);\r\n      }\r\n      catch {\r\n        case e : NoSuchFieldException =&gt; {\r\n          try {\r\n            val classes = classOf[java.util.Collections].getDeclaredClasses\r\n            val env = System.getenv()\r\n            classes foreach (cl =&gt; {\r\n              if(&quot;java.util.Collections$UnmodifiableMap&quot; == cl.getName) {\r\n                val field = cl.getDeclaredField(&quot;m&quot;)\r\n                field.setAccessible(true)\r\n                val map = field.get(env).asInstanceOf[java.util.Map[String, String]]\r\n                // map.clear() // Not sure why this was in the code. It means we need to set all required environment variables.\r\n                map.putAll(newenv)\r\n              }\r\n            })\r\n          } catch {\r\n            case e2: Exception =&gt; e2.printStackTrace()\r\n          }\r\n        }\r\n        case e1: Exception =&gt; e1.printStackTrace()\r\n      }\r\n    }","title":"How do I set environment variables from Java?","body":"<p>Tried pushy's answer above and it worked for the most part. However, in certain circumstances, I would see this exception:</p>\n\n<pre><code>java.lang.String cannot be cast to java.lang.ProcessEnvironment$Variable\n</code></pre>\n\n<p>This turns out to happen when the method was called more than once, owing to the implementation of certain inner classes of <code>ProcessEnvironment.</code> If the <code>setEnv(..)</code> method is called more than once, when the keys are retrieved from the <code>theEnvironment</code> map, they are now strings (having been put in as strings by the first invocation of <code>setEnv(...)</code> ) and cannot be cast to the map's generic type, <code>Variable,</code> which is a private inner class of <code>ProcessEnvironment.</code></p>\n\n<p>A fixed version (in Scala), is below. Hopefully it isn't too difficult to carry over into Java.</p>\n\n<pre><code>def setEnv(newenv: java.util.Map[String, String]): Unit = {\n  try {\n    val processEnvironmentClass = JavaClass.forName(\"java.lang.ProcessEnvironment\")\n    val theEnvironmentField = processEnvironmentClass.getDeclaredField(\"theEnvironment\")\n    theEnvironmentField.setAccessible(true)\n\n    val variableClass = JavaClass.forName(\"java.lang.ProcessEnvironment$Variable\")\n    val convertToVariable = variableClass.getMethod(\"valueOf\", classOf[java.lang.String])\n    convertToVariable.setAccessible(true)\n\n    val valueClass = JavaClass.forName(\"java.lang.ProcessEnvironment$Value\")\n    val convertToValue = valueClass.getMethod(\"valueOf\", classOf[java.lang.String])\n    convertToValue.setAccessible(true)\n\n    val sampleVariable = convertToVariable.invoke(null, \"\")\n    val sampleValue = convertToValue.invoke(null, \"\")\n    val env = theEnvironmentField.get(null).asInstanceOf[java.util.Map[sampleVariable.type, sampleValue.type]]\n    newenv.foreach { case (k, v) =&gt; {\n        val variable = convertToVariable.invoke(null, k).asInstanceOf[sampleVariable.type]\n        val value = convertToValue.invoke(null, v).asInstanceOf[sampleValue.type]\n        env.put(variable, value)\n      }\n    }\n\n    val theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(\"theCaseInsensitiveEnvironment\")\n    theCaseInsensitiveEnvironmentField.setAccessible(true)\n    val cienv = theCaseInsensitiveEnvironmentField.get(null).asInstanceOf[java.util.Map[String, String]]\n    cienv.putAll(newenv);\n  }\n  catch {\n    case e : NoSuchFieldException =&gt; {\n      try {\n        val classes = classOf[java.util.Collections].getDeclaredClasses\n        val env = System.getenv()\n        classes foreach (cl =&gt; {\n          if(\"java.util.Collections$UnmodifiableMap\" == cl.getName) {\n            val field = cl.getDeclaredField(\"m\")\n            field.setAccessible(true)\n            val map = field.get(env).asInstanceOf[java.util.Map[String, String]]\n            // map.clear() // Not sure why this was in the code. It means we need to set all required environment variables.\n            map.putAll(newenv)\n          }\n        })\n      } catch {\n        case e2: Exception =&gt; e2.printStackTrace()\n      }\n    }\n    case e1: Exception =&gt; e1.printStackTrace()\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":117129,"reputation":2602,"user_id":306864,"accept_rate":75,"display_name":"Hans-Christoph Steiner"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1386386535,"creation_date":1386386535,"answer_id":20437164,"question_id":318239,"body_markdown":"It turns out that the solution from @pushy/@anonymous/@Edward Campbell does not work on Android because Android is not really Java.  Specifically, Android does not have `java.lang.ProcessEnvironment` at all.  But it turns out to be easier in Android, you just need to do a JNI call to POSIX `setenv()`:\r\n\r\nIn C/JNI:\r\n&lt;!-- language: lang-c --&gt;\r\n\r\n    JNIEXPORT jint JNICALL Java_com_example_posixtest_Posix_setenv\r\n      (JNIEnv* env, jclass clazz, jstring key, jstring value, jboolean overwrite)\r\n    {\r\n        char* k = (char *) (*env)-&gt;GetStringUTFChars(env, key, NULL);\r\n        char* v = (char *) (*env)-&gt;GetStringUTFChars(env, value, NULL);\r\n        int err = setenv(k, v, overwrite);\r\n        (*env)-&gt;ReleaseStringUTFChars(env, key, k);\r\n        (*env)-&gt;ReleaseStringUTFChars(env, value, v);\r\n        return err;\r\n    }\r\n\r\nAnd in Java:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class Posix {\r\n    \r\n        public static native int setenv(String key, String value, boolean overwrite);\r\n    \r\n        private void runTest() {\r\n            Posix.setenv(&quot;LD_LIBRARY_PATH&quot;, &quot;foo&quot;, true);\r\n        }\r\n    }\r\n\r\n","title":"How do I set environment variables from Java?","body":"<p>It turns out that the solution from @pushy/@anonymous/@Edward Campbell does not work on Android because Android is not really Java.  Specifically, Android does not have <code>java.lang.ProcessEnvironment</code> at all.  But it turns out to be easier in Android, you just need to do a JNI call to POSIX <code>setenv()</code>:</p>\n\n<p>In C/JNI:\n</p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_com_example_posixtest_Posix_setenv\n  (JNIEnv* env, jclass clazz, jstring key, jstring value, jboolean overwrite)\n{\n    char* k = (char *) (*env)-&gt;GetStringUTFChars(env, key, NULL);\n    char* v = (char *) (*env)-&gt;GetStringUTFChars(env, value, NULL);\n    int err = setenv(k, v, overwrite);\n    (*env)-&gt;ReleaseStringUTFChars(env, key, k);\n    (*env)-&gt;ReleaseStringUTFChars(env, value, v);\n    return err;\n}\n</code></pre>\n\n<p>And in Java:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Posix {\n\n    public static native int setenv(String key, String value, boolean overwrite);\n\n    private void runTest() {\n        Posix.setenv(\"LD_LIBRARY_PATH\", \"foo\", true);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":494891,"reputation":686,"user_id":927592,"display_name":"DavisNT"},"score":1,"creation_date":1408794634,"post_id":22315463,"comment_id":39731836,"body_markdown":"Tested and working on Android 4.4.4 (CM11). P.S. The only adjustment I made was replacing `throws ErrnoException` with `throws Exception`.","body":"Tested and working on Android 4.4.4 (CM11). P.S. The only adjustment I made was replacing <code>throws ErrnoException</code> with <code>throws Exception</code>."},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":8,"creation_date":1434860691,"post_id":22315463,"comment_id":49954761,"body_markdown":"API 21, has `Os.setEnv` now. http://developer.android.com/reference/android/system/Os.html#setenv(java.lang.String, java.lang.String, boolean)","body":"API 21, has <code>Os.setEnv</code> now. <a href=\"http://developer.android.com/reference/android/system/Os.html#setenv(java.lang.String\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/system/&hellip;</a>, java.lang.String, boolean)"},{"owner":{"account_id":92486,"reputation":45195,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"score":1,"creation_date":1537778086,"post_id":22315463,"comment_id":91892221,"body_markdown":"Potentially defunct now with Pie&#39;s new restrictions:\nhttps://developer.android.com/about/versions/pie/restrictions-non-sdk-interfaces","body":"Potentially defunct now with Pie&#39;s new restrictions: <a href=\"https://developer.android.com/about/versions/pie/restrictions-non-sdk-interfaces\" rel=\"nofollow noreferrer\">developer.android.com/about/versions/pie/&hellip;</a>"}],"tags":[],"owner":{"account_id":4152222,"reputation":211,"user_id":3404318,"display_name":"user3404318"},"comment_count":3,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1394505951,"creation_date":1394505951,"answer_id":22315463,"question_id":318239,"body_markdown":"on Android the interface is exposed via Libcore.os as a kind of hidden API.\r\n   \r\n    Libcore.os.setenv(&quot;VAR&quot;, &quot;value&quot;, bOverwrite);\r\n    Libcore.os.getenv(&quot;VAR&quot;));\r\n\r\nThe Libcore class as well as the interface OS is public. Just the class declaration is missing and need to be shown to the linker. No need to add the classes to the application, but it also does not hurt if it is included.\r\n\r\n    package libcore.io;\r\n    \r\n    public final class Libcore {\r\n        private Libcore() { }\r\n    \r\n        public static Os os;\r\n    }\r\n\r\n    package libcore.io;\r\n    \r\n    public interface Os {\r\n        public String getenv(String name);\r\n        public void setenv(String name, String value, boolean overwrite) throws ErrnoException;\r\n    }","title":"How do I set environment variables from Java?","body":"<p>on Android the interface is exposed via Libcore.os as a kind of hidden API.</p>\n\n<pre><code>Libcore.os.setenv(\"VAR\", \"value\", bOverwrite);\nLibcore.os.getenv(\"VAR\"));\n</code></pre>\n\n<p>The Libcore class as well as the interface OS is public. Just the class declaration is missing and need to be shown to the linker. No need to add the classes to the application, but it also does not hurt if it is included.</p>\n\n<pre><code>package libcore.io;\n\npublic final class Libcore {\n    private Libcore() { }\n\n    public static Os os;\n}\n\npackage libcore.io;\n\npublic interface Os {\n    public String getenv(String name);\n    public void setenv(String name, String value, boolean overwrite) throws ErrnoException;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6891567,"reputation":418,"user_id":5294858,"display_name":"Mang Jojot"},"score":0,"creation_date":1596690164,"post_id":38073822,"comment_id":111892953,"body_markdown":"it works, use like this:\n    `setenv(&quot;coba&quot;,&quot;coba value&quot;);`\n    `System.out.println(System.getenv(&quot;coba&quot;));`\n\n  result:\n`Set environment variable &lt;coba&gt; to &lt;coba value&gt;. Sanity Check: coba`\n`value coba value`","body":"it works, use like this:     <code>setenv(&quot;coba&quot;,&quot;coba value&quot;);</code>     <code>System.out.println(System.getenv(&quot;coba&quot;));</code>    result: <code>Set environment variable &lt;coba&gt; to &lt;coba value&gt;. Sanity Check: coba</code> <code>value coba value</code>"}],"tags":[],"owner":{"account_id":2090586,"reputation":4006,"user_id":1860517,"accept_rate":85,"display_name":"mangusbrother"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1467110105,"creation_date":1467110105,"answer_id":38073822,"question_id":318239,"body_markdown":"This is a combination of @paul-blair &#39;s answer converted to Java which includes some cleanups pointed out by paul blair and some mistakes that seem to have been inside @pushy &#39;s code which is made up of @Edward Campbell and anonymous.\r\n\r\nI cannot emphasize how much this code should ONLY be used in testing and is extremely hacky. But for cases where you need the environment setup in tests it is exactly what I needed.\r\n\r\nThis also includes some minor touches of mine that allow the code to work on both Windows running on \r\n\r\n    java version &quot;1.8.0_92&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_92-b14)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.92-b14, mixed mode)\r\n\r\nas well as Centos running on\r\n\r\n    openjdk version &quot;1.8.0_91&quot;\r\n    OpenJDK Runtime Environment (build 1.8.0_91-b14)\r\n    OpenJDK 64-Bit Server VM (build 25.91-b14, mixed mode)\r\n\r\nThe implementation:\r\n\r\n\r\n    /**\r\n     * Sets an environment variable FOR THE CURRENT RUN OF THE JVM\r\n     * Does not actually modify the system&#39;s environment variables,\r\n     *  but rather only the copy of the variables that java has taken,\r\n     *  and hence should only be used for testing purposes!\r\n     * @param key The Name of the variable to set\r\n     * @param value The value of the variable to set\r\n     */\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public static &lt;K,V&gt; void setenv(final String key, final String value) {\r\n        try {\r\n            /// we obtain the actual environment\r\n            final Class&lt;?&gt; processEnvironmentClass = Class.forName(&quot;java.lang.ProcessEnvironment&quot;);\r\n            final Field theEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theEnvironment&quot;);\r\n            final boolean environmentAccessibility = theEnvironmentField.isAccessible();\r\n            theEnvironmentField.setAccessible(true);\r\n\r\n            final Map&lt;K,V&gt; env = (Map&lt;K, V&gt;) theEnvironmentField.get(null);\r\n\r\n            if (SystemUtils.IS_OS_WINDOWS) {\r\n                // This is all that is needed on windows running java jdk 1.8.0_92\r\n                if (value == null) {\r\n                    env.remove(key);\r\n                } else {\r\n                    env.put((K) key, (V) value);\r\n                }\r\n            } else {\r\n                // This is triggered to work on openjdk 1.8.0_91\r\n                // The ProcessEnvironment$Variable is the key of the map\r\n                final Class&lt;K&gt; variableClass = (Class&lt;K&gt;) Class.forName(&quot;java.lang.ProcessEnvironment$Variable&quot;);\r\n                final Method convertToVariable = variableClass.getMethod(&quot;valueOf&quot;, String.class);\r\n                final boolean conversionVariableAccessibility = convertToVariable.isAccessible();\r\n                convertToVariable.setAccessible(true);\r\n\r\n                // The ProcessEnvironment$Value is the value fo the map\r\n                final Class&lt;V&gt; valueClass = (Class&lt;V&gt;) Class.forName(&quot;java.lang.ProcessEnvironment$Value&quot;);\r\n                final Method convertToValue = valueClass.getMethod(&quot;valueOf&quot;, String.class);\r\n                final boolean conversionValueAccessibility = convertToValue.isAccessible();\r\n                convertToValue.setAccessible(true);\r\n\r\n                if (value == null) {\r\n                    env.remove(convertToVariable.invoke(null, key));\r\n                } else {\r\n                    // we place the new value inside the map after conversion so as to\r\n                    // avoid class cast exceptions when rerunning this code\r\n                    env.put((K) convertToVariable.invoke(null, key), (V) convertToValue.invoke(null, value));\r\n\r\n                    // reset accessibility to what they were\r\n                    convertToValue.setAccessible(conversionValueAccessibility);\r\n                    convertToVariable.setAccessible(conversionVariableAccessibility);\r\n                }\r\n            }\r\n            // reset environment accessibility\r\n            theEnvironmentField.setAccessible(environmentAccessibility);\r\n\r\n            // we apply the same to the case insensitive environment\r\n            final Field theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theCaseInsensitiveEnvironment&quot;);\r\n            final boolean insensitiveAccessibility = theCaseInsensitiveEnvironmentField.isAccessible();\r\n            theCaseInsensitiveEnvironmentField.setAccessible(true);\r\n            // Not entirely sure if this needs to be casted to ProcessEnvironment$Variable and $Value as well\r\n            final Map&lt;String, String&gt; cienv = (Map&lt;String, String&gt;) theCaseInsensitiveEnvironmentField.get(null);\r\n            if (value == null) {\r\n                // remove if null\r\n                cienv.remove(key);\r\n            } else {\r\n                cienv.put(key, value);\r\n            }\r\n            theCaseInsensitiveEnvironmentField.setAccessible(insensitiveAccessibility);\r\n        } catch (final ClassNotFoundException | NoSuchMethodException | IllegalAccessException | InvocationTargetException e) {\r\n            throw new IllegalStateException(&quot;Failed setting environment variable &lt;&quot;+key+&quot;&gt; to &lt;&quot;+value+&quot;&gt;&quot;, e);\r\n        } catch (final NoSuchFieldException e) {\r\n            // we could not find theEnvironment\r\n            final Map&lt;String, String&gt; env = System.getenv();\r\n            Stream.of(Collections.class.getDeclaredClasses())\r\n                    // obtain the declared classes of type $UnmodifiableMap\r\n                    .filter(c1 -&gt; &quot;java.util.Collections$UnmodifiableMap&quot;.equals(c1.getName()))\r\n                    .map(c1 -&gt; {\r\n                        try {\r\n                            return c1.getDeclaredField(&quot;m&quot;);\r\n                        } catch (final NoSuchFieldException e1) {\r\n                            throw new IllegalStateException(&quot;Failed setting environment variable &lt;&quot;+key+&quot;&gt; to &lt;&quot;+value+&quot;&gt; when locating in-class memory map of environment&quot;, e1);\r\n                        }\r\n                    })\r\n                    .forEach(field -&gt; {\r\n                        try {\r\n                            final boolean fieldAccessibility = field.isAccessible();\r\n                            field.setAccessible(true);\r\n                            // we obtain the environment\r\n                            final Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) field.get(env);\r\n                            if (value == null) {\r\n                                // remove if null\r\n                                map.remove(key);\r\n                            } else {\r\n                                map.put(key, value);\r\n                            }\r\n                            // reset accessibility\r\n                            field.setAccessible(fieldAccessibility);\r\n                        } catch (final ConcurrentModificationException e1) {\r\n                            // This may happen if we keep backups of the environment before calling this method\r\n                            // as the map that we kept as a backup may be picked up inside this block.\r\n                            // So we simply skip this attempt and continue adjusting the other maps\r\n                            // To avoid this one should always keep individual keys/value backups not the entire map\r\n                            LOGGER.info(&quot;Attempted to modify source map: &quot;+field.getDeclaringClass()+&quot;#&quot;+field.getName(), e1);\r\n                        } catch (final IllegalAccessException e1) {\r\n                            throw new IllegalStateException(&quot;Failed setting environment variable &lt;&quot;+key+&quot;&gt; to &lt;&quot;+value+&quot;&gt;. Unable to access field!&quot;, e1);\r\n                        }\r\n                    });\r\n        }\r\n        LOGGER.info(&quot;Set environment variable &lt;&quot;+key+&quot;&gt; to &lt;&quot;+value+&quot;&gt;. Sanity Check: &quot;+System.getenv(key));\r\n    }","title":"How do I set environment variables from Java?","body":"<p>This is a combination of @paul-blair 's answer converted to Java which includes some cleanups pointed out by paul blair and some mistakes that seem to have been inside @pushy 's code which is made up of @Edward Campbell and anonymous.</p>\n\n<p>I cannot emphasize how much this code should ONLY be used in testing and is extremely hacky. But for cases where you need the environment setup in tests it is exactly what I needed.</p>\n\n<p>This also includes some minor touches of mine that allow the code to work on both Windows running on </p>\n\n<pre><code>java version \"1.8.0_92\"\nJava(TM) SE Runtime Environment (build 1.8.0_92-b14)\nJava HotSpot(TM) 64-Bit Server VM (build 25.92-b14, mixed mode)\n</code></pre>\n\n<p>as well as Centos running on</p>\n\n<pre><code>openjdk version \"1.8.0_91\"\nOpenJDK Runtime Environment (build 1.8.0_91-b14)\nOpenJDK 64-Bit Server VM (build 25.91-b14, mixed mode)\n</code></pre>\n\n<p>The implementation:</p>\n\n<pre><code>/**\n * Sets an environment variable FOR THE CURRENT RUN OF THE JVM\n * Does not actually modify the system's environment variables,\n *  but rather only the copy of the variables that java has taken,\n *  and hence should only be used for testing purposes!\n * @param key The Name of the variable to set\n * @param value The value of the variable to set\n */\n@SuppressWarnings(\"unchecked\")\npublic static &lt;K,V&gt; void setenv(final String key, final String value) {\n    try {\n        /// we obtain the actual environment\n        final Class&lt;?&gt; processEnvironmentClass = Class.forName(\"java.lang.ProcessEnvironment\");\n        final Field theEnvironmentField = processEnvironmentClass.getDeclaredField(\"theEnvironment\");\n        final boolean environmentAccessibility = theEnvironmentField.isAccessible();\n        theEnvironmentField.setAccessible(true);\n\n        final Map&lt;K,V&gt; env = (Map&lt;K, V&gt;) theEnvironmentField.get(null);\n\n        if (SystemUtils.IS_OS_WINDOWS) {\n            // This is all that is needed on windows running java jdk 1.8.0_92\n            if (value == null) {\n                env.remove(key);\n            } else {\n                env.put((K) key, (V) value);\n            }\n        } else {\n            // This is triggered to work on openjdk 1.8.0_91\n            // The ProcessEnvironment$Variable is the key of the map\n            final Class&lt;K&gt; variableClass = (Class&lt;K&gt;) Class.forName(\"java.lang.ProcessEnvironment$Variable\");\n            final Method convertToVariable = variableClass.getMethod(\"valueOf\", String.class);\n            final boolean conversionVariableAccessibility = convertToVariable.isAccessible();\n            convertToVariable.setAccessible(true);\n\n            // The ProcessEnvironment$Value is the value fo the map\n            final Class&lt;V&gt; valueClass = (Class&lt;V&gt;) Class.forName(\"java.lang.ProcessEnvironment$Value\");\n            final Method convertToValue = valueClass.getMethod(\"valueOf\", String.class);\n            final boolean conversionValueAccessibility = convertToValue.isAccessible();\n            convertToValue.setAccessible(true);\n\n            if (value == null) {\n                env.remove(convertToVariable.invoke(null, key));\n            } else {\n                // we place the new value inside the map after conversion so as to\n                // avoid class cast exceptions when rerunning this code\n                env.put((K) convertToVariable.invoke(null, key), (V) convertToValue.invoke(null, value));\n\n                // reset accessibility to what they were\n                convertToValue.setAccessible(conversionValueAccessibility);\n                convertToVariable.setAccessible(conversionVariableAccessibility);\n            }\n        }\n        // reset environment accessibility\n        theEnvironmentField.setAccessible(environmentAccessibility);\n\n        // we apply the same to the case insensitive environment\n        final Field theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(\"theCaseInsensitiveEnvironment\");\n        final boolean insensitiveAccessibility = theCaseInsensitiveEnvironmentField.isAccessible();\n        theCaseInsensitiveEnvironmentField.setAccessible(true);\n        // Not entirely sure if this needs to be casted to ProcessEnvironment$Variable and $Value as well\n        final Map&lt;String, String&gt; cienv = (Map&lt;String, String&gt;) theCaseInsensitiveEnvironmentField.get(null);\n        if (value == null) {\n            // remove if null\n            cienv.remove(key);\n        } else {\n            cienv.put(key, value);\n        }\n        theCaseInsensitiveEnvironmentField.setAccessible(insensitiveAccessibility);\n    } catch (final ClassNotFoundException | NoSuchMethodException | IllegalAccessException | InvocationTargetException e) {\n        throw new IllegalStateException(\"Failed setting environment variable &lt;\"+key+\"&gt; to &lt;\"+value+\"&gt;\", e);\n    } catch (final NoSuchFieldException e) {\n        // we could not find theEnvironment\n        final Map&lt;String, String&gt; env = System.getenv();\n        Stream.of(Collections.class.getDeclaredClasses())\n                // obtain the declared classes of type $UnmodifiableMap\n                .filter(c1 -&gt; \"java.util.Collections$UnmodifiableMap\".equals(c1.getName()))\n                .map(c1 -&gt; {\n                    try {\n                        return c1.getDeclaredField(\"m\");\n                    } catch (final NoSuchFieldException e1) {\n                        throw new IllegalStateException(\"Failed setting environment variable &lt;\"+key+\"&gt; to &lt;\"+value+\"&gt; when locating in-class memory map of environment\", e1);\n                    }\n                })\n                .forEach(field -&gt; {\n                    try {\n                        final boolean fieldAccessibility = field.isAccessible();\n                        field.setAccessible(true);\n                        // we obtain the environment\n                        final Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) field.get(env);\n                        if (value == null) {\n                            // remove if null\n                            map.remove(key);\n                        } else {\n                            map.put(key, value);\n                        }\n                        // reset accessibility\n                        field.setAccessible(fieldAccessibility);\n                    } catch (final ConcurrentModificationException e1) {\n                        // This may happen if we keep backups of the environment before calling this method\n                        // as the map that we kept as a backup may be picked up inside this block.\n                        // So we simply skip this attempt and continue adjusting the other maps\n                        // To avoid this one should always keep individual keys/value backups not the entire map\n                        LOGGER.info(\"Attempted to modify source map: \"+field.getDeclaringClass()+\"#\"+field.getName(), e1);\n                    } catch (final IllegalAccessException e1) {\n                        throw new IllegalStateException(\"Failed setting environment variable &lt;\"+key+\"&gt; to &lt;\"+value+\"&gt;. Unable to access field!\", e1);\n                    }\n                });\n    }\n    LOGGER.info(\"Set environment variable &lt;\"+key+\"&gt; to &lt;\"+value+\"&gt;. Sanity Check: \"+System.getenv(key));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5756200,"reputation":298,"user_id":4544053,"display_name":"mengchengfeng"},"score":0,"creation_date":1506371797,"post_id":40682052,"comment_id":79785420,"body_markdown":"The above does not work in windows 10, but _will_ work in linux.","body":"The above does not work in windows 10, but <i>will</i> work in linux."},{"owner":{"account_id":2847999,"reputation":15490,"user_id":2445864,"accept_rate":79,"display_name":"Hubert Grzeskowiak"},"score":0,"creation_date":1506397263,"post_id":40682052,"comment_id":79792500,"body_markdown":"Interesting. I didn&#39;t try it myself on Windows. Do you get an error, @mengchengfeng?","body":"Interesting. I didn&#39;t try it myself on Windows. Do you get an error, @mengchengfeng?"},{"owner":{"account_id":5756200,"reputation":298,"user_id":4544053,"display_name":"mengchengfeng"},"score":0,"creation_date":1506471294,"post_id":40682052,"comment_id":79831961,"body_markdown":"@HubertGrzeskowiak We didn&#39;t see any error messages, it just didn&#39;t work...","body":"@HubertGrzeskowiak We didn&#39;t see any error messages, it just didn&#39;t work..."},{"owner":{"account_id":11924446,"reputation":148,"user_id":8726139,"display_name":"Bastien Gallienne"},"score":1,"creation_date":1611745842,"post_id":40682052,"comment_id":116547874,"body_markdown":"it works on windows 10 and linux for me. Congratulations !","body":"it works on windows 10 and linux for me. Congratulations !"},{"owner":{"account_id":238697,"reputation":1454,"user_id":507761,"accept_rate":100,"display_name":"Matthew Read"},"score":1,"creation_date":1634243241,"post_id":40682052,"comment_id":122980012,"body_markdown":"Why would this be Linux/Mac only?  Obviously Bash may not be present by default, but the Java code here is not platform-dependent.","body":"Why would this be Linux/Mac only?  Obviously Bash may not be present by default, but the Java code here is not platform-dependent."},{"owner":{"account_id":2847999,"reputation":15490,"user_id":2445864,"accept_rate":79,"display_name":"Hubert Grzeskowiak"},"score":0,"creation_date":1634259238,"post_id":40682052,"comment_id":122983298,"body_markdown":"@MatthewRead I didn&#39;t test on Windows, but one of the commenters reported it not working. If you can confirm it works on Windows, feel free to change the answer (or let me know and I&#39;ll happily edit)","body":"@MatthewRead I didn&#39;t test on Windows, but one of the commenters reported it not working. If you can confirm it works on Windows, feel free to change the answer (or let me know and I&#39;ll happily edit)"},{"owner":{"account_id":6272544,"reputation":493,"user_id":4876331,"display_name":"Don Smith"},"score":0,"creation_date":1646932354,"post_id":40682052,"comment_id":126251700,"body_markdown":"That works Red Hat linux 8.5 using OpenJDK 11.0.11 but I get ugly warnings:\n\n    WARNING: An illegal reflective access operation has occurred\n\n    WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\n\n    WARNING: All illegal access operations will be denied in a future release","body":"That works Red Hat linux 8.5 using OpenJDK 11.0.11 but I get ugly warnings:      WARNING: An illegal reflective access operation has occurred      WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations      WARNING: All illegal access operations will be denied in a future release"},{"owner":{"account_id":334861,"reputation":18962,"user_id":661589,"accept_rate":79,"display_name":"Gavriel"},"score":4,"creation_date":1656408145,"post_id":40682052,"comment_id":128558765,"body_markdown":"and it stopped working on java17","body":"and it stopped working on java17"},{"owner":{"account_id":14255429,"reputation":601,"user_id":10297793,"display_name":"zertyz"},"score":0,"creation_date":1675777449,"post_id":40682052,"comment_id":132998378,"body_markdown":"Among all wired &amp; complicated answers I came about, this one is the simplest. Thanks for sharing.","body":"Among all wired &amp; complicated answers I came about, this one is the simplest. Thanks for sharing."},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1696591088,"post_id":40682052,"comment_id":136176029,"body_markdown":"Do variables set this way get inherited by subprocesses, as specified in the original question? I would be amazed if they do, since this looks like it is not modifying the process&#39;s native environment, just Java&#39;s parsed copy of it.","body":"Do variables set this way get inherited by subprocesses, as specified in the original question? I would be amazed if they do, since this looks like it is not modifying the process&#39;s native environment, just Java&#39;s parsed copy of it."}],"tags":[],"owner":{"account_id":2847999,"reputation":15490,"user_id":2445864,"accept_rate":79,"display_name":"Hubert Grzeskowiak"},"comment_count":10,"down_vote_count":1,"up_vote_count":40,"is_accepted":false,"score":39,"last_activity_date":1654607985,"creation_date":1479487109,"answer_id":40682052,"question_id":318239,"body_markdown":"Setting single environment variables (based on answer by Edward Campbell):\r\n\r\n    public static void setEnv(String key, String value) {\r\n        try {\r\n            Map&lt;String, String&gt; env = System.getenv();\r\n            Class&lt;?&gt; cl = env.getClass();\r\n            Field field = cl.getDeclaredField(&quot;m&quot;);\r\n            field.setAccessible(true);\r\n            Map&lt;String, String&gt; writableEnv = (Map&lt;String, String&gt;) field.get(env);\r\n            writableEnv.put(key, value);\r\n        } catch (Exception e) {\r\n            throw new IllegalStateException(&quot;Failed to set environment variable&quot;, e);\r\n        }\r\n    }\r\n\r\n**Usage:**\r\n\r\nFirst, put the method in any class you want, e.g. SystemUtil. Then call it statically:\r\n\r\n    SystemUtil.setEnv(&quot;SHELL&quot;, &quot;/bin/bash&quot;);\r\n\r\nIf you call `System.getenv(&quot;SHELL&quot;)` after this, you&#39;ll get `&quot;/bin/bash&quot;` back.","title":"How do I set environment variables from Java?","body":"<p>Setting single environment variables (based on answer by Edward Campbell):</p>\n<pre><code>public static void setEnv(String key, String value) {\n    try {\n        Map&lt;String, String&gt; env = System.getenv();\n        Class&lt;?&gt; cl = env.getClass();\n        Field field = cl.getDeclaredField(&quot;m&quot;);\n        field.setAccessible(true);\n        Map&lt;String, String&gt; writableEnv = (Map&lt;String, String&gt;) field.get(env);\n        writableEnv.put(key, value);\n    } catch (Exception e) {\n        throw new IllegalStateException(&quot;Failed to set environment variable&quot;, e);\n    }\n}\n</code></pre>\n<p><strong>Usage:</strong></p>\n<p>First, put the method in any class you want, e.g. SystemUtil. Then call it statically:</p>\n<pre><code>SystemUtil.setEnv(&quot;SHELL&quot;, &quot;/bin/bash&quot;);\n</code></pre>\n<p>If you call <code>System.getenv(&quot;SHELL&quot;)</code> after this, you'll get <code>&quot;/bin/bash&quot;</code> back.</p>\n"},{"comments":[{"owner":{"account_id":2644732,"reputation":166,"user_id":2287684,"accept_rate":78,"display_name":"Rafael Gon&#231;alves"},"score":0,"creation_date":1543677620,"post_id":42964302,"comment_id":94008749,"body_markdown":"Thanks, it was exactly my use case and under mac os x too.","body":"Thanks, it was exactly my use case and under mac os x too."},{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":0,"creation_date":1577648906,"post_id":42964302,"comment_id":105216466,"body_markdown":"Liked this so much I rustled up a slightly simpler version for Groovy, see below.","body":"Liked this so much I rustled up a slightly simpler version for Groovy, see below."},{"owner":{"account_id":1434179,"reputation":5113,"user_id":1355930,"display_name":"Ashley Frieze"},"score":0,"creation_date":1697976087,"post_id":42964302,"comment_id":136344303,"body_markdown":"For unit tests, I&#39;d really recommend using one of the test libraries that does this for you. There&#39;s JUnit Pioneer, System Stubs, System Rules and System Lambda.","body":"For unit tests, I&#39;d really recommend using one of the test libraries that does this for you. There&#39;s JUnit Pioneer, System Stubs, System Rules and System Lambda."}],"tags":[],"owner":{"account_id":8643135,"reputation":1020,"user_id":6471212,"accept_rate":83,"display_name":"Tim Ryan"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1490223972,"creation_date":1490223972,"answer_id":42964302,"question_id":318239,"body_markdown":"Like most people who have found this thread, I was writing some unit tests and needed to modify the environment variables to set the correct conditions for the test to run.  However, I found the most upvoted answers had some issues and/or were very cryptic or overly complicated.  Hopefully this will help others to sort out the solution more quickly.\r\n\r\nFirst off, I finally found @Hubert Grzeskowiak&#39;s solution to be the simplest and it worked for me.  I wish I would have come to that one first.  It&#39;s based on @Edward Campbell&#39;s answer, but without the complicating for loop search.\r\n\r\nHowever, I started with @pushy&#39;s solution, which got the most upvotes. It is a combo of @anonymous and @Edward Campbell&#39;s.  @pushy claims both approaches are needed to cover both Linux and Windows environments.  I&#39;m running under OS X and find that both work (once an issue with @anonymous approach is fixed).  As others have noted, this solution works most of the time, but not all.\r\n \r\nI think the source of most of the confusion comes from @anonymous&#39;s solution operating on the &#39;theEnvironment&#39; field.  Looking at the definition of the [ProcessEnvironment][1] structure, &#39;theEnvironment&#39; is not a Map&lt; String, String &gt; but rather it is a Map&lt; Variable, Value &gt;.  Clearing the map works fine, but the putAll operation rebuilds the map a Map&lt; String, String &gt;, which potentially causes problems when subsequent operations operate on the data structure using the normal API that expects Map&lt; Variable, Value &gt;.  Also, accessing/removing individual elements is a problem.  The solution is to access &#39;theEnvironment&#39; indirectly through &#39;theUnmodifiableEnvironment&#39;.  But since this is a type [UnmodifiableMap][2] the access must be done through the private variable &#39;m&#39; of the UnmodifiableMap type.  See getModifiableEnvironmentMap2 in code below.\r\n\r\nIn my case I needed to remove some of the environment variables for my test (the others should be unchanged).  Then I wanted to restore the environment variables to their prior state after the test.  The routines below make that straight forward to do.  I tested both versions of getModifiableEnvironmentMap on OS X, and both work equivalently.  Though based on comments in this thread, one may be a better choice than the other depending on the environment.\r\n\r\nNote: I did not include access to the &#39;theCaseInsensitiveEnvironmentField&#39; since that seems to be Windows specific and I had no way to test it, but adding it should be straight forward.\r\n\r\n    private Map&lt;String, String&gt; getModifiableEnvironmentMap() {\r\n    \ttry {\r\n\t    \tMap&lt;String,String&gt; unmodifiableEnv = System.getenv();\r\n\t    \tClass&lt;?&gt; cl = unmodifiableEnv.getClass();\r\n\t    \tField field = cl.getDeclaredField(&quot;m&quot;);\r\n\t    \tfield.setAccessible(true);\r\n\t    \tMap&lt;String,String&gt; modifiableEnv = (Map&lt;String,String&gt;) field.get(unmodifiableEnv);\r\n\t    \treturn modifiableEnv;\r\n    \t} catch(Exception e) {\r\n    \t\tthrow new RuntimeException(&quot;Unable to access writable environment variable map.&quot;);\r\n    \t}\r\n    }\r\n\r\n    private Map&lt;String, String&gt; getModifiableEnvironmentMap2() {\r\n    \ttry {\r\n        \tClass&lt;?&gt; processEnvironmentClass = Class.forName(&quot;java.lang.ProcessEnvironment&quot;);\r\n    \t\tField theUnmodifiableEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theUnmodifiableEnvironment&quot;);\r\n    \t\ttheUnmodifiableEnvironmentField.setAccessible(true);\r\n    \t\tMap&lt;String,String&gt; theUnmodifiableEnvironment = (Map&lt;String,String&gt;)theUnmodifiableEnvironmentField.get(null);\r\n    \t\t\r\n    \t\tClass&lt;?&gt; theUnmodifiableEnvironmentClass = theUnmodifiableEnvironment.getClass();\r\n    \t\tField theModifiableEnvField = theUnmodifiableEnvironmentClass.getDeclaredField(&quot;m&quot;);\r\n    \t\ttheModifiableEnvField.setAccessible(true);\r\n    \t\tMap&lt;String,String&gt; modifiableEnv = (Map&lt;String,String&gt;) theModifiableEnvField.get(theUnmodifiableEnvironment);\r\n\t    \treturn modifiableEnv;\r\n    \t} catch(Exception e) {\r\n    \t\tthrow new RuntimeException(&quot;Unable to access writable environment variable map.&quot;);\r\n    \t}\r\n    }\r\n    \r\n    private Map&lt;String, String&gt; clearEnvironmentVars(String[] keys) {\r\n    \t\r\n    \tMap&lt;String,String&gt; modifiableEnv = getModifiableEnvironmentMap();\r\n    \t\r\n    \tHashMap&lt;String, String&gt; savedVals = new HashMap&lt;String, String&gt;();\r\n    \t\r\n    \tfor(String k : keys) {\r\n    \t\tString val = modifiableEnv.remove(k);\r\n    \t\tif (val != null) { savedVals.put(k, val); }\r\n    \t}\r\n    \treturn savedVals;\r\n    }\r\n    \r\n    private void setEnvironmentVars(Map&lt;String, String&gt; varMap) {\r\n    \tgetModifiableEnvironmentMap().putAll(varMap);\t\r\n    }\r\n\r\n    @Test\r\n    public void myTest() {\r\n    \tString[] keys = { &quot;key1&quot;, &quot;key2&quot;, &quot;key3&quot; };\r\n    \tMap&lt;String, String&gt; savedVars = clearEnvironmentVars(keys);\r\n\r\n        // do test\r\n\r\n        setEnvironmentVars(savedVars);\r\n    }\r\n    \t\r\n\r\n\r\n\r\n\r\n  [1]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/ProcessEnvironment.java\r\n  [2]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/Collections.java?av=f#1439","title":"How do I set environment variables from Java?","body":"<p>Like most people who have found this thread, I was writing some unit tests and needed to modify the environment variables to set the correct conditions for the test to run.  However, I found the most upvoted answers had some issues and/or were very cryptic or overly complicated.  Hopefully this will help others to sort out the solution more quickly.</p>\n\n<p>First off, I finally found @Hubert Grzeskowiak's solution to be the simplest and it worked for me.  I wish I would have come to that one first.  It's based on @Edward Campbell's answer, but without the complicating for loop search.</p>\n\n<p>However, I started with @pushy's solution, which got the most upvotes. It is a combo of @anonymous and @Edward Campbell's.  @pushy claims both approaches are needed to cover both Linux and Windows environments.  I'm running under OS X and find that both work (once an issue with @anonymous approach is fixed).  As others have noted, this solution works most of the time, but not all.</p>\n\n<p>I think the source of most of the confusion comes from @anonymous's solution operating on the 'theEnvironment' field.  Looking at the definition of the <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/ProcessEnvironment.java\" rel=\"noreferrer\">ProcessEnvironment</a> structure, 'theEnvironment' is not a Map&lt; String, String > but rather it is a Map&lt; Variable, Value >.  Clearing the map works fine, but the putAll operation rebuilds the map a Map&lt; String, String >, which potentially causes problems when subsequent operations operate on the data structure using the normal API that expects Map&lt; Variable, Value >.  Also, accessing/removing individual elements is a problem.  The solution is to access 'theEnvironment' indirectly through 'theUnmodifiableEnvironment'.  But since this is a type <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/Collections.java?av=f#1439\" rel=\"noreferrer\">UnmodifiableMap</a> the access must be done through the private variable 'm' of the UnmodifiableMap type.  See getModifiableEnvironmentMap2 in code below.</p>\n\n<p>In my case I needed to remove some of the environment variables for my test (the others should be unchanged).  Then I wanted to restore the environment variables to their prior state after the test.  The routines below make that straight forward to do.  I tested both versions of getModifiableEnvironmentMap on OS X, and both work equivalently.  Though based on comments in this thread, one may be a better choice than the other depending on the environment.</p>\n\n<p>Note: I did not include access to the 'theCaseInsensitiveEnvironmentField' since that seems to be Windows specific and I had no way to test it, but adding it should be straight forward.</p>\n\n<pre><code>private Map&lt;String, String&gt; getModifiableEnvironmentMap() {\n    try {\n        Map&lt;String,String&gt; unmodifiableEnv = System.getenv();\n        Class&lt;?&gt; cl = unmodifiableEnv.getClass();\n        Field field = cl.getDeclaredField(\"m\");\n        field.setAccessible(true);\n        Map&lt;String,String&gt; modifiableEnv = (Map&lt;String,String&gt;) field.get(unmodifiableEnv);\n        return modifiableEnv;\n    } catch(Exception e) {\n        throw new RuntimeException(\"Unable to access writable environment variable map.\");\n    }\n}\n\nprivate Map&lt;String, String&gt; getModifiableEnvironmentMap2() {\n    try {\n        Class&lt;?&gt; processEnvironmentClass = Class.forName(\"java.lang.ProcessEnvironment\");\n        Field theUnmodifiableEnvironmentField = processEnvironmentClass.getDeclaredField(\"theUnmodifiableEnvironment\");\n        theUnmodifiableEnvironmentField.setAccessible(true);\n        Map&lt;String,String&gt; theUnmodifiableEnvironment = (Map&lt;String,String&gt;)theUnmodifiableEnvironmentField.get(null);\n\n        Class&lt;?&gt; theUnmodifiableEnvironmentClass = theUnmodifiableEnvironment.getClass();\n        Field theModifiableEnvField = theUnmodifiableEnvironmentClass.getDeclaredField(\"m\");\n        theModifiableEnvField.setAccessible(true);\n        Map&lt;String,String&gt; modifiableEnv = (Map&lt;String,String&gt;) theModifiableEnvField.get(theUnmodifiableEnvironment);\n        return modifiableEnv;\n    } catch(Exception e) {\n        throw new RuntimeException(\"Unable to access writable environment variable map.\");\n    }\n}\n\nprivate Map&lt;String, String&gt; clearEnvironmentVars(String[] keys) {\n\n    Map&lt;String,String&gt; modifiableEnv = getModifiableEnvironmentMap();\n\n    HashMap&lt;String, String&gt; savedVals = new HashMap&lt;String, String&gt;();\n\n    for(String k : keys) {\n        String val = modifiableEnv.remove(k);\n        if (val != null) { savedVals.put(k, val); }\n    }\n    return savedVals;\n}\n\nprivate void setEnvironmentVars(Map&lt;String, String&gt; varMap) {\n    getModifiableEnvironmentMap().putAll(varMap);   \n}\n\n@Test\npublic void myTest() {\n    String[] keys = { \"key1\", \"key2\", \"key3\" };\n    Map&lt;String, String&gt; savedVars = clearEnvironmentVars(keys);\n\n    // do test\n\n    setEnvironmentVars(savedVars);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":238745,"reputation":790,"user_id":2219288,"display_name":"Rik"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1530688846,"creation_date":1530688846,"answer_id":51167959,"question_id":318239,"body_markdown":"Kotlin implementation I recently made based on Edward&#39;s answer:\r\n\r\n\r\n    fun setEnv(newEnv: Map&lt;String, String&gt;) {\r\n        val unmodifiableMapClass = Collections.unmodifiableMap&lt;Any, Any&gt;(mapOf()).javaClass\r\n        with(unmodifiableMapClass.getDeclaredField(&quot;m&quot;)) {\r\n            isAccessible = true\r\n            @Suppress(&quot;UNCHECKED_CAST&quot;)\r\n            get(System.getenv()) as MutableMap&lt;String, String&gt;\r\n        }.apply {\r\n            clear()\r\n            putAll(newEnv)\r\n        }\r\n    }\r\n","title":"How do I set environment variables from Java?","body":"<p>Kotlin implementation I recently made based on Edward's answer:</p>\n\n<pre><code>fun setEnv(newEnv: Map&lt;String, String&gt;) {\n    val unmodifiableMapClass = Collections.unmodifiableMap&lt;Any, Any&gt;(mapOf()).javaClass\n    with(unmodifiableMapClass.getDeclaredField(\"m\")) {\n        isAccessible = true\n        @Suppress(\"UNCHECKED_CAST\")\n        get(System.getenv()) as MutableMap&lt;String, String&gt;\n    }.apply {\n        clear()\n        putAll(newEnv)\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":376000,"reputation":3773,"user_id":727184,"accept_rate":62,"display_name":"GarouDan"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1556377603,"creation_date":1556377603,"answer_id":55881892,"question_id":318239,"body_markdown":"This is the Kotlin evil version of the @pushy&#39;s evil [answer][1] =)\r\n\r\n\t@Suppress(&quot;UNCHECKED_CAST&quot;)\r\n\t@Throws(Exception::class)\r\n\tfun setEnv(newenv: Map&lt;String, String&gt;) {\r\n\t\ttry {\r\n\t\t\tval processEnvironmentClass = Class.forName(&quot;java.lang.ProcessEnvironment&quot;)\r\n\t\t\tval theEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theEnvironment&quot;)\r\n\t\t\ttheEnvironmentField.isAccessible = true\r\n\t\t\tval env = theEnvironmentField.get(null) as MutableMap&lt;String, String&gt;\r\n\t\t\tenv.putAll(newenv)\r\n\t\t\tval theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theCaseInsensitiveEnvironment&quot;)\r\n\t\t\ttheCaseInsensitiveEnvironmentField.isAccessible = true\r\n\t\t\tval cienv = theCaseInsensitiveEnvironmentField.get(null) as MutableMap&lt;String, String&gt;\r\n\t\t\tcienv.putAll(newenv)\r\n\t\t} catch (e: NoSuchFieldException) {\r\n\t\t\tval classes = Collections::class.java.getDeclaredClasses()\r\n\t\t\tval env = System.getenv()\r\n\t\t\tfor (cl in classes) {\r\n\t\t\t\tif (&quot;java.util.Collections\\$UnmodifiableMap&quot; == cl.getName()) {\r\n\t\t\t\t\tval field = cl.getDeclaredField(&quot;m&quot;)\r\n\t\t\t\t\tfield.setAccessible(true)\r\n\t\t\t\t\tval obj = field.get(env)\r\n\t\t\t\t\tval map = obj as MutableMap&lt;String, String&gt;\r\n\t\t\t\t\tmap.clear()\r\n\t\t\t\t\tmap.putAll(newenv)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\nIt is working in macOS Mojave at least.\r\n\r\n  [1]: https://stackoverflow.com/a/7201825/727184","title":"How do I set environment variables from Java?","body":"<p>This is the Kotlin evil version of the @pushy's evil <a href=\"https://stackoverflow.com/a/7201825/727184\">answer</a> =)</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\n@Throws(Exception::class)\nfun setEnv(newenv: Map&lt;String, String&gt;) {\n    try {\n        val processEnvironmentClass = Class.forName(\"java.lang.ProcessEnvironment\")\n        val theEnvironmentField = processEnvironmentClass.getDeclaredField(\"theEnvironment\")\n        theEnvironmentField.isAccessible = true\n        val env = theEnvironmentField.get(null) as MutableMap&lt;String, String&gt;\n        env.putAll(newenv)\n        val theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(\"theCaseInsensitiveEnvironment\")\n        theCaseInsensitiveEnvironmentField.isAccessible = true\n        val cienv = theCaseInsensitiveEnvironmentField.get(null) as MutableMap&lt;String, String&gt;\n        cienv.putAll(newenv)\n    } catch (e: NoSuchFieldException) {\n        val classes = Collections::class.java.getDeclaredClasses()\n        val env = System.getenv()\n        for (cl in classes) {\n            if (\"java.util.Collections\\$UnmodifiableMap\" == cl.getName()) {\n                val field = cl.getDeclaredField(\"m\")\n                field.setAccessible(true)\n                val obj = field.get(env)\n                val map = obj as MutableMap&lt;String, String&gt;\n                map.clear()\n                map.putAll(newenv)\n            }\n        }\n    }\n</code></pre>\n\n<p>It is working in macOS Mojave at least.</p>\n"},{"comments":[{"owner":{"account_id":6197622,"reputation":6095,"user_id":4828463,"accept_rate":91,"display_name":"Faraz"},"score":1,"creation_date":1584460937,"post_id":57274095,"comment_id":107440844,"body_markdown":"Can you please explain a bit?","body":"Can you please explain a bit?"},{"owner":{"account_id":69301,"reputation":10391,"user_id":201722,"accept_rate":95,"display_name":"luis.espinal"},"score":3,"creation_date":1601994676,"post_id":57274095,"comment_id":113575389,"body_markdown":"System properties are not the same as environmental variables.","body":"System properties are not the same as environmental variables."}],"tags":[],"owner":{"account_id":182529,"reputation":6991,"user_id":417291,"accept_rate":71,"display_name":"Alex"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1564879714,"creation_date":1564497058,"answer_id":57274095,"question_id":318239,"body_markdown":"If you work with SpringBoot you can add specifying the environmental variable in the following property:\r\n\r\n    was.app.config.properties.toSystemProperties","title":"How do I set environment variables from Java?","body":"<p>If you work with SpringBoot you can add specifying the environmental variable in the following property:</p>\n\n<pre><code>was.app.config.properties.toSystemProperties\n</code></pre>\n"},{"tags":[],"owner":{"account_id":114171,"reputation":1,"user_id":2249575,"display_name":"Keith K"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1571686255,"creation_date":1571157832,"answer_id":58399256,"question_id":318239,"body_markdown":"[tag:Jython] variant based on [@pushy&#39;s][1] answer, works on windows.\r\n\r\n```\r\ndef set_env(newenv):\r\n    from java.lang import Class\r\n    process_environment = Class.forName(&quot;java.lang.ProcessEnvironment&quot;)\r\n    environment_field =  process_environment.getDeclaredField(&quot;theEnvironment&quot;)\r\n    environment_field.setAccessible(True)\r\n    env = environment_field.get(None)\r\n    env.putAll(newenv)\r\n    invariant_environment_field = process_environment.getDeclaredField(&quot;theCaseInsensitiveEnvironment&quot;);\r\n    invariant_environment_field.setAccessible(True)\r\n    invevn = invariant_environment_field.get(None)\r\n    invevn.putAll(newenv)\r\n```\r\n\r\nUsage:\r\n```\r\nold_environ = dict(os.environ)\r\nold_environ[&#39;EPM_ORACLE_HOME&#39;] = r&quot;E:\\Oracle\\Middleware\\EPMSystem11R1&quot;\r\nset_env(old_environ)\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/7201825/2249575","title":"How do I set environment variables from Java?","body":"<p><a href=\"/questions/tagged/jython\" class=\"post-tag\" title=\"show questions tagged &#39;jython&#39;\" rel=\"tag\">jython</a> variant based on <a href=\"https://stackoverflow.com/a/7201825/2249575\">@pushy's</a> answer, works on windows.</p>\n\n<pre><code>def set_env(newenv):\n    from java.lang import Class\n    process_environment = Class.forName(\"java.lang.ProcessEnvironment\")\n    environment_field =  process_environment.getDeclaredField(\"theEnvironment\")\n    environment_field.setAccessible(True)\n    env = environment_field.get(None)\n    env.putAll(newenv)\n    invariant_environment_field = process_environment.getDeclaredField(\"theCaseInsensitiveEnvironment\");\n    invariant_environment_field.setAccessible(True)\n    invevn = invariant_environment_field.get(None)\n    invevn.putAll(newenv)\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>old_environ = dict(os.environ)\nold_environ['EPM_ORACLE_HOME'] = r\"E:\\Oracle\\Middleware\\EPMSystem11R1\"\nset_env(old_environ)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1577651046,"creation_date":1577648831,"answer_id":59522743,"question_id":318239,"body_markdown":"Tim Ryan&#39;s answer worked for me... but I wanted it for Groovy (Spock context for example), and simplissimo:\r\n\r\n    import java.lang.reflect.Field\r\n    \r\n    def getModifiableEnvironmentMap() {\r\n    \tdef unmodifiableEnv = System.getenv()\r\n    \tClass cl = unmodifiableEnv.getClass()\r\n    \tField field = cl.getDeclaredField(&quot;m&quot;)\r\n    \tfield.accessible = true\r\n    \tfield.get(unmodifiableEnv)\r\n    }\r\n    \r\n    def clearEnvironmentVars( def keys ) {\r\n    \tdef savedVals = [:]\r\n    \tkeys.each{ key -&gt;\r\n    \t\tString val = modifiableEnvironmentMap.remove(key)\r\n            // thinking about it, I&#39;m not sure why we need this test for null\r\n            // but haven&#39;t yet done any experiments\r\n    \t\tif( val != null ) {\r\n    \t\t\tsavedVals.put( key, val )\r\n    \t\t}\r\n    \t}\r\n    \tsavedVals\r\n    }\r\n    \r\n    def setEnvironmentVars(Map varMap) {\r\n    \tmodifiableEnvironmentMap.putAll(varMap)\r\n    }\r\n    \r\n    // pretend existing Env Var doesn&#39;t exist\r\n    def PATHVal1 = System.env.PATH\r\n    println &quot;PATH val1 |$PATHVal1|&quot;\r\n    String[] keys = [&quot;PATH&quot;, &quot;key2&quot;, &quot;key3&quot;]\r\n    def savedVars = clearEnvironmentVars(keys)\r\n    def PATHVal2 = System.env.PATH\r\n    println &quot;PATH val2 |$PATHVal2|&quot;\r\n    \r\n    // return to reality\r\n    setEnvironmentVars(savedVars)\r\n    def PATHVal3 = System.env.PATH\r\n    println &quot;PATH val3 |$PATHVal3|&quot;\r\n    println &quot;System.env |$System.env|&quot;\r\n    \r\n    // pretend a non-existent Env Var exists\r\n    setEnvironmentVars( [ &#39;key4&#39; : &#39;key4Val&#39; ])\r\n    println &quot;key4 val |$System.env.key4|&quot;","title":"How do I set environment variables from Java?","body":"<p>Tim Ryan's answer worked for me... but I wanted it for Groovy (Spock context for example), and simplissimo:</p>\n\n<pre><code>import java.lang.reflect.Field\n\ndef getModifiableEnvironmentMap() {\n    def unmodifiableEnv = System.getenv()\n    Class cl = unmodifiableEnv.getClass()\n    Field field = cl.getDeclaredField(\"m\")\n    field.accessible = true\n    field.get(unmodifiableEnv)\n}\n\ndef clearEnvironmentVars( def keys ) {\n    def savedVals = [:]\n    keys.each{ key -&gt;\n        String val = modifiableEnvironmentMap.remove(key)\n        // thinking about it, I'm not sure why we need this test for null\n        // but haven't yet done any experiments\n        if( val != null ) {\n            savedVals.put( key, val )\n        }\n    }\n    savedVals\n}\n\ndef setEnvironmentVars(Map varMap) {\n    modifiableEnvironmentMap.putAll(varMap)\n}\n\n// pretend existing Env Var doesn't exist\ndef PATHVal1 = System.env.PATH\nprintln \"PATH val1 |$PATHVal1|\"\nString[] keys = [\"PATH\", \"key2\", \"key3\"]\ndef savedVars = clearEnvironmentVars(keys)\ndef PATHVal2 = System.env.PATH\nprintln \"PATH val2 |$PATHVal2|\"\n\n// return to reality\nsetEnvironmentVars(savedVars)\ndef PATHVal3 = System.env.PATH\nprintln \"PATH val3 |$PATHVal3|\"\nprintln \"System.env |$System.env|\"\n\n// pretend a non-existent Env Var exists\nsetEnvironmentVars( [ 'key4' : 'key4Val' ])\nprintln \"key4 val |$System.env.key4|\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1514391,"reputation":1490,"user_id":1415751,"accept_rate":77,"display_name":"Tiar&#234; Balbi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578171872,"creation_date":1578171872,"answer_id":59594835,"question_id":318239,"body_markdown":"A version in Kotlin, in this algorithm I created a decorator that allows you to set and get variables from the environment.\r\n\r\n\r\n    import java.util.Collections\r\n    import kotlin.reflect.KProperty\r\n    ​\r\n    class EnvironmentDelegate {\r\n        operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): String {\r\n            return System.getenv(property.name) ?: &quot;-&quot;\r\n        }\r\n    ​\r\n        operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: String) {\r\n            val key = property.name\r\n    ​\r\n            val classes: Array&lt;Class&lt;*&gt;&gt; = Collections::class.java.declaredClasses\r\n            val env = System.getenv()\r\n    ​\r\n            val cl = classes.first { &quot;java.util.Collections\\$UnmodifiableMap&quot; == it.name }\r\n    ​\r\n            val field = cl.getDeclaredField(&quot;m&quot;)\r\n            field.isAccessible = true\r\n            val obj = field[env]\r\n            val map = obj as MutableMap&lt;String, String&gt;\r\n            map.putAll(mapOf(key to value))\r\n        }\r\n    }\r\n    ​\r\n    class KnownProperties {\r\n        var JAVA_HOME: String by EnvironmentDelegate()\r\n        var sample: String by EnvironmentDelegate()\r\n    }\r\n    ​\r\n    fun main() {\r\n        val knowProps = KnownProperties()\r\n        knowProps.sample = &quot;2&quot;\r\n    ​\r\n        println(&quot;Java Home: ${knowProps.JAVA_HOME}&quot;)\r\n        println(&quot;Sample: ${knowProps.sample}&quot;)\r\n    }\r\n","title":"How do I set environment variables from Java?","body":"<p>A version in Kotlin, in this algorithm I created a decorator that allows you to set and get variables from the environment.</p>\n\n<pre><code>import java.util.Collections\nimport kotlin.reflect.KProperty\n​\nclass EnvironmentDelegate {\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): String {\n        return System.getenv(property.name) ?: \"-\"\n    }\n​\n    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: String) {\n        val key = property.name\n​\n        val classes: Array&lt;Class&lt;*&gt;&gt; = Collections::class.java.declaredClasses\n        val env = System.getenv()\n​\n        val cl = classes.first { \"java.util.Collections\\$UnmodifiableMap\" == it.name }\n​\n        val field = cl.getDeclaredField(\"m\")\n        field.isAccessible = true\n        val obj = field[env]\n        val map = obj as MutableMap&lt;String, String&gt;\n        map.putAll(mapOf(key to value))\n    }\n}\n​\nclass KnownProperties {\n    var JAVA_HOME: String by EnvironmentDelegate()\n    var sample: String by EnvironmentDelegate()\n}\n​\nfun main() {\n    val knowProps = KnownProperties()\n    knowProps.sample = \"2\"\n​\n    println(\"Java Home: ${knowProps.JAVA_HOME}\")\n    println(\"Sample: ${knowProps.sample}\")\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7667723,"reputation":41,"user_id":5810983,"display_name":"Arun Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1599202065,"creation_date":1599202065,"answer_id":63736173,"question_id":318239,"body_markdown":"I stumbled upon this thread as I had a similar requirement where I needed to set (or update) an Environment Variable (permanently).\r\n\r\nSo I looked in to - How to set an environment variable permanently from Command Prompt and it was very simple!\r\n\r\n    setx JAVA_LOC C:/Java/JDK\r\n\r\nThen I just implemented the same in my code \r\nHere&#39;s what I used (suppose - JAVA_LOC is the env. variable name)\r\n\r\n    \t\tString cmdCommand = &quot;setx JAVA_LOC &quot; + &quot;C:/Java/JDK&quot;;\r\n\t\t\t\tProcessBuilder processBuilder = new ProcessBuilder();\r\n\t\t\t\tprocessBuilder.command(&quot;cmd.exe&quot;, &quot;/c&quot;, cmdCommand);\r\n\t\t\t\tprocessBuilder.start();\r\n\r\nProcessBuilder fires-up a cmd.exe and passes the command that you want. \r\nThe environment variable is retained even if you kill JVM/reboot the system as it has no relation with the JVM/Program&#39;s lifecycle.","title":"How do I set environment variables from Java?","body":"<p>I stumbled upon this thread as I had a similar requirement where I needed to set (or update) an Environment Variable (permanently).</p>\n<p>So I looked in to - How to set an environment variable permanently from Command Prompt and it was very simple!</p>\n<pre><code>setx JAVA_LOC C:/Java/JDK\n</code></pre>\n<p>Then I just implemented the same in my code\nHere's what I used (suppose - JAVA_LOC is the env. variable name)</p>\n<pre><code>        String cmdCommand = &quot;setx JAVA_LOC &quot; + &quot;C:/Java/JDK&quot;;\n            ProcessBuilder processBuilder = new ProcessBuilder();\n            processBuilder.command(&quot;cmd.exe&quot;, &quot;/c&quot;, cmdCommand);\n            processBuilder.start();\n</code></pre>\n<p>ProcessBuilder fires-up a cmd.exe and passes the command that you want.\nThe environment variable is retained even if you kill JVM/reboot the system as it has no relation with the JVM/Program's lifecycle.</p>\n"},{"comments":[{"owner":{"account_id":238697,"reputation":1454,"user_id":507761,"accept_rate":100,"display_name":"Matthew Read"},"score":0,"creation_date":1634254082,"post_id":67635072,"comment_id":122982532,"body_markdown":"JUnit Pioneer is excellent.  A simple `@SetEnvironmentVariable(key = &quot;SOME_VARIABLE&quot;, value = &quot;myValue&quot;)` on the test method and you&#39;re good to go.","body":"JUnit Pioneer is excellent.  A simple <code>@SetEnvironmentVariable(key = &quot;SOME_VARIABLE&quot;, value = &quot;myValue&quot;)</code> on the test method and you&#39;re good to go."},{"owner":{"account_id":1434179,"reputation":5113,"user_id":1355930,"display_name":"Ashley Frieze"},"score":0,"creation_date":1634315174,"post_id":67635072,"comment_id":122999455,"body_markdown":"It is, but the environment variable value has to be known at coding time, which doesn&#39;t work for setting things like dynamic ports etc.","body":"It is, but the environment variable value has to be known at coding time, which doesn&#39;t work for setting things like dynamic ports etc."}],"tags":[],"owner":{"account_id":1434179,"reputation":5113,"user_id":1355930,"display_name":"Ashley Frieze"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1621592727,"creation_date":1621592727,"answer_id":67635072,"question_id":318239,"body_markdown":"There are a three libraries out there that can do this during unit tests.\r\n\r\nThere&#39;s Stefan Birkner&#39;s System Rules and System Lambda - https://www.baeldung.com/java-system-rules-junit which allow you to do something like:\r\n\r\n```java\r\npublic class JUnitTest {\r\n\r\n    @Rule\r\n    public EnvironmentVariables environmentVariables = new EnvironmentVariables();\r\n\r\n    @Test\r\n    public void someTest() {\r\n        environmentVariables.set(&quot;SOME_VARIABLE&quot;, &quot;myValue&quot;);\r\n        \r\n        // now System.getenv does what you want\r\n    }\r\n}\r\n``` \r\n\r\nor for System-Lambda:\r\n\r\n```java\r\n@Test\r\nvoid execute_code_with_environment_variables(\r\n) throws Exception {\r\n  List&lt;String&gt; values = withEnvironmentVariable(&quot;first&quot;, &quot;first value&quot;)\r\n    .and(&quot;second&quot;, &quot;second value&quot;)\r\n    .execute(() -&gt; asList(\r\n      System.getenv(&quot;first&quot;),\r\n      System.getenv(&quot;second&quot;)\r\n    ));\r\n  assertEquals(\r\n    asList(&quot;first value&quot;, &quot;second value&quot;),\r\n    values\r\n  );\r\n}\r\n```\r\n\r\nThe above features are also available as JUnit 5 extension via System Stubs:\r\n\r\n```java\r\n@ExtendWith(SystemStubsExtension.class)\r\nclass SomeTest {\r\n\r\n    @SystemStub\r\n    private EnvironmentVariables;\r\n\r\n    @Test\r\n    void theTest() {\r\n        environmentVariables.set(&quot;SOME_VARIABLE&quot;, &quot;myValue&quot;);\r\n        \r\n        // now System.getenv does what you want\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nSystem Stubs is backwards compatible with System Lambda and System Rules, but supports JUnit 5.\r\n\r\nAlternatively, there&#39;s also JUnit Pioneer - https://github.com/junit-pioneer/junit-pioneer, which allows for environment variables to be set at test time via annotations. ","title":"How do I set environment variables from Java?","body":"<p>There are a three libraries out there that can do this during unit tests.</p>\n<p>There's Stefan Birkner's System Rules and System Lambda - <a href=\"https://www.baeldung.com/java-system-rules-junit\" rel=\"noreferrer\">https://www.baeldung.com/java-system-rules-junit</a> which allow you to do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JUnitTest {\n\n    @Rule\n    public EnvironmentVariables environmentVariables = new EnvironmentVariables();\n\n    @Test\n    public void someTest() {\n        environmentVariables.set(&quot;SOME_VARIABLE&quot;, &quot;myValue&quot;);\n        \n        // now System.getenv does what you want\n    }\n}\n</code></pre>\n<p>or for System-Lambda:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid execute_code_with_environment_variables(\n) throws Exception {\n  List&lt;String&gt; values = withEnvironmentVariable(&quot;first&quot;, &quot;first value&quot;)\n    .and(&quot;second&quot;, &quot;second value&quot;)\n    .execute(() -&gt; asList(\n      System.getenv(&quot;first&quot;),\n      System.getenv(&quot;second&quot;)\n    ));\n  assertEquals(\n    asList(&quot;first value&quot;, &quot;second value&quot;),\n    values\n  );\n}\n</code></pre>\n<p>The above features are also available as JUnit 5 extension via System Stubs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SystemStubsExtension.class)\nclass SomeTest {\n\n    @SystemStub\n    private EnvironmentVariables;\n\n    @Test\n    void theTest() {\n        environmentVariables.set(&quot;SOME_VARIABLE&quot;, &quot;myValue&quot;);\n        \n        // now System.getenv does what you want\n\n    }\n\n}\n</code></pre>\n<p>System Stubs is backwards compatible with System Lambda and System Rules, but supports JUnit 5.</p>\n<p>Alternatively, there's also JUnit Pioneer - <a href=\"https://github.com/junit-pioneer/junit-pioneer\" rel=\"noreferrer\">https://github.com/junit-pioneer/junit-pioneer</a>, which allows for environment variables to be set at test time via annotations.</p>\n"},{"tags":[],"owner":{"account_id":1934653,"reputation":528,"user_id":3480359,"display_name":"geosmart"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634261706,"creation_date":1634261706,"answer_id":69579032,"question_id":318239,"body_markdown":"just use reflect, like `setEnv(&quot;k1&quot;,&quot;v1&quot;)`\r\n\r\n```java\r\n    private void setEnv(String key, String val) throws Exception {\r\n        getModifiableEnv().put(key, val);\r\n    }\r\n    \r\n    private Map&lt;String, String&gt; getModifiableEnv() throws Exception {\r\n        Map&lt;String, String&gt; unmodifiableEnv = System.getenv();\r\n        Field field = unmodifiableEnv.getClass().getDeclaredField(&quot;m&quot;);\r\n        field.setAccessible(true);\r\n        return (Map&lt;String, String&gt;) field.get(unmodifiableEnv);\r\n    }\r\n```\r\nneed \r\n```\r\nimport java.lang.reflect.Field;\r\nimport java.util.Map;\r\n```","title":"How do I set environment variables from Java?","body":"<p>just use reflect, like <code>setEnv(&quot;k1&quot;,&quot;v1&quot;)</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>    private void setEnv(String key, String val) throws Exception {\n        getModifiableEnv().put(key, val);\n    }\n    \n    private Map&lt;String, String&gt; getModifiableEnv() throws Exception {\n        Map&lt;String, String&gt; unmodifiableEnv = System.getenv();\n        Field field = unmodifiableEnv.getClass().getDeclaredField(&quot;m&quot;);\n        field.setAccessible(true);\n        return (Map&lt;String, String&gt;) field.get(unmodifiableEnv);\n    }\n</code></pre>\n<p>need</p>\n<pre><code>import java.lang.reflect.Field;\nimport java.util.Map;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3445690,"reputation":190,"user_id":2886569,"display_name":"rob2000"},"score":3,"creation_date":1636115262,"post_id":69630862,"comment_id":123476706,"body_markdown":"`if( isMac() || isLinux() ) { if( LibC.INSTANCE.setenv( key, value, 1 ) != 0 ) { System.err.println( &quot;Unable to set the environemnt variable: &quot; + key ); } }` does the trick on linux and macos.","body":"<code>if( isMac() || isLinux() ) { if( LibC.INSTANCE.setenv( key, value, 1 ) != 0 ) { System.err.println( &quot;Unable to set the environemnt variable: &quot; + key ); } }</code> does the trick on linux and macos."}],"tags":[],"owner":{"account_id":8109811,"reputation":49,"user_id":6110300,"display_name":"Johan Ansems"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1634646636,"creation_date":1634646636,"answer_id":69630862,"question_id":318239,"body_markdown":"Setting the environment variables in the current Java process which uses native code (a dll) which relies on the environment variable in question, only works when you set this environment variable natively.\r\n\r\nMost of the examples here you are changing the maps in the JVM, but will not work native.\r\n\r\nOne way I saw is through JNI, which probably works as well. \r\nAnother way is using **JNA Platform** by using the **Kernel32** interface (windows only) For example:\r\n\r\n    \r\n    private static void setEnv(String key, String value) {\r\n        if(isWindows()) {\r\n            if (!Kernel32.INSTANCE.SetEnvironmentVariable(key, value)) {\r\n                System.err.println(&quot;Unable to set the environemnt variable: &quot; + key);\r\n            }\r\n        }\r\n    }\r\n\r\nFor a unix like OS, the **LibCAPI** interface can be used, but have not tried that one.\r\n","title":"How do I set environment variables from Java?","body":"<p>Setting the environment variables in the current Java process which uses native code (a dll) which relies on the environment variable in question, only works when you set this environment variable natively.</p>\n<p>Most of the examples here you are changing the maps in the JVM, but will not work native.</p>\n<p>One way I saw is through JNI, which probably works as well.\nAnother way is using <strong>JNA Platform</strong> by using the <strong>Kernel32</strong> interface (windows only) For example:</p>\n<pre><code>private static void setEnv(String key, String value) {\n    if(isWindows()) {\n        if (!Kernel32.INSTANCE.SetEnvironmentVariable(key, value)) {\n            System.err.println(&quot;Unable to set the environemnt variable: &quot; + key);\n        }\n    }\n}\n</code></pre>\n<p>For a unix like OS, the <strong>LibCAPI</strong> interface can be used, but have not tried that one.</p>\n"},{"tags":[],"owner":{"account_id":2490779,"reputation":855,"user_id":2168258,"accept_rate":62,"display_name":"deddu"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1642695399,"creation_date":1637756097,"answer_id":70095906,"question_id":318239,"body_markdown":"If you are facing this problem with testing like me, and you are using Junit5, [Junit-pioneer](https://junit-pioneer.org/) comes with very helpful annotations. [maven release](https://mvnrepository.com/artifact/org.junit-pioneer/junit-pioneer) \r\n\r\nexample:\r\n\r\n```\r\n@Test\r\n@SetEnvironmentVariable(key = &quot;some variable&quot;,value = &quot;new value&quot;)\r\nvoid test() {\r\n    assertThat(System.getenv(&quot;some variable&quot;)).\r\n        isEqualTo(&quot;new value&quot;);\r\n}\r\n\r\n```\r\n\r\ncan not recommend it enough.","title":"How do I set environment variables from Java?","body":"<p>If you are facing this problem with testing like me, and you are using Junit5, <a href=\"https://junit-pioneer.org/\" rel=\"noreferrer\">Junit-pioneer</a> comes with very helpful annotations. <a href=\"https://mvnrepository.com/artifact/org.junit-pioneer/junit-pioneer\" rel=\"noreferrer\">maven release</a></p>\n<p>example:</p>\n<pre><code>@Test\n@SetEnvironmentVariable(key = &quot;some variable&quot;,value = &quot;new value&quot;)\nvoid test() {\n    assertThat(System.getenv(&quot;some variable&quot;)).\n        isEqualTo(&quot;new value&quot;);\n}\n\n</code></pre>\n<p>can not recommend it enough.</p>\n"},{"tags":[],"owner":{"account_id":13108403,"reputation":88,"user_id":9470347,"display_name":"PulseBeat_02"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696645353,"creation_date":1696645353,"answer_id":77248141,"question_id":318239,"body_markdown":"As many of you know, Java 17 removed a lot of Reflection capabilities for the internal modules. This solution uses `Unsafe` to bypass that but I strongly recommend against doing so unless you really have to do this.\r\n\r\n```java\r\n  public static void setEnvironmentalVariable(@NotNull final String key, @NotNull final String value) {\r\n    try {\r\n      final Map&lt;String, String&gt; unwritable = System.getenv();\r\n      final Map&lt;String, String&gt; writable =\r\n              (Map&lt;String, String&gt;) getField(unwritable, &quot;m&quot;);\r\n      writable.put(key, value);\r\n    } catch (final NoSuchFieldException e) {\r\n      throw new AssertionError(e);\r\n    }\r\n  }\r\n\r\n  public static @NotNull Object getField(@NotNull final Object object, @NotNull final String name)\r\n      throws NoSuchFieldException {\r\n    return getField(object.getClass(), object, name);\r\n  }\r\n\r\n  public static @NotNull Object getField(\r\n      @NotNull final Class&lt;?&gt; clazz, @NotNull final Object object, @NotNull final String name)\r\n      throws NoSuchFieldException {\r\n    return UNSAFE.getObject(object, UNSAFE.objectFieldOffset(clazz.getDeclaredField(name)));\r\n  }\r\n```\r\n\r\n(Assume the UNSAFE constant is the `Unsafe` singleton)","title":"How do I set environment variables from Java?","body":"<p>As many of you know, Java 17 removed a lot of Reflection capabilities for the internal modules. This solution uses <code>Unsafe</code> to bypass that but I strongly recommend against doing so unless you really have to do this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public static void setEnvironmentalVariable(@NotNull final String key, @NotNull final String value) {\n    try {\n      final Map&lt;String, String&gt; unwritable = System.getenv();\n      final Map&lt;String, String&gt; writable =\n              (Map&lt;String, String&gt;) getField(unwritable, &quot;m&quot;);\n      writable.put(key, value);\n    } catch (final NoSuchFieldException e) {\n      throw new AssertionError(e);\n    }\n  }\n\n  public static @NotNull Object getField(@NotNull final Object object, @NotNull final String name)\n      throws NoSuchFieldException {\n    return getField(object.getClass(), object, name);\n  }\n\n  public static @NotNull Object getField(\n      @NotNull final Class&lt;?&gt; clazz, @NotNull final Object object, @NotNull final String name)\n      throws NoSuchFieldException {\n    return UNSAFE.getObject(object, UNSAFE.objectFieldOffset(clazz.getDeclaredField(name)));\n  }\n</code></pre>\n<p>(Assume the UNSAFE constant is the <code>Unsafe</code> singleton)</p>\n"}],"owner":{"account_id":9733,"reputation":98826,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":649352,"favorite_count":0,"down_vote_count":0,"up_vote_count":406,"accepted_answer_id":318252,"answer_count":24,"score":406,"last_activity_date":1696645353,"creation_date":1227634699,"question_id":318239,"body_markdown":"How do I set environment variables from Java?  I see that I can do this for subprocesses using [`ProcessBuilder`][1]. I have several subprocesses to start, though, so I&#39;d rather modify the current process&#39;s environment and let the subprocesses inherit it.\r\n\r\nThere&#39;s a `System.getenv(String)` for getting a single environment variable. I can also get a `Map` of the complete set of environment variables with `System.getenv()`. But, calling `put()` on that `Map` throws an `UnsupportedOperationException` -- apparently they mean for the environment to be read only. And, there&#39;s no `System.setenv()`.\r\n\r\nSo, is there any way to set environment variables in the currently running process?  If so, how?  If not, what&#39;s the rationale?  (Is it because this is Java and therefore I shouldn&#39;t be doing evil nonportable obsolete things like touching my environment?)  And if not, any good suggestions for managing the environment variable changes that I&#39;m going to need to be feeding to several subprocesses?\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html","title":"How do I set environment variables from Java?","body":"<p>How do I set environment variables from Java?  I see that I can do this for subprocesses using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html\" rel=\"noreferrer\"><code>ProcessBuilder</code></a>. I have several subprocesses to start, though, so I'd rather modify the current process's environment and let the subprocesses inherit it.</p>\n\n<p>There's a <code>System.getenv(String)</code> for getting a single environment variable. I can also get a <code>Map</code> of the complete set of environment variables with <code>System.getenv()</code>. But, calling <code>put()</code> on that <code>Map</code> throws an <code>UnsupportedOperationException</code> -- apparently they mean for the environment to be read only. And, there's no <code>System.setenv()</code>.</p>\n\n<p>So, is there any way to set environment variables in the currently running process?  If so, how?  If not, what's the rationale?  (Is it because this is Java and therefore I shouldn't be doing evil nonportable obsolete things like touching my environment?)  And if not, any good suggestions for managing the environment variable changes that I'm going to need to be feeding to several subprocesses?</p>\n"},{"tags":["java","eclipse","tomcat","jdbc","connection-pooling"],"comments":[{"owner":{"account_id":198822,"reputation":16528,"user_id":443716,"accept_rate":92,"display_name":"Isaac"},"score":1,"creation_date":1354063093,"post_id":13595794,"comment_id":18637099,"body_markdown":"Most likely a duplicate of http://stackoverflow.com/questions/8435359/why-do-connections-persist-when-i-undeploy-a-webapp-using-the-tomcat-7-jdbc-conn","body":"Most likely a duplicate of <a href=\"http://stackoverflow.com/questions/8435359/why-do-connections-persist-when-i-undeploy-a-webapp-using-the-tomcat-7-jdbc-conn\" title=\"why do connections persist when i undeploy a webapp using the tomcat 7 jdbc conn\">stackoverflow.com/questions/8435359/&hellip;</a>"},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":1,"creation_date":1354063539,"post_id":13595794,"comment_id":18637221,"body_markdown":"@Isaac &quot;It has been corrected from Tomcat 7.0.11&quot;, but I have 7.0.32 and still the same result. So basically it&#39;s a bug?","body":"@Isaac &quot;It has been corrected from Tomcat 7.0.11&quot;, but I have 7.0.32 and still the same result. So basically it&#39;s a bug?"},{"owner":{"account_id":198822,"reputation":16528,"user_id":443716,"accept_rate":92,"display_name":"Isaac"},"score":0,"creation_date":1354065065,"post_id":13595794,"comment_id":18637607,"body_markdown":"Might be a regression. If you&#39;re absolutely sure that you are freeing up all connections, and the issue still happens, then I&#39;d ask to reopen the bug report.","body":"Might be a regression. If you&#39;re absolutely sure that you are freeing up all connections, and the issue still happens, then I&#39;d ask to reopen the bug report."},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1354094070,"post_id":13595794,"comment_id":18645918,"body_markdown":"@Isaac Yup, closing all ResultSets, Statements/PreparedStatements, Connections in finally blocks. Anyways thanks for the help","body":"@Isaac Yup, closing all ResultSets, Statements/PreparedStatements, Connections in finally blocks. Anyways thanks for the help"},{"owner":{"account_id":2260663,"reputation":831,"user_id":1990862,"display_name":"Clerenz"},"score":0,"creation_date":1488559822,"post_id":13595794,"comment_id":72301055,"body_markdown":"There is a typo in the context.xml: validatonQuery=&quot;SELECT 1&quot; validation misses an I. Noticed during copy/paste but no chance to edit the question.","body":"There is a typo in the context.xml: validatonQuery=&quot;SELECT 1&quot; validation misses an I. Noticed during copy/paste but no chance to edit the question."},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1488563956,"post_id":13595794,"comment_id":72303341,"body_markdown":"@Clerenz Thanks, fixed.","body":"@Clerenz Thanks, fixed."}],"answers":[{"comments":[{"owner":{"account_id":1313096,"reputation":1762,"user_id":1260651,"accept_rate":0,"display_name":"Miklos Krivan"},"score":1,"creation_date":1389460900,"post_id":13631242,"comment_id":31677741,"body_markdown":"Unfortunately Tomcat 7.0.35 has the same trouble but the closeMethod=&quot;close&quot; value solved my problem.","body":"Unfortunately Tomcat 7.0.35 has the same trouble but the closeMethod=&quot;close&quot; value solved my problem."},{"owner":{"account_id":1313096,"reputation":1762,"user_id":1260651,"accept_rate":0,"display_name":"Miklos Krivan"},"score":1,"creation_date":1389462231,"post_id":13631242,"comment_id":31678254,"body_markdown":"Tomcat 7.0.47 also has the same trouble but the closeMethod=&quot;close&quot; works perfect.","body":"Tomcat 7.0.47 also has the same trouble but the closeMethod=&quot;close&quot; works perfect."},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1389622791,"post_id":13631242,"comment_id":31729360,"body_markdown":"@MiklosKrivan See the final description of this issue in the UPDATE 3.","body":"@MiklosKrivan See the final description of this issue in the UPDATE 3."},{"owner":{"account_id":4183005,"reputation":1779,"user_id":3427419,"display_name":"user3427419"},"score":1,"creation_date":1421565280,"post_id":13631242,"comment_id":44403937,"body_markdown":"What is the &quot;unexpected and unwanted side-effects for some JNDI resources&quot; and does it apply to postgres connections?","body":"What is the &quot;unexpected and unwanted side-effects for some JNDI resources&quot; and does it apply to postgres connections?"},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1421596856,"post_id":13631242,"comment_id":44410702,"body_markdown":"@user3427419 I am sorry, I don&#39;t know the exact answer for this question, this is the quote of the Apache Tomcat release manager [Mark Thomas](http://stackoverflow.com/users/1299005/mark-thomas). I&#39;ll post your question on the [bug report page](https://issues.apache.org/bugzilla/show_bug.cgi?id=54217#c13), we&#39;ll see what will be the answer.","body":"@user3427419 I am sorry, I don&#39;t know the exact answer for this question, this is the quote of the Apache Tomcat release manager <a href=\"http://stackoverflow.com/users/1299005/mark-thomas\">Mark Thomas</a>. I&#39;ll post your question on the <a href=\"https://issues.apache.org/bugzilla/show_bug.cgi?id=54217#c13\" rel=\"nofollow noreferrer\">bug report page</a>, we&#39;ll see what will be the answer."},{"owner":{"account_id":699650,"reputation":16447,"user_id":1299005,"display_name":"Mark Thomas"},"score":2,"creation_date":1421600110,"post_id":13631242,"comment_id":44411815,"body_markdown":"The short answer is &quot;it depends&quot;. The default for closeMethod is &quot;close&quot;. The chances are that calling JndiResource.close() (if such a method exists) when the resource is no longer required will have the desired effect but, because &quot;close()&quot; is not part of any standard API, if it does exist we have no way of knowing what the behaviour will be. Therefore the result of calling this method may be &quot;unexpected and unwanted&quot;. Regarding postgres, if you use Tomcat&#39;s built in connection pooling then &quot;close()&quot; will get called on the connection pool which is almost certainly what you do want.","body":"The short answer is &quot;it depends&quot;. The default for closeMethod is &quot;close&quot;. The chances are that calling JndiResource.close() (if such a method exists) when the resource is no longer required will have the desired effect but, because &quot;close()&quot; is not part of any standard API, if it does exist we have no way of knowing what the behaviour will be. Therefore the result of calling this method may be &quot;unexpected and unwanted&quot;. Regarding postgres, if you use Tomcat&#39;s built in connection pooling then &quot;close()&quot; will get called on the connection pool which is almost certainly what you do want."},{"owner":{"account_id":2070885,"reputation":1024,"user_id":1845404,"accept_rate":88,"display_name":"gbenroscience"},"score":0,"creation_date":1559388125,"post_id":13631242,"comment_id":99409924,"body_markdown":"I am programatically creating the Hikari pool. How do I specify this close method? I am already calling pool.close() in contextDestroyed() but I sometimes get the message:\n\n```The web application [xxxx] appears to have started a thread named [HikariPool-6 housekeeper]  but has failed to stop it. This is very likely to create a memory leak.```","body":"I am programatically creating the Hikari pool. How do I specify this close method? I am already calling pool.close() in contextDestroyed() but I sometimes get the message:  <code>The web application [xxxx] appears to have started a thread named [HikariPool-6 housekeeper]  but has failed to stop it. This is very likely to create a memory leak.</code>"},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1559408925,"post_id":13631242,"comment_id":99414797,"body_markdown":"@gbenroscience Too few details. 1) If you have configured HikariCP in a Spring application, the _standard practice_ is to annotate the method where you made configuration with `@Bean(destroyMethod = &quot;close&quot;)`. 2) Read about [&quot;**leakDetectionThreshold**&quot;](https://github.com/brettwooldridge/HikariCP/blob/2d82b6f00a6deb774afbc561439ec584c3fd7dbb/README.md), maybe it will help. 3) It would be much better to post a new [question](https://stackoverflow.com/questions/ask) and describe your problem there. Thus you will draw much more attention to it and have more chances to get a proper help.","body":"@gbenroscience Too few details. 1) If you have configured HikariCP in a Spring application, the <i>standard practice</i> is to annotate the method where you made configuration with <code>@Bean(destroyMethod = &quot;close&quot;)</code>. 2) Read about <a href=\"https://github.com/brettwooldridge/HikariCP/blob/2d82b6f00a6deb774afbc561439ec584c3fd7dbb/README.md\" rel=\"nofollow noreferrer\">&quot;<b>leakDetectionThreshold</b>&quot;</a>, maybe it will help. 3) It would be much better to post a new <a href=\"https://stackoverflow.com/questions/ask\">question</a> and describe your problem there. Thus you will draw much more attention to it and have more chances to get a proper help."},{"owner":{"account_id":2070885,"reputation":1024,"user_id":1845404,"accept_rate":88,"display_name":"gbenroscience"},"score":0,"creation_date":1559414568,"post_id":13631242,"comment_id":99416112,"body_markdown":"@informatik01 , I mean is there a way to specify the close method to be used while creating the pool programatically? Its a Tomcat web app","body":"@informatik01 , I mean is there a way to specify the close method to be used while creating the pool programatically? Its a Tomcat web app"},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":1,"creation_date":1559430568,"post_id":13631242,"comment_id":99419244,"body_markdown":"@gbenroscience How exactly and **where** is your data source configured? How do you make it to be **managed by Tomcat** programmatically? Or is it managed by _any_ IoC container at all?","body":"@gbenroscience How exactly and <b>where</b> is your data source configured? How do you make it to be <b>managed by Tomcat</b> programmatically? Or is it managed by <i>any</i> IoC container at all?"},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1559430610,"post_id":13631242,"comment_id":99419248,"body_markdown":"@gbenroscience If you&#39;re not using any IoC container, but pure Servlets /JSP deployed on Tomcat, you could register _ServletContextListener_ and call the [close()](https://static.javadoc.io/com.zaxxer/HikariCP/2.6.3/com/zaxxer/hikari/HikariDataSource.html#close--) method on your configured _HikariDataSource_ inside the [_contextDestroyed()_](https://docs.oracle.com/javaee/7/api/javax/servlet/ServletContextListener.html#contextDestroyed-javax.servlet.ServletContextEvent-) method. Such questions **should be asked separately**, because they require quite a few additional details to be clarified.","body":"@gbenroscience If you&#39;re not using any IoC container, but pure Servlets /JSP deployed on Tomcat, you could register <i>ServletContextListener</i> and call the <a href=\"https://static.javadoc.io/com.zaxxer/HikariCP/2.6.3/com/zaxxer/hikari/HikariDataSource.html#close--\" rel=\"nofollow noreferrer\">close()</a> method on your configured <i>HikariDataSource</i> inside the <a href=\"https://docs.oracle.com/javaee/7/api/javax/servlet/ServletContextListener.html#contextDestroyed-javax.servlet.ServletContextEvent-\" rel=\"nofollow noreferrer\"><i>contextDestroyed()</i></a> method. Such questions <b>should be asked separately</b>, because they require quite a few additional details to be clarified."},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1559430907,"post_id":13631242,"comment_id":99419293,"body_markdown":"@gbenroscience Form the HikariCP FAQ, [&quot;How do I properly shutdown the HikariCP DataSource?&quot;](https://github.com/brettwooldridge/HikariCP/wiki/FAQ#q-how-do-i-properly-shutdown-the-hikaricp-datasource): &quot;_Shutting down the DataSource is especially important in web application containers where applications can be hot-deployed. Call the shutdown() or **close()** method on the HikariDataSource instance. **You can typically configure Spring or other IOC containers** to specify a &quot;destroy&quot; method._&quot;","body":"@gbenroscience Form the HikariCP FAQ, <a href=\"https://github.com/brettwooldridge/HikariCP/wiki/FAQ#q-how-do-i-properly-shutdown-the-hikaricp-datasource\" rel=\"nofollow noreferrer\">&quot;How do I properly shutdown the HikariCP DataSource?&quot;</a>: &quot;<i>Shutting down the DataSource is especially important in web application containers where applications can be hot-deployed. Call the shutdown() or <b>close()</b> method on the HikariDataSource instance. <b>You can typically configure Spring or other IOC containers</b> to specify a &quot;destroy&quot; method.</i>&quot;"},{"owner":{"account_id":2070885,"reputation":1024,"user_id":1845404,"accept_rate":88,"display_name":"gbenroscience"},"score":0,"creation_date":1559431534,"post_id":13631242,"comment_id":99419377,"body_markdown":"@informatik01 , You guessed right this is my exact situation. I deploy pure JSPs and Servlets on Tomcat. I create the pool programatically in the ServletContextListener&#39;s constructor and I close it in the contextDestroyed. The error sometimes happen when I dynamically redeploy the app using Netbeans deploy on save feature.","body":"@informatik01 , You guessed right this is my exact situation. I deploy pure JSPs and Servlets on Tomcat. I create the pool programatically in the ServletContextListener&#39;s constructor and I close it in the contextDestroyed. The error sometimes happen when I dynamically redeploy the app using Netbeans deploy on save feature."},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1559432277,"post_id":13631242,"comment_id":99419496,"body_markdown":"@gbenroscience So nobody calls the _close()_ method on HikariDataSource? Then try to do as I described above - do this in a ServletContextListener. Here is a _similar_ related [example](https://www.journaldev.com/1945/servletcontextlistener-servlet-listener-example). It&#39;s **night now** where I live, 2:37 AM. Good night.","body":"@gbenroscience So nobody calls the <i>close()</i> method on HikariDataSource? Then try to do as I described above - do this in a ServletContextListener. Here is a <i>similar</i> related <a href=\"https://www.journaldev.com/1945/servletcontextlistener-servlet-listener-example\" rel=\"nofollow noreferrer\">example</a>. It&#39;s <b>night now</b> where I live, 2:37 AM. Good night."},{"owner":{"account_id":2070885,"reputation":1024,"user_id":1845404,"accept_rate":88,"display_name":"gbenroscience"},"score":0,"creation_date":1559432583,"post_id":13631242,"comment_id":99419535,"body_markdown":"The HikariDatasource is the pool. I mentioned that I am doing all this already in a ServletContextListener. Create the pool in the constructor and destroy it in the contextDestroyed as I said in the last comment.\nThanks for assisting and good night...Its late night here, too.","body":"The HikariDatasource is the pool. I mentioned that I am doing all this already in a ServletContextListener. Create the pool in the constructor and destroy it in the contextDestroyed as I said in the last comment. Thanks for assisting and good night...Its late night here, too."},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":0,"creation_date":1559435386,"post_id":13631242,"comment_id":99419841,"body_markdown":"@gbenroscience I haven&#39;t event noticed that you mentioned you use _contextDestroyed()_. It&#39;s because I was irritated by the fact you ignored that I **twice**asked you to make a separate post for your problem, I didn&#39;t even read you question carefully. I can ask in Russian, if English is not suitable )).","body":"@gbenroscience I haven&#39;t event noticed that you mentioned you use <i>contextDestroyed()</i>. It&#39;s because I was irritated by the fact you ignored that I <b>twice</b>asked you to make a separate post for your problem, I didn&#39;t even read you question carefully. I can ask in Russian, if English is not suitable ))."},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":1,"creation_date":1559435741,"post_id":13631242,"comment_id":99419872,"body_markdown":"@gbenroscience This whole &quot;NetBeans save on restart&quot; thing for Tomcat apps - this could also cause problems, hard to tell. I have found [this discussion](https://github.com/brettwooldridge/HikariCP/issues/418#issuecomment-247287590) on the HikariCP project page (hint: nice place to ask HikariCP related questions straight to its author). Pay attention what the author of HikariCP Brett Wooldrige says. And for the **third** time: **PLEASE** create a separate question for your problem, describing the configuration details etc. Don&#39;t you see it&#39;s taking toooo much space in the comment section?","body":"@gbenroscience This whole &quot;NetBeans save on restart&quot; thing for Tomcat apps - this could also cause problems, hard to tell. I have found <a href=\"https://github.com/brettwooldridge/HikariCP/issues/418#issuecomment-247287590\" rel=\"nofollow noreferrer\">this discussion</a> on the HikariCP project page (hint: nice place to ask HikariCP related questions straight to its author). Pay attention what the author of HikariCP Brett Wooldrige says. And for the <b>third</b> time: <b>PLEASE</b> create a separate question for your problem, describing the configuration details etc. Don&#39;t you see it&#39;s taking toooo much space in the comment section?"},{"owner":{"account_id":2070885,"reputation":1024,"user_id":1845404,"accept_rate":88,"display_name":"gbenroscience"},"score":1,"creation_date":1559436412,"post_id":13631242,"comment_id":99419930,"body_markdown":"Forgive me @informatik01! I really dont know why I kept going. You have been most patient! Have a blessed night&#39;s rest","body":"Forgive me @informatik01! I really dont know why I kept going. You have been most patient! Have a blessed night&#39;s rest"},{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":1,"creation_date":1559437068,"post_id":13631242,"comment_id":99419989,"body_markdown":"@gbenroscience Forgive me too for being irritated. God bless you!","body":"@gbenroscience Forgive me too for being irritated. God bless you!"}],"tags":[],"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"comment_count":19,"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1696645164,"creation_date":1354209689,"answer_id":13631242,"question_id":13595794,"body_markdown":"# THE SOLUTION (tl;dr)\r\n\r\nIn order to solve this issue, add an attribute `closeMethod` (documented [here](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Resource_Definitions)) with the value &quot;*close*&quot; to the *Resource* element in the context.xml file.\r\n\r\nHere&#39;s the correct content of my /META-INF/context.xml file:\r\n\r\n    &lt;Context&gt;\r\n        &lt;!-- Configuration for the Tomcat JDBC Connection Pool --&gt;\r\n        &lt;Resource name=&quot;jdbc/someDB&quot;\r\n            type=&quot;javax.sql.DataSource&quot;\r\n            auth=&quot;Container&quot;\r\n            factory=&quot;org.apache.tomcat.jdbc.pool.DataSourceFactory&quot;\r\n            driverClassName=&quot;org.postgresql.Driver&quot;\r\n            url=&quot;jdbc:postgresql://localhost:5432/somedb&quot;\r\n            username=&quot;postgres&quot;\r\n            password=&quot;12345&quot;\r\n            maxActive=&quot;100&quot;\r\n            minIdle=&quot;10&quot;\r\n            initialSize=&quot;10&quot;\r\n            validationQuery=&quot;SELECT 1&quot;\r\n            validationInterval=&quot;30000&quot;\r\n            removeAbandoned=&quot;true&quot;\r\n            removeAbandonedTimeout=&quot;60&quot;\r\n            abandonWhenPercentageFull=&quot;50&quot;\r\n            closeMethod=&quot;close&quot; /&gt;\r\n    &lt;/Context&gt;\r\n\r\nPay attention to the attribute *closeMethod*. I tested it and now the number of connections are kept STRICTLY as defined in the *context.xml* file!\r\n\r\n**NOTE**  \r\nThere is one moment (related to JNDI) that may be taken care of. See the UPDATE 3 for the complete description.\r\n\r\n---\r\n# Long answer\r\nOK, I found the above solution thanks to Apache Tomcat committor [Konstantin Kolinko](https://issues.apache.org/bugzilla/show_bug.cgi?id=54217#c1). I reported [this issue](https://issues.apache.org/bugzilla/show_bug.cgi?id=54217) as an Apache Tomcat bug on ASF Bugzilla and &lt;strike&gt;it turned out it&#39;s not a bug&lt;/strike&gt; (see UPDATE 1).\r\n\r\n### UPDATE 1 (2012-12-03) a.k.a. &quot;A New Hope&quot;\r\n\r\nWell, it still turned out to be a **bug**. [Mark Thomas](https://stackoverflow.com/users/1299005/mark-thomas), the Apache Tomcat 7 release manager, [confirmed](https://issues.apache.org/bugzilla/show_bug.cgi?id=54217#c5) that (quote):   \r\n\r\n&gt; &quot;This is a memory leak bug in jdbc-pool. PoolCleaner instances are\r\n&gt; retaining references to the ConnectionPool preventing it from being\r\n&gt; GC&#39;d.  \r\n&gt; ...  \r\n&gt; This has been fixed in trunk and 7.0.x and will be included in\r\n&gt; 7.0.34 onwards.&quot;\r\n\r\nSo if you have an older Tomcat version (less than 7.0.34), use the above solution, otherwise, &lt;strike&gt;starting with Apache Tomcat version 7.0.34, there should be no issues like the one I described.&lt;/strike&gt; (see UPDATE 2)\r\n\r\n### UPDATE 2 (2014-01-13) a.k.a. &quot;The Issue Strikes Back&quot;\r\n\r\nIt seems like the issue initially described in [my bug report](https://issues.apache.org/bugzilla/show_bug.cgi?id=54217) is still present even for the currently latest Apache Tomcat version 7.0.50 and I also reproduced it with Tomcat 7.0.47 (thanks to [Miklos Krivan](https://stackoverflow.com/questions/13595794/jdbc-connection-pool-runs-out-of-connections-when-context-reload-true-is-enabl#comment31678254_13631242) for pointing it out). Although now Tomcat sometimes manages to close additional connections after reloading, and sometimes the number of connections are increased after one reload and then kept steady, but eventually this behavior is still not reliable.\r\n\r\n**I still could reproduce** the initially described issue (although again not that easy: it may be related to the frequency of successive reloads). Seems like it&#39;s just a matter of time, i.e. if Tomcat has enough time after reload, it manages the connection pool more or less as it should. As Mark Thomas mentioned in his [comment](https://issues.apache.org/bugzilla/show_bug.cgi?id=54217#c9) (quote): &quot;As per the docs for closeMethod, that method exists solely to speed up the freeing of resources that would otherwise be freed by GC.&quot; (end of quote), and it looks like the speed is the defining factor.\r\n\r\nWhen using the solution presented by Konstantin Kolinko (to use `closeMethod=&quot;close&quot;`) everything WORKS just fine, and the number of connections reserved are kept STRICTLY as defined in the context.xml file. So it appears that using `closeMethod=&quot;close&quot;` is the ONLY true way (at the moment) to avoid running out of connections after context reloading.\r\n\r\n### UPDATE 3 (2014-01-13) a.k.a. &quot;Return of the Tomcat Release Manager&quot;\r\n\r\nThe mystery behind the behavior described in the UPDATE 2 is solved. More details have been cleared now after I received a [reply](https://issues.apache.org/bugzilla/show_bug.cgi?id=54217#c11) from Mark Thomas (Tomcat release manager). I hope this is the last update. So the bug **was indeed fixed** as was mentioned in the UPDATE 1. I am posting the essential part from Mark&#39;s reply here as a quote (emphasis mine):\r\n\r\n&gt; The actual memory leak found while investigating this bug has been\r\n&gt; fixed in 7.0.34 onwards as per comments #4 to #6.\r\n&gt; \r\n&gt; The issue of the connections not being closed on reload is a result of\r\n&gt; the J2EE specification for JNDI resources and this part of the bug\r\n&gt; report is therefore invalid. I am restoring the state of this bug to\r\n&gt; fixed to reflect that the memory leak that did exist has been fixed.\r\n&gt; \r\n&gt; To expand on why the failure to immediately close connection after\r\n&gt; reload is invalid, the J2EE specification provides no mechanism for the\r\n&gt; container to tell the resource it is no longer required. Therefore all\r\n&gt; the container can do is clear references to the resource and wait for\r\n&gt; garbage collection (which will trigger the closure of the pool and the\r\n&gt; associated connections). Garbage collection occurs at times determined\r\n&gt; by the JVM so **this is why it takes an indeterminate amount of time for\r\n&gt; connections to be closed after a context reload** as a garbage\r\n&gt; collection may not occur for some time.\r\n&gt; \r\n&gt; Tomcat has added the Tomcat specific JNDI attribute *closeMethod* which\r\n&gt; can be used to trigger the explicit close of a JNDI resource when a\r\n&gt; context is stopped. **If waiting for GC to clean up resources is not\r\n&gt; acceptable then simply use this parameter**. Tomcat does not use this\r\n&gt; by default as **it may have unexpected and unwanted side-effects for\r\n&gt; some JNDI resources**.\r\n&gt; \r\n&gt; If you&#39;d like to see a standard mechanism provided for telling JNDI\r\n&gt; resources that they are no longer required then you need to lobby the\r\n&gt; J2EE expert group.\r\n\r\n# Conclusion #\r\n\r\nJust use the solution presented in the beginning of this post (but, just in case, keep in mind the JNDI related issue that can *theoretically* arise from using it).\r\n\r\n---\r\n## Alternative solution\r\n[Michael Osipov](https://stackoverflow.com/users/696632/michael-o) suggested using his [*CloseableResourceListener*](http://mo-tomcat-ext.sourceforge.net/user-guide.html#CloseableResourceListener), which prevents memory leaks caused by left open resources during undeployment of web applications. So you may also give it a try.\r\n\r\n---\r\n*DISCLAIMER  \r\nThe aliases for the UPDATES were inspired by the [Star Wars](http://en.wikipedia.org/wiki/Star_Wars) film series. All rights belong to their respective owners.*\r\n","title":"JDBC connection pool runs out of connections when Context reload=&quot;true&quot; is enabled in Tomcat","body":"<h1>THE SOLUTION (tl;dr)</h1>\n<p>In order to solve this issue, add an attribute <code>closeMethod</code> (documented <a href=\"http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Resource_Definitions\" rel=\"nofollow noreferrer\">here</a>) with the value &quot;<em>close</em>&quot; to the <em>Resource</em> element in the context.xml file.</p>\n<p>Here's the correct content of my /META-INF/context.xml file:</p>\n<pre><code>&lt;Context&gt;\n    &lt;!-- Configuration for the Tomcat JDBC Connection Pool --&gt;\n    &lt;Resource name=&quot;jdbc/someDB&quot;\n        type=&quot;javax.sql.DataSource&quot;\n        auth=&quot;Container&quot;\n        factory=&quot;org.apache.tomcat.jdbc.pool.DataSourceFactory&quot;\n        driverClassName=&quot;org.postgresql.Driver&quot;\n        url=&quot;jdbc:postgresql://localhost:5432/somedb&quot;\n        username=&quot;postgres&quot;\n        password=&quot;12345&quot;\n        maxActive=&quot;100&quot;\n        minIdle=&quot;10&quot;\n        initialSize=&quot;10&quot;\n        validationQuery=&quot;SELECT 1&quot;\n        validationInterval=&quot;30000&quot;\n        removeAbandoned=&quot;true&quot;\n        removeAbandonedTimeout=&quot;60&quot;\n        abandonWhenPercentageFull=&quot;50&quot;\n        closeMethod=&quot;close&quot; /&gt;\n&lt;/Context&gt;\n</code></pre>\n<p>Pay attention to the attribute <em>closeMethod</em>. I tested it and now the number of connections are kept STRICTLY as defined in the <em>context.xml</em> file!</p>\n<p><strong>NOTE</strong><br />\nThere is one moment (related to JNDI) that may be taken care of. See the UPDATE 3 for the complete description.</p>\n<hr />\n<h1>Long answer</h1>\n<p>OK, I found the above solution thanks to Apache Tomcat committor <a href=\"https://issues.apache.org/bugzilla/show_bug.cgi?id=54217#c1\" rel=\"nofollow noreferrer\">Konstantin Kolinko</a>. I reported <a href=\"https://issues.apache.org/bugzilla/show_bug.cgi?id=54217\" rel=\"nofollow noreferrer\">this issue</a> as an Apache Tomcat bug on ASF Bugzilla and <strike>it turned out it's not a bug</strike> (see UPDATE 1).</p>\n<h3>UPDATE 1 (2012-12-03) a.k.a. &quot;A New Hope&quot;</h3>\n<p>Well, it still turned out to be a <strong>bug</strong>. <a href=\"https://stackoverflow.com/users/1299005/mark-thomas\">Mark Thomas</a>, the Apache Tomcat 7 release manager, <a href=\"https://issues.apache.org/bugzilla/show_bug.cgi?id=54217#c5\" rel=\"nofollow noreferrer\">confirmed</a> that (quote):</p>\n<blockquote>\n<p>&quot;This is a memory leak bug in jdbc-pool. PoolCleaner instances are\nretaining references to the ConnectionPool preventing it from being\nGC'd.<br />\n...<br />\nThis has been fixed in trunk and 7.0.x and will be included in\n7.0.34 onwards.&quot;</p>\n</blockquote>\n<p>So if you have an older Tomcat version (less than 7.0.34), use the above solution, otherwise, <strike>starting with Apache Tomcat version 7.0.34, there should be no issues like the one I described.</strike> (see UPDATE 2)</p>\n<h3>UPDATE 2 (2014-01-13) a.k.a. &quot;The Issue Strikes Back&quot;</h3>\n<p>It seems like the issue initially described in <a href=\"https://issues.apache.org/bugzilla/show_bug.cgi?id=54217\" rel=\"nofollow noreferrer\">my bug report</a> is still present even for the currently latest Apache Tomcat version 7.0.50 and I also reproduced it with Tomcat 7.0.47 (thanks to <a href=\"https://stackoverflow.com/questions/13595794/jdbc-connection-pool-runs-out-of-connections-when-context-reload-true-is-enabl#comment31678254_13631242\">Miklos Krivan</a> for pointing it out). Although now Tomcat sometimes manages to close additional connections after reloading, and sometimes the number of connections are increased after one reload and then kept steady, but eventually this behavior is still not reliable.</p>\n<p><strong>I still could reproduce</strong> the initially described issue (although again not that easy: it may be related to the frequency of successive reloads). Seems like it's just a matter of time, i.e. if Tomcat has enough time after reload, it manages the connection pool more or less as it should. As Mark Thomas mentioned in his <a href=\"https://issues.apache.org/bugzilla/show_bug.cgi?id=54217#c9\" rel=\"nofollow noreferrer\">comment</a> (quote): &quot;As per the docs for closeMethod, that method exists solely to speed up the freeing of resources that would otherwise be freed by GC.&quot; (end of quote), and it looks like the speed is the defining factor.</p>\n<p>When using the solution presented by Konstantin Kolinko (to use <code>closeMethod=&quot;close&quot;</code>) everything WORKS just fine, and the number of connections reserved are kept STRICTLY as defined in the context.xml file. So it appears that using <code>closeMethod=&quot;close&quot;</code> is the ONLY true way (at the moment) to avoid running out of connections after context reloading.</p>\n<h3>UPDATE 3 (2014-01-13) a.k.a. &quot;Return of the Tomcat Release Manager&quot;</h3>\n<p>The mystery behind the behavior described in the UPDATE 2 is solved. More details have been cleared now after I received a <a href=\"https://issues.apache.org/bugzilla/show_bug.cgi?id=54217#c11\" rel=\"nofollow noreferrer\">reply</a> from Mark Thomas (Tomcat release manager). I hope this is the last update. So the bug <strong>was indeed fixed</strong> as was mentioned in the UPDATE 1. I am posting the essential part from Mark's reply here as a quote (emphasis mine):</p>\n<blockquote>\n<p>The actual memory leak found while investigating this bug has been\nfixed in 7.0.34 onwards as per comments #4 to #6.</p>\n<p>The issue of the connections not being closed on reload is a result of\nthe J2EE specification for JNDI resources and this part of the bug\nreport is therefore invalid. I am restoring the state of this bug to\nfixed to reflect that the memory leak that did exist has been fixed.</p>\n<p>To expand on why the failure to immediately close connection after\nreload is invalid, the J2EE specification provides no mechanism for the\ncontainer to tell the resource it is no longer required. Therefore all\nthe container can do is clear references to the resource and wait for\ngarbage collection (which will trigger the closure of the pool and the\nassociated connections). Garbage collection occurs at times determined\nby the JVM so <strong>this is why it takes an indeterminate amount of time for\nconnections to be closed after a context reload</strong> as a garbage\ncollection may not occur for some time.</p>\n<p>Tomcat has added the Tomcat specific JNDI attribute <em>closeMethod</em> which\ncan be used to trigger the explicit close of a JNDI resource when a\ncontext is stopped. <strong>If waiting for GC to clean up resources is not\nacceptable then simply use this parameter</strong>. Tomcat does not use this\nby default as <strong>it may have unexpected and unwanted side-effects for\nsome JNDI resources</strong>.</p>\n<p>If you'd like to see a standard mechanism provided for telling JNDI\nresources that they are no longer required then you need to lobby the\nJ2EE expert group.</p>\n</blockquote>\n<h1>Conclusion</h1>\n<p>Just use the solution presented in the beginning of this post (but, just in case, keep in mind the JNDI related issue that can <em>theoretically</em> arise from using it).</p>\n<hr />\n<h2>Alternative solution</h2>\n<p><a href=\"https://stackoverflow.com/users/696632/michael-o\">Michael Osipov</a> suggested using his <a href=\"http://mo-tomcat-ext.sourceforge.net/user-guide.html#CloseableResourceListener\" rel=\"nofollow noreferrer\"><em>CloseableResourceListener</em></a>, which prevents memory leaks caused by left open resources during undeployment of web applications. So you may also give it a try.</p>\n<hr />\n<p><em>DISCLAIMER<br />\nThe aliases for the UPDATES were inspired by the <a href=\"http://en.wikipedia.org/wiki/Star_Wars\" rel=\"nofollow noreferrer\">Star Wars</a> film series. All rights belong to their respective owners.</em></p>\n"}],"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23874,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":13631242,"answer_count":1,"score":30,"last_activity_date":1696645164,"creation_date":1354062887,"question_id":13595794,"body_markdown":"I am developing a Java EE web application in Eclipse Juno. I have configured Tomcat to use JDBC connection pool (org.apache.tomcat.jdbc.pool) along with PostgreSQL database.\r\nHere are the configurations in my project&#39;s META-INF/context.xml:\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Context&gt;\r\n        &lt;!-- Configuration for the Tomcat JDBC Connection Pool --&gt;\r\n\t    &lt;Resource name=&quot;jdbc/someDB&quot;\r\n\t\t    type=&quot;javax.sql.DataSource&quot;\r\n\t\t    auth=&quot;Container&quot;\r\n\t\t    factory=&quot;org.apache.tomcat.jdbc.pool.DataSourceFactory&quot;\r\n\t\t    driverClassName=&quot;org.postgresql.Driver&quot;\r\n\t\t    url=&quot;jdbc:postgresql://localhost:5432/somedb&quot;\r\n\t\t    username=&quot;postgres&quot;\r\n\t\t    password=&quot;12345&quot;\r\n\t\t    maxActive=&quot;100&quot;\r\n\t\t    minIdle=&quot;10&quot;\r\n\t\t    initialSize=&quot;10&quot;\r\n\t\t    validationQuery=&quot;SELECT 1&quot;\r\n\t\t    validationInterval=&quot;30000&quot;\r\n\t\t    removeAbandoned=&quot;true&quot;\r\n\t\t    removeAbandonedTimeout=&quot;60&quot;\r\n\t\t    abandonWhenPercentageFull=&quot;50&quot; /&gt;\r\n    &lt;/Context&gt;\r\n\r\nMy application is deployed to Tomcat using Eclipse, and in Tomcat&#39;s context.xml an attribute reloadable is set to &quot;true&quot; to automatically reload the web application if a change is detected:\r\n    \r\n`&lt;Context reloadable=&quot;true&quot;&gt;`\r\n\r\nI have noticed that every time the above mentioned automatic reload is happening 10 more connections to PostgreSQL db is reserved (because in webapp&#39;s context.xml initialSize=&quot;10&quot;). So after 10 changes a PSQLException is thrown:\r\n\r\n    org.postgresql.util.PSQLException: FATAL: sorry, too many clients already\r\n    ...\r\n\r\nIf I manually restart Tomcat - everything is fine and just 10 connections are reserved.\r\n\r\nDoes anybody know the way around this issue, so it could be possible to develop with reloadable set to &quot;true&quot; and not cause pooling more connections every time the context is reloaded?\r\n\r\nWould appreciate any help.\r\n\r\nP.S. Apache Tomcat Version 7.0.32","title":"JDBC connection pool runs out of connections when Context reload=&quot;true&quot; is enabled in Tomcat","body":"<p>I am developing a Java EE web application in Eclipse Juno. I have configured Tomcat to use JDBC connection pool (org.apache.tomcat.jdbc.pool) along with PostgreSQL database.\nHere are the configurations in my project's META-INF/context.xml:\n</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Context&gt;\n    &lt;!-- Configuration for the Tomcat JDBC Connection Pool --&gt;\n    &lt;Resource name=\"jdbc/someDB\"\n        type=\"javax.sql.DataSource\"\n        auth=\"Container\"\n        factory=\"org.apache.tomcat.jdbc.pool.DataSourceFactory\"\n        driverClassName=\"org.postgresql.Driver\"\n        url=\"jdbc:postgresql://localhost:5432/somedb\"\n        username=\"postgres\"\n        password=\"12345\"\n        maxActive=\"100\"\n        minIdle=\"10\"\n        initialSize=\"10\"\n        validationQuery=\"SELECT 1\"\n        validationInterval=\"30000\"\n        removeAbandoned=\"true\"\n        removeAbandonedTimeout=\"60\"\n        abandonWhenPercentageFull=\"50\" /&gt;\n&lt;/Context&gt;\n</code></pre>\n\n<p>My application is deployed to Tomcat using Eclipse, and in Tomcat's context.xml an attribute reloadable is set to \"true\" to automatically reload the web application if a change is detected:</p>\n\n<p><code>&lt;Context reloadable=\"true\"&gt;</code></p>\n\n<p>I have noticed that every time the above mentioned automatic reload is happening 10 more connections to PostgreSQL db is reserved (because in webapp's context.xml initialSize=\"10\"). So after 10 changes a PSQLException is thrown:</p>\n\n<pre><code>org.postgresql.util.PSQLException: FATAL: sorry, too many clients already\n...\n</code></pre>\n\n<p>If I manually restart Tomcat - everything is fine and just 10 connections are reserved.</p>\n\n<p>Does anybody know the way around this issue, so it could be possible to develop with reloadable set to \"true\" and not cause pooling more connections every time the context is reloaded?</p>\n\n<p>Would appreciate any help.</p>\n\n<p>P.S. Apache Tomcat Version 7.0.32</p>\n"},{"tags":["java","postgresql","spring-boot","postman"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1696649768,"post_id":77248128,"comment_id":136184088,"body_markdown":"You&#39;ll need to explain your problem more clearly.","body":"You&#39;ll need to explain your problem more clearly."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1696674493,"post_id":77248128,"comment_id":136185759,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":10335627,"reputation":13845,"user_id":7623856,"display_name":"Belayer"},"score":0,"creation_date":1696702753,"post_id":77248128,"comment_id":136188349,"body_markdown":"Welcome to the SO community. The community will help with your issues, but there are certain expectations on you. Please spend a few minuets to take the [Tour](https://stackoverflow.com/tour) and review [ask]. \n Then update your question to include sample data, table definition (ddl scripts), the expected results of that data and what you have tried, all as text - **no images**; also adding a  [fiddle](https://dbfiddle.uk/) is extremely useful. Further clearly describe what you are attempting and where you are having issues.","body":"Welcome to the SO community. The community will help with your issues, but there are certain expectations on you. Please spend a few minuets to take the <a href=\"https://stackoverflow.com/tour\">Tour</a> and review <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>.   Then update your question to include sample data, table definition (ddl scripts), the expected results of that data and what you have tried, all as text - <b>no images</b>; also adding a  <a href=\"https://dbfiddle.uk/\" rel=\"nofollow noreferrer\">fiddle</a> is extremely useful. Further clearly describe what you are attempting and where you are having issues."}],"owner":{"account_id":26762981,"reputation":1,"user_id":20360612,"display_name":"Pamasime"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696644935,"creation_date":1696644935,"question_id":77248128,"body_markdown":"I want to relate the User table that is made with jwt, that is, when I create a user I get a token but I want to relate it when I create an object in the Tweet table I want to relate it to the User but I don&#39;t know how to assign it\r\n\r\nActually I just want the method that helps me relate it. I already have the complete crud but I don&#39;t have a way to relate it.","title":"Relate the User table to a Tweet table in Springboot with PostgresSql","body":"<p>I want to relate the User table that is made with jwt, that is, when I create a user I get a token but I want to relate it when I create an object in the Tweet table I want to relate it to the User but I don't know how to assign it</p>\n<p>Actually I just want the method that helps me relate it. I already have the complete crud but I don't have a way to relate it.</p>\n"},{"tags":["java","service","windows-7","jmx"],"comments":[{"owner":{"account_id":249790,"reputation":3108,"user_id":526093,"accept_rate":100,"display_name":"Nikunj"},"score":0,"creation_date":1294839038,"post_id":4669203,"comment_id":5145293,"body_markdown":"Is your JAVA service is configurable to JMX?","body":"Is your JAVA service is configurable to JMX?"},{"owner":{"account_id":41250,"reputation":1103,"user_id":119823,"accept_rate":61,"display_name":"Neil Wightman"},"score":0,"creation_date":1294839337,"post_id":4669203,"comment_id":5145351,"body_markdown":"I dont specific anything extra to get JMX enabled, by default (with 1.6 and confirmed when ran at the command line) it works and it worked with Windows XP.","body":"I dont specific anything extra to get JMX enabled, by default (with 1.6 and confirmed when ran at the command line) it works and it worked with Windows XP."},{"owner":{"account_id":249790,"reputation":3108,"user_id":526093,"accept_rate":100,"display_name":"Nikunj"},"score":0,"creation_date":1294839633,"post_id":4669203,"comment_id":5145414,"body_markdown":"Ok, If JMX is enables then connect the service with JMX URL and port. It should connect.","body":"Ok, If JMX is enables then connect the service with JMX URL and port. It should connect."},{"owner":{"account_id":41250,"reputation":1103,"user_id":119823,"accept_rate":61,"display_name":"Neil Wightman"},"score":0,"creation_date":1294840430,"post_id":4669203,"comment_id":5145581,"body_markdown":"Thats the problem.  I normally connect simply by the PID not the Port number.","body":"Thats the problem.  I normally connect simply by the PID not the Port number."},{"owner":{"account_id":41250,"reputation":1103,"user_id":119823,"accept_rate":61,"display_name":"Neil Wightman"},"score":0,"creation_date":1294841688,"post_id":4669203,"comment_id":5145858,"body_markdown":"The documentation says &quot;Note - On Windows platforms, for security reasons, local monitoring and management is only supported if your default temporary directory is on a file system that allows the setting of permissions on files and directories (for example, on a New Technology File System (NTFS) file system). It is not supported on a File Allocation Table (FAT) file system, which provides insufficient access controls.&quot; So maybe this is the difference between the process running on the command line (or as Windows XP service) and Windows 7 service.","body":"The documentation says &quot;Note - On Windows platforms, for security reasons, local monitoring and management is only supported if your default temporary directory is on a file system that allows the setting of permissions on files and directories (for example, on a New Technology File System (NTFS) file system). It is not supported on a File Allocation Table (FAT) file system, which provides insufficient access controls.&quot; So maybe this is the difference between the process running on the command line (or as Windows XP service) and Windows 7 service."},{"owner":{"account_id":339900,"reputation":8440,"user_id":669645,"accept_rate":91,"display_name":"Edd"},"score":0,"creation_date":1415958912,"post_id":4669203,"comment_id":42400478,"body_markdown":"http://stackoverflow.com/questions/503057/unable-to-use-jconsole-with-tomcat-running-as-windows-service","body":"<a href=\"http://stackoverflow.com/questions/503057/unable-to-use-jconsole-with-tomcat-running-as-windows-service\" title=\"unable to use jconsole with tomcat running as windows service\">stackoverflow.com/questions/503057/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":41250,"reputation":1103,"user_id":119823,"accept_rate":61,"display_name":"Neil Wightman"},"score":0,"creation_date":1300178546,"post_id":4755265,"comment_id":5988481,"body_markdown":"I have tried this and many more tests.   Running jconsole as admin, system and changing the service to run as my user etc and it always fails.    It appears the hsperfdata_username are created correctly in all cases.","body":"I have tried this and many more tests.   Running jconsole as admin, system and changing the service to run as my user etc and it always fails.    It appears the hsperfdata_username are created correctly in all cases."},{"owner":{"account_id":41250,"reputation":1103,"user_id":119823,"accept_rate":61,"display_name":"Neil Wightman"},"score":0,"creation_date":1435234584,"post_id":4755265,"comment_id":50121121,"body_markdown":"Today I got \nPsExec.exe -s &quot;C:\\Program Files\\Java\\jdk1.6.0_13\\bin\\jstack.exe&quot; 12345 and jmap.exe both to work but not jvisualvm.","body":"Today I got  PsExec.exe -s &quot;C:\\Program Files\\Java\\jdk1.6.0_13\\bin\\jstack.exe&quot; 12345 and jmap.exe both to work but not jvisualvm."}],"tags":[],"owner":{"account_id":65994,"reputation":1795,"user_id":193874,"display_name":"Rob Tanzola"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1295582762,"creation_date":1295582762,"answer_id":4755265,"question_id":4669203,"body_markdown":"Others have been able to [run jstack on 2008r2][1] which may provide some insight on how to get jconsole to connect on Windows 7. As you noted in your comment, the permissions are important. If the service and jconsole can&#39;t access the temp directory to write to the appropriate hsperf subdirectory, it won&#39;t work. What is also important is the location of the temp directory, the user the service is running, and the user that is running jconsole.\r\n\r\nRunning SysInternals `psexec -s -i &lt;jdk_home&gt;\\bin\\jconsole &lt;PID&gt;` can be used to run jconsole as Local System, the same user that I believe you are using to run your service. \r\n\r\nMy experience running jconsole from JDK 1.5 in Server 2008 as a system user was unsuccessful. With permissions that I thought should have been sufficient, I got a Could Not Open PerfMemory error. Java 1.6 may be a different story.\r\n\r\nIn light of all the challenges with running jconsole locally, you would probably have better luck [setting it up to accept remote connections][2]. You could set it up for local-only access with your firewall blocking that port from external access.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/906620/jstack-and-not-enough-storage-is-available-to-process-this-command\r\n  [2]: http://download.oracle.com/javase/6/docs/technotes/guides/management/agent.html","title":"Jconsole cannot connect to java processes running as Windows 7 Services","body":"<p>Others have been able to <a href=\"https://stackoverflow.com/questions/906620/jstack-and-not-enough-storage-is-available-to-process-this-command\">run jstack on 2008r2</a> which may provide some insight on how to get jconsole to connect on Windows 7. As you noted in your comment, the permissions are important. If the service and jconsole can't access the temp directory to write to the appropriate hsperf subdirectory, it won't work. What is also important is the location of the temp directory, the user the service is running, and the user that is running jconsole.</p>\n\n<p>Running SysInternals <code>psexec -s -i &lt;jdk_home&gt;\\bin\\jconsole &lt;PID&gt;</code> can be used to run jconsole as Local System, the same user that I believe you are using to run your service. </p>\n\n<p>My experience running jconsole from JDK 1.5 in Server 2008 as a system user was unsuccessful. With permissions that I thought should have been sufficient, I got a Could Not Open PerfMemory error. Java 1.6 may be a different story.</p>\n\n<p>In light of all the challenges with running jconsole locally, you would probably have better luck <a href=\"http://download.oracle.com/javase/6/docs/technotes/guides/management/agent.html\" rel=\"nofollow noreferrer\">setting it up to accept remote connections</a>. You could set it up for local-only access with your firewall blocking that port from external access.</p>\n"},{"comments":[{"owner":{"account_id":41250,"reputation":1103,"user_id":119823,"accept_rate":61,"display_name":"Neil Wightman"},"score":0,"creation_date":1300116112,"post_id":5157406,"comment_id":5977045,"body_markdown":"The bug appears to be specific to using jconsole via remote desktop.","body":"The bug appears to be specific to using jconsole via remote desktop."},{"owner":{"account_id":318420,"reputation":138,"user_id":635642,"display_name":"Ramesh N"},"score":0,"creation_date":1354288671,"post_id":5157406,"comment_id":18725320,"body_markdown":"Linking a related answer  for using /console using Mac OS X RDP tool. This finally works for me. http://serverfault.com/questions/114548/mstsc-admin-for-microsofts-rdp-for-mac-os-x","body":"Linking a related answer  for using /console using Mac OS X RDP tool. This finally works for me. <a href=\"http://serverfault.com/questions/114548/mstsc-admin-for-microsofts-rdp-for-mac-os-x\" title=\"mstsc admin for microsofts rdp for mac os x\">serverfault.com/questions/114548/&hellip;</a>"},{"owner":{"account_id":318420,"reputation":138,"user_id":635642,"display_name":"Ramesh N"},"score":0,"creation_date":1373182510,"post_id":5157406,"comment_id":25457187,"body_markdown":"Sometimes jvisualvm fails to run in the above environment. Work around mentioned here seems to work http://stackoverflow.com/questions/8912831/how-do-you-run-jvisualvm-exe-under-the-local-system-account-under-windows-server?rq=1","body":"Sometimes jvisualvm fails to run in the above environment. Work around mentioned here seems to work <a href=\"http://stackoverflow.com/questions/8912831/how-do-you-run-jvisualvm-exe-under-the-local-system-account-under-windows-server?rq=1\" title=\"how do you run jvisualvm exe under the local system account under windows server\">stackoverflow.com/questions/8912831/&hellip;</a>"}],"tags":[],"owner":{"account_id":318420,"reputation":138,"user_id":635642,"display_name":"Ramesh N"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1298997400,"creation_date":1298997400,"answer_id":5157406,"question_id":4669203,"body_markdown":"I am currently facing the same problem but on Windows 2003 R2 (SP2). There is on open bug in Oracle Bug database (bug id 6399729)\r\nhttps://bugs.java.com/bugdatabase/view_bug?bug_id=6399729\r\n\r\nAlso there is a work-around posted towards the end. It talks about installing java in &quot;install&quot; mode :-), but didn&#39;t work for me on Windows 2003 though. But your mileage may vary!!\r\n\r\n","title":"Jconsole cannot connect to java processes running as Windows 7 Services","body":"<p>I am currently facing the same problem but on Windows 2003 R2 (SP2). There is on open bug in Oracle Bug database (bug id 6399729)\n<a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6399729\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=6399729</a></p>\n<p>Also there is a work-around posted towards the end. It talks about installing java in &quot;install&quot; mode :-), but didn't work for me on Windows 2003 though. But your mileage may vary!!</p>\n"},{"comments":[{"owner":{"account_id":41250,"reputation":1103,"user_id":119823,"accept_rate":61,"display_name":"Neil Wightman"},"score":0,"creation_date":1312637198,"post_id":6951688,"comment_id":8308540,"body_markdown":"I only have 32 bit Java on my systems.  We are yet to need 64 bit.  I may try it with a 64 bit Java.","body":"I only have 32 bit Java on my systems.  We are yet to need 64 bit.  I may try it with a 64 bit Java."},{"owner":{"account_id":18780,"reputation":1030,"user_id":43396,"accept_rate":45,"display_name":"Cheese Daneish"},"score":0,"creation_date":1393354148,"post_id":6951688,"comment_id":33385218,"body_markdown":"Thank you xu, this was the solution to my issue.","body":"Thank you xu, this was the solution to my issue."},{"owner":{"account_id":41250,"reputation":1103,"user_id":119823,"accept_rate":61,"display_name":"Neil Wightman"},"score":0,"creation_date":1393405597,"post_id":6951688,"comment_id":33408229,"body_markdown":"@Mongo was your java process running as a Windows service?","body":"@Mongo was your java process running as a Windows service?"},{"owner":{"account_id":18780,"reputation":1030,"user_id":43396,"accept_rate":45,"display_name":"Cheese Daneish"},"score":1,"creation_date":1393512060,"post_id":6951688,"comment_id":33470653,"body_markdown":"@NeilWightman no, sorry, this question popped up from a related search and the answer happened to help me. My jvm arch was different between jconsole and my process, but I was not running it as a Windows service.","body":"@NeilWightman no, sorry, this question popped up from a related search and the answer happened to help me. My jvm arch was different between jconsole and my process, but I was not running it as a Windows service."}],"tags":[],"owner":{"account_id":406490,"reputation":269,"user_id":776036,"accept_rate":71,"display_name":"xu huanze"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1312520894,"creation_date":1312520894,"answer_id":6951688,"question_id":4669203,"body_markdown":"Perhaps it is a 64bit/32bit problem, I have several applications compiled with 32bit JDK, which could not be opened with JConsole from 64bit JDK on Windows 7 64bit, after I downloaded the 32bit JDK it worked.","title":"Jconsole cannot connect to java processes running as Windows 7 Services","body":"<p>Perhaps it is a 64bit/32bit problem, I have several applications compiled with 32bit JDK, which could not be opened with JConsole from 64bit JDK on Windows 7 64bit, after I downloaded the 32bit JDK it worked.</p>\n"},{"comments":[{"owner":{"account_id":10298913,"reputation":2491,"user_id":7598188,"accept_rate":43,"display_name":"Manish Bansal"},"score":0,"creation_date":1614419604,"post_id":33994042,"comment_id":117383492,"body_markdown":"Worked for me. Not sure why these params are still required for java 8 even though oracle clearly says it dynamically attach jconsole to java process from java 6 onwards.","body":"Worked for me. Not sure why these params are still required for java 8 even though oracle clearly says it dynamically attach jconsole to java process from java 6 onwards."}],"tags":[],"owner":{"account_id":5707824,"reputation":779,"user_id":4510763,"accept_rate":50,"display_name":"Ben Cheng"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1448871153,"creation_date":1448871153,"answer_id":33994042,"question_id":4669203,"body_markdown":"Add the following to JAVA_OPTION\r\n\r\n    -Dcom.sun.management.jmxremote \r\n    -Dcom.sun.management.jmxremote.port=8086 \r\n    -Dcom.sun.management.jmxremote.ssl=false \r\n    -Dcom.sun.management.jmxremote.authenticate=false\r\n\r\nThen,\r\nUse JConsole to connecet remote session:\r\nlocalhost:8086","title":"Jconsole cannot connect to java processes running as Windows 7 Services","body":"<p>Add the following to JAVA_OPTION</p>\n\n<pre><code>-Dcom.sun.management.jmxremote \n-Dcom.sun.management.jmxremote.port=8086 \n-Dcom.sun.management.jmxremote.ssl=false \n-Dcom.sun.management.jmxremote.authenticate=false\n</code></pre>\n\n<p>Then,\nUse JConsole to connecet remote session:\nlocalhost:8086</p>\n"},{"tags":[],"owner":{"account_id":10014007,"reputation":1,"user_id":7405979,"display_name":"Don&#39;t Do That"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487950916,"creation_date":1487950916,"answer_id":42442665,"question_id":4669203,"body_markdown":"Change Environment Variable TEMP and Tmp to a different folder that you created.\r\nLike c:\\theTemp","title":"Jconsole cannot connect to java processes running as Windows 7 Services","body":"<p>Change Environment Variable TEMP and Tmp to a different folder that you created.\nLike c:\\theTemp</p>\n"},{"tags":[],"owner":{"account_id":10812177,"reputation":2398,"user_id":7952453,"display_name":"Gustavo Passini"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560267404,"creation_date":1560267404,"answer_id":56547218,"question_id":4669203,"body_markdown":"It might be a problem with the folder `%TMP%/hsperfdata_{USER_NAME}`.\r\nIn my case, it worked after I :\r\n\r\n- close all applications running over the JVM\r\n- delete the folder `%TMP%/hsperfdata_{USER_NAME}` (exemple: `C:/Temp/hsperfdata_MyUser`)\r\n- reopen JConsole (it recreates the folder)\r\n\r\nHope it helps. You can also take a look at this thread in [Oracle community](https://community.oracle.com/thread/1688522).","title":"Jconsole cannot connect to java processes running as Windows 7 Services","body":"<p>It might be a problem with the folder <code>%TMP%/hsperfdata_{USER_NAME}</code>.\nIn my case, it worked after I :</p>\n\n<ul>\n<li>close all applications running over the JVM</li>\n<li>delete the folder <code>%TMP%/hsperfdata_{USER_NAME}</code> (exemple: <code>C:/Temp/hsperfdata_MyUser</code>)</li>\n<li>reopen JConsole (it recreates the folder)</li>\n</ul>\n\n<p>Hope it helps. You can also take a look at this thread in <a href=\"https://community.oracle.com/thread/1688522\" rel=\"nofollow noreferrer\">Oracle community</a>.</p>\n"},{"tags":[],"owner":{"account_id":32670,"reputation":6689,"user_id":90802,"display_name":"charlie arehart"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696644089,"creation_date":1696644089,"answer_id":77248101,"question_id":4669203,"body_markdown":"Good news for others who may hit this, still in 2023: **it may be as simple as needing to run the command prompt &quot;as admin&quot;** before running `jconsole &lt;pid&gt;`. \r\n\r\nI found I got this error (&quot;`Invalid process id`&quot;, in the popup screen of jconsole) when trying to connect to a jvm which (like Neil) was running as a service (and which had it &quot;logon as&quot; value set to &quot;local system&quot;). Simply opening the cmd prompt as admin let jconsole (and other JVM tools) work fine.\r\n\r\nFWIW, note that if you don&#39;t use the pid argument, you won&#39;t see the process in the &quot;local process&quot; connection tab (even though you can connect to it if you provide it). Of course, if you enable JXM args in the jvm, then you can access it using the &quot;remote process&quot; tab.\r\n \r\nI appreciate that this is a very old question and things may have been different when Neil first wrote this in 2011. But I offer it in case it helps anyone else who may find the question here. I&#39;ve confirmed it with Java 8, 11, and 17.","title":"Jconsole cannot connect to java processes running as Windows 7 Services","body":"<p>Good news for others who may hit this, still in 2023: <strong>it may be as simple as needing to run the command prompt &quot;as admin&quot;</strong> before running <code>jconsole &lt;pid&gt;</code>.</p>\n<p>I found I got this error (&quot;<code>Invalid process id</code>&quot;, in the popup screen of jconsole) when trying to connect to a jvm which (like Neil) was running as a service (and which had it &quot;logon as&quot; value set to &quot;local system&quot;). Simply opening the cmd prompt as admin let jconsole (and other JVM tools) work fine.</p>\n<p>FWIW, note that if you don't use the pid argument, you won't see the process in the &quot;local process&quot; connection tab (even though you can connect to it if you provide it). Of course, if you enable JXM args in the jvm, then you can access it using the &quot;remote process&quot; tab.</p>\n<p>I appreciate that this is a very old question and things may have been different when Neil first wrote this in 2011. But I offer it in case it helps anyone else who may find the question here. I've confirmed it with Java 8, 11, and 17.</p>\n"}],"owner":{"account_id":41250,"reputation":1103,"user_id":119823,"accept_rate":61,"display_name":"Neil Wightman"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22347,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":7,"score":6,"last_activity_date":1696644089,"creation_date":1294838173,"question_id":4669203,"body_markdown":"We have a Java process which we run as a Windows service (using srvany).   It runs with Java 1.6 (1.6.0.23 at the moment).  \r\n\r\nIn the past (Windows XP), I could connect JConsole to the processes, on Windows 7 I cannot do this anymore.\r\n\r\nIf I run `jconsole &lt;pid&gt;` I get “Invalid process id:4488”. The services are running as SYSTEM user.\r\n\r\nIf I make the service run as my desktop user (using “Log On as This Account”) the services process ID appear in JConsole, but they are grayed out and I cannot connect.\r\n\r\nIs it impossible to dynamically connect to Java processes when they are running as a Windows 7 service?","title":"Jconsole cannot connect to java processes running as Windows 7 Services","body":"<p>We have a Java process which we run as a Windows service (using srvany).   It runs with Java 1.6 (1.6.0.23 at the moment).  </p>\n\n<p>In the past (Windows XP), I could connect JConsole to the processes, on Windows 7 I cannot do this anymore.</p>\n\n<p>If I run <code>jconsole &lt;pid&gt;</code> I get “Invalid process id:4488”. The services are running as SYSTEM user.</p>\n\n<p>If I make the service run as my desktop user (using “Log On as This Account”) the services process ID appear in JConsole, but they are grayed out and I cannot connect.</p>\n\n<p>Is it impossible to dynamically connect to Java processes when they are running as a Windows 7 service?</p>\n"},{"tags":["java","javafx","controlsfx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1696536849,"post_id":77239808,"comment_id":136169692,"body_markdown":"What JAvaFX/ControlsFX/JDK versions are you running? This is perfectly smooth for me (JavaFX 21, ControlsFX 11.1.2, Oracle JDK 20 on Mac OSX 12.3, Macbook Pro M1 Max).","body":"What JAvaFX/ControlsFX/JDK versions are you running? This is perfectly smooth for me (JavaFX 21, ControlsFX 11.1.2, Oracle JDK 20 on Mac OSX 12.3, Macbook Pro M1 Max)."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1696537266,"post_id":77239808,"comment_id":136169746,"body_markdown":"JavaFX 21. ControlsFX 11.1.2. Openjdk 20.0.2. Windows 11 Pro. i7-8700.","body":"JavaFX 21. ControlsFX 11.1.2. Openjdk 20.0.2. Windows 11 Pro. i7-8700."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1696540022,"post_id":77239808,"comment_id":136170136,"body_markdown":"I don&#39;t see any lagging with this code on Windows 10 (i7-7700) using Java 20.0.2 (Eclipse Adoptium), JavaFX 21.0.0, and ControlsFX 11.1.2.","body":"I don&#39;t see any lagging with this code on Windows 10 (i7-7700) using Java 20.0.2 (Eclipse Adoptium), JavaFX 21.0.0, and ControlsFX 11.1.2."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1696540188,"post_id":77239808,"comment_id":136170159,"body_markdown":"Strange. Maybe I should explain what I mean by lagging: The high and low thumbs are jumping up and down when moving the slider, this is not happening with the horizontal slider.","body":"Strange. Maybe I should explain what I mean by lagging: The high and low thumbs are jumping up and down when moving the slider, this is not happening with the horizontal slider."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1696540269,"post_id":77239808,"comment_id":136170164,"body_markdown":"I moved all thumbs around. They all moved smoothly. Perhaps you could add a GIF to your post showing the lag?","body":"I moved all thumbs around. They all moved smoothly. Perhaps you could add a GIF to your post showing the lag?"},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1696540374,"post_id":77239808,"comment_id":136170173,"body_markdown":"The thumbs also moves smoothly when I drag them separately but when I click on the track and moves both thumbs the thumbs jumps. I will look into visual documentation.","body":"The thumbs also moves smoothly when I drag them separately but when I click on the track and moves both thumbs the thumbs jumps. I will look into visual documentation."},{"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"score":0,"creation_date":1696543828,"post_id":77239808,"comment_id":136170680,"body_markdown":"I can notice this issue on my side. (JavaFX 21, JDK 17, ControlsFX 11.1.2). Infact it has another issue of abruptly increasing the range when dragging on track (only on vertical orientation). Horizontal orientation has no issues. Updated the gif in the question for visual reference.","body":"I can notice this issue on my side. (JavaFX 21, JDK 17, ControlsFX 11.1.2). Infact it has another issue of abruptly increasing the range when dragging on track (only on vertical orientation). Horizontal orientation has no issues. Updated the gif in the question for visual reference."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1696548108,"post_id":77239808,"comment_id":136171024,"body_markdown":"I hadn&#39;t tried to move the entire range, only individual thumbs. I can now also see the issue.","body":"I hadn&#39;t tried to move the entire range, only individual thumbs. I can now also see the issue."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1696582178,"post_id":77239808,"comment_id":136174421,"body_markdown":"I have also tested on another pc, with same specs, and on this pc the lagging is even worse.","body":"I have also tested on another pc, with same specs, and on this pc the lagging is even worse."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1696607848,"post_id":77239808,"comment_id":136179501,"body_markdown":"I had also not tested dragging the range. Interestingly I can see this behavior only when I&#39;m running the app on a higher resolution screen. (I currently have a lower-res external monitor connected to my MacBook. If I open the test app on the external monitor, it behaves fine. If I drag the window over to the high-res Retina display, I see the behavior described.)","body":"I had also not tested dragging the range. Interestingly I can see this behavior only when I&#39;m running the app on a higher resolution screen. (I currently have a lower-res external monitor connected to my MacBook. If I open the test app on the external monitor, it behaves fine. If I drag the window over to the high-res Retina display, I see the behavior described.)"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1696613654,"post_id":77239808,"comment_id":136180529,"body_markdown":"The only anomaly I see in the [source code](https://github.com/controlsfx/controlsfx/blob/master/controlsfx/src/main/java/impl/org/controlsfx/skin/RangeSliderSkin.java) for vertical range sliders is that the listeners to the low value and high value properties (lines 84-92) resize the range bar assuming it&#39;s a horizontal layout. I don&#39;t think that code should even be there; it should simply request a layout and let the `layoutChildren()` method determine the layout of the range bar.","body":"The only anomaly I see in the <a href=\"https://github.com/controlsfx/controlsfx/blob/master/controlsfx/src/main/java/impl/org/controlsfx/skin/RangeSliderSkin.java\" rel=\"nofollow noreferrer\">source code</a> for vertical range sliders is that the listeners to the low value and high value properties (lines 84-92) resize the range bar assuming it&#39;s a horizontal layout. I don&#39;t think that code should even be there; it should simply request a layout and let the <code>layoutChildren()</code> method determine the layout of the range bar."}],"answers":[{"comments":[{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1696665190,"post_id":77246796,"comment_id":136184995,"body_markdown":"Hi James_D. Thanks for looking into this. I&#39;m not sure how I can incorporate your fix. I use IntelliJ Idea with Maven (.pom file) for handling my dependencies.","body":"Hi James_D. Thanks for looking into this. I&#39;m not sure how I can incorporate your fix. I use IntelliJ Idea with Maven (.pom file) for handling my dependencies."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1696676643,"post_id":77246796,"comment_id":136185953,"body_markdown":"@droid The following worked for me. 1. Clone my fork of ControlsFX. 2. In IntelliJ, File -&gt; Open and find the build.gradle file from the cloned repo. Choose “open as project”. This will create a new IntelliJ project. 4. In that new project, Build -&gt; build controlsfx. That should create a jar file under the build folder. 5. Back in your own project, comment out the controlsfx dependency from you pom.xml. That should create an error in your module-info.java. 6. File -&gt; Project structure -&gt; External Libraries, and add the jar file created as a library.","body":"@droid The following worked for me. 1. Clone my fork of ControlsFX. 2. In IntelliJ, File -&gt; Open and find the build.gradle file from the cloned repo. Choose “open as project”. This will create a new IntelliJ project. 4. In that new project, Build -&gt; build controlsfx. That should create a jar file under the build folder. 5. Back in your own project, comment out the controlsfx dependency from you pom.xml. That should create an error in your module-info.java. 6. File -&gt; Project structure -&gt; External Libraries, and add the jar file created as a library."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1696676698,"post_id":77246796,"comment_id":136185960,"body_markdown":"@droid I’d be interested to see if the fix works on Windows. As mentioned, the original problem did not show up all the time for me.","body":"@droid I’d be interested to see if the fix works on Windows. As mentioned, the original problem did not show up all the time for me."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1696679869,"post_id":77246796,"comment_id":136186230,"body_markdown":"Thanks. Using what you described in above I can confirm that the Vertical  RangeSlider behaves like the horizontal RangeSlider - smooth and nice.","body":"Thanks. Using what you described in above I can confirm that the Vertical  RangeSlider behaves like the horizontal RangeSlider - smooth and nice."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1696681321,"post_id":77246796,"comment_id":136186375,"body_markdown":"Hmmm. Something strange is going on. I tried above method for my &quot;big/main&quot; project, above was just a RangeSlider test, and in this project I still see lagging :/","body":"Hmmm. Something strange is going on. I tried above method for my &quot;big/main&quot; project, above was just a RangeSlider test, and in this project I still see lagging :/"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1696682272,"post_id":77246796,"comment_id":136186446,"body_markdown":"@droid Double check you really are using the patch in the main project (you could just temporarily put a logging message in the range slider skin class, for example). The skin class is a bit of a mess imho, with layout calculations being directly performed in response to user input events, which is not really the way I’d do it. See if you can create an updated mre.","body":"@droid Double check you really are using the patch in the main project (you could just temporarily put a logging message in the range slider skin class, for example). The skin class is a bit of a mess imho, with layout calculations being directly performed in response to user input events, which is not really the way I’d do it. See if you can create an updated mre."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1696684367,"post_id":77246796,"comment_id":136186603,"body_markdown":"Edit: I think my &quot;new&quot; problem may be related to this &quot;fix&quot; that I also use for the RangeSlider: https://stackoverflow.com/questions/76889910/java-controlsfx-rangeslider-css-issue","body":"Edit: I think my &quot;new&quot; problem may be related to this &quot;fix&quot; that I also use for the RangeSlider: <a href=\"https://stackoverflow.com/questions/76889910/java-controlsfx-rangeslider-css-issue\" title=\"java controlsfx rangeslider css issue\">stackoverflow.com/questions/76889910/&hellip;</a>"},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1696684748,"post_id":77246796,"comment_id":136186633,"body_markdown":"Yes, I think above is why it is not working in my main main project - I was using the old RangeSliderSkin due to my fix with the High and Low thumbs. Thanks James_D. You got it :)","body":"Yes, I think above is why it is not working in my main main project - I was using the old RangeSliderSkin due to my fix with the High and Low thumbs. Thanks James_D. You got it :)"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1696944995,"post_id":77246796,"comment_id":136215327,"body_markdown":"@droid I updated my fork to also address the issue you linked above. If you Use the updated version of my ControlsFX fork, you should be able to remove the workaround.","body":"@droid I updated my fork to also address the issue you linked above. If you Use the updated version of my ControlsFX fork, you should be able to remove the workaround."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1696946640,"post_id":77246796,"comment_id":136215702,"body_markdown":"thanks, I saw that yesterday and removed the workaround :)","body":"thanks, I saw that yesterday and removed the workaround :)"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1699281251,"post_id":77246796,"comment_id":136508323,"body_markdown":"@droid Just to update, these pull requests are now merged into the master branch.","body":"@droid Just to update, these pull requests are now merged into the master branch."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1699303617,"post_id":77246796,"comment_id":136512515,"body_markdown":"Great news, thanks for your work.","body":"Great news, thanks for your work."}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":12,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1696643965,"creation_date":1696618672,"answer_id":77246796,"question_id":77239808,"body_markdown":"This is a bug in the `RangeSliderSkin`. The existing code includes the following listeners on the `lowValueProperty()` and `highValueProperty()`:\r\n\r\n        registerChangeListener(rangeSlider.lowValueProperty(), e -&gt; {\r\n            positionLowThumb();\r\n            rangeBar.resizeRelocate(rangeStart, rangeBar.getLayoutY(), \r\n            rangeEnd - rangeStart, rangeBar.getHeight());\r\n        });\r\n        registerChangeListener(rangeSlider.highValueProperty(), e -&gt; {\r\n            positionHighThumb();\r\n            rangeBar.resize(rangeEnd-rangeStart, rangeBar.getHeight());\r\n        });\r\n\r\nSee source code at https://github.com/controlsfx/controlsfx/blob/master/controlsfx/src/main/java/impl/org/controlsfx/skin/RangeSliderSkin.java\r\n\r\nThe calls to `rangeBar.resizeRelocate()` and `rangeBar.resize()` are making the assumption that the range slider has a horizontal orientation. (You can see this as only the `layoutX` and/or `width` of the bar can change. Both `layoutY` and `height` are set to their current values.) The incorrect layout of the range bar is rectified before the range bar itself is redrawn in the `layoutChildren()` method. However, I think under some circumstances additional drag events can be processed before `layoutChildren()` is invoked, causing incorrect calculations on the positions of the thumbs. \r\n\r\nI have a fork of the ControlsFX repository at https://github.com/james-d/controlsfx/tree/master which fixes this with\r\n\r\n        registerChangeListener(rangeSlider.lowValueProperty(), e -&gt; {\r\n            positionLowThumb();\r\n            if (isHorizontal()) {\r\n                rangeBar.resizeRelocate(rangeStart, rangeBar.getLayoutY(),\r\n                        rangeEnd - rangeStart, rangeBar.getHeight());\r\n            } else {\r\n                rangeBar.resize(rangeBar.getWidth(), rangeEnd - rangeStart);\r\n            }\r\n        });\r\n        registerChangeListener(rangeSlider.highValueProperty(), e -&gt; {\r\n            positionHighThumb();\r\n            if (isHorizontal()) {\r\n                rangeBar.resize(rangeEnd - rangeStart, rangeBar.getHeight());\r\n            } else {\r\n                rangeBar.resizeRelocate(rangeBar.getLayoutX(), rangeStart,\r\n                        rangeBar.getWidth(), rangeEnd - rangeStart);\r\n            }\r\n        });\r\n\r\nand have submitted this as [Issue 1521](https://github.com/controlsfx/controlsfx/issues/1521), as well as a [pull request](https://github.com/controlsfx/controlsfx/pull/1522).\r\n\r\nFeel free to clone and build my fork as a temporary measure until (and unless) the pull request is accepted.","title":"ControlsFX RangeSlider is laggy when orientation is vertical","body":"<p>This is a bug in the <code>RangeSliderSkin</code>. The existing code includes the following listeners on the <code>lowValueProperty()</code> and <code>highValueProperty()</code>:</p>\n<pre><code>    registerChangeListener(rangeSlider.lowValueProperty(), e -&gt; {\n        positionLowThumb();\n        rangeBar.resizeRelocate(rangeStart, rangeBar.getLayoutY(), \n        rangeEnd - rangeStart, rangeBar.getHeight());\n    });\n    registerChangeListener(rangeSlider.highValueProperty(), e -&gt; {\n        positionHighThumb();\n        rangeBar.resize(rangeEnd-rangeStart, rangeBar.getHeight());\n    });\n</code></pre>\n<p>See source code at <a href=\"https://github.com/controlsfx/controlsfx/blob/master/controlsfx/src/main/java/impl/org/controlsfx/skin/RangeSliderSkin.java\" rel=\"nofollow noreferrer\">https://github.com/controlsfx/controlsfx/blob/master/controlsfx/src/main/java/impl/org/controlsfx/skin/RangeSliderSkin.java</a></p>\n<p>The calls to <code>rangeBar.resizeRelocate()</code> and <code>rangeBar.resize()</code> are making the assumption that the range slider has a horizontal orientation. (You can see this as only the <code>layoutX</code> and/or <code>width</code> of the bar can change. Both <code>layoutY</code> and <code>height</code> are set to their current values.) The incorrect layout of the range bar is rectified before the range bar itself is redrawn in the <code>layoutChildren()</code> method. However, I think under some circumstances additional drag events can be processed before <code>layoutChildren()</code> is invoked, causing incorrect calculations on the positions of the thumbs.</p>\n<p>I have a fork of the ControlsFX repository at <a href=\"https://github.com/james-d/controlsfx/tree/master\" rel=\"nofollow noreferrer\">https://github.com/james-d/controlsfx/tree/master</a> which fixes this with</p>\n<pre><code>    registerChangeListener(rangeSlider.lowValueProperty(), e -&gt; {\n        positionLowThumb();\n        if (isHorizontal()) {\n            rangeBar.resizeRelocate(rangeStart, rangeBar.getLayoutY(),\n                    rangeEnd - rangeStart, rangeBar.getHeight());\n        } else {\n            rangeBar.resize(rangeBar.getWidth(), rangeEnd - rangeStart);\n        }\n    });\n    registerChangeListener(rangeSlider.highValueProperty(), e -&gt; {\n        positionHighThumb();\n        if (isHorizontal()) {\n            rangeBar.resize(rangeEnd - rangeStart, rangeBar.getHeight());\n        } else {\n            rangeBar.resizeRelocate(rangeBar.getLayoutX(), rangeStart,\n                    rangeBar.getWidth(), rangeEnd - rangeStart);\n        }\n    });\n</code></pre>\n<p>and have submitted this as <a href=\"https://github.com/controlsfx/controlsfx/issues/1521\" rel=\"nofollow noreferrer\">Issue 1521</a>, as well as a <a href=\"https://github.com/controlsfx/controlsfx/pull/1522\" rel=\"nofollow noreferrer\">pull request</a>.</p>\n<p>Feel free to clone and build my fork as a temporary measure until (and unless) the pull request is accepted.</p>\n"}],"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":77246796,"answer_count":1,"score":7,"last_activity_date":1696643965,"creation_date":1696531463,"question_id":77239808,"body_markdown":"When `setOrientation` is set to `Orientation.HORIZONTAL` the movement of the slider is very smooth, but when `setOrientation` is set to `Orientation.VERTICAL` the movement is laggy. \r\n\r\nBelow is minimal reproduction:\r\n\r\n```java\r\npackage org.example;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.geometry.Orientation;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.layout.FlowPane;\r\nimport javafx.scene.layout.HBox;\r\nimport javafx.scene.layout.Priority;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.stage.Stage;\r\nimport org.controlsfx.control.RangeSlider;\r\n\r\npublic class App extends Application {\r\n\r\n    @Override\r\n    public void start(Stage stage) {\r\n\r\n        RangeSlider rangeSliderVertical = new RangeSlider();\r\n        rangeSliderVertical.setOrientation(Orientation.VERTICAL);\r\n        rangeSliderVertical.setMinHeight(500);\r\n        rangeSliderVertical.setMax(100);\r\n        rangeSliderVertical.setMin(0);\r\n        rangeSliderVertical.setHighValue(100);\r\n        rangeSliderVertical.setLowValue(0);\r\n\r\n        RangeSlider rangeSliderHorizontal = new RangeSlider();\r\n        rangeSliderHorizontal.setMinWidth(500);\r\n        rangeSliderHorizontal.setMax(100);\r\n        rangeSliderHorizontal.setMin(0);\r\n        rangeSliderHorizontal.setHighValue(100);\r\n        rangeSliderHorizontal.setLowValue(0);\r\n        rangeSliderHorizontal.setOrientation(Orientation.HORIZONTAL);\r\n\r\n        FlowPane vBoxWithSliders = new FlowPane();\r\n        VBox.setVgrow(vBoxWithSliders, Priority.ALWAYS);\r\n        HBox.setHgrow(vBoxWithSliders, Priority.ALWAYS);\r\n\r\n        vBoxWithSliders.setAlignment(Pos.CENTER);\r\n        vBoxWithSliders.getChildren().addAll(rangeSliderVertical, rangeSliderHorizontal);\r\n\r\n        var scene = new Scene(vBoxWithSliders, 600, 600);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n\r\n}\r\n```\r\n\r\nAny hints on how to achieve smooth movement when RangeSlider is vertical?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/f7gvB.gif","title":"ControlsFX RangeSlider is laggy when orientation is vertical","body":"<p>When <code>setOrientation</code> is set to <code>Orientation.HORIZONTAL</code> the movement of the slider is very smooth, but when <code>setOrientation</code> is set to <code>Orientation.VERTICAL</code> the movement is laggy.</p>\n<p>Below is minimal reproduction:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport javafx.application.Application;\nimport javafx.geometry.Orientation;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.FlowPane;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.Priority;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\nimport org.controlsfx.control.RangeSlider;\n\npublic class App extends Application {\n\n    @Override\n    public void start(Stage stage) {\n\n        RangeSlider rangeSliderVertical = new RangeSlider();\n        rangeSliderVertical.setOrientation(Orientation.VERTICAL);\n        rangeSliderVertical.setMinHeight(500);\n        rangeSliderVertical.setMax(100);\n        rangeSliderVertical.setMin(0);\n        rangeSliderVertical.setHighValue(100);\n        rangeSliderVertical.setLowValue(0);\n\n        RangeSlider rangeSliderHorizontal = new RangeSlider();\n        rangeSliderHorizontal.setMinWidth(500);\n        rangeSliderHorizontal.setMax(100);\n        rangeSliderHorizontal.setMin(0);\n        rangeSliderHorizontal.setHighValue(100);\n        rangeSliderHorizontal.setLowValue(0);\n        rangeSliderHorizontal.setOrientation(Orientation.HORIZONTAL);\n\n        FlowPane vBoxWithSliders = new FlowPane();\n        VBox.setVgrow(vBoxWithSliders, Priority.ALWAYS);\n        HBox.setHgrow(vBoxWithSliders, Priority.ALWAYS);\n\n        vBoxWithSliders.setAlignment(Pos.CENTER);\n        vBoxWithSliders.getChildren().addAll(rangeSliderVertical, rangeSliderHorizontal);\n\n        var scene = new Scene(vBoxWithSliders, 600, 600);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n}\n</code></pre>\n<p>Any hints on how to achieve smooth movement when RangeSlider is vertical?</p>\n<p><a href=\"https://i.stack.imgur.com/f7gvB.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f7gvB.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","spring-cloud","zipkin","micrometer-tracing"],"answers":[{"tags":[],"owner":{"account_id":21849828,"reputation":364,"user_id":16142058,"display_name":"The Dark Knight"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696643467,"creation_date":1696643467,"answer_id":77248074,"question_id":77233814,"body_markdown":"First, I try to check `management.tracing.sampling.probability=1.0`, and it raise a error:\r\n```\r\nCannot resolve configuration property &#39;management.tracing.sampling.probability&#39; \r\n```\r\nI really don&#39;t understand why it like that, after that I found the different, there are 2 denpendencie, they look pretty similar:\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        ...................\r\n        ...................\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nI try to reach out the spring docs: [`actuator.micrometer-tracing.tracer-implementations`](https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/html/actuator.html#actuator.micrometer-tracing.tracer-implementations) and I realize the dependency I actually need is `spring-boot-starter-actuator`\r\n\r\nI insert three new dependencies from docs:\r\n```properties\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n            &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nTo summary, we will use these dependencies for tracing http request with Micrometer &amp; Zipkin.\r\n\r\n - spring-boot-starter-actuator\r\n - micrometer-tracing-bridge-otel\r\n - opentelemetry-exporter-zipkin\r\n\r\n","title":"How to trace HTTP requests in Spring Boot 3 with Micrometer &amp; Zipkin","body":"<p>First, I try to check <code>management.tracing.sampling.probability=1.0</code>, and it raise a error:</p>\n<pre><code>Cannot resolve configuration property 'management.tracing.sampling.probability' \n</code></pre>\n<p>I really don't understand why it like that, after that I found the different, there are 2 denpendencie, they look pretty similar:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        ...................\n        ...................\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I try to reach out the spring docs: <a href=\"https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/html/actuator.html#actuator.micrometer-tracing.tracer-implementations\" rel=\"nofollow noreferrer\"><code>actuator.micrometer-tracing.tracer-implementations</code></a> and I realize the dependency I actually need is <code>spring-boot-starter-actuator</code></p>\n<p>I insert three new dependencies from docs:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n            &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>To summary, we will use these dependencies for tracing http request with Micrometer &amp; Zipkin.</p>\n<ul>\n<li>spring-boot-starter-actuator</li>\n<li>micrometer-tracing-bridge-otel</li>\n<li>opentelemetry-exporter-zipkin</li>\n</ul>\n"}],"owner":{"account_id":21849828,"reputation":364,"user_id":16142058,"display_name":"The Dark Knight"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":776,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77248074,"answer_count":1,"score":1,"last_activity_date":1696643467,"creation_date":1696469609,"question_id":77233814,"body_markdown":"My purpose is to trace every request to my system. I watched 2 video below on Youtube to config Micrometer &amp; Zipkin for tracing.\r\n\r\n- [Implementing Distributed Tracing in Microservices with Spring Boot 3.0, Micrometer, and Zipkin](https://www.youtube.com/watch?v=UgirTJiBkV4)\r\n- [Java - Spring Boot 3: Tracing de Microservices con Micrometer y Zipkin](https://www.youtube.com/watch?v=cbQHsNEUs_k)\r\n\r\nBut, when I access `http://localhost:9411/zipkin/`, it worked abnormally and make me confused.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/ftYQI.png)](https://i.stack.imgur.com/ftYQI.png) \r\n\r\nSo I have some questions about it:\r\n\r\n1. At first, I never perform any requests, why there are so many request on Zipkin dashboard?\r\n2. I use Postman to perform three requests (1 from `order-service`, 2 from `product-service`), why it only show the requests from `order-service` like this\r\n[![enter image description here](https://i.stack.imgur.com/RUMlr.png)](https://i.stack.imgur.com/RUMlr.png)\r\n3. Why the spans (Zipkin dashboard) always is 1. Although every requests must go through `api-gateway service` first, it is not the same as video 1.   \r\n\r\nFor Micrometer config, I reference [Micrometer and Zipkin: How to Trace HTTP Requests in Spring Boot 3](https://www.appsdeveloperblog.com/micrometer-and-zipkin-in-spring-boot/#:~:text=By%20default%2C%20Micrometer%20only%20traces,set%20the%20probability%20to%201.0.)\r\n\r\nI insert `management.tracing.sampling.probability=1.0` to each `application.properties` file and these dependencies below to each pom.xml\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;micrometer-observation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;micrometer-tracing-bridge-brave&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.zipkin.reporter2&lt;/groupId&gt;\r\n            &lt;artifactId&gt;zipkin-reporter-brave&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```  \r\n\r\nThis is my architecture system:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/528eQ.png)](https://i.stack.imgur.com/528eQ.png)","title":"How to trace HTTP requests in Spring Boot 3 with Micrometer &amp; Zipkin","body":"<p>My purpose is to trace every request to my system. I watched 2 video below on Youtube to config Micrometer &amp; Zipkin for tracing.</p>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=UgirTJiBkV4\" rel=\"nofollow noreferrer\">Implementing Distributed Tracing in Microservices with Spring Boot 3.0, Micrometer, and Zipkin</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=cbQHsNEUs_k\" rel=\"nofollow noreferrer\">Java - Spring Boot 3: Tracing de Microservices con Micrometer y Zipkin</a></li>\n</ul>\n<p>But, when I access <code>http://localhost:9411/zipkin/</code>, it worked abnormally and make me confused.</p>\n<p><a href=\"https://i.stack.imgur.com/ftYQI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ftYQI.png\" alt=\"enter image description here\" /></a></p>\n<p>So I have some questions about it:</p>\n<ol>\n<li>At first, I never perform any requests, why there are so many request on Zipkin dashboard?</li>\n<li>I use Postman to perform three requests (1 from <code>order-service</code>, 2 from <code>product-service</code>), why it only show the requests from <code>order-service</code> like this\n<a href=\"https://i.stack.imgur.com/RUMlr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RUMlr.png\" alt=\"enter image description here\" /></a></li>\n<li>Why the spans (Zipkin dashboard) always is 1. Although every requests must go through <code>api-gateway service</code> first, it is not the same as video 1.</li>\n</ol>\n<p>For Micrometer config, I reference <a href=\"https://www.appsdeveloperblog.com/micrometer-and-zipkin-in-spring-boot/#:%7E:text=By%20default%2C%20Micrometer%20only%20traces,set%20the%20probability%20to%201.0.\" rel=\"nofollow noreferrer\">Micrometer and Zipkin: How to Trace HTTP Requests in Spring Boot 3</a></p>\n<p>I insert <code>management.tracing.sampling.probability=1.0</code> to each <code>application.properties</code> file and these dependencies below to each pom.xml</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-observation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-tracing-bridge-brave&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.zipkin.reporter2&lt;/groupId&gt;\n            &lt;artifactId&gt;zipkin-reporter-brave&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>This is my architecture system:</p>\n<p><a href=\"https://i.stack.imgur.com/528eQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/528eQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","intellij-idea","handler"],"comments":[{"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"score":0,"creation_date":1503048900,"post_id":45751724,"comment_id":78463631,"body_markdown":"Is the &quot;never used&quot; message appearing on the interface/parent or on the subclass?","body":"Is the &quot;never used&quot; message appearing on the interface/parent or on the subclass?"},{"owner":{"account_id":2356843,"reputation":515,"user_id":2064459,"display_name":"Nashev"},"score":0,"creation_date":1619814192,"post_id":45751724,"comment_id":119027498,"body_markdown":"If these methods are also annotated somehow, You can suppress this warning by that annotation through Alt+Enter and related additional action ( see the answer at  https://stackoverflow.com/questions/5283972/telling-intellij-idea-which-methods-not-to-identify-as-unused/5284371#5284371 )","body":"If these methods are also annotated somehow, You can suppress this warning by that annotation through Alt+Enter and related additional action ( see the answer at  <a href=\"https://stackoverflow.com/questions/5283972/telling-intellij-idea-which-methods-not-to-identify-as-unused/5284371#5284371\" title=\"telling intellij idea which methods not to identify as unused\">stackoverflow.com/questions/5283972/&hellip;</a> )"}],"answers":[{"comments":[{"owner":{"account_id":7385237,"reputation":2762,"user_id":5620472,"accept_rate":23,"display_name":"user5620472"},"score":2,"creation_date":1503051073,"post_id":45753335,"comment_id":78465122,"body_markdown":"There are methods that are not really used and I want to see information about them. But these methods are not explicitly called but used. They receive messages.","body":"There are methods that are not really used and I want to see information about them. But these methods are not explicitly called but used. They receive messages."},{"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"score":0,"creation_date":1503051208,"post_id":45753335,"comment_id":78465222,"body_markdown":"According to IntelliJ&#39;s &quot;Unused declaration&quot; inspection these methods are unused. If you disagree with IntelliJ&#39;s inspection then you can disable it, see `Preferences &gt; Editor &gt; Inspections &gt; Unused Declaration`. However, it is only an information message, it does not indicate an error so you could also just ignore it.","body":"According to IntelliJ&#39;s &quot;Unused declaration&quot; inspection these methods are unused. If you disagree with IntelliJ&#39;s inspection then you can disable it, see <code>Preferences &gt; Editor &gt; Inspections &gt; Unused Declaration</code>. However, it is only an information message, it does not indicate an error so you could also just ignore it."},{"owner":{"account_id":7385237,"reputation":2762,"user_id":5620472,"accept_rate":23,"display_name":"user5620472"},"score":0,"creation_date":1503053175,"post_id":45753335,"comment_id":78466598,"body_markdown":"I understand it. Perhaps there is an annotation or a way to mark methods that work like handler","body":"I understand it. Perhaps there is an annotation or a way to mark methods that work like handler"},{"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"score":3,"creation_date":1503053651,"post_id":45753335,"comment_id":78466905,"body_markdown":"You can add the `@SuppressWarnings(&quot;unused&quot;)` annotation to this method.","body":"You can add the <code>@SuppressWarnings(&quot;unused&quot;)</code> annotation to this method."},{"owner":{"account_id":2359837,"reputation":285,"user_id":2896730,"accept_rate":62,"display_name":"Ben Kushigian"},"score":0,"creation_date":1622339102,"post_id":45753335,"comment_id":119763702,"body_markdown":"or (c) these are part of an api that is externally visible to projects depending on your lib. Then again, if you write tests for these the warnings will go away. The issue I run into is that every time I try to commit something I get &quot;you have 7 warnings in this file...are you sure you&#39;d like to commit?&quot; And there could be a valid warning that shows up that I don&#39;t notice because of the unused method warnings.","body":"or (c) these are part of an api that is externally visible to projects depending on your lib. Then again, if you write tests for these the warnings will go away. The issue I run into is that every time I try to commit something I get &quot;you have 7 warnings in this file...are you sure you&#39;d like to commit?&quot; And there could be a valid warning that shows up that I don&#39;t notice because of the unused method warnings."}],"tags":[],"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"comment_count":5,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1696643094,"creation_date":1503048860,"answer_id":45753335,"question_id":45751724,"body_markdown":"IntelliJ is telling you that a public method on your class is unused. It&#39;s not an error, it&#39;s just an information message.\r\n\r\nYou could think of it as a gentle hint: by writing a public method you have implied that something should use that method but IntelliJ is unable to find any usages of that method so it warns you just in case either (a) the method scope should be reduced or (b) you have forgotten to write the code which is intended to invoke this method.\r\n\r\nYou can switch this behaviour on/off from `Preferences &gt; Editor &gt; Inspections &gt; Unused Declaration` \r\n\r\n[![enter image description here][1]][1]\r\n\r\nYou can also disable this inspection on a specific method/class by [annotating][2] with [`@SuppressWarnings(&quot;unused&quot;)`][3].\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZBJs3.png\r\n  [2]: https://docs.oracle.com/javase/tutorial/java/annotations/\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/SuppressWarnings.html","title":"IntelliJ IDE disable &#39;is never used&#39; inspection","body":"<p>IntelliJ is telling you that a public method on your class is unused. It's not an error, it's just an information message.</p>\n<p>You could think of it as a gentle hint: by writing a public method you have implied that something should use that method but IntelliJ is unable to find any usages of that method so it warns you just in case either (a) the method scope should be reduced or (b) you have forgotten to write the code which is intended to invoke this method.</p>\n<p>You can switch this behaviour on/off from <code>Preferences &gt; Editor &gt; Inspections &gt; Unused Declaration</code></p>\n<p><a href=\"https://i.stack.imgur.com/ZBJs3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZBJs3.png\" alt=\"enter image description here\" /></a></p>\n<p>You can also disable this inspection on a specific method/class by <a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/\" rel=\"nofollow noreferrer\">annotating</a> with <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/SuppressWarnings.html\" rel=\"nofollow noreferrer\"><code>@SuppressWarnings(&quot;unused&quot;)</code></a>.</p>\n"}],"owner":{"account_id":7385237,"reputation":2762,"user_id":5620472,"accept_rate":23,"display_name":"user5620472"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14915,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"closed_date":1559066482,"answer_count":1,"score":7,"last_activity_date":1696643094,"creation_date":1503043900,"question_id":45751724,"body_markdown":"I extends `MessageCracker` Class and override methods(Handlers)\r\n\r\n    public void onMessage(ExecutionReport execRep, SessionID sessionID)\r\n    ...\r\n    public void onMessage(BusinessMessageReject message, SessionID sessionID)\r\n    ...\r\n    public void onMessage(Quote quote, SessionID sessionID)\r\n\r\neach method catch messages extend `Message` - ExecutionReport, BusinessMessageReject, Quote etc.\r\n\r\nAll work fine but IntellijIDE say on this methods - \r\n`Method &#39;onMessage(quickfix.fix44.Quote, quickfix.SessionID)&#39; is never used`\r\n\r\nHow can I fix it?","title":"IntelliJ IDE disable &#39;is never used&#39; inspection","body":"<p>I extends <code>MessageCracker</code> Class and override methods(Handlers)</p>\n\n<pre><code>public void onMessage(ExecutionReport execRep, SessionID sessionID)\n...\npublic void onMessage(BusinessMessageReject message, SessionID sessionID)\n...\npublic void onMessage(Quote quote, SessionID sessionID)\n</code></pre>\n\n<p>each method catch messages extend <code>Message</code> - ExecutionReport, BusinessMessageReject, Quote etc.</p>\n\n<p>All work fine but IntellijIDE say on this methods - \n<code>Method 'onMessage(quickfix.fix44.Quote, quickfix.SessionID)' is never used</code></p>\n\n<p>How can I fix it?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":6,"creation_date":1696481909,"post_id":77234306,"comment_id":136159065,"body_markdown":"`logic` is a synchronized **instance** method. That&#39;s the same as doing `synchronized (this) { /* method body */ }`. You have three different threads synchronizing on three different objects (themselves). You have to synchronize on the same object if you want mutual exclusion.","body":"<code>logic</code> is a synchronized <b>instance</b> method. That&#39;s the same as doing <code>synchronized (this) { &#47;* method body *&#47; }</code>. You have three different threads synchronizing on three different objects (themselves). You have to synchronize on the same object if you want mutual exclusion."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1696482146,"post_id":77234306,"comment_id":136159080,"body_markdown":"(If the method was `static synchronized`, the threads would all synchronize on the `Class` object and your code would exhibit mutual exclusion.)","body":"(If the method was <code>static synchronized</code>, the threads would all synchronize on the <code>Class</code> object and your code would exhibit mutual exclusion.)"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1696482306,"post_id":77234306,"comment_id":136159096,"body_markdown":"(Also ... extending `Thread` is generally a bad idea.  A better idea is to provide a `Runnable` to `Thread::start`.  Better still, use an `ExecutorService` instance to manage the thread life-cycle.)","body":"(Also ... extending <code>Thread</code> is generally a bad idea.  A better idea is to provide a <code>Runnable</code> to <code>Thread::start</code>.  Better still, use an <code>ExecutorService</code> instance to manage the thread life-cycle.)"}],"answers":[{"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1696486642,"post_id":77234391,"comment_id":136159537,"body_markdown":"Note for questioner: This works because `MyThread.class` (a class literal) always returns the same `java.lang.Class` object (ignoring class loader shenanigans), meaning any thread trying to enter this critical section is synchronizing on the _same_ object.","body":"Note for questioner: This works because <code>MyThread.class</code> (a class literal) always returns the same <code>java.lang.Class</code> object (ignoring class loader shenanigans), meaning any thread trying to enter this critical section is synchronizing on the <i>same</i> object."}],"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696487153,"creation_date":1696482828,"answer_id":77234391,"question_id":77234306,"body_markdown":"One way to achieve your desired behavior is to synchronize the method on the class object.\r\n\r\n    public void logic() {\r\n        synchronized (MyThread.class) {\r\n            // Your logic\r\n        }\r\n    }\r\n\r\nAnother way is to use a static object as a lock at class level.\r\n\r\n    public class MyThread extends Thread {\r\n\r\n        private static Object CLASS_LEVEL_LOCK = new Object();\r\n\r\n        public void logic() {\r\n            synchronized (CLASS_LEVEL_LOCK) {\r\n                // Your logic\r\n            }\r\n        }\r\n","title":"Java Multithreading - Thread2 enters syncronised method even when thread1 is inside it","body":"<p>One way to achieve your desired behavior is to synchronize the method on the class object.</p>\n<pre><code>public void logic() {\n    synchronized (MyThread.class) {\n        // Your logic\n    }\n}\n</code></pre>\n<p>Another way is to use a static object as a lock at class level.</p>\n<pre><code>public class MyThread extends Thread {\n\n    private static Object CLASS_LEVEL_LOCK = new Object();\n\n    public void logic() {\n        synchronized (CLASS_LEVEL_LOCK) {\n            // Your logic\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1696486463,"post_id":77234478,"comment_id":136159514,"body_markdown":"Note for questioner: This works because `logic` is an instance method of `Threads`, and the way this code is implemented makes it so all three threads are synchronizing on the same `Threads` instance.","body":"Note for questioner: This works because <code>logic</code> is an instance method of <code>Threads</code>, and the way this code is implemented makes it so all three threads are synchronizing on the same <code>Threads</code> instance."}],"tags":[],"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1696639753,"creation_date":1696484167,"answer_id":77234478,"question_id":77234306,"body_markdown":"Here is way to program your idea.\r\n\r\nThe program starts three threads on a single runnable object (which has some synchronized code).\r\n\r\n    public class Threads {\r\n    \r\n    \tprivate synchronized void logic() {\r\n    \t\ttry {\r\n    \t\t\tThread.sleep(5000);\r\n    \t\t} catch (InterruptedException e) {\r\n    \t\t\tSystem.out.println(e);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;Ending &quot; + Thread.currentThread().getName());\r\n    \t}\r\n    \t\r\n    \tprivate Runnable r = new Runnable () {\r\n    \t\tpublic void run() {\r\n    \t\t\tSystem.out.println(&quot;Starting &quot; + Thread.currentThread().getName());\r\n    \t\t\tlogic();\r\n    \t\t}\r\n    \t};\r\n    \t\t\r\n    \tpublic static void main(String [] args) {\r\n    \t\tnew Threads().runner();\r\n    \t}\r\n    \t\r\n    \tprivate void runner() {\r\n    \t\tThread t1 = new Thread(r, &quot;T1&quot;);\r\n    \t\tThread t2 = new Thread(r, &quot;T2&quot;);\r\n    \t\tThread t3 = new Thread(r, &quot;T3&quot;);\r\n    \t\tt1.start(); \r\n    \t\tt2.start(); \r\n    \t\tt3.start();\r\n    \t}\r\n    }\r\n\r\nWhat is [Runnable][1]?\r\n\r\n&gt; The Runnable interface should be implemented by any class whose\r\n&gt; instances are intended to be executed by a thread. The class must\r\n&gt; define a method of no arguments called run.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/lang/Runnable.html\r\n\r\n&lt;hr&gt;\r\n\r\nThe same result with different programming:\r\n\r\n    public class Threads {\r\n    \r\n    \tpublic static void main(String [] args) {\r\n    \t\r\n    \t\t// Single instance of runnable object whose run method is\r\n    \t\t// invoked by a thread object with this runnable as a target.\r\n    \t\tMyRunnable r = new MyRunnable();\r\n    \t\t\r\n    \t\t// Multiple threads created and started with the same runnable as target\r\n    \t\tThread t1 = new Thread(r, &quot;T1&quot;);\r\n    \t\tThread t2 = new Thread(r, &quot;T2&quot;);\r\n    \t\tThread t3 = new Thread(r, &quot;T3&quot;);\r\n    \t\tt1.start(); \r\n    \t\tt2.start(); \r\n    \t\tt3.start();\r\n    \t}\r\n    }\r\n    \r\n    class MyRunnable implements Runnable {\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tSystem.out.println(&quot;Starting &quot; + Thread.currentThread().getName());\r\n    \t\tlogic();\r\n    \t}\r\n    \t\r\n    \tprivate synchronized void logic() {\r\n    \t\ttry {\r\n    \t\t\tThread.sleep(6000);\r\n    \t\t} catch (InterruptedException e) {\r\n    \t\t\tSystem.out.println(e);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;Ending &quot; + Thread.currentThread().getName());\r\n    \t}\r\n    }","title":"Java Multithreading - Thread2 enters syncronised method even when thread1 is inside it","body":"<p>Here is way to program your idea.</p>\n<p>The program starts three threads on a single runnable object (which has some synchronized code).</p>\n<pre><code>public class Threads {\n\n    private synchronized void logic() {\n        try {\n            Thread.sleep(5000);\n        } catch (InterruptedException e) {\n            System.out.println(e);\n        }\n        System.out.println(&quot;Ending &quot; + Thread.currentThread().getName());\n    }\n    \n    private Runnable r = new Runnable () {\n        public void run() {\n            System.out.println(&quot;Starting &quot; + Thread.currentThread().getName());\n            logic();\n        }\n    };\n        \n    public static void main(String [] args) {\n        new Threads().runner();\n    }\n    \n    private void runner() {\n        Thread t1 = new Thread(r, &quot;T1&quot;);\n        Thread t2 = new Thread(r, &quot;T2&quot;);\n        Thread t3 = new Thread(r, &quot;T3&quot;);\n        t1.start(); \n        t2.start(); \n        t3.start();\n    }\n}\n</code></pre>\n<p>What is <a href=\"https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/lang/Runnable.html\" rel=\"nofollow noreferrer\">Runnable</a>?</p>\n<blockquote>\n<p>The Runnable interface should be implemented by any class whose\ninstances are intended to be executed by a thread. The class must\ndefine a method of no arguments called run.</p>\n</blockquote>\n<hr>\n<p>The same result with different programming:</p>\n<pre><code>public class Threads {\n\n    public static void main(String [] args) {\n    \n        // Single instance of runnable object whose run method is\n        // invoked by a thread object with this runnable as a target.\n        MyRunnable r = new MyRunnable();\n        \n        // Multiple threads created and started with the same runnable as target\n        Thread t1 = new Thread(r, &quot;T1&quot;);\n        Thread t2 = new Thread(r, &quot;T2&quot;);\n        Thread t3 = new Thread(r, &quot;T3&quot;);\n        t1.start(); \n        t2.start(); \n        t3.start();\n    }\n}\n\nclass MyRunnable implements Runnable {\n\n    @Override\n    public void run() {\n        System.out.println(&quot;Starting &quot; + Thread.currentThread().getName());\n        logic();\n    }\n    \n    private synchronized void logic() {\n        try {\n            Thread.sleep(6000);\n        } catch (InterruptedException e) {\n            System.out.println(e);\n        }\n        System.out.println(&quot;Ending &quot; + Thread.currentThread().getName());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20371992,"reputation":5,"user_id":14944022,"display_name":"Asif Sk"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696489960,"accepted_answer_id":77234478,"answer_count":2,"score":0,"last_activity_date":1696639753,"creation_date":1696481319,"question_id":77234306,"body_markdown":"\r\n```\r\npublic class MyThread extends Thread {\r\n    public synchronized void logic() {\r\n        System.out.println(&quot;Thread started&quot;);\r\n        System.out.println(Thread.currentThread().getName());\r\n\r\n        try {\r\n            Thread.sleep(3000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        System.out.println(&quot;Thread ended&quot;);\r\n    }\r\n    \r\n    public void run() {\r\n        System.out.println(&quot;inside run method&quot;);\r\n        logic();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        MyThread thread1 = new MyThread();\r\n        MyThread thread2 = new MyThread();\r\n        MyThread thread3 = new MyThread();\r\n\r\n        thread1.start();\r\n        thread2.start();\r\n        thread3.start();\r\n    }\r\n}\r\n```\r\n\r\n\r\nOutput for above code is as follows\r\n```\r\ninside run method\r\ninside run method\r\nThread started\r\ninside run method\r\nThread-1\r\nThread started\r\nThread-0\r\nThread started\r\nThread-2\r\n&lt;&lt;&lt;After few seconds&gt;&gt;&gt;\r\nThread ended\r\nThread ended\r\nThread ended\r\n```\r\n\r\nAs per my understanding, any/all threads can enter into run method (when thread.start()) is called.\r\nlogic method is syncronised. When one thread is in syncronized method, other threads should wait untill the thread inside syncronized method is executed completely.\r\n\r\n\r\nIn output ,\r\nIn line no 3 , I can see some thread is has entered to logic method (let say that is thread1) which is syncronised. so *Thread started* is printed. This thread has not ended. \r\nAt line no 7 , we can see *Thread started* is printed again. that means other thread (let say thread0) also entered logic method which is syncronised.\r\n\r\nNow my question is, logic method has been executed by thread1, how can thread2 execute logic method before thread1 executes it completely\r\n\r\n\r\n\r\nThe result should be like this:\r\n\r\nThread2(assume) will enter logic method only if no threads are currently in logic method","title":"Java Multithreading - Thread2 enters syncronised method even when thread1 is inside it","body":"<pre><code>public class MyThread extends Thread {\n    public synchronized void logic() {\n        System.out.println(&quot;Thread started&quot;);\n        System.out.println(Thread.currentThread().getName());\n\n        try {\n            Thread.sleep(3000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        System.out.println(&quot;Thread ended&quot;);\n    }\n    \n    public void run() {\n        System.out.println(&quot;inside run method&quot;);\n        logic();\n    }\n\n    public static void main(String[] args) {\n        MyThread thread1 = new MyThread();\n        MyThread thread2 = new MyThread();\n        MyThread thread3 = new MyThread();\n\n        thread1.start();\n        thread2.start();\n        thread3.start();\n    }\n}\n</code></pre>\n<p>Output for above code is as follows</p>\n<pre><code>inside run method\ninside run method\nThread started\ninside run method\nThread-1\nThread started\nThread-0\nThread started\nThread-2\n&lt;&lt;&lt;After few seconds&gt;&gt;&gt;\nThread ended\nThread ended\nThread ended\n</code></pre>\n<p>As per my understanding, any/all threads can enter into run method (when thread.start()) is called.\nlogic method is syncronised. When one thread is in syncronized method, other threads should wait untill the thread inside syncronized method is executed completely.</p>\n<p>In output ,\nIn line no 3 , I can see some thread is has entered to logic method (let say that is thread1) which is syncronised. so <em>Thread started</em> is printed. This thread has not ended.\nAt line no 7 , we can see <em>Thread started</em> is printed again. that means other thread (let say thread0) also entered logic method which is syncronised.</p>\n<p>Now my question is, logic method has been executed by thread1, how can thread2 execute logic method before thread1 executes it completely</p>\n<p>The result should be like this:</p>\n<p>Thread2(assume) will enter logic method only if no threads are currently in logic method</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":137166,"reputation":1740,"user_id":341170,"display_name":"Mohit"},"score":1,"creation_date":1446116745,"post_id":33411685,"comment_id":54614897,"body_markdown":"verify(mock).someMethod(sampleCaptor.capture(), false)); is working for me. I am using mockito-1.9.0.","body":"verify(mock).someMethod(sampleCaptor.capture(), false)); is working for me. I am using mockito-1.9.0."},{"owner":{"account_id":2232407,"reputation":4006,"user_id":1969663,"display_name":"Ruben"},"score":1,"creation_date":1446126727,"post_id":33411685,"comment_id":54621829,"body_markdown":"Could you also post the declaration of `sampleCaptor`?","body":"Could you also post the declaration of <code>sampleCaptor</code>?"},{"owner":{"account_id":2728269,"reputation":8653,"user_id":2352699,"accept_rate":36,"display_name":"Fred Porci&#250;ncula"},"score":1,"creation_date":1446138431,"post_id":33411685,"comment_id":54630401,"body_markdown":"Please, provide us an [MCVE](http://stackoverflow.com/help/mcve) and explain what exactly goes wrong.","body":"Please, provide us an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> and explain what exactly goes wrong."}],"answers":[{"comments":[{"owner":{"account_id":3120461,"reputation":1581,"user_id":2640327,"accept_rate":73,"display_name":"Thanh Duy Ngo"},"score":0,"creation_date":1446705883,"post_id":33443052,"comment_id":54857201,"body_markdown":"Hi. Thank you for your help. I found the error that I made. I create a mock for someMethod but call true boolean, that&#39;s why it could not run.","body":"Hi. Thank you for your help. I found the error that I made. I create a mock for someMethod but call true boolean, that&#39;s why it could not run."},{"owner":{"account_id":357362,"reputation":2080,"user_id":697480,"display_name":"Adam Wise"},"score":0,"creation_date":1696610630,"post_id":33443052,"comment_id":136180021,"body_markdown":"The Matchers.eq is now deprecated. ArgumentMatchers.eq works the same way though.","body":"The Matchers.eq is now deprecated. ArgumentMatchers.eq works the same way though."},{"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"score":1,"creation_date":1696638119,"post_id":33443052,"comment_id":136183450,"body_markdown":"@AdamWise I&#39;ve updated the code and added a note.","body":"@AdamWise I&#39;ve updated the code and added a note."}],"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"comment_count":3,"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1696638098,"creation_date":1446231294,"answer_id":33443052,"question_id":33411685,"body_markdown":"You have it right the second way:\r\n\r\n```java\r\nverify(mock).someMethod(\r\n    sampleCaptor.capture(),\r\n    ArgumentMatchers.eq(false));\r\n```\r\n\r\nWhen using matchers (including ArgumentCaptor.capture), you have to use a matcher for every value, because [matchers work via side-effects](https://stackoverflow.com/q/22822512/1426891).\r\n\r\nIf the above doesn&#39;t work, you may be misusing matchers earlier in the method. It is sometimes helpful to explicitly call `Mockito.validateMockitoUsage()` immediately before your call to `verify`, to ensure that there&#39;s nothing wrong with Mockito&#39;s internal state. (Additional information about how it &quot;does not work&quot;, including a minimal reproducible example, may be helpful in solving your specific case.)\r\n\r\n---\r\n\r\nAs Adam pointed out in the comments, `org.mockito.Matchers` (and `org.mockito.Mockito`) technically still work to get to `eq` and other matchers, but `org.mockito.ArgumentMatchers` is preferred (as used above). You can use `import static` to use them bare as `eq(false)` to hide the full package name.","title":"Mockito.verify method contain boolean and argument captor","body":"<p>You have it right the second way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>verify(mock).someMethod(\n    sampleCaptor.capture(),\n    ArgumentMatchers.eq(false));\n</code></pre>\n<p>When using matchers (including ArgumentCaptor.capture), you have to use a matcher for every value, because <a href=\"https://stackoverflow.com/q/22822512/1426891\">matchers work via side-effects</a>.</p>\n<p>If the above doesn't work, you may be misusing matchers earlier in the method. It is sometimes helpful to explicitly call <code>Mockito.validateMockitoUsage()</code> immediately before your call to <code>verify</code>, to ensure that there's nothing wrong with Mockito's internal state. (Additional information about how it &quot;does not work&quot;, including a minimal reproducible example, may be helpful in solving your specific case.)</p>\n<hr />\n<p>As Adam pointed out in the comments, <code>org.mockito.Matchers</code> (and <code>org.mockito.Mockito</code>) technically still work to get to <code>eq</code> and other matchers, but <code>org.mockito.ArgumentMatchers</code> is preferred (as used above). You can use <code>import static</code> to use them bare as <code>eq(false)</code> to hide the full package name.</p>\n"}],"owner":{"account_id":3120461,"reputation":1581,"user_id":2640327,"accept_rate":73,"display_name":"Thanh Duy Ngo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18009,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":33443052,"answer_count":1,"score":11,"last_activity_date":1696638098,"creation_date":1446114416,"question_id":33411685,"body_markdown":"I don&#39;t know how can I use `Mockito.verify` in this case. How can I pass false to Mockito.verify? I try 2 different ways but it does not work.\r\n\r\n    public Sample someMethod(Sample s, boolean a){....}\r\n    @Test\r\n    public void test() {\r\n    ...\r\n    verify(mock).someMethod(sampleCaptor.capture(), false));\r\n    verify(mock).someMethod(sampleCaptor.capture(), org.mockito.Matchers.eq(false)));\r\n    ...\r\n    }","title":"Mockito.verify method contain boolean and argument captor","body":"<p>I don't know how can I use <code>Mockito.verify</code> in this case. How can I pass false to Mockito.verify? I try 2 different ways but it does not work.</p>\n\n<pre><code>public Sample someMethod(Sample s, boolean a){....}\n@Test\npublic void test() {\n...\nverify(mock).someMethod(sampleCaptor.capture(), false));\nverify(mock).someMethod(sampleCaptor.capture(), org.mockito.Matchers.eq(false)));\n...\n}\n</code></pre>\n"},{"tags":["java","selenium","google-chrome","selenium-chromedriver","jsoup"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649333368,"creation_date":1649327509,"answer_id":71780532,"question_id":71780315,"body_markdown":"This error message...\r\n\r\n\tWARNING: Unable to find version of CDP to use for . You may need to include a dependency on a specific version of the CDP using something similar to `org.seleniumhq.selenium:selenium-devtools-v86:4.0.0` where the version (&quot;v86&quot;) matches the version of the chromium-based browser you&#39;re using and the version number of the artifact is the same as Selenium&#39;s.\r\n\r\n...implies that the [Selenium](https://stackoverflow.com/a/54482491/7429447) version you are using doesn&#39;t supports the [tag:google-chrome] browser version.\r\n\r\n\r\n----------\r\n\r\n\r\nDetails\r\n-------\r\nYou are using _Chrome Version **86**_ and _Senenium v**4.0.0**_. But [CHANGELOG of Selenium v4.0.0](https://github.com/SeleniumHQ/selenium/blob/be30b6241d89c28694818e3d07bb5dd059429ff0/java/CHANGELOG#L100) mentions:\r\n\r\n&gt;* Supported CDP versions: 85, 93, 94, 95\r\n\r\nAs _Selenium v4.0.0_ doesn&#39;t supports _Chrome Version 86_ hence you see the error.\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nA possible would be to ensure that:\r\n\r\n- _Selenium_ is updated to _**v4.1.3**_\r\n- _Chrome_ is updated to _**Chrome v100.0**_\r\n- _ChromeDriver_ is updated to [ChromeDriver v100.0.4896.60](https://chromedriver.storage.googleapis.com/index.html?path=100.0.4896.60/) level which matches to _chrome=100.0_.","title":"Need to include a dependency on a specific version of the CDP using something similar to selenium-devtools-v86:4.0.0 error using Selenium and jsoup","body":"<p>This error message...</p>\n<pre><code>WARNING: Unable to find version of CDP to use for . You may need to include a dependency on a specific version of the CDP using something similar to `org.seleniumhq.selenium:selenium-devtools-v86:4.0.0` where the version (&quot;v86&quot;) matches the version of the chromium-based browser you're using and the version number of the artifact is the same as Selenium's.\n</code></pre>\n<p>...implies that the <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> version you are using doesn't supports the <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\">google-chrome</a> browser version.</p>\n<hr />\n<h2>Details</h2>\n<p>You are using <em>Chrome Version <strong>86</strong></em> and <em>Senenium v<strong>4.0.0</strong></em>. But <a href=\"https://github.com/SeleniumHQ/selenium/blob/be30b6241d89c28694818e3d07bb5dd059429ff0/java/CHANGELOG#L100\" rel=\"nofollow noreferrer\">CHANGELOG of Selenium v4.0.0</a> mentions:</p>\n<blockquote>\n<ul>\n<li>Supported CDP versions: 85, 93, 94, 95</li>\n</ul>\n</blockquote>\n<p>As <em>Selenium v4.0.0</em> doesn't supports <em>Chrome Version 86</em> hence you see the error.</p>\n<hr />\n<h2>Solution</h2>\n<p>A possible would be to ensure that:</p>\n<ul>\n<li><em>Selenium</em> is updated to <em><strong>v4.1.3</strong></em></li>\n<li><em>Chrome</em> is updated to <em><strong>Chrome v100.0</strong></em></li>\n<li><em>ChromeDriver</em> is updated to <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=100.0.4896.60/\" rel=\"nofollow noreferrer\">ChromeDriver v100.0.4896.60</a> level which matches to <em>chrome=100.0</em>.</li>\n</ul>\n"}],"owner":{"account_id":24839053,"reputation":9,"user_id":18717311,"display_name":"778899"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12444,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696637421,"creation_date":1649326575,"question_id":71780315,"body_markdown":"I am trying to use the url of a webpage that I navigated onto using Selenium, to access the webpage using Jsoup.   \r\n\r\nHowever, when I try to do so, I receive the following message in the console: &quot;WARNING: Unable to find version of CDP to use for . You may need to include a dependency on a specific version of the CDP using something similar to `org.seleniumhq.selenium:selenium-devtools-v86:4.0.0` where the version (&quot;v86&quot;) matches the version of the chromium-based browser you&#39;re using and the version number of the artifact is the same as Selenium&#39;s.&quot;\r\n\r\n\r\nI am not sure what I am doing wrong, or of another way to go about achieving this. \r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, System.getProperty(&quot;user.dir&quot;).concat(&quot;\\\\chromedriver&quot; + &quot;.exe&quot;));\r\n    WebDriver driver = new ChromeDriver();\r\n    driver.get(&quot;https://www.chapters.indigo.ca/en-ca/&quot;);\r\n    WebElement webElement = driver.findElement(By.id(&quot;header__quick-search&quot;));\r\n    webElement.sendKeys(&quot;9780385697378&quot;);\r\n    webElement.submit();\r\n    driver.findElement(By.className(&quot;product-list__product-title&quot;)).click();\r\n    String url = driver.getCurrentUrl();\r\n    final Document document = Jsoup.connect(url).get();","title":"Need to include a dependency on a specific version of the CDP using something similar to selenium-devtools-v86:4.0.0 error using Selenium and jsoup","body":"<p>I am trying to use the url of a webpage that I navigated onto using Selenium, to access the webpage using Jsoup.</p>\n<p>However, when I try to do so, I receive the following message in the console: &quot;WARNING: Unable to find version of CDP to use for . You may need to include a dependency on a specific version of the CDP using something similar to <code>org.seleniumhq.selenium:selenium-devtools-v86:4.0.0</code> where the version (&quot;v86&quot;) matches the version of the chromium-based browser you're using and the version number of the artifact is the same as Selenium's.&quot;</p>\n<p>I am not sure what I am doing wrong, or of another way to go about achieving this.</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, System.getProperty(&quot;user.dir&quot;).concat(&quot;\\\\chromedriver&quot; + &quot;.exe&quot;));\nWebDriver driver = new ChromeDriver();\ndriver.get(&quot;https://www.chapters.indigo.ca/en-ca/&quot;);\nWebElement webElement = driver.findElement(By.id(&quot;header__quick-search&quot;));\nwebElement.sendKeys(&quot;9780385697378&quot;);\nwebElement.submit();\ndriver.findElement(By.className(&quot;product-list__product-title&quot;)).click();\nString url = driver.getCurrentUrl();\nfinal Document document = Jsoup.connect(url).get();\n</code></pre>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1383961639,"post_id":19871437,"comment_id":29558631,"body_markdown":"And you&#39;re sure that your .m2 directory has the appropriate JAR?  Did you run `mvn clean compile` or `mvn clean dependency:resolve`?  What did that give you?","body":"And you&#39;re sure that your .m2 directory has the appropriate JAR?  Did you run <code>mvn clean compile</code> or <code>mvn clean dependency:resolve</code>?  What did that give you?"},{"owner":{"account_id":2665037,"reputation":480,"user_id":2303709,"display_name":"Julien Langlois"},"score":0,"creation_date":1383961696,"post_id":19871437,"comment_id":29558639,"body_markdown":"Are you running this in an IDE or the command line?","body":"Are you running this in an IDE or the command line?"},{"owner":{"account_id":1258969,"reputation":3065,"user_id":1217811,"accept_rate":81,"display_name":"Vaibhav"},"score":1,"creation_date":1383962146,"post_id":19871437,"comment_id":29558720,"body_markdown":"I am facing this on Eclipse IDE. And I run both commands above but still I am getting this error.","body":"I am facing this on Eclipse IDE. And I run both commands above but still I am getting this error."},{"owner":{"account_id":1258969,"reputation":3065,"user_id":1217811,"accept_rate":81,"display_name":"Vaibhav"},"score":1,"creation_date":1383962264,"post_id":19871437,"comment_id":29558738,"body_markdown":"I just checked in .m2 directory and jars for or.springframework.batch are there","body":"I just checked in .m2 directory and jars for or.springframework.batch are there"},{"owner":{"account_id":1897099,"reputation":1685,"user_id":1713801,"display_name":"alterfox"},"score":0,"creation_date":1383962543,"post_id":19871437,"comment_id":29558789,"body_markdown":"Try creating a build and running it, and if it works, you have an issue with Eclipse plugin for Maven. If it doesn&#39;t, look what libs are packaged in the build.","body":"Try creating a build and running it, and if it works, you have an issue with Eclipse plugin for Maven. If it doesn&#39;t, look what libs are packaged in the build."},{"owner":{"account_id":2665037,"reputation":480,"user_id":2303709,"display_name":"Julien Langlois"},"score":0,"creation_date":1383962625,"post_id":19871437,"comment_id":29558807,"body_markdown":"Do you have a [maven plugin](http://maven.apache.org/eclipse-plugin.html) for eclipse installed?","body":"Do you have a <a href=\"http://maven.apache.org/eclipse-plugin.html\" rel=\"nofollow noreferrer\">maven plugin</a> for eclipse installed?"},{"owner":{"account_id":1258969,"reputation":3065,"user_id":1217811,"accept_rate":81,"display_name":"Vaibhav"},"score":0,"creation_date":1383963850,"post_id":19871437,"comment_id":29559017,"body_markdown":"Maven plugin is there as I have made some other projects using Maven in eclipse IDE.","body":"Maven plugin is there as I have made some other projects using Maven in eclipse IDE."},{"owner":{"account_id":1258969,"reputation":3065,"user_id":1217811,"accept_rate":81,"display_name":"Vaibhav"},"score":0,"creation_date":1384212620,"post_id":19871437,"comment_id":29637869,"body_markdown":"I can see this message for help in eclipse. Can anyone helps me how to open artifact search dialog box. &quot;Opens the artifact search dialog to search for &#39;org.springframework.batch.core&#39; to add to your target.","body":"I can see this message for help in eclipse. Can anyone helps me how to open artifact search dialog box. &quot;Opens the artifact search dialog to search for &#39;org.springframework.batch.core&#39; to add to your target."},{"owner":{"account_id":1258969,"reputation":3065,"user_id":1217811,"accept_rate":81,"display_name":"Vaibhav"},"score":0,"creation_date":1384305210,"post_id":19871437,"comment_id":29681133,"body_markdown":"Finally my issue got resolved. I was importing the project as &quot;Existing project into workspace&quot;. This was completely wrong. After that I selected &quot;Existing Maven project&quot; and after that some few hiccups and all errors were removed. In this process I got to learn so many things in Maven which are important for a new comer in Maven project.","body":"Finally my issue got resolved. I was importing the project as &quot;Existing project into workspace&quot;. This was completely wrong. After that I selected &quot;Existing Maven project&quot; and after that some few hiccups and all errors were removed. In this process I got to learn so many things in Maven which are important for a new comer in Maven project."},{"owner":{"account_id":8356750,"reputation":3326,"user_id":6276704,"accept_rate":44,"display_name":"Tigerware"},"score":0,"creation_date":1592262428,"post_id":19871437,"comment_id":110357274,"body_markdown":"I have this issue with IntelliJ Ultimate.","body":"I have this issue with IntelliJ Ultimate."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1696634730,"post_id":19871437,"comment_id":136183223,"body_markdown":"Re *&quot;POM.xml&quot;*: Not *&quot;[pom.xml](https://maven.apache.org/pom.html#What_is_the_POM.3F)&quot;*?","body":"Re <i>&quot;POM.xml&quot;</i>: Not <i>&quot;<a href=\"https://maven.apache.org/pom.html#What_is_the_POM.3F\" rel=\"nofollow noreferrer\">pom.xml</a>&quot;</i>?"}],"answers":[{"comments":[{"owner":{"account_id":1258969,"reputation":3065,"user_id":1217811,"accept_rate":81,"display_name":"Vaibhav"},"score":0,"creation_date":1383964590,"post_id":19871641,"comment_id":29559147,"body_markdown":"When I run mvn clean and mvn clean dependency:tree commands, both of them were success.\n\nAbout m2eclipse plugin, I installed it two days back and it was working fine.","body":"When I run mvn clean and mvn clean dependency:tree commands, both of them were success.  About m2eclipse plugin, I installed it two days back and it was working fine."},{"owner":{"account_id":912222,"reputation":4998,"user_id":945789,"accept_rate":100,"display_name":"Matt Byrne"},"score":2,"creation_date":1383968201,"post_id":19871641,"comment_id":29559665,"body_markdown":"Try `mvn eclipse:eclipse` or `mvn m2eclipse:m2eclipse`. Can&#39;t remember the exact syntaxes because I use IntelliJ. After doing these, refresh from the root of Eclipse and it should sort itself out from memory.","body":"Try <code>mvn eclipse:eclipse</code> or <code>mvn m2eclipse:m2eclipse</code>. Can&#39;t remember the exact syntaxes because I use IntelliJ. After doing these, refresh from the root of Eclipse and it should sort itself out from memory."},{"owner":{"account_id":1258969,"reputation":3065,"user_id":1217811,"accept_rate":81,"display_name":"Vaibhav"},"score":0,"creation_date":1384212507,"post_id":19871641,"comment_id":29637825,"body_markdown":"I can see this message for help in eclipse. Can anyone helps me how to open artifact search dialog box. &quot;Opens the artifact search dialog to search for &#39;org.springframework.batch.core&#39; to add to your target.  &quot;","body":"I can see this message for help in eclipse. Can anyone helps me how to open artifact search dialog box. &quot;Opens the artifact search dialog to search for &#39;org.springframework.batch.core&#39; to add to your target.  &quot;"},{"owner":{"account_id":912222,"reputation":4998,"user_id":945789,"accept_rate":100,"display_name":"Matt Byrne"},"score":0,"creation_date":1384215767,"post_id":19871641,"comment_id":29638946,"body_markdown":"You&#39;re on your own now with Eclipse. The reason someone downvoted your question by the way was because it was not clearly marked that it was an IDE problem. Maven itself is resolving and your project is building so it&#39;s just Eclipse tweaking you need.","body":"You&#39;re on your own now with Eclipse. The reason someone downvoted your question by the way was because it was not clearly marked that it was an IDE problem. Maven itself is resolving and your project is building so it&#39;s just Eclipse tweaking you need."},{"owner":{"account_id":1258969,"reputation":3065,"user_id":1217811,"accept_rate":81,"display_name":"Vaibhav"},"score":0,"creation_date":1384216049,"post_id":19871641,"comment_id":29639035,"body_markdown":"Matt, please help me to resolve it. What can I do in my eclipse to remove it. It is taking so much of my time.","body":"Matt, please help me to resolve it. What can I do in my eclipse to remove it. It is taking so much of my time."},{"owner":{"account_id":912222,"reputation":4998,"user_id":945789,"accept_rate":100,"display_name":"Matt Byrne"},"score":1,"creation_date":1384232840,"post_id":19871641,"comment_id":29643128,"body_markdown":"Like I said mate, I use IntelliJ so can&#39;t help any further. My opinion ... install and use free version IntelliJ. No stuffing around with plugins - plays nicely with Maven, but I&#39;m sure there are people out there who can help with Eclipse. If you post another question that is well-worded and clearly states you need Eclipse help you may get more luck.","body":"Like I said mate, I use IntelliJ so can&#39;t help any further. My opinion ... install and use free version IntelliJ. No stuffing around with plugins - plays nicely with Maven, but I&#39;m sure there are people out there who can help with Eclipse. If you post another question that is well-worded and clearly states you need Eclipse help you may get more luck."},{"owner":{"account_id":8356750,"reputation":3326,"user_id":6276704,"accept_rate":44,"display_name":"Tigerware"},"score":0,"creation_date":1592262973,"post_id":19871641,"comment_id":110357441,"body_markdown":"I have this issue with IntelliJ.\nBoth commands run without issues. IntelliJ still does not find the dependencies though.","body":"I have this issue with IntelliJ. Both commands run without issues. IntelliJ still does not find the dependencies though."}],"tags":[],"owner":{"account_id":912222,"reputation":4998,"user_id":945789,"accept_rate":100,"display_name":"Matt Byrne"},"comment_count":7,"down_vote_count":0,"up_vote_count":52,"is_accepted":true,"score":52,"last_activity_date":1444597720,"creation_date":1383963603,"answer_id":19871641,"question_id":19871437,"body_markdown":"You need to follow a few steps to debug properly.\r\n\r\n1) `mvn clean dependency:tree` Take a look at the output to see exactly what you get and verify your dependencies are all there.\r\n\r\n2) `mvn clean compile`. Does this fail? If not does that mean you only get the error in Eclipse?\r\n\r\nYou mentioned in a comment &quot;And I run both commands above but I am getting this error&quot;. Did `mvn clean compile` work? Or did you get an error for that as well? If it worked then it&#39;s just an IDE problem and I&#39;d look at the `m2eclipse` plugin. Better still, use IntelliJ as the free version has better maven support than Eclipse ;-)\r\n\r\nSome style things ...\r\n\r\nPeople often add too many dependencies in their pom file when they don&#39;t need to. If you take a look at a couple of links in mavenrepository.com you can see that `spring-oxm` and `spring-jdbc` both depend on `spring-core` so you don&#39;t need to add that explicitly (for example). `mvn clean dependency:tree` will show you what is coming in after all of that, but this is more tidying.\r\n\r\n`spring-batch-test` should be `test` scope.\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>You need to follow a few steps to debug properly.</p>\n\n<p>1) <code>mvn clean dependency:tree</code> Take a look at the output to see exactly what you get and verify your dependencies are all there.</p>\n\n<p>2) <code>mvn clean compile</code>. Does this fail? If not does that mean you only get the error in Eclipse?</p>\n\n<p>You mentioned in a comment \"And I run both commands above but I am getting this error\". Did <code>mvn clean compile</code> work? Or did you get an error for that as well? If it worked then it's just an IDE problem and I'd look at the <code>m2eclipse</code> plugin. Better still, use IntelliJ as the free version has better maven support than Eclipse ;-)</p>\n\n<p>Some style things ...</p>\n\n<p>People often add too many dependencies in their pom file when they don't need to. If you take a look at a couple of links in mavenrepository.com you can see that <code>spring-oxm</code> and <code>spring-jdbc</code> both depend on <code>spring-core</code> so you don't need to add that explicitly (for example). <code>mvn clean dependency:tree</code> will show you what is coming in after all of that, but this is more tidying.</p>\n\n<p><code>spring-batch-test</code> should be <code>test</code> scope.</p>\n"},{"tags":[],"owner":{"account_id":1258969,"reputation":3065,"user_id":1217811,"accept_rate":81,"display_name":"Vaibhav"},"comment_count":0,"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1696634909,"creation_date":1384305157,"answer_id":19943376,"question_id":19871437,"body_markdown":"Finally my issue got resolved. I was importing the project as &quot;Existing project into workspace&quot;. This was completely wrong.\r\n\r\nAfter that, I selected &quot;Existing Maven project&quot; and after that some few hiccups and all errors were removed. In this process, I got to learn so many things in Maven which are important for a newcomer in a Maven project.\r\n\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>Finally my issue got resolved. I was importing the project as &quot;Existing project into workspace&quot;. This was completely wrong.</p>\n<p>After that, I selected &quot;Existing Maven project&quot; and after that some few hiccups and all errors were removed. In this process, I got to learn so many things in Maven which are important for a newcomer in a Maven project.</p>\n"},{"comments":[{"owner":{"account_id":80147,"reputation":419,"user_id":226819,"display_name":"verboze"},"score":0,"creation_date":1445549593,"post_id":25397561,"comment_id":54382494,"body_markdown":"thanks, this was my issue as well. I had created a maven project using a webapp archetype at the cli, then imported into intelliJ. Looks like intelliJ was looking for the dependencies, so I did what you did to resolve the issue: right click on the project &gt; add framework support &gt; select &quot;maven&quot;.","body":"thanks, this was my issue as well. I had created a maven project using a webapp archetype at the cli, then imported into intelliJ. Looks like intelliJ was looking for the dependencies, so I did what you did to resolve the issue: right click on the project &gt; add framework support &gt; select &quot;maven&quot;."},{"owner":{"account_id":208724,"reputation":10099,"user_id":4057038,"accept_rate":40,"display_name":"Meena Chaudhary"},"score":0,"creation_date":1533026870,"post_id":25397561,"comment_id":90183128,"body_markdown":"In my case the missing JAR is already included in the library as part of project dependency hierarchy but during Maven compile it is not found. So adding it explicitly does resolve the issue but I am not sure why this behavior. Have to dig in.","body":"In my case the missing JAR is already included in the library as part of project dependency hierarchy but during Maven compile it is not found. So adding it explicitly does resolve the issue but I am not sure why this behavior. Have to dig in."}],"tags":[],"owner":{"account_id":412554,"reputation":2491,"user_id":785673,"display_name":"0xFK"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1696634440,"creation_date":1408513841,"answer_id":25397561,"question_id":19871437,"body_markdown":"My direct solution for this issue:\r\n\r\nRight-click the project &amp;rarr; *Maven* &amp;rarr; *Add Dependency*. Then choose the name or parent name of missing dependency\r\n\r\n![Enter image description here][1]\r\n\r\n  [1]: http://i.stack.imgur.com/VNVUR.png\r\n\r\n\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>My direct solution for this issue:</p>\n<p>Right-click the project → <em>Maven</em> → <em>Add Dependency</em>. Then choose the name or parent name of missing dependency</p>\n<p><img src=\"https://i.stack.imgur.com/VNVUR.png\" alt=\"Enter image description here\" /></p>\n"},{"tags":[],"owner":{"account_id":7166045,"reputation":41,"user_id":5475117,"display_name":"Shun"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1696634269,"creation_date":1445506093,"answer_id":33277682,"question_id":19871437,"body_markdown":"Right-click project name in Eclipse,  &amp;rarr; *Maven* &amp;rarr; select *Maven Profiles*...\r\n\r\nThen tick the Maven profile you want to set. After clicking &lt;kbd&gt;OK&lt;/kbd&gt;, Eclipse will automatically import the Maven setting to your project. If you check your project&#39;s Property, you will find the *Maven Dependencies Library* has been added.\r\n\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>Right-click project name in Eclipse,  → <em>Maven</em> → select <em>Maven Profiles</em>...</p>\n<p>Then tick the Maven profile you want to set. After clicking <kbd>OK</kbd>, Eclipse will automatically import the Maven setting to your project. If you check your project's Property, you will find the <em>Maven Dependencies Library</em> has been added.</p>\n"},{"tags":[],"owner":{"account_id":4770461,"reputation":1485,"user_id":3855359,"accept_rate":73,"display_name":"Osama Al-Banna"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1486482506,"creation_date":1486482506,"answer_id":42094136,"question_id":19871437,"body_markdown":"This answer from here helped me:\r\n\r\nYou should take a look at the build path of your project to check whether the referenced libraries are still there. So right-click on your project, then &quot;Properties -&gt; Java Build Path -&gt; Libraries&quot; and check whether you still have the spring library JARs in the place that is mentioned there. If not, just re-add them to your classpath within this dialog.\r\n\r\nhttp://forum.spring.io/forum/spring-projects/springsource-tool-suite/98653-springframework-cannot-be-resolved-error","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>This answer from here helped me:</p>\n\n<p>You should take a look at the build path of your project to check whether the referenced libraries are still there. So right-click on your project, then \"Properties -> Java Build Path -> Libraries\" and check whether you still have the spring library JARs in the place that is mentioned there. If not, just re-add them to your classpath within this dialog.</p>\n\n<p><a href=\"http://forum.spring.io/forum/spring-projects/springsource-tool-suite/98653-springframework-cannot-be-resolved-error\" rel=\"nofollow noreferrer\">http://forum.spring.io/forum/spring-projects/springsource-tool-suite/98653-springframework-cannot-be-resolved-error</a></p>\n"},{"tags":[],"owner":{"account_id":10654862,"reputation":187,"user_id":7844681,"display_name":"Shamik Guha Ray"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1498633131,"creation_date":1491824441,"answer_id":43322215,"question_id":19871437,"body_markdown":"Add these dependencies\r\n \r\n    &lt;/dependencies&gt;\r\n        &lt;dependency&gt;\r\n   \t    \t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n   \t\t    &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n      \t\t&lt;version&gt;4.3.7.RELEASE&lt;/version&gt;\r\n       \t&lt;/dependency&gt;\r\n       \t&lt;dependency&gt;\r\n   \t\t    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n   \t\t    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n   \t\t    &lt;version&gt;4.3.7.RELEASE&lt;/version&gt;\r\n     \t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>Add these dependencies</p>\n\n<pre><code>&lt;/dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n        &lt;version&gt;4.3.7.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;4.3.7.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11272414,"reputation":1,"user_id":8267468,"display_name":"mummadi venkata ravi teja"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696633662,"creation_date":1499375407,"answer_id":44958899,"question_id":19871437,"body_markdown":"*org.springframework.beans.factory.support.beannamegenerator* was my error. I did a `maven clean`, `maven build`, etc., which was not useful and I found that my *.m2* folder is not present in my Eclipse installation folder.\r\n\r\nI found the *.m2* folder outside of the Eclipse folder which I pasted in the Eclipse folder and then in eclipse I happened to do this:\r\n\r\n * Open configure build path\r\n * maven\r\n * Java EE integration\r\n * Select Maven archiver. It generates files under the build directory\r\n * Apply and close\r\n\r\nMy project is up and running now.\r\n\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p><em>org.springframework.beans.factory.support.beannamegenerator</em> was my error. I did a <code>maven clean</code>, <code>maven build</code>, etc., which was not useful and I found that my <em>.m2</em> folder is not present in my Eclipse installation folder.</p>\n<p>I found the <em>.m2</em> folder outside of the Eclipse folder which I pasted in the Eclipse folder and then in eclipse I happened to do this:</p>\n<ul>\n<li>Open configure build path</li>\n<li>maven</li>\n<li>Java EE integration</li>\n<li>Select Maven archiver. It generates files under the build directory</li>\n<li>Apply and close</li>\n</ul>\n<p>My project is up and running now.</p>\n"},{"tags":[],"owner":{"account_id":12558364,"reputation":72,"user_id":9137139,"display_name":"Moh Lamine"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696633890,"creation_date":1517666990,"answer_id":48598270,"question_id":19871437,"body_markdown":"If you&#39;re sure that your *[pom.xml][1]* file is pretty good, then you have just to update the project. Right-click on the project &amp;rarr; *Maven* &amp;rarr; *Update project. Or simply &lt;kbd&gt;Alt&lt;/kbd&gt; + &lt;kbd&gt;F5&lt;/kbd&gt;.\r\n\r\n  [1]: https://maven.apache.org/pom.html#What_is_the_POM.3F\r\n\r\n\r\n\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>If you're sure that your <em><a href=\"https://maven.apache.org/pom.html#What_is_the_POM.3F\" rel=\"nofollow noreferrer\">pom.xml</a></em> file is pretty good, then you have just to update the project. Right-click on the project → <em>Maven</em> → *Update project. Or simply <kbd>Alt</kbd> + <kbd>F5</kbd>.</p>\n"},{"tags":[],"owner":{"account_id":2074614,"reputation":456,"user_id":1848326,"accept_rate":20,"display_name":"Deepak Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1696634110,"creation_date":1526727373,"answer_id":50424519,"question_id":19871437,"body_markdown":"In my case, I had to delete the [JAR][1] files inside the *.m2/repository* and then did a Maven* &amp;rarr; *Update Maven Project*.\r\n\r\nIt looks like the JAR files were corrupt and deleting and downloading the fresh JAR file fixed the issue.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/JAR_%28file_format%29\r\n\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>In my case, I had to delete the <a href=\"https://en.wikipedia.org/wiki/JAR_%28file_format%29\" rel=\"nofollow noreferrer\">JAR</a> files inside the <em>.m2/repository</em> and then did a Maven* → <em>Update Maven Project</em>.</p>\n<p>It looks like the JAR files were corrupt and deleting and downloading the fresh JAR file fixed the issue.</p>\n"},{"tags":[],"owner":{"account_id":6891348,"reputation":343,"user_id":5294735,"display_name":"moisu"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1696632254,"creation_date":1530751085,"answer_id":51182067,"question_id":19871437,"body_markdown":"The solution that worked for me was to right-click on the project &amp;rarr; *Maven* &amp;rarr; *Update Project* and then click &lt;kbd&gt;OK&lt;/kbd&gt;.\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>The solution that worked for me was to right-click on the project → <em>Maven</em> → <em>Update Project</em> and then click <kbd>OK</kbd>.</p>\n"},{"tags":[],"owner":{"account_id":3021497,"reputation":673,"user_id":2562435,"display_name":"Zest"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536733053,"creation_date":1536733053,"answer_id":52288603,"question_id":19871437,"body_markdown":"I imported a project as &#39;Existing Maven Project&#39; and was getting this issue.\r\n\r\nResolution:\r\nChanged Java Build Path of JRE System Library to Workspace defailt JRE [jdk 1.8]\r\n\r\nSteps:\r\n\r\nRight click on project -&gt; build path -&gt; configure build path -&gt; Libraries Tab -&gt; double click JRE System Library -&gt; change to Workspace defailt JRE [jdk 1.8]\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>I imported a project as 'Existing Maven Project' and was getting this issue.</p>\n\n<p>Resolution:\nChanged Java Build Path of JRE System Library to Workspace defailt JRE [jdk 1.8]</p>\n\n<p>Steps:</p>\n\n<p>Right click on project -> build path -> configure build path -> Libraries Tab -> double click JRE System Library -> change to Workspace defailt JRE [jdk 1.8]</p>\n"},{"tags":[],"owner":{"account_id":7922657,"reputation":647,"user_id":5983136,"accept_rate":80,"display_name":"chamzz.dot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696631379,"creation_date":1540876563,"answer_id":53057840,"question_id":19871437,"body_markdown":"The only solution that worked for me was to add the *maven-compiler-plugin* to the [pom.xml][1] file:\r\n\r\n    &lt;project ...&gt;\r\n        ...\r\n        &lt;build&gt;\r\n            ...\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.7&lt;/source&gt;\r\n                        &lt;target&gt;1.7&lt;/target&gt;\r\n                        &lt;fork&gt;true&lt;/fork&gt;\r\n                        &lt;executable&gt;C:\\Program Files\\Java\\jdk1.7.0_79\\bin\\javac&lt;/executable&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n        ...\r\n    &lt;/project&gt;\r\n\r\n\r\n  [1]: https://maven.apache.org/pom.html#What_is_the_POM.3F\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>The only solution that worked for me was to add the <em>maven-compiler-plugin</em> to the <a href=\"https://maven.apache.org/pom.html#What_is_the_POM.3F\" rel=\"nofollow noreferrer\">pom.xml</a> file:</p>\n<pre><code>&lt;project ...&gt;\n    ...\n    &lt;build&gt;\n        ...\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.7&lt;/source&gt;\n                    &lt;target&gt;1.7&lt;/target&gt;\n                    &lt;fork&gt;true&lt;/fork&gt;\n                    &lt;executable&gt;C:\\Program Files\\Java\\jdk1.7.0_79\\bin\\javac&lt;/executable&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    ...\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2340745,"reputation":7243,"user_id":2052097,"accept_rate":85,"display_name":"z atef"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1696630142,"creation_date":1548612675,"answer_id":54391307,"question_id":19871437,"body_markdown":"In my case, this issue was resolved by updating Maven&#39;s dependencies:\r\n\r\n[![Enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/8DrZD.png\r\n\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>In my case, this issue was resolved by updating Maven's dependencies:</p>\n<p><a href=\"https://i.stack.imgur.com/8DrZD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8DrZD.png\" alt=\"Enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1696630672,"post_id":54703124,"comment_id":136182916,"body_markdown":"What is STS? [Spring Tool Suite](https://en.wikipedia.org/wiki/STS#Computing_and_communications)?","body":"What is STS? <a href=\"https://en.wikipedia.org/wiki/STS#Computing_and_communications\" rel=\"nofollow noreferrer\">Spring Tool Suite</a>?"}],"tags":[],"owner":{"account_id":2814186,"reputation":25,"user_id":2419726,"display_name":"Ron Wheeler"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696630640,"creation_date":1550208211,"answer_id":54703124,"question_id":19871437,"body_markdown":"I had the same problem in Eclipse STS.\r\n\r\nChanging the scope in the pom from &quot;provided&quot; to &quot;compile&quot; fixed the problem and when I changed it back everything was still OK.","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>I had the same problem in Eclipse STS.</p>\n<p>Changing the scope in the pom from &quot;provided&quot; to &quot;compile&quot; fixed the problem and when I changed it back everything was still OK.</p>\n"},{"tags":[],"owner":{"account_id":10104128,"reputation":4849,"user_id":7467246,"accept_rate":67,"display_name":"Priyantha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584959177,"creation_date":1584959177,"answer_id":60811722,"question_id":19871437,"body_markdown":"**There are few steps you can follow**\r\n\r\n01. remove repository folder\r\n   \r\n\r\n    *C:/Users/user_name/.m2*\r\n\r\n02. Then run command using IDE terminal or open cmd in your project folder\r\n   \r\n\r\n    *mvn clean install*\r\n\r\n03. Restart your ide\r\n\r\n04. If not solve your problem then run this command\r\n   \r\n\r\n     *mvn idea:idea*","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p><strong>There are few steps you can follow</strong></p>\n\n<ol>\n<li><p>remove repository folder</p>\n\n<p><em>C:/Users/user_name/.m2</em></p></li>\n<li><p>Then run command using IDE terminal or open cmd in your project folder</p>\n\n<p><em>mvn clean install</em></p></li>\n<li><p>Restart your ide</p></li>\n<li><p>If not solve your problem then run this command</p>\n\n<p><em>mvn idea:idea</em></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":14708900,"reputation":134,"user_id":10622786,"display_name":"nihal"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696630733,"creation_date":1589193830,"answer_id":61727796,"question_id":19871437,"body_markdown":"Add the following [JPA][1] dependency.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Persistence_API\r\n\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>Add the following <a href=\"https://en.wikipedia.org/wiki/Java_Persistence_API\" rel=\"nofollow noreferrer\">JPA</a> dependency.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13144705,"reputation":865,"user_id":9495110,"display_name":"let me down slowly"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696630963,"creation_date":1622644344,"answer_id":67807168,"question_id":19871437,"body_markdown":"For me, this problem occurred when I forgot to add a Spring web dependency. I checked it from Eclipse&#39;s autocomplete that there aren&#39;t any `org.springframework.web` available for my project.\r\n\r\nThen from menu *Project* &amp;rarr; *Spring* &amp;rarr; *Add starters*, I added web dependency to the *[pom.xml][1]* file.\r\n\r\n  [1]: https://maven.apache.org/pom.html#What_is_the_POM.3F\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>For me, this problem occurred when I forgot to add a Spring web dependency. I checked it from Eclipse's autocomplete that there aren't any <code>org.springframework.web</code> available for my project.</p>\n<p>Then from menu <em>Project</em> → <em>Spring</em> → <em>Add starters</em>, I added web dependency to the <em><a href=\"https://maven.apache.org/pom.html#What_is_the_POM.3F\" rel=\"nofollow noreferrer\">pom.xml</a></em> file.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1696631124,"post_id":71844102,"comment_id":136182957,"body_markdown":"This is one of [the few cases](https://meta.stackoverflow.com/questions/285551/) where a screenshot *would* be appropriate.","body":"This is one of <a href=\"https://meta.stackoverflow.com/questions/285551/\">the few cases</a> where a screenshot <i>would</i> be appropriate."}],"tags":[],"owner":{"account_id":22104620,"reputation":87,"user_id":16360534,"display_name":"ritu mansata"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696631058,"creation_date":1649772132,"answer_id":71844102,"question_id":19871437,"body_markdown":"Right-click the project, then Maven, and in the textbox, write *&quot;pom.xml&quot;*.\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>Right-click the project, then Maven, and in the textbox, write <em>&quot;pom.xml&quot;</em>.</p>\n"},{"tags":[],"owner":{"account_id":7360750,"reputation":221,"user_id":5604107,"display_name":"Satheesh M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696631256,"creation_date":1668237617,"answer_id":74411075,"question_id":19871437,"body_markdown":"When I imported the project in [IntelliJ][1], I got this issue. But it got resolved when I created the Project in IntelliJ &amp;rarr; menu *File* &amp;rarr; *New* &amp;rarr; *Project* &amp;rarr; *Spring Initializr*. I added dependencies in that window itself.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>When I imported the project in <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ</a>, I got this issue. But it got resolved when I created the Project in IntelliJ → menu <em>File</em> → <em>New</em> → <em>Project</em> → <em>Spring Initializr</em>. I added dependencies in that window itself.</p>\n"},{"tags":[],"owner":{"account_id":17108660,"reputation":1251,"user_id":12380096,"display_name":"AylaWinters"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686598674,"creation_date":1686598674,"answer_id":76459806,"question_id":19871437,"body_markdown":"I fixed mine by adding:\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>I fixed mine by adding:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19407465,"reputation":283,"user_id":14192616,"display_name":"Bipul Jaishwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696631297,"creation_date":1693216932,"answer_id":76991819,"question_id":19871437,"body_markdown":"I fixed it for me by adding the below dependency.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-xml&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-ws-core&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>I fixed it for me by adding the below dependency.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-xml&lt;/artifactId&gt;\n    &lt;version&gt;4.0.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-ws-core&lt;/artifactId&gt;\n    &lt;version&gt;4.0.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1258969,"reputation":3065,"user_id":1217811,"accept_rate":81,"display_name":"Vaibhav"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":345760,"favorite_count":0,"down_vote_count":1,"up_vote_count":48,"accepted_answer_id":19871641,"answer_count":21,"score":47,"last_activity_date":1696634909,"creation_date":1383961511,"question_id":19871437,"body_markdown":"Here is my POM.xml file:\r\n\r\n```\r\n&lt;project&gt;\r\n    &lt;properties&gt;\r\n        &lt;jdk.version&gt;1.6&lt;/jdk.version&gt;\r\n        &lt;spring.version&gt;3.2.2.RELEASE&lt;/spring.version&gt;\r\n        &lt;spring.batch.version&gt;2.2.0.RELEASE&lt;/spring.batch.version&gt;\r\n        &lt;mysql.driver.version&gt;5.1.25&lt;/mysql.driver.version&gt;\r\n        &lt;junit.version&gt;4.11&lt;/junit.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;!-- Spring Core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Spring jdbc, for database --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Spring XML to/back object --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- MySQL database driver --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;${mysql.driver.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Spring Batch dependencies --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-batch-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.batch.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-batch-infrastructure&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.batch.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Spring Batch unit test --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-batch-test&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.batch.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;finalName&gt;spring-batch&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-eclipse-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.9&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;downloadSources&gt;true&lt;/downloadSources&gt;\r\n                    &lt;downloadJavadocs&gt;false&lt;/downloadJavadocs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${jdk.version}&lt;/source&gt;\r\n                    &lt;target&gt;${jdk.version}&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nAnd below there is my Java class:\r\n\r\n```java\r\nimport org.springframework.batch.core.Job;\r\nimport org.springframework.batch.core.JobExecution;\r\nimport org.springframework.batch.core.JobParameters;\r\nimport org.springframework.batch.core.launch.JobLauncher;\r\nimport org.springframework.context.ApplicationContext;\r\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\r\n\r\npublic class App {\r\n    public static void main(String[] args) {\r\n        String[] springConfig  =\r\n            {\r\n                &quot;spring/batch/jobs/job-hello-world.xml&quot;\r\n            };\r\n        ApplicationContext context =\r\n            new ClassPathXmlApplicationContext(springConfig);\r\n        JobLauncher jobLauncher = (JobLauncher) context.getBean(&quot;jobLauncher&quot;);\r\n        Job job = (Job) context.getBean(&quot;helloWorldJob&quot;);\r\n        try {\r\n            JobExecution execution = jobLauncher.run(job, new JobParameters());\r\n            System.out.println(&quot;Exit Status : &quot; + execution.getStatus());\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI am getting an error in import statements in my App.java class, and this is the message:\r\n\r\n&gt;_&quot;The import org.springframework cannot be resolved.&quot;_\r\n\r\nI clearly mentioned the dependencies in POM.xml, but my Java class still cannot pick the dependency from there.\r\n\r\n\r\n","title":"&quot;The import org.springframework cannot be resolved.&quot;","body":"<p>Here is my POM.xml file:</p>\n<pre><code>&lt;project&gt;\n    &lt;properties&gt;\n        &lt;jdk.version&gt;1.6&lt;/jdk.version&gt;\n        &lt;spring.version&gt;3.2.2.RELEASE&lt;/spring.version&gt;\n        &lt;spring.batch.version&gt;2.2.0.RELEASE&lt;/spring.batch.version&gt;\n        &lt;mysql.driver.version&gt;5.1.25&lt;/mysql.driver.version&gt;\n        &lt;junit.version&gt;4.11&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- Spring Core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Spring jdbc, for database --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Spring XML to/back object --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- MySQL database driver --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;${mysql.driver.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Spring Batch dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-batch-core&lt;/artifactId&gt;\n            &lt;version&gt;${spring.batch.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-batch-infrastructure&lt;/artifactId&gt;\n            &lt;version&gt;${spring.batch.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Spring Batch unit test --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-batch-test&lt;/artifactId&gt;\n            &lt;version&gt;${spring.batch.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;finalName&gt;spring-batch&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-eclipse-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.9&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;downloadSources&gt;true&lt;/downloadSources&gt;\n                    &lt;downloadJavadocs&gt;false&lt;/downloadJavadocs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${jdk.version}&lt;/source&gt;\n                    &lt;target&gt;${jdk.version}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>And below there is my Java class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.batch.core.Job;\nimport org.springframework.batch.core.JobExecution;\nimport org.springframework.batch.core.JobParameters;\nimport org.springframework.batch.core.launch.JobLauncher;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class App {\n    public static void main(String[] args) {\n        String[] springConfig  =\n            {\n                &quot;spring/batch/jobs/job-hello-world.xml&quot;\n            };\n        ApplicationContext context =\n            new ClassPathXmlApplicationContext(springConfig);\n        JobLauncher jobLauncher = (JobLauncher) context.getBean(&quot;jobLauncher&quot;);\n        Job job = (Job) context.getBean(&quot;helloWorldJob&quot;);\n        try {\n            JobExecution execution = jobLauncher.run(job, new JobParameters());\n            System.out.println(&quot;Exit Status : &quot; + execution.getStatus());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>I am getting an error in import statements in my App.java class, and this is the message:</p>\n<blockquote>\n<p><em>&quot;The import org.springframework cannot be resolved.&quot;</em></p>\n</blockquote>\n<p>I clearly mentioned the dependencies in POM.xml, but my Java class still cannot pick the dependency from there.</p>\n"},{"tags":["java","maven","pom.xml"],"answers":[{"comments":[{"owner":{"account_id":15131324,"reputation":45,"user_id":10919123,"display_name":"alexandros vassiliades"},"score":1,"creation_date":1696635199,"post_id":77247751,"comment_id":136183263,"body_markdown":"Thanks a lot my friend. Thats is exactly how I am tackling it right now. I mean I import newer verions of the jar that have vulnerability issues. \n\nBut I did not include that in the pom.xml that you are looking at cause I did not want to make the question even harder. \n\nYour verification that I am on the correct path, means a lot.\n\nThanks again for your feedback, it means a lot. Hope you have a good day :)","body":"Thanks a lot my friend. Thats is exactly how I am tackling it right now. I mean I import newer verions of the jar that have vulnerability issues.   But I did not include that in the pom.xml that you are looking at cause I did not want to make the question even harder.   Your verification that I am on the correct path, means a lot.  Thanks again for your feedback, it means a lot. Hope you have a good day :)"},{"owner":{"account_id":17598658,"reputation":573,"user_id":12769096,"display_name":"NoobCoder"},"score":0,"creation_date":1696635317,"post_id":77247751,"comment_id":136183271,"body_markdown":"@alexandrosvassiliades no problem, and feel free to open more questions, as long as they are detailed and you&#39;ve done some research by your own before :)","body":"@alexandrosvassiliades no problem, and feel free to open more questions, as long as they are detailed and you&#39;ve done some research by your own before :)"}],"tags":[],"owner":{"account_id":17598658,"reputation":573,"user_id":12769096,"display_name":"NoobCoder"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696634446,"creation_date":1696634446,"answer_id":77247751,"question_id":77247654,"body_markdown":"I can suggest on a quick &amp; simple solution, sort of &quot;quick and dirty&quot; one.\r\nJust import, directly in your pom, the `jsoup` dependency with a higher version, which is clean of vulnerabilities, and this will be taken into your final jar and override the transitive `jsoup 1.10.2` that is imported from the plugin.\r\n\r\nMaven uses the &quot;closest&quot; to the root dependency that is found in the pom, if there are any conflicts.\r\nWhich means that if you have two different `jsoup` dependencies which imported to your project, one directly from your pom and the other in a transitive way, the first will be taken into your final jar.\r\n\r\nYou can read about it and maybe also specifically add tags like `&lt;provided&gt;` to indicate you&#39;ll provide the version and the dependency. \r\n\r\nAn important note: Do check if the plugin is compatible and works with the other version of `jsoup`. Make sure it works with the new version you are importing instead of the one it tries to import.\r\n\r\nAlso, make sure you use the newest version of any plugin, because these plugins are quite popular and most of them fix the vulnerabilities in each release, so instead of playing with the transitive dependencies, just update &amp; upgrade the version of the plugin itself.\r\n\r\n ","title":"Maven PlugIn Dependency Exception","body":"<p>I can suggest on a quick &amp; simple solution, sort of &quot;quick and dirty&quot; one.\nJust import, directly in your pom, the <code>jsoup</code> dependency with a higher version, which is clean of vulnerabilities, and this will be taken into your final jar and override the transitive <code>jsoup 1.10.2</code> that is imported from the plugin.</p>\n<p>Maven uses the &quot;closest&quot; to the root dependency that is found in the pom, if there are any conflicts.\nWhich means that if you have two different <code>jsoup</code> dependencies which imported to your project, one directly from your pom and the other in a transitive way, the first will be taken into your final jar.</p>\n<p>You can read about it and maybe also specifically add tags like <code>&lt;provided&gt;</code> to indicate you'll provide the version and the dependency.</p>\n<p>An important note: Do check if the plugin is compatible and works with the other version of <code>jsoup</code>. Make sure it works with the new version you are importing instead of the one it tries to import.</p>\n<p>Also, make sure you use the newest version of any plugin, because these plugins are quite popular and most of them fix the vulnerabilities in each release, so instead of playing with the transitive dependencies, just update &amp; upgrade the version of the plugin itself.</p>\n"}],"owner":{"account_id":15131324,"reputation":45,"user_id":10919123,"display_name":"alexandros vassiliades"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77247751,"answer_count":1,"score":0,"last_activity_date":1696634446,"creation_date":1696631636,"question_id":77247654,"body_markdown":"I have a generic question that I know that it was not solvable until a point, based on the search results I could find on the web. \r\n\r\nThat refers to excluding dependencies that are downloaded by the plugins defined in a pom.xml file. \r\n\r\nI provide below my pom.xml file.\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.application&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;SemanticFramework&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;SemanticFramework Jersey Webapp&lt;/name&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;finalName&gt;SemanticFramework&lt;/finalName&gt;\r\n\t\t&lt;plugins&gt;\r\n\r\n\t\t\t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-war-plugin --&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t\t\t    &lt;version&gt;3.3.2&lt;/version&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.11.0&lt;/version&gt;\r\n\r\n\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;!-- Run the application using &quot;mvn embedded-glassfish:run&quot; --&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.glassfish&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-embedded-glassfish-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${glassfish.version}&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;goalPrefix&gt;embedded-glassfish&lt;/goalPrefix&gt;\r\n\t\t\t\t\t&lt;app&gt;C:/Users/mariarousi/eclipse-workspace/target/${project.build.finalName}.war&lt;/app&gt;\r\n\t\t\t\t\t&lt;autoDelete&gt;true&lt;/autoDelete&gt;\r\n\t\t\t\t\t&lt;port&gt;8080&lt;/port&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\r\n\r\n\r\n\r\n\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;jersey-servlet&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;${project.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n                         \r\n                       \r\n\r\n\r\n\t\t\t\t&lt;/dependencies&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.2&lt;/version&gt;\r\n\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\r\n\r\n\t&lt;dependencies&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;xstream&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;1.4.20&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t &lt;dependency&gt;\r\n            &lt;groupId&gt;org.codehaus.jettison&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jettison&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-servlet&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${jersey.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-json&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${jersey.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.8.2&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${jersey.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;2.13.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.5.13&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.extras&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;glassfish-embedded-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${glassfish.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.9.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;20230227&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.jena&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;apache-jena-libs&lt;/artifactId&gt;\r\n\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t&lt;version&gt;4.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.19.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.openlink.virtuoso&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;virtjdbc4&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;system&lt;/scope&gt;\r\n\t\t\t&lt;systemPath&gt;${project.basedir}/virtjdbc4.jar&lt;/systemPath&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\r\n\r\n\t\t\t&lt;groupId&gt;com.openlink.virtuoso&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;virt_jena3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;system&lt;/scope&gt;\r\n\t\t\t&lt;systemPath&gt;${project.basedir}/virt_jena3.jar&lt;/systemPath&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;okhttp&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.0-alpha.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;1.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;jersey.version&gt;1.19&lt;/jersey.version&gt;\r\n\t\t&lt;glassfish.version&gt;3.1.1&lt;/glassfish.version&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t&lt;/properties&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nthe idea is that I want to exclude the depndencies that are imported by the plugins defined in the aforementioned pom file cause they provide some vulnerabilities. More specifically, I would like to exclude the ```jsoup 1.10.2``` which is automatically imported by one of the plugins that I use (not sure exactly which one, but I guess org.apache.maven.plugins).\r\n\r\nAs I know until a point this operation was not possible check also here (https://www.baeldung.com/mvn-plugin-dependency-exclusion), but due to me not being a pure java developer I am not sure if I missed something that allows such a functionality.\r\n\r\nI would like also to mention that the java used is jdk-11 (before the fire starts I know I know that is ultra old version of java, but the application was built initially on it, and the client does not want changes in that regard).\r\n\r\nSo any ideas would be more than welcome.\r\n\r\nAlso, apologies if the question is not quite formalized in the manuals of the stack overflow community, but I am also a non-writer in stack overflow.\r\n\r\n","title":"Maven PlugIn Dependency Exception","body":"<p>I have a generic question that I know that it was not solvable until a point, based on the search results I could find on the web.</p>\n<p>That refers to excluding dependencies that are downloaded by the plugins defined in a pom.xml file.</p>\n<p>I provide below my pom.xml file.</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.application&lt;/groupId&gt;\n    &lt;artifactId&gt;SemanticFramework&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;SemanticFramework Jersey Webapp&lt;/name&gt;\n    &lt;build&gt;\n        &lt;finalName&gt;SemanticFramework&lt;/finalName&gt;\n        &lt;plugins&gt;\n\n                &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-war-plugin --&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.3.2&lt;/version&gt;\n                &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n\n\n            &lt;/plugin&gt;\n            &lt;!-- Run the application using &quot;mvn embedded-glassfish:run&quot; --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.glassfish&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-embedded-glassfish-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${glassfish.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;goalPrefix&gt;embedded-glassfish&lt;/goalPrefix&gt;\n                    &lt;app&gt;C:/Users/mariarousi/eclipse-workspace/target/${project.build.finalName}.war&lt;/app&gt;\n                    &lt;autoDelete&gt;true&lt;/autoDelete&gt;\n                    &lt;port&gt;8080&lt;/port&gt;\n                &lt;/configuration&gt;\n\n\n\n\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n                        &lt;artifactId&gt;jersey-servlet&lt;/artifactId&gt;\n                        &lt;version&gt;${project.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n                        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n                        &lt;version&gt;3.0.1&lt;/version&gt;\n                    &lt;/dependency&gt;\n                         \n                       \n\n\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.2&lt;/version&gt;\n\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n\n\n    &lt;dependencies&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;\n            &lt;artifactId&gt;xstream&lt;/artifactId&gt;\n            &lt;version&gt;1.4.20&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n         &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.jettison&lt;/groupId&gt;\n            &lt;artifactId&gt;jettison&lt;/artifactId&gt;\n            &lt;version&gt;1.5.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-servlet&lt;/artifactId&gt;\n            &lt;version&gt;${jersey.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-json&lt;/artifactId&gt;\n            &lt;version&gt;${jersey.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.8.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n            &lt;version&gt;${jersey.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.13.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n            &lt;version&gt;4.5.13&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;glassfish-embedded-web&lt;/artifactId&gt;\n            &lt;version&gt;${glassfish.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;2.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20230227&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\n            &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\n            &lt;version&gt;1.4.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.jena&lt;/groupId&gt;\n            &lt;artifactId&gt;apache-jena-libs&lt;/artifactId&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;version&gt;4.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n            &lt;version&gt;1.19.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.openlink.virtuoso&lt;/groupId&gt;\n            &lt;artifactId&gt;virtjdbc4&lt;/artifactId&gt;\n            &lt;version&gt;4.0&lt;/version&gt;\n            &lt;scope&gt;system&lt;/scope&gt;\n            &lt;systemPath&gt;${project.basedir}/virtjdbc4.jar&lt;/systemPath&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n\n\n            &lt;groupId&gt;com.openlink.virtuoso&lt;/groupId&gt;\n            &lt;artifactId&gt;virt_jena3&lt;/artifactId&gt;\n            &lt;version&gt;3.0&lt;/version&gt;\n            &lt;scope&gt;system&lt;/scope&gt;\n            &lt;systemPath&gt;${project.basedir}/virt_jena3.jar&lt;/systemPath&gt;\n        &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n            &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n            &lt;version&gt;5.0.0-alpha.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n\n    &lt;/dependencies&gt;\n\n    &lt;properties&gt;\n        &lt;jersey.version&gt;1.19&lt;/jersey.version&gt;\n        &lt;glassfish.version&gt;3.1.1&lt;/glassfish.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n<p>the idea is that I want to exclude the depndencies that are imported by the plugins defined in the aforementioned pom file cause they provide some vulnerabilities. More specifically, I would like to exclude the <code>jsoup 1.10.2</code> which is automatically imported by one of the plugins that I use (not sure exactly which one, but I guess org.apache.maven.plugins).</p>\n<p>As I know until a point this operation was not possible check also here (<a href=\"https://www.baeldung.com/mvn-plugin-dependency-exclusion\" rel=\"nofollow noreferrer\">https://www.baeldung.com/mvn-plugin-dependency-exclusion</a>), but due to me not being a pure java developer I am not sure if I missed something that allows such a functionality.</p>\n<p>I would like also to mention that the java used is jdk-11 (before the fire starts I know I know that is ultra old version of java, but the application was built initially on it, and the client does not want changes in that regard).</p>\n<p>So any ideas would be more than welcome.</p>\n<p>Also, apologies if the question is not quite formalized in the manuals of the stack overflow community, but I am also a non-writer in stack overflow.</p>\n"},{"tags":["java","google-api","google-translate","google-translation-api"],"comments":[{"owner":{"account_id":120436,"reputation":2639,"user_id":312884,"display_name":"r0ast3d"},"score":5,"creation_date":1321422591,"post_id":8147284,"comment_id":9999928,"body_markdown":"Important: Google Translate API v2 is now available as a paid service. The courtesy limit for existing Translate API v2 projects created prior to August 24, 2011 will be reduced to zero on December 1, 2011. In addition, the number of requests your application can make per day will be limited.","body":"Important: Google Translate API v2 is now available as a paid service. The courtesy limit for existing Translate API v2 projects created prior to August 24, 2011 will be reduced to zero on December 1, 2011. In addition, the number of requests your application can make per day will be limited."}],"answers":[{"comments":[{"owner":{"account_id":4418840,"reputation":7587,"user_id":3599535,"accept_rate":39,"display_name":"Riyafa Abdul Hameed"},"score":0,"creation_date":1463296573,"post_id":8322003,"comment_id":62000225,"body_markdown":"Is it free? Does it require an api key?","body":"Is it free? Does it require an api key?"},{"owner":{"account_id":55404,"reputation":1970,"user_id":165927,"accept_rate":67,"display_name":"MosheElisha"},"score":0,"creation_date":1463521833,"post_id":8322003,"comment_id":62098641,"body_markdown":"The source code can be used freely. It does require an API key - so you will be billed by Google according to the usage.","body":"The source code can be used freely. It does require an API key - so you will be billed by Google according to the usage."}],"tags":[],"owner":{"account_id":55404,"reputation":1970,"user_id":165927,"accept_rate":67,"display_name":"MosheElisha"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1322634789,"creation_date":1322634789,"answer_id":8322003,"question_id":8147284,"body_markdown":"You can use [Google Translate API v2 Java][1]. It has a core module that you can call from your Java code and also a command line interface module.\r\n\r\n\r\n  [1]: http://code.google.com/p/google-translate-api-v2-java/","title":"How to use Google Translate API in my Java application?","body":"<p>You can use <a href=\"http://code.google.com/p/google-translate-api-v2-java/\" rel=\"nofollow\">Google Translate API v2 Java</a>. It has a core module that you can call from your Java code and also a command line interface module.</p>\n"},{"comments":[{"owner":{"account_id":1835474,"reputation":4777,"user_id":1665964,"accept_rate":33,"display_name":"Tapa Save"},"score":0,"creation_date":1402342519,"post_id":16325094,"comment_id":37226189,"body_markdown":"java-google-translate-text-to-speech translate between English and another languages (mostly). In case translate from &#39;Russian&#39; to &#39;Estonian&#39; I get &#39;? ? ? &#39; answers. You can translate &#39;Russian&#39;-&gt;&#39;English&#39;-&gt;&#39;Estonian&#39; and this will work correct, but this way not always right in semantic rules.","body":"java-google-translate-text-to-speech translate between English and another languages (mostly). In case translate from &#39;Russian&#39; to &#39;Estonian&#39; I get &#39;? ? ? &#39; answers. You can translate &#39;Russian&#39;-&gt;&#39;English&#39;-&gt;&#39;Estonian&#39; and this will work correct, but this way not always right in semantic rules."},{"owner":{"account_id":1738251,"reputation":2510,"user_id":1590323,"accept_rate":57,"display_name":"jobukkit"},"score":0,"creation_date":1402679053,"post_id":16325094,"comment_id":37382157,"body_markdown":"How can this be free? Is it legit?","body":"How can this be free? Is it legit?"},{"owner":{"account_id":1327442,"reputation":109963,"user_id":1420197,"accept_rate":95,"display_name":"Ionică Bizău"},"score":0,"creation_date":1402679393,"post_id":16325094,"comment_id":37382337,"body_markdown":"@JopVernooij I have not checked the source code, but I guess it would be so simple to stream data from a page like this: https://translate.google.com/translate_tts?ie=UTF-8&amp;q=Hello%20World&amp;tl=en&amp;total=1&amp;idx=0&amp;textlen=11&amp;client=t&amp;prev=input (Google Translate Speech: *Hello World*)","body":"@JopVernooij I have not checked the source code, but I guess it would be so simple to stream data from a page like this: <a href=\"https://translate.google.com/translate_tts?ie=UTF-8&amp;q=Hello%20World&amp;tl=en&amp;total=1&amp;idx=0&amp;textlen=11&amp;client=t&amp;prev=input\" rel=\"nofollow noreferrer\">translate.google.com/&hellip;</a> (Google Translate Speech: <i>Hello World</i>)"},{"owner":{"account_id":1738251,"reputation":2510,"user_id":1590323,"accept_rate":57,"display_name":"jobukkit"},"score":0,"creation_date":1402679448,"post_id":16325094,"comment_id":37382360,"body_markdown":"@Ionic&#227;Biz&#227;u I don&#39;t think that is allowed.","body":"@Ionic&#227;Biz&#227;u I don&#39;t think that is allowed."},{"owner":{"account_id":1327442,"reputation":109963,"user_id":1420197,"accept_rate":95,"display_name":"Ionică Bizău"},"score":0,"creation_date":1402679615,"post_id":16325094,"comment_id":37382454,"body_markdown":"@JopVernooij Any reason for why it wouldn&#39;t be allowed? I am now a lawyer to tell you if it&#39;s allowed or not, but it&#39;s just a public request to an url.","body":"@JopVernooij Any reason for why it wouldn&#39;t be allowed? I am now a lawyer to tell you if it&#39;s allowed or not, but it&#39;s just a public request to an url."},{"owner":{"account_id":1281052,"reputation":1567,"user_id":1235139,"accept_rate":40,"display_name":"gursahib.singh.sahni"},"score":0,"creation_date":1422369774,"post_id":16325094,"comment_id":44715305,"body_markdown":"java.net.SocketException: Permission denied: connect","body":"java.net.SocketException: Permission denied: connect"},{"owner":{"account_id":1327442,"reputation":109963,"user_id":1420197,"accept_rate":95,"display_name":"Ionică Bizău"},"score":1,"creation_date":1422369935,"post_id":16325094,"comment_id":44715408,"body_markdown":"@anonymous See [this](https://www.google.ro/search?q=java.net.SocketException%3A+Permission+denied%3A+connect&amp;oq=java.net.SocketException%3A+Permission+denied%3A+connect). Probably it helps you.","body":"@anonymous See <a href=\"https://www.google.ro/search?q=java.net.SocketException%3A+Permission+denied%3A+connect&amp;oq=java.net.SocketException%3A+Permission+denied%3A+connect\" rel=\"nofollow noreferrer\">this</a>. Probably it helps you."},{"owner":{"account_id":1281052,"reputation":1567,"user_id":1235139,"accept_rate":40,"display_name":"gursahib.singh.sahni"},"score":0,"creation_date":1422370520,"post_id":16325094,"comment_id":44715780,"body_markdown":"just found it ! \n\n\n-------------------------------------------------\n**Audio audio = Audio.getInstance();\nInputStream sound  = audio.getAudio(&quot;I am a bus&quot;, Language.ENGLISH);\naudio.play(sound);**","body":"just found it !    ------------------------------------------------- <b>Audio audio = Audio.getInstance(); InputStream sound  = audio.getAudio(&quot;I am a bus&quot;, Language.ENGLISH); audio.play(sound);</b>"},{"owner":{"account_id":1327442,"reputation":109963,"user_id":1420197,"accept_rate":95,"display_name":"Ionică Bizău"},"score":0,"creation_date":1422371140,"post_id":16325094,"comment_id":44716218,"body_markdown":"Cool, you can also check out [my example on GitHub](https://github.com/IonicaBizau/text-to-speech).","body":"Cool, you can also check out <a href=\"https://github.com/IonicaBizau/text-to-speech\" rel=\"nofollow noreferrer\">my example on GitHub</a>."},{"owner":{"account_id":1756356,"reputation":2251,"user_id":1604309,"accept_rate":64,"display_name":"Mateusz Kaflowski"},"score":3,"creation_date":1452522022,"post_id":16325094,"comment_id":57193257,"body_markdown":"I get java.io.IOException: Server returned HTTP response code: 403 for URL from some time. Do you have any solution for that?","body":"I get java.io.IOException: Server returned HTTP response code: 403 for URL from some time. Do you have any solution for that?"},{"owner":{"account_id":1327442,"reputation":109963,"user_id":1420197,"accept_rate":95,"display_name":"Ionică Bizău"},"score":0,"creation_date":1452527157,"post_id":16325094,"comment_id":57196805,"body_markdown":"@MateuszKaflowski Hmm, could it be that the things were changed since I posted the answer? I&#39;m now a Node.js dev, not really into Java anymore, but contributions in my repo are more than welcome!","body":"@MateuszKaflowski Hmm, could it be that the things were changed since I posted the answer? I&#39;m now a Node.js dev, not really into Java anymore, but contributions in my repo are more than welcome!"},{"owner":{"account_id":1327442,"reputation":109963,"user_id":1420197,"accept_rate":95,"display_name":"Ionică Bizău"},"score":0,"creation_date":1461508907,"post_id":16325094,"comment_id":61220277,"body_markdown":"@Ran Maybe [this](https://github.com/wihoho/java-google-translate-text-to-speech) helps. Looks more updated.","body":"@Ran Maybe <a href=\"https://github.com/wihoho/java-google-translate-text-to-speech\" rel=\"nofollow noreferrer\">this</a> helps. Looks more updated."},{"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"score":1,"creation_date":1520375935,"post_id":16325094,"comment_id":85287778,"body_markdown":"@IonicăBizău: This also doesn&#39;t work anymore\n`java.io.IOException: Server returned HTTP response code: 503 for URL: http://translate.google.com/translate_a/t?text=Hello%20World&amp;oe=UTF-8&amp;tl=en&amp;client=z&amp;sl=&amp;ie=UTF-8`","body":"@IonicăBizău: This also doesn&#39;t work anymore <code>java.io.IOException: Server returned HTTP response code: 503 for URL: http:&#47;&#47;translate.google.com&#47;translate_a&#47;t?text=Hello%20World&zwnj;&#8203;&amp;oe=UTF-8&amp;tl=en&amp;clie&zwnj;&#8203;nt=z&amp;sl=&amp;ie=UTF-8</code>"},{"owner":{"account_id":1714694,"reputation":409,"user_id":2287769,"accept_rate":78,"display_name":"Chamithra Thenuwara"},"score":0,"creation_date":1563181115,"post_id":16325094,"comment_id":100600908,"body_markdown":"@Ionică Bizău I&#39;m getting this error message - `java.io.IOException: Server returned HTTP response code: 403 for URL: http://translate.google.com.br/translate_a/t?client=t&amp;text=Hello!&amp;hl=en&amp;sl=en&amp;tl=ro&amp;multires=1&amp;prev=btn&amp;ssel=0&amp;tsel=0&amp;sc=1`","body":"@Ionică Bizău I&#39;m getting this error message - <code>java.io.IOException: Server returned HTTP response code: 403 for URL: http:&#47;&#47;translate.google.com.br&#47;translate_a&#47;t?client=t&amp;text=H&zwnj;&#8203;ello!&amp;hl=en&amp;sl=en&amp;tl&zwnj;&#8203;=ro&amp;multires=1&amp;prev=&zwnj;&#8203;btn&amp;ssel=0&amp;tsel=0&amp;sc&zwnj;&#8203;=1</code>"},{"owner":{"account_id":11771802,"reputation":758,"user_id":8614637,"display_name":"DeveloperKurt"},"score":0,"creation_date":1651100170,"post_id":16325094,"comment_id":127285223,"body_markdown":"Google seems to have removed the support for this project, it is no longer working.","body":"Google seems to have removed the support for this project, it is no longer working."}],"tags":[],"owner":{"account_id":1327442,"reputation":109963,"user_id":1420197,"accept_rate":95,"display_name":"Ionică Bizău"},"comment_count":15,"down_vote_count":2,"up_vote_count":28,"is_accepted":false,"score":26,"last_activity_date":1367436880,"creation_date":1367436880,"answer_id":16325094,"question_id":8147284,"body_markdown":"Use [java-google-translate-text-to-speech][1] instead of [Google Translate API v2 Java][2].\n\n## About java-google-translate-text-to-speech\nApi unofficial with the main features of Google Translate in Java.\n\n### Easy to use! \nIt also provide text to speech api. If you want to translate the text &quot;Hello!&quot; in Romanian just write:\n\n    Translator translate = Translator.getInstance();\n    String text = translate.translate(&quot;Hello!&quot;, Language.ENGLISH, Language.ROMANIAN);\n    System.out.println(text); // &quot;Bună ziua!&quot; \n\n### It&#39;s free!\n\nAs @r0ast3d correctly said:\n&gt; Important: Google Translate API v2 is now available as a paid service. The courtesy limit for existing Translate API v2 projects created prior to August 24, 2011 will be reduced to zero on December 1, 2011. In addition, the number of requests your application can make per day will be limited. \n\nThis is correct: just see [the official page][3]:\n\n&gt;Google Translate API is available as a paid service. See the Pricing and FAQ pages for details.\n\n**BUT**, [java-google-translate-text-to-speech][1] is FREE!\n\n### Example!\nI&#39;ve created a sample application that demonstrates that this works. Try it here: https://github.com/IonicaBizau/text-to-speech\n\n  [1]: http://code.google.com/p/java-google-translate-text-to-speech/\n  [2]: http://code.google.com/p/google-translate-api-v2-java/\n  [3]: https://developers.google.com/translate/","title":"How to use Google Translate API in my Java application?","body":"<p>Use <a href=\"http://code.google.com/p/java-google-translate-text-to-speech/\" rel=\"noreferrer\">java-google-translate-text-to-speech</a> instead of <a href=\"http://code.google.com/p/google-translate-api-v2-java/\" rel=\"noreferrer\">Google Translate API v2 Java</a>.</p>\n<h2>About java-google-translate-text-to-speech</h2>\n<p>Api unofficial with the main features of Google Translate in Java.</p>\n<h3>Easy to use!</h3>\n<p>It also provide text to speech api. If you want to translate the text &quot;Hello!&quot; in Romanian just write:</p>\n<pre><code>Translator translate = Translator.getInstance();\nString text = translate.translate(&quot;Hello!&quot;, Language.ENGLISH, Language.ROMANIAN);\nSystem.out.println(text); // &quot;Bună ziua!&quot; \n</code></pre>\n<h3>It's free!</h3>\n<p>As @r0ast3d correctly said:</p>\n<blockquote>\n<p>Important: Google Translate API v2 is now available as a paid service. The courtesy limit for existing Translate API v2 projects created prior to August 24, 2011 will be reduced to zero on December 1, 2011. In addition, the number of requests your application can make per day will be limited.</p>\n</blockquote>\n<p>This is correct: just see <a href=\"https://developers.google.com/translate/\" rel=\"noreferrer\">the official page</a>:</p>\n<blockquote>\n<p>Google Translate API is available as a paid service. See the Pricing and FAQ pages for details.</p>\n</blockquote>\n<p><strong>BUT</strong>, <a href=\"http://code.google.com/p/java-google-translate-text-to-speech/\" rel=\"noreferrer\">java-google-translate-text-to-speech</a> is FREE!</p>\n<h3>Example!</h3>\n<p>I've created a sample application that demonstrates that this works. Try it here: <a href=\"https://github.com/IonicaBizau/text-to-speech\" rel=\"noreferrer\">https://github.com/IonicaBizau/text-to-speech</a></p>\n"},{"tags":[],"owner":{"account_id":2030346,"reputation":1538,"user_id":1814229,"display_name":"Lakshman Kambam"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1518871919,"creation_date":1481156216,"answer_id":41029662,"question_id":8147284,"body_markdown":"Generate your own API key [here][1]. Check out the documentation [here][2].\r\n\r\nYou may need to set up a billing account when you try to enable the `Google Cloud Translation API` in your account.\r\n\r\nBelow is a quick start example which translates two `English` strings to `Spanish`:\r\n\r\n    import java.io.IOException;\r\n    import java.security.GeneralSecurityException;\r\n    import java.util.Arrays;\r\n    \r\n    import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\r\n    import com.google.api.client.json.gson.GsonFactory;\r\n    import com.google.api.services.translate.Translate;\r\n    import com.google.api.services.translate.model.TranslationsListResponse;\r\n    import com.google.api.services.translate.model.TranslationsResource;\r\n    \r\n    public class QuickstartSample\r\n    {\r\n    \tpublic static void main(String[] arguments) throws IOException, GeneralSecurityException\r\n    \t{\r\n    \t\tTranslate t = new Translate.Builder(\r\n    \t\t\t\tGoogleNetHttpTransport.newTrustedTransport()\r\n    \t\t\t\t, GsonFactory.getDefaultInstance(), null)\r\n    \t\t\t\t// Set your application name\r\n    \t\t\t\t.setApplicationName(&quot;Stackoverflow-Example&quot;)\r\n    \t\t\t\t.build();\r\n    \t\tTranslate.Translations.List list = t.new Translations().list(\r\n    \t\t\t\tArrays.asList(\r\n    \t\t\t\t\t\t// Pass in list of strings to be translated\r\n    \t\t\t\t\t\t&quot;Hello World&quot;,\r\n    \t\t\t\t\t\t&quot;How to use Google Translate from Java&quot;),\r\n    \t\t\t\t// Target language\r\n    \t\t\t\t&quot;ES&quot;);\r\n    \r\n    \t\t// TODO: Set your API-Key from https://console.developers.google.com/\r\n    \t\tlist.setKey(&quot;your-api-key&quot;);\r\n    \t\tTranslationsListResponse response = list.execute();\r\n    \t\tfor (TranslationsResource translationsResource : response.getTranslations())\r\n    \t\t{\r\n    \t\t\tSystem.out.println(translationsResource.getTranslatedText());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nRequired maven dependencies for the code snippet:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;google-cloud-translate&lt;/artifactId&gt;\r\n    \t&lt;version&gt;LATEST&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.google.http-client&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;google-http-client-gson&lt;/artifactId&gt;\r\n    \t&lt;version&gt;LATEST&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  [1]: https://console.developers.google.com/\r\n  [2]: https://developers.google.com/resources/api-libraries/documentation/translate/v2/java/latest/","title":"How to use Google Translate API in my Java application?","body":"<p>Generate your own API key <a href=\"https://console.developers.google.com/\" rel=\"noreferrer\">here</a>. Check out the documentation <a href=\"https://developers.google.com/resources/api-libraries/documentation/translate/v2/java/latest/\" rel=\"noreferrer\">here</a>.</p>\n\n<p>You may need to set up a billing account when you try to enable the <code>Google Cloud Translation API</code> in your account.</p>\n\n<p>Below is a quick start example which translates two <code>English</code> strings to <code>Spanish</code>:</p>\n\n<pre><code>import java.io.IOException;\nimport java.security.GeneralSecurityException;\nimport java.util.Arrays;\n\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\nimport com.google.api.client.json.gson.GsonFactory;\nimport com.google.api.services.translate.Translate;\nimport com.google.api.services.translate.model.TranslationsListResponse;\nimport com.google.api.services.translate.model.TranslationsResource;\n\npublic class QuickstartSample\n{\n    public static void main(String[] arguments) throws IOException, GeneralSecurityException\n    {\n        Translate t = new Translate.Builder(\n                GoogleNetHttpTransport.newTrustedTransport()\n                , GsonFactory.getDefaultInstance(), null)\n                // Set your application name\n                .setApplicationName(\"Stackoverflow-Example\")\n                .build();\n        Translate.Translations.List list = t.new Translations().list(\n                Arrays.asList(\n                        // Pass in list of strings to be translated\n                        \"Hello World\",\n                        \"How to use Google Translate from Java\"),\n                // Target language\n                \"ES\");\n\n        // TODO: Set your API-Key from https://console.developers.google.com/\n        list.setKey(\"your-api-key\");\n        TranslationsListResponse response = list.execute();\n        for (TranslationsResource translationsResource : response.getTranslations())\n        {\n            System.out.println(translationsResource.getTranslatedText());\n        }\n    }\n}\n</code></pre>\n\n<p>Required maven dependencies for the code snippet:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;google-cloud-translate&lt;/artifactId&gt;\n    &lt;version&gt;LATEST&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.http-client&lt;/groupId&gt;\n    &lt;artifactId&gt;google-http-client-gson&lt;/artifactId&gt;\n    &lt;version&gt;LATEST&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9330948,"reputation":2709,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"score":1,"creation_date":1517654930,"post_id":48159904,"comment_id":84189830,"body_markdown":"it is 100% working. I have just used it one moment ago. What is the issue/error?","body":"it is 100% working. I have just used it one moment ago. What is the issue/error?"},{"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"score":3,"creation_date":1520376617,"post_id":48159904,"comment_id":85288086,"body_markdown":"Amazing. The only unofficial but working method I found. :)","body":"Amazing. The only unofficial but working method I found. :)"},{"owner":{"account_id":5812390,"reputation":539,"user_id":4583017,"accept_rate":53,"display_name":"Sachini Wickramaratne"},"score":2,"creation_date":1536229161,"post_id":48159904,"comment_id":91352581,"body_markdown":"Hi, This is an amazing solution. I just also need it to detect the input language. Is there any way I could do that? &#39;auto&#39; wont work","body":"Hi, This is an amazing solution. I just also need it to detect the input language. Is there any way I could do that? &#39;auto&#39; wont work"},{"owner":{"account_id":9330948,"reputation":2709,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"score":2,"creation_date":1536265958,"post_id":48159904,"comment_id":91372853,"body_markdown":"Have fixed script. Replaced sourceLang = &#39;auto&#39; with sourceLang = &#39;&#39;. \nNow you can translate with such code: translate(&quot;&quot;, &quot;de&quot;, text).\nAnd after redeploying your google script do not forget to change &quot;Project version&quot;, because it does apply your changes if you do not do it.","body":"Have fixed script. Replaced sourceLang = &#39;auto&#39; with sourceLang = &#39;&#39;.  Now you can translate with such code: translate(&quot;&quot;, &quot;de&quot;, text). And after redeploying your google script do not forget to change &quot;Project version&quot;, because it does apply your changes if you do not do it."},{"owner":{"account_id":9330948,"reputation":2709,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"score":1,"creation_date":1536266093,"post_id":48159904,"comment_id":91372912,"body_markdown":"From official google docs:\nsourceLanguage - the language code in which text is written. If it is set to the empty string, the source language code will be auto-detected","body":"From official google docs: sourceLanguage - the language code in which text is written. If it is set to the empty string, the source language code will be auto-detected"},{"owner":{"account_id":4381097,"reputation":3399,"user_id":3572733,"accept_rate":46,"display_name":"Bhagwati Malav"},"score":2,"creation_date":1538128516,"post_id":48159904,"comment_id":92044309,"body_markdown":"@MaksymPecheniuk I used this, it works fine. But i am calling this more than 50k times in a day, so it gives error &quot;too many request in a day&quot;. Is there any limition on number of requests here ?","body":"@MaksymPecheniuk I used this, it works fine. But i am calling this more than 50k times in a day, so it gives error &quot;too many request in a day&quot;. Is there any limition on number of requests here ?"},{"owner":{"account_id":9330948,"reputation":2709,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"score":1,"creation_date":1538129496,"post_id":48159904,"comment_id":92044846,"body_markdown":"Yes, there are limitation for 24 hours. But you can create 10 or more google accounts and switch them. I personally have created poo of 30 accounts and scripts for each of them.","body":"Yes, there are limitation for 24 hours. But you can create 10 or more google accounts and switch them. I personally have created poo of 30 accounts and scripts for each of them."},{"owner":{"account_id":5422116,"reputation":146,"user_id":4315459,"display_name":"Alvaro Lemos"},"score":1,"creation_date":1559041000,"post_id":48159904,"comment_id":99286499,"body_markdown":"This is amazing.","body":"This is amazing."},{"owner":{"account_id":192592,"reputation":21571,"user_id":433814,"accept_rate":86,"display_name":"Marcello DeSales"},"score":2,"creation_date":1563487778,"post_id":48159904,"comment_id":100727460,"body_markdown":"Worked like a charm! Thank you! If anyone needs SpringBoot version, here&#39;s the request object... `\n    String url = &quot;https://script.google.com/macros/s/AKf****xhI/exec?q=&quot; + URLEncoder.encode(text, &quot;UTF-8&quot;) + &quot;&amp;target=&quot; + this.to + &quot;&amp;source=&quot; + this.from;\n    String translatedText = restTemplate.getForObject(url, String.class);`","body":"Worked like a charm! Thank you! If anyone needs SpringBoot version, here&#39;s the request object... `     String url = &quot;<a href=\"https://script.google.com/macros/s/AKf\" rel=\"nofollow noreferrer\">script.google.com/macros/s/AKf</a>****xhI/exec?q=&quot; + URLEncoder.encode(text, &quot;UTF-8&quot;) + &quot;&amp;target=&quot; + this.to + &quot;&amp;source=&quot; + this.from;     String translatedText = restTemplate.getForObject(url, String.class);`"},{"owner":{"account_id":11407644,"reputation":843,"user_id":8362671,"accept_rate":60,"display_name":"Angad Bansode"},"score":0,"creation_date":1683613828,"post_id":48159904,"comment_id":134389168,"body_markdown":"@Maksym, it&#39;s not working for me, getting HTML content in the response. Not translating text","body":"@Maksym, it&#39;s not working for me, getting HTML content in the response. Not translating text"}],"tags":[],"owner":{"account_id":9330948,"reputation":2709,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"comment_count":10,"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1538140694,"creation_date":1515457556,"answer_id":48159904,"question_id":8147284,"body_markdown":"You can use [google script][1] which has **FREE** [translate API][2]. All you need is a common google account and do these **THREE EASY STEPS**.&lt;br&gt;\r\n**1)** Create new script with such code on [google script][1]:\r\n\r\n    var mock = {\r\n      parameter:{\r\n        q:&#39;hello&#39;,\r\n        source:&#39;en&#39;,\r\n        target:&#39;fr&#39;\r\n      }\r\n    };\r\n    \r\n    \r\n    function doGet(e) {\r\n      e = e || mock;\r\n    \r\n      var sourceText = &#39;&#39;\r\n      if (e.parameter.q){\r\n        sourceText = e.parameter.q;\r\n      }\r\n    \r\n      var sourceLang = &#39;&#39;;\r\n      if (e.parameter.source){\r\n        sourceLang = e.parameter.source;\r\n      }\r\n    \r\n      var targetLang = &#39;en&#39;;\r\n      if (e.parameter.target){\r\n        targetLang = e.parameter.target;\r\n      }\r\n    \r\n      var translatedText = LanguageApp.translate(sourceText, sourceLang, targetLang, {contentType: &#39;html&#39;});\r\n    \r\n      return ContentService.createTextOutput(translatedText).setMimeType(ContentService.MimeType.JSON);\r\n    }\r\n    \r\n**2)** Click Publish -&gt; Deploy as webapp -&gt; Who has access to the app: **Anyone even anonymous** -&gt; Deploy. And then copy your web app url, you will need it for calling translate API. &lt;br&gt;\r\n[![google script deploy][3]][3]\r\n\r\n**3)** Use this java code for testing your API:\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    import java.net.URLEncoder;\r\n    \r\n    public class Translator {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            String text = &quot;Hello world!&quot;;\r\n            //Translated text: Hallo Welt!\r\n            System.out.println(&quot;Translated text: &quot; + translate(&quot;en&quot;, &quot;de&quot;, text));\r\n        }\r\n    \r\n        private static String translate(String langFrom, String langTo, String text) throws IOException {\r\n            // INSERT YOU URL HERE\r\n            String urlStr = &quot;https://your.google.script.url&quot; +\r\n                    &quot;?q=&quot; + URLEncoder.encode(text, &quot;UTF-8&quot;) +\r\n                    &quot;&amp;target=&quot; + langTo +\r\n                    &quot;&amp;source=&quot; + langFrom;\r\n            URL url = new URL(urlStr);\r\n            StringBuilder response = new StringBuilder();\r\n            HttpURLConnection con = (HttpURLConnection) url.openConnection();\r\n            con.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0&quot;);\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\r\n            String inputLine;\r\n            while ((inputLine = in.readLine()) != null) {\r\n                response.append(inputLine);\r\n            }\r\n            in.close();\r\n            return response.toString();\r\n        }\r\n    \r\n    }\r\n\r\nAs it is free, there are **QUATA LIMITS**: https://docs.google.com/macros/dashboard\r\n  [1]: https://www.google.com/script/start/\r\n  [2]: https://developers.google.com/apps-script/reference/language/language-app\r\n  [3]: https://i.stack.imgur.com/VANXa.png\r\n  [4]: https://i.stack.imgur.com/TU75Y.png","title":"How to use Google Translate API in my Java application?","body":"<p>You can use <a href=\"https://www.google.com/script/start/\" rel=\"noreferrer\">google script</a> which has <strong>FREE</strong> <a href=\"https://developers.google.com/apps-script/reference/language/language-app\" rel=\"noreferrer\">translate API</a>. All you need is a common google account and do these <strong>THREE EASY STEPS</strong>.<br>\n<strong>1)</strong> Create new script with such code on <a href=\"https://www.google.com/script/start/\" rel=\"noreferrer\">google script</a>:</p>\n\n<pre><code>var mock = {\n  parameter:{\n    q:'hello',\n    source:'en',\n    target:'fr'\n  }\n};\n\n\nfunction doGet(e) {\n  e = e || mock;\n\n  var sourceText = ''\n  if (e.parameter.q){\n    sourceText = e.parameter.q;\n  }\n\n  var sourceLang = '';\n  if (e.parameter.source){\n    sourceLang = e.parameter.source;\n  }\n\n  var targetLang = 'en';\n  if (e.parameter.target){\n    targetLang = e.parameter.target;\n  }\n\n  var translatedText = LanguageApp.translate(sourceText, sourceLang, targetLang, {contentType: 'html'});\n\n  return ContentService.createTextOutput(translatedText).setMimeType(ContentService.MimeType.JSON);\n}\n</code></pre>\n\n<p><strong>2)</strong> Click Publish -> Deploy as webapp -> Who has access to the app: <strong>Anyone even anonymous</strong> -> Deploy. And then copy your web app url, you will need it for calling translate API. <br>\n<a href=\"https://i.stack.imgur.com/VANXa.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/VANXa.png\" alt=\"google script deploy\"></a></p>\n\n<p><strong>3)</strong> Use this java code for testing your API:</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.net.URLEncoder;\n\npublic class Translator {\n\n    public static void main(String[] args) throws IOException {\n        String text = \"Hello world!\";\n        //Translated text: Hallo Welt!\n        System.out.println(\"Translated text: \" + translate(\"en\", \"de\", text));\n    }\n\n    private static String translate(String langFrom, String langTo, String text) throws IOException {\n        // INSERT YOU URL HERE\n        String urlStr = \"https://your.google.script.url\" +\n                \"?q=\" + URLEncoder.encode(text, \"UTF-8\") +\n                \"&amp;target=\" + langTo +\n                \"&amp;source=\" + langFrom;\n        URL url = new URL(urlStr);\n        StringBuilder response = new StringBuilder();\n        HttpURLConnection con = (HttpURLConnection) url.openConnection();\n        con.setRequestProperty(\"User-Agent\", \"Mozilla/5.0\");\n        BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\n        String inputLine;\n        while ((inputLine = in.readLine()) != null) {\n            response.append(inputLine);\n        }\n        in.close();\n        return response.toString();\n    }\n\n}\n</code></pre>\n\n<p>As it is free, there are <strong>QUATA LIMITS</strong>: <a href=\"https://docs.google.com/macros/dashboard\" rel=\"noreferrer\">https://docs.google.com/macros/dashboard</a></p>\n"},{"tags":[],"owner":{"account_id":9117367,"reputation":515,"user_id":6784072,"display_name":"Lukyanov Mikhail"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1567272741,"creation_date":1567272741,"answer_id":57740258,"question_id":8147284,"body_markdown":"I’m tired of looking for free translators and the best option for me was **Selenium** (more precisely selenide and webdrivermanager) and https://translate.google.com\r\n\r\n    import io.github.bonigarcia.wdm.ChromeDriverManager;\r\n    import com.codeborne.selenide.Configuration;\r\n    import io.github.bonigarcia.wdm.DriverManagerType;\r\n    import static com.codeborne.selenide.Selenide.*;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) throws IOException, ParseException {\r\n            \r\n            ChromeDriverManager.getInstance(DriverManagerType.CHROME).version(&quot;76.0.3809.126&quot;).setup();\r\n            Configuration.startMaximized = true;\r\n            open(&quot;https://translate.google.com/?hl=ru#view=home&amp;op=translate&amp;sl=en&amp;tl=ru&quot;);\r\n            String[] strings = /some strings to translate\r\n            for (String data: strings) {\r\n                $x(&quot;//textarea[@id=&#39;source&#39;]&quot;).clear();\r\n                $x(&quot;//textarea[@id=&#39;source&#39;]&quot;).sendKeys(data);\r\n                String translation = $x(&quot;//span[@class=&#39;tlid-translation translation&#39;]&quot;).getText();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to use Google Translate API in my Java application?","body":"<p>I’m tired of looking for free translators and the best option for me was <strong>Selenium</strong> (more precisely selenide and webdrivermanager) and <a href=\"https://translate.google.com\" rel=\"nofollow noreferrer\">https://translate.google.com</a></p>\n\n<pre><code>import io.github.bonigarcia.wdm.ChromeDriverManager;\nimport com.codeborne.selenide.Configuration;\nimport io.github.bonigarcia.wdm.DriverManagerType;\nimport static com.codeborne.selenide.Selenide.*;\n\npublic class Main {\n\n    public static void main(String[] args) throws IOException, ParseException {\n\n        ChromeDriverManager.getInstance(DriverManagerType.CHROME).version(\"76.0.3809.126\").setup();\n        Configuration.startMaximized = true;\n        open(\"https://translate.google.com/?hl=ru#view=home&amp;op=translate&amp;sl=en&amp;tl=ru\");\n        String[] strings = /some strings to translate\n        for (String data: strings) {\n            $x(\"//textarea[@id='source']\").clear();\n            $x(\"//textarea[@id='source']\").sendKeys(data);\n            String translation = $x(\"//span[@class='tlid-translation translation']\").getText();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1043537,"reputation":421,"user_id":1048999,"display_name":"user1048999"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146790,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"answer_count":5,"score":42,"last_activity_date":1696633171,"creation_date":1321422527,"question_id":8147284,"body_markdown":"If I pass a string (either in English or Arabic) as an input to the [**Google Translate API**][1], it should translate it into the corresponding other language and give the translated string to me. \r\n\r\nI read the same case in a forum but it was very hard to implement for me.  \r\nI need the translator without any buttons and if I give the input string it should automatically translate the value and give the output.\r\n\r\nCan you help out?\r\n\r\n\r\n  [1]: https://developers.google.com/translate/?hl=de","title":"How to use Google Translate API in my Java application?","body":"<p>If I pass a string (either in English or Arabic) as an input to the <a href=\"https://developers.google.com/translate/?hl=de\" rel=\"noreferrer\"><strong>Google Translate API</strong></a>, it should translate it into the corresponding other language and give the translated string to me. </p>\n\n<p>I read the same case in a forum but it was very hard to implement for me.<br>\nI need the translator without any buttons and if I give the input string it should automatically translate the value and give the output.</p>\n\n<p>Can you help out?</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"score":0,"creation_date":1503576049,"post_id":45860992,"comment_id":78680004,"body_markdown":"how do you save your entities","body":"how do you save your entities"},{"owner":{"account_id":41440,"reputation":772,"user_id":120427,"accept_rate":60,"display_name":"jl."},"score":0,"creation_date":1503576178,"post_id":45860992,"comment_id":78680097,"body_markdown":"`em.persist(new Parent());`\nI omitted a couple of details that are a given (id, entitymanager, ...)","body":"<code>em.persist(new Parent());</code> I omitted a couple of details that are a given (id, entitymanager, ...)"},{"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"score":1,"creation_date":1503576401,"post_id":45860992,"comment_id":78680270,"body_markdown":"can you share your service","body":"can you share your service"},{"owner":{"account_id":41440,"reputation":772,"user_id":120427,"accept_rate":60,"display_name":"jl."},"score":0,"creation_date":1503576672,"post_id":45860992,"comment_id":78680484,"body_markdown":"I don&#39;t see the point... it&#39;s just your usual JEE application - hibernate, JPA...","body":"I don&#39;t see the point... it&#39;s just your usual JEE application - hibernate, JPA..."},{"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"score":1,"creation_date":1503579612,"post_id":45860992,"comment_id":78682779,"body_markdown":"&quot;I don&#39;t see the point.&quot; The point is it will  clearly show the root cause of the issue which is that you have not set both sides of a bi-directional relationship prior to saving. https://stackoverflow.com/questions/26219099/how-to-persist-two-entities-with-jpa/26220097#26220097","body":"&quot;I don&#39;t see the point.&quot; The point is it will  clearly show the root cause of the issue which is that you have not set both sides of a bi-directional relationship prior to saving. <a href=\"https://stackoverflow.com/questions/26219099/how-to-persist-two-entities-with-jpa/26220097#26220097\" title=\"how to persist two entities with jpa\">stackoverflow.com/questions/26219099/&hellip;</a>"},{"owner":{"account_id":41440,"reputation":772,"user_id":120427,"accept_rate":60,"display_name":"jl."},"score":1,"creation_date":1503582056,"post_id":45860992,"comment_id":78684701,"body_markdown":"I&#39;ve updated the question with a gist to reproduce the issue.","body":"I&#39;ve updated the question with a gist to reproduce the issue."}],"answers":[{"comments":[{"owner":{"account_id":41440,"reputation":772,"user_id":120427,"accept_rate":60,"display_name":"jl."},"score":0,"creation_date":1503577072,"post_id":45861400,"comment_id":78680810,"body_markdown":"not the issue - the error is not an NRE. Fixed in the question now.","body":"not the issue - the error is not an NRE. Fixed in the question now."},{"owner":{"account_id":41440,"reputation":772,"user_id":120427,"accept_rate":60,"display_name":"jl."},"score":0,"creation_date":1503577655,"post_id":45861400,"comment_id":78681299,"body_markdown":"I&#39;ll try to come up with a sample project. I couldn&#39;t resolve the issue no matter how I moved around the cascades.","body":"I&#39;ll try to come up with a sample project. I couldn&#39;t resolve the issue no matter how I moved around the cascades."},{"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"score":0,"creation_date":1503577760,"post_id":45861400,"comment_id":78681396,"body_markdown":"the transient issue appears even with the cascade?","body":"the transient issue appears even with the cascade?"},{"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"score":0,"creation_date":1503580287,"post_id":45861400,"comment_id":78683229,"body_markdown":"Cascading on the relationship child&gt;parent will have zero effect when saving an instance of Parent.","body":"Cascading on the relationship child&gt;parent will have zero effect when saving an instance of Parent."},{"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"score":0,"creation_date":1503580399,"post_id":45861400,"comment_id":78683323,"body_markdown":"so you try to save child?","body":"so you try to save child?"}],"tags":[],"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503577233,"creation_date":1503576950,"answer_id":45861400,"question_id":45860992,"body_markdown":"The exception is refering to saving transient entity, this means you are trying to save entity which has relation with a non managed entity, since your parent is cascading the onetoone child then the problem would be with childHistory, since this is a bidirectional relation it would make since to cascade the children also\r\n\r\n\r\n    @OneToMany(mappedBy = &quot;parent&quot;,cascade=CascadeType.PERSIST)\r\n    private List&lt;Child&gt; childHistory;","title":"Mapping to a child table twice - @OneToMany &amp; @ManyToOne","body":"<p>The exception is refering to saving transient entity, this means you are trying to save entity which has relation with a non managed entity, since your parent is cascading the onetoone child then the problem would be with childHistory, since this is a bidirectional relation it would make since to cascade the children also</p>\n\n<pre><code>@OneToMany(mappedBy = \"parent\",cascade=CascadeType.PERSIST)\nprivate List&lt;Child&gt; childHistory;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5474396,"reputation":181,"user_id":4458609,"display_name":"Soupy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696633153,"creation_date":1696633153,"answer_id":77247707,"question_id":45860992,"body_markdown":"I was able to accomplish this with the following code:\r\n\r\n``` Java\r\n@Entity\r\nclass Parent {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;parent_id&quot;)\r\n    int id;\r\n\r\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\r\n    @JoinColumn(name = &quot;current_child&quot;, referencedColumnName = &quot;child_id&quot;)\r\n    private Child currentChild;\r\n\r\n    @OneToMany(mappedBy = &quot;parent&quot;, fetch = FetchType.LAZY)\r\n    private List&lt;Child&gt; history = new ArrayList&lt;&gt;();\r\n\r\n    Parent(ChildInfo childInfo) {\r\n        currentChild = new Child(this, childInfo);\r\n    }\r\n}\r\n```\r\n``` Java\r\n@Entity\r\nclass Child {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;child_id&quot;)\r\n    int id;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;subtype_id&quot;)\r\n    private Parent parent;\r\n\r\n    Child(Parent parent, ChildInfo info) {\r\n        this.parent = parent;\r\n        // initialize the rest of the object with ChildInfo\r\n    }\r\n}\r\n```\r\n\r\nThe difference appears to be to how you specify the optional relationships. In my case, I could only specify that the parent to child relationship is required, not both. When I specified that the relationship is required for both sides, I also got an error.\r\n\r\nThis appears to be related to the order in which Hibernate inserts each item into the database. Here&#39;s the commands executed to insert the two entities:\r\n``` sql\r\nHibernate: insert into dbo.child (parent_id) values (NULL)\r\nHibernate: insert into dbo.parent (current_child) values (1)\r\nHibernate: update dbo.child set parent_id=1 where child_id=1\r\n```\r\n\r\nThe child is inserted first with a `NULL` id, then the parent is inserted, with its current reference pointing to the child. The child is then updated using the parent&#39;s id.","title":"Mapping to a child table twice - @OneToMany &amp; @ManyToOne","body":"<p>I was able to accomplish this with the following code:</p>\n<pre><code>@Entity\nclass Parent {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;parent_id&quot;)\n    int id;\n\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\n    @JoinColumn(name = &quot;current_child&quot;, referencedColumnName = &quot;child_id&quot;)\n    private Child currentChild;\n\n    @OneToMany(mappedBy = &quot;parent&quot;, fetch = FetchType.LAZY)\n    private List&lt;Child&gt; history = new ArrayList&lt;&gt;();\n\n    Parent(ChildInfo childInfo) {\n        currentChild = new Child(this, childInfo);\n    }\n}\n</code></pre>\n<pre><code>@Entity\nclass Child {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;child_id&quot;)\n    int id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;subtype_id&quot;)\n    private Parent parent;\n\n    Child(Parent parent, ChildInfo info) {\n        this.parent = parent;\n        // initialize the rest of the object with ChildInfo\n    }\n}\n</code></pre>\n<p>The difference appears to be to how you specify the optional relationships. In my case, I could only specify that the parent to child relationship is required, not both. When I specified that the relationship is required for both sides, I also got an error.</p>\n<p>This appears to be related to the order in which Hibernate inserts each item into the database. Here's the commands executed to insert the two entities:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>Hibernate: insert into dbo.child (parent_id) values (NULL)\nHibernate: insert into dbo.parent (current_child) values (1)\nHibernate: update dbo.child set parent_id=1 where child_id=1\n</code></pre>\n<p>The child is inserted first with a <code>NULL</code> id, then the parent is inserted, with its current reference pointing to the child. The child is then updated using the parent's id.</p>\n"}],"owner":{"account_id":41440,"reputation":772,"user_id":120427,"accept_rate":60,"display_name":"jl."},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":720,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1696633153,"creation_date":1503575784,"question_id":45860992,"body_markdown":"I&#39;m trying to model a parent entity which has a collection of child entities (childHistory) and also a pointer to the last added child (currentChild)\r\n\r\n    class Parent {\r\n        //unidirectional\r\n        @OneToOne(cascade = CascadeType.PERSIST, optional = false)\r\n        @JoinColumn(name = &quot;current_child_id&quot;)\r\n        private Child currentChild;\r\n\r\n        //bidirectional\r\n        @OneToMany(mappedBy = &quot;parent&quot;)\r\n        private List&lt;Child&gt; childHistory;\r\n\r\n        public Parent() {\r\n            currentChild = new Child(this);\r\n            childHistory = new ArrayList&lt;&gt;();\r\n            childHistory.add(currentChild);\r\n        }\r\n\r\n        public void add() {\r\n            currentChild = new Child(this);\r\n            childHistory = new ArrayList&lt;&gt;();\r\n            childHistory.add(currentChild);\r\n        }\r\n    }\r\n\r\n    class Child {\r\n        @ManyToOne(optional = false)\r\n        @JoinColumn(name = &quot;parent_id&quot;)\r\n        private Parent parent;\r\n        public Child(Parrent parent) {\r\n            this.parent = parent;\r\n        }\r\n    }\r\n\r\nI currently get an exception for transient entities when I try to save the Parent (and count on cascading to persist the children). I can&#39;t save the Parent beforehand since I init everything in the Parent ctor.\r\n\r\nWarnings (that lead to exceptions...):\r\n\r\n&gt; WARN: HHH000437: Attempting to save one or more entities that have a\r\n&gt; non-nullable association with an unsaved transient entity. The unsaved\r\n&gt; transient entity must be saved in an operation prior to saving these\r\n&gt; dependent entities. Unsaved transient entity: `([com.Parent#&lt;null&gt;])`\r\n&gt; Dependent entities: `([[com.Child#&lt;null&gt;]])` Non-nullable\r\n&gt; association(s): `([com.Child.entity])`\r\n\r\n\r\n----------\r\n\r\n\r\n&gt; WARN: HHH000437: Attempting to save one or more entities that have a\r\n&gt; non-nullable association with an unsaved transient entity. The unsaved\r\n&gt; transient entity must be saved in an operation prior to saving these\r\n&gt; dependent entities. Unsaved transient entity: `([com.Child#&lt;null&gt;])`\r\n&gt; Dependent entities: `([[com.Parent#&lt;null&gt;]])` Non-nullable\r\n&gt; association(s): `([com.Parent.currentChild])`\r\n\r\nIs there a way to model this correctly and have NOT NULL db column with hibernate.\r\n\r\nEDIT: For a repro see this gist: https://gist.github.com/jlogar/2da2237640aa013f2cfbda33a4a5dc84","title":"Mapping to a child table twice - @OneToMany &amp; @ManyToOne","body":"<p>I'm trying to model a parent entity which has a collection of child entities (childHistory) and also a pointer to the last added child (currentChild)</p>\n\n<pre><code>class Parent {\n    //unidirectional\n    @OneToOne(cascade = CascadeType.PERSIST, optional = false)\n    @JoinColumn(name = \"current_child_id\")\n    private Child currentChild;\n\n    //bidirectional\n    @OneToMany(mappedBy = \"parent\")\n    private List&lt;Child&gt; childHistory;\n\n    public Parent() {\n        currentChild = new Child(this);\n        childHistory = new ArrayList&lt;&gt;();\n        childHistory.add(currentChild);\n    }\n\n    public void add() {\n        currentChild = new Child(this);\n        childHistory = new ArrayList&lt;&gt;();\n        childHistory.add(currentChild);\n    }\n}\n\nclass Child {\n    @ManyToOne(optional = false)\n    @JoinColumn(name = \"parent_id\")\n    private Parent parent;\n    public Child(Parrent parent) {\n        this.parent = parent;\n    }\n}\n</code></pre>\n\n<p>I currently get an exception for transient entities when I try to save the Parent (and count on cascading to persist the children). I can't save the Parent beforehand since I init everything in the Parent ctor.</p>\n\n<p>Warnings (that lead to exceptions...):</p>\n\n<blockquote>\n  <p>WARN: HHH000437: Attempting to save one or more entities that have a\n  non-nullable association with an unsaved transient entity. The unsaved\n  transient entity must be saved in an operation prior to saving these\n  dependent entities. Unsaved transient entity: <code>([com.Parent#&lt;null&gt;])</code>\n  Dependent entities: <code>([[com.Child#&lt;null&gt;]])</code> Non-nullable\n  association(s): <code>([com.Child.entity])</code></p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>WARN: HHH000437: Attempting to save one or more entities that have a\n  non-nullable association with an unsaved transient entity. The unsaved\n  transient entity must be saved in an operation prior to saving these\n  dependent entities. Unsaved transient entity: <code>([com.Child#&lt;null&gt;])</code>\n  Dependent entities: <code>([[com.Parent#&lt;null&gt;]])</code> Non-nullable\n  association(s): <code>([com.Parent.currentChild])</code></p>\n</blockquote>\n\n<p>Is there a way to model this correctly and have NOT NULL db column with hibernate.</p>\n\n<p>EDIT: For a repro see this gist: <a href=\"https://gist.github.com/jlogar/2da2237640aa013f2cfbda33a4a5dc84\" rel=\"nofollow noreferrer\">https://gist.github.com/jlogar/2da2237640aa013f2cfbda33a4a5dc84</a></p>\n"},{"tags":["java","json"],"answers":[{"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1351677242,"post_id":13155226,"comment_id":17897008,"body_markdown":"Exactly right.  If you never downloaded it, you can get it here: http://www.findjar.com/class/org/json/simple/JSONArray.html","body":"Exactly right.  If you never downloaded it, you can get it here: <a href=\"http://www.findjar.com/class/org/json/simple/JSONArray.html\" rel=\"nofollow noreferrer\">findjar.com/class/org/json/simple/JSONArray.html</a>"},{"owner":{"account_id":1934809,"reputation":1081,"user_id":1743341,"accept_rate":95,"display_name":"baron_bartek"},"score":0,"creation_date":1351677321,"post_id":13155226,"comment_id":17897050,"body_markdown":"Ok. I have it. The eclipse (android) directory is /libs . Thanx","body":"Ok. I have it. The eclipse (android) directory is /libs . Thanx"},{"owner":{"account_id":318130,"reputation":4243,"user_id":635171,"accept_rate":78,"display_name":"Arun Manivannan"},"score":0,"creation_date":1351677408,"post_id":13155226,"comment_id":17897085,"body_markdown":"Here you go http://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project","body":"Here you go <a href=\"http://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project\" title=\"how can i use external jars in an android project\">stackoverflow.com/questions/1334802/&hellip;</a>"}],"tags":[],"owner":{"account_id":318130,"reputation":4243,"user_id":635171,"accept_rate":78,"display_name":"Arun Manivannan"},"comment_count":3,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1351677118,"creation_date":1351677118,"answer_id":13155226,"question_id":13155200,"body_markdown":"Probably your simple json.jar file isn&#39;t in your classpath. ","title":"org.json.simple cannot be resolved","body":"<p>Probably your simple json.jar file isn't in your classpath. </p>\n"},{"tags":[],"owner":{"account_id":1947603,"reputation":504,"user_id":1752392,"display_name":"Heggi"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1351677327,"creation_date":1351677327,"answer_id":13155290,"question_id":13155200,"body_markdown":"\r\nThe jar file is missing. You can download the jar file and add it as external libraries in your project . You can download this from \r\n\r\nhttp://www.findjar.com/jar/com/googlecode/json-simple/json-simple/1.1/json-simple-1.1.jar.html","title":"org.json.simple cannot be resolved","body":"<p>The jar file is missing. You can download the jar file and add it as external libraries in your project . You can download this from </p>\n\n<p><a href=\"http://www.findjar.com/jar/com/googlecode/json-simple/json-simple/1.1/json-simple-1.1.jar.html\" rel=\"nofollow\">http://www.findjar.com/jar/com/googlecode/json-simple/json-simple/1.1/json-simple-1.1.jar.html</a></p>\n"},{"comments":[{"owner":{"account_id":9194225,"reputation":705,"user_id":6952495,"accept_rate":79,"display_name":"RyanQuey"},"score":1,"creation_date":1589258447,"post_id":22876057,"comment_id":109214213,"body_markdown":"Please note that you have to import differently than the question specified, specifically by leaving out the `.simple` suffix. Eg., `import org.json.JSONArray;` instead of `import org.json.simple.JSONArray;`. On the other hand, if you use `com.googlecode.json-simple` as [here](https://stackoverflow.com/a/49882661/6952495) then you can import as the question specified. The [docs for the package](https://github.com/stleary/JSON-java) say as much as well.","body":"Please note that you have to import differently than the question specified, specifically by leaving out the <code>.simple</code> suffix. Eg., <code>import org.json.JSONArray;</code> instead of <code>import org.json.simple.JSONArray;</code>. On the other hand, if you use <code>com.googlecode.json-simple</code> as <a href=\"https://stackoverflow.com/a/49882661/6952495\">here</a> then you can import as the question specified. The <a href=\"https://github.com/stleary/JSON-java\" rel=\"nofollow noreferrer\">docs for the package</a> say as much as well."}],"tags":[],"owner":{"account_id":991746,"reputation":8336,"user_id":1008837,"accept_rate":75,"display_name":"Pravin Mishra"},"comment_count":1,"down_vote_count":3,"up_vote_count":15,"is_accepted":false,"score":12,"last_activity_date":1473274043,"creation_date":1396666910,"answer_id":22876057,"question_id":13155200,"body_markdown":"I was facing same issue in my Spring Integration project. I added below JSON dependencies in pom.xml file. It works for me.\r\n\r\n    &lt;dependency&gt;\r\n\t  &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n\t  &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n\t  &lt;version&gt;20090211&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nA list of versions can be found here: https://mvnrepository.com/artifact/org.json/json","title":"org.json.simple cannot be resolved","body":"<p>I was facing same issue in my Spring Integration project. I added below JSON dependencies in pom.xml file. It works for me.</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.json&lt;/groupId&gt;\n  &lt;artifactId&gt;json&lt;/artifactId&gt;\n  &lt;version&gt;20090211&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>A list of versions can be found here: <a href=\"https://mvnrepository.com/artifact/org.json/json\" rel=\"noreferrer\">https://mvnrepository.com/artifact/org.json/json</a></p>\n"},{"tags":[],"owner":{"account_id":11131409,"reputation":567,"user_id":8171292,"display_name":"saurabh yadav"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502969601,"creation_date":1502969601,"answer_id":45734014,"question_id":13155200,"body_markdown":"Try importing this in build.gradle dependencies\r\n\r\n    compile group: &#39;com.googlecode.json-simple&#39;, name: &#39;json-simple&#39;, version: &#39;1.1&#39;\r\n\r\n","title":"org.json.simple cannot be resolved","body":"<p>Try importing this in build.gradle dependencies</p>\n\n<pre><code>compile group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1'\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10386755,"reputation":11834,"user_id":8366499,"display_name":"divibisan"},"score":3,"creation_date":1523982021,"post_id":49882661,"comment_id":86781932,"body_markdown":"Your answer would be more helpful (and more likely to receive upvotes) if you explain what your code does and why someone might choose to use this approach over the other 4 answers.","body":"Your answer would be more helpful (and more likely to receive upvotes) if you explain what your code does and why someone might choose to use this approach over the other 4 answers."},{"owner":{"account_id":2143546,"reputation":166,"user_id":1901693,"display_name":"Aditya Yada"},"score":0,"creation_date":1612364068,"post_id":49882661,"comment_id":116744200,"body_markdown":"this framework i used a lot jsonobject, jsonarray , parsing etc all required features are there .","body":"this framework i used a lot jsonobject, jsonarray , parsing etc all required features are there ."}],"tags":[],"owner":{"account_id":13193216,"reputation":89,"user_id":9528917,"display_name":"mahdi"},"comment_count":2,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1523980794,"creation_date":1523980794,"answer_id":49882661,"question_id":13155200,"body_markdown":"try this \r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n        &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n        &lt;version&gt;1.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"org.json.simple cannot be resolved","body":"<p>try this </p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n    &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n    &lt;version&gt;1.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9097785,"reputation":23,"user_id":6771128,"display_name":"J Maine"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637490802,"creation_date":1625696990,"answer_id":68293615,"question_id":13155200,"body_markdown":"For a simple console program in vs code this worked for me: \r\ndownload the json-simple file from: \r\nhttps://code.google.com/archive/p/json-simple/downloads\r\n\r\nExtract to your lib in your project folder then simple reference it.","title":"org.json.simple cannot be resolved","body":"<p>For a simple console program in vs code this worked for me:\ndownload the json-simple file from:\n<a href=\"https://code.google.com/archive/p/json-simple/downloads\" rel=\"nofollow noreferrer\">https://code.google.com/archive/p/json-simple/downloads</a></p>\n<p>Extract to your lib in your project folder then simple reference it.</p>\n"},{"tags":[],"owner":{"account_id":16419918,"reputation":2129,"user_id":11861378,"display_name":"Ad&#225;n Escobar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649352023,"creation_date":1649352023,"answer_id":71786451,"question_id":13155200,"body_markdown":"this works for me:\r\nhttps://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n        &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n        &lt;version&gt;1.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"org.json.simple cannot be resolved","body":"<p>this works for me:\n<a href=\"https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1</a></p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n    &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n    &lt;version&gt;1.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24170364,"reputation":1,"user_id":18132519,"display_name":"Ширяев Антон"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696631559,"creation_date":1696631559,"answer_id":77247651,"question_id":13155200,"body_markdown":"Or in IntelliJ IDEA, go to:\r\n\r\nProject Settings -&gt; Libraries -&gt; + -&gt; From Maven... -&gt; com.googlecode.json-simple:json-simple:1.1.1 -&gt; OK\r\n\r\nThen the code should work.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n      &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n      &lt;version&gt;1.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"org.json.simple cannot be resolved","body":"<p>Or in IntelliJ IDEA, go to:</p>\n<p>Project Settings -&gt; Libraries -&gt; + -&gt; From Maven... -&gt; com.googlecode.json-simple:json-simple:1.1.1 -&gt; OK</p>\n<p>Then the code should work.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n  &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n  &lt;version&gt;1.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1934809,"reputation":1081,"user_id":1743341,"accept_rate":95,"display_name":"baron_bartek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171350,"favorite_count":0,"down_vote_count":1,"up_vote_count":18,"accepted_answer_id":13155226,"answer_count":8,"score":17,"last_activity_date":1696631559,"creation_date":1351677023,"question_id":13155200,"body_markdown":"I&#39;m a total java newbie and I have this problem. I try to decode Json and in order to do that I want to import these packages:\r\n\r\n    import org.json.simple.JSONArray;\r\n    import org.json.simple.JSONObject;\r\n    import org.json.simple.parser.JSONParser;\r\n    import org.json.simple.parser.ParseException;\r\n\r\n&quot;The import cannot be resolved&quot;... are these packages unavailable anymore or do I have to do something else in order to make them work?\r\n\r\nThanx in advance.","title":"org.json.simple cannot be resolved","body":"<p>I'm a total java newbie and I have this problem. I try to decode Json and in order to do that I want to import these packages:</p>\n\n<pre><code>import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.json.simple.parser.JSONParser;\nimport org.json.simple.parser.ParseException;\n</code></pre>\n\n<p>\"The import cannot be resolved\"... are these packages unavailable anymore or do I have to do something else in order to make them work?</p>\n\n<p>Thanx in advance.</p>\n"},{"tags":["java","c++","dll","java-native-interface","usb"],"comments":[{"owner":{"account_id":1042637,"reputation":21143,"user_id":1048330,"display_name":"tenorsax"},"score":1,"creation_date":1345657735,"post_id":12078457,"comment_id":16136085,"body_markdown":"See [How to add native library to “java.library.path” with Eclipse launch](http://stackoverflow.com/q/661320/1048330)","body":"See <a href=\"http://stackoverflow.com/q/661320/1048330\">How to add native library to “java.library.path” with Eclipse launch</a>"}],"answers":[{"comments":[{"owner":{"account_id":1707365,"reputation":1164,"user_id":1566161,"accept_rate":100,"display_name":"Jonathan Simon Prates"},"score":0,"creation_date":1345721843,"post_id":12082029,"comment_id":16155287,"body_markdown":"Many thanks in advance. My JRE is x64. I install 32bits version and works! Thank you!","body":"Many thanks in advance. My JRE is x64. I install 32bits version and works! Thank you!"},{"owner":{"account_id":1368895,"reputation":2130,"user_id":1304668,"accept_rate":88,"display_name":"Bagata"},"score":1,"creation_date":1409602290,"post_id":12082029,"comment_id":40011051,"body_markdown":"You saved me! JVM is 32 but Windows is 64 so I had to put jmtp.dll on C:\\Windows\\SysWOW64 to work.","body":"You saved me! JVM is 32 but Windows is 64 so I had to put jmtp.dll on C:\\Windows\\SysWOW64 to work."},{"owner":{"account_id":1368895,"reputation":2130,"user_id":1304668,"accept_rate":88,"display_name":"Bagata"},"score":0,"creation_date":1409680641,"post_id":12082029,"comment_id":40042678,"body_markdown":"@Aqua, I&#39;m still having a problem, maybe you can help. If I put the DLL manually it works but if I try using java to write the DLL before loading the Library, the exception &quot;Can&#39;t find dependent libraries&quot; appears again.","body":"@Aqua, I&#39;m still having a problem, maybe you can help. If I put the DLL manually it works but if I try using java to write the DLL before loading the Library, the exception &quot;Can&#39;t find dependent libraries&quot; appears again."},{"owner":{"account_id":1042637,"reputation":21143,"user_id":1048330,"display_name":"tenorsax"},"score":0,"creation_date":1409683982,"post_id":12082029,"comment_id":40044346,"body_markdown":"@Bagata what do you mean by *java to write the DLL before loading the Library* ?","body":"@Bagata what do you mean by <i>java to write the DLL before loading the Library</i> ?"},{"owner":{"account_id":1368895,"reputation":2130,"user_id":1304668,"accept_rate":88,"display_name":"Bagata"},"score":0,"creation_date":1409684243,"post_id":12082029,"comment_id":40044459,"body_markdown":"I have an applet that copies the DLL from the server and writes it into temp directory right before using System.load(&quot;jmtp&quot;). I use a hack to change java.library.path to temp directory.","body":"I have an applet that copies the DLL from the server and writes it into temp directory right before using System.load(&quot;jmtp&quot;). I use a hack to change java.library.path to temp directory."},{"owner":{"account_id":1042637,"reputation":21143,"user_id":1048330,"display_name":"tenorsax"},"score":0,"creation_date":1409684817,"post_id":12082029,"comment_id":40044756,"body_markdown":"@Bagata are you sure the file is copied, applets are pretty restricted.","body":"@Bagata are you sure the file is copied, applets are pretty restricted."},{"owner":{"account_id":1368895,"reputation":2130,"user_id":1304668,"accept_rate":88,"display_name":"Bagata"},"score":0,"creation_date":1409685282,"post_id":12082029,"comment_id":40045009,"body_markdown":"@Aqua Yeah, I&#39;m sure... that&#39;s why I don&#39;t know why it is not working. Both the content and size of the copied DLL match the original.","body":"@Aqua Yeah, I&#39;m sure... that&#39;s why I don&#39;t know why it is not working. Both the content and size of the copied DLL match the original."},{"owner":{"account_id":1042637,"reputation":21143,"user_id":1048330,"display_name":"tenorsax"},"score":0,"creation_date":1409685697,"post_id":12082029,"comment_id":40045211,"body_markdown":"@Bagata I am not sure you can modify `java.library.path` at runtime. Is that temp directory added to a library path dynamically or is it set at application execution?","body":"@Bagata I am not sure you can modify <code>java.library.path</code> at runtime. Is that temp directory added to a library path dynamically or is it set at application execution?"},{"owner":{"account_id":1368895,"reputation":2130,"user_id":1304668,"accept_rate":88,"display_name":"Bagata"},"score":0,"creation_date":1409686177,"post_id":12082029,"comment_id":40045455,"body_markdown":"@Aqua Using the hack I set java.library.path to temp at runtime, it works because it returns temp directory when I print System.getProperty(&quot;java.library.path&quot;);","body":"@Aqua Using the hack I set java.library.path to temp at runtime, it works because it returns temp directory when I print System.getProperty(&quot;java.library.path&quot;);"},{"owner":{"account_id":1042637,"reputation":21143,"user_id":1048330,"display_name":"tenorsax"},"score":1,"creation_date":1409686635,"post_id":12082029,"comment_id":40045676,"body_markdown":"@Bagata Even though the property is updated the loader inspects that property only once at startup. See [this](http://stackoverflow.com/q/5419039/1048330) thread for more details.","body":"@Bagata Even though the property is updated the loader inspects that property only once at startup. See <a href=\"http://stackoverflow.com/q/5419039/1048330\">this</a> thread for more details."}],"tags":[],"owner":{"account_id":1042637,"reputation":21143,"user_id":1048330,"display_name":"tenorsax"},"comment_count":10,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1345674411,"creation_date":1345672860,"answer_id":12082029,"question_id":12078457,"body_markdown":"The dlls in the mentioned jar are 32 bit. The environment is Win7 x64. I assume the JVM is 32 bit otherwise there would be another error, ie: `Can&#39;t load IA 32-bit .dll on a AMD 64-bit platform` or similar. \r\n\r\nTry copying the dlls into `C:\\Windows\\SysWOW64` rather than `C:\\Windows\\System32`. 32 bits dlls should go into `C:\\Windows\\SysWOW64`. It worked for me, although I got `util.USBUIRT$NotInitializedException` which is probably the indication the libraries were loaded properly. \r\n\r\n[File System Redirector][1] article may shed some light on `SysWOW64` vs `System32`.\r\n\r\n***EDIT: tweaking java.library.path***\r\n\r\nYou may also go with a solution mentioned in comments, for example, copy dlls into `C:\\tmp` and run with argument: \r\n\r\n    -Djava.library.path=&quot;C:\\tmp;${env_var:PATH}&quot;\r\n\r\nBut since there is a dependency between the two dlls, `C:\\tmp` must be on `PATH`. Otherwise there is still `UnsatisfiedLinkError`. Manually loading `uuirtdrv.dll` should help, ie: \r\n\r\n\timport util.USBUIRT;\r\n\tpublic class Uirt {\r\n\t    static {\r\n\t    \tSystem.loadLibrary(&quot;uuirtdrv&quot;);\r\n\t    }\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tString code = &quot;0000&quot;;   \r\n\t    try {\r\n\t    \tUSBUIRT.transmitIR(code, 2, 3, 2);\r\n\t    } catch (Exception e) {\r\n\t        e.printStackTrace();\r\n\t    }\r\n\t  }\r\n\t}\r\n\r\n\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx\r\n","title":"Java: util_USBUIRT.dll: Can&#39;t find dependent libraries","body":"<p>The dlls in the mentioned jar are 32 bit. The environment is Win7 x64. I assume the JVM is 32 bit otherwise there would be another error, ie: <code>Can't load IA 32-bit .dll on a AMD 64-bit platform</code> or similar. </p>\n\n<p>Try copying the dlls into <code>C:\\Windows\\SysWOW64</code> rather than <code>C:\\Windows\\System32</code>. 32 bits dlls should go into <code>C:\\Windows\\SysWOW64</code>. It worked for me, although I got <code>util.USBUIRT$NotInitializedException</code> which is probably the indication the libraries were loaded properly. </p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx\" rel=\"nofollow\">File System Redirector</a> article may shed some light on <code>SysWOW64</code> vs <code>System32</code>.</p>\n\n<p><em><strong>EDIT: tweaking java.library.path</em></strong></p>\n\n<p>You may also go with a solution mentioned in comments, for example, copy dlls into <code>C:\\tmp</code> and run with argument: </p>\n\n<pre><code>-Djava.library.path=\"C:\\tmp;${env_var:PATH}\"\n</code></pre>\n\n<p>But since there is a dependency between the two dlls, <code>C:\\tmp</code> must be on <code>PATH</code>. Otherwise there is still <code>UnsatisfiedLinkError</code>. Manually loading <code>uuirtdrv.dll</code> should help, ie: </p>\n\n<pre><code>import util.USBUIRT;\npublic class Uirt {\n    static {\n        System.loadLibrary(\"uuirtdrv\");\n    }\n\npublic static void main(String[] args) {\n    String code = \"0000\";   \n    try {\n        USBUIRT.transmitIR(code, 2, 3, 2);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1707365,"reputation":1164,"user_id":1566161,"accept_rate":100,"display_name":"Jonathan Simon Prates"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5239,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":12082029,"answer_count":1,"score":2,"last_activity_date":1696630966,"creation_date":1345656837,"question_id":12078457,"body_markdown":"I want to use this jar file ([http://sourceforge.net/projects/uirt-j/][1]) in a personal project. Currently, I&#39;ve been using Eclipse and tried to import that jar (*Project &gt; Java Build Path &gt; Add External JARs*). \r\n\r\nAfter importing it, I can see all classes from that package listed in Eclipse, however, this jar also contains two win32 dll files, needed to communicate to the device. I&#39;ve tried to add them to *System32* dir, but no luck. When I run this project, it throws the following exception:\r\n\r\n```shell\r\n    Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError:\r\n    C:\\Windows\\System32\\util_USBUIRT.dll: Can&#39;t find dependent libraries\r\n\tat java.lang.ClassLoader$NativeLibrary.load(Native Method)\r\n\tat java.lang.ClassLoader.loadLibrary0(Unknown Source)\r\n\tat java.lang.ClassLoader.loadLibrary(Unknown Source)\r\n\tat java.lang.Runtime.loadLibrary0(Unknown Source)\r\n\tat java.lang.System.loadLibrary(Unknown Source)\r\n\tat util.USBUIRT.&lt;clinit&gt;(USBUIRT.java:269)\r\n\tat Uirt.main(Uirt.java:6)\r\n```\r\n\r\nUsing [dependence walker][2], I can see that all the dlls are correctly linked and they can be imported. \r\n\r\nCode snippet:\r\n\r\n```java\r\n    import util.USBUIRT;\r\n    public class Uirt {\r\n\tpublic static void main(String[] args) {\r\n\t\tString code = &quot;0000&quot;;\t\r\n\t\ttry {\r\n\t\t\tUSBUIRT.transmitIR(code, 2, 3, 2);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t  }\r\n    }\r\n```\r\n\r\nIf that JAR file is executed standalone, it works fine. My current setup runs under Windows 7 64bits.\r\n\r\n\r\n  [1]: http://sourceforge.net/projects/uirt-j/\r\n  [2]: https://www.dependencywalker.com/","title":"Java: util_USBUIRT.dll: Can&#39;t find dependent libraries","body":"<p>I want to use this jar file (<a href=\"http://sourceforge.net/projects/uirt-j/\" rel=\"nofollow noreferrer\">http://sourceforge.net/projects/uirt-j/</a>) in a personal project. Currently, I've been using Eclipse and tried to import that jar (<em>Project &gt; Java Build Path &gt; Add External JARs</em>).</p>\n<p>After importing it, I can see all classes from that package listed in Eclipse, however, this jar also contains two win32 dll files, needed to communicate to the device. I've tried to add them to <em>System32</em> dir, but no luck. When I run this project, it throws the following exception:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>    Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError:\n    C:\\Windows\\System32\\util_USBUIRT.dll: Can't find dependent libraries\n    at java.lang.ClassLoader$NativeLibrary.load(Native Method)\n    at java.lang.ClassLoader.loadLibrary0(Unknown Source)\n    at java.lang.ClassLoader.loadLibrary(Unknown Source)\n    at java.lang.Runtime.loadLibrary0(Unknown Source)\n    at java.lang.System.loadLibrary(Unknown Source)\n    at util.USBUIRT.&lt;clinit&gt;(USBUIRT.java:269)\n    at Uirt.main(Uirt.java:6)\n</code></pre>\n<p>Using <a href=\"https://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">dependence walker</a>, I can see that all the dlls are correctly linked and they can be imported.</p>\n<p>Code snippet:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import util.USBUIRT;\n    public class Uirt {\n    public static void main(String[] args) {\n        String code = &quot;0000&quot;;   \n        try {\n            USBUIRT.transmitIR(code, 2, 3, 2);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n      }\n    }\n</code></pre>\n<p>If that JAR file is executed standalone, it works fine. My current setup runs under Windows 7 64bits.</p>\n"},{"tags":["java","mysql","netbeans","null","getstring"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1696621888,"post_id":77246896,"comment_id":136181775,"body_markdown":"In my opinion, the login method should only verify if the username and password are correct. Use a different method to retrieve &quot;mem_id&quot;.","body":"In my opinion, the login method should only verify if the username and password are correct. Use a different method to retrieve &quot;mem_id&quot;."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1696622107,"post_id":77246896,"comment_id":136181803,"body_markdown":"Also, I am guessing that the goal is to get the email. If so, I could guess that you can do one query to retrieve the email where the tables are joined on &quot;mem_id&quot;.","body":"Also, I am guessing that the goal is to get the email. If so, I could guess that you can do one query to retrieve the email where the tables are joined on &quot;mem_id&quot;."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1696622175,"post_id":77246896,"comment_id":136181814,"body_markdown":"Also, What does `if ((dbuser.next()` do? I am referring to the second time you call it.","body":"Also, What does <code>if ((dbuser.next()</code> do? I am referring to the second time you call it."},{"owner":{"account_id":22227545,"reputation":3,"user_id":16464275,"display_name":"OR13N "},"score":0,"creation_date":1696627979,"post_id":77246896,"comment_id":136182643,"body_markdown":"@SedJ601, so, i first created the second instance of ```if(dbuser.next()```  to verify that there is a password value present in the record that matches the username, and later on added in the first instance to verify that there is no null value in the record.","body":"@SedJ601, so, i first created the second instance of <code>if(dbuser.next()</code>  to verify that there is a password value present in the record that matches the username, and later on added in the first instance to verify that there is no null value in the record."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1696629041,"post_id":77246896,"comment_id":136182771,"body_markdown":"@OR13N __This code is a security leak__. What if the user picks as name, say, `bobby tables&#39;; DROP TABLE userpwd CASCADE; EXEC &#39;FORMAT C: /Y&#39;; --`? You _must_ use `PreparedStatement` unless your entire SQL string is a constant or at least constructed from entirely input from within your app, not anything outside of your control.","body":"@OR13N <b>This code is a security leak</b>. What if the user picks as name, say, <code>bobby tables&#39;; DROP TABLE userpwd CASCADE; EXEC &#39;FORMAT C: &#47;Y&#39;; --</code>? You <i>must</i> use <code>PreparedStatement</code> unless your entire SQL string is a constant or at least constructed from entirely input from within your app, not anything outside of your control."},{"owner":{"account_id":22227545,"reputation":3,"user_id":16464275,"display_name":"OR13N "},"score":0,"creation_date":1696630009,"post_id":77246896,"comment_id":136182853,"body_markdown":"@rzwitserloot, you are correct, however this project is a personal one and will be operated only by myself and 2 others, as such i did not see it necessary(although bad practice) to use a prepped statement","body":"@rzwitserloot, you are correct, however this project is a personal one and will be operated only by myself and 2 others, as such i did not see it necessary(although bad practice) to use a prepped statement"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1696677039,"post_id":77246896,"comment_id":136185985,"body_markdown":"@OR13N Projects tend to either fall into the &#39;serious&#39; or &#39;to learn&#39; camp. Using styles that lead to obvious security holes are unsuitable for either usage. Hence, this is just bad code, and &#39;its just for personal use&#39; isnt a good reason for it. More to the point, Stack Overflow isn&#39;t a &#39;help me&#39; kind of site. It&#39;s a &#39;repository of common questions with useful answers&#39; kind of site; questions are meant to be useful for everybody, not just you.","body":"@OR13N Projects tend to either fall into the &#39;serious&#39; or &#39;to learn&#39; camp. Using styles that lead to obvious security holes are unsuitable for either usage. Hence, this is just bad code, and &#39;its just for personal use&#39; isnt a good reason for it. More to the point, Stack Overflow isn&#39;t a &#39;help me&#39; kind of site. It&#39;s a &#39;repository of common questions with useful answers&#39; kind of site; questions are meant to be useful for everybody, not just you."},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":0,"creation_date":1696993623,"post_id":77246896,"comment_id":136222273,"body_markdown":"serialize(), json, $_SESSION[], etc can help you cobble together some of what you want.","body":"serialize(), json, $_SESSION[], etc can help you cobble together some of what you want."}],"answers":[{"comments":[{"owner":{"account_id":22227545,"reputation":3,"user_id":16464275,"display_name":"OR13N "},"score":0,"creation_date":1696630601,"post_id":77247245,"comment_id":136182906,"body_markdown":"thank you for your input! i have improved the code and it works! Also this is a personal project with only 3 handlers, so although it is bad code practice i did not use parameters as there is no reason for it","body":"thank you for your input! i have improved the code and it works! Also this is a personal project with only 3 handlers, so although it is bad code practice i did not use parameters as there is no reason for it"}],"tags":[],"owner":{"account_id":4205035,"reputation":1690,"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1696629307,"creation_date":1696624552,"answer_id":77247245,"question_id":77246896,"body_markdown":"The second call to `dbuser.next()` is making the result set to advance, so that `if` body doesn&#39;t enter, you don&#39;t need that, just move the `if` inside the other.\r\n\r\nLike:\r\n\r\n```java\r\n public boolean login(String username, String pwd) throws SQLException {\r\n    boolean res = false;\r\n    String spass=&quot;&quot;;\r\n    try {\r\n        ResultSet dbuser = stmt.executeQuery(&quot;select password from userpwd where username = &#39;&quot; + username + &quot;&#39;;&quot;); //here you should use parameters to set the username.\r\n        if (dbuser.next()){\r\n            spass = dbuser.getString(&quot;password&quot;);\r\n            if (spass.equals(pwd)) {\r\n                res = true;\r\n                ResultSet mid = stmt.executeQuery(&quot;select mem_id from userpwd where username = &#39;&quot; + username + &quot;&#39;;&quot;);\r\n                id = mid.getInt(&quot;mem_id&quot;);\r\n                this.susername = username;\r\n                ins = &quot;select email from memdet where mem_id = &quot; + id;\r\n                ResultSet ema = stmt.executeQuery(ins);\r\n                this.semail = ema.getString(&quot;email&quot;);\r\n            } else {\r\n                res = false;\r\n            }\r\n    } catch (SQLException ex) {\r\n    }\r\n    return res;\r\n}\r\n```\r\n\r\nThere are lots of other things to be improved like, using parameters for setting the query parameters, to avoid SQL injection attacks, and there is no need to perform three queries, you could do it with one and a join.","title":"How to store an sql result in a variable to be used","body":"<p>The second call to <code>dbuser.next()</code> is making the result set to advance, so that <code>if</code> body doesn't enter, you don't need that, just move the <code>if</code> inside the other.</p>\n<p>Like:</p>\n<pre class=\"lang-java prettyprint-override\"><code> public boolean login(String username, String pwd) throws SQLException {\n    boolean res = false;\n    String spass=&quot;&quot;;\n    try {\n        ResultSet dbuser = stmt.executeQuery(&quot;select password from userpwd where username = '&quot; + username + &quot;';&quot;); //here you should use parameters to set the username.\n        if (dbuser.next()){\n            spass = dbuser.getString(&quot;password&quot;);\n            if (spass.equals(pwd)) {\n                res = true;\n                ResultSet mid = stmt.executeQuery(&quot;select mem_id from userpwd where username = '&quot; + username + &quot;';&quot;);\n                id = mid.getInt(&quot;mem_id&quot;);\n                this.susername = username;\n                ins = &quot;select email from memdet where mem_id = &quot; + id;\n                ResultSet ema = stmt.executeQuery(ins);\n                this.semail = ema.getString(&quot;email&quot;);\n            } else {\n                res = false;\n            }\n    } catch (SQLException ex) {\n    }\n    return res;\n}\n</code></pre>\n<p>There are lots of other things to be improved like, using parameters for setting the query parameters, to avoid SQL injection attacks, and there is no need to perform three queries, you could do it with one and a join.</p>\n"}],"owner":{"account_id":22227545,"reputation":3,"user_id":16464275,"display_name":"OR13N "},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696715999,"accepted_answer_id":77247245,"answer_count":1,"score":0,"last_activity_date":1696630106,"creation_date":1696619805,"question_id":77246896,"body_markdown":"Good day all,\r\n\r\nI am working on a java project, in netbeans.\r\nI have a class called `dbcon`, which has a bunch of methods and a constructor that connects to a Mysql database.\r\nOne such method is a login method, which receives 2 parameters: username and password; searches the database using sqls and stores the result in a resultset. I then go on to use `getString` to retrieve the stored data and store it in a String variable. However, it returns a null value. The datatype in the table for username and password are both varchar(45). I had gotten the `mem_id` value before and was able to perform inserts using it appropriately, but have issues with the string type. Furthermore, the member variable `susername` also returns null even though I&#39;m storing it directly from the passed variable username.\r\n```\r\n public boolean login(String username, String pwd) throws SQLException {\r\n        boolean res = false;\r\n        String spass;\r\n        try {\r\n            ResultSet dbuser = stmt.executeQuery(&quot;select userpwd.mem_id, upassword, email from userpwd, memdet&quot;\r\n                    + &quot; where userpwd.username = &#39;&quot; + username + &quot;&#39; and memdet.mem_id=userpwd.mem_id&quot;);\r\n            if (dbuser.next()) {\r\n                spass = dbuser.getString(&quot;upassword&quot;);\r\n                if ((spass.equals(pwd))) {\r\n                    res = true;\r\n                    id = dbuser.getInt(&quot;mem_id&quot;);\r\n                    this.susername = username;\r\n                    this.semail = dbuser.getString(&quot;email&quot;);\r\n                } else {\r\n                    res = false;\r\n                }\r\n            }\r\n        } catch (SQLException ex) {\r\n        }\r\n        return res;\r\n    }\r\n```\r\nThanks","title":"How to store an sql result in a variable to be used","body":"<p>Good day all,</p>\n<p>I am working on a java project, in netbeans.\nI have a class called <code>dbcon</code>, which has a bunch of methods and a constructor that connects to a Mysql database.\nOne such method is a login method, which receives 2 parameters: username and password; searches the database using sqls and stores the result in a resultset. I then go on to use <code>getString</code> to retrieve the stored data and store it in a String variable. However, it returns a null value. The datatype in the table for username and password are both varchar(45). I had gotten the <code>mem_id</code> value before and was able to perform inserts using it appropriately, but have issues with the string type. Furthermore, the member variable <code>susername</code> also returns null even though I'm storing it directly from the passed variable username.</p>\n<pre><code> public boolean login(String username, String pwd) throws SQLException {\n        boolean res = false;\n        String spass;\n        try {\n            ResultSet dbuser = stmt.executeQuery(&quot;select userpwd.mem_id, upassword, email from userpwd, memdet&quot;\n                    + &quot; where userpwd.username = '&quot; + username + &quot;' and memdet.mem_id=userpwd.mem_id&quot;);\n            if (dbuser.next()) {\n                spass = dbuser.getString(&quot;upassword&quot;);\n                if ((spass.equals(pwd))) {\n                    res = true;\n                    id = dbuser.getInt(&quot;mem_id&quot;);\n                    this.susername = username;\n                    this.semail = dbuser.getString(&quot;email&quot;);\n                } else {\n                    res = false;\n                }\n            }\n        } catch (SQLException ex) {\n        }\n        return res;\n    }\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","android","websocket"],"comments":[{"owner":{"account_id":1662830,"reputation":409,"user_id":1530779,"display_name":"user1530779"},"score":0,"creation_date":1437137888,"post_id":31476344,"comment_id":50917850,"body_markdown":"I suppose you have internet connection so webSocket client is not responding properly Android has many websocket clients which one ur using ?","body":"I suppose you have internet connection so webSocket client is not responding properly Android has many websocket clients which one ur using ?"},{"owner":{"account_id":2593839,"reputation":71,"user_id":2247911,"accept_rate":0,"display_name":"user2247911"},"score":0,"creation_date":1437138249,"post_id":31476344,"comment_id":50918071,"body_markdown":"No my internet connection is working fine. I have used Java-Websocket-1.3.jar file in my project. Is it wrong? I am new to use websockets in android.","body":"No my internet connection is working fine. I have used Java-Websocket-1.3.jar file in my project. Is it wrong? I am new to use websockets in android."},{"owner":{"account_id":1662830,"reputation":409,"user_id":1530779,"display_name":"user1530779"},"score":0,"creation_date":1437138506,"post_id":31476344,"comment_id":50918235,"body_markdown":"You should check your server implementation as sockets are highly dependent on the underlying protocol which if different leads to connection timeout checkout my answer below its a tested client they have code samples just add that and it works","body":"You should check your server implementation as sockets are highly dependent on the underlying protocol which if different leads to connection timeout checkout my answer below its a tested client they have code samples just add that and it works"},{"owner":{"account_id":2341897,"reputation":9815,"user_id":2215679,"accept_rate":52,"display_name":"Kostanos"},"score":0,"creation_date":1552508082,"post_id":31476344,"comment_id":97041309,"body_markdown":"did you able to fix this?","body":"did you able to fix this?"}],"answers":[{"comments":[{"owner":{"account_id":2593839,"reputation":71,"user_id":2247911,"accept_rate":0,"display_name":"user2247911"},"score":0,"creation_date":1437138571,"post_id":31476483,"comment_id":50918291,"body_markdown":"Thanks for the help. I&#39;ll try it now.","body":"Thanks for the help. I&#39;ll try it now."}],"tags":[],"owner":{"account_id":1662830,"reputation":409,"user_id":1530779,"display_name":"user1530779"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1437138125,"creation_date":1437138125,"answer_id":31476483,"question_id":31476344,"body_markdown":"The websocket client ur using is not that robust try using Engine IO client which i used for my project , great performance \r\nhttps://github.com/nkzawa/engine.io-client.java\r\nNot all clients are compatible with your server check what is being used on Server and that connection should be replicated using different library on server and client leads to breaking of connections \r\n","title":"How to establish a WebSocket connection in android service?","body":"<p>The websocket client ur using is not that robust try using Engine IO client which i used for my project , great performance \n<a href=\"https://github.com/nkzawa/engine.io-client.java\" rel=\"nofollow\">https://github.com/nkzawa/engine.io-client.java</a>\nNot all clients are compatible with your server check what is being used on Server and that connection should be replicated using different library on server and client leads to breaking of connections </p>\n"}],"owner":{"account_id":2593839,"reputation":71,"user_id":2247911,"accept_rate":0,"display_name":"user2247911"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10159,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1696629850,"creation_date":1437137704,"question_id":31476344,"body_markdown":"I&#39;ve been trying to create a android service which would allow me to maintain a websocket connection and send some data time to time. I create a handler in service to connect with the WebSocketClient. But it is not connecting. The url is working and I have tested it too. I highly appreciate if anyone can help.\r\n\r\nMain Activity.java\r\n\r\n    import android.app.Activity;\r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.content.IntentFilter;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.TextView;\r\n\r\n\r\n    public class MainActivity extends Activity {\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n\r\n            BroadcastReceiver receiver=new BroadcastReceiver() {\r\n\r\n        @Override\r\n            public void onReceive(Context context, Intent intent) {\r\n                TextView text=(TextView) findViewById(R.id.textView);\r\n                text.setText(intent.getStringExtra(&quot;msg&quot;));\r\n\r\n            }\r\n        };\r\n\r\n        registerReceiver(receiver, new IntentFilter(SocketService.BROADCAST_ACTION));\r\n\r\n        }\r\n\r\n\r\n        // Method to start the service\r\n        public void startService(View view) {\r\n            startService(new Intent(getBaseContext(), SocketService.class));\r\n        }\r\n\r\n        // Method to stop the service\r\n        public void stopService(View view) {\r\n            stopService(new Intent(getBaseContext(), SocketService.class));\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\nService Implementation\r\n\r\n\r\n\r\n    import android.app.Service;\r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Intent;\r\n    import android.os.Handler;\r\n    import android.os.IBinder;\r\n    import android.util.Log;\r\n    import android.widget.Toast;\r\n\r\n    import org.java_websocket.client.WebSocketClient;\r\n    import org.java_websocket.handshake.ServerHandshake;\r\n\r\n    import java.net.URI;\r\n\r\n    import java.util.logging.LogRecord;\r\n\r\n    public class SocketService extends Service {\r\n\r\n        boolean status=false;\r\n        public static final String BROADCAST_ACTION = &quot;com.supun.broadcasttest&quot;;\r\n        BroadcastReceiver broadcaster;\r\n        BroadcastReceiver broadreciever;\r\n        Intent intent;\r\n        Handler handler;\r\n        WebSocketClient client;\r\n\r\n        @Override\r\n        public IBinder onBind(Intent intent) {\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n            intent=new Intent(BROADCAST_ACTION);\r\n            handler=new Handler();\r\n\r\n        }\r\n\r\n        @Override\r\n        public int onStartCommand(final Intent intent, int flags, int startId) {\r\n             Toast.makeText(this, &quot;Service Started&quot;,Toast.LENGTH_LONG).show();// Let it continue running until it is stopped.\r\n             ////////////////////////////////////////////////////////////////////////////////\r\n\r\n\r\n            try {\r\n                client = new WebSocketClient(new URI(\r\n                        &quot;ws://xxxxxxx-xxxx.rhcloud.com:8000/browser&quot;)) {\r\n\r\n                    @Override\r\n                     public void onOpen(ServerHandshake handshakedata) {\r\n                        Log.d(&quot;1&quot;, &quot;open&quot;);\r\n                        status = true;\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onMessage(String message) {\r\n\r\n\r\n                        Log.d(&quot;reply&quot;, message);\r\n                        intent.putExtra(&quot;msg&quot;, message);\r\n                        sendBroadcast(intent);\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(Exception ex) {\r\n                         // TODO Auto-generated method stub\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onClose(int code, String reason, boolean remote{\r\n                        status = false;\r\n    \r\n                    }\r\n                };\r\n\r\n\r\n\r\n\r\n            }catch(Exception e){\r\n          \r\n\r\n            }\r\n                ///////////////////////////////////////////////////////////////////////////////\r\n\r\n    //\r\n            handler.removeCallbacks(runnable);\r\n            handler.postDelayed(runnable, 1000);\r\n            return START_STICKY;\r\n        }\r\n\r\n\r\n\r\n\r\n        private Runnable runnable=new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                client.connect();\r\n\r\n                for(int i=0; i&lt;5;i++){\r\n                    if(status){\r\n                        intent.putExtra(&quot;msg&quot;,&quot;open&quot;);\r\n                        sendBroadcast(intent);\r\n                        break;\r\n                    }else{\r\n                        try {\r\n                            intent.putExtra(&quot;msg&quot;,client.getReadyState().toString());\r\n                            sendBroadcast(intent);\r\n                            Thread.sleep(1000);\r\n\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!status) {\r\n                    intent.putExtra(&quot;msg&quot;,&quot;Time Out&quot;);\r\n                    sendBroadcast(intent);\r\n\r\n                }\r\n\r\n\r\n\r\n            }\r\n        };\r\n\r\n\r\n\r\n\r\n\r\n        @Override\r\n        public void onDestroy() {\r\n            super.onDestroy();\r\n            Toast.makeText(this, &quot;Service Destroyed&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\n\r\nI am calling the start service method in Main Activity from a button click event. The output is always turned quickly to Closing and finally shows as Timed out. I wonder what could be the reason?\r\n\r\n\r\n","title":"How to establish a WebSocket connection in android service?","body":"<p>I've been trying to create a android service which would allow me to maintain a websocket connection and send some data time to time. I create a handler in service to connect with the WebSocketClient. But it is not connecting. The url is working and I have tested it too. I highly appreciate if anyone can help.</p>\n\n<p>Main Activity.java</p>\n\n<pre><code>import android.app.Activity;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.TextView;\n\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        BroadcastReceiver receiver=new BroadcastReceiver() {\n\n    @Override\n        public void onReceive(Context context, Intent intent) {\n            TextView text=(TextView) findViewById(R.id.textView);\n            text.setText(intent.getStringExtra(\"msg\"));\n\n        }\n    };\n\n    registerReceiver(receiver, new IntentFilter(SocketService.BROADCAST_ACTION));\n\n    }\n\n\n    // Method to start the service\n    public void startService(View view) {\n        startService(new Intent(getBaseContext(), SocketService.class));\n    }\n\n    // Method to stop the service\n    public void stopService(View view) {\n        stopService(new Intent(getBaseContext(), SocketService.class));\n    }\n\n\n\n}\n</code></pre>\n\n<p>Service Implementation</p>\n\n<pre><code>import android.app.Service;\nimport android.content.BroadcastReceiver;\nimport android.content.Intent;\nimport android.os.Handler;\nimport android.os.IBinder;\nimport android.util.Log;\nimport android.widget.Toast;\n\nimport org.java_websocket.client.WebSocketClient;\nimport org.java_websocket.handshake.ServerHandshake;\n\nimport java.net.URI;\n\nimport java.util.logging.LogRecord;\n\npublic class SocketService extends Service {\n\n    boolean status=false;\n    public static final String BROADCAST_ACTION = \"com.supun.broadcasttest\";\n    BroadcastReceiver broadcaster;\n    BroadcastReceiver broadreciever;\n    Intent intent;\n    Handler handler;\n    WebSocketClient client;\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        return null;\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        intent=new Intent(BROADCAST_ACTION);\n        handler=new Handler();\n\n    }\n\n    @Override\n    public int onStartCommand(final Intent intent, int flags, int startId) {\n         Toast.makeText(this, \"Service Started\",Toast.LENGTH_LONG).show();// Let it continue running until it is stopped.\n         ////////////////////////////////////////////////////////////////////////////////\n\n\n        try {\n            client = new WebSocketClient(new URI(\n                    \"ws://xxxxxxx-xxxx.rhcloud.com:8000/browser\")) {\n\n                @Override\n                 public void onOpen(ServerHandshake handshakedata) {\n                    Log.d(\"1\", \"open\");\n                    status = true;\n\n                }\n\n                @Override\n                public void onMessage(String message) {\n\n\n                    Log.d(\"reply\", message);\n                    intent.putExtra(\"msg\", message);\n                    sendBroadcast(intent);\n\n                }\n\n                @Override\n                public void onError(Exception ex) {\n                     // TODO Auto-generated method stub\n\n                }\n\n                @Override\n                public void onClose(int code, String reason, boolean remote{\n                    status = false;\n\n                }\n            };\n\n\n\n\n        }catch(Exception e){\n\n\n        }\n            ///////////////////////////////////////////////////////////////////////////////\n\n//\n        handler.removeCallbacks(runnable);\n        handler.postDelayed(runnable, 1000);\n        return START_STICKY;\n    }\n\n\n\n\n    private Runnable runnable=new Runnable() {\n        @Override\n        public void run() {\n            client.connect();\n\n            for(int i=0; i&lt;5;i++){\n                if(status){\n                    intent.putExtra(\"msg\",\"open\");\n                    sendBroadcast(intent);\n                    break;\n                }else{\n                    try {\n                        intent.putExtra(\"msg\",client.getReadyState().toString());\n                        sendBroadcast(intent);\n                        Thread.sleep(1000);\n\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n\n            if (!status) {\n                intent.putExtra(\"msg\",\"Time Out\");\n                sendBroadcast(intent);\n\n            }\n\n\n\n        }\n    };\n\n\n\n\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        Toast.makeText(this, \"Service Destroyed\", Toast.LENGTH_LONG).show();\n    }\n}\n</code></pre>\n\n<p>I am calling the start service method in Main Activity from a button click event. The output is always turned quickly to Closing and finally shows as Timed out. I wonder what could be the reason?</p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"score":0,"creation_date":1406388503,"post_id":24972437,"comment_id":38818795,"body_markdown":"Please give more of the stacktrace - at least enough to know in what class and method the exception occurs ...","body":"Please give more of the stacktrace - at least enough to know in what class and method the exception occurs ..."},{"owner":{"account_id":1691660,"reputation":1564,"user_id":1553874,"accept_rate":88,"display_name":"Nir"},"score":0,"creation_date":1406391215,"post_id":24972437,"comment_id":38819544,"body_markdown":"I added some ot the stacktrace. let me know if there is a need for more","body":"I added some ot the stacktrace. let me know if there is a need for more"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1406394137,"post_id":24972437,"comment_id":38820329,"body_markdown":"Show us what you send in your request, headers and body.","body":"Show us what you send in your request, headers and body."},{"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"score":0,"creation_date":1406394428,"post_id":24972437,"comment_id":38820426,"body_markdown":"`@RequestMapping(method = RequestMethod.POST, consumes = MediaType.APPLICATION_JSON_VALUE)`","body":"<code>@RequestMapping(method = RequestMethod.POST, consumes = MediaType.APPLICATION_JSON_VALUE)</code>"},{"owner":{"account_id":1691660,"reputation":1564,"user_id":1553874,"accept_rate":88,"display_name":"Nir"},"score":0,"creation_date":1406395024,"post_id":24972437,"comment_id":38820612,"body_markdown":"@SotiriosDelimanolis i&#39;ve added the request. hope it&#39;s clear enough","body":"@SotiriosDelimanolis i&#39;ve added the request. hope it&#39;s clear enough"},{"owner":{"account_id":1691660,"reputation":1564,"user_id":1553874,"accept_rate":88,"display_name":"Nir"},"score":0,"creation_date":1406395292,"post_id":24972437,"comment_id":38820687,"body_markdown":"@ankur-singhal in which spring version are you using? i don&#39;t have MediaType.APPLICATION_JSON_VALUE . i&#39;m using: Spring 3.2.2","body":"@ankur-singhal in which spring version are you using? i don&#39;t have MediaType.APPLICATION_JSON_VALUE . i&#39;m using: Spring 3.2.2"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1406396536,"post_id":24972437,"comment_id":38821042,"body_markdown":"You&#39;re using the wrong `MediaType` class, WS vs Spring&#39;s, but that shouldn&#39;t matter.","body":"You&#39;re using the wrong <code>MediaType</code> class, WS vs Spring&#39;s, but that shouldn&#39;t matter."},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1406396655,"post_id":24972437,"comment_id":38821073,"body_markdown":"From what I cat tell from the log of the HTTP  request you posted, you are using `Content-Type:text/plain`. Am I right?","body":"From what I cat tell from the log of the HTTP  request you posted, you are using <code>Content-Type:text&#47;plain</code>. Am I right?"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1406396689,"post_id":24972437,"comment_id":38821086,"body_markdown":"Yeah, that doesn&#39;t make sense. You are sending JSON.","body":"Yeah, that doesn&#39;t make sense. You are sending JSON."},{"owner":{"account_id":1691660,"reputation":1564,"user_id":1553874,"accept_rate":88,"display_name":"Nir"},"score":0,"creation_date":1406396759,"post_id":24972437,"comment_id":38821109,"body_markdown":"@geonal yeah i&#39;ve notice that too, i&#39;m using a different tool now for my Rest request (IntelliJ plugin ) and i don&#39;t get the following exception but the parameter: budgetPerDate is sending as null for some reason","body":"@geonal yeah i&#39;ve notice that too, i&#39;m using a different tool now for my Rest request (IntelliJ plugin ) and i don&#39;t get the following exception but the parameter: budgetPerDate is sending as null for some reason"},{"owner":{"account_id":1691660,"reputation":1564,"user_id":1553874,"accept_rate":88,"display_name":"Nir"},"score":0,"creation_date":1406396822,"post_id":24972437,"comment_id":38821128,"body_markdown":"@SotiriosDelimanolis - I know, i switched to a different Rest plugin, sending the right Content-Type:application/json, and the parameter: budgetPerDate is passing as null","body":"@SotiriosDelimanolis - I know, i switched to a different Rest plugin, sending the right Content-Type:application/json, and the parameter: budgetPerDate is passing as null"},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1406396836,"post_id":24972437,"comment_id":38821133,"body_markdown":"So what you actually want is to have your controller method use the JSON that is posted in the body?","body":"So what you actually want is to have your controller method use the JSON that is posted in the body?"},{"owner":{"account_id":1691660,"reputation":1564,"user_id":1553874,"accept_rate":88,"display_name":"Nir"},"score":0,"creation_date":1406396914,"post_id":24972437,"comment_id":38821155,"body_markdown":"@geonal, yes inside the request body","body":"@geonal, yes inside the request body"},{"owner":{"account_id":411446,"reputation":1700,"user_id":783893,"accept_rate":30,"display_name":"Vineel"},"score":0,"creation_date":1547006082,"post_id":24972437,"comment_id":95038664,"body_markdown":"Content-type is wrong. It should mention that its JSON text.","body":"Content-type is wrong. It should mention that its JSON text."}],"answers":[{"comments":[{"owner":{"account_id":392784,"reputation":261,"user_id":754269,"accept_rate":89,"display_name":"jeevs"},"score":12,"creation_date":1527752637,"post_id":24973845,"comment_id":88247977,"body_markdown":"It won&#39;t work if we can&#39;t change Content-Type for clients. how to support the Content type &#39;text/plain;charset=UTF-8&#39; in Spring. Any help in that.","body":"It won&#39;t work if we can&#39;t change Content-Type for clients. how to support the Content type &#39;text/plain;charset=UTF-8&#39; in Spring. Any help in that."},{"owner":{"account_id":408187,"reputation":3374,"user_id":778687,"accept_rate":79,"display_name":"tusar"},"score":2,"creation_date":1590115809,"post_id":24973845,"comment_id":109564613,"body_markdown":"@jeevs it worked for me without any `consumes` annotation. Simply changed Postman content-type to &#39;JSON&#39; instead of &#39;Text&#39;","body":"@jeevs it worked for me without any <code>consumes</code> annotation. Simply changed Postman content-type to &#39;JSON&#39; instead of &#39;Text&#39;"},{"owner":{"account_id":12529230,"reputation":223,"user_id":9118025,"display_name":"Osher Shuman"},"score":1,"creation_date":1603879549,"post_id":24973845,"comment_id":114173535,"body_markdown":"@tusar that is changing it on the &#39;client&#39; side. jeevs is asking how to change it on the spring side assuing the clients are using the type &quot;text/plain;charset=UTF-8&quot;","body":"@tusar that is changing it on the &#39;client&#39; side. jeevs is asking how to change it on the spring side assuing the clients are using the type &quot;text/plain;charset=UTF-8&quot;"},{"owner":{"account_id":7852820,"reputation":87,"user_id":5935755,"display_name":"Kevin Onofre"},"score":0,"creation_date":1623894172,"post_id":24973845,"comment_id":120209464,"body_markdown":"@jeevs I had the same response error when submitting the request in Postman. Changed content-type to &#39;JSON&#39; instead of &#39;Text&#39;. It worked.","body":"@jeevs I had the same response error when submitting the request in Postman. Changed content-type to &#39;JSON&#39; instead of &#39;Text&#39;. It worked."}],"tags":[],"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"comment_count":4,"down_vote_count":1,"up_vote_count":40,"is_accepted":true,"score":39,"last_activity_date":1446651580,"creation_date":1406397068,"answer_id":24973845,"question_id":24972437,"body_markdown":"Building on what is mentioned in the comments, the simplest solution would be:\r\n\r\n    @RequestMapping(method = RequestMethod.PUT, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n    @ResponseBody\r\n    public Collection&lt;BudgetDTO&gt; updateConsumerBudget(@RequestBody SomeDto someDto) throws GeneralException, ParseException {\r\n    \r\n        //whatever\r\n       \r\n    }\r\n\r\n    class SomeDto {\r\n       \r\n       private List&lt;WhateverBudgerPerDateDTO&gt; budgetPerDate;\r\n    \r\n    \r\n      //getters setters\r\n    }\r\n\r\nThe solution assumes that the HTTP request you are creating actually has\r\n\r\n`Content-Type:application/json` instead of `text/plain`","title":"Error: org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported","body":"<p>Building on what is mentioned in the comments, the simplest solution would be:</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.PUT, consumes = MediaType.APPLICATION_JSON_VALUE)\n@ResponseBody\npublic Collection&lt;BudgetDTO&gt; updateConsumerBudget(@RequestBody SomeDto someDto) throws GeneralException, ParseException {\n\n    //whatever\n\n}\n\nclass SomeDto {\n\n   private List&lt;WhateverBudgerPerDateDTO&gt; budgetPerDate;\n\n\n  //getters setters\n}\n</code></pre>\n\n<p>The solution assumes that the HTTP request you are creating actually has</p>\n\n<p><code>Content-Type:application/json</code> instead of <code>text/plain</code></p>\n"},{"comments":[{"owner":{"account_id":2408521,"reputation":3734,"user_id":2104280,"accept_rate":78,"display_name":"Jan-Willem Gmelig Meyling"},"score":4,"creation_date":1564789501,"post_id":33598305,"comment_id":101158571,"body_markdown":"Had the same issue today, and it was pretty hard to figure out. Basically I just stepped my way through the debugger to find it. Even with log level set to trace the exception is just not logged. Very awkward exception handling at this part of Spring. Deserialization errors should never end up in a 415 status, rather a 400 or even 500...","body":"Had the same issue today, and it was pretty hard to figure out. Basically I just stepped my way through the debugger to find it. Even with log level set to trace the exception is just not logged. Very awkward exception handling at this part of Spring. Deserialization errors should never end up in a 415 status, rather a 400 or even 500..."}],"tags":[],"owner":{"account_id":281803,"reputation":13299,"user_id":578318,"accept_rate":59,"display_name":"sparkyspider"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1447012382,"creation_date":1447012382,"answer_id":33598305,"question_id":24972437,"body_markdown":"For me it turned out that I had a `@JsonManagedReferece` in one entity without a `@JsonBackReference` in the other referenced entity. This caused the marshaller to throw an error.","title":"Error: org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported","body":"<p>For me it turned out that I had a <code>@JsonManagedReferece</code> in one entity without a <code>@JsonBackReference</code> in the other referenced entity. This caused the marshaller to throw an error.</p>\n"},{"tags":[],"owner":{"account_id":8188862,"reputation":11,"user_id":6163794,"display_name":"Richard Peters"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492722137,"creation_date":1492722137,"answer_id":43529849,"question_id":24972437,"body_markdown":"Ok - for me the source of the problem was in serialisation/deserialisation. The object that was being sent and received was as follows where the code is submitted and the code and maskedPhoneNumber is returned.\r\n\r\n    @ApiObject(description = &quot;What the object is for.&quot;)\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class CodeVerification {\r\n    \r\n    \t@ApiObjectField(description = &quot;The code which is to be verified.&quot;)\r\n    \t@NotBlank(message = &quot;mandatory&quot;)\r\n    \tprivate final String code;\r\n    \r\n    \t@ApiObjectField(description = &quot;The masked mobile phone number to which the code was verfied against.&quot;)\r\n    \tprivate final String maskedMobileNumber;\r\n    \r\n    \tpublic codeVerification(@JsonProperty(&quot;code&quot;) String code, String maskedMobileNumber) {\r\n    \t\tthis.code = code;\r\n    \t\tthis.maskedMobileNumber = maskedMobileNumber;\r\n    \t}\r\n    \r\n    \tpublic String getcode() {\r\n    \t\treturn code;\r\n    \t}\r\n    \r\n    \tpublic String getMaskedMobileNumber() {\r\n    \t\treturn maskedMobileNumber;\r\n    \t}\r\n    }\r\n\r\nThe problem was that I didn&#39;t have a JsonProperty defined for the maskedMobileNumber in the constructor. i.e. Constructor should have been\r\n\r\n\tpublic codeVerification(@JsonProperty(&quot;code&quot;) String code, @JsonProperty(&quot;maskedMobileNumber&quot;) String maskedMobileNumber) {\r\n\t\tthis.code = code;\r\n\t\tthis.maskedMobileNumber = maskedMobileNumber;\r\n\t}\r\n\r\n\r\n","title":"Error: org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported","body":"<p>Ok - for me the source of the problem was in serialisation/deserialisation. The object that was being sent and received was as follows where the code is submitted and the code and maskedPhoneNumber is returned.</p>\n\n<pre><code>@ApiObject(description = \"What the object is for.\")\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class CodeVerification {\n\n    @ApiObjectField(description = \"The code which is to be verified.\")\n    @NotBlank(message = \"mandatory\")\n    private final String code;\n\n    @ApiObjectField(description = \"The masked mobile phone number to which the code was verfied against.\")\n    private final String maskedMobileNumber;\n\n    public codeVerification(@JsonProperty(\"code\") String code, String maskedMobileNumber) {\n        this.code = code;\n        this.maskedMobileNumber = maskedMobileNumber;\n    }\n\n    public String getcode() {\n        return code;\n    }\n\n    public String getMaskedMobileNumber() {\n        return maskedMobileNumber;\n    }\n}\n</code></pre>\n\n<p>The problem was that I didn't have a JsonProperty defined for the maskedMobileNumber in the constructor. i.e. Constructor should have been</p>\n\n<pre><code>public codeVerification(@JsonProperty(\"code\") String code, @JsonProperty(\"maskedMobileNumber\") String maskedMobileNumber) {\n    this.code = code;\n    this.maskedMobileNumber = maskedMobileNumber;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618308943,"creation_date":1618308943,"answer_id":67072938,"question_id":24972437,"body_markdown":"I solved by removed `@JsonManagedReference` and keep `@JsonBackReference`  as it  to avoid infinity loop .","title":"Error: org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported","body":"<p>I solved by removed <code>@JsonManagedReference</code> and keep <code>@JsonBackReference</code>  as it  to avoid infinity loop .</p>\n"},{"comments":[{"owner":{"account_id":897258,"reputation":573,"user_id":934242,"display_name":"Shah Erhan"},"score":1,"creation_date":1663955690,"post_id":68445291,"comment_id":130369420,"body_markdown":"I wasted countless hours trying to debug the error. Thanks for sharing","body":"I wasted countless hours trying to debug the error. Thanks for sharing"}],"tags":[],"owner":{"account_id":2464379,"reputation":4305,"user_id":2147814,"accept_rate":62,"display_name":"anand krish"},"comment_count":1,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1648049056,"creation_date":1626718922,"answer_id":68445291,"question_id":24972437,"body_markdown":"Incase if you are giving a post request through `Postman` then make sure you have chosen these 2 options\r\n\r\n**1.** **JSON (application/json)** should be chosen\r\n[![enter image description here][1]][1]\r\n\r\n**2. Content-Type** - application/json\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aDQFM.png\r\n  [2]: https://i.stack.imgur.com/LRorI.png","title":"Error: org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported","body":"<p>Incase if you are giving a post request through <code>Postman</code> then make sure you have chosen these 2 options</p>\n<p><strong>1.</strong> <strong>JSON (application/json)</strong> should be chosen\n<a href=\"https://i.stack.imgur.com/aDQFM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/aDQFM.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>2. Content-Type</strong> - application/json</p>\n<p><a href=\"https://i.stack.imgur.com/LRorI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LRorI.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":18996762,"reputation":173,"user_id":13957655,"display_name":"Toni Zeidler"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665702641,"creation_date":1665702641,"answer_id":74062722,"question_id":24972437,"body_markdown":"It works! Incase if you are giving a post request through Postman then make sure you have chosen these 2 options\r\n\r\nhttps://arabicprogrammer.com/article/74621056167/\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uNn2a.jpg","title":"Error: org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported","body":"<p>It works! Incase if you are giving a post request through Postman then make sure you have chosen these 2 options</p>\n<p><a href=\"https://arabicprogrammer.com/article/74621056167/\" rel=\"nofollow noreferrer\">https://arabicprogrammer.com/article/74621056167/</a></p>\n<p><a href=\"https://i.stack.imgur.com/uNn2a.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uNn2a.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":28531249,"reputation":1,"user_id":22328960,"display_name":"Carlos-Web"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691571602,"creation_date":1691007971,"answer_id":76823289,"question_id":24972437,"body_markdown":"You could try to change the value of the [Content-Type][1] header in your request from `Content-Type: text/plain` to `Content-Type: application/json`.\r\n\r\nIn case you are using Postman for the POST request then make sure you have chosen this option (which will change the header value):\r\n\r\n[ https://i.stack.imgur.com/BsWGH.png][2]\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type\r\n  [2]: https://i.stack.imgur.com/BsWGH.png","title":"Error: org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported","body":"<p>You could try to change the value of the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type\" rel=\"nofollow noreferrer\">Content-Type</a> header in your request from <code>Content-Type: text/plain</code> to <code>Content-Type: application/json</code>.</p>\n<p>In case you are using Postman for the POST request then make sure you have chosen this option (which will change the header value):</p>\n<p><a href=\"https://i.stack.imgur.com/BsWGH.png\" rel=\"nofollow noreferrer\"> https://i.stack.imgur.com/BsWGH.png</a></p>\n"},{"tags":[],"owner":{"account_id":22296747,"reputation":151,"user_id":16522650,"display_name":"NebuCodeNezzar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696628711,"creation_date":1696628711,"answer_id":77247516,"question_id":24972437,"body_markdown":"For anyone calling their Spring Backend from a ReactJS/Javascript frontend , you can add `header.append(&#39;Content-Type&#39;, &#39;application/json&#39;);` on your header. Basically, you do this:\r\n\r\n    const header = new Headers();\r\n    header.append(&#39;Content-Type&#39;, &#39;application/JSON);","title":"Error: org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported","body":"<p>For anyone calling their Spring Backend from a ReactJS/Javascript frontend , you can add <code>header.append('Content-Type', 'application/json');</code> on your header. Basically, you do this:</p>\n<pre><code>const header = new Headers();\nheader.append('Content-Type', 'application/JSON);\n</code></pre>\n"}],"owner":{"account_id":1691660,"reputation":1564,"user_id":1553874,"accept_rate":88,"display_name":"Nir"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":262206,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"accepted_answer_id":24973845,"answer_count":8,"score":54,"last_activity_date":1696628711,"creation_date":1406387535,"question_id":24972437,"body_markdown":"I&#39;m newbie in Spring Data.\r\nI keep getting the error: `org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported`\r\nI&#39;ve tried to change consumes inside `@RequestMapping` annotation to `text/plain` but unfortunately it didn&#39;t help.*\r\n\r\nAny ideas?\r\n\r\nThanks,\r\n\r\n\r\nMy Code looks like this:\r\n\r\n    package com.budget.processing.application;\r\n\r\n\r\n    import com.budget.business.service.Budget;\r\n    import com.budget.business.service.BudgetItem;\r\n    import com.budget.business.service.BudgetService;\r\n    import com.budget.processing.dto.BudgetDTO;\r\n    import com.budget.processing.dto.BudgetPerConsumerDTO;\r\n    import com.utils.Constants;\r\n    import com.common.utils.config.exception.GeneralException;\r\n    import org.apache.log4j.Logger;\r\n    import org.joda.time.YearMonth;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.transaction.annotation.Propagation;\r\n    import org.springframework.transaction.annotation.Transactional;\r\n    import org.springframework.web.bind.annotation.*;\r\n\r\n    import javax.ws.rs.core.MediaType;\r\n    import java.text.ParseException;\r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.List;\r\n\r\n\r\n    @Controller(&quot;budgetManager&quot;)\r\n    @RequestMapping(value = &quot;budget&quot;, produces  = Constants.RESPONSE_APP_JSON)\r\n    @Transactional(propagation = Propagation.REQUIRED)\r\n    public class BudgetManager {\r\n\r\n    private static final Logger logger = Logger.getLogger(BudgetManager.class);\r\n\r\n\r\n    @Autowired\r\n    private BudgetService budgetService;\r\n\r\n\r\n    @RequestMapping(method = RequestMethod.GET)\r\n    public\r\n    @ResponseBody\r\n    Collection&lt;BudgetDTO&gt; getBudgetMonthlyAllConsumers() throws GeneralException {\r\n\r\n        List&lt;Budget&gt; budgetList = budgetService.getBudgetForAllConsumers();\r\n        List&lt;BudgetDTO&gt; bugetDtos = new ArrayList&lt;&gt;();\r\n        for (Budget budget : budgetList) {\r\n            BudgetDTO budgetDTO = generateBudgetDto(budget);\r\n            bugetDtos.add(budgetDTO);\r\n        }\r\n        return bugetDtos;\r\n    }\r\n\r\n\r\n    @RequestMapping(method = RequestMethod.PUT, consumes = MediaType.APPLICATION_JSON)\r\n    public\r\n    @ResponseBody\r\n    Collection&lt;BudgetDTO&gt; updateConsumerBudget(@RequestParam(value = &quot;budgetPerDate&quot;, required = false)\r\n\r\n                              ArrayList&lt;BudgetPerConsumerDTO&gt; budgetPerDate) throws GeneralException, ParseException {\r\n\r\n        List&lt;BudgetItem&gt; budgetItemList = new ArrayList&lt;&gt;();\r\n        List&lt;Budget&gt; budgets = new ArrayList&lt;&gt;();\r\n        if (budgetPerDate != null) {\r\n            for (BudgetPerConsumerDTO budgetPerConsumerDTO : budgetPerDate) {\r\n                budgetItemList.add(budgetService.createBudgetItemForConsumer(budgetPerConsumerDTO.getId(), new YearMonth(budgetPerConsumerDTO.getDate()), budgetPerConsumerDTO.getBudget()));\r\n            }\r\n        }\r\n\r\n        budgets = budgetService.getBudgetForAllConsumers();\r\n        List&lt;BudgetDTO&gt; budgetDTOList = new ArrayList&lt;&gt;();\r\n        for (Budget budget : budgets) {\r\n            BudgetDTO budgetDto = generateBudgetDto(budget);\r\n            budgetDTOList.add(budgetDto);\r\n        }\r\n        return budgetDTOList;\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nHere is the exception I get: \r\n\r\n    \r\n    ERROR 2014-07-26 18:05:10.737 (GlobalExceptionHandler.eITFMSException: 86) Error executing Web Service org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported\r\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:215)\r\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:289)\r\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:229)\r\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:56)\r\n    at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:298)\r\n    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1091)\r\n\r\n\r\n\r\nThe request looks like that:\r\n i&#39;m using Simple Rest Template Google Extension. the Request looks like the following:\r\n\r\n\r\n    localhost:8080/rest\r\n    1 requests ❘ 140 B transferred\r\n    HeadersPreviewResponseCookiesTiming\r\n    Remote Address:localhost:8080\r\n    Request URL: localhost:8080/rest/budget\r\n    Request Method:PUT\r\n    Status Code:500 Internal Server Error\r\n    Request Headersview source\r\n    Accept:*/*\r\n    Accept-Encoding:gzip,deflate,sdch\r\n    Accept-Language:en-US,en;q=0.8,he;q=0.6\r\n    Connection:keep-alive\r\n    Content-Length:331\r\n    Content-Type:text/plain;charset=UTF-8\r\n    Cookie:JSESSIONID=AE87EEB7A73B9F9E81956231C1735814\r\n    Host:10.23.204.204:8080\r\n    Origin:chrome-extension://fhjcajmcbmldlhcimfajhfbgofnpcjmb\r\n    User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.153 Safari/537.36\r\n    Request Payloadview parsed\r\n    {\r\n    &quot;budgetPerDate&quot;:\r\n    [\r\n      \r\n             {\r\n                &quot;id&quot;:942,\r\n                &quot;date&quot;:[\r\n                   2014,\r\n                   1,\r\n                   1\r\n                ],\r\n    \t&quot;budget&quot;: 100\r\n             },\r\n             {\r\n                &quot;id&quot;:942,\r\n                &quot;date&quot;:[\r\n                   2014,\r\n                   2,\r\n                   1\r\n                ],\r\n    \t&quot;budget&quot;: 150\r\n             }\r\n     ]\r\n    }","title":"Error: org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;text/plain;charset=UTF-8&#39; not supported","body":"<p>I'm newbie in Spring Data.\nI keep getting the error: <code>org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'text/plain;charset=UTF-8' not supported</code>\nI've tried to change consumes inside <code>@RequestMapping</code> annotation to <code>text/plain</code> but unfortunately it didn't help.*</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks,</p>\n\n<p>My Code looks like this:</p>\n\n<pre><code>package com.budget.processing.application;\n\n\nimport com.budget.business.service.Budget;\nimport com.budget.business.service.BudgetItem;\nimport com.budget.business.service.BudgetService;\nimport com.budget.processing.dto.BudgetDTO;\nimport com.budget.processing.dto.BudgetPerConsumerDTO;\nimport com.utils.Constants;\nimport com.common.utils.config.exception.GeneralException;\nimport org.apache.log4j.Logger;\nimport org.joda.time.YearMonth;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.web.bind.annotation.*;\n\nimport javax.ws.rs.core.MediaType;\nimport java.text.ParseException;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\n\n\n@Controller(\"budgetManager\")\n@RequestMapping(value = \"budget\", produces  = Constants.RESPONSE_APP_JSON)\n@Transactional(propagation = Propagation.REQUIRED)\npublic class BudgetManager {\n\nprivate static final Logger logger = Logger.getLogger(BudgetManager.class);\n\n\n@Autowired\nprivate BudgetService budgetService;\n\n\n@RequestMapping(method = RequestMethod.GET)\npublic\n@ResponseBody\nCollection&lt;BudgetDTO&gt; getBudgetMonthlyAllConsumers() throws GeneralException {\n\n    List&lt;Budget&gt; budgetList = budgetService.getBudgetForAllConsumers();\n    List&lt;BudgetDTO&gt; bugetDtos = new ArrayList&lt;&gt;();\n    for (Budget budget : budgetList) {\n        BudgetDTO budgetDTO = generateBudgetDto(budget);\n        bugetDtos.add(budgetDTO);\n    }\n    return bugetDtos;\n}\n\n\n@RequestMapping(method = RequestMethod.PUT, consumes = MediaType.APPLICATION_JSON)\npublic\n@ResponseBody\nCollection&lt;BudgetDTO&gt; updateConsumerBudget(@RequestParam(value = \"budgetPerDate\", required = false)\n\n                          ArrayList&lt;BudgetPerConsumerDTO&gt; budgetPerDate) throws GeneralException, ParseException {\n\n    List&lt;BudgetItem&gt; budgetItemList = new ArrayList&lt;&gt;();\n    List&lt;Budget&gt; budgets = new ArrayList&lt;&gt;();\n    if (budgetPerDate != null) {\n        for (BudgetPerConsumerDTO budgetPerConsumerDTO : budgetPerDate) {\n            budgetItemList.add(budgetService.createBudgetItemForConsumer(budgetPerConsumerDTO.getId(), new YearMonth(budgetPerConsumerDTO.getDate()), budgetPerConsumerDTO.getBudget()));\n        }\n    }\n\n    budgets = budgetService.getBudgetForAllConsumers();\n    List&lt;BudgetDTO&gt; budgetDTOList = new ArrayList&lt;&gt;();\n    for (Budget budget : budgets) {\n        BudgetDTO budgetDto = generateBudgetDto(budget);\n        budgetDTOList.add(budgetDto);\n    }\n    return budgetDTOList;\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Here is the exception I get: </p>\n\n<pre><code>ERROR 2014-07-26 18:05:10.737 (GlobalExceptionHandler.eITFMSException: 86) Error executing Web Service org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'text/plain;charset=UTF-8' not supported\nat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:215)\nat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:289)\nat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:229)\nat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:56)\nat org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:298)\nat org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1091)\n</code></pre>\n\n<p>The request looks like that:\n i'm using Simple Rest Template Google Extension. the Request looks like the following:</p>\n\n<pre><code>localhost:8080/rest\n1 requests ❘ 140 B transferred\nHeadersPreviewResponseCookiesTiming\nRemote Address:localhost:8080\nRequest URL: localhost:8080/rest/budget\nRequest Method:PUT\nStatus Code:500 Internal Server Error\nRequest Headersview source\nAccept:*/*\nAccept-Encoding:gzip,deflate,sdch\nAccept-Language:en-US,en;q=0.8,he;q=0.6\nConnection:keep-alive\nContent-Length:331\nContent-Type:text/plain;charset=UTF-8\nCookie:JSESSIONID=AE87EEB7A73B9F9E81956231C1735814\nHost:10.23.204.204:8080\nOrigin:chrome-extension://fhjcajmcbmldlhcimfajhfbgofnpcjmb\nUser-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.153 Safari/537.36\nRequest Payloadview parsed\n{\n\"budgetPerDate\":\n[\n\n         {\n            \"id\":942,\n            \"date\":[\n               2014,\n               1,\n               1\n            ],\n    \"budget\": 100\n         },\n         {\n            \"id\":942,\n            \"date\":[\n               2014,\n               2,\n               1\n            ],\n    \"budget\": 150\n         }\n ]\n}\n</code></pre>\n"},{"tags":["java","swing","menu"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1696627116,"post_id":77247029,"comment_id":136182531,"body_markdown":"I&#39;ve tried several permeations of your code without been able to replicate the issue, which makes me think there is something in your `MyFrame` class which may be contributing to your issue","body":"I&#39;ve tried several permeations of your code without been able to replicate the issue, which makes me think there is something in your <code>MyFrame</code> class which may be contributing to your issue"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1696627252,"post_id":77247029,"comment_id":136182554,"body_markdown":"@user85421 I&#39;d be more inclined to call `revalidate` on the `rootPane` as it&#39;s the container which is actually responsible for managing the menu bar - but that&#39;s me.  `JFrame` has a complex hierarchy, which is one of the many reasons why it&#39;s generally discouraged to extend directly from it","body":"@user85421 I&#39;d be more inclined to call <code>revalidate</code> on the <code>rootPane</code> as it&#39;s the container which is actually responsible for managing the menu bar - but that&#39;s me.  <code>JFrame</code> has a complex hierarchy, which is one of the many reasons why it&#39;s generally discouraged to extend directly from it"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1696628429,"post_id":77247029,"comment_id":136182695,"body_markdown":"@user85421 Sure - but `JFrame` is a the container which is managing the root pane.  Developers are more likely to extend from `JFrame` then `JRootPane` which places them into a difficult starting place.  Much simpler to start with a `JPanel` or some such - makes the component more re-usable and doesn&#39;t tightly couple you to a one window type or use case. But as I&#39;ve already said, I&#39;m unable to reproduce the OPs problem based on the available information, so calling `revalidate` may not even work, not that&#39;s a bad suggestion with the available information - I&#39;m just saying","body":"@user85421 Sure - but <code>JFrame</code> is a the container which is managing the root pane.  Developers are more likely to extend from <code>JFrame</code> then <code>JRootPane</code> which places them into a difficult starting place.  Much simpler to start with a <code>JPanel</code> or some such - makes the component more re-usable and doesn&#39;t tightly couple you to a one window type or use case. But as I&#39;ve already said, I&#39;m unable to reproduce the OPs problem based on the available information, so calling <code>revalidate</code> may not even work, not that&#39;s a bad suggestion with the available information - I&#39;m just saying"},{"owner":{"account_id":18876645,"reputation":1981,"user_id":13770014,"display_name":"milanHrabos"},"score":0,"creation_date":1696628612,"post_id":77247029,"comment_id":136182721,"body_markdown":"I have added the implementation of `MyFrame`. It is really tiny wrapper around `JFrame`","body":"I have added the implementation of <code>MyFrame</code>. It is really tiny wrapper around <code>JFrame</code>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1696629226,"post_id":77247029,"comment_id":136182794,"body_markdown":"@user85421 Again - this whole mess is one of the many reasons we generally discourage extending from `JFrame`, I know you never said anything about extending from it, I&#39;m just highlighting some of the pitfalls - do you call revalidate on the frame of the root pane!?","body":"@user85421 Again - this whole mess is one of the many reasons we generally discourage extending from <code>JFrame</code>, I know you never said anything about extending from it, I&#39;m just highlighting some of the pitfalls - do you call revalidate on the frame of the root pane!?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1696630065,"post_id":77247029,"comment_id":136182854,"body_markdown":"@milanHrabos The &quot;simple&quot; answer to your problem would be to not call `setVisible(true);` on your window until AFTER you&#39;ve completed establishing it&#39;s content, this will solve a multitute of your issues.  Call `revalidate` and `repaint` on the window, the root pane or the menu bar for me had the same result as doing nothing - for me, the menu bar would appear momentarily after the window was established, this could just be a side effect of the system and my hardware - again, call `setVisible` last - solve lots of problems.","body":"@milanHrabos The &quot;simple&quot; answer to your problem would be to not call <code>setVisible(true);</code> on your window until AFTER you&#39;ve completed establishing it&#39;s content, this will solve a multitute of your issues.  Call <code>revalidate</code> and <code>repaint</code> on the window, the root pane or the menu bar for me had the same result as doing nothing - for me, the menu bar would appear momentarily after the window was established, this could just be a side effect of the system and my hardware - again, call <code>setVisible</code> last - solve lots of problems."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1696630434,"post_id":77247029,"comment_id":136182885,"body_markdown":"@user85421 First relax, I&#39;m not accusing you of anything, I&#39;m simple highlighting why the community will often discourage users from extending from top level containers that&#39;s all","body":"@user85421 First relax, I&#39;m not accusing you of anything, I&#39;m simple highlighting why the community will often discourage users from extending from top level containers that&#39;s all"},{"owner":{"account_id":18876645,"reputation":1981,"user_id":13770014,"display_name":"milanHrabos"},"score":0,"creation_date":1696630952,"post_id":77247029,"comment_id":136182943,"body_markdown":"@MadProgrammer thanks. Adding `setVisible(true)` at the end of the code resolved the issue and now the program works correctly everytime. This is accepted answer (comment)","body":"@MadProgrammer thanks. Adding <code>setVisible(true)</code> at the end of the code resolved the issue and now the program works correctly everytime. This is accepted answer (comment)"}],"owner":{"account_id":18876645,"reputation":1981,"user_id":13770014,"display_name":"milanHrabos"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696628410,"creation_date":1696621484,"question_id":77247029,"body_markdown":"Having this swing app:\r\n\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    \r\n    public class App {\r\n        public static void main(String[] args) {\r\n            MyFrame frame = new MyFrame();\r\n            frame.setLayout(new FlowLayout());\r\n    \r\n            JMenuBar menuBar = new JMenuBar();\r\n    \r\n            JMenu fileMenu = new JMenu(&quot;File&quot;);\r\n            JMenu editMenu = new JMenu(&quot;Edit&quot;);\r\n            JMenu helpMenu = new JMenu(&quot;Help&quot;);\r\n    \r\n            // JMenu added to JMenuBar BEFORE JMenuItem\r\n            menuBar.add(fileMenu);\r\n            menuBar.add(editMenu);\r\n            menuBar.add(helpMenu);\r\n    \r\n            JMenuItem loadItem = new JMenuItem(&quot;Load&quot;);\r\n            JMenuItem saveItem = new JMenuItem(&quot;Save&quot;);\r\n            JMenuItem exitItem = new JMenuItem(&quot;Exit&quot;);\r\n    \r\n            fileMenu.add(loadItem);\r\n            fileMenu.add(saveItem);\r\n            fileMenu.add(exitItem);\r\n    \r\n    \r\n            frame.setJMenuBar(menuBar);\r\n        }\r\n    }\r\n\r\nthat correctly displays the menu bar, where the order is JMenuBar &gt; adding JMenu &gt; adding JMenuItem. But this modification does not works:\r\n\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    \r\n    public class App {\r\n        public static void main(String[] args) {\r\n            MyFrame frame = new MyFrame();\r\n            frame.setLayout(new FlowLayout());\r\n    \r\n            JMenuBar menuBar = new JMenuBar();\r\n    \r\n            JMenu fileMenu = new JMenu(&quot;File&quot;);\r\n            JMenu editMenu = new JMenu(&quot;Edit&quot;);\r\n            JMenu helpMenu = new JMenu(&quot;Help&quot;);\r\n    \r\n            JMenuItem loadItem = new JMenuItem(&quot;Load&quot;);\r\n            JMenuItem saveItem = new JMenuItem(&quot;Save&quot;);\r\n            JMenuItem exitItem = new JMenuItem(&quot;Exit&quot;);\r\n    \r\n            fileMenu.add(loadItem);\r\n            fileMenu.add(saveItem);\r\n            fileMenu.add(exitItem);\r\n    \r\n            // JMenu added to JMenuBar AFTER JMenuItem\r\n            menuBar.add(fileMenu);\r\n            menuBar.add(editMenu);\r\n            menuBar.add(helpMenu);\r\n    \r\n            frame.setJMenuBar(menuBar);\r\n        }\r\n    }\r\n\r\nwhere the order is JMenuBar &gt; adding JMenuItem &gt; adding JMenu. Of course adding JMenuItem to `new`ed JMenu is just preperation before that JMenu will be added to JMenuBar. But it still does not work. Why? Does the order to adding one another matters?\r\n\r\nPS: this question was asked because after building the app several times, it sometimes shows the menubar, and other times does not show the bar at all (i.e. blank frame). I firstly thought it has to do with the order of adding the objects, but even in the other case (when JMenu is added AFTER JMenuItem) it worked. And other time the first case did not work. It is weird, but at the moment I dont know what it is causing\r\n\r\nPS2:\r\n\r\n    import javax.swing.*;\r\n    \r\n    public class MyFrame extends JFrame{\r\n        public MyFrame(){\r\n            setSize(500, 500);\r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            setVisible(true);\r\n        }\r\n    }\r\n\r\n","title":"JMenuItem can be added to JMenu after that JMenu was added to JMenuBar?","body":"<p>Having this swing app:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\npublic class App {\n    public static void main(String[] args) {\n        MyFrame frame = new MyFrame();\n        frame.setLayout(new FlowLayout());\n\n        JMenuBar menuBar = new JMenuBar();\n\n        JMenu fileMenu = new JMenu(&quot;File&quot;);\n        JMenu editMenu = new JMenu(&quot;Edit&quot;);\n        JMenu helpMenu = new JMenu(&quot;Help&quot;);\n\n        // JMenu added to JMenuBar BEFORE JMenuItem\n        menuBar.add(fileMenu);\n        menuBar.add(editMenu);\n        menuBar.add(helpMenu);\n\n        JMenuItem loadItem = new JMenuItem(&quot;Load&quot;);\n        JMenuItem saveItem = new JMenuItem(&quot;Save&quot;);\n        JMenuItem exitItem = new JMenuItem(&quot;Exit&quot;);\n\n        fileMenu.add(loadItem);\n        fileMenu.add(saveItem);\n        fileMenu.add(exitItem);\n\n\n        frame.setJMenuBar(menuBar);\n    }\n}\n</code></pre>\n<p>that correctly displays the menu bar, where the order is JMenuBar &gt; adding JMenu &gt; adding JMenuItem. But this modification does not works:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\npublic class App {\n    public static void main(String[] args) {\n        MyFrame frame = new MyFrame();\n        frame.setLayout(new FlowLayout());\n\n        JMenuBar menuBar = new JMenuBar();\n\n        JMenu fileMenu = new JMenu(&quot;File&quot;);\n        JMenu editMenu = new JMenu(&quot;Edit&quot;);\n        JMenu helpMenu = new JMenu(&quot;Help&quot;);\n\n        JMenuItem loadItem = new JMenuItem(&quot;Load&quot;);\n        JMenuItem saveItem = new JMenuItem(&quot;Save&quot;);\n        JMenuItem exitItem = new JMenuItem(&quot;Exit&quot;);\n\n        fileMenu.add(loadItem);\n        fileMenu.add(saveItem);\n        fileMenu.add(exitItem);\n\n        // JMenu added to JMenuBar AFTER JMenuItem\n        menuBar.add(fileMenu);\n        menuBar.add(editMenu);\n        menuBar.add(helpMenu);\n\n        frame.setJMenuBar(menuBar);\n    }\n}\n</code></pre>\n<p>where the order is JMenuBar &gt; adding JMenuItem &gt; adding JMenu. Of course adding JMenuItem to <code>new</code>ed JMenu is just preperation before that JMenu will be added to JMenuBar. But it still does not work. Why? Does the order to adding one another matters?</p>\n<p>PS: this question was asked because after building the app several times, it sometimes shows the menubar, and other times does not show the bar at all (i.e. blank frame). I firstly thought it has to do with the order of adding the objects, but even in the other case (when JMenu is added AFTER JMenuItem) it worked. And other time the first case did not work. It is weird, but at the moment I dont know what it is causing</p>\n<p>PS2:</p>\n<pre><code>import javax.swing.*;\n\npublic class MyFrame extends JFrame{\n    public MyFrame(){\n        setSize(500, 500);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":29606272,"reputation":1,"user_id":22690652,"display_name":"Dana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696627304,"creation_date":1696522587,"question_id":77238899,"body_markdown":"This API in my backend should get data from the `User_Subscription` table using the `user_ID`, but when I test it, it says forbidden. When I try to replace the `user_ID` with the ID of the record in the database it returns the correct data. What’s wrong? How can I make it return data from the `user_ID`? Only save endpoint works the way it should.\r\n\r\nThe controller: \r\n\r\n```\r\n@RequestMapping(path = &quot;/api/v1/userSubPlan&quot;)\r\npublic class UserSubscriptionController {\r\n    private final UserSubscriptionService userSubscriptionPlanService;\r\n    private final UserSubscriptionService userSubscriptionService;\r\n\r\n    @PostMapping(&quot;/{user_id}/{subscription_plan_id}&quot;)\r\n    public ResponseEntity&lt;?&gt; AddSubPlan(@PathVariable Long user_id, @PathVariable Long subscription_plan_id) {\r\n\r\n        try {\r\n            userSubscriptionPlanService.AddSubPlan(user_id,subscription_plan_id);\r\n            return ResponseEntity.ok(&quot;&quot;);\r\n        } catch (IllegalArgumentException e) {\r\n            return ResponseEntity.badRequest().build();// Return HTTP 400 Bad Request\r\n        }}\r\n\r\n    @GetMapping(&quot;/{user_id}/SubID&quot;)\r\n    public Long getUserId(@PathVariable(&quot;user_id&quot;) Long userId) {\r\n\r\n            Long subscriptionId = userSubscriptionService.getSubscriptionId(userId);\r\n            if (subscriptionId != null) {\r\n                return subscriptionId;\r\n            } else {\r\n                throw new RuntimeException(&quot;Subscription not found for user with ID: &quot; + userId);\r\n            }\r\n    }\r\n\r\n\r\n    @GetMapping(&quot;/{user_id}/SubEndDate&quot;)\r\n    public ResponseEntity&lt;Timestamp&gt; getEndDate(@PathVariable(&quot;user_id&quot;) Long userID) {\r\n        try {\r\n            Timestamp endDate = userSubscriptionService.getSubscriptionEndDate(userID);\r\n            return ResponseEntity.ok(endDate);\r\n        } catch (IllegalArgumentException e) {\r\n            return ResponseEntity.badRequest().build();// Return HTTP 400 Bad Request\r\n        }\r\n    }\r\n\r\n    @GetMapping(&quot;/{user_id}/SubStartDate&quot;)\r\n    public ResponseEntity&lt;Timestamp&gt; getStartDate(@PathVariable(&quot;user_id&quot;) Long userID) {\r\n        try {\r\n            Timestamp StartDate = userSubscriptionService.getSubscriptionStartDate(userID);\r\n            return ResponseEntity.ok(StartDate);\r\n        } catch (IllegalArgumentException e) {\r\n            return ResponseEntity.badRequest().build();// Return HTTP 400 Bad Request\r\n        }\r\n    }\r\n\r\n    @GetMapping(&quot;/{user_id}/SubPrice&quot;)\r\n    public ResponseEntity&lt;Double&gt; getPrice(@PathVariable(&quot;user_id&quot;) Long userID) {\r\n        try {\r\n            Double Price = userSubscriptionService.getSubscriptionPrice(userID);\r\n            return ResponseEntity.ok(Price);\r\n        } catch (IllegalArgumentException e) {\r\n            return ResponseEntity.badRequest().build();// Return HTTP 400 Bad Request\r\n        }\r\n    }\r\n\r\n\r\n\r\n    }\r\n```\r\n\r\nThe service: \r\n\r\n```\r\npublic class UserSubscriptionService {\r\n    private final UserSubscriptionJpaRepo userSubscriptionJpaRepo;\r\n    private final UserJpaRepo userJpaRepo;\r\n    private final SubscriptionPlanJpaRepo subscriptionPlanJpaRepo;\r\n\r\n    public void AddSubPlan(Long userId, Long subscriptionPlanId) {\r\n        UserSubscriptionDBO userSubPlan = new UserSubscriptionDBO();\r\n        User user = userJpaRepo.findById(userId).orElse(null);\r\n        if (user == null) {\r\n            throw new IllegalArgumentException(&quot;User not Created&quot;);\r\n        }\r\n        userSubPlan.setUserDBO(user);\r\n        SubscriptionPlanDBO subPlan = subscriptionPlanJpaRepo.findById(subscriptionPlanId).orElse(null);\r\n        if (subPlan == null) {\r\n            throw new IllegalArgumentException(&quot;Subscription Plan not found&quot;);\r\n        }\r\n        userSubPlan.setSubscriptionPlanDBO(subPlan);\r\n        Timestamp currentTimestamp = new Timestamp(new Date().getTime());\r\n        userSubPlan.setSubscriptionStartDate(currentTimestamp);\r\n\r\n        if (subPlan.getSubscriptionPlanID() == 1 || subPlan.getSubscriptionPlanID() == 4 || subPlan.getSubscriptionPlanID() == 7) {\r\n            userSubPlan.setSubscriptionEndDate(calculateSubscriptionEndDateDay(userSubPlan));\r\n            userSubscriptionJpaRepo.save(userSubPlan);\r\n        }\r\n        if (subPlan.getSubscriptionPlanID() == 2 || subPlan.getSubscriptionPlanID() == 5 || subPlan.getSubscriptionPlanID() == 8) {\r\n            userSubPlan.setSubscriptionEndDate(calculateSubscriptionEndDateWeeks(userSubPlan));\r\n            userSubscriptionJpaRepo.save(userSubPlan);\r\n        }\r\n        if (subPlan.getSubscriptionPlanID() == 3 || subPlan.getSubscriptionPlanID() == 6 || subPlan.getSubscriptionPlanID() == 9) {\r\n            userSubPlan.setSubscriptionEndDate(calculateSubscriptionEndDate(userSubPlan));\r\n            userSubscriptionJpaRepo.save(userSubPlan);\r\n        }\r\n        // userSubPlan.setSubscriptionEndDate(calculateSubscriptionEndDate(userSubPlan));\r\n      //  userSubscriptionJpaRepo.save(userSubPlan);\r\n    }\r\n\r\n\r\n    private Timestamp calculateSubscriptionEndDate(UserSubscriptionDBO userSubPlan) {\r\n        LocalDateTime startDate = userSubPlan.getSubscriptionStartDate().toLocalDateTime();\r\n        int monthsToAdd = userSubPlan.getSubscriptionPlanDBO().getDuration();\r\n\r\n        LocalDateTime endDate = startDate.plusMonths(monthsToAdd);\r\n\r\n        return Timestamp.valueOf(endDate);\r\n    }\r\n\r\n    public Long getSubscriptionId(Long userId) {\r\n        User user = userJpaRepo.findById(userId).orElse(null);\r\n        if (user == null) {\r\n            return null;\r\n        }\r\n        UserSubscriptionDBO userSubPlan = userSubscriptionJpaRepo.findById(userId).orElse(null);\r\n\r\n        if (userSubPlan == null) { return null;}\r\n        else return userSubPlan.getSubscriptionPlanDBO().getSubscriptionPlanID();\r\n    }\r\n\r\n\r\n\r\n    public Timestamp getSubscriptionEndDate(Long userId) {\r\n        User user = userJpaRepo.findById(userId).orElse(null);\r\n        UserSubscriptionDBO userSubPlan = userSubscriptionJpaRepo.findById(userId).orElse(null);\r\n\r\n        if (user == null) {\r\n            throw new IllegalArgumentException(&quot;user not found&quot;);\r\n        }\r\n        else return userSubPlan.getSubscriptionEndDate();\r\n    }\r\n\r\n    public Timestamp getSubscriptionStartDate(Long userId) {\r\n        User user = userJpaRepo.findById(userId)\r\n                .orElseThrow(() -&gt; new IllegalArgumentException(&quot;User not found for user ID: &quot; + userId));\r\n\r\n        UserSubscriptionDBO userSubPlan = userSubscriptionJpaRepo.findById(userId)\r\n                .orElseThrow(() -&gt; new IllegalArgumentException(&quot;User subscription not found for user ID: &quot; + userId));\r\n\r\n        return userSubPlan.getSubscriptionStartDate();\r\n    }\r\n\r\n\r\n\r\n    public Double getSubscriptionPrice(Long userId) {\r\n        User user = userJpaRepo.findById(userId).orElse(null);\r\n        UserSubscriptionDBO userSubPlan = userSubscriptionJpaRepo.findById(userId).orElse(null);\r\n\r\n        if (user == null) {\r\n            throw new IllegalArgumentException(&quot;User not found&quot;);\r\n        }\r\n\r\n        if (userSubPlan == null) {\r\n            throw new IllegalArgumentException(&quot;User subscription not found&quot;);\r\n        }\r\n\r\n        return userSubPlan.getSubscriptionPlanDBO().getPrice();\r\n    }\r\n\r\n\r\n\r\n    private Timestamp calculateSubscriptionEndDateDay(UserSubscriptionDBO userSubPlan) {\r\n        LocalDateTime startDate = userSubPlan.getSubscriptionStartDate().toLocalDateTime();\r\n        int DaysToAdd = userSubPlan.getSubscriptionPlanDBO().getDuration();\r\n\r\n        LocalDateTime endDate = startDate.plusDays(DaysToAdd);\r\n\r\n        return Timestamp.valueOf(endDate);\r\n\r\n    }\r\n\r\n    private Timestamp calculateSubscriptionEndDateWeeks(UserSubscriptionDBO userSubPlan) {\r\n        LocalDateTime startDate = userSubPlan.getSubscriptionStartDate().toLocalDateTime();\r\n        int weeksToAdd = userSubPlan.getSubscriptionPlanDBO().getDuration();\r\n\r\n        LocalDateTime endDate = startDate.plusWeeks(weeksToAdd);\r\n\r\n        return Timestamp.valueOf(endDate);\r\n    }\r\n}\r\n```\r\n\r\nThe DBO: \r\n\r\n```\r\npublic class UserSubscriptionDBO {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    @Column(name=&quot;id&quot;)\r\n    private Long id;\r\n    //foreign key with the user table\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;user_id&quot;)\r\n    private User userDBO;\r\n\r\n    @Column(name = &quot;subscription_start_date&quot; )\r\n    private Timestamp subscriptionStartDate;\r\n\r\n    @Column(name = &quot;subscription_end_date&quot; )\r\n    private Timestamp subscriptionEndDate;\r\n\r\n    //foreign key with the user table\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;subscription_plan_id&quot;)\r\n    private SubscriptionPlanDBO subscriptionPlanDBO;\r\n\r\n    public UserSubscriptionDBO(Long id, User userDBO, Timestamp subscriptionStartDate,  SubscriptionPlanDBO subscriptionPlanDBO) {\r\n        this.id = id;\r\n        this.userDBO = userDBO;\r\n        this.subscriptionStartDate = subscriptionStartDate;\r\n        this.subscriptionPlanDBO = subscriptionPlanDBO;\r\n\r\n        // Calculate the subscription start date (assuming it&#39;s the current date)\r\n        this.subscriptionStartDate = Timestamp.valueOf(LocalDate.now().atStartOfDay());\r\n\r\n    }\r\n\r\n    private Timestamp calculateSubscriptionEndDate(Timestamp durationMonths) {\r\n        LocalDate startDate = subscriptionStartDate.toLocalDateTime().toLocalDate();\r\n\r\n        // Convert durationMonths to a number of months\r\n        int monthsToAdd = durationMonths.toLocalDateTime().getMonthValue();\r\n\r\n        // Calculate the end date by adding months to the start date\r\n        LocalDate endDate = startDate.plusMonths(monthsToAdd);\r\n\r\n        return Timestamp.valueOf(endDate.atStartOfDay());\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nWhen I test this API http://localhost:8081/api/v1/userSubPlan/304/SubEndDate IN POSTMAN it returns &quot;Not Found&quot; even though there is a record for the user with the id; 304 but when I test it using the record ID it returns the `EndDate`.","title":"API in my backend should get data from the User_Subscription table Using the user_ID but it return data by ID","body":"<p>This API in my backend should get data from the <code>User_Subscription</code> table using the <code>user_ID</code>, but when I test it, it says forbidden. When I try to replace the <code>user_ID</code> with the ID of the record in the database it returns the correct data. What’s wrong? How can I make it return data from the <code>user_ID</code>? Only save endpoint works the way it should.</p>\n<p>The controller:</p>\n<pre><code>@RequestMapping(path = &quot;/api/v1/userSubPlan&quot;)\npublic class UserSubscriptionController {\n    private final UserSubscriptionService userSubscriptionPlanService;\n    private final UserSubscriptionService userSubscriptionService;\n\n    @PostMapping(&quot;/{user_id}/{subscription_plan_id}&quot;)\n    public ResponseEntity&lt;?&gt; AddSubPlan(@PathVariable Long user_id, @PathVariable Long subscription_plan_id) {\n\n        try {\n            userSubscriptionPlanService.AddSubPlan(user_id,subscription_plan_id);\n            return ResponseEntity.ok(&quot;&quot;);\n        } catch (IllegalArgumentException e) {\n            return ResponseEntity.badRequest().build();// Return HTTP 400 Bad Request\n        }}\n\n    @GetMapping(&quot;/{user_id}/SubID&quot;)\n    public Long getUserId(@PathVariable(&quot;user_id&quot;) Long userId) {\n\n            Long subscriptionId = userSubscriptionService.getSubscriptionId(userId);\n            if (subscriptionId != null) {\n                return subscriptionId;\n            } else {\n                throw new RuntimeException(&quot;Subscription not found for user with ID: &quot; + userId);\n            }\n    }\n\n\n    @GetMapping(&quot;/{user_id}/SubEndDate&quot;)\n    public ResponseEntity&lt;Timestamp&gt; getEndDate(@PathVariable(&quot;user_id&quot;) Long userID) {\n        try {\n            Timestamp endDate = userSubscriptionService.getSubscriptionEndDate(userID);\n            return ResponseEntity.ok(endDate);\n        } catch (IllegalArgumentException e) {\n            return ResponseEntity.badRequest().build();// Return HTTP 400 Bad Request\n        }\n    }\n\n    @GetMapping(&quot;/{user_id}/SubStartDate&quot;)\n    public ResponseEntity&lt;Timestamp&gt; getStartDate(@PathVariable(&quot;user_id&quot;) Long userID) {\n        try {\n            Timestamp StartDate = userSubscriptionService.getSubscriptionStartDate(userID);\n            return ResponseEntity.ok(StartDate);\n        } catch (IllegalArgumentException e) {\n            return ResponseEntity.badRequest().build();// Return HTTP 400 Bad Request\n        }\n    }\n\n    @GetMapping(&quot;/{user_id}/SubPrice&quot;)\n    public ResponseEntity&lt;Double&gt; getPrice(@PathVariable(&quot;user_id&quot;) Long userID) {\n        try {\n            Double Price = userSubscriptionService.getSubscriptionPrice(userID);\n            return ResponseEntity.ok(Price);\n        } catch (IllegalArgumentException e) {\n            return ResponseEntity.badRequest().build();// Return HTTP 400 Bad Request\n        }\n    }\n\n\n\n    }\n</code></pre>\n<p>The service:</p>\n<pre><code>public class UserSubscriptionService {\n    private final UserSubscriptionJpaRepo userSubscriptionJpaRepo;\n    private final UserJpaRepo userJpaRepo;\n    private final SubscriptionPlanJpaRepo subscriptionPlanJpaRepo;\n\n    public void AddSubPlan(Long userId, Long subscriptionPlanId) {\n        UserSubscriptionDBO userSubPlan = new UserSubscriptionDBO();\n        User user = userJpaRepo.findById(userId).orElse(null);\n        if (user == null) {\n            throw new IllegalArgumentException(&quot;User not Created&quot;);\n        }\n        userSubPlan.setUserDBO(user);\n        SubscriptionPlanDBO subPlan = subscriptionPlanJpaRepo.findById(subscriptionPlanId).orElse(null);\n        if (subPlan == null) {\n            throw new IllegalArgumentException(&quot;Subscription Plan not found&quot;);\n        }\n        userSubPlan.setSubscriptionPlanDBO(subPlan);\n        Timestamp currentTimestamp = new Timestamp(new Date().getTime());\n        userSubPlan.setSubscriptionStartDate(currentTimestamp);\n\n        if (subPlan.getSubscriptionPlanID() == 1 || subPlan.getSubscriptionPlanID() == 4 || subPlan.getSubscriptionPlanID() == 7) {\n            userSubPlan.setSubscriptionEndDate(calculateSubscriptionEndDateDay(userSubPlan));\n            userSubscriptionJpaRepo.save(userSubPlan);\n        }\n        if (subPlan.getSubscriptionPlanID() == 2 || subPlan.getSubscriptionPlanID() == 5 || subPlan.getSubscriptionPlanID() == 8) {\n            userSubPlan.setSubscriptionEndDate(calculateSubscriptionEndDateWeeks(userSubPlan));\n            userSubscriptionJpaRepo.save(userSubPlan);\n        }\n        if (subPlan.getSubscriptionPlanID() == 3 || subPlan.getSubscriptionPlanID() == 6 || subPlan.getSubscriptionPlanID() == 9) {\n            userSubPlan.setSubscriptionEndDate(calculateSubscriptionEndDate(userSubPlan));\n            userSubscriptionJpaRepo.save(userSubPlan);\n        }\n        // userSubPlan.setSubscriptionEndDate(calculateSubscriptionEndDate(userSubPlan));\n      //  userSubscriptionJpaRepo.save(userSubPlan);\n    }\n\n\n    private Timestamp calculateSubscriptionEndDate(UserSubscriptionDBO userSubPlan) {\n        LocalDateTime startDate = userSubPlan.getSubscriptionStartDate().toLocalDateTime();\n        int monthsToAdd = userSubPlan.getSubscriptionPlanDBO().getDuration();\n\n        LocalDateTime endDate = startDate.plusMonths(monthsToAdd);\n\n        return Timestamp.valueOf(endDate);\n    }\n\n    public Long getSubscriptionId(Long userId) {\n        User user = userJpaRepo.findById(userId).orElse(null);\n        if (user == null) {\n            return null;\n        }\n        UserSubscriptionDBO userSubPlan = userSubscriptionJpaRepo.findById(userId).orElse(null);\n\n        if (userSubPlan == null) { return null;}\n        else return userSubPlan.getSubscriptionPlanDBO().getSubscriptionPlanID();\n    }\n\n\n\n    public Timestamp getSubscriptionEndDate(Long userId) {\n        User user = userJpaRepo.findById(userId).orElse(null);\n        UserSubscriptionDBO userSubPlan = userSubscriptionJpaRepo.findById(userId).orElse(null);\n\n        if (user == null) {\n            throw new IllegalArgumentException(&quot;user not found&quot;);\n        }\n        else return userSubPlan.getSubscriptionEndDate();\n    }\n\n    public Timestamp getSubscriptionStartDate(Long userId) {\n        User user = userJpaRepo.findById(userId)\n                .orElseThrow(() -&gt; new IllegalArgumentException(&quot;User not found for user ID: &quot; + userId));\n\n        UserSubscriptionDBO userSubPlan = userSubscriptionJpaRepo.findById(userId)\n                .orElseThrow(() -&gt; new IllegalArgumentException(&quot;User subscription not found for user ID: &quot; + userId));\n\n        return userSubPlan.getSubscriptionStartDate();\n    }\n\n\n\n    public Double getSubscriptionPrice(Long userId) {\n        User user = userJpaRepo.findById(userId).orElse(null);\n        UserSubscriptionDBO userSubPlan = userSubscriptionJpaRepo.findById(userId).orElse(null);\n\n        if (user == null) {\n            throw new IllegalArgumentException(&quot;User not found&quot;);\n        }\n\n        if (userSubPlan == null) {\n            throw new IllegalArgumentException(&quot;User subscription not found&quot;);\n        }\n\n        return userSubPlan.getSubscriptionPlanDBO().getPrice();\n    }\n\n\n\n    private Timestamp calculateSubscriptionEndDateDay(UserSubscriptionDBO userSubPlan) {\n        LocalDateTime startDate = userSubPlan.getSubscriptionStartDate().toLocalDateTime();\n        int DaysToAdd = userSubPlan.getSubscriptionPlanDBO().getDuration();\n\n        LocalDateTime endDate = startDate.plusDays(DaysToAdd);\n\n        return Timestamp.valueOf(endDate);\n\n    }\n\n    private Timestamp calculateSubscriptionEndDateWeeks(UserSubscriptionDBO userSubPlan) {\n        LocalDateTime startDate = userSubPlan.getSubscriptionStartDate().toLocalDateTime();\n        int weeksToAdd = userSubPlan.getSubscriptionPlanDBO().getDuration();\n\n        LocalDateTime endDate = startDate.plusWeeks(weeksToAdd);\n\n        return Timestamp.valueOf(endDate);\n    }\n}\n</code></pre>\n<p>The DBO:</p>\n<pre><code>public class UserSubscriptionDBO {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Column(name=&quot;id&quot;)\n    private Long id;\n    //foreign key with the user table\n    @ManyToOne\n    @JoinColumn(name = &quot;user_id&quot;)\n    private User userDBO;\n\n    @Column(name = &quot;subscription_start_date&quot; )\n    private Timestamp subscriptionStartDate;\n\n    @Column(name = &quot;subscription_end_date&quot; )\n    private Timestamp subscriptionEndDate;\n\n    //foreign key with the user table\n    @ManyToOne\n    @JoinColumn(name = &quot;subscription_plan_id&quot;)\n    private SubscriptionPlanDBO subscriptionPlanDBO;\n\n    public UserSubscriptionDBO(Long id, User userDBO, Timestamp subscriptionStartDate,  SubscriptionPlanDBO subscriptionPlanDBO) {\n        this.id = id;\n        this.userDBO = userDBO;\n        this.subscriptionStartDate = subscriptionStartDate;\n        this.subscriptionPlanDBO = subscriptionPlanDBO;\n\n        // Calculate the subscription start date (assuming it's the current date)\n        this.subscriptionStartDate = Timestamp.valueOf(LocalDate.now().atStartOfDay());\n\n    }\n\n    private Timestamp calculateSubscriptionEndDate(Timestamp durationMonths) {\n        LocalDate startDate = subscriptionStartDate.toLocalDateTime().toLocalDate();\n\n        // Convert durationMonths to a number of months\n        int monthsToAdd = durationMonths.toLocalDateTime().getMonthValue();\n\n        // Calculate the end date by adding months to the start date\n        LocalDate endDate = startDate.plusMonths(monthsToAdd);\n\n        return Timestamp.valueOf(endDate.atStartOfDay());\n    }\n\n}\n</code></pre>\n<p>When I test this API http://localhost:8081/api/v1/userSubPlan/304/SubEndDate IN POSTMAN it returns &quot;Not Found&quot; even though there is a record for the user with the id; 304 but when I test it using the record ID it returns the <code>EndDate</code>.</p>\n"},{"tags":["java","android","gradle","protocol-buffers"],"answers":[{"comments":[{"owner":{"account_id":7890,"reputation":14621,"user_id":13892,"accept_rate":67,"display_name":"James A Wilson"},"score":0,"creation_date":1579524887,"post_id":45748126,"comment_id":105784404,"body_markdown":"Yes, this does fix the problem. For reference, the [plugin documentation](https://github.com/google/protobuf-gradle-plugin#protos-in-dependencies) indicates that: `Protos in dependencies (e.g. upstream jars) can be put in either in the compile configuration or the protobuf configuration.`","body":"Yes, this does fix the problem. For reference, the <a href=\"https://github.com/google/protobuf-gradle-plugin#protos-in-dependencies\" rel=\"nofollow noreferrer\">plugin documentation</a> indicates that: <code>Protos in dependencies (e.g. upstream jars) can be put in either in the compile configuration or the protobuf configuration.</code>"},{"owner":{"account_id":1185470,"reputation":1429,"user_id":1159548,"display_name":"Jan Dolejsi"},"score":1,"creation_date":1670582148,"post_id":45748126,"comment_id":131912379,"body_markdown":"Works great, just `compile` has been deprecated and replaced by `implementation`.","body":"Works great, just <code>compile</code> has been deprecated and replaced by <code>implementation</code>."}],"tags":[],"owner":{"account_id":81972,"reputation":1311,"user_id":230825,"accept_rate":50,"display_name":"david"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1670708114,"creation_date":1503027378,"answer_id":45748126,"question_id":45742210,"body_markdown":"Adding the following dependencies fixes the error:\r\n\r\n&gt; compile &#39;com.google.protobuf:protobuf-java:3.4.0&#39;\r\n\r\nThe dependency provides default google protofiles along the compiled protobuf library.\r\n\r\nFrom Gradle 6+, use `implementation`:\r\n\r\n```groovy\r\ndependencies {\r\n  // https://mvnrepository.com/artifact/com.google.protobuf/protobuf-java\r\n  implementation &#39;com.google.protobuf:protobuf-java:3.21.10&#39;\r\n}\r\n```","title":"Gradle protoc plugin doesn&#39;t find default google proto file","body":"<p>Adding the following dependencies fixes the error:</p>\n<blockquote>\n<p>compile 'com.google.protobuf:protobuf-java:3.4.0'</p>\n</blockquote>\n<p>The dependency provides default google protofiles along the compiled protobuf library.</p>\n<p>From Gradle 6+, use <code>implementation</code>:</p>\n<pre><code>dependencies {\n  // https://mvnrepository.com/artifact/com.google.protobuf/protobuf-java\n  implementation 'com.google.protobuf:protobuf-java:3.21.10'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8016474,"reputation":3619,"user_id":10210069,"display_name":"eeqk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696627294,"creation_date":1696627294,"answer_id":77247435,"question_id":45742210,"body_markdown":"In my case I had everything set up correctly, but IntelliJ didn&#39;t auto-import a proto correctly.\r\n\r\nI had to change\r\n```\r\nimport &quot;struct.proto&quot;;\r\n```\r\nto\r\n```\r\nimport &quot;google/protobuf/struct.proto&quot;;\r\n```","title":"Gradle protoc plugin doesn&#39;t find default google proto file","body":"<p>In my case I had everything set up correctly, but IntelliJ didn't auto-import a proto correctly.</p>\n<p>I had to change</p>\n<pre><code>import &quot;struct.proto&quot;;\n</code></pre>\n<p>to</p>\n<pre><code>import &quot;google/protobuf/struct.proto&quot;;\n</code></pre>\n"}],"owner":{"account_id":81972,"reputation":1311,"user_id":230825,"accept_rate":50,"display_name":"david"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1939,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":45748126,"answer_count":2,"score":2,"last_activity_date":1696627294,"creation_date":1502993135,"question_id":45742210,"body_markdown":"My proto files use default google protocolbuffers types such as struct and timestamp.\r\n\r\nUsing the default gradle protoc integration, gradle outputs errors because it can not resolve imports:\r\n\r\n&gt; google/protobuf/struct.proto: File not found.\r\n\r\n&gt; google/protobuf/timestamp.proto: File not found.\r\n\r\nReplacing the default gradle protoc block\r\n\r\n    protoc {\r\n        artifact = &#39;com.google.protobuf:protoc:3.3.0&#39;\r\n    }\r\nwith one specifying where protoc is\r\n\r\n    protoc {\r\n        path = &#39;/usr/local/bin/protoc&#39;\r\n    }\r\n\r\nfixes the issue but it is not portable.\r\n\r\nIs there any jar dependency or other portable solution that could make the default gradle protoc definition working?\r\n\r\n\r\n","title":"Gradle protoc plugin doesn&#39;t find default google proto file","body":"<p>My proto files use default google protocolbuffers types such as struct and timestamp.</p>\n\n<p>Using the default gradle protoc integration, gradle outputs errors because it can not resolve imports:</p>\n\n<blockquote>\n  <p>google/protobuf/struct.proto: File not found.</p>\n  \n  <p>google/protobuf/timestamp.proto: File not found.</p>\n</blockquote>\n\n<p>Replacing the default gradle protoc block</p>\n\n<pre><code>protoc {\n    artifact = 'com.google.protobuf:protoc:3.3.0'\n}\n</code></pre>\n\n<p>with one specifying where protoc is</p>\n\n<pre><code>protoc {\n    path = '/usr/local/bin/protoc'\n}\n</code></pre>\n\n<p>fixes the issue but it is not portable.</p>\n\n<p>Is there any jar dependency or other portable solution that could make the default gradle protoc definition working?</p>\n"},{"tags":["java","testing","neo4j","neo4j-apoc","apoc"],"answers":[{"comments":[{"owner":{"account_id":119005,"reputation":497,"user_id":310423,"accept_rate":82,"display_name":"pilsdumps"},"score":0,"creation_date":1696952478,"post_id":77247307,"comment_id":136216993,"body_markdown":"Brilliant, thank you. Not spotting that I needed apoc-core rather than apoc was the key","body":"Brilliant, thank you. Not spotting that I needed apoc-core rather than apoc was the key"}],"tags":[],"owner":{"account_id":947871,"reputation":64287,"user_id":974731,"display_name":"cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696625797,"creation_date":1696625424,"answer_id":77247307,"question_id":77242976,"body_markdown":"First of all, you should ensure that your neo4j dependencies have compatible versions. You are currently using wildly different versions:\r\n  - Version 5.12.0 of `neo4j`\r\n  - Version 5.3.0 of `neo4j-java-driver`\r\n  - Version 4.4.0.1 of `apoc`.\r\n\r\nTo keep all 3 dependencies consistent, the correct dependencies for the latter 2 artifacts are as follows (notice that the `artifactId` for core apoc is `apoc-core` in 5.x):\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.neo4j.driver&lt;/groupId&gt;\r\n        &lt;artifactId&gt;neo4j-java-driver&lt;/artifactId&gt;\r\n        &lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\r\n        &lt;artifactId&gt;apoc-core&lt;/artifactId&gt;\r\n        &lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIn general, to use an APOC core function (or procedure) in your embedded server, you need to find the APOC core class that implements the function (or procedure). To do that, you can:\r\n\r\n 1. Select the [Tag](https://github.com/neo4j/apoc/tags) of the version\r\n    you are using in the APOC core github repo.\r\n 2. Search for the name of the function (or procedure). For example, for `apoc.text.code`, look for a match that looks like\r\n    `@UserFunction(&quot;apoc.text.code&quot;)`.\r\n 3. Get the name of the APOC class (including the package) that implements what you are looking for. For example,\r\n    `apoc.text.Strings`.\r\n 4. In your class that calls `newInProcessBuilder`, add an `import` of that APOC class.\r\n 5. Call the builder&#39;s `withFunction` (or `withProcedure`) method and pass it the APOC class. For example, `withFunction(Strings.class)`.","title":"neo4j procedure testing with apoc does not compile","body":"<p>First of all, you should ensure that your neo4j dependencies have compatible versions. You are currently using wildly different versions:</p>\n<ul>\n<li>Version 5.12.0 of <code>neo4j</code></li>\n<li>Version 5.3.0 of <code>neo4j-java-driver</code></li>\n<li>Version 4.4.0.1 of <code>apoc</code>.</li>\n</ul>\n<p>To keep all 3 dependencies consistent, the correct dependencies for the latter 2 artifacts are as follows (notice that the <code>artifactId</code> for core apoc is <code>apoc-core</code> in 5.x):</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.neo4j.driver&lt;/groupId&gt;\n    &lt;artifactId&gt;neo4j-java-driver&lt;/artifactId&gt;\n    &lt;version&gt;${neo4j.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\n    &lt;artifactId&gt;apoc-core&lt;/artifactId&gt;\n    &lt;version&gt;${neo4j.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In general, to use an APOC core function (or procedure) in your embedded server, you need to find the APOC core class that implements the function (or procedure). To do that, you can:</p>\n<ol>\n<li>Select the <a href=\"https://github.com/neo4j/apoc/tags\" rel=\"nofollow noreferrer\">Tag</a> of the version\nyou are using in the APOC core github repo.</li>\n<li>Search for the name of the function (or procedure). For example, for <code>apoc.text.code</code>, look for a match that looks like\n<code>@UserFunction(&quot;apoc.text.code&quot;)</code>.</li>\n<li>Get the name of the APOC class (including the package) that implements what you are looking for. For example,\n<code>apoc.text.Strings</code>.</li>\n<li>In your class that calls <code>newInProcessBuilder</code>, add an <code>import</code> of that APOC class.</li>\n<li>Call the builder's <code>withFunction</code> (or <code>withProcedure</code>) method and pass it the APOC class. For example, <code>withFunction(Strings.class)</code>.</li>\n</ol>\n"}],"owner":{"account_id":119005,"reputation":497,"user_id":310423,"accept_rate":82,"display_name":"pilsdumps"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77247307,"answer_count":1,"score":0,"last_activity_date":1696625797,"creation_date":1696581087,"question_id":77242976,"body_markdown":"I&#39;ve a project where I can successfully test my user procedure written using the neo4j traversal framework based on example testing projects.\r\n\r\nThe relevant part of the pom file is\r\n\r\n\r\n```\r\n...\r\n  &lt;neo4j.version&gt;5.12.0&lt;/neo4j.version&gt;\r\n  &lt;neo4j-java-driver.version&gt;5.3.0&lt;/neo4j-java-driver.version&gt;\r\n&lt;/properties&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.neo4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;neo4j&lt;/artifactId&gt;\r\n      &lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.neo4j.test&lt;/groupId&gt;\r\n      &lt;artifactId&gt;neo4j-harness&lt;/artifactId&gt;\r\n      &lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.neo4j.driver&lt;/groupId&gt;\r\n      &lt;artifactId&gt;neo4j-java-driver&lt;/artifactId&gt;\r\n      &lt;version&gt;${neo4j-java-driver.version}&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.neo4j.procedure/apoc --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\r\n      &lt;artifactId&gt;apoc&lt;/artifactId&gt;\r\n      &lt;version&gt;4.4.0.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n...\r\n```\r\n\r\nI&#39;ve set up the embeddedDatabaseServer like this\r\n\r\n```\r\n@BeforeEach\r\nvoid initializeNeo4j() throws IOException {\r\n    \r\n    var sw = new StringWriter();\r\n    try (var in = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(&quot;/getNode/tvlike_test_data.cypher&quot;)))) {\r\n        in.transferTo(sw);\r\n        sw.close();\r\n    }\r\n    //split into each statement so can be run one by one\r\n    List&lt;String&gt; statements = Arrays.asList(sw.toString().split(&quot;;\\r\\n&quot;));\r\n\r\n    var builder = Neo4jBuilders.newInProcessBuilder()\r\n            .withDisabledServer()\r\n            .withProcedure(GetNode.class);\r\n\r\n    for (String statement : statements) {\r\n        builder.withFixture(statement);\r\n    }\r\n    \r\n    this.embeddedDatabaseServer = builder.build();\r\n}\r\n```\r\nand the tests run successfully e.g.\r\n\r\n```\r\n@Test\r\nvoid TryIt() {\r\n            try (\r\n                    var driver = GraphDatabase.driver(embeddedDatabaseServer.boltURI());\r\n                    var session = driver.session()\r\n    \r\n            ) {\r\n    \r\n                var results = session.run(&quot;&quot;&quot;\r\n                                match(u:User{userId:&#39;u1&#39;})\r\n                                where u.isEnabled = true\r\n                                match(n:Trial{id: &#39;tr1&#39;})\r\n                                call cctc.getNode(n, u, { includeFoundPermissions : true }) \r\n                                    yield allNodePerms, allPropPerms\r\n                                return allNodePerms, allPropPerms&quot;&quot;&quot;)\r\n                        .single();\r\n                var resMap = results.asMap();\r\n    \r\n                //\r\n                var allNodePerms = (List&lt;Map&lt;String, Object&gt;&gt;) resMap.get(&quot;allNodePerms&quot;);\r\n                assertThat(allNodePerms.size()).isEqualTo(1);\r\n            }\r\n        }\r\n```\r\n\r\nI&#39;d like to include apoc procs and functions in my testing, but I can&#39;t add the necessary infrastructure successfully. For example, running this\r\n\r\n```\r\n@Test\r\nvoid TryIt2() {\r\n    try (\r\n            var driver = GraphDatabase.driver(embeddedDatabaseServer.boltURI());\r\n            var session = driver.session()\r\n\r\n    ) {\r\n\r\n        var results = session.run(&quot;&quot;&quot;\r\n                        return apoc.text.code(103) AS output&quot;&quot;&quot;)\r\n                .single();\r\n\r\n        assertThat(results.get(&quot;output&quot;)).isEqualTo(&quot;g&quot;);\r\n    }}\r\n```\r\n\r\ngives the error \r\n\r\n&gt; org.neo4j.driver.exceptions.ClientException: Unknown function\r\n&gt; &#39;apoc.text.code&#39; (line 1, column 8 (offset: 7)) &quot;return\r\n&gt; apoc.text.code(102) AS output&quot;\r\n\r\nas you&#39;d expect.\r\n\r\nThe question is how do I add the apoc library into the embedded server in the set up step? I&#39;ve tried many examples found in various samples but without success.\r\n\r\nThe pom file already includes the dependency for the apoc procedures. I&#39;ve tried amending the @BeforeEach method in various ways, \r\ne.g.\r\n\r\n - https://github.com/Lukasmp3/neo4j-apoc-testing/commit/6ff0b3e92c4ca1b04f190638a6dcf280270a5f50\r\n - https://github.com/michael-simons/neo4j-examples-and-tips/blob/master/examples/testing-ogm-against-embedded-with-apoc/src/test/java/org/neo4j/tips/testing/testing_ogm_against_embedded_with_apoc/ApplicationTests.java\r\n - https://github.com/neo4j-contrib/rabbithole/blob/3.0/src/main/java/org/neo4j/community/console/Neo4jService.java#L55\r\n\r\nbut without success.\r\n\r\nHow can I amend this\r\n```\r\n        var builder = Neo4jBuilders.newInProcessBuilder()\r\n                .withDisabledServer()\r\n                .withProcedure(GetNode.class);\r\n``` \r\nin my initializeNeo4j method to include apoc?\r\n","title":"neo4j procedure testing with apoc does not compile","body":"<p>I've a project where I can successfully test my user procedure written using the neo4j traversal framework based on example testing projects.</p>\n<p>The relevant part of the pom file is</p>\n<pre><code>...\n  &lt;neo4j.version&gt;5.12.0&lt;/neo4j.version&gt;\n  &lt;neo4j-java-driver.version&gt;5.3.0&lt;/neo4j-java-driver.version&gt;\n&lt;/properties&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.neo4j&lt;/groupId&gt;\n      &lt;artifactId&gt;neo4j&lt;/artifactId&gt;\n      &lt;version&gt;${neo4j.version}&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.neo4j.test&lt;/groupId&gt;\n      &lt;artifactId&gt;neo4j-harness&lt;/artifactId&gt;\n      &lt;version&gt;${neo4j.version}&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.neo4j.driver&lt;/groupId&gt;\n      &lt;artifactId&gt;neo4j-java-driver&lt;/artifactId&gt;\n      &lt;version&gt;${neo4j-java-driver.version}&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.neo4j.procedure/apoc --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\n      &lt;artifactId&gt;apoc&lt;/artifactId&gt;\n      &lt;version&gt;4.4.0.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n...\n</code></pre>\n<p>I've set up the embeddedDatabaseServer like this</p>\n<pre><code>@BeforeEach\nvoid initializeNeo4j() throws IOException {\n    \n    var sw = new StringWriter();\n    try (var in = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(&quot;/getNode/tvlike_test_data.cypher&quot;)))) {\n        in.transferTo(sw);\n        sw.close();\n    }\n    //split into each statement so can be run one by one\n    List&lt;String&gt; statements = Arrays.asList(sw.toString().split(&quot;;\\r\\n&quot;));\n\n    var builder = Neo4jBuilders.newInProcessBuilder()\n            .withDisabledServer()\n            .withProcedure(GetNode.class);\n\n    for (String statement : statements) {\n        builder.withFixture(statement);\n    }\n    \n    this.embeddedDatabaseServer = builder.build();\n}\n</code></pre>\n<p>and the tests run successfully e.g.</p>\n<pre><code>@Test\nvoid TryIt() {\n            try (\n                    var driver = GraphDatabase.driver(embeddedDatabaseServer.boltURI());\n                    var session = driver.session()\n    \n            ) {\n    \n                var results = session.run(&quot;&quot;&quot;\n                                match(u:User{userId:'u1'})\n                                where u.isEnabled = true\n                                match(n:Trial{id: 'tr1'})\n                                call cctc.getNode(n, u, { includeFoundPermissions : true }) \n                                    yield allNodePerms, allPropPerms\n                                return allNodePerms, allPropPerms&quot;&quot;&quot;)\n                        .single();\n                var resMap = results.asMap();\n    \n                //\n                var allNodePerms = (List&lt;Map&lt;String, Object&gt;&gt;) resMap.get(&quot;allNodePerms&quot;);\n                assertThat(allNodePerms.size()).isEqualTo(1);\n            }\n        }\n</code></pre>\n<p>I'd like to include apoc procs and functions in my testing, but I can't add the necessary infrastructure successfully. For example, running this</p>\n<pre><code>@Test\nvoid TryIt2() {\n    try (\n            var driver = GraphDatabase.driver(embeddedDatabaseServer.boltURI());\n            var session = driver.session()\n\n    ) {\n\n        var results = session.run(&quot;&quot;&quot;\n                        return apoc.text.code(103) AS output&quot;&quot;&quot;)\n                .single();\n\n        assertThat(results.get(&quot;output&quot;)).isEqualTo(&quot;g&quot;);\n    }}\n</code></pre>\n<p>gives the error</p>\n<blockquote>\n<p>org.neo4j.driver.exceptions.ClientException: Unknown function\n'apoc.text.code' (line 1, column 8 (offset: 7)) &quot;return\napoc.text.code(102) AS output&quot;</p>\n</blockquote>\n<p>as you'd expect.</p>\n<p>The question is how do I add the apoc library into the embedded server in the set up step? I've tried many examples found in various samples but without success.</p>\n<p>The pom file already includes the dependency for the apoc procedures. I've tried amending the @BeforeEach method in various ways,\ne.g.</p>\n<ul>\n<li><a href=\"https://github.com/Lukasmp3/neo4j-apoc-testing/commit/6ff0b3e92c4ca1b04f190638a6dcf280270a5f50\" rel=\"nofollow noreferrer\">https://github.com/Lukasmp3/neo4j-apoc-testing/commit/6ff0b3e92c4ca1b04f190638a6dcf280270a5f50</a></li>\n<li><a href=\"https://github.com/michael-simons/neo4j-examples-and-tips/blob/master/examples/testing-ogm-against-embedded-with-apoc/src/test/java/org/neo4j/tips/testing/testing_ogm_against_embedded_with_apoc/ApplicationTests.java\" rel=\"nofollow noreferrer\">https://github.com/michael-simons/neo4j-examples-and-tips/blob/master/examples/testing-ogm-against-embedded-with-apoc/src/test/java/org/neo4j/tips/testing/testing_ogm_against_embedded_with_apoc/ApplicationTests.java</a></li>\n<li><a href=\"https://github.com/neo4j-contrib/rabbithole/blob/3.0/src/main/java/org/neo4j/community/console/Neo4jService.java#L55\" rel=\"nofollow noreferrer\">https://github.com/neo4j-contrib/rabbithole/blob/3.0/src/main/java/org/neo4j/community/console/Neo4jService.java#L55</a></li>\n</ul>\n<p>but without success.</p>\n<p>How can I amend this</p>\n<pre><code>        var builder = Neo4jBuilders.newInProcessBuilder()\n                .withDisabledServer()\n                .withProcedure(GetNode.class);\n</code></pre>\n<p>in my initializeNeo4j method to include apoc?</p>\n"},{"tags":["java","file","jar","resources"],"answers":[{"comments":[{"owner":{"account_id":1822522,"reputation":334,"user_id":1656222,"accept_rate":80,"display_name":"Jh62"},"score":0,"creation_date":1376551951,"post_id":18247809,"comment_id":26757256,"body_markdown":"Thanks for the answer and the last remark. Ironically, I&#39;ve arrived to the same solution before coming back here to read the answers. I guess is the best way, then. Also another way would be to create a temporary folder with all the resources that you need to read at run time in a temporary folder.","body":"Thanks for the answer and the last remark. Ironically, I&#39;ve arrived to the same solution before coming back here to read the answers. I guess is the best way, then. Also another way would be to create a temporary folder with all the resources that you need to read at run time in a temporary folder."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1376552153,"post_id":18247809,"comment_id":26757334,"body_markdown":"I would say having the resources as external resources is probably the easier solution.  Using the &quot;file list&quot; solution could allow you to actually deploy multiple resources lists (with the same) across multiple Jars.  You&#39;d have to merge these, but it would mean you could gain access to resources across multiple Jars without knowing where they are actually stored","body":"I would say having the resources as external resources is probably the easier solution.  Using the &quot;file list&quot; solution could allow you to actually deploy multiple resources lists (with the same) across multiple Jars.  You&#39;d have to merge these, but it would mean you could gain access to resources across multiple Jars without knowing where they are actually stored"},{"owner":{"account_id":327113,"reputation":2593,"user_id":649283,"accept_rate":67,"display_name":"supertonsky"},"score":0,"creation_date":1496980220,"post_id":18247809,"comment_id":75895130,"body_markdown":"@MadProgrammer, could you please provide a the link that demonstrates this to list all the files during the build process?","body":"@MadProgrammer, could you please provide a the link that demonstrates this to list all the files during the build process?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1496981026,"post_id":18247809,"comment_id":75895326,"body_markdown":"@supertonsky That would depend on what build process you&#39;re using. Ant can do it, Maven should be able to it, otherwise you&#39;ll need to do it by hand","body":"@supertonsky That would depend on what build process you&#39;re using. Ant can do it, Maven should be able to it, otherwise you&#39;ll need to do it by hand"},{"owner":{"account_id":327113,"reputation":2593,"user_id":649283,"accept_rate":67,"display_name":"supertonsky"},"score":0,"creation_date":1496982298,"post_id":18247809,"comment_id":75895602,"body_markdown":"@MadProgrammer, maven should be just fine :)","body":"@MadProgrammer, maven should be just fine :)"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1496982387,"post_id":18247809,"comment_id":75895627,"body_markdown":"@supertonsky You&#39;ll probably need to write a new plugin ;) - Basically, between the build and package phases, you need to generate another file, which is a list of the resources you want - so my 10 seconds of investigation [turned this up](https://stackoverflow.com/questions/2063378/how-can-i-get-the-list-of-artifacts-from-my-maven-repository) which lists a couple of ways you might be able to do it","body":"@supertonsky You&#39;ll probably need to write a new plugin ;) - Basically, between the build and package phases, you need to generate another file, which is a list of the resources you want - so my 10 seconds of investigation <a href=\"https://stackoverflow.com/questions/2063378/how-can-i-get-the-list-of-artifacts-from-my-maven-repository\">turned this up</a> which lists a couple of ways you might be able to do it"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":6,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1696625715,"creation_date":1376550307,"answer_id":18247809,"question_id":18247669,"body_markdown":"There&#39;s no way to simply get a filtered list of internal resources without first enumerating over the contents of the Jar file.\r\n\r\nLuckily, that&#39;s actually not that hard (and luckily for me you&#39;ve done most of the hardwork).\r\n\r\nBasically, once you have a reference to the `JarFile`, you simple need to ask for its&#39; `entries` and iterate over that list.\r\n\r\nBy checking the `JarEntry` name for the required match (ie `resources`), you can filter the elements you want...\r\n\r\nFor example...\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.util.Enumeration;\r\n    import java.util.jar.JarEntry;\r\n    import java.util.jar.JarFile;\r\n\r\n    public class ReadMyResources {\r\n\r\n        public static void main(String[] args) {\r\n            new ReadMyResources();\r\n        }\r\n\r\n        public ReadMyResources() {\r\n            JarFile jf = null;\r\n            try {            \r\n                String s = new File(this.getClass().getResource(&quot;&quot;).getPath()).getParent().replaceAll(&quot;(!|file:\\\\\\\\)&quot;, &quot;&quot;);\r\n                jf = new JarFile(s);\r\n                \r\n                Enumeration&lt;JarEntry&gt; entries = jf.entries();\r\n                while (entries.hasMoreElements()) {\r\n                    JarEntry je = entries.nextElement();\r\n                    if (je.getName().startsWith(&quot;resources&quot;)) {\r\n                        System.out.println(je.getName());\r\n                    }\r\n                }\r\n            } catch (IOException ex) {\r\n                ex.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    jf.close();\r\n                } catch (Exception e) {\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n**Caveat**\r\n\r\nThis type of question actually gets asked a bit.  Rather then trying to read the contents of the Jar at runtime, it would be better to produce some kind of text file which contained a list of the available resources.\r\n\r\nThis could be produced by your build process dynamically before the Jar file is created.  It would be a much simpler solution to then read this file in (via `getClass().getResource()`, for example) and then look up each resource list in the text file...IMHO","title":"Read directory inside JAR with InputStreamReader","body":"<p>There's no way to simply get a filtered list of internal resources without first enumerating over the contents of the Jar file.</p>\n<p>Luckily, that's actually not that hard (and luckily for me you've done most of the hardwork).</p>\n<p>Basically, once you have a reference to the <code>JarFile</code>, you simple need to ask for its' <code>entries</code> and iterate over that list.</p>\n<p>By checking the <code>JarEntry</code> name for the required match (ie <code>resources</code>), you can filter the elements you want...</p>\n<p>For example...</p>\n<pre><code>import java.io.File;\nimport java.io.IOException;\nimport java.util.Enumeration;\nimport java.util.jar.JarEntry;\nimport java.util.jar.JarFile;\n\npublic class ReadMyResources {\n\n    public static void main(String[] args) {\n        new ReadMyResources();\n    }\n\n    public ReadMyResources() {\n        JarFile jf = null;\n        try {            \n            String s = new File(this.getClass().getResource(&quot;&quot;).getPath()).getParent().replaceAll(&quot;(!|file:\\\\\\\\)&quot;, &quot;&quot;);\n            jf = new JarFile(s);\n            \n            Enumeration&lt;JarEntry&gt; entries = jf.entries();\n            while (entries.hasMoreElements()) {\n                JarEntry je = entries.nextElement();\n                if (je.getName().startsWith(&quot;resources&quot;)) {\n                    System.out.println(je.getName());\n                }\n            }\n        } catch (IOException ex) {\n            ex.printStackTrace();\n        } finally {\n            try {\n                jf.close();\n            } catch (Exception e) {\n            }\n        }\n    }\n\n}\n</code></pre>\n<p><strong>Caveat</strong></p>\n<p>This type of question actually gets asked a bit.  Rather then trying to read the contents of the Jar at runtime, it would be better to produce some kind of text file which contained a list of the available resources.</p>\n<p>This could be produced by your build process dynamically before the Jar file is created.  It would be a much simpler solution to then read this file in (via <code>getClass().getResource()</code>, for example) and then look up each resource list in the text file...IMHO</p>\n"},{"comments":[{"owner":{"account_id":3563578,"reputation":587,"user_id":2975780,"display_name":"jhas"},"score":2,"creation_date":1537216656,"post_id":50358271,"comment_id":91695488,"body_markdown":"So simple and works like a charm! Thanks! This should be the correct answer in my opinion. You don&#39;t have to be a Spring user to use this, just take the Spring jar...","body":"So simple and works like a charm! Thanks! This should be the correct answer in my opinion. You don&#39;t have to be a Spring user to use this, just take the Spring jar..."}],"tags":[],"owner":{"account_id":4385157,"reputation":849,"user_id":3575560,"display_name":"solimant"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1526414200,"creation_date":1526414200,"answer_id":50358271,"question_id":18247669,"body_markdown":"For **Spring Framework** users, have a look at [`PathMatchingResourcePatternResolver`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html) to do something like the following:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\r\n    Resource[] resources = resolver.getResources(&quot;classpath:path/to/resource/*.*&quot;);\r\n    \r\n    for (Resource resource : resources) {\r\n        InputStream inStream = resource.getInputStream();\r\n        // Do something with the input stream\r\n    }","title":"Read directory inside JAR with InputStreamReader","body":"<p>For <strong>Spring Framework</strong> users, have a look at <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html\" rel=\"noreferrer\"><code>PathMatchingResourcePatternResolver</code></a> to do something like the following:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\nResource[] resources = resolver.getResources(\"classpath:path/to/resource/*.*\");\n\nfor (Resource resource : resources) {\n    InputStream inStream = resource.getInputStream();\n    // Do something with the input stream\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11410365,"reputation":1115,"user_id":8364683,"display_name":"Алексей Виноградов"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631773080,"creation_date":1631773080,"answer_id":69203235,"question_id":18247669,"body_markdown":"My case was to read a directory inside resources:\r\n\r\n[![resources structure][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5oTP6.png\r\nAs my requirement was to transform resource directory to io.File, finally it looked like this:\r\n\r\n    public static File getResourceDirectory(String resource) {\r\n            ClassLoader classLoader = Thread.currentThread().getContextClassLoader();\r\n            URL res = classLoader.getResource(resource);\r\n            File fileDirectory;\r\n            if (&quot;jar&quot;.equals(res.getProtocol())) {\r\n                InputStream input = classLoader.getResourceAsStream(resource);\r\n                fileDirectory = Files.createTempDir();\r\n                List&lt;String&gt; fileNames = IOUtils.readLines(input, StandardCharsets.UTF_8);\r\n                fileNames.forEach(name -&gt; {\r\n                    String fileResourceName = resource + File.separator + name;\r\n                    File tempFile = new File(fileDirectory.getPath() + File.pathSeparator + name);\r\n                    InputStream fileInput = classLoader.getResourceAsStream(resourceFileName);\r\n                    FileUtils.copyInputStreamToFile(fileInput, tempFile);\r\n                });\r\n                fileDirectory.deleteOnExit();\r\n            } else {\r\n                fileDirectory = new File(res.getFile());\r\n            }\r\n    \r\n            return fileDirectory;\r\n        }\r\n\r\nIf resources are in jar, we copy it to temp directory that will be deleted on application end.\r\nThen calling `getResourceDirectory(&quot;migrations&quot;)` returned me `io.File` directory for further use.","title":"Read directory inside JAR with InputStreamReader","body":"<p>My case was to read a directory inside resources:</p>\n<p><a href=\"https://i.stack.imgur.com/5oTP6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5oTP6.png\" alt=\"resources structure\" /></a></p>\n<p>As my requirement was to transform resource directory to io.File, finally it looked like this:</p>\n<pre><code>public static File getResourceDirectory(String resource) {\n        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();\n        URL res = classLoader.getResource(resource);\n        File fileDirectory;\n        if (&quot;jar&quot;.equals(res.getProtocol())) {\n            InputStream input = classLoader.getResourceAsStream(resource);\n            fileDirectory = Files.createTempDir();\n            List&lt;String&gt; fileNames = IOUtils.readLines(input, StandardCharsets.UTF_8);\n            fileNames.forEach(name -&gt; {\n                String fileResourceName = resource + File.separator + name;\n                File tempFile = new File(fileDirectory.getPath() + File.pathSeparator + name);\n                InputStream fileInput = classLoader.getResourceAsStream(resourceFileName);\n                FileUtils.copyInputStreamToFile(fileInput, tempFile);\n            });\n            fileDirectory.deleteOnExit();\n        } else {\n            fileDirectory = new File(res.getFile());\n        }\n\n        return fileDirectory;\n    }\n</code></pre>\n<p>If resources are in jar, we copy it to temp directory that will be deleted on application end.\nThen calling <code>getResourceDirectory(&quot;migrations&quot;)</code> returned me <code>io.File</code> directory for further use.</p>\n"}],"owner":{"account_id":1822522,"reputation":334,"user_id":1656222,"accept_rate":80,"display_name":"Jh62"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13055,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":18247809,"answer_count":3,"score":9,"last_activity_date":1696625715,"creation_date":1376549500,"question_id":18247669,"body_markdown":"So, this question has been asked a million times i believed and I&#39;ve been reading them for a couple of hours and trying several options given by some people but none of them work for me.\r\n\r\nI want to list all the files inside a directory inside the application&#39;s JAR, so in IDE this works:\r\n\r\n    File f = new File(this.getClass().getResource(&quot;/resources/&quot;).getPath());\r\n    \r\n    for(String s : f.list){\r\n       System.out.println(s);\r\n    }\r\n\r\nThat gives me all the files inside the directory.\r\n\r\nNow, i&#39;ve tried this also:\r\n\r\n    InputStream in = this.getClass().getClassLoader().getResourceAsStream(&quot;resources/&quot;);\r\n        InputStreamReader inReader = new InputStreamReader(in);\r\n        Scanner scan = new Scanner(inReader);\r\n\r\n        while (scan.hasNext()) {\r\n            String s = scan.next();\r\n            System.out.println(&quot;read: &quot; + s);\r\n        }\r\n\r\n        System.out.println(&quot;END OF LINE&quot;);\r\n\r\nAnd from IDE it prints ALL the files in the directory. Outside IDE prints: &quot;END OF LINE&quot;.\r\n\r\nNow, I can find an entry inside a Jar with this too:\r\n\r\n            String s = new File(this.getClass().getResource(&quot;&quot;).getPath()).getParent().replaceAll(&quot;(!|file:\\\\\\\\)&quot;, &quot;&quot;);\r\n            JarFile jar = new JarFile(s);\r\n            \r\n                JarEntry entry = jar.getJarEntry(&quot;resources&quot;);\r\n                \r\n            if (entry != null){\r\n                System.out.println(&quot;EXISTS&quot;);\r\n                System.out.println(entry.getSize());\r\n            }\r\n\r\nThat&#39;s some horrible coding i had to do to that String. \r\n\r\nAnyway... I can&#39;t get the list of resources inside the &quot;resources&quot; directory within the Jar... How can I do this???","title":"Read directory inside JAR with InputStreamReader","body":"<p>So, this question has been asked a million times i believed and I've been reading them for a couple of hours and trying several options given by some people but none of them work for me.</p>\n\n<p>I want to list all the files inside a directory inside the application's JAR, so in IDE this works:</p>\n\n<pre><code>File f = new File(this.getClass().getResource(\"/resources/\").getPath());\n\nfor(String s : f.list){\n   System.out.println(s);\n}\n</code></pre>\n\n<p>That gives me all the files inside the directory.</p>\n\n<p>Now, i've tried this also:</p>\n\n<pre><code>InputStream in = this.getClass().getClassLoader().getResourceAsStream(\"resources/\");\n    InputStreamReader inReader = new InputStreamReader(in);\n    Scanner scan = new Scanner(inReader);\n\n    while (scan.hasNext()) {\n        String s = scan.next();\n        System.out.println(\"read: \" + s);\n    }\n\n    System.out.println(\"END OF LINE\");\n</code></pre>\n\n<p>And from IDE it prints ALL the files in the directory. Outside IDE prints: \"END OF LINE\".</p>\n\n<p>Now, I can find an entry inside a Jar with this too:</p>\n\n<pre><code>        String s = new File(this.getClass().getResource(\"\").getPath()).getParent().replaceAll(\"(!|file:\\\\\\\\)\", \"\");\n        JarFile jar = new JarFile(s);\n\n            JarEntry entry = jar.getJarEntry(\"resources\");\n\n        if (entry != null){\n            System.out.println(\"EXISTS\");\n            System.out.println(entry.getSize());\n        }\n</code></pre>\n\n<p>That's some horrible coding i had to do to that String. </p>\n\n<p>Anyway... I can't get the list of resources inside the \"resources\" directory within the Jar... How can I do this???</p>\n"},{"tags":["javascript","java","jquery","reactjs","node.js"],"owner":{"account_id":24400331,"reputation":1,"user_id":18329172,"display_name":"Chib"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696625490,"creation_date":1696625490,"question_id":77247312,"body_markdown":"I linked a paystack account using hyperlink in a javafx form. It took me to the paystack site where I paid for the services rendered. My problem is how to verify the paystack payment through another javafx login form such that when the user logs in, it confirms that the payment has been made, the amount, email and phone no. then signs the user in to another javafx form. In case you need to take a look at the paystack\r\n\r\nI expected it to run this program after the login button is clicked and then be able to transfer me from the login page to the next javafx form after confirming that the payment was made in paystack. Note: Paystack is a payment gateway. In case you need access to the paystack, it is https://dashboard.paystack.com/#/login?next=app.settings.developers\r\n\r\n```\r\npublic PaystackVerifyTransactionResponse verifyTransaction(String reference) throws Exception {\r\n    PaystackVerifyTransactionResponse paystackresponse = null;\r\n        try {\r\n            HttpClient client = HttpClientBuilder.create().build();\r\n            HttpGet request = new HttpGet(&quot;https://api.paystack.co/transaction/verify/&quot;+ reference)\r\n            request.addHeader(&quot;Content-type&quot;, &quot;application/json&quot;);\r\n            request.addHeader(&quot;Authorization&quot;, &quot;Bearer&quot; + &quot;sk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;);//\r\n            request.addHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;);\r\n            //StringBuffer result = new StringBuffer();//used below stringbuilder\r\n            StringBuilder result = new StringBuilder();\r\n            org.apache.http.HttpResponse response = client.execute(request);//used this HttpResponse response = (HttpResponse) client.execute(request);\r\n            //HttpResponse response = (HttpResponse) client.execute(request);\r\n            //HttpEntity entity = response.getEntity();\r\n            try{\r\n            if (response.getStatusLine().getStatusCode() == OK) {\r\n                BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\r\n\r\n                String line = null;\r\n                while ((line = rd.readLine()) != null) {\r\n                    result.append(line);\r\n                }\r\n            }\r\n            \r\n            \r\n           // else {\r\n             //  throw new RuntimeException();// throw new Exception(&quot;Error Occured while connecting to paystack url&quot;);\r\n               //     }\r\n            }catch(Exception especial)\r\n                {\r\n                    throw new RuntimeException(especial);\r\n                }\r\n            \r\n            //ObjectMapper mapper = null;\r\n            \r\n            ObjectMapper mapper = new ObjectMapper();\r\n                    \r\n               paystackresponse = mapper.readValue(result.toString(), PaystackVerifyTransactionResponse.class);//result.append(reference).toString()\r\n\r\n           \r\n            if (paystackresponse == null) {\r\n                \r\n                throw new Exception(&quot;An error occurred while verifying payment&quot;);\r\n            } \r\n            else if (paystackresponse.verifyTransaction(reference).equals(&quot;false&quot;)) {\r\n                throw new Exception(&quot;You may not seem to have paid&quot;);\r\n            }\r\n            else if (paystackresponse.verifyTransaction(reference).equals(&quot;success&quot;)) {\r\n               //PAYMENT IS SUCCESSFUL, APPLY VALUE TO THE TRANSACTION\r\n               mainapp.changeScene(&quot;classVideo.fxml&quot;);\r\n               \r\n               \r\n            }\r\n}\r\n        catch (Exception e)\r\n        {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        return paystackresponse;\r\n    }\r\n\r\n}\r\n```","title":"How to verify a transaction that was made using Paystack link through an app in java","body":"<p>I linked a paystack account using hyperlink in a javafx form. It took me to the paystack site where I paid for the services rendered. My problem is how to verify the paystack payment through another javafx login form such that when the user logs in, it confirms that the payment has been made, the amount, email and phone no. then signs the user in to another javafx form. In case you need to take a look at the paystack</p>\n<p>I expected it to run this program after the login button is clicked and then be able to transfer me from the login page to the next javafx form after confirming that the payment was made in paystack. Note: Paystack is a payment gateway. In case you need access to the paystack, it is <a href=\"https://dashboard.paystack.com/#/login?next=app.settings.developers\" rel=\"nofollow noreferrer\">https://dashboard.paystack.com/#/login?next=app.settings.developers</a></p>\n<pre><code>public PaystackVerifyTransactionResponse verifyTransaction(String reference) throws Exception {\n    PaystackVerifyTransactionResponse paystackresponse = null;\n        try {\n            HttpClient client = HttpClientBuilder.create().build();\n            HttpGet request = new HttpGet(&quot;https://api.paystack.co/transaction/verify/&quot;+ reference)\n            request.addHeader(&quot;Content-type&quot;, &quot;application/json&quot;);\n            request.addHeader(&quot;Authorization&quot;, &quot;Bearer&quot; + &quot;sk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;);//\n            request.addHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;);\n            //StringBuffer result = new StringBuffer();//used below stringbuilder\n            StringBuilder result = new StringBuilder();\n            org.apache.http.HttpResponse response = client.execute(request);//used this HttpResponse response = (HttpResponse) client.execute(request);\n            //HttpResponse response = (HttpResponse) client.execute(request);\n            //HttpEntity entity = response.getEntity();\n            try{\n            if (response.getStatusLine().getStatusCode() == OK) {\n                BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\n\n                String line = null;\n                while ((line = rd.readLine()) != null) {\n                    result.append(line);\n                }\n            }\n            \n            \n           // else {\n             //  throw new RuntimeException();// throw new Exception(&quot;Error Occured while connecting to paystack url&quot;);\n               //     }\n            }catch(Exception especial)\n                {\n                    throw new RuntimeException(especial);\n                }\n            \n            //ObjectMapper mapper = null;\n            \n            ObjectMapper mapper = new ObjectMapper();\n                    \n               paystackresponse = mapper.readValue(result.toString(), PaystackVerifyTransactionResponse.class);//result.append(reference).toString()\n\n           \n            if (paystackresponse == null) {\n                \n                throw new Exception(&quot;An error occurred while verifying payment&quot;);\n            } \n            else if (paystackresponse.verifyTransaction(reference).equals(&quot;false&quot;)) {\n                throw new Exception(&quot;You may not seem to have paid&quot;);\n            }\n            else if (paystackresponse.verifyTransaction(reference).equals(&quot;success&quot;)) {\n               //PAYMENT IS SUCCESSFUL, APPLY VALUE TO THE TRANSACTION\n               mainapp.changeScene(&quot;classVideo.fxml&quot;);\n               \n               \n            }\n}\n        catch (Exception e)\n        {\n            throw new RuntimeException(e);\n        }\n\n        return paystackresponse;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","svg","batik"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1352937557,"post_id":13388706,"comment_id":18288347,"body_markdown":"Converting an SVG image to a `java.awt.Image` converts the SVG to a pixel representation of the SVG, it does not preserver the vector information.  I don&#39;t know if it will help, but you might like to take a look at [this](http://itextpdf.com/examples/iia.php?id=263) which was the first hit I got of Google for &quot;iText SVG&quot;","body":"Converting an SVG image to a <code>java.awt.Image</code> converts the SVG to a pixel representation of the SVG, it does not preserver the vector information.  I don&#39;t know if it will help, but you might like to take a look at <a href=\"http://itextpdf.com/examples/iia.php?id=263\" rel=\"nofollow noreferrer\">this</a> which was the first hit I got of Google for &quot;iText SVG&quot;"},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":0,"creation_date":1352941126,"post_id":13388706,"comment_id":18289220,"body_markdown":"Hmm... Converting to a java.awt.BufferedImage at least throws away the vector information, but I was under the impression that because java.awt.Image is abstract, drawing one shouldn&#39;t have to be resolution dependent.","body":"Hmm... Converting to a java.awt.BufferedImage at least throws away the vector information, but I was under the impression that because java.awt.Image is abstract, drawing one shouldn&#39;t have to be resolution dependent."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1352941213,"post_id":13388706,"comment_id":18289235,"body_markdown":"`Image` is still backed by pixel data (in most cases), especially when it&#39;s rendered to a graphics context","body":"<code>Image</code> is still backed by pixel data (in most cases), especially when it&#39;s rendered to a graphics context"},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":0,"creation_date":1352941834,"post_id":13388706,"comment_id":18289352,"body_markdown":"Yeah, since it was &quot;in most cases&quot;, I assumed that one of the remaining cases would allow me to back it with an SVG. :) As for that example, PdfGraphics2D&#39;s constructor is private. I guess it&#39;s for a different version of iText, but I thought we were up to date.","body":"Yeah, since it was &quot;in most cases&quot;, I assumed that one of the remaining cases would allow me to back it with an SVG. :) As for that example, PdfGraphics2D&#39;s constructor is private. I guess it&#39;s for a different version of iText, but I thought we were up to date."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1352942412,"post_id":13388706,"comment_id":18289494,"body_markdown":"To get `Image` to work in iText, iText would need to provide the implementation, as iText would only know how to paint it within it&#39;s given context.","body":"To get <code>Image</code> to work in iText, iText would need to provide the implementation, as iText would only know how to paint it within it&#39;s given context."}],"answers":[{"tags":[],"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1352952482,"creation_date":1352952482,"answer_id":13391425,"question_id":13388706,"body_markdown":"Well, here&#39;s what I ended up doing. `java.awt.Image` was certainly a dead-end. There was a solution in the form of wrapping up a `PdfTemplate` in an `ImgTemplate` so that it could be used as an iText `Image`.\r\n\r\n(I had to have it in something which knew its size, because it&#39;s being used in a table and the layout would go completely crazy otherwise. An `Image` seems to know this.)\r\n\r\n    public class SvgHelper {\r\n        private final SAXSVGDocumentFactory factory;\r\n        private final GVTBuilder builder;\r\n        private final BridgeContext bridgeContext;\r\n\r\n        public SvgHelper() {\r\n            factory = new SAXSVGDocumentFactory(\r\n                XMLResourceDescriptor.getXMLParserClassName());\r\n            UserAgent userAgent = new UserAgentAdapter();\r\n            DocumentLoader loader = new DocumentLoader(userAgent);\r\n            bridgeContext = new BridgeContext(userAgent, loader);\r\n            bridgeContext.setDynamicState(BridgeContext.STATIC);\r\n            builder = new GVTBuilder();\r\n        }\r\n\r\n        public Image createSvgImage(PdfContentByte contentByte, URL resource,\r\n                                    float maxPointWidth, float maxPointHeight) {\r\n            Image image = drawUnscaledSvg(contentByte, resource);\r\n            image.scaleToFit(maxPointWidth, maxPointHeight);\r\n            return image;\r\n        }\r\n\r\n        public Image drawUnscaledSvg(PdfContentByte contentByte, URL resource) {\r\n            GraphicsNode imageGraphics;\r\n            try {\r\n                SVGDocument imageDocument = factory.createSVGDocument(resource.toString());\r\n                imageGraphics = builder.build(bridgeContext, imageDocument);\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(&quot;Couldn&#39;t load SVG resource&quot;, e);\r\n            }\r\n\r\n            float width = (float) imageGraphics.getBounds().getWidth();\r\n            float height = (float) imageGraphics.getBounds().getHeight();\r\n\r\n            PdfTemplate template = contentByte.createTemplate(width, height);\r\n            Graphics2D graphics = template.createGraphics(width, height);\r\n            try {\r\n                // SVGs can have their corner at coordinates other than (0,0).\r\n                Rectangle2D bounds = imageGraphics.getBounds();\r\n\r\n                //TODO: Is this in the right coordinate space even?\r\n                graphics.translate(-bounds.getX(), -bounds.getY());\r\n\r\n                imageGraphics.paint(graphics);\r\n\r\n                return new ImgTemplate(template);\r\n            } catch (BadElementException e) {\r\n                throw new RuntimeException(&quot;Couldn&#39;t generate PDF from SVG&quot;, e);\r\n            } finally {\r\n                graphics.dispose();\r\n            }\r\n        }\r\n    }\r\n","title":"Create a non-buffered java.awt.Image from an SVG file","body":"<p>Well, here's what I ended up doing. <code>java.awt.Image</code> was certainly a dead-end. There was a solution in the form of wrapping up a <code>PdfTemplate</code> in an <code>ImgTemplate</code> so that it could be used as an iText <code>Image</code>.</p>\n\n<p>(I had to have it in something which knew its size, because it's being used in a table and the layout would go completely crazy otherwise. An <code>Image</code> seems to know this.)</p>\n\n<pre><code>public class SvgHelper {\n    private final SAXSVGDocumentFactory factory;\n    private final GVTBuilder builder;\n    private final BridgeContext bridgeContext;\n\n    public SvgHelper() {\n        factory = new SAXSVGDocumentFactory(\n            XMLResourceDescriptor.getXMLParserClassName());\n        UserAgent userAgent = new UserAgentAdapter();\n        DocumentLoader loader = new DocumentLoader(userAgent);\n        bridgeContext = new BridgeContext(userAgent, loader);\n        bridgeContext.setDynamicState(BridgeContext.STATIC);\n        builder = new GVTBuilder();\n    }\n\n    public Image createSvgImage(PdfContentByte contentByte, URL resource,\n                                float maxPointWidth, float maxPointHeight) {\n        Image image = drawUnscaledSvg(contentByte, resource);\n        image.scaleToFit(maxPointWidth, maxPointHeight);\n        return image;\n    }\n\n    public Image drawUnscaledSvg(PdfContentByte contentByte, URL resource) {\n        GraphicsNode imageGraphics;\n        try {\n            SVGDocument imageDocument = factory.createSVGDocument(resource.toString());\n            imageGraphics = builder.build(bridgeContext, imageDocument);\n        } catch (IOException e) {\n            throw new RuntimeException(\"Couldn't load SVG resource\", e);\n        }\n\n        float width = (float) imageGraphics.getBounds().getWidth();\n        float height = (float) imageGraphics.getBounds().getHeight();\n\n        PdfTemplate template = contentByte.createTemplate(width, height);\n        Graphics2D graphics = template.createGraphics(width, height);\n        try {\n            // SVGs can have their corner at coordinates other than (0,0).\n            Rectangle2D bounds = imageGraphics.getBounds();\n\n            //TODO: Is this in the right coordinate space even?\n            graphics.translate(-bounds.getX(), -bounds.getY());\n\n            imageGraphics.paint(graphics);\n\n            return new ImgTemplate(template);\n        } catch (BadElementException e) {\n            throw new RuntimeException(\"Couldn't generate PDF from SVG\", e);\n        } finally {\n            graphics.dispose();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19623191,"reputation":1,"user_id":14363220,"display_name":"Bob Goldberg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696624703,"creation_date":1696624703,"answer_id":77247259,"question_id":13388706,"body_markdown":"I just wanted to set the dock icon using an SVG image, so I needed an ImageIcon.  After a week of trying, I came up with this solution to obtain an ImageIcon from any of the formats supported by Java.  It converts the SVG to a PNG if necessary.  The strRes is a resource string.\r\n\r\n    protected static ImageIcon loadIcon(String strRes) {\r\n        if (strRes == null || strRes.isEmpty()) {\r\n          return null;\r\n        }\r\n        // For new ImageIcon(resource, strRes), strRes must NOT begin with &quot;/&quot;:\r\n        //   get Exception from PluginClassLoader says &quot;leading &#39;/&#39; doesn&#39;t work; strip&quot;\r\n        if (strRes.startsWith(&quot;/&quot;)) {\r\n          strRes = strRes.substring(1);\r\n        }\r\n        ImageIcon icon = null;\r\n        if (!strRes.contains(&quot; | &quot;)) {\r\n          URL resource = StudioIcons.class.getClassLoader().getResource(strRes);\r\n          if (resource != null) {\r\n            if (strRes.endsWith(&quot;.svg&quot;)) {\r\n              // To load an ImageIcon from an SVG is &quot;af kapores&quot; (you need to throw a chicken over your head 3 times)\r\n              // This solution converts the image to a PNG and writes it out, then reads it in.\r\n              try {\r\n                Image image = SVGLoader.load(resource, 1f);\r\n                String filename = new File(resource.getPath()).getName() + &quot;.png&quot;;\r\n                ImageIO.write((BufferedImage)image, &quot;png&quot;, new File(filename));\r\n                icon = new ImageIcon(new File(filename).toURI().getPath(), &quot;Converted from SVG&quot;);\r\n              }\r\n              catch (IOException ex) {\r\n                throw new RuntimeException(&quot;Cannot convert SVG to PNG: &quot;, ex);\r\n              }\r\n            } else {\r\n              try {\r\n                icon = new ImageIcon(resource, strRes);\r\n              } catch (Exception ignore) {\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return icon;\r\n    }\r\n\r\n**To set the dock icon, I use:**\r\n\r\n      if (Taskbar.isTaskbarSupported() ) {\r\n        final Taskbar taskbar = Taskbar.getTaskbar();\r\n        try {\r\n          //set icon for MacOS (and other systems which support this method)\r\n          taskbar.setIconImage(icon); // Was Java Duke\r\n        } catch (final UnsupportedOperationException e) {\r\n          System.out.println(&quot;The OS does not support: &#39;taskbar.setIconImage()&#39;&quot;);\r\n        } catch (final SecurityException e) {\r\n          System.out.println(&quot;There was a security exception for: &#39;taskbar.setIconImage()&#39;&quot;);\r\n        }\r\n      }","title":"Create a non-buffered java.awt.Image from an SVG file","body":"<p>I just wanted to set the dock icon using an SVG image, so I needed an ImageIcon.  After a week of trying, I came up with this solution to obtain an ImageIcon from any of the formats supported by Java.  It converts the SVG to a PNG if necessary.  The strRes is a resource string.</p>\n<pre><code>protected static ImageIcon loadIcon(String strRes) {\n    if (strRes == null || strRes.isEmpty()) {\n      return null;\n    }\n    // For new ImageIcon(resource, strRes), strRes must NOT begin with &quot;/&quot;:\n    //   get Exception from PluginClassLoader says &quot;leading '/' doesn't work; strip&quot;\n    if (strRes.startsWith(&quot;/&quot;)) {\n      strRes = strRes.substring(1);\n    }\n    ImageIcon icon = null;\n    if (!strRes.contains(&quot; | &quot;)) {\n      URL resource = StudioIcons.class.getClassLoader().getResource(strRes);\n      if (resource != null) {\n        if (strRes.endsWith(&quot;.svg&quot;)) {\n          // To load an ImageIcon from an SVG is &quot;af kapores&quot; (you need to throw a chicken over your head 3 times)\n          // This solution converts the image to a PNG and writes it out, then reads it in.\n          try {\n            Image image = SVGLoader.load(resource, 1f);\n            String filename = new File(resource.getPath()).getName() + &quot;.png&quot;;\n            ImageIO.write((BufferedImage)image, &quot;png&quot;, new File(filename));\n            icon = new ImageIcon(new File(filename).toURI().getPath(), &quot;Converted from SVG&quot;);\n          }\n          catch (IOException ex) {\n            throw new RuntimeException(&quot;Cannot convert SVG to PNG: &quot;, ex);\n          }\n        } else {\n          try {\n            icon = new ImageIcon(resource, strRes);\n          } catch (Exception ignore) {\n          }\n        }\n      }\n    }\n    return icon;\n}\n</code></pre>\n<p><strong>To set the dock icon, I use:</strong></p>\n<pre><code>  if (Taskbar.isTaskbarSupported() ) {\n    final Taskbar taskbar = Taskbar.getTaskbar();\n    try {\n      //set icon for MacOS (and other systems which support this method)\n      taskbar.setIconImage(icon); // Was Java Duke\n    } catch (final UnsupportedOperationException e) {\n      System.out.println(&quot;The OS does not support: 'taskbar.setIconImage()'&quot;);\n    } catch (final SecurityException e) {\n      System.out.println(&quot;There was a security exception for: 'taskbar.setIconImage()'&quot;);\n    }\n  }\n</code></pre>\n"}],"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2356,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1696624703,"creation_date":1352933254,"question_id":13388706,"body_markdown":"I have some existing code which looks a lot like the solution on https://stackoverflow.com/questions/2495501/swing-batik-create-an-imageicon-from-an-svg-file\r\n\r\nBut the destination for my image is PDF, and it bugs me that when you zoom into the PDF, you see pixels. If the source and destination data are both vector graphics, it should be possible to render directly.\r\n\r\nThe library we&#39;re using (iText) takes a java.awt.Image, but I can&#39;t seem to figure out how to get a java.awt.Image which renders an SVG. Does Batik have some way to do that?\r\n","title":"Create a non-buffered java.awt.Image from an SVG file","body":"<p>I have some existing code which looks a lot like the solution on <a href=\"https://stackoverflow.com/questions/2495501/swing-batik-create-an-imageicon-from-an-svg-file\">Swing &amp; Batik: Create an ImageIcon from an SVG file?</a></p>\n\n<p>But the destination for my image is PDF, and it bugs me that when you zoom into the PDF, you see pixels. If the source and destination data are both vector graphics, it should be possible to render directly.</p>\n\n<p>The library we're using (iText) takes a java.awt.Image, but I can't seem to figure out how to get a java.awt.Image which renders an SVG. Does Batik have some way to do that?</p>\n"},{"tags":["java","eclipse","debugging","tomcat"],"answers":[{"comments":[{"owner":{"account_id":428851,"reputation":4049,"user_id":811433,"accept_rate":69,"display_name":"user811433"},"score":0,"creation_date":1317918380,"post_id":7677110,"comment_id":9331567,"body_markdown":"Thanks for the link. I added the settings and tomcat on startup days &quot;Listening for transport dt_socket at address: 8000&quot;. After this I tried Remote debugging from eclipse and it again fails with the same error &quot;Failed to connect to remote VM. Connection refused.&quot;","body":"Thanks for the link. I added the settings and tomcat on startup days &quot;Listening for transport dt_socket at address: 8000&quot;. After this I tried Remote debugging from eclipse and it again fails with the same error &quot;Failed to connect to remote VM. Connection refused.&quot;"}],"tags":[],"owner":{"account_id":116580,"reputation":118713,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696624181,"creation_date":1317916836,"answer_id":7677110,"question_id":7677060,"body_markdown":"yes, you need to configure tomcat to accept remote debugging connections.  There is a FAQ on how to do it with various IDEs.\r\n\r\nhttps://cwiki.apache.org/confluence/display/TOMCAT/Developing#Developing-Q1","title":"debugging java application deployed in tomcat","body":"<p>yes, you need to configure tomcat to accept remote debugging connections.  There is a FAQ on how to do it with various IDEs.</p>\n<p><a href=\"https://cwiki.apache.org/confluence/display/TOMCAT/Developing#Developing-Q1\" rel=\"nofollow noreferrer\">https://cwiki.apache.org/confluence/display/TOMCAT/Developing#Developing-Q1</a></p>\n"},{"comments":[{"owner":{"account_id":428851,"reputation":4049,"user_id":811433,"accept_rate":69,"display_name":"user811433"},"score":0,"creation_date":1317920650,"post_id":7677446,"comment_id":9332173,"body_markdown":"Laz, I did all of this. But am still ending up with the error saying  &quot;Failed to connect to remote VM. Connection refused.&quot; Any idea why this error comes up?","body":"Laz, I did all of this. But am still ending up with the error saying  &quot;Failed to connect to remote VM. Connection refused.&quot; Any idea why this error comes up?"},{"owner":{"account_id":5439,"reputation":28408,"user_id":8753,"display_name":"laz"},"score":0,"creation_date":1317922346,"post_id":7677446,"comment_id":9332628,"body_markdown":"Sounds like Tomcat isn&#39;t listening for whatever reason. Which file did you end up modifying?","body":"Sounds like Tomcat isn&#39;t listening for whatever reason. Which file did you end up modifying?"},{"owner":{"account_id":428851,"reputation":4049,"user_id":811433,"accept_rate":69,"display_name":"user811433"},"score":0,"creation_date":1317989331,"post_id":7677446,"comment_id":9344576,"body_markdown":"Finally got it working. I added the JVM OPTS explicitly and gave a port other than the default 8000. Was able to get the debug connection working that way. Thanks for the help Laz!","body":"Finally got it working. I added the JVM OPTS explicitly and gave a port other than the default 8000. Was able to get the debug connection working that way. Thanks for the help Laz!"},{"owner":{"account_id":2714293,"reputation":1785,"user_id":2341993,"accept_rate":67,"display_name":"Gopakumar N G"},"score":1,"creation_date":1369319589,"post_id":7677446,"comment_id":24066421,"body_markdown":"@user811433 How did you add JVM OPTS ? Can you just post your startup.bat in which you added JVM OPTS?","body":"@user811433 How did you add JVM OPTS ? Can you just post your startup.bat in which you added JVM OPTS?"},{"owner":{"account_id":1018172,"reputation":822,"user_id":1029247,"accept_rate":89,"display_name":"thisdotnull"},"score":0,"creation_date":1456975289,"post_id":7677446,"comment_id":59197973,"body_markdown":"Finally it worked. Port for debugging is `different` from connector port for your app. For some reason I thought that the port had to be `8080` or whatever it is that you are using instead of `8000`.","body":"Finally it worked. Port for debugging is <code>different</code> from connector port for your app. For some reason I thought that the port had to be <code>8080</code> or whatever it is that you are using instead of <code>8000</code>."}],"tags":[],"owner":{"account_id":5439,"reputation":28408,"user_id":8753,"display_name":"laz"},"comment_count":5,"down_vote_count":0,"up_vote_count":46,"is_accepted":true,"score":46,"last_activity_date":1317918330,"creation_date":1317918330,"answer_id":7677446,"question_id":7677060,"body_markdown":"First, you need to run Tomcat in debugging mode. The easiest way to do that is to modify the startup file (.bat or .sh depending if you are Windows or not). Find the line near or at the end of the file that contains the `start` command, and change it to `jpda start`. This will cause Tomcat to start in debugging mode listening on port `8000`.\r\n\r\nNext, to connect to this process via Eclipse, select the `Run` menu and choose `Debug Configurations...`. In the pane on the left, choose `Remote Java Application` and click the `New launch configuration` button above the list. The important settings to note are the `Host` and `Port` fields. The host value must match the hostname of the Tomcat process, and the port should be `8000`. You also might need to add entries on the `Source` tab to ensure that all of the source code is available to step through.  ","title":"debugging java application deployed in tomcat","body":"<p>First, you need to run Tomcat in debugging mode. The easiest way to do that is to modify the startup file (.bat or .sh depending if you are Windows or not). Find the line near or at the end of the file that contains the <code>start</code> command, and change it to <code>jpda start</code>. This will cause Tomcat to start in debugging mode listening on port <code>8000</code>.</p>\n\n<p>Next, to connect to this process via Eclipse, select the <code>Run</code> menu and choose <code>Debug Configurations...</code>. In the pane on the left, choose <code>Remote Java Application</code> and click the <code>New launch configuration</code> button above the list. The important settings to note are the <code>Host</code> and <code>Port</code> fields. The host value must match the hostname of the Tomcat process, and the port should be <code>8000</code>. You also might need to add entries on the <code>Source</code> tab to ensure that all of the source code is available to step through.  </p>\n"},{"tags":[],"owner":{"account_id":1064611,"reputation":81,"user_id":1065502,"display_name":"Gopesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1453205312,"creation_date":1407251687,"answer_id":25142377,"question_id":7677060,"body_markdown":"Simply change the line in `startup.bat` (if you are using Windows) \r\n\r\nfrom:\r\n\r\n    call &quot;%EXECUTABLE%&quot; start %CMD_LINE_ARGS%\r\n\r\nto:\r\n\r\n    call &quot;%EXECUTABLE%&quot; jpda start %CMD_LINE_ARGS%\r\n\r\n","title":"debugging java application deployed in tomcat","body":"<p>Simply change the line in <code>startup.bat</code> (if you are using Windows) </p>\n\n<p>from:</p>\n\n<pre><code>call \"%EXECUTABLE%\" start %CMD_LINE_ARGS%\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>call \"%EXECUTABLE%\" jpda start %CMD_LINE_ARGS%\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2636146,"reputation":841,"user_id":2280764,"accept_rate":57,"display_name":"Brent Sandstrom"},"score":2,"creation_date":1520457026,"post_id":37855499,"comment_id":85328098,"body_markdown":"This is a super useful answer, just not to this question. I learned something, but not the answer to this problem","body":"This is a super useful answer, just not to this question. I learned something, but not the answer to this problem"}],"tags":[],"owner":{"account_id":5223592,"reputation":1718,"user_id":4176247,"display_name":"Frank Hou"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1466071325,"creation_date":1466070136,"answer_id":37855499,"question_id":7677060,"body_markdown":"1. Create a new tomcat server\r\n\r\n[![Create a new tomcat server][1]][1]\r\n\r\n[![Tomcat version selection][2]][2]\r\n\r\n[![Tomcat path and JRE version selection][3]][3]\r\n\r\n\r\n[![Tomcat server is created successfully][4]][4]\r\n\r\n\r\n\r\n\r\n\r\n2. Create a new dynamic web project\r\n\r\n[![Create a new dynamic web project][5]][5]\r\n\r\nExport war to tomcat server\r\n\r\n[![Export war to tomcat server][6]][6]\r\n\r\n3. Tomcat debug configuration(important), first double click tomcat server, then select &quot;Use Tomcat installation (takes control of Tomcat installation)&quot;\r\n\r\n[![Tomcat debug configuration -- important!][7]][7]\r\n\r\n4. Add breakpoints\r\n\r\n[![Add breakpoints][8]][8]\r\n\r\n5. Run tomcat in debug mode\r\n\r\n[![Run tomcat in debug mode][9]][9]\r\n\r\n6. Test war in web browser\r\n\r\n[![Test war in web browser][10]][10]\r\n\r\n7. Edit source path\r\n\r\n[![Edit source path -- step 1][11]][11]\r\n\r\n\r\n[![Edit source path -- step 2][12]][12]\r\n\r\n8. Debug source code in Tomcat\r\n\r\n[![Debug source code in Tomcat][13]][13]\r\n\r\n\r\nThe war file is available [here][14].\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/3kO2f.png\r\n  [2]: http://i.stack.imgur.com/LCkoi.png\r\n  [3]: http://i.stack.imgur.com/qal8P.png\r\n  [4]: http://i.stack.imgur.com/Rju5n.png\r\n  [5]: http://i.stack.imgur.com/JQwBQ.png\r\n  [6]: http://i.stack.imgur.com/dG6f4.png\r\n  [7]: http://i.stack.imgur.com/x4slv.png\r\n  [8]: http://i.stack.imgur.com/xpd7K.png\r\n  [9]: http://i.stack.imgur.com/1pMl5.png\r\n  [10]: http://i.stack.imgur.com/VL4jt.png\r\n  [11]: http://i.stack.imgur.com/oTeB1.png\r\n  [12]: http://i.stack.imgur.com/Yc2jq.png\r\n  [13]: http://i.stack.imgur.com/CFMES.png\r\n  [14]: https://drive.google.com/file/d/0B90q_K-xXJWsbW1MbktzRjJ1emc/view?usp=sharing","title":"debugging java application deployed in tomcat","body":"<ol>\n<li>Create a new tomcat server</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/3kO2f.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3kO2f.png\" alt=\"Create a new tomcat server\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/LCkoi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LCkoi.png\" alt=\"Tomcat version selection\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/qal8P.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qal8P.png\" alt=\"Tomcat path and JRE version selection\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Rju5n.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Rju5n.png\" alt=\"Tomcat server is created successfully\"></a></p>\n\n<ol start=\"2\">\n<li>Create a new dynamic web project</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/JQwBQ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JQwBQ.png\" alt=\"Create a new dynamic web project\"></a></p>\n\n<p>Export war to tomcat server</p>\n\n<p><a href=\"https://i.stack.imgur.com/dG6f4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dG6f4.png\" alt=\"Export war to tomcat server\"></a></p>\n\n<ol start=\"3\">\n<li>Tomcat debug configuration(important), first double click tomcat server, then select \"Use Tomcat installation (takes control of Tomcat installation)\"</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/x4slv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/x4slv.png\" alt=\"Tomcat debug configuration -- important!\"></a></p>\n\n<ol start=\"4\">\n<li>Add breakpoints</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/xpd7K.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xpd7K.png\" alt=\"Add breakpoints\"></a></p>\n\n<ol start=\"5\">\n<li>Run tomcat in debug mode</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/1pMl5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1pMl5.png\" alt=\"Run tomcat in debug mode\"></a></p>\n\n<ol start=\"6\">\n<li>Test war in web browser</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/VL4jt.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/VL4jt.png\" alt=\"Test war in web browser\"></a></p>\n\n<ol start=\"7\">\n<li>Edit source path</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/oTeB1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oTeB1.png\" alt=\"Edit source path -- step 1\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Yc2jq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Yc2jq.png\" alt=\"Edit source path -- step 2\"></a></p>\n\n<ol start=\"8\">\n<li>Debug source code in Tomcat</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/CFMES.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/CFMES.png\" alt=\"Debug source code in Tomcat\"></a></p>\n\n<p>The war file is available <a href=\"https://drive.google.com/file/d/0B90q_K-xXJWsbW1MbktzRjJ1emc/view?usp=sharing\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":8500236,"reputation":207,"user_id":6373484,"display_name":"Fikreselam Elala"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1476991357,"creation_date":1476991357,"answer_id":40162854,"question_id":7677060,"body_markdown":"1. Right Click on the project you want to debug and go to Debug As Menu and in the list click on Debug Configurations.\r\n \r\n[![Step 1. Image Description][1]][1]\r\n\r\n\r\n2. Then Double click on the Remote Java Application from left menu list. browse for the project u wanna add in then click apply.\r\n\r\n   - Also change the listening port to 7999, then after you started the web app from your localhost click the debug button on the same window. Then any break point&#39;s will be hit after that. \r\n\r\n[![Step 2. Image Description][2]][2]\r\n   \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LjNMy.jpg\r\n  [2]: https://i.stack.imgur.com/KSLod.jpg","title":"debugging java application deployed in tomcat","body":"<ol>\n<li>Right Click on the project you want to debug and go to Debug As Menu and in the list click on Debug Configurations.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/LjNMy.jpg\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/LjNMy.jpg\" alt=\"Step 1. Image Description\"></a></p>\n\n<ol start=\"2\">\n<li><p>Then Double click on the Remote Java Application from left menu list. browse for the project u wanna add in then click apply.</p>\n\n<ul>\n<li>Also change the listening port to 7999, then after you started the web app from your localhost click the debug button on the same window. Then any break point's will be hit after that. </li>\n</ul></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/KSLod.jpg\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/KSLod.jpg\" alt=\"Step 2. Image Description\"></a></p>\n"},{"tags":[],"owner":{"account_id":12147348,"reputation":1249,"user_id":8869104,"display_name":"chandan gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577956061,"creation_date":1577956061,"answer_id":59560728,"question_id":7677060,"body_markdown":"Steps to setup the tomcat Debugger with eclipse\n\nInstall the following things:\n\n&gt; java 1.8+\n&gt;\n&gt; eclipse EE version\n&gt;\n&gt; download tomcat 8+\n&gt;\n&gt; open eclipse and go to `servers` tab and add a new server(window-&gt; show View-&gt; Others -&gt; Search Servers)\n&gt;\n&gt; Mark your project as Dynamic web Project(Rightclick on Project-&gt; project facets -&gt; select Dynamic web module)\n&gt;\n&gt; Export war (File-&gt; Export-&gt; search war -&gt; select module and choose the path)\n&gt;\n&gt; Run as -&gt; Run on Server\n&gt;\n&gt; Start the tomcat Server in Debug or Run Mode\n&gt;\n&gt; check on `localhost:8080`\n\n ","title":"debugging java application deployed in tomcat","body":"<p>Steps to setup the tomcat Debugger with eclipse</p>\n<p>Install the following things:</p>\n<blockquote>\n<p>java 1.8+</p>\n<p>eclipse EE version</p>\n<p>download tomcat 8+</p>\n<p>open eclipse and go to <code>servers</code> tab and add a new server(window-&gt; show View-&gt; Others -&gt; Search Servers)</p>\n<p>Mark your project as Dynamic web Project(Rightclick on Project-&gt; project facets -&gt; select Dynamic web module)</p>\n<p>Export war (File-&gt; Export-&gt; search war -&gt; select module and choose the path)</p>\n<p>Run as -&gt; Run on Server</p>\n<p>Start the tomcat Server in Debug or Run Mode</p>\n<p>check on <code>localhost:8080</code></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5814216,"reputation":465,"user_id":4584374,"display_name":"Joginder Malik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589716613,"creation_date":1589716613,"answer_id":61851389,"question_id":7677060,"body_markdown":"Debug worked for me. I was using tomcat 8, configured on centos 7. Debug port opened for me after changing 2 settings.\r\n\r\n1. Open tomcat/conf/bin/startup.sh and added below lines\r\n```\r\nexport JPDA_ADDRESS=8000\r\nexport JPDA_TRANSPORT=dt_socket\r\n```\r\n2. In the same file startup.sh, added &lt;b&gt;jpda&lt;/b&gt; before start command.\r\n```\r\nexec &quot;$PRGDIR&quot;/&quot;$EXECUTABLE&quot; jpda start &quot;$@&quot;\r\n```\r\nRestart the tomcat.\r\nIn eclipse go to &lt;b&gt; Run&gt;Debug configuration&gt;Remote java application&gt;Add host ip and port(8000)&lt;/b&gt; where tomcat is running.\r\nIn my case i required to open 8000 through firewall too.\r\n```\r\nfirewall-cmd --zone=public --permanent --add-port=8000/tcp\r\nfirewall-cmd --reload\r\n```","title":"debugging java application deployed in tomcat","body":"<p>Debug worked for me. I was using tomcat 8, configured on centos 7. Debug port opened for me after changing 2 settings.</p>\n\n<ol>\n<li>Open tomcat/conf/bin/startup.sh and added below lines</li>\n</ol>\n\n<pre><code>export JPDA_ADDRESS=8000\nexport JPDA_TRANSPORT=dt_socket\n</code></pre>\n\n<ol start=\"2\">\n<li>In the same file startup.sh, added <b>jpda</b> before start command.</li>\n</ol>\n\n<pre><code>exec \"$PRGDIR\"/\"$EXECUTABLE\" jpda start \"$@\"\n</code></pre>\n\n<p>Restart the tomcat.\nIn eclipse go to <b> Run>Debug configuration>Remote java application>Add host ip and port(8000)</b> where tomcat is running.\nIn my case i required to open 8000 through firewall too.</p>\n\n<pre><code>firewall-cmd --zone=public --permanent --add-port=8000/tcp\nfirewall-cmd --reload\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14576942,"reputation":597,"user_id":10528552,"display_name":"hamidreza75"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628927400,"creation_date":1628927400,"answer_id":68781392,"question_id":7677060,"body_markdown":"Beside remote debugging, you can debug your app locally within eclipse if you added tomcat in eclipse.\r\njust start server and wright click your app and from debug menu hit debug on server.\r\nIf you have multi module maven project, debug on server just shown up for module with war packaging.\r\nIf you want debug a class that runs at startup by self, like methods that annotated with @PostConstruct, remember that you should increase server timeout.\r\nTo do that, go to server view and double click on tomcat and in server preview tab, increase the timeout value.","title":"debugging java application deployed in tomcat","body":"<p>Beside remote debugging, you can debug your app locally within eclipse if you added tomcat in eclipse.\njust start server and wright click your app and from debug menu hit debug on server.\nIf you have multi module maven project, debug on server just shown up for module with war packaging.\nIf you want debug a class that runs at startup by self, like methods that annotated with @PostConstruct, remember that you should increase server timeout.\nTo do that, go to server view and double click on tomcat and in server preview tab, increase the timeout value.</p>\n"}],"owner":{"account_id":428851,"reputation":4049,"user_id":811433,"accept_rate":69,"display_name":"user811433"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81807,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":7677446,"answer_count":8,"score":31,"last_activity_date":1696624181,"creation_date":1317916624,"question_id":7677060,"body_markdown":"I have an application that I deployed in tomcat. Later I configured the code as a project in Eclipse. I want to connect to the tomcat via eclipse and debug the application.\r\nTrying to setup a remote debug connection is throwing up errors. Is there any entry that I need to add somewhere in tomcat?","title":"debugging java application deployed in tomcat","body":"<p>I have an application that I deployed in tomcat. Later I configured the code as a project in Eclipse. I want to connect to the tomcat via eclipse and debug the application.\nTrying to setup a remote debug connection is throwing up errors. Is there any entry that I need to add somewhere in tomcat?</p>\n"},{"tags":["java","influxdb"],"owner":{"account_id":2007038,"reputation":3735,"user_id":1796624,"accept_rate":42,"display_name":"user1796624"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696623833,"creation_date":1696623833,"question_id":77247189,"body_markdown":"Im using [influxdb-client-java][1] for java. How can I drop an entire measurement? Also is this operation fast?\r\n\r\n\r\n  [1]: https://github.com/influxdata/influxdb-client-java","title":"How to delete measurement in Influx using java influxdb-client-java?","body":"<p>Im using <a href=\"https://github.com/influxdata/influxdb-client-java\" rel=\"nofollow noreferrer\">influxdb-client-java</a> for java. How can I drop an entire measurement? Also is this operation fast?</p>\n"},{"tags":["java","android","performance"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1516884752,"post_id":48443286,"comment_id":83877984,"body_markdown":"What exactly do you mean by &quot;stop the app&quot;? &quot;Could anyone explain me about why I&#39;m getting this&quot; -- usually, this comes from either putting too much data in the saved instance state `Bundle` or by passing too much data in extras on an `Intent` (e.g., for `startActivity()`).","body":"What exactly do you mean by &quot;stop the app&quot;? &quot;Could anyone explain me about why I&#39;m getting this&quot; -- usually, this comes from either putting too much data in the saved instance state <code>Bundle</code> or by passing too much data in extras on an <code>Intent</code> (e.g., for <code>startActivity()</code>)."},{"owner":{"account_id":2706598,"reputation":1192,"user_id":2336076,"accept_rate":53,"display_name":"Alezis"},"score":0,"creation_date":1516884813,"post_id":48443286,"comment_id":83878022,"body_markdown":"Sorry im going to explain it better","body":"Sorry im going to explain it better"},{"owner":{"account_id":2706598,"reputation":1192,"user_id":2336076,"accept_rate":53,"display_name":"Alezis"},"score":0,"creation_date":1516885617,"post_id":48443286,"comment_id":83878545,"body_markdown":"I have checked onSaveInstanceState(final Bundle outState) and the bundle is empty. How android manages it?","body":"I have checked onSaveInstanceState(final Bundle outState) and the bundle is empty. How android manages it?"}],"answers":[{"tags":[],"owner":{"account_id":3615290,"reputation":15707,"user_id":3015325,"display_name":"Larry Schiefer"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1516887168,"creation_date":1516887168,"answer_id":48444115,"question_id":48443286,"body_markdown":"You are moving too much data through a binder interface. This can happen if using a custom binder interface and passing large object, or if you are attaching extras to an `Intent` which a very large (or lots of objects so the size adds up.) This could be when sending an `Intent` or when receiving a result. Binder is used for any kind of cross process communication in Android and still is used when starting activities in the same app. Binder has a limited sized buffer internally, so large transactions can cause failures like this.\r\n\r\nRather than place your data into the `Intent`directly, or pass it directly to a binder based method call, pass a reference of some kind and the receiver can access the dates using the reference. For example, send an id for the data stored in a DB or similar mechanism.","title":"Android. Why E/JavaBinder: FAILED BINDER TRANSACTION?","body":"<p>You are moving too much data through a binder interface. This can happen if using a custom binder interface and passing large object, or if you are attaching extras to an <code>Intent</code> which a very large (or lots of objects so the size adds up.) This could be when sending an <code>Intent</code> or when receiving a result. Binder is used for any kind of cross process communication in Android and still is used when starting activities in the same app. Binder has a limited sized buffer internally, so large transactions can cause failures like this.</p>\n\n<p>Rather than place your data into the <code>Intent</code>directly, or pass it directly to a binder based method call, pass a reference of some kind and the receiver can access the dates using the reference. For example, send an id for the data stored in a DB or similar mechanism.</p>\n"},{"comments":[{"owner":{"account_id":4710417,"reputation":1861,"user_id":3811068,"display_name":"Dhananjay M"},"score":0,"creation_date":1701426431,"post_id":62038129,"comment_id":136776832,"body_markdown":"An infinite while loop was the cause for us","body":"An infinite while loop was the cause for us"}],"tags":[],"owner":{"account_id":1418622,"reputation":467,"user_id":1343719,"display_name":"Andrea Leganza"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1590566296,"creation_date":1590566296,"answer_id":62038129,"question_id":48443286,"body_markdown":"In my case the problem was an infinite loop for a method (recursive) which saturated the stack. ","title":"Android. Why E/JavaBinder: FAILED BINDER TRANSACTION?","body":"<p>In my case the problem was an infinite loop for a method (recursive) which saturated the stack. </p>\n"}],"owner":{"account_id":2706598,"reputation":1192,"user_id":2336076,"accept_rate":53,"display_name":"Alezis"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12668,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1696623519,"creation_date":1516884471,"question_id":48443286,"body_markdown":"I have read a lot of posts about this error, most of them regarding managing an image.\r\n\r\nBut I&#39;m getting this error when I stop the app (put in background), so should be regarding data in memory...\r\n\r\nI&#39;m not doing anything in onStop() of my fragment and activity.\r\n\r\nI have checked onSaveInstanceState(final Bundle outState) and the bundle is empty... &#191;?\r\n\r\nI have 5 ArrayList of objects and making tests I realized that if I don&#39;t have the biggest one the error is not thrown.\r\n\r\nMy app is going to has more data than now it has, so it is a problem. \r\n\r\nCould anyone explain me about why I&#39;m getting this and how I have to handle this??\r\n\r\nError:\r\n\r\n```\r\n01-25 13:51:09.272 4940-4940/com.cathedralsw.schoolteacher\r\nE/JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel size = 539984)\r\n\r\n--------- beginning of crash\r\n01-25 13:51:09.281 4940-4940/com.cathedralsw.schoolteacher E/AndroidRuntime: FATAL EXCEPTION: main\r\n  Process: com.cathedralsw.schoolteacher, PID: 4940\r\n  java.lang.RuntimeException: android.os.TransactionTooLargeException: data parcel size 539984 bytes\r\n      at android.app.ActivityThread$StopInfo.run(ActivityThread.java:4039)\r\n      at android.os.Handler.handleCallback(Handler.java:761)\r\n      at android.os.Handler.dispatchMessage(Handler.java:98)\r\n      at android.os.Looper.loop(Looper.java:156)\r\n      at android.app.ActivityThread.main(ActivityThread.java:6595)\r\n      at java.lang.reflect.Method.invoke(Native Method)\r\n      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:942)\r\n      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:832)\r\n   Caused by: android.os.TransactionTooLargeException: data parcel size 539984 bytes\r\n      at android.os.BinderProxy.transactNative(Native Method)\r\n      at android.os.BinderProxy.transact(Binder.java:617)\r\n      at android.app.ActivityManagerProxy.activityStopped(ActivityManagerNative.java:3632)\r\n      at android.app.ActivityThread$StopInfo.run(ActivityThread.java:4031)\r\n      at android.os.Handler.handleCallback(Handler.java:761)\r\n      at android.os.Handler.dispatchMessage(Handler.java:98)\r\n      at android.os.Looper.loop(Looper.java:156)\r\n      at android.app.ActivityThread.main(ActivityThread.java:6595)\r\n      at java.lang.reflect.Method.invoke(Native Method)\r\n      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:942)\r\n      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:832)\r\n01-25 13:51:09.286 1795-5775/? E/ReportTools: This is not beta user build\r\n```","title":"Android. Why E/JavaBinder: FAILED BINDER TRANSACTION?","body":"<p>I have read a lot of posts about this error, most of them regarding managing an image.</p>\n<p>But I'm getting this error when I stop the app (put in background), so should be regarding data in memory...</p>\n<p>I'm not doing anything in onStop() of my fragment and activity.</p>\n<p>I have checked onSaveInstanceState(final Bundle outState) and the bundle is empty... ¿?</p>\n<p>I have 5 ArrayList of objects and making tests I realized that if I don't have the biggest one the error is not thrown.</p>\n<p>My app is going to has more data than now it has, so it is a problem.</p>\n<p>Could anyone explain me about why I'm getting this and how I have to handle this??</p>\n<p>Error:</p>\n<pre><code>01-25 13:51:09.272 4940-4940/com.cathedralsw.schoolteacher\nE/JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel size = 539984)\n\n--------- beginning of crash\n01-25 13:51:09.281 4940-4940/com.cathedralsw.schoolteacher E/AndroidRuntime: FATAL EXCEPTION: main\n  Process: com.cathedralsw.schoolteacher, PID: 4940\n  java.lang.RuntimeException: android.os.TransactionTooLargeException: data parcel size 539984 bytes\n      at android.app.ActivityThread$StopInfo.run(ActivityThread.java:4039)\n      at android.os.Handler.handleCallback(Handler.java:761)\n      at android.os.Handler.dispatchMessage(Handler.java:98)\n      at android.os.Looper.loop(Looper.java:156)\n      at android.app.ActivityThread.main(ActivityThread.java:6595)\n      at java.lang.reflect.Method.invoke(Native Method)\n      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:942)\n      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:832)\n   Caused by: android.os.TransactionTooLargeException: data parcel size 539984 bytes\n      at android.os.BinderProxy.transactNative(Native Method)\n      at android.os.BinderProxy.transact(Binder.java:617)\n      at android.app.ActivityManagerProxy.activityStopped(ActivityManagerNative.java:3632)\n      at android.app.ActivityThread$StopInfo.run(ActivityThread.java:4031)\n      at android.os.Handler.handleCallback(Handler.java:761)\n      at android.os.Handler.dispatchMessage(Handler.java:98)\n      at android.os.Looper.loop(Looper.java:156)\n      at android.app.ActivityThread.main(ActivityThread.java:6595)\n      at java.lang.reflect.Method.invoke(Native Method)\n      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:942)\n      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:832)\n01-25 13:51:09.286 1795-5775/? E/ReportTools: This is not beta user build\n</code></pre>\n"},{"tags":["java","json","jackson","json-deserialization","objectmapper"],"comments":[{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1696590687,"post_id":77243914,"comment_id":136175954,"body_markdown":"Use a custom deserialiser?","body":"Use a custom deserialiser?"},{"owner":{"account_id":23182396,"reputation":11,"user_id":17280027,"display_name":"Surya Kumar"},"score":0,"creation_date":1696667183,"post_id":77243914,"comment_id":136185153,"body_markdown":"@Jean-BaptisteYun&#232;s I updated the details of custom deserializer in the problem description.","body":"@Jean-BaptisteYun&#232;s I updated the details of custom deserializer in the problem description."}],"answers":[{"comments":[{"owner":{"account_id":23182396,"reputation":11,"user_id":17280027,"display_name":"Surya Kumar"},"score":0,"creation_date":1696593047,"post_id":77244011,"comment_id":136176395,"body_markdown":"Receiving this error:\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.util.HashSet&lt;um.Test1$Key&gt;` from Object value (token `JsonToken.START_OBJECT`)\n\nThis is the json I used:\n{\n  &quot;key1&quot;: {\n    &quot;code1&quot;: &quot;name1&quot;,\n    &quot;code2&quot;: &quot;name2&quot;\n  },\n  &quot;key2&quot;: {\n    &quot;code3&quot;: &quot;name3&quot;,\n    &quot;code4&quot;: &quot;name4&quot;\n  }\n}","body":"Receiving this error: Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type <code>java.util.HashSet&lt;um.Test1$Key&gt;</code> from Object value (token <code>JsonToken.START_OBJECT</code>)  This is the json I used: {   &quot;key1&quot;: {     &quot;code1&quot;: &quot;name1&quot;,     &quot;code2&quot;: &quot;name2&quot;   },   &quot;key2&quot;: {     &quot;code3&quot;: &quot;name3&quot;,     &quot;code4&quot;: &quot;name4&quot;   } }"}],"tags":[],"owner":{"account_id":14045534,"reputation":143,"user_id":10327886,"display_name":"MAYANK SINGH"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696590994,"creation_date":1696590994,"answer_id":77244011,"question_id":77243914,"body_markdown":"To directly deserialize your JSON object into a `Map&lt;String, Set&lt;Key&gt;&gt;` using Jackson&#39;s ObjectMapper, you can create a custom deserializer for your `Key` class and configure the ObjectMapper to use this custom deserializer when deserializing the JSON object. Here&#39;s how you can do it:\r\n\r\nFirst, let&#39;s define your `Key` class with the appropriate getters and setters:\r\n\r\n```java\r\npublic class Key {\r\n    private String code;\r\n    private String name;\r\n\r\n    // Constructors, getters, setters, and any other methods\r\n}\r\n```\r\n\r\nNext, create a custom deserializer for the `Key` class:\r\n\r\n```java\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JsonDeserializer;\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class KeyDeserializer extends JsonDeserializer&lt;Key&gt; {\r\n    @Override\r\n    public Key deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\r\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\r\n        String code = node.fieldNames().next();\r\n        String name = node.get(code).asText();\r\n        return new Key(code, name);\r\n    }\r\n}\r\n```\r\n\r\nNow, configure your ObjectMapper to use the custom deserializer:\r\n\r\n```java\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.module.SimpleModule;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws Exception {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n        // Register the custom deserializer for the Key class\r\n        SimpleModule module = new SimpleModule();\r\n        module.addDeserializer(Key.class, new KeyDeserializer());\r\n        objectMapper.registerModule(module);\r\n\r\n        String json = &quot;YOUR_JSON_STRING_HERE&quot;; // Replace with your JSON data\r\n\r\n        // Deserialize the JSON into a Map&lt;String, Set&lt;Key&gt;&gt;\r\n        Map&lt;String, Set&lt;Key&gt;&gt; map = objectMapper.readValue(json, new TypeReference&lt;Map&lt;String, Set&lt;Key&gt;&gt;&gt;() {});\r\n\r\n        // Now you have the desired Map&lt;String, Set&lt;Key&gt;&gt;\r\n    }\r\n}\r\n```\r\n\r\nReplace `&quot;YOUR_JSON_STRING_HERE&quot;` with your actual JSON data. This code should correctly deserialize your JSON object into a `Map&lt;String, Set&lt;Key&gt;&gt;` using the custom deserializer for the `Key` class.","title":"Convert a JSON object into a set of custom object","body":"<p>To directly deserialize your JSON object into a <code>Map&lt;String, Set&lt;Key&gt;&gt;</code> using Jackson's ObjectMapper, you can create a custom deserializer for your <code>Key</code> class and configure the ObjectMapper to use this custom deserializer when deserializing the JSON object. Here's how you can do it:</p>\n<p>First, let's define your <code>Key</code> class with the appropriate getters and setters:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Key {\n    private String code;\n    private String name;\n\n    // Constructors, getters, setters, and any other methods\n}\n</code></pre>\n<p>Next, create a custom deserializer for the <code>Key</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport com.fasterxml.jackson.databind.JsonNode;\n\nimport java.io.IOException;\n\npublic class KeyDeserializer extends JsonDeserializer&lt;Key&gt; {\n    @Override\n    public Key deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\n        String code = node.fieldNames().next();\n        String name = node.get(code).asText();\n        return new Key(code, name);\n    }\n}\n</code></pre>\n<p>Now, configure your ObjectMapper to use the custom deserializer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\n\npublic class Main {\n    public static void main(String[] args) throws Exception {\n        ObjectMapper objectMapper = new ObjectMapper();\n\n        // Register the custom deserializer for the Key class\n        SimpleModule module = new SimpleModule();\n        module.addDeserializer(Key.class, new KeyDeserializer());\n        objectMapper.registerModule(module);\n\n        String json = &quot;YOUR_JSON_STRING_HERE&quot;; // Replace with your JSON data\n\n        // Deserialize the JSON into a Map&lt;String, Set&lt;Key&gt;&gt;\n        Map&lt;String, Set&lt;Key&gt;&gt; map = objectMapper.readValue(json, new TypeReference&lt;Map&lt;String, Set&lt;Key&gt;&gt;&gt;() {});\n\n        // Now you have the desired Map&lt;String, Set&lt;Key&gt;&gt;\n    }\n}\n</code></pre>\n<p>Replace <code>&quot;YOUR_JSON_STRING_HERE&quot;</code> with your actual JSON data. This code should correctly deserialize your JSON object into a <code>Map&lt;String, Set&lt;Key&gt;&gt;</code> using the custom deserializer for the <code>Key</code> class.</p>\n"}],"owner":{"account_id":23182396,"reputation":11,"user_id":17280027,"display_name":"Surya Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1696622607,"creation_date":1696589990,"question_id":77243914,"body_markdown":"I have a json object similar to the below one.\r\n\r\n```\r\n{\r\n  &quot;key1&quot;: {\r\n    &quot;code1&quot;: &quot;name1&quot;,\r\n    &quot;code2&quot;: &quot;name2&quot;,\r\n    ...\r\n  },\r\n  &quot;key2&quot;: {\r\n    &quot;code1&quot;: &quot;name1&quot;,\r\n    &quot;code2&quot;: &quot;name2&quot;,\r\n    ...\r\n  },\r\n  ...\r\n}\r\n```\r\n\r\nI want to convert this json object into Map&lt;String, Set&lt; Key &gt;&gt; instead of Map&lt;String, Map&lt;String, String&gt;&gt; which I can do normally with ObjectMapper.\r\n\r\nThe Key class I want look something similar to this.\r\n\r\n```\r\npublic class Key{\r\n  private String code;\r\n  private String Name;\r\n}\r\n```\r\n\r\nI tried some custom deserializer with the help of chatgpt.\r\n\r\n```\r\npublic static class KeyListDeserializer extends JsonDeserializer&lt;Set&lt;Key&gt;&gt; {\r\n\r\n    @Override\r\n    public Set&lt;Key&gt; deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException {\r\n        Set&lt;Key&gt; keyList = new HashSet&lt;&gt;();\r\n        JsonNode rootNode = jp.getCodec().readTree(jp);\r\n\r\n        Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; fields = rootNode.fields();\r\n        while (fields.hasNext()) {\r\n            Map.Entry&lt;String, JsonNode&gt; field = fields.next();\r\n            String code = field.getKey();\r\n            String name = field.getValue().asText();\r\n\r\n            Key key = new Key();\r\n            key.setCode(code);\r\n            key.setName(name);\r\n\r\n            keyList.add(key);\r\n        }\r\n\r\n        return keyList;\r\n    }\r\n}\r\n```\r\nBut it doesn&#39;t work, throwing below error:\r\n```\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.util.HashSet&lt;um.Test1$Key&gt;` from Object value (token `JsonToken.START_OBJECT`)\r\n```\r\n\r\nI can deserialize it to Map&lt;String, Map&gt; and convert it to Map&lt;String, Set&lt; Key &gt;&gt; manually, but i thought it is better to achieve it through objectmapper itself instead of separate handling.\r\n\r\nHow can I directly deserialize the object into Set&lt;Key&gt;?","title":"Convert a JSON object into a set of custom object","body":"<p>I have a json object similar to the below one.</p>\n<pre><code>{\n  &quot;key1&quot;: {\n    &quot;code1&quot;: &quot;name1&quot;,\n    &quot;code2&quot;: &quot;name2&quot;,\n    ...\n  },\n  &quot;key2&quot;: {\n    &quot;code1&quot;: &quot;name1&quot;,\n    &quot;code2&quot;: &quot;name2&quot;,\n    ...\n  },\n  ...\n}\n</code></pre>\n<p>I want to convert this json object into Map&lt;String, Set&lt; Key &gt;&gt; instead of Map&lt;String, Map&lt;String, String&gt;&gt; which I can do normally with ObjectMapper.</p>\n<p>The Key class I want look something similar to this.</p>\n<pre><code>public class Key{\n  private String code;\n  private String Name;\n}\n</code></pre>\n<p>I tried some custom deserializer with the help of chatgpt.</p>\n<pre><code>public static class KeyListDeserializer extends JsonDeserializer&lt;Set&lt;Key&gt;&gt; {\n\n    @Override\n    public Set&lt;Key&gt; deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException {\n        Set&lt;Key&gt; keyList = new HashSet&lt;&gt;();\n        JsonNode rootNode = jp.getCodec().readTree(jp);\n\n        Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; fields = rootNode.fields();\n        while (fields.hasNext()) {\n            Map.Entry&lt;String, JsonNode&gt; field = fields.next();\n            String code = field.getKey();\n            String name = field.getValue().asText();\n\n            Key key = new Key();\n            key.setCode(code);\n            key.setName(name);\n\n            keyList.add(key);\n        }\n\n        return keyList;\n    }\n}\n</code></pre>\n<p>But it doesn't work, throwing below error:</p>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.util.HashSet&lt;um.Test1$Key&gt;` from Object value (token `JsonToken.START_OBJECT`)\n</code></pre>\n<p>I can deserialize it to Map&lt;String, Map&gt; and convert it to Map&lt;String, Set&lt; Key &gt;&gt; manually, but i thought it is better to achieve it through objectmapper itself instead of separate handling.</p>\n<p>How can I directly deserialize the object into Set?</p>\n"},{"tags":["java","oop","design-patterns"],"answers":[{"comments":[{"owner":{"account_id":1592958,"reputation":989,"user_id":1475878,"accept_rate":62,"display_name":"zggame"},"score":0,"creation_date":1341802671,"post_id":11378944,"comment_id":15012398,"body_markdown":"I don&#39;t think the builder pattern is proper for an immutable class.","body":"I don&#39;t think the builder pattern is proper for an immutable class."},{"owner":{"account_id":14965,"reputation":55597,"user_id":31158,"accept_rate":89,"display_name":"Jord&#227;o"},"score":0,"creation_date":1341841889,"post_id":11378944,"comment_id":15024404,"body_markdown":"@zggame: of course not! You use a builder to build another object.","body":"@zggame: of course not! You use a builder to build another object."}],"tags":[],"owner":{"account_id":14965,"reputation":55597,"user_id":31158,"accept_rate":89,"display_name":"Jord&#227;o"},"comment_count":2,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1341698172,"creation_date":1341698172,"answer_id":11378944,"question_id":11378932,"body_markdown":"Two things you can do:\r\n\r\n- Many constructor overloads\r\n- Use a [builder object](http://en.wikipedia.org/wiki/Builder_pattern)","title":"Java constructor of &quot;immutable class&quot; with many fields with default values?","body":"<p>Two things you can do:</p>\n\n<ul>\n<li>Many constructor overloads</li>\n<li>Use a <a href=\"http://en.wikipedia.org/wiki/Builder_pattern\" rel=\"noreferrer\">builder object</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":981398,"reputation":23613,"user_id":1001027,"accept_rate":72,"display_name":"Francisco Spaeth"},"score":1,"creation_date":1341698477,"post_id":11378969,"comment_id":14996086,"body_markdown":"this leads to many errors, mainly with type compatibility, I would say that in this case a builder approach would be better (as suggested by Jord&#227;o)","body":"this leads to many errors, mainly with type compatibility, I would say that in this case a builder approach would be better (as suggested by Jord&#227;o)"},{"owner":{"account_id":74486,"reputation":105478,"user_id":214010,"accept_rate":83,"display_name":"mikera"},"score":0,"creation_date":1341698624,"post_id":11378969,"comment_id":14996119,"body_markdown":"Well it&#39;s a technique from dynamic languages.... you are trading static type checking for convenience/flexibility. Up to you if you like the approach, but I&#39;ve found it&#39;s not a problem if you write good tests.","body":"Well it&#39;s a technique from dynamic languages.... you are trading static type checking for convenience/flexibility. Up to you if you like the approach, but I&#39;ve found it&#39;s not a problem if you write good tests."},{"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"score":0,"creation_date":1341698636,"post_id":11378969,"comment_id":14996123,"body_markdown":"That&#39;s the JavaScript way, and good in languages with dynamic typing, but I wouldn&#39;t do it in Java.  Could work if all the arguments were the same type maybe.  Still, I think Bob Martin has something to say about &quot;passing hash maps around&quot; not being a good idea.  Neither -1 or +1.","body":"That&#39;s the JavaScript way, and good in languages with dynamic typing, but I wouldn&#39;t do it in Java.  Could work if all the arguments were the same type maybe.  Still, I think Bob Martin has something to say about &quot;passing hash maps around&quot; not being a good idea.  Neither -1 or +1."},{"owner":{"account_id":1597800,"reputation":677,"user_id":1479482,"display_name":"oxc"},"score":0,"creation_date":1341698692,"post_id":11378969,"comment_id":14996138,"body_markdown":"In my opinion, an approach like this goes against everything Java stands for.","body":"In my opinion, an approach like this goes against everything Java stands for."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1341698887,"post_id":11378969,"comment_id":14996182,"body_markdown":"It not only gives up static typing, it&#39;s fragile because if you accidentally misspell a parameter you get no indication you did anything wrong unless you have a catch-all case that throws if there are any unexpected values in the map.","body":"It not only gives up static typing, it&#39;s fragile because if you accidentally misspell a parameter you get no indication you did anything wrong unless you have a catch-all case that throws if there are any unexpected values in the map."},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":1,"creation_date":1341699683,"post_id":11378969,"comment_id":14996341,"body_markdown":"There are ways to do things like this which are not so bad (eg define an enum which enumerates the properties of the object, and use instances of that as keys), but it&#39;s probably no easier than a builder.","body":"There are ways to do things like this which are not so bad (eg define an enum which enumerates the properties of the object, and use instances of that as keys), but it&#39;s probably no easier than a builder."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1341700882,"post_id":11378969,"comment_id":14996549,"body_markdown":"It isn&#39;t really concise. It makes the class more concise, but the client code more verbose since there&#39;s no syntax to statically initialize a map in Java. That&#39;s not the case in the other languages like Ruby and Python where this pattern is more common. As for catching errors with tests, you will always be paying the penalty at run time because you always need to catch the case where a misspelled parameter is ignored in addition to testing that a correctly spelled parameter is picked up properly.","body":"It isn&#39;t really concise. It makes the class more concise, but the client code more verbose since there&#39;s no syntax to statically initialize a map in Java. That&#39;s not the case in the other languages like Ruby and Python where this pattern is more common. As for catching errors with tests, you will always be paying the penalty at run time because you always need to catch the case where a misspelled parameter is ignored in addition to testing that a correctly spelled parameter is picked up properly."}],"tags":[],"owner":{"account_id":74486,"reputation":105478,"user_id":214010,"accept_rate":83,"display_name":"mikera"},"comment_count":7,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1341700459,"creation_date":1341698433,"answer_id":11378969,"question_id":11378932,"body_markdown":"One interesting option is to create a constructor that takes a `Map&lt;String,Object&gt;` as input which contains the values that the user wants to specify.\r\n\r\nThe constructor can use the value provided in the map if present, or a default value otherwise.\r\n\r\n**EDIT:**\r\n\r\nI think the random downvoters have completely missed the point - this isn&#39;t always going to be the best choice but it is a useful technique that has several advantages:\r\n\r\n - It is concise and avoids the need to create separate constructors / builder classes\r\n - It allows easy programmatic construction of parameter sets (e.g. if you are constructing objects from a parsed DSL)\r\n - This is a technique that is frequently used and proven to work in dynamic languages. You just need to write decent tests (which you should be doing anyway!)\r\n","title":"Java constructor of &quot;immutable class&quot; with many fields with default values?","body":"<p>One interesting option is to create a constructor that takes a <code>Map&lt;String,Object&gt;</code> as input which contains the values that the user wants to specify.</p>\n\n<p>The constructor can use the value provided in the map if present, or a default value otherwise.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I think the random downvoters have completely missed the point - this isn't always going to be the best choice but it is a useful technique that has several advantages:</p>\n\n<ul>\n<li>It is concise and avoids the need to create separate constructors / builder classes</li>\n<li>It allows easy programmatic construction of parameter sets (e.g. if you are constructing objects from a parsed DSL)</li>\n<li>This is a technique that is frequently used and proven to work in dynamic languages. You just need to write decent tests (which you should be doing anyway!)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1341698957,"post_id":11379011,"comment_id":14996196,"body_markdown":"You don&#39;t even need getters in your builder, and A&#39;s constructor can be private. This also allows checking the parameters in the build() method instead of the constructor.","body":"You don&#39;t even need getters in your builder, and A&#39;s constructor can be private. This also allows checking the parameters in the build() method instead of the constructor."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1341699111,"post_id":11379011,"comment_id":14996225,"body_markdown":"True. I considered making A&#39;s ctor private. That&#39;s probably cleaner.","body":"True. I considered making A&#39;s ctor private. That&#39;s probably cleaner."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1341699287,"post_id":11379011,"comment_id":14996265,"body_markdown":"Another advantage is that the builder can choose to return an instance of A, ABis or ATer (Abis and Ater being subclasses of A), depending on the parameters.","body":"Another advantage is that the builder can choose to return an instance of A, ABis or ATer (Abis and Ater being subclasses of A), depending on the parameters."},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1341699778,"post_id":11379011,"comment_id":14996362,"body_markdown":"If you&#39;re not obsessed with fluency, you can just make the variables of the builder public. The calling code is slightly longer, but the definition of the builder is much briefer.","body":"If you&#39;re not obsessed with fluency, you can just make the variables of the builder public. The calling code is slightly longer, but the definition of the builder is much briefer."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1341700140,"post_id":11379011,"comment_id":14996422,"body_markdown":"@TomAnderson You can leave them private; the outer class can still access them.","body":"@TomAnderson You can leave them private; the outer class can still access them."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1341700261,"post_id":11379011,"comment_id":14996447,"body_markdown":"@JBNizet The builder can do that anyway; right now, its `build()` method is just calling A&#39;s ctor, but it could do anything it wants. I took your suggestions and made A&#39;s ctor private and removed the getters, and I also added convenience methods so you can just start writing `A.e(3).g(&quot;foo&quot;).a(23).build()` or even just `A.build()`.","body":"@JBNizet The builder can do that anyway; right now, its <code>build()</code> method is just calling A&#39;s ctor, but it could do anything it wants. I took your suggestions and made A&#39;s ctor private and removed the getters, and I also added convenience methods so you can just start writing <code>A.e(3).g(&quot;foo&quot;).a(23).build()</code> or even just <code>A.build()</code>."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1341700479,"post_id":11379011,"comment_id":14996481,"body_markdown":"If you make the constructor of A public, it allows creating an A from the builder, instead of letting the builder choose to build an Abis, because it&#39;s the appropriate subclass to create. In other words, you can&#39;t prevent a client doing `A a = new A(builder);` instead of `A a = builder.build();`","body":"If you make the constructor of A public, it allows creating an A from the builder, instead of letting the builder choose to build an Abis, because it&#39;s the appropriate subclass to create. In other words, you can&#39;t prevent a client doing <code>A a = new A(builder);</code> instead of <code>A a = builder.build();</code>"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1341700660,"post_id":11379011,"comment_id":14996510,"body_markdown":"@JBNizet Actually, even with a private constructor, the inner class can still call it. That&#39;s what I&#39;m doing in the current version, above, and it compiles.","body":"@JBNizet Actually, even with a private constructor, the inner class can still call it. That&#39;s what I&#39;m doing in the current version, above, and it compiles."},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1341701070,"post_id":11379011,"comment_id":14996592,"body_markdown":"@DavidConrad: You misunderstand me. I mean make the builder&#39;s fields public so the building code can set them directly. So `ABuilder ab = new ABuilder(); ab.foo = 7; A a = ab.build();`","body":"@DavidConrad: You misunderstand me. I mean make the builder&#39;s fields public so the building code can set them directly. So <code>ABuilder ab = new ABuilder(); ab.foo = 7; A a = ab.build();</code>"},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1341701238,"post_id":11379011,"comment_id":14996621,"body_markdown":"@DavidConrad: And i think you misunderstand JB, too. He is suggesting making A&#39;s constructor private to prevent outside code from calling it, to force use of the builder.","body":"@DavidConrad: And i think you misunderstand JB, too. He is suggesting making A&#39;s constructor private to prevent outside code from calling it, to force use of the builder."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1341701282,"post_id":11379011,"comment_id":14996625,"body_markdown":"@TomAnderson Ah, okay, I see. I wouldn&#39;t prefer that to a fluent API since I wouldn&#39;t want to break the object construction over multiple lines unnecessarily (if you were just calling a constructor, that would typically be on one line, and that&#39;s what we&#39;re trying to replace), but that is certainly another option. Cheers!","body":"@TomAnderson Ah, okay, I see. I wouldn&#39;t prefer that to a fluent API since I wouldn&#39;t want to break the object construction over multiple lines unnecessarily (if you were just calling a constructor, that would typically be on one line, and that&#39;s what we&#39;re trying to replace), but that is certainly another option. Cheers!"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1341701329,"post_id":11379011,"comment_id":14996631,"body_markdown":"@TomAnderson I did make A&#39;s constructor private. See the edited answer.","body":"@TomAnderson I did make A&#39;s constructor private. See the edited answer."},{"owner":{"account_id":1592958,"reputation":989,"user_id":1475878,"accept_rate":62,"display_name":"zggame"},"score":0,"creation_date":1341802815,"post_id":11379011,"comment_id":15012417,"body_markdown":"Thanks. In some sense, this builder/param class is a varient of my propose 3, but the fluent syntax is very nice.  Too bad there is no magic cure for the problem.","body":"Thanks. In some sense, this builder/param class is a varient of my propose 3, but the fluent syntax is very nice.  Too bad there is no magic cure for the problem."},{"owner":{"account_id":14965,"reputation":55597,"user_id":31158,"accept_rate":89,"display_name":"Jord&#227;o"},"score":1,"creation_date":1341842981,"post_id":11379011,"comment_id":15024913,"body_markdown":"@zggame: the &quot;magic cure&quot;, if you&#39;re willing to go that far, would be to use _another language_ that has e.g. named and default arguments, like [Scala](http://www.scala-lang.org/node/2075).","body":"@zggame: the &quot;magic cure&quot;, if you&#39;re willing to go that far, would be to use <i>another language</i> that has e.g. named and default arguments, like <a href=\"http://www.scala-lang.org/node/2075\" rel=\"nofollow noreferrer\">Scala</a>."},{"owner":{"account_id":1592958,"reputation":989,"user_id":1475878,"accept_rate":62,"display_name":"zggame"},"score":0,"creation_date":1443206570,"post_id":11379011,"comment_id":53416133,"body_markdown":"Just come across this article http://jlordiales.me/2012/12/13/the-builder-pattern-in-practice/     .  It has an almost same idea, except putting the builder method in the builder inner class, which is semantically clearer in my mind.","body":"Just come across this article <a href=\"http://jlordiales.me/2012/12/13/the-builder-pattern-in-practice/\" rel=\"nofollow noreferrer\">jlordiales.me/2012/12/13/the-builder-pattern-in-practice</a>     .  It has an almost same idea, except putting the builder method in the builder inner class, which is semantically clearer in my mind."}],"tags":[],"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"comment_count":15,"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1341700090,"creation_date":1341698770,"answer_id":11379011,"question_id":11378932,"body_markdown":"I would use a combination of a parameter class and a fluent builder API for creating the parameter:\r\n\r\n    public class A {\r\n        private final int a;\r\n        private final short b;\r\n        private final double e;\r\n        private final String g;\r\n    \r\n        public static class Aparam {\r\n            private int a = 1;\r\n            private short b = 2;\r\n            private double e = 3.141593;\r\n            private String g = &quot;NONE&quot;;\r\n    \r\n            public Aparam a(int a) {\r\n                this.a = a;\r\n                return this;\r\n            }\r\n    \r\n            public Aparam b(short b) {\r\n                this.b = b;\r\n                return this;\r\n            }\r\n    \r\n            public Aparam e(double e) {\r\n                this.e = e;\r\n                return this;\r\n            }\r\n    \r\n            public Aparam g(String g) {\r\n                this.g = g;\r\n                return this;\r\n            }\r\n    \r\n            public A build() {\r\n                return new A(this);\r\n            }\r\n        }\r\n    \r\n        public static Aparam a(int a) {\r\n            return new Aparam().a(a);\r\n        }\r\n    \r\n        public static Aparam b(short b) {\r\n            return new Aparam().b(b);\r\n        }\r\n    \r\n        public static Aparam e(double e) {\r\n            return new Aparam().e(e);\r\n        }\r\n    \r\n        public static Aparam g(String g) {\r\n            return new Aparam().g(g);\r\n        }\r\n    \r\n        public static A build() {\r\n            return new Aparam().build();\r\n        }\r\n    \r\n        private A(Aparam p) {\r\n            this.a = p.a;\r\n            this.b = p.b;\r\n            this.e = p.e;\r\n            this.g = p.g;\r\n        }\r\n    \r\n        @Override public String toString() {\r\n            return &quot;{a=&quot; + a + &quot;,b=&quot; + b + &quot;,e=&quot; + e + &quot;,g=&quot; + g + &quot;}&quot;;\r\n        }\r\n    }\r\n\r\nThen create instances of A like this:\r\n\r\n    A a1 = A.build();\r\n    A a2 = A.a(7).e(17.5).build();\r\n    A a3 = A.b((short)42).e(2.218282).g(&quot;fluent&quot;).build();\r\n\r\nClass A is immutable, the parameters are optional, and the interface is fluent.\r\n\r\n\r\n","title":"Java constructor of &quot;immutable class&quot; with many fields with default values?","body":"<p>I would use a combination of a parameter class and a fluent builder API for creating the parameter:</p>\n\n<pre><code>public class A {\n    private final int a;\n    private final short b;\n    private final double e;\n    private final String g;\n\n    public static class Aparam {\n        private int a = 1;\n        private short b = 2;\n        private double e = 3.141593;\n        private String g = \"NONE\";\n\n        public Aparam a(int a) {\n            this.a = a;\n            return this;\n        }\n\n        public Aparam b(short b) {\n            this.b = b;\n            return this;\n        }\n\n        public Aparam e(double e) {\n            this.e = e;\n            return this;\n        }\n\n        public Aparam g(String g) {\n            this.g = g;\n            return this;\n        }\n\n        public A build() {\n            return new A(this);\n        }\n    }\n\n    public static Aparam a(int a) {\n        return new Aparam().a(a);\n    }\n\n    public static Aparam b(short b) {\n        return new Aparam().b(b);\n    }\n\n    public static Aparam e(double e) {\n        return new Aparam().e(e);\n    }\n\n    public static Aparam g(String g) {\n        return new Aparam().g(g);\n    }\n\n    public static A build() {\n        return new Aparam().build();\n    }\n\n    private A(Aparam p) {\n        this.a = p.a;\n        this.b = p.b;\n        this.e = p.e;\n        this.g = p.g;\n    }\n\n    @Override public String toString() {\n        return \"{a=\" + a + \",b=\" + b + \",e=\" + e + \",g=\" + g + \"}\";\n    }\n}\n</code></pre>\n\n<p>Then create instances of A like this:</p>\n\n<pre><code>A a1 = A.build();\nA a2 = A.a(7).e(17.5).build();\nA a3 = A.b((short)42).e(2.218282).g(\"fluent\").build();\n</code></pre>\n\n<p>Class A is immutable, the parameters are optional, and the interface is fluent.</p>\n"},{"tags":[],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1341702112,"creation_date":1341702112,"answer_id":11379333,"question_id":11378932,"body_markdown":"Having many fields could be an indication that one class does too much. \r\n\r\nMaybe you can split the class up in several immutable classes and pass instances of these classes to the constructors of the other classes. This would limit the number of constructors.","title":"Java constructor of &quot;immutable class&quot; with many fields with default values?","body":"<p>Having many fields could be an indication that one class does too much. </p>\n\n<p>Maybe you can split the class up in several immutable classes and pass instances of these classes to the constructors of the other classes. This would limit the number of constructors.</p>\n"},{"comments":[{"owner":{"account_id":1592958,"reputation":989,"user_id":1475878,"accept_rate":62,"display_name":"zggame"},"score":0,"creation_date":1341802915,"post_id":11379396,"comment_id":15012434,"body_markdown":"Nice.  I love the static typing. Good compromise, I might be able to use it for another case where we have a giant Map&lt;String,object&gt;.  Thanks.","body":"Nice.  I love the static typing. Good compromise, I might be able to use it for another case where we have a giant Map&lt;String,object&gt;.  Thanks."},{"owner":{"account_id":318404,"reputation":347,"user_id":635617,"display_name":"William Jarvis"},"score":0,"creation_date":1605198545,"post_id":11379396,"comment_id":114583516,"body_markdown":"You don&#39;t actually need the Class instances to cast on the way out as type safety is enforced with the put method requiring the property type and value to match. An unchecked cast can be used instead without compromising safety. The advantage of omitting using the class object is that it works for objects with generics such as List properly where you cannot provide a type safe class object.","body":"You don&#39;t actually need the Class instances to cast on the way out as type safety is enforced with the put method requiring the property type and value to match. An unchecked cast can be used instead without compromising safety. The advantage of omitting using the class object is that it works for objects with generics such as List properly where you cannot provide a type safe class object."}],"tags":[],"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1341706900,"creation_date":1341702847,"answer_id":11379396,"question_id":11378932,"body_markdown":"This is only a semi-serious suggestion, but we can modify [mikera&#39;s answer][1] to be typesafe.\r\n\r\nSay we have:\r\n\r\n    public class A {\r\n        private final String foo;\r\n        private final int bar;\r\n        private final Date baz;\r\n    }\r\n\r\nThen we write:\r\n\r\n    public abstract class AProperty&lt;T&gt; {\r\n        public static final AProperty&lt;String&gt; FOO = new AProperty&lt;String&gt;(String.class) {};\r\n        public static final AProperty&lt;Integer&gt; BAR = new AProperty&lt;Integer&gt;(Integer.class) {};\r\n        public static final AProperty&lt;Date&gt; BAZ = new AProperty&lt;Date&gt;(Date.class) {};\r\n        \r\n        public final Class&lt;T&gt; propertyClass;\r\n        \r\n        private AProperty(Class&lt;T&gt; propertyClass) {\r\n        \tthis.propertyClass = propertyClass;\r\n        }\r\n    }\r\n\r\nAnd:\r\n\r\n    public class APropertyMap {\r\n        private final Map&lt;AProperty&lt;?&gt;, Object&gt; properties = new HashMap&lt;AProperty&lt;?&gt;, Object&gt;();\r\n        \r\n        public &lt;T&gt; void put(AProperty&lt;T&gt; property, T value) {\r\n            properties.put(property, value);\r\n        }\r\n        public &lt;T&gt; T get(AProperty&lt;T&gt; property) {\r\n            return property.propertyClass.cast(properties.get(property));\r\n        }\r\n    }\r\n\r\nAficionados of advanced design patterns and/or obscure Java tricks will recognise this as a typesafe heterogeneous container. Just be grateful i didn&#39;t use `getGenericSuperclass()` as well.\r\n\r\nThen, back in the target class:\r\n\r\n    public A(APropertyMap properties) {\r\n        foo = properties.get(AProperty.FOO);\r\n        bar = properties.get(AProperty.BAR);\r\n        baz = properties.get(AProperty.BAZ);\r\n    }\r\n\r\nThis is all used like this:\r\n\r\n    APropertyMap properties = new APropertyMap();\r\n    properties.put(AProperty.FOO, &quot;skidoo&quot;);\r\n    properties.put(AProperty.BAR, 23);\r\n    A a = new A(properties);\r\n\r\nJust for the lulz, we can even give the map a fluent interface:\r\n\r\n    public &lt;T&gt; APropertyMap with(AProperty&lt;T&gt; property, T value) {\r\n        put(property, value);\r\n        return this;\r\n    }\r\n\r\nWhich lets callers write:\r\n\r\n    A a = new A(new APropertyMap()\r\n        .with(AProperty.FOO, &quot;skidoo&quot;)\r\n        .with(AProperty.BAR, 23));\r\n\r\nThere are lots of little improvements you could make to this. The types in `AProperty` could be handled more elegantly. `APropertyMap` could have a static factory instead of a constructor, allowing a more fluent style of code, if you&#39;re into that sort of thing. `APropertyMap` could grow a `build` method which calls `A`&#39;s constructor, essentially turning it into a builder.\r\n\r\nYou can also make some of these objects rather more generic. `AProperty` and `APropertyMap` could have generic base classes which did the functional bits, with very simple `A`-specific subclasses.\r\n\r\nIf you&#39;re feeling particularly enterprise, and your domain objects were JPA2 entities, then you could use the metamodel attributes as the property objects. This leaves the map/builder doing a bit more work, but it&#39;s still pretty simple; i have a generic builder working in 45 lines, with a subclass per entity containing a single one-line method.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/11378969/116639\r\n\r\n\r\n","title":"Java constructor of &quot;immutable class&quot; with many fields with default values?","body":"<p>This is only a semi-serious suggestion, but we can modify <a href=\"https://stackoverflow.com/a/11378969/116639\">mikera's answer</a> to be typesafe.</p>\n\n<p>Say we have:</p>\n\n<pre><code>public class A {\n    private final String foo;\n    private final int bar;\n    private final Date baz;\n}\n</code></pre>\n\n<p>Then we write:</p>\n\n<pre><code>public abstract class AProperty&lt;T&gt; {\n    public static final AProperty&lt;String&gt; FOO = new AProperty&lt;String&gt;(String.class) {};\n    public static final AProperty&lt;Integer&gt; BAR = new AProperty&lt;Integer&gt;(Integer.class) {};\n    public static final AProperty&lt;Date&gt; BAZ = new AProperty&lt;Date&gt;(Date.class) {};\n\n    public final Class&lt;T&gt; propertyClass;\n\n    private AProperty(Class&lt;T&gt; propertyClass) {\n        this.propertyClass = propertyClass;\n    }\n}\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>public class APropertyMap {\n    private final Map&lt;AProperty&lt;?&gt;, Object&gt; properties = new HashMap&lt;AProperty&lt;?&gt;, Object&gt;();\n\n    public &lt;T&gt; void put(AProperty&lt;T&gt; property, T value) {\n        properties.put(property, value);\n    }\n    public &lt;T&gt; T get(AProperty&lt;T&gt; property) {\n        return property.propertyClass.cast(properties.get(property));\n    }\n}\n</code></pre>\n\n<p>Aficionados of advanced design patterns and/or obscure Java tricks will recognise this as a typesafe heterogeneous container. Just be grateful i didn't use <code>getGenericSuperclass()</code> as well.</p>\n\n<p>Then, back in the target class:</p>\n\n<pre><code>public A(APropertyMap properties) {\n    foo = properties.get(AProperty.FOO);\n    bar = properties.get(AProperty.BAR);\n    baz = properties.get(AProperty.BAZ);\n}\n</code></pre>\n\n<p>This is all used like this:</p>\n\n<pre><code>APropertyMap properties = new APropertyMap();\nproperties.put(AProperty.FOO, \"skidoo\");\nproperties.put(AProperty.BAR, 23);\nA a = new A(properties);\n</code></pre>\n\n<p>Just for the lulz, we can even give the map a fluent interface:</p>\n\n<pre><code>public &lt;T&gt; APropertyMap with(AProperty&lt;T&gt; property, T value) {\n    put(property, value);\n    return this;\n}\n</code></pre>\n\n<p>Which lets callers write:</p>\n\n<pre><code>A a = new A(new APropertyMap()\n    .with(AProperty.FOO, \"skidoo\")\n    .with(AProperty.BAR, 23));\n</code></pre>\n\n<p>There are lots of little improvements you could make to this. The types in <code>AProperty</code> could be handled more elegantly. <code>APropertyMap</code> could have a static factory instead of a constructor, allowing a more fluent style of code, if you're into that sort of thing. <code>APropertyMap</code> could grow a <code>build</code> method which calls <code>A</code>'s constructor, essentially turning it into a builder.</p>\n\n<p>You can also make some of these objects rather more generic. <code>AProperty</code> and <code>APropertyMap</code> could have generic base classes which did the functional bits, with very simple <code>A</code>-specific subclasses.</p>\n\n<p>If you're feeling particularly enterprise, and your domain objects were JPA2 entities, then you could use the metamodel attributes as the property objects. This leaves the map/builder doing a bit more work, but it's still pretty simple; i have a generic builder working in 45 lines, with a subclass per entity containing a single one-line method.</p>\n"}],"owner":{"account_id":1592958,"reputation":989,"user_id":1475878,"accept_rate":62,"display_name":"zggame"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5183,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":11379011,"answer_count":5,"score":22,"last_activity_date":1696622337,"creation_date":1341698040,"question_id":11378932,"body_markdown":"I have a class with lots of fields. They should basically be set at the constructor phase and never change. Semantically the class then is an immutable one.\r\n\r\n    public class A{\r\n        final int a;\r\n        final short b;\r\n        final double e;\r\n        final String f;\r\n        final String g;\r\n        //and more\r\n    }\r\n\r\nThe problem is that normally these fields have default values and therefore I do not want to always burden the user with a constructor with all of them.  Most time, they just need to set a couple of them.   There are a couple of ways to solve this:\r\n\r\n 1. I would need lots  of constructor with different signature.   \r\n 2. Create a bunch of set method of these field and only set those non-default value.  But this somehow indicate a different semantics other than immutable nature. \r\n 3. Create a new parameter class that is mutable and use that class as constructor.\r\n\r\nNone of that is totally satisfactory.  Is there any other approach?  Thanks. \r\nOne way \r\n","title":"Java constructor of &quot;immutable class&quot; with many fields with default values?","body":"<p>I have a class with lots of fields. They should basically be set at the constructor phase and never change. Semantically the class then is an immutable one.</p>\n<pre><code>public class A{\n    final int a;\n    final short b;\n    final double e;\n    final String f;\n    final String g;\n    //and more\n}\n</code></pre>\n<p>The problem is that normally these fields have default values and therefore I do not want to always burden the user with a constructor with all of them.  Most time, they just need to set a couple of them.   There are a couple of ways to solve this:</p>\n<ol>\n<li>I would need lots  of constructor with different signature.</li>\n<li>Create a bunch of set method of these field and only set those non-default value.  But this somehow indicate a different semantics other than immutable nature.</li>\n<li>Create a new parameter class that is mutable and use that class as constructor.</li>\n</ol>\n<p>None of that is totally satisfactory.  Is there any other approach?  Thanks.\nOne way</p>\n"},{"tags":["java","spring-boot","elasticsearch","spring-data","spring-data-elasticsearch"],"comments":[{"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"score":0,"creation_date":1696592818,"post_id":77232800,"comment_id":136176357,"body_markdown":"Why do you want to change this size? Do you want to have less calls to Elasticsearch in the background? Or do you want to limit the size of elements returned?","body":"Why do you want to change this size? Do you want to have less calls to Elasticsearch in the background? Or do you want to limit the size of elements returned?"},{"owner":{"account_id":2566818,"reputation":459,"user_id":4937528,"accept_rate":40,"display_name":"Seanimus"},"score":0,"creation_date":1696601150,"post_id":77232800,"comment_id":136178120,"body_markdown":"I&#39;d like to have fewer calls to Elasticsearch.","body":"I&#39;d like to have fewer calls to Elasticsearch."}],"answers":[{"comments":[{"owner":{"account_id":2566818,"reputation":459,"user_id":4937528,"accept_rate":40,"display_name":"Seanimus"},"score":0,"creation_date":1696510852,"post_id":77234077,"comment_id":136164297,"body_markdown":"Thanks for your input. However, I am specifically trying to adjust the scroll generated via repositories. If I can&#39;t figure it out, then I may have to do what you suggest and use an entirely different query type like Pages, but I&#39;d prefer to get repositories working satisfactorily if possible.","body":"Thanks for your input. However, I am specifically trying to adjust the scroll generated via repositories. If I can&#39;t figure it out, then I may have to do what you suggest and use an entirely different query type like Pages, but I&#39;d prefer to get repositories working satisfactorily if possible."}],"tags":[],"owner":{"account_id":3755777,"reputation":499,"user_id":3122175,"accept_rate":92,"display_name":"D.T"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696476221,"creation_date":1696476221,"answer_id":77234077,"question_id":77232800,"body_markdown":"How about trying to use `PageRequest` as guided in the [doc][1].\r\n\r\n```\r\nPage&lt;User&gt; users = repository.findAll(PageRequest.of(1, 20));\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/","title":"Set query size when performing scroll request via Spring Data Elasticsearch Repositories","body":"<p>How about trying to use <code>PageRequest</code> as guided in the <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/\" rel=\"nofollow noreferrer\">doc</a>.</p>\n<pre><code>Page&lt;User&gt; users = repository.findAll(PageRequest.of(1, 20));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696621871,"creation_date":1696621871,"answer_id":77247055,"question_id":77232800,"body_markdown":"In the current release (5.1) the `Pageable` is not taken into account for repository methods returning a `Stream&lt;E&gt;`, there always the default size of 500 is used.\r\n\r\nI created [an issue](https://github.com/spring-projects/spring-data-elasticsearch/issues/2720) for this, it&#39;s implemented and merged and will be contained from 5.2-RC1 on.","title":"Set query size when performing scroll request via Spring Data Elasticsearch Repositories","body":"<p>In the current release (5.1) the <code>Pageable</code> is not taken into account for repository methods returning a <code>Stream&lt;E&gt;</code>, there always the default size of 500 is used.</p>\n<p>I created <a href=\"https://github.com/spring-projects/spring-data-elasticsearch/issues/2720\" rel=\"nofollow noreferrer\">an issue</a> for this, it's implemented and merged and will be contained from 5.2-RC1 on.</p>\n"}],"owner":{"account_id":2566818,"reputation":459,"user_id":4937528,"accept_rate":40,"display_name":"Seanimus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77247055,"answer_count":2,"score":0,"last_activity_date":1696621871,"creation_date":1696451626,"question_id":77232800,"body_markdown":"I have a Spring Boot application and am using spring-data-elasticsearch-5.1.2 to create a `scroll` request to fetch large sets of &quot;book&quot;s from elasticsearch. The setup looks something like this:\r\n\r\n```java\r\npublic interface BookRepository extends ElasticsearchRepository&lt;Book, String&gt; {\r\n\r\n   Stream&lt;Book&gt; findByAuthorName(String authorName);\r\n\r\n}\r\n\r\n// and client code invokes like\r\ntry (Stream&lt;Book&gt; books = bookRepository.findByAuthor(authorName)) {\r\n   return books.toList();\r\n}\r\ncatch (Exception e) {\r\n   // handle\r\n}\r\n\r\n```\r\n\r\nThis does work, but by default the scroll request size is 500 (i.e. the generated query has `size: 500`). I&#39;d like to be able to change this value to fetch larger result sets, but am unsure how to do so.\r\nI&#39;ve tried updating the repository method to accept a `Pageable` and then invoking with a larger page size. E.g.\r\n\r\n```java\r\npublic interface BookRepository extends ElasticsearchRepository&lt;Book, String&gt; {\r\n   // Add Pageable parameter\r\n   Stream&lt;Book&gt; findByAuthorName(String authorName, Pageable page);\r\n\r\n}\r\n\r\n// Pass pageable with larger size\r\ntry (Stream&lt;Book&gt; books = bookRepository.findByAuthor(authorName, Pageable.ofSize(1_000))) {\r\n   return books.toList();\r\n}\r\ncatch (Exception e) {\r\n   // handle\r\n}\r\n\r\n```\r\n\r\nHowever, the generated query doesn&#39;t seem to be impacted.\r\n\r\n```json\r\n\r\n{\r\n  &quot;_source&quot;: { ... },\r\n  &quot;from&quot;: 0,\r\n  &quot;query&quot;: { ... },\r\n  &quot;size&quot;: 500, &lt;----- HOW TO CHANGE?\r\n  &quot;track_scores&quot;: false,\r\n  &quot;version&quot;: true\r\n}\r\n\r\n```\r\n\r\n\r\nHow can I change the query size? \r\n\r\nEdit: \r\nAdding relevant docs about scrolling with repositories: \r\n- https://docs.spring.io/spring-data/elasticsearch/docs/5.1.2/reference/html/#elasticsearch.scroll\r\n- https://docs.spring.io/spring-data/elasticsearch/docs/5.1.2/reference/html/#repositories.query-streaming","title":"Set query size when performing scroll request via Spring Data Elasticsearch Repositories","body":"<p>I have a Spring Boot application and am using spring-data-elasticsearch-5.1.2 to create a <code>scroll</code> request to fetch large sets of &quot;book&quot;s from elasticsearch. The setup looks something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface BookRepository extends ElasticsearchRepository&lt;Book, String&gt; {\n\n   Stream&lt;Book&gt; findByAuthorName(String authorName);\n\n}\n\n// and client code invokes like\ntry (Stream&lt;Book&gt; books = bookRepository.findByAuthor(authorName)) {\n   return books.toList();\n}\ncatch (Exception e) {\n   // handle\n}\n\n</code></pre>\n<p>This does work, but by default the scroll request size is 500 (i.e. the generated query has <code>size: 500</code>). I'd like to be able to change this value to fetch larger result sets, but am unsure how to do so.\nI've tried updating the repository method to accept a <code>Pageable</code> and then invoking with a larger page size. E.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface BookRepository extends ElasticsearchRepository&lt;Book, String&gt; {\n   // Add Pageable parameter\n   Stream&lt;Book&gt; findByAuthorName(String authorName, Pageable page);\n\n}\n\n// Pass pageable with larger size\ntry (Stream&lt;Book&gt; books = bookRepository.findByAuthor(authorName, Pageable.ofSize(1_000))) {\n   return books.toList();\n}\ncatch (Exception e) {\n   // handle\n}\n\n</code></pre>\n<p>However, the generated query doesn't seem to be impacted.</p>\n<pre class=\"lang-json prettyprint-override\"><code>\n{\n  &quot;_source&quot;: { ... },\n  &quot;from&quot;: 0,\n  &quot;query&quot;: { ... },\n  &quot;size&quot;: 500, &lt;----- HOW TO CHANGE?\n  &quot;track_scores&quot;: false,\n  &quot;version&quot;: true\n}\n\n</code></pre>\n<p>How can I change the query size?</p>\n<p>Edit:\nAdding relevant docs about scrolling with repositories:</p>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/5.1.2/reference/html/#elasticsearch.scroll\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/elasticsearch/docs/5.1.2/reference/html/#elasticsearch.scroll</a></li>\n<li><a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/5.1.2/reference/html/#repositories.query-streaming\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/elasticsearch/docs/5.1.2/reference/html/#repositories.query-streaming</a></li>\n</ul>\n"},{"tags":["java","android","math","input","textview"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1696571468,"post_id":77242058,"comment_id":136172693,"body_markdown":"Please share stacktrace from the logcat","body":"Please share stacktrace from the logcat"}],"answers":[{"comments":[{"owner":{"account_id":21319273,"reputation":1,"user_id":15692701,"display_name":"Umar"},"score":0,"creation_date":1696585411,"post_id":77242122,"comment_id":136175015,"body_markdown":"Num1 and Num2 are random numbers from Question, which appear as &#39;Num1 + Num2 = ?&#39;.  User have to add them and give answer. They are working fine. Problem is with Ans which is get_user_ans. If answer is empty it should toast but above solution is not working.","body":"Num1 and Num2 are random numbers from Question, which appear as &#39;Num1 + Num2 = ?&#39;.  User have to add them and give answer. They are working fine. Problem is with Ans which is get_user_ans. If answer is empty it should toast but above solution is not working."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1696586025,"post_id":77242122,"comment_id":136175124,"body_markdown":"There is the same. See my updated answer","body":"There is the same. See my updated answer"},{"owner":{"account_id":21319273,"reputation":1,"user_id":15692701,"display_name":"Umar"},"score":0,"creation_date":1696606093,"post_id":77242122,"comment_id":136179152,"body_markdown":"It worked with slight adjustment. Thank you soo much  &quot; Integer.parseInt(&quot;&quot;.equals(Ans.getText().toString()) ? String.valueOf(0) : Ans.getText().toString());  &quot;","body":"It worked with slight adjustment. Thank you soo much  &quot; Integer.parseInt(&quot;&quot;.equals(Ans.getText().toString()) ? String.valueOf(0) : Ans.getText().toString());  &quot;"}],"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696621685,"creation_date":1696571606,"answer_id":77242122,"question_id":77242058,"body_markdown":"An empty input cannot be passed to a number:\r\n\r\n    Integer.parseInt(Ans.getText().toString());\r\nshould be something like:\r\n\r\n    Integer.parseInt(&quot;&quot;.equals(Ans.getText().toString()) ? &quot;0&quot; : Ans.getText().toString());","title":"No input value crashes the adnroid app when Answer button is pressed in Math quiz game - TextView","body":"<p>An empty input cannot be passed to a number:</p>\n<pre><code>Integer.parseInt(Ans.getText().toString());\n</code></pre>\n<p>should be something like:</p>\n<pre><code>Integer.parseInt(&quot;&quot;.equals(Ans.getText().toString()) ? &quot;0&quot; : Ans.getText().toString());\n</code></pre>\n"}],"owner":{"account_id":21319273,"reputation":1,"user_id":15692701,"display_name":"Umar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1696621685,"creation_date":1696570316,"question_id":77242058,"body_markdown":"I am new to making android apps. I am making a math quiz game and everything is working fine except the app crashes when the answer button is pressed without any input value. I am making it in TextView. I have found soo many answers here but they are all related to EditText mostly regarding calculator app. Here is my code please tell me what I am doing wrong. \r\n\r\nI have used \r\n````\r\nif (Ans.getText().toString().equals(&quot;&quot;)){\r\n            Toast.makeText(this, &quot;Enter Answer&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n````\r\nbut its not working and app still crashes. \r\n\r\n\r\n````\r\nimport android.annotation.SuppressLint;\r\nimport android.app.AlertDialog;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport java.util.Random;\r\n\r\npublic class Level0 extends AppCompatActivity {\r\n\r\n    TextView Num1,Num2,Ans,Result;\r\n\r\n    @SuppressLint(&quot;MissingInflatedId&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_level0);\r\n\r\n        Num1 = findViewById(R.id.Num1);\r\n        Num2 = findViewById(R.id.Num2);\r\n        Ans = findViewById(R.id.Ans);\r\n        Result = findViewById(R.id.Result);\r\n\r\n\r\n        run_reset();\r\n    }\r\n\r\n    void run_reset(){\r\n        Random myRandom = new Random();\r\n\r\n        int num1 = myRandom.nextInt(101);\r\n        int num2 = myRandom.nextInt(101);\r\n\r\n        Num1.setText(&quot;&quot;+num1);\r\n        Num2.setText(&quot;&quot;+num2);\r\n        Ans.setText(&quot;&quot;);\r\n        Result.setText(&quot;&quot;);\r\n    }\r\n\r\n    void printAns(String a){\r\n        String text = Ans.getText().toString();\r\n        Ans.setText(text+a);\r\n    }\r\n\r\n    public void one(View view) { printAns(&quot;1&quot;); }\r\n\r\n    public void two(View view) {\r\n        printAns(&quot;2&quot;);\r\n    }\r\n\r\n    public void three(View view) {\r\n        printAns(&quot;3&quot;);\r\n    }\r\n\r\n    public void four(View view) {\r\n        printAns(&quot;4&quot;);\r\n    }\r\n\r\n    public void five(View view) {\r\n        printAns(&quot;5&quot;);\r\n    }\r\n\r\n    public void six(View view) {\r\n        printAns(&quot;6&quot;);\r\n    }\r\n\r\n    public void seven(View view) {\r\n        printAns(&quot;7&quot;);\r\n    }\r\n\r\n    public void eight(View view) {\r\n        printAns(&quot;8&quot;);\r\n    }\r\n\r\n    public void nine(View view) {\r\n        printAns(&quot;9&quot;);\r\n    }\r\n\r\n    public void zero(View view) {\r\n        printAns(&quot;0&quot;);\r\n    }\r\n\r\n    public void clear(View view) {\r\n        if (view.getId()==R.id.clear);\r\n        Ans.setText(&quot;&quot;);\r\n    }\r\n\r\n    public void submit(View view) {\r\n        int num1 = Integer.parseInt(Num1.getText().toString());\r\n        int num2 = Integer.parseInt(Num2.getText().toString());\r\n        int ans = num1 + num2;\r\n\r\n        int get_user_ans = Integer.parseInt(Ans.getText().toString());\r\n\r\n        if (Ans.getText().toString().equals(&quot;&quot;)){\r\n            Toast.makeText(this, &quot;Enter Answer&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n        else if (ans == get_user_ans) {\r\n            Result.setText(&quot;CORRECT!!&quot;);\r\n            Result.setTextColor(Color.GREEN);\r\n            startActivity(new Intent(this,Level1.class));\r\n        }\r\n\r\n        else {\r\n            Result.setText(&quot;INCORRECT!!&quot;);\r\n            Result.setTextColor(Color.RED);\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n````\r\n\r\n\r\n\r\n\r\n````\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;@drawable/background33&quot;\r\n    tools:context=&quot;.Level0&quot;&gt;\r\n\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/Top&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:gravity=&quot;center&quot;&gt;\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;SOLVE IT&quot;\r\n            android:textSize=&quot;30sp&quot;/&gt;\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Enter The Correct Answer&quot;\r\n            android:paddingBottom=&quot;15dp&quot;/&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;horizontal&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:background=&quot;#ECB899&quot;&gt;\r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;50&quot;\r\n                android:textSize=&quot;25sp&quot;\r\n                android:paddingRight=&quot;10dp&quot;\r\n                android:id=&quot;@+id/Num1&quot;/&gt;\r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;+&quot;\r\n                android:textSize=&quot;25sp&quot;\r\n                android:paddingRight=&quot;10dp&quot;/&gt;\r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;75&quot;\r\n                android:textSize=&quot;25sp&quot;\r\n                android:id=&quot;@+id/Num2&quot;/&gt;\r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;=&quot;\r\n                android:textSize=&quot;25sp&quot;\r\n                android:paddingLeft=&quot;10dp&quot;\r\n                android:paddingRight=&quot;10dp&quot;/&gt;\r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;?&quot;\r\n                android:textSize=&quot;25sp&quot;/&gt;\r\n        &lt;/LinearLayout&gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;ANSWER:&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            android:paddingTop=&quot;20dp&quot;/&gt;\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;30&quot;\r\n            android:textSize=&quot;60sp&quot;\r\n            android:id=&quot;@+id/Ans&quot;/&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;horizontal&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:background=&quot;#FFECB899&quot;&gt;\r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;CORRECT!!&quot;\r\n                android:textSize=&quot;30sp&quot;\r\n                android:id=&quot;@+id/Result&quot;/&gt;\r\n\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/Earnings&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_below=&quot;@+id/Top&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:layout_marginStart=&quot;10dp&quot;\r\n        android:layout_marginLeft=&quot;10dp&quot;\r\n        android:layout_marginTop=&quot;40dp&quot;\r\n        android:layout_marginEnd=&quot;10dp&quot;\r\n        android:layout_marginRight=&quot;10dp&quot;\r\n        android:layout_marginBottom=&quot;10dp&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:textAlignment=&quot;textStart&quot;\r\n            android:textSize=&quot;30sp&quot;\r\n            android:text=&quot;\\n YOUR BALANCE: 0Rs&quot;\r\n            /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/Buttons&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:padding=&quot;10dp&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:weightSum=&quot;3&quot;&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;1&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;one&quot;/&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;2&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;two&quot;/&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;3&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;three&quot;/&gt;\r\n        &lt;/LinearLayout&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:weightSum=&quot;3&quot;&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;4&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;four&quot;/&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;5&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;five&quot;/&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;6&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;six&quot;/&gt;\r\n        &lt;/LinearLayout&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:weightSum=&quot;3&quot;&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;7&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;seven&quot;/&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;8&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;eight&quot;/&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;9&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;nine&quot;/&gt;\r\n        &lt;/LinearLayout&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:weightSum=&quot;3&quot;&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;CLR&quot;\r\n                android:id=&quot;@+id/clear&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;clear&quot;/&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;0&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;zero&quot;/&gt;\r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:backgroundTint=&quot;#F44336&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;ANS&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:onClick=&quot;submit&quot;/&gt;\r\n        &lt;/LinearLayout&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n&lt;/RelativeLayout&gt;``\r\n````\r\n\r\n\r\n","title":"No input value crashes the adnroid app when Answer button is pressed in Math quiz game - TextView","body":"<p>I am new to making android apps. I am making a math quiz game and everything is working fine except the app crashes when the answer button is pressed without any input value. I am making it in TextView. I have found soo many answers here but they are all related to EditText mostly regarding calculator app. Here is my code please tell me what I am doing wrong.</p>\n<p>I have used</p>\n<pre><code>if (Ans.getText().toString().equals(&quot;&quot;)){\n            Toast.makeText(this, &quot;Enter Answer&quot;, Toast.LENGTH_SHORT).show();\n        }\n</code></pre>\n<p>but its not working and app still crashes.</p>\n<pre><code>import android.annotation.SuppressLint;\nimport android.app.AlertDialog;\nimport android.content.Intent;\nimport android.graphics.Color;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.util.Random;\n\npublic class Level0 extends AppCompatActivity {\n\n    TextView Num1,Num2,Ans,Result;\n\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_level0);\n\n        Num1 = findViewById(R.id.Num1);\n        Num2 = findViewById(R.id.Num2);\n        Ans = findViewById(R.id.Ans);\n        Result = findViewById(R.id.Result);\n\n\n        run_reset();\n    }\n\n    void run_reset(){\n        Random myRandom = new Random();\n\n        int num1 = myRandom.nextInt(101);\n        int num2 = myRandom.nextInt(101);\n\n        Num1.setText(&quot;&quot;+num1);\n        Num2.setText(&quot;&quot;+num2);\n        Ans.setText(&quot;&quot;);\n        Result.setText(&quot;&quot;);\n    }\n\n    void printAns(String a){\n        String text = Ans.getText().toString();\n        Ans.setText(text+a);\n    }\n\n    public void one(View view) { printAns(&quot;1&quot;); }\n\n    public void two(View view) {\n        printAns(&quot;2&quot;);\n    }\n\n    public void three(View view) {\n        printAns(&quot;3&quot;);\n    }\n\n    public void four(View view) {\n        printAns(&quot;4&quot;);\n    }\n\n    public void five(View view) {\n        printAns(&quot;5&quot;);\n    }\n\n    public void six(View view) {\n        printAns(&quot;6&quot;);\n    }\n\n    public void seven(View view) {\n        printAns(&quot;7&quot;);\n    }\n\n    public void eight(View view) {\n        printAns(&quot;8&quot;);\n    }\n\n    public void nine(View view) {\n        printAns(&quot;9&quot;);\n    }\n\n    public void zero(View view) {\n        printAns(&quot;0&quot;);\n    }\n\n    public void clear(View view) {\n        if (view.getId()==R.id.clear);\n        Ans.setText(&quot;&quot;);\n    }\n\n    public void submit(View view) {\n        int num1 = Integer.parseInt(Num1.getText().toString());\n        int num2 = Integer.parseInt(Num2.getText().toString());\n        int ans = num1 + num2;\n\n        int get_user_ans = Integer.parseInt(Ans.getText().toString());\n\n        if (Ans.getText().toString().equals(&quot;&quot;)){\n            Toast.makeText(this, &quot;Enter Answer&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n        else if (ans == get_user_ans) {\n            Result.setText(&quot;CORRECT!!&quot;);\n            Result.setTextColor(Color.GREEN);\n            startActivity(new Intent(this,Level1.class));\n        }\n\n        else {\n            Result.setText(&quot;INCORRECT!!&quot;);\n            Result.setTextColor(Color.RED);\n        }\n    }\n\n\n\n}\n</code></pre>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@drawable/background33&quot;\n    tools:context=&quot;.Level0&quot;&gt;\n\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/Top&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;\n        android:gravity=&quot;center&quot;&gt;\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;SOLVE IT&quot;\n            android:textSize=&quot;30sp&quot;/&gt;\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Enter The Correct Answer&quot;\n            android:paddingBottom=&quot;15dp&quot;/&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;horizontal&quot;\n            android:gravity=&quot;center&quot;\n            android:background=&quot;#ECB899&quot;&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;50&quot;\n                android:textSize=&quot;25sp&quot;\n                android:paddingRight=&quot;10dp&quot;\n                android:id=&quot;@+id/Num1&quot;/&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;+&quot;\n                android:textSize=&quot;25sp&quot;\n                android:paddingRight=&quot;10dp&quot;/&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;75&quot;\n                android:textSize=&quot;25sp&quot;\n                android:id=&quot;@+id/Num2&quot;/&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;=&quot;\n                android:textSize=&quot;25sp&quot;\n                android:paddingLeft=&quot;10dp&quot;\n                android:paddingRight=&quot;10dp&quot;/&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;?&quot;\n                android:textSize=&quot;25sp&quot;/&gt;\n        &lt;/LinearLayout&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;ANSWER:&quot;\n            android:textSize=&quot;20sp&quot;\n            android:paddingTop=&quot;20dp&quot;/&gt;\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;30&quot;\n            android:textSize=&quot;60sp&quot;\n            android:id=&quot;@+id/Ans&quot;/&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;horizontal&quot;\n            android:gravity=&quot;center&quot;\n            android:background=&quot;#FFECB899&quot;&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;CORRECT!!&quot;\n                android:textSize=&quot;30sp&quot;\n                android:id=&quot;@+id/Result&quot;/&gt;\n\n        &lt;/LinearLayout&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/Earnings&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_below=&quot;@+id/Top&quot;\n        android:orientation=&quot;vertical&quot;\n        android:layout_marginStart=&quot;10dp&quot;\n        android:layout_marginLeft=&quot;10dp&quot;\n        android:layout_marginTop=&quot;40dp&quot;\n        android:layout_marginEnd=&quot;10dp&quot;\n        android:layout_marginRight=&quot;10dp&quot;\n        android:layout_marginBottom=&quot;10dp&quot;&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:textAlignment=&quot;textStart&quot;\n            android:textSize=&quot;30sp&quot;\n            android:text=&quot;\\n YOUR BALANCE: 0Rs&quot;\n            /&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/Buttons&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;\n        android:padding=&quot;10dp&quot;\n        android:layout_alignParentBottom=&quot;true&quot;&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:weightSum=&quot;3&quot;&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;1&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;one&quot;/&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;2&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;two&quot;/&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;3&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;three&quot;/&gt;\n        &lt;/LinearLayout&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:weightSum=&quot;3&quot;&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;4&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;four&quot;/&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;5&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;five&quot;/&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;6&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;six&quot;/&gt;\n        &lt;/LinearLayout&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:weightSum=&quot;3&quot;&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;7&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;seven&quot;/&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;8&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;eight&quot;/&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;9&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;nine&quot;/&gt;\n        &lt;/LinearLayout&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:weightSum=&quot;3&quot;&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;CLR&quot;\n                android:id=&quot;@+id/clear&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;clear&quot;/&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;0&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;zero&quot;/&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:backgroundTint=&quot;#F44336&quot;\n                android:textStyle=&quot;bold&quot;\n                android:text=&quot;ANS&quot;\n                android:textSize=&quot;20sp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:onClick=&quot;submit&quot;/&gt;\n        &lt;/LinearLayout&gt;\n\n    &lt;/LinearLayout&gt;\n\n&lt;/RelativeLayout&gt;``\n</code></pre>\n"},{"tags":["java","generics","interface","enums"],"answers":[{"comments":[{"owner":{"account_id":558339,"reputation":2365,"user_id":920848,"accept_rate":42,"display_name":"Zhao Yi"},"score":2,"creation_date":1342340929,"post_id":11490505,"comment_id":15176690,"body_markdown":"This approach does not solve my problem unless I use `enum B implemts A&lt;Object&gt;`, which in turn makes the generic interface meaningless.","body":"This approach does not solve my problem unless I use <code>enum B implemts A&lt;Object&gt;</code>, which in turn makes the generic interface meaningless."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":11,"creation_date":1342341285,"post_id":11490505,"comment_id":15176747,"body_markdown":"That&#39;s the point I&#39;m trying to make - your problem can&#39;t be solved by using a single `Enum`.","body":"That&#39;s the point I&#39;m trying to make - your problem can&#39;t be solved by using a single <code>Enum</code>."},{"owner":{"account_id":558339,"reputation":2365,"user_id":920848,"accept_rate":42,"display_name":"Zhao Yi"},"score":0,"creation_date":1342341564,"post_id":11490505,"comment_id":15176790,"body_markdown":"Now at least I understand `enum` is not so suitable for my requirement. Thanks!","body":"Now at least I understand <code>enum</code> is not so suitable for my requirement. Thanks!"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1485884577,"post_id":11490505,"comment_id":71107121,"body_markdown":"@Pokechu22 sounds good to me, especially when combined with the new proposal to allow primitives as type parameters.","body":"@Pokechu22 sounds good to me, especially when combined with the new proposal to allow primitives as type parameters."}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":4,"down_vote_count":0,"up_vote_count":76,"is_accepted":true,"score":76,"last_activity_date":1433452215,"creation_date":1342340674,"answer_id":11490505,"question_id":11490485,"body_markdown":"You can&#39;t. Java doesn&#39;t allow generic types on enum constants. They are allowed on enum types, though:\r\n\r\n    public enum B implements A&lt;String&gt; {\r\n      A1, A2;\r\n    }\r\n\r\nWhat you could do in this case is either have an enum type for each generic type, or &#39;fake&#39; having an enum by just making it a class:\r\n\r\n    public class B&lt;T&gt; implements A&lt;T&gt; {\r\n        public static final B&lt;String&gt; A1 = new B&lt;String&gt;();\r\n        public static final B&lt;Integer&gt; A2 = new B&lt;Integer&gt;();\r\n        private B() {};\r\n    }\r\n\r\nUnfortunately, they both have drawbacks.\r\n","title":"How to implement enum with generics?","body":"<p>You can't. Java doesn't allow generic types on enum constants. They are allowed on enum types, though:</p>\n\n<pre><code>public enum B implements A&lt;String&gt; {\n  A1, A2;\n}\n</code></pre>\n\n<p>What you could do in this case is either have an enum type for each generic type, or 'fake' having an enum by just making it a class:</p>\n\n<pre><code>public class B&lt;T&gt; implements A&lt;T&gt; {\n    public static final B&lt;String&gt; A1 = new B&lt;String&gt;();\n    public static final B&lt;Integer&gt; A2 = new B&lt;Integer&gt;();\n    private B() {};\n}\n</code></pre>\n\n<p>Unfortunately, they both have drawbacks.</p>\n"},{"comments":[{"owner":{"account_id":558339,"reputation":2365,"user_id":920848,"accept_rate":42,"display_name":"Zhao Yi"},"score":0,"creation_date":1369203127,"post_id":16557813,"comment_id":24010501,"body_markdown":"Thanks a lot for sharing this workaround! Actually you don&#39;t need to use `enum`, just use anonymous inner classes, which is what I&#39;m doing now.","body":"Thanks a lot for sharing this workaround! Actually you don&#39;t need to use <code>enum</code>, just use anonymous inner classes, which is what I&#39;m doing now."},{"owner":{"account_id":363148,"reputation":22154,"user_id":706724,"accept_rate":100,"display_name":"pickypg"},"score":2,"creation_date":1369204932,"post_id":16557813,"comment_id":24011165,"body_markdown":"No problem. The anonymous inner class is the middle example. I tend to avoid anonymous classes for maintainability (both compiled code becomes confusing with the `$1`, `$2` anonymous types and many developers will miss the reason for being an anonymous type), but it&#39;s definitely a valid and smaller approach.","body":"No problem. The anonymous inner class is the middle example. I tend to avoid anonymous classes for maintainability (both compiled code becomes confusing with the <code>$1</code>, <code>$2</code> anonymous types and many developers will miss the reason for being an anonymous type), but it&#39;s definitely a valid and smaller approach."},{"owner":{"account_id":1345617,"reputation":252,"user_id":1286443,"display_name":"Christian Conti-Vock"},"score":0,"creation_date":1509553333,"post_id":16557813,"comment_id":81065976,"body_markdown":"I really appreciate this answer.  Thank you for your effort.","body":"I really appreciate this answer.  Thank you for your effort."},{"owner":{"account_id":164939,"reputation":2225,"user_id":388033,"accept_rate":83,"display_name":"Vanessa Phipps"},"score":0,"creation_date":1516138713,"post_id":16557813,"comment_id":83565509,"body_markdown":"This is an old post, but can you summarize the costs and benefits of the implementations you provided? I&#39;m having some trouble understanding why I would choose one over the others.","body":"This is an old post, but can you summarize the costs and benefits of the implementations you provided? I&#39;m having some trouble understanding why I would choose one over the others."}],"tags":[],"owner":{"account_id":363148,"reputation":22154,"user_id":706724,"accept_rate":100,"display_name":"pickypg"},"comment_count":4,"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1368597193,"creation_date":1368597193,"answer_id":16557813,"question_id":11490485,"body_markdown":"As Java developers designing certain APIs, we come across this issue frequently.  I was reconfirming my own doubts when I came across this post, but I have a verbose workaround to it:\r\n\r\n    // class name is awful for this example, but it will make more sense if you\r\n    //  read further\r\n    public interface MetaDataKey&lt;T extends Serializable&gt; extends Serializable\r\n    {\r\n        T getValue();\r\n    }\r\n\r\n    public final class TypeSafeKeys\r\n    {\r\n        static enum StringKeys implements MetaDataKey&lt;String&gt;\r\n        {\r\n            A1(&quot;key1&quot;);\r\n\r\n            private final String value;\r\n\r\n            StringKeys(String value) { this.value = value; }\r\n\r\n            @Override\r\n            public String getValue() { return value; }\r\n        }\r\n\r\n        static enum IntegerKeys implements MetaDataKey&lt;Integer&gt;\r\n        {\r\n            A2(0);\r\n\r\n            private final Integer value;\r\n\r\n            IntegerKeys (Integer value) { this.value = value; }\r\n\r\n            @Override\r\n            public Integer getValue() { return value; }\r\n        }\r\n\r\n        public static final MetaDataKey&lt;String&gt; A1 = StringKeys.A1;\r\n        public static final MetaDataKey&lt;Integer&gt; A2 = IntegerKeys.A2;\r\n    }\r\n\r\nAt that point, you gain the benefit of being a truly constant `enum`eration value (and all of the perks that go with that), as well being an unique implementation of the `interface`, but you have the global accessibility desired by the `enum`.\r\n\r\nClearly, this adds verbosity, which creates the potential for copy/paste mistakes. You could  make the `enum`s `public` and simply add an extra layer to their access.\r\n\r\nDesigns that tend to use these features tend to suffer from brittle `equals` implementations because they are usually coupled with some other unique value, such as a name, which can be unwittingly duplicated across the codebase for a similar, yet different purpose.  By using `enum`s across the board, equality is a freebie that is immune to such brittle behavior.\r\n\r\nThe major drawback to such as system, beyond verbosity, is the idea of converting back and forth between the globally unique keys (e.g., marshaling to and from JSON).  If they&#39;re just keys, then they can be safely reinstantiated (duplicated) at the cost of wasting memory, but using what was previously a weakness--`equals`--as an advantage.\r\n\r\nThere is a workaround to this that provides global implementation uniqueness by cluttering it with an anonymous type per global instance:\r\n\r\n    public abstract class BasicMetaDataKey&lt;T extends Serializable&gt;\r\n         implements MetaDataKey&lt;T&gt;\r\n    {\r\n        private final T value;\r\n\r\n        public BasicMetaDataKey(T value)\r\n        {\r\n            this.value = value;\r\n        }\r\n\r\n        @Override\r\n        public T getValue()\r\n        {\r\n            return value;\r\n        }\r\n\r\n        // @Override equals\r\n        // @Override hashCode\r\n    }\r\n\r\n    public final class TypeSafeKeys\r\n    {\r\n        public static final MetaDataKey&lt;String&gt; A1 =\r\n            new BasicMetaDataKey&lt;String&gt;(&quot;value&quot;) {};\r\n        public static final MetaDataKey&lt;Integer&gt; A2 =\r\n            new BasicMetaDataKey&lt;Integer&gt;(0) {};\r\n    }\r\n\r\nNote that each instance uses an anonymous implementation, but nothing else is needed to implement it, so the `{}` are empty.  This is both confusing and annoying, but it works if instance references are preferable and clutter is kept to a minimum, although it may be a bit cryptic to less experienced Java developers, thereby making it harder to maintain.\r\n\r\nFinally, the only way to provide global uniqueness and reassignment is to be a little more creative with what is happening. The most common use for globally shared interfaces that I have seen are for MetaData buckets that tend to mix a lot of different values, with different types (the `T`, on a per key basis):\r\n\r\n    public interface MetaDataKey&lt;T extends Serializable&gt; extends Serializable\r\n    {\r\n        Class&lt;T&gt; getType();\r\n        String getName();\r\n    }\r\n\r\n    public final class TypeSafeKeys\r\n    {\r\n        public static enum StringKeys implements MetaDataKey&lt;String&gt;\r\n        {\r\n            A1;\r\n\r\n            @Override\r\n            public Class&lt;String&gt; getType() { return String.class; }\r\n\r\n            @Override\r\n            public String getName()\r\n            {\r\n                return getDeclaringClass().getName() + &quot;.&quot; + name();\r\n            }\r\n        }\r\n\r\n        public static enum IntegerKeys implements MetaDataKey&lt;Integer&gt;\r\n        {\r\n            A2;\r\n\r\n            @Override\r\n            public Class&lt;Integer&gt; getType() { return Integer.class; }\r\n\r\n            @Override\r\n            public String getName()\r\n            {\r\n                return getDeclaringClass().getName() + &quot;.&quot; + name();\r\n            }\r\n        }\r\n\r\n        public static final MetaDataKey&lt;String&gt; A1 = StringKeys.A1;\r\n        public static final MetaDataKey&lt;Integer&gt; A2 = IntegerKeys.A2;\r\n    }\r\n\r\nThis provides the same flexibility as the first option, and it provides a mechanism for obtaining a reference via reflection, if it becomes necessary later, therefore avoiding the need for instantiable later.  It also avoids a lot of the error prone copy/paste mistakes that the first option provides because it won&#39;t compile if the first method is wrong, and the second method does not need to change.  The only note is that you should ensure that the `enum`s meant to be used in that fashion are `public` to avoid anyone getting access errors because they do not have access to the inner `enum`; if you did not want to have those `MetaDataKey`s going across a marshaled wire, then keeping them hidden from outside packages could be used to automatically discard them (during marshaling, reflectively check to see if the `enum` is accessible, and if it is not, then ignore the key/value).  There is nothing gained or lost by making it `public` except providing two ways to access the instance, if the more obvious `static` references are maintained (as the `enum` instances are just that anyway).\r\n\r\nI just wish that they made it so that `enum`s could extend objects in Java. Maybe in Java 9?\r\n\r\nThe final option does not really solve your need, as you were asking for values, but I suspect that this gets toward the actual goal.","title":"How to implement enum with generics?","body":"<p>As Java developers designing certain APIs, we come across this issue frequently.  I was reconfirming my own doubts when I came across this post, but I have a verbose workaround to it:</p>\n\n<pre><code>// class name is awful for this example, but it will make more sense if you\n//  read further\npublic interface MetaDataKey&lt;T extends Serializable&gt; extends Serializable\n{\n    T getValue();\n}\n\npublic final class TypeSafeKeys\n{\n    static enum StringKeys implements MetaDataKey&lt;String&gt;\n    {\n        A1(\"key1\");\n\n        private final String value;\n\n        StringKeys(String value) { this.value = value; }\n\n        @Override\n        public String getValue() { return value; }\n    }\n\n    static enum IntegerKeys implements MetaDataKey&lt;Integer&gt;\n    {\n        A2(0);\n\n        private final Integer value;\n\n        IntegerKeys (Integer value) { this.value = value; }\n\n        @Override\n        public Integer getValue() { return value; }\n    }\n\n    public static final MetaDataKey&lt;String&gt; A1 = StringKeys.A1;\n    public static final MetaDataKey&lt;Integer&gt; A2 = IntegerKeys.A2;\n}\n</code></pre>\n\n<p>At that point, you gain the benefit of being a truly constant <code>enum</code>eration value (and all of the perks that go with that), as well being an unique implementation of the <code>interface</code>, but you have the global accessibility desired by the <code>enum</code>.</p>\n\n<p>Clearly, this adds verbosity, which creates the potential for copy/paste mistakes. You could  make the <code>enum</code>s <code>public</code> and simply add an extra layer to their access.</p>\n\n<p>Designs that tend to use these features tend to suffer from brittle <code>equals</code> implementations because they are usually coupled with some other unique value, such as a name, which can be unwittingly duplicated across the codebase for a similar, yet different purpose.  By using <code>enum</code>s across the board, equality is a freebie that is immune to such brittle behavior.</p>\n\n<p>The major drawback to such as system, beyond verbosity, is the idea of converting back and forth between the globally unique keys (e.g., marshaling to and from JSON).  If they're just keys, then they can be safely reinstantiated (duplicated) at the cost of wasting memory, but using what was previously a weakness--<code>equals</code>--as an advantage.</p>\n\n<p>There is a workaround to this that provides global implementation uniqueness by cluttering it with an anonymous type per global instance:</p>\n\n<pre><code>public abstract class BasicMetaDataKey&lt;T extends Serializable&gt;\n     implements MetaDataKey&lt;T&gt;\n{\n    private final T value;\n\n    public BasicMetaDataKey(T value)\n    {\n        this.value = value;\n    }\n\n    @Override\n    public T getValue()\n    {\n        return value;\n    }\n\n    // @Override equals\n    // @Override hashCode\n}\n\npublic final class TypeSafeKeys\n{\n    public static final MetaDataKey&lt;String&gt; A1 =\n        new BasicMetaDataKey&lt;String&gt;(\"value\") {};\n    public static final MetaDataKey&lt;Integer&gt; A2 =\n        new BasicMetaDataKey&lt;Integer&gt;(0) {};\n}\n</code></pre>\n\n<p>Note that each instance uses an anonymous implementation, but nothing else is needed to implement it, so the <code>{}</code> are empty.  This is both confusing and annoying, but it works if instance references are preferable and clutter is kept to a minimum, although it may be a bit cryptic to less experienced Java developers, thereby making it harder to maintain.</p>\n\n<p>Finally, the only way to provide global uniqueness and reassignment is to be a little more creative with what is happening. The most common use for globally shared interfaces that I have seen are for MetaData buckets that tend to mix a lot of different values, with different types (the <code>T</code>, on a per key basis):</p>\n\n<pre><code>public interface MetaDataKey&lt;T extends Serializable&gt; extends Serializable\n{\n    Class&lt;T&gt; getType();\n    String getName();\n}\n\npublic final class TypeSafeKeys\n{\n    public static enum StringKeys implements MetaDataKey&lt;String&gt;\n    {\n        A1;\n\n        @Override\n        public Class&lt;String&gt; getType() { return String.class; }\n\n        @Override\n        public String getName()\n        {\n            return getDeclaringClass().getName() + \".\" + name();\n        }\n    }\n\n    public static enum IntegerKeys implements MetaDataKey&lt;Integer&gt;\n    {\n        A2;\n\n        @Override\n        public Class&lt;Integer&gt; getType() { return Integer.class; }\n\n        @Override\n        public String getName()\n        {\n            return getDeclaringClass().getName() + \".\" + name();\n        }\n    }\n\n    public static final MetaDataKey&lt;String&gt; A1 = StringKeys.A1;\n    public static final MetaDataKey&lt;Integer&gt; A2 = IntegerKeys.A2;\n}\n</code></pre>\n\n<p>This provides the same flexibility as the first option, and it provides a mechanism for obtaining a reference via reflection, if it becomes necessary later, therefore avoiding the need for instantiable later.  It also avoids a lot of the error prone copy/paste mistakes that the first option provides because it won't compile if the first method is wrong, and the second method does not need to change.  The only note is that you should ensure that the <code>enum</code>s meant to be used in that fashion are <code>public</code> to avoid anyone getting access errors because they do not have access to the inner <code>enum</code>; if you did not want to have those <code>MetaDataKey</code>s going across a marshaled wire, then keeping them hidden from outside packages could be used to automatically discard them (during marshaling, reflectively check to see if the <code>enum</code> is accessible, and if it is not, then ignore the key/value).  There is nothing gained or lost by making it <code>public</code> except providing two ways to access the instance, if the more obvious <code>static</code> references are maintained (as the <code>enum</code> instances are just that anyway).</p>\n\n<p>I just wish that they made it so that <code>enum</code>s could extend objects in Java. Maybe in Java 9?</p>\n\n<p>The final option does not really solve your need, as you were asking for values, but I suspect that this gets toward the actual goal.</p>\n"},{"comments":[{"owner":{"account_id":247101,"reputation":1115,"user_id":521615,"display_name":"Franck Valentin"},"score":10,"creation_date":1606336270,"post_id":51479933,"comment_id":114937305,"body_markdown":"Note that it has actually been withdrawn:  http://openjdk.java.net/jeps/301","body":"Note that it has actually been withdrawn:  <a href=\"http://openjdk.java.net/jeps/301\" rel=\"nofollow noreferrer\">openjdk.java.net/jeps/301</a>"},{"owner":{"account_id":92937,"reputation":18601,"user_id":254477,"accept_rate":87,"display_name":"Sled"},"score":1,"creation_date":1611695065,"post_id":51479933,"comment_id":116533069,"body_markdown":"@TiStrga where did you see that? The [latest message](https://bugs.openjdk.java.net/browse/JDK-8170351?focusedCommentId=14371268&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14371268) was from September and called it dead","body":"@TiStrga where did you see that? The <a href=\"https://bugs.openjdk.java.net/browse/JDK-8170351?focusedCommentId=14371268&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14371268\" rel=\"nofollow noreferrer\">latest message</a> was from September and called it dead"},{"owner":{"account_id":92937,"reputation":18601,"user_id":254477,"accept_rate":87,"display_name":"Sled"},"score":3,"creation_date":1611847204,"post_id":51479933,"comment_id":116587064,"body_markdown":"@TiStrga on 2020-09-29 they wrote `we are now withdrawing this JEP`, the emails from December you are referring to are from December 2018. This JEP is clearly dead.","body":"@TiStrga on 2020-09-29 they wrote <code>we are now withdrawing this JEP</code>, the emails from December you are referring to are from December 2018. This JEP is clearly dead."},{"owner":{"account_id":2043549,"reputation":1360,"user_id":1824182,"accept_rate":83,"display_name":"Ti Strga"},"score":3,"creation_date":1611949691,"post_id":51479933,"comment_id":116623841,"body_markdown":"I misread that quite badly!  I&#39;ve removed the misleading links; thank you.  Pity, this language feature would have cleaned up a considerable amount of code.","body":"I misread that quite badly!  I&#39;ve removed the misleading links; thank you.  Pity, this language feature would have cleaned up a considerable amount of code."}],"tags":[],"owner":{"account_id":92937,"reputation":18601,"user_id":254477,"accept_rate":87,"display_name":"Sled"},"comment_count":4,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1539781784,"creation_date":1532352335,"answer_id":51479933,"question_id":11490485,"body_markdown":"_If_ [JEP 301: Enhanced Enums](http://openjdk.java.net/jeps/301) gets accepted, _then_ you will be able to use syntax like this (taken from proposal):\r\n\r\n\r\n\tenum Primitive&lt;X&gt; {\r\n\t\tINT&lt;Integer&gt;(Integer.class, 0) {\r\n\t\t\tint mod(int x, int y) { return x % y; }\r\n\t\t\tint add(int x, int y) { return x + y; }\r\n\t\t},\r\n\t\tFLOAT&lt;Float&gt;(Float.class, 0f)  {\r\n\t\t\tlong add(long x, long y) { return x + y; }\r\n\t\t}, ... ;\r\n\t\r\n\t\tfinal Class&lt;X&gt; boxClass;\r\n\t\tfinal X defaultValue;\r\n\t\r\n\t\tPrimitive(Class&lt;X&gt; boxClass, X defaultValue) {\r\n\t\t\tthis.boxClass = boxClass;\r\n\t\t\tthis.defaultValue = defaultValue;\r\n\t\t}\r\n\t}","title":"How to implement enum with generics?","body":"<p><em>If</em> <a href=\"http://openjdk.java.net/jeps/301\" rel=\"noreferrer\">JEP 301: Enhanced Enums</a> gets accepted, <em>then</em> you will be able to use syntax like this (taken from proposal):</p>\n\n<pre><code>enum Primitive&lt;X&gt; {\n    INT&lt;Integer&gt;(Integer.class, 0) {\n        int mod(int x, int y) { return x % y; }\n        int add(int x, int y) { return x + y; }\n    },\n    FLOAT&lt;Float&gt;(Float.class, 0f)  {\n        long add(long x, long y) { return x + y; }\n    }, ... ;\n\n    final Class&lt;X&gt; boxClass;\n    final X defaultValue;\n\n    Primitive(Class&lt;X&gt; boxClass, X defaultValue) {\n        this.boxClass = boxClass;\n        this.defaultValue = defaultValue;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7720495,"reputation":866,"user_id":5846877,"display_name":"Christophe Moine"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621960973,"creation_date":1621959637,"answer_id":67691928,"question_id":11490485,"body_markdown":"By using this Java annotation processor https://github.com/cmoine/generic-enums, you can write this:\r\n```java\r\nimport org.cmoine.genericEnums.GenericEnum;\r\nimport org.cmoine.genericEnums.GenericEnumParam;\r\n\r\n@GenericEnum\r\npublic enum B implements A&lt;@GenericEnumParam Object&gt; {\r\n    A1(String.class, &quot;value&quot;), A2(int.class, 0);\r\n\r\n    @GenericEnumParam\r\n    private final Object value;\r\n\r\n    B(Class&lt;?&gt; clazz, @GenericEnumParam Object value) {\r\n        this.value = value;\r\n    }\r\n\r\n    @GenericEnumParam\r\n    @Override\r\n    public Object getValue() {\r\n        return value;\r\n    }\r\n}\r\n```\r\n\r\nThe annotation processor will generate an enum `BExt` with hopefully all what you need!\r\n\r\nif you prefer you can also use this syntax:\r\n```java\r\nimport org.cmoine.genericEnums.GenericEnum;\r\nimport org.cmoine.genericEnums.GenericEnumParam;\r\n\r\n@GenericEnum\r\npublic enum B implements A&lt;@GenericEnumParam Object&gt; {\r\n    A1(String.class) {\r\n        @Override\r\n        public @GenericEnumParam Object getValue() {\r\n            return &quot;value&quot;;\r\n        }\r\n    }, A2(int.class) {\r\n        @Override\r\n        public @GenericEnumParam Object getValue() {\r\n            return 0;\r\n        }\r\n    };\r\n\r\n    B(Class&lt;?&gt; clazz) {\r\n    }\r\n\r\n    @Override\r\n    public abstract @GenericEnumParam Object getValue();\r\n}\r\n```","title":"How to implement enum with generics?","body":"<p>By using this Java annotation processor <a href=\"https://github.com/cmoine/generic-enums\" rel=\"nofollow noreferrer\">https://github.com/cmoine/generic-enums</a>, you can write this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.cmoine.genericEnums.GenericEnum;\nimport org.cmoine.genericEnums.GenericEnumParam;\n\n@GenericEnum\npublic enum B implements A&lt;@GenericEnumParam Object&gt; {\n    A1(String.class, &quot;value&quot;), A2(int.class, 0);\n\n    @GenericEnumParam\n    private final Object value;\n\n    B(Class&lt;?&gt; clazz, @GenericEnumParam Object value) {\n        this.value = value;\n    }\n\n    @GenericEnumParam\n    @Override\n    public Object getValue() {\n        return value;\n    }\n}\n</code></pre>\n<p>The annotation processor will generate an enum <code>BExt</code> with hopefully all what you need!</p>\n<p>if you prefer you can also use this syntax:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.cmoine.genericEnums.GenericEnum;\nimport org.cmoine.genericEnums.GenericEnumParam;\n\n@GenericEnum\npublic enum B implements A&lt;@GenericEnumParam Object&gt; {\n    A1(String.class) {\n        @Override\n        public @GenericEnumParam Object getValue() {\n            return &quot;value&quot;;\n        }\n    }, A2(int.class) {\n        @Override\n        public @GenericEnumParam Object getValue() {\n            return 0;\n        }\n    };\n\n    B(Class&lt;?&gt; clazz) {\n    }\n\n    @Override\n    public abstract @GenericEnumParam Object getValue();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":360167,"reputation":728,"user_id":702010,"display_name":"Alex G"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678116267,"creation_date":1678116267,"answer_id":75652673,"question_id":11490485,"body_markdown":"I ended up doing something simple like this, and checking in methods that receive `ObjectTypeEnum` and a typed parameter that the class matches the enum. You could also limit `T` so that it extends a specific interface if needed.\r\n\r\n    public enum ObjectTypeEnum {\r\n      STRING(String.class);\r\n    \r\n      private final Class&lt;?&gt; objectClass;\r\n    \r\n      &lt;T&gt; ObjectTypeEnum(Class&lt;T&gt; objectClass) {\r\n    \r\n        this.objectClass = objectClass;\r\n      }\r\n    }\r\n\r\n    public void call(ObjectTypeEnum objectType, Object objectData) {\r\n      requireNonNull(objectType);\r\n      requireNonNull(objectData);\r\n    \r\n      if (objectType.objectClass != objectData.getClass()) {\r\n        throw new UnsupportedOperationException();\r\n      }\r\n    }","title":"How to implement enum with generics?","body":"<p>I ended up doing something simple like this, and checking in methods that receive <code>ObjectTypeEnum</code> and a typed parameter that the class matches the enum. You could also limit <code>T</code> so that it extends a specific interface if needed.</p>\n<pre><code>public enum ObjectTypeEnum {\n  STRING(String.class);\n\n  private final Class&lt;?&gt; objectClass;\n\n  &lt;T&gt; ObjectTypeEnum(Class&lt;T&gt; objectClass) {\n\n    this.objectClass = objectClass;\n  }\n}\n\npublic void call(ObjectTypeEnum objectType, Object objectData) {\n  requireNonNull(objectType);\n  requireNonNull(objectData);\n\n  if (objectType.objectClass != objectData.getClass()) {\n    throw new UnsupportedOperationException();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5618181,"reputation":756,"user_id":4448840,"accept_rate":43,"display_name":"Dombi Bence"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696621026,"creation_date":1696614840,"answer_id":77246516,"question_id":11490485,"body_markdown":"You can implement a class with enum like behavior:\r\n\r\n    public class ENUM\r\n    {\r\n        private static final Map&lt;Class&lt;? extends ENUM&gt;, Integer&gt; ordinals = new HashMap&lt;&gt;();\r\n        \r\n        private final Class&lt;? extends ENUM&gt; type;\r\n        private final int ordinal;\r\n        private String name;\r\n        \r\n        protected ENUM(Class&lt;? extends ENUM&gt; type)\r\n        {\r\n            this.type = type;\r\n            if (!ordinals.containsKey(type)) ordinals.put(type, 0);\r\n            ordinal = ordinals.get(type);\r\n            ordinals.put(type, ordinal + 1);\r\n        }\r\n        \r\n        protected static void INIT(Class&lt;? extends ENUM&gt; type)\r\n        {\r\n            try\r\n            {\r\n                for (Field field : type.getDeclaredFields())\r\n                {\r\n                    int mod = field.getModifiers();\r\n                    if (type.isAssignableFrom(field.getType()) &amp;&amp; Modifier.isPublic(mod) &amp;&amp; Modifier.isStatic(mod) &amp;&amp; Modifier.isFinal(mod))\r\n                    {\r\n                        ENUM fieldValue = (ENUM)field.get(null);\r\n                        fieldValue.name = field.getName();\r\n                    }\r\n                }\r\n                ordinals.remove(type);\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n        \r\n        public int ordinal()\r\n        {\r\n            return ordinal;\r\n        }\r\n        public String name()\r\n        {\r\n            return name;\r\n        }\r\n        \r\n        @Override\r\n        public String toString()\r\n        {\r\n            return name;\r\n        }\r\n        @Override\r\n        public int hashCode()\r\n        {\r\n            return ordinal;\r\n        }\r\n        @Override\r\n        public boolean equals(Object obj)\r\n        {\r\n            if (!(obj instanceof ENUM || type.isAssignableFrom(obj.getClass()))) return false;\r\n            ENUM other = (ENUM)obj;\r\n            return ordinal == other.ordinal;\r\n        }\r\n        \r\n        public static &lt;T extends ENUM&gt; T[] values(Class&lt;T&gt; type)\r\n        {\r\n            List&lt;T&gt; list = new ArrayList&lt;&gt;();\r\n            for (Field field : type.getDeclaredFields())\r\n            {\r\n                int mod = field.getModifiers();\r\n                if (type.isAssignableFrom(field.getType()) &amp;&amp; Modifier.isPublic(mod) &amp;&amp; Modifier.isStatic(mod) &amp;&amp; Modifier.isFinal(mod))\r\n                {\r\n                    try\r\n                    {\r\n                        //noinspection unchecked\r\n                        list.add((T)field.get(null));\r\n                    }\r\n                    catch (IllegalAccessException e)\r\n                    {\r\n                        throw new IllegalArgumentException(e);\r\n                    }\r\n                }\r\n            }\r\n            list.sort(Comparator.comparingInt(ENUM::ordinal));\r\n            //noinspection unchecked\r\n            return list.toArray((T[])Array.newInstance(type, list.size()));\r\n        }\r\n        public static &lt;T extends ENUM&gt; T valueOf(Class&lt;T&gt; type, String name)\r\n        {\r\n            if (name == null) throw new NullPointerException(&quot;Name is null&quot;);\r\n            for (Field field : type.getDeclaredFields())\r\n            {\r\n                int mod = field.getModifiers();\r\n                if (type.isAssignableFrom(field.getType()) &amp;&amp; Modifier.isPublic(mod) &amp;&amp; Modifier.isStatic(mod) &amp;&amp; Modifier.isFinal(mod))\r\n                {\r\n                    if (name.equals(field.getName()))\r\n                    {\r\n                        try\r\n                        {\r\n                            //noinspection unchecked\r\n                            return (T)field.get(null);\r\n                        }\r\n                        catch (IllegalAccessException e)\r\n                        {\r\n                            throw new IllegalArgumentException(e);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            throw new IllegalArgumentException(&quot;No ENUM constant &quot; + type.getName() + &quot;.&quot; + name);\r\n        }\r\n    }\r\n\r\nAnd then you can create subclasses from it with all the functions of a standard Java class, like generics:\r\n\r\n    public static class GenericEnum&lt;T&gt; extends ENUM\r\n    {\r\n        public static final GenericEnum&lt;String&gt; ONE = new GenericEnum&lt;&gt;(&quot;One&quot;);\r\n        public static final GenericEnum&lt;Integer&gt; TWO = new GenericEnum&lt;&gt;(2);\r\n        public static final GenericEnum&lt;Boolean&gt; THREE = new GenericEnum&lt;&gt;(false);\r\n        \r\n        static { ENUM.INIT(GenericEnum.class); }\r\n        \r\n        private final T genericObject;\r\n        \r\n        protected GenericEnum(T genericObject)\r\n        {\r\n            super(GenericEnum.class);\r\n            this.genericObject = genericObject;\r\n        }\r\n        \r\n        public T getGenericObject()\r\n        {\r\n            return genericObject;\r\n        }\r\n        \r\n        public static GenericEnum&lt;?&gt;[] values()\r\n        {\r\n            return ENUM.values(GenericEnum.class);\r\n        }\r\n        public static GenericEnum&lt;?&gt; valueOf(String name)\r\n        {\r\n            return ENUM.valueOf(GenericEnum.class, name);\r\n        }\r\n    }","title":"How to implement enum with generics?","body":"<p>You can implement a class with enum like behavior:</p>\n<pre><code>public class ENUM\n{\n    private static final Map&lt;Class&lt;? extends ENUM&gt;, Integer&gt; ordinals = new HashMap&lt;&gt;();\n    \n    private final Class&lt;? extends ENUM&gt; type;\n    private final int ordinal;\n    private String name;\n    \n    protected ENUM(Class&lt;? extends ENUM&gt; type)\n    {\n        this.type = type;\n        if (!ordinals.containsKey(type)) ordinals.put(type, 0);\n        ordinal = ordinals.get(type);\n        ordinals.put(type, ordinal + 1);\n    }\n    \n    protected static void INIT(Class&lt;? extends ENUM&gt; type)\n    {\n        try\n        {\n            for (Field field : type.getDeclaredFields())\n            {\n                int mod = field.getModifiers();\n                if (type.isAssignableFrom(field.getType()) &amp;&amp; Modifier.isPublic(mod) &amp;&amp; Modifier.isStatic(mod) &amp;&amp; Modifier.isFinal(mod))\n                {\n                    ENUM fieldValue = (ENUM)field.get(null);\n                    fieldValue.name = field.getName();\n                }\n            }\n            ordinals.remove(type);\n        }\n        catch (Exception e)\n        {\n            throw new RuntimeException(e);\n        }\n    }\n    \n    public int ordinal()\n    {\n        return ordinal;\n    }\n    public String name()\n    {\n        return name;\n    }\n    \n    @Override\n    public String toString()\n    {\n        return name;\n    }\n    @Override\n    public int hashCode()\n    {\n        return ordinal;\n    }\n    @Override\n    public boolean equals(Object obj)\n    {\n        if (!(obj instanceof ENUM || type.isAssignableFrom(obj.getClass()))) return false;\n        ENUM other = (ENUM)obj;\n        return ordinal == other.ordinal;\n    }\n    \n    public static &lt;T extends ENUM&gt; T[] values(Class&lt;T&gt; type)\n    {\n        List&lt;T&gt; list = new ArrayList&lt;&gt;();\n        for (Field field : type.getDeclaredFields())\n        {\n            int mod = field.getModifiers();\n            if (type.isAssignableFrom(field.getType()) &amp;&amp; Modifier.isPublic(mod) &amp;&amp; Modifier.isStatic(mod) &amp;&amp; Modifier.isFinal(mod))\n            {\n                try\n                {\n                    //noinspection unchecked\n                    list.add((T)field.get(null));\n                }\n                catch (IllegalAccessException e)\n                {\n                    throw new IllegalArgumentException(e);\n                }\n            }\n        }\n        list.sort(Comparator.comparingInt(ENUM::ordinal));\n        //noinspection unchecked\n        return list.toArray((T[])Array.newInstance(type, list.size()));\n    }\n    public static &lt;T extends ENUM&gt; T valueOf(Class&lt;T&gt; type, String name)\n    {\n        if (name == null) throw new NullPointerException(&quot;Name is null&quot;);\n        for (Field field : type.getDeclaredFields())\n        {\n            int mod = field.getModifiers();\n            if (type.isAssignableFrom(field.getType()) &amp;&amp; Modifier.isPublic(mod) &amp;&amp; Modifier.isStatic(mod) &amp;&amp; Modifier.isFinal(mod))\n            {\n                if (name.equals(field.getName()))\n                {\n                    try\n                    {\n                        //noinspection unchecked\n                        return (T)field.get(null);\n                    }\n                    catch (IllegalAccessException e)\n                    {\n                        throw new IllegalArgumentException(e);\n                    }\n                }\n            }\n        }\n        throw new IllegalArgumentException(&quot;No ENUM constant &quot; + type.getName() + &quot;.&quot; + name);\n    }\n}\n</code></pre>\n<p>And then you can create subclasses from it with all the functions of a standard Java class, like generics:</p>\n<pre><code>public static class GenericEnum&lt;T&gt; extends ENUM\n{\n    public static final GenericEnum&lt;String&gt; ONE = new GenericEnum&lt;&gt;(&quot;One&quot;);\n    public static final GenericEnum&lt;Integer&gt; TWO = new GenericEnum&lt;&gt;(2);\n    public static final GenericEnum&lt;Boolean&gt; THREE = new GenericEnum&lt;&gt;(false);\n    \n    static { ENUM.INIT(GenericEnum.class); }\n    \n    private final T genericObject;\n    \n    protected GenericEnum(T genericObject)\n    {\n        super(GenericEnum.class);\n        this.genericObject = genericObject;\n    }\n    \n    public T getGenericObject()\n    {\n        return genericObject;\n    }\n    \n    public static GenericEnum&lt;?&gt;[] values()\n    {\n        return ENUM.values(GenericEnum.class);\n    }\n    public static GenericEnum&lt;?&gt; valueOf(String name)\n    {\n        return ENUM.valueOf(GenericEnum.class, name);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":558339,"reputation":2365,"user_id":920848,"accept_rate":42,"display_name":"Zhao Yi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112538,"favorite_count":0,"down_vote_count":0,"up_vote_count":77,"accepted_answer_id":11490505,"answer_count":6,"score":77,"last_activity_date":1696621026,"creation_date":1342340474,"question_id":11490485,"body_markdown":"I have a generic interface like this:\r\n\r\n    interface A&lt;T&gt; {\r\n        T getValue();\r\n    }\r\n\r\nThis interface has limited instances, hence it would be best to implement them as enum values. The problem is those instances have different type of values, so I tried the following approach but it does not compile:\r\n\r\n    public enum B implements A {\r\n        A1&lt;String&gt; {\r\n            @Override\r\n            public String getValue() {\r\n                return &quot;value&quot;;\r\n            }\r\n        },\r\n        A2&lt;Integer&gt; {\r\n            @Override\r\n            public Integer getValue() {\r\n                return 0;\r\n            }\r\n        };\r\n    }\r\n\r\nAny idea about this?","title":"How to implement enum with generics?","body":"<p>I have a generic interface like this:</p>\n\n<pre><code>interface A&lt;T&gt; {\n    T getValue();\n}\n</code></pre>\n\n<p>This interface has limited instances, hence it would be best to implement them as enum values. The problem is those instances have different type of values, so I tried the following approach but it does not compile:</p>\n\n<pre><code>public enum B implements A {\n    A1&lt;String&gt; {\n        @Override\n        public String getValue() {\n            return \"value\";\n        }\n    },\n    A2&lt;Integer&gt; {\n        @Override\n        public Integer getValue() {\n            return 0;\n        }\n    };\n}\n</code></pre>\n\n<p>Any idea about this?</p>\n"},{"tags":["java","input","java.util.scanner"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1696619371,"post_id":77246839,"comment_id":136181461,"body_markdown":"I would simplify the `while` condition to: `while (!difficulty_list.contains(difficulty))` Also, you look like you come from a Python background. Java conventions dictate that variables should be lowerCamelCase i.e. `dificultyList`.","body":"I would simplify the <code>while</code> condition to: <code>while (!difficulty_list.contains(difficulty))</code> Also, you look like you come from a Python background. Java conventions dictate that variables should be lowerCamelCase i.e. <code>dificultyList</code>."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1696619587,"post_id":77246839,"comment_id":136181497,"body_markdown":"Does this answer your question? [How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java\">How do I compare strings in Java?</a>"}],"answers":[{"comments":[{"owner":{"account_id":28216296,"reputation":53,"user_id":22303021,"display_name":"Derek Kwon"},"score":0,"creation_date":1696648391,"post_id":77246912,"comment_id":136184004,"body_markdown":"Thank you all! Yes, as you might have guessed, I am from a Python background, which would explain the confusion. Thank you for making my transition into java smoother.","body":"Thank you all! Yes, as you might have guessed, I am from a Python background, which would explain the confusion. Thank you for making my transition into java smoother."}],"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1696620045,"creation_date":1696620045,"answer_id":77246912,"question_id":77246839,"body_markdown":"As others have noted, you should use `String#equals` for equality check when dealing with strings. You could also normalize the user&#39;s input by calling `toLowerCase()`. When requesting input, you should also prompt the user e.g. _&quot;Choose a difficulty&quot;_.\r\n\r\nAlso, you can define constant (`final`) values or even an `enum` to represent difficulty choices.\r\n\r\n```java\r\nimport java.util.*;\r\n\r\npublic class Game {\r\n    public static final String MODE_EASY   = &quot;easy&quot;;\r\n    public static final String MODE_MEDIUM = &quot;medium&quot;;\r\n    public static final String MODE_HARD   = &quot;hard&quot;;\r\n\r\n    private static final List&lt;String&gt; DIFFICULTY_OPTIONS =\r\n        List.of(MODE_EASY, MODE_MEDIUM, MODE_HARD);\r\n\r\n    public static void main(String[] args) {\r\n        Scanner userInput = new Scanner(System.in);\r\n        System.out.print(&quot;Choose a difficulty: &quot;);\r\n        String selectedDifficulty = userInput.nextLine().toLowerCase();\r\n        while (!DIFFICULTY_OPTIONS.contains(selectedDifficulty)) {\r\n            System.out.println(&quot;Invalid Input. Please try again.&quot;);\r\n            System.out.print(&quot;Choose a difficulty: &quot;);\r\n            selectedDifficulty = userInput.nextLine();\r\n        }\r\n        if (selectedDifficulty.equals(MODE_EASY)) {\r\n            System.out.println(&quot;You selected easy mode!&quot;);\r\n        }\r\n        // Do more stuff...\r\n        userInput.close(); // Close when done gathering input\r\n    }\r\n}\r\n```","title":"Scanner object return type","body":"<p>As others have noted, you should use <code>String#equals</code> for equality check when dealing with strings. You could also normalize the user's input by calling <code>toLowerCase()</code>. When requesting input, you should also prompt the user e.g. <em>&quot;Choose a difficulty&quot;</em>.</p>\n<p>Also, you can define constant (<code>final</code>) values or even an <code>enum</code> to represent difficulty choices.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Game {\n    public static final String MODE_EASY   = &quot;easy&quot;;\n    public static final String MODE_MEDIUM = &quot;medium&quot;;\n    public static final String MODE_HARD   = &quot;hard&quot;;\n\n    private static final List&lt;String&gt; DIFFICULTY_OPTIONS =\n        List.of(MODE_EASY, MODE_MEDIUM, MODE_HARD);\n\n    public static void main(String[] args) {\n        Scanner userInput = new Scanner(System.in);\n        System.out.print(&quot;Choose a difficulty: &quot;);\n        String selectedDifficulty = userInput.nextLine().toLowerCase();\n        while (!DIFFICULTY_OPTIONS.contains(selectedDifficulty)) {\n            System.out.println(&quot;Invalid Input. Please try again.&quot;);\n            System.out.print(&quot;Choose a difficulty: &quot;);\n            selectedDifficulty = userInput.nextLine();\n        }\n        if (selectedDifficulty.equals(MODE_EASY)) {\n            System.out.println(&quot;You selected easy mode!&quot;);\n        }\n        // Do more stuff...\n        userInput.close(); // Close when done gathering input\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28216296,"reputation":53,"user_id":22303021,"display_name":"Derek Kwon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1696619771,"answer_count":1,"score":0,"last_activity_date":1696620045,"creation_date":1696619150,"question_id":77246839,"body_markdown":"I&#39;m writing a memory game in Java as my first college-level Java assignment and I am stumped with the way Java handles user input. \r\n\r\nThe memory game requires the user to choose between 3 different difficulty modes: easy, medium, and hard. I thought this would be relatively straightforward as I could just use `Scanner` and `nextLine` to get the user&#39;s desired difficulty. \r\n\r\nIt is not as easy as I assumed and I&#39;m completely stuck on how to fix the error, I am using the easy mode to test out my current progress, but when I input &#39;easy&#39; the code in the &#39;easy&#39; conditional never runs. \r\n\r\nA conditional at the very bottom runs instead, that being an else statement for the hard mode that runs if neither easy nor medium is chosen. \r\n\r\nI have tried printing out my input to make sure it says &#39;easy&#39; with correct case and spelling, and still the &#39;easy&#39; conditional does not run. \r\n\r\nMy guess is that `nextLine()` is not returning correctly, or it is returning correctly and `==` just is not the right way to check for equality. I am very new to Java and I could very easily be wrong, so any and all advice is much appreciated. Thank you all!\r\n\r\n    \tScanner select_diff = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Please select a difficulty. Choose between easy, medium, or hard: &quot;);\r\n\t\tArrayList&lt;String&gt; difficulty_list = new ArrayList&lt;String&gt;();\r\n\t\tdifficulty_list.add(&quot;easy&quot;);\r\n\t\tdifficulty_list.add(&quot;medium&quot;);\r\n\t\tdifficulty_list.add(&quot;hard&quot;);\r\n\t\tString difficulty = select_diff.nextLine(); //takes user input\r\n\t\tSystem.out.println(difficulty); //to double check that I input &#39;easy&#39;\r\n\t\t//difficulty = difficulty.strip(); I thought these 2 lines were the issue, they were not\r\n\t\t//difficulty = difficulty.toLowerCase();\r\n\t\twhile (difficulty_list.contains(difficulty) == false) //this while loop handles invalid input\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Invalid Input. Please try again.&quot;);\r\n\t\t\tdifficulty = select_diff.nextLine();\r\n\t\t}\r\n\t\tif (difficulty == &quot;easy&quot;) //this conditional is never entered","title":"Scanner object return type","body":"<p>I'm writing a memory game in Java as my first college-level Java assignment and I am stumped with the way Java handles user input.</p>\n<p>The memory game requires the user to choose between 3 different difficulty modes: easy, medium, and hard. I thought this would be relatively straightforward as I could just use <code>Scanner</code> and <code>nextLine</code> to get the user's desired difficulty.</p>\n<p>It is not as easy as I assumed and I'm completely stuck on how to fix the error, I am using the easy mode to test out my current progress, but when I input 'easy' the code in the 'easy' conditional never runs.</p>\n<p>A conditional at the very bottom runs instead, that being an else statement for the hard mode that runs if neither easy nor medium is chosen.</p>\n<p>I have tried printing out my input to make sure it says 'easy' with correct case and spelling, and still the 'easy' conditional does not run.</p>\n<p>My guess is that <code>nextLine()</code> is not returning correctly, or it is returning correctly and <code>==</code> just is not the right way to check for equality. I am very new to Java and I could very easily be wrong, so any and all advice is much appreciated. Thank you all!</p>\n<pre><code>    Scanner select_diff = new Scanner(System.in);\n    System.out.println(&quot;Please select a difficulty. Choose between easy, medium, or hard: &quot;);\n    ArrayList&lt;String&gt; difficulty_list = new ArrayList&lt;String&gt;();\n    difficulty_list.add(&quot;easy&quot;);\n    difficulty_list.add(&quot;medium&quot;);\n    difficulty_list.add(&quot;hard&quot;);\n    String difficulty = select_diff.nextLine(); //takes user input\n    System.out.println(difficulty); //to double check that I input 'easy'\n    //difficulty = difficulty.strip(); I thought these 2 lines were the issue, they were not\n    //difficulty = difficulty.toLowerCase();\n    while (difficulty_list.contains(difficulty) == false) //this while loop handles invalid input\n    {\n        System.out.println(&quot;Invalid Input. Please try again.&quot;);\n        difficulty = select_diff.nextLine();\n    }\n    if (difficulty == &quot;easy&quot;) //this conditional is never entered\n</code></pre>\n"},{"tags":["java","intellij-idea","javafx","package"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1696619323,"post_id":77246828,"comment_id":136181450,"body_markdown":"The code you posted should work. It&#39;s not usually a good idea to name your classes the same as common classes in the libraries you are using, though. Make sure your `Main.java` has `import com.example.demo.rendering.Window;` (and not the JavaFX Window class).","body":"The code you posted should work. It&#39;s not usually a good idea to name your classes the same as common classes in the libraries you are using, though. Make sure your <code>Main.java</code> has <code>import com.example.demo.rendering.Window;</code> (and not the JavaFX Window class)."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1696619362,"post_id":77246828,"comment_id":136181459,"body_markdown":"See also https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other","body":"See also <a href=\"https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other\" title=\"how do i determine the correct path for fxml files css files images and other\">stackoverflow.com/questions/61531317/&hellip;</a>"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1696619654,"post_id":77246828,"comment_id":136181505,"body_markdown":"Please show your imports. Without them, your example is incomplete (i.e., not a [mre]).","body":"Please show your imports. Without them, your example is incomplete (i.e., not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."},{"owner":{"account_id":25252083,"reputation":47,"user_id":19084428,"display_name":"Alex"},"score":0,"creation_date":1696619755,"post_id":77246828,"comment_id":136181519,"body_markdown":"I apologize for not showing imports","body":"I apologize for not showing imports"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1696619838,"post_id":77246828,"comment_id":136181532,"body_markdown":"After that edit, the problem becomes clear; you&#39;re importing `javafx.stage.Window`. That won&#39;t work, because your resource is not relative to that class. As @James_D said, make sure to import your own window class: `com.example.demo.rendering.Window`. Better yet, rename your own class (but still make sure to import it).","body":"After that edit, the problem becomes clear; you&#39;re importing <code>javafx.stage.Window</code>. That won&#39;t work, because your resource is not relative to that class. As @James_D said, make sure to import your own window class: <code>com.example.demo.rendering.Window</code>. Better yet, rename your own class (but still make sure to import it)."},{"owner":{"account_id":25252083,"reputation":47,"user_id":19084428,"display_name":"Alex"},"score":1,"creation_date":1696620002,"post_id":77246828,"comment_id":136181548,"body_markdown":"yes, it worked. Thank you very much. I am learning java recently, so I didn&#39;t notice such a moment.","body":"yes, it worked. Thank you very much. I am learning java recently, so I didn&#39;t notice such a moment."}],"owner":{"account_id":25252083,"reputation":47,"user_id":19084428,"display_name":"Alex"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696620684,"answer_count":0,"score":0,"last_activity_date":1696619721,"creation_date":1696619000,"question_id":77246828,"body_markdown":"I created the default program and just renamed the classes and placed them in other packages. As a result, I ran into an error that I don&#39;t understand and don&#39;t know how to solve.\r\n*Caused by: java.lang.IllegalStateException: Location is not set.*\r\n\r\nIf I write the full path to the fxml file, then everything will work. But what needs to be changed to work with the relative path?\r\n```\r\nFXMLLoader fxmlLoader = new FXMLLoader(Window.class.getResource(&quot;hello-view.fxml&quot;));\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/VVCuB.png\r\n\r\n```\r\nsrc\r\n└── main\r\n    ├── java\r\n    │   └── com\r\n    │       └── example\r\n    │           └── demo\r\n    │               ├── main\r\n    │               │   └── Main.java\r\n    │               └── rendering\r\n    │                   └── Window.java\r\n    │                   \r\n    │                   \r\n    └── resources\r\n        └── com\r\n            └── example\r\n                └── demo\r\n                    └── rendering\r\n                        └── hello-view.fxml\r\n```\r\n\r\n**Main.java**\r\n```\r\npackage com.example.demo.main;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Stage;\r\nimport javafx.stage.Window;\r\n\r\nimport java.io.IOException;\r\npublic class Main extends Application {\r\n    @Override\r\n    public void start(Stage stage) throws IOException {\r\n        FXMLLoader fxmlLoader = new FXMLLoader(Window.class.getResource(&quot;hello-view.fxml&quot;));\r\n        Scene scene = new Scene(fxmlLoader.load(), 320, 240);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n}\r\n```\r\n**Window.java**\r\n```\r\npackage com.example.demo.rendering;\r\n\r\npublic class Window {\r\n}\r\n```\r\n**hello-view.fxml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;?import javafx.geometry.Insets?&gt;\r\n&lt;?import javafx.scene.layout.VBox?&gt;\r\n&lt;VBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n      fx:controller=&quot;com.example.demo.rendering.Window&quot;&gt;\r\n  &lt;padding&gt;\r\n    &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot;/&gt;\r\n  &lt;/padding&gt;\r\n&lt;/VBox&gt;\r\n```\r\n**module-info.java**\r\n```\r\nmodule com.example.demo {\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n\r\n    opens com.example.demo.rendering to javafx.fxml;\r\n    opens com.example.demo.main to javafx.fxml;\r\n\r\n    exports com.example.demo.rendering;\r\n    exports com.example.demo.main;\r\n}\r\n```","title":"IntelliJ IDEA packages location","body":"<p>I created the default program and just renamed the classes and placed them in other packages. As a result, I ran into an error that I don't understand and don't know how to solve.\n<em>Caused by: java.lang.IllegalStateException: Location is not set.</em></p>\n<p>If I write the full path to the fxml file, then everything will work. But what needs to be changed to work with the relative path?</p>\n<pre><code>FXMLLoader fxmlLoader = new FXMLLoader(Window.class.getResource(&quot;hello-view.fxml&quot;));\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/VVCuB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VVCuB.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>src\n└── main\n    ├── java\n    │   └── com\n    │       └── example\n    │           └── demo\n    │               ├── main\n    │               │   └── Main.java\n    │               └── rendering\n    │                   └── Window.java\n    │                   \n    │                   \n    └── resources\n        └── com\n            └── example\n                └── demo\n                    └── rendering\n                        └── hello-view.fxml\n</code></pre>\n<p><strong>Main.java</strong></p>\n<pre><code>package com.example.demo.main;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\nimport javafx.stage.Window;\n\nimport java.io.IOException;\npublic class Main extends Application {\n    @Override\n    public void start(Stage stage) throws IOException {\n        FXMLLoader fxmlLoader = new FXMLLoader(Window.class.getResource(&quot;hello-view.fxml&quot;));\n        Scene scene = new Scene(fxmlLoader.load(), 320, 240);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p><strong>Window.java</strong></p>\n<pre><code>package com.example.demo.rendering;\n\npublic class Window {\n}\n</code></pre>\n<p><strong>hello-view.fxml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;?import javafx.geometry.Insets?&gt;\n&lt;?import javafx.scene.layout.VBox?&gt;\n&lt;VBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\n      fx:controller=&quot;com.example.demo.rendering.Window&quot;&gt;\n  &lt;padding&gt;\n    &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot;/&gt;\n  &lt;/padding&gt;\n&lt;/VBox&gt;\n</code></pre>\n<p><strong>module-info.java</strong></p>\n<pre><code>module com.example.demo {\n    requires javafx.controls;\n    requires javafx.fxml;\n\n    opens com.example.demo.rendering to javafx.fxml;\n    opens com.example.demo.main to javafx.fxml;\n\n    exports com.example.demo.rendering;\n    exports com.example.demo.main;\n}\n</code></pre>\n"},{"tags":["java","jquery","ajax","servlets","get"],"comments":[{"owner":{"account_id":14376658,"reputation":383,"user_id":10384954,"display_name":"Wladimir Diskowski"},"score":0,"creation_date":1696602090,"post_id":77239707,"comment_id":136178341,"body_markdown":"I think it&#39;s CORS Problem. You need CORS Header access-control-allow-origin","body":"I think it&#39;s CORS Problem. You need CORS Header access-control-allow-origin"},{"owner":{"account_id":25734598,"reputation":11,"user_id":19489599,"display_name":"MC_Vovi"},"score":0,"creation_date":1696691524,"post_id":77239707,"comment_id":136187273,"body_markdown":"@WladimirDiskowski, can you tell me more about implementation of this technology in my case, please?","body":"@WladimirDiskowski, can you tell me more about implementation of this technology in my case, please?"}],"owner":{"account_id":25734598,"reputation":11,"user_id":19489599,"display_name":"MC_Vovi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696619455,"creation_date":1696530357,"question_id":77239707,"body_markdown":"I tried to send request with AJAX jQuery to servlet and to display the table with results, but the only thing I see after sending the response is \r\n\r\n[![enter image description here][1]][1] \r\n\r\nSo, as we see, the servlet handles the request and forms the response, but it doesn&#39;t come back to js after processing the request.\r\n\r\nAJAX:\r\n```\r\n$(document).ready(function() {\r\n    $(&#39;#form&#39;).submit(function(event) {\r\n        event.preventDefault(); // Prevent the default form submission\r\n\r\n        // Get values from form elements\r\n        let x = $(&#39;#x&#39;).val();\r\n        let y = $(&#39;#y&#39;).val();\r\n        let r = $(&#39;#r&#39;).val();\r\n\r\n        // Send an AJAX GET request to the servlet\r\n        $.get(&#39;ControllerServlet&#39;, { val_x: x, val_y: y, val_r: r }, function(result) {\r\n            let res = result.split(&quot;, &quot;);\r\n            let now = new Date();\r\n            let newData = { x: x, y: y, r: r, time: now, execution_time: res[0], result: res[1] };\r\n            console.log(x, y, r);\r\n            let newRow = &#39;&lt;tr&gt;&#39; +\r\n                &#39;&lt;td&gt;&#39; + newData.x + &#39;&lt;/td&gt;&#39; +\r\n                &#39;&lt;td&gt;&#39; + newData.y + &#39;&lt;/td&gt;&#39; +\r\n                &#39;&lt;td&gt;&#39; + newData.r + &#39;&lt;/td&gt;&#39; +\r\n                &#39;&lt;td&gt;&#39; + newData.time + &#39;&lt;/td&gt;&#39; +\r\n                &#39;&lt;td&gt;&#39; + newData.execution_time + &#39;&lt;/td&gt;&#39; +\r\n                &#39;&lt;td&gt;&#39; + newData.result + &#39;&lt;/td&gt;&#39; +\r\n                &#39;&lt;/tr&gt;&#39;;\r\n            $(&#39;#result-table tbody&#39;).append(newRow);\r\n        });\r\n    });\r\n});\r\n```\r\nAnd here is my servlet code:\r\n```\r\n@WebServlet(&quot;/ControllerServlet&quot;)\r\npublic class ControllerServlet extends HttpServlet {\r\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n        CustomResponseWrapper wrapper = new CustomResponseWrapper(resp);\r\n        req.getRequestDispatcher(&quot;/AreaCheckServlet&quot;).include(req, wrapper);\r\n\r\n        String resultString = wrapper.getRes().getResult().toString();\r\n        String queryTimeString = wrapper.getRes().getQueryTime().toString();\r\n        resp.setContentType(&quot;text/plain&quot;);\r\n        resp.getWriter().println(queryTimeString + &quot;, &quot; + resultString);\r\n        resp.getWriter().close();\r\n        resp.getWriter().flush();\r\n    }\r\n}\r\n```\r\nI tried to change the browser, rewrite the ajax into fetch api. But nothing helped and it seems that the problem is in my servlet code.\r\n\r\n  [1]: https://i.stack.imgur.com/CcbAc.png","title":"Java servlet doesn&#39;t pass response to AJAX jQuery","body":"<p>I tried to send request with AJAX jQuery to servlet and to display the table with results, but the only thing I see after sending the response is</p>\n<p><a href=\"https://i.stack.imgur.com/CcbAc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CcbAc.png\" alt=\"enter image description here\" /></a></p>\n<p>So, as we see, the servlet handles the request and forms the response, but it doesn't come back to js after processing the request.</p>\n<p>AJAX:</p>\n<pre><code>$(document).ready(function() {\n    $('#form').submit(function(event) {\n        event.preventDefault(); // Prevent the default form submission\n\n        // Get values from form elements\n        let x = $('#x').val();\n        let y = $('#y').val();\n        let r = $('#r').val();\n\n        // Send an AJAX GET request to the servlet\n        $.get('ControllerServlet', { val_x: x, val_y: y, val_r: r }, function(result) {\n            let res = result.split(&quot;, &quot;);\n            let now = new Date();\n            let newData = { x: x, y: y, r: r, time: now, execution_time: res[0], result: res[1] };\n            console.log(x, y, r);\n            let newRow = '&lt;tr&gt;' +\n                '&lt;td&gt;' + newData.x + '&lt;/td&gt;' +\n                '&lt;td&gt;' + newData.y + '&lt;/td&gt;' +\n                '&lt;td&gt;' + newData.r + '&lt;/td&gt;' +\n                '&lt;td&gt;' + newData.time + '&lt;/td&gt;' +\n                '&lt;td&gt;' + newData.execution_time + '&lt;/td&gt;' +\n                '&lt;td&gt;' + newData.result + '&lt;/td&gt;' +\n                '&lt;/tr&gt;';\n            $('#result-table tbody').append(newRow);\n        });\n    });\n});\n</code></pre>\n<p>And here is my servlet code:</p>\n<pre><code>@WebServlet(&quot;/ControllerServlet&quot;)\npublic class ControllerServlet extends HttpServlet {\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        CustomResponseWrapper wrapper = new CustomResponseWrapper(resp);\n        req.getRequestDispatcher(&quot;/AreaCheckServlet&quot;).include(req, wrapper);\n\n        String resultString = wrapper.getRes().getResult().toString();\n        String queryTimeString = wrapper.getRes().getQueryTime().toString();\n        resp.setContentType(&quot;text/plain&quot;);\n        resp.getWriter().println(queryTimeString + &quot;, &quot; + resultString);\n        resp.getWriter().close();\n        resp.getWriter().flush();\n    }\n}\n</code></pre>\n<p>I tried to change the browser, rewrite the ajax into fetch api. But nothing helped and it seems that the problem is in my servlet code.</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1696513670,"post_id":77237632,"comment_id":136165026,"body_markdown":"If you want to reference a bean you need to prefix it with `@` so something like `#{@testConfig.subTest.topics.size()}` you also need to specify the method else it will try to call the property which would be something like `getSize()` which doesn&#39;t exist. If that doesn&#39;t resolve it please include the error message you are receiving.","body":"If you want to reference a bean you need to prefix it with <code>@</code> so something like <code>#{@testConfig.subTest.topics.size()}</code> you also need to specify the method else it will try to call the property which would be something like <code>getSize()</code> which doesn&#39;t exist. If that doesn&#39;t resolve it please include the error message you are receiving."},{"owner":{"account_id":26345002,"reputation":29,"user_id":20003532,"display_name":"javaLearnMushigi"},"score":0,"creation_date":1696514222,"post_id":77237632,"comment_id":136165177,"body_markdown":"testConfig all the same, not announced as@Component, Service or Bean, I have: A component requered a bean named &#39;testConfig&#39; that could not be found","body":"testConfig all the same, not announced as@Component, Service or Bean, I have: A component requered a bean named &#39;testConfig&#39; that could not be found"},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1696519608,"post_id":77237632,"comment_id":136166454,"body_markdown":"See my answer; there is a special pseudo bean name `__listener` to get a reference to the current listener bean.","body":"See my answer; there is a special pseudo bean name <code>__listener</code> to get a reference to the current listener bean."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696520523,"creation_date":1696519566,"answer_id":77238516,"question_id":77237632,"body_markdown":"Spring for Apache Kafka has a special pseudo bean name for the current listener (`__listener` by default, but overridable on the annnotation).\r\n\r\nhttps://docs.spring.io/spring-kafka/docs/current/reference/html/#annotation-properties\r\n\r\nSo, you can use `&quot;#{__listener.testConfig.subTest.topics.size()}&quot;` but the fields must be public (or have public getters()).\r\n\r\nThe `@` prefix is not necessary.","title":"RetryableTopic - placeholder in attempts","body":"<p>Spring for Apache Kafka has a special pseudo bean name for the current listener (<code>__listener</code> by default, but overridable on the annnotation).</p>\n<p><a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#annotation-properties\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/current/reference/html/#annotation-properties</a></p>\n<p>So, you can use <code>&quot;#{__listener.testConfig.subTest.topics.size()}&quot;</code> but the fields must be public (or have public getters()).</p>\n<p>The <code>@</code> prefix is not necessary.</p>\n"}],"owner":{"account_id":26345002,"reputation":29,"user_id":20003532,"display_name":"javaLearnMushigi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77238516,"answer_count":1,"score":0,"last_activity_date":1696618977,"creation_date":1696512869,"question_id":77237632,"body_markdown":"I use ***@RetryableTopic*** with *custom naming strategy* for retry topic\r\n\r\nThe names Retry Topic are recorded in a separate in the class in the *List&lt;String&gt;* field\r\n\r\n    @Data\r\n    @ConfigurationPropertis(value = &quot;my.test&quot;)\r\n    public class TestConfig {\r\n    \r\n    \tprivate SubTest subTest = new SubTest();\r\n    \t\r\n    \tpublic static class SubTest {\r\n    \t\tString strTopics =&quot;FIRST, SECOND&quot;;\r\n    \t\tList&lt;String&gt; topics = new ArrayList&lt;&gt;(Arrays.asList(strTopics.split(&quot;,&quot;)));\r\n    \t}\r\n    \r\n    }\r\n\r\nI want to use *topics.size()* in ***@RetryableTopic*** in *attempts* as follows:\r\n\r\n    public class Test {\r\n    \r\n    \tprivate final TestConfig testConfig;\r\n    \r\n    \t@RetryableTopic(\r\n    \t\tattempts =&quot;#{testConfig.subTest.topics.size}&quot;,\r\n    \t\tbackoff = @Backoff(delay=1000),\r\n    \t\tautoCreateTopics = &quot;false&quot;)\r\n    \t)\r\n    \t@KafkaListener(topics = &quot;myTopic1&quot;,\r\n    \tpublic void processMessage(MyPojo1 message) {\r\n    \t   // ... message processing\r\n    \t}\r\n    }\r\n\r\n**spel** not work, and I don&#39;t understand how to do it correctly","title":"RetryableTopic - placeholder in attempts","body":"<p>I use <em><strong>@RetryableTopic</strong></em> with <em>custom naming strategy</em> for retry topic</p>\n<p>The names Retry Topic are recorded in a separate in the class in the <em>List</em> field</p>\n<pre><code>@Data\n@ConfigurationPropertis(value = &quot;my.test&quot;)\npublic class TestConfig {\n\n    private SubTest subTest = new SubTest();\n    \n    public static class SubTest {\n        String strTopics =&quot;FIRST, SECOND&quot;;\n        List&lt;String&gt; topics = new ArrayList&lt;&gt;(Arrays.asList(strTopics.split(&quot;,&quot;)));\n    }\n\n}\n</code></pre>\n<p>I want to use <em>topics.size()</em> in <em><strong>@RetryableTopic</strong></em> in <em>attempts</em> as follows:</p>\n<pre><code>public class Test {\n\n    private final TestConfig testConfig;\n\n    @RetryableTopic(\n        attempts =&quot;#{testConfig.subTest.topics.size}&quot;,\n        backoff = @Backoff(delay=1000),\n        autoCreateTopics = &quot;false&quot;)\n    )\n    @KafkaListener(topics = &quot;myTopic1&quot;,\n    public void processMessage(MyPojo1 message) {\n       // ... message processing\n    }\n}\n</code></pre>\n<p><strong>spel</strong> not work, and I don't understand how to do it correctly</p>\n"},{"tags":["java","spring-boot","rest","spring-data-jpa"],"comments":[{"owner":{"account_id":9641278,"reputation":1707,"user_id":7155432,"display_name":"VaibS"},"score":0,"creation_date":1622693203,"post_id":67809265,"comment_id":119866297,"body_markdown":"That must be because of the naming convention that JPA follows. Try renaming `findCustom` with JPA standard. Ex. Consider you StudentModel has `name` field, then rename method to `findByName`. It should resolve the issue.","body":"That must be because of the naming convention that JPA follows. Try renaming <code>findCustom</code> with JPA standard. Ex. Consider you StudentModel has <code>name</code> field, then rename method to <code>findByName</code>. It should resolve the issue."}],"answers":[{"tags":[],"owner":{"account_id":1688120,"reputation":790,"user_id":3346416,"display_name":"Lucia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1622714266,"creation_date":1622714266,"answer_id":67819317,"question_id":67809265,"body_markdown":"Just rename your class CustomRepositoryImpl to IStudentRepositoryImpl and it should work.\r\n\r\n\r\n          @Repository\r\n        public class IStudentRepositoryImpl implements ICustomRepository {\r\n        \r\n        @PersistenceContext\r\n            private EntityManager manager;\r\n            \r\n            @Override\r\n            public List&lt;StudentModel&gt; findCustom (String name){\r\n                //METHOD\r\n    \r\n            }\r\n        \r\n        }\r\n\r\nBelow is the documentation from Spring\r\n\r\n&gt; Configuration If you use namespace configuration, the repository\r\n&gt; infrastructure tries to autodetect custom implementations by scanning\r\n&gt; for classes below the package we found a repository in. These classes\r\n&gt; need to follow the naming convention of appending the namespace\r\n&gt; element&#39;s attribute repository-impl-postfix to the found repository\r\n&gt; interface name. This postfix defaults to Impl.\r\n\r\nhttps://docs.spring.io/spring-data/data-commons/docs/current-SNAPSHOT/reference/html/#repositories.custom-implementations","title":"Implement Interface with custom method and JpaRepository","body":"<p>Just rename your class CustomRepositoryImpl to IStudentRepositoryImpl and it should work.</p>\n<pre><code>      @Repository\n    public class IStudentRepositoryImpl implements ICustomRepository {\n    \n    @PersistenceContext\n        private EntityManager manager;\n        \n        @Override\n        public List&lt;StudentModel&gt; findCustom (String name){\n            //METHOD\n\n        }\n    \n    }\n</code></pre>\n<p>Below is the documentation from Spring</p>\n<blockquote>\n<p>Configuration If you use namespace configuration, the repository\ninfrastructure tries to autodetect custom implementations by scanning\nfor classes below the package we found a repository in. These classes\nneed to follow the naming convention of appending the namespace\nelement's attribute repository-impl-postfix to the found repository\ninterface name. This postfix defaults to Impl.</p>\n</blockquote>\n<p><a href=\"https://docs.spring.io/spring-data/data-commons/docs/current-SNAPSHOT/reference/html/#repositories.custom-implementations\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/data-commons/docs/current-SNAPSHOT/reference/html/#repositories.custom-implementations</a></p>\n"}],"owner":{"account_id":21709688,"reputation":23,"user_id":16021488,"display_name":"Lucas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":687,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67819317,"answer_count":1,"score":1,"last_activity_date":1696618959,"creation_date":1622652223,"question_id":67809265,"body_markdown":" I&#39;m working on an API Rest, registration  for students, using Domain Driven Design. So my problem is: I&#39;m trying to add a custom method with the JpaRepository. My Project hierarchy is:\r\n\r\n    com.wizardry.witchcraft.domain.model.StudentModel;  \r\n    com.wizardry.witchcraft.infraestructure.repository.CustomRepositoryImpl;  \r\n    com.wizardry.witchcraft.domain.repository.IStudentRepository;  \r\n    com.wizardry.witchcraft.domain.repository.ICustomRepository;\r\n    com.wizardry.witchcraft.api.controller.TesteController2;\r\n    com.wizardry.witchcraft.api.controller.StudentController;\r\n\r\n \r\nSo first I&#39;ve created the method Implementation\r\n\r\n   \r\n\r\n     import javax.persistence.EntityManager;\r\n        import javax.persistence.PersistenceContext;\r\n        import org.springframework.stereotype.Repository;\r\n        import com.wizardry.witchcraft.domain.model.StudentModel;\r\n        import com.wizardry.witchcraft.domain.repository.ICustomRepository;\r\n    \r\n            @Repository\r\n            public class CustomRepositoryImpl implements ICustomRepository {\r\n            \r\n            @PersistenceContext\r\n            \tprivate EntityManager manager;\r\n            \t\r\n            \t@Override\r\n            \tpublic List&lt;StudentModel&gt; findCustom (String name){\r\n            \t\t//METHOD\r\n        \r\n            \t}\r\n            \r\n            }\r\n\r\n\r\nAnd the Interface:\r\n\r\n    import com.wizardry.witchcraft.domain.model.StudentModel;\r\n    \r\n    public interface ICustomRepository {\r\n    \r\n    \tList&lt;StudentModel&gt; findCustom(String name);\r\n    \r\n    }\r\n\r\n\r\nAnd to test it out I created a new Controller to don&#39;t mess with my working one, `TesteController2`, and it worked fine. So  my next step was extended the `ICustomRepository` in the `IStudentRepository`, made the changes in `TesteController2` and then Spring won&#39;t find my `findCustom` method anymore, It tries to create the method as a JPA keyword and return and error. This is my repository interface:\r\n\r\n\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.data.repository.query.Param;\r\n    import org.springframework.stereotype.Repository;\r\n    import com.wizardry.witchcraft.domain.model.StudentModel;\r\n    \r\n    @Repository\r\n    public interface IStudentRepository extends ICustomRepository, JpaRepository&lt;StudentModel, Long&gt; {\r\n    \t\r\n    \t  List&lt;StudentModel&gt; queryByName(String name, @Param (&quot;id&quot;) Long school);\r\n    \t  \r\n    \t  List&lt;StudentModel&gt; queryFirstByNameContaining(String name);\r\n    \t  \r\n    \t  List&lt;StudentModel&gt; queryTop2ByNameContaining(String name);\r\n    \t  \r\n    \t  int countByWizardingSchoolModelId(Long school);\r\n    \t \r\n    \r\n    }\r\n\r\nAnd the TesteController2:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.ResponseStatus;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import com.wizardry.witchcraft.domain.model.StudentModel;\r\n    import com.wizardry.witchcraft.domain.repository.IStudentRepository;\r\n    \r\n    @RestController\r\n    @RequestMapping(value = &quot;/test&quot;)\r\n    public class TesteController2 {\r\n    \r\n    \t@Autowired\r\n    \tprivate IStudentRepository iStudentRepository;\r\n    \r\n    \t@ResponseStatus(HttpStatus.ACCEPTED)\r\n    \t@GetMapping\r\n    \tpublic List&lt;StudentModel&gt; findCustom2(String name) {\r\n    \t\treturn iStudentRepository.findCustom(name);\r\n    \t}\r\n    \t\r\n    }\r\n\r\nPS: I have a Service Layer com.wizardry.witchcraft.domain.service.RegisterStudentService however\r\nthe method in question does not go through it (yet!) because I&#39;m testing, I tried to pass by the service and see what happen but give the same ERROR.\r\n\r\n\r\n&gt; ERROR: org.springframework.beans.factory.UnsatisfiedDependencyException:  \r\n Error creating bean with name &#39;studentController&#39;: Unsatisfied dependency expressed through field &#39;registerStudentService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;registerStudentService&#39;: Unsatisfied dependency expressed through field &#39;iStudentRepository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;IStudentRepository&#39; defined in com.wizardry.witchcraft.domain.repository.IStudentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List com.wizardry.witchcraft.domain.repository.ICustomRepository.findCustom(java.lang.String)! No property findCustom found for type StudentModel!\r\n\r\n\r\n\t\r\nI&#39;m really lost here.\r\n","title":"Implement Interface with custom method and JpaRepository","body":"<p>I'm working on an API Rest, registration  for students, using Domain Driven Design. So my problem is: I'm trying to add a custom method with the JpaRepository. My Project hierarchy is:</p>\n<pre><code>com.wizardry.witchcraft.domain.model.StudentModel;  \ncom.wizardry.witchcraft.infraestructure.repository.CustomRepositoryImpl;  \ncom.wizardry.witchcraft.domain.repository.IStudentRepository;  \ncom.wizardry.witchcraft.domain.repository.ICustomRepository;\ncom.wizardry.witchcraft.api.controller.TesteController2;\ncom.wizardry.witchcraft.api.controller.StudentController;\n</code></pre>\n<p>So first I've created the method Implementation</p>\n<pre><code> import javax.persistence.EntityManager;\n    import javax.persistence.PersistenceContext;\n    import org.springframework.stereotype.Repository;\n    import com.wizardry.witchcraft.domain.model.StudentModel;\n    import com.wizardry.witchcraft.domain.repository.ICustomRepository;\n\n        @Repository\n        public class CustomRepositoryImpl implements ICustomRepository {\n        \n        @PersistenceContext\n            private EntityManager manager;\n            \n            @Override\n            public List&lt;StudentModel&gt; findCustom (String name){\n                //METHOD\n    \n            }\n        \n        }\n</code></pre>\n<p>And the Interface:</p>\n<pre><code>import com.wizardry.witchcraft.domain.model.StudentModel;\n\npublic interface ICustomRepository {\n\n    List&lt;StudentModel&gt; findCustom(String name);\n\n}\n</code></pre>\n<p>And to test it out I created a new Controller to don't mess with my working one, <code>TesteController2</code>, and it worked fine. So  my next step was extended the <code>ICustomRepository</code> in the <code>IStudentRepository</code>, made the changes in <code>TesteController2</code> and then Spring won't find my <code>findCustom</code> method anymore, It tries to create the method as a JPA keyword and return and error. This is my repository interface:</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\nimport com.wizardry.witchcraft.domain.model.StudentModel;\n\n@Repository\npublic interface IStudentRepository extends ICustomRepository, JpaRepository&lt;StudentModel, Long&gt; {\n    \n      List&lt;StudentModel&gt; queryByName(String name, @Param (&quot;id&quot;) Long school);\n      \n      List&lt;StudentModel&gt; queryFirstByNameContaining(String name);\n      \n      List&lt;StudentModel&gt; queryTop2ByNameContaining(String name);\n      \n      int countByWizardingSchoolModelId(Long school);\n     \n\n}\n</code></pre>\n<p>And the TesteController2:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.ResponseStatus;\nimport org.springframework.web.bind.annotation.RestController;\nimport com.wizardry.witchcraft.domain.model.StudentModel;\nimport com.wizardry.witchcraft.domain.repository.IStudentRepository;\n\n@RestController\n@RequestMapping(value = &quot;/test&quot;)\npublic class TesteController2 {\n\n    @Autowired\n    private IStudentRepository iStudentRepository;\n\n    @ResponseStatus(HttpStatus.ACCEPTED)\n    @GetMapping\n    public List&lt;StudentModel&gt; findCustom2(String name) {\n        return iStudentRepository.findCustom(name);\n    }\n    \n}\n</code></pre>\n<p>PS: I have a Service Layer com.wizardry.witchcraft.domain.service.RegisterStudentService however\nthe method in question does not go through it (yet!) because I'm testing, I tried to pass by the service and see what happen but give the same ERROR.</p>\n<blockquote>\n<p>ERROR: org.springframework.beans.factory.UnsatisfiedDependencyException:<br />\nError creating bean with name 'studentController': Unsatisfied dependency expressed through field 'registerStudentService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'registerStudentService': Unsatisfied dependency expressed through field 'iStudentRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'IStudentRepository' defined in com.wizardry.witchcraft.domain.repository.IStudentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List com.wizardry.witchcraft.domain.repository.ICustomRepository.findCustom(java.lang.String)! No property findCustom found for type StudentModel!</p>\n</blockquote>\n<p>I'm really lost here.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1696584193,"post_id":77243262,"comment_id":136174790,"body_markdown":"Hint: you should read all the inputs, *then* write the outputs.","body":"Hint: you should read all the inputs, <i>then</i> write the outputs."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1696584396,"post_id":77243262,"comment_id":136174821,"body_markdown":"You should also check your loop condition... currently, with your input of &quot;2&quot; you&#39;re actually going to ask for 103 numbers...","body":"You should also check your loop condition... currently, with your input of &quot;2&quot; you&#39;re actually going to ask for 103 numbers..."},{"owner":{"account_id":11713219,"reputation":441,"user_id":8574536,"display_name":"aminator"},"score":0,"creation_date":1696584467,"post_id":77243262,"comment_id":136174829,"body_markdown":"are you sure, that the line feed is not being printed. How did you check just that?","body":"are you sure, that the line feed is not being printed. How did you check just that?"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":1,"creation_date":1696584494,"post_id":77243262,"comment_id":136174835,"body_markdown":"Why is `i = -100` ?","body":"Why is <code>i = -100</code> ?"},{"owner":{"account_id":14339961,"reputation":394,"user_id":10358416,"display_name":"lema"},"score":1,"creation_date":1696584909,"post_id":77243262,"comment_id":136174924,"body_markdown":"Also, within the loop, do not use your variable `numVals` to store the next int from the Scanner. Store the integers in another variable because in your solution the next read integer might stop the loop depending on its value. That&#39;s probably also why you decided to start the loop at -100.","body":"Also, within the loop, do not use your variable <code>numVals</code> to store the next int from the Scanner. Store the integers in another variable because in your solution the next read integer might stop the loop depending on its value. That&#39;s probably also why you decided to start the loop at -100."}],"answers":[{"tags":[],"owner":{"account_id":26261437,"reputation":60,"user_id":19932696,"display_name":"Thomas Lin&#233;"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696588312,"creation_date":1696588312,"answer_id":77243732,"question_id":77243262,"body_markdown":"I will sum up what was said in the comments : \r\n- The start of the loop should be i = 0;\r\n- numVals should not be overwritten as it is the condition to exit your loop, if you want to store the value of scnr.nextInt() you should create a new variable. Also if one of the number read is -500 for example it will loop forever.\r\n- Finally to check if the new line is correctly print you can print something else after the System.out.println() (Don&#39;t forget to remove it after)\r\n\r\nHere is what the code should look like : \r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class AngleBrackets {\r\n       public static void main(String[] args) {\r\n          Scanner scnr = new Scanner(System.in);\r\n          int numVals;\r\n    \r\n          numVals = scnr.nextInt();\r\n          for(int i = 0; i &lt;= numVals; i++) {\r\n             int newVal = scnr.nextInt();\r\n             System.out.print(&quot;&lt;&quot; + newVal + &quot;&gt;&quot;);\r\n          }\r\n          System.out.println();\r\n          System.out.print(&quot;Is this a new line ?&quot;);\r\n       }\r\n    }\r\n\r\nYou can also replace \r\n\r\n    int newVal = scnr.nextInt();\r\n    System.out.print(&quot;&lt;&quot; + newVal + &quot;&gt;&quot;);\r\n\r\nby \r\n\r\n    System.out.print(&quot;&lt;&quot; + scnr.nextInt() + &quot;&gt;&quot;);\r\n\r\n","title":"Why is my print statement after my for loop not printing?","body":"<p>I will sum up what was said in the comments :</p>\n<ul>\n<li>The start of the loop should be i = 0;</li>\n<li>numVals should not be overwritten as it is the condition to exit your loop, if you want to store the value of scnr.nextInt() you should create a new variable. Also if one of the number read is -500 for example it will loop forever.</li>\n<li>Finally to check if the new line is correctly print you can print something else after the System.out.println() (Don't forget to remove it after)</li>\n</ul>\n<p>Here is what the code should look like :</p>\n<pre><code>import java.util.Scanner;\n\npublic class AngleBrackets {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      int numVals;\n\n      numVals = scnr.nextInt();\n      for(int i = 0; i &lt;= numVals; i++) {\n         int newVal = scnr.nextInt();\n         System.out.print(&quot;&lt;&quot; + newVal + &quot;&gt;&quot;);\n      }\n      System.out.println();\n      System.out.print(&quot;Is this a new line ?&quot;);\n   }\n}\n</code></pre>\n<p>You can also replace</p>\n<pre><code>int newVal = scnr.nextInt();\nSystem.out.print(&quot;&lt;&quot; + newVal + &quot;&gt;&quot;);\n</code></pre>\n<p>by</p>\n<pre><code>System.out.print(&quot;&lt;&quot; + scnr.nextInt() + &quot;&gt;&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696618828,"creation_date":1696618828,"answer_id":77246807,"question_id":77243262,"body_markdown":"You&#39;re re-assigning _numVals_ within the _for-loop_.\r\n\r\nInstead, just print the value.\r\n\r\n```java\r\nScanner scnr = new Scanner(System.in);\r\nint numVals;\r\n\r\nnumVals = scnr.nextInt();\r\nfor (int i = 0; i &lt; numVals; i++)\r\n    System.out.printf(&quot;&lt;%d&gt;&quot;, scnr.nextInt());\r\nSystem.out.println();\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n3\r\n1 2 3\r\n&lt;1&gt;&lt;2&gt;&lt;3&gt;\r\n\r\n```","title":"Why is my print statement after my for loop not printing?","body":"<p>You're re-assigning <em>numVals</em> within the <em>for-loop</em>.</p>\n<p>Instead, just print the value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner scnr = new Scanner(System.in);\nint numVals;\n\nnumVals = scnr.nextInt();\nfor (int i = 0; i &lt; numVals; i++)\n    System.out.printf(&quot;&lt;%d&gt;&quot;, scnr.nextInt());\nSystem.out.println();\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>3\n1 2 3\n&lt;1&gt;&lt;2&gt;&lt;3&gt;\n\n</code></pre>\n"}],"owner":{"account_id":29611107,"reputation":11,"user_id":22694338,"display_name":"cmc29"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1696618828,"creation_date":1696584038,"question_id":77243262,"body_markdown":"I&#39;m a first year compsci major and I can&#39;t figure out how to solve this programming assignment. The specific problem is that I&#39;m unable to create a new line at the end of the output. I&#39;ve been able to figure out how to create new lines in between the integers, but I need to have a new line only after the last one.\r\n\r\nHere&#39;s the instructions:\r\n\r\n&gt; Read integer numVals from input as the number of integers to be read next. Use a loop to read the remaining integers from input. Output all integers on the same line, and surround each integer with angle brackets. Lastly, end with a newline.\r\n&gt; \r\n&gt; Ex: If the input is:\r\n&gt; \r\n&gt; 2   \r\n&gt; 95 60  \r\n&gt; then the output is:\r\n&gt; \r\n&gt; &lt;95&gt;&lt;60&gt;\r\n\r\nAnd the code I wrote:\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class AngleBrackets {\r\n   public static void main(String[] args) {\r\n      Scanner scnr = new Scanner(System.in);\r\n      int numVals;\r\n\r\n      int i;\r\n      numVals = scnr.nextInt();\r\n      for(i = -100; i &lt;= numVals; i++) {\r\n         numVals = scnr.nextInt();\r\n         System.out.print(&quot;&lt;&quot; + numVals + &quot;&gt;&quot;);\r\n      }\r\n      System.out.println();\r\n\r\n   }\r\n}\r\n\r\n```\r\n\r\n\r\nI have tried to put the code within the loop, but that makes it print a new line after every integer. I have also tried putting the print after the for loop however it is not printing. I also looked up similar codes on here, but they do not exactly give me the answer that I am looking for.","title":"Why is my print statement after my for loop not printing?","body":"<p>I'm a first year compsci major and I can't figure out how to solve this programming assignment. The specific problem is that I'm unable to create a new line at the end of the output. I've been able to figure out how to create new lines in between the integers, but I need to have a new line only after the last one.</p>\n<p>Here's the instructions:</p>\n<blockquote>\n<p>Read integer numVals from input as the number of integers to be read next. Use a loop to read the remaining integers from input. Output all integers on the same line, and surround each integer with angle brackets. Lastly, end with a newline.</p>\n<p>Ex: If the input is:</p>\n<p>2<br />\n95 60<br />\nthen the output is:</p>\n<p>&lt;95&gt;&lt;60&gt;</p>\n</blockquote>\n<p>And the code I wrote:</p>\n<pre><code>import java.util.Scanner;\n\npublic class AngleBrackets {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      int numVals;\n\n      int i;\n      numVals = scnr.nextInt();\n      for(i = -100; i &lt;= numVals; i++) {\n         numVals = scnr.nextInt();\n         System.out.print(&quot;&lt;&quot; + numVals + &quot;&gt;&quot;);\n      }\n      System.out.println();\n\n   }\n}\n\n</code></pre>\n<p>I have tried to put the code within the loop, but that makes it print a new line after every integer. I have also tried putting the print after the for loop however it is not printing. I also looked up similar codes on here, but they do not exactly give me the answer that I am looking for.</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1696320233,"post_id":77220557,"comment_id":136134398,"body_markdown":"Did you add `@EnableWebSecuriry` so the auto-configuration (partially) backsoff?","body":"Did you add <code>@EnableWebSecuriry</code> so the auto-configuration (partially) backsoff?"},{"owner":{"account_id":7636889,"reputation":1,"user_id":5790195,"display_name":"M&#225;rkus Viktor"},"score":0,"creation_date":1696321311,"post_id":77220557,"comment_id":136134573,"body_markdown":"Thank for the tip, I tried now, added &#39;@EnableWebSecurity&#39; to the main class in app: not worked; after it I added it to the configuration class in basic: the result is the same, not working. :(\nBut before it the &#39;@EnableWebSecurity&#39; annotation not existed in the code.","body":"Thank for the tip, I tried now, added &#39;@EnableWebSecurity&#39; to the main class in app: not worked; after it I added it to the configuration class in basic: the result is the same, not working. :( But before it the &#39;@EnableWebSecurity&#39; annotation not existed in the code."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1696321407,"post_id":77220557,"comment_id":136134584,"body_markdown":"Is the configuration being scanned and detected?","body":"Is the configuration being scanned and detected?"},{"owner":{"account_id":7636889,"reputation":1,"user_id":5790195,"display_name":"M&#225;rkus Viktor"},"score":0,"creation_date":1696322001,"post_id":77220557,"comment_id":136134680,"body_markdown":"When I turn on logging.level.org.springframework.core.io.support=DEBUG, logging.level.org.springframework.context.annotation=DEBUG; in the log there is a relevant line: &#39;o.s.c.a.ClassPathBeanDefinitionScanner   : Identified candidate component class: file [C:\\workspace\\...\\config\\Oauth2SecurityConfiguration.class]&#39;\nAnd when the application starts, breakpoint stops in the basic module oauth2SecurityFilterChain method.\nIs there anything that I can check?","body":"When I turn on logging.level.org.springframework.core.io.support=DEBUG, logging.level.org.springframework.context.annotation=DEBUG; in the log there is a relevant line: &#39;o.s.c.a.ClassPathBeanDefinitionScanner   : Identified candidate component class: file [C:\\workspace\\...\\config\\Oauth2SecurityConfiguration.class]&#39; And when the application starts, breakpoint stops in the basic module oauth2SecurityFilterChain method. Is there anything that I can check?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1696322138,"post_id":77220557,"comment_id":136134700,"body_markdown":"That should do the trick then. Have you tried naming the method `securityFilterChain` instead of `oauth2SecurityFilterChain`. Or adding a `name=&quot;securityFilterChain&quot;` to the `@Bean`?","body":"That should do the trick then. Have you tried naming the method <code>securityFilterChain</code> instead of <code>oauth2SecurityFilterChain</code>. Or adding a <code>name=&quot;securityFilterChain&quot;</code> to the <code>@Bean</code>?"},{"owner":{"account_id":7636889,"reputation":1,"user_id":5790195,"display_name":"M&#225;rkus Viktor"},"score":0,"creation_date":1696322723,"post_id":77220557,"comment_id":136134797,"body_markdown":"Now I tried ` @Bean(name = &quot;securityFilterChain&quot;)\n    public SecurityFilterChain oauth2SecurityFilterChain(HttpSecurity http) throws Exception {` in basic module, still not working. (I&#39;m getting http 403)\nThe interesting thing is that i moved the configuration into the App module worked without any other configuration","body":"Now I tried ` @Bean(name = &quot;securityFilterChain&quot;)     public SecurityFilterChain oauth2SecurityFilterChain(HttpSecurity http) throws Exception {` in basic module, still not working. (I&#39;m getting http 403) The interesting thing is that i moved the configuration into the App module worked without any other configuration"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1696323255,"post_id":77220557,"comment_id":136134892,"body_markdown":"What do you mean with *moved the configuration into the App module*? Copy the class? The bean method?","body":"What do you mean with <i>moved the configuration into the App module</i>? Copy the class? The bean method?"},{"owner":{"account_id":7636889,"reputation":1,"user_id":5790195,"display_name":"M&#225;rkus Viktor"},"score":0,"creation_date":1696323400,"post_id":77220557,"comment_id":136134917,"body_markdown":"Yes, I copied the whole Configuration class from basic module to the app module, and comment it out from the basic module so basicly moved the entire class","body":"Yes, I copied the whole Configuration class from basic module to the app module, and comment it out from the basic module so basicly moved the entire class"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1696324054,"post_id":77220557,"comment_id":136135046,"body_markdown":"Weird. What happens if you remove the `@ComponentScan` and use an `@Import(YourConfiguration.class)` instead?","body":"Weird. What happens if you remove the <code>@ComponentScan</code> and use an <code>@Import(YourConfiguration.class)</code> instead?"},{"owner":{"account_id":7636889,"reputation":1,"user_id":5790195,"display_name":"M&#225;rkus Viktor"},"score":0,"creation_date":1696325474,"post_id":77220557,"comment_id":136135327,"body_markdown":"This was seems working, oauth login appears, thanks for the tip!\nBut I have more class to load, so now I have to find a way to load classes that previously loaded by the ComponentScan annotation.\nMy current config like this:\n\n//@ComponentScan(basePackages = {&quot;com.mypackage&quot;})\n@Import({Oauth2SecurityConfiguration.class, AuthUtil.class, AuthProperties.class})\n\nThese 2 classes were necessary to get the application started, but i need a lot more in runtime.","body":"This was seems working, oauth login appears, thanks for the tip! But I have more class to load, so now I have to find a way to load classes that previously loaded by the ComponentScan annotation. My current config like this:  //@ComponentScan(basePackages = {&quot;com.mypackage&quot;}) @Import({Oauth2SecurityConfiguration.class, AuthUtil.class, AuthProperties.class})  These 2 classes were necessary to get the application started, but i need a lot more in runtime."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1696325641,"post_id":77220557,"comment_id":136135357,"body_markdown":"Still is weird that the `@Import` works. Instead of an `@ComponentScan` what happens if you use `scanBasePackages` on the `@SpringBootApplication`. Include both the package in which the `@SpringBootApplication` is in and the additional one you want to scan.","body":"Still is weird that the <code>@Import</code> works. Instead of an <code>@ComponentScan</code> what happens if you use <code>scanBasePackages</code> on the <code>@SpringBootApplication</code>. Include both the package in which the <code>@SpringBootApplication</code> is in and the additional one you want to scan."},{"owner":{"account_id":7636889,"reputation":1,"user_id":5790195,"display_name":"M&#225;rkus Viktor"},"score":0,"creation_date":1696326844,"post_id":77220557,"comment_id":136135558,"body_markdown":"I tried different ways with scanBasePackaes, none of them worked:\nscanBasePackages = {&quot;com.mypackage&quot;, &quot;com.mypackage.config&quot;})\nscanBasePackages = {&quot;com.mypackage&quot;, &quot;com.mypackage.config.Oauth2SecurityConfiguration&quot;})\nscanBasePackages = {&quot;com.mypackage&quot;})\n\nComponentScan and Import was removed","body":"I tried different ways with scanBasePackaes, none of them worked: scanBasePackages = {&quot;com.mypackage&quot;, &quot;com.mypackage.config&quot;}) scanBasePackages = {&quot;com.mypackage&quot;, &quot;com.mypackage.config.Oauth2SecurityConfiguration&quot;}) scanBasePackages = {&quot;com.mypackage&quot;})  ComponentScan and Import was removed"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1696327072,"post_id":77220557,"comment_id":136135599,"body_markdown":"If the package is already covered by the main package you don&#39;t need an `@ComponentScan`. But there must be something special in your dedicated project that stops it from being registered correctly/fully. With all you tried and added I suspect there is too little information here and with the snippets we have we will not be able to answer it.","body":"If the package is already covered by the main package you don&#39;t need an <code>@ComponentScan</code>. But there must be something special in your dedicated project that stops it from being registered correctly/fully. With all you tried and added I suspect there is too little information here and with the snippets we have we will not be able to answer it."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1696383864,"post_id":77220557,"comment_id":136144730,"body_markdown":"You could [edit] your question to update it instead of adding comments. Code is unreadable in comments, and they are shown by number of votes, not chronologically. Would be easier to have everything in one place rather than expecting people to put all the puzzle pieces everything together.","body":"You could <a href=\"https://stackoverflow.com/posts/77220557/edit\">edit</a> your question to update it instead of adding comments. Code is unreadable in comments, and they are shown by number of votes, not chronologically. Would be easier to have everything in one place rather than expecting people to put all the puzzle pieces everything together."}],"answers":[{"tags":[],"owner":{"account_id":7636889,"reputation":1,"user_id":5790195,"display_name":"M&#225;rkus Viktor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696618626,"creation_date":1696618626,"answer_id":77246792,"question_id":77220557,"body_markdown":"I found the solution; there were multiple securityFilterChains defined in my application, and their settings conflicted. Using SecurityMatcher resolved the issue.","title":"Spring Boot Spring Security Configuration Issue After Upgrade to 3.1.3","body":"<p>I found the solution; there were multiple securityFilterChains defined in my application, and their settings conflicted. Using SecurityMatcher resolved the issue.</p>\n"}],"owner":{"account_id":7636889,"reputation":1,"user_id":5790195,"display_name":"M&#225;rkus Viktor"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":367,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696618626,"creation_date":1696319802,"question_id":77220557,"body_markdown":"I&#39;m upgrading a Spring Boot application from version 2.7.14 to 3.1.3, and I&#39;m having issues with my Spring Security configuration. The relevant security configuration is stored in a separate JAR file, and I&#39;ve refactored my security config class to use SecurityFilterChain. However, the new configuration doesn&#39;t seem to take effect.\r\n\r\nHere&#39;s a simplified structure of my application:\r\n\r\nBasic module (Contains SecurityConfig in com.mypackage.config)\r\nApp module (Depends on the basic module)\r\nIn the app module, I have the following configuration:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.mypackage&lt;/groupId&gt;\r\n    &lt;artifactId&gt;basic-auth&lt;/artifactId&gt;\r\n    &lt;version&gt;${basic.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAnd in the main class of the app module there is this setting:\r\n\r\n```\r\n@ComponentScan(basePackages = {&quot;com.mypackage&quot;})\r\n```\r\n\r\nHere&#39;s my old and new security configuration classes:\r\n\r\nOld Configuration (Working):\r\n\r\n```\r\n@Configuration\r\n@ConditionalOnProperty(value = &quot;auth.oauth2.enabled&quot;, havingValue = &quot;true&quot;)\r\n@Order(26)\r\npublic class Oauth2SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n      // ...\r\n    }\r\n}\r\n```\r\n\r\nNew Configuration (Not working):\r\n\r\n```\r\n@Configuration\r\n@ConditionalOnProperty(value = &quot;auth.oauth2.enabled&quot;, havingValue = &quot;true&quot;)\r\n@Order(26)\r\npublic class Oauth2SecurityConfiguration {\r\n    @Bean\r\n    public SecurityFilterChain oauth2SecurityFilterChain(HttpSecurity http) throws Exception {\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\nWhen I use the new Oauth2SecurityConfiguration, it doesn&#39;t seem to get applied. However, if I copy the exact same class into my application, it works as expected.\r\n\r\nWhen the application starts, I can see through debugging that the Oauth2SecurityConfiguration  class is being instantiated when its in the basic module.\r\n\r\nWhen I enabled debug, the filterChains seem like this:\r\n\r\nConfig class in basic, not working:\r\n\r\n```\r\nSecurity filter chain: [\r\n  DisableEncodeUrlFilter\r\n  WebAsyncManagerIntegrationFilter\r\n  SecurityContextHolderFilter\r\n  HeaderWriterFilter\r\n  LogoutFilter\r\n  RequestCacheAwareFilter\r\n  SecurityContextHolderAwareRequestFilter\r\n  AnonymousAuthenticationFilter\r\n  ExceptionTranslationFilter\r\n  AuthorizationFilter\r\n]\r\n```\r\n\r\nConfig class moved to application, working\r\n\r\n```\r\nSecurity filter chain: [\r\n  DisableEncodeUrlFilter\r\n  WebAsyncManagerIntegrationFilter\r\n  SecurityContextHolderFilter\r\n  HeaderWriterFilter\r\n  LogoutFilter\r\n  OAuth2AuthorizationRequestRedirectFilter\r\n  OAuth2LoginAuthenticationFilter\r\n  DefaultLoginPageGeneratingFilter\r\n  DefaultLogoutPageGeneratingFilter\r\n  RequestCacheAwareFilter\r\n  SecurityContextHolderAwareRequestFilter\r\n  AnonymousAuthenticationFilter\r\n  ExceptionTranslationFilter\r\n  AuthorizationFilter\r\n]\r\n```\r\n\r\nAny insights into why the new configuration isn&#39;t recognized would be appreciated. \r\n\r\nThank you!","title":"Spring Boot Spring Security Configuration Issue After Upgrade to 3.1.3","body":"<p>I'm upgrading a Spring Boot application from version 2.7.14 to 3.1.3, and I'm having issues with my Spring Security configuration. The relevant security configuration is stored in a separate JAR file, and I've refactored my security config class to use SecurityFilterChain. However, the new configuration doesn't seem to take effect.</p>\n<p>Here's a simplified structure of my application:</p>\n<p>Basic module (Contains SecurityConfig in com.mypackage.config)\nApp module (Depends on the basic module)\nIn the app module, I have the following configuration:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.mypackage&lt;/groupId&gt;\n    &lt;artifactId&gt;basic-auth&lt;/artifactId&gt;\n    &lt;version&gt;${basic.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And in the main class of the app module there is this setting:</p>\n<pre><code>@ComponentScan(basePackages = {&quot;com.mypackage&quot;})\n</code></pre>\n<p>Here's my old and new security configuration classes:</p>\n<p>Old Configuration (Working):</p>\n<pre><code>@Configuration\n@ConditionalOnProperty(value = &quot;auth.oauth2.enabled&quot;, havingValue = &quot;true&quot;)\n@Order(26)\npublic class Oauth2SecurityConfiguration extends WebSecurityConfigurerAdapter {\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n      // ...\n    }\n}\n</code></pre>\n<p>New Configuration (Not working):</p>\n<pre><code>@Configuration\n@ConditionalOnProperty(value = &quot;auth.oauth2.enabled&quot;, havingValue = &quot;true&quot;)\n@Order(26)\npublic class Oauth2SecurityConfiguration {\n    @Bean\n    public SecurityFilterChain oauth2SecurityFilterChain(HttpSecurity http) throws Exception {\n        // ...\n    }\n}\n</code></pre>\n<p>When I use the new Oauth2SecurityConfiguration, it doesn't seem to get applied. However, if I copy the exact same class into my application, it works as expected.</p>\n<p>When the application starts, I can see through debugging that the Oauth2SecurityConfiguration  class is being instantiated when its in the basic module.</p>\n<p>When I enabled debug, the filterChains seem like this:</p>\n<p>Config class in basic, not working:</p>\n<pre><code>Security filter chain: [\n  DisableEncodeUrlFilter\n  WebAsyncManagerIntegrationFilter\n  SecurityContextHolderFilter\n  HeaderWriterFilter\n  LogoutFilter\n  RequestCacheAwareFilter\n  SecurityContextHolderAwareRequestFilter\n  AnonymousAuthenticationFilter\n  ExceptionTranslationFilter\n  AuthorizationFilter\n]\n</code></pre>\n<p>Config class moved to application, working</p>\n<pre><code>Security filter chain: [\n  DisableEncodeUrlFilter\n  WebAsyncManagerIntegrationFilter\n  SecurityContextHolderFilter\n  HeaderWriterFilter\n  LogoutFilter\n  OAuth2AuthorizationRequestRedirectFilter\n  OAuth2LoginAuthenticationFilter\n  DefaultLoginPageGeneratingFilter\n  DefaultLogoutPageGeneratingFilter\n  RequestCacheAwareFilter\n  SecurityContextHolderAwareRequestFilter\n  AnonymousAuthenticationFilter\n  ExceptionTranslationFilter\n  AuthorizationFilter\n]\n</code></pre>\n<p>Any insights into why the new configuration isn't recognized would be appreciated.</p>\n<p>Thank you!</p>\n"},{"tags":["java","hadoop","mapreduce","hadoop-yarn","hadoop2"],"owner":{"account_id":22776702,"reputation":49,"user_id":16933245,"display_name":"KEIFTH YANG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696618406,"creation_date":1696618406,"question_id":77246776,"body_markdown":"Im trying to load cache file from the output of another mapreduce by java while writing mapreduce\r\n\r\nI tried\r\n\r\n    FileOutputFormat.setOutputPath(job1, new Path(out, &quot;out1&quot;));\r\n    ...\r\n    Job job2 = Job.getInstance(conf, &quot;Second&quot;);\r\n    job2.addCacheArchive(new URI(new Path(out, &quot;out1&quot;).toString()));\r\n\r\nand I set reducer by \r\n\r\n    protected void setup(Context context) throws IOException, InterruptedException {\r\n                super.setup(context);\r\n                logger.info(&quot;log start&quot;);\r\n                if (context.getCacheFiles() != null\r\n                        &amp;&amp; context.getCacheFiles().length &gt; 0) {\r\n    \r\n                    URI[] cacheArchives = context.getCacheFiles();\r\n    .......\r\n    }\r\n\r\nbut it doesnt work for me, I guess there are something wrong with the new URI(new Path(out, &quot;out1&quot;).toString()) part so I tried use log to get some information but I cant get log information from main since it doesnt belong to either of these two jobs... I&#39;m totally lost.....","title":"how can i use job.addCacheArchive to load cache file from the output of another mapreduce?","body":"<p>Im trying to load cache file from the output of another mapreduce by java while writing mapreduce</p>\n<p>I tried</p>\n<pre><code>FileOutputFormat.setOutputPath(job1, new Path(out, &quot;out1&quot;));\n...\nJob job2 = Job.getInstance(conf, &quot;Second&quot;);\njob2.addCacheArchive(new URI(new Path(out, &quot;out1&quot;).toString()));\n</code></pre>\n<p>and I set reducer by</p>\n<pre><code>protected void setup(Context context) throws IOException, InterruptedException {\n            super.setup(context);\n            logger.info(&quot;log start&quot;);\n            if (context.getCacheFiles() != null\n                    &amp;&amp; context.getCacheFiles().length &gt; 0) {\n\n                URI[] cacheArchives = context.getCacheFiles();\n.......\n}\n</code></pre>\n<p>but it doesnt work for me, I guess there are something wrong with the new URI(new Path(out, &quot;out1&quot;).toString()) part so I tried use log to get some information but I cant get log information from main since it doesnt belong to either of these two jobs... I'm totally lost.....</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":7,"creation_date":1696617641,"post_id":77246710,"comment_id":136181185,"body_markdown":"Because 1 isn&#39;t a key in your map?","body":"Because 1 isn&#39;t a key in your map?"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":5,"creation_date":1696617767,"post_id":77246710,"comment_id":136181200,"body_markdown":"The correct version is `map.getOrDefault(&quot;Mike&quot;, 0)`.  Not `map.getOrDefault(map.get(&quot;Mike&quot;), 0)`.","body":"The correct version is <code>map.getOrDefault(&quot;Mike&quot;, 0)</code>.  Not <code>map.getOrDefault(map.get(&quot;Mike&quot;), 0)</code>."},{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":0,"creation_date":1696617775,"post_id":77246710,"comment_id":136181201,"body_markdown":"Can you indicate specifically *why* you expect `map.getOrDefault(1, 0)` to return `1` for your `map`?","body":"Can you indicate specifically <i>why</i> you expect <code>map.getOrDefault(1, 0)</code> to return <code>1</code> for your <code>map</code>?"},{"owner":{"account_id":5559956,"reputation":13829,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1696617796,"post_id":77246710,"comment_id":136181204,"body_markdown":"`map.getOrDefault(map.get(&quot;Mike&quot;), 0)` translates to `map.getOrDefault(1, 0)`, and since your map doesn&#39;t have `1` as a key, it returns the default value `0`","body":"<code>map.getOrDefault(map.get(&quot;Mike&quot;), 0)</code> translates to <code>map.getOrDefault(1, 0)</code>, and since your map doesn&#39;t have <code>1</code> as a key, it returns the default value <code>0</code>"},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1696617972,"post_id":77246710,"comment_id":136181230,"body_markdown":"Changed &quot;does&quot; to &quot;doesn&#39;t&quot; in the title to reflect the actual issue. Also, closing this due to it being a typo.","body":"Changed &quot;does&quot; to &quot;doesn&#39;t&quot; in the title to reflect the actual issue. Also, closing this due to it being a typo."}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696617741,"creation_date":1696617741,"answer_id":77246729,"question_id":77246710,"body_markdown":"When you use `map.getOrDefault(map.get(&quot;Mike&quot;), 0)`, `ap.get(&quot;Mike&quot;)` returns `1`, it means that **you are trying to get the value associated with key 1 in the map**, there is no key, and it results in the default value, which is 0.\r\n\r\nSo, you can solve this by using `&quot;Mike&quot;` as a key directly:\r\n```java\r\nmap.getOrDefault(&quot;Mike&quot;, 0);\r\n```","title":"Why doesn&#39;t this getOrDefault method return 1?","body":"<p>When you use <code>map.getOrDefault(map.get(&quot;Mike&quot;), 0)</code>, <code>ap.get(&quot;Mike&quot;)</code> returns <code>1</code>, it means that <strong>you are trying to get the value associated with key 1 in the map</strong>, there is no key, and it results in the default value, which is 0.</p>\n<p>So, you can solve this by using <code>&quot;Mike&quot;</code> as a key directly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>map.getOrDefault(&quot;Mike&quot;, 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696617985,"creation_date":1696617985,"answer_id":77246741,"question_id":77246710,"body_markdown":"[Map#getOrDefault](https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#getOrDefault-java.lang.Object-V-) return the mapping for the given key (first argument). If no such mapping is found it returns the default value given in the second argument. You can think of it as\r\n```\r\nif (map.contains(key)) {\r\n    return map.get(key);\r\n} else {\r\n    return defaultVal;\r\n}\r\n```\r\n\r\nIn your case `map.get(&quot;Mike&quot;)` returns `1`. So, the next line effectively becomes `map.getOrDefault(1, 0)`. But your map doesn&#39;t have any entry for `1`. So, it returns the default value 0.","title":"Why doesn&#39;t this getOrDefault method return 1?","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#getOrDefault-java.lang.Object-V-\" rel=\"nofollow noreferrer\">Map#getOrDefault</a> return the mapping for the given key (first argument). If no such mapping is found it returns the default value given in the second argument. You can think of it as</p>\n<pre><code>if (map.contains(key)) {\n    return map.get(key);\n} else {\n    return defaultVal;\n}\n</code></pre>\n<p>In your case <code>map.get(&quot;Mike&quot;)</code> returns <code>1</code>. So, the next line effectively becomes <code>map.getOrDefault(1, 0)</code>. But your map doesn't have any entry for <code>1</code>. So, it returns the default value 0.</p>\n"}],"owner":{"account_id":27497312,"reputation":1,"user_id":20981643,"display_name":"Ninininickname"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696618019,"answer_count":2,"score":0,"last_activity_date":1696617985,"creation_date":1696617483,"question_id":77246710,"body_markdown":"```\r\nHashMap&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\nmap.put(&quot;Mike&quot;, 1);\r\nSystem.out.println(map.get(&quot;Mike&quot;)); // 1\r\nSystem.out.println(map.getOrDefault(map.get(&quot;Mike&quot;), 0)); // 0\r\n```\r\n\r\nThe second result is 0. I want to know why 0 is output. Because I expected output 1.","title":"Why doesn&#39;t this getOrDefault method return 1?","body":"<pre><code>HashMap&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\nmap.put(&quot;Mike&quot;, 1);\nSystem.out.println(map.get(&quot;Mike&quot;)); // 1\nSystem.out.println(map.getOrDefault(map.get(&quot;Mike&quot;), 0)); // 0\n</code></pre>\n<p>The second result is 0. I want to know why 0 is output. Because I expected output 1.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1696597093,"post_id":77244624,"comment_id":136177215,"body_markdown":"Well, which instance of `Main` do you want to pass as a reference to the `MyJFrame` constructor? (Hint: at the moment, I don&#39;t see any instances of `Main` being created...) Also, &quot;this did not work&quot; is never enough information - *always* show the exact error (or whatever the undesirable behavior is) and explain how you&#39;ve attempted to fix it, or what you don&#39;t understand about it.","body":"Well, which instance of <code>Main</code> do you want to pass as a reference to the <code>MyJFrame</code> constructor? (Hint: at the moment, I don&#39;t see any instances of <code>Main</code> being created...) Also, &quot;this did not work&quot; is never enough information - <i>always</i> show the exact error (or whatever the undesirable behavior is) and explain how you&#39;ve attempted to fix it, or what you don&#39;t understand about it."},{"owner":{"account_id":5883884,"reputation":931,"user_id":4632482,"display_name":"Peter Bruins"},"score":2,"creation_date":1696597506,"post_id":77244624,"comment_id":136177314,"body_markdown":"hint: find out the difference between static and non-static methods.","body":"hint: find out the difference between static and non-static methods."},{"owner":{"account_id":29612616,"reputation":1,"user_id":22695511,"display_name":"pumpkinpie"},"score":0,"creation_date":1696597762,"post_id":77244624,"comment_id":136177379,"body_markdown":"I&#39;ve updated the code to what I&#39;ve last tried. I&#39;ve read the Java classes reference each other post but unfortunately I did not manage to resolve the issue.","body":"I&#39;ve updated the code to what I&#39;ve last tried. I&#39;ve read the Java classes reference each other post but unfortunately I did not manage to resolve the issue."}],"answers":[{"comments":[{"owner":{"account_id":29612616,"reputation":1,"user_id":22695511,"display_name":"pumpkinpie"},"score":0,"creation_date":1696603488,"post_id":77244837,"comment_id":136178646,"body_markdown":"Thanks for the advice. I&#39;ve added &quot;Main main = new Main();&quot; to my main method. I pass this reference runnable like this &quot;MyJFrame myFrame = new MyJFrame(main);&quot; It does compile now, but unfortunately I get NullPointers when I use the class methods because the instances are still incorrect. Here is my new Main class https://pastebin.com/eSehNMC0","body":"Thanks for the advice. I&#39;ve added &quot;Main main = new Main();&quot; to my main method. I pass this reference runnable like this &quot;MyJFrame myFrame = new MyJFrame(main);&quot; It does compile now, but unfortunately I get NullPointers when I use the class methods because the instances are still incorrect. Here is my new Main class <a href=\"https://pastebin.com/eSehNMC0\" rel=\"nofollow noreferrer\">pastebin.com/eSehNMC0</a>"}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696598681,"creation_date":1696598681,"answer_id":77244837,"question_id":77244624,"body_markdown":"Your `MyFrame` looks ok - you can pass an instance of Main to the constructor, and that even gets stored into the instance variable `main`.\r\n\r\nIn `main.Main.main()` however you have these lines:\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(new Runnable() {\r\n            @Override\r\n            public void run()\r\n            {\r\n                this.myJFrame = new MyJFrame(this);\r\n            }\r\n        });\r\n    }\r\n\r\nThe compiler should actually refuse to compile. When resolving `this`, the only instance available is the anonymous runnable you created using `new Runnable()`, which is not derived from Main.\r\n\r\nOn top of that Java runs the `public static void main(...)` method without creating any instance of `Main`, so you have nothing that you can refer to.\r\n\r\nTherefore, change the one line into something like\r\n\r\n    this.myJFrame = new MyJFrame(new Main());\r\n\r\nand it should compile. Whether that does what you need is still up to you.","title":"How to pass Main class reference to JFrame class","body":"<p>Your <code>MyFrame</code> looks ok - you can pass an instance of Main to the constructor, and that even gets stored into the instance variable <code>main</code>.</p>\n<p>In <code>main.Main.main()</code> however you have these lines:</p>\n<pre><code>public static void main(String[] args) {\n    SwingUtilities.invokeLater(new Runnable() {\n        @Override\n        public void run()\n        {\n            this.myJFrame = new MyJFrame(this);\n        }\n    });\n}\n</code></pre>\n<p>The compiler should actually refuse to compile. When resolving <code>this</code>, the only instance available is the anonymous runnable you created using <code>new Runnable()</code>, which is not derived from Main.</p>\n<p>On top of that Java runs the <code>public static void main(...)</code> method without creating any instance of <code>Main</code>, so you have nothing that you can refer to.</p>\n<p>Therefore, change the one line into something like</p>\n<pre><code>this.myJFrame = new MyJFrame(new Main());\n</code></pre>\n<p>and it should compile. Whether that does what you need is still up to you.</p>\n"},{"comments":[{"owner":{"account_id":29612616,"reputation":1,"user_id":22695511,"display_name":"pumpkinpie"},"score":1,"creation_date":1696676339,"post_id":77246640,"comment_id":136185920,"body_markdown":"I implemented this into my program and it works like a charm. Thank you so much!","body":"I implemented this into my program and it works like a charm. Thank you so much!"}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696616538,"creation_date":1696616538,"answer_id":77246640,"question_id":77244624,"body_markdown":"&gt; _&quot;... How would I go about passing on the main class reference to my JFrame class. ...&quot;_\r\n\r\nYou won&#39;t need to pass the instance to _MyJFrame_.\r\n\r\n```java\r\npublic MyJFrame()\r\n{\r\n    super(&quot;MyJFrame&quot;);\r\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    setSize(400, 400);\r\n    setVisible(true);\r\n    setResizable(false);\r\n    addWindowListener(this);\r\n}\r\n```\r\n\r\nAnd, instantiate _Main_ since you&#39;re looking to access it from within the _invokeLater_ _closure_.\r\n\r\n```java\r\nMain main = new Main();\r\nSwingUtilities.invokeLater(() -&gt; main.myJFrame = new MyJFrame());\r\n```\r\n\r\n```java\r\npublic int addOne(int amount)\r\n{\r\n    return myJFrame.getNumber();\r\n}\r\n```","title":"How to pass Main class reference to JFrame class","body":"<blockquote>\n<p><em>&quot;... How would I go about passing on the main class reference to my JFrame class. ...&quot;</em></p>\n</blockquote>\n<p>You won't need to pass the instance to <em>MyJFrame</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public MyJFrame()\n{\n    super(&quot;MyJFrame&quot;);\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    setSize(400, 400);\n    setVisible(true);\n    setResizable(false);\n    addWindowListener(this);\n}\n</code></pre>\n<p>And, instantiate <em>Main</em> since you're looking to access it from within the <em>invokeLater</em> <em>closure</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Main main = new Main();\nSwingUtilities.invokeLater(() -&gt; main.myJFrame = new MyJFrame());\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public int addOne(int amount)\n{\n    return myJFrame.getNumber();\n}\n</code></pre>\n"}],"owner":{"account_id":29612616,"reputation":1,"user_id":22695511,"display_name":"pumpkinpie"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77246640,"answer_count":2,"score":-1,"last_activity_date":1696616862,"creation_date":1696596948,"question_id":77244624,"body_markdown":"How would I go about passing on the main class reference to my JFrame class. I want to use a function inside my Main class in my JFrame class and vice-versa. I want to use the function addOne() from my Main class inside my JFrame class and the function getNumber() from the JFrame class in my Main class.\r\n\r\nI&#39;ve tried the code below and get the error &quot;The constructor MyJFrame(new Runnable(){}) is undefined&quot; when I try to pass the Main class reference.\r\n\r\n\r\nCode :\r\n```\r\npackage main;\r\n\r\nimport javax.swing.SwingUtilities;\r\n\r\npublic class Main {\r\n\t\r\n\tpublic MyJFrame myJFrame;\r\n\t\r\n\tpublic static void main(String[] args) \r\n\t{\r\n\t\tSwingUtilities.invokeLater(new Runnable() {\r\n\t\t\t@Override\r\n\t        public void run()\r\n\t        {\r\n\t\t\t\tthis.myJFrame = new MyJFrame(this);\r\n\t        }\r\n\t\t});\r\n\t}\r\n\r\n\tpublic int addOne(int amount)\r\n\t{\r\n\t\t//i want to use the method getNumber from the MyJFrame class here\r\n\t\treturn amount + 1;\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n```\r\npackage main;\r\n\r\nimport java.awt.event.WindowEvent;\r\nimport java.awt.event.WindowListener;\r\n\r\nimport javax.swing.JFrame;\r\n\r\npublic class MyJFrame extends JFrame implements WindowListener {\r\n\r\n\tprivate static final long serialVersionUID = -2422522191234311369L;\r\n\t\r\n\tMain main;\r\n\t\r\n\tpublic MyJFrame(Main main)\r\n\t{\r\n\t\tsuper(&quot;MyJFrame&quot;);\r\n\t\tthis.main = main;\r\n\t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tsetSize(400, 400);\r\n\t\tsetVisible(true);\r\n\t\tsetResizable(false);\r\n\t\taddWindowListener(this);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void windowActivated(WindowEvent e) {\r\n\t\tSystem.out.println(&quot;Window has been activated&quot;);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void windowClosed(WindowEvent e) {\r\n\t\tSystem.out.println(&quot;Window has been closed&quot;);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void windowClosing(WindowEvent e) {\r\n\t\tSystem.out.println(&quot;About to close window&quot;);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void windowDeactivated(WindowEvent e) {\r\n\t\tSystem.out.println(&quot;Window has been deactivated&quot;);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void windowDeiconified(WindowEvent e) {\r\n\t\tSystem.out.println(&quot;Window has been restored&quot;);\t\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void windowIconified(WindowEvent e) {\r\n\t\tSystem.out.println(&quot;Window has been minimized&quot;);\r\n\t\t\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void windowOpened(WindowEvent e) {\r\n\t\tSystem.out.println(&quot;Window has been opened&quot;);\r\n\t}\r\n\t\r\n\t//i want to use this function inside my Main class\r\n\tpublic int getNumber() \r\n\t{\r\n\t\treturn 10;\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\nI tried to create an instance of MyJFrame in the Main class and pass the main class reference in the parameters but this did not work.\r\n\r\n`public MyJFrame frame = new MyJFrame(this);`","title":"How to pass Main class reference to JFrame class","body":"<p>How would I go about passing on the main class reference to my JFrame class. I want to use a function inside my Main class in my JFrame class and vice-versa. I want to use the function addOne() from my Main class inside my JFrame class and the function getNumber() from the JFrame class in my Main class.</p>\n<p>I've tried the code below and get the error &quot;The constructor MyJFrame(new Runnable(){}) is undefined&quot; when I try to pass the Main class reference.</p>\n<p>Code :</p>\n<pre><code>package main;\n\nimport javax.swing.SwingUtilities;\n\npublic class Main {\n    \n    public MyJFrame myJFrame;\n    \n    public static void main(String[] args) \n    {\n        SwingUtilities.invokeLater(new Runnable() {\n            @Override\n            public void run()\n            {\n                this.myJFrame = new MyJFrame(this);\n            }\n        });\n    }\n\n    public int addOne(int amount)\n    {\n        //i want to use the method getNumber from the MyJFrame class here\n        return amount + 1;\n    }\n    \n}\n\n\n</code></pre>\n<pre><code>package main;\n\nimport java.awt.event.WindowEvent;\nimport java.awt.event.WindowListener;\n\nimport javax.swing.JFrame;\n\npublic class MyJFrame extends JFrame implements WindowListener {\n\n    private static final long serialVersionUID = -2422522191234311369L;\n    \n    Main main;\n    \n    public MyJFrame(Main main)\n    {\n        super(&quot;MyJFrame&quot;);\n        this.main = main;\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setSize(400, 400);\n        setVisible(true);\n        setResizable(false);\n        addWindowListener(this);\n    }\n\n    @Override\n    public void windowActivated(WindowEvent e) {\n        System.out.println(&quot;Window has been activated&quot;);\n    }\n\n    @Override\n    public void windowClosed(WindowEvent e) {\n        System.out.println(&quot;Window has been closed&quot;);\n    }\n\n    @Override\n    public void windowClosing(WindowEvent e) {\n        System.out.println(&quot;About to close window&quot;);\n    }\n\n    @Override\n    public void windowDeactivated(WindowEvent e) {\n        System.out.println(&quot;Window has been deactivated&quot;);\n    }\n\n    @Override\n    public void windowDeiconified(WindowEvent e) {\n        System.out.println(&quot;Window has been restored&quot;); \n    }\n\n    @Override\n    public void windowIconified(WindowEvent e) {\n        System.out.println(&quot;Window has been minimized&quot;);\n        \n    }\n    \n    @Override\n    public void windowOpened(WindowEvent e) {\n        System.out.println(&quot;Window has been opened&quot;);\n    }\n    \n    //i want to use this function inside my Main class\n    public int getNumber() \n    {\n        return 10;\n    }\n}\n</code></pre>\n<p>I tried to create an instance of MyJFrame in the Main class and pass the main class reference in the parameters but this did not work.</p>\n<p><code>public MyJFrame frame = new MyJFrame(this);</code></p>\n"},{"tags":["java","spring","mapstruct"],"answers":[{"comments":[{"owner":{"account_id":25412502,"reputation":29,"user_id":19220058,"display_name":"Evgen Kr"},"score":0,"creation_date":1696493069,"post_id":77232803,"comment_id":136160617,"body_markdown":"Thank you, Paul Marcelin Bejan, I had **@Builder** under Child class, when I delete **@Builder**, then it starts working. And I wonder how I can solve the problem without deleting the **@Builder**?","body":"Thank you, Paul Marcelin Bejan, I had <b>@Builder</b> under Child class, when I delete <b>@Builder</b>, then it starts working. And I wonder how I can solve the problem without deleting the <b>@Builder</b>?"},{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1696495578,"post_id":77232803,"comment_id":136161128,"body_markdown":"because Builder doesn&#39;t know the fields from superclass, you need to use @SuperBuilder projectlombok.org/features/experimental/SuperBuilder","body":"because Builder doesn&#39;t know the fields from superclass, you need to use @SuperBuilder projectlombok.org/features/experimental/SuperBuilder"},{"owner":{"account_id":25412502,"reputation":29,"user_id":19220058,"display_name":"Evgen Kr"},"score":0,"creation_date":1696496353,"post_id":77232803,"comment_id":136161299,"body_markdown":"could you provide an example, please?","body":"could you provide an example, please?"},{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1696616709,"post_id":77232803,"comment_id":136181049,"body_markdown":"See the last part of the answer!","body":"See the last part of the answer!"}],"tags":[],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696616689,"creation_date":1696451661,"answer_id":77232803,"question_id":77230604,"body_markdown":"You need to add Getters and Setters.\r\nFor simplicity I&#39;m using [Lombok][1]\r\n\r\nParent:\r\n\r\n    @Data\r\n    public class Parent {\r\n    \r\n    \t private String parentField;\r\n    \t \r\n    }\r\n\r\nChild:\r\n\r\n    @Data\r\n    @ToString(callSuper = true)\r\n    @EqualsAndHashCode(callSuper = true)\r\n    public class Child extends Parent {\r\n    \r\n    }\r\n\r\nChildDTO:\r\n\r\n    @Data\r\n    public class ChildDTO {\r\n    \r\n    \tprivate  String parentField;\r\n    \t \r\n    }\r\n\r\nChildMapper:\r\n\r\n    @Mapper(componentModel = MappingConstants.ComponentModel.SPRING)\r\n    public interface ChildMapper {\r\n       \r\n    \tChildMapper INSTANCE = Mappers.getMapper(ChildMapper.class);\r\n    \t\r\n        ChildDTO toDTO(Child child);\r\n        \r\n    }\r\n\r\nGenerated ChildMapperImpl:\r\n\r\n    @Generated(\r\n        value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\r\n        date = &quot;2023-10-04T22:29:28+0200&quot;,\r\n        comments = &quot;version: 1.5.5.Final, compiler: Eclipse JDT (IDE) 1.4.300.v20221108-0856, environment: Java 17.0.5 (Eclipse Adoptium)&quot;\r\n    )\r\n    @Component\r\n    public class ChildMapperImpl implements ChildMapper {\r\n    \r\n        @Override\r\n        public ChildDTO toDTO(Child child) {\r\n            if ( child == null ) {\r\n                return null;\r\n            }\r\n    \r\n            ChildDTO childDTO = new ChildDTO();\r\n    \r\n            childDTO.setParentField( child.getParentField() );\r\n    \r\n            return childDTO;\r\n        }\r\n    }\r\n\r\nAs you can see the generated mapper is mapping correctly the field from parent to childDTO.\r\n\r\nThere is no need to add @Mapping since they both have same field name. \r\n\r\nIt is perfectly working also in the opposite direction, so if I add  toEntity method into the ChildMapper:\r\n\r\n    @Mapper(componentModel = MappingConstants.ComponentModel.SPRING)\r\n    public interface ChildMapper {\r\n       \r\n    \tChildMapper INSTANCE = Mappers.getMapper(ChildMapper.class);\r\n    \t\r\n        ChildDTO toDTO(Child child);\r\n        \r\n        Child toEntity(ChildDTO dto);\r\n        \r\n    }\r\n\r\nthe ChildMapperImpl will look like that:\r\n\r\n    @Generated(\r\n        value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\r\n        date = &quot;2023-10-04T22:36:40+0200&quot;,\r\n        comments = &quot;version: 1.5.5.Final, compiler: Eclipse JDT (IDE) 1.4.300.v20221108-0856, environment: Java 17.0.5 (Eclipse Adoptium)&quot;\r\n    )\r\n    @Component\r\n    public class ChildMapperImpl implements ChildMapper {\r\n    \r\n        @Override\r\n        public ChildDTO toDTO(Child child) {\r\n            if ( child == null ) {\r\n                return null;\r\n            }\r\n    \r\n            ChildDTO childDTO = new ChildDTO();\r\n    \r\n            childDTO.setParentField( child.getParentField() );\r\n    \r\n            return childDTO;\r\n        }\r\n    \r\n        @Override\r\n        public Child toEntity(ChildDTO dto) {\r\n            if ( dto == null ) {\r\n                return null;\r\n            }\r\n    \r\n            Child child = new Child();\r\n    \r\n            child.setParentField( dto.getParentField() );\r\n    \r\n            return child;\r\n        }\r\n    }\r\n\r\nWhen classes (Parent, Child, ChildDTO) are annotated with only @Getter and @SuperBuilder, the ChildMapperImpl looks like this:\r\n\r\n    @Generated(\r\n        value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\r\n        date = &quot;2023-10-06T20:23:22+0200&quot;,\r\n        comments = &quot;version: 1.5.5.Final, compiler: Eclipse JDT (IDE) 1.4.300.v20221108-0856, environment: Java 17.0.5 (Eclipse Adoptium)&quot;\r\n    )\r\n    @Component\r\n    public class ChildMapperImpl implements ChildMapper {\r\n    \r\n        @Override\r\n        public ChildDTO toDTO(Child child) {\r\n            if ( child == null ) {\r\n                return null;\r\n            }\r\n    \r\n            ChildDTO.ChildDTOBuilder&lt;?, ?&gt; childDTO = ChildDTO.builder();\r\n    \r\n            childDTO.parentField( child.getParentField() );\r\n    \r\n            return childDTO.build();\r\n        }\r\n    \r\n        @Override\r\n        public Child toEntity(ChildDTO dto) {\r\n            if ( dto == null ) {\r\n                return null;\r\n            }\r\n    \r\n            Child.ChildBuilder&lt;?, ?&gt; child = Child.builder();\r\n    \r\n            child.parentField( dto.getParentField() );\r\n    \r\n            return child.build();\r\n        }\r\n    }\r\n\r\n  [1]: https://projectlombok.org/#","title":"How to set Mapping in Mapstruct to get the Parent&#39;s field in Child&#39;s DTO?","body":"<p>You need to add Getters and Setters.\nFor simplicity I'm using <a href=\"https://projectlombok.org/#\" rel=\"nofollow noreferrer\">Lombok</a></p>\n<p>Parent:</p>\n<pre><code>@Data\npublic class Parent {\n\n     private String parentField;\n     \n}\n</code></pre>\n<p>Child:</p>\n<pre><code>@Data\n@ToString(callSuper = true)\n@EqualsAndHashCode(callSuper = true)\npublic class Child extends Parent {\n\n}\n</code></pre>\n<p>ChildDTO:</p>\n<pre><code>@Data\npublic class ChildDTO {\n\n    private  String parentField;\n     \n}\n</code></pre>\n<p>ChildMapper:</p>\n<pre><code>@Mapper(componentModel = MappingConstants.ComponentModel.SPRING)\npublic interface ChildMapper {\n   \n    ChildMapper INSTANCE = Mappers.getMapper(ChildMapper.class);\n    \n    ChildDTO toDTO(Child child);\n    \n}\n</code></pre>\n<p>Generated ChildMapperImpl:</p>\n<pre><code>@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    date = &quot;2023-10-04T22:29:28+0200&quot;,\n    comments = &quot;version: 1.5.5.Final, compiler: Eclipse JDT (IDE) 1.4.300.v20221108-0856, environment: Java 17.0.5 (Eclipse Adoptium)&quot;\n)\n@Component\npublic class ChildMapperImpl implements ChildMapper {\n\n    @Override\n    public ChildDTO toDTO(Child child) {\n        if ( child == null ) {\n            return null;\n        }\n\n        ChildDTO childDTO = new ChildDTO();\n\n        childDTO.setParentField( child.getParentField() );\n\n        return childDTO;\n    }\n}\n</code></pre>\n<p>As you can see the generated mapper is mapping correctly the field from parent to childDTO.</p>\n<p>There is no need to add @Mapping since they both have same field name.</p>\n<p>It is perfectly working also in the opposite direction, so if I add  toEntity method into the ChildMapper:</p>\n<pre><code>@Mapper(componentModel = MappingConstants.ComponentModel.SPRING)\npublic interface ChildMapper {\n   \n    ChildMapper INSTANCE = Mappers.getMapper(ChildMapper.class);\n    \n    ChildDTO toDTO(Child child);\n    \n    Child toEntity(ChildDTO dto);\n    \n}\n</code></pre>\n<p>the ChildMapperImpl will look like that:</p>\n<pre><code>@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    date = &quot;2023-10-04T22:36:40+0200&quot;,\n    comments = &quot;version: 1.5.5.Final, compiler: Eclipse JDT (IDE) 1.4.300.v20221108-0856, environment: Java 17.0.5 (Eclipse Adoptium)&quot;\n)\n@Component\npublic class ChildMapperImpl implements ChildMapper {\n\n    @Override\n    public ChildDTO toDTO(Child child) {\n        if ( child == null ) {\n            return null;\n        }\n\n        ChildDTO childDTO = new ChildDTO();\n\n        childDTO.setParentField( child.getParentField() );\n\n        return childDTO;\n    }\n\n    @Override\n    public Child toEntity(ChildDTO dto) {\n        if ( dto == null ) {\n            return null;\n        }\n\n        Child child = new Child();\n\n        child.setParentField( dto.getParentField() );\n\n        return child;\n    }\n}\n</code></pre>\n<p>When classes (Parent, Child, ChildDTO) are annotated with only @Getter and @SuperBuilder, the ChildMapperImpl looks like this:</p>\n<pre><code>@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    date = &quot;2023-10-06T20:23:22+0200&quot;,\n    comments = &quot;version: 1.5.5.Final, compiler: Eclipse JDT (IDE) 1.4.300.v20221108-0856, environment: Java 17.0.5 (Eclipse Adoptium)&quot;\n)\n@Component\npublic class ChildMapperImpl implements ChildMapper {\n\n    @Override\n    public ChildDTO toDTO(Child child) {\n        if ( child == null ) {\n            return null;\n        }\n\n        ChildDTO.ChildDTOBuilder&lt;?, ?&gt; childDTO = ChildDTO.builder();\n\n        childDTO.parentField( child.getParentField() );\n\n        return childDTO.build();\n    }\n\n    @Override\n    public Child toEntity(ChildDTO dto) {\n        if ( dto == null ) {\n            return null;\n        }\n\n        Child.ChildBuilder&lt;?, ?&gt; child = Child.builder();\n\n        child.parentField( dto.getParentField() );\n\n        return child.build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25412502,"reputation":29,"user_id":19220058,"display_name":"Evgen Kr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696616689,"creation_date":1696430646,"question_id":77230604,"body_markdown":"```java\r\npublic class Parent {\r\n    String parentField;\r\n}\r\n\r\npublic class Child extends Parent{\r\n\r\n}\r\n\r\npublic class ChildDTO{\r\n    String parentField;\r\n}\r\n\r\n@Mapper (componentModel=&quot;spring&quot;)\r\npublic interface ChildMapper {\r\n    ChildDTO toDTO(Child child);\r\n}\r\n```\r\nHow set Mapping in Mapstruct to get the Parent&#39;s field in Child&#39;s DTO\r\n\r\nI have tried this:\r\n\r\n```java\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface ChildMapper {\r\n\r\n   @Mapping(source = &quot;parentField&quot;, target = &quot;parentField&quot;)\r\n   ChildDTO toDTO(Child child);\r\n\r\n}\r\n```\r\n\r\nalso I tried \r\n\r\n```java\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface ChildMapper {\r\n   \r\n    @Mapping(source = &quot;parentField&quot;, target = &quot;parentField&quot;, qualifiedByName = &quot;mapParentField&quot;)\r\n    ChildDTO toDTO(Child child);\r\n\r\n    @Named(&quot;mapParentField&quot;)\r\n    default String mapParentField(Parent parent) {\r\n        return parent.getParentField();\r\n    }\r\n\r\n}\r\n```\r\n\r\n","title":"How to set Mapping in Mapstruct to get the Parent&#39;s field in Child&#39;s DTO?","body":"<pre class=\"lang-java prettyprint-override\"><code>public class Parent {\n    String parentField;\n}\n\npublic class Child extends Parent{\n\n}\n\npublic class ChildDTO{\n    String parentField;\n}\n\n@Mapper (componentModel=&quot;spring&quot;)\npublic interface ChildMapper {\n    ChildDTO toDTO(Child child);\n}\n</code></pre>\n<p>How set Mapping in Mapstruct to get the Parent's field in Child's DTO</p>\n<p>I have tried this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = &quot;spring&quot;)\npublic interface ChildMapper {\n\n   @Mapping(source = &quot;parentField&quot;, target = &quot;parentField&quot;)\n   ChildDTO toDTO(Child child);\n\n}\n</code></pre>\n<p>also I tried</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = &quot;spring&quot;)\npublic interface ChildMapper {\n   \n    @Mapping(source = &quot;parentField&quot;, target = &quot;parentField&quot;, qualifiedByName = &quot;mapParentField&quot;)\n    ChildDTO toDTO(Child child);\n\n    @Named(&quot;mapParentField&quot;)\n    default String mapParentField(Parent parent) {\n        return parent.getParentField();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","illegalstateexception","httpconnection","openstack-swift"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1470172888,"post_id":38729696,"comment_id":64837588,"body_markdown":"Please provide a stack trace. Why aren&#39;t you sending anything?","body":"Please provide a stack trace. Why aren&#39;t you sending anything?"},{"owner":{"account_id":4550581,"reputation":4343,"user_id":3695939,"accept_rate":69,"display_name":"moondaisy"},"score":0,"creation_date":1470228313,"post_id":38729696,"comment_id":64861763,"body_markdown":"@EJP I added the stack trace. I don&#39;t send anything because I&#39;m asking to make a copy of an object that is already inside the container.","body":"@EJP I added the stack trace. I don&#39;t send anything because I&#39;m asking to make a copy of an object that is already inside the container."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1470229301,"post_id":38729696,"comment_id":64862578,"body_markdown":"You should try closing the input stream of the connection. You normally don&#39;t need to set the content-length.","body":"You should try closing the input stream of the connection. You normally don&#39;t need to set the content-length."},{"owner":{"account_id":4550581,"reputation":4343,"user_id":3695939,"accept_rate":69,"display_name":"moondaisy"},"score":0,"creation_date":1470229769,"post_id":38729696,"comment_id":64862955,"body_markdown":"@EJP sending the content-length is necessary according to [this](http://developer.openstack.org/api-ref-objectstorage-v1.html#copyObject). Do you mean doing `conn.setDoInput(false);` ? I tried and get the same error in the `conn.setRequestMethod(&quot;PUT&quot;);` line instead","body":"@EJP sending the content-length is necessary according to <a href=\"http://developer.openstack.org/api-ref-objectstorage-v1.html#copyObject\" rel=\"nofollow noreferrer\">this</a>. Do you mean doing <code>conn.setDoInput(false);</code> ? I tried and get the same error in the <code>conn.setRequestMethod(&quot;PUT&quot;);</code> line instead"},{"owner":{"account_id":4550581,"reputation":4343,"user_id":3695939,"accept_rate":69,"display_name":"moondaisy"},"score":0,"creation_date":1518608240,"post_id":38729696,"comment_id":84573812,"body_markdown":"Possible duplicate of [&quot;Illegal State Exception: Already Connected&quot; when using HttpURLConnection](https://stackoverflow.com/questions/29906562/illegal-state-exception-already-connected-when-using-httpurlconnection)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/29906562/illegal-state-exception-already-connected-when-using-httpurlconnection\">&quot;Illegal State Exception: Already Connected&quot; when using HttpURLConnection</a>"}],"answers":[{"tags":[],"owner":{"account_id":4550581,"reputation":4343,"user_id":3695939,"accept_rate":69,"display_name":"moondaisy"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1518608199,"creation_date":1470336544,"answer_id":38775184,"question_id":38729696,"body_markdown":"I found out the solution to this problem was what @Sharcoux [posted here][1], which explained why sometimes it would work just fine.\r\n\r\nSo to solve this while debugging on NetBeans you need to remove from the watch all the expressions that use conn (such `conn.setDoOutPut()`, etc.).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/29906562/illegal-state-exception-already-connected-when-using-httpurlconnection/38072310#38072310","title":"HttpURLConnection Already connected","body":"<p>I found out the solution to this problem was what @Sharcoux <a href=\"https://stackoverflow.com/questions/29906562/illegal-state-exception-already-connected-when-using-httpurlconnection/38072310#38072310\">posted here</a>, which explained why sometimes it would work just fine.</p>\n\n<p>So to solve this while debugging on NetBeans you need to remove from the watch all the expressions that use conn (such <code>conn.setDoOutPut()</code>, etc.).</p>\n"},{"tags":[],"owner":{"account_id":28999622,"reputation":1,"user_id":22213414,"display_name":"Gustavo Chavarro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696616058,"creation_date":1696616058,"answer_id":77246607,"question_id":38729696,"body_markdown":"I was doing the same, and I had the same error for all the methods and it was because I had different watchers so when a watcher is created is executed the connection so for that reason connection is already created or in progress.\r\n\r\nAdvise: remove all the watchers in your debug mode ","title":"HttpURLConnection Already connected","body":"<p>I was doing the same, and I had the same error for all the methods and it was because I had different watchers so when a watcher is created is executed the connection so for that reason connection is already created or in progress.</p>\n<p>Advise: remove all the watchers in your debug mode</p>\n"}],"owner":{"account_id":4550581,"reputation":4343,"user_id":3695939,"accept_rate":69,"display_name":"moondaisy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13009,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":38775184,"answer_count":2,"score":5,"last_activity_date":1696616058,"creation_date":1470169052,"question_id":38729696,"body_markdown":"I&#39;m trying to replicate this, [the copy sentence from openstack swift v1][1] (which works just fine):\r\n\r\n    curl -i $publicURL/GXPrueba/StorageAPI/PruebaStorageCopy.png -X PUT -H &quot;X-Auth-Token:  $token&quot; -H &quot;X-Copy-From: /GXPrueba/StorageAPI/PruebaStorage.png&quot; -H &quot;Content-Length: 0&quot;\r\n\r\nLike this:\r\n\r\n    private void copy(String originContainer, String origin, String destinationContainer, String destination) {\r\n        try {\r\n            URL url = new URL(storageUrl + DELIMITER + destinationContainer + DELIMITER + destination);\r\n            HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n            conn.setDoInput(true);\r\n            conn.setDoOutput(true);\r\n            conn.setRequestMethod(&quot;PUT&quot;);\r\n            conn.setRequestProperty(&quot;X-Auth-Token&quot;, authToken);\r\n            conn.setRequestProperty(&quot;X-Copy-From&quot;, DELIMITER + originContainer + DELIMITER + origin);\r\n            conn.setRequestProperty(&quot;Content-Length&quot;, &quot;0&quot;);\r\n    \r\n            if (conn.getResponseCode() != HttpURLConnection.HTTP_CREATED) {\r\n                System.err.println(&quot;Error while copying the object: &quot; + conn.getResponseCode());\r\n            }\r\n            conn.disconnect();\r\n    \r\n        } catch (MalformedURLException e) {\r\n            System.err.println(&quot;Error while copying the object: &quot; + e.getMessage());\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;Error while copying the object: &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\nAnd I keep getting `java.lang.IllegalStateException: Already connected` exception at different lines everytime.\r\nI already tried the other solutions I found (like removing the `setDoInput`) but nothing seems to work.\r\n\r\nHere is the stack trace\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: Already connected\r\n    \tat java.net.URLConnection.setDoOutput(URLConnection.java:900)\r\n    \tat sun.net.www.protocol.https.HttpsURLConnectionImpl.setDoOutput(HttpsURLConnectionImpl.java:455)\r\n    \tat javaapplication3.ExternalProviderBluemix.copy(ExternalProviderBluemix.java:212)\r\n    \tat javaapplication3.ExternalProviderBluemix.copy(ExternalProviderBluemix.java:202)\r\n    \tat javaapplication3.JavaApplication3.main(JavaApplication3.java:39)\r\n    C:\\Users\\lsarni\\AppData\\Local\\NetBeans\\Cache\\8.1\\executor-snippets\\debug.xml:83: Java returned: 1\r\n    BUILD FAILED (total time: 24 seconds)\r\n\r\n\r\n  [1]: http://developer.openstack.org/api-ref-objectstorage-v1.html#copyObject","title":"HttpURLConnection Already connected","body":"<p>I'm trying to replicate this, <a href=\"http://developer.openstack.org/api-ref-objectstorage-v1.html#copyObject\" rel=\"noreferrer\">the copy sentence from openstack swift v1</a> (which works just fine):</p>\n\n<pre><code>curl -i $publicURL/GXPrueba/StorageAPI/PruebaStorageCopy.png -X PUT -H \"X-Auth-Token:  $token\" -H \"X-Copy-From: /GXPrueba/StorageAPI/PruebaStorage.png\" -H \"Content-Length: 0\"\n</code></pre>\n\n<p>Like this:</p>\n\n<pre><code>private void copy(String originContainer, String origin, String destinationContainer, String destination) {\n    try {\n        URL url = new URL(storageUrl + DELIMITER + destinationContainer + DELIMITER + destination);\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n        conn.setDoInput(true);\n        conn.setDoOutput(true);\n        conn.setRequestMethod(\"PUT\");\n        conn.setRequestProperty(\"X-Auth-Token\", authToken);\n        conn.setRequestProperty(\"X-Copy-From\", DELIMITER + originContainer + DELIMITER + origin);\n        conn.setRequestProperty(\"Content-Length\", \"0\");\n\n        if (conn.getResponseCode() != HttpURLConnection.HTTP_CREATED) {\n            System.err.println(\"Error while copying the object: \" + conn.getResponseCode());\n        }\n        conn.disconnect();\n\n    } catch (MalformedURLException e) {\n        System.err.println(\"Error while copying the object: \" + e.getMessage());\n    } catch (IOException e) {\n        System.err.println(\"Error while copying the object: \" + e.getMessage());\n    }\n}\n</code></pre>\n\n<p>And I keep getting <code>java.lang.IllegalStateException: Already connected</code> exception at different lines everytime.\nI already tried the other solutions I found (like removing the <code>setDoInput</code>) but nothing seems to work.</p>\n\n<p>Here is the stack trace</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalStateException: Already connected\n    at java.net.URLConnection.setDoOutput(URLConnection.java:900)\n    at sun.net.www.protocol.https.HttpsURLConnectionImpl.setDoOutput(HttpsURLConnectionImpl.java:455)\n    at javaapplication3.ExternalProviderBluemix.copy(ExternalProviderBluemix.java:212)\n    at javaapplication3.ExternalProviderBluemix.copy(ExternalProviderBluemix.java:202)\n    at javaapplication3.JavaApplication3.main(JavaApplication3.java:39)\nC:\\Users\\lsarni\\AppData\\Local\\NetBeans\\Cache\\8.1\\executor-snippets\\debug.xml:83: Java returned: 1\nBUILD FAILED (total time: 24 seconds)\n</code></pre>\n"},{"tags":["java","spring-boot","cors"],"comments":[{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":1,"creation_date":1696597393,"post_id":77243835,"comment_id":136177282,"body_markdown":"You can&#39;t disable CORS in your backend app and hope that the browser thinks it&#39;s ok. In the end you need to provide the browser with the correct headers so that the browser allows your frontend to send calls to your backend.","body":"You can&#39;t disable CORS in your backend app and hope that the browser thinks it&#39;s ok. In the end you need to provide the browser with the correct headers so that the browser allows your frontend to send calls to your backend."},{"owner":{"account_id":9179794,"reputation":408,"user_id":6824092,"accept_rate":64,"display_name":"Hayk  Mkhitaryan"},"score":0,"creation_date":1696598902,"post_id":77243835,"comment_id":136177641,"body_markdown":"ok, can you please show me the way of configuring this, I&#39;m using a bounch of ways, but still no success.","body":"ok, can you please show me the way of configuring this, I&#39;m using a bounch of ways, but still no success."},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":1,"creation_date":1696609608,"post_id":77243835,"comment_id":136179831,"body_markdown":"Yes! Follow Honzas excellent answer below.","body":"Yes! Follow Honzas excellent answer below."}],"answers":[{"comments":[{"owner":{"account_id":9179794,"reputation":408,"user_id":6824092,"accept_rate":64,"display_name":"Hayk  Mkhitaryan"},"score":0,"creation_date":1696599023,"post_id":77244854,"comment_id":136177675,"body_markdown":"ok, so can you suggest here a solution?","body":"ok, so can you suggest here a solution?"},{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1696599260,"post_id":77244854,"comment_id":136177720,"body_markdown":"See my edit. But give some time to understand what CORS is before you start coding.","body":"See my edit. But give some time to understand what CORS is before you start coding."},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":1,"creation_date":1696615801,"post_id":77244854,"comment_id":136180889,"body_markdown":"_Cross-origin_, not _cross-site_. The distinction is [subtle but crucial](https://jub0bs.com/posts/2021-01-29-great-samesite-confusion/).","body":"<i>Cross-origin</i>, not <i>cross-site</i>. The distinction is <a href=\"https://jub0bs.com/posts/2021-01-29-great-samesite-confusion/\" rel=\"nofollow noreferrer\">subtle but crucial</a>."},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1696616248,"post_id":77244854,"comment_id":136180972,"body_markdown":"Also, you wrote: _you are configuring the server to tell the client that cross-origin requests are forbidden._ That&#39;s misleading; not enabling CORS does _not_ block all cross-origin requests. Browsers will agree to send so-called _simple_ requests without batting an eyelid. Try executing `fetch(&quot;//example.com&quot;)` in your browser&#39;s Console tab from this very page: there will be a CORS error, but only after the browser has already sent the request.","body":"Also, you wrote: <i>you are configuring the server to tell the client that cross-origin requests are forbidden.</i> That&#39;s misleading; not enabling CORS does <i>not</i> block all cross-origin requests. Browsers will agree to send so-called <i>simple</i> requests without batting an eyelid. Try executing <code>fetch(&quot;&#47;&#47;example.com&quot;)</code> in your browser&#39;s Console tab from this very page: there will be a CORS error, but only after the browser has already sent the request."},{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1696673597,"post_id":77244854,"comment_id":136185674,"body_markdown":"@jub0bs thanks for your correction. You are right. However, I just wanted to give the OP the global picture to correct his more deep misunderstanding, especially what cors().disable() means.","body":"@jub0bs thanks for your correction. You are right. However, I just wanted to give the OP the global picture to correct his more deep misunderstanding, especially what cors().disable() means."}],"tags":[],"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"comment_count":5,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1696615873,"creation_date":1696598792,"answer_id":77244854,"question_id":77243835,"body_markdown":"This is a misunderstanding what CORS is.\r\n\r\nYou need to understand that CORS handling is a **browser** feature, not *any* client feature, and it is not a server feature.\r\n\r\nIt is your browser who checks that a site requests a resource whose URL is cross-origin (a different protocol, a different domain, or a different port). This is built-in to the browsers, to protect the client against evil sites pretending they are someone else and trying to fetch resources from genuine backend services.\r\n\r\nWhen your site requests a resource from backend, your browser communicates with the server and asks it, if it allows CORS. If yes, the browser is happy and continues, otherwise you get an error.\r\n\r\nYou have never CORS problem when calling the request from POSTMAN, because there is no originating site, so the request *cannot* be cross-origin.\r\n\r\nBy calling `cors().disable()` you are not disabling the CORS check on the server, but you are configuring the server to tell the client that cross-origin requests are forbidden.\r\n\r\nWhat you really need are two options:\r\n\r\n1. The better option is to write your web site in a way that you do not need to handle CORS. In other words, call backend services only in the same protocol/domain/port as your web page is.\r\n\r\n2. If it is really necessary, you need to configure your server to **enable** CORS, not to disable it.\r\n\r\nThere are many sites describing it, try e.g. https://www.baeldung.com/spring-cors or https://stackoverflow.com/q/36968963/2886891","title":"CORS filter disable not working spring boot","body":"<p>This is a misunderstanding what CORS is.</p>\n<p>You need to understand that CORS handling is a <strong>browser</strong> feature, not <em>any</em> client feature, and it is not a server feature.</p>\n<p>It is your browser who checks that a site requests a resource whose URL is cross-origin (a different protocol, a different domain, or a different port). This is built-in to the browsers, to protect the client against evil sites pretending they are someone else and trying to fetch resources from genuine backend services.</p>\n<p>When your site requests a resource from backend, your browser communicates with the server and asks it, if it allows CORS. If yes, the browser is happy and continues, otherwise you get an error.</p>\n<p>You have never CORS problem when calling the request from POSTMAN, because there is no originating site, so the request <em>cannot</em> be cross-origin.</p>\n<p>By calling <code>cors().disable()</code> you are not disabling the CORS check on the server, but you are configuring the server to tell the client that cross-origin requests are forbidden.</p>\n<p>What you really need are two options:</p>\n<ol>\n<li><p>The better option is to write your web site in a way that you do not need to handle CORS. In other words, call backend services only in the same protocol/domain/port as your web page is.</p>\n</li>\n<li><p>If it is really necessary, you need to configure your server to <strong>enable</strong> CORS, not to disable it.</p>\n</li>\n</ol>\n<p>There are many sites describing it, try e.g. <a href=\"https://www.baeldung.com/spring-cors\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-cors</a> or <a href=\"https://stackoverflow.com/q/36968963/2886891\">How to configure CORS in a Spring Boot + Spring Security application?</a></p>\n"}],"owner":{"account_id":9179794,"reputation":408,"user_id":6824092,"accept_rate":64,"display_name":"Hayk  Mkhitaryan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696615873,"creation_date":1696589293,"question_id":77243835,"body_markdown":"I&#39;m configuring my security this way:\r\n\r\n    @Bean\r\n    SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n\r\n        final DelegatingJwtGrantedAuthoritiesConverter authoritiesConverter = new DelegatingJwtGrantedAuthoritiesConverter(\r\n                // First add the default converter\r\n                new JwtGrantedAuthoritiesConverter(),\r\n                // Second add our custom Keycloak specific converter\r\n                new KeycloakJwtRolesConverter());\r\n\r\n        // Set up http security to use the JWT converter defined above\r\n        httpSecurity\r\n\r\n                .oauth2ResourceServer(oauth2 -&gt;\r\n                        oauth2.jwt(jwtCustomizer -&gt; {\r\n                                    jwtCustomizer.jwtAuthenticationConverter(jwtAuthConvertor -&gt;\r\n                                            new JwtAuthenticationToken(jwtAuthConvertor,\r\n                                                    authoritiesConverter.convert(jwtAuthConvertor)));\r\n                                    jwtCustomizer.jwkSetUri(jwkUri);\r\n                                }\r\n                        )\r\n                )\r\n                .authorizeHttpRequests(authorize -&gt; authorize\r\n                        .requestMatchers(SECURED_URLS).hasAuthority(&quot;ROLE_realm_user&quot;)\r\n                        .requestMatchers(SWAGGER_UI_URLS)\r\n                        .permitAll()\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .cors(AbstractHttpConfigurer::disable);\r\n\r\n        return httpSecurity.build();\r\n    }\r\n\r\nand this is the URL which should be secured by some role\r\n\r\n        private static final RequestMatcher SECURED_URLS = new OrRequestMatcher(\r\n            AntPathRequestMatcher.antMatcher(HttpMethod.GET, &quot;/api/mySecuredURL/**&quot;)\r\n    );\r\n\r\n\r\nI&#39;m also disabling the cors check in the same method.\r\n\r\nand when I&#39;m doing the request from angular application, which is running on another port, I&#39;m getting 401 and this error:\r\n\r\n    Referrer Policy:strict-origin-when-cross-origin\r\n\r\nthis is due to cors check.\r\nand when I&#39;m doing the request from swagger or postman, the request succesfully comes to server and behaves as expected.\r\nNow when I change the secured url like &quot;/api1/mySecuredURL1/**&quot;\r\nIdeally it should restric the access and not let the request come in, since for this url I have configured some role, but\r\n 1. it lets the request in and precess the request (not expected behavior)\r\n 2. for the request from angular, it should let in, but it doesn&#39;t(not expected behavior)\r\n \r\n\r\nand this is my RoleConvertor class\r\n\r\n        public class KeycloakJwtRolesConverter implements Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt; {\r\n        /**\r\n         * Prefix used for realm level roles.\r\n         */\r\n        public static final String PREFIX_REALM_ROLE = &quot;ROLE_realm_&quot;;\r\n        /**\r\n         * Prefix used in combination with the resource (client) name for resource level roles.\r\n         */\r\n        public static final String PREFIX_RESOURCE_ROLE = &quot;ROLE_&quot;;\r\n    \r\n        /**\r\n         * Name of the claim containing the realm level roles\r\n         */\r\n        private static final String CLAIM_REALM_ACCESS = &quot;realm_access&quot;;\r\n        /**\r\n         * Name of the claim containing the resources (clients) the user has access to.\r\n         */\r\n        private static final String CLAIM_RESOURCE_ACCESS = &quot;resource_access&quot;;\r\n        /**\r\n         * Name of the claim containing roles. (Applicable to realm and resource level.)\r\n         */\r\n        private static final String CLAIM_ROLES = &quot;roles&quot;;\r\n    \r\n    \r\n        /**\r\n         * Extracts the realm and resource level roles from a JWT token distinguishing between them using prefixes.\r\n         */\r\n        @Override\r\n        public Collection&lt;GrantedAuthority&gt; convert(final Jwt jwt) {\r\n            // Collection that will hold the extracted roles\r\n            final Collection&lt;GrantedAuthority&gt; grantedAuthorities = new ArrayList&lt;&gt;();\r\n    \r\n            // Realm roles\r\n            // Get the part of the access token that holds the roles assigned on realm level\r\n            final Map&lt;String, Collection&lt;String&gt;&gt; realmAccess = jwt.getClaim(CLAIM_REALM_ACCESS);\r\n    \r\n            // Verify that the claim exists and is not empty\r\n            if (realmAccess != null &amp;&amp; !realmAccess.isEmpty()) {\r\n                // From the realm_access claim get the roles\r\n                final Collection&lt;String&gt; roles = realmAccess.get(CLAIM_ROLES);\r\n                // Check if any roles are present\r\n                if (roles != null &amp;&amp; !roles.isEmpty()) {\r\n                    final Collection&lt;? extends GrantedAuthority&gt; realmRoles = roles.stream()\r\n                            // Prefix all realm roles with &quot;ROLE_realm_&quot;\r\n                            .map(role -&gt; new SimpleGrantedAuthority(PREFIX_REALM_ROLE + role))\r\n                            .toList();\r\n                    grantedAuthorities.addAll(realmRoles);\r\n                }\r\n            }\r\n    \r\n            final Map&lt;String, Map&lt;String, Collection&lt;String&gt;&gt;&gt; resourceAccess = jwt.getClaim(CLAIM_RESOURCE_ACCESS);\r\n    \r\n            if (resourceAccess != null &amp;&amp; !resourceAccess.isEmpty()) {\r\n                resourceAccess.forEach((resource, resourceClaims) -&gt; resourceClaims.get(CLAIM_ROLES).forEach(\r\n                        role -&gt; grantedAuthorities.add(new SimpleGrantedAuthority(PREFIX_RESOURCE_ROLE + resource + &quot;_&quot; + role))\r\n                ));\r\n            }\r\n            return grantedAuthorities;\r\n        }\r\n    }","title":"CORS filter disable not working spring boot","body":"<p>I'm configuring my security this way:</p>\n<pre><code>@Bean\nSecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n\n    final DelegatingJwtGrantedAuthoritiesConverter authoritiesConverter = new DelegatingJwtGrantedAuthoritiesConverter(\n            // First add the default converter\n            new JwtGrantedAuthoritiesConverter(),\n            // Second add our custom Keycloak specific converter\n            new KeycloakJwtRolesConverter());\n\n    // Set up http security to use the JWT converter defined above\n    httpSecurity\n\n            .oauth2ResourceServer(oauth2 -&gt;\n                    oauth2.jwt(jwtCustomizer -&gt; {\n                                jwtCustomizer.jwtAuthenticationConverter(jwtAuthConvertor -&gt;\n                                        new JwtAuthenticationToken(jwtAuthConvertor,\n                                                authoritiesConverter.convert(jwtAuthConvertor)));\n                                jwtCustomizer.jwkSetUri(jwkUri);\n                            }\n                    )\n            )\n            .authorizeHttpRequests(authorize -&gt; authorize\n                    .requestMatchers(SECURED_URLS).hasAuthority(&quot;ROLE_realm_user&quot;)\n                    .requestMatchers(SWAGGER_UI_URLS)\n                    .permitAll()\n                    .anyRequest().authenticated()\n            )\n            .cors(AbstractHttpConfigurer::disable);\n\n    return httpSecurity.build();\n}\n</code></pre>\n<p>and this is the URL which should be secured by some role</p>\n<pre><code>    private static final RequestMatcher SECURED_URLS = new OrRequestMatcher(\n        AntPathRequestMatcher.antMatcher(HttpMethod.GET, &quot;/api/mySecuredURL/**&quot;)\n);\n</code></pre>\n<p>I'm also disabling the cors check in the same method.</p>\n<p>and when I'm doing the request from angular application, which is running on another port, I'm getting 401 and this error:</p>\n<pre><code>Referrer Policy:strict-origin-when-cross-origin\n</code></pre>\n<p>this is due to cors check.\nand when I'm doing the request from swagger or postman, the request succesfully comes to server and behaves as expected.\nNow when I change the secured url like &quot;/api1/mySecuredURL1/**&quot;\nIdeally it should restric the access and not let the request come in, since for this url I have configured some role, but</p>\n<ol>\n<li>it lets the request in and precess the request (not expected behavior)</li>\n<li>for the request from angular, it should let in, but it doesn't(not expected behavior)</li>\n</ol>\n<p>and this is my RoleConvertor class</p>\n<pre><code>    public class KeycloakJwtRolesConverter implements Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt; {\n    /**\n     * Prefix used for realm level roles.\n     */\n    public static final String PREFIX_REALM_ROLE = &quot;ROLE_realm_&quot;;\n    /**\n     * Prefix used in combination with the resource (client) name for resource level roles.\n     */\n    public static final String PREFIX_RESOURCE_ROLE = &quot;ROLE_&quot;;\n\n    /**\n     * Name of the claim containing the realm level roles\n     */\n    private static final String CLAIM_REALM_ACCESS = &quot;realm_access&quot;;\n    /**\n     * Name of the claim containing the resources (clients) the user has access to.\n     */\n    private static final String CLAIM_RESOURCE_ACCESS = &quot;resource_access&quot;;\n    /**\n     * Name of the claim containing roles. (Applicable to realm and resource level.)\n     */\n    private static final String CLAIM_ROLES = &quot;roles&quot;;\n\n\n    /**\n     * Extracts the realm and resource level roles from a JWT token distinguishing between them using prefixes.\n     */\n    @Override\n    public Collection&lt;GrantedAuthority&gt; convert(final Jwt jwt) {\n        // Collection that will hold the extracted roles\n        final Collection&lt;GrantedAuthority&gt; grantedAuthorities = new ArrayList&lt;&gt;();\n\n        // Realm roles\n        // Get the part of the access token that holds the roles assigned on realm level\n        final Map&lt;String, Collection&lt;String&gt;&gt; realmAccess = jwt.getClaim(CLAIM_REALM_ACCESS);\n\n        // Verify that the claim exists and is not empty\n        if (realmAccess != null &amp;&amp; !realmAccess.isEmpty()) {\n            // From the realm_access claim get the roles\n            final Collection&lt;String&gt; roles = realmAccess.get(CLAIM_ROLES);\n            // Check if any roles are present\n            if (roles != null &amp;&amp; !roles.isEmpty()) {\n                final Collection&lt;? extends GrantedAuthority&gt; realmRoles = roles.stream()\n                        // Prefix all realm roles with &quot;ROLE_realm_&quot;\n                        .map(role -&gt; new SimpleGrantedAuthority(PREFIX_REALM_ROLE + role))\n                        .toList();\n                grantedAuthorities.addAll(realmRoles);\n            }\n        }\n\n        final Map&lt;String, Map&lt;String, Collection&lt;String&gt;&gt;&gt; resourceAccess = jwt.getClaim(CLAIM_RESOURCE_ACCESS);\n\n        if (resourceAccess != null &amp;&amp; !resourceAccess.isEmpty()) {\n            resourceAccess.forEach((resource, resourceClaims) -&gt; resourceClaims.get(CLAIM_ROLES).forEach(\n                    role -&gt; grantedAuthorities.add(new SimpleGrantedAuthority(PREFIX_RESOURCE_ROLE + resource + &quot;_&quot; + role))\n            ));\n        }\n        return grantedAuthorities;\n    }\n}\n</code></pre>\n"},{"tags":["java","jsp"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1696615866,"post_id":77246514,"comment_id":136180901,"body_markdown":"By the way… The terribly-flawed legacy date-time classes like `java.util.Date` were years ago supplanted by the modern *java.time* classes defined in JSR 310. Specifically replaced by `java.time.Instant`.","body":"By the way… The terribly-flawed legacy date-time classes like <code>java.util.Date</code> were years ago supplanted by the modern <i>java.time</i> classes defined in JSR 310. Specifically replaced by <code>java.time.Instant</code>."},{"owner":{"account_id":1177078,"reputation":13265,"user_id":1152809,"accept_rate":62,"display_name":"Travis Heeter"},"score":0,"creation_date":1696619080,"post_id":77246514,"comment_id":136181412,"body_markdown":"Goes to show how old this code is that I have to deal with.","body":"Goes to show how old this code is that I have to deal with."}],"answers":[{"comments":[{"owner":{"account_id":1177078,"reputation":13265,"user_id":1152809,"accept_rate":62,"display_name":"Travis Heeter"},"score":1,"creation_date":1696615440,"post_id":77246549,"comment_id":136180841,"body_markdown":"Yup, that worked. Now that I know how stupid my question was, I&#39;ll probably go ahead and delete it to avoid the need for someone else to do it with all the red tape. Thanks babanin - sweet thumbnail.","body":"Yup, that worked. Now that I know how stupid my question was, I&#39;ll probably go ahead and delete it to avoid the need for someone else to do it with all the red tape. Thanks babanin - sweet thumbnail."}],"tags":[],"owner":{"account_id":910051,"reputation":3554,"user_id":944099,"accept_rate":90,"display_name":"babanin"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696615237,"creation_date":1696615237,"answer_id":77246549,"question_id":77246514,"body_markdown":"&gt; But, when I try to use java.util.stream or java.util.IntStream I get\r\n&gt; this error:\r\n\r\nYou should try:\r\n    \r\n    &lt;%@ page import=&quot;java.util.stream.IntStream&quot; %&gt;","title":"Importing IntStream in a jsp resolves to a package","body":"<blockquote>\n<p>But, when I try to use java.util.stream or java.util.IntStream I get\nthis error:</p>\n</blockquote>\n<p>You should try:</p>\n<pre><code>&lt;%@ page import=&quot;java.util.stream.IntStream&quot; %&gt;\n</code></pre>\n"}],"owner":{"account_id":1177078,"reputation":13265,"user_id":1152809,"accept_rate":62,"display_name":"Travis Heeter"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696615237,"creation_date":1696614817,"question_id":77246514,"body_markdown":"I&#39;m a java noob and an even bigger noob with jsp&#39;s and JBoss and Apache 2.4 (all of which my jsp is using to be served)\r\n\r\nI am making a jsp to be an endpoint for a ResultSet-turned-Json, and I have copied another jsp to get started (which works). There are import statements in the jsp such as\r\n\r\n```\r\n&lt;%@ page import=&quot;java.util.Date&quot; %&gt;\r\n```\r\n\r\nAnd Date works!\r\n\r\nBut, when I try to use `java.util.stream` or `java.util.IntStream` I get this error:\r\n\r\n&gt; `Only a type can be imported. java.util.IntStream resolves to a package`\r\n\r\nWhat am I doing wrong?\r\n\r\n---\r\n\r\nI have tried many searches on Google, to no avail. Also this SO question: https://stackoverflow.com/questions/239147/how-do-you-import-classes-in-jsp but no dice.\r\n\r\n***More Info***\r\n--\r\nI&#39;m following this guide to get a result set to print to json: https://www.baeldung.com/java-jdbc-convert-resultset-to-json - using the instructions for &quot;No external dependencies&quot;","title":"Importing IntStream in a jsp resolves to a package","body":"<p>I'm a java noob and an even bigger noob with jsp's and JBoss and Apache 2.4 (all of which my jsp is using to be served)</p>\n<p>I am making a jsp to be an endpoint for a ResultSet-turned-Json, and I have copied another jsp to get started (which works). There are import statements in the jsp such as</p>\n<pre><code>&lt;%@ page import=&quot;java.util.Date&quot; %&gt;\n</code></pre>\n<p>And Date works!</p>\n<p>But, when I try to use <code>java.util.stream</code> or <code>java.util.IntStream</code> I get this error:</p>\n<blockquote>\n<p><code>Only a type can be imported. java.util.IntStream resolves to a package</code></p>\n</blockquote>\n<p>What am I doing wrong?</p>\n<hr />\n<p>I have tried many searches on Google, to no avail. Also this SO question: <a href=\"https://stackoverflow.com/questions/239147/how-do-you-import-classes-in-jsp\">How do you import classes in JSP?</a> but no dice.</p>\n<h2><em><strong>More Info</strong></em></h2>\n<p>I'm following this guide to get a result set to print to json: <a href=\"https://www.baeldung.com/java-jdbc-convert-resultset-to-json\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-jdbc-convert-resultset-to-json</a> - using the instructions for &quot;No external dependencies&quot;</p>\n"},{"tags":["java","encryption","cryptography","aes","hmac"],"answers":[{"tags":[],"owner":{"account_id":2033317,"reputation":61286,"user_id":1816580,"display_name":"Artjom B."},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1696615215,"creation_date":1449695848,"answer_id":34189155,"question_id":34188763,"body_markdown":"The instructor means that HMAC should be applied to create an authentication tag for the ciphertext. This is called [encrypt-then-MAC][1]. HMAC is a keyed hash function which provides an authenticity (and integrity since authenticity without integrity doesn&#39;t mean anything) check for the recipient who has the correct key. Since it is essentially a hash function, it works by updating the internal state.\r\n\r\n    Mac mac = Mac.getInstance(&quot;HmacSHA1&quot;);\r\n    SecretKeySpec macKey = new SecretKeySpec(macKeyBytes, &quot;HmacSHA1&quot;);\r\n    mac.init(macKey);\r\n    mac.update(iv); // update for IV\r\n    ...\r\n    mac.update(output); // update for each ciphertext chunk\r\n    ...\r\n    byte[] authTag = mac.doFinal();\r\n    outfile.write(authTag); // at the very end\r\n\r\nOne problem remains and that is the generation of the `macKeyBytes`. It should not be the same as the encryption key that you generated from the password through PBKDF2. You should use the key that you generated to derive the encryption and the MAC key separately. This is usually done with [HKDF][2], but you could also use HMAC again for that. Pseudo-code:\r\n\r\n    byte[] encKeyBytes = hmacSha256(key, &quot;Encryption&quot;);\r\n    byte[] macKeyBytes = hmacSha256(key, &quot;Authentication&quot;);\r\n\r\n---\r\n\r\nThe instruction doesn&#39;t say anything about the key or password, so I&#39;m going to assume it should have been a static key (for testing purposes). The way you&#39;re using PBKDF2 is ok, but the salt also must be written to the file. Otherwise, the recipient won&#39;t be able to derive the same key without the random salt. Also, the salt should be probably 16 bytes long.\r\n\r\n---\r\n\r\nAnother problem with your current code is that you&#39;re writing the IV into a separate file. Don&#39;t do that. Just write the IV to the beginning of the ciphertext file. The IV has the same size as the block in CBC mode and AES has a fixed block size of 16 bytes. The recipient will always know how many bytes are to be read for the IV.\r\n\r\n\r\n  [1]: https://crypto.stackexchange.com/questions/8563/encrypt-then-mac-paradigm\r\n  [2]: https://www.rfc-editor.org/rfc/rfc5869","title":"Java Encryption With AES and MAC","body":"<p>The instructor means that HMAC should be applied to create an authentication tag for the ciphertext. This is called <a href=\"https://crypto.stackexchange.com/questions/8563/encrypt-then-mac-paradigm\">encrypt-then-MAC</a>. HMAC is a keyed hash function which provides an authenticity (and integrity since authenticity without integrity doesn't mean anything) check for the recipient who has the correct key. Since it is essentially a hash function, it works by updating the internal state.</p>\n<pre><code>Mac mac = Mac.getInstance(&quot;HmacSHA1&quot;);\nSecretKeySpec macKey = new SecretKeySpec(macKeyBytes, &quot;HmacSHA1&quot;);\nmac.init(macKey);\nmac.update(iv); // update for IV\n...\nmac.update(output); // update for each ciphertext chunk\n...\nbyte[] authTag = mac.doFinal();\noutfile.write(authTag); // at the very end\n</code></pre>\n<p>One problem remains and that is the generation of the <code>macKeyBytes</code>. It should not be the same as the encryption key that you generated from the password through PBKDF2. You should use the key that you generated to derive the encryption and the MAC key separately. This is usually done with <a href=\"https://www.rfc-editor.org/rfc/rfc5869\" rel=\"nofollow noreferrer\">HKDF</a>, but you could also use HMAC again for that. Pseudo-code:</p>\n<pre><code>byte[] encKeyBytes = hmacSha256(key, &quot;Encryption&quot;);\nbyte[] macKeyBytes = hmacSha256(key, &quot;Authentication&quot;);\n</code></pre>\n<hr />\n<p>The instruction doesn't say anything about the key or password, so I'm going to assume it should have been a static key (for testing purposes). The way you're using PBKDF2 is ok, but the salt also must be written to the file. Otherwise, the recipient won't be able to derive the same key without the random salt. Also, the salt should be probably 16 bytes long.</p>\n<hr />\n<p>Another problem with your current code is that you're writing the IV into a separate file. Don't do that. Just write the IV to the beginning of the ciphertext file. The IV has the same size as the block in CBC mode and AES has a fixed block size of 16 bytes. The recipient will always know how many bytes are to be read for the IV.</p>\n"}],"owner":{"display_name":"user1786794"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8798,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1696615215,"creation_date":1449694428,"question_id":34188763,"body_markdown":"I am trying to figure out a way to complete my Java coursework. I am expected to encrypt a file but honestly I didn&#39;t really understand the instructions. I achieved file encryption and decryption however I have doubts that it does the thing instructions says. The instruction is as following:\r\n\r\n - The encryption has three stages:\r\n - Generate 16-byte random data as the Initial Vector (IV) that is needed for the CBC mode\r\n - Apply the AES cipher to encrypt the content of the file in the CBC mode using the PKCS5 padding scheme.\r\n - Apply a MAC cipher (e.g., “HmacSHA1”) to compute a MAC that encapsulates IV and ciphertext\r\n - The encrypted file will be the concatenation of the following data: 16-byte IV || ciphertext || 20-byte HMAC\r\n\r\nThe code I have written is like this, it successfully encrypts a text file. This is the whole code for my application.\r\n\r\n\r\n\r\n    import java.io.FileNotFoundException;\r\n    import java.io.*;\r\n    import java.util.Scanner;\r\n\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.security.AlgorithmParameters;\r\n    import java.security.SecureRandom;\r\n    import java.security.spec.KeySpec;\r\n\r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.SecretKey;\r\n    import javax.crypto.SecretKeyFactory;\r\n    import javax.crypto.spec.IvParameterSpec;\r\n    import javax.crypto.spec.PBEKeySpec;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n\r\n    public class AESFileEncryption {\r\n\t\r\n\t/*public AESFileEncryption(String nameoffile){\r\n\t\t\r\n\t}\r\n\tpublic String FileReturn(String filename){\r\n\t\tString fl = filename;\t\t\r\n\t\treturn fl;\t\t\r\n\t}*/\r\n\t\r\n\tpublic static void main(String[] args) throws Exception {\r\n\r\n\t\tFile f = new File(&quot;plainfile.txt&quot;);\r\n\t\tFile g = new File(&quot;plainfile.txt.8102&quot;);\r\n\t\tFile fl = new File(&quot;plainfile.txt.8102&quot;);\r\n\t\t\r\n\t\tif(g.exists() &amp;&amp; !g.isDirectory()){\r\n\t\t\tSystem.out.println(&quot;The file is already encrypted...&quot;);\r\n\t\t\tString fname = fl.getAbsolutePath();\r\n\t\t\tSystem.out.print(&quot;Absolute Encrypted File Pathname =&gt; &quot;+ fname);\r\n\t\t\tSystem.exit(0);\r\n\t\t}\t\t\r\n\t\telse if(f.exists() &amp;&amp; !f.isDirectory()) { \r\n\t\t\t System.out.println(&quot; The file is found.The encryption process is going to begin...&quot;);\r\n\t\t\t\t \r\n\t\t}\t\t\r\n\t\telse{\r\n\t\t\t System.out.println(&quot; The file is missing!!!!&quot;);\r\n\t\t\t System.exit(0);\r\n\t\t}\r\n\t\t\r\n\t\t// file to be encrypted\r\n\t\tFileInputStream inFile = new FileInputStream(&quot;plainfile.txt&quot;);\t\t \r\n\r\n\t\t// encrypted file\r\n\t\tFileOutputStream outFile = new FileOutputStream(&quot;plainfile.txt.8102&quot;);\r\n\r\n\t\t\t\r\n\t\t// password to encrypt the file\r\n\t\tScanner scan= new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Enter the password : =&gt; &quot;);\r\n\t\tString password= scan.nextLine();\r\n\t\t\r\n\t\t//String password = &quot;javapapers&quot;;\r\n\r\n\t\t// password, iv and salt should be transferred to the other end\r\n\t\t// in a secure manner\r\n\r\n\t\t// salt is used for encoding\r\n\t\t// writing it to a file\r\n\t\t// salt should be transferred to the recipient securely\r\n\t\t// for decryption\r\n\t\tbyte[] salt = new byte[8];\r\n\t\tSecureRandom secureRandom = new SecureRandom();\r\n\t\tsecureRandom.nextBytes(salt);\r\n\t\tFileOutputStream saltOutFile = new FileOutputStream(&quot;salt.enc&quot;);\r\n\t\tsaltOutFile.write(salt);\r\n\t\tsaltOutFile.close();\r\n\r\n\t\tSecretKeyFactory factory = SecretKeyFactory\r\n\t\t\t\t.getInstance(&quot;PBKDF2WithHmacSHA1&quot;);\r\n\t\tKeySpec keySpec = new PBEKeySpec(password.toCharArray(), salt, 65536,\r\n\t\t\t\t256);\r\n\t\tSecretKey secretKey = factory.generateSecret(keySpec);\r\n\t\tSecretKey secret = new SecretKeySpec(secretKey.getEncoded(), &quot;AES&quot;);\r\n\r\n\t\t//\r\n\t\tCipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n\t\tcipher.init(Cipher.ENCRYPT_MODE, secret);\r\n\t\tAlgorithmParameters params = cipher.getParameters();\r\n\r\n\t\t// iv adds randomness to the text and just makes the mechanism more\r\n\t\t// secure\r\n\t\t// used while initializing the cipher\r\n\t\t// file to store the iv\r\n\t\tFileOutputStream ivOutFile = new FileOutputStream(&quot;iv.enc&quot;);\r\n\t\tbyte[] iv = params.getParameterSpec(IvParameterSpec.class).getIV();\r\n\t\tivOutFile.write(iv);\r\n\t\tivOutFile.close();\r\n\r\n\t\t//file encryption\r\n\t\tbyte[] input = new byte[64];\r\n\t\tint bytesRead;\r\n\r\n\t\twhile ((bytesRead = inFile.read(input)) != -1) {\r\n\t\t\tbyte[] output = cipher.update(input, 0, bytesRead);\r\n\t\t\tif (output != null)\r\n\t\t\t\toutFile.write(output);\r\n\t\t}\r\n\r\n\t\tbyte[] output = cipher.doFinal();\r\n\t\tif (output != null)\r\n\t\t\toutFile.write(output);\r\n\r\n\t\tinFile.close();\r\n\t\toutFile.flush();\r\n\t\toutFile.close();\r\n\r\n\t\tSystem.out.println(&quot;File Encrypted.&quot;);\r\n\t\t\r\n\t    }\r\n\r\n    }\r\n","title":"Java Encryption With AES and MAC","body":"<p>I am trying to figure out a way to complete my Java coursework. I am expected to encrypt a file but honestly I didn't really understand the instructions. I achieved file encryption and decryption however I have doubts that it does the thing instructions says. The instruction is as following:</p>\n\n<ul>\n<li>The encryption has three stages:</li>\n<li>Generate 16-byte random data as the Initial Vector (IV) that is needed for the CBC mode</li>\n<li>Apply the AES cipher to encrypt the content of the file in the CBC mode using the PKCS5 padding scheme.</li>\n<li>Apply a MAC cipher (e.g., “HmacSHA1”) to compute a MAC that encapsulates IV and ciphertext</li>\n<li>The encrypted file will be the concatenation of the following data: 16-byte IV || ciphertext || 20-byte HMAC</li>\n</ul>\n\n<p>The code I have written is like this, it successfully encrypts a text file. This is the whole code for my application.</p>\n\n<pre><code>import java.io.FileNotFoundException;\nimport java.io.*;\nimport java.util.Scanner;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.security.AlgorithmParameters;\nimport java.security.SecureRandom;\nimport java.security.spec.KeySpec;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.PBEKeySpec;\nimport javax.crypto.spec.SecretKeySpec;\n\npublic class AESFileEncryption {\n\n/*public AESFileEncryption(String nameoffile){\n\n}\npublic String FileReturn(String filename){\n    String fl = filename;       \n    return fl;      \n}*/\n\npublic static void main(String[] args) throws Exception {\n\n    File f = new File(\"plainfile.txt\");\n    File g = new File(\"plainfile.txt.8102\");\n    File fl = new File(\"plainfile.txt.8102\");\n\n    if(g.exists() &amp;&amp; !g.isDirectory()){\n        System.out.println(\"The file is already encrypted...\");\n        String fname = fl.getAbsolutePath();\n        System.out.print(\"Absolute Encrypted File Pathname =&gt; \"+ fname);\n        System.exit(0);\n    }       \n    else if(f.exists() &amp;&amp; !f.isDirectory()) { \n         System.out.println(\" The file is found.The encryption process is going to begin...\");\n\n    }       \n    else{\n         System.out.println(\" The file is missing!!!!\");\n         System.exit(0);\n    }\n\n    // file to be encrypted\n    FileInputStream inFile = new FileInputStream(\"plainfile.txt\");       \n\n    // encrypted file\n    FileOutputStream outFile = new FileOutputStream(\"plainfile.txt.8102\");\n\n\n    // password to encrypt the file\n    Scanner scan= new Scanner(System.in);\n    System.out.println(\"Enter the password : =&gt; \");\n    String password= scan.nextLine();\n\n    //String password = \"javapapers\";\n\n    // password, iv and salt should be transferred to the other end\n    // in a secure manner\n\n    // salt is used for encoding\n    // writing it to a file\n    // salt should be transferred to the recipient securely\n    // for decryption\n    byte[] salt = new byte[8];\n    SecureRandom secureRandom = new SecureRandom();\n    secureRandom.nextBytes(salt);\n    FileOutputStream saltOutFile = new FileOutputStream(\"salt.enc\");\n    saltOutFile.write(salt);\n    saltOutFile.close();\n\n    SecretKeyFactory factory = SecretKeyFactory\n            .getInstance(\"PBKDF2WithHmacSHA1\");\n    KeySpec keySpec = new PBEKeySpec(password.toCharArray(), salt, 65536,\n            256);\n    SecretKey secretKey = factory.generateSecret(keySpec);\n    SecretKey secret = new SecretKeySpec(secretKey.getEncoded(), \"AES\");\n\n    //\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    cipher.init(Cipher.ENCRYPT_MODE, secret);\n    AlgorithmParameters params = cipher.getParameters();\n\n    // iv adds randomness to the text and just makes the mechanism more\n    // secure\n    // used while initializing the cipher\n    // file to store the iv\n    FileOutputStream ivOutFile = new FileOutputStream(\"iv.enc\");\n    byte[] iv = params.getParameterSpec(IvParameterSpec.class).getIV();\n    ivOutFile.write(iv);\n    ivOutFile.close();\n\n    //file encryption\n    byte[] input = new byte[64];\n    int bytesRead;\n\n    while ((bytesRead = inFile.read(input)) != -1) {\n        byte[] output = cipher.update(input, 0, bytesRead);\n        if (output != null)\n            outFile.write(output);\n    }\n\n    byte[] output = cipher.doFinal();\n    if (output != null)\n        outFile.write(output);\n\n    inFile.close();\n    outFile.flush();\n    outFile.close();\n\n    System.out.println(\"File Encrypted.\");\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","jsp","intellij-idea","servlets"],"owner":{"account_id":29614293,"reputation":1,"user_id":22696803,"display_name":"Ale Paisley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696777138,"answer_count":0,"score":0,"last_activity_date":1696613617,"creation_date":1696613617,"question_id":77246429,"body_markdown":"I&#39;m working on a page that displays a database&#39;s information on a dashboard when an user succesfully logs in. It has other buttons on the aside section that display this information too. The problem is that after the login the information doesn&#39;t get displayed on dashboard.jsp using getServletContext().getRequestDispatcher to send it said information but does get displayed using one of the buttons that accesses the servlet directly.\r\n\r\n\r\nusersServlet code\r\n```\r\n\r\n@WebServlet(name = &quot;usersServlet&quot;,value = &quot;users&quot;)\r\npublic class UsersServlet extends HttpServlet {\r\n\r\n    UserService userService;\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException,IOException{\r\n        userService = new UserServiceImpl((Connection) request.getAttribute(&quot;conn&quot;));\r\n        List&lt;User&gt; users = userService.listUsers();\r\n        request.setAttribute(&quot;users&quot;,users);\r\n        getServletContext().getRequestDispatcher(&quot;/jsp/users/list.jsp&quot;).forward(request,response);\r\n\r\n    }\r\n\r\n```\r\n\r\ndashboard.jsp which builds the page. list.jsp is accessed correctly up and shows its content up until the user information.\r\n\r\n```\r\n\r\n&lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot; %&gt;\r\n&lt;jsp:include page=&quot;layout/header.jsp&quot;/&gt;\r\n&lt;jsp:include page=&quot;layout/content.jsp&quot;/&gt;\r\n\r\n&lt;!-- Contenido de la p&#225;gina --&gt;\r\n&lt;h1&gt;Este es el Home&lt;/h1&gt;\r\n&lt;jsp:include page=&quot;users/list.jsp&quot;/&gt;\r\n&lt;jsp:include page=&quot;layout/footer.jsp&quot;/&gt;\r\n\r\n\r\n\r\n\r\n```\r\n\r\nlist.jsp which is supposed to show the the users on the dashboard but only shows the column&#39;s names. Works when accesing the servlet directly\r\n\r\n```\r\n&lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;%@taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot;%&gt;\r\n\r\n&lt;!-- Contenido de la p&#225;gina --&gt;\r\n&lt;div class=&quot;container&quot; style=&quot;margin-top: 15px&quot;&gt;\r\n    &lt;script&gt;\r\n        console.log(&quot;N&#250;mero de usuarios: ${users.size()}&quot;);\r\n\r\n        &lt;c:forEach var=&quot;usuario&quot; items=&quot;${users}&quot;&gt;\r\n        console.log(&quot;Usuario: ${usuario.name}&quot;);\r\n        &lt;/c:forEach&gt;\r\n    &lt;/script&gt;\r\n\r\n    &lt;a class=&quot;btn btn-primary btn-block mb-4&quot; style=&quot;width: 100px;&quot; href=&quot;${pageContext.request.contextPath}/jsp/users/NewUser.jsp&quot;&gt;Nuevo&lt;/a&gt;  &lt;!-- OJO ACA--&gt;\r\n    &lt;table class=&quot;table table-striped&quot;&gt;\r\n        &lt;thead&gt;\r\n        &lt;tr&gt;\r\n            &lt;th&gt;&lt;/th&gt;\r\n            &lt;th scope=&quot;col&quot;&gt;C&#243;digo&lt;/th&gt;\r\n            &lt;th scope=&quot;col&quot;&gt;Nombre&lt;/th&gt;\r\n            &lt;th scope=&quot;col&quot;&gt;Correo&lt;/th&gt;\r\n        &lt;/tr&gt;\r\n        &lt;/thead&gt;\r\n        &lt;tbody&gt;\r\n        &lt;c:forEach items=&quot;${users}&quot; var=&quot;usuario&quot;&gt;\r\n            &lt;tr&gt;\r\n                &lt;td&gt;\r\n                    &lt;a href=&quot;#&quot; class=&quot;btn btn-primary&quot;\r\n                       style=&quot;padding: 5px 10px 5px 10px;&quot;&gt;\r\n                        &lt;i class=&quot;fas fa-pencil-alt me-2&quot; style=&quot;margin-right: 0px !important;&quot;&gt;&lt;/i&gt;\r\n                    &lt;/a&gt;\r\n                    &lt;a href=&quot;#&quot; class=&quot;btn btn-danger&quot;\r\n                       style=&quot;padding: 5px 10px 5px 10px;&quot;&gt;\r\n                        &lt;i class=&quot;fas fa-trash-alt me-2&quot; style=&quot;margin-right: 0px !important;&quot;&gt;&lt;/i&gt;\r\n                    &lt;/a&gt;\r\n                &lt;/td&gt;\r\n                &lt;td&gt;${usuario.id}&lt;/td&gt;\r\n                &lt;td&gt;${usuario.name}&lt;/td&gt;\r\n                &lt;td&gt;${usuario.username}&lt;/td&gt;\r\n            &lt;/tr&gt;\r\n        &lt;/c:forEach&gt;\r\n        &lt;/tbody&gt;\r\n    &lt;/table&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;jsp:include page=&quot;../layout/footer.jsp&quot;/&gt;\r\n```\r\n\r\n\r\n\r\nAll other servlets related to retrieving the information show it correctly and work without issues. I added pieces of code to both list.jsp and usersServlet to verify it and they did display the information, but only after accesing the part of the page that accesses usersServlet by value. Here&#39;s my web.xml. Keep in mind that it was not mentioned in class that we should change it.\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;\r\n         version=&quot;5.0&quot;&gt;\r\n&lt;/web-app&gt;\r\n```\r\n","title":"getServletContext().getRequestDispatcher doesn&#39;t forward to jsp","body":"<p>I'm working on a page that displays a database's information on a dashboard when an user succesfully logs in. It has other buttons on the aside section that display this information too. The problem is that after the login the information doesn't get displayed on dashboard.jsp using getServletContext().getRequestDispatcher to send it said information but does get displayed using one of the buttons that accesses the servlet directly.</p>\n<p>usersServlet code</p>\n<pre><code>\n@WebServlet(name = &quot;usersServlet&quot;,value = &quot;users&quot;)\npublic class UsersServlet extends HttpServlet {\n\n    UserService userService;\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException,IOException{\n        userService = new UserServiceImpl((Connection) request.getAttribute(&quot;conn&quot;));\n        List&lt;User&gt; users = userService.listUsers();\n        request.setAttribute(&quot;users&quot;,users);\n        getServletContext().getRequestDispatcher(&quot;/jsp/users/list.jsp&quot;).forward(request,response);\n\n    }\n\n</code></pre>\n<p>dashboard.jsp which builds the page. list.jsp is accessed correctly up and shows its content up until the user information.</p>\n<pre><code>\n&lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot; %&gt;\n&lt;jsp:include page=&quot;layout/header.jsp&quot;/&gt;\n&lt;jsp:include page=&quot;layout/content.jsp&quot;/&gt;\n\n&lt;!-- Contenido de la página --&gt;\n&lt;h1&gt;Este es el Home&lt;/h1&gt;\n&lt;jsp:include page=&quot;users/list.jsp&quot;/&gt;\n&lt;jsp:include page=&quot;layout/footer.jsp&quot;/&gt;\n\n\n\n\n</code></pre>\n<p>list.jsp which is supposed to show the the users on the dashboard but only shows the column's names. Works when accesing the servlet directly</p>\n<pre><code>&lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot;%&gt;\n\n&lt;!-- Contenido de la página --&gt;\n&lt;div class=&quot;container&quot; style=&quot;margin-top: 15px&quot;&gt;\n    &lt;script&gt;\n        console.log(&quot;Número de usuarios: ${users.size()}&quot;);\n\n        &lt;c:forEach var=&quot;usuario&quot; items=&quot;${users}&quot;&gt;\n        console.log(&quot;Usuario: ${usuario.name}&quot;);\n        &lt;/c:forEach&gt;\n    &lt;/script&gt;\n\n    &lt;a class=&quot;btn btn-primary btn-block mb-4&quot; style=&quot;width: 100px;&quot; href=&quot;${pageContext.request.contextPath}/jsp/users/NewUser.jsp&quot;&gt;Nuevo&lt;/a&gt;  &lt;!-- OJO ACA--&gt;\n    &lt;table class=&quot;table table-striped&quot;&gt;\n        &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;&lt;/th&gt;\n            &lt;th scope=&quot;col&quot;&gt;Código&lt;/th&gt;\n            &lt;th scope=&quot;col&quot;&gt;Nombre&lt;/th&gt;\n            &lt;th scope=&quot;col&quot;&gt;Correo&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n        &lt;c:forEach items=&quot;${users}&quot; var=&quot;usuario&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;a href=&quot;#&quot; class=&quot;btn btn-primary&quot;\n                       style=&quot;padding: 5px 10px 5px 10px;&quot;&gt;\n                        &lt;i class=&quot;fas fa-pencil-alt me-2&quot; style=&quot;margin-right: 0px !important;&quot;&gt;&lt;/i&gt;\n                    &lt;/a&gt;\n                    &lt;a href=&quot;#&quot; class=&quot;btn btn-danger&quot;\n                       style=&quot;padding: 5px 10px 5px 10px;&quot;&gt;\n                        &lt;i class=&quot;fas fa-trash-alt me-2&quot; style=&quot;margin-right: 0px !important;&quot;&gt;&lt;/i&gt;\n                    &lt;/a&gt;\n                &lt;/td&gt;\n                &lt;td&gt;${usuario.id}&lt;/td&gt;\n                &lt;td&gt;${usuario.name}&lt;/td&gt;\n                &lt;td&gt;${usuario.username}&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/c:forEach&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n\n&lt;jsp:include page=&quot;../layout/footer.jsp&quot;/&gt;\n</code></pre>\n<p>All other servlets related to retrieving the information show it correctly and work without issues. I added pieces of code to both list.jsp and usersServlet to verify it and they did display the information, but only after accesing the part of the page that accesses usersServlet by value. Here's my web.xml. Keep in mind that it was not mentioned in class that we should change it.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;\n         version=&quot;5.0&quot;&gt;\n&lt;/web-app&gt;\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":2,"creation_date":1696587033,"post_id":77243558,"comment_id":136175288,"body_markdown":"Add all information as text not as image","body":"Add all information as text not as image"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1696587394,"post_id":77243558,"comment_id":136175352,"body_markdown":"Set the -vm option to the actual Java installation, not the shim you&#39;re currently using.","body":"Set the -vm option to the actual Java installation, not the shim you&#39;re currently using."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":2,"creation_date":1696594151,"post_id":77243558,"comment_id":136176588,"body_markdown":"Better use the Java that is shipped with Eclipse instead of a Java that is installed in your system.","body":"Better use the Java that is shipped with Eclipse instead of a Java that is installed in your system."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1696595516,"post_id":77243558,"comment_id":136176851,"body_markdown":"Most Eclipse downloads include a suitable Java and default to run with that - you should use one of those and not try to change the Java.","body":"Most Eclipse downloads include a suitable Java and default to run with that - you should use one of those and not try to change the Java."}],"answers":[{"tags":[],"owner":{"account_id":24157215,"reputation":104,"user_id":18121299,"display_name":"SpeedyTheSnail"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696613502,"creation_date":1696613502,"answer_id":77246418,"question_id":77243558,"body_markdown":"As other commenters have stated here, use either the JVM that is bundled with Eclipse, or, as I recommend, install Temurin JDK 17 (https://adoptium.net/temurin/releases/). \r\n\r\nWhen installing it, install the JAVA_HOME path option too.\r\n\r\nAlso, refer to this answer:\r\nhttps://stackoverflow.com/a/42145921/18121299","title":"Eclipse wont run why?","body":"<p>As other commenters have stated here, use either the JVM that is bundled with Eclipse, or, as I recommend, install Temurin JDK 17 (<a href=\"https://adoptium.net/temurin/releases/\" rel=\"nofollow noreferrer\">https://adoptium.net/temurin/releases/</a>).</p>\n<p>When installing it, install the JAVA_HOME path option too.</p>\n<p>Also, refer to this answer:\n<a href=\"https://stackoverflow.com/a/42145921/18121299\">https://stackoverflow.com/a/42145921/18121299</a></p>\n"}],"owner":{"account_id":21391010,"reputation":9,"user_id":15755064,"display_name":"Chamekh Sarra"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1696613502,"creation_date":1696586778,"question_id":77243558,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\nHello it seems like everytime when i lunch Eclipse it shows me this poppup and idk how to fix it i checked the JVM and the SDK everything is in order what should i do ?? at 1st it was another issue this was the 1st poppup : \r\n\r\n    version 1.8.0_381 of the JVM is not suitble for this product. Version :17 or greater is required \r\n\r\nbut then when i configured the env path the shown screenshot now keeps preventing me from using Eclipse\r\n\r\ni thought that configuring the env path was the problem but it wasnt \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3c8bU.png\r\n","title":"Eclipse wont run why?","body":"<p><a href=\"https://i.stack.imgur.com/3c8bU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3c8bU.png\" alt=\"enter image description here\" /></a></p>\n<p>Hello it seems like everytime when i lunch Eclipse it shows me this poppup and idk how to fix it i checked the JVM and the SDK everything is in order what should i do ?? at 1st it was another issue this was the 1st poppup :</p>\n<pre><code>version 1.8.0_381 of the JVM is not suitble for this product. Version :17 or greater is required \n</code></pre>\n<p>but then when i configured the env path the shown screenshot now keeps preventing me from using Eclipse</p>\n<p>i thought that configuring the env path was the problem but it wasnt</p>\n"},{"tags":["java","date","datetime","parsing","text-parsing"],"comments":[{"owner":{"account_id":1146245,"reputation":580,"user_id":1128925,"accept_rate":78,"display_name":"cliff2310"},"score":2,"creation_date":1692386308,"post_id":76931918,"comment_id":135620955,"body_markdown":"What about 1102023 (1 Oct 2023)? I think you will need &#39;ddMMyyyy&#39;, for &#39;ddMyyyy&#39;  may not be a valid date format.","body":"What about 1102023 (1 Oct 2023)? I think you will need &#39;ddMMyyyy&#39;, for &#39;ddMyyyy&#39;  may not be a valid date format."},{"owner":{"account_id":26385561,"reputation":109,"user_id":20038123,"display_name":"Twisted Tea"},"score":0,"creation_date":1692387754,"post_id":76931918,"comment_id":135621216,"body_markdown":"@cliff2310 that case in particular I believe I see a way around (there&#39;s no zero month, so 110 has to refer to 10/1), but I think I see your point if we consider something like 1112023 (111 is ambiguous, and could refer to 11-1 or 1-11). Unfortunately, I have no control over the format","body":"@cliff2310 that case in particular I believe I see a way around (there&#39;s no zero month, so 110 has to refer to 10/1), but I think I see your point if we consider something like 1112023 (111 is ambiguous, and could refer to 11-1 or 1-11). Unfortunately, I have no control over the format"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1692388028,"post_id":76931918,"comment_id":135621255,"body_markdown":"First, you obviously cannot represent all the months of the year that way. That may be OK if it’s for a special purpose. Second I believe that you can use a `DateTimeFormatterBuilder` to specify 1-digit month and that way build a `DateTimeFormatter` that can parse into a `LocalDate`.","body":"First, you obviously cannot represent all the months of the year that way. That may be OK if it’s for a special purpose. Second I believe that you can use a <code>DateTimeFormatterBuilder</code> to specify 1-digit month and that way build a <code>DateTimeFormatter</code> that can parse into a <code>LocalDate</code>."},{"owner":{"account_id":26385561,"reputation":109,"user_id":20038123,"display_name":"Twisted Tea"},"score":0,"creation_date":1692388208,"post_id":76931918,"comment_id":135621288,"body_markdown":"@OleV.V …of course you can’t represent all months of the year with 1 digit, `M` historically refers to a month without zero padding (8, 9, 10 instead of 08, 09, 10)","body":"@OleV.V …of course you can’t represent all months of the year with 1 digit, <code>M</code> historically refers to a month without zero padding (8, 9, 10 instead of 08, 09, 10)"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1692391818,"post_id":76931918,"comment_id":135621811,"body_markdown":"An interesting error; the month should be discernible from the `dd`, as opposed to a single `d`.","body":"An interesting error; the month should be discernible from the <code>dd</code>, as opposed to a single <code>d</code>."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1692397043,"post_id":76931918,"comment_id":135622494,"body_markdown":"It looks like _[DateTimeFormatterBuilder](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatterBuilder.html) would be the solution, since you&#39;ll have more control over each pattern character.","body":"It looks like _<a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatterBuilder.html\" rel=\"nofollow noreferrer\">DateTimeFormatterBuilder</a> would be the solution, since you&#39;ll have more control over each pattern character."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1692434504,"post_id":76931918,"comment_id":135624923,"body_markdown":"So are you saying that you want for example 31121995? So 7 digits in total during the first 9 months of the year and 8 digits for October through December? (That would be a further complication compared to what I understood from the question. Also `SimpleDateFormat` would not be able to do that, and I don’t think that `DateTimeFormatterBuilder` would either.)","body":"So are you saying that you want for example 31121995? So 7 digits in total during the first 9 months of the year and 8 digits for October through December? (That would be a further complication compared to what I understood from the question. Also <code>SimpleDateFormat</code> would not be able to do that, and I don’t think that <code>DateTimeFormatterBuilder</code> would either.)"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1692444093,"post_id":76931918,"comment_id":135625890,"body_markdown":"[Here’s a `DateTimeFormatter` that accepts both ddMuuuu and ddMMuuuu, running onlinne](https://rextester.com/PTJID8297). I simply specified each of them as optional and used `DateTimeFormatterBuilder.appendValue(ChronoField.MONTH_OF_YEAR, 1)` to specify 1-digit month.","body":"<a href=\"https://rextester.com/PTJID8297\" rel=\"nofollow noreferrer\">Here’s a <code>DateTimeFormatter</code> that accepts both ddMuuuu and ddMMuuuu, running onlinne</a>. I simply specified each of them as optional and used <code>DateTimeFormatterBuilder.appendValue(ChronoField.MONTH_OF_YE&zwnj;&#8203;AR, 1)</code> to specify 1-digit month."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1692649711,"post_id":76931918,"comment_id":135650006,"body_markdown":"One of the big problems with `SimpleDateFormat` was it also &quot;worked&quot; for for example `23111995`, only if you expected 23 November 1995, no such luck. You get `Mon Jan 23 00:00:00 CET 11995`, nearly 10000 years off.","body":"One of the big problems with <code>SimpleDateFormat</code> was it also &quot;worked&quot; for for example <code>23111995</code>, only if you expected 23 November 1995, no such luck. You get <code>Mon Jan 23 00:00:00 CET 11995</code>, nearly 10000 years off."}],"answers":[{"comments":[{"owner":{"account_id":26385561,"reputation":109,"user_id":20038123,"display_name":"Twisted Tea"},"score":0,"creation_date":1692387915,"post_id":76932131,"comment_id":135621240,"body_markdown":"Hi, so if I&#39;m not mistaken, you&#39;re saying that only the zero padded month (`MM`) works in `DateTimeFormatter`, and not the padding-free month (`M`) like in `SimpleDateFormat`? Thanks","body":"Hi, so if I&#39;m not mistaken, you&#39;re saying that only the zero padded month (<code>MM</code>) works in <code>DateTimeFormatter</code>, and not the padding-free month (<code>M</code>) like in <code>SimpleDateFormat</code>? Thanks"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1692388154,"post_id":76932131,"comment_id":135621276,"body_markdown":"Exactly. But you can also split the `date` and `patt`, this way: `String date = &quot;23 9 1995&quot;` &amp; `String patt = &quot;dd M yyyy&quot;`. I will put this in my answer.","body":"Exactly. But you can also split the <code>date</code> and <code>patt</code>, this way: <code>String date = &quot;23 9 1995&quot;</code> &amp; <code>String patt = &quot;dd M yyyy&quot;</code>. I will put this in my answer."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692391501,"post_id":76932131,"comment_id":135621743,"body_markdown":"but not for formatting - using `DateTimeFormatter.ofPattern(&quot;ddMyyyy&quot;)` when formatting will result in `1882023` for example","body":"but not for formatting - using <code>DateTimeFormatter.ofPattern(&quot;ddMyyyy&quot;)</code> when formatting will result in <code>1882023</code> for example"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1692392043,"post_id":76932131,"comment_id":135621847,"body_markdown":"@DiegoBorba, do you have a reference for this?  I can&#39;t find it in the _JavaDoc_.","body":"@DiegoBorba, do you have a reference for this?  I can&#39;t find it in the <i>JavaDoc</i>."},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1692392348,"post_id":76932131,"comment_id":135621893,"body_markdown":"@Reilas I put in the answer the links that I thought be most pertinent, but i research mainly in [Java Documentation](https://docs.oracle.com/javase/8/docs/)","body":"@Reilas I put in the answer the links that I thought be most pertinent, but i research mainly in <a href=\"https://docs.oracle.com/javase/8/docs/\" rel=\"nofollow noreferrer\">Java Documentation</a>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1692392516,"post_id":76932131,"comment_id":135621922,"body_markdown":"Where in the DateTimeFormatter javadoc does it state that M can only be parsed as two digits?","body":"Where in the DateTimeFormatter javadoc does it state that M can only be parsed as two digits?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1692395127,"post_id":76932131,"comment_id":135622281,"body_markdown":"@DiegoBorba, no I mean where it says that the `M` cannot be singular for parsing.","body":"@DiegoBorba, no I mean where it says that the <code>M</code> cannot be singular for parsing."},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1692408615,"post_id":76932131,"comment_id":135623365,"body_markdown":"But i said *&quot;the M pattern symbol is specifically intended for parsing single or double-digit months&quot;*.","body":"But i said <i>&quot;the M pattern symbol is specifically intended for parsing single or double-digit months&quot;</i>."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1692445875,"post_id":76932131,"comment_id":135626080,"body_markdown":"BTW `LocalDate.parse(&quot;7 0009 1822&quot;, DateTimeFormatter.ofPattern(&quot;d M y&quot;))` results in `1822-09-07`","body":"BTW <code>LocalDate.parse(&quot;7 0009 1822&quot;, DateTimeFormatter.ofPattern(&quot;d M y&quot;))</code> results in <code>1822-09-07</code>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1692467151,"post_id":76932131,"comment_id":135628458,"body_markdown":"For numerical fields a single letter means &quot;as many digits as it takes&quot; (so as you said it does not mean &quot;1 digit&quot;). Unfortunately this is not well documented. And unfortunately for months it is not limited to two digits. It accept `009` for September too, for example, which does not really make sense to me.","body":"For numerical fields a single letter means &quot;as many digits as it takes&quot; (so as you said it does not mean &quot;1 digit&quot;). Unfortunately this is not well documented. And unfortunately for months it is not limited to two digits. It accept <code>009</code> for September too, for example, which does not really make sense to me."}],"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":10,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1696613139,"creation_date":1692387284,"answer_id":76932131,"question_id":76931918,"body_markdown":"The reason the pattern  `ddMyyyy` works with `SimpleDateFormat` but not with `DateTimeFormatter` is due to the differences in pattern symbols and their interpretation between these two classes.\r\n\r\n`SimpleDateFormat` and `DateTimeFormatter` are used to parse and format dates, but they have different sets of pattern symbols and behaviors.\r\n\r\nIn `SimpleDateFormat`, the `M` pattern symbol represents the month in numeric form, and it is intended to handle both single and double-digit months. So, in your original pattern `ddMyyyy`, the `M` symbol was interpreted as a single-digit month, and that&#39;s why it worked with the input `&quot;2391995&quot;` (assuming it&#39;s meant to be `&quot;23/9/1995&quot;`).\r\n\r\nOn the other hand, in `DateTimeFormatter`, the `M` pattern symbol is specifically intended for parsing single or double-digit months, but it requires a month value that includes a leading zero for single-digit months. Since your input `&quot;2391995&quot;` has a single-digit month (9), it does not have a leading zero, and that&#39;s why the pattern `ddMyyyy` didn&#39;t work as expected.\r\n\r\nLike I said, to solve you can include a leading zero, but you can also split the values this way:\r\n\r\n```java\r\nString date = &quot;23 9 1995&quot;;\r\nString patt = &quot;dd M yyyy&quot;;\r\n``` \r\n\r\nCheck this out:\r\n\r\n - [*Java SimpleDateFormat Patterns*][1]\r\n - [*Java DateTimeFormatter Patterns*][2]\r\n\r\n\r\n  [1]: https://www.javatpoint.com/java-simpledateformat\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns","title":"Java DateTimeFormatter Not Working for Pattern &#39;ddMyyyy&#39;","body":"<p>The reason the pattern  <code>ddMyyyy</code> works with <code>SimpleDateFormat</code> but not with <code>DateTimeFormatter</code> is due to the differences in pattern symbols and their interpretation between these two classes.</p>\n<p><code>SimpleDateFormat</code> and <code>DateTimeFormatter</code> are used to parse and format dates, but they have different sets of pattern symbols and behaviors.</p>\n<p>In <code>SimpleDateFormat</code>, the <code>M</code> pattern symbol represents the month in numeric form, and it is intended to handle both single and double-digit months. So, in your original pattern <code>ddMyyyy</code>, the <code>M</code> symbol was interpreted as a single-digit month, and that's why it worked with the input <code>&quot;2391995&quot;</code> (assuming it's meant to be <code>&quot;23/9/1995&quot;</code>).</p>\n<p>On the other hand, in <code>DateTimeFormatter</code>, the <code>M</code> pattern symbol is specifically intended for parsing single or double-digit months, but it requires a month value that includes a leading zero for single-digit months. Since your input <code>&quot;2391995&quot;</code> has a single-digit month (9), it does not have a leading zero, and that's why the pattern <code>ddMyyyy</code> didn't work as expected.</p>\n<p>Like I said, to solve you can include a leading zero, but you can also split the values this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String date = &quot;23 9 1995&quot;;\nString patt = &quot;dd M yyyy&quot;;\n</code></pre>\n<p>Check this out:</p>\n<ul>\n<li><a href=\"https://www.javatpoint.com/java-simpledateformat\" rel=\"nofollow noreferrer\"><em>Java SimpleDateFormat Patterns</em></a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns\" rel=\"nofollow noreferrer\"><em>Java DateTimeFormatter Patterns</em></a></li>\n</ul>\n"}],"owner":{"account_id":26385561,"reputation":109,"user_id":20038123,"display_name":"Twisted Tea"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":1,"score":3,"last_activity_date":1696613139,"creation_date":1692384594,"question_id":76931918,"body_markdown":"Consider the following date:\r\n\r\n```java\r\nString date = &quot;2391995&quot;;\r\nString patt = &quot;ddMyyyy&quot;;\r\n```\r\n\r\nUsing the pattern provided, we can see that `date` represents September 23, 1995.\r\n\r\nBut consider what happens when trying to parse it - first the old way, and then the Java 8+ way:\r\n\r\n```java\r\nDate dd = new SimpleDateFormat(patt).parse(date);\r\nSystem.out.println(dd);\r\n\t\t\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(patt);\r\nLocalDate d = LocalDate.parse(date, formatter);\r\nSystem.out.println(d);\r\n```\r\n\r\nOutput:\r\n```java\r\nSat Sep 23 00:00:00 EDT 1995\r\nException in thread &quot;main&quot; java.time.format.DateTimeParseException: Text &#39;2391995&#39; could not be parsed at index 7\r\n    ...\r\n```\r\n\r\nAs we can see, the old way, using `SimpleDateFormat` works as intended. But when using `DateTimeFormatter` and `LocalDate.parse`, an error occurs. Why is this?","title":"Java DateTimeFormatter Not Working for Pattern &#39;ddMyyyy&#39;","body":"<p>Consider the following date:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String date = &quot;2391995&quot;;\nString patt = &quot;ddMyyyy&quot;;\n</code></pre>\n<p>Using the pattern provided, we can see that <code>date</code> represents September 23, 1995.</p>\n<p>But consider what happens when trying to parse it - first the old way, and then the Java 8+ way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Date dd = new SimpleDateFormat(patt).parse(date);\nSystem.out.println(dd);\n        \nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(patt);\nLocalDate d = LocalDate.parse(date, formatter);\nSystem.out.println(d);\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Sat Sep 23 00:00:00 EDT 1995\nException in thread &quot;main&quot; java.time.format.DateTimeParseException: Text '2391995' could not be parsed at index 7\n    ...\n</code></pre>\n<p>As we can see, the old way, using <code>SimpleDateFormat</code> works as intended. But when using <code>DateTimeFormatter</code> and <code>LocalDate.parse</code>, an error occurs. Why is this?</p>\n"},{"tags":["java","android","flutter"],"answers":[{"tags":[],"owner":{"account_id":17957206,"reputation":23,"user_id":13048944,"display_name":"Allviss"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696612960,"creation_date":1696612960,"answer_id":77246373,"question_id":76625542,"body_markdown":"You can rename the folders under kotlin folder and the package in MainActivity.kt is same with path in error message. Because create project by command in Mac will make example folder but config is computer_name folder\r\nrenname folder \r\n\r\n`kotlin\\com\\example\\project_name\\MainActivity.kt -&gt; kotlin\\com\\computer_name(or something else}\\project_name\\MainActivity.kt` \r\n\r\nand rename package in MainActivity.kt to new one.\r\n\r\n`package com.example.project_name -&gt; package com.computer_name.project_name`\r\n\r\n","title":"Flutter: FATAL EXCEPTION: main E/AndroidRuntime(18756): Process: com.example.flutter_application_1, PID: 18756","body":"<p>You can rename the folders under kotlin folder and the package in MainActivity.kt is same with path in error message. Because create project by command in Mac will make example folder but config is computer_name folder\nrenname folder</p>\n<p><code>kotlin\\com\\example\\project_name\\MainActivity.kt -&gt; kotlin\\com\\computer_name(or something else}\\project_name\\MainActivity.kt</code></p>\n<p>and rename package in MainActivity.kt to new one.</p>\n<p><code>package com.example.project_name -&gt; package com.computer_name.project_name</code></p>\n"}],"owner":{"account_id":25260091,"reputation":71,"user_id":19091106,"display_name":"sarakhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696612960,"creation_date":1688618425,"question_id":76625542,"body_markdown":"i setup Flutter in my mackbook, created project but when i run it app built successfully but it crashed. \r\n\r\nhere are logs of `flutter doctor`\r\n\r\n```\r\n✓] Flutter (Channel stable, 3.7.0, on macOS 13.0 22A380 darwin-arm64 (Rosetta),\r\n    locale en-PK)\r\n[✓] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n[✓] Xcode - develop for iOS and macOS (Xcode 14.3.1)\r\n[✓] Chrome - develop for the web\r\n[!] Android Studio (version 2022.2)\r\n    ✗ Unable to find bundled Java version.\r\n[✓] VS Code (version 1.79.2)\r\n[✓] Connected device (2 available)\r\n[✓] HTTP Host Availability\r\n\r\n```\r\n\r\nand here are the logs when i run application\r\n\r\n```\r\nLaunching lib/main.dart on sdk gphone arm64 in debug mode...\r\nmain.dart:1\r\n✓  Built build/app/outputs/flutter-apk/app-debug.apk.\r\nE/AndroidRuntime(10518): FATAL EXCEPTION: main\r\nE/AndroidRuntime(10518): Process: com.example.flutter_application_1, PID: 10518\r\nE/AndroidRuntime(10518): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.flutter_application_1/com.example.flutter_application_1.MainActivity}: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.example.flutter_application_1.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/lib/arm64, /data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/base.apk!/lib/arm64-v8a, /system/lib64, /system_ext/lib64]]\r\nE/AndroidRuntime(10518): \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3365)\r\nE/AndroidRuntime(10518): \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\r\nE/AndroidRuntime(10518): \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\nE/AndroidRuntime(10518): \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\nE/AndroidRuntime(10518): \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\nE/AndroidRuntime(10518): \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\r\nE/AndroidRuntime(10518): \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\nE/AndroidRuntime(10518): \tat android.os.Looper.loop(Looper.java:223)\r\nE/AndroidRuntime(10518): \tat android.app.ActivityThread.main(ActivityThread.java:7656)\r\nE/AndroidRuntime(10518): \tat java.lang.reflect.Method.invoke(Native Method)\r\nE/AndroidRuntime(10518): \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\nE/AndroidRuntime(10518): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\nE/AndroidRuntime(10518): Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.example.flutter_application_1.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/lib/arm64, /data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/base.apk!/lib/arm64-v8a, /system/lib64, /system_ext/lib64]]\r\nE/AndroidRuntime(10518): \tat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:207)\r\nE/AndroidRuntime(10518): \tat java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\nE/AndroidRuntime(10518): \tat java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n\r\n 0 \r\n 0\r\nDebug my code\r\nemulator (android-arm64 emulator)\r\nDart\r\nLF\r\nUTF-8\r\nSpaces: 2\r\nLn 112, Col 40\r\nInfo: Installing build/app/outputs/flutter-apk/app-debug.apk...\r\n\r\n```\r\n\r\n\r\ni set the path of java on andriod studion\r\n\r\nhere are logs of `java --version` command\r\n\r\n```\r\nopenjdk 11.0.19 2023-04-18 LTS\r\nOpenJDK Runtime Environment Zulu11.64+19-CA (build 11.0.19+7-LTS)\r\nOpenJDK 64-Bit Server VM Zulu11.64+19-CA (build 11.0.19+7-LTS, mixed mode)\r\n```\r\n\r\n\r\n--------------------------**UPDATE**--------------------------\r\n\r\nI resolved `✗ Unable to find bundled Java version`. issue. flutter doctor command is running perfectly, no issues found. but when i run my project, my application crash, and it is continously stuck, here is the output.\r\n\r\n```\r\nLaunching lib/main.dart on sdk gphone arm64 in debug mode...\r\nmain.dart:1\r\n✓  Built build/app/outputs/flutter-apk/app-debug.apk.\r\n```\r\n\r\nnothing is happening after this.\r\n\r\n\r\n\r\n--------------------------**UPDATE**--------------------------\r\n\r\nSo, i found the problem. when i create project by using flutter create command, it is not creating kotlin folder under `android/app/src/main`. when i create the kotlin folder manually and run the project it works perfectly. but my question is now, why it is not creating kotlin folder? i have installed dart and flutter extension in vs code and android studio too.\r\n \r\nplease help how to fix this","title":"Flutter: FATAL EXCEPTION: main E/AndroidRuntime(18756): Process: com.example.flutter_application_1, PID: 18756","body":"<p>i setup Flutter in my mackbook, created project but when i run it app built successfully but it crashed.</p>\n<p>here are logs of <code>flutter doctor</code></p>\n<pre><code>✓] Flutter (Channel stable, 3.7.0, on macOS 13.0 22A380 darwin-arm64 (Rosetta),\n    locale en-PK)\n[✓] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\n[✓] Xcode - develop for iOS and macOS (Xcode 14.3.1)\n[✓] Chrome - develop for the web\n[!] Android Studio (version 2022.2)\n    ✗ Unable to find bundled Java version.\n[✓] VS Code (version 1.79.2)\n[✓] Connected device (2 available)\n[✓] HTTP Host Availability\n\n</code></pre>\n<p>and here are the logs when i run application</p>\n<pre><code>Launching lib/main.dart on sdk gphone arm64 in debug mode...\nmain.dart:1\n✓  Built build/app/outputs/flutter-apk/app-debug.apk.\nE/AndroidRuntime(10518): FATAL EXCEPTION: main\nE/AndroidRuntime(10518): Process: com.example.flutter_application_1, PID: 10518\nE/AndroidRuntime(10518): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.flutter_application_1/com.example.flutter_application_1.MainActivity}: java.lang.ClassNotFoundException: Didn't find class &quot;com.example.flutter_application_1.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/lib/arm64, /data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/base.apk!/lib/arm64-v8a, /system/lib64, /system_ext/lib64]]\nE/AndroidRuntime(10518):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3365)\nE/AndroidRuntime(10518):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\nE/AndroidRuntime(10518):    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\nE/AndroidRuntime(10518):    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\nE/AndroidRuntime(10518):    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\nE/AndroidRuntime(10518):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\nE/AndroidRuntime(10518):    at android.os.Handler.dispatchMessage(Handler.java:106)\nE/AndroidRuntime(10518):    at android.os.Looper.loop(Looper.java:223)\nE/AndroidRuntime(10518):    at android.app.ActivityThread.main(ActivityThread.java:7656)\nE/AndroidRuntime(10518):    at java.lang.reflect.Method.invoke(Native Method)\nE/AndroidRuntime(10518):    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\nE/AndroidRuntime(10518):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\nE/AndroidRuntime(10518): Caused by: java.lang.ClassNotFoundException: Didn't find class &quot;com.example.flutter_application_1.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/lib/arm64, /data/app/~~fomAvxd92tDOKmztvJQklg==/com.example.flutter_application_1-MLY2ZzzozTUFkJvuxMd_xg==/base.apk!/lib/arm64-v8a, /system/lib64, /system_ext/lib64]]\nE/AndroidRuntime(10518):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:207)\nE/AndroidRuntime(10518):    at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\nE/AndroidRuntime(10518):    at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n\n 0 \n 0\nDebug my code\nemulator (android-arm64 emulator)\nDart\nLF\nUTF-8\nSpaces: 2\nLn 112, Col 40\nInfo: Installing build/app/outputs/flutter-apk/app-debug.apk...\n\n</code></pre>\n<p>i set the path of java on andriod studion</p>\n<p>here are logs of <code>java --version</code> command</p>\n<pre><code>openjdk 11.0.19 2023-04-18 LTS\nOpenJDK Runtime Environment Zulu11.64+19-CA (build 11.0.19+7-LTS)\nOpenJDK 64-Bit Server VM Zulu11.64+19-CA (build 11.0.19+7-LTS, mixed mode)\n</code></pre>\n<p>--------------------------<strong>UPDATE</strong>--------------------------</p>\n<p>I resolved <code>✗ Unable to find bundled Java version</code>. issue. flutter doctor command is running perfectly, no issues found. but when i run my project, my application crash, and it is continously stuck, here is the output.</p>\n<pre><code>Launching lib/main.dart on sdk gphone arm64 in debug mode...\nmain.dart:1\n✓  Built build/app/outputs/flutter-apk/app-debug.apk.\n</code></pre>\n<p>nothing is happening after this.</p>\n<p>--------------------------<strong>UPDATE</strong>--------------------------</p>\n<p>So, i found the problem. when i create project by using flutter create command, it is not creating kotlin folder under <code>android/app/src/main</code>. when i create the kotlin folder manually and run the project it works perfectly. but my question is now, why it is not creating kotlin folder? i have installed dart and flutter extension in vs code and android studio too.</p>\n<p>please help how to fix this</p>\n"},{"tags":["java","opencsv"],"answers":[{"tags":[],"owner":{"account_id":17029695,"reputation":1699,"user_id":12320109,"display_name":"Boommeister"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696612868,"creation_date":1696612868,"answer_id":77246367,"question_id":77246301,"body_markdown":"ok, the `final` killed me...\r\nSo this works: \r\n\r\n    List&lt;MyWindLoadDTO&gt; windLoadDTOs = new CsvToBeanBuilder&lt;MyWindLoadDTO&gt;(reader)\r\n                            .withType(MyWindLoadDTO.class)\r\n                            .build()\r\n                            .parse();\r\n\r\nI know this may get downvoted, but I&#39;ll not delete it, maybe someone else is helped by it as an example for using @CsvCustomBindByName`` with a custom converter.","title":"OpenCsv .parse() seems to have parsed correctly but returns empty List","body":"<p>ok, the <code>final</code> killed me...\nSo this works:</p>\n<pre><code>List&lt;MyWindLoadDTO&gt; windLoadDTOs = new CsvToBeanBuilder&lt;MyWindLoadDTO&gt;(reader)\n                        .withType(MyWindLoadDTO.class)\n                        .build()\n                        .parse();\n</code></pre>\n<p>I know this may get downvoted, but I'll not delete it, maybe someone else is helped by it as an example for using @CsvCustomBindByName`` with a custom converter.</p>\n"}],"owner":{"account_id":17029695,"reputation":1699,"user_id":12320109,"display_name":"Boommeister"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1696806869,"accepted_answer_id":77246367,"answer_count":1,"score":0,"last_activity_date":1696612868,"creation_date":1696612078,"question_id":77246301,"body_markdown":"When I debug the following code, in the last step `.parse()` I can see my expected value, the arrayList has my expected entry:\r\n\r\n[![the ArrayList has one entry][1]][1]\r\n\r\nbut then in the next step, the returned List is empty:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhat I expect is that the List is getting filled with my MyWindloadDTOs that I see in the .parse() step. How can it get lost in the return statement?\r\n\r\n        final String responseString = &quot;Result 1,Result 2,Zone,Latitude,Longitude,Elevation,Street,ZIP,City,Standard,Annex,Note(s),Legal notice\r\n    22.0 m/s,0.30 kN/m&lt;sup&gt;2&lt;/sup&gt;,22,59.9257848833493,10.7516773524414,27.54182624816895,Maridalsveien 33E,0175,Oslo,EN 1991-1-4,NS-EN 1991-1-4,Bezogen auf den Ort Oslo&lt;br&gt;H&#246;henfaktor c&lt;sub&gt;alt&lt;/sub&gt; nach NA.4.2(2)P(901.1),Alle Angaben ohne Gew&#228;hr&quot;\r\n                 \r\n                    final CSVReader reader = new CSVReader(new StringReader(responseString));\r\n                    final List&lt;MyWindLoadDTO&gt; windLoadDTOs = new CsvToBeanBuilder&lt;MyWindLoadDTO&gt;(reader)\r\n                            .withType(MyWindLoadDTO.class)\r\n                            .build()\r\n                            .parse();\r\n\r\nwith this MyWindLoadDTO.class:\r\n\r\n    import com.opencsv.bean.CsvBindByName;\r\n    import com.opencsv.bean.CsvCustomBindByName;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    import lombok.EqualsAndHashCode;\r\n    import lombok.NoArgsConstructor;\r\n    \r\n    \r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Data\r\n    @EqualsAndHashCode\r\n    public class MyWindLoadDTO {\r\n    \r\n        @CsvCustomBindByName(column = &quot;Result 1&quot;, converter = MyCsvStringToDoubleConverter.class)\r\n        private Double vb;\r\n        @CsvCustomBindByName(column = &quot;Result 2&quot;, converter = MyCsvStringToDoubleConverter.class)\r\n        private Double qb;\r\n        @CsvBindByName(column = &quot;Zone&quot;)\r\n        private String windZone;\r\n        @CsvBindByName(column = &quot;Latitude&quot;)\r\n        private double latitude;\r\n        @CsvBindByName(column = &quot;Longitude&quot;)\r\n        private double longitude;\r\n        @CsvBindByName(column = &quot;Elevation&quot;)\r\n        private double elevation;\r\n        @CsvBindByName(column = &quot;Street&quot;)\r\n        private String street;\r\n        @CsvBindByName(column = &quot;ZIP&quot;)\r\n        private String zip;\r\n        @CsvBindByName(column = &quot;City&quot;)\r\n        private String city;\r\n        @CsvBindByName(column = &quot;Standard&quot;)\r\n        private String standard;\r\n        @CsvBindByName(column = &quot;Annex&quot;)\r\n        private String annex;\r\n        @CsvBindByName(column = &quot;Note(s)&quot;)\r\n        private String notes;\r\n        @CsvBindByName(column = &quot;Legal notice&quot;)\r\n        private String legalNotice;\r\n    \r\n    }\r\n\r\nand this MyCsvStringToDoubleConverter.class:\r\n\r\n    import com.opencsv.bean.AbstractBeanField;\r\n    import com.opencsv.exceptions.CsvConstraintViolationException;\r\n    import com.opencsv.exceptions.CsvDataTypeMismatchException;\r\n    \r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    \r\n    public class MyCsvStringToDoubleConverter extends AbstractBeanField {\r\n    \r\n        final Pattern takeAllUntilFirstSpacePattern = Pattern.compile(&quot;(^\\\\d+(\\\\.\\\\d+)?)&quot;);\r\n        @Override\r\n        protected Object convert(String value) throws CsvDataTypeMismatchException, CsvConstraintViolationException {\r\n            if (value == null || value.equals(&quot;?&quot;) || value.equalsIgnoreCase(&quot;N/A&quot;) || value.equals(&quot;-&quot;)) {\r\n                return null;\r\n            }\r\n            final Matcher matcherQb = takeAllUntilFirstSpacePattern.matcher(value);\r\n            // if we find a match, get the first matching String\r\n            if (matcherQb.find()) {\r\n                return Double.parseDouble(matcherQb.group(1));\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/Ad0xG.png\r\n  [2]: https://i.stack.imgur.com/ddzv7.png\r\n","title":"OpenCsv .parse() seems to have parsed correctly but returns empty List","body":"<p>When I debug the following code, in the last step <code>.parse()</code> I can see my expected value, the arrayList has my expected entry:</p>\n<p><a href=\"https://i.stack.imgur.com/Ad0xG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ad0xG.png\" alt=\"the ArrayList has one entry\" /></a></p>\n<p>but then in the next step, the returned List is empty:</p>\n<p><a href=\"https://i.stack.imgur.com/ddzv7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ddzv7.png\" alt=\"enter image description here\" /></a></p>\n<p>What I expect is that the List is getting filled with my MyWindloadDTOs that I see in the .parse() step. How can it get lost in the return statement?</p>\n<pre><code>    final String responseString = &quot;Result 1,Result 2,Zone,Latitude,Longitude,Elevation,Street,ZIP,City,Standard,Annex,Note(s),Legal notice\n22.0 m/s,0.30 kN/m&lt;sup&gt;2&lt;/sup&gt;,22,59.9257848833493,10.7516773524414,27.54182624816895,Maridalsveien 33E,0175,Oslo,EN 1991-1-4,NS-EN 1991-1-4,Bezogen auf den Ort Oslo&lt;br&gt;Höhenfaktor c&lt;sub&gt;alt&lt;/sub&gt; nach NA.4.2(2)P(901.1),Alle Angaben ohne Gewähr&quot;\n             \n                final CSVReader reader = new CSVReader(new StringReader(responseString));\n                final List&lt;MyWindLoadDTO&gt; windLoadDTOs = new CsvToBeanBuilder&lt;MyWindLoadDTO&gt;(reader)\n                        .withType(MyWindLoadDTO.class)\n                        .build()\n                        .parse();\n</code></pre>\n<p>with this MyWindLoadDTO.class:</p>\n<pre><code>import com.opencsv.bean.CsvBindByName;\nimport com.opencsv.bean.CsvCustomBindByName;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport lombok.NoArgsConstructor;\n\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@EqualsAndHashCode\npublic class MyWindLoadDTO {\n\n    @CsvCustomBindByName(column = &quot;Result 1&quot;, converter = MyCsvStringToDoubleConverter.class)\n    private Double vb;\n    @CsvCustomBindByName(column = &quot;Result 2&quot;, converter = MyCsvStringToDoubleConverter.class)\n    private Double qb;\n    @CsvBindByName(column = &quot;Zone&quot;)\n    private String windZone;\n    @CsvBindByName(column = &quot;Latitude&quot;)\n    private double latitude;\n    @CsvBindByName(column = &quot;Longitude&quot;)\n    private double longitude;\n    @CsvBindByName(column = &quot;Elevation&quot;)\n    private double elevation;\n    @CsvBindByName(column = &quot;Street&quot;)\n    private String street;\n    @CsvBindByName(column = &quot;ZIP&quot;)\n    private String zip;\n    @CsvBindByName(column = &quot;City&quot;)\n    private String city;\n    @CsvBindByName(column = &quot;Standard&quot;)\n    private String standard;\n    @CsvBindByName(column = &quot;Annex&quot;)\n    private String annex;\n    @CsvBindByName(column = &quot;Note(s)&quot;)\n    private String notes;\n    @CsvBindByName(column = &quot;Legal notice&quot;)\n    private String legalNotice;\n\n}\n</code></pre>\n<p>and this MyCsvStringToDoubleConverter.class:</p>\n<pre><code>import com.opencsv.bean.AbstractBeanField;\nimport com.opencsv.exceptions.CsvConstraintViolationException;\nimport com.opencsv.exceptions.CsvDataTypeMismatchException;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\n\npublic class MyCsvStringToDoubleConverter extends AbstractBeanField {\n\n    final Pattern takeAllUntilFirstSpacePattern = Pattern.compile(&quot;(^\\\\d+(\\\\.\\\\d+)?)&quot;);\n    @Override\n    protected Object convert(String value) throws CsvDataTypeMismatchException, CsvConstraintViolationException {\n        if (value == null || value.equals(&quot;?&quot;) || value.equalsIgnoreCase(&quot;N/A&quot;) || value.equals(&quot;-&quot;)) {\n            return null;\n        }\n        final Matcher matcherQb = takeAllUntilFirstSpacePattern.matcher(value);\n        // if we find a match, get the first matching String\n        if (matcherQb.find()) {\n            return Double.parseDouble(matcherQb.group(1));\n        }\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":["java","annotations","noclassdeffounderror"],"comments":[{"owner":{"account_id":5879762,"reputation":4720,"user_id":4629534,"accept_rate":75,"display_name":"W&#252;rgspa&#223;"},"score":0,"creation_date":1441813396,"post_id":32483659,"comment_id":52828696,"body_markdown":"org.reflections.Reflections is a third party (i.e. non-standard Java) library which apparently has dependiencies which you did not resolve. Why not use package `java.lang.reflect`?","body":"org.reflections.Reflections is a third party (i.e. non-standard Java) library which apparently has dependiencies which you did not resolve. Why not use package <code>java.lang.reflect</code>?"},{"owner":{"account_id":3122772,"reputation":1910,"user_id":2642226,"accept_rate":54,"display_name":"Andrio"},"score":0,"creation_date":1441813467,"post_id":32483659,"comment_id":52828751,"body_markdown":"I just want to be able to retrieve methods with specific annotations. Can I do that with java.lang.reflect?","body":"I just want to be able to retrieve methods with specific annotations. Can I do that with java.lang.reflect?"}],"answers":[{"tags":[],"owner":{"account_id":5879762,"reputation":4720,"user_id":4629534,"accept_rate":75,"display_name":"W&#252;rgspa&#223;"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441866177,"creation_date":1441817070,"answer_id":32485142,"question_id":32483659,"body_markdown":"I suggest you to resolve the dependencies of `org.reflections.Reflections`. The easiest way is to use maven as described [here][1]. If not, the required classpath is described [here][2]. Make sure to download all required jar files and include them in the classpath of your Eclipse project.\r\n\r\nIn my comment I missed the part that you only want to find annotations. With standard Java you could use the `getDeclaredAnnotations()` method of `java.lang.reflect.Method`. But it is not that simple to gather all methods. \r\n\r\n\r\n  [1]: https://code.google.com/p/reflections/\r\n  [2]: https://code.google.com/p/reflections/wiki/ClasspathNotes","title":"Can&#39;t get org.reflections.Reflections to work, NoClassDefFoundError","body":"<p>I suggest you to resolve the dependencies of <code>org.reflections.Reflections</code>. The easiest way is to use maven as described <a href=\"https://code.google.com/p/reflections/\" rel=\"nofollow\">here</a>. If not, the required classpath is described <a href=\"https://code.google.com/p/reflections/wiki/ClasspathNotes\" rel=\"nofollow\">here</a>. Make sure to download all required jar files and include them in the classpath of your Eclipse project.</p>\n\n<p>In my comment I missed the part that you only want to find annotations. With standard Java you could use the <code>getDeclaredAnnotations()</code> method of <code>java.lang.reflect.Method</code>. But it is not that simple to gather all methods. </p>\n"},{"tags":[],"owner":{"account_id":3122772,"reputation":1910,"user_id":2642226,"accept_rate":54,"display_name":"Andrio"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":true,"score":0,"last_activity_date":1441823972,"creation_date":1441823972,"answer_id":32486947,"question_id":32483659,"body_markdown":"It turns out I just needed to add [Javaassist][1] to the classpath.\r\n\r\n\r\n  [1]: http://jboss-javassist.github.io/javassist/ &quot;javaassist&quot;","title":"Can&#39;t get org.reflections.Reflections to work, NoClassDefFoundError","body":"<p>It turns out I just needed to add <a href=\"http://jboss-javassist.github.io/javassist/\" rel=\"nofollow\" title=\"javaassist\">Javaassist</a> to the classpath.</p>\n"},{"tags":[],"owner":{"account_id":2519127,"reputation":11,"user_id":2189839,"display_name":"ombits"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696612517,"creation_date":1489144854,"answer_id":42717168,"question_id":32483659,"body_markdown":"please use\r\n```\r\n --jars  /hydra-analytics/gobblin-dist/lib/reflections-0.9.10.jar,/hydra-analytics/gobblin-dist/lib/guava-retrying-2.0.0.jar,/hydra-analytics/gobblin-dist/lib/javassist-3.18.2-GA.jar, ... \r\n```\r\nwith command\r\n","title":"Can&#39;t get org.reflections.Reflections to work, NoClassDefFoundError","body":"<p>please use</p>\n<pre><code> --jars  /hydra-analytics/gobblin-dist/lib/reflections-0.9.10.jar,/hydra-analytics/gobblin-dist/lib/guava-retrying-2.0.0.jar,/hydra-analytics/gobblin-dist/lib/javassist-3.18.2-GA.jar, ... \n</code></pre>\n<p>with command</p>\n"}],"owner":{"account_id":3122772,"reputation":1910,"user_id":2642226,"accept_rate":54,"display_name":"Andrio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11049,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":32486947,"answer_count":3,"score":2,"last_activity_date":1696612517,"creation_date":1441812555,"question_id":32483659,"body_markdown":"I&#39;m not sure what I&#39;m doing wrong with Reflections. So here&#39;s an example, I have a package `testreflections.test`, with the classes `Main` and `TestClass` inside it.\r\n\r\nMain class:\r\n\r\n    public class Main {\r\n\r\n    \tpublic static void main(String[] args) {\r\n        \tReflections reflections = new Reflections(&quot;testreflections.test&quot;);\r\n        \t//Reflections reflections = new Reflections(&quot;testreflections.test.TestClass&quot;);//I also tried this\r\n        \tSet&lt;Method&gt; resources =\r\n    \t        reflections.getMethodsAnnotatedWith(org.junit.Test.class);\r\n    \t\t\r\n    \t    System.out.println(resources.size());\r\n             \r\n             for (Method set : resources) {\r\n            \t System.out.println(set.toString());\r\n             }\r\n\t    }\r\n    }\r\n\r\nTestClass:\r\n\r\n    public class TestClass {\r\n\t\r\n\t    @Test\r\n\t    public void testMethod() {\r\n\t    \tSystem.out.println(&quot;This is a test&quot;);\r\n\t    }\r\n    }\r\n\r\nNow, I&#39;m simply supposed to get get all the methods with the junit Test annotation (which would just be 1). This should add the one to the set, and print out the appropriate info for it. However, eclipse spits out this error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javassist/bytecode/ClassFile\r\n\tat org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:100)\r\n\tat org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:24)\r\n\tat org.reflections.scanners.AbstractScanner.scan(AbstractScanner.java:30)\r\n\tat org.reflections.Reflections.scan(Reflections.java:238)\r\n\tat org.reflections.Reflections.scan(Reflections.java:204)\r\n\tat org.reflections.Reflections.&lt;init&gt;(Reflections.java:129)\r\n\tat org.reflections.Reflections.&lt;init&gt;(Reflections.java:170)\r\n\tat org.reflections.Reflections.&lt;init&gt;(Reflections.java:143)\r\n\tat testreflections.test.Main.main(Main.java:10)\r\n    Caused by: java.lang.ClassNotFoundException: javassist.bytecode.ClassFile\r\n\tat java.net.URLClassLoader.findClass(Unknown Source)\r\n\tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n\tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n\t... 9 more","title":"Can&#39;t get org.reflections.Reflections to work, NoClassDefFoundError","body":"<p>I'm not sure what I'm doing wrong with Reflections. So here's an example, I have a package <code>testreflections.test</code>, with the classes <code>Main</code> and <code>TestClass</code> inside it.</p>\n\n<p>Main class:</p>\n\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        Reflections reflections = new Reflections(\"testreflections.test\");\n        //Reflections reflections = new Reflections(\"testreflections.test.TestClass\");//I also tried this\n        Set&lt;Method&gt; resources =\n            reflections.getMethodsAnnotatedWith(org.junit.Test.class);\n\n        System.out.println(resources.size());\n\n         for (Method set : resources) {\n             System.out.println(set.toString());\n         }\n    }\n}\n</code></pre>\n\n<p>TestClass:</p>\n\n<pre><code>public class TestClass {\n\n    @Test\n    public void testMethod() {\n        System.out.println(\"This is a test\");\n    }\n}\n</code></pre>\n\n<p>Now, I'm simply supposed to get get all the methods with the junit Test annotation (which would just be 1). This should add the one to the set, and print out the appropriate info for it. However, eclipse spits out this error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: javassist/bytecode/ClassFile\nat org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:100)\nat org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:24)\nat org.reflections.scanners.AbstractScanner.scan(AbstractScanner.java:30)\nat org.reflections.Reflections.scan(Reflections.java:238)\nat org.reflections.Reflections.scan(Reflections.java:204)\nat org.reflections.Reflections.&lt;init&gt;(Reflections.java:129)\nat org.reflections.Reflections.&lt;init&gt;(Reflections.java:170)\nat org.reflections.Reflections.&lt;init&gt;(Reflections.java:143)\nat testreflections.test.Main.main(Main.java:10)\nCaused by: java.lang.ClassNotFoundException: javassist.bytecode.ClassFile\nat java.net.URLClassLoader.findClass(Unknown Source)\nat java.lang.ClassLoader.loadClass(Unknown Source)\nat sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\nat java.lang.ClassLoader.loadClass(Unknown Source)\n... 9 more\n</code></pre>\n"},{"tags":["java","logback"],"comments":[{"owner":{"account_id":3302040,"reputation":11008,"user_id":2777965,"accept_rate":89,"display_name":"030"},"score":0,"creation_date":1590154208,"post_id":41715211,"comment_id":109580371,"body_markdown":"Does this answer your question? [logback conditional logging](https://stackoverflow.com/questions/11017148/logback-conditional-logging)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11017148/logback-conditional-logging\">logback conditional logging</a>"}],"answers":[{"comments":[{"owner":{"account_id":9972386,"reputation":105,"user_id":7378048,"display_name":"J2EE Developer"},"score":0,"creation_date":1485154646,"post_id":41763374,"comment_id":70789391,"body_markdown":"Hi Karthik thanks for info. if i use different appender class in else part (like) ch.qos.logback.core.rolling.RollingFileAppender is not working i.e not writing the logs. can you tell me help me on this.","body":"Hi Karthik thanks for info. if i use different appender class in else part (like) ch.qos.logback.core.rolling.RollingFileAppender is not working i.e not writing the logs. can you tell me help me on this."},{"owner":{"account_id":6220976,"reputation":343,"user_id":4840625,"accept_rate":33,"display_name":"TeamZ"},"score":0,"creation_date":1574399957,"post_id":41763374,"comment_id":104227673,"body_markdown":"@J2EEDeveloper could you tell how did you set this property type.\n&lt;if condition=&#39;property(&quot;type&quot;).contains(&quot;DEV&quot;)&#39;&gt;","body":"@J2EEDeveloper could you tell how did you set this property type. &lt;if condition=&#39;property(&quot;type&quot;).contains(&quot;DEV&quot;)&#39;&gt;"},{"owner":{"account_id":6220976,"reputation":343,"user_id":4840625,"accept_rate":33,"display_name":"TeamZ"},"score":0,"creation_date":1574404059,"post_id":41763374,"comment_id":104228833,"body_markdown":"@karthik could you tell me how to set property type                                        ```&lt;if condition=&#39;property(&quot;type&quot;).contains(&quot;DEV&quot;)&#39;&gt;``` in java","body":"@karthik could you tell me how to set property type                                        <code>&lt;if condition=&#39;property(&quot;type&quot;).contains(&quot;DEV&quot;)&#39;&gt;</code> in java"},{"owner":{"account_id":170035,"reputation":6390,"user_id":396483,"accept_rate":68,"display_name":"john k"},"score":0,"creation_date":1649277306,"post_id":41763374,"comment_id":126838251,"body_markdown":"is there any documenation on your answer?  How do I compare two variables?","body":"is there any documenation on your answer?  How do I compare two variables?"}],"tags":[],"owner":{"account_id":1336531,"reputation":9732,"user_id":1279145,"accept_rate":83,"display_name":"Karthik Prasad"},"comment_count":4,"down_vote_count":1,"up_vote_count":12,"is_accepted":true,"score":11,"last_activity_date":1560342450,"creation_date":1484914194,"answer_id":41763374,"question_id":41715211,"body_markdown":"Your configuration looks wrong, you are referring the appender even before its created. If atoll logback supports maintenance would be tedious as you need to add appender refers for each log level you set for different packages.\r\n\r\nBelow are the two ways using which you can write to different files.\r\n\r\n 1. By Just changing the file\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n        &lt;appender name=&quot;fileAppender1&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n    \t    &lt;if condition=&#39;property(&quot;type&quot;).contains(&quot;DEV&quot;)&#39;&gt;\r\n    \t\t    &lt;then&gt;\r\n    \t\t\t    &lt;file&gt;${USER_HOME}/${log.name}.log&lt;/file&gt;\r\n    \t\t    &lt;/then&gt;\r\n                &lt;else&gt;\r\n                    &lt;file&gt;${USER_HOME2}/${log.name}.log&lt;/file&gt;\r\n                &lt;/else&gt;\r\n    \t    &lt;/if&gt;\r\n            &lt;append&gt;true&lt;/append&gt;\r\n            &lt;encoder&gt;\r\n               &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} -\r\n                %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n\r\n \r\n\r\n 2. You can directly create appenders in if condition. however you need to create appenders first itself.\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n        &lt;if condition=&#39;property(&quot;type&quot;).contains(&quot;DEV&quot;)&#39;&gt;\r\n    \t&lt;then&gt;\r\n    \t\t&lt;appender name=&quot;fileAppender1&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n    \t\t&lt;file&gt;${USER_HOME}/${log.name}.log&lt;/file&gt;\r\n    \t\t&lt;append&gt;true&lt;/append&gt;\r\n    \t\t&lt;encoder&gt;\r\n    \t\t\t&lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} -\r\n    \t\t\t\t%msg%n&lt;/pattern&gt;\r\n    \t\t\t&lt;/encoder&gt;\r\n    \t\t&lt;/appender&gt;\r\n    \t&lt;/then&gt;\r\n        &lt;else&gt;\r\n    \t\t&lt;appender name=&quot;fileAppender1&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n    \t\t&lt;file&gt;${USER_HOME2}/${log.name}.log&lt;/file&gt;\r\n    \t\t&lt;append&gt;true&lt;/append&gt;\r\n    \t\t&lt;encoder&gt;\r\n    \t\t\t&lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} -\r\n    \t\t\t\t%msg%n&lt;/pattern&gt;\r\n    \t\t\t&lt;/encoder&gt;\r\n    \t\t&lt;/appender&gt;\r\n        &lt;/else&gt;\r\n        &lt;/if&gt;\r\n\r\n        &lt;root level=&quot;DEBUG&quot;&gt;\r\n    \t\t&lt;appender-ref ref=&quot;fileAppender1&quot; /&gt;\r\n       \t&lt;/root&gt;\r\n\r\n\r\nAnd for if else condition to work you need to have janino.jar in your classpath, if you are using maven you can added dependency.\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n            &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;janino&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.0.6&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;","title":"if condition in logback - print log messages in two different folders","body":"<p>Your configuration looks wrong, you are referring the appender even before its created. If atoll logback supports maintenance would be tedious as you need to add appender refers for each log level you set for different packages.</p>\n\n<p>Below are the two ways using which you can write to different files.</p>\n\n<ol>\n<li>By Just changing the file</li>\n</ol>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;appender name=\"fileAppender1\" class=\"ch.qos.logback.core.FileAppender\"&gt;\n        &lt;if condition='property(\"type\").contains(\"DEV\")'&gt;\n            &lt;then&gt;\n                &lt;file&gt;${USER_HOME}/${log.name}.log&lt;/file&gt;\n            &lt;/then&gt;\n            &lt;else&gt;\n                &lt;file&gt;${USER_HOME2}/${log.name}.log&lt;/file&gt;\n            &lt;/else&gt;\n        &lt;/if&gt;\n        &lt;append&gt;true&lt;/append&gt;\n        &lt;encoder&gt;\n           &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} -\n            %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n</code></pre>\n\n<ol start=\"2\">\n<li>You can directly create appenders in if condition. however you need to create appenders first itself.</li>\n</ol>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;if condition='property(\"type\").contains(\"DEV\")'&gt;\n    &lt;then&gt;\n        &lt;appender name=\"fileAppender1\" class=\"ch.qos.logback.core.FileAppender\"&gt;\n        &lt;file&gt;${USER_HOME}/${log.name}.log&lt;/file&gt;\n        &lt;append&gt;true&lt;/append&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} -\n                %msg%n&lt;/pattern&gt;\n            &lt;/encoder&gt;\n        &lt;/appender&gt;\n    &lt;/then&gt;\n    &lt;else&gt;\n        &lt;appender name=\"fileAppender1\" class=\"ch.qos.logback.core.FileAppender\"&gt;\n        &lt;file&gt;${USER_HOME2}/${log.name}.log&lt;/file&gt;\n        &lt;append&gt;true&lt;/append&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} -\n                %msg%n&lt;/pattern&gt;\n            &lt;/encoder&gt;\n        &lt;/appender&gt;\n    &lt;/else&gt;\n    &lt;/if&gt;\n\n    &lt;root level=\"DEBUG\"&gt;\n        &lt;appender-ref ref=\"fileAppender1\" /&gt;\n    &lt;/root&gt;\n</code></pre>\n\n<p>And for if else condition to work you need to have janino.jar in your classpath, if you are using maven you can added dependency.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n            &lt;artifactId&gt;janino&lt;/artifactId&gt;\n            &lt;version&gt;3.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18914045,"reputation":1,"user_id":13799489,"display_name":"Rachid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696612204,"creation_date":1696492250,"answer_id":77235168,"question_id":41715211,"body_markdown":"I use this solution, and it work for me :\r\n    \r\n    &lt;if condition=&#39;property(&quot;LOKI_ENABLED&quot;).equals(&quot;true&quot;)&#39;&gt;\r\n            &lt;then&gt;\r\n                &lt;appender name=&quot;LOKI&quot; class=&quot;com.github.loki4j.logback.Loki4jAppender&quot;&gt;\r\n                    &lt;http&gt;\r\n                        &lt;url&gt;http://localhost:3100/loki/api/v1/push&lt;/url&gt;\r\n                    &lt;/http&gt;\r\n                    &lt;format&gt;\r\n                        &lt;label&gt;\r\n                            &lt;pattern&gt;application=${appName},level=%level,logger=%logger&lt;/pattern&gt;\r\n                        &lt;/label&gt;\r\n                        &lt;message&gt;\r\n                            &lt;pattern&gt;${LOG_PATTERN}&lt;/pattern&gt;\r\n                        &lt;/message&gt;\r\n                        &lt;sortByTime&gt;true&lt;/sortByTime&gt;\r\n                    &lt;/format&gt;\r\n                &lt;/appender&gt;\r\n                &lt;logger name=&quot;com.project.moi&quot; level=&quot;DEBUG&quot; additivity=&quot;FALSE&quot;&gt;\r\n                    &lt;appender-ref ref=&quot;LOKI&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;root level=&quot;WARN&quot;&gt;\r\n                    &lt;appender-ref ref=&quot;LOKI&quot;/&gt;\r\n                &lt;/root&gt;\r\n            &lt;/then&gt;\r\n        &lt;/if&gt;","title":"if condition in logback - print log messages in two different folders","body":"<p>I use this solution, and it work for me :</p>\n<pre><code>&lt;if condition='property(&quot;LOKI_ENABLED&quot;).equals(&quot;true&quot;)'&gt;\n        &lt;then&gt;\n            &lt;appender name=&quot;LOKI&quot; class=&quot;com.github.loki4j.logback.Loki4jAppender&quot;&gt;\n                &lt;http&gt;\n                    &lt;url&gt;http://localhost:3100/loki/api/v1/push&lt;/url&gt;\n                &lt;/http&gt;\n                &lt;format&gt;\n                    &lt;label&gt;\n                        &lt;pattern&gt;application=${appName},level=%level,logger=%logger&lt;/pattern&gt;\n                    &lt;/label&gt;\n                    &lt;message&gt;\n                        &lt;pattern&gt;${LOG_PATTERN}&lt;/pattern&gt;\n                    &lt;/message&gt;\n                    &lt;sortByTime&gt;true&lt;/sortByTime&gt;\n                &lt;/format&gt;\n            &lt;/appender&gt;\n            &lt;logger name=&quot;com.project.moi&quot; level=&quot;DEBUG&quot; additivity=&quot;FALSE&quot;&gt;\n                &lt;appender-ref ref=&quot;LOKI&quot;/&gt;\n            &lt;/logger&gt;\n            &lt;root level=&quot;WARN&quot;&gt;\n                &lt;appender-ref ref=&quot;LOKI&quot;/&gt;\n            &lt;/root&gt;\n        &lt;/then&gt;\n    &lt;/if&gt;\n</code></pre>\n"}],"owner":{"account_id":9972386,"reputation":105,"user_id":7378048,"display_name":"J2EE Developer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26296,"favorite_count":0,"down_vote_count":2,"up_vote_count":9,"accepted_answer_id":41763374,"answer_count":2,"score":7,"last_activity_date":1696612204,"creation_date":1484730491,"question_id":41715211,"body_markdown":"I am writing code for log messages in two different folders with the same log level.the problem i am facing is with the below code am not able to print the log messages on conditional(when it becomes else).Mainly the else part is not working.\r\n\r\nIn simple terms how to write the logs in two different folders based on If else condition using two different appenders.\r\n\r\nthe code is : \r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n\t&lt;if condition=&#39;property(&quot;type&quot;).contains(&quot;DEV&quot;)&#39;&gt;\r\n\t\t&lt;then&gt;\r\n\t\t\t&lt;appender-ref ref=&quot;FILE-ENGINE&quot; /&gt;\r\n\t\t&lt;/then&gt;\r\n\t\t&lt;else&gt;\r\n\t\t\t&lt;appnder-ref ref = &quot;FILE-UI&quot; /&gt;\r\n\t\t&lt;/else&gt;\r\n\t&lt;/if&gt;\r\nThe entire configuration file is :\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n\t&lt;configuration&gt;\r\n\r\n\t\t&lt;property name=&quot;USER_HOME&quot; value=&quot;D:/Log1/&quot; /&gt;\r\n\t\t\r\n\t\t&lt;property name=&quot;USER_HOME2&quot; value=&quot;D:/log2/&quot; /&gt;\r\n\r\n\r\n\t\t&lt;if condition=&#39;property(&quot;type&quot;).contains(&quot;DEV&quot;)&#39;&gt;\r\n\t\t\t&lt;then&gt;\r\n\t\t\t\t&lt;appender-ref ref=&quot;FILE-ENGINE&quot; /&gt;\r\n\t\t\t&lt;/then&gt;\r\n\t\t\t&lt;else&gt;\r\n\t\t\t\t&lt;appnder-ref ref = &quot;FILE-UI&quot; /&gt;\r\n\t\t\t&lt;/else&gt;\r\n\t\t&lt;/if&gt;\r\n\r\n\r\n\t\t&lt;appender name=&quot;FILE-ENGINE&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n\t\t\t&lt;file&gt;${USER_HOME}/${log.name}.log&lt;/file&gt;\r\n\t\t\t&lt;append&gt;true&lt;/append&gt;\r\n\t\t\t&lt;encoder&gt;\r\n\t\t\t\t&lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} -\r\n\t\t\t\t\t%msg%n&lt;/pattern&gt;\r\n\t\t\t&lt;/encoder&gt;\r\n\t\t&lt;/appender&gt;\r\n\r\n\t\t&lt;appender name=&quot;FILE-UI&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n\t\t\t&lt;file&gt;${USER_HOME2}/DEBUG.log&lt;/file&gt;\r\n\t\t\t&lt;append&gt;true&lt;/append&gt;\r\n\t\t\t&lt;encoder&gt;\r\n\t\t\t\t&lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} -\r\n\t\t\t\t\t%msg%n&lt;/pattern&gt;\r\n\t\t\t&lt;/encoder&gt;\r\n\t\t&lt;/appender&gt;\r\n\r\n\r\n\t\t&lt;appender name=&quot;FILE-ENGINE-ERROR&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n\t\t\t&lt;file&gt;${USER_HOME}/${log.name}.error&lt;/file&gt;\r\n\t\t\t&lt;append&gt;true&lt;/append&gt;\r\n\t\t\t&lt;encoder&gt;\r\n\t\t\t\t&lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} -\r\n\t\t\t\t\t%msg%n&lt;/pattern&gt;\r\n\t\t\t&lt;/encoder&gt;\r\n\t\t&lt;/appender&gt;\r\n\r\n\r\n\t\t&lt;logger name=&quot;com.code&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;\r\n\t\t\t&lt;appender-ref ref=&quot;FILE-ENGINE&quot; /&gt;\r\n\t\t\t&lt;appender-ref ref=&quot;FILE-UI&quot; /&gt;\r\n\r\n\t\t&lt;/logger&gt;\r\n\r\n\t\t&lt;root level=&quot;Error&quot;&gt;\r\n\t\t\t&lt;appender-ref ref=&quot;FILE-ENGINE-ERROR&quot; /&gt;\r\n\t\t&lt;/root&gt;\r\n\r\n\t&lt;/configuration&gt;\r\n\r\npls help me how to write the logs with else condition.","title":"if condition in logback - print log messages in two different folders","body":"<p>I am writing code for log messages in two different folders with the same log level.the problem i am facing is with the below code am not able to print the log messages on conditional(when it becomes else).Mainly the else part is not working.</p>\n<p>In simple terms how to write the logs in two different folders based on If else condition using two different appenders.</p>\n<p>the code is :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;if condition='property(&quot;type&quot;).contains(&quot;DEV&quot;)'&gt;\n    &lt;then&gt;\n        &lt;appender-ref ref=&quot;FILE-ENGINE&quot; /&gt;\n    &lt;/then&gt;\n    &lt;else&gt;\n        &lt;appnder-ref ref = &quot;FILE-UI&quot; /&gt;\n    &lt;/else&gt;\n&lt;/if&gt;\n</code></pre>\n<p>The entire configuration file is :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n\n    &lt;property name=&quot;USER_HOME&quot; value=&quot;D:/Log1/&quot; /&gt;\n    \n    &lt;property name=&quot;USER_HOME2&quot; value=&quot;D:/log2/&quot; /&gt;\n\n\n    &lt;if condition='property(&quot;type&quot;).contains(&quot;DEV&quot;)'&gt;\n        &lt;then&gt;\n            &lt;appender-ref ref=&quot;FILE-ENGINE&quot; /&gt;\n        &lt;/then&gt;\n        &lt;else&gt;\n            &lt;appnder-ref ref = &quot;FILE-UI&quot; /&gt;\n        &lt;/else&gt;\n    &lt;/if&gt;\n\n\n    &lt;appender name=&quot;FILE-ENGINE&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\n        &lt;file&gt;${USER_HOME}/${log.name}.log&lt;/file&gt;\n        &lt;append&gt;true&lt;/append&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} -\n                %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=&quot;FILE-UI&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\n        &lt;file&gt;${USER_HOME2}/DEBUG.log&lt;/file&gt;\n        &lt;append&gt;true&lt;/append&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} -\n                %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n\n    &lt;appender name=&quot;FILE-ENGINE-ERROR&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\n        &lt;file&gt;${USER_HOME}/${log.name}.error&lt;/file&gt;\n        &lt;append&gt;true&lt;/append&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} -\n                %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n\n    &lt;logger name=&quot;com.code&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;\n        &lt;appender-ref ref=&quot;FILE-ENGINE&quot; /&gt;\n        &lt;appender-ref ref=&quot;FILE-UI&quot; /&gt;\n\n    &lt;/logger&gt;\n\n    &lt;root level=&quot;Error&quot;&gt;\n        &lt;appender-ref ref=&quot;FILE-ENGINE-ERROR&quot; /&gt;\n    &lt;/root&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n<p>pls help me how to write the logs with else condition.</p>\n"},{"tags":["java","android-studio","random","srand"],"comments":[{"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"score":3,"creation_date":1456309754,"post_id":35599445,"comment_id":58883765,"body_markdown":"Use [`SecureRandom`](https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)","body":"Use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html\" rel=\"nofollow noreferrer\"><code>SecureRandom</code></a>"},{"owner":{"account_id":2764833,"reputation":232392,"user_id":2380830,"accept_rate":89,"display_name":"Bathsheba"},"score":1,"creation_date":1456309845,"post_id":35599445,"comment_id":58883831,"body_markdown":"The C++ version is not completely unique by the way. It&#39;s just that you can explicitly seed the generator (as you can in Java too).","body":"The C++ version is not completely unique by the way. It&#39;s just that you can explicitly seed the generator (as you can in Java too)."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":1,"creation_date":1456309910,"post_id":35599445,"comment_id":58883891,"body_markdown":"The only way to always get the same sequence of numbers is to reuse the same seed. Remove the seed you&#39;re using and you&#39;ll be getting random numbers again.","body":"The only way to always get the same sequence of numbers is to reuse the same seed. Remove the seed you&#39;re using and you&#39;ll be getting random numbers again."},{"owner":{"account_id":2883920,"reputation":1142,"user_id":2474214,"accept_rate":75,"display_name":"C&#233;dric M."},"score":2,"creation_date":1456310028,"post_id":35599445,"comment_id":58883978,"body_markdown":"It does that because `Random` is using a seed generated during the _compilation_ process. Once your program is built, the sequence will be the same. As @Ferrybig said, try using `SecureRandom` ([SecureRandom](https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)) or try to implement `Random(seed)` as your _seed_ is randomly generated during the _runtime_. By the way, the question is interresting","body":"It does that because <code>Random</code> is using a seed generated during the <i>compilation</i> process. Once your program is built, the sequence will be the same. As @Ferrybig said, try using <code>SecureRandom</code> (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html\" rel=\"nofollow noreferrer\">SecureRandom</a>) or try to implement <code>Random(seed)</code> as your <i>seed</i> is randomly generated during the <i>runtime</i>. By the way, the question is interresting"}],"answers":[{"tags":[],"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1456594313,"creation_date":1456310793,"answer_id":35599933,"question_id":35599445,"body_markdown":"- If you require a unique random in Java, use [`SecureRandom`](https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html). This class provides a cryptographically strong random number generator (RNG), meaning it can be used when creating certificates and this class is slow compared to the other solutions.\r\n\r\n- If you require a predictable random that you can reset, use a [`Random`](https://docs.oracle.com/javase/7/docs/api/java/util/Random.html), where you call `.setSeed(number)` to seed it to make the values predictable from that point.\r\n\r\n- If you want a pseudo-random that is random every time you start the program, use a normal [`Random`](https://docs.oracle.com/javase/7/docs/api/java/util/Random.html). A random instance is seed by default by some hash of the current time.\r\n\r\nFor the best randomness in every solution, it is important to RE-USE the random instance. If this isn&#39;t done, most of the output it gives will be similar over the same timespan, and at the case of a thrown away SecureRandom, it will spend a lot of time recreating the new random.","title":"Unique random - srand in java ? (like in c++)","body":"<ul>\n<li><p>If you require a unique random in Java, use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html\" rel=\"nofollow\"><code>SecureRandom</code></a>. This class provides a cryptographically strong random number generator (RNG), meaning it can be used when creating certificates and this class is slow compared to the other solutions.</p></li>\n<li><p>If you require a predictable random that you can reset, use a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Random.html\" rel=\"nofollow\"><code>Random</code></a>, where you call <code>.setSeed(number)</code> to seed it to make the values predictable from that point.</p></li>\n<li><p>If you want a pseudo-random that is random every time you start the program, use a normal <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Random.html\" rel=\"nofollow\"><code>Random</code></a>. A random instance is seed by default by some hash of the current time.</p></li>\n</ul>\n\n<p>For the best randomness in every solution, it is important to RE-USE the random instance. If this isn't done, most of the output it gives will be similar over the same timespan, and at the case of a thrown away SecureRandom, it will spend a lot of time recreating the new random.</p>\n"}],"owner":{"account_id":7338578,"reputation":595,"user_id":5589049,"accept_rate":68,"display_name":"Dawid"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4289,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":35599933,"answer_count":1,"score":3,"last_activity_date":1696611722,"creation_date":1456309586,"question_id":35599445,"body_markdown":"Currently I&#39;m using a \r\n\r\n    Random rand = new Random();\r\n    myNumber = rand.nextInt((100-0)+1)+0;\r\n\r\nand it&#39;s a pseudo-random, because I always get the same sequence of numbers.\r\nI remember in c++ you could just use the ctime and use srand to make it unique. How do you do it in java ?","title":"Unique random - srand in java ? (like in c++)","body":"<p>Currently I'm using a </p>\n\n<pre><code>Random rand = new Random();\nmyNumber = rand.nextInt((100-0)+1)+0;\n</code></pre>\n\n<p>and it's a pseudo-random, because I always get the same sequence of numbers.\nI remember in c++ you could just use the ctime and use srand to make it unique. How do you do it in java ?</p>\n"},{"tags":["java","string","charsequence"],"comments":[{"owner":{"account_id":156587,"reputation":15475,"user_id":373962,"accept_rate":86,"display_name":"Miquel"},"score":12,"creation_date":1341385554,"post_id":11323962,"comment_id":14906723,"body_markdown":"This is going to sound very RTFMish, but it&#39;s an honest advice: it can be very interesting and a learning experience to actually look at the source code for String yourself","body":"This is going to sound very RTFMish, but it&#39;s an honest advice: it can be very interesting and a learning experience to actually look at the source code for String yourself"},{"owner":{"account_id":176642,"reputation":6111,"user_id":885287,"accept_rate":81,"display_name":"aaronsnoswell"},"score":1,"creation_date":1341898354,"post_id":11323962,"comment_id":15041875,"body_markdown":"Where can you find the Java source code? I thought it was all proprietary?","body":"Where can you find the Java source code? I thought it was all proprietary?"},{"owner":{"account_id":1580982,"reputation":57898,"user_id":1468366,"accept_rate":78,"display_name":"MvG"},"score":4,"creation_date":1367047869,"post_id":11323962,"comment_id":23249078,"body_markdown":"@aaronsnoswell: OpenJDK is open source. You can find one version of the `String` class at http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/6069fe8ffead/src/share/classes/java/lang/String.java. But even before that, Sun JDKs used to come with a file called `src.zip` which contained much of the source code. Looking at that code was possible and useful, although modifying it was probably another matter, in terms of license.","body":"@aaronsnoswell: OpenJDK is open source. You can find one version of the <code>String</code> class at <a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/6069fe8ffead/src/share/classes/java/lang/String.java\" rel=\"nofollow noreferrer\">hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/6069fe8ffead/src/sh&zwnj;&#8203;are/&hellip;</a>. But even before that, Sun JDKs used to come with a file called <code>src.zip</code> which contained much of the source code. Looking at that code was possible and useful, although modifying it was probably another matter, in terms of license."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1413937425,"post_id":11323962,"comment_id":41629783,"body_markdown":"For source code, multiple companies provide access through their own web sites to various open source projects including OpenJDK. Simply **use a search engine** for a query such as &quot;java string class source code&quot; to get multiple hits on those providers.","body":"For source code, multiple companies provide access through their own web sites to various open source projects including OpenJDK. Simply <b>use a search engine</b> for a query such as &quot;java string class source code&quot; to get multiple hits on those providers."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1523479688,"post_id":11323962,"comment_id":86583855,"body_markdown":"Similar to: [*Why StringBuilder when there is String?*](https://stackoverflow.com/q/5234147/642706)","body":"Similar to: <a href=\"https://stackoverflow.com/q/5234147/642706\"><i>Why StringBuilder when there is String?</i></a>"},{"owner":{"account_id":308177,"reputation":1911,"user_id":619895,"accept_rate":85,"display_name":"ggb667"},"score":0,"creation_date":1634647206,"post_id":11323962,"comment_id":123076739,"body_markdown":"Oh my god, does Oracle no longer release the source  with their JDK?","body":"Oh my god, does Oracle no longer release the source  with their JDK?"}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"comment_count":0,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1341385381,"creation_date":1341385381,"answer_id":11323989,"question_id":11323962,"body_markdown":"I know it a kind of obvious, but CharSequence is an interface whereas String is a concrete class :)\r\n\r\njava.lang.String is an implementation of this interface...\r\n\r\n","title":"Exact difference between CharSequence and String in java","body":"<p>I know it a kind of obvious, but CharSequence is an interface whereas String is a concrete class :)</p>\n\n<p>java.lang.String is an implementation of this interface...</p>\n"},{"tags":[],"owner":{"account_id":331053,"reputation":1135,"user_id":655504,"accept_rate":100,"display_name":"Andreas Johansson"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1341385605,"creation_date":1341385605,"answer_id":11324025,"question_id":11323962,"body_markdown":"From the Java API of [CharSequence][1]:\r\n\r\n&gt; A CharSequence is a readable sequence of characters. This interface provides uniform, read-only access to many different kinds of character sequences.\r\n\r\nThis interface is then used by [String][2], [CharBuffer][3] and [StringBuffer][4] to keep consistency for all method names.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/CharSequence.html\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html\r\n  [3]: http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/CharBuffer.html\r\n  [4]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StringBuffer.html","title":"Exact difference between CharSequence and String in java","body":"<p>From the Java API of <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/CharSequence.html\" rel=\"nofollow\">CharSequence</a>:</p>\n\n<blockquote>\n  <p>A CharSequence is a readable sequence of characters. This interface provides uniform, read-only access to many different kinds of character sequences.</p>\n</blockquote>\n\n<p>This interface is then used by <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html\" rel=\"nofollow\">String</a>, <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/CharBuffer.html\" rel=\"nofollow\">CharBuffer</a> and <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StringBuffer.html\" rel=\"nofollow\">StringBuffer</a> to keep consistency for all method names.</p>\n"},{"tags":[],"owner":{"account_id":1580982,"reputation":57898,"user_id":1468366,"accept_rate":78,"display_name":"MvG"},"comment_count":0,"down_vote_count":0,"up_vote_count":105,"is_accepted":true,"score":105,"last_activity_date":1431989087,"creation_date":1341385650,"answer_id":11324030,"question_id":11323962,"body_markdown":"## General differences ##\r\n\r\nThere are several classes which implement the [`CharSequence`][1] interface besides [`String`][2]. Among these are\r\n\r\n- [`StringBuilder`][3] for variable-length character sequences which can be modified\r\n- [`CharBuffer`][4] for fixed-length low-level character sequences which can be modified\r\n\r\nAny method which accepts a `CharSequence` can operate on all of these equally well. Any method which only accepts a `String` will require conversion. So using `CharSequence` as an argument type in all the places where you don&#39;t care about the internals is prudent. However you should use `String` as a return type if you actually return a `String`, because that avoids possible conversions of returned values if the calling method actually does require a `String`.\r\n\r\nAlso note that maps should use `String` as key type, not `CharSequence`, as map keys must not change. In other words, sometimes the immutable nature of `String` is essential.\r\n\r\n## Specific code snippet ##\r\n\r\nAs for the code you pasted: simply compile that, and have a look at the JVM bytecode using `javap -v`. There you will notice that both `obj` and `str` are references to the same constant object. As a `String` is immutable, this kind of sharing is all right.\r\n\r\nThe `+` operator of `String` is compiled as invocations of various `StringBuilder.append` calls. So it is equivalent to\r\n\r\n    System.out.println(\r\n      (new StringBuilder())\r\n      .append(&quot;output is : &quot;)\r\n      .append((Object)obj)\r\n      .append(&quot; &quot;)\r\n      .append(str)\r\n      .toString()\r\n    )\r\n\r\nI must confess I&#39;m a bit surprised that my compiler `javac 1.6.0_33` compiles the `+ obj` using `StringBuilder.append(Object)` instead of `StringBuilder.append(CharSequence)`. The former probably involves a call to the `toString()` method of the object, whereas the latter should be possible in a more efficient way. On the other hand, `String.toString()` simply returns the `String` itself, so there is little penalty there. So  `StringBuilder.append(String)` might be more efficient by about one method invocation.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/CharSequence.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/String.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/StringBuilder.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/index.html?java/nio/CharBuffer.html","title":"Exact difference between CharSequence and String in java","body":"<h2>General differences</h2>\n\n<p>There are several classes which implement the <a href=\"http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/CharSequence.html\" rel=\"noreferrer\"><code>CharSequence</code></a> interface besides <a href=\"http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/String.html\" rel=\"noreferrer\"><code>String</code></a>. Among these are</p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/StringBuilder.html\" rel=\"noreferrer\"><code>StringBuilder</code></a> for variable-length character sequences which can be modified</li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/index.html?java/nio/CharBuffer.html\" rel=\"noreferrer\"><code>CharBuffer</code></a> for fixed-length low-level character sequences which can be modified</li>\n</ul>\n\n<p>Any method which accepts a <code>CharSequence</code> can operate on all of these equally well. Any method which only accepts a <code>String</code> will require conversion. So using <code>CharSequence</code> as an argument type in all the places where you don't care about the internals is prudent. However you should use <code>String</code> as a return type if you actually return a <code>String</code>, because that avoids possible conversions of returned values if the calling method actually does require a <code>String</code>.</p>\n\n<p>Also note that maps should use <code>String</code> as key type, not <code>CharSequence</code>, as map keys must not change. In other words, sometimes the immutable nature of <code>String</code> is essential.</p>\n\n<h2>Specific code snippet</h2>\n\n<p>As for the code you pasted: simply compile that, and have a look at the JVM bytecode using <code>javap -v</code>. There you will notice that both <code>obj</code> and <code>str</code> are references to the same constant object. As a <code>String</code> is immutable, this kind of sharing is all right.</p>\n\n<p>The <code>+</code> operator of <code>String</code> is compiled as invocations of various <code>StringBuilder.append</code> calls. So it is equivalent to</p>\n\n<pre><code>System.out.println(\n  (new StringBuilder())\n  .append(\"output is : \")\n  .append((Object)obj)\n  .append(\" \")\n  .append(str)\n  .toString()\n)\n</code></pre>\n\n<p>I must confess I'm a bit surprised that my compiler <code>javac 1.6.0_33</code> compiles the <code>+ obj</code> using <code>StringBuilder.append(Object)</code> instead of <code>StringBuilder.append(CharSequence)</code>. The former probably involves a call to the <code>toString()</code> method of the object, whereas the latter should be possible in a more efficient way. On the other hand, <code>String.toString()</code> simply returns the <code>String</code> itself, so there is little penalty there. So  <code>StringBuilder.append(String)</code> might be more efficient by about one method invocation.</p>\n"},{"tags":[],"owner":{"account_id":981398,"reputation":23613,"user_id":1001027,"accept_rate":72,"display_name":"Francisco Spaeth"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1435770958,"creation_date":1341385802,"answer_id":11324071,"question_id":11323962,"body_markdown":"`CharSequence` is a contract ([interface][1]), and `String` is an [implementation][2] of this contract.\r\n\r\n    public final class String extends Object \r\n        implements Serializable, Comparable&lt;String&gt;, CharSequence\r\n\r\nThe [documentation](http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html) for `CharSequence` is:\r\n\r\n&gt; A CharSequence is a readable sequence of char values. This interface\r\n&gt; provides uniform, read-only access to many different kinds of char\r\n&gt; sequences. A char value represents a character in the Basic\r\n&gt; Multilingual Plane (BMP) or a surrogate. Refer to Unicode Character\r\n&gt; Representation for details.\r\n\r\n\r\n  [1]: https://en.m.wikipedia.org/wiki/Interface_(computing)\r\n  [2]: https://en.m.wikipedia.org/wiki/Implementation#Computer_science","title":"Exact difference between CharSequence and String in java","body":"<p><code>CharSequence</code> is a contract (<a href=\"https://en.m.wikipedia.org/wiki/Interface_(computing)\" rel=\"noreferrer\">interface</a>), and <code>String</code> is an <a href=\"https://en.m.wikipedia.org/wiki/Implementation#Computer_science\" rel=\"noreferrer\">implementation</a> of this contract.</p>\n\n<pre><code>public final class String extends Object \n    implements Serializable, Comparable&lt;String&gt;, CharSequence\n</code></pre>\n\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html\" rel=\"noreferrer\">documentation</a> for <code>CharSequence</code> is:</p>\n\n<blockquote>\n  <p>A CharSequence is a readable sequence of char values. This interface\n  provides uniform, read-only access to many different kinds of char\n  sequences. A char value represents a character in the Basic\n  Multilingual Plane (BMP) or a surrogate. Refer to Unicode Character\n  Representation for details.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1508032,"reputation":357,"user_id":1410932,"accept_rate":100,"display_name":"Doszi89"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1341385807,"creation_date":1341385807,"answer_id":11324075,"question_id":11323962,"body_markdown":"In charSequence you don&#39;t have very useful methods which are available for String. If you don&#39;t want to look in the documentation, type:\r\n   obj.\r\nand\r\n   str. \r\n\r\nand see what methods your compilator offers you. That&#39;s the basic difference for me.","title":"Exact difference between CharSequence and String in java","body":"<p>In charSequence you don't have very useful methods which are available for String. If you don't want to look in the documentation, type:\n   obj.\nand\n   str. </p>\n\n<p>and see what methods your compilator offers you. That's the basic difference for me.</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1341387770,"creation_date":1341387770,"answer_id":11324555,"question_id":11323962,"body_markdown":"&gt; other than the fact that String implements CharSequence and that String is a sequence of character.\r\n\r\nSeveral things happen in your code:\r\n\r\n    CharSequence obj = &quot;hello&quot;;\r\n\r\nThat creates a `String` literal, `&quot;hello&quot;`, which is a `String` object. Being a `String`, which implements `CharSequence`, it is also a `CharSequence`. (you can read [this post about coding to interface][1] for example).\r\n\r\nThe next line:\r\n\r\n    String str = &quot;hello&quot;;\r\n\r\nis a little more complex. `String` literals in Java are held in a pool (interned) so the `&quot;hello&quot;` on this line is the same object (identity) as the `&quot;hello&quot;` on the first line. Therefore, this line only assigns the same `String` literal to `str`.\r\n\r\nAt this point, both `obj` and `str` are references to the `String` literal `&quot;hello&quot;` and are therefore `equals`, `==` and they are both a `String` and a `CharSequence`.\r\n\r\nI suggest you test this code, showing in action what I just wrote:\r\n\r\n    public static void main(String[] args) {\r\n        CharSequence obj = &quot;hello&quot;;\r\n        String str = &quot;hello&quot;;\r\n        System.out.println(&quot;Type of obj: &quot; + obj.getClass().getSimpleName());\r\n        System.out.println(&quot;Type of str: &quot; + str.getClass().getSimpleName());\r\n        System.out.println(&quot;Value of obj: &quot; + obj);\r\n        System.out.println(&quot;Value of str: &quot; + str);\r\n        System.out.println(&quot;Is obj a String? &quot; + (obj instanceof String));\r\n        System.out.println(&quot;Is obj a CharSequence? &quot; + (obj instanceof CharSequence));\r\n        System.out.println(&quot;Is str a String? &quot; + (str instanceof String));\r\n        System.out.println(&quot;Is str a CharSequence? &quot; + (str instanceof CharSequence));\r\n        System.out.println(&quot;Is \\&quot;hello\\&quot; a String? &quot; + (&quot;hello&quot; instanceof String));\r\n        System.out.println(&quot;Is \\&quot;hello\\&quot; a CharSequence? &quot; + (&quot;hello&quot; instanceof CharSequence));\r\n        System.out.println(&quot;str.equals(obj)? &quot; + str.equals(obj));\r\n        System.out.println(&quot;(str == obj)? &quot; + (str == obj));\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/3194278/should-you-always-code-to-interfaces-in-java","title":"Exact difference between CharSequence and String in java","body":"<blockquote>\n  <p>other than the fact that String implements CharSequence and that String is a sequence of character.</p>\n</blockquote>\n\n<p>Several things happen in your code:</p>\n\n<pre><code>CharSequence obj = \"hello\";\n</code></pre>\n\n<p>That creates a <code>String</code> literal, <code>\"hello\"</code>, which is a <code>String</code> object. Being a <code>String</code>, which implements <code>CharSequence</code>, it is also a <code>CharSequence</code>. (you can read <a href=\"https://stackoverflow.com/questions/3194278/should-you-always-code-to-interfaces-in-java\">this post about coding to interface</a> for example).</p>\n\n<p>The next line:</p>\n\n<pre><code>String str = \"hello\";\n</code></pre>\n\n<p>is a little more complex. <code>String</code> literals in Java are held in a pool (interned) so the <code>\"hello\"</code> on this line is the same object (identity) as the <code>\"hello\"</code> on the first line. Therefore, this line only assigns the same <code>String</code> literal to <code>str</code>.</p>\n\n<p>At this point, both <code>obj</code> and <code>str</code> are references to the <code>String</code> literal <code>\"hello\"</code> and are therefore <code>equals</code>, <code>==</code> and they are both a <code>String</code> and a <code>CharSequence</code>.</p>\n\n<p>I suggest you test this code, showing in action what I just wrote:</p>\n\n<pre><code>public static void main(String[] args) {\n    CharSequence obj = \"hello\";\n    String str = \"hello\";\n    System.out.println(\"Type of obj: \" + obj.getClass().getSimpleName());\n    System.out.println(\"Type of str: \" + str.getClass().getSimpleName());\n    System.out.println(\"Value of obj: \" + obj);\n    System.out.println(\"Value of str: \" + str);\n    System.out.println(\"Is obj a String? \" + (obj instanceof String));\n    System.out.println(\"Is obj a CharSequence? \" + (obj instanceof CharSequence));\n    System.out.println(\"Is str a String? \" + (str instanceof String));\n    System.out.println(\"Is str a CharSequence? \" + (str instanceof CharSequence));\n    System.out.println(\"Is \\\"hello\\\" a String? \" + (\"hello\" instanceof String));\n    System.out.println(\"Is \\\"hello\\\" a CharSequence? \" + (\"hello\" instanceof CharSequence));\n    System.out.println(\"str.equals(obj)? \" + str.equals(obj));\n    System.out.println(\"(str == obj)? \" + (str == obj));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2867503,"reputation":31,"user_id":2461520,"display_name":"Patrick Campbell"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1379704216,"creation_date":1379704216,"answer_id":18924163,"question_id":11323962,"body_markdown":"Consider UTF-8. In UTF-8 Unicode code points are built from one or more bytes. A class encapsulating a UTF-8 byte array can implement the CharSequence interface but is most decidedly not a String. Certainly you can&#39;t pass a UTF-8 byte array where a String is expected but you certainly can pass a UTF-8 wrapper class that implements CharSequence when the contract is relaxed to allow a CharSequence. On my project, I am developing a class called CBTF8Field (Compressed Binary Transfer Format - Eight Bit) to provide data compression for xml and am looking to use the CharSequence interface to implement conversions from CBTF8 byte arrays to/from character arrays (UTF-16) and byte arrays (UTF-8).\r\n\r\nThe reason I came here was to get a complete understanding of the subsequence contract.","title":"Exact difference between CharSequence and String in java","body":"<p>Consider UTF-8. In UTF-8 Unicode code points are built from one or more bytes. A class encapsulating a UTF-8 byte array can implement the CharSequence interface but is most decidedly not a String. Certainly you can't pass a UTF-8 byte array where a String is expected but you certainly can pass a UTF-8 wrapper class that implements CharSequence when the contract is relaxed to allow a CharSequence. On my project, I am developing a class called CBTF8Field (Compressed Binary Transfer Format - Eight Bit) to provide data compression for xml and am looking to use the CharSequence interface to implement conversions from CBTF8 byte arrays to/from character arrays (UTF-16) and byte arrays (UTF-8).</p>\n\n<p>The reason I came here was to get a complete understanding of the subsequence contract.</p>\n"},{"comments":[{"owner":{"account_id":6072621,"reputation":898,"user_id":4740914,"display_name":"Yugerten"},"score":2,"creation_date":1502372134,"post_id":26498954,"comment_id":78189227,"body_markdown":"the old good school","body":"the old good school"},{"owner":{"account_id":14384415,"reputation":1324,"user_id":10390808,"display_name":"Abhinav Chauhan"},"score":1,"creation_date":1589115585,"post_id":26498954,"comment_id":109158905,"body_markdown":"Awesome , i read some of you other answers and i was thinking how does that guy knows that much , all are long and well explained did you find a way to download information into your brain :)","body":"Awesome , i read some of you other answers and i was thinking how does that guy knows that much , all are long and well explained did you find a way to download information into your brain :)"}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"down_vote_count":0,"up_vote_count":98,"is_accepted":false,"score":98,"last_activity_date":1696611647,"creation_date":1413940727,"answer_id":26498954,"question_id":11323962,"body_markdown":"# tl;dr\r\n\r\nOne is an interface ([`CharSequence`](https://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html)) while other is a concrete implementation of that interface ([`String`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html)).\r\n\r\n    CharSequence animal = &quot;cat&quot;  // `String` object presented as the interface `CharSequence`.\r\n\r\nJust like [`ArrayList`][1] is a [`List`][2], and [`HashMap`][3] is a [`Map`][4], so too `String` is a `CharSequence`.\r\n\r\nAs an interface, normally the `CharSequence` would be more commonly seen than `String`, but some twisted history resulted in the interface being defined years *after* the implementation. So in older APIs we often see `String` while in newer APIs we tend to see `CharSequence` used to define arguments and return types.\r\n\r\n# Details\r\n\r\nNowadays we know that generally an API/framework should focus on exporting interfaces primarily and concrete classes secondarily. But we did not always know this lesson so well.\r\n\r\nThe `String` class came first in Java. Only later did they place a front-facing interface, `CharSequence`.\r\n\r\n## Twisted History\r\n\r\nA little history might help with understanding.\r\n\r\nIn its early days, Java was rushed to market a bit ahead of its time, due to the Internet/Web mania animating the industry. Some libraries were not as well thought-through as they should have been. String handling was one of those areas. \r\n\r\nAlso, Java was one of the earliest production-oriented non-academic [Object-Oriented Programming (OOP)][5] environments. The only successful real-world rubber-meets-the-road implementations of OOP before that was some limited versions of [SmallTalk][6], then [Objective-C][7] with [NeXTSTEP][8]/[OpenStep][9]. So, many practical lessons were yet to be learned.\r\n\r\nJava started with the [`String`][10] class and [`StringBuffer`][11] class. But those two classes were unrelated, not tied to each other by inheritance nor interface. Later, the Java team recognized that there should have been a unifying tie between string-related implementations to make them interchangeable. In Java 4 the team added the [`CharSequence`][12] interface and retroactively implemented that interface on String and String Buffer, as well as adding another implementation [`CharBuffer`][13]. Later in Java 5 they added [`StringBuilder`][14], basically a unsynchronized and therefore somewhat faster version of `StringBuffer`.\r\n\r\nSo these string-oriented classes are a bit of a mess, and a little confusing to learn about. Many libraries and interfaces were built to take and return `String` objects. Nowadays such libraries should generally be built to expect `CharSequence`. But (a) `String` seems to still dominate the mindspace, and (b) there may be some subtle technical issues when mixing the various `CharSequence` implementations. With the 20/20 vision of hindsight we can see that all this string stuff could have been better handled, but here we are. \r\n\r\nIdeally Java would have started with an interface and/or superclass that would be used in many places where we now use `String`, just as we use the [`Collection`][15] or [`List`][16] interfaces in place of the [`ArrayList`][17] or [`LinkedList`][18] implementations.\r\n\r\n## Interface Versus Class\r\n\r\nThe key difference about `CharSequence` is that it is an [interface][19], not an [implementation][20]. That means you cannot directly instantiate a `CharSequence`. Rather you instantiate one of the classes that implements that interface. \r\n\r\nFor example, here we have `x` that looks like a `CharSequence` but underneath is actually a `StringBuilder` object.\r\n\r\n    CharSequence x = new StringBuilder( &quot;dog&quot; );  // Looks like a `CharSequence` but is actually a `StringBuilder` instance.\r\n    \r\nThis becomes less obvious when using a String literal. Keep in mind that when you see source code with just quote marks around characters, the compiler is translating that into a String object.\r\n\r\n    CharSequence y = &quot;cat&quot;;  // Looks like a `CharSequence` but is actually a `String` instance.\r\n\r\n\r\n## Literal versus constructor\r\n\r\nThere are some subtle differences between `&quot;cat&quot;` and `new String(&quot;cat&quot;)` as discussed in [this other Question][21], but are irrelevant here.\r\n\r\n## Class Diagram\r\n\r\nThis class diagram may help to guide you. I noted the version of Java in which they appeared to demonstrate how much change has churned through these classes and interfaces.\r\n\r\n![diagram showing the various string-related classes and interfaces as of Java 8][22]\r\n\r\n\r\n## Text Blocks \r\n\r\nOther than adding more [Unicode][23] characters including a multitude of [emoji][24], in recent years not much has changed in Java for working with text. Until *text blocks*. \r\n\r\nText blocks are a new way of better handling the tedium of string literals with multiple lines or [character-escaping][25]. This would make writing embedded code strings such as HTML, XML, SQL, or JSON much more convenient.\r\n\r\nTo quote [JEP 378][26]:\r\n\r\n&gt;A text block is a multi-line string literal that avoids the need for most escape sequences, automatically formats the string in a predictable way, and gives the developer control over the format when desired.\r\n\r\nThe text blocks feature does *not* introduce a new [data type][27]. Text blocks are merely a new syntax for writing a `String` literal. A text block produces a `String` object, just like the conventional literal syntax. A text block produces a `String` object, which is also a `CharSequence` object, as discussed above.\r\n\r\n### SQL example\r\n\r\nTo quote JSR 378 again…\r\n\r\nUsing &quot;one-dimensional&quot; string literals.\r\n\r\n    String query = &quot;SELECT \\&quot;EMP_ID\\&quot;, \\&quot;LAST_NAME\\&quot; FROM \\&quot;EMPLOYEE_TB\\&quot;\\n&quot; +\r\n                   &quot;WHERE \\&quot;CITY\\&quot; = &#39;INDIANAPOLIS&#39;\\n&quot; +\r\n                   &quot;ORDER BY \\&quot;EMP_ID\\&quot;, \\&quot;LAST_NAME\\&quot;;\\n&quot;;\r\n\r\nUsing a &quot;two-dimensional&quot; block of text\r\n\r\n    String query = &quot;&quot;&quot;\r\n                   SELECT &quot;EMP_ID&quot;, &quot;LAST_NAME&quot; FROM &quot;EMPLOYEE_TB&quot;\r\n                   WHERE &quot;CITY&quot; = &#39;INDIANAPOLIS&#39;\r\n                   ORDER BY &quot;EMP_ID&quot;, &quot;LAST_NAME&quot;;\r\n                   &quot;&quot;&quot;;\r\n\r\nText blocks are found in [Java 15][28] and later, per [*JEP 378: Text Blocks*](https://openjdk.java.net/jeps/378).\r\n\r\nFirst previewed in Java 13, under [JEP 355: Text Blocks (Preview)](http://openjdk.java.net/jeps/355). Then previewed again in Java 14 under [*JEP 368: Text Blocks (Second Preview)*](https://openjdk.java.net/jeps/368).\r\n\r\nThis effort was preceded by [*JEP 326: Raw String Literals (Preview)*](https://openjdk.java.net/jeps/326). The concepts were reworked to produce the *Text Blocks* feature instead. \r\n\r\n## String templates\r\n\r\nString templates complement Java&#39;s existing string literals and text blocks by coupling literal text with embedded expressions and template processors to produce specialized results.\r\n\r\nSee [*JEP 430: String Templates (Preview)*][29]. \r\n\r\nThis feature is being previewed in Java 21. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ArrayList.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html\r\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html\r\n  [5]: https://en.wikipedia.org/wiki/Object-oriented_programming\r\n  [6]: http://en.wikipedia.org/wiki/Smalltalk\r\n  [7]: http://en.wikipedia.org/wiki/Objective-C\r\n  [8]: http://en.wikipedia.org/wiki/NeXTSTEP\r\n  [9]: http://en.wikipedia.org/wiki/OpenStep\r\n  [10]: http://docs.oracle.com/javase/8/docs/api/java/lang/String.html\r\n  [11]: http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html\r\n  [12]: http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html\r\n  [13]: http://docs.oracle.com/javase/8/docs/api/java/nio/CharBuffer.html\r\n  [14]: http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html\r\n  [15]: http://docs.oracle.com/javase/8/docs/api/java/util/Collection.html\r\n  [16]: http://docs.oracle.com/javase/8/docs/api/java/util/List.html\r\n  [17]: http://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html\r\n  [18]: http://docs.oracle.com/javase/8/docs/api/java/util/LinkedList.html\r\n  [19]: https://en.wikipedia.org/wiki/Interface_(computing)\r\n  [20]: https://en.wikipedia.org/wiki/Implementation\r\n  [21]: https://stackoverflow.com/questions/3052442/what-is-the-difference-between-text-and-new-stringtext-in-java\r\n  [22]: https://i.stack.imgur.com/tmrd7.jpg\r\n  [23]: https://en.wikipedia.org/wiki/Unicode\r\n  [24]: https://en.wikipedia.org/wiki/Emoji\r\n  [25]: https://en.wikipedia.org/wiki/Escape_character\r\n  [26]: https://openjdk.java.net/jeps/378\r\n  [27]: https://en.wikipedia.org/wiki/Data_type\r\n  [28]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_15\r\n  [29]: https://openjdk.org/jeps/430","title":"Exact difference between CharSequence and String in java","body":"<h1>tl;dr</h1>\n<p>One is an interface (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html\" rel=\"nofollow noreferrer\"><code>CharSequence</code></a>) while other is a concrete implementation of that interface (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a>).</p>\n<pre><code>CharSequence animal = &quot;cat&quot;  // `String` object presented as the interface `CharSequence`.\n</code></pre>\n<p>Just like <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ArrayList.html\" rel=\"nofollow noreferrer\"><code>ArrayList</code></a> is a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\"><code>List</code></a>, and <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html\" rel=\"nofollow noreferrer\"><code>HashMap</code></a> is a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html\" rel=\"nofollow noreferrer\"><code>Map</code></a>, so too <code>String</code> is a <code>CharSequence</code>.</p>\n<p>As an interface, normally the <code>CharSequence</code> would be more commonly seen than <code>String</code>, but some twisted history resulted in the interface being defined years <em>after</em> the implementation. So in older APIs we often see <code>String</code> while in newer APIs we tend to see <code>CharSequence</code> used to define arguments and return types.</p>\n<h1>Details</h1>\n<p>Nowadays we know that generally an API/framework should focus on exporting interfaces primarily and concrete classes secondarily. But we did not always know this lesson so well.</p>\n<p>The <code>String</code> class came first in Java. Only later did they place a front-facing interface, <code>CharSequence</code>.</p>\n<h2>Twisted History</h2>\n<p>A little history might help with understanding.</p>\n<p>In its early days, Java was rushed to market a bit ahead of its time, due to the Internet/Web mania animating the industry. Some libraries were not as well thought-through as they should have been. String handling was one of those areas.</p>\n<p>Also, Java was one of the earliest production-oriented non-academic <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow noreferrer\">Object-Oriented Programming (OOP)</a> environments. The only successful real-world rubber-meets-the-road implementations of OOP before that was some limited versions of <a href=\"http://en.wikipedia.org/wiki/Smalltalk\" rel=\"nofollow noreferrer\">SmallTalk</a>, then <a href=\"http://en.wikipedia.org/wiki/Objective-C\" rel=\"nofollow noreferrer\">Objective-C</a> with <a href=\"http://en.wikipedia.org/wiki/NeXTSTEP\" rel=\"nofollow noreferrer\">NeXTSTEP</a>/<a href=\"http://en.wikipedia.org/wiki/OpenStep\" rel=\"nofollow noreferrer\">OpenStep</a>. So, many practical lessons were yet to be learned.</p>\n<p>Java started with the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a> class and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html\" rel=\"nofollow noreferrer\"><code>StringBuffer</code></a> class. But those two classes were unrelated, not tied to each other by inheritance nor interface. Later, the Java team recognized that there should have been a unifying tie between string-related implementations to make them interchangeable. In Java 4 the team added the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html\" rel=\"nofollow noreferrer\"><code>CharSequence</code></a> interface and retroactively implemented that interface on String and String Buffer, as well as adding another implementation <a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/CharBuffer.html\" rel=\"nofollow noreferrer\"><code>CharBuffer</code></a>. Later in Java 5 they added <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\"><code>StringBuilder</code></a>, basically a unsynchronized and therefore somewhat faster version of <code>StringBuffer</code>.</p>\n<p>So these string-oriented classes are a bit of a mess, and a little confusing to learn about. Many libraries and interfaces were built to take and return <code>String</code> objects. Nowadays such libraries should generally be built to expect <code>CharSequence</code>. But (a) <code>String</code> seems to still dominate the mindspace, and (b) there may be some subtle technical issues when mixing the various <code>CharSequence</code> implementations. With the 20/20 vision of hindsight we can see that all this string stuff could have been better handled, but here we are.</p>\n<p>Ideally Java would have started with an interface and/or superclass that would be used in many places where we now use <code>String</code>, just as we use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collection.html\" rel=\"nofollow noreferrer\"><code>Collection</code></a> or <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/List.html\" rel=\"nofollow noreferrer\"><code>List</code></a> interfaces in place of the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html\" rel=\"nofollow noreferrer\"><code>ArrayList</code></a> or <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/LinkedList.html\" rel=\"nofollow noreferrer\"><code>LinkedList</code></a> implementations.</p>\n<h2>Interface Versus Class</h2>\n<p>The key difference about <code>CharSequence</code> is that it is an <a href=\"https://en.wikipedia.org/wiki/Interface_(computing)\" rel=\"nofollow noreferrer\">interface</a>, not an <a href=\"https://en.wikipedia.org/wiki/Implementation\" rel=\"nofollow noreferrer\">implementation</a>. That means you cannot directly instantiate a <code>CharSequence</code>. Rather you instantiate one of the classes that implements that interface.</p>\n<p>For example, here we have <code>x</code> that looks like a <code>CharSequence</code> but underneath is actually a <code>StringBuilder</code> object.</p>\n<pre><code>CharSequence x = new StringBuilder( &quot;dog&quot; );  // Looks like a `CharSequence` but is actually a `StringBuilder` instance.\n</code></pre>\n<p>This becomes less obvious when using a String literal. Keep in mind that when you see source code with just quote marks around characters, the compiler is translating that into a String object.</p>\n<pre><code>CharSequence y = &quot;cat&quot;;  // Looks like a `CharSequence` but is actually a `String` instance.\n</code></pre>\n<h2>Literal versus constructor</h2>\n<p>There are some subtle differences between <code>&quot;cat&quot;</code> and <code>new String(&quot;cat&quot;)</code> as discussed in <a href=\"https://stackoverflow.com/questions/3052442/what-is-the-difference-between-text-and-new-stringtext-in-java\">this other Question</a>, but are irrelevant here.</p>\n<h2>Class Diagram</h2>\n<p>This class diagram may help to guide you. I noted the version of Java in which they appeared to demonstrate how much change has churned through these classes and interfaces.</p>\n<p><img src=\"https://i.stack.imgur.com/tmrd7.jpg\" alt=\"diagram showing the various string-related classes and interfaces as of Java 8\" /></p>\n<h2>Text Blocks</h2>\n<p>Other than adding more <a href=\"https://en.wikipedia.org/wiki/Unicode\" rel=\"nofollow noreferrer\">Unicode</a> characters including a multitude of <a href=\"https://en.wikipedia.org/wiki/Emoji\" rel=\"nofollow noreferrer\">emoji</a>, in recent years not much has changed in Java for working with text. Until <em>text blocks</em>.</p>\n<p>Text blocks are a new way of better handling the tedium of string literals with multiple lines or <a href=\"https://en.wikipedia.org/wiki/Escape_character\" rel=\"nofollow noreferrer\">character-escaping</a>. This would make writing embedded code strings such as HTML, XML, SQL, or JSON much more convenient.</p>\n<p>To quote <a href=\"https://openjdk.java.net/jeps/378\" rel=\"nofollow noreferrer\">JEP 378</a>:</p>\n<blockquote>\n<p>A text block is a multi-line string literal that avoids the need for most escape sequences, automatically formats the string in a predictable way, and gives the developer control over the format when desired.</p>\n</blockquote>\n<p>The text blocks feature does <em>not</em> introduce a new <a href=\"https://en.wikipedia.org/wiki/Data_type\" rel=\"nofollow noreferrer\">data type</a>. Text blocks are merely a new syntax for writing a <code>String</code> literal. A text block produces a <code>String</code> object, just like the conventional literal syntax. A text block produces a <code>String</code> object, which is also a <code>CharSequence</code> object, as discussed above.</p>\n<h3>SQL example</h3>\n<p>To quote JSR 378 again…</p>\n<p>Using &quot;one-dimensional&quot; string literals.</p>\n<pre><code>String query = &quot;SELECT \\&quot;EMP_ID\\&quot;, \\&quot;LAST_NAME\\&quot; FROM \\&quot;EMPLOYEE_TB\\&quot;\\n&quot; +\n               &quot;WHERE \\&quot;CITY\\&quot; = 'INDIANAPOLIS'\\n&quot; +\n               &quot;ORDER BY \\&quot;EMP_ID\\&quot;, \\&quot;LAST_NAME\\&quot;;\\n&quot;;\n</code></pre>\n<p>Using a &quot;two-dimensional&quot; block of text</p>\n<pre><code>String query = &quot;&quot;&quot;\n               SELECT &quot;EMP_ID&quot;, &quot;LAST_NAME&quot; FROM &quot;EMPLOYEE_TB&quot;\n               WHERE &quot;CITY&quot; = 'INDIANAPOLIS'\n               ORDER BY &quot;EMP_ID&quot;, &quot;LAST_NAME&quot;;\n               &quot;&quot;&quot;;\n</code></pre>\n<p>Text blocks are found in <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_15\" rel=\"nofollow noreferrer\">Java 15</a> and later, per <a href=\"https://openjdk.java.net/jeps/378\" rel=\"nofollow noreferrer\"><em>JEP 378: Text Blocks</em></a>.</p>\n<p>First previewed in Java 13, under <a href=\"http://openjdk.java.net/jeps/355\" rel=\"nofollow noreferrer\">JEP 355: Text Blocks (Preview)</a>. Then previewed again in Java 14 under <a href=\"https://openjdk.java.net/jeps/368\" rel=\"nofollow noreferrer\"><em>JEP 368: Text Blocks (Second Preview)</em></a>.</p>\n<p>This effort was preceded by <a href=\"https://openjdk.java.net/jeps/326\" rel=\"nofollow noreferrer\"><em>JEP 326: Raw String Literals (Preview)</em></a>. The concepts were reworked to produce the <em>Text Blocks</em> feature instead.</p>\n<h2>String templates</h2>\n<p>String templates complement Java's existing string literals and text blocks by coupling literal text with embedded expressions and template processors to produce specialized results.</p>\n<p>See <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\"><em>JEP 430: String Templates (Preview)</em></a>.</p>\n<p>This feature is being previewed in Java 21.</p>\n"}],"owner":{"account_id":970670,"reputation":1917,"user_id":1845188,"accept_rate":60,"display_name":"Amith"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135518,"favorite_count":0,"down_vote_count":5,"up_vote_count":115,"closed_date":1527400255,"accepted_answer_id":11324030,"answer_count":8,"score":110,"last_activity_date":1696611647,"creation_date":1341385236,"question_id":11323962,"body_markdown":"I read this [previous post][1]. Can any one say what the exact difference between `CharSequence` and String is, other than the fact that [`String`][2] implements [`CharSequence`][3] and that `String` is a sequence of character? For example:\r\n\r\n    CharSequence obj = &quot;hello&quot;;\r\n    String str = &quot;hello&quot;;\r\n    System.out.println(&quot;output is : &quot; + obj + &quot;  &quot; + str);\r\n\r\nWhat happens when &quot;hello&quot; is assigned to `obj` and again to `str` ?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3600635/what-is-the-difference-between-charsequence-and-a-string\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/lang/String.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html","title":"Exact difference between CharSequence and String in java","body":"<p>I read this <a href=\"https://stackoverflow.com/questions/3600635/what-is-the-difference-between-charsequence-and-a-string\">previous post</a>. Can any one say what the exact difference between <code>CharSequence</code> and String is, other than the fact that <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html\" rel=\"noreferrer\"><code>String</code></a> implements <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html\" rel=\"noreferrer\"><code>CharSequence</code></a> and that <code>String</code> is a sequence of character? For example:</p>\n\n<pre><code>CharSequence obj = \"hello\";\nString str = \"hello\";\nSystem.out.println(\"output is : \" + obj + \"  \" + str);\n</code></pre>\n\n<p>What happens when \"hello\" is assigned to <code>obj</code> and again to <code>str</code> ?</p>\n"},{"tags":["java","reactjs","spring-boot","docker","amazon-ec2"],"answers":[{"tags":[],"owner":{"account_id":18346641,"reputation":61,"user_id":13361708,"display_name":"heyValdemar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696611454,"creation_date":1696611454,"answer_id":77246243,"question_id":77245674,"body_markdown":"Your issue seems to be that your applications (Spring Boot API and React app) are running inside Docker containers on an AWS EC2 instance but you&#39;re unable to access them externally. Let&#39;s break this down step by step:\r\n\r\n1. **Docker Port Mapping**:\r\n   From the logs, we can see that your Spring Boot application is running on port 8080 inside the Docker container and is mapped to port 8080 on the host. Similarly, your React app is running on port 5173 inside its Docker container and mapped to port 80 on the host.\r\n\r\n2. **Accessing the Applications**:\r\n   - Spring Boot API: Access it using `http://[EC2_INSTANCE_PUBLIC_IP]:8080/`\r\n   - React app: Access it using `http://[EC2_INSTANCE_PUBLIC_IP]/` (since it&#39;s on port 80, you don&#39;t need to specify the port).\r\n\r\n3. **AWS Security Groups**:\r\n   Ensure that the AWS security group associated with your EC2 instance allows incoming traffic on the necessary ports:\r\n   - Port 80 for the React app.\r\n   - Port 8080 for the Spring Boot API.\r\n\r\n4. **Docker Networking**:\r\n   Your applications seem to be running and listening correctly, as they&#39;re accessible via `localhost` inside the container. However, always ensure you&#39;re not binding your applications to `localhost` or `127.0.0.1` inside the container if you want to access them externally.\r\n\r\n5. **Other Considerations**:\r\n   - React App: Ensure that your React app, if it needs to communicate with your Spring Boot API, uses the correct base URL for the API endpoints. If your React app makes calls to the API using `localhost`, it will not work because inside the React container, `localhost` refers to the container itself and not the host or other containers.\r\n   - Application Configuration: Ensure there&#39;s no configuration inside your Spring Boot or React application that restricts access from certain IPs or domains.\r\n\r\n**Action Steps**:\r\n1. If you haven&#39;t already, check the security group rules associated with the EC2 instance to ensure ports 80 and 8080 are open to incoming traffic.\r\n2. Try accessing the applications using the EC2 public IP as mentioned above.\r\n3. If your React app communicates with the Spring Boot API, ensure it&#39;s using the correct base URL (EC2 IP and port).\r\n4. Ensure no internal application configurations block external requests.\r\n\r\nIf after trying the above you&#39;re still facing issues, consider sharing more specific details about the problem you&#39;re encountering (e.g., error messages, exact steps taken, etc.) so I can provide more targeted assistance.","title":"React app showing data from Spring Boot Api","body":"<p>Your issue seems to be that your applications (Spring Boot API and React app) are running inside Docker containers on an AWS EC2 instance but you're unable to access them externally. Let's break this down step by step:</p>\n<ol>\n<li><p><strong>Docker Port Mapping</strong>:\nFrom the logs, we can see that your Spring Boot application is running on port 8080 inside the Docker container and is mapped to port 8080 on the host. Similarly, your React app is running on port 5173 inside its Docker container and mapped to port 80 on the host.</p>\n</li>\n<li><p><strong>Accessing the Applications</strong>:</p>\n<ul>\n<li>Spring Boot API: Access it using <code>http://[EC2_INSTANCE_PUBLIC_IP]:8080/</code></li>\n<li>React app: Access it using <code>http://[EC2_INSTANCE_PUBLIC_IP]/</code> (since it's on port 80, you don't need to specify the port).</li>\n</ul>\n</li>\n<li><p><strong>AWS Security Groups</strong>:\nEnsure that the AWS security group associated with your EC2 instance allows incoming traffic on the necessary ports:</p>\n<ul>\n<li>Port 80 for the React app.</li>\n<li>Port 8080 for the Spring Boot API.</li>\n</ul>\n</li>\n<li><p><strong>Docker Networking</strong>:\nYour applications seem to be running and listening correctly, as they're accessible via <code>localhost</code> inside the container. However, always ensure you're not binding your applications to <code>localhost</code> or <code>127.0.0.1</code> inside the container if you want to access them externally.</p>\n</li>\n<li><p><strong>Other Considerations</strong>:</p>\n<ul>\n<li>React App: Ensure that your React app, if it needs to communicate with your Spring Boot API, uses the correct base URL for the API endpoints. If your React app makes calls to the API using <code>localhost</code>, it will not work because inside the React container, <code>localhost</code> refers to the container itself and not the host or other containers.</li>\n<li>Application Configuration: Ensure there's no configuration inside your Spring Boot or React application that restricts access from certain IPs or domains.</li>\n</ul>\n</li>\n</ol>\n<p><strong>Action Steps</strong>:</p>\n<ol>\n<li>If you haven't already, check the security group rules associated with the EC2 instance to ensure ports 80 and 8080 are open to incoming traffic.</li>\n<li>Try accessing the applications using the EC2 public IP as mentioned above.</li>\n<li>If your React app communicates with the Spring Boot API, ensure it's using the correct base URL (EC2 IP and port).</li>\n<li>Ensure no internal application configurations block external requests.</li>\n</ol>\n<p>If after trying the above you're still facing issues, consider sharing more specific details about the problem you're encountering (e.g., error messages, exact steps taken, etc.) so I can provide more targeted assistance.</p>\n"}],"owner":{"account_id":20823528,"reputation":63,"user_id":21365300,"display_name":"Ahmad Mujtaba"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1696611454,"creation_date":1696605909,"question_id":77245674,"body_markdown":"I am using AWS to host the server and Spring boot API and react app as docker images on the EC2 instance. I have checked all the logs by doing SSH to my instance all the ports have given as they have to, and I also checked with security groups as well but nothing works. \r\n\r\n    CONTAINER ID   IMAGE                                              COMMAND                  CREATED          STATUS                 PORTS                                       NAMES\r\n    21aba65e815e   ahmadmujtaba200210/fullstack-react:latest          &quot;npm run dev&quot;            19 minutes ago   Up 19 minutes          0.0.0.0:80-&gt;5173/tcp, :::80-&gt;5173/tcp       ecs-awseb-Fullstack-api-env-ewuh4fh3ed-21-fullstack-react-d0b5d5a587e89cc42b00\r\n    8110e126d33b   ahmadmujtaba200210/fullstack:06.10.2023.14.52.47   &quot;java -cp @/app/jib-…&quot;   19 minutes ago   Up 19 minutes          0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   ecs-awseb-Fullstack-api-env-ewuh4fh3ed-21-fullstack-96b19dfc91cccd8beb01\r\n    34ffc605a8c0   amazon/amazon-ecs-agent:latest                     &quot;/agent&quot;                 3 hours ago      Up 3 hours (healthy)                                               ecs-agent\r\n\r\n\r\nSpring boot Docker logs on EC2 instance:\r\n\r\n     .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::                (v3.1.2)\r\n    \r\n    2023-10-06T14:54:38.069Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : Starting FullstackApplication using Java 17.0.8.1 with PID 1 (/app/classes started by root in /)\r\n    2023-10-06T14:54:38.082Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n    2023-10-06T14:54:38.212Z  INFO 1 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n    2023-10-06T14:54:38.213Z  INFO 1 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n    2023-10-06T14:54:39.811Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\r\n    2023-10-06T14:54:39.817Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\r\n    2023-10-06T14:54:39.940Z  INFO 1 --- [  restartedMain] .RepositoryConfigurationExtensionSupport : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.amigoes.fullstack.customer.CustomerRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.\r\n    2023-10-06T14:54:39.942Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 109 ms. Found 0 JDBC repository interfaces.\r\n    2023-10-06T14:54:39.995Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\r\n    2023-10-06T14:54:40.000Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2023-10-06T14:54:40.108Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 1 JPA repository interfaces.\r\n    2023-10-06T14:54:41.881Z  INFO 1 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n    2023-10-06T14:54:41.899Z  INFO 1 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2023-10-06T14:54:41.900Z  INFO 1 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\r\n    2023-10-06T14:54:42.003Z  INFO 1 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2023-10-06T14:54:42.010Z  INFO 1 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3747 ms\r\n    2023-10-06T14:54:42.366Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.16.3 by Redgate\r\n    2023-10-06T14:54:42.367Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    : See release notes here: https://rd.gt/416ObMi\r\n    2023-10-06T14:54:42.367Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    :\r\n    2023-10-06T14:54:42.379Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n    2023-10-06T14:54:42.951Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3f97503\r\n    2023-10-06T14:54:42.953Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n    2023-10-06T14:54:42.971Z  INFO 1 --- [  restartedMain] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:PostgreSQL:&lt;URL removed intentionally&gt;:5432/customer (PostgreSQL 14.7)\r\n    2023-10-06T14:54:43.032Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.039s)\r\n    2023-10-06T14:54:43.113Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbMigrate      : Current version of schema &quot;public&quot;: 3\r\n    2023-10-06T14:54:43.119Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbMigrate      : Schema &quot;public&quot; is up to date. No migration necessary.\r\n    2023-10-06T14:54:43.345Z  INFO 1 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n    2023-10-06T14:54:43.474Z  INFO 1 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\r\n    2023-10-06T14:54:43.482Z  INFO 1 --- [  restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\r\n    2023-10-06T14:54:43.765Z  INFO 1 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n    2023-10-06T14:54:43.982Z  INFO 1 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n    2023-10-06T14:54:44.293Z  INFO 1 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n    2023-10-06T14:54:45.121Z  INFO 1 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n    2023-10-06T14:54:45.125Z  INFO 1 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    2023-10-06T14:54:45.838Z  WARN 1 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n    2023-10-06T14:54:46.432Z  INFO 1 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\r\n    2023-10-06T14:54:46.487Z  INFO 1 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n    2023-10-06T14:54:46.522Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : Started FullstackApplication in 9.448 seconds (process running for 10.808)\r\n    Hibernate:\r\n        select\r\n            nextval(&#39;customer_id_seq&#39;)\r\n    Hibernate:\r\n        insert\r\n        into\r\n            customer\r\n            (age,email,gender,name,id)\r\n        values\r\n            (?,?,?,?,?)\r\n\r\n\r\nReact Docker app logs on EC2 instance:\r\n\r\n    &gt; engicodes@0.0.0 dev\r\n    &gt; vite --host\r\n    \r\n    \r\n      VITE v4.4.9  ready in 1607 ms\r\n    \r\n      ➜  Local:   http://localhost:5173/\r\n      ➜  Network: http://172.17.0.3:5173/\r\n\r\n","title":"React app showing data from Spring Boot Api","body":"<p>I am using AWS to host the server and Spring boot API and react app as docker images on the EC2 instance. I have checked all the logs by doing SSH to my instance all the ports have given as they have to, and I also checked with security groups as well but nothing works.</p>\n<pre><code>CONTAINER ID   IMAGE                                              COMMAND                  CREATED          STATUS                 PORTS                                       NAMES\n21aba65e815e   ahmadmujtaba200210/fullstack-react:latest          &quot;npm run dev&quot;            19 minutes ago   Up 19 minutes          0.0.0.0:80-&gt;5173/tcp, :::80-&gt;5173/tcp       ecs-awseb-Fullstack-api-env-ewuh4fh3ed-21-fullstack-react-d0b5d5a587e89cc42b00\n8110e126d33b   ahmadmujtaba200210/fullstack:06.10.2023.14.52.47   &quot;java -cp @/app/jib-…&quot;   19 minutes ago   Up 19 minutes          0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   ecs-awseb-Fullstack-api-env-ewuh4fh3ed-21-fullstack-96b19dfc91cccd8beb01\n34ffc605a8c0   amazon/amazon-ecs-agent:latest                     &quot;/agent&quot;                 3 hours ago      Up 3 hours (healthy)                                               ecs-agent\n</code></pre>\n<p>Spring boot Docker logs on EC2 instance:</p>\n<pre><code> .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.1.2)\n\n2023-10-06T14:54:38.069Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : Starting FullstackApplication using Java 17.0.8.1 with PID 1 (/app/classes started by root in /)\n2023-10-06T14:54:38.082Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-10-06T14:54:38.212Z  INFO 1 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2023-10-06T14:54:38.213Z  INFO 1 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2023-10-06T14:54:39.811Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-10-06T14:54:39.817Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\n2023-10-06T14:54:39.940Z  INFO 1 --- [  restartedMain] .RepositoryConfigurationExtensionSupport : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.amigoes.fullstack.customer.CustomerRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.\n2023-10-06T14:54:39.942Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 109 ms. Found 0 JDBC repository interfaces.\n2023-10-06T14:54:39.995Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-10-06T14:54:40.000Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-10-06T14:54:40.108Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 1 JPA repository interfaces.\n2023-10-06T14:54:41.881Z  INFO 1 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-10-06T14:54:41.899Z  INFO 1 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-10-06T14:54:41.900Z  INFO 1 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\n2023-10-06T14:54:42.003Z  INFO 1 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-10-06T14:54:42.010Z  INFO 1 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3747 ms\n2023-10-06T14:54:42.366Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.16.3 by Redgate\n2023-10-06T14:54:42.367Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    : See release notes here: https://rd.gt/416ObMi\n2023-10-06T14:54:42.367Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    :\n2023-10-06T14:54:42.379Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-10-06T14:54:42.951Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3f97503\n2023-10-06T14:54:42.953Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-10-06T14:54:42.971Z  INFO 1 --- [  restartedMain] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:PostgreSQL:&lt;URL removed intentionally&gt;:5432/customer (PostgreSQL 14.7)\n2023-10-06T14:54:43.032Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.039s)\n2023-10-06T14:54:43.113Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbMigrate      : Current version of schema &quot;public&quot;: 3\n2023-10-06T14:54:43.119Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbMigrate      : Schema &quot;public&quot; is up to date. No migration necessary.\n2023-10-06T14:54:43.345Z  INFO 1 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-10-06T14:54:43.474Z  INFO 1 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\n2023-10-06T14:54:43.482Z  INFO 1 --- [  restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\n2023-10-06T14:54:43.765Z  INFO 1 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-10-06T14:54:43.982Z  INFO 1 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-10-06T14:54:44.293Z  INFO 1 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-10-06T14:54:45.121Z  INFO 1 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2023-10-06T14:54:45.125Z  INFO 1 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-10-06T14:54:45.838Z  WARN 1 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-10-06T14:54:46.432Z  INFO 1 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\n2023-10-06T14:54:46.487Z  INFO 1 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-10-06T14:54:46.522Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : Started FullstackApplication in 9.448 seconds (process running for 10.808)\nHibernate:\n    select\n        nextval('customer_id_seq')\nHibernate:\n    insert\n    into\n        customer\n        (age,email,gender,name,id)\n    values\n        (?,?,?,?,?)\n</code></pre>\n<p>React Docker app logs on EC2 instance:</p>\n<pre><code>&gt; engicodes@0.0.0 dev\n&gt; vite --host\n\n\n  VITE v4.4.9  ready in 1607 ms\n\n  ➜  Local:   http://localhost:5173/\n  ➜  Network: http://172.17.0.3:5173/\n</code></pre>\n"},{"tags":["java","string","stringbuilder"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":2,"creation_date":1696611301,"post_id":77246226,"comment_id":136180129,"body_markdown":"`getTipo()==t` - use `equals` to compare objects (strings) not reference equality.  As in `getTipo().equals(t)`.  Also should probably ignore case.","body":"<code>getTipo()==t</code> - use <code>equals</code> to compare objects (strings) not reference equality.  As in <code>getTipo().equals(t)</code>.  Also should probably ignore case."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1696611377,"post_id":77246226,"comment_id":136180147,"body_markdown":"Don&#39;t compare Strings using `==` or `!=`. Use the `equals(...)` or the `equalsIgnoreCase(...)` method instead. Understand that `==` checks if the two *object references* are the same which is not what you&#39;re interested in. The methods on the other hand check if the two Strings have the same characters in the same order, and that&#39;s what matters here.","body":"Don&#39;t compare Strings using <code>==</code> or <code>!=</code>. Use the <code>equals(...)</code> or the <code>equalsIgnoreCase(...)</code> method instead. Understand that <code>==</code> checks if the two <i>object references</i> are the same which is not what you&#39;re interested in. The methods on the other hand check if the two Strings have the same characters in the same order, and that&#39;s what matters here."}],"owner":{"account_id":29566401,"reputation":48,"user_id":22659708,"display_name":"Lorelius Hogglefart"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1696611359,"answer_count":0,"score":1,"last_activity_date":1696611440,"creation_date":1696611184,"question_id":77246226,"body_markdown":"We just started Java at school and I was wondering why this search algorithm isn&#39;t working:\r\nthe purpose of the entire code is to store N wine bottles (object) in a cellar (array) and to search for the bottles with the same year and type (red, white, etc..) starting from an input given by the user. I used the same algorithm to search for wine bottles from a specific year and to return them as a StringBuilder and it worked.\r\n```\r\npublic StringBuilder StampaTipo(String t) {\r\n\tStringBuilder tipo= new StringBuilder(50);\r\n\tint i=0;\r\n\r\n\tfor(i=0;i&lt;this.cantina.length;i++) {\r\n\t\tif(this.cantina[i].getTipo()==t) {\r\n\t\t\ttipo.append(this.cantina[i].toString());\r\n\t\t}\r\n\t}\r\n\treturn tipo;\r\n}\r\n```\r\n\r\n\r\nI was expecting to find the search results, this what i&#39;m using in the main:\r\n\r\n```\r\nSystem.out.println(&quot;\\nInserisci il tipo da cercare: &quot;);\r\nricercaT=in.next();\r\nSystem.out.println(&quot;\\nBottiglie trovate: &quot;+&quot;\\n&quot;+c.StampaTipo(ricercaT));\r\n```\r\n\r\n&quot;ricercaT&quot; is the String input given by the user to find the bottles based on the type.\r\n\r\nThis is the output: \r\n```\r\nInsert the type of wine to find: \r\nred\r\n\r\nBottles found: \r\n```","title":"Why is my searching algorithm in Java not working?","body":"<p>We just started Java at school and I was wondering why this search algorithm isn't working:\nthe purpose of the entire code is to store N wine bottles (object) in a cellar (array) and to search for the bottles with the same year and type (red, white, etc..) starting from an input given by the user. I used the same algorithm to search for wine bottles from a specific year and to return them as a StringBuilder and it worked.</p>\n<pre><code>public StringBuilder StampaTipo(String t) {\n    StringBuilder tipo= new StringBuilder(50);\n    int i=0;\n\n    for(i=0;i&lt;this.cantina.length;i++) {\n        if(this.cantina[i].getTipo()==t) {\n            tipo.append(this.cantina[i].toString());\n        }\n    }\n    return tipo;\n}\n</code></pre>\n<p>I was expecting to find the search results, this what i'm using in the main:</p>\n<pre><code>System.out.println(&quot;\\nInserisci il tipo da cercare: &quot;);\nricercaT=in.next();\nSystem.out.println(&quot;\\nBottiglie trovate: &quot;+&quot;\\n&quot;+c.StampaTipo(ricercaT));\n</code></pre>\n<p>&quot;ricercaT&quot; is the String input given by the user to find the bottles based on the type.</p>\n<p>This is the output:</p>\n<pre><code>Insert the type of wine to find: \nred\n\nBottles found: \n</code></pre>\n"},{"tags":["java","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1696594037,"post_id":77244246,"comment_id":136176571,"body_markdown":"Are you trying to mock the instance created inside `method1()`? This one - `Myclass obj = new Myclass ();`?","body":"Are you trying to mock the instance created inside <code>method1()</code>? This one - <code>Myclass obj = new Myclass ();</code>?"},{"owner":{"account_id":3963817,"reputation":1269,"user_id":3270329,"accept_rate":80,"display_name":"KVK"},"score":0,"creation_date":1696594339,"post_id":77244246,"comment_id":136176614,"body_markdown":"@Chaosfire yes using that mock object I need to mock the getData method","body":"@Chaosfire yes using that mock object I need to mock the getData method"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1696595000,"post_id":77244246,"comment_id":136176734,"body_markdown":"you can&#39;t mock that, obviously. it is instantiated while running the code","body":"you can&#39;t mock that, obviously. it is instantiated while running the code"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1696595169,"post_id":77244246,"comment_id":136176773,"body_markdown":"@Stultuske he can mock the construction, junit supports this since 3.something (not sure which minor version exactly).","body":"@Stultuske he can mock the construction, junit supports this since 3.something (not sure which minor version exactly)."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1696595299,"post_id":77244246,"comment_id":136176807,"body_markdown":"hadn&#39;t seen that work yet, should try it once","body":"hadn&#39;t seen that work yet, should try it once"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1696610213,"post_id":77244246,"comment_id":136179946,"body_markdown":"Does this answer your question? [Why are my mocked methods not called when executing a unit test?](https://stackoverflow.com/questions/74027324/why-are-my-mocked-methods-not-called-when-executing-a-unit-test)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/74027324/why-are-my-mocked-methods-not-called-when-executing-a-unit-test\">Why are my mocked methods not called when executing a unit test?</a>"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1696611541,"post_id":77244246,"comment_id":136180185,"body_markdown":"Ehm, does the linked question really answer this one? All the solutions require refactoring, while mockito provides exactly the needed functionality.","body":"Ehm, does the linked question really answer this one? All the solutions require refactoring, while mockito provides exactly the needed functionality."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1696619061,"post_id":77244246,"comment_id":136181410,"body_markdown":"@Chaosfire I would think it does. The non-working code is exactly the same as in the linked question (an independent mock that&#39;s not used anywhere in the class; and a class that creates its own instances). Yes, Mockito offers such functionality, but it does not allow finer-grained control. Throwing heavyweight frameworks at such problems can work, but it&#39;s better to understand why something does not work. By refactoring you will end up with a more flexible solution that can be tested, even without reflection or &quot;magic&quot;.","body":"@Chaosfire I would think it does. The non-working code is exactly the same as in the linked question (an independent mock that&#39;s not used anywhere in the class; and a class that creates its own instances). Yes, Mockito offers such functionality, but it does not allow finer-grained control. Throwing heavyweight frameworks at such problems can work, but it&#39;s better to understand why something does not work. By refactoring you will end up with a more flexible solution that can be tested, even without reflection or &quot;magic&quot;."}],"answers":[{"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1696596974,"post_id":77244496,"comment_id":136177184,"body_markdown":"Well, I learned something new and interesting today.  But I don&#39;t like it!  Similar to PowerMock, this makes it too easy to reach inside the implementation.  It feels icky!","body":"Well, I learned something new and interesting today.  But I don&#39;t like it!  Similar to PowerMock, this makes it too easy to reach inside the implementation.  It feels icky!"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1696610324,"post_id":77244496,"comment_id":136179962,"body_markdown":"It&#39;s not JUnit at play here, but Mockito. Even your link points to the Mockito JavaDoc.","body":"It&#39;s not JUnit at play here, but Mockito. Even your link points to the Mockito JavaDoc."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1696611033,"post_id":77244496,"comment_id":136180092,"body_markdown":"@knittl Thanks for noticing the blunder, typing without thinking...","body":"@knittl Thanks for noticing the blunder, typing without thinking..."}],"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696610871,"creation_date":1696595865,"answer_id":77244496,"question_id":77244246,"body_markdown":"The instance of `Myclass` you want mocked is local to the method, meaning that even if you create the mock normally, you can&#39;t give it to the tested class to use.\r\n\r\nWhat you can do, is mock the construction of objects of particular class. This means that **every** object created with `new` will be a mock - even the local variable `obj` in `method1()` will be a mock when created. Mockito supports this since [`v3.5.0`][1].\r\n```\r\n@Test\r\npublic void testcase() {\r\n  try (MockedConstruction&lt;Myclass&gt; ignore = Mockito.mockConstruction(Myclass.class, (mock, context) -&gt; Mockito.when(mock.getData(&quot;test&quot;, &quot;test&quot;)).thenReturn(false))) {\r\n    //go on with actual test for method1()\r\n  }\r\n}\r\n```\r\nNote how the created `MockedConstruction` object is used together with `try-with-resources`. This is important, because if it&#39;s not closed the mocked construction will persist in every test you run. It can also be closed manually, if you are using `@Before`/`@After` methods for setup/cleanup.\r\n\r\n\r\n  [1]: https://javadoc.io/doc/org.mockito/mockito-core/3.5.0/org/mockito/Mockito.html#mocked_construction","title":"Junit local object mock","body":"<p>The instance of <code>Myclass</code> you want mocked is local to the method, meaning that even if you create the mock normally, you can't give it to the tested class to use.</p>\n<p>What you can do, is mock the construction of objects of particular class. This means that <strong>every</strong> object created with <code>new</code> will be a mock - even the local variable <code>obj</code> in <code>method1()</code> will be a mock when created. Mockito supports this since <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/3.5.0/org/mockito/Mockito.html#mocked_construction\" rel=\"nofollow noreferrer\"><code>v3.5.0</code></a>.</p>\n<pre><code>@Test\npublic void testcase() {\n  try (MockedConstruction&lt;Myclass&gt; ignore = Mockito.mockConstruction(Myclass.class, (mock, context) -&gt; Mockito.when(mock.getData(&quot;test&quot;, &quot;test&quot;)).thenReturn(false))) {\n    //go on with actual test for method1()\n  }\n}\n</code></pre>\n<p>Note how the created <code>MockedConstruction</code> object is used together with <code>try-with-resources</code>. This is important, because if it's not closed the mocked construction will persist in every test you run. It can also be closed manually, if you are using <code>@Before</code>/<code>@After</code> methods for setup/cleanup.</p>\n"}],"owner":{"account_id":3963817,"reputation":1269,"user_id":3270329,"accept_rate":80,"display_name":"KVK"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1696610871,"creation_date":1696593305,"question_id":77244246,"body_markdown":"I am trying to mock my local object in JUnit using Mockito but it is not working.\r\n\r\n**Original method:**\r\n\r\n```java\r\nPublic void method1() {\r\n    Myclass obj = new Myclass ();\r\n    Boolean r = Obj.getData(String s1,String s2);\r\n}\r\n```\r\n**Test method:**\r\n```java\r\n@Test\r\npublic void testcase() {\r\n    Myclass obj1 = Mockito.mock(Myclass.class);\r\n    Mockito.when(obj1.getData(&quot;test&quot;,&quot;test&quot;)).thenreturn(false);\r\n}\r\n```\r\nBut this mock is not working.\r\n\r\nKindly help to fix this.","title":"Junit local object mock","body":"<p>I am trying to mock my local object in JUnit using Mockito but it is not working.</p>\n<p><strong>Original method:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>Public void method1() {\n    Myclass obj = new Myclass ();\n    Boolean r = Obj.getData(String s1,String s2);\n}\n</code></pre>\n<p><strong>Test method:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testcase() {\n    Myclass obj1 = Mockito.mock(Myclass.class);\n    Mockito.when(obj1.getData(&quot;test&quot;,&quot;test&quot;)).thenreturn(false);\n}\n</code></pre>\n<p>But this mock is not working.</p>\n<p>Kindly help to fix this.</p>\n"},{"tags":["java","android","android-camera2","illegalargumentexception","android-camerax"],"comments":[{"owner":{"account_id":103589,"reputation":10607,"user_id":277368,"accept_rate":79,"display_name":"Xi 张熹"},"score":0,"creation_date":1696690397,"post_id":77233622,"comment_id":136187184,"body_markdown":"What is the device?","body":"What is the device?"},{"owner":{"account_id":14068837,"reputation":23,"user_id":10162907,"display_name":"mohammed said"},"score":0,"creation_date":1696710889,"post_id":77233622,"comment_id":136189120,"body_markdown":"Realme( C35 ,c25s,c33), Samsung( Galaxy A03 ,A10s), Nokia G21,Smart 6 Plus","body":"Realme( C35 ,c25s,c33), Samsung( Galaxy A03 ,A10s), Nokia G21,Smart 6 Plus"},{"owner":{"account_id":103589,"reputation":10607,"user_id":277368,"accept_rate":79,"display_name":"Xi 张熹"},"score":0,"creation_date":1697145930,"post_id":77233622,"comment_id":136246766,"body_markdown":"I suggest you filing a bug against the CameraX team: https://issuetracker.google.com/issues/new?component=618491&amp;template=1257717","body":"I suggest you filing a bug against the CameraX team: <a href=\"https://issuetracker.google.com/issues/new?component=618491&amp;template=1257717\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/&hellip;</a>"}],"owner":{"account_id":14068837,"reputation":23,"user_id":10162907,"display_name":"mohammed said"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696610340,"creation_date":1696464632,"question_id":77233622,"body_markdown":"I am getting this crash in firebase from a flashlight app.\r\n```\r\nFatal Exception: java.lang.IllegalArgumentException: setTorchMode:2297: Camera ID &quot;0&quot; is a not valid camera ID\r\n       at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1332)\r\n       at android.hardware.camera2.CameraManager$CameraManagerGlobal.setTorchMode(CameraManager.java:1886)\r\n       at android.hardware.camera2.CameraManager.setTorchMode(CameraManager.java:943)\r\n       at AccService2.onSensorChanged(AccService2.java:197)\r\n       at android.hardware.SystemSensorManager$SensorEventQueue.dispatchSensorEvent(SystemSensorManager.java:1004)\r\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\r\n       at android.os.MessageQueue.next(MessageQueue.java:335)\r\n       at android.os.Looper.loop(Looper.java:206)\r\n       at android.app.ActivityThread.main(ActivityThread.java:8653)\r\n       at java.lang.reflect.Method.invoke(Method.java)\r\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\r\n```\r\nand \r\n\r\n```\r\nFatal Exception: java.lang.IllegalArgumentException: setTorchMode:2721: Camera &quot;1&quot; does not have a flash unit\r\n       at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1723)\r\n       at android.hardware.camera2.CameraManager$CameraManagerGlobal.setTorchMode(CameraManager.java:2318)\r\n       at android.hardware.camera2.CameraManager.setTorchMode(CameraManager.java:1211)\r\n       at AccService2.onSensorChanged(AccService2.java:197)\r\n       at android.hardware.SystemSensorManager$SensorEventQueue.dispatchSensorEvent(SystemSensorManager.java:991)\r\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\r\n       at android.os.MessageQueue.next(MessageQueue.java:335)\r\n       at android.os.Looper.loopOnce(Looper.java:186)\r\n       at android.os.Looper.loop(Looper.java:313)\r\n       at android.app.ActivityThread.main(ActivityThread.java:8757)\r\n       at java.lang.reflect.Method.invoke(Method.java)\r\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1067)\r\n```\r\nthis is the code \r\n\r\n```            \r\n            sCameraId = MAcamID.getFirstCameraIdFacing(camManager,null);\r\n\r\n                    if (Flash_Available) {\r\n                        String Cam_id=sCameraId;\r\n                        if (Cam_id != null) {\r\n                            try {\r\n                                camManager.setTorchMode(Cam_id, !flashState);\r\n\r\n                            } catch (CameraAccessException e) {\r\n                                Log.e(&quot;TAG&quot;, &quot;settorchmode Excep&quot;, e);\r\n                            }\r\n                        }\r\n\r\n                     \r\n                    }\r\n```\r\n\r\n \r\n\r\nand in this class i&#39;m checking the camera id list to get the id of the back camera and check if it has a flash unit\r\n\r\n```\r\npublic class CamId {\r\n\r\n    public String getFirstCameraIdFacing(CameraManager cameraManager, @Nullable Integer facing) {\r\n        if (facing == null) facing = CameraMetadata.LENS_FACING_BACK;\r\n        String cameraId = null;\r\n        try {\r\n            // Get a list of all compatible cameras\r\n            String[] cameraIdList = cameraManager.getCameraIdList();\r\n\r\n            // Iterate over the list of cameras and return the first one matching desired\r\n            // lens-facing configuration and backward compatibility\r\n            for (String id : cameraIdList) {\r\n                CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(id);\r\n\r\n                if ( characteristics.get(CameraCharacteristics.LENS_FACING).equals(facing) &amp;&amp;\r\n                        characteristics.get(CameraCharacteristics.FLASH_INFO_AVAILABLE)) {\r\n                        cameraId = id;\r\n                        break;\r\n                    }\r\n\r\n            }\r\n\r\n            // If no camera matches the desired orientation, return the first one from the\r\n            if(cameraId == null &amp;&amp; cameraIdList.length&gt;0) {\r\n                cameraId = cameraIdList[0];\r\n\r\n            }\r\n        } catch (CameraAccessException e) {\r\n            Log.e(&quot;CameraId ex&quot;, &quot;getFirstCameraIdFacing: &quot; + e.getMessage());\r\n        }\r\n\r\n        return cameraId;\r\n    }\r\n\r\n}\r\n```\r\nand i&#39;m checking the avalablity of the flashlight this callback\r\n\r\n```\r\npublic void callBack(){\r\n\r\n        torchCallback = new CameraManager.TorchCallback() {\r\n            @Override\r\n            public void onTorchModeUnavailable(@NonNull String cameraId) {\r\n                super.onTorchModeUnavailable(cameraId);\r\n                    Flash_Available = false;\r\n\r\n            }\r\n\r\n\r\n            @Override\r\n            public void onTorchModeChanged(@NonNull String cameraId, boolean enabled) {\r\n                super.onTorchModeChanged(cameraId, enabled);\r\n                flashState = enabled;\r\n                    Flash_Available = true;\r\n            }\r\n\r\n        };\r\n        camManager.registerTorchCallback(torchCallback, null);\r\n\r\n    }\r\n```\r\nThis crash happens for a few users but with a lot of event count, in the code i made sure to check for a valid camera id and if it has a flash unit before calling setTorchMode how this crash still happens?\r\n\r\n","title":"setTorchMode-IllegalArgumentException","body":"<p>I am getting this crash in firebase from a flashlight app.</p>\n<pre><code>Fatal Exception: java.lang.IllegalArgumentException: setTorchMode:2297: Camera ID &quot;0&quot; is a not valid camera ID\n       at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1332)\n       at android.hardware.camera2.CameraManager$CameraManagerGlobal.setTorchMode(CameraManager.java:1886)\n       at android.hardware.camera2.CameraManager.setTorchMode(CameraManager.java:943)\n       at AccService2.onSensorChanged(AccService2.java:197)\n       at android.hardware.SystemSensorManager$SensorEventQueue.dispatchSensorEvent(SystemSensorManager.java:1004)\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\n       at android.os.MessageQueue.next(MessageQueue.java:335)\n       at android.os.Looper.loop(Looper.java:206)\n       at android.app.ActivityThread.main(ActivityThread.java:8653)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n</code></pre>\n<p>and</p>\n<pre><code>Fatal Exception: java.lang.IllegalArgumentException: setTorchMode:2721: Camera &quot;1&quot; does not have a flash unit\n       at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1723)\n       at android.hardware.camera2.CameraManager$CameraManagerGlobal.setTorchMode(CameraManager.java:2318)\n       at android.hardware.camera2.CameraManager.setTorchMode(CameraManager.java:1211)\n       at AccService2.onSensorChanged(AccService2.java:197)\n       at android.hardware.SystemSensorManager$SensorEventQueue.dispatchSensorEvent(SystemSensorManager.java:991)\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\n       at android.os.MessageQueue.next(MessageQueue.java:335)\n       at android.os.Looper.loopOnce(Looper.java:186)\n       at android.os.Looper.loop(Looper.java:313)\n       at android.app.ActivityThread.main(ActivityThread.java:8757)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1067)\n</code></pre>\n<p>this is the code</p>\n<pre><code>            sCameraId = MAcamID.getFirstCameraIdFacing(camManager,null);\n\n                    if (Flash_Available) {\n                        String Cam_id=sCameraId;\n                        if (Cam_id != null) {\n                            try {\n                                camManager.setTorchMode(Cam_id, !flashState);\n\n                            } catch (CameraAccessException e) {\n                                Log.e(&quot;TAG&quot;, &quot;settorchmode Excep&quot;, e);\n                            }\n                        }\n\n                     \n                    }\n</code></pre>\n<p>and in this class i'm checking the camera id list to get the id of the back camera and check if it has a flash unit</p>\n<pre><code>public class CamId {\n\n    public String getFirstCameraIdFacing(CameraManager cameraManager, @Nullable Integer facing) {\n        if (facing == null) facing = CameraMetadata.LENS_FACING_BACK;\n        String cameraId = null;\n        try {\n            // Get a list of all compatible cameras\n            String[] cameraIdList = cameraManager.getCameraIdList();\n\n            // Iterate over the list of cameras and return the first one matching desired\n            // lens-facing configuration and backward compatibility\n            for (String id : cameraIdList) {\n                CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(id);\n\n                if ( characteristics.get(CameraCharacteristics.LENS_FACING).equals(facing) &amp;&amp;\n                        characteristics.get(CameraCharacteristics.FLASH_INFO_AVAILABLE)) {\n                        cameraId = id;\n                        break;\n                    }\n\n            }\n\n            // If no camera matches the desired orientation, return the first one from the\n            if(cameraId == null &amp;&amp; cameraIdList.length&gt;0) {\n                cameraId = cameraIdList[0];\n\n            }\n        } catch (CameraAccessException e) {\n            Log.e(&quot;CameraId ex&quot;, &quot;getFirstCameraIdFacing: &quot; + e.getMessage());\n        }\n\n        return cameraId;\n    }\n\n}\n</code></pre>\n<p>and i'm checking the avalablity of the flashlight this callback</p>\n<pre><code>public void callBack(){\n\n        torchCallback = new CameraManager.TorchCallback() {\n            @Override\n            public void onTorchModeUnavailable(@NonNull String cameraId) {\n                super.onTorchModeUnavailable(cameraId);\n                    Flash_Available = false;\n\n            }\n\n\n            @Override\n            public void onTorchModeChanged(@NonNull String cameraId, boolean enabled) {\n                super.onTorchModeChanged(cameraId, enabled);\n                flashState = enabled;\n                    Flash_Available = true;\n            }\n\n        };\n        camManager.registerTorchCallback(torchCallback, null);\n\n    }\n</code></pre>\n<p>This crash happens for a few users but with a lot of event count, in the code i made sure to check for a valid camera id and if it has a flash unit before calling setTorchMode how this crash still happens?</p>\n"},{"tags":["java","javafx","javafx-8"],"comments":[{"owner":{"display_name":"user5946312"},"score":0,"creation_date":1482200172,"post_id":41233886,"comment_id":69667354,"body_markdown":"I tried overriding the stop() method in the main class but it still closes the application even before the confirmation Prompt is displayed","body":"I tried overriding the stop() method in the main class but it still closes the application even before the confirmation Prompt is displayed"},{"owner":{"account_id":9853597,"reputation":21,"user_id":7298878,"display_name":"R. Salame"},"score":1,"creation_date":1482200498,"post_id":41233886,"comment_id":69667419,"body_markdown":"I found the best answer is in this thread:\nhttp://stackoverflow.com/questions/13727314/prevent-or-cancel-exit-javafx-2","body":"I found the best answer is in this thread: <a href=\"http://stackoverflow.com/questions/13727314/prevent-or-cancel-exit-javafx-2\" title=\"prevent or cancel exit javafx 2\">stackoverflow.com/questions/13727314/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"display_name":"user5946312"},"score":0,"creation_date":1482201279,"post_id":41233936,"comment_id":69667625,"body_markdown":"it worked after the edit you made. thank you very much.","body":"it worked after the edit you made. thank you very much."},{"owner":{"account_id":8493750,"reputation":887,"user_id":6369009,"accept_rate":78,"display_name":"Politic Revolutionnaire"},"score":0,"creation_date":1482204646,"post_id":41233936,"comment_id":69668436,"body_markdown":"No problem. Adapted the code from another program that had a similar feature, but was not in my style so almost forgot to put the edit. Glad I could help!","body":"No problem. Adapted the code from another program that had a similar feature, but was not in my style so almost forgot to put the edit. Glad I could help!"}],"tags":[],"owner":{"account_id":8493750,"reputation":887,"user_id":6369009,"accept_rate":78,"display_name":"Politic Revolutionnaire"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1482201100,"creation_date":1482200562,"answer_id":41233936,"question_id":41233886,"body_markdown":"    primaryStage.addEventFilter(WindowEvent.WINDOW_CLOSE_REQUEST, e-&gt;{\r\n        e.consume();\r\n        Popup popup = new Popup();\r\n        HBox buttons = new HBox();\r\n        Button close = new Button(&quot;close&quot;);\r\n        Button cancel = new Button(&quot;cancel&quot;);\r\n        buttons.getChildren().addAll(close,cancel);\r\n        buttons.setPadding(new Insets(5,5,5,5));\r\n        popup.getContent().add(buttons);\r\n        popup.show(primaryStage);\r\n    \tclose.setOnAction(ex -&gt; {\r\n    \t\tPlatform.exit();\r\n    \t});\r\n    \tcancel.setOnAction(ec -&gt; {\r\n    \t\tpopup.hide();\r\n    \t});\r\n    });","title":"Display a confirmation dialogue when the user try to exit the application (Press X button)","body":"<pre><code>primaryStage.addEventFilter(WindowEvent.WINDOW_CLOSE_REQUEST, e-&gt;{\n    e.consume();\n    Popup popup = new Popup();\n    HBox buttons = new HBox();\n    Button close = new Button(\"close\");\n    Button cancel = new Button(\"cancel\");\n    buttons.getChildren().addAll(close,cancel);\n    buttons.setPadding(new Insets(5,5,5,5));\n    popup.getContent().add(buttons);\n    popup.show(primaryStage);\n    close.setOnAction(ex -&gt; {\n        Platform.exit();\n    });\n    cancel.setOnAction(ec -&gt; {\n        popup.hide();\n    });\n});\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8493750,"reputation":887,"user_id":6369009,"accept_rate":78,"display_name":"Politic Revolutionnaire"},"score":0,"creation_date":1482232551,"post_id":41234759,"comment_id":69681528,"body_markdown":"I would have shown an example using an alert however, I have had experiences with it glitching before and chose the safer option.","body":"I would have shown an example using an alert however, I have had experiences with it glitching before and chose the safer option."}],"tags":[],"owner":{"account_id":3101890,"reputation":10709,"user_id":2855515,"accept_rate":100,"display_name":"brian"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1482206898,"creation_date":1482206898,"answer_id":41234759,"question_id":41233886,"body_markdown":"You can use Alert since 8.40\r\n\r\n\r\n    stage.setOnCloseRequest(evt -&gt; {\r\n        Alert alert = new Alert(AlertType.CONFIRMATION);\r\n        alert.setTitle(&quot;Confirm Close&quot;);\r\n        alert.setHeaderText(&quot;Close program?&quot;);\r\n        alert.showAndWait().filter(r -&gt; r != ButtonType.OK).ifPresent(r-&gt;evt.consume());\r\n    });","title":"Display a confirmation dialogue when the user try to exit the application (Press X button)","body":"<p>You can use Alert since 8.40</p>\n\n<pre><code>stage.setOnCloseRequest(evt -&gt; {\n    Alert alert = new Alert(AlertType.CONFIRMATION);\n    alert.setTitle(\"Confirm Close\");\n    alert.setHeaderText(\"Close program?\");\n    alert.showAndWait().filter(r -&gt; r != ButtonType.OK).ifPresent(r-&gt;evt.consume());\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23586720,"reputation":11,"user_id":17625083,"display_name":"NethakaDeSaram"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696609810,"creation_date":1696609810,"answer_id":77246079,"question_id":41233886,"body_markdown":"I Followed this approach...\r\n\r\n**After creating my stage I use this code to launch a popup and exit...**\r\n\r\n    stage.setOnCloseRequest((WindowEvent arg0) -&gt; {\r\n            arg0.consume();\r\n            Alert exitAlert = new Alert(AlertType.CONFIRMATION);\r\n            exitAlert.setTitle(&quot;Exit Confirmation&quot;);\r\n            exitAlert.setHeaderText(null);\r\n            exitAlert.setContentText(&quot;Do you really need to exit ?&quot;);\r\n\r\n            ButtonType yesBtn = new ButtonType(&quot;Yes&quot;, ButtonData.YES);\r\n            ButtonType noBtn = new ButtonType(&quot;No&quot;, ButtonData.NO);\r\n\r\n            exitAlert.getButtonTypes().setAll(yesBtn, noBtn);\r\n            exitAlert.initOwner(getScene().getWindow());\r\n            exitAlert.showAndWait();\r\n            if (exitAlert.getResult().getButtonData() == ButtonData.YES) {\r\n                Platform.exit();\r\n                System.exit(0);\r\n            }\r\n        });","title":"Display a confirmation dialogue when the user try to exit the application (Press X button)","body":"<p>I Followed this approach...</p>\n<p><strong>After creating my stage I use this code to launch a popup and exit...</strong></p>\n<pre><code>stage.setOnCloseRequest((WindowEvent arg0) -&gt; {\n        arg0.consume();\n        Alert exitAlert = new Alert(AlertType.CONFIRMATION);\n        exitAlert.setTitle(&quot;Exit Confirmation&quot;);\n        exitAlert.setHeaderText(null);\n        exitAlert.setContentText(&quot;Do you really need to exit ?&quot;);\n\n        ButtonType yesBtn = new ButtonType(&quot;Yes&quot;, ButtonData.YES);\n        ButtonType noBtn = new ButtonType(&quot;No&quot;, ButtonData.NO);\n\n        exitAlert.getButtonTypes().setAll(yesBtn, noBtn);\n        exitAlert.initOwner(getScene().getWindow());\n        exitAlert.showAndWait();\n        if (exitAlert.getResult().getButtonData() == ButtonData.YES) {\n            Platform.exit();\n            System.exit(0);\n        }\n    });\n</code></pre>\n"}],"owner":{"display_name":"user5946312"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":860,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":41233936,"answer_count":3,"score":1,"last_activity_date":1696609810,"creation_date":1482200022,"question_id":41233886,"body_markdown":"I want to modify the default exit procedure in my javafx application to display a confirmation dialogue to the user. The confirmation dialogue will exit the application if the user chooses OK and will keep the application running when user chooses Cancel.\r\n\r\nWhat should I do to make this in javaFX?","title":"Display a confirmation dialogue when the user try to exit the application (Press X button)","body":"<p>I want to modify the default exit procedure in my javafx application to display a confirmation dialogue to the user. The confirmation dialogue will exit the application if the user chooses OK and will keep the application running when user chooses Cancel.</p>\n\n<p>What should I do to make this in javaFX?</p>\n"},{"tags":["java","jakarta-mail"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1696588515,"post_id":77243691,"comment_id":136175539,"body_markdown":"Have you tried to open the input file with a text editor/viewer?  Perhaps the mail has an HTML body only but your code expects a &quot;text/plain&quot; MIME type.","body":"Have you tried to open the input file with a text editor/viewer?  Perhaps the mail has an HTML body only but your code expects a &quot;text/plain&quot; MIME type."},{"owner":{"account_id":22883760,"reputation":101,"user_id":17024974,"display_name":"Vinayak"},"score":0,"creation_date":1696588841,"post_id":77243691,"comment_id":136175606,"body_markdown":"The file containing the attachment has all three tags\n\n1. Content-Type: text/plain; charset=&quot;UTF-8&quot;, \n2. Content-Type: text/html; charset=&quot;UTF-8&quot;, \n3. Content-Type: image/png; name=&quot;third attachment.png&quot; \n\nFile not containing attachments have only two tags\n\n1. Content-Type: text/plain; charset=&quot;UTF-8&quot; \n2. Content-Type: text/html; charset=&quot;UTF-8&quot;","body":"The file containing the attachment has all three tags  1. Content-Type: text/plain; charset=&quot;UTF-8&quot;,  2. Content-Type: text/html; charset=&quot;UTF-8&quot;,  3. Content-Type: image/png; name=&quot;third attachment.png&quot;   File not containing attachments have only two tags  1. Content-Type: text/plain; charset=&quot;UTF-8&quot;  2. Content-Type: text/html; charset=&quot;UTF-8&quot;"},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1696590277,"post_id":77243691,"comment_id":136175881,"body_markdown":"Does this answer your question? [How to read text inside body of mail using javax.mail](https://stackoverflow.com/questions/11240368/how-to-read-text-inside-body-of-mail-using-javax-mail)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11240368/how-to-read-text-inside-body-of-mail-using-javax-mail\">How to read text inside body of mail using javax.mail</a>"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1696606288,"post_id":77243691,"comment_id":136179187,"body_markdown":"Please provide the example emails.","body":"Please provide the example emails."},{"owner":{"account_id":22883760,"reputation":101,"user_id":17024974,"display_name":"Vinayak"},"score":0,"creation_date":1696607569,"post_id":77243691,"comment_id":136179436,"body_markdown":"@MarkRotteveel file content is too large to add here","body":"@MarkRotteveel file content is too large to add here"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1696609625,"post_id":77243691,"comment_id":136179835,"body_markdown":"Then you should do your best to create minimal emails that allows you to reproduce it. I haven&#39;t touched JakartaMail in a while, but I guess you&#39;re decoding the body structure incorrectly.","body":"Then you should do your best to create minimal emails that allows you to reproduce it. I haven&#39;t touched JakartaMail in a while, but I guess you&#39;re decoding the body structure incorrectly."}],"owner":{"account_id":22883760,"reputation":101,"user_id":17024974,"display_name":"Vinayak"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696609634,"creation_date":1696587925,"question_id":77243691,"body_markdown":"I am writing transform to convert eml to JSON. I have written the below code to parse eml. I want to extract the mail body and attachments from the eml. But whenever eml contains attachments I get an empty body and if eml does not contain attachments then I get an email body.\r\n```\r\npackage org.example;\r\n\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.SerializationFeature;\r\nimport com.fasterxml.jackson.databind.node.ObjectNode;\r\n\r\nimport javax.activation.DataHandler;\r\nimport javax.mail.*;\r\nimport javax.mail.internet.MimeMessage;\r\nimport javax.mail.internet.MimeUtility;\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\n/**\r\n * Class which transform EML file into JSON\r\n */\r\npublic class EMLtoJSONJavaTransform {\r\n\r\n    private static final String FORWARD_EMAIL_PREFIX = &quot;Fwd:&quot;;\r\n    private static final int INPUT_FILE_INDEX = 0;\r\n    private static final int OUTPUT_FILE_INDEX = 1;\r\n\r\n    public static void main(String[] args) {\r\n        String emlFilePath = args[INPUT_FILE_INDEX];\r\n        String jsonFilePath = args[OUTPUT_FILE_INDEX];\r\n\r\n        try {\r\n            File inputFile = new File(emlFilePath);\r\n            File outputFile = new File(jsonFilePath);\r\n            EMLtoJSONJavaTransform obj = new EMLtoJSONJavaTransform();\r\n            obj.executeTransform(inputFile, outputFile);\r\n            System.out.println(&quot;Conversion completed. JSON file saved to &quot; + jsonFilePath);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private File executeTransform(File inputFile, File outputFile)  {\r\n        try {\r\n            Properties properties = new Properties();\r\n            Session session = Session.getDefaultInstance(properties);\r\n\r\n            // Read the .eml file\r\n            InputStream emlInputStream = new FileInputStream(inputFile);\r\n            MimeMessage emlMessage = new MimeMessage(session, emlInputStream);\r\n\r\n            // Convert the email message to JSON\r\n            ObjectNode jsonNode = convertEmlToJson(emlMessage);\r\n\r\n            // Write JSON to a file\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            objectMapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n            objectMapper.writeValue(outputFile, jsonNode);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return outputFile;\r\n    }\r\n\r\n    private ObjectNode convertEmlToJson(MimeMessage emlMessage) throws MessagingException, IOException {\r\n        ObjectNode jsonNode = new ObjectMapper().createObjectNode();\r\n        String subject = emlMessage.getSubject();\r\n        if(subject.contains(FORWARD_EMAIL_PREFIX)) {\r\n            subject = subject.substring(4).trim();\r\n        }\r\n\r\n        String sender = emlMessage.getFrom()[0].toString();\r\n        int startIdx = sender.indexOf(&quot;&lt;&quot;);\r\n        int endIdx = sender.indexOf(&quot;&gt;&quot;);\r\n\r\n        // Extract relevant email properties and content\r\n        jsonNode.put(&quot;sender&quot;, sender.substring(startIdx+1, endIdx));\r\n        jsonNode.put(&quot;summary&quot;, subject);\r\n\r\n\r\n        // Process the email body\r\n        String bodyText = extractTextFromMessage(emlMessage);\r\n        jsonNode.put(&quot;body&quot;, bodyText);\r\n        Map&lt;String, String&gt; map = extractAttachmentsFromMessage(emlMessage);\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        JsonNode jsonNodeMap = mapper.convertValue(map, JsonNode.class);\r\n        jsonNode.put(&quot;attachments&quot;, jsonNodeMap);\r\n\r\n        return jsonNode;\r\n    }\r\n\r\n    private String extractTextFromMessage(Message message) throws MessagingException, IOException {\r\n        StringBuilder result = new StringBuilder();\r\n        if (message.isMimeType(&quot;text/plain&quot;)) {\r\n            result.append(message.getContent());\r\n        } else if (message.isMimeType(&quot;multipart/*&quot;)) {\r\n            Multipart multipart = (Multipart) message.getContent();\r\n            for (int i = 0; i &lt; multipart.getCount(); i++) {\r\n                BodyPart bodyPart = multipart.getBodyPart(i);\r\n                if (bodyPart.isMimeType(&quot;text/plain&quot;)) {\r\n                    result.append(bodyPart.getContent());\r\n                }\r\n            }\r\n        }\r\n        return result.toString();\r\n    }\r\n\r\n    private Map&lt;String, String&gt; extractAttachmentsFromMessage(Message message) throws MessagingException, IOException {\r\n        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n        if (message.isMimeType(&quot;multipart/*&quot;)) {\r\n            Multipart multipart = (Multipart) message.getContent();\r\n            for (int i = 0; i &lt; multipart.getCount(); i++) {\r\n                BodyPart bodyPart = multipart.getBodyPart(i);\r\n                if (Part.ATTACHMENT.equalsIgnoreCase(bodyPart.getDisposition())) {\r\n                    // This is an attachment\r\n                    String fileName = MimeUtility.decodeText(bodyPart.getFileName());\r\n                    System.out.println(&quot;Attachment Name: &quot; + fileName);\r\n\r\n                    // Get the attachment content in base64 format\r\n                    DataHandler handler = bodyPart.getDataHandler();\r\n                    InputStream inputStream = handler.getInputStream();\r\n                    byte[] bytes = new byte[inputStream.available()];\r\n                    inputStream.read(bytes);\r\n                    String base64Content = java.util.Base64.getEncoder().encodeToString(bytes);\r\n                    map.put(fileName, base64Content);\r\n//                    System.out.println(&quot;Base64 Content: &quot; + base64Content);\r\n                }\r\n            }\r\n        }\r\n        return map;\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe output of my code:\r\n\r\n1. When eml contains an attachment\r\n\r\n    ```json\r\n    {\r\n      &quot;sender&quot; : &quot;xyz@abc.com&quot;,\r\n      &quot;summary&quot; : &quot;Sending test email&quot;,\r\n      &quot;body&quot; : &quot;&quot;,\r\n      &quot;attachments&quot; : {\r\n        &quot;third attachment.png&quot; : &quot;iVBORw0KGgoAAAANSUhEUgAADewAAAgqCAYAAABIGbTdAAAMPWlDQ1BJQ0MgUHJvZmlsZQAASImVVwdYU8kWnltSIbRABKSE3gTpVUoILVKlCjZCEiCUEANBxY4uKrh2UQEbuiqi6FoAsSOKKItg74sFFWVd1MWuvEkBXfeV7833nTv/PXPmP2fOnXvvHADUT3HF4hxUA4BcUYEkNjSQOT45hUl6CiiAAVSAESBzefliVkxMBIBtqP97e3sdILL+ir2M65/j/7Vp8gX5PACQGIjT+Pm8XIgPAYBX8cSSAgCIMr3ZtAKxDEMB2hIYIMSLZThDgatkOE2B98tt4mPZELcAQFblciUZAKh1Qj2zkJcBOdT6IXYU8YUiANSZEPvl5ubxIU6F2BraiCGW8XumfceT8TfOtGFOLjdjGCvWIm/kIGG+OIc74/9Mx/9uuTnSIR+WUFQzJWGxsjXDvN3MzguXYVWI+0RpUdEQa0H8XsiX20OMUjOlYQkKe9SAl8+GOYNPGqCOfG5QOMQGEIeIcqIilPq0dGEIB2K4Q9DpwgJOPMS6EC8W5AfHKW22SPJilb7Q+nQJm6XUn+dK5H5lvu5LsxNYSv7XmQKOkh9TK8qMT4KYCrF5oTAxCmI1iB3ys+PClTZjijLZUUM2EmmsLH5ziGMFotBABT9WmC4JiVXal+bmD60X25Ip5EQp8YGCzPgwRX6wFh5XHj9cC9YpELEShngE+eMjhtbCFwQFK9aOPROIEuKUPO/FBYGxirk4VZwTo7THTQU5oTK9KcSu+YVxyrl4YgHckAp+PF1cEBOviBMvyuKOjVHEg68AEYANggATSKGkgTyQBYQdfQ198E4xEgK4QAIygADYKzVDM5LkIyJ4jQNF4A+IBCB/eF6gfFQACqH+y7BWcbUH6fLRQvmMbPAE4lwQDnLgvVQ+SzTsLRE8hhrhP7xzofBgvDlQZOP/Xj+k/aZhQU2EUiMd8shUH7IkBhODiGHEEKINro/74T54BLwGQHHGPXGvoXV8syc8IXQRHhKuEboJt6YIiyU/RBkJuiF/iDIXad/nAreEnG54IO4L2SEzzsD1gT3uCv2wcH/o2Q1q2cq4ZVlh/sD9txV89zSUdhRHCkoZQQmgWP84U81WzW2YRZbr7/OjiDVtON/s4ZEf/bO/yz4f9uE/WmKLsYNYK3Yaa8OOYQ2AiZ3EGrF27LgMD++ux/LdNeQtVh5PNuQR/sPf0JOVZTLfsdax1/GzYqxAMF32jQbsPPEMiTAjs4DJgn8EAZMj4jmMYjo7OrsAIPu/KD5fbxjy/wbCuPBNt+AiAL5tg4ODR7/pwtMBOHAGvv7f2Vlth99o6Ov8Tp5UUqjQ4bILAX4l1OGbpgf/XWbAGq7HGbgDHxAAgsFYEA3iQTKYDKPPhPtcAqaBWWA+KAFlYAVYCyrAZrAN7AJ7wQHQAI6B0+AcuAg6wTVwB+6eHvAC9IO34BOCICSEhtARPcQYsUDsEGfEE/FDgpEIJBZJRlKRDESESJFZb3aejAABAgQIECBAgAABAgQIECBA4BuBC67PQXdnEv1jAAAAAElFTkSuQmCCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&quot;\r\n      }\r\n    }\r\n    ```\r\n\r\n2. When eml not contain attachment\r\n\r\n    ```json\r\n    {\r\n      &quot;sender&quot; : &quot;abc@xyz.com&quot;,\r\n      &quot;summary&quot; : &quot;Sending test email&quot;,\r\n      &quot;body&quot; : &quot;---------- Forwarded message ---------\\r\\nFrom: abc &lt;abc@xyz.com&gt;\\r\\nDate: Wed, Aug 23, 2023 at 9:39 AM\\r\\nSubject: Fwd: Sending test email\\r\\nTo: abc &lt;abc@xyz.com&gt;\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n---------- Forwarded message ---------\\r\\nFrom: abc &lt;abc@xyz.com&gt;\\r\\nDate: Wed, Aug 23, 2023 at 1:55 AM\\r\\nSubject: Sending test email\\r\\nTo: abc &lt;abc@xyz.com&gt;\\r\\n\\r\\n\\r\\nThis is mail body \\r\\n\\r\\nThanks,\\r\\npqr\\r\\n&quot;,\r\n      &quot;attachments&quot;: { }\r\n    }\r\n    ```\r\n\r\nHelp me to figure out my mistake.\r\n","title":"Getting empty email body while parsing eml to json only when eml contains attachment","body":"<p>I am writing transform to convert eml to JSON. I have written the below code to parse eml. I want to extract the mail body and attachments from the eml. But whenever eml contains attachments I get an empty body and if eml does not contain attachments then I get an email body.</p>\n<pre><code>package org.example;\n\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\n\nimport javax.activation.DataHandler;\nimport javax.mail.*;\nimport javax.mail.internet.MimeMessage;\nimport javax.mail.internet.MimeUtility;\nimport java.io.*;\nimport java.util.*;\n\n/**\n * Class which transform EML file into JSON\n */\npublic class EMLtoJSONJavaTransform {\n\n    private static final String FORWARD_EMAIL_PREFIX = &quot;Fwd:&quot;;\n    private static final int INPUT_FILE_INDEX = 0;\n    private static final int OUTPUT_FILE_INDEX = 1;\n\n    public static void main(String[] args) {\n        String emlFilePath = args[INPUT_FILE_INDEX];\n        String jsonFilePath = args[OUTPUT_FILE_INDEX];\n\n        try {\n            File inputFile = new File(emlFilePath);\n            File outputFile = new File(jsonFilePath);\n            EMLtoJSONJavaTransform obj = new EMLtoJSONJavaTransform();\n            obj.executeTransform(inputFile, outputFile);\n            System.out.println(&quot;Conversion completed. JSON file saved to &quot; + jsonFilePath);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private File executeTransform(File inputFile, File outputFile)  {\n        try {\n            Properties properties = new Properties();\n            Session session = Session.getDefaultInstance(properties);\n\n            // Read the .eml file\n            InputStream emlInputStream = new FileInputStream(inputFile);\n            MimeMessage emlMessage = new MimeMessage(session, emlInputStream);\n\n            // Convert the email message to JSON\n            ObjectNode jsonNode = convertEmlToJson(emlMessage);\n\n            // Write JSON to a file\n            ObjectMapper objectMapper = new ObjectMapper();\n            objectMapper.enable(SerializationFeature.INDENT_OUTPUT);\n            objectMapper.writeValue(outputFile, jsonNode);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return outputFile;\n    }\n\n    private ObjectNode convertEmlToJson(MimeMessage emlMessage) throws MessagingException, IOException {\n        ObjectNode jsonNode = new ObjectMapper().createObjectNode();\n        String subject = emlMessage.getSubject();\n        if(subject.contains(FORWARD_EMAIL_PREFIX)) {\n            subject = subject.substring(4).trim();\n        }\n\n        String sender = emlMessage.getFrom()[0].toString();\n        int startIdx = sender.indexOf(&quot;&lt;&quot;);\n        int endIdx = sender.indexOf(&quot;&gt;&quot;);\n\n        // Extract relevant email properties and content\n        jsonNode.put(&quot;sender&quot;, sender.substring(startIdx+1, endIdx));\n        jsonNode.put(&quot;summary&quot;, subject);\n\n\n        // Process the email body\n        String bodyText = extractTextFromMessage(emlMessage);\n        jsonNode.put(&quot;body&quot;, bodyText);\n        Map&lt;String, String&gt; map = extractAttachmentsFromMessage(emlMessage);\n        ObjectMapper mapper = new ObjectMapper();\n        JsonNode jsonNodeMap = mapper.convertValue(map, JsonNode.class);\n        jsonNode.put(&quot;attachments&quot;, jsonNodeMap);\n\n        return jsonNode;\n    }\n\n    private String extractTextFromMessage(Message message) throws MessagingException, IOException {\n        StringBuilder result = new StringBuilder();\n        if (message.isMimeType(&quot;text/plain&quot;)) {\n            result.append(message.getContent());\n        } else if (message.isMimeType(&quot;multipart/*&quot;)) {\n            Multipart multipart = (Multipart) message.getContent();\n            for (int i = 0; i &lt; multipart.getCount(); i++) {\n                BodyPart bodyPart = multipart.getBodyPart(i);\n                if (bodyPart.isMimeType(&quot;text/plain&quot;)) {\n                    result.append(bodyPart.getContent());\n                }\n            }\n        }\n        return result.toString();\n    }\n\n    private Map&lt;String, String&gt; extractAttachmentsFromMessage(Message message) throws MessagingException, IOException {\n        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n        if (message.isMimeType(&quot;multipart/*&quot;)) {\n            Multipart multipart = (Multipart) message.getContent();\n            for (int i = 0; i &lt; multipart.getCount(); i++) {\n                BodyPart bodyPart = multipart.getBodyPart(i);\n                if (Part.ATTACHMENT.equalsIgnoreCase(bodyPart.getDisposition())) {\n                    // This is an attachment\n                    String fileName = MimeUtility.decodeText(bodyPart.getFileName());\n                    System.out.println(&quot;Attachment Name: &quot; + fileName);\n\n                    // Get the attachment content in base64 format\n                    DataHandler handler = bodyPart.getDataHandler();\n                    InputStream inputStream = handler.getInputStream();\n                    byte[] bytes = new byte[inputStream.available()];\n                    inputStream.read(bytes);\n                    String base64Content = java.util.Base64.getEncoder().encodeToString(bytes);\n                    map.put(fileName, base64Content);\n//                    System.out.println(&quot;Base64 Content: &quot; + base64Content);\n                }\n            }\n        }\n        return map;\n    }\n}\n\n</code></pre>\n<p>The output of my code:</p>\n<ol>\n<li><p>When eml contains an attachment</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;sender&quot; : &quot;xyz@abc.com&quot;,\n  &quot;summary&quot; : &quot;Sending test email&quot;,\n  &quot;body&quot; : &quot;&quot;,\n  &quot;attachments&quot; : {\n    &quot;third attachment.png&quot; : &quot;iVBORw0KGgoAAAANSUhEUgAADewAAAgqCAYAAABIGbTdAAAMPWlDQ1BJQ0MgUHJvZmlsZQAASImVVwdYU8kWnltSIbRABKSE3gTpVUoILVKlCjZCEiCUEANBxY4uKrh2UQEbuiqi6FoAsSOKKItg74sFFWVd1MWuvEkBXfeV7833nTv/PXPmP2fOnXvvHADUT3HF4hxUA4BcUYEkNjSQOT45hUl6CiiAAVSAESBzefliVkxMBIBtqP97e3sdILL+ir2M65/j/7Vp8gX5PACQGIjT+Pm8XIgPAYBX8cSSAgCIMr3ZtAKxDEMB2hIYIMSLZThDgatkOE2B98tt4mPZELcAQFblciUZAKh1Qj2zkJcBOdT6IXYU8YUiANSZEPvl5ubxIU6F2BraiCGW8XumfceT8TfOtGFOLjdjGCvWIm/kIGG+OIc74/9Mx/9uuTnSIR+WUFQzJWGxsjXDvN3MzguXYVWI+0RpUdEQa0H8XsiX20OMUjOlYQkKe9SAl8+GOYNPGqCOfG5QOMQGEIeIcqIilPq0dGEIB2K4Q9DpwgJOPMS6EC8W5AfHKW22SPJilb7Q+nQJm6XUn+dK5H5lvu5LsxNYSv7XmQKOkh9TK8qMT4KYCrF5oTAxCmI1iB3ys+PClTZjijLZUUM2EmmsLH5ziGMFotBABT9WmC4JiVXal+bmD60X25Ip5EQp8YGCzPgwRX6wFh5XHj9cC9YpELEShngE+eMjhtbCFwQFK9aOPROIEuKUPO/FBYGxirk4VZwTo7THTQU5oTK9KcSu+YVxyrl4YgHckAp+PF1cEBOviBMvyuKOjVHEg68AEYANggATSKGkgTyQBYQdfQ198E4xEgK4QAIygADYKzVDM5LkIyJ4jQNF4A+IBCB/eF6gfFQACqH+y7BWcbUH6fLRQvmMbPAE4lwQDnLgvVQ+SzTsLRE8hhrhP7xzofBgvDlQZOP/Xj+k/aZhQU2EUiMd8shUH7IkBhODiGHEEKINro/74T54BLwGQHHGPXGvoXV8syc8IXQRHhKuEboJt6YIiyU/RBkJuiF/iDIXad/nAreEnG54IO4L2SEzzsD1gT3uCv2wcH/o2Q1q2cq4ZVlh/sD9txV89zSUdhRHCkoZQQmgWP84U81WzW2YRZbr7/OjiDVtON/s4ZEf/bO/yz4f9uE/WmKLsYNYK3Yaa8OOYQ2AiZ3EGrF27LgMD++ux/LdNeQtVh5PNuQR/sPf0JOVZTLfsdax1/GzYqxAMF32jQbsPPEMiTAjs4DJgn8EAZMj4jmMYjo7OrsAIPu/KD5fbxjy/wbCuPBNt+AiAL5tg4ODR7/pwtMBOHAGvv7f2Vlth99o6Ov8Tp5UUqjQ4bILAX4l1OGbpgf/XWbAGq7HGbgDHxAAgsFYEA3iQTKYDKPPhPtcAqaBWWA+KAFlYAVYCyrAZrAN7AJ7wQHQAI6B0+AcuAg6wTVwB+6eHvAC9IO34BOCICSEhtARPcQYsUDsEGfEE/FDgpEIJBZJRlKRDESESJFZb3aejAABAgQIECBAgAABAgQIECBA4BuBC67PQXdnEv1jAAAAAElFTkSuQmCCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&quot;\n  }\n}\n</code></pre>\n</li>\n<li><p>When eml not contain attachment</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;sender&quot; : &quot;abc@xyz.com&quot;,\n  &quot;summary&quot; : &quot;Sending test email&quot;,\n  &quot;body&quot; : &quot;---------- Forwarded message ---------\\r\\nFrom: abc &lt;abc@xyz.com&gt;\\r\\nDate: Wed, Aug 23, 2023 at 9:39 AM\\r\\nSubject: Fwd: Sending test email\\r\\nTo: abc &lt;abc@xyz.com&gt;\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n---------- Forwarded message ---------\\r\\nFrom: abc &lt;abc@xyz.com&gt;\\r\\nDate: Wed, Aug 23, 2023 at 1:55 AM\\r\\nSubject: Sending test email\\r\\nTo: abc &lt;abc@xyz.com&gt;\\r\\n\\r\\n\\r\\nThis is mail body \\r\\n\\r\\nThanks,\\r\\npqr\\r\\n&quot;,\n  &quot;attachments&quot;: { }\n}\n</code></pre>\n</li>\n</ol>\n<p>Help me to figure out my mistake.</p>\n"},{"tags":["java","android","timestamp"],"answers":[{"comments":[{"owner":{"account_id":9533601,"reputation":538,"user_id":13564911,"display_name":"Regex"},"score":0,"creation_date":1622473583,"post_id":59950402,"comment_id":119797182,"body_markdown":"Not working, your code always shows 625 months ago.","body":"Not working, your code always shows 625 months ago."}],"tags":[],"owner":{"account_id":17464704,"reputation":989,"user_id":12661688,"display_name":"Kalpesh Rupani"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580219771,"creation_date":1580219771,"answer_id":59950402,"question_id":59950270,"body_markdown":"Use this function :\r\n\r\nYou just need to pass timestamp here\r\n\r\n \r\n\r\n       public static String dayStringFormat(long msecs) {\r\n            final long ONE_SECOND = 1000L;\r\n            final long ONE_MINUTE = 60000L;\r\n            final long ONE_HOUR = 3600000L;\r\n            final long ONE_DAY = 86400000L;\r\n            final long ONE_MONTH = 2592000000L;\r\n            final long ONE_YEAR = 31536000000L;\r\n            int gmtOffset = TimeZone.getDefault().getRawOffset();\r\n            long currentTime = System.currentTimeMillis();\r\n            long difference = currentTime - msecs;\r\n            if (difference &lt; ONE_MINUTE) {\r\n                long timeAgo = difference / ONE_SECOND;\r\n                int finalUnits = (int) timeAgo;\r\n                return &quot;Just Now&quot;\r\n            } else if (difference &lt; ONE_HOUR) {\r\n                long timeAgo = difference / ONE_MINUTE;\r\n                int finalUnits = (int) timeAgo;\r\n                return  finalUnits + &quot; &quot; + &quot;Minutes Ago&quot;;\r\n            } else if (difference &lt; ONE_DAY) {\r\n                long timeAgo = difference / ONE_HOUR;\r\n                int finalUnits = (int) timeAgo;\r\n                return finalUnits + &quot; &quot; + &quot;Hours Ago&quot;;\r\n            } else if (difference &lt; ONE_MONTH) {\r\n                long timeAgo = difference / ONE_DAY;\r\n                int finalUnits = (int) timeAgo;\r\n                return  finalUnits +&quot; &quot; + &quot;Days Ago&quot;;\r\n            } else if (difference &lt; ONE_YEAR) {\r\n                long timeAgo = difference / ONE_MONTH;\r\n                int finalUnits = (int) timeAgo;\r\n                return  finalUnits + &quot; &quot; + &quot;Months Ago&quot;;\r\n            } else {\r\n                long timeAgo = difference / ONE_MONTH;\r\n                int finalUnits = (int) timeAgo;\r\n                return  finalUnits + &quot;&quot; + &quot;Months Ago&quot;;\r\n    \r\n            }\r\n        }\r\n\r\nHope this will work!","title":"Converting a timestamp to relative time","body":"<p>Use this function :</p>\n\n<p>You just need to pass timestamp here</p>\n\n<pre><code>   public static String dayStringFormat(long msecs) {\n        final long ONE_SECOND = 1000L;\n        final long ONE_MINUTE = 60000L;\n        final long ONE_HOUR = 3600000L;\n        final long ONE_DAY = 86400000L;\n        final long ONE_MONTH = 2592000000L;\n        final long ONE_YEAR = 31536000000L;\n        int gmtOffset = TimeZone.getDefault().getRawOffset();\n        long currentTime = System.currentTimeMillis();\n        long difference = currentTime - msecs;\n        if (difference &lt; ONE_MINUTE) {\n            long timeAgo = difference / ONE_SECOND;\n            int finalUnits = (int) timeAgo;\n            return \"Just Now\"\n        } else if (difference &lt; ONE_HOUR) {\n            long timeAgo = difference / ONE_MINUTE;\n            int finalUnits = (int) timeAgo;\n            return  finalUnits + \" \" + \"Minutes Ago\";\n        } else if (difference &lt; ONE_DAY) {\n            long timeAgo = difference / ONE_HOUR;\n            int finalUnits = (int) timeAgo;\n            return finalUnits + \" \" + \"Hours Ago\";\n        } else if (difference &lt; ONE_MONTH) {\n            long timeAgo = difference / ONE_DAY;\n            int finalUnits = (int) timeAgo;\n            return  finalUnits +\" \" + \"Days Ago\";\n        } else if (difference &lt; ONE_YEAR) {\n            long timeAgo = difference / ONE_MONTH;\n            int finalUnits = (int) timeAgo;\n            return  finalUnits + \" \" + \"Months Ago\";\n        } else {\n            long timeAgo = difference / ONE_MONTH;\n            int finalUnits = (int) timeAgo;\n            return  finalUnits + \"\" + \"Months Ago\";\n\n        }\n    }\n</code></pre>\n\n<p>Hope this will work!</p>\n"},{"tags":[],"owner":{"account_id":8977382,"reputation":1204,"user_id":9993404,"display_name":"Victory"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1580228691,"creation_date":1580228691,"answer_id":59953043,"question_id":59950270,"body_markdown":"This function will return time same as `Facebook`:\r\n\r\n    public static String getTimeAgo(long time) {\r\n\r\n        final DateFormat sdfTime = new SimpleDateFormat(&quot;h:mm aa&quot;, Locale.ENGLISH);\r\n        final DateFormat sdf = new SimpleDateFormat(&quot;d MMM &#39;at&#39; h:mm aa&quot;, Locale.ENGLISH);\r\n        final DateFormat sdfY = new SimpleDateFormat(&quot;d MMM yyyy &#39;at&#39; h:mm aa&quot;, Locale.ENGLISH);\r\n\r\n        final int SECOND_MILLIS = 1000;\r\n        final int MINUTE_MILLIS = 60 * SECOND_MILLIS;\r\n        final int HOUR_MILLIS = 60 * MINUTE_MILLIS;\r\n        final int DAY_MILLIS = 24 * HOUR_MILLIS;\r\n\r\n        if (time &lt; 1000000000000L) {\r\n            time *= 1000;\r\n        }\r\n\r\n        Calendar today = Calendar.getInstance();\r\n\r\n        Calendar timeCal = Calendar.getInstance();\r\n        timeCal.setTimeInMillis(time);\r\n\r\n        long now = System.currentTimeMillis();\r\n        if (time &gt; now || time &lt;= 0) {\r\n            return null;\r\n        }\r\n\r\n        final long diff = now - time;\r\n        if (diff &lt; MINUTE_MILLIS) {\r\n            return &quot;Just now&quot;;\r\n        } else if (diff &lt; 2 * MINUTE_MILLIS) {\r\n            return &quot;1 min&quot;;\r\n        } else if (diff &lt; 59 * MINUTE_MILLIS) {\r\n            return diff / MINUTE_MILLIS + &quot; mins&quot;;\r\n        } else if (diff &lt; 2 * HOUR_MILLIS) {\r\n            return &quot;1 hr&quot;;\r\n        } else if (diff &lt; 24 * HOUR_MILLIS) {\r\n            return diff / HOUR_MILLIS + &quot; hrs&quot;;\r\n        } else if (diff &lt; 48 * HOUR_MILLIS) {\r\n            return (&quot;Yesterday at &quot; + capsAMtoSmall(sdfTime.format(timeCal.getTime())));\r\n        } else if (today.get(Calendar.YEAR) == timeCal.get(Calendar.YEAR)) {\r\n            return capsAMtoSmall(sdf.format(timeCal.getTime()));\r\n        } else {\r\n            return capsAMtoSmall(sdfY.format(timeCal.getTime()));\r\n        }\r\n    }\r\n&lt;br\r\n\r\n    private static String capsAMtoSmall(String time) {\r\n        return time.replace(&quot;AM&quot;, &quot;am&quot;).replace(&quot;PM&quot;,&quot;pm&quot;);\r\n    }\r\n\r\nHappy coding :) ","title":"Converting a timestamp to relative time","body":"<p>This function will return time same as <code>Facebook</code>:</p>\n\n<pre><code>public static String getTimeAgo(long time) {\n\n    final DateFormat sdfTime = new SimpleDateFormat(\"h:mm aa\", Locale.ENGLISH);\n    final DateFormat sdf = new SimpleDateFormat(\"d MMM 'at' h:mm aa\", Locale.ENGLISH);\n    final DateFormat sdfY = new SimpleDateFormat(\"d MMM yyyy 'at' h:mm aa\", Locale.ENGLISH);\n\n    final int SECOND_MILLIS = 1000;\n    final int MINUTE_MILLIS = 60 * SECOND_MILLIS;\n    final int HOUR_MILLIS = 60 * MINUTE_MILLIS;\n    final int DAY_MILLIS = 24 * HOUR_MILLIS;\n\n    if (time &lt; 1000000000000L) {\n        time *= 1000;\n    }\n\n    Calendar today = Calendar.getInstance();\n\n    Calendar timeCal = Calendar.getInstance();\n    timeCal.setTimeInMillis(time);\n\n    long now = System.currentTimeMillis();\n    if (time &gt; now || time &lt;= 0) {\n        return null;\n    }\n\n    final long diff = now - time;\n    if (diff &lt; MINUTE_MILLIS) {\n        return \"Just now\";\n    } else if (diff &lt; 2 * MINUTE_MILLIS) {\n        return \"1 min\";\n    } else if (diff &lt; 59 * MINUTE_MILLIS) {\n        return diff / MINUTE_MILLIS + \" mins\";\n    } else if (diff &lt; 2 * HOUR_MILLIS) {\n        return \"1 hr\";\n    } else if (diff &lt; 24 * HOUR_MILLIS) {\n        return diff / HOUR_MILLIS + \" hrs\";\n    } else if (diff &lt; 48 * HOUR_MILLIS) {\n        return (\"Yesterday at \" + capsAMtoSmall(sdfTime.format(timeCal.getTime())));\n    } else if (today.get(Calendar.YEAR) == timeCal.get(Calendar.YEAR)) {\n        return capsAMtoSmall(sdf.format(timeCal.getTime()));\n    } else {\n        return capsAMtoSmall(sdfY.format(timeCal.getTime()));\n    }\n}\n</code></pre>\n\n<p>\n\n<pre><code>private static String capsAMtoSmall(String time) {\n    return time.replace(\"AM\", \"am\").replace(\"PM\",\"pm\");\n}\n</code></pre>\n\n<p>Happy coding :) </p>\n"},{"tags":[],"owner":{"account_id":29011837,"reputation":1,"user_id":22223178,"display_name":"Roustam Manookian"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1696609560,"creation_date":1696609560,"answer_id":77246060,"question_id":59950270,"body_markdown":"I converted &quot;Kalpesh Rupani&#39;s&quot; answer to Kotlin as an Extension to Long, and it&#39;s working perfectly.\r\n        \r\n        \r\n    fun Long.relativeDate(): String {\r\n    val ONE_SECOND = 1000L\r\n    val ONE_MINUTE = 60000L\r\n    val ONE_HOUR = 3600000L\r\n    val ONE_DAY = 86400000L\r\n    val ONE_WEEK = 604800000L\r\n    val ONE_MONTH = 2592000000L\r\n    val ONE_YEAR = 31536000000L\r\n    //int gmtOffset = TimeZone.getDefault().getRawOffset()\r\n    val currentTime = System.currentTimeMillis()\r\n    val difference = currentTime - this\r\n    if (difference &lt; ONE_MINUTE) {\r\n        val timeAgo = difference / ONE_SECOND\r\n        return if (timeAgo &lt; 3 )\r\n            &quot;just now&quot;\r\n        else\r\n            &quot;$timeAgo seconds ago&quot;\r\n    } else if (difference &lt; ONE_HOUR) {\r\n        val timeAgo = difference / ONE_MINUTE\r\n        return if (timeAgo == 1L)\r\n            &quot;a minute ago&quot;\r\n        else\r\n            &quot;$timeAgo minutes ago&quot;\r\n    } else if (difference &lt; ONE_DAY) {\r\n        val timeAgo = difference / ONE_HOUR\r\n        return if (timeAgo == 1L )\r\n            &quot;an hour ago&quot;\r\n        else\r\n            &quot;$timeAgo hours ago&quot;\r\n    } else if (difference &lt; ONE_WEEK) {\r\n        val timeAgo = difference / ONE_DAY\r\n        return if (timeAgo == 1L )\r\n            &quot;yesterday&quot;\r\n        else\r\n            &quot;$timeAgo days ago&quot;\r\n    } else if (difference &lt; ONE_MONTH) {\r\n        val timeAgo = difference / ONE_WEEK\r\n        return if (timeAgo == 1L )\r\n            &quot;last week&quot;\r\n        else\r\n            &quot;$timeAgo weeks ago&quot;\r\n    } else if (difference &lt; ONE_YEAR) {\r\n        val timeAgo = difference / ONE_MONTH\r\n        return if (timeAgo == 1L )\r\n            &quot;last month&quot;\r\n        else\r\n            &quot;$timeAgo months ago&quot;\r\n    } else {\r\n        val timeAgo = difference / ONE_MONTH\r\n        return &quot;$timeAgo Months Ago&quot;\r\n    }\r\n}","title":"Converting a timestamp to relative time","body":"<p>I converted &quot;Kalpesh Rupani's&quot; answer to Kotlin as an Extension to Long, and it's working perfectly.</p>\n<pre><code>fun Long.relativeDate(): String {\nval ONE_SECOND = 1000L\nval ONE_MINUTE = 60000L\nval ONE_HOUR = 3600000L\nval ONE_DAY = 86400000L\nval ONE_WEEK = 604800000L\nval ONE_MONTH = 2592000000L\nval ONE_YEAR = 31536000000L\n//int gmtOffset = TimeZone.getDefault().getRawOffset()\nval currentTime = System.currentTimeMillis()\nval difference = currentTime - this\nif (difference &lt; ONE_MINUTE) {\n    val timeAgo = difference / ONE_SECOND\n    return if (timeAgo &lt; 3 )\n        &quot;just now&quot;\n    else\n        &quot;$timeAgo seconds ago&quot;\n} else if (difference &lt; ONE_HOUR) {\n    val timeAgo = difference / ONE_MINUTE\n    return if (timeAgo == 1L)\n        &quot;a minute ago&quot;\n    else\n        &quot;$timeAgo minutes ago&quot;\n} else if (difference &lt; ONE_DAY) {\n    val timeAgo = difference / ONE_HOUR\n    return if (timeAgo == 1L )\n        &quot;an hour ago&quot;\n    else\n        &quot;$timeAgo hours ago&quot;\n} else if (difference &lt; ONE_WEEK) {\n    val timeAgo = difference / ONE_DAY\n    return if (timeAgo == 1L )\n        &quot;yesterday&quot;\n    else\n        &quot;$timeAgo days ago&quot;\n} else if (difference &lt; ONE_MONTH) {\n    val timeAgo = difference / ONE_WEEK\n    return if (timeAgo == 1L )\n        &quot;last week&quot;\n    else\n        &quot;$timeAgo weeks ago&quot;\n} else if (difference &lt; ONE_YEAR) {\n    val timeAgo = difference / ONE_MONTH\n    return if (timeAgo == 1L )\n        &quot;last month&quot;\n    else\n        &quot;$timeAgo months ago&quot;\n} else {\n    val timeAgo = difference / ONE_MONTH\n    return &quot;$timeAgo Months Ago&quot;\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":8977382,"reputation":1204,"user_id":9993404,"display_name":"Victory"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":840,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59953043,"answer_count":3,"score":1,"last_activity_date":1696609560,"creation_date":1580219316,"question_id":59950270,"body_markdown":"I want convert **`timestamp` to relative time** using `Java` in `Android` like **`Facebook`**. I&#39;m using `android.text.format.DateUtils.getRelativeTimeSpanString()` but not getting expected result.\r\n\r\nMy code : \r\n\r\n    public static CharSequence  getTimeAgo(long timestamp) {\r\n\r\n        return DateUtils.getRelativeTimeSpanString(timestamp, System.currentTimeMillis(), DateUtils.SECOND_IN_MILLIS, DateUtils.FORMAT_ABBREV_RELATIVE);\r\n        \r\n    }\r\n\r\nResults : \r\n\r\n    5 sec ago\r\n    5 min ago\r\n    5 hr ago\r\n    5 days ago\r\n\r\nExpected results : \r\n\r\n    1 sec\r\n    5 secs\r\n    1 min\r\n    5 mins\r\n    1 hr\r\n    5 hrs\r\n    5 days\r\n    Yesterday at 11:48 pm\r\n    27 Jan at 6:52 pm\r\n    25 Aug 2019 at 7:53 pm\r\n\r\n","title":"Converting a timestamp to relative time","body":"<p>I want convert <strong><code>timestamp</code> to relative time</strong> using <code>Java</code> in <code>Android</code> like <strong><code>Facebook</code></strong>. I'm using <code>android.text.format.DateUtils.getRelativeTimeSpanString()</code> but not getting expected result.</p>\n\n<p>My code : </p>\n\n<pre><code>public static CharSequence  getTimeAgo(long timestamp) {\n\n    return DateUtils.getRelativeTimeSpanString(timestamp, System.currentTimeMillis(), DateUtils.SECOND_IN_MILLIS, DateUtils.FORMAT_ABBREV_RELATIVE);\n\n}\n</code></pre>\n\n<p>Results : </p>\n\n<pre><code>5 sec ago\n5 min ago\n5 hr ago\n5 days ago\n</code></pre>\n\n<p>Expected results : </p>\n\n<pre><code>1 sec\n5 secs\n1 min\n5 mins\n1 hr\n5 hrs\n5 days\nYesterday at 11:48 pm\n27 Jan at 6:52 pm\n25 Aug 2019 at 7:53 pm\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":1,"creation_date":1696607252,"post_id":77245780,"comment_id":136179381,"body_markdown":"You can try this regex: `\\&quot;[^\\&quot;]*\\&quot;|[-()\\[\\]+*/{}=]|\\w+`","body":"You can try this regex: <code>\\&quot;[^\\&quot;]*\\&quot;|[-()\\[\\]+*&#47;{}=]|\\w+</code>"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1696607392,"post_id":77245780,"comment_id":136179404,"body_markdown":"It sounds like you want a custom compiler","body":"It sounds like you want a custom compiler"},{"owner":{"account_id":18825500,"reputation":169,"user_id":13730499,"display_name":"Mahmoud Hany"},"score":1,"creation_date":1696607434,"post_id":77245780,"comment_id":136179413,"body_markdown":"@anubhava wow that was quick! I have no idea how it works but it seems to work perfectly, I should definitly learn more about regular expressions, thanks!","body":"@anubhava wow that was quick! I have no idea how it works but it seems to work perfectly, I should definitly learn more about regular expressions, thanks!"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1696610310,"post_id":77245780,"comment_id":136179959,"body_markdown":"regular expressions work well if you can find and express strict rules. General tokenization has so many exceptions and special rules that you probably wouldn&#39;t use that here. E.g. usually you&#39;ll have some form of escaping, `&quot;SomeStr=\\&quot;123\\&quot;&quot;(something)` , maybe a syntax to span your string across multiple lines, ..","body":"regular expressions work well if you can find and express strict rules. General tokenization has so many exceptions and special rules that you probably wouldn&#39;t use that here. E.g. usually you&#39;ll have some form of escaping, <code>&quot;SomeStr=\\&quot;123\\&quot;&quot;(something)</code> , maybe a syntax to span your string across multiple lines, .."}],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1696608084,"creation_date":1696608084,"answer_id":77245908,"question_id":77245780,"body_markdown":"You can write a regex that matches quoted first as the first alternative before matching symbols and words like this:\r\n\r\n```sh\r\n\\&quot;[^\\&quot;]*\\&quot;|[-()\\[\\]+*/{}=]|\\w+\r\n```\r\n\r\n[RegEx Demo][1]\r\n\r\n**RegEx Details:**\r\n\r\n- `\\&quot;[^\\&quot;]*\\&quot;`: Match quoted text\r\n- `|`: OR\r\n- `[-()\\[\\]+*/{}=]`: Match a given symbol\r\n- `|`: OR\r\n- `\\w+`: Match 1+ word characters\r\n\r\n\r\nIf you want to allow escaped quotes then use:\r\n\r\n```sh\r\n\\&quot;[^\\&quot;\\\\]*(?:\\\\.[^\\&quot;\\\\]*)*\\&quot;|[-()\\[\\]+*/{}=]|\\w+\r\n```\r\n\r\n[RegEx Demo 2][2]\r\n\r\n\r\n  [1]: https://regex101.com/r/GyW6d2/1\r\n  [2]: https://regex101.com/r/GyW6d2/2","title":"Add exception to regular expression if it happens to be between quotation marks?","body":"<p>You can write a regex that matches quoted first as the first alternative before matching symbols and words like this:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>\\&quot;[^\\&quot;]*\\&quot;|[-()\\[\\]+*/{}=]|\\w+\n</code></pre>\n<p><a href=\"https://regex101.com/r/GyW6d2/1\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n<p><strong>RegEx Details:</strong></p>\n<ul>\n<li><code>\\&quot;[^\\&quot;]*\\&quot;</code>: Match quoted text</li>\n<li><code>|</code>: OR</li>\n<li><code>[-()\\[\\]+*/{}=]</code>: Match a given symbol</li>\n<li><code>|</code>: OR</li>\n<li><code>\\w+</code>: Match 1+ word characters</li>\n</ul>\n<p>If you want to allow escaped quotes then use:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>\\&quot;[^\\&quot;\\\\]*(?:\\\\.[^\\&quot;\\\\]*)*\\&quot;|[-()\\[\\]+*/{}=]|\\w+\n</code></pre>\n<p><a href=\"https://regex101.com/r/GyW6d2/2\" rel=\"nofollow noreferrer\">RegEx Demo 2</a></p>\n"}],"owner":{"account_id":18825500,"reputation":169,"user_id":13730499,"display_name":"Mahmoud Hany"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77245908,"answer_count":1,"score":0,"last_activity_date":1696608084,"creation_date":1696606935,"question_id":77245780,"body_markdown":"I&#39;m writing a java application where I&#39;m trying to seperate tokens from each other given a string using regular expressions. the regular expression should seperate symbols (+ - / * = and any kind of brackets) from other things like letters and numbers, however I want to add an exception where it wouldn&#39;t seperate these symbols if they happen to be between quotation marks as in a string literal\r\n\r\nhere is the regular expression I currently have:\r\n`([a-zA-Z0-9&quot;]+|[\\(\\)\\[\\]\\+\\-\\*\\/\\{\\}=])`\r\nthis pattern gives me different matches and I process each match as a seperate token\r\n\r\nif I use this on this example string: `&quot;SomeStr=123&quot;(something)` (including the quotation marks) what I get is these tokens: `[&quot;SomeStr, =, 123&quot;, (, something, )]`\r\n\r\nwhat I want to get is:`[&quot;SomeStr=123&quot;, (, something, )]`\r\n\r\n\r\nthe pattern should only seperate the symbols if they were between quotation marks (with the fact that the quotation marks won&#39;t always be directly behind/infront of the symbol)\r\nis there a way I can do this in the regex?\r\n\r\nFYI I&#39;m trying to do this to make a tokenizer for educational purposes, perhaps using regex isn&#39;t the best way to do this?","title":"Add exception to regular expression if it happens to be between quotation marks?","body":"<p>I'm writing a java application where I'm trying to seperate tokens from each other given a string using regular expressions. the regular expression should seperate symbols (+ - / * = and any kind of brackets) from other things like letters and numbers, however I want to add an exception where it wouldn't seperate these symbols if they happen to be between quotation marks as in a string literal</p>\n<p>here is the regular expression I currently have:\n<code>([a-zA-Z0-9&quot;]+|[\\(\\)\\[\\]\\+\\-\\*\\/\\{\\}=])</code>\nthis pattern gives me different matches and I process each match as a seperate token</p>\n<p>if I use this on this example string: <code>&quot;SomeStr=123&quot;(something)</code> (including the quotation marks) what I get is these tokens: <code>[&quot;SomeStr, =, 123&quot;, (, something, )]</code></p>\n<p>what I want to get is:<code>[&quot;SomeStr=123&quot;, (, something, )]</code></p>\n<p>the pattern should only seperate the symbols if they were between quotation marks (with the fact that the quotation marks won't always be directly behind/infront of the symbol)\nis there a way I can do this in the regex?</p>\n<p>FYI I'm trying to do this to make a tokenizer for educational purposes, perhaps using regex isn't the best way to do this?</p>\n"},{"tags":["java","maven","maven-3","maven-surefire-plugin"],"answers":[{"comments":[{"owner":{"account_id":1535484,"reputation":4254,"user_id":2365727,"accept_rate":88,"display_name":"michaldo"},"score":0,"creation_date":1506693330,"post_id":46490011,"comment_id":79935122,"body_markdown":"I don&#39;t see where is &quot;APPEND the original value&quot; in your solution","body":"I don&#39;t see where is &quot;APPEND the original value&quot; in your solution"},{"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"score":2,"creation_date":1506694082,"post_id":46490011,"comment_id":79935601,"body_markdown":"That is the way how you can APPEND that value. Define argLine as a property instead of add it directly to the plugin.","body":"That is the way how you can APPEND that value. Define argLine as a property instead of add it directly to the plugin."},{"owner":{"account_id":1535484,"reputation":4254,"user_id":2365727,"accept_rate":88,"display_name":"michaldo"},"score":0,"creation_date":1506884552,"post_id":46490011,"comment_id":79985857,"body_markdown":"When I read &quot;APPEND&quot;, I expect in one place &quot;-Dfoo=bar&quot; in second place &quot;-Dalpha=beta&quot; and there is a way to get &quot;-Dfoo=bar -Dalpha=beta&quot;. You described how to REPLACE, not how to APPEND. Moreover, you wrote &quot;Do not define argLine between the &lt;configuration&gt; tags:&quot;. Why not? User property &quot;argLine&quot; precedes plugin property &quot;argLine&quot;. Maybe your answer is correct, but please provide concrete example: default configuration with jacoco and solution how to add &quot;some extra value&quot; and preserve jacoco settings. What I see now is only moving &quot;argLine&quot; from plugin configuration to build property.","body":"When I read &quot;APPEND&quot;, I expect in one place &quot;-Dfoo=bar&quot; in second place &quot;-Dalpha=beta&quot; and there is a way to get &quot;-Dfoo=bar -Dalpha=beta&quot;. You described how to REPLACE, not how to APPEND. Moreover, you wrote &quot;Do not define argLine between the &lt;configuration&gt; tags:&quot;. Why not? User property &quot;argLine&quot; precedes plugin property &quot;argLine&quot;. Maybe your answer is correct, but please provide concrete example: default configuration with jacoco and solution how to add &quot;some extra value&quot; and preserve jacoco settings. What I see now is only moving &quot;argLine&quot; from plugin configuration to build property."},{"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"score":0,"creation_date":1506975122,"post_id":46490011,"comment_id":80020723,"body_markdown":"That is an APPEND. Have you checked the official documentation? It says : &quot;late replacement&quot;. http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#argLine","body":"That is an APPEND. Have you checked the official documentation? It says : &quot;late replacement&quot;. <a href=\"http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#argLine\" rel=\"nofollow noreferrer\">maven.apache.org/surefire/maven-surefire-plugin/&hellip;</a>"},{"owner":{"account_id":1535484,"reputation":4254,"user_id":2365727,"accept_rate":88,"display_name":"michaldo"},"score":0,"creation_date":1507012053,"post_id":46490011,"comment_id":80031032,"body_markdown":"I&#39;m confused, maybe I misundestand something. Could you increase answer readability. For example, a paragraph starts with &quot;Do not define argLine ..&quot; and below is snippet with &quot;&lt;argLine&gt;...&lt;/argLine&gt;&quot;. Is the snippet positive or negative example? I think the best solution is more concrete answer, with sample jacoco setting and way to add extra value. Moreover, your mention in comment about &quot;late replacement&quot; but your answer does not use syntax @{}","body":"I&#39;m confused, maybe I misundestand something. Could you increase answer readability. For example, a paragraph starts with &quot;Do not define argLine ..&quot; and below is snippet with &quot;&lt;argLine&gt;...&lt;/argLine&gt;&quot;. Is the snippet positive or negative example? I think the best solution is more concrete answer, with sample jacoco setting and way to add extra value. Moreover, your mention in comment about &quot;late replacement&quot; but your answer does not use syntax @{}"},{"owner":{"account_id":1535484,"reputation":4254,"user_id":2365727,"accept_rate":88,"display_name":"michaldo"},"score":0,"creation_date":1507843884,"post_id":46490011,"comment_id":80384962,"body_markdown":"I still have some problem with the solution. I applied the solution and I got error reported in https://issues.apache.org/jira/browse/SUREFIRE-1431. The JIRA issue is resolved by as not-a-bug, but I don&#39;t understand answer. Zappee, is your solution working only together with jacoco plugin?","body":"I still have some problem with the solution. I applied the solution and I got error reported in <a href=\"https://issues.apache.org/jira/browse/SUREFIRE-1431\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/SUREFIRE-1431</a>. The JIRA issue is resolved by as not-a-bug, but I don&#39;t understand answer. Zappee, is your solution working only together with jacoco plugin?"},{"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"score":0,"creation_date":1507877287,"post_id":46490011,"comment_id":80394262,"body_markdown":"I do not use jacoco plugin, sorry.","body":"I do not use jacoco plugin, sorry."},{"owner":{"account_id":3156329,"reputation":5805,"user_id":2668666,"accept_rate":76,"display_name":"jmrah"},"score":2,"creation_date":1563539313,"post_id":46490011,"comment_id":100743800,"body_markdown":"I can also confirm that ${argline} also worked for me.  I wonder if newer versions of Maven changed the behaviour of ${...}?","body":"I can also confirm that ${argline} also worked for me.  I wonder if newer versions of Maven changed the behaviour of ${...}?"}],"tags":[],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"comment_count":8,"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1507067557,"creation_date":1506692243,"answer_id":46490011,"question_id":46489455,"body_markdown":"The official documentation calls that [late replacement][1].\r\n\r\nIf you do the following you will overwrite the value of the `argLine` parameter which is set by another plugins before, so **DO NOT DO THIS:**\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;argLine&gt;-D... -D...&lt;/argLine&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nThe proper way to keep the existing values and add your configuration is to use `@{...}` syntax:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;argLine&gt;@{argLine} -D... -D...&lt;/argLine&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nOR you can set `argLine` as a `property` in your `pom.xml` file:\r\n\r\n    &lt;properties&gt;\r\n        &lt;argLine&gt;-DCRR.Webservice.isSimulated=true -D...&lt;/argLine&gt;\r\n    &lt;/properties&gt;\r\n\r\n\r\nBoth solutions above works properly.\r\n\r\n  [1]: http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#argLine","title":"Append the value of argLine param in maven-surefire-plugin","body":"<p>The official documentation calls that <a href=\"http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#argLine\" rel=\"noreferrer\">late replacement</a>.</p>\n\n<p>If you do the following you will overwrite the value of the <code>argLine</code> parameter which is set by another plugins before, so <strong>DO NOT DO THIS:</strong></p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;argLine&gt;-D... -D...&lt;/argLine&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>The proper way to keep the existing values and add your configuration is to use <code>@{...}</code> syntax:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;argLine&gt;@{argLine} -D... -D...&lt;/argLine&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>OR you can set <code>argLine</code> as a <code>property</code> in your <code>pom.xml</code> file:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;argLine&gt;-DCRR.Webservice.isSimulated=true -D...&lt;/argLine&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>Both solutions above works properly.</p>\n"},{"tags":[],"owner":{"account_id":25143265,"reputation":1,"user_id":18989383,"display_name":"nicolasdh.92"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651234980,"creation_date":1651234980,"answer_id":72057919,"question_id":46489455,"body_markdown":"Thanks!\r\n\r\nIn my case it was:\r\n\r\n    &lt;argLine&gt;${tycho.testArgLine} -D...&lt;/argLine&gt;","title":"Append the value of argLine param in maven-surefire-plugin","body":"<p>Thanks!</p>\n<p>In my case it was:</p>\n<pre><code>&lt;argLine&gt;${tycho.testArgLine} -D...&lt;/argLine&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1668438587,"creation_date":1668438587,"answer_id":74433823,"question_id":46489455,"body_markdown":"**Update** for `Apache Maven 3.8.3`.\r\n\r\nIn my case only combination of both @zapee suggestions works, in other words it&#39;s important to add `&lt;argLine/&gt;` to `&lt;properties&gt;` and `@{argLine}` to configuration section. Example:\r\n\r\n```xml\r\n&lt;properties&gt;\r\n  &lt;!--  This is required for later correct replacement of argline --&gt;\r\n  &lt;argLine/&gt;\r\n&lt;/properties&gt;\r\n...\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n  &lt;configuration&gt;\r\n    &lt;argLine&gt;@{argLine} -D... -D...&lt;/argLine&gt; \r\n  &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nHope, it helps somebody.","title":"Append the value of argLine param in maven-surefire-plugin","body":"<p><strong>Update</strong> for <code>Apache Maven 3.8.3</code>.</p>\n<p>In my case only combination of both @zapee suggestions works, in other words it's important to add <code>&lt;argLine/&gt;</code> to <code>&lt;properties&gt;</code> and <code>@{argLine}</code> to configuration section. Example:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n  &lt;!--  This is required for later correct replacement of argline --&gt;\n  &lt;argLine/&gt;\n&lt;/properties&gt;\n...\n&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;argLine&gt;@{argLine} -D... -D...&lt;/argLine&gt; \n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Hope, it helps somebody.</p>\n"},{"tags":[],"owner":{"account_id":14883214,"reputation":27,"user_id":10747165,"display_name":"Ben Trono"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696607808,"creation_date":1696607808,"answer_id":77245875,"question_id":46489455,"body_markdown":"There&#39;s a difference between using ${} and @{}.\r\n\r\n`${}` is used by maven to do property replacement, which is done before any plugin is run.\r\n\r\n`@{}` is used by the maven surefire plugin as of Version 2.17 and allows for &quot;late replacement&quot; of properties when the the surefire plugin is executed,  so properties that have been modified by other plugins will be picked up correctly.\r\n\r\n[reference][1]\r\n\r\n\r\n  [1]: https://maven.apache.org/surefire/maven-surefire-plugin/faq.html#late-property-evaluation","title":"Append the value of argLine param in maven-surefire-plugin","body":"<p>There's a difference between using ${} and @{}.</p>\n<p><code>${}</code> is used by maven to do property replacement, which is done before any plugin is run.</p>\n<p><code>@{}</code> is used by the maven surefire plugin as of Version 2.17 and allows for &quot;late replacement&quot; of properties when the the surefire plugin is executed,  so properties that have been modified by other plugins will be picked up correctly.</p>\n<p><a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/faq.html#late-property-evaluation\" rel=\"nofollow noreferrer\">reference</a></p>\n"}],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36903,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":46490011,"answer_count":4,"score":23,"last_activity_date":1696607808,"creation_date":1506690333,"question_id":46489455,"body_markdown":"I am using `maven-surefire-plugin` + `Sonar` together and I would like to add some extra value to `argLine` parameter of the maven-surefire-plugin.\r\n\r\nSo I did it:\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.20.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;argLine&gt;-DCRR.Webservice.isSimulated=true -D...&lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            ...\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nBut in this case I am overwriting the original value of the `argLine` parameter and Sonar does not generate jacoco.exec file.\r\n\r\nI can see in the maven debug log (-X) that the value of argLine param without overwriting its value is `-javaagent:/opt/jenkins/.../myproject-SONAR/.repository/org/jacoco/org.jacoco.agent/0.7.4.201502262128/org.jacoco.agent-0.7.4.201502262128-runtime.jar=destfile=/opt/jenkins/.../myproject-SONAR/target/jacoco.exec`.\r\n\r\nWhat is the proper way to APPEND the original value of this parameter (keep the original + add extra values)?\r\n\r\nI am using Apache Maven 3.5.0, Java version: 1.8.0_131, vendor: Oracle Corporation.\r\n","title":"Append the value of argLine param in maven-surefire-plugin","body":"<p>I am using <code>maven-surefire-plugin</code> + <code>Sonar</code> together and I would like to add some extra value to <code>argLine</code> parameter of the maven-surefire-plugin.</p>\n\n<p>So I did it:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.20.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;argLine&gt;-DCRR.Webservice.isSimulated=true -D...&lt;/argLine&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        ...\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>But in this case I am overwriting the original value of the <code>argLine</code> parameter and Sonar does not generate jacoco.exec file.</p>\n\n<p>I can see in the maven debug log (-X) that the value of argLine param without overwriting its value is <code>-javaagent:/opt/jenkins/.../myproject-SONAR/.repository/org/jacoco/org.jacoco.agent/0.7.4.201502262128/org.jacoco.agent-0.7.4.201502262128-runtime.jar=destfile=/opt/jenkins/.../myproject-SONAR/target/jacoco.exec</code>.</p>\n\n<p>What is the proper way to APPEND the original value of this parameter (keep the original + add extra values)?</p>\n\n<p>I am using Apache Maven 3.5.0, Java version: 1.8.0_131, vendor: Oracle Corporation.</p>\n"},{"tags":["java","inputstream","nonblocking","thread-local","java-21"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":4,"creation_date":1696577403,"post_id":77242529,"comment_id":136173559,"body_markdown":"Using virtual threads does not make code non-blocking, it just means that the carrier thread is available to do other work.","body":"Using virtual threads does not make code non-blocking, it just means that the carrier thread is available to do other work."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1696581551,"post_id":77242529,"comment_id":136174322,"body_markdown":"@MarkRotteveel Ok, you are right. But my question still remains. Which method is better/","body":"@MarkRotteveel Ok, you are right. But my question still remains. Which method is better/"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1696581739,"post_id":77242529,"comment_id":136174353,"body_markdown":"All the methods are blocking, because you are calling `get()`. Wrapping al that (or using an excutor that uses virtual threads) doesn&#39;t make it suddenly non-blocking. If you want it non-blocking yuo need to use a `CompletableFuture` throughout your stack. As Mark said if you use a virtual thread the actual platform thread will be able to do other work.","body":"All the methods are blocking, because you are calling <code>get()</code>. Wrapping al that (or using an excutor that uses virtual threads) doesn&#39;t make it suddenly non-blocking. If you want it non-blocking yuo need to use a <code>CompletableFuture</code> throughout your stack. As Mark said if you use a virtual thread the actual platform thread will be able to do other work."}],"answers":[{"comments":[{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1696583874,"post_id":77243122,"comment_id":136174729,"body_markdown":"Let&#39;s suppose I&#39;m the caller of the code and the goal is to not keep the carrier thread busy with my IO. I&#39;m OK with blocking code and don&#39;t mind to wait for the .get() to return.\nSince deserialize method is not IO (?) , the question is, should it be executed in  avirtual thread or not. Especially if it might use some thread locals. So maybe, it is better and safer just to call getResponse on a virtual thread to free the carrier thread and then continue the work on InputStream with the carrier thread","body":"Let&#39;s suppose I&#39;m the caller of the code and the goal is to not keep the carrier thread busy with my IO. I&#39;m OK with blocking code and don&#39;t mind to wait for the .get() to return. Since deserialize method is not IO (?) , the question is, should it be executed in  avirtual thread or not. Especially if it might use some thread locals. So maybe, it is better and safer just to call getResponse on a virtual thread to free the carrier thread and then continue the work on InputStream with the carrier thread"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1696584670,"post_id":77243122,"comment_id":136174869,"body_markdown":"This makes no sense. If you suspect the operation to block a carrier thread, there is no point in starting it in another virtual thread where it would block a carrier thread too. You are over-complicating things. If the underlying I/O operation has been adapted, it will release the carrier thread and there is nothing to worry about. If not, it will block a platform thread one way or another and there’s nothing you can do about it. Likewise, you can not change the fact that an actual computation has to run on a platform thread on a CPU core. So just use the straight-forward synchronous form.","body":"This makes no sense. If you suspect the operation to block a carrier thread, there is no point in starting it in another virtual thread where it would block a carrier thread too. You are over-complicating things. If the underlying I/O operation has been adapted, it will release the carrier thread and there is nothing to worry about. If not, it will block a platform thread one way or another and there’s nothing you can do about it. Likewise, you can not change the fact that an actual computation has to run on a platform thread on a CPU core. So just use the straight-forward synchronous form."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1696585857,"post_id":77243122,"comment_id":136175093,"body_markdown":"Its not about avoiding blocking, but efficient utilization of carrier threads, by executing IO operations in a virtual thread and let other requests use the freed carrier thread.","body":"Its not about avoiding blocking, but efficient utilization of carrier threads, by executing IO operations in a virtual thread and let other requests use the freed carrier thread."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1696586200,"post_id":77243122,"comment_id":136175148,"body_markdown":"And what if Gson used ThreadLocal (Jackson does), then calling the code in a virtual thread from outside would create a memory leak if deserialization would happen in a virtual thread, wouldn&#39;t it?","body":"And what if Gson used ThreadLocal (Jackson does), then calling the code in a virtual thread from outside would create a memory leak if deserialization would happen in a virtual thread, wouldn&#39;t it?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1696586691,"post_id":77243122,"comment_id":136175238,"body_markdown":"It’s the other way round. If your code uses thread locals and doesn’t clean them up, you have a memory leak with conventional thread pools. When you use a virtual thread per request, all thread locals will definitely die at the end of the request processing. And again, you are over-complicating things. There is nothing to gain from starting another virtual thread for the I/O operation.","body":"It’s the other way round. If your code uses thread locals and doesn’t clean them up, you have a memory leak with conventional thread pools. When you use a virtual thread per request, all thread locals will definitely die at the end of the request processing. And again, you are over-complicating things. There is nothing to gain from starting another virtual thread for the I/O operation."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1696588468,"post_id":77243122,"comment_id":136175532,"body_markdown":"I don&#39;t use a virtual thread per request. The rest of the code is not using virtual threads at all","body":"I don&#39;t use a virtual thread per request. The rest of the code is not using virtual threads at all"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1696589314,"post_id":77243122,"comment_id":136175691,"body_markdown":"Then, as said, you won’t get a benefit from virtual threads. The only way to get a benefit, is by using them in the intended way. In either case, whether your calling threat is virtual or not, there is no benefit in starting a new virtual thread in this situation. Your approach is like, after hearing that a van is better than a trolley, putting all stuff into a van and try to pull it like a trolley.","body":"Then, as said, you won’t get a benefit from virtual threads. The only way to get a benefit, is by using them in the intended way. In either case, whether your calling threat is virtual or not, there is no benefit in starting a new virtual thread in this situation. Your approach is like, after hearing that a van is better than a trolley, putting all stuff into a van and try to pull it like a trolley."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":1,"creation_date":1696590578,"post_id":77243122,"comment_id":136175932,"body_markdown":"Thanks for your answer. I&#39;m not really using virtual threads yet, but try to understand how they work and when to use them and avoid memory leaks because of thread locals. I should have created an example where the methodB would fetch 100 websites in parallel and combine them into one single return value. Then maybe virtual threads would make more sense, right?","body":"Thanks for your answer. I&#39;m not really using virtual threads yet, but try to understand how they work and when to use them and avoid memory leaks because of thread locals. I should have created an example where the methodB would fetch 100 websites in parallel and combine them into one single return value. Then maybe virtual threads would make more sense, right?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1696602256,"post_id":77243122,"comment_id":136178382,"body_markdown":"Yes, running 100 fetch operations in virtual threads makes sense. The “one virtual thread per fetch” approach is similar to the “one virtual thread per request” of the web server example. The code to initiate all fetches and wait for the result is the 1% of the code having to deal with with virtual threads while the code to do the actual fetch operation can be written like synchronous/blocking code.","body":"Yes, running 100 fetch operations in virtual threads makes sense. The “one virtual thread per fetch” approach is similar to the “one virtual thread per request” of the web server example. The code to initiate all fetches and wait for the result is the 1% of the code having to deal with with virtual threads while the code to do the actual fetch operation can be written like synchronous/blocking code."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":1,"creation_date":1696603950,"post_id":77243122,"comment_id":136178752,"body_markdown":"Ok, thanks. Then lets say I&#39;d use jackson for de-serialization, which is not yet loom-friendly. Would it be better to collect 100 large InputStreams and read them one by one outside of virtual threads or is there no benefit doing so, as reading an InputStream is IO and we have no choice but wait until jackson gets rid of thread locals?","body":"Ok, thanks. Then lets say I&#39;d use jackson for de-serialization, which is not yet loom-friendly. Would it be better to collect 100 large InputStreams and read them one by one outside of virtual threads or is there no benefit doing so, as reading an InputStream is IO and we have no choice but wait until jackson gets rid of thread locals?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1696604725,"post_id":77243122,"comment_id":136178904,"body_markdown":"Use the simplest implementation possible, as that’s what this feature is all about, the ability to write simple code. Keep in mind that 3rd party libraries (usually) settle on the JDK methods which have been adapted or will be adapted by the JDK team soon, so the ability to release the carrier thread on I/O is already there, even if the 3rd party library has not been adapted. Regarding the thread local variables, don’t overestimate their impact. It’s only a performance issue, if any, so try and measure…","body":"Use the simplest implementation possible, as that’s what this feature is all about, the ability to write simple code. Keep in mind that 3rd party libraries (usually) settle on the JDK methods which have been adapted or will be adapted by the JDK team soon, so the ability to release the carrier thread on I/O is already there, even if the 3rd party library has not been adapted. Regarding the thread local variables, don’t overestimate their impact. It’s only a performance issue, if any, so try and measure…"}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":11,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1696607508,"creation_date":1696582662,"answer_id":77243122,"question_id":77242529,"body_markdown":"There is no significant difference between your variants. Any method returning a fully constructed result, like a `List&lt;String&gt;`, is always a synchronous or blocking method, as there is no way around waiting for any required result of asynchronous or external evaluations, to construct the final result.\r\n\r\nAsynchronous methods have to return a `Future` or similar kind of promise object which allows them to return before the actual result has been computed. This requires the caller to be able to deal with this kind of result. When the caller has to return a fully constructed result to their caller, it brings you back to square one, as it again requires a blocking wait.\r\n\r\nSo this traditional asynchronous processing requires all processing steps to be implemented as asynchronous operations, chaining callbacks to defer the actual computation to when the inputs are available.\r\n\r\nThe point of [virtual threads][1] is that they do not require you to write such traditional asynchronous methods at all. You can write your operation in a synchronous way. To stay at your example,\r\n\r\n```java\r\nList&lt;String&gt; straightForward() throws IOException {\r\n    try(InputStream bigInputStream = getResponse()) {\r\n        return deserialize(bigInputStream);\r\n    }\r\n}\r\n```\r\n\r\nIt’s the *caller’s responsibility* to invoke your code within a virtual thread, to get the benefit. Or, maybe it’s better to say that it’s the caller’s choice to use your method just synchronous or within a virtual thread. But it’s also possible that the caller uses your method in a plain synchronous way but the caller’s caller arranged the call in a virtual thread.\r\n\r\nIn the best case, 99% of your code does not deal with threads or asynchronous APIs but is written straight-forwardly in a synchronous manner. Only the remaining 1% has to arrange the invocations in virtual threads, like the web server creating a virtual thread per request or such alike.\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/444","title":"Virtual thread for reading InputStream from HTTP response","body":"<p>There is no significant difference between your variants. Any method returning a fully constructed result, like a <code>List&lt;String&gt;</code>, is always a synchronous or blocking method, as there is no way around waiting for any required result of asynchronous or external evaluations, to construct the final result.</p>\n<p>Asynchronous methods have to return a <code>Future</code> or similar kind of promise object which allows them to return before the actual result has been computed. This requires the caller to be able to deal with this kind of result. When the caller has to return a fully constructed result to their caller, it brings you back to square one, as it again requires a blocking wait.</p>\n<p>So this traditional asynchronous processing requires all processing steps to be implemented as asynchronous operations, chaining callbacks to defer the actual computation to when the inputs are available.</p>\n<p>The point of <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">virtual threads</a> is that they do not require you to write such traditional asynchronous methods at all. You can write your operation in a synchronous way. To stay at your example,</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; straightForward() throws IOException {\n    try(InputStream bigInputStream = getResponse()) {\n        return deserialize(bigInputStream);\n    }\n}\n</code></pre>\n<p>It’s the <em>caller’s responsibility</em> to invoke your code within a virtual thread, to get the benefit. Or, maybe it’s better to say that it’s the caller’s choice to use your method just synchronous or within a virtual thread. But it’s also possible that the caller uses your method in a plain synchronous way but the caller’s caller arranged the call in a virtual thread.</p>\n<p>In the best case, 99% of your code does not deal with threads or asynchronous APIs but is written straight-forwardly in a synchronous manner. Only the remaining 1% has to arrange the invocations in virtual threads, like the web server creating a virtual thread per request or such alike.</p>\n"}],"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1696607508,"creation_date":1696576890,"question_id":77242529,"body_markdown":"With the java 21 one can convert a blocking IO code to non-blocking one by just executing it in a virtual thread.\r\n\r\nShould I simply wrap the HTTP call that returns an `InputStream` (as in method `nonBlockingA`), or would it be more efficient to also perform the reading and deserialization of the `InputStream` in a virtual thread (as in method `nonBlockingB`)?\r\n\r\nIn other words, is the reading of `InputStream` a blocking IO operation?\r\n\r\nKeep in mind that the response could be quite large, potentially containing more than 500,000 Strings.\r\nI&#39;m also not sure if the used libraries are using any ThreadLocals, which is not recommended with virtual threads\r\n\r\n```java\r\n\r\n@SuppressWarnings(&quot;unchecked&quot;)\r\nclass Request {\r\n    private final ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\r\n    private CloseableHttpClient httpApacheClient;\r\n\r\n    List&lt;String&gt; nonBlockingA() throws Exception {\r\n        InputStream bigInputStream = executorService.submit(this::getResponse).get();\r\n        return deserialize(bigInputStream);\r\n    }\r\n\r\n    List&lt;String&gt; nonBlockingB() throws Exception {\r\n        return executorService.submit(() -&gt; {\r\n            InputStream bigInputStream = getResponse();\r\n            return deserialize(bigInputStream);\r\n        }).get();\r\n    }\r\n\r\n    private InputStream getResponse() throws IOException {\r\n        return httpApacheClient.execute(new HttpGet(&quot;http://random/names/size/500000&quot;)).getEntity().getContent();\r\n    }\r\n\r\n    private static List&lt;String&gt; deserialize(InputStream body) throws IOException {\r\n        try (InputStreamReader reader = new InputStreamReader(body, UTF_8)) {\r\n            return new Gson().fromJson(reader, List.class);\r\n        }\r\n    }\r\n} \r\n```\r\n\r\n","title":"Virtual thread for reading InputStream from HTTP response","body":"<p>With the java 21 one can convert a blocking IO code to non-blocking one by just executing it in a virtual thread.</p>\n<p>Should I simply wrap the HTTP call that returns an <code>InputStream</code> (as in method <code>nonBlockingA</code>), or would it be more efficient to also perform the reading and deserialization of the <code>InputStream</code> in a virtual thread (as in method <code>nonBlockingB</code>)?</p>\n<p>In other words, is the reading of <code>InputStream</code> a blocking IO operation?</p>\n<p>Keep in mind that the response could be quite large, potentially containing more than 500,000 Strings.\nI'm also not sure if the used libraries are using any ThreadLocals, which is not recommended with virtual threads</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@SuppressWarnings(&quot;unchecked&quot;)\nclass Request {\n    private final ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\n    private CloseableHttpClient httpApacheClient;\n\n    List&lt;String&gt; nonBlockingA() throws Exception {\n        InputStream bigInputStream = executorService.submit(this::getResponse).get();\n        return deserialize(bigInputStream);\n    }\n\n    List&lt;String&gt; nonBlockingB() throws Exception {\n        return executorService.submit(() -&gt; {\n            InputStream bigInputStream = getResponse();\n            return deserialize(bigInputStream);\n        }).get();\n    }\n\n    private InputStream getResponse() throws IOException {\n        return httpApacheClient.execute(new HttpGet(&quot;http://random/names/size/500000&quot;)).getEntity().getContent();\n    }\n\n    private static List&lt;String&gt; deserialize(InputStream body) throws IOException {\n        try (InputStreamReader reader = new InputStreamReader(body, UTF_8)) {\n            return new Gson().fromJson(reader, List.class);\n        }\n    }\n} \n</code></pre>\n"},{"tags":["java","android","libgdx","rendering","flicker"],"comments":[{"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"score":0,"creation_date":1497271516,"post_id":44499779,"comment_id":75992860,"body_markdown":"Use breakpoints to see where you call the render/show method and actually draw your image.","body":"Use breakpoints to see where you call the render/show method and actually draw your image."},{"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"score":0,"creation_date":1497339894,"post_id":44499779,"comment_id":76022927,"body_markdown":"Could you elaborate what you mean? Is it the addAction method with the stage.getActionsRequestRendering() and Gdx.graphics.requestRendering() that is causing the flickering.","body":"Could you elaborate what you mean? Is it the addAction method with the stage.getActionsRequestRendering() and Gdx.graphics.requestRendering() that is causing the flickering."},{"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"score":0,"creation_date":1497340288,"post_id":44499779,"comment_id":76023202,"body_markdown":"What&#39;s this line `final Stage stage = this;` ? You never seem to use it.\n**edit**: your code has blatant compilation flaws, such as missing parenthesis. Could you double-check you didn&#39;t do an error pasting?","body":"What&#39;s this line <code>final Stage stage = this;</code> ? You never seem to use it. <b>edit</b>: your code has blatant compilation flaws, such as missing parenthesis. Could you double-check you didn&#39;t do an error pasting?"},{"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"score":0,"creation_date":1497346458,"post_id":44499779,"comment_id":76027269,"body_markdown":"With copy/paste some lines got cut off. The code should compile now.","body":"With copy/paste some lines got cut off. The code should compile now."},{"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"score":0,"creation_date":1497346709,"post_id":44499779,"comment_id":76027448,"body_markdown":"I thought so. And for the `final Stage stage = this;`? Why do you do that and `about.show( stage )` instead of passing `this` directly? Are you duplicating the stages?","body":"I thought so. And for the <code>final Stage stage = this;</code>? Why do you do that and <code>about.show( stage )</code> instead of passing <code>this</code> directly? Are you duplicating the stages?"},{"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"score":0,"creation_date":1497347412,"post_id":44499779,"comment_id":76027991,"body_markdown":"I use the &#39;final Stage stage = this&#39;  to save the reference. Its because im overriding the &#39;result( Object object );&#39; i cant use this in that method body. There are no duplicates of the stages.","body":"I use the &#39;final Stage stage = this&#39;  to save the reference. Its because im overriding the &#39;result( Object object );&#39; i cant use this in that method body. There are no duplicates of the stages."},{"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"score":0,"creation_date":1497529718,"post_id":44499779,"comment_id":76123555,"body_markdown":"@Nathan Did you try to run the code and could you confirm the bug?","body":"@Nathan Did you try to run the code and could you confirm the bug?"},{"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"score":0,"creation_date":1497530125,"post_id":44499779,"comment_id":76123844,"body_markdown":"No. I can&#39;t at my work (I have to modify the entire badlogic configuration, as we don&#39;t have direct access to the libs), and I forgot at home. I&#39;ll look it up this night or tomorrow.","body":"No. I can&#39;t at my work (I have to modify the entire badlogic configuration, as we don&#39;t have direct access to the libs), and I forgot at home. I&#39;ll look it up this night or tomorrow."}],"answers":[{"tags":[],"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511034195,"creation_date":1506008754,"answer_id":46348168,"question_id":44499779,"body_markdown":"For closure the solution was just to create a new SpriteBatch in the HUD class like this:\r\n\r\n    super( new ScalingViewport(\r\n        Scaling.stretch,\r\n        0.3f * Gdx.graphics.getWidth(),\r\n        0.3f * Gdx.graphics.getHeight(),\r\n        new OrthographicCamera() ),\r\n        new SpriteBatch()\r\n    );\r\nThe flickering didn&#39;t happen at all. The wiki explained that &quot;A SpriteBatch is a pretty heavy object so you should only ever have one in your program.&quot; so this is not recommended.","title":"Java gdxlib flickers when changing dialogs","body":"<p>For closure the solution was just to create a new SpriteBatch in the HUD class like this:</p>\n\n<pre><code>super( new ScalingViewport(\n    Scaling.stretch,\n    0.3f * Gdx.graphics.getWidth(),\n    0.3f * Gdx.graphics.getHeight(),\n    new OrthographicCamera() ),\n    new SpriteBatch()\n);\n</code></pre>\n\n<p>The flickering didn't happen at all. The wiki explained that \"A SpriteBatch is a pretty heavy object so you should only ever have one in your program.\" so this is not recommended.</p>\n"},{"tags":[],"owner":{"account_id":63479,"reputation":5810,"user_id":187883,"accept_rate":100,"display_name":"NateS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696606895,"creation_date":1696606895,"answer_id":77245777,"question_id":44499779,"body_markdown":"Most likely the color of the SpriteBatch is changed. Drawing code doesn&#39;t try to keep the color whatever it was previously because that would require a lot of unnecessary color changes. Set it to white before drawing the background or anything else.","title":"Java gdxlib flickers when changing dialogs","body":"<p>Most likely the color of the SpriteBatch is changed. Drawing code doesn't try to keep the color whatever it was previously because that would require a lot of unnecessary color changes. Set it to white before drawing the background or anything else.</p>\n"}],"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1696606895,"creation_date":1497271328,"question_id":44499779,"body_markdown":"Hello I have problems with flickering texture in libGdx. I have looked everywhere and I couldn&#39;t find a solution.\r\n\r\nThe texture only flickers when I&#39;m change dialogs with the show (Stage stage) method. There are basically 2 render calls. One from the render where I draw the texture and the second is the draw method in Stage class. \r\n\r\nThe first one shouldn&#39;t flicker when I&#39;m changing dialogs. This is very annoying and I don&#39;t know how to solve this.\r\n\r\nThe app class:\r\n\r\n    import com.badlogic.gdx.ApplicationListener;\r\n\timport com.badlogic.gdx.Gdx;\r\n\timport com.badlogic.gdx.graphics.Color;\r\n\timport com.badlogic.gdx.graphics.GL20;\r\n\timport com.badlogic.gdx.graphics.OrthographicCamera;\r\n\timport com.badlogic.gdx.graphics.Texture;\r\n\timport com.badlogic.gdx.graphics.g2d.BitmapFont;\r\n\timport com.badlogic.gdx.graphics.g2d.SpriteBatch;\r\n\timport com.badlogic.gdx.graphics.g2d.TextureRegion;\r\n\timport com.badlogic.gdx.scenes.scene2d.Stage;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Dialog;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Label.LabelStyle;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Skin;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Table;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.TextButton.TextButtonStyle;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Window.WindowStyle;\r\n\timport com.badlogic.gdx.scenes.scene2d.utils.Drawable;\r\n\timport com.badlogic.gdx.scenes.scene2d.utils.TextureRegionDrawable;\r\n\timport com.badlogic.gdx.utils.Scaling;\r\n\timport com.badlogic.gdx.utils.viewport.ScalingViewport;\r\n\timport com.badlogic.gdx.utils.viewport.StretchViewport;\r\n                               \r\n\tpublic class FlickerGame implements ApplicationListener {                                 \r\n\t\t                                                                                      \r\n\t\tprivate SpriteBatch batch;                                                            \r\n\t\tprivate StretchViewport viewport;                                                     \r\n\t\tprivate HUD hud;                                                                      \r\n\t\tprivate Texture texture;                                                              \r\n\t\tprivate BitmapFont font;                                                              \r\n\t                                                                                          \r\n\t\t@Override                                                                             \r\n\t\tpublic void create() {                                                                \r\n\t\t\t                                                                                  \r\n\t\t\t// use only one SpriteBatch in game                                           \r\n\t\t\tbatch = new SpriteBatch();                                                        \r\n\t\t\tviewport = new StretchViewport( Gdx.graphics.getWidth(), Gdx.graphics.getHeight() );\r\n\t\t\ttexture = new Texture( Gdx.files.local( &quot;badlogic.jpg&quot; ) );                       \r\n\t\t\tfont = new BitmapFont();                                                          \r\n\t\t\thud = new HUD( batch, getSkin() );                                                \r\n\t\t\t                                                                                  \r\n\t\t\tGdx.input.setInputProcessor( hud );                                               \r\n\t\t}                                                                                     \r\n\t                                                                                          \r\n\t\t@Override                                                                             \r\n\t\tpublic void dispose() {                                                               \r\n\t                                                                                          \r\n\t\t\tbatch.dispose();                                                                  \r\n\t\t\thud.dispose();                                                                    \r\n\t\t\ttexture.dispose();                                                                \r\n\t\t\tfont.dispose();                                                                   \r\n\t\t}                                                                                     \r\n\t                                                                                          \r\n\t\t@Override                                                                             \r\n\t\tpublic void resize( int width, int height ) {                                         \r\n\t\t\t                                                                                  \r\n\t\t\tviewport.update( width, height, true );                                           \r\n\t\t\thud.getViewport().update( width, height, true );                                  \r\n\t\t}                                                                                     \r\n\t                                                                                          \r\n\t\t@Override                                                                             \r\n\t\tpublic void render() {                                                                \r\n\t\t\t                                                                                  \r\n\t\t\tfloat delta = Gdx.graphics.getDeltaTime();                                        \r\n\t\t\t                                                                                  \r\n\t\t\tGdx.gl.glClearColor( 0, 0, 0, 1 );                                                \r\n\t\t\tGdx.gl.glClear( GL20.GL_COLOR_BUFFER_BIT );                                       \r\n\t\t\t                                                                                  \r\n\t\t\t// draw the texture on the whole screen                                           \r\n\t\t\tbatch.setProjectionMatrix( viewport.getCamera().combined );                       \r\n\t\t\tbatch.begin();                                                                    \r\n\t\t\tbatch.draw( texture, 0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight() );   \r\n\t\t\tbatch.end();                                                                      \r\n\t                                                                                          \r\n\t\t\thud.act( delta );                                                                 \r\n\t\t\thud.draw();                                                                       \r\n\t\t}                                                                                     \r\n\t                                                                                          \r\n\t\t@Override public void pause() {}                                                      \r\n\t\t@Override public void resume() {}                                                     \r\n\t\t                                                                                      \r\n\t\tprivate Skin getSkin(){                                                               \r\n\t\t\t                                                                                  \r\n\t\t\tSkin skin = new Skin();                                                           \r\n\t\t\t                                                                                  \r\n\t\t\t// just add a part of the badlogic.jpg as button looks awful its just for testing \r\n\t\t\tDrawable up = new TextureRegionDrawable( new TextureRegion( texture, 0, 0, 50, 8 ) );\r\n\t\t\t                                                                                  \r\n\t\t\tskin.add( DEFAULT, new WindowStyle( font, Color.WHITE, null ), WindowStyle.class );\r\n\t\t\tskin.add( DEFAULT, new LabelStyle( font, Color.WHITE ), LabelStyle.class );       \r\n\t\t\tskin.add( DEFAULT, new TextButtonStyle( up, null, null, font ), TextButtonStyle.class );\r\n\t\t\t                                                                                  \r\n\t\t\treturn skin;                                                                      \r\n\t\t}                                                                                     \r\n\t\t                                                                                      \r\n\t\tprivate static final String DEFAULT = &quot;default&quot;;                                      \r\n\t}                                                                                         \r\n\r\nThe HUD class where I implemented the Dialog.                                      \r\n\t                                                                                          \r\n\tclass HUD extends Stage {                                                                 \r\n\t\t                                                                                      \r\n\t\tprivate Dialog menu;                                                                  \r\n\t\tprivate Dialog about;                                                                 \r\n\t\tprivate Dialog exit;                                                                  \r\n\t\t                                                                                      \r\n\t\tpublic HUD( SpriteBatch batch, Skin skin ){                                           \r\n\t\t\t                                                                                  \r\n\t\t\tsuper( new ScalingViewport( Scaling.stretch, 0.3f * Gdx.graphics.getWidth(), 0.3f * Gdx.graphics.getHeight(), new OrthographicCamera() ), batch );\r\n\t\t\t                                                                                  \r\n\t\t\tfinal Stage stage = this;                                                         \r\n\t\t\t                                                                                  \r\n\t\t\tmenu = new Dialog( &quot;menu&quot;, skin ){                                                \r\n\t\t\t\t                                                                              \r\n\t\t\t\t@Override                                                                     \r\n\t\t\t\tpublic void result( Object object ){                                          \r\n\t\t\t\t\t                                                                          \r\n\t\t\t\t\tif ( object instanceof Integer ){                                         \r\n\t\t\t\t\t\tswitch ( (Integer) object ){                                          \r\n\t\t\t\t\t\t\tcase 0:                                                           \r\n\t\t\t\t\t\t\t\t// play button doesn&#39;t do anything at the moment              \r\n\t\t\t\t\t\t\t\tGdx.app.log( &quot;Button&quot;, &quot;play&quot; );                              \r\n\t\t\t\t\t\t\t\tbreak;                                                        \r\n\t\t\t\t\t\t\tcase 1: about.show( stage ); break;                               \r\n\t\t\t\t\t\t\tcase 2: exit.show( stage ); break;                                \r\n\t\t\t\t\t\t}                                                                     \r\n\t\t\t\t\t}                                                                         \r\n\t\t\t\t}                                                                             \r\n\t\t\t};                                                                                \r\n\t\t\tTable menuButtons = menu.getButtonTable();                                        \r\n\t\t\tmenu.button( &quot;play&quot;, 0 );                                                         \r\n\t\t\tmenuButtons.row();                                                                \r\n\t\t\tmenu.button( &quot;credits&quot;, 1 );                                                      \r\n\t\t\tmenuButtons.row();                                                                \r\n\t\t\tmenu.button( &quot;exit&quot;, 2 );                                                         \r\n\t\t\t                                                                                  \r\n\t\t\tabout = new Dialog( &quot;credits&quot;, skin ){                                            \r\n\t\t\t\t                                                                              \r\n\t\t\t\t@Override                                                                     \r\n\t\t\t\tpublic void result( Object object ){                                          \r\n\t\t\t\t\t                                                                          \r\n\t\t\t\t\tmenu.show( stage );                                                       \r\n\t\t\t\t}                                                                             \r\n\t\t\t};                                                                                \r\n\t\t\tabout.text( &quot;made by me!&quot; );                                                      \r\n\t\t\tabout.button( &quot;back&quot; );                                                           \r\n\t\t\t                                                                                  \r\n\t\t\texit = new Dialog( &quot;&quot;, skin ){                                                    \r\n\t\t\t\t                                                                              \r\n\t\t\t\t@Override                                                                     \r\n\t\t\t\tpublic void result( Object object ){                                          \r\n\t\t\t\t\t                                                                          \r\n\t\t\t\t\tif ( object instanceof Boolean ){                                         \r\n\t\t\t\t\t\tif ( (Boolean) object ){                                              \r\n\t\t\t\t\t\t\tGdx.app.exit();                                                   \r\n\t\t\t\t\t\t} else {                                                              \r\n\t\t\t\t\t\t\tmenu.show( stage );                                               \r\n\t\t\t\t\t\t}                                                                     \r\n\t\t\t\t\t}                                                                         \r\n\t\t\t\t}                                                                             \r\n\t\t\t};                                                                                \r\n\t\t\texit.text( &quot;Are you sure you want to exit?&quot; );                                    \r\n\t\t\texit.button( &quot;yes&quot;, true );                                                       \r\n\t\t\texit.button( &quot;no&quot;, false );                                                       \r\n\t\t\t                                                                                  \r\n\t\t\tmenu.show( this );                                                                \r\n\t\t}                                                                                     \r\n\t}                                                                                         \r\n                                                                                              ","title":"Java gdxlib flickers when changing dialogs","body":"<p>Hello I have problems with flickering texture in libGdx. I have looked everywhere and I couldn't find a solution.</p>\n\n<p>The texture only flickers when I'm change dialogs with the show (Stage stage) method. There are basically 2 render calls. One from the render where I draw the texture and the second is the draw method in Stage class. </p>\n\n<p>The first one shouldn't flicker when I'm changing dialogs. This is very annoying and I don't know how to solve this.</p>\n\n<p>The app class:</p>\n\n<pre><code>import com.badlogic.gdx.ApplicationListener;\nimport com.badlogic.gdx.Gdx;\nimport com.badlogic.gdx.graphics.Color;\nimport com.badlogic.gdx.graphics.GL20;\nimport com.badlogic.gdx.graphics.OrthographicCamera;\nimport com.badlogic.gdx.graphics.Texture;\nimport com.badlogic.gdx.graphics.g2d.BitmapFont;\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\nimport com.badlogic.gdx.graphics.g2d.TextureRegion;\nimport com.badlogic.gdx.scenes.scene2d.Stage;\nimport com.badlogic.gdx.scenes.scene2d.ui.Dialog;\nimport com.badlogic.gdx.scenes.scene2d.ui.Label.LabelStyle;\nimport com.badlogic.gdx.scenes.scene2d.ui.Skin;\nimport com.badlogic.gdx.scenes.scene2d.ui.Table;\nimport com.badlogic.gdx.scenes.scene2d.ui.TextButton.TextButtonStyle;\nimport com.badlogic.gdx.scenes.scene2d.ui.Window.WindowStyle;\nimport com.badlogic.gdx.scenes.scene2d.utils.Drawable;\nimport com.badlogic.gdx.scenes.scene2d.utils.TextureRegionDrawable;\nimport com.badlogic.gdx.utils.Scaling;\nimport com.badlogic.gdx.utils.viewport.ScalingViewport;\nimport com.badlogic.gdx.utils.viewport.StretchViewport;\n\npublic class FlickerGame implements ApplicationListener {                                 \n\n    private SpriteBatch batch;                                                            \n    private StretchViewport viewport;                                                     \n    private HUD hud;                                                                      \n    private Texture texture;                                                              \n    private BitmapFont font;                                                              \n\n    @Override                                                                             \n    public void create() {                                                                \n\n        // use only one SpriteBatch in game                                           \n        batch = new SpriteBatch();                                                        \n        viewport = new StretchViewport( Gdx.graphics.getWidth(), Gdx.graphics.getHeight() );\n        texture = new Texture( Gdx.files.local( \"badlogic.jpg\" ) );                       \n        font = new BitmapFont();                                                          \n        hud = new HUD( batch, getSkin() );                                                \n\n        Gdx.input.setInputProcessor( hud );                                               \n    }                                                                                     \n\n    @Override                                                                             \n    public void dispose() {                                                               \n\n        batch.dispose();                                                                  \n        hud.dispose();                                                                    \n        texture.dispose();                                                                \n        font.dispose();                                                                   \n    }                                                                                     \n\n    @Override                                                                             \n    public void resize( int width, int height ) {                                         \n\n        viewport.update( width, height, true );                                           \n        hud.getViewport().update( width, height, true );                                  \n    }                                                                                     \n\n    @Override                                                                             \n    public void render() {                                                                \n\n        float delta = Gdx.graphics.getDeltaTime();                                        \n\n        Gdx.gl.glClearColor( 0, 0, 0, 1 );                                                \n        Gdx.gl.glClear( GL20.GL_COLOR_BUFFER_BIT );                                       \n\n        // draw the texture on the whole screen                                           \n        batch.setProjectionMatrix( viewport.getCamera().combined );                       \n        batch.begin();                                                                    \n        batch.draw( texture, 0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight() );   \n        batch.end();                                                                      \n\n        hud.act( delta );                                                                 \n        hud.draw();                                                                       \n    }                                                                                     \n\n    @Override public void pause() {}                                                      \n    @Override public void resume() {}                                                     \n\n    private Skin getSkin(){                                                               \n\n        Skin skin = new Skin();                                                           \n\n        // just add a part of the badlogic.jpg as button looks awful its just for testing \n        Drawable up = new TextureRegionDrawable( new TextureRegion( texture, 0, 0, 50, 8 ) );\n\n        skin.add( DEFAULT, new WindowStyle( font, Color.WHITE, null ), WindowStyle.class );\n        skin.add( DEFAULT, new LabelStyle( font, Color.WHITE ), LabelStyle.class );       \n        skin.add( DEFAULT, new TextButtonStyle( up, null, null, font ), TextButtonStyle.class );\n\n        return skin;                                                                      \n    }                                                                                     \n\n    private static final String DEFAULT = \"default\";                                      \n}                                                                                         \n</code></pre>\n\n<p>The HUD class where I implemented the Dialog.                                      </p>\n\n<pre><code>class HUD extends Stage {                                                                 \n\n    private Dialog menu;                                                                  \n    private Dialog about;                                                                 \n    private Dialog exit;                                                                  \n\n    public HUD( SpriteBatch batch, Skin skin ){                                           \n\n        super( new ScalingViewport( Scaling.stretch, 0.3f * Gdx.graphics.getWidth(), 0.3f * Gdx.graphics.getHeight(), new OrthographicCamera() ), batch );\n\n        final Stage stage = this;                                                         \n\n        menu = new Dialog( \"menu\", skin ){                                                \n\n            @Override                                                                     \n            public void result( Object object ){                                          \n\n                if ( object instanceof Integer ){                                         \n                    switch ( (Integer) object ){                                          \n                        case 0:                                                           \n                            // play button doesn't do anything at the moment              \n                            Gdx.app.log( \"Button\", \"play\" );                              \n                            break;                                                        \n                        case 1: about.show( stage ); break;                               \n                        case 2: exit.show( stage ); break;                                \n                    }                                                                     \n                }                                                                         \n            }                                                                             \n        };                                                                                \n        Table menuButtons = menu.getButtonTable();                                        \n        menu.button( \"play\", 0 );                                                         \n        menuButtons.row();                                                                \n        menu.button( \"credits\", 1 );                                                      \n        menuButtons.row();                                                                \n        menu.button( \"exit\", 2 );                                                         \n\n        about = new Dialog( \"credits\", skin ){                                            \n\n            @Override                                                                     \n            public void result( Object object ){                                          \n\n                menu.show( stage );                                                       \n            }                                                                             \n        };                                                                                \n        about.text( \"made by me!\" );                                                      \n        about.button( \"back\" );                                                           \n\n        exit = new Dialog( \"\", skin ){                                                    \n\n            @Override                                                                     \n            public void result( Object object ){                                          \n\n                if ( object instanceof Boolean ){                                         \n                    if ( (Boolean) object ){                                              \n                        Gdx.app.exit();                                                   \n                    } else {                                                              \n                        menu.show( stage );                                               \n                    }                                                                     \n                }                                                                         \n            }                                                                             \n        };                                                                                \n        exit.text( \"Are you sure you want to exit?\" );                                    \n        exit.button( \"yes\", true );                                                       \n        exit.button( \"no\", false );                                                       \n\n        menu.show( this );                                                                \n    }                                                                                     \n}                                                                                         \n</code></pre>\n"},{"tags":["java","spring-boot","apache-kafka"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1694520072,"post_id":77088835,"comment_id":135898896,"body_markdown":"Depends on your use case. We don&#39;t have nearly enough information to answer that question.","body":"Depends on your use case. We don&#39;t have nearly enough information to answer that question."},{"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"score":0,"creation_date":1694524290,"post_id":77088835,"comment_id":135899888,"body_markdown":"@Jorn my use cas is just get the message from kafka &amp; persist it in the Database","body":"@Jorn my use cas is just get the message from kafka &amp; persist it in the Database"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1694524750,"post_id":77088835,"comment_id":135900005,"body_markdown":"If there&#39;s absolutely no other difference, then why add the extra indirection via a REST API? Just persist to the database.","body":"If there&#39;s absolutely no other difference, then why add the extra indirection via a REST API? Just persist to the database."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694524787,"post_id":77088835,"comment_id":135900017,"body_markdown":"It&#39;s like asking: &quot;I need bread, should I drive to the bakery directly or through the next town over?&quot;","body":"It&#39;s like asking: &quot;I need bread, should I drive to the bakery directly or through the next town over?&quot;"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1694524827,"post_id":77088835,"comment_id":135900027,"body_markdown":"You could use Kafka Connect instead of writing your own Java/Spring code, by the way","body":"You could use Kafka Connect instead of writing your own Java/Spring code, by the way"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1694525033,"post_id":77088835,"comment_id":135900092,"body_markdown":"If you control the code of that REST API, you could also put your consumer there instead of making any HTTP calls","body":"If you control the code of that REST API, you could also put your consumer there instead of making any HTTP calls"},{"owner":{"account_id":22650899,"reputation":355,"user_id":16825573,"display_name":"Lejdi Prifti"},"score":1,"creation_date":1694525347,"post_id":77088835,"comment_id":135900196,"body_markdown":"Just persist on database, keep it simple.","body":"Just persist on database, keep it simple."},{"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"score":0,"creation_date":1694526548,"post_id":77088835,"comment_id":135900506,"body_markdown":"@Jorn im asking the question becaue i have already the API developped that persist the object.and i want to know if i could use it instead of developping all the layers Entity,repository,service.. plus datasource conf in my kafka consumer","body":"@Jorn im asking the question becaue i have already the API developped that persist the object.and i want to know if i could use it instead of developping all the layers Entity,repository,service.. plus datasource conf in my kafka consumer"},{"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"score":0,"creation_date":1694526810,"post_id":77088835,"comment_id":135900586,"body_markdown":"@OneCricketeer yes i have the control on the api project. it&#39;s a good practise to combine api (synchronous call) &amp; kafka (asynchronous call) in the same project ?","body":"@OneCricketeer yes i have the control on the api project. it&#39;s a good practise to combine api (synchronous call) &amp; kafka (asynchronous call) in the same project ?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1694526932,"post_id":77088835,"comment_id":135900613,"body_markdown":"Still, how do you expect *us* to make that choice? Either option is viable. *You* need to pick one based on requirements.","body":"Still, how do you expect <i>us</i> to make that choice? Either option is viable. <i>You</i> need to pick one based on requirements."},{"owner":{"account_id":1662914,"reputation":332,"user_id":1530849,"display_name":"talipkorkmaz"},"score":1,"creation_date":1694527045,"post_id":77088835,"comment_id":135900653,"body_markdown":"Follow S of SOLID principle, let the HTTP API manage the lifecycle of the entity if it&#39;s built for that. But I&#39;m very skeptical about your architecture in terms of domain responsibility segregation.","body":"Follow S of SOLID principle, let the HTTP API manage the lifecycle of the entity if it&#39;s built for that. But I&#39;m very skeptical about your architecture in terms of domain responsibility segregation."},{"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"score":0,"creation_date":1694527459,"post_id":77088835,"comment_id":135900765,"body_markdown":"@Jorn my question was clear : if the both solutions are valid or not or i could choose one instead of the other. not asking you to choice at my place. regards","body":"@Jorn my question was clear : if the both solutions are valid or not or i could choose one instead of the other. not asking you to choice at my place. regards"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1694527496,"post_id":77088835,"comment_id":135900774,"body_markdown":"It&#39;s a practice commonly done. Good or not, we cannot decide for you. Kafka Steams can be both a REST API and processor (see docs on Interactive Queries), for example. Similarly for ksqlDB","body":"It&#39;s a practice commonly done. Good or not, we cannot decide for you. Kafka Steams can be both a REST API and processor (see docs on Interactive Queries), for example. Similarly for ksqlDB"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694529899,"post_id":77088835,"comment_id":135901361,"body_markdown":"@James I&#39;m going to repeat myself because it&#39;s important to get this point across: There is no &quot;best&quot; choice in a vacuum. And since you haven&#39;t defined any parameters, there&#39;s not much we can do for you. And that&#39;s why all answers here are pure speculation.","body":"@James I&#39;m going to repeat myself because it&#39;s important to get this point across: There is no &quot;best&quot; choice in a vacuum. And since you haven&#39;t defined any parameters, there&#39;s not much we can do for you. And that&#39;s why all answers here are pure speculation."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1696606837,"creation_date":1694527728,"answer_id":77089916,"question_id":77088835,"body_markdown":"Think about your problem in terms of availability and consistency. \r\n\r\nWhat happens if the database is unreachable (say, it&#39;s going through an upgrade), then will you end up losing events? In that scenario, a highly available HTTP API seems like a better choice.\r\n\r\nAlternatively, you&#39;ve not mentioned what the API actually does with the record. Is it writing to the same database? If so, you&#39;re only adding latency to any process that reads from the database (eventual consistency). In that case, directly writing to the database would be quicker, with the tradeoff of availability, mentioned above, which could be addressed by running a distributed database cluster.\r\n\r\nYou could alternatively use Kafka Streams to create a RocksDB table on disk, rather than use JPA. ","title":"Kafka consumer Spring Data or Http REST API","body":"<p>Think about your problem in terms of availability and consistency.</p>\n<p>What happens if the database is unreachable (say, it's going through an upgrade), then will you end up losing events? In that scenario, a highly available HTTP API seems like a better choice.</p>\n<p>Alternatively, you've not mentioned what the API actually does with the record. Is it writing to the same database? If so, you're only adding latency to any process that reads from the database (eventual consistency). In that case, directly writing to the database would be quicker, with the tradeoff of availability, mentioned above, which could be addressed by running a distributed database cluster.</p>\n<p>You could alternatively use Kafka Streams to create a RocksDB table on disk, rather than use JPA.</p>\n"}],"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"comment_count":14,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1694530051,"accepted_answer_id":77089916,"answer_count":1,"score":-3,"last_activity_date":1696606837,"creation_date":1694519482,"question_id":77088835,"body_markdown":"\r\n\r\nI have the choice to persist a Kafka message in database directly using Spring Data JPA, or make an HTTP POST call to another REST API after consuming. \r\n\r\nCould you please tell me what&#39;s the best choice? ","title":"Kafka consumer Spring Data or Http REST API","body":"<p>I have the choice to persist a Kafka message in database directly using Spring Data JPA, or make an HTTP POST call to another REST API after consuming.</p>\n<p>Could you please tell me what's the best choice?</p>\n"},{"tags":["java","spring","spring-mvc","spring-webclient"],"answers":[{"comments":[{"owner":{"account_id":5640896,"reputation":187,"user_id":4464806,"display_name":"Abhinash Jha"},"score":0,"creation_date":1696610994,"post_id":77245759,"comment_id":136180084,"body_markdown":"I updated the code as above. But, now I keep getting below error\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.reactive.function.client.WebClient]: Factory method &#39;webClient&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"I updated the code as above. But, now I keep getting below error Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.reactive.function.client.WebClient]&zwnj;&#8203;: Factory method &#39;webClient&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionExceptio&zwnj;&#8203;n"},{"owner":{"account_id":5640896,"reputation":187,"user_id":4464806,"display_name":"Abhinash Jha"},"score":0,"creation_date":1696611034,"post_id":77245759,"comment_id":136180093,"body_markdown":"Also, I tried something present here: https://docs.spring.io/spring-framework/reference/web/webflux-webclient/client-builder.html#:~:text=create().secure(sslSpec%20%2D%3E%20...)%3B-,WebClient%20webClient%20%3D%20WebClient.builder()%0A%09%09.clientConnector(new%20ReactorClientHttpConnector(httpClient))%0A%09%09.build()%3B,-Copied!\nbut the same error as posted in comment above.","body":"Also, I tried something present here: <a href=\"https://docs.spring.io/spring-framework/reference/web/webflux-webclient/client-builder.html#:~:text=create().secure(sslSpec%20%2D%3E%20...)%3B-,WebClient%20webClient%20%3D%20WebClient.builder()%0A%09%09.clientConnector(new%20ReactorClientHttpConnector(httpClient))%0A%09%09.build()%3B,-Copied\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/reference/web/webflux-webcli&zwnj;&#8203;ent/&hellip;</a>! but the same error as posted in comment above."},{"owner":{"account_id":5640896,"reputation":187,"user_id":4464806,"display_name":"Abhinash Jha"},"score":0,"creation_date":1696613151,"post_id":77245759,"comment_id":136180465,"body_markdown":"I just had to add jackson-databind dependency, and it worked.","body":"I just had to add jackson-databind dependency, and it worked."}],"tags":[],"owner":{"account_id":9503455,"reputation":36,"user_id":7063755,"display_name":"Alessandro Lacchi"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696606830,"creation_date":1696606650,"answer_id":77245759,"question_id":77245554,"body_markdown":"it seems that you are not initializing the connector, as you can see from the official spring documentation you need the connector instatiated before plug in the builder (a direct dependency injection of spring for the connector does not seem advisable):\r\n\r\n    @Bean\r\n    public JettyResourceFactory resourceFactory() {\r\n    \treturn new JettyResourceFactory();\r\n    }\r\n    \r\n        @Bean\r\n    public WebClient webClient() {\r\n    \r\n    \tHttpClient httpClient = new HttpClient();\r\n    \t// Further customizations...\r\n    \r\n    \tClientHttpConnector connector =\r\n    \t\t\tnew JettyClientHttpConnector(httpClient, resourceFactory()); \r\n    \r\n    \treturn WebClient.builder().clientConnector(connector).build(); \r\n    }\r\n\r\nhere you can find the documentation: [Client-builder][1]\r\n\r\nI hope it was helpful to you.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/web/webflux-webclient/client-builder.html","title":"Error &quot;No qualifying bean of type &#39;org.springframework.http.client.reactive.ClientHttpConnector&#39; available&quot; while creating WebClient bean","body":"<p>it seems that you are not initializing the connector, as you can see from the official spring documentation you need the connector instatiated before plug in the builder (a direct dependency injection of spring for the connector does not seem advisable):</p>\n<pre><code>@Bean\npublic JettyResourceFactory resourceFactory() {\n    return new JettyResourceFactory();\n}\n\n    @Bean\npublic WebClient webClient() {\n\n    HttpClient httpClient = new HttpClient();\n    // Further customizations...\n\n    ClientHttpConnector connector =\n            new JettyClientHttpConnector(httpClient, resourceFactory()); \n\n    return WebClient.builder().clientConnector(connector).build(); \n}\n</code></pre>\n<p>here you can find the documentation: <a href=\"https://docs.spring.io/spring-framework/reference/web/webflux-webclient/client-builder.html\" rel=\"nofollow noreferrer\">Client-builder</a></p>\n<p>I hope it was helpful to you.</p>\n"}],"owner":{"account_id":5640896,"reputation":187,"user_id":4464806,"display_name":"Abhinash Jha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77245759,"answer_count":1,"score":0,"last_activity_date":1696606830,"creation_date":1696604947,"question_id":77245554,"body_markdown":"I need to use WebClient on an existing Spring project. The existing Spring version is 4. I updated the Spring version to 5 because to use WebClient, Spring 5 is required.\r\n\r\nBelow are the spring dependencies in pom.xml:\r\n```\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.5.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.4-1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webflux&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.15.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.projectreactor.netty&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;reactor-netty&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.9.20.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n**added** : spring-web, spring-webflux and reactor-netty.\r\n\r\nNext, I configured WebClient bean in AppConfig\r\n```\r\n@Bean\r\n  public WebClient webClient(@Value(&quot;${myservice.endpoint}&quot;) String countryServiceUrl, ClientHttpConnector connector) {\r\n    return WebClient.builder()\r\n            .baseUrl(countryServiceUrl)\r\n            .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\r\n            .clientConnector(connector)\r\n            .build();\r\n  }\r\n```\r\nBelow is the project setup:\r\n```\r\npublic class WebAppInitializer implements WebApplicationInitializer {\r\nprivate AnnotationConfigWebApplicationContext applicationContext;\r\n@Override\r\n  public void onStartup(final ServletContext servletContext) throws ServletException {\r\n    applicationContext = new AnnotationConfigWebApplicationContext();\r\n    applicationContext.register(AppConfig.class);\r\n    applicationContext.setDisplayName(DISPLAY_NAME);\r\n\r\n    // Manage the life cycle of the root application context\r\n    servletContext.addListener(new ContextLoaderListener(applicationContext));\r\n\r\n    applicationContext.refresh();\r\n    applicationContext.registerShutdownHook();\r\n  }\r\n}\r\n```\r\nI am deploying the project to tomcat 9 in my local. Below is the error:\r\n```\r\nWARN  AnnotationConfigWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;createMyMessageConverter&#39;: Unsatisfied dependency expressed through field &#39;myMessageConverter&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;myMessageConverter&#39;: Unsatisfied dependency expressed through field ‘myServiceCaller&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name ‘myServiceCaller&#39;: Unsatisfied dependency expressed through field ‘someDAO&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name ‘someDAOImpl&#39;: Unsatisfied dependency expressed through field &#39;webClient&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;webClient&#39; defined in com.my.package.config.AppConfig: Unsatisfied dependency expressed through method &#39;webClient&#39; parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.http.client.reactive.ClientHttpConnector&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n06-Oct-2023 07:37:23.262 SEVERE [main] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [/Users/abhinash.kumar/Downloads/apache-tomcat-9.0.65/webapps/myApp-SNAPSHOT.war]\r\n\tjava.lang.IllegalStateException: Error starting child\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:729)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n\t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n\t\tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n\t\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\t\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n\t\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n\t\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n\t\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n\t\tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n\t\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n\t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n\t\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\t\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n\t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n\t\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\t\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n\t\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n\tCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myApp-SNAPSHOT]]\r\n\t\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n\t\t... 37 more\r\n\tCaused by: java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.clearCache()V\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.resetCommonCaches(AbstractApplicationContext.java:915)\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:575)\r\n\t\tat com.choicehotels.bs.ecb.accountmsgadapter.travelagentadapter.web.WebAppInitializer.onStartup(WebAppInitializer.java:37)\r\n\t\tat org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:172)\r\n\t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5219)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\t... 38 more\r\n\r\n```\r\nSo, basically, this part seems to be the issue:\r\n**Unsatisfied dependency expressed through method &#39;webClient&#39; parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.http.client.reactive.ClientHttpConnector&#39; available:**\r\n\r\nBut, I do see ClientHttpConnector present in the project classpath. image added\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThanks in advance!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FvmUR.png","title":"Error &quot;No qualifying bean of type &#39;org.springframework.http.client.reactive.ClientHttpConnector&#39; available&quot; while creating WebClient bean","body":"<p>I need to use WebClient on an existing Spring project. The existing Spring version is 4. I updated the Spring version to 5 because to use WebClient, Spring 5 is required.</p>\n<p>Below are the spring dependencies in pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;5.0.5.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.2.4-1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webflux&lt;/artifactId&gt;\n            &lt;version&gt;5.2.15.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor.netty&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-netty&lt;/artifactId&gt;\n            &lt;version&gt;0.9.20.RELEASE&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><strong>added</strong> : spring-web, spring-webflux and reactor-netty.</p>\n<p>Next, I configured WebClient bean in AppConfig</p>\n<pre><code>@Bean\n  public WebClient webClient(@Value(&quot;${myservice.endpoint}&quot;) String countryServiceUrl, ClientHttpConnector connector) {\n    return WebClient.builder()\n            .baseUrl(countryServiceUrl)\n            .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n            .clientConnector(connector)\n            .build();\n  }\n</code></pre>\n<p>Below is the project setup:</p>\n<pre><code>public class WebAppInitializer implements WebApplicationInitializer {\nprivate AnnotationConfigWebApplicationContext applicationContext;\n@Override\n  public void onStartup(final ServletContext servletContext) throws ServletException {\n    applicationContext = new AnnotationConfigWebApplicationContext();\n    applicationContext.register(AppConfig.class);\n    applicationContext.setDisplayName(DISPLAY_NAME);\n\n    // Manage the life cycle of the root application context\n    servletContext.addListener(new ContextLoaderListener(applicationContext));\n\n    applicationContext.refresh();\n    applicationContext.registerShutdownHook();\n  }\n}\n</code></pre>\n<p>I am deploying the project to tomcat 9 in my local. Below is the error:</p>\n<pre><code>WARN  AnnotationConfigWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'createMyMessageConverter': Unsatisfied dependency expressed through field 'myMessageConverter'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'myMessageConverter': Unsatisfied dependency expressed through field ‘myServiceCaller'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name ‘myServiceCaller': Unsatisfied dependency expressed through field ‘someDAO'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name ‘someDAOImpl': Unsatisfied dependency expressed through field 'webClient'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webClient' defined in com.my.package.config.AppConfig: Unsatisfied dependency expressed through method 'webClient' parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.http.client.reactive.ClientHttpConnector' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n06-Oct-2023 07:37:23.262 SEVERE [main] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [/Users/abhinash.kumar/Downloads/apache-tomcat-9.0.65/webapps/myApp-SNAPSHOT.war]\n    java.lang.IllegalStateException: Error starting child\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:729)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myApp-SNAPSHOT]]\n        at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n        ... 37 more\n    Caused by: java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.clearCache()V\n        at org.springframework.context.support.AbstractApplicationContext.resetCommonCaches(AbstractApplicationContext.java:915)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:575)\n        at com.choicehotels.bs.ecb.accountmsgadapter.travelagentadapter.web.WebAppInitializer.onStartup(WebAppInitializer.java:37)\n        at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:172)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5219)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        ... 38 more\n\n</code></pre>\n<p>So, basically, this part seems to be the issue:\n<strong>Unsatisfied dependency expressed through method 'webClient' parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.http.client.reactive.ClientHttpConnector' available:</strong></p>\n<p>But, I do see ClientHttpConnector present in the project classpath. image added</p>\n<p><a href=\"https://i.stack.imgur.com/FvmUR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FvmUR.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"score":0,"creation_date":1667939393,"post_id":74366588,"comment_id":131286871,"body_markdown":"without the code for class B, we can never help you other than to say &quot;you are doing something wrong&quot;","body":"without the code for class B, we can never help you other than to say &quot;you are doing something wrong&quot;"},{"owner":{"account_id":3280922,"reputation":225,"user_id":2761554,"accept_rate":100,"display_name":"bahadir_g"},"score":0,"creation_date":1667940693,"post_id":74366588,"comment_id":131287296,"body_markdown":"added a simplified version of the code","body":"added a simplified version of the code"},{"owner":{"account_id":10673275,"reputation":1351,"user_id":7857701,"display_name":"Snigdhajyoti"},"score":0,"creation_date":1696602896,"post_id":74366588,"comment_id":136178513,"body_markdown":"Getting the same problem with any class and in any test. Doesn&#39;t matter. Even simple `ObjectMapper` spy was not working","body":"Getting the same problem with any class and in any test. Doesn&#39;t matter. Even simple <code>ObjectMapper</code> spy was not working"}],"answers":[{"comments":[{"owner":{"account_id":10673275,"reputation":1351,"user_id":7857701,"display_name":"Snigdhajyoti"},"score":0,"creation_date":1696603024,"post_id":74380814,"comment_id":136178547,"body_markdown":"Didn&#39;t work with `@InjectMocks`","body":"Didn&#39;t work with <code>@InjectMocks</code>"}],"tags":[],"owner":{"account_id":3280922,"reputation":225,"user_id":2761554,"accept_rate":100,"display_name":"bahadir_g"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1668028215,"creation_date":1668024622,"answer_id":74380814,"question_id":74366588,"body_markdown":"Finally able to solve it as below.\r\nMy guess about cause of the problem is implementation class &quot;InternalServiceImpl&quot; for interface &quot;InternalService&quot; could not be injected properly to unit test class (despite it is working fine when injected to a business class), so during debugging, I was not able to see execution of methods in spy object.\r\n\r\nAfter spying (without annonation) an explicitly provided implementation class, everything seems solved.\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class Test {\r\n    \r\n      @InjectMocks\r\n      AService  aService ;\r\n    \r\n      @InjectMocks\r\n      InternalService  internalService = Mockito.spy(InternalServiceImpl.class);\r\n    \r\n      @Mock\r\n      PanelDao panelDao;\r\n    \r\n      @Test\r\n      public void test() { \r\n        ..\r\n      }\r\n    }","title":"Mockito Spy behaves like Mock","body":"<p>Finally able to solve it as below.\nMy guess about cause of the problem is implementation class &quot;InternalServiceImpl&quot; for interface &quot;InternalService&quot; could not be injected properly to unit test class (despite it is working fine when injected to a business class), so during debugging, I was not able to see execution of methods in spy object.</p>\n<p>After spying (without annonation) an explicitly provided implementation class, everything seems solved.</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass Test {\n\n  @InjectMocks\n  AService  aService ;\n\n  @InjectMocks\n  InternalService  internalService = Mockito.spy(InternalServiceImpl.class);\n\n  @Mock\n  PanelDao panelDao;\n\n  @Test\n  public void test() { \n    ..\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10673275,"reputation":1351,"user_id":7857701,"display_name":"Snigdhajyoti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696603478,"creation_date":1696603478,"answer_id":77245391,"question_id":74366588,"body_markdown":"Adding `mockito-inline` dependency solved the problem for -\r\n\r\n`mockito` version `4.11` on `Java 17`\r\n\r\nAlthough [this](https://stackoverflow.com/a/65997640/7857701) answer gives the idea on why to use the module; to enable advance features. But not sure on whats the issue here.","title":"Mockito Spy behaves like Mock","body":"<p>Adding <code>mockito-inline</code> dependency solved the problem for -</p>\n<p><code>mockito</code> version <code>4.11</code> on <code>Java 17</code></p>\n<p>Although <a href=\"https://stackoverflow.com/a/65997640/7857701\">this</a> answer gives the idea on why to use the module; to enable advance features. But not sure on whats the issue here.</p>\n"}],"owner":{"account_id":3280922,"reputation":225,"user_id":2761554,"accept_rate":100,"display_name":"bahadir_g"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74380814,"answer_count":2,"score":1,"last_activity_date":1696606736,"creation_date":1667938147,"question_id":74366588,"body_markdown":"Environment: Java11, AWS Lambda, Dagger, JUnit5 (5.9.1), Mockito(4.8.1) (tried both mockito core &amp; inline)\r\n\r\nI have classes A, B and C.  \r\nC is injected to B and B is injected to A.\r\nMethod A.ma1() calls B.mb1() and B.mb1 calls C.mc1()\r\n\r\nI just want to verify if a method &quot;mc1&quot; of C is called or not if I call A.ma1\r\n\r\nHere is my structure:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class Test {\r\n    \r\n      @InjectMocks\r\n      A a;\r\n    \r\n      @Spy\r\n      B b;\r\n    \r\n      @Mock\r\n      C c;\r\n\r\n      @Test\r\n      public void test() { \r\n        a.ma1();\r\n        verify(c).mc1(any());\r\n      }\r\n    }\r\n\r\nThe problem is when A.ma1() calls B.mb1(),  B.mb1() behaves like a Mock instead of a Spy.\r\nThe contents of the method never being executed during debugging, but immediately returning. I also tried to annotate B with @InjectMocks along with @Spy. It also did not work, throwing a different kind of exception.\r\n\r\nDoes anybody have any idea why does B behave like a Mock instead of a Spy?\r\n\r\nAdded after comment:\r\nHere is the complete code: (simplified)\r\nAService is A, InternalService is B and PanelDao is C in the above example. B&#39;s &quot;selectMappedInternal&quot; never executes line by line but returns immediately like a mock when called.\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class Test {\r\n    \r\n      @InjectMocks\r\n      AService  aService ;\r\n    \r\n      @Spy\r\n      InternalService  internalService ;\r\n    \r\n      @Mock\r\n      PanelDao panelDao;\r\n    \r\n      @Test\r\n      public void test() { \r\n        ..\r\n      }\r\n    }\r\n\r\n    public class AService {\r\n    \r\n        @Inject\r\n        InternalService internalService;\r\n    \r\n        @Inject\r\n        public AService() {\r\n        }\r\n    \r\n        public void processMessage(AccSqsMessage accSqsMessage) {\r\n             ..\r\n             internalSet = internalService.selectMappedInternal(accSqsMessage.getCode());\r\n             ..\r\n        }\r\n    }\r\n\r\n  \r\n\r\n    public class InternalServiceImpl implements InternalService {\r\n    \r\n        @Inject\r\n        PanelDao panelDao;\r\n    \r\n        @Inject\r\n        public InternalServiceImpl() {\r\n        }\r\n    \r\n        @Override\r\n        public Set&lt;Internal&gt; selectMappedInternal(String code) {\r\n           ..\r\n           Optional&lt;Panel&gt; p = panelDao.findPanelByCode(code);\r\n           ..\r\n        }\r\n    }\r\n","title":"Mockito Spy behaves like Mock","body":"<p>Environment: Java11, AWS Lambda, Dagger, JUnit5 (5.9.1), Mockito(4.8.1) (tried both mockito core &amp; inline)</p>\n<p>I have classes A, B and C.<br />\nC is injected to B and B is injected to A.\nMethod A.ma1() calls B.mb1() and B.mb1 calls C.mc1()</p>\n<p>I just want to verify if a method &quot;mc1&quot; of C is called or not if I call A.ma1</p>\n<p>Here is my structure:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass Test {\n\n  @InjectMocks\n  A a;\n\n  @Spy\n  B b;\n\n  @Mock\n  C c;\n\n  @Test\n  public void test() { \n    a.ma1();\n    verify(c).mc1(any());\n  }\n}\n</code></pre>\n<p>The problem is when A.ma1() calls B.mb1(),  B.mb1() behaves like a Mock instead of a Spy.\nThe contents of the method never being executed during debugging, but immediately returning. I also tried to annotate B with @InjectMocks along with @Spy. It also did not work, throwing a different kind of exception.</p>\n<p>Does anybody have any idea why does B behave like a Mock instead of a Spy?</p>\n<p>Added after comment:\nHere is the complete code: (simplified)\nAService is A, InternalService is B and PanelDao is C in the above example. B's &quot;selectMappedInternal&quot; never executes line by line but returns immediately like a mock when called.</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass Test {\n\n  @InjectMocks\n  AService  aService ;\n\n  @Spy\n  InternalService  internalService ;\n\n  @Mock\n  PanelDao panelDao;\n\n  @Test\n  public void test() { \n    ..\n  }\n}\n\npublic class AService {\n\n    @Inject\n    InternalService internalService;\n\n    @Inject\n    public AService() {\n    }\n\n    public void processMessage(AccSqsMessage accSqsMessage) {\n         ..\n         internalSet = internalService.selectMappedInternal(accSqsMessage.getCode());\n         ..\n    }\n}\n\n\n\npublic class InternalServiceImpl implements InternalService {\n\n    @Inject\n    PanelDao panelDao;\n\n    @Inject\n    public InternalServiceImpl() {\n    }\n\n    @Override\n    public Set&lt;Internal&gt; selectMappedInternal(String code) {\n       ..\n       Optional&lt;Panel&gt; p = panelDao.findPanelByCode(code);\n       ..\n    }\n}\n</code></pre>\n"},{"tags":["java","utf-8","file-io","character-encoding","filenames"],"comments":[{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609026,"post_id":77245754,"comment_id":136179712,"body_markdown":"I am using the value returned by the path object and directly performing a stat on it, that fails as well so there is no involvement of my console in that. Furthermore when you take the bytes i shared and create the file using your console it will encode it with the encoding of your console (which seems to be utf8)","body":"I am using the value returned by the path object and directly performing a stat on it, that fails as well so there is no involvement of my console in that. Furthermore when you take the bytes i shared and create the file using your console it will encode it with the encoding of your console (which seems to be utf8)"},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609078,"post_id":77245754,"comment_id":136179722,"body_markdown":"its more about reading the filename from directory and then being able to perform stat on that file using java","body":"its more about reading the filename from directory and then being able to perform stat on that file using java"},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609646,"post_id":77245754,"comment_id":136179839,"body_markdown":"https://man7.org/linux/man-pages/man2/stat.2.html\nThis is what I mean by stat","body":"<a href=\"https://man7.org/linux/man-pages/man2/stat.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/stat.2.html</a> This is what I mean by stat"},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609725,"post_id":77245754,"comment_id":136179851,"body_markdown":"Also, I have ensured that those file names print correctly when I print them on my terminal using ISO-8859-1 encoding","body":"Also, I have ensured that those file names print correctly when I print them on my terminal using ISO-8859-1 encoding"},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609828,"post_id":77245754,"comment_id":136179873,"body_markdown":"For exampl, in my linux if I convert these filenames from ISO-8859-1 to utf-8\nI am able to do that, using below command\n# ls &gt; output\n# iconv -f ISO-8859-1 -t UTF8 output\n\nsame command fails when i try to read it as UTF-8","body":"For exampl, in my linux if I convert these filenames from ISO-8859-1 to utf-8 I am able to do that, using below command # ls &gt; output # iconv -f ISO-8859-1 -t UTF8 output  same command fails when i try to read it as UTF-8"},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609924,"post_id":77245754,"comment_id":136179897,"body_markdown":"Hence, I concluded that these java APIs only expect UTF8 when we try to read these filenames. The character are not incorrect in the filename, above command proves that for me","body":"Hence, I concluded that these java APIs only expect UTF8 when we try to read these filenames. The character are not incorrect in the filename, above command proves that for me"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1696633874,"post_id":77245754,"comment_id":136183180,"body_markdown":"Does this answer your question? [Java Can&#39;t Open a File with Surrogate Unicode Values in the Filename?](https://stackoverflow.com/questions/1545625/java-cant-open-a-file-with-surrogate-unicode-values-in-the-filename)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1545625/java-cant-open-a-file-with-surrogate-unicode-values-in-the-filename\">Java Can&#39;t Open a File with Surrogate Unicode Values in the Filename?</a>"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1696748772,"post_id":77245754,"comment_id":136191346,"body_markdown":"@TimMoore Your proposed duplicate specifically relates to surrogate pairs, but this question is more general. Also, that question was raised in 2009, has not received any answers since 2014, and has no accepted answer. If you think this question is a duplicate of that one, can you explain _how_ it resolves the OP&#39;s problem, because I don&#39;t see it. A question that simply looks somewhat similar to an existing one is not sufficient grounds to close vote.","body":"@TimMoore Your proposed duplicate specifically relates to surrogate pairs, but this question is more general. Also, that question was raised in 2009, has not received any answers since 2014, and has no accepted answer. If you think this question is a duplicate of that one, can you explain <i>how</i> it resolves the OP&#39;s problem, because I don&#39;t see it. A question that simply looks somewhat similar to an existing one is not sufficient grounds to close vote."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1696765607,"post_id":77245754,"comment_id":136192760,"body_markdown":"Could you put the code which fails in the question, and details of the file and platform encoding? Just having System.out printing something odd isn&#39;t proof the character of filename is corrupt, whereas if `Files.readAllBytes(entry)` fails then there is an issue.","body":"Could you put the code which fails in the question, and details of the file and platform encoding? Just having System.out printing something odd isn&#39;t proof the character of filename is corrupt, whereas if <code>Files.readAllBytes(entry)</code> fails then there is an issue."},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696827746,"post_id":77245754,"comment_id":136197810,"body_markdown":"@DuncG the path object that I create, that itself has &quot;?&quot; in it. from iconv, i was able to figure out that the filename has &quot;ISO-8859-1&quot; encoding and my system is on utf8. Tried changing the local to the same but still failed. can you more info on how can I check with readAllBytes(). Accorsing to iconv it is a valid filename","body":"@DuncG the path object that I create, that itself has &quot;?&quot; in it. from iconv, i was able to figure out that the filename has &quot;ISO-8859-1&quot; encoding and my system is on utf8. Tried changing the local to the same but still failed. can you more info on how can I check with readAllBytes(). Accorsing to iconv it is a valid filename"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1696924948,"post_id":77245754,"comment_id":136211481,"body_markdown":"The code you have shown does not contain the Java code which fails - you mention ls and stat which isn&#39;t NIO call to read a file. You ought to check the characters of filename are as expected (not by System.out). The question lacks detail which would help you get an answer.","body":"The code you have shown does not contain the Java code which fails - you mention ls and stat which isn&#39;t NIO call to read a file. You ought to check the characters of filename are as expected (not by System.out). The question lacks detail which would help you get an answer."}],"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":0,"score":1,"last_activity_date":1696606602,"creation_date":1696606602,"question_id":77245754,"body_markdown":"I have a list of files within a directory and those filenames have non-utf8 characters in their name. When I use java NIO library to read those filenames from the directory and list the files, it fails to read the correct name. The path object that will be created from iterating DirectoryStream will replace all the non-UTF8 characters with `\\357\\277\\275` which corresponds to &quot;?&quot;. Is there a way I can read these filenames correctly using java so I can use the list of filenames within a given directory and perform stat on each file in a given directory.\r\n\r\nI have written a sample piece of java code which uses NIO library and tries to list down all the entities within the directory. Below is my code:\r\n\r\n```\r\npublic class FileIteration {\r\n    public static void main(String[] args) {\r\n\r\n\t    Scanner scanner = new Scanner(System.in);\r\n        System.out.print(&quot;Enter the directory path: &quot;);\r\n        String directoryPathStr = scanner.nextLine();\r\n\r\n        Path directoryPath = Paths.get(directoryPathStr);\r\n\r\n        try (DirectoryStream&lt;Path&gt; directoryStream = Files.newDirectoryStream(directoryPath)) {\r\n            Iterator&lt;Path&gt; iterator = directoryStream.iterator();\r\n            while (iterator.hasNext()) {\r\n                Path entry = iterator.next();\r\n\t\t        String fileName = entry.getFileName().toString();\r\n\r\n\t\t    //String decodedFileName = new String(fileName.getBytes(StandardCharsets.UTF_8), StandardCharsets.UTF_8);\r\n                System.out.println(&quot;File: &quot; + fileName);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nHere is the an example filename with bytes `8000124463972718\\314H2\\376\\=M\\3230U\\317\\313S\\=`\r\nit is supposed to be printed and read as \r\n`8000124463972718&#204;H2&#254;=M&#211;0U&#207;&#203;S=`\r\nbut instead I am getting \r\n`8000124463972718?H2?=M?0U??S=` in my path object, which in bytes you can replace each &quot;?&quot; with `\\357\\277\\275`\r\n\r\nI had also tried different APIs, same issue was observed with them as well, for example I also tried:\r\n```\r\npublic static void printPathsUsingFileWalk(String dir, int depth) throws IOException {\r\n        try (Stream&lt;Path&gt; stream = Files.walk(Paths.get(dir), depth)) {\r\n            stream.forEach(path -&gt; System.out.println(&quot;File name (using stream)&quot;+path));\r\n        }\r\n    }\r\n```\r\nThis fails as well.\r\n\r\nEncoding of the filenames seems to be ISO-8859-1 and these java APIs seems to be expecting them to be UTF8.\r\nJust in case to make sure I get across my question clearly, the issue is not reading the content of the file, but the filename from the directory. Since I get wrong characters when I try to list down files, I am missing to perform stat on some of the files.\r\n","title":"Unable to read non-UTF8 bytes in the filename using java, causing failure in stat of file","body":"<p>I have a list of files within a directory and those filenames have non-utf8 characters in their name. When I use java NIO library to read those filenames from the directory and list the files, it fails to read the correct name. The path object that will be created from iterating DirectoryStream will replace all the non-UTF8 characters with <code>\\357\\277\\275</code> which corresponds to &quot;?&quot;. Is there a way I can read these filenames correctly using java so I can use the list of filenames within a given directory and perform stat on each file in a given directory.</p>\n<p>I have written a sample piece of java code which uses NIO library and tries to list down all the entities within the directory. Below is my code:</p>\n<pre><code>public class FileIteration {\n    public static void main(String[] args) {\n\n        Scanner scanner = new Scanner(System.in);\n        System.out.print(&quot;Enter the directory path: &quot;);\n        String directoryPathStr = scanner.nextLine();\n\n        Path directoryPath = Paths.get(directoryPathStr);\n\n        try (DirectoryStream&lt;Path&gt; directoryStream = Files.newDirectoryStream(directoryPath)) {\n            Iterator&lt;Path&gt; iterator = directoryStream.iterator();\n            while (iterator.hasNext()) {\n                Path entry = iterator.next();\n                String fileName = entry.getFileName().toString();\n\n            //String decodedFileName = new String(fileName.getBytes(StandardCharsets.UTF_8), StandardCharsets.UTF_8);\n                System.out.println(&quot;File: &quot; + fileName);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Here is the an example filename with bytes <code>8000124463972718\\314H2\\376\\=M\\3230U\\317\\313S\\=</code>\nit is supposed to be printed and read as\n<code>8000124463972718ÌH2þ=MÓ0UÏËS=</code>\nbut instead I am getting\n<code>8000124463972718?H2?=M?0U??S=</code> in my path object, which in bytes you can replace each &quot;?&quot; with <code>\\357\\277\\275</code></p>\n<p>I had also tried different APIs, same issue was observed with them as well, for example I also tried:</p>\n<pre><code>public static void printPathsUsingFileWalk(String dir, int depth) throws IOException {\n        try (Stream&lt;Path&gt; stream = Files.walk(Paths.get(dir), depth)) {\n            stream.forEach(path -&gt; System.out.println(&quot;File name (using stream)&quot;+path));\n        }\n    }\n</code></pre>\n<p>This fails as well.</p>\n<p>Encoding of the filenames seems to be ISO-8859-1 and these java APIs seems to be expecting them to be UTF8.\nJust in case to make sure I get across my question clearly, the issue is not reading the content of the file, but the filename from the directory. Since I get wrong characters when I try to list down files, I am missing to perform stat on some of the files.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":2,"creation_date":1696588313,"post_id":77243101,"comment_id":136175504,"body_markdown":"Which library are you using? There are many third-party libraries supporting the javax.usb specification. You should specify the library and exact version number (e.g. the Github URL or the Maven coordinates of the library).","body":"Which library are you using? There are many third-party libraries supporting the javax.usb specification. You should specify the library and exact version number (e.g. the Github URL or the Maven coordinates of the library)."},{"owner":{"account_id":27201203,"reputation":45,"user_id":20733431,"display_name":"amirmohammad firouzfar"},"score":0,"creation_date":1696620047,"post_id":77243101,"comment_id":136181557,"body_markdown":"@k314159 this is where i downloaded it from. I can&#39;t remember the exact site. http://www.java2s.com/Code/JarDownload/javax.usb/javax.usb.jar.zip","body":"@k314159 this is where i downloaded it from. I can&#39;t remember the exact site. <a href=\"http://www.java2s.com/Code/JarDownload/javax.usb/javax.usb.jar.zip\" rel=\"nofollow noreferrer\">java2s.com/Code/JarDownload/javax.usb/javax.usb.jar.zip</a>"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1696840557,"post_id":77243101,"comment_id":136199546,"body_markdown":"It looks like you are omitting to set up the properties. You will need to check the documentation for that, but the jar file in this link contains only compiled class files, so finding documentation will be difficult.","body":"It looks like you are omitting to set up the properties. You will need to check the documentation for that, but the jar file in this link contains only compiled class files, so finding documentation will be difficult."}],"owner":{"account_id":27201203,"reputation":45,"user_id":20733431,"display_name":"amirmohammad firouzfar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696606405,"creation_date":1696582452,"question_id":77243101,"body_markdown":"I&#39;m trying to use the javax.usb library. \r\n```java\r\nimport javax.usb.*;\r\n\r\npublic class PrinterCheck {\r\n    public static void main(String[] args) {\r\n\r\n        try {\r\n            UsbServices usbServices = UsbHostManager.getUsbServices();\r\n        } catch (UsbException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI wrote this simple code, but when I run it, I get this error:\r\n```none\r\n/usr/lib/jvm/java-1.17.0-openjdk-amd64/bin/java -javaagent:/snap/intellij-idea-community/456/lib/idea_rt.jar=42049:/snap/intellij-idea-community/456/bin -Dfile.encoding=UTF-8 -classpath /home/amiroof/Projects/Cinema/out/production/Cinema:/home/amiroof/Projects/Cinema/lib/mysql-connector-j-8.1.0.jar:/home/amiroof/Projects/Cinema/lib/javax.usb.jar PrinterCheck\r\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.util.Properties.getProperty(String)&quot; because &quot;properties&quot; is null\r\n\tat javax.usb.UsbHostManager.getServicesName(UsbHostManager.java:96)\r\n\tat javax.usb.UsbHostManager.initialize(UsbHostManager.java:32)\r\n\tat javax.usb.UsbHostManager.getUsbServices(UsbHostManager.java:24)\r\n\tat PrinterCheck.main(PrinterCheck.java:9)\r\n\r\nProcess finished with exit code 1\r\n```\r\nI tried reinstalling the library, but that didn&#39;t worked. I&#39;m new to Java, so if I&#39;m missing something obvious, please let me know.","title":"javax.usb UsbHostManager.getUsbService() properties is null","body":"<p>I'm trying to use the javax.usb library.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.usb.*;\n\npublic class PrinterCheck {\n    public static void main(String[] args) {\n\n        try {\n            UsbServices usbServices = UsbHostManager.getUsbServices();\n        } catch (UsbException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>I wrote this simple code, but when I run it, I get this error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>/usr/lib/jvm/java-1.17.0-openjdk-amd64/bin/java -javaagent:/snap/intellij-idea-community/456/lib/idea_rt.jar=42049:/snap/intellij-idea-community/456/bin -Dfile.encoding=UTF-8 -classpath /home/amiroof/Projects/Cinema/out/production/Cinema:/home/amiroof/Projects/Cinema/lib/mysql-connector-j-8.1.0.jar:/home/amiroof/Projects/Cinema/lib/javax.usb.jar PrinterCheck\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.util.Properties.getProperty(String)&quot; because &quot;properties&quot; is null\n    at javax.usb.UsbHostManager.getServicesName(UsbHostManager.java:96)\n    at javax.usb.UsbHostManager.initialize(UsbHostManager.java:32)\n    at javax.usb.UsbHostManager.getUsbServices(UsbHostManager.java:24)\n    at PrinterCheck.main(PrinterCheck.java:9)\n\nProcess finished with exit code 1\n</code></pre>\n<p>I tried reinstalling the library, but that didn't worked. I'm new to Java, so if I'm missing something obvious, please let me know.</p>\n"},{"tags":["java","google-chrome","selenium-webdriver","selenium-chromedriver","selenium-java"],"comments":[{"owner":{"account_id":16840055,"reputation":300,"user_id":12175652,"display_name":"Rolandas Ulevicius"},"score":0,"creation_date":1678690214,"post_id":75718422,"comment_id":133575374,"body_markdown":"what issue? what problem?","body":"what issue? what problem?"}],"answers":[{"tags":[],"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1678711251,"creation_date":1678698037,"answer_id":75719759,"question_id":75718422,"body_markdown":"```\r\nChromeOptions options=new ChromeOptions();    \r\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);    \r\n//Launching the browser\r\ndriver=new ChromeDriver(options);\r\n```\r\n","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<pre><code>ChromeOptions options=new ChromeOptions();    \noptions.addArguments(&quot;--remote-allow-origins=*&quot;);    \n//Launching the browser\ndriver=new ChromeDriver(options);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28003016,"reputation":173,"user_id":21386874,"display_name":"JBM"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1679138165,"creation_date":1678711457,"answer_id":75722029,"question_id":75718422,"body_markdown":"I followed the below answer: https://stackoverflow.com/a/75703971/21386874\r\n```\r\noptions.addArguments(&quot;--remote-allow-origins=*&quot;); \r\n```\r\nI tried but it is not working. \r\nIn my project, I got the below error.  \r\n                                                                                                                Error:\r\n&gt; org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection to http://localhost:49877/devtools/browser/3a3af47d-732a-4337-a91c-18c8ced545cd\r\nBuild info: version: &#39;4.5.3&#39;, revision: &#39;4b786a1e430&#39;\r\n\r\nAns: \r\n\r\nI downloaded the newest chromedriver.exe with the 111.0.5563.64 version. \r\nAlso, I added one more dependency:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\r\n      &lt;version&gt;4.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd added this code line at the first line into the `@BeforeTest` method:\r\n\r\n```\r\nSystem.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\r\n```","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>I followed the below answer: <a href=\"https://stackoverflow.com/a/75703971/21386874\">https://stackoverflow.com/a/75703971/21386874</a></p>\n<pre><code>options.addArguments(&quot;--remote-allow-origins=*&quot;); \n</code></pre>\n<p>I tried but it is not working.\nIn my project, I got the below error.<br />\nError:</p>\n<blockquote>\n<p>org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection to http://localhost:49877/devtools/browser/3a3af47d-732a-4337-a91c-18c8ced545cd\nBuild info: version: '4.5.3', revision: '4b786a1e430'</p>\n</blockquote>\n<p>Ans:</p>\n<p>I downloaded the newest chromedriver.exe with the 111.0.5563.64 version.\nAlso, I added one more dependency:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n  &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\n  &lt;version&gt;4.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And added this code line at the first line into the <code>@BeforeTest</code> method:</p>\n<pre><code>System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1679010632,"creation_date":1678866163,"answer_id":75741758,"question_id":75718422,"body_markdown":"Using [tag:google-chrome] _**v111.0**_ this error message...\r\n\r\n\torg.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection to http://localhost:49877/devtools/browser/3a3af47d-732a-4337-a91c-18c8ced545cd\r\n\r\nand this error message...\r\n\r\n    2023-03-08T21:06:50.3319163Z WARNING: Invalid Status code=403 text=Forbidden\r\n    2023-03-08T21:06:50.3320374Z java.io.IOException: Invalid Status code=403 text=Forbidden\r\n\r\nand even this error message...\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;org.asynchttpclient.ws.WebSocket.sendCloseFrame(int, String)&quot; because &quot;this.socket&quot; is null\r\n\r\n...is the result of _`devtools_http_handler`_ rejecting an incoming WebSocket connection from the http://localhost origin.\r\n\r\n\r\n----------\r\n\r\n\r\nDetails\r\n-------\r\nThis issue is the result of _`Origin`_ header when set is being auto-resolved into meaningless value in **Netty 4.x** currently being used by Selenium. This issue was discussed in details in [Origin header is always sent from WebSocket client](https://github.com/netty/netty/issues/9673) and was addressed through [Fix generating the Origin header value for websocket handshake request](https://github.com/netty/netty/pull/12941).\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nAs per the [_Selenium Blog_](https://www.selenium.dev/blog/2022/using-java11-httpclient/) there are a couple of approaches to solve this issue.\r\n\r\n- _**Using**_ [tag:java-11] _**HTTP Client in Selenium**_: Selenium uses an HTTP client and associated WebSocket client for multiple purposes. [AsyncHttpClient](https://github.com/AsyncHttpClient/async-http-client) is an open-source library built on top of Netty. It allows the execution of HTTP requests and responses asynchronously. Additionally it also provides WebSocket support.But _AsyncHttpClient_ is no more maintained since June 2021 as _Java 11+_ provides a built-in HTTP and WebSocket client. Selenium can utilize it to replace AsyncHttpClient.\r\n\r\n  - _Prerequisites_:\r\n  \r\n\t    Project configured to use Java 11+\r\n\t    Using Selenium 4.5.0 as a minumum version\r\n\r\n  - _Integrating the Java 11+ client_: As Java 11+ HTTP client sits in its own artifact it can be imported into your project that use Java 11+ as follows:\r\n  \r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t      &lt;version&gt;4.5.0&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\r\n\t      &lt;version&gt;4.5.0&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    \r\n  - _Setting the system property_: You need to set the system property to indicate that Java 11+ Http client needs to be used. By default, it uses the _AsyncHttpClient_:\r\n  \r\n\t    System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\r\n  \r\n- _**Using**_ [tag:java-8] _**in Selenium**_: As the ChromeDriver [verbose log](https://groups.google.com/g/chromedriver-users/c/xL5-13_qGaA/m/cGk_5MvTAAAJ) suggests:\r\n\r\n\t  [32332:259:0214/190812.204658:ERROR:devtools_http_handler.cc(766)] Rejected an incoming WebSocket connection from the http://localhost:58642 origin. Use the command line flag --remote-allow-origins=http://localhost:58642 to allow connections from this origin or --remote-allow-origins=* to allow all origins.\r\n\t\r\nA quick fix to this issue would be to add the argument _`--remote-allow-origins=*`_ as follows:\r\n\r\n- _Java_:\r\n\r\n\t  ChromeOptions options = new ChromeOptions();\r\n\t  options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n\t  WebDriver driver = new ChromeDriver(options);\r\n\r\n\r\n----------\r\n\r\n\r\nReferences\r\n----------\r\nLinks to useful references:\r\n\r\n- [Chrome 111 is not compatible with default HTTP Client](https://github.com/SeleniumHQ/selenium/issues/11750)\r\n- [Issue 1422444: Selenium Chromedriver no longer works with Chrome 111 update](https://bugs.chromium.org/p/chromium/issues/detail?id=1422444)\r\n- [DevTools: reject debugging web socket connections with a defined Origin header](https://chromiumdash.appspot.com/commit/0154caeefc74530d5cb57ce71608beb1b77bca39)\r\n","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>Using <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" aria-label=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\" aria-labelledby=\"tag-google-chrome-tooltip-container\">google-chrome</a> <em><strong>v111.0</strong></em> this error message...</p>\n<pre><code>org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection to http://localhost:49877/devtools/browser/3a3af47d-732a-4337-a91c-18c8ced545cd\n</code></pre>\n<p>and this error message...</p>\n<pre><code>2023-03-08T21:06:50.3319163Z WARNING: Invalid Status code=403 text=Forbidden\n2023-03-08T21:06:50.3320374Z java.io.IOException: Invalid Status code=403 text=Forbidden\n</code></pre>\n<p>and even this error message...</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.asynchttpclient.ws.WebSocket.sendCloseFrame(int, String)&quot; because &quot;this.socket&quot; is null\n</code></pre>\n<p>...is the result of <em><code>devtools_http_handler</code></em> rejecting an incoming WebSocket connection from the http://localhost origin.</p>\n<hr />\n<h2>Details</h2>\n<p>This issue is the result of <em><code>Origin</code></em> header when set is being auto-resolved into meaningless value in <strong>Netty 4.x</strong> currently being used by Selenium. This issue was discussed in details in <a href=\"https://github.com/netty/netty/issues/9673\" rel=\"noreferrer\">Origin header is always sent from WebSocket client</a> and was addressed through <a href=\"https://github.com/netty/netty/pull/12941\" rel=\"noreferrer\">Fix generating the Origin header value for websocket handshake request</a>.</p>\n<hr />\n<h2>Solution</h2>\n<p>As per the <a href=\"https://www.selenium.dev/blog/2022/using-java11-httpclient/\" rel=\"noreferrer\"><em>Selenium Blog</em></a> there are a couple of approaches to solve this issue.</p>\n<ul>\n<li><p><em><strong>Using</strong></em> <a href=\"/questions/tagged/java-11\" class=\"post-tag\" title=\"show questions tagged &#39;java-11&#39;\" aria-label=\"show questions tagged &#39;java-11&#39;\" rel=\"tag\" aria-labelledby=\"tag-java-11-tooltip-container\">java-11</a> <em><strong>HTTP Client in Selenium</strong></em>: Selenium uses an HTTP client and associated WebSocket client for multiple purposes. <a href=\"https://github.com/AsyncHttpClient/async-http-client\" rel=\"noreferrer\">AsyncHttpClient</a> is an open-source library built on top of Netty. It allows the execution of HTTP requests and responses asynchronously. Additionally it also provides WebSocket support.But <em>AsyncHttpClient</em> is no more maintained since June 2021 as <em>Java 11+</em> provides a built-in HTTP and WebSocket client. Selenium can utilize it to replace AsyncHttpClient.</p>\n<ul>\n<li><p><em>Prerequisites</em>:</p>\n<pre><code>Project configured to use Java 11+\nUsing Selenium 4.5.0 as a minumum version\n</code></pre>\n</li>\n<li><p><em>Integrating the Java 11+ client</em>: As Java 11+ HTTP client sits in its own artifact it can be imported into your project that use Java 11+ as follows:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n  &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n  &lt;version&gt;4.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n  &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\n  &lt;version&gt;4.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p><em>Setting the system property</em>: You need to set the system property to indicate that Java 11+ Http client needs to be used. By default, it uses the <em>AsyncHttpClient</em>:</p>\n<pre><code>System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\n</code></pre>\n</li>\n</ul>\n</li>\n<li><p><em><strong>Using</strong></em> <a href=\"/questions/tagged/java-8\" class=\"post-tag\" title=\"show questions tagged &#39;java-8&#39;\" aria-label=\"show questions tagged &#39;java-8&#39;\" rel=\"tag\" aria-labelledby=\"tag-java-8-tooltip-container\">java-8</a> <em><strong>in Selenium</strong></em>: As the ChromeDriver <a href=\"https://groups.google.com/g/chromedriver-users/c/xL5-13_qGaA/m/cGk_5MvTAAAJ\" rel=\"noreferrer\">verbose log</a> suggests:</p>\n<pre><code>[32332:259:0214/190812.204658:ERROR:devtools_http_handler.cc(766)] Rejected an incoming WebSocket connection from the http://localhost:58642 origin. Use the command line flag --remote-allow-origins=http://localhost:58642 to allow connections from this origin or --remote-allow-origins=* to allow all origins.\n</code></pre>\n</li>\n</ul>\n<p>A quick fix to this issue would be to add the argument <em><code>--remote-allow-origins=*</code></em> as follows:</p>\n<ul>\n<li><p><em>Java</em>:</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n</li>\n</ul>\n<hr />\n<h2>References</h2>\n<p>Links to useful references:</p>\n<ul>\n<li><a href=\"https://github.com/SeleniumHQ/selenium/issues/11750\" rel=\"noreferrer\">Chrome 111 is not compatible with default HTTP Client</a></li>\n<li><a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=1422444\" rel=\"noreferrer\">Issue 1422444: Selenium Chromedriver no longer works with Chrome 111 update</a></li>\n<li><a href=\"https://chromiumdash.appspot.com/commit/0154caeefc74530d5cb57ce71608beb1b77bca39\" rel=\"noreferrer\">DevTools: reject debugging web socket connections with a defined Origin header</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":28032984,"reputation":1,"user_id":21411865,"display_name":"Nitee Asswani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679318423,"creation_date":1679318423,"answer_id":75790792,"question_id":75718422,"body_markdown":"I was facing the same error for different versions and this got resolved for me. The problem might be with the java, selenium and testNG versions compatibility. You can try with java 11 , selenium version as 4.5 or above and testNG version as 7.5","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>I was facing the same error for different versions and this got resolved for me. The problem might be with the java, selenium and testNG versions compatibility. You can try with java 11 , selenium version as 4.5 or above and testNG version as 7.5</p>\n"},{"tags":[],"owner":{"account_id":28119334,"reputation":21,"user_id":21485818,"display_name":"B.Harish Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679715207,"creation_date":1679715207,"answer_id":75839523,"question_id":75718422,"body_markdown":"I downloaded chromedriver_win32.zip for ChromeDriver 111.0.5563.64 version &amp; on workspace I added below code.\r\n\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n    WebDriver driver = new ChromeDriver(options);\r\nAfter this issue resolved","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>I downloaded chromedriver_win32.zip for ChromeDriver 111.0.5563.64 version &amp; on workspace I added below code.</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n<p>After this issue resolved</p>\n"},{"tags":[],"owner":{"account_id":28769474,"reputation":31,"user_id":22033549,"display_name":"avinash pottipadu"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686111940,"creation_date":1686111940,"answer_id":76419892,"question_id":75718422,"body_markdown":"I faced same issue and found solutions. I added below code then program worked perfectly.\r\n\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n    WebDriver driver = new ChromeDriver(options);\r\n\r\n","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>I faced same issue and found solutions. I added below code then program worked perfectly.</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7689584,"reputation":835,"user_id":8916210,"display_name":"Viktor Ilienko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696606122,"creation_date":1696606122,"answer_id":77245693,"question_id":75718422,"body_markdown":"In Chrome 117 there is an issue, that could be solved by adding a dependency:\r\n\r\n``` \r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;4.8.2&lt;/version&gt;\r\n&lt;/dependency&gt;","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>In Chrome 117 there is an issue, that could be solved by adding a dependency:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.8.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":28003016,"reputation":173,"user_id":21386874,"display_name":"JBM"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18975,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":75722029,"answer_count":7,"score":7,"last_activity_date":1696606122,"creation_date":1678686717,"question_id":75718422,"body_markdown":"I tried to invoke the website using Selenium and Chrome browser v111.\r\n\r\nThe browser is opening but the website is not invoking.\r\nIt is working properly but after updating chrome &quot;Version 111.0.5563.65 (Official Build) (64-bit)&quot; I&#39;m getting this problem:\r\n\r\n    org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection\r\n\r\nI tried,\r\nEclipse IDE for Enterprise Java Developers (includes Incubating components)\r\nVersion: 2020-12 (4.18.0)\r\nBuild id: 20201210-1552.\r\n\r\nThis is the code:\r\n\r\n     package com.testng.library_Files;\r\n    \r\n     import org.openqa.selenium.WebDriver;\r\n     import org.openqa.selenium.chrome.ChromeDriver;\r\n     import org.openqa.selenium.chrome.ChromeOptions;\r\n     import org.testng.annotations.Test;\r\n    \r\n     public class one {\r\n         WebDriver driver=null;\r\n\r\n         @Test(priority = 1)\r\n         public void DoSetup()\r\n         {\r\n             //System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;./src/main/java/drivers/chromedriver.exe&quot;);\r\n    \t     ChromeOptions options= new ChromeOptions(); \r\n    \t     options.setHeadless(true);\r\n             //driver= new ChromeDriver(options);\r\n             driver= new ChromeDriver();\r\n         }\r\n\r\n         @Test(priority = 2)\r\n         public void LaunchURL()\r\n         {\r\n             driver.get(&quot;https://www.google.com&quot;);\r\n         }\r\n     }\r\n\r\nPlease help me to solve this issue.","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>I tried to invoke the website using Selenium and Chrome browser v111.</p>\n<p>The browser is opening but the website is not invoking.\nIt is working properly but after updating chrome &quot;Version 111.0.5563.65 (Official Build) (64-bit)&quot; I'm getting this problem:</p>\n<pre><code>org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection\n</code></pre>\n<p>I tried,\nEclipse IDE for Enterprise Java Developers (includes Incubating components)\nVersion: 2020-12 (4.18.0)\nBuild id: 20201210-1552.</p>\n<p>This is the code:</p>\n<pre><code> package com.testng.library_Files;\n\n import org.openqa.selenium.WebDriver;\n import org.openqa.selenium.chrome.ChromeDriver;\n import org.openqa.selenium.chrome.ChromeOptions;\n import org.testng.annotations.Test;\n\n public class one {\n     WebDriver driver=null;\n\n     @Test(priority = 1)\n     public void DoSetup()\n     {\n         //System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;./src/main/java/drivers/chromedriver.exe&quot;);\n         ChromeOptions options= new ChromeOptions(); \n         options.setHeadless(true);\n         //driver= new ChromeDriver(options);\n         driver= new ChromeDriver();\n     }\n\n     @Test(priority = 2)\n     public void LaunchURL()\n     {\n         driver.get(&quot;https://www.google.com&quot;);\n     }\n }\n</code></pre>\n<p>Please help me to solve this issue.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1696688074,"post_id":77244100,"comment_id":136186945,"body_markdown":"I believe there is a misunderstanding. My app is not the client; it provides a REST endpoint for uploading files. My goal is to provide a meaningful response to all clients when the file upload limit is exceeded. I have no control over the clients that are uploading files to my app.","body":"I believe there is a misunderstanding. My app is not the client; it provides a REST endpoint for uploading files. My goal is to provide a meaningful response to all clients when the file upload limit is exceeded. I have no control over the clients that are uploading files to my app."},{"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"score":0,"creation_date":1696714427,"post_id":77244100,"comment_id":136189427,"body_markdown":"The &quot;Connection reset by peer&quot; error you mentioned earlier says that the client is experiencing a network-level issue before it can receive your custom error message. My guess was a client-side timeout. You should start by figuring out which side is resetting the connection. Is it being closed on the server or the client side? After that you can act accordingly. I&#39;ve already suggested a solution for the case of connection being closed prematurely from client.","body":"The &quot;Connection reset by peer&quot; error you mentioned earlier says that the client is experiencing a network-level issue before it can receive your custom error message. My guess was a client-side timeout. You should start by figuring out which side is resetting the connection. Is it being closed on the server or the client side? After that you can act accordingly. I&#39;ve already suggested a solution for the case of connection being closed prematurely from client."}],"tags":[],"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696592060,"creation_date":1696592060,"answer_id":77244100,"question_id":77244050,"body_markdown":"In cases where the client exceeds the file size limit, it might choose to terminate the connection without waiting for a response, which is why your custom error message isn&#39;t reaching the client. Rather than closing the connection immediately, your client should be designed to process this status code as a valid server response.\r\n\r\nYou should modify your client application&#39;s code (e.g., a web browser, a mobile app, or any software making HTTP requests to your Spring Boot server) to handle the HTTP 413 Payload Too Large status code as returned by your Spring Boot server when the file size limit is exceeded.\r\n\r\nIf you need more help on that, please make sure to provide the client side code aswell.\r\n","title":"How to return a custom error message for MaxUploadSizeExceededException?","body":"<p>In cases where the client exceeds the file size limit, it might choose to terminate the connection without waiting for a response, which is why your custom error message isn't reaching the client. Rather than closing the connection immediately, your client should be designed to process this status code as a valid server response.</p>\n<p>You should modify your client application's code (e.g., a web browser, a mobile app, or any software making HTTP requests to your Spring Boot server) to handle the HTTP 413 Payload Too Large status code as returned by your Spring Boot server when the file size limit is exceeded.</p>\n<p>If you need more help on that, please make sure to provide the client side code aswell.</p>\n"},{"comments":[{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1696688236,"post_id":77244426,"comment_id":136186967,"body_markdown":"Could you provide more details in your answer? I believe that when the log message is written, the exception handler (and the ControllerAdvice) is engaged. Or perhaps I am mistaken?","body":"Could you provide more details in your answer? I believe that when the log message is written, the exception handler (and the ControllerAdvice) is engaged. Or perhaps I am mistaken?"}],"tags":[],"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696595213,"creation_date":1696595213,"answer_id":77244426,"question_id":77244050,"body_markdown":"had similar issue and in our case the issue was with scanBasePackages. Due to configuration issue, the Application was not able to locate the ControllerAdvice class and as a result it wrote only log entry and thrown the original error.\r\n\r\nAfter correcting the scanBasePackages, the application was able to locate the  ControllerAdvice class ans thrown custome error message. ","title":"How to return a custom error message for MaxUploadSizeExceededException?","body":"<p>had similar issue and in our case the issue was with scanBasePackages. Due to configuration issue, the Application was not able to locate the ControllerAdvice class and as a result it wrote only log entry and thrown the original error.</p>\n<p>After correcting the scanBasePackages, the application was able to locate the  ControllerAdvice class ans thrown custome error message.</p>\n"}],"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696605988,"creation_date":1696591395,"question_id":77244050,"body_markdown":"I have a Spring Boot application (running with Spring Boot v3.0.5, Spring v6.0.7) where I want to limit the size of file uploads and return a custom error message when the limit is exceeded. I have set the maximum file size in my application.properties file:\r\n\r\n    spring.servlet.multipart.max-file-size=1MB\r\n    spring.servlet.multipart.max-request-size=1MB\r\n\r\nAnd I have created a @ControllerAdvice class to handle MaxUploadSizeExceededException and return a custom error message:\r\n\r\n```java\r\n@ControllerAdvice\r\npublic class FileUploadExceptionAdvice {\r\n\r\n    @ExceptionHandler(MaxUploadSizeExceededException.class)\r\n    public ResponseEntity&lt;String&gt; handleMaxUploadSizeExceededException(MaxUploadSizeExceededException exc) {\r\n        return ResponseEntity\r\n                .status(HttpStatus.PAYLOAD_TOO_LARGE)\r\n                .body(&quot;File upload failed: File too large!&quot;);\r\n    }\r\n}\r\n``` \r\n\r\nHowever, when I test the file upload with a file that exceeds the size limit, the client receives a &quot;Connection reset by peer&quot; error instead of my custom error message, although the MaxUploadSizeExceededException is correctly logged in the console.\r\n\r\nHow can I ensure that my custom error message is returned to the client when the file size limit is exceeded?\r\n\r\n","title":"How to return a custom error message for MaxUploadSizeExceededException?","body":"<p>I have a Spring Boot application (running with Spring Boot v3.0.5, Spring v6.0.7) where I want to limit the size of file uploads and return a custom error message when the limit is exceeded. I have set the maximum file size in my application.properties file:</p>\n<pre><code>spring.servlet.multipart.max-file-size=1MB\nspring.servlet.multipart.max-request-size=1MB\n</code></pre>\n<p>And I have created a @ControllerAdvice class to handle MaxUploadSizeExceededException and return a custom error message:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\npublic class FileUploadExceptionAdvice {\n\n    @ExceptionHandler(MaxUploadSizeExceededException.class)\n    public ResponseEntity&lt;String&gt; handleMaxUploadSizeExceededException(MaxUploadSizeExceededException exc) {\n        return ResponseEntity\n                .status(HttpStatus.PAYLOAD_TOO_LARGE)\n                .body(&quot;File upload failed: File too large!&quot;);\n    }\n}\n</code></pre>\n<p>However, when I test the file upload with a file that exceeds the size limit, the client receives a &quot;Connection reset by peer&quot; error instead of my custom error message, although the MaxUploadSizeExceededException is correctly logged in the console.</p>\n<p>How can I ensure that my custom error message is returned to the client when the file size limit is exceeded?</p>\n"},{"tags":["java","opencv","geometry"],"answers":[{"comments":[{"owner":{"account_id":8538748,"reputation":487,"user_id":6399544,"accept_rate":57,"display_name":"Cesar"},"score":0,"creation_date":1696599689,"post_id":77244895,"comment_id":136177805,"body_markdown":"Thanks for your answer.\nI know those 2 are &quot;equivalent&quot;.\nBut as we do a lot of transformation depending on the angles, etc ... I kinda broke everything.\n\nI just wanted to know why those are different after the upgrade.","body":"Thanks for your answer. I know those 2 are &quot;equivalent&quot;. But as we do a lot of transformation depending on the angles, etc ... I kinda broke everything.  I just wanted to know why those are different after the upgrade."},{"owner":{"account_id":3072614,"reputation":12307,"user_id":2602877,"display_name":"Christoph Rackwitz"},"score":0,"creation_date":1696600058,"post_id":77244895,"comment_id":136177870,"body_markdown":"perhaps someone tweaked the implementation in opencv. maybe it&#39;s just some numerical matter that happened to settle one way or another. impossible to know. an upgrade from v3.2 is long overdue though. you can expect a lot of internals to have changed since then. the results will be equivalent or better though. opencv contains some regression tests and accuracy tests. they would notice if anything were changing for the worse.","body":"perhaps someone tweaked the implementation in opencv. maybe it&#39;s just some numerical matter that happened to settle one way or another. impossible to know. an upgrade from v3.2 is long overdue though. you can expect a lot of internals to have changed since then. the results will be equivalent or better though. opencv contains some regression tests and accuracy tests. they would notice if anything were changing for the worse."},{"owner":{"account_id":8538748,"reputation":487,"user_id":6399544,"accept_rate":57,"display_name":"Cesar"},"score":0,"creation_date":1696600483,"post_id":77244895,"comment_id":136177977,"body_markdown":"I agree. \nThanks for your clear answer. I will tweak everything on our side then.","body":"I agree.  Thanks for your clear answer. I will tweak everything on our side then."}],"tags":[],"owner":{"account_id":3072614,"reputation":12307,"user_id":2602877,"display_name":"Christoph Rackwitz"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1696601327,"creation_date":1696599141,"answer_id":77244895,"question_id":77244343,"body_markdown":"The *reason* for the differing results would take some archaeology to find. OpenCV 3.2 is quite old. A lot of OpenCV&#39;s internals may have been improved since then. I don&#39;t think the docs specify the range of angles or relationship between width and height. It would have been acceptable for someone to change the implementation details.\r\n\r\nDismissing differences beginning in the third or fourth decimal, those two representations are ***equivalent*** though:\r\n\r\n```\r\n{{485.0001220703125, 641.5073852539062} 793x23 * -0.5055378675460815}}\r\n{{485.0000915527344, 641.5073852539062} 23x793 * 89.49445343017578}}\r\n\r\n```\r\n\r\n`(-0.5055) % 90 = 89.4945`\r\n\r\n90 degrees is a quarter turn. A quarter turn is equivalent to swapping width and height.\r\n\r\n\r\nIf you need them in some canonical form, swap size and adjust angle to be positive and less than 90 degrees.\r\n\r\nOr better yet, because that can jitter for boxes with close to 0 degrees of angle: canonize the angle to be within -45 to +45 degrees. That makes sense to do if you expect mostly axis-aligned objects.\r\n\r\nPseudocode/Python:\r\n```python\r\nold_angle = np.linspace(-90, +90, 7)\r\ntemp = old_angle + 45\r\nquarter_turns = temp // 90 # division and floor\r\nnew_angle = temp % 90 - 45\r\n\r\n# array([-90., -60., -30.,   0.,  30.,  60.,  90.]) # old_angle\r\n# array([ -1.,  -1.,   0.,   0.,   0.,   1.,   1.]) # quarter_turns\r\n# array([  0.,  30., -30.,   0.,  30., -30.,   0.]) # new_angle\r\n\r\n...\r\n\r\nif quarter_turns % 2 != 0: # single angle, not array\r\n    height, width = width, height\r\n```","title":"ReturnedRect are inverted after upgrade","body":"<p>The <em>reason</em> for the differing results would take some archaeology to find. OpenCV 3.2 is quite old. A lot of OpenCV's internals may have been improved since then. I don't think the docs specify the range of angles or relationship between width and height. It would have been acceptable for someone to change the implementation details.</p>\n<p>Dismissing differences beginning in the third or fourth decimal, those two representations are <em><strong>equivalent</strong></em> though:</p>\n<pre><code>{{485.0001220703125, 641.5073852539062} 793x23 * -0.5055378675460815}}\n{{485.0000915527344, 641.5073852539062} 23x793 * 89.49445343017578}}\n\n</code></pre>\n<p><code>(-0.5055) % 90 = 89.4945</code></p>\n<p>90 degrees is a quarter turn. A quarter turn is equivalent to swapping width and height.</p>\n<p>If you need them in some canonical form, swap size and adjust angle to be positive and less than 90 degrees.</p>\n<p>Or better yet, because that can jitter for boxes with close to 0 degrees of angle: canonize the angle to be within -45 to +45 degrees. That makes sense to do if you expect mostly axis-aligned objects.</p>\n<p>Pseudocode/Python:</p>\n<pre class=\"lang-py prettyprint-override\"><code>old_angle = np.linspace(-90, +90, 7)\ntemp = old_angle + 45\nquarter_turns = temp // 90 # division and floor\nnew_angle = temp % 90 - 45\n\n# array([-90., -60., -30.,   0.,  30.,  60.,  90.]) # old_angle\n# array([ -1.,  -1.,   0.,   0.,   0.,   1.,   1.]) # quarter_turns\n# array([  0.,  30., -30.,   0.,  30., -30.,   0.]) # new_angle\n\n...\n\nif quarter_turns % 2 != 0: # single angle, not array\n    height, width = width, height\n</code></pre>\n"}],"owner":{"account_id":8538748,"reputation":487,"user_id":6399544,"accept_rate":57,"display_name":"Cesar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77244895,"answer_count":1,"score":1,"last_activity_date":1696605920,"creation_date":1696594380,"question_id":77244343,"body_markdown":"I&#39;m working on a big project, and we need to upgrade OpenCV from 3.2 to 4.6 on our Java project.\r\n\r\nUsing the exact same image I&#39;ve got inverted results:\r\n\r\nGetting contours : \r\n\r\n    matOfPoint = contours.get(i);\r\n    MatOfPoint2f contour2f = new MatOfPoint2f(matOfPoint.toArray());\r\n    RotatedRect rotatedRect = Imgproc.minAreaRect(contour2f);\r\n\r\nI version 3.2 of OpenCV result of **rotatedRect** is: \r\n\r\n    {{485.0001220703125, 641.5073852539062} 793x23 * -0.5055378675460815}}\r\n\r\nIn version 4.6: \r\n\r\n    {{485.0000915527344, 641.5073852539062} 23x793 * 89.49445343017578}}\r\n\r\nWhy are the **width**, **height** and **angles** inverted?\r\n\r\nI&#39;ve got a bunch of calculations after this, and I would like to avoid changing them too much.","title":"ReturnedRect are inverted after upgrade","body":"<p>I'm working on a big project, and we need to upgrade OpenCV from 3.2 to 4.6 on our Java project.</p>\n<p>Using the exact same image I've got inverted results:</p>\n<p>Getting contours :</p>\n<pre><code>matOfPoint = contours.get(i);\nMatOfPoint2f contour2f = new MatOfPoint2f(matOfPoint.toArray());\nRotatedRect rotatedRect = Imgproc.minAreaRect(contour2f);\n</code></pre>\n<p>I version 3.2 of OpenCV result of <strong>rotatedRect</strong> is:</p>\n<pre><code>{{485.0001220703125, 641.5073852539062} 793x23 * -0.5055378675460815}}\n</code></pre>\n<p>In version 4.6:</p>\n<pre><code>{{485.0000915527344, 641.5073852539062} 23x793 * 89.49445343017578}}\n</code></pre>\n<p>Why are the <strong>width</strong>, <strong>height</strong> and <strong>angles</strong> inverted?</p>\n<p>I've got a bunch of calculations after this, and I would like to avoid changing them too much.</p>\n"},{"tags":["java","eclipse","hibernate","jdbc","spring-data"],"comments":[{"owner":{"account_id":6503402,"reputation":117,"user_id":5033276,"display_name":"Eugene K."},"score":0,"creation_date":1547631050,"post_id":54211638,"comment_id":95253605,"body_markdown":"You need to post the full exception stacktrace, the message you show probably misses its end, so there might be other errors that cause JDBCConnectionException","body":"You need to post the full exception stacktrace, the message you show probably misses its end, so there might be other errors that cause JDBCConnectionException"}],"answers":[{"tags":[],"owner":{"account_id":11747381,"reputation":320,"user_id":8597738,"display_name":"Sabesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547629772,"creation_date":1547623892,"answer_id":54212245,"question_id":54211638,"body_markdown":"Can you make the following changes to your code. \r\n\r\n    &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n         &lt;props&gt;\r\n            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;\r\n            &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;\r\n        &lt;/props&gt;\r\n    &lt;/property&gt;\r\n\r\nAnd add below property in addition and remove the `@Autowired` from sessionFactory\r\n\r\n    &lt;bean id=&quot;employeeDAO&quot; class=&quot;yourbasepackage.EmployeeRepositoryDAOImple&quot;&gt; \r\n      &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n","title":"Unable to open JDBC Connection for DDL execution","body":"<p>Can you make the following changes to your code. </p>\n\n<pre><code>&lt;property name=\"hibernateProperties\"&gt;\n     &lt;props&gt;\n        &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;\n        &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/prop&gt;\n    &lt;/props&gt;\n&lt;/property&gt;\n</code></pre>\n\n<p>And add below property in addition and remove the <code>@Autowired</code> from sessionFactory</p>\n\n<pre><code>&lt;bean id=\"employeeDAO\" class=\"yourbasepackage.EmployeeRepositoryDAOImple\"&gt; \n  &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10826858,"reputation":470,"user_id":7962526,"display_name":"Aarthi Ananth"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1552422040,"creation_date":1547788793,"answer_id":54248115,"question_id":54211638,"body_markdown":"**Solution:**\r\n\r\nUpgrading MySql connector jar from 5.1 to 8.0 fixed the problem - my code was not the problem.\r\n","title":"Unable to open JDBC Connection for DDL execution","body":"<p><strong>Solution:</strong></p>\n\n<p>Upgrading MySql connector jar from 5.1 to 8.0 fixed the problem - my code was not the problem.</p>\n"},{"tags":[],"owner":{"account_id":3241401,"reputation":1103,"user_id":2734348,"display_name":"Anand Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1557912031,"creation_date":1557912031,"answer_id":56145777,"question_id":54211638,"body_markdown":"I solved this by correcting mysql credentials in the src &gt; main &gt; `application.properties` file\r\n\r\nCheck if your mysql credentials are correct and mysql server is running.","title":"Unable to open JDBC Connection for DDL execution","body":"<p>I solved this by correcting mysql credentials in the src > main > <code>application.properties</code> file</p>\n\n<p>Check if your mysql credentials are correct and mysql server is running.</p>\n"},{"tags":[],"owner":{"account_id":3122384,"reputation":168,"user_id":2641909,"display_name":"hfunes.com"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566225413,"creation_date":1566225413,"answer_id":57558932,"question_id":54211638,"body_markdown":"In my case didn&#39;t have the right autentication permission for root user.\r\nI knew that because logged to database just only tipying that:\r\n\r\n&lt;pre&gt;sudo mysql&lt;/pre&gt;\r\n\r\nSo, once logged into MySQL I typed that:\r\n\r\n&lt;pre&gt;SELECT user,authentication_string,plugin,host FROM mysql.user;&lt;/pre&gt;\r\n\r\nAnd saw the value auth_socket in the plugin column of root user.\r\nSo, I typed that:\r\n\r\n&lt;pre&gt;ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;PASSWORD&#39;;&lt;/pre&gt;\r\n\r\nThen restarted tomcat and problem solved.\r\n\r\nHenceforth, have to log into mysql typing:\r\n\r\n&lt;pre&gt;mysql -u root -pPASSWORD&lt;/pre&gt;\r\n\r\nHope It helps someone :)","title":"Unable to open JDBC Connection for DDL execution","body":"<p>In my case didn't have the right autentication permission for root user.\nI knew that because logged to database just only tipying that:</p>\n\n<pre>sudo mysql</pre>\n\n<p>So, once logged into MySQL I typed that:</p>\n\n<pre>SELECT user,authentication_string,plugin,host FROM mysql.user;</pre>\n\n<p>And saw the value auth_socket in the plugin column of root user.\nSo, I typed that:</p>\n\n<pre>ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'PASSWORD';</pre>\n\n<p>Then restarted tomcat and problem solved.</p>\n\n<p>Henceforth, have to log into mysql typing:</p>\n\n<pre>mysql -u root -pPASSWORD</pre>\n\n<p>Hope It helps someone :)</p>\n"},{"tags":[],"owner":{"account_id":5746045,"reputation":1135,"user_id":4537268,"display_name":"Ganesh Giri"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696605710,"creation_date":1577611000,"answer_id":59518142,"question_id":54211638,"body_markdown":"Check your Hibernate configuration:\r\n    \r\n```ini\r\nspring.datasource.url=jdbc:mysql://localhost:3306/spring_boot_db\r\nspring.datasource.username=root\r\nspring.datasource.password=r00t\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.database-platform = org.hibernate.dialect.MySQL5Dialect\r\nspring.jpa.generate-ddl=true\r\nspring.jpa.hibernate.ddl-auto = update\r\n```","title":"Unable to open JDBC Connection for DDL execution","body":"<p>Check your Hibernate configuration:</p>\n<pre class=\"lang-ini prettyprint-override\"><code>spring.datasource.url=jdbc:mysql://localhost:3306/spring_boot_db\nspring.datasource.username=root\nspring.datasource.password=r00t\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.database-platform = org.hibernate.dialect.MySQL5Dialect\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.ddl-auto = update\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20714455,"reputation":365,"user_id":15234088,"display_name":"Scilla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617355900,"creation_date":1617355900,"answer_id":66917259,"question_id":54211638,"body_markdown":"this is what worked for me\r\n\r\n```\r\nmysql&gt;  CREATE USER &#39;scilla&#39;@&#39;172.17.0.1&#39; IDENTIFIED BY &#39;password&#39;;\r\nmysql&gt;  GRANT ALL PRIVILEGES ON *.* TO &#39;scilla&#39;@&#39;172.17.0.1&#39; WITH GRANT OPTION;\r\nmysql&gt; flush privileges; \r\nmysql&gt; exit\r\n\r\n\r\nspring:\r\n  datasource:\r\n    driverClassName: com.mysql.jdbc.Driver\r\n    url: jdbc:mysql://localhost:3306/scilla\r\n    username: scilla\r\n    password: password\r\n  jpa:\r\n    hibernate:\r\n      ddl-auto: validate\r\n    database: mysql\r\n    show-sql: true\r\n    database-platform: org.hibernate.dialect.MySQL5Dialect\r\n    hibernate.ddl-auto: update\r\n\r\n```","title":"Unable to open JDBC Connection for DDL execution","body":"<p>this is what worked for me</p>\n<pre><code>mysql&gt;  CREATE USER 'scilla'@'172.17.0.1' IDENTIFIED BY 'password';\nmysql&gt;  GRANT ALL PRIVILEGES ON *.* TO 'scilla'@'172.17.0.1' WITH GRANT OPTION;\nmysql&gt; flush privileges; \nmysql&gt; exit\n\n\nspring:\n  datasource:\n    driverClassName: com.mysql.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/scilla\n    username: scilla\n    password: password\n  jpa:\n    hibernate:\n      ddl-auto: validate\n    database: mysql\n    show-sql: true\n    database-platform: org.hibernate.dialect.MySQL5Dialect\n    hibernate.ddl-auto: update\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20621616,"reputation":715,"user_id":15138511,"display_name":"Salim Nadji"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621359603,"creation_date":1621359603,"answer_id":67591375,"question_id":54211638,"body_markdown":"i had the same problem, i recommand you to revise the way you are establishing the connection to the database via reviewing the configuration(application.properties):\r\n\r\n    ## Spring Datasource Configuration\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/(package_name)?useSSL=false&amp;serverTimezone=UTC&amp;useLegacyDatetimeCode=false\r\n    spring.datasource.username=****\r\n    spring.datasource.password=****\r\n    \r\n    ## JPA Hibernate Properties\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\n","title":"Unable to open JDBC Connection for DDL execution","body":"<p>i had the same problem, i recommand you to revise the way you are establishing the connection to the database via reviewing the configuration(application.properties):</p>\n<pre><code>## Spring Datasource Configuration\nspring.datasource.url=jdbc:mysql://localhost:3306/(package_name)?useSSL=false&amp;serverTimezone=UTC&amp;useLegacyDatetimeCode=false\nspring.datasource.username=****\nspring.datasource.password=****\n\n## JPA Hibernate Properties\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17104739,"reputation":11,"user_id":12377003,"display_name":"RodRivas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646946598,"creation_date":1646946598,"answer_id":71430849,"question_id":54211638,"body_markdown":"My problem was in the timezone configuration. I added:\r\n\r\n    ?useSSL=false&amp;useTimezone=true&amp;serverTimezone=UTC\r\n\r\nin application.properties. The whole line looked like this:\r\n\r\n    db.url= jdbc:mysql://localhost:3306/indigo?useSSL=false&amp;useTimezone=true&amp;serverTimezone=UTC\r\n\r\n","title":"Unable to open JDBC Connection for DDL execution","body":"<p>My problem was in the timezone configuration. I added:</p>\n<pre><code>?useSSL=false&amp;useTimezone=true&amp;serverTimezone=UTC\n</code></pre>\n<p>in application.properties. The whole line looked like this:</p>\n<pre><code>db.url= jdbc:mysql://localhost:3306/indigo?useSSL=false&amp;useTimezone=true&amp;serverTimezone=UTC\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22761741,"reputation":1,"user_id":16920453,"display_name":"San Thiago Teixeira"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666993268,"creation_date":1666993268,"answer_id":74241183,"question_id":54211638,"body_markdown":"Make sure if you did up a image on docker for DB connection. This happens to me when I don&#39;t run Docker Desktop.","title":"Unable to open JDBC Connection for DDL execution","body":"<p>Make sure if you did up a image on docker for DB connection. This happens to me when I don't run Docker Desktop.</p>\n"},{"tags":[],"owner":{"account_id":13754432,"reputation":11,"user_id":9925743,"display_name":"Jai Jadhav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694243779,"creation_date":1694243779,"answer_id":77071222,"question_id":54211638,"body_markdown":"1.Test your mysql connection with the correct credentials\r\n2.RE-run the spring boot application.","title":"Unable to open JDBC Connection for DDL execution","body":"<p>1.Test your mysql connection with the correct credentials\n2.RE-run the spring boot application.</p>\n"}],"owner":{"account_id":10826858,"reputation":470,"user_id":7962526,"display_name":"Aarthi Ananth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123342,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":10,"score":20,"last_activity_date":1696605710,"creation_date":1547620689,"question_id":54211638,"body_markdown":"I get the following error with my spring beans, \r\n\r\n&gt; Error creating bean with name &#39;employeeRepositoryDAOImple&#39;:\r\n&gt; Unsatisfied dependency expressed through method &#39;setSessionFactory&#39;\r\n&gt; parameter 0; nested exception is\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;sessionFactory&#39; defined in class path\r\n&gt; resource [config.xml]: Invocation of init method failed; nested\r\n&gt; exception is org.hibernate.exception.JDBCConnectionException: Unable\r\n&gt; to open JDBC Connection for DDL execution\r\n\r\nClient.java \r\n\r\n    public class Client {\r\n\t    public static void main(String arg[]) {\r\n       \r\n            AbstractApplicationContext ctx = new     ClassPathXmlApplicationContext(&quot;config.xml&quot;);\r\n            EmployeeService employeeService = (EmployeeService) ctx.getBean(&quot;empoyeService&quot;);\r\n       \r\n            Employee employee1 = new Employee(100001, &quot;Alex&quot;, &quot;Account&quot;);\r\n            Employee employee2 = new Employee(100002, &quot;Sam&quot;, &quot;HR&quot;);\r\n        \r\n            employeeService.insert(employee1);\r\n            employeeService.insert(employee2);\r\n            System.out.println(&quot;Records are successfully added..&quot;);\r\n            ctx.close();\r\n    \r\n\t    }\r\n    }\r\n\r\nEntity.java\r\n\r\n    @Entity\r\n    public class Employee {\r\n\t@Id\r\n\tprivate int empId;\r\n\tprivate String empName;\r\n\tprivate String department;\r\n\tpublic Employee() {\r\n\t\tsuper();\r\n\t}\r\n\tpublic Employee(int empId,String empName,String deptName)\r\n\t{\r\n\t\tsuper();\r\n\t\tthis.empId=empId;\r\n\t\tthis.empName=empName;\r\n\t\tthis.department=deptName;\r\n\t}\r\n\t\r\n\tpublic int getEmpId() {\r\n\t\treturn empId;\r\n\t}\r\n\tpublic void setEmpId(int empId) {\r\n\t\tthis.empId = empId;\r\n\t}\r\n\tpublic String getEmpName() {\r\n\t\treturn empName;\r\n\t}\r\n\tpublic void setEmpName(String empName) {\r\n\t\tthis.empName = empName;\r\n\t}\r\n\tpublic String getDepartment() {\r\n\t\treturn department;\r\n\t}\r\n\tpublic void setDepartment(String department) {\r\n\t\tthis.department = department;\r\n\t}\r\n\t@Override\r\n\tpublic String toString()\r\n\t{\r\n\t\treturn &quot;Employee Empid=&quot;+empId+&quot; empName=&quot;+empName+&quot; department=&quot;+department;\r\n\t}\r\n\t\r\n\r\n    }\r\n\r\nEmployeeService.java\r\n\r\n    @Service(&quot;empoyeService&quot;)\r\n    public class EmployeeServiceImpl implements EmployeeService {\r\n\t@Autowired\r\n\tEmployeeRepository emprepo;\r\n\t@Override\r\n\tpublic void insert(Employee employee) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\temprepo.insert(employee);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic int delete(int empid) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn emprepo.delete(empid);\r\n\t}\r\n    \r\n    }\r\n    EmployeeRepositoryDAOImple.java\r\n       @Repository\r\n       public class EmployeeRepositoryDAOImple implements EmployeeRepository{\r\n\tprivate SessionFactory sessionFactory;\r\n    @Autowired\r\n    public void setSessionFactory(SessionFactory sessionFactory) {\r\n        this.sessionFactory = sessionFactory;\r\n    }\r\n\t@Override\r\n\tpublic void insert(Employee employee) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tSession session = sessionFactory.openSession();\r\n        Transaction tx = session.beginTransaction();\r\n        session.save(employee);\r\n        tx.commit();\r\n        session.close();\r\n\t\t\r\n\t}}\r\nConfig.xml\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n    http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    http://www.springframework.org/schema/context\r\n    http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n    &lt;!-- Define Service and Repository beans using auto scan feature of         Spring --&gt;\r\n    &lt;context:component-scan base-package=&quot;com.orm.employee.dao,com.orm.employee.Service&quot; /&gt;\r\n    \r\n    &lt;!-- Define DataSource bean using DriverManagerDataSource class of Spring --&gt; \r\n    &lt;bean id=&quot;myDataSource&quot;\r\n        class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n        &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;\r\n        &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/myschema&quot;&gt;&lt;/property&gt;\r\n        &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;xxxx&quot;&gt;&lt;/property&gt;\r\n    &lt;/bean&gt;\r\n    &lt;!-- Define sessionFactory bean of Spring class --&gt;\r\n    &lt;bean id=&quot;sessionFactory&quot;\r\n        class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n        &lt;property name=&quot;packagesToScan&quot; value=&quot;com.orm.employee.dao&quot; /&gt;\r\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n            &lt;value&gt;\r\n                hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\n                hibernate.hbm2ddl.auto=update\r\n                    \r\n            &lt;/value&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n&lt;/beans&gt;\r\n\r\n    Exception\r\n    SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\n    SLF4J: Defaulting to no-operation (NOP) logger implementation\r\n    SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\n    log4j:WARN No appenders could be found for logger (org.jboss.logging).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n    Exception in thread &quot;main&quot;      org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;employeeRepositoryDAOImple&#39;: Unsatisfied dependency expressed through method &#39;setSessionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in class path resource [config.xml]: Invocation of init method failed; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:676)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1378)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)\r\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\r\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\r\n\tat com.orm.employee.client.Client.main(Client.java:14)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException:      Error creating bean with name &#39;sessionFactory&#39; defined in class path resource [config.xml]: Invocation of init method failed; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1745)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:668)\r\n\t... 15 more\r\n    Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:48)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:69)\r\n\tat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:60)\r\n\tat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:67)\r\n\tat org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.getTables(InformationExtractorJdbcDatabaseMetaDataImpl.java:329)\r\n\tat org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:120)\r\n\tat org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:65)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:207)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:114)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:183)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:310)\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:467)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:708)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)\r\n\tat org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:615)\r\n\tat org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:599)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1804)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)\r\n\t... 25 more\r\n    Caused by:     com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Client does not support authentication protocol requested by server; consider upgrading MySQL client\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat com.mysql.jdbc.Util.handleNewInstance(Util.java:353)\r\n\tat com.mysql.jdbc.Util.getInstance(Util.java:336)\r\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:985)\r\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:957)\r\n\tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2938)\r\n\tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:855)\r\n\tat com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3337)\r\n\tat com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1217)\r\n\tat com.mysql.jdbc.Connection.createNewIO(Connection.java:1930)\r\n\tat com.mysql.jdbc.Connection.&lt;init&gt;(Connection.java:716)\r\n\tat com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:46)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat com.mysql.jdbc.Util.handleNewInstance(Util.java:353)\r\n\tat com.mysql.jdbc.Connection.getInstance(Connection.java:295)\r\n\tat com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:266)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:664)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:208)\r\n\tat org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:154)\r\n\tat org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:145)\r\n\tat org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:205)\r\n\tat org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:169)\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:43)\r\n\t... 42 more\r\n","title":"Unable to open JDBC Connection for DDL execution","body":"<p>I get the following error with my spring beans, </p>\n\n<blockquote>\n  <p>Error creating bean with name 'employeeRepositoryDAOImple':\n  Unsatisfied dependency expressed through method 'setSessionFactory'\n  parameter 0; nested exception is\n  org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'sessionFactory' defined in class path\n  resource [config.xml]: Invocation of init method failed; nested\n  exception is org.hibernate.exception.JDBCConnectionException: Unable\n  to open JDBC Connection for DDL execution</p>\n</blockquote>\n\n<p>Client.java </p>\n\n<pre><code>public class Client {\n    public static void main(String arg[]) {\n\n        AbstractApplicationContext ctx = new     ClassPathXmlApplicationContext(\"config.xml\");\n        EmployeeService employeeService = (EmployeeService) ctx.getBean(\"empoyeService\");\n\n        Employee employee1 = new Employee(100001, \"Alex\", \"Account\");\n        Employee employee2 = new Employee(100002, \"Sam\", \"HR\");\n\n        employeeService.insert(employee1);\n        employeeService.insert(employee2);\n        System.out.println(\"Records are successfully added..\");\n        ctx.close();\n\n    }\n}\n</code></pre>\n\n<p>Entity.java</p>\n\n<pre><code>@Entity\npublic class Employee {\n@Id\nprivate int empId;\nprivate String empName;\nprivate String department;\npublic Employee() {\n    super();\n}\npublic Employee(int empId,String empName,String deptName)\n{\n    super();\n    this.empId=empId;\n    this.empName=empName;\n    this.department=deptName;\n}\n\npublic int getEmpId() {\n    return empId;\n}\npublic void setEmpId(int empId) {\n    this.empId = empId;\n}\npublic String getEmpName() {\n    return empName;\n}\npublic void setEmpName(String empName) {\n    this.empName = empName;\n}\npublic String getDepartment() {\n    return department;\n}\npublic void setDepartment(String department) {\n    this.department = department;\n}\n@Override\npublic String toString()\n{\n    return \"Employee Empid=\"+empId+\" empName=\"+empName+\" department=\"+department;\n}\n\n\n}\n</code></pre>\n\n<p>EmployeeService.java</p>\n\n<pre><code>@Service(\"empoyeService\")\npublic class EmployeeServiceImpl implements EmployeeService {\n@Autowired\nEmployeeRepository emprepo;\n@Override\npublic void insert(Employee employee) {\n    // TODO Auto-generated method stub\n    emprepo.insert(employee);\n}\n\n@Override\npublic int delete(int empid) {\n    // TODO Auto-generated method stub\n    return emprepo.delete(empid);\n}\n\n}\nEmployeeRepositoryDAOImple.java\n   @Repository\n   public class EmployeeRepositoryDAOImple implements EmployeeRepository{\nprivate SessionFactory sessionFactory;\n@Autowired\npublic void setSessionFactory(SessionFactory sessionFactory) {\n    this.sessionFactory = sessionFactory;\n}\n@Override\npublic void insert(Employee employee) {\n    // TODO Auto-generated method stub\n    Session session = sessionFactory.openSession();\n    Transaction tx = session.beginTransaction();\n    session.save(employee);\n    tx.commit();\n    session.close();\n\n}}\n</code></pre>\n\n<p>Config.xml</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans.xsd\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n&lt;!-- Define Service and Repository beans using auto scan feature of         Spring --&gt;\n&lt;context:component-scan base-package=\"com.orm.employee.dao,com.orm.employee.Service\" /&gt;\n\n&lt;!-- Define DataSource bean using DriverManagerDataSource class of Spring --&gt; \n&lt;bean id=\"myDataSource\"\n    class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;\n    &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/myschema\"&gt;&lt;/property&gt;\n    &lt;property name=\"username\" value=\"root\"&gt;&lt;/property&gt;\n    &lt;property name=\"password\" value=\"xxxx\"&gt;&lt;/property&gt;\n&lt;/bean&gt;\n&lt;!-- Define sessionFactory bean of Spring class --&gt;\n&lt;bean id=\"sessionFactory\"\n    class=\"org.springframework.orm.hibernate5.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"myDataSource\" /&gt;\n    &lt;property name=\"packagesToScan\" value=\"com.orm.employee.dao\" /&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;value&gt;\n            hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\n            hibernate.hbm2ddl.auto=update\n\n        &lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>Exception\nSLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nlog4j:WARN No appenders could be found for logger (org.jboss.logging).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\nException in thread \"main\"      org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'employeeRepositoryDAOImple': Unsatisfied dependency expressed through method 'setSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [config.xml]: Invocation of init method failed; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:676)\nat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1378)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)\nat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\nat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\nat com.orm.employee.client.Client.main(Client.java:14)\nCaused by: org.springframework.beans.factory.BeanCreationException:      Error creating bean with name 'sessionFactory' defined in class path resource [config.xml]: Invocation of init method failed; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1745)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:668)\n... 15 more\nCaused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:48)\nat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\nat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\nat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\nat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:69)\nat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:60)\nat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:67)\nat org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.getTables(InformationExtractorJdbcDatabaseMetaDataImpl.java:329)\nat org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:120)\nat org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:65)\nat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:207)\nat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:114)\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:183)\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\nat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:310)\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:467)\nat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:708)\nat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)\nat org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:615)\nat org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:599)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1804)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)\n... 25 more\nCaused by:     com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Client does not support authentication protocol requested by server; consider upgrading MySQL client\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\nat com.mysql.jdbc.Util.handleNewInstance(Util.java:353)\nat com.mysql.jdbc.Util.getInstance(Util.java:336)\nat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:985)\nat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:957)\nat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2938)\nat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:855)\nat com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3337)\nat com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1217)\nat com.mysql.jdbc.Connection.createNewIO(Connection.java:1930)\nat com.mysql.jdbc.Connection.&lt;init&gt;(Connection.java:716)\nat com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:46)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\nat com.mysql.jdbc.Util.handleNewInstance(Util.java:353)\nat com.mysql.jdbc.Connection.getInstance(Connection.java:295)\nat com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:266)\nat java.sql.DriverManager.getConnection(DriverManager.java:664)\nat java.sql.DriverManager.getConnection(DriverManager.java:208)\nat org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:154)\nat org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:145)\nat org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:205)\nat org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:169)\nat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\nat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\nat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:43)\n... 42 more\n</code></pre>\n"},{"tags":["java","junit","mockito","spring-webflux","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1673666601,"creation_date":1673666293,"answer_id":75115531,"question_id":75114698,"body_markdown":"Unit testing WebClient has very low ROI. I would recommend looking at  [WireMock](https://wiremock.org) that provides very good API for testing web clients. Here are some examples\r\n\r\n```\r\nstubFor(get(url)\r\n\t\t.withHeader(HttpHeaders.ACCEPT, containing(MediaType.APPLICATION_JSON_VALUE))\r\n\t\t.willReturn(aResponse()\r\n\t\t\t\t.withStatus(200)\r\n\t\t\t\t.withBody(&quot;{}&quot;)\r\n\t\t)\r\n);\r\n\r\nStepVerifier.create(service.callApi())\r\n\t\t.expectNextCount(1)\r\n\t\t.verifyComplete();\r\n```\r\n\r\nYou could easily test both positive and negative scenarios by providing different stubs \r\n```\r\nstubFor(get(url)\r\n\t\t.withHeader(HttpHeaders.ACCEPT, containing(MediaType.APPLICATION_JSON_VALUE))\r\n\t\t.willReturn(aResponse()\r\n\t\t\t\t.withStatus(500)\r\n\t\t)\r\n);\r\n```\r\n\r\nIn addition, you could test retry logic using [Scenarios](https://wiremock.org/docs/stateful-behaviour/) or even simulate timeouts using [Delays](https://wiremock.org/docs/simulating-faults/).\r\n\r\nTo initialize it you could use `@AutoConfigureWireMock`provided by `org.springframework.cloud:spring-cloud-contract-wiremock` or, as an alternative, you can add direct dependency to `WireMock` and initialize it explicitly.","title":"How to unit test the Spring WebClient in java?","body":"<p>Unit testing WebClient has very low ROI. I would recommend looking at  <a href=\"https://wiremock.org\" rel=\"noreferrer\">WireMock</a> that provides very good API for testing web clients. Here are some examples</p>\n<pre><code>stubFor(get(url)\n        .withHeader(HttpHeaders.ACCEPT, containing(MediaType.APPLICATION_JSON_VALUE))\n        .willReturn(aResponse()\n                .withStatus(200)\n                .withBody(&quot;{}&quot;)\n        )\n);\n\nStepVerifier.create(service.callApi())\n        .expectNextCount(1)\n        .verifyComplete();\n</code></pre>\n<p>You could easily test both positive and negative scenarios by providing different stubs</p>\n<pre><code>stubFor(get(url)\n        .withHeader(HttpHeaders.ACCEPT, containing(MediaType.APPLICATION_JSON_VALUE))\n        .willReturn(aResponse()\n                .withStatus(500)\n        )\n);\n</code></pre>\n<p>In addition, you could test retry logic using <a href=\"https://wiremock.org/docs/stateful-behaviour/\" rel=\"noreferrer\">Scenarios</a> or even simulate timeouts using <a href=\"https://wiremock.org/docs/simulating-faults/\" rel=\"noreferrer\">Delays</a>.</p>\n<p>To initialize it you could use <code>@AutoConfigureWireMock</code>provided by <code>org.springframework.cloud:spring-cloud-contract-wiremock</code> or, as an alternative, you can add direct dependency to <code>WireMock</code> and initialize it explicitly.</p>\n"},{"tags":[],"owner":{"account_id":11533982,"reputation":3,"user_id":8452071,"display_name":"Roman Abakumov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673708889,"creation_date":1673708889,"answer_id":75118926,"question_id":75114698,"body_markdown":"requestHeadersSpec.retrieve() return ResponseSpec, but you are trying to return Mono.error by mockito instead. You need to return result of valid type, something that can be inherited from ResponseSpec.\r\nYou may return mock of ResponseSpec or something like\r\n new DefaultResponseSpec(Mono.error(new RetryableException(&quot;Server error: 500&quot;)))\r\n```\r\n\tstatic class DefaultResponseSpec implements ResponseSpec {\r\n\t\tprivate final Mono&lt;ClientResponse&gt; responseMono;\r\n\r\n\t\tDefaultResponseSpec(Mono&lt;ClientResponse&gt; responseMono) {\r\n\t\t\tthis.responseMono = responseMono;\r\n\t\t}\r\n```\r\n\r\n","title":"How to unit test the Spring WebClient in java?","body":"<p>requestHeadersSpec.retrieve() return ResponseSpec, but you are trying to return Mono.error by mockito instead. You need to return result of valid type, something that can be inherited from ResponseSpec.\nYou may return mock of ResponseSpec or something like\nnew DefaultResponseSpec(Mono.error(new RetryableException(&quot;Server error: 500&quot;)))</p>\n<pre><code>    static class DefaultResponseSpec implements ResponseSpec {\n        private final Mono&lt;ClientResponse&gt; responseMono;\n\n        DefaultResponseSpec(Mono&lt;ClientResponse&gt; responseMono) {\n            this.responseMono = responseMono;\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1628102,"reputation":3602,"user_id":1503163,"display_name":"Sanjay Bharwani"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696605689,"creation_date":1696605689,"answer_id":77245652,"question_id":75114698,"body_markdown":"We use Wiremock to test Client functionality. It can be done in standard unit test or a SpringBoot test.\r\n\r\nBelow code explains the Unit testing in regular tests.\r\n    \r\n    @Service\r\n    class MoviesClient {\r\n      private final WebClient moviesWebClient;\r\n    \r\n      public Mono&lt;Movie&gt; findMovieById(String movieID) {\r\n        return moviesWebClient.get().uri(MOVIE_ENDPOINT+&quot;/&quot;+movieID).bodyValue(job).retrieve()\r\n            .bodyToMono(Movie.class);\r\n      }\r\n    }\r\n\r\nNow as we see MoviesClient needs webClient to call the movie service and get movie.\r\n\r\n  \r\n\r\n      @ExtendWith({MockitoExtension.class})\r\n        class MoviesClientTest {\r\n        \r\n            private MoviesClient moviesClient;\r\n            \r\n            @RegisterExtension\r\n              private static final WireMockExtension MOVIES_WM =\r\n             WireMockExtension.newInstance().options(wireMockConfig().port(&quot;8086&quot;)).build();\r\n            \r\n            @BeforeEach\r\n            void setup() {\r\n            \r\n            var webClient = WebClient.builder().baseUrl(&quot;http://localhost:8086&quot;)\r\n                    .defaultHeader(CONTENT_TYPE, APPLICATION_JSON_VALUE).build();\r\n            moviesClient = new MoviesClient(moviesClient)\r\n    MOVIES_WM.stubFor(get(MOVIE_ENDPOINT+&quot;/&quot;+&quot;1234&quot;)).withHeader(CONTENT_TYPE, matching(APPLICATION_JSON_VALUE))willReturn(aResponse().withStatus(OK.value()).withHeader(CONTENT_TYPE, APPLICATION_JSON_VALUE)\r\n                .withBody(&quot;Your json response body comes here&quot;)));\r\n            }\r\n    }\r\n\r\nNow you can write your tests to call the method on client which in turn will make a webclient call which will be stubbed to wiremock server.\r\n\r\n\r\n    @Test\r\n    void testMoviesEndPoint() {\r\n      StepVerifier.create(moviesClient.findMovieById(1234)\r\n      .expectNext(movie -&gt; assertThat(movie).getId.equals(1234))\r\n      .verifyComplete();\r\n    \r\n    FLUENT_WM.verify(1, postRequestedFor(urlEqualTo(MOVIE_ENDPOINT+&quot;/&quot;+&quot;1234&quot;)));\r\n    }\r\n","title":"How to unit test the Spring WebClient in java?","body":"<p>We use Wiremock to test Client functionality. It can be done in standard unit test or a SpringBoot test.</p>\n<p>Below code explains the Unit testing in regular tests.</p>\n<pre><code>@Service\nclass MoviesClient {\n  private final WebClient moviesWebClient;\n\n  public Mono&lt;Movie&gt; findMovieById(String movieID) {\n    return moviesWebClient.get().uri(MOVIE_ENDPOINT+&quot;/&quot;+movieID).bodyValue(job).retrieve()\n        .bodyToMono(Movie.class);\n  }\n}\n</code></pre>\n<p>Now as we see MoviesClient needs webClient to call the movie service and get movie.</p>\n<pre><code>  @ExtendWith({MockitoExtension.class})\n    class MoviesClientTest {\n    \n        private MoviesClient moviesClient;\n        \n        @RegisterExtension\n          private static final WireMockExtension MOVIES_WM =\n         WireMockExtension.newInstance().options(wireMockConfig().port(&quot;8086&quot;)).build();\n        \n        @BeforeEach\n        void setup() {\n        \n        var webClient = WebClient.builder().baseUrl(&quot;http://localhost:8086&quot;)\n                .defaultHeader(CONTENT_TYPE, APPLICATION_JSON_VALUE).build();\n        moviesClient = new MoviesClient(moviesClient)\nMOVIES_WM.stubFor(get(MOVIE_ENDPOINT+&quot;/&quot;+&quot;1234&quot;)).withHeader(CONTENT_TYPE, matching(APPLICATION_JSON_VALUE))willReturn(aResponse().withStatus(OK.value()).withHeader(CONTENT_TYPE, APPLICATION_JSON_VALUE)\n            .withBody(&quot;Your json response body comes here&quot;)));\n        }\n}\n</code></pre>\n<p>Now you can write your tests to call the method on client which in turn will make a webclient call which will be stubbed to wiremock server.</p>\n<pre><code>@Test\nvoid testMoviesEndPoint() {\n  StepVerifier.create(moviesClient.findMovieById(1234)\n  .expectNext(movie -&gt; assertThat(movie).getId.equals(1234))\n  .verifyComplete();\n\nFLUENT_WM.verify(1, postRequestedFor(urlEqualTo(MOVIE_ENDPOINT+&quot;/&quot;+&quot;1234&quot;)));\n}\n</code></pre>\n"}],"owner":{"account_id":25266045,"reputation":141,"user_id":19096205,"display_name":"Gojo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3277,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1696605689,"creation_date":1673645973,"question_id":75114698,"body_markdown":"I have this code which uses WebClient to call a third party API. \r\n\r\n```\r\n    public Mono&lt;JsonNode&gt; callApi(String url) {\r\n        return webClient.get()\r\n                .uri(url)\r\n                .headers(httpHeaders -&gt; httpHeaders.set(Constants.X_API_KEY, apiKey))\r\n                .retrieve()\r\n                .onStatus(HttpStatus::is5xxServerError,\r\n                        res -&gt; {\r\n                            res.bodyToMono(String.class)\r\n                                    .subscribe(e -&gt; log.error(Constants.EXCEPTION_LOG, e));\r\n                            return Mono.error(new RetryableException(&quot;Server error: &quot; + res.rawStatusCode()));\r\n                        })\r\n                .onStatus(HttpStatus::is4xxClientError,\r\n                        res -&gt; {\r\n                            res.bodyToMono(String.class)\r\n                                    .subscribe(e -&gt; log.error(&quot;Exception occurred in callPartnerApi: No retries {}&quot;, e));\r\n                            return Mono.error(new Exception(&quot;Exception occurred calling partner api, no retries &quot; + res.rawStatusCode()));\r\n                        })\r\n                .bodyToMono(JsonNode.class);\r\n    }\r\n```\r\n\r\nI am trying to use Mockito to unit test this and so far I have this which is failing:\r\n\r\n```\r\n    @Test\r\n    void testCallPartnerApi_then5xxException() {\r\n        WebClient.RequestHeadersUriSpec requestHeadersUriSpec = mock(WebClient.RequestHeadersUriSpec.class);\r\n        WebClient.RequestHeadersSpec requestHeadersSpec = mock(WebClient.RequestHeadersSpec.class);\r\n        WebClient.ResponseSpec responseSpec = mock(WebClient.ResponseSpec.class);\r\n\r\n        when(webClient.get()).thenReturn(requestHeadersUriSpec);\r\n        when(requestHeadersUriSpec.uri(anyString())).thenReturn(requestHeadersSpec);\r\n        when(requestHeadersSpec.headers(any())).thenReturn(requestHeadersSpec);\r\n        when(requestHeadersSpec.retrieve()).then(invocationOnMock -&gt; Mono.error(new RetryableException(&quot;Server error: 500&quot;)));\r\n\r\n        when(responseSpec.onStatus(argThat(x -&gt; x.test(HttpStatus.INTERNAL_SERVER_ERROR)), any())).thenAnswer(invocation -&gt; Mono.error(new RetryableException(&quot;Server error: 500&quot;)));\r\n\r\n\r\n        StepVerifier.create(partnerService.callPartnerApi(&quot;/test&quot;))\r\n                .expectError()\r\n                .verify();\r\n    }\r\n```\r\nThe error I get from this test is this:\r\n```\r\njava.lang.ClassCastException: class reactor.core.publisher.MonoError cannot be cast to class org.springframework.web.reactive.function.client.WebClient$ResponseSpec\r\n```\r\nIs using a library like WireMock or MockServerTest the only way to test these scenarios? ","title":"How to unit test the Spring WebClient in java?","body":"<p>I have this code which uses WebClient to call a third party API.</p>\n<pre><code>    public Mono&lt;JsonNode&gt; callApi(String url) {\n        return webClient.get()\n                .uri(url)\n                .headers(httpHeaders -&gt; httpHeaders.set(Constants.X_API_KEY, apiKey))\n                .retrieve()\n                .onStatus(HttpStatus::is5xxServerError,\n                        res -&gt; {\n                            res.bodyToMono(String.class)\n                                    .subscribe(e -&gt; log.error(Constants.EXCEPTION_LOG, e));\n                            return Mono.error(new RetryableException(&quot;Server error: &quot; + res.rawStatusCode()));\n                        })\n                .onStatus(HttpStatus::is4xxClientError,\n                        res -&gt; {\n                            res.bodyToMono(String.class)\n                                    .subscribe(e -&gt; log.error(&quot;Exception occurred in callPartnerApi: No retries {}&quot;, e));\n                            return Mono.error(new Exception(&quot;Exception occurred calling partner api, no retries &quot; + res.rawStatusCode()));\n                        })\n                .bodyToMono(JsonNode.class);\n    }\n</code></pre>\n<p>I am trying to use Mockito to unit test this and so far I have this which is failing:</p>\n<pre><code>    @Test\n    void testCallPartnerApi_then5xxException() {\n        WebClient.RequestHeadersUriSpec requestHeadersUriSpec = mock(WebClient.RequestHeadersUriSpec.class);\n        WebClient.RequestHeadersSpec requestHeadersSpec = mock(WebClient.RequestHeadersSpec.class);\n        WebClient.ResponseSpec responseSpec = mock(WebClient.ResponseSpec.class);\n\n        when(webClient.get()).thenReturn(requestHeadersUriSpec);\n        when(requestHeadersUriSpec.uri(anyString())).thenReturn(requestHeadersSpec);\n        when(requestHeadersSpec.headers(any())).thenReturn(requestHeadersSpec);\n        when(requestHeadersSpec.retrieve()).then(invocationOnMock -&gt; Mono.error(new RetryableException(&quot;Server error: 500&quot;)));\n\n        when(responseSpec.onStatus(argThat(x -&gt; x.test(HttpStatus.INTERNAL_SERVER_ERROR)), any())).thenAnswer(invocation -&gt; Mono.error(new RetryableException(&quot;Server error: 500&quot;)));\n\n\n        StepVerifier.create(partnerService.callPartnerApi(&quot;/test&quot;))\n                .expectError()\n                .verify();\n    }\n</code></pre>\n<p>The error I get from this test is this:</p>\n<pre><code>java.lang.ClassCastException: class reactor.core.publisher.MonoError cannot be cast to class org.springframework.web.reactive.function.client.WebClient$ResponseSpec\n</code></pre>\n<p>Is using a library like WireMock or MockServerTest the only way to test these scenarios?</p>\n"},{"tags":["java","aes","javax.crypto","ctr"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1696606315,"post_id":77245222,"comment_id":136179195,"body_markdown":"[The documentation of Cipher.getInstance](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/javax/crypto/Cipher.html#getInstance(java.lang.String)) explains how providers are located.  I recommend going by the docs rather than the source, as internal implementations may change from one release to the next, but the written contract is forever.","body":"<a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/javax/crypto/Cipher.html#getInstance(java.lang.String)\" rel=\"nofollow noreferrer\">The documentation of Cipher.getInstance</a> explains how providers are located.  I recommend going by the docs rather than the source, as internal implementations may change from one release to the next, but the written contract is forever."}],"answers":[{"comments":[{"owner":{"account_id":28954964,"reputation":35,"user_id":22178719,"display_name":"schegga_BC"},"score":0,"creation_date":1696605064,"post_id":77245360,"comment_id":136178979,"body_markdown":"so [this]https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/com/sun/crypto/provider) is one possibilty that my be used if I am just putting: `Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);`?  what Provider do I need to add if I want to make sure that the implementation of this folder is used?","body":"so [this]<a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/com/sun/crypto/provider\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/blob/master/src/java.base/share&zwnj;&#8203;/classes/&hellip;</a>) is one possibilty that my be used if I am just putting: <code>Cipher.getInstance(&quot;AES&#47;CTR&#47;NoPadding&quot;);</code>?  what Provider do I need to add if I want to make sure that the implementation of this folder is used?"},{"owner":{"account_id":2116673,"reputation":678,"user_id":1880811,"display_name":"Asthor"},"score":1,"creation_date":1696606833,"post_id":77245360,"comment_id":136179285,"body_markdown":"Yes, it depends a bit on JDK and other things in your setup which actually is used. Progman also actually answers this in his answer. You can run getProvider() on the cipher instance you&#39;ve been returned here. In general you kinda do not want to be changing providers on these things unless you have a very specific use case for it. This is also covered in the documentation linked.","body":"Yes, it depends a bit on JDK and other things in your setup which actually is used. Progman also actually answers this in his answer. You can run getProvider() on the cipher instance you&#39;ve been returned here. In general you kinda do not want to be changing providers on these things unless you have a very specific use case for it. This is also covered in the documentation linked."}],"tags":[],"owner":{"account_id":2116673,"reputation":678,"user_id":1880811,"display_name":"Asthor"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696603219,"creation_date":1696603219,"answer_id":77245360,"question_id":77245222,"body_markdown":"There is no direct answer to your question as this varies based on among other which JDK you are currently using. \r\n\r\nQuoting directly from the [Java Cryptography Architecture][1] documentation for Java 17 it sates \r\n\r\n&gt; java.security.Provider is the base class for all security providers. Each CSP [Cryptography Security Provider] contains an instance of this class which contains the provider&#39;s name and lists all of the security services/algorithms it implements. When an instance of a particular algorithm is needed, the JCA framework consults the provider&#39;s database, and if a suitable match is found, the instance is created.\r\n&gt; \r\n&gt; Providers contain a package (or a set of packages) that supply concrete implementations for the advertised cryptographic algorithms. Each JDK installation has one or more providers installed and configured by default. Additional providers may be added statically or dynamically. Clients may configure their runtime environment to specify the provider preference order. The preference order is the order in which providers are searched for requested services when no specific provider is requested.\r\n\r\nSo depending on your setup, it can be any of the provided algorithms for `AES/CTR/NoPadding` with your JDK.\r\n\r\nYou can control which provider you use by supplying which provider you&#39;d prefer through \r\n\r\n    Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;, &quot;Provider&quot;);\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/security/java-cryptography-architecture-jca-reference-guide.html#GUID-EAB9FF73-4C69-4FD5-8A0C-5CF48211A859","title":"javax.crypto - Cipher objects - How does the Provider Service work?","body":"<p>There is no direct answer to your question as this varies based on among other which JDK you are currently using.</p>\n<p>Quoting directly from the <a href=\"https://docs.oracle.com/en/java/javase/17/security/java-cryptography-architecture-jca-reference-guide.html#GUID-EAB9FF73-4C69-4FD5-8A0C-5CF48211A859\" rel=\"nofollow noreferrer\">Java Cryptography Architecture</a> documentation for Java 17 it sates</p>\n<blockquote>\n<p>java.security.Provider is the base class for all security providers. Each CSP [Cryptography Security Provider] contains an instance of this class which contains the provider's name and lists all of the security services/algorithms it implements. When an instance of a particular algorithm is needed, the JCA framework consults the provider's database, and if a suitable match is found, the instance is created.</p>\n<p>Providers contain a package (or a set of packages) that supply concrete implementations for the advertised cryptographic algorithms. Each JDK installation has one or more providers installed and configured by default. Additional providers may be added statically or dynamically. Clients may configure their runtime environment to specify the provider preference order. The preference order is the order in which providers are searched for requested services when no specific provider is requested.</p>\n</blockquote>\n<p>So depending on your setup, it can be any of the provided algorithms for <code>AES/CTR/NoPadding</code> with your JDK.</p>\n<p>You can control which provider you use by supplying which provider you'd prefer through</p>\n<pre><code>Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;, &quot;Provider&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":28954964,"reputation":35,"user_id":22178719,"display_name":"schegga_BC"},"score":0,"creation_date":1696609552,"post_id":77245571,"comment_id":136179818,"body_markdown":"Thanks a lot!\nSo if I put: `Cipher cipher = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;, &quot;SunJCE&quot;);` I am making sure that the implementation of AES and CTR from this [folder](https://github.com/openjdk/jdk/tree/master/src/java.base/share/classes/com/sun/crypto/provider) is used? \nSo for analyzing the implementation of the CTR-Mode I can look at [CounterMode.java](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/com/sun/crypto/provider/CounterMode.java)?","body":"Thanks a lot! So if I put: <code>Cipher cipher = Cipher.getInstance(&quot;AES&#47;CTR&#47;NoPadding&quot;, &quot;SunJCE&quot;);</code> I am making sure that the implementation of AES and CTR from this <a href=\"https://github.com/openjdk/jdk/tree/master/src/java.base/share/classes/com/sun/crypto/provider\" rel=\"nofollow noreferrer\">folder</a> is used?  So for analyzing the implementation of the CTR-Mode I can look at <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/com/sun/crypto/provider/CounterMode.java\" rel=\"nofollow noreferrer\">CounterMode.java</a>?"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1696609909,"post_id":77245571,"comment_id":136179892,"body_markdown":"You have to use the correct OpenJDK version installed which correspond to the given github link. If you use a completely different JDK you might get a different implementation.","body":"You have to use the correct OpenJDK version installed which correspond to the given github link. If you use a completely different JDK you might get a different implementation."},{"owner":{"account_id":28954964,"reputation":35,"user_id":22178719,"display_name":"schegga_BC"},"score":0,"creation_date":1696610440,"post_id":77245571,"comment_id":136179985,"body_markdown":"Yes, thank you. So assuming I am keeping my version up-to-date, than this is the implementation that is used :)","body":"Yes, thank you. So assuming I am keeping my version up-to-date, than this is the implementation that is used :)"}],"tags":[],"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1696605120,"creation_date":1696605120,"answer_id":77245571,"question_id":77245222,"body_markdown":"The [`Cipher`](https://docs.oracle.com/javase/8/docs/api/javax/crypto/Cipher.html) object has a method [`getProvider()`](https://docs.oracle.com/javase/8/docs/api/javax/crypto/Cipher.html#getProvider--) to return the [`Provider`](https://docs.oracle.com/javase/8/docs/api/java/security/Provider.html) instance, that was used to create the `Cipher` object. This class has several methods to get information about the provider itself like the name. You can use this information to &quot;reverse engineer&quot; which class or package is implementing the cipher. See the following example:\r\n\r\n    Cipher cipher = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);\r\n    System.out.println(cipher);\r\n    System.out.println(cipher.getClass());\r\n    Provider provider = cipher.getProvider();\r\n    System.out.println(provider);\r\n    System.out.println(provider.getName());\r\n    System.out.println(provider.getInfo());\r\n    System.out.println(provider.getClass());\r\n\r\nThis can generate an output like this (with openjdk version &quot;1.8.0_362&quot;):\r\n\r\n    javax.crypto.Cipher@7440e464\r\n    class javax.crypto.Cipher\r\n    SunJCE version 1.8\r\n    SunJCE\r\n    SunJCE Provider (implements RSA, DES, Triple DES, AES, Blowfish, ARCFOUR, RC2, PBE, Diffie-Hellman, HMAC)\r\n    class com.sun.crypto.provider.SunJCE\r\n\r\nYou can check the JDK or any installed provider JAR (like BouncyCastle) for the implementation class. For OpenJDK, the implementation of that class is at https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/SunJCE.java. From there you can check other related classes like [`AESCipher`](https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/AESCipher.java) or [`AESCrypt`](https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/AESCrypt.java).","title":"javax.crypto - Cipher objects - How does the Provider Service work?","body":"<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/crypto/Cipher.html\" rel=\"nofollow noreferrer\"><code>Cipher</code></a> object has a method <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/crypto/Cipher.html#getProvider--\" rel=\"nofollow noreferrer\"><code>getProvider()</code></a> to return the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/security/Provider.html\" rel=\"nofollow noreferrer\"><code>Provider</code></a> instance, that was used to create the <code>Cipher</code> object. This class has several methods to get information about the provider itself like the name. You can use this information to &quot;reverse engineer&quot; which class or package is implementing the cipher. See the following example:</p>\n<pre><code>Cipher cipher = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);\nSystem.out.println(cipher);\nSystem.out.println(cipher.getClass());\nProvider provider = cipher.getProvider();\nSystem.out.println(provider);\nSystem.out.println(provider.getName());\nSystem.out.println(provider.getInfo());\nSystem.out.println(provider.getClass());\n</code></pre>\n<p>This can generate an output like this (with openjdk version &quot;1.8.0_362&quot;):</p>\n<pre><code>javax.crypto.Cipher@7440e464\nclass javax.crypto.Cipher\nSunJCE version 1.8\nSunJCE\nSunJCE Provider (implements RSA, DES, Triple DES, AES, Blowfish, ARCFOUR, RC2, PBE, Diffie-Hellman, HMAC)\nclass com.sun.crypto.provider.SunJCE\n</code></pre>\n<p>You can check the JDK or any installed provider JAR (like BouncyCastle) for the implementation class. For OpenJDK, the implementation of that class is at <a href=\"https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/SunJCE.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/SunJCE.java</a>. From there you can check other related classes like <a href=\"https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/AESCipher.java\" rel=\"nofollow noreferrer\"><code>AESCipher</code></a> or <a href=\"https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/AESCrypt.java\" rel=\"nofollow noreferrer\"><code>AESCrypt</code></a>.</p>\n"}],"owner":{"account_id":28954964,"reputation":35,"user_id":22178719,"display_name":"schegga_BC"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77245571,"answer_count":2,"score":1,"last_activity_date":1696605120,"creation_date":1696602045,"question_id":77245222,"body_markdown":"I am trying to find the implementations of the source code.  \r\nFor example, if I initialize the Cipher-object like this:\r\n\r\n`Cipher cipher = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);`\r\n\r\nhow can I find the actual implementaion of the AES-Algorithm that is used and of the CTR-mode?\r\n\r\nIf I am looking up the source code of [Cipher.java](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/javax/crypto/Cipher.java#L35) than you can see that the getInstance()-method uses some service-providers. I am guessing that the line:\r\n\r\n```\r\nList&lt;Service&gt; services = GetInstance.getServices(cipherServices);\r\n```\r\n\r\nis responsible for matching the &quot;AES/CTR/NoPadding&quot; to the CipherSpi-object that is created.\r\n\r\nBut now I am stuck and I do not know what is going on. How is this working? Where can I find the source code to AES and CTR?\r\nIs it matched to the classes in this [.../sun/crypto/provider](https://github.com/openjdk/jdk/tree/master/src/java.base/share/classes/com/sun/crypto/provider) folder?\r\nHow does this matching work? Where can I see what is matched to what input?\r\nWhat I am also trying to figure out is if the CTR-Mode uses some sort of parallelism.","title":"javax.crypto - Cipher objects - How does the Provider Service work?","body":"<p>I am trying to find the implementations of the source code.<br />\nFor example, if I initialize the Cipher-object like this:</p>\n<p><code>Cipher cipher = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);</code></p>\n<p>how can I find the actual implementaion of the AES-Algorithm that is used and of the CTR-mode?</p>\n<p>If I am looking up the source code of <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/javax/crypto/Cipher.java#L35\" rel=\"nofollow noreferrer\">Cipher.java</a> than you can see that the getInstance()-method uses some service-providers. I am guessing that the line:</p>\n<pre><code>List&lt;Service&gt; services = GetInstance.getServices(cipherServices);\n</code></pre>\n<p>is responsible for matching the &quot;AES/CTR/NoPadding&quot; to the CipherSpi-object that is created.</p>\n<p>But now I am stuck and I do not know what is going on. How is this working? Where can I find the source code to AES and CTR?\nIs it matched to the classes in this <a href=\"https://github.com/openjdk/jdk/tree/master/src/java.base/share/classes/com/sun/crypto/provider\" rel=\"nofollow noreferrer\">.../sun/crypto/provider</a> folder?\nHow does this matching work? Where can I see what is matched to what input?\nWhat I am also trying to figure out is if the CTR-Mode uses some sort of parallelism.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9994,"page":140,"page_size":100}
