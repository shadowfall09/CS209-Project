{"items":[{"tags":["java","excel","apache-poi","birt"],"comments":[{"owner":{"account_id":3349759,"reputation":2483,"user_id":2814025,"display_name":"hvb"},"score":0,"creation_date":1636010073,"post_id":69823355,"comment_id":123444795,"body_markdown":"Can&#39;t help, but - why are you trying to create your own emitter? Why not use the &quot;spudsoft emitter&quot;?","body":"Can&#39;t help, but - why are you trying to create your own emitter? Why not use the &quot;spudsoft emitter&quot;?"},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1636351782,"post_id":69823355,"comment_id":123523682,"body_markdown":"@hvb Yes &quot;spudsoft emitter&quot; is there but it is not good for all elements, merging, widths etc. So I have written my own which is working well just I am stuck at this width calculation,","body":"@hvb Yes &quot;spudsoft emitter&quot; is there but it is not good for all elements, merging, widths etc. So I have written my own which is working well just I am stuck at this width calculation,"},{"owner":{"account_id":3349759,"reputation":2483,"user_id":2814025,"display_name":"hvb"},"score":0,"creation_date":1636361555,"post_id":69823355,"comment_id":123526342,"body_markdown":"If you are able to write your own emitter, you should probably the birt-dev mailing list. Maybe someone there can help you. Your calculations seem rather magic to me. I know some of the constants like 256 and 1000 from my own excel width calculations , but for example, what is the source of the constant 96? And you should write your code more readable - variables and parameters should have meaningful names.","body":"If you are able to write your own emitter, you should probably the birt-dev mailing list. Maybe someone there can help you. Your calculations seem rather magic to me. I know some of the constants like 256 and 1000 from my own excel width calculations , but for example, what is the source of the constant 96? And you should write your code more readable - variables and parameters should have meaningful names."},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1636362774,"post_id":69823355,"comment_id":123526754,"body_markdown":"96 is dpi, 72 is pixels, 12 is for font etc.","body":"96 is dpi, 72 is pixels, 12 is for font etc."}],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1636382814,"creation_date":1635935735,"question_id":69823355,"body_markdown":"I am trying to write my custom Birt XSLX emitter. I am using birt 4.6 and everything is working just fine, but when I try to calculate column width using page coordinates it&#39;s not calculated properly.\r\n\r\n    @Override\r\n\tpublic void endSheet(Page page, String orientation, int pageWidth, int pageHeight, float leftMargin,\r\n\t\t\tfloat rightMargin, float topMargin, float bottomMargin) {\r\n            double[] coordinates = page.getCoordinates();\r\n            for (byte i = 0; i &lt; coordinates.length; i++) {\r\n\t\t\t\tthis.sheet.setColumnWidth(i, (int) countXlsxColWidth(coordinates[i]/1000.0D, 96) * 256);\r\n\t\t\t\r\n\t\t    }\r\n    }\r\n\r\n\r\n     public static double countXlsxColWidth(double paramDouble, int paramInt) {\r\n\t\t    float pixels = 72.0F / paramInt;\r\n\t\t    double d1 = 0.0D;\r\n\t\t    double d2 = paramDouble / pixels;\r\n\t\t    double d3 = 7.0D;\r\n\t\t    if (d2 &lt; 12.0D)\r\n\t\t      return d2 / 12.0D; \r\n\t\t    d1 = (int)((d2 - 5.0D) / d3 * 100.0D + 0.5D);\r\n\t\t    double d4 = d1 / 100.0D;\r\n\t\t    d1 = (int)(d4 * d3 / d3 * 256.0D);\r\n\t\t    return d1 / 256.0D;\r\n\t\t  }\r\n\r\n  Does any one has any idea how to calculate column width in birt XLSX emitter properly using page coordinates?","title":"How to calculate xlsx columns width from page coordinates?","body":"<p>I am trying to write my custom Birt XSLX emitter. I am using birt 4.6 and everything is working just fine, but when I try to calculate column width using page coordinates it's not calculated properly.</p>\n<pre><code>@Override\npublic void endSheet(Page page, String orientation, int pageWidth, int pageHeight, float leftMargin,\n        float rightMargin, float topMargin, float bottomMargin) {\n        double[] coordinates = page.getCoordinates();\n        for (byte i = 0; i &lt; coordinates.length; i++) {\n            this.sheet.setColumnWidth(i, (int) countXlsxColWidth(coordinates[i]/1000.0D, 96) * 256);\n        \n        }\n}\n\n\n public static double countXlsxColWidth(double paramDouble, int paramInt) {\n        float pixels = 72.0F / paramInt;\n        double d1 = 0.0D;\n        double d2 = paramDouble / pixels;\n        double d3 = 7.0D;\n        if (d2 &lt; 12.0D)\n          return d2 / 12.0D; \n        d1 = (int)((d2 - 5.0D) / d3 * 100.0D + 0.5D);\n        double d4 = d1 / 100.0D;\n        d1 = (int)(d4 * d3 / d3 * 256.0D);\n        return d1 / 256.0D;\n      }\n</code></pre>\n<p>Does any one has any idea how to calculate column width in birt XLSX emitter properly using page coordinates?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1635270922,"post_id":69720669,"comment_id":123250780,"body_markdown":"Would you mind providing a link to the tutorial you followed to build this filter? Also, have you considered using [Resource Server support](https://docs.spring.io/spring-security/5.6/servlet/oauth2/oauth2-resourceserver.html)? It allows you to validate JWTs without writing a custom filter implementation, and is built into Spring Security.","body":"Would you mind providing a link to the tutorial you followed to build this filter? Also, have you considered using <a href=\"https://docs.spring.io/spring-security/5.6/servlet/oauth2/oauth2-resourceserver.html\" rel=\"nofollow noreferrer\">Resource Server support</a>? It allows you to validate JWTs without writing a custom filter implementation, and is built into Spring Security."}],"answers":[{"tags":[],"owner":{"account_id":23067373,"reputation":640,"user_id":17181638,"display_name":"3Fish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636382654,"creation_date":1635242615,"answer_id":69721123,"question_id":69720669,"body_markdown":"it looks to me like you already did.\r\n``` java\r\n@Autowired\r\nprivate UserAccountService myUserDetailsService;\r\n```\r\n\r\nBut I would suggest using a Constructor instead of @Autowired. Spring will fill in the constructor parameters just the same. This could be very slim when you use the lombok library as well.\r\nUsing a constructor also makes mocking this a bit easier for testing.\r\n\r\n---\r\n#### Updated as discussed in the comments:\r\n``` java\r\n\r\n@Log //another lombok thing\r\n@RequiredArgsConstructor\r\n@Component\r\npublic class JwtRequestFilter extends Filter{\r\n    \r\n    private final JwtTokenUtil jwtTokenUtil;\r\n    \r\n    private final UserAccountService myUserDetailsService;\r\n    \r\n    private final CustomerAccountService myCustomerDetailsService;\r\n\r\n    private static final String AUTH_HEADER = &quot;authorization&quot;;\r\n    \r\n    @Override\r\n    protected void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n            throws ServletException, IOException {\r\n\r\n        String tokenHeader = ((HttpServletRequest) request).getHeader(AUTH_HEADER);\r\n        if(hasValue(tokenHeader) &amp;&amp; tokenHeader.toLowerCase().startsWith(&quot;bearer &quot;)){\r\n            jwtToken = requestTokenHeader.substring(7);\r\n\r\n            String username;\r\n            String jwtToken;\r\n \r\n            try {\r\n                username = jwtTokenUtil.getUsernameFromToken(jwtToken);\r\n        \r\n                if (uSecurityContextHolder.getContext().getAuthentication() == null) {\r\n\r\n                    UserDetails userDetails = myUserDetailsService.loadUserByUsername(username);\r\n                    if(isNull(userDetails)){\r\n                        userDetails = myCustomerDetailsService.loadCustomerByUsername(username);\r\n                    }\r\n                    if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\r\n                        var token = createSecurityToken(userDetails);\r\n                        SecurityContextHolder.getContext().setAuthentication(token);\r\n                    } else {\r\n                        throw new RuntimeException(&quot;Not a Valid Token.&quot;);\r\n                    }\r\n                } else {\r\n                    log.info(&quot;Authorization already present&quot;);\r\n                }\r\n            } catch (IllegalArgumentException e) {\r\n                throw new(&quot;Unable to get JWT Token&quot;,e);\r\n            } catch (ExpiredJwtException e) {\r\n                throw new(&quot;JWT Token has expired&quot;,e);\r\n            }\r\n        } else {\r\n            throw new RuntimeException(&quot;No valid authorization header found.&quot;);\r\n        }\r\n        chain.doFilter(request, response);\r\n    }\r\n\r\n    private UsernamePasswordAuthenticationToken createSecurityToken(UserDetails userDetails){\r\n        UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(\r\n        userDetails, null, userDetails.getAuthorities());\r\n        log.info(&quot;Authorities granted : {}&quot;, userDetails.getAuthorities());\r\n        token.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n        return token;\r\n    }\r\n}\r\n```","title":"Do I need a separate JWT Filter for Multiple Logins?","body":"<p>it looks to me like you already did.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate UserAccountService myUserDetailsService;\n</code></pre>\n<p>But I would suggest using a Constructor instead of @Autowired. Spring will fill in the constructor parameters just the same. This could be very slim when you use the lombok library as well.\nUsing a constructor also makes mocking this a bit easier for testing.</p>\n<hr />\n<h4>Updated as discussed in the comments:</h4>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Log //another lombok thing\n@RequiredArgsConstructor\n@Component\npublic class JwtRequestFilter extends Filter{\n    \n    private final JwtTokenUtil jwtTokenUtil;\n    \n    private final UserAccountService myUserDetailsService;\n    \n    private final CustomerAccountService myCustomerDetailsService;\n\n    private static final String AUTH_HEADER = &quot;authorization&quot;;\n    \n    @Override\n    protected void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n\n        String tokenHeader = ((HttpServletRequest) request).getHeader(AUTH_HEADER);\n        if(hasValue(tokenHeader) &amp;&amp; tokenHeader.toLowerCase().startsWith(&quot;bearer &quot;)){\n            jwtToken = requestTokenHeader.substring(7);\n\n            String username;\n            String jwtToken;\n \n            try {\n                username = jwtTokenUtil.getUsernameFromToken(jwtToken);\n        \n                if (uSecurityContextHolder.getContext().getAuthentication() == null) {\n\n                    UserDetails userDetails = myUserDetailsService.loadUserByUsername(username);\n                    if(isNull(userDetails)){\n                        userDetails = myCustomerDetailsService.loadCustomerByUsername(username);\n                    }\n                    if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\n                        var token = createSecurityToken(userDetails);\n                        SecurityContextHolder.getContext().setAuthentication(token);\n                    } else {\n                        throw new RuntimeException(&quot;Not a Valid Token.&quot;);\n                    }\n                } else {\n                    log.info(&quot;Authorization already present&quot;);\n                }\n            } catch (IllegalArgumentException e) {\n                throw new(&quot;Unable to get JWT Token&quot;,e);\n            } catch (ExpiredJwtException e) {\n                throw new(&quot;JWT Token has expired&quot;,e);\n            }\n        } else {\n            throw new RuntimeException(&quot;No valid authorization header found.&quot;);\n        }\n        chain.doFilter(request, response);\n    }\n\n    private UsernamePasswordAuthenticationToken createSecurityToken(UserDetails userDetails){\n        UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(\n        userDetails, null, userDetails.getAuthorities());\n        log.info(&quot;Authorities granted : {}&quot;, userDetails.getAuthorities());\n        token.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n        return token;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17689981,"reputation":31,"user_id":12841996,"display_name":"Aditya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635243260,"creation_date":1635243260,"answer_id":69721264,"question_id":69720669,"body_markdown":"Differentiate between user and customer while logging. Accordingly, call the different service to get user details. More can be found here.\r\nhttps://stackoverflow.com/questions/57935197/spring-security-user-authentication-against-customers-and-employee","title":"Do I need a separate JWT Filter for Multiple Logins?","body":"<p>Differentiate between user and customer while logging. Accordingly, call the different service to get user details. More can be found here.\n<a href=\"https://stackoverflow.com/questions/57935197/spring-security-user-authentication-against-customers-and-employee\">Spring Security user authentication against customers and employee</a></p>\n"},{"tags":[],"owner":{"account_id":8838669,"reputation":776,"user_id":6601800,"display_name":"Linh Vu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635252886,"creation_date":1635252886,"answer_id":69723511,"question_id":69720669,"body_markdown":"1. **How do I add the Customer userdetails service to the filter?**: inject it as you did with `UserAccountService`. If you do this way, you&#39;re using 1 filter (and of course, this filter is in 1 `SecurityFilterChain`), you could basically implement your filter like: trying to validate your user by `myUserDetailsService` and if it&#39;s not successful, continue with `myCustomerDetailsService`.\r\n\r\n2. For **multiple login project**. The second way you could do is using 2 `SecurityFilterChain`. UserJwtFilter for 1 `SecurityFilterChain` and CustomJwtFilter for 1 `SecurityFilterChain` for example. People usually do this way for different login mechanisms Basic, OAuth2, SAML2. E.g:\r\n\r\n- Basic Authentication:\r\n```java\r\n@Configuration\r\n@Order(2)\r\npublic class BasicAuthenticationFilterChain extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .requestMatchers()\r\n                    .antMatchers(&quot;/login&quot;, &quot;/logout&quot;)\r\n                .and()\r\n```\r\n- OAuth2 Authentication:\r\n```java\r\n@Configuration\r\n@Order(3)\r\npublic class OAuth2AuthenticationFilterChain extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .requestMatchers()\r\n                    .antMatchers(&quot;/oauth&quot;)\r\n                .and()\r\n```\r\n\r\nIn this case when a request with &quot;/login&quot; it&#39;ll be directed to `BasicAuthenticationFilterChain`, and a request with &quot;/oauth&quot; will go to `OAuth2AuthenticationFilterChain`. About `Order`: the lower is the higher priority and once the request&#39;s processed with a `SecurityFilterChain`, it won&#39;t go to another `SecurityFilterChain`. You can implement your project this way.\r\n\r\n**Conclusion**: There are a lot of ways you can implement your idea with spring security, it depends on your choice.","title":"Do I need a separate JWT Filter for Multiple Logins?","body":"<ol>\n<li><p><strong>How do I add the Customer userdetails service to the filter?</strong>: inject it as you did with <code>UserAccountService</code>. If you do this way, you're using 1 filter (and of course, this filter is in 1 <code>SecurityFilterChain</code>), you could basically implement your filter like: trying to validate your user by <code>myUserDetailsService</code> and if it's not successful, continue with <code>myCustomerDetailsService</code>.</p>\n</li>\n<li><p>For <strong>multiple login project</strong>. The second way you could do is using 2 <code>SecurityFilterChain</code>. UserJwtFilter for 1 <code>SecurityFilterChain</code> and CustomJwtFilter for 1 <code>SecurityFilterChain</code> for example. People usually do this way for different login mechanisms Basic, OAuth2, SAML2. E.g:</p>\n</li>\n</ol>\n<ul>\n<li>Basic Authentication:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Order(2)\npublic class BasicAuthenticationFilterChain extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .requestMatchers()\n                    .antMatchers(&quot;/login&quot;, &quot;/logout&quot;)\n                .and()\n</code></pre>\n<ul>\n<li>OAuth2 Authentication:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Order(3)\npublic class OAuth2AuthenticationFilterChain extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .requestMatchers()\n                    .antMatchers(&quot;/oauth&quot;)\n                .and()\n</code></pre>\n<p>In this case when a request with &quot;/login&quot; it'll be directed to <code>BasicAuthenticationFilterChain</code>, and a request with &quot;/oauth&quot; will go to <code>OAuth2AuthenticationFilterChain</code>. About <code>Order</code>: the lower is the higher priority and once the request's processed with a <code>SecurityFilterChain</code>, it won't go to another <code>SecurityFilterChain</code>. You can implement your project this way.</p>\n<p><strong>Conclusion</strong>: There are a lot of ways you can implement your idea with spring security, it depends on your choice.</p>\n"}],"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":475,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1636382654,"creation_date":1635240848,"question_id":69720669,"body_markdown":"The User login is working well but I want to add a Customer Module to the project. I know that I need to write a custom UserDetails class to get the customer Username but I want to ask if I need to write another Custom JWT filter for the Customer Login validation. Presently this is the Filter class that I have for User Login. I have added a username and password field to the Customer entity.\r\n\r\n```\r\n\r\n@Component\r\npublic class JwtRequestFilter extends OncePerRequestFilter {\r\n\r\n\t\r\n\r\n\t@Autowired\r\n\tprivate JwtTokenUtil jwtTokenUtil;\r\n\t\r\n\t@Autowired\r\n\tprivate UserAccountService myUserDetailsService;\r\n\t\r\n\t\r\n\t@Override\r\n\tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n\t\t\tthrows ServletException, IOException {\r\n\r\n\t\tfinal String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\r\n\r\n\t\tString username = null;\r\n\t\tString jwtToken = null;\r\n\t\t\r\n\t\tif (requestTokenHeader != null) {\r\n\t\t\tjwtToken = requestTokenHeader.substring(7);\r\n\t\t\ttry {\r\n\t\t\t\tusername = jwtTokenUtil.getUsernameFromToken(jwtToken);\r\n\t\t\t} catch (IllegalArgumentException e) {\r\n\t\t\t\tSystem.out.println(&quot;Unable to get JWT Token&quot;);\r\n\t\t\t} catch (ExpiredJwtException e) {\r\n\t\t\t\tSystem.out.println(&quot;JWT Token has expired&quot;);\r\n\t\t\t}\r\n\t\t} \r\n\r\n\t\t\r\n\t\tif (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n      \r\n\t\t\tUserDetails userDetails = this.myUserDetailsService.loadUserByUsername(username);\r\n    \tif (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\r\n    \t\t\r\n    \t\tUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\n\t\t\t\t\t\tuserDetails, null, userDetails.getAuthorities());\r\n\t\t\t\t\r\n\t\t\tString authorities = userDetails.getAuthorities().stream().map(GrantedAuthority::getAuthority)\r\n\t\t\t\t\t.collect(Collectors.joining());\r\n\t\t\t System.out.println(&quot;Authorities granted : &quot; + authorities);\r\n\t\t\t\t\t\r\n\t\t\t\tusernamePasswordAuthenticationToken\r\n\t\t\t\t\t\t.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n\t\t\t\t\r\n\t\t\t\tSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n\t\t\t}\r\n\t\t\telse {\r\n                System.out.println(&quot;Not Valid Token&quot;);\r\n            }\r\n\r\n\t\t}\r\n\t\tchain.doFilter(request, response);\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\n```\r\n\r\nAs you can see the Filter is using the custom UserDetails to verify the username . How do I add the Customer userdetails service to the filter ? This is my first multiple login project please be  lenient with me.","title":"Do I need a separate JWT Filter for Multiple Logins?","body":"<p>The User login is working well but I want to add a Customer Module to the project. I know that I need to write a custom UserDetails class to get the customer Username but I want to ask if I need to write another Custom JWT filter for the Customer Login validation. Presently this is the Filter class that I have for User Login. I have added a username and password field to the Customer entity.</p>\n<pre><code>\n@Component\npublic class JwtRequestFilter extends OncePerRequestFilter {\n\n    \n\n    @Autowired\n    private JwtTokenUtil jwtTokenUtil;\n    \n    @Autowired\n    private UserAccountService myUserDetailsService;\n    \n    \n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n\n        final String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\n\n        String username = null;\n        String jwtToken = null;\n        \n        if (requestTokenHeader != null) {\n            jwtToken = requestTokenHeader.substring(7);\n            try {\n                username = jwtTokenUtil.getUsernameFromToken(jwtToken);\n            } catch (IllegalArgumentException e) {\n                System.out.println(&quot;Unable to get JWT Token&quot;);\n            } catch (ExpiredJwtException e) {\n                System.out.println(&quot;JWT Token has expired&quot;);\n            }\n        } \n\n        \n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n      \n            UserDetails userDetails = this.myUserDetailsService.loadUserByUsername(username);\n        if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\n            \n            UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                \n            String authorities = userDetails.getAuthorities().stream().map(GrantedAuthority::getAuthority)\n                    .collect(Collectors.joining());\n             System.out.println(&quot;Authorities granted : &quot; + authorities);\n                    \n                usernamePasswordAuthenticationToken\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                \n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n            }\n            else {\n                System.out.println(&quot;Not Valid Token&quot;);\n            }\n\n        }\n        chain.doFilter(request, response);\n    }\n\n\n}\n\n\n</code></pre>\n<p>As you can see the Filter is using the custom UserDetails to verify the username . How do I add the Customer userdetails service to the filter ? This is my first multiple login project please be  lenient with me.</p>\n"},{"tags":["java","android","flutter","charts","syncfusion"],"comments":[{"owner":{"account_id":14061061,"reputation":56930,"user_id":10157127,"display_name":"Md. Yeasin Sheikh"},"score":0,"creation_date":1636319666,"post_id":69876474,"comment_id":123519007,"body_markdown":"Can you include your code-snippet, share a sample widget that you&#39;ve tried so far? It will be easy with context by extending instead of starting from scratch.","body":"Can you include your code-snippet, share a sample widget that you&#39;ve tried so far? It will be easy with context by extending instead of starting from scratch."},{"owner":{"account_id":23266758,"reputation":23,"user_id":17352180,"display_name":"paparazi2008"},"score":0,"creation_date":1636319788,"post_id":69876474,"comment_id":123519027,"body_markdown":"I added it you can see now, I want it for cartesian charts, but it does not work, and I cannot find any related thing in the documentations: https://help.syncfusion.com/flutter/cartesian-charts/marker-datalabel","body":"I added it you can see now, I want it for cartesian charts, but it does not work, and I cannot find any related thing in the documentations: <a href=\"https://help.syncfusion.com/flutter/cartesian-charts/marker-datalabel\" rel=\"nofollow noreferrer\">help.syncfusion.com/flutter/cartesian-charts/marker-datalabe&zwnj;&#8203;l</a>"}],"answers":[{"tags":[],"owner":{"account_id":19330197,"reputation":349,"user_id":14131978,"display_name":"srk_sync"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1636382505,"creation_date":1636380283,"answer_id":69884752,"question_id":69876474,"body_markdown":"We recommend that you can use the **PlotBand** feature available in our chart widget to render horizontal line for y-points in the chart. We have also attached a simple chart sample below in which have rendered a horizontal line in the chart using the **PlotBand** feature.  \r\n```\r\nSfCartesianChart( \r\n            primaryXAxis: DateTimeAxis(), \r\n            primaryYAxis: NumericAxis( \r\n              plotBands: [ \r\n                PlotBand( \r\n                  start: 32, // y-point for with the horizontal line needs to be drawn. \r\n                  end: 32, \r\n                  borderColor: Colors.red, \r\n                  borderWidth: 2, // set the border width for the horizontal line. \r\n                  associatedAxisStart: DateTime(2002) // set the required value for assicoated x-axis start  property \r\n                ) \r\n              ] \r\n \r\n            ), \r\n) \r\n```  \r\n\r\n[![Screenshot plotband][1]][1]\r\n  \r\nSample: https://www.syncfusion.com/downloads/support/directtrac/347691/ze/f170191_plotband-902619107 \r\n  \r\nFor further reference on the **Plotband** feature, please check the user guide below. \r\nhttps://help.syncfusion.com/flutter/cartesian-charts/axis-customization#plot-line \r\n \r\nAlso, to mention that, if you require to render the line on tapping on the chart, you can use the on PixelToPoint method to achieve it. Please find the sample link below for further reference. \r\nhttps://flutter.syncfusion.com/#/cartesian-charts/user-interactions/add-a-point-on-click \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cgv3d.jpg","title":"Draw horizontal ray/line/grid","body":"<p>We recommend that you can use the <strong>PlotBand</strong> feature available in our chart widget to render horizontal line for y-points in the chart. We have also attached a simple chart sample below in which have rendered a horizontal line in the chart using the <strong>PlotBand</strong> feature.</p>\n<pre><code>SfCartesianChart( \n            primaryXAxis: DateTimeAxis(), \n            primaryYAxis: NumericAxis( \n              plotBands: [ \n                PlotBand( \n                  start: 32, // y-point for with the horizontal line needs to be drawn. \n                  end: 32, \n                  borderColor: Colors.red, \n                  borderWidth: 2, // set the border width for the horizontal line. \n                  associatedAxisStart: DateTime(2002) // set the required value for assicoated x-axis start  property \n                ) \n              ] \n \n            ), \n) \n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cgv3d.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cgv3d.jpg\" alt=\"Screenshot plotband\" /></a></p>\n<p>Sample: <a href=\"https://www.syncfusion.com/downloads/support/directtrac/347691/ze/f170191_plotband-902619107\" rel=\"nofollow noreferrer\">https://www.syncfusion.com/downloads/support/directtrac/347691/ze/f170191_plotband-902619107</a></p>\n<p>For further reference on the <strong>Plotband</strong> feature, please check the user guide below.\n<a href=\"https://help.syncfusion.com/flutter/cartesian-charts/axis-customization#plot-line\" rel=\"nofollow noreferrer\">https://help.syncfusion.com/flutter/cartesian-charts/axis-customization#plot-line</a></p>\n<p>Also, to mention that, if you require to render the line on tapping on the chart, you can use the on PixelToPoint method to achieve it. Please find the sample link below for further reference.\n<a href=\"https://flutter.syncfusion.com/#/cartesian-charts/user-interactions/add-a-point-on-click\" rel=\"nofollow noreferrer\">https://flutter.syncfusion.com/#/cartesian-charts/user-interactions/add-a-point-on-click</a></p>\n"}],"owner":{"account_id":23266758,"reputation":23,"user_id":17352180,"display_name":"paparazi2008"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":597,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69884752,"answer_count":1,"score":2,"last_activity_date":1636382505,"creation_date":1636318714,"question_id":69876474,"body_markdown":"I want to draw a so called &#39;horizontal ray&#39; or &#39;horizontal line&#39; for some y points. I cannot find any option to do so for my charts. I tried using markers or even data labels but they are irrelevant. I&#39;m currently using syncfusion library for drawing charts. Here is the image:\r\n\r\nImage:  \r\n[![Image][1]][1]\r\n\r\nHow can I achieve this?\r\n\r\n  [1]: https://i.stack.imgur.com/wziua.png\r\n\r\nthis is the code I&#39;m currently using, cartesian charts:\r\n\r\n    import &#39;dart:math&#39;;\r\n    import &#39;package:flutter/material.dart&#39;;\r\n    import &#39;package:syncfusion_flutter_charts/charts.dart&#39;;\r\n    \r\n    class ChartAl extends StatefulWidget {\r\n      @override\r\n      _ChartPageState createState() =&gt; _ChartPageState();\r\n    }\r\n    \r\n    late List&lt;ChartData&gt; chartData;\r\n    \r\n    class _ChartPageState extends State&lt;ChartAl&gt; {\r\n      late SelectionBehavior _selectionBehavior;\r\n    \r\n      @override\r\n      void initState() {\r\n        _selectionBehavior = SelectionBehavior(\r\n            // Enables the selection\r\n            enable: true);\r\n        super.initState();\r\n      }\r\n    \r\n      @override\r\n      Widget build(BuildContext context) {\r\n        chartData = getData();\r\n    \r\n        return Container(\r\n          child: SfCartesianChart(\r\n            primaryYAxis: NumericAxis(),\r\n            primaryXAxis: DateTimeAxis(\r\n                intervalType: DateTimeIntervalType.days,\r\n                visibleMinimum: chartData[chartData.length - 29].x,\r\n                visibleMaximum: chartData[chartData.length - 1].x),\r\n            zoomPanBehavior: ZoomPanBehavior(\r\n              enablePanning: true,\r\n            ),\r\n            series: &lt;CartesianSeries&lt;ChartData, DateTime&gt;&gt;[\r\n              LineSeries(\r\n                initialSelectedDataIndexes: &lt;int&gt;[2],\r\n                selectionBehavior: SelectionBehavior(\r\n                  enable: true,\r\n                ),\r\n                // markerSettings: MarkerSettings(\r\n                //   isVisible: true,\r\n                //   shape: DataMarkerType.horizontalLine\r\n                // ),\r\n                // dataLabelSettings: DataLabelSettings(\r\n                //     // Renders the data label\r\n                //     isVisible: true),\r\n                dataSource: chartData,\r\n                xValueMapper: (ChartData tendencias, _) =&gt; tendencias.x,\r\n                yValueMapper: (ChartData tendencias, _) =&gt; tendencias.y,\r\n              )\r\n            ],\r\n            annotations: &lt;CartesianChartAnnotation&gt;[\r\n              CartesianChartAnnotation(\r\n                widget: Container(\r\n                  height: 1.0,\r\n                  width: 200,\r\n                  color: Colors.black,\r\n                ),\r\n                coordinateUnit: CoordinateUnit.point,\r\n                x: DateTime(2018, 1, 10),\r\n                y: 20,\r\n                horizontalAlignment: ChartAlignment.near,\r\n              )\r\n            ],\r\n            trackballBehavior: TrackballBehavior(\r\n                enable: true,\r\n                lineType: TrackballLineType.horizontal,\r\n                tooltipSettings:\r\n                    InteractiveTooltip(enable: true, color: Colors.red)),\r\n          ),\r\n        );\r\n      }\r\n    }\r\n    \r\n    dynamic getData() {\r\n      List&lt;ChartData&gt; data = [];\r\n      for (int i = 1; i &lt; 35; i++) {\r\n        data.add(ChartData(DateTime(2018, 1, i), getRandomInt(10, 100).toInt()));\r\n      }\r\n      return data;\r\n    }\r\n    \r\n    num getRandomInt(num min, num max) {\r\n      final Random random = Random();\r\n      return min + random.nextInt((max - min).toInt());\r\n    }\r\n    \r\n    class ChartData {\r\n      ChartData(this.x, this.y);\r\n      final DateTime x;\r\n      final int y;\r\n    }\r\nI tried to draw it with a container with some width but as you see it does not work.","title":"Draw horizontal ray/line/grid","body":"<p>I want to draw a so called 'horizontal ray' or 'horizontal line' for some y points. I cannot find any option to do so for my charts. I tried using markers or even data labels but they are irrelevant. I'm currently using syncfusion library for drawing charts. Here is the image:</p>\n<p>Image:<br />\n<a href=\"https://i.stack.imgur.com/wziua.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wziua.png\" alt=\"Image\" /></a></p>\n<p>How can I achieve this?</p>\n<p>this is the code I'm currently using, cartesian charts:</p>\n<pre><code>import 'dart:math';\nimport 'package:flutter/material.dart';\nimport 'package:syncfusion_flutter_charts/charts.dart';\n\nclass ChartAl extends StatefulWidget {\n  @override\n  _ChartPageState createState() =&gt; _ChartPageState();\n}\n\nlate List&lt;ChartData&gt; chartData;\n\nclass _ChartPageState extends State&lt;ChartAl&gt; {\n  late SelectionBehavior _selectionBehavior;\n\n  @override\n  void initState() {\n    _selectionBehavior = SelectionBehavior(\n        // Enables the selection\n        enable: true);\n    super.initState();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    chartData = getData();\n\n    return Container(\n      child: SfCartesianChart(\n        primaryYAxis: NumericAxis(),\n        primaryXAxis: DateTimeAxis(\n            intervalType: DateTimeIntervalType.days,\n            visibleMinimum: chartData[chartData.length - 29].x,\n            visibleMaximum: chartData[chartData.length - 1].x),\n        zoomPanBehavior: ZoomPanBehavior(\n          enablePanning: true,\n        ),\n        series: &lt;CartesianSeries&lt;ChartData, DateTime&gt;&gt;[\n          LineSeries(\n            initialSelectedDataIndexes: &lt;int&gt;[2],\n            selectionBehavior: SelectionBehavior(\n              enable: true,\n            ),\n            // markerSettings: MarkerSettings(\n            //   isVisible: true,\n            //   shape: DataMarkerType.horizontalLine\n            // ),\n            // dataLabelSettings: DataLabelSettings(\n            //     // Renders the data label\n            //     isVisible: true),\n            dataSource: chartData,\n            xValueMapper: (ChartData tendencias, _) =&gt; tendencias.x,\n            yValueMapper: (ChartData tendencias, _) =&gt; tendencias.y,\n          )\n        ],\n        annotations: &lt;CartesianChartAnnotation&gt;[\n          CartesianChartAnnotation(\n            widget: Container(\n              height: 1.0,\n              width: 200,\n              color: Colors.black,\n            ),\n            coordinateUnit: CoordinateUnit.point,\n            x: DateTime(2018, 1, 10),\n            y: 20,\n            horizontalAlignment: ChartAlignment.near,\n          )\n        ],\n        trackballBehavior: TrackballBehavior(\n            enable: true,\n            lineType: TrackballLineType.horizontal,\n            tooltipSettings:\n                InteractiveTooltip(enable: true, color: Colors.red)),\n      ),\n    );\n  }\n}\n\ndynamic getData() {\n  List&lt;ChartData&gt; data = [];\n  for (int i = 1; i &lt; 35; i++) {\n    data.add(ChartData(DateTime(2018, 1, i), getRandomInt(10, 100).toInt()));\n  }\n  return data;\n}\n\nnum getRandomInt(num min, num max) {\n  final Random random = Random();\n  return min + random.nextInt((max - min).toInt());\n}\n\nclass ChartData {\n  ChartData(this.x, this.y);\n  final DateTime x;\n  final int y;\n}\n</code></pre>\n<p>I tried to draw it with a container with some width but as you see it does not work.</p>\n"},{"tags":["java","git","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":11116781,"reputation":1,"user_id":8160889,"display_name":"yellowyetti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633726180,"creation_date":1633725819,"answer_id":69501525,"question_id":69500724,"body_markdown":"You can use a .gitignore file.\r\n\r\nThis is what mine looks like:\r\n[gitignore][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/81HaR.png\r\n\r\nIf you right click on the **app** &gt; **git** you can see an option to add a .gitignore file.","title":"IntelliJ/GIT: How do I clear/remove files from the commit window?","body":"<p>You can use a .gitignore file.</p>\n<p>This is what mine looks like:\n<a href=\"https://i.stack.imgur.com/81HaR.png\" rel=\"nofollow noreferrer\">gitignore</a></p>\n<p>If you right click on the <strong>app</strong> &gt; <strong>git</strong> you can see an option to add a .gitignore file.</p>\n"},{"tags":[],"owner":{"account_id":17081761,"reputation":2089,"user_id":12360005,"display_name":"Ruslan Kuleshov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1633974310,"creation_date":1633974310,"answer_id":69530452,"question_id":69500724,"body_markdown":"It seems that you have added these files to Git.\r\nYou need to add `git rm --cached &lt;filename&gt;` first in order to remove these files from git.\r\n\r\nThen you need to right-click on these files in Project view -&gt; `Git` | `Add to .gitignore`","title":"IntelliJ/GIT: How do I clear/remove files from the commit window?","body":"<p>It seems that you have added these files to Git.\nYou need to add <code>git rm --cached &lt;filename&gt;</code> first in order to remove these files from git.</p>\n<p>Then you need to right-click on these files in Project view -&gt; <code>Git</code> | <code>Add to .gitignore</code></p>\n"}],"owner":{"display_name":"user12476182"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1970,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69530452,"answer_count":2,"score":3,"last_activity_date":1636382483,"creation_date":1633720207,"question_id":69500724,"body_markdown":"I have just started a new project in IntelliJ and created a new repository on github where I can get commit and push to.\r\n\r\nI can see that every time I want to do some implementation I can also see these files under *Changes*. How can I remove these from the *commit* window? I just want to see the changes/implementation I make, not the other file what I will never upload anyway.\r\n\r\nHow can I remove/clean these?\r\n\r\n[![Here is the files I do not want to see in the *commit* window][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DKyob.png\r\n\r\n**update:**\r\nI removed the whole project and tried to add these files to the gitignore file from start and it worked, seemed like a bug or something with my IDE\r\n\r\n","title":"IntelliJ/GIT: How do I clear/remove files from the commit window?","body":"<p>I have just started a new project in IntelliJ and created a new repository on github where I can get commit and push to.</p>\n<p>I can see that every time I want to do some implementation I can also see these files under <em>Changes</em>. How can I remove these from the <em>commit</em> window? I just want to see the changes/implementation I make, not the other file what I will never upload anyway.</p>\n<p>How can I remove/clean these?</p>\n<p><a href=\"https://i.stack.imgur.com/DKyob.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DKyob.png\" alt=\"Here is the files I do not want to see in the commit window\" /></a></p>\n<p><strong>update:</strong>\nI removed the whole project and tried to add these files to the gitignore file from start and it worked, seemed like a bug or something with my IDE</p>\n"},{"tags":["java","liquibase","liquibase-sql"],"answers":[{"tags":[],"owner":{"account_id":3845096,"reputation":126,"user_id":3186906,"display_name":"viglu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634733985,"creation_date":1634733985,"answer_id":69646239,"question_id":69645315,"body_markdown":"Thanks and with \r\n\r\n    --preconditions onFail:MARK_RAN\r\n\r\nit&#39;s working like I want","title":"liquibase failOnError:false runAlways:false not working","body":"<p>Thanks and with</p>\n<pre><code>--preconditions onFail:MARK_RAN\n</code></pre>\n<p>it's working like I want</p>\n"}],"owner":{"account_id":3845096,"reputation":126,"user_id":3186906,"display_name":"viglu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69646239,"answer_count":1,"score":0,"last_activity_date":1636381916,"creation_date":1634730004,"question_id":69645315,"body_markdown":"It&#39;s possible not to run again an SQL file which fails in the past with liquibase?\r\nI tried with failOnError:false runAlways:false but no DATABASECHANGELOG entry is made.","title":"liquibase failOnError:false runAlways:false not working","body":"<p>It's possible not to run again an SQL file which fails in the past with liquibase?\nI tried with failOnError:false runAlways:false but no DATABASECHANGELOG entry is made.</p>\n"},{"tags":["java","selenium","dependency-injection","cucumber","picocontainer"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1636373908,"post_id":69882615,"comment_id":123531018,"body_markdown":"Why are you trying to extend a class that holds hook methods? What is the final goal?","body":"Why are you trying to extend a class that holds hook methods? What is the final goal?"},{"owner":{"account_id":5746949,"reputation":179,"user_id":4537922,"accept_rate":54,"display_name":"Shafiq Ahmed Khan"},"score":0,"creation_date":1636377385,"post_id":69882615,"comment_id":123532526,"body_markdown":"I would like to have all my hooks in a separate class so I can use them across other step def files. However when I do that I get the following error:\n```Before All/After All failed\njava.lang.NoClassDefFoundError: org/picocontainer/MutablePicoContainer```\n\nI have pico-container jar added to my dependencies but still get the above error","body":"I would like to have all my hooks in a separate class so I can use them across other step def files. However when I do that I get the following error: <code>Before All&#47;After All failed java.lang.NoClassDefFoundError: org&#47;picocontainer&#47;MutablePicoContainer</code>  I have pico-container jar added to my dependencies but still get the above error"}],"answers":[{"tags":[],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636381297,"creation_date":1636377650,"answer_id":69884177,"question_id":69882615,"body_markdown":"&gt; io.cucumber.java.InvalidMethodException: You&#39;re not allowed to extend\r\n&gt; classes that define Step Definitions or hooks.\r\n\r\nCucumber creates a new instance of all classes defining `StepDefinition` before each scenario. It then invokes `StepDefinition` methods on&#160;one&#160;of those instances whenever it needs to run a step. If I declare a method test in a `class` and extended to `StepDefinition` extended to `class` then two instances will be created and test method will be available on both instances, and cucumber would not be able to decide what instance to invoke the method on. Incase of inheriting to class(which is having hook methods) then you can use composition.\r\n\r\n**Current way**:\r\n\r\n    class hotelBookingFormPage extends hooks{\r\n     public hooks base;\r\n        hotelBookingFormPage (hooks base) {\r\n            base = hooks.startBrowser();\r\n        }\r\n    }\r\n\r\n**Updated way**:\r\n\r\n\r\n    class hotelBookingFormPage{\r\n        hotelBookingFormPage () {\r\n            hooks base = new hooks();\r\n            base.startBrowser();\r\n        }\r\n    }\r\n","title":"You&#39;re not allowed to extend classes that define Step Definitions or hooks","body":"<blockquote>\n<p>io.cucumber.java.InvalidMethodException: You're not allowed to extend\nclasses that define Step Definitions or hooks.</p>\n</blockquote>\n<p>Cucumber creates a new instance of all classes defining <code>StepDefinition</code> before each scenario. It then invokes <code>StepDefinition</code> methods on one of those instances whenever it needs to run a step. If I declare a method test in a <code>class</code> and extended to <code>StepDefinition</code> extended to <code>class</code> then two instances will be created and test method will be available on both instances, and cucumber would not be able to decide what instance to invoke the method on. Incase of inheriting to class(which is having hook methods) then you can use composition.</p>\n<p><strong>Current way</strong>:</p>\n<pre><code>class hotelBookingFormPage extends hooks{\n public hooks base;\n    hotelBookingFormPage (hooks base) {\n        base = hooks.startBrowser();\n    }\n}\n</code></pre>\n<p><strong>Updated way</strong>:</p>\n<pre><code>class hotelBookingFormPage{\n    hotelBookingFormPage () {\n        hooks base = new hooks();\n        base.startBrowser();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636381726,"creation_date":1636381726,"answer_id":69885102,"question_id":69882615,"body_markdown":"I believe you are trying to use hooks in wrong way. Hooks are not the classes but the annotated methods within any class under your glued path. You should not call them directly. \r\n\r\n&gt; Where a hook is defined has no impact on what scenarios or steps it is run for. \r\n&gt;\r\n&gt; (c) Cucumber documentation\r\n\r\nAll the hooks are called each time your scenario/step finishes. If you need to have more flexible control over than you need to use [conditional hooks][1]\r\n\r\n\r\n  [1]: http://I%20believe%20you%20are%20trying%20to%20use%20hooks%20in%20wrong%20way.%20Hooks%20are%20not%20the%20classes%20but%20the%20annotated%20methods%20within%20any%20class%20under%20your%20glued%20path.%20You%20should%20not%20call%20them%20directly.%20All%20the%20hooks%20are%20called%20each%20time%20your%20scenario/step%20finishes.%20If%20you%20need%20to%20have%20more%20flexible%20control%20over%20than%20you%20need%20to%20use%20conditional%20hooks","title":"You&#39;re not allowed to extend classes that define Step Definitions or hooks","body":"<p>I believe you are trying to use hooks in wrong way. Hooks are not the classes but the annotated methods within any class under your glued path. You should not call them directly.</p>\n<blockquote>\n<p>Where a hook is defined has no impact on what scenarios or steps it is run for.</p>\n<p>(c) Cucumber documentation</p>\n</blockquote>\n<p>All the hooks are called each time your scenario/step finishes. If you need to have more flexible control over than you need to use <a href=\"http://I%20believe%20you%20are%20trying%20to%20use%20hooks%20in%20wrong%20way.%20Hooks%20are%20not%20the%20classes%20but%20the%20annotated%20methods%20within%20any%20class%20under%20your%20glued%20path.%20You%20should%20not%20call%20them%20directly.%20All%20the%20hooks%20are%20called%20each%20time%20your%20scenario/step%20finishes.%20If%20you%20need%20to%20have%20more%20flexible%20control%20over%20than%20you%20need%20to%20use%20conditional%20hooks\" rel=\"nofollow noreferrer\">conditional hooks</a></p>\n"}],"owner":{"account_id":5746949,"reputation":179,"user_id":4537922,"accept_rate":54,"display_name":"Shafiq Ahmed Khan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1717,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1636381726,"creation_date":1636370255,"question_id":69882615,"body_markdown":"I trying to incorporate pico-container DI into my framework so I can use the @Before and @After tags across multiple step definitions. Please see the error below. Any advice would be great.\r\n\r\n```You&#39;re not allowed to extend classes that define Step Definitions or hooks. class steps.hotelBookingFormPage extends class resources.hooks```\r\n\r\n```\r\nimport io.cucumber.java.en.Given;\r\nimport org.openqa.selenium.internal.ShutdownHooks;\r\nimport resources.hooks;\r\n\r\npublic class hotelBookingFormPage extends hooks {\r\n\r\n    public hooks base;\r\n    hotelBookingFormPage (hooks base) {\r\n        base = hooks.startBrowser();\r\n    }\r\n\r\n    @Given(&quot;I navigate to the hotel booking form page&quot;)\r\n    public void iNavigateToTheHotelBookingFormPage() {\r\n        base.driver.get(&quot;http://hotel-test.equalexperts.io/&quot;);\r\n    }\r\n","title":"You&#39;re not allowed to extend classes that define Step Definitions or hooks","body":"<p>I trying to incorporate pico-container DI into my framework so I can use the @Before and @After tags across multiple step definitions. Please see the error below. Any advice would be great.</p>\n<p><code>You're not allowed to extend classes that define Step Definitions or hooks. class steps.hotelBookingFormPage extends class resources.hooks</code></p>\n<pre><code>import io.cucumber.java.en.Given;\nimport org.openqa.selenium.internal.ShutdownHooks;\nimport resources.hooks;\n\npublic class hotelBookingFormPage extends hooks {\n\n    public hooks base;\n    hotelBookingFormPage (hooks base) {\n        base = hooks.startBrowser();\n    }\n\n    @Given(&quot;I navigate to the hotel booking form page&quot;)\n    public void iNavigateToTheHotelBookingFormPage() {\n        base.driver.get(&quot;http://hotel-test.equalexperts.io/&quot;);\n    }\n</code></pre>\n"},{"tags":["java","android","kivy","buildozer","aidl"],"answers":[{"tags":[],"owner":{"display_name":"user7571182"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1503811307,"creation_date":1503811307,"answer_id":45901918,"question_id":45901878,"body_markdown":"I was getting the same exact error, and I did a bit of digging, turns out we need to install `build-tools` for the android SDK through Android SDK Manager\r\n**inside our home folder** there is the `.buildozer` hidden directory that `buildozer` created for us\r\nthis is the path to the Android SDK Manager: &quot;/home/username/.buildozer/android/platform/android-sdk-20/tools/android&quot;\r\n\r\njust need to run android and update the sdk, and aidl will be installed.\r\n\r\nAlso, Just typing **android** will **only run the executable** if it is in a folder specified in your `$PATH` environment variable (which includes standard locations like /usr/bin). If it&#39;s in the current folder, but that folder is not in the `$PATH`, run it with `./android` instead - that is, passing a filepath (which is interpreted unambiguously to run the executable at that destination).\r\n","title":"Why does Buildozer show `# Aidl not found, please install it.` even after I installed it?","body":"<p>I was getting the same exact error, and I did a bit of digging, turns out we need to install <code>build-tools</code> for the android SDK through Android SDK Manager\n<strong>inside our home folder</strong> there is the <code>.buildozer</code> hidden directory that <code>buildozer</code> created for us\nthis is the path to the Android SDK Manager: \"/home/username/.buildozer/android/platform/android-sdk-20/tools/android\"</p>\n\n<p>just need to run android and update the sdk, and aidl will be installed.</p>\n\n<p>Also, Just typing <strong>android</strong> will <strong>only run the executable</strong> if it is in a folder specified in your <code>$PATH</code> environment variable (which includes standard locations like /usr/bin). If it's in the current folder, but that folder is not in the <code>$PATH</code>, run it with <code>./android</code> instead - that is, passing a filepath (which is interpreted unambiguously to run the executable at that destination).</p>\n"},{"tags":[],"owner":{"account_id":23273749,"reputation":1,"user_id":17358213,"display_name":"Drados"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636381685,"creation_date":1636381685,"answer_id":69885092,"question_id":45901878,"body_markdown":"I had the same problem, fixed it by setting\r\n\r\n    android.skip_update = False\r\n\r\nin the buildozer.spec file.\r\n","title":"Why does Buildozer show `# Aidl not found, please install it.` even after I installed it?","body":"<p>I had the same problem, fixed it by setting</p>\n<pre><code>android.skip_update = False\n</code></pre>\n<p>in the buildozer.spec file.</p>\n"}],"owner":{"account_id":7841035,"reputation":379,"user_id":5927569,"accept_rate":53,"display_name":"NiHao92"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2414,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":45901918,"answer_count":2,"score":0,"last_activity_date":1636381685,"creation_date":1503810822,"question_id":45901878,"body_markdown":"\r\n I have installed build-essential, libstdc++6,and, aidl itself:\r\n\r\n    sudo apt-get install aidl \r\n    Reading package lists... Done\r\n    Building dependency tree       \r\n    Reading state information... Done\r\n    The following packages were automatically installed and are no longer required:\r\n      aspectj eclipse-platform-data eclipse-rcp fastjar fping jarwrapper junit4\r\n      kivy-doc kivy-tools libasm3-java libasm4-java libaspectj-java libcglib3-java\r\n      libcommons-cli-java libcommons-codec-java libcommons-httpclient-java\r\n      libeasymock-java libequinox-osgi-java libfelix-bundlerepository-java\r\n      libfelix-gogo-command-java libfelix-gogo-runtime-java\r\n      libfelix-gogo-shell-java libgeronimo-jpa-2.0-spec-java\r\n      libgeronimo-osgi-support-java libhamcrest-java libicu4j-49-java\r\n      libjetty8-java libllvm3.8:i386 liblucene2-java libmediaart-2.0-0\r\n      libmysqlclient20 libobjenesis-java libodbc1 libopenipmi0\r\n      libosgi-annotation-java libosgi-compendium-java libosgi-core-java\r\n      libosgi-foundation-ee-java libservlet3.0-java libswt-cairo-gtk-3-jni\r\n      libswt-gtk-3-java libswt-gtk-3-jni libswt-webkit-gtk-3-jni libtomcat7-java\r\n      libtracker-sparql-1.0-0 mysql-common python3-gst-1.0 python3-kivy\r\n      python3-kivy-bin python3-kivy-common sat4j\r\n    Use &#39;sudo apt autoremove&#39; to remove them.\r\n    The following NEW packages will be installed:\r\n      aidl\r\n    0 upgraded, 1 newly installed, 0 to remove and 83 not upgraded.\r\n    Need to get 83,3 kB of archives.\r\n    After this operation, 260 kB of additional disk space will be used.\r\n    Get:1 http://archive.ubuntu.com/ubuntu xenial/universe amd64 aidl amd64 1:6.0.1+r16-1 [83,3 kB]\r\n    Fetched 83,3 kB in 0s (197 kB/s)\r\n    Selecting previously unselected package aidl.\r\n    (Reading database ... 315744 files and directories currently installed.)\r\n    Preparing to unpack .../aidl_1%3a6.0.1+r16-1_amd64.deb ...\r\n    Unpacking aidl (1:6.0.1+r16-1) ...\r\n    Processing triggers for man-db (2.7.5-1) ...\r\n    Setting up aidl (1:6.0.1+r16-1) ...\r\n\r\n\r\nbut still I get the following `# Aidl not found, please install it.`:\r\n\r\n     buildozer android debug deploy run# Check configuration tokens\r\n    # Ensure build layout\r\n    # Check configuration tokens\r\n    # Preparing build\r\n    # Check requirements for android\r\n    # Install platform\r\n    # Apache ANT found at /home/ivan/.buildozer/android/platform/apache-ant-1.9.4\r\n    # Android SDK found at /home/ivan/.buildozer/android/platform/android-sdk-20\r\n    # Android NDK found at /home/ivan/.buildozer/android/platform/android-ndk-r9c\r\n    Refresh Sources:\r\n      Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml\r\n      Validate XML\r\n      Parse XML\r\n      Fetched Add-ons List successfully\r\n      Refresh Sources\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/repository-7.xml\r\n      Parse XML:    https://dl-ssl.google.com/android/repository/repository-7.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/glass/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/glass/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\r\n    Refresh Sources:\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/glass/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/glass/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\r\n    Refresh Sources:\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/glass/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/glass/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\r\n    Packages available for installation or update: 2\r\n    ----------\r\n    id: 1 or &quot;tools&quot;\r\n         Type: Tool\r\n         Desc: Android SDK Tools, revision 22.6.2\r\n    ----------\r\n    id: 2 or &quot;platform-tools&quot;\r\n         Type: PlatformTool\r\n         Desc: Android SDK Platform-tools, revision 19.0.1\r\n    \r\n    # Skipping Android SDK update due to spec file setting\r\n    Refresh Sources:\r\n      Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml\r\n      Validate XML\r\n      Parse XML\r\n      Fetched Add-ons List successfully\r\n      Refresh Sources\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/repository-7.xml\r\n      Parse XML:    https://dl-ssl.google.com/android/repository/repository-7.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/glass/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/glass/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\r\n    Refresh Sources:\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/glass/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/glass/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\r\n      Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\r\n      Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\r\n    Packages available for installation or update: 2\r\n    ----------\r\n    id: 1 or &quot;tools&quot;\r\n         Type: Tool\r\n         Desc: Android SDK Tools, revision 22.6.2\r\n    ----------\r\n    id: 2 or &quot;platform-tools&quot;\r\n         Type: PlatformTool\r\n         Desc: Android SDK Platform-tools, revision 19.0.1\r\n    \r\n    # Aidl not found, please install it.\r\n\r\n\r\n","title":"Why does Buildozer show `# Aidl not found, please install it.` even after I installed it?","body":"<p>I have installed build-essential, libstdc++6,and, aidl itself:</p>\n\n<pre><code>sudo apt-get install aidl \nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nThe following packages were automatically installed and are no longer required:\n  aspectj eclipse-platform-data eclipse-rcp fastjar fping jarwrapper junit4\n  kivy-doc kivy-tools libasm3-java libasm4-java libaspectj-java libcglib3-java\n  libcommons-cli-java libcommons-codec-java libcommons-httpclient-java\n  libeasymock-java libequinox-osgi-java libfelix-bundlerepository-java\n  libfelix-gogo-command-java libfelix-gogo-runtime-java\n  libfelix-gogo-shell-java libgeronimo-jpa-2.0-spec-java\n  libgeronimo-osgi-support-java libhamcrest-java libicu4j-49-java\n  libjetty8-java libllvm3.8:i386 liblucene2-java libmediaart-2.0-0\n  libmysqlclient20 libobjenesis-java libodbc1 libopenipmi0\n  libosgi-annotation-java libosgi-compendium-java libosgi-core-java\n  libosgi-foundation-ee-java libservlet3.0-java libswt-cairo-gtk-3-jni\n  libswt-gtk-3-java libswt-gtk-3-jni libswt-webkit-gtk-3-jni libtomcat7-java\n  libtracker-sparql-1.0-0 mysql-common python3-gst-1.0 python3-kivy\n  python3-kivy-bin python3-kivy-common sat4j\nUse 'sudo apt autoremove' to remove them.\nThe following NEW packages will be installed:\n  aidl\n0 upgraded, 1 newly installed, 0 to remove and 83 not upgraded.\nNeed to get 83,3 kB of archives.\nAfter this operation, 260 kB of additional disk space will be used.\nGet:1 http://archive.ubuntu.com/ubuntu xenial/universe amd64 aidl amd64 1:6.0.1+r16-1 [83,3 kB]\nFetched 83,3 kB in 0s (197 kB/s)\nSelecting previously unselected package aidl.\n(Reading database ... 315744 files and directories currently installed.)\nPreparing to unpack .../aidl_1%3a6.0.1+r16-1_amd64.deb ...\nUnpacking aidl (1:6.0.1+r16-1) ...\nProcessing triggers for man-db (2.7.5-1) ...\nSetting up aidl (1:6.0.1+r16-1) ...\n</code></pre>\n\n<p>but still I get the following <code># Aidl not found, please install it.</code>:</p>\n\n<pre><code> buildozer android debug deploy run# Check configuration tokens\n# Ensure build layout\n# Check configuration tokens\n# Preparing build\n# Check requirements for android\n# Install platform\n# Apache ANT found at /home/ivan/.buildozer/android/platform/apache-ant-1.9.4\n# Android SDK found at /home/ivan/.buildozer/android/platform/android-sdk-20\n# Android NDK found at /home/ivan/.buildozer/android/platform/android-ndk-r9c\nRefresh Sources:\n  Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml\n  Validate XML\n  Parse XML\n  Fetched Add-ons List successfully\n  Refresh Sources\n  Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/repository-7.xml\n  Parse XML:    https://dl-ssl.google.com/android/repository/repository-7.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/glass/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/glass/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\nRefresh Sources:\n  Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/glass/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/glass/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\nRefresh Sources:\n  Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/glass/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/glass/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\nPackages available for installation or update: 2\n----------\nid: 1 or \"tools\"\n     Type: Tool\n     Desc: Android SDK Tools, revision 22.6.2\n----------\nid: 2 or \"platform-tools\"\n     Type: PlatformTool\n     Desc: Android SDK Platform-tools, revision 19.0.1\n\n# Skipping Android SDK update due to spec file setting\nRefresh Sources:\n  Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml\n  Validate XML\n  Parse XML\n  Fetched Add-ons List successfully\n  Refresh Sources\n  Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/repository-7.xml\n  Parse XML:    https://dl-ssl.google.com/android/repository/repository-7.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/glass/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/glass/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\nRefresh Sources:\n  Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/glass/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/glass/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/extras/intel/addon.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-wear/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/android-tv/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis/sys-img.xml\n  Fetching URL: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\n  Validate XML: https://dl-ssl.google.com/android/repository/sys-img/google_apis_playstore/sys-img.xml\nPackages available for installation or update: 2\n----------\nid: 1 or \"tools\"\n     Type: Tool\n     Desc: Android SDK Tools, revision 22.6.2\n----------\nid: 2 or \"platform-tools\"\n     Type: PlatformTool\n     Desc: Android SDK Platform-tools, revision 19.0.1\n\n# Aidl not found, please install it.\n</code></pre>\n"},{"tags":["java","passwords","shiro","salt"],"answers":[{"tags":[],"owner":{"account_id":1295638,"reputation":387,"user_id":1246780,"accept_rate":33,"display_name":"afterbit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1636381669,"creation_date":1636381669,"answer_id":69885085,"question_id":69835805,"body_markdown":"**Thanks to Benjamin Marwell** : \r\n\r\nThis is possible only in theory and/or with a lot of money.\r\nYou can use hacking tools which run on your GPU, but even then it\r\nmight take years to find it.\r\nAnd that is exactly the point: Password-based key derivation functions\r\nare designed to create an in-revertable hash.\r\n\r\nShiro 2.0 will use even better KDFs like Argon2 or bcrypt/script,\r\nwhich require a vast amount of memory and cpu to make attacks not\r\nfeasible.\r\n\r\nIf you have access to the database where you stored the password, I\r\nwould just set a new password and forget about the old one, if\r\npossible.","title":"newbie question : Apache Shiro recover password","body":"<p><strong>Thanks to Benjamin Marwell</strong> :</p>\n<p>This is possible only in theory and/or with a lot of money.\nYou can use hacking tools which run on your GPU, but even then it\nmight take years to find it.\nAnd that is exactly the point: Password-based key derivation functions\nare designed to create an in-revertable hash.</p>\n<p>Shiro 2.0 will use even better KDFs like Argon2 or bcrypt/script,\nwhich require a vast amount of memory and cpu to make attacks not\nfeasible.</p>\n<p>If you have access to the database where you stored the password, I\nwould just set a new password and forget about the old one, if\npossible.</p>\n"}],"owner":{"account_id":1295638,"reputation":387,"user_id":1246780,"accept_rate":33,"display_name":"afterbit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69885085,"answer_count":1,"score":0,"last_activity_date":1636381669,"creation_date":1636012018,"question_id":69835805,"body_markdown":"I have little experience with encryption / decryption..\r\n\r\nfor my web app I want to use Apache Shiro to login user, with salted password ..\r\n\r\nthis is the article I read : [http://shiro.apache.org/realm.html#Realm-HashingCredentials][1] and the code to generate the salted password :\r\n\r\n    import org.apache.shiro.crypto.hash.Sha256Hash;\r\n    import org.apache.shiro.crypto.RandomNumberGenerator;\r\n    import org.apache.shiro.crypto.SecureRandomNumberGenerator;\r\n    ...\r\n    \r\n    //We&#39;ll use a Random Number Generator to generate salts.  This \r\n    //is much more secure than using a username as a salt or not \r\n    //having a salt at all.  Shiro makes this easy. \r\n    //\r\n    //Note that a normal app would reference an attribute rather \r\n    //than create a new RNG every time: \r\n    RandomNumberGenerator rng = new SecureRandomNumberGenerator();\r\n    Object salt = rng.nextBytes();\r\n    \r\n    //Now hash the plain-text password with the random salt and multiple \r\n    //iterations and then Base64-encode the value (requires less space than Hex): \r\n    String hashedPasswordBase64 = new Sha256Hash(plainTextPassword, salt, 1024).toBase64();\r\n    \r\n    User user = new User(username, hashedPasswordBase64);\r\n    //save the salt with the new account.  The HashedCredentialsMatcher \r\n    //will need it later when handling login attempts: \r\n    user.setPasswordSalt(salt);\r\n    userDAO.create(user);\r\n\r\nThis give me a encrypted password.. but how can I recover the plain text password? It&#39;s possible?\r\n\r\n\r\n  [1]: http://shiro.apache.org/realm.html#Realm-HashingCredentials","title":"newbie question : Apache Shiro recover password","body":"<p>I have little experience with encryption / decryption..</p>\n<p>for my web app I want to use Apache Shiro to login user, with salted password ..</p>\n<p>this is the article I read : <a href=\"http://shiro.apache.org/realm.html#Realm-HashingCredentials\" rel=\"nofollow noreferrer\">http://shiro.apache.org/realm.html#Realm-HashingCredentials</a> and the code to generate the salted password :</p>\n<pre><code>import org.apache.shiro.crypto.hash.Sha256Hash;\nimport org.apache.shiro.crypto.RandomNumberGenerator;\nimport org.apache.shiro.crypto.SecureRandomNumberGenerator;\n...\n\n//We'll use a Random Number Generator to generate salts.  This \n//is much more secure than using a username as a salt or not \n//having a salt at all.  Shiro makes this easy. \n//\n//Note that a normal app would reference an attribute rather \n//than create a new RNG every time: \nRandomNumberGenerator rng = new SecureRandomNumberGenerator();\nObject salt = rng.nextBytes();\n\n//Now hash the plain-text password with the random salt and multiple \n//iterations and then Base64-encode the value (requires less space than Hex): \nString hashedPasswordBase64 = new Sha256Hash(plainTextPassword, salt, 1024).toBase64();\n\nUser user = new User(username, hashedPasswordBase64);\n//save the salt with the new account.  The HashedCredentialsMatcher \n//will need it later when handling login attempts: \nuser.setPasswordSalt(salt);\nuserDAO.create(user);\n</code></pre>\n<p>This give me a encrypted password.. but how can I recover the plain text password? It's possible?</p>\n"},{"tags":["java","spring","spring-boot","logback","slf4j"],"comments":[{"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"score":1,"creation_date":1462995517,"post_id":37169375,"comment_id":61878347,"body_markdown":"Would be good to know how your POM is configured.","body":"Would be good to know how your POM is configured."}],"answers":[{"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1462989219,"creation_date":1462988224,"answer_id":37169712,"question_id":37169375,"body_markdown":"Just add a `logback.xml` in your classpath root with following content:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;configuration&gt;\r\n        &lt;appender name=&quot;FILE_APPENDER&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n            &lt;file&gt;myApp.log&lt;/file&gt;\r\n            &lt;encoder&gt;\r\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;root level=&quot;INFO&quot;&gt;\r\n            &lt;appender-ref ref=&quot;FILE_APPENDER&quot; /&gt;\r\n        &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\nThis would write all logs to the `myApp.log` file. Checkout [Spring Boot documentation][1] for more detailed discussion.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-custom-log-configuration","title":"spring-boot - turn off console logging","body":"<p>Just add a <code>logback.xml</code> in your classpath root with following content:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;configuration&gt;\n    &lt;appender name=\"FILE_APPENDER\" class=\"ch.qos.logback.core.FileAppender\"&gt;\n        &lt;file&gt;myApp.log&lt;/file&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;root level=\"INFO\"&gt;\n        &lt;appender-ref ref=\"FILE_APPENDER\" /&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>This would write all logs to the <code>myApp.log</code> file. Checkout <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-custom-log-configuration\" rel=\"nofollow\">Spring Boot documentation</a> for more detailed discussion.</p>\n"},{"tags":[],"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462996895,"creation_date":1462996895,"answer_id":37172245,"question_id":37169375,"body_markdown":"Having it set up, these are the steps I&#39;ve followed:\r\n\r\nCreate a demo Spring Boot web project with this pom file:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;demo2&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;demo2&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.3.5.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nAs it&#39;s said [in the docs][1], the logging starter is not necessary because it&#39;s already included in the web starter. Let&#39;s create a `@Service` with some [slf4j][2] logging (that&#39;s not necessary at all):\r\n\r\n    @Service\r\n    public class MyService {\r\n    \r\n    \tprivate Logger logger = LoggerFactory.getLogger(MyService.class);\r\n    \r\n    \tpublic MyService() {\r\n    \t\tlogger.info(&quot;Created!&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\nThen, we create a logback-spring.xml file, only configuring the file appender and not the one for the console, as the documentation suggests. Save it in the *src/main/resources* folder, the one Maven places at the root of the classpath:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;configuration&gt;\r\n    \t&lt;include resource=&quot;org/springframework/boot/logging/logback/defaults.xml&quot; /&gt;\r\n    \t&lt;property name=&quot;LOG_FILE&quot; value=&quot;target/spring.log&quot; /&gt;\r\n    \t&lt;include resource=&quot;org/springframework/boot/logging/logback/file-appender.xml&quot; /&gt;\r\n    \t&lt;root level=&quot;INFO&quot;&gt;\r\n    \t\t&lt;appender-ref ref=&quot;FILE&quot; /&gt;\r\n    \t&lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\nWhen project starts, the initial log is shown in console but no more output is shown as it gets redirected to the target/spring.log file.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html#howto-logging\r\n  [2]: http://www.slf4j.org","title":"spring-boot - turn off console logging","body":"<p>Having it set up, these are the steps I've followed:</p>\n\n<p>Create a demo Spring Boot web project with this pom file:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo2&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;demo2&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.3.5.RELEASE&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>As it's said <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html#howto-logging\" rel=\"nofollow\">in the docs</a>, the logging starter is not necessary because it's already included in the web starter. Let's create a <code>@Service</code> with some <a href=\"http://www.slf4j.org\" rel=\"nofollow\">slf4j</a> logging (that's not necessary at all):</p>\n\n<pre><code>@Service\npublic class MyService {\n\n    private Logger logger = LoggerFactory.getLogger(MyService.class);\n\n    public MyService() {\n        logger.info(\"Created!\");\n    }\n\n}\n</code></pre>\n\n<p>Then, we create a logback-spring.xml file, only configuring the file appender and not the one for the console, as the documentation suggests. Save it in the <em>src/main/resources</em> folder, the one Maven places at the root of the classpath:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n    &lt;include resource=\"org/springframework/boot/logging/logback/defaults.xml\" /&gt;\n    &lt;property name=\"LOG_FILE\" value=\"target/spring.log\" /&gt;\n    &lt;include resource=\"org/springframework/boot/logging/logback/file-appender.xml\" /&gt;\n    &lt;root level=\"INFO\"&gt;\n        &lt;appender-ref ref=\"FILE\" /&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>When project starts, the initial log is shown in console but no more output is shown as it gets redirected to the target/spring.log file.</p>\n"},{"tags":[],"owner":{"account_id":905874,"reputation":3369,"user_id":940794,"accept_rate":59,"display_name":"Rop"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1462996904,"creation_date":1462996904,"answer_id":37172247,"question_id":37169375,"body_markdown":"Finally --- I found the bug... \r\nThis is a multi-module build, and turned out in one sub-module, there was also a **logback.xml**, that apparently took priority over the **logback-spring.xml** that I was fiddling with. When I excluded the other file from the build, it finally worked as expected. Phew....","title":"spring-boot - turn off console logging","body":"<p>Finally --- I found the bug... \nThis is a multi-module build, and turned out in one sub-module, there was also a <strong>logback.xml</strong>, that apparently took priority over the <strong>logback-spring.xml</strong> that I was fiddling with. When I excluded the other file from the build, it finally worked as expected. Phew....</p>\n"},{"tags":[],"owner":{"account_id":1561945,"reputation":663,"user_id":1451634,"accept_rate":62,"display_name":"sutanu dalui"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1490787396,"creation_date":1490787396,"answer_id":43092378,"question_id":37169375,"body_markdown":"Setting `logging.pattern.console=` (value is left blank) in application.properties, works for me.","title":"spring-boot - turn off console logging","body":"<p>Setting <code>logging.pattern.console=</code> (value is left blank) in application.properties, works for me.</p>\n"},{"tags":[],"owner":{"account_id":478986,"reputation":356,"user_id":891388,"accept_rate":33,"display_name":"tiennv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636381568,"creation_date":1636381568,"answer_id":69885056,"question_id":37169375,"body_markdown":"This worked for me.\r\n\r\n    logging:\r\n      pattern:\r\n        console=:\r\n      level\r\n        root=OFF","title":"spring-boot - turn off console logging","body":"<p>This worked for me.</p>\n<pre><code>logging:\n  pattern:\n    console=:\n  level\n    root=OFF\n</code></pre>\n"}],"owner":{"account_id":905874,"reputation":3369,"user_id":940794,"accept_rate":59,"display_name":"Rop"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7419,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":37172247,"answer_count":5,"score":1,"last_activity_date":1636381568,"creation_date":1462987240,"question_id":37169375,"body_markdown":"Want to configure a spring-boot (1.3.5) application to send log-output only to a file -- turn off the console.\r\n\r\nIt looks very easy, according to the docs:\r\n[howto-logging.html][1] -- section \r\n  **&#167; 72.1.1 Configure logback for file only output**\r\n\r\nBut I just cannot get this to work -- it still logs **both** to file **and** console, whatever I try. \r\nBeen googling for hours, but cannot find any suggestion that actually works.\r\n\r\nAny clue what the issue might be?\r\n\r\n***EDIT**: Please **dont** mark this as &quot;duplicate&quot; -- I have read them all -- and none of the suggested solutions work here.*\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html","title":"spring-boot - turn off console logging","body":"<p>Want to configure a spring-boot (1.3.5) application to send log-output only to a file -- turn off the console.</p>\n\n<p>It looks very easy, according to the docs:\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html\" rel=\"nofollow\">howto-logging.html</a> -- section \n  <strong>§ 72.1.1 Configure logback for file only output</strong></p>\n\n<p>But I just cannot get this to work -- it still logs <strong>both</strong> to file <strong>and</strong> console, whatever I try. \nBeen googling for hours, but cannot find any suggestion that actually works.</p>\n\n<p>Any clue what the issue might be?</p>\n\n<p><strong><em>EDIT</strong>: Please <strong>dont</strong> mark this as \"duplicate\" -- I have read them all -- and none of the suggested solutions work here.</em></p>\n"},{"tags":["java","aws-lambda","apache-camel","quarkus"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1636246428,"post_id":69869003,"comment_id":123505538,"body_markdown":"The screenshot doesn&#39;t show a nullpointerexception. It just shows that template is null.","body":"The screenshot doesn&#39;t show a nullpointerexception. It just shows that template is null."},{"owner":{"account_id":486137,"reputation":19,"user_id":902870,"display_name":"user902870"},"score":0,"creation_date":1636293200,"post_id":69869003,"comment_id":123512543,"body_markdown":"Correct, because it&#39;s just a sample, this is the result of the AWS Lambda component screen","body":"Correct, because it&#39;s just a sample, this is the result of the AWS Lambda component screen"}],"answers":[{"tags":[],"owner":{"account_id":486137,"reputation":19,"user_id":902870,"display_name":"user902870"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636381494,"creation_date":1636381494,"answer_id":69885040,"question_id":69869003,"body_markdown":"I Found the issue, as I&#39;ve been using Terraform to provide the AWS Lambda function the handler **MUST BE** *io.quarkus.amazon.lambda.runtime.QuarkusStreamHandler::handleRequest*\r\n bellow the raw code snippted\r\n\r\n  \r\n\r\n      resource &quot;aws_lambda_function&quot; &quot;hello_lambda&quot; {\r\n      function_name    = var.AWS_LAMBDA_FUNCTION_NAME\r\n      filename         = &quot;${path.module}/function.zip&quot;\r\n      role             = aws_iam_role.hello_lambda_role.arn\r\n      depends_on       = [aws_cloudwatch_log_group.hello_lambda_logging]\r\n      runtime          = &quot;java11&quot;\r\n      handler          = io.quarkus.amazon.lambda.runtime.QuarkusStreamHandler::handleRequest\r\n      timeout          = 10\r\n      memory_size      = 256\r\n    }","title":"Quarkus Apache Camel AWS Lambda CDI ProducerTemplate result NullPointerException","body":"<p>I Found the issue, as I've been using Terraform to provide the AWS Lambda function the handler <strong>MUST BE</strong> <em>io.quarkus.amazon.lambda.runtime.QuarkusStreamHandler::handleRequest</em>\nbellow the raw code snippted</p>\n<pre><code>  resource &quot;aws_lambda_function&quot; &quot;hello_lambda&quot; {\n  function_name    = var.AWS_LAMBDA_FUNCTION_NAME\n  filename         = &quot;${path.module}/function.zip&quot;\n  role             = aws_iam_role.hello_lambda_role.arn\n  depends_on       = [aws_cloudwatch_log_group.hello_lambda_logging]\n  runtime          = &quot;java11&quot;\n  handler          = io.quarkus.amazon.lambda.runtime.QuarkusStreamHandler::handleRequest\n  timeout          = 10\n  memory_size      = 256\n}\n</code></pre>\n"}],"owner":{"account_id":486137,"reputation":19,"user_id":902870,"display_name":"user902870"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1636381494,"creation_date":1636246034,"question_id":69869003,"body_markdown":"I&#39;m try reproduce the follow code  [Deploying a Camel Route in AWS Lambda : A Camel Quarkus example][1] in my own code [Quarkus Camel AWS Lambda][2], but the ProducerTemplate returns NullPointerExcetion, as can see in this link [BUG_CAMEL_QUARKUS_LAMBDA][3]\r\n\r\n   \r\n\r\n        @Named(&quot;languageScoreLambda&quot;)\r\n    public class LanguageScoreLambda implements RequestHandler&lt;Language, LanguageScoreDto&gt; {\r\n    \r\n      @Inject\r\n      ProducerTemplate template;\r\n    \r\n      @Override\r\n      public LanguageScoreDto handleRequest(Language input, Context context) {\r\n        System.out.println(&quot;#Template isNull ===&gt; &quot; + (null == template)); // true\r\n        return new LanguageScoreDto(&quot;5&quot;, input.getLanguage());\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/apache/camel-quarkus-examples/tree/camel-quarkus-main/aws-lambda\r\n  [2]: https://github.com/DouglasGo8/mmp-aws-certification-dev-assoc/tree/master/mp-lambda-quarkus\r\n  [3]: https://github.com/DouglasGo8/mmp-aws-certification-dev-assoc/blob/master/content/pic/CDI_CAMEL_INJECT_BUG.png","title":"Quarkus Apache Camel AWS Lambda CDI ProducerTemplate result NullPointerException","body":"<p>I'm try reproduce the follow code  <a href=\"https://github.com/apache/camel-quarkus-examples/tree/camel-quarkus-main/aws-lambda\" rel=\"nofollow noreferrer\">Deploying a Camel Route in AWS Lambda : A Camel Quarkus example</a> in my own code <a href=\"https://github.com/DouglasGo8/mmp-aws-certification-dev-assoc/tree/master/mp-lambda-quarkus\" rel=\"nofollow noreferrer\">Quarkus Camel AWS Lambda</a>, but the ProducerTemplate returns NullPointerExcetion, as can see in this link <a href=\"https://github.com/DouglasGo8/mmp-aws-certification-dev-assoc/blob/master/content/pic/CDI_CAMEL_INJECT_BUG.png\" rel=\"nofollow noreferrer\">BUG_CAMEL_QUARKUS_LAMBDA</a></p>\n<pre><code>    @Named(&quot;languageScoreLambda&quot;)\npublic class LanguageScoreLambda implements RequestHandler&lt;Language, LanguageScoreDto&gt; {\n\n  @Inject\n  ProducerTemplate template;\n\n  @Override\n  public LanguageScoreDto handleRequest(Language input, Context context) {\n    System.out.println(&quot;#Template isNull ===&gt; &quot; + (null == template)); // true\n    return new LanguageScoreDto(&quot;5&quot;, input.getLanguage());\n  }\n}\n</code></pre>\n"},{"tags":["java","spring","intellij-idea","spring-test","junit5"],"comments":[{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1471944914,"post_id":39085905,"comment_id":65541714,"body_markdown":"In order to properly assess why your test suite is empty, we would have to see the source code of at least one of the test classes in package `&lt;eu...package&gt;`. For example, we would have to see that you are using the correct annotations and that test methods are annotated/declared correctly.","body":"In order to properly assess why your test suite is empty, we would have to see the source code of at least one of the test classes in package <code>&lt;eu...package&gt;</code>. For example, we would have to see that you are using the correct annotations and that test methods are annotated/declared correctly."},{"owner":{"account_id":4142568,"reputation":3246,"user_id":3397345,"accept_rate":25,"display_name":"Davideas"},"score":1,"creation_date":1471968854,"post_id":39085905,"comment_id":65559282,"body_markdown":"@SamBrannen, the methods are currently annotated with `org.junit.jupiter.api.Test`. If I put `org.junit.Test` than it is Vintage, it works if I put Suite.class, but it is Vintage. I asked suite execution with JUnit5 (Jupiter). As confirmation, test suite is empty also in your library when you execute the test class `SpringExtensionTestSuite`.","body":"@SamBrannen, the methods are currently annotated with <code>org.junit.jupiter.api.Test</code>. If I put <code>org.junit.Test</code> than it is Vintage, it works if I put Suite.class, but it is Vintage. I asked suite execution with JUnit5 (Jupiter). As confirmation, test suite is empty also in your library when you execute the test class <code>SpringExtensionTestSuite</code>."},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1471971999,"post_id":39085905,"comment_id":65561205,"body_markdown":"If you `git clone git@github.com:sbrannen/spring-test-junit5.git`, `cd spring-test-junit5`, run `gradlew eclipse`, and import the project into Eclipse, I promise you that `SpringExtensionTestSuite` executes fine and is not empty.","body":"If you <code>git clone git@github.com:sbrannen&#47;spring-test-junit5.git</code>, <code>cd spring-test-junit5</code>, run <code>gradlew eclipse</code>, and import the project into Eclipse, I promise you that <code>SpringExtensionTestSuite</code> executes fine and is not empty."},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1471972110,"post_id":39085905,"comment_id":65561276,"body_markdown":"Thus, you must be doing something incorrectly, but I cannot really help you much further without seeing what is actually going wrong.","body":"Thus, you must be doing something incorrectly, but I cannot really help you much further without seeing what is actually going wrong."},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1471972970,"post_id":39085905,"comment_id":65561741,"body_markdown":"Long story, short: it&#39;s probably easiest if you create a simple project that reproduces the problem you&#39;re encountering and publish that in your GitHub repository. Then we can literally &quot;check it out&quot;. ;)","body":"Long story, short: it&#39;s probably easiest if you create a simple project that reproduces the problem you&#39;re encountering and publish that in your GitHub repository. Then we can literally &quot;check it out&quot;. ;)"},{"owner":{"account_id":4142568,"reputation":3246,"user_id":3397345,"accept_rate":25,"display_name":"Davideas"},"score":0,"creation_date":1472027365,"post_id":39085905,"comment_id":65582571,"body_markdown":"@SamBrannen, well, I may create the sample project, but I use IDEA, not Eclipse.","body":"@SamBrannen, well, I may create the sample project, but I use IDEA, not Eclipse."},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":1,"creation_date":1472048112,"post_id":39085905,"comment_id":65597103,"body_markdown":"After further investigation, I now assume that this is perhaps a _bug_ in IDEA. I will post back here with additional information later.","body":"After further investigation, I now assume that this is perhaps a <i>bug</i> in IDEA. I will post back here with additional information later."},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1472054377,"post_id":39085905,"comment_id":65601554,"body_markdown":"Can you please let us know exactly which version of IDEA you are using? It is **very** important for both the JUnit team and the IntelliJ team to know. So, thanks in advance!","body":"Can you please let us know exactly which version of IDEA you are using? It is <b>very</b> important for both the JUnit team and the IntelliJ team to know. So, thanks in advance!"},{"owner":{"account_id":4142568,"reputation":3246,"user_id":3397345,"accept_rate":25,"display_name":"Davideas"},"score":0,"creation_date":1472056884,"post_id":39085905,"comment_id":65603050,"body_markdown":"@SamBrannen, IntelliJ IDEA 2016.2.1 - Build #IU-162.1447.26","body":"@SamBrannen, IntelliJ IDEA 2016.2.1 - Build #IU-162.1447.26"},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1472057809,"post_id":39085905,"comment_id":65603540,"body_markdown":"Thanks for letting us know the version of IDEA, and if you _accept_ my answer, I&#39;d be grateful. ;)","body":"Thanks for letting us know the version of IDEA, and if you <i>accept</i> my answer, I&#39;d be grateful. ;)"}],"answers":[{"tags":[],"owner":{"account_id":2997521,"reputation":510,"user_id":2543755,"accept_rate":29,"display_name":"tnas"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1636381041,"creation_date":1471894700,"answer_id":39087432,"question_id":39085905,"body_markdown":"According to [junit official website](http://junit.org/junit5/docs/current/user-guide/#migrating-from-junit4-running):\r\n&lt;blockquote&gt;\r\nJust make sure that the junit-vintage-engine artifact is in your test runtime path. In that case JUnit 3 and JUnit 4 tests will automatically be picked up by the JUnit Platform launcher\r\n&lt;/blockquote&gt;\r\n","title":"JUnit 5 - Empty test suite in IntelliJ IDEA when using JUnit Jupiter engine","body":"<p>According to <a href=\"http://junit.org/junit5/docs/current/user-guide/#migrating-from-junit4-running\" rel=\"nofollow noreferrer\">junit official website</a>:</p>\n<blockquote>\nJust make sure that the junit-vintage-engine artifact is in your test runtime path. In that case JUnit 3 and JUnit 4 tests will automatically be picked up by the JUnit Platform launcher\n</blockquote>\n"},{"tags":[],"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1472058861,"creation_date":1472057010,"answer_id":39128861,"question_id":39085905,"body_markdown":"**Short Answer**\r\n\r\nIf you are using IntelliJ IDEA 2016.2, it is currently not possible to execute a test class annotated with `@RunWith(JUnitPlatform.class)` within the IDE.\r\n\r\n**Long Answer**\r\n\r\nBased on the behavior you reported, after some painstaking investigative work, I believe I have the answer to your question...\r\n\r\nIf you are using IntelliJ IDEA 2016.2 which has built-in support for JUnit 5, then the following is what is happening.\r\n\r\n1. IDEA launches the JUnit Platform via the `Launcher` API, selecting the test class annotated with `@RunWith(JUnitPlatform.class)` (let&#39;s call it `TestSuite`).\r\n1. The `Launcher` detects both the `junit-jupiter` and `junit-vintage` `TestEngine` implementations.\r\n1. The JUnit Jupiter engine ignores `TestSuite` since it is technically not a JUnit Jupiter test class.\r\n1. The JUnit Vintage engine also ignores `TestSuite` since it is annotated with `@RunWith(JUnitPlatform.class)`.\r\n1. The end result is that neither registered test engine claims that it can run the `TestSuite` class.\r\n\r\nThe non-intuitive part is that the JUnit Vintage engine ignores `TestSuite`, when it in fact looks like a JUnit 4 based test class since it&#39;s annotated with `@RunWith()`. The reason it is ignored is to avoid infinite recursion, which is explained in the source code for [DefensiveAllDefaultPossibilitiesBuilder][1]:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\t\r\n\tif (&quot;org.junit.platform.runner.JUnitPlatform&quot;.equals(runnerClass.getName())) {\r\n\t\treturn null;\r\n\t}\r\n\r\nThe fact that the above code returns `null` in such scenarios results in an _empty suite_.\r\n\r\nOf course, it would certainly be better if the user were informed of such scenarios -- for example, via a log statement. I have therefore opened issues for both [JUnit 5][2] and [IntelliJ][3] to improve the usability in such scenarios.\r\n\r\nOn the plus side, since you&#39;re using IntelliJ IDEA 2016.2, you don&#39;t need to use the test suite support. Instead, you can simply right-click on `src/test/java` in the project view in IDEA and select `Run &#39;All Tests&#39;`, and that will run all your tests.\r\n\r\nRegards,\r\n\r\nSam _(JUnit 5 core committer)_\r\n\r\n\r\n  [1]: https://github.com/junit-team/junit5/blob/r5.0.0-M2/junit-vintage-engine/src/main/java/org/junit/vintage/engine/discovery/DefensiveAllDefaultPossibilitiesBuilder.java#L53-L71\r\n  [2]: https://github.com/junit-team/junit5/issues/476\r\n  [3]: https://youtrack.jetbrains.com/issue/IDEA-160253","title":"JUnit 5 - Empty test suite in IntelliJ IDEA when using JUnit Jupiter engine","body":"<p><strong>Short Answer</strong></p>\n\n<p>If you are using IntelliJ IDEA 2016.2, it is currently not possible to execute a test class annotated with <code>@RunWith(JUnitPlatform.class)</code> within the IDE.</p>\n\n<p><strong>Long Answer</strong></p>\n\n<p>Based on the behavior you reported, after some painstaking investigative work, I believe I have the answer to your question...</p>\n\n<p>If you are using IntelliJ IDEA 2016.2 which has built-in support for JUnit 5, then the following is what is happening.</p>\n\n<ol>\n<li>IDEA launches the JUnit Platform via the <code>Launcher</code> API, selecting the test class annotated with <code>@RunWith(JUnitPlatform.class)</code> (let's call it <code>TestSuite</code>).</li>\n<li>The <code>Launcher</code> detects both the <code>junit-jupiter</code> and <code>junit-vintage</code> <code>TestEngine</code> implementations.</li>\n<li>The JUnit Jupiter engine ignores <code>TestSuite</code> since it is technically not a JUnit Jupiter test class.</li>\n<li>The JUnit Vintage engine also ignores <code>TestSuite</code> since it is annotated with <code>@RunWith(JUnitPlatform.class)</code>.</li>\n<li>The end result is that neither registered test engine claims that it can run the <code>TestSuite</code> class.</li>\n</ol>\n\n<p>The non-intuitive part is that the JUnit Vintage engine ignores <code>TestSuite</code>, when it in fact looks like a JUnit 4 based test class since it's annotated with <code>@RunWith()</code>. The reason it is ignored is to avoid infinite recursion, which is explained in the source code for <a href=\"https://github.com/junit-team/junit5/blob/r5.0.0-M2/junit-vintage-engine/src/main/java/org/junit/vintage/engine/discovery/DefensiveAllDefaultPossibilitiesBuilder.java#L53-L71\">DefensiveAllDefaultPossibilitiesBuilder</a>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>if (\"org.junit.platform.runner.JUnitPlatform\".equals(runnerClass.getName())) {\n    return null;\n}\n</code></pre>\n\n<p>The fact that the above code returns <code>null</code> in such scenarios results in an <em>empty suite</em>.</p>\n\n<p>Of course, it would certainly be better if the user were informed of such scenarios -- for example, via a log statement. I have therefore opened issues for both <a href=\"https://github.com/junit-team/junit5/issues/476\">JUnit 5</a> and <a href=\"https://youtrack.jetbrains.com/issue/IDEA-160253\">IntelliJ</a> to improve the usability in such scenarios.</p>\n\n<p>On the plus side, since you're using IntelliJ IDEA 2016.2, you don't need to use the test suite support. Instead, you can simply right-click on <code>src/test/java</code> in the project view in IDEA and select <code>Run 'All Tests'</code>, and that will run all your tests.</p>\n\n<p>Regards,</p>\n\n<p>Sam <em>(JUnit 5 core committer)</em></p>\n"},{"tags":[],"owner":{"account_id":3886041,"reputation":194,"user_id":3217378,"accept_rate":25,"display_name":"Highchiller"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1487884193,"creation_date":1487884193,"answer_id":42426235,"question_id":39085905,"body_markdown":"Additional to [Sam Brannen&#39;s answer](https://stackoverflow.com/a/39128861/3217378). I needed a TestSuit to setup the backend before running all test classes in a package. This is probably not possible via `Run &#39;All Tests&#39;`.\r\n\r\nBut I think I found a good workaround for it. I came up with this:\r\n\r\n    import org.junit.jupiter.api.BeforeAll;\r\n    import org.junit.jupiter.api.Nested;\r\n    import your.other.package.test.classes.*;\r\n    \r\n    public class TestSuit {\r\n        @BeforeAll\r\n        public static void setup(){}\r\n\r\n        @Nested\r\n        public class TestExtender extends MyTestClass {}\r\n    }\r\n\r\nYou could extend each test class from another package and add the `@Nested` annotation to it. It is not the best solution, but it is a workaround until IDEA or JUnit 5 find another solution for this cases.","title":"JUnit 5 - Empty test suite in IntelliJ IDEA when using JUnit Jupiter engine","body":"<p>Additional to <a href=\"https://stackoverflow.com/a/39128861/3217378\">Sam Brannen's answer</a>. I needed a TestSuit to setup the backend before running all test classes in a package. This is probably not possible via <code>Run 'All Tests'</code>.</p>\n\n<p>But I think I found a good workaround for it. I came up with this:</p>\n\n<pre><code>import org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.Nested;\nimport your.other.package.test.classes.*;\n\npublic class TestSuit {\n    @BeforeAll\n    public static void setup(){}\n\n    @Nested\n    public class TestExtender extends MyTestClass {}\n}\n</code></pre>\n\n<p>You could extend each test class from another package and add the <code>@Nested</code> annotation to it. It is not the best solution, but it is a workaround until IDEA or JUnit 5 find another solution for this cases.</p>\n"}],"owner":{"account_id":4142568,"reputation":3246,"user_id":3397345,"accept_rate":25,"display_name":"Davideas"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15303,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":39128861,"answer_count":3,"score":11,"last_activity_date":1636381041,"creation_date":1471888805,"question_id":39085905,"body_markdown":"How to execute All Suite tests with JUnit 5 in IntelliJ IDEA v2016.2.2?\r\n\r\nI get *Empty test suite* running this code:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    \r\n    import org.junit.platform.runner.IncludeEngines;\r\n    import org.junit.platform.runner.JUnitPlatform;\r\n    import org.junit.platform.runner.SelectPackages;\r\n    import org.junit.runner.RunWith;\r\n    \r\n    @RunWith(JUnitPlatform.class)\r\n    @IncludeEngines(&quot;junit-jupiter&quot;)\r\n    @SelectPackages(&quot;&lt;eu...package&gt;&quot;) //I confirm that &lt;eu...package&gt; is ok.\r\n    public class AllTests {\r\n    }\r\n\r\nI receive:\r\n\r\n    INFORMAZIONI: Discovered TestEngines with IDs: [junit-jupiter, junit-vintage]\r\n    Empty test suite.\r\n    Empty test suite.\r\n\r\n    [root]\r\n    JUnit Jupiter\r\n    JUnit Vintage\r\n\r\n**OR**\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    \r\n    import eu.....services.ServiceTest;\r\n    import eu.....repository.DAOTest;\r\n    import org.junit.runner.RunWith;\r\n    import org.junit.runners.Suite;\r\n    \r\n    @RunWith(Suite.class)\r\n    @Suite.SuiteClasses({\r\n    \t\tServiceTest.class,\r\n    \t\tDAOTest.class\r\n    })\r\n    public class AllTests {\r\n    }\r\n\r\nI receive:\r\n\r\n    INFORMAZIONI: Discovered TestEngines with IDs: [junit-jupiter, junit-vintage]\r\n    Empty test suite.\r\n\r\n    [root]\r\n    |+--JUnit Vintage\r\n    |   +--eu.....AllTests\r\n    |+--JUnit Jupiter\r\n\r\nI was able to run suite with JUnit 4, but it doesn&#39;t work with JUnit 5.","title":"JUnit 5 - Empty test suite in IntelliJ IDEA when using JUnit Jupiter engine","body":"<p>How to execute All Suite tests with JUnit 5 in IntelliJ IDEA v2016.2.2?</p>\n\n<p>I get <em>Empty test suite</em> running this code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.platform.runner.IncludeEngines;\nimport org.junit.platform.runner.JUnitPlatform;\nimport org.junit.platform.runner.SelectPackages;\nimport org.junit.runner.RunWith;\n\n@RunWith(JUnitPlatform.class)\n@IncludeEngines(\"junit-jupiter\")\n@SelectPackages(\"&lt;eu...package&gt;\") //I confirm that &lt;eu...package&gt; is ok.\npublic class AllTests {\n}\n</code></pre>\n\n<p>I receive:</p>\n\n<pre><code>INFORMAZIONI: Discovered TestEngines with IDs: [junit-jupiter, junit-vintage]\nEmpty test suite.\nEmpty test suite.\n\n[root]\nJUnit Jupiter\nJUnit Vintage\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import eu.....services.ServiceTest;\nimport eu.....repository.DAOTest;\nimport org.junit.runner.RunWith;\nimport org.junit.runners.Suite;\n\n@RunWith(Suite.class)\n@Suite.SuiteClasses({\n        ServiceTest.class,\n        DAOTest.class\n})\npublic class AllTests {\n}\n</code></pre>\n\n<p>I receive:</p>\n\n<pre><code>INFORMAZIONI: Discovered TestEngines with IDs: [junit-jupiter, junit-vintage]\nEmpty test suite.\n\n[root]\n|+--JUnit Vintage\n|   +--eu.....AllTests\n|+--JUnit Jupiter\n</code></pre>\n\n<p>I was able to run suite with JUnit 4, but it doesn't work with JUnit 5.</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":1,"creation_date":1618807487,"post_id":67156046,"comment_id":118704667,"body_markdown":"So... did you actually pass any args to your program when you ran it? What did you actually type to run it?","body":"So... did you actually pass any args to your program when you ran it? What did you actually type to run it?"},{"owner":{"account_id":4266128,"reputation":113,"user_id":3489210,"display_name":"mayu kobi"},"score":0,"creation_date":1618807582,"post_id":67156046,"comment_id":118704687,"body_markdown":"if  i enter the relavent author id relavent authors details needs to be display","body":"if  i enter the relavent author id relavent authors details needs to be display"},{"owner":{"account_id":4266128,"reputation":113,"user_id":3489210,"display_name":"mayu kobi"},"score":0,"creation_date":1618807697,"post_id":67156046,"comment_id":118704709,"body_markdown":"i remove the args i got  differnt error was   Can&#39;t set IN parameter for return value of stored function call","body":"i remove the args i got  differnt error was   Can&#39;t set IN parameter for return value of stored function call"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1618813005,"creation_date":1618808390,"answer_id":67156179,"question_id":67156046,"body_markdown":"Your callable statement has three parameters (question marks). According to the [JavaDoc](https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/java/sql/CallableStatement.html) you are using the form with a result parameter, which means that you must set it as an OUT parameter.\r\n\r\nTo clarify I&#39;ve numbered the parameters for you:\r\n\r\n    {?=call authors(?,?)}\r\n     1              2 3\r\n\r\nWithout knowing the definition of your stored procedure I would guess that it takes one IN parameter, has one OUT parameter and returns a result. In that case you should set the parameters as follows:\r\n\r\n    stat1.registerOutParameter(1,Types.VARCHAR);\r\n    stat1.setString(2, &quot;1&quot;);\r\n    stat1.registerOutParameter(3,Types.VARCHAR);\r\n\r\n-------\r\n**Edit:**\r\n\r\nWith the stored procedure defined as\r\n\r\n    CREATE PROCEDURE authors (p_auth_id varchar(15), OUT p_auth_fname varchar(20), OUT p_auth_lname varchar(20))\r\n\r\nit has three parameters (the first one in IN parameter, the second and third are OUT parameters).\r\n\r\nTherefore the correct way to call it is:\r\n\r\n        CallableStatement stat1 = con.prepareCall(&quot;{call authors(?,?,?)}&quot;);\r\n    \r\n                \r\n        stat1.setString(1, &quot;1&quot;);\r\n        stat1.registerOutParameter(2,Types.VARCHAR);\r\n        stat1.registerOutParameter(3,Types.VARCHAR);\r\n\r\nYou will also have to drop these lines:\r\n\r\n    /*\r\n        int k = stat1.getInt(1);\r\n    \r\n        if(k == 0)\r\n        {\r\n            System.out.println(&quot;Customer id Not FOund&quot;);\r\n            System.exit(0);\r\n        }\r\n    */\r\n\r\nbecause the parameter 1 is an IN-only parameter (and your stored procedure doesn&#39;t return any other value besides the OUT-parameters).\r\n\r\nTo read the result from the OUT-parameters you _also_ have to adapt the parameter numbers:\r\n\r\n    System.out.println(stat1.getString(2));\r\n    System.out.println(&quot;   &quot;);\r\n    System.out.println(stat1.getString(3));\r\n\r\n----\r\nUnfortunately I don&#39;t know enough about stored procedures to tell you how you can find out if there was any row found at all.\r\n\r\nI could imagine that if the query in your stored procedure didn&#39;t find any rows then both OUT parameters would return `null`.","title":"Find records not working Jdbc stored procedure","body":"<p>Your callable statement has three parameters (question marks). According to the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/java/sql/CallableStatement.html\" rel=\"nofollow noreferrer\">JavaDoc</a> you are using the form with a result parameter, which means that you must set it as an OUT parameter.</p>\n<p>To clarify I've numbered the parameters for you:</p>\n<pre><code>{?=call authors(?,?)}\n 1              2 3\n</code></pre>\n<p>Without knowing the definition of your stored procedure I would guess that it takes one IN parameter, has one OUT parameter and returns a result. In that case you should set the parameters as follows:</p>\n<pre><code>stat1.registerOutParameter(1,Types.VARCHAR);\nstat1.setString(2, &quot;1&quot;);\nstat1.registerOutParameter(3,Types.VARCHAR);\n</code></pre>\n<hr />\n<p><strong>Edit:</strong></p>\n<p>With the stored procedure defined as</p>\n<pre><code>CREATE PROCEDURE authors (p_auth_id varchar(15), OUT p_auth_fname varchar(20), OUT p_auth_lname varchar(20))\n</code></pre>\n<p>it has three parameters (the first one in IN parameter, the second and third are OUT parameters).</p>\n<p>Therefore the correct way to call it is:</p>\n<pre><code>    CallableStatement stat1 = con.prepareCall(&quot;{call authors(?,?,?)}&quot;);\n\n            \n    stat1.setString(1, &quot;1&quot;);\n    stat1.registerOutParameter(2,Types.VARCHAR);\n    stat1.registerOutParameter(3,Types.VARCHAR);\n</code></pre>\n<p>You will also have to drop these lines:</p>\n<pre><code>/*\n    int k = stat1.getInt(1);\n\n    if(k == 0)\n    {\n        System.out.println(&quot;Customer id Not FOund&quot;);\n        System.exit(0);\n    }\n*/\n</code></pre>\n<p>because the parameter 1 is an IN-only parameter (and your stored procedure doesn't return any other value besides the OUT-parameters).</p>\n<p>To read the result from the OUT-parameters you <em>also</em> have to adapt the parameter numbers:</p>\n<pre><code>System.out.println(stat1.getString(2));\nSystem.out.println(&quot;   &quot;);\nSystem.out.println(stat1.getString(3));\n</code></pre>\n<hr />\n<p>Unfortunately I don't know enough about stored procedures to tell you how you can find out if there was any row found at all.</p>\n<p>I could imagine that if the query in your stored procedure didn't find any rows then both OUT parameters would return <code>null</code>.</p>\n"}],"owner":{"account_id":4266128,"reputation":113,"user_id":3489210,"display_name":"mayu kobi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":67156179,"answer_count":1,"score":0,"last_activity_date":1636380781,"creation_date":1618807225,"question_id":67156046,"body_markdown":"I&#39;m a beginner of writing JDBC stored procedures. I created the stored procedure successfully. If I find the record, I couldn&#39;t find it. I get the error:\r\n\r\n&gt; Check connectionjava.sql.SQLException: Can&#39;t set IN parameter for return value of stored function call.\r\n\r\nI attached the code that I tried so far\r\n\r\n     public class JdbcFind {\r\n        \r\n        \tpublic static void main(String[] args) {\r\n        Connection con=null;\r\n        \t\t\r\n        \tString id,fname,lname;\r\n        \r\n        \t\t\ttry {\r\n        \t\t\t\tClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n        \t\t\t\tcon = DriverManager.getConnection(&quot;jdbc:mysql://localhost/abclibrary&quot;, &quot;root&quot;,&quot;&quot;);\t\r\n        \t\t\t\tCallableStatement stat1 = con.prepareCall(&quot;{?=call authors(?,?)}&quot;);\r\n        \r\n        \t\t\t\r\n        \t\t\t\tstat1.registerOutParameter(1,Types.VARCHAR);\r\n\t\t\t\tstat1.setString(2, &quot;1&quot;);\r\n\t\t\t\tstat1.registerOutParameter(3,Types.VARCHAR);\r\n        \r\n        \t\t\t\tstat1.execute();\r\n        \t\t\t\tint k = stat1.getInt(1);\r\n        \r\n        \t\t\t\tif(k == 0)\r\n        \t\t\t\t{\r\n        \t\t\t\t\tSystem.out.println(&quot;Customer id Not FOund&quot;);\r\n        \t\t\t\t\tSystem.exit(0);\r\n        \t\t\t\t}\r\n        \r\n        \t\t\t\tSystem.out.println(stat1.getString(1));\r\n        \t\t\t\tSystem.out.println(&quot;   &quot;);\r\n        \t\t\t\tSystem.out.println(stat1.getString(2));\r\n        \t\t\t\t\r\n        \t\t\t\t}catch(ClassNotFoundException cle)\r\n        \t\t\t\t{\r\n        \t\t\t\tSystem.out.println(&quot;check your jdbc connection&quot; );\r\n        \r\n        \r\n        \t\t\t\t}catch(SQLException sqe)\r\n        \t\t\t\t{\r\n        \t\t\t\tSystem.out.println(&quot;Check connection&quot; +sqe);\r\n        \t\t\t\t}finally{\r\n        \t\t\t\t\t\ttry{\r\n        \t\t\t\t\t\t\tif(con != null)\r\n        \t\t\t\t\t\t\tcon.close();\r\n        \t\t\t\t\t\t\t}catch(Exception e){}\r\n        \t\t\t\t\t}\r\n        \r\n        \t\t}\r\n\r\nStored procedure:\r\n\r\n     String str = &quot;CREATE PROCEDURE authors (p_auth_id varchar(15), OUT p_auth_fname varchar(20), OUT p_auth_lname varchar(20))\\n&quot; +\r\n                          &quot;BEGIN\\n&quot; +\r\n                           &quot;  SELECT auth_fname, auth_lname INTO p_auth_fname, p_auth_lname FROM authors where auth_id = p_auth_id;\\n&quot; +\r\n                           &quot;END;&quot;;\r\n\r\n\r\n","title":"Find records not working Jdbc stored procedure","body":"<p>I'm a beginner of writing JDBC stored procedures. I created the stored procedure successfully. If I find the record, I couldn't find it. I get the error:</p>\n<blockquote>\n<p>Check connectionjava.sql.SQLException: Can't set IN parameter for return value of stored function call.</p>\n</blockquote>\n<p>I attached the code that I tried so far</p>\n<pre><code> public class JdbcFind {\n    \n        public static void main(String[] args) {\n    Connection con=null;\n            \n        String id,fname,lname;\n    \n                try {\n                    Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\n                    con = DriverManager.getConnection(&quot;jdbc:mysql://localhost/abclibrary&quot;, &quot;root&quot;,&quot;&quot;);  \n                    CallableStatement stat1 = con.prepareCall(&quot;{?=call authors(?,?)}&quot;);\n    \n                \n                    stat1.registerOutParameter(1,Types.VARCHAR);\n            stat1.setString(2, &quot;1&quot;);\n            stat1.registerOutParameter(3,Types.VARCHAR);\n    \n                    stat1.execute();\n                    int k = stat1.getInt(1);\n    \n                    if(k == 0)\n                    {\n                        System.out.println(&quot;Customer id Not FOund&quot;);\n                        System.exit(0);\n                    }\n    \n                    System.out.println(stat1.getString(1));\n                    System.out.println(&quot;   &quot;);\n                    System.out.println(stat1.getString(2));\n                    \n                    }catch(ClassNotFoundException cle)\n                    {\n                    System.out.println(&quot;check your jdbc connection&quot; );\n    \n    \n                    }catch(SQLException sqe)\n                    {\n                    System.out.println(&quot;Check connection&quot; +sqe);\n                    }finally{\n                            try{\n                                if(con != null)\n                                con.close();\n                                }catch(Exception e){}\n                        }\n    \n            }\n</code></pre>\n<p>Stored procedure:</p>\n<pre><code> String str = &quot;CREATE PROCEDURE authors (p_auth_id varchar(15), OUT p_auth_fname varchar(20), OUT p_auth_lname varchar(20))\\n&quot; +\n                      &quot;BEGIN\\n&quot; +\n                       &quot;  SELECT auth_fname, auth_lname INTO p_auth_fname, p_auth_lname FROM authors where auth_id = p_auth_id;\\n&quot; +\n                       &quot;END;&quot;;\n</code></pre>\n"},{"tags":["java","jvm","thread-safety","heap-memory","volatile"],"comments":[{"owner":{"account_id":80775,"reputation":80356,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":2,"creation_date":1358308199,"post_id":14350974,"comment_id":19951421,"body_markdown":"Exactly where did you read that volatile variables are stored in thread-local memory?  I see no such assertion in the Wikipedia entry.","body":"Exactly where did you read that volatile variables are stored in thread-local memory?  I see no such assertion in the Wikipedia entry."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1358308231,"post_id":14350974,"comment_id":19951431,"body_markdown":"*&quot;Wikipedia and many blogs say that all volatile variables are stored in a Thread-Local memory over the main memory shared by all threads!&quot;*.  Please provide citations with links.  This sounds wrong.","body":"<i>&quot;Wikipedia and many blogs say that all volatile variables are stored in a Thread-Local memory over the main memory shared by all threads!&quot;</i>.  Please provide citations with links.  This sounds wrong."},{"owner":{"account_id":13025,"reputation":18196,"user_id":25949,"accept_rate":67,"display_name":"Nivas"},"score":0,"creation_date":1358308383,"post_id":14350974,"comment_id":19951461,"body_markdown":"[The Java Tutorials: Atomic Access](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html) and [Java theory and practice: Managing volatility](http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html) are better places to read about `volatile` than wikipedia.","body":"<a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\" rel=\"nofollow noreferrer\">The Java Tutorials: Atomic Access</a> and <a href=\"http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html\" rel=\"nofollow noreferrer\">Java theory and practice: Managing volatility</a> are better places to read about <code>volatile</code> than wikipedia."},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1358309924,"post_id":14350974,"comment_id":19951791,"body_markdown":"http://en.wikipedia.org/wiki/Volatile_variable#In_Java : does not state what you said.","body":"<a href=\"http://en.wikipedia.org/wiki/Volatile_variable#In_Java\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Volatile_variable#In_Java</a> : does not state what you said."},{"owner":{"account_id":1804107,"reputation":425,"user_id":1641639,"accept_rate":83,"display_name":"ayoubuntu"},"score":0,"creation_date":1358310031,"post_id":14350974,"comment_id":19951815,"body_markdown":"I guess i did a big mistake, i&#39;d have to say that volatile variables are stored within the main memory and not the thread-local memory as it&#39;s said in this article : http://www.javamex.com/tutorials/synchronization_volatile.shtml\nMy appologies.\n@Stephen C : up here&#39;s an example talking about the thread-local memory. Now, what&#39;s the difference between a Thread local memory and a process cache memory ?!","body":"I guess i did a big mistake, i&#39;d have to say that volatile variables are stored within the main memory and not the thread-local memory as it&#39;s said in this article : <a href=\"http://www.javamex.com/tutorials/synchronization_volatile.shtml\" rel=\"nofollow noreferrer\">javamex.com/tutorials/synchronization_volatile.shtml</a> My appologies. @Stephen C : up here&#39;s an example talking about the thread-local memory. Now, what&#39;s the difference between a Thread local memory and a process cache memory ?!"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1358310613,"post_id":14350974,"comment_id":19951935,"body_markdown":"@ayoubuntu - Which example are you talking about?  The article you linked to doesn&#39;t refer to &quot;thread local memory&quot;.  It talks about data being &quot;cached thread-locally&quot;.  It is talking about registers and the processor / core&#39;s L1 and L2 caches ... not to any special &quot;thread local memory&quot;.  (IMO, the article&#39;s terminology is a bit non-standard and contorted ...)","body":"@ayoubuntu - Which example are you talking about?  The article you linked to doesn&#39;t refer to &quot;thread local memory&quot;.  It talks about data being &quot;cached thread-locally&quot;.  It is talking about registers and the processor / core&#39;s L1 and L2 caches ... not to any special &quot;thread local memory&quot;.  (IMO, the article&#39;s terminology is a bit non-standard and contorted ...)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1636380337,"post_id":14350974,"comment_id":123533810,"body_markdown":"(It is now 2021, and the page that the OP linked to has changed.  It no longer uses the misleading phrase &quot;cached thread-locally&quot; ... at all.)","body":"(It is now 2021, and the page that the OP linked to has changed.  It no longer uses the misleading phrase &quot;cached thread-locally&quot; ... at all.)"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1636380659,"creation_date":1358308361,"answer_id":14351090,"question_id":14350974,"body_markdown":"&gt; First of all, Wikipedia and many blogs say that all volatile variables are stored in a Thread-Local memory over the main memory shared by all threads.\r\n\r\nThat is incorrect.  Volatile fields are instance or class (static) variables and are stored in the heap.\r\n\r\nThey *might* be referring to cache memory that is specific to a single processor / core ... but that is a hardware-specific thing.  But this is definitely not &quot;thread-local&quot;.  That term means something entirely different.\r\n\r\n&gt; If so, then what happen if the volatile variable is an object reference and not a primitive literal?\r\n\r\nNothing special.  Your assumptions are incorrect.  \r\n\r\nVolatile variables are not stored on the stack.  Indeed, if you attempt to use the `volatile` keyword for a local variable, you will get a compilation error.  (It would make no sense.  Variables on the stack are only visible to one thread.  Volatile semantics are about variables that are shared by different threads.) \r\n\r\n&gt;  I know each thread has his own stack memory where it stores its own primitive literals &amp; objects references.\r\n\r\nWhat is stored on the thread&#39;s stack is:\r\n\r\n   - the method&#39;s local variables,\r\n   - the method&#39;s parameters,\r\n   - the method&#39;s return address etc so that the CPU knows where to go when the call returns, and (possibly)\r\n   - state of local objects that the JIT compiler has figured don&#39;t need to be stored in the heap.\r\n\r\nA method&#39;s primitive literals are typically embedded in the code itself.  String literals are elsewhere too.  (When those literals are assigned to local variables they will be held on the stack ...)\r\n\r\n&gt; Second, could you please explain in details using an example how the volatile keyword works and when we are supposed to use it?\r\n\r\nCheck the comments, and the related questions ... or Google &quot;java volatile example&quot;.  An explanation would be redundant.","title":"Volatile Keyword &amp; the thread local memory","body":"<blockquote>\n<p>First of all, Wikipedia and many blogs say that all volatile variables are stored in a Thread-Local memory over the main memory shared by all threads.</p>\n</blockquote>\n<p>That is incorrect.  Volatile fields are instance or class (static) variables and are stored in the heap.</p>\n<p>They <em>might</em> be referring to cache memory that is specific to a single processor / core ... but that is a hardware-specific thing.  But this is definitely not &quot;thread-local&quot;.  That term means something entirely different.</p>\n<blockquote>\n<p>If so, then what happen if the volatile variable is an object reference and not a primitive literal?</p>\n</blockquote>\n<p>Nothing special.  Your assumptions are incorrect.</p>\n<p>Volatile variables are not stored on the stack.  Indeed, if you attempt to use the <code>volatile</code> keyword for a local variable, you will get a compilation error.  (It would make no sense.  Variables on the stack are only visible to one thread.  Volatile semantics are about variables that are shared by different threads.)</p>\n<blockquote>\n<p>I know each thread has his own stack memory where it stores its own primitive literals &amp; objects references.</p>\n</blockquote>\n<p>What is stored on the thread's stack is:</p>\n<ul>\n<li>the method's local variables,</li>\n<li>the method's parameters,</li>\n<li>the method's return address etc so that the CPU knows where to go when the call returns, and (possibly)</li>\n<li>state of local objects that the JIT compiler has figured don't need to be stored in the heap.</li>\n</ul>\n<p>A method's primitive literals are typically embedded in the code itself.  String literals are elsewhere too.  (When those literals are assigned to local variables they will be held on the stack ...)</p>\n<blockquote>\n<p>Second, could you please explain in details using an example how the volatile keyword works and when we are supposed to use it?</p>\n</blockquote>\n<p>Check the comments, and the related questions ... or Google &quot;java volatile example&quot;.  An explanation would be redundant.</p>\n"}],"owner":{"account_id":1804107,"reputation":425,"user_id":1641639,"accept_rate":83,"display_name":"ayoubuntu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8516,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"closed_date":1358318395,"accepted_answer_id":14351090,"answer_count":1,"score":6,"last_activity_date":1636380659,"creation_date":1358307351,"question_id":14350974,"body_markdown":"I got confused understanding the usage of the `volatile` keyword in Java. I have read many articles on the internet but am still getting nowhere. There are many questions in my head that I would like to ask:\r\n\r\nFirst of all, Wikipedia and many blogs say that all `volatile` variables are stored in a _Thread-Local memory_ over the main memory shared by all threads! I&#39;m a little bit confused, are they meaning the `stack memory`? I know each thread has his own `stack memory` where it stores its own primitive literals &amp; objects references.\r\n\r\nIf so, then what happen if the `volatile` variable is an object reference and not a primitive literal? I guess all the objects are stored in the heap space and not in the stack memory. \r\n\r\nSecond, could you please explain in details using an example how the `volatile` keyword works and when we are supposed to use it?","title":"Volatile Keyword &amp; the thread local memory","body":"<p>I got confused understanding the usage of the <code>volatile</code> keyword in Java. I have read many articles on the internet but am still getting nowhere. There are many questions in my head that I would like to ask:</p>\n\n<p>First of all, Wikipedia and many blogs say that all <code>volatile</code> variables are stored in a <em>Thread-Local memory</em> over the main memory shared by all threads! I'm a little bit confused, are they meaning the <code>stack memory</code>? I know each thread has his own <code>stack memory</code> where it stores its own primitive literals &amp; objects references.</p>\n\n<p>If so, then what happen if the <code>volatile</code> variable is an object reference and not a primitive literal? I guess all the objects are stored in the heap space and not in the stack memory. </p>\n\n<p>Second, could you please explain in details using an example how the <code>volatile</code> keyword works and when we are supposed to use it?</p>\n"},{"tags":["java","quartz-scheduler","quartz"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636366366,"post_id":69881721,"comment_id":123528186,"body_markdown":"so ... a job is deployed on server X. You need the job to execute even if server X is down. Is that what you are asking?","body":"so ... a job is deployed on server X. You need the job to execute even if server X is down. Is that what you are asking?"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":1,"creation_date":1636366646,"post_id":69881721,"comment_id":123528289,"body_markdown":"Add to your scheduled job a persisted bool flag which is getting set, when the task was run. And add an additional task which triggers at startup, which checks according to the flag and the current date if the task should ran in the past and wasn&#39;t already. Watch out for concurrency.","body":"Add to your scheduled job a persisted bool flag which is getting set, when the task was run. And add an additional task which triggers at startup, which checks according to the flag and the current date if the task should ran in the past and wasn&#39;t already. Watch out for concurrency."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636366906,"post_id":69881721,"comment_id":123528392,"body_markdown":"@Vala.D. why is al that needed? the result would be to have it run on a time it&#39;s not specified, but &quot;the first available slot&quot;","body":"@Vala.D. why is al that needed? the result would be to have it run on a time it&#39;s not specified, but &quot;the first available slot&quot;"},{"owner":{"account_id":1959368,"reputation":1,"user_id":1761462,"display_name":"Mohsen Vahedi"},"score":0,"creation_date":1636371652,"post_id":69881721,"comment_id":123530145,"body_markdown":"@Stultuske\nYes, that&#39;s right","body":"@Stultuske Yes, that&#39;s right"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636372828,"post_id":69881721,"comment_id":123530575,"body_markdown":"@MohsenVahedi you understand that that is not possible? unless, of course, you have a backup server, which is up and running at that time","body":"@MohsenVahedi you understand that that is not possible? unless, of course, you have a backup server, which is up and running at that time"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1636374173,"post_id":69881721,"comment_id":123531138,"body_markdown":"@Stultuske I don&#39;t know of a possibility within Quarz to do what OP is looking for. I just described how i would build such a solution. And my solution would not require a backup server.","body":"@Stultuske I don&#39;t know of a possibility within Quarz to do what OP is looking for. I just described how i would build such a solution. And my solution would not require a backup server."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636374305,"post_id":69881721,"comment_id":123531186,"body_markdown":"@Vala.D. indeed, it wouldn&#39;t, but then the service would not execute at the specified time, so it doesn&#39;t meet the requirements. If the server isn&#39;t running, services that run on said server don&#39;t run, it&#39;s that simple. I&#39;m not saying your solution isn&#39;t good, it just doesn&#39;t meet the (impossible) requirements imo","body":"@Vala.D. indeed, it wouldn&#39;t, but then the service would not execute at the specified time, so it doesn&#39;t meet the requirements. If the server isn&#39;t running, services that run on said server don&#39;t run, it&#39;s that simple. I&#39;m not saying your solution isn&#39;t good, it just doesn&#39;t meet the (impossible) requirements imo"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1636374438,"post_id":69881721,"comment_id":123531233,"body_markdown":"I understood that OP wants to run a task at a given time and if the server was down at this time to run it immediately after server-start.","body":"I understood that OP wants to run a task at a given time and if the server was down at this time to run it immediately after server-start."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636374552,"post_id":69881721,"comment_id":123531279,"body_markdown":"not how I read it, but that&#39;s something the OP will need to clarify","body":"not how I read it, but that&#39;s something the OP will need to clarify"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1636375541,"post_id":69881721,"comment_id":123531681,"body_markdown":"&quot;will be execute it&quot; doesn&#39;t imply to be executed immediately.","body":"&quot;will be execute it&quot; doesn&#39;t imply to be executed immediately."},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1636375598,"post_id":69881721,"comment_id":123531699,"body_markdown":"I agree with you that if the server is not running it is impossible to act at this given time.","body":"I agree with you that if the server is not running it is impossible to act at this given time."},{"owner":{"account_id":1959368,"reputation":1,"user_id":1761462,"display_name":"Mohsen Vahedi"},"score":0,"creation_date":1636380910,"post_id":69881721,"comment_id":123534077,"body_markdown":"@Vala.D. I updated the question","body":"@Vala.D. I updated the question"}],"owner":{"account_id":1959368,"reputation":1,"user_id":1761462,"display_name":"Mohsen Vahedi"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":317,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1636380631,"creation_date":1636365974,"question_id":69881721,"body_markdown":"I have a situation that specific quartz job must execute only once at specific time of day.\r\nI want to know if there is a workaround to make sure this job will be executed even if server for any reason does not up and running at that point of time.\r\nIf i switch from ramjobstore to database does this guaranty the mentioned problem?\r\n\r\nEDIT:\r\nTo make things clear i use the @Vala. D comment:\r\n\r\n&gt; if the server was down at this time to run it immediately after server-start\r\n\r\nThis behavior will cover my requirements","title":"How to make sure one time running quartz job will be executed even if server is not up at that time?","body":"<p>I have a situation that specific quartz job must execute only once at specific time of day.\nI want to know if there is a workaround to make sure this job will be executed even if server for any reason does not up and running at that point of time.\nIf i switch from ramjobstore to database does this guaranty the mentioned problem?</p>\n<p>EDIT:\nTo make things clear i use the @Vala. D comment:</p>\n<blockquote>\n<p>if the server was down at this time to run it immediately after server-start</p>\n</blockquote>\n<p>This behavior will cover my requirements</p>\n"},{"tags":["java","arrays","string","file-io"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636379822,"post_id":69884599,"comment_id":123533599,"body_markdown":"have you debugged your code to see exactly what goes wrong?","body":"have you debugged your code to see exactly what goes wrong?"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":5,"creation_date":1636380044,"post_id":69884599,"comment_id":123533694,"body_markdown":"The `.` is a special char in regex. You need to escape it like `paragraph.split(&quot;\\\\.&quot;);`","body":"The <code>.</code> is a special char in regex. You need to escape it like <code>paragraph.split(&quot;\\\\.&quot;);</code>"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1636380323,"post_id":69884599,"comment_id":123533803,"body_markdown":"To expand on this: `split(...)` removes any matches and `&quot;.&quot;` matches each character so they&#39;re removed one by one. Since you only want to split on the actual `&#39;.&#39;` char you need to espace it in the regex as per Eritrean&#39;s suggestion.","body":"To expand on this: <code>split(...)</code> removes any matches and <code>&quot;.&quot;</code> matches each character so they&#39;re removed one by one. Since you only want to split on the actual <code>&#39;.&#39;</code> char you need to espace it in the regex as per Eritrean&#39;s suggestion."}],"answers":[{"tags":[],"owner":{"account_id":19942283,"reputation":381,"user_id":14613787,"display_name":"Deepanshu Rathi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1636380311,"creation_date":1636380311,"answer_id":69884759,"question_id":69884599,"body_markdown":"Replace `paragraph.split(&quot;.&quot;)` by `paragraph.split(&quot;\\\\.&quot;)`","title":"Java .split method returning empty array","body":"<p>Replace <code>paragraph.split(&quot;.&quot;)</code> by <code>paragraph.split(&quot;\\\\.&quot;)</code></p>\n"}],"owner":{"account_id":18118805,"reputation":53,"user_id":13175136,"display_name":"LeonDevy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69884759,"answer_count":1,"score":0,"last_activity_date":1636380311,"creation_date":1636379648,"question_id":69884599,"body_markdown":"I am trying to count all the words in each sentence in an array of multiple sentences automatically from a file in eclipse.\r\n\r\nWhen I&#39;m splitting the paragraph into sentences the java .split method is returning an empty array\r\n\r\nHere is the code that is causing me trouble\r\n```\r\nimport java.io.File;\r\nimport java.util.Arrays;\r\nimport java.util.Scanner;\r\n\r\npublic class SentenceWordCounter {\r\n    private static String paragraph;\r\n    private static Sentence[] sentences;\r\n\r\n    \r\n    public SentenceWordCounter() {\r\n        processFile(&quot;./src/Text&quot;);\r\n        \r\n    }\r\n    \r\n    public void sentenceByWordCount() {\r\n        for (int i = 0; i &lt; sentences.length; i++) {\r\n            int sentenceLen = sentences[i].getWordCount();\r\n            System.out.println(&quot;Sentence &quot; + (i+1) + &quot;: &quot; + sentenceLen);\r\n        }\r\n    }\r\n    \r\n    private static void processFile(String filename) {        \r\n        Scanner scan = null;\r\n        try {\r\n            scan = new Scanner( new File( filename ) );\r\n            paragraph = scan.nextLine();\r\n            String[] sentStrs = paragraph.split(&quot;.&quot;);\r\n            System.out.println(paragraph);\r\n            System.out.println(Arrays.toString(sentStrs));\r\n            sentences = new Sentence[sentStrs.length];\r\n            \r\n            for (int i = 0; i &lt; sentStrs.length; i++) {\r\n                sentences[i] = new Sentence(sentStrs[i]);\r\n            }\r\n        }\r\n        catch ( Exception e ) {\r\n            e.printStackTrace();\r\n        }\r\n        finally {\r\n            if ( scan != null ) {\r\n                scan.close();\r\n            }\r\n        }\r\n    }\r\n    \r\n    public static void main (String args[]) {\r\n        SentenceWordCounter strWordCount = new SentenceWordCounter();\r\n        System.out.println(paragraph);\r\n        System.out.println(Arrays.toString(sentences));\r\n        strWordCount.sentenceByWordCount();\r\n    }\r\n}\r\n\r\n```\r\nhere is my sentence class\r\n```\r\nimport java.io.File;\r\nimport java.util.Scanner;\r\n\r\npublic class Sentence {\r\n    \r\n    private String[] words;\r\n    private int wordCount;\r\n    \r\n    public Sentence(String str) {\r\n        str = str.trim();\r\n        \r\n        words = str.split(&quot; &quot;);\r\n        \r\n        wordCount = words.length;\r\n    }\r\n    \r\n    public int getWordCount() {\r\n        return wordCount;\r\n    }\r\n}\r\n\r\n```\r\nAnd finally, here is my text file (it is only one line of text)\r\n```\r\nBattles between good and evil and the allure of heroes have been a staple of storytelling for eons. The story of Beowulf, an epic tale, is about a man of immense strength and mental fortitude. He defeats great beasts such as the monster Grendel, Grendel’s mother, and even a dragon to save as many people as he can and to reap the rewards for his valor. Although he tragically dies in the end of the story, he dies as a hero. Beowulf’s story takes multiple forms. The epic was only an orally transmittable tale for the longest time, so it has been recorded in various mediums such as graphics or epic poems to preserve the story. Although the graphic novel and the poem have similar content, the effects the mediums have on the reader are vastly different.\r\n```\r\nHere is the output\r\n```\r\nBattles between good and evil and the allure of heroes have been a staple of storytelling for eons. The story of Beowulf, an epic tale, is about a man of immense strength and mental fortitude. He defeats great beasts such as the monster Grendel, Grendel’s mother, and even a dragon to save as many people as he can and to reap the rewards for his valor. Although he tragically dies in the end of the story, he dies as a hero. Beowulf’s story takes multiple forms. The epic was only an orally transmittable tale for the longest time, so it has been recorded in various mediums such as graphics or epic poems to preserve the story. Although the graphic novel and the poem have similar content, the effects the mediums have on the reader are vastly different.\r\n[]\r\nBattles between good and evil and the allure of heroes have been a staple of storytelling for eons. The story of Beowulf, an epic tale, is about a man of immense strength and mental fortitude. He defeats great beasts such as the monster Grendel, Grendel’s mother, and even a dragon to save as many people as he can and to reap the rewards for his valor. Although he tragically dies in the end of the story, he dies as a hero. Beowulf’s story takes multiple forms. The epic was only an orally transmittable tale for the longest time, so it has been recorded in various mediums such as graphics or epic poems to preserve the story. Although the graphic novel and the poem have similar content, the effects the mediums have on the reader are vastly different.\r\n[LSentence;@42a57993\r\n```","title":"Java .split method returning empty array","body":"<p>I am trying to count all the words in each sentence in an array of multiple sentences automatically from a file in eclipse.</p>\n<p>When I'm splitting the paragraph into sentences the java .split method is returning an empty array</p>\n<p>Here is the code that is causing me trouble</p>\n<pre><code>import java.io.File;\nimport java.util.Arrays;\nimport java.util.Scanner;\n\npublic class SentenceWordCounter {\n    private static String paragraph;\n    private static Sentence[] sentences;\n\n    \n    public SentenceWordCounter() {\n        processFile(&quot;./src/Text&quot;);\n        \n    }\n    \n    public void sentenceByWordCount() {\n        for (int i = 0; i &lt; sentences.length; i++) {\n            int sentenceLen = sentences[i].getWordCount();\n            System.out.println(&quot;Sentence &quot; + (i+1) + &quot;: &quot; + sentenceLen);\n        }\n    }\n    \n    private static void processFile(String filename) {        \n        Scanner scan = null;\n        try {\n            scan = new Scanner( new File( filename ) );\n            paragraph = scan.nextLine();\n            String[] sentStrs = paragraph.split(&quot;.&quot;);\n            System.out.println(paragraph);\n            System.out.println(Arrays.toString(sentStrs));\n            sentences = new Sentence[sentStrs.length];\n            \n            for (int i = 0; i &lt; sentStrs.length; i++) {\n                sentences[i] = new Sentence(sentStrs[i]);\n            }\n        }\n        catch ( Exception e ) {\n            e.printStackTrace();\n        }\n        finally {\n            if ( scan != null ) {\n                scan.close();\n            }\n        }\n    }\n    \n    public static void main (String args[]) {\n        SentenceWordCounter strWordCount = new SentenceWordCounter();\n        System.out.println(paragraph);\n        System.out.println(Arrays.toString(sentences));\n        strWordCount.sentenceByWordCount();\n    }\n}\n\n</code></pre>\n<p>here is my sentence class</p>\n<pre><code>import java.io.File;\nimport java.util.Scanner;\n\npublic class Sentence {\n    \n    private String[] words;\n    private int wordCount;\n    \n    public Sentence(String str) {\n        str = str.trim();\n        \n        words = str.split(&quot; &quot;);\n        \n        wordCount = words.length;\n    }\n    \n    public int getWordCount() {\n        return wordCount;\n    }\n}\n\n</code></pre>\n<p>And finally, here is my text file (it is only one line of text)</p>\n<pre><code>Battles between good and evil and the allure of heroes have been a staple of storytelling for eons. The story of Beowulf, an epic tale, is about a man of immense strength and mental fortitude. He defeats great beasts such as the monster Grendel, Grendel’s mother, and even a dragon to save as many people as he can and to reap the rewards for his valor. Although he tragically dies in the end of the story, he dies as a hero. Beowulf’s story takes multiple forms. The epic was only an orally transmittable tale for the longest time, so it has been recorded in various mediums such as graphics or epic poems to preserve the story. Although the graphic novel and the poem have similar content, the effects the mediums have on the reader are vastly different.\n</code></pre>\n<p>Here is the output</p>\n<pre><code>Battles between good and evil and the allure of heroes have been a staple of storytelling for eons. The story of Beowulf, an epic tale, is about a man of immense strength and mental fortitude. He defeats great beasts such as the monster Grendel, Grendel’s mother, and even a dragon to save as many people as he can and to reap the rewards for his valor. Although he tragically dies in the end of the story, he dies as a hero. Beowulf’s story takes multiple forms. The epic was only an orally transmittable tale for the longest time, so it has been recorded in various mediums such as graphics or epic poems to preserve the story. Although the graphic novel and the poem have similar content, the effects the mediums have on the reader are vastly different.\n[]\nBattles between good and evil and the allure of heroes have been a staple of storytelling for eons. The story of Beowulf, an epic tale, is about a man of immense strength and mental fortitude. He defeats great beasts such as the monster Grendel, Grendel’s mother, and even a dragon to save as many people as he can and to reap the rewards for his valor. Although he tragically dies in the end of the story, he dies as a hero. Beowulf’s story takes multiple forms. The epic was only an orally transmittable tale for the longest time, so it has been recorded in various mediums such as graphics or epic poems to preserve the story. Although the graphic novel and the poem have similar content, the effects the mediums have on the reader are vastly different.\n[LSentence;@42a57993\n</code></pre>\n"},{"tags":["java","base64","byte","encode","binary-data"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1636379495,"post_id":69884518,"comment_id":123533441,"body_markdown":"No. Each Base64 digit represents exactly 6 bits of data. Three bytes (24 bits) are represented by four 6-bit Base64 digits. The result is 33% larger, but 100% isomorphic to the input.","body":"No. Each Base64 digit represents exactly 6 bits of data. Three bytes (24 bits) are represented by four 6-bit Base64 digits. The result is 33% larger, but 100% isomorphic to the input."},{"owner":{"account_id":23019255,"reputation":320,"user_id":17140506,"display_name":"Digsb"},"score":0,"creation_date":1636379600,"post_id":69884518,"comment_id":123533485,"body_markdown":"Should you choose right CharacterSet when you convert byte[] to String?","body":"Should you choose right CharacterSet when you convert byte[] to String?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1636384135,"post_id":69884518,"comment_id":123535456,"body_markdown":"As Joachim points out in a comment below, using Base64.getEncoder().[encodeToString](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Base64.Encoder.html#encodeToString(byte%5B%5D))(data) would both solve the problem and remove your dependency on an external library.","body":"As Joachim points out in a comment below, using Base64.getEncoder().<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Base64.Encoder.html#encodeToString(byte%5B%5D)\" rel=\"nofollow noreferrer\">encodeToString</a>(data) would both solve the problem and remove your dependency on an external library."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1636379855,"creation_date":1636379664,"answer_id":69884607,"question_id":69884518,"body_markdown":"Assuming nothing explodes due to out-of-memory errors or similar general problems, this code should be fine, with one big exception:\r\n\r\nYou are transforming the output of `Base64.encodeBase64` (which is a `byte[]`) to a `String` without specifying the encoding.\r\n\r\nThis is generally speaking a bad idea, because it will use the platform default encoding.\r\n\r\nIn this specific case, it&#39;s unlikely to be an actual problem. Because the output of Base64 contains only ASCII characters and  almost all modern platforms use a ASCII-compatible encoding as their platform default encoding (for example Android, Mac OS X and most Linux distributions use UTF-8, Windows tends to use some code-page, but the lower 128 bytes are usually also ASCII compatible).\r\n\r\nStill, it would be better to use `new String(Base64.encodeBase64(data), StandardCharsets.US_ASCII)` just to be sure (for the reasons mentioned above, `ISO_8859_1` and `UTF_8` would work as well, but `US_ASCII` is the &quot;correct&quot; pick).","title":"Java Base64 encoding loss of data","body":"<p>Assuming nothing explodes due to out-of-memory errors or similar general problems, this code should be fine, with one big exception:</p>\n<p>You are transforming the output of <code>Base64.encodeBase64</code> (which is a <code>byte[]</code>) to a <code>String</code> without specifying the encoding.</p>\n<p>This is generally speaking a bad idea, because it will use the platform default encoding.</p>\n<p>In this specific case, it's unlikely to be an actual problem. Because the output of Base64 contains only ASCII characters and  almost all modern platforms use a ASCII-compatible encoding as their platform default encoding (for example Android, Mac OS X and most Linux distributions use UTF-8, Windows tends to use some code-page, but the lower 128 bytes are usually also ASCII compatible).</p>\n<p>Still, it would be better to use <code>new String(Base64.encodeBase64(data), StandardCharsets.US_ASCII)</code> just to be sure (for the reasons mentioned above, <code>ISO_8859_1</code> and <code>UTF_8</code> would work as well, but <code>US_ASCII</code> is the &quot;correct&quot; pick).</p>\n"}],"owner":{"account_id":14770337,"reputation":385,"user_id":10667002,"display_name":"Omri. B"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":879,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69884607,"answer_count":1,"score":-1,"last_activity_date":1636379855,"creation_date":1636379276,"question_id":69884518,"body_markdown":"say I have the following snippet, where `certificate` is a java Certificate object:\r\n```\r\nbyte[] data = certificate.getEncoded();\r\n\r\nString stringData = new String(Base64.encodeBase64(data));\r\n\r\nbyte[] newData = Base64.decodeBase64(stringData)\r\n```\r\n\r\nIs there any chance `data` will not be equal to `newData`? basically, is there loss of information to string and then back?\r\nThanks","title":"Java Base64 encoding loss of data","body":"<p>say I have the following snippet, where <code>certificate</code> is a java Certificate object:</p>\n<pre><code>byte[] data = certificate.getEncoded();\n\nString stringData = new String(Base64.encodeBase64(data));\n\nbyte[] newData = Base64.decodeBase64(stringData)\n</code></pre>\n<p>Is there any chance <code>data</code> will not be equal to <code>newData</code>? basically, is there loss of information to string and then back?\nThanks</p>\n"},{"tags":["java","ant","jar"],"comments":[{"owner":{"account_id":93866,"reputation":76253,"user_id":256618,"display_name":"Mark O&#39;Connor"},"score":2,"creation_date":1488760106,"post_id":42612884,"comment_id":72360553,"body_markdown":"See: http://stackoverflow.com/questions/3143567/cannot-find-main-class-in-file-compiled-with-ant/3144290#3144290","body":"See: <a href=\"http://stackoverflow.com/questions/3143567/cannot-find-main-class-in-file-compiled-with-ant/3144290#3144290\" title=\"cannot find main class in file compiled with ant\">stackoverflow.com/questions/3143567/&hellip;</a>"},{"owner":{"account_id":6230126,"reputation":413,"user_id":4847170,"accept_rate":17,"display_name":"EasternDude"},"score":0,"creation_date":1488817041,"post_id":42612884,"comment_id":72388767,"body_markdown":"After reading what Mark suggested, I redefined Class-Path to ant libs for my jar-file using &lt;manifestclasspath&gt; property as suggested in that thread. That fixed the problem. However, did not bring any clarity on WHY it fixed the problem. I was not getting ` java.lang.NoClassDefFoundError` (as the person in Marks suggested thread). My Main-Class was &#39;not found&#39; and Main method did not even run before. I can&#39;t understand how linking ant libraries in different way could have fixed the problem.","body":"After reading what Mark suggested, I redefined Class-Path to ant libs for my jar-file using &lt;manifestclasspath&gt; property as suggested in that thread. That fixed the problem. However, did not bring any clarity on WHY it fixed the problem. I was not getting ` java.lang.NoClassDefFoundError` (as the person in Marks suggested thread). My Main-Class was &#39;not found&#39; and Main method did not even run before. I can&#39;t understand how linking ant libraries in different way could have fixed the problem."}],"answers":[{"tags":[],"owner":{"account_id":1281523,"reputation":1546,"user_id":1235535,"accept_rate":71,"display_name":"Atul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488771129,"creation_date":1488771129,"answer_id":42617101,"question_id":42612884,"body_markdown":"The problem with \r\n\r\n    &lt;attribute name = &quot;Class-Path&quot; value = &quot;D:/DevTools/apache-ant-1.9.8/lib/;&quot;/&gt;\r\nis you are hard-coding path which is not a good practice. This jar will not execute on other machines as there are chances that they won&#39;t have lib under same location.\r\n\r\nYou can directly create executable jar from eclipse project itself. For steps refer [this][1].\r\n\r\nYou can also put required lib in same jar file and they will by default get added to class-path.\r\n\r\n\r\n  [1]: http://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-37.htm","title":"Failing to build working .jar file using ANT","body":"<p>The problem with </p>\n\n<pre><code>&lt;attribute name = \"Class-Path\" value = \"D:/DevTools/apache-ant-1.9.8/lib/;\"/&gt;\n</code></pre>\n\n<p>is you are hard-coding path which is not a good practice. This jar will not execute on other machines as there are chances that they won't have lib under same location.</p>\n\n<p>You can directly create executable jar from eclipse project itself. For steps refer <a href=\"http://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-37.htm\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>You can also put required lib in same jar file and they will by default get added to class-path.</p>\n"}],"owner":{"account_id":6230126,"reputation":413,"user_id":4847170,"accept_rate":17,"display_name":"EasternDude"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1599,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1636379759,"creation_date":1488741874,"question_id":42612884,"body_markdown":"I&#39;ve made a simple &#39;AntExecutor&#39; app in eclipse that can run ant tasks programmatically and it works. But for university purposes I need to keep it independant from IDE. So, funnily, I&#39;m strugling to create ant tasks which would compile,build my &#39;AntExecutor&#39; app (which executes ant-tasks) :)\r\n\r\nStripped-down version I&#39;m currently trying to define ant-tasks for only contains one source file in &#39;storageAccess&#39; package:\r\n\r\n    ./src/storageAccess/AntExecutor.java\r\nI&#39;ve got some libraries that AntExecutor.java makes use of at:\r\n\r\n    ./lib\r\n\r\nAnd the build file is at:\r\n\r\n    ./build.xml\r\n\r\nAntExecutor.java also needs ant libraries to execute ant tasks so they&#39;re added to CP at compile at. in build file: \r\n\r\n    &lt;classpath path=&quot;${build};D:/DevTools/apache-ant-1.9.8/lib/;&quot;/&gt;\r\n\r\nFull build.xml file:\r\n\r\n    &lt;project name=&quot;AntExecutor&quot; default=&quot;dist&quot; basedir=&quot;.&quot;&gt;\r\n        &lt;description&gt;\r\n            simple example build file\r\n        &lt;/description&gt;\r\n      &lt;!-- set global properties for this build --&gt;\r\n      &lt;property name=&quot;src&quot; location=&quot;src&quot;/&gt;\r\n      &lt;property name=&quot;build&quot; location=&quot;build/classes/&quot;/&gt;\r\n      &lt;property name=&quot;dist&quot;  location=&quot;build/jar/&quot;/&gt;\r\n    \r\n      &lt;target name=&quot;init&quot;&gt;\r\n        &lt;!-- Create the time stamp --&gt;\r\n        &lt;tstamp/&gt;\r\n        &lt;!-- Create the build directory structure used by compile --&gt;\r\n        &lt;mkdir dir=&quot;${build}&quot;/&gt;\r\n      &lt;/target&gt;\r\n    \r\n      &lt;target name=&quot;compile&quot; depends=&quot;init&quot;\r\n            description=&quot;compile the source &quot; &gt;\r\n        &lt;!-- Compile the java code from ${src} into ${build} --&gt;\r\n        &lt;javac  destdir=&quot;${build}&quot;&gt;\r\n          &lt;src path=&quot;${src}&quot;/&gt;\r\n          &lt;classpath path=&quot;${build};D:/DevTools/apache-ant-1.9.8/lib/;&quot;/&gt;\r\n    \r\n        &lt;/javac&gt;\r\n      &lt;/target&gt;\r\n    \r\n      &lt;target name=&quot;dist&quot; depends=&quot;compile&quot;\r\n            description=&quot;generate the distribution&quot; &gt;\r\n        &lt;!-- Create the distribution directory --&gt;\r\n        &lt;mkdir dir=&quot;${dist}&quot;/&gt;\r\n    \r\n        &lt;!-- Put everything in ${build} into RunExecutor.jar file --&gt;\r\n      &lt;jar destfile = &quot;${dist}/RunExecutor.jar&quot; basedir=&quot;${build}&quot;&gt;\r\n       \r\n       &lt;manifest&gt;\r\n          &lt;attribute name = &quot;Main-Class&quot; value = &quot;storageAccess.AntExecutor&quot;/&gt;\r\n          &lt;attribute name = &quot;Class-Path&quot; value = &quot;D:/DevTools/apache-ant-1.9.8/lib/;&quot;/&gt;\r\n       &lt;/manifest&gt;\r\n      &lt;/jar&gt;\r\n    \r\n      &lt;copy todir=&quot;${dist}\\lib&quot;&gt;\r\n       &lt;fileset dir=&quot;lib&quot;/&gt;\r\n      &lt;/copy&gt;\r\n    \r\n    \r\n      &lt;/target&gt;\r\n    \r\n      &lt;target name=&quot;clean&quot;\r\n            description=&quot;clean up&quot; &gt;\r\n        &lt;!-- Delete the ${build} and ${dist} directory trees --&gt;\r\n        &lt;delete dir=&quot;${build}&quot;/&gt;\r\n        &lt;delete dir=&quot;${dist}&quot;/&gt;\r\n      &lt;/target&gt;\r\n    &lt;/project&gt;\r\n\r\nnow if i run &#39;ant dist&#39; command I get no errors, build succeeds and RunExecutor.jar file is created at `./build/jar`\r\n\r\nTo check contents of RunExecutor.jar, I ran: `jar tf build/jar/RunExecutor.jar`\r\n\r\nresult:\r\n\r\n    META-INF/\r\n    META-INF/MANIFEST.MF\r\n    storageAccess/\r\n    storageAccess/AntExecutor.class\r\n\r\nso it seems like storageAcces.AntExecutor class was indeed successfully compiled to .jar file.\r\n\r\nHowever, if i try running it like this: `java -jar build/jar/RunExecutor.jar`\r\n\r\nI get this error:\r\n\r\n`Error: Could not find or load main class storageAccess.AntExecutor`\r\n\r\n**Main-question:**\r\n\r\nHow come it can&#39;t find the class that is clearly in it.(as &#39;jar tf&#39; shows) how do I fix this?\r\n\r\n\r\n**Also**, what is the corret way to add ant/lib/*.jar files to CP for compiling and running &#39;RunExecutor.jar&#39; ?\r\nis it okay just  to specify the path to them as I do now? : \r\n\r\n    &lt;attribute name = &quot;Class-Path&quot; value = &quot;D:/DevTools/apache-ant-1.9.8/lib/;&quot;/&gt;\r\nor, maybe I should use wildcard like:\r\n\r\n    &lt;attribute name = &quot;Class-Path&quot; value = &quot;D:/DevTools/apache-ant-1.9.8/lib/*.jar;&quot;/&gt;\r\nor, should I frustratingly add all the files one by one?\r\n\r\n    &lt;attribute name = &quot;Class-Path&quot; value = &quot;D:/DevTools/apache-ant-1.9.8/lib/ant.jar;&quot;/&gt; , etc...","title":"Failing to build working .jar file using ANT","body":"<p>I've made a simple 'AntExecutor' app in eclipse that can run ant tasks programmatically and it works. But for university purposes I need to keep it independant from IDE. So, funnily, I'm strugling to create ant tasks which would compile,build my 'AntExecutor' app (which executes ant-tasks) :)</p>\n\n<p>Stripped-down version I'm currently trying to define ant-tasks for only contains one source file in 'storageAccess' package:</p>\n\n<pre><code>./src/storageAccess/AntExecutor.java\n</code></pre>\n\n<p>I've got some libraries that AntExecutor.java makes use of at:</p>\n\n<pre><code>./lib\n</code></pre>\n\n<p>And the build file is at:</p>\n\n<pre><code>./build.xml\n</code></pre>\n\n<p>AntExecutor.java also needs ant libraries to execute ant tasks so they're added to CP at compile at. in build file: </p>\n\n<pre><code>&lt;classpath path=\"${build};D:/DevTools/apache-ant-1.9.8/lib/;\"/&gt;\n</code></pre>\n\n<p>Full build.xml file:</p>\n\n<pre><code>&lt;project name=\"AntExecutor\" default=\"dist\" basedir=\".\"&gt;\n    &lt;description&gt;\n        simple example build file\n    &lt;/description&gt;\n  &lt;!-- set global properties for this build --&gt;\n  &lt;property name=\"src\" location=\"src\"/&gt;\n  &lt;property name=\"build\" location=\"build/classes/\"/&gt;\n  &lt;property name=\"dist\"  location=\"build/jar/\"/&gt;\n\n  &lt;target name=\"init\"&gt;\n    &lt;!-- Create the time stamp --&gt;\n    &lt;tstamp/&gt;\n    &lt;!-- Create the build directory structure used by compile --&gt;\n    &lt;mkdir dir=\"${build}\"/&gt;\n  &lt;/target&gt;\n\n  &lt;target name=\"compile\" depends=\"init\"\n        description=\"compile the source \" &gt;\n    &lt;!-- Compile the java code from ${src} into ${build} --&gt;\n    &lt;javac  destdir=\"${build}\"&gt;\n      &lt;src path=\"${src}\"/&gt;\n      &lt;classpath path=\"${build};D:/DevTools/apache-ant-1.9.8/lib/;\"/&gt;\n\n    &lt;/javac&gt;\n  &lt;/target&gt;\n\n  &lt;target name=\"dist\" depends=\"compile\"\n        description=\"generate the distribution\" &gt;\n    &lt;!-- Create the distribution directory --&gt;\n    &lt;mkdir dir=\"${dist}\"/&gt;\n\n    &lt;!-- Put everything in ${build} into RunExecutor.jar file --&gt;\n  &lt;jar destfile = \"${dist}/RunExecutor.jar\" basedir=\"${build}\"&gt;\n\n   &lt;manifest&gt;\n      &lt;attribute name = \"Main-Class\" value = \"storageAccess.AntExecutor\"/&gt;\n      &lt;attribute name = \"Class-Path\" value = \"D:/DevTools/apache-ant-1.9.8/lib/;\"/&gt;\n   &lt;/manifest&gt;\n  &lt;/jar&gt;\n\n  &lt;copy todir=\"${dist}\\lib\"&gt;\n   &lt;fileset dir=\"lib\"/&gt;\n  &lt;/copy&gt;\n\n\n  &lt;/target&gt;\n\n  &lt;target name=\"clean\"\n        description=\"clean up\" &gt;\n    &lt;!-- Delete the ${build} and ${dist} directory trees --&gt;\n    &lt;delete dir=\"${build}\"/&gt;\n    &lt;delete dir=\"${dist}\"/&gt;\n  &lt;/target&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>now if i run 'ant dist' command I get no errors, build succeeds and RunExecutor.jar file is created at <code>./build/jar</code></p>\n\n<p>To check contents of RunExecutor.jar, I ran: <code>jar tf build/jar/RunExecutor.jar</code></p>\n\n<p>result:</p>\n\n<pre><code>META-INF/\nMETA-INF/MANIFEST.MF\nstorageAccess/\nstorageAccess/AntExecutor.class\n</code></pre>\n\n<p>so it seems like storageAcces.AntExecutor class was indeed successfully compiled to .jar file.</p>\n\n<p>However, if i try running it like this: <code>java -jar build/jar/RunExecutor.jar</code></p>\n\n<p>I get this error:</p>\n\n<p><code>Error: Could not find or load main class storageAccess.AntExecutor</code></p>\n\n<p><strong>Main-question:</strong></p>\n\n<p>How come it can't find the class that is clearly in it.(as 'jar tf' shows) how do I fix this?</p>\n\n<p><strong>Also</strong>, what is the corret way to add ant/lib/*.jar files to CP for compiling and running 'RunExecutor.jar' ?\nis it okay just  to specify the path to them as I do now? : </p>\n\n<pre><code>&lt;attribute name = \"Class-Path\" value = \"D:/DevTools/apache-ant-1.9.8/lib/;\"/&gt;\n</code></pre>\n\n<p>or, maybe I should use wildcard like:</p>\n\n<pre><code>&lt;attribute name = \"Class-Path\" value = \"D:/DevTools/apache-ant-1.9.8/lib/*.jar;\"/&gt;\n</code></pre>\n\n<p>or, should I frustratingly add all the files one by one?</p>\n\n<pre><code>&lt;attribute name = \"Class-Path\" value = \"D:/DevTools/apache-ant-1.9.8/lib/ant.jar;\"/&gt; , etc...\n</code></pre>\n"},{"tags":["java","classloader"],"comments":[{"owner":{"account_id":15585153,"reputation":1806,"user_id":11243901,"display_name":"Arun Sai Mustyala"},"score":0,"creation_date":1636378837,"post_id":69884339,"comment_id":123533179,"body_markdown":"Is it Spring application?","body":"Is it Spring application?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636378896,"post_id":69884339,"comment_id":123533203,"body_markdown":"what have you tried so far? Are you just asking for an opinion on what is best?","body":"what have you tried so far? Are you just asking for an opinion on what is best?"}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636379013,"creation_date":1636379013,"answer_id":69884478,"question_id":69884339,"body_markdown":"Try something like:\r\n\r\n    String[][] names = Pattern.compile(&quot;, &quot;, -1)\r\n                              .splitAsStream(properties.getProperty(&quot;names&quot;))\r\n                              .map(s -&gt; s.split(&quot; &quot;))\r\n                              .toArray(String[][]::new);","title":"Java config file multidimensional array","body":"<p>Try something like:</p>\n<pre><code>String[][] names = Pattern.compile(&quot;, &quot;, -1)\n                          .splitAsStream(properties.getProperty(&quot;names&quot;))\n                          .map(s -&gt; s.split(&quot; &quot;))\n                          .toArray(String[][]::new);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636379021,"creation_date":1636379021,"answer_id":69884480,"question_id":69884339,"body_markdown":"- Given a list of names, first stream the names list.\r\n- then split the names on one or more spaces.\r\n- and put the resulting array in a &quot;two-D&quot; array\r\n```\r\nList&lt;String&gt; names = Arrays.asList(properties.getProperty(&quot;names&quot;).split(&quot;, &quot;, -1));\r\nString[][] result = names.stream().map(str-&gt;str.split(&quot;\\\\s+&quot;)).toArray(String[][]::new);\r\n```\r\nYou can make this a single statement by streaming the original list as it is read from the properties file.  I omitted that to simplify the explanation.\r\n","title":"Java config file multidimensional array","body":"<ul>\n<li>Given a list of names, first stream the names list.</li>\n<li>then split the names on one or more spaces.</li>\n<li>and put the resulting array in a &quot;two-D&quot; array</li>\n</ul>\n<pre><code>List&lt;String&gt; names = Arrays.asList(properties.getProperty(&quot;names&quot;).split(&quot;, &quot;, -1));\nString[][] result = names.stream().map(str-&gt;str.split(&quot;\\\\s+&quot;)).toArray(String[][]::new);\n</code></pre>\n<p>You can make this a single statement by streaming the original list as it is read from the properties file.  I omitted that to simplify the explanation.</p>\n"},{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1636379673,"creation_date":1636379064,"answer_id":69884486,"question_id":69884339,"body_markdown":"Depends on what the input could look like. The safest way would probably be to use a proper parser (and maybe a different file format). \r\n\r\nIf the list is always in the form `[[Name], [Name]]` and `Name` never contains brackets, a simple way could be to use a more specialized regex, e.g. `(?&lt;=\\]),\\s*(?=\\[)`.\r\n\r\nRundown on the regex:\r\n\r\n- `(?&lt;=\\])`: a positive look-behind, i.e. any match must follow a `]`.\r\n- `,\\s*`: the actual match to split at (and remove), i.e. a comma followed by any whitespace\r\n- `(?=\\[)&quot;)`: a positive look-ahead, i.e. any match must be followed by a `[`.\r\n\r\nFinally, split each of the names by `,` to get the 2D array:\r\n\r\n    //results in Strings like &quot;[Joey, Greek]&quot;, &quot;[Lisa, Blessing]&quot;, and &quot;[Arnold, Verdict]&quot;\r\n    String[] completeNames = properties.getProperty(&quot;names&quot;).split(&quot;(?&lt;=\\\\]),\\\\s*(?=\\\\[)&quot;);\r\n \r\n    //We&#39;re using a stream here but you could as well use traditional loops   \r\n\tString[][] namesInParts = Arrays.stream(completeNames)\r\n               //map the name by removing the brackets and splitting at the comma (followed by any whitespace)\r\n               .map(name -&gt; name.replaceAll(&quot;[\\\\]\\\\[]&quot;, &quot;&quot;).split(&quot;,\\\\s*&quot;))\r\n               //collect everything into a new array\r\n               .toArray(String[][]::new);\r\n    ","title":"Java config file multidimensional array","body":"<p>Depends on what the input could look like. The safest way would probably be to use a proper parser (and maybe a different file format).</p>\n<p>If the list is always in the form <code>[[Name], [Name]]</code> and <code>Name</code> never contains brackets, a simple way could be to use a more specialized regex, e.g. <code>(?&lt;=\\]),\\s*(?=\\[)</code>.</p>\n<p>Rundown on the regex:</p>\n<ul>\n<li><code>(?&lt;=\\])</code>: a positive look-behind, i.e. any match must follow a <code>]</code>.</li>\n<li><code>,\\s*</code>: the actual match to split at (and remove), i.e. a comma followed by any whitespace</li>\n<li><code>(?=\\[)&quot;)</code>: a positive look-ahead, i.e. any match must be followed by a <code>[</code>.</li>\n</ul>\n<p>Finally, split each of the names by <code>,</code> to get the 2D array:</p>\n<pre><code>//results in Strings like &quot;[Joey, Greek]&quot;, &quot;[Lisa, Blessing]&quot;, and &quot;[Arnold, Verdict]&quot;\nString[] completeNames = properties.getProperty(&quot;names&quot;).split(&quot;(?&lt;=\\\\]),\\\\s*(?=\\\\[)&quot;);\n\n//We're using a stream here but you could as well use traditional loops   \nString[][] namesInParts = Arrays.stream(completeNames)\n           //map the name by removing the brackets and splitting at the comma (followed by any whitespace)\n           .map(name -&gt; name.replaceAll(&quot;[\\\\]\\\\[]&quot;, &quot;&quot;).split(&quot;,\\\\s*&quot;))\n           //collect everything into a new array\n           .toArray(String[][]::new);\n</code></pre>\n"}],"owner":{"account_id":12655916,"reputation":852,"user_id":10673107,"display_name":"A. Vreeswijk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69884486,"answer_count":3,"score":-1,"last_activity_date":1636379673,"creation_date":1636378403,"question_id":69884339,"body_markdown":"I have a problem. For my code I have a config file with the following content:\r\n\r\n    updateOnInsert=true\r\n    removeLast=false\r\n    \r\n    names=Joey Greek, Lisa Blessing, Arnold Verdict\r\n\r\nTo read this config file, I have the following code:\r\n\r\n    ClassLoader classloader = Thread.currentThread().getContextClassLoader();\r\n    InputStream is = classloader.getResourceAsStream(&quot;configs/main.config&quot;);\r\n                    \r\n    // Read all properties from agent strategy file\r\n    Properties properties = new Properties();\r\n    properties.load(is);\r\n    \r\n    // Assign all properties to variables\r\n    boolean updateOnInsert = Boolean.parseBoolean(properties.getProperty(&quot;updateOnInsert&quot;));\r\n    boolean removeLast = Boolean.parseBoolean(properties.getProperty(&quot;removeLast&quot;));\r\n    \r\n    List&lt;String&gt; names = Arrays.asList(properties.getProperty(&quot;names&quot;).split(&quot;, &quot;, -1));\r\n\r\nBut now I need to change the format of the names to:\r\n\r\n    names=[[Joey, Greek], [Lisa, Blessing], [Arnold, Verdict]]\r\n\r\nThe output varialbe has to be of the type: `String[][]` with as result:\r\n\r\n    [0] =&gt; [Joey, Greek]\r\n    [1] =&gt; [Lisa, Blessing]\r\n    [2] =&gt; [Arnold, Verdict]\r\n\r\nWhat is the best way to achieve this?","title":"Java config file multidimensional array","body":"<p>I have a problem. For my code I have a config file with the following content:</p>\n<pre><code>updateOnInsert=true\nremoveLast=false\n\nnames=Joey Greek, Lisa Blessing, Arnold Verdict\n</code></pre>\n<p>To read this config file, I have the following code:</p>\n<pre><code>ClassLoader classloader = Thread.currentThread().getContextClassLoader();\nInputStream is = classloader.getResourceAsStream(&quot;configs/main.config&quot;);\n                \n// Read all properties from agent strategy file\nProperties properties = new Properties();\nproperties.load(is);\n\n// Assign all properties to variables\nboolean updateOnInsert = Boolean.parseBoolean(properties.getProperty(&quot;updateOnInsert&quot;));\nboolean removeLast = Boolean.parseBoolean(properties.getProperty(&quot;removeLast&quot;));\n\nList&lt;String&gt; names = Arrays.asList(properties.getProperty(&quot;names&quot;).split(&quot;, &quot;, -1));\n</code></pre>\n<p>But now I need to change the format of the names to:</p>\n<pre><code>names=[[Joey, Greek], [Lisa, Blessing], [Arnold, Verdict]]\n</code></pre>\n<p>The output varialbe has to be of the type: <code>String[][]</code> with as result:</p>\n<pre><code>[0] =&gt; [Joey, Greek]\n[1] =&gt; [Lisa, Blessing]\n[2] =&gt; [Arnold, Verdict]\n</code></pre>\n<p>What is the best way to achieve this?</p>\n"},{"tags":["java","hibernate","jpa","metamodel"],"owner":{"account_id":14033457,"reputation":23,"user_id":11622055,"display_name":"devsaleh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":622,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1636379665,"creation_date":1636379665,"question_id":69884608,"body_markdown":"I have the following entities\r\n```\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\n@Embeddable\r\npublic class EmbeddableEntity\r\n{\r\n    @Cascade(CascadeType.SAVE_UPDATE)\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;fk_entity_A&quot;)\r\n    private EntityA entityA;\r\n}\r\n```\r\n```\r\n@Entity\r\n@Table(name = &quot;tb_entity_a&quot;)\r\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\r\n@DiscriminatorColumn(name = &quot;type&quot;, length = 50)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic abstract class EntityA\r\n{\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @JsonIgnore\r\n    protected Long id;\r\n\r\n    @JsonIgnore\r\n    @OneToOne(mappedBy = &quot;embeddableEntity.entityA&quot;, orphanRemoval = true)\r\n    protected EntityB entityB;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;boolean_field&quot;, columnDefinition = &quot;TINYINT DEFAULT 0&quot;, nullable = false)\r\n    private Boolean booleanField = false;\r\n}\r\n```\r\n```\r\n@Entity\r\n@Table(name = &quot;tb_entity_b&quot;)\r\n@DiscriminatorColumn(name = &quot;type&quot;, length = 50)\r\n@DiscriminatorValue(&quot;entityb&quot;)\r\npublic class EntityB\r\n{\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Embedded\r\n    private EmbeddableEntity embeddableEntity;\r\n}\r\n```\r\nI want JPAMetaModelEntityProcessor to generate a MetaModel class like this:\r\n```\r\npackage br.com.loopec.loopkey.server.corp.persistence.entity;\r\n\r\nimport javax.annotation.Generated;\r\nimport javax.persistence.metamodel.SingularAttribute;\r\nimport javax.persistence.metamodel.StaticMetamodel;\r\n\r\n@Generated(value = &quot;org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor&quot;)\r\n@StaticMetamodel(EmbeddableEntity.class)\r\npublic abstract class EmbeddableEntity_ {\r\n\r\n\tpublic static volatile SingularAttribute&lt;EmbeddableEntity, EntityB&gt; entityB;\r\n\tpublic static volatile SingularAttribute&lt;EmbeddableEntity, Boolean&gt; booleanField;\r\n\r\n\tpublic static final String ENTITY_B = &quot;entityB&quot;;\r\n\tpublic static final String BOOLEAN_FIELD = &quot;booleanField&quot;;\r\n}\r\n```\r\n\r\nBut all it generates for me is a class like this, omitting the entityB field I want generated:\r\n```\r\npackage br.com.loopec.loopkey.server.corp.persistence.entity;\r\n\r\nimport javax.annotation.Generated;\r\nimport javax.persistence.metamodel.SingularAttribute;\r\nimport javax.persistence.metamodel.StaticMetamodel;\r\n\r\n@Generated(value = &quot;org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor&quot;)\r\n@StaticMetamodel(EmbeddableEntity.class)\r\npublic abstract class EmbeddableEntity_ {\r\n\r\n\tpublic static volatile SingularAttribute&lt;EmbeddableEntity, Boolean&gt; booleanField;\r\n\r\n\tpublic static final String BOOLEAN_FIELD = &quot;booleanField&quot;;\r\n}\r\n```\r\n\r\nI don&#39;t know it&#39;s useful information, but I&#39;ve been facing this problem building the project from Docker.\r\nMy version of hibernate is: 5.4.15.Final\r\nCan you see if I did something wrong with my code? I don&#39;t know if it&#39;s a hibernate bug, but I found a thread on stack overflow with another developer having a similar problem. https://stackoverflow.com/questions/46710730/jpa-hibernate-5-onetoone-in-nested-embeddable-causes-metamodel-issue\r\n","title":"JPA Hibernate: MetaModel is not generating correctly in embeddable class","body":"<p>I have the following entities</p>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\n@Embeddable\npublic class EmbeddableEntity\n{\n    @Cascade(CascadeType.SAVE_UPDATE)\n    @OneToOne\n    @JoinColumn(name = &quot;fk_entity_A&quot;)\n    private EntityA entityA;\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;tb_entity_a&quot;)\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\n@DiscriminatorColumn(name = &quot;type&quot;, length = 50)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic abstract class EntityA\n{\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @JsonIgnore\n    protected Long id;\n\n    @JsonIgnore\n    @OneToOne(mappedBy = &quot;embeddableEntity.entityA&quot;, orphanRemoval = true)\n    protected EntityB entityB;\n\n    @NotNull\n    @Column(name = &quot;boolean_field&quot;, columnDefinition = &quot;TINYINT DEFAULT 0&quot;, nullable = false)\n    private Boolean booleanField = false;\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;tb_entity_b&quot;)\n@DiscriminatorColumn(name = &quot;type&quot;, length = 50)\n@DiscriminatorValue(&quot;entityb&quot;)\npublic class EntityB\n{\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Embedded\n    private EmbeddableEntity embeddableEntity;\n}\n</code></pre>\n<p>I want JPAMetaModelEntityProcessor to generate a MetaModel class like this:</p>\n<pre><code>package br.com.loopec.loopkey.server.corp.persistence.entity;\n\nimport javax.annotation.Generated;\nimport javax.persistence.metamodel.SingularAttribute;\nimport javax.persistence.metamodel.StaticMetamodel;\n\n@Generated(value = &quot;org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor&quot;)\n@StaticMetamodel(EmbeddableEntity.class)\npublic abstract class EmbeddableEntity_ {\n\n    public static volatile SingularAttribute&lt;EmbeddableEntity, EntityB&gt; entityB;\n    public static volatile SingularAttribute&lt;EmbeddableEntity, Boolean&gt; booleanField;\n\n    public static final String ENTITY_B = &quot;entityB&quot;;\n    public static final String BOOLEAN_FIELD = &quot;booleanField&quot;;\n}\n</code></pre>\n<p>But all it generates for me is a class like this, omitting the entityB field I want generated:</p>\n<pre><code>package br.com.loopec.loopkey.server.corp.persistence.entity;\n\nimport javax.annotation.Generated;\nimport javax.persistence.metamodel.SingularAttribute;\nimport javax.persistence.metamodel.StaticMetamodel;\n\n@Generated(value = &quot;org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor&quot;)\n@StaticMetamodel(EmbeddableEntity.class)\npublic abstract class EmbeddableEntity_ {\n\n    public static volatile SingularAttribute&lt;EmbeddableEntity, Boolean&gt; booleanField;\n\n    public static final String BOOLEAN_FIELD = &quot;booleanField&quot;;\n}\n</code></pre>\n<p>I don't know it's useful information, but I've been facing this problem building the project from Docker.\nMy version of hibernate is: 5.4.15.Final\nCan you see if I did something wrong with my code? I don't know if it's a hibernate bug, but I found a thread on stack overflow with another developer having a similar problem. <a href=\"https://stackoverflow.com/questions/46710730/jpa-hibernate-5-onetoone-in-nested-embeddable-causes-metamodel-issue\">JPA Hibernate 5: OneToOne in nested Embeddable causes metamodel issue</a></p>\n"},{"tags":["java","arrays","integer","membership"],"comments":[{"owner":{"account_id":7139308,"reputation":2282,"user_id":5457643,"display_name":"Turamarth"},"score":1,"creation_date":1636121148,"post_id":69854488,"comment_id":123479197,"body_markdown":"Does this answer your question? [How do I determine whether an array contains a particular value in Java?](https://stackoverflow.com/questions/1128723/how-do-i-determine-whether-an-array-contains-a-particular-value-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1128723/how-do-i-determine-whether-an-array-contains-a-particular-value-in-java\">How do I determine whether an array contains a particular value in Java?</a>"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1636121164,"post_id":69854488,"comment_id":123479205,"body_markdown":"why can&#39;t you post your code? code is just flat text, just like the flat text you already posted.","body":"why can&#39;t you post your code? code is just flat text, just like the flat text you already posted."},{"owner":{"account_id":22993754,"reputation":1,"user_id":17118857,"display_name":"Ngawang Tobden"},"score":0,"creation_date":1636121218,"post_id":69854488,"comment_id":123479238,"body_markdown":"no it didnot answer my question as even if the value was in array it shows false","body":"no it didnot answer my question as even if the value was in array it shows false"},{"owner":{"account_id":22993754,"reputation":1,"user_id":17118857,"display_name":"Ngawang Tobden"},"score":0,"creation_date":1636121280,"post_id":69854488,"comment_id":123479270,"body_markdown":"i could not post my code as it showed some red dot error even when syntax was correct","body":"i could not post my code as it showed some red dot error even when syntax was correct"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636121280,"post_id":69854488,"comment_id":123479271,"body_markdown":"Ngawang, if it does, your value is not in the array.","body":"Ngawang, if it does, your value is not in the array."},{"owner":{"account_id":22993754,"reputation":1,"user_id":17118857,"display_name":"Ngawang Tobden"},"score":0,"creation_date":1636121388,"post_id":69854488,"comment_id":123479324,"body_markdown":"i printed the array and then did membership test. the number was in array but it still showed error. are there other method to see if int array contains a particular value?","body":"i printed the array and then did membership test. the number was in array but it still showed error. are there other method to see if int array contains a particular value?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636121529,"post_id":69854488,"comment_id":123479394,"body_markdown":"@Ngawang show the code you&#39;ve done. the only reason why that solution shouldn&#39;t work, is because you use a datatype that didn&#39;t implement equals","body":"@Ngawang show the code you&#39;ve done. the only reason why that solution shouldn&#39;t work, is because you use a datatype that didn&#39;t implement equals"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636122302,"post_id":69854488,"comment_id":123479726,"body_markdown":"try with Integer instead of int.","body":"try with Integer instead of int."},{"owner":{"account_id":22993754,"reputation":1,"user_id":17118857,"display_name":"Ngawang Tobden"},"score":0,"creation_date":1636122545,"post_id":69854488,"comment_id":123479855,"body_markdown":"try it in which side of the code? sorry i am just a starter in java.","body":"try it in which side of the code? sorry i am just a starter in java."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636352445,"post_id":69854488,"comment_id":123523811,"body_markdown":"instead of int arry, have an Integer[] arry, and arry[i] = new Integer(i); and contains(new Integer(1));","body":"instead of int arry, have an Integer[] arry, and arry[i] = new Integer(i); and contains(new Integer(1));"}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636125628,"creation_date":1636125628,"answer_id":69855533,"question_id":69854488,"body_markdown":"The problem with this code is that `Arrays.asList` will create `List&lt;int[]&gt;` NOT the implied `List&lt;Integer&gt;`, therefore method `.contains(1)` is always `false`.\r\n\r\nSimple method should be implemented to check the membership:\r\n```\r\nstatic boolean isInArray(int n, int ... arr) {\r\n    for (int x : arr) {\r\n        if (x == n) return true;\r\n    }\r\n    return false;\r\n}\r\n```\r\nUsing Stream API:\r\n```\r\nstatic boolean isInArray(int n, int ... arr) {\r\n    return Arrays.stream(arr).anyMatch(x -&gt; x == n);\r\n}\r\n```\r\n----\r\nOr the input array should be declared as `Integer[] arry`, then `Arrays.asList` provides appropriate `List&lt;Integer&gt;`, and method `contains(1)` is applicable to such list.","title":"membership test to find if a number is present in array","body":"<p>The problem with this code is that <code>Arrays.asList</code> will create <code>List&lt;int[]&gt;</code> NOT the implied <code>List&lt;Integer&gt;</code>, therefore method <code>.contains(1)</code> is always <code>false</code>.</p>\n<p>Simple method should be implemented to check the membership:</p>\n<pre><code>static boolean isInArray(int n, int ... arr) {\n    for (int x : arr) {\n        if (x == n) return true;\n    }\n    return false;\n}\n</code></pre>\n<p>Using Stream API:</p>\n<pre><code>static boolean isInArray(int n, int ... arr) {\n    return Arrays.stream(arr).anyMatch(x -&gt; x == n);\n}\n</code></pre>\n<hr />\n<p>Or the input array should be declared as <code>Integer[] arry</code>, then <code>Arrays.asList</code> provides appropriate <code>List&lt;Integer&gt;</code>, and method <code>contains(1)</code> is applicable to such list.</p>\n"},{"tags":[],"owner":{"account_id":1258577,"reputation":649,"user_id":1217498,"accept_rate":88,"display_name":"Odj fourth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636379349,"creation_date":1636379349,"answer_id":69884532,"question_id":69854488,"body_markdown":"Try streams. I don&#39;t think aslist().contains() supports primitives like int. This works though:\r\n\r\n    import java.util.stream.IntStream;\r\n\r\n    class Main {  \r\n    public static void main(String args[]) { \r\n\t    int[] a = {1,2,3,4,5,7,8,9};\r\n\t    int find_1 = 4;\r\n    \tint find_2 = 6;\r\n\t    boolean find_num1 = IntStream.of(a).anyMatch(x -&gt; x == find_1);\r\n\t    boolean find_num2 = IntStream.of(a).anyMatch(x -&gt; x == find_2);\r\n\t    System.out.println(&quot;First num in array? &quot; + find_num1);\r\n\t    System.out.println(&quot;Second num in array? &quot; + find_num2);\r\n        } \r\n    }","title":"membership test to find if a number is present in array","body":"<p>Try streams. I don't think aslist().contains() supports primitives like int. This works though:</p>\n<pre><code>import java.util.stream.IntStream;\n\nclass Main {  \npublic static void main(String args[]) { \n    int[] a = {1,2,3,4,5,7,8,9};\n    int find_1 = 4;\n    int find_2 = 6;\n    boolean find_num1 = IntStream.of(a).anyMatch(x -&gt; x == find_1);\n    boolean find_num2 = IntStream.of(a).anyMatch(x -&gt; x == find_2);\n    System.out.println(&quot;First num in array? &quot; + find_num1);\n    System.out.println(&quot;Second num in array? &quot; + find_num2);\n    } \n}\n</code></pre>\n"}],"owner":{"account_id":22993754,"reputation":1,"user_id":17118857,"display_name":"Ngawang Tobden"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":212,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1636910230,"answer_count":2,"score":-1,"last_activity_date":1636379349,"creation_date":1636121029,"question_id":69854488,"body_markdown":"given an array of int is there a way to do membership test to see if a particular number is present in the int array. the question was to do find missing number between 1-10 given by user.\r\neg [1,2,3,4,5]\r\nif 1 is in array it should give true. I cant seem to post my code here.\r\n\r\n    import java.util.Scanner; \r\n    import java.util.Arrays; \r\n    \r\n    public class Q1 { \r\n      public static void main(String[] args) { \r\n        Scanner scan = new Scanner(System.in); \r\n        System.out.println(&quot;Enter numbers of element: &quot;); \r\n        int size = scan.nextInt(); \r\n        int arry[]=new int[size]; \r\n        for(int i =0;i&lt;size;i++){ \r\n          System.out.println(&quot;Enter any number betweent 1-10:&quot;); \r\n          int element = scan.nextInt(); \r\n          arry[i] = element; \r\n        } \r\n        System.out.println(Arrays.toString(arry)); \r\n        System.out.println(Arrays.asList(arry).contains(1)); \r\n      } \r\n    } ","title":"membership test to find if a number is present in array","body":"<p>given an array of int is there a way to do membership test to see if a particular number is present in the int array. the question was to do find missing number between 1-10 given by user.\neg [1,2,3,4,5]\nif 1 is in array it should give true. I cant seem to post my code here.</p>\n<pre><code>import java.util.Scanner; \nimport java.util.Arrays; \n\npublic class Q1 { \n  public static void main(String[] args) { \n    Scanner scan = new Scanner(System.in); \n    System.out.println(&quot;Enter numbers of element: &quot;); \n    int size = scan.nextInt(); \n    int arry[]=new int[size]; \n    for(int i =0;i&lt;size;i++){ \n      System.out.println(&quot;Enter any number betweent 1-10:&quot;); \n      int element = scan.nextInt(); \n      arry[i] = element; \n    } \n    System.out.println(Arrays.toString(arry)); \n    System.out.println(Arrays.asList(arry).contains(1)); \n  } \n} \n</code></pre>\n"},{"tags":["java","java-8","java-stream","spliterator"],"comments":[{"owner":{"account_id":11914266,"reputation":1155,"user_id":8718583,"accept_rate":75,"display_name":"Tet"},"score":0,"creation_date":1507727414,"post_id":46688829,"comment_id":80325750,"body_markdown":"Stream interface extends the AutoCloseable interface, so I guest the `onClose` actions will be called sometime when the garbage collector disposes the stream. However it&#39;s best practice to close it as soon as possible.","body":"Stream interface extends the AutoCloseable interface, so I guest the <code>onClose</code> actions will be called sometime when the garbage collector disposes the stream. However it&#39;s best practice to close it as soon as possible."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1507728234,"post_id":46688829,"comment_id":80326417,"body_markdown":"no, there is no garbage collector driven closing of the stream—and the results would be disastrous, if stream had such a finalizer. The underlying resource itself *may* have an automatic cleanup, but that depends on the resource. But that does not imply the execution of any close handler registered to the stream.","body":"no, there is no garbage collector driven closing of the stream—and the results would be disastrous, if stream had such a finalizer. The underlying resource itself <i>may</i> have an automatic cleanup, but that depends on the resource. But that does not imply the execution of any close handler registered to the stream."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":2,"creation_date":1507729692,"post_id":46688829,"comment_id":80327557,"body_markdown":"Just to add to details, here is a good insight over streams and [TWR by Stuart](https://stackoverflow.com/a/22929990/1746118)","body":"Just to add to details, here is a good insight over streams and <a href=\"https://stackoverflow.com/a/22929990/1746118\">TWR by Stuart</a>"},{"owner":{"account_id":11914266,"reputation":1155,"user_id":8718583,"accept_rate":75,"display_name":"Tet"},"score":3,"creation_date":1507730792,"post_id":46688829,"comment_id":80328429,"body_markdown":"Thanks @nullpointer, the argument of who is responsible to handle the exception in case of `exception` during the `close()` method make sense.","body":"Thanks @nullpointer, the argument of who is responsible to handle the exception in case of <code>exception</code> during the <code>close()</code> method make sense."},{"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":0,"creation_date":1558996520,"post_id":46688829,"comment_id":99272640,"body_markdown":"Possible duplicate of [Why doesn&#39;t Java close() stream after a terminal operation is issued?](https://stackoverflow.com/questions/28813637/why-doesnt-java-close-stream-after-a-terminal-operation-is-issued)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/28813637/why-doesnt-java-close-stream-after-a-terminal-operation-is-issued\">Why doesn&#39;t Java close() stream after a terminal operation is issued?</a>"}],"answers":[{"tags":[],"owner":{"account_id":1063012,"reputation":71986,"user_id":1064245,"accept_rate":82,"display_name":"M A"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1507728882,"creation_date":1507727636,"answer_id":46689178,"question_id":46688829,"body_markdown":"Nothing changed concerning the closing of `Stream`s in Java 9. You still need to manually do it if the underlying resource should be freed. You should never rely on the garbage collector to do it. The [docs](http://download.java.net/java/jdk9/docs/api/java/util/stream/Stream.html) still say:\r\n\r\n&gt;Streams have a `BaseStream.close()` method and implement `AutoCloseable`. Operating on a stream after it has been closed will throw `IllegalStateException`. Most stream instances do not actually need to be closed after use, as they are backed by collections, arrays, or generating functions, which require no special resource management. **Generally, only streams whose source is an IO channel, such as those returned by `Files.lines(Path)`, will require closing. If a stream does require closing, it must be opened as a resource within a try-with-resources statement or similar control structure to ensure that it is closed promptly after its operations have completed.**","title":"Does the stream.spliterator() close the stream?","body":"<p>Nothing changed concerning the closing of <code>Stream</code>s in Java 9. You still need to manually do it if the underlying resource should be freed. You should never rely on the garbage collector to do it. The <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">docs</a> still say:</p>\n\n<blockquote>\n  <p>Streams have a <code>BaseStream.close()</code> method and implement <code>AutoCloseable</code>. Operating on a stream after it has been closed will throw <code>IllegalStateException</code>. Most stream instances do not actually need to be closed after use, as they are backed by collections, arrays, or generating functions, which require no special resource management. <strong>Generally, only streams whose source is an IO channel, such as those returned by <code>Files.lines(Path)</code>, will require closing. If a stream does require closing, it must be opened as a resource within a try-with-resources statement or similar control structure to ensure that it is closed promptly after its operations have completed.</strong></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1636379292,"creation_date":1507727742,"answer_id":46689222,"question_id":46688829,"body_markdown":"Terminal operations *never* close the stream. Closing has to be done manually. The only place where automatic closing happens is within the `flatMap` operation, where manual closing of the substreams usually created on-the-fly would be somewhere between hard and impossible.\r\n\r\nThis also applies to the `Stream.spliterator()` method. In your examples, it makes no difference because the streams created via `Stream.of(…)` do not need to be closed and have no `onClose()` operation registered by default.\r\n\r\nYou have to consult the documentation of the factory methods to find out when a stream need to be closed. E.g. like [`Files#lines(Path, Charset)`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-java.nio.charset.Charset-).\r\n\r\nSee also [Does collect operation on Stream close the stream and underlying resources?](https://stackoverflow.com/q/31171489/2711488) or [Does Java 8 `Stream.iterator()` auto-close the stream when it&#39;s done?](https://stackoverflow.com/q/40935029/2711488)","title":"Does the stream.spliterator() close the stream?","body":"<p>Terminal operations <em>never</em> close the stream. Closing has to be done manually. The only place where automatic closing happens is within the <code>flatMap</code> operation, where manual closing of the substreams usually created on-the-fly would be somewhere between hard and impossible.</p>\n<p>This also applies to the <code>Stream.spliterator()</code> method. In your examples, it makes no difference because the streams created via <code>Stream.of(…)</code> do not need to be closed and have no <code>onClose()</code> operation registered by default.</p>\n<p>You have to consult the documentation of the factory methods to find out when a stream need to be closed. E.g. like <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-java.nio.charset.Charset-\" rel=\"nofollow noreferrer\"><code>Files#lines(Path, Charset)</code></a>.</p>\n<p>See also <a href=\"https://stackoverflow.com/q/31171489/2711488\">Does collect operation on Stream close the stream and underlying resources?</a> or <a href=\"https://stackoverflow.com/q/40935029/2711488\">Does Java 8 <code>Stream.iterator()</code> auto-close the stream when it's done?</a></p>\n"},{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1507729231,"creation_date":1507727775,"answer_id":46689231,"question_id":46688829,"body_markdown":"The call to [`spliterator()`](https://docs.oracle.com/javase/9/docs/api/java/util/stream/BaseStream.html#spliterator--) method returns a **[`Spliterator`](https://docs.oracle.com/javase/9/docs/api/java/util/Spliterator.html)** for the elements of this stream and *its a terminal operation.*\r\n\r\nTo answer your question - No, the `spliterator` method or for that sake none of the other *terminal operations* also does not *close* the stream.\r\n\r\nThis stands documented for [terminal operations](https://docs.oracle.com/javase/9/docs/api/java/util/stream/package-summary.html#StreamOps) as -\r\n\r\n&gt; After the terminal operation is performed, the stream pipeline is\r\n&gt; considered consumed, and can no longer be used.... In almost all cases, terminal operations\r\n&gt; are ***eager***, completing their traversal of the data source and\r\n&gt; processing of the pipeline before returning. Only the terminal\r\n&gt; operations `iterator()` and `spliterator(`) *are not*; these are provided as\r\n&gt; an &quot;escape hatch&quot; to enable arbitrary client-controlled pipeline\r\n&gt; traversals in the event that the existing operations are not\r\n&gt; sufficient to the task.\r\n\r\nOver closing the [`Stream`](http://download.java.net/java/jdk9/docs/api/java/util/stream/Stream.html) on another hand the docs state that:-\r\n\r\n&gt; Most stream instances do not actually need to be closed after use, as\r\n&gt; they are backed by collections, arrays, or generating functions, which\r\n&gt; require no special resource management. Generally, only streams whose\r\n&gt; source is an IO channel, such as those returned by [`Files.lines(Path)`](http://download.java.net/java/jdk9/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-),\r\n&gt; will require closing.\r\n\r\n\r\n----------\r\n\r\n\r\nThe [`AutoCloseable`](http://download.java.net/java/jdk9/docs/api/java/lang/AutoCloseable.html) states to match to it- \r\n\r\n&gt; It is possible, and in fact common, for a base class to implement\r\n&gt; AutoCloseable even though *not all of its subclasses or instances* will\r\n&gt; hold releasable resources.\r\n\r\nwhich is how the BaseStream extends it and the [`close()`](http://download.java.net/java/jdk9/docs/api/java/util/stream/BaseStream.html#close--) doesn&#39;t impact far more than the streams over the ones using the resources such as `Files.lines(...)`.\r\n\r\n&gt; However, when using facilities such as Stream that support both\r\n&gt; I/O-based and non-I/O-based forms, try-with-resources blocks are in\r\n&gt; general unnecessary when using non-I/O-based forms.","title":"Does the stream.spliterator() close the stream?","body":"<p>The call to <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/BaseStream.html#spliterator--\" rel=\"nofollow noreferrer\"><code>spliterator()</code></a> method returns a <strong><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Spliterator.html\" rel=\"nofollow noreferrer\"><code>Spliterator</code></a></strong> for the elements of this stream and <em>its a terminal operation.</em></p>\n\n<p>To answer your question - No, the <code>spliterator</code> method or for that sake none of the other <em>terminal operations</em> also does not <em>close</em> the stream.</p>\n\n<p>This stands documented for <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/package-summary.html#StreamOps\" rel=\"nofollow noreferrer\">terminal operations</a> as -</p>\n\n<blockquote>\n  <p>After the terminal operation is performed, the stream pipeline is\n  considered consumed, and can no longer be used.... In almost all cases, terminal operations\n  are <strong><em>eager</em></strong>, completing their traversal of the data source and\n  processing of the pipeline before returning. Only the terminal\n  operations <code>iterator()</code> and <code>spliterator(</code>) <em>are not</em>; these are provided as\n  an \"escape hatch\" to enable arbitrary client-controlled pipeline\n  traversals in the event that the existing operations are not\n  sufficient to the task.</p>\n</blockquote>\n\n<p>Over closing the <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\"><code>Stream</code></a> on another hand the docs state that:-</p>\n\n<blockquote>\n  <p>Most stream instances do not actually need to be closed after use, as\n  they are backed by collections, arrays, or generating functions, which\n  require no special resource management. Generally, only streams whose\n  source is an IO channel, such as those returned by <a href=\"http://download.java.net/java/jdk9/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-\" rel=\"nofollow noreferrer\"><code>Files.lines(Path)</code></a>,\n  will require closing.</p>\n</blockquote>\n\n<hr>\n\n<p>The <a href=\"http://download.java.net/java/jdk9/docs/api/java/lang/AutoCloseable.html\" rel=\"nofollow noreferrer\"><code>AutoCloseable</code></a> states to match to it- </p>\n\n<blockquote>\n  <p>It is possible, and in fact common, for a base class to implement\n  AutoCloseable even though <em>not all of its subclasses or instances</em> will\n  hold releasable resources.</p>\n</blockquote>\n\n<p>which is how the BaseStream extends it and the <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/stream/BaseStream.html#close--\" rel=\"nofollow noreferrer\"><code>close()</code></a> doesn't impact far more than the streams over the ones using the resources such as <code>Files.lines(...)</code>.</p>\n\n<blockquote>\n  <p>However, when using facilities such as Stream that support both\n  I/O-based and non-I/O-based forms, try-with-resources blocks are in\n  general unnecessary when using non-I/O-based forms.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4396854,"reputation":1866,"user_id":3583589,"display_name":"benez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547063238,"creation_date":1547063238,"answer_id":54117279,"question_id":46688829,"body_markdown":"The method `stream.spliterator()` does not close the `Stream`, like no other terminal operation. You may or may not know, if you need to close the `Stream`, that&#39;s still a big debate. I personally would like to have all terminal operations except `spliterator()` and `iterator()` to implicitly close the `Stream` for various reasons. There is no harm in doing so, since most implementations would simply do *nothing*.\r\n\r\nYou can find one implementation in the `java.util.stream.AbstractPipeline`. The close action that has been added when calling `stream.onClose(action)` will be called in the moment `stream.close()` is called.\r\n\r\nI cannot tell you when a `Stream` explicitly needs to be closed, since the current policy is to document it at the method that returns the `Stream`, like `Files.list(Path)`:\r\n\r\n&gt; The returned stream contains a reference to an open directory. The directory is closed by closing the stream.\r\n&gt; ...\r\n\r\n&gt; This method must be used within a try-with-resources statement or\r\n&gt; similar control structure to ensure that the stream&#39;s open directory\r\n&gt; is closed promptly after the stream&#39;s operations have completed.\r\n\r\nWhen you call `stream.spliterator()`, the returned `Spliterator` may be lazy (see also `AbstractPipeline.lazySpliterator(..)`), thus still needs to operate on the elements of the original `Stream`. If you close the `Stream` before traversing the elements of the `Spliterator`, you might get an exception or the `Spliterator` simply does not operate anymore.\r\n\r\n    public static void main(final String[] args) throws IOException {\r\n        try (final Stream&lt;Path&gt; stream = Files.list(Paths.get(&quot;&quot;))) {\r\n            stream.onClose(() -&gt; System.out.println(&quot;stream closed&quot;));\r\n            final Spliterator&lt;Path&gt; split = stream.spliterator();\r\n    \r\n            /*\r\n             * uncomment this to see what happens when you close the\r\n             * stream before you traverse the spliterator\r\n             */\r\n            // stream.close();\r\n    \r\n            split.forEachRemaining(System.out::println);\r\n        }\r\n    }\r\n\r\nThe problem is now, if you want to have a method that returns a `Spliterator`, the caller has no `close()` method that can be called on the `Spliterator`.","title":"Does the stream.spliterator() close the stream?","body":"<p>The method <code>stream.spliterator()</code> does not close the <code>Stream</code>, like no other terminal operation. You may or may not know, if you need to close the <code>Stream</code>, that's still a big debate. I personally would like to have all terminal operations except <code>spliterator()</code> and <code>iterator()</code> to implicitly close the <code>Stream</code> for various reasons. There is no harm in doing so, since most implementations would simply do <em>nothing</em>.</p>\n\n<p>You can find one implementation in the <code>java.util.stream.AbstractPipeline</code>. The close action that has been added when calling <code>stream.onClose(action)</code> will be called in the moment <code>stream.close()</code> is called.</p>\n\n<p>I cannot tell you when a <code>Stream</code> explicitly needs to be closed, since the current policy is to document it at the method that returns the <code>Stream</code>, like <code>Files.list(Path)</code>:</p>\n\n<blockquote>\n  <p>The returned stream contains a reference to an open directory. The directory is closed by closing the stream.\n  ...</p>\n  \n  <p>This method must be used within a try-with-resources statement or\n  similar control structure to ensure that the stream's open directory\n  is closed promptly after the stream's operations have completed.</p>\n</blockquote>\n\n<p>When you call <code>stream.spliterator()</code>, the returned <code>Spliterator</code> may be lazy (see also <code>AbstractPipeline.lazySpliterator(..)</code>), thus still needs to operate on the elements of the original <code>Stream</code>. If you close the <code>Stream</code> before traversing the elements of the <code>Spliterator</code>, you might get an exception or the <code>Spliterator</code> simply does not operate anymore.</p>\n\n<pre><code>public static void main(final String[] args) throws IOException {\n    try (final Stream&lt;Path&gt; stream = Files.list(Paths.get(\"\"))) {\n        stream.onClose(() -&gt; System.out.println(\"stream closed\"));\n        final Spliterator&lt;Path&gt; split = stream.spliterator();\n\n        /*\n         * uncomment this to see what happens when you close the\n         * stream before you traverse the spliterator\n         */\n        // stream.close();\n\n        split.forEachRemaining(System.out::println);\n    }\n}\n</code></pre>\n\n<p>The problem is now, if you want to have a method that returns a <code>Spliterator</code>, the caller has no <code>close()</code> method that can be called on the <code>Spliterator</code>.</p>\n"}],"owner":{"account_id":11914266,"reputation":1155,"user_id":8718583,"accept_rate":75,"display_name":"Tet"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2011,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":46689222,"answer_count":4,"score":16,"last_activity_date":1636379292,"creation_date":1507726753,"question_id":46688829,"body_markdown":"Does the `stream.spliterator()` implicitly closes the `stream`, or there is a need to explicitly close it afterwards?\r\n\r\n    Stream&lt;String&gt; stream = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);\r\n    Spliterator&lt;T&gt; spliterator = stream.spliterator();\r\n    // Some low lever operation with the spliterator\r\n    stream.close(); // do we need to close?\r\n\r\nAt first glance, it seems that the `.spliterator()` method closes the `stream`, but without calling `stream.close()`. At least if I close it straight away after the `.spliterator()` method is invoked, it seems not affection the spliterator operations.\r\n\r\n    Stream&lt;String&gt; stream = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;).limit(2);\r\n    Spliterator&lt;T&gt; spliterator = stream.spliterator();\r\n    stream.close();\r\n    // Some low lever operation with the spliterator\r\n\r\nThis question can be extended to other `stream` methods, for example, the `.findAny()`.\r\n \r\n    stream.findAny() // Can I assume that I don&#39;t need to close the stream?\r\n    stream.onClose(() -&gt; System.out.println(&quot;hi!&quot;)).findAny()`\r\n    // when the `onClose()` action will be called?\r\n\r\nThe reason for that question is to have deep clarity when a `stream` needs explicitly to be closed, and in the cases where I don&#39;t need to explicitly close it, when the `onClose()` defined actions will take place?","title":"Does the stream.spliterator() close the stream?","body":"<p>Does the <code>stream.spliterator()</code> implicitly closes the <code>stream</code>, or there is a need to explicitly close it afterwards?</p>\n\n<pre><code>Stream&lt;String&gt; stream = Stream.of(\"a\", \"b\", \"c\");\nSpliterator&lt;T&gt; spliterator = stream.spliterator();\n// Some low lever operation with the spliterator\nstream.close(); // do we need to close?\n</code></pre>\n\n<p>At first glance, it seems that the <code>.spliterator()</code> method closes the <code>stream</code>, but without calling <code>stream.close()</code>. At least if I close it straight away after the <code>.spliterator()</code> method is invoked, it seems not affection the spliterator operations.</p>\n\n<pre><code>Stream&lt;String&gt; stream = Stream.of(\"a\", \"b\", \"c\").limit(2);\nSpliterator&lt;T&gt; spliterator = stream.spliterator();\nstream.close();\n// Some low lever operation with the spliterator\n</code></pre>\n\n<p>This question can be extended to other <code>stream</code> methods, for example, the <code>.findAny()</code>.</p>\n\n<pre><code>stream.findAny() // Can I assume that I don't need to close the stream?\nstream.onClose(() -&gt; System.out.println(\"hi!\")).findAny()`\n// when the `onClose()` action will be called?\n</code></pre>\n\n<p>The reason for that question is to have deep clarity when a <code>stream</code> needs explicitly to be closed, and in the cases where I don't need to explicitly close it, when the <code>onClose()</code> defined actions will take place?</p>\n"},{"tags":["java","cryptography","jce","oid"],"answers":[{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1496361040,"creation_date":1496361040,"answer_id":44318752,"question_id":44314475,"body_markdown":"There is an online database of OID&#39;s at [oid-info.com](http://www.oid-info.com/) that you can use.\r\n\r\nAs you can see the OID database is huge. Besides that, due to companies defining their own OID&#39;s under their base OID, many OID&#39;s are actually unknown.\r\n\r\nThe `AlgorithmTools` class has simply defined a list of OID&#39;s for signature algorithms, it doesn&#39;t attempt to dynamically find out which algorithms are available by using an OID as alias.\r\n\r\nNote that some OID&#39;s are used for multiple classes. For instance, you can have an RSA `Cipher`, `KeyFactory` and `KeyPairGenerator`.\r\n\r\nYou can however find out which OID&#39;s are available for the currently installed providers:\r\n\r\n    package nl.owlstead.stackoverflow;\r\n    \r\n    import java.security.Provider;\r\n    import java.security.Provider.Service;\r\n    import java.security.Security;\r\n    import java.util.Set;\r\n    import java.util.SortedSet;\r\n    import java.util.TreeSet;\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class GetOIDToAlgorithmNameMapping {\r\n        private static final Pattern KEY_TYPE_PATTERN = Pattern.compile(&quot;^(\\\\w+)[.].*$&quot;);\r\n        private static final Pattern KEY_ALIAS_TYPE_PATTERN = Pattern.compile(&quot;^Alg[.]Alias[.](\\\\w+).*$&quot;);\r\n        private static final Pattern KEY_OID_PATTERN = Pattern.compile(&quot;.*?(\\\\d+(?:[.]\\\\d+){3,})$&quot;);\r\n        \r\n        public static void main(String[] args) throws Exception {\r\n            Provider[] provs = Security.getProviders();\r\n            \r\n            for (Provider prov : provs) {\r\n                System.out.printf(&quot;%n &gt;&gt;&gt; Provider: %s &lt;&lt;&lt; %n%n&quot;, prov.getName());\r\n                \r\n                SortedSet&lt;String&gt; typeAndOID = getTypeAndOIDStrings(prov);\r\n                \r\n                for (String entry : typeAndOID) {\r\n                    String[] typeAndOIDArray = entry.split(&quot;-&quot;);\r\n                    String type = typeAndOIDArray[0];\r\n                    String oid = typeAndOIDArray[1];\r\n                    Service service = prov.getService(type, oid);\r\n                    String algo = service.getAlgorithm();\r\n                    System.out.printf(&quot;Type: %s, OID: %s, algo: %s%n&quot;, type, oid, algo);\r\n                }\r\n            }\r\n        }\r\n    \r\n        private static SortedSet&lt;String&gt; getTypeAndOIDStrings(Provider prov) {\r\n            SortedSet&lt;String&gt; typeAndOID = new TreeSet&lt;&gt;();\r\n    \r\n            Set&lt;Object&gt; keys = prov.keySet();\r\n            for (Object key : keys) {\r\n                String keyString = key.toString();\r\n                Matcher oidMatcher = KEY_OID_PATTERN.matcher(keyString);\r\n                if (oidMatcher.matches()) {\r\n                    // get OID from matched keyString\r\n                    String oid = oidMatcher.group(1);\r\n                    \r\n                    // determine type\r\n                    String type;\r\n                    Matcher aliasTypeMatcher = KEY_ALIAS_TYPE_PATTERN.matcher(keyString);\r\n                    if (aliasTypeMatcher.matches()) {\r\n                        type = aliasTypeMatcher.group(1);\r\n                    } else {\r\n                        Matcher typeMatcher = KEY_TYPE_PATTERN.matcher(keyString);\r\n                        typeMatcher.matches();\r\n                        type = typeMatcher.group(1);\r\n                    }\r\n                    \r\n                    // algorithm parameters are not algorithms, so skip them\r\n                    if (type.equals(&quot;AlgorithmParameters&quot;)) {\r\n                        continue;\r\n                    }\r\n                    \r\n                    // auto-removes dupes\r\n                    typeAndOID.add(type + &quot;-&quot; + oid);\r\n                }\r\n            }\r\n            return typeAndOID;\r\n        }\r\n    }\r\n\r\nExample output:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n     &gt;&gt;&gt; Provider: SUN &lt;&lt;&lt; \r\n    \r\n    Type: KeyFactory, OID: 1.2.840.10040.4.1, algo: DSA\r\n    Type: KeyFactory, OID: 1.3.14.3.2.12, algo: DSA\r\n    Type: KeyPairGenerator, OID: 1.2.840.10040.4.1, algo: DSA\r\n    Type: KeyPairGenerator, OID: 1.3.14.3.2.12, algo: DSA\r\n    Type: MessageDigest, OID: 1.3.14.3.2.26, algo: SHA\r\n    Type: MessageDigest, OID: 2.16.840.1.101.3.4.2.1, algo: SHA-256\r\n    Type: MessageDigest, OID: 2.16.840.1.101.3.4.2.2, algo: SHA-384\r\n    Type: MessageDigest, OID: 2.16.840.1.101.3.4.2.3, algo: SHA-512\r\n    Type: MessageDigest, OID: 2.16.840.1.101.3.4.2.4, algo: SHA-224\r\n    Type: Signature, OID: 1.2.840.10040.4.3, algo: SHA1withDSA\r\n    Type: Signature, OID: 1.3.14.3.2.13, algo: SHA1withDSA\r\n    Type: Signature, OID: 1.3.14.3.2.27, algo: SHA1withDSA\r\n    Type: Signature, OID: 2.16.840.1.101.3.4.3.1, algo: SHA224withDSA\r\n    Type: Signature, OID: 2.16.840.1.101.3.4.3.2, algo: SHA256withDSA\r\n    \r\n     &gt;&gt;&gt; Provider: SunRsaSign &lt;&lt;&lt; \r\n    \r\n    Type: KeyFactory, OID: 1.2.840.113549.1.1, algo: RSA\r\n    Type: KeyPairGenerator, OID: 1.2.840.113549.1.1, algo: RSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.11, algo: SHA256withRSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.12, algo: SHA384withRSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.13, algo: SHA512withRSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.14, algo: SHA224withRSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.2, algo: MD2withRSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.4, algo: MD5withRSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.5, algo: SHA1withRSA\r\n    Type: Signature, OID: 1.3.14.3.2.29, algo: SHA1withRSA\r\n    \r\n     &gt;&gt;&gt; Provider: SunEC &lt;&lt;&lt; \r\n    \r\n    Type: Signature, OID: 1.2.840.10045.4.1, algo: SHA1withECDSA\r\n    Type: Signature, OID: 1.2.840.10045.4.3.1, algo: SHA224withECDSA\r\n    Type: Signature, OID: 1.2.840.10045.4.3.2, algo: SHA256withECDSA\r\n    Type: Signature, OID: 1.2.840.10045.4.3.3, algo: SHA384withECDSA\r\n    Type: Signature, OID: 1.2.840.10045.4.3.4, algo: SHA512withECDSA\r\n    \r\n     &gt;&gt;&gt; Provider: SunJSSE &lt;&lt;&lt; \r\n    \r\n    Type: KeyFactory, OID: 1.2.840.113549.1.1, algo: RSA\r\n    Type: KeyPairGenerator, OID: 1.2.840.113549.1.1, algo: RSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.2, algo: MD2withRSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.4, algo: MD5withRSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.5, algo: SHA1withRSA\r\n    Type: Signature, OID: 1.3.14.3.2.29, algo: SHA1withRSA\r\n    \r\n     &gt;&gt;&gt; Provider: SunJCE &lt;&lt;&lt; \r\n    \r\n    Type: AlgorithmParameterGenerator, OID: 1.2.840.113549.1.3.1, algo: DiffieHellman\r\n    Type: Cipher, OID: 1.2.840.113549.1.12.1.1, algo: PBEWithSHA1AndRC4_128\r\n    Type: Cipher, OID: 1.2.840.113549.1.12.1.2, algo: PBEWithSHA1AndRC4_40\r\n    Type: Cipher, OID: 1.2.840.113549.1.12.1.3, algo: PBEWithSHA1AndDESede\r\n    Type: Cipher, OID: 1.2.840.113549.1.12.1.5, algo: PBEWithSHA1AndRC2_128\r\n    Type: Cipher, OID: 1.2.840.113549.1.12.1.6, algo: PBEWithSHA1AndRC2_40\r\n    Type: Cipher, OID: 1.2.840.113549.1.5.3, algo: PBEWithMD5AndDES\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.1, algo: AES_128/ECB/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.2, algo: AES_128/CBC/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.21, algo: AES_192/ECB/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.22, algo: AES_192/CBC/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.23, algo: AES_192/OFB/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.24, algo: AES_192/CFB/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.25, algo: AESWrap_192\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.26, algo: AES_192/GCM/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.3, algo: AES_128/OFB/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.4, algo: AES_128/CFB/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.41, algo: AES_256/ECB/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.42, algo: AES_256/CBC/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.43, algo: AES_256/OFB/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.44, algo: AES_256/CFB/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.45, algo: AESWrap_256\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.46, algo: AES_256/GCM/NoPadding\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.5, algo: AESWrap_128\r\n    Type: Cipher, OID: 2.16.840.1.101.3.4.1.6, algo: AES_128/GCM/NoPadding\r\n    Type: KeyAgreement, OID: 1.2.840.113549.1.3.1, algo: DiffieHellman\r\n    Type: KeyFactory, OID: 1.2.840.113549.1.3.1, algo: DiffieHellman\r\n    Type: KeyGenerator, OID: 1.2.840.113549.2.10, algo: HmacSHA384\r\n    Type: KeyGenerator, OID: 1.2.840.113549.2.11, algo: HmacSHA512\r\n    Type: KeyGenerator, OID: 1.2.840.113549.2.7, algo: HmacSHA1\r\n    Type: KeyGenerator, OID: 1.2.840.113549.2.8, algo: HmacSHA224\r\n    Type: KeyGenerator, OID: 1.2.840.113549.2.9, algo: HmacSHA256\r\n    Type: KeyPairGenerator, OID: 1.2.840.113549.1.3.1, algo: DiffieHellman\r\n    Type: Mac, OID: 1.2.840.113549.2.10, algo: HmacSHA384\r\n    Type: Mac, OID: 1.2.840.113549.2.11, algo: HmacSHA512\r\n    Type: Mac, OID: 1.2.840.113549.2.7, algo: HmacSHA1\r\n    Type: Mac, OID: 1.2.840.113549.2.8, algo: HmacSHA224\r\n    Type: Mac, OID: 1.2.840.113549.2.9, algo: HmacSHA256\r\n    Type: SecretKeyFactory, OID: 1.2.840.113549.1.12.1.1, algo: PBEWithSHA1AndRC4_128\r\n    Type: SecretKeyFactory, OID: 1.2.840.113549.1.12.1.2, algo: PBEWithSHA1AndRC4_40\r\n    Type: SecretKeyFactory, OID: 1.2.840.113549.1.12.1.3, algo: PBEWithSHA1AndDESede\r\n    Type: SecretKeyFactory, OID: 1.2.840.113549.1.12.1.5, algo: PBEWithSHA1AndRC2_128\r\n    Type: SecretKeyFactory, OID: 1.2.840.113549.1.12.1.6, algo: PBEWithSHA1AndRC2_40\r\n    Type: SecretKeyFactory, OID: 1.2.840.113549.1.5.12, algo: PBKDF2WithHmacSHA1\r\n    Type: SecretKeyFactory, OID: 1.2.840.113549.1.5.3, algo: PBEWithMD5AndDES\r\n    \r\n     &gt;&gt;&gt; Provider: SunJGSS &lt;&lt;&lt; \r\n    \r\n    Type: GssApiMechanism, OID: 1.2.840.113554.1.2.2, algo: 1.2.840.113554.1.2.2\r\n    Type: GssApiMechanism, OID: 1.3.6.1.5.5.2, algo: 1.3.6.1.5.5.2\r\n    \r\n     &gt;&gt;&gt; Provider: SunSASL &lt;&lt;&lt; \r\n    \r\n    \r\n     &gt;&gt;&gt; Provider: XMLDSig &lt;&lt;&lt; \r\n    \r\n    \r\n     &gt;&gt;&gt; Provider: SunPCSC &lt;&lt;&lt; \r\n    \r\n    \r\n     &gt;&gt;&gt; Provider: SunMSCAPI &lt;&lt;&lt; \r\n    \r\n    Type: Signature, OID: 1.2.840.113549.1.1.11, algo: SHA256withRSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.12, algo: SHA384withRSA\r\n    Type: Signature, OID: 1.2.840.113549.1.1.13, algo: SHA512withRSA\r\n\r\n","title":"How to translate an OID to a JCE algorithm name?","body":"<p>There is an online database of OID's at <a href=\"http://www.oid-info.com/\" rel=\"noreferrer\">oid-info.com</a> that you can use.</p>\n\n<p>As you can see the OID database is huge. Besides that, due to companies defining their own OID's under their base OID, many OID's are actually unknown.</p>\n\n<p>The <code>AlgorithmTools</code> class has simply defined a list of OID's for signature algorithms, it doesn't attempt to dynamically find out which algorithms are available by using an OID as alias.</p>\n\n<p>Note that some OID's are used for multiple classes. For instance, you can have an RSA <code>Cipher</code>, <code>KeyFactory</code> and <code>KeyPairGenerator</code>.</p>\n\n<p>You can however find out which OID's are available for the currently installed providers:</p>\n\n<pre><code>package nl.owlstead.stackoverflow;\n\nimport java.security.Provider;\nimport java.security.Provider.Service;\nimport java.security.Security;\nimport java.util.Set;\nimport java.util.SortedSet;\nimport java.util.TreeSet;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class GetOIDToAlgorithmNameMapping {\n    private static final Pattern KEY_TYPE_PATTERN = Pattern.compile(\"^(\\\\w+)[.].*$\");\n    private static final Pattern KEY_ALIAS_TYPE_PATTERN = Pattern.compile(\"^Alg[.]Alias[.](\\\\w+).*$\");\n    private static final Pattern KEY_OID_PATTERN = Pattern.compile(\".*?(\\\\d+(?:[.]\\\\d+){3,})$\");\n\n    public static void main(String[] args) throws Exception {\n        Provider[] provs = Security.getProviders();\n\n        for (Provider prov : provs) {\n            System.out.printf(\"%n &gt;&gt;&gt; Provider: %s &lt;&lt;&lt; %n%n\", prov.getName());\n\n            SortedSet&lt;String&gt; typeAndOID = getTypeAndOIDStrings(prov);\n\n            for (String entry : typeAndOID) {\n                String[] typeAndOIDArray = entry.split(\"-\");\n                String type = typeAndOIDArray[0];\n                String oid = typeAndOIDArray[1];\n                Service service = prov.getService(type, oid);\n                String algo = service.getAlgorithm();\n                System.out.printf(\"Type: %s, OID: %s, algo: %s%n\", type, oid, algo);\n            }\n        }\n    }\n\n    private static SortedSet&lt;String&gt; getTypeAndOIDStrings(Provider prov) {\n        SortedSet&lt;String&gt; typeAndOID = new TreeSet&lt;&gt;();\n\n        Set&lt;Object&gt; keys = prov.keySet();\n        for (Object key : keys) {\n            String keyString = key.toString();\n            Matcher oidMatcher = KEY_OID_PATTERN.matcher(keyString);\n            if (oidMatcher.matches()) {\n                // get OID from matched keyString\n                String oid = oidMatcher.group(1);\n\n                // determine type\n                String type;\n                Matcher aliasTypeMatcher = KEY_ALIAS_TYPE_PATTERN.matcher(keyString);\n                if (aliasTypeMatcher.matches()) {\n                    type = aliasTypeMatcher.group(1);\n                } else {\n                    Matcher typeMatcher = KEY_TYPE_PATTERN.matcher(keyString);\n                    typeMatcher.matches();\n                    type = typeMatcher.group(1);\n                }\n\n                // algorithm parameters are not algorithms, so skip them\n                if (type.equals(\"AlgorithmParameters\")) {\n                    continue;\n                }\n\n                // auto-removes dupes\n                typeAndOID.add(type + \"-\" + oid);\n            }\n        }\n        return typeAndOID;\n    }\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> &gt;&gt;&gt; Provider: SUN &lt;&lt;&lt; \n\nType: KeyFactory, OID: 1.2.840.10040.4.1, algo: DSA\nType: KeyFactory, OID: 1.3.14.3.2.12, algo: DSA\nType: KeyPairGenerator, OID: 1.2.840.10040.4.1, algo: DSA\nType: KeyPairGenerator, OID: 1.3.14.3.2.12, algo: DSA\nType: MessageDigest, OID: 1.3.14.3.2.26, algo: SHA\nType: MessageDigest, OID: 2.16.840.1.101.3.4.2.1, algo: SHA-256\nType: MessageDigest, OID: 2.16.840.1.101.3.4.2.2, algo: SHA-384\nType: MessageDigest, OID: 2.16.840.1.101.3.4.2.3, algo: SHA-512\nType: MessageDigest, OID: 2.16.840.1.101.3.4.2.4, algo: SHA-224\nType: Signature, OID: 1.2.840.10040.4.3, algo: SHA1withDSA\nType: Signature, OID: 1.3.14.3.2.13, algo: SHA1withDSA\nType: Signature, OID: 1.3.14.3.2.27, algo: SHA1withDSA\nType: Signature, OID: 2.16.840.1.101.3.4.3.1, algo: SHA224withDSA\nType: Signature, OID: 2.16.840.1.101.3.4.3.2, algo: SHA256withDSA\n\n &gt;&gt;&gt; Provider: SunRsaSign &lt;&lt;&lt; \n\nType: KeyFactory, OID: 1.2.840.113549.1.1, algo: RSA\nType: KeyPairGenerator, OID: 1.2.840.113549.1.1, algo: RSA\nType: Signature, OID: 1.2.840.113549.1.1.11, algo: SHA256withRSA\nType: Signature, OID: 1.2.840.113549.1.1.12, algo: SHA384withRSA\nType: Signature, OID: 1.2.840.113549.1.1.13, algo: SHA512withRSA\nType: Signature, OID: 1.2.840.113549.1.1.14, algo: SHA224withRSA\nType: Signature, OID: 1.2.840.113549.1.1.2, algo: MD2withRSA\nType: Signature, OID: 1.2.840.113549.1.1.4, algo: MD5withRSA\nType: Signature, OID: 1.2.840.113549.1.1.5, algo: SHA1withRSA\nType: Signature, OID: 1.3.14.3.2.29, algo: SHA1withRSA\n\n &gt;&gt;&gt; Provider: SunEC &lt;&lt;&lt; \n\nType: Signature, OID: 1.2.840.10045.4.1, algo: SHA1withECDSA\nType: Signature, OID: 1.2.840.10045.4.3.1, algo: SHA224withECDSA\nType: Signature, OID: 1.2.840.10045.4.3.2, algo: SHA256withECDSA\nType: Signature, OID: 1.2.840.10045.4.3.3, algo: SHA384withECDSA\nType: Signature, OID: 1.2.840.10045.4.3.4, algo: SHA512withECDSA\n\n &gt;&gt;&gt; Provider: SunJSSE &lt;&lt;&lt; \n\nType: KeyFactory, OID: 1.2.840.113549.1.1, algo: RSA\nType: KeyPairGenerator, OID: 1.2.840.113549.1.1, algo: RSA\nType: Signature, OID: 1.2.840.113549.1.1.2, algo: MD2withRSA\nType: Signature, OID: 1.2.840.113549.1.1.4, algo: MD5withRSA\nType: Signature, OID: 1.2.840.113549.1.1.5, algo: SHA1withRSA\nType: Signature, OID: 1.3.14.3.2.29, algo: SHA1withRSA\n\n &gt;&gt;&gt; Provider: SunJCE &lt;&lt;&lt; \n\nType: AlgorithmParameterGenerator, OID: 1.2.840.113549.1.3.1, algo: DiffieHellman\nType: Cipher, OID: 1.2.840.113549.1.12.1.1, algo: PBEWithSHA1AndRC4_128\nType: Cipher, OID: 1.2.840.113549.1.12.1.2, algo: PBEWithSHA1AndRC4_40\nType: Cipher, OID: 1.2.840.113549.1.12.1.3, algo: PBEWithSHA1AndDESede\nType: Cipher, OID: 1.2.840.113549.1.12.1.5, algo: PBEWithSHA1AndRC2_128\nType: Cipher, OID: 1.2.840.113549.1.12.1.6, algo: PBEWithSHA1AndRC2_40\nType: Cipher, OID: 1.2.840.113549.1.5.3, algo: PBEWithMD5AndDES\nType: Cipher, OID: 2.16.840.1.101.3.4.1.1, algo: AES_128/ECB/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.2, algo: AES_128/CBC/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.21, algo: AES_192/ECB/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.22, algo: AES_192/CBC/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.23, algo: AES_192/OFB/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.24, algo: AES_192/CFB/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.25, algo: AESWrap_192\nType: Cipher, OID: 2.16.840.1.101.3.4.1.26, algo: AES_192/GCM/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.3, algo: AES_128/OFB/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.4, algo: AES_128/CFB/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.41, algo: AES_256/ECB/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.42, algo: AES_256/CBC/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.43, algo: AES_256/OFB/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.44, algo: AES_256/CFB/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.45, algo: AESWrap_256\nType: Cipher, OID: 2.16.840.1.101.3.4.1.46, algo: AES_256/GCM/NoPadding\nType: Cipher, OID: 2.16.840.1.101.3.4.1.5, algo: AESWrap_128\nType: Cipher, OID: 2.16.840.1.101.3.4.1.6, algo: AES_128/GCM/NoPadding\nType: KeyAgreement, OID: 1.2.840.113549.1.3.1, algo: DiffieHellman\nType: KeyFactory, OID: 1.2.840.113549.1.3.1, algo: DiffieHellman\nType: KeyGenerator, OID: 1.2.840.113549.2.10, algo: HmacSHA384\nType: KeyGenerator, OID: 1.2.840.113549.2.11, algo: HmacSHA512\nType: KeyGenerator, OID: 1.2.840.113549.2.7, algo: HmacSHA1\nType: KeyGenerator, OID: 1.2.840.113549.2.8, algo: HmacSHA224\nType: KeyGenerator, OID: 1.2.840.113549.2.9, algo: HmacSHA256\nType: KeyPairGenerator, OID: 1.2.840.113549.1.3.1, algo: DiffieHellman\nType: Mac, OID: 1.2.840.113549.2.10, algo: HmacSHA384\nType: Mac, OID: 1.2.840.113549.2.11, algo: HmacSHA512\nType: Mac, OID: 1.2.840.113549.2.7, algo: HmacSHA1\nType: Mac, OID: 1.2.840.113549.2.8, algo: HmacSHA224\nType: Mac, OID: 1.2.840.113549.2.9, algo: HmacSHA256\nType: SecretKeyFactory, OID: 1.2.840.113549.1.12.1.1, algo: PBEWithSHA1AndRC4_128\nType: SecretKeyFactory, OID: 1.2.840.113549.1.12.1.2, algo: PBEWithSHA1AndRC4_40\nType: SecretKeyFactory, OID: 1.2.840.113549.1.12.1.3, algo: PBEWithSHA1AndDESede\nType: SecretKeyFactory, OID: 1.2.840.113549.1.12.1.5, algo: PBEWithSHA1AndRC2_128\nType: SecretKeyFactory, OID: 1.2.840.113549.1.12.1.6, algo: PBEWithSHA1AndRC2_40\nType: SecretKeyFactory, OID: 1.2.840.113549.1.5.12, algo: PBKDF2WithHmacSHA1\nType: SecretKeyFactory, OID: 1.2.840.113549.1.5.3, algo: PBEWithMD5AndDES\n\n &gt;&gt;&gt; Provider: SunJGSS &lt;&lt;&lt; \n\nType: GssApiMechanism, OID: 1.2.840.113554.1.2.2, algo: 1.2.840.113554.1.2.2\nType: GssApiMechanism, OID: 1.3.6.1.5.5.2, algo: 1.3.6.1.5.5.2\n\n &gt;&gt;&gt; Provider: SunSASL &lt;&lt;&lt; \n\n\n &gt;&gt;&gt; Provider: XMLDSig &lt;&lt;&lt; \n\n\n &gt;&gt;&gt; Provider: SunPCSC &lt;&lt;&lt; \n\n\n &gt;&gt;&gt; Provider: SunMSCAPI &lt;&lt;&lt; \n\nType: Signature, OID: 1.2.840.113549.1.1.11, algo: SHA256withRSA\nType: Signature, OID: 1.2.840.113549.1.1.12, algo: SHA384withRSA\nType: Signature, OID: 1.2.840.113549.1.1.13, algo: SHA512withRSA\n</code></pre>\n"}],"owner":{"account_id":4178873,"reputation":583,"user_id":3424550,"accept_rate":80,"display_name":"Rodolfo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1805,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"closed_date":1496994408,"accepted_answer_id":44318752,"answer_count":1,"score":4,"last_activity_date":1636378718,"creation_date":1496341043,"question_id":44314475,"body_markdown":"I am looking for a library that can take a oid such as `1.2.840.10040.4.3` and translate it to its standard name (in this case `SHA1withDSA`)\r\n\r\nUsing `org.cesecore.certificates.util.AlgorithmTools`, I am able to achieve some of the required functionality, but it is very limited.\r\n\r\nThis is the current code:\r\n\r\n    String signatureAlgorithmName = AlgorithmTools.getAlgorithmNameFromOID(oid);\r\n\r\n\r\n**Note:**\r\n\r\nThe standard names can be found [here](https://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#Signature)\r\n","title":"How to translate an OID to a JCE algorithm name?","body":"<p>I am looking for a library that can take a oid such as <code>1.2.840.10040.4.3</code> and translate it to its standard name (in this case <code>SHA1withDSA</code>)</p>\n\n<p>Using <code>org.cesecore.certificates.util.AlgorithmTools</code>, I am able to achieve some of the required functionality, but it is very limited.</p>\n\n<p>This is the current code:</p>\n\n<pre><code>String signatureAlgorithmName = AlgorithmTools.getAlgorithmNameFromOID(oid);\n</code></pre>\n\n<p><strong>Note:</strong></p>\n\n<p>The standard names can be found <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#Signature\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":["java","heap-memory","heap-dump","jmap"],"comments":[{"owner":{"account_id":3385378,"reputation":21,"user_id":2841439,"display_name":"Demir Yavas"},"score":1,"creation_date":1380804034,"post_id":19159461,"comment_id":28341185,"body_markdown":"Actually there is typo in the title: hisgotram&quot; --&gt; &quot;histogram&quot;","body":"Actually there is typo in the title: hisgotram&quot; --&gt; &quot;histogram&quot;"},{"owner":{"account_id":1049716,"reputation":3844,"user_id":1053938,"accept_rate":83,"display_name":"jonhopkins"},"score":1,"creation_date":1380804151,"post_id":19159461,"comment_id":28341241,"body_markdown":"You can edit the title to fix it, by the way.","body":"You can edit the title to fix it, by the way."}],"owner":{"account_id":3385378,"reputation":21,"user_id":2841439,"display_name":"Demir Yavas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1636378717,"creation_date":1380803939,"question_id":19159461,"body_markdown":"How can I invoke `heap-dump` from my Java program as similar to what jmap produces with `&quot;-histo&quot;` option. As far as know `heap-dump` in `binary` form (or like output from `&quot;-dump&quot; option` of `jmap`) could be handled by using `HotSpotDiagnosticMXBean`, but not for heap histogram(?)","title":"java heap histogram from inside of program","body":"<p>How can I invoke <code>heap-dump</code> from my Java program as similar to what jmap produces with <code>\"-histo\"</code> option. As far as know <code>heap-dump</code> in <code>binary</code> form (or like output from <code>\"-dump\" option</code> of <code>jmap</code>) could be handled by using <code>HotSpotDiagnosticMXBean</code>, but not for heap histogram(?)</p>\n"},{"tags":["java","tomcat","heap-memory","heap-dump"],"comments":[{"owner":{"account_id":325446,"reputation":17129,"user_id":646634,"accept_rate":100,"display_name":"Brian"},"score":3,"creation_date":1381949389,"post_id":19411131,"comment_id":28774393,"body_markdown":"It looks like Tomcat is catching and rethrowing the error as a cause exception. I&#39;m not sure how to correct it though. Heap dumps are only created when the error is uncaught and populates all the way to the root of the stack trace without being handled.","body":"It looks like Tomcat is catching and rethrowing the error as a cause exception. I&#39;m not sure how to correct it though. Heap dumps are only created when the error is uncaught and populates all the way to the root of the stack trace without being handled."},{"owner":{"account_id":208424,"reputation":1276,"user_id":458901,"display_name":"mezzie"},"score":1,"creation_date":1381950489,"post_id":19411131,"comment_id":28774985,"body_markdown":"Brian is right, I know tomcat 7 have Leak protection. You might want to disable them so that it generates the dump for you.","body":"Brian is right, I know tomcat 7 have Leak protection. You might want to disable them so that it generates the dump for you."}],"owner":{"account_id":938736,"reputation":6591,"user_id":967203,"accept_rate":100,"display_name":"Will"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":469,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1636378708,"creation_date":1381948533,"question_id":19411131,"body_markdown":"I&#39;m having a problem where a `Java webapp` running in `Tomcat` is throwing a lot of `java.lang.OutOfMemoryError` errors, but no heap is being generated. \r\n\r\nI have the following flags in `CATALINA_OPTS` enabled via `setenv.sh`\r\n\r\n`-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/path/to/`\r\n\r\nThis has worked before, but for some reason it&#39;s just not now. \r\n\r\nUsually I would see `Dumping heap to /path/to/heap/dir/` in `catalina.out`, but not this time.\r\n\r\n\r\nThe VM options are most definitely enabled as seen by the output of `ps`\r\n \r\nThe heap directory has sufficient space and write permissions (I think this kind of IO exception is actually logged)\r\n\r\nThe OutOfMemory is being caused due to far to heavy `XSL Transformation` happening within a `JSP` via taglibs.\r\n\r\nStack looks like this following:\r\n\r\n    Caused by: javax.servlet.ServletException: javax.servlet.jsp.JspException: java.lang.OutOfMemoryError\r\n        at org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:861)\r\n        at org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:794)\r\n        at org.apache.jsp.WEB_002dINF.jsp.portlets.item_005fsearch.result.view_jsp._jspService(Unknown Source)\r\n        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\r\n        at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)\r\n        at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)\r\n        at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:229)\r\n        at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)\r\n        at org.springframework.web.servlet.ViewRendererServlet.renderView(ViewRendererServlet.java:114)\r\n        at org.springframework.web.servlet.ViewRendererServlet.processRequest(ViewRendererServlet.java:86)\r\n        at org.springframework.web.servlet.ViewRendererServlet.doGet(ViewRendererServlet.java:66)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\r\n        at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)\r\n        at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)\r\n        at org.exoplatform.services.portletcontainer.plugins.pc.portletAPIImp.PortletRequestDispatcherImp.include(PortletRequestDispatcherImp.java:149)\r\n        ... 88 more\r\n\r\n    Caused by: java.lang.OutOfMemoryError\r\n        at java.lang.Class.getDeclaredConstructors0(Native Method)\r\n        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)\r\n        at java.lang.Class.getConstructor0(Class.java:2699)\r\n        at java.lang.Class.newInstance0(Class.java:326)\r\n        at java.lang.Class.newInstance(Class.java:308)\r\n        at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.getTransletInstance(TemplatesImpl.java:353)\r\n        at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.newTransformer(TemplatesImpl.java:382)....\r\n\r\nI&#39;m trying to understand, under what circumstances would an OutOfMemoryError not trigger the heap dump.\r\n\r\nThanks in advance. \r\n\r\nWill\r\n","title":"Heap not generated when using -XX:+HeapDumpOnOutOfMemoryError","body":"<p>I'm having a problem where a <code>Java webapp</code> running in <code>Tomcat</code> is throwing a lot of <code>java.lang.OutOfMemoryError</code> errors, but no heap is being generated. </p>\n\n<p>I have the following flags in <code>CATALINA_OPTS</code> enabled via <code>setenv.sh</code></p>\n\n<p><code>-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/path/to/</code></p>\n\n<p>This has worked before, but for some reason it's just not now. </p>\n\n<p>Usually I would see <code>Dumping heap to /path/to/heap/dir/</code> in <code>catalina.out</code>, but not this time.</p>\n\n<p>The VM options are most definitely enabled as seen by the output of <code>ps</code></p>\n\n<p>The heap directory has sufficient space and write permissions (I think this kind of IO exception is actually logged)</p>\n\n<p>The OutOfMemory is being caused due to far to heavy <code>XSL Transformation</code> happening within a <code>JSP</code> via taglibs.</p>\n\n<p>Stack looks like this following:</p>\n\n<pre><code>Caused by: javax.servlet.ServletException: javax.servlet.jsp.JspException: java.lang.OutOfMemoryError\n    at org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:861)\n    at org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:794)\n    at org.apache.jsp.WEB_002dINF.jsp.portlets.item_005fsearch.result.view_jsp._jspService(Unknown Source)\n    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\n    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)\n    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)\n    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:229)\n    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)\n    at org.springframework.web.servlet.ViewRendererServlet.renderView(ViewRendererServlet.java:114)\n    at org.springframework.web.servlet.ViewRendererServlet.processRequest(ViewRendererServlet.java:86)\n    at org.springframework.web.servlet.ViewRendererServlet.doGet(ViewRendererServlet.java:66)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\n    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)\n    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)\n    at org.exoplatform.services.portletcontainer.plugins.pc.portletAPIImp.PortletRequestDispatcherImp.include(PortletRequestDispatcherImp.java:149)\n    ... 88 more\n\nCaused by: java.lang.OutOfMemoryError\n    at java.lang.Class.getDeclaredConstructors0(Native Method)\n    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)\n    at java.lang.Class.getConstructor0(Class.java:2699)\n    at java.lang.Class.newInstance0(Class.java:326)\n    at java.lang.Class.newInstance(Class.java:308)\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.getTransletInstance(TemplatesImpl.java:353)\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.newTransformer(TemplatesImpl.java:382)....\n</code></pre>\n\n<p>I'm trying to understand, under what circumstances would an OutOfMemoryError not trigger the heap dump.</p>\n\n<p>Thanks in advance. </p>\n\n<p>Will</p>\n"},{"tags":["java","heap-memory","heap-dump"],"answers":[{"tags":[],"owner":{"account_id":801225,"reputation":7522,"user_id":878732,"accept_rate":60,"display_name":"harsh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1385372753,"creation_date":1385372399,"answer_id":20188740,"question_id":20188661,"body_markdown":"Use `jmap`:\r\n\r\n    jmap -dump:format=b,file=heap.bin &lt;pid&gt;\r\n\r\nrefer to  [`Java 7` jmap tutorial][1].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/tools/share/jmap.html","title":"JAVA Print Heap Dump","body":"<p>Use <code>jmap</code>:</p>\n\n<pre><code>jmap -dump:format=b,file=heap.bin &lt;pid&gt;\n</code></pre>\n\n<p>refer to  <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/share/jmap.html\" rel=\"nofollow\"><code>Java 7</code> jmap tutorial</a>.</p>\n"},{"tags":[],"owner":{"account_id":106291,"reputation":22384,"user_id":283200,"display_name":"Kai Sternad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385372561,"creation_date":1385372561,"answer_id":20188786,"question_id":20188661,"body_markdown":"You can use the [HotSpotDiagnosticMXBean][1] for creating a heap dump programmatically.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/jre/api/management/extension/com/sun/management/HotSpotDiagnosticMXBean.html","title":"JAVA Print Heap Dump","body":"<p>You can use the <a href=\"http://docs.oracle.com/javase/7/docs/jre/api/management/extension/com/sun/management/HotSpotDiagnosticMXBean.html\" rel=\"nofollow\">HotSpotDiagnosticMXBean</a> for creating a heap dump programmatically.</p>\n"},{"tags":[],"owner":{"account_id":1003835,"reputation":1376,"user_id":1018075,"accept_rate":74,"display_name":"Mdhar9e"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385373447,"creation_date":1385373447,"answer_id":20189118,"question_id":20188661,"body_markdown":"You can&#39;t print the Heap Dump directly using S.O.P Statement. But you can dump all the data in a file. \r\nJVM will create heap dump every time when your application throws an `OutOfMemoryError`. `HeapDumpPath` is used to set location of heap dumps.\r\n\r\nWe can also use `jmap` from our code. Assume name,pid are the fileds retrieving. To get a pid from code use we need to use `java.lang.management.ManagementFactory`.\r\n\r\n    String name = ManagementFactory.getRuntimeMXBean().getName();\r\n    String pid = name.substring(0, name.indexOf(&quot;@&quot;));\r\n    After that we can start jmap process like this:\r\n    String[] cmd = { &quot;jmap&quot;, &quot;-dump:file=D:\\\\temp\\\\heapdumps\\\\dump.bin&quot;, pid };\r\n    Process p = Runtime.getRuntime().exec(cmd);\r\n\r\n","title":"JAVA Print Heap Dump","body":"<p>You can't print the Heap Dump directly using S.O.P Statement. But you can dump all the data in a file. \nJVM will create heap dump every time when your application throws an <code>OutOfMemoryError</code>. <code>HeapDumpPath</code> is used to set location of heap dumps.</p>\n\n<p>We can also use <code>jmap</code> from our code. Assume name,pid are the fileds retrieving. To get a pid from code use we need to use <code>java.lang.management.ManagementFactory</code>.</p>\n\n<pre><code>String name = ManagementFactory.getRuntimeMXBean().getName();\nString pid = name.substring(0, name.indexOf(\"@\"));\nAfter that we can start jmap process like this:\nString[] cmd = { \"jmap\", \"-dump:file=D:\\\\temp\\\\heapdumps\\\\dump.bin\", pid };\nProcess p = Runtime.getRuntime().exec(cmd);\n</code></pre>\n"}],"owner":{"account_id":3376347,"reputation":866,"user_id":2834421,"accept_rate":52,"display_name":"javagc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3744,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":20188740,"answer_count":3,"score":1,"last_activity_date":1636378696,"creation_date":1385372078,"question_id":20188661,"body_markdown":"I work with Java 1.7 and I want to print `Heap Dump` from java \r\n\r\n    ...\r\n    Object heapDump=.... ;\r\n    ...\r\n    \r\n    System.out.println(heapDump);\r\n\r\n\r\nCan anybody help me?","title":"JAVA Print Heap Dump","body":"<p>I work with Java 1.7 and I want to print <code>Heap Dump</code> from java </p>\n\n<pre><code>...\nObject heapDump=.... ;\n...\n\nSystem.out.println(heapDump);\n</code></pre>\n\n<p>Can anybody help me?</p>\n"},{"tags":["java","heap-memory","visualvm","heap-dump","jvisualvm"],"answers":[{"tags":[],"owner":{"account_id":248622,"reputation":60,"user_id":524107,"display_name":"schlac"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1437158945,"creation_date":1437158945,"answer_id":31482706,"question_id":31193033,"body_markdown":"You can try to write the contents of the internal char arrays of all the `StringBuffer` instances to disk using the following OQL:\r\n\r\n    map(heap.objects(&#39;java.lang.StringBuffer&#39;),\r\n     function(it, index) {\r\n      var writer = new java.io.FileWriter(&quot;c:/temp/oql/stringbuffer_0x&quot; + it.id.toString(16) + &quot;.txt&quot;);\r\n      var chars = it.value;\r\n      for (var i=0; i&lt;chars.length; i++) {\r\n       writer.write(chars[i]);\r\n      }\r\n      writer.close();\r\n    })","title":"see contents of StringBuffer or char[] from a Java heap dump","body":"<p>You can try to write the contents of the internal char arrays of all the <code>StringBuffer</code> instances to disk using the following OQL:</p>\n\n<pre><code>map(heap.objects('java.lang.StringBuffer'),\n function(it, index) {\n  var writer = new java.io.FileWriter(\"c:/temp/oql/stringbuffer_0x\" + it.id.toString(16) + \".txt\");\n  var chars = it.value;\n  for (var i=0; i&lt;chars.length; i++) {\n   writer.write(chars[i]);\n  }\n  writer.close();\n})\n</code></pre>\n"}],"owner":{"account_id":436596,"reputation":7317,"user_id":823872,"accept_rate":71,"display_name":"Dan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1547,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31482706,"answer_count":1,"score":1,"last_activity_date":1636378676,"creation_date":1435865292,"question_id":31193033,"body_markdown":"I have a Java heap dump that I&#39;m analyzing, looking for high consumers of memory. More than 50% of the memory in the dump is in use by two StringBuffers, each of which holds a char[] which (naturally) accounts for most of the memory in the respective StringBuffer. However, when I inspect the char[] in the instance viewer the contents are elided, I think because the strings are so large. I&#39;ve also tried using `.toString()` in VisualVM&#39;s OQL, but that apparently only works on String objects.\r\n\r\nIs there any way to figure out what the contents of those arrays is?","title":"see contents of StringBuffer or char[] from a Java heap dump","body":"<p>I have a Java heap dump that I'm analyzing, looking for high consumers of memory. More than 50% of the memory in the dump is in use by two StringBuffers, each of which holds a char[] which (naturally) accounts for most of the memory in the respective StringBuffer. However, when I inspect the char[] in the instance viewer the contents are elided, I think because the strings are so large. I've also tried using <code>.toString()</code> in VisualVM's OQL, but that apparently only works on String objects.</p>\n\n<p>Is there any way to figure out what the contents of those arrays is?</p>\n"},{"tags":["java","heap-memory","visualvm","heap-dump","oql"],"answers":[{"tags":[],"owner":{"account_id":103389,"reputation":6773,"user_id":276950,"display_name":"Tomas Hurka"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1516694719,"creation_date":1516694391,"answer_id":48396753,"question_id":48387170,"body_markdown":"You can use the following query:\r\n\r\n    filter(heap.objects(&#39;java.lang.StringBuilder&#39;),\r\n     function(it, index) {\r\n      if (index == 827.0) {\r\n          var writer = new java.io.FileWriter(&quot;/Users/username/output/sb_0x&quot; + it.id.toString(16) + &quot;.txt&quot;);\r\n          var chars = it.value;\r\n          for (var i = 0; i &lt; chars.length; i++) {\r\n              writer.write(chars[i]);\r\n          }\r\n          writer.close();\r\n          return true;\r\n      }\r\n      return false;\r\n    })\r\n    \r\n","title":"Cannot access the value of a StringBuilder in a heap dump in VisualVM","body":"<p>You can use the following query:</p>\n\n<pre><code>filter(heap.objects('java.lang.StringBuilder'),\n function(it, index) {\n  if (index == 827.0) {\n      var writer = new java.io.FileWriter(\"/Users/username/output/sb_0x\" + it.id.toString(16) + \".txt\");\n      var chars = it.value;\n      for (var i = 0; i &lt; chars.length; i++) {\n          writer.write(chars[i]);\n      }\n      writer.close();\n      return true;\n  }\n  return false;\n})\n</code></pre>\n"}],"owner":{"account_id":8675910,"reputation":31,"user_id":6493341,"display_name":"Ivaylo Toskov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1636378643,"creation_date":1516642328,"question_id":48387170,"body_markdown":"I am willing to write the value of a large `StringBuilder` with index `827` to disk. I am trying to do that using the following OQL:\r\n\r\n    map(heap.objects(&#39;java.lang.StringBuilder&#39;),\r\n     function(it, index) {\r\n      if (index == 827.0) {\r\n          var writer = new java.io.FileWriter(&quot;/Users/username/output/sb_0x&quot; + it.id.toString(16) + &quot;.txt&quot;);\r\n          var chars = it.value;\r\n          for (var i = 0; i &lt; chars.length; i++) {\r\n              writer.write(chars[i]);\r\n          }\r\n          writer.close();\r\n      }\r\n      return index;\r\n    })\r\n    \r\nHowever, nothing gets written. I now that the builder exists, since I have inspected it:\r\n\r\n[All StringBuilder objects][1]\r\n\r\n\r\nIt seems that the result gets truncated after the builder with index `99` (i.e. it works for 99, but doesn&#39;t work for 100):\r\n\r\n[Truncated after 100][2]\r\n\r\nAny suggestions how can I get the value of the StringBuilder with id 827?\r\n\r\n  [1]: https://i.stack.imgur.com/IC0P3.png\r\n  [2]: https://i.stack.imgur.com/SoINK.png","title":"Cannot access the value of a StringBuilder in a heap dump in VisualVM","body":"<p>I am willing to write the value of a large <code>StringBuilder</code> with index <code>827</code> to disk. I am trying to do that using the following OQL:</p>\n\n<pre><code>map(heap.objects('java.lang.StringBuilder'),\n function(it, index) {\n  if (index == 827.0) {\n      var writer = new java.io.FileWriter(\"/Users/username/output/sb_0x\" + it.id.toString(16) + \".txt\");\n      var chars = it.value;\n      for (var i = 0; i &lt; chars.length; i++) {\n          writer.write(chars[i]);\n      }\n      writer.close();\n  }\n  return index;\n})\n</code></pre>\n\n<p>However, nothing gets written. I now that the builder exists, since I have inspected it:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IC0P3.png\" rel=\"nofollow noreferrer\">All StringBuilder objects</a></p>\n\n<p>It seems that the result gets truncated after the builder with index <code>99</code> (i.e. it works for 99, but doesn't work for 100):</p>\n\n<p><a href=\"https://i.stack.imgur.com/SoINK.png\" rel=\"nofollow noreferrer\">Truncated after 100</a></p>\n\n<p>Any suggestions how can I get the value of the StringBuilder with id 827?</p>\n"},{"tags":["java","heap-memory","jnlp","heap-dump","eclipse-memory-analyzer"],"owner":{"account_id":6354516,"reputation":107,"user_id":4932348,"accept_rate":60,"display_name":"DannyBoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1636378632,"creation_date":1516824070,"question_id":48430705,"body_markdown":"We are getting an OOME on our Java Web Start application\r\nWhen analyzing the heap size in JVisualVM we are seeing a large increase in memory over a short period.\r\nThe following memory consumption is more or less the same every time when running the application.\r\n\r\n[![Memory consumption over 10 minutes][1]][1]\r\n\r\n\r\nI have imported the heap dump to Eclipse MAT.\r\nI can see that most of the heap is occupied by DeploymentRuleSets\r\nThe internal drs map of the DeploymentRuleSet class contains tens of thousands entries all containing the same jar\r\n\r\n[![MAT leak suspect][2]][2]\r\n\r\nI&#39;ve investigated at least 50 of these HashMap entries. They contain the same data. Screenshot attached - I have taken out some sensitive company data but I really triple checked if the values are the same. I&#39;ve pasted screenshots of just 2 RuleId objects but you get the picture\r\n\r\n[![Same jar in DRS map entry 1][3]][3]\r\n[![Same jar in DRS map entry 2][4]][4]\r\n\r\nHere are my questions/doubts:\r\n\r\n1. The obvious one: has anyone encountered anything like this?\r\n2. Looking at the RuleId class, it does not have the &quot;equals&quot; nor &quot;hashcode&quot; method implemented. It is therefor expected that duplicated entries will be inserted to the hashmap since it will compare the objects by reference. \r\nHowever I&#39;ve analyzed different heap dumps withing our company for other JavaWebStart applications. None of them have the same problem. The drs map contains only a couple hundred entries and there are only unique jars from classpath so exactly how I would expect it to work\r\nTherefor I doubt that it is a &quot;core java bug&quot; but rather our specific app problem\r\nDo you have an idea why the same jar would be inserted into the drsMap over and over again?\r\n3. I&#39;ve attached the remote debugger to our JavaWebStart app. I have imported the core java &quot;deploy.jar&quot; to the classpath and put some breakpoints in some of the DeploymentRuleSet methods. Sadly none of them were hit even though the DeploymentRuleSet increases in memory. Any way to debug core java stuff like this? Would be really helpful to see when and why are those DRS triggered\r\n\r\n  [1]: https://i.stack.imgur.com/vTrA2.png\r\n  [2]: https://i.stack.imgur.com/sQZeY.png\r\n  [3]: https://i.stack.imgur.com/atSRI.png\r\n  [4]: https://i.stack.imgur.com/avLxZ.png\r\n\r\n","title":"DeploymentRuleSet occupying most of the heap space","body":"<p>We are getting an OOME on our Java Web Start application\nWhen analyzing the heap size in JVisualVM we are seeing a large increase in memory over a short period.\nThe following memory consumption is more or less the same every time when running the application.</p>\n\n<p><a href=\"https://i.stack.imgur.com/vTrA2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vTrA2.png\" alt=\"Memory consumption over 10 minutes\"></a></p>\n\n<p>I have imported the heap dump to Eclipse MAT.\nI can see that most of the heap is occupied by DeploymentRuleSets\nThe internal drs map of the DeploymentRuleSet class contains tens of thousands entries all containing the same jar</p>\n\n<p><a href=\"https://i.stack.imgur.com/sQZeY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sQZeY.png\" alt=\"MAT leak suspect\"></a></p>\n\n<p>I've investigated at least 50 of these HashMap entries. They contain the same data. Screenshot attached - I have taken out some sensitive company data but I really triple checked if the values are the same. I've pasted screenshots of just 2 RuleId objects but you get the picture</p>\n\n<p><a href=\"https://i.stack.imgur.com/atSRI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/atSRI.png\" alt=\"Same jar in DRS map entry 1\"></a>\n<a href=\"https://i.stack.imgur.com/avLxZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/avLxZ.png\" alt=\"Same jar in DRS map entry 2\"></a></p>\n\n<p>Here are my questions/doubts:</p>\n\n<ol>\n<li>The obvious one: has anyone encountered anything like this?</li>\n<li>Looking at the RuleId class, it does not have the \"equals\" nor \"hashcode\" method implemented. It is therefor expected that duplicated entries will be inserted to the hashmap since it will compare the objects by reference. \nHowever I've analyzed different heap dumps withing our company for other JavaWebStart applications. None of them have the same problem. The drs map contains only a couple hundred entries and there are only unique jars from classpath so exactly how I would expect it to work\nTherefor I doubt that it is a \"core java bug\" but rather our specific app problem\nDo you have an idea why the same jar would be inserted into the drsMap over and over again?</li>\n<li>I've attached the remote debugger to our JavaWebStart app. I have imported the core java \"deploy.jar\" to the classpath and put some breakpoints in some of the DeploymentRuleSet methods. Sadly none of them were hit even though the DeploymentRuleSet increases in memory. Any way to debug core java stuff like this? Would be really helpful to see when and why are those DRS triggered</li>\n</ol>\n"},{"tags":["java","heap-memory","heap-dump"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1575818599,"post_id":59236789,"comment_id":104685186,"body_markdown":"It&#39;s not possible to help without seeing the code Please post an [mre] that demonstrates the problem.  And keep it `minimal`","body":"It&#39;s not possible to help without seeing the code Please post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem.  And keep it <code>minimal</code>"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1575818819,"post_id":59236789,"comment_id":104685249,"body_markdown":"Note: The garbage collector already deletes collected garbage from the JVM. If you get a heap space OutOfMemoryError, it means that there is nothing that the garbage collector can collect. That is, that all of the heap space is taken by objects that are reachable.","body":"Note: The garbage collector already deletes collected garbage from the JVM. If you get a heap space OutOfMemoryError, it means that there is nothing that the garbage collector can collect. That is, that all of the heap space is taken by objects that are reachable."},{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":0,"creation_date":1575818954,"post_id":59236789,"comment_id":104685284,"body_markdown":"OOME is thrown few types of errors e.g. heap space exhaustion or file descriptor limit reached. First understand which OOME flavour you have encountered and then look for fix.","body":"OOME is thrown few types of errors e.g. heap space exhaustion or file descriptor limit reached. First understand which OOME flavour you have encountered and then look for fix."},{"owner":{"account_id":16567113,"reputation":13,"user_id":11971371,"display_name":"Animoto Dito"},"score":0,"creation_date":1575888403,"post_id":59236789,"comment_id":104704451,"body_markdown":"I have updated the post and insert the image and the code used by the reader and Jtble. garbage colector runs in the Rfid Reader","body":"I have updated the post and insert the image and the code used by the reader and Jtble. garbage colector runs in the Rfid Reader"},{"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"score":0,"creation_date":1575890269,"post_id":59236789,"comment_id":104705373,"body_markdown":"@AnimotoDito Call to gc does not force GC, it has no immediate effect. OOME could caused by memory leak. Unless you post the full code and log trace, it&#39;s impossible to find the cause of the leak in your program.","body":"@AnimotoDito Call to gc does not force GC, it has no immediate effect. OOME could caused by memory leak. Unless you post the full code and log trace, it&#39;s impossible to find the cause of the leak in your program."},{"owner":{"account_id":16567113,"reputation":13,"user_id":11971371,"display_name":"Animoto Dito"},"score":0,"creation_date":1575892317,"post_id":59236789,"comment_id":104706392,"body_markdown":"updated . this is the error I am getting before heap space. after 10 minutes the application gives me heap space memory shortage","body":"updated . this is the error I am getting before heap space. after 10 minutes the application gives me heap space memory shortage"},{"owner":{"account_id":2573819,"reputation":15175,"user_id":2231972,"display_name":"Roman-Stop RU aggression in UA"},"score":0,"creation_date":1575902791,"post_id":59236789,"comment_id":104712229,"body_markdown":"Start JVM with [automatic dump](https://stackoverflow.com/questions/34076680/java-out-of-memory-automatic-heap-dump-file-name) on OOME or [create one](https://stackoverflow.com/questions/407612/how-to-get-a-thread-and-heap-dump-of-a-java-process-on-windows-thats-not-runnin) after program runs for a while and then [look](https://dzone.com/articles/java-heap-dump-analyzer-1) what objects consume memory. Then check where those objects are created in your program and why the are retained in memory.","body":"Start JVM with <a href=\"https://stackoverflow.com/questions/34076680/java-out-of-memory-automatic-heap-dump-file-name\">automatic dump</a> on OOME or <a href=\"https://stackoverflow.com/questions/407612/how-to-get-a-thread-and-heap-dump-of-a-java-process-on-windows-thats-not-runnin\">create one</a> after program runs for a while and then <a href=\"https://dzone.com/articles/java-heap-dump-analyzer-1\" rel=\"nofollow noreferrer\">look</a> what objects consume memory. Then check where those objects are created in your program and why the are retained in memory."},{"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"score":0,"creation_date":1575960284,"post_id":59236789,"comment_id":104731638,"body_markdown":"@AnimotoDito could you add the code of mysql class?","body":"@AnimotoDito could you add the code of mysql class?"}],"answers":[{"tags":[],"owner":{"account_id":8873341,"reputation":1424,"user_id":6626422,"display_name":"Thecarisma"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1575978739,"creation_date":1575820505,"answer_id":59237175,"question_id":59236789,"body_markdown":"Out of Memory(OOM) error occurs if the application has exceeded the amount of memory allocated by the JVM. \r\n\r\nYou can start the JVM with more memory allocation. The JVM command `-Xmx&lt;size&gt;` to specify the maximum heap size.\r\n\r\n```\r\njava -Xmx1024m -jar your-application.jar\r\n```\r\n\r\nIf your FileWriter is not buffered it can make the writing process very slow. Therefore you should wrap your FileWriter in a BufferedWriter stream.\r\n\r\n```\r\nPrintWriter out = null;\r\ntry {\r\n    out = new PrintWriter(new BufferedWriter(new FileWriter(&quot;text.txt&quot;, true)));\r\n    out.println(&quot;the text you want to append&quot;);\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n} finally {\r\n    if (out != null) {\r\n        out.close();\r\n    }\r\n} \r\n```\r\n\r\nOne of the most expensive operations on a computer system is IO, instead of writing to the file continuously you should store the tags in StringBuffer when it reaches a certain size you write it to the file.","title":"Java Memory Leak - Deleting Garbage Collection","body":"<p>Out of Memory(OOM) error occurs if the application has exceeded the amount of memory allocated by the JVM. </p>\n\n<p>You can start the JVM with more memory allocation. The JVM command <code>-Xmx&lt;size&gt;</code> to specify the maximum heap size.</p>\n\n<pre><code>java -Xmx1024m -jar your-application.jar\n</code></pre>\n\n<p>If your FileWriter is not buffered it can make the writing process very slow. Therefore you should wrap your FileWriter in a BufferedWriter stream.</p>\n\n<pre><code>PrintWriter out = null;\ntry {\n    out = new PrintWriter(new BufferedWriter(new FileWriter(\"text.txt\", true)));\n    out.println(\"the text you want to append\");\n} catch (IOException e) {\n    e.printStackTrace();\n} finally {\n    if (out != null) {\n        out.close();\n    }\n} \n</code></pre>\n\n<p>One of the most expensive operations on a computer system is IO, instead of writing to the file continuously you should store the tags in StringBuffer when it reaches a certain size you write it to the file.</p>\n"}],"owner":{"account_id":16567113,"reputation":13,"user_id":11971371,"display_name":"Animoto Dito"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1636378620,"creation_date":1575818075,"question_id":59236789,"body_markdown":"I have created an application using java swing in where a timer is scheduled to save the scanned tags in an RFID reader into db each second and display it the active tag in the jtable to what time it was been seen.Currenly using FileWriter The application needs to continously run.\r\n  FileWriter writer = new FileWriter(&quot;text.txt&quot;, true); // this is to save the tags into a text file aside from saving the tags in the database.\r\n\r\nI have tried using the the answers in the previous post here like flushing the writer, closing it and calling garbage collector in runtime.\r\n\r\n\r\n\r\nas you can see from the image, the application has consumed 1.2gb of memory which is the real issue.\r\n\r\n\r\n The problem is it gives me a heap space out of memory error within 12 hours and there is no backtrace for it for me to see where the leak is coming from. Is there a way to delete the collected garbage from JVM to keep the memory free?\r\n\r\n The behavior of the application is that by time passess, it&#39;s consuption to physical memory of PC get&#39;s larger and larger. which results to heap space overload. \r\n\r\nCurrently using eclipse Neon\r\n\r\n  \r\n[![this is the rfid reader][1]][1]\r\n\r\nCode from RfidReader Class\r\n\t\t\r\n\t\tpublic class RfidTagSearch{\r\n\t\t\tpublic String getReaderResult() {return inputReader.toString();}\r\n\t\t\tpublic String getResult() {return res;}\r\n\t\t\tpublic String getTags() {return strBuff.toString();}\r\n\t\t\tpublic String getStrResult() {return strResult.toString();}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tpublic ArrayList&lt;String&gt; getSeenKey(){\r\n\t\t\t\tArrayList&lt;String&gt; temp = rfidKey;\r\n\t\t\t\trfidKey.clear();\r\n\t\t\t\treturn temp;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tpublic void connectToReader(String host, int _port) throws Exception{\r\n\t\t\r\n\t\t\t\thostName = host;\r\n\t\t\t\tport = _port;\r\n\t\t\t\tmyReader.Dispose();\r\n\t\t\t\tmyReader = new RFIDReader();\r\n\t\t\t\t\r\n\t\t\t\tmyReader.setHostName(hostName);\r\n\t\t\t\tmyReader.setPort(port);\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t\r\n\t\t\t\t\tmyReader.connect();\r\n\t\t\r\n\t\t\t\t\tmyReader.Events.setInventoryStartEvent(true);\r\n\t\t\t\t\tmyReader.Events.setInventoryStopEvent(true);\r\n\t\t\t\t\tmyReader.Events.setAccessStartEvent(true);\r\n\t\t\t\t\tmyReader.Events.setAccessStopEvent(true);\r\n\t\t\t\t\tmyReader.Events.setAntennaEvent(true);\r\n\t\t\t\t\tmyReader.Events.setGPIEvent(true);\r\n\t\t\t\t\tmyReader.Events.setBufferFullEvent(true);\r\n\t\t\t\t\tmyReader.Events.setBufferFullWarningEvent(true);\r\n\t\t\t\t\tmyReader.Events.setReaderDisconnectEvent(true);\r\n\t\t\t\t\tmyReader.Events.setReaderExceptionEvent(true);\r\n\t\t\t\t\tmyReader.Events.setTagReadEvent(true);\r\n\t\t\t\t\tmyReader.Events.setAttachTagDataWithReadEvent(false);\r\n\t\t                        \r\n\t\t                        TagStorageSettings tagStorageSettings = myReader.Config.getTagStorageSettings();\r\n\t\t                        tagStorageSettings.discardTagsOnInventoryStop(true);\r\n\t\t                        myReader.Config.setTagStorageSettings(tagStorageSettings);\r\n\t\t\r\n\t\t\t\t\tmyReader.Events.addEventsListener(new EventsHandler());\r\n\t\t\t\t\t\r\n\t\t\t\t\tisConnected = true;\r\n\t\t\t\t\tstrResult.append(&quot;Connected to &quot; + hostName + &quot;\\n&quot;);\r\n\t\t\t\t\t//strResult.append(API_SUCCESS);\r\n\t\t\t\t\tmyReader.Config.setTraceLevel(TRACE_LEVEL.TRACE_LEVEL_ERROR);\r\n\t\t\t\t\tres = &quot;Success&quot;;\r\n\t\t\r\n\t\t\t\t} catch (InvalidUsageException ex)\r\n\t\t                {\r\n\t\t\t\t    strResult.append(PARAM_ERROR +  ex.getVendorMessage());\r\n\t\t\t\t} catch (OperationFailureException ex) {\r\n\t\t\t\t\tstrResult.append(ex.getStatusDescription() +\r\n\t\t\t\t\t\t\tex.getVendorMessage());\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tpublic Boolean isConnected() { return isConnected;}\r\n\t\t\t\r\n\t\t\tpublic void disconnectToReader() throws Exception{\r\n\t\t\t\t\r\n\t\t\t\tmyReader = new RFIDReader();\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate Boolean isScanning = false;\r\n\t\t\t// start Scanning\r\n\t\t\tpublic void startScanning() throws InterruptedException,InvalidUsageException,OperationFailureException\r\n\t\t\t{\r\n\t\t\t\t   tagStore.clear();\r\n\t\t           myReader.Actions.Inventory.perform();     \r\n\t\t    }\r\n\t\t\t\r\n\t\t\tpublic void stopScanning() throws InvalidUsageException, OperationFailureException, InterruptedException{\r\n\t\t\t\t\r\n\t\t\t\tmyReader.Actions.Inventory.stop();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tString saveDir = &quot;&quot;, fileName = &quot;&quot;;\r\n\t\t\t\r\n\t\t\tpublic void setSaveDirectory(String value) {\r\n\t\t\t\tsaveDir = value;\r\n\t\t \t}\r\n\t\t\t\r\n\t\t\tpublic long getTagCount() {return totalTags;}\r\n\t\t\t\r\n\t\t\t// getting current time and date\r\n\t\t\t\tpublic String getDateandTime(){\r\n\t\t\t\t\tString res = &quot;&quot;;\r\n\t\t\t\t\tLocalDateTime myDateObj = LocalDateTime.now();\r\n\t\t\t\t    DateTimeFormatter myFormatObj = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n\t\t\t\t    String formattedDate = myDateObj.format(myFormatObj);\r\n\t\t\t\t    \r\n\t\t\t\t    res = formattedDate.toString();\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tint Switch=0,tempVal=0;\r\n\t\t\t\t\r\n\t\t\t\tpublic void setTimer(int minute){\r\n\t\t\t\t\t\r\n\t\t\t\t\tlong timeInterval = minute * 60 * 1000;\r\n\t\t\t\t\ttimer = new Timer();\r\n\t\t\t\t\ttimer.scheduleAtFixedRate(new TimerTask() {\r\n\t\t\t\t\t\t  @Override\r\n\t\t\t\t\t\t  public void run() {\r\n\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t  Switch++;\r\n\t\t\t\t\t\t  \r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t}, timeInterval, timeInterval);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tFileWriter fw;\r\n\t\t\r\n\t\t\tpublic class EventsHandler implements RfidEventsListener\r\n\t\t    {\r\n\t\t    \tpublic EventsHandler()\r\n\t\t    \t{\r\n\t\t    \t\tfileName = getDateandTime().replace(&quot;:&quot;, &quot;-&quot;) + &quot;.txt&quot;;\t\r\n\t\t    \t}\r\n\t\t    \t\r\n\t\t    \t\r\n\t\t    \t   \t\r\n\t\t    \t public void eventReadNotify(RfidReadEvents e){\r\n\t\t\r\n\t\t    \t\t TagDataArray oTagDataArray = myReader.Actions.getReadTagsEx(1000);\r\n\t\t    \t\t\tmyTags = oTagDataArray.getTags();\r\n\t\t       \t\t\t\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t fw = new FileWriter(saveDir + &quot;/&quot; + fileName,true);\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (myTags != null)\r\n\t\t\t    \t\t\t{\r\n\t\t\r\n\t\t\t\t\t\t\t\tfor (int index = 0; index &lt; oTagDataArray.getLength(); index++) \r\n\t\t\t\t\t\t\t\t {\r\n\t\t\t\t\t\t\t\t\t if (Switch != tempVal) {\r\n\t\t\t\t\t\t\t\t\t\t tempVal = Switch;\r\n\t\t\t\t\t\t\t\t\t\t fileName = getDateandTime().replace(&quot;:&quot;, &quot;-&quot;) + &quot;.txt&quot;;\r\n\t\t\t\t\t\t\t\t\t\t fw = new FileWriter(saveDir + &quot;/&quot; + fileName,true);\r\n\t\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t TagData tag = myTags[index];\r\n\t\t\t\t\t\t\t\t\t String key = tag.getTagID();\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t String subStr = key.substring(key.length() - 6,key.length());\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t res = mysql.validateRfidKey(subStr);\r\n\t\t\t\t\t\t\t\t\t if (res.equals(&quot;Found&quot;)){\r\n\t\t\t\t\t\t\t\t\t\t res = mysql.updateLastSeen(subStr, getDateandTime());\r\n\t\t\t\t\t\t\t\t\t\t res = mysql.searchAllData(subStr);\r\n\t\t\t\t\t\t\t\t\t\t if (res.equals(&quot;Found&quot;)){\r\n\t\t\t\t\t\t\t\t\t\t\t if (mysql.getStatus().equals(&quot;1&quot;)){\r\n\t\t\t\t\t\t\t\t\t\t\t\t rfidKey.add(subStr);\r\n\t\t\t\t\t\t\t\t\t\t\t\t key = key + &quot; - THIS KEY IS FOUND&quot;;\r\n\t\t\t\t\t\t\t\t\t\t\t }\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t\t else{\r\n\t\t\t\t\t\t\t\t\t\t res = mysql.searchUnregisteredKey(subStr);\r\n\t\t\t\t\t\t\t\t\t\t if (res.equals(&quot;Found&quot;)) {\r\n\t\t\t\t\t\t\t\t\t\t\t key = key + &quot; - UNREGISTERED KEY&quot;;\r\n\t\t\r\n\t\t\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t\t\t else {\r\n\t\t\t\t\t\t\t\t\t\t\t key = key + &quot; -NEW UNREGISTERED KEY&quot;;\r\n\t\t\t\t\t\t\t\t\t\t\t res = mysql.saveUnregisteredKey(subStr, getDateandTime());\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t\t }\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t \t\t\t\t\t\t fw.write(getDateandTime() +&quot; : &quot;+ key + System.getProperty( &quot;line.separator&quot;)); // THE DATA OF THE READER WILL BE INPUTTED HERE AND WILL BE SAVE TO LOCAL PC\t\t\t\t  \t\t\r\n\t\t\t\t\t\t\t\t\t totalTags++;\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t \t    \t\t\t\t\r\n\t\t\t    \t\t\t\t\r\n\t\t\t    \t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tfw.write(&quot;empty tag&quot;);;\r\n\t\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\t\tfw.flush();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfw.close();\r\n\t\t\t\t\t\t\tSystem.gc();\r\n\t\t\t\t\t\t\tRuntime.getRuntime().gc();\r\n\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t} catch (IOException e1) {\r\n\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\tSystem.out.print(&quot;Error in RFID tag search&quot;);\r\n\t\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t\t} \t \r\n\t\t\r\n\t\t    \t    }\r\n\t\t\r\n\t\t    \t    // Status Event Notification\r\n\t\t\r\n\t\t    \t    public void eventStatusNotify(RfidStatusEvents e) {\r\n\t\t\r\n\t\t    \t        System.out.println(&quot;Status Notification &quot; + e.StatusEventData.getStatusEventType());\r\n\t\t\r\n\t\t    \t    }\r\n\t\t    }\r\n\t\t   \r\n\t\t} \r\nCode from JTable\r\n\t\t\r\n\t\tpublic class RFIDReaderClient extends JFrame {\r\n\t\t\r\n\t\t\tprivate JPanel contentPane;\r\n\t\t\tprivate JTextField txtIP;\r\n\t\t\tprivate JTextField txtPort;\r\n\t\t\tprivate JTextField txtTimeInterval;\r\n\t\t\tprivate JTextField txtSaveDir;\r\n\t\t\tprivate JTable ResTable;\r\n\t\t\t Object[] columns = {&quot;Stock Number&quot;,&quot;RFID Number&quot;,&quot;Date Last Seen&quot;,&quot;Date Removed&quot;,&quot;Vehicle Year&quot;,&quot;Color&quot;,&quot;Model&quot;};\r\n\t\t     DefaultTableModel model = new DefaultTableModel();\r\n\t\t     DefaultTableModel model1 = new DefaultTableModel();\r\n\t\t     \r\n\t\t     private JButton btnAdminPanel;\r\n\t\t     private JLabel lblLost;\r\n\t\t     private JTextField textField_4;\r\n\t\t     private JButton btnConnect;\r\n\t\t     private JButton btnStart;\r\n\t\t     private JButton btnStop;\r\n\t\t     private JLabel label;\r\n\t\t     private JLabel lbStatus;\r\n\t\t     Timer timer;\r\n\t\t \t RfidTagSearch rfid;\r\n\t\t\r\n\t\t \t \r\n\t\t \t SQLConnection mysql;\r\n\t\t \t Connection connection;\r\n\t\t \t private JTable tblResult;\r\n\t\t\r\n\t\t\t/**\r\n\t\t\t * Launch the application.\r\n\t\t\t */\r\n\t\t\tpublic static void main(String[] args) {\r\n\t\t\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tRFIDReaderClient frame = new RFIDReaderClient();\r\n\t\t\t\t\t\t\tframe.setVisible(true);\r\n\t\t\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\r\n\t\t\t/**\r\n\t\t\t * Create the frame.\r\n\t\t\t */\r\n\t\t\tpublic void setTable(){\r\n\t\t\t\t model  = new DefaultTableModel() {\r\n\t\t\t\t\t    @Override\r\n\t\t\t\t\t    public boolean isCellEditable(int row, int column) {\r\n\t\t\t\t\t       //all cells false\r\n\t\t\t\t\t       return false;\r\n\t\t\t\t\t    }\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t model1  = new DefaultTableModel() {\r\n\t\t\t\t\t    @Override\r\n\t\t\t\t\t    public boolean isCellEditable(int row, int column) {\r\n\t\t\t\t\t       //all cells false\r\n\t\t\t\t\t       return false;\r\n\t\t\t\t\t    }\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t     model.setColumnIdentifiers(columns);\r\n\t\t\t     ResTable.setModel(model);\r\n\t\t\t     \r\n\t\t\t     \tResTable.setBackground(Color.LIGHT_GRAY);\r\n\t\t\t     \tResTable.setForeground(Color.black);\r\n\t\t\t        Font font = new Font(&quot;&quot;,1,22);\r\n\t\t\t        ResTable.setFont(font);\r\n\t\t\t        ResTable.setRowHeight(30);\r\n\t\t\t        \r\n\t\t\t\t     model1.setColumnIdentifiers(columns);\r\n\t\t\t\t     tblResult.setModel(model1);\r\n\t\t\t\t     \r\n\t\t\t\t     tblResult.setBackground(Color.LIGHT_GRAY);\r\n\t\t\t\t     tblResult.setForeground(Color.black);\r\n\t\t\t\t        font = new Font(&quot;&quot;,1,22);\r\n\t\t\t\t        tblResult.setFont(font);\r\n\t\t\t\t        tblResult.setRowHeight(30);\r\n\t\t\t\t        \r\n\t\t\t        \r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tpublic RFIDReaderClient() {\r\n\t\t\t\tsetTitle(&quot;RFID Reader&quot;);\r\n\t\t\t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\t\tsetBounds(100, 100, 1245, 759);\r\n\t\t\t\tcontentPane = new JPanel();\r\n\t\t\t\tcontentPane.setBorder(new SoftBevelBorder(BevelBorder.LOWERED, null, null, null, null));\r\n\t\t\t\tsetContentPane(contentPane);\r\n\t\t\t\tcontentPane.setLayout(null);\r\n\t\t\t\tmysql = new SQLConnection();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconnection = mysql.connectDB();\r\n\t\t\t\t} catch (ClassNotFoundException | SQLException e2) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te2.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tJLabel lblIp = new JLabel(&quot;IP&quot;);\r\n\t\t\t\tlblIp.setFont(new Font(&quot;Tekton Pro Cond&quot;, Font.BOLD, 16));\r\n\t\t\t\tlblIp.setBounds(20, 11, 50, 22);\r\n\t\t\t\tcontentPane.add(lblIp);\r\n\t\t\t\t\r\n\t\t\t\tJLabel lblPort = new JLabel(&quot;Port&quot;);\r\n\t\t\t\tlblPort.setFont(new Font(&quot;Tekton Pro Cond&quot;, Font.BOLD, 16));\r\n\t\t\t\tlblPort.setBounds(186, 11, 50, 22);\r\n\t\t\t\tcontentPane.add(lblPort);\r\n\t\t\t\t\r\n\t\t\t\tJLabel lblTimeIntervalminutes = new JLabel(&quot;Time Interval (Minutes)&quot;);\r\n\t\t\t\tlblTimeIntervalminutes.setFont(new Font(&quot;Tekton Pro Cond&quot;, Font.BOLD, 16));\r\n\t\t\t\tlblTimeIntervalminutes.setBounds(268, 11, 248, 22);\r\n\t\t\t\tcontentPane.add(lblTimeIntervalminutes);\r\n\t\t\t\t\r\n\t\t\t\tJLabel lblSaveDirectory = new JLabel(&quot;Save Directory&quot;);\r\n\t\t\t\tlblSaveDirectory.setFont(new Font(&quot;Tekton Pro Cond&quot;, Font.BOLD, 16));\r\n\t\t\t\tlblSaveDirectory.setBounds(20, 67, 137, 22);\r\n\t\t\t\tcontentPane.add(lblSaveDirectory);\r\n\t\t\t\t\r\n\t\t\t\ttxtIP = new JTextField();\r\n\t\t\t\ttxtIP.setEditable(false);\r\n\t\t\t\ttxtIP.setText(&quot;169.254.10.1&quot;);\r\n\t\t\t\ttxtIP.setBounds(20, 34, 151, 22);\r\n\t\t\t\tcontentPane.add(txtIP);\r\n\t\t\t\ttxtIP.setColumns(10);\r\n\t\t\t\t\r\n\t\t\t\ttxtPort = new JTextField();\r\n\t\t\t\ttxtPort.setEditable(false);\r\n\t\t\t\ttxtPort.setText(&quot;5084&quot;);\r\n\t\t\t\ttxtPort.setColumns(10);\r\n\t\t\t\ttxtPort.setBounds(186, 35, 72, 22);\r\n\t\t\t\tcontentPane.add(txtPort);\r\n\t\t\t\t\r\n\t\t\t\ttxtTimeInterval = new JTextField();\r\n\t\t\t\ttxtTimeInterval.setColumns(10);\r\n\t\t\t\ttxtTimeInterval.setBounds(268, 35, 114, 22);\r\n\t\t\t\tcontentPane.add(txtTimeInterval);\r\n\t\t\t\t\r\n\t\t\t\ttxtSaveDir = new JTextField();\r\n\t\t\t\ttxtSaveDir.setColumns(10);\r\n\t\t\t\ttxtSaveDir.setBounds(20, 92, 341, 22);\r\n\t\t\t\tcontentPane.add(txtSaveDir);\r\n\t\t\t\t\r\n\t\t\t\tJButton btnBrowse = new JButton(&quot;Browse&quot;);\r\n\t\t\t\tbtnBrowse.addActionListener(new ActionListener() {\r\n\t\t\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tJFileChooser chooser = new JFileChooser();\r\n\t\t\t\t\t    chooser.setCurrentDirectory(new java.io.File(&quot;.&quot;));\r\n\t\t\t\t\t    chooser.setDialogTitle(&quot;Save Directory&quot;);\r\n\t\t\t\t\t    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);\r\n\t\t\t\t\t    chooser.setAcceptAllFileFilterUsed(false);\r\n\t\t\r\n\t\t\t\t\t    if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {\r\n\t\t\t\t\t    \r\n\t\t\t\t\t      txtSaveDir.setText(chooser.getSelectedFile().toString());\r\n\t\t\t\t\t    } else {\r\n\t\t\t\t\t      \r\n\t\t\t\t\t    }\r\n\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbtnBrowse.setBounds(371, 92, 114, 23);\r\n\t\t\t\tcontentPane.add(btnBrowse);\r\n\t\t\t\t\r\n\t\t\t\tJScrollPane scrollPane = new JScrollPane();\r\n\t\t\t\tscrollPane.setBounds(20, 146, 1201, 220);\r\n\t\t\t\tcontentPane.add(scrollPane);\r\n\t\t\t\t\r\n\t\t\t\tResTable = new JTable();\t\t\r\n\t\t\t\tResTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\r\n\t\t\r\n\t\t\t\tJScrollPane scrollPane_1 = new JScrollPane();\r\n\t\t\t\tscrollPane_1.setBounds(21, 387, 1053, 330);\r\n\t\t\t\tcontentPane.add(scrollPane_1);\r\n\t\t\t\t\r\n\t\t\t\ttblResult = new JTable();\r\n\t\t\t\ttblResult.addMouseListener(new MouseAdapter() {\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n\t\t\t\t\t\t if (e.getClickCount() == 2){\r\n\t\t\t\t\t\t\t\tint row=tblResult.rowAtPoint(e.getPoint());\r\n\t\t\t\t\t\t\t\tLogInForm lg = new LogInForm();\r\n\t\t\t\t\t\t\t\tlg.setHub(1);\r\n\t\t\t\t\t\t\t\tlg.setRfidKey(tblResult.getValueAt(row, 1).toString());\r\n\t\t\t\t\t\t\t\tlg.show();\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\r\n\t\t\t\tscrollPane_1.setViewportView(tblResult);\r\n\t\t\t\tsetTable();\r\n\t\t\t\tString[][] whitelist = mysql.loadActiveKeys();\r\n\t\t\r\n\t\t\t\tSimpleDateFormat format1 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);  \r\n\t\t\t\t\r\n\t\t\t\tfor (int a = 0; a&lt; whitelist.length;a++){\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (whitelist[a][8].length() &lt;5) {\r\n\t\t\t\t\t\t\tString Res = mysql.updateLastSeen(whitelist[a][1], getDateandTime());\r\n\t\t\t\t\t\t\taddRow(whitelist[a][0],whitelist[a][1], getDateandTime(),\r\n\t\t\t\t\t\t\t\t\twhitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model);\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tDate d = format1.parse(whitelist[a][2]);\r\n\t\t\t\t\t\t\tDate d1 = format1.parse(whitelist[a][8]);\t\t\t\t\t\t\t\t\r\n\t\t\r\n\t\t\t\t\t\t\tlong timeDiff = d1.getTime() - d.getTime();\r\n\t\t\t\t\t\t\tif (timeDiff &lt; 60000){\r\n\t\t\t\t\t\t\t\tString Res = mysql.updateLastSeen(whitelist[a][1], getDateandTime());\r\n\t\t\t\t\t\t\t\t\t\taddRow(whitelist[a][0],whitelist[a][1], getDateandTime(),\r\n\t\t\t\t\t\t\t\t\t\t\t\twhitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\taddRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\r\n\t\t\t\t\t\t\t\t\t\twhitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model1);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}catch(Exception e) {}\r\n\t\t\t\t}\r\n\t\t\t\t// testing the color\r\n\t\t\t\tsetCellBackground(Color.WHITE,1);\r\n\t\t\t\ttblResult.setBackground(Color.red);\r\n\t\t\t\t\r\n\t\t\t\t//=======================================\r\n\t\t\t\tscrollPane.setViewportView(ResTable);\r\n\t\t\t\t\r\n\t\t\t\tbtnAdminPanel = new JButton(&quot;Admin Panel&quot;);\r\n\t\t\t\tbtnAdminPanel.addActionListener(new ActionListener() {\r\n\t\t\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\t\t\tLogInForm login = new LogInForm();\r\n\t\t\t\t\t\tlogin.show();\r\n\t\t\t\t\t\tdispose();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbtnAdminPanel.setBounds(1084, 666, 137, 22);\r\n\t\t\t\tcontentPane.add(btnAdminPanel);\r\n\t\t\t\t\r\n\t\t\t\tlblLost = new JLabel(&quot;Lost&quot;);\r\n\t\t\t\tlblLost.setFont(new Font(&quot;Tekton Pro Cond&quot;, Font.BOLD, 16));\t\t\t\r\n\t\t\t\tlblLost.setBounds(1115, 633, 124, 22);\r\n\t\t\t\tcontentPane.add(lblLost);\r\n\t\t\t\t\r\n\t\t\t\ttextField_4 = new JTextField();\r\n\t\t\t\ttextField_4.setBackground(Color.RED);\r\n\t\t\t\ttextField_4.setColumns(10);\r\n\t\t\t\ttextField_4.setBounds(1084, 638, 21, 11);\r\n\t\t\t\tcontentPane.add(textField_4);\r\n\t\t\t\t\r\n\t\t\t\tbtnConnect = new JButton(&quot;Connect&quot;);\r\n\t\t\t\tbtnConnect.addActionListener(new ActionListener() {\r\n\t\t\t\t\tpublic void actionPerformed(ActionEvent arg0) {\r\n\t\t\t\t\t\tif ((txtSaveDir.getText().toString().equals(&quot;&quot;)) || (txtTimeInterval.getText().toString().equals(&quot;&quot;))) {\r\n\t\t\t\t\t\t\tshowMessage(&quot;PLEASE FILL OUT FIELDS&quot;);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\r\n\t\t\t\t\t\t\trfid = new RfidTagSearch();\r\n\t\t\t\t\t\t\tif (btnConnect.getText().toString().equals(&quot;Connect&quot;)) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (rfid.isConnected()) {\r\n\t\t\t\t\t\t\t\t\tlbStatus.setText(&quot;Reconnected to Reader&quot;);\r\n\t\t\t\t\t\t\t\t\tbtnConnect.setText(&quot;Disconnect&quot;);\r\n\t\t\t\t\t\t\t\t\tbtnStart.setEnabled(true);\r\n\t\t\t\t\t\t\t\t\tbtnStop.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\ttxtIP.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\ttxtPort.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\ttxtSaveDir.setEditable(false);\r\n\t\t\t\t\t\t\t\t\ttxtTimeInterval.setEditable(false);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\trfid.connectToReader(&quot;169.254.10.1&quot;,5084);\r\n\t\t\t\t\t\t\t\t\t\tlbStatus.setText(rfid.getStrResult());\r\n\t\t\t\t\t\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\t\t\t\tshowMessage(e.toString());\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tString res = rfid.getResult();\r\n\t\t\t\t\t\t\t\t\tif (res.equals(&quot;Success&quot;)) {\r\n\t\t\t\t\t\t\t\t\t\tbtnConnect.setText(&quot;Disconnect&quot;);\r\n\t\t\t\t\t\t\t\t\t\tbtnStart.setEnabled(true);\r\n\t\t\t\t\t\t\t\t\t\tbtnStop.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\t\ttxtIP.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\t\ttxtPort.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\t\ttxtSaveDir.setEditable(false);\r\n\t\t\t\t\t\t\t\t\t\ttxtTimeInterval.setEditable(false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {showMessage(rfid.getStrResult());}\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\trfid.disconnectToReader();\r\n\t\t\t\t\t\t\t\t\tlbStatus.setText(&quot;Disconnected to Reader&quot;);\r\n\t\t\t\t\t\t\t\t\tbtnConnect.setText(&quot;Connect&quot;);\r\n\t\t\t\t\t\t\t\t\tbtnStart.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\tbtnStop.setEnabled(false);\r\n\t\t\t\t\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\t\t\tshowMessage(e.toString());\r\n\t\t\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbtnConnect.setBounds(1099, 429, 122, 41);\r\n\t\t\t\tcontentPane.add(btnConnect);\r\n\t\t\t\t\r\n\t\t\r\n\t\t\t\tbtnStart = new JButton(&quot;Start&quot;);\r\n\t\t\t\tbtnStart.addActionListener(new ActionListener() {\r\n\t\t\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tbtnStop.setEnabled(true);\r\n\t\t\t\t\t\t\tbtnConnect.setEnabled(false);\r\n\t\t\t\t\t\t\tbtnStart.setEnabled(false);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\trfid.setSaveDirectory(txtSaveDir.getText().toString());\r\n\t\t\t\t\t\t\trfid.startScanning();\r\n\t\t\t\t\t\t\trfid.setTimer(Integer.valueOf(txtTimeInterval.getText().toString()));\r\n\t\t\t\t\t\t\tstartTmer();\r\n\t\t\t\t\t\t\tlbStatus.setText(&quot;Scan Started&quot;);\r\n\t\t\t\t\t\t\tSystem.out.println(getDateandTime());\r\n\t\t\t\t\t\t} catch (InterruptedException | InvalidUsageException | OperationFailureException e1) {\r\n\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\tshowMessage(e1.toString());\r\n\t\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbtnStart.setEnabled(false);\r\n\t\t\t\tbtnStart.setBounds(1099, 487, 122, 41);\r\n\t\t\t\tcontentPane.add(btnStart);\r\n\t\t\t\t\r\n\t\t\t\tbtnStop = new JButton(&quot;Stop&quot;);\r\n\t\t\t\tbtnStop.addActionListener(new ActionListener() {\r\n\t\t\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\trfid.stopScanning();\r\n\t\t\t\t\t\t\tlbStatus.setText(&quot;Scanning Stopped&quot;);\r\n\t\t\t\t\t\t\tbtnStop.setEnabled(false);\r\n\t\t\t\t\t\t\tbtnStart.setEnabled(true);\r\n\t\t\t\t\t\t\tbtnConnect.setEnabled(true);\r\n\t\t\t\t\t\t\ttimer.cancel();\r\n\t\t\t\t\t\t} catch (InvalidUsageException | OperationFailureException | InterruptedException e1) {\r\n\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\tshowMessage(e1.toString());\r\n\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbtnStop.setEnabled(false);\r\n\t\t\t\tbtnStop.setBounds(1099, 550, 122, 41);\r\n\t\t\t\tcontentPane.add(btnStop);\r\n\t\t\t\t\r\n\t\t\t\tlabel = new JLabel(&quot;Status : &quot;);\r\n\t\t\t\tlabel.setForeground(new Color(204, 0, 0));\r\n\t\t\t\tlabel.setFont(new Font(&quot;Tekton Pro Cond&quot;, Font.BOLD, 20));\r\n\t\t\t\tlabel.setBounds(409, 38, 107, 22);\r\n\t\t\t\tcontentPane.add(label);\r\n\t\t\t\t\r\n\t\t\t\tlbStatus = new JLabel(&quot;Not Connected&quot;);\r\n\t\t\t\tlbStatus.setFont(new Font(&quot;Tekton Pro Cond&quot;, Font.BOLD, 16));\r\n\t\t\t\tlbStatus.setBounds(526, 32, 212, 26);\r\n\t\t\t\tcontentPane.add(lbStatus);\r\n\t\t\t\t\r\n\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Adding row to the table\r\n\t\t\tpublic void addRow(String stockNum, String rfidNum, String DateLastSeen, String DateLost, String year,String color, String Model, DefaultTableModel model){\r\n\t\t\t\tObject[] row = new Object[7];\r\n\t\t\t\trow[0] = stockNum;\r\n\t\t\t\trow[1] = rfidNum;\r\n\t\t\t\trow[2] = DateLastSeen.substring(5, DateLastSeen.length());\r\n\t\t\t\trow[3] = DateLost;\r\n\t\t\t\trow[4] = year;\r\n\t\t\t\trow[5] = color;\r\n\t\t\t\trow[6] = Model;\r\n\t\t\t\t\r\n\t\t\t\tmodel.insertRow(0,row);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t// setting background of the table\r\n\t\t\tpublic void setCellBackground(Color color, int stat){\r\n\t\t\t\tResTable.setDefaultRenderer(Object.class, new DefaultTableCellRenderer()\r\n\t\t\t\t{\r\n\t\t\t\t    @Override\r\n\t\t\t\t    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)\r\n\t\t\t\t    {\r\n\t\t\t\t        final Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n\t\t\t\t        if (stat == 0){\r\n\t\t\t\t        \tc.setForeground(color);\r\n\t\t\r\n\t\t\t\t        }\r\n\t\t\t\t        else{\r\n\t\t\t\t        \tc.setForeground(Color.black);\t\t        \t\r\n\t\t\t\t        }\r\n\t\t\t\t        return c;\r\n\t\t\t\t    }\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\r\n\t\t\t\r\n\t\t\tpublic void showMessage(String mess){\r\n\t\t\t\tJOptionPane.showMessageDialog(null, mess,&quot;Error&quot;,JOptionPane.INFORMATION_MESSAGE);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tArrayList&lt;String&gt; key;\r\n\t\t\tArrayList&lt;String&gt; lost = new ArrayList&lt;&gt;();\r\n\t\t\tSimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;); \r\n\t\t\tpublic void startTmer(){\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(2000);\r\n\t\t\t\t} catch (InterruptedException e1) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t\ttimer = new Timer();\r\n\t\t\t\ttimer.scheduleAtFixedRate(new TimerTask() {\r\n\t\t\t\t\t  @Override\r\n\t\t\t\t\t  public void run() {\r\n\t\t\t\t\t\t  \t\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tkey = rfid.getSeenKey();\r\n\t\t\t\t\t\t\tif (key.size() &gt; 0) {\r\n\t\t\t\t\t\t\t\tfor (int c=0;c&lt;key.size();c++) {\r\n\t\t\t\t\t\t\t\t\tString r = mysql.updateLastSeen(key.get(c), getDateandTime());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tkey.clear();\r\n\t\t\t\t\t\t  \r\n\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\tString[][] whitelist = mysql.loadActiveKeys();\r\n\t\t\t\t\t\t\tif (whitelist.length &gt; 0) {\r\n\t\t\r\n\t\t\t\t\t\t\t\tResTable.removeAll();\r\n\t\t\t\t\t\t\t\tmodel.setRowCount(0);\r\n\t\t\t\t\t\t\t\ttblResult.removeAll();\r\n\t\t\t\t\t\t\t\tmodel1.setRowCount(0);\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\tfor (int a = 0; a&lt; whitelist.length;a++){\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tDate d = format.parse(whitelist[a][2]);\r\n\t\t\t\t\t\t\t\t\t\tDate d1;\r\n\t\t\t\t\t\t\t\t\t\tif (whitelist[a][8].length() &lt;5) {\r\n\t\t\t\t\t\t\t\t\t\t\td1 = format.parse(getDateandTime());\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\td1 = format.parse(whitelist[a][8]);\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlong timeDiff = d1.getTime() - d.getTime();\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif (timeDiff &lt; 60000){\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\taddRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twhitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model);\r\n\t\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\t\tif (lost.size() &lt;= 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlost.add(whitelist[a][1]);\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (whitelist[a][8].length() &lt;=5) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tString res = mysql.updateLostDate(whitelist[a][1], getDateandTime());\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.equals(&quot;Success&quot;))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taddRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twhitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tSystem.out.println(res);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taddRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twhitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model1);\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (int b = 0; b&lt;lost.size();b++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (lost.get(b).equals(whitelist[a][1])) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (whitelist[a][8].length() &lt;=5) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tString res = mysql.updateLostDate(whitelist[a][1], getDateandTime());\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//log.write(getDateandTime() +&quot;,&quot; + whitelist[a][2] + System.getProperty( &quot;line.separator&quot;));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.equals(&quot;Success&quot;))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taddRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twhitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSystem.out.println(res);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//log.write(whitelist[a][8] +&quot;,&quot; + whitelist[a][2] + System.getProperty( &quot;line.separator&quot;));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taddRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twhitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model1);\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t} catch (ParseException e) {\r\n\t\t\t\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\t\t\t\tSystem.out.println(&quot;inside catch &quot; + getDateandTime());\r\n\t\t\t\t\t\t\t\t\t\tSystem.out.print(e.toString());\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlost.clear();\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t  \r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}, 1000, 1000);\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tpublic String getDateandTime(){\r\n\t\t\t\tString res = &quot;&quot;;\r\n\t\t\t\tLocalDateTime myDateObj = LocalDateTime.now();\r\n\t\t\t    DateTimeFormatter myFormatObj = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n\t\t\t    String formattedDate = myDateObj.format(myFormatObj);\r\n\t\t\t    \r\n\t\t\t    res = formattedDate.toString();\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t}\r\n\r\nError Log\r\n\r\n\t\tStatus Notification INVENTORY_START_EVENT\r\n\t\t2019-12-09 05:54:55\r\n\t\tException in thread &quot;AWT-EventQueue-0&quot; java.lang.ArrayIndexOutOfBoundsException: 0 &gt;= 0\r\n\t\t\tat java.util.Vector.elementAt(Unknown Source)\r\n\t\t\tat javax.swing.table.DefaultTableModel.getValueAt(Unknown Source)\r\n\t\t\tat javax.swing.JTable.getValueAt(Unknown Source)\r\n\t\t\tat javax.swing.JTable.prepareRenderer(Unknown Source)\r\n\t\t\tat javax.swing.plaf.basic.BasicTableUI.paintCell(Unknown Source)\r\n\t\t\tat javax.swing.plaf.basic.BasicTableUI.paintCells(Unknown Source)\r\n\t\t\tat javax.swing.plaf.basic.BasicTableUI.paint(Unknown Source)\r\n\t\t\tat javax.swing.plaf.ComponentUI.update(Unknown Source)\r\n\t\t\tat javax.swing.JComponent.paintComponent(Unknown Source)\r\n\t\t\tat javax.swing.JComponent.paint(Unknown Source)\r\n\t\t\tat javax.swing.JComponent.paintToOffscreen(Unknown Source)\r\n\t\t\tat javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown Source)\r\n\t\t\tat javax.swing.RepaintManager$PaintManager.paint(Unknown Source)\r\n\t\t\tat javax.swing.RepaintManager.paint(Unknown Source)\r\n\t\t\tat javax.swing.JComponent._paintImmediately(Unknown Source)\r\n\t\t\tat javax.swing.JComponent.paintImmediately(Unknown Source)\r\n\t\t\tat javax.swing.RepaintManager$4.run(Unknown Source)\r\n\t\t\tat javax.swing.RepaintManager$4.run(Unknown Source)\r\n\t\t\tat java.security.AccessController.doPrivileged(Native Method)\r\n\t\t\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)\r\n\t\t\tat javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)\r\n\t\t\tat javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)\r\n\t\t\tat javax.swing.RepaintManager.prePaintDirtyRegions(Unknown Source)\r\n\t\t\tat javax.swing.RepaintManager.access$1200(Unknown Source)\r\n\t\t\tat javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)\r\n\t\t\tat java.awt.event.InvocationEvent.dispatch(Unknown Source)\r\n\t\t\tat java.awt.EventQueue.dispatchEventImpl(Unknown Source)\r\n\t\t\tat java.awt.EventQueue.access$500(Unknown Source)\r\n\t\t\tat java.awt.EventQueue$3.run(Unknown Source)\r\n\t\t\tat java.awt.EventQueue$3.run(Unknown Source)\r\n\t\t\tat java.security.AccessController.doPrivileged(Native Method)\r\n\t\t\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)\r\n\t\t\tat java.awt.EventQueue.dispatchEvent(Unknown Source)\r\n\t\t\tat java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)\r\n\t\t\tat java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)\r\n\t\t\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)\r\n\t\t\tat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\r\n\t\t\tat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\r\n\t\t\tat java.awt.EventDispatchThread.run(Unknown Source)\r\n\t\t\r\n\r\n  [1]: https://i.stack.imgur.com/83mbV.jpg","title":"Java Memory Leak - Deleting Garbage Collection","body":"<p>I have created an application using java swing in where a timer is scheduled to save the scanned tags in an RFID reader into db each second and display it the active tag in the jtable to what time it was been seen.Currenly using FileWriter The application needs to continously run.\n  FileWriter writer = new FileWriter(\"text.txt\", true); // this is to save the tags into a text file aside from saving the tags in the database.</p>\n\n<p>I have tried using the the answers in the previous post here like flushing the writer, closing it and calling garbage collector in runtime.</p>\n\n<p>as you can see from the image, the application has consumed 1.2gb of memory which is the real issue.</p>\n\n<p>The problem is it gives me a heap space out of memory error within 12 hours and there is no backtrace for it for me to see where the leak is coming from. Is there a way to delete the collected garbage from JVM to keep the memory free?</p>\n\n<p>The behavior of the application is that by time passess, it's consuption to physical memory of PC get's larger and larger. which results to heap space overload. </p>\n\n<p>Currently using eclipse Neon</p>\n\n<p><a href=\"https://i.stack.imgur.com/83mbV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/83mbV.jpg\" alt=\"this is the rfid reader\"></a></p>\n\n<p>Code from RfidReader Class</p>\n\n<pre><code>    public class RfidTagSearch{\n        public String getReaderResult() {return inputReader.toString();}\n        public String getResult() {return res;}\n        public String getTags() {return strBuff.toString();}\n        public String getStrResult() {return strResult.toString();}\n\n\n        public ArrayList&lt;String&gt; getSeenKey(){\n            ArrayList&lt;String&gt; temp = rfidKey;\n            rfidKey.clear();\n            return temp;\n        }\n\n\n\n        public void connectToReader(String host, int _port) throws Exception{\n\n            hostName = host;\n            port = _port;\n            myReader.Dispose();\n            myReader = new RFIDReader();\n\n            myReader.setHostName(hostName);\n            myReader.setPort(port);\n\n            try {\n\n                myReader.connect();\n\n                myReader.Events.setInventoryStartEvent(true);\n                myReader.Events.setInventoryStopEvent(true);\n                myReader.Events.setAccessStartEvent(true);\n                myReader.Events.setAccessStopEvent(true);\n                myReader.Events.setAntennaEvent(true);\n                myReader.Events.setGPIEvent(true);\n                myReader.Events.setBufferFullEvent(true);\n                myReader.Events.setBufferFullWarningEvent(true);\n                myReader.Events.setReaderDisconnectEvent(true);\n                myReader.Events.setReaderExceptionEvent(true);\n                myReader.Events.setTagReadEvent(true);\n                myReader.Events.setAttachTagDataWithReadEvent(false);\n\n                            TagStorageSettings tagStorageSettings = myReader.Config.getTagStorageSettings();\n                            tagStorageSettings.discardTagsOnInventoryStop(true);\n                            myReader.Config.setTagStorageSettings(tagStorageSettings);\n\n                myReader.Events.addEventsListener(new EventsHandler());\n\n                isConnected = true;\n                strResult.append(\"Connected to \" + hostName + \"\\n\");\n                //strResult.append(API_SUCCESS);\n                myReader.Config.setTraceLevel(TRACE_LEVEL.TRACE_LEVEL_ERROR);\n                res = \"Success\";\n\n            } catch (InvalidUsageException ex)\n                    {\n                strResult.append(PARAM_ERROR +  ex.getVendorMessage());\n            } catch (OperationFailureException ex) {\n                strResult.append(ex.getStatusDescription() +\n                        ex.getVendorMessage());\n            }\n\n        }\n\n        public Boolean isConnected() { return isConnected;}\n\n        public void disconnectToReader() throws Exception{\n\n            myReader = new RFIDReader();\n\n        }\n\n        private Boolean isScanning = false;\n        // start Scanning\n        public void startScanning() throws InterruptedException,InvalidUsageException,OperationFailureException\n        {\n               tagStore.clear();\n               myReader.Actions.Inventory.perform();     \n        }\n\n        public void stopScanning() throws InvalidUsageException, OperationFailureException, InterruptedException{\n\n            myReader.Actions.Inventory.stop();\n\n        }\n\n        String saveDir = \"\", fileName = \"\";\n\n        public void setSaveDirectory(String value) {\n            saveDir = value;\n        }\n\n        public long getTagCount() {return totalTags;}\n\n        // getting current time and date\n            public String getDateandTime(){\n                String res = \"\";\n                LocalDateTime myDateObj = LocalDateTime.now();\n                DateTimeFormatter myFormatObj = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\");\n                String formattedDate = myDateObj.format(myFormatObj);\n\n                res = formattedDate.toString();\n                return res;\n            }\n\n            int Switch=0,tempVal=0;\n\n            public void setTimer(int minute){\n\n                long timeInterval = minute * 60 * 1000;\n                timer = new Timer();\n                timer.scheduleAtFixedRate(new TimerTask() {\n                      @Override\n                      public void run() {\n\n                          Switch++;\n\n                      }\n                    }, timeInterval, timeInterval);\n\n\n            }\n\n\n        FileWriter fw;\n\n        public class EventsHandler implements RfidEventsListener\n        {\n            public EventsHandler()\n            {\n                fileName = getDateandTime().replace(\":\", \"-\") + \".txt\"; \n            }\n\n\n\n             public void eventReadNotify(RfidReadEvents e){\n\n                 TagDataArray oTagDataArray = myReader.Actions.getReadTagsEx(1000);\n                    myTags = oTagDataArray.getTags();\n\n                    try {\n                     fw = new FileWriter(saveDir + \"/\" + fileName,true);                    \n                        if (myTags != null)\n                        {\n\n                            for (int index = 0; index &lt; oTagDataArray.getLength(); index++) \n                             {\n                                 if (Switch != tempVal) {\n                                     tempVal = Switch;\n                                     fileName = getDateandTime().replace(\":\", \"-\") + \".txt\";\n                                     fw = new FileWriter(saveDir + \"/\" + fileName,true);\n                                 }\n\n                                 TagData tag = myTags[index];\n                                 String key = tag.getTagID();\n\n                                 String subStr = key.substring(key.length() - 6,key.length());\n\n                                 res = mysql.validateRfidKey(subStr);\n                                 if (res.equals(\"Found\")){\n                                     res = mysql.updateLastSeen(subStr, getDateandTime());\n                                     res = mysql.searchAllData(subStr);\n                                     if (res.equals(\"Found\")){\n                                         if (mysql.getStatus().equals(\"1\")){\n                                             rfidKey.add(subStr);\n                                             key = key + \" - THIS KEY IS FOUND\";\n                                         }                                   \n                                     }\n                                 }\n                                 else{\n                                     res = mysql.searchUnregisteredKey(subStr);\n                                     if (res.equals(\"Found\")) {\n                                         key = key + \" - UNREGISTERED KEY\";\n\n                                     }\n                                     else {\n                                         key = key + \" -NEW UNREGISTERED KEY\";\n                                         res = mysql.saveUnregisteredKey(subStr, getDateandTime());                                  \n                                     }\n                                 }                               \n\n                                 fw.write(getDateandTime() +\" : \"+ key + System.getProperty( \"line.separator\")); // THE DATA OF THE READER WILL BE INPUTTED HERE AND WILL BE SAVE TO LOCAL PC                       \n                                 totalTags++;\n\n                             }\n\n\n\n                        }\n                        else {\n                            fw.write(\"empty tag\");;\n                        }\n\n                        fw.flush();\n\n                        fw.close();\n                        System.gc();\n                        Runtime.getRuntime().gc();\n\n\n\n                    } catch (IOException e1) {\n                        // TODO Auto-generated catch block\n                        System.out.print(\"Error in RFID tag search\");\n                        e1.printStackTrace();\n                    }    \n\n                }\n\n                // Status Event Notification\n\n                public void eventStatusNotify(RfidStatusEvents e) {\n\n                    System.out.println(\"Status Notification \" + e.StatusEventData.getStatusEventType());\n\n                }\n        }\n\n    } \n</code></pre>\n\n<p>Code from JTable</p>\n\n<pre><code>    public class RFIDReaderClient extends JFrame {\n\n        private JPanel contentPane;\n        private JTextField txtIP;\n        private JTextField txtPort;\n        private JTextField txtTimeInterval;\n        private JTextField txtSaveDir;\n        private JTable ResTable;\n         Object[] columns = {\"Stock Number\",\"RFID Number\",\"Date Last Seen\",\"Date Removed\",\"Vehicle Year\",\"Color\",\"Model\"};\n         DefaultTableModel model = new DefaultTableModel();\n         DefaultTableModel model1 = new DefaultTableModel();\n\n         private JButton btnAdminPanel;\n         private JLabel lblLost;\n         private JTextField textField_4;\n         private JButton btnConnect;\n         private JButton btnStart;\n         private JButton btnStop;\n         private JLabel label;\n         private JLabel lbStatus;\n         Timer timer;\n         RfidTagSearch rfid;\n\n\n         SQLConnection mysql;\n         Connection connection;\n         private JTable tblResult;\n\n        /**\n         * Launch the application.\n         */\n        public static void main(String[] args) {\n            EventQueue.invokeLater(new Runnable() {\n                public void run() {\n                    try {\n                        RFIDReaderClient frame = new RFIDReaderClient();\n                        frame.setVisible(true);\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n                }\n            });\n        }\n\n        /**\n         * Create the frame.\n         */\n        public void setTable(){\n             model  = new DefaultTableModel() {\n                    @Override\n                    public boolean isCellEditable(int row, int column) {\n                       //all cells false\n                       return false;\n                    }\n            };\n\n             model1  = new DefaultTableModel() {\n                    @Override\n                    public boolean isCellEditable(int row, int column) {\n                       //all cells false\n                       return false;\n                    }\n            };\n\n\n             model.setColumnIdentifiers(columns);\n             ResTable.setModel(model);\n\n                ResTable.setBackground(Color.LIGHT_GRAY);\n                ResTable.setForeground(Color.black);\n                Font font = new Font(\"\",1,22);\n                ResTable.setFont(font);\n                ResTable.setRowHeight(30);\n\n                 model1.setColumnIdentifiers(columns);\n                 tblResult.setModel(model1);\n\n                 tblResult.setBackground(Color.LIGHT_GRAY);\n                 tblResult.setForeground(Color.black);\n                    font = new Font(\"\",1,22);\n                    tblResult.setFont(font);\n                    tblResult.setRowHeight(30);\n\n\n        }\n\n        public RFIDReaderClient() {\n            setTitle(\"RFID Reader\");\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            setBounds(100, 100, 1245, 759);\n            contentPane = new JPanel();\n            contentPane.setBorder(new SoftBevelBorder(BevelBorder.LOWERED, null, null, null, null));\n            setContentPane(contentPane);\n            contentPane.setLayout(null);\n            mysql = new SQLConnection();\n            try {\n                connection = mysql.connectDB();\n            } catch (ClassNotFoundException | SQLException e2) {\n                // TODO Auto-generated catch block\n                e2.printStackTrace();\n            }\n\n            JLabel lblIp = new JLabel(\"IP\");\n            lblIp.setFont(new Font(\"Tekton Pro Cond\", Font.BOLD, 16));\n            lblIp.setBounds(20, 11, 50, 22);\n            contentPane.add(lblIp);\n\n            JLabel lblPort = new JLabel(\"Port\");\n            lblPort.setFont(new Font(\"Tekton Pro Cond\", Font.BOLD, 16));\n            lblPort.setBounds(186, 11, 50, 22);\n            contentPane.add(lblPort);\n\n            JLabel lblTimeIntervalminutes = new JLabel(\"Time Interval (Minutes)\");\n            lblTimeIntervalminutes.setFont(new Font(\"Tekton Pro Cond\", Font.BOLD, 16));\n            lblTimeIntervalminutes.setBounds(268, 11, 248, 22);\n            contentPane.add(lblTimeIntervalminutes);\n\n            JLabel lblSaveDirectory = new JLabel(\"Save Directory\");\n            lblSaveDirectory.setFont(new Font(\"Tekton Pro Cond\", Font.BOLD, 16));\n            lblSaveDirectory.setBounds(20, 67, 137, 22);\n            contentPane.add(lblSaveDirectory);\n\n            txtIP = new JTextField();\n            txtIP.setEditable(false);\n            txtIP.setText(\"169.254.10.1\");\n            txtIP.setBounds(20, 34, 151, 22);\n            contentPane.add(txtIP);\n            txtIP.setColumns(10);\n\n            txtPort = new JTextField();\n            txtPort.setEditable(false);\n            txtPort.setText(\"5084\");\n            txtPort.setColumns(10);\n            txtPort.setBounds(186, 35, 72, 22);\n            contentPane.add(txtPort);\n\n            txtTimeInterval = new JTextField();\n            txtTimeInterval.setColumns(10);\n            txtTimeInterval.setBounds(268, 35, 114, 22);\n            contentPane.add(txtTimeInterval);\n\n            txtSaveDir = new JTextField();\n            txtSaveDir.setColumns(10);\n            txtSaveDir.setBounds(20, 92, 341, 22);\n            contentPane.add(txtSaveDir);\n\n            JButton btnBrowse = new JButton(\"Browse\");\n            btnBrowse.addActionListener(new ActionListener() {\n                public void actionPerformed(ActionEvent e) {\n\n                    JFileChooser chooser = new JFileChooser();\n                    chooser.setCurrentDirectory(new java.io.File(\".\"));\n                    chooser.setDialogTitle(\"Save Directory\");\n                    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);\n                    chooser.setAcceptAllFileFilterUsed(false);\n\n                    if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {\n\n                      txtSaveDir.setText(chooser.getSelectedFile().toString());\n                    } else {\n\n                    }\n\n                }\n            });\n            btnBrowse.setBounds(371, 92, 114, 23);\n            contentPane.add(btnBrowse);\n\n            JScrollPane scrollPane = new JScrollPane();\n            scrollPane.setBounds(20, 146, 1201, 220);\n            contentPane.add(scrollPane);\n\n            ResTable = new JTable();        \n            ResTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n\n            JScrollPane scrollPane_1 = new JScrollPane();\n            scrollPane_1.setBounds(21, 387, 1053, 330);\n            contentPane.add(scrollPane_1);\n\n            tblResult = new JTable();\n            tblResult.addMouseListener(new MouseAdapter() {\n                @Override\n                public void mouseClicked(MouseEvent e) {\n                     if (e.getClickCount() == 2){\n                            int row=tblResult.rowAtPoint(e.getPoint());\n                            LogInForm lg = new LogInForm();\n                            lg.setHub(1);\n                            lg.setRfidKey(tblResult.getValueAt(row, 1).toString());\n                            lg.show();\n\n                     }\n\n                }\n            });\n\n            scrollPane_1.setViewportView(tblResult);\n            setTable();\n            String[][] whitelist = mysql.loadActiveKeys();\n\n            SimpleDateFormat format1 = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");  \n\n            for (int a = 0; a&lt; whitelist.length;a++){\n                try {\n                    if (whitelist[a][8].length() &lt;5) {\n                        String Res = mysql.updateLastSeen(whitelist[a][1], getDateandTime());\n                        addRow(whitelist[a][0],whitelist[a][1], getDateandTime(),\n                                whitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model);\n                    }else {\n                        Date d = format1.parse(whitelist[a][2]);\n                        Date d1 = format1.parse(whitelist[a][8]);                               \n\n                        long timeDiff = d1.getTime() - d.getTime();\n                        if (timeDiff &lt; 60000){\n                            String Res = mysql.updateLastSeen(whitelist[a][1], getDateandTime());\n                                    addRow(whitelist[a][0],whitelist[a][1], getDateandTime(),\n                                            whitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model);\n                        }\n                        else {\n                            addRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\n                                    whitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model1);\n\n                        }\n                    }\n\n                }catch(Exception e) {}\n            }\n            // testing the color\n            setCellBackground(Color.WHITE,1);\n            tblResult.setBackground(Color.red);\n\n            //=======================================\n            scrollPane.setViewportView(ResTable);\n\n            btnAdminPanel = new JButton(\"Admin Panel\");\n            btnAdminPanel.addActionListener(new ActionListener() {\n                public void actionPerformed(ActionEvent e) {\n                    LogInForm login = new LogInForm();\n                    login.show();\n                    dispose();\n                }\n            });\n            btnAdminPanel.setBounds(1084, 666, 137, 22);\n            contentPane.add(btnAdminPanel);\n\n            lblLost = new JLabel(\"Lost\");\n            lblLost.setFont(new Font(\"Tekton Pro Cond\", Font.BOLD, 16));            \n            lblLost.setBounds(1115, 633, 124, 22);\n            contentPane.add(lblLost);\n\n            textField_4 = new JTextField();\n            textField_4.setBackground(Color.RED);\n            textField_4.setColumns(10);\n            textField_4.setBounds(1084, 638, 21, 11);\n            contentPane.add(textField_4);\n\n            btnConnect = new JButton(\"Connect\");\n            btnConnect.addActionListener(new ActionListener() {\n                public void actionPerformed(ActionEvent arg0) {\n                    if ((txtSaveDir.getText().toString().equals(\"\")) || (txtTimeInterval.getText().toString().equals(\"\"))) {\n                        showMessage(\"PLEASE FILL OUT FIELDS\");\n                    }\n                    else {\n\n                        rfid = new RfidTagSearch();\n                        if (btnConnect.getText().toString().equals(\"Connect\")) {\n\n                            if (rfid.isConnected()) {\n                                lbStatus.setText(\"Reconnected to Reader\");\n                                btnConnect.setText(\"Disconnect\");\n                                btnStart.setEnabled(true);\n                                btnStop.setEnabled(false);\n                                txtIP.setEnabled(false);\n                                txtPort.setEnabled(false);\n                                txtSaveDir.setEditable(false);\n                                txtTimeInterval.setEditable(false);\n                            }\n                            else {\n                                try {\n                                    rfid.connectToReader(\"169.254.10.1\",5084);\n                                    lbStatus.setText(rfid.getStrResult());\n                                } catch (Exception e) {\n                                    // TODO Auto-generated catch block\n                                    showMessage(e.toString());\n                                }\n                                String res = rfid.getResult();\n                                if (res.equals(\"Success\")) {\n                                    btnConnect.setText(\"Disconnect\");\n                                    btnStart.setEnabled(true);\n                                    btnStop.setEnabled(false);\n                                    txtIP.setEnabled(false);\n                                    txtPort.setEnabled(false);\n                                    txtSaveDir.setEditable(false);\n                                    txtTimeInterval.setEditable(false);\n                                }\n                                else {showMessage(rfid.getStrResult());}    \n                            }\n\n                        }\n                        else {\n                            try {\n                                rfid.disconnectToReader();\n                                lbStatus.setText(\"Disconnected to Reader\");\n                                btnConnect.setText(\"Connect\");\n                                btnStart.setEnabled(false);\n                                btnStop.setEnabled(false);\n                            } catch (Exception e) {\n                                // TODO Auto-generated catch block\n                                showMessage(e.toString());\n                                e.printStackTrace();\n                            }\n                        }\n\n                    }\n\n                }\n            });\n            btnConnect.setBounds(1099, 429, 122, 41);\n            contentPane.add(btnConnect);\n\n\n            btnStart = new JButton(\"Start\");\n            btnStart.addActionListener(new ActionListener() {\n                public void actionPerformed(ActionEvent e) {\n                    try {\n\n                        btnStop.setEnabled(true);\n                        btnConnect.setEnabled(false);\n                        btnStart.setEnabled(false);\n\n\n                        rfid.setSaveDirectory(txtSaveDir.getText().toString());\n                        rfid.startScanning();\n                        rfid.setTimer(Integer.valueOf(txtTimeInterval.getText().toString()));\n                        startTmer();\n                        lbStatus.setText(\"Scan Started\");\n                        System.out.println(getDateandTime());\n                    } catch (InterruptedException | InvalidUsageException | OperationFailureException e1) {\n                        // TODO Auto-generated catch block\n                        showMessage(e1.toString());\n                        e1.printStackTrace();\n                    }\n\n                }\n            });\n            btnStart.setEnabled(false);\n            btnStart.setBounds(1099, 487, 122, 41);\n            contentPane.add(btnStart);\n\n            btnStop = new JButton(\"Stop\");\n            btnStop.addActionListener(new ActionListener() {\n                public void actionPerformed(ActionEvent e) {\n                    try {\n                        rfid.stopScanning();\n                        lbStatus.setText(\"Scanning Stopped\");\n                        btnStop.setEnabled(false);\n                        btnStart.setEnabled(true);\n                        btnConnect.setEnabled(true);\n                        timer.cancel();\n                    } catch (InvalidUsageException | OperationFailureException | InterruptedException e1) {\n                        // TODO Auto-generated catch block\n                        showMessage(e1.toString());\n                    }\n\n                }\n            });\n            btnStop.setEnabled(false);\n            btnStop.setBounds(1099, 550, 122, 41);\n            contentPane.add(btnStop);\n\n            label = new JLabel(\"Status : \");\n            label.setForeground(new Color(204, 0, 0));\n            label.setFont(new Font(\"Tekton Pro Cond\", Font.BOLD, 20));\n            label.setBounds(409, 38, 107, 22);\n            contentPane.add(label);\n\n            lbStatus = new JLabel(\"Not Connected\");\n            lbStatus.setFont(new Font(\"Tekton Pro Cond\", Font.BOLD, 16));\n            lbStatus.setBounds(526, 32, 212, 26);\n            contentPane.add(lbStatus);\n\n\n        }\n\n        // Adding row to the table\n        public void addRow(String stockNum, String rfidNum, String DateLastSeen, String DateLost, String year,String color, String Model, DefaultTableModel model){\n            Object[] row = new Object[7];\n            row[0] = stockNum;\n            row[1] = rfidNum;\n            row[2] = DateLastSeen.substring(5, DateLastSeen.length());\n            row[3] = DateLost;\n            row[4] = year;\n            row[5] = color;\n            row[6] = Model;\n\n            model.insertRow(0,row);\n        }\n\n\n        // setting background of the table\n        public void setCellBackground(Color color, int stat){\n            ResTable.setDefaultRenderer(Object.class, new DefaultTableCellRenderer()\n            {\n                @Override\n                public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)\n                {\n                    final Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n                    if (stat == 0){\n                        c.setForeground(color);\n\n                    }\n                    else{\n                        c.setForeground(Color.black);                   \n                    }\n                    return c;\n                }\n            });\n\n        }\n\n\n        public void showMessage(String mess){\n            JOptionPane.showMessageDialog(null, mess,\"Error\",JOptionPane.INFORMATION_MESSAGE);\n        }\n\n        ArrayList&lt;String&gt; key;\n        ArrayList&lt;String&gt; lost = new ArrayList&lt;&gt;();\n        SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\"); \n        public void startTmer(){\n            try {\n                Thread.sleep(2000);\n            } catch (InterruptedException e1) {\n                // TODO Auto-generated catch block\n                e1.printStackTrace();\n            }\n            timer = new Timer();\n            timer.scheduleAtFixedRate(new TimerTask() {\n                  @Override\n                  public void run() {\n\n\n\n                        key = rfid.getSeenKey();\n                        if (key.size() &gt; 0) {\n                            for (int c=0;c&lt;key.size();c++) {\n                                String r = mysql.updateLastSeen(key.get(c), getDateandTime());\n                            }\n                        }\n                        key.clear();\n\n\n                        String[][] whitelist = mysql.loadActiveKeys();\n                        if (whitelist.length &gt; 0) {\n\n                            ResTable.removeAll();\n                            model.setRowCount(0);\n                            tblResult.removeAll();\n                            model1.setRowCount(0);\n\n                            for (int a = 0; a&lt; whitelist.length;a++){\n                                try {\n\n                                    Date d = format.parse(whitelist[a][2]);\n                                    Date d1;\n                                    if (whitelist[a][8].length() &lt;5) {\n                                        d1 = format.parse(getDateandTime());\n                                    }\n                                    else {\n                                        d1 = format.parse(whitelist[a][8]);                             \n                                    }\n                                    long timeDiff = d1.getTime() - d.getTime();\n\n                                    if (timeDiff &lt; 60000){\n\n                                        addRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\n                                                whitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model);\n                                    }else {\n                                        if (lost.size() &lt;= 0) {\n                                            lost.add(whitelist[a][1]);\n                                            if (whitelist[a][8].length() &lt;=5) {\n                                                String res = mysql.updateLostDate(whitelist[a][1], getDateandTime());\n                                                if (res.equals(\"Success\"))\n                                                addRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\n                                                        whitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model1);\n                                                else {\n                                                    System.out.println(res);\n                                                }\n\n                                            }else {\n                                                addRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\n                                                        whitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model1);                                       \n                                            }\n                                        }else {\n                                            for (int b = 0; b&lt;lost.size();b++) {\n                                                if (lost.get(b).equals(whitelist[a][1])) {\n                                                }else {\n                                                    if (whitelist[a][8].length() &lt;=5) {\n                                                        String res = mysql.updateLostDate(whitelist[a][1], getDateandTime());\n                                                        //log.write(getDateandTime() +\",\" + whitelist[a][2] + System.getProperty( \"line.separator\"));\n                                                        if (res.equals(\"Success\"))\n                                                        addRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\n                                                                whitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model1);\n                                                        else {\n                                                            System.out.println(res);\n                                                        }\n\n                                                    }else {\n                                                        //log.write(whitelist[a][8] +\",\" + whitelist[a][2] + System.getProperty( \"line.separator\"));\n                                                        addRow(whitelist[a][0],whitelist[a][1],whitelist[a][2],\n                                                                whitelist[a][8],whitelist[a][5],whitelist[a][6],whitelist[a][7], model1);                                       \n                                                    }\n\n                                                }\n                                            }\n                                        }\n\n                                    }\n\n                                } catch (ParseException e) {\n                                    // TODO Auto-generated catch block\n                                    System.out.println(\"inside catch \" + getDateandTime());\n                                    System.out.print(e.toString());\n\n                                    e.printStackTrace();\n                                }\n\n                            }\n\n                        }\n\n                        lost.clear();\n\n\n                  }\n                }, 1000, 1000); \n\n        }\n\n\n        public String getDateandTime(){\n            String res = \"\";\n            LocalDateTime myDateObj = LocalDateTime.now();\n            DateTimeFormatter myFormatObj = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\");\n            String formattedDate = myDateObj.format(myFormatObj);\n\n            res = formattedDate.toString();\n            return res;\n        }\n    }\n</code></pre>\n\n<p>Error Log</p>\n\n<pre><code>    Status Notification INVENTORY_START_EVENT\n    2019-12-09 05:54:55\n    Exception in thread \"AWT-EventQueue-0\" java.lang.ArrayIndexOutOfBoundsException: 0 &gt;= 0\n        at java.util.Vector.elementAt(Unknown Source)\n        at javax.swing.table.DefaultTableModel.getValueAt(Unknown Source)\n        at javax.swing.JTable.getValueAt(Unknown Source)\n        at javax.swing.JTable.prepareRenderer(Unknown Source)\n        at javax.swing.plaf.basic.BasicTableUI.paintCell(Unknown Source)\n        at javax.swing.plaf.basic.BasicTableUI.paintCells(Unknown Source)\n        at javax.swing.plaf.basic.BasicTableUI.paint(Unknown Source)\n        at javax.swing.plaf.ComponentUI.update(Unknown Source)\n        at javax.swing.JComponent.paintComponent(Unknown Source)\n        at javax.swing.JComponent.paint(Unknown Source)\n        at javax.swing.JComponent.paintToOffscreen(Unknown Source)\n        at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown Source)\n        at javax.swing.RepaintManager$PaintManager.paint(Unknown Source)\n        at javax.swing.RepaintManager.paint(Unknown Source)\n        at javax.swing.JComponent._paintImmediately(Unknown Source)\n        at javax.swing.JComponent.paintImmediately(Unknown Source)\n        at javax.swing.RepaintManager$4.run(Unknown Source)\n        at javax.swing.RepaintManager$4.run(Unknown Source)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)\n        at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)\n        at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)\n        at javax.swing.RepaintManager.prePaintDirtyRegions(Unknown Source)\n        at javax.swing.RepaintManager.access$1200(Unknown Source)\n        at javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)\n        at java.awt.event.InvocationEvent.dispatch(Unknown Source)\n        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)\n        at java.awt.EventQueue.access$500(Unknown Source)\n        at java.awt.EventQueue$3.run(Unknown Source)\n        at java.awt.EventQueue$3.run(Unknown Source)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)\n        at java.awt.EventQueue.dispatchEvent(Unknown Source)\n        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)\n        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)\n        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)\n        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)\n        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)\n        at java.awt.EventDispatchThread.run(Unknown Source)\n</code></pre>\n"},{"tags":["java","jvm","heap-memory","java-web-start","jnlp"],"answers":[{"tags":[],"owner":{"display_name":"user159088"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1282470853,"creation_date":1282470853,"answer_id":3541000,"question_id":3285915,"body_markdown":"It is likely that this problem is caused by the fact that a sufficiently large memory area could not be allocated to your JVM. The Java object heap has to be allocated in contiguous virtual addresses, for implementation reasons. \r\n\r\nI noticed that on a Win XP box with 2 Gb RAM this breaks at around 1.5 GB (this off course varies depending on what processes are running on each PC, so YMMV).\r\n\r\nCheckout the following posts for some explanations:\r\n\r\n[Java maximum memory on Windows XP][1]\r\n\r\n[Why is the maximum size of the Java heap fixed?][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/171205/java-maximum-memory-on-windows-xp\r\n  [2]: https://stackoverflow.com/questions/2109676/why-is-the-maximum-size-of-the-java-heap-fixed","title":"Java webstart max-heap-size causes JVM cannot be started","body":"<p>It is likely that this problem is caused by the fact that a sufficiently large memory area could not be allocated to your JVM. The Java object heap has to be allocated in contiguous virtual addresses, for implementation reasons. </p>\n\n<p>I noticed that on a Win XP box with 2 Gb RAM this breaks at around 1.5 GB (this off course varies depending on what processes are running on each PC, so YMMV).</p>\n\n<p>Checkout the following posts for some explanations:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/171205/java-maximum-memory-on-windows-xp\">Java maximum memory on Windows XP</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2109676/why-is-the-maximum-size-of-the-java-heap-fixed\">Why is the maximum size of the Java heap fixed?</a></p>\n"},{"tags":[],"owner":{"account_id":156475,"reputation":468,"user_id":373790,"display_name":"sullivan-"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1304352500,"creation_date":1304352500,"answer_id":5859439,"question_id":3285915,"body_markdown":"I found that both the initial-heap-size and max-heap-size were not well respected by the Mac version of javaws. I ended up replacing them with something like this:\r\n\r\n          &lt;j2se version=&quot;1.6+&quot; java-vm-args=&quot;-Xmx1024m -Xms256m -Xss8m&quot; /&gt;\r\n\r\nAnd finally got it working on Mac with the larger heap size","title":"Java webstart max-heap-size causes JVM cannot be started","body":"<p>I found that both the initial-heap-size and max-heap-size were not well respected by the Mac version of javaws. I ended up replacing them with something like this:</p>\n\n<pre><code>      &lt;j2se version=\"1.6+\" java-vm-args=\"-Xmx1024m -Xms256m -Xss8m\" /&gt;\n</code></pre>\n\n<p>And finally got it working on Mac with the larger heap size</p>\n"}],"owner":{"account_id":48541,"reputation":629,"user_id":144282,"display_name":"Jason Wang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17719,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1636378543,"creation_date":1279582123,"question_id":3285915,"body_markdown":"We use java webstart on the client side for a java swing based aplication. Recently we have been experiencing a weird &quot;Cannot start java Virtual machine &quot; error when clicking in the jnlp link. \r\n\r\nWe soon find out its because the max-heap-size setting in the jnlp file was set to 1024m whereas most of the clients PC only have 1 gb physical memory. Set the max-heap-size back to 512m solved the problem.\r\nCurrently, the relevant line in the jnlp file looks like\r\n\r\n     &lt;j2se version=&quot;1.5+&quot; initial-heap-size=&quot;100m&quot; max-heap-size=&quot;512m&quot;/&gt;\r\n\r\nI looked into the jnlp spec, but cannot find anything related to the &quot;Java Virtual machine&quot; issue. In theory the max-heap-size should not matter as much as the initial-heap-size. But our experience suggested quite the contrary.\r\n\r\nThe client environment: \r\n\r\nWindows XP SP2 ( 32bit ), Internet Explorer 8.06, Memory 1G\r\nNote max-heap-size set to 1024m can cause the same problem on a machine with 2G ram. \r\n\r\nBasically, what I am looking for here is some reference/spec/experience about why this is happening, and if there is any get-round for this issue besides increasing the physical memory size. \r\n\r\nAnother thing is that if we leave the max-heap-size unspecified, will the actual physical memory size be used as the max-heap-size, or a system-default one will be used?\r\n\r\n\r\n\r\nThanks,\r\nJasonW","title":"Java webstart max-heap-size causes JVM cannot be started","body":"<p>We use java webstart on the client side for a java swing based aplication. Recently we have been experiencing a weird \"Cannot start java Virtual machine \" error when clicking in the jnlp link. </p>\n\n<p>We soon find out its because the max-heap-size setting in the jnlp file was set to 1024m whereas most of the clients PC only have 1 gb physical memory. Set the max-heap-size back to 512m solved the problem.\nCurrently, the relevant line in the jnlp file looks like</p>\n\n<pre><code> &lt;j2se version=\"1.5+\" initial-heap-size=\"100m\" max-heap-size=\"512m\"/&gt;\n</code></pre>\n\n<p>I looked into the jnlp spec, but cannot find anything related to the \"Java Virtual machine\" issue. In theory the max-heap-size should not matter as much as the initial-heap-size. But our experience suggested quite the contrary.</p>\n\n<p>The client environment: </p>\n\n<p>Windows XP SP2 ( 32bit ), Internet Explorer 8.06, Memory 1G\nNote max-heap-size set to 1024m can cause the same problem on a machine with 2G ram. </p>\n\n<p>Basically, what I am looking for here is some reference/spec/experience about why this is happening, and if there is any get-round for this issue besides increasing the physical memory size. </p>\n\n<p>Another thing is that if we leave the max-heap-size unspecified, will the actual physical memory size be used as the max-heap-size, or a system-default one will be used?</p>\n\n<p>Thanks,\nJasonW</p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":188971,"reputation":3864,"user_id":428013,"accept_rate":85,"display_name":"Steven"},"score":0,"creation_date":1287012183,"post_id":3928837,"comment_id":4191700,"body_markdown":"Are you looking at virtual/paged memory use?","body":"Are you looking at virtual/paged memory use?"},{"owner":{"display_name":"user166390"},"score":0,"creation_date":1287012197,"post_id":3928837,"comment_id":4191701,"body_markdown":"Isn&#39;t that the size of the *Java heap*, not the *system heap* used by the JVM process?","body":"Isn&#39;t that the size of the <i>Java heap</i>, not the <i>system heap</i> used by the JVM process?"},{"owner":{"account_id":26347,"reputation":11087,"user_id":68473,"accept_rate":89,"display_name":"Dan"},"score":0,"creation_date":1287013968,"post_id":3928837,"comment_id":4191884,"body_markdown":"that&#39;s the heap size in weblogic console","body":"that&#39;s the heap size in weblogic console"}],"answers":[{"tags":[],"owner":{"account_id":159458,"reputation":36,"user_id":378835,"display_name":"vegolasse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1310901408,"creation_date":1310901408,"answer_id":6723476,"question_id":3928837,"body_markdown":"Well, the whopping can have lot&#39;s of causes an none of them is especially exciting. First, as said before, in &quot;task manager&quot;, have a look at the detailed info for the process and make sure your looking at the working set and not memory commit size (virtual memory).\r\n\r\nThen, below is a list (from the top of my head) of things in the JVM process that won&#39;t count as java heap, others might be able to add to the list(or perhaps subtract or elaborate):\r\n\r\n- Perm gen\r\n- Thread stack space\r\n- Shared code segments\r\n- Process private code segments\r\n- In process I/O buffers\r\n- JVM &quot;data/code&quot; (hotspot stuff, various temporaries, caches, etc)\r\n- Memory fragmentation in above mentioned data\r\n\r\nBut I agree with you, if you&#39;re actually looking at the working set, it sounds a bit whopping. We usually have 1-1.5 GB non java-heap memory usage on our 32-bit resin servers under high load (Debian Linux).","title":"JVM memory consumption double of heapsize","body":"<p>Well, the whopping can have lot's of causes an none of them is especially exciting. First, as said before, in \"task manager\", have a look at the detailed info for the process and make sure your looking at the working set and not memory commit size (virtual memory).</p>\n\n<p>Then, below is a list (from the top of my head) of things in the JVM process that won't count as java heap, others might be able to add to the list(or perhaps subtract or elaborate):</p>\n\n<ul>\n<li>Perm gen</li>\n<li>Thread stack space</li>\n<li>Shared code segments</li>\n<li>Process private code segments</li>\n<li>In process I/O buffers</li>\n<li>JVM \"data/code\" (hotspot stuff, various temporaries, caches, etc)</li>\n<li>Memory fragmentation in above mentioned data</li>\n</ul>\n\n<p>But I agree with you, if you're actually looking at the working set, it sounds a bit whopping. We usually have 1-1.5 GB non java-heap memory usage on our 32-bit resin servers under high load (Debian Linux).</p>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1363453483,"creation_date":1363453483,"answer_id":15452086,"question_id":3928837,"body_markdown":"The total used / free memory of an program can be obtained in the program via java.lang.Runtime.getRuntime();\r\n\r\nThe runtime has several method which relates to the memory. The following coding example demonstrate its usage.\r\n \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class PerformanceTest {\r\n      private static final long MEGABYTE = 1024L * 1024L;\r\n    \r\n      public static long bytesToMegabytes(long bytes) {\r\n        return bytes / MEGABYTE;\r\n      }\r\n    \r\n      public static void main(String[] args) {\r\n        // I assume you will know how to create a object Person yourself...\r\n        List&lt;Person&gt; list = new ArrayList&lt;Person&gt;();\r\n        for (int i = 0; i &lt;= 100000; i++) {\r\n          list.add(new Person(&quot;Jim&quot;, &quot;Knopf&quot;));\r\n        }\r\n        // Get the Java runtime\r\n        Runtime runtime = Runtime.getRuntime();\r\n        // Run the garbage collector\r\n        runtime.gc();\r\n        // Calculate the used memory\r\n        long memory = runtime.totalMemory() - runtime.freeMemory();\r\n        System.out.println(&quot;Used memory is bytes: &quot; + memory);\r\n        System.out.println(&quot;Used memory is megabytes: &quot;\r\n            + bytesToMegabytes(memory));\r\n      }\r\n    } ","title":"JVM memory consumption double of heapsize","body":"<p>The total used / free memory of an program can be obtained in the program via java.lang.Runtime.getRuntime();</p>\n\n<p>The runtime has several method which relates to the memory. The following coding example demonstrate its usage.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class PerformanceTest {\n  private static final long MEGABYTE = 1024L * 1024L;\n\n  public static long bytesToMegabytes(long bytes) {\n    return bytes / MEGABYTE;\n  }\n\n  public static void main(String[] args) {\n    // I assume you will know how to create a object Person yourself...\n    List&lt;Person&gt; list = new ArrayList&lt;Person&gt;();\n    for (int i = 0; i &lt;= 100000; i++) {\n      list.add(new Person(\"Jim\", \"Knopf\"));\n    }\n    // Get the Java runtime\n    Runtime runtime = Runtime.getRuntime();\n    // Run the garbage collector\n    runtime.gc();\n    // Calculate the used memory\n    long memory = runtime.totalMemory() - runtime.freeMemory();\n    System.out.println(\"Used memory is bytes: \" + memory);\n    System.out.println(\"Used memory is megabytes: \"\n        + bytesToMegabytes(memory));\n  }\n} \n</code></pre>\n"}],"owner":{"account_id":26347,"reputation":11087,"user_id":68473,"accept_rate":89,"display_name":"Dan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1852,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1636378529,"creation_date":1287012002,"question_id":3928837,"body_markdown":"I have set maximum heap size to 4gb for 64bit Weblogic JVM. When i stress-test app, heap size never goes over 4Gb, but java.exe in taskmanager can consume up to whopping 10 Gb. Where this consumption comes from?","title":"JVM memory consumption double of heapsize","body":"<p>I have set maximum heap size to 4gb for 64bit Weblogic JVM. When i stress-test app, heap size never goes over 4Gb, but java.exe in taskmanager can consume up to whopping 10 Gb. Where this consumption comes from?</p>\n"},{"tags":["java","jvm","glassfish","heap-memory"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1285160096,"post_id":3768877,"comment_id":3989094,"body_markdown":"Ask the person who put in the explicit MaxPermSize and AggressiveHeap why that was done.   I see no particular problems in the above from a busy server.","body":"Ask the person who put in the explicit MaxPermSize and AggressiveHeap why that was done.   I see no particular problems in the above from a busy server."},{"owner":{"account_id":124855,"reputation":19802,"user_id":320220,"accept_rate":85,"display_name":"beerbajay"},"score":0,"creation_date":1285162650,"post_id":3768877,"comment_id":3989636,"body_markdown":"I can&#39;t; they&#39;re long gone from the company.","body":"I can&#39;t; they&#39;re long gone from the company."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1367544653,"creation_date":1285158142,"answer_id":3769136,"question_id":3768877,"body_markdown":"&gt; Why does my JVM heap size thrash from 2gigs to 8 gigs?\r\n\r\nThere is no evidence that the system is thrashing in the normal (harmful) sense.  The sawtooth pattern indicates that objects are being allocated (the up slope) and the GC is then reclaiming them.  The allocation rate seems a bit high, but there is every sign that the GC is running efficiently.  Indeed, the fact that the heap size is always dropping back to ~2Gb is a good sign, as is the fact that the % CPU usage is low.\r\n\r\n&gt; I have little experience with memory tuning, but it seems like MaxPermSize is out of whack with Xms and Xmx. Or is this normal?\r\n\r\nIt looks kind of normal.  \r\n\r\nCertainly, there&#39;s no need to increase the size of permGen.  (PermGen is used for objects that are anticipated to never be garbage collected; typically intern&#39;d Strings&lt;sup&gt;1&lt;/sup&gt; and code segments.  Normal application objects are never allocated in or moved to permgen space.)\r\n\r\nHypothetically, if you *didn&#39;t* have lots of memory, the high allocation rate might be a cause for concern.  However, you cannot address that by tweaking the GC parameters.  You&#39;d need to do some profiling to see what is creating so many objects and see if it is sensible to try to reduce the creation rate.  Depending on the application, it may not even be sensible to try.\r\n\r\n----------------------\r\n\r\n&lt;sup&gt;1 - In fact, starting with Java 7 intern&#39;d strings live in the regular heap not permgen.&lt;/sup&gt;","title":"Why does my JVM heap size thrash from 2gigs to 8 gigs?","body":"<blockquote>\n  <p>Why does my JVM heap size thrash from 2gigs to 8 gigs?</p>\n</blockquote>\n\n<p>There is no evidence that the system is thrashing in the normal (harmful) sense.  The sawtooth pattern indicates that objects are being allocated (the up slope) and the GC is then reclaiming them.  The allocation rate seems a bit high, but there is every sign that the GC is running efficiently.  Indeed, the fact that the heap size is always dropping back to ~2Gb is a good sign, as is the fact that the % CPU usage is low.</p>\n\n<blockquote>\n  <p>I have little experience with memory tuning, but it seems like MaxPermSize is out of whack with Xms and Xmx. Or is this normal?</p>\n</blockquote>\n\n<p>It looks kind of normal.  </p>\n\n<p>Certainly, there's no need to increase the size of permGen.  (PermGen is used for objects that are anticipated to never be garbage collected; typically intern'd Strings<sup>1</sup> and code segments.  Normal application objects are never allocated in or moved to permgen space.)</p>\n\n<p>Hypothetically, if you <em>didn't</em> have lots of memory, the high allocation rate might be a cause for concern.  However, you cannot address that by tweaking the GC parameters.  You'd need to do some profiling to see what is creating so many objects and see if it is sensible to try to reduce the creation rate.  Depending on the application, it may not even be sensible to try.</p>\n\n<hr>\n\n<p><sup>1 - In fact, starting with Java 7 intern'd strings live in the regular heap not permgen.</sup></p>\n"},{"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1285192525,"creation_date":1285192525,"answer_id":3773920,"question_id":3768877,"body_markdown":"very normal. all java programs have memory pattern like that.","title":"Why does my JVM heap size thrash from 2gigs to 8 gigs?","body":"<p>very normal. all java programs have memory pattern like that.</p>\n"}],"owner":{"account_id":124855,"reputation":19802,"user_id":320220,"accept_rate":85,"display_name":"beerbajay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1687,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":3769136,"answer_count":2,"score":4,"last_activity_date":1636378459,"creation_date":1285156183,"question_id":3768877,"body_markdown":"Heap memory size thrashes between 2gigs and ~8gigs about once a minute (see picture).\r\n\r\nRelevant details:\r\n\r\n* High traffic site\r\n* Lots of physical memory\r\n* Redhat 5.5\r\n* Java 1.6.0_07\r\n* Glassfish 2.2.1 (yes, I know it&#39;s old. no, we can&#39;t upgrade. yes, i know it&#39;s unusual to use as a production app server).\r\n* -XX:MaxPermSize=192m -XX:+AggressiveHeap -Xms14336m -Xmx14336m\r\n\r\nI have little experience with memory tuning, but it seems like MaxPermSize is out of whack with Xms and Xmx. Or is this normal?\r\n\r\n![jConsole heap thrashing][1]\r\n\r\n  [1]: http://i.stack.imgur.com/dRpei.jpg","title":"Why does my JVM heap size thrash from 2gigs to 8 gigs?","body":"<p>Heap memory size thrashes between 2gigs and ~8gigs about once a minute (see picture).</p>\n\n<p>Relevant details:</p>\n\n<ul>\n<li>High traffic site</li>\n<li>Lots of physical memory</li>\n<li>Redhat 5.5</li>\n<li>Java 1.6.0_07</li>\n<li>Glassfish 2.2.1 (yes, I know it's old. no, we can't upgrade. yes, i know it's unusual to use as a production app server).</li>\n<li>-XX:MaxPermSize=192m -XX:+AggressiveHeap -Xms14336m -Xmx14336m</li>\n</ul>\n\n<p>I have little experience with memory tuning, but it seems like MaxPermSize is out of whack with Xms and Xmx. Or is this normal?</p>\n\n<p><img src=\"https://i.stack.imgur.com/dRpei.jpg\" alt=\"jConsole heap thrashing\"></p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":50598,"reputation":32356,"user_id":151019,"accept_rate":83,"display_name":"mmmmmm"},"score":0,"creation_date":1276002571,"post_id":2997488,"comment_id":3061263,"body_markdown":"How do you normally run your program?","body":"How do you normally run your program?"},{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1276002740,"post_id":2997488,"comment_id":3061306,"body_markdown":"That&#39;s just a help print, where it is trying to explain you how to properly use java.exe.","body":"That&#39;s just a help print, where it is trying to explain you how to properly use java.exe."}],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1276002535,"creation_date":1276002535,"answer_id":2997522,"question_id":2997488,"body_markdown":"No, it means the command failed, because you didn&#39;t tell is what to run, like a Main class, e.g.\r\n\r\n    java -Xms512m -Xmx512m com.x.MyClass\r\n\r\nOther than that, your options are valid, yes.","title":"java heap allocation","body":"<p>No, it means the command failed, because you didn't tell is what to run, like a Main class, e.g.</p>\n\n<pre><code>java -Xms512m -Xmx512m com.x.MyClass\n</code></pre>\n\n<p>Other than that, your options are valid, yes.</p>\n"},{"tags":[],"owner":{"account_id":62717,"reputation":9239,"user_id":186099,"accept_rate":68,"display_name":"Vlad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1276002586,"creation_date":1276002586,"answer_id":2997534,"question_id":2997488,"body_markdown":"Nope,\r\n\r\n   You also have to give the either class name or a jar file name to execute.  These options apply only to one instance of the virtual machine.\r\n\r\n   If you are trying to change the Heap allocation in your application server or development environment you have to look up how to supply the JVM options there, and slip your -Xms options in.","title":"java heap allocation","body":"<p>Nope,</p>\n\n<p>You also have to give the either class name or a jar file name to execute.  These options apply only to one instance of the virtual machine.</p>\n\n<p>If you are trying to change the Heap allocation in your application server or development environment you have to look up how to supply the JVM options there, and slip your -Xms options in.</p>\n"}],"owner":{"account_id":131901,"reputation":2211,"user_id":332244,"accept_rate":79,"display_name":"gekrish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":993,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":2997534,"answer_count":2,"score":1,"last_activity_date":1636378435,"creation_date":1276002308,"question_id":2997488,"body_markdown":"I tried to increase the heap size like the below \r\n\r\n        C:\\Data\\Guru\\Code\\Got\\adminservice\\adminservice&gt;java -Xms512m -Xmx512m\r\n    Usage: java [-options] class [args...]\r\n               (to execute a class)\r\n       or  java [-options] -jar jarfile [args...]\r\n               (to execute a jar file)\r\n    \r\n    where options include:\r\n        -client       to select the &quot;client&quot; VM\r\n        -server       to select the &quot;server&quot; VM\r\n        -hotspot      is a synonym for the &quot;client&quot; VM  [deprecated]\r\n                      The default VM is client.\r\n    \r\n        -cp &lt;class search path of directories and zip/jar files&gt;\r\n        -classpath &lt;class search path of directories and zip/jar files&gt;\r\n                      A ; separated list of directories, JAR archives,\r\n                      and ZIP archives to search for class files.\r\n        -D&lt;name&gt;=&lt;value&gt;\r\n                      set a system property\r\n        -verbose[:class|gc|jni]\r\n                      enable verbose output\r\n        -version      print product version and exit\r\n        -version:&lt;value&gt;\r\n                      require the specified version to run\r\n        -showversion  print product version and continue\r\n        -jre-restrict-search | -jre-no-restrict-search\r\n                      include/exclude user private JREs in the version search\r\n        -? -help      print this help message\r\n        -X            print help on non-standard options\r\n        -ea[:&lt;packagename&gt;...|:&lt;classname&gt;]\r\n        -enableassertions[:&lt;packagename&gt;...|:&lt;classname&gt;]\r\n                      enable assertions\r\n        -da[:&lt;packagename&gt;...|:&lt;classname&gt;]\r\n        -disableassertions[:&lt;packagename&gt;...|:&lt;classname&gt;]\r\n                      disable assertions\r\n        -esa | -enablesystemassertions\r\n                      enable system assertions\r\n        -dsa | -disablesystemassertions\r\n                      disable system assertions\r\n        -agentlib:&lt;libname&gt;[=&lt;options&gt;]\r\n                      load native agent library &lt;libname&gt;, e.g. -agentlib:hprof\r\n                        see also, -agentlib:jdwp=help and -agentlib:hprof=help\r\n        -agentpath:&lt;pathname&gt;[=&lt;options&gt;]\r\n                      load native agent library by full pathname\r\n        -javaagent:&lt;jarpath&gt;[=&lt;options&gt;]\r\n                      load Java programming language agent, see java.lang.instrument\r\n\r\nIt gave the help message as above - Does it mean that it was allocated?\r\n\r\n","title":"java heap allocation","body":"<p>I tried to increase the heap size like the below </p>\n\n<pre><code>    C:\\Data\\Guru\\Code\\Got\\adminservice\\adminservice&gt;java -Xms512m -Xmx512m\nUsage: java [-options] class [args...]\n           (to execute a class)\n   or  java [-options] -jar jarfile [args...]\n           (to execute a jar file)\n\nwhere options include:\n    -client       to select the \"client\" VM\n    -server       to select the \"server\" VM\n    -hotspot      is a synonym for the \"client\" VM  [deprecated]\n                  The default VM is client.\n\n    -cp &lt;class search path of directories and zip/jar files&gt;\n    -classpath &lt;class search path of directories and zip/jar files&gt;\n                  A ; separated list of directories, JAR archives,\n                  and ZIP archives to search for class files.\n    -D&lt;name&gt;=&lt;value&gt;\n                  set a system property\n    -verbose[:class|gc|jni]\n                  enable verbose output\n    -version      print product version and exit\n    -version:&lt;value&gt;\n                  require the specified version to run\n    -showversion  print product version and continue\n    -jre-restrict-search | -jre-no-restrict-search\n                  include/exclude user private JREs in the version search\n    -? -help      print this help message\n    -X            print help on non-standard options\n    -ea[:&lt;packagename&gt;...|:&lt;classname&gt;]\n    -enableassertions[:&lt;packagename&gt;...|:&lt;classname&gt;]\n                  enable assertions\n    -da[:&lt;packagename&gt;...|:&lt;classname&gt;]\n    -disableassertions[:&lt;packagename&gt;...|:&lt;classname&gt;]\n                  disable assertions\n    -esa | -enablesystemassertions\n                  enable system assertions\n    -dsa | -disablesystemassertions\n                  disable system assertions\n    -agentlib:&lt;libname&gt;[=&lt;options&gt;]\n                  load native agent library &lt;libname&gt;, e.g. -agentlib:hprof\n                    see also, -agentlib:jdwp=help and -agentlib:hprof=help\n    -agentpath:&lt;pathname&gt;[=&lt;options&gt;]\n                  load native agent library by full pathname\n    -javaagent:&lt;jarpath&gt;[=&lt;options&gt;]\n                  load Java programming language agent, see java.lang.instrument\n</code></pre>\n\n<p>It gave the help message as above - Does it mean that it was allocated?</p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":66969,"reputation":22196,"user_id":196211,"accept_rate":67,"display_name":"Eyal Schneider"},"score":3,"creation_date":1274885083,"post_id":2913948,"comment_id":2965348,"body_markdown":"I see the jmap is executed from the Hotspot JVM you have installed. Are you sure the application itself was launched with the same Java version?","body":"I see the jmap is executed from the Hotspot JVM you have installed. Are you sure the application itself was launched with the same Java version?"},{"owner":{"account_id":24511,"reputation":4692,"user_id":62388,"accept_rate":100,"display_name":"Jasper Floor"},"score":0,"creation_date":1275044968,"post_id":2913948,"comment_id":2981792,"body_markdown":"I rechecked just to be sure, but there is only one version of java available on the machine and I call jmap directly from the bin dir. No PATH errors. So it is definately the same JVM. \n\nA possibility someone here offered was that it has to do with a -XX:+UseCompressedOops parameter.","body":"I rechecked just to be sure, but there is only one version of java available on the machine and I call jmap directly from the bin dir. No PATH errors. So it is definately the same JVM.   A possibility someone here offered was that it has to do with a -XX:+UseCompressedOops parameter."},{"owner":{"account_id":1309364,"reputation":871,"user_id":1257691,"accept_rate":50,"display_name":"Vijay Kumar"},"score":0,"creation_date":1392144497,"post_id":2913948,"comment_id":32827592,"body_markdown":"I had gotten an error like this: &quot;Error attaching to process: sun.jvm.hotspot.debugger.DebuggerException: Can&#39;t attach to the process","body":"I had gotten an error like this: &quot;Error attaching to process: sun.jvm.hotspot.debugger.DebuggerException: Can&#39;t attach to the process"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1435227475,"post_id":2913948,"comment_id":50116547,"body_markdown":"Under Linux you may need &quot;sudo ...&quot; to get proper access to the process.","body":"Under Linux you may need &quot;sudo ...&quot; to get proper access to the process."}],"answers":[{"tags":[],"owner":{"account_id":130717,"reputation":14948,"user_id":330184,"accept_rate":80,"display_name":"bwawok"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1274892049,"creation_date":1274892049,"answer_id":2914992,"question_id":2913948,"body_markdown":"What happens if you just run\r\n\r\n\r\n    ./jmap -heap 11175 \r\n\r\nAnd are you sure the application JVM is identical to the JMAP JVM? (same version, etc)","title":"Jmap can&#39;t connect to make a dump","body":"<p>What happens if you just run</p>\n\n<pre><code>./jmap -heap 11175 \n</code></pre>\n\n<p>And are you sure the application JVM is identical to the JMAP JVM? (same version, etc)</p>\n"},{"tags":[],"owner":{"account_id":24511,"reputation":4692,"user_id":62388,"accept_rate":100,"display_name":"Jasper Floor"},"down_vote_count":1,"up_vote_count":99,"is_accepted":true,"score":98,"last_activity_date":1275310611,"creation_date":1275310611,"answer_id":2943651,"question_id":2913948,"body_markdown":"The solution was very simple. I was running the jmap as root, but I had to run it as the user who started the jvm. I will now go hide my head in shame.","title":"Jmap can&#39;t connect to make a dump","body":"<p>The solution was very simple. I was running the jmap as root, but I had to run it as the user who started the jvm. I will now go hide my head in shame.</p>\n"},{"tags":[],"owner":{"account_id":164146,"reputation":3624,"user_id":1651840,"accept_rate":82,"display_name":"OkieOth"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1418302229,"creation_date":1418302229,"answer_id":27423350,"question_id":2913948,"body_markdown":"I got the same jmap error on a linux machine that have two different OpenJdks installed. First I installed OpenJDK 1.6 and after that OpenJDK 1.7.\r\n\r\nA call of ...\r\n\r\n    /usr/lib/jvm/java-1.7.0-openjdk-amd64/bin/java -XshowSettings:properties -version\r\n\r\n    # produce the following output ...\r\n    ...\r\n    java.library.path = /usr/java/packages/lib/amd64\r\n        /usr/lib/x86_64-linux-gnu/jni\r\n        /lib/x86_64-linux-gnu\r\n        /usr/lib/x86_64-linux-gnu\r\n        /usr/lib/jni\r\n        /lib\r\n        /usr/lib\r\n    ...\r\n    java version &quot;1.7.0_65&quot;\r\n\r\nWith including &#39;/usr/lib&#39; every with OpenJDK 1.7.* started program includes the libraries of the first installed JDK (in my case OpenJDK 1.6.*). So the jmap versions of Java6 and Java7 failed.\r\n\r\nAfter I changed the start for the Java7 programms with included OpenJDK 1.7 libraries ...\r\n\r\n    /usr/lib/jvm/java-1.7.0-openjdk-amd64/bin/java -Djava.library.path=/usr/lib/jvm/java- \\\r\n                      7-openjdk-amd64/jre/lib/amd64/server:/usr/java/packages/lib/amd64: \\\r\n                      /usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/ \\\r\n                      x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib ...\r\n\r\nI was able access proccess with the Java 7 version of the jmap program. But it needs a sudo to run.\r\n\r\n","title":"Jmap can&#39;t connect to make a dump","body":"<p>I got the same jmap error on a linux machine that have two different OpenJdks installed. First I installed OpenJDK 1.6 and after that OpenJDK 1.7.</p>\n\n<p>A call of ...</p>\n\n<pre><code>/usr/lib/jvm/java-1.7.0-openjdk-amd64/bin/java -XshowSettings:properties -version\n\n# produce the following output ...\n...\njava.library.path = /usr/java/packages/lib/amd64\n    /usr/lib/x86_64-linux-gnu/jni\n    /lib/x86_64-linux-gnu\n    /usr/lib/x86_64-linux-gnu\n    /usr/lib/jni\n    /lib\n    /usr/lib\n...\njava version \"1.7.0_65\"\n</code></pre>\n\n<p>With including '/usr/lib' every with OpenJDK 1.7.* started program includes the libraries of the first installed JDK (in my case OpenJDK 1.6.*). So the jmap versions of Java6 and Java7 failed.</p>\n\n<p>After I changed the start for the Java7 programms with included OpenJDK 1.7 libraries ...</p>\n\n<pre><code>/usr/lib/jvm/java-1.7.0-openjdk-amd64/bin/java -Djava.library.path=/usr/lib/jvm/java- \\\n                  7-openjdk-amd64/jre/lib/amd64/server:/usr/java/packages/lib/amd64: \\\n                  /usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/ \\\n                  x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib ...\n</code></pre>\n\n<p>I was able access proccess with the Java 7 version of the jmap program. But it needs a sudo to run.</p>\n"},{"tags":[],"owner":{"account_id":433957,"reputation":2917,"user_id":819606,"accept_rate":60,"display_name":"Ariel T"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1419433071,"creation_date":1419433071,"answer_id":27638734,"question_id":2913948,"body_markdown":"**Future Googlers:**\r\n\r\nThis could also happen if you installed the JDK *while* the process you&#39;re trying to jmap was running.\r\n\r\nIf that&#39;s the case, restart the java process.","title":"Jmap can&#39;t connect to make a dump","body":"<p><strong>Future Googlers:</strong></p>\n\n<p>This could also happen if you installed the JDK <em>while</em> the process you're trying to jmap was running.</p>\n\n<p>If that's the case, restart the java process.</p>\n"},{"tags":[],"owner":{"account_id":2161668,"reputation":632,"user_id":1915711,"display_name":"jpozorio"},"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1443127843,"creation_date":1443127843,"answer_id":32770689,"question_id":2913948,"body_markdown":"I was running the jmap and the application with the same user and still get the error.\r\n\r\nThe solution was run that comand before the jmap\r\n\r\n    echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope\r\n\r\n\r\nThan is just use jmap and will works fine\r\n\r\n    jmap -heap 17210","title":"Jmap can&#39;t connect to make a dump","body":"<p>I was running the jmap and the application with the same user and still get the error.</p>\n\n<p>The solution was run that comand before the jmap</p>\n\n<pre><code>echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope\n</code></pre>\n\n<p>Than is just use jmap and will works fine</p>\n\n<pre><code>jmap -heap 17210\n</code></pre>\n"},{"tags":[],"owner":{"account_id":215223,"reputation":2949,"user_id":469718,"accept_rate":12,"display_name":"kisna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457571716,"creation_date":1457571716,"answer_id":35905713,"question_id":2913948,"body_markdown":"When none of these work or if you don&#39;t want to change sensitive OS flags such as ptrace_scope:\r\n\r\nEither you can use jconsole/jvisualvm to [trigger heap dumps][1] or run any JMX client directly from console as follows as you are doing it locally on the machine that needs the dump and so is faster:\r\n\r\n    echo &#39;jmx_invoke -m com.sun.management:type=HotSpotDiagnostic dumpHeap heapdump-20160309.hprof false&#39; | java -jar jmxsh.jar -h $LOCALHOST_OR_IP -p $JMX_PORT\r\n\r\nI used the wget https://github.com/davr/jmxsh/raw/master/jmxsh.jar for this example.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/guides/management/jconsole.html#gdhqe","title":"Jmap can&#39;t connect to make a dump","body":"<p>When none of these work or if you don't want to change sensitive OS flags such as ptrace_scope:</p>\n\n<p>Either you can use jconsole/jvisualvm to <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/management/jconsole.html#gdhqe\" rel=\"nofollow\">trigger heap dumps</a> or run any JMX client directly from console as follows as you are doing it locally on the machine that needs the dump and so is faster:</p>\n\n<pre><code>echo 'jmx_invoke -m com.sun.management:type=HotSpotDiagnostic dumpHeap heapdump-20160309.hprof false' | java -jar jmxsh.jar -h $LOCALHOST_OR_IP -p $JMX_PORT\n</code></pre>\n\n<p>I used the wget <a href=\"https://github.com/davr/jmxsh/raw/master/jmxsh.jar\" rel=\"nofollow\">https://github.com/davr/jmxsh/raw/master/jmxsh.jar</a> for this example.</p>\n"},{"tags":[],"owner":{"account_id":31733,"reputation":3781,"user_id":87383,"accept_rate":100,"display_name":"Oleksandr"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1507282388,"creation_date":1459860249,"answer_id":36426733,"question_id":2913948,"body_markdown":"If someone tries to get Heap Dump of Java application in Docker container.\r\nThis is the only solution that worked for me:\r\n\r\n    docker exec &lt;container-name&gt; jcmd 1 GC.heap_dump /tmp/docker.hprof\r\n\r\nIt basically dumps the heap of process with **pid=1** using **jcmd**\r\n\r\nSee https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html","title":"Jmap can&#39;t connect to make a dump","body":"<p>If someone tries to get Heap Dump of Java application in Docker container.\nThis is the only solution that worked for me:</p>\n\n<pre><code>docker exec &lt;container-name&gt; jcmd 1 GC.heap_dump /tmp/docker.hprof\n</code></pre>\n\n<p>It basically dumps the heap of process with <strong>pid=1</strong> using <strong>jcmd</strong></p>\n\n<p>See <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html</a></p>\n"},{"tags":[],"owner":{"account_id":295514,"reputation":2157,"user_id":599971,"accept_rate":55,"display_name":"ejaenv"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1464780977,"creation_date":1464780977,"answer_id":37567527,"question_id":2913948,"body_markdown":"You need to use the jmap that comes with the JVM.","title":"Jmap can&#39;t connect to make a dump","body":"<p>You need to use the jmap that comes with the JVM.</p>\n"},{"tags":[],"owner":{"account_id":2989423,"reputation":1730,"user_id":2537335,"accept_rate":89,"display_name":"Pablo Gonzalez"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1471609090,"creation_date":1471609090,"answer_id":39038902,"question_id":2913948,"body_markdown":"What worked for me was to simply issue the command with sudo as in:\r\n\r\n    sudo jmap -heap 21797","title":"Jmap can&#39;t connect to make a dump","body":"<p>What worked for me was to simply issue the command with sudo as in:</p>\n\n<pre><code>sudo jmap -heap 21797\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8185917,"reputation":21,"user_id":6161743,"display_name":"Javier Lopez"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502967464,"creation_date":1502967464,"answer_id":45733278,"question_id":2913948,"body_markdown":"I have the same problem, I&#39;m trying to find a memory leak in a process running inside a Docker container. I wasn&#39;t able to use jmap, instead I used this: \r\n\r\n    jcmd &lt;pid&gt; GC.class_histogram \r\n\r\nThis gives you a list of the objects in the memory. And from the Oracle documentation: \r\n\r\n&gt; It is recommended to use the latest utility, jcmd instead of jmap utility for enhanced diagnostics and reduced performance overhead. https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks004.html","title":"Jmap can&#39;t connect to make a dump","body":"<p>I have the same problem, I'm trying to find a memory leak in a process running inside a Docker container. I wasn't able to use jmap, instead I used this: </p>\n\n<pre><code>jcmd &lt;pid&gt; GC.class_histogram \n</code></pre>\n\n<p>This gives you a list of the objects in the memory. And from the Oracle documentation: </p>\n\n<blockquote>\n  <p>It is recommended to use the latest utility, jcmd instead of jmap utility for enhanced diagnostics and reduced performance overhead. <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks004.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks004.html</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6085988,"reputation":1292,"user_id":4750017,"accept_rate":100,"display_name":"Arbaz Alam"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1510949335,"creation_date":1510949335,"answer_id":47358522,"question_id":2913948,"body_markdown":"Follow the below steps to take the thread and Heap dumps from a docker container\r\n\r\n1. Run the below command to bash into the container. Please change the CONTAINER_NAME appropriately\r\n\r\n\r\n&gt;        docker exec -it CONTAINER_NAME bash\r\n\r\n    \r\n\r\n2. Then type jps to find the all the Java application details and extract the PID for your application\r\n\r\n\r\n&gt;     jps\r\n  \r\n\r\n3. Then run the below command to get the thread dump. Please change the PID appropriately\r\n\r\n\r\n &gt;     jstack PID &gt; threadDump.tdump \r\n     \r\n\r\n4. Then run the below command to get the Heap dump. Please change the PID appropriately\r\n\r\n\r\n&gt;         jmap -dump:live,format=b,file=heapDump.hprof PID \r\n     \r\n\r\n5. Then exit from the docker container and download the threadDump.tdump and heapDump.hprof from the docker container by running the below command. Please change the CONTAINER_NAME appropriately\r\n\r\n\r\n&gt;      sudo docker cp CONTAINER_NAME:threadDump.tdump .\r\n&gt;      sudo docker cp CONTAINER_NAME:heapDump.hprof .","title":"Jmap can&#39;t connect to make a dump","body":"<p>Follow the below steps to take the thread and Heap dumps from a docker container</p>\n\n<ol>\n<li>Run the below command to bash into the container. Please change the CONTAINER_NAME appropriately</li>\n</ol>\n\n<blockquote>\n<pre><code>   docker exec -it CONTAINER_NAME bash\n</code></pre>\n</blockquote>\n\n<ol start=\"2\">\n<li>Then type jps to find the all the Java application details and extract the PID for your application</li>\n</ol>\n\n<blockquote>\n<pre><code>jps\n</code></pre>\n</blockquote>\n\n<ol start=\"3\">\n<li><p>Then run the below command to get the thread dump. Please change the PID appropriately</p>\n\n<blockquote>\n<pre><code>jstack PID &gt; threadDump.tdump \n</code></pre>\n</blockquote></li>\n<li><p>Then run the below command to get the Heap dump. Please change the PID appropriately</p></li>\n</ol>\n\n<blockquote>\n<pre><code>    jmap -dump:live,format=b,file=heapDump.hprof PID \n</code></pre>\n</blockquote>\n\n<ol start=\"5\">\n<li>Then exit from the docker container and download the threadDump.tdump and heapDump.hprof from the docker container by running the below command. Please change the CONTAINER_NAME appropriately</li>\n</ol>\n\n<blockquote>\n<pre><code> sudo docker cp CONTAINER_NAME:threadDump.tdump .\n sudo docker cp CONTAINER_NAME:heapDump.hprof .\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9959452,"reputation":2037,"user_id":7369238,"display_name":"ABHAY JOHRI"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1513770730,"creation_date":1513770730,"answer_id":47905454,"question_id":2913948,"body_markdown":"    1.Execute &quot;Docker ps&quot;, will give the container Id of all services and collect the container id foe TSC.\r\n    2.Execute &quot;docker exec -it CONTAINER_ID bash&quot; (replace CONTAINER_ID with TSC Container id)\r\n    3.Bash will come and then execute the &quot;jps&quot; on bash, that will give you the PID for process(it will be 1 for jar)\r\n    4.Execute the &quot;jstack PID &gt; threadDump.tdump&quot;(replace PID with process id received in step 3, it should be 1)\r\n    5.Execute the &quot;jmap -dump:format=b,file=heapDump.hprof PID&quot;(replace PID with process id received in step 3, it should be 1)\r\n    6.Then we have to exit the bash using &quot;exit&quot; command\r\n    7.Execute &quot;sudo docker cp CONTAINER_ID:heapDump.hprof .&quot; from ec2 command line, that will copy the dump file on ec2 machine present working directory.\r\n    8.Execute &quot;sudo docker cp CONTAINER_ID:threadDump.tdump .&quot; from ec2 command line, that will copy the dump file on ec2 machine present working directory.","title":"Jmap can&#39;t connect to make a dump","body":"<pre><code>1.Execute \"Docker ps\", will give the container Id of all services and collect the container id foe TSC.\n2.Execute \"docker exec -it CONTAINER_ID bash\" (replace CONTAINER_ID with TSC Container id)\n3.Bash will come and then execute the \"jps\" on bash, that will give you the PID for process(it will be 1 for jar)\n4.Execute the \"jstack PID &gt; threadDump.tdump\"(replace PID with process id received in step 3, it should be 1)\n5.Execute the \"jmap -dump:format=b,file=heapDump.hprof PID\"(replace PID with process id received in step 3, it should be 1)\n6.Then we have to exit the bash using \"exit\" command\n7.Execute \"sudo docker cp CONTAINER_ID:heapDump.hprof .\" from ec2 command line, that will copy the dump file on ec2 machine present working directory.\n8.Execute \"sudo docker cp CONTAINER_ID:threadDump.tdump .\" from ec2 command line, that will copy the dump file on ec2 machine present working directory.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9905483,"reputation":39,"user_id":7334120,"display_name":"Zirikatzaile"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1518533294,"creation_date":1518530228,"answer_id":48768526,"question_id":2913948,"body_markdown":"In my case it is not as simple as check the user :(\r\n\r\nI have a script called collectd-java which invokes jstat and jmap. I&#39;ve checked by top that such script is launched, as expected, by the user owning the JVM. However, jstat gives me what I need and jmap can&#39;t attach. Here is the script - the echo stuff is just the format I need to present the values:\r\n\r\n    HOSTNAME=&quot;${COLLECTD_HOSTNAME:-localhost}&quot;\r\n    INTERVAL=&quot;${COLLECTD_INTERVAL:-60}&quot;\r\n    MAIN_CLASS=&quot;my.fully.qualified.MainClass&quot;\r\n    PID=$(pgrep -f ${MAIN_CLASS})\r\n    \r\n    get_jstat_classloaderdata() {\r\n    VALUE=`jstat -class $PID 1 1 | awk &#39;{print $1}&#39; | grep -vi loaded`\r\n    echo &quot;PUTVAL \\&quot;$HOSTNAME/exec-cecoco/gauge-java_classloader_loaded\\&quot; interval=$INTERVAL N:$VALUE&quot;\r\n    \r\n    VALUE=`jstat -class $PID 1 1 | awk &#39;{print $2}&#39; | grep -vi bytes`\r\n    echo &quot;PUTVAL \\&quot;$HOSTNAME/exec-cecoco/gauge-java_classloader_bytesload\\&quot; interval=$INTERVAL N:$VALUE&quot;\r\n    \r\n    VALUE=`jstat -class $PID 1 1 | awk &#39;{print $3}&#39; | grep -vi unload`\r\n    echo &quot;PUTVAL \\&quot;$HOSTNAME/exec-cecoco/gauge-java_classloader_unloaded\\&quot; interval=$INTERVAL N:$VALUE&quot;\r\n    \r\n    VALUE=`jstat -class $PID 1 1 | awk &#39;{print $4}&#39; | grep -vi bytes`\r\n    echo &quot;PUTVAL \\&quot;$HOSTNAME/exec-cecoco/gauge-java_classloader_bytesunload\\&quot; interval=$INTERVAL N:$VALUE&quot;\r\n    \r\n    VALUE=`jstat -class $PID 1 1 | awk &#39;{print $5}&#39; | grep -vi time`\r\n    echo &quot;PUTVAL \\&quot;$HOSTNAME/exec-cecoco/gauge-java_classloader_time\\&quot; interval=$INTERVAL N:$VALUE&quot;\r\n    }\r\n    \r\n    get_jmap_heapdata() {\r\n            VALUE=$(jmap -heap ${PID} | grep MinHeapFreeRatio |awk &#39;{print $3}&#39;)\r\n            echo &quot;PUTVAL \\&quot;$HOSTNAME/exec-cecoco/gauge-jmap_minheapfreeratio\\&quot; interval=$INTERVAL N:$VALUE&quot;\r\n    \r\n            VALUE=$(jmap -heap ${PID} | grep   MaxHeapFreeRatio|awk &#39;{print $3}&#39;)\r\n            echo &quot;PUTVAL \\&quot;$HOSTNAME/exec-cecoco/gauge-jmap_maxheapfreeratio\\&quot; interval=$INTERVAL N:$VALUE&quot;\r\n    \r\n            VALUE=$(jmap -heap ${PID} | grep   MaxHeapSize|awk &#39;{print $3}&#39;)\r\n            echo &quot;PUTVAL \\&quot;$HOSTNAME/exec-cecoco/gauge-jmap_maxheapsize\\&quot; interval=$INTERVAL N:$VALUE&quot;\r\n    }\r\n    ##Do it\r\n    get_jmap_heapdata\r\n    get_jstat_classloaderdata\r\n\r\nJstat succeeds and jmap fails. Does anyone understands it ?\r\n","title":"Jmap can&#39;t connect to make a dump","body":"<p>In my case it is not as simple as check the user :(</p>\n\n<p>I have a script called collectd-java which invokes jstat and jmap. I've checked by top that such script is launched, as expected, by the user owning the JVM. However, jstat gives me what I need and jmap can't attach. Here is the script - the echo stuff is just the format I need to present the values:</p>\n\n<pre><code>HOSTNAME=\"${COLLECTD_HOSTNAME:-localhost}\"\nINTERVAL=\"${COLLECTD_INTERVAL:-60}\"\nMAIN_CLASS=\"my.fully.qualified.MainClass\"\nPID=$(pgrep -f ${MAIN_CLASS})\n\nget_jstat_classloaderdata() {\nVALUE=`jstat -class $PID 1 1 | awk '{print $1}' | grep -vi loaded`\necho \"PUTVAL \\\"$HOSTNAME/exec-cecoco/gauge-java_classloader_loaded\\\" interval=$INTERVAL N:$VALUE\"\n\nVALUE=`jstat -class $PID 1 1 | awk '{print $2}' | grep -vi bytes`\necho \"PUTVAL \\\"$HOSTNAME/exec-cecoco/gauge-java_classloader_bytesload\\\" interval=$INTERVAL N:$VALUE\"\n\nVALUE=`jstat -class $PID 1 1 | awk '{print $3}' | grep -vi unload`\necho \"PUTVAL \\\"$HOSTNAME/exec-cecoco/gauge-java_classloader_unloaded\\\" interval=$INTERVAL N:$VALUE\"\n\nVALUE=`jstat -class $PID 1 1 | awk '{print $4}' | grep -vi bytes`\necho \"PUTVAL \\\"$HOSTNAME/exec-cecoco/gauge-java_classloader_bytesunload\\\" interval=$INTERVAL N:$VALUE\"\n\nVALUE=`jstat -class $PID 1 1 | awk '{print $5}' | grep -vi time`\necho \"PUTVAL \\\"$HOSTNAME/exec-cecoco/gauge-java_classloader_time\\\" interval=$INTERVAL N:$VALUE\"\n}\n\nget_jmap_heapdata() {\n        VALUE=$(jmap -heap ${PID} | grep MinHeapFreeRatio |awk '{print $3}')\n        echo \"PUTVAL \\\"$HOSTNAME/exec-cecoco/gauge-jmap_minheapfreeratio\\\" interval=$INTERVAL N:$VALUE\"\n\n        VALUE=$(jmap -heap ${PID} | grep   MaxHeapFreeRatio|awk '{print $3}')\n        echo \"PUTVAL \\\"$HOSTNAME/exec-cecoco/gauge-jmap_maxheapfreeratio\\\" interval=$INTERVAL N:$VALUE\"\n\n        VALUE=$(jmap -heap ${PID} | grep   MaxHeapSize|awk '{print $3}')\n        echo \"PUTVAL \\\"$HOSTNAME/exec-cecoco/gauge-jmap_maxheapsize\\\" interval=$INTERVAL N:$VALUE\"\n}\n##Do it\nget_jmap_heapdata\nget_jstat_classloaderdata\n</code></pre>\n\n<p>Jstat succeeds and jmap fails. Does anyone understands it ?</p>\n"},{"tags":[],"owner":{"account_id":27514,"reputation":1785,"user_id":72717,"display_name":"jamshid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534630185,"creation_date":1534630185,"answer_id":51912914,"question_id":2913948,"body_markdown":"Not sure why a plain &quot;jmap &lt;pid&gt;&quot; fails when I `docker exec -it` into my container running centos7 systemd and a java service, but below jmap options worked for me. Thanks:\r\nhttps://dkbalachandar.wordpress.com/2016/07/05/thread-dump-from-a-docker-container/\r\n\r\n```\r\n[root@b29924306cfe /]# jmap 170\r\nAttaching to process ID 170, please wait...\r\nError attaching to process: sun.jvm.hotspot.debugger.DebuggerException: Can&#39;t attach to the process: ptrace(PTRACE_ATTACH, ..) failed for 170: Operation not permitted\r\nsun.jvm.hotspot.debugger.DebuggerException: sun.jvm.hotspot.debugger.DebuggerException: Can&#39;t attach to the process: ptrace(PTRACE_ATTACH, ..) failed for 170: Operation not permitted\r\n```\r\n\r\n```\r\n[root@b29924306cfe /]# jmap -dump:live,format=b,file=heapDump.hprof 170\r\nDumping heap to /heapDump.hprof ...\r\nHeap dump file created\r\n```","title":"Jmap can&#39;t connect to make a dump","body":"<p>Not sure why a plain \"jmap \" fails when I <code>docker exec -it</code> into my container running centos7 systemd and a java service, but below jmap options worked for me. Thanks:\n<a href=\"https://dkbalachandar.wordpress.com/2016/07/05/thread-dump-from-a-docker-container/\" rel=\"nofollow noreferrer\">https://dkbalachandar.wordpress.com/2016/07/05/thread-dump-from-a-docker-container/</a></p>\n\n<p><code>\n[root@b29924306cfe /]# jmap 170\nAttaching to process ID 170, please wait...\nError attaching to process: sun.jvm.hotspot.debugger.DebuggerException: Can't attach to the process: ptrace(PTRACE_ATTACH, ..) failed for 170: Operation not permitted\nsun.jvm.hotspot.debugger.DebuggerException: sun.jvm.hotspot.debugger.DebuggerException: Can't attach to the process: ptrace(PTRACE_ATTACH, ..) failed for 170: Operation not permitted\n</code></p>\n\n<p><code>\n[root@b29924306cfe /]# jmap -dump:live,format=b,file=heapDump.hprof 170\nDumping heap to /heapDump.hprof ...\nHeap dump file created\n</code></p>\n"}],"owner":{"account_id":24511,"reputation":4692,"user_id":62388,"accept_rate":100,"display_name":"Jasper Floor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95745,"favorite_count":0,"down_vote_count":0,"up_vote_count":62,"accepted_answer_id":2943651,"answer_count":14,"score":62,"last_activity_date":1636378423,"creation_date":1274884787,"question_id":2913948,"body_markdown":"We have an open beta of an app which occasionally causes the heapspace to overflow. The JVM reacts by going on a permanent vacation. \r\n\r\nTo analyze this I would like to peek into the memory at the point where it failed. Java does not want me to do this. The process is still in memory but it doesn&#39;t seem to be recognized as a java process.\r\n\r\nThe server in question is a debian Lenny server, Java 6u14\r\n\r\n    /opt/jdk/bin# ./jmap -F -dump:format=b,file=/tmp/apidump.hprof 11175\r\n    Attaching to process ID 11175, please wait...\r\n    sun.jvm.hotspot.debugger.NoSuchSymbolException: Could not find symbol &quot;gHotSpotVMTypeEntryTypeNameOffset&quot; in any of the known library names (libjvm.so, libjvm_g.so, gamma_g)\r\n    at sun.jvm.hotspot.HotSpotTypeDataBase.lookupInProcess(HotSpotTypeDataBase.java:390)\r\n    at sun.jvm.hotspot.HotSpotTypeDataBase.getLongValueFromProcess(HotSpotTypeDataBase.java:371)\r\n    at sun.jvm.hotspot.HotSpotTypeDataBase.readVMTypes(HotSpotTypeDataBase.java:102)\r\n    at sun.jvm.hotspot.HotSpotTypeDataBase.&lt;init&gt;(HotSpotTypeDataBase.java:85)\r\n    at sun.jvm.hotspot.bugspot.BugSpotAgent.setupVM(BugSpotAgent.java:568)\r\n    at sun.jvm.hotspot.bugspot.BugSpotAgent.go(BugSpotAgent.java:494)\r\n    at sun.jvm.hotspot.bugspot.BugSpotAgent.attach(BugSpotAgent.java:332)\r\n    at sun.jvm.hotspot.tools.Tool.start(Tool.java:163)\r\n    at sun.jvm.hotspot.tools.HeapDumper.main(HeapDumper.java:77)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n    at java.lang.reflect.Method.invoke(Method.java:597)\r\n    at sun.tools.jmap.JMap.runTool(JMap.java:179)\r\n    at sun.tools.jmap.JMap.main(JMap.java:110)\r\n    Debugger attached successfully.\r\n    sun.jvm.hotspot.tools.HeapDumper requires a java VM process/core!\r\n","title":"Jmap can&#39;t connect to make a dump","body":"<p>We have an open beta of an app which occasionally causes the heapspace to overflow. The JVM reacts by going on a permanent vacation. </p>\n\n<p>To analyze this I would like to peek into the memory at the point where it failed. Java does not want me to do this. The process is still in memory but it doesn't seem to be recognized as a java process.</p>\n\n<p>The server in question is a debian Lenny server, Java 6u14</p>\n\n<pre><code>/opt/jdk/bin# ./jmap -F -dump:format=b,file=/tmp/apidump.hprof 11175\nAttaching to process ID 11175, please wait...\nsun.jvm.hotspot.debugger.NoSuchSymbolException: Could not find symbol \"gHotSpotVMTypeEntryTypeNameOffset\" in any of the known library names (libjvm.so, libjvm_g.so, gamma_g)\nat sun.jvm.hotspot.HotSpotTypeDataBase.lookupInProcess(HotSpotTypeDataBase.java:390)\nat sun.jvm.hotspot.HotSpotTypeDataBase.getLongValueFromProcess(HotSpotTypeDataBase.java:371)\nat sun.jvm.hotspot.HotSpotTypeDataBase.readVMTypes(HotSpotTypeDataBase.java:102)\nat sun.jvm.hotspot.HotSpotTypeDataBase.&lt;init&gt;(HotSpotTypeDataBase.java:85)\nat sun.jvm.hotspot.bugspot.BugSpotAgent.setupVM(BugSpotAgent.java:568)\nat sun.jvm.hotspot.bugspot.BugSpotAgent.go(BugSpotAgent.java:494)\nat sun.jvm.hotspot.bugspot.BugSpotAgent.attach(BugSpotAgent.java:332)\nat sun.jvm.hotspot.tools.Tool.start(Tool.java:163)\nat sun.jvm.hotspot.tools.HeapDumper.main(HeapDumper.java:77)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat sun.tools.jmap.JMap.runTool(JMap.java:179)\nat sun.tools.jmap.JMap.main(JMap.java:110)\nDebugger attached successfully.\nsun.jvm.hotspot.tools.HeapDumper requires a java VM process/core!\n</code></pre>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":25409,"reputation":45313,"user_id":65295,"accept_rate":90,"display_name":"Seth"},"score":2,"creation_date":1268769790,"post_id":2457514,"comment_id":2446174,"body_markdown":"The limit for any 32-bit jvm on a 32-bit OS ranges from about 1.2 GB (some versions of Windows) to 2.0 GB (Solaris). 32-bit jvm on 64-bit Solaris can get 4 GB. I think the maximum 64-bit jvm on 64-bit Windows is 32GB.","body":"The limit for any 32-bit jvm on a 32-bit OS ranges from about 1.2 GB (some versions of Windows) to 2.0 GB (Solaris). 32-bit jvm on 64-bit Solaris can get 4 GB. I think the maximum 64-bit jvm on 64-bit Windows is 32GB."},{"owner":{"account_id":1661507,"reputation":9914,"user_id":1529709,"accept_rate":100,"display_name":"zb226"},"score":0,"creation_date":1373987585,"post_id":2457514,"comment_id":25756788,"body_markdown":"I would have expected a 32bit JVM on a 64bit Win7 to be able to get 4GB as well - but that isn&#39;t the case - it&#39;s those 1.5GB again... (JDK5)","body":"I would have expected a 32bit JVM on a 64bit Win7 to be able to get 4GB as well - but that isn&#39;t the case - it&#39;s those 1.5GB again... (JDK5)"}],"answers":[{"tags":[],"owner":{"account_id":69707,"reputation":41791,"user_id":202694,"accept_rate":88,"display_name":"Pace"},"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1268858070,"creation_date":1268768625,"answer_id":2457542,"question_id":2457514,"body_markdown":"The 32-bit/64-bit part is unrelated to Java\r\n\r\nIt turns out that memory locations in a 32-bit system are referenced by 32-bit unsigned integers.  This allows up to 2^32 possible memory locations.  Since each location stores 1 byte you get 2^32 bytes or 4 GB if you prefer. \r\n\r\nOn a 64 bit system there are 2^64 locations, or 16 exabytes.\r\n\r\nNow, in Windows, the contiguous part becomes a big issue, but that is just how Windows does things.  The idea is that you need to have an entire &quot;uninterrupted&quot; range for your heap.  Sadly, Windows allocates some memory somewhere in the middle.  This basically leaves you with about half the left side or half the right side, about 1.5-2GB chunks, to allocate your heap.\r\n\r\nCheck out [this question][1] for more details on 32 vs 64 bit.\r\n\r\nEdit: Thanks mrjoltcola for the exa prefix!\r\n\r\n  [1]: https://stackoverflow.com/questions/132930/32-vs-64-bits-whats-the-big-deal","title":"Understanding max JVM heap size - 32bit vs 64bit","body":"<p>The 32-bit/64-bit part is unrelated to Java</p>\n\n<p>It turns out that memory locations in a 32-bit system are referenced by 32-bit unsigned integers.  This allows up to 2^32 possible memory locations.  Since each location stores 1 byte you get 2^32 bytes or 4 GB if you prefer. </p>\n\n<p>On a 64 bit system there are 2^64 locations, or 16 exabytes.</p>\n\n<p>Now, in Windows, the contiguous part becomes a big issue, but that is just how Windows does things.  The idea is that you need to have an entire \"uninterrupted\" range for your heap.  Sadly, Windows allocates some memory somewhere in the middle.  This basically leaves you with about half the left side or half the right side, about 1.5-2GB chunks, to allocate your heap.</p>\n\n<p>Check out <a href=\"https://stackoverflow.com/questions/132930/32-vs-64-bits-whats-the-big-deal\">this question</a> for more details on 32 vs 64 bit.</p>\n\n<p>Edit: Thanks mrjoltcola for the exa prefix!</p>\n"},{"tags":[],"owner":{"account_id":94094,"reputation":20597,"user_id":257090,"accept_rate":96,"display_name":"codenheim"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1268768767,"creation_date":1268768767,"answer_id":2457561,"question_id":2457514,"body_markdown":"Contiguous simply means &quot;without gaps&quot;, one long single segment. The amount is limited by how large a segment the OS can map for your process. Whether Java requires a contiguous heap or not is an implementation issue specific to JVM and may not exist for other VMs.","title":"Understanding max JVM heap size - 32bit vs 64bit","body":"<p>Contiguous simply means \"without gaps\", one long single segment. The amount is limited by how large a segment the OS can map for your process. Whether Java requires a contiguous heap or not is an implementation issue specific to JVM and may not exist for other VMs.</p>\n"},{"tags":[],"owner":{"account_id":636373,"reputation":49,"user_id":407045,"display_name":"Thiyagarajan Ramasubbu"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1280515937,"creation_date":1280515937,"answer_id":3374504,"question_id":2457514,"body_markdown":"Contiguous memory is not the problem limiting windows to use only 1.2 GB of heap. Even though min/max heap defined, JVM would occupy max heap from system memory while starting. It will then reference only min heap within the occupied system memory until it had to expand. Contiguous memory of max heap is required to start JVM in most of the implimentation to improve performace.\r\n\r\nAs Marcus explained above the limit of 32 bit hardware is 4GB for a single process(thread). Every operating system address this 4GB diffrenetly. 4GB is majorly split as kernel space and user space. In 32 bit windows the max user space is close to 1.5 GB. There is option to boot windows with /3GB switch to have more userspace. ","title":"Understanding max JVM heap size - 32bit vs 64bit","body":"<p>Contiguous memory is not the problem limiting windows to use only 1.2 GB of heap. Even though min/max heap defined, JVM would occupy max heap from system memory while starting. It will then reference only min heap within the occupied system memory until it had to expand. Contiguous memory of max heap is required to start JVM in most of the implimentation to improve performace.</p>\n\n<p>As Marcus explained above the limit of 32 bit hardware is 4GB for a single process(thread). Every operating system address this 4GB diffrenetly. 4GB is majorly split as kernel space and user space. In 32 bit windows the max user space is close to 1.5 GB. There is option to boot windows with /3GB switch to have more userspace. </p>\n"}],"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73638,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":2457542,"answer_count":3,"score":33,"last_activity_date":1636378412,"creation_date":1268768409,"question_id":2457514,"body_markdown":"I&#39;ve [read][1] the max heap size on 32bit Windows is ~1.5GB which is due to the fact that the JVM requires contiguous memory.  Can someone explain the concept of &quot;contiguous memory&quot; and why you only have max 1.5GB on Windows?\r\n\r\nSecondly, what then is the max heap size on 64 bit Windows and why is this different than what&#39;s available on 32 bit?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/171205/java-maximum-memory-on-windows-xp","title":"Understanding max JVM heap size - 32bit vs 64bit","body":"<p>I've <a href=\"https://stackoverflow.com/questions/171205/java-maximum-memory-on-windows-xp\">read</a> the max heap size on 32bit Windows is ~1.5GB which is due to the fact that the JVM requires contiguous memory.  Can someone explain the concept of \"contiguous memory\" and why you only have max 1.5GB on Windows?</p>\n\n<p>Secondly, what then is the max heap size on 64 bit Windows and why is this different than what's available on 32 bit?</p>\n"},{"tags":["java","jvm","heap-memory","limit","suse"],"answers":[{"tags":[],"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1259006203,"creation_date":1259006203,"answer_id":1785550,"question_id":1785505,"body_markdown":"In JDK 1.4 I think you are out of luck. It&#39;s a 32-bit JVM, period. You will need to update to a much newer version of Java.","title":"jvm heap limit on SUSE","body":"<p>In JDK 1.4 I think you are out of luck. It's a 32-bit JVM, period. You will need to update to a much newer version of Java.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1259015789,"creation_date":1259006401,"answer_id":1785568,"question_id":1785505,"body_markdown":"You should be able to use -mx1960m, but not 2GB indeed. You might want to read &lt;https://bugs.java.com/bugdatabase/view_bug?bug_id=4435069&gt;.\r\n\r\nRun multiples JVMs to workaround this &quot;limitation&quot; (but, why do you need that much a heap size for?).\r\n\r\nOr update to Java 1.5 to reach the theoretical 4GB limit of a 32-bit JVM which can be much lower in practice (see &lt;http://forums.sun.com/thread.jspa?threadID=5207549&amp;start=15&gt;). But, again, why do you need that much a heap size for?","title":"jvm heap limit on SUSE","body":"<p>You should be able to use -mx1960m, but not 2GB indeed. You might want to read <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4435069\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=4435069</a>.</p>\n<p>Run multiples JVMs to workaround this &quot;limitation&quot; (but, why do you need that much a heap size for?).</p>\n<p>Or update to Java 1.5 to reach the theoretical 4GB limit of a 32-bit JVM which can be much lower in practice (see <a href=\"http://forums.sun.com/thread.jspa?threadID=5207549&amp;start=15\" rel=\"nofollow noreferrer\">http://forums.sun.com/thread.jspa?threadID=5207549&amp;start=15</a>). But, again, why do you need that much a heap size for?</p>\n"},{"tags":[],"owner":{"account_id":17132,"reputation":7519,"user_id":38031,"accept_rate":78,"display_name":"richj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1259108879,"creation_date":1259010426,"answer_id":1785969,"question_id":1785505,"body_markdown":"The JVM is limited to a single contiguous block of memory, so although you might be able to tweak a few more MB out of your system by shutting down processes that you don&#39;t really need, the only way to see a big increase is to upgrade to a 64 bit Operating System with a 64 bit JRE.\r\n\r\n**Update:** There&#39;s a related question on Stack Overflow with some nice answers: [What is the Maximum Java Heap Space for SuSE Linux](https://stackoverflow.com/questions/1059232/what-is-the-maximum-java-heap-space-for-suse-linux)","title":"jvm heap limit on SUSE","body":"<p>The JVM is limited to a single contiguous block of memory, so although you might be able to tweak a few more MB out of your system by shutting down processes that you don't really need, the only way to see a big increase is to upgrade to a 64 bit Operating System with a 64 bit JRE.</p>\n\n<p><strong>Update:</strong> There's a related question on Stack Overflow with some nice answers: <a href=\"https://stackoverflow.com/questions/1059232/what-is-the-maximum-java-heap-space-for-suse-linux\">What is the Maximum Java Heap Space for SuSE Linux</a></p>\n"},{"tags":[],"owner":{"account_id":572592,"reputation":1,"user_id":218972,"display_name":"michelangelo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1259186582,"creation_date":1259186582,"answer_id":1800254,"question_id":1785505,"body_markdown":"just a couple of updates:\r\n- on this SUSE machine (where jvm heap max size is 1960m) I can allocate 3.6Gb of heap with several malloc of 10Mb each (C programming). So it sounds quite strange to me.\r\n- on another RH4 with same jdk1.4.2 I can allocate:\r\n/usr/local/jdks/j2sdk1.4.2_16/bin/java -Xmx2648m with success!!\r\ndo you know my real RAM on this RH4? just 1024Mb!!!\r\n- both SUSE9 and RH4 are PAE enabled (i changed RAM settings easly cause I use VMWare). \r\n\r\nSo it seems a problem related to SUSE.\r\n","title":"jvm heap limit on SUSE","body":"<p>just a couple of updates:\n- on this SUSE machine (where jvm heap max size is 1960m) I can allocate 3.6Gb of heap with several malloc of 10Mb each (C programming). So it sounds quite strange to me.\n- on another RH4 with same jdk1.4.2 I can allocate:\n/usr/local/jdks/j2sdk1.4.2_16/bin/java -Xmx2648m with success!!\ndo you know my real RAM on this RH4? just 1024Mb!!!\n- both SUSE9 and RH4 are PAE enabled (i changed RAM settings easly cause I use VMWare). </p>\n\n<p>So it seems a problem related to SUSE.</p>\n"}],"owner":{"account_id":574186,"reputation":21,"user_id":217296,"display_name":"michelangelo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2356,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1636378381,"creation_date":1259005708,"question_id":1785505,"body_markdown":"I hope you can help me on the problem we have with SUSE and JDK 1.4.x:\r\nmy suse is PAE enabled with 15Gb RAM.\r\nunfotunately jvm cannot allocate more than 1900Mb for heap size.\r\nSo java -Xmx2048m gives me an error.\r\nit seems you had the same problem, did you solve it? I hope so :)\r\n\r\nthanks\r\nMichelangelo","title":"jvm heap limit on SUSE","body":"<p>I hope you can help me on the problem we have with SUSE and JDK 1.4.x:\nmy suse is PAE enabled with 15Gb RAM.\nunfotunately jvm cannot allocate more than 1900Mb for heap size.\nSo java -Xmx2048m gives me an error.\nit seems you had the same problem, did you solve it? I hope so :)</p>\n\n<p>thanks\nMichelangelo</p>\n"},{"tags":["java","jvm","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":38373,"reputation":29187,"user_id":110088,"accept_rate":100,"display_name":"Robert Greiner"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1256923771,"creation_date":1256923771,"answer_id":1651237,"question_id":1651225,"body_markdown":"The right answer is: **there is no right answer** each project is different and you will have to fine-tune your heap size configuration on a per-project basis.  I would start small and gradually increase the heap size until your application is running as intended.\r\n\r\nYou are right, setting a huge max value is not a good idea.","title":"how to choose the jvm heap size?","body":"<p>The right answer is: <strong>there is no right answer</strong> each project is different and you will have to fine-tune your heap size configuration on a per-project basis.  I would start small and gradually increase the heap size until your application is running as intended.</p>\n\n<p>You are right, setting a huge max value is not a good idea.</p>\n"},{"tags":[],"owner":{"account_id":68279,"reputation":10429,"user_id":199305,"accept_rate":75,"display_name":"J&#233; Queue"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1256924250,"creation_date":1256923916,"answer_id":1651245,"question_id":1651225,"body_markdown":"You should enable GC logging and check to see where your OOM is ocurring.\r\n\r\n    -verbose:gc\r\n    -Xloggc:gc.log  \r\n    -XX:+PrintGCTimeStamps\r\n    -XX:+PrintGCDetails\r\n\r\nYou may be experiencing perm space limits, adjust via `-XX:MaxPermSize=YYYm`\r\n\r\nAnyway to answer your question, I start with no minimums and set the maximum relatively high.  I then graph the gc log and find out where my stead state is; visually choose an above-average size for the various generations.  Read it like a financial chart, you&#39;ll want to see good spread in the new generations and a consistent growth and collection in the tenured generation.  As mentioned also graph your perm space to make sure you&#39;re not constantly increasing.\r\n\r\nGC tuning is an art, in no way a science.\r\n\r\n","title":"how to choose the jvm heap size?","body":"<p>You should enable GC logging and check to see where your OOM is ocurring.</p>\n\n<pre><code>-verbose:gc\n-Xloggc:gc.log  \n-XX:+PrintGCTimeStamps\n-XX:+PrintGCDetails\n</code></pre>\n\n<p>You may be experiencing perm space limits, adjust via <code>-XX:MaxPermSize=YYYm</code></p>\n\n<p>Anyway to answer your question, I start with no minimums and set the maximum relatively high.  I then graph the gc log and find out where my stead state is; visually choose an above-average size for the various generations.  Read it like a financial chart, you'll want to see good spread in the new generations and a consistent growth and collection in the tenured generation.  As mentioned also graph your perm space to make sure you're not constantly increasing.</p>\n\n<p>GC tuning is an art, in no way a science.</p>\n"},{"tags":[],"owner":{"account_id":55691,"reputation":7677,"user_id":166850,"accept_rate":67,"display_name":"RMorrisey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1256924427,"creation_date":1256924427,"answer_id":1651296,"question_id":1651225,"body_markdown":"If you are experiencing an OOME, I would actually start by increasing the max memory as much as you can, and see if that resolves the issue. Let your machine soak up the performance problem, first. If the problem persists, then you can look into performance diagnostics to identify bottlenecks and work on those areas where your app might be leaking or might be hogging the most memory.\r\n\r\nJeff Atwood has a nice article on CodingHorror that explains this attitude; the most cost-effective solution to a performance problem is to throw hardware (or in this case, increased memory resources) at the problem, before investing developer time in troubleshooting:\r\n\r\n[http://www.codinghorror.com/blog/archives/001198.html][1]\r\n\r\n\r\n  [1]: http://www.codinghorror.com/blog/archives/001198.html","title":"how to choose the jvm heap size?","body":"<p>If you are experiencing an OOME, I would actually start by increasing the max memory as much as you can, and see if that resolves the issue. Let your machine soak up the performance problem, first. If the problem persists, then you can look into performance diagnostics to identify bottlenecks and work on those areas where your app might be leaking or might be hogging the most memory.</p>\n\n<p>Jeff Atwood has a nice article on CodingHorror that explains this attitude; the most cost-effective solution to a performance problem is to throw hardware (or in this case, increased memory resources) at the problem, before investing developer time in troubleshooting:</p>\n\n<p><a href=\"http://www.codinghorror.com/blog/archives/001198.html\" rel=\"nofollow noreferrer\">http://www.codinghorror.com/blog/archives/001198.html</a></p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1256925266,"creation_date":1256925266,"answer_id":1651361,"question_id":1651225,"body_markdown":"Indeed, setting a huge max value blindly is not really a good idea (measure, don&#39;t guess) and this strategy will lead to very long &quot;stop the world&quot; major GCs which might not be desirable from a user experience point of view (always keep in mind that &quot;the bigger the heap, the longer the major GC&quot;).\r\n\r\nThat said, there is no generic answer to your question, every application has different needs. Actually, I&#39;d suggest to profile **your** application and tune the heap to find a good compromise between (major) GC frequency and (major) GC duration while minimizing the response time to the end user. I warmly suggest to read this great [blog post][1] (and all others) from Kirk Pepperdine for further details.\r\n\r\nJust to answer the min and max value part, I always use the same values (for better startup performances and better reproducibility).\r\n\r\n  [1]: http://kirk.blog-city.com/advice_on_jvm_heap_tuning_dont_touch_that_dial.htm","title":"how to choose the jvm heap size?","body":"<p>Indeed, setting a huge max value blindly is not really a good idea (measure, don't guess) and this strategy will lead to very long \"stop the world\" major GCs which might not be desirable from a user experience point of view (always keep in mind that \"the bigger the heap, the longer the major GC\").</p>\n\n<p>That said, there is no generic answer to your question, every application has different needs. Actually, I'd suggest to profile <strong>your</strong> application and tune the heap to find a good compromise between (major) GC frequency and (major) GC duration while minimizing the response time to the end user. I warmly suggest to read this great <a href=\"http://kirk.blog-city.com/advice_on_jvm_heap_tuning_dont_touch_that_dial.htm\" rel=\"nofollow noreferrer\">blog post</a> (and all others) from Kirk Pepperdine for further details.</p>\n\n<p>Just to answer the min and max value part, I always use the same values (for better startup performances and better reproducibility).</p>\n"},{"tags":[],"owner":{"account_id":3957,"reputation":22144,"user_id":5812,"accept_rate":56,"display_name":"Bob Cross"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1256925796,"creation_date":1256925796,"answer_id":1651404,"question_id":1651225,"body_markdown":"&gt; My question is how to choose the min\r\n&gt; and max values, and the difference\r\n&gt; between the two (should max-min be\r\n&gt; small or big?)\r\n\r\n**Short answer:** don&#39;t guess, profile your application.\r\n\r\n[jconsole can give you useful high-level data][1] such as a feeling for the main resident set vs. the transient data that we normally allocate and garbage collect.  What you&#39;ll see if you look at the memory tab of that display is usually something like a sawtooth.  The lower corner of the sawteeth is about where I would normally set the heap minimum whereas I would use the peak or slope of the sawteeth to experiment with a heap maximum.  If your teeth are very steep, you might consider a big heap just to delay the garbage collection.  However, if they aren&#39;t, you could try a smaller heap maximum to see if that might leave more resources for other processes on your machine (for example).\r\n\r\nYou should also consider the [server VM][2] as that will cause different garbage collection behavior.\r\n\r\nAll that said, you should also use a more detailed tool such as [jvisualvm to profile the memory usage of your process][3].  It&#39;s possible that you have a memory leak or greedy allocator that you could tune or eliminate.  That would completely change your heap needs.\r\n\r\n\r\n  [1]: http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html#LowMemoryDetection\r\n  [2]: http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp\r\n  [3]: http://java.sun.com/javase/6/docs/technotes/guides/visualvm/profiler.html","title":"how to choose the jvm heap size?","body":"<blockquote>\n  <p>My question is how to choose the min\n  and max values, and the difference\n  between the two (should max-min be\n  small or big?)</p>\n</blockquote>\n\n<p><strong>Short answer:</strong> don't guess, profile your application.</p>\n\n<p><a href=\"http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html#LowMemoryDetection\" rel=\"noreferrer\">jconsole can give you useful high-level data</a> such as a feeling for the main resident set vs. the transient data that we normally allocate and garbage collect.  What you'll see if you look at the memory tab of that display is usually something like a sawtooth.  The lower corner of the sawteeth is about where I would normally set the heap minimum whereas I would use the peak or slope of the sawteeth to experiment with a heap maximum.  If your teeth are very steep, you might consider a big heap just to delay the garbage collection.  However, if they aren't, you could try a smaller heap maximum to see if that might leave more resources for other processes on your machine (for example).</p>\n\n<p>You should also consider the <a href=\"http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp\" rel=\"noreferrer\">server VM</a> as that will cause different garbage collection behavior.</p>\n\n<p>All that said, you should also use a more detailed tool such as <a href=\"http://java.sun.com/javase/6/docs/technotes/guides/visualvm/profiler.html\" rel=\"noreferrer\">jvisualvm to profile the memory usage of your process</a>.  It's possible that you have a memory leak or greedy allocator that you could tune or eliminate.  That would completely change your heap needs.</p>\n"},{"tags":[],"owner":{"account_id":1683208,"reputation":31,"user_id":1547020,"display_name":"John"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1343079722,"creation_date":1343079722,"answer_id":11620973,"question_id":1651225,"body_markdown":"It&#39;s a very bad idea to &quot;ignore the -Xms parameter&quot; as there are generally other applications and processes running on the same box.  You want your application to start up with the maximum amount of RAM allocated, so if it fails, it fails while you&#39;re watching the start up logs, and not at 4:00AM when another application has taken up additional RAM on the box, and your JVM cannot grow in size.\r\n\r\nIn short, ALWAYS set JVM min and mix size with the same value.\r\n","title":"how to choose the jvm heap size?","body":"<p>It's a very bad idea to \"ignore the -Xms parameter\" as there are generally other applications and processes running on the same box.  You want your application to start up with the maximum amount of RAM allocated, so if it fails, it fails while you're watching the start up logs, and not at 4:00AM when another application has taken up additional RAM on the box, and your JVM cannot grow in size.</p>\n\n<p>In short, ALWAYS set JVM min and mix size with the same value.</p>\n"}],"owner":{"account_id":29723,"reputation":12111,"user_id":80530,"accept_rate":71,"display_name":"LB40"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38436,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":1651404,"answer_count":6,"score":29,"last_activity_date":1636378371,"creation_date":1256923649,"question_id":1651225,"body_markdown":"What i usually do concerning the jvm heap size is setting the max value really high to avoid the infamous OutOfMemoryException. \n\nHowever, this strategy (or lack of strategy) doesn&#39;t seem to be really smart. :-).\n\nMy question is how to choose the min and max values, and the difference between the two (should max-min be small or big?).\nFor instance, from [here][1]:\n\n&gt; if the initial heap is too small, the\n&gt; Java application startup becomes slow\n&gt; as the JVM is forced to perform\n&gt; garbage collection frequently until\n&gt; the heap has grown to a more\n&gt; reasonable size. For optimal startup\n&gt; performance you should set the initial\n&gt; heap size to the same as the maximum\n&gt; heap size.\n\n\nthanks.\n\n  [1]: http://download.oracle.com/docs/cd/E13188_01/jrockit/geninfo/diagnos/tune_startup.html","title":"how to choose the jvm heap size?","body":"<p>What i usually do concerning the jvm heap size is setting the max value really high to avoid the infamous OutOfMemoryException.</p>\n<p>However, this strategy (or lack of strategy) doesn't seem to be really smart. :-).</p>\n<p>My question is how to choose the min and max values, and the difference between the two (should max-min be small or big?).\nFor instance, from <a href=\"http://download.oracle.com/docs/cd/E13188_01/jrockit/geninfo/diagnos/tune_startup.html\" rel=\"noreferrer\">here</a>:</p>\n<blockquote>\n<p>if the initial heap is too small, the\nJava application startup becomes slow\nas the JVM is forced to perform\ngarbage collection frequently until\nthe heap has grown to a more\nreasonable size. For optimal startup\nperformance you should set the initial\nheap size to the same as the maximum\nheap size.</p>\n</blockquote>\n<p>thanks.</p>\n"},{"tags":["java","jvm","persistence","heap-memory"],"comments":[{"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"score":0,"creation_date":1252184865,"post_id":1384228,"comment_id":1224156,"body_markdown":"Are you looking at obtaining a heap dump? Or do you want to access the permanent generation as well?","body":"Are you looking at obtaining a heap dump? Or do you want to access the permanent generation as well?"},{"owner":{"account_id":36969,"reputation":7033,"user_id":105583,"accept_rate":96,"display_name":"G__"},"score":0,"creation_date":1252185415,"post_id":1384228,"comment_id":1224181,"body_markdown":"I&#39;m interested primarily in accessing objects from the heap (programatically!). The PermGen would give me the class definitions, which are of interest as well, but I&#39;m trying to keep my question focused. :-)","body":"I&#39;m interested primarily in accessing objects from the heap (programatically!). The PermGen would give me the class definitions, which are of interest as well, but I&#39;m trying to keep my question focused. :-)"}],"answers":[{"tags":[],"owner":{"account_id":39088,"reputation":67399,"user_id":112671,"accept_rate":79,"display_name":"Robert Munteanu"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1252184791,"creation_date":1252184791,"answer_id":1384269,"question_id":1384228,"body_markdown":"I suggest you take a  [heap dump][1] and then inspect it using [the Eclipse Memory Analyser][2].\r\n\r\nThe views available allow you to drill down to instance level, view object properties. You can even query objects using `OQL` - and SQL-like query language for objects.\r\n\r\nThe left panel in the below screenshot demonstrates inspecting field values.\r\n\r\n![screenshot][3]\r\n\r\n[1]: http://wiki.eclipse.org/index.php/MemoryAnalyzer#Getting_a_Heap_Dump\r\n[2]: http://eclipse.org/mat/\r\n[3]: http://img181.imageshack.us/img181/4013/dominatortreegrouped.png","title":"How can I access Java heap objects without a reference?","body":"<p>I suggest you take a  <a href=\"http://wiki.eclipse.org/index.php/MemoryAnalyzer#Getting_a_Heap_Dump\" rel=\"nofollow noreferrer\">heap dump</a> and then inspect it using <a href=\"http://eclipse.org/mat/\" rel=\"nofollow noreferrer\">the Eclipse Memory Analyser</a>.</p>\n\n<p>The views available allow you to drill down to instance level, view object properties. You can even query objects using <code>OQL</code> - and SQL-like query language for objects.</p>\n\n<p>The left panel in the below screenshot demonstrates inspecting field values.</p>\n\n<p><a href=\"http://img181.imageshack.us/img181/4013/dominatortreegrouped.png\" rel=\"nofollow noreferrer\">screenshot http://img181.imageshack.us/img181/4013/dominatortreegrouped.png</a></p>\n"},{"tags":[],"owner":{"account_id":52748,"reputation":14581,"user_id":157672,"accept_rate":86,"display_name":"Michael Lloyd Lee mlk"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1252185189,"creation_date":1252184847,"answer_id":1384273,"question_id":1384228,"body_markdown":"I&#39;d look into the the [instrument][1] package. Instrument the classes you are interested in so the ctor registers the created instance. You might be able to do this via AspectJ should you not want to use the java.lang.instrument or if the objects are created via something you can control (an IoC container or factories) then you can do something a good chunk less magical.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/instrument/package-summary.html","title":"How can I access Java heap objects without a reference?","body":"<p>I'd look into the the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/instrument/package-summary.html\" rel=\"nofollow noreferrer\">instrument</a> package. Instrument the classes you are interested in so the ctor registers the created instance. You might be able to do this via AspectJ should you not want to use the java.lang.instrument or if the objects are created via something you can control (an IoC container or factories) then you can do something a good chunk less magical.</p>\n"},{"tags":[],"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1252185072,"creation_date":1252185072,"answer_id":1384280,"question_id":1384228,"body_markdown":"If you want to take a heap dump programmatically, you&#39;ll not find suitable APIs in the java.* or javax.* namespace. However, the Sun runtime comes with the [HotSpotDiagnosticMXBean][1] which will enable you to take a heap dump by writing the contents of the heap on to a specified file in disk.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/jre/api/management/extension/com/sun/management/HotSpotDiagnosticMXBean.html","title":"How can I access Java heap objects without a reference?","body":"<p>If you want to take a heap dump programmatically, you'll not find suitable APIs in the java.* or javax.* namespace. However, the Sun runtime comes with the <a href=\"http://java.sun.com/javase/6/docs/jre/api/management/extension/com/sun/management/HotSpotDiagnosticMXBean.html\" rel=\"nofollow noreferrer\">HotSpotDiagnosticMXBean</a> which will enable you to take a heap dump by writing the contents of the heap on to a specified file in disk.</p>\n"}],"owner":{"account_id":36969,"reputation":7033,"user_id":105583,"accept_rate":96,"display_name":"G__"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6570,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":1384273,"answer_count":3,"score":4,"last_activity_date":1636378348,"creation_date":1252183409,"question_id":1384228,"body_markdown":"I would like to get a reference to all objects in the Java heap, even if I don&#39;t immediately have a reference to those objects in my active thread. I don&#39;t need non-referenced objects (those &quot;queued&quot; for garbage collection), but would like to get anything that&#39;s still in use. \r\n\r\nThe goal is to serialize and store all the objects to implement a poor-man&#39;s persistence of execution state. I realize that the rabbit hole goes deep when it comes to different types of transient state, but simply persisting objects &amp; loaded class definitions would be useful to me.\r\n\r\nIs there a way to access the heap in order to make this happen? Am I overlooking a more straightfoward approach?","title":"How can I access Java heap objects without a reference?","body":"<p>I would like to get a reference to all objects in the Java heap, even if I don't immediately have a reference to those objects in my active thread. I don't need non-referenced objects (those \"queued\" for garbage collection), but would like to get anything that's still in use. </p>\n\n<p>The goal is to serialize and store all the objects to implement a poor-man's persistence of execution state. I realize that the rabbit hole goes deep when it comes to different types of transient state, but simply persisting objects &amp; loaded class definitions would be useful to me.</p>\n\n<p>Is there a way to access the heap in order to make this happen? Am I overlooking a more straightfoward approach?</p>\n"},{"tags":["java","jvm","heap-memory","virtual"],"comments":[{"owner":{"account_id":3579,"reputation":53945,"user_id":5171,"accept_rate":100,"display_name":"Dan Dyer"},"score":0,"creation_date":1255550556,"post_id":1230442,"comment_id":1428595,"body_markdown":"How much RAM does your VPS have in total?","body":"How much RAM does your VPS have in total?"},{"owner":{"account_id":79673,"reputation":40911,"user_id":225757,"accept_rate":72,"display_name":"Roland Illig"},"score":0,"creation_date":1277456988,"post_id":1230442,"comment_id":3198750,"body_markdown":"Run the `ulimit -a` and `ulimit -Ha` commands and read the manual to understand what their output means.","body":"Run the <code>ulimit -a</code> and <code>ulimit -Ha</code> commands and read the manual to understand what their output means."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1249429472,"creation_date":1249429138,"answer_id":1230460,"question_id":1230442,"body_markdown":"I wonder whether the environment you&#39;re running in has set an explicit limit on the amount of memory your process is allowed to use, and even your *minimum* value is exceeding that - hence the inability to create the JVM.\r\n\r\nI suggest you ask the hosting company what restrictions they put on memory.\r\n\r\nIf you make the limits far more modest (e.g. 64M and 128M) does Tomcat start? (I realise this may well not be enough for you, but it would help to diagnose the problem.)","title":"Increasing Java Heap size on Virtual server?","body":"<p>I wonder whether the environment you're running in has set an explicit limit on the amount of memory your process is allowed to use, and even your <em>minimum</em> value is exceeding that - hence the inability to create the JVM.</p>\n\n<p>I suggest you ask the hosting company what restrictions they put on memory.</p>\n\n<p>If you make the limits far more modest (e.g. 64M and 128M) does Tomcat start? (I realise this may well not be enough for you, but it would help to diagnose the problem.)</p>\n"},{"tags":[],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1249429934,"creation_date":1249429934,"answer_id":1230501,"question_id":1230442,"body_markdown":"If its a hosting provider, most likely they limit you the amount of RAM you are allowed to use in your part of the server?   I would enable the JMX service and use jconsole.exe to try to attach to the JVM to see its properties.\r\n\r\n    set JAVA_OPTS=%JAVA_OPTS% -Xdebug -Xrunjdwp:transport=dt_socket,address=8001,server=y,suspend=n","title":"Increasing Java Heap size on Virtual server?","body":"<p>If its a hosting provider, most likely they limit you the amount of RAM you are allowed to use in your part of the server?   I would enable the JMX service and use jconsole.exe to try to attach to the JVM to see its properties.</p>\n\n<pre><code>set JAVA_OPTS=%JAVA_OPTS% -Xdebug -Xrunjdwp:transport=dt_socket,address=8001,server=y,suspend=n\n</code></pre>\n"}],"owner":{"display_name":"Tony"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1636378337,"creation_date":1249428791,"question_id":1230442,"body_markdown":"Peeps, \r\n\r\nI&#39;m hosting our dev env on a virtual server over at Mediatemple - the $50 bucks a month kind. Our application does some fairly memory intensive processing and on the last run, ran into the OutofMemError.  \r\n\r\nApparently increasing the JVM size using the usual methods of setting JAVA_OPT or CATALINA_OPT in the setenv.sh file doesnt take. Upon startup of tomcat, it throws the unable to create JVM... error. \r\n\r\nMy setenv.sh file has the following:\r\n\r\nexport CATALINA_OPTS=&#39;-Xms512m -Xmx1024m&#39;\r\n\r\nAny help would be much appreciated. ","title":"Increasing Java Heap size on Virtual server?","body":"<p>Peeps, </p>\n\n<p>I'm hosting our dev env on a virtual server over at Mediatemple - the $50 bucks a month kind. Our application does some fairly memory intensive processing and on the last run, ran into the OutofMemError.  </p>\n\n<p>Apparently increasing the JVM size using the usual methods of setting JAVA_OPT or CATALINA_OPT in the setenv.sh file doesnt take. Upon startup of tomcat, it throws the unable to create JVM... error. </p>\n\n<p>My setenv.sh file has the following:</p>\n\n<p>export CATALINA_OPTS='-Xms512m -Xmx1024m'</p>\n\n<p>Any help would be much appreciated. </p>\n"},{"tags":["java","newrelic"],"comments":[{"owner":{"account_id":3068754,"reputation":2677,"user_id":2599899,"display_name":"Arthur Klezovich"},"score":0,"creation_date":1636380704,"post_id":69884318,"comment_id":123533976,"body_markdown":"What technology are you using for caching ?","body":"What technology are you using for caching ?"},{"owner":{"account_id":8699022,"reputation":69,"user_id":6509544,"display_name":"Paride Rama"},"score":0,"creation_date":1636383801,"post_id":69884318,"comment_id":123535327,"body_markdown":"@ArthurKlezovich CacheManager of org.springframework.cache","body":"@ArthurKlezovich CacheManager of org.springframework.cache"},{"owner":{"account_id":3068754,"reputation":2677,"user_id":2599899,"display_name":"Arthur Klezovich"},"score":0,"creation_date":1636383962,"post_id":69884318,"comment_id":123535379,"body_markdown":"You need to use the combination of these two https://stackoverflow.com/questions/58475039/monitoring-spring-boot-cache-metrics-with-prometheus and https://newrelic.com/blog/how-to-relic/how-to-monitor-spring-boot-applications-using-micrometer-metrics","body":"You need to use the combination of these two <a href=\"https://stackoverflow.com/questions/58475039/monitoring-spring-boot-cache-metrics-with-prometheus\" title=\"monitoring spring boot cache metrics with prometheus\">stackoverflow.com/questions/58475039/&hellip;</a> and <a href=\"https://newrelic.com/blog/how-to-relic/how-to-monitor-spring-boot-applications-using-micrometer-metrics\" rel=\"nofollow noreferrer\">newrelic.com/blog/how-to-relic/&hellip;</a>"}],"owner":{"account_id":8699022,"reputation":69,"user_id":6509544,"display_name":"Paride Rama"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1636378314,"creation_date":1636378314,"question_id":69884318,"body_markdown":"We have cache consumption problems in an application monitored by New Relic.\r\nHow can I see the memory consumption by filtering for the cache part?","title":"See cache application consumption into New Relic","body":"<p>We have cache consumption problems in an application monitored by New Relic.\nHow can I see the memory consumption by filtering for the cache part?</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1636369317,"post_id":69882395,"comment_id":123529293,"body_markdown":"Does this answer your question? [How can I add users to the inMemoryAuthentication builder after it has been built?](https://stackoverflow.com/questions/25869260/how-can-i-add-users-to-the-inmemoryauthentication-builder-after-it-has-been-buil)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/25869260/how-can-i-add-users-to-the-inmemoryauthentication-builder-after-it-has-been-buil\">How can I add users to the inMemoryAuthentication builder after it has been built?</a>"},{"owner":{"account_id":2544269,"reputation":157,"user_id":2209414,"accept_rate":29,"display_name":"kamilf"},"score":0,"creation_date":1636371424,"post_id":69882395,"comment_id":123530062,"body_markdown":"@xerx593: I tried. It does not work. I do not understand. I inject InMemoryUserDetailsManager and call .createUser(). I see there are 2 users (one from first .jar, and second from this code). It looks correctly. But then I use postman to request endpoint and I see in debugger it tries to InMemoryUserDetailsManager::loadByUsername(), but InMemoryUserDetailsManager is a different instance with only one user from the first .jar.","body":"@xerx593: I tried. It does not work. I do not understand. I inject InMemoryUserDetailsManager and call .createUser(). I see there are 2 users (one from first .jar, and second from this code). It looks correctly. But then I use postman to request endpoint and I see in debugger it tries to InMemoryUserDetailsManager::loadByUsername(), but InMemoryUserDetailsManager is a different instance with only one user from the first .jar."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1636373081,"post_id":69882395,"comment_id":123530687,"body_markdown":"..you have to add it before/while &quot;security is setup&quot; (i.e. in the right order): you would override `void configure(AuthenticationManagerBuilder a)` ...ideally(/additonally) you could access (the &quot;lib&quot; would expose) the &quot;user details manager&quot; bean...","body":"..you have to add it before/while &quot;security is setup&quot; (i.e. in the right order): you would override <code>void configure(AuthenticationManagerBuilder a)</code> ...ideally(/additonally) you could access (the &quot;lib&quot; would expose) the &quot;user details manager&quot; bean..."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1636374086,"post_id":69882395,"comment_id":123531104,"body_markdown":"you can post(&amp; accept) an own answer! ;)","body":"you can post(&amp; accept) an own answer! ;)"}],"answers":[{"tags":[],"owner":{"account_id":2544269,"reputation":157,"user_id":2209414,"accept_rate":29,"display_name":"kamilf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1636377800,"creation_date":1636374097,"answer_id":69883379,"question_id":69882395,"body_markdown":"Finally in my second project I just extended AuthConfiguration class from the first project in this way:\r\n\r\n\t@Configuration\r\n\t@Order(90)\r\n\tpublic class SecondProjectConfiguration extends AuthConfiguration {\r\n\r\n\t\t@Override\r\n\t\tprotected void configure(AuthenticationManagerBuilder authManagerBuilder) throws Exception {\r\n\t\t\tsuper.configure(authManagerBuilder); // it creates FOO user\r\n\r\n\t\t\tUser.UserBuilder users = User.withDefaultPasswordEncoder();\r\n\t\t\tauthManagerBuilder.inMemoryAuthentication()\r\n\t\t\t    .withUser(users.username(&quot;FOO2&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;).build());\r\n\t\t}\t\r\n\t}\r\nand it works correctly. `Order(90)` was needed also because AuthConfiguration has default Order 100, and it was stopping application with errors on start. Very simple approach but tried it as last.","title":"Spring Security extend configuration from other jar","body":"<p>Finally in my second project I just extended AuthConfiguration class from the first project in this way:</p>\n<pre><code>@Configuration\n@Order(90)\npublic class SecondProjectConfiguration extends AuthConfiguration {\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder authManagerBuilder) throws Exception {\n        super.configure(authManagerBuilder); // it creates FOO user\n\n        User.UserBuilder users = User.withDefaultPasswordEncoder();\n        authManagerBuilder.inMemoryAuthentication()\n            .withUser(users.username(&quot;FOO2&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;).build());\n    }   \n}\n</code></pre>\n<p>and it works correctly. <code>Order(90)</code> was needed also because AuthConfiguration has default Order 100, and it was stopping application with errors on start. Very simple approach but tried it as last.</p>\n"},{"tags":[],"owner":{"account_id":11789907,"reputation":1,"user_id":8626380,"display_name":"trungdo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636378307,"creation_date":1636378307,"answer_id":69884316,"question_id":69882395,"body_markdown":"Another approach you can take is to use a custom bean (say UserFactory) to your configuration in the first project and use it to retrieve all the users and add to in-memory user manager\r\n\r\n```\r\n    @Autowired(required = false)\r\n    UserFactory userFactory;\r\n\r\n    @Override\r\n    protected void configure(AuthenticationManagerBuilder authManagerBuilder) throws Exception {\r\n        User.UserBuilder users = User.withDefaultPasswordEncoder();\r\n        InMemoryUserDetailsManagerConfigurer configurer = authManagerBuilder.inMemoryAuthentication();\r\n        configurer.withUser(users.username(&quot;FOO&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;).build());\r\n        if (userFactory != null) {\r\n            for (UserDetails userDetails: userFactory.getUsers()) {\r\n                configurer.withUser(userDetails);\r\n            }\r\n        }\r\n    }\r\n```\r\nAnd in your second project, you define the bean and add the additional users:\r\n\r\n```\r\n    @Bean\r\n    public UserFactory userFactory() {\r\n        UserFactory userFactory = new UserFactory();\r\n        User.UserBuilder user = User.withDefaultPasswordEncoder();\r\n        userFactory.addUser(user.username(&quot;FOO2&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;).build());\r\n        return userFactory;\r\n    }\r\n```\r\n\r\nThis might suit better if you have many default users and want to avoid re-typing them in the extended configuration class.","title":"Spring Security extend configuration from other jar","body":"<p>Another approach you can take is to use a custom bean (say UserFactory) to your configuration in the first project and use it to retrieve all the users and add to in-memory user manager</p>\n<pre><code>    @Autowired(required = false)\n    UserFactory userFactory;\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder authManagerBuilder) throws Exception {\n        User.UserBuilder users = User.withDefaultPasswordEncoder();\n        InMemoryUserDetailsManagerConfigurer configurer = authManagerBuilder.inMemoryAuthentication();\n        configurer.withUser(users.username(&quot;FOO&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;).build());\n        if (userFactory != null) {\n            for (UserDetails userDetails: userFactory.getUsers()) {\n                configurer.withUser(userDetails);\n            }\n        }\n    }\n</code></pre>\n<p>And in your second project, you define the bean and add the additional users:</p>\n<pre><code>    @Bean\n    public UserFactory userFactory() {\n        UserFactory userFactory = new UserFactory();\n        User.UserBuilder user = User.withDefaultPasswordEncoder();\n        userFactory.addUser(user.username(&quot;FOO2&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;).build());\n        return userFactory;\n    }\n</code></pre>\n<p>This might suit better if you have many default users and want to avoid re-typing them in the extended configuration class.</p>\n"}],"owner":{"account_id":2544269,"reputation":157,"user_id":2209414,"accept_rate":29,"display_name":"kamilf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":507,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69883379,"answer_count":2,"score":1,"last_activity_date":1636378307,"creation_date":1636369145,"question_id":69882395,"body_markdown":"I have an application that has dependency where the security is defined. Typical config:\r\n\r\n    @Configuration\r\n\t@EnableWebSecurity\r\n\tpublic class AuthConfiguration extends WebSecurityConfigurerAdapter {\r\n\t\t\r\n\t\t@Override\r\n\t\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\t\thttp\r\n\t\t\t\t.authorizeRequests()\r\n\t\t\t\t.antMatchers(DEFAULT_PERMIT_ALL_PATHS).permitAll()\r\n\t\t\t\t.and()\r\n\t\t\t\t.authorizeRequests().anyRequest().authenticated()\r\n\t\t\t\t.and()\r\n\t\t\t\t.exceptionHandling()\r\n\t\t\t\t.and()\r\n\t\t\t\t.csrf().disable().httpBasic();\r\n\t\t}        \r\n\r\n\t\t@Override\r\n\t\tprotected void configure(AuthenticationManagerBuilder authManagerBuilder) throws Exception {\r\n\t\t\tUser.UserBuilder users = User.withDefaultPasswordEncoder();\r\n\t\t\tauthManagerBuilder.inMemoryAuthentication().withUser(users.username(&quot;FOO&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;).build());\r\n\t\t}\r\n\t}\r\n\r\nThe above is the first project. And I have a second project where I have a POM dependency for this above. Now I would like to add an additional user, but I have to do this in my second project where there is just dependency to the first project with security.\r\n\r\nI can copy&amp;paste the whole AuthConfiguration, then I have 2 security filter chains but it is rather a bad idea. The app starts processing requests looking at what destination URI is. Two filter chains have the same antMatchers (I only want to add additional users) and only one filter chain is being processed. As a result, it works partially - user from the first or second project works (it depends on @Order of AuthConfiguration).\r\n\r\nMaybe somehow it is possible to inject for instance AuthenticationManagerBuilder in my second project and extend/add additional users? I tried but it does not work. I added such code in the second project:\r\n\r\n\t@Configuration\r\n\tpublic class AdditionalUsersConfiguration() {\r\n\r\n\t\tpublic AdditionalUsersConfiguration(AuthenticationManagerBuilder builder) throws Exception {\r\n\t\t\tUser.UserBuilder users = User.withDefaultPasswordEncoder();\r\n\r\n\t\t\tauthManagerBuilder.inMemoryAuthentication()\r\n\t\t\t.withUser(users.username(&quot;FOO&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;)\r\n\t\t\t.withUser(users.username(&quot;FOO2&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;).build());\r\n\t\t}\r\n\t}\r\nOnly first user FOO works, what looks like it is from the first project where it is defined.\r\n\r\n**Edit: I tried also approach from this question** https://stackoverflow.com/questions/25869260/how-can-i-add-users-to-the-inmemoryauthentication-builder-after-it-has-been-buil\r\nI added this code in my second project:\r\n\r\n\t@Configuration\r\n\tpublic class NextApproachConfiguration() {\r\n\r\n\t    public NextApproachConfiguration(InMemoryUserDetailsManager manager) throws Exception {\r\n\t \t\tmanager.createUser(new User(&quot;FOO2&quot;, &quot;BAR&quot;, new ArrayList&lt;GrantedAuthority&gt;()));\r\n\t \t\t// in debugger here I see two users [FOO, FOO2]\r\n\t    }\r\n\t}\r\n\r\nIt looks good. In debugger (comment in code) I see user from the first project and new user. But when I request endpoint with postman I see internally in debugger how it calls to InMemoryUserDetailsManager::loadByUsername() and this manager has different instance than where I added user two. And it only has one user from the first project. \r\nWhen I start app with debbuger I see that firstly is executed my above code where I add second user, and then is executed code from the first project (AuthConfiguration class) where AuthenticationManagerBuilder::inMemoryAuthentication goes to InMemoryUserDetailsManagerConfigurer where creates new instance of InMemoryUserDetailsManager using **new** keyword.\r\n","title":"Spring Security extend configuration from other jar","body":"<p>I have an application that has dependency where the security is defined. Typical config:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class AuthConfiguration extends WebSecurityConfigurerAdapter {\n    \n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .authorizeRequests()\n            .antMatchers(DEFAULT_PERMIT_ALL_PATHS).permitAll()\n            .and()\n            .authorizeRequests().anyRequest().authenticated()\n            .and()\n            .exceptionHandling()\n            .and()\n            .csrf().disable().httpBasic();\n    }        \n\n    @Override\n    protected void configure(AuthenticationManagerBuilder authManagerBuilder) throws Exception {\n        User.UserBuilder users = User.withDefaultPasswordEncoder();\n        authManagerBuilder.inMemoryAuthentication().withUser(users.username(&quot;FOO&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;).build());\n    }\n}\n</code></pre>\n<p>The above is the first project. And I have a second project where I have a POM dependency for this above. Now I would like to add an additional user, but I have to do this in my second project where there is just dependency to the first project with security.</p>\n<p>I can copy&amp;paste the whole AuthConfiguration, then I have 2 security filter chains but it is rather a bad idea. The app starts processing requests looking at what destination URI is. Two filter chains have the same antMatchers (I only want to add additional users) and only one filter chain is being processed. As a result, it works partially - user from the first or second project works (it depends on @Order of AuthConfiguration).</p>\n<p>Maybe somehow it is possible to inject for instance AuthenticationManagerBuilder in my second project and extend/add additional users? I tried but it does not work. I added such code in the second project:</p>\n<pre><code>@Configuration\npublic class AdditionalUsersConfiguration() {\n\n    public AdditionalUsersConfiguration(AuthenticationManagerBuilder builder) throws Exception {\n        User.UserBuilder users = User.withDefaultPasswordEncoder();\n\n        authManagerBuilder.inMemoryAuthentication()\n        .withUser(users.username(&quot;FOO&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;)\n        .withUser(users.username(&quot;FOO2&quot;).password(&quot;BAR&quot;).roles(&quot;USER&quot;).build());\n    }\n}\n</code></pre>\n<p>Only first user FOO works, what looks like it is from the first project where it is defined.</p>\n<p><strong>Edit: I tried also approach from this question</strong> <a href=\"https://stackoverflow.com/questions/25869260/how-can-i-add-users-to-the-inmemoryauthentication-builder-after-it-has-been-buil\">How can I add users to the inMemoryAuthentication builder after it has been built?</a>\nI added this code in my second project:</p>\n<pre><code>@Configuration\npublic class NextApproachConfiguration() {\n\n    public NextApproachConfiguration(InMemoryUserDetailsManager manager) throws Exception {\n        manager.createUser(new User(&quot;FOO2&quot;, &quot;BAR&quot;, new ArrayList&lt;GrantedAuthority&gt;()));\n        // in debugger here I see two users [FOO, FOO2]\n    }\n}\n</code></pre>\n<p>It looks good. In debugger (comment in code) I see user from the first project and new user. But when I request endpoint with postman I see internally in debugger how it calls to InMemoryUserDetailsManager::loadByUsername() and this manager has different instance than where I added user two. And it only has one user from the first project.\nWhen I start app with debbuger I see that firstly is executed my above code where I add second user, and then is executed code from the first project (AuthConfiguration class) where AuthenticationManagerBuilder::inMemoryAuthentication goes to InMemoryUserDetailsManagerConfigurer where creates new instance of InMemoryUserDetailsManager using <strong>new</strong> keyword.</p>\n"},{"tags":["java","jvm","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":208517,"reputation":173,"user_id":459050,"accept_rate":0,"display_name":"ggg"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1297286597,"creation_date":1297286597,"answer_id":4950614,"question_id":4950450,"body_markdown":" I have collected a number of resources for large pages, for Java and other environments / applications / OSes / hardware (MySql, Linux, Sparc, AMD).\r\nSome people get very significant increases in performance.\r\nhttp://zzzoot.blogspot.com/2009/02/java-mysql-increased-performance-with.html\r\n[Note I last updated this page 2010/07]","title":"Java and UseLargePages","body":"<p>I have collected a number of resources for large pages, for Java and other environments / applications / OSes / hardware (MySql, Linux, Sparc, AMD).\nSome people get very significant increases in performance.\n<a href=\"http://zzzoot.blogspot.com/2009/02/java-mysql-increased-performance-with.html\" rel=\"noreferrer\">http://zzzoot.blogspot.com/2009/02/java-mysql-increased-performance-with.html</a>\n[Note I last updated this page 2010/07]</p>\n"}],"owner":{"account_id":126901,"reputation":361,"user_id":323718,"display_name":"DavidD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8513,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1636378298,"creation_date":1297285616,"question_id":4950450,"body_markdown":"We have a number large heap (6-12Gb, some larger) JVM servers. I&#39;m considering configuring Linux for large page support. As usual YMMV, but for those of you that have availed yourselves of this capability, how much difference did it make for your situation? How important is the choice of page size specified in LargePageSizeInBytes?\r\n\r\nThanks,\r\n\r\nDavid\r\n","title":"Java and UseLargePages","body":"<p>We have a number large heap (6-12Gb, some larger) JVM servers. I'm considering configuring Linux for large page support. As usual YMMV, but for those of you that have availed yourselves of this capability, how much difference did it make for your situation? How important is the choice of page size specified in LargePageSizeInBytes?</p>\n\n<p>Thanks,</p>\n\n<p>David</p>\n"},{"tags":["java","jvm","heap-memory","jvm-hotspot","jvm-arguments"],"answers":[{"tags":[],"owner":{"account_id":41850,"reputation":132318,"user_id":121747,"accept_rate":89,"display_name":"Jack"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1300471323,"creation_date":1300471021,"answer_id":5355980,"question_id":5355933,"body_markdown":"You could as usually invoke the `System.gc()` method before allocating the additional 200MB of objects but this will just be a hint to the JVM that it can or can&#39;t follow and in anycase you won&#39;t know when this takes place.. as stated inside documentation it is a best-effort request.\r\n\r\nBy the way take into account that garbage collection is an heavy operation so if there&#39;s no specific need to do it, just don&#39;t try to force it.\r\n\r\nJust to know: if you set `-Xmx1G` then you are telling to the JVM that 1GB is the maximum space for the heap, and since you are specifying that, I don&#39;t see why it should try to keep it low if it knows that 1GB will be still ok (we&#39;re in the context of memory-managed languages). If you don&#39;t want the heap to increase that much just decrease the maximum value so that it will be forced to do GC before allocating new objects, otherwise why are you telling it to use 1GB?","title":"Encourage the JVM to GC rather than grow the heap?","body":"<p>You could as usually invoke the <code>System.gc()</code> method before allocating the additional 200MB of objects but this will just be a hint to the JVM that it can or can't follow and in anycase you won't know when this takes place.. as stated inside documentation it is a best-effort request.</p>\n\n<p>By the way take into account that garbage collection is an heavy operation so if there's no specific need to do it, just don't try to force it.</p>\n\n<p>Just to know: if you set <code>-Xmx1G</code> then you are telling to the JVM that 1GB is the maximum space for the heap, and since you are specifying that, I don't see why it should try to keep it low if it knows that 1GB will be still ok (we're in the context of memory-managed languages). If you don't want the heap to increase that much just decrease the maximum value so that it will be forced to do GC before allocating new objects, otherwise why are you telling it to use 1GB?</p>\n"},{"tags":[],"owner":{"account_id":329612,"reputation":71055,"user_id":653230,"display_name":"WhiteFang34"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1300473040,"creation_date":1300471514,"answer_id":5356055,"question_id":5355933,"body_markdown":"You could try specifying `-XX:MinHeapFreeRatio` and `-XX:MaxHeapFreeRatio` to control heap expansion and shrinking:\r\n\r\n- `-XX:MinHeapFreeRatio` - when the percentage of free space in a generation falls below this value the generation will be expanded to meet this percentage. Default is 40.\r\n- `-XX:MaxHeapFreeRatio` - when the percentage of free space in a generation exceeded this value the generation will shrink to meet this value. Default is 70.\r\n\r\nYou might also want to experiment with concurrent GC by specifying `-XX:+UseConcMarkSweepGC`. Depending on your application it could keep the heap size lower at the cost of additional CPU cycles.\r\n\r\nThe JVM is otherwise going to use the memory you specify as available when it&#39;s optimal do to so. You could specify a lower amount like `-Xmx768m` to keep it contained and it might run fine, although you would increase your risk of running out of memory in a heavy load scenario. Really the only way to use less memory overall is to write code that uses less memory :)","title":"Encourage the JVM to GC rather than grow the heap?","body":"<p>You could try specifying <code>-XX:MinHeapFreeRatio</code> and <code>-XX:MaxHeapFreeRatio</code> to control heap expansion and shrinking:</p>\n\n<ul>\n<li><code>-XX:MinHeapFreeRatio</code> - when the percentage of free space in a generation falls below this value the generation will be expanded to meet this percentage. Default is 40.</li>\n<li><code>-XX:MaxHeapFreeRatio</code> - when the percentage of free space in a generation exceeded this value the generation will shrink to meet this value. Default is 70.</li>\n</ul>\n\n<p>You might also want to experiment with concurrent GC by specifying <code>-XX:+UseConcMarkSweepGC</code>. Depending on your application it could keep the heap size lower at the cost of additional CPU cycles.</p>\n\n<p>The JVM is otherwise going to use the memory you specify as available when it's optimal do to so. You could specify a lower amount like <code>-Xmx768m</code> to keep it contained and it might run fine, although you would increase your risk of running out of memory in a heavy load scenario. Really the only way to use less memory overall is to write code that uses less memory :)</p>\n"},{"tags":[],"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1300516137,"creation_date":1300516137,"answer_id":5360566,"question_id":5355933,"body_markdown":"I&#39;d recommend taking a peek here:\r\n\r\nhttp://www.petefreitag.com/articles/gctuning/","title":"Encourage the JVM to GC rather than grow the heap?","body":"<p>I'd recommend taking a peek here:</p>\n\n<p><a href=\"http://www.petefreitag.com/articles/gctuning/\" rel=\"nofollow\">http://www.petefreitag.com/articles/gctuning/</a></p>\n"},{"tags":[],"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1616576417,"creation_date":1422611829,"answer_id":28233272,"question_id":5355933,"body_markdown":"**Update** Java 15 added two more collectors. Some of the relevant options in `ZGC` are:\r\n\r\n  - `-XX:+UseZGC` enable ZGC\r\n  - `-XX:+ZProactive` and `-XX:+ZUncommit` Both are enabled by default. ZGC will proactively try to both free garbage objects and to release the freed memory to the OS. The rest of the options tweak how aggressively it&#39;s done.\r\n  - `-XX:ZCollectionInterval=seconds` How often the GC runs. Set to a few seconds to ensure that garbage is cleaned up as quickly as possible. (By default it&#39;s 0, ie no guarantee the GC will run.)\r\n  - `-XX:ZUncommitDelay=seconds` Sets the amount of time (in seconds) that heap memory must have been unused before being uncommitted. By default, this option is set to 300 (5 minutes). Set a lower value to get back the memory more quickly\r\n  - [`-XX:SoftMaxHeapSize`](https://malloc.se/blog/zgc-softmaxheapsize) The GC will fire more often whenever the application uses more memory than this limit. (This is probably the answer the OP is looking for.)\r\n  - `-XX:SoftRefLRUPolicyMSPerMB` Not sure how often this option is relevant, but it controls how long some cached objects remain in memory.\r\n\r\n&lt;hr/&gt;\r\n\r\n**Original Answer** There are four (actually, five) different garbage collectors in HotSpot, and your options are different for each one.\r\n\r\n* The serial collector has `-XX:MinHeapFreeRatio` and `-XX:MaxHeapFreeRatio`, which let you more or less directly control the behavior. I don&#39;t have much experience with the serial collector however.\r\n* The parallel collector (`-XX:+UseParallelOldGC`) has `-XX:MaxGCPauseMillis=&lt;millis&gt;` and `-XX:GCTimeRatio=&lt;N&gt;`. Setting a lower maximum pause time generally causes the collector to make the heap smaller. However, if the pause time is already small the heap won&#39;t become smaller. OTOH, if the max pause time is set too low, the application may spend all of its time collecting. Setting a lower gc time ratio also generally makes the heap smaller. You are telling the gc that you&#39;re willing to dedicate more CPU time to collection in return for a smaller heap. However, this is just a hint and may have no effect. In my opinion, the parallel collector is close to untunable for the purpose of minimizing the heap&#39;s size. This collector works better (it tunes itself) if you let it run for a while and the application&#39;s behavior stays constant.\r\n* The CMS collector (`-XX:+UseConcMarkSweepGC`) generally requires a larger heap to accomplish its main goal of low pause time, so I won&#39;t discuss it.\r\n* The new G1 collector (`-XX:+UseG1GC`) isn&#39;t as brain-dead as the older collectors. I find that it chooses a smaller heap size on its own. It has a lot of tuning options, although I&#39;ve only begun to study them. `-XX:InitiatingHeapOccupancyPercent`, `-XX:G1HeapWastePercent`, `-XX:G1ReservePercent` and `-XX:G1MaxNewSizePercent` may be of interest.\r\n\r\nTake a look at the [list of `java` flags](https://docs.oracle.com/en/java/javase/16/docs/specs/man/java.html).","title":"Encourage the JVM to GC rather than grow the heap?","body":"<p><strong>Update</strong> Java 15 added two more collectors. Some of the relevant options in <code>ZGC</code> are:</p>\n<ul>\n<li><code>-XX:+UseZGC</code> enable ZGC</li>\n<li><code>-XX:+ZProactive</code> and <code>-XX:+ZUncommit</code> Both are enabled by default. ZGC will proactively try to both free garbage objects and to release the freed memory to the OS. The rest of the options tweak how aggressively it's done.</li>\n<li><code>-XX:ZCollectionInterval=seconds</code> How often the GC runs. Set to a few seconds to ensure that garbage is cleaned up as quickly as possible. (By default it's 0, ie no guarantee the GC will run.)</li>\n<li><code>-XX:ZUncommitDelay=seconds</code> Sets the amount of time (in seconds) that heap memory must have been unused before being uncommitted. By default, this option is set to 300 (5 minutes). Set a lower value to get back the memory more quickly</li>\n<li><a href=\"https://malloc.se/blog/zgc-softmaxheapsize\" rel=\"nofollow noreferrer\"><code>-XX:SoftMaxHeapSize</code></a> The GC will fire more often whenever the application uses more memory than this limit. (This is probably the answer the OP is looking for.)</li>\n<li><code>-XX:SoftRefLRUPolicyMSPerMB</code> Not sure how often this option is relevant, but it controls how long some cached objects remain in memory.</li>\n</ul>\n<hr/>\n<p><strong>Original Answer</strong> There are four (actually, five) different garbage collectors in HotSpot, and your options are different for each one.</p>\n<ul>\n<li>The serial collector has <code>-XX:MinHeapFreeRatio</code> and <code>-XX:MaxHeapFreeRatio</code>, which let you more or less directly control the behavior. I don't have much experience with the serial collector however.</li>\n<li>The parallel collector (<code>-XX:+UseParallelOldGC</code>) has <code>-XX:MaxGCPauseMillis=&lt;millis&gt;</code> and <code>-XX:GCTimeRatio=&lt;N&gt;</code>. Setting a lower maximum pause time generally causes the collector to make the heap smaller. However, if the pause time is already small the heap won't become smaller. OTOH, if the max pause time is set too low, the application may spend all of its time collecting. Setting a lower gc time ratio also generally makes the heap smaller. You are telling the gc that you're willing to dedicate more CPU time to collection in return for a smaller heap. However, this is just a hint and may have no effect. In my opinion, the parallel collector is close to untunable for the purpose of minimizing the heap's size. This collector works better (it tunes itself) if you let it run for a while and the application's behavior stays constant.</li>\n<li>The CMS collector (<code>-XX:+UseConcMarkSweepGC</code>) generally requires a larger heap to accomplish its main goal of low pause time, so I won't discuss it.</li>\n<li>The new G1 collector (<code>-XX:+UseG1GC</code>) isn't as brain-dead as the older collectors. I find that it chooses a smaller heap size on its own. It has a lot of tuning options, although I've only begun to study them. <code>-XX:InitiatingHeapOccupancyPercent</code>, <code>-XX:G1HeapWastePercent</code>, <code>-XX:G1ReservePercent</code> and <code>-XX:G1MaxNewSizePercent</code> may be of interest.</li>\n</ul>\n<p>Take a look at the <a href=\"https://docs.oracle.com/en/java/javase/16/docs/specs/man/java.html\" rel=\"nofollow noreferrer\">list of <code>java</code> flags</a>.</p>\n"}],"owner":{"account_id":10164,"reputation":37193,"user_id":19074,"accept_rate":68,"display_name":"Electrons_Ahoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20701,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":4,"score":21,"last_activity_date":1636378286,"creation_date":1300470719,"question_id":5355933,"body_markdown":"(Note that when I say &quot;JVM&quot;, I really mean &quot;Hotspot&quot;, and I&#39;m running the latest Java 1.6 update.)\r\n\r\nExample situation:\r\n\r\nMy JVM is running with -Xmx set to 1gb.  Currently, the heap has 500mb allocated, of which 450mb is used.  The program needs to load another 200 mb on the heap.  Currently, there is 300mb worth of &quot;collectable&quot; garbage in the heap (we&#39;ll assume it&#39;s all in the oldest generation.)\r\n\r\nUnder normal operation, the JVM will grow the heap to 700 mb or so, and garbage collect when it gets around to it.\r\n\r\nWhat I would like in that situation is for the JVM to gc first, then allocate the new stuff, so that we end up with the heap size staying at 500mb, and the used heap at 350mb.\r\n\r\nIs there a JVM parameter combo that does that?","title":"Encourage the JVM to GC rather than grow the heap?","body":"<p>(Note that when I say \"JVM\", I really mean \"Hotspot\", and I'm running the latest Java 1.6 update.)</p>\n\n<p>Example situation:</p>\n\n<p>My JVM is running with -Xmx set to 1gb.  Currently, the heap has 500mb allocated, of which 450mb is used.  The program needs to load another 200 mb on the heap.  Currently, there is 300mb worth of \"collectable\" garbage in the heap (we'll assume it's all in the oldest generation.)</p>\n\n<p>Under normal operation, the JVM will grow the heap to 700 mb or so, and garbage collect when it gets around to it.</p>\n\n<p>What I would like in that situation is for the JVM to gc first, then allocate the new stuff, so that we end up with the heap size staying at 500mb, and the used heap at 350mb.</p>\n\n<p>Is there a JVM parameter combo that does that?</p>\n"},{"tags":["java","linux","jvm","heap-memory"],"comments":[{"owner":{"account_id":6090,"reputation":31973,"user_id":10098,"accept_rate":80,"display_name":"wds"},"score":0,"creation_date":1301050256,"post_id":5430615,"comment_id":6148986,"body_markdown":"Assign some more swap to the box perhaps. As many of these pages are unused they can be paged out by the kernel without causing trashing. Other processes should be just fine for resident memory.","body":"Assign some more swap to the box perhaps. As many of these pages are unused they can be paged out by the kernel without causing trashing. Other processes should be just fine for resident memory."}],"answers":[{"tags":[],"owner":{"account_id":62225,"reputation":6244,"user_id":184998,"accept_rate":82,"display_name":"Adrian Cox"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1301046092,"creation_date":1301046092,"answer_id":5430754,"question_id":5430615,"body_markdown":"I don&#39;t have a complete answer, but [a similar question has come up before][1]. From the earlier discussion you should investigate `-XX:MaxHeapFreeRatio=` as your tuning parameter to force heap release back to the operating system. There&#39;s [documentation here][2], and I believe the default value allows a very large amount of unused heap to remained owned by the JVM.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4893192/process-memory-vs-heap-jvm/4893286#4893286\r\n  [2]: http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html","title":"Unexpectedly large heap size in comparison to % used","body":"<p>I don't have a complete answer, but <a href=\"https://stackoverflow.com/questions/4893192/process-memory-vs-heap-jvm/4893286#4893286\">a similar question has come up before</a>. From the earlier discussion you should investigate <code>-XX:MaxHeapFreeRatio=</code> as your tuning parameter to force heap release back to the operating system. There's <a href=\"http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html\" rel=\"nofollow noreferrer\">documentation here</a>, and I believe the default value allows a very large amount of unused heap to remained owned by the JVM.</p>\n"},{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1301046093,"creation_date":1301046093,"answer_id":5430755,"question_id":5430615,"body_markdown":"Well, the GC does not always run when you think and it does not always collect what is elligible. It might as well only start to collect objects from the old gen space if it nearly runs out of heap space (since collecting from old gen normally would involve a stop-the-world collection which the GC tries to avoid until it really needs to do it).","title":"Unexpectedly large heap size in comparison to % used","body":"<p>Well, the GC does not always run when you think and it does not always collect what is elligible. It might as well only start to collect objects from the old gen space if it nearly runs out of heap space (since collecting from old gen normally would involve a stop-the-world collection which the GC tries to avoid until it really needs to do it).</p>\n"},{"tags":[],"owner":{"account_id":329612,"reputation":71055,"user_id":653230,"display_name":"WhiteFang34"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1301046424,"creation_date":1301046107,"answer_id":5430758,"question_id":5430615,"body_markdown":"You might want to see [this answer][1] about tuning heap expansion and shrinking. By default the JVM is not too aggressive about shrinking the heap. Furthermore if the heap has enough free space for a long period of time it won&#39;t trigger a GC, which I believe is the only time is considers to shrink it.\r\n\r\nIdeally you configure the maximum to a value that gives your application enough headroom under full load, yet is acceptable to OS performance if it were always all in use. It&#39;s not uncommon to set the minimum to the maximum for predictability and potentially better performance (I don&#39;t have anything to reference for that offhand).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5355933/encourage-the-jvm-to-gc-rather-than-grow-the-heap/5356055#5356055","title":"Unexpectedly large heap size in comparison to % used","body":"<p>You might want to see <a href=\"https://stackoverflow.com/questions/5355933/encourage-the-jvm-to-gc-rather-than-grow-the-heap/5356055#5356055\">this answer</a> about tuning heap expansion and shrinking. By default the JVM is not too aggressive about shrinking the heap. Furthermore if the heap has enough free space for a long period of time it won't trigger a GC, which I believe is the only time is considers to shrink it.</p>\n\n<p>Ideally you configure the maximum to a value that gives your application enough headroom under full load, yet is acceptable to OS performance if it were always all in use. It's not uncommon to set the minimum to the maximum for predictability and potentially better performance (I don't have anything to reference for that offhand).</p>\n"},{"tags":[],"owner":{"account_id":39549,"reputation":1408,"user_id":114139,"accept_rate":100,"display_name":"Michael Zilbermann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1301048455,"creation_date":1301048455,"answer_id":5431138,"question_id":5430615,"body_markdown":"Maybe you could try some profiling, with TPTP, visualvm or JProbe (commercial, but trial available), to find out exactly what happens.\r\n\r\nAnother thing to look out for is file handlers; I don&#39;t have the details but one of my colleagues encountered a couple of years ago a heap saturation problem caused by a process that opened many files, and found out that each time he opened one a 4kb buffer was allocated in the native heap, freed at the end of its processing. I hope this quite vague indications may help...","title":"Unexpectedly large heap size in comparison to % used","body":"<p>Maybe you could try some profiling, with TPTP, visualvm or JProbe (commercial, but trial available), to find out exactly what happens.</p>\n\n<p>Another thing to look out for is file handlers; I don't have the details but one of my colleagues encountered a couple of years ago a heap saturation problem caused by a process that opened many files, and found out that each time he opened one a 4kb buffer was allocated in the native heap, freed at the end of its processing. I hope this quite vague indications may help...</p>\n"}],"owner":{"account_id":344227,"reputation":1287,"user_id":676424,"accept_rate":82,"display_name":"f1dave"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6493,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":5430758,"answer_count":4,"score":9,"last_activity_date":1636378274,"creation_date":1301045279,"question_id":5430615,"body_markdown":"Have a memory allocation question I&#39;d like your help with. We&#39;ve analysed some of our services in top and we note that they have a RES value of about 1.8GB, which as far as I understand things means they&#39;re holding on to 1.8GB of memory at that time. Which would be fine if we&#39;d just started them (they essentially read from a cache, do processing, and push off to another cache) but seeing as we still see this after CPU-intensive processing is completed, we&#39;re wondering if it means something isn&#39;t being GC&#39;ed as we expected. \r\n\r\nWe run the program with the following parameters: **-Xms256m -Xmx3096m** which as I understand means an initial heap size of 256, and a maximum heap size of 3096. \r\n\r\nNow what I&#39;d *expect* to see is the heap grow as needed initially, and then shrink as needed as the memory becomes deallocated (though this could be my first mistake). What we actually see with jvisualvm is the following:\r\n\r\n - 3 mins in: used heap is 1GB, heap\r\n   size is 2GB\r\n - 5 mins in: we&#39;ve done processing, so\r\n   used heap drops dramatically to near\r\n   enough zilch, heap size however only\r\n   drops to about 1.5GB\r\n - 7 mins -&gt;: small bits of real time\r\n   processing periodically, used heap\r\n   only ever between 100-200MB or so,\r\n   heap size however remaining constant\r\n   at about 1.7GB.\r\n\r\nMy question would be, why hasn&#39;t my heap shrunk as I perhaps expected it to? Isn&#39;t this robbing other processes on the linux box of valuable memory, and if so how could I fix it? We do see out of memory errors on it sometimes, and with these processes being allocated the most &#39;unexpected&#39; memory size, I thought it best to start with them.\r\n\r\nCheers,\r\nDave.\r\n\r\n(~please excuse possible lack of understanding on JVM memory tuning!)\r\n","title":"Unexpectedly large heap size in comparison to % used","body":"<p>Have a memory allocation question I'd like your help with. We've analysed some of our services in top and we note that they have a RES value of about 1.8GB, which as far as I understand things means they're holding on to 1.8GB of memory at that time. Which would be fine if we'd just started them (they essentially read from a cache, do processing, and push off to another cache) but seeing as we still see this after CPU-intensive processing is completed, we're wondering if it means something isn't being GC'ed as we expected. </p>\n\n<p>We run the program with the following parameters: <strong>-Xms256m -Xmx3096m</strong> which as I understand means an initial heap size of 256, and a maximum heap size of 3096. </p>\n\n<p>Now what I'd <em>expect</em> to see is the heap grow as needed initially, and then shrink as needed as the memory becomes deallocated (though this could be my first mistake). What we actually see with jvisualvm is the following:</p>\n\n<ul>\n<li>3 mins in: used heap is 1GB, heap\nsize is 2GB</li>\n<li>5 mins in: we've done processing, so\nused heap drops dramatically to near\nenough zilch, heap size however only\ndrops to about 1.5GB</li>\n<li>7 mins ->: small bits of real time\nprocessing periodically, used heap\nonly ever between 100-200MB or so,\nheap size however remaining constant\nat about 1.7GB.</li>\n</ul>\n\n<p>My question would be, why hasn't my heap shrunk as I perhaps expected it to? Isn't this robbing other processes on the linux box of valuable memory, and if so how could I fix it? We do see out of memory errors on it sometimes, and with these processes being allocated the most 'unexpected' memory size, I thought it best to start with them.</p>\n\n<p>Cheers,\nDave.</p>\n\n<p>(~please excuse possible lack of understanding on JVM memory tuning!)</p>\n"},{"tags":["java","jvm","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":758158,"reputation":4083,"user_id":1985033,"display_name":"amichair"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1305823812,"creation_date":1305823812,"answer_id":6062041,"question_id":5503195,"body_markdown":"The heap settings should work, however note that this limits only the Java heap size, and does not include the memory used by the JVM itself, native libraries, etc. - everything outside the Java heap. It sounds reasonable that it might take up an extra 100m for everything else (of virtual memory, which is not necessarily really used - not physical memory).","title":"Heap size parameter xmx is overriden","body":"<p>The heap settings should work, however note that this limits only the Java heap size, and does not include the memory used by the JVM itself, native libraries, etc. - everything outside the Java heap. It sounds reasonable that it might take up an extra 100m for everything else (of virtual memory, which is not necessarily really used - not physical memory).</p>\n"}],"owner":{"account_id":729727,"reputation":1,"user_id":686158,"display_name":"James"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":522,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1636378262,"creation_date":1301589127,"question_id":5503195,"body_markdown":"I&#39;m running jre 6u24 on Fedora (Linux xxx 2.6.33.7.2-rt30 #1 SMP PREEMPT RT Mon Mar 21 00:50:23 UTC 2011 i686 GNU/Linux).\r\n\r\nIt&#39;s an embedded system and other (business critical) applications are using it, so I am forced to limit the heap space to 300mb. Unfortunately, the jvm Xmx and Xms options don&#39;t have any effect and thus seem to be overriden. The jvm still uses about 400mb of virtual memory.\r\n\r\nDoes anybody know what&#39;s causing the override? Is there a default minimum heap size in jre 6u24? Is there another way to limit the heap space to 300mb?\r\n\r\nTIA\r\n\r\nJames","title":"Heap size parameter xmx is overriden","body":"<p>I'm running jre 6u24 on Fedora (Linux xxx 2.6.33.7.2-rt30 #1 SMP PREEMPT RT Mon Mar 21 00:50:23 UTC 2011 i686 GNU/Linux).</p>\n\n<p>It's an embedded system and other (business critical) applications are using it, so I am forced to limit the heap space to 300mb. Unfortunately, the jvm Xmx and Xms options don't have any effect and thus seem to be overriden. The jvm still uses about 400mb of virtual memory.</p>\n\n<p>Does anybody know what's causing the override? Is there a default minimum heap size in jre 6u24? Is there another way to limit the heap space to 300mb?</p>\n\n<p>TIA</p>\n\n<p>James</p>\n"},{"tags":["java","jvm","heap-memory","reboot","relaunch"],"comments":[{"owner":{"account_id":13416,"reputation":9050,"user_id":26919,"accept_rate":100,"display_name":"Ruben"},"score":0,"creation_date":1305883973,"post_id":6069878,"comment_id":7029116,"body_markdown":"Why would you start a new JVM instead of simply using a high enough maximum heap size and permgen size?","body":"Why would you start a new JVM instead of simply using a high enough maximum heap size and permgen size?"},{"owner":{"account_id":21804,"reputation":7207,"user_id":53300,"accept_rate":53,"display_name":"DaveH"},"score":0,"creation_date":1305884149,"post_id":6069878,"comment_id":7029171,"body_markdown":"Presumeably you&#39;ll only need to use a bigger heap size once you&#39;ve run out of memory. Once you&#39;ve run out of memory, you won&#39;t be able to start another process.","body":"Presumeably you&#39;ll only need to use a bigger heap size once you&#39;ve run out of memory. Once you&#39;ve run out of memory, you won&#39;t be able to start another process."},{"owner":{"account_id":245279,"reputation":223,"user_id":518689,"accept_rate":50,"display_name":"Mathias Vielwerth"},"score":1,"creation_date":1305933817,"post_id":6069878,"comment_id":7041240,"body_markdown":"I have found that the default allocated memory for different JVM on different platforms is different. Therefore, I need to be able to set it on the fly. Furthermore, I want a simple experience, where you just double click the Jar, and it handles the rest. And if no terminal is involved, no flags can be set by the user.","body":"I have found that the default allocated memory for different JVM on different platforms is different. Therefore, I need to be able to set it on the fly. Furthermore, I want a simple experience, where you just double click the Jar, and it handles the rest. And if no terminal is involved, no flags can be set by the user."}],"answers":[{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1305884389,"creation_date":1305884389,"answer_id":6070066,"question_id":6069878,"body_markdown":"I&#39;d do this kind of work in an outer script file - in pseudo code:\r\n\r\n    $heap := 128\r\n    $ok := true\r\n    do {\r\n      exitCode = java -Xmx$heapM -jar myApp.jar\r\n      if (exitCode = OOME) {\r\n        heap += 128\r\n        $ok := false\r\n      }\r\n    while(!$ok)\r\n\r\nCatch OOME and exiting with a custom code should always be possible. There&#39;s one problem with this approach - if the $heap value exceeds the maximum heap space that is possible for the target system (example: ~1.4GByte on Win32 systems) then it will not terminate.\r\n\r\n&lt;sup&gt;Note: this is just an answer to the question - usually one would assign a high amount of memory and/or fight the memory leaks - but I don&#39;t know the actual requirments/restrictions&lt;/sup&gt;","title":"Re launch JVM with bigger heap space","body":"<p>I'd do this kind of work in an outer script file - in pseudo code:</p>\n\n<pre><code>$heap := 128\n$ok := true\ndo {\n  exitCode = java -Xmx$heapM -jar myApp.jar\n  if (exitCode = OOME) {\n    heap += 128\n    $ok := false\n  }\nwhile(!$ok)\n</code></pre>\n\n<p>Catch OOME and exiting with a custom code should always be possible. There's one problem with this approach - if the $heap value exceeds the maximum heap space that is possible for the target system (example: ~1.4GByte on Win32 systems) then it will not terminate.</p>\n\n<p><sup>Note: this is just an answer to the question - usually one would assign a high amount of memory and/or fight the memory leaks - but I don't know the actual requirments/restrictions</sup></p>\n"},{"tags":[],"owner":{"account_id":24075,"reputation":29658,"user_id":60956,"accept_rate":85,"display_name":"Joel"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1305902445,"creation_date":1305884420,"answer_id":6070073,"question_id":6069878,"body_markdown":"You can launch java with an initial heap size, and also specify a maximum heap size which will be only be used as required. I&#39;m not sure what you&#39;re trying to do but it might emulate the behaviour you want?\r\n\r\n    java -Xms256m -Xmx1g -jar myapp.jar\r\n\r\nIn this example you start with 256M, if the app needs more memory it will take it, incrementally, up until 1G.","title":"Re launch JVM with bigger heap space","body":"<p>You can launch java with an initial heap size, and also specify a maximum heap size which will be only be used as required. I'm not sure what you're trying to do but it might emulate the behaviour you want?</p>\n\n<pre><code>java -Xms256m -Xmx1g -jar myapp.jar\n</code></pre>\n\n<p>In this example you start with 256M, if the app needs more memory it will take it, incrementally, up until 1G.</p>\n"},{"tags":[],"owner":{"account_id":245279,"reputation":223,"user_id":518689,"accept_rate":50,"display_name":"Mathias Vielwerth"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1305934159,"creation_date":1305933608,"answer_id":6078495,"question_id":6069878,"body_markdown":"I have found the solution, and it works cross platform. To restart the JVM from code, use the following. This answer is taken from another question I found after hours of search in here. If you want, you can follow it with an System.exit(0), to terminate the JVM that started the new process, after a call to this method.\r\n\r\n    public static void startSecondJVM() throws Exception {\r\n        String separator = System.getProperty(&quot;file.separator&quot;);\r\n        String classpath = System.getProperty(&quot;java.class.path&quot;);\r\n        String path = System.getProperty(&quot;java.home&quot;)\r\n                + separator + &quot;bin&quot; + separator + &quot;java&quot;;\r\n        ProcessBuilder processBuilder = \r\n                new ProcessBuilder(path, &quot;-Xmx1024m&quot;, &quot;-cp&quot;,\r\n                classpath, \r\n                Main.class.getName());\r\n        Process process = processBuilder.start();\r\n    }\r\n\r\n","title":"Re launch JVM with bigger heap space","body":"<p>I have found the solution, and it works cross platform. To restart the JVM from code, use the following. This answer is taken from another question I found after hours of search in here. If you want, you can follow it with an System.exit(0), to terminate the JVM that started the new process, after a call to this method.</p>\n\n<pre><code>public static void startSecondJVM() throws Exception {\n    String separator = System.getProperty(\"file.separator\");\n    String classpath = System.getProperty(\"java.class.path\");\n    String path = System.getProperty(\"java.home\")\n            + separator + \"bin\" + separator + \"java\";\n    ProcessBuilder processBuilder = \n            new ProcessBuilder(path, \"-Xmx1024m\", \"-cp\",\n            classpath, \n            Main.class.getName());\n    Process process = processBuilder.start();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1305934886,"creation_date":1305934886,"answer_id":6078598,"question_id":6069878,"body_markdown":"You might try combining these two sources.\r\n\r\n## MemoryRecoveryTest.java ##\r\n\r\nMakes attempts to recover from an `OutOfMemoryError`.\r\n\r\n    /*License - LGPL\r\n    &lt;h3&gt;Recovery from an OutOfMemory Error&lt;/h3&gt;\r\n    &lt;p&gt;The JavaDocs for Error state, in the first sentence..\r\n    \r\n    &lt;blockquote&gt;&quot;An Error is a subclass of Throwable that indicates\r\n    serious problems that a reasonable application should\r\n    not try to catch.&quot;&lt;/blockquote&gt;\r\n    \r\n    &lt;p&gt;This advice has led to the fallacy that an OutOfMemoryError\r\n    should not be caught and dealt with.But this demo. shows\r\n    that it is quite easy to recover to the point of providing\r\n    the user with meaningful information, and advice on how to\r\n    proceed.\r\n    \r\n    &lt;p&gt;I aim to make my applications &#39;unreasonable&#39;.;-)\r\n    */\r\n    \r\n    import java.awt.event.ActionListener;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.WindowAdapter;\r\n    import java.awt.event.WindowEvent;\r\n    \r\n    import javax.swing.JPanel;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JProgressBar;\r\n    import javax.swing.JOptionPane;\r\n    import javax.swing.JDialog;\r\n    import javax.swing.Timer;\r\n    \r\n    import javax.swing.border.EmptyBorder;\r\n    \r\n    import java.util.ArrayList;\r\n    \r\n    /** A demo. showing recovery from an OutOfMemoryError.\r\n    Our options once an OOME is encountered are relatively\r\n    few, but we can still warn the end user and provide\r\n    advice on how to correct the problem.\r\n    @author Andrew Thompson */\r\n    public class MemoryRecoveryTest {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// reserve a buffer of memory\r\n    \t\tbyte[] buffer = new byte[2^10];\r\n    \t\tArrayList&lt;Object&gt; list = new ArrayList&lt;Object&gt;();\r\n    \t\tfinal JProgressBar memory = new JProgressBar(\r\n    \t\t\t0,\r\n    \t\t\t(int)Runtime.getRuntime().totalMemory());\r\n    \t\tActionListener listener = new ActionListener() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void actionPerformed(ActionEvent ae) {\r\n    \t\t\t\tmemory.setValue(\r\n    \t\t\t\t\t(int)Runtime.getRuntime().freeMemory() );\r\n    \t\t\t}\r\n    \t\t};\r\n    \t\tTimer timer = new Timer(500, listener);\r\n    \t\ttimer.start();\r\n    \r\n    \t\tJDialog dialog = new JDialog();\r\n    \t\tdialog.setTitle(&quot;Available Memory&quot;);\r\n    \t\tJPanel memoryPanel = new JPanel();\r\n    \t\tmemoryPanel.add(memory);\r\n    \t\tmemoryPanel.setBorder(new EmptyBorder(25,25,25,25));\r\n    \t\tdialog.add( memoryPanel );\r\n    \t\tdialog.pack();\r\n    \t\tdialog.setLocationRelativeTo(null);\r\n    \t\tdialog.setVisible(true);\r\n    \t\tdialog.addWindowListener( new WindowAdapter(){\r\n    \t\t\t@Override\r\n    \t\t\tpublic void windowClosing(WindowEvent we) {\r\n    \t\t\t\tSystem.exit(0);\r\n    \t\t\t}\r\n    \t\t} );\r\n    \r\n    \t\t// prepare a memory warning panel in advance\r\n    \t\tJPanel memoryWarning = new JPanel();\r\n    \t\tmemoryWarning.add( new JLabel(\r\n    \t\t\t&quot;&lt;HTML&gt;&lt;BODY&gt;There is not enough memory to&quot; +\r\n    \t\t\t&quot; complete the task!&lt;BR&gt; Use a variant &quot; +\r\n    \t\t\t&quot; of the application that assigns more memory.&quot;) );\r\n    \r\n    \t\ttry {\r\n    \t\t\t// do our &#39;memory intensive&#39; task\r\n    \t\t\twhile(true) {\r\n    \t\t\t\tlist.add( new Object() );\r\n    \t\t\t}\r\n    \t\t} catch(OutOfMemoryError oome) {\r\n    \t\t\t// provide the VM with some memory &#39;breathing space&#39;\r\n    \t\t\t// by clearing the buffer\r\n    \t\t\tbuffer = null;\r\n    \t\t\t// tell the user what went wrong, and how to fix it\r\n    \t\t\tJOptionPane.showMessageDialog(\r\n    \t\t\t\tdialog,\r\n    \t\t\t\tmemoryWarning,\r\n    \t\t\t\t&quot;Out of Memory!&quot;,\r\n    \t\t\t\tJOptionPane.ERROR_MESSAGE);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n## IWantToBeBig.java ##\r\n\r\nEnsures a `Process` is started with a memory size specified.\r\n\r\n    import java.awt.EventQueue;\r\n    import javax.swing.JOptionPane;\r\n    import java.io.File;\r\n    \r\n    class IWantToBeBig {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tif (args.length==0) {\r\n    \t\t\tProcessBuilder pb = new ProcessBuilder(\r\n    \t\t\t\t&quot;java&quot;,\r\n    \t\t\t\t&quot;-jar&quot;,\r\n    \t\t\t\t&quot;-Xmx512m&quot;,\r\n    \t\t\t\t&quot;big.jar&quot;,\r\n    \t\t\t\t&quot;anArgument&quot;\r\n    \t\t\t\t);\r\n    \t\t\tpb.directory(new File(&quot;.&quot;));\r\n    \t\t\tProcess process = pb.start();\r\n    \t\t\tprocess.waitFor();\r\n    \t\t\tSystem.out.println(&quot;Exit value: &quot; + process.exitValue());\r\n    \t\t} else {\r\n    \t\t\tRunnable r = new Runnable() {\r\n    \t\t\t\tpublic void run() {\r\n    \t\t\t\t\tJOptionPane.showMessageDialog(\r\n    \t\t\t\t\t\tnull,\r\n    \t\t\t\t\t\t&quot;Max Memory: &quot; +\r\n    \t\t\t\t\t\tRuntime.getRuntime().maxMemory() +\r\n    \t\t\t\t\t\t&quot; bytes.&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t};\r\n    \t\t\tEventQueue.invokeLater(r);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"Re launch JVM with bigger heap space","body":"<p>You might try combining these two sources.</p>\n\n<h2>MemoryRecoveryTest.java</h2>\n\n<p>Makes attempts to recover from an <code>OutOfMemoryError</code>.</p>\n\n<pre><code>/*License - LGPL\n&lt;h3&gt;Recovery from an OutOfMemory Error&lt;/h3&gt;\n&lt;p&gt;The JavaDocs for Error state, in the first sentence..\n\n&lt;blockquote&gt;\"An Error is a subclass of Throwable that indicates\nserious problems that a reasonable application should\nnot try to catch.\"&lt;/blockquote&gt;\n\n&lt;p&gt;This advice has led to the fallacy that an OutOfMemoryError\nshould not be caught and dealt with.But this demo. shows\nthat it is quite easy to recover to the point of providing\nthe user with meaningful information, and advice on how to\nproceed.\n\n&lt;p&gt;I aim to make my applications 'unreasonable'.;-)\n*/\n\nimport java.awt.event.ActionListener;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.WindowAdapter;\nimport java.awt.event.WindowEvent;\n\nimport javax.swing.JPanel;\nimport javax.swing.JLabel;\nimport javax.swing.JProgressBar;\nimport javax.swing.JOptionPane;\nimport javax.swing.JDialog;\nimport javax.swing.Timer;\n\nimport javax.swing.border.EmptyBorder;\n\nimport java.util.ArrayList;\n\n/** A demo. showing recovery from an OutOfMemoryError.\nOur options once an OOME is encountered are relatively\nfew, but we can still warn the end user and provide\nadvice on how to correct the problem.\n@author Andrew Thompson */\npublic class MemoryRecoveryTest {\n\n    public static void main(String[] args) {\n        // reserve a buffer of memory\n        byte[] buffer = new byte[2^10];\n        ArrayList&lt;Object&gt; list = new ArrayList&lt;Object&gt;();\n        final JProgressBar memory = new JProgressBar(\n            0,\n            (int)Runtime.getRuntime().totalMemory());\n        ActionListener listener = new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent ae) {\n                memory.setValue(\n                    (int)Runtime.getRuntime().freeMemory() );\n            }\n        };\n        Timer timer = new Timer(500, listener);\n        timer.start();\n\n        JDialog dialog = new JDialog();\n        dialog.setTitle(\"Available Memory\");\n        JPanel memoryPanel = new JPanel();\n        memoryPanel.add(memory);\n        memoryPanel.setBorder(new EmptyBorder(25,25,25,25));\n        dialog.add( memoryPanel );\n        dialog.pack();\n        dialog.setLocationRelativeTo(null);\n        dialog.setVisible(true);\n        dialog.addWindowListener( new WindowAdapter(){\n            @Override\n            public void windowClosing(WindowEvent we) {\n                System.exit(0);\n            }\n        } );\n\n        // prepare a memory warning panel in advance\n        JPanel memoryWarning = new JPanel();\n        memoryWarning.add( new JLabel(\n            \"&lt;HTML&gt;&lt;BODY&gt;There is not enough memory to\" +\n            \" complete the task!&lt;BR&gt; Use a variant \" +\n            \" of the application that assigns more memory.\") );\n\n        try {\n            // do our 'memory intensive' task\n            while(true) {\n                list.add( new Object() );\n            }\n        } catch(OutOfMemoryError oome) {\n            // provide the VM with some memory 'breathing space'\n            // by clearing the buffer\n            buffer = null;\n            // tell the user what went wrong, and how to fix it\n            JOptionPane.showMessageDialog(\n                dialog,\n                memoryWarning,\n                \"Out of Memory!\",\n                JOptionPane.ERROR_MESSAGE);\n        }\n    }\n}\n</code></pre>\n\n<h2>IWantToBeBig.java</h2>\n\n<p>Ensures a <code>Process</code> is started with a memory size specified.</p>\n\n<pre><code>import java.awt.EventQueue;\nimport javax.swing.JOptionPane;\nimport java.io.File;\n\nclass IWantToBeBig {\n\n    public static void main(String[] args) throws Exception {\n        if (args.length==0) {\n            ProcessBuilder pb = new ProcessBuilder(\n                \"java\",\n                \"-jar\",\n                \"-Xmx512m\",\n                \"big.jar\",\n                \"anArgument\"\n                );\n            pb.directory(new File(\".\"));\n            Process process = pb.start();\n            process.waitFor();\n            System.out.println(\"Exit value: \" + process.exitValue());\n        } else {\n            Runnable r = new Runnable() {\n                public void run() {\n                    JOptionPane.showMessageDialog(\n                        null,\n                        \"Max Memory: \" +\n                        Runtime.getRuntime().maxMemory() +\n                        \" bytes.\");\n                }\n            };\n            EventQueue.invokeLater(r);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":245279,"reputation":223,"user_id":518689,"accept_rate":50,"display_name":"Mathias Vielwerth"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5774,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":6078495,"answer_count":4,"score":4,"last_activity_date":1636378247,"creation_date":1305883350,"question_id":6069878,"body_markdown":"I want to be able to execute the .Jar file, and if the heap space isn&#39;t set big enough, it should launch a new JVM with the same .Jar file, but set with a bigger heap space, and then close the first JVM and .Jar.\r\n\r\nI&#39;ve tried using the ProcessBuilder, but I can&#39;t get it to work.\r\n\r\nIt has to work cross platform.\r\n\r\n-ONi","title":"Re launch JVM with bigger heap space","body":"<p>I want to be able to execute the .Jar file, and if the heap space isn't set big enough, it should launch a new JVM with the same .Jar file, but set with a bigger heap space, and then close the first JVM and .Jar.</p>\n\n<p>I've tried using the ProcessBuilder, but I can't get it to work.</p>\n\n<p>It has to work cross platform.</p>\n\n<p>-ONi</p>\n"},{"tags":["java","jvm","heap-memory","oql","jhat"],"comments":[{"owner":{"account_id":334798,"reputation":2310,"user_id":1908482,"accept_rate":74,"display_name":"Eugen"},"score":0,"creation_date":1308310826,"post_id":6305832,"comment_id":7481154,"body_markdown":"An interesting set of examples I have found at: http://blogs.oracle.com/sundararajan/entry/permanent_generation_analysis_with_oql","body":"An interesting set of examples I have found at: <a href=\"http://blogs.oracle.com/sundararajan/entry/permanent_generation_analysis_with_oql\" rel=\"nofollow noreferrer\">blogs.oracle.com/sundararajan/entry/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":29895,"reputation":2057,"user_id":81098,"display_name":"Peter Dolberg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1328207773,"creation_date":1328207773,"answer_id":9117946,"question_id":6305832,"body_markdown":"I don&#39;t believe heap.forEachClass() is meant to be used in a select statement, at least not directly.  Consider the fact that it doesn&#39;t return anything:\r\n\r\n    var result=heap.forEachClass(function(it){return it;});\r\n    typeof result\r\n    //returns undefined\r\n\r\nThe OQL used in jhat and VisualVM does support plain ol&#39; JavaScript, just like the &quot;query&quot; I use above.  I believe that the heap.forEachClass() finds more use in either JavaScript-style queries or in JavaScript functions within select-type queries.\r\n\r\nThat said, I don&#39;t know why this function exists since the heap.classes() enumeration is much easier to use, both with with select-style queries and plain JavaScript ones.\r\n\r\nYou could even even recreate the same functionality as heap.forEachClass() with the following JavaScript function:\r\n\r\n    function heapForEachClass(func){\r\n        map(heap.classes(),func)\r\n        return undefined;\r\n    }\r\n\r\nAny sample queries that I could provide you would likely be easier written with heap.classes(). For example, you could use heap.forEachClass() to get list of all classes:\r\n\r\n    var list=[];\r\n    heap.forEachClass(function(it){\r\n        list.push(it);\r\n    });\r\n    list\r\n\r\nbut this is more complicated than how you&#39;d do it with heap.classes():\r\n\r\n    select heap.classes()\r\n\r\nor just\r\n\r\n    heap.classes()\r\n","title":"Using Jhat heap built-in object","body":"<p>I don't believe heap.forEachClass() is meant to be used in a select statement, at least not directly.  Consider the fact that it doesn't return anything:</p>\n\n<pre><code>var result=heap.forEachClass(function(it){return it;});\ntypeof result\n//returns undefined\n</code></pre>\n\n<p>The OQL used in jhat and VisualVM does support plain ol' JavaScript, just like the \"query\" I use above.  I believe that the heap.forEachClass() finds more use in either JavaScript-style queries or in JavaScript functions within select-type queries.</p>\n\n<p>That said, I don't know why this function exists since the heap.classes() enumeration is much easier to use, both with with select-style queries and plain JavaScript ones.</p>\n\n<p>You could even even recreate the same functionality as heap.forEachClass() with the following JavaScript function:</p>\n\n<pre><code>function heapForEachClass(func){\n    map(heap.classes(),func)\n    return undefined;\n}\n</code></pre>\n\n<p>Any sample queries that I could provide you would likely be easier written with heap.classes(). For example, you could use heap.forEachClass() to get list of all classes:</p>\n\n<pre><code>var list=[];\nheap.forEachClass(function(it){\n    list.push(it);\n});\nlist\n</code></pre>\n\n<p>but this is more complicated than how you'd do it with heap.classes():</p>\n\n<pre><code>select heap.classes()\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>heap.classes()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9710000,"reputation":11,"user_id":7772232,"display_name":"Youcef Debbah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1519168724,"creation_date":1519168724,"answer_id":48895782,"question_id":6305832,"body_markdown":"I&#39;ve used this function before to look for classes that are loaded multiple times (usually, this happens when two different class loaders load the same lib taking more memory for no reason, and making the JVM serialize and deserialize objects passed from one class instance to the other -because it doesn&#39;t know that they are actually the same class-)\r\n\r\nThis is my OQL script that selects (and count) classes that has the same name:\r\n\r\n    var classes = {};\r\n    var multipleLoadedClasses = {};\r\n    \r\n    heap.forEachClass(function(it) {\r\n        if (classes[it.name] != null) {\r\n            if (multipleLoadedClasses[it.name] != null) {\r\n                multipleLoadedClasses[it.name] = multipleLoadedClasses[it.name] + 1;\r\n            } else {\r\n                multipleLoadedClasses[it.name] = 1;\r\n            }\r\n        } else {\r\n            classes[it.name] = it;\r\n        }\r\n    });\r\n    \r\n    multipleLoadedClasses;\r\n\r\nhopes that this will help further visitors ;)","title":"Using Jhat heap built-in object","body":"<p>I've used this function before to look for classes that are loaded multiple times (usually, this happens when two different class loaders load the same lib taking more memory for no reason, and making the JVM serialize and deserialize objects passed from one class instance to the other -because it doesn't know that they are actually the same class-)</p>\n\n<p>This is my OQL script that selects (and count) classes that has the same name:</p>\n\n<pre><code>var classes = {};\nvar multipleLoadedClasses = {};\n\nheap.forEachClass(function(it) {\n    if (classes[it.name] != null) {\n        if (multipleLoadedClasses[it.name] != null) {\n            multipleLoadedClasses[it.name] = multipleLoadedClasses[it.name] + 1;\n        } else {\n            multipleLoadedClasses[it.name] = 1;\n        }\n    } else {\n        classes[it.name] = it;\n    }\n});\n\nmultipleLoadedClasses;\n</code></pre>\n\n<p>hopes that this will help further visitors ;)</p>\n"}],"owner":{"account_id":334798,"reputation":2310,"user_id":1908482,"accept_rate":74,"display_name":"Eugen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":459,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":9117946,"answer_count":2,"score":1,"last_activity_date":1636378225,"creation_date":1307705947,"question_id":6305832,"body_markdown":"Can anybody show an example of how to use heap.heapForEachClass in a select statement?\r\nIt would be great if you could provide some links with different examples of queries (other than those in the oqlhelp page of course :) )","title":"Using Jhat heap built-in object","body":"<p>Can anybody show an example of how to use heap.heapForEachClass in a select statement?\nIt would be great if you could provide some links with different examples of queries (other than those in the oqlhelp page of course :) )</p>\n"},{"tags":["java","tomcat","jvm","tomcat7","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":39617,"reputation":6179,"user_id":114340,"display_name":"AngerClown"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1310476882,"creation_date":1310476882,"answer_id":6664828,"question_id":6663179,"body_markdown":"The JVM will pre-allocate whatever memory you specify for `-Xms`. So, it will request and allocate 2GB of memory at startup. If it needs more memory later (up to `-Xmx`), the JVM will request more memory from the OS.\r\n\r\nBut, do you know you need this much memory? The main driver of memory consumption will be your appication _not_ Tomcat. Simple webapps with a few servlets or JSPs can easily run in less than 32MB of heap. You need to measure your application for performance / load to determine the optimal setting.\r\n\r\nA side note - the preferred method for setting JVM parameters is with the `JAVA_OPTS` setting in `setenv.sh`, not catalina.sh.","title":"Tomcat Memory Consumption","body":"<p>The JVM will pre-allocate whatever memory you specify for <code>-Xms</code>. So, it will request and allocate 2GB of memory at startup. If it needs more memory later (up to <code>-Xmx</code>), the JVM will request more memory from the OS.</p>\n\n<p>But, do you know you need this much memory? The main driver of memory consumption will be your appication <em>not</em> Tomcat. Simple webapps with a few servlets or JSPs can easily run in less than 32MB of heap. You need to measure your application for performance / load to determine the optimal setting.</p>\n\n<p>A side note - the preferred method for setting JVM parameters is with the <code>JAVA_OPTS</code> setting in <code>setenv.sh</code>, not catalina.sh.</p>\n"}],"owner":{"account_id":228966,"reputation":5021,"user_id":755533,"accept_rate":62,"display_name":"ajduke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20268,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1636378215,"creation_date":1310468520,"question_id":6663179,"body_markdown":"I am going to install Tomcat on linux with JVM Heap size as 2048m(2GB) to 2304m(2GB+256MB) \r\nby setting `CATALINA_OPTS=&quot;-Xms2048m -Xmx2304m&quot;` in `cataina.sh file` \r\nand the Linux OS have 8GB of the RAM \r\nso i am making some points , please help with this \r\n\r\n - Should tomcat consume directly 2GB from OS? \r\n - If no to above ,then how much it should take?\r\n - If memory is taken by the tomcat is less than 2GB then this 2GB memory allocated by os for this tomcat is only used for this only or some app can use this memory?\r\n - and finally we are setting the this max and min memory , means OS allocates all that amount of the memory  for tomcat?\r\n  \r\n\r\n \r\n\r\n","title":"Tomcat Memory Consumption","body":"<p>I am going to install Tomcat on linux with JVM Heap size as 2048m(2GB) to 2304m(2GB+256MB) \nby setting <code>CATALINA_OPTS=\"-Xms2048m -Xmx2304m\"</code> in <code>cataina.sh file</code> \nand the Linux OS have 8GB of the RAM \nso i am making some points , please help with this </p>\n\n<ul>\n<li>Should tomcat consume directly 2GB from OS? </li>\n<li>If no to above ,then how much it should take?</li>\n<li>If memory is taken by the tomcat is less than 2GB then this 2GB memory allocated by os for this tomcat is only used for this only or some app can use this memory?</li>\n<li>and finally we are setting the this max and min memory , means OS allocates all that amount of the memory  for tomcat?</li>\n</ul>\n"},{"tags":["java","jvm","heap-memory","replication"],"comments":[{"owner":{"account_id":83889,"reputation":26612,"user_id":234901,"accept_rate":97,"display_name":"Enno Shioji"},"score":0,"creation_date":1311519124,"post_id":6805135,"comment_id":8083720,"body_markdown":"Sorry looks like I was wrong. I deleted my answer.","body":"Sorry looks like I was wrong. I deleted my answer."}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1311488393,"creation_date":1311488393,"answer_id":6805281,"question_id":6805135,"body_markdown":"Terracotta can indeed handle that if you tell it to - see the [description of its DSO][1] - Distributed Shared Objects.\r\n\r\nIt sounds cool but I would prefer something like EHcache (can be backed by Terracotta again) which functions on a bit more high level.\r\n\r\n\r\n  [1]: http://www.terracotta.org/confluence/display/devdocs/Architecture","title":"JVM heap replication between two machines","body":"<p>Terracotta can indeed handle that if you tell it to - see the <a href=\"http://www.terracotta.org/confluence/display/devdocs/Architecture\" rel=\"nofollow\">description of its DSO</a> - Distributed Shared Objects.</p>\n\n<p>It sounds cool but I would prefer something like EHcache (can be backed by Terracotta again) which functions on a bit more high level.</p>\n"},{"tags":[],"owner":{"account_id":459685,"reputation":1101,"user_id":860294,"display_name":"Jo&#227;o Fernandes"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1311517718,"creation_date":1311517718,"answer_id":6807392,"question_id":6805135,"body_markdown":"One emerging technology that somehow tackles this problem is Distributed Software Transactional Memory. You get strong data consistency guarantees (i.e. 1-copy serializability) and a powerful concurrency control mechanism: transactions.\r\n\r\nAFAIK, there is no mature solution out there, but it is promising.","title":"JVM heap replication between two machines","body":"<p>One emerging technology that somehow tackles this problem is Distributed Software Transactional Memory. You get strong data consistency guarantees (i.e. 1-copy serializability) and a powerful concurrency control mechanism: transactions.</p>\n\n<p>AFAIK, there is no mature solution out there, but it is promising.</p>\n"},{"tags":[],"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1311605046,"creation_date":1311605046,"answer_id":6817875,"question_id":6805135,"body_markdown":"Terracotta DSO works by manipulating the byte code of your classes (and the JDK&#39;s classes etc).  The instructions on how and when to do this are part of the Terracotta configuration file.  \r\n\r\nThe bytecode modification looks for certain byte codes such as a field read or write or a monitor enter or exit.  Whenever those instructions occur, code is added around that location that does the appropriate action in the distributed store.  For example when a monitor is obtained due to synchronization, a distributed lock is obtained as well (whether it is a read or write lock is dependent on the configuration).  If a field in a shared object is written, the distributed system must verify that a write lock is being held and then send the data value is sent to the clustered server, which stores it on disk or shares it over the network as appropriate.\r\n\r\nNote that Terracotta does not share the *entire* heap, only the graph of objects indicated by the configuration.  In general, there would be little point in sharing an entire heap.  It is better instead for the application to describe the domain objects needed across the distributed application.  \r\n\r\nThere are many optimizations employed to make the operations above efficient: only field deltas are sent over the wire and in a form much more efficient than Java serialization, many deltas can be bundled and sent in batches, locks are actually &quot;checked out&quot; to a particular client so that if the application data is partitioned across clients, most distributed locks are actually a local operation not involving a network call, etc.","title":"JVM heap replication between two machines","body":"<p>Terracotta DSO works by manipulating the byte code of your classes (and the JDK's classes etc).  The instructions on how and when to do this are part of the Terracotta configuration file.  </p>\n\n<p>The bytecode modification looks for certain byte codes such as a field read or write or a monitor enter or exit.  Whenever those instructions occur, code is added around that location that does the appropriate action in the distributed store.  For example when a monitor is obtained due to synchronization, a distributed lock is obtained as well (whether it is a read or write lock is dependent on the configuration).  If a field in a shared object is written, the distributed system must verify that a write lock is being held and then send the data value is sent to the clustered server, which stores it on disk or shares it over the network as appropriate.</p>\n\n<p>Note that Terracotta does not share the <em>entire</em> heap, only the graph of objects indicated by the configuration.  In general, there would be little point in sharing an entire heap.  It is better instead for the application to describe the domain objects needed across the distributed application.  </p>\n\n<p>There are many optimizations employed to make the operations above efficient: only field deltas are sent over the wire and in a form much more efficient than Java serialization, many deltas can be bundled and sent in batches, locks are actually \"checked out\" to a particular client so that if the application data is partitioned across clients, most distributed locks are actually a local operation not involving a network call, etc.</p>\n"},{"tags":[],"owner":{"account_id":125342,"reputation":4097,"user_id":321061,"accept_rate":67,"display_name":"Justin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1311926900,"creation_date":1311926900,"answer_id":6870299,"question_id":6805135,"body_markdown":"I would recommend that you investigate http://www.jboss.org/infinispan and see if it will fulfill your needs.","title":"JVM heap replication between two machines","body":"<p>I would recommend that you investigate <a href=\"http://www.jboss.org/infinispan\" rel=\"nofollow\">http://www.jboss.org/infinispan</a> and see if it will fulfill your needs.</p>\n"}],"owner":{"account_id":212390,"reputation":26536,"user_id":465179,"accept_rate":99,"display_name":"MatBanik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4678,"favorite_count":0,"down_vote_count":1,"up_vote_count":32,"accepted_answer_id":6817875,"answer_count":4,"score":31,"last_activity_date":1636378203,"creation_date":1311485978,"question_id":6805135,"body_markdown":"What are the basic principles of how two separable computers connected within the same network running the same Java application maintain the same state by syncing their heap between each other? \r\n\r\nI believe [Terracotta][1] does this task but I have no idea how would some pseudo code look like that would describe its core functions.\r\n\r\nI&#39;m just looking for understanding of this technology. \r\n\r\n  [1]: http://www.terracotta.org/","title":"JVM heap replication between two machines","body":"<p>What are the basic principles of how two separable computers connected within the same network running the same Java application maintain the same state by syncing their heap between each other? </p>\n\n<p>I believe <a href=\"http://www.terracotta.org/\" rel=\"noreferrer\">Terracotta</a> does this task but I have no idea how would some pseudo code look like that would describe its core functions.</p>\n\n<p>I'm just looking for understanding of this technology. </p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":9943,"reputation":28522,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"score":0,"creation_date":1315993702,"post_id":7414132,"comment_id":8959998,"body_markdown":"Please do not close. I think the user has some genuine question and it is a language issue that is causing lack of clarity. \n@Denny, please try to rephrase the question, your questions are not understandable as currently stated","body":"Please do not close. I think the user has some genuine question and it is a language issue that is causing lack of clarity.  @Denny, please try to rephrase the question, your questions are not understandable as currently stated"},{"owner":{"account_id":310042,"reputation":9,"user_id":622814,"display_name":"Denny Ye"},"score":0,"creation_date":1315994430,"post_id":7414132,"comment_id":8960190,"body_markdown":"I have set the &#39;total&#39; value from 10000 to 10000000 and take look the execution. When the cache has little String instance, it runs normally, and print the result before JVM exit. Further, more and more instance has been created, JVM executes program take long time and exit without any exception and &#39;System.out.println(cache.size())&#39; result. In my opinion, JVM does not reach to the last bytecode.","body":"I have set the &#39;total&#39; value from 10000 to 10000000 and take look the execution. When the cache has little String instance, it runs normally, and print the result before JVM exit. Further, more and more instance has been created, JVM executes program take long time and exit without any exception and &#39;System.out.println(cache.size())&#39; result. In my opinion, JVM does not reach to the last bytecode."},{"owner":{"account_id":310042,"reputation":9,"user_id":622814,"display_name":"Denny Ye"},"score":0,"creation_date":1315996183,"post_id":7414132,"comment_id":8960640,"body_markdown":"I created heap dump file for this program. The reason is &#39;OOM&#39;, and most consumed instance is &#39;SoftReference&#39; (Both space and number).","body":"I created heap dump file for this program. The reason is &#39;OOM&#39;, and most consumed instance is &#39;SoftReference&#39; (Both space and number)."},{"owner":{"account_id":326511,"reputation":28843,"user_id":648313,"accept_rate":100,"display_name":"Volo"},"score":0,"creation_date":1316037658,"post_id":7414132,"comment_id":8973209,"body_markdown":"If JVM exits without printing an &#39;OOM&#39; exception stacktrace, that looks like a bug for me.","body":"If JVM exits without printing an &#39;OOM&#39; exception stacktrace, that looks like a bug for me."},{"owner":{"account_id":310042,"reputation":9,"user_id":622814,"display_name":"Denny Ye"},"score":0,"creation_date":1316052268,"post_id":7414132,"comment_id":8975549,"body_markdown":"Memory leak with OOM(instance number)\njava.lang.ref.SoftReference    887,848   \njava.lang.String               1321","body":"Memory leak with OOM(instance number) java.lang.ref.SoftReference    887,848    java.lang.String               1321"},{"owner":{"account_id":310042,"reputation":9,"user_id":622814,"display_name":"Denny Ye"},"score":0,"creation_date":1316139264,"post_id":7414132,"comment_id":8995765,"body_markdown":"@Idolon When the OOM occurs, there always many of SoftReference instance has existing, can you help to explain this case?","body":"@Idolon When the OOM occurs, there always many of SoftReference instance has existing, can you help to explain this case?"},{"owner":{"account_id":326511,"reputation":28843,"user_id":648313,"accept_rate":100,"display_name":"Volo"},"score":0,"creation_date":1317075271,"post_id":7414132,"comment_id":9166943,"body_markdown":"Let&#39;s continue our talk in the chat room I&#39;ve just created at: http://chat.stackoverflow.com/rooms/3805/java-reference-objects","body":"Let&#39;s continue our talk in the chat room I&#39;ve just created at: <a href=\"http://chat.stackoverflow.com/rooms/3805/java-reference-objects\">chat.stackoverflow.com/rooms/3805/java-reference-objects</a>"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1316036513,"creation_date":1315993620,"answer_id":7414293,"question_id":7414132,"body_markdown":"If I run this program with `-mx40m`\r\n\r\n    char[] chars = new char[4096];\r\n    List&lt;SoftReference&lt;String&gt;&gt; strings = new ArrayList&lt;SoftReference&lt;String&gt;&gt;();\r\n    do {\r\n      strings.add(new SoftReference&lt;String&gt;(new String(chars)));\r\n    } while(strings.get(0).get()!=null);\r\n    int nulls=0, set=0;\r\n    for (SoftReference&lt;String&gt; string : strings) {\r\n      if(string.get() == null) nulls++; else set++;\r\n    }\r\n    System.out.println(&quot;nulls= &quot;+nulls+&quot;, was still set= &quot;+set);\r\n\r\nI get\r\n\r\n    nulls= 4618, was still set= 1\r\n\r\nOne of the problems with WeakReferences and SoftReferences is that they tend to all be cleared at once.\r\n\r\n---\r\n\r\n\r\nTry WeakReference, SoftReferences are only clear if it really has to.  To see them clearer, try creating a large enough array to trigger an OutOfMemoryError.\r\n\r\n1.  All object are in the heap. Even static fields are wrapped in a pseudo object which is on the heap. (This later behaviour is not defined but it how I have seen it work)\r\n\r\n2. The reference instance is freed after it has been discarded (like any other object)","title":"When does &#39;Reference object&#39; can be reclaimed?","body":"<p>If I run this program with <code>-mx40m</code></p>\n\n<pre><code>char[] chars = new char[4096];\nList&lt;SoftReference&lt;String&gt;&gt; strings = new ArrayList&lt;SoftReference&lt;String&gt;&gt;();\ndo {\n  strings.add(new SoftReference&lt;String&gt;(new String(chars)));\n} while(strings.get(0).get()!=null);\nint nulls=0, set=0;\nfor (SoftReference&lt;String&gt; string : strings) {\n  if(string.get() == null) nulls++; else set++;\n}\nSystem.out.println(\"nulls= \"+nulls+\", was still set= \"+set);\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>nulls= 4618, was still set= 1\n</code></pre>\n\n<p>One of the problems with WeakReferences and SoftReferences is that they tend to all be cleared at once.</p>\n\n<hr>\n\n<p>Try WeakReference, SoftReferences are only clear if it really has to.  To see them clearer, try creating a large enough array to trigger an OutOfMemoryError.</p>\n\n<ol>\n<li><p>All object are in the heap. Even static fields are wrapped in a pseudo object which is on the heap. (This later behaviour is not defined but it how I have seen it work)</p></li>\n<li><p>The reference instance is freed after it has been discarded (like any other object)</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":326511,"reputation":28843,"user_id":648313,"accept_rate":100,"display_name":"Volo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1316609956,"creation_date":1316609956,"answer_id":7500170,"question_id":7414132,"body_markdown":"&gt; When the OOM occurs, there always many of SoftReference instance has existing, can you help to explain this case? \r\n\r\nEach instance of SoftReference occupies 24 bytes of heap-memory by itself (this is true for 32-bit Sun JVM, and may differ for others VMs). You are trying to store in the list 3&#39;000&#39;000 instances which means you will need at least ~70Mb of heap space just to store the `SoftReference` objects. \r\n\r\n`SoftReference` object keeps a &quot;soft reference&quot; to the soft-reachable object (String in your case) and JVM spec guarantees those references will be cleared (i.e. String objects will be garbage collected) before the virtual machine throws an `OutOfMemoryError`. However JVM will **NOT** garbage-collect SoftReference objects since you keep strong references to them from your `cache` list. (So if you need SoftReference object to be removed from the heap - remove it from the `cache` list).","title":"When does &#39;Reference object&#39; can be reclaimed?","body":"<blockquote>\n  <p>When the OOM occurs, there always many of SoftReference instance has existing, can you help to explain this case? </p>\n</blockquote>\n\n<p>Each instance of SoftReference occupies 24 bytes of heap-memory by itself (this is true for 32-bit Sun JVM, and may differ for others VMs). You are trying to store in the list 3'000'000 instances which means you will need at least ~70Mb of heap space just to store the <code>SoftReference</code> objects. </p>\n\n<p><code>SoftReference</code> object keeps a \"soft reference\" to the soft-reachable object (String in your case) and JVM spec guarantees those references will be cleared (i.e. String objects will be garbage collected) before the virtual machine throws an <code>OutOfMemoryError</code>. However JVM will <strong>NOT</strong> garbage-collect SoftReference objects since you keep strong references to them from your <code>cache</code> list. (So if you need SoftReference object to be removed from the heap - remove it from the <code>cache</code> list).</p>\n"}],"owner":{"account_id":310042,"reputation":9,"user_id":622814,"display_name":"Denny Ye"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1636378178,"creation_date":1315992719,"question_id":7414132,"body_markdown":"Now, I met a strange case likes that:\r\n\r\n    public class SoftRefDemo {\r\n\r\n\t     private static List&lt;SoftReference&lt;String&gt;&gt; cache;\r\n\r\n\t     public static void main(String[] args) {\r\n\t\t     int total = 3000000;\r\n\t\t     cache = new ArrayList&lt;SoftReference&lt;String&gt;&gt;(total);\r\n\t\t     for (int i = 0; i &lt; total; i++) {\r\n\t\t \t     cache.add(new SoftReference&lt;String&gt;(&quot;fafsfsfsdf&quot; + i));\r\n\t\t     }\r\n\r\n\t\t     System.out.println(cache.size());\r\n\t     }\r\n\r\n    }\r\nI have set the JVM setting:-Xms20m -Xmx40m. When I want to put many of SoftReference to cache, the JVM exit without any promption or exception. Actually, I am doubtful of the action of SoftReference, it&#39;s special object for JVM. Could anyone explains what&#39;s happen for this program?\r\n\r\n**Another two questions:**\r\n1. Does there has extra memory allocation method for those &#39;special reference instance&#39; in JVM heap?\r\n2. When does those reference instance can be freed when the instance that they pointer to has been freed? Thanks a lot!\r\n","title":"When does &#39;Reference object&#39; can be reclaimed?","body":"<p>Now, I met a strange case likes that:</p>\n\n<pre><code>public class SoftRefDemo {\n\n     private static List&lt;SoftReference&lt;String&gt;&gt; cache;\n\n     public static void main(String[] args) {\n         int total = 3000000;\n         cache = new ArrayList&lt;SoftReference&lt;String&gt;&gt;(total);\n         for (int i = 0; i &lt; total; i++) {\n             cache.add(new SoftReference&lt;String&gt;(\"fafsfsfsdf\" + i));\n         }\n\n         System.out.println(cache.size());\n     }\n\n}\n</code></pre>\n\n<p>I have set the JVM setting:-Xms20m -Xmx40m. When I want to put many of SoftReference to cache, the JVM exit without any promption or exception. Actually, I am doubtful of the action of SoftReference, it's special object for JVM. Could anyone explains what's happen for this program?</p>\n\n<p><strong>Another two questions:</strong>\n1. Does there has extra memory allocation method for those 'special reference instance' in JVM heap?\n2. When does those reference instance can be freed when the instance that they pointer to has been freed? Thanks a lot!</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636356764,"post_id":69879931,"comment_id":123524877,"body_markdown":"create a reusable method. But SO is not an appropriate place for code review.","body":"create a reusable method. But SO is not an appropriate place for code review."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1636357035,"post_id":69879931,"comment_id":123524935,"body_markdown":"Don&#39;t use individual code blocks for each of the lines/numbers but think of an algorithm to determine how many spaces and numbers to write on a single given line. Basic approach: input the number of lines, for each line (outer loop) print the appropriate number of spaces (increasing until the center, then decreasing) and numbers (also increasing and decreasing). For each line only 2 nested loops should be necessary: 1 for printing the spaces and 1 for printing the digits. - Tip for dermining the algorithm: look at the loops you already have for each line and how variables change.","body":"Don&#39;t use individual code blocks for each of the lines/numbers but think of an algorithm to determine how many spaces and numbers to write on a single given line. Basic approach: input the number of lines, for each line (outer loop) print the appropriate number of spaces (increasing until the center, then decreasing) and numbers (also increasing and decreasing). For each line only 2 nested loops should be necessary: 1 for printing the spaces and 1 for printing the digits. - Tip for dermining the algorithm: look at the loops you already have for each line and how variables change."}],"answers":[{"tags":[],"owner":{"account_id":2338728,"reputation":54,"user_id":2050494,"display_name":"Yasser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636378176,"creation_date":1636378176,"answer_id":69884282,"question_id":69879931,"body_markdown":"You can do it in a more generic way like this:\r\n\r\n    public static void printDiamond(int n) {\r\n    \tint numberOfSpaces = n-1;\r\n    \tint numberOfItems = 1;\r\n    \t\r\n    \t//upper diamond\r\n    \tfor(int i = 1; i &lt;= n; i++) {\r\n    \t\tfor(int j = 0; j &lt; numberOfSpaces; j++) {\r\n    \t\t\tSystem.out.print(&quot; &quot;);\r\n    \t\t}\r\n    \t\tfor(int j = 0; j &lt; numberOfItems; j++) {\r\n    \t\t\tSystem.out.print(i);\r\n    \t\t}\r\n    \t\tnumberOfSpaces--;\r\n    \t\tnumberOfItems+=2;\r\n    \t\tSystem.out.println();\r\n    \t}\r\n    \t\r\n    \t//lower diamond\r\n    \tnumberOfSpaces = 1;\r\n    \tnumberOfItems -= 4; \r\n    \tfor(int i = n-1; i &gt;= 1; i--) {\r\n    \t\tfor(int j = 0; j &lt; numberOfSpaces; j++) {\r\n    \t\t\tSystem.out.print(&quot; &quot;);\r\n    \t\t}\r\n    \t\tfor(int j = 0; j &lt; numberOfItems; j++) {\r\n    \t\t\tSystem.out.print(i);\r\n    \t\t}\r\n    \t\tnumberOfSpaces++;\r\n    \t\tnumberOfItems-=2;\r\n    \t\tSystem.out.println();\r\n    \t}\r\n    \t\t\r\n    }","title":"How can I make this code shorter and resizable?","body":"<p>You can do it in a more generic way like this:</p>\n<pre><code>public static void printDiamond(int n) {\n    int numberOfSpaces = n-1;\n    int numberOfItems = 1;\n    \n    //upper diamond\n    for(int i = 1; i &lt;= n; i++) {\n        for(int j = 0; j &lt; numberOfSpaces; j++) {\n            System.out.print(&quot; &quot;);\n        }\n        for(int j = 0; j &lt; numberOfItems; j++) {\n            System.out.print(i);\n        }\n        numberOfSpaces--;\n        numberOfItems+=2;\n        System.out.println();\n    }\n    \n    //lower diamond\n    numberOfSpaces = 1;\n    numberOfItems -= 4; \n    for(int i = n-1; i &gt;= 1; i--) {\n        for(int j = 0; j &lt; numberOfSpaces; j++) {\n            System.out.print(&quot; &quot;);\n        }\n        for(int j = 0; j &lt; numberOfItems; j++) {\n            System.out.print(i);\n        }\n        numberOfSpaces++;\n        numberOfItems-=2;\n        System.out.println();\n    }\n        \n}\n</code></pre>\n"}],"owner":{"account_id":22937891,"reputation":1,"user_id":17071076,"display_name":"angryFrog"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1636378176,"creation_date":1636356681,"question_id":69879931,"body_markdown":"So the assignment was to &quot;Write a method to make a diamond like pattern with numbers. Your program should be resizable and look like as follows:&quot;\r\n```\r\n    1\r\n   222\r\n  33333\r\n 4444444\r\n555555555\r\n 4444444\r\n  33333\r\n   222\r\n    1\r\n```\r\n\r\nMy code is the following and **cannot** be resized (it doesn&#39;t add an additional lines of numbers as asked in the assignment, I couldn&#39;t figure out how to do that). Any help? \r\n\r\n    public class task2 {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tupperDiamond();\r\n\t\tlowerDiamond();\r\n\t\t\r\n\t\t}\r\n\t\r\n\tpublic static void upperDiamond( ) {\r\n\t\tfor ( int i = 1; i &lt;= 1; i++) {\r\n\t\t\tfor ( int a = 5 - i; a &gt; 0; a--) {\r\n\t\t\t      System.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;1&quot;);\r\n\t\t\t\r\n\t\t\tfor ( int a = 4 - i; a &gt; 0; a--) {\r\n\t\t\t      System.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor ( int b = 0; b &lt;= 2; b++) {\r\n\t\t\t\tSystem.out.print(&quot;2&quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor ( int a = 3 - i; a &gt; 0; a--) {\r\n\t\t\t      System.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t\t\r\n\r\n\t\t\tfor ( int a = 3 - i; a &gt; 0; a--) {\r\n\t\t\t      System.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor ( int c = 0; c &lt;= 4; c ++) {\r\n\t\t\t\tSystem.out.print(&quot;3&quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t\t\r\n\t\t\tfor ( int a = 2 - i; a &gt; 0; a--) {\r\n\t\t\t      System.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (int d = 0; d &lt;= 6; d ++) {\r\n\t\t\t\tSystem.out.print(&quot;4&quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t\t\r\n\t\t\tfor ( int a = i - 1; a &gt; 0; a--) {\r\n\t\t\t      System.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor ( int e = 0; e &lt;= 8; e++) {\r\n\t\t\t\tSystem.out.print(&quot;5&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tpublic static void lowerDiamond() {\r\n\t\tfor ( int i = 1; i &lt;= 1; i++) {\r\n\t\t\tSystem.out.println();\r\n\t\t\t\r\n\t\t\tfor ( int a = 2 - i; a &gt; 0; a--) {\r\n\t\t\t      System.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (int d = 0; d &lt;= 6; d ++) {\r\n\t\t\t\tSystem.out.print(&quot;4&quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\r\n\t\t\tfor ( int a = 3 - i; a &gt; 0; a--) {\r\n\t\t\t      System.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor ( int c = 0; c &lt;= 4; c ++) {\r\n\t\t\t\tSystem.out.print(&quot;3&quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t\t\r\n\t\t\tfor ( int a = 4 - i; a &gt; 0; a--) {\r\n\t\t\t      System.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor ( int b = 0; b &lt;= 2; b++) {\r\n\t\t\t\tSystem.out.print(&quot;2&quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t\t\r\n\t\t\tfor ( int a = 5 - i; a &gt; 0; a--) {\r\n\t\t\t      System.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;1&quot;);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","title":"How can I make this code shorter and resizable?","body":"<p>So the assignment was to &quot;Write a method to make a diamond like pattern with numbers. Your program should be resizable and look like as follows:&quot;</p>\n<pre><code>    1\n   222\n  33333\n 4444444\n555555555\n 4444444\n  33333\n   222\n    1\n</code></pre>\n<p>My code is the following and <strong>cannot</strong> be resized (it doesn't add an additional lines of numbers as asked in the assignment, I couldn't figure out how to do that). Any help?</p>\n<pre><code>public class task2 {\n\npublic static void main(String[] args) {\n    \n    upperDiamond();\n    lowerDiamond();\n    \n    }\n\npublic static void upperDiamond( ) {\n    for ( int i = 1; i &lt;= 1; i++) {\n        for ( int a = 5 - i; a &gt; 0; a--) {\n              System.out.print(&quot; &quot;);\n        }\n        \n        System.out.println(&quot;1&quot;);\n        \n        for ( int a = 4 - i; a &gt; 0; a--) {\n              System.out.print(&quot; &quot;);\n        }\n        \n        for ( int b = 0; b &lt;= 2; b++) {\n            System.out.print(&quot;2&quot;);\n        }\n        \n        for ( int a = 3 - i; a &gt; 0; a--) {\n              System.out.print(&quot; &quot;);\n        }\n        System.out.println();\n        \n\n        for ( int a = 3 - i; a &gt; 0; a--) {\n              System.out.print(&quot; &quot;);\n        }\n        \n        for ( int c = 0; c &lt;= 4; c ++) {\n            System.out.print(&quot;3&quot;);\n        }\n        System.out.println();\n        \n        for ( int a = 2 - i; a &gt; 0; a--) {\n              System.out.print(&quot; &quot;);\n        }\n        \n        for (int d = 0; d &lt;= 6; d ++) {\n            System.out.print(&quot;4&quot;);\n        }\n        System.out.println();\n        \n        for ( int a = i - 1; a &gt; 0; a--) {\n              System.out.print(&quot; &quot;);\n        }\n        \n        for ( int e = 0; e &lt;= 8; e++) {\n            System.out.print(&quot;5&quot;);\n        }\n    }\n}\npublic static void lowerDiamond() {\n    for ( int i = 1; i &lt;= 1; i++) {\n        System.out.println();\n        \n        for ( int a = 2 - i; a &gt; 0; a--) {\n              System.out.print(&quot; &quot;);\n        }\n        \n        for (int d = 0; d &lt;= 6; d ++) {\n            System.out.print(&quot;4&quot;);\n        }\n        System.out.println();\n\n        for ( int a = 3 - i; a &gt; 0; a--) {\n              System.out.print(&quot; &quot;);\n        }\n        \n        for ( int c = 0; c &lt;= 4; c ++) {\n            System.out.print(&quot;3&quot;);\n        }\n        System.out.println();\n        \n        for ( int a = 4 - i; a &gt; 0; a--) {\n              System.out.print(&quot; &quot;);\n        }\n        \n        for ( int b = 0; b &lt;= 2; b++) {\n            System.out.print(&quot;2&quot;);\n        }\n        System.out.println();\n        \n        for ( int a = 5 - i; a &gt; 0; a--) {\n              System.out.print(&quot; &quot;);\n        }\n        System.out.println(&quot;1&quot;);\n    }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","hadoop","mapreduce","jvm","heap-memory"],"comments":[{"owner":{"account_id":304573,"reputation":32977,"user_id":614157,"accept_rate":56,"display_name":"Praveen Sripati"},"score":0,"creation_date":1316830703,"post_id":7535833,"comment_id":9131126,"body_markdown":"check the log files and post any exception if any.","body":"check the log files and post any exception if any."},{"owner":{"account_id":474644,"reputation":363,"user_id":884450,"accept_rate":80,"display_name":"Joris"},"score":0,"creation_date":1316836245,"post_id":7535833,"comment_id":9131622,"body_markdown":"unfortunately no exception in log files ...","body":"unfortunately no exception in log files ..."},{"owner":{"account_id":258602,"reputation":20902,"user_id":540873,"display_name":"Thomas Jungblut"},"score":0,"creation_date":1316857842,"post_id":7535833,"comment_id":9133482,"body_markdown":"How does the &quot;command executes some code on the local noce&quot; looks like? Do you fork another process?","body":"How does the &quot;command executes some code on the local noce&quot; looks like? Do you fork another process?"},{"owner":{"account_id":474644,"reputation":363,"user_id":884450,"accept_rate":80,"display_name":"Joris"},"score":0,"creation_date":1316887541,"post_id":7535833,"comment_id":9137188,"body_markdown":"Yeah just another process executed through processbuilder, sorry not really up to speed with all the coding lingo","body":"Yeah just another process executed through processbuilder, sorry not really up to speed with all the coding lingo"},{"owner":{"account_id":258602,"reputation":20902,"user_id":540873,"display_name":"Thomas Jungblut"},"score":0,"creation_date":1316934480,"post_id":7535833,"comment_id":9141672,"body_markdown":"I&#39;ve written about ProcessBuilder and Hadoop, it is about OOM errors, maybe it helps you: http://codingwiththomas.blogspot.com/2011/07/dealing-with-outofmemoryerror-in-hadoop.html","body":"I&#39;ve written about ProcessBuilder and Hadoop, it is about OOM errors, maybe it helps you: <a href=\"http://codingwiththomas.blogspot.com/2011/07/dealing-with-outofmemoryerror-in-hadoop.html\" rel=\"nofollow noreferrer\">codingwiththomas.blogspot.com/2011/07/&hellip;</a>"},{"owner":{"account_id":474644,"reputation":363,"user_id":884450,"accept_rate":80,"display_name":"Joris"},"score":0,"creation_date":1317040253,"post_id":7535833,"comment_id":9156858,"body_markdown":"thanks for sharing your post, unfortunately haven&#39;t been able to fix it","body":"thanks for sharing your post, unfortunately haven&#39;t been able to fix it"},{"owner":{"account_id":1047272,"reputation":958,"user_id":1052020,"accept_rate":100,"display_name":"Laurens Rietveld"},"score":0,"creation_date":1366811648,"post_id":7535833,"comment_id":23152407,"body_markdown":"@Joris: Have you ever managed to fix this issue? I encounter the same issue with a pretty small file..","body":"@Joris: Have you ever managed to fix this issue? I encounter the same issue with a pretty small file.."}],"answers":[{"tags":[],"owner":{"account_id":389925,"reputation":76,"user_id":749671,"display_name":"Satyajit Chetri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1321497169,"creation_date":1321497169,"answer_id":8161400,"question_id":7535833,"body_markdown":"An infinite loop in the mapper or reducer can cause Out of memory errors. \r\n\r\nI ran into an OoM once when I had a while-loop with iterator.hasNext() as the condition, for the reducer values, and was not calling iterator.next() inside the loop.","title":"Hadoop java mapper -copyFromLocal heap size error","body":"<p>An infinite loop in the mapper or reducer can cause Out of memory errors. </p>\n\n<p>I ran into an OoM once when I had a while-loop with iterator.hasNext() as the condition, for the reducer values, and was not calling iterator.next() inside the loop.</p>\n"}],"owner":{"account_id":474644,"reputation":363,"user_id":884450,"accept_rate":80,"display_name":"Joris"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":515,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1636378167,"creation_date":1316820417,"question_id":7535833,"body_markdown":"As part of my Java mapper I have a command executes some code on the local node and copies a local output file to the hadoop fs.  Unfortunately I&#39;m getting the following output:\r\n\r\n&gt; Error occurred during initialization of VM\r\n&gt; \r\n&gt; Could not reserve enough space for object heap\r\n\r\nI&#39;ve tried adjusting mapred.map.child.java.opts to -Xmx512M, but unfortunately no luck.\r\n\r\nWhen I ssh into the node, I can run the -copyFromLocal command without any issues.  The ouput files are also quite small like around 100kb.\r\n\r\nAny help would be greatly appreciated!","title":"Hadoop java mapper -copyFromLocal heap size error","body":"<p>As part of my Java mapper I have a command executes some code on the local node and copies a local output file to the hadoop fs.  Unfortunately I'm getting the following output:</p>\n\n<blockquote>\n  <p>Error occurred during initialization of VM</p>\n  \n  <p>Could not reserve enough space for object heap</p>\n</blockquote>\n\n<p>I've tried adjusting mapred.map.child.java.opts to -Xmx512M, but unfortunately no luck.</p>\n\n<p>When I ssh into the node, I can run the -copyFromLocal command without any issues.  The ouput files are also quite small like around 100kb.</p>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["java","jvm","runtime","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":62347,"reputation":3769,"user_id":185310,"accept_rate":80,"display_name":"Mike K."},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1317061494,"creation_date":1317061494,"answer_id":7559480,"question_id":7559447,"body_markdown":"These are the mappings between values you&#39;re looking for:\r\n\r\n    -Xmx=Runtime.getRuntime().maxMemory()\r\n    -Xms=Runtime.getRuntime().totalMemory()\r\n\r\nHope this helps.","title":"How can I determine the JVM minimum heap size from within a java application?","body":"<p>These are the mappings between values you're looking for:</p>\n\n<pre><code>-Xmx=Runtime.getRuntime().maxMemory()\n-Xms=Runtime.getRuntime().totalMemory()\n</code></pre>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":36702,"reputation":1996,"user_id":104779,"accept_rate":85,"display_name":"alexvetter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1317062465,"creation_date":1317061718,"answer_id":7559529,"question_id":7559447,"body_markdown":"If you want to get the real JVM arguments this should help you. You can get all JVM arguments with the MXBean:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n&lt;pre&gt;&lt;code&gt;RuntimeMXBean RuntimemxBean = ManagementFactory.getRuntimeMXBean();\r\nList&amp;lt;String&amp;gt; arguments = RuntimemxBean.getInputArguments();&lt;/code&gt;&lt;/pre&gt;\r\n\r\nYou have to look for the arguments which start with &quot;-Xm(s|x)&quot;. The problem is that the value could be something like &quot;256M&quot;.","title":"How can I determine the JVM minimum heap size from within a java application?","body":"<p>If you want to get the real JVM arguments this should help you. You can get all JVM arguments with the MXBean:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>RuntimeMXBean RuntimemxBean = ManagementFactory.getRuntimeMXBean();\nList&lt;String&gt; arguments = RuntimemxBean.getInputArguments();</code></pre>\n\n<p>You have to look for the arguments which start with \"-Xm(s|x)\". The problem is that the value could be something like \"256M\".</p>\n"}],"owner":{"account_id":936797,"reputation":2054,"user_id":965593,"accept_rate":67,"display_name":"pamphlet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":630,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":7559529,"answer_count":2,"score":5,"last_activity_date":1636378157,"creation_date":1317061320,"question_id":7559447,"body_markdown":"I have reviewed the answer to https://stackoverflow.com/questions/2253976/how-to-get-the-min-and-max-heap-size-settings-of-a-jvm-from-within-a-java-program which was helpful, but the accepted answer doesn&#39;t appear to answer half of the question. In essence, I want to report the -Xms and -Xmx settings that were used when the JVM was launched.","title":"How can I determine the JVM minimum heap size from within a java application?","body":"<p>I have reviewed the answer to <a href=\"https://stackoverflow.com/questions/2253976/how-to-get-the-min-and-max-heap-size-settings-of-a-jvm-from-within-a-java-program\">how to get the min and max heap size settings of a JVM from within a Java program</a> which was helpful, but the accepted answer doesn't appear to answer half of the question. In essence, I want to report the -Xms and -Xmx settings that were used when the JVM was launched.</p>\n"},{"tags":["java","jvm","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":271709,"reputation":8427,"user_id":562388,"accept_rate":100,"display_name":"alf"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1318966856,"creation_date":1318966856,"answer_id":7812702,"question_id":7812677,"body_markdown":"The real answer is, you don&#39;t know and should not care. There are different JVMs, and no one makes promise on anything but specification.","title":"Is the Java Heap Memory contiguous?","body":"<p>The real answer is, you don't know and should not care. There are different JVMs, and no one makes promise on anything but specification.</p>\n"},{"tags":[],"owner":{"account_id":953722,"reputation":7306,"user_id":979401,"accept_rate":100,"display_name":"ObscureRobot"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1318966974,"creation_date":1318966974,"answer_id":7812721,"question_id":7812677,"body_markdown":"Quoting from the [JVM spec][1]: *The memory for the heap does not need to be contiguous.* So your code shouldn&#39;t make assumptions about the continuity of the heap.\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jvms/second_edition/html/Overview.doc.html#15730","title":"Is the Java Heap Memory contiguous?","body":"<p>Quoting from the <a href=\"http://java.sun.com/docs/books/jvms/second_edition/html/Overview.doc.html#15730\" rel=\"noreferrer\">JVM spec</a>: <em>The memory for the heap does not need to be contiguous.</em> So your code shouldn't make assumptions about the continuity of the heap.</p>\n"},{"tags":[],"owner":{"account_id":155716,"reputation":3560,"user_id":372550,"accept_rate":100,"display_name":"chrislatimer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1318967485,"creation_date":1318967485,"answer_id":7812825,"question_id":7812677,"body_markdown":"It depends on the JVM but is definitely not guaranteed to be contiguous.  HotSpot uses a generational heap whereas IBM JDK and JRockit do not.  I believe both the IBM and JRockit garbage collection processes uses a sweep/compress algorithm which in practice should result in a contiguous heap.  ","title":"Is the Java Heap Memory contiguous?","body":"<p>It depends on the JVM but is definitely not guaranteed to be contiguous.  HotSpot uses a generational heap whereas IBM JDK and JRockit do not.  I believe both the IBM and JRockit garbage collection processes uses a sweep/compress algorithm which in practice should result in a contiguous heap.  </p>\n"}],"owner":{"account_id":307266,"reputation":3397,"user_id":618467,"accept_rate":67,"display_name":"Tiago Farias"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3180,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":7812721,"answer_count":3,"score":7,"last_activity_date":1636378147,"creation_date":1318966696,"question_id":7812677,"body_markdown":"I&#39;ve seen people comment about Java Heap memory being contiguous and people say the contrary. Well, can someone give me a final answer and explain this question? Also, is there some kind of data structure in Java Heap as there is in Java Stack?","title":"Is the Java Heap Memory contiguous?","body":"<p>I've seen people comment about Java Heap memory being contiguous and people say the contrary. Well, can someone give me a final answer and explain this question? Also, is there some kind of data structure in Java Heap as there is in Java Stack?</p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":44195,"reputation":269043,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":1,"creation_date":1320977872,"post_id":8088921,"comment_id":9915141,"body_markdown":"If you directly manipulate the bytecode, you can do anything you want (in the limit, you can rewrite all the code.)  So I&#39;m not sure what your question is?","body":"If you directly manipulate the bytecode, you can do anything you want (in the limit, you can rewrite all the code.)  So I&#39;m not sure what your question is?"},{"owner":{"account_id":41994,"reputation":20222,"user_id":122207,"display_name":"Tim Bender"},"score":1,"creation_date":1320980975,"post_id":8088921,"comment_id":9915476,"body_markdown":"@BerlinBrown, your last statement is wrong. ruakh&#39;s logic on why that information must be encoded is sound. I&#39;ve also given you a quote from the JLS which directly addresses the question on whether or not accessibility is checked at runtime.","body":"@BerlinBrown, your last statement is wrong. ruakh&#39;s logic on why that information must be encoded is sound. I&#39;ve also given you a quote from the JLS which directly addresses the question on whether or not accessibility is checked at runtime."}],"answers":[{"tags":[],"owner":{"account_id":350533,"reputation":10937,"user_id":686478,"accept_rate":59,"display_name":"Prashant Bhate"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1320978253,"creation_date":1320978253,"answer_id":8088962,"question_id":8088921,"body_markdown":"If you want to call this method from outside current class you could call private &amp; protected methods using reflection.\r\n\r\n    Method m = RunX.class.getDeclaredMethod(&quot;test3&quot;);\r\n    m.setAccesible(true);\r\n    m.invoke(u);\r\n\r\n\r\nhowever you can call this protected (and also private) method directly from `main()` without any issues.","title":"JVM/Java, are method accessibility rules enforced at runtime?","body":"<p>If you want to call this method from outside current class you could call private &amp; protected methods using reflection.</p>\n\n<pre><code>Method m = RunX.class.getDeclaredMethod(\"test3\");\nm.setAccesible(true);\nm.invoke(u);\n</code></pre>\n\n<p>however you can call this protected (and also private) method directly from <code>main()</code> without any issues.</p>\n"},{"tags":[],"owner":{"account_id":185878,"reputation":7904,"user_id":422870,"display_name":"Saurabh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1320978343,"creation_date":1320978343,"answer_id":8088971,"question_id":8088921,"body_markdown":"Oli mentioned it rightly that ultimately you can do anything if you come to extent of byte code manipulation (if done correctly !!!).\r\nAlthough I will like answer your question of accessibility honor at runtime in Java. If you have any doubts then please go ahead and use reflection to call the private method of one class from other class and you will get your answer. Java creates the function table of class at runtime when loading it and allow the refererence to the functions in limit of accessibility rule. However Java provides facility where you can call the private methods via reflection using setAccessible(true) on the method reference before invoking it.","title":"JVM/Java, are method accessibility rules enforced at runtime?","body":"<p>Oli mentioned it rightly that ultimately you can do anything if you come to extent of byte code manipulation (if done correctly !!!).\nAlthough I will like answer your question of accessibility honor at runtime in Java. If you have any doubts then please go ahead and use reflection to call the private method of one class from other class and you will get your answer. Java creates the function table of class at runtime when loading it and allow the refererence to the functions in limit of accessibility rule. However Java provides facility where you can call the private methods via reflection using setAccessible(true) on the method reference before invoking it.</p>\n"},{"tags":[],"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1320979112,"creation_date":1320979112,"answer_id":8089047,"question_id":8088921,"body_markdown":"The JVM does acknowledge these. They *can* be overridden, by calling `setAccessible(true)` as Prashant Bhate does, but by default they are enforced. (See http://download.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29.)\r\n\r\nBy the way, you write that &quot;the compiler doesn&#39;t encode type method visibility rules into the Java bytecde file&quot;; but it does. In addition to the above, it *has* to encode these, for a number of reasons. For example:\r\n\r\n - you can compile a class A that references class B even if you only have the compiled version of class B.\r\n - you can inspect a method&#39;s visibility via reflection (the `getModifiers()` method).\r\n - private methods aren&#39;t virtual -slash- can&#39;t be overridden by subclasses.","title":"JVM/Java, are method accessibility rules enforced at runtime?","body":"<p>The JVM does acknowledge these. They <em>can</em> be overridden, by calling <code>setAccessible(true)</code> as Prashant Bhate does, but by default they are enforced. (See <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29\" rel=\"nofollow\">http://download.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29</a>.)</p>\n\n<p>By the way, you write that \"the compiler doesn't encode type method visibility rules into the Java bytecde file\"; but it does. In addition to the above, it <em>has</em> to encode these, for a number of reasons. For example:</p>\n\n<ul>\n<li>you can compile a class A that references class B even if you only have the compiled version of class B.</li>\n<li>you can inspect a method's visibility via reflection (the <code>getModifiers()</code> method).</li>\n<li>private methods aren't virtual -slash- can't be overridden by subclasses.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":41994,"reputation":20222,"user_id":122207,"display_name":"Tim Bender"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1320980765,"creation_date":1320980765,"answer_id":8089193,"question_id":8088921,"body_markdown":"[To the JLS!][1]\r\n\r\n&gt; 15.12.4 Runtime Evaluation of Method Invocation  \r\nAt run time, method invocation requires five steps. First, a target reference may be computed. Second, the argument expressions are evaluated. **Third, the accessibility of the method to be invoked is checked.** Fourth, the actual code for the method to be executed is located. Fifth, a new activation frame is created, synchronization is performed if necessary, and control is transferred to the method code.\r\n\r\nThe wording of the JLS indicates that the accessibility would be checked at runtime.\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jls/second_edition/html/expressions.doc.html#45677","title":"JVM/Java, are method accessibility rules enforced at runtime?","body":"<p><a href=\"http://java.sun.com/docs/books/jls/second_edition/html/expressions.doc.html#45677\">To the JLS!</a></p>\n\n<blockquote>\n  <p>15.12.4 Runtime Evaluation of Method Invocation<br>\n  At run time, method invocation requires five steps. First, a target reference may be computed. Second, the argument expressions are evaluated. <strong>Third, the accessibility of the method to be invoked is checked.</strong> Fourth, the actual code for the method to be executed is located. Fifth, a new activation frame is created, synchronization is performed if necessary, and control is transferred to the method code.</p>\n</blockquote>\n\n<p>The wording of the JLS indicates that the accessibility would be checked at runtime.</p>\n"}],"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":740,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":8089193,"answer_count":4,"score":4,"last_activity_date":1636378134,"creation_date":1320977760,"question_id":8088921,"body_markdown":"I was curious about how the JVM works.  Does the JVM acknowledge method accesibility rules like &#39;private&#39; protected or is that only done at compile time?\r\n\r\nFor example, is it possible at around line37 to do some bytecode manipulation and call a protected method, say test3?  Normally the compiler would not let me call that method because it is declared protected.  But I was curious if that protected rule is enforced at runtime?\r\n\r\n\r\nu.test1();   \r\n// Is it possible at runtime, to call &#39;test3&#39; through bytecode manipulation   \r\n// @line37      \r\n\r\n\r\n    package org.berlin.algo.basic.test;\r\n    public class RunX {\r\n        private String zzz = &quot;rrrrr&quot;;    \r\n        public void test1() {\r\n            // Note: I am intentionally use &#39;new&#39; here as part of my test, not a\r\n            // good practice I know but allowed by the language.\r\n            Object x = new String(&quot;Test1 -----[1.1] &quot; + zzz);\r\n            x = new String(&quot;Test1 --- [1.2]&quot; + x.toString());\r\n            System.out.println(x);\r\n            this.test2();\r\n            this.test3();\r\n        } \r\n        /**\r\n         * Here, I noticed that the compiler removed my &#39;test2&#39; code block.\r\n         * Does that always happen?\r\n         */\r\n        private void test2() {\r\n            Object x = new String(&quot;Test2@line21---&gt;&gt;&gt; [2.1]&quot;);        \r\n            System.out.println(x);\r\n        }    \r\n        protected void test3() {\r\n            Object x = new String(&quot;Test3@line27 {Will the JVM enforce the &#39;protected&#39; method rule for test3? ---&gt;&gt;&gt; [3.1]&quot;);\r\n            x = new String(&quot;Test3@line28---&gt;&gt;&gt; [3.2]&quot;);\r\n            System.out.println(x);               \r\n        }    \r\n        public static void main(final String [] args) {\r\n            System.out.println(&quot;Running&quot;);\r\n            RunX u = new RunX();\r\n            u.test1();\r\n            // Is it possible at runtime, to call &#39;test3&#39; through bytecode manipulation\r\n            // @line37\r\n            System.out.println(&quot;Done&quot;);\r\n        }    \r\n    } // End of the Class //\r\n    /* \r\n     JVM bytecode: javap -v RunX \r\n     Compiled from &quot;RunX.java&quot;\r\n    public class org.berlin.algo.basic.test.RunX extends java.lang.Object\r\n      SourceFile: &quot;RunX.java&quot;\r\n      minor version: 0\r\n      major version: 50\r\n      Constant pool:\r\n    const #1 = class    #2; //  org/berlin/algo/basic/test/RunX\r\n    const #2 = Asciz    org/berlin/algo/basic/test/RunX;\r\n    ...\r\n    ...\r\n    const #84 = Asciz   SourceFile;\r\n    const #85 = Asciz   RunX.java;\r\n    \r\n    {\r\n    public org.berlin.algo.basic.test.RunX();\r\n      Code:\r\n       Stack=2, Locals=1, Args_size=1\r\n       0:   aload_0\r\n       1:   invokespecial   #10; //Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n       4:   aload_0\r\n       5:   ldc #12; //String rrrrr\r\n       7:   putfield    #14; //Field zzz:Ljava/lang/String;\r\n       10:  return\r\n      LineNumberTable: \r\n       line 3: 0\r\n       line 5: 4\r\n       line 3: 10\r\n    \r\n      LocalVariableTable: \r\n       Start  Length  Slot  Name   Signature\r\n       0      11      0    this       Lorg/berlin/algo/basic/test/RunX;\r\n    \r\n    public void test1();\r\n      Code:\r\n       Stack=5, Locals=2, Args_size=1\r\n       0:   new #21; //class java/lang/String\r\n       3:   dup\r\n       4:   new #23; //class java/lang/StringBuilder\r\n       7:   dup\r\n       8:   ldc #25; //String Test1 -----[1.1] \r\n       10:  invokespecial   #27; //Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n       13:  aload_0\r\n       14:  getfield    #14; //Field zzz:Ljava/lang/String;\r\n       17:  invokevirtual   #30; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\r\n       20:  invokevirtual   #34; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;\r\n       23:  invokespecial   #38; //Method java/lang/String.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n       26:  astore_1\r\n       27:  new #21; //class java/lang/String\r\n       30:  dup\r\n       31:  new #23; //class java/lang/StringBuilder\r\n       34:  dup\r\n       35:  ldc #39; //String Test1 --- [1.2]\r\n       37:  invokespecial   #27; //Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n       40:  aload_1\r\n       41:  invokevirtual   #41; //Method java/lang/Object.toString:()Ljava/lang/String;\r\n       44:  invokevirtual   #30; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\r\n       47:  invokevirtual   #34; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;\r\n       50:  invokespecial   #38; //Method java/lang/String.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n       53:  astore_1\r\n       54:  getstatic   #42; //Field java/lang/System.out:Ljava/io/PrintStream;\r\n       57:  aload_1\r\n       58:  invokevirtual   #48; //Method java/io/PrintStream.println:(Ljava/lang/Object;)V\r\n       61:  aload_0\r\n       62:  invokespecial   #54; //Method test2:()V\r\n       65:  aload_0\r\n       66:  invokevirtual   #57; //Method test3:()V\r\n       69:  return\r\n    \r\n      LocalVariableTable: \r\n       Start  Length  Slot  Name   Signature\r\n       0      70      0    this       Lorg/berlin/algo/basic/test/RunX;\r\n       27      43      1    x       Ljava/lang/Object;\r\n    \r\n    protected void test3();\r\n      Code:\r\n       Stack=3, Locals=2, Args_size=1\r\n       0:   new #21; //class java/lang/String\r\n       3:   dup\r\n       4:   ldc #66; //String Test3@line27 {Will the JVM enforce the &#39;protected&#39; method rule for test3? ---&gt;&gt;&gt; [3.1]\r\n       6:   invokespecial   #38; //Method java/lang/String.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n       9:   astore_1\r\n       10:  new #21; //class java/lang/String\r\n       13:  dup\r\n       14:  ldc #68; //String Test3@line28---&gt;&gt;&gt; [3.2]\r\n       16:  invokespecial   #38; //Method java/lang/String.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n       19:  astore_1\r\n       20:  getstatic   #42; //Field java/lang/System.out:Ljava/io/PrintStream;\r\n       23:  aload_1\r\n       24:  invokevirtual   #48; //Method java/io/PrintStream.println:(Ljava/lang/Object;)V\r\n       27:  return\r\n     \r\n      LocalVariableTable: \r\n       Start  Length  Slot  Name   Signature\r\n       0      28      0    this       Lorg/berlin/algo/basic/test/RunX;\r\n       10      18      1    x       Ljava/lang/Object;\r\n    public static void main(java.lang.String[]);\r\n      Code:\r\n       Stack=2, Locals=2, Args_size=1\r\n       0:   getstatic   #42; //Field java/lang/System.out:Ljava/io/PrintStream;\r\n       3:   ldc #72; //String Running\r\n       5:   invokevirtual   #74; //Method java/io/PrintStream.println:(Ljava/lang/String;)V\r\n       8:   new #1; //class org/berlin/algo/basic/test/RunX\r\n       11:  dup\r\n       12:  invokespecial   #76; //Method &quot;&lt;init&gt;&quot;:()V\r\n       15:  astore_1\r\n       16:  aload_1\r\n       17:  invokevirtual   #77; //Method test1:()V\r\n       20:  getstatic   #42; //Field java/lang/System.out:Ljava/io/PrintStream;\r\n       23:  ldc #79; //String Done\r\n       25:  invokevirtual   #74; //Method java/io/PrintStream.println:(Ljava/lang/String;)V\r\n       28:  return\r\n      LocalVariableTable: \r\n       Start  Length  Slot  Name   Signature\r\n       0      29      0    args       [Ljava/lang/String;\r\n       16      13      1    u       Lorg/berlin/algo/basic/test/RunX;\r\n    }\r\n     */\r\n\r\n","title":"JVM/Java, are method accessibility rules enforced at runtime?","body":"<p>I was curious about how the JVM works.  Does the JVM acknowledge method accesibility rules like 'private' protected or is that only done at compile time?</p>\n\n<p>For example, is it possible at around line37 to do some bytecode manipulation and call a protected method, say test3?  Normally the compiler would not let me call that method because it is declared protected.  But I was curious if that protected rule is enforced at runtime?</p>\n\n<p>u.test1();<br>\n// Is it possible at runtime, to call 'test3' through bytecode manipulation<br>\n// @line37      </p>\n\n<pre><code>package org.berlin.algo.basic.test;\npublic class RunX {\n    private String zzz = \"rrrrr\";    \n    public void test1() {\n        // Note: I am intentionally use 'new' here as part of my test, not a\n        // good practice I know but allowed by the language.\n        Object x = new String(\"Test1 -----[1.1] \" + zzz);\n        x = new String(\"Test1 --- [1.2]\" + x.toString());\n        System.out.println(x);\n        this.test2();\n        this.test3();\n    } \n    /**\n     * Here, I noticed that the compiler removed my 'test2' code block.\n     * Does that always happen?\n     */\n    private void test2() {\n        Object x = new String(\"Test2@line21---&gt;&gt;&gt; [2.1]\");        \n        System.out.println(x);\n    }    \n    protected void test3() {\n        Object x = new String(\"Test3@line27 {Will the JVM enforce the 'protected' method rule for test3? ---&gt;&gt;&gt; [3.1]\");\n        x = new String(\"Test3@line28---&gt;&gt;&gt; [3.2]\");\n        System.out.println(x);               \n    }    \n    public static void main(final String [] args) {\n        System.out.println(\"Running\");\n        RunX u = new RunX();\n        u.test1();\n        // Is it possible at runtime, to call 'test3' through bytecode manipulation\n        // @line37\n        System.out.println(\"Done\");\n    }    \n} // End of the Class //\n/* \n JVM bytecode: javap -v RunX \n Compiled from \"RunX.java\"\npublic class org.berlin.algo.basic.test.RunX extends java.lang.Object\n  SourceFile: \"RunX.java\"\n  minor version: 0\n  major version: 50\n  Constant pool:\nconst #1 = class    #2; //  org/berlin/algo/basic/test/RunX\nconst #2 = Asciz    org/berlin/algo/basic/test/RunX;\n...\n...\nconst #84 = Asciz   SourceFile;\nconst #85 = Asciz   RunX.java;\n\n{\npublic org.berlin.algo.basic.test.RunX();\n  Code:\n   Stack=2, Locals=1, Args_size=1\n   0:   aload_0\n   1:   invokespecial   #10; //Method java/lang/Object.\"&lt;init&gt;\":()V\n   4:   aload_0\n   5:   ldc #12; //String rrrrr\n   7:   putfield    #14; //Field zzz:Ljava/lang/String;\n   10:  return\n  LineNumberTable: \n   line 3: 0\n   line 5: 4\n   line 3: 10\n\n  LocalVariableTable: \n   Start  Length  Slot  Name   Signature\n   0      11      0    this       Lorg/berlin/algo/basic/test/RunX;\n\npublic void test1();\n  Code:\n   Stack=5, Locals=2, Args_size=1\n   0:   new #21; //class java/lang/String\n   3:   dup\n   4:   new #23; //class java/lang/StringBuilder\n   7:   dup\n   8:   ldc #25; //String Test1 -----[1.1] \n   10:  invokespecial   #27; //Method java/lang/StringBuilder.\"&lt;init&gt;\":(Ljava/lang/String;)V\n   13:  aload_0\n   14:  getfield    #14; //Field zzz:Ljava/lang/String;\n   17:  invokevirtual   #30; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\n   20:  invokevirtual   #34; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;\n   23:  invokespecial   #38; //Method java/lang/String.\"&lt;init&gt;\":(Ljava/lang/String;)V\n   26:  astore_1\n   27:  new #21; //class java/lang/String\n   30:  dup\n   31:  new #23; //class java/lang/StringBuilder\n   34:  dup\n   35:  ldc #39; //String Test1 --- [1.2]\n   37:  invokespecial   #27; //Method java/lang/StringBuilder.\"&lt;init&gt;\":(Ljava/lang/String;)V\n   40:  aload_1\n   41:  invokevirtual   #41; //Method java/lang/Object.toString:()Ljava/lang/String;\n   44:  invokevirtual   #30; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\n   47:  invokevirtual   #34; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;\n   50:  invokespecial   #38; //Method java/lang/String.\"&lt;init&gt;\":(Ljava/lang/String;)V\n   53:  astore_1\n   54:  getstatic   #42; //Field java/lang/System.out:Ljava/io/PrintStream;\n   57:  aload_1\n   58:  invokevirtual   #48; //Method java/io/PrintStream.println:(Ljava/lang/Object;)V\n   61:  aload_0\n   62:  invokespecial   #54; //Method test2:()V\n   65:  aload_0\n   66:  invokevirtual   #57; //Method test3:()V\n   69:  return\n\n  LocalVariableTable: \n   Start  Length  Slot  Name   Signature\n   0      70      0    this       Lorg/berlin/algo/basic/test/RunX;\n   27      43      1    x       Ljava/lang/Object;\n\nprotected void test3();\n  Code:\n   Stack=3, Locals=2, Args_size=1\n   0:   new #21; //class java/lang/String\n   3:   dup\n   4:   ldc #66; //String Test3@line27 {Will the JVM enforce the 'protected' method rule for test3? ---&gt;&gt;&gt; [3.1]\n   6:   invokespecial   #38; //Method java/lang/String.\"&lt;init&gt;\":(Ljava/lang/String;)V\n   9:   astore_1\n   10:  new #21; //class java/lang/String\n   13:  dup\n   14:  ldc #68; //String Test3@line28---&gt;&gt;&gt; [3.2]\n   16:  invokespecial   #38; //Method java/lang/String.\"&lt;init&gt;\":(Ljava/lang/String;)V\n   19:  astore_1\n   20:  getstatic   #42; //Field java/lang/System.out:Ljava/io/PrintStream;\n   23:  aload_1\n   24:  invokevirtual   #48; //Method java/io/PrintStream.println:(Ljava/lang/Object;)V\n   27:  return\n\n  LocalVariableTable: \n   Start  Length  Slot  Name   Signature\n   0      28      0    this       Lorg/berlin/algo/basic/test/RunX;\n   10      18      1    x       Ljava/lang/Object;\npublic static void main(java.lang.String[]);\n  Code:\n   Stack=2, Locals=2, Args_size=1\n   0:   getstatic   #42; //Field java/lang/System.out:Ljava/io/PrintStream;\n   3:   ldc #72; //String Running\n   5:   invokevirtual   #74; //Method java/io/PrintStream.println:(Ljava/lang/String;)V\n   8:   new #1; //class org/berlin/algo/basic/test/RunX\n   11:  dup\n   12:  invokespecial   #76; //Method \"&lt;init&gt;\":()V\n   15:  astore_1\n   16:  aload_1\n   17:  invokevirtual   #77; //Method test1:()V\n   20:  getstatic   #42; //Field java/lang/System.out:Ljava/io/PrintStream;\n   23:  ldc #79; //String Done\n   25:  invokevirtual   #74; //Method java/io/PrintStream.println:(Ljava/lang/String;)V\n   28:  return\n  LocalVariableTable: \n   Start  Length  Slot  Name   Signature\n   0      29      0    args       [Ljava/lang/String;\n   16      13      1    u       Lorg/berlin/algo/basic/test/RunX;\n}\n */\n</code></pre>\n"},{"tags":["java","memory-management","jvm","virtual-machine","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":247036,"reputation":10201,"user_id":521505,"display_name":"socha23"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1324463292,"creation_date":1324462308,"answer_id":8588167,"question_id":8588152,"body_markdown":"Local variable `d` (allocated on stack) contains a reference to an object of class `Duck`. In general objects are allocated on the heap. \r\n\r\nJava 6e14 added support for something called &#39;escape analysis&#39;. When you enable it with `-XX:+DoEscapeAnalysis` switch, then if JVM determines that an object is created in a method, used only in that method and there is no way for reference to the object to &#39;escape&#39; that method - that is, we can be sure that the object is not referenced after method completes - JVM can allocate it on stack (treating all its fields as if they were local variables). This would probably happen in your example.\r\n\r\nFields are allocated with the rest of the object, so on the heap or on the stack, depending of escape analysis results.","title":"Java Where do Local variables,Object references,instance variables","body":"<p>Local variable <code>d</code> (allocated on stack) contains a reference to an object of class <code>Duck</code>. In general objects are allocated on the heap. </p>\n\n<p>Java 6e14 added support for something called 'escape analysis'. When you enable it with <code>-XX:+DoEscapeAnalysis</code> switch, then if JVM determines that an object is created in a method, used only in that method and there is no way for reference to the object to 'escape' that method - that is, we can be sure that the object is not referenced after method completes - JVM can allocate it on stack (treating all its fields as if they were local variables). This would probably happen in your example.</p>\n\n<p>Fields are allocated with the rest of the object, so on the heap or on the stack, depending of escape analysis results.</p>\n"},{"tags":[],"owner":{"account_id":1614698,"reputation":137,"user_id":1492715,"accept_rate":50,"display_name":"yasir"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1341541319,"creation_date":1341541319,"answer_id":11355048,"question_id":8588152,"body_markdown":"Object reference variables work. just like primitive variables-if the reference is declared as a local variable, it goes on the stack.else if refrence is instance variable it will go into the heap within an object.","title":"Java Where do Local variables,Object references,instance variables","body":"<p>Object reference variables work. just like primitive variables-if the reference is declared as a local variable, it goes on the stack.else if refrence is instance variable it will go into the heap within an object.</p>\n"}],"owner":{"account_id":1010361,"reputation":4702,"user_id":1023060,"accept_rate":99,"display_name":"KyelJmD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9356,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":8588167,"answer_count":2,"score":5,"last_activity_date":1636378101,"creation_date":1324462219,"question_id":8588152,"body_markdown":"I am currently learning the memory concepts of java, the stack and the heap, I know that local variables and method calls lived in a place called stack. and objects lived inside a heap. but what if that local variable holds an object? or has an object reference?\r\n\r\n    public void Something(){\r\n            Duck d = new Duck(24);\r\n    }\r\n\r\nDoes it still live inside a stack? and where do instance variables live? please keep it simple as possible. thank you.","title":"Java Where do Local variables,Object references,instance variables","body":"<p>I am currently learning the memory concepts of java, the stack and the heap, I know that local variables and method calls lived in a place called stack. and objects lived inside a heap. but what if that local variable holds an object? or has an object reference?</p>\n\n<pre><code>public void Something(){\n        Duck d = new Duck(24);\n}\n</code></pre>\n\n<p>Does it still live inside a stack? and where do instance variables live? please keep it simple as possible. thank you.</p>\n"},{"tags":["java","tomcat","jvm","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":48025,"reputation":1684,"user_id":142458,"display_name":"Greg Bowyer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1330377427,"creation_date":1330377427,"answer_id":9472406,"question_id":8598878,"body_markdown":"The hotspot (read sun) heap is split into several parts, so when you specify -Xmx you are really setting a maximum for the entire heap, and not part of it.\r\n\r\nEden is a small part of the overall heap, its kept small to ensure that the application does not stop for long periods of time during collection. All new objects (that fit) go into eden to start with, if they are not garbage they will get promoted to either the survivor spaces or tenure.\r\n\r\nSurvivor (The To/From space) is a place for the GC to try to get objects that might be garbage, but could not be worked out quickly during eden collection, there are two survivor spaces which act as buffers, as one is filled by the GC the other is drained into tenure, if you were to watch the graphs you will see these two spaces flipping over in usage.\r\n\r\nTenure is where long lived objects reside, this heap is typically quite large and is collected by a different algorithm to that of eden.\r\n\r\nPerm is somewhat separate to the rest of the heap, it is where constant strings (any string that has been &quot;interned&quot;) and class bytecode live. It is very rare that you need to tune it, typically it only needs to be increased for huge applications, or for applications that (badly) auto-generate code.\r\n\r\nWithout pause times I cannot really say if you have your JVM settings quite right, but from your heap sizes you appear to be using roughly 1.2 Gb of your allocation. Unless your application is seeing any nasty pauses I would think that you are done with GC tuning (people often go to town on a huge number of flags without really understanding what they do, leave the flags be until you have proven to yourself that they are needed)\r\n\r\nYou are aiming for low latency on web applications so the usage of ConcurrentMarkSweep as the  tenure collector is a sane choice.","title":"Explanation of running jmap on my tomcat pid","body":"<p>The hotspot (read sun) heap is split into several parts, so when you specify -Xmx you are really setting a maximum for the entire heap, and not part of it.</p>\n\n<p>Eden is a small part of the overall heap, its kept small to ensure that the application does not stop for long periods of time during collection. All new objects (that fit) go into eden to start with, if they are not garbage they will get promoted to either the survivor spaces or tenure.</p>\n\n<p>Survivor (The To/From space) is a place for the GC to try to get objects that might be garbage, but could not be worked out quickly during eden collection, there are two survivor spaces which act as buffers, as one is filled by the GC the other is drained into tenure, if you were to watch the graphs you will see these two spaces flipping over in usage.</p>\n\n<p>Tenure is where long lived objects reside, this heap is typically quite large and is collected by a different algorithm to that of eden.</p>\n\n<p>Perm is somewhat separate to the rest of the heap, it is where constant strings (any string that has been \"interned\") and class bytecode live. It is very rare that you need to tune it, typically it only needs to be increased for huge applications, or for applications that (badly) auto-generate code.</p>\n\n<p>Without pause times I cannot really say if you have your JVM settings quite right, but from your heap sizes you appear to be using roughly 1.2 Gb of your allocation. Unless your application is seeing any nasty pauses I would think that you are done with GC tuning (people often go to town on a huge number of flags without really understanding what they do, leave the flags be until you have proven to yourself that they are needed)</p>\n\n<p>You are aiming for low latency on web applications so the usage of ConcurrentMarkSweep as the  tenure collector is a sane choice.</p>\n"}],"owner":{"account_id":17640,"reputation":261516,"user_id":39677,"accept_rate":57,"display_name":"Blankman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1622,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1636378090,"creation_date":1324521631,"question_id":8598878,"body_markdown":"I modified my catalina.sh with this on the top:\r\n\r\n    export CATALINA_OPTS=&quot;-Xms512m -Xmx1500m&quot;\r\n\r\nI have 4GB ram on my server, and I am load testing so I want to give everything to tomcat pretty much.\r\n\r\n**What other JVM settings should I be tweaking to maximize requests per second?**\r\n\r\nIs PerMem important also?\r\n\r\nI&#39;m a bit confused as to the jmap output below.\r\n\r\nI set Xmx to 1500megs, which it seems to have updated as I see the &#39;maxheapsize&#39; is 1500m.\r\n\r\nBut where does it show how much the heap I&#39;ve used and how much is free?\r\n\r\n**I see under heap usage 63mb (eden), What is that?** \r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/GY08L.png","title":"Explanation of running jmap on my tomcat pid","body":"<p>I modified my catalina.sh with this on the top:</p>\n\n<pre><code>export CATALINA_OPTS=\"-Xms512m -Xmx1500m\"\n</code></pre>\n\n<p>I have 4GB ram on my server, and I am load testing so I want to give everything to tomcat pretty much.</p>\n\n<p><strong>What other JVM settings should I be tweaking to maximize requests per second?</strong></p>\n\n<p>Is PerMem important also?</p>\n\n<p>I'm a bit confused as to the jmap output below.</p>\n\n<p>I set Xmx to 1500megs, which it seems to have updated as I see the 'maxheapsize' is 1500m.</p>\n\n<p>But where does it show how much the heap I've used and how much is free?</p>\n\n<p><strong>I see under heap usage 63mb (eden), What is that?</strong> </p>\n\n<p><img src=\"https://i.stack.imgur.com/GY08L.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","jvm","histogram","heap-memory","jmap"],"owner":{"account_id":1175701,"reputation":1059,"user_id":1151800,"display_name":"kornero"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1059,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1636378079,"creation_date":1328518514,"question_id":9157643,"body_markdown":"Sometimes when I execute a command:\r\n**&quot;$JAVA_HOME/bin/jmap -histo:live &quot; + pid + &quot; &gt; &quot; + fileName**\r\nI get an empty(blank) file.\r\n\r\nWhy this may happen?\r\n\r\n***P.S. This is using in autotest (test on memory leaks).***\r\nWith option -F (forced) I get histogram, but it includes non-live objects.\r\n\r\nThx, for any help.","title":"jmap -histo:live output is empty","body":"<p>Sometimes when I execute a command:\n<strong>\"$JAVA_HOME/bin/jmap -histo:live \" + pid + \" > \" + fileName</strong>\nI get an empty(blank) file.</p>\n\n<p>Why this may happen?</p>\n\n<p><em><strong>P.S. This is using in autotest (test on memory leaks).</em></strong>\nWith option -F (forced) I get histogram, but it includes non-live objects.</p>\n\n<p>Thx, for any help.</p>\n"},{"tags":["java","memory-management","static","jvm","heap-memory"],"comments":[{"owner":{"account_id":83902,"reputation":17582,"user_id":234922,"accept_rate":91,"display_name":"fasseg"},"score":1,"creation_date":1330609351,"post_id":9517215,"comment_id":12053920,"body_markdown":"this SO question has some info on static classes http://stackoverflow.com/questions/3849634/static-allocation-in-java-heap-stack-and-permanent-generation","body":"this SO question has some info on static classes <a href=\"http://stackoverflow.com/questions/3849634/static-allocation-in-java-heap-stack-and-permanent-generation\" title=\"static allocation in java heap stack and permanent generation\">stackoverflow.com/questions/3849634/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1330614517,"creation_date":1330609765,"answer_id":9517368,"question_id":9517215,"body_markdown":"The young space includes the eden space and survivor spaces.\r\n\r\n&gt; Where do static and static final primitives and references live that the JVM is able to use a single instance? \r\n\r\nIts not defined, but in the Sun/Oracle JVM, static fields live in a special object for class fields.  You have one instance per class loader so static fields can have multiple instances.\r\n\r\n&gt; Are static and static final objects stored in the Heap (I assume they are moved to tenured)?\r\n\r\nIn the Sun/Oracle Java 7 they are.  They could be in the Perm Gen or any where else.\r\n\r\n&gt; What is considered the best practice in terms of the number of static final references in an application?\r\n\r\nKeep them to a minimum.\r\n\r\n&gt; Will creating more static final references decrease the amount of Heap space in JVM?\r\n\r\nIf you can change a final field into a static final field, this can save some space (if you have multiple instances)   However, clarity is usually more important than performance. (And I would do it for clarity)\r\n\r\nBTW: I have been developing in Java for 13 years.\r\n\r\n&gt; So there can be multiple instances of static fields - does the JVM alter each instance \r\n\r\nThey are independent. Each classloader can load its own version of a class (the code doesn&#39;t have to be the same) and each gets its own static fields (they don&#39;t have to be the same either)\r\n\r\n&gt; if a static field is changed (ie. static int instanceCount where instanceCount++ is executed on each object construction)? \r\n\r\nNo.\r\n\r\n&gt; Also, Objects can be moved to Perm Gen?\r\n\r\nNo. Must some data which is not defined in one location can be anywhere depending on the implementation and version.\r\n\r\n&gt; Is Perm Gen. considered to be part of the Heap? \r\n\r\nIt is part of the old gen = tenured + perm gen.\r\n\r\nYoung gen = eden + survivor space * 2\r\n\r\nMaximum Heap Size limits the young gen &amp; tenured total. Perm gen and direct memory have their own limits.  Memory mapped files done follow any of these limits.\r\n\r\nThis is true for the default parallel collector and the concurrent mark sweep.\r\n\r\nThe G1 collector doesn&#39;t divide up the spaces the same way.\r\n\r\n---\r\n\r\nLinks for more details\r\n\r\nhttp://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html\r\n\r\nhttps://stackoverflow.com/questions/2129044/java-heap-terminology-young-old-and-permanent-generations\r\n\r\nhttp://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html\r\n\r\n\r\n","title":"Java Statics Primitives, Objects, Methods and the Heap (Memory Management &amp; Best Practices)","body":"<p>The young space includes the eden space and survivor spaces.</p>\n\n<blockquote>\n  <p>Where do static and static final primitives and references live that the JVM is able to use a single instance? </p>\n</blockquote>\n\n<p>Its not defined, but in the Sun/Oracle JVM, static fields live in a special object for class fields.  You have one instance per class loader so static fields can have multiple instances.</p>\n\n<blockquote>\n  <p>Are static and static final objects stored in the Heap (I assume they are moved to tenured)?</p>\n</blockquote>\n\n<p>In the Sun/Oracle Java 7 they are.  They could be in the Perm Gen or any where else.</p>\n\n<blockquote>\n  <p>What is considered the best practice in terms of the number of static final references in an application?</p>\n</blockquote>\n\n<p>Keep them to a minimum.</p>\n\n<blockquote>\n  <p>Will creating more static final references decrease the amount of Heap space in JVM?</p>\n</blockquote>\n\n<p>If you can change a final field into a static final field, this can save some space (if you have multiple instances)   However, clarity is usually more important than performance. (And I would do it for clarity)</p>\n\n<p>BTW: I have been developing in Java for 13 years.</p>\n\n<blockquote>\n  <p>So there can be multiple instances of static fields - does the JVM alter each instance </p>\n</blockquote>\n\n<p>They are independent. Each classloader can load its own version of a class (the code doesn't have to be the same) and each gets its own static fields (they don't have to be the same either)</p>\n\n<blockquote>\n  <p>if a static field is changed (ie. static int instanceCount where instanceCount++ is executed on each object construction)? </p>\n</blockquote>\n\n<p>No.</p>\n\n<blockquote>\n  <p>Also, Objects can be moved to Perm Gen?</p>\n</blockquote>\n\n<p>No. Must some data which is not defined in one location can be anywhere depending on the implementation and version.</p>\n\n<blockquote>\n  <p>Is Perm Gen. considered to be part of the Heap? </p>\n</blockquote>\n\n<p>It is part of the old gen = tenured + perm gen.</p>\n\n<p>Young gen = eden + survivor space * 2</p>\n\n<p>Maximum Heap Size limits the young gen &amp; tenured total. Perm gen and direct memory have their own limits.  Memory mapped files done follow any of these limits.</p>\n\n<p>This is true for the default parallel collector and the concurrent mark sweep.</p>\n\n<p>The G1 collector doesn't divide up the spaces the same way.</p>\n\n<hr>\n\n<p>Links for more details</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2129044/java-heap-terminology-young-old-and-permanent-generations\">Java heap terminology: young, old and permanent generations?</a></p>\n\n<p><a href=\"http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html\" rel=\"nofollow noreferrer\">http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html</a></p>\n"}],"owner":{"account_id":541194,"reputation":5180,"user_id":909651,"accept_rate":72,"display_name":"jjNford"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1876,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":9517368,"answer_count":1,"score":10,"last_activity_date":1636378069,"creation_date":1330609049,"question_id":9517215,"body_markdown":"Okay, so I have been developing in Java for a little over a year now and am making an effort to dive deeper into the language and its best practices.  \r\n\r\n**So here is what I know:**\r\n\r\n - Java &quot;passes by type&quot; - that is primitives pass by copy and object reference pass by copy (references point to their object on the heap).  \r\n\r\n - Primitive instance variables and references live in their class object in the heap and local primitives and references live on the stack (in their respective stack frame).\r\n\r\n - Perm Gen. memory space is where class meta data is stored (used for reflection).  \r\n\r\n - The Heap has an Eden space where new objects are places, a Young space where objects who have survived a GC are kept and a Tenured space where long lived objects are placed.\r\n\r\n**So here is what I would like to understand**:\r\n\r\n - Where do static and static final primitives and references live that the JVM is able to use a single instance?  \r\n\r\n - Are static and static final objects stored in the Heap (I assume they are moved to tenured)? \r\n\r\n - What is considered the best practice in terms of the number of static final references in an application?\r\n\r\n - Will creating more static final references decrease the amount of Heap space in JVM?\r\n\r\nI have read many different explanations about this (all differed) and would love if a seasoned veteran in the Java language could provide a good explanation.  Thanks in advance!","title":"Java Statics Primitives, Objects, Methods and the Heap (Memory Management &amp; Best Practices)","body":"<p>Okay, so I have been developing in Java for a little over a year now and am making an effort to dive deeper into the language and its best practices.  </p>\n\n<p><strong>So here is what I know:</strong></p>\n\n<ul>\n<li><p>Java \"passes by type\" - that is primitives pass by copy and object reference pass by copy (references point to their object on the heap).  </p></li>\n<li><p>Primitive instance variables and references live in their class object in the heap and local primitives and references live on the stack (in their respective stack frame).</p></li>\n<li><p>Perm Gen. memory space is where class meta data is stored (used for reflection).  </p></li>\n<li><p>The Heap has an Eden space where new objects are places, a Young space where objects who have survived a GC are kept and a Tenured space where long lived objects are placed.</p></li>\n</ul>\n\n<p><strong>So here is what I would like to understand</strong>:</p>\n\n<ul>\n<li><p>Where do static and static final primitives and references live that the JVM is able to use a single instance?  </p></li>\n<li><p>Are static and static final objects stored in the Heap (I assume they are moved to tenured)? </p></li>\n<li><p>What is considered the best practice in terms of the number of static final references in an application?</p></li>\n<li><p>Will creating more static final references decrease the amount of Heap space in JVM?</p></li>\n</ul>\n\n<p>I have read many different explanations about this (all differed) and would love if a seasoned veteran in the Java language could provide a good explanation.  Thanks in advance!</p>\n"},{"tags":["java","jvm","heap-memory","netbeans-7.1"],"answers":[{"tags":[],"owner":{"account_id":938680,"reputation":1568,"user_id":967154,"accept_rate":88,"display_name":"Robert Louis Murphy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1334945454,"creation_date":1334945454,"answer_id":10251317,"question_id":10250083,"body_markdown":"It looks like you installed your NetBeans with a 32-bit java.exe, Edit your netbeans.conf in C:\\Program Files (x86)\\NetBeans 7.1\\etc\\ or C:\\Program Files\\NetBeans 7.1\\etc\\\r\nand make sure it says (replace jdk1.7.0_03 with the version you actually intend on using):\r\n    \r\n    ...\r\n    # Default location of JDK, can be overridden by using --jdkhome &lt;dir&gt;:\r\n    netbeans_jdkhome=&quot;C:\\Program Files\\Java\\jdk1.7.0_03&quot;\r\n    ...\r\n\r\nand not\r\n\r\n    ...\r\n    # Default location of JDK, can be overridden by using --jdkhome &lt;dir&gt;:\r\n    netbeans_jdkhome=&quot;C:\\Program Files (x86)\\Java\\jdk1.7.0_03&quot;\r\n    ...\r\n\r\nnote that the &quot;(x86)&quot; in Windows means 32-bit, or just edit your project and pick a 64-bit JVM.  You may have to add your 64-bit JVM to Tools-&gt;Java Platforms.  Of course if you aren&#39;t using Windows the specifics will be different but it will still be a 32-bit vs 64-bit issue.\r\n\r\nThis situation usually arises when someone wants to use a newer JVM but they accidently install the 32-bit version instead of the 64-bit.  Also note:  you can configure your project to run/debug in a 64-bit JVM while NetBeans itself is running in a 32-bit JVM, so you don&#39;t actually have to modify netbeans.conf to make your project capable of allocated 4GB.\r\n\r\nIn summary:\r\n\r\n 1. Make sure you have a 64-bit JDK installed\r\n 2. Make sure your 64-bit JDK is listed in your Java Platforms in NetBeans\r\n 3. Make sure Your Project-&gt;Properties-&gt;Libraries-&gt;Java Platform is set to the 64-bit JDK you want to use.","title":"Difference in JVM heap size allocation between Netbeans 7.0.1 and 7.1?","body":"<p>It looks like you installed your NetBeans with a 32-bit java.exe, Edit your netbeans.conf in C:\\Program Files (x86)\\NetBeans 7.1\\etc\\ or C:\\Program Files\\NetBeans 7.1\\etc\\\nand make sure it says (replace jdk1.7.0_03 with the version you actually intend on using):</p>\n\n<pre><code>...\n# Default location of JDK, can be overridden by using --jdkhome &lt;dir&gt;:\nnetbeans_jdkhome=\"C:\\Program Files\\Java\\jdk1.7.0_03\"\n...\n</code></pre>\n\n<p>and not</p>\n\n<pre><code>...\n# Default location of JDK, can be overridden by using --jdkhome &lt;dir&gt;:\nnetbeans_jdkhome=\"C:\\Program Files (x86)\\Java\\jdk1.7.0_03\"\n...\n</code></pre>\n\n<p>note that the \"(x86)\" in Windows means 32-bit, or just edit your project and pick a 64-bit JVM.  You may have to add your 64-bit JVM to Tools->Java Platforms.  Of course if you aren't using Windows the specifics will be different but it will still be a 32-bit vs 64-bit issue.</p>\n\n<p>This situation usually arises when someone wants to use a newer JVM but they accidently install the 32-bit version instead of the 64-bit.  Also note:  you can configure your project to run/debug in a 64-bit JVM while NetBeans itself is running in a 32-bit JVM, so you don't actually have to modify netbeans.conf to make your project capable of allocated 4GB.</p>\n\n<p>In summary:</p>\n\n<ol>\n<li>Make sure you have a 64-bit JDK installed</li>\n<li>Make sure your 64-bit JDK is listed in your Java Platforms in NetBeans</li>\n<li>Make sure Your Project->Properties->Libraries->Java Platform is set to the 64-bit JDK you want to use.</li>\n</ol>\n"}],"owner":{"account_id":1419571,"reputation":159,"user_id":1344486,"accept_rate":80,"display_name":"babcoccl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1397,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":10251317,"answer_count":1,"score":3,"last_activity_date":1636378046,"creation_date":1334939725,"question_id":10250083,"body_markdown":"I have a java program that I developed using Netbeans 7.0.1 to parse and save large CSV files. Because of the size of the CSV files I needed to increase the heap size of the JVM. In 7.0.1 I set the heap size to use 4GB of my 8GB on my system using the -Xmx4096m specification under Project -&gt;Properties -&gt; VM Options in Netbeans. It worked fine in 7.0.1.\r\n\r\nNow I&#39;m trying to run it in Netbeans 7.1 and I&#39;m getting the following for output from Netbeans \r\n\r\n    Could not create the Java virtual machine.\r\n    Invalid maximum heap size: -Xmx4096m\r\n    The specified size exceeds the maximum representable size.\r\n    Java Result: 1\r\n\r\nI&#39;ve changed nothing from default in Netbeans when I get this error.\r\n\r\nI figured that maybe in 7.1 they had &quot;locked&quot; the heap size in the netbeans.config file so I went there.\r\n\r\nFirst I tried this:\r\n\r\n    netbeans_default_options=&quot;-J-client -J-Xss2m -J-Xms32m -J-Xmx4906m -J-XX:PermSize=32m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true -J-Dsun.zip.disableMemoryMapping=true&quot;\r\n\r\nThat gives me a Failed to create JVM popup at Netbeans splash screen.\r\n\r\nThen I tried this:\r\n\r\n    netbeans_default_options=&quot;-J-client -J-Xss2m -J-Xms32m -J-XX:PermSize=32m -J-XX:MaxPermSize=4096m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true -J-Dsun.zip.disableMemoryMapping=true&quot;\r\n\r\nNetbeans seems to like that better as the load bar will go all the way to &quot;Done loading modules.&quot; but then it just hangs on the splash screen. I let it hang there for 5 mins before killing it.\r\n\r\nThis isn&#39;t a show stopper for me since I can still run it fine under 7.0.1 but was wondering if anyone had a solution to this. Seems like it should be an easy fix but I&#39;m just overlooking something?\r\n\r\nThanks for your time.","title":"Difference in JVM heap size allocation between Netbeans 7.0.1 and 7.1?","body":"<p>I have a java program that I developed using Netbeans 7.0.1 to parse and save large CSV files. Because of the size of the CSV files I needed to increase the heap size of the JVM. In 7.0.1 I set the heap size to use 4GB of my 8GB on my system using the -Xmx4096m specification under Project ->Properties -> VM Options in Netbeans. It worked fine in 7.0.1.</p>\n\n<p>Now I'm trying to run it in Netbeans 7.1 and I'm getting the following for output from Netbeans </p>\n\n<pre><code>Could not create the Java virtual machine.\nInvalid maximum heap size: -Xmx4096m\nThe specified size exceeds the maximum representable size.\nJava Result: 1\n</code></pre>\n\n<p>I've changed nothing from default in Netbeans when I get this error.</p>\n\n<p>I figured that maybe in 7.1 they had \"locked\" the heap size in the netbeans.config file so I went there.</p>\n\n<p>First I tried this:</p>\n\n<pre><code>netbeans_default_options=\"-J-client -J-Xss2m -J-Xms32m -J-Xmx4906m -J-XX:PermSize=32m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true -J-Dsun.zip.disableMemoryMapping=true\"\n</code></pre>\n\n<p>That gives me a Failed to create JVM popup at Netbeans splash screen.</p>\n\n<p>Then I tried this:</p>\n\n<pre><code>netbeans_default_options=\"-J-client -J-Xss2m -J-Xms32m -J-XX:PermSize=32m -J-XX:MaxPermSize=4096m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true -J-Dsun.zip.disableMemoryMapping=true\"\n</code></pre>\n\n<p>Netbeans seems to like that better as the load bar will go all the way to \"Done loading modules.\" but then it just hangs on the splash screen. I let it hang there for 5 mins before killing it.</p>\n\n<p>This isn't a show stopper for me since I can still run it fine under 7.0.1 but was wondering if anyone had a solution to this. Seems like it should be an easy fix but I'm just overlooking something?</p>\n\n<p>Thanks for your time.</p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":324610,"reputation":18889,"user_id":645270,"accept_rate":100,"display_name":"keyser"},"score":0,"creation_date":1337099811,"post_id":10605133,"comment_id":13739162,"body_markdown":"Well why would you set a lower limit on anything? Because your program might require a certain amount. Am I misunderstanding the question? Do you mean that setting min is actually required?","body":"Well why would you set a lower limit on anything? Because your program might require a certain amount. Am I misunderstanding the question? Do you mean that setting min is actually required?"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":2,"creation_date":1337099940,"post_id":10605133,"comment_id":13739213,"body_markdown":"possible duplicate of [What&#39;s the reason to set a minimal Java Heap Size?](http://stackoverflow.com/questions/8085949/whats-the-reason-to-set-a-minimal-java-heap-size)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/8085949/whats-the-reason-to-set-a-minimal-java-heap-size\">What&#39;s the reason to set a minimal Java Heap Size?</a>"}],"answers":[{"tags":[],"owner":{"account_id":21731,"reputation":9045,"user_id":53069,"accept_rate":77,"display_name":"sproketboy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1337099927,"creation_date":1337099927,"answer_id":10605192,"question_id":10605133,"body_markdown":"Setting a minimum heap size allows Java to allocate some memory up front which improves startup time. ","title":"Do I really need to define java minimum heap size","body":"<p>Setting a minimum heap size allows Java to allocate some memory up front which improves startup time. </p>\n"},{"tags":[],"owner":{"display_name":"user177800"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1337099942,"creation_date":1337099942,"answer_id":10605199,"question_id":10605133,"body_markdown":"Setting the minimum size explicitly ( above the default ) helps with allocation fragmentation at the OS level and start up time performance.\r\n\r\nThe Java Heap is backed by memory allocated by the OS, the bigger the initial block the less re-allocation and fragmentation that will occur.\r\n\r\nSetting the minimum equal to or almost equal to the maximum, will eliminate these situations completely.","title":"Do I really need to define java minimum heap size","body":"<p>Setting the minimum size explicitly ( above the default ) helps with allocation fragmentation at the OS level and start up time performance.</p>\n\n<p>The Java Heap is backed by memory allocated by the OS, the bigger the initial block the less re-allocation and fragmentation that will occur.</p>\n\n<p>Setting the minimum equal to or almost equal to the maximum, will eliminate these situations completely.</p>\n"},{"tags":[],"owner":{"account_id":198346,"reputation":20665,"user_id":442945,"accept_rate":77,"display_name":"Nathaniel Ford"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1337100153,"creation_date":1337100153,"answer_id":10605249,"question_id":10605133,"body_markdown":"The heap in Java is the general memory allocation area. Let us suppose that we set the minimum heap size to 1000 bytes (this is an absurdly low number). Now lets say that I instantiate an object in my program that contains some text that is two thousand characters long. I cannot save this object without first expanding my heap size. Now, presumably my maximum heap parameter is large enough to allow this - but that is the reason to set the maximum heap size.\r\n\r\nHowever, suppose my server has 4G of ram, and I set the minimum heap size to that. (An absurdly large number.) If no other programs took up any memory, this would work. However, if I started a second process with my java program, it would not be able to allocate sufficient memory and quit. \r\n\r\nThe minimum size does two things for you; first, it makes memory available quickly to allow rapid startup. Secondly, it lets you tune your jvm so that you have some invariants, allowing you to make predictions about how many processes you can run. If your minimum heap size is too large, you&#39;re probably wasting memory on a process that never needs that much, limiting the capacity of your system. If you set it too small, programs will take a long time to start up, adversely affecting the process&#39;s performance.","title":"Do I really need to define java minimum heap size","body":"<p>The heap in Java is the general memory allocation area. Let us suppose that we set the minimum heap size to 1000 bytes (this is an absurdly low number). Now lets say that I instantiate an object in my program that contains some text that is two thousand characters long. I cannot save this object without first expanding my heap size. Now, presumably my maximum heap parameter is large enough to allow this - but that is the reason to set the maximum heap size.</p>\n\n<p>However, suppose my server has 4G of ram, and I set the minimum heap size to that. (An absurdly large number.) If no other programs took up any memory, this would work. However, if I started a second process with my java program, it would not be able to allocate sufficient memory and quit. </p>\n\n<p>The minimum size does two things for you; first, it makes memory available quickly to allow rapid startup. Secondly, it lets you tune your jvm so that you have some invariants, allowing you to make predictions about how many processes you can run. If your minimum heap size is too large, you're probably wasting memory on a process that never needs that much, limiting the capacity of your system. If you set it too small, programs will take a long time to start up, adversely affecting the process's performance.</p>\n"}],"owner":{"account_id":552332,"reputation":1288,"user_id":917432,"accept_rate":59,"display_name":"Martin Asenov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2981,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":10605249,"answer_count":3,"score":6,"last_activity_date":1636378021,"creation_date":1337099678,"question_id":10605133,"body_markdown":"I&#39;m about to deploy an application to a live server and right now I am at the part where I have to set heap and permgen sizes for the jvm. I have seen a lot of articles and all of them say to &quot;set the minimum heap size to (some number)&quot;, and to &quot;set the maximum heap size to (some number)&quot;, but none of these articles really says why the minimum heap size needs to be set. I understand the reason to set the maximum heap size, but not about the minimum. I would be thankful if you shed some light on this.","title":"Do I really need to define java minimum heap size","body":"<p>I'm about to deploy an application to a live server and right now I am at the part where I have to set heap and permgen sizes for the jvm. I have seen a lot of articles and all of them say to \"set the minimum heap size to (some number)\", and to \"set the maximum heap size to (some number)\", but none of these articles really says why the minimum heap size needs to be set. I understand the reason to set the maximum heap size, but not about the minimum. I would be thankful if you shed some light on this.</p>\n"},{"tags":["java","spring","spring-boot","api","spring-mvc"],"comments":[{"owner":{"account_id":4009180,"reputation":4758,"user_id":3303074,"display_name":"Prasanth Rajendran"},"score":0,"creation_date":1616254789,"post_id":66719448,"comment_id":117947056,"body_markdown":"you have to autowire the  private BankCitiBankDAO bankCitiBankDAO, which will solve the issue","body":"you have to autowire the  private BankCitiBankDAO bankCitiBankDAO, which will solve the issue"}],"answers":[{"tags":[],"owner":{"account_id":63505,"reputation":2187,"user_id":187950,"accept_rate":83,"display_name":"domi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1616252962,"creation_date":1616252962,"answer_id":66723132,"question_id":66719448,"body_markdown":"You need to add `@Autowired` to `bankCitiBankDAO` too:\r\n\r\n```\r\n    @Autowired\r\n    private BankOCBCDAO bankOCBCDAO;\r\n    @Autowired\r\n    private BankCitiBankDAO bankCitiBankDAO;\r\n```\r\n\r\nBut as field injection is not the best thing todo (https://www.vojtechruzicka.com/field-dependency-injection-considered-harmful/), you should go with constructor injection:\r\n\r\n```\r\n@Service\r\npublic class PaymentServiceImpl implements PaymentService{\r\n\r\n    private BankOCBCDAO bankOCBCDAO;\r\n    private BankCitiBankDAO bankCitiBankDAO;\r\n\r\n    public PaymentServiceImpl(BankOCBCDAO bankOCBCDAO, BankCitiBankDAO bankCitiBankDAO){\r\n       this.bankOCBCDAO = bankOCBCDAO;\r\n       this.bankCitiBankDAO = bankCitiBankDAO;\r\n    }\r\n...\r\n}\r\n```\r\n\r\n","title":"Servlet.service() for servlet [dispatcherServlet] in context with path","body":"<p>You need to add <code>@Autowired</code> to <code>bankCitiBankDAO</code> too:</p>\n<pre><code>    @Autowired\n    private BankOCBCDAO bankOCBCDAO;\n    @Autowired\n    private BankCitiBankDAO bankCitiBankDAO;\n</code></pre>\n<p>But as field injection is not the best thing todo (<a href=\"https://www.vojtechruzicka.com/field-dependency-injection-considered-harmful/\" rel=\"nofollow noreferrer\">https://www.vojtechruzicka.com/field-dependency-injection-considered-harmful/</a>), you should go with constructor injection:</p>\n<pre><code>@Service\npublic class PaymentServiceImpl implements PaymentService{\n\n    private BankOCBCDAO bankOCBCDAO;\n    private BankCitiBankDAO bankCitiBankDAO;\n\n    public PaymentServiceImpl(BankOCBCDAO bankOCBCDAO, BankCitiBankDAO bankCitiBankDAO){\n       this.bankOCBCDAO = bankOCBCDAO;\n       this.bankCitiBankDAO = bankCitiBankDAO;\n    }\n...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10887582,"reputation":71,"user_id":8004575,"display_name":"Akshay K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636378011,"creation_date":1636378011,"answer_id":69884251,"question_id":66719448,"body_markdown":"Please add the Proper Annotations in Model Class\r\nthat will clear the issues.\r\n\r\nReference\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name=&quot;bank_id&quot;)\r\n\tprivate int bankId;","title":"Servlet.service() for servlet [dispatcherServlet] in context with path","body":"<p>Please add the Proper Annotations in Model Class\nthat will clear the issues.</p>\n<p>Reference</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name=&quot;bank_id&quot;)\nprivate int bankId;\n</code></pre>\n"}],"owner":{"account_id":21009124,"reputation":63,"user_id":15438141,"display_name":"ONG QIAN LING _"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73253,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":66723132,"answer_count":2,"score":5,"last_activity_date":1636378011,"creation_date":1616227523,"question_id":66719448,"body_markdown":"I am getting below error while creating spring maven rest webservice. It works fine when i use postman to test post request on the api for ocbc. But when i tried to do post request for citi, i got the following error: Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause. And in my postman it shows error: &quot;Internal Server Error&quot;, Status :&quot;500&quot;\r\n\r\nError:\r\n```\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\r\n\r\njava.lang.NullPointerException: null\r\n        at com.example.service.impl.PaymentServiceImpl.addCitiPayment(PaymentServiceImpl.java:22) ~[classes/:na]\r\n        at com.example.controller.PaymentController.addCitiPayment(PaymentController.java:25) ~[classes/:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.4.jar:5.3.4]    \r\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:652) ~[tomcat-embed-core-9.0.43.jar:4.0.FR]\r\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.43.jar:4.0.FR]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.4.jar:5.3.4]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n        at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n```\r\nHere is my code:\r\n\r\n**BankOCBCDAO**\r\n```\r\npackage com.example.repository;\r\n\r\nimport com.example.model.BankOCBC;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface BankOCBCDAO extends JpaRepository&lt;BankOCBC, Integer&gt;{\r\n\r\n}\r\n```\r\n\r\n**BankCitiBankDAO**\r\n```\r\npackage com.example.repository;\r\n\r\nimport com.example.model.BankCitiBank;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface BankCitiBankDAO extends JpaRepository&lt;BankCitiBank, Integer&gt;{\r\n\r\n}\r\n```\r\n\r\n**PaymentController**\r\n```\r\npackage com.example.controller;\r\n\r\nimport com.example.model.BankCitiBank;\r\nimport com.example.model.BankOCBC;\r\nimport com.example.service.PaymentService;\r\nimport com.example.dto.ApiResponse;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n\r\n@RestController\r\n@RequestMapping(path=&quot;/payment&quot;)\r\npublic class PaymentController {\r\n    \r\n    @Autowired\r\n    private PaymentService paymentService;\r\n\r\n    \r\n    @PostMapping(&quot;/citi&quot;)\r\n    public ApiResponse addCitiPayment(@RequestBody BankCitiBank bankCitiBank) {\r\n        return paymentService.addCitiPayment(bankCitiBank);\r\n    }\r\n\r\n    @PostMapping(&quot;/ocbc&quot;)\r\n    public ApiResponse addOCBCPayment(@RequestBody BankOCBC bankOCBC) {\r\n        return paymentService.addOCBCPayment(bankOCBC);\r\n    }\r\n}\r\n```\r\n\r\n**PaymentService**\r\n```\r\npackage com.example.service;\r\n\r\nimport com.example.model.BankCitiBank;\r\nimport com.example.model.BankOCBC;\r\nimport com.example.dto.ApiResponse;\r\n\r\npublic interface PaymentService {\r\n    ApiResponse addCitiPayment(BankCitiBank bankCitiBank);\r\n    ApiResponse addOCBCPayment(BankOCBC bankOCBC);\r\n}\r\n```\r\n\r\n**PaymentServiceImpl**\r\n```\r\npackage com.example.service.impl;\r\n\r\nimport com.example.dto.ApiResponse;\r\nimport com.example.model.BankCitiBank;\r\nimport com.example.model.BankOCBC;\r\nimport com.example.service.PaymentService;\r\nimport com.example.repository.BankCitiBankDAO;\r\nimport com.example.repository.BankOCBCDAO;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\n\r\n@Service\r\npublic class PaymentServiceImpl implements PaymentService{\r\n    @Autowired\r\n    private BankOCBCDAO bankOCBCDAO;\r\n    private BankCitiBankDAO bankCitiBankDAO;\r\n    \r\n    @Override\r\n    public ApiResponse addCitiPayment(BankCitiBank bankCitiBank) {\r\n        bankCitiBankDAO.save(bankCitiBank);\r\n        return new ApiResponse(200, &quot;CitiBank Payment Successful&quot;, null); \r\n    }\r\n\r\n    @Override\r\n    public ApiResponse addOCBCPayment(BankOCBC bankOCBC) {\r\n        bankOCBCDAO.save(bankOCBC);\r\n        return new ApiResponse(200, &quot;OCBC Payment Successful&quot;, null); \r\n        \r\n    }\r\n    \r\n}\r\n```\r\nPlease advise what is wrong in my code. Thanks in advance.\r\n\r\nAlso can i ask if there any recommendation ways to encrypt the data value obtained from api before added into the database.","title":"Servlet.service() for servlet [dispatcherServlet] in context with path","body":"<p>I am getting below error while creating spring maven rest webservice. It works fine when i use postman to test post request on the api for ocbc. But when i tried to do post request for citi, i got the following error: Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause. And in my postman it shows error: &quot;Internal Server Error&quot;, Status :&quot;500&quot;</p>\n<p>Error:</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\n\njava.lang.NullPointerException: null\n        at com.example.service.impl.PaymentServiceImpl.addCitiPayment(PaymentServiceImpl.java:22) ~[classes/:na]\n        at com.example.controller.PaymentController.addCitiPayment(PaymentController.java:25) ~[classes/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.4.jar:5.3.4]\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.4.jar:5.3.4]\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.4.jar:5.3.4]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894) ~[spring-webmvc-5.3.4.jar:5.3.4]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.4.jar:5.3.4]\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.4.jar:5.3.4]    \n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060) ~[spring-webmvc-5.3.4.jar:5.3.4]\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962) ~[spring-webmvc-5.3.4.jar:5.3.4]\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.4.jar:5.3.4]\n        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.4.jar:5.3.4]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:652) ~[tomcat-embed-core-9.0.43.jar:4.0.FR]\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.4.jar:5.3.4]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.43.jar:4.0.FR]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.43.jar:9.0.43]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.4.jar:5.3.4]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.4.jar:5.3.4]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.4.jar:5.3.4]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n        at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n</code></pre>\n<p>Here is my code:</p>\n<p><strong>BankOCBCDAO</strong></p>\n<pre><code>package com.example.repository;\n\nimport com.example.model.BankOCBC;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface BankOCBCDAO extends JpaRepository&lt;BankOCBC, Integer&gt;{\n\n}\n</code></pre>\n<p><strong>BankCitiBankDAO</strong></p>\n<pre><code>package com.example.repository;\n\nimport com.example.model.BankCitiBank;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface BankCitiBankDAO extends JpaRepository&lt;BankCitiBank, Integer&gt;{\n\n}\n</code></pre>\n<p><strong>PaymentController</strong></p>\n<pre><code>package com.example.controller;\n\nimport com.example.model.BankCitiBank;\nimport com.example.model.BankOCBC;\nimport com.example.service.PaymentService;\nimport com.example.dto.ApiResponse;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n\n@RestController\n@RequestMapping(path=&quot;/payment&quot;)\npublic class PaymentController {\n    \n    @Autowired\n    private PaymentService paymentService;\n\n    \n    @PostMapping(&quot;/citi&quot;)\n    public ApiResponse addCitiPayment(@RequestBody BankCitiBank bankCitiBank) {\n        return paymentService.addCitiPayment(bankCitiBank);\n    }\n\n    @PostMapping(&quot;/ocbc&quot;)\n    public ApiResponse addOCBCPayment(@RequestBody BankOCBC bankOCBC) {\n        return paymentService.addOCBCPayment(bankOCBC);\n    }\n}\n</code></pre>\n<p><strong>PaymentService</strong></p>\n<pre><code>package com.example.service;\n\nimport com.example.model.BankCitiBank;\nimport com.example.model.BankOCBC;\nimport com.example.dto.ApiResponse;\n\npublic interface PaymentService {\n    ApiResponse addCitiPayment(BankCitiBank bankCitiBank);\n    ApiResponse addOCBCPayment(BankOCBC bankOCBC);\n}\n</code></pre>\n<p><strong>PaymentServiceImpl</strong></p>\n<pre><code>package com.example.service.impl;\n\nimport com.example.dto.ApiResponse;\nimport com.example.model.BankCitiBank;\nimport com.example.model.BankOCBC;\nimport com.example.service.PaymentService;\nimport com.example.repository.BankCitiBankDAO;\nimport com.example.repository.BankOCBCDAO;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n\n@Service\npublic class PaymentServiceImpl implements PaymentService{\n    @Autowired\n    private BankOCBCDAO bankOCBCDAO;\n    private BankCitiBankDAO bankCitiBankDAO;\n    \n    @Override\n    public ApiResponse addCitiPayment(BankCitiBank bankCitiBank) {\n        bankCitiBankDAO.save(bankCitiBank);\n        return new ApiResponse(200, &quot;CitiBank Payment Successful&quot;, null); \n    }\n\n    @Override\n    public ApiResponse addOCBCPayment(BankOCBC bankOCBC) {\n        bankOCBCDAO.save(bankOCBC);\n        return new ApiResponse(200, &quot;OCBC Payment Successful&quot;, null); \n        \n    }\n    \n}\n</code></pre>\n<p>Please advise what is wrong in my code. Thanks in advance.</p>\n<p>Also can i ask if there any recommendation ways to encrypt the data value obtained from api before added into the database.</p>\n"},{"tags":["java","exception","jvm","heap-memory"],"comments":[{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":1,"creation_date":1342325096,"post_id":11488161,"comment_id":15174774,"body_markdown":"Not sure what OS you&#39;re running, but on Windows XP I was only able to allocate 1200-1400 MB. See http://stackoverflow.com/questions/171205","body":"Not sure what OS you&#39;re running, but on Windows XP I was only able to allocate 1200-1400 MB. See <a href=\"http://stackoverflow.com/questions/171205\">stackoverflow.com/questions/171205</a>"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1342335769,"post_id":11488161,"comment_id":15175992,"body_markdown":"On a 64-bit JVM you can make the heap size anything, but a practical limit is usually of the order of 100 GB (as the length of the full GC is proportional heap sixe)","body":"On a 64-bit JVM you can make the heap size anything, but a practical limit is usually of the order of 100 GB (as the length of the full GC is proportional heap sixe)"},{"owner":{"account_id":1166890,"reputation":175,"user_id":1144939,"accept_rate":50,"display_name":"bigbass1997"},"score":0,"creation_date":1342398579,"post_id":11488161,"comment_id":15187753,"body_markdown":"I am using a Windows 7 32bit OS with a total of 4GB of DDR3 RAM.","body":"I am using a Windows 7 32bit OS with a total of 4GB of DDR3 RAM."}],"answers":[{"tags":[],"owner":{"account_id":43373,"reputation":224943,"user_id":126769,"accept_rate":94,"display_name":"nos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1342308855,"creation_date":1342308855,"answer_id":11488204,"question_id":11488161,"body_markdown":"You&#39;re on Windows, and the max address space a single 32 bit program can have is 2GB.\r\nNow since the process and system needs some of that for housekeeping stuff (e.g. .dlls) , you can&#39;t use all those 2GB for the java heap. So try with less, e.g. 1.5 GB.\r\n\r\nYou can make 32 bit programs get 3GB of address space through a boot switch, see [here][1] , which can be an alternative to switching to a 64 bit OS if you really need more heap space.\r\n\r\n\r\n  [1]: http://support.microsoft.com/kb/291988","title":"Why I am getting a JVM max heap space error?","body":"<p>You're on Windows, and the max address space a single 32 bit program can have is 2GB.\nNow since the process and system needs some of that for housekeeping stuff (e.g. .dlls) , you can't use all those 2GB for the java heap. So try with less, e.g. 1.5 GB.</p>\n\n<p>You can make 32 bit programs get 3GB of address space through a boot switch, see <a href=\"http://support.microsoft.com/kb/291988\" rel=\"nofollow\">here</a> , which can be an alternative to switching to a 64 bit OS if you really need more heap space.</p>\n"},{"tags":[],"owner":{"account_id":483355,"reputation":889,"user_id":898346,"accept_rate":50,"display_name":"pyrometer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1342308966,"creation_date":1342308966,"answer_id":11488213,"question_id":11488161,"body_markdown":"You are getting the &quot;could not reserve enough space&quot; error because there must be no contiguous block of memory available in your RAM of size 2048M. I would suggest that you either reduce the -Xms to 512M since I don&#39;t think initially you will require 2048M heap space. If this doesnt work, then you will need to reduce the -Xmx value.","title":"Why I am getting a JVM max heap space error?","body":"<p>You are getting the \"could not reserve enough space\" error because there must be no contiguous block of memory available in your RAM of size 2048M. I would suggest that you either reduce the -Xms to 512M since I don't think initially you will require 2048M heap space. If this doesnt work, then you will need to reduce the -Xmx value.</p>\n"}],"owner":{"account_id":1166890,"reputation":175,"user_id":1144939,"accept_rate":50,"display_name":"bigbass1997"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":698,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1636378007,"creation_date":1342308248,"question_id":11488161,"body_markdown":"I am trying to run a certain java program with more than 1024M heap space. Even though I have 4GB of RAM and a 32bit OS, its saying that the max is 1024M. Below is the batch code I am trying to use to start the program:\r\n\r\n    @echo off\r\n    java -Xmx2048M -Xms2048M -jar program.jar\r\n\r\nCould someone explain why I am getting a JVM &quot;could not reserve enough space&quot; error?","title":"Why I am getting a JVM max heap space error?","body":"<p>I am trying to run a certain java program with more than 1024M heap space. Even though I have 4GB of RAM and a 32bit OS, its saying that the max is 1024M. Below is the batch code I am trying to use to start the program:</p>\n\n<pre><code>@echo off\njava -Xmx2048M -Xms2048M -jar program.jar\n</code></pre>\n\n<p>Could someone explain why I am getting a JVM \"could not reserve enough space\" error?</p>\n"},{"tags":["java","coldfusion","jvm","heap-memory","jrockit"],"comments":[{"owner":{"account_id":1203684,"reputation":7193,"user_id":1173850,"display_name":"Mark A Kruger"},"score":0,"creation_date":1344100750,"post_id":11800271,"comment_id":15696162,"body_markdown":"What commands were you using to open your console? what was the syntax?","body":"What commands were you using to open your console? what was the syntax?"},{"owner":{"account_id":1203684,"reputation":7193,"user_id":1173850,"display_name":"Mark A Kruger"},"score":0,"creation_date":1344100990,"post_id":11800271,"comment_id":15696213,"body_markdown":"I suspect that Jrocket is preempting your java args and  you are running as on different settings. The error your are getting indicates that your hardware is resource constrained. It needs 1gb of *contiguous* physical memory to operate. I see this error on VM&#39;s pretty often.","body":"I suspect that Jrocket is preempting your java args and  you are running as on different settings. The error your are getting indicates that your hardware is resource constrained. It needs 1gb of <i>contiguous</i> physical memory to operate. I see this error on VM&#39;s pretty often."},{"owner":{"account_id":1718052,"reputation":254,"user_id":1574718,"accept_rate":43,"display_name":"billvsd"},"score":0,"creation_date":1344161182,"post_id":11800271,"comment_id":15704813,"body_markdown":"After further investigation, it appears that our server&#39;s memory usage and performance boost is when we are running the memory leak tool inside of JRockit.  We are using Oracle JRockit Mission Control from the user interface, we right click on the JVM for the CF Instance that is running and then click Start Memleak.  While doing the memleak test, our memory usage drops to ~48mb.  [The moment we close the memleak](http://www.diigo.com/item/image/2u621/5k27).\n[After starting Memleak](http://www.diigo.com/item/image/2u621/nwbx)","body":"After further investigation, it appears that our server&#39;s memory usage and performance boost is when we are running the memory leak tool inside of JRockit.  We are using Oracle JRockit Mission Control from the user interface, we right click on the JVM for the CF Instance that is running and then click Start Memleak.  While doing the memleak test, our memory usage drops to ~48mb.  <a href=\"http://www.diigo.com/item/image/2u621/5k27\" rel=\"nofollow noreferrer\">The moment we close the memleak</a>. <a href=\"http://www.diigo.com/item/image/2u621/nwbx\" rel=\"nofollow noreferrer\">After starting Memleak</a>"},{"owner":{"account_id":1718052,"reputation":254,"user_id":1574718,"accept_rate":43,"display_name":"billvsd"},"score":0,"creation_date":1344161386,"post_id":11800271,"comment_id":15704834,"body_markdown":"This is a physical server with 8GB of ram.  Unfortunately, our hosting provider only licenses us the CF 8 Enterprise 32 bit version. That error was only one of other errors we had, such as out of memory when the server was under higher load.","body":"This is a physical server with 8GB of ram.  Unfortunately, our hosting provider only licenses us the CF 8 Enterprise 32 bit version. That error was only one of other errors we had, such as out of memory when the server was under higher load."},{"owner":{"account_id":1718052,"reputation":254,"user_id":1574718,"accept_rate":43,"display_name":"billvsd"},"score":0,"creation_date":1344164265,"post_id":11800271,"comment_id":15705242,"body_markdown":"While running JRockit and the Memleak test, we noticed that loading pages on our server would cause visible jumps in the memory usage, but GC would occur not long after.  We have now turned off the JRockit JRE and are back to JRE6.0_24 (32 bit version).","body":"While running JRockit and the Memleak test, we noticed that loading pages on our server would cause visible jumps in the memory usage, but GC would occur not long after.  We have now turned off the JRockit JRE and are back to JRE6.0_24 (32 bit version)."},{"owner":{"account_id":1718052,"reputation":254,"user_id":1574718,"accept_rate":43,"display_name":"billvsd"},"score":0,"creation_date":1344164337,"post_id":11800271,"comment_id":15705259,"body_markdown":"The -XX:+UseParallelGC did not seem to be doing GC.  We added in -XX:+UseConcMarkSweepGC and it appears to be running GC every 15 seconds or so by looking at the heap graphs.  I&#39;m not sure why the memory usage while running a memleak test would be 48mb, back to CF with -XX:+UseConcMarkSweepGC levels off at about 400MB.","body":"The -XX:+UseParallelGC did not seem to be doing GC.  We added in -XX:+UseConcMarkSweepGC and it appears to be running GC every 15 seconds or so by looking at the heap graphs.  I&#39;m not sure why the memory usage while running a memleak test would be 48mb, back to CF with -XX:+UseConcMarkSweepGC levels off at about 400MB."},{"owner":{"account_id":1203684,"reputation":7193,"user_id":1173850,"display_name":"Mark A Kruger"},"score":0,"creation_date":1344261717,"post_id":11800271,"comment_id":15727864,"body_markdown":"Your experience with the memleak is backwards (ha). Memleak testing is suppose to make your memory climb right?  Wierd! As for 32 bit - CF 8 enterprise will run on 64bit. A different host might be in order (talk to me!).","body":"Your experience with the memleak is backwards (ha). Memleak testing is suppose to make your memory climb right?  Wierd! As for 32 bit - CF 8 enterprise will run on 64bit. A different host might be in order (talk to me!)."},{"owner":{"account_id":1203684,"reputation":7193,"user_id":1173850,"display_name":"Mark A Kruger"},"score":0,"creation_date":1344261875,"post_id":11800271,"comment_id":15727957,"body_markdown":"I like that low pause connector as well in many cases.  But one piece of advice I have is that (unless you are crashing - which you were) don&#39;t be too too concerned about how much memory is actually being used. The JVM grabs memory and releases it in a way that can seem random and disconnected from your app or  traffic or whatever. But obviously if you are crashing that&#39;s a different story. Here&#39;s a link you might find useful on that topic http://www.coldfusionmuse.com/index.cfm/2012/4/27/knowning-a-normal-jvm-heap - sorry if you know all that already - you seem pretty sharp to me :)","body":"I like that low pause connector as well in many cases.  But one piece of advice I have is that (unless you are crashing - which you were) don&#39;t be too too concerned about how much memory is actually being used. The JVM grabs memory and releases it in a way that can seem random and disconnected from your app or  traffic or whatever. But obviously if you are crashing that&#39;s a different story. Here&#39;s a link you might find useful on that topic <a href=\"http://www.coldfusionmuse.com/index.cfm/2012/4/27/knowning-a-normal-jvm-heap\" rel=\"nofollow noreferrer\">coldfusionmuse.com/index.cfm/2012/4/27/&hellip;</a> - sorry if you know all that already - you seem pretty sharp to me :)"}],"answers":[{"tags":[],"owner":{"account_id":1718052,"reputation":254,"user_id":1574718,"accept_rate":43,"display_name":"billvsd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1346886120,"creation_date":1346886120,"answer_id":12290929,"question_id":11800271,"body_markdown":"I thought that I would post an update to a resolution that ended up working for us.  I am not sure exactly why the GC seemed to be running much better while using JRockit (specifically during the memory leak test), but we have found a setting for the JVM machine that seems to have enabled us to control the frequency the GC is called.  \r\n\r\n    -Dsun.rmi.dgc.client.gcInterval=27000 -Dsun.rmi.dgc.server.gcInterval=27000\r\n\r\nThese two settings allow us to specifically call the GC as frequently or as infrequently as we want, and we needed to change it from the default setting.  We also did update our entire java.args line based on a few great blog articles (linked at the bottom).  Here is our updated java.args that has our server running like it should.\r\n\r\n    java.args= -server -DJINTEGRA_NATIVE_MODE -DJINTEGRA_PREFETCH_ENUMS -Xmx1024m -Xms1024m -XX:MaxPermSize=192m -XX:PermSize=192m  -XX:+UseParallelGC -Dsun.rmi.dgc.client.gcInterval=27000 -Dsun.rmi.dgc.server.gcInterval=27000 -Dcoldfusion.rootDir={application.home}/ -Djava.compiler=NONE -Xnoagent -Xdebug \r\n\r\nBlog articles:\r\n\r\n[Trunkful.com CF_GEMS How to Tune the JVM Part 1][1]\r\n\r\n[Trunkful.com CF_GEMS How to Tune the JVM Part 2][2]\r\n\r\n\r\n  [1]: http://www.trunkful.com/index.cfm/2008/5/19/How-to-Tune-the-JVM-Part-1\r\n  [2]: http://www.trunkful.com/index.cfm/2008/11/25/How-to-Tune-the-JVM-Part-2","title":"The ColdFusion Java Heap works perfect when JRockit Console window is open, but memory use skyrockets then crashes when JRockit Console is closed","body":"<p>I thought that I would post an update to a resolution that ended up working for us.  I am not sure exactly why the GC seemed to be running much better while using JRockit (specifically during the memory leak test), but we have found a setting for the JVM machine that seems to have enabled us to control the frequency the GC is called.  </p>\n\n<pre><code>-Dsun.rmi.dgc.client.gcInterval=27000 -Dsun.rmi.dgc.server.gcInterval=27000\n</code></pre>\n\n<p>These two settings allow us to specifically call the GC as frequently or as infrequently as we want, and we needed to change it from the default setting.  We also did update our entire java.args line based on a few great blog articles (linked at the bottom).  Here is our updated java.args that has our server running like it should.</p>\n\n<pre><code>java.args= -server -DJINTEGRA_NATIVE_MODE -DJINTEGRA_PREFETCH_ENUMS -Xmx1024m -Xms1024m -XX:MaxPermSize=192m -XX:PermSize=192m  -XX:+UseParallelGC -Dsun.rmi.dgc.client.gcInterval=27000 -Dsun.rmi.dgc.server.gcInterval=27000 -Dcoldfusion.rootDir={application.home}/ -Djava.compiler=NONE -Xnoagent -Xdebug \n</code></pre>\n\n<p>Blog articles:</p>\n\n<p><a href=\"http://www.trunkful.com/index.cfm/2008/5/19/How-to-Tune-the-JVM-Part-1\" rel=\"nofollow\">Trunkful.com CF_GEMS How to Tune the JVM Part 1</a></p>\n\n<p><a href=\"http://www.trunkful.com/index.cfm/2008/11/25/How-to-Tune-the-JVM-Part-2\" rel=\"nofollow\">Trunkful.com CF_GEMS How to Tune the JVM Part 2</a></p>\n"}],"owner":{"account_id":1718052,"reputation":254,"user_id":1574718,"accept_rate":43,"display_name":"billvsd"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":769,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":12290929,"answer_count":1,"score":1,"last_activity_date":1636377986,"creation_date":1344013929,"question_id":11800271,"body_markdown":"We have been having issues with our ColdFusion server and getting the JRE configured properly.  In order to troubleshoot what was going on with this, we installed Oracle JRockit and switched over the jvm.config to try and find any memory leaks.\r\n\r\nOnce we installed JRockit our server was running better than ever.  We kept the JRockit Program and Console open for several days and our memory usage stayed under 200mb.  We finally closed the program on the server and immediately the memory usage problem returned.\r\n\r\nHere is a screen shot of the Java Heap from FusionReactor to illustrate what is going on.  \r\n\r\nI could not post this directly here since I do not have enough reputation points yet:\r\nhttp://www.weblisters.com/icm/FusionReactorJavaHeap-JRockit-Console.png\r\n\r\nHere are the main settings from our jvm.config file:\r\n\r\n    java.home=C:/Progra~2/Java/jrockit-jdk1.6.0_33-R28.2.4-4.1.0/jre  \r\n \r\n    java.args=-server -Xms1024m -Xmx1024m  -Xgc:parallel -Dsun.io.useCanonCaches=false -Dcoldfusion.rootDir={application.home}/ -XX:+HeapDumpOnOutOfMemoryError -Xmanagement:ssl=false,authenticate=false,autodiscovery=true\r\n\r\nThis error was thrown right after we closed the Jrockit console:\r\n    Error: Not enough storage is available to process this command in tsStartJavaThread (src/jvm/threads/vmthread/lifecycle.c:1096).\r\n\r\n    Attempting to allocate 1G bytes There is insufficient native memory for the Java Runtime Environment to continue.\r\n\r\nDoes anyone know why garbage collection (GC) appears to work so much better with the JRockit Console window open and running?  We can&#39;t leave it open as a permanent solution.","title":"The ColdFusion Java Heap works perfect when JRockit Console window is open, but memory use skyrockets then crashes when JRockit Console is closed","body":"<p>We have been having issues with our ColdFusion server and getting the JRE configured properly.  In order to troubleshoot what was going on with this, we installed Oracle JRockit and switched over the jvm.config to try and find any memory leaks.</p>\n\n<p>Once we installed JRockit our server was running better than ever.  We kept the JRockit Program and Console open for several days and our memory usage stayed under 200mb.  We finally closed the program on the server and immediately the memory usage problem returned.</p>\n\n<p>Here is a screen shot of the Java Heap from FusionReactor to illustrate what is going on.  </p>\n\n<p>I could not post this directly here since I do not have enough reputation points yet:\n<a href=\"http://www.weblisters.com/icm/FusionReactorJavaHeap-JRockit-Console.png\" rel=\"nofollow\">http://www.weblisters.com/icm/FusionReactorJavaHeap-JRockit-Console.png</a></p>\n\n<p>Here are the main settings from our jvm.config file:</p>\n\n<pre><code>java.home=C:/Progra~2/Java/jrockit-jdk1.6.0_33-R28.2.4-4.1.0/jre  \n\njava.args=-server -Xms1024m -Xmx1024m  -Xgc:parallel -Dsun.io.useCanonCaches=false -Dcoldfusion.rootDir={application.home}/ -XX:+HeapDumpOnOutOfMemoryError -Xmanagement:ssl=false,authenticate=false,autodiscovery=true\n</code></pre>\n\n<p>This error was thrown right after we closed the Jrockit console:\n    Error: Not enough storage is available to process this command in tsStartJavaThread (src/jvm/threads/vmthread/lifecycle.c:1096).</p>\n\n<pre><code>Attempting to allocate 1G bytes There is insufficient native memory for the Java Runtime Environment to continue.\n</code></pre>\n\n<p>Does anyone know why garbage collection (GC) appears to work so much better with the JRockit Console window open and running?  We can't leave it open as a permanent solution.</p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":0,"creation_date":1344614378,"post_id":11905220,"comment_id":15848631,"body_markdown":"I suspect max is not set on this node. If not set, JVM determines how much to use. What is java version?","body":"I suspect max is not set on this node. If not set, JVM determines how much to use. What is java version?"},{"owner":{"account_id":2188,"reputation":19759,"user_id":3009,"accept_rate":73,"display_name":"highlycaffeinated"},"score":0,"creation_date":1344615323,"post_id":11905220,"comment_id":15849018,"body_markdown":"I updated the question with the java version and max settings.  ps shows two values for Xmx - it is this way on all the clusters.  The second value seems to be the one being used.","body":"I updated the question with the java version and max settings.  ps shows two values for Xmx - it is this way on all the clusters.  The second value seems to be the one being used."},{"owner":{"account_id":1266100,"reputation":2735,"user_id":1223376,"display_name":"tom"},"score":0,"creation_date":1344617332,"post_id":11905220,"comment_id":15849794,"body_markdown":"Did you try setting Xms to see if it changes anything?","body":"Did you try setting Xms to see if it changes anything?"},{"owner":{"account_id":2188,"reputation":19759,"user_id":3009,"accept_rate":73,"display_name":"highlycaffeinated"},"score":0,"creation_date":1344620182,"post_id":11905220,"comment_id":15850904,"body_markdown":"Haven&#39;t tried Xms but I&#39;ll give it a shot.  Its a production cluster, so I can&#39;t restart very often.","body":"Haven&#39;t tried Xms but I&#39;ll give it a shot.  Its a production cluster, so I can&#39;t restart very often."},{"owner":{"account_id":15754,"reputation":8442,"user_id":33622,"accept_rate":88,"display_name":"fglez"},"score":0,"creation_date":1344862788,"post_id":11905220,"comment_id":15896126,"body_markdown":"`-Xmx1000m -Xmx8G`? Where does `-Xmx1000m`come from? Is the same command line as the others?","body":"<code>-Xmx1000m -Xmx8G</code>? Where does <code>-Xmx1000m</code>come from? Is the same command line as the others?"},{"owner":{"account_id":2188,"reputation":19759,"user_id":3009,"accept_rate":73,"display_name":"highlycaffeinated"},"score":0,"creation_date":1344866730,"post_id":11905220,"comment_id":15898088,"body_markdown":"@antispam The hadoop startup script uses a variable `HADOOP_HEAPSIZE` to set an Xmx value for *all* the hadoop processes on a machine.  On the name node machine, and for the name node process only, I explicitly set Xm8G, in the `HADOOP_NAMENODE_OPTS`.  This causes the startup script to pass both values to the JVM.  From what I see form JMX, the second value is apparently used since the max starts at 8GB.  What I don&#39;t understand is why it fluctuates after that.","body":"@antispam The hadoop startup script uses a variable <code>HADOOP_HEAPSIZE</code> to set an Xmx value for <i>all</i> the hadoop processes on a machine.  On the name node machine, and for the name node process only, I explicitly set Xm8G, in the <code>HADOOP_NAMENODE_OPTS</code>.  This causes the startup script to pass both values to the JVM.  From what I see form JMX, the second value is apparently used since the max starts at 8GB.  What I don&#39;t understand is why it fluctuates after that."},{"owner":{"account_id":258602,"reputation":20902,"user_id":540873,"display_name":"Thomas Jungblut"},"score":0,"creation_date":1345049701,"post_id":11905220,"comment_id":15960665,"body_markdown":"BTW you have 400mb fluctuation, this is totally normal for a namenode.","body":"BTW you have 400mb fluctuation, this is totally normal for a namenode."},{"owner":{"account_id":2188,"reputation":19759,"user_id":3009,"accept_rate":73,"display_name":"highlycaffeinated"},"score":0,"creation_date":1345049855,"post_id":11905220,"comment_id":15960731,"body_markdown":"But if the maximum is a configured value, why would it ever change?  And why doesn&#39;t it change on the name nodes for any of my other clusters?","body":"But if the maximum is a configured value, why would it ever change?  And why doesn&#39;t it change on the name nodes for any of my other clusters?"}],"answers":[{"tags":[],"owner":{"account_id":1346755,"reputation":13871,"user_id":1287342,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1345041367,"creation_date":1345041367,"answer_id":11971302,"question_id":11905220,"body_markdown":"According to the [MemoryMXBean][1] documentation, memory usage is reported in two categories, &quot;Heap&quot; and &quot;Non-Heap&quot; memory. The description of the Non-Heap category says:\r\n\r\n&gt; The Java virtual machine manages memory other than the heap (referred as non-heap memory).\r\nThe Java virtual machine has a method area that is shared among all threads. The method area belongs to non-heap memory. It stores per-class structures such as a runtime constant pool, field and method data, and the code for methods and constructors. It is created at the Java virtual machine start-up.\r\n\r\n&gt; The method area is logically part of the heap but a Java virtual machine implementation may choose not to either garbage collect or compact it. Similar to the heap, the method area may be of a fixed size or may be expanded and shrunk. The memory for the method area does not need to be contiguous.\r\n\r\nThis description sounds a lot like the permanent generation (PermGen), which is indeed part of the heap and counts against the memory allocated using the `-Xmx` flag. I&#39;m not sure why they decided to report this separately since it is part of the heap.\r\n\r\nI suspect that the fluctuations you&#39;re seeing are a result of the JVM shrinking and growing the permanent generation, which would cause the reported max heap space available for non-PermGen uses to change accordingly. If you could get a sum of the Heap and Non-Heap maxes as reported by JMX and this sum stays constant at the 8G limit, that would verify this hypothesis.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/management/MemoryMXBean.html","title":"Why does the JVM Heap Usage Max as reported by JMX change over time?","body":"<p>According to the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/management/MemoryMXBean.html\" rel=\"nofollow\">MemoryMXBean</a> documentation, memory usage is reported in two categories, \"Heap\" and \"Non-Heap\" memory. The description of the Non-Heap category says:</p>\n\n<blockquote>\n  <p>The Java virtual machine manages memory other than the heap (referred as non-heap memory).\n  The Java virtual machine has a method area that is shared among all threads. The method area belongs to non-heap memory. It stores per-class structures such as a runtime constant pool, field and method data, and the code for methods and constructors. It is created at the Java virtual machine start-up.</p>\n  \n  <p>The method area is logically part of the heap but a Java virtual machine implementation may choose not to either garbage collect or compact it. Similar to the heap, the method area may be of a fixed size or may be expanded and shrunk. The memory for the method area does not need to be contiguous.</p>\n</blockquote>\n\n<p>This description sounds a lot like the permanent generation (PermGen), which is indeed part of the heap and counts against the memory allocated using the <code>-Xmx</code> flag. I'm not sure why they decided to report this separately since it is part of the heap.</p>\n\n<p>I suspect that the fluctuations you're seeing are a result of the JVM shrinking and growing the permanent generation, which would cause the reported max heap space available for non-PermGen uses to change accordingly. If you could get a sum of the Heap and Non-Heap maxes as reported by JMX and this sum stays constant at the 8G limit, that would verify this hypothesis.</p>\n"},{"tags":[],"owner":{"account_id":4059774,"reputation":176,"user_id":3336619,"display_name":"croesus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392976764,"creation_date":1392976764,"answer_id":21931017,"question_id":11905220,"body_markdown":"One possibility is that the JVM survivor space is fluctuating in max-size.\r\n\r\nThe JVM max-size reported by JMX via the HeapMemoryUsage.max attribute is not the actual max-size of the heap (i.e. the one set with -Xmx )\r\n\r\nThe reported value is the max heap size minus the max survivor space size\r\n\r\nTo get the total max heap size, add the two jmx attributes:\r\n\r\n    java.lang:type=Memory/HeapMemoryUsage.max + java.lang:type=MemoryPool,name=Survivor Space/Usage.max\r\n\r\n(tested on oracle jdk 1.7.0_45)","title":"Why does the JVM Heap Usage Max as reported by JMX change over time?","body":"<p>One possibility is that the JVM survivor space is fluctuating in max-size.</p>\n\n<p>The JVM max-size reported by JMX via the HeapMemoryUsage.max attribute is not the actual max-size of the heap (i.e. the one set with -Xmx )</p>\n\n<p>The reported value is the max heap size minus the max survivor space size</p>\n\n<p>To get the total max heap size, add the two jmx attributes:</p>\n\n<pre><code>java.lang:type=Memory/HeapMemoryUsage.max + java.lang:type=MemoryPool,name=Survivor Space/Usage.max\n</code></pre>\n\n<p>(tested on oracle jdk 1.7.0_45)</p>\n"}],"owner":{"account_id":2188,"reputation":19759,"user_id":3009,"accept_rate":73,"display_name":"highlycaffeinated"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10218,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":2,"score":10,"last_activity_date":1636377970,"creation_date":1344614149,"question_id":11905220,"body_markdown":"My JVM heap max is configured at 8GB on the name node for one of my hadoop clusters.  When I monitor that JVM using JMX, the reported maximum is constantly fluctuating, as shown in the attached image. \r\n\r\n&lt;img src=&quot;http://highlycaffeinated.com/assets/images/heapmax.png&quot;/&gt;\r\n\r\nI only see this behavior on one (the most active) of my hadoop clusters. On the other clusters the reported maximum stays fixed at the configured value.  Any ideas why the reported maximum would change?\r\n\r\n**Update:**\r\n\r\nThe java version is &quot;1.6.0_20&quot;\r\n\r\nThe heap max value is set in hadoop-env.sh with the following line:\r\n\r\n`export HADOOP_NAMENODE_OPTS=&quot;-Xmx8G -Dcom.sun.management.jmxremote.port=8004 $JMX_SHARED_PROPS&quot;`\r\n\r\nps shows:\r\n\r\n`hadoop   27605     1 99 Jul30 ?        11-07:23:13 /usr/lib/jvm/jre/bin/java -Xmx1000m -Xmx8G`\r\n\r\n**Update 2:**\r\n\r\nAdded the `-Xms8G` switch to the startup command line last night:\r\n\r\n`export HADOOP_NAMENODE_OPTS=&quot;-Xms8G -Xmx8G -Dcom.sun.management.jmxremote.port=8004 $JMX_SHARED_PROPS&quot;`\r\n\r\nAs shown in the image below, the max value still varies, although the pattern seems to have changed.\r\n\r\n&lt;img src=&quot;http://highlycaffeinated.com/assets/images/heapmax2.png&quot;/&gt;\r\n\r\n**Update 3:**\r\n\r\nHere&#39;s a new graph that also shows Non-Heap max, which stays constant:\r\n\r\n&lt;img src=&quot;http://highlycaffeinated.com/assets/images/heapmax3.png&quot;/&gt;\r\n","title":"Why does the JVM Heap Usage Max as reported by JMX change over time?","body":"<p>My JVM heap max is configured at 8GB on the name node for one of my hadoop clusters.  When I monitor that JVM using JMX, the reported maximum is constantly fluctuating, as shown in the attached image. </p>\n\n<p><a href=\"http://highlycaffeinated.com/assets/images/heapmax.png\" rel=\"nofollow noreferrer\">http://highlycaffeinated.com/assets/images/heapmax.png</a></p>\n\n<p>I only see this behavior on one (the most active) of my hadoop clusters. On the other clusters the reported maximum stays fixed at the configured value.  Any ideas why the reported maximum would change?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>The java version is \"1.6.0_20\"</p>\n\n<p>The heap max value is set in hadoop-env.sh with the following line:</p>\n\n<p><code>export HADOOP_NAMENODE_OPTS=\"-Xmx8G -Dcom.sun.management.jmxremote.port=8004 $JMX_SHARED_PROPS\"</code></p>\n\n<p>ps shows:</p>\n\n<p><code>hadoop   27605     1 99 Jul30 ?        11-07:23:13 /usr/lib/jvm/jre/bin/java -Xmx1000m -Xmx8G</code></p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>Added the <code>-Xms8G</code> switch to the startup command line last night:</p>\n\n<p><code>export HADOOP_NAMENODE_OPTS=\"-Xms8G -Xmx8G -Dcom.sun.management.jmxremote.port=8004 $JMX_SHARED_PROPS\"</code></p>\n\n<p>As shown in the image below, the max value still varies, although the pattern seems to have changed.</p>\n\n<p><a href=\"http://highlycaffeinated.com/assets/images/heapmax2.png\" rel=\"nofollow noreferrer\">http://highlycaffeinated.com/assets/images/heapmax2.png</a></p>\n\n<p><strong>Update 3:</strong></p>\n\n<p>Here's a new graph that also shows Non-Heap max, which stays constant:</p>\n\n<p><a href=\"http://highlycaffeinated.com/assets/images/heapmax3.png\" rel=\"nofollow noreferrer\">http://highlycaffeinated.com/assets/images/heapmax3.png</a></p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"display_name":"user529543"},"score":0,"creation_date":1345880407,"post_id":12120127,"comment_id":16205781,"body_markdown":"http://www.java-examples.com/get-maximum-memory-available-java-virtual-machinejvm-example","body":"<a href=\"http://www.java-examples.com/get-maximum-memory-available-java-virtual-machinejvm-example\" rel=\"nofollow noreferrer\">java-examples.com/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":43399,"reputation":1102,"user_id":126859,"display_name":"maneesh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1345880800,"creation_date":1345880800,"answer_id":12120178,"question_id":12120127,"body_markdown":"Use [JConsole][1] to easily monitor the heap sizes. You can see different gen sizes in the memory tab. Select the gen you want from the Chart drop down.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html","title":"How do I determine the size of each of the heap generations in my JVM?","body":"<p>Use <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html\" rel=\"nofollow\">JConsole</a> to easily monitor the heap sizes. You can see different gen sizes in the memory tab. Select the gen you want from the Chart drop down.</p>\n"},{"tags":[],"owner":{"account_id":290123,"reputation":29330,"user_id":591495,"display_name":"obataku"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1566581351,"creation_date":1345880868,"answer_id":12120187,"question_id":12120127,"body_markdown":"I&#39;m presuming you mean determining this *programmatically*. You should take a peek at [`java.lang.management`][2]. In particular, [`ManagementFactory.getMemoryPoolMXBeans`][3] should be useful here.\r\n\r\n    final List&lt;MemoryPoolMXBeans&gt; pools = ManagementFactory.getMemoryPoolMXBeans();\r\n    for (final MemoryPoolMXBean pool : pools) {\r\n      if (pool.getType() == MemoryType.HEAP) {\r\n        final String name = pool.getName();\r\n        final MemoryUsage usage = pool.getUsage();\r\n        if (name.startsWith(&quot;Eden&quot;)) {\r\n          System.out.println(&quot;found eden: &quot; + usage);\r\n        } else if (name.startsWith(&quot;Tenured&quot;)) {\r\n          System.out.println(&quot;found tenured: &quot; + usage);\r\n        }\r\n      }\r\n    }\r\n\r\nThis should work using the HotSpot JVM.\r\n\r\nIf you&#39;re __not__ seeking to do this programmatically, [VisualVM][4] (`jvisualvm` in the JDK) allows you to monitor heap usage amongst many other nifty things.\r\n\r\n[![][1]][1]  \n&lt;sub&gt;(source: [java.net](https://visualvm.java.net/images/monitor.jpg))&lt;/sub&gt;  \n\r\n\r\nNote, however, that VisualVM lacks support of monitoring specific memory pools out-of-the-box; you&#39;ll need to install [jvmstat][5]. You must then install the __Visual GC__ plugin from VisualVM&#39;s plugin manager.\r\n\r\n&lt;img src=&quot;http://puu.sh/YCpX&quot; /&gt;\r\n\r\nAfter installing and restarting Visual VM, we can see a more in-depth view of heap usage via the Visual GC tab.\r\n\r\n&lt;img src=&quot;http://puu.sh/YCqD&quot; /&gt;\n [1]: https://i.stack.imgur.com/vImPb.jpg\n [2]: https://docs.oracle.com/javase/7/docs/api/java/lang/management/package-summary.html\n [3]: https://docs.oracle.com/javase/7/docs/api/java/lang/management/ManagementFactory.html#getMemoryPoolMXBeans()\n [4]: https://web.archive.org/web/20170729032925/http://visualvm.java.net:80/\n [5]: https://web.archive.org/web/20120719044644/http://java.sun.com:80/performance/jvmstat/","title":"How do I determine the size of each of the heap generations in my JVM?","body":"<p>I'm presuming you mean determining this <em>programmatically</em>. You should take a peek at <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/management/package-summary.html\" rel=\"nofollow noreferrer\"><code>java.lang.management</code></a>. In particular, <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/management/ManagementFactory.html#getMemoryPoolMXBeans()\" rel=\"nofollow noreferrer\"><code>ManagementFactory.getMemoryPoolMXBeans</code></a> should be useful here.</p>\n\n<pre><code>final List&lt;MemoryPoolMXBeans&gt; pools = ManagementFactory.getMemoryPoolMXBeans();\nfor (final MemoryPoolMXBean pool : pools) {\n  if (pool.getType() == MemoryType.HEAP) {\n    final String name = pool.getName();\n    final MemoryUsage usage = pool.getUsage();\n    if (name.startsWith(\"Eden\")) {\n      System.out.println(\"found eden: \" + usage);\n    } else if (name.startsWith(\"Tenured\")) {\n      System.out.println(\"found tenured: \" + usage);\n    }\n  }\n}\n</code></pre>\n\n<p>This should work using the HotSpot JVM.</p>\n\n<p>If you're <strong>not</strong> seeking to do this programmatically, <a href=\"https://web.archive.org/web/20170729032925/http://visualvm.java.net:80/\" rel=\"nofollow noreferrer\">VisualVM</a> (<code>jvisualvm</code> in the JDK) allows you to monitor heap usage amongst many other nifty things.</p>\n\n<p><a href=\"https://i.stack.imgur.com/vImPb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vImPb.jpg\" alt=\"\"></a><br>\n<sub>(source: <a href=\"https://visualvm.java.net/images/monitor.jpg\" rel=\"nofollow noreferrer\">java.net</a>)</sub>  </p>\n\n<p>Note, however, that VisualVM lacks support of monitoring specific memory pools out-of-the-box; you'll need to install <a href=\"https://web.archive.org/web/20120719044644/http://java.sun.com:80/performance/jvmstat/\" rel=\"nofollow noreferrer\">jvmstat</a>. You must then install the <strong>Visual GC</strong> plugin from VisualVM's plugin manager.</p>\n\n<p><a href=\"http://puu.sh/YCpX\" rel=\"nofollow noreferrer\">http://puu.sh/YCpX</a></p>\n\n<p>After installing and restarting Visual VM, we can see a more in-depth view of heap usage via the Visual GC tab.</p>\n\n<p><a href=\"http://puu.sh/YCqD\" rel=\"nofollow noreferrer\">http://puu.sh/YCqD</a></p>\n"}],"owner":{"account_id":16169,"reputation":12143,"user_id":34956,"accept_rate":88,"display_name":"Parag"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":984,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":12120187,"answer_count":2,"score":5,"last_activity_date":1636377957,"creation_date":1345880195,"question_id":12120127,"body_markdown":"If I start my JVM with -Xms256M and -Xmx512M, at any point of time, can I determine the amount of space specifically allocated to the young and tenured generations of the heap ?","title":"How do I determine the size of each of the heap generations in my JVM?","body":"<p>If I start my JVM with -Xms256M and -Xmx512M, at any point of time, can I determine the amount of space specifically allocated to the young and tenured generations of the heap ?</p>\n"},{"tags":["java","jvm","heap-memory","jvisualvm"],"answers":[{"tags":[],"owner":{"account_id":1418971,"reputation":15473,"user_id":1344008,"display_name":"npe"},"down_vote_count":0,"up_vote_count":191,"is_accepted":true,"score":191,"last_activity_date":1617504889,"creation_date":1345984293,"answer_id":12130149,"question_id":12130107,"body_markdown":"`Sampling` means taking lots of thread dumps and analyzing stack traces.\r\nThis is usually faster, does not require runtime changes in your bytecode (which may break it), but is also less accurate.\r\n\r\n`Profiling` means [instrumenting][1] your classes and methods, so they &quot;report&quot; whenever they are run. This is more accurate, as it counts every invocation of instrumented method, not only those caught when the dump is done. However instrumentation means that the bytecode of your classes is changed, and this may break your program. Actually, for that reason, using profiling on large application servers (like JBoss, or WebLogic) often causes everything to die or hang.\r\n\r\n\r\n[1]: https://docs.oracle.com/en/java/javase/16/docs/api/java.instrument/java/lang/instrument/Instrumentation.html","title":"Difference between sampling and profiling in jVisualVM","body":"<p><code>Sampling</code> means taking lots of thread dumps and analyzing stack traces.\nThis is usually faster, does not require runtime changes in your bytecode (which may break it), but is also less accurate.</p>\n<p><code>Profiling</code> means <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.instrument/java/lang/instrument/Instrumentation.html\" rel=\"noreferrer\">instrumenting</a> your classes and methods, so they &quot;report&quot; whenever they are run. This is more accurate, as it counts every invocation of instrumented method, not only those caught when the dump is done. However instrumentation means that the bytecode of your classes is changed, and this may break your program. Actually, for that reason, using profiling on large application servers (like JBoss, or WebLogic) often causes everything to die or hang.</p>\n"}],"owner":{"account_id":16169,"reputation":12143,"user_id":34956,"accept_rate":88,"display_name":"Parag"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21686,"favorite_count":0,"down_vote_count":0,"up_vote_count":163,"accepted_answer_id":12130149,"answer_count":1,"score":163,"last_activity_date":1636377937,"creation_date":1345983992,"question_id":12130107,"body_markdown":"VisualVM has two separate tabs for sampling and profiling. What is the difference between sampling and profiling in VisualVM?","title":"Difference between sampling and profiling in jVisualVM","body":"<p>VisualVM has two separate tabs for sampling and profiling. What is the difference between sampling and profiling in VisualVM?</p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":51614,"reputation":3702,"user_id":154262,"accept_rate":94,"display_name":"SpaceBison"},"score":1,"creation_date":1355743424,"post_id":13913099,"comment_id":19175695,"body_markdown":"This is answered here: http://programmers.stackexchange.com/questions/142024/storage-of-value-types-and-reference-types-in-net","body":"This is answered here: <a href=\"http://programmers.stackexchange.com/questions/142024/storage-of-value-types-and-reference-types-in-net\" title=\"storage of value types and reference types in net\">programmers.stackexchange.com/questions/142024/&hellip;</a>"},{"owner":{"account_id":1424546,"reputation":4140,"user_id":1348423,"accept_rate":53,"display_name":"Muhammad Ahmed AbuTalib"},"score":1,"creation_date":1355748757,"post_id":13913099,"comment_id":19178161,"body_markdown":"Thank you for your answers , I have a clear vision about this now.","body":"Thank you for your answers , I have a clear vision about this now."}],"answers":[{"tags":[],"owner":{"account_id":1764995,"reputation":36209,"user_id":1611055,"accept_rate":91,"display_name":"Andreas Fester"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1468742023,"creation_date":1355743394,"answer_id":13913176,"question_id":13913099,"body_markdown":"&gt; I do know that in Java, (perhaps in .net too) , primitives are stored on stacks , where as reference types are stored on heaps.\r\n\r\nNo. It does **not** depend on whether its a primitive or a reference. It depends on the **scope** whether the stack or the heap is used. Local variables are allocated on the stack, member variables are allocated on the heap when the object is instantiated.\r\n\r\nSee also https://stackoverflow.com/questions/3646632/does-the-java-primitives-go-on-the-stack-or-the-heap\r\n\r\n&gt; My question was that I do not understand the proc/cons for this behavior.\r\n\r\nData stored on the stack only lives as long as your method is executing. Once the method is done, all data allocated on the stack is removed.\r\nData stored on the heap lives as long as it is not discarded (which, in case of Java, is done in the background by the garbage collector). In other languages as C/C++, you explicitly need to delete/free data which was allocated on the heap.\r\n\r\nConsider the following code snippet:\r\n\r\n    String someMethod() {\r\n      int i = 0;\r\n      String result = &quot;Hello&quot;;\r\n\r\n      i = i + 5;\r\n      return result;\r\n    }\r\n\r\nHere, a primitive (`int i`)  is created on the stack and some calculation is done on it. Once the method finishes, `i` cannot be accessed anymore, and its value is lost. The same is basically true for the `result` reference: the reference is allocated on the stack, but the Object (a String object in this case) is allocated on the Heap. By returning the reference as return value, the object it references can still be used outside the method.\r\n\r\n","title":"Why are reference types stored in heap","body":"<blockquote>\n  <p>I do know that in Java, (perhaps in .net too) , primitives are stored on stacks , where as reference types are stored on heaps.</p>\n</blockquote>\n\n<p>No. It does <strong>not</strong> depend on whether its a primitive or a reference. It depends on the <strong>scope</strong> whether the stack or the heap is used. Local variables are allocated on the stack, member variables are allocated on the heap when the object is instantiated.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/3646632/does-the-java-primitives-go-on-the-stack-or-the-heap\">Do Java primitives go on the Stack or the Heap?</a></p>\n\n<blockquote>\n  <p>My question was that I do not understand the proc/cons for this behavior.</p>\n</blockquote>\n\n<p>Data stored on the stack only lives as long as your method is executing. Once the method is done, all data allocated on the stack is removed.\nData stored on the heap lives as long as it is not discarded (which, in case of Java, is done in the background by the garbage collector). In other languages as C/C++, you explicitly need to delete/free data which was allocated on the heap.</p>\n\n<p>Consider the following code snippet:</p>\n\n<pre><code>String someMethod() {\n  int i = 0;\n  String result = \"Hello\";\n\n  i = i + 5;\n  return result;\n}\n</code></pre>\n\n<p>Here, a primitive (<code>int i</code>)  is created on the stack and some calculation is done on it. Once the method finishes, <code>i</code> cannot be accessed anymore, and its value is lost. The same is basically true for the <code>result</code> reference: the reference is allocated on the stack, but the Object (a String object in this case) is allocated on the Heap. By returning the reference as return value, the object it references can still be used outside the method.</p>\n"},{"tags":[],"owner":{"account_id":277035,"reputation":13804,"user_id":570767,"accept_rate":82,"display_name":"Azodious"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1355743439,"creation_date":1355743439,"answer_id":13913190,"question_id":13913099,"body_markdown":"&gt;Why can&#39;t we reference a memory location inside our stacks instead?\r\n\r\nYou can but think of this decision as **Memory Architecture decision.**\r\n\r\nBy concept, ideally, any data can&#39;t be retrieved from `stack` if it is not on top of it. But in real world you require some location to be accessed from anywhere in the program. So, it can&#39;t be stack. and they named it `heap`.\r\n\r\nThis [link][1] may throw more light on it.\r\n\r\n[1]: http://www.javatutorialhub.com/java-stack-heap.html\r\n","title":"Why are reference types stored in heap","body":"<blockquote>\n  <p>Why can't we reference a memory location inside our stacks instead?</p>\n</blockquote>\n\n<p>You can but think of this decision as <strong>Memory Architecture decision.</strong></p>\n\n<p>By concept, ideally, any data can't be retrieved from <code>stack</code> if it is not on top of it. But in real world you require some location to be accessed from anywhere in the program. So, it can't be stack. and they named it <code>heap</code>.</p>\n\n<p>This <a href=\"http://www.javatutorialhub.com/java-stack-heap.html\" rel=\"nofollow\">link</a> may throw more light on it.</p>\n"},{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1355743473,"creation_date":1355743473,"answer_id":13913198,"question_id":13913099,"body_markdown":"&gt; where as reference types are stored on heaps.\r\n\r\nI don&#39;t know what exactly you mean by that part, but remember that, only objects are stored on `heap`, whereas, references pointing to those objects are still on the stack. Probably this was the doubt you had.\r\n\r\nNow, you should also note that, only local variables are stored on `stack`, whereas `instance / member` variables are stored on `Heap`. \r\n\r\nFor e.g.: -\r\n\r\n    String str = new String(&quot;Rohit&quot;);  // Local variable\r\n\r\nIn above case, `str` reference will be allocated memory on `stack`, if of course it is defined in some local scope. And it will point to a new string object created on `Heap`.\r\n","title":"Why are reference types stored in heap","body":"<blockquote>\n  <p>where as reference types are stored on heaps.</p>\n</blockquote>\n\n<p>I don't know what exactly you mean by that part, but remember that, only objects are stored on <code>heap</code>, whereas, references pointing to those objects are still on the stack. Probably this was the doubt you had.</p>\n\n<p>Now, you should also note that, only local variables are stored on <code>stack</code>, whereas <code>instance / member</code> variables are stored on <code>Heap</code>. </p>\n\n<p>For e.g.: -</p>\n\n<pre><code>String str = new String(\"Rohit\");  // Local variable\n</code></pre>\n\n<p>In above case, <code>str</code> reference will be allocated memory on <code>stack</code>, if of course it is defined in some local scope. And it will point to a new string object created on <code>Heap</code>.</p>\n"},{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1355743639,"creation_date":1355743639,"answer_id":13913255,"question_id":13913099,"body_markdown":"You can&#39;t generally store reference types on stack because the stack frame is destroyed upon method return. If you saved a reference to an object so it can be dereferenced after the method completes, you&#39;d be dereferencing a non-existent stack location.\r\n\r\nThe HotSpot JVM can perform *escape analysis* and, if it determines that an object cannot possibly escape the method scope, it will in fact allocate it on the stack.","title":"Why are reference types stored in heap","body":"<p>You can't generally store reference types on stack because the stack frame is destroyed upon method return. If you saved a reference to an object so it can be dereferenced after the method completes, you'd be dereferencing a non-existent stack location.</p>\n\n<p>The HotSpot JVM can perform <em>escape analysis</em> and, if it determines that an object cannot possibly escape the method scope, it will in fact allocate it on the stack.</p>\n"}],"owner":{"account_id":1424546,"reputation":4140,"user_id":1348423,"accept_rate":53,"display_name":"Muhammad Ahmed AbuTalib"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6661,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":13913255,"answer_count":4,"score":9,"last_activity_date":1636377911,"creation_date":1355743098,"question_id":13913099,"body_markdown":"I do know that in Java, (perhaps in .net too) , primitives are stored on stacks , where as reference types are stored on heaps. \r\n\r\nMy question was that I do not understand the proc/cons for this behavior. Why can&#39;t we reference a memory location inside our stacks instead? . I couldn&#39;t find a proper explanation as I googled ( maybe I suck at it) , but if you people can provide some insights  I would be grateful\r\n\r\nThanks. \r\n","title":"Why are reference types stored in heap","body":"<p>I do know that in Java, (perhaps in .net too) , primitives are stored on stacks , where as reference types are stored on heaps. </p>\n\n<p>My question was that I do not understand the proc/cons for this behavior. Why can't we reference a memory location inside our stacks instead? . I couldn't find a proper explanation as I googled ( maybe I suck at it) , but if you people can provide some insights  I would be grateful</p>\n\n<p>Thanks. </p>\n"},{"tags":["java","jvm","heap-memory","classloader"],"comments":[{"owner":{"account_id":27004,"reputation":28823,"user_id":70795,"accept_rate":56,"display_name":"Mark"},"score":0,"creation_date":1360010568,"post_id":14693094,"comment_id":20549315,"body_markdown":"See http://stackoverflow.com/questions/340997/constantpoolclass-in-java-heap","body":"See <a href=\"http://stackoverflow.com/questions/340997/constantpoolclass-in-java-heap\" title=\"constantpoolclass in java heap\">stackoverflow.com/questions/340997/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":403952,"reputation":8938,"user_id":772000,"accept_rate":100,"display_name":"Aleš"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360016361,"creation_date":1360016361,"answer_id":14696775,"question_id":14693094,"body_markdown":"These are internal JVM objects used for class loading. \r\n\r\nEach class loaded by your JVM is represented inside the VM as an instance of class `Klass`, these objects reside in the Heap. The heap thus contains your application data plus data/objects used by the VM internally.","title":"jmap output understanding","body":"<p>These are internal JVM objects used for class loading. </p>\n\n<p>Each class loaded by your JVM is represented inside the VM as an instance of class <code>Klass</code>, these objects reside in the Heap. The heap thus contains your application data plus data/objects used by the VM internally.</p>\n"}],"owner":{"account_id":1649597,"reputation":1311,"user_id":1987266,"accept_rate":67,"display_name":"techagrammer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1379,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1636377836,"creation_date":1360002502,"question_id":14693094,"body_markdown":"Jmap histo live O/P is like this:\r\n\r\n       8:         72350       99408664  &lt;instanceKlassKlass&gt;\r\n       9:         72350       85348552  &lt;constantPoolKlass&gt;\r\n      10:         70884       48964288  &lt;constantPoolCacheKlass&gt;\r\n\r\n\r\nCan anyone please explain the meaning of in instanceKlassKlass and the other two??\r\n","title":"jmap output understanding","body":"<p>Jmap histo live O/P is like this:</p>\n\n<pre><code>   8:         72350       99408664  &lt;instanceKlassKlass&gt;\n   9:         72350       85348552  &lt;constantPoolKlass&gt;\n  10:         70884       48964288  &lt;constantPoolCacheKlass&gt;\n</code></pre>\n\n<p>Can anyone please explain the meaning of in instanceKlassKlass and the other two??</p>\n"},{"tags":["java","jar","jvm","heap-memory","exe4j"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1370921780,"post_id":17036078,"comment_id":24626283,"body_markdown":"If the maximum heap size exceeds 3gb or the available system memory, you will receive this error.  You&#39;ve failed to tell us what settings you are using","body":"If the maximum heap size exceeds 3gb or the available system memory, you will receive this error.  You&#39;ve failed to tell us what settings you are using"},{"owner":{"account_id":2882478,"reputation":1402,"user_id":2473015,"accept_rate":71,"display_name":"user2473015"},"score":0,"creation_date":1434857461,"post_id":17036078,"comment_id":49954327,"body_markdown":"This wasn&#39;t about available memory error.It was due to 32bit JRE wasn&#39;t installed.","body":"This wasn&#39;t about available memory error.It was due to 32bit JRE wasn&#39;t installed."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1434858697,"post_id":17036078,"comment_id":49954467,"body_markdown":"Says, that&#39;s right, Windows reserves 1gb of memory, but a 32bit process is only capable of accessing up yo 4gb.  A 32bit process can&#39;t access more then 3gb in a Windows machine...","body":"Says, that&#39;s right, Windows reserves 1gb of memory, but a 32bit process is only capable of accessing up yo 4gb.  A 32bit process can&#39;t access more then 3gb in a Windows machine..."}],"answers":[{"tags":[],"owner":{"display_name":"user589555"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1375899386,"creation_date":1375899386,"answer_id":18110769,"question_id":17036078,"body_markdown":"Exe4j works by loading the DLL of the target JVM, which requires the JVM to be of the same &quot;bitness&quot; with the executable wrapper.  So a 32-bit Exe4j wrapper can only load a 32-bit JVM, while a 64-bit wrapper can only load a 64-bit JVM.\r\n\r\nWhen Exe4j searches the registry for a JVM, it will ignore any JVM of the wrong bitness and look only through those of its own bitness.  However, if you force Exe4j to load a specific JVM by setting the EXE4J_JAVA_HOME environment variable and the bitnesses don&#39;t match, the loading of the JVM will fail.\r\n\r\nIf you want a 32-bit application (i.e. executable wrrapper), you must have a 32-bit JRE or JDK installed.  If on the other hand you want a 64-bit JVM to be used, then you must provide a 64-bit executable wrapper.","title":"EXE4j Jar to exe error","body":"<p>Exe4j works by loading the DLL of the target JVM, which requires the JVM to be of the same \"bitness\" with the executable wrapper.  So a 32-bit Exe4j wrapper can only load a 32-bit JVM, while a 64-bit wrapper can only load a 64-bit JVM.</p>\n\n<p>When Exe4j searches the registry for a JVM, it will ignore any JVM of the wrong bitness and look only through those of its own bitness.  However, if you force Exe4j to load a specific JVM by setting the EXE4J_JAVA_HOME environment variable and the bitnesses don't match, the loading of the JVM will fail.</p>\n\n<p>If you want a 32-bit application (i.e. executable wrrapper), you must have a 32-bit JRE or JDK installed.  If on the other hand you want a 64-bit JVM to be used, then you must provide a 64-bit executable wrapper.</p>\n"}],"owner":{"account_id":2882478,"reputation":1402,"user_id":2473015,"accept_rate":71,"display_name":"user2473015"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2584,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18110769,"answer_count":1,"score":1,"last_activity_date":1636377813,"creation_date":1370921458,"question_id":17036078,"body_markdown":"I&#39;m recently Java 7 update 21 JDK and i created java application with netbeans\r\nFor distributing my jar i use Exe4j 4.5.2 Jar to exe.\r\n\r\nNow when i used Exe4j it creates exe but when i execute it it shows me error message.\r\n\r\n&quot;The JVM could not be started. The maximum heap size (-Xmx) might be too large or an antivirus or firewall tool could block the execution.&quot;\r\n\r\nAfter few test s i found out my previously(before installing JDK7u21) working application exe files from exe4j also now gives same error message.\r\n\r\n(I&#39;m Using 64 bit versions of JDK and EXE4j but complied exe is 32 bit.I want 32 bit application)","title":"EXE4j Jar to exe error","body":"<p>I'm recently Java 7 update 21 JDK and i created java application with netbeans\nFor distributing my jar i use Exe4j 4.5.2 Jar to exe.</p>\n\n<p>Now when i used Exe4j it creates exe but when i execute it it shows me error message.</p>\n\n<p>\"The JVM could not be started. The maximum heap size (-Xmx) might be too large or an antivirus or firewall tool could block the execution.\"</p>\n\n<p>After few test s i found out my previously(before installing JDK7u21) working application exe files from exe4j also now gives same error message.</p>\n\n<p>(I'm Using 64 bit versions of JDK and EXE4j but complied exe is 32 bit.I want 32 bit application)</p>\n"},{"tags":["java","operating-system","jvm","heap-memory"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1373373326,"post_id":17548154,"comment_id":25524241,"body_markdown":"Note: a `String` is a reference which can be on the stack, but the actual object is on the heap. If you use objects, you should assume they will use heap space no matter what you do.","body":"Note: a <code>String</code> is a reference which can be on the stack, but the actual object is on the heap. If you use objects, you should assume they will use heap space no matter what you do."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1373373380,"post_id":17548154,"comment_id":25524274,"body_markdown":"BTW I would just write `-Xmx2g` or `-mx2g` or not set it all, the default is 1/4 of the main memory size and as long as you have a decent machine, you might not need to set it.","body":"BTW I would just write <code>-Xmx2g</code> or <code>-mx2g</code> or not set it all, the default is 1/4 of the main memory size and as long as you have a decent machine, you might not need to set it."}],"answers":[{"tags":[],"owner":{"account_id":2029491,"reputation":9823,"user_id":1813616,"display_name":"Uwe Plonus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1373373157,"creation_date":1373373157,"answer_id":17548247,"question_id":17548154,"body_markdown":"This is impossible to occur as the stack frame has its own size. This size can be adjusted by the command line parameter `-Xss&lt;size&gt;`.\r\n\r\nThe heap memory is completly separated from this stack memory.\r\n\r\nThe default stack size depends on the JVM you&#39;re running","title":"System stack allocation in recursion","body":"<p>This is impossible to occur as the stack frame has its own size. This size can be adjusted by the command line parameter <code>-Xss&lt;size&gt;</code>.</p>\n\n<p>The heap memory is completly separated from this stack memory.</p>\n\n<p>The default stack size depends on the JVM you're running</p>\n"}],"owner":{"account_id":2414779,"reputation":14072,"user_id":2109070,"accept_rate":62,"display_name":"Trying"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":204,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":17548247,"answer_count":1,"score":1,"last_activity_date":1636377801,"creation_date":1373372862,"question_id":17548154,"body_markdown":"As we all know that all most all recursive functions can be modified to iterative approach. Suppose we take an example of adding two linklists which represent two huge numbers. This question can be solved either by recursion (which uses system stack) or iterative (explicit stack usage) approach. \r\n\r\nMy doubt here is if i have given jvm heap size as `-Xms2048MB -Xmx2048M` then in the recursive approach will it use all the heap memory for system stack? AFAIK if i will use explicit stack then it can consume all these memory. It will great if somebody can also tell me how, when and how much system stack memory is allocated and little bit of workings. Even pointing to some nice tutorials also will be of great help. As far as possible if it can be confined w.r.t. `java` world then it&#39;s good. Thanks.","title":"System stack allocation in recursion","body":"<p>As we all know that all most all recursive functions can be modified to iterative approach. Suppose we take an example of adding two linklists which represent two huge numbers. This question can be solved either by recursion (which uses system stack) or iterative (explicit stack usage) approach. </p>\n\n<p>My doubt here is if i have given jvm heap size as <code>-Xms2048MB -Xmx2048M</code> then in the recursive approach will it use all the heap memory for system stack? AFAIK if i will use explicit stack then it can consume all these memory. It will great if somebody can also tell me how, when and how much system stack memory is allocated and little bit of workings. Even pointing to some nice tutorials also will be of great help. As far as possible if it can be confined w.r.t. <code>java</code> world then it's good. Thanks.</p>\n"},{"tags":["java","jvm","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1375949946,"creation_date":1375949946,"answer_id":18121156,"question_id":18121094,"body_markdown":"[This article][1] has some useful information on tuning the heap size for a server application. As for &quot;enabling&quot; garbage collection, it&#39;s always turned on on a regular VM; the only ones that don&#39;t have it are for tiny embedded applications like JavaCard.\r\n\r\n\r\n  [1]: http://javaeesupportpatterns.blogspot.com/2012/07/5-tips-for-proper-java-heap-size.html","title":"Set the heap size of java with Garbage collection enabled","body":"<p><a href=\"http://javaeesupportpatterns.blogspot.com/2012/07/5-tips-for-proper-java-heap-size.html\" rel=\"nofollow\">This article</a> has some useful information on tuning the heap size for a server application. As for \"enabling\" garbage collection, it's always turned on on a regular VM; the only ones that don't have it are for tiny embedded applications like JavaCard.</p>\n"}],"owner":{"account_id":202335,"reputation":4629,"user_id":449344,"accept_rate":87,"display_name":"Jeevan Dongre"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":837,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":18121156,"answer_count":1,"score":0,"last_activity_date":1636377748,"creation_date":1375949694,"question_id":18121094,"body_markdown":"I am running JVM in a ubuntu ec2 instance which runs only solr and nothing else. Now I wanna configure the Heap size of the JVM which is running. The problem is I am not using Sun Jdk I am using the following versions and settings\r\n\r\n    java version &quot;1.7.0_25&quot;\r\n    OpenJDK Runtime Environment (IcedTea 2.3.10) (7u25-2.3.10-1ubuntu0.12.04.2)\r\n    OpenJDK 64-Bit Server VM (build 23.7-b01, mixed mode)\r\n\r\nHow do I reset the heap size to my requirements.Also I want to enable the garbage collection. How can I do it. I am not running tomcat6. \r\n\r\nKindly Help me","title":"Set the heap size of java with Garbage collection enabled","body":"<p>I am running JVM in a ubuntu ec2 instance which runs only solr and nothing else. Now I wanna configure the Heap size of the JVM which is running. The problem is I am not using Sun Jdk I am using the following versions and settings</p>\n\n<pre><code>java version \"1.7.0_25\"\nOpenJDK Runtime Environment (IcedTea 2.3.10) (7u25-2.3.10-1ubuntu0.12.04.2)\nOpenJDK 64-Bit Server VM (build 23.7-b01, mixed mode)\n</code></pre>\n\n<p>How do I reset the heap size to my requirements.Also I want to enable the garbage collection. How can I do it. I am not running tomcat6. </p>\n\n<p>Kindly Help me</p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1376632034,"post_id":18263380,"comment_id":26791107,"body_markdown":"Why not just install a 64-bit OS? BTW You should never try to make the heap much more than 80% of your main memory as it will perform very badly.  If you need more memory I suggest you buy it.  16 GB doesn&#39;t cost much these days.","body":"Why not just install a 64-bit OS? BTW You should never try to make the heap much more than 80% of your main memory as it will perform very badly.  If you need more memory I suggest you buy it.  16 GB doesn&#39;t cost much these days."}],"answers":[{"tags":[],"owner":{"account_id":1394089,"reputation":40460,"user_id":1424875,"accept_rate":86,"display_name":"nanofarad"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1376608474,"creation_date":1376608138,"answer_id":18263389,"question_id":18263380,"body_markdown":"No. A 32-bit kernel(and likely 32-bit CPU as well) cannot run a 64-bit executable for the JVM(or any other 64-bit executable/ELF) with your choice of OS and kernel.","title":"Is it possible to install 64 bit JVM on linux so heap can be larger then 2gb?","body":"<p>No. A 32-bit kernel(and likely 32-bit CPU as well) cannot run a 64-bit executable for the JVM(or any other 64-bit executable/ELF) with your choice of OS and kernel.</p>\n"},{"tags":[],"owner":{"account_id":1899893,"reputation":2821,"user_id":1715960,"display_name":"andy256"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1376608559,"creation_date":1376608559,"answer_id":18263452,"question_id":18263380,"body_markdown":"As far I see, you do not mention what hardware this is.\r\n\r\nThe 32-bit / 64-bit issue is about what the basic word size of the hardware is, and the processor has instructions that use that size. So software built for 64-bit will be using those instructions, and would crash if you somehow got it to run on a 32-bit machine.\r\n\r\nTo do what you want, *if* you machine is 64-bit, then you could install a 64-bit linux, and then 64-bit JVM.","title":"Is it possible to install 64 bit JVM on linux so heap can be larger then 2gb?","body":"<p>As far I see, you do not mention what hardware this is.</p>\n\n<p>The 32-bit / 64-bit issue is about what the basic word size of the hardware is, and the processor has instructions that use that size. So software built for 64-bit will be using those instructions, and would crash if you somehow got it to run on a 32-bit machine.</p>\n\n<p>To do what you want, <em>if</em> you machine is 64-bit, then you could install a 64-bit linux, and then 64-bit JVM.</p>\n"}],"owner":{"account_id":292835,"reputation":6407,"user_id":595833,"accept_rate":94,"display_name":"bobbyrne01"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":382,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18263389,"answer_count":2,"score":1,"last_activity_date":1636377736,"creation_date":1376608095,"question_id":18263380,"body_markdown":"It&#39;s a 32 bit Ubuntu OS\r\n\r\n    rob@laptop:~$ uname -a\r\n    Linux laptop 3.5.0-37-generic #58~precise1-Ubuntu SMP Wed Jul \r\n    10 17:51:56 UTC 2013 i686 i686 i386 GNU/Linux\r\n\r\n\r\n    rob@laptop:~$ java -version\r\n    java version &quot;1.7.0_25&quot;\r\n    OpenJDK Runtime Environment (IcedTea 2.3.10) (7u25-2.3.10-1ubuntu0.12.04.2)\r\n    OpenJDK Server VM (build 23.7-b01, mixed mode)\r\n    \r\n\r\n    rob@laptop:~$ sudo update-alternatives --config java\r\n    There are 3 choices for the alternative java (providing /usr/bin/java).\r\n\r\n    Selection    Path                                           Priority   Status\r\n    0            /usr/lib/j2re1.6-ibm/jre/bin/java               1200      auto mode\r\n    1            /home/rob/Downloads/jre1.7.0_25/bin/java        1         manual mode\r\n    2            /usr/lib/j2re1.6-ibm/jre/bin/java               1200      manual mode\r\n    * 3            /usr/lib/jvm/java-7-openjdk-i386/jre/bin/java   1051      manual mode\r\n\r\nI want to be able to run with more than 2g of heap\r\n\r\n    rob@laptop:~$ java -Xmx3g -jar tool.jar \r\n    Error occurred during initialization of VM\r\n    Could not reserve enough space for object heap\r\n    Error: Could not create the Java Virtual Machine.\r\n    Error: A fatal exception has occurred. Program will exit.\r\n\r\n    rob@laptop:~$ free -g\r\n                 total       used       free     shared    buffers     cached\r\n    Mem:            15          2         12          0          0          1","title":"Is it possible to install 64 bit JVM on linux so heap can be larger then 2gb?","body":"<p>It's a 32 bit Ubuntu OS</p>\n\n<pre><code>rob@laptop:~$ uname -a\nLinux laptop 3.5.0-37-generic #58~precise1-Ubuntu SMP Wed Jul \n10 17:51:56 UTC 2013 i686 i686 i386 GNU/Linux\n\n\nrob@laptop:~$ java -version\njava version \"1.7.0_25\"\nOpenJDK Runtime Environment (IcedTea 2.3.10) (7u25-2.3.10-1ubuntu0.12.04.2)\nOpenJDK Server VM (build 23.7-b01, mixed mode)\n\n\nrob@laptop:~$ sudo update-alternatives --config java\nThere are 3 choices for the alternative java (providing /usr/bin/java).\n\nSelection    Path                                           Priority   Status\n0            /usr/lib/j2re1.6-ibm/jre/bin/java               1200      auto mode\n1            /home/rob/Downloads/jre1.7.0_25/bin/java        1         manual mode\n2            /usr/lib/j2re1.6-ibm/jre/bin/java               1200      manual mode\n* 3            /usr/lib/jvm/java-7-openjdk-i386/jre/bin/java   1051      manual mode\n</code></pre>\n\n<p>I want to be able to run with more than 2g of heap</p>\n\n<pre><code>rob@laptop:~$ java -Xmx3g -jar tool.jar \nError occurred during initialization of VM\nCould not reserve enough space for object heap\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n\nrob@laptop:~$ free -g\n             total       used       free     shared    buffers     cached\nMem:            15          2         12          0          0          1\n</code></pre>\n"},{"tags":["java","jvm","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1417780635,"creation_date":1378098378,"answer_id":18565982,"question_id":18565798,"body_markdown":"&gt; Any idea?\r\n\r\nWell the obvious conclusion is that if you want to use -Xms to specify the initial heap size, and you want to set the size to a value that is larger than the *default* maximum heap size, you need to *specify* a maximum heap size.\r\n\r\nThe reason that you are getting different results on different machines is that the JVM computes the default heap size in different ways, depending on the version of Java and on the execution platform.  In some cases it is a constant.  In others, it depends on the amount of physical memory on the system.  \r\n\r\nJust set the maximum heap size explicitly and you won&#39;t have this problem.\r\n\r\n--------------------\r\n\r\nIf you want to find out what the default heap size is for a given machine, run this command:\r\n\r\n    java -XX:+PrintFlagsFinal -version ","title":"JVM error when try to allocate more than 128M Xms, without specifying Xmx","body":"<blockquote>\n  <p>Any idea?</p>\n</blockquote>\n\n<p>Well the obvious conclusion is that if you want to use -Xms to specify the initial heap size, and you want to set the size to a value that is larger than the <em>default</em> maximum heap size, you need to <em>specify</em> a maximum heap size.</p>\n\n<p>The reason that you are getting different results on different machines is that the JVM computes the default heap size in different ways, depending on the version of Java and on the execution platform.  In some cases it is a constant.  In others, it depends on the amount of physical memory on the system.  </p>\n\n<p>Just set the maximum heap size explicitly and you won't have this problem.</p>\n\n<hr>\n\n<p>If you want to find out what the default heap size is for a given machine, run this command:</p>\n\n<pre><code>java -XX:+PrintFlagsFinal -version \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2069349,"reputation":5382,"user_id":1844148,"accept_rate":67,"display_name":"Dileep"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1417781003,"creation_date":1378099666,"answer_id":18566189,"question_id":18565798,"body_markdown":"The heap size of your machine depends on lot more than how much RAM you got!\r\n\r\n&gt; Maximum heap size  for 32 bit or 64 bit JVM looks easy to determine by\r\n&gt; looking at addressable memory space like 2^32 (4GB) for 32 bit JVM and\r\n&gt; 2^64 for 64 bit JVM.\r\n&gt; \r\n&gt; You can not really set 4GB as maximum heap size for 32 bit JVM using\r\n&gt; -Xmx JVM heap options. You will get could not create the Java virtual machine Invalid maximum heap size: -Xmx  error.\r\n\r\nYou can look [here][1] for a well explained document about the heap size.\r\n\r\nAnother important thing is that, **You can only postpone the `OutofMemory` Exception by in creasing the Heap size. Unless your clean up your memory you will get the exception one time or another** Use the applications like **Visual VM** to understand what&#39;s going on in the background.  I suggest you try to Optimise code, for increasing performance.\r\n\r\n  \r\n\r\n  [1]: http://javarevisited.blogspot.in/2013/04/what-is-maximum-heap-size-for-32-bit-64-JVM-Java-memory.html","title":"JVM error when try to allocate more than 128M Xms, without specifying Xmx","body":"<p>The heap size of your machine depends on lot more than how much RAM you got!</p>\n\n<blockquote>\n  <p>Maximum heap size  for 32 bit or 64 bit JVM looks easy to determine by\n  looking at addressable memory space like 2^32 (4GB) for 32 bit JVM and\n  2^64 for 64 bit JVM.</p>\n  \n  <p>You can not really set 4GB as maximum heap size for 32 bit JVM using\n  -Xmx JVM heap options. You will get could not create the Java virtual machine Invalid maximum heap size: -Xmx  error.</p>\n</blockquote>\n\n<p>You can look <a href=\"http://javarevisited.blogspot.in/2013/04/what-is-maximum-heap-size-for-32-bit-64-JVM-Java-memory.html\" rel=\"nofollow\">here</a> for a well explained document about the heap size.</p>\n\n<p>Another important thing is that, <strong>You can only postpone the <code>OutofMemory</code> Exception by in creasing the Heap size. Unless your clean up your memory you will get the exception one time or another</strong> Use the applications like <strong>Visual VM</strong> to understand what's going on in the background.  I suggest you try to Optimise code, for increasing performance.</p>\n"},{"tags":[],"owner":{"account_id":25114,"reputation":114200,"user_id":64313,"accept_rate":64,"display_name":"cmcginty"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458608733,"creation_date":1458608733,"answer_id":36144489,"question_id":18565798,"body_markdown":"I have this same issue. I&#39;m still debugging it right now, but it appears that it might have something to do with the default `MaxHeapSize` being set to TOTALRAM/4 or (16GB/4 = 4GB = 2^32):\r\n\r\n    (uint32) 2^32 = 0\r\n\r\nI get the following output from `-XX:PrintFlagsFinal`: \r\n\r\n    uintx MaxHeapSize                              := 0               {product}\r\n\r\nAnd also the output of `-XX:+PrintCommandLineFlags` confirms the 4G value:\r\n\r\n    -XX:InitialHeapSize=268428160 -XX:MaxHeapSize=4294850560 -XX:+PrintCommandLineFlags -XX:+UseCompressedOops -XX:-UseLargePagesIndividualAllocation -XX:+UseParallelGC\r\n\r\n","title":"JVM error when try to allocate more than 128M Xms, without specifying Xmx","body":"<p>I have this same issue. I'm still debugging it right now, but it appears that it might have something to do with the default <code>MaxHeapSize</code> being set to TOTALRAM/4 or (16GB/4 = 4GB = 2^32):</p>\n\n<pre><code>(uint32) 2^32 = 0\n</code></pre>\n\n<p>I get the following output from <code>-XX:PrintFlagsFinal</code>: </p>\n\n<pre><code>uintx MaxHeapSize                              := 0               {product}\n</code></pre>\n\n<p>And also the output of <code>-XX:+PrintCommandLineFlags</code> confirms the 4G value:</p>\n\n<pre><code>-XX:InitialHeapSize=268428160 -XX:MaxHeapSize=4294850560 -XX:+PrintCommandLineFlags -XX:+UseCompressedOops -XX:-UseLargePagesIndividualAllocation -XX:+UseParallelGC\n</code></pre>\n"}],"owner":{"account_id":3247496,"reputation":33,"user_id":2738605,"display_name":"Xiaofeng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2495,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":18565982,"answer_count":3,"score":3,"last_activity_date":1636377724,"creation_date":1378097128,"question_id":18565798,"body_markdown":"I am seeing an JVM issue when I am running my application and I simply to below java commands:\r\n\r\n    C:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -version\r\n    java version &quot;1.6.0_17&quot;\r\n    Java(TM) SE Runtime Environment (build 1.6.0_17-b04)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 14.3-b01, mixed mode)\r\n\r\n    C:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -Xms4g -version\r\n    Error occurred during initialization of VM\r\n    Incompatible minimum and maximum heap sizes specified\r\n\r\nEven Xms is set to 128M does not work:\r\n\r\n    C:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -Xms128m -version\r\n    Error occurred during initialization of VM\r\n    Incompatible minimum and maximum heap sizes specified\r\n\r\nWorks only when Xms is set to 64M or less:\r\n\r\n    C:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -Xms64m -version\r\n    java version &quot;1.6.0_17&quot;\r\n    Java(TM) SE Runtime Environment (build 1.6.0_17-b04)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 14.3-b01, mixed mode)\r\n\r\nThe interesting thing is if I specify Xmx, then it works well.\r\n\r\n    C:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -Xms4g -Xmx4g-version\r\n    java version &quot;1.6.0_17&quot;\r\n    Java(TM) SE Runtime Environment (build 1.6.0_17-b04)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 14.3-b01, mixed mode)\r\n\r\n    C:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -Xms4g -Xmx8g-version\r\n    java version &quot;1.6.0_17&quot;\r\n    Java(TM) SE Runtime Environment (build 1.6.0_17-b04)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 14.3-b01, mixed mode)\r\n\r\nMore interesting thing is: All above commands run well on another machine with same OS (Windows Server 2008 R2 Enterprise SP1) &amp; same jdk version. Physical Memory is 16GB.\r\n\r\nAny idea?","title":"JVM error when try to allocate more than 128M Xms, without specifying Xmx","body":"<p>I am seeing an JVM issue when I am running my application and I simply to below java commands:</p>\n\n<pre><code>C:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -version\njava version \"1.6.0_17\"\nJava(TM) SE Runtime Environment (build 1.6.0_17-b04)\nJava HotSpot(TM) 64-Bit Server VM (build 14.3-b01, mixed mode)\n\nC:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -Xms4g -version\nError occurred during initialization of VM\nIncompatible minimum and maximum heap sizes specified\n</code></pre>\n\n<p>Even Xms is set to 128M does not work:</p>\n\n<pre><code>C:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -Xms128m -version\nError occurred during initialization of VM\nIncompatible minimum and maximum heap sizes specified\n</code></pre>\n\n<p>Works only when Xms is set to 64M or less:</p>\n\n<pre><code>C:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -Xms64m -version\njava version \"1.6.0_17\"\nJava(TM) SE Runtime Environment (build 1.6.0_17-b04)\nJava HotSpot(TM) 64-Bit Server VM (build 14.3-b01, mixed mode)\n</code></pre>\n\n<p>The interesting thing is if I specify Xmx, then it works well.</p>\n\n<pre><code>C:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -Xms4g -Xmx4g-version\njava version \"1.6.0_17\"\nJava(TM) SE Runtime Environment (build 1.6.0_17-b04)\nJava HotSpot(TM) 64-Bit Server VM (build 14.3-b01, mixed mode)\n\nC:\\Users\\optitest&gt;I:\\j2sdk\\bin\\java -Xms4g -Xmx8g-version\njava version \"1.6.0_17\"\nJava(TM) SE Runtime Environment (build 1.6.0_17-b04)\nJava HotSpot(TM) 64-Bit Server VM (build 14.3-b01, mixed mode)\n</code></pre>\n\n<p>More interesting thing is: All above commands run well on another machine with same OS (Windows Server 2008 R2 Enterprise SP1) &amp; same jdk version. Physical Memory is 16GB.</p>\n\n<p>Any idea?</p>\n"},{"tags":["java","excel","jvm","heap-memory","jxls"],"comments":[{"owner":{"account_id":291009,"reputation":9437,"user_id":592898,"accept_rate":60,"display_name":"Frederic Close"},"score":0,"creation_date":1379074205,"post_id":18785769,"comment_id":27698881,"body_markdown":"how many xls files do you need to process ?\nYou should maybe try to monitor your JVM with some memory profiler tool like jvisualvm to investigate where the memory is going.","body":"how many xls files do you need to process ? You should maybe try to monitor your JVM with some memory profiler tool like jvisualvm to investigate where the memory is going."},{"owner":{"account_id":1826623,"reputation":31,"user_id":1659182,"display_name":"Chandu Chinthala"},"score":0,"creation_date":1379086935,"post_id":18785769,"comment_id":27707033,"body_markdown":"I have to process only one XLS file which contains 15 -20 sheets of data. I am reading the complete XLS at once using mapping file and adding end lines to each tab.","body":"I have to process only one XLS file which contains 15 -20 sheets of data. I am reading the complete XLS at once using mapping file and adding end lines to each tab."}],"answers":[{"tags":[],"owner":{"account_id":3299383,"reputation":1628,"user_id":2775900,"display_name":"superbob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379074178,"creation_date":1379074178,"answer_id":18785983,"question_id":18785769,"body_markdown":"A 5-10MB Excel file doesn&#39;t seem to be a large file to me ...\r\n\r\nAre you sure the OutOfMemoryError comes from the reading-excel-file process ?\r\n\r\nYou can try some alternate lib like [JExcelApi](http://jexcelapi.sourceforge.net/) or [POI](http://poi.apache.org/).\r\nI&#39;ve used both, I prefer POI.","title":"Java : Reading larger excel files for processing","body":"<p>A 5-10MB Excel file doesn't seem to be a large file to me ...</p>\n\n<p>Are you sure the OutOfMemoryError comes from the reading-excel-file process ?</p>\n\n<p>You can try some alternate lib like <a href=\"http://jexcelapi.sourceforge.net/\" rel=\"nofollow\">JExcelApi</a> or <a href=\"http://poi.apache.org/\" rel=\"nofollow\">POI</a>.\nI've used both, I prefer POI.</p>\n"}],"owner":{"account_id":1826623,"reputation":31,"user_id":1659182,"display_name":"Chandu Chinthala"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":626,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1636377708,"creation_date":1379073463,"question_id":18785769,"body_markdown":"We have to process large excel files around the size 5 MB - 10 MB. We used JXLS to read excel and populate the beans. \r\n\r\nWe use WebSphere 6.1 for the deployment with heap size 512 MB and max heap size of 1024 MB. OutOfMemoryError is seen while reading the excel it self. \r\n\r\nAny suggestions to overcome this?\r\n\r\nlike \r\n\r\nIs there a way to read single sheet in excel without reading complete file and process it ?","title":"Java : Reading larger excel files for processing","body":"<p>We have to process large excel files around the size 5 MB - 10 MB. We used JXLS to read excel and populate the beans. </p>\n\n<p>We use WebSphere 6.1 for the deployment with heap size 512 MB and max heap size of 1024 MB. OutOfMemoryError is seen while reading the excel it self. </p>\n\n<p>Any suggestions to overcome this?</p>\n\n<p>like </p>\n\n<p>Is there a way to read single sheet in excel without reading complete file and process it ?</p>\n"},{"tags":["java","json","classcastexception"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636377612,"post_id":69884147,"comment_id":123532630,"body_markdown":"maybe you are using two different versions of the library. have you tried looking at the dependency tree to see if there are conflicting versions somewhere?","body":"maybe you are using two different versions of the library. have you tried looking at the dependency tree to see if there are conflicting versions somewhere?"},{"owner":{"account_id":11594888,"reputation":57,"user_id":8493919,"display_name":"user3629"},"score":0,"creation_date":1636379734,"post_id":69884147,"comment_id":123533547,"body_markdown":"its dependency has different version jar","body":"its dependency has different version jar"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1636379867,"post_id":69884147,"comment_id":123533615,"body_markdown":"then there&#39;s your problem. on the dependency, apply an exclude","body":"then there&#39;s your problem. on the dependency, apply an exclude"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1636382535,"post_id":69884147,"comment_id":123534778,"body_markdown":"Yes.  This is caused by loading different versions (or the same version) of a class on two different classloaders. The Java runtime system say they are different classes.","body":"Yes.  This is caused by loading different versions (or the same version) of a class on two different classloaders. The Java runtime system say they are different classes."}],"owner":{"account_id":11594888,"reputation":57,"user_id":8493919,"display_name":"user3629"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1636382423,"answer_count":0,"score":0,"last_activity_date":1636377525,"creation_date":1636377525,"question_id":69884147,"body_markdown":"I am using json-lib-0.9.jar. in view.class i am getting inputstream from the request, setting into request and dorwarding request to Render.jsp, i am not able to understand how to fix this. could someone help me in in order to fix this issue. thanks in advance  \r\n    \r\n\r\n\r\n   *View.class*\r\n\r\n      import javax.servlet.ServletException;\r\n      import javax.servlet.http.HttpServlet;\r\n      import javax.servlet.http.HttpServletRequest;\r\n      import javax.servlet.http.HttpServletResponse;\r\n      import net.sf.json.JSONObject;\r\n         private void processRequest(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException { {                 \r\n                if (request.getInputStream() != null) {\r\n                   byte[]   bytes = IOUtils.toByteArray(request.getInputStream());    \r\n                String resString=new String(bytes, StandardCharsets.UTF_8);\r\n                JSONObject Json  = JSONObject.fromString(resString);   \r\n                request.setAttribute(&quot;META&quot;, Json.get(&quot;META&quot;))              \r\n         }\r\n          request.getRequestDispatcher(&quot;/jsp/Render.jsp&quot;).forward(request, response);\r\n     }\r\n\r\nRender.jsp\r\n\r\n    &lt;%@page\timport=&quot;net.sf.json.JSONObject&quot; %&gt;\r\n    &lt;%\r\n    JSONObject docMeta =  (JSONObject)request.getAttribute(&quot;META&quot;);%&gt;\r\nin this line its throwing\r\n\r\n    java.lang.ClassCastException\r\n    java.lang.ClassCastException: net.sf.json.JSONObject cannot be cast to net.sf.json.JSONObject\r\n\tat org.apache.jsp.jsp.Render_jsp._jspService(PreviewLander_jsp.java:134)\r\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:71)\r\n","title":"how to resolve java.lang.ClassCastException: net.sf.json.JSONObject cannot be cast to net.sf.json.JSONObject","body":"<p>I am using json-lib-0.9.jar. in view.class i am getting inputstream from the request, setting into request and dorwarding request to Render.jsp, i am not able to understand how to fix this. could someone help me in in order to fix this issue. thanks in advance</p>\n<p><em>View.class</em></p>\n<pre><code>  import javax.servlet.ServletException;\n  import javax.servlet.http.HttpServlet;\n  import javax.servlet.http.HttpServletRequest;\n  import javax.servlet.http.HttpServletResponse;\n  import net.sf.json.JSONObject;\n     private void processRequest(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException { {                 \n            if (request.getInputStream() != null) {\n               byte[]   bytes = IOUtils.toByteArray(request.getInputStream());    \n            String resString=new String(bytes, StandardCharsets.UTF_8);\n            JSONObject Json  = JSONObject.fromString(resString);   \n            request.setAttribute(&quot;META&quot;, Json.get(&quot;META&quot;))              \n     }\n      request.getRequestDispatcher(&quot;/jsp/Render.jsp&quot;).forward(request, response);\n }\n</code></pre>\n<p>Render.jsp</p>\n<pre><code>&lt;%@page import=&quot;net.sf.json.JSONObject&quot; %&gt;\n&lt;%\nJSONObject docMeta =  (JSONObject)request.getAttribute(&quot;META&quot;);%&gt;\n</code></pre>\n<p>in this line its throwing</p>\n<pre><code>java.lang.ClassCastException\njava.lang.ClassCastException: net.sf.json.JSONObject cannot be cast to net.sf.json.JSONObject\nat org.apache.jsp.jsp.Render_jsp._jspService(PreviewLander_jsp.java:134)\nat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:71)\n</code></pre>\n"},{"tags":["java","sdk","libreoffice-calc"],"comments":[{"owner":{"account_id":19282960,"reputation":2403,"user_id":14094617,"display_name":"JohnSUN"},"score":0,"creation_date":1636356007,"post_id":69876429,"comment_id":123524683,"body_markdown":"`String sString = XCell`[**.getString();**](http://www.openoffice.org/api/docs/common/ref/com/sun/star/text/XTextRange.html#getString)?","body":"<code>String sString = XCell</code><a href=\"http://www.openoffice.org/api/docs/common/ref/com/sun/star/text/XTextRange.html#getString\" rel=\"nofollow noreferrer\"><b>.getString();</b></a>?"},{"owner":{"account_id":15622969,"reputation":13,"user_id":11271330,"display_name":"Fintan"},"score":0,"creation_date":1636377574,"post_id":69876429,"comment_id":123532615,"body_markdown":"@JohnSUN Nice try!  There is no XCell.getString() method, nor an XCell.getFormulaResult() method.  Both of which would make sense.  Will try your other solution now.  Thans","body":"@JohnSUN Nice try!  There is no XCell.getString() method, nor an XCell.getFormulaResult() method.  Both of which would make sense.  Will try your other solution now.  Thans"}],"answers":[{"tags":[],"owner":{"account_id":19282960,"reputation":2403,"user_id":14094617,"display_name":"JohnSUN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1636356661,"creation_date":1636356661,"answer_id":69879928,"question_id":69876429,"body_markdown":"Try so\r\n```\r\n\t\tXCell xCell = xCellRangesAccess.getCellByPosition(....);\r\n\t\tXTextRange xTextRange = UnoRuntime.queryInterface(XTextRange.class, xCell);\r\n\t\tString sString = xTextRange.getString();\r\n```","title":"LibreOffice SDK read formula result","body":"<p>Try so</p>\n<pre><code>        XCell xCell = xCellRangesAccess.getCellByPosition(....);\n        XTextRange xTextRange = UnoRuntime.queryInterface(XTextRange.class, xCell);\n        String sString = xTextRange.getString();\n</code></pre>\n"}],"owner":{"account_id":15622969,"reputation":13,"user_id":11271330,"display_name":"Fintan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69879928,"answer_count":1,"score":1,"last_activity_date":1636377453,"creation_date":1636318256,"question_id":69876429,"body_markdown":"I am using the LibreOffice SDK to create a Java program that reads data from a Calc spreadsheet.  One of the cells has a formula in it that returns text (i.e. **not** a numeric/double value).\r\n\r\nXCell.getFormula() returns the actual formula (&quot;=I6&quot;), rather than the result (&quot;my text&quot;).\r\n\r\nI have looked at the LibreOffice SDK API, and it appears that XCell.getValue() will return the formula result, *as long as it is a number*.  There does not appear to be any other methods to return formula results.\r\n\r\nI have tried to set the cell type from Number to Text, using getFormula() and getValue().  Neither of these work.\r\n\r\nIs there a way to get the textual result of a formula using the LibreOffice SDK?\r\n\r\nMany thanks\r\n\r\nFintan","title":"LibreOffice SDK read formula result","body":"<p>I am using the LibreOffice SDK to create a Java program that reads data from a Calc spreadsheet.  One of the cells has a formula in it that returns text (i.e. <strong>not</strong> a numeric/double value).</p>\n<p>XCell.getFormula() returns the actual formula (&quot;=I6&quot;), rather than the result (&quot;my text&quot;).</p>\n<p>I have looked at the LibreOffice SDK API, and it appears that XCell.getValue() will return the formula result, <em>as long as it is a number</em>.  There does not appear to be any other methods to return formula results.</p>\n<p>I have tried to set the cell type from Number to Text, using getFormula() and getValue().  Neither of these work.</p>\n<p>Is there a way to get the textual result of a formula using the LibreOffice SDK?</p>\n<p>Many thanks</p>\n<p>Fintan</p>\n"},{"tags":["java","android","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":12368896,"reputation":24911,"user_id":9019885,"display_name":"Gary Archer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636377259,"creation_date":1636377259,"answer_id":69884078,"question_id":69879697,"body_markdown":"Have a look into invoking Google Sign In via a Chrome Custom Tab window rather than the system. browser. This will give you a more integrated UX:.\r\n\r\n```kotlin\r\nval builder = CustomTabsIntent.Builder()\r\nval customTabsIntent = builder.build()\r\ncustomTabsIntent.launchUrl(context, signInUrl)\r\n```\r\n\r\nYou can run my [Android Code Sample](https://github.com/gary-archer/oauth.mobilesample.android) to evalute this type of UX.","title":"how close google sign-in window after signing in - android app","body":"<p>Have a look into invoking Google Sign In via a Chrome Custom Tab window rather than the system. browser. This will give you a more integrated UX:.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val builder = CustomTabsIntent.Builder()\nval customTabsIntent = builder.build()\ncustomTabsIntent.launchUrl(context, signInUrl)\n</code></pre>\n<p>You can run my <a href=\"https://github.com/gary-archer/oauth.mobilesample.android\" rel=\"nofollow noreferrer\">Android Code Sample</a> to evalute this type of UX.</p>\n"}],"owner":{"account_id":22304602,"reputation":35,"user_id":16529433,"display_name":"sanjeewa priyanath"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1636377259,"creation_date":1636355225,"question_id":69879697,"body_markdown":"I have added google sign-in to my android app. google sign-in window opens in the web browser and it works. But there is no way to go back to the app after signing in. **window.close();** is not working on the android. can anyone help? \r\n\r\n","title":"how close google sign-in window after signing in - android app","body":"<p>I have added google sign-in to my android app. google sign-in window opens in the web browser and it works. But there is no way to go back to the app after signing in. <strong>window.close();</strong> is not working on the android. can anyone help?</p>\n"},{"tags":["java","complex-event-processing","esper"],"answers":[{"tags":[],"owner":{"account_id":4438616,"reputation":816,"user_id":3613754,"display_name":"user3613754"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1636376570,"creation_date":1636376570,"answer_id":69883914,"question_id":69877065,"body_markdown":"If you want to have a custom function in the from-clause you can use the &quot;method:&quot;. The docs have this described here: [Accessing Non-Relational Data via Method][1]. The Esper runtime then calls your method to get events/rows.\r\n\r\n  [1]: http://esper.espertech.com/release-8.7.0/reference-esper/html_single/index.html#joining_method","title":"Access user defined method properties on query - Esper","body":"<p>If you want to have a custom function in the from-clause you can use the &quot;method:&quot;. The docs have this described here: <a href=\"http://esper.espertech.com/release-8.7.0/reference-esper/html_single/index.html#joining_method\" rel=\"nofollow noreferrer\">Accessing Non-Relational Data via Method</a>. The Esper runtime then calls your method to get events/rows.</p>\n"}],"owner":{"account_id":18376130,"reputation":33,"user_id":13385186,"display_name":"kampia99"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69883914,"answer_count":1,"score":0,"last_activity_date":1636376570,"creation_date":1636324415,"question_id":69877065,"body_markdown":"I implemented a query where i mined data from a database but i have to change it so i mine my data from a custom function in my code. I read the documentation and added the annotation import on the configuration. The query throws that error:\r\n\r\n```\r\nFailed to resolve event type, named window or table by name &#39;path.to.my.class.customfunction&#39;\r\n```\r\n\r\nI don&#39;t know the type that my function have to return but i tried Arraylist and Hashmaps with key an integer and value a custom class and didn&#39;t work. \r\n\r\nMy final query want to look like this :\r\n```\r\nselect * from LocationEvent as loc,\r\n                   ***CustomFuntion()*** as product\r\n                        where loc.id=product.id  ;\r\n```\r\n\r\nI kept the structure i used for database connection. I don&#39;t know if there is another way to solve this. Thanks.\r\n\r\n\r\nEDIT: I managed to make call the custom function with that query :\r\n```\r\nselect  path.to.class.getProducts() as product from pattern[every timer:interval(3 sec)]\r\n\r\n```\r\nMy function right now return an ArrayList and the query returns this:\r\n```\r\n[Product{ProductID=124,.....,},Product{...}]\r\n\r\n```\r\nSo now my problem is that i can&#39;t access properties of Product on the query like products.ProductID","title":"Access user defined method properties on query - Esper","body":"<p>I implemented a query where i mined data from a database but i have to change it so i mine my data from a custom function in my code. I read the documentation and added the annotation import on the configuration. The query throws that error:</p>\n<pre><code>Failed to resolve event type, named window or table by name 'path.to.my.class.customfunction'\n</code></pre>\n<p>I don't know the type that my function have to return but i tried Arraylist and Hashmaps with key an integer and value a custom class and didn't work.</p>\n<p>My final query want to look like this :</p>\n<pre><code>select * from LocationEvent as loc,\n                   ***CustomFuntion()*** as product\n                        where loc.id=product.id  ;\n</code></pre>\n<p>I kept the structure i used for database connection. I don't know if there is another way to solve this. Thanks.</p>\n<p>EDIT: I managed to make call the custom function with that query :</p>\n<pre><code>select  path.to.class.getProducts() as product from pattern[every timer:interval(3 sec)]\n\n</code></pre>\n<p>My function right now return an ArrayList and the query returns this:</p>\n<pre><code>[Product{ProductID=124,.....,},Product{...}]\n\n</code></pre>\n<p>So now my problem is that i can't access properties of Product on the query like products.ProductID</p>\n"},{"tags":["java","file","authentication","url","download"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1636375514,"post_id":69883585,"comment_id":123531671,"body_markdown":"What did you mean by (&quot;If you would enter the url manually it would automatically download it for you. &quot;) ?  Do you mean if you try to download it by Browser?  It could be that you have a session cookie in your browser?","body":"What did you mean by (&quot;If you would enter the url manually it would automatically download it for you. &quot;) ?  Do you mean if you try to download it by Browser?  It could be that you have a session cookie in your browser?"},{"owner":{"account_id":17243647,"reputation":21,"user_id":12485413,"display_name":"Shathos"},"score":0,"creation_date":1636375825,"post_id":69883585,"comment_id":123531784,"body_markdown":"Sorry for the confusion! Yes, that is what I mean. If I would put it in the browser, it downloads it automatically.","body":"Sorry for the confusion! Yes, that is what I mean. If I would put it in the browser, it downloads it automatically."},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":1,"creation_date":1636376091,"post_id":69883585,"comment_id":123531925,"body_markdown":"You know what would help? IF you could open the Developer Toolbar in your Browser -- Go to Network --&gt; Clear everything --&gt; Paste your URL and click Enter --&gt; Copy the Request from your Network Tab.\n\nI dont know how the request looks like, so I cant help with it.  Your browser could be setting a session token automatically because you have a cookie?  Your browser could be sending authorization token because your username/password are stored?  Very hard to help!\n\n:)","body":"You know what would help? IF you could open the Developer Toolbar in your Browser -- Go to Network --&gt; Clear everything --&gt; Paste your URL and click Enter --&gt; Copy the Request from your Network Tab.  I dont know how the request looks like, so I cant help with it.  Your browser could be setting a session token automatically because you have a cookie?  Your browser could be sending authorization token because your username/password are stored?  Very hard to help!  :)"},{"owner":{"account_id":17243647,"reputation":21,"user_id":12485413,"display_name":"Shathos"},"score":0,"creation_date":1636376423,"post_id":69883585,"comment_id":123532081,"body_markdown":"Ah! I found the error! It seems I was missing something in the authentication. Our server admin told me that we need an additional domain before the username. It now works fine. Thank you for your help! :)","body":"Ah! I found the error! It seems I was missing something in the authentication. Our server admin told me that we need an additional domain before the username. It now works fine. Thank you for your help! :)"}],"answers":[{"tags":[],"owner":{"account_id":17243647,"reputation":21,"user_id":12485413,"display_name":"Shathos"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1636376469,"creation_date":1636376469,"answer_id":69883893,"question_id":69883585,"body_markdown":"Ah! I found the error! It seems I was missing something in the authentication. Our server admin told me that we need an additional domain before the username. It now works fine.","title":"JAVA: Trying to download file from URL with authentication","body":"<p>Ah! I found the error! It seems I was missing something in the authentication. Our server admin told me that we need an additional domain before the username. It now works fine.</p>\n"}],"owner":{"account_id":17243647,"reputation":21,"user_id":12485413,"display_name":"Shathos"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":600,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1636376469,"creation_date":1636375153,"question_id":69883585,"body_markdown":"I have a problem with downloading a file from a URL with authentication.\r\nI am pretty new to this topic and I need help from you guys! :(\r\n\r\nI want to download a docx document from a url. If you would enter the url manually it would automatically download it for you. In my case, the file is on our intranet.\r\n\r\nHere is what I got so far:\r\nMain class\r\n```\r\nimport java.io.BufferedInputStream;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.net.Authenticator;\r\nimport java.net.CookieHandler;\r\nimport java.net.CookieManager;\r\nimport java.net.CookiePolicy;\r\nimport java.net.URL;\r\nimport java.nio.channels.Channels;\r\nimport java.nio.channels.ReadableByteChannel;\r\n\r\npublic class JavaDownloadFileFromURL {\r\n\r\n    public static void main(String[] args) {\r\n        CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));\r\n        \r\n        Authenticator.setDefault(new CustomAuthenticator());\r\n        \r\n        String url = &quot;http://ourintranet.site.com/some/path/file.docx&quot;;\r\n        \r\n        try {\r\n            \r\n            downloadUsingStream(url, &quot;/Users/Me/Documents/test.docx&quot;);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static void downloadUsingStream(String urlStr, String file) throws IOException{\r\n        URL url = new URL(urlStr);\r\n        BufferedInputStream bis = new BufferedInputStream(url.openStream());\r\n        FileOutputStream fis = new FileOutputStream(file);\r\n        byte[] buffer = new byte[1024];\r\n        int count=0;\r\n        while((count = bis.read(buffer,0,1024)) != -1)\r\n        {\r\n            fis.write(buffer, 0, count);\r\n        }\r\n        fis.close();\r\n        bis.close();\r\n    }\r\n}\r\n```\r\nI figured out I needed an authenticator because previously I got the 401 error. So here is my authenticator:\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.net.Authenticator;\r\nimport java.net.InetAddress;\r\nimport java.net.MalformedURLException;\r\nimport java.net.PasswordAuthentication;\r\nimport java.net.URL;\r\n\r\npublic class CustomAuthenticator extends Authenticator \r\n    {\r\n  \r\n        protected PasswordAuthentication getPasswordAuthentication() \r\n        {\r\n  \r\n            String prompt = getRequestingPrompt();\r\n  \r\n            String hostname = getRequestingHost();\r\n  \r\n            InetAddress ipaddr = getRequestingSite();\r\n  \r\n            int port = getRequestingPort();\r\n  \r\n            String protocol = getRequestingProtocol();\r\n  \r\n            String scheme = getRequestingScheme();\r\n  \r\n            URL u = getRequestingURL();\r\n  \r\n            RequestorType rtype = getRequestorType();\r\n  \r\n            System.out.println(&quot;prompt:&quot; + prompt);\r\n            System.out.println(&quot;hostname:&quot; + hostname);\r\n            System.out.println(&quot;ipaddress:&quot; + ipaddr);\r\n            System.out.println(&quot;port:&quot; + port);\r\n            System.out.println(&quot;protocolo:&quot; + protocol);\r\n            System.out.println(&quot;scheme:&quot; + scheme);\r\n            System.out.println(&quot;URL:&quot; + u);\r\n            System.out.println(&quot;Requester Type:&quot; + rtype);\r\n  \r\n            String username = &quot;User123&quot;; //hardcoded user\r\n            String password = &quot;pwd123&quot;; //hardcoded pwd\r\n  \r\n            return new PasswordAuthentication(username, password.toCharArray());\r\n  \r\n        }\r\n  \r\n    }\r\n```\r\n\r\nMy problem is, that I am getting the error: ```java.net.ProtocolException: Server redirected too many  times (20)``` and at this point I tried so many things and I don&#39;t know any further.\r\n\r\nCan you guys help me out? :(\r\n\r\nThank you very much!","title":"JAVA: Trying to download file from URL with authentication","body":"<p>I have a problem with downloading a file from a URL with authentication.\nI am pretty new to this topic and I need help from you guys! :(</p>\n<p>I want to download a docx document from a url. If you would enter the url manually it would automatically download it for you. In my case, the file is on our intranet.</p>\n<p>Here is what I got so far:\nMain class</p>\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.net.Authenticator;\nimport java.net.CookieHandler;\nimport java.net.CookieManager;\nimport java.net.CookiePolicy;\nimport java.net.URL;\nimport java.nio.channels.Channels;\nimport java.nio.channels.ReadableByteChannel;\n\npublic class JavaDownloadFileFromURL {\n\n    public static void main(String[] args) {\n        CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));\n        \n        Authenticator.setDefault(new CustomAuthenticator());\n        \n        String url = &quot;http://ourintranet.site.com/some/path/file.docx&quot;;\n        \n        try {\n            \n            downloadUsingStream(url, &quot;/Users/Me/Documents/test.docx&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static void downloadUsingStream(String urlStr, String file) throws IOException{\n        URL url = new URL(urlStr);\n        BufferedInputStream bis = new BufferedInputStream(url.openStream());\n        FileOutputStream fis = new FileOutputStream(file);\n        byte[] buffer = new byte[1024];\n        int count=0;\n        while((count = bis.read(buffer,0,1024)) != -1)\n        {\n            fis.write(buffer, 0, count);\n        }\n        fis.close();\n        bis.close();\n    }\n}\n</code></pre>\n<p>I figured out I needed an authenticator because previously I got the 401 error. So here is my authenticator:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.Authenticator;\nimport java.net.InetAddress;\nimport java.net.MalformedURLException;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\n\npublic class CustomAuthenticator extends Authenticator \n    {\n  \n        protected PasswordAuthentication getPasswordAuthentication() \n        {\n  \n            String prompt = getRequestingPrompt();\n  \n            String hostname = getRequestingHost();\n  \n            InetAddress ipaddr = getRequestingSite();\n  \n            int port = getRequestingPort();\n  \n            String protocol = getRequestingProtocol();\n  \n            String scheme = getRequestingScheme();\n  \n            URL u = getRequestingURL();\n  \n            RequestorType rtype = getRequestorType();\n  \n            System.out.println(&quot;prompt:&quot; + prompt);\n            System.out.println(&quot;hostname:&quot; + hostname);\n            System.out.println(&quot;ipaddress:&quot; + ipaddr);\n            System.out.println(&quot;port:&quot; + port);\n            System.out.println(&quot;protocolo:&quot; + protocol);\n            System.out.println(&quot;scheme:&quot; + scheme);\n            System.out.println(&quot;URL:&quot; + u);\n            System.out.println(&quot;Requester Type:&quot; + rtype);\n  \n            String username = &quot;User123&quot;; //hardcoded user\n            String password = &quot;pwd123&quot;; //hardcoded pwd\n  \n            return new PasswordAuthentication(username, password.toCharArray());\n  \n        }\n  \n    }\n</code></pre>\n<p>My problem is, that I am getting the error: <code>java.net.ProtocolException: Server redirected too many  times (20)</code> and at this point I tried so many things and I don't know any further.</p>\n<p>Can you guys help me out? :(</p>\n<p>Thank you very much!</p>\n"},{"tags":["java","java-io","bytebuffer"],"comments":[{"owner":{"account_id":41525,"reputation":12415,"user_id":120753,"accept_rate":89,"display_name":"Babak Naffas"},"score":0,"creation_date":1338504533,"post_id":10842258,"comment_id":14119012,"body_markdown":"Have you read the documentation? http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#put(java.nio.ByteBuffer) The issue is in a call to .get() in aMethodThatReturnsAFilledByteBuffer()","body":"Have you read the documentation? <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#put(java.nio.ByteBuffer)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/1.5.0/docs/api/java/nio/&hellip;</a> The issue is in a call to .get() in aMethodThatReturnsAFilledByteBuffer()"}],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1338602891,"creation_date":1338602891,"answer_id":10859277,"question_id":10842258,"body_markdown":"You need to `flip()` the source buffer prior to any operating that implies a `get()` operation, such as a `write()`, or using it as the source of a `put()` operation into another buffer. You also need to `compact()` it afterwards to restore its state.","title":"How to append one ByteBuffer to other?","body":"<p>You need to <code>flip()</code> the source buffer prior to any operating that implies a <code>get()</code> operation, such as a <code>write()</code>, or using it as the source of a <code>put()</code> operation into another buffer. You also need to <code>compact()</code> it afterwards to restore its state.</p>\n"},{"tags":[],"owner":{"account_id":11171319,"reputation":2160,"user_id":8198203,"accept_rate":75,"display_name":"Frischling"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636376317,"creation_date":1552052314,"answer_id":55064399,"question_id":10842258,"body_markdown":"Here how it works:\r\n\r\n```java\r\nByteBuffer.allocate(byteBuffer.limit() + byteBuffer2.limit())\r\n          .put(byteBuffer)\r\n          .put(byteBuffer2)\r\n          .rewind()\r\n```\r\n\r\nUsing bytebuffer limit() here, since that&#39;s the point where the byteBuffers is filled to.  Using capacity() should also work, but can allocate more bytes, than you strictly need.\r\n\r\nFor limit and capacity I looked see this post: https://stackoverflow.com/questions/23148729/what-is-the-difference-between-limit-and-capacity-in-bytebuffer\r\n","title":"How to append one ByteBuffer to other?","body":"<p>Here how it works:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ByteBuffer.allocate(byteBuffer.limit() + byteBuffer2.limit())\n          .put(byteBuffer)\n          .put(byteBuffer2)\n          .rewind()\n</code></pre>\n<p>Using bytebuffer limit() here, since that's the point where the byteBuffers is filled to.  Using capacity() should also work, but can allocate more bytes, than you strictly need.</p>\n<p>For limit and capacity I looked see this post: <a href=\"https://stackoverflow.com/questions/23148729/what-is-the-difference-between-limit-and-capacity-in-bytebuffer\">What is the difference between limit and capacity in ByteBuffer?</a></p>\n"}],"owner":{"account_id":1467903,"reputation":653,"user_id":1380250,"accept_rate":56,"display_name":"mevqz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9130,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1636376317,"creation_date":1338504164,"question_id":10842258,"body_markdown":"Suppose that I have 2 ByteBuffer containing some bytes in it...\r\nHow would be the best way to append all the content of one ByteBuffer with other?\r\nI&#39;m doing this but it throws a BufferUnderFlowException:\r\n\r\n    ByteBuffer allData = ByteBuffer.allocate(999999);\r\n    ByteBuffer buff = null;\r\n    for (int i = 0; i &lt; n; i++) {\r\n    \tbuff = aMethodThatReturnsAFilledByteBuffer();\r\n    \tallData.put(buff);\r\n    }\r\n\r\nWhat I&#39;m doing wrong?\r\nThanks in advance.","title":"How to append one ByteBuffer to other?","body":"<p>Suppose that I have 2 ByteBuffer containing some bytes in it...\nHow would be the best way to append all the content of one ByteBuffer with other?\nI'm doing this but it throws a BufferUnderFlowException:</p>\n\n<pre><code>ByteBuffer allData = ByteBuffer.allocate(999999);\nByteBuffer buff = null;\nfor (int i = 0; i &lt; n; i++) {\n    buff = aMethodThatReturnsAFilledByteBuffer();\n    allData.put(buff);\n}\n</code></pre>\n\n<p>What I'm doing wrong?\nThanks in advance.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636375132,"creation_date":1636375132,"answer_id":69883576,"question_id":69883336,"body_markdown":"To hide or display a view according to a condition, create a method inside the ViewHolder class:\r\n\r\n    public void hideDisplayImageView(boolean passwordExist) {\r\n        if (passwordExist) {\r\n            lock.setVisibility(View.VISIBLE);\r\n        } else {\r\n            lock.setVisibility(View.GONE);\r\n        }\r\n    }\r\n\r\nAnd call from within the onBindViewHolder method:\r\n\r\n    String password = list.get(position).getPassword();\r\n    if(password == null) {\r\n        holder.hideDisplayImageView(true);\r\n    } else {\r\n       holder.hideDisplayImageView(false);\r\n    }","title":"How to hide the imageview in RecyclerView permanently through firebase realtime database","body":"<p>To hide or display a view according to a condition, create a method inside the ViewHolder class:</p>\n<pre><code>public void hideDisplayImageView(boolean passwordExist) {\n    if (passwordExist) {\n        lock.setVisibility(View.VISIBLE);\n    } else {\n        lock.setVisibility(View.GONE);\n    }\n}\n</code></pre>\n<p>And call from within the onBindViewHolder method:</p>\n<pre><code>String password = list.get(position).getPassword();\nif(password == null) {\n    holder.hideDisplayImageView(true);\n} else {\n   holder.hideDisplayImageView(false);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22109886,"reputation":208,"user_id":16364947,"display_name":"AshishVE"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636375196,"creation_date":1636375196,"answer_id":69883599,"question_id":69883336,"body_markdown":"You can try this  like \r\n\r\n    if(&quot;your condition for the child is true&quot;){\r\n     image.setVsisibility(View.VISIBLE)}\r\n     else{\r\n     image.setVsisibility(View.GONE)}","title":"How to hide the imageview in RecyclerView permanently through firebase realtime database","body":"<p>You can try this  like</p>\n<pre><code>if(&quot;your condition for the child is true&quot;){\n image.setVsisibility(View.VISIBLE)}\n else{\n image.setVsisibility(View.GONE)}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15284082,"reputation":1,"user_id":11027593,"display_name":"Nicholas Anyanwu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636375926,"creation_date":1636375926,"answer_id":69883756,"question_id":69883336,"body_markdown":"   \r\n\r\n&gt; Kolin\r\n\r\n    val firebaseData = list.[position].getChild()\r\n    if(!firebaseData == &quot;password&quot;)\r\n      holder.image.isVisible = false\r\n    else holder.image.isVisible = true\r\n\r\n&gt; Java\r\n\r\n    String firebaseData = list.getPosition().getChild();\r\n    if(!firebaseData.contains(&quot;password&quot;)){\r\n       holder.image.setVisibility(View.GONE)\r\n      }else{\r\n         holder.image.setVisibility(View.VISIBLE) \r\n      }","title":"How to hide the imageview in RecyclerView permanently through firebase realtime database","body":"<blockquote>\n<p>Kolin</p>\n</blockquote>\n<pre><code>val firebaseData = list.[position].getChild()\nif(!firebaseData == &quot;password&quot;)\n  holder.image.isVisible = false\nelse holder.image.isVisible = true\n</code></pre>\n<blockquote>\n<p>Java</p>\n</blockquote>\n<pre><code>String firebaseData = list.getPosition().getChild();\nif(!firebaseData.contains(&quot;password&quot;)){\n   holder.image.setVisibility(View.GONE)\n  }else{\n     holder.image.setVisibility(View.VISIBLE) \n  }\n</code></pre>\n"}],"owner":{"account_id":23253143,"reputation":21,"user_id":17340584,"display_name":"Jin Appsdev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1636375926,"creation_date":1636373894,"question_id":69883336,"body_markdown":"This is my first time with recyclerview and I need some help. I am using a firebase and I want to hide an item(imageview) from my recyclerview adapter.\r\n\r\n\r\n&gt;     public RecyclerViewHolder(View itemView, final OnItemClickListener listener) {\r\n&gt;     \t\t\tsuper(itemView);\r\n&gt;     \t\t\timage = itemView.findViewById(R.id.listrow_img1);\r\n&gt;     \t\t\ttitle = itemView.findViewById(R.id.listrow_tv1);\r\n&gt;     \t\t\tlock = itemView.findViewById(R.id.lock_accountImg);\r\n&gt;     }\r\n\r\n\r\nI want to hide the lock image if my firebase realtime database don&#39;t have a child named(&quot;password&quot;). if it has that child() the lock image will show up. Thank you in advance for those who help. ","title":"How to hide the imageview in RecyclerView permanently through firebase realtime database","body":"<p>This is my first time with recyclerview and I need some help. I am using a firebase and I want to hide an item(imageview) from my recyclerview adapter.</p>\n<blockquote>\n<pre><code>public RecyclerViewHolder(View itemView, final OnItemClickListener listener) {\n          super(itemView);\n          image = itemView.findViewById(R.id.listrow_img1);\n          title = itemView.findViewById(R.id.listrow_tv1);\n          lock = itemView.findViewById(R.id.lock_accountImg);\n}\n</code></pre>\n</blockquote>\n<p>I want to hide the lock image if my firebase realtime database don't have a child named(&quot;password&quot;). if it has that child() the lock image will show up. Thank you in advance for those who help.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":8597442,"reputation":196,"user_id":6440062,"display_name":"Parth Desai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1636375628,"creation_date":1636375628,"answer_id":69883678,"question_id":69881818,"body_markdown":"Use,  #sslSocketFactory(SSLSocketFactory, X509TrustManager)\r\n\r\n\r\n client = new okHttpClient().newBuilder().sslSocketFactory(trustCert().getSocketFactory(), (X509TrustManager) tmf.trustManagers.get(0)); ","title":"Sending HTTPS Post Request in Android/Java","body":"<p>Use,  #sslSocketFactory(SSLSocketFactory, X509TrustManager)</p>\n<p>client = new okHttpClient().newBuilder().sslSocketFactory(trustCert().getSocketFactory(), (X509TrustManager) tmf.trustManagers.get(0));</p>\n"}],"owner":{"account_id":23100028,"reputation":210,"user_id":17209576,"display_name":"NikolaStan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69883678,"answer_count":1,"score":0,"last_activity_date":1636375628,"creation_date":1636366464,"question_id":69881818,"body_markdown":"since \r\nsslSocketFactory(javax.net.ssl.SSLSocketFactory)&#39; is deprecated, what should I use instead? Thanks in regards... Deprecated. SSLSocketFactory does not expose its X509TrustManager, which is a field that OkHttp needs to build a clean certificate chain. This method instead must use reflection to extract the trust manager. Applications should prefer to call sslSocketFactory(SSLSocketFactory, X509TrustManager), which avoids such reflection.\r\nSets the socket factory used to secure HTTPS connections. If unset, the system default will be used.\r\n\r\n    try {\r\n                            client = new OkHttpClient().newBuilder()\r\n                                    .sslSocketFactory(trustCert().getSocketFactory())\r\n                                    .build();\r\n                        } catch (CertificateException e) {\r\n                            e.printStackTrace();\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        } catch (KeyStoreException e) {\r\n                            e.printStackTrace();\r\n                        } catch (NoSuchAlgorithmException e) {\r\n                            e.printStackTrace();\r\n                        } catch (KeyManagementException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        MediaType mediaType = MediaType.parse(&quot;text/plain&quot;);\r\n                        RequestBody body = new FormBody.Builder()\r\n                                .build();\r\n        \r\n                        Request request = new Request.Builder()\r\n                                .url(&quot;https://example.com&quot;)\r\n                                .method(&quot;GET&quot;, null)\r\n                                .addHeader(&quot;auth-token&quot;, token)\r\n                                .addHeader(&quot;Authorization&quot;, &quot;Bearer&quot;+&quot; &quot;+token)\r\n                                .build();\r\n                        Response response = null;\r\n                        try {\r\n                            response = client.newCall(request).execute();\r\n                            odgovor = response.body().string();\r\n                            System.out.println(odgovor);\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n    \r\n          private SSLContext trustCert() throws CertificateException,IOException, KeyStoreException,\r\n                    NoSuchAlgorithmException, KeyManagementException {\r\n                AssetManager assetManager = getAssets();\r\n                InputStream is = getApplicationContext().getResources().openRawResource(R.raw.gdig2);\r\n                CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n                Certificate ca = cf.generateCertificate(is);\r\n        \r\n                // Create a KeyStore containing our trusted CAs\r\n                String keyStoreType = KeyStore.getDefaultType();\r\n                KeyStore keyStore = KeyStore.getInstance(keyStoreType);\r\n                keyStore.load(null, null);\r\n                keyStore.setCertificateEntry(&quot;ca&quot;, ca);\r\n        \r\n                // Create a TrustManager that trusts the CAs in our KeyStore\r\n                String tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\r\n                TrustManagerFactory tmf = TrustManagerFactory.getInstance(tmfAlgorithm);\r\n                tmf.init(keyStore);\r\n        \r\n                // Create an SSLContext that uses our TrustManager\r\n                SSLContext context = SSLContext.getInstance(&quot;TLS&quot;);\r\n                context.init(null, tmf.getTrustManagers(), null);\r\n                return context;\r\n            }","title":"Sending HTTPS Post Request in Android/Java","body":"<p>since\nsslSocketFactory(javax.net.ssl.SSLSocketFactory)' is deprecated, what should I use instead? Thanks in regards... Deprecated. SSLSocketFactory does not expose its X509TrustManager, which is a field that OkHttp needs to build a clean certificate chain. This method instead must use reflection to extract the trust manager. Applications should prefer to call sslSocketFactory(SSLSocketFactory, X509TrustManager), which avoids such reflection.\nSets the socket factory used to secure HTTPS connections. If unset, the system default will be used.</p>\n<pre><code>try {\n                        client = new OkHttpClient().newBuilder()\n                                .sslSocketFactory(trustCert().getSocketFactory())\n                                .build();\n                    } catch (CertificateException e) {\n                        e.printStackTrace();\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    } catch (KeyStoreException e) {\n                        e.printStackTrace();\n                    } catch (NoSuchAlgorithmException e) {\n                        e.printStackTrace();\n                    } catch (KeyManagementException e) {\n                        e.printStackTrace();\n                    }\n                    MediaType mediaType = MediaType.parse(&quot;text/plain&quot;);\n                    RequestBody body = new FormBody.Builder()\n                            .build();\n    \n                    Request request = new Request.Builder()\n                            .url(&quot;https://example.com&quot;)\n                            .method(&quot;GET&quot;, null)\n                            .addHeader(&quot;auth-token&quot;, token)\n                            .addHeader(&quot;Authorization&quot;, &quot;Bearer&quot;+&quot; &quot;+token)\n                            .build();\n                    Response response = null;\n                    try {\n                        response = client.newCall(request).execute();\n                        odgovor = response.body().string();\n                        System.out.println(odgovor);\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n\n      private SSLContext trustCert() throws CertificateException,IOException, KeyStoreException,\n                NoSuchAlgorithmException, KeyManagementException {\n            AssetManager assetManager = getAssets();\n            InputStream is = getApplicationContext().getResources().openRawResource(R.raw.gdig2);\n            CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\n            Certificate ca = cf.generateCertificate(is);\n    \n            // Create a KeyStore containing our trusted CAs\n            String keyStoreType = KeyStore.getDefaultType();\n            KeyStore keyStore = KeyStore.getInstance(keyStoreType);\n            keyStore.load(null, null);\n            keyStore.setCertificateEntry(&quot;ca&quot;, ca);\n    \n            // Create a TrustManager that trusts the CAs in our KeyStore\n            String tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\n            TrustManagerFactory tmf = TrustManagerFactory.getInstance(tmfAlgorithm);\n            tmf.init(keyStore);\n    \n            // Create an SSLContext that uses our TrustManager\n            SSLContext context = SSLContext.getInstance(&quot;TLS&quot;);\n            context.init(null, tmf.getTrustManagers(), null);\n            return context;\n        }\n</code></pre>\n"},{"tags":["java","quartz"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1635420396,"post_id":69753128,"comment_id":123296397,"body_markdown":"Why should you want to schedule a task on a date which was set 9 years in the past? Do you want to build a time machine?","body":"Why should you want to schedule a task on a date which was set 9 years in the past? Do you want to build a time machine?"},{"owner":{"account_id":23169871,"reputation":11,"user_id":17269263,"display_name":"Sejal"},"score":0,"creation_date":1635420528,"post_id":69753128,"comment_id":123296452,"body_markdown":"Sorry it was just an example...i have updated the question","body":"Sorry it was just an example...i have updated the question"},{"owner":{"account_id":1546031,"reputation":1931,"user_id":1439560,"display_name":"Huy Nguyen"},"score":0,"creation_date":1635420811,"post_id":69753128,"comment_id":123296571,"body_markdown":"https://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html, have you tried with above tutorial?","body":"<a href=\"https://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html\" rel=\"nofollow noreferrer\">quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/&hellip;</a>, have you tried with above tutorial?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1635420816,"post_id":69753128,"comment_id":123296576,"body_markdown":"hi &amp; welcome! problem: &quot;Twice in a week&quot; and &quot;On these particular days of week&quot; (3 + etc.?) possible: &quot;twice a week&quot; and (e.g.) &quot;`MON,WED`&quot;","body":"hi &amp; welcome! problem: &quot;Twice in a week&quot; and &quot;On these particular days of week&quot; (3 + etc.?) possible: &quot;twice a week&quot; and (e.g.) &quot;<code>MON,WED</code>&quot;"},{"owner":{"account_id":23169871,"reputation":11,"user_id":17269263,"display_name":"Sejal"},"score":1,"creation_date":1635421170,"post_id":69753128,"comment_id":123296704,"body_markdown":"sorry it is once in every 2 week","body":"sorry it is once in every 2 week"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1635421641,"post_id":69753128,"comment_id":123296885,"body_markdown":"How do you combine `once in every 2 weeks` with `on days of week Monday, Tuesday, Friday`? Do you want to schedule it on every Monday, Tuesday and Friday every two weeks?","body":"How do you combine <code>once in every 2 weeks</code> with <code>on days of week Monday, Tuesday, Friday</code>? Do you want to schedule it on every Monday, Tuesday and Friday every two weeks?"},{"owner":{"account_id":23169871,"reputation":11,"user_id":17269263,"display_name":"Sejal"},"score":0,"creation_date":1635425831,"post_id":69753128,"comment_id":123298731,"body_markdown":"yes i want to schedule it once in every 2 week for mon, tue, fri starting at the given date and time","body":"yes i want to schedule it once in every 2 week for mon, tue, fri starting at the given date and time"},{"owner":{"account_id":23169871,"reputation":11,"user_id":17269263,"display_name":"Sejal"},"score":0,"creation_date":1635426884,"post_id":69753128,"comment_id":123299289,"body_markdown":"can anyone respond as soon as possible ?","body":"can anyone respond as soon as possible ?"},{"owner":{"account_id":23169871,"reputation":11,"user_id":17269263,"display_name":"Sejal"},"score":0,"creation_date":1635426981,"post_id":69753128,"comment_id":123299344,"body_markdown":"@huy Detailed information is not available in link on how to configure weekly scheduler with above mentioned conditions","body":"@huy Detailed information is not available in link on how to configure weekly scheduler with above mentioned conditions"}],"answers":[{"tags":[],"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636375435,"creation_date":1636375435,"answer_id":69883633,"question_id":69753128,"body_markdown":"You could use this cron scheduling `0 8 * * 1,2,5`.\r\n\r\nIt triggers at minute `0` at hour `8`, at every day of the month and at every month, but only at the weekday `1,2 and 5` which are Monday, Tuesday and Friday respectively.\r\n\r\nAnd for the biweekly scheduling i would count the weeks since 2021-01-25 and check if `weeks % 2 == 0` and return from the task prematurely. Analogues for the starting date.","title":"Creating a weekly Trigger which execute on particular days of week (Quartz Scheduler API)","body":"<p>You could use this cron scheduling <code>0 8 * * 1,2,5</code>.</p>\n<p>It triggers at minute <code>0</code> at hour <code>8</code>, at every day of the month and at every month, but only at the weekday <code>1,2 and 5</code> which are Monday, Tuesday and Friday respectively.</p>\n<p>And for the biweekly scheduling i would count the weeks since 2021-01-25 and check if <code>weeks % 2 == 0</code> and return from the task prematurely. Analogues for the starting date.</p>\n"}],"owner":{"account_id":23169871,"reputation":11,"user_id":17269263,"display_name":"Sejal"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1636375435,"creation_date":1635419836,"question_id":69753128,"body_markdown":"I am trying to build a Trigger in Quartz Scheduler API 2.3.0 version which should get executed with the following criteria.\r\n\r\n1.Start on particular date (Jan 25, 2021)\r\n2.Start at predefined time (08.00.00 AM)\r\n3.Once in every 2 weeks\r\n4.On these particular days of week (Monday,Tuesday,Friday etc)\r\n\r\nbut I am confused how I should add the condition to execute this trigger on particular days of week","title":"Creating a weekly Trigger which execute on particular days of week (Quartz Scheduler API)","body":"<p>I am trying to build a Trigger in Quartz Scheduler API 2.3.0 version which should get executed with the following criteria.</p>\n<p>1.Start on particular date (Jan 25, 2021)\n2.Start at predefined time (08.00.00 AM)\n3.Once in every 2 weeks\n4.On these particular days of week (Monday,Tuesday,Friday etc)</p>\n<p>but I am confused how I should add the condition to execute this trigger on particular days of week</p>\n"},{"tags":["java","servlet-3.0"],"answers":[{"tags":[],"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636374546,"creation_date":1636318203,"answer_id":69876421,"question_id":69875699,"body_markdown":"The &lt;absolute-ordering&gt; element specifies which web fragment JARs (according to the names in their WEB-INF/web-fragment.xml files) have to be scanned for SCIs, fragments and annotations. An empty &lt;absolute-ordering/&gt; element configures that none are to be scanned.\r\n[https://cwiki.apache.org/confluence/display/TOMCAT/HowTo+FasterStartUp#:~:text=The%20element,none%20are%20to%20be%20scanned.][1]\r\n\r\n\r\n  [1]: https://cwiki.apache.org/confluence/display/TOMCAT/HowTo+FasterStartUp#:~:text=The%20element,none%20are%20to%20be%20scanned.\r\n\r\nBut I personally think it is better to remove spring-web-X.X.X-sources.jar if you are planning to fix your issues with absolute-ordering tag\r\nhttps://stackoverflow.com/questions/69486856/tomcat-server-wont-start-when-following-spring-mvc-guide/69487628#69487628","title":"what is the use of &lt;absolute-ordering&gt; tage in web.xml in spring mvc","body":"<p>The  element specifies which web fragment JARs (according to the names in their WEB-INF/web-fragment.xml files) have to be scanned for SCIs, fragments and annotations. An empty  element configures that none are to be scanned.\n<a href=\"https://cwiki.apache.org/confluence/display/TOMCAT/HowTo+FasterStartUp#:%7E:text=The%20element,none%20are%20to%20be%20scanned.\" rel=\"nofollow noreferrer\">https://cwiki.apache.org/confluence/display/TOMCAT/HowTo+FasterStartUp#:~:text=The%20element,none%20are%20to%20be%20scanned.</a></p>\n<p>But I personally think it is better to remove spring-web-X.X.X-sources.jar if you are planning to fix your issues with absolute-ordering tag\n<a href=\"https://stackoverflow.com/questions/69486856/tomcat-server-wont-start-when-following-spring-mvc-guide/69487628#69487628\">Tomcat Server Won&#39;t Start When Following Spring MVC Guide</a></p>\n"}],"owner":{"account_id":16662660,"reputation":127,"user_id":12042237,"display_name":"javaway"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3444,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1636374546,"creation_date":1636312058,"question_id":69875699,"body_markdown":"      &lt;absolute-ordering/&gt;\r\n\r\n   \r\nwhat is the use of the `absolute-ordering` tag in `web.xml` in a Java web application.\r\n","title":"what is the use of &lt;absolute-ordering&gt; tage in web.xml in spring mvc","body":"<pre><code>  &lt;absolute-ordering/&gt;\n</code></pre>\n<p>what is the use of the <code>absolute-ordering</code> tag in <code>web.xml</code> in a Java web application.</p>\n"},{"tags":["java","android","random"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1636373408,"post_id":69883217,"comment_id":123530819,"body_markdown":"have you debugged your code?","body":"have you debugged your code?"},{"owner":{"account_id":13909926,"reputation":81,"user_id":10043377,"display_name":"DannyRoy"},"score":0,"creation_date":1636373511,"post_id":69883217,"comment_id":123530865,"body_markdown":"Yes, the `turnAround` does not get called in debugging","body":"Yes, the <code>turnAround</code> does not get called in debugging"},{"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"score":2,"creation_date":1636373679,"post_id":69883217,"comment_id":123530923,"body_markdown":"you never save the value to sharedpreferences, only read, which will be 0 every time on every click therefore","body":"you never save the value to sharedpreferences, only read, which will be 0 every time on every click therefore"},{"owner":{"account_id":13909926,"reputation":81,"user_id":10043377,"display_name":"DannyRoy"},"score":0,"creation_date":1636374176,"post_id":69883217,"comment_id":123531140,"body_markdown":"@IvoBeckers I am used to iOS, whereabouts can I add the value to save?","body":"@IvoBeckers I am used to iOS, whereabouts can I add the value to save?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1636374335,"post_id":69883217,"comment_id":123531200,"body_markdown":"@DannyRoy if it doesn&#39;t run, how do you expect it to be executed?","body":"@DannyRoy if it doesn&#39;t run, how do you expect it to be executed?"},{"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"score":1,"creation_date":1636374425,"post_id":69883217,"comment_id":123531228,"body_markdown":"I&#39;d suggest you to read the documentation about sharedpreferences https://developer.android.com/training/data-storage/shared-preferences","body":"I&#39;d suggest you to read the documentation about sharedpreferences <a href=\"https://developer.android.com/training/data-storage/shared-preferences\" rel=\"nofollow noreferrer\">developer.android.com/training/data-storage/shared-preferenc&zwnj;&#8203;es</a>"},{"owner":{"account_id":13909926,"reputation":81,"user_id":10043377,"display_name":"DannyRoy"},"score":0,"creation_date":1636374807,"post_id":69883217,"comment_id":123531389,"body_markdown":"Thank you, I had not seen that small - but crucial detail! Still getting my head around java but appreciate it thank you.","body":"Thank you, I had not seen that small - but crucial detail! Still getting my head around java but appreciate it thank you."}],"answers":[{"tags":[],"owner":{"account_id":23244923,"reputation":89,"user_id":17333641,"display_name":"Muhammad Riaz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1636374483,"creation_date":1636374483,"answer_id":69883462,"question_id":69883217,"body_markdown":"    **According to your question your code should be like this**\r\n\r\n    private SharedPreferences sharedpreferences;\r\n    private SharedPreferences.Editor editor;\r\n    private static final String MyPREFERENCES = &quot;nShownLobby&quot;;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        sharedpreferences = getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);\r\n        editor = sharedpreferences.edit();\r\n\r\n        changeTextButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v){\r\n\r\n\r\n                int nb_shown_lobby = sharedpreferences.getInt(&quot;nShownLobby&quot;, 0);\r\n                if ((nb_shown_lobby % 20) == 0) {\r\n                    turnAround();\r\n                }\r\n\r\n                nb_shown_lobby += 1;\r\n                editor.putInt(&quot;nShownLobby&quot;, nb_shown_lobby);\r\n                editor.commit();\r\n\r\n                int random = (int) (Math.random() * manyDifferentStrings.length);\r\n                if (random == oldVaue) {\r\n                    random = (int) (Math.random() * manyDifferentStrings.length);\r\n                }\r\n                changingText.setText(manyDifferentStrings[random]);\r\n                oldVaue = random;\r\n\r\n                try {\r\n                    mySound.start();\r\n                } catch (NullPointerException e) {\r\n                    mySound = MediaPlayer.create(MainActivity.this, R.raw.sound);\r\n\r\n                }\r\n\r\n            }\r\n\r\n        });\r\n\r\n\r\n    }\r\n \r\n    //created this in activity, not in the button onclick\r\n    private void turnAround() {\r\n\r\n        //Do something here\r\n        Log.i(&quot;Do Something &quot;, &quot;&quot;);\r\n    }","title":"Java code to show action on x amount of presses?","body":"<pre><code>**According to your question your code should be like this**\n\nprivate SharedPreferences sharedpreferences;\nprivate SharedPreferences.Editor editor;\nprivate static final String MyPREFERENCES = &quot;nShownLobby&quot;;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    sharedpreferences = getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);\n    editor = sharedpreferences.edit();\n\n    changeTextButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v){\n\n\n            int nb_shown_lobby = sharedpreferences.getInt(&quot;nShownLobby&quot;, 0);\n            if ((nb_shown_lobby % 20) == 0) {\n                turnAround();\n            }\n\n            nb_shown_lobby += 1;\n            editor.putInt(&quot;nShownLobby&quot;, nb_shown_lobby);\n            editor.commit();\n\n            int random = (int) (Math.random() * manyDifferentStrings.length);\n            if (random == oldVaue) {\n                random = (int) (Math.random() * manyDifferentStrings.length);\n            }\n            changingText.setText(manyDifferentStrings[random]);\n            oldVaue = random;\n\n            try {\n                mySound.start();\n            } catch (NullPointerException e) {\n                mySound = MediaPlayer.create(MainActivity.this, R.raw.sound);\n\n            }\n\n        }\n\n    });\n\n\n}\n\n//created this in activity, not in the button onclick\nprivate void turnAround() {\n\n    //Do something here\n    Log.i(&quot;Do Something &quot;, &quot;&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":13909926,"reputation":81,"user_id":10043377,"display_name":"DannyRoy"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69883462,"answer_count":1,"score":0,"last_activity_date":1636374483,"creation_date":1636373335,"question_id":69883217,"body_markdown":"I have an iOS app that I worked on some time ago, and the function it uses I like, and would like to somehow get it to work on some Android code I have.\r\n\r\nAt the top of my `MainActivity` I have\r\n\r\n\tSharedPreferences sharedpreferences;\r\n\r\n\tpublic static final String MyPREFERENCES = &quot;nShownLobby&quot;;\r\n\t\r\non my `onCreate` I have\r\n\r\n\tsharedpreferences = getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);\r\n\t\r\nAnd I am calling this method\r\n\r\n    changeTextButton.setOnClickListener(new View.OnClickListener() {\r\n    \t\r\n    \t@Override\r\n    \tpublic void onClick(View v){\r\n    \t\tlong nb_shown_lobby = PreferenceManager.getDefaultSharedPreferences(MainActivity.this).getLong(&quot;nShownLobby&quot;, 0); \r\n    \t\t++nb_shown_lobby; \r\n    \t\tif ((nb_shown_lobby % 20) == 0) { \r\n    \t\t\tthis.turnAround(); \r\n    \t\t}\r\n    \t\tint random = (int) (Math.random() * manyDifferentStrings.length);\r\n    \t\tif (random == oldVaue) {\r\n    \t\t\trandom = (int) (Math.random() * manyDifferentStrings.length);\r\n    \t\t}\r\n    \t\tchangingText.setText(manyDifferentStrings[random]);\r\n    \t\toldVaue = random;\r\n    \t\ttry {\r\n    \t\t\tmySound.start();\r\n    \t\t} catch (NullPointerException e) {\r\n    \t\t\tmySound = MediaPlayer.create(MainActivity.this, R.raw.sound);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate void turnAround() {\r\n    \t\t//Do something here\r\n    \t\tLog.i(&quot;Do Something &quot;, &quot;&quot;);\r\n    \t}\r\n    });\r\n\r\nThe intention is that after every 20 presses, the `turnAround()` method is called but it does not... It just gets ignored - I am guessing I have missed something?\r\n\r\n","title":"Java code to show action on x amount of presses?","body":"<p>I have an iOS app that I worked on some time ago, and the function it uses I like, and would like to somehow get it to work on some Android code I have.</p>\n<p>At the top of my <code>MainActivity</code> I have</p>\n<pre><code>SharedPreferences sharedpreferences;\n\npublic static final String MyPREFERENCES = &quot;nShownLobby&quot;;\n</code></pre>\n<p>on my <code>onCreate</code> I have</p>\n<pre><code>sharedpreferences = getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);\n</code></pre>\n<p>And I am calling this method</p>\n<pre><code>changeTextButton.setOnClickListener(new View.OnClickListener() {\n    \n    @Override\n    public void onClick(View v){\n        long nb_shown_lobby = PreferenceManager.getDefaultSharedPreferences(MainActivity.this).getLong(&quot;nShownLobby&quot;, 0); \n        ++nb_shown_lobby; \n        if ((nb_shown_lobby % 20) == 0) { \n            this.turnAround(); \n        }\n        int random = (int) (Math.random() * manyDifferentStrings.length);\n        if (random == oldVaue) {\n            random = (int) (Math.random() * manyDifferentStrings.length);\n        }\n        changingText.setText(manyDifferentStrings[random]);\n        oldVaue = random;\n        try {\n            mySound.start();\n        } catch (NullPointerException e) {\n            mySound = MediaPlayer.create(MainActivity.this, R.raw.sound);\n        }\n    }\n\n    private void turnAround() {\n        //Do something here\n        Log.i(&quot;Do Something &quot;, &quot;&quot;);\n    }\n});\n</code></pre>\n<p>The intention is that after every 20 presses, the <code>turnAround()</code> method is called but it does not... It just gets ignored - I am guessing I have missed something?</p>\n"},{"tags":["java","arrays","byte","bit","loops"],"comments":[{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1245783821,"post_id":1034473,"comment_id":844911,"body_markdown":"You can&#39;t. At least not directly. What are you trying to do, perhaps there is a better way. A byte array holds a collection of bytes.","body":"You can&#39;t. At least not directly. What are you trying to do, perhaps there is a better way. A byte array holds a collection of bytes."},{"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":20,"creation_date":1245783921,"post_id":1034473,"comment_id":844924,"body_markdown":"And once again, I wish that java.util.BitSet had a byte[] constructor.","body":"And once again, I wish that java.util.BitSet had a byte[] constructor."},{"owner":{"account_id":41594,"reputation":152717,"user_id":120955,"accept_rate":88,"display_name":"StriplingWarrior"},"score":0,"creation_date":1245785491,"post_id":1034473,"comment_id":845101,"body_markdown":"It can be done.  I&#39;d vote you go with Jon Skeet&#39;s method.  However, in most cases when working with bits, there are some fancy bitwise operators that can make your task go much faster.  If you tell us what you&#39;re trying to do, exactly, we might help you find a better way than iterating the bits.","body":"It can be done.  I&#39;d vote you go with Jon Skeet&#39;s method.  However, in most cases when working with bits, there are some fancy bitwise operators that can make your task go much faster.  If you tell us what you&#39;re trying to do, exactly, we might help you find a better way than iterating the bits."},{"owner":{"account_id":32399,"reputation":49187,"user_id":89904,"accept_rate":65,"display_name":"Hamza Yerlikaya"},"score":0,"creation_date":1245789215,"post_id":1034473,"comment_id":845496,"body_markdown":"I am trying to interpret the bitfield message of bittorrent protocol each bit represents a a piece&#39;s availability. i need to iterate and determine which peer has which pieces available.","body":"I am trying to interpret the bitfield message of bittorrent protocol each bit represents a a piece&#39;s availability. i need to iterate and determine which peer has which pieces available."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":43,"is_accepted":true,"score":43,"last_activity_date":1245783739,"creation_date":1245783739,"answer_id":1034501,"question_id":1034473,"body_markdown":"You&#39;d have to write your own implementation of `Iterable&lt;Boolean&gt;` which took an array of bytes, and then created `Iterator&lt;Boolean&gt;` values which remembered the current index into the byte array *and* the current index within the current byte. Then a utility method like this would come in handy:\r\n\r\n    private static Boolean isBitSet(byte b, int bit)\r\n    {\r\n        return (b &amp; (1 &lt;&lt; bit)) != 0;\r\n    }\r\n\r\n(where `bit` ranges from 0 to 7). Each time `next()` was called you&#39;d have to increment your bit index within the current byte, and increment the byte index within byte array if you reached &quot;the 9th bit&quot;.\r\n\r\nIt&#39;s not really *hard* - but a bit of a pain. Let me know if you&#39;d like a sample implementation...","title":"Java Iterate Bits in Byte Array","body":"<p>You'd have to write your own implementation of <code>Iterable&lt;Boolean&gt;</code> which took an array of bytes, and then created <code>Iterator&lt;Boolean&gt;</code> values which remembered the current index into the byte array <em>and</em> the current index within the current byte. Then a utility method like this would come in handy:</p>\n\n<pre><code>private static Boolean isBitSet(byte b, int bit)\n{\n    return (b &amp; (1 &lt;&lt; bit)) != 0;\n}\n</code></pre>\n\n<p>(where <code>bit</code> ranges from 0 to 7). Each time <code>next()</code> was called you'd have to increment your bit index within the current byte, and increment the byte index within byte array if you reached \"the 9th bit\".</p>\n\n<p>It's not really <em>hard</em> - but a bit of a pain. Let me know if you'd like a sample implementation...</p>\n"},{"tags":[],"owner":{"account_id":4673,"reputation":8282,"user_id":7141,"accept_rate":100,"display_name":"HasaniH"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1245783755,"creation_date":1245783755,"answer_id":1034504,"question_id":1034473,"body_markdown":"You can iterate through the byte array, and for each byte use the bitwise operators to iterate though its bits.","title":"Java Iterate Bits in Byte Array","body":"<p>You can iterate through the byte array, and for each byte use the bitwise operators to iterate though its bits.</p>\n"},{"tags":[],"owner":{"account_id":13858,"reputation":39079,"user_id":28053,"accept_rate":100,"display_name":"Paul Sonier"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1245785799,"creation_date":1245783850,"answer_id":1034513,"question_id":1034473,"body_markdown":"Original:\r\n\r\n    for (int i = 0; i &lt; byteArray.Length; i++)\r\n    {\r\n       byte b = byteArray[i];\r\n       byte mask = 0x01;\r\n       for (int j = 0; j &lt; 8; j++)\r\n       {\r\n          bool value = b &amp; mask;\r\n          mask &lt;&lt; 1;\r\n       }\r\n    }\r\n\r\nOr using Java idioms\r\n\r\n    for (byte b : byteArray ) {\r\n      for ( int mask = 0x01; mask != 0x100; mask &lt;&lt;= 1 ) {\r\n          boolean value = ( b &amp; mask ) != 0;\r\n      }\r\n    }\r\n","title":"Java Iterate Bits in Byte Array","body":"<p>Original:</p>\n\n<pre><code>for (int i = 0; i &lt; byteArray.Length; i++)\n{\n   byte b = byteArray[i];\n   byte mask = 0x01;\n   for (int j = 0; j &lt; 8; j++)\n   {\n      bool value = b &amp; mask;\n      mask &lt;&lt; 1;\n   }\n}\n</code></pre>\n\n<p>Or using Java idioms</p>\n\n<pre><code>for (byte b : byteArray ) {\n  for ( int mask = 0x01; mask != 0x100; mask &lt;&lt;= 1 ) {\n      boolean value = ( b &amp; mask ) != 0;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1245784459,"creation_date":1245784459,"answer_id":1034558,"question_id":1034473,"body_markdown":"I needed some bit streaming in my application. [Here][1] you can find my BitArray implementation. It is not a real iterator pattern but you can ask for 1-32 bits from the array in a streaming way. There is also an alternate implementation called BitReader later in the file.\r\n\r\n\r\n  [1]: http://code.google.com/p/open-ig/source/browse/trunk/open-ig/src/hu/openig/utils/IOUtils.java","title":"Java Iterate Bits in Byte Array","body":"<p>I needed some bit streaming in my application. <a href=\"http://code.google.com/p/open-ig/source/browse/trunk/open-ig/src/hu/openig/utils/IOUtils.java\" rel=\"nofollow noreferrer\">Here</a> you can find my BitArray implementation. It is not a real iterator pattern but you can ask for 1-32 bits from the array in a streaming way. There is also an alternate implementation called BitReader later in the file.</p>\n"},{"tags":[],"owner":{"account_id":11160,"reputation":6376,"user_id":21368,"display_name":"the.duckman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1245784783,"creation_date":1245784783,"answer_id":1034590,"question_id":1034473,"body_markdown":"An alternative would be to use a BitInputStream like the one you can find [here][1] and write code like this:\r\n\r\n    BitInputStream bin = new BitInputStream(new ByteArrayInputStream(bytes));\r\n        while(true){\r\n            int bit = bin.readBit();\r\n            // do something\r\n        }\r\n    bin.close();\r\n\r\n(Note: Code doesn&#39;t contain EOFException or IOException handling for brevity.)\r\n\r\nBut I&#39;d go with Jon Skeets variant and do it on my own.\r\n\r\n  [1]: http://wiki.forum.nokia.com/index.php/Bit_Input/Output_Stream_utility_classes_for_efficient_data_transfer","title":"Java Iterate Bits in Byte Array","body":"<p>An alternative would be to use a BitInputStream like the one you can find <a href=\"http://wiki.forum.nokia.com/index.php/Bit_Input/Output_Stream_utility_classes_for_efficient_data_transfer\" rel=\"nofollow noreferrer\">here</a> and write code like this:</p>\n\n<pre><code>BitInputStream bin = new BitInputStream(new ByteArrayInputStream(bytes));\n    while(true){\n        int bit = bin.readBit();\n        // do something\n    }\nbin.close();\n</code></pre>\n\n<p>(Note: Code doesn't contain EOFException or IOException handling for brevity.)</p>\n\n<p>But I'd go with Jon Skeets variant and do it on my own.</p>\n"},{"tags":[],"owner":{"account_id":41696,"reputation":4770,"user_id":121275,"accept_rate":50,"display_name":"amischiefr"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1245785133,"creation_date":1245785133,"answer_id":1034612,"question_id":1034473,"body_markdown":"I know, probably not the &quot;coolest&quot; way to do it, but you can extract each bit with the following code.\r\n\r\n        int n = 156;\r\n\t\t\r\n\tString bin = Integer.toBinaryString(n);\r\n\tSystem.out.println(bin);\r\n\t\t\r\n\tchar arr[] = bin.toCharArray();\r\n\tfor(int i = 0; i &lt; arr.length; ++i) {\r\n\t\tSystem.out.println(&quot;Bit number &quot; + (i + 1) + &quot; = &quot; + arr[i]);\r\n\t}\r\n\r\n10011100\r\n\r\nBit number 1 = 1\r\n\r\nBit number 2 = 0\r\n\r\nBit number 3 = 0\r\n\r\nBit number 4 = 1\r\n\r\nBit number 5 = 1\r\n\r\nBit number 6 = 1\r\n\r\nBit number 7 = 0\r\n\r\nBit number 8 = 0","title":"Java Iterate Bits in Byte Array","body":"<p>I know, probably not the \"coolest\" way to do it, but you can extract each bit with the following code.</p>\n\n<pre><code>    int n = 156;\n\nString bin = Integer.toBinaryString(n);\nSystem.out.println(bin);\n\nchar arr[] = bin.toCharArray();\nfor(int i = 0; i &lt; arr.length; ++i) {\n    System.out.println(\"Bit number \" + (i + 1) + \" = \" + arr[i]);\n}\n</code></pre>\n\n<p>10011100</p>\n\n<p>Bit number 1 = 1</p>\n\n<p>Bit number 2 = 0</p>\n\n<p>Bit number 3 = 0</p>\n\n<p>Bit number 4 = 1</p>\n\n<p>Bit number 5 = 1</p>\n\n<p>Bit number 6 = 1</p>\n\n<p>Bit number 7 = 0</p>\n\n<p>Bit number 8 = 0</p>\n"},{"tags":[],"owner":{"account_id":20130,"reputation":279845,"user_id":47773,"accept_rate":52,"display_name":"Matthew Flaschen"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1352389323,"creation_date":1245787958,"answer_id":1034888,"question_id":1034473,"body_markdown":"\r\n    public class ByteArrayBitIterable implements Iterable&lt;Boolean&gt; {\r\n        private final byte[] array;\r\n\r\n        public ByteArrayBitIterable(byte[] array) {\r\n            this.array = array;\r\n        }\r\n\r\n        public Iterator&lt;Boolean&gt; iterator() {\r\n            return new Iterator&lt;Boolean&gt;() {\r\n                private int bitIndex = 0;\r\n                private int arrayIndex = 0;\r\n    \r\n                public boolean hasNext() {\r\n                    return (arrayIndex &lt; array.length) &amp;&amp; (bitIndex &lt; 8);\r\n    \t        }\r\n    \r\n    \t        public Boolean next() {\r\n                    Boolean val = (array[arrayIndex] &gt;&gt; (7 - bitIndex) &amp; 1) == 1;\r\n                    bitIndex++;\r\n                    if (bitIndex == 8) {\r\n                        bitIndex = 0;\r\n                        arrayIndex++;\r\n                    }\r\n                    return val;\r\n                }\r\n    \r\n    \t        public void remove() {\r\n                    throw new UnsupportedOperationException();\r\n                }\r\n            };\r\n        }\r\n\r\n        public static void main(String[] a) {\r\n            ByteArrayBitIterable test = new ByteArrayBitIterable(\r\n    \t\t\t\t   new byte[]{(byte)0xAA, (byte)0xAA});\r\n            for (boolean b : test)\r\n                System.out.println(b);\r\n        }\r\n    }","title":"Java Iterate Bits in Byte Array","body":"<pre><code>public class ByteArrayBitIterable implements Iterable&lt;Boolean&gt; {\n    private final byte[] array;\n\n    public ByteArrayBitIterable(byte[] array) {\n        this.array = array;\n    }\n\n    public Iterator&lt;Boolean&gt; iterator() {\n        return new Iterator&lt;Boolean&gt;() {\n            private int bitIndex = 0;\n            private int arrayIndex = 0;\n\n            public boolean hasNext() {\n                return (arrayIndex &lt; array.length) &amp;&amp; (bitIndex &lt; 8);\n            }\n\n            public Boolean next() {\n                Boolean val = (array[arrayIndex] &gt;&gt; (7 - bitIndex) &amp; 1) == 1;\n                bitIndex++;\n                if (bitIndex == 8) {\n                    bitIndex = 0;\n                    arrayIndex++;\n                }\n                return val;\n            }\n\n            public void remove() {\n                throw new UnsupportedOperationException();\n            }\n        };\n    }\n\n    public static void main(String[] a) {\n        ByteArrayBitIterable test = new ByteArrayBitIterable(\n                   new byte[]{(byte)0xAA, (byte)0xAA});\n        for (boolean b : test)\n            System.out.println(b);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636374292,"creation_date":1636374292,"answer_id":69883414,"question_id":1034473,"body_markdown":"Alternatively, you can use [`BitSet`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html) for this:\r\n\r\n```java\r\nbyte[] bytes=...;\r\nBitSet bitSet=BitSet.valueOf(bytes);\r\nfor(int i=0;i&lt;bitSet.length();i++){\r\n    boolean bit=bitSet.get(i);\r\n    //use your bit\r\n} \r\n```","title":"Java Iterate Bits in Byte Array","body":"<p>Alternatively, you can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html\" rel=\"nofollow noreferrer\"><code>BitSet</code></a> for this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] bytes=...;\nBitSet bitSet=BitSet.valueOf(bytes);\nfor(int i=0;i&lt;bitSet.length();i++){\n    boolean bit=bitSet.get(i);\n    //use your bit\n} \n</code></pre>\n"}],"owner":{"account_id":32399,"reputation":49187,"user_id":89904,"accept_rate":65,"display_name":"Hamza Yerlikaya"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53098,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":1034501,"answer_count":8,"score":36,"last_activity_date":1636374292,"creation_date":1245783487,"question_id":1034473,"body_markdown":"How can i iterate bits in a byte array?","title":"Java Iterate Bits in Byte Array","body":"<p>How can i iterate bits in a byte array?</p>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"score":0,"creation_date":1636365903,"post_id":69881408,"comment_id":123527987,"body_markdown":"What framework do you use for injection (Spring ?), you need to annotate Demo class with @Autowired in constructor. And add annotiate test class with @RunWith(MockitoJUnitRunner.class)","body":"What framework do you use for injection (Spring ?), you need to annotate Demo class with @Autowired in constructor. And add annotiate test class with @RunWith(MockitoJUnitRunner.class)"},{"owner":{"account_id":8782479,"reputation":105,"user_id":6565690,"display_name":"Khan Hafizur Rahman"},"score":0,"creation_date":1636366257,"post_id":69881408,"comment_id":123528129,"body_markdown":"Yes Spring, now in Spring autowired is not needed if you instantiate through constructor and also as far I know in junit5  `MockitoAnnotations.initMocks(this)` is sufficient.","body":"Yes Spring, now in Spring autowired is not needed if you instantiate through constructor and also as far I know in junit5  <code>MockitoAnnotations.initMocks(this)</code> is sufficient."},{"owner":{"account_id":8803970,"reputation":6689,"user_id":6579265,"display_name":"George Z."},"score":0,"creation_date":1636367303,"post_id":69881408,"comment_id":123528541,"body_markdown":"Question (might be not even relevant): Is the `Repository` type an interface?","body":"Question (might be not even relevant): Is the <code>Repository</code> type an interface?"},{"owner":{"account_id":8782479,"reputation":105,"user_id":6565690,"display_name":"Khan Hafizur Rahman"},"score":0,"creation_date":1636371184,"post_id":69881408,"comment_id":123529975,"body_markdown":"no its a concrete class","body":"no its a concrete class"}],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1636374029,"creation_date":1636367439,"answer_id":69882029,"question_id":69881408,"body_markdown":"The reason that InjectMocks is not working could be because your Repository field is Final.\r\n\r\nKindly see Reference: https://stackoverflow.com/questions/12668289/mockito-injection-not-working-for-constructor-and-setter-mocks-together/51305235\r\n\r\nResolution:\r\n\r\n\r\n   Example Demo Class:  \r\n\r\n   Notice it is not a Spring Class, Just a simple pojo) just to showcase     that we are not autowiring anything here.\r\n\r\n\r\n    import com.example.mongodb.embedded.demo.repository.UserRepository;\r\n\r\n    public class Demo {\r\n    \r\n        private final UserRepository repository;\r\n    \r\n        public Demo(UserRepository repository) {\r\n            this.repository = repository;\r\n        }\r\n    \r\n        private Long getValue() {\r\n            return repository.count();\r\n        }\r\n    \r\n        public String toString(){\r\n            return &quot;Count: &quot; + getValue();\r\n        }\r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\n    package com.example.demo;\r\n    \r\n    import com.example.mongodb.embedded.demo.repository.UserRepository;\r\n    import com.example.mongodb.embedded.demo.service.Demo;\r\n    \r\n    import org.junit.Rule;\r\n    import org.junit.jupiter.api.Assertions;\r\n    import org.junit.jupiter.api.BeforeAll;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.Mock;\r\n    import org.mockito.Mockito;\r\n    import org.mockito.MockitoAnnotations;\r\n    import org.mockito.junit.MockitoJUnitRunner;\r\n    \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    class DemoApplicationTest {\r\n    \r\n        @Mock\r\n        private UserRepository userRepository;\r\n    \r\n        private Demo noneAutoWiredDemoInstance;\r\n    \r\n        @Test\r\n        public void testConstructorCreation() {\r\n    \r\n            MockitoAnnotations.initMocks(this);\r\n            Mockito.when(userRepository.count()).thenReturn(0L);\r\n    \r\n            noneAutoWiredDemoInstance = new Demo(userRepository);\r\n    \r\n            Assertions.assertEquals(&quot;Count: 0&quot;, noneAutoWiredDemoInstance.toString());\r\n        }\r\n    }\r\n\r\n","title":"Mock Property value resides in constructor and add that mock while using @injectBean annotation","body":"<p>The reason that InjectMocks is not working could be because your Repository field is Final.</p>\n<p>Kindly see Reference: <a href=\"https://stackoverflow.com/questions/12668289/mockito-injection-not-working-for-constructor-and-setter-mocks-together/51305235\">Mockito injection not working for constructor AND setter mocks together</a></p>\n<p>Resolution:</p>\n<p>Example Demo Class:</p>\n<p>Notice it is not a Spring Class, Just a simple pojo) just to showcase     that we are not autowiring anything here.</p>\n<pre><code>import com.example.mongodb.embedded.demo.repository.UserRepository;\n\npublic class Demo {\n\n    private final UserRepository repository;\n\n    public Demo(UserRepository repository) {\n        this.repository = repository;\n    }\n\n    private Long getValue() {\n        return repository.count();\n    }\n\n    public String toString(){\n        return &quot;Count: &quot; + getValue();\n    }\n}\n</code></pre>\n<hr />\n<pre><code>package com.example.demo;\n\nimport com.example.mongodb.embedded.demo.repository.UserRepository;\nimport com.example.mongodb.embedded.demo.service.Demo;\n\nimport org.junit.Rule;\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport org.mockito.Mockito;\nimport org.mockito.MockitoAnnotations;\nimport org.mockito.junit.MockitoJUnitRunner;\n\n@RunWith(MockitoJUnitRunner.class)\nclass DemoApplicationTest {\n\n    @Mock\n    private UserRepository userRepository;\n\n    private Demo noneAutoWiredDemoInstance;\n\n    @Test\n    public void testConstructorCreation() {\n\n        MockitoAnnotations.initMocks(this);\n        Mockito.when(userRepository.count()).thenReturn(0L);\n\n        noneAutoWiredDemoInstance = new Demo(userRepository);\n\n        Assertions.assertEquals(&quot;Count: 0&quot;, noneAutoWiredDemoInstance.toString());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8782479,"reputation":105,"user_id":6565690,"display_name":"Khan Hafizur Rahman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":689,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69882029,"answer_count":1,"score":0,"last_activity_date":1636374029,"creation_date":1636364534,"question_id":69881408,"body_markdown":"I have a class where one attribute is getting value from outer repo.\r\n\r\n```\r\npublic class Demo() {\r\n   private final Repository repository;\r\n   private final long attr;\r\n\r\n   public Demo(Repository repository) {\r\n     this.repository = repository;\r\n     this.attr = this.getValue();\r\n   }\r\n  \r\n   private Long getValue() {\r\n     return repository.getValue();\r\n   }\r\n   ... Rest of the code\r\n}\r\n``` \r\nNow I want to write an unit test for it.\r\n\r\n```\r\nimport org.mockito.InjectMocks;\r\nimport org.mockito.Mock;\r\nimport org.mockito.MockitoAnnotations;\r\n\r\npublic class DemoTest() {\r\n  @Mock\r\n  private Repository repository;\r\n\r\n  @InjectMocks\r\n  private Demo demo;\r\n\r\n  @BeforeEach\r\n  void setUp() {\r\n    registrationUtil = new RegistrationUtil();\r\n    MockitoAnnotations.initMocks(this);\r\n\r\n}\r\n``` \r\n\r\nWhen I run this snippet, it shows a **null pointer exception** in *repository.getValue()*\r\nMay I know how can I mock the value properly to avoid exception?","title":"Mock Property value resides in constructor and add that mock while using @injectBean annotation","body":"<p>I have a class where one attribute is getting value from outer repo.</p>\n<pre><code>public class Demo() {\n   private final Repository repository;\n   private final long attr;\n\n   public Demo(Repository repository) {\n     this.repository = repository;\n     this.attr = this.getValue();\n   }\n  \n   private Long getValue() {\n     return repository.getValue();\n   }\n   ... Rest of the code\n}\n</code></pre>\n<p>Now I want to write an unit test for it.</p>\n<pre><code>import org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.MockitoAnnotations;\n\npublic class DemoTest() {\n  @Mock\n  private Repository repository;\n\n  @InjectMocks\n  private Demo demo;\n\n  @BeforeEach\n  void setUp() {\n    registrationUtil = new RegistrationUtil();\n    MockitoAnnotations.initMocks(this);\n\n}\n</code></pre>\n<p>When I run this snippet, it shows a <strong>null pointer exception</strong> in <em>repository.getValue()</em>\nMay I know how can I mock the value properly to avoid exception?</p>\n"},{"tags":["java","arrays","algorithm","performance"],"comments":[{"owner":{"account_id":269227,"reputation":18215,"user_id":558433,"accept_rate":72,"display_name":"Marcos Vasconcelos"},"score":1,"creation_date":1533094921,"post_id":51625022,"comment_id":90214864,"body_markdown":"Maybe you don&#39;t need a list and just one for loop.. MAYBE","body":"Maybe you don&#39;t need a list and just one for loop.. MAYBE"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":7,"creation_date":1533095241,"post_id":51625022,"comment_id":90214921,"body_markdown":"Flopshot: if you having nothing to contribute, consider to contribute nothing. There is no point in being snappy here. This is a well written question. I think it is off topic here, but for sure the OP put in quite some effort and should not be ridiculed.","body":"Flopshot: if you having nothing to contribute, consider to contribute nothing. There is no point in being snappy here. This is a well written question. I think it is off topic here, but for sure the OP put in quite some effort and should not be ridiculed."},{"owner":{"account_id":3260426,"reputation":11559,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"score":0,"creation_date":1533095773,"post_id":51625022,"comment_id":90215034,"body_markdown":"@MarcosVasconcelos what do you mean?","body":"@MarcosVasconcelos what do you mean?"},{"owner":{"account_id":3260426,"reputation":11559,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"score":0,"creation_date":1533095822,"post_id":51625022,"comment_id":90215048,"body_markdown":"@GhostCat I oppose as the question is about how to imrpove the performance. I dont need any help to improve the design etc","body":"@GhostCat I oppose as the question is about how to imrpove the performance. I dont need any help to improve the design etc"},{"owner":{"account_id":9764543,"reputation":1315,"user_id":7238475,"accept_rate":100,"display_name":"flopshot"},"score":0,"creation_date":1533095830,"post_id":51625022,"comment_id":90215049,"body_markdown":"I don’t disagree that it’s a well written question. I’ve asked these kinds of questions before several times only to never have them answered. I agree that my snappiness is in I’ll taste, but the fact remains that these kinds of questions litter SO with useless trivia. Rather, SO was built to help developers with real problems, not trivia generated by interviewers to arbitrarily gauge candidates with questions irrelevant to Java development","body":"I don’t disagree that it’s a well written question. I’ve asked these kinds of questions before several times only to never have them answered. I agree that my snappiness is in I’ll taste, but the fact remains that these kinds of questions litter SO with useless trivia. Rather, SO was built to help developers with real problems, not trivia generated by interviewers to arbitrarily gauge candidates with questions irrelevant to Java development"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":4,"creation_date":1533106782,"post_id":51625022,"comment_id":90218673,"body_markdown":"@flopshot Sorry, but you are wrong. What is *trivia* to you might be somebody else&#39;s real problem. What litters SO are the countless **badly** written no-attempt-drop-me-codez questions. And when you are really concerned about those, invest some time to grow your reputation, so you can participate in voting on content, may it be down/close/... whatever votes. That is what contribution means, not being snappy on a well written question.","body":"@flopshot Sorry, but you are wrong. What is <i>trivia</i> to you might be somebody else&#39;s real problem. What litters SO are the countless <b>badly</b> written no-attempt-drop-me-codez questions. And when you are really concerned about those, invest some time to grow your reputation, so you can participate in voting on content, may it be down/close/... whatever votes. That is what contribution means, not being snappy on a well written question."},{"owner":{"account_id":3260426,"reputation":11559,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"score":0,"creation_date":1533107508,"post_id":51625022,"comment_id":90219069,"body_markdown":"@GhostCat I completely agree with you.","body":"@GhostCat I completely agree with you."},{"owner":{"account_id":12175166,"reputation":2703,"user_id":8888461,"display_name":"Oluwasegun Wahaab"},"score":0,"creation_date":1591684001,"post_id":51625022,"comment_id":110140586,"body_markdown":"You should use a QUEUE AND NOT A STACK. This is a form of breadth-first search and your code needs to visit nodes which are added first to the queue to get the minimum distance","body":"You should use a QUEUE AND NOT A STACK. This is a form of breadth-first search and your code needs to visit nodes which are added first to the queue to get the minimum distance"}],"answers":[{"tags":[],"owner":{"account_id":6909425,"reputation":752,"user_id":5305930,"accept_rate":0,"display_name":"omurbek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1533098488,"creation_date":1533098488,"answer_id":51625449,"question_id":51625022,"body_markdown":"You can apply [knapsack][1] algorithms to solve this problem.\r\nIn my solution I precomputed fibonacci numbers. And applied knapsack algorithm to solve it. It contains duplicate code, did not have much time to refactor it. Online ide with the same code is in [repl][2]\r\n\r\n    import java.util.*;\r\n    class Main {\r\n\r\n    public static int solution(int[] A) {\r\n       \r\n        int N = A.length;\r\n        int inf=1000000;\r\n        int[] fibs={1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181, 6765, 10946, 17711, 28657, 46368, 75025};\r\n        int[] moves = new int[N+1];\r\n         for(int i=0; i&lt;=N; i++){\r\n            moves[i]=inf;\r\n         }\r\n        for(int i=0; i&lt;fibs.length; i++){\r\n            if(fibs[i]-1&lt;N &amp;&amp; A[fibs[i]-1]==1){\r\n                moves[ fibs[i]-1 ] = 1;\r\n            }\r\n            if(fibs[i]-1==N){\r\n               moves[N] = 1;\r\n            }\r\n        }\r\n        \r\n        for(int i=0; i&lt;N; i++){\r\n            if(A[i]==1)\r\n            for(int j=0; j&lt;fibs.length; j++){\r\n                if(i-fibs[j]&gt;=0 &amp;&amp; moves[i-fibs[j]]!=inf &amp;&amp; moves[i]&gt;moves[i-fibs[j]]+1){\r\n                    moves[i]=moves[i-fibs[j]]+1;\r\n                }                \r\n            }\r\n             System.out.println(i + &quot; =&gt; &quot; + moves[i]);\r\n        }\r\n        \r\n         for(int i=N; i&lt;=N; i++){\r\n            for(int j=0; j&lt;fibs.length; j++){\r\n                if(i-fibs[j]&gt;=0 &amp;&amp; moves[i-fibs[j]]!=inf &amp;&amp; moves[i]&gt;moves[i-fibs[j]]+1){\r\n                    moves[i]=moves[i-fibs[j]]+1;\r\n                }                \r\n            }\r\n             System.out.println(i + &quot; =&gt; &quot; + moves[i]);\r\n        }\r\n        \r\n        if(moves[N]==inf) return -1;\r\n        return moves[N];\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n\r\n    int[] A = new int[4];\r\n\r\n    A[0] = 0;\r\n    A[1] = 0;\r\n    A[2] = 0;\r\n    A[3] = 0;\r\n    System.out.println(solution(A));\r\n     }\r\n    }\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/knapsack-problem/\r\n  [2]: https://repl.it/@omurbekjk/HarmoniousUntimelyGeeklog","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>You can apply <a href=\"https://www.geeksforgeeks.org/knapsack-problem/\" rel=\"nofollow noreferrer\">knapsack</a> algorithms to solve this problem.\nIn my solution I precomputed fibonacci numbers. And applied knapsack algorithm to solve it. It contains duplicate code, did not have much time to refactor it. Online ide with the same code is in <a href=\"https://repl.it/@omurbekjk/HarmoniousUntimelyGeeklog\" rel=\"nofollow noreferrer\">repl</a></p>\n\n<pre><code>import java.util.*;\nclass Main {\n\npublic static int solution(int[] A) {\n\n    int N = A.length;\n    int inf=1000000;\n    int[] fibs={1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181, 6765, 10946, 17711, 28657, 46368, 75025};\n    int[] moves = new int[N+1];\n     for(int i=0; i&lt;=N; i++){\n        moves[i]=inf;\n     }\n    for(int i=0; i&lt;fibs.length; i++){\n        if(fibs[i]-1&lt;N &amp;&amp; A[fibs[i]-1]==1){\n            moves[ fibs[i]-1 ] = 1;\n        }\n        if(fibs[i]-1==N){\n           moves[N] = 1;\n        }\n    }\n\n    for(int i=0; i&lt;N; i++){\n        if(A[i]==1)\n        for(int j=0; j&lt;fibs.length; j++){\n            if(i-fibs[j]&gt;=0 &amp;&amp; moves[i-fibs[j]]!=inf &amp;&amp; moves[i]&gt;moves[i-fibs[j]]+1){\n                moves[i]=moves[i-fibs[j]]+1;\n            }                \n        }\n         System.out.println(i + \" =&gt; \" + moves[i]);\n    }\n\n     for(int i=N; i&lt;=N; i++){\n        for(int j=0; j&lt;fibs.length; j++){\n            if(i-fibs[j]&gt;=0 &amp;&amp; moves[i-fibs[j]]!=inf &amp;&amp; moves[i]&gt;moves[i-fibs[j]]+1){\n                moves[i]=moves[i-fibs[j]]+1;\n            }                \n        }\n         System.out.println(i + \" =&gt; \" + moves[i]);\n    }\n\n    if(moves[N]==inf) return -1;\n    return moves[N];\n}\n\npublic static void main(String[] args) {\n\nint[] A = new int[4];\n\nA[0] = 0;\nA[1] = 0;\nA[2] = 0;\nA[3] = 0;\nSystem.out.println(solution(A));\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7522265,"reputation":413,"user_id":5713713,"accept_rate":80,"display_name":"Mukesh Bharsakle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604909634,"creation_date":1541969512,"answer_id":53253117,"question_id":51625022,"body_markdown":"Got 100%- solution in C.\r\n\r\n    typedef struct state {\r\n\t\tint pos;\r\n\t\tint step;\r\n\t}state;\r\n\tint solution(int A[], int N) {\r\n\r\n\t\tint f1 = 0;\r\n\t\tint f2 = 1;\r\n\t\tint count = 2;\r\n        // precalculating count of maximum possible fibonacci numbers to allocate array in next loop. since this is C language we do not have flexible dynamic structure as in C++\r\n\t\twhile(1)\r\n\t\t{\r\n\t\t\tint f3 =  f2 + f1;\r\n\t\t\tif(f3 &gt; N)\r\n\t\t\t\tbreak;\r\n\t\t\tf1 = f2;\r\n\t\t\tf2 = f3;\r\n\t\t\t++count;\r\n\t\t}\r\n\t\tint fib[count+1];\r\n\t\tfib[0] = 0;\r\n\t\tfib[1] = 1;\r\n\t\tint i = 2;\r\n        // calculating fibonacci numbers in array\r\n\t\twhile(1)\r\n\t\t{\r\n\t\t\tfib[i] =  fib[i-1] + fib[i-2];\r\n\t\t\tif(fib[i] &gt; N)\r\n\t\t\t\tbreak;\r\n\t\t\t++i;\r\n\t\t}\r\n        // reversing the fibonacci numbers because we need to create minumum jump counts with bigger jumps\r\n\t\tfor(int j = 0, k = count; j &lt; count/2; j++,k--)\r\n\t\t{\r\n\t\t\tint t = fib[j];\r\n\t\t\tfib[j] = fib[k];\r\n\t\t\tfib[k] = t;\r\n\t\t}\r\n\t\tstate q[N];\r\n\t\tint front = 0 ;\r\n\t\tint rear = 0;\r\n\t\tq[0].pos = -1;\r\n\t\tq[0].step = 0;\r\n\t\tint que_s = 1;\r\n\t\twhile(que_s &gt; 0)\r\n\t\t{\r\n\t\t\tstate s =  q[front];\r\n\t\t\tfront++;\r\n\t\t\tque_s--;\r\n\t\t\tfor(int i = 0; i &lt;= count; i++)\r\n\t\t\t{\r\n\t\t\t\tint nextpo = s.pos + fib[i];\r\n\t\t\t\tif(nextpo == N)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn s.step+1;\r\n\t\t\t\t}\r\n\t\t\t\telse if(nextpo &gt; N || nextpo &lt; 0 || A[nextpo] == 0){\r\n               \r\n\t\t\t\t\tcontinue;  \r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tq[++rear].pos = nextpo;\r\n\t\t\t\t\tq[rear].step = s.step + 1;\r\n\t\t\t\t\tque_s++;\r\n\t\t\t\t\tA[nextpo] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n ","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>Got 100%- solution in C.</p>\n<pre><code>typedef struct state {\n    int pos;\n    int step;\n}state;\nint solution(int A[], int N) {\n\n    int f1 = 0;\n    int f2 = 1;\n    int count = 2;\n    // precalculating count of maximum possible fibonacci numbers to allocate array in next loop. since this is C language we do not have flexible dynamic structure as in C++\n    while(1)\n    {\n        int f3 =  f2 + f1;\n        if(f3 &gt; N)\n            break;\n        f1 = f2;\n        f2 = f3;\n        ++count;\n    }\n    int fib[count+1];\n    fib[0] = 0;\n    fib[1] = 1;\n    int i = 2;\n    // calculating fibonacci numbers in array\n    while(1)\n    {\n        fib[i] =  fib[i-1] + fib[i-2];\n        if(fib[i] &gt; N)\n            break;\n        ++i;\n    }\n    // reversing the fibonacci numbers because we need to create minumum jump counts with bigger jumps\n    for(int j = 0, k = count; j &lt; count/2; j++,k--)\n    {\n        int t = fib[j];\n        fib[j] = fib[k];\n        fib[k] = t;\n    }\n    state q[N];\n    int front = 0 ;\n    int rear = 0;\n    q[0].pos = -1;\n    q[0].step = 0;\n    int que_s = 1;\n    while(que_s &gt; 0)\n    {\n        state s =  q[front];\n        front++;\n        que_s--;\n        for(int i = 0; i &lt;= count; i++)\n        {\n            int nextpo = s.pos + fib[i];\n            if(nextpo == N)\n            {\n                return s.step+1;\n            }\n            else if(nextpo &gt; N || nextpo &lt; 0 || A[nextpo] == 0){\n           \n                continue;  \n            }\n            else\n            {\n                q[++rear].pos = nextpo;\n                q[rear].step = s.step + 1;\n                que_s++;\n                A[nextpo] = 0;\n            }\n        }\n    }\n    return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4473073,"reputation":123,"user_id":3638849,"accept_rate":60,"display_name":"Nemanja91"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1604908585,"creation_date":1551486301,"answer_id":54954030,"question_id":51625022,"body_markdown":"Got 100% with simple BFS:\r\n    \r\n    public class Jump {\r\n        int pos;\r\n        int move;\r\n        public Jump(int pos, int move) {\r\n            this.pos = pos;\r\n            this.move = move;\r\n        }\r\n    }\r\n\r\n    public int solution(int[] A) {\r\n\r\n        int n = A.length;\r\n        List &lt; Integer &gt; fibs = fibArray(n + 1);\r\n        Queue &lt; Jump &gt; positions = new LinkedList &lt; Jump &gt; ();\r\n        boolean[] visited = new boolean[n + 1];\r\n\r\n        if (A.length &lt;= 2)\r\n            return 1;\r\n\r\n        for (int i = 0; i &lt; fibs.size(); i++) {\r\n            int initPos = fibs.get(i) - 1;\r\n            if (A[initPos] == 0)\r\n                continue;\r\n            positions.add(new Jump(initPos, 1));\r\n            visited[initPos] = true;\r\n        }\r\n\r\n        while (!positions.isEmpty()) {\r\n            Jump jump = positions.remove();\r\n            for (int j = fibs.size() - 1; j &gt;= 0; j--) {\r\n                int nextPos = jump.pos + fibs.get(j);\r\n                if (nextPos == n)\r\n                    return jump.move + 1;\r\n                else if (nextPos &lt; n &amp;&amp; A[nextPos] == 1 &amp;&amp; !visited[nextPos]) {\r\n                    positions.add(new Jump(nextPos, jump.move + 1));\r\n                    visited[nextPos] = true;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        return -1;\r\n    }\r\n\r\n\r\n    private List &lt; Integer &gt; fibArray(int n) {\r\n        List &lt; Integer &gt; fibs = new ArrayList &lt; &gt; ();\r\n        fibs.add(1);\r\n        fibs.add(2);\r\n        while (fibs.get(fibs.size() - 1) + fibs.get(fibs.size() - 2) &lt;= n) {\r\n            fibs.add(fibs.get(fibs.size() - 1) + fibs.get(fibs.size() - 2));\r\n        }\r\n        return fibs;\r\n    }\r\n","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>Got 100% with simple BFS:</p>\n<pre><code>public class Jump {\n    int pos;\n    int move;\n    public Jump(int pos, int move) {\n        this.pos = pos;\n        this.move = move;\n    }\n}\n\npublic int solution(int[] A) {\n\n    int n = A.length;\n    List &lt; Integer &gt; fibs = fibArray(n + 1);\n    Queue &lt; Jump &gt; positions = new LinkedList &lt; Jump &gt; ();\n    boolean[] visited = new boolean[n + 1];\n\n    if (A.length &lt;= 2)\n        return 1;\n\n    for (int i = 0; i &lt; fibs.size(); i++) {\n        int initPos = fibs.get(i) - 1;\n        if (A[initPos] == 0)\n            continue;\n        positions.add(new Jump(initPos, 1));\n        visited[initPos] = true;\n    }\n\n    while (!positions.isEmpty()) {\n        Jump jump = positions.remove();\n        for (int j = fibs.size() - 1; j &gt;= 0; j--) {\n            int nextPos = jump.pos + fibs.get(j);\n            if (nextPos == n)\n                return jump.move + 1;\n            else if (nextPos &lt; n &amp;&amp; A[nextPos] == 1 &amp;&amp; !visited[nextPos]) {\n                positions.add(new Jump(nextPos, jump.move + 1));\n                visited[nextPos] = true;\n            }\n        }\n    }\n\n\n    return -1;\n}\n\n\nprivate List &lt; Integer &gt; fibArray(int n) {\n    List &lt; Integer &gt; fibs = new ArrayList &lt; &gt; ();\n    fibs.add(1);\n    fibs.add(2);\n    while (fibs.get(fibs.size() - 1) + fibs.get(fibs.size() - 2) &lt;= n) {\n        fibs.add(fibs.get(fibs.size() - 1) + fibs.get(fibs.size() - 2));\n    }\n    return fibs;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7221025,"reputation":1355,"user_id":5511520,"accept_rate":68,"display_name":"Mike Belyakov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559778680,"creation_date":1559778680,"answer_id":56469407,"question_id":51625022,"body_markdown":"Ruby 100% solution\r\n```\r\ndef solution(a)\r\n  f = 2.step.inject([1,2]) {|acc,e| acc[e] = acc[e-1] + acc[e-2]; break(acc) if acc[e] &gt; a.size + 1;acc }.reverse\r\n  mins = []\r\n\r\n  (a.size + 1).times do |i|\r\n    next mins[i] = -1 if i &lt; a.size &amp;&amp; a[i] == 0\r\n\r\n    mins[i] = f.inject(nil) do |min, j|\r\n        k = i - j\r\n        next min if k &lt; -1\r\n        break 1 if k == -1\r\n        next min if mins[k] &lt; 0\r\n        [mins[k] + 1, min || Float::INFINITY].min\r\n    end || -1\r\n  end\r\n\r\n  mins[a.size]\r\nend\r\n```","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>Ruby 100% solution</p>\n\n<pre><code>def solution(a)\n  f = 2.step.inject([1,2]) {|acc,e| acc[e] = acc[e-1] + acc[e-2]; break(acc) if acc[e] &gt; a.size + 1;acc }.reverse\n  mins = []\n\n  (a.size + 1).times do |i|\n    next mins[i] = -1 if i &lt; a.size &amp;&amp; a[i] == 0\n\n    mins[i] = f.inject(nil) do |min, j|\n        k = i - j\n        next min if k &lt; -1\n        break 1 if k == -1\n        next min if mins[k] &lt; 0\n        [mins[k] + 1, min || Float::INFINITY].min\n    end || -1\n  end\n\n  mins[a.size]\nend\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3260426,"reputation":11559,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567327596,"creation_date":1567327596,"answer_id":57744530,"question_id":51625022,"body_markdown":"I have translated the previous `C` solution to Java and find the performance is improved. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n    import java.util.*;\r\n    \r\n    \r\n    class Solution {\r\n        \r\n            private static class State {\r\n    \r\n            int pos;\r\n            int step;\r\n    \r\n            public State(int pos, int step) {\r\n    \r\n                this.pos = pos;\r\n                this.step = step;\r\n            }\r\n        }\r\n    \r\n    \r\n        public static int solution(int A[]) {\r\n    \r\n            int N = A.length;\r\n    \r\n            int f1 = 0;\r\n            int f2 = 1;\r\n    \r\n            int count = 2;\r\n    \r\n            while (true) {\r\n    \r\n                int f3 = f2 + f1;\r\n    \r\n                if (f3 &gt; N) {\r\n                    break;\r\n                }\r\n    \r\n                f1 = f2;\r\n                f2 = f3;\r\n    \r\n                ++count;\r\n            }\r\n    \r\n    \r\n            int[] fib = new int[count + 1];\r\n    \r\n            fib[0] = 0;\r\n            fib[1] = 1;\r\n    \r\n            int i = 2;\r\n    \r\n            while (true) {\r\n    \r\n                fib[i] = fib[i - 1] + fib[i - 2];\r\n    \r\n                if (fib[i] &gt; N) {\r\n                    break;\r\n                }\r\n    \r\n                ++i;\r\n            }\r\n    \r\n            for (int j = 0, k = count; j &lt; count / 2; j++, k--) {\r\n    \r\n                int t = fib[j];\r\n    \r\n                fib[j] = fib[k];\r\n                fib[k] = t;\r\n            }\r\n    \r\n            State[] q = new State[N];\r\n    \r\n            for (int j = 0; j &lt; N; j++) {\r\n    \r\n                q[j] = new State(-1,0);\r\n            }\r\n    \r\n            int front = 0;\r\n            int rear = 0;\r\n    \r\n            // q[0].pos = -1;\r\n            // q[0].step = 0;\r\n    \r\n            int que_s = 1;\r\n    \r\n            while (que_s &gt; 0) {\r\n    \r\n                State s = q[front];\r\n    \r\n                front++;\r\n                que_s--;\r\n    \r\n                for (i = 0; i &lt;= count; i++) {\r\n    \r\n                    int nextpo = s.pos + fib[i];\r\n    \r\n                    if (nextpo == N) {\r\n                        return s.step + 1;\r\n                    }\r\n    \r\n                    //\r\n                    else if (nextpo &gt; N || nextpo &lt; 0 || A[nextpo] == 0) {\r\n                        continue;\r\n                    }\r\n    \r\n                    //\r\n                    else {\r\n    \r\n                        q[++rear].pos = nextpo;\r\n                        q[rear].step = s.step + 1;\r\n    \r\n                        que_s++;\r\n    \r\n                        A[nextpo] = 0;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return -1;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xQNNg.png","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>I have translated the previous <code>C</code> solution to Java and find the performance is improved. </p>\n\n<p><a href=\"https://i.stack.imgur.com/xQNNg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xQNNg.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import java.util.*;\n\n\nclass Solution {\n\n        private static class State {\n\n        int pos;\n        int step;\n\n        public State(int pos, int step) {\n\n            this.pos = pos;\n            this.step = step;\n        }\n    }\n\n\n    public static int solution(int A[]) {\n\n        int N = A.length;\n\n        int f1 = 0;\n        int f2 = 1;\n\n        int count = 2;\n\n        while (true) {\n\n            int f3 = f2 + f1;\n\n            if (f3 &gt; N) {\n                break;\n            }\n\n            f1 = f2;\n            f2 = f3;\n\n            ++count;\n        }\n\n\n        int[] fib = new int[count + 1];\n\n        fib[0] = 0;\n        fib[1] = 1;\n\n        int i = 2;\n\n        while (true) {\n\n            fib[i] = fib[i - 1] + fib[i - 2];\n\n            if (fib[i] &gt; N) {\n                break;\n            }\n\n            ++i;\n        }\n\n        for (int j = 0, k = count; j &lt; count / 2; j++, k--) {\n\n            int t = fib[j];\n\n            fib[j] = fib[k];\n            fib[k] = t;\n        }\n\n        State[] q = new State[N];\n\n        for (int j = 0; j &lt; N; j++) {\n\n            q[j] = new State(-1,0);\n        }\n\n        int front = 0;\n        int rear = 0;\n\n        // q[0].pos = -1;\n        // q[0].step = 0;\n\n        int que_s = 1;\n\n        while (que_s &gt; 0) {\n\n            State s = q[front];\n\n            front++;\n            que_s--;\n\n            for (i = 0; i &lt;= count; i++) {\n\n                int nextpo = s.pos + fib[i];\n\n                if (nextpo == N) {\n                    return s.step + 1;\n                }\n\n                //\n                else if (nextpo &gt; N || nextpo &lt; 0 || A[nextpo] == 0) {\n                    continue;\n                }\n\n                //\n                else {\n\n                    q[++rear].pos = nextpo;\n                    q[rear].step = s.step + 1;\n\n                    que_s++;\n\n                    A[nextpo] = 0;\n                }\n            }\n        }\n\n        return -1;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":321927,"reputation":3132,"user_id":641049,"display_name":"Avi Cohen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591173829,"creation_date":1591173829,"answer_id":62168599,"question_id":51625022,"body_markdown":"JavaScript with 100%.\r\nInspired from [here][1].\r\n\r\n    function solution(A) {\r\n      const createFibs = n =&gt; {\r\n        const fibs = Array(n + 2).fill(null)\r\n        fibs[1] = 1\r\n        for (let i = 2; i &lt; n + 1; i++) {\r\n          fibs[i] = fibs[i - 1] + fibs[i - 2]\r\n        }\r\n        return fibs\r\n      }\r\n      const createJumps = (A, fibs) =&gt; {\r\n        const jumps = Array(A.length + 1).fill(null)\r\n        let prev = null\r\n        for (i = 2; i &lt; fibs.length; i++) {\r\n          const j = -1 + fibs[i]\r\n          if (j &gt; A.length) break\r\n          if (j === A.length || A[j] === 1) {\r\n            jumps[j] = 1\r\n            if (prev === null) prev = j\r\n          }\r\n        }\r\n        if (prev === null) {\r\n          jumps[A.length] = -1\r\n          return jumps\r\n        }\r\n        while (prev &lt; A.length) {\r\n          for (let i = 2; i &lt; fibs.length; i++) {\r\n            const j = prev + fibs[i]\r\n            if (j &gt; A.length) break\r\n            if (j === A.length || A[j] === 1) {\r\n              const x = jumps[prev] + 1\r\n              const y = jumps[j]\r\n              jumps[j] = y === null ? x : Math.min(y, x)\r\n            }\r\n          }\r\n          prev++\r\n          while (prev &lt; A.length) {\r\n            if (jumps[prev] !== null) break\r\n            prev++\r\n          }\r\n        }\r\n        if (jumps[A.length] === null) jumps[A.length] = -1\r\n        return jumps\r\n      }\r\n      const fibs = createFibs(26)\r\n      const jumps = createJumps(A, fibs)\r\n      return jumps[A.length]\r\n    }\r\n\r\n    const A = [0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0]\r\n    console.log(A)\r\n    const s = solution(A)\r\n    console.log(s)\r\n\r\n\r\n  [1]: https://www.martinkysel.com/codility-fibfrog-solution/","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>JavaScript with 100%.\nInspired from <a href=\"https://www.martinkysel.com/codility-fibfrog-solution/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>function solution(A) {\n  const createFibs = n =&gt; {\n    const fibs = Array(n + 2).fill(null)\n    fibs[1] = 1\n    for (let i = 2; i &lt; n + 1; i++) {\n      fibs[i] = fibs[i - 1] + fibs[i - 2]\n    }\n    return fibs\n  }\n  const createJumps = (A, fibs) =&gt; {\n    const jumps = Array(A.length + 1).fill(null)\n    let prev = null\n    for (i = 2; i &lt; fibs.length; i++) {\n      const j = -1 + fibs[i]\n      if (j &gt; A.length) break\n      if (j === A.length || A[j] === 1) {\n        jumps[j] = 1\n        if (prev === null) prev = j\n      }\n    }\n    if (prev === null) {\n      jumps[A.length] = -1\n      return jumps\n    }\n    while (prev &lt; A.length) {\n      for (let i = 2; i &lt; fibs.length; i++) {\n        const j = prev + fibs[i]\n        if (j &gt; A.length) break\n        if (j === A.length || A[j] === 1) {\n          const x = jumps[prev] + 1\n          const y = jumps[j]\n          jumps[j] = y === null ? x : Math.min(y, x)\n        }\n      }\n      prev++\n      while (prev &lt; A.length) {\n        if (jumps[prev] !== null) break\n        prev++\n      }\n    }\n    if (jumps[A.length] === null) jumps[A.length] = -1\n    return jumps\n  }\n  const fibs = createFibs(26)\n  const jumps = createJumps(A, fibs)\n  return jumps[A.length]\n}\n\nconst A = [0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0]\nconsole.log(A)\nconst s = solution(A)\nconsole.log(s)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12175166,"reputation":2703,"user_id":8888461,"display_name":"Oluwasegun Wahaab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591685365,"creation_date":1591685365,"answer_id":62276636,"question_id":51625022,"body_markdown":"You should use a QUEUE AND NOT A STACK. This is a form of breadth-first search and your code needs to visit nodes that were added first to the queue to get the minimum distance.\r\nA stack uses the last-in, first-out mechanism to remove items while a queue uses the first-in, first-out mechanism.\r\nI copied and pasted your exact code but used a queue instead of a stack and I got 100% on codility.\r\n","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>You should use a QUEUE AND NOT A STACK. This is a form of breadth-first search and your code needs to visit nodes that were added first to the queue to get the minimum distance.\nA stack uses the last-in, first-out mechanism to remove items while a queue uses the first-in, first-out mechanism.\nI copied and pasted your exact code but used a queue instead of a stack and I got 100% on codility.</p>\n"},{"tags":[],"owner":{"account_id":360126,"reputation":815,"user_id":701945,"accept_rate":88,"display_name":"nialloc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603815570,"creation_date":1603815570,"answer_id":64558623,"question_id":51625022,"body_markdown":"Python 100% answer.\r\n\r\nFor me the easiest solution was to locate all leaves within one fib jump of -1.  Then consider each of these leaves to be index[0] and find all jumps from there.\r\nEach generation or jump is recorded in a set until a generation contains len(A) or no more jumps can be found.\r\n\r\n    def gen_fib(n):\r\n        fn = [0,1]\r\n        i = 2\r\n        s = 2\r\n        while s &lt; n:\r\n            s = fn[i-2] + fn[i-1]\r\n            fn.append(s)\r\n            i+=1\r\n        return fn\r\n\r\n    def new_paths(A, n, last_pos, fn):\r\n        &quot;&quot;&quot;\r\n        Given an array A of len n.\r\n        From index last_pos which numbers in fn jump to a leaf?\r\n        returns list: set of indexes with leaves.\r\n        &quot;&quot;&quot;\r\n        paths = []\r\n        for f in fn:\r\n            new_pos = last_pos + f\r\n            if new_pos == n or (new_pos &lt; n and A[new_pos]):\r\n                paths.append(new_pos)\r\n        return path\r\n\r\n    def solution(A):\r\n        n = len(A)\r\n        if n &lt; 3:\r\n            return 1\r\n\r\n        # A.append(1) # mark final jump\r\n        fn = sorted(gen_fib(100000)[2:]) # Fib numbers with 0, 1, 1, 2..  clipped to just 1, 2..\r\n        # print(fn)\r\n        paths = set([-1]) # locate all the leaves that are one fib jump from the start position.\r\n\r\n        jump = 1\r\n        while True:\r\n            # Considering each of the previous jump positions - How many leaves from there are one fib jump away\r\n            paths =  set([idx for pos in paths for idx in new_paths(A, n, pos, fn)])\r\n\r\n            # no new jumps means game over!\r\n            if not paths:\r\n                break\r\n\r\n            # If there was a result in the new jumps record that\r\n            if n in paths:\r\n                return jump\r\n                \r\n            jump += 1\r\n\r\n        return -1\r\n\r\nhttps://app.codility.com/demo/results/training4GQV8Y-9ES/\r\n\r\nhttps://github.com/niall-oc/things/blob/master/codility/fib_frog.py\r\n\r\n","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>Python 100% answer.</p>\n<p>For me the easiest solution was to locate all leaves within one fib jump of -1.  Then consider each of these leaves to be index[0] and find all jumps from there.\nEach generation or jump is recorded in a set until a generation contains len(A) or no more jumps can be found.</p>\n<pre><code>def gen_fib(n):\n    fn = [0,1]\n    i = 2\n    s = 2\n    while s &lt; n:\n        s = fn[i-2] + fn[i-1]\n        fn.append(s)\n        i+=1\n    return fn\n\ndef new_paths(A, n, last_pos, fn):\n    &quot;&quot;&quot;\n    Given an array A of len n.\n    From index last_pos which numbers in fn jump to a leaf?\n    returns list: set of indexes with leaves.\n    &quot;&quot;&quot;\n    paths = []\n    for f in fn:\n        new_pos = last_pos + f\n        if new_pos == n or (new_pos &lt; n and A[new_pos]):\n            paths.append(new_pos)\n    return path\n\ndef solution(A):\n    n = len(A)\n    if n &lt; 3:\n        return 1\n\n    # A.append(1) # mark final jump\n    fn = sorted(gen_fib(100000)[2:]) # Fib numbers with 0, 1, 1, 2..  clipped to just 1, 2..\n    # print(fn)\n    paths = set([-1]) # locate all the leaves that are one fib jump from the start position.\n\n    jump = 1\n    while True:\n        # Considering each of the previous jump positions - How many leaves from there are one fib jump away\n        paths =  set([idx for pos in paths for idx in new_paths(A, n, pos, fn)])\n\n        # no new jumps means game over!\n        if not paths:\n            break\n\n        # If there was a result in the new jumps record that\n        if n in paths:\n            return jump\n            \n        jump += 1\n\n    return -1\n</code></pre>\n<p><a href=\"https://app.codility.com/demo/results/training4GQV8Y-9ES/\" rel=\"nofollow noreferrer\">https://app.codility.com/demo/results/training4GQV8Y-9ES/</a></p>\n<p><a href=\"https://github.com/niall-oc/things/blob/master/codility/fib_frog.py\" rel=\"nofollow noreferrer\">https://github.com/niall-oc/things/blob/master/codility/fib_frog.py</a></p>\n"},{"tags":[],"owner":{"account_id":151391,"reputation":3473,"user_id":365229,"accept_rate":77,"display_name":"Behrouz.M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604913033,"creation_date":1604909219,"answer_id":64747822,"question_id":51625022,"body_markdown":"[100% C++ solution][1] \r\n\r\nMore answers in [my github][2]\r\n\r\nInspired from [here][3]\r\n\r\n**Solution1 : Bottom-Top**, using Dynamic programming algorithm (storing calculated values in an array)\r\n```c++\r\nvector&lt;int&gt; getFibonacciArrayMax(int MaxNum) {\r\n    if (MaxNum == 0)\r\n        return vector&lt;int&gt;(1, 0);\r\n    vector&lt;int&gt; fib(2, 0);\r\n    fib[1] = 1;\r\n    for (int i = 2; fib[fib.size()-1] + fib[fib.size() - 2] &lt;= MaxNum; i++)\r\n        fib.push_back(fib[i - 1] + fib[i - 2]);\r\n    return fib;\r\n}\r\n\r\nint solution(vector&lt;int&gt;&amp; A) {\r\n    int N = A.size();\r\n    A.push_back(1);\r\n    N++;\r\n    vector&lt;int&gt; f = getFibonacciArrayMax(N);\r\n    const int oo = 1&#39;000&#39;000;\r\n    vector&lt;int&gt; moves(N, oo);\r\n    \r\n    for (auto i : f)\r\n        if (i - 1 &gt;= 0 &amp;&amp; A[i-1])\r\n            moves[i-1] = 1;\r\n    \r\n    for (int pos = 0; pos &lt; N; pos++) {\r\n        if (A[pos] == 0)\r\n            continue;\r\n\r\n        for (int i = f.size()-1; i &gt;= 0; i--) {\r\n            if (pos + f[i] &lt; N &amp;&amp; A[pos + f[i]]) {\r\n                moves[pos + f[i]] = min(moves[pos]+1, moves[pos + f[i]]);\r\n            }\r\n        }\r\n    }\r\n    if (moves[N - 1] != oo) {\r\n        return moves[N - 1];\r\n    }\r\n    return -1;\r\n}\r\n```\r\n\r\n**Solution2: Top-Bottom** using `set` container:\r\n\r\n```c++\r\n\r\n#include &lt;set&gt;\r\n\r\nint solution2(vector&lt;int&gt;&amp; A) {\r\n    int N = A.size();\r\n\r\n    vector&lt;int&gt; fib = getFibonacciArrayMax(N);\r\n\r\n    set&lt;int&gt; positions;\r\n    positions.insert(N);\r\n    for (int jumps = 1; ; jumps++)\r\n    {\r\n        set&lt;int&gt; new_positions;\r\n        for (int pos : positions)\r\n        {\r\n            for (int f : fib)\r\n            {\r\n                // return jumps if we reach to the start point\r\n                if (pos - (f - 1) == 0)\r\n                    return jumps;\r\n                \r\n                int prev_pos = pos - f;\r\n                \r\n                // we do not need to calculate bigger jumps.\r\n                if (prev_pos &lt; 0)\r\n                    break;\r\n                \r\n                if (prev_pos &lt; A.size() &amp;&amp; A[prev_pos])\r\n                    new_positions.insert(prev_pos);\r\n            }\r\n        }\r\n        if (new_positions.size() == 0)\r\n            return -1;\r\n        positions = new_positions;\r\n    }\r\n\r\n    return -1;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://app.codility.com/demo/results/trainingKAD5GF-R52/\r\n  [2]: https://github.com/Behrouz-m/Codility\r\n  [3]: https://www.martinkysel.com/codility-fibfrog-solution/","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p><a href=\"https://app.codility.com/demo/results/trainingKAD5GF-R52/\" rel=\"nofollow noreferrer\">100% C++ solution</a></p>\n<p>More answers in <a href=\"https://github.com/Behrouz-m/Codility\" rel=\"nofollow noreferrer\">my github</a></p>\n<p>Inspired from <a href=\"https://www.martinkysel.com/codility-fibfrog-solution/\" rel=\"nofollow noreferrer\">here</a></p>\n<p><strong>Solution1 : Bottom-Top</strong>, using Dynamic programming algorithm (storing calculated values in an array)</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>vector&lt;int&gt; getFibonacciArrayMax(int MaxNum) {\n    if (MaxNum == 0)\n        return vector&lt;int&gt;(1, 0);\n    vector&lt;int&gt; fib(2, 0);\n    fib[1] = 1;\n    for (int i = 2; fib[fib.size()-1] + fib[fib.size() - 2] &lt;= MaxNum; i++)\n        fib.push_back(fib[i - 1] + fib[i - 2]);\n    return fib;\n}\n\nint solution(vector&lt;int&gt;&amp; A) {\n    int N = A.size();\n    A.push_back(1);\n    N++;\n    vector&lt;int&gt; f = getFibonacciArrayMax(N);\n    const int oo = 1'000'000;\n    vector&lt;int&gt; moves(N, oo);\n    \n    for (auto i : f)\n        if (i - 1 &gt;= 0 &amp;&amp; A[i-1])\n            moves[i-1] = 1;\n    \n    for (int pos = 0; pos &lt; N; pos++) {\n        if (A[pos] == 0)\n            continue;\n\n        for (int i = f.size()-1; i &gt;= 0; i--) {\n            if (pos + f[i] &lt; N &amp;&amp; A[pos + f[i]]) {\n                moves[pos + f[i]] = min(moves[pos]+1, moves[pos + f[i]]);\n            }\n        }\n    }\n    if (moves[N - 1] != oo) {\n        return moves[N - 1];\n    }\n    return -1;\n}\n</code></pre>\n<p><strong>Solution2: Top-Bottom</strong> using <code>set</code> container:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>\n#include &lt;set&gt;\n\nint solution2(vector&lt;int&gt;&amp; A) {\n    int N = A.size();\n\n    vector&lt;int&gt; fib = getFibonacciArrayMax(N);\n\n    set&lt;int&gt; positions;\n    positions.insert(N);\n    for (int jumps = 1; ; jumps++)\n    {\n        set&lt;int&gt; new_positions;\n        for (int pos : positions)\n        {\n            for (int f : fib)\n            {\n                // return jumps if we reach to the start point\n                if (pos - (f - 1) == 0)\n                    return jumps;\n                \n                int prev_pos = pos - f;\n                \n                // we do not need to calculate bigger jumps.\n                if (prev_pos &lt; 0)\n                    break;\n                \n                if (prev_pos &lt; A.size() &amp;&amp; A[prev_pos])\n                    new_positions.insert(prev_pos);\n            }\n        }\n        if (new_positions.size() == 0)\n            return -1;\n        positions = new_positions;\n    }\n\n    return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1916094,"reputation":59,"user_id":1728660,"accept_rate":0,"display_name":"Thao Truong"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1610402948,"creation_date":1610402948,"answer_id":65675257,"question_id":51625022,"body_markdown":"Javascript 100%\r\n```\r\nfunction solution(A) {\r\n    function fibonacciUntilNumber(n) {\r\n        const fib = [0,1];\r\n        while (true) {\r\n            let newFib = fib[fib.length - 1] + fib[fib.length - 2];\r\n            if (newFib &gt; n) {\r\n                break;\r\n            }\r\n            fib.push(newFib);\r\n        }\r\n        return fib.slice(2);\r\n    }\r\n    A.push(1);\r\n    const fibSet = fibonacciUntilNumber(A.length);\r\n    if (fibSet.includes(A.length)) return 1;\r\n    const reachable = Array.from({length: A.length}, () =&gt; -1);\r\n\r\n    fibSet.forEach(jump =&gt; {\r\n        if (A[jump - 1] === 1) {\r\n            reachable[jump - 1] = 1;\r\n        }\r\n    })\r\n\r\n    for (let index = 0; index &lt; A.length; index++) {\r\n        if (A[index] === 0 || reachable[index] &gt; 0) {\r\n            continue;\r\n        }\r\n        let minValue = 100005;\r\n        for (let jump of fibSet) {\r\n            let previousIndex = index - jump;\r\n            if (previousIndex &lt; 0) {\r\n                break;\r\n            }\r\n            if (reachable[previousIndex] &gt; 0 &amp;&amp; minValue &gt; reachable[previousIndex]) {\r\n                minValue = reachable[previousIndex];\r\n            }\r\n        }\r\n        if (minValue !== 100005) {\r\n            reachable[index] = minValue + 1;\r\n        }\r\n    }\r\n    return reachable[A.length - 1];\r\n}\r\n```","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>Javascript 100%</p>\n<pre><code>function solution(A) {\n    function fibonacciUntilNumber(n) {\n        const fib = [0,1];\n        while (true) {\n            let newFib = fib[fib.length - 1] + fib[fib.length - 2];\n            if (newFib &gt; n) {\n                break;\n            }\n            fib.push(newFib);\n        }\n        return fib.slice(2);\n    }\n    A.push(1);\n    const fibSet = fibonacciUntilNumber(A.length);\n    if (fibSet.includes(A.length)) return 1;\n    const reachable = Array.from({length: A.length}, () =&gt; -1);\n\n    fibSet.forEach(jump =&gt; {\n        if (A[jump - 1] === 1) {\n            reachable[jump - 1] = 1;\n        }\n    })\n\n    for (let index = 0; index &lt; A.length; index++) {\n        if (A[index] === 0 || reachable[index] &gt; 0) {\n            continue;\n        }\n        let minValue = 100005;\n        for (let jump of fibSet) {\n            let previousIndex = index - jump;\n            if (previousIndex &lt; 0) {\n                break;\n            }\n            if (reachable[previousIndex] &gt; 0 &amp;&amp; minValue &gt; reachable[previousIndex]) {\n                minValue = reachable[previousIndex];\n            }\n        }\n        if (minValue !== 100005) {\n            reachable[index] = minValue + 1;\n        }\n    }\n    return reachable[A.length - 1];\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2556450,"reputation":11,"user_id":2218312,"display_name":"bhav"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636373792,"creation_date":1634175022,"answer_id":69564073,"question_id":51625022,"body_markdown":" //100% on codility Dynamic Programming Solution. https://app.codility.com/demo/results/training7WSQJW-WTX/\r\n\r\n    class Solution {\r\n      public int solution(int[] A) {\r\n        int n = A.length + 1;\r\n        int dp[] = new int[n];\r\n        for(int i=0;i&lt;n;i++) {\r\n            dp[i] = -1;\r\n        }\r\n        int f[] = new int[100005];\r\n        f[0] = 1;\r\n        f[1] = 1;\r\n        for(int i=2;i&lt;100005;i++) {\r\n            f[i] = f[i - 1] + f[i - 2];\r\n        }\r\n        for(int i=-1;i&lt;n;i++) {\r\n            if(i == -1 || dp[i] &gt; 0) {\r\n                for(int j=0;i+f[j] &lt;n;j++) {\r\n                    if(i + f[j] == n -1  || A[i+f[j]] == 1) {\r\n                        if(i == -1) {\r\n                            dp[i + f[j]] = 1;\r\n                        } else if(dp[i + f[j]] == -1) {\r\n                            dp[i + f[j]] = dp[i] + 1;\r\n                        } else {\r\n                            dp[i + f[j]] = Math.min(dp[i + f[j]], dp[i] + 1);\r\n                        }\r\n                    }\r\n                }\r\n                }\r\n        }\r\n\r\n        return dp[n - 1];\r\n    }\r\n    }","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>//100% on codility Dynamic Programming Solution. <a href=\"https://app.codility.com/demo/results/training7WSQJW-WTX/\" rel=\"nofollow noreferrer\">https://app.codility.com/demo/results/training7WSQJW-WTX/</a></p>\n<pre><code>class Solution {\n  public int solution(int[] A) {\n    int n = A.length + 1;\n    int dp[] = new int[n];\n    for(int i=0;i&lt;n;i++) {\n        dp[i] = -1;\n    }\n    int f[] = new int[100005];\n    f[0] = 1;\n    f[1] = 1;\n    for(int i=2;i&lt;100005;i++) {\n        f[i] = f[i - 1] + f[i - 2];\n    }\n    for(int i=-1;i&lt;n;i++) {\n        if(i == -1 || dp[i] &gt; 0) {\n            for(int j=0;i+f[j] &lt;n;j++) {\n                if(i + f[j] == n -1  || A[i+f[j]] == 1) {\n                    if(i == -1) {\n                        dp[i + f[j]] = 1;\n                    } else if(dp[i + f[j]] == -1) {\n                        dp[i + f[j]] = dp[i] + 1;\n                    } else {\n                        dp[i + f[j]] = Math.min(dp[i + f[j]], dp[i] + 1);\n                    }\n                }\n            }\n            }\n    }\n\n    return dp[n - 1];\n}\n}\n</code></pre>\n"}],"owner":{"account_id":3260426,"reputation":11559,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16106,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":51625449,"answer_count":11,"score":4,"last_activity_date":1636373792,"creation_date":1533094688,"question_id":51625022,"body_markdown":"I work with a Codility problem provided below, \r\n\r\nThe Fibonacci sequence is defined using the following recursive formula:\r\n\r\n    F(0) = 0\r\n    F(1) = 1\r\n    F(M) = F(M - 1) + F(M - 2) if M &gt;= 2\r\nA small frog wants to get to the other side of a river. The frog is initially located at one bank of the river (position −1) and wants to get to the other bank (position N). The frog can jump over any distance F(K), where F(K) is the K-th Fibonacci number. Luckily, there are many leaves on the river, and the frog can jump between the leaves, but only in the direction of the bank at position N.\r\n\r\nThe leaves on the river are represented in an array A consisting of N integers. Consecutive elements of array A represent consecutive positions from 0 to N − 1 on the river. Array A contains only 0s and/or 1s:\r\n\r\n0 represents a position without a leaf;\r\n1 represents a position containing a leaf.\r\nThe goal is to count the minimum number of jumps in which the frog can get to the other side of the river (from position −1 to position N). The frog can jump between positions −1 and N (the banks of the river) and every position containing a leaf.\r\n\r\nFor example, consider array A such that:\r\n\r\n    A[0] = 0\r\n    A[1] = 0\r\n    A[2] = 0\r\n    A[3] = 1\r\n    A[4] = 1\r\n    A[5] = 0\r\n    A[6] = 1\r\n    A[7] = 0\r\n    A[8] = 0\r\n    A[9] = 0\r\n    A[10] = 0\r\nThe frog can make three jumps of length F(5) = 5, F(3) = 2 and F(5) = 5.\r\n\r\nWrite a function:\r\n\r\n    class Solution { public int solution(int[] A); }\r\n\r\nthat, given an array A consisting of N integers, returns the minimum number of jumps by which the frog can get to the other side of the river. If the frog cannot reach the other side of the river, the function should return −1.\r\n\r\nFor example, given:\r\n\r\n    A[0] = 0\r\n    A[1] = 0\r\n    A[2] = 0\r\n    A[3] = 1\r\n    A[4] = 1\r\n    A[5] = 0\r\n    A[6] = 1\r\n    A[7] = 0\r\n    A[8] = 0\r\n    A[9] = 0\r\n    A[10] = 0\r\nthe function should return 3, as explained above.\r\n\r\nAssume that:\r\n\r\nN is an integer within the range `[0..100,000]`;\r\neach element of array A is an integer that can have one of the following values: 0, 1.\r\nComplexity:\r\n\r\nexpected worst-case time complexity is `O(N*log(N))`;\r\nexpected worst-case space complexity is `O(N)` (not counting the storage required for input arguments).\r\n\r\n\r\nI wrote the following solution, \r\n\r\n    class Solution {\r\n        private class Jump {\r\n            int position;\r\n            int number;\r\n    \r\n            public int getPosition() {\r\n                return position;\r\n            }\r\n    \r\n            public int getNumber() {\r\n                return number;\r\n            }\r\n    \r\n            public Jump(int pos, int number) {\r\n                this.position = pos;\r\n                this.number = number;\r\n            }\r\n        }\r\n    \r\n        public int solution(int[] A) {\r\n    \r\n            int N = A.length;\r\n    \r\n            List&lt;Integer&gt; fibs = getFibonacciNumbers(N + 1);\r\n    \r\n            Stack&lt;Jump&gt; jumps = new Stack&lt;&gt;();\r\n            jumps.push(new Jump(-1, 0));\r\n    \r\n            boolean[] visited = new boolean[N];\r\n    \r\n            while (!jumps.isEmpty()) {\r\n    \r\n                Jump jump = jumps.pop();\r\n    \r\n                int position = jump.getPosition();\r\n                int number = jump.getNumber();\r\n    \r\n                for (int fib : fibs) {\r\n    \r\n                    if (position + fib &gt; N) {\r\n                        break;\r\n                    } else if (position + fib == N) {\r\n                        return number + 1;\r\n                    } else if (!visited[position + fib] &amp;&amp; A[position + fib] == 1) {\r\n    \r\n                        visited[position + fib] = true;\r\n                        jumps.add(new Jump(position + fib, number + 1));\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return -1;\r\n        }\r\n    \r\n    \r\n        private List&lt;Integer&gt; getFibonacciNumbers(int N) {\r\n    \r\n            List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n    \r\n            for (int i = 0; i &lt; 2; i++) {\r\n                list.add(i);\r\n            }\r\n    \r\n            int i = 2;\r\n    \r\n            while (list.get(list.size() - 1) &lt;= N) {\r\n    \r\n                list.add(i, (list.get(i - 1) + list.get(i - 2)));\r\n                i++;\r\n            }\r\n    \r\n            for (i = 0; i &lt; 2; i++) {\r\n                list.remove(i);\r\n            }\r\n    \r\n            return list;\r\n        }\r\n\r\n\r\n\r\n\r\n        public static void main(String[] args) {\r\n\r\n        int[] A = new int[11];\r\n\r\n        A[0] = 0;\r\n        A[1] = 0;\r\n        A[2] = 0;\r\n        A[3] = 1;\r\n        A[4] = 1;\r\n        A[5] = 0;\r\n        A[6] = 1;\r\n        A[7] = 0;\r\n        A[8] = 0;\r\n        A[9] = 0;\r\n        A[10] = 0;\r\n\r\n        System.out.println(solution(A));\r\n       }\r\n    }\r\n\r\n\r\nHowever, while the correctness seems good, the performance is not high enough.  Is there a bug in the code and how do I improve the performance?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nknZO.png","title":"Count the minimum number of jumps required for a frog to get to the other side of a river","body":"<p>I work with a Codility problem provided below, </p>\n\n<p>The Fibonacci sequence is defined using the following recursive formula:</p>\n\n<pre><code>F(0) = 0\nF(1) = 1\nF(M) = F(M - 1) + F(M - 2) if M &gt;= 2\n</code></pre>\n\n<p>A small frog wants to get to the other side of a river. The frog is initially located at one bank of the river (position −1) and wants to get to the other bank (position N). The frog can jump over any distance F(K), where F(K) is the K-th Fibonacci number. Luckily, there are many leaves on the river, and the frog can jump between the leaves, but only in the direction of the bank at position N.</p>\n\n<p>The leaves on the river are represented in an array A consisting of N integers. Consecutive elements of array A represent consecutive positions from 0 to N − 1 on the river. Array A contains only 0s and/or 1s:</p>\n\n<p>0 represents a position without a leaf;\n1 represents a position containing a leaf.\nThe goal is to count the minimum number of jumps in which the frog can get to the other side of the river (from position −1 to position N). The frog can jump between positions −1 and N (the banks of the river) and every position containing a leaf.</p>\n\n<p>For example, consider array A such that:</p>\n\n<pre><code>A[0] = 0\nA[1] = 0\nA[2] = 0\nA[3] = 1\nA[4] = 1\nA[5] = 0\nA[6] = 1\nA[7] = 0\nA[8] = 0\nA[9] = 0\nA[10] = 0\n</code></pre>\n\n<p>The frog can make three jumps of length F(5) = 5, F(3) = 2 and F(5) = 5.</p>\n\n<p>Write a function:</p>\n\n<pre><code>class Solution { public int solution(int[] A); }\n</code></pre>\n\n<p>that, given an array A consisting of N integers, returns the minimum number of jumps by which the frog can get to the other side of the river. If the frog cannot reach the other side of the river, the function should return −1.</p>\n\n<p>For example, given:</p>\n\n<pre><code>A[0] = 0\nA[1] = 0\nA[2] = 0\nA[3] = 1\nA[4] = 1\nA[5] = 0\nA[6] = 1\nA[7] = 0\nA[8] = 0\nA[9] = 0\nA[10] = 0\n</code></pre>\n\n<p>the function should return 3, as explained above.</p>\n\n<p>Assume that:</p>\n\n<p>N is an integer within the range <code>[0..100,000]</code>;\neach element of array A is an integer that can have one of the following values: 0, 1.\nComplexity:</p>\n\n<p>expected worst-case time complexity is <code>O(N*log(N))</code>;\nexpected worst-case space complexity is <code>O(N)</code> (not counting the storage required for input arguments).</p>\n\n<p>I wrote the following solution, </p>\n\n<pre><code>class Solution {\n    private class Jump {\n        int position;\n        int number;\n\n        public int getPosition() {\n            return position;\n        }\n\n        public int getNumber() {\n            return number;\n        }\n\n        public Jump(int pos, int number) {\n            this.position = pos;\n            this.number = number;\n        }\n    }\n\n    public int solution(int[] A) {\n\n        int N = A.length;\n\n        List&lt;Integer&gt; fibs = getFibonacciNumbers(N + 1);\n\n        Stack&lt;Jump&gt; jumps = new Stack&lt;&gt;();\n        jumps.push(new Jump(-1, 0));\n\n        boolean[] visited = new boolean[N];\n\n        while (!jumps.isEmpty()) {\n\n            Jump jump = jumps.pop();\n\n            int position = jump.getPosition();\n            int number = jump.getNumber();\n\n            for (int fib : fibs) {\n\n                if (position + fib &gt; N) {\n                    break;\n                } else if (position + fib == N) {\n                    return number + 1;\n                } else if (!visited[position + fib] &amp;&amp; A[position + fib] == 1) {\n\n                    visited[position + fib] = true;\n                    jumps.add(new Jump(position + fib, number + 1));\n                }\n            }\n        }\n\n        return -1;\n    }\n\n\n    private List&lt;Integer&gt; getFibonacciNumbers(int N) {\n\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; 2; i++) {\n            list.add(i);\n        }\n\n        int i = 2;\n\n        while (list.get(list.size() - 1) &lt;= N) {\n\n            list.add(i, (list.get(i - 1) + list.get(i - 2)));\n            i++;\n        }\n\n        for (i = 0; i &lt; 2; i++) {\n            list.remove(i);\n        }\n\n        return list;\n    }\n\n\n\n\n    public static void main(String[] args) {\n\n    int[] A = new int[11];\n\n    A[0] = 0;\n    A[1] = 0;\n    A[2] = 0;\n    A[3] = 1;\n    A[4] = 1;\n    A[5] = 0;\n    A[6] = 1;\n    A[7] = 0;\n    A[8] = 0;\n    A[9] = 0;\n    A[10] = 0;\n\n    System.out.println(solution(A));\n   }\n}\n</code></pre>\n\n<p>However, while the correctness seems good, the performance is not high enough.  Is there a bug in the code and how do I improve the performance?</p>\n\n<p><a href=\"https://i.stack.imgur.com/nknZO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nknZO.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","tomcat","deployment"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1511140390,"post_id":47383794,"comment_id":81720305,"body_markdown":"There are standard methods for storing application data that is not part of the deployment.  You do this by writing your code so it uses a system property (i.e. a configuration variable) to tell it where application data is to be stored outside of the application itself.","body":"There are standard methods for storing application data that is not part of the deployment.  You do this by writing your code so it uses a system property (i.e. a configuration variable) to tell it where application data is to be stored outside of the application itself."},{"owner":{"account_id":1963969,"reputation":2728,"user_id":1764693,"accept_rate":100,"display_name":"slipperyseal"},"score":0,"creation_date":1511140452,"post_id":47383794,"comment_id":81720320,"body_markdown":"preserving folders isn&#39;t really possible and any hack would be bad practice. as jim mentioned, you could look at storing things outside the project itself. Or, you could look at splitting your application into multiple war files. put all the large images etc in a different project. But it could still be managed and deployed as a war.","body":"preserving folders isn&#39;t really possible and any hack would be bad practice. as jim mentioned, you could look at storing things outside the project itself. Or, you could look at splitting your application into multiple war files. put all the large images etc in a different project. But it could still be managed and deployed as a war."},{"owner":{"account_id":4829520,"reputation":64,"user_id":3898032,"display_name":"dave110022"},"score":0,"creation_date":1511586684,"post_id":47383794,"comment_id":81920409,"body_markdown":"My reason is this:  I am developing an application which (I hope one day) will have a lot of users.  If I store outside the document root then I need to use a Servlet to access the file system which means spawning a new java Thread and I think I should not be doing that if I want to maximise efficiency. If I store in the document root the file can be sent direct to the client by the web server (in my case nginx) which I believe is much more efficient.  Please tell me if I have a fault in my logic.","body":"My reason is this:  I am developing an application which (I hope one day) will have a lot of users.  If I store outside the document root then I need to use a Servlet to access the file system which means spawning a new java Thread and I think I should not be doing that if I want to maximise efficiency. If I store in the document root the file can be sent direct to the client by the web server (in my case nginx) which I believe is much more efficient.  Please tell me if I have a fault in my logic."}],"answers":[{"tags":[],"owner":{"account_id":4829520,"reputation":64,"user_id":3898032,"display_name":"dave110022"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636373615,"creation_date":1636373615,"answer_id":69883280,"question_id":47383794,"body_markdown":"I solved this as follows:  store data outside the document root in a folder with the right permissions, then use the &quot;alias&quot; statement in the web server config file.\r\n\r\nIn my case I am using nginx and my location statement is:\r\n\r\n```\r\n    location /MyApp/data{alias /opt/myapp/data;}\r\n\r\n```\r\nThen I can refer to /data within the app.       ","title":"How to preserve folders on server when deploying war file","body":"<p>I solved this as follows:  store data outside the document root in a folder with the right permissions, then use the &quot;alias&quot; statement in the web server config file.</p>\n<p>In my case I am using nginx and my location statement is:</p>\n<pre><code>    location /MyApp/data{alias /opt/myapp/data;}\n\n</code></pre>\n<p>Then I can refer to /data within the app.</p>\n"}],"owner":{"account_id":4829520,"reputation":64,"user_id":3898032,"display_name":"dave110022"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1636373615,"creation_date":1511140268,"question_id":47383794,"body_markdown":"I am developing an application using Tomcat.  I deploy by copying in a war file and restarting the tomcat serice.  However, I have large folders full of images and other ancillary data.  My question is:  is there an alternative to including all the data in the war file for deployment?  Specifically:\r\n1) Can folders in the app folder be &quot;protected&quot; during deployment of a war file so they will not be deleted?\r\n2) Would it be bad practice to upload amended classes and jsp files piecemeal to the app folder rather than re-deploy a whole .war file each time?  If it is bad practice, why?","title":"How to preserve folders on server when deploying war file","body":"<p>I am developing an application using Tomcat.  I deploy by copying in a war file and restarting the tomcat serice.  However, I have large folders full of images and other ancillary data.  My question is:  is there an alternative to including all the data in the war file for deployment?  Specifically:\n1) Can folders in the app folder be \"protected\" during deployment of a war file so they will not be deleted?\n2) Would it be bad practice to upload amended classes and jsp files piecemeal to the app folder rather than re-deploy a whole .war file each time?  If it is bad practice, why?</p>\n"},{"tags":["java","angularjs","spring-batch","blob"],"answers":[{"tags":[],"owner":{"account_id":22039646,"reputation":1477,"user_id":16305607,"display_name":"majusebetter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636365383,"creation_date":1636364895,"answer_id":69881487,"question_id":69880993,"body_markdown":"This is a plain JavaScript solution without [angularjs-file-model][1] demonstrating how to convert a selected file to BASE64. You can take this as a starting point:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    function onFileSelected(input) {\r\n        const reader = new FileReader();\r\n        \r\n        reader.addEventListener(&#39;load&#39;, event =&gt; {\r\n            const dataURL = event.target.result;\r\n            \r\n            // Cut away &quot;data:image/png;base64,&quot;\r\n            const base64 = dataURL.substring(dataURL.lastIndexOf(&#39;,&#39;) + 1);\r\n            console.log(base64);\r\n        });\r\n\r\n        reader.addEventListener(&#39;error&#39;, () =&gt; {\r\n            // Error handling code\r\n        })\r\n        \r\n        reader.readAsDataURL(input.files[0]);\r\n    }\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;input type=&quot;file&quot; id=&quot;fileSelector1&quot; class=&quot;form-control&quot; name=&quot;schemeupload&quot; accept=&quot;image/jpeg&quot; onchange=&quot;onFileSelected(this)&quot;&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n  [1]: https://www.npmjs.com/package/angularjs-file-model\r\n\r\n`angularjs-file-model` should project the file object into your model when using `file-model` together with `as-file`. You might be able to use it here instead of `input.files[0]`.\r\n","title":"Save Image base 64 AngularJS Spring-Batch","body":"<p>This is a plain JavaScript solution without <a href=\"https://www.npmjs.com/package/angularjs-file-model\" rel=\"nofollow noreferrer\">angularjs-file-model</a> demonstrating how to convert a selected file to BASE64. You can take this as a starting point:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function onFileSelected(input) {\n    const reader = new FileReader();\n    \n    reader.addEventListener('load', event =&gt; {\n        const dataURL = event.target.result;\n        \n        // Cut away \"data:image/png;base64,\"\n        const base64 = dataURL.substring(dataURL.lastIndexOf(',') + 1);\n        console.log(base64);\n    });\n\n    reader.addEventListener('error', () =&gt; {\n        // Error handling code\n    })\n    \n    reader.readAsDataURL(input.files[0]);\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input type=\"file\" id=\"fileSelector1\" class=\"form-control\" name=\"schemeupload\" accept=\"image/jpeg\" onchange=\"onFileSelected(this)\"&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><code>angularjs-file-model</code> should project the file object into your model when using <code>file-model</code> together with <code>as-file</code>. You might be able to use it here instead of <code>input.files[0]</code>.</p>\n"}],"owner":{"account_id":22938657,"reputation":43,"user_id":17077944,"display_name":"nazonekio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1636373586,"creation_date":1636362515,"question_id":69880993,"body_markdown":"I need to allow the user to choose a image from his pc, then this image should be save in the database in a blob column.\r\nI have this code for select image:\r\n\r\n    &lt;input type=&quot;file&quot; id=&quot;fileSelector1&quot; class=&quot;form-control&quot; name=&quot;schemeupload&quot; accept=&quot;image/jpeg&quot; file-model=&quot;vm.schemeApply.documents[0]&quot;/&gt;\r\n\r\nThen I have to cast the image to base64 for sending to the back(java) and then in the back part insert the base64 string into de blob column? or I have to do in other way? is first time I have to save image.\r\n\r\nI know that is not efficient to save image as that but I have to do in that way.\r\n\r\nEDIT:\r\nI use now this:\r\n\r\n    &lt;input type=&quot;file&quot; id=&quot;fileSelector1&quot; class=&quot;form-control&quot; name=&quot;schemeupload&quot; ng-model=&quot;img_icon&quot; file-model as-file accept=&quot;image/jpeg&quot; ng-change=&quot;onFileSelected(this)&quot; /&gt; \r\n\r\nBut I don&#180;t know how to get the img for getting base64 string","title":"Save Image base 64 AngularJS Spring-Batch","body":"<p>I need to allow the user to choose a image from his pc, then this image should be save in the database in a blob column.\nI have this code for select image:</p>\n<pre><code>&lt;input type=&quot;file&quot; id=&quot;fileSelector1&quot; class=&quot;form-control&quot; name=&quot;schemeupload&quot; accept=&quot;image/jpeg&quot; file-model=&quot;vm.schemeApply.documents[0]&quot;/&gt;\n</code></pre>\n<p>Then I have to cast the image to base64 for sending to the back(java) and then in the back part insert the base64 string into de blob column? or I have to do in other way? is first time I have to save image.</p>\n<p>I know that is not efficient to save image as that but I have to do in that way.</p>\n<p>EDIT:\nI use now this:</p>\n<pre><code>&lt;input type=&quot;file&quot; id=&quot;fileSelector1&quot; class=&quot;form-control&quot; name=&quot;schemeupload&quot; ng-model=&quot;img_icon&quot; file-model as-file accept=&quot;image/jpeg&quot; ng-change=&quot;onFileSelected(this)&quot; /&gt; \n</code></pre>\n<p>But I don´t know how to get the img for getting base64 string</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1636373992,"post_id":69883267,"comment_id":123531062,"body_markdown":"Please see the following https://stackoverflow.com/questions/1402005/how-to-check-if-internet-connection-is-present-in-java .","body":"Please see the following <a href=\"https://stackoverflow.com/questions/1402005/how-to-check-if-internet-connection-is-present-in-java\" title=\"how to check if internet connection is present in java\">stackoverflow.com/questions/1402005/&hellip;</a> ."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1636374504,"post_id":69883267,"comment_id":123531257,"body_markdown":"so ping `127.0.0.1` (or equivalent)(!)?","body":"so ping <code>127.0.0.1</code> (or equivalent)(!)?"},{"owner":{"account_id":12210699,"reputation":694,"user_id":8912565,"display_name":"Ravik"},"score":0,"creation_date":1636375704,"post_id":69883267,"comment_id":123531739,"body_markdown":"Pls read the question and answered posted in the link by @SusanMustafa it has all the details that you need","body":"Pls read the question and answered posted in the link by @SusanMustafa it has all the details that you need"}],"owner":{"account_id":7946430,"reputation":37,"user_id":5998806,"display_name":"Arthur Pendragon De Simone"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":590,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1636373550,"creation_date":1636373550,"question_id":69883267,"body_markdown":"I have a spring boot application which passes through the pipeline of my company. However, it fails to pass the Chaos Monkey attack, basically the attack shuts down the internet and hopes that the spring app responds with DOWN status on its health check. I cannot access or ping any external website since it violates the security of another step of the pipeline.\r\nHow can I make the code below workable?\r\n```\r\n@Component\r\npublic class PersonalHealthIndicator implements HealthIndicator {\r\n   \r\n    @Override\r\n    public Health health() {\r\n        int errorCode = check(); // m&#233;todo que faz a verifica&#231;&#227;o do health check\r\n \r\n        if (errorCode != 0) {\r\n            // A verifica&#231;&#227;o falhou, ent&#227;o ser&#225; retornado um status &quot;DOWN&quot;\r\n            return Health.down()\r\n              .withDetail(&quot;Error Code&quot;, errorCode).build();\r\n        }\r\n \r\n        // A verifica&#231;&#227;o funcionou, ser&#225; retornado um status &quot;UP&quot;\r\n        return Health.up().build();\r\n    }\r\n      \r\n    public int check() {\r\n        // Aqui fica nossa l&#243;gica customizada para executar o health check\r\n        return 0;\r\n    }\r\n}\r\n```","title":"How to detect internet connection on Spring Boot?","body":"<p>I have a spring boot application which passes through the pipeline of my company. However, it fails to pass the Chaos Monkey attack, basically the attack shuts down the internet and hopes that the spring app responds with DOWN status on its health check. I cannot access or ping any external website since it violates the security of another step of the pipeline.\nHow can I make the code below workable?</p>\n<pre><code>@Component\npublic class PersonalHealthIndicator implements HealthIndicator {\n   \n    @Override\n    public Health health() {\n        int errorCode = check(); // método que faz a verificação do health check\n \n        if (errorCode != 0) {\n            // A verificação falhou, então será retornado um status &quot;DOWN&quot;\n            return Health.down()\n              .withDetail(&quot;Error Code&quot;, errorCode).build();\n        }\n \n        // A verificação funcionou, será retornado um status &quot;UP&quot;\n        return Health.up().build();\n    }\n      \n    public int check() {\n        // Aqui fica nossa lógica customizada para executar o health check\n        return 0;\n    }\n}\n</code></pre>\n"},{"tags":["java","google-cloud-dataflow","apache-beam"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1636236470,"post_id":69867998,"comment_id":123504174,"body_markdown":"Does it work if you use the pipeline resource hint, but leave it at 8G rather than increasing to 32G? Does the pipeline level hint work at 32G?","body":"Does it work if you use the pipeline resource hint, but leave it at 8G rather than increasing to 32G? Does the pipeline level hint work at 32G?"},{"owner":{"account_id":316802,"reputation":10754,"user_id":633150,"display_name":"Brent Worden"},"score":0,"creation_date":1636373499,"post_id":69867998,"comment_id":123530862,"body_markdown":"@tgdavies, if the pipeline level resources hints and step level resources hint are both set to 8GiB, the pipeline fails with the same repetitive error.","body":"@tgdavies, if the pipeline level resources hints and step level resources hint are both set to 8GiB, the pipeline fails with the same repetitive error."},{"owner":{"account_id":20093737,"reputation":6918,"user_id":14733669,"display_name":"Ricco D"},"score":0,"creation_date":1636447401,"post_id":69867998,"comment_id":123552674,"body_markdown":"I tried running a custom template of mine which is in Python (I don&#39;t have Beam written in Java) and I added `resource_hints=min_ram=8GB ` in PTransform, Pipeline options and via `gcloud dataflow job runs` and everything works fine. Please open an issue in https://issues.apache.org/jira/projects/BEAM/issues/","body":"I tried running a custom template of mine which is in Python (I don&#39;t have Beam written in Java) and I added <code>resource_hints=min_ram=8GB </code> in PTransform, Pipeline options and via <code>gcloud dataflow job runs</code> and everything works fine. Please open an issue in <a href=\"https://issues.apache.org/jira/projects/BEAM/issues/\" rel=\"nofollow noreferrer\">issues.apache.org/jira/projects/BEAM/issues</a>"},{"owner":{"account_id":316802,"reputation":10754,"user_id":633150,"display_name":"Brent Worden"},"score":0,"creation_date":1636654852,"post_id":69867998,"comment_id":123621394,"body_markdown":"@RiccoD https://issues.apache.org/jira/browse/BEAM-13225 has been created.","body":"@RiccoD <a href=\"https://issues.apache.org/jira/browse/BEAM-13225\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/BEAM-13225</a> has been created."}],"owner":{"account_id":316802,"reputation":10754,"user_id":633150,"display_name":"Brent Worden"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":675,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1636373533,"creation_date":1636233659,"question_id":69867998,"body_markdown":"I have a classic Dataflow template written using the Apache Beam Java SDK v2.32.0.  The template simply consumes messages from a Pub/Sub subscription and writes them to Google Cloud Storage.\r\n\r\nThe template can successfully be used to run jobs with [Dataflow Prime][1] experimental features enabled through `--additional-experiments enable_prime` and providing a pipeline level resource hint using `--parameters=resourceHints=min_ram=8GiB`:\r\n```lang-sh\r\ngcloud dataflow jobs run my-job-name \\\r\n  --additional-experiments enable_prime \\\r\n  --disable-public-ips \\\r\n  --gcs-location gs://bucket/path/to/template \\\r\n  --num-workers 1  \\\r\n  --max-workers 16 \\\r\n  --parameters=resourceHints=min_ram=8GiB,other_pipeline_options=true \\\r\n  --project my-project \\\r\n  --region us-central1 \\\r\n  --service-account-email my-service-account@my-project.iam.gserviceaccount.com \\\r\n  --staging-location gs://bucket/path/to/staging\r\n  --subnetwork https://www.googleapis.com/compute/v1/projects/my-project/regions/us-central1/subnetworks/my-subnet\r\n```\r\n\r\nIn an attempt to use Dataflow Prime&#39;s [Right Fitting][2] capability, I change the pipeline code to include a resource hint on the FileIO transform:\r\n```lang-java\r\nclass WriteGcsFileTransform\r\n    extends PTransform&lt;PCollection&lt;Input&gt;, WriteFilesResult&lt;Destination&gt;&gt; {\r\n\r\n  private static final long serialVersionUID = 1L;\r\n\r\n  @Override\r\n  public WriteFilesResult&lt;Destination&gt; expand(PCollection&lt;Input&gt; input) {\r\n\r\n    return input.apply(\r\n        FileIO.&lt;Destination, Input&gt;writeDynamic()\r\n            .by(myDynamicDestinationFunction)\r\n            .withDestinationCoder(Destination.coder())\r\n            .withNumShards(8)\r\n            .withNaming(myDestinationFileNamingFunction)\r\n            .withTempDirectory(&quot;gs://bucket/path/to/temp&quot;)\r\n            .withCompression(Compression.GZIP)\r\n            .setResourceHints(ResourceHints.create().withMinRam(&quot;32GiB&quot;))\r\n        );\r\n  }\r\n```\r\n\r\nAttempting to run jobs from a template based on the new code results in a continuous crash loop with the job never successfully running.  The lone repeated error log entry is:\r\n```lang-json\r\n{\r\n  &quot;insertId&quot;: &quot;s=97e1ecd30e0243609d555685318325b4;i=4e1;b=6c7f5d65f3994eada5f20672dab1daf1;m=912f16c;t=5d024689cb030;x=b36751718b3d80c1&quot;,\r\n  &quot;jsonPayload&quot;: {\r\n    &quot;line&quot;: &quot;pod_workers.go:191&quot;,\r\n    &quot;message&quot;: &quot;Error syncing pod 4cf7cbf98df4b5e2d054abce7da1262b (\\&quot;df-df-hvm-my-job-name-11061310-qn51-harness-jb9f_default(4cf7c6bf982df4b5eb2d054abce7da12)\\&quot;), skipping: failed to \\&quot;StartContainer\\&quot; for \\&quot;artifact\\&quot; with CrashLoopBackOff: \\&quot;back-off 40s restarting failed container=artifact pod=df-df-hvm-my-job-name-11061310-qn51-harness-jb9f_default(4cf7c6bf982df4b5eb2d054abce7da12)\\&quot;&quot;,\r\n    &quot;thread&quot;: &quot;807&quot;\r\n  },\r\n  &quot;resource&quot;: {\r\n    &quot;type&quot;: &quot;dataflow_step&quot;,\r\n    &quot;labels&quot;: {\r\n      &quot;project_id&quot;: &quot;my-project&quot;,\r\n      &quot;region&quot;: &quot;us-central1&quot;,\r\n      &quot;step_id&quot;: &quot;&quot;,\r\n      &quot;job_id&quot;: &quot;2021-11-06_12_10_27-510057810808146686&quot;,\r\n      &quot;job_name&quot;: &quot;my-job-name&quot;\r\n    }\r\n  },\r\n  &quot;timestamp&quot;: &quot;2021-11-06T20:14:36.052491Z&quot;,\r\n  &quot;severity&quot;: &quot;ERROR&quot;,\r\n  &quot;labels&quot;: {\r\n    &quot;compute.googleapis.com/resource_type&quot;: &quot;instance&quot;,\r\n    &quot;dataflow.googleapis.com/log_type&quot;: &quot;system&quot;,\r\n    &quot;compute.googleapis.com/resource_id&quot;: &quot;4695846446965678007&quot;,\r\n    &quot;dataflow.googleapis.com/job_name&quot;: &quot;my-job-name&quot;,\r\n    &quot;dataflow.googleapis.com/job_id&quot;: &quot;2021-11-06_12_10_27-510057810808146686&quot;,\r\n    &quot;dataflow.googleapis.com/region&quot;: &quot;us-central1&quot;,\r\n    &quot;dataflow.googleapis.com/service_option&quot;: &quot;prime&quot;,\r\n    &quot;compute.googleapis.com/resource_name&quot;: &quot;df-hvm-my-job-name-11061310-qn51-harness-jb9f&quot;\r\n  },\r\n  &quot;logName&quot;: &quot;projects/my-project/logs/dataflow.googleapis.com%2Fkubelet&quot;,\r\n  &quot;receiveTimestamp&quot;: &quot;2021-11-06T20:14:46.471285909Z&quot;\r\n}\r\n```\r\n\r\nAm I using resource hints on the transform incorrectly?\r\n\r\n\r\n  [1]: https://cloud.google.com/dataflow/docs/guides/enable-dataflow-prime\r\n  [2]: https://cloud.google.com/dataflow/docs/guides/right-fitting","title":"Dataflow Prime job fails when providing resource hints on a transform","body":"<p>I have a classic Dataflow template written using the Apache Beam Java SDK v2.32.0.  The template simply consumes messages from a Pub/Sub subscription and writes them to Google Cloud Storage.</p>\n<p>The template can successfully be used to run jobs with <a href=\"https://cloud.google.com/dataflow/docs/guides/enable-dataflow-prime\" rel=\"nofollow noreferrer\">Dataflow Prime</a> experimental features enabled through <code>--additional-experiments enable_prime</code> and providing a pipeline level resource hint using <code>--parameters=resourceHints=min_ram=8GiB</code>:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>gcloud dataflow jobs run my-job-name \\\n  --additional-experiments enable_prime \\\n  --disable-public-ips \\\n  --gcs-location gs://bucket/path/to/template \\\n  --num-workers 1  \\\n  --max-workers 16 \\\n  --parameters=resourceHints=min_ram=8GiB,other_pipeline_options=true \\\n  --project my-project \\\n  --region us-central1 \\\n  --service-account-email my-service-account@my-project.iam.gserviceaccount.com \\\n  --staging-location gs://bucket/path/to/staging\n  --subnetwork https://www.googleapis.com/compute/v1/projects/my-project/regions/us-central1/subnetworks/my-subnet\n</code></pre>\n<p>In an attempt to use Dataflow Prime's <a href=\"https://cloud.google.com/dataflow/docs/guides/right-fitting\" rel=\"nofollow noreferrer\">Right Fitting</a> capability, I change the pipeline code to include a resource hint on the FileIO transform:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class WriteGcsFileTransform\n    extends PTransform&lt;PCollection&lt;Input&gt;, WriteFilesResult&lt;Destination&gt;&gt; {\n\n  private static final long serialVersionUID = 1L;\n\n  @Override\n  public WriteFilesResult&lt;Destination&gt; expand(PCollection&lt;Input&gt; input) {\n\n    return input.apply(\n        FileIO.&lt;Destination, Input&gt;writeDynamic()\n            .by(myDynamicDestinationFunction)\n            .withDestinationCoder(Destination.coder())\n            .withNumShards(8)\n            .withNaming(myDestinationFileNamingFunction)\n            .withTempDirectory(&quot;gs://bucket/path/to/temp&quot;)\n            .withCompression(Compression.GZIP)\n            .setResourceHints(ResourceHints.create().withMinRam(&quot;32GiB&quot;))\n        );\n  }\n</code></pre>\n<p>Attempting to run jobs from a template based on the new code results in a continuous crash loop with the job never successfully running.  The lone repeated error log entry is:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;insertId&quot;: &quot;s=97e1ecd30e0243609d555685318325b4;i=4e1;b=6c7f5d65f3994eada5f20672dab1daf1;m=912f16c;t=5d024689cb030;x=b36751718b3d80c1&quot;,\n  &quot;jsonPayload&quot;: {\n    &quot;line&quot;: &quot;pod_workers.go:191&quot;,\n    &quot;message&quot;: &quot;Error syncing pod 4cf7cbf98df4b5e2d054abce7da1262b (\\&quot;df-df-hvm-my-job-name-11061310-qn51-harness-jb9f_default(4cf7c6bf982df4b5eb2d054abce7da12)\\&quot;), skipping: failed to \\&quot;StartContainer\\&quot; for \\&quot;artifact\\&quot; with CrashLoopBackOff: \\&quot;back-off 40s restarting failed container=artifact pod=df-df-hvm-my-job-name-11061310-qn51-harness-jb9f_default(4cf7c6bf982df4b5eb2d054abce7da12)\\&quot;&quot;,\n    &quot;thread&quot;: &quot;807&quot;\n  },\n  &quot;resource&quot;: {\n    &quot;type&quot;: &quot;dataflow_step&quot;,\n    &quot;labels&quot;: {\n      &quot;project_id&quot;: &quot;my-project&quot;,\n      &quot;region&quot;: &quot;us-central1&quot;,\n      &quot;step_id&quot;: &quot;&quot;,\n      &quot;job_id&quot;: &quot;2021-11-06_12_10_27-510057810808146686&quot;,\n      &quot;job_name&quot;: &quot;my-job-name&quot;\n    }\n  },\n  &quot;timestamp&quot;: &quot;2021-11-06T20:14:36.052491Z&quot;,\n  &quot;severity&quot;: &quot;ERROR&quot;,\n  &quot;labels&quot;: {\n    &quot;compute.googleapis.com/resource_type&quot;: &quot;instance&quot;,\n    &quot;dataflow.googleapis.com/log_type&quot;: &quot;system&quot;,\n    &quot;compute.googleapis.com/resource_id&quot;: &quot;4695846446965678007&quot;,\n    &quot;dataflow.googleapis.com/job_name&quot;: &quot;my-job-name&quot;,\n    &quot;dataflow.googleapis.com/job_id&quot;: &quot;2021-11-06_12_10_27-510057810808146686&quot;,\n    &quot;dataflow.googleapis.com/region&quot;: &quot;us-central1&quot;,\n    &quot;dataflow.googleapis.com/service_option&quot;: &quot;prime&quot;,\n    &quot;compute.googleapis.com/resource_name&quot;: &quot;df-hvm-my-job-name-11061310-qn51-harness-jb9f&quot;\n  },\n  &quot;logName&quot;: &quot;projects/my-project/logs/dataflow.googleapis.com%2Fkubelet&quot;,\n  &quot;receiveTimestamp&quot;: &quot;2021-11-06T20:14:46.471285909Z&quot;\n}\n</code></pre>\n<p>Am I using resource hints on the transform incorrectly?</p>\n"},{"tags":["java","byte","bit"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1636373738,"post_id":69883263,"comment_id":123530949,"body_markdown":"So you basically want to iterate over all bits of an array? Is [`BitSet`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html) sufficient for your purpose?","body":"So you basically want to iterate over all bits of an array? Is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html\" rel=\"nofollow noreferrer\"><code>BitSet</code></a> sufficient for your purpose?"},{"owner":{"account_id":7797973,"reputation":6780,"user_id":5898421,"display_name":"Andrew Parks"},"score":1,"creation_date":1636373783,"post_id":69883263,"comment_id":123530968,"body_markdown":"https://stackoverflow.com/a/1034888/5898421 is what you&#39;re looking for","body":"<a href=\"https://stackoverflow.com/a/1034888/5898421\">stackoverflow.com/a/1034888/5898421</a> is what you&#39;re looking for"}],"owner":{"account_id":21495636,"reputation":97,"user_id":15840697,"display_name":"Kristina"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1636374228,"answer_count":0,"score":0,"last_activity_date":1636373531,"creation_date":1636373531,"question_id":69883263,"body_markdown":"I have a byte array and I need a stream of bits. I&#39;ve figured out that this is not completely straight forward. I&#39;ll be using a while loop and doing something to every bit.\r\n\r\n(Pseudo of what I think I need)\r\n``` \r\nbytes[] byteArray = //somecode\r\nBitStream bitstream = new BitStream(byteArray);\r\n\r\nwhile (bitstream.hasNext) { //or bitstream.read != -1\r\n//do something with bit\r\n}\r\n```\r\n\r\n**EDIT:** By the way, as far as I know, BitStream is not actually a class, but just to show what I think I need.","title":"How can I create a stream of bits from a byte array?","body":"<p>I have a byte array and I need a stream of bits. I've figured out that this is not completely straight forward. I'll be using a while loop and doing something to every bit.</p>\n<p>(Pseudo of what I think I need)</p>\n<pre><code>bytes[] byteArray = //somecode\nBitStream bitstream = new BitStream(byteArray);\n\nwhile (bitstream.hasNext) { //or bitstream.read != -1\n//do something with bit\n}\n</code></pre>\n<p><strong>EDIT:</strong> By the way, as far as I know, BitStream is not actually a class, but just to show what I think I need.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1636398285,"post_id":69883193,"comment_id":123541198,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":22150217,"reputation":3,"user_id":16398885,"display_name":"ANBU RAJA"},"score":0,"creation_date":1636440050,"post_id":69883193,"comment_id":123550326,"body_markdown":"I don&#39;t have any implementation. I need the whole solution for that problem.","body":"I don&#39;t have any implementation. I need the whole solution for that problem."}],"owner":{"account_id":22150217,"reputation":3,"user_id":16398885,"display_name":"ANBU RAJA"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1636373448,"creation_date":1636373182,"question_id":69883193,"body_markdown":"I need to change my old solr cores into new solr core using Java Program. \r\nIf there Any possible to change the old version solr core into new version solr core?","title":"Importing Solr Cores from one old Solr to another solr(solr version 4 to solr version ) Using Java","body":"<p>I need to change my old solr cores into new solr core using Java Program.\nIf there Any possible to change the old version solr core into new version solr core?</p>\n"},{"tags":["java","android","androidx","leanback"],"owner":{"account_id":6088348,"reputation":13,"user_id":4751537,"display_name":"Enas AL Saeek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1636373016,"creation_date":1635931657,"question_id":69822448,"body_markdown":"This is my code in old library\r\n\r\n**android.support.v17.leanback.transition.SlideCallback;**\r\n\r\nupdated to \r\n\r\n**androidx.leanback.transition;**\r\n\r\nhow can I convert this code?\r\n\r\n```\r\n\r\nimport androidx.leanback.transition.*;\r\n\r\npublic class VGDetailsTitleTransitionHelper {\r\n\r\n    final static  SlideCallback sSlideCallback = new SlideCallback() {\r\n        @Override\r\n        public boolean getSlide(View view, boolean appear, int[] edge, float[] distance) {\r\n            edge[0] = TransitionHelper.SLIDE_TOP;\r\n            Log.v(&quot;getSlide details&quot;, &quot;&quot; + view.getHeight());\r\n            distance[0] = view.getHeight();\r\n            return true;\r\n        }\r\n    };\r\n\r\n    \r\n\r\n}\r\n```","title":"android: Upgrade My Library from android to androidx but not found this class SlideCallback","body":"<p>This is my code in old library</p>\n<p><strong>android.support.v17.leanback.transition.SlideCallback;</strong></p>\n<p>updated to</p>\n<p><strong>androidx.leanback.transition;</strong></p>\n<p>how can I convert this code?</p>\n<pre><code>\nimport androidx.leanback.transition.*;\n\npublic class VGDetailsTitleTransitionHelper {\n\n    final static  SlideCallback sSlideCallback = new SlideCallback() {\n        @Override\n        public boolean getSlide(View view, boolean appear, int[] edge, float[] distance) {\n            edge[0] = TransitionHelper.SLIDE_TOP;\n            Log.v(&quot;getSlide details&quot;, &quot;&quot; + view.getHeight());\n            distance[0] = view.getHeight();\n            return true;\n        }\n    };\n\n    \n\n}\n</code></pre>\n"},{"tags":["java","spring","mockito","option-type","autowired"],"answers":[{"tags":[],"owner":{"account_id":3068754,"reputation":2677,"user_id":2599899,"display_name":"Arthur Klezovich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636369088,"creation_date":1636369088,"answer_id":69882383,"question_id":69882291,"body_markdown":"I&#39;d setup the mocks in the `@BeforeEach/@BeforeAll` method of the JUnit test.\r\n\r\n```\r\n@BeforeEach\r\npublic void mocking(){\r\n    var repoMock = ... mock repo ..\r\n    var executorMock = mock(BatchInputExecutor.class)\r\n    // configure executorMock here \r\n    var batchInputExecutors = Optional.of(List.of(executorMock))\r\n    var batchInputManager = new BatchInputManager()\r\n    ... set the class level fields here .. \r\n}\r\n``` ","title":"How to Mock Optional Autowired field","body":"<p>I'd setup the mocks in the <code>@BeforeEach/@BeforeAll</code> method of the JUnit test.</p>\n<pre><code>@BeforeEach\npublic void mocking(){\n    var repoMock = ... mock repo ..\n    var executorMock = mock(BatchInputExecutor.class)\n    // configure executorMock here \n    var batchInputExecutors = Optional.of(List.of(executorMock))\n    var batchInputManager = new BatchInputManager()\n    ... set the class level fields here .. \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14878826,"reputation":61,"user_id":10744129,"display_name":"Martin Mondino"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636372490,"creation_date":1636372490,"answer_id":69883053,"question_id":69882291,"body_markdown":"If you really want to use Mockito&#39;s annotations in this case:\r\n\r\nChange this\r\n\r\n```\r\n@Mock\r\nList&lt;BatchInputExecutor&gt; executors;\r\n```\r\n\r\nTo this\r\n```\r\n@Mock\r\nOptional&lt;List&lt;BatchInputExecutor&gt;&gt; executors;\r\n```\r\nAnd configure mockito to supports final classes and methods. See this https://stackoverflow.com/a/40018295/10744129","title":"How to Mock Optional Autowired field","body":"<p>If you really want to use Mockito's annotations in this case:</p>\n<p>Change this</p>\n<pre><code>@Mock\nList&lt;BatchInputExecutor&gt; executors;\n</code></pre>\n<p>To this</p>\n<pre><code>@Mock\nOptional&lt;List&lt;BatchInputExecutor&gt;&gt; executors;\n</code></pre>\n<p>And configure mockito to supports final classes and methods. See this <a href=\"https://stackoverflow.com/a/40018295/10744129\">https://stackoverflow.com/a/40018295/10744129</a></p>\n"}],"owner":{"account_id":6381401,"reputation":1720,"user_id":4950717,"accept_rate":89,"display_name":"Mattew Eon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":785,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1636372490,"creation_date":1636368651,"question_id":69882291,"body_markdown":"I am trying to make a unit test with Mockito and I cannot find any way to mock my constructor&#39;s optional autowired field.\r\n\r\nHere is my constructor:\r\n \r\n```java\r\n@Autowired\r\npublic BatchInputManager(\r\n    BatchInputContentRepository batchInputContentRepository,\r\n    Optional&lt;List&lt;BatchInputExecutor&gt;&gt; batchInputExecutors) {\r\n    // ...\r\n}\r\n```\r\n\r\nAnd here is how I try to mock these fields :\r\n```java\r\n@InjectMocks\r\nBatchInputManager batchInputManager;\r\n@Mock\r\nBatchInputContentRepository batchInputContentRepository;\r\n@Mock\r\nList&lt;BatchInputExecutor&gt; executors;\r\n```\r\nFor the record, the `BatchInputExecutor` class is an abstract class and I defined a class that extends it in my test.  \r\nWhen I run my code, the optional that should contains all the extended classes of `BatchInputExecutor` is not empty, it is null; and the repository is not null.  \r\nHow am I supposed to mock the value of the optional field in my constructor ?","title":"How to Mock Optional Autowired field","body":"<p>I am trying to make a unit test with Mockito and I cannot find any way to mock my constructor's optional autowired field.</p>\n<p>Here is my constructor:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\npublic BatchInputManager(\n    BatchInputContentRepository batchInputContentRepository,\n    Optional&lt;List&lt;BatchInputExecutor&gt;&gt; batchInputExecutors) {\n    // ...\n}\n</code></pre>\n<p>And here is how I try to mock these fields :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@InjectMocks\nBatchInputManager batchInputManager;\n@Mock\nBatchInputContentRepository batchInputContentRepository;\n@Mock\nList&lt;BatchInputExecutor&gt; executors;\n</code></pre>\n<p>For the record, the <code>BatchInputExecutor</code> class is an abstract class and I defined a class that extends it in my test.<br />\nWhen I run my code, the optional that should contains all the extended classes of <code>BatchInputExecutor</code> is not empty, it is null; and the repository is not null.<br />\nHow am I supposed to mock the value of the optional field in my constructor ?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1636365873,"post_id":69880602,"comment_id":123527975,"body_markdown":"What did your search turn up? Please be aware that you’re supposed to search before asking a question here (every time).","body":"What did your search turn up? Please be aware that you’re supposed to search before asking a question here (every time)."}],"answers":[{"tags":[],"owner":{"account_id":180181,"reputation":76380,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1636372075,"creation_date":1636360709,"answer_id":69880637,"question_id":69880602,"body_markdown":"Here&#39;s a [list of Android versions and API levels](https://en.wikipedia.org/wiki/Android_version_history#Overview).\r\n\r\nAs you can see, Android 7.0 has API level 24. So the method will not be available as it was introduced later.\r\n\r\nIf the method in question is a standard Java method, in particular a method from `java.time`, `java.nio.file` or`java.lang.invoke`, then it might be available through [API desugaring](https://developer.android.com/studio/write/java8-support-table) independent from the API level.","title":"Application API LEVEL 26 and Android 7?","body":"<p>Here's a <a href=\"https://en.wikipedia.org/wiki/Android_version_history#Overview\" rel=\"nofollow noreferrer\">list of Android versions and API levels</a>.</p>\n<p>As you can see, Android 7.0 has API level 24. So the method will not be available as it was introduced later.</p>\n<p>If the method in question is a standard Java method, in particular a method from <code>java.time</code>, <code>java.nio.file</code> or<code>java.lang.invoke</code>, then it might be available through <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">API desugaring</a> independent from the API level.</p>\n"}],"owner":{"account_id":17321993,"reputation":17,"user_id":12547188,"display_name":"gigaman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1636372075,"creation_date":1636360518,"question_id":69880602,"body_markdown":"I am new to android development . I have a simple question. If the method was introduced in API LEVEL 26 , can it be run on a device that has Android 7 OS?","title":"Application API LEVEL 26 and Android 7?","body":"<p>I am new to android development . I have a simple question. If the method was introduced in API LEVEL 26 , can it be run on a device that has Android 7 OS?</p>\n"},{"tags":["java","do-while"],"comments":[{"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"score":3,"creation_date":1636365737,"post_id":69881649,"comment_id":123527904,"body_markdown":"Why do you need to remove them?","body":"Why do you need to remove them?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1636365818,"post_id":69881649,"comment_id":123527947,"body_markdown":"What exactly are you struggling with? You need to change your `while()` condition to also check `hitTarget` or `hitObstacle`. You also need to think about whether a last `t += 0.1;` before the loop is left is ok and if not, move this line.","body":"What exactly are you struggling with? You need to change your <code>while()</code> condition to also check <code>hitTarget</code> or <code>hitObstacle</code>. You also need to think about whether a last <code>t += 0.1;</code> before the loop is left is ok and if not, move this line."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1636365821,"post_id":69881649,"comment_id":123527948,"body_markdown":"What difficulty are you having deleting those statements?","body":"What difficulty are you having deleting those statements?"},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1636365833,"post_id":69881649,"comment_id":123527956,"body_markdown":"Removing `break`s will change the code&#39;s behavior. What&#39;s the reason for removing them?","body":"Removing <code>break</code>s will change the code&#39;s behavior. What&#39;s the reason for removing them?"},{"owner":{"account_id":4099822,"reputation":1256,"user_id":3365667,"display_name":"Roslan Amir"},"score":0,"creation_date":1636367211,"post_id":69881649,"comment_id":123528519,"body_markdown":"You also don&#39;t need `else` if you have a `break`, `continue` or `return` in the `if` statement. It&#39;s redundant.","body":"You also don&#39;t need <code>else</code> if you have a <code>break</code>, <code>continue</code> or <code>return</code> in the <code>if</code> statement. It&#39;s redundant."},{"owner":{"account_id":14759129,"reputation":25,"user_id":10658996,"display_name":"dragon"},"score":0,"creation_date":1636367565,"post_id":69881649,"comment_id":123528637,"body_markdown":"I need to remove them because it is asked in my exercise. I need my code to work exactly like it is now but i&#39;m prohibited in usage of ```break```","body":"I need to remove them because it is asked in my exercise. I need my code to work exactly like it is now but i&#39;m prohibited in usage of <code>break</code>"},{"owner":{"account_id":14759129,"reputation":25,"user_id":10658996,"display_name":"dragon"},"score":0,"creation_date":1636367916,"post_id":69881649,"comment_id":123528784,"body_markdown":"In my exercise I need to use do-while without ```break```","body":"In my exercise I need to use do-while without <code>break</code>"}],"answers":[{"tags":[],"owner":{"account_id":23270904,"reputation":110,"user_id":17355758,"display_name":"Carlos CB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636372065,"creation_date":1636369320,"answer_id":69882434,"question_id":69881649,"body_markdown":"You can eliminate the breaks if you include, in the while, the statements you want to trigger the breaks. Since you are using the “if” to set a simple flag, you may want to simplify things by directly setting the flag with the value; also, if you mind about “t” you should place an “if” to be sure that is not gonna be modified when any of the “if” statements are true. The do while should look like this:\r\n\r\n    do  {\r\n           x = v0 * t * Math.cos(inRadians) + x0;\r\n           y = v0 * t * Math.sin(inRadians) - (g * t * t) / 2 + y0;\r\n           System.out.printf(&quot;%3.2f\\t%7.3f\\t%7.3f\\n&quot;, t, x, y);\r\n \r\n           hitTarget = x &gt;= 17 &amp;&amp; x &lt;= 20 &amp;&amp; y &lt;= 3 &amp;&amp; y &gt;= 0;\r\n           hitObstacle = !hitTarget &amp;&amp; x &gt;= 7 &amp;&amp; x &lt;= 10 &amp;&amp; y &lt;= 4 &amp;&amp; y &gt;= 0;\r\n \r\n           if(!hitTarget &amp;&amp; !hitObstacle) {\r\n               t += 0.1;\r\n           }\r\n \r\n       } while (y &gt;= 0 || (!hitTarget &amp;&amp; !hitObstacle));","title":"Remove break statement","body":"<p>You can eliminate the breaks if you include, in the while, the statements you want to trigger the breaks. Since you are using the “if” to set a simple flag, you may want to simplify things by directly setting the flag with the value; also, if you mind about “t” you should place an “if” to be sure that is not gonna be modified when any of the “if” statements are true. The do while should look like this:</p>\n<pre><code>do  {\n       x = v0 * t * Math.cos(inRadians) + x0;\n       y = v0 * t * Math.sin(inRadians) - (g * t * t) / 2 + y0;\n       System.out.printf(&quot;%3.2f\\t%7.3f\\t%7.3f\\n&quot;, t, x, y);\n\n       hitTarget = x &gt;= 17 &amp;&amp; x &lt;= 20 &amp;&amp; y &lt;= 3 &amp;&amp; y &gt;= 0;\n       hitObstacle = !hitTarget &amp;&amp; x &gt;= 7 &amp;&amp; x &lt;= 10 &amp;&amp; y &lt;= 4 &amp;&amp; y &gt;= 0;\n\n       if(!hitTarget &amp;&amp; !hitObstacle) {\n           t += 0.1;\n       }\n\n   } while (y &gt;= 0 || (!hitTarget &amp;&amp; !hitObstacle));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5014312,"reputation":615,"user_id":4029545,"accept_rate":50,"display_name":"Ravi Nain"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1636370686,"creation_date":1636370686,"answer_id":69882710,"question_id":69881649,"body_markdown":"    boolean run = true;\r\n    do {\r\n        x = v0 * t * Math.cos(inRadians) + x0;\r\n        y = v0 * t * Math.sin(inRadians) - (g * t * t) / 2 + y0;\r\n        System.out.printf(&quot;%3.2f\\t%7.3f\\t%7.3f\\n&quot;, t, x, y);\r\n        \r\n        hitTarget = x &gt;= 17 &amp;&amp; x &lt;= 20 &amp;&amp; y &lt;= 3 &amp;&amp; y &gt;= 0;\r\n        hitObstacle = !hitTarget &amp;&amp; x &gt;= 7 &amp;&amp; x &lt;= 10 &amp;&amp; y &lt;= 4 &amp;&amp; y &gt;= 0;\r\n\r\n        if (!hitTarget &amp;&amp; !hitObstacle) {\r\n            t += 0.1;\r\n        }\r\n        \r\n        run = y &gt;= 0 &amp;&amp; !hitTarget &amp;&amp; !hitObstacle;\r\n    } while (run);","title":"Remove break statement","body":"<pre><code>boolean run = true;\ndo {\n    x = v0 * t * Math.cos(inRadians) + x0;\n    y = v0 * t * Math.sin(inRadians) - (g * t * t) / 2 + y0;\n    System.out.printf(&quot;%3.2f\\t%7.3f\\t%7.3f\\n&quot;, t, x, y);\n    \n    hitTarget = x &gt;= 17 &amp;&amp; x &lt;= 20 &amp;&amp; y &lt;= 3 &amp;&amp; y &gt;= 0;\n    hitObstacle = !hitTarget &amp;&amp; x &gt;= 7 &amp;&amp; x &lt;= 10 &amp;&amp; y &lt;= 4 &amp;&amp; y &gt;= 0;\n\n    if (!hitTarget &amp;&amp; !hitObstacle) {\n        t += 0.1;\n    }\n    \n    run = y &gt;= 0 &amp;&amp; !hitTarget &amp;&amp; !hitObstacle;\n} while (run);\n</code></pre>\n"}],"owner":{"account_id":14759129,"reputation":25,"user_id":10658996,"display_name":"dragon"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69882710,"answer_count":2,"score":-1,"last_activity_date":1636372065,"creation_date":1636365670,"question_id":69881649,"body_markdown":"I need to remove ```break;``` statements in my code and I&#39;ve run out of ideas how to do it. Can you please help me? \r\n```public static void main(String[] args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tdouble g = 1.62, v0, deg = 45;\r\n\t\tdouble inRadians = Math.toRadians(deg);\r\n\t\tdouble t, x, y, x0 = 0, y0 = 0;\r\n\t\tboolean hitTarget = false;\r\n\t\tboolean hitObstacle = false;\r\n\t\tSystem.out.println(&quot;211RDB121 Pauls Daniels Meija 11.grupa&quot;);\r\n\t\tSystem.out.print(&quot;v0=&quot;);\r\n\t\tif (sc.hasNextDouble())\r\n\t\t\tv0 = sc.nextDouble();\r\n\t\t\telse {\r\n\t\t\t\tSystem.out.println(&quot;input-output error&quot;);\r\n\t\t\t\tsc.close();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\tsc.close();\r\n\t\tSystem.out.println(&quot;result:&quot;);\r\n\t\tSystem.out.println(&quot;t \\t x \\t y&quot;);\r\n\t\tt = 0.15;\r\n\t\tdo {\r\n\t\t\tx = v0 * t * Math.cos(inRadians) + x0;\r\n\t\t\ty = v0 * t * Math.sin(inRadians) - (g * t * t) / 2 + y0;\r\n\t\t\tSystem.out.printf(&quot;%3.2f\\t%7.3f\\t%7.3f\\n&quot;, t, x, y);\r\n\t\t\tif (x &gt;= 17 &amp;&amp; x &lt;= 20 &amp;&amp; y &lt;= 3 &amp;&amp; y &gt;= 0) {\r\n\t\t\t\thitTarget = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\telse if (x &gt;= 7 &amp;&amp; x &lt;= 10 &amp;&amp; y &lt;= 4 &amp;&amp; y &gt;= 0) {\r\n\t\t\t\thitObstacle = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tt += 0.1;\r\n\t\t\t} while (y &gt;= 0);\r\n\t\t\t\tif (hitObstacle) {\r\n\t\t\t\t\tSystem.out.println(&quot;hit the obstacle!&quot;);\r\n\t\t\t\t}\r\n\t\t\t\telse if (hitTarget)\r\n\t\t\t\t\tSystem.out.println(&quot;the target was destroyed&quot;);\r\n\t\t\t\telse\r\n\t\t\t\t\tSystem.out.println(&quot;shot off the target&quot;);\r\n\t\t\t}```","title":"Remove break statement","body":"<p>I need to remove <code>break;</code> statements in my code and I've run out of ideas how to do it. Can you please help me?</p>\n<pre><code>        Scanner sc = new Scanner(System.in);\n        double g = 1.62, v0, deg = 45;\n        double inRadians = Math.toRadians(deg);\n        double t, x, y, x0 = 0, y0 = 0;\n        boolean hitTarget = false;\n        boolean hitObstacle = false;\n        System.out.println(&quot;211RDB121 Pauls Daniels Meija 11.grupa&quot;);\n        System.out.print(&quot;v0=&quot;);\n        if (sc.hasNextDouble())\n            v0 = sc.nextDouble();\n            else {\n                System.out.println(&quot;input-output error&quot;);\n                sc.close();\n                return;\n            }\n        sc.close();\n        System.out.println(&quot;result:&quot;);\n        System.out.println(&quot;t \\t x \\t y&quot;);\n        t = 0.15;\n        do {\n            x = v0 * t * Math.cos(inRadians) + x0;\n            y = v0 * t * Math.sin(inRadians) - (g * t * t) / 2 + y0;\n            System.out.printf(&quot;%3.2f\\t%7.3f\\t%7.3f\\n&quot;, t, x, y);\n            if (x &gt;= 17 &amp;&amp; x &lt;= 20 &amp;&amp; y &lt;= 3 &amp;&amp; y &gt;= 0) {\n                hitTarget = true;\n                break;\n            }\n            else if (x &gt;= 7 &amp;&amp; x &lt;= 10 &amp;&amp; y &lt;= 4 &amp;&amp; y &gt;= 0) {\n                hitObstacle = true;\n                break;\n            }\n            t += 0.1;\n            } while (y &gt;= 0);\n                if (hitObstacle) {\n                    System.out.println(&quot;hit the obstacle!&quot;);\n                }\n                else if (hitTarget)\n                    System.out.println(&quot;the target was destroyed&quot;);\n                else\n                    System.out.println(&quot;shot off the target&quot;);\n            }```\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":4,"creation_date":1551898877,"post_id":55030269,"comment_id":96813228,"body_markdown":"Keeping a tree balanced requires O(log n) insertions and deletions, as opposed to a list&#39;s O(1), so it&#39;s not strictly always better. The red black tree is really only there to mitigate poorly implemented hash functions (or, I suppose, random bad luck with regards to collisions). Making every bucket a tree would make performance worse in the general case.","body":"Keeping a tree balanced requires O(log n) insertions and deletions, as opposed to a list&#39;s O(1), so it&#39;s not strictly always better. The red black tree is really only there to mitigate poorly implemented hash functions (or, I suppose, random bad luck with regards to collisions). Making every bucket a tree would make performance worse in the general case."},{"owner":{"account_id":15471711,"reputation":11,"user_id":11161558,"display_name":"crickon"},"score":0,"creation_date":1551917506,"post_id":55030269,"comment_id":96820764,"body_markdown":"I don&#39;t think I explained my assignment properly. We were forcing collisions to see how HashMap handles them. My question is more of why the whole chain is not handled with a tree. Why are the first 8 nodes linked and treeify only starts when the chain becomes longer than that.","body":"I don&#39;t think I explained my assignment properly. We were forcing collisions to see how HashMap handles them. My question is more of why the whole chain is not handled with a tree. Why are the first 8 nodes linked and treeify only starts when the chain becomes longer than that."},{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1551917788,"post_id":55030269,"comment_id":96820836,"body_markdown":"Yes. I already answered that. A tree is not always used because a tree is not always best.","body":"Yes. I already answered that. A tree is not always used because a tree is not always best."},{"owner":{"account_id":15471711,"reputation":11,"user_id":11161558,"display_name":"crickon"},"score":0,"creation_date":1551917871,"post_id":55030269,"comment_id":96820860,"body_markdown":"Correct me if i&#39;m wrong, wouldn&#39;t a poorly implemented tree still have the same performance as a LinkedList.","body":"Correct me if i&#39;m wrong, wouldn&#39;t a poorly implemented tree still have the same performance as a LinkedList."},{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1551918639,"post_id":55030269,"comment_id":96821003,"body_markdown":"No. Like I said, a tree is slower to insert and remove. And anyway, big O does not tell the whole story. Something can be constant time and still be slow (consider `Thread.sleep(10000)`).","body":"No. Like I said, a tree is slower to insert and remove. And anyway, big O does not tell the whole story. Something can be constant time and still be slow (consider <code>Thread.sleep(10000)</code>)."},{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1551918740,"post_id":55030269,"comment_id":96821031,"body_markdown":"Also, HashMap is not implemented with a LinkedList, it uses arrays.","body":"Also, HashMap is not implemented with a LinkedList, it uses arrays."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1551923077,"post_id":55030269,"comment_id":96821994,"body_markdown":"A tree is no improvement over a list until *log(N) &lt; N/2*, which happens at *N = 8.*","body":"A tree is no improvement over a list until <i>log(N) &lt; N/2</i>, which happens at <i>N = 8.</i>"},{"owner":{"account_id":15471711,"reputation":11,"user_id":11161558,"display_name":"crickon"},"score":0,"creation_date":1551925509,"post_id":55030269,"comment_id":96822548,"body_markdown":"@user207421 would you care to explain that a little further. where does the n/2 come from?","body":"@user207421 would you care to explain that a little further. where does the n/2 come from?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1551927348,"post_id":55030269,"comment_id":96822932,"body_markdown":"Searching a list is going to find the item in *N/2* time on average, as the average item is halfway down the list.","body":"Searching a list is going to find the item in <i>N/2</i> time on average, as the average item is halfway down the list."},{"owner":{"account_id":15471711,"reputation":11,"user_id":11161558,"display_name":"crickon"},"score":0,"creation_date":1551977176,"post_id":55030269,"comment_id":96847841,"body_markdown":"@user207421 Thank you, that&#39;s the answer I was looking for","body":"@user207421 Thank you, that&#39;s the answer I was looking for"}],"answers":[{"tags":[],"owner":{"account_id":3637123,"reputation":10786,"user_id":3032209,"display_name":"Yair Kukielka"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636371729,"creation_date":1636111194,"answer_id":69852448,"question_id":55030269,"body_markdown":"Clarification before I answer your question:\r\n---------\r\n\r\nFrom your question it sounds like the first 8 nodes are always managed by a linkedlist structure and the ones after the 8th node are managed by a tree structure.\r\n\r\nBut **this is how it actually works** after it was changed in Java 8:\r\n\r\n - If the bucket contains a small number of nodes (&lt; 8), it uses a linkedlist for **all** of this bucket&#39;s nodes.\r\n - If the bucket contains a large number of nodes (=&gt; 8), it dynamically replaces it with an ad-hoc implementation of tree map, for **all** of this bucket&#39;s nodes.\r\n\r\n**Why does it work like this?**\r\n--------\r\n\r\nYou have a more thorough explanaition [here][1], but basically:\r\n\r\n&gt; Well, previously entries with conflicting keys were simply appended to linked list, which later had to be traversed. Now HashMap promotes list into binary tree, using hash code as a branching variable. If two hashes are different but ended up in the same bucket, one is considered bigger and goes to the right. If hashes are equal (as in our case), HashMap hopes that the keys are Comparable, so that it can establish some order. This is not a requirement of HashMap keys, but apparently a good practice. If keys are not comparable, don&#39;t expect any performance improvements in case of heavy hash collisions.\r\n\r\n**In the case of high hash collisions, this implementation will improve worst-case performance from O(n) to O(log n).**\r\n\r\nFor reference, this implementation change in HashMap was introdiced by [JEP 180][2]\r\n\r\nWhy aren&#39;t they always handled as tree?\r\n--------\r\nThey could have, I guess. I see 2 reasons, that combined could answer this:\r\n\r\n - There is a space penalty for using a tree, as explained in [this][3] answer.\r\n - Switching to a tree will be triggered only in rare cases where there are many collisions. A bucket shouldn&#39;t usually contain 8 or more nodes. If it does, this means that there has been a very high number of collisions (due to a bad key hashcode implementation or really bad luck). In most cases, where there are low collisions, a simply linked list will suffice since time complexity will tend to be constant 0(1).\r\n\r\n\r\n  [1]: https://dzone.com/articles/hashmap-performance\r\n  [2]: https://openjdk.java.net/jeps/180\r\n  [3]: https://stackoverflow.com/a/55154231/3032209","title":"Why doesn&#39;t java&#39;s HashMap just use trees for collision chaining","body":"<h2>Clarification before I answer your question:</h2>\n<p>From your question it sounds like the first 8 nodes are always managed by a linkedlist structure and the ones after the 8th node are managed by a tree structure.</p>\n<p>But <strong>this is how it actually works</strong> after it was changed in Java 8:</p>\n<ul>\n<li>If the bucket contains a small number of nodes (&lt; 8), it uses a linkedlist for <strong>all</strong> of this bucket's nodes.</li>\n<li>If the bucket contains a large number of nodes (=&gt; 8), it dynamically replaces it with an ad-hoc implementation of tree map, for <strong>all</strong> of this bucket's nodes.</li>\n</ul>\n<h2><strong>Why does it work like this?</strong></h2>\n<p>You have a more thorough explanaition <a href=\"https://dzone.com/articles/hashmap-performance\" rel=\"nofollow noreferrer\">here</a>, but basically:</p>\n<blockquote>\n<p>Well, previously entries with conflicting keys were simply appended to linked list, which later had to be traversed. Now HashMap promotes list into binary tree, using hash code as a branching variable. If two hashes are different but ended up in the same bucket, one is considered bigger and goes to the right. If hashes are equal (as in our case), HashMap hopes that the keys are Comparable, so that it can establish some order. This is not a requirement of HashMap keys, but apparently a good practice. If keys are not comparable, don't expect any performance improvements in case of heavy hash collisions.</p>\n</blockquote>\n<p><strong>In the case of high hash collisions, this implementation will improve worst-case performance from O(n) to O(log n).</strong></p>\n<p>For reference, this implementation change in HashMap was introdiced by <a href=\"https://openjdk.java.net/jeps/180\" rel=\"nofollow noreferrer\">JEP 180</a></p>\n<h2>Why aren't they always handled as tree?</h2>\n<p>They could have, I guess. I see 2 reasons, that combined could answer this:</p>\n<ul>\n<li>There is a space penalty for using a tree, as explained in <a href=\"https://stackoverflow.com/a/55154231/3032209\">this</a> answer.</li>\n<li>Switching to a tree will be triggered only in rare cases where there are many collisions. A bucket shouldn't usually contain 8 or more nodes. If it does, this means that there has been a very high number of collisions (due to a bad key hashcode implementation or really bad luck). In most cases, where there are low collisions, a simply linked list will suffice since time complexity will tend to be constant 0(1).</li>\n</ul>\n"}],"owner":{"account_id":15471711,"reputation":11,"user_id":11161558,"display_name":"crickon"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":664,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1636371729,"creation_date":1551898385,"question_id":55030269,"body_markdown":"For my computer science data structures class we had an assignment on hashing and java&#39;s HashMaps. Through this assignment I learned that collisions are handled as linked lists for the first 8 nodes, followed by a binary tree (or red black tree) for the rest. Why... Why aren&#39;t they just handled as tree for O(log n) efficiency?\r\n\r\nThe only writes ups that I could find were that when Java 8 released, it increased the efficiency of the chains by handling them this way instead of strictly linked list, which would be O(n). \r\nIf anyone has any insight on this it would be greatly appreciated.\r\n\r\nThanks,\r\nMatt","title":"Why doesn&#39;t java&#39;s HashMap just use trees for collision chaining","body":"<p>For my computer science data structures class we had an assignment on hashing and java's HashMaps. Through this assignment I learned that collisions are handled as linked lists for the first 8 nodes, followed by a binary tree (or red black tree) for the rest. Why... Why aren't they just handled as tree for O(log n) efficiency?</p>\n\n<p>The only writes ups that I could find were that when Java 8 released, it increased the efficiency of the chains by handling them this way instead of strictly linked list, which would be O(n). \nIf anyone has any insight on this it would be greatly appreciated.</p>\n\n<p>Thanks,\nMatt</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8122,"page":1870,"page_size":100}
