{"items":[{"tags":["java","mysql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":7080712,"reputation":1947,"user_id":5419228,"display_name":"shankarsh15"},"score":0,"creation_date":1463999251,"post_id":37388271,"comment_id":62286559,"body_markdown":"can you share entire stack(error) trace.","body":"can you share entire stack(error) trace."},{"owner":{"account_id":1584205,"reputation":9787,"user_id":1468919,"accept_rate":90,"display_name":"Jaiwo99"},"score":0,"creation_date":1463999818,"post_id":37388271,"comment_id":62286919,"body_markdown":"check your config, this could the reason `System.getProperty(&quot;root&quot;)`..","body":"check your config, this could the reason <code>System.getProperty(&quot;root&quot;)</code>.."}],"answers":[{"comments":[{"owner":{"account_id":7241348,"reputation":456,"user_id":5524834,"accept_rate":62,"display_name":"Joe Blow"},"score":0,"creation_date":1464015510,"post_id":37388786,"comment_id":62297421,"body_markdown":"After compiling, packaging and installing again the maven parent project, i managed to run a dependency:tree which solved my deps. Also the sys property was leading nowhere so i hardcoded the precise url string. Now it deploys without problems. Many thanks","body":"After compiling, packaging and installing again the maven parent project, i managed to run a dependency:tree which solved my deps. Also the sys property was leading nowhere so i hardcoded the precise url string. Now it deploys without problems. Many thanks"}],"tags":[],"owner":{"account_id":7080712,"reputation":1947,"user_id":5419228,"display_name":"shankarsh15"},"comment_count":1,"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1518086142,"creation_date":1463999932,"answer_id":37388786,"question_id":37388271,"body_markdown":"**The issue is that you are not able to get a connection to MYSQL database and hence it is throwing an error saying that cannot build a session factory.**\r\n\r\nPlease see the error below:\r\n\r\n     Caused by: java.sql.SQLException: Access denied for user &#39;&#39;@&#39;localhost&#39; (using password: NO) \r\nwhich points to `username` not getting `populated`.\r\n\r\n**Please recheck system properties** \r\n\r\n    dataSource.setUsername(System.getProperty(&quot;root&quot;));\r\n\r\nsome packages seems to be missing as well pointing to a dependency issue:\r\n\r\n    package org.gjt.mm.mysql does not exist\r\n\r\nPlease run a `mvn dependency:tree` command to check for dependencies","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p><strong>The issue is that you are not able to get a connection to MYSQL database and hence it is throwing an error saying that cannot build a session factory.</strong></p>\n\n<p>Please see the error below:</p>\n\n<pre><code> Caused by: java.sql.SQLException: Access denied for user ''@'localhost' (using password: NO) \n</code></pre>\n\n<p>which points to <code>username</code> not getting <code>populated</code>.</p>\n\n<p><strong>Please recheck system properties</strong> </p>\n\n<pre><code>dataSource.setUsername(System.getProperty(\"root\"));\n</code></pre>\n\n<p>some packages seems to be missing as well pointing to a dependency issue:</p>\n\n<pre><code>package org.gjt.mm.mysql does not exist\n</code></pre>\n\n<p>Please run a <code>mvn dependency:tree</code> command to check for dependencies</p>\n"},{"comments":[{"owner":{"account_id":3877614,"reputation":181,"user_id":6951847,"display_name":"erod"},"score":0,"creation_date":1623714889,"post_id":47626489,"comment_id":120151845,"body_markdown":"Hi, I&#39;m using transaciton type JTA, and I can see in logs that connect and publish all routing of jndi, but in the end before server is started give me those error, I&#39;m using Oracle","body":"Hi, I&#39;m using transaciton type JTA, and I can see in logs that connect and publish all routing of jndi, but in the end before server is started give me those error, I&#39;m using Oracle"}],"tags":[],"owner":{"account_id":4009553,"reputation":564,"user_id":3303365,"display_name":"Md. Maidul Islam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512361546,"creation_date":1512361546,"answer_id":47626489,"question_id":37388271,"body_markdown":"I found some issue about that kind of error \r\n\r\n 1. Database username or password not match in the mysql or other other database. Please set application.properties like this\r\n\r\n&lt;pre&gt; &lt;code&gt; \r\n\r\n    # ===============================\r\n    # = DATA SOURCE\r\n    # ===============================\r\n    \r\n    # Set here configurations for the database connection\r\n    \r\n    # Connection url for the database please let me know &quot;mondolmislam@gmail.com&quot;\r\n    spring.datasource.url = jdbc:mysql://localhost:3306/bookstoreapiabc\r\n    \r\n    # Username and secret\r\n    spring.datasource.username = root\r\n    spring.datasource.password =\r\n    \r\n    # Keep the connection alive if idle for a long time (needed in production)\r\n    spring.datasource.testWhileIdle = true\r\n    spring.datasource.validationQuery = SELECT 1\r\n    \r\n    # ===============================\r\n    # = JPA / HIBERNATE\r\n    # ===============================\r\n    \r\n    # Use spring.jpa.properties.* for Hibernate native properties (the prefix is\r\n    # stripped before adding them to the entity manager).\r\n    \r\n    # Show or not log for each sql query\r\n    spring.jpa.show-sql = true\r\n    \r\n    # Hibernate ddl auto (create, create-drop, update): with &quot;update&quot; the database\r\n    # schema will be automatically updated accordingly to java entities found in\r\n    # the project\r\n    spring.jpa.hibernate.ddl-auto = update\r\n    \r\n    # Allows Hibernate to generate SQL optimized for a particular DBMS\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\r\n\r\nIssue no 2.\r\n\r\nYour local server has two database server and those database server conflict. this conflict like this **mysql server &amp; xampp or lampp or wamp** server. Please one of the database like **mysql server** because **xampp or lampp server** automatically install **mysql server** on this machine\r\n\r\n\r\n","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>I found some issue about that kind of error </p>\n\n<ol>\n<li>Database username or password not match in the mysql or other other database. Please set application.properties like this</li>\n</ol>\n\n<p><pre> <code> </p>\n\n# ===============================\n# = DATA SOURCE\n# ===============================\n\n# Set here configurations for the database connection\n\n# Connection url for the database please let me know \"mondolmislam@gmail.com\"\nspring.datasource.url = jdbc:mysql://localhost:3306/bookstoreapiabc\n\n# Username and secret\nspring.datasource.username = root\nspring.datasource.password =\n\n# Keep the connection alive if idle for a long time (needed in production)\nspring.datasource.testWhileIdle = true\nspring.datasource.validationQuery = SELECT 1\n\n# ===============================\n# = JPA / HIBERNATE\n# ===============================\n\n# Use spring.jpa.properties.* for Hibernate native properties (the prefix is\n# stripped before adding them to the entity manager).\n\n# Show or not log for each sql query\nspring.jpa.show-sql = true\n\n# Hibernate ddl auto (create, create-drop, update): with \"update\" the database\n# schema will be automatically updated accordingly to java entities found in\n# the project\nspring.jpa.hibernate.ddl-auto = update\n\n# Allows Hibernate to generate SQL optimized for a particular DBMS\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\n</code></pre>\n\n<p>Issue no 2.</p>\n\n<p>Your local server has two database server and those database server conflict. this conflict like this <strong>mysql server &amp; xampp or lampp or wamp</strong> server. Please one of the database like <strong>mysql server</strong> because <strong>xampp or lampp server</strong> automatically install <strong>mysql server</strong> on this machine</p>\n"},{"comments":[{"owner":{"account_id":3877614,"reputation":181,"user_id":6951847,"display_name":"erod"},"score":0,"creation_date":1623714653,"post_id":52269309,"comment_id":120151810,"body_markdown":"Yes, all tables are created in the pass, and transaction type jta. This EJB module work right well in jboss 7 but I&#39;m migrating it to wildfly 20.0.1 and now give me this error","body":"Yes, all tables are created in the pass, and transaction type jta. This EJB module work right well in jboss 7 but I&#39;m migrating it to wildfly 20.0.1 and now give me this error"}],"tags":[],"owner":{"account_id":14293268,"reputation":105,"user_id":10324643,"display_name":"Himanshu Shukla"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536651395,"creation_date":1536644362,"answer_id":52269309,"question_id":37388271,"body_markdown":"I was getting this error even when all the relevant dependencies were in place because I hadn&#39;t created the schema in MySQL. \r\n\r\nI thought it would be created automatically but it wasn&#39;t. Although the table itself will be created, you have to create the schema.","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>I was getting this error even when all the relevant dependencies were in place because I hadn't created the schema in MySQL. </p>\n\n<p>I thought it would be created automatically but it wasn't. Although the table itself will be created, you have to create the schema.</p>\n"},{"comments":[{"owner":{"account_id":3877614,"reputation":181,"user_id":6951847,"display_name":"erod"},"score":1,"creation_date":1623714726,"post_id":57334720,"comment_id":120151824,"body_markdown":"semicolon at the end in witch file?","body":"semicolon at the end in witch file?"}],"tags":[],"owner":{"account_id":14972066,"reputation":95,"user_id":10808616,"display_name":"madil26"},"comment_count":1,"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1564792993,"creation_date":1564792993,"answer_id":57334720,"question_id":37388271,"body_markdown":"I had a semicolon at the end, and gave me this error.","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>I had a semicolon at the end, and gave me this error.</p>\n"},{"comments":[{"owner":{"account_id":3877614,"reputation":181,"user_id":6951847,"display_name":"erod"},"score":0,"creation_date":1623468457,"post_id":66439567,"comment_id":120094115,"body_markdown":"How can you resolved it, all my model entities are logging is not mapped?","body":"How can you resolved it, all my model entities are logging is not mapped?"},{"owner":{"account_id":16449882,"reputation":329,"user_id":11883568,"display_name":"user11883568"},"score":0,"creation_date":1623658305,"post_id":66439567,"comment_id":120131658,"body_markdown":"In my hibernate version (5.4.19.Final) the named queries are checked in the constructor of org.hibernate.internal.SessionFactoryImpl around line 327. With a breakpoint there you get clear error messages if named query checking is enabled (which should be the default).","body":"In my hibernate version (5.4.19.Final) the named queries are checked in the constructor of org.hibernate.internal.SessionFactoryImpl around line 327. With a breakpoint there you get clear error messages if named query checking is enabled (which should be the default)."}],"tags":[],"owner":{"account_id":16449882,"reputation":329,"user_id":11883568,"display_name":"user11883568"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614688776,"creation_date":1614688776,"answer_id":66439567,"question_id":37388271,"body_markdown":"Got this error due to a mistake in a named query.","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>Got this error due to a mistake in a named query.</p>\n"},{"tags":[],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689807443,"creation_date":1689807443,"answer_id":76725688,"question_id":37388271,"body_markdown":"This error occured to me when I tried to connect to a MariaDB database when I had \r\n\r\n```\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n```\r\n\r\nspecified in my application.properties. I did not set it to any other value and thus a bad driver was used. I removed the explicit driver description from my application.properties and let spring figure out on its own which driver to use. This resolved the issue for me.","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>This error occured to me when I tried to connect to a MariaDB database when I had</p>\n<pre><code>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n</code></pre>\n<p>specified in my application.properties. I did not set it to any other value and thus a bad driver was used. I removed the explicit driver description from my application.properties and let spring figure out on its own which driver to use. This resolved the issue for me.</p>\n"}],"owner":{"account_id":7241348,"reputation":456,"user_id":5524834,"accept_rate":62,"display_name":"Joe Blow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190796,"favorite_count":0,"down_vote_count":1,"up_vote_count":33,"accepted_answer_id":37388786,"answer_count":6,"score":32,"last_activity_date":1689807443,"creation_date":1463998444,"question_id":37388271,"body_markdown":"I&#39;ve been trying to sort out a connection to my DB with JPA Hibernate and mysql, but for some reason, no matter what i try, when launching the tomcat server i get the same exception:\r\n\r\n\r\n     org.springframework.beans.factory.BeanCreationException: Error creating     bean with name &#39;localContainerEntityManagerFactoryBean&#39; defined in class path resource [core/JPAConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;localContainerEntityManagerFactoryBean&#39; threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\r\n\r\nThis is my JPA config class:\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(&quot;core.repository&quot;)\r\n    @EnableTransactionManagement\r\n    @EnableCaching\r\n    public class JPAConfig {\r\n\r\n    @Value(&quot;${db.jdbcURL}&quot;)\r\n    private String jdbcURL;\r\n\r\n    @Value(&quot;${db.user}&quot;)\r\n    private String user;\r\n\r\n    @Value(&quot;${db.password}&quot;)\r\n    private String password;\r\n\r\n    @Value(&quot;${db.generateDDL}&quot;)\r\n    private Boolean generateDDL;\r\n\r\n    @SuppressWarnings(&quot;Duplicates&quot;)\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        BasicDataSource dataSource = new BasicDataSource();\r\n        dataSource.setDriverClassName(Driver.class.getName());\r\n        dataSource.setUrl(&quot;jdbc:mysql://localhost:3306/movierentaldb&quot;);\r\n        dataSource.setUsername(System.getProperty(&quot;root&quot;));\r\n        dataSource.setPassword(System.getProperty(&quot;mdie1767&quot;));\r\n        dataSource.setInitialSize(2);\r\n        dataSource.setMaxActive(5);\r\n        return dataSource;\r\n    }\r\n\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean(){\r\n        HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n        vendorAdapter.setDatabase(Database.MYSQL);\r\n        vendorAdapter.setGenerateDdl(generateDDL);\r\n        vendorAdapter.setShowSql(true);\r\n\r\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n\r\n        factory.setJpaVendorAdapter(vendorAdapter);\r\n\r\n        factory.setPackagesToScan(&quot;core.model&quot;);\r\n\r\n        factory.setDataSource(dataSource());\r\n\r\n        factory.afterPropertiesSet();\r\n        return factory;\r\n    }\r\n\r\n    @Bean\r\n    public EntityManagerFactory entityManagerFactory(){\r\n        return localContainerEntityManagerFactoryBean().getObject();\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public EntityManager entityManager(){\r\n        return entityManagerFactory().createEntityManager();\r\n    }\r\n\r\n    @Bean\r\n    PlatformTransactionManager transactionManager(){\r\n        JpaTransactionManager manager = new JpaTransactionManager();\r\n        manager.setEntityManagerFactory(entityManagerFactory());\r\n        return manager;\r\n    }\r\n\r\n    @Bean\r\n    public HibernateExceptionTranslator hibernateExceptionTranslator(){\r\n        return  new HibernateExceptionTranslator();\r\n    }\r\n\r\n    @Bean\r\n    public CacheManager cacheManager(){\r\n        GuavaCacheManager guavaCacheManager = new GuavaCacheManager();\r\n        guavaCacheManager.setCacheBuilder(CacheBuilder.newBuilder().expireAfterAccess(2, TimeUnit.HOURS));\r\n        return guavaCacheManager;\r\n    }\r\n}\r\n\r\nAt this point i can&#39;t think of anything else to try..any help is much obliged\r\n\r\nEdit: This is the entire stacktrace\r\n\r\n    23-May-2016 13:05:10.267 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log No Spring WebApplicationInitializer types detected on classpath\r\n    23-May-2016 13:05:10.444 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Initializing Spring root WebApplicationContext\r\n    23-May-2016 13:05:15.333 SEVERE [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.StandardContext.listenerStart Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\r\n     org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;localContainerEntityManagerFactoryBean&#39; defined in class path resource [core/JPAConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;localContainerEntityManagerFactoryBean&#39; threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1123)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1018)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1054)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:829)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538)\r\n    \tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:444)\r\n    \tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:326)\r\n    \tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4732)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5194)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:152)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:702)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\r\n    \tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1702)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483)\r\n    \tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\r\n    \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n    \tat com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n    \tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:482)\r\n    \tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:431)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483)\r\n    \tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\r\n    \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n    \tat com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1466)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1307)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1399)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:828)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483)\r\n    \tat sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:323)\r\n    \tat sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n    \tat sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n    \tat sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\r\n    \tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\r\n    \tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$240(TCPTransport.java:683)\r\n    \tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$$Lambda$1/108265094.run(Unknown Source)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;localContainerEntityManagerFactoryBean&#39; threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)\r\n    \t... 60 more\r\n    Caused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:954)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:884)\r\n    \tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:60)\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:343)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:319)\r\n    \tat core.JPAConfig.localContainerEntityManagerFactoryBean(JPAConfig.java:94)\r\n    \tat core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261.CGLIB$localContainerEntityManagerFactoryBean$1(&lt;generated&gt;)\r\n    \tat core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261$$FastClassBySpringCGLIB$$901863a2.invoke(&lt;generated&gt;)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:355)\r\n    \tat core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261.localContainerEntityManagerFactoryBean(&lt;generated&gt;)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483)\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)\r\n    \t... 61 more\r\n    Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Unable to obtain JDBC Connection\r\n    \tat org.hibernate.tool.schema.internal.exec.AbstractJdbcConnectionContextImpl.getConnection(AbstractJdbcConnectionContextImpl.java:46)\r\n    \tat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:59)\r\n    \tat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:66)\r\n    \tat org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.getTable(InformationExtractorJdbcDatabaseMetaDataImpl.java:271)\r\n    \tat org.hibernate.tool.schema.internal.exec.ImprovedDatabaseInformationImpl.getTableInformation(ImprovedDatabaseInformationImpl.java:109)\r\n    \tat org.hibernate.tool.schema.internal.SchemaMigratorImpl.performMigration(SchemaMigratorImpl.java:252)\r\n    \tat org.hibernate.tool.schema.internal.SchemaMigratorImpl.doMigration(SchemaMigratorImpl.java:137)\r\n    \tat org.hibernate.tool.schema.internal.SchemaMigratorImpl.doMigration(SchemaMigratorImpl.java:110)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:176)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:64)\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:458)\r\n    \tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:465)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:881)\r\n    \t... 75 more\r\n    Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user &#39;&#39;@&#39;localhost&#39; (using password: NO))\r\n    \tat org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549)\r\n    \tat org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)\r\n    \tat org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\r\n    \tat org.hibernate.tool.schema.internal.exec.AbstractJdbcConnectionContextImpl.getConnection(AbstractJdbcConnectionContextImpl.java:43)\r\n    \t... 87 more\r\n    Caused by: java.sql.SQLException: Access denied for user &#39;&#39;@&#39;localhost&#39; (using password: NO)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:695)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:663)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:653)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:108)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:1683)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:656)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:349)\r\n    \tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:221)\r\n    \tat org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)\r\n    \tat org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)\r\n    \tat org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)\r\n    \tat org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)\r\n    \t... 92 more\r\n    \r\n    23-May-2016 13:05:15.379 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Closing Spring root WebApplicationContext\r\n    Error:(7, 24) java: package org.gjt.mm.mysql does not exist","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>I've been trying to sort out a connection to my DB with JPA Hibernate and mysql, but for some reason, no matter what i try, when launching the tomcat server i get the same exception:</p>\n\n<pre><code> org.springframework.beans.factory.BeanCreationException: Error creating     bean with name 'localContainerEntityManagerFactoryBean' defined in class path resource [core/JPAConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'localContainerEntityManagerFactoryBean' threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\n</code></pre>\n\n<p>This is my JPA config class:</p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories(\"core.repository\")\n@EnableTransactionManagement\n@EnableCaching\npublic class JPAConfig {\n\n@Value(\"${db.jdbcURL}\")\nprivate String jdbcURL;\n\n@Value(\"${db.user}\")\nprivate String user;\n\n@Value(\"${db.password}\")\nprivate String password;\n\n@Value(\"${db.generateDDL}\")\nprivate Boolean generateDDL;\n\n@SuppressWarnings(\"Duplicates\")\n@Bean\npublic DataSource dataSource() {\n    BasicDataSource dataSource = new BasicDataSource();\n    dataSource.setDriverClassName(Driver.class.getName());\n    dataSource.setUrl(\"jdbc:mysql://localhost:3306/movierentaldb\");\n    dataSource.setUsername(System.getProperty(\"root\"));\n    dataSource.setPassword(System.getProperty(\"mdie1767\"));\n    dataSource.setInitialSize(2);\n    dataSource.setMaxActive(5);\n    return dataSource;\n}\n\n@Bean\npublic LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean(){\n    HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n    vendorAdapter.setDatabase(Database.MYSQL);\n    vendorAdapter.setGenerateDdl(generateDDL);\n    vendorAdapter.setShowSql(true);\n\n    LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n\n    factory.setJpaVendorAdapter(vendorAdapter);\n\n    factory.setPackagesToScan(\"core.model\");\n\n    factory.setDataSource(dataSource());\n\n    factory.afterPropertiesSet();\n    return factory;\n}\n\n@Bean\npublic EntityManagerFactory entityManagerFactory(){\n    return localContainerEntityManagerFactoryBean().getObject();\n}\n\n\n\n@Bean\npublic EntityManager entityManager(){\n    return entityManagerFactory().createEntityManager();\n}\n\n@Bean\nPlatformTransactionManager transactionManager(){\n    JpaTransactionManager manager = new JpaTransactionManager();\n    manager.setEntityManagerFactory(entityManagerFactory());\n    return manager;\n}\n\n@Bean\npublic HibernateExceptionTranslator hibernateExceptionTranslator(){\n    return  new HibernateExceptionTranslator();\n}\n\n@Bean\npublic CacheManager cacheManager(){\n    GuavaCacheManager guavaCacheManager = new GuavaCacheManager();\n    guavaCacheManager.setCacheBuilder(CacheBuilder.newBuilder().expireAfterAccess(2, TimeUnit.HOURS));\n    return guavaCacheManager;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>At this point i can't think of anything else to try..any help is much obliged</p>\n\n<p>Edit: This is the entire stacktrace</p>\n\n<pre><code>23-May-2016 13:05:10.267 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log No Spring WebApplicationInitializer types detected on classpath\n23-May-2016 13:05:10.444 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Initializing Spring root WebApplicationContext\n23-May-2016 13:05:15.333 SEVERE [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.StandardContext.listenerStart Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\n org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'localContainerEntityManagerFactoryBean' defined in class path resource [core/JPAConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'localContainerEntityManagerFactoryBean' threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1123)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1018)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1054)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:829)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:444)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:326)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4732)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5194)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:152)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:702)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\n    at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1702)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:482)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:431)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1466)\n    at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\n    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1307)\n    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1399)\n    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:828)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:323)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$240(TCPTransport.java:683)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$$Lambda$1/108265094.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'localContainerEntityManagerFactoryBean' threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)\n    ... 60 more\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:954)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:884)\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:60)\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:343)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:319)\n    at core.JPAConfig.localContainerEntityManagerFactoryBean(JPAConfig.java:94)\n    at core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261.CGLIB$localContainerEntityManagerFactoryBean$1(&lt;generated&gt;)\n    at core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261$$FastClassBySpringCGLIB$$901863a2.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:355)\n    at core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261.localContainerEntityManagerFactoryBean(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)\n    ... 61 more\nCaused by: org.hibernate.tool.schema.spi.SchemaManagementException: Unable to obtain JDBC Connection\n    at org.hibernate.tool.schema.internal.exec.AbstractJdbcConnectionContextImpl.getConnection(AbstractJdbcConnectionContextImpl.java:46)\n    at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:59)\n    at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:66)\n    at org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.getTable(InformationExtractorJdbcDatabaseMetaDataImpl.java:271)\n    at org.hibernate.tool.schema.internal.exec.ImprovedDatabaseInformationImpl.getTableInformation(ImprovedDatabaseInformationImpl.java:109)\n    at org.hibernate.tool.schema.internal.SchemaMigratorImpl.performMigration(SchemaMigratorImpl.java:252)\n    at org.hibernate.tool.schema.internal.SchemaMigratorImpl.doMigration(SchemaMigratorImpl.java:137)\n    at org.hibernate.tool.schema.internal.SchemaMigratorImpl.doMigration(SchemaMigratorImpl.java:110)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:176)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:64)\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:458)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:465)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:881)\n    ... 75 more\nCaused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user ''@'localhost' (using password: NO))\n    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549)\n    at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)\n    at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\n    at org.hibernate.tool.schema.internal.exec.AbstractJdbcConnectionContextImpl.getConnection(AbstractJdbcConnectionContextImpl.java:43)\n    ... 87 more\nCaused by: java.sql.SQLException: Access denied for user ''@'localhost' (using password: NO)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:695)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:663)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:653)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:108)\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:1683)\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:656)\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:349)\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:221)\n    at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)\n    at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)\n    at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)\n    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)\n    ... 92 more\n\n23-May-2016 13:05:15.379 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Closing Spring root WebApplicationContext\nError:(7, 24) java: package org.gjt.mm.mysql does not exist\n</code></pre>\n"},{"tags":["java","android","android-alertdialog"],"comments":[{"owner":{"account_id":444416,"reputation":15934,"user_id":836214,"accept_rate":86,"display_name":"Krease"},"score":0,"creation_date":1460735970,"post_id":36651655,"comment_id":60896787,"body_markdown":"`return m_text`? You&#39;re assigning the value in the OK handler... Does that not work?","body":"<code>return m_text</code>? You&#39;re assigning the value in the OK handler... Does that not work?"},{"owner":{"account_id":6757170,"reputation":943,"user_id":5205132,"accept_rate":72,"display_name":"OmerN"},"score":0,"creation_date":1460736261,"post_id":36651655,"comment_id":60896956,"body_markdown":"I want the function to return m_text","body":"I want the function to return m_text"},{"owner":{"account_id":444416,"reputation":15934,"user_id":836214,"accept_rate":86,"display_name":"Krease"},"score":0,"creation_date":1460736555,"post_id":36651655,"comment_id":60897141,"body_markdown":"Ah, `builder.show` is not a blocking function. You&#39;ll either need to block your method until the value is ready or use a callback mechanism.","body":"Ah, <code>builder.show</code> is not a blocking function. You&#39;ll either need to block your method until the value is ready or use a callback mechanism."},{"owner":{"account_id":5353527,"reputation":9286,"user_id":4266957,"accept_rate":38,"display_name":"Ricardo"},"score":0,"creation_date":1460736597,"post_id":36651655,"comment_id":60897178,"body_markdown":"If the String m_text is defined globally why do you need it to return? Once the method is through and the user enters ok the value will be stored. just make it type void","body":"If the String m_text is defined globally why do you need it to return? Once the method is through and the user enters ok the value will be stored. just make it type void"},{"owner":{"account_id":945318,"reputation":8080,"user_id":972671,"accept_rate":46,"display_name":"Kingfisher Phuoc"},"score":0,"creation_date":1460771052,"post_id":36651655,"comment_id":60911281,"body_markdown":"No, you can not. If you do that, it will block your UI thread. you should try to make it asynchronous (as using listener, callback...).","body":"No, you can not. If you do that, it will block your UI thread. you should try to make it asynchronous (as using listener, callback...)."}],"answers":[{"comments":[{"owner":{"account_id":444416,"reputation":15934,"user_id":836214,"accept_rate":86,"display_name":"Krease"},"score":2,"creation_date":1460736476,"post_id":36651793,"comment_id":60897090,"body_markdown":"This sounds like a callback pattern - worth clarifying that so OP can easily lookup other examples.","body":"This sounds like a callback pattern - worth clarifying that so OP can easily lookup other examples."}],"tags":[],"owner":{"account_id":7862108,"reputation":323,"user_id":6204582,"display_name":"Daniel Griffin"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1460735859,"creation_date":1460735859,"answer_id":36651793,"question_id":36651655,"body_markdown":"Create another method in the same class that accepts a string value, then call that function providing the value of `input.getText().toString()` from your `setPositiveButton` onclick event","title":"Returning A Value From AlertDialog","body":"<p>Create another method in the same class that accepts a string value, then call that function providing the value of <code>input.getText().toString()</code> from your <code>setPositiveButton</code> onclick event</p>\n"},{"comments":[{"owner":{"account_id":6757170,"reputation":943,"user_id":5205132,"accept_rate":72,"display_name":"OmerN"},"score":1,"creation_date":1460736319,"post_id":36651825,"comment_id":60896995,"body_markdown":"No that wouldn&#39;t work, it will return an empty string because the return happens before the user click OK.","body":"No that wouldn&#39;t work, it will return an empty string because the return happens before the user click OK."},{"owner":{"account_id":7502852,"reputation":668,"user_id":5700519,"display_name":"Expired Data"},"score":0,"creation_date":1460736483,"post_id":36651825,"comment_id":60897093,"body_markdown":"In which case what you&#39;re asking is slightly different. You won&#39;t be able to return in your openDialog method, since as you say it&#39;s just the opening of the dialog.\n\nUnless you&#39;re running this on a worker thread and can sleep until a return value is sent.","body":"In which case what you&#39;re asking is slightly different. You won&#39;t be able to return in your openDialog method, since as you say it&#39;s just the opening of the dialog.  Unless you&#39;re running this on a worker thread and can sleep until a return value is sent."}],"tags":[],"owner":{"account_id":7502852,"reputation":668,"user_id":5700519,"display_name":"Expired Data"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1460735955,"creation_date":1460735955,"answer_id":36651825,"question_id":36651655,"body_markdown":"This looks to me like you have stored the value of the inputted text in the m_Text field. You can either just return that field or have a variable within the function in which you store the value to be returned. \r\n\r\nWhere you have: \r\n\r\n    //Return string \r\n\r\nsimply replacing with:\r\n\r\n    return m_Text; \r\n\r\nshould do the job. ","title":"Returning A Value From AlertDialog","body":"<p>This looks to me like you have stored the value of the inputted text in the m_Text field. You can either just return that field or have a variable within the function in which you store the value to be returned. </p>\n\n<p>Where you have: </p>\n\n<pre><code>//Return string \n</code></pre>\n\n<p>simply replacing with:</p>\n\n<pre><code>return m_Text; \n</code></pre>\n\n<p>should do the job. </p>\n"},{"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1689806612,"creation_date":1460737383,"answer_id":36652295,"question_id":36651655,"body_markdown":"The call `builder.show()` which opens your `AlertDialog` is not a blocking call. In other words, the subsequent instructions will be executed without waiting for the `AlertDialog` to finish (return). You should interact with it by using some *callback*. For instance, your `OnClickListeners` are an implementation of such a pattern.\r\n\r\n## A simple callback pattern\r\n\r\nOne clean way to achieve what you want is to create a *Functional Interface* which is an interface having only one method. You would use it for handling your callbacks.\r\n\r\n# Example\r\n\r\n    interface OnOK{\r\n        void onTextEntered(String text);\r\n    }\r\n\r\nAnd then you would alter your method to be like:\r\n\r\n    private void openDialog(String title, final OnOK onOK) {\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext());\r\n        builder.setTitle(title);\r\n\r\n        final EditText input = new EditText(view.getContext());\r\n        input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_NORMAL);\r\n        builder.setView(input);\r\n\r\n        builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n           @Override\r\n           public void onClick(DialogInterface dialog, int which) {\r\n              //Oi, look at this line!\r\n              onOK.onTextEntered(input.getText().toString());\r\n           }\r\n        });\r\n\r\n        builder.show();\r\n    } \r\n\r\nYou can use it like this:\r\n\r\n    openDialog(&quot;Title&quot;, new OnOK() {\r\n       @Override\r\n       onTextEntered(String text) {\r\n          Log.i(&quot;LOG&quot;, text);\r\n       } \r\n    });","title":"Returning A Value From AlertDialog","body":"<p>The call <code>builder.show()</code> which opens your <code>AlertDialog</code> is not a blocking call. In other words, the subsequent instructions will be executed without waiting for the <code>AlertDialog</code> to finish (return). You should interact with it by using some <em>callback</em>. For instance, your <code>OnClickListeners</code> are an implementation of such a pattern.</p>\n<h2>A simple callback pattern</h2>\n<p>One clean way to achieve what you want is to create a <em>Functional Interface</em> which is an interface having only one method. You would use it for handling your callbacks.</p>\n<h1>Example</h1>\n<pre><code>interface OnOK{\n    void onTextEntered(String text);\n}\n</code></pre>\n<p>And then you would alter your method to be like:</p>\n<pre><code>private void openDialog(String title, final OnOK onOK) {\n    AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext());\n    builder.setTitle(title);\n\n    final EditText input = new EditText(view.getContext());\n    input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_NORMAL);\n    builder.setView(input);\n\n    builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n       @Override\n       public void onClick(DialogInterface dialog, int which) {\n          //Oi, look at this line!\n          onOK.onTextEntered(input.getText().toString());\n       }\n    });\n\n    builder.show();\n} \n</code></pre>\n<p>You can use it like this:</p>\n<pre><code>openDialog(&quot;Title&quot;, new OnOK() {\n   @Override\n   onTextEntered(String text) {\n      Log.i(&quot;LOG&quot;, text);\n   } \n});\n</code></pre>\n"}],"owner":{"account_id":6757170,"reputation":943,"user_id":5205132,"accept_rate":72,"display_name":"OmerN"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4401,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":36652295,"answer_count":3,"score":6,"last_activity_date":1689806612,"creation_date":1460735510,"question_id":36651655,"body_markdown":"I want to build a function that creates an AlertDialog and returns the string that the user entered, this the function I have for creating the dialog, how do I return the value?\r\n\r\n    String m_Text = &quot;&quot;;\r\n    private String openDialog(String title) {\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext());\r\n        builder.setTitle(title);\r\n\r\n        final EditText input = new EditText(view.getContext());\r\n        input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_NORMAL);\r\n        builder.setView(input);\r\n\r\n        builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                m_Text = input.getText().toString();\r\n            }\r\n        });\r\n        builder.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                dialog.cancel();\r\n            }\r\n        });\r\n\r\n        builder.show();\r\n\r\n    // return string\r\n    } \r\n","title":"Returning A Value From AlertDialog","body":"<p>I want to build a function that creates an AlertDialog and returns the string that the user entered, this the function I have for creating the dialog, how do I return the value?</p>\n\n<pre><code>String m_Text = \"\";\nprivate String openDialog(String title) {\n    AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext());\n    builder.setTitle(title);\n\n    final EditText input = new EditText(view.getContext());\n    input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_NORMAL);\n    builder.setView(input);\n\n    builder.setPositiveButton(\"OK\", new DialogInterface.OnClickListener() {\n        @Override\n        public void onClick(DialogInterface dialog, int which) {\n            m_Text = input.getText().toString();\n        }\n    });\n    builder.setNegativeButton(\"Cancel\", new DialogInterface.OnClickListener() {\n        @Override\n        public void onClick(DialogInterface dialog, int which) {\n            dialog.cancel();\n        }\n    });\n\n    builder.show();\n\n// return string\n} \n</code></pre>\n"},{"tags":["java","annotations","bean-validation"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1689820081,"post_id":76725618,"comment_id":135268581,"body_markdown":"Seems to make sense to me. The `@MyString` annotation has its own size constraints, separate from the `@Size` annotation (even if it&#39;s implemented by meta-annotating it with `@Size`), and the `@MyString` constraints are being checked first. That&#39;s how I interpret the behavior, at least. But why are you adding that other `@Size` annotation? Shouldn&#39;t you just do `@MyString(min = 1, max = 3)`?","body":"Seems to make sense to me. The <code>@MyString</code> annotation has its own size constraints, separate from the <code>@Size</code> annotation (even if it&#39;s implemented by meta-annotating it with <code>@Size</code>), and the <code>@MyString</code> constraints are being checked first. That&#39;s how I interpret the behavior, at least. But why are you adding that other <code>@Size</code> annotation? Shouldn&#39;t you just do <code>@MyString(min = 1, max = 3)</code>?"}],"owner":{"account_id":292835,"reputation":6407,"user_id":595833,"accept_rate":94,"display_name":"bobbyrne01"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689806280,"creation_date":1689806280,"question_id":76725618,"body_markdown":"I have the following Java annotation:\r\n\r\n```java\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target({ElementType.FIELD, ElementType.ANNOTATION_TYPE})\r\n@Size\r\n@Constraint(validatedBy = {})\r\npublic @interface MyString {\r\n\r\n    @OverridesAttribute(constraint = Size.class, name = &quot;min&quot;)\r\n    int min() default 4;\r\n\r\n    @OverridesAttribute(constraint = Size.class, name = &quot;max&quot;)\r\n    int max() default Integer.MAX_VALUE;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n    String message() default &quot;{org.example.annotation.mystring}&quot;;\r\n}\r\n```\r\n\r\nWhich is applied to a field in a POJO:\r\n\r\n```java\r\nimport jakarta.validation.constraints.Size;\r\nimport org.example.annotation.MyString;\r\n\r\npublic class PersonMyString {\r\n\r\n    @MyString\r\n    public String firstName;\r\n}\r\n```\r\n\r\nAnd the `PersonMyString` class is initialised and tested using:\r\n\r\n```java\r\n@Test\r\npublic void printViolatedConstraints() {\r\n    PersonCitadelString person = new PersonCitadelString();\r\n    person.firstName = &quot;bob&quot;;\r\n\r\n    Validator validator =\r\n            Validation.byDefaultProvider()\r\n                    .configure()\r\n                    .messageInterpolator(new ParameterMessageInterpolator())\r\n                    .buildValidatorFactory()\r\n                    .getValidator();\r\n\r\n    Set&lt;ConstraintViolation&lt;PersonCitadelString&gt;&gt; violations = validator.validate(person);\r\n\r\n    System.err.println(&quot;--&quot;);\r\n    for (ConstraintViolation&lt;PersonCitadelString&gt; violation : violations) {\r\n        System.err.println(violation.getPropertyPath() + &quot;: &quot; + violation.getMessage());\r\n    }\r\n}\r\n```\r\n\r\nA violation message is printed:\r\n\r\n```\r\nfirstName: size must be between 4 and 2147483647\r\n```\r\n\r\nWhy is it that when I update my POJO to be:\r\n\r\n```java\r\nimport jakarta.validation.constraints.Size;\r\nimport org.example.annotation.MyString;\r\n\r\npublic class PersonMyString {\r\n\r\n    @MyString\r\n    @Size(min = 1, max = 3) // &lt;-- New line\r\n    public String firstName;\r\n}\r\n```\r\n\r\nThe additional line is ignored and I end up with the same violation printed:\r\n\r\n```\r\nfirstName: size must be between 4 and 2147483647\r\n```\r\n\r\nDoes the `@Size(min = 1, max = 3)` not override what is set on nested annotations?","title":"Why does specifying @Size(min = 1, max = 3) directly on field not override any @Size constraints declared by other annotations on that field?","body":"<p>I have the following Java annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.FIELD, ElementType.ANNOTATION_TYPE})\n@Size\n@Constraint(validatedBy = {})\npublic @interface MyString {\n\n    @OverridesAttribute(constraint = Size.class, name = &quot;min&quot;)\n    int min() default 4;\n\n    @OverridesAttribute(constraint = Size.class, name = &quot;max&quot;)\n    int max() default Integer.MAX_VALUE;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n    String message() default &quot;{org.example.annotation.mystring}&quot;;\n}\n</code></pre>\n<p>Which is applied to a field in a POJO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.validation.constraints.Size;\nimport org.example.annotation.MyString;\n\npublic class PersonMyString {\n\n    @MyString\n    public String firstName;\n}\n</code></pre>\n<p>And the <code>PersonMyString</code> class is initialised and tested using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void printViolatedConstraints() {\n    PersonCitadelString person = new PersonCitadelString();\n    person.firstName = &quot;bob&quot;;\n\n    Validator validator =\n            Validation.byDefaultProvider()\n                    .configure()\n                    .messageInterpolator(new ParameterMessageInterpolator())\n                    .buildValidatorFactory()\n                    .getValidator();\n\n    Set&lt;ConstraintViolation&lt;PersonCitadelString&gt;&gt; violations = validator.validate(person);\n\n    System.err.println(&quot;--&quot;);\n    for (ConstraintViolation&lt;PersonCitadelString&gt; violation : violations) {\n        System.err.println(violation.getPropertyPath() + &quot;: &quot; + violation.getMessage());\n    }\n}\n</code></pre>\n<p>A violation message is printed:</p>\n<pre><code>firstName: size must be between 4 and 2147483647\n</code></pre>\n<p>Why is it that when I update my POJO to be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.validation.constraints.Size;\nimport org.example.annotation.MyString;\n\npublic class PersonMyString {\n\n    @MyString\n    @Size(min = 1, max = 3) // &lt;-- New line\n    public String firstName;\n}\n</code></pre>\n<p>The additional line is ignored and I end up with the same violation printed:</p>\n<pre><code>firstName: size must be between 4 and 2147483647\n</code></pre>\n<p>Does the <code>@Size(min = 1, max = 3)</code> not override what is set on nested annotations?</p>\n"},{"tags":["java","spring-boot","opencsv"],"comments":[{"owner":{"account_id":149142,"reputation":1772,"user_id":361414,"display_name":"Milanka"},"score":0,"creation_date":1684917844,"post_id":76142662,"comment_id":134586118,"body_markdown":"What version of Spring Boot are you using? If newer than 2.7.6, does downgrading help? Might be a bug in embedded Tomcat, which was updated in Spring Boot 2.7.7: https://github.com/spring-projects/spring-boot/releases/tag/v2.7.7","body":"What version of Spring Boot are you using? If newer than 2.7.6, does downgrading help? Might be a bug in embedded Tomcat, which was updated in Spring Boot 2.7.7: <a href=\"https://github.com/spring-projects/spring-boot/releases/tag/v2.7.7\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/releases/tag/v2.7.7</a>"}],"answers":[{"comments":[{"owner":{"account_id":11609571,"reputation":37,"user_id":8504176,"display_name":"Nayan J"},"score":0,"creation_date":1690650915,"post_id":76422550,"comment_id":135384566,"body_markdown":"Strange. This worked!\nCan you explain why this works and what was wrong in my code?","body":"Strange. This worked! Can you explain why this works and what was wrong in my code?"},{"owner":{"account_id":5054136,"reputation":3220,"user_id":4057865,"accept_rate":100,"display_name":"Green Lei"},"score":0,"creation_date":1699864729,"post_id":76422550,"comment_id":136579886,"body_markdown":"When the try statement ends, the InputStream will automatically close","body":"When the try statement ends, the InputStream will automatically close"}],"tags":[],"owner":{"account_id":4019724,"reputation":171,"user_id":3310526,"display_name":"CodeYourBrain"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1686135245,"creation_date":1686135245,"answer_id":76422550,"question_id":76142662,"body_markdown":"Use try with resource, it should fix your issue. \r\n\r\nI encountered similar issue today and using try with resource fixed the issue!\r\n\r\nFor your piece of code, it will look like -  \r\n\r\n&gt; try (Reader reader = new InputStreamReader(file.getInputStream())) {\r\n&gt; ... }\r\n\r\n\r\nHope this helps.","title":"CSV uploading as Multipart file throws &quot;Failed to perform cleanup of multipart items error in Spring API","body":"<p>Use try with resource, it should fix your issue.</p>\n<p>I encountered similar issue today and using try with resource fixed the issue!</p>\n<p>For your piece of code, it will look like -</p>\n<blockquote>\n<p>try (Reader reader = new InputStreamReader(file.getInputStream())) {\n... }</p>\n</blockquote>\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":17787865,"reputation":29,"user_id":12917561,"display_name":"Akshay bhavsar"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689086406,"creation_date":1689086406,"answer_id":76663134,"question_id":76142662,"body_markdown":"use try and catch block for reference check following code\r\n @PostMapping(&quot;/post/image/upload/{postId}&quot;)\r\n    public ResponseEntity&lt;PostDto&gt; uploadPostImage(@RequestParam(&quot;image&quot;) MultipartFile image,\r\n            @PathVariable Integer postId) {\r\n        \r\n       PostDto postDto=null;\r\n        try {\r\n             postDto= this.postService.getPostById(postId);\r\n           String  fileName= this.fileService.uploadImage(path, image);\r\n             postDto.setImageName(fileName);\r\n            \r\n           \r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n          \r\n        }\r\n       \r\n        PostDto updatedPost= this.postService.updatePost(postDto, postId);\r\n      return new ResponseEntity&lt;PostDto&gt;(updatedPost, HttpStatus.OK);\r\n       \r\n    }\r\nhowever error in terminal is visible but image is uploaded in db \r\n.\r\n.\r\n.\r\n.\r\n.\r\n.\r\nCaused by: java.io.IOException: Cannot delete C:\\Users\\Apunich Bhagwan Hai\\AppData\\Local\\Temp\\tomcat.8080.18372763972742625326\\work\\Tomcat\\localhost\\ROOT\\upload_2b881de4_e289_4604_bc97_7063aadae178_00000009.tmp\r\n        ... 14 common frames omitted","title":"CSV uploading as Multipart file throws &quot;Failed to perform cleanup of multipart items error in Spring API","body":"<p>use try and catch block for reference check following code\n@PostMapping(&quot;/post/image/upload/{postId}&quot;)\npublic ResponseEntity uploadPostImage(@RequestParam(&quot;image&quot;) MultipartFile image,\n@PathVariable Integer postId) {</p>\n<pre><code>   PostDto postDto=null;\n    try {\n         postDto= this.postService.getPostById(postId);\n       String  fileName= this.fileService.uploadImage(path, image);\n         postDto.setImageName(fileName);\n        \n       \n    } catch (Exception e) {\n        e.printStackTrace();\n      \n    }\n   \n    PostDto updatedPost= this.postService.updatePost(postDto, postId);\n  return new ResponseEntity&lt;PostDto&gt;(updatedPost, HttpStatus.OK);\n   \n}\n</code></pre>\n<p>however error in terminal is visible but image is uploaded in db\n.\n.\n.\n.\n.\n.\nCaused by: java.io.IOException: Cannot delete C:\\Users\\Apunich Bhagwan Hai\\AppData\\Local\\Temp\\tomcat.8080.18372763972742625326\\work\\Tomcat\\localhost\\ROOT\\upload_2b881de4_e289_4604_bc97_7063aadae178_00000009.tmp\n... 14 common frames omitted</p>\n"},{"tags":[],"owner":{"account_id":29052583,"reputation":1,"user_id":22255055,"display_name":"Buezman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689806130,"creation_date":1689806130,"answer_id":76725603,"question_id":76142662,"body_markdown":"Convert multipart to File first.\r\n\r\n    private File convertMultipartToFile(MultipartFile imageFile) throws IOException {\r\n        String file = imageFile.getOriginalFilename();\r\n        log.info(&quot;File name ==&gt; {}&quot;, file);\r\n        assert file != null;\r\n        File convertFile = new File(file);\r\n        FileOutputStream fileOutputStream = new FileOutputStream(convertFile);\r\n        fileOutputStream.write(imageFile.getBytes());\r\n        fileOutputStream.close();\r\n        return convertFile;\r\n    }\r\n\r\nthen call the `convertFile.delete()` method after your upload.","title":"CSV uploading as Multipart file throws &quot;Failed to perform cleanup of multipart items error in Spring API","body":"<p>Convert multipart to File first.</p>\n<pre><code>private File convertMultipartToFile(MultipartFile imageFile) throws IOException {\n    String file = imageFile.getOriginalFilename();\n    log.info(&quot;File name ==&gt; {}&quot;, file);\n    assert file != null;\n    File convertFile = new File(file);\n    FileOutputStream fileOutputStream = new FileOutputStream(convertFile);\n    fileOutputStream.write(imageFile.getBytes());\n    fileOutputStream.close();\n    return convertFile;\n}\n</code></pre>\n<p>then call the <code>convertFile.delete()</code> method after your upload.</p>\n"}],"owner":{"account_id":11609571,"reputation":37,"user_id":8504176,"display_name":"Nayan J"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2446,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76422550,"answer_count":3,"score":1,"last_activity_date":1689806130,"creation_date":1682876376,"question_id":76142662,"body_markdown":"I am trying to upload a CSV file to do some operation. I am using OpenCSV 5.7.1 version to handle CSV file.\r\nAs of now, I was just simply exploring the functionalities, i.e one API to upload file and then reading the file if it is able to fetch the data or not.\r\n\r\nController Class:\r\n```java\r\n@PostMapping(value = &quot;/upload&quot;)\r\npublic ResponseEntity&lt;MyAppResponse&gt; processCsvUpload(@RequestParam(&quot;file&quot;) MultipartFile file, @RequestParam(&quot;request&quot;) String uploadRequest) {\r\n  //call service method\r\n}\r\n```\r\n\r\nService Class:\r\n```java\r\n        Reader reader = null;\r\n\t\ttry {\r\n\t\t\treader = new InputStreamReader(file.getInputStream());\r\n\t\t} catch (IOException e) {\r\n\t\t\tlogger.error(&quot;&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t\tthrow new MvAppException();\r\n\t\t}\r\n\t\tCSVReader csvReader = new CSVReaderBuilder(reader).withSkipLines(1).build();\r\n\t\ttry {\r\n\t\t\tList&lt;String[]&gt; rows = csvReader.readAll();\r\n\t\t\tfor (String[] arr : rows) {\r\n\t\t\t\tfor (String temp : arr)\r\n\t\t\t\t\tSystem.out.print(temp + &quot;, &quot;);\r\n\t\t\t\tSystem.out.println(&quot;&quot;);\r\n\t\t\t}\r\n\t\t} catch (IOException | CsvException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tthrow new MvAppException();\r\n\t\t}\r\n```\r\n\r\nHowever after sending response, it is posting these logs:\r\n\r\n```java\r\n2023-04-30 22:55:34.019  WARN 20072 --- [nio-8080-exec-2] s.w.m.s.StandardServletMultipartResolver : Failed to perform cleanup of multipart items\r\n\r\njava.io.UncheckedIOException: Cannot delete C:\\Users\\Nayan-J\\AppData\\Local\\Temp\\tomcat.8080.193216173997807150\\work\\Tomcat\\localhost\\ROOT\\upload_2c1409b9_6b24_4c83_99e0_32248a854b2c_00000017.tmp\r\n\tat org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:431) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:54) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.multipart.support.StandardServletMultipartResolver.cleanupMultipart(StandardServletMultipartResolver.java:134) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.DispatcherServlet.cleanupMultipart(DispatcherServlet.java:1250) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1107) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:696) [tomcat-embed-core-9.0.71.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) [tomcat-embed-core-9.0.71.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat com.nayanj.mamavidyalaya.fitlerninterceptors.RequestLoggerInterceptor.doFilterInternal(RequestLoggerInterceptor.java:58) [classes/:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat com.nayanj.mamavidyalaya.fitlerninterceptors.SecurityFilter.doFilterInternal(SecurityFilter.java:75) [classes/:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_221]\r\nCaused by: java.io.IOException: Cannot delete C:\\Users\\Nayan-J\\AppData\\Local\\Temp\\tomcat.8080.193216173997807150\\work\\Tomcat\\localhost\\ROOT\\upload_2c1409b9_6b24_4c83_99e0_32248a854b2c_00000017.tmp\r\n\t... 91 common frames omitted\r\n```\r\n\r\nThere is no good resource I could find to resolve this issue. To add, I am using embedded tomcat as application server. Please help.","title":"CSV uploading as Multipart file throws &quot;Failed to perform cleanup of multipart items error in Spring API","body":"<p>I am trying to upload a CSV file to do some operation. I am using OpenCSV 5.7.1 version to handle CSV file.\nAs of now, I was just simply exploring the functionalities, i.e one API to upload file and then reading the file if it is able to fetch the data or not.</p>\n<p>Controller Class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(value = &quot;/upload&quot;)\npublic ResponseEntity&lt;MyAppResponse&gt; processCsvUpload(@RequestParam(&quot;file&quot;) MultipartFile file, @RequestParam(&quot;request&quot;) String uploadRequest) {\n  //call service method\n}\n</code></pre>\n<p>Service Class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Reader reader = null;\n        try {\n            reader = new InputStreamReader(file.getInputStream());\n        } catch (IOException e) {\n            logger.error(&quot;&quot;);\n            e.printStackTrace();\n            throw new MvAppException();\n        }\n        CSVReader csvReader = new CSVReaderBuilder(reader).withSkipLines(1).build();\n        try {\n            List&lt;String[]&gt; rows = csvReader.readAll();\n            for (String[] arr : rows) {\n                for (String temp : arr)\n                    System.out.print(temp + &quot;, &quot;);\n                System.out.println(&quot;&quot;);\n            }\n        } catch (IOException | CsvException e) {\n            e.printStackTrace();\n            throw new MvAppException();\n        }\n</code></pre>\n<p>However after sending response, it is posting these logs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>2023-04-30 22:55:34.019  WARN 20072 --- [nio-8080-exec-2] s.w.m.s.StandardServletMultipartResolver : Failed to perform cleanup of multipart items\n\njava.io.UncheckedIOException: Cannot delete C:\\Users\\Nayan-J\\AppData\\Local\\Temp\\tomcat.8080.193216173997807150\\work\\Tomcat\\localhost\\ROOT\\upload_2c1409b9_6b24_4c83_99e0_32248a854b2c_00000017.tmp\n    at org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:431) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:54) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.multipart.support.StandardServletMultipartResolver.cleanupMultipart(StandardServletMultipartResolver.java:134) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.DispatcherServlet.cleanupMultipart(DispatcherServlet.java:1250) [spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1107) [spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) [spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.25.jar:5.3.25]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:696) [tomcat-embed-core-9.0.71.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.25.jar:5.3.25]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779) [tomcat-embed-core-9.0.71.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at com.nayanj.mamavidyalaya.fitlerninterceptors.RequestLoggerInterceptor.doFilterInternal(RequestLoggerInterceptor.java:58) [classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at com.nayanj.mamavidyalaya.fitlerninterceptors.SecurityFilter.doFilterInternal(SecurityFilter.java:75) [classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_221]\nCaused by: java.io.IOException: Cannot delete C:\\Users\\Nayan-J\\AppData\\Local\\Temp\\tomcat.8080.193216173997807150\\work\\Tomcat\\localhost\\ROOT\\upload_2c1409b9_6b24_4c83_99e0_32248a854b2c_00000017.tmp\n    ... 91 common frames omitted\n</code></pre>\n<p>There is no good resource I could find to resolve this issue. To add, I am using embedded tomcat as application server. Please help.</p>\n"},{"tags":["java","clojure","data-oriented-design","java-sealed-type","clojure-protocol"],"answers":[{"tags":[],"owner":{"account_id":13964622,"reputation":69,"user_id":10084790,"display_name":"Shmuel Greenberger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689805307,"creation_date":1689805307,"answer_id":76725536,"question_id":76140822,"body_markdown":"After a little research, it seems that this is exactly what protocols are *NOT* all about. Protocols are there to solve the expression problem, and therefore are supposed to be totally unlimited.\r\n\r\nHowever, Clojure is TC, so it is possible with a map and a private protocol to define a set of functions that produce records and types that utilize the protocol and only the set of types provided.\r\n\r\nIf code is reqired for clarification, request in a comment or feel free to write your own implementation.\r\n\r\nConclusion: sealing protocols as is done in Java, opposes the design intent and is not done. Yet it is perfectly possible to lexically scope a protocol and expose a set of types or records that implement the protocol.","title":"Sealed Clojure protocols","body":"<p>After a little research, it seems that this is exactly what protocols are <em>NOT</em> all about. Protocols are there to solve the expression problem, and therefore are supposed to be totally unlimited.</p>\n<p>However, Clojure is TC, so it is possible with a map and a private protocol to define a set of functions that produce records and types that utilize the protocol and only the set of types provided.</p>\n<p>If code is reqired for clarification, request in a comment or feel free to write your own implementation.</p>\n<p>Conclusion: sealing protocols as is done in Java, opposes the design intent and is not done. Yet it is perfectly possible to lexically scope a protocol and expose a set of types or records that implement the protocol.</p>\n"}],"owner":{"account_id":13964622,"reputation":69,"user_id":10084790,"display_name":"Shmuel Greenberger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76725536,"answer_count":1,"score":0,"last_activity_date":1689805307,"creation_date":1682851508,"question_id":76140822,"body_markdown":"I&#39;d like to know if Clojure utilizes the sealed interface/ implementing record pattern in Java, and if so how to define it.\r\n\r\nI was thinking along the lines of something like:\r\n\r\n```clojure\r\n(defprotocol \r\n        ;; protocol definition here \r\n        :allows\r\n        ;; vector of allowed types) \r\n```\r\nThen the REPL should warn you that certain types must be defined.\r\n\r\nThe java way of doing it would be to define an interface that allows only certain classes, and that way the compiler forces those classes to implement the interface and flatly disallows any other class to implement the interface.\r\n\r\nI&#39;d think that this is probably something that is much more plausible in a static language, whereas in a dynamic language this can cause interesting complications.\r\n\r\n**EDIT**\r\n\r\nIt would be clearer seen in the context of https://www.infoq.com/articles/data-oriented-programming-java/ to understand what I&#39;m looking for. \r\n\r\nBasically I think my question could be better phrased as: &quot;How to do controlled ad-hoc polymorphism in Clojure&quot;, in the sense of controlled meaning only specific types may extend the protocol. This would then potentially carry the advantages indicated in the link.\r\n\r\nYet still it may be that this is a fundamental difference between dynamic and static programming.\r\nSo please take the time to confirm or correct my presumptions, and forgive me if I&#39;m asking an irrelevant question.","title":"Sealed Clojure protocols","body":"<p>I'd like to know if Clojure utilizes the sealed interface/ implementing record pattern in Java, and if so how to define it.</p>\n<p>I was thinking along the lines of something like:</p>\n<pre class=\"lang-clj prettyprint-override\"><code>(defprotocol \n        ;; protocol definition here \n        :allows\n        ;; vector of allowed types) \n</code></pre>\n<p>Then the REPL should warn you that certain types must be defined.</p>\n<p>The java way of doing it would be to define an interface that allows only certain classes, and that way the compiler forces those classes to implement the interface and flatly disallows any other class to implement the interface.</p>\n<p>I'd think that this is probably something that is much more plausible in a static language, whereas in a dynamic language this can cause interesting complications.</p>\n<p><strong>EDIT</strong></p>\n<p>It would be clearer seen in the context of <a href=\"https://www.infoq.com/articles/data-oriented-programming-java/\" rel=\"nofollow noreferrer\">https://www.infoq.com/articles/data-oriented-programming-java/</a> to understand what I'm looking for.</p>\n<p>Basically I think my question could be better phrased as: &quot;How to do controlled ad-hoc polymorphism in Clojure&quot;, in the sense of controlled meaning only specific types may extend the protocol. This would then potentially carry the advantages indicated in the link.</p>\n<p>Yet still it may be that this is a fundamental difference between dynamic and static programming.\nSo please take the time to confirm or correct my presumptions, and forgive me if I'm asking an irrelevant question.</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689804623,"creation_date":1689804623,"answer_id":76725499,"question_id":76719210,"body_markdown":"&gt; Did I do the right?\r\n\r\nYou&#39;re needlessly duplicating information in the topic, but sure. You can check with `kafka-console-consumer --partition` CLI, for example.\r\n\r\n&gt; receive the same message in the consumers without specifying the partition number\r\n\r\nYou cannot. For instance, if you set unique groupId, then you would get events from all partitions. Or, if you remove `parititonOffsets` and use parameter of `Message` or `ConsumerRecord` rather than String, then you still need to manually filter on `message.partition() == X`","title":"Send message to kafka to multiple partitions and listening multiple same consumer","body":"<blockquote>\n<p>Did I do the right?</p>\n</blockquote>\n<p>You're needlessly duplicating information in the topic, but sure. You can check with <code>kafka-console-consumer --partition</code> CLI, for example.</p>\n<blockquote>\n<p>receive the same message in the consumers without specifying the partition number</p>\n</blockquote>\n<p>You cannot. For instance, if you set unique groupId, then you would get events from all partitions. Or, if you remove <code>parititonOffsets</code> and use parameter of <code>Message</code> or <code>ConsumerRecord</code> rather than String, then you still need to manually filter on <code>message.partition() == X</code></p>\n"}],"owner":{"account_id":3958446,"reputation":13,"user_id":3266217,"display_name":"stim644"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689804742,"creation_date":1689754361,"question_id":76719210,"body_markdown":"I want to understand how to write from a producer to multiple partitions? Did I do the right? Is maybe have easy decision?\r\nI have 2 partiotions in my topic.\r\nAnd i want read same message type equals consumers\r\n\r\nHow can I receive the same message in the consumers without specifying the partition number in the producer and the consumer?\r\n\r\nThanks.\r\nProducer\r\n\r\n    @Service\r\n    public class Producer {\r\n       private static final Logger LOG = LoggerFactory.getLogger(Producer.class);\r\n\r\n       @Autowired\r\n       private KafkaTemplate&lt;String, String&gt; kafkaTemplate;\r\n\r\n       @Value(&quot;${app.topic.foo}&quot;)\r\n       private String topic;\r\n\r\n       public void send(String message){\r\n          LOG.info(&quot;sending message=&#39;{}&#39; to topic=&#39;{}&#39;&quot;, message, topic);\r\n          kafkaTemplate.send(topic,0, &quot;1&quot;,  message);\r\n          kafkaTemplate.send(topic, 1, &quot;1&quot;, message);\r\n       }\r\n    }\r\n\r\nConsumer 1\r\n\r\n    @Service\r\n    public class Consumer {\r\n\r\n      private static final Logger LOG = LoggerFactory.getLogger(Consumer.class);\r\n\r\n      @KafkaListener(\r\n              groupId = &quot;reflectoring-group-3&quot;,\r\n              topicPartitions = @TopicPartition(\r\n                      topic = &quot;${app.topic.foo}&quot;,\r\n                      partitionOffsets = { @PartitionOffset(\r\n                              partition = &quot;0&quot;,\r\n                              initialOffset = &quot;0&quot;) }))\r\n      void commonListenerForMultipleTopics(String message) {\r\n          LOG.info(&quot;MultipleTopicListener - {}&quot;, message);\r\n      }\r\n    }\r\n\r\nConsumer 2\r\n\r\n    @Service\r\n    public class Consumer2 {\r\n      private static final Logger LOG = LoggerFactory.getLogger(Consumer2.class);\r\n    \r\n      @KafkaListener(\r\n              groupId = &quot;reflectoring-group-3&quot;,\r\n              topicPartitions = @TopicPartition(\r\n                      topic = &quot;${app.topic.foo}&quot;,\r\n                      partitionOffsets = { @PartitionOffset(\r\n                              partition = &quot;1&quot;,\r\n                              initialOffset = &quot;0&quot;) }))\r\n      void commonListenerForMultipleTopics(String message) {\r\n          LOG.info(&quot;MultipleTopicListener - {}&quot;, message);\r\n      }\r\n    }","title":"Send message to kafka to multiple partitions and listening multiple same consumer","body":"<p>I want to understand how to write from a producer to multiple partitions? Did I do the right? Is maybe have easy decision?\nI have 2 partiotions in my topic.\nAnd i want read same message type equals consumers</p>\n<p>How can I receive the same message in the consumers without specifying the partition number in the producer and the consumer?</p>\n<p>Thanks.\nProducer</p>\n<pre><code>@Service\npublic class Producer {\n   private static final Logger LOG = LoggerFactory.getLogger(Producer.class);\n\n   @Autowired\n   private KafkaTemplate&lt;String, String&gt; kafkaTemplate;\n\n   @Value(&quot;${app.topic.foo}&quot;)\n   private String topic;\n\n   public void send(String message){\n      LOG.info(&quot;sending message='{}' to topic='{}'&quot;, message, topic);\n      kafkaTemplate.send(topic,0, &quot;1&quot;,  message);\n      kafkaTemplate.send(topic, 1, &quot;1&quot;, message);\n   }\n}\n</code></pre>\n<p>Consumer 1</p>\n<pre><code>@Service\npublic class Consumer {\n\n  private static final Logger LOG = LoggerFactory.getLogger(Consumer.class);\n\n  @KafkaListener(\n          groupId = &quot;reflectoring-group-3&quot;,\n          topicPartitions = @TopicPartition(\n                  topic = &quot;${app.topic.foo}&quot;,\n                  partitionOffsets = { @PartitionOffset(\n                          partition = &quot;0&quot;,\n                          initialOffset = &quot;0&quot;) }))\n  void commonListenerForMultipleTopics(String message) {\n      LOG.info(&quot;MultipleTopicListener - {}&quot;, message);\n  }\n}\n</code></pre>\n<p>Consumer 2</p>\n<pre><code>@Service\npublic class Consumer2 {\n  private static final Logger LOG = LoggerFactory.getLogger(Consumer2.class);\n\n  @KafkaListener(\n          groupId = &quot;reflectoring-group-3&quot;,\n          topicPartitions = @TopicPartition(\n                  topic = &quot;${app.topic.foo}&quot;,\n                  partitionOffsets = { @PartitionOffset(\n                          partition = &quot;1&quot;,\n                          initialOffset = &quot;0&quot;) }))\n  void commonListenerForMultipleTopics(String message) {\n      LOG.info(&quot;MultipleTopicListener - {}&quot;, message);\n  }\n}\n</code></pre>\n"},{"tags":["java","linux","javafx"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":2,"creation_date":1689802935,"post_id":76725342,"comment_id":135267055,"body_markdown":"See also [_Getting Started with JavaFX_](https://openjfx.io/openjfx-docs/) in the [tag:javafx] tag [info](https://stackoverflow.com/tags/javafx/info).","body":"See also <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\"><i>Getting Started with JavaFX</i></a> in the <a href=\"https://stackoverflow.com/questions/tagged/javafx\">javafx</a> tag <a href=\"https://stackoverflow.com/tags/javafx/info\">info</a>."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1689804248,"post_id":76725342,"comment_id":135267218,"body_markdown":"In my experience, that error means the native code of JavaFX is either missing or is for a different platform/architecture.","body":"In my experience, that error means the native code of JavaFX is either missing or is for a different platform/architecture."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1689807376,"post_id":76725342,"comment_id":135267553,"body_markdown":"Various [fixes and debugging techniques for this error on Linux](https://stackoverflow.com/questions/21185156/javafx-on-linux-is-showing-a-graphics-device-initialization-failed-for-es2-s).  Ignore answers that reference JavaFX versions &lt; 11, as earlier versions functioned differently.  Following the official documentation linked by trashgod is probably your best bet.","body":"Various <a href=\"https://stackoverflow.com/questions/21185156/javafx-on-linux-is-showing-a-graphics-device-initialization-failed-for-es2-s\">fixes and debugging techniques for this error on Linux</a>.  Ignore answers that reference JavaFX versions &lt; 11, as earlier versions functioned differently.  Following the official documentation linked by trashgod is probably your best bet."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689808755,"post_id":76725342,"comment_id":135267680,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29052343,"reputation":1,"user_id":22254870,"display_name":"edman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689804068,"creation_date":1689802670,"question_id":76725342,"body_markdown":"I want to create a JavaFX project in Eclipse, but when I try to run `Main.java` there is an error that I could not fix, also the class `module-info.java` or rather the code in it is underlined in red. \r\n\r\nError:\r\n\r\n```none\r\nGraphics Device initialization failed for :  es2, sw\r\nError initializing QuantumRenderer: no suitable pipeline found\r\njava.lang.RuntimeException: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\r\n\tat javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer.getInstance(QuantumRenderer.java:283)\r\n\tat javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.init(QuantumToolkit.java:254)\r\n\tat javafx.graphics/com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:266)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:291)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:163)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:659)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:410)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\r\nCaused by: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\r\n\tat javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:95)\r\n\tat javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:125)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\r\nCaused by: java.lang.RuntimeException: No toolkit found\r\n\tat javafx.graphics/com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:278)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:291)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:163)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:659)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:410)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\r\n\t... 5 more\r\n```\r\n\r\nI reinstalled Java and JavaFX, added necessary libraries to the project, installed GTK 3 and 2 but still can&#39;t understand what&#39;s wrong.","title":"Graphics Device initialization failed for : es2, sw, JavaFX","body":"<p>I want to create a JavaFX project in Eclipse, but when I try to run <code>Main.java</code> there is an error that I could not fix, also the class <code>module-info.java</code> or rather the code in it is underlined in red.</p>\n<p>Error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Graphics Device initialization failed for :  es2, sw\nError initializing QuantumRenderer: no suitable pipeline found\njava.lang.RuntimeException: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\n    at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer.getInstance(QuantumRenderer.java:283)\n    at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.init(QuantumToolkit.java:254)\n    at javafx.graphics/com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:266)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:291)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:163)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:659)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:410)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\nCaused by: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\n    at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:95)\n    at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:125)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\nCaused by: java.lang.RuntimeException: No toolkit found\n    at javafx.graphics/com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:278)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:291)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:163)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:659)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:410)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\n    ... 5 more\n</code></pre>\n<p>I reinstalled Java and JavaFX, added necessary libraries to the project, installed GTK 3 and 2 but still can't understand what's wrong.</p>\n"},{"tags":["java","junit","mockito"],"answers":[{"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1689861018,"post_id":76725433,"comment_id":135275507,"body_markdown":"or `CompletableFuture.supplyAsync(() -&gt; { throw new SomeException(); })` (if it&#39;s an unchecked exception, that is)","body":"or <code>CompletableFuture.supplyAsync(() -&gt; { throw new SomeException(); })</code> (if it&#39;s an unchecked exception, that is)"},{"owner":{"account_id":25299544,"reputation":11,"user_id":19124021,"display_name":"unknown"},"score":0,"creation_date":1689868061,"post_id":76725433,"comment_id":135277399,"body_markdown":"@nodatafound \nthis doesn&#39;t work\nCompletableFuture&lt;Object&gt; failed = new CompletableFuture&lt;&gt;();\nfailed.completeExceptionally(new SomeException());\nbecause documentation says, if not completed, but we&#39;re calling failed.completeExceptionally that makes it to complete with exception and control is not reaching futureA.get() call in try block.","body":"@nodatafound  this doesn&#39;t work CompletableFuture&lt;Object&gt; failed = new CompletableFuture&lt;&gt;(); failed.completeExceptionally(new SomeException()); because documentation says, if not completed, but we&#39;re calling failed.completeExceptionally that makes it to complete with exception and control is not reaching futureA.get() call in try block."},{"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"score":0,"creation_date":1689889145,"post_id":76725433,"comment_id":135281174,"body_markdown":"You should check the code of CompletableFuture: I&#39;m pretty sure the only exception you get there are the checked one InterruptedException, CancellationException (or so) and ExecutionException. I don&#39;t think a runtime exception will be send &quot;as is&quot;: you would have ExecutionException even in this case","body":"You should check the code of CompletableFuture: I&#39;m pretty sure the only exception you get there are the checked one InterruptedException, CancellationException (or so) and ExecutionException. I don&#39;t think a runtime exception will be send &quot;as is&quot;: you would have ExecutionException even in this case"}],"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689803681,"creation_date":1689803681,"answer_id":76725433,"question_id":76725396,"body_markdown":"Why not use what the API offer:\r\n\r\n    CompletableFuture&lt;Object&gt; failed = new CompletableFuture&lt;&gt;();\r\n    failed.completeExceptionally(new SomeException());\r\n\r\nFrom the [documentation][1]:\r\n\r\n&gt; If not already completed, causes invocations of get() and related methods to throw the given exception.\r\n\r\nHowever, `get()` will raise `ExecutionException` and the cause should be `SomeException`, which means your `getStatus` code is not valid:\r\n\r\n    try {\r\n      return futureA.get();\r\n    } catch (ExecutionException e) {\r\n      // handle cause, eg: if (e.getCause() instanceof SomeException) ...\r\n    }\r\n    try {\r\n      return futureB.get();\r\n    } catch (ExecutionException e) {\r\n      // handle cause, eg: if (e.getCause() instanceof SomeException) ...\r\n    }\r\n    return null; // or whatever default value/exception\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#completeExceptionally-java.lang.Throwable-\r\n","title":"How to mock CompletableFuture.get() to throw an exception","body":"<p>Why not use what the API offer:</p>\n<pre><code>CompletableFuture&lt;Object&gt; failed = new CompletableFuture&lt;&gt;();\nfailed.completeExceptionally(new SomeException());\n</code></pre>\n<p>From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#completeExceptionally-java.lang.Throwable-\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>If not already completed, causes invocations of get() and related methods to throw the given exception.</p>\n</blockquote>\n<p>However, <code>get()</code> will raise <code>ExecutionException</code> and the cause should be <code>SomeException</code>, which means your <code>getStatus</code> code is not valid:</p>\n<pre><code>try {\n  return futureA.get();\n} catch (ExecutionException e) {\n  // handle cause, eg: if (e.getCause() instanceof SomeException) ...\n}\ntry {\n  return futureB.get();\n} catch (ExecutionException e) {\n  // handle cause, eg: if (e.getCause() instanceof SomeException) ...\n}\nreturn null; // or whatever default value/exception\n</code></pre>\n"}],"owner":{"account_id":25299544,"reputation":11,"user_id":19124021,"display_name":"unknown"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689803681,"creation_date":1689803198,"question_id":76725396,"body_markdown":"i have code as below\r\n\r\n    public Object getStatus(CompletableFuture&lt;Object&gt; futureA, CompletableFuture&lt;Object&gt; futureB) {\r\n    CompletableFuture.allOf(futureA, futureB).join();\r\n    try {\r\n    if(futureA.get()!=null) return futureA.get();\r\n    } catch(SomeException e) {\r\n    //log\r\n    }\r\n    try {\r\n    if(futureB.get()!=null) return futureB.get();\r\n    } catch(SomeException e) {\r\n    //log\r\n    }\r\n    }\r\n\r\ni have my test as below\r\n\r\n    @Test\r\n    public void testException() {\r\n    CompletableFuture&lt;Object&gt; futureA = new CompletableFuture&lt;&gt;();\r\n    CompletableFuture&lt;Object&gt; futureB = CompletableFuture.completedFuture(null);\r\n    CompletableFuture&lt;Object&gt; spy = Mockito.spy(futureA);\r\n    when(spy.get()).thenThrow(new SomeException());\r\n    service.getStatus(futureA, futureB);\r\n    }\r\n\r\ntrying to cover the catch block, but this is not working, it is waiting for futureA to complete. how do i test the catch block?","title":"How to mock CompletableFuture.get() to throw an exception","body":"<p>i have code as below</p>\n<pre><code>public Object getStatus(CompletableFuture&lt;Object&gt; futureA, CompletableFuture&lt;Object&gt; futureB) {\nCompletableFuture.allOf(futureA, futureB).join();\ntry {\nif(futureA.get()!=null) return futureA.get();\n} catch(SomeException e) {\n//log\n}\ntry {\nif(futureB.get()!=null) return futureB.get();\n} catch(SomeException e) {\n//log\n}\n}\n</code></pre>\n<p>i have my test as below</p>\n<pre><code>@Test\npublic void testException() {\nCompletableFuture&lt;Object&gt; futureA = new CompletableFuture&lt;&gt;();\nCompletableFuture&lt;Object&gt; futureB = CompletableFuture.completedFuture(null);\nCompletableFuture&lt;Object&gt; spy = Mockito.spy(futureA);\nwhen(spy.get()).thenThrow(new SomeException());\nservice.getStatus(futureA, futureB);\n}\n</code></pre>\n<p>trying to cover the catch block, but this is not working, it is waiting for futureA to complete. how do i test the catch block?</p>\n"},{"tags":["java","spring-boot","kubernetes","apache-kafka","event-handling"],"comments":[{"owner":{"account_id":8465462,"reputation":7040,"user_id":6349751,"accept_rate":90,"display_name":"AymDev"},"score":0,"creation_date":1689774736,"post_id":76721973,"comment_id":135261219,"body_markdown":"I have little knowledge on those topics but maybe something like the 1st solution (consumer group with a random name) using Kubernetes [PreStop hook](https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/) to delete the consumer group. Looks like consumer groups [can be automatically deleted](https://docs.confluent.io/kafka/operations-tools/manage-consumer-groups.html#view-consumer-group-info) but I don&#39;t really know how it works.","body":"I have little knowledge on those topics but maybe something like the 1st solution (consumer group with a random name) using Kubernetes <a href=\"https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/\" rel=\"nofollow noreferrer\">PreStop hook</a> to delete the consumer group. Looks like consumer groups <a href=\"https://docs.confluent.io/kafka/operations-tools/manage-consumer-groups.html#view-consumer-group-info\" rel=\"nofollow noreferrer\">can be automatically deleted</a> but I don&#39;t really know how it works."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1689774813,"post_id":76721973,"comment_id":135261247,"body_markdown":"Is there an available hook when when a pod is created/killed?  If yes, on creation, programmatically add a new topic subscription and start listening on that subscription.  And on kill, programmatically delete the subscription.","body":"Is there an available hook when when a pod is created/killed?  If yes, on creation, programmatically add a new topic subscription and start listening on that subscription.  And on kill, programmatically delete the subscription."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689803483,"creation_date":1689803483,"answer_id":76725416,"question_id":76721973,"body_markdown":"&gt; the consumer group remains for ever\r\n\r\nIf you don&#39;t commit the offsets, then no group is created. \r\n\r\n&gt; constantly increasing lag\r\n\r\nThis is only an issue if you use `auto.offset.reset=earliest`. \r\n\r\n&gt; All the events from one particular topic must be consumed by each running instance of the microservice\r\n\r\nYou can use `consumer.assign()` with the list of TopicPartition, which you can query with `AdminClient`, or hard-code. \r\n\r\nOtherwise, you need to use a random group per pod since any static value will cause idle consumers when there are more pods than partitions. \r\n\r\nAlso, you are not required to use Kafka `__consumer_offsets` topic at  all. You can manually commit offset values in an external store, and use `assign` and `seek` functions. When you use an external store, then you can have better guarantees of exactly-once processing since you can additionally mark any offset as &quot;processed==true&quot;, and seek to the min(processed == false) offset before each seek. ","title":"Make all Kubernetes pods listen to the same Kafka topic","body":"<blockquote>\n<p>the consumer group remains for ever</p>\n</blockquote>\n<p>If you don't commit the offsets, then no group is created.</p>\n<blockquote>\n<p>constantly increasing lag</p>\n</blockquote>\n<p>This is only an issue if you use <code>auto.offset.reset=earliest</code>.</p>\n<blockquote>\n<p>All the events from one particular topic must be consumed by each running instance of the microservice</p>\n</blockquote>\n<p>You can use <code>consumer.assign()</code> with the list of TopicPartition, which you can query with <code>AdminClient</code>, or hard-code.</p>\n<p>Otherwise, you need to use a random group per pod since any static value will cause idle consumers when there are more pods than partitions.</p>\n<p>Also, you are not required to use Kafka <code>__consumer_offsets</code> topic at  all. You can manually commit offset values in an external store, and use <code>assign</code> and <code>seek</code> functions. When you use an external store, then you can have better guarantees of exactly-once processing since you can additionally mark any offset as &quot;processed==true&quot;, and seek to the min(processed == false) offset before each seek.</p>\n"}],"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":723,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689803483,"creation_date":1689774164,"question_id":76721973,"body_markdown":"### Situation\r\n- We have multiple Kubernetes pods of each deployment (= microservice)\r\n- Our application is massively Kafka-based\r\n- Normally each microservice consumes each Kafka topic in a single consumer group, which is good as we need that each Kafka events is consumed exactly once\r\n- Kubernetes launches and stops pods whenever it&#39;s needed\r\n\r\n### Problem\r\n- We have one topic, which must be consumed by all the running instances (pods) of a single microservice (to reset some internal status)\r\n\r\n## What we considered and why it doesn&#39;t work\r\n- Consume from the topic always in a new consumer group with a random name:&lt;br&gt;\r\nNO, because as soon as a pod is killed, the consumer group remains for ever, with the constantly increasing lag. The number of detached consumer group without a listener grows over time.\r\n- https://stackoverflow.com/q/69717216/2886891:&lt;br&gt;\r\nNO, because we use ReplicaSet and not StatefulSet\r\n\r\n## Requirements (summary)\r\n- All the events from one particular topic must be consumed by each running instance of the microservice, i.e. by each pod of one particular deployment.\r\n- Kubernetes uses ReplicaSet, the names of the pods have random a string appended.\r\n- No zombie consumer groups are allowed.\r\n\r\n## Question\r\n- How to solve it, either in Kafka or in Kubernetes or anywhere outside or around or in the middle of it?\r\n","title":"Make all Kubernetes pods listen to the same Kafka topic","body":"<h3>Situation</h3>\n<ul>\n<li>We have multiple Kubernetes pods of each deployment (= microservice)</li>\n<li>Our application is massively Kafka-based</li>\n<li>Normally each microservice consumes each Kafka topic in a single consumer group, which is good as we need that each Kafka events is consumed exactly once</li>\n<li>Kubernetes launches and stops pods whenever it's needed</li>\n</ul>\n<h3>Problem</h3>\n<ul>\n<li>We have one topic, which must be consumed by all the running instances (pods) of a single microservice (to reset some internal status)</li>\n</ul>\n<h2>What we considered and why it doesn't work</h2>\n<ul>\n<li>Consume from the topic always in a new consumer group with a random name:<br>\nNO, because as soon as a pod is killed, the consumer group remains for ever, with the constantly increasing lag. The number of detached consumer group without a listener grows over time.</li>\n<li><a href=\"https://stackoverflow.com/q/69717216/2886891\">Assigning a unique number in env inside each pod in a kubernetes cluster</a>:<br>\nNO, because we use ReplicaSet and not StatefulSet</li>\n</ul>\n<h2>Requirements (summary)</h2>\n<ul>\n<li>All the events from one particular topic must be consumed by each running instance of the microservice, i.e. by each pod of one particular deployment.</li>\n<li>Kubernetes uses ReplicaSet, the names of the pods have random a string appended.</li>\n<li>No zombie consumer groups are allowed.</li>\n</ul>\n<h2>Question</h2>\n<ul>\n<li>How to solve it, either in Kafka or in Kubernetes or anywhere outside or around or in the middle of it?</li>\n</ul>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1468874047,"post_id":38445488,"comment_id":64296363,"body_markdown":"Why is student even generic? What do the generics allow you to do?","body":"Why is student even generic? What do the generics allow you to do?"},{"owner":{"account_id":8843862,"reputation":91,"user_id":6605380,"accept_rate":0,"display_name":"dan"},"score":0,"creation_date":1468874149,"post_id":38445488,"comment_id":64296408,"body_markdown":"the class student is generic beacause it aloows to add the student id as integer or string as the user request.","body":"the class student is generic beacause it aloows to add the student id as integer or string as the user request."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1468874245,"post_id":38445488,"comment_id":64296448,"body_markdown":"In that case, a much simpler solution would be to save it as a string, but have a ```getAsInt``` method that parses the id. (But you&#39;re probably doing this to learn so...)","body":"In that case, a much simpler solution would be to save it as a string, but have a <code>getAsInt</code> method that parses the id. (But you&#39;re probably doing this to learn so...)"},{"owner":{"account_id":8843862,"reputation":91,"user_id":6605380,"accept_rate":0,"display_name":"dan"},"score":0,"creation_date":1468874353,"post_id":38445488,"comment_id":64296503,"body_markdown":"i cant use a generic array wich include both??there isnt such thing in generic?","body":"i cant use a generic array wich include both??there isnt such thing in generic?"},{"owner":{"account_id":4120452,"reputation":105,"user_id":3380971,"display_name":"olexity"},"score":0,"creation_date":1468874382,"post_id":38445488,"comment_id":64296518,"body_markdown":"Okay, so this is terrible by design, if you must make his ID to just be String... you can convert any integer to string, but it looks like in your case only integer is good.... there is such things as just having Student with 2 different constructors, but it is really not necessary in this case","body":"Okay, so this is terrible by design, if you must make his ID to just be String... you can convert any integer to string, but it looks like in your case only integer is good.... there is such things as just having Student with 2 different constructors, but it is really not necessary in this case"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1468874421,"post_id":38445488,"comment_id":64296538,"body_markdown":"Generics and arrays are much harder to make work together than just sticking with generics: `List&lt;Student&lt;T&gt;&gt; list = new ArrayList&lt;&gt;();`.","body":"Generics and arrays are much harder to make work together than just sticking with generics: <code>List&lt;Student&lt;T&gt;&gt; list = new ArrayList&lt;&gt;();</code>."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1468874544,"post_id":38445488,"comment_id":64296609,"body_markdown":"And if you can choose whether the ID is an `Integer` or a `String` in this method, the array elements would have to be of type `Student&lt;?&gt;`, since they could be either type. The type variable is already &quot;set&quot; by the time you choose the kind of ID.","body":"And if you can choose whether the ID is an <code>Integer</code> or a <code>String</code> in this method, the array elements would have to be of type <code>Student&lt;?&gt;</code>, since they could be either type. The type variable is already &quot;set&quot; by the time you choose the kind of ID."},{"owner":{"account_id":1527222,"reputation":2599,"user_id":1425331,"accept_rate":83,"display_name":"Jimmy"},"score":0,"creation_date":1468874821,"post_id":38445488,"comment_id":64296760,"body_markdown":"I could not understand exact question of yours .Arrays need information of its content type during runtime, unlike Collection classes. So generics can be used in list, which will eventually lost during run time ( type erasure) . So unlike list, you can not have that type of information in array. Also look at invariant vs covariant  for additional details","body":"I could not understand exact question of yours .Arrays need information of its content type during runtime, unlike Collection classes. So generics can be used in list, which will eventually lost during run time ( type erasure) . So unlike list, you can not have that type of information in array. Also look at invariant vs covariant  for additional details"},{"owner":{"account_id":31622,"reputation":120351,"user_id":86989,"display_name":"newacct"},"score":0,"creation_date":1468962462,"post_id":38445488,"comment_id":64341142,"body_markdown":"There is no point for `main` to be generic when `T` is not used in the parameter or return types","body":"There is no point for <code>main</code> to be generic when <code>T</code> is not used in the parameter or return types"}],"answers":[{"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1468876697,"post_id":38446075,"comment_id":64297660,"body_markdown":"That floating `s.nextLine()` is necessary.","body":"That floating <code>s.nextLine()</code> is necessary."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1468876734,"post_id":38446075,"comment_id":64297684,"body_markdown":"`public static &lt;T&gt; void main(String[] args) { ... }` compiles and runs fine for me. It isn&#39;t useful, but it is legal. Don&#39;t forget that the JVM only sees the erasure of the method, which is identical to `public static void main(String[] args)`.","body":"<code>public static &lt;T&gt; void main(String[] args) { ... }</code> compiles and runs fine for me. It isn&#39;t useful, but it is legal. Don&#39;t forget that the JVM only sees the erasure of the method, which is identical to <code>public static void main(String[] args)</code>."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1468876849,"post_id":38446075,"comment_id":64297746,"body_markdown":"Also, `String... args` is legal too.","body":"Also, <code>String... args</code> is legal too."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1468877076,"post_id":38446075,"comment_id":64297833,"body_markdown":"Considering the comments above, your answer basically boils down to _According to Oracle, no you cannot have generics arrays._ That&#39;s not very helpful. Please extract the parts of the document that explain that generic arrays are not possible and why.","body":"Considering the comments above, your answer basically boils down to <i>According to Oracle, no you cannot have generics arrays.</i> That&#39;s not very helpful. Please extract the parts of the document that explain that generic arrays are not possible and why."},{"owner":{"account_id":7831665,"reputation":2673,"user_id":5938725,"accept_rate":100,"display_name":"Sean Letendre"},"score":0,"creation_date":1468877874,"post_id":38446075,"comment_id":64298173,"body_markdown":"How is the `s.nextLine();` necessary? Running this (well, a shortened test version) I had to type something for the first _nextLine_, press enter and then type something again for the second _nextLine_ which was then stores as name. Using only `name = s.nextLine();` worked fine.","body":"How is the <code>s.nextLine();</code> necessary? Running this (well, a shortened test version) I had to type something for the first <i>nextLine</i>, press enter and then type something again for the second <i>nextLine</i> which was then stores as name. Using only <code>name = s.nextLine();</code> worked fine."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1468879072,"post_id":38446075,"comment_id":64298664,"body_markdown":"Because the `nextInt` leaves a dangling new line character, assuming they pressed enter after providing input. See [here](http://stackoverflow.com/questions/13102045/skipping-nextline-after-using-next-nextint-or-other-nextfoo-methods?rq=1).","body":"Because the <code>nextInt</code> leaves a dangling new line character, assuming they pressed enter after providing input. See <a href=\"http://stackoverflow.com/questions/13102045/skipping-nextline-after-using-next-nextint-or-other-nextfoo-methods?rq=1\">here</a>."}],"tags":[],"owner":{"account_id":7831665,"reputation":2673,"user_id":5938725,"accept_rate":100,"display_name":"Sean Letendre"},"comment_count":6,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1468878247,"creation_date":1468876377,"answer_id":38446075,"question_id":38445488,"body_markdown":"[According to Oracle](https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#createArrays), no you cannot have generics arrays.\r\n\r\nP.S.:  you forgot to initialize *s*, which I am assuming is a *java.util.Scanner*,\r\n\r\n      Scanner s = new Scanner(System.in);\r\n\r\nAlso don&#39;t do:\r\n          \r\n    System.out.println(&quot;please enter student name :&quot;);\r\n    s.nextLine();\r\n    name=s.nextLine()\r\n\r\nJust do:\r\n\r\n    System.out.println(&quot;please enter student name :&quot;);\r\n    name=s.nextLine()\r\n\r\nOtherwise *s.nextLine()* skips one line.","title":"arrays of generic class in JAVA","body":"<p><a href=\"https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#createArrays\" rel=\"nofollow\">According to Oracle</a>, no you cannot have generics arrays.</p>\n\n<p>P.S.:  you forgot to initialize <em>s</em>, which I am assuming is a <em>java.util.Scanner</em>,</p>\n\n<pre><code>  Scanner s = new Scanner(System.in);\n</code></pre>\n\n<p>Also don't do:</p>\n\n<pre><code>System.out.println(\"please enter student name :\");\ns.nextLine();\nname=s.nextLine()\n</code></pre>\n\n<p>Just do:</p>\n\n<pre><code>System.out.println(\"please enter student name :\");\nname=s.nextLine()\n</code></pre>\n\n<p>Otherwise <em>s.nextLine()</em> skips one line.</p>\n"},{"tags":[],"owner":{"account_id":29044429,"reputation":1,"user_id":22248594,"display_name":"Andy T"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689803315,"creation_date":1689803315,"answer_id":76725405,"question_id":38445488,"body_markdown":"I solved this problem by creating a class wrapper that was just a generic free extension of the generic version:\r\n```\r\n  private class Bag&lt;T&gt; { // My generic class here\r\n     // .. some implementation for Bag of T\r\n  }\r\n\r\n  public class IntegerBag extends Bag&lt;Integer&gt; { // Generic free!\r\n  }\r\n\r\n  public class UseArrayOfBagByCheating {\r\n     private IntegerBag[] = new IntegerBag[10];\r\n     // ... etc\r\n  }\r\n```","title":"arrays of generic class in JAVA","body":"<p>I solved this problem by creating a class wrapper that was just a generic free extension of the generic version:</p>\n<pre><code>  private class Bag&lt;T&gt; { // My generic class here\n     // .. some implementation for Bag of T\n  }\n\n  public class IntegerBag extends Bag&lt;Integer&gt; { // Generic free!\n  }\n\n  public class UseArrayOfBagByCheating {\n     private IntegerBag[] = new IntegerBag[10];\n     // ... etc\n  }\n</code></pre>\n"}],"owner":{"account_id":8843862,"reputation":91,"user_id":6605380,"accept_rate":0,"display_name":"dan"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1689803315,"creation_date":1468873751,"question_id":38445488,"body_markdown":"i am new with generics and i have a problem with creating an arrays of generic class.\r\n\r\nif i have one and i want to create in a seperate main at the same java project  generic array wich answer two diffrent types-string and integer.\r\n\r\ncan i put two difreent types the same array?\r\n\r\nand is it ok to call the main like this:\r\n\r\n    public static &lt;T&gt; void main(String[] args) {\r\n    \r\n        String name;\r\n        int grade;\r\n        int choice;\r\n        int count = 0;\r\n        String number;\r\n    \r\n        System.out.println(&quot;press 1 if you like to save id as integer ,or press 2 to for a string &quot;);\r\n        choice = s.nextInt();\r\n    \r\n        Student&lt;T&gt;[] array = new Student[NUM_OF_STUDENTS];\r\n    \r\n        if (choice == 1) {\r\n    \r\n            System.out.println(&quot;please enter student name :&quot;);\r\n            s.nextLine();\r\n            name = s.nextLine();\r\n    \r\n            while (!name.isEmpty() &amp;&amp; count != NUM_OF_STUDENTS) {\r\n                System.out.println(&quot;please enter student #&quot; + (count + 1) + &quot; grade :&quot;);\r\n                grade = s.nextInt();\r\n                array[count] = new Student(count + 1, name, grade);\r\n                count++;\r\n                ...\r\n\r\n\r\n....","title":"arrays of generic class in JAVA","body":"<p>i am new with generics and i have a problem with creating an arrays of generic class.</p>\n\n<p>if i have one and i want to create in a seperate main at the same java project  generic array wich answer two diffrent types-string and integer.</p>\n\n<p>can i put two difreent types the same array?</p>\n\n<p>and is it ok to call the main like this:</p>\n\n<pre><code>public static &lt;T&gt; void main(String[] args) {\n\n    String name;\n    int grade;\n    int choice;\n    int count = 0;\n    String number;\n\n    System.out.println(\"press 1 if you like to save id as integer ,or press 2 to for a string \");\n    choice = s.nextInt();\n\n    Student&lt;T&gt;[] array = new Student[NUM_OF_STUDENTS];\n\n    if (choice == 1) {\n\n        System.out.println(\"please enter student name :\");\n        s.nextLine();\n        name = s.nextLine();\n\n        while (!name.isEmpty() &amp;&amp; count != NUM_OF_STUDENTS) {\n            System.out.println(\"please enter student #\" + (count + 1) + \" grade :\");\n            grade = s.nextInt();\n            array[count] = new Student(count + 1, name, grade);\n            count++;\n            ...\n</code></pre>\n\n<p>....</p>\n"},{"tags":["java","gradle","quarkus"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1689605673,"post_id":76704302,"comment_id":135233541,"body_markdown":"It&#39;s tough to tell as the Gradle output does not provide any useful information","body":"It&#39;s tough to tell as the Gradle output does not provide any useful information"},{"owner":{"account_id":5251042,"reputation":3,"user_id":4195286,"display_name":"Adrian Aulbach"},"score":0,"creation_date":1690300432,"post_id":76704302,"comment_id":135332766,"body_markdown":"Added the Stacktrace which points at io.quarkus.gradle.tasks.QuarkusGenerateCode.generateCode which indeed was changed for the latest versions, however I don&#39;t understand the change sufficiently to see how it could be related.\n\nAnyways: Upgrading to Quarkus 3.2.2 seems to resolve it for me","body":"Added the Stacktrace which points at io.quarkus.gradle.tasks.QuarkusGenerateCode.generateCode which indeed was changed for the latest versions, however I don&#39;t understand the change sufficiently to see how it could be related.  Anyways: Upgrading to Quarkus 3.2.2 seems to resolve it for me"}],"owner":{"account_id":5251042,"reputation":3,"user_id":4195286,"display_name":"Adrian Aulbach"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689803054,"creation_date":1689595722,"question_id":76704302,"body_markdown":"I&#39;m currently upgrading a Quarkus Project from 2.16 to 3.x (target is 3.2, but I also tried 3.0 to only apply the 3.0 [migration guide](https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0), as well as 3.1 since I started before 3.2 was out)\r\n\r\nDuring the build one of the submodules fails with \r\n```\r\nError: Could not find or load main class Web\r\nCaused by: java.lang.ClassNotFoundException: Web\r\nCould not write standard input to Gradle Worker Daemon 4.\r\njava.io.IOException: The pipe is being closed\r\n        at java.base/java.io.FileOutputStream.writeBytes(Native Method)\r\n        at java.base/java.io.FileOutputStream.write(FileOutputStream.java:354)\r\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)\r\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)\r\n        at org.gradle.process.internal.streams.ExecOutputHandleRunner.forwardContent(ExecOutputHandleRunner.java:68)\r\n        at org.gradle.process.internal.streams.ExecOutputHandleRunner.run(ExecOutputHandleRunner.java:53)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n        at java.base/java.lang.Thread.run(Thread.java:829)\r\n\r\n&gt; Task :product-server-base:quarkusGenerateCode FAILED\r\nFinished at: 11:22:57.724 17.07.2023\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:product-server-base:quarkusGenerateCode&#39;.\r\n&gt; There was a failure while executing work items\r\n   &gt; A failure occurred while executing io.quarkus.gradle.tasks.worker.CodeGenWorker\r\n      &gt; Failed to run Gradle Worker Daemon\r\n         &gt; Process &#39;Gradle Worker Daemon 4&#39; finished with non-zero exit value 1\r\n```\r\n\r\nWhat&#39;s worth to mention is that the main class isn&#39;t supposed to be `Web` as indicated by the error message but `ProductServerMain`, which is annotated with `@QuarkusMain`. Also this submodule isn&#39;t supposed to run on it&#39;s own but acts as a base that modules build on for different flavours.\r\n\r\n\r\nI found some people getting a similar error before, yet the solutions from there didn&#39;t help:\r\n1. [SO: A Gradle based sub-project throws `Could not find or load main class worker.org.gradle.process.internal.worker.GradleWorkerMain` during the build](https://stackoverflow.com/questions/66669349/a-gradle-based-sub-project-throws-could-not-find-or-load-main-class-worker-org)\r\nI stopped the daemons and deleted the .gradle folder as listed as solution there, the error remains the same\r\n1. [SO: Gradle - Could not find or load main class](https://stackoverflow.com/questions/24924932/gradle-could-not-find-or-load-main-class)\r\nI added the configuration to build.gradle pointing to `com.example.ProductServerMain`, although that wasn&#39;t needed before. The error remains (it still seems to look for `Web`)\r\n\r\nI might be missing some behaviour changes or changed defaults of the new Quarkus version, which I had with previous issues I was able to solve.\r\n\r\nEdit:\r\nAdditional output:\r\n`--stacktrace`\r\n```\r\n* Exception is:\r\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:security-suite-server-base:quarkusGenerateCode&#39;.\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:142)\r\n        at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:140)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\r\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\r\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:322)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:309)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:302)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:288)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:462)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:379)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\r\nCaused by: org.gradle.workers.WorkerExecutionException: There was a failure while executing work items\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor.workerExecutionException(DefaultWorkerExecutor.java:274)\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor.await(DefaultWorkerExecutor.java:268)\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor.access$100(DefaultWorkerExecutor.java:60)\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor$DefaultWorkQueue.await(DefaultWorkerExecutor.java:373)\r\n        at io.quarkus.gradle.tasks.QuarkusGenerateCode.generateCode(QuarkusGenerateCode.java:109)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:125)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.doExecute(StandardTaskAction.java:58)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution$3.run(TaskExecution.java:236)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:221)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:204)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:187)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:165)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)\r\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)\r\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)\r\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)\r\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)\r\n        at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)\r\n        at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)\r\n        at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)\r\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\r\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)\r\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.executeDelegateBroadcastingChanges(CaptureStateAfterExecutionStep.java:124)\r\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:80)\r\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:58)\r\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)\r\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:181)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:71)\r\n        at org.gradle.internal.Either$Right.fold(Either.java:175)\r\n        at org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:69)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:47)\r\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:36)\r\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:25)\r\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)\r\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:110)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)\r\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)\r\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\r\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)\r\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)\r\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:102)\r\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)\r\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)\r\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.executeWithNoEmptySources(SkipEmptyWorkStep.java:254)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:91)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:56)\r\n        at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:32)\r\n        at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:21)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\r\n        at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)\r\n        at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)\r\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution$4.withWorkspace(TaskExecution.java:281)\r\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)\r\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)\r\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)\r\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)\r\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)\r\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)\r\n        at org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:139)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\r\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\r\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:322)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:309)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:302)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:288)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:462)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:379)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\r\nCaused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing io.quarkus.gradle.tasks.worker.CodeGenWorker\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$2(DefaultWorkerExecutor.java:214)\r\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runExecution(DefaultConditionalExecutionQueue.java:187)\r\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.access$700(DefaultConditionalExecutionQueue.java:120)\r\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner$1.run(DefaultConditionalExecutionQueue.java:162)\r\n        at org.gradle.internal.Factories$1.create(Factories.java:31)\r\n        at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\r\n        at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\r\n        at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:114)\r\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runBatch(DefaultConditionalExecutionQueue.java:157)\r\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.run(DefaultConditionalExecutionQueue.java:126)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\r\nCaused by: org.gradle.process.internal.worker.WorkerProcessException: Failed to run Gradle Worker Daemon\r\n        at org.gradle.process.internal.worker.WorkerProcessException.runFailed(WorkerProcessException.java:29)\r\n        at org.gradle.process.internal.worker.DefaultMultiRequestWorkerProcessBuilder$1.start(DefaultMultiRequestWorkerProcessBuilder.java:156)\r\n        at org.gradle.workers.internal.WorkerDaemonStarter.startDaemon(WorkerDaemonStarter.java:72)\r\n        at org.gradle.workers.internal.WorkerDaemonClientsManager.reserveNewClient(WorkerDaemonClientsManager.java:106)\r\n        at org.gradle.workers.internal.WorkerDaemonFactory$1.reserveClient(WorkerDaemonFactory.java:54)\r\n        at org.gradle.workers.internal.WorkerDaemonFactory$1.execute(WorkerDaemonFactory.java:42)\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$2(DefaultWorkerExecutor.java:212)\r\n        ... 11 more\r\nCaused by: org.gradle.process.internal.ExecException: Process &#39;Gradle Worker Daemon 3&#39; finished with non-zero exit value 1\r\n        at org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:415)\r\n        at org.gradle.process.internal.worker.DefaultWorkerProcess.onProcessStop(DefaultWorkerProcess.java:145)\r\n        at org.gradle.process.internal.worker.DefaultWorkerProcess.access$000(DefaultWorkerProcess.java:42)\r\n        at org.gradle.process.internal.worker.DefaultWorkerProcess$1.executionFinished(DefaultWorkerProcess.java:98)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n        at org.gradle.internal.event.AbstractBroadcastDispatch.dispatch(AbstractBroadcastDispatch.java:43)\r\n        at org.gradle.internal.event.BroadcastDispatch$SingletonDispatch.dispatch(BroadcastDispatch.java:245)\r\n        at org.gradle.internal.event.BroadcastDispatch$SingletonDispatch.dispatch(BroadcastDispatch.java:157)\r\n        at org.gradle.internal.event.ListenerBroadcast.dispatch(ListenerBroadcast.java:141)\r\n        at org.gradle.internal.event.ListenerBroadcast.dispatch(ListenerBroadcast.java:37)\r\n        at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n        at com.sun.proxy.$Proxy89.executionFinished(Unknown Source)\r\n        at org.gradle.process.internal.DefaultExecHandle.setEndStateInfo(DefaultExecHandle.java:221)\r\n        at org.gradle.process.internal.DefaultExecHandle.finished(DefaultExecHandle.java:355)\r\n        at org.gradle.process.internal.ExecHandleRunner.completed(ExecHandleRunner.java:110)\r\n        at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:84)\r\n        at org.gradle.internal.operations.CurrentBuildOperationPreservingRunnable.run(CurrentBuildOperationPreservingRunnable.java:38)\r\n        ... 2 more\r\n```","title":"Gradle build failure with &quot;Error: Could not find or load main class Web&quot; after Quarkus 3 upgrade","body":"<p>I'm currently upgrading a Quarkus Project from 2.16 to 3.x (target is 3.2, but I also tried 3.0 to only apply the 3.0 <a href=\"https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0\" rel=\"nofollow noreferrer\">migration guide</a>, as well as 3.1 since I started before 3.2 was out)</p>\n<p>During the build one of the submodules fails with</p>\n<pre><code>Error: Could not find or load main class Web\nCaused by: java.lang.ClassNotFoundException: Web\nCould not write standard input to Gradle Worker Daemon 4.\njava.io.IOException: The pipe is being closed\n        at java.base/java.io.FileOutputStream.writeBytes(Native Method)\n        at java.base/java.io.FileOutputStream.write(FileOutputStream.java:354)\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)\n        at org.gradle.process.internal.streams.ExecOutputHandleRunner.forwardContent(ExecOutputHandleRunner.java:68)\n        at org.gradle.process.internal.streams.ExecOutputHandleRunner.run(ExecOutputHandleRunner.java:53)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n        at java.base/java.lang.Thread.run(Thread.java:829)\n\n&gt; Task :product-server-base:quarkusGenerateCode FAILED\nFinished at: 11:22:57.724 17.07.2023\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':product-server-base:quarkusGenerateCode'.\n&gt; There was a failure while executing work items\n   &gt; A failure occurred while executing io.quarkus.gradle.tasks.worker.CodeGenWorker\n      &gt; Failed to run Gradle Worker Daemon\n         &gt; Process 'Gradle Worker Daemon 4' finished with non-zero exit value 1\n</code></pre>\n<p>What's worth to mention is that the main class isn't supposed to be <code>Web</code> as indicated by the error message but <code>ProductServerMain</code>, which is annotated with <code>@QuarkusMain</code>. Also this submodule isn't supposed to run on it's own but acts as a base that modules build on for different flavours.</p>\n<p>I found some people getting a similar error before, yet the solutions from there didn't help:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/66669349/a-gradle-based-sub-project-throws-could-not-find-or-load-main-class-worker-org\">SO: A Gradle based sub-project throws <code>Could not find or load main class worker.org.gradle.process.internal.worker.GradleWorkerMain</code> during the build</a>\nI stopped the daemons and deleted the .gradle folder as listed as solution there, the error remains the same</li>\n<li><a href=\"https://stackoverflow.com/questions/24924932/gradle-could-not-find-or-load-main-class\">SO: Gradle - Could not find or load main class</a>\nI added the configuration to build.gradle pointing to <code>com.example.ProductServerMain</code>, although that wasn't needed before. The error remains (it still seems to look for <code>Web</code>)</li>\n</ol>\n<p>I might be missing some behaviour changes or changed defaults of the new Quarkus version, which I had with previous issues I was able to solve.</p>\n<p>Edit:\nAdditional output:\n<code>--stacktrace</code></p>\n<pre><code>* Exception is:\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':security-suite-server-base:quarkusGenerateCode'.\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:142)\n        at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:140)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:57)\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:322)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:309)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:302)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:288)\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:462)\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:379)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\nCaused by: org.gradle.workers.WorkerExecutionException: There was a failure while executing work items\n        at org.gradle.workers.internal.DefaultWorkerExecutor.workerExecutionException(DefaultWorkerExecutor.java:274)\n        at org.gradle.workers.internal.DefaultWorkerExecutor.await(DefaultWorkerExecutor.java:268)\n        at org.gradle.workers.internal.DefaultWorkerExecutor.access$100(DefaultWorkerExecutor.java:60)\n        at org.gradle.workers.internal.DefaultWorkerExecutor$DefaultWorkQueue.await(DefaultWorkerExecutor.java:373)\n        at io.quarkus.gradle.tasks.QuarkusGenerateCode.generateCode(QuarkusGenerateCode.java:109)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:125)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.doExecute(StandardTaskAction.java:58)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\n        at org.gradle.api.internal.tasks.execution.TaskExecution$3.run(TaskExecution.java:236)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:221)\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:204)\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:187)\n        at org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:165)\n        at org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)\n        at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)\n        at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)\n        at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)\n        at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.executeDelegateBroadcastingChanges(CaptureStateAfterExecutionStep.java:124)\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:80)\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:58)\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)\n        at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:181)\n        at org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:71)\n        at org.gradle.internal.Either$Right.fold(Either.java:175)\n        at org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:69)\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:47)\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:36)\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:25)\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:110)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:102)\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.executeWithNoEmptySources(SkipEmptyWorkStep.java:254)\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:91)\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:56)\n        at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:32)\n        at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:21)\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\n        at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)\n        at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)\n        at org.gradle.api.internal.tasks.execution.TaskExecution$4.withWorkspace(TaskExecution.java:281)\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)\n        at org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:139)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:57)\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:322)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:309)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:302)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:288)\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:462)\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:379)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\nCaused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing io.quarkus.gradle.tasks.worker.CodeGenWorker\n        at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$2(DefaultWorkerExecutor.java:214)\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runExecution(DefaultConditionalExecutionQueue.java:187)\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.access$700(DefaultConditionalExecutionQueue.java:120)\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner$1.run(DefaultConditionalExecutionQueue.java:162)\n        at org.gradle.internal.Factories$1.create(Factories.java:31)\n        at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\n        at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\n        at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:114)\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runBatch(DefaultConditionalExecutionQueue.java:157)\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.run(DefaultConditionalExecutionQueue.java:126)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\nCaused by: org.gradle.process.internal.worker.WorkerProcessException: Failed to run Gradle Worker Daemon\n        at org.gradle.process.internal.worker.WorkerProcessException.runFailed(WorkerProcessException.java:29)\n        at org.gradle.process.internal.worker.DefaultMultiRequestWorkerProcessBuilder$1.start(DefaultMultiRequestWorkerProcessBuilder.java:156)\n        at org.gradle.workers.internal.WorkerDaemonStarter.startDaemon(WorkerDaemonStarter.java:72)\n        at org.gradle.workers.internal.WorkerDaemonClientsManager.reserveNewClient(WorkerDaemonClientsManager.java:106)\n        at org.gradle.workers.internal.WorkerDaemonFactory$1.reserveClient(WorkerDaemonFactory.java:54)\n        at org.gradle.workers.internal.WorkerDaemonFactory$1.execute(WorkerDaemonFactory.java:42)\n        at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$2(DefaultWorkerExecutor.java:212)\n        ... 11 more\nCaused by: org.gradle.process.internal.ExecException: Process 'Gradle Worker Daemon 3' finished with non-zero exit value 1\n        at org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:415)\n        at org.gradle.process.internal.worker.DefaultWorkerProcess.onProcessStop(DefaultWorkerProcess.java:145)\n        at org.gradle.process.internal.worker.DefaultWorkerProcess.access$000(DefaultWorkerProcess.java:42)\n        at org.gradle.process.internal.worker.DefaultWorkerProcess$1.executionFinished(DefaultWorkerProcess.java:98)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n        at org.gradle.internal.event.AbstractBroadcastDispatch.dispatch(AbstractBroadcastDispatch.java:43)\n        at org.gradle.internal.event.BroadcastDispatch$SingletonDispatch.dispatch(BroadcastDispatch.java:245)\n        at org.gradle.internal.event.BroadcastDispatch$SingletonDispatch.dispatch(BroadcastDispatch.java:157)\n        at org.gradle.internal.event.ListenerBroadcast.dispatch(ListenerBroadcast.java:141)\n        at org.gradle.internal.event.ListenerBroadcast.dispatch(ListenerBroadcast.java:37)\n        at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n        at com.sun.proxy.$Proxy89.executionFinished(Unknown Source)\n        at org.gradle.process.internal.DefaultExecHandle.setEndStateInfo(DefaultExecHandle.java:221)\n        at org.gradle.process.internal.DefaultExecHandle.finished(DefaultExecHandle.java:355)\n        at org.gradle.process.internal.ExecHandleRunner.completed(ExecHandleRunner.java:110)\n        at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:84)\n        at org.gradle.internal.operations.CurrentBuildOperationPreservingRunnable.run(CurrentBuildOperationPreservingRunnable.java:38)\n        ... 2 more\n</code></pre>\n"},{"tags":["java","multithreading","synchronized","monitor","illegalmonitorstateexcep"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689796649,"post_id":76724780,"comment_id":135266099,"body_markdown":"`synchronized` goes with `Object#wait(...)`, `Object#notify()`, and `Object#notifyAll()`. Whereas `Lock` goes with `Condition`. The two systems aren&#39;t &quot;mixable&quot; (i.e., you can&#39;t do `synchronized (someJavaUtilLockObj)` and then expect `someConditionObj.await()` to work).","body":"<code>synchronized</code> goes with <code>Object#wait(...)</code>, <code>Object#notify()</code>, and <code>Object#notifyAll()</code>. Whereas <code>Lock</code> goes with <code>Condition</code>. The two systems aren&#39;t &quot;mixable&quot; (i.e., you can&#39;t do <code>synchronized (someJavaUtilLockObj)</code> and then expect <code>someConditionObj.await()</code> to work)."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1689796843,"post_id":76724780,"comment_id":135266130,"body_markdown":"You never should never use `synchronized` on a `Lock`.","body":"You never should never use <code>synchronized</code> on a <code>Lock</code>."},{"owner":{"account_id":9109172,"reputation":3,"user_id":6778531,"display_name":"gaurav"},"score":0,"creation_date":1689797448,"post_id":76724780,"comment_id":135266225,"body_markdown":"Understood, thanks!","body":"Understood, thanks!"},{"owner":{"account_id":20470,"reputation":21695,"user_id":48933,"accept_rate":90,"display_name":"Neil Coffey"},"score":0,"creation_date":1689801033,"post_id":76724780,"comment_id":135266801,"body_markdown":"Please clarify your example: it includes commented out synchronised statements on your explicit lock references, yet you say you replaced one with the other?","body":"Please clarify your example: it includes commented out synchronised statements on your explicit lock references, yet you say you replaced one with the other?"},{"owner":{"account_id":9109172,"reputation":3,"user_id":6778531,"display_name":"gaurav"},"score":0,"creation_date":1689802036,"post_id":76724780,"comment_id":135266955,"body_markdown":"I have added - and + signs in statements to make it diff like instead of commenting out the replaced code. Hope this clarifies the example.","body":"I have added - and + signs in statements to make it diff like instead of commenting out the replaced code. Hope this clarifies the example."}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689802648,"creation_date":1689802022,"answer_id":76725302,"question_id":76724780,"body_markdown":"# The Two Locking Mechanisms\r\n\r\nAs a general rule, if you&#39;re using `java.util.concurrent.locks`, then do not use `synchronized` in the same context. The same is true in reverse. The two are separate mechanisms and are not designed to interact with each other.\r\n\r\n## synchronized\r\n\r\nAll objects in Java have an implicit &quot;monitor&quot;. When you `synchronize` on an object, you acquire that monitor. While you hold the monitor, you can call the following methods on the corresponding object instance:\r\n\r\n* `Object#wait()`, `Object#wait(long)`, `Object#wait(long,int)`\r\n* `Object#notify()`\r\n* `Object#notifyAll()`\r\n\r\nTrying to call these methods on an object instance without holding that object&#39;s monitor will result in an `IllegalMonitorStateException` being thrown.\r\n\r\n## java.util.concurrent.locks\r\n\r\nUnlike `synchronized`, this API is not built into the language. It does not care or know about the implicit monitor. Instead, a `Lock` maintains its own state regarding which thread owns it, and which threads are waiting to acquire it. To acquire and release a `Lock`, you must go through the methods defined by the `Lock` interface; you cannot use `synchronized`.\r\n\r\nOne of the things the `java.util.concurrent.locks` API did was extract the concept of a &quot;condition&quot; out into its own object. This makes `Lock` a &quot;factory&quot; for `Condition` objects, and a `Condition` remains associated with its source `Lock`. Thus, a `Condition` knows whether a thread calling one of its methods owns the corresponding `Lock` or not. And similar to `Lock`, waiting and signaling must be done via the methods of `Condition`; you must not use the methods defined by the `Object` class.\r\n\r\nTrying to call methods on a `Condition` (or trying to unlock a `Lock`) without owning the `Lock` (via a call to e.g., `Lock#lock()`) will result in an `IllegalThreadStateException` being thrown.\r\n\r\nNote this API also provides `ReadWriteLock` and `StampedLock`, as well as the building blocks needed to write your own lock implementations.\r\n\r\n# Your Code\r\n\r\nYou essentially have the following:\r\n\r\n```java\r\nimport java.util.concurrent.locks.Condition;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\npublic class Foo {\r\n\r\n    private final Lock lock = new ReentrantLock();\r\n    private final Condition condition = lock.newCondition();\r\n\r\n    public void bar() throws InterruptedException {\r\n        synchronized (lock) {\r\n            condition.await();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is mixing the two locking mechanisms together, which will not work properly. You `synchronized` on the `lock`, thus acquiring the object&#39;s implicit monitor. But then you call `await()` on the `Condition` object. You may own the _monitor_, but from the point-of-view of the `Lock` and `Condition`, you do not own the _lock_. Hence an `IllegalThreadStateException` being thrown.\r\n\r\nYou should use _either_ `synchronized` _or_ `java.util.concurrent.locks`. The following is two versions of a &quot;barrier&quot; that waits for a certain number of threads to be waiting before letting them all continue on. One version uses `synchronized`, the other version uses `java.util.concurrent.locks`.\r\n\r\n### `synchronized` version\r\n\r\n```java\r\npublic class SynchronizedBarrier implements Barrier {\r\n\r\n    private final Object lock = new Object();\r\n    private final int threshold;\r\n    private int count;\r\n\r\n    private boolean thresholdReached;\r\n\r\n    public SynchronizedBarrier(int threshold) {\r\n        if (threshold &lt;= 0) throw new IllegalArgumentException(&quot;threshold &lt;= 0&quot;);\r\n        this.threshold = threshold;\r\n    }\r\n\r\n    @Override\r\n    public void await() throws InterruptedException {\r\n        synchronized (lock) {\r\n            if (thresholdReached) throw new IllegalStateException(&quot;threshold already reached&quot;);\r\n\r\n            count++;\r\n            if (count == threshold) {\r\n                thresholdReached = true;\r\n                lock.notifyAll();\r\n            } else {\r\n                while (!thresholdReached) {\r\n                    try {\r\n                        lock.wait();\r\n                    } catch (InterruptedException ex) {\r\n                        count--;\r\n                        throw ex;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### `java.util.concurrent.locks` version\r\n\r\n```java\r\nimport java.util.concurrent.locks.Condition;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\npublic class LocksBarrier implements Barrier {\r\n\r\n    private final Lock lock = new ReentrantLock();\r\n    private final Condition isThresholdReached = lock.newCondition();\r\n    private final int threshold;\r\n    private int count;\r\n\r\n    private boolean thresholdReached;\r\n\r\n    public LocksBarrier(int threshold) {\r\n        if (threshold &lt;= 0) throw new IllegalArgumentException(&quot;threshold &lt;= 0&quot;);\r\n        this.threshold = threshold;\r\n    }\r\n\r\n    @Override\r\n    public void await() throws InterruptedException {\r\n        lock.lockInterruptibly();\r\n        try {\r\n            if (thresholdReached) throw new IllegalStateException(&quot;threshold already reached&quot;);\r\n\r\n            count++;\r\n            if (count == threshold) {\r\n                thresholdReached = true;\r\n                isThresholdReached.signalAll();\r\n            } else {\r\n                while (!thresholdReached) {\r\n                    try {\r\n                        isThresholdReached.await();\r\n                    } catch (InterruptedException ex) {\r\n                        count--;\r\n                        throw ex;\r\n                    }\r\n                }\r\n            }\r\n        } finally {\r\n            lock.unlock();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBoth versions are single-use. If the threshold is reached, then no more threads can call `await()` without an exception being thrown. I also implemented it so that a waiting thread that&#39;s interrupted is subtracted from the number of waiting threads. That choice was arbitrary. You could leave `count` unmodified. Or maybe you could have all other non-interrupted threads throw a `BrokenBarrierException` (similar to how [`CyclicBarrier`][1] does it).\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/CyclicBarrier.html","title":"Locking with synchronized block vs Explicit Locking","body":"<h1>The Two Locking Mechanisms</h1>\n<p>As a general rule, if you're using <code>java.util.concurrent.locks</code>, then do not use <code>synchronized</code> in the same context. The same is true in reverse. The two are separate mechanisms and are not designed to interact with each other.</p>\n<h2>synchronized</h2>\n<p>All objects in Java have an implicit &quot;monitor&quot;. When you <code>synchronize</code> on an object, you acquire that monitor. While you hold the monitor, you can call the following methods on the corresponding object instance:</p>\n<ul>\n<li><code>Object#wait()</code>, <code>Object#wait(long)</code>, <code>Object#wait(long,int)</code></li>\n<li><code>Object#notify()</code></li>\n<li><code>Object#notifyAll()</code></li>\n</ul>\n<p>Trying to call these methods on an object instance without holding that object's monitor will result in an <code>IllegalMonitorStateException</code> being thrown.</p>\n<h2>java.util.concurrent.locks</h2>\n<p>Unlike <code>synchronized</code>, this API is not built into the language. It does not care or know about the implicit monitor. Instead, a <code>Lock</code> maintains its own state regarding which thread owns it, and which threads are waiting to acquire it. To acquire and release a <code>Lock</code>, you must go through the methods defined by the <code>Lock</code> interface; you cannot use <code>synchronized</code>.</p>\n<p>One of the things the <code>java.util.concurrent.locks</code> API did was extract the concept of a &quot;condition&quot; out into its own object. This makes <code>Lock</code> a &quot;factory&quot; for <code>Condition</code> objects, and a <code>Condition</code> remains associated with its source <code>Lock</code>. Thus, a <code>Condition</code> knows whether a thread calling one of its methods owns the corresponding <code>Lock</code> or not. And similar to <code>Lock</code>, waiting and signaling must be done via the methods of <code>Condition</code>; you must not use the methods defined by the <code>Object</code> class.</p>\n<p>Trying to call methods on a <code>Condition</code> (or trying to unlock a <code>Lock</code>) without owning the <code>Lock</code> (via a call to e.g., <code>Lock#lock()</code>) will result in an <code>IllegalThreadStateException</code> being thrown.</p>\n<p>Note this API also provides <code>ReadWriteLock</code> and <code>StampedLock</code>, as well as the building blocks needed to write your own lock implementations.</p>\n<h1>Your Code</h1>\n<p>You essentially have the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.locks.Condition;\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class Foo {\n\n    private final Lock lock = new ReentrantLock();\n    private final Condition condition = lock.newCondition();\n\n    public void bar() throws InterruptedException {\n        synchronized (lock) {\n            condition.await();\n        }\n    }\n}\n</code></pre>\n<p>This is mixing the two locking mechanisms together, which will not work properly. You <code>synchronized</code> on the <code>lock</code>, thus acquiring the object's implicit monitor. But then you call <code>await()</code> on the <code>Condition</code> object. You may own the <em>monitor</em>, but from the point-of-view of the <code>Lock</code> and <code>Condition</code>, you do not own the <em>lock</em>. Hence an <code>IllegalThreadStateException</code> being thrown.</p>\n<p>You should use <em>either</em> <code>synchronized</code> <em>or</em> <code>java.util.concurrent.locks</code>. The following is two versions of a &quot;barrier&quot; that waits for a certain number of threads to be waiting before letting them all continue on. One version uses <code>synchronized</code>, the other version uses <code>java.util.concurrent.locks</code>.</p>\n<h3><code>synchronized</code> version</h3>\n<pre class=\"lang-java prettyprint-override\"><code>public class SynchronizedBarrier implements Barrier {\n\n    private final Object lock = new Object();\n    private final int threshold;\n    private int count;\n\n    private boolean thresholdReached;\n\n    public SynchronizedBarrier(int threshold) {\n        if (threshold &lt;= 0) throw new IllegalArgumentException(&quot;threshold &lt;= 0&quot;);\n        this.threshold = threshold;\n    }\n\n    @Override\n    public void await() throws InterruptedException {\n        synchronized (lock) {\n            if (thresholdReached) throw new IllegalStateException(&quot;threshold already reached&quot;);\n\n            count++;\n            if (count == threshold) {\n                thresholdReached = true;\n                lock.notifyAll();\n            } else {\n                while (!thresholdReached) {\n                    try {\n                        lock.wait();\n                    } catch (InterruptedException ex) {\n                        count--;\n                        throw ex;\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<h3><code>java.util.concurrent.locks</code> version</h3>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.locks.Condition;\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class LocksBarrier implements Barrier {\n\n    private final Lock lock = new ReentrantLock();\n    private final Condition isThresholdReached = lock.newCondition();\n    private final int threshold;\n    private int count;\n\n    private boolean thresholdReached;\n\n    public LocksBarrier(int threshold) {\n        if (threshold &lt;= 0) throw new IllegalArgumentException(&quot;threshold &lt;= 0&quot;);\n        this.threshold = threshold;\n    }\n\n    @Override\n    public void await() throws InterruptedException {\n        lock.lockInterruptibly();\n        try {\n            if (thresholdReached) throw new IllegalStateException(&quot;threshold already reached&quot;);\n\n            count++;\n            if (count == threshold) {\n                thresholdReached = true;\n                isThresholdReached.signalAll();\n            } else {\n                while (!thresholdReached) {\n                    try {\n                        isThresholdReached.await();\n                    } catch (InterruptedException ex) {\n                        count--;\n                        throw ex;\n                    }\n                }\n            }\n        } finally {\n            lock.unlock();\n        }\n    }\n}\n</code></pre>\n<p>Both versions are single-use. If the threshold is reached, then no more threads can call <code>await()</code> without an exception being thrown. I also implemented it so that a waiting thread that's interrupted is subtracted from the number of waiting threads. That choice was arbitrary. You could leave <code>count</code> unmodified. Or maybe you could have all other non-interrupted threads throw a <code>BrokenBarrierException</code> (similar to how <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/CyclicBarrier.html\" rel=\"nofollow noreferrer\"><code>CyclicBarrier</code></a> does it).</p>\n"}],"owner":{"account_id":9109172,"reputation":3,"user_id":6778531,"display_name":"gaurav"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76725302,"answer_count":1,"score":0,"last_activity_date":1689802648,"creation_date":1689796418,"question_id":76724780,"body_markdown":"I implemented a barrier in java using `synchronized` block and got `IllegalMonitorStateException`. On replacing that `synchronized` block with explicit locking with `lock.lock()` and `lock.unlock()` in `await` method, the code works as expected.\r\n\r\nI could not figure out what exactly is happening different between the cases. Can someone help me with understanding this?\r\n\r\n```\r\npackage org.example;\r\n\r\nimport java.util.concurrent.locks.Condition;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\npublic class Barrier {\r\n    private int count;\r\n    private int threshold;\r\n    private final Lock lock;\r\n    int toBeReleased;\r\n    Condition incrementCondition;\r\n    Condition releaseCondition;\r\n    public Barrier(int threshold) {\r\n        this.count = 0;\r\n        this.toBeReleased = 0;\r\n        this.threshold = threshold;\r\n        this.lock = new ReentrantLock();\r\n        this.incrementCondition = lock.newCondition();\r\n        this.releaseCondition = lock.newCondition();\r\n    }\r\n    public void await () throws InterruptedException {\r\n-        synchronized(lock) {\r\n+           lock.lock();\r\n            while (count == threshold) {\r\n                incrementCondition.await();\r\n            }\r\n            ++count;\r\n            if (count == threshold) {\r\n                toBeReleased = threshold;\r\n                releaseCondition.signalAll();\r\n            } else {\r\n                // Note the usage of await/signal and not wait/notify\r\n                releaseCondition.await();\r\n            }\r\n            toBeReleased--;\r\n            if (toBeReleased == 0) {\r\n                count = 0;\r\n                incrementCondition.signalAll();\r\n            }\r\n+           lock.unlock();\r\n-        }\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        final Barrier barrier = new Barrier(3);\r\n\r\n        Thread p1 = new Thread(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;Thread 1&quot;);\r\n                    barrier.await();\r\n                    System.out.println(&quot;Thread 1&quot;);\r\n                    barrier.await();\r\n                    System.out.println(&quot;Thread 1&quot;);\r\n                    barrier.await();\r\n                } catch (InterruptedException ignored) {}\r\n            }\r\n        });\r\n\r\n        Thread p2 = new Thread(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    Thread.sleep(500);\r\n                    System.out.println(&quot;Thread 2&quot;);\r\n                    barrier.await();\r\n                    Thread.sleep(500);\r\n                    System.out.println(&quot;Thread 2&quot;);\r\n                    barrier.await();\r\n                    Thread.sleep(500);\r\n                    System.out.println(&quot;Thread 2&quot;);\r\n                    barrier.await();\r\n                } catch (InterruptedException ignored) {}\r\n            }\r\n        });\r\n\r\n        Thread p3 = new Thread(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    Thread.sleep(1500);\r\n                    System.out.println(&quot;Thread 3&quot;);\r\n                    barrier.await();\r\n                    Thread.sleep(1500);\r\n                    System.out.println(&quot;Thread 3&quot;);\r\n                    barrier.await();\r\n                    Thread.sleep(1500);\r\n                    System.out.println(&quot;Thread 3&quot;);\r\n                    barrier.await();\r\n                } catch (InterruptedException ie) {}\r\n            }\r\n        });\r\n\r\n        p1.start();\r\n        p2.start();\r\n        p3.start();\r\n\r\n        p1.join();\r\n        p2.join();\r\n        p3.join();\r\n    }\r\n}\r\n```\r\n","title":"Locking with synchronized block vs Explicit Locking","body":"<p>I implemented a barrier in java using <code>synchronized</code> block and got <code>IllegalMonitorStateException</code>. On replacing that <code>synchronized</code> block with explicit locking with <code>lock.lock()</code> and <code>lock.unlock()</code> in <code>await</code> method, the code works as expected.</p>\n<p>I could not figure out what exactly is happening different between the cases. Can someone help me with understanding this?</p>\n<pre><code>package org.example;\n\nimport java.util.concurrent.locks.Condition;\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class Barrier {\n    private int count;\n    private int threshold;\n    private final Lock lock;\n    int toBeReleased;\n    Condition incrementCondition;\n    Condition releaseCondition;\n    public Barrier(int threshold) {\n        this.count = 0;\n        this.toBeReleased = 0;\n        this.threshold = threshold;\n        this.lock = new ReentrantLock();\n        this.incrementCondition = lock.newCondition();\n        this.releaseCondition = lock.newCondition();\n    }\n    public void await () throws InterruptedException {\n-        synchronized(lock) {\n+           lock.lock();\n            while (count == threshold) {\n                incrementCondition.await();\n            }\n            ++count;\n            if (count == threshold) {\n                toBeReleased = threshold;\n                releaseCondition.signalAll();\n            } else {\n                // Note the usage of await/signal and not wait/notify\n                releaseCondition.await();\n            }\n            toBeReleased--;\n            if (toBeReleased == 0) {\n                count = 0;\n                incrementCondition.signalAll();\n            }\n+           lock.unlock();\n-        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        final Barrier barrier = new Barrier(3);\n\n        Thread p1 = new Thread(new Runnable() {\n            public void run() {\n                try {\n                    System.out.println(&quot;Thread 1&quot;);\n                    barrier.await();\n                    System.out.println(&quot;Thread 1&quot;);\n                    barrier.await();\n                    System.out.println(&quot;Thread 1&quot;);\n                    barrier.await();\n                } catch (InterruptedException ignored) {}\n            }\n        });\n\n        Thread p2 = new Thread(new Runnable() {\n            public void run() {\n                try {\n                    Thread.sleep(500);\n                    System.out.println(&quot;Thread 2&quot;);\n                    barrier.await();\n                    Thread.sleep(500);\n                    System.out.println(&quot;Thread 2&quot;);\n                    barrier.await();\n                    Thread.sleep(500);\n                    System.out.println(&quot;Thread 2&quot;);\n                    barrier.await();\n                } catch (InterruptedException ignored) {}\n            }\n        });\n\n        Thread p3 = new Thread(new Runnable() {\n            public void run() {\n                try {\n                    Thread.sleep(1500);\n                    System.out.println(&quot;Thread 3&quot;);\n                    barrier.await();\n                    Thread.sleep(1500);\n                    System.out.println(&quot;Thread 3&quot;);\n                    barrier.await();\n                    Thread.sleep(1500);\n                    System.out.println(&quot;Thread 3&quot;);\n                    barrier.await();\n                } catch (InterruptedException ie) {}\n            }\n        });\n\n        p1.start();\n        p2.start();\n        p3.start();\n\n        p1.join();\n        p2.join();\n        p3.join();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689840842,"post_id":76725307,"comment_id":135271165,"body_markdown":"using jwts as sessions is a security risk, thats why there is no implementation of it in spring security. Also several things are deprecated in this code. This entire implementation is bad practice. Please instead read and follow the spring security documentation on how to implement proper authentication, using either cookies or oauth2. Whatever blog post you have followed has clearly no idea how security works.","body":"using jwts as sessions is a security risk, thats why there is no implementation of it in spring security. Also several things are deprecated in this code. This entire implementation is bad practice. Please instead read and follow the spring security documentation on how to implement proper authentication, using either cookies or oauth2. Whatever blog post you have followed has clearly no idea how security works."},{"owner":{"account_id":25431205,"reputation":1,"user_id":19235571,"display_name":"deven parekh"},"score":0,"creation_date":1689867992,"post_id":76725307,"comment_id":135277383,"body_markdown":"@Toerktumlare thanks for letting me know. Ofcourse i am trying the spring security for the first time which is why i have hit the roadblock. Can you guide me in a proper direction to implement authorization and authentication in my application? Again, Thanks a lot for the help!","body":"@Toerktumlare thanks for letting me know. Ofcourse i am trying the spring security for the first time which is why i have hit the roadblock. Can you guide me in a proper direction to implement authorization and authentication in my application? Again, Thanks a lot for the help!"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689887237,"post_id":76725307,"comment_id":135280912,"body_markdown":"Stack overflow is a Q&amp;A site, if you are a beginner i suggest you start out with the officiell documentation. We cant teach you spring security basics, thats what the docs are for. You have to do the work, if you have questions about the docs that is not clear feel free to ask here on SO","body":"Stack overflow is a Q&amp;A site, if you are a beginner i suggest you start out with the officiell documentation. We cant teach you spring security basics, thats what the docs are for. You have to do the work, if you have questions about the docs that is not clear feel free to ask here on SO"}],"owner":{"account_id":25431205,"reputation":1,"user_id":19235571,"display_name":"deven parekh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689802128,"creation_date":1689802128,"question_id":76725307,"body_markdown":"the token seems to be generating fine as i check it with jwt.io and it seems good to go. But when i try to access any endpoint after authorization, it says 403 forbidden in postman and when i check the console, it says malformed token exception. I tried everything but it doesn&#39;t seem to go away. I want to do a role based authorization so i try to add the Role tag in claims to retrieve from the token and authorize. but it is not working.\r\n\r\nAny help is greatly appreciated. Below is the codebase for the reference.\r\n[![console output.\r\n```\r\npackage com.employeedirectory.Employee.Service;\r\n\r\nimport com.employeedirectory.UserDetails.UserDetailsEntity.UserInfo;\r\nimport com.employeedirectory.UserDetails.UserDetailsRepository.UserInfoRepository;\r\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetails;\r\nimport io.jsonwebtoken.*;\r\nimport io.jsonwebtoken.impl.TextCodec;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.stereotype.Component;\r\nimport java.util.*;\r\nimport java.util.function.Function;\r\n\r\n@Component\r\npublic class JwtService {\r\n    private String secret;\r\n    private int jwtExpirationInMs;\r\n\r\n    @Autowired\r\n    UserInfoRepository userInfoRepository;\r\n\r\n    @Value(&quot;${jwt.secret}&quot;)\r\n    public void setSecret(String secret){\r\n        this.secret = secret;\r\n    }\r\n\r\n    @Value(&quot;${jwt.jwtExpirationInMs}&quot;)\r\n    public void setJwtExpirationInMs(int jwtExpirationInMs){\r\n        this.jwtExpirationInMs=jwtExpirationInMs;\r\n    }\r\n\r\n    public String extractUsername(String token) {\r\n        return extractClaim(token, Claims::getSubject);\r\n    }\r\n\r\n    public Date extractExpiration(String token) {\r\n        return extractClaim(token, Claims::getExpiration);\r\n    }\r\n\r\n    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n        final Claims claims = extractAllClaims(token);\r\n        return claimsResolver.apply(claims);\r\n    }\r\n\r\n    private Claims extractAllClaims(String token) {\r\n        return Jwts.parser()\r\n                .setSigningKey(secret)\r\n                .parseClaimsJws(token)\r\n                .getBody();\r\n    }\r\n\r\n    private Boolean isTokenExpired(String token) {\r\n        return extractExpiration(token).before(new Date());\r\n    }\r\n\r\n    public Boolean validateToken(String token, UserDetails userDetails) {\r\n            final String username = extractUsername(token);\r\n            return (username.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));\r\n    }\r\n\r\n\r\n    public String generateToken(UserDetails userDetails) {\r\n\r\n        Optional&lt;UserInfo&gt; userInfo = userInfoRepository.findByName(userDetails.getUsername());\r\n        String userEmail = userInfo.get().getEmail();\r\n        Map&lt;String,Object&gt; claims=new HashMap&lt;&gt;();\r\n        Collection&lt;? extends GrantedAuthority&gt; roles = userDetails.getAuthorities();\r\n            claims.put(&quot;Email&quot;,userEmail);\r\n            if (roles.contains(new SimpleGrantedAuthority(&quot;ADMIN&quot;)) || roles.contains(new SimpleGrantedAuthority(&quot;admin&quot;))){\r\n                claims.put(&quot;Role&quot;,&quot;ADMIN&quot;);\r\n            }\r\n            if (roles.contains(new SimpleGrantedAuthority(&quot;USER&quot;)) || roles.contains(new SimpleGrantedAuthority(&quot;user&quot;))){\r\n                claims.put(&quot;Role&quot;,&quot;USER&quot;);\r\n            }\r\n        return createToken(claims,userDetails.getUsername());\r\n    }\r\n\r\n    private String createToken(Map&lt;String, Object&gt; claims, String userName){\r\n        return Jwts.builder()\r\n                    .setClaims(claims)\r\n                    .setSubject(userName)\r\n                    .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                    .setExpiration(new Date(System.currentTimeMillis()+jwtExpirationInMs))\r\n                    .signWith(SignatureAlgorithm.HS256, TextCodec.BASE64.decode(secret)).compact();\r\n    }\r\n}\r\n```\r\n](https://i.stack.imgur.com/uqucJ.png)](https://i.stack.imgur.com/uqucJ.png)\r\n\r\n\r\n```\r\npackage com.employeedirectory.Employee.Filter;\r\n\r\nimport com.employeedirectory.Employee.Service.JwtService;\r\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetailsService;\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\nimport io.jsonwebtoken.Claims;\r\nimport io.jsonwebtoken.Jwts;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\nimport java.io.IOException;\r\n\r\n@Component\r\npublic class JwtAuthFilter extends OncePerRequestFilter {\r\n\r\n    private String secret;\r\n\r\n    @Value(&quot;${jwt.secret}&quot;)\r\n    public void setSecret(String secret){\r\n        this.secret = secret;\r\n    }\r\n\r\n    @Autowired\r\n    private JwtService jwtService;\r\n\r\n    @Autowired\r\n    private UserInfoUserDetailsService userDetailsService;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        String authHeader = request.getHeader(&quot;Authorization&quot;);\r\n        String token = null;\r\n        String username = null;\r\n        String role = null;\r\n\r\n        if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {\r\n            System.out.println(&quot;Inside doFilterInternal method.&quot;);\r\n            token = authHeader.substring(7);\r\n            username = jwtService.extractUsername(token);\r\n            Claims claims = Jwts.parser().setSigningKey(secret).parseClaimsJws(token).getBody();\r\n            role = claims.get(&quot;Role&quot;).toString();\r\n        }\r\n\r\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\r\n            if (jwtService.validateToken(token, userDetails)) {\r\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\r\n                authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                SecurityContextHolder.getContext().setAuthentication(authToken);\r\n            }\r\n            request.setAttribute(&quot;Role&quot;,role);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\npackage com.employeedirectory.Employee.Config;\r\n\r\nimport com.employeedirectory.Employee.Filter.JwtAuthFilter;\r\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetailsService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.AuthenticationProvider;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    private UserInfoUserDetailsService userInfoUserDetailsService;\r\n\r\n    @Autowired\r\n    JwtAuthFilter jwtAuthFilter;\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService(){\r\n        return new UserInfoUserDetailsService();\r\n    }\r\n\r\n    @Override\r\n    public void configure(HttpSecurity http) throws Exception {\r\n//        http.csrf().disable()\r\n//                .authorizeRequests().antMatchers(&quot;/&quot;,&quot;/newUser&quot;,&quot;/authenticate&quot;).permitAll()\r\n//                .and()\r\n//                .authorizeRequests()\r\n//                .antMatchers(&quot;/api/v1/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;,&quot;admin&quot;,&quot;USER&quot;,&quot;user&quot;).anyRequest().authenticated().\r\n//                and().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\r\n\r\n        http.csrf().disable().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/&quot;,&quot;/authenticate&quot;,&quot;/newUser&quot;).permitAll()\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;api/v1/**&quot;).access(&quot;hasAnyRole(&#39;ADMIN&#39;,&#39;USER&#39;)&quot;)\r\n                .antMatchers(&quot;api/v2/**&quot;).access(&quot;hasRole(&#39;ADMIN&#39;)&quot;)\r\n                .anyRequest().authenticated();\r\n        http.addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\r\n    }\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.authenticationProvider(authenticationProvider());\r\n    }\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider(){\r\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n        authenticationProvider.setUserDetailsService(userDetailsService());\r\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\r\n        return authenticationProvider;\r\n    }\r\n\r\n    @Bean\r\n    @Override\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        return super.authenticationManagerBean();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n```\r\npackage com.employeedirectory.UserDetails.UserDetailsService;\r\n\r\nimport com.employeedirectory.UserDetails.UserDetailsEntity.UserInfo;\r\nimport com.employeedirectory.UserDetails.UserDetailsRepository.UserInfoRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.stereotype.Component;\r\nimport java.util.Optional;\r\n\r\n@Component\r\npublic class UserInfoUserDetailsService implements UserDetailsService {\r\n    @Autowired\r\n    UserInfoRepository repository;\r\n    @Override\r\n    public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {\r\n        Optional&lt;UserInfo&gt; userInfo = repository.findByName(userName);\r\n        return userInfo.map(UserInfoUserDetails::new)\r\n                .orElseThrow(()-&gt; new UsernameNotFoundException(&quot;user not found &quot; + userName));\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\nTried making all kinds of changes to the filter. Did Decoding and Encoding too. I dont want to go with @PreAuthorize annotation for roles as it wont be feasible for too many apis. ","title":"com.fasterxml.jackson.core.JsonParseException: Illegal character (CTRL-CHAR, code 5): only regular white space (\\r, \\n, \\t) is allowed between tokens","body":"<p>the token seems to be generating fine as i check it with jwt.io and it seems good to go. But when i try to access any endpoint after authorization, it says 403 forbidden in postman and when i check the console, it says malformed token exception. I tried everything but it doesn't seem to go away. I want to do a role based authorization so i try to add the Role tag in claims to retrieve from the token and authorize. but it is not working.</p>\n<p>Any help is greatly appreciated. Below is the codebase for the reference.\n[![console output.</p>\n<pre><code>package com.employeedirectory.Employee.Service;\n\nimport com.employeedirectory.UserDetails.UserDetailsEntity.UserInfo;\nimport com.employeedirectory.UserDetails.UserDetailsRepository.UserInfoRepository;\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetails;\nimport io.jsonwebtoken.*;\nimport io.jsonwebtoken.impl.TextCodec;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.stereotype.Component;\nimport java.util.*;\nimport java.util.function.Function;\n\n@Component\npublic class JwtService {\n    private String secret;\n    private int jwtExpirationInMs;\n\n    @Autowired\n    UserInfoRepository userInfoRepository;\n\n    @Value(&quot;${jwt.secret}&quot;)\n    public void setSecret(String secret){\n        this.secret = secret;\n    }\n\n    @Value(&quot;${jwt.jwtExpirationInMs}&quot;)\n    public void setJwtExpirationInMs(int jwtExpirationInMs){\n        this.jwtExpirationInMs=jwtExpirationInMs;\n    }\n\n    public String extractUsername(String token) {\n        return extractClaim(token, Claims::getSubject);\n    }\n\n    public Date extractExpiration(String token) {\n        return extractClaim(token, Claims::getExpiration);\n    }\n\n    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = extractAllClaims(token);\n        return claimsResolver.apply(claims);\n    }\n\n    private Claims extractAllClaims(String token) {\n        return Jwts.parser()\n                .setSigningKey(secret)\n                .parseClaimsJws(token)\n                .getBody();\n    }\n\n    private Boolean isTokenExpired(String token) {\n        return extractExpiration(token).before(new Date());\n    }\n\n    public Boolean validateToken(String token, UserDetails userDetails) {\n            final String username = extractUsername(token);\n            return (username.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));\n    }\n\n\n    public String generateToken(UserDetails userDetails) {\n\n        Optional&lt;UserInfo&gt; userInfo = userInfoRepository.findByName(userDetails.getUsername());\n        String userEmail = userInfo.get().getEmail();\n        Map&lt;String,Object&gt; claims=new HashMap&lt;&gt;();\n        Collection&lt;? extends GrantedAuthority&gt; roles = userDetails.getAuthorities();\n            claims.put(&quot;Email&quot;,userEmail);\n            if (roles.contains(new SimpleGrantedAuthority(&quot;ADMIN&quot;)) || roles.contains(new SimpleGrantedAuthority(&quot;admin&quot;))){\n                claims.put(&quot;Role&quot;,&quot;ADMIN&quot;);\n            }\n            if (roles.contains(new SimpleGrantedAuthority(&quot;USER&quot;)) || roles.contains(new SimpleGrantedAuthority(&quot;user&quot;))){\n                claims.put(&quot;Role&quot;,&quot;USER&quot;);\n            }\n        return createToken(claims,userDetails.getUsername());\n    }\n\n    private String createToken(Map&lt;String, Object&gt; claims, String userName){\n        return Jwts.builder()\n                    .setClaims(claims)\n                    .setSubject(userName)\n                    .setIssuedAt(new Date(System.currentTimeMillis()))\n                    .setExpiration(new Date(System.currentTimeMillis()+jwtExpirationInMs))\n                    .signWith(SignatureAlgorithm.HS256, TextCodec.BASE64.decode(secret)).compact();\n    }\n}\n</code></pre>\n<p>](<a href=\"https://i.stack.imgur.com/uqucJ.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/uqucJ.png</a>)](<a href=\"https://i.stack.imgur.com/uqucJ.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/uqucJ.png</a>)</p>\n<pre><code>package com.employeedirectory.Employee.Filter;\n\nimport com.employeedirectory.Employee.Service.JwtService;\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetailsService;\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Jwts;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\nimport java.io.IOException;\n\n@Component\npublic class JwtAuthFilter extends OncePerRequestFilter {\n\n    private String secret;\n\n    @Value(&quot;${jwt.secret}&quot;)\n    public void setSecret(String secret){\n        this.secret = secret;\n    }\n\n    @Autowired\n    private JwtService jwtService;\n\n    @Autowired\n    private UserInfoUserDetailsService userDetailsService;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        String authHeader = request.getHeader(&quot;Authorization&quot;);\n        String token = null;\n        String username = null;\n        String role = null;\n\n        if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {\n            System.out.println(&quot;Inside doFilterInternal method.&quot;);\n            token = authHeader.substring(7);\n            username = jwtService.extractUsername(token);\n            Claims claims = Jwts.parser().setSigningKey(secret).parseClaimsJws(token).getBody();\n            role = claims.get(&quot;Role&quot;).toString();\n        }\n\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\n            if (jwtService.validateToken(token, userDetails)) {\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n                authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(authToken);\n            }\n            request.setAttribute(&quot;Role&quot;,role);\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<pre><code>package com.employeedirectory.Employee.Config;\n\nimport com.employeedirectory.Employee.Filter.JwtAuthFilter;\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetailsService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private UserInfoUserDetailsService userInfoUserDetailsService;\n\n    @Autowired\n    JwtAuthFilter jwtAuthFilter;\n\n    @Bean\n    public UserDetailsService userDetailsService(){\n        return new UserInfoUserDetailsService();\n    }\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n//        http.csrf().disable()\n//                .authorizeRequests().antMatchers(&quot;/&quot;,&quot;/newUser&quot;,&quot;/authenticate&quot;).permitAll()\n//                .and()\n//                .authorizeRequests()\n//                .antMatchers(&quot;/api/v1/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;,&quot;admin&quot;,&quot;USER&quot;,&quot;user&quot;).anyRequest().authenticated().\n//                and().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\n\n        http.csrf().disable().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        http.authorizeRequests()\n                .antMatchers(&quot;/&quot;,&quot;/authenticate&quot;,&quot;/newUser&quot;).permitAll()\n                .and()\n                .authorizeRequests()\n                .antMatchers(&quot;api/v1/**&quot;).access(&quot;hasAnyRole('ADMIN','USER')&quot;)\n                .antMatchers(&quot;api/v2/**&quot;).access(&quot;hasRole('ADMIN')&quot;)\n                .anyRequest().authenticated();\n        http.addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\n    }\n\n    @Override\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.authenticationProvider(authenticationProvider());\n    }\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider(){\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService());\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\n        return authenticationProvider;\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n}\n\n</code></pre>\n<pre><code>package com.employeedirectory.UserDetails.UserDetailsService;\n\nimport com.employeedirectory.UserDetails.UserDetailsEntity.UserInfo;\nimport com.employeedirectory.UserDetails.UserDetailsRepository.UserInfoRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Component;\nimport java.util.Optional;\n\n@Component\npublic class UserInfoUserDetailsService implements UserDetailsService {\n    @Autowired\n    UserInfoRepository repository;\n    @Override\n    public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {\n        Optional&lt;UserInfo&gt; userInfo = repository.findByName(userName);\n        return userInfo.map(UserInfoUserDetails::new)\n                .orElseThrow(()-&gt; new UsernameNotFoundException(&quot;user not found &quot; + userName));\n    }\n}\n\n\n</code></pre>\n<p>Tried making all kinds of changes to the filter. Did Decoding and Encoding too. I dont want to go with @PreAuthorize annotation for roles as it wont be feasible for too many apis.</p>\n"},{"tags":["java","selenium-webdriver","cucumber"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689775256,"post_id":76722108,"comment_id":135261382,"body_markdown":"I am no expert in Cucumber, but shouldn&#39;t he class be annotated with `@CucumberContextConfiguration` and possibly configure the glue, where then the methods with `@Given(...)`, `@When(...)`, `@Then(...)` reside? See [this `github.com` repository](https://github.com/turing85/spring-file-upload/tree/main/src/test) for an example.","body":"I am no expert in Cucumber, but shouldn&#39;t he class be annotated with <code>@CucumberContextConfiguration</code> and possibly configure the glue, where then the methods with <code>@Given(...)</code>, <code>@When(...)</code>, <code>@Then(...)</code> reside? See <a href=\"https://github.com/turing85/spring-file-upload/tree/main/src/test\" rel=\"nofollow noreferrer\">this <code>github.com</code> repository</a> for an example."}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689801966,"creation_date":1689801966,"answer_id":76725298,"question_id":76722108,"body_markdown":"In the feature file if the line is:\r\n\r\n\tGiven estoy dentro de SEITEM, voy a la secci&#243;n de generar cotizaciones\r\n\t\r\nshould always be implemented as:\r\n\r\n\t@Test\r\n\t@Given(&quot;estoy dentro de SEITEM, voy a la secci&#243;n de generar cotizaciones&quot;)\r\n\tpublic void estoy_dentro_de_seitem_voy_a_la_secci&#243;n_de_generar_cotizaciones() {\r\n\t    driver.navigate().to(&quot;http://seitem.loc/agregarCotizacion.php&quot;);\r\n            assertEquals(&quot;Cotizaciones&quot;, driver.getTitle());\r\n\t}","title":"You can implement this step using the snippet(s) below?","body":"<p>In the feature file if the line is:</p>\n<pre><code>Given estoy dentro de SEITEM, voy a la seccin de generar cotizaciones\n</code></pre>\n<p>should always be implemented as:</p>\n<pre><code>@Test\n@Given(&quot;estoy dentro de SEITEM, voy a la seccin de generar cotizaciones&quot;)\npublic void estoy_dentro_de_seitem_voy_a_la_seccin_de_generar_cotizaciones() {\n    driver.navigate().to(&quot;http://seitem.loc/agregarCotizacion.php&quot;);\n        assertEquals(&quot;Cotizaciones&quot;, driver.getTitle());\n}\n</code></pre>\n"}],"owner":{"account_id":20232304,"reputation":1,"user_id":14838539,"display_name":"Juan Manuel Adarve Cifuentes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689801966,"creation_date":1689775027,"question_id":76722108,"body_markdown":"I have this feature file:\r\n\r\n```CUCUMBER\r\nFeature: Agregar Cotizacion\r\n  Scenario: Una vez dentro de SEITEM y pasar por el login, me dirijo a la secci&#243;n de generar cotizaciones\r\n    Given estoy dentro de SEITEM, voy a la secci&#243;n de generar cotizaciones\r\n```\r\n\r\nand the implementation file like this:\r\n\r\n\r\n```JAVA\r\npackage com.uva3;\r\n\r\npublic class CotizacionStepDefinitionsTest {\r\n    private WebDriver driver;\r\n\r\n    @Before\r\n    public void initialize() {\r\n        driver = new ChromeDriver();\r\n        driver.get(&quot;http://seitem.loc&quot;);\r\n        driver.findElement(By.id(&quot;login&quot;)).sendKeys(&quot;admin&quot;);\r\n        driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;1&quot;);\r\n        driver.findElement(By.cssSelector(&quot;[value=&#39;Ingresar&#39;]&quot;)).click();\r\n    }\r\n\r\n    @Test\r\n    @Given(&quot;estoy dentro de SEITEM, voy a la secci&#243;n de generar cotizaciones&quot;)\r\n    public void irGenerarCotizacionTest() {\r\n        driver.navigate().to(&quot;http://seitem.loc/agregarCotizacion.php&quot;);\r\n        assertEquals(&quot;Cotizaciones&quot;, driver.getTitle());\r\n    }\r\n\r\n    @AfterEach\r\n    public void finalizarProceso() throws InterruptedException {\r\n        Thread.sleep(2000);\r\n        driver.quit();\r\n    }\r\n}\r\n```\r\n\r\nwhen it is running this happens:\r\n \r\n```\r\nStep undefined\r\nYou can implement this step using the snippet(s) below:\r\n\r\n@Given(&quot;estoy dentro de SEITEM, voy a la secci&#243;n de generar cotizaciones&quot;)\r\npublic void estoy_dentro_de_seitem_voy_a_la_secci&#243;n_de_generar_cotizaciones() {\r\n    // Write code here that turns the phrase above into concrete actions\r\n    throw new io.cucumber.java.PendingException();\r\n}\r\n\r\n\r\nUndefined scenarios:\r\nfile:///C:/Users/Juan%20Manuel%20Adarve%20C/IdeaProjects/standardTest/src/test/resources/cotizacion.feature:2 # Una vez dentro de SEITEM y pasar por el login, me dirijo a la secci&#243;n de generar cotizaciones\r\n\r\n1 Scenarios (1 undefined)\r\n1 Steps (1 undefined)\r\n0m8,606s\r\n```\r\n\r\nhow can i do that name of method not equals to **given** value?\r\n\r\n\r\n\r\nI try change the **glue** in @CucumberOptions, but continue problem","title":"You can implement this step using the snippet(s) below?","body":"<p>I have this feature file:</p>\n<pre><code>Feature: Agregar Cotizacion\n  Scenario: Una vez dentro de SEITEM y pasar por el login, me dirijo a la seccin de generar cotizaciones\n    Given estoy dentro de SEITEM, voy a la seccin de generar cotizaciones\n</code></pre>\n<p>and the implementation file like this:</p>\n<pre><code>package com.uva3;\n\npublic class CotizacionStepDefinitionsTest {\n    private WebDriver driver;\n\n    @Before\n    public void initialize() {\n        driver = new ChromeDriver();\n        driver.get(&quot;http://seitem.loc&quot;);\n        driver.findElement(By.id(&quot;login&quot;)).sendKeys(&quot;admin&quot;);\n        driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;1&quot;);\n        driver.findElement(By.cssSelector(&quot;[value='Ingresar']&quot;)).click();\n    }\n\n    @Test\n    @Given(&quot;estoy dentro de SEITEM, voy a la seccin de generar cotizaciones&quot;)\n    public void irGenerarCotizacionTest() {\n        driver.navigate().to(&quot;http://seitem.loc/agregarCotizacion.php&quot;);\n        assertEquals(&quot;Cotizaciones&quot;, driver.getTitle());\n    }\n\n    @AfterEach\n    public void finalizarProceso() throws InterruptedException {\n        Thread.sleep(2000);\n        driver.quit();\n    }\n}\n</code></pre>\n<p>when it is running this happens:</p>\n<pre><code>Step undefined\nYou can implement this step using the snippet(s) below:\n\n@Given(&quot;estoy dentro de SEITEM, voy a la seccin de generar cotizaciones&quot;)\npublic void estoy_dentro_de_seitem_voy_a_la_seccin_de_generar_cotizaciones() {\n    // Write code here that turns the phrase above into concrete actions\n    throw new io.cucumber.java.PendingException();\n}\n\n\nUndefined scenarios:\nfile:///C:/Users/Juan%20Manuel%20Adarve%20C/IdeaProjects/standardTest/src/test/resources/cotizacion.feature:2 # Una vez dentro de SEITEM y pasar por el login, me dirijo a la seccin de generar cotizaciones\n\n1 Scenarios (1 undefined)\n1 Steps (1 undefined)\n0m8,606s\n</code></pre>\n<p>how can i do that name of method not equals to <strong>given</strong> value?</p>\n<p>I try change the <strong>glue</strong> in @CucumberOptions, but continue problem</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1376680277,"post_id":18280442,"comment_id":26816161,"body_markdown":"You want to use recursion and you have a working solution that uses recursion? I don&#39;t see the problem.","body":"You want to use recursion and you have a working solution that uses recursion? I don&#39;t see the problem."},{"owner":{"account_id":2132213,"reputation":11287,"user_id":1892802,"accept_rate":100,"display_name":"ug_"},"score":0,"creation_date":1376680279,"post_id":18280442,"comment_id":26816162,"body_markdown":"Looks about as efficient and clean as a recursive program of that nature should be.","body":"Looks about as efficient and clean as a recursive program of that nature should be."},{"owner":{"account_id":2882201,"reputation":10752,"user_id":2472820,"accept_rate":86,"display_name":"Kon"},"score":2,"creation_date":1376680311,"post_id":18280442,"comment_id":26816181,"body_markdown":"Your method is fine, but another recursive way and the way I would think about it is, since your substrings are single-consecutive pieces of the main string, you&#39;re dealing with two integer variables: a starting position and an ending position. So you&#39;re essentially finding combinations thereof. For example, with the word &quot;Hello&quot; of length 5, you have a Starting/Ending positions of: 1/5, 2/5, 3/5, 4/5, 1/4, 2/4, 3/4, etc","body":"Your method is fine, but another recursive way and the way I would think about it is, since your substrings are single-consecutive pieces of the main string, you&#39;re dealing with two integer variables: a starting position and an ending position. So you&#39;re essentially finding combinations thereof. For example, with the word &quot;Hello&quot; of length 5, you have a Starting/Ending positions of: 1/5, 2/5, 3/5, 4/5, 1/4, 2/4, 3/4, etc"},{"owner":{"account_id":233335,"reputation":7836,"user_id":1267363,"accept_rate":85,"display_name":"davidjhp"},"score":0,"creation_date":1376680340,"post_id":18280442,"comment_id":26816199,"body_markdown":"@Kayaman, yes I have a working solution, just want to see if there is any better way of doing it, Im not a recursion expert.","body":"@Kayaman, yes I have a working solution, just want to see if there is any better way of doing it, Im not a recursion expert."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1376680422,"post_id":18280442,"comment_id":26816233,"body_markdown":"The solution is fine once you realize that recursion is a quite bad fit for Java. This is just exercise, right? Gone are the days when recursion was taught in a language actually built for recursion: Scheme.","body":"The solution is fine once you realize that recursion is a quite bad fit for Java. This is just exercise, right? Gone are the days when recursion was taught in a language actually built for recursion: Scheme."},{"owner":{"account_id":233335,"reputation":7836,"user_id":1267363,"accept_rate":85,"display_name":"davidjhp"},"score":1,"creation_date":1376680578,"post_id":18280442,"comment_id":26816321,"body_markdown":"@Marko, yes I realize recursion is a bad fit for Java, just want to  practice recursion skills because of this http://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html","body":"@Marko, yes I realize recursion is a bad fit for Java, just want to  practice recursion skills because of this <a href=\"http://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html\" rel=\"nofollow noreferrer\">joelonsoftware.com/articles/ThePerilsofJavaSchools.html</a>"},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1376681127,"post_id":18280442,"comment_id":26816606,"body_markdown":"+1 Great article from a great writer! Yes, the Great Java Shift is what I had in mind when I wrote the above comment.","body":"+1 Great article from a great writer! Yes, the Great Java Shift is what I had in mind when I wrote the above comment."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1376681219,"post_id":18280442,"comment_id":26816655,"body_markdown":"But let me give you a piece of advice: do yourself a favor and actually learn an FP language. My recommendation: Clojure. It&#39;s JVM-based, has great Java interop, and is a full-blown Scheme-like Lisp. In Clojure 90% of problems are solved using higher-order functions, they&#39;re as natural there as a `for` loop in Java.","body":"But let me give you a piece of advice: do yourself a favor and actually learn an FP language. My recommendation: Clojure. It&#39;s JVM-based, has great Java interop, and is a full-blown Scheme-like Lisp. In Clojure 90% of problems are solved using higher-order functions, they&#39;re as natural there as a <code>for</code> loop in Java."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1376681385,"post_id":18280442,"comment_id":26816736,"body_markdown":"And if you want to learn recursion, the best resource is The Little Schemer.","body":"And if you want to learn recursion, the best resource is The Little Schemer."}],"answers":[{"comments":[{"owner":{"account_id":186793,"reputation":9247,"user_id":424406,"accept_rate":53,"display_name":"rounak"},"score":0,"creation_date":1402352653,"post_id":18280806,"comment_id":37230830,"body_markdown":"Isn&#39;t the solution you posted n^2 too?","body":"Isn&#39;t the solution you posted n^2 too?"},{"owner":{"account_id":1144500,"reputation":37498,"user_id":1127571,"accept_rate":71,"display_name":"Honza Brabec"},"score":4,"creation_date":1402381689,"post_id":18280806,"comment_id":37238438,"body_markdown":"Yes, it is n^2, but the other solution is 2^n.","body":"Yes, it is n^2, but the other solution is 2^n."},{"owner":{"account_id":186793,"reputation":9247,"user_id":424406,"accept_rate":53,"display_name":"rounak"},"score":1,"creation_date":1402395436,"post_id":18280806,"comment_id":37245886,"body_markdown":"Ah, got confused between the two","body":"Ah, got confused between the two"},{"owner":{"display_name":"user3003961"},"score":3,"creation_date":1404549752,"post_id":18280806,"comment_id":38084982,"body_markdown":"This solutions doesn&#39;t produce all the possible combinations of the characters in the string.","body":"This solutions doesn&#39;t produce all the possible combinations of the characters in the string."},{"owner":{"account_id":92270,"reputation":3365,"user_id":252948,"accept_rate":91,"display_name":"zad"},"score":2,"creation_date":1468606194,"post_id":18280806,"comment_id":64213404,"body_markdown":"We are looking for substrings not combinations","body":"We are looking for substrings not combinations"},{"owner":{"account_id":7427599,"reputation":373,"user_id":5649620,"accept_rate":40,"display_name":"Vyshnav Ramesh Thrissur"},"score":0,"creation_date":1601208221,"post_id":18280806,"comment_id":113328764,"body_markdown":"Isn&#39;t the question asking for recursive solution?","body":"Isn&#39;t the question asking for recursive solution?"},{"owner":{"account_id":1230908,"reputation":2498,"user_id":1195522,"accept_rate":94,"display_name":"Ryan R."},"score":0,"creation_date":1601492237,"post_id":18280806,"comment_id":113428434,"body_markdown":"Having a &#39;min length&#39; argument would be nice, i.e. ignore generating substrings less than min length. This should be done in the loop arguments vs. a conditional in the loop body.","body":"Having a &#39;min length&#39; argument would be nice, i.e. ignore generating substrings less than min length. This should be done in the loop arguments vs. a conditional in the loop body."}],"tags":[],"owner":{"account_id":1144500,"reputation":37498,"user_id":1127571,"accept_rate":71,"display_name":"Honza Brabec"},"comment_count":7,"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1468608780,"creation_date":1376681576,"answer_id":18280806,"question_id":18280442,"body_markdown":"This problem has overlapping subproblems and because of that the top-down recursion as you do is not much effective. You are evaluating multiple substrings multiple times.\r\n\r\nActually it is horribly ineffective (I would guess O(2^n)). Just try to run it on a bit longer string.\r\n\r\n    generate(&quot;OverlappingSubproblems&quot;);\r\n\r\n\r\nIf you are interested in a better way of solving this you can try something like this:\r\n\r\n    public static void generate2(String word) {\r\n        for (int from = 0; from &lt; word.length(); from++) {\r\n            for (int to = from + 1; to &lt;= word.length(); to++) {\r\n                System.out.println(word.substring(from, to));\r\n            }\r\n        }\r\n    }\r\n\r\nIf you want to use recursion you can try to rewrite the for-loops with recursion as exercise ;)","title":"Java - using recursion to create all substrings from a string","body":"<p>This problem has overlapping subproblems and because of that the top-down recursion as you do is not much effective. You are evaluating multiple substrings multiple times.</p>\n\n<p>Actually it is horribly ineffective (I would guess O(2^n)). Just try to run it on a bit longer string.</p>\n\n<pre><code>generate(\"OverlappingSubproblems\");\n</code></pre>\n\n<p>If you are interested in a better way of solving this you can try something like this:</p>\n\n<pre><code>public static void generate2(String word) {\n    for (int from = 0; from &lt; word.length(); from++) {\n        for (int to = from + 1; to &lt;= word.length(); to++) {\n            System.out.println(word.substring(from, to));\n        }\n    }\n}\n</code></pre>\n\n<p>If you want to use recursion you can try to rewrite the for-loops with recursion as exercise ;)</p>\n"},{"tags":[],"owner":{"account_id":305991,"reputation":39137,"user_id":616460,"accept_rate":93,"display_name":"Jason C"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376681961,"creation_date":1376681961,"answer_id":18280909,"question_id":18280442,"body_markdown":"There is a lot to be learned from Honza&#39;s answer.I suggest you try and rewrite that as a recursive algorithm.\r\n\r\nAs with any recursive approach, divide it into self-referencing subproblems: \r\n\r\n    1. substrings(X) = substrings_starting_at_first_character(X) + substrings(X minus first char).\r\n    2. substrings_starting_at_first_character(X) = X + substrings_starting_at_first_character(X minus last char).\r\n\r\nNext figure out your non-self-referencing base cases:\r\n\r\n    1. substrings(&quot;&quot;) = empty set.\r\n    2. substrings_starting_at_first_character(&quot;&quot;) = empty set.\r\n\r\nAnd go from there.","title":"Java - using recursion to create all substrings from a string","body":"<p>There is a lot to be learned from Honza's answer.I suggest you try and rewrite that as a recursive algorithm.</p>\n\n<p>As with any recursive approach, divide it into self-referencing subproblems: </p>\n\n<pre><code>1. substrings(X) = substrings_starting_at_first_character(X) + substrings(X minus first char).\n2. substrings_starting_at_first_character(X) = X + substrings_starting_at_first_character(X minus last char).\n</code></pre>\n\n<p>Next figure out your non-self-referencing base cases:</p>\n\n<pre><code>1. substrings(\"\") = empty set.\n2. substrings_starting_at_first_character(\"\") = empty set.\n</code></pre>\n\n<p>And go from there.</p>\n"},{"comments":[{"owner":{"account_id":2601986,"reputation":692,"user_id":2254097,"display_name":"Harshit"},"score":0,"creation_date":1429415300,"post_id":18285195,"comment_id":47585316,"body_markdown":"well explained. Can you please explain on time &amp; spae complexity of your solution ? will it be O(nlogn) for time ?","body":"well explained. Can you please explain on time &amp; spae complexity of your solution ? will it be O(nlogn) for time ?"},{"owner":{"account_id":3243453,"reputation":348,"user_id":2735801,"display_name":"prashant"},"score":1,"creation_date":1525378469,"post_id":18285195,"comment_id":87344272,"body_markdown":"System.out.println(in.substring(start, end)); -- this line prints empty strings when start = end. It should be executed only when start != end, something like\n\n\n`if (start != end) {\n    System.out.println(str.substring(start, end));\n}`","body":"System.out.println(in.substring(start, end)); -- this line prints empty strings when start = end. It should be executed only when start != end, something like   <code>if (start != end) {     System.out.println(str.substring(start, end)); }</code>"}],"tags":[],"owner":{"account_id":233335,"reputation":7836,"user_id":1267363,"accept_rate":85,"display_name":"davidjhp"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1376714558,"creation_date":1376714558,"answer_id":18285195,"question_id":18280442,"body_markdown":"The following turned out to be the best solution:\r\n\r\n\r\n    public class recursive {\r\n    \r\n    \tstatic String in = &quot;1234&quot;;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tsubstrings(0,1);\r\n    \t}\r\n    \r\n    \tstatic void substrings(int start, int end){\r\n    \t\tif(start == in.length() &amp;&amp; end == in.length()){\r\n    \t\t\treturn;\r\n    \t\t}else{\r\n    \t\t\tif(end == in.length()+1){\r\n    \t\t\t\tsubstrings(start+1,start+1);\r\n    \t\t\t}else{\r\n    \t\t\t\tSystem.out.println(in.substring(start, end));\r\n    \t\t\t\tsubstrings(start, end+1);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\nIt first checks the base case: if both start and end are equal to in.length(). \r\nBecause if they are, that means there are no more substrings to be found, and the program ends.\r\n\r\n\r\nLet&#39;s start with start=0 and end=1. They obviously don&#39;t equal in.length(), and end definitely doesn&#39;t equal in.length()+1.\r\nThus, substring(0,1) will be printed out, which is 1.\r\nThe next iteration of substrings will be substrings(0,2), and in.substring(0,2) will be printed, which is 12. This will continue until end == in.length()+1, which happens when the program finishes substrings(0,4) and tries to move on to substrings(0,5).\r\n5 == in.length()+1, so when that happens, the program will do substrings(start+1,start+1), which is substrings(1,1). The process will continue with substrings(1,2), and (1,3), until (1,5) when the program will run substrings(2,2).\r\n\r\n\r\nAll of this will continue until substrings(4,4), which, at that point, the program stops.\r\n\r\n\r\nThe result looks like this:\r\n\r\n\r\n1\r\n12\r\n123\r\n1234\r\n\r\n\r\n2\r\n23\r\n234\r\n\r\n\r\n3\r\n34\r\n\r\n\r\n4\r\n","title":"Java - using recursion to create all substrings from a string","body":"<p>The following turned out to be the best solution:</p>\n\n<pre><code>public class recursive {\n\n    static String in = \"1234\";\n\n    public static void main(String[] args) {\n        substrings(0,1);\n    }\n\n    static void substrings(int start, int end){\n        if(start == in.length() &amp;&amp; end == in.length()){\n            return;\n        }else{\n            if(end == in.length()+1){\n                substrings(start+1,start+1);\n            }else{\n                System.out.println(in.substring(start, end));\n                substrings(start, end+1);\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>It first checks the base case: if both start and end are equal to in.length(). \nBecause if they are, that means there are no more substrings to be found, and the program ends.</p>\n\n<p>Let's start with start=0 and end=1. They obviously don't equal in.length(), and end definitely doesn't equal in.length()+1.\nThus, substring(0,1) will be printed out, which is 1.\nThe next iteration of substrings will be substrings(0,2), and in.substring(0,2) will be printed, which is 12. This will continue until end == in.length()+1, which happens when the program finishes substrings(0,4) and tries to move on to substrings(0,5).\n5 == in.length()+1, so when that happens, the program will do substrings(start+1,start+1), which is substrings(1,1). The process will continue with substrings(1,2), and (1,3), until (1,5) when the program will run substrings(2,2).</p>\n\n<p>All of this will continue until substrings(4,4), which, at that point, the program stops.</p>\n\n<p>The result looks like this:</p>\n\n<p>1\n12\n123\n1234</p>\n\n<p>2\n23\n234</p>\n\n<p>3\n34</p>\n\n<p>4</p>\n"},{"comments":[{"owner":{"account_id":6189371,"reputation":4655,"user_id":4822479,"accept_rate":60,"display_name":"Madhusudan"},"score":3,"creation_date":1460885466,"post_id":25966546,"comment_id":60939933,"body_markdown":"14,15,.. are not substring. Your solution is giving all combinations that can be made using chars in the string...","body":"14,15,.. are not substring. Your solution is giving all combinations that can be made using chars in the string..."}],"tags":[],"owner":{"account_id":1323534,"reputation":7793,"user_id":1268844,"accept_rate":100,"display_name":"Anshu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411358739,"creation_date":1411358739,"answer_id":25966546,"question_id":18280442,"body_markdown":"Another clean approach - using both looping and recursion (and does not have overlapping problem)\r\n\r\n\tpublic static void printCombinations(String initial, String combined) {\r\n\t\tSystem.out.print(combined + &quot; &quot;);\r\n\t\tfor (int i = 0; i &lt; initial.length(); i++) {\r\n\t\t\tprintCombinations(initial.substring(i + 1),\r\n\t\t\t\t\tcombined + initial.charAt(i));\r\n\r\n\t\t}\r\n\t}\r\n    \r\n    \r\n    public static void main(String[] args) {\r\n    \t\tprintCombinations(&quot;12345&quot;, &quot;&quot;);\r\n    \t}\r\n\r\nAnd output is -  1 12 123 1234 12345 1235 124 1245 125 13 134 1345 135 14 145 15 2 23 234 2345 235 24 245 25 3 34 345 35 4 45 5 ","title":"Java - using recursion to create all substrings from a string","body":"<p>Another clean approach - using both looping and recursion (and does not have overlapping problem)</p>\n\n<pre><code>public static void printCombinations(String initial, String combined) {\n    System.out.print(combined + \" \");\n    for (int i = 0; i &lt; initial.length(); i++) {\n        printCombinations(initial.substring(i + 1),\n                combined + initial.charAt(i));\n\n    }\n}\n\n\npublic static void main(String[] args) {\n        printCombinations(\"12345\", \"\");\n    }\n</code></pre>\n\n<p>And output is -  1 12 123 1234 12345 1235 124 1245 125 13 134 1345 135 14 145 15 2 23 234 2345 235 24 245 25 3 34 345 35 4 45 5 </p>\n"},{"tags":[],"owner":{"account_id":12853858,"reputation":1,"user_id":9297817,"display_name":"SK1"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517501089,"creation_date":1517501089,"answer_id":48566995,"question_id":18280442,"body_markdown":"     //substring all the words from a string\r\n      public class RecSubstring\r\n      {\r\n        static int c=0; \r\n        static void rec(String str)\r\n        {\r\n          if(str.equals(&quot;&quot;))\r\n            return;\r\n          else\r\n          {\r\n            c=str.indexOf(&#39; &#39;);  \r\n            System.out.println(str.substring(0,c));\r\n            rec(str.substring(c+1));\r\n         }\r\n       }\r\n  \r\n      public static void main(String args[])\r\n      {\r\n        String st=&quot;We are Happy&quot;+&quot; &quot; ;\r\n        rec(st);\r\n      }\r\n     }\r\n","title":"Java - using recursion to create all substrings from a string","body":"<pre><code> //substring all the words from a string\n  public class RecSubstring\n  {\n    static int c=0; \n    static void rec(String str)\n    {\n      if(str.equals(\"\"))\n        return;\n      else\n      {\n        c=str.indexOf(' ');  \n        System.out.println(str.substring(0,c));\n        rec(str.substring(c+1));\n     }\n   }\n\n  public static void main(String args[])\n  {\n    String st=\"We are Happy\"+\" \" ;\n    rec(st);\n  }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5832053,"reputation":37,"user_id":4596220,"display_name":"am-sysout"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581866366,"creation_date":1581864954,"answer_id":60249757,"question_id":18280442,"body_markdown":"    public class SubsequencesOfStr {\r\n    \r\n     public static void main(String[] args) {\r\n    \r\n      String str = &quot;abcd&quot;;\r\n      System.out.println(&quot;0000----&quot; + str.length());\r\n      linearCombination(str);\r\n     }\r\n    \r\n     static void linearCombination(String str) {\r\n      for (int i = 0; i &lt; str.length(); i++) {\r\n       int endIndex = i + 1;\r\n       for (int j = 0; j &lt; str.length() - i; j++) {\r\n        System.out.println(str.substring(j, endIndex));\r\n        endIndex++;\r\n       }\r\n      }\r\n     }\r\n    }","title":"Java - using recursion to create all substrings from a string","body":"<pre><code>public class SubsequencesOfStr {\n\n public static void main(String[] args) {\n\n  String str = \"abcd\";\n  System.out.println(\"0000----\" + str.length());\n  linearCombination(str);\n }\n\n static void linearCombination(String str) {\n  for (int i = 0; i &lt; str.length(); i++) {\n   int endIndex = i + 1;\n   for (int j = 0; j &lt; str.length() - i; j++) {\n    System.out.println(str.substring(j, endIndex));\n    endIndex++;\n   }\n  }\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16556360,"reputation":1,"user_id":11963427,"display_name":"Himanshu Negi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611125870,"creation_date":1611125870,"answer_id":65804492,"question_id":18280442,"body_markdown":"    void allsubstring(string s,int start,int end)\r\n    {\r\n\tif(start == s.size() &amp;&amp;  end == s.size()) {\r\n\t\treturn;\r\n\t}\r\n\telse {\r\n\t\tif(end == s.size()) {\r\n\t\t\tallsubstring(s,start+1,start+1);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcout&lt;&lt;s.substr(start,end-start+1)&lt;&lt;endl;\r\n\t\t\tallsubstring(s,start,end+1);\r\n\t\t}\r\n\t}\r\n}","title":"Java - using recursion to create all substrings from a string","body":"<pre><code>void allsubstring(string s,int start,int end)\n{\nif(start == s.size() &amp;&amp;  end == s.size()) {\n    return;\n}\nelse {\n    if(end == s.size()) {\n        allsubstring(s,start+1,start+1);\n    }\n    else {\n        cout&lt;&lt;s.substr(start,end-start+1)&lt;&lt;endl;\n        allsubstring(s,start,end+1);\n    }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":19374885,"reputation":1,"user_id":14167363,"display_name":"Dhananjay Kansara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612082092,"creation_date":1611996772,"answer_id":65966209,"question_id":18280442,"body_markdown":"another approach using Recursion\r\n\r\n    \t\r\n        \r\n    \tpublic static void main(String[] args) \r\n    \t{\r\n    \t\tsubStrings(&quot;ABCDE&quot;);\t\t\r\n    \t}\r\n    \t\r\n    \tstatic void subStrings(String str) \r\n    \t{\r\n     \t\tif(str.length()==0)\r\n     \t\t{\r\n     \t\t\treturn;\r\n     \t\t}\r\n     \t\tsubString(str);\r\n     \t\tsubStrings(str.substring(1,str.length()));\r\n     \t\t\r\n    \t}\r\n    \t\r\n    \tprivate static void subString(String str)\r\n    \t{\r\n    \t\tif(str.length()==1)\r\n    \t\t{\r\n    \t\t\tSystem.out.print(str+&quot; &quot;);\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\t\r\n    \t\tSystem.out.print(str+&quot; &quot;);\r\n    \t\tsubString(str.substring(0,str.length()-1));\r\n    \t\t\r\n    \t}\r\n     \r\n    \r\n\r\n","title":"Java - using recursion to create all substrings from a string","body":"<p>another approach using Recursion</p>\n<pre><code>    public static void main(String[] args) \n    {\n        subStrings(&quot;ABCDE&quot;);        \n    }\n    \n    static void subStrings(String str) \n    {\n        if(str.length()==0)\n        {\n            return;\n        }\n        subString(str);\n        subStrings(str.substring(1,str.length()));\n        \n    }\n    \n    private static void subString(String str)\n    {\n        if(str.length()==1)\n        {\n            System.out.print(str+&quot; &quot;);\n            return;\n        }\n        \n        System.out.print(str+&quot; &quot;);\n        subString(str.substring(0,str.length()-1));\n        \n    }\n \n</code></pre>\n"},{"tags":[],"owner":{"account_id":22039754,"reputation":1,"user_id":16305707,"display_name":"Sriram Krishnamurthy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624654380,"creation_date":1624627914,"answer_id":68131839,"question_id":18280442,"body_markdown":"Here is my approach employing 2 recursive functions pss and pss1 to mimic the outer and inner for loops respectively of the standard O(n^2) solution. Only this time, recursively &#128077;.\r\n\r\noutput for abc : a,ab,abc,b,bc,c \r\n\r\n```\r\n// print substrings using recursion\r\n\r\nvoid pss1 ( string s , int i , string op)\r\n{\r\n    // pss1 prints all substrings from a given index\r\n if(i==s.length()-1)\r\n    {\r\n    \top+=s[i];\r\n    \tcout&lt;&lt;op&lt;&lt;endl;\r\n    \treturn;\r\n    }\r\n     op+=s[i];\r\n     cout&lt;&lt;op&lt;&lt;endl;\r\n     pss1(s,i+1,op);\r\n\r\n}\r\nvoid pss ( string s , int i , string op)\r\n{\r\n    // pss repeats the process of pss1 for all indices by reducing the string size by 1 each time from the front (i.e) abc becomes bc at the 2nd call of psss\r\n    if(s.length()==1)\r\n    {\r\n    \tcout&lt;&lt;s&lt;&lt;endl;\r\n    \treturn;\r\n    }\r\n    else\r\n    {\r\n    \t\tpss1(s,0,op);\r\n\r\n    \tstring S=s.substr(1);\r\n    \tpss(S,0,&quot;&quot;);\r\n\r\n    }\r\n    return ;\r\n}\r\n\r\n\r\nint main()\r\n{\r\n    string s;\r\n    cin&gt;&gt;s;\r\n    pss(s,0,&quot;&quot;);\r\n    return 0;\r\n}\r\n```","title":"Java - using recursion to create all substrings from a string","body":"<p>Here is my approach employing 2 recursive functions pss and pss1 to mimic the outer and inner for loops respectively of the standard O(n^2) solution. Only this time, recursively .</p>\n<p>output for abc : a,ab,abc,b,bc,c</p>\n<pre><code>// print substrings using recursion\n\nvoid pss1 ( string s , int i , string op)\n{\n    // pss1 prints all substrings from a given index\n if(i==s.length()-1)\n    {\n        op+=s[i];\n        cout&lt;&lt;op&lt;&lt;endl;\n        return;\n    }\n     op+=s[i];\n     cout&lt;&lt;op&lt;&lt;endl;\n     pss1(s,i+1,op);\n\n}\nvoid pss ( string s , int i , string op)\n{\n    // pss repeats the process of pss1 for all indices by reducing the string size by 1 each time from the front (i.e) abc becomes bc at the 2nd call of psss\n    if(s.length()==1)\n    {\n        cout&lt;&lt;s&lt;&lt;endl;\n        return;\n    }\n    else\n    {\n            pss1(s,0,op);\n\n        string S=s.substr(1);\n        pss(S,0,&quot;&quot;);\n\n    }\n    return ;\n}\n\n\nint main()\n{\n    string s;\n    cin&gt;&gt;s;\n    pss(s,0,&quot;&quot;);\n    return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22039754,"reputation":1,"user_id":16305707,"display_name":"Sriram Krishnamurthy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624770113,"creation_date":1624770113,"answer_id":68148141,"question_id":18280442,"body_markdown":"Here is the working code using 1 recursive function only.\r\n\r\nAn implementation of @davidjhp&#39;s solution in c++\r\n\r\nAnalyze the Recursive stack Diagram in recursive problems to understand how the given problem is solved for smaller problems to yield the final solution.\r\n\r\n\r\n    // Print SubStrings using recursion \r\n    \r\n    void pss(string s, int start, int end)\r\n    {\r\n    \tif(start==s.length()-1)\r\n    \t{\r\n    \t\tcout&lt;&lt;s.substr(start)&lt;&lt;endl;\r\n    \t\treturn;\r\n    \t}\r\n    \tif(end==s.length()+1)\r\n    \t{\r\n    \t\tstart++;\r\n    \t\tend=start+1;\r\n    \t\tpss(s,start,end);\r\n    \t}\r\n    \telse if( start&lt;=s.length()&amp;&amp;end&lt;=s.length())\r\n    \t{\r\n    \t\tcout&lt;&lt;s.substr(start,end-start)&lt;&lt;endl;\r\n    \t\tpss(s,start,end+1);\r\n    \t}\r\n    }\r\n    \r\n    \r\n     int main()\r\n    {\r\n     string s;\r\n     cin&gt;&gt;s;\r\n     pss(s,0,1); \r\n     return 0;\r\n    }\r\n\r\n","title":"Java - using recursion to create all substrings from a string","body":"<p>Here is the working code using 1 recursive function only.</p>\n<p>An implementation of @davidjhp's solution in c++</p>\n<p>Analyze the Recursive stack Diagram in recursive problems to understand how the given problem is solved for smaller problems to yield the final solution.</p>\n<pre><code>// Print SubStrings using recursion \n\nvoid pss(string s, int start, int end)\n{\n    if(start==s.length()-1)\n    {\n        cout&lt;&lt;s.substr(start)&lt;&lt;endl;\n        return;\n    }\n    if(end==s.length()+1)\n    {\n        start++;\n        end=start+1;\n        pss(s,start,end);\n    }\n    else if( start&lt;=s.length()&amp;&amp;end&lt;=s.length())\n    {\n        cout&lt;&lt;s.substr(start,end-start)&lt;&lt;endl;\n        pss(s,start,end+1);\n    }\n}\n\n\n int main()\n{\n string s;\n cin&gt;&gt;s;\n pss(s,0,1); \n return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10635195,"reputation":125,"user_id":7832116,"accept_rate":86,"display_name":"Aman Warudkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687639350,"creation_date":1687639350,"answer_id":76547921,"question_id":18280442,"body_markdown":"    #include &lt;bits/stdc++.h&gt;\r\n    using namespace std;\r\n   \r\n    /*\r\n    In Subsequence: If we take an element then we can take another element after k skips. (where k&gt;=0)\r\n    In Substring: If we take an element then we can only take adjacent element after it. (i.e. no skips)\r\n    */\r\n\r\n    void substring(string &amp;s, string &amp;res, int prevIndex, int currIndex)\r\n    {\r\n      if(currIndex==s.size())\r\n      {\r\n        cout&lt;&lt;res&lt;&lt;endl;\r\n        return;\r\n      }\r\n      if(prevIndex==-1 || currIndex-prevIndex==1)\r\n      {\r\n        res+=s[currIndex];\r\n        substring(s,res,currIndex,currIndex+1);\r\n        res.pop_back();\r\n      }\r\n      substring(s,res,prevIndex,currIndex+1);\r\n    }\r\n    \r\n    int main()\r\n    {\r\n      string s=&quot;abcde&quot;, res;\r\n      substring(s,res,-1,0);\r\n    }","title":"Java - using recursion to create all substrings from a string","body":"<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\n/*\nIn Subsequence: If we take an element then we can take another element after k skips. (where k&gt;=0)\nIn Substring: If we take an element then we can only take adjacent element after it. (i.e. no skips)\n*/\n\nvoid substring(string &amp;s, string &amp;res, int prevIndex, int currIndex)\n{\n  if(currIndex==s.size())\n  {\n    cout&lt;&lt;res&lt;&lt;endl;\n    return;\n  }\n  if(prevIndex==-1 || currIndex-prevIndex==1)\n  {\n    res+=s[currIndex];\n    substring(s,res,currIndex,currIndex+1);\n    res.pop_back();\n  }\n  substring(s,res,prevIndex,currIndex+1);\n}\n\nint main()\n{\n  string s=&quot;abcde&quot;, res;\n  substring(s,res,-1,0);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689721715,"post_id":76699982,"comment_id":135252931,"body_markdown":"Don&#39;t use `==` for string comparisons.","body":"Don&#39;t use <code>==</code> for string comparisons."},{"owner":{"account_id":29029555,"reputation":1,"user_id":22236858,"display_name":"DarkLord"},"score":0,"creation_date":1689801581,"post_id":76699982,"comment_id":135266885,"body_markdown":"@tgdavies Okay, will use str.length()==0","body":"@tgdavies Okay, will use str.length()==0"}],"tags":[],"owner":{"account_id":29029555,"reputation":1,"user_id":22236858,"display_name":"DarkLord"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689801616,"creation_date":1689534478,"answer_id":76699982,"question_id":18280442,"body_markdown":"My approach using recursion. It creates a sort of binary tree if you deeply understand how the code works:\r\n(Note: The value of String ans will be set to &quot;&quot;(null) in the main method)\r\n\r\n    static void subStr(String str, String ans)    // ans=&quot;&quot; (in main method)\r\n    {\r\n        if(str.length() == 0){\r\n            System.out.print(ans);\r\n        }\r\n\r\n        char ch = str.charAt(0);\r\n        String ros = str.substring(1);\r\n\r\n        subStr(ros, ans);\r\n        subStr(ros, ans+ch);\r\n    }","title":"Java - using recursion to create all substrings from a string","body":"<p>My approach using recursion. It creates a sort of binary tree if you deeply understand how the code works:\n(Note: The value of String ans will be set to &quot;&quot;(null) in the main method)</p>\n<pre><code>static void subStr(String str, String ans)    // ans=&quot;&quot; (in main method)\n{\n    if(str.length() == 0){\n        System.out.print(ans);\n    }\n\n    char ch = str.charAt(0);\n    String ros = str.substring(1);\n\n    subStr(ros, ans);\n    subStr(ros, ans+ch);\n}\n</code></pre>\n"}],"owner":{"account_id":233335,"reputation":7836,"user_id":1267363,"accept_rate":85,"display_name":"davidjhp"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34070,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":18285195,"answer_count":12,"score":6,"last_activity_date":1689801616,"creation_date":1376680084,"question_id":18280442,"body_markdown":"The following code in Java uses recursion to create all possible substrings from a string.\r\nI am wondering is there a better way of coding this?  I want to use recursion.\r\n\r\n\r\n    public class main {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tgenerate(&quot;hello&quot;);\r\n    \t}\r\n    \r\n    \tpublic static void generate(String word) {\r\n    \t    if (word.length() == 1) {\r\n    \t        System.out.println(word);\r\n    \t        return;\r\n    \t    }else{\r\n    \t    \tSystem.out.println(word);\r\n    \t        generate(word.substring(0, word.length()-1)); \r\n    \t        generate(word.substring(1, word.length())); \r\n    \t    }\r\n    \t    \r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\nFAQ\r\nQ - Why do I want to do this using recursion?\r\nA - Because the CEO of StackOverflow says recursion is important\r\nhttp://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html","title":"Java - using recursion to create all substrings from a string","body":"<p>The following code in Java uses recursion to create all possible substrings from a string.\nI am wondering is there a better way of coding this?  I want to use recursion.</p>\n\n<pre><code>public class main {\n\n    public static void main(String[] args) {\n        generate(\"hello\");\n    }\n\n    public static void generate(String word) {\n        if (word.length() == 1) {\n            System.out.println(word);\n            return;\n        }else{\n            System.out.println(word);\n            generate(word.substring(0, word.length()-1)); \n            generate(word.substring(1, word.length())); \n        }\n\n    }\n\n}\n</code></pre>\n\n<p>FAQ\nQ - Why do I want to do this using recursion?\nA - Because the CEO of StackOverflow says recursion is important\n<a href=\"http://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html\" rel=\"noreferrer\">http://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html</a></p>\n"},{"tags":["java","assertj"],"answers":[{"comments":[{"owner":{"account_id":26941596,"reputation":1,"user_id":20512322,"display_name":"Tomi"},"score":0,"creation_date":1689835811,"post_id":76725206,"comment_id":135270163,"body_markdown":"Hi, but RecursiveComparisonDifferenceCalculator class already returns a good hint: \n\nComparisonDifference [path=level2.level3, actual=[Level3[text=first1], Level3[text=first2]], expected=[Level3[text=second1]], template=%s differ:%n- actual value  : %s%n- expected value: %s%s,additionalInformation=actual and expected values are collections of different size, actual size=2 when expected size=1]\n\nSo from this it easier to figure out what is going on. But this message is lost up the stack.","body":"Hi, but RecursiveComparisonDifferenceCalculator class already returns a good hint:   ComparisonDifference [path=level2.level3, actual=[Level3[text=first1], Level3[text=first2]], expected=[Level3[text=second1]], template=%s differ:%n- actual value  : %s%n- expected value: %s%s,additionalInformation=actual and expected values are collections of different size, actual size=2 when expected size=1]  So from this it easier to figure out what is going on. But this message is lost up the stack."},{"owner":{"account_id":1407336,"reputation":6523,"user_id":1348834,"display_name":"Joel Costigliola"},"score":0,"creation_date":1689889359,"post_id":76725206,"comment_id":135281207,"body_markdown":"Your example is to simplistic since your sets have only one value, it&#39;s the only case where we can actually know which elements exactly did not match.\nTry adding more elements and think about what failed comparisons should be reported.","body":"Your example is to simplistic since your sets have only one value, it&#39;s the only case where we can actually know which elements exactly did not match. Try adding more elements and think about what failed comparisons should be reported."}],"tags":[],"owner":{"account_id":1407336,"reputation":6523,"user_id":1348834,"display_name":"Joel Costigliola"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689800797,"creation_date":1689800797,"answer_id":76725206,"question_id":76721313,"body_markdown":"This possible with ordered collections (list or array) but with Sets it&#39;s more complicated, you can only say that an element is missing, that element has been compared with all the elements of the other so you cannot pinpoint a specific element from the other set.\r\n\r\nFeel free to raise an issue in assertj with a test case showing the actual error and then tell us which error you would have liked to see ","title":"AssertJ: Get the path of differences with usingRecursiveComparison()","body":"<p>This possible with ordered collections (list or array) but with Sets it's more complicated, you can only say that an element is missing, that element has been compared with all the elements of the other so you cannot pinpoint a specific element from the other set.</p>\n<p>Feel free to raise an issue in assertj with a test case showing the actual error and then tell us which error you would have liked to see</p>\n"}],"owner":{"account_id":26941596,"reputation":1,"user_id":20512322,"display_name":"Tomi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689800797,"creation_date":1689769848,"question_id":76721313,"body_markdown":"It is hard when using usingRecursiveComparison() in AssertJ for some objects tree to figure out where the difference is in case of comparison failure.\r\nWith simple objects relations AssertJ returns the path of the difference between objects.\r\nWhen using collections there are no details of the path where the difference is.\r\n\r\nUsing usingRecursiveComparison() in AssertJ with following structure:\r\n\r\n```\r\n@Test\r\n   public void test() {\r\n      final Level1 first = new Level1( new Level2( new Level3( &quot;first1&quot; ) ) );\r\n      final Level1 second = new Level1( new Level2( new Level3( &quot;second1&quot; ) ) );\r\n      assertThat( first ).usingRecursiveComparison().isEqualTo( second );\r\n   }\r\n\r\n   public record Level1(Level2 level2) {\r\n   }\r\n\r\n   public record Level2(Level3 level3) {\r\n   }\r\n\r\n   public record Level3(String text) {\r\n   }\r\n```\r\n\r\nrunning the test we get the message (which is fine): the error has the path to the difference.\r\n\r\n```\r\nfield/property &#39;level2.level3.text&#39; differ:\r\n- actual value  : &quot;first1&quot;\r\n- expected value: &quot;second1&quot;\r\n```\r\n\r\nChanging the structure to Sets:\r\n\r\n``` @Test\r\n   public void test() {\r\n      final Level1 first = new Level1( Set.of( new Level2( Set.of( new Level3( &quot;first1&quot; ), new Level3( &quot;first2&quot; ) ) ) ) );\r\n      final Level1 second = new Level1( Set.of( new Level2( Set.of( new Level3( &quot;second1&quot; ) ) ) ) );\r\n      assertThat( first ).usingRecursiveComparison().isEqualTo( second );\r\n   }\r\n\r\n   public record Level1(Set&lt;Level2&gt; level2) {\r\n   }\r\n\r\n   public record Level2(Set&lt;Level3&gt; level3) {\r\n   }\r\n\r\n   public record Level3(String text) {\r\n   }\r\n```\r\n\r\nrunning the test the message returned:\r\n\r\n```\r\nfield/property &#39;level2&#39; differ:\r\n- actual value  : [Level2[level3=[Level3[text=first1], Level3[text=first2]]]]\r\n- expected value: [Level2[level3=[Level3[text=second1]]]]\r\nThe following expected elements were not matched in the actual Set12:\r\n  [Level2[level3=[Level3[text=second1]]]]\r\n```\r\n\r\nDebugging AssertJ there are some ComparisonDifference objects which might be useful, but these get lost:\r\n\r\n```\r\nComparisonDifference [path=level2.level3, actual=[Level3[text=first1], Level3[text=first2]], expected=[Level3[text=second1]], template=%s differ:%n- actual value  : %s%n- expected value: %s%s,additionalInformation=actual and expected values are collections of different size, actual size=2 when expected size=1]\r\n```\r\n\r\nIs it possible to get more insights of the path where the difference actually is?","title":"AssertJ: Get the path of differences with usingRecursiveComparison()","body":"<p>It is hard when using usingRecursiveComparison() in AssertJ for some objects tree to figure out where the difference is in case of comparison failure.\nWith simple objects relations AssertJ returns the path of the difference between objects.\nWhen using collections there are no details of the path where the difference is.</p>\n<p>Using usingRecursiveComparison() in AssertJ with following structure:</p>\n<pre><code>@Test\n   public void test() {\n      final Level1 first = new Level1( new Level2( new Level3( &quot;first1&quot; ) ) );\n      final Level1 second = new Level1( new Level2( new Level3( &quot;second1&quot; ) ) );\n      assertThat( first ).usingRecursiveComparison().isEqualTo( second );\n   }\n\n   public record Level1(Level2 level2) {\n   }\n\n   public record Level2(Level3 level3) {\n   }\n\n   public record Level3(String text) {\n   }\n</code></pre>\n<p>running the test we get the message (which is fine): the error has the path to the difference.</p>\n<pre><code>field/property 'level2.level3.text' differ:\n- actual value  : &quot;first1&quot;\n- expected value: &quot;second1&quot;\n</code></pre>\n<p>Changing the structure to Sets:</p>\n<pre><code>   public void test() {\n      final Level1 first = new Level1( Set.of( new Level2( Set.of( new Level3( &quot;first1&quot; ), new Level3( &quot;first2&quot; ) ) ) ) );\n      final Level1 second = new Level1( Set.of( new Level2( Set.of( new Level3( &quot;second1&quot; ) ) ) ) );\n      assertThat( first ).usingRecursiveComparison().isEqualTo( second );\n   }\n\n   public record Level1(Set&lt;Level2&gt; level2) {\n   }\n\n   public record Level2(Set&lt;Level3&gt; level3) {\n   }\n\n   public record Level3(String text) {\n   }\n</code></pre>\n<p>running the test the message returned:</p>\n<pre><code>field/property 'level2' differ:\n- actual value  : [Level2[level3=[Level3[text=first1], Level3[text=first2]]]]\n- expected value: [Level2[level3=[Level3[text=second1]]]]\nThe following expected elements were not matched in the actual Set12:\n  [Level2[level3=[Level3[text=second1]]]]\n</code></pre>\n<p>Debugging AssertJ there are some ComparisonDifference objects which might be useful, but these get lost:</p>\n<pre><code>ComparisonDifference [path=level2.level3, actual=[Level3[text=first1], Level3[text=first2]], expected=[Level3[text=second1]], template=%s differ:%n- actual value  : %s%n- expected value: %s%s,additionalInformation=actual and expected values are collections of different size, actual size=2 when expected size=1]\n</code></pre>\n<p>Is it possible to get more insights of the path where the difference actually is?</p>\n"},{"tags":["java","unit-testing","singleton"],"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1322148201,"post_id":8256989,"comment_id":10164333,"body_markdown":"I use singletons which are accessed via interface and try to make them stateless as much as possible. This avoid much of the problem that singletons can have (but not using them in many cases they are often used ;)","body":"I use singletons which are accessed via interface and try to make them stateless as much as possible. This avoid much of the problem that singletons can have (but not using them in many cases they are often used ;)"}],"answers":[{"comments":[{"owner":{"account_id":1060224,"reputation":4167,"user_id":1062015,"accept_rate":81,"display_name":"Jaco Van Niekerk"},"score":2,"creation_date":1322137765,"post_id":8257043,"comment_id":10160905,"body_markdown":"Well put! &quot;Mockit&quot; can mock concrete classes, but it does really really evil introspection things that can have very strange behaviour.  Singletons (as implemented in Java) is evil!  Guice does it better...","body":"Well put! &quot;Mockit&quot; can mock concrete classes, but it does really really evil introspection things that can have very strange behaviour.  Singletons (as implemented in Java) is evil!  Guice does it better..."}],"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1322137661,"creation_date":1322137661,"answer_id":8257043,"question_id":8256989,"body_markdown":"Mocks require interfaces, because what you&#39;re doing is replacing the real underlying behavior with an imposter that mimics what you need for the test.  Since the client only deals with an interface reference type, it doesn&#39;t need to know what the implementation is.\r\n\r\nYou can&#39;t mock a concrete class without an interface, because you can&#39;t replace the behavior without the test client knowing about it.  It&#39;s a completely new class in that case.\r\n\r\nIt&#39;s true for all classes, Singleton or not.\r\n","title":"Singleton and unit testing","body":"<p>Mocks require interfaces, because what you're doing is replacing the real underlying behavior with an imposter that mimics what you need for the test.  Since the client only deals with an interface reference type, it doesn't need to know what the implementation is.</p>\n\n<p>You can't mock a concrete class without an interface, because you can't replace the behavior without the test client knowing about it.  It's a completely new class in that case.</p>\n\n<p>It's true for all classes, Singleton or not.</p>\n"},{"comments":[{"owner":{"account_id":205122,"reputation":13270,"user_id":453708,"display_name":"ruhsuzbaykus"},"score":0,"creation_date":1322138428,"post_id":8257065,"comment_id":10161122,"body_markdown":"Nope, it is enough that the class to be mocked implements an interface, no need to extend anything. This is also clearly stated in the sentence from the book.","body":"Nope, it is enough that the class to be mocked implements an interface, no need to extend anything. This is also clearly stated in the sentence from the book."},{"owner":{"account_id":940484,"reputation":22724,"user_id":968632,"accept_rate":100,"display_name":"Guillaume"},"score":0,"creation_date":1322218387,"post_id":8257065,"comment_id":10177244,"body_markdown":"This is bad practice (in my opinion) to extend a class to mock it. Mock is all about behaviour testing, they&#39;re designed to mimic the implementation of an INTERFACE. At least that&#39;s what the purist and the original creators of the mock concept said. If you properly design your system using dependency injection and interfaces, you&#39;ll have no problem using BDD and mocking.","body":"This is bad practice (in my opinion) to extend a class to mock it. Mock is all about behaviour testing, they&#39;re designed to mimic the implementation of an INTERFACE. At least that&#39;s what the purist and the original creators of the mock concept said. If you properly design your system using dependency injection and interfaces, you&#39;ll have no problem using BDD and mocking."}],"tags":[],"owner":{"account_id":1039514,"reputation":1970,"user_id":1045902,"accept_rate":100,"display_name":"DPM"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1322137758,"creation_date":1322137758,"answer_id":8257065,"question_id":8256989,"body_markdown":"As far as I know, a class implementing a Singleton cannot be extended (superclass constructor is always called implicitly and the constructor in a Singleton is private). If you want to mock a class you have to extend the class. As you see in this case it wouldn&#39;t be possible.","title":"Singleton and unit testing","body":"<p>As far as I know, a class implementing a Singleton cannot be extended (superclass constructor is always called implicitly and the constructor in a Singleton is private). If you want to mock a class you have to extend the class. As you see in this case it wouldn't be possible.</p>\n"},{"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1322138610,"post_id":8257167,"comment_id":10161192,"body_markdown":"Good point, but the freedom depends on whether or not the getInstance() method is part of an interface.","body":"Good point, but the freedom depends on whether or not the getInstance() method is part of an interface."}],"tags":[],"owner":{"account_id":250937,"reputation":23604,"user_id":527968,"display_name":"Liviu T."},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1322138153,"creation_date":1322138153,"answer_id":8257167,"question_id":8256989,"body_markdown":"I think it actually depends on the implementation of the **singleton access pattern**.\r\n\r\nFor example \r\n\r\n    MySingleton.getInstance()\r\n\r\nMight be very dificult to test while\r\n\r\n    MySingletonFactory mySingletonFactory = ...\r\n    mySingletonFactory.getInstance() //this returns a MySingleton instance or even a subclass\r\n\r\nDoesn&#39;t provide any information about the fact that its using a singleton. So you can freely replace your factory.\r\n\r\n**NOTE**: a singleton is defined by being only one instance of that class in an application, however the way it&#39;s obtained or stored doesn&#39;t have to be through static means.","title":"Singleton and unit testing","body":"<p>I think it actually depends on the implementation of the <strong>singleton access pattern</strong>.</p>\n\n<p>For example </p>\n\n<pre><code>MySingleton.getInstance()\n</code></pre>\n\n<p>Might be very dificult to test while</p>\n\n<pre><code>MySingletonFactory mySingletonFactory = ...\nmySingletonFactory.getInstance() //this returns a MySingleton instance or even a subclass\n</code></pre>\n\n<p>Doesn't provide any information about the fact that its using a singleton. So you can freely replace your factory.</p>\n\n<p><strong>NOTE</strong>: a singleton is defined by being only one instance of that class in an application, however the way it's obtained or stored doesn't have to be through static means.</p>\n"},{"comments":[{"owner":{"account_id":874092,"reputation":772,"user_id":924272,"display_name":"KRK Owner"},"score":0,"creation_date":1425778564,"post_id":8257255,"comment_id":46101379,"body_markdown":"Seems like a bit of a heavyweight solution - appreciate your example is just that - however injecting a time provider would allow more precise testing and be far less complicated to implement :-)","body":"Seems like a bit of a heavyweight solution - appreciate your example is just that - however injecting a time provider would allow more precise testing and be far less complicated to implement :-)"}],"tags":[],"owner":{"account_id":15271,"reputation":63428,"user_id":32090,"accept_rate":91,"display_name":"Boris Pavlovi"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1322138525,"creation_date":1322138525,"answer_id":8257255,"question_id":8256989,"body_markdown":"Singleton objects are created without any control from the outside. In one of the other chapters of the same book Bloch suggests using `enum`s as default Singleton implementation. Let&#39;s see an example\r\n\r\n    public enum Day {\r\n      MON(2), TUE(3), WED(4), THU(5), FRI(6), SAT(7), SUN(1);\r\n    \r\n      private final int index;\r\n    \r\n      private Day(int index) {\r\n    \r\n        this.index = index;\r\n      }\r\n    \r\n      public boolean isToday() {\r\n      \r\n        return index == new GregorianCalendar().get(Calendar.DAY_OF_WEEK);\r\n      }\r\n    }\r\n\r\nLet&#39;s say we have a code that should be executed only on weekends:\r\n\r\n    public void leisure() {\r\n    \r\n      if (Day.SAT.isToday() || Day.SUN.isToday()) {\r\n    \r\n        haveSomeFun();\r\n        return;\r\n      }\r\n    \r\n      doSomeWork();\r\n    }\r\n\r\nTesting leisure method is going to be pretty hard. Its execution is going to be dependent on the day when it is executed. If it executes on a weekday `doSomeWork()` will be invoked and on weekends `haveSomeFun()`.\r\n\r\nFor this case we would need to use some heavy tools like PowerMock to intercept the `GregorianCalendar` constructor, return a mock which will return an index corresponding to a weekday or weekend in two test cases testing both execution paths of the `leisure` method.","title":"Singleton and unit testing","body":"<p>Singleton objects are created without any control from the outside. In one of the other chapters of the same book Bloch suggests using <code>enum</code>s as default Singleton implementation. Let's see an example</p>\n\n<pre><code>public enum Day {\n  MON(2), TUE(3), WED(4), THU(5), FRI(6), SAT(7), SUN(1);\n\n  private final int index;\n\n  private Day(int index) {\n\n    this.index = index;\n  }\n\n  public boolean isToday() {\n\n    return index == new GregorianCalendar().get(Calendar.DAY_OF_WEEK);\n  }\n}\n</code></pre>\n\n<p>Let's say we have a code that should be executed only on weekends:</p>\n\n<pre><code>public void leisure() {\n\n  if (Day.SAT.isToday() || Day.SUN.isToday()) {\n\n    haveSomeFun();\n    return;\n  }\n\n  doSomeWork();\n}\n</code></pre>\n\n<p>Testing leisure method is going to be pretty hard. Its execution is going to be dependent on the day when it is executed. If it executes on a weekday <code>doSomeWork()</code> will be invoked and on weekends <code>haveSomeFun()</code>.</p>\n\n<p>For this case we would need to use some heavy tools like PowerMock to intercept the <code>GregorianCalendar</code> constructor, return a mock which will return an index corresponding to a weekday or weekend in two test cases testing both execution paths of the <code>leisure</code> method.</p>\n"},{"comments":[{"owner":{"account_id":940484,"reputation":22724,"user_id":968632,"accept_rate":100,"display_name":"Guillaume"},"score":1,"creation_date":1322218509,"post_id":8262351,"comment_id":10177282,"body_markdown":"+1, singleton is an anti-pattern to me, similar to the good old &quot;global variables&quot; of last centuries. Proper OO and mock-BDD means dependency injection, and no singletons.","body":"+1, singleton is an anti-pattern to me, similar to the good old &quot;global variables&quot; of last centuries. Proper OO and mock-BDD means dependency injection, and no singletons."},{"owner":{"account_id":874092,"reputation":772,"user_id":924272,"display_name":"KRK Owner"},"score":0,"creation_date":1425778380,"post_id":8262351,"comment_id":46101353,"body_markdown":"If I read this answer correctly, you&#39;re saying that mocking collaborating classes is okay?\nThis approach is a bit of a minefield, and I agree *mostly* with you answer.... however isn&#39;t mocking collaborating classes putting a class under test in an awkward position when one of it&#39;s collaborators behaviour changes?  In such a case, the unit test will pass after a collaborator&#39;s behaviour has changed....  not really sure if things are as black and white as you say","body":"If I read this answer correctly, you&#39;re saying that mocking collaborating classes is okay? This approach is a bit of a minefield, and I agree <i>mostly</i> with you answer.... however isn&#39;t mocking collaborating classes putting a class under test in an awkward position when one of it&#39;s collaborators behaviour changes?  In such a case, the unit test will pass after a collaborator&#39;s behaviour has changed....  not really sure if things are as black and white as you say"},{"owner":{"account_id":4497699,"reputation":207,"user_id":3657103,"display_name":"user3657103"},"score":0,"creation_date":1463597823,"post_id":8262351,"comment_id":62137173,"body_markdown":"Nice consideration. That&#39;s why unit testing alone it&#39;s not enough and you need integration and end to end test, probably.","body":"Nice consideration. That&#39;s why unit testing alone it&#39;s not enough and you need integration and end to end test, probably."}],"tags":[],"owner":{"account_id":297062,"reputation":7983,"user_id":602372,"accept_rate":91,"display_name":"Yam Marcovic"},"comment_count":3,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1322167814,"creation_date":1322167814,"answer_id":8262351,"question_id":8256989,"body_markdown":"It&#39;s oh so simple.\r\n\r\nIn unit-testing, you want to *isolate* your SUT (the class you&#39;re testing).\r\nYou don&#39;t want to test a *bunch of classes*, because that would defeat the purpose of ***unit***-*testing*.\r\n\r\nBut not all classes do *everything* on their own, right? Most classes use *other classes* to do their work, and they kind of mediate between other classes, and add a bit of their own, to get the final result.\r\n\r\nThe point is - you don&#39;t care about how the classes your SUT depends on work. You care how your SUT *works with those classes*. That&#39;s why you **stub or mock** the classes your SUT needs. And you can use those mocks because you can pass them in as constructor parameters for your SUT.\r\n\r\nWith singletons - the bad thing is that the `getInstance()` method is globally accessible. That means that you usually call it from *within* a class, instead of *depending* on an interface you can later *mock*. That&#39;s why it&#39;s impossible to *replace* it when you want to test your SUT.\r\n\r\nThe solution is not to use the sneaky `public static MySingleton getInstance()` method, but to *depend* on an *interface* your class needs to work with. Do that, and you can pass in **test doubles** whenever you need to.","title":"Singleton and unit testing","body":"<p>It's oh so simple.</p>\n\n<p>In unit-testing, you want to <em>isolate</em> your SUT (the class you're testing).\nYou don't want to test a <em>bunch of classes</em>, because that would defeat the purpose of <strong><em>unit</em></strong>-<em>testing</em>.</p>\n\n<p>But not all classes do <em>everything</em> on their own, right? Most classes use <em>other classes</em> to do their work, and they kind of mediate between other classes, and add a bit of their own, to get the final result.</p>\n\n<p>The point is - you don't care about how the classes your SUT depends on work. You care how your SUT <em>works with those classes</em>. That's why you <strong>stub or mock</strong> the classes your SUT needs. And you can use those mocks because you can pass them in as constructor parameters for your SUT.</p>\n\n<p>With singletons - the bad thing is that the <code>getInstance()</code> method is globally accessible. That means that you usually call it from <em>within</em> a class, instead of <em>depending</em> on an interface you can later <em>mock</em>. That's why it's impossible to <em>replace</em> it when you want to test your SUT.</p>\n\n<p>The solution is not to use the sneaky <code>public static MySingleton getInstance()</code> method, but to <em>depend</em> on an <em>interface</em> your class needs to work with. Do that, and you can pass in <strong>test doubles</strong> whenever you need to.</p>\n"},{"comments":[{"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"score":0,"creation_date":1487110368,"post_id":8263599,"comment_id":71633816,"body_markdown":"this way seems really good. so i&#39;ll be able to swap out for any class i want as along as its type is &quot;SomeInterface&quot;.  But now all the methods i use in the singleton have to become a implementation override correct ? For example if i made a log manager singleton then now SomeInterface has to have the following methods - printLog, saveLog, setLogTag, resetLog, etc etc. Am i right that all the singleton methods must be now declared in the interface ?","body":"this way seems really good. so i&#39;ll be able to swap out for any class i want as along as its type is &quot;SomeInterface&quot;.  But now all the methods i use in the singleton have to become a implementation override correct ? For example if i made a log manager singleton then now SomeInterface has to have the following methods - printLog, saveLog, setLogTag, resetLog, etc etc. Am i right that all the singleton methods must be now declared in the interface ?"}],"tags":[],"owner":{"account_id":37575,"reputation":2652,"user_id":107444,"accept_rate":80,"display_name":"Rodney Gitzel"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1322180247,"creation_date":1322179010,"answer_id":8263599,"question_id":8256989,"body_markdown":"The problem isn&#39;t testing singletons themselves; the book is saying that if a class you are trying to test *depends on* a singleton, then you will likely have problems.   \r\n\r\nUnless, that is, you (1) make the singleton implement an interface, and (2) inject the singleton to your class using that interface.\r\n\r\nFor example, singletons are typically instantiated directly like this:\r\n\r\n    public class MyClass\r\n    {\r\n        private MySingleton __s = MySingleton.getInstance() ;\r\n\r\n        ...\r\n    }\r\n\r\n\r\n`MyClass` may now be very difficult to automatedly test.  For example, as @Boris Pavlovi notes in his answer, if the singleton&#39;s behaviour is based on the system time, your tests are now also dependent on the system time, and you may not be able to test cases that, say, depend on the day of the week.\r\n\r\nHowever, if your singleton &quot;implements an interface that serves as its type&quot; then you can still use a singleton *implementation* of that interface, so long as you pass it in:\r\n\r\n    public class SomeSingleton\r\n        implements SomeInterface\r\n    {\r\n        ...\r\n    }\r\n    \r\n    public class MyClass\r\n    {\r\n        private SomeInterface __s ;\r\n\r\n        public MyClass( SomeInterface s )\r\n        {\r\n            __s = s ;\r\n        }\r\n        \r\n        ...\r\n    }\r\n\r\n    ...\r\n\r\n    MyClass m = new MyClass( SomeSingleton.getInstance() ) ;\r\n\r\n\r\n\r\nFrom the perspective of testing `MyClass` you now don&#39;t care if `SomeSingleton` is singleton or not:  you can also pass in any other implementation you want, including the singleton implementation, but most likely you&#39;ll use a mock of some sort which you control from your tests.\r\n\r\n\r\nBTW, this is NOT the way to do it:\r\n\r\n    public class MyClass\r\n    {\r\n        private SomeInterface __s = SomeSingleton.getInstance() ;\r\n\r\n        public MyClass()\r\n        {\r\n        }\r\n        \r\n        ...\r\n    }\r\n\r\n\r\nThat still works out the same at run-time, but for testing you are now again dependent on `SomeSingleton`.\r\n","title":"Singleton and unit testing","body":"<p>The problem isn't testing singletons themselves; the book is saying that if a class you are trying to test <em>depends on</em> a singleton, then you will likely have problems.   </p>\n\n<p>Unless, that is, you (1) make the singleton implement an interface, and (2) inject the singleton to your class using that interface.</p>\n\n<p>For example, singletons are typically instantiated directly like this:</p>\n\n<pre><code>public class MyClass\n{\n    private MySingleton __s = MySingleton.getInstance() ;\n\n    ...\n}\n</code></pre>\n\n<p><code>MyClass</code> may now be very difficult to automatedly test.  For example, as @Boris Pavlovi notes in his answer, if the singleton's behaviour is based on the system time, your tests are now also dependent on the system time, and you may not be able to test cases that, say, depend on the day of the week.</p>\n\n<p>However, if your singleton \"implements an interface that serves as its type\" then you can still use a singleton <em>implementation</em> of that interface, so long as you pass it in:</p>\n\n<pre><code>public class SomeSingleton\n    implements SomeInterface\n{\n    ...\n}\n\npublic class MyClass\n{\n    private SomeInterface __s ;\n\n    public MyClass( SomeInterface s )\n    {\n        __s = s ;\n    }\n\n    ...\n}\n\n...\n\nMyClass m = new MyClass( SomeSingleton.getInstance() ) ;\n</code></pre>\n\n<p>From the perspective of testing <code>MyClass</code> you now don't care if <code>SomeSingleton</code> is singleton or not:  you can also pass in any other implementation you want, including the singleton implementation, but most likely you'll use a mock of some sort which you control from your tests.</p>\n\n<p>BTW, this is NOT the way to do it:</p>\n\n<pre><code>public class MyClass\n{\n    private SomeInterface __s = SomeSingleton.getInstance() ;\n\n    public MyClass()\n    {\n    }\n\n    ...\n}\n</code></pre>\n\n<p>That still works out the same at run-time, but for testing you are now again dependent on <code>SomeSingleton</code>.</p>\n"},{"tags":[],"owner":{"account_id":267053,"reputation":29704,"user_id":554988,"accept_rate":86,"display_name":"Garrett Hall"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1322182981,"creation_date":1322182981,"answer_id":8263919,"question_id":8256989,"body_markdown":"    its impossible to substitute a mock implementation for a singleton\r\n\r\nThis is not true.  You can subclass your singleton and setter inject a mock.  Alternatively, you can use [PowerMock][1] to mock static methods.  However the need to mock singletons can be symptomatic of poor design.\r\n\r\nThe real problem is Singletons when *abused* turn into **dependency magnets**.  Since they are accessible everywhere, it can *appear* more convenient to put the functions you need in them rather than delegating to an appropriate class, especially for programmers new to OOP.\r\n\r\nThe **testability problem** is now you have a bunch of Singletons that are accessed by your object under test.  Even though the object probably only uses a small fraction of methods in the Singletons, you still need to mock each Singleton and figure out which methods are depended on.  Singletons with a static state (Monostate pattern) are even worse because you can have to figure out which interactions between objects are affected by the Singleton&#39;s state.\r\n\r\nUsed carefully, Singletons and testability can occur together.  For instance, in absence of a DI framework, you can use Singletons as your Factories and ServiceLocators, which you can setter inject to create a fake service layer for your end-to-end tests.\r\n\r\n  [1]: http://code.google.com/p/powermock/","title":"Singleton and unit testing","body":"<pre><code>its impossible to substitute a mock implementation for a singleton\n</code></pre>\n\n<p>This is not true.  You can subclass your singleton and setter inject a mock.  Alternatively, you can use <a href=\"http://code.google.com/p/powermock/\" rel=\"nofollow\">PowerMock</a> to mock static methods.  However the need to mock singletons can be symptomatic of poor design.</p>\n\n<p>The real problem is Singletons when <em>abused</em> turn into <strong>dependency magnets</strong>.  Since they are accessible everywhere, it can <em>appear</em> more convenient to put the functions you need in them rather than delegating to an appropriate class, especially for programmers new to OOP.</p>\n\n<p>The <strong>testability problem</strong> is now you have a bunch of Singletons that are accessed by your object under test.  Even though the object probably only uses a small fraction of methods in the Singletons, you still need to mock each Singleton and figure out which methods are depended on.  Singletons with a static state (Monostate pattern) are even worse because you can have to figure out which interactions between objects are affected by the Singleton's state.</p>\n\n<p>Used carefully, Singletons and testability can occur together.  For instance, in absence of a DI framework, you can use Singletons as your Factories and ServiceLocators, which you can setter inject to create a fake service layer for your end-to-end tests.</p>\n"},{"comments":[{"owner":{"account_id":6288724,"reputation":676,"user_id":8568673,"display_name":"Jeredriq Demas"},"score":0,"creation_date":1546585530,"post_id":28028662,"comment_id":94904405,"body_markdown":"@TedEd Didnt work for me :( do you have any idea why it may be?","body":"@TedEd Didnt work for me :( do you have any idea why it may be?"},{"owner":{"account_id":8957502,"reputation":632,"user_id":6681300,"display_name":"SaadurRehman"},"score":0,"creation_date":1626331120,"post_id":28028662,"comment_id":120865083,"body_markdown":"@TedEd unit-testing-singletons link is dead","body":"@TedEd unit-testing-singletons link is dead"}],"tags":[],"owner":{"account_id":1275305,"reputation":621,"user_id":1230702,"display_name":"TedEd"},"comment_count":2,"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1683273837,"creation_date":1421683105,"answer_id":28028662,"question_id":8256989,"body_markdown":"You could use reflection to reset your singleton object to prevent tests from affecting each other.\r\n\r\n    @Before\r\n    public void resetSingleton() throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException {\r\n       Field instance = MySingleton.class.getDeclaredField(&quot;instance&quot;);\r\n       instance.setAccessible(true);\r\n       instance.set(null, null);\r\n    }\r\n\r\nRef: [unit-testing-singletons][1]\r\n\r\n\r\n  [1]: http://blog.davidehringer.com/testing/test-driven-development/unit-testing-singletons/","title":"Singleton and unit testing","body":"<p>You could use reflection to reset your singleton object to prevent tests from affecting each other.</p>\n<pre><code>@Before\npublic void resetSingleton() throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException {\n   Field instance = MySingleton.class.getDeclaredField(&quot;instance&quot;);\n   instance.setAccessible(true);\n   instance.set(null, null);\n}\n</code></pre>\n<p>Ref: <a href=\"http://blog.davidehringer.com/testing/test-driven-development/unit-testing-singletons/\" rel=\"nofollow noreferrer\">unit-testing-singletons</a></p>\n"},{"tags":[],"owner":{"account_id":1102537,"reputation":649,"user_id":1094623,"accept_rate":100,"display_name":"Tzafrir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523100980,"creation_date":1523100980,"answer_id":49706951,"question_id":8256989,"body_markdown":"The problem with singletons (and also with static methods) is that it makes it hard to replace the actual code with a mocked implementation.\r\n\r\nFor example consider the following code\r\n\r\n    public class TestMe() {\r\n      public String foo(String data) {\r\n        boolean isFeatureFlag = MySingletonConfig.getInstance().getFeatureFlag();\r\n        if (isFeatureFlag)\r\n          // do somethine with data\r\n        else\r\n          // do something else with the data\r\n         return result;\r\n      }\r\n    }\r\n\r\nIt is not easy to write a unit test for the foo method and verifying the correct behavior is performed.\r\nThis is because you can&#39;t easily change the return value of `getFeatureFlag`. \r\n\r\nThe same problem exists for static methods - it&#39;s not easy to replace the actual target class method with a mock behavior.\r\n\r\nSure, there are workarounds like [powermock][1], or dependency injection to the method, or reflection in tests.\r\nBut it is much better not to use singletons in the first place\r\n\r\n\r\n  [1]: https://github.com/powermock/powermock","title":"Singleton and unit testing","body":"<p>The problem with singletons (and also with static methods) is that it makes it hard to replace the actual code with a mocked implementation.</p>\n\n<p>For example consider the following code</p>\n\n<pre><code>public class TestMe() {\n  public String foo(String data) {\n    boolean isFeatureFlag = MySingletonConfig.getInstance().getFeatureFlag();\n    if (isFeatureFlag)\n      // do somethine with data\n    else\n      // do something else with the data\n     return result;\n  }\n}\n</code></pre>\n\n<p>It is not easy to write a unit test for the foo method and verifying the correct behavior is performed.\nThis is because you can't easily change the return value of <code>getFeatureFlag</code>. </p>\n\n<p>The same problem exists for static methods - it's not easy to replace the actual target class method with a mock behavior.</p>\n\n<p>Sure, there are workarounds like <a href=\"https://github.com/powermock/powermock\" rel=\"nofollow noreferrer\">powermock</a>, or dependency injection to the method, or reflection in tests.\nBut it is much better not to use singletons in the first place</p>\n"},{"tags":[],"owner":{"account_id":6499111,"reputation":906,"user_id":5030597,"display_name":"Kyrylo Semenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1525613485,"creation_date":1525613485,"answer_id":50200254,"question_id":8256989,"body_markdown":"It is possible, see [the example][1]\r\n\r\n    import static org.junit.Assert.assertEquals;\r\n    import static org.mockito.Mockito.atLeastOnce;\r\n    import static org.mockito.Mockito.mock;\r\n    import static org.mockito.Mockito.verify;\r\n    import static org.mockito.Mockito.when;\r\n\r\n    import java.lang.reflect.Field;\r\n\r\n    import org.junit.After;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n\r\n    public class DriverSnapshotHandlerTest {\r\n\r\n    private static final String MOCKED_URL = &quot;MockedURL&quot;;\r\n    private FormatterService formatter;\r\n    \r\n    @SuppressWarnings(&quot;javadoc&quot;)\r\n    @Before\r\n    public void setUp() {\r\n        formatter = mock(FormatterService.class);\r\n        setMock(formatter);\r\n        when(formatter.formatTachoIcon()).thenReturn(MOCKED_URL);\r\n    }\r\n    \r\n    /**\r\n     * Remove the mocked instance from the class. It is important, because other tests will be confused with the mocked instance.\r\n     * @throws Exception if the instance could not be accessible\r\n     */\r\n    @After\r\n    public void resetSingleton() throws Exception {\r\n       Field instance = FormatterService.class.getDeclaredField(&quot;instance&quot;);\r\n       instance.setAccessible(true);\r\n       instance.set(null, null);\r\n    }\r\n    \r\n    /**\r\n     * Set a mock to the {@link FormatterService} instance\r\n     * Throws {@link RuntimeException} in case if reflection failed, see a {@link Field#set(Object, Object)} method description.\r\n     * @param mock the mock to be inserted to a class\r\n     */\r\n    private void setMock(FormatterService mock) {\r\n        Field instance;\r\n        try {\r\n            instance = FormatterService.class.getDeclaredField(&quot;instance&quot;);\r\n            instance.setAccessible(true);\r\n            instance.set(instance, mock);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Test method for {@link com.example.DriverSnapshotHandler#getImageURL()}.\r\n     */\r\n    @Test\r\n    public void testFormatterServiceIsCalled() {\r\n        DriverSnapshotHandler handler = new DriverSnapshotHandler();\r\n        String url = handler.getImageURL();\r\n\r\n        verify(formatter, atLeastOnce()).formatTachoIcon();\r\n        assertEquals(MOCKED_URL, url);\r\n    }\r\n    \r\n    }\r\n\r\n\r\n\r\n  [1]: https://github.com/KyryloSemenko/staticFieldMock/blob/master/src/test/java/com/example/DriverSnapshotHandlerTest.java","title":"Singleton and unit testing","body":"<p>It is possible, see <a href=\"https://github.com/KyryloSemenko/staticFieldMock/blob/master/src/test/java/com/example/DriverSnapshotHandlerTest.java\" rel=\"nofollow noreferrer\">the example</a></p>\n\n<pre><code>import static org.junit.Assert.assertEquals;\nimport static org.mockito.Mockito.atLeastOnce;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.verify;\nimport static org.mockito.Mockito.when;\n\nimport java.lang.reflect.Field;\n\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\n\npublic class DriverSnapshotHandlerTest {\n\nprivate static final String MOCKED_URL = \"MockedURL\";\nprivate FormatterService formatter;\n\n@SuppressWarnings(\"javadoc\")\n@Before\npublic void setUp() {\n    formatter = mock(FormatterService.class);\n    setMock(formatter);\n    when(formatter.formatTachoIcon()).thenReturn(MOCKED_URL);\n}\n\n/**\n * Remove the mocked instance from the class. It is important, because other tests will be confused with the mocked instance.\n * @throws Exception if the instance could not be accessible\n */\n@After\npublic void resetSingleton() throws Exception {\n   Field instance = FormatterService.class.getDeclaredField(\"instance\");\n   instance.setAccessible(true);\n   instance.set(null, null);\n}\n\n/**\n * Set a mock to the {@link FormatterService} instance\n * Throws {@link RuntimeException} in case if reflection failed, see a {@link Field#set(Object, Object)} method description.\n * @param mock the mock to be inserted to a class\n */\nprivate void setMock(FormatterService mock) {\n    Field instance;\n    try {\n        instance = FormatterService.class.getDeclaredField(\"instance\");\n        instance.setAccessible(true);\n        instance.set(instance, mock);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n\n/**\n * Test method for {@link com.example.DriverSnapshotHandler#getImageURL()}.\n */\n@Test\npublic void testFormatterServiceIsCalled() {\n    DriverSnapshotHandler handler = new DriverSnapshotHandler();\n    String url = handler.getImageURL();\n\n    verify(formatter, atLeastOnce()).formatTachoIcon();\n    assertEquals(MOCKED_URL, url);\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2032265,"reputation":2081,"user_id":1815612,"display_name":"Yao Li"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568763047,"creation_date":1568763047,"answer_id":57983179,"question_id":8256989,"body_markdown":"Use PowerMock to mock Singleton class (SingletonClassHelper) instance and non-static method (nonStaticMethod) which is called in `task.execute()`.\r\n\r\n\r\n        import static org.mockito.Mockito.when;\r\n    \r\n        import org.junit.Before;\r\n        import org.junit.Test;\r\n        import org.junit.runner.RunWith;\r\n        import org.mockito.InjectMocks;\r\n        import org.mockito.Mock;\r\n        import org.mockito.Mockito;\r\n        import org.powermock.api.mockito.PowerMockito;\r\n        import org.powermock.core.classloader.annotations.PrepareForTest;\r\n        import org.powermock.modules.junit4.PowerMockRunner;\r\n    \r\n        @PrepareForTest({ SingletonClassHelper.class })\r\n        @RunWith(PowerMockRunner.class)\r\n        public class ClassToTest {\r\n        \t\r\n        \t@InjectMocks\r\n            Task task;\r\n        \t\r\n        \tprivate static final String TEST_PAYLOAD = &quot;data&quot;;\r\n        \tprivate SingletonClassHelper singletonClassHelper;\r\n        \t\r\n        \t\r\n        \t@Before\r\n        \tpublic void setUp() {\r\n        \t\tPowerMockito.mockStatic(SingletonClassHelper.class);\r\n        \t\tsingletonClassHelper = Mockito.mock(SingletonClassHelper.class);\r\n        \t\twhen(SingletonClassHelper.getInstance()).thenReturn(singletonClassHelper);\r\n        \t}\r\n        \r\n        \t@Test\r\n        \tpublic void test() {\r\n        \t\twhen(singletonClassHelper.nonStaticMethod(parameterA, parameterB, ...)).thenReturn(TEST_PAYLOAD);\r\n                task.execute();\r\n        \t}\r\n        }","title":"Singleton and unit testing","body":"<p>Use PowerMock to mock Singleton class (SingletonClassHelper) instance and non-static method (nonStaticMethod) which is called in <code>task.execute()</code>.</p>\n\n<pre><code>    import static org.mockito.Mockito.when;\n\n    import org.junit.Before;\n    import org.junit.Test;\n    import org.junit.runner.RunWith;\n    import org.mockito.InjectMocks;\n    import org.mockito.Mock;\n    import org.mockito.Mockito;\n    import org.powermock.api.mockito.PowerMockito;\n    import org.powermock.core.classloader.annotations.PrepareForTest;\n    import org.powermock.modules.junit4.PowerMockRunner;\n\n    @PrepareForTest({ SingletonClassHelper.class })\n    @RunWith(PowerMockRunner.class)\n    public class ClassToTest {\n\n        @InjectMocks\n        Task task;\n\n        private static final String TEST_PAYLOAD = \"data\";\n        private SingletonClassHelper singletonClassHelper;\n\n\n        @Before\n        public void setUp() {\n            PowerMockito.mockStatic(SingletonClassHelper.class);\n            singletonClassHelper = Mockito.mock(SingletonClassHelper.class);\n            when(SingletonClassHelper.getInstance()).thenReturn(singletonClassHelper);\n        }\n\n        @Test\n        public void test() {\n            when(singletonClassHelper.nonStaticMethod(parameterA, parameterB, ...)).thenReturn(TEST_PAYLOAD);\n            task.execute();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1177422,"reputation":2169,"user_id":1153071,"accept_rate":77,"display_name":"Ned Twigg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578973755,"creation_date":1578973755,"answer_id":59727292,"question_id":8256989,"body_markdown":"[durian-globals](https://github.com/diffplug/durian-globals) does [lazy double-locked initialization](https://github.com/diffplug/durian-globals/blob/cbc836cbfcd844f79cefe82387f529ebcc3cee44/durian-globals/src/main/java/com/diffplug/common/globals/Globals.java#L34-L46) of singletons, but also has a simple test-only API which allows you to replace the implementation for unit testing.","title":"Singleton and unit testing","body":"<p><a href=\"https://github.com/diffplug/durian-globals\" rel=\"nofollow noreferrer\">durian-globals</a> does <a href=\"https://github.com/diffplug/durian-globals/blob/cbc836cbfcd844f79cefe82387f529ebcc3cee44/durian-globals/src/main/java/com/diffplug/common/globals/Globals.java#L34-L46\" rel=\"nofollow noreferrer\">lazy double-locked initialization</a> of singletons, but also has a simple test-only API which allows you to replace the implementation for unit testing.</p>\n"},{"tags":[],"owner":{"account_id":3477700,"reputation":42367,"user_id":2910520,"accept_rate":100,"display_name":"MatPag"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628180555,"creation_date":1628175777,"answer_id":68669087,"question_id":8256989,"body_markdown":"Below there is the solution I had to adopt with some immutable Kotlin singleton to test them\r\n\r\nSuppose you have a singleton class like this:\r\n\r\n```kotlin\r\nclass MySingleton private constructor(\r\n  {your dependencies}\r\n) {\r\n  companion object {\r\n    @JvmStatic\r\n    private var INSTANCE: MySingleton? = null\r\n\r\n    @JvmStatic\r\n    fun getInstance(): MySingleton {\r\n      return INSTANCE ?: synchronized(this) {\r\n        INSTANCE ?: MySingleton(\r\n          {your dependencies}\r\n        ).also {\r\n          INSTANCE = it\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nYou can do this in your kotlin junit tests:\r\n\r\n```kotlin\r\n@After\r\nfun after() {\r\n  val instance = MySingleton.Companion::class.memberProperties.find {\r\n    it.name == &quot;INSTANCE&quot;\r\n  }\r\n  instance!!.isAccessible = true\r\n  instance.javaField!!.set(null, null)\r\n}\r\n```\r\nYou just need to add the `kotlin-reflect` artifact to your dependencies\r\n","title":"Singleton and unit testing","body":"<p>Below there is the solution I had to adopt with some immutable Kotlin singleton to test them</p>\n<p>Suppose you have a singleton class like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MySingleton private constructor(\n  {your dependencies}\n) {\n  companion object {\n    @JvmStatic\n    private var INSTANCE: MySingleton? = null\n\n    @JvmStatic\n    fun getInstance(): MySingleton {\n      return INSTANCE ?: synchronized(this) {\n        INSTANCE ?: MySingleton(\n          {your dependencies}\n        ).also {\n          INSTANCE = it\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>You can do this in your kotlin junit tests:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@After\nfun after() {\n  val instance = MySingleton.Companion::class.memberProperties.find {\n    it.name == &quot;INSTANCE&quot;\n  }\n  instance!!.isAccessible = true\n  instance.javaField!!.set(null, null)\n}\n</code></pre>\n<p>You just need to add the <code>kotlin-reflect</code> artifact to your dependencies</p>\n"},{"tags":[],"owner":{"account_id":5205027,"reputation":6298,"user_id":4163254,"accept_rate":86,"display_name":"avi.elkharrat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689800438,"creation_date":1689714326,"answer_id":76716554,"question_id":8256989,"body_markdown":"I do not believe there is a problem testing a class depending on a singleton.\r\n\r\nThe real problem is to instantiate a singleton (or any other class) within a class (typically in it&#39;s constructor) instead of injecting it.\r\n\r\nDependency injection allows you (among many other things) to mock whatever class, be it a singleton or else, and to inject the mock into it&#39;s client class. From there, class becomes testable.\r\n\r\nWhich makes it difficult to test the singleton __itself__! because it&#39;s components are, by construction, instantiated within the singleton and not injected in it.","title":"Singleton and unit testing","body":"<p>I do not believe there is a problem testing a class depending on a singleton.</p>\n<p>The real problem is to instantiate a singleton (or any other class) within a class (typically in it's constructor) instead of injecting it.</p>\n<p>Dependency injection allows you (among many other things) to mock whatever class, be it a singleton or else, and to inject the mock into it's client class. From there, class becomes testable.</p>\n<p>Which makes it difficult to test the singleton <strong>itself</strong>! because it's components are, by construction, instantiated within the singleton and not injected in it.</p>\n"}],"owner":{"account_id":462722,"reputation":6359,"user_id":865188,"accept_rate":44,"display_name":"user2434"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59340,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"answer_count":14,"score":54,"last_activity_date":1689800438,"creation_date":1322137433,"question_id":8256989,"body_markdown":"The Effective Java has the following statement on unit testing singletons\r\n\r\n&gt;Making a class a singleton can make it difficult to test its clients, as its impossible to substitute a mock implementation for a singleton unless it implements an interface that serves as its type.\r\n\r\nCan anyone explain the why this is so ?","title":"Singleton and unit testing","body":"<p>The Effective Java has the following statement on unit testing singletons</p>\n\n<blockquote>\n  <p>Making a class a singleton can make it difficult to test its clients, as its impossible to substitute a mock implementation for a singleton unless it implements an interface that serves as its type.</p>\n</blockquote>\n\n<p>Can anyone explain the why this is so ?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":5715956,"reputation":2481,"user_id":4516144,"display_name":"Kane O&#39;Riley"},"score":1,"creation_date":1442133410,"post_id":32546671,"comment_id":52951887,"body_markdown":"I think what you want is `Resources.getIdentifier()`, but its unclear from your question","body":"I think what you want is <code>Resources.getIdentifier()</code>, but its unclear from your question"}],"answers":[{"tags":[],"owner":{"account_id":2294849,"reputation":332016,"user_id":2016562,"accept_rate":92,"display_name":"Gabriele Mariotti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1442131467,"creation_date":1442131467,"answer_id":32547599,"question_id":32546671,"body_markdown":"What you are asking is completely wrong.\r\n\r\n`&quot;R.id.id&quot;` is a `String` that **can&#39;t be converted** in a int.\r\n\r\nIt will always throw a `NumberFormatException` .\r\n\r\nCheck the [javadoc][1]:\r\n\r\n&gt;Parses the string argument as a signed decimal integer. The characters in the string must all be decimal digits, except that the first character may be an ASCII minus sign &#39;-&#39; (&#39;\\u002D&#39;) to indicate a negative value or an ASCII plus sign &#39;+&#39; (&#39;\\u002B&#39;) to indicate a positive value. The resulting integer value is returned, exactly as if the argument and the radix 10 were given as arguments to the parseInt(java.lang.String, int) method.\r\n\r\nIf the resource used in your `strings.xml` with the same `id` is a integer, you have to use somenthing different:\r\n\r\n    &lt;resources&gt;\r\n        &lt;string name=&quot;mystring&quot;&gt;12&lt;/string&gt;\r\n    &lt;/resources&gt;\r\n\r\nUse this code to retrieve a string:\r\n\r\n    String string = getString(R.string.mystring);\r\n    \r\n    try{\r\n       int number = Integer.parseInt(string);\r\n    } catch (NumberFormatException nfe){\r\n      //.....\r\n    }\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String)","title":"android studio how to convert string with id to int?","body":"<p>What you are asking is completely wrong.</p>\n\n<p><code>\"R.id.id\"</code> is a <code>String</code> that <strong>can't be converted</strong> in a int.</p>\n\n<p>It will always throw a <code>NumberFormatException</code> .</p>\n\n<p>Check the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String)\" rel=\"nofollow\">javadoc</a>:</p>\n\n<blockquote>\n  <p>Parses the string argument as a signed decimal integer. The characters in the string must all be decimal digits, except that the first character may be an ASCII minus sign '-' ('\\u002D') to indicate a negative value or an ASCII plus sign '+' ('\\u002B') to indicate a positive value. The resulting integer value is returned, exactly as if the argument and the radix 10 were given as arguments to the parseInt(java.lang.String, int) method.</p>\n</blockquote>\n\n<p>If the resource used in your <code>strings.xml</code> with the same <code>id</code> is a integer, you have to use somenthing different:</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;string name=\"mystring\"&gt;12&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>Use this code to retrieve a string:</p>\n\n<pre><code>String string = getString(R.string.mystring);\n\ntry{\n   int number = Integer.parseInt(string);\n} catch (NumberFormatException nfe){\n  //.....\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6535921,"reputation":6578,"user_id":5055401,"accept_rate":75,"display_name":"Inzimam Tariq IT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442300324,"creation_date":1442300324,"answer_id":32579655,"question_id":32546671,"body_markdown":"`String` that consists of other than numeric values can not be converted to `int` or into any of the numeric data types. However if a string hold numeric value then you can convert it into `int` or other numeric data types. And the reason for it is every `programming language` has its `syntax` defined, if you want to assign value through character You can do as\r\n\r\n    int variableName = &#39;a&#39;;\r\n    or\r\n    int variableName = &#39;b&#39;;\r\netc. this is spacial numeric assigning in java `&#39;a&#39;` equals `97` &amp; `&#39;b&#39;` equals `98`.\r\n\r\nOr if a string hold numeric value you can convert it as\r\n\r\n    &lt;resources&gt;\r\n        &lt;string name=&quot;stringVal&quot;&gt;500&lt;/string&gt;\r\n    &lt;/resources&gt;\r\n\r\nget like this\r\n\r\n    String string = getString(R.string.stringVal);\r\n    \r\n    \r\n       int anyName= Integer.parseInt(string);\r\n   ","title":"android studio how to convert string with id to int?","body":"<p><code>String</code> that consists of other than numeric values can not be converted to <code>int</code> or into any of the numeric data types. However if a string hold numeric value then you can convert it into <code>int</code> or other numeric data types. And the reason for it is every <code>programming language</code> has its <code>syntax</code> defined, if you want to assign value through character You can do as</p>\n\n<pre><code>int variableName = 'a';\nor\nint variableName = 'b';\n</code></pre>\n\n<p>etc. this is spacial numeric assigning in java <code>'a'</code> equals <code>97</code> &amp; <code>'b'</code> equals <code>98</code>.</p>\n\n<p>Or if a string hold numeric value you can convert it as</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;string name=\"stringVal\"&gt;500&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>get like this</p>\n\n<pre><code>String string = getString(R.string.stringVal);\n\n\n   int anyName= Integer.parseInt(string);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3446000,"reputation":435,"user_id":2886813,"display_name":"Samwise Ganges"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689799956,"creation_date":1689799956,"answer_id":76725129,"question_id":32546671,"body_markdown":"I had the same thought and unfortunately there isn&#39;t really any way to do what you&#39;re asking (start with a string, and convert it to an integer ID that you can use with findViewById).\r\n\r\nAs others have mentioned, there is [Resources.getIdentifier()][1] but that doesn&#39;t take in a string as an argument. It doesn&#39;t take any arguments, it just spits out an integer that&#39;s not tied to anything else. You can of course store that integer in a variable but you won&#39;t know what it is ahead of time. You can also look into View Tags which let you add custom tags to views. \r\n\r\n  [1]: https://developer.android.com/reference/android/content/res/Resources#getIdentifier(java.lang.String,%20java.lang.String,%20java.lang.String)","title":"android studio how to convert string with id to int?","body":"<p>I had the same thought and unfortunately there isn't really any way to do what you're asking (start with a string, and convert it to an integer ID that you can use with findViewById).</p>\n<p>As others have mentioned, there is <a href=\"https://developer.android.com/reference/android/content/res/Resources#getIdentifier(java.lang.String,%20java.lang.String,%20java.lang.String)\" rel=\"nofollow noreferrer\">Resources.getIdentifier()</a> but that doesn't take in a string as an argument. It doesn't take any arguments, it just spits out an integer that's not tied to anything else. You can of course store that integer in a variable but you won't know what it is ahead of time. You can also look into View Tags which let you add custom tags to views.</p>\n"}],"owner":{"account_id":6938490,"reputation":53,"user_id":5325677,"display_name":"itay azaria"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2750,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":32547599,"answer_count":3,"score":2,"last_activity_date":1689799956,"creation_date":1442122533,"question_id":32546671,"body_markdown":"Is there any way to convert string with id (for example: `String id = &quot;R.id.id&quot;` ) to int?\r\n\r\nI have tried this:\r\n\r\n    String st = &quot;R.id.id&quot;;\r\n    int id = Integer.parseInt(st);\r\n\r\nBut it didn&#39;t work.\r\n\r\nThanks for help!","title":"android studio how to convert string with id to int?","body":"<p>Is there any way to convert string with id (for example: <code>String id = \"R.id.id\"</code> ) to int?</p>\n\n<p>I have tried this:</p>\n\n<pre><code>String st = \"R.id.id\";\nint id = Integer.parseInt(st);\n</code></pre>\n\n<p>But it didn't work.</p>\n\n<p>Thanks for help!</p>\n"},{"tags":["java","android","butterknife"],"comments":[{"owner":{"account_id":12721843,"reputation":16013,"user_id":9241978,"display_name":"Pawel"},"score":0,"creation_date":1689807112,"post_id":76725068,"comment_id":135267518,"body_markdown":"Butterknife is a deprecated library that has not received updates for years and now AGP 8 brings changes that literally break it. Recommended approach is to migrate to up to date solution aka jetpack ViewBinding.","body":"Butterknife is a deprecated library that has not received updates for years and now AGP 8 brings changes that literally break it. Recommended approach is to migrate to up to date solution aka jetpack ViewBinding."},{"owner":{"account_id":10272415,"reputation":21,"user_id":7580411,"display_name":"Boot Re"},"score":0,"creation_date":1690090654,"post_id":76725068,"comment_id":135302959,"body_markdown":"@Pawel Thank you i&#39;ll migrate to jetpack ViewBinding.","body":"@Pawel Thank you i&#39;ll migrate to jetpack ViewBinding."},{"owner":{"account_id":14943891,"reputation":1727,"user_id":10789722,"display_name":"MEGHA RAMOLIYA"},"score":0,"creation_date":1690867217,"post_id":76725068,"comment_id":135408977,"body_markdown":"@BootRe Really it works for me and thanks a lot for solution.","body":"@BootRe Really it works for me and thanks a lot for solution."}],"owner":{"account_id":10272415,"reputation":21,"user_id":7580411,"display_name":"Boot Re"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":279,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689799401,"creation_date":1689799401,"question_id":76725068,"body_markdown":"I update android studio.\r\nI ran the project as usual.\r\n\r\nIn my project I use butterknife library.\r\n\r\nWhen building the project, I got this error.\r\n\r\n```\r\nCause: superclass access check failed: class butterknife.compiler.ButterKnifeProcessor$RScanner (in unnamed module @0x46be592) cannot access class com.sun.tools.javac.tree.TreeScanner (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.tree to unnamed module @0x46be592\r\n```\r\n\r\nAnd while I was looking for a solution,\r\nhttps://stackoverflow.com/questions/76216854/butterknife-issue-after-updating-to-latest-version-of-android-studio-with-lates\r\n\r\nfound the article,\r\n\r\nin the android section of the app-level build.gradle code\r\n\r\n```\r\nandroid\r\n    {\r\n     tasks.withType(JavaCompile).configureEach {\r\n     options.fork = true\r\n     options.forkOptions.jvmArgs += [\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED&#39;,\r\n     ]\r\n      \r\n}\r\n```\r\n\r\nWhen I added the following, the project built normally like a lie.\r\n\r\nHowever, I understand that this approach is a kind of hacky approach.\r\n\r\nIs there a normal approach besides these approaches?\r\n\r\nthank you","title":"Butterknife issue that occurred when Android Studio was updated to the latest version and jdk was upgraded","body":"<p>I update android studio.\nI ran the project as usual.</p>\n<p>In my project I use butterknife library.</p>\n<p>When building the project, I got this error.</p>\n<pre><code>Cause: superclass access check failed: class butterknife.compiler.ButterKnifeProcessor$RScanner (in unnamed module @0x46be592) cannot access class com.sun.tools.javac.tree.TreeScanner (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.tree to unnamed module @0x46be592\n</code></pre>\n<p>And while I was looking for a solution,\n<a href=\"https://stackoverflow.com/questions/76216854/butterknife-issue-after-updating-to-latest-version-of-android-studio-with-lates\">butterknife issue, after updating to latest version of android studio with latest gradle plugin</a></p>\n<p>found the article,</p>\n<p>in the android section of the app-level build.gradle code</p>\n<pre><code>android\n    {\n     tasks.withType(JavaCompile).configureEach {\n     options.fork = true\n     options.forkOptions.jvmArgs += [\n     '--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED',\n     ]\n      \n}\n</code></pre>\n<p>When I added the following, the project built normally like a lie.</p>\n<p>However, I understand that this approach is a kind of hacky approach.</p>\n<p>Is there a normal approach besides these approaches?</p>\n<p>thank you</p>\n"},{"tags":["java","android","android-studio","pdfview","androidpdfviewer"],"owner":{"account_id":17550827,"reputation":1,"user_id":12731263,"display_name":"Mujtaba Ishaq Naqvi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689798792,"creation_date":1689798792,"question_id":76724994,"body_markdown":"I want to handle links in my pdf but .linkHandler method is not working and giving me errors that it should be renamed but according to library, I&#39;m using this correctly.\r\n\r\nHave a look at the code\r\n\r\n```\r\n   PDFView pdfView = findViewById(R.id.pdfView);\r\n        pdfView.fromAsset(&quot;YEK.pdf&quot;)\r\n                .defaultPage(0)\r\n                .enableSwipe(true)\r\n                .swipeHorizontal(false)\r\n                .enableDoubletap(true)\r\n                .onLoad(new OnLoadCompleteListener() {\r\n                    @Override\r\n                    public void loadComplete(int nbPages) {\r\n                        // PDF loaded successfully\r\n                    }\r\n                })\r\n                .load();\r\n\r\n        pdfView.fromAsset(&quot;YEK.pdf&quot;)\r\n                .defaultPage(0)\r\n                .enableSwipe(true)\r\n                .swipeHorizontal(false)\r\n                .enableDoubletap(true)\r\n                .onLoad(new OnLoadCompleteListener() {\r\n                    @Override\r\n                    public void loadComplete(int nbPages) {\r\n                        // PDF loaded successfully\r\n                    }\r\n                })\r\n                .onPageChange(new OnPageChangeListener() {\r\n                    @Override\r\n                    public void onPageChanged(int page, int pageCount) {\r\n                        // Page changed\r\n                    }\r\n                })\r\n                .onPageError(new OnPageErrorListener() {\r\n                    @Override\r\n                    public void onPageError(int page, Throwable t) {\r\n                        // Error occurred while loading page\r\n                    }\r\n                })\r\n                .onRender(new OnRenderListener() {\r\n                    @Override\r\n                    public void onInitiallyRendered(int nbPages) {\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onInitiallyRendered(int nbPages, float pageWidth, float pageHeight) {\r\n                        // PDF rendered successfully\r\n                        pdfView.enableAnnotationRendering(true);\r\n                        pdfView.linkHandler(new DefaultLinkHandler(pdfView));\r\n                    }\r\n                })\r\n                .load();\r\n\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nI am using to write a pdfreader app. And the pdf which I&#39;m using in the app has embedded links. I want to handle that links but this is not working. Android studio is the IDE &#39;m using.\r\n\r\nHere is the implementation for the library in *build.gradle*\r\n\r\n`implementation &#39;com.github.barteksc:android-pdf-viewer:3.2.0-beta.1&#39;`","title":"I&#39;m facing a problem with using pdfviewer library to handle links in the PDF","body":"<p>I want to handle links in my pdf but .linkHandler method is not working and giving me errors that it should be renamed but according to library, I'm using this correctly.</p>\n<p>Have a look at the code</p>\n<pre><code>   PDFView pdfView = findViewById(R.id.pdfView);\n        pdfView.fromAsset(&quot;YEK.pdf&quot;)\n                .defaultPage(0)\n                .enableSwipe(true)\n                .swipeHorizontal(false)\n                .enableDoubletap(true)\n                .onLoad(new OnLoadCompleteListener() {\n                    @Override\n                    public void loadComplete(int nbPages) {\n                        // PDF loaded successfully\n                    }\n                })\n                .load();\n\n        pdfView.fromAsset(&quot;YEK.pdf&quot;)\n                .defaultPage(0)\n                .enableSwipe(true)\n                .swipeHorizontal(false)\n                .enableDoubletap(true)\n                .onLoad(new OnLoadCompleteListener() {\n                    @Override\n                    public void loadComplete(int nbPages) {\n                        // PDF loaded successfully\n                    }\n                })\n                .onPageChange(new OnPageChangeListener() {\n                    @Override\n                    public void onPageChanged(int page, int pageCount) {\n                        // Page changed\n                    }\n                })\n                .onPageError(new OnPageErrorListener() {\n                    @Override\n                    public void onPageError(int page, Throwable t) {\n                        // Error occurred while loading page\n                    }\n                })\n                .onRender(new OnRenderListener() {\n                    @Override\n                    public void onInitiallyRendered(int nbPages) {\n\n                    }\n\n                    @Override\n                    public void onInitiallyRendered(int nbPages, float pageWidth, float pageHeight) {\n                        // PDF rendered successfully\n                        pdfView.enableAnnotationRendering(true);\n                        pdfView.linkHandler(new DefaultLinkHandler(pdfView));\n                    }\n                })\n                .load();\n\n\n\n    }\n}\n</code></pre>\n<p>I am using to write a pdfreader app. And the pdf which I'm using in the app has embedded links. I want to handle that links but this is not working. Android studio is the IDE 'm using.</p>\n<p>Here is the implementation for the library in <em>build.gradle</em></p>\n<p><code>implementation 'com.github.barteksc:android-pdf-viewer:3.2.0-beta.1'</code></p>\n"},{"tags":["java","single-sign-on","saml-2.0","opensaml"],"answers":[{"comments":[{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1413887055,"post_id":26484180,"comment_id":41603463,"body_markdown":"OK. So I can hard code the XML String as in other example as SAML assertion. That I don&#39;t need to sign. Then how can I validate it? I haven&#39;t stored any certificate in keystore.","body":"OK. So I can hard code the XML String as in other example as SAML assertion. That I don&#39;t need to sign. Then how can I validate it? I haven&#39;t stored any certificate in keystore."},{"owner":{"account_id":119270,"reputation":5485,"user_id":310852,"accept_rate":59,"display_name":"Stefan Rasmusson"},"score":0,"creation_date":1413891044,"post_id":26484180,"comment_id":41605617,"body_markdown":"I dont what the XML string is. you validate using a certifcate. This you can get from a file or from the SAML metadata","body":"I dont what the XML string is. you validate using a certifcate. This you can get from a file or from the SAML metadata"},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1413891581,"post_id":26484180,"comment_id":41605905,"body_markdown":"Please see the **Update 1**. The assertion I copied from other SO question. How to validate? Do I need to install a certificate before validating?","body":"Please see the <b>Update 1</b>. The assertion I copied from other SO question. How to validate? Do I need to install a certificate before validating?"},{"owner":{"account_id":119270,"reputation":5485,"user_id":310852,"accept_rate":59,"display_name":"Stefan Rasmusson"},"score":0,"creation_date":1413891776,"post_id":26484180,"comment_id":41606021,"body_markdown":"Well the Assertion you posted is not signed so you do nt need to validate. You will need the certificate. How it is used of if you need to install it depends on the software you use.","body":"Well the Assertion you posted is not signed so you do nt need to validate. You will need the certificate. How it is used of if you need to install it depends on the software you use."},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1413892033,"post_id":26484180,"comment_id":41606189,"body_markdown":"Sorry  don&#39;t get it. I am not using any software.","body":"Sorry  don&#39;t get it. I am not using any software."},{"owner":{"account_id":119270,"reputation":5485,"user_id":310852,"accept_rate":59,"display_name":"Stefan Rasmusson"},"score":0,"creation_date":1413894093,"post_id":26484180,"comment_id":41607377,"body_markdown":"You need some code or software to do validation. if you start using OpenSAML you cna use the link I provided in my answere","body":"You need some code or software to do validation. if you start using OpenSAML you cna use the link I provided in my answere"},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1413894317,"post_id":26484180,"comment_id":41607522,"body_markdown":"Ok. But first I need to install Certificate right? I have a sample certificate I downloaded with extension **.cer** . Is there any link or sample code on how tp store that in keystore and update public key so that I can validate it against the SAML assertion and then get attributes like user-id and email?","body":"Ok. But first I need to install Certificate right? I have a sample certificate I downloaded with extension <b>.cer</b> . Is there any link or sample code on how tp store that in keystore and update public key so that I can validate it against the SAML assertion and then get attributes like user-id and email?"}],"tags":[],"owner":{"account_id":119270,"reputation":5485,"user_id":310852,"accept_rate":59,"display_name":"Stefan Rasmusson"},"comment_count":7,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1689798408,"creation_date":1413886298,"answer_id":26484180,"question_id":26482902,"body_markdown":"The first thing you need to do is to read up on the SAML protocol. I have two blogs I can recommend.\r\n\r\n- [Intro to SAML][1] \r\n\r\n- [Intro to the Web Profile][2]\r\n\r\nNext you can choose to build the SAML integration in your app or you can use a third party application to do the integration. Typical third party applications are [Shibboleth][3] and [OpenAM][4].\r\n\r\nIf you decide to build it in to your application, you can for example use OpenSAML. OpenSAML is a library that helps to work with SAML messages. [I have several blogs on the subject][5] and [one book that is good to start with][6] \r\n\r\nAbout your questions. \r\n\r\n1. You don&#39;t need to send a request. The IDP can start the process without a request.\r\n2. Well you can create one just by editing the one that you found. You can also use OpenSAML to create the assertion\r\n3. You do not sign the response in your application, the IDP signs the response. The signature verification depends on the software. [Here is how you do it in OpenSAML][7] \r\n\r\n\r\n  [1]: https://blog.samlsecurity.com/2010/11/short-introduction-to-saml.html\r\n  [2]: https://blog.samlsecurity.com/2012/05/saml-web-profile.html\r\n  [3]: http://www.internet2.edu/products-services/trust-identity-middleware/shibboleth/\r\n  [4]: http://forgerock.com/products/open-identity-stack/openam/\r\n  [5]: https://blog.samlsecurity.com/categories/opensaml/\r\n  [6]: https://blog.samlsecurity.com/a-guide-to-opensamlv3.html\r\n  [7]: https://blog.samlsecurity.com/2012/11/verifying-signatures-with-opensaml.html","title":"Create SAML Assertion and Sign the response","body":"<p>The first thing you need to do is to read up on the SAML protocol. I have two blogs I can recommend.</p>\n<ul>\n<li><p><a href=\"https://blog.samlsecurity.com/2010/11/short-introduction-to-saml.html\" rel=\"nofollow noreferrer\">Intro to SAML</a></p>\n</li>\n<li><p><a href=\"https://blog.samlsecurity.com/2012/05/saml-web-profile.html\" rel=\"nofollow noreferrer\">Intro to the Web Profile</a></p>\n</li>\n</ul>\n<p>Next you can choose to build the SAML integration in your app or you can use a third party application to do the integration. Typical third party applications are <a href=\"http://www.internet2.edu/products-services/trust-identity-middleware/shibboleth/\" rel=\"nofollow noreferrer\">Shibboleth</a> and <a href=\"http://forgerock.com/products/open-identity-stack/openam/\" rel=\"nofollow noreferrer\">OpenAM</a>.</p>\n<p>If you decide to build it in to your application, you can for example use OpenSAML. OpenSAML is a library that helps to work with SAML messages. <a href=\"https://blog.samlsecurity.com/categories/opensaml/\" rel=\"nofollow noreferrer\">I have several blogs on the subject</a> and <a href=\"https://blog.samlsecurity.com/a-guide-to-opensamlv3.html\" rel=\"nofollow noreferrer\">one book that is good to start with</a></p>\n<p>About your questions.</p>\n<ol>\n<li>You don't need to send a request. The IDP can start the process without a request.</li>\n<li>Well you can create one just by editing the one that you found. You can also use OpenSAML to create the assertion</li>\n<li>You do not sign the response in your application, the IDP signs the response. The signature verification depends on the software. <a href=\"https://blog.samlsecurity.com/2012/11/verifying-signatures-with-opensaml.html\" rel=\"nofollow noreferrer\">Here is how you do it in OpenSAML</a></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":5236921,"reputation":1452,"user_id":4185221,"display_name":"Sunil Dabburi"},"score":0,"creation_date":1540396525,"post_id":46000524,"comment_id":92852959,"body_markdown":"Wow! Great answer :)","body":"Wow! Great answer :)"}],"tags":[],"owner":{"account_id":294592,"reputation":733,"user_id":598573,"accept_rate":40,"display_name":"shimon001"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1504269769,"creation_date":1504269769,"answer_id":46000524,"question_id":26482902,"body_markdown":"You can also use [Java Saml from Onelogin][1] to sign the response using their utility class (com.onelogin.saml2.util.Util): \r\n\r\n    // loads xml string into Document\r\n    Document document = Util.loadXML(saml);\r\n\r\n    // loads certificate and private key from string\r\n\tX509Certificate cert = Util.loadCert(pubKeyBytes);\r\n\tPrivateKey privateKey = Util.loadPrivateKey(privKeyBytes);\r\n\r\n    // signs the response\r\n\tString signedResponse = Util.addSign(document, privateKey, cert, null);\r\n\r\nYou can also use another `.addSign` method that takes `Node` as first parameter to sign the assertion of the SAML response.\r\n\r\nTheir Maven dependency is:\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.onelogin&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;java-saml&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.0.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n  [1]: https://github.com/onelogin/java-saml","title":"Create SAML Assertion and Sign the response","body":"<p>You can also use <a href=\"https://github.com/onelogin/java-saml\" rel=\"noreferrer\">Java Saml from Onelogin</a> to sign the response using their utility class (com.onelogin.saml2.util.Util): </p>\n\n<pre><code>// loads xml string into Document\nDocument document = Util.loadXML(saml);\n\n// loads certificate and private key from string\nX509Certificate cert = Util.loadCert(pubKeyBytes);\nPrivateKey privateKey = Util.loadPrivateKey(privKeyBytes);\n\n// signs the response\nString signedResponse = Util.addSign(document, privateKey, cert, null);\n</code></pre>\n\n<p>You can also use another <code>.addSign</code> method that takes <code>Node</code> as first parameter to sign the assertion of the SAML response.</p>\n\n<p>Their Maven dependency is:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.onelogin&lt;/groupId&gt;\n    &lt;artifactId&gt;java-saml&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"display_name":"user2094311"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36812,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1689798408,"creation_date":1413882461,"question_id":26482902,"body_markdown":"I have a Java web application. I want to implement SAML Single-Sign-On login for my application. I have got this [GitHub onelogin program][1] to send request and get response. But it was not working properly. I created one account there. But I don&#39;t have an enterprise account. When I run the application, it is going to [onelogin login][2] page. I tried to login, but it is not returning anyuthing in the response, showing I don&#39;t have permission. If I provide wrong credentials also, it is not giving any SAML response.\r\n\r\nSo I decided to create an assertion and sign it. \r\n\r\n1. Do I need to send a SAML request to any identity provider first?\r\n2. How to create a sample SAML assertion instead of going to IdP([Like this is fine?][3])\r\n3. Once I get the SAML response, how do I sign it in my application and proceed? \r\n\r\nThanks\r\n\r\n**UPDATE 1**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;samlp:Response xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;\r\n      ID=&quot;123&quot; InResponseTo=&quot;abc&quot; IssueInstant=&quot;2014-11-21T17:13:42.872Z&quot; \r\n      Version=&quot;2.0&quot;&gt;\r\n        &lt;samlp:Status&gt;\r\n            &lt;samlp:StatusCode Value=&quot;urn:oasis:names:tc:SAML:2.0:status:Success&quot;/&gt;\r\n        &lt;/samlp:Status&gt;\r\n        &lt;saml:Assertion xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot; Version=&quot;2.0&quot;&gt;\r\n            &lt;saml:Subject&gt;\r\n                &lt;saml:NameID Format=&quot;urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress&quot;&gt;\r\n                    user@example.com\r\n                &lt;/saml:NameID&gt;\r\n            &lt;/saml:Subject&gt;\r\n            &lt;saml:AuthnStatement AuthnInstant=&quot;2014-11-21T17:13:42.899Z&quot;&gt;\r\n                &lt;saml:AuthnContext&gt;\r\n                    &lt;saml:AuthnContextClassRef&gt;\r\n                        urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport\r\n                    &lt;/saml:AuthnContextClassRef&gt;\r\n                &lt;/saml:AuthnContext&gt;\r\n            &lt;/saml:AuthnStatement&gt;\r\n        &lt;/saml:Assertion&gt;\r\n    &lt;/samlp:Response&gt;\r\n\r\n  [1]: https://github.com/onelogin/java-saml\r\n  [2]: https://app.onelogin.com/login\r\n  [3]: https://stackoverflow.com/questions/384851/looking-for-feedback-on-a-first-saml-implementation","title":"Create SAML Assertion and Sign the response","body":"<p>I have a Java web application. I want to implement SAML Single-Sign-On login for my application. I have got this <a href=\"https://github.com/onelogin/java-saml\" rel=\"nofollow noreferrer\">GitHub onelogin program</a> to send request and get response. But it was not working properly. I created one account there. But I don't have an enterprise account. When I run the application, it is going to <a href=\"https://app.onelogin.com/login\" rel=\"nofollow noreferrer\">onelogin login</a> page. I tried to login, but it is not returning anyuthing in the response, showing I don't have permission. If I provide wrong credentials also, it is not giving any SAML response.</p>\n\n<p>So I decided to create an assertion and sign it. </p>\n\n<ol>\n<li>Do I need to send a SAML request to any identity provider first?</li>\n<li>How to create a sample SAML assertion instead of going to IdP(<a href=\"https://stackoverflow.com/questions/384851/looking-for-feedback-on-a-first-saml-implementation\">Like this is fine?</a>)</li>\n<li>Once I get the SAML response, how do I sign it in my application and proceed? </li>\n</ol>\n\n<p>Thanks</p>\n\n<p><strong>UPDATE 1</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;samlp:Response xmlns:samlp=\"urn:oasis:names:tc:SAML:2.0:protocol\"\n  ID=\"123\" InResponseTo=\"abc\" IssueInstant=\"2014-11-21T17:13:42.872Z\" \n  Version=\"2.0\"&gt;\n    &lt;samlp:Status&gt;\n        &lt;samlp:StatusCode Value=\"urn:oasis:names:tc:SAML:2.0:status:Success\"/&gt;\n    &lt;/samlp:Status&gt;\n    &lt;saml:Assertion xmlns:saml=\"urn:oasis:names:tc:SAML:2.0:assertion\" Version=\"2.0\"&gt;\n        &lt;saml:Subject&gt;\n            &lt;saml:NameID Format=\"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress\"&gt;\n                user@example.com\n            &lt;/saml:NameID&gt;\n        &lt;/saml:Subject&gt;\n        &lt;saml:AuthnStatement AuthnInstant=\"2014-11-21T17:13:42.899Z\"&gt;\n            &lt;saml:AuthnContext&gt;\n                &lt;saml:AuthnContextClassRef&gt;\n                    urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport\n                &lt;/saml:AuthnContextClassRef&gt;\n            &lt;/saml:AuthnContext&gt;\n        &lt;/saml:AuthnStatement&gt;\n    &lt;/saml:Assertion&gt;\n&lt;/samlp:Response&gt;\n</code></pre>\n"},{"tags":["java","rest","https","multipartform-data","boomi"],"owner":{"account_id":21568257,"reputation":1,"user_id":15901534,"display_name":"smet Cokun &#214;zkaran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689798396,"creation_date":1689791247,"question_id":76724266,"body_markdown":"I am trying to post an employee data to a client API and my post request does not reach to related API and I get a response like below. And also I have tried to post my request via an integration platform called Dell Boomi. Also my request doesn&#39;t have an empty field and all fields related to method are filled with data. \r\n\r\n&gt; {&quot;type&quot;:&quot;https://tools.ietf.org/html/rfc7231#section-6.5.1&quot;,&quot;title&quot;:&quot;One or more validation errors occurred.&quot;,&quot;status&quot;:400,&quot;traceId&quot;:&quot;00-26ae8fec464638bc5764c2ad82af50b4-5cb4f78ff28030ac-00&quot;,&quot;errors&quot;:{&quot;&quot;:[&quot;Failed to read the request form. Unexpected end of Stream, the content may have already been read by another component. &quot;]}}\r\n\r\n```\r\nimport java.util.Properties;\r\nimport java.io.InputStream;\r\nimport com.boomi.execution.ExecutionUtil;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport org.apache.http.client.ClientProtocolException;\r\nimport org.apache.http.client.HttpClient;\r\nimport org.apache.http.client.methods.HttpPost;\r\nimport org.apache.http.entity.ByteArrayEntity;\r\nimport org.apache.http.impl.client.HttpClientBuilder;\r\nimport org.apache.commons.net.util.Base64;\r\nimport org.apache.http.HttpEntity;\r\nimport org.apache.http.HttpResponse;\r\nimport org.apache.http.HttpHost;\r\nimport org.apache.http.ssl.SSLContextBuilder;\r\nimport org.apache.http.client.methods.HttpRequestBase;\r\nimport com.boomi.component.CertificateFactory as BoomiCertificateFactory;\r\nimport javax.net.ssl.SSLContext;\r\nimport com.boomi.execution.ExecutionManager;\r\nimport com.boomi.execution.ExecutionTask;\r\nimport org.apache.http.client.config.RequestConfig;\r\nimport org.apache.http.client.config.RequestConfig.Builder;\r\nimport java.io.ByteArrayOutputStream;\r\n\r\n\r\nExecutionTask task = ExecutionManager.current;\r\nSSLContext sslContextBoomi = BoomiCertificateFactory.getInstance(task.accountConfig).createSSLContext();\r\n\r\nString url =  ExecutionUtil.getDynamicProcessProperty(&quot;url&quot;);\r\n//String soapAction = ExecutionUtil.getDynamicProcessProperty(&quot;soapAction&quot;);\r\n//String userName =  ExecutionUtil.getDynamicProcessProperty(&quot;UserName&quot;);\r\n//String password =  ExecutionUtil.getDynamicProcessProperty(&quot;Password&quot;);\r\n//String token =  ExecutionUtil.getDynamicProcessProperty(&quot;token&quot;);\r\n\r\n//HttpHost proxy = new HttpHost(&quot;10.1.70.115&quot;, 8080, &quot;http&quot;);\r\n\r\n\r\nfor( int i = 0; i &lt; dataContext.getDataCount(); i++ ) {\r\n    InputStream is = dataContext.getStream(i);\r\n    Properties props = dataContext.getProperties(i);\r\n    logger = ExecutionUtil.getBaseLogger();\r\n    \r\n    ByteArrayOutputSt`your text`ream buffer = new ByteArrayOutputStream();\r\n    int nRead;\r\n    byte[] data = new byte[1024];\r\n    while ((nRead = is.read(data, 0, data.length)) != -1) {\r\n        buffer.write(data, 0, nRead);\r\n    }\t\t \r\n    buffer.flush();\r\n    byte[] byteArray = buffer.toByteArray();\r\n    \r\n    HttpPost httpPostRequest = new HttpPost(url);\r\n    HttpClient client = createHttpClient(httpPostRequest,sslContextBoomi);\r\n    \r\n   //if( !&quot;&quot;.equals(userName) &amp;&amp;  !&quot;&quot;.equals(password)) {\t\t\t\t\t\r\n\t//\tString userPassword = userName + &quot;:&quot; + password;\r\n\t//\tbyte[] encodeBase64 = Base64.encodeBase64(userPassword.getBytes(&quot;UTF-8&quot;));\r\n\t\t\r\n\t//\thttpPostRequest.addHeader(&quot;Authorization&quot;, &quot;Basic &quot;+ new String(encodeBase64));\r\n\t//}\r\n\t\r\n\t//sendRequest\r\n\tHttpEntity entity = new ByteArrayEntity(byteArray);\r\n\thttpPostRequest.setEntity(entity);\r\n\t\r\n\t//addHEader\r\n\t//httpPostRequest.addHeader(&quot;SOAPAction&quot;,soapAction);\r\n\t//httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;text/xml; charset=utf-8&quot;);\r\n    //httpPostRequest.addHeader(&quot;Authorization&quot;, token);\r\n    //httpPostRequest.addHeader(&quot;accept&quot;,&quot;text/plain&quot;)\r\n    httpPostRequest.addHeader(&quot;Authorization&quot;, ExecutionUtil.getDynamicProcessProperty(&quot;token&quot;));\r\n    httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;multipart/form-data;charset=utf-8; boundary=testboundary&quot;);\r\n    //httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;multipart/form-data&quot;);\r\n\t\r\n    HttpResponse response = client.execute(httpPostRequest);\t  \r\n    \r\n    int responseCode = response.getStatusLine().getStatusCode();\r\n    ExecutionUtil.setDynamicProcessProperty(&quot;HTTP_RES_CODE&quot;, responseCode.toString(), false);\r\n    \r\n    dataContext.storeStream(response.getEntity().getContent(), props);\r\n}\r\n\r\n\r\nprotected static HttpClient createHttpClient(HttpRequestBase httpRequest, SSLContext sslContextParam) {\r\n    HttpClient client = null;\r\n\tBuilder builder = RequestConfig.custom();\r\n\tHttpClientBuilder httpClientBuilder = HttpClientBuilder.create();\r\n\t\r\n\t//HttpHost proxy = new HttpHost(&quot;10.1.70.115&quot;, 8080, &quot;http&quot;);\r\n    //builder.setProxy(proxy);\r\n    \r\n   \r\n\tSSLContext sslContext = sslContextParam;\r\n\thttpClientBuilder.setSSLContext(sslContext);\r\n\t\r\n\tRequestConfig config = builder.build();\r\n    httpRequest.setConfig(config);\r\n\t\t\r\n    client = httpClientBuilder.build();\r\n    \r\n    return client;\r\n\r\n}\r\n\r\n```\r\nCould you please help me for options to solve this problem or anyone who had overcome this problem before could share ideas with me","title":"Getting an error message for HTTP post request for multiple-part-form data","body":"<p>I am trying to post an employee data to a client API and my post request does not reach to related API and I get a response like below. And also I have tried to post my request via an integration platform called Dell Boomi. Also my request doesn't have an empty field and all fields related to method are filled with data.</p>\n<blockquote>\n<p>{&quot;type&quot;:&quot;https://tools.ietf.org/html/rfc7231#section-6.5.1&quot;,&quot;title&quot;:&quot;One or more validation errors occurred.&quot;,&quot;status&quot;:400,&quot;traceId&quot;:&quot;00-26ae8fec464638bc5764c2ad82af50b4-5cb4f78ff28030ac-00&quot;,&quot;errors&quot;:{&quot;&quot;:[&quot;Failed to read the request form. Unexpected end of Stream, the content may have already been read by another component. &quot;]}}</p>\n</blockquote>\n<pre><code>import java.util.Properties;\nimport java.io.InputStream;\nimport com.boomi.execution.ExecutionUtil;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport org.apache.http.client.ClientProtocolException;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.entity.ByteArrayEntity;\nimport org.apache.http.impl.client.HttpClientBuilder;\nimport org.apache.commons.net.util.Base64;\nimport org.apache.http.HttpEntity;\nimport org.apache.http.HttpResponse;\nimport org.apache.http.HttpHost;\nimport org.apache.http.ssl.SSLContextBuilder;\nimport org.apache.http.client.methods.HttpRequestBase;\nimport com.boomi.component.CertificateFactory as BoomiCertificateFactory;\nimport javax.net.ssl.SSLContext;\nimport com.boomi.execution.ExecutionManager;\nimport com.boomi.execution.ExecutionTask;\nimport org.apache.http.client.config.RequestConfig;\nimport org.apache.http.client.config.RequestConfig.Builder;\nimport java.io.ByteArrayOutputStream;\n\n\nExecutionTask task = ExecutionManager.current;\nSSLContext sslContextBoomi = BoomiCertificateFactory.getInstance(task.accountConfig).createSSLContext();\n\nString url =  ExecutionUtil.getDynamicProcessProperty(&quot;url&quot;);\n//String soapAction = ExecutionUtil.getDynamicProcessProperty(&quot;soapAction&quot;);\n//String userName =  ExecutionUtil.getDynamicProcessProperty(&quot;UserName&quot;);\n//String password =  ExecutionUtil.getDynamicProcessProperty(&quot;Password&quot;);\n//String token =  ExecutionUtil.getDynamicProcessProperty(&quot;token&quot;);\n\n//HttpHost proxy = new HttpHost(&quot;10.1.70.115&quot;, 8080, &quot;http&quot;);\n\n\nfor( int i = 0; i &lt; dataContext.getDataCount(); i++ ) {\n    InputStream is = dataContext.getStream(i);\n    Properties props = dataContext.getProperties(i);\n    logger = ExecutionUtil.getBaseLogger();\n    \n    ByteArrayOutputSt`your text`ream buffer = new ByteArrayOutputStream();\n    int nRead;\n    byte[] data = new byte[1024];\n    while ((nRead = is.read(data, 0, data.length)) != -1) {\n        buffer.write(data, 0, nRead);\n    }        \n    buffer.flush();\n    byte[] byteArray = buffer.toByteArray();\n    \n    HttpPost httpPostRequest = new HttpPost(url);\n    HttpClient client = createHttpClient(httpPostRequest,sslContextBoomi);\n    \n   //if( !&quot;&quot;.equals(userName) &amp;&amp;  !&quot;&quot;.equals(password)) {                   \n    //  String userPassword = userName + &quot;:&quot; + password;\n    //  byte[] encodeBase64 = Base64.encodeBase64(userPassword.getBytes(&quot;UTF-8&quot;));\n        \n    //  httpPostRequest.addHeader(&quot;Authorization&quot;, &quot;Basic &quot;+ new String(encodeBase64));\n    //}\n    \n    //sendRequest\n    HttpEntity entity = new ByteArrayEntity(byteArray);\n    httpPostRequest.setEntity(entity);\n    \n    //addHEader\n    //httpPostRequest.addHeader(&quot;SOAPAction&quot;,soapAction);\n    //httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;text/xml; charset=utf-8&quot;);\n    //httpPostRequest.addHeader(&quot;Authorization&quot;, token);\n    //httpPostRequest.addHeader(&quot;accept&quot;,&quot;text/plain&quot;)\n    httpPostRequest.addHeader(&quot;Authorization&quot;, ExecutionUtil.getDynamicProcessProperty(&quot;token&quot;));\n    httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;multipart/form-data;charset=utf-8; boundary=testboundary&quot;);\n    //httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;multipart/form-data&quot;);\n    \n    HttpResponse response = client.execute(httpPostRequest);      \n    \n    int responseCode = response.getStatusLine().getStatusCode();\n    ExecutionUtil.setDynamicProcessProperty(&quot;HTTP_RES_CODE&quot;, responseCode.toString(), false);\n    \n    dataContext.storeStream(response.getEntity().getContent(), props);\n}\n\n\nprotected static HttpClient createHttpClient(HttpRequestBase httpRequest, SSLContext sslContextParam) {\n    HttpClient client = null;\n    Builder builder = RequestConfig.custom();\n    HttpClientBuilder httpClientBuilder = HttpClientBuilder.create();\n    \n    //HttpHost proxy = new HttpHost(&quot;10.1.70.115&quot;, 8080, &quot;http&quot;);\n    //builder.setProxy(proxy);\n    \n   \n    SSLContext sslContext = sslContextParam;\n    httpClientBuilder.setSSLContext(sslContext);\n    \n    RequestConfig config = builder.build();\n    httpRequest.setConfig(config);\n        \n    client = httpClientBuilder.build();\n    \n    return client;\n\n}\n\n</code></pre>\n<p>Could you please help me for options to solve this problem or anyone who had overcome this problem before could share ideas with me</p>\n"},{"tags":["java","unit-testing","mocking","mockito"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689812562,"post_id":76719405,"comment_id":135267956,"body_markdown":"So it does fail locally if you run `LogExceptionBySalesRefAspectTest` first?","body":"So it does fail locally if you run <code>LogExceptionBySalesRefAspectTest</code> first?"},{"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"score":0,"creation_date":1689838958,"post_id":76719405,"comment_id":135270832,"body_markdown":"Yes. Apologies. Should have been clear about that.","body":"Yes. Apologies. Should have been clear about that."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689842332,"post_id":76719405,"comment_id":135271491,"body_markdown":"Run it under the debugger, put a breakpoint in `info` and see what the state of the appenders are.","body":"Run it under the debugger, put a breakpoint in <code>info</code> and see what the state of the appenders are."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1690315516,"post_id":76719405,"comment_id":135335729,"body_markdown":"You are changing the appenders and the log level in your other test (that runs first). Logger configuration is global and you need to restore it if you change it in a test","body":"You are changing the appenders and the log level in your other test (that runs first). Logger configuration is global and you need to restore it if you change it in a test"}],"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689798236,"creation_date":1689755903,"question_id":76719405,"body_markdown":"I have this test class:\r\n\r\n```Java\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class MLoggerTest {\r\n\r\n  @Mock private Appender&lt;ILoggingEvent&gt; mockAppender;\r\n  @Captor private ArgumentCaptor&lt;LoggingEvent&gt; captorLoggingEvent;\r\n\r\n  @InjectMocks private MLogger mLogger;\r\n\r\n  private static final String TEST_MESSAGE = &quot;test message&quot;;\r\n\r\n  /** Initialisation */\r\n  @Before\r\n  public void setup() {\r\n    Logger root = (Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\r\n    root.setLevel(Level.DEBUG);\r\n    root.addAppender(mockAppender);\r\n  }\r\n\r\n  /** Cleanup after tests completed */\r\n  @After\r\n  public void teardown() {\r\n    Logger root = (Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\r\n    root.detachAppender(mockAppender);\r\n  }\r\n\r\n  @Test\r\n  public void info() {\r\n    mLogger.info(TEST_MESSAGE, null);\r\n    verify(mockAppender, times(1)).doAppend(captorLoggingEvent.capture());\r\n    final LoggingEvent event = captorLoggingEvent.getValue();\r\n    assertThat(&quot;Message not logged&quot;, event.getFormattedMessage(), containsString(TEST_MESSAGE));\r\n  }\r\n\r\n  @Test\r\n  public void error() {\r\n    mLogger.error(TEST_MESSAGE, null);\r\n    verify(mockAppender, times(1)).doAppend(captorLoggingEvent.capture());\r\n    final LoggingEvent event = captorLoggingEvent.getValue();\r\n    assertThat(&quot;Message not logged&quot;, event.getFormattedMessage(), containsString(TEST_MESSAGE));\r\n  }\r\n}\r\n```\r\n\r\nThis is the error I get:\r\n\r\n&gt;[ERROR] Failures:\r\n[ERROR]   MetricLoggerTest.info:52\r\nWanted but not invoked:\r\nmockAppender.doAppend(&lt;Capturing argument&gt;);\r\n-&gt; at my.app.logging.MLoggerTest.info(MLoggerTest.java:52)\r\nActually, there were zero interactions with this mock.\r\n\r\n`info()` passes on my local machine and in my dev environment but not in uat and `error()` passes in all environments even though it is pretty much the same test. I can&#39;t figure out why this would be. Can anyone help?\r\n\r\n**UPDATE**\r\nThis only happens when the below test class is executed first:\r\n\r\n```Java\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class LogExceptionBySalesRefAspectTest {\r\n\r\n  private static final String SALES_REF = &quot;ABC123-87&quot;;\r\n  private static final String EXCEPTION_MSG = &quot;Exception&quot;;\r\n  private static final String MESSAGE =\r\n      &quot;Exception&quot; + EXCEPTION_MSG + &quot;encountered for sales reference &quot; + SALES_REF;\r\n\r\n  private MyAppender myAppender;\r\n  private static final String LOGGER_NAME = &quot;my.app.logging&quot;;\r\n\r\n  @Before\r\n  public void setup() {\r\n    Logger logger = (Logger) LoggerFactory.getLogger(LOGGER_NAME);\r\n    myAppender = new MyAppender();\r\n    myAppender.setContext((LoggerContext) LoggerFactory.getILoggerFactory());\r\n    logger.setLevel(Level.ERROR);\r\n    logger.addAppender(myAppender);\r\n    myAppender.start();\r\n  }\r\n\r\n  @After\r\n  public void cleanUp() {\r\n    myAppender.reset();\r\n    myAppender.stop();\r\n  }\r\n\r\n  @Test\r\n  public void confirm_output_logged() {\r\n    LogExceptionBySalesRefAspect aspect = new LogExceptionBySalesRefAspect();\r\n    SalesRequest req = SalesRequest.builder().salesReference(QUOTE_REF).build();\r\n    JoinPoint jp = Mockito.mock(JoinPoint.class);\r\n    Mockito.when(jp.getArgs()).thenReturn(new Object[] {req});\r\n    aspect.logExceptionWithSalesIdentification(jp, new ServiceException(EXCEPTION_MSG));\r\n    assertThat(myAppender.countEventsForLogger(LOGGER_NAME)).isEqualTo(1);\r\n    assertThat(myAppender.contains(MESSAGE, Level.ERROR));\r\n  }\r\n\r\n  @Test\r\n  public void whenexception_on_postsales_call() {\r\n    LogExceptionBySalesRefAspect aspect = new LogExceptionBySalesRefAspect();\r\n    SalesRequest req = SalesRequest.builder().salesReference(QUOTE_REF).build();\r\n    JoinPoint jp = Mockito.mock(JoinPoint.class);\r\n    Mockito.when(jp.getArgs()).thenReturn(new Object[] {req});\r\n    aspect.handlePostSalesExceptionLogging(jp, new ServiceException(EXCEPTION_MSG));\r\n    assertThat(myAppender.countEventsForLogger(LOGGER_NAME)).isEqualTo(1);\r\n    assertThat(myAppender.contains(MESSAGE, Level.ERROR));\r\n  }\r\n}\r\n```","title":"Test passing in all environments except one","body":"<p>I have this test class:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class MLoggerTest {\n\n  @Mock private Appender&lt;ILoggingEvent&gt; mockAppender;\n  @Captor private ArgumentCaptor&lt;LoggingEvent&gt; captorLoggingEvent;\n\n  @InjectMocks private MLogger mLogger;\n\n  private static final String TEST_MESSAGE = &quot;test message&quot;;\n\n  /** Initialisation */\n  @Before\n  public void setup() {\n    Logger root = (Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\n    root.setLevel(Level.DEBUG);\n    root.addAppender(mockAppender);\n  }\n\n  /** Cleanup after tests completed */\n  @After\n  public void teardown() {\n    Logger root = (Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\n    root.detachAppender(mockAppender);\n  }\n\n  @Test\n  public void info() {\n    mLogger.info(TEST_MESSAGE, null);\n    verify(mockAppender, times(1)).doAppend(captorLoggingEvent.capture());\n    final LoggingEvent event = captorLoggingEvent.getValue();\n    assertThat(&quot;Message not logged&quot;, event.getFormattedMessage(), containsString(TEST_MESSAGE));\n  }\n\n  @Test\n  public void error() {\n    mLogger.error(TEST_MESSAGE, null);\n    verify(mockAppender, times(1)).doAppend(captorLoggingEvent.capture());\n    final LoggingEvent event = captorLoggingEvent.getValue();\n    assertThat(&quot;Message not logged&quot;, event.getFormattedMessage(), containsString(TEST_MESSAGE));\n  }\n}\n</code></pre>\n<p>This is the error I get:</p>\n<blockquote>\n<p>[ERROR] Failures:\n[ERROR]   MetricLoggerTest.info:52\nWanted but not invoked:\nmockAppender.doAppend();\n-&gt; at my.app.logging.MLoggerTest.info(MLoggerTest.java:52)\nActually, there were zero interactions with this mock.</p>\n</blockquote>\n<p><code>info()</code> passes on my local machine and in my dev environment but not in uat and <code>error()</code> passes in all environments even though it is pretty much the same test. I can't figure out why this would be. Can anyone help?</p>\n<p><strong>UPDATE</strong>\nThis only happens when the below test class is executed first:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class LogExceptionBySalesRefAspectTest {\n\n  private static final String SALES_REF = &quot;ABC123-87&quot;;\n  private static final String EXCEPTION_MSG = &quot;Exception&quot;;\n  private static final String MESSAGE =\n      &quot;Exception&quot; + EXCEPTION_MSG + &quot;encountered for sales reference &quot; + SALES_REF;\n\n  private MyAppender myAppender;\n  private static final String LOGGER_NAME = &quot;my.app.logging&quot;;\n\n  @Before\n  public void setup() {\n    Logger logger = (Logger) LoggerFactory.getLogger(LOGGER_NAME);\n    myAppender = new MyAppender();\n    myAppender.setContext((LoggerContext) LoggerFactory.getILoggerFactory());\n    logger.setLevel(Level.ERROR);\n    logger.addAppender(myAppender);\n    myAppender.start();\n  }\n\n  @After\n  public void cleanUp() {\n    myAppender.reset();\n    myAppender.stop();\n  }\n\n  @Test\n  public void confirm_output_logged() {\n    LogExceptionBySalesRefAspect aspect = new LogExceptionBySalesRefAspect();\n    SalesRequest req = SalesRequest.builder().salesReference(QUOTE_REF).build();\n    JoinPoint jp = Mockito.mock(JoinPoint.class);\n    Mockito.when(jp.getArgs()).thenReturn(new Object[] {req});\n    aspect.logExceptionWithSalesIdentification(jp, new ServiceException(EXCEPTION_MSG));\n    assertThat(myAppender.countEventsForLogger(LOGGER_NAME)).isEqualTo(1);\n    assertThat(myAppender.contains(MESSAGE, Level.ERROR));\n  }\n\n  @Test\n  public void whenexception_on_postsales_call() {\n    LogExceptionBySalesRefAspect aspect = new LogExceptionBySalesRefAspect();\n    SalesRequest req = SalesRequest.builder().salesReference(QUOTE_REF).build();\n    JoinPoint jp = Mockito.mock(JoinPoint.class);\n    Mockito.when(jp.getArgs()).thenReturn(new Object[] {req});\n    aspect.handlePostSalesExceptionLogging(jp, new ServiceException(EXCEPTION_MSG));\n    assertThat(myAppender.countEventsForLogger(LOGGER_NAME)).isEqualTo(1);\n    assertThat(myAppender.contains(MESSAGE, Level.ERROR));\n  }\n}\n</code></pre>\n"},{"tags":["java","jdbc","transactions","distributed-transactions"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1681296561,"post_id":75994214,"comment_id":134032691,"body_markdown":"If you want correct transactional behaviour across multiple databases, you need to use a transaction manager and XA-aware datasources (and formally, databases which support real two-phase commits instead of just emulating it).","body":"If you want correct transactional behaviour across multiple databases, you need to use a transaction manager and XA-aware datasources (and formally, databases which support real two-phase commits instead of just emulating it)."},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1688847174,"post_id":75994214,"comment_id":135129897,"body_markdown":"No, because conn2.rollbacl(); won&#39;t compile due to missing method","body":"No, because conn2.rollbacl(); won&#39;t compile due to missing method"},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1688847364,"post_id":75994214,"comment_id":135129921,"body_markdown":"but also, no, because after you commit #1, you can&#39;t rollback it if #2 fails","body":"but also, no, because after you commit #1, you can&#39;t rollback it if #2 fails"},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1688847463,"post_id":75994214,"comment_id":135129928,"body_markdown":"But on the third hand, if you&#39;re come as far as to commit, it shouldn&#39;t really fail. so in practice i think it likely to succeed","body":"But on the third hand, if you&#39;re come as far as to commit, it shouldn&#39;t really fail. so in practice i think it likely to succeed"}],"owner":{"account_id":362912,"reputation":3283,"user_id":706354,"accept_rate":67,"display_name":"MiamiBeach"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689797997,"creation_date":1681293984,"question_id":75994214,"body_markdown":"I want to make transactional update in two databases. Given I have following pseudocode:\r\n\r\n```java\r\ntry {\r\n    Connection conn1 = DriverManager.getConnection(&quot;jdbc:postgresql://HOST1&quot;, &quot;postgres1&quot;, &quot;password1&quot;)) \r\n    Connection conn2 = DriverManager.getConnection(&quot;jdbc:postgresql://HOST2&quot;, &quot;postgres2&quot;, &quot;password2&quot;)) \r\n    \r\n    conn1.setAutoCommit(false);\r\n    conn2.setAutoCommit(false);\r\n    // insert\r\n    // update \r\n    conn1.commit();\r\n    conn2.commit();\r\n} catch (Exception e) {\r\n    conn1.rollback();\r\n    conn2.rollback();\r\n}\r\n```\r\n\r\nWill it work as intended?\r\n\r\nIf NO - why?\r\n\r\nIf YES - does it mean we don&#39;t need complex distributed transactions manager (such as based on XA protocol) for such cases? \r\n\r\n**Here is my understanding**: the problem arises when conn1.commit() succeeds and conn2.commit() fails. If conn2.commit() method throws an Exception, we already have conn1 tx committed and conn1.rollback() will effectively do nothing, conn1 tx will stay there. We can mitigate this by adding code for reverting conn1 tx manually. In this case, apart from failure of that code - the modified approach should work. Apparently ACID guarantees are broken in this approach.\r\n\r\n","title":"Running two JDBC transactions for different databases - will it work?","body":"<p>I want to make transactional update in two databases. Given I have following pseudocode:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    Connection conn1 = DriverManager.getConnection(&quot;jdbc:postgresql://HOST1&quot;, &quot;postgres1&quot;, &quot;password1&quot;)) \n    Connection conn2 = DriverManager.getConnection(&quot;jdbc:postgresql://HOST2&quot;, &quot;postgres2&quot;, &quot;password2&quot;)) \n    \n    conn1.setAutoCommit(false);\n    conn2.setAutoCommit(false);\n    // insert\n    // update \n    conn1.commit();\n    conn2.commit();\n} catch (Exception e) {\n    conn1.rollback();\n    conn2.rollback();\n}\n</code></pre>\n<p>Will it work as intended?</p>\n<p>If NO - why?</p>\n<p>If YES - does it mean we don't need complex distributed transactions manager (such as based on XA protocol) for such cases?</p>\n<p><strong>Here is my understanding</strong>: the problem arises when conn1.commit() succeeds and conn2.commit() fails. If conn2.commit() method throws an Exception, we already have conn1 tx committed and conn1.rollback() will effectively do nothing, conn1 tx will stay there. We can mitigate this by adding code for reverting conn1 tx manually. In this case, apart from failure of that code - the modified approach should work. Apparently ACID guarantees are broken in this approach.</p>\n"},{"tags":["java","jobs","ibm-midrange"],"answers":[{"tags":[],"owner":{"account_id":494473,"reputation":22029,"user_id":2933177,"accept_rate":50,"display_name":"Charles"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689364056,"creation_date":1689364056,"answer_id":76690744,"question_id":76689818,"body_markdown":"Read through the [Work Management][1] documentation.   \r\nIn particular the page about [Routing Entries][2] and a look at an existing subsystem..  \r\n`DSPSBSD QBATCH`\r\n\r\n&gt; The routing entry identifies the main storage subsystem pool to use,\r\n&gt; the controlling program to run (typically the system-supplied program\r\n&gt; QCMD), and additional run-time information (stored in the class\r\n&gt; object). Routing entries are stored in the subsystem description.\r\n\r\n&gt; Job run-time attributes are contained in the class object that is\r\n&gt; specified in the (CLS) parameter in the routing entry. If a job\r\n&gt; consists of multiple routing steps, the class used by each subsequent\r\n&gt; routing step is specified in the routing entry used to start the\r\n&gt; routing step.\r\n\r\n\r\n\r\n  [1]: https://www.ibm.com/docs/en/i/7.4?topic=management-work\r\n  [2]: https://www.ibm.com/docs/en/i/7.4?topic=description-routing-entries","title":"How to run a java program in a specific subsystem in AS400","body":"<p>Read through the <a href=\"https://www.ibm.com/docs/en/i/7.4?topic=management-work\" rel=\"nofollow noreferrer\">Work Management</a> documentation.<br />\nIn particular the page about <a href=\"https://www.ibm.com/docs/en/i/7.4?topic=description-routing-entries\" rel=\"nofollow noreferrer\">Routing Entries</a> and a look at an existing subsystem..<br />\n<code>DSPSBSD QBATCH</code></p>\n<blockquote>\n<p>The routing entry identifies the main storage subsystem pool to use,\nthe controlling program to run (typically the system-supplied program\nQCMD), and additional run-time information (stored in the class\nobject). Routing entries are stored in the subsystem description.</p>\n</blockquote>\n<blockquote>\n<p>Job run-time attributes are contained in the class object that is\nspecified in the (CLS) parameter in the routing entry. If a job\nconsists of multiple routing steps, the class used by each subsequent\nrouting step is specified in the routing entry used to start the\nrouting step.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2655673,"reputation":11140,"user_id":2296441,"accept_rate":86,"display_name":"jmarkmurphy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689797846,"creation_date":1689635048,"answer_id":76708585,"question_id":76689818,"body_markdown":"I see what you are talking about now. IBM i is quite flexible and user configurable, but with this flexibility comes additional complexity. You did not create all the objects you needed to create a subsystem. If you want a subsystem just to run Java jobs in batch, you need to do a little more work.\r\n\r\n- First you need a subsystem description: MYSBS (you have that)\r\n- Next you need a way to get jobs into the subsystem, that is a job queue: MYJOBQ (you have that)\r\n- Finally you need to give the subsystem a way to process the request messages coming from the job queue, this is a routing entry: (you don&#39;t have that) \r\n\r\nSo take a look at subsystem QSYS/QBATCH. (DSPSBSD)\r\n\r\n[![DSPSBSD Screen][1]][1]\r\n\r\nMenu options 1 and 2 were taken care of with the CRTSBSD command. 3, 4, and 5 are empty. 6 is taken care of with the ADDJOBQE command, 7 has some stuff in it, and 8 - 10 are also empty. \r\n\r\nThis is the minimum configuration to make a batch subsystem work. Without the routing entries, the subsystem monitor does not know what to do with the request messages on the job queue. Thus, nothing happens.\r\n\r\nIf you have a typical system, the routing entries in QBATCH are:\r\n\r\n[![QBATCH Routing Entries][2]][2]\r\n\r\nI&#39;m not sure what the first one does, but the second one runs S36 jobs, the third one runs S38 jobs, and the fourth one runs everything else (IBM i jobs). It&#39;s the compare data that selects which routing entry to use. If you prompt the SBMJOB command, then press F10 to see additional parameters, on the second page of the parameter list, you will see this:\r\n\r\n[![SBMJOB Additional Parameters][3]][3]\r\n\r\nThat routing data is compared to the compare value in the routing entries in order from top to bottom. The first match it gets is the routing entry the subsystem monitor chooses. In this case QCMDB does not match any of the compare data strings, so the last routing entry, the one with *ANY, will be selected. Notice that each routing entry points to a program and library. That is the program that the subsystem monitor calls to process the job queue entry.\r\n\r\nBest thing to do is duplicate those 4 routing entries, but not completely. If you look at the details, each routing entry points to a class named the same as the subsystem description. So the easiest thing to do is to duplicate class QSYS/QBATCH and name it MYSBS using the CRTCLS command. Then when you add the four routing entries just leave the default class *SBSD. \r\n\r\nBut, you can probably get away with just creating the last routing entry if you won&#39;t be executing S36, S38, or QIGC (whatever that is) jobs in this subsystem. The routing entries are added using ADDRTGE. Note, that if you do this, you won&#39;t be able to run S38 jobs in this subsystem, but S36EVOKE and QIGC jobs use the same command processer as IBM i, that is QSYS/QCMD, so they may still work properly.\r\n\r\nIn each case, routing entry or class, model your new ones after the ones in the QSYS/QBATCH subsystem, and always include the last catch all routing entry. Otherwise, the new subsystem won&#39;t do anything.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3IkBB.png\r\n  [2]: https://i.stack.imgur.com/HZnfH.png\r\n  [3]: https://i.stack.imgur.com/NHTHI.png","title":"How to run a java program in a specific subsystem in AS400","body":"<p>I see what you are talking about now. IBM i is quite flexible and user configurable, but with this flexibility comes additional complexity. You did not create all the objects you needed to create a subsystem. If you want a subsystem just to run Java jobs in batch, you need to do a little more work.</p>\n<ul>\n<li>First you need a subsystem description: MYSBS (you have that)</li>\n<li>Next you need a way to get jobs into the subsystem, that is a job queue: MYJOBQ (you have that)</li>\n<li>Finally you need to give the subsystem a way to process the request messages coming from the job queue, this is a routing entry: (you don't have that)</li>\n</ul>\n<p>So take a look at subsystem QSYS/QBATCH. (DSPSBSD)</p>\n<p><a href=\"https://i.stack.imgur.com/3IkBB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3IkBB.png\" alt=\"DSPSBSD Screen\" /></a></p>\n<p>Menu options 1 and 2 were taken care of with the CRTSBSD command. 3, 4, and 5 are empty. 6 is taken care of with the ADDJOBQE command, 7 has some stuff in it, and 8 - 10 are also empty.</p>\n<p>This is the minimum configuration to make a batch subsystem work. Without the routing entries, the subsystem monitor does not know what to do with the request messages on the job queue. Thus, nothing happens.</p>\n<p>If you have a typical system, the routing entries in QBATCH are:</p>\n<p><a href=\"https://i.stack.imgur.com/HZnfH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HZnfH.png\" alt=\"QBATCH Routing Entries\" /></a></p>\n<p>I'm not sure what the first one does, but the second one runs S36 jobs, the third one runs S38 jobs, and the fourth one runs everything else (IBM i jobs). It's the compare data that selects which routing entry to use. If you prompt the SBMJOB command, then press F10 to see additional parameters, on the second page of the parameter list, you will see this:</p>\n<p><a href=\"https://i.stack.imgur.com/NHTHI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NHTHI.png\" alt=\"SBMJOB Additional Parameters\" /></a></p>\n<p>That routing data is compared to the compare value in the routing entries in order from top to bottom. The first match it gets is the routing entry the subsystem monitor chooses. In this case QCMDB does not match any of the compare data strings, so the last routing entry, the one with *ANY, will be selected. Notice that each routing entry points to a program and library. That is the program that the subsystem monitor calls to process the job queue entry.</p>\n<p>Best thing to do is duplicate those 4 routing entries, but not completely. If you look at the details, each routing entry points to a class named the same as the subsystem description. So the easiest thing to do is to duplicate class QSYS/QBATCH and name it MYSBS using the CRTCLS command. Then when you add the four routing entries just leave the default class *SBSD.</p>\n<p>But, you can probably get away with just creating the last routing entry if you won't be executing S36, S38, or QIGC (whatever that is) jobs in this subsystem. The routing entries are added using ADDRTGE. Note, that if you do this, you won't be able to run S38 jobs in this subsystem, but S36EVOKE and QIGC jobs use the same command processer as IBM i, that is QSYS/QCMD, so they may still work properly.</p>\n<p>In each case, routing entry or class, model your new ones after the ones in the QSYS/QBATCH subsystem, and always include the last catch all routing entry. Otherwise, the new subsystem won't do anything.</p>\n"}],"owner":{"account_id":1736494,"reputation":549,"user_id":1588943,"accept_rate":77,"display_name":"Sfp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76708585,"answer_count":2,"score":2,"last_activity_date":1689797846,"creation_date":1689354182,"question_id":76689818,"body_markdown":"How to do it? I saw this question: \r\nhttps://stackoverflow.com/questions/42530910/how-to-add-job-in-subsystem-in-as400 \r\nThe person who asked had this process:\r\n\r\n    Creating Subsystem (SBS):\r\n    \r\n    CRTSBSD SBSD(MYSBS) POOLS((2 *BASE)) MAXJOBS(2) TEXT(&#39;DEMO SBS&#39;)\r\n    Create JOBQ:\r\n    \r\n    CRTJOBQ JOBQ(MYJOBQ) TEXT(&#39;JOBQ&#39;)\r\n    Add JOBQ entry in subsystem\r\n    \r\n    ADDJOBQE SBSD(MYSBS) JOBQ(MYJOBQ) SEQNBR(1)\r\n    Submit PWI job in this JOBQ\r\n    \r\n    SBMJOB CMD(JAVA CLASS(&#39;myprogram.jar&#39;) PARM(true) OUTPUT(*NONE)) JOBQ(MYJOBQ) JOB(MYJOB)   \r\n    Start Subsystem\r\n    \r\n    STRSBS SBSD(MYSBS)\r\n\r\n\r\nAnd I tried something similar, but indeed, the job completes immidiately and you can&#39;t see java  running (because it does not), even if you have a java program with an infinite loop. The person who asked said &quot; had created class and added for this job and added routing entry. Problem Solved&quot; Can someone please explain how to do that? If it is possible,with some concepts related to understand why. I coulndt figure it out using the documentation. Thanks.","title":"How to run a java program in a specific subsystem in AS400","body":"<p>How to do it? I saw this question:\n<a href=\"https://stackoverflow.com/questions/42530910/how-to-add-job-in-subsystem-in-as400\">How to add job in Subsystem in as400</a>\nThe person who asked had this process:</p>\n<pre><code>Creating Subsystem (SBS):\n\nCRTSBSD SBSD(MYSBS) POOLS((2 *BASE)) MAXJOBS(2) TEXT('DEMO SBS')\nCreate JOBQ:\n\nCRTJOBQ JOBQ(MYJOBQ) TEXT('JOBQ')\nAdd JOBQ entry in subsystem\n\nADDJOBQE SBSD(MYSBS) JOBQ(MYJOBQ) SEQNBR(1)\nSubmit PWI job in this JOBQ\n\nSBMJOB CMD(JAVA CLASS('myprogram.jar') PARM(true) OUTPUT(*NONE)) JOBQ(MYJOBQ) JOB(MYJOB)   \nStart Subsystem\n\nSTRSBS SBSD(MYSBS)\n</code></pre>\n<p>And I tried something similar, but indeed, the job completes immidiately and you can't see java  running (because it does not), even if you have a java program with an infinite loop. The person who asked said &quot; had created class and added for this job and added routing entry. Problem Solved&quot; Can someone please explain how to do that? If it is possible,with some concepts related to understand why. I coulndt figure it out using the documentation. Thanks.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":1,"creation_date":1435959560,"post_id":31214446,"comment_id":50430154,"body_markdown":"Related: [Why would one declare an immutable class final in Java?](http://stackoverflow.com/questions/12306651/why-would-one-declare-an-immutable-class-final-in-java).","body":"Related: <a href=\"http://stackoverflow.com/questions/12306651/why-would-one-declare-an-immutable-class-final-in-java\">Why would one declare an immutable class final in Java?</a>."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435959720,"post_id":31214446,"comment_id":50430198,"body_markdown":"Even an interface doesn&#39;t feel right to me. Because you could have a method that takes an &quot;Employee&quot; with the expectation that it&#39;s immutable. +1 I&#39;m interested too now","body":"Even an interface doesn&#39;t feel right to me. Because you could have a method that takes an &quot;Employee&quot; with the expectation that it&#39;s immutable. +1 I&#39;m interested too now"},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435959781,"post_id":31214446,"comment_id":50430218,"body_markdown":"@Cruncher - I read that using an interface might be undesirable as well. So what would be ideal, just creating 3 final classes, with no subclassing whatsoever? If I don&#39;t say final, I would have to worry about  thread safety correct?","body":"@Cruncher - I read that using an interface might be undesirable as well. So what would be ideal, just creating 3 final classes, with no subclassing whatsoever? If I don&#39;t say final, I would have to worry about  thread safety correct?"},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435959970,"post_id":31214446,"comment_id":50430261,"body_markdown":"It&#39;s not just thread safety. The method could save the input as a field for use in later calls, only to find out that it&#39;s been changed! I don&#39;t know what the best solution is either. But I&#39;m anxiously awaiting a good answer.","body":"It&#39;s not just thread safety. The method could save the input as a field for use in later calls, only to find out that it&#39;s been changed! I don&#39;t know what the best solution is either. But I&#39;m anxiously awaiting a good answer."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435960084,"post_id":31214446,"comment_id":50430282,"body_markdown":"@Cruncher - My guess would be to create the 3 classes, but as final, however, that may not be the best approach.","body":"@Cruncher - My guess would be to create the 3 classes, but as final, however, that may not be the best approach."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435960149,"post_id":31214446,"comment_id":50430299,"body_markdown":"Then you would have to overload all methods that can accept any employee... Seems like a poor solution to me. There has to be a better way","body":"Then you would have to overload all methods that can accept any employee... Seems like a poor solution to me. There has to be a better way"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":2,"creation_date":1435960211,"post_id":31214446,"comment_id":50430314,"body_markdown":"There&#39;s nothing wrong with using an interface. Yes, the interface wouldn&#39;t guarantee that all the implementations will be immutable but you can guarantee that all the implementations you provide are. Other implementations are not your problem.","body":"There&#39;s nothing wrong with using an interface. Yes, the interface wouldn&#39;t guarantee that all the implementations will be immutable but you can guarantee that all the implementations you provide are. Other implementations are not your problem."},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1435960272,"post_id":31214446,"comment_id":50430326,"body_markdown":"If you create an interface or a non-final (abstract or not abstract) class, then there is no way to prevent anyone from ever implementing the interface or subclassing the class with a class that is mutable. The most you can do is document that people shouldn&#39;t create mutable implementations or subclasses.","body":"If you create an interface or a non-final (abstract or not abstract) class, then there is no way to prevent anyone from ever implementing the interface or subclassing the class with a class that is mutable. The most you can do is document that people shouldn&#39;t create mutable implementations or subclasses."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435960333,"post_id":31214446,"comment_id":50430343,"body_markdown":"@biziclop one of the selling points of object oriented programming, is the ability to &quot;bullet proof&quot; your code. That is, being able to provide some guarantee that you can be absolutely sure of. 5 years down the line he may create another employee implementation forgetting that it should be immutable","body":"@biziclop one of the selling points of object oriented programming, is the ability to &quot;bullet proof&quot; your code. That is, being able to provide some guarantee that you can be absolutely sure of. 5 years down the line he may create another employee implementation forgetting that it should be immutable"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1435960355,"post_id":31214446,"comment_id":50430350,"body_markdown":"@Jesper That is true. Just as `String` is just one implementation of `CharSequence`, there are others that are mutable.","body":"@Jesper That is true. Just as <code>String</code> is just one implementation of <code>CharSequence</code>, there are others that are mutable."},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":1,"creation_date":1435960419,"post_id":31214446,"comment_id":50430370,"body_markdown":"@Cruncher You can bullet-proof YOUR code. But you can&#39;t bullet-proof other code in advance. There&#39;s no way to force immutability on all implementors of an interface, neither is there a real need to do so.","body":"@Cruncher You can bullet-proof YOUR code. But you can&#39;t bullet-proof other code in advance. There&#39;s no way to force immutability on all implementors of an interface, neither is there a real need to do so."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435960496,"post_id":31214446,"comment_id":50430395,"body_markdown":"@biziclop that&#39;s not comparable at all. There&#39;s nothing about a CharSequence that says it should be immutable. He wants all employees in general to be immutable, edit: I would consider this a rather compelling case to want to do so","body":"@biziclop that&#39;s not comparable at all. There&#39;s nothing about a CharSequence that says it should be immutable. He wants all employees in general to be immutable, edit: I would consider this a rather compelling case to want to do so"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1435960558,"post_id":31214446,"comment_id":50430414,"body_markdown":"@Cruncher In that case, the answer is that it isn&#39;t possible in Java. Though I still fail to see a valid reason why anyone would want that.","body":"@Cruncher In that case, the answer is that it isn&#39;t possible in Java. Though I still fail to see a valid reason why anyone would want that."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435960723,"post_id":31214446,"comment_id":50430443,"body_markdown":"@biziclop &quot;Though I still fail to see a valid reason why anyone would want that&quot; How is, &quot;I want the argument passed to me guaranteed to be immutable&quot; not a valid reason? You can talk about documentation all you want, but it&#39;s never the same as a guarantee by the compiler. By this logic we don&#39;t need private fields either.","body":"@biziclop &quot;Though I still fail to see a valid reason why anyone would want that&quot; How is, &quot;I want the argument passed to me guaranteed to be immutable&quot; not a valid reason? You can talk about documentation all you want, but it&#39;s never the same as a guarantee by the compiler. By this logic we don&#39;t need private fields either."},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1435960752,"post_id":31214446,"comment_id":50430453,"body_markdown":"@Cruncher To underline the impossibility of this requirement, consider how there&#39;s no automated way to tell whether a class itself is immutable in the first place. How could you enforce something on all implementations of an interface that the compiler can&#39;t even test in isolation on a single class?","body":"@Cruncher To underline the impossibility of this requirement, consider how there&#39;s no automated way to tell whether a class itself is immutable in the first place. How could you enforce something on all implementations of an interface that the compiler can&#39;t even test in isolation on a single class?"},{"owner":{"account_id":4092618,"reputation":5227,"user_id":3360241,"accept_rate":91,"display_name":"John"},"score":0,"creation_date":1435960845,"post_id":31214446,"comment_id":50430476,"body_markdown":"Oracle advices for achieving immutability: https://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html  Note however, there is no real immutabaility in java. It is possible to expose hidden field or constructor with reflection. It is also possible to generate dynamic proxy of final class that you could extend.","body":"Oracle advices for achieving immutability: <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a>  Note however, there is no real immutabaility in java. It is possible to expose hidden field or constructor with reflection. It is also possible to generate dynamic proxy of final class that you could extend."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":3,"creation_date":1435960847,"post_id":31214446,"comment_id":50430477,"body_markdown":"Two questions that come to mind: (1) is it logical to make a class representing an Employee immutable? One would assume that the state of an employee would change during his/her employment. (2) why should Accountant/ITDepartment/QualityAssurance inherit from Employee rather than be an attribute (&quot;position&quot;) of it?","body":"Two questions that come to mind: (1) is it logical to make a class representing an Employee immutable? One would assume that the state of an employee would change during his/her employment. (2) why should Accountant/ITDepartment/QualityAssurance inherit from Employee rather than be an attribute (&quot;position&quot;) of it?"},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435960963,"post_id":31214446,"comment_id":50430509,"body_markdown":"@biziclop for the record, I never said that interfaces should be able to enforce that its children be immutable. Just that I was looking for a good way to solve the problem as in the question. Surely such an interface would be the most obvious solution, but I never said that should be the answer. In fact, I said exactly in my first comment that an interface does not seem like the right solution.","body":"@biziclop for the record, I never said that interfaces should be able to enforce that its children be immutable. Just that I was looking for a good way to solve the problem as in the question. Surely such an interface would be the most obvious solution, but I never said that should be the answer. In fact, I said exactly in my first comment that an interface does not seem like the right solution."},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1435961171,"post_id":31214446,"comment_id":50430567,"body_markdown":"@Cruncher Okay, let&#39;s put it this way: there is no way to enforce immutability of yet-to-be-written code. There are ways to encourage it, one of them being composition.","body":"@Cruncher Okay, let&#39;s put it this way: there is no way to enforce immutability of yet-to-be-written code. There are ways to encourage it, one of them being composition."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435961410,"post_id":31214446,"comment_id":50430613,"body_markdown":"@RealSkeptic - I agree that Employee would possibly be mutable, however, besides making methods protected/protected final, you have to worry about thread safety, how would you make a java class thread safe in this case? 2. You&#39;re correct it could be an attribute, however, I was doing some reading, and this question was bothering me, so I quickly thought of an example.","body":"@RealSkeptic - I agree that Employee would possibly be mutable, however, besides making methods protected/protected final, you have to worry about thread safety, how would you make a java class thread safe in this case? 2. You&#39;re correct it could be an attribute, however, I was doing some reading, and this question was bothering me, so I quickly thought of an example."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435962165,"post_id":31214446,"comment_id":50430760,"body_markdown":"@Cruncher -  Let me simplify my question, is it okay in some cases, for example this one, to create a class that is mutable? When I was reading, I seem to get the idea that creating mutable classes are a definite NO, but, in some cases, making a class that&#39;s mutable does make sense, correct?","body":"@Cruncher -  Let me simplify my question, is it okay in some cases, for example this one, to create a class that is mutable? When I was reading, I seem to get the idea that creating mutable classes are a definite NO, but, in some cases, making a class that&#39;s mutable does make sense, correct?"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1435962224,"post_id":31214446,"comment_id":50430772,"body_markdown":"@Nexusfactor It depends on so many things. Yes, in general you&#39;d want as many of your classes to be immutable as possible. You can for example create an `Employee` class that has a `Department` field, which is then implemented by `IT`, `QA`, `Accounts` and so on. You can now make your `Employee` class immutable on the condition that the `Department` implementations are immutable too. There&#39;s no way to tell they will be but if you design your classes right, you can minimise the risk.","body":"@Nexusfactor It depends on so many things. Yes, in general you&#39;d want as many of your classes to be immutable as possible. You can for example create an <code>Employee</code> class that has a <code>Department</code> field, which is then implemented by <code>IT</code>, <code>QA</code>, <code>Accounts</code> and so on. You can now make your <code>Employee</code> class immutable on the condition that the <code>Department</code> implementations are immutable too. There&#39;s no way to tell they will be but if you design your classes right, you can minimise the risk."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435962288,"post_id":31214446,"comment_id":50430793,"body_markdown":"@biziclop - Thanks for the reply, could you show me an example, how you would implement the above requirement in code? Just for my own understanding. You don&#39;t have to do all of them, Just Employee and QA","body":"@biziclop - Thanks for the reply, could you show me an example, how you would implement the above requirement in code? Just for my own understanding. You don&#39;t have to do all of them, Just Employee and QA"}],"answers":[{"comments":[{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435963033,"post_id":31214896,"comment_id":50430971,"body_markdown":"Thanks for the code. I was also thinking, just make IT, QA, and Accountant, all final classes without the abstract employee, could that also work?","body":"Thanks for the code. I was also thinking, just make IT, QA, and Accountant, all final classes without the abstract employee, could that also work?"},{"owner":{"account_id":3186389,"reputation":2247,"user_id":2691904,"display_name":"hugh"},"score":0,"creation_date":1435963681,"post_id":31214896,"comment_id":50431104,"body_markdown":"I&#39;m sure you could make it work , but it&#39;d mean a lot of switching code elsewhere to handle them all.  It&#39;d probably be very hard to add new employee types too, requiring changes to every part of the system that handles these objects.  That suggests this is quite brittle and likely to cause you pain (and expense) in the long run.","body":"I&#39;m sure you could make it work , but it&#39;d mean a lot of switching code elsewhere to handle them all.  It&#39;d probably be very hard to add new employee types too, requiring changes to every part of the system that handles these objects.  That suggests this is quite brittle and likely to cause you pain (and expense) in the long run."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435963864,"post_id":31214896,"comment_id":50431144,"body_markdown":"In your opinion, in a situation such as this, you would create mutable classes, correct? How would this be done in a real world environment? Are mutable classes created and code for thread safety put in?","body":"In your opinion, in a situation such as this, you would create mutable classes, correct? How would this be done in a real world environment? Are mutable classes created and code for thread safety put in?"},{"owner":{"account_id":3186389,"reputation":2247,"user_id":2691904,"display_name":"hugh"},"score":0,"creation_date":1435963903,"post_id":31214896,"comment_id":50431152,"body_markdown":"That said, if you want a low-tech approach, you could always make a big immutable Employee class containing an &quot;employee type&quot; and optional fields for each of the subtypes.  (This works well if you want to persist your objects in SQL tables, and is one of the common patterns in JPA for storing subclasses).","body":"That said, if you want a low-tech approach, you could always make a big immutable Employee class containing an &quot;employee type&quot; and optional fields for each of the subtypes.  (This works well if you want to persist your objects in SQL tables, and is one of the common patterns in JPA for storing subclasses)."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435964440,"post_id":31214896,"comment_id":50431270,"body_markdown":"I was reading Effective Java, and it said to favor interfaces over abstract classes, now, if I were to use an interface, and in the interface only provide the getters, and certain methods, would that be okay as well? Provided in my classes the variables are private final. This way, the classes can&#39;t be changed after creation.","body":"I was reading Effective Java, and it said to favor interfaces over abstract classes, now, if I were to use an interface, and in the interface only provide the getters, and certain methods, would that be okay as well? Provided in my classes the variables are private final. This way, the classes can&#39;t be changed after creation."},{"owner":{"account_id":3186389,"reputation":2247,"user_id":2691904,"display_name":"hugh"},"score":0,"creation_date":1435964764,"post_id":31214896,"comment_id":50431326,"body_markdown":"Personally, I&#39;d be happy to use comments - documentation is a valid way to get things done too!  In real world scenarios I&#39;d expect to rarely share the instances between threads, much more likely I&#39;d be loading and saving them from persistent storage and worrying about how to handle different threads updating the same record in the database.","body":"Personally, I&#39;d be happy to use comments - documentation is a valid way to get things done too!  In real world scenarios I&#39;d expect to rarely share the instances between threads, much more likely I&#39;d be loading and saving them from persistent storage and worrying about how to handle different threads updating the same record in the database."},{"owner":{"account_id":3186389,"reputation":2247,"user_id":2691904,"display_name":"hugh"},"score":0,"creation_date":1435965622,"post_id":31214896,"comment_id":50431492,"body_markdown":"Interface-wise: I&#39;d say *favour* interfaces, but they&#39;re not the right answer every time.  An interface describes a behaviour, an abstract class describes a more general version of a thing - an employee sounds more like a general version of &quot;IT employee&quot; than a set of behaviours to me.  Particularly, I&#39;d expect employees to have implementation in common, which would sit well inside the abstract class.","body":"Interface-wise: I&#39;d say <i>favour</i> interfaces, but they&#39;re not the right answer every time.  An interface describes a behaviour, an abstract class describes a more general version of a thing - an employee sounds more like a general version of &quot;IT employee&quot; than a set of behaviours to me.  Particularly, I&#39;d expect employees to have implementation in common, which would sit well inside the abstract class."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435965840,"post_id":31214896,"comment_id":50431522,"body_markdown":"In this particular case, could I make the employee class abstract, and use subclasses, as I stated I kind of get the idea that creating mutable object is undesirable, however, sometimes, it is justified correct? In this particular case, you could create abstract class/subclasses right?","body":"In this particular case, could I make the employee class abstract, and use subclasses, as I stated I kind of get the idea that creating mutable object is undesirable, however, sometimes, it is justified correct? In this particular case, you could create abstract class/subclasses right?"},{"owner":{"account_id":3186389,"reputation":2247,"user_id":2691904,"display_name":"hugh"},"score":0,"creation_date":1435966133,"post_id":31214896,"comment_id":50431574,"body_markdown":"I wouldn&#39;t say &quot;undesirable&quot; so much as idealistic.  It&#39;s a good property, but make sure you know where the value is to your task, and don&#39;t die in a ditch just for the principle of it.","body":"I wouldn&#39;t say &quot;undesirable&quot; so much as idealistic.  It&#39;s a good property, but make sure you know where the value is to your task, and don&#39;t die in a ditch just for the principle of it."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435966213,"post_id":31214896,"comment_id":50431586,"body_markdown":"In this particular case, creating and using abstract/subclasses is alright, correct?","body":"In this particular case, creating and using abstract/subclasses is alright, correct?"}],"tags":[],"owner":{"account_id":3186389,"reputation":2247,"user_id":2691904,"display_name":"hugh"},"comment_count":10,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435962826,"creation_date":1435962826,"answer_id":31214896,"question_id":31214446,"body_markdown":"It&#39;s worth thinking why immutability is desirable - usually it&#39;s because you have data which you need to assume is not going to change.\r\nOne approach to do this is to make a final Employee class with a non-final member containing the details specific to the subclasses:\r\n\r\n    public final class Employee {\r\n    \tprivate final long employeeId;\r\n    \tprivate final String firstName;\r\n    \tprivate final String lastName;\r\n    \tprivate final DepartmentalDetails details;\r\n    \t\r\n    \tpublic Employee(long employeeId, String firstName, String lastName,\r\n    \t\t\tDepartmentalDetails details) {\r\n    \t\tsuper();\r\n    \t\tthis.employeeId = employeeId;\r\n    \t\tthis.firstName = firstName;\r\n    \t\tthis.lastName = lastName;\r\n    \t\tthis.details = details;\r\n    \t}\r\n    }\r\n    \r\n    abstract class DepartmentalDetails {\r\n    }\r\n    \r\n    final class AccountantDetails extends DepartmentalDetails {\r\n    \t// Things specific to accountants\r\n    }\r\n    \r\n    final class ITDetails extends DepartmentalDetails{\r\n    \t// Things specific to IT\r\n    }\r\n    \r\n    final class QualityAssuranceDetails extends DepartmentalDetails{\r\n    \t// Things specific to QA\r\n    }\r\n\r\nThis isn&#39;t technically immutable (since an implementer could write a mutable implementation of DepartmentalDetails) but it *does* encapsulate the mutability, so it gives the same benefits while allowing some extensibility.\r\n(This is related to this is the concept of [composition vs inheritance][1], although I don&#39;t believe this pattern is how that is normally used.)\r\n\r\nOne other possibility I think is worth considering - you could make the three subclasses as you suggest, make them all final, and stick a big comment on the abstract class saying all implementations should be immutable.  It&#39;s not bulletproof, but on a small development project the complexity saving is likely to be worth the tiny risk.\r\n\r\n\r\n  [1]: http://javarevisited.blogspot.co.uk/2013/06/why-favor-composition-over-inheritance-java-oops-design.html","title":"Immutable Classes and Subclasses","body":"<p>It's worth thinking why immutability is desirable - usually it's because you have data which you need to assume is not going to change.\nOne approach to do this is to make a final Employee class with a non-final member containing the details specific to the subclasses:</p>\n\n<pre><code>public final class Employee {\n    private final long employeeId;\n    private final String firstName;\n    private final String lastName;\n    private final DepartmentalDetails details;\n\n    public Employee(long employeeId, String firstName, String lastName,\n            DepartmentalDetails details) {\n        super();\n        this.employeeId = employeeId;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.details = details;\n    }\n}\n\nabstract class DepartmentalDetails {\n}\n\nfinal class AccountantDetails extends DepartmentalDetails {\n    // Things specific to accountants\n}\n\nfinal class ITDetails extends DepartmentalDetails{\n    // Things specific to IT\n}\n\nfinal class QualityAssuranceDetails extends DepartmentalDetails{\n    // Things specific to QA\n}\n</code></pre>\n\n<p>This isn't technically immutable (since an implementer could write a mutable implementation of DepartmentalDetails) but it <em>does</em> encapsulate the mutability, so it gives the same benefits while allowing some extensibility.\n(This is related to this is the concept of <a href=\"http://javarevisited.blogspot.co.uk/2013/06/why-favor-composition-over-inheritance-java-oops-design.html\" rel=\"nofollow\">composition vs inheritance</a>, although I don't believe this pattern is how that is normally used.)</p>\n\n<p>One other possibility I think is worth considering - you could make the three subclasses as you suggest, make them all final, and stick a big comment on the abstract class saying all implementations should be immutable.  It's not bulletproof, but on a small development project the complexity saving is likely to be worth the tiny risk.</p>\n"},{"comments":[{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435964149,"post_id":31215021,"comment_id":50431206,"body_markdown":"Thanks for the code, just for my own understanding, could you do it with the employee/QA example? Secondly, In certain cases, such as the example in my post, could you create mutable classes and leave it? Provided that you add code for thread safety?","body":"Thanks for the code, just for my own understanding, could you do it with the employee/QA example? Secondly, In certain cases, such as the example in my post, could you create mutable classes and leave it? Provided that you add code for thread safety?"},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435964333,"post_id":31215021,"comment_id":50431247,"body_markdown":"I was reading Effective Java, and it said to favor interfaces over abstract classes, now, if I were to use an interface, and in the interface only provide the getters, and certain methods, would that be okay as well? Provided in my classes the variables are private final. This way, the classes can&#39;t be changed after creation.","body":"I was reading Effective Java, and it said to favor interfaces over abstract classes, now, if I were to use an interface, and in the interface only provide the getters, and certain methods, would that be okay as well? Provided in my classes the variables are private final. This way, the classes can&#39;t be changed after creation."},{"owner":{"account_id":10730,"reputation":118663,"user_id":20394,"accept_rate":73,"display_name":"Mike Samuel"},"score":0,"creation_date":1436019671,"post_id":31215021,"comment_id":50443176,"body_markdown":"@Nexusfactor, no.  There&#39;s no way to restrict classes that implement an interface except by restricting the visibility of the interface as a whole which leaves your clients without a way to mention a base type.","body":"@Nexusfactor, no.  There&#39;s no way to restrict classes that implement an interface except by restricting the visibility of the interface as a whole which leaves your clients without a way to mention a base type."},{"owner":{"account_id":10730,"reputation":118663,"user_id":20394,"accept_rate":73,"display_name":"Mike Samuel"},"score":0,"creation_date":1436019960,"post_id":31215021,"comment_id":50443277,"body_markdown":"@Nexusfactor, please see my edits that show some skeleton code for some of your employee classes.","body":"@Nexusfactor, please see my edits that show some skeleton code for some of your employee classes."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1436021300,"post_id":31215021,"comment_id":50443696,"body_markdown":"Just for my understanding, could you just show me how to defensive copy in this case name? Could I just make the getter final?","body":"Just for my understanding, could you just show me how to defensive copy in this case name? Could I just make the getter final?"},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1436021724,"post_id":31215021,"comment_id":50443822,"body_markdown":"You would just say this.name = new name(parm1, parm2); correct?","body":"You would just say this.name = new name(parm1, parm2); correct?"},{"owner":{"account_id":10730,"reputation":118663,"user_id":20394,"accept_rate":73,"display_name":"Mike Samuel"},"score":0,"creation_date":1436062426,"post_id":31215021,"comment_id":50452960,"body_markdown":"Re defensive copying, if your input is mutable, then you can&#39;t rely on whoever called the constructor modifying it after the constructor finished, so you make a copy.","body":"Re defensive copying, if your input is mutable, then you can&#39;t rely on whoever called the constructor modifying it after the constructor finished, so you make a copy."}],"tags":[],"owner":{"account_id":10730,"reputation":118663,"user_id":20394,"accept_rate":73,"display_name":"Mike Samuel"},"comment_count":7,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1436020374,"creation_date":1435963892,"answer_id":31215021,"question_id":31214446,"body_markdown":"&gt; If you want to enforce immutability, you cannot have subclasses.\r\n\r\nThis is almost true, but not entirely.  To restate it:\r\n\r\n&gt; If you want to enforce immutability, you must ensure that all sub-classes are immutable.\r\n\r\nThe problem with allowing subclassing is that normally anyone who can author a class can subclass any public non-final class.\r\n\r\nBut all subclasses must invoke one of their super-class&#39;s constructors.  Package-private constructors can only be invoked by subclasses in the same package.\r\n\r\nIf you [seal packages](https://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html) so that you control which classes are in your package, you can constrain subclassing.  First define a class you want to subclass:\r\n\r\n    public abstract class ImmutableBaseClass {\r\n      ImmutableBaseClass(...) {\r\n        ...\r\n      }\r\n    }\r\n\r\nSince all sub-classes have to have access to the super-constructor, you can ensure all the sub-classes in the package you define follow immutable discipline.\r\n\r\n    public final class ImmutableConcreteClass extends ImmutableBaseClass {\r\n      public ImmutableConcreteClass(...) {\r\n        super(...);\r\n      }\r\n    }\r\n\r\n-----\r\n\r\nTo apply this to your example,\r\n\r\n    public abstract class Employee {\r\n      private final Id id;\r\n      private final Name name;\r\n\r\n      // Package private constructor in sub-classable class.\r\n      Employee(Id id, Name name, ...) {\r\n        // Defensively copy as necessary.\r\n      }\r\n    }\r\n\r\n    public final class Accountant extends Employee {\r\n      // Public constructos allowed in final sub-classes.\r\n      public Accountant(Id id, Name name, ...) {\r\n        super(id, name, ...);  // Call to super works from same package.\r\n      }\r\n    }\r\n\r\n    public final class ITWorker extends Employee {\r\n      // Ditto.\r\n      public ITWorker(Id id, Name name, ...) {\r\n        super(id, name, ...);\r\n      }\r\n    }\r\n","title":"Immutable Classes and Subclasses","body":"<blockquote>\n  <p>If you want to enforce immutability, you cannot have subclasses.</p>\n</blockquote>\n\n<p>This is almost true, but not entirely.  To restate it:</p>\n\n<blockquote>\n  <p>If you want to enforce immutability, you must ensure that all sub-classes are immutable.</p>\n</blockquote>\n\n<p>The problem with allowing subclassing is that normally anyone who can author a class can subclass any public non-final class.</p>\n\n<p>But all subclasses must invoke one of their super-class's constructors.  Package-private constructors can only be invoked by subclasses in the same package.</p>\n\n<p>If you <a href=\"https://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html\" rel=\"noreferrer\">seal packages</a> so that you control which classes are in your package, you can constrain subclassing.  First define a class you want to subclass:</p>\n\n<pre><code>public abstract class ImmutableBaseClass {\n  ImmutableBaseClass(...) {\n    ...\n  }\n}\n</code></pre>\n\n<p>Since all sub-classes have to have access to the super-constructor, you can ensure all the sub-classes in the package you define follow immutable discipline.</p>\n\n<pre><code>public final class ImmutableConcreteClass extends ImmutableBaseClass {\n  public ImmutableConcreteClass(...) {\n    super(...);\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>To apply this to your example,</p>\n\n<pre><code>public abstract class Employee {\n  private final Id id;\n  private final Name name;\n\n  // Package private constructor in sub-classable class.\n  Employee(Id id, Name name, ...) {\n    // Defensively copy as necessary.\n  }\n}\n\npublic final class Accountant extends Employee {\n  // Public constructos allowed in final sub-classes.\n  public Accountant(Id id, Name name, ...) {\n    super(id, name, ...);  // Call to super works from same package.\n  }\n}\n\npublic final class ITWorker extends Employee {\n  // Ditto.\n  public ITWorker(Id id, Name name, ...) {\n    super(id, name, ...);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435973484,"creation_date":1435971543,"answer_id":31215834,"question_id":31214446,"body_markdown":"`java.lang.String` is special, very special - it&#39;s a basic type used everywhere. In particular, java security framework heavily depends on Strings, therefore it is critical that everybody sees the same content of a String, i.e. a String must be immutable (even under unsafe publication!) (Unfortunately a lot of people blindly apply those strict requirements of String to their own classes, often unjustified) \r\n\r\nEven so, it&#39;s not really a big deal if String can be subclassed, as long as all methods in String are final, so that a subclass cannot mess with what a String is supposed to be like. If I&#39;m accepting a String, and you give me a subclass of String, I don&#39;t care what you do in the subclass; as long as the content and the behavior of the String superclass is not tempered with. \r\n\r\nOf course, being such a basic type, it&#39;s wise to mark `String` as final to avoid all confusions. \r\n\r\n----\r\n\r\nIn your use case, you can just have an abstract Employee, and make sure all subclasses are implemented as immutable. Any Employee object, at runtime, must belong to a concrete subclass, which is immutable.\r\n\r\nIf, you cannot control who subclasses Employee, and you suspect that they are either morons that don&#39;t know what they are doing, or villains that  intend to cause troubles, you can at least protect the part in Employee so that subclasses cannot mess it up. For example, the name of an Employee is immutable no matter what subclass does -\r\n\r\n    final String name;\r\n    \r\n    protected Employee(String name) { this.name = name; }\r\n\r\n    public final String getName(){ return name; }  // final method!\r\n\r\n\r\nHowever, such defensive design is often unjustified in most applications by most programmers.  We don&#39;t have to be so paranoid. 99% of coding are cooperative. No big deal if someone really need to override something, let them. 99% of us are not writing some core APIs like String or Collection. A lot of Bloch&#39;s advices, unfortunately, are based on that kind of use cases. The advices are not really helpful to most programmers, especially new ones, churning out in-house apps.","title":"Immutable Classes and Subclasses","body":"<p><code>java.lang.String</code> is special, very special - it's a basic type used everywhere. In particular, java security framework heavily depends on Strings, therefore it is critical that everybody sees the same content of a String, i.e. a String must be immutable (even under unsafe publication!) (Unfortunately a lot of people blindly apply those strict requirements of String to their own classes, often unjustified) </p>\n\n<p>Even so, it's not really a big deal if String can be subclassed, as long as all methods in String are final, so that a subclass cannot mess with what a String is supposed to be like. If I'm accepting a String, and you give me a subclass of String, I don't care what you do in the subclass; as long as the content and the behavior of the String superclass is not tempered with. </p>\n\n<p>Of course, being such a basic type, it's wise to mark <code>String</code> as final to avoid all confusions. </p>\n\n<hr>\n\n<p>In your use case, you can just have an abstract Employee, and make sure all subclasses are implemented as immutable. Any Employee object, at runtime, must belong to a concrete subclass, which is immutable.</p>\n\n<p>If, you cannot control who subclasses Employee, and you suspect that they are either morons that don't know what they are doing, or villains that  intend to cause troubles, you can at least protect the part in Employee so that subclasses cannot mess it up. For example, the name of an Employee is immutable no matter what subclass does -</p>\n\n<pre><code>final String name;\n\nprotected Employee(String name) { this.name = name; }\n\npublic final String getName(){ return name; }  // final method!\n</code></pre>\n\n<p>However, such defensive design is often unjustified in most applications by most programmers.  We don't have to be so paranoid. 99% of coding are cooperative. No big deal if someone really need to override something, let them. 99% of us are not writing some core APIs like String or Collection. A lot of Bloch's advices, unfortunately, are based on that kind of use cases. The advices are not really helpful to most programmers, especially new ones, churning out in-house apps.</p>\n"},{"tags":[],"owner":{"account_id":14860080,"reputation":934,"user_id":10731216,"display_name":"HereAndBeyond"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689797655,"creation_date":1689797655,"answer_id":76724889,"question_id":31214446,"body_markdown":"### Java 17 and &quot;Sealed Classes and Interfaces&quot; feature\r\n\r\nI think with Java 17 and &quot;Sealed Classes and Interfaces&quot; feature it became a bit more easier to follow immutability while using inheritance.\r\n\r\nNow we can just restrict classes which may extend the parent class to ones that we are trusted to. \r\n\r\nLet me show an example based on the suggested entities and the feature (pay attention on `MutabilityBreaker` which is not compiled due to the restriction of `Employee` class):\r\n```java\r\n/**\r\n * Class that we would like to be immutable.\r\n * Pay attention on &#39;permits&#39; section\r\n */\r\npublic sealed class Employee permits Accountant, ITWorker {\r\n\r\n    private final String id;\r\n\r\n    public Employee(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Class that we would like to inherit\r\n * from {@link Employee} and not break immutability\r\n */\r\npublic final class Accountant extends Employee {\r\n\r\n    private final List&lt;String&gt; qualifications;\r\n\r\n    // I&#39;m very responsible. I don&#39;t want to break immutability, so I\r\n    // carefully handle input collection\r\n    public Accountant(String id, List&lt;String&gt; qualifications) {\r\n        super(id);\r\n        this.qualifications = List.copyOf(qualifications);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Another class that we would like to inherit\r\n * from {@link Employee} and not break immutability\r\n */\r\npublic final class ITWorker extends Employee {\r\n\r\n    private final List&lt;String&gt; skills;\r\n\r\n    // I&#39;m very responsible too, I don&#39;t want to break\r\n    // immutability too, so I carefully handle input collection too\r\n    public ITWorker(String id, List&lt;String&gt; skills) {\r\n        super(id);\r\n        this.skills = List.copyOf(skills);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Class that was written to break immutability\r\n * &lt;p&gt;\r\n * COMPILE ERROR: &#39;MutabilityBreaker&#39; is not allowed in the sealed hierarchy\r\n */\r\npublic class MutabilityBreaker extends Employee {\r\n\r\n    private final List&lt;String&gt; mutableCollection;\r\n\r\n    // I&#39;m not responsible, I don&#39;t want to follow immutability\r\n    public MutabilityBreaker(String id, List&lt;String&gt; mutableCollection) {\r\n        super(id);\r\n        this.mutableCollection = mutableCollection;\r\n    }\r\n\r\n}\r\n```","title":"Immutable Classes and Subclasses","body":"<h3>Java 17 and &quot;Sealed Classes and Interfaces&quot; feature</h3>\n<p>I think with Java 17 and &quot;Sealed Classes and Interfaces&quot; feature it became a bit more easier to follow immutability while using inheritance.</p>\n<p>Now we can just restrict classes which may extend the parent class to ones that we are trusted to.</p>\n<p>Let me show an example based on the suggested entities and the feature (pay attention on <code>MutabilityBreaker</code> which is not compiled due to the restriction of <code>Employee</code> class):</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Class that we would like to be immutable.\n * Pay attention on 'permits' section\n */\npublic sealed class Employee permits Accountant, ITWorker {\n\n    private final String id;\n\n    public Employee(String id) {\n        this.id = id;\n    }\n\n}\n\n/**\n * Class that we would like to inherit\n * from {@link Employee} and not break immutability\n */\npublic final class Accountant extends Employee {\n\n    private final List&lt;String&gt; qualifications;\n\n    // I'm very responsible. I don't want to break immutability, so I\n    // carefully handle input collection\n    public Accountant(String id, List&lt;String&gt; qualifications) {\n        super(id);\n        this.qualifications = List.copyOf(qualifications);\n    }\n\n}\n\n/**\n * Another class that we would like to inherit\n * from {@link Employee} and not break immutability\n */\npublic final class ITWorker extends Employee {\n\n    private final List&lt;String&gt; skills;\n\n    // I'm very responsible too, I don't want to break\n    // immutability too, so I carefully handle input collection too\n    public ITWorker(String id, List&lt;String&gt; skills) {\n        super(id);\n        this.skills = List.copyOf(skills);\n    }\n\n}\n\n/**\n * Class that was written to break immutability\n * &lt;p&gt;\n * COMPILE ERROR: 'MutabilityBreaker' is not allowed in the sealed hierarchy\n */\npublic class MutabilityBreaker extends Employee {\n\n    private final List&lt;String&gt; mutableCollection;\n\n    // I'm not responsible, I don't want to follow immutability\n    public MutabilityBreaker(String id, List&lt;String&gt; mutableCollection) {\n        super(id);\n        this.mutableCollection = mutableCollection;\n    }\n\n}\n</code></pre>\n"}],"owner":{"display_name":"user5078574"},"comment_count":23,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7833,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":31215021,"answer_count":4,"score":9,"last_activity_date":1689797655,"creation_date":1435959369,"question_id":31214446,"body_markdown":"I&#39;m trying to learn about mutable/immutable classes and I came across [this post][1]\r\n\r\nPart of the answer provided was: \r\n\r\n&gt; If you want to enforce immutability, you cannot have subclasses. See\r\n&gt; for example java.lang.String, which is a final class for this reason:\r\n&gt; To prevent people from subclassing String to make it mutable.\r\n\r\nAlright, I understand it, **but**, how would you handle this issue. Let&#39;s say you were given the task of creating 3 Employee classes, Accountant, ITDepartment, and QualityAssurance. Now, you could create an abstract class called Employee with common methods that would be shared by all (employee ID, name, salary etc..), however, your classes are no longer immutable.\r\n\r\nUsing Java, How then would you solve this problem ? Would you create the 3 classes, make them final, and don&#39;t implement an abstract method? (So, no subclassing whatsoever) or would you use an interface, and provide only the getters?  \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11183187/overloading-a-method-in-an-immutable-class","title":"Immutable Classes and Subclasses","body":"<p>I'm trying to learn about mutable/immutable classes and I came across <a href=\"https://stackoverflow.com/questions/11183187/overloading-a-method-in-an-immutable-class\">this post</a></p>\n\n<p>Part of the answer provided was: </p>\n\n<blockquote>\n  <p>If you want to enforce immutability, you cannot have subclasses. See\n  for example java.lang.String, which is a final class for this reason:\n  To prevent people from subclassing String to make it mutable.</p>\n</blockquote>\n\n<p>Alright, I understand it, <strong>but</strong>, how would you handle this issue. Let's say you were given the task of creating 3 Employee classes, Accountant, ITDepartment, and QualityAssurance. Now, you could create an abstract class called Employee with common methods that would be shared by all (employee ID, name, salary etc..), however, your classes are no longer immutable.</p>\n\n<p>Using Java, How then would you solve this problem ? Would you create the 3 classes, make them final, and don't implement an abstract method? (So, no subclassing whatsoever) or would you use an interface, and provide only the getters?  </p>\n"},{"tags":["java","android","call","telecom-manager"],"owner":{"account_id":29050076,"reputation":1,"user_id":22253102,"display_name":"Nicol&#225;s Calder&#243;n Zamora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689797360,"creation_date":1689779384,"question_id":76722752,"body_markdown":"I&#39;m doing an app to do Calls and check the call states in real time with the library Telecom Manager using the class Call to get this states, but I try with some methods and i don&#39;t get that\r\n\r\nI need a example code to use with my code","title":"how use Call class of Telecom Manager?","body":"<p>I'm doing an app to do Calls and check the call states in real time with the library Telecom Manager using the class Call to get this states, but I try with some methods and i don't get that</p>\n<p>I need a example code to use with my code</p>\n"},{"tags":["java","database","lib"],"owner":{"account_id":21915060,"reputation":1,"user_id":22254585,"display_name":"Its Domme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689797202,"creation_date":1689797202,"question_id":76724856,"body_markdown":"I can&#39;t create a channel. I created a button for the message, I need it to create a channel when it is pressed, with access to it for the player who pressed the button, and for the moderators\r\n\r\n```\r\nGuild guild = event.getJDA().getGuildById(&quot;957265304180887642&quot;);\r\n            if (guild != null) {\r\n                Category category = guild.getCategoryById(&quot;1131306931991101522&quot;);\r\n                if (category != null) {\r\n                    guild.createTextChannel(&quot;  &quot; + event.getUser().getName())\r\n                            .setParent(category)\r\n                            .addPermissionOverride(guild.getRoleById(&quot;957267206914330665&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\r\n                            .addPermissionOverride(guild.getRoleById(&quot;957266939577765928&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\r\n                            .addPermissionOverride(guild.getRoleById(&quot;957266149735792731&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\r\n                            .addPermissionOverride(guild.getRoleById(&quot;957265799654043678&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\r\n                            .addPermissionOverride(guild.getPublicRole(), null, EnumSet.of(Permission.VIEW_CHANNEL))\r\n                            .queue();\r\n                }\r\n            }\r\n```\r\n\r\n\r\nWhen you click on the button, it says &quot;interaction error&quot;. help me please","title":"Java, JDA. How create channel?","body":"<p>I can't create a channel. I created a button for the message, I need it to create a channel when it is pressed, with access to it for the player who pressed the button, and for the moderators</p>\n<pre><code>Guild guild = event.getJDA().getGuildById(&quot;957265304180887642&quot;);\n            if (guild != null) {\n                Category category = guild.getCategoryById(&quot;1131306931991101522&quot;);\n                if (category != null) {\n                    guild.createTextChannel(&quot;  &quot; + event.getUser().getName())\n                            .setParent(category)\n                            .addPermissionOverride(guild.getRoleById(&quot;957267206914330665&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\n                            .addPermissionOverride(guild.getRoleById(&quot;957266939577765928&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\n                            .addPermissionOverride(guild.getRoleById(&quot;957266149735792731&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\n                            .addPermissionOverride(guild.getRoleById(&quot;957265799654043678&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\n                            .addPermissionOverride(guild.getPublicRole(), null, EnumSet.of(Permission.VIEW_CHANNEL))\n                            .queue();\n                }\n            }\n</code></pre>\n<p>When you click on the button, it says &quot;interaction error&quot;. help me please</p>\n"},{"tags":["java","spring-boot","data-structures","websocket"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1689797023,"post_id":76723225,"comment_id":135266163,"body_markdown":"how do you know which users you have to notify of changes in a certain topic they subscribed to?","body":"how do you know which users you have to notify of changes in a certain topic they subscribed to?"},{"owner":{"account_id":5278173,"reputation":51,"user_id":4214370,"display_name":"Allteran"},"score":0,"creation_date":1689846203,"post_id":76723225,"comment_id":135272269,"body_markdown":"The idea is to increment the counter after the user subscribed, so after that counter could be updated in real-time for everyone who logged in. It can be done by subscribing on another topic (i.e. &#39;/topic/memberCount&#39;) so every user that logged in can see that updates","body":"The idea is to increment the counter after the user subscribed, so after that counter could be updated in real-time for everyone who logged in. It can be done by subscribing on another topic (i.e. &#39;/topic/memberCount&#39;) so every user that logged in can see that updates"}],"owner":{"account_id":5278173,"reputation":51,"user_id":4214370,"display_name":"Allteran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689796774,"creation_date":1689782634,"question_id":76723225,"body_markdown":"I&#39;m currently working on the backend of a chat application. Of course, messages in chat work with Websockets as well to implement real-time communication.\r\nNow I faced a problem: I need to indicate how many users joined the chat room. \r\nWhen user enters chat room - he subscribing to the certain topic and sends message to that topic:\r\n```\r\n@MessageMapping(&quot;/chat.join/{id}&quot;)\r\n    @SendTo(&quot;/topic/chat-channel/{id}&quot;)\r\n    public ChatMessage joinChannel(@DestinationVariable(&quot;id&quot;)String destId,\r\n                                   @Payload ChatMessage body,\r\n                                   SimpMessageHeaderAccessor headerAccessor) {\r\n        User user = (User) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n        ChatMessage modifiedMessage = chatService.joinChannel(body, user.getId(), destId);\r\n\r\n        //we put channelId and userId to sessionAttributes for manipulate with that using HandlerInterceptor\r\n        headerAccessor.getSessionAttributes().put(&quot;userId&quot;, modifiedMessage.getSender());\r\n        headerAccessor.getSessionAttributes().put(&quot;channelId&quot;, modifiedMessage.getReceiver());\r\n        return body;\r\n```\r\nNow every time when a user subscribes to a certain topic - I want to increment the counter which will display the number of chat room members. I decided to implement it with ```Cache```, but every guide that I&#39;ve found said: \r\n\r\n&gt; Caching should be used when data DON&#39;T HAVE TO CHANGES FREQUENTLY\r\n\r\nCan you please give me advice on which way to store members count should I use? Is it ok to write this value to the database (mongoDB)? Or better just implement some kind of ```Singletone```?\r\nThanks","title":"How to count subscribers of certain topic - Websocket, Spring boot","body":"<p>I'm currently working on the backend of a chat application. Of course, messages in chat work with Websockets as well to implement real-time communication.\nNow I faced a problem: I need to indicate how many users joined the chat room.\nWhen user enters chat room - he subscribing to the certain topic and sends message to that topic:</p>\n<pre><code>@MessageMapping(&quot;/chat.join/{id}&quot;)\n    @SendTo(&quot;/topic/chat-channel/{id}&quot;)\n    public ChatMessage joinChannel(@DestinationVariable(&quot;id&quot;)String destId,\n                                   @Payload ChatMessage body,\n                                   SimpMessageHeaderAccessor headerAccessor) {\n        User user = (User) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n        ChatMessage modifiedMessage = chatService.joinChannel(body, user.getId(), destId);\n\n        //we put channelId and userId to sessionAttributes for manipulate with that using HandlerInterceptor\n        headerAccessor.getSessionAttributes().put(&quot;userId&quot;, modifiedMessage.getSender());\n        headerAccessor.getSessionAttributes().put(&quot;channelId&quot;, modifiedMessage.getReceiver());\n        return body;\n</code></pre>\n<p>Now every time when a user subscribes to a certain topic - I want to increment the counter which will display the number of chat room members. I decided to implement it with <code>Cache</code>, but every guide that I've found said:</p>\n<blockquote>\n<p>Caching should be used when data DON'T HAVE TO CHANGES FREQUENTLY</p>\n</blockquote>\n<p>Can you please give me advice on which way to store members count should I use? Is it ok to write this value to the database (mongoDB)? Or better just implement some kind of <code>Singletone</code>?\nThanks</p>\n"},{"tags":["java","performance","hibernate","jpa","transactions"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":2,"creation_date":1689799487,"post_id":76724176,"comment_id":135266531,"body_markdown":"As mentioned in the very well written answer - it depends. Don&#39;t discount though that read queries can obtain and release connections to a read-pool for reuse, while transactional methods must hold that connection for the life of the method/transaction, preventing other threads from reusing that resource. Some read connections can be used under the covers concurrently as well, so you can use far fewer DB connections for reads outside of transactions than you can within them. There are many many resources and issues to consider when deciding what to do for performance","body":"As mentioned in the very well written answer - it depends. Don&#39;t discount though that read queries can obtain and release connections to a read-pool for reuse, while transactional methods must hold that connection for the life of the method/transaction, preventing other threads from reusing that resource. Some read connections can be used under the covers concurrently as well, so you can use far fewer DB connections for reads outside of transactions than you can within them. There are many many resources and issues to consider when deciding what to do for performance"},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1689811773,"post_id":76724176,"comment_id":135267891,"body_markdown":"@Chris It would be interesting to see your own answer. Is a read-pool related to the database or an application connection pool?","body":"@Chris It would be interesting to see your own answer. Is a read-pool related to the database or an application connection pool?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1689815039,"post_id":76724176,"comment_id":135268152,"body_markdown":"This is hibernate specific/tagged, and I am not familiar enough with all the settings and configuration options that I could try to answer a complex question reasonably without risking steering people wrong. Performance tuning is an art and all I can do is scribble. I mentioned a separate read pool, as this is native EclipseLink separation ( https://eclipse.dev/eclipselink/documentation/2.7/concepts/data_access006.htm  ) where it was known far fewer connection were needed for exclusive read operations than are needed for writes because of transactions.","body":"This is hibernate specific/tagged, and I am not familiar enough with all the settings and configuration options that I could try to answer a complex question reasonably without risking steering people wrong. Performance tuning is an art and all I can do is scribble. I mentioned a separate read pool, as this is native EclipseLink separation ( <a href=\"https://eclipse.dev/eclipselink/documentation/2.7/concepts/data_access006.htm\" rel=\"nofollow noreferrer\">eclipse.dev/eclipselink/documentation/2.7/concepts/&hellip;</a>  ) where it was known far fewer connection were needed for exclusive read operations than are needed for writes because of transactions."},{"owner":{"account_id":1126061,"reputation":2343,"user_id":2123050,"accept_rate":73,"display_name":"FuryFart"},"score":0,"creation_date":1701863345,"post_id":76724176,"comment_id":136827049,"body_markdown":"The Transactional annotation will have no significant effect on performance. With Transactional you can ensure that your business functions leave behind consistent data. Either all data operations succeeded. Or non of them succeeded in case of error. (transaction rollback).","body":"The Transactional annotation will have no significant effect on performance. With Transactional you can ensure that your business functions leave behind consistent data. Either all data operations succeeded. Or non of them succeeded in case of error. (transaction rollback)."}],"owner":{"account_id":22923307,"reputation":51,"user_id":17058817,"display_name":"Kirill Zhurbin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1689796573,"creation_date":1689790604,"question_id":76724176,"body_markdown":"I have a misunderstanding about using `@Transactional` annotation and its influence on performance.\r\n\r\nI have a method with several select queries for collecting data via JPA repository\r\n\r\n```\r\nvoid someMethod() {\r\n   repositoryOne.findSomething();\r\n   repositoryTwo.findSomething();\r\n   repositoryThree.findSomething();\r\n   ...\r\n}\r\n```\r\n\r\nI know if I put `@Transactional` annotation above a method then all queries will be executed in the single transaction and in the single session. \r\n\r\nSo, does it make sense to put `@Transactional` annotation above that method to better performance, because all queries will be executed in the single session and application will not spend time and resources on acquiring and release several connections to database?","title":"Many select queries in one session","body":"<p>I have a misunderstanding about using <code>@Transactional</code> annotation and its influence on performance.</p>\n<p>I have a method with several select queries for collecting data via JPA repository</p>\n<pre><code>void someMethod() {\n   repositoryOne.findSomething();\n   repositoryTwo.findSomething();\n   repositoryThree.findSomething();\n   ...\n}\n</code></pre>\n<p>I know if I put <code>@Transactional</code> annotation above a method then all queries will be executed in the single transaction and in the single session.</p>\n<p>So, does it make sense to put <code>@Transactional</code> annotation above that method to better performance, because all queries will be executed in the single session and application will not spend time and resources on acquiring and release several connections to database?</p>\n"},{"tags":["java","swing","netbeans"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1315008395,"post_id":7289219,"comment_id":8781086,"body_markdown":"Regress through `Team &gt; Local History` until the problem is apparent.","body":"Regress through <code>Team &gt; Local History</code> until the problem is apparent."}],"answers":[{"tags":[],"owner":{"account_id":954532,"reputation":91,"user_id":980075,"display_name":"reachSDK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795748,"creation_date":1318664961,"answer_id":7776520,"question_id":7289219,"body_markdown":"I too faced the same problem, and after some search in the web I found the solution for this problem. I don&#39;t have a deep understanding of why and how this problem occurs, but I can share with you the solution I found.\r\n\r\nWhen you get such an error message, go to the menu *View* &amp;rarr; *IDE* Log or you can open the log\r\nfrom `windows_user_Home\\\\.netbeans\\7.0\\var\\log`.\r\n\r\nIn that log, you have to locate the error message you got, for example,\r\n\r\n```lang-none\r\nINFO [org.netbeans.modules.form.BeanSupport]: Cannot create default instance of: test.Application1\r\njava.lang.NullPointerException\r\n    at test.Application1.initLabel(Application1.java:906)\r\n```\r\n\r\nSo the problem is in line 906 of your *.java* file. Open that file and comment those lines and then you will able to overcome the problem.\r\n\r\nYou can add the component to the Form or jInternalFrame or...\r\n\r\nAfter adding the component, you can again uncomment those lines. Just *Clean* and *Build* your project.\r\n\r\n","title":"&quot;Component cannot be instantiated&quot; in NetBeans 7.0.1","body":"<p>I too faced the same problem, and after some search in the web I found the solution for this problem. I don't have a deep understanding of why and how this problem occurs, but I can share with you the solution I found.</p>\n<p>When you get such an error message, go to the menu <em>View</em>  <em>IDE</em> Log or you can open the log\nfrom <code>windows_user_Home\\\\.netbeans\\7.0\\var\\log</code>.</p>\n<p>In that log, you have to locate the error message you got, for example,</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO [org.netbeans.modules.form.BeanSupport]: Cannot create default instance of: test.Application1\njava.lang.NullPointerException\n    at test.Application1.initLabel(Application1.java:906)\n</code></pre>\n<p>So the problem is in line 906 of your <em>.java</em> file. Open that file and comment those lines and then you will able to overcome the problem.</p>\n<p>You can add the component to the Form or jInternalFrame or...</p>\n<p>After adding the component, you can again uncomment those lines. Just <em>Clean</em> and <em>Build</em> your project.</p>\n"},{"tags":[],"owner":{"account_id":1964612,"reputation":31,"user_id":1765203,"display_name":" "},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1689796290,"creation_date":1350905067,"answer_id":13010438,"question_id":7289219,"body_markdown":"Thanks a lot for [that answer][1], but if you want to know the reason, here you are.\r\n\r\nTypically this appears on two positions:\r\n\r\n1. an overridden method on your component.\r\n2. a normal method on your component.\r\n\r\nFor example:\r\n\r\n    package UI.Components;\r\n\r\n    public class LabelComponent extends javax.swing.JLabel {\r\n\r\n        private javax.swing.JLabel label;\r\n\r\n        public TextFieldComponent() {\r\n            label = new javax.swing.JLabel(_label);\r\n            add(label);\r\n        }\r\n\r\n        @Override\r\n        public void setText(String text) {\r\n            label.setText(text);\r\n        }\r\n    }\r\n\r\nThe method `setText(String text)` is called say in the super class constructor, and then it is the overridden new method that would be called in the case of the (label) variable which is used on this method still not being initialized, so a `java.lang.NullPointerException` will be thrown.\r\n\r\nSolution:\r\n\r\n1) `try` ... `catch`:\r\n\r\n        @Override\r\n        public void setText(String text) {\r\n            try {\r\n                label.setText(text);\r\n            } catch (Exception e) {\r\n            }\r\n        }\r\n\r\n2) Check:\r\n\r\n    Use null initialization on declaration\r\n\r\n        private javax.swing.JLabel label = null;\r\n\r\n    Then check on the method\r\n\r\n        @Override\r\n        public void setText(String text) {\r\n            if(label != null)\r\n                label.setText(text);\r\n        }\r\n\r\n3) Use initialization on declaration:\r\n\r\n        private javax.swing.JLabel label = label = new javax.swing.JLabel();\r\n\r\n    and then use the setText method in your constructor\r\n\r\n        label.setText(_label);\r\n\r\nNote:\r\n\r\nIn the case of reason (2), a normal method on your component, it is the same as (1), but you may call the method before initializing the variable or assign null to the variable before calling the method and so on and it can be solved by the same ways.\r\n\r\n  [1]: https://stackoverflow.com/questions/7289219/component-cannot-be-instantiated-in-netbeans-7-0-1/7776520#7776520\r\n\r\n\r\n","title":"&quot;Component cannot be instantiated&quot; in NetBeans 7.0.1","body":"<p>Thanks a lot for <a href=\"https://stackoverflow.com/questions/7289219/component-cannot-be-instantiated-in-netbeans-7-0-1/7776520#7776520\">that answer</a>, but if you want to know the reason, here you are.</p>\n<p>Typically this appears on two positions:</p>\n<ol>\n<li>an overridden method on your component.</li>\n<li>a normal method on your component.</li>\n</ol>\n<p>For example:</p>\n<pre><code>package UI.Components;\n\npublic class LabelComponent extends javax.swing.JLabel {\n\n    private javax.swing.JLabel label;\n\n    public TextFieldComponent() {\n        label = new javax.swing.JLabel(_label);\n        add(label);\n    }\n\n    @Override\n    public void setText(String text) {\n        label.setText(text);\n    }\n}\n</code></pre>\n<p>The method <code>setText(String text)</code> is called say in the super class constructor, and then it is the overridden new method that would be called in the case of the (label) variable which is used on this method still not being initialized, so a <code>java.lang.NullPointerException</code> will be thrown.</p>\n<p>Solution:</p>\n<ol>\n<li><p><code>try</code> ... <code>catch</code>:</p>\n<pre><code> @Override\n public void setText(String text) {\n     try {\n         label.setText(text);\n     } catch (Exception e) {\n     }\n }\n</code></pre>\n</li>\n<li><p>Check:</p>\n<p>Use null initialization on declaration</p>\n<pre><code> private javax.swing.JLabel label = null;\n</code></pre>\n<p>Then check on the method</p>\n<pre><code> @Override\n public void setText(String text) {\n     if(label != null)\n         label.setText(text);\n }\n</code></pre>\n</li>\n<li><p>Use initialization on declaration:</p>\n<pre><code> private javax.swing.JLabel label = label = new javax.swing.JLabel();\n</code></pre>\n<p>and then use the setText method in your constructor</p>\n<pre><code> label.setText(_label);\n</code></pre>\n</li>\n</ol>\n<p>Note:</p>\n<p>In the case of reason (2), a normal method on your component, it is the same as (1), but you may call the method before initializing the variable or assign null to the variable before calling the method and so on and it can be solved by the same ways.</p>\n"},{"tags":[],"owner":{"account_id":3951444,"reputation":1,"user_id":3261644,"display_name":"b5cully"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795648,"creation_date":1391298019,"answer_id":21505151,"question_id":7289219,"body_markdown":"I have encountered the similar problem, however in a different context.\r\n\r\nI have two separate projects, a [Swing][1] built user interface, and another one that poses as a class library.\r\n\r\nI added a class to the class library, headed over to the user interface, and implemented this newly added class from the library into the Swing interface project in the shape of an existing custom JFrame. So what happened to me now that the class loader of course could not find the class because the library project required compiling. The issue was fixed by compiling it.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Swing_%28Java%29\r\n\r\n\r\n\r\n","title":"&quot;Component cannot be instantiated&quot; in NetBeans 7.0.1","body":"<p>I have encountered the similar problem, however in a different context.</p>\n<p>I have two separate projects, a <a href=\"https://en.wikipedia.org/wiki/Swing_%28Java%29\" rel=\"nofollow noreferrer\">Swing</a> built user interface, and another one that poses as a class library.</p>\n<p>I added a class to the class library, headed over to the user interface, and implemented this newly added class from the library into the Swing interface project in the shape of an existing custom JFrame. So what happened to me now that the class loader of course could not find the class because the library project required compiling. The issue was fixed by compiling it.</p>\n"}],"owner":{"account_id":886735,"reputation":893,"user_id":926011,"accept_rate":39,"display_name":"averageman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6456,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1689796290,"creation_date":1314997569,"question_id":7289219,"body_markdown":"I have been customizing JTextArea and JTable. I do so by adding a new Java class to my project and then declaring it extends the particular class I want (in my case, either JTextArea or JTable).\r\n\r\nI had been using it normally, adding these new classes to JDialogs and JInternalFrames without any problem. I do so by just dragging it to my JDialog or JInternalFrame...\r\n\r\nBut recently, for some reason, I started getting these error messages:\r\n\r\n&gt; Component cannot be instantiated. Please make sure it is a JavaBeans component.\r\n\r\nThe JInternalFrames that were accepting the old customized classes still accepts them. But if I try to add the new customized class, it gives me that error message and, afterwards, it starts showing the same message to the old customized classes too...\r\n\r\nSomething really weird is going on. I copied the same code of a (previously) customized class to a new class (changing the name of the class, of course). Then I try to add this to my JInternalFrame. It gives me the error message! If, before this, I try to add the same customized class (with the original name), it adds the class normally...\r\n\r\nThis is annoying. How can I solve?\r\n\r\n(I am using NetBeans 7.0.1)\r\n\r\n&lt;hr/&gt;\r\n\r\n&lt;sub&gt;It turned out to be a problem with an out-of-range array access... I am used to error messages about this kind of thing being automatic... Sorry, I just started programming in Java.&lt;/sub&gt;\r\n\r\n\r\n\r\n\r\n","title":"&quot;Component cannot be instantiated&quot; in NetBeans 7.0.1","body":"<p>I have been customizing JTextArea and JTable. I do so by adding a new Java class to my project and then declaring it extends the particular class I want (in my case, either JTextArea or JTable).</p>\n<p>I had been using it normally, adding these new classes to JDialogs and JInternalFrames without any problem. I do so by just dragging it to my JDialog or JInternalFrame...</p>\n<p>But recently, for some reason, I started getting these error messages:</p>\n<blockquote>\n<p>Component cannot be instantiated. Please make sure it is a JavaBeans component.</p>\n</blockquote>\n<p>The JInternalFrames that were accepting the old customized classes still accepts them. But if I try to add the new customized class, it gives me that error message and, afterwards, it starts showing the same message to the old customized classes too...</p>\n<p>Something really weird is going on. I copied the same code of a (previously) customized class to a new class (changing the name of the class, of course). Then I try to add this to my JInternalFrame. It gives me the error message! If, before this, I try to add the same customized class (with the original name), it adds the class normally...</p>\n<p>This is annoying. How can I solve?</p>\n<p>(I am using NetBeans 7.0.1)</p>\n<hr/>\n<p><sub>It turned out to be a problem with an out-of-range array access... I am used to error messages about this kind of thing being automatic... Sorry, I just started programming in Java.</sub></p>\n"},{"tags":["java","swing","javafx-2"],"answers":[{"tags":[],"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"comment_count":0,"down_vote_count":2,"up_vote_count":11,"is_accepted":true,"score":9,"last_activity_date":1363096174,"creation_date":1363096174,"answer_id":15363040,"question_id":15362783,"body_markdown":"    Is JavaFX complete replacement of Swing?\r\n\r\nI think that not, \r\n\r\n- most of components are halfsized in compare with Swing (price for development ???),\r\n\r\n- implementations in JavaFX8 (accesible with Java8) has one important point Swing JComponents  could be accesible from JavaFX containers and JavaFX Components will be accesible in Swing JContainers (implemented in newer JavaFX2.2), \r\n\r\n- then JavaFX will be accesible for development of DeskTop applications\r\n\r\n- still question is if will be possible to add JavaFX TextArea together with Swing JTextArea in one JPanel or vice versa (Panel from xxx.scene.xxx)\r\n\r\n- more (the best infos, roadmap, development...) on [FX Experience][1] (notice occasionally is down :-)\r\n\r\n\r\n  [1]: http://fxexperience.com/","title":"Is JavaFX complete replacement of Swing?","body":"<pre><code>Is JavaFX complete replacement of Swing?\n</code></pre>\n\n<p>I think that not, </p>\n\n<ul>\n<li><p>most of components are halfsized in compare with Swing (price for development ???),</p></li>\n<li><p>implementations in JavaFX8 (accesible with Java8) has one important point Swing JComponents  could be accesible from JavaFX containers and JavaFX Components will be accesible in Swing JContainers (implemented in newer JavaFX2.2), </p></li>\n<li><p>then JavaFX will be accesible for development of DeskTop applications</p></li>\n<li><p>still question is if will be possible to add JavaFX TextArea together with Swing JTextArea in one JPanel or vice versa (Panel from xxx.scene.xxx)</p></li>\n<li><p>more (the best infos, roadmap, development...) on <a href=\"http://fxexperience.com/\" rel=\"noreferrer\">FX Experience</a> (notice occasionally is down :-)</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":329906,"reputation":12901,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1677426130,"creation_date":1386765449,"answer_id":20519340,"question_id":15362783,"body_markdown":"Oracle&#39;s JavaFX FAQs states that JavaFX **is** a replacement for Swing:\r\n\r\n&gt;**Is JavaFX replacing Swing as the new client UI library for Java SE?**\r\n&gt;\r\n&gt; **Yes**. However, Swing will remain part of the Java SE specification for the foreseeable future, and therefore included in the JRE. While\r\n&gt; we recommend developers to leverage JavaFX APIs as much as possible\r\n&gt; when building new applications, it is possible to extend a Swing\r\n&gt; application with JavaFX, allowing for a smoother transition.\r\n&gt;\r\n&gt; *Source: Oracle JavaFX FAQs (http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#6) [last checked: Feb 2023]*\r\n\r\n \r\nHowever it is noteworthy that as of Java 11, JavaFX is no longer included in the JDK:\r\n\r\n&gt; JavaFX is no longer included in the JDK. It is now available as a\r\n&gt; separate download from openjfx.io\r\n&gt;\r\n&gt;*Source: Java 11 release notes(https://www.oracle.com/java/technologies/javase/11-relnote-issues.html)* [last checked: Feb 2023]\r\n\r\nIn contrast, in up to and including Java 19, Swing remains in the JDK, under `java.desktop`: https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/module-summary.html [last checked: Feb 2023]","title":"Is JavaFX complete replacement of Swing?","body":"<p>Oracle's JavaFX FAQs states that JavaFX <strong>is</strong> a replacement for Swing:</p>\n<blockquote>\n<p><strong>Is JavaFX replacing Swing as the new client UI library for Java SE?</strong></p>\n<p><strong>Yes</strong>. However, Swing will remain part of the Java SE specification for the foreseeable future, and therefore included in the JRE. While\nwe recommend developers to leverage JavaFX APIs as much as possible\nwhen building new applications, it is possible to extend a Swing\napplication with JavaFX, allowing for a smoother transition.</p>\n<p><em>Source: Oracle JavaFX FAQs (<a href=\"http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#6\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#6</a>) [last checked: Feb 2023]</em></p>\n</blockquote>\n<p>However it is noteworthy that as of Java 11, JavaFX is no longer included in the JDK:</p>\n<blockquote>\n<p>JavaFX is no longer included in the JDK. It is now available as a\nseparate download from openjfx.io</p>\n<p><em>Source: Java 11 release notes(<a href=\"https://www.oracle.com/java/technologies/javase/11-relnote-issues.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase/11-relnote-issues.html</a>)</em> [last checked: Feb 2023]</p>\n</blockquote>\n<p>In contrast, in up to and including Java 19, Swing remains in the JDK, under <code>java.desktop</code>: <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/module-summary.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/module-summary.html</a> [last checked: Feb 2023]</p>\n"},{"comments":[{"owner":{"account_id":276671,"reputation":1040,"user_id":570244,"accept_rate":100,"display_name":"Phil"},"score":0,"creation_date":1671565299,"post_id":62976209,"comment_id":132125519,"body_markdown":"If this is so, why is it so difficult to set up an IDE with JavaFX? Particularly with NetBeans which the Oracle examples use and the openjfx.io install instructions which are so out of date?","body":"If this is so, why is it so difficult to set up an IDE with JavaFX? Particularly with NetBeans which the Oracle examples use and the openjfx.io install instructions which are so out of date?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1671574227,"post_id":62976209,"comment_id":132127749,"body_markdown":"@Phil In the past, I have found [IntelliJ](https://en.wikipedia.org/wiki/IntelliJ_IDEA) offers good support for JavaFX/OpenJFX, including setting up a new project from scratch from a bundled template.","body":"@Phil In the past, I have found <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ</a> offers good support for JavaFX/OpenJFX, including setting up a new project from scratch from a bundled template."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1671574321,"post_id":62976209,"comment_id":132127781,"body_markdown":"@Phil Are you reading the [documentation at OpenJFX.org](https://openjfx.io/)?","body":"@Phil Are you reading the <a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">documentation at OpenJFX.org</a>?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1671575242,"post_id":62976209,"comment_id":132127944,"body_markdown":"@Phil Yes indeed, I just started a new Hello World app using IntelliJ 2022.3.1 with Java 19 and OpenJFX 19. Up and running in about one minute. For more info, see my recent [Answer](https://stackoverflow.com/a/74764297/642706) on Stack Overflow.","body":"@Phil Yes indeed, I just started a new Hello World app using IntelliJ 2022.3.1 with Java 19 and OpenJFX 19. Up and running in about one minute. For more info, see my recent <a href=\"https://stackoverflow.com/a/74764297/642706\">Answer</a> on Stack Overflow."},{"owner":{"account_id":276671,"reputation":1040,"user_id":570244,"accept_rate":100,"display_name":"Phil"},"score":0,"creation_date":1671593206,"post_id":62976209,"comment_id":132130555,"body_markdown":"@Basil the install and IDE integration directions are at https://openjfx.io/openjfx-docs/#install-javafx. They refer to modular and non-modular projects which dont appear in NetBeans. Ill give IntelliJ a try.","body":"@Basil the install and IDE integration directions are at <a href=\"https://openjfx.io/openjfx-docs/#install-javafx\" rel=\"nofollow noreferrer\">openjfx.io/openjfx-docs/#install-javafx</a>. They refer to modular and non-modular projects which dont appear in NetBeans. Ill give IntelliJ a try."},{"owner":{"account_id":276671,"reputation":1040,"user_id":570244,"accept_rate":100,"display_name":"Phil"},"score":0,"creation_date":1671678204,"post_id":62976209,"comment_id":132152041,"body_markdown":"@Basil Yes IntelliJ works. Of course, you must have the OpenJDK downloaded and copied to the correct hidden folder. You must also disregard most of the IDE integration instructions (the part about the modular projects). Its also unfortunate that the Oracle JavaFX tutorials use NetBeans. All solvable problems but pretty frustrating","body":"@Basil Yes IntelliJ works. Of course, you must have the OpenJDK downloaded and copied to the correct hidden folder. You must also disregard most of the IDE integration instructions (the part about the modular projects). Its also unfortunate that the Oracle JavaFX tutorials use NetBeans. All solvable problems but pretty frustrating"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1671687983,"post_id":62976209,"comment_id":132153257,"body_markdown":"@Phil Agreed. A tip though: IntelliJ can download a JDK from your choice of several vendors. Choose *File* &gt; *Project Structure* &gt; *Platform Settings* &gt; *SDKs* &gt; *+* &gt; *Download JDK*","body":"@Phil Agreed. A tip though: IntelliJ can download a JDK from your choice of several vendors. Choose <i>File</i> &gt; <i>Project Structure</i> &gt; <i>Platform Settings</i> &gt; <i>SDKs</i> &gt; <i>+</i> &gt; <i>Download JDK</i>"},{"owner":{"account_id":109445,"reputation":3624,"user_id":289995,"accept_rate":85,"display_name":"Manius"},"score":0,"creation_date":1675054360,"post_id":62976209,"comment_id":132838260,"body_markdown":"Nice chart, but I feel like Gluon needs to be mentioned in here somewhere now (aren&#39;t they don&#39;t their own JDK build now too?). Possibly multiple times. I believe they do commercial support for JFX specifically also.","body":"Nice chart, but I feel like Gluon needs to be mentioned in here somewhere now (aren&#39;t they don&#39;t their own JDK build now too?). Possibly multiple times. I believe they do commercial support for JFX specifically also."},{"owner":{"account_id":109445,"reputation":3624,"user_id":289995,"accept_rate":85,"display_name":"Manius"},"score":0,"creation_date":1675054659,"post_id":62976209,"comment_id":132838293,"body_markdown":"&quot;why is it so difficult to set up an IDE with JavaFX?&quot; Probably because of JPMS - Java modules and splitting JFX out of the JDK made things complicated. IntelliJ does support it fairly well out of the box, though. NetBeans has fallen behind in general (former NB user here). Recommend ignoring the modular junk which just makes things needlessly difficult for little gain. It&#39;s also a big help using a JDK with FX built in, such as one of Azul&#39;s FX JDKs as mentioned in the chart above.","body":"&quot;why is it so difficult to set up an IDE with JavaFX?&quot; Probably because of JPMS - Java modules and splitting JFX out of the JDK made things complicated. IntelliJ does support it fairly well out of the box, though. NetBeans has fallen behind in general (former NB user here). Recommend ignoring the modular junk which just makes things needlessly difficult for little gain. It&#39;s also a big help using a JDK with FX built in, such as one of Azul&#39;s FX JDKs as mentioned in the chart above."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1675114452,"post_id":62976209,"comment_id":132855547,"body_markdown":"@Manius Reread the second paragraph. The Answer *does* mention Gluon, with a link to their web site. And the Answer mentions that the company took leadership on the *OpenJFX* implementation of JavaFX technology, in cooperation with Oracle Corp. Yes, Gluon offers commercial support for JavaFX. No, Gluon does *not* provide any JDK products, so not included in diagram. At least companies do offer JDK products bundled with OpenJFK libraries: Azul Systems and BellSoft, as mentioned in the Answer with links.","body":"@Manius Reread the second paragraph. The Answer <i>does</i> mention Gluon, with a link to their web site. And the Answer mentions that the company took leadership on the <i>OpenJFX</i> implementation of JavaFX technology, in cooperation with Oracle Corp. Yes, Gluon offers commercial support for JavaFX. No, Gluon does <i>not</i> provide any JDK products, so not included in diagram. At least companies do offer JDK products bundled with OpenJFK libraries: Azul Systems and BellSoft, as mentioned in the Answer with links."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1675114840,"post_id":62976209,"comment_id":132855639,"body_markdown":"@Manius I do agree that a beginner need not bother with modularizing their code with [JPMS](https://en.wikipedia.org/wiki/Java_Platform_Module_System) when learning JavaFX. But for delivering a double-clickable app with a JDK bundled inside, then JPMS modularization is quite important. With JPMS a developer can make use of the [*jlink*](https://openjdk.org/jeps/282) and [*jpackage*](https://openjdk.org/jeps/392) tooling.","body":"@Manius I do agree that a beginner need not bother with modularizing their code with <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"nofollow noreferrer\">JPMS</a> when learning JavaFX. But for delivering a double-clickable app with a JDK bundled inside, then JPMS modularization is quite important. With JPMS a developer can make use of the <a href=\"https://openjdk.org/jeps/282\" rel=\"nofollow noreferrer\"><i>jlink</i></a> and <a href=\"https://openjdk.org/jeps/392\" rel=\"nofollow noreferrer\"><i>jpackage</i></a> tooling."},{"owner":{"account_id":109445,"reputation":3624,"user_id":289995,"accept_rate":85,"display_name":"Manius"},"score":0,"creation_date":1675149497,"post_id":62976209,"comment_id":132860944,"body_markdown":"No need - IMO JPMS can be treated like OSGI - you probably don&#39;t need it, and when you do need it, you&#39;ll know! \n\nhttps://changenode.com/articles/fomo-java-modules","body":"No need - IMO JPMS can be treated like OSGI - you probably don&#39;t need it, and when you do need it, you&#39;ll know!   <a href=\"https://changenode.com/articles/fomo-java-modules\" rel=\"nofollow noreferrer\">changenode.com/articles/fomo-java-modules</a>"},{"owner":{"account_id":109445,"reputation":3624,"user_id":289995,"accept_rate":85,"display_name":"Manius"},"score":0,"creation_date":1675150238,"post_id":62976209,"comment_id":132861109,"body_markdown":"@Basil Bourque Gotcha on the Gluon note. I was looking at the chart exclusively when I commented. :) That&#39;s interesting though, because when I &quot;sdk list java&quot; (using SDKMAN on Linux), I get two options for &quot;Available Java Versions for Linux 64bit&quot;, under &quot;Gluon&quot;! I don&#39;t know what that is, but it&#39;s listed under JDKs. It&#39;s also a new listing that only fairly recently showed up. Maybe they are planning something?","body":"@Basil Bourque Gotcha on the Gluon note. I was looking at the chart exclusively when I commented. :) That&#39;s interesting though, because when I &quot;sdk list java&quot; (using SDKMAN on Linux), I get two options for &quot;Available Java Versions for Linux 64bit&quot;, under &quot;Gluon&quot;! I don&#39;t know what that is, but it&#39;s listed under JDKs. It&#39;s also a new listing that only fairly recently showed up. Maybe they are planning something?"},{"owner":{"account_id":109445,"reputation":3624,"user_id":289995,"accept_rate":85,"display_name":"Manius"},"score":0,"creation_date":1675150405,"post_id":62976209,"comment_id":132861143,"body_markdown":"https://imgur.com/fNoFiTY.png \nI don&#39;t get the version numbering logic though.","body":"<a href=\"https://imgur.com/fNoFiTY.png\" rel=\"nofollow noreferrer\">imgur.com/fNoFiTY.png</a>  I don&#39;t get the version numbering logic though."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1675154812,"post_id":62976209,"comment_id":132862313,"body_markdown":"@Manius I stand corrected. I too see a couple items for Gluon when I run SDKMAN! on my Mac, for *Available Java Versions for macOS ARM 64bit*. I assume the version numbers `22.1.0.1.r17-gln` &amp; `22.1.0.1.r11-gln` refer to Java 22, which is weird as I see no version 22 yet appearing on the [OpenJDK site](https://openjdk.org/projects/jdk/). I cannot find any info on the GluonHQ.com web site.","body":"@Manius I stand corrected. I too see a couple items for Gluon when I run SDKMAN! on my Mac, for <i>Available Java Versions for macOS ARM 64bit</i>. I assume the version numbers <code>22.1.0.1.r17-gln</code> &amp; <code>22.1.0.1.r11-gln</code> refer to Java 22, which is weird as I see no version 22 yet appearing on the <a href=\"https://openjdk.org/projects/jdk/\" rel=\"nofollow noreferrer\">OpenJDK site</a>. I cannot find any info on the GluonHQ.com web site."},{"owner":{"account_id":109445,"reputation":3624,"user_id":289995,"accept_rate":85,"display_name":"Manius"},"score":0,"creation_date":1675298412,"post_id":62976209,"comment_id":132901232,"body_markdown":"Well at least I feel better now about being confused with the versioning if I&#39;m not the only one. Maybe it&#39;s based on a custom Android/mobile version? Which would make sense for Gluon to care about. A bunch of other JDKs listed in SDKMAN have similar numbers.","body":"Well at least I feel better now about being confused with the versioning if I&#39;m not the only one. Maybe it&#39;s based on a custom Android/mobile version? Which would make sense for Gluon to care about. A bunch of other JDKs listed in SDKMAN have similar numbers."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1675300412,"post_id":62976209,"comment_id":132901556,"body_markdown":"@Manius I wonder if the `r17` &amp; `r11` might mean Java 17 and Java 11. Just a wild guess.","body":"@Manius I wonder if the <code>r17</code> &amp; <code>r11</code> might mean Java 17 and Java 11. Just a wild guess."},{"owner":{"account_id":109445,"reputation":3624,"user_id":289995,"accept_rate":85,"display_name":"Manius"},"score":0,"creation_date":1675317078,"post_id":62976209,"comment_id":132903790,"body_markdown":"Oooh, good catch - maybe!","body":"Oooh, good catch - maybe!"},{"owner":{"account_id":109445,"reputation":3624,"user_id":289995,"accept_rate":85,"display_name":"Manius"},"score":0,"creation_date":1675317187,"post_id":62976209,"comment_id":132903802,"body_markdown":"I think that&#39;s it - GraalVM has r8, r11, r17, r19.","body":"I think that&#39;s it - GraalVM has r8, r11, r17, r19."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":19,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1689796246,"creation_date":1595132113,"answer_id":62976209,"question_id":15362783,"body_markdown":"# tl;dr\r\n\r\nYes, JavaFX is the official replacement for Swing. \r\n\r\n - Swing remains fully supported, but is in maintenance-mode. \r\n - JavaFX is under continual development, with releases every six months.\r\n\r\nJavaFX was successfully open-sourced as *OpenJFX*. Co-led by Gluon and Oracle. Multiple companies offer support. \r\n\r\nJavaFX is stable, and has been used successfully for many desktop apps. \r\n\r\n# Update as of 2020\r\n\r\n[JavaFX][1] technology has been going quite well in the ensuing years after this Question was originally posted. [Java][2] is regularly released on its 6-month train schedule, and JavaFX releases have arrived at the same pace. \r\n\r\nOracle Corp. has completed the process of making JavaFX [open-source][3], known as [*OpenJFX*][4]. The codebase is now housed as a [sub-project on the OpenJDK][5] project. Leadership has been assigned to the [Gluon][6] company, with [Oracle][7]s continued support.\r\n\r\nThe popularity and community seem to be growing. The competitors have fallen away, such as [*Microsoft Silverlight*][8] and [*Adobe Flash*][9] both having died. \r\n\r\nOracle continues to support [Swing][10] as a required part of any [Java SE][11] implementation, but only in [maintenance-mode][12]. JavaFX, in contrast, is under constant active development.\r\n\r\nOracle sells support for JavaFX, as do other vendors such as Gluon and Azul Systems. \r\n\r\nSome vendors supplying Java implementations bundle the JavaFX/OpenJFX libraries with their JVMs. These include [Azul Systems][13] with their *ZuluFX* product, and [BellSoft][14] with their *LibericaFX* product.\r\n\r\nThough cutting-edge presently, there is work being done to build a native apps for iOS and other platforms using OpenJFX with [ahead-of-time compilation][15] using [GraalVM][16]. \r\n\r\nDelivering a JavaFX desktop app is often done by bundling a [JDK][17] inside. This produces a double-clickable app. Bundling a JDK is more easily done by modularizing your code with [JPMS](https://en.wikipedia.org/wiki/Java_Platform_Module_System). By leveraging JPMS, a developer can make use of the [*jlink*](https://openjdk.org/jeps/282) and [*jpackage*](https://openjdk.org/jeps/392) tooling.\r\n\r\nSee: \r\n\r\n - [Java Client Roadmap Update][18] by Oracle, 2020-05\r\n - [JavaFX FAQ][19] by Oracle\r\n - [OpenJFX][4]\r\n - [JavaFX][1] page on Wikipedia\r\n - OpenJDK [wiki page][20] for JavaFX \r\n\r\n\r\n----------\r\n[![enter image description here][21]][21]\r\n\r\n\r\n---------\r\n\r\n# *Vaadin*\r\n\r\nIf you were using Swing to build client-server apps, consider using the [*Vaadin Flow*][22] framework to build desktop-style apps delivered as a web app. \r\n\r\nYou write your app entirely in pure Java. At runtime the users state is maintained on the server in the [JVM][23] while the user-interface is remotely presented in a web browser using standard Web technologies through automatically generated HTML, CSS, and JavaScript. \r\n\r\n*Vaadin Flow* is open-source and free-of-cost. The Vaadin Ltd company sells training, support, and a few specialty add-ons. One such add-on is [*Swing Kit*][24] for gradually transitioning a Swing app to Vaadin Flow. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/JavaFX\r\n  [2]: https://en.wikipedia.org/wiki/Java_(software_platform)\r\n  [3]: https://en.wikipedia.org/wiki/Open_source\r\n  [4]: https://openjfx.io/\r\n  [5]: https://openjdk.java.net/projects/openjfx/\r\n  [6]: https://gluonhq.com/\r\n  [7]: https://en.wikipedia.org/wiki/Oracle_Corporation\r\n  [8]: https://en.wikipedia.org/wiki/Microsoft_Silverlight\r\n  [9]: https://en.wikipedia.org/wiki/Adobe_Flash\r\n  [10]: https://en.wikipedia.org/wiki/Swing_(Java)\r\n  [11]: https://en.wikipedia.org/wiki/Java_Platform%2C_Standard_Edition\r\n  [12]: https://en.wikipedia.org/wiki/Maintenance_mode\r\n  [13]: https://en.wikipedia.org/wiki/Azul_Systems\r\n  [14]: https://bell-sw.com/\r\n  [15]: https://en.wikipedia.org/wiki/Ahead-of-time_compilation\r\n  [16]: https://en.wikipedia.org/wiki/GraalVM\r\n  [17]: https://en.wikipedia.org/wiki/Java_Development_Kit\r\n  [18]: https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf\r\n  [19]: https://www.oracle.com/java/technologies/javafx/faq-javafx.html#6\r\n  [20]: https://wiki.openjdk.java.net/display/OpenJFX/Main\r\n  [21]: https://i.stack.imgur.com/iIxDY.png\r\n  [22]: https://en.wikipedia.org/wiki/Vaadin#Vaadin_Flow_(Java_API)\r\n  [23]: https://en.wikipedia.org/wiki/Java_virtual_machine\r\n  [24]: https://vaadin.com/docs/latest/tools/swing","title":"Is JavaFX complete replacement of Swing?","body":"<h1>tl;dr</h1>\n<p>Yes, JavaFX is the official replacement for Swing.</p>\n<ul>\n<li>Swing remains fully supported, but is in maintenance-mode.</li>\n<li>JavaFX is under continual development, with releases every six months.</li>\n</ul>\n<p>JavaFX was successfully open-sourced as <em>OpenJFX</em>. Co-led by Gluon and Oracle. Multiple companies offer support.</p>\n<p>JavaFX is stable, and has been used successfully for many desktop apps.</p>\n<h1>Update as of 2020</h1>\n<p><a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a> technology has been going quite well in the ensuing years after this Question was originally posted. <a href=\"https://en.wikipedia.org/wiki/Java_(software_platform)\" rel=\"nofollow noreferrer\">Java</a> is regularly released on its 6-month train schedule, and JavaFX releases have arrived at the same pace.</p>\n<p>Oracle Corp. has completed the process of making JavaFX <a href=\"https://en.wikipedia.org/wiki/Open_source\" rel=\"nofollow noreferrer\">open-source</a>, known as <a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\"><em>OpenJFX</em></a>. The codebase is now housed as a <a href=\"https://openjdk.java.net/projects/openjfx/\" rel=\"nofollow noreferrer\">sub-project on the OpenJDK</a> project. Leadership has been assigned to the <a href=\"https://gluonhq.com/\" rel=\"nofollow noreferrer\">Gluon</a> company, with <a href=\"https://en.wikipedia.org/wiki/Oracle_Corporation\" rel=\"nofollow noreferrer\">Oracle</a>s continued support.</p>\n<p>The popularity and community seem to be growing. The competitors have fallen away, such as <a href=\"https://en.wikipedia.org/wiki/Microsoft_Silverlight\" rel=\"nofollow noreferrer\"><em>Microsoft Silverlight</em></a> and <a href=\"https://en.wikipedia.org/wiki/Adobe_Flash\" rel=\"nofollow noreferrer\"><em>Adobe Flash</em></a> both having died.</p>\n<p>Oracle continues to support <a href=\"https://en.wikipedia.org/wiki/Swing_(Java)\" rel=\"nofollow noreferrer\">Swing</a> as a required part of any <a href=\"https://en.wikipedia.org/wiki/Java_Platform%2C_Standard_Edition\" rel=\"nofollow noreferrer\">Java SE</a> implementation, but only in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance-mode</a>. JavaFX, in contrast, is under constant active development.</p>\n<p>Oracle sells support for JavaFX, as do other vendors such as Gluon and Azul Systems.</p>\n<p>Some vendors supplying Java implementations bundle the JavaFX/OpenJFX libraries with their JVMs. These include <a href=\"https://en.wikipedia.org/wiki/Azul_Systems\" rel=\"nofollow noreferrer\">Azul Systems</a> with their <em>ZuluFX</em> product, and <a href=\"https://bell-sw.com/\" rel=\"nofollow noreferrer\">BellSoft</a> with their <em>LibericaFX</em> product.</p>\n<p>Though cutting-edge presently, there is work being done to build a native apps for iOS and other platforms using OpenJFX with <a href=\"https://en.wikipedia.org/wiki/Ahead-of-time_compilation\" rel=\"nofollow noreferrer\">ahead-of-time compilation</a> using <a href=\"https://en.wikipedia.org/wiki/GraalVM\" rel=\"nofollow noreferrer\">GraalVM</a>.</p>\n<p>Delivering a JavaFX desktop app is often done by bundling a <a href=\"https://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow noreferrer\">JDK</a> inside. This produces a double-clickable app. Bundling a JDK is more easily done by modularizing your code with <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"nofollow noreferrer\">JPMS</a>. By leveraging JPMS, a developer can make use of the <a href=\"https://openjdk.org/jeps/282\" rel=\"nofollow noreferrer\"><em>jlink</em></a> and <a href=\"https://openjdk.org/jeps/392\" rel=\"nofollow noreferrer\"><em>jpackage</em></a> tooling.</p>\n<p>See:</p>\n<ul>\n<li><a href=\"https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf\" rel=\"nofollow noreferrer\">Java Client Roadmap Update</a> by Oracle, 2020-05</li>\n<li><a href=\"https://www.oracle.com/java/technologies/javafx/faq-javafx.html#6\" rel=\"nofollow noreferrer\">JavaFX FAQ</a> by Oracle</li>\n<li><a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">OpenJFX</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a> page on Wikipedia</li>\n<li>OpenJDK <a href=\"https://wiki.openjdk.java.net/display/OpenJFX/Main\" rel=\"nofollow noreferrer\">wiki page</a> for JavaFX</li>\n</ul>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/iIxDY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iIxDY.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h1><em>Vaadin</em></h1>\n<p>If you were using Swing to build client-server apps, consider using the <a href=\"https://en.wikipedia.org/wiki/Vaadin#Vaadin_Flow_(Java_API)\" rel=\"nofollow noreferrer\"><em>Vaadin Flow</em></a> framework to build desktop-style apps delivered as a web app.</p>\n<p>You write your app entirely in pure Java. At runtime the users state is maintained on the server in the <a href=\"https://en.wikipedia.org/wiki/Java_virtual_machine\" rel=\"nofollow noreferrer\">JVM</a> while the user-interface is remotely presented in a web browser using standard Web technologies through automatically generated HTML, CSS, and JavaScript.</p>\n<p><em>Vaadin Flow</em> is open-source and free-of-cost. The Vaadin Ltd company sells training, support, and a few specialty add-ons. One such add-on is <a href=\"https://vaadin.com/docs/latest/tools/swing\" rel=\"nofollow noreferrer\"><em>Swing Kit</em></a> for gradually transitioning a Swing app to Vaadin Flow.</p>\n"}],"owner":{"account_id":76906,"reputation":4579,"user_id":219865,"accept_rate":73,"display_name":"Ashish Pancholi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15898,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":15363040,"answer_count":3,"score":23,"last_activity_date":1689796246,"creation_date":1363095451,"question_id":15362783,"body_markdown":"I had a Java Desktop Application in which graphical user interface had designed in swing. After we came to know that `JavaFX replacing Swing` We have replaced graphical user interface with JavaFX. \r\n\r\n&gt; &quot;6. Is JavaFX replacing Swing as the new client UI library for Java\r\n&gt; SE? Yes. However, Swing will remain part of the Java SE specification\r\n&gt; for the foreseeable future, and is included in the JRE. On one hand,\r\n&gt; Swing is widely used in existing Java desktop applications, but relies\r\n&gt; on an old architecture, which requires a certain level of expertise\r\n&gt; and specialization. On the other hand, JavaFX features a set of modern\r\n&gt; UI controls that can be skinned using standard CSS techniques. While\r\n&gt; we recommend developers to leverage JavaFX APIs as much as possible\r\n&gt; when building new applications, it is possible to use Swing and JavaFX\r\n&gt; within the same application, allowing developers to extend existing\r\n&gt; Swing applications.&quot;\r\n\r\nNow we heard that Oracle donate the JavaFX toolkit to the open source community and  OpenJDK Community had agreed to take it on.\r\n\r\n&gt; The JavaFX toolkit evolved from the F3 project at Sun. Initial\r\n&gt; releases were based around the JavaFX scripting language, however, in\r\n&gt; 2011 the toolkit was completely rewritten in Java and released by\r\n&gt; Oracle as JavaFX 2.0. In October 2011 Oracle announced that it would\r\n&gt; donate the JavaFX toolkit to the open source community and by November\r\n&gt; 2011 the OpenJDK Community had agreed to take it on.\r\n\r\nI do not think so JavaFX is stable. It has no quick support. Document are not enough explanatory. It does not release internal memory when stage is closed. My application is multithreaded application and most of time taken by my application in updating status of each individual thread. Self contained copy of JRE in native bundle does not reliable, we have to replaced it with JRE folder that resides into JDK. \r\n\r\nIt&#39;s really frustrating and I wonder, if JavaFX is fit to develop the Java Desktop application.  \r\n\r\n   ","title":"Is JavaFX complete replacement of Swing?","body":"<p>I had a Java Desktop Application in which graphical user interface had designed in swing. After we came to know that <code>JavaFX replacing Swing</code> We have replaced graphical user interface with JavaFX. </p>\n\n<blockquote>\n  <p>\"6. Is JavaFX replacing Swing as the new client UI library for Java\n  SE? Yes. However, Swing will remain part of the Java SE specification\n  for the foreseeable future, and is included in the JRE. On one hand,\n  Swing is widely used in existing Java desktop applications, but relies\n  on an old architecture, which requires a certain level of expertise\n  and specialization. On the other hand, JavaFX features a set of modern\n  UI controls that can be skinned using standard CSS techniques. While\n  we recommend developers to leverage JavaFX APIs as much as possible\n  when building new applications, it is possible to use Swing and JavaFX\n  within the same application, allowing developers to extend existing\n  Swing applications.\"</p>\n</blockquote>\n\n<p>Now we heard that Oracle donate the JavaFX toolkit to the open source community and  OpenJDK Community had agreed to take it on.</p>\n\n<blockquote>\n  <p>The JavaFX toolkit evolved from the F3 project at Sun. Initial\n  releases were based around the JavaFX scripting language, however, in\n  2011 the toolkit was completely rewritten in Java and released by\n  Oracle as JavaFX 2.0. In October 2011 Oracle announced that it would\n  donate the JavaFX toolkit to the open source community and by November\n  2011 the OpenJDK Community had agreed to take it on.</p>\n</blockquote>\n\n<p>I do not think so JavaFX is stable. It has no quick support. Document are not enough explanatory. It does not release internal memory when stage is closed. My application is multithreaded application and most of time taken by my application in updating status of each individual thread. Self contained copy of JRE in native bundle does not reliable, we have to replaced it with JRE folder that resides into JDK. </p>\n\n<p>It's really frustrating and I wonder, if JavaFX is fit to develop the Java Desktop application.  </p>\n"},{"tags":["java","arraylist","removeall"],"comments":[{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":4,"creation_date":1570116837,"post_id":58222447,"comment_id":102820410,"body_markdown":"This is not a site for people to do your homework for you.  You have to attempt to write the code yourself first, and when you have issues with it you post your code (after you do research first) that is not working and we tell you what is wrong with it.","body":"This is not a site for people to do your homework for you.  You have to attempt to write the code yourself first, and when you have issues with it you post your code (after you do research first) that is not working and we tell you what is wrong with it."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":2,"creation_date":1570119790,"post_id":58222447,"comment_id":102821827,"body_markdown":"`Arrays.stream(given_list).filter(i -&gt; i &lt;= 100).toArray()`","body":"<code>Arrays.stream(given_list).filter(i -&gt; i &lt;= 100).toArray()</code>"}],"answers":[{"tags":[],"owner":{"account_id":16158789,"reputation":21,"user_id":11665426,"display_name":"jay patel"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1570118959,"creation_date":1570118959,"answer_id":58223038,"question_id":58222447,"body_markdown":"```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class DeleteFromList {\r\n\r\npublic static void main(String[] args) {\r\n   int[] given_list = {0,4,5,56,3, 2000,8,345, 453,}; \r\n   \r\n   //since there is no direct way to delete an element from the array we have to use something other than array, like a list.\r\n   List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n   \r\n   //this changes the whole array to list\r\n   for (int i : given_list){\r\n      list.add(i);\r\n   }\r\n   \r\n   //this iterates through the list and check each element if its greater then 100\r\n   for(int i=0;i&lt;list.size();i++){\r\n      if(list.get(i) &gt; 100){\r\n         list.remove(i);\r\n         i--;     // this is because everytime we delete an element, the next comes in place of it so we need to check new element.\r\n      }\r\n   }\r\n   \r\n   //print out the new list which has all the elements which are less than 100\r\n   System.out.println(list);\r\n\r\n   }\r\n}\r\n\r\n```\r\n&gt; Since there is no way to delete an element from an array, we have to change array to list and then operate on that list so we can delete elements as we want.","title":"remove all values greater than 100 from int array","body":"<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class DeleteFromList {\n\npublic static void main(String[] args) {\n   int[] given_list = {0,4,5,56,3, 2000,8,345, 453,}; \n\n   //since there is no direct way to delete an element from the array we have to use something other than array, like a list.\n   List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\n\n   //this changes the whole array to list\n   for (int i : given_list){\n      list.add(i);\n   }\n\n   //this iterates through the list and check each element if its greater then 100\n   for(int i=0;i&lt;list.size();i++){\n      if(list.get(i) &gt; 100){\n         list.remove(i);\n         i--;     // this is because everytime we delete an element, the next comes in place of it so we need to check new element.\n      }\n   }\n\n   //print out the new list which has all the elements which are less than 100\n   System.out.println(list);\n\n   }\n}\n\n</code></pre>\n\n<blockquote>\n  <p>Since there is no way to delete an element from an array, we have to change array to list and then operate on that list so we can delete elements as we want.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6798104,"reputation":66,"user_id":5232541,"display_name":"rupaj"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1570123878,"creation_date":1570123878,"answer_id":58224194,"question_id":58222447,"body_markdown":"Using Java 8 Stream API this can be achieved in a single line code:\r\n\r\nArrays.stream(given_list).filter(x -&gt; x&lt;100).toArray()\r\n\r\nAbove line of code creates a new array and does not modify the original array.","title":"remove all values greater than 100 from int array","body":"<p>Using Java 8 Stream API this can be achieved in a single line code:</p>\n\n<p>Arrays.stream(given_list).filter(x -> x&lt;100).toArray()</p>\n\n<p>Above line of code creates a new array and does not modify the original array.</p>\n"},{"tags":[],"owner":{"account_id":18493193,"reputation":11,"user_id":13479299,"display_name":"S&#225;ndor Rodr&#237;guez Prieto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689796218,"creation_date":1689796218,"answer_id":76724767,"question_id":58222447,"body_markdown":"I show you the easiest way...\r\n\r\n    List&lt;Integer&gt; given_list  = new ArrayList&lt;&gt;(Arrays.asList(new Integer[] {0,4,5,56,3, 2000, 453}));\r\n    given_list.removeIf(element -&gt; element &gt; 100);\r\n    System.out.println(given_list);","title":"remove all values greater than 100 from int array","body":"<p>I show you the easiest way...</p>\n<pre><code>List&lt;Integer&gt; given_list  = new ArrayList&lt;&gt;(Arrays.asList(new Integer[] {0,4,5,56,3, 2000, 453}));\ngiven_list.removeIf(element -&gt; element &gt; 100);\nSystem.out.println(given_list);\n</code></pre>\n"}],"owner":{"account_id":16819210,"reputation":11,"user_id":12160128,"display_name":"Atif Mansor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3163,"favorite_count":0,"down_vote_count":8,"up_vote_count":1,"answer_count":3,"score":-7,"last_activity_date":1689796218,"creation_date":1570116699,"question_id":58222447,"body_markdown":"Given a list of integers 1,2,3,etc. remove all values greater than 100? What will be the JAVA code for this?\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    public class Main {\r\n\r\n    public static void main(String[] args) {\r\n        int[] given_list = {0,4,5,56,3, 2000, 453,};\r\n\r\n          \r\n        }\r\n    }","title":"remove all values greater than 100 from int array","body":"<p>Given a list of integers 1,2,3,etc. remove all values greater than 100? What will be the JAVA code for this?</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Main {\n\npublic static void main(String[] args) {\n    int[] given_list = {0,4,5,56,3, 2000, 453,};\n\n\n    }\n}\n</code></pre>\n"},{"tags":["java","oracle","spring-boot","unit-testing","spring-data-jpa"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689793374,"post_id":76724418,"comment_id":135265479,"body_markdown":"You could use an in-memory h2 database or a Oracle XE testcontainer.","body":"You could use an in-memory h2 database or a Oracle XE testcontainer."},{"owner":{"account_id":13039762,"reputation":294,"user_id":9423518,"display_name":"Black Bear"},"score":0,"creation_date":1689796683,"post_id":76724418,"comment_id":135266106,"body_markdown":"if the answer appears suitable, please mark it as an answer!","body":"if the answer appears suitable, please mark it as an answer!"}],"owner":{"account_id":16230122,"reputation":55,"user_id":11719149,"display_name":"Vinit Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689796185,"creation_date":1689792671,"question_id":76724418,"body_markdown":"I am new to Spring Boot. I wrote a Spring Boot application and now I am trying to unit-test the repository classes. Currently, my application connects to an Oracle Database that has provided me with read operations only. I do not want to use the Oracle DB (Third party maintains the db and hence for even small permission, it takes a lot of time) as my test db either. Does Spring Boot provide any local Oracle db support for unit testing? \r\n\r\nNote:\r\nI thought of installing Oracle DB locally and connecting it to the Spring Boot application for unit testing. Unfortunately, the virtual box needed to install Oracle DB on Mac is not supported on my system. ","title":"Unit testing Spring Boot Repositories without test database","body":"<p>I am new to Spring Boot. I wrote a Spring Boot application and now I am trying to unit-test the repository classes. Currently, my application connects to an Oracle Database that has provided me with read operations only. I do not want to use the Oracle DB (Third party maintains the db and hence for even small permission, it takes a lot of time) as my test db either. Does Spring Boot provide any local Oracle db support for unit testing?</p>\n<p>Note:\nI thought of installing Oracle DB locally and connecting it to the Spring Boot application for unit testing. Unfortunately, the virtual box needed to install Oracle DB on Mac is not supported on my system.</p>\n"},{"tags":["java","assertion"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1689794061,"post_id":76724540,"comment_id":135265611,"body_markdown":"Does `Contact` override methods `equals()` and `hashCode()`? If so: please [edit] the post and show the code. If not: override them accordingly.","body":"Does <code>Contact</code> override methods <code>equals()</code> and <code>hashCode()</code>? If so: please <a href=\"https://stackoverflow.com/posts/76724540/edit\">edit</a> the post and show the code. If not: override them accordingly."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":2,"creation_date":1689794103,"post_id":76724540,"comment_id":135265620,"body_markdown":"Edit question to add definitions of `ContactManager` and `Contact`. If i had to make random guess, you did not override `hashCode()` and `equals()`.","body":"Edit question to add definitions of <code>ContactManager</code> and <code>Contact</code>. If i had to make random guess, you did not override <code>hashCode()</code> and <code>equals()</code>."}],"answers":[{"comments":[{"owner":{"account_id":28673796,"reputation":5,"user_id":21956272,"display_name":"Margarita Kattsyna"},"score":0,"creation_date":1689802989,"post_id":76724763,"comment_id":135267062,"body_markdown":"Thank you! That was helpful","body":"Thank you! That was helpful"}],"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689796174,"creation_date":1689796174,"answer_id":76724763,"question_id":76724540,"body_markdown":"`contactManager.contains()` uses `equals()` to match the objects. You should define your custom `Contact.equals()` method to make this test pass.\r\n\r\nIn your current implementation the default `Object.equals()` is used. It match not the objects&#39; content, but objects&#39; references.","title":"How to fix this error? java.lang.AssertionError","body":"<p><code>contactManager.contains()</code> uses <code>equals()</code> to match the objects. You should define your custom <code>Contact.equals()</code> method to make this test pass.</p>\n<p>In your current implementation the default <code>Object.equals()</code> is used. It match not the objects' content, but objects' references.</p>\n"}],"owner":{"account_id":28673796,"reputation":5,"user_id":21956272,"display_name":"Margarita Kattsyna"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":441,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76724763,"answer_count":1,"score":0,"last_activity_date":1689796174,"creation_date":1689793910,"question_id":76724540,"body_markdown":"```\r\npackage test;\r\n\r\nimport models.ContactManager;\r\nimport models.Contact;\r\n\r\nimport static org.junit.Assert.*;\r\n\r\nimport java.text.ParseException;\r\n\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\n\r\npublic class ContactManagerTest {\r\n    ContactManager contactManager;\r\n\r\n    @Before\r\n    public void setup() throws ParseException {\r\n        contactManager = new ContactManager();\r\n        contactManager.addContact(new Contact(&quot;Rita&quot;, &quot;5556036071&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;07/15/2023&quot; ));\r\n        contactManager.addContact(new Contact(&quot;Alex&quot;, &quot;3236063206&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;09/15/2023&quot; ));\r\n    }\r\n    \r\n    @Test\r\n    public void contactAdded() throws ParseException {\r\n       assertTrue(contactManager.contains(new Contact(&quot;Rita&quot;, &quot;5556036071&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;07/15/2023&quot;)));\r\n    }\r\n    \r\n}\r\n\r\n\r\n```\r\n\r\n\r\nTrying to do JUnit test and get the error:\r\njava.lang.AssertionError\r\nat test.ContactManagerTest.contactAdded(ContactManagerTest)\r\n\r\n\r\n\r\ntest contactAdded() ","title":"How to fix this error? java.lang.AssertionError","body":"<pre><code>package test;\n\nimport models.ContactManager;\nimport models.Contact;\n\nimport static org.junit.Assert.*;\n\nimport java.text.ParseException;\n\nimport org.junit.Before;\nimport org.junit.Test;\n\npublic class ContactManagerTest {\n    ContactManager contactManager;\n\n    @Before\n    public void setup() throws ParseException {\n        contactManager = new ContactManager();\n        contactManager.addContact(new Contact(&quot;Rita&quot;, &quot;5556036071&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;07/15/2023&quot; ));\n        contactManager.addContact(new Contact(&quot;Alex&quot;, &quot;3236063206&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;09/15/2023&quot; ));\n    }\n    \n    @Test\n    public void contactAdded() throws ParseException {\n       assertTrue(contactManager.contains(new Contact(&quot;Rita&quot;, &quot;5556036071&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;07/15/2023&quot;)));\n    }\n    \n}\n\n\n</code></pre>\n<p>Trying to do JUnit test and get the error:\njava.lang.AssertionError\nat test.ContactManagerTest.contactAdded(ContactManagerTest)</p>\n<p>test contactAdded()</p>\n"},{"tags":["java","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689796025,"creation_date":1689796025,"answer_id":76724744,"question_id":76719318,"body_markdown":"You implement this interface in a class, and then depending on what runtime you use (spring boot, quarkus or something else) then that bean instance can either be auto created by those runtimes. And if not, you need to manually register the bean instance to Apache Camel.","title":"handle Apache camel&#39;s PredicateValidationException when using validate","body":"<p>You implement this interface in a class, and then depending on what runtime you use (spring boot, quarkus or something else) then that bean instance can either be auto created by those runtimes. And if not, you need to manually register the bean instance to Apache Camel.</p>\n"}],"owner":{"account_id":16291023,"reputation":79,"user_id":11764499,"display_name":"Eli m"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689796025,"creation_date":1689755302,"question_id":76719318,"body_markdown":"I&#39;m using springboot `camel-validator-starter` to validate the query param of the incoming request. The library is throwing `PredicateValidationException` with 500 as the status code. I want to handle this exception in such a way that it throws a proper custom exception. According to [camel validate document](https://camel.apache.org/components/3.20.x/eips/validate-eip.html) I can create a `PredicateExceptionFactory` bean to handle the exception. However, its unclear how create this bean and there is no example of that. would be highly appreciated if someone could help me with that.\r\n\r\nhere is the code:\r\n\r\n```\r\nrest(&quot;/&quot;).description(description)\r\n                .id(routeId)\r\n                .get(endpoint)\r\n                .produces(APPLICATION_JSON)\r\n                .consumes(APPLICATION_JSON)\r\n                .bindingMode(RestBindingMode.auto)\r\n                .type(responseClazz)\r\n                .enableCORS(true)\r\n                .route()\r\n                .onException(CustomValidationFailed.class)\r\n                .handled(true)\r\n                .setHeader(Exchange.HTTP_RESPONSE_CODE, constant(HttpStatus.SC_BAD_REQUEST))\r\n                .setBody(constant(&quot;offerId should be provided&quot;))\r\n                .end()\r\n                .validate(header(&quot;offerId&quot;).isNotNull())\r\n                .end()\r\n                .endRest()\r\n                .to(routeTechnicalId);\r\n```\r\n\r\nand here is the thrown exception:\r\n\r\n```\r\norg.apache.camel.support.processor.PredicateValidationException: Validation failed for Predicate[header(offerId) is not null]. Exchange[]\r\n\tat org.apache.camel.support.processor.PredicateValidatingProcessor.process(PredicateValidatingProcessor.java:70)\r\n\tat org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:66)\r\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.doRun(RedeliveryErrorHandler.java:812)\r\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.run(RedeliveryErrorHandler.java:720)\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:187)\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:64)\r\n\tat org.apache.camel.processor.Pipeline.process(Pipeline.java:184)\r\n\tat org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:399)\r\n\tat org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83)\r\n\tat org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41)\r\n\tat org.apache.camel.http.common.CamelServlet.doExecute(CamelServlet.java:319)\r\n\tat org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:214)\r\n\tat org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n```","title":"handle Apache camel&#39;s PredicateValidationException when using validate","body":"<p>I'm using springboot <code>camel-validator-starter</code> to validate the query param of the incoming request. The library is throwing <code>PredicateValidationException</code> with 500 as the status code. I want to handle this exception in such a way that it throws a proper custom exception. According to <a href=\"https://camel.apache.org/components/3.20.x/eips/validate-eip.html\" rel=\"nofollow noreferrer\">camel validate document</a> I can create a <code>PredicateExceptionFactory</code> bean to handle the exception. However, its unclear how create this bean and there is no example of that. would be highly appreciated if someone could help me with that.</p>\n<p>here is the code:</p>\n<pre><code>rest(&quot;/&quot;).description(description)\n                .id(routeId)\n                .get(endpoint)\n                .produces(APPLICATION_JSON)\n                .consumes(APPLICATION_JSON)\n                .bindingMode(RestBindingMode.auto)\n                .type(responseClazz)\n                .enableCORS(true)\n                .route()\n                .onException(CustomValidationFailed.class)\n                .handled(true)\n                .setHeader(Exchange.HTTP_RESPONSE_CODE, constant(HttpStatus.SC_BAD_REQUEST))\n                .setBody(constant(&quot;offerId should be provided&quot;))\n                .end()\n                .validate(header(&quot;offerId&quot;).isNotNull())\n                .end()\n                .endRest()\n                .to(routeTechnicalId);\n</code></pre>\n<p>and here is the thrown exception:</p>\n<pre><code>org.apache.camel.support.processor.PredicateValidationException: Validation failed for Predicate[header(offerId) is not null]. Exchange[]\n    at org.apache.camel.support.processor.PredicateValidatingProcessor.process(PredicateValidatingProcessor.java:70)\n    at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:66)\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.doRun(RedeliveryErrorHandler.java:812)\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.run(RedeliveryErrorHandler.java:720)\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:187)\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:64)\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:184)\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:399)\n    at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83)\n    at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41)\n    at org.apache.camel.http.common.CamelServlet.doExecute(CamelServlet.java:319)\n    at org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:214)\n    at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n</code></pre>\n"},{"tags":["java","eclipse","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795995,"creation_date":1689795995,"answer_id":76724740,"question_id":76723830,"body_markdown":"This error message...\r\n\r\n\tStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 23679\r\n\tOnly local connections are allowed.\r\n\tPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\n\t[1689787194.974][SEVERE]: listen() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\r\n\t[1689787194.975][SEVERE]: bind() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\r\n\tUnable to start server with either IPv4 or IPv6. Exiting...\r\n\tJul 19, 2023 10:50:14 PM org.openqa.selenium.os.OsProcess checkForError\r\n\tSEVERE: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n\tException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.\r\n\tBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:53&#39;\r\n\tSystem info: host: &#39;DESKTOP-6C9U84R&#39;, ip: &#39;192.168.174.1&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.7&#39;\r\n\tDriver info: driver.version: ChromeDriver\r\n\r\n...implies that _WebDriverException_ was raised as the driver server process failed to start.\r\n\r\nThe most probhable reason is, [Selenium](https://stackoverflow.com/a/54482491/7429447) _**v3.141.59**_ is incompatible with recently released [ChromeDriver](https://stackoverflow.com/a/53744026/7429447) _**v114.0.5735.90**_\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nUpdate _Selenium_ version to recently released [_**Version 4.10.0**_](https://www.selenium.dev/downloads/) and execute your tests.","title":"Error while running a script with selenium in eclipse","body":"<p>This error message...</p>\n<pre><code>Starting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 23679\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\n[1689787194.974][SEVERE]: listen() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\n[1689787194.975][SEVERE]: bind() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\nUnable to start server with either IPv4 or IPv6. Exiting...\nJul 19, 2023 10:50:14 PM org.openqa.selenium.os.OsProcess checkForError\nSEVERE: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\nException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:53'\nSystem info: host: 'DESKTOP-6C9U84R', ip: '192.168.174.1', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.7'\nDriver info: driver.version: ChromeDriver\n</code></pre>\n<p>...implies that <em>WebDriverException</em> was raised as the driver server process failed to start.</p>\n<p>The most probhable reason is, <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> <em><strong>v3.141.59</strong></em> is incompatible with recently released <a href=\"https://stackoverflow.com/a/53744026/7429447\">ChromeDriver</a> <em><strong>v114.0.5735.90</strong></em></p>\n<hr />\n<h2>Solution</h2>\n<p>Update <em>Selenium</em> version to recently released <a href=\"https://www.selenium.dev/downloads/\" rel=\"nofollow noreferrer\"><em><strong>Version 4.10.0</strong></em></a> and execute your tests.</p>\n"}],"owner":{"account_id":29051193,"reputation":1,"user_id":22253986,"display_name":"Manasa Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689795995,"creation_date":1689787527,"question_id":76723830,"body_markdown":"While running the script to open browsers facing error \r\n\r\nI tried all the possible ways, help me how to resolve this. Also help me in association selenium with eclipse\r\n```none\r\nStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 23679\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\n[1689787194.974][SEVERE]: listen() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\r\n[1689787194.975][SEVERE]: bind() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\r\nUnable to start server with either IPv4 or IPv6. Exiting...\r\nJul 19, 2023 10:50:14 PM org.openqa.selenium.os.OsProcess checkForError\r\nSEVERE: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\nException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:53&#39;\r\nSystem info: host: &#39;DESKTOP-6C9U84R&#39;, ip: &#39;192.168.174.1&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.7&#39;\r\nDriver info: driver.version: ChromeDriver\r\n\tat org.openqa.selenium.remote.service.DriverService.waitUntilAvailable(DriverService.java:202)\r\n\tat org.openqa.selenium.remote.service.DriverService.start(DriverService.java:188)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:79)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:181)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:168)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:123)\r\n\tat as.Atleastnow.main(Atleastnow.java:10)\r\nCaused by: org.openqa.selenium.net.UrlChecker$TimeoutException: Timed out waiting for [http://localhost:23679/status] to be available after 20005 ms\r\n\tat org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:100)\r\n\tat org.openqa.selenium.remote.service.DriverService.waitUntilAvailable(DriverService.java:197)\r\n\t... 9 more\r\nCaused by: java.util.concurrent.TimeoutException\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:204)\r\n\tat com.google.common.util.concurrent.SimpleTimeLimiter.callWithTimeout(SimpleTimeLimiter.java:156)\r\n\tat org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:75)\r\n\t... 10 more\r\n```","title":"Error while running a script with selenium in eclipse","body":"<p>While running the script to open browsers facing error</p>\n<p>I tried all the possible ways, help me how to resolve this. Also help me in association selenium with eclipse</p>\n<pre class=\"lang-none prettyprint-override\"><code>Starting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 23679\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\n[1689787194.974][SEVERE]: listen() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\n[1689787194.975][SEVERE]: bind() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\nUnable to start server with either IPv4 or IPv6. Exiting...\nJul 19, 2023 10:50:14 PM org.openqa.selenium.os.OsProcess checkForError\nSEVERE: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\nException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:53'\nSystem info: host: 'DESKTOP-6C9U84R', ip: '192.168.174.1', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.7'\nDriver info: driver.version: ChromeDriver\n    at org.openqa.selenium.remote.service.DriverService.waitUntilAvailable(DriverService.java:202)\n    at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:188)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:79)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:181)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:168)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:123)\n    at as.Atleastnow.main(Atleastnow.java:10)\nCaused by: org.openqa.selenium.net.UrlChecker$TimeoutException: Timed out waiting for [http://localhost:23679/status] to be available after 20005 ms\n    at org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:100)\n    at org.openqa.selenium.remote.service.DriverService.waitUntilAvailable(DriverService.java:197)\n    ... 9 more\nCaused by: java.util.concurrent.TimeoutException\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:204)\n    at com.google.common.util.concurrent.SimpleTimeLimiter.callWithTimeout(SimpleTimeLimiter.java:156)\n    at org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:75)\n    ... 10 more\n</code></pre>\n"},{"tags":["java","spring-boot","docker","spring-mvc","static"],"answers":[{"comments":[{"owner":{"account_id":24946865,"reputation":52,"user_id":18812096,"display_name":"Yuri"},"score":0,"creation_date":1682684186,"post_id":76128994,"comment_id":134258273,"body_markdown":"Big thanks for answear! I have thought about this approach @GetMapping(&quot;{file}&quot;), but i can&#39;t figure out how i can serve my files, that saved localy, with controller? How i must save my files correctly locally? I&#39;am so confused with it","body":"Big thanks for answear! I have thought about this approach @GetMapping(&quot;{file}&quot;), but i can&#39;t figure out how i can serve my files, that saved localy, with controller? How i must save my files correctly locally? I&#39;am so confused with it"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1682758246,"post_id":76128994,"comment_id":134268419,"body_markdown":"You now use a `FileOutputStream` to write files. You can easily use a `FileInputStream` to read them again. I do suggest to add a folder so it won&#39;t be possible to download your application itself. You also need to make sure that the file is actually located inside that folder and not somewhere else, otherwise attackers can read system files.","body":"You now use a <code>FileOutputStream</code> to write files. You can easily use a <code>FileInputStream</code> to read them again. I do suggest to add a folder so it won&#39;t be possible to download your application itself. You also need to make sure that the file is actually located inside that folder and not somewhere else, otherwise attackers can read system files."}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682680305,"creation_date":1682680305,"answer_id":76128994,"question_id":76127926,"body_markdown":"By default, Spring Boot only serves static content from inside the JAR file. From [Serve Static Resources with Spring][1]:\r\n\r\n&gt; By default, this handler serves static content from any of the\r\n&gt; /static, /public, /resources, and /META-INF/resources directories that\r\n&gt; are on the classpath.\r\n\r\nIn a Maven project, those directories (`static`, `public`, etc.) should be located in `src/main/resources`, e.g. `src/main/resources/static`.\r\n\r\nTo use an external folder, set the `spring.web.resources.static-locations` property as shown on the link I provided. In your case I think it would be `spring.web.resources.static-locations=classpath:/static,file:.`. That&#39;s very dangerous though, as it also makes your application itself downloadable. It&#39;s better to use a subdirectory for storing and retrieving files: `spring.web.resources.static-locations=classpath:/static,file:files/`.\r\n\r\n(Note that I also included `classpath:/static`. That&#39;s for serving any static content bundled into your application. You can omit or replace it as necessary.)\r\n\r\n----------\r\n\r\nHowever, the safest option is probably to add a separate endpoint for retrieving files. That gives you more control over what is and isn&#39;t downloadable.\r\n\r\n```\r\n    @GetMapping(&quot;{file}&quot;)\r\n    public ResponseEntity&lt;?&gt; downloadFile(@PathVariable(&quot;file&quot;) String fileName) throws IOException {\r\n        // Check that fileName does not contain any characters that allow escaping the directory\r\n        // Then, open the file and return its contents, content type, content length, etc.\r\n    }\r\n```\r\n\r\n  [1]: https://www.baeldung.com/spring-mvc-static-resources","title":"How to serve static files in Spring Boot after uploading with Docker?","body":"<p>By default, Spring Boot only serves static content from inside the JAR file. From <a href=\"https://www.baeldung.com/spring-mvc-static-resources\" rel=\"nofollow noreferrer\">Serve Static Resources with Spring</a>:</p>\n<blockquote>\n<p>By default, this handler serves static content from any of the\n/static, /public, /resources, and /META-INF/resources directories that\nare on the classpath.</p>\n</blockquote>\n<p>In a Maven project, those directories (<code>static</code>, <code>public</code>, etc.) should be located in <code>src/main/resources</code>, e.g. <code>src/main/resources/static</code>.</p>\n<p>To use an external folder, set the <code>spring.web.resources.static-locations</code> property as shown on the link I provided. In your case I think it would be <code>spring.web.resources.static-locations=classpath:/static,file:.</code>. That's very dangerous though, as it also makes your application itself downloadable. It's better to use a subdirectory for storing and retrieving files: <code>spring.web.resources.static-locations=classpath:/static,file:files/</code>.</p>\n<p>(Note that I also included <code>classpath:/static</code>. That's for serving any static content bundled into your application. You can omit or replace it as necessary.)</p>\n<hr />\n<p>However, the safest option is probably to add a separate endpoint for retrieving files. That gives you more control over what is and isn't downloadable.</p>\n<pre><code>    @GetMapping(&quot;{file}&quot;)\n    public ResponseEntity&lt;?&gt; downloadFile(@PathVariable(&quot;file&quot;) String fileName) throws IOException {\n        // Check that fileName does not contain any characters that allow escaping the directory\n        // Then, open the file and return its contents, content type, content length, etc.\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9308807,"reputation":194,"user_id":6911431,"display_name":"Fethullah Kaya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795844,"creation_date":1689795844,"answer_id":76724732,"question_id":76127926,"body_markdown":"I had the same issue, and finally i solved it with just removing / form the folder name.\r\n&quot;file:/&quot;  it doesnt work.\r\nit should be like this &quot;file:&quot;\r\n\r\n    registry.addResourceHandler(pathPattern).addResourceLocations(&quot;file:&quot; + uploadPath + &quot;/&quot;); \r\n\r\n\r\n ","title":"How to serve static files in Spring Boot after uploading with Docker?","body":"<p>I had the same issue, and finally i solved it with just removing / form the folder name.\n&quot;file:/&quot;  it doesnt work.\nit should be like this &quot;file:&quot;</p>\n<pre><code>registry.addResourceHandler(pathPattern).addResourceLocations(&quot;file:&quot; + uploadPath + &quot;/&quot;); \n</code></pre>\n"}],"owner":{"account_id":24946865,"reputation":52,"user_id":18812096,"display_name":"Yuri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":608,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689795844,"creation_date":1682672351,"question_id":76127926,"body_markdown":"I dockerized my app and this controller perfectly saves my images locally on the disk.\r\n\r\nMy controller: Images save perfectly in **root directory**\r\n```java\r\n@Slf4j\r\n@RestController\r\n@RequestMapping(value = &quot;/api/v1/image&quot;)\r\npublic class ImageController {\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;?&gt; uploadFile(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws IOException {\r\n        File file = new File(UUID.randomUUID().toString() + &quot;.&quot; + multipartFile.getOriginalFilename());\r\n        // if file already exists will do nothing\r\n        file.createNewFile();\r\n        FileOutputStream fos = new FileOutputStream(file);\r\n        fos.write(multipartFile.getBytes());\r\n        fos.close();\r\n        return ResponseEntity.ok(file.toURI());\r\n    }\r\n}\r\n```\r\nInside my docker container:\r\n```\r\nroot@server:/APP/spring-app# docker exec -it 5e4 sh\r\n# ls\r\nc7fb1b0b-41f8-4265-a388-d0b5e09e563f..JPG spring.jar\r\n# ^C\r\n#\r\n```\r\n[inside docker container][1]\r\n\r\n\r\n```\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n\r\n@Configuration\r\npublic class CustomWebMvcConfig implements WebMvcConfigurer {\r\n\r\n    @Override\r\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n        registry.addResourceHandler(&quot;/img/**&quot;)\r\n                .addResourceLocations(&quot;file:/&quot;);\r\n    }\r\n}\r\n```\r\nBut when i try to get this image by link (https://api.*****.ru/img/c7fb1b0b-41f8...23432.JPG) i see this error:\r\n\r\n```\r\nWhitelabel Error Page\r\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n\r\nFri Apr 28 09:07:15 UTC 2023\r\nThere was an unexpected error (type=Not Found, status=404).\r\n```\r\n\r\n[Error][2]\r\n\r\nMy Dockerfile: \r\n\r\n```\r\nFROM maven:3.6.0-jdk-13-alpine AS maven\r\n\r\nWORKDIR /app\r\nCOPY ./src ./src\r\nCOPY pom.xml .\r\n# Compile and package the application to an executable JAR\r\nRUN mvn package\r\n\r\n# For Java 11,\r\n#FROM adoptopenjdk/openjdk11\r\nFROM adoptopenjdk/openjdk11:x86_64-ubuntu-jre-11.0.18_10\r\n\r\nWORKDIR /opt/app\r\n\r\n# Copy the dining-room-spring.jar from the maven stage to the /opt/app directory of the current stage.\r\n# TODO How i can set name of the final .jar?\r\nCOPY --from=maven ./app/target/spring.jar .\r\nEXPOSE 8080\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;, &quot;spring.jar&quot;]\r\n```\r\n\r\nHow i can resolve my proble? I just want open this link (https://api.*****.ru/img/c7fb1b0b-41f8...23432.JPG) and see my image. thx for help!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zaban.png\r\n  [2]: https://i.stack.imgur.com/ujulz.png","title":"How to serve static files in Spring Boot after uploading with Docker?","body":"<p>I dockerized my app and this controller perfectly saves my images locally on the disk.</p>\n<p>My controller: Images save perfectly in <strong>root directory</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@RestController\n@RequestMapping(value = &quot;/api/v1/image&quot;)\npublic class ImageController {\n\n    @PostMapping\n    public ResponseEntity&lt;?&gt; uploadFile(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws IOException {\n        File file = new File(UUID.randomUUID().toString() + &quot;.&quot; + multipartFile.getOriginalFilename());\n        // if file already exists will do nothing\n        file.createNewFile();\n        FileOutputStream fos = new FileOutputStream(file);\n        fos.write(multipartFile.getBytes());\n        fos.close();\n        return ResponseEntity.ok(file.toURI());\n    }\n}\n</code></pre>\n<p>Inside my docker container:</p>\n<pre><code>root@server:/APP/spring-app# docker exec -it 5e4 sh\n# ls\nc7fb1b0b-41f8-4265-a388-d0b5e09e563f..JPG spring.jar\n# ^C\n#\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zaban.png\" rel=\"nofollow noreferrer\">inside docker container</a></p>\n<pre><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class CustomWebMvcConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n        registry.addResourceHandler(&quot;/img/**&quot;)\n                .addResourceLocations(&quot;file:/&quot;);\n    }\n}\n</code></pre>\n<p>But when i try to get this image by link (https://api.*****.ru/img/c7fb1b0b-41f8...23432.JPG) i see this error:</p>\n<pre><code>Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\n\nFri Apr 28 09:07:15 UTC 2023\nThere was an unexpected error (type=Not Found, status=404).\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ujulz.png\" rel=\"nofollow noreferrer\">Error</a></p>\n<p>My Dockerfile:</p>\n<pre><code>FROM maven:3.6.0-jdk-13-alpine AS maven\n\nWORKDIR /app\nCOPY ./src ./src\nCOPY pom.xml .\n# Compile and package the application to an executable JAR\nRUN mvn package\n\n# For Java 11,\n#FROM adoptopenjdk/openjdk11\nFROM adoptopenjdk/openjdk11:x86_64-ubuntu-jre-11.0.18_10\n\nWORKDIR /opt/app\n\n# Copy the dining-room-spring.jar from the maven stage to the /opt/app directory of the current stage.\n# TODO How i can set name of the final .jar?\nCOPY --from=maven ./app/target/spring.jar .\nEXPOSE 8080\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;, &quot;spring.jar&quot;]\n</code></pre>\n<p>How i can resolve my proble? I just want open this link (https://api.*****.ru/img/c7fb1b0b-41f8...23432.JPG) and see my image. thx for help!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1689794367,"post_id":76724561,"comment_id":135265655,"body_markdown":"&quot;*Even more so, does it matter?*&quot; - Yes it does. We use injection to reduce friction. Ideally, we use injection at an SPI bondary: a module provides an SPI and uses some implementation of the SPI, so we should use interfaces in the classes of the module, so the module is not coupled to the SPI implementation module.","body":"&quot;<i>Even more so, does it matter?</i>&quot; - Yes it does. We use injection to reduce friction. Ideally, we use injection at an SPI bondary: a module provides an SPI and uses some implementation of the SPI, so we should use interfaces in the classes of the module, so the module is not coupled to the SPI implementation module."}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795767,"creation_date":1689795767,"answer_id":76724724,"question_id":76724561,"body_markdown":"I would suggest `5th` snippet. In this one you&#39;re free to use `RepositoryOne` or `RepositoryTow` or any other implementations that you probably create in the future.\r\n\r\n```java\r\npublic class SomeService&lt;T, K&gt; implements Repository&lt;T, K&gt; {\r\n\r\n    private final Repository&lt;T, K&gt; delegate;\r\n\r\n    public SomeService(Repository&lt;T, K&gt; delegate) {\r\n        this.delegate = delegate;\r\n    }\r\n\r\n    @Override\r\n    public T get(K id) {\r\n        return delegate.get(id);\r\n    }\r\n\r\n}\r\n```\r\n\r\nIn this case, client code will look like this:\r\n```java\r\nSomeService&lt;EntityOne, Long&gt; service1 = new SomeService&lt;&gt;(new RepositoryOne());\r\nSomeService&lt;EntityTwo, Long&gt; service2 = new SomeService&lt;&gt;(new RepositoryTwo());\r\n```","title":"Should construct parameters be abstract or concrete classes when injecting &lt;something&gt;","body":"<p>I would suggest <code>5th</code> snippet. In this one you're free to use <code>RepositoryOne</code> or <code>RepositoryTow</code> or any other implementations that you probably create in the future.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SomeService&lt;T, K&gt; implements Repository&lt;T, K&gt; {\n\n    private final Repository&lt;T, K&gt; delegate;\n\n    public SomeService(Repository&lt;T, K&gt; delegate) {\n        this.delegate = delegate;\n    }\n\n    @Override\n    public T get(K id) {\n        return delegate.get(id);\n    }\n\n}\n</code></pre>\n<p>In this case, client code will look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SomeService&lt;EntityOne, Long&gt; service1 = new SomeService&lt;&gt;(new RepositoryOne());\nSomeService&lt;EntityTwo, Long&gt; service2 = new SomeService&lt;&gt;(new RepositoryTwo());\n</code></pre>\n"}],"owner":{"account_id":6022681,"reputation":3444,"user_id":4729332,"accept_rate":68,"display_name":"Andrei"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1689795767,"creation_date":1689794173,"question_id":76724561,"body_markdown":"You&#39;ll have to excuse my ignorance, I&#39;m very new to Java.\r\n\r\nLet&#39;s pretend I&#39;m trying to create a repository.  \r\nI have an interface such as this:\r\n\r\n    public interface Repository&lt;T, K&gt;{\r\n        T get(K id);\r\n        // some more methods\r\n    }\r\n\r\nAnd then a few concrete classes that implement this interface\r\n\r\n    public class RepositoryOne implements Repository&lt;EntityOne, Long&gt; {\r\n        // methods\r\n    }\r\n\r\n\r\n    public class RepositoryTwo implements Repository&lt;EntityTwo, Long&gt; {\r\n        // methods\r\n    }\r\n\r\nAnd then some service that uses one of the concrete repository interface implementations.\r\n\r\nMy question is: **what is the correct way to write this service?** Here are some examples, all valid from a syntax point of view.\r\n\r\n1st - concrete constructor parameter, concrete class member\r\n\r\n    public class SomeService{\r\n        private final RepositoryOne repositoryOne;\r\n    \r\n        public SomeService(RepositoryOne repositoryOne) {\r\n            this.repositoryOne = repositoryOne;\r\n        }\r\n    \r\n        // methods\r\n    }\r\n\r\n2nd - concrete constructor parameter, interface class member\r\n\r\n    public class SomeService{\r\n        private final Repository&lt;EntityOne, Long&gt; repositoryOne;\r\n    \r\n        public SomeService(RepositoryOne repositoryOne) {\r\n            this.repositoryOne = repositoryOne;\r\n        }\r\n    \r\n        // methods\r\n    }\r\n\r\n3rd - interface constructor parameter, interface class member\r\n\r\n    public class SomeService{\r\n        private final Repository&lt;EntityOne, Long&gt; repositoryOne;\r\n    \r\n        public SomeService(Repository&lt;EntityOne, Long&gt; repositoryOne) {\r\n            this.repositoryOne = repositoryOne;\r\n        }\r\n    \r\n        // methods\r\n    }\r\n\r\n\r\n\r\n4th - interface constructor parameter, concrete class member but cast the interface(this seems funky at best)\r\n\r\n    public class SomeService{\r\n        private final RepositoryOne repositoryOne;\r\n    \r\n        public SomeService(Repository&lt;EntityOne, Long&gt; repositoryOne) {\r\n            this.repositoryOne = (RepositoryOne) repositoryOne;\r\n        }\r\n    \r\n        // methods\r\n    }\r\n\r\n\r\nEven more so, does it matter?\r\n\r\nIf you could justify your answer with a &quot;why&quot; that would be awesome. I&#39;m trying to be better as a developer and understanding why is the first step.\r\n","title":"Should construct parameters be abstract or concrete classes when injecting &lt;something&gt;","body":"<p>You'll have to excuse my ignorance, I'm very new to Java.</p>\n<p>Let's pretend I'm trying to create a repository.<br />\nI have an interface such as this:</p>\n<pre><code>public interface Repository&lt;T, K&gt;{\n    T get(K id);\n    // some more methods\n}\n</code></pre>\n<p>And then a few concrete classes that implement this interface</p>\n<pre><code>public class RepositoryOne implements Repository&lt;EntityOne, Long&gt; {\n    // methods\n}\n\n\npublic class RepositoryTwo implements Repository&lt;EntityTwo, Long&gt; {\n    // methods\n}\n</code></pre>\n<p>And then some service that uses one of the concrete repository interface implementations.</p>\n<p>My question is: <strong>what is the correct way to write this service?</strong> Here are some examples, all valid from a syntax point of view.</p>\n<p>1st - concrete constructor parameter, concrete class member</p>\n<pre><code>public class SomeService{\n    private final RepositoryOne repositoryOne;\n\n    public SomeService(RepositoryOne repositoryOne) {\n        this.repositoryOne = repositoryOne;\n    }\n\n    // methods\n}\n</code></pre>\n<p>2nd - concrete constructor parameter, interface class member</p>\n<pre><code>public class SomeService{\n    private final Repository&lt;EntityOne, Long&gt; repositoryOne;\n\n    public SomeService(RepositoryOne repositoryOne) {\n        this.repositoryOne = repositoryOne;\n    }\n\n    // methods\n}\n</code></pre>\n<p>3rd - interface constructor parameter, interface class member</p>\n<pre><code>public class SomeService{\n    private final Repository&lt;EntityOne, Long&gt; repositoryOne;\n\n    public SomeService(Repository&lt;EntityOne, Long&gt; repositoryOne) {\n        this.repositoryOne = repositoryOne;\n    }\n\n    // methods\n}\n</code></pre>\n<p>4th - interface constructor parameter, concrete class member but cast the interface(this seems funky at best)</p>\n<pre><code>public class SomeService{\n    private final RepositoryOne repositoryOne;\n\n    public SomeService(Repository&lt;EntityOne, Long&gt; repositoryOne) {\n        this.repositoryOne = (RepositoryOne) repositoryOne;\n    }\n\n    // methods\n}\n</code></pre>\n<p>Even more so, does it matter?</p>\n<p>If you could justify your answer with a &quot;why&quot; that would be awesome. I'm trying to be better as a developer and understanding why is the first step.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1689790380,"post_id":76724113,"comment_id":135264870,"body_markdown":"An int is 4 bytes. So create a byte array 4x the size of the list, then for each int, put the various bytes of the int (use bitshift operators).","body":"An int is 4 bytes. So create a byte array 4x the size of the list, then for each int, put the various bytes of the int (use bitshift operators)."}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795751,"creation_date":1689791600,"answer_id":76724305,"question_id":76724113,"body_markdown":"You can make use of `ByteBuffer` to convert a collection of integers to a byte array.\r\n\r\n```java\r\nimport java.nio.ByteBuffer;\r\nimport java.util.Collection;\r\n\r\npublic class Foo {\r\n\r\n    public static byte[] toByteArray(Collection&lt;Integer&gt; ints) {\r\n        // an integer in Java is a 32-bit number (i.e., 4 bytes)\r\n        int capacity = Math.multiplyExact(ints.size(), 4);\r\n        ByteBuffer buffer = ByteBuffer.allocate(capacity);\r\n        ints.forEach(buffer::putInt);\r\n        return buffer.array();\r\n    }\r\n}\r\n```\r\n\r\n&lt;sup&gt;**Note:** The above `ByteBuffer` will be using the `BIG_ENDIAN` byte order. You can change that to `LITTLE_ENDIAN` if you need to.&lt;/sup&gt;\r\n\r\nThen, assuming you&#39;re using JDBC directly, you just need to make use of:\r\n\r\n* [`Connection#createBlob()`][1]\r\n* [`Blob#setBytes(long,byte[])`][2]\r\n* [`PreparedStatement#setBlob(int,Blob)`][3]\r\n\r\nNote there&#39;s also the [`PreparedStatement#setBlob(int,InputStream)`][4] method. Meaning you could create an `InputStream` that reads the bytes from your integers. This may have significant memory-use improvements depending on how large your integer collection is (and the JDBC driver implementation), as you don&#39;t have to allocate a byte buffer/array.\r\n\r\n```java\r\nimport java.io.InputStream;\r\nimport java.util.Iterator;\r\n\r\npublic class IntegerInputStream extends InputStream {\r\n\r\n    private final Iterator&lt;Integer&gt; ints;\r\n\r\n    private int currentInt;\r\n    private int byteIndex = -1;\r\n\r\n    public IntegerInputStream(Iterable&lt;Integer&gt; ints) {\r\n        this.ints = ints.iterator();\r\n    }\r\n\r\n    @Override\r\n    public int read() {\r\n        if (byteIndex == -1) {\r\n            if (ints.hasNext()) {\r\n                currentInt = ints.next();\r\n                byteIndex = 3;\r\n            } else {\r\n                return -1;\r\n            }\r\n        }\r\n        int next = (currentInt &gt;&gt; 8 * byteIndex) &amp; 0xFF;\r\n        byteIndex--;\r\n        return next;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Connection.html#createBlob()\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Blob.html#setBytes(long,byte%5B%5D)\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.sql.Blob)\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.io.InputStream)","title":"In Java - Convert ArrayList&lt;Integer&gt; to Byte Array then convert Byte Array to BLOB","body":"<p>You can make use of <code>ByteBuffer</code> to convert a collection of integers to a byte array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.ByteBuffer;\nimport java.util.Collection;\n\npublic class Foo {\n\n    public static byte[] toByteArray(Collection&lt;Integer&gt; ints) {\n        // an integer in Java is a 32-bit number (i.e., 4 bytes)\n        int capacity = Math.multiplyExact(ints.size(), 4);\n        ByteBuffer buffer = ByteBuffer.allocate(capacity);\n        ints.forEach(buffer::putInt);\n        return buffer.array();\n    }\n}\n</code></pre>\n<p><sup><strong>Note:</strong> The above <code>ByteBuffer</code> will be using the <code>BIG_ENDIAN</code> byte order. You can change that to <code>LITTLE_ENDIAN</code> if you need to.</sup></p>\n<p>Then, assuming you're using JDBC directly, you just need to make use of:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Connection.html#createBlob()\" rel=\"nofollow noreferrer\"><code>Connection#createBlob()</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Blob.html#setBytes(long,byte%5B%5D)\" rel=\"nofollow noreferrer\"><code>Blob#setBytes(long,byte[])</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.sql.Blob)\" rel=\"nofollow noreferrer\"><code>PreparedStatement#setBlob(int,Blob)</code></a></li>\n</ul>\n<p>Note there's also the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>PreparedStatement#setBlob(int,InputStream)</code></a> method. Meaning you could create an <code>InputStream</code> that reads the bytes from your integers. This may have significant memory-use improvements depending on how large your integer collection is (and the JDBC driver implementation), as you don't have to allocate a byte buffer/array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.InputStream;\nimport java.util.Iterator;\n\npublic class IntegerInputStream extends InputStream {\n\n    private final Iterator&lt;Integer&gt; ints;\n\n    private int currentInt;\n    private int byteIndex = -1;\n\n    public IntegerInputStream(Iterable&lt;Integer&gt; ints) {\n        this.ints = ints.iterator();\n    }\n\n    @Override\n    public int read() {\n        if (byteIndex == -1) {\n            if (ints.hasNext()) {\n                currentInt = ints.next();\n                byteIndex = 3;\n            } else {\n                return -1;\n            }\n        }\n        int next = (currentInt &gt;&gt; 8 * byteIndex) &amp; 0xFF;\n        byteIndex--;\n        return next;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689794034,"creation_date":1689794034,"answer_id":76724551,"question_id":76724113,"body_markdown":"Standard java serizlizations works fine in this case:\r\n```java\r\npublic static void main(String... args) throws IOException, ClassNotFoundException {\r\n    List&lt;Integer&gt; numbers = IntStream.range(0, 100).boxed().collect(Collectors.toList());\r\n    byte[] buf = serialize(numbers);\r\n    List&lt;Integer&gt; res = deserialize(buf);\r\n}\r\n\r\npublic static byte[] serialize(List&lt;Integer&gt; numbers) throws IOException {\r\n    try (ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n         ObjectOutputStream oos = new ObjectOutputStream(out)) {\r\n        oos.writeObject(numbers);\r\n        return out.toByteArray();\r\n    }\r\n}\r\n\r\npublic static List&lt;Integer&gt; deserialize(byte[] buf) throws IOException, ClassNotFoundException {\r\n    try (ByteArrayInputStream bais = new ByteArrayInputStream(buf);\r\n         ObjectInputStream in = new ObjectInputStream(bais)) {\r\n        return (List&lt;Integer&gt;) in.readObject();\r\n    }\r\n}\r\n```","title":"In Java - Convert ArrayList&lt;Integer&gt; to Byte Array then convert Byte Array to BLOB","body":"<p>Standard java serizlizations works fine in this case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) throws IOException, ClassNotFoundException {\n    List&lt;Integer&gt; numbers = IntStream.range(0, 100).boxed().collect(Collectors.toList());\n    byte[] buf = serialize(numbers);\n    List&lt;Integer&gt; res = deserialize(buf);\n}\n\npublic static byte[] serialize(List&lt;Integer&gt; numbers) throws IOException {\n    try (ByteArrayOutputStream out = new ByteArrayOutputStream();\n         ObjectOutputStream oos = new ObjectOutputStream(out)) {\n        oos.writeObject(numbers);\n        return out.toByteArray();\n    }\n}\n\npublic static List&lt;Integer&gt; deserialize(byte[] buf) throws IOException, ClassNotFoundException {\n    try (ByteArrayInputStream bais = new ByteArrayInputStream(buf);\n         ObjectInputStream in = new ObjectInputStream(bais)) {\n        return (List&lt;Integer&gt;) in.readObject();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":353536,"reputation":678,"user_id":3923629,"accept_rate":75,"display_name":"Palu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689795751,"creation_date":1689790070,"question_id":76724113,"body_markdown":"I have climate data such as moisture, pressure, temp etc ... that are daily values, and need to do calculations over a month, and many different months.\r\nThis leads to data that is either DOUBLE or INTEGER data that are put into Arraylists.\r\n\r\nI want to be able to convert this ArrayList to a Byte Array, then compress this\r\nto a Binary BLOB, and store in a database in a BLOB field.\r\nI knew someone before that did this in python was able to convert Array to ByteArray and then \r\nput into database BLOB field.\r\n\r\nI have seen some links here, but it is not exactly the same.\r\nIt is really confusing the different ways to do this.\r\nFor example here from this link, they encode to base64.\r\nhttps://stackoverflow.com/questions/44059116/how-to-convert-int-array-to-base64-string-in-java\r\n\r\nHope someone can provide guidance into this area.\r\n\r\nP.","title":"In Java - Convert ArrayList&lt;Integer&gt; to Byte Array then convert Byte Array to BLOB","body":"<p>I have climate data such as moisture, pressure, temp etc ... that are daily values, and need to do calculations over a month, and many different months.\nThis leads to data that is either DOUBLE or INTEGER data that are put into Arraylists.</p>\n<p>I want to be able to convert this ArrayList to a Byte Array, then compress this\nto a Binary BLOB, and store in a database in a BLOB field.\nI knew someone before that did this in python was able to convert Array to ByteArray and then\nput into database BLOB field.</p>\n<p>I have seen some links here, but it is not exactly the same.\nIt is really confusing the different ways to do this.\nFor example here from this link, they encode to base64.\n<a href=\"https://stackoverflow.com/questions/44059116/how-to-convert-int-array-to-base64-string-in-java\">How to convert int array to base64 string in Java?</a></p>\n<p>Hope someone can provide guidance into this area.</p>\n<p>P.</p>\n"},{"tags":["java","jsoup"],"answers":[{"tags":[],"owner":{"account_id":4181404,"reputation":6036,"user_id":3426328,"accept_rate":83,"display_name":"TDG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689779317,"creation_date":1689779317,"answer_id":76722741,"question_id":76721762,"body_markdown":"Probably all the special characters (@/+) causing parsing problem in your selctor.  \r\nIf you look at the desired text, it belongs to a div that starts with &quot;qa-story-body&quot;, so the first step will be to fetch this div simply by using `div.qa-story-body`, but this div also includes some redundent text which can be found in the `ul` at the bottom of it. Luckily, all the paragraphs that you want start with the `p` tag, so you can use the selector `div.qa-story-body &gt; p` to get only the text of the article.  \r\nFull code:  \r\n\r\n    String url = &quot;https://www.bbc.com/sport/football/66241967&quot;;\r\n\tDocument doc = Jsoup.connect(url).get();\r\n\tElements spans = doc.select(&quot;div.qa-story-body &gt; p&quot;);\r\n\tfor (Element sp : spans) {\r\n\t\tSystem.out.println(sp.text());\r\n\t}","title":"Java JSoup: Could not parse query ... unexpected token at /","body":"<p>Probably all the special characters (@/+) causing parsing problem in your selctor.<br />\nIf you look at the desired text, it belongs to a div that starts with &quot;qa-story-body&quot;, so the first step will be to fetch this div simply by using <code>div.qa-story-body</code>, but this div also includes some redundent text which can be found in the <code>ul</code> at the bottom of it. Luckily, all the paragraphs that you want start with the <code>p</code> tag, so you can use the selector <code>div.qa-story-body &gt; p</code> to get only the text of the article.<br />\nFull code:</p>\n<pre><code>String url = &quot;https://www.bbc.com/sport/football/66241967&quot;;\nDocument doc = Jsoup.connect(url).get();\nElements spans = doc.select(&quot;div.qa-story-body &gt; p&quot;);\nfor (Element sp : spans) {\n    System.out.println(sp.text());\n}\n</code></pre>\n"}],"owner":{"account_id":25506622,"reputation":45,"user_id":19298991,"display_name":"Robbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1689795718,"creation_date":1689772801,"question_id":76721762,"body_markdown":"I&#39;m learning jsoup using a news article about football (https://www.bbc.com/sport/football/66241967).\r\n\r\nMy goal is to extract the text body of the news article.\r\n\r\nSince the text body of the article seems to sit within multiple spans of a div class called `qa-story-body story-body gel-pica gel-10/12@m gel-7/8@l gs-u-ml0@l gs-u-pb++`, I want to extract all spans within that div class. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe problem is that instead of my expected output I get an error (see code below). \r\n\r\nWhy can&#39;t the query be parsed? \r\n \r\n\r\n    import java.io.IOException;\r\n    import org.jsoup.Jsoup;  \r\n    import org.jsoup.nodes.Document;  \r\n    import org.jsoup.nodes.Element;  \r\n    import org.jsoup.select.Elements;\r\n\r\n\r\n    public class Footballnews{\r\n\r\n\t    public static void main(String[] args) throws IOException {\r\n\t\t\r\n\t\t    Document document = Jsoup.connect(&quot;https://www.bbc.com/sport/football/66244696&quot;).get();\t\r\n\t\t    Elements spans = document.select(&quot;div.qa-story-body.story-body.gel-pica.gel-10/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span&quot;);\r\n\t\t    for (Element span: spans) {\r\n\t\t\t    System.out.println(span.text());\r\n\t\t    }  \r\n\t    }\r\n    }\r\n\r\nI get this:\r\n\r\n&gt; Exception in thread &quot;main&quot; org.jsoup.select.Selector$SelectorParseException: \r\n    Could not parse query &#39;div.qa-story-body.story-body.gel-pica.gel-10/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span&#39;: \r\n    unexpected token at &#39;/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span&#39;\r\n\r\n\r\nI expected the text:\r\n\r\n&gt; Brazilian civil servants can report to work up to four hours late - two hours after the end of matches - when the national side play in the 2023 Women&#39;s World Cup. The competition gets under way on Thursday in Australia and New Zealand. Brazil play their opening game on Monday against Panama in Adelaide.....\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/coCIL.jpg","title":"Java JSoup: Could not parse query ... unexpected token at /","body":"<p>I'm learning jsoup using a news article about football (<a href=\"https://www.bbc.com/sport/football/66241967\" rel=\"nofollow noreferrer\">https://www.bbc.com/sport/football/66241967</a>).</p>\n<p>My goal is to extract the text body of the news article.</p>\n<p>Since the text body of the article seems to sit within multiple spans of a div class called <code>qa-story-body story-body gel-pica gel-10/12@m gel-7/8@l gs-u-ml0@l gs-u-pb++</code>, I want to extract all spans within that div class.</p>\n<p><a href=\"https://i.stack.imgur.com/coCIL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/coCIL.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The problem is that instead of my expected output I get an error (see code below).</p>\n<p>Why can't the query be parsed?</p>\n<pre><code>import java.io.IOException;\nimport org.jsoup.Jsoup;  \nimport org.jsoup.nodes.Document;  \nimport org.jsoup.nodes.Element;  \nimport org.jsoup.select.Elements;\n\n\npublic class Footballnews{\n\n    public static void main(String[] args) throws IOException {\n    \n        Document document = Jsoup.connect(&quot;https://www.bbc.com/sport/football/66244696&quot;).get(); \n        Elements spans = document.select(&quot;div.qa-story-body.story-body.gel-pica.gel-10/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span&quot;);\n        for (Element span: spans) {\n            System.out.println(span.text());\n        }  \n    }\n}\n</code></pre>\n<p>I get this:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; org.jsoup.select.Selector$SelectorParseException:\nCould not parse query 'div.qa-story-body.story-body.gel-pica.gel-10/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span':\nunexpected token at '/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span'</p>\n</blockquote>\n<p>I expected the text:</p>\n<blockquote>\n<p>Brazilian civil servants can report to work up to four hours late - two hours after the end of matches - when the national side play in the 2023 Women's World Cup. The competition gets under way on Thursday in Australia and New Zealand. Brazil play their opening game on Monday against Panama in Adelaide.....</p>\n</blockquote>\n"},{"tags":["java","matrix","linear-algebra"],"answers":[{"comments":[{"owner":{"account_id":2029560,"reputation":9470,"user_id":1813669,"accept_rate":67,"display_name":"scadge"},"score":1,"creation_date":1389850956,"post_id":21154140,"comment_id":31841020,"body_markdown":"Anyway, thanks for making me remember what the cofactor matrix is =)","body":"Anyway, thanks for making me remember what the cofactor matrix is =)"}],"tags":[],"owner":{"account_id":470213,"reputation":9154,"user_id":877279,"accept_rate":41,"display_name":"Tyler Sebastian"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1389850815,"creation_date":1389850815,"answer_id":21154140,"question_id":21153823,"body_markdown":"Frankly, I&#39;m a bit of an idiot. \r\n\r\nThe matrix I&#39;m using for testing is `{{8, 3, 5}, {5, 6, 6}, {1, 7, 6}}` but the value I&#39;m checking on Wolfram is `{{8, 5, 1}, {3, 6, 7}, {5, 6, 6}}`...","title":"Determining Cofactor Matrix in Java","body":"<p>Frankly, I'm a bit of an idiot. </p>\n\n<p>The matrix I'm using for testing is <code>{{8, 3, 5}, {5, 6, 6}, {1, 7, 6}}</code> but the value I'm checking on Wolfram is <code>{{8, 5, 1}, {3, 6, 7}, {5, 6, 6}}</code>...</p>\n"},{"tags":[],"owner":{"account_id":20405827,"reputation":11,"user_id":14970410,"display_name":"Jacob Lee"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689795691,"creation_date":1689515491,"answer_id":76698604,"question_id":21153823,"body_markdown":"Your `cofactor()` function gives the adjoint value not cofactor. It&#39;s because in  \r\n```\r\nresult.matrix[j][i] = \r\n```\r\nyou swap the `j` and `i`.","title":"Determining Cofactor Matrix in Java","body":"<p>Your <code>cofactor()</code> function gives the adjoint value not cofactor. It's because in</p>\n<pre><code>result.matrix[j][i] = \n</code></pre>\n<p>you swap the <code>j</code> and <code>i</code>.</p>\n"}],"owner":{"account_id":470213,"reputation":9154,"user_id":877279,"accept_rate":41,"display_name":"Tyler Sebastian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5094,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689795691,"creation_date":1389849160,"question_id":21153823,"body_markdown":"I&#39;m trying to determine a cofactor matrix. My code is correctly generating all the cofactors; however, in some cases, the resulting matrix is rotated by 90 degrees (well, the cols/rows are switched). \r\n\r\nFor example, the matrix: [{{8, 5, 1}, {3, 6, 7}, {5, 6, 6}}][1] produced the correct result.\r\n\r\noutput &gt;\r\n\r\n    a\r\n    8 3 5 \r\n    5 6 6 \r\n    1 7 6 \r\n    \r\n    a\r\n    -6 17 -12 \r\n    -24 43 -23 \r\n    29 -53 33 \r\n\r\nhowever, the matrix: [{{1, 0, 5}, {9, 3, 0}, {0, 9, 3}}][2] switches rows and columns. \r\n\r\noutput &gt; \r\n\r\n    b\r\n    1 0 5 \r\n    9 3 0 \r\n    0 9 3 \r\n    \r\n    b\r\n    9 45 -15 \r\n    -27 3 45 \r\n    81 -9 3 \r\n\r\nthe correct result is:\r\n\r\n    9 -27 81\r\n    45 3 -9\r\n    -15 45 3\r\n\r\nThe matrices are stored thusly: \r\n\r\n    Matrix:\r\n        int matrix[][]\r\n        int rows\r\n        int cols\r\n\r\nrows and cols are really necessary, but it&#39;s nicer than using matrix.length every time I&#39;m trying to determine how many values I&#39;m working with. \r\n\r\nhere is the code that generates these matrices: \r\n\r\n    public Matrix cofactor() {\r\n\t\tMatrix result = new Matrix(this.rows, this.cols);\r\n\t\tfor (int i = 0; i &lt; result.rows; i++) {\r\n\t\t\tfor (int j = 0; j &lt; result.cols; j++) {\r\n\t\t\t\tresult.matrix[j][i] = (int)(Math.pow(-1, i + j) * removeRowCol(i, j).determinant());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic Matrix removeRowCol(int row, int col) {\r\n\t\tMatrix result = new Matrix(this.rows - 1, this.cols - 1);\r\n\r\n\t\tint k = 0, l = 0;\r\n\t\tfor (int i = 0; i &lt; this.rows; i++) {\r\n\t\t\tif (i == row) continue;\r\n\t\t\tfor (int j = 0; j &lt; this.cols; j++) {\r\n\t\t\t\tif (j == col) continue;\r\n\t\t\t\tresult.matrix[l][k] = this.matrix[i][j];\r\n\r\n\t\t\t\tk = (k + 1) % (this.rows - 1);\r\n\t\t\t\tif (k == 0) l++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\nthe determinant part is a bit of a hack, now, but it works for 3x3 and 2x2 matrices. \r\n\r\n    public int determinant() {\r\n\t\tif (this.rows == 2) return this.matrix[0][0] * this.matrix[1][1] - this.matrix[0][1] * this.matrix[1][0];\r\n\r\n\t\tint determinant1 = 0, determinant2 = 0;\r\n\t\tfor (int i = 0; i &lt; this.rows; i++) {\r\n\t\t\tint temp = 1, temp2 = 1;\r\n\t\t\tfor (int j = 0; j &lt; this.cols; j++) {\r\n\t\t\t\ttemp *= this.matrix[(i + j) % this.cols][j];\r\n\t\t\t\ttemp2 *= this.matrix[(i + j) % this.cols][this.rows - 1 - j];\r\n\t\t\t}\r\n\t\t\r\n\t\t\tdeterminant1 += temp; \r\n\t\t\tdeterminant2 += temp2;\r\n\t\t}\r\n\r\n\t\treturn determinant1 - determinant2;\r\n\t}\r\n\r\nAnyways, I&#39;m stuck trying to figure out why only certain matrices are &quot;rotated.&quot;\r\n\r\n\r\n  [1]: http://www.wolframalpha.com/input/?i=cofactor%20%7B%7B8,%205,%201%7D,%20%7B3,%206,%207%7D,%20%7B5,%206,%206%7D%7D\r\n  [2]: http://www.wolframalpha.com/input/?i=%7B%7B1,%200,%205%7D,%20%7B9,%203,%200%7D,%20%7B0,%209,%203%7D%7D%20cofactor","title":"Determining Cofactor Matrix in Java","body":"<p>I'm trying to determine a cofactor matrix. My code is correctly generating all the cofactors; however, in some cases, the resulting matrix is rotated by 90 degrees (well, the cols/rows are switched). </p>\n\n<p>For example, the matrix: <a href=\"http://www.wolframalpha.com/input/?i=cofactor%20%7B%7B8,%205,%201%7D,%20%7B3,%206,%207%7D,%20%7B5,%206,%206%7D%7D\" rel=\"nofollow\">{{8, 5, 1}, {3, 6, 7}, {5, 6, 6}}</a> produced the correct result.</p>\n\n<p>output ></p>\n\n<pre><code>a\n8 3 5 \n5 6 6 \n1 7 6 \n\na\n-6 17 -12 \n-24 43 -23 \n29 -53 33 \n</code></pre>\n\n<p>however, the matrix: <a href=\"http://www.wolframalpha.com/input/?i=%7B%7B1,%200,%205%7D,%20%7B9,%203,%200%7D,%20%7B0,%209,%203%7D%7D%20cofactor\" rel=\"nofollow\">{{1, 0, 5}, {9, 3, 0}, {0, 9, 3}}</a> switches rows and columns. </p>\n\n<p>output > </p>\n\n<pre><code>b\n1 0 5 \n9 3 0 \n0 9 3 \n\nb\n9 45 -15 \n-27 3 45 \n81 -9 3 \n</code></pre>\n\n<p>the correct result is:</p>\n\n<pre><code>9 -27 81\n45 3 -9\n-15 45 3\n</code></pre>\n\n<p>The matrices are stored thusly: </p>\n\n<pre><code>Matrix:\n    int matrix[][]\n    int rows\n    int cols\n</code></pre>\n\n<p>rows and cols are really necessary, but it's nicer than using matrix.length every time I'm trying to determine how many values I'm working with. </p>\n\n<p>here is the code that generates these matrices: </p>\n\n<pre><code>public Matrix cofactor() {\n    Matrix result = new Matrix(this.rows, this.cols);\n    for (int i = 0; i &lt; result.rows; i++) {\n        for (int j = 0; j &lt; result.cols; j++) {\n            result.matrix[j][i] = (int)(Math.pow(-1, i + j) * removeRowCol(i, j).determinant());\n        }\n    }\n\n    return result;\n}\n\npublic Matrix removeRowCol(int row, int col) {\n    Matrix result = new Matrix(this.rows - 1, this.cols - 1);\n\n    int k = 0, l = 0;\n    for (int i = 0; i &lt; this.rows; i++) {\n        if (i == row) continue;\n        for (int j = 0; j &lt; this.cols; j++) {\n            if (j == col) continue;\n            result.matrix[l][k] = this.matrix[i][j];\n\n            k = (k + 1) % (this.rows - 1);\n            if (k == 0) l++;\n        }\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>the determinant part is a bit of a hack, now, but it works for 3x3 and 2x2 matrices. </p>\n\n<pre><code>public int determinant() {\n    if (this.rows == 2) return this.matrix[0][0] * this.matrix[1][1] - this.matrix[0][1] * this.matrix[1][0];\n\n    int determinant1 = 0, determinant2 = 0;\n    for (int i = 0; i &lt; this.rows; i++) {\n        int temp = 1, temp2 = 1;\n        for (int j = 0; j &lt; this.cols; j++) {\n            temp *= this.matrix[(i + j) % this.cols][j];\n            temp2 *= this.matrix[(i + j) % this.cols][this.rows - 1 - j];\n        }\n\n        determinant1 += temp; \n        determinant2 += temp2;\n    }\n\n    return determinant1 - determinant2;\n}\n</code></pre>\n\n<p>Anyways, I'm stuck trying to figure out why only certain matrices are \"rotated.\"</p>\n"},{"tags":["java","sql","spring","spring-boot","repository"],"owner":{"account_id":26225274,"reputation":1,"user_id":19902050,"display_name":"Kesavan Balakrishnan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689795650,"creation_date":1689759474,"question_id":76719894,"body_markdown":"I was trying to query the table which returns an empty value in DB. And after I am setting it in List but while checking the list it was not empty. Why it was not empty or null? But DB returns empty only for the query.\r\n\r\nExample:\r\nList&lt;String&gt; keyLook = Repository.getTypeFromTable(key);\r\nRepository query is\r\n  @Query(value = &quot;SELECT TYPE FROM KEY_LOOK WHERE KEY IN (:KEY)&quot;, nativeQuery = true)\r\n\r\nWhile query in DB, returns as attached image. But while checking keyLook list it is not empty. Due to this, it is skipping null or empty check in Java, and the loop move inside implementations. what is the cause of this issue?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vUr3B.jpg","title":"Sql query returns empty value, but in list have some values in java","body":"<p>I was trying to query the table which returns an empty value in DB. And after I am setting it in List but while checking the list it was not empty. Why it was not empty or null? But DB returns empty only for the query.</p>\n<p>Example:\nList keyLook = Repository.getTypeFromTable(key);\nRepository query is\n@Query(value = &quot;SELECT TYPE FROM KEY_LOOK WHERE KEY IN (:KEY)&quot;, nativeQuery = true)</p>\n<p>While query in DB, returns as attached image. But while checking keyLook list it is not empty. Due to this, it is skipping null or empty check in Java, and the loop move inside implementations. what is the cause of this issue?</p>\n<p><a href=\"https://i.stack.imgur.com/vUr3B.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vUr3B.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","json","qjsonobject"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1689559138,"post_id":76701044,"comment_id":135225712,"body_markdown":"You are trying to parse a string of HTML as JSON, I would say.","body":"You are trying to parse a string of HTML as JSON, I would say."},{"owner":{"account_id":29028716,"reputation":1,"user_id":22236228,"display_name":"Syarief Rahman"},"score":0,"creation_date":1689559762,"post_id":76701044,"comment_id":135225758,"body_markdown":"I can&#39;t understand it, can you explain in more detail?","body":"I can&#39;t understand it, can you explain in more detail?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689559902,"post_id":76701044,"comment_id":135225770,"body_markdown":"You haven&#39;t posted the stack trace of the exception, so it&#39;s difficult to be certain, but most likely the POST request made by `RegisterUser` is returning HTML instead of JSON. You could log the string before you try to parse it to see what&#39;s happening, or use the debugger.","body":"You haven&#39;t posted the stack trace of the exception, so it&#39;s difficult to be certain, but most likely the POST request made by <code>RegisterUser</code> is returning HTML instead of JSON. You could log the string before you try to parse it to see what&#39;s happening, or use the debugger."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689563440,"post_id":76701044,"comment_id":135226030,"body_markdown":"So that is where it&#39;s happening (by the way, you should copy and paste stack traces instead of posting images)","body":"So that is where it&#39;s happening (by the way, you should copy and paste stack traces instead of posting images)"},{"owner":{"account_id":29028716,"reputation":1,"user_id":22236228,"display_name":"Syarief Rahman"},"score":0,"creation_date":1689564267,"post_id":76701044,"comment_id":135226105,"body_markdown":"i&#39;m sorry dude, this my first time using stack overflow, and i still got stuck with that problem","body":"i&#39;m sorry dude, this my first time using stack overflow, and i still got stuck with that problem"}],"owner":{"account_id":29028716,"reputation":1,"user_id":22236228,"display_name":"Syarief Rahman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689795498,"creation_date":1689557599,"question_id":76701044,"body_markdown":"I have tried to fix this json program but always have problem in this case, this program can&#39;t output data to database and i think the problem is in java mainactivity. But until now I still don&#39;t know where the problem is.\r\n\r\n\r\nthis is my ShaperedPrefManager\r\n\r\n\r\n```lang-java\r\n\r\npublic class SharedPrefManager {\r\n    //the constants\r\n    private static final String SHARED_PREF_NAME = &quot;simplifiedcodingsharedpref&quot;;\r\n    private static final String KEY_USERNAME = &quot;keyusername&quot;;\r\n\r\n    private static final String KEY_ID = &quot;keyid&quot;;\r\n\r\n    private static SharedPrefManager mInstance;\r\n    private static Context mCtx;\r\n\r\n    private SharedPrefManager(Context context) {\r\n        mCtx = context;\r\n    }\r\n\r\n    public static synchronized SharedPrefManager getInstance(Context context) {\r\n        if (mInstance == null) {\r\n            mInstance = new SharedPrefManager(context);\r\n        }\r\n        return mInstance;\r\n    }\r\n\r\n    //method to let the user login\r\n    //this method will store the user data in shared preferences\r\n    public void userLogin(user user) {\r\n        SharedPreferences sharedPreferences = mCtx.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putInt(KEY_ID, user.getId());\r\n        editor.putString(KEY_USERNAME, user.getUsername());\r\n\r\n        editor.apply();\r\n    }\r\n\r\n    //this method will checker whether user is already logged in or not\r\n    public boolean isLoggedIn() {\r\n        SharedPreferences sharedPreferences = mCtx.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\r\n        return sharedPreferences.getString(KEY_USERNAME, null) != null;\r\n    }\r\n\r\n    //this method will give the logged in user\r\n    public user getUser() {\r\n        SharedPreferences sharedPreferences = mCtx.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\r\n        return new user(\r\n                sharedPreferences.getInt(KEY_ID, -1),\r\n                sharedPreferences.getString(KEY_USERNAME, null)\r\n\r\n        );\r\n    }\r\n\r\n    //this method will logout the user\r\n    public void logout() {\r\n        SharedPreferences sharedPreferences = mCtx.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.clear();\r\n        editor.apply();\r\n        mCtx.startActivity(new Intent(mCtx, LoginActivity.class));\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nthis activity main\r\n\r\n\r\n\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;com.example.apbProject.MainActivity&quot;&gt;\r\n\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_centerVertical=&quot;true&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:padding=&quot;10dp&quot;&gt;\r\n\r\n\r\n        &lt;EditText\r\n            android:id=&quot;@+id/editTextUsername&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;50dp&quot;\r\n            android:layout_marginBottom=&quot;8dp&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:hint=&quot;Username&quot;\r\n            android:inputType=&quot;text&quot; /&gt;\r\n\r\n\r\n        &lt;EditText\r\n            android:id=&quot;@+id/editTextPassword&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;50dp&quot;\r\n            android:layout_marginBottom=&quot;8dp&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:fontFamily=&quot;sans-serif&quot;\r\n            android:hint=&quot;Password&quot;\r\n            android:inputType=&quot;textPassword&quot; /&gt;\r\n\r\n\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonRegister&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginBottom=&quot;8dp&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:text=&quot;Register&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/textViewLogin&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginBottom=&quot;8dp&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:text=&quot;Already Registered?\\nLogin Here&quot;\r\n            android:textAlignment=&quot;center&quot;\r\n            android:textAppearance=&quot;@style/Base.TextAppearance.AppCompat.Medium&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;ProgressBar\r\n        android:visibility=&quot;gone&quot;\r\n        android:id=&quot;@+id/progressBar&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_centerVertical=&quot;true&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\nand this my mainactivity java\r\n\r\n\r\n\r\n```lang-js\r\npackage com.example.apbProject;\r\n\r\nimport android.content.Intent;\r\nimport android.os.AsyncTask;\r\nimport android.support.v7.app.AppCompatActivity;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.registeractivity.R;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.HashMap;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    EditText editTextUsername, editTextEmail, editTextPassword;\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        //if the user is already logged in we will directly start the profile activity\r\n        if (SharedPrefManager.getInstance(this).isLoggedIn()) {\r\n            finish();\r\n            startActivity(new Intent(this, MonitoringActivity.class));\r\n            return;\r\n        }\r\n\r\n        editTextUsername = (EditText) findViewById(R.id.editTextUsername);\r\n        editTextPassword = (EditText) findViewById(R.id.editTextPassword);\r\n\r\n\r\n\r\n        findViewById(R.id.buttonRegister).setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //if user pressed on button register\r\n                //here we will register the user to server\r\n                registerUser();\r\n            }\r\n        });\r\n\r\n        findViewById(R.id.textViewLogin).setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //if user pressed on login\r\n                //we will open the login screen\r\n                finish();\r\n                startActivity(new Intent(MainActivity.this, LoginActivity.class));\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void registerUser() {\r\n        final String username = editTextUsername.getText().toString().trim();\r\n\r\n        final String password = editTextPassword.getText().toString().trim();\r\n\r\n\r\n\r\n        //first we will do the validations\r\n\r\n        if (TextUtils.isEmpty(username)) {\r\n            editTextUsername.setError(&quot;Please enter username&quot;);\r\n            editTextUsername.requestFocus();\r\n            return;\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        if (TextUtils.isEmpty(password)) {\r\n            editTextPassword.setError(&quot;Enter a password&quot;);\r\n            editTextPassword.requestFocus();\r\n            return;\r\n        }\r\n\r\n        //if it passes all the validations\r\n\r\n        class RegisterUser extends AsyncTask&lt;Void, Void, String&gt; {\r\n\r\n            private ProgressBar progressBar;\r\n\r\n            @Override\r\n            protected String doInBackground(Void... voids) {\r\n                //creating request handler object\r\n                RequestHandler requestHandler = new RequestHandler();\r\n\r\n                //creating request parameters\r\n                HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n                params.put(&quot;username&quot;, username);\r\n                params.put(&quot;password&quot;, password);\r\n\r\n\r\n                //returing the response\r\n                return requestHandler.sendPostRequest(URLs.URL_REGISTER, params);\r\n            }\r\n\r\n            @Override\r\n            protected void onPreExecute() {\r\n                super.onPreExecute();\r\n                //displaying the progress bar while user registers on the server\r\n                progressBar = (ProgressBar) findViewById(R.id.progressBar);\r\n                progressBar.setVisibility(View.VISIBLE);\r\n            }\r\n\r\n            @Override\r\n            protected void onPostExecute(String s) {\r\n                super.onPostExecute(s);\r\n                //hiding the progressbar after completion\r\n                progressBar.setVisibility(View.GONE);\r\n\r\n                try {\r\n                    //converting response to json object\r\n\r\n                    JSONObject obj = new JSONObject(s);\r\n\r\n                    //if no error in response\r\n                    if (!obj.getBoolean(&quot;error&quot;)) {\r\n                        Toast.makeText(getApplicationContext(), obj.getString(&quot;message&quot;), Toast.LENGTH_SHORT).show();\r\n\r\n                        //getting the user from the response\r\n                        JSONObject userJson = obj.getJSONObject(&quot;user&quot;);\r\n\r\n                        //creating a new user object\r\n                      user user = new user(\r\n                                userJson.getInt(&quot;id&quot;),\r\n                                userJson.getString(&quot;username&quot;)\r\n\r\n                        );\r\n\r\n                        //storing the user in shared preferences\r\n                        SharedPrefManager.getInstance(getApplicationContext()).userLogin(user);\r\n\r\n                        //starting the profile activity\r\n                        finish();\r\n                        startActivity(new Intent(getApplicationContext(), LoginActivity.class));\r\n                    } else {\r\n                        Toast.makeText(getApplicationContext(), &quot;Some error occurred&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n\r\n        //executing the async task\r\n        RegisterUser ru = new RegisterUser();\r\n        ru.execute();\r\n    }\r\n\r\n}\r\n```\r\n\r\nand this is my Api.php\r\n\r\n```\r\nlang-php\r\n&lt;?php \r\n \r\n require_once &#39;DbConnect.php&#39;;\r\n \r\n $response = array();\r\n \r\n if(isset($_GET[&#39;apicall&#39;])){\r\n \r\n switch($_GET[&#39;apicall&#39;]){\r\n \r\n case &#39;signup&#39;:\r\n if(isTheseParametersAvailable(array(&#39;username&#39;,&#39;password&#39;,))){\r\n $username = $_POST[&#39;username&#39;]; \r\n\r\n $password = $_POST[&#39;password&#39;];\r\n\r\n \r\n $stmt = $conn-&gt;prepare(&quot;SELECT id FROM users WHERE username = ?&quot;);\r\n $stmt-&gt;bind_param(&quot;s&quot;, $username);\r\n $stmt-&gt;execute();\r\n $stmt-&gt;store_result();\r\n \r\n if($stmt-&gt;num_rows &gt; 0){\r\n $response[&#39;error&#39;] = true;\r\n $response[&#39;message&#39;] = &#39;User already registered&#39;;\r\n $stmt-&gt;close();\r\n }else{\r\n $stmt = $conn-&gt;prepare(&quot;INSERT INTO users (username, password) VALUES (?, ?)&quot;);\r\n $stmt-&gt;bind_param(&quot;ss&quot;, $username, $password);\r\n \r\n if($stmt-&gt;execute()){\r\n $stmt = $conn-&gt;prepare(&quot;SELECT id, id, username FROM users WHERE username = ?&quot;); \r\n $stmt-&gt;bind_param(&quot;s&quot;,$username);\r\n $stmt-&gt;execute();\r\n $stmt-&gt;bind_result($userid, $id, $username);\r\n $stmt-&gt;fetch();\r\n \r\n $user = array(\r\n &#39;id&#39;=&gt;$id, \r\n &#39;username&#39;=&gt;$username, \r\n \r\n );\r\n \r\n $stmt-&gt;close();\r\n \r\n $response[&#39;error&#39;] = false; \r\n $response[&#39;message&#39;] = &#39;User registered successfully&#39;; \r\n $response[&#39;user&#39;] = $user; \r\n }\r\n }\r\n \r\n }else{\r\n $response[&#39;error&#39;] = true; \r\n $response[&#39;message&#39;] = &#39;required parameters are not available&#39;; \r\n }\r\n \r\n break; \r\n \r\n case &#39;login&#39;:\r\n \r\n if(isTheseParametersAvailable(array(&#39;username&#39;, &#39;password&#39;))){\r\n \r\n $username = $_POST[&#39;username&#39;];\r\n $password = md5($_POST[&#39;password&#39;]); \r\n \r\n $stmt = $conn-&gt;prepare(&quot;SELECT id, username FROM users WHERE username = ? AND password = ?&quot;);\r\n $stmt-&gt;bind_param(&quot;ssss&quot;,$username, $password);\r\n \r\n $stmt-&gt;execute();\r\n \r\n $stmt-&gt;store_result();\r\n \r\n if($stmt-&gt;num_rows &gt; 0){\r\n \r\n $stmt-&gt;bind_result($id, $username);\r\n $stmt-&gt;fetch();\r\n \r\n $user = array(\r\n &#39;id&#39;=&gt;$id, \r\n &#39;username&#39;=&gt;$username, \r\n \r\n );\r\n \r\n $response[&#39;error&#39;] = false; \r\n $response[&#39;message&#39;] = &#39;Login successfull&#39;; \r\n $response[&#39;user&#39;] = $user; \r\n }else{\r\n $response[&#39;error&#39;] = false; \r\n $response[&#39;message&#39;] = &#39;Invalid username or password&#39;;\r\n }\r\n }\r\n break; \r\n \r\n default: \r\n $response[&#39;error&#39;] = true; \r\n $response[&#39;message&#39;] = &#39;Invalid Operation Called&#39;;\r\n }\r\n \r\n }else{\r\n $response[&#39;error&#39;] = true; \r\n $response[&#39;message&#39;] = &#39;Invalid API Call&#39;;\r\n }\r\n \r\n echo json_encode($response);\r\n \r\n function isTheseParametersAvailable($params){\r\n \r\n foreach($params as $param){\r\n if(!isset($_POST[$param])){\r\n return false; \r\n }\r\n }\r\n return true; \r\n }\r\n ?&gt;\r\n```\r\n\r\nThis my error message:\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GCymQ.jpg","title":"W/System.err: org.json.JSONException: Value &lt;br of type java.lang.String cannot be converted to JSONObjec","body":"<p>I have tried to fix this json program but always have problem in this case, this program can't output data to database and i think the problem is in java mainactivity. But until now I still don't know where the problem is.</p>\n<p>this is my ShaperedPrefManager</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class SharedPrefManager {\n    //the constants\n    private static final String SHARED_PREF_NAME = &quot;simplifiedcodingsharedpref&quot;;\n    private static final String KEY_USERNAME = &quot;keyusername&quot;;\n\n    private static final String KEY_ID = &quot;keyid&quot;;\n\n    private static SharedPrefManager mInstance;\n    private static Context mCtx;\n\n    private SharedPrefManager(Context context) {\n        mCtx = context;\n    }\n\n    public static synchronized SharedPrefManager getInstance(Context context) {\n        if (mInstance == null) {\n            mInstance = new SharedPrefManager(context);\n        }\n        return mInstance;\n    }\n\n    //method to let the user login\n    //this method will store the user data in shared preferences\n    public void userLogin(user user) {\n        SharedPreferences sharedPreferences = mCtx.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\n        SharedPreferences.Editor editor = sharedPreferences.edit();\n        editor.putInt(KEY_ID, user.getId());\n        editor.putString(KEY_USERNAME, user.getUsername());\n\n        editor.apply();\n    }\n\n    //this method will checker whether user is already logged in or not\n    public boolean isLoggedIn() {\n        SharedPreferences sharedPreferences = mCtx.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\n        return sharedPreferences.getString(KEY_USERNAME, null) != null;\n    }\n\n    //this method will give the logged in user\n    public user getUser() {\n        SharedPreferences sharedPreferences = mCtx.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\n        return new user(\n                sharedPreferences.getInt(KEY_ID, -1),\n                sharedPreferences.getString(KEY_USERNAME, null)\n\n        );\n    }\n\n    //this method will logout the user\n    public void logout() {\n        SharedPreferences sharedPreferences = mCtx.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\n        SharedPreferences.Editor editor = sharedPreferences.edit();\n        editor.clear();\n        editor.apply();\n        mCtx.startActivity(new Intent(mCtx, LoginActivity.class));\n    }\n}\n\n\n</code></pre>\n<p>this activity main</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;com.example.apbProject.MainActivity&quot;&gt;\n\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_centerVertical=&quot;true&quot;\n        android:orientation=&quot;vertical&quot;\n        android:padding=&quot;10dp&quot;&gt;\n\n\n        &lt;EditText\n            android:id=&quot;@+id/editTextUsername&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;50dp&quot;\n            android:layout_marginBottom=&quot;8dp&quot;\n            android:layout_marginTop=&quot;8dp&quot;\n            android:hint=&quot;Username&quot;\n            android:inputType=&quot;text&quot; /&gt;\n\n\n        &lt;EditText\n            android:id=&quot;@+id/editTextPassword&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;50dp&quot;\n            android:layout_marginBottom=&quot;8dp&quot;\n            android:layout_marginTop=&quot;8dp&quot;\n            android:fontFamily=&quot;sans-serif&quot;\n            android:hint=&quot;Password&quot;\n            android:inputType=&quot;textPassword&quot; /&gt;\n\n\n\n        &lt;Button\n            android:id=&quot;@+id/buttonRegister&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginBottom=&quot;8dp&quot;\n            android:layout_marginTop=&quot;8dp&quot;\n            android:text=&quot;Register&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textViewLogin&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginBottom=&quot;8dp&quot;\n            android:layout_marginTop=&quot;8dp&quot;\n            android:text=&quot;Already Registered?\\nLogin Here&quot;\n            android:textAlignment=&quot;center&quot;\n            android:textAppearance=&quot;@style/Base.TextAppearance.AppCompat.Medium&quot; /&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;ProgressBar\n        android:visibility=&quot;gone&quot;\n        android:id=&quot;@+id/progressBar&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_centerVertical=&quot;true&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>and this my mainactivity java</p>\n<pre class=\"lang-js prettyprint-override\"><code>package com.example.apbProject;\n\nimport android.content.Intent;\nimport android.os.AsyncTask;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.text.TextUtils;\nimport android.view.View;\nimport android.widget.EditText;\nimport android.widget.ProgressBar;\nimport android.widget.Toast;\n\nimport com.example.registeractivity.R;\n\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.util.HashMap;\n\npublic class MainActivity extends AppCompatActivity {\n    EditText editTextUsername, editTextEmail, editTextPassword;\n\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        //if the user is already logged in we will directly start the profile activity\n        if (SharedPrefManager.getInstance(this).isLoggedIn()) {\n            finish();\n            startActivity(new Intent(this, MonitoringActivity.class));\n            return;\n        }\n\n        editTextUsername = (EditText) findViewById(R.id.editTextUsername);\n        editTextPassword = (EditText) findViewById(R.id.editTextPassword);\n\n\n\n        findViewById(R.id.buttonRegister).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                //if user pressed on button register\n                //here we will register the user to server\n                registerUser();\n            }\n        });\n\n        findViewById(R.id.textViewLogin).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                //if user pressed on login\n                //we will open the login screen\n                finish();\n                startActivity(new Intent(MainActivity.this, LoginActivity.class));\n            }\n        });\n\n    }\n\n    private void registerUser() {\n        final String username = editTextUsername.getText().toString().trim();\n\n        final String password = editTextPassword.getText().toString().trim();\n\n\n\n        //first we will do the validations\n\n        if (TextUtils.isEmpty(username)) {\n            editTextUsername.setError(&quot;Please enter username&quot;);\n            editTextUsername.requestFocus();\n            return;\n        }\n\n\n\n\n\n        if (TextUtils.isEmpty(password)) {\n            editTextPassword.setError(&quot;Enter a password&quot;);\n            editTextPassword.requestFocus();\n            return;\n        }\n\n        //if it passes all the validations\n\n        class RegisterUser extends AsyncTask&lt;Void, Void, String&gt; {\n\n            private ProgressBar progressBar;\n\n            @Override\n            protected String doInBackground(Void... voids) {\n                //creating request handler object\n                RequestHandler requestHandler = new RequestHandler();\n\n                //creating request parameters\n                HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\n                params.put(&quot;username&quot;, username);\n                params.put(&quot;password&quot;, password);\n\n\n                //returing the response\n                return requestHandler.sendPostRequest(URLs.URL_REGISTER, params);\n            }\n\n            @Override\n            protected void onPreExecute() {\n                super.onPreExecute();\n                //displaying the progress bar while user registers on the server\n                progressBar = (ProgressBar) findViewById(R.id.progressBar);\n                progressBar.setVisibility(View.VISIBLE);\n            }\n\n            @Override\n            protected void onPostExecute(String s) {\n                super.onPostExecute(s);\n                //hiding the progressbar after completion\n                progressBar.setVisibility(View.GONE);\n\n                try {\n                    //converting response to json object\n\n                    JSONObject obj = new JSONObject(s);\n\n                    //if no error in response\n                    if (!obj.getBoolean(&quot;error&quot;)) {\n                        Toast.makeText(getApplicationContext(), obj.getString(&quot;message&quot;), Toast.LENGTH_SHORT).show();\n\n                        //getting the user from the response\n                        JSONObject userJson = obj.getJSONObject(&quot;user&quot;);\n\n                        //creating a new user object\n                      user user = new user(\n                                userJson.getInt(&quot;id&quot;),\n                                userJson.getString(&quot;username&quot;)\n\n                        );\n\n                        //storing the user in shared preferences\n                        SharedPrefManager.getInstance(getApplicationContext()).userLogin(user);\n\n                        //starting the profile activity\n                        finish();\n                        startActivity(new Intent(getApplicationContext(), LoginActivity.class));\n                    } else {\n                        Toast.makeText(getApplicationContext(), &quot;Some error occurred&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n\n        //executing the async task\n        RegisterUser ru = new RegisterUser();\n        ru.execute();\n    }\n\n}\n</code></pre>\n<p>and this is my Api.php</p>\n<pre><code>lang-php\n&lt;?php \n \n require_once 'DbConnect.php';\n \n $response = array();\n \n if(isset($_GET['apicall'])){\n \n switch($_GET['apicall']){\n \n case 'signup':\n if(isTheseParametersAvailable(array('username','password',))){\n $username = $_POST['username']; \n\n $password = $_POST['password'];\n\n \n $stmt = $conn-&gt;prepare(&quot;SELECT id FROM users WHERE username = ?&quot;);\n $stmt-&gt;bind_param(&quot;s&quot;, $username);\n $stmt-&gt;execute();\n $stmt-&gt;store_result();\n \n if($stmt-&gt;num_rows &gt; 0){\n $response['error'] = true;\n $response['message'] = 'User already registered';\n $stmt-&gt;close();\n }else{\n $stmt = $conn-&gt;prepare(&quot;INSERT INTO users (username, password) VALUES (?, ?)&quot;);\n $stmt-&gt;bind_param(&quot;ss&quot;, $username, $password);\n \n if($stmt-&gt;execute()){\n $stmt = $conn-&gt;prepare(&quot;SELECT id, id, username FROM users WHERE username = ?&quot;); \n $stmt-&gt;bind_param(&quot;s&quot;,$username);\n $stmt-&gt;execute();\n $stmt-&gt;bind_result($userid, $id, $username);\n $stmt-&gt;fetch();\n \n $user = array(\n 'id'=&gt;$id, \n 'username'=&gt;$username, \n \n );\n \n $stmt-&gt;close();\n \n $response['error'] = false; \n $response['message'] = 'User registered successfully'; \n $response['user'] = $user; \n }\n }\n \n }else{\n $response['error'] = true; \n $response['message'] = 'required parameters are not available'; \n }\n \n break; \n \n case 'login':\n \n if(isTheseParametersAvailable(array('username', 'password'))){\n \n $username = $_POST['username'];\n $password = md5($_POST['password']); \n \n $stmt = $conn-&gt;prepare(&quot;SELECT id, username FROM users WHERE username = ? AND password = ?&quot;);\n $stmt-&gt;bind_param(&quot;ssss&quot;,$username, $password);\n \n $stmt-&gt;execute();\n \n $stmt-&gt;store_result();\n \n if($stmt-&gt;num_rows &gt; 0){\n \n $stmt-&gt;bind_result($id, $username);\n $stmt-&gt;fetch();\n \n $user = array(\n 'id'=&gt;$id, \n 'username'=&gt;$username, \n \n );\n \n $response['error'] = false; \n $response['message'] = 'Login successfull'; \n $response['user'] = $user; \n }else{\n $response['error'] = false; \n $response['message'] = 'Invalid username or password';\n }\n }\n break; \n \n default: \n $response['error'] = true; \n $response['message'] = 'Invalid Operation Called';\n }\n \n }else{\n $response['error'] = true; \n $response['message'] = 'Invalid API Call';\n }\n \n echo json_encode($response);\n \n function isTheseParametersAvailable($params){\n \n foreach($params as $param){\n if(!isset($_POST[$param])){\n return false; \n }\n }\n return true; \n }\n ?&gt;\n</code></pre>\n<p>This my error message:</p>\n<p><a href=\"https://i.stack.imgur.com/GCymQ.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","windows","selenium-webdriver","path","jmeter"],"comments":[{"owner":{"account_id":4792116,"reputation":7079,"user_id":3871028,"display_name":"Ripi2"},"score":0,"creation_date":1689706788,"post_id":76715666,"comment_id":135250906,"body_markdown":"Did you mean &quot;/input[@id=.....&quot;? Notice just one &#39;/&#39;","body":"Did you mean &quot;/input[@id=.....&quot;? Notice just one &#39;/&#39;"}],"answers":[{"comments":[{"owner":{"account_id":26238404,"reputation":63,"user_id":19913135,"display_name":"Danila Sukhoparov"},"score":0,"creation_date":1689791282,"post_id":76716082,"comment_id":135265043,"body_markdown":"Second solution is exactly the same as I did in my question, and the first doesn&#39;t work. Selenium can see path clearly, but seems it doesn&#39;t understand that it is a path, but not just a string\n&#39;Response code:500\nResponse message:invalid argument: File not found : C:/Users/dsuhoparov/test.docx&#39;","body":"Second solution is exactly the same as I did in my question, and the first doesn&#39;t work. Selenium can see path clearly, but seems it doesn&#39;t understand that it is a path, but not just a string &#39;Response code:500 Response message:invalid argument: File not found : C:/Users/dsuhoparov/test.docx&#39;"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689710766,"creation_date":1689709539,"answer_id":76716082,"question_id":76715666,"body_markdown":"You can either use single forward slash i.e. `/`:\r\n\r\n    WDS.browser.findElement(org.openqa.selenium.By.xpath(&quot;//input[@id=&#39;versionFile&#39;]&quot;)).sendKeys(&quot;C:/Users/dsuhoparov/test.docx&quot;);\r\n\r\nor the escaped backward slash i.e. `\\\\`:\r\n\r\n    WDS.browser.findElement(org.openqa.selenium.By.xpath(&quot;//input[@id=&#39;versionFile&#39;]&quot;)).sendKeys(&quot;C:\\\\Users\\\\dsuhoparov\\\\test.docx&quot;);","title":"JMeter incorrectly interprets the slashes in windows file path","body":"<p>You can either use single forward slash i.e. <code>/</code>:</p>\n<pre><code>WDS.browser.findElement(org.openqa.selenium.By.xpath(&quot;//input[@id='versionFile']&quot;)).sendKeys(&quot;C:/Users/dsuhoparov/test.docx&quot;);\n</code></pre>\n<p>or the escaped backward slash i.e. <code>\\\\</code>:</p>\n<pre><code>WDS.browser.findElement(org.openqa.selenium.By.xpath(&quot;//input[@id='versionFile']&quot;)).sendKeys(&quot;C:\\\\Users\\\\dsuhoparov\\\\test.docx&quot;);\n</code></pre>\n"}],"owner":{"account_id":26238404,"reputation":63,"user_id":19913135,"display_name":"Danila Sukhoparov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76716082,"answer_count":1,"score":0,"last_activity_date":1689795027,"creation_date":1689705130,"question_id":76715666,"body_markdown":"I need to provide a file path to selenium in JMeter to upload file on page\r\n\r\nHowever if I write this:\r\n```\r\nWDS.browser.findElement(org.openqa.selenium.By.xpath(&quot;//input[@id=&#39;versionFile&#39;]&quot;)).sendKeys(&#39;C:\\\\Users\\\\dsuhoparov\\\\test.docx&#39;);`\r\n```\r\n\r\nselenium throws error:\r\n\r\n    Response code:500 Response message:invalid argument: File not found : C:Usersdsuhoparov\test.docx&quot;\r\n\r\nSo it seems java/JMeter has problems with slashes, could someone help?","title":"JMeter incorrectly interprets the slashes in windows file path","body":"<p>I need to provide a file path to selenium in JMeter to upload file on page</p>\n<p>However if I write this:</p>\n<pre><code>WDS.browser.findElement(org.openqa.selenium.By.xpath(&quot;//input[@id='versionFile']&quot;)).sendKeys('C:\\\\Users\\\\dsuhoparov\\\\test.docx');`\n</code></pre>\n<p>selenium throws error:</p>\n<pre><code>Response code:500 Response message:invalid argument: File not found : C:Usersdsuhoparov est.docx&quot;\n</code></pre>\n<p>So it seems java/JMeter has problems with slashes, could someone help?</p>\n"},{"tags":["java","eclipse","maven","pom.xml","toolchain"],"answers":[{"comments":[{"owner":{"account_id":14480734,"reputation":43,"user_id":10460036,"display_name":"komal "},"score":0,"creation_date":1538722158,"post_id":52659513,"comment_id":92249803,"body_markdown":"Same Error::Required toolchain: jdk [ vendor=&#39;sun&#39; version=&#39;1.8&#39; ]","body":"Same Error::Required toolchain: jdk [ vendor=&#39;sun&#39; version=&#39;1.8&#39; ]"},{"owner":{"account_id":12285714,"reputation":983,"user_id":8965245,"display_name":"Nawnit Sen"},"score":1,"creation_date":1538722448,"post_id":52659513,"comment_id":92249958,"body_markdown":"this error looks different can you add the complete error log?","body":"this error looks different can you add the complete error log?"},{"owner":{"account_id":12285714,"reputation":983,"user_id":8965245,"display_name":"Nawnit Sen"},"score":1,"creation_date":1538723261,"post_id":52659513,"comment_id":92250348,"body_markdown":"where did you put your toolchains.xml file? it should be in m2 folder if it is not you need to provide location with  &quot;--global-toolchains&quot;  or just move that file to m2 folder","body":"where did you put your toolchains.xml file? it should be in m2 folder if it is not you need to provide location with  &quot;--global-toolchains&quot;  or just move that file to m2 folder"},{"owner":{"account_id":14480734,"reputation":43,"user_id":10460036,"display_name":"komal "},"score":0,"creation_date":1538723643,"post_id":52659513,"comment_id":92250560,"body_markdown":"I have put toolchain.xml file in m2 folder only.","body":"I have put toolchain.xml file in m2 folder only."},{"owner":{"account_id":12285714,"reputation":983,"user_id":8965245,"display_name":"Nawnit Sen"},"score":0,"creation_date":1538724076,"post_id":52659513,"comment_id":92250807,"body_markdown":"is your filename  toolchains.xml ?cos looks like issue is it is not able to read  xml file.","body":"is your filename  toolchains.xml ?cos looks like issue is it is not able to read  xml file."},{"owner":{"account_id":14480734,"reputation":43,"user_id":10460036,"display_name":"komal "},"score":1,"creation_date":1538724413,"post_id":52659513,"comment_id":92251007,"body_markdown":"Hey Thanks for your help, by changing version to 1.8 i have run toolchain.xml on configurations by using command -t C:\\java_devenv\\.m2\\toolchains.xml clean install.","body":"Hey Thanks for your help, by changing version to 1.8 i have run toolchain.xml on configurations by using command -t C:\\java_devenv\\.m2\\toolchains.xml clean install."}],"tags":[],"owner":{"account_id":12285714,"reputation":983,"user_id":8965245,"display_name":"Nawnit Sen"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1564721253,"creation_date":1538720855,"answer_id":52659513,"question_id":52659327,"body_markdown":"change the version in pom to 1.8 instead of jdk1.8.0_172\r\n\r\n  \r\n\r\n                    &lt;configuration&gt;\r\n                        &lt;toolchains&gt;\r\n                            &lt;jdk&gt;\r\n                                &lt;version&gt;1.8&lt;/version&gt;\r\n                                &lt;vendor&gt;sun&lt;/vendor&gt;\r\n                            &lt;/jdk&gt;\r\n                        &lt;/toolchains&gt;\r\n                    &lt;/configuration&gt;","title":"Failed to Build Application Getting Error::No toolchain found for type jdk","body":"<p>change the version in pom to 1.8 instead of jdk1.8.0_172</p>\n\n<pre><code>                &lt;configuration&gt;\n                    &lt;toolchains&gt;\n                        &lt;jdk&gt;\n                            &lt;version&gt;1.8&lt;/version&gt;\n                            &lt;vendor&gt;sun&lt;/vendor&gt;\n                        &lt;/jdk&gt;\n                    &lt;/toolchains&gt;\n                &lt;/configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1386556,"reputation":7199,"user_id":1318479,"accept_rate":88,"display_name":"cb4"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650336227,"creation_date":1650336227,"answer_id":71919097,"question_id":52659327,"body_markdown":"Check your directory path carefully. The two comments about file location and testing with `maven --toolchains C:\\User\\zzz\\.m2\\toolchains.xml clean install` helped me see that my folder was &quot;m2&quot; and not &quot;.m2&quot;.","title":"Failed to Build Application Getting Error::No toolchain found for type jdk","body":"<p>Check your directory path carefully. The two comments about file location and testing with <code>maven --toolchains C:\\User\\zzz\\.m2\\toolchains.xml clean install</code> helped me see that my folder was &quot;m2&quot; and not &quot;.m2&quot;.</p>\n"},{"tags":[],"owner":{"account_id":17932155,"reputation":11,"user_id":13029312,"display_name":"spyrka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689794963,"creation_date":1689794963,"answer_id":76724644,"question_id":52659327,"body_markdown":"I know it might sound silly, but I had the same problem as here due to typo... Toolchain file name was not correct: used `toolchain.xml`, instead of `toolchains.xml`, so maven did not detect it automatically (using flag `--global-toolchains file` located it though).  ","title":"Failed to Build Application Getting Error::No toolchain found for type jdk","body":"<p>I know it might sound silly, but I had the same problem as here due to typo... Toolchain file name was not correct: used <code>toolchain.xml</code>, instead of <code>toolchains.xml</code>, so maven did not detect it automatically (using flag <code>--global-toolchains file</code> located it though).</p>\n"}],"owner":{"account_id":14480734,"reputation":43,"user_id":10460036,"display_name":"komal "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13722,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":52659513,"answer_count":3,"score":4,"last_activity_date":1689794963,"creation_date":1538719998,"question_id":52659327,"body_markdown":"I have tried different solution for this but didn&#39;t work for me, \r\n\r\nplease see the error log and `toolchain.xml` file.\r\n\r\nThese are error logs:    \r\n\r\n\r\n\r\n\r\n        \r\n    [INFO] --- maven-toolchains-plugin:1.1:toolchain (default) @ ad-api ---\r\n    [INFO] Required toolchain: jdk [ vendor=&#39;sun&#39; version=&#39;1.8&#39; ]\r\n    [ERROR] No toolchain found for type jdk\r\n    [ERROR] Cannot find matching toolchain definitions for the following toolchain types:\r\n    jdk [ vendor=&#39;sun&#39; version=&#39;1.8&#39; ]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 0.619 s\r\n    [INFO] Finished at: 2018-10-05T08:56:24+02:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-toolchains-plugin:1.1:toolchain (default) on project ad-api: Cannot find matching toolchain definitions for the following toolchain types:\r\n    [ERROR] jdk [ vendor=&#39;sun&#39; version=&#39;1.8&#39; ]\r\n    [ERROR] Please make sure you define the required toolchains in your ~/.m2/toolchains.xml file.\r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n\r\ngetting above error while i have updated version 1.8 to jdk1.8._172\r\n\r\n\r\n  \r\n\r\n\r\n\r\nbelow is my pom.xml\r\n\r\n\r\n\r\n  \r\n\r\n     &lt;plugins&gt;\r\n\r\n       &lt;plugin&gt;\r\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n       &lt;/plugin&gt;\r\n\r\n       &lt;plugin&gt;\r\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-toolchains-plugin&lt;/artifactId&gt;\r\n          &lt;executions&gt;\r\n             &lt;execution&gt;\r\n                &lt;goals&gt;\r\n                   &lt;goal&gt;toolchain&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n             &lt;/execution&gt;\r\n          &lt;/executions&gt;\r\n          &lt;configuration&gt;\r\n             &lt;toolchains&gt;\r\n                &lt;jdk&gt;\r\n                   &lt;version&gt;jdk1.8.0_172&lt;/version&gt;\r\n                   &lt;vendor&gt;sun&lt;/vendor&gt;\r\n                &lt;/jdk&gt;\r\n             &lt;/toolchains&gt;\r\n          &lt;/configuration&gt;\r\n       &lt;/plugin&gt;\r\n\r\n       &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n          &lt;configuration&gt;\r\n             &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n          &lt;/configuration&gt;\r\n       &lt;/plugin&gt;\r\n\r\n    &lt;/plugins&gt;\r\n\r\n\r\nand I have defined jdk path in `toolchain.xml` \r\n\r\n \r\n    &lt;toolchains&gt;\r\n        &lt;toolchain&gt;\r\n        &lt;type&gt;jdk&lt;/type&gt;\r\n        &lt;provides&gt;\r\n          &lt;version&gt;1.8&lt;/version&gt;\r\n          &lt;vendor&gt;sun&lt;/vendor&gt;\r\n        &lt;/provides&gt;\r\n        &lt;configuration&gt;\r\n          &lt;jdkHome&gt;C:\\Program Files\\Java\\jdk1.8.0_172&lt;/jdkHome&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/toolchain&gt;\r\n    &lt;/toolchains&gt;\r\n\r\nPlease help where to resolve the problem.\r\nThanks in advance.","title":"Failed to Build Application Getting Error::No toolchain found for type jdk","body":"<p>I have tried different solution for this but didn't work for me, </p>\n\n<p>please see the error log and <code>toolchain.xml</code> file.</p>\n\n<p>These are error logs:    </p>\n\n<pre><code>[INFO] --- maven-toolchains-plugin:1.1:toolchain (default) @ ad-api ---\n[INFO] Required toolchain: jdk [ vendor='sun' version='1.8' ]\n[ERROR] No toolchain found for type jdk\n[ERROR] Cannot find matching toolchain definitions for the following toolchain types:\njdk [ vendor='sun' version='1.8' ]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 0.619 s\n[INFO] Finished at: 2018-10-05T08:56:24+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-toolchains-plugin:1.1:toolchain (default) on project ad-api: Cannot find matching toolchain definitions for the following toolchain types:\n[ERROR] jdk [ vendor='sun' version='1.8' ]\n[ERROR] Please make sure you define the required toolchains in your ~/.m2/toolchains.xml file.\n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n</code></pre>\n\n<p>getting above error while i have updated version 1.8 to jdk1.8._172</p>\n\n<p>below is my pom.xml</p>\n\n<pre><code> &lt;plugins&gt;\n\n   &lt;plugin&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n   &lt;/plugin&gt;\n\n   &lt;plugin&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-toolchains-plugin&lt;/artifactId&gt;\n      &lt;executions&gt;\n         &lt;execution&gt;\n            &lt;goals&gt;\n               &lt;goal&gt;toolchain&lt;/goal&gt;\n            &lt;/goals&gt;\n         &lt;/execution&gt;\n      &lt;/executions&gt;\n      &lt;configuration&gt;\n         &lt;toolchains&gt;\n            &lt;jdk&gt;\n               &lt;version&gt;jdk1.8.0_172&lt;/version&gt;\n               &lt;vendor&gt;sun&lt;/vendor&gt;\n            &lt;/jdk&gt;\n         &lt;/toolchains&gt;\n      &lt;/configuration&gt;\n   &lt;/plugin&gt;\n\n   &lt;plugin&gt;\n      &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n      &lt;configuration&gt;\n         &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n      &lt;/configuration&gt;\n   &lt;/plugin&gt;\n\n&lt;/plugins&gt;\n</code></pre>\n\n<p>and I have defined jdk path in <code>toolchain.xml</code> </p>\n\n<pre><code>&lt;toolchains&gt;\n    &lt;toolchain&gt;\n    &lt;type&gt;jdk&lt;/type&gt;\n    &lt;provides&gt;\n      &lt;version&gt;1.8&lt;/version&gt;\n      &lt;vendor&gt;sun&lt;/vendor&gt;\n    &lt;/provides&gt;\n    &lt;configuration&gt;\n      &lt;jdkHome&gt;C:\\Program Files\\Java\\jdk1.8.0_172&lt;/jdkHome&gt;\n    &lt;/configuration&gt;\n  &lt;/toolchain&gt;\n&lt;/toolchains&gt;\n</code></pre>\n\n<p>Please help where to resolve the problem.\nThanks in advance.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":8823249,"reputation":1591,"user_id":6592293,"display_name":"Simon Tran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689794826,"creation_date":1689794826,"answer_id":76724628,"question_id":76707827,"body_markdown":"I figured out how to implement the activity detection. I opened a pull request: https://github.com/mbientlab/MetaWear-SDK-Android/pull/30","title":"MetaWear (Mbientlab) Android Activity detection on Bmi270","body":"<p>I figured out how to implement the activity detection. I opened a pull request: <a href=\"https://github.com/mbientlab/MetaWear-SDK-Android/pull/30\" rel=\"nofollow noreferrer\">https://github.com/mbientlab/MetaWear-SDK-Android/pull/30</a></p>\n"}],"owner":{"account_id":8823249,"reputation":1591,"user_id":6592293,"display_name":"Simon Tran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76724628,"answer_count":1,"score":0,"last_activity_date":1689794826,"creation_date":1689625122,"question_id":76707827,"body_markdown":"The [swift api](https://mbientlab.com/iosdocs/latest/accelerometer.html#activity-detector) supports the activity detector on the BMI270. I&#39;m trying to use that same feature with the Android SDK.\r\n\r\nI forked the MetaWear Android SDK to add the feature: https://gist.github.com/tran-simon/bf66dc4ce9724b11d3f2a5109cd3a31b\r\n\r\n`createMessage` never gets called. I tried to set every registers just like in the C++ code, but it still does not work? \r\n\r\nIs there anything I forgot to setup?","title":"MetaWear (Mbientlab) Android Activity detection on Bmi270","body":"<p>The <a href=\"https://mbientlab.com/iosdocs/latest/accelerometer.html#activity-detector\" rel=\"nofollow noreferrer\">swift api</a> supports the activity detector on the BMI270. I'm trying to use that same feature with the Android SDK.</p>\n<p>I forked the MetaWear Android SDK to add the feature: <a href=\"https://gist.github.com/tran-simon/bf66dc4ce9724b11d3f2a5109cd3a31b\" rel=\"nofollow noreferrer\">https://gist.github.com/tran-simon/bf66dc4ce9724b11d3f2a5109cd3a31b</a></p>\n<p><code>createMessage</code> never gets called. I tried to set every registers just like in the C++ code, but it still does not work?</p>\n<p>Is there anything I forgot to setup?</p>\n"},{"tags":["java","performance","java-stream"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1689792574,"post_id":76724354,"comment_id":135265308,"body_markdown":"Immutability doesn&#39;t seem relevant here; you&#39;re not updating every element, you&#39;re creating a new collection *(eventually)* of transformed input elements. (That&#39;s what map does.) One benefit of streams is avoiding intermediate state. There&#39;s not much benefit **here** because it&#39;s a single operation.","body":"Immutability doesn&#39;t seem relevant here; you&#39;re not updating every element, you&#39;re creating a new collection <i>(eventually)</i> of transformed input elements. (That&#39;s what map does.) One benefit of streams is avoiding intermediate state. There&#39;s not much benefit <b>here</b> because it&#39;s a single operation."}],"answers":[{"comments":[{"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"score":0,"creation_date":1689792834,"post_id":76724401,"comment_id":135265370,"body_markdown":"I know this. There is terminal operator in my snippet. I wonder what do we have under the map, where is updated values are stored? Initial collection is immutable. Looks like  stream creates a mutable copy of the collection or so.","body":"I know this. There is terminal operator in my snippet. I wonder what do we have under the map, where is updated values are stored? Initial collection is immutable. Looks like  stream creates a mutable copy of the collection or so."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689793438,"post_id":76724401,"comment_id":135265490,"body_markdown":"@oleg.cherednik I&#39;ve updated my answer to address the aspect of memory.","body":"@oleg.cherednik I&#39;ve updated my answer to address the aspect of memory."},{"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"score":0,"creation_date":1689793654,"post_id":76724401,"comment_id":135265537,"body_markdown":"Ok. Stream does not creates internal storage. But how does it compute it `on demand`, the initial collecitons is immutable, and in general case streams cannot predict the size of the final collection. This is my main point.","body":"Ok. Stream does not creates internal storage. But how does it compute it <code>on demand</code>, the initial collecitons is immutable, and in general case streams cannot predict the size of the final collection. This is my main point."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689793845,"post_id":76724401,"comment_id":135265579,"body_markdown":"@oleg.cherednik Generally intermediate methods like `map` and `filter` create new streams that produce changed values from the original source when iterated over. It only needs to store the operation to be applied, not the elements themselves.","body":"@oleg.cherednik Generally intermediate methods like <code>map</code> and <code>filter</code> create new streams that produce changed values from the original source when iterated over. It only needs to store the operation to be applied, not the elements themselves."},{"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"score":0,"creation_date":1689794488,"post_id":76724401,"comment_id":135265685,"body_markdown":"I see. There&#39;re no intermediate collections or so. Each intermediate function creates a new stream and on terminal operator each elements goes throught all streams.","body":"I see. There&#39;re no intermediate collections or so. Each intermediate function creates a new stream and on terminal operator each elements goes throught all streams."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1689794749,"post_id":76724401,"comment_id":135265738,"body_markdown":"@oleg.cherednik Note, however, that some operations _do_ keep intermediate state. That includes `sorted` and `distinct`, as those operations cannot work without remembering the elements that came before.","body":"@oleg.cherednik Note, however, that some operations <i>do</i> keep intermediate state. That includes <code>sorted</code> and <code>distinct</code>, as those operations cannot work without remembering the elements that came before."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":1,"creation_date":1689794783,"post_id":76724401,"comment_id":135265744,"body_markdown":"@oleg.cherednik Yes, I&#39;ve added an additional reference from the package documentation that states this.","body":"@oleg.cherednik Yes, I&#39;ve added an additional reference from the package documentation that states this."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689794838,"post_id":76724401,"comment_id":135265755,"body_markdown":"@Slaw Good point. I&#39;ve added that to the answer.","body":"@Slaw Good point. I&#39;ve added that to the answer."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":8,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689794816,"creation_date":1689792477,"answer_id":76724401,"question_id":76724354,"body_markdown":"No, streams generally do not need to store all elements in memory until a terminal operation that collects them. (There are exceptions to this like `.distinct()` and `.sorted()` that cannot work without keeping state.)\r\n\r\nSee [Processing Data with Java SE 8 Streams](https://www.oracle.com/technical-resources/articles/java/ma14-java-se-8-streams.html).\r\n\r\n&gt; A stream provides an interface to a sequenced set of values of a specific element type. However, streams dont actually store elements; they are computed on demand.\r\n\r\n&gt;  There are two static methods[`Stream.iterate`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#iterate(T,java.util.function.Predicate,java.util.function.UnaryOperator)) and [`Stream.generate`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#generate(java.util.function.Supplier))that let you create a stream from a function. However, because elements are calculated on demand, these two operations can produce elements forever. This is what we call an infinite stream: a stream that doesnt have a fixed size, as a stream does when we create it from a fixed collection.\r\n\r\nAnd the package documentation for [`java.util.stream`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#StreamOps):\r\n\r\n&gt; Intermediate operations return a new stream. They are always lazy; executing an intermediate operation such as filter() does not actually perform any filtering, but instead creates a new stream that, when traversed, contains the elements of the initial stream that match the given predicate. Traversal of the pipeline source does not begin until the terminal operation of the pipeline is executed.\r\n\r\n&gt; Intermediate operations are further divided into stateless and stateful operations. Stateless operations, such as filter and map, retain no state from previously seen element when processing a new element -- each element can be processed independently of operations on other elements. Stateful operations, such as distinct and sorted, may incorporate state from previously seen elements when processing new elements.","title":"How java stream works with immutable collections under the box","body":"<p>No, streams generally do not need to store all elements in memory until a terminal operation that collects them. (There are exceptions to this like <code>.distinct()</code> and <code>.sorted()</code> that cannot work without keeping state.)</p>\n<p>See <a href=\"https://www.oracle.com/technical-resources/articles/java/ma14-java-se-8-streams.html\" rel=\"nofollow noreferrer\">Processing Data with Java SE 8 Streams</a>.</p>\n<blockquote>\n<p>A stream provides an interface to a sequenced set of values of a specific element type. However, streams dont actually store elements; they are computed on demand.</p>\n</blockquote>\n<blockquote>\n<p>There are two static methods<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#iterate(T,java.util.function.Predicate,java.util.function.UnaryOperator)\" rel=\"nofollow noreferrer\"><code>Stream.iterate</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#generate(java.util.function.Supplier)\" rel=\"nofollow noreferrer\"><code>Stream.generate</code></a>that let you create a stream from a function. However, because elements are calculated on demand, these two operations can produce elements forever. This is what we call an infinite stream: a stream that doesnt have a fixed size, as a stream does when we create it from a fixed collection.</p>\n</blockquote>\n<p>And the package documentation for <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#StreamOps\" rel=\"nofollow noreferrer\"><code>java.util.stream</code></a>:</p>\n<blockquote>\n<p>Intermediate operations return a new stream. They are always lazy; executing an intermediate operation such as filter() does not actually perform any filtering, but instead creates a new stream that, when traversed, contains the elements of the initial stream that match the given predicate. Traversal of the pipeline source does not begin until the terminal operation of the pipeline is executed.</p>\n</blockquote>\n<blockquote>\n<p>Intermediate operations are further divided into stateless and stateful operations. Stateless operations, such as filter and map, retain no state from previously seen element when processing a new element -- each element can be processed independently of operations on other elements. Stateful operations, such as distinct and sorted, may incorporate state from previously seen elements when processing new elements.</p>\n</blockquote>\n"}],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689794816,"creation_date":1689792020,"question_id":76724354,"body_markdown":"Let&#39;s looka at the snippet:\r\n```java\r\nList&lt;Integer&gt; numbers = IntStream.range(0, 100_000_000)\r\n        .boxed().collect(Collectors.toList());\r\nList&lt;String&gt; res = numbers.stream()\r\n        .map(num -&gt; num / 2)    // create another update collection\r\n        .filter(num -&gt; num / 2 == 0)    // and another filtered collection\r\n        .map(String::valueOf)   // and another updated collection\r\n        .collect(Collectors.toList());\r\n```\r\n\r\nIn functional programming we operate with immutable objects only. So the big `numbers` collection is immutalbe.\r\n\r\nWhen we create a stream and do smth with this collections, e.g. update modify every element. I have showed one `map` lambda. Is it correct, that under the box, stream creates another big collection with updated values and under `collect()` it creates another big final collections? Or internal behaviour is different?\r\n\r\nWhat if I have e.g. 10 `map` lambdas and some `filter`. Is this mean that we have a new copy of the bit collection after each `map` or `filter`? Or, probably, stream creates mutable collection and update it every time?\r\n\r\nAnd in general, is this efficient (I mean from the recource point of view) to use streams for the big collections, or it&#39;s better to use plain old `for` operator?\r\n\r\n***P.S.** I am not talking about `parallel stream`, because in this snippet, I do not care about a time performance, but I care about a memory performance.*","title":"How java stream works with immutable collections under the box","body":"<p>Let's looka at the snippet:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; numbers = IntStream.range(0, 100_000_000)\n        .boxed().collect(Collectors.toList());\nList&lt;String&gt; res = numbers.stream()\n        .map(num -&gt; num / 2)    // create another update collection\n        .filter(num -&gt; num / 2 == 0)    // and another filtered collection\n        .map(String::valueOf)   // and another updated collection\n        .collect(Collectors.toList());\n</code></pre>\n<p>In functional programming we operate with immutable objects only. So the big <code>numbers</code> collection is immutalbe.</p>\n<p>When we create a stream and do smth with this collections, e.g. update modify every element. I have showed one <code>map</code> lambda. Is it correct, that under the box, stream creates another big collection with updated values and under <code>collect()</code> it creates another big final collections? Or internal behaviour is different?</p>\n<p>What if I have e.g. 10 <code>map</code> lambdas and some <code>filter</code>. Is this mean that we have a new copy of the bit collection after each <code>map</code> or <code>filter</code>? Or, probably, stream creates mutable collection and update it every time?</p>\n<p>And in general, is this efficient (I mean from the recource point of view) to use streams for the big collections, or it's better to use plain old <code>for</code> operator?</p>\n<p><em><strong>P.S.</strong> I am not talking about <code>parallel stream</code>, because in this snippet, I do not care about a time performance, but I care about a memory performance.</em></p>\n"},{"tags":["python","java","json","regex"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1689714938,"post_id":76716590,"comment_id":135252251,"body_markdown":"What does &quot;seems to work&quot; mean?  What does &quot;work&quot; mean, for that matter? If you have a JSON string, _parse it_, then update the now-native data structure based on what you need using all the APIs available in your programming language for working with its own data structures, and then if you need it turned back into JSON, do that.","body":"What does &quot;seems to work&quot; mean?  What does &quot;work&quot; mean, for that matter? If you have a JSON string, <i>parse it</i>, then update the now-native data structure based on what you need using all the APIs available in your programming language for working with its own data structures, and then if you need it turned back into JSON, do that."},{"owner":{"account_id":9882476,"reputation":4679,"user_id":7318120,"display_name":"D.L"},"score":0,"creation_date":1689715131,"post_id":76716590,"comment_id":135252275,"body_markdown":"it would help to show [1] where you are stuck and [2] what output you expect to achieve....    https://stackoverflow.com/help/how-to-ask","body":"it would help to show [1] where you are stuck and [2] what output you expect to achieve....    <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"},{"owner":{"account_id":5529755,"reputation":28257,"user_id":4390160,"accept_rate":100,"display_name":"Grismar"},"score":0,"creation_date":1689715219,"post_id":76716590,"comment_id":135252286,"body_markdown":"Python does not have an &quot;end of previous match&quot; meta-character (which is what `\\G` is for Java regexes). It would be helpful to know what exactly you need to parse with this, because it&#39;s quite possible there&#39;s a simpler or alternative regex that will do.","body":"Python does not have an &quot;end of previous match&quot; meta-character (which is what <code>\\G</code> is for Java regexes). It would be helpful to know what exactly you need to parse with this, because it&#39;s quite possible there&#39;s a simpler or alternative regex that will do."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1689717769,"post_id":76716590,"comment_id":135252571,"body_markdown":"Don&#39;t edit your post to say &quot;I will add all the details soon (eta 8h)&quot;. Just edit it when you&#39;re able to edit it. If it gets closed in the mean time, post a new question with all the actual details in it.","body":"Don&#39;t edit your post to say &quot;I will add all the details soon (eta 8h)&quot;. Just edit it when you&#39;re able to edit it. If it gets closed in the mean time, post a new question with all the actual details in it."},{"owner":{"account_id":268704,"reputation":2391,"user_id":15577665,"display_name":"sln"},"score":0,"creation_date":1689723817,"post_id":76716590,"comment_id":135253137,"body_markdown":"You&#39;ll have to settle for a call back solution as the `\\G` is only available in Pythons `import regex` module. Using `import re` the sub callback would replace all the commas in the string. I haven&#39;t checked your regex but it seems dubious anyway.","body":"You&#39;ll have to settle for a call back solution as the <code>\\G</code> is only available in Pythons <code>import regex</code> module. Using <code>import re</code> the sub callback would replace all the commas in the string. I haven&#39;t checked your regex but it seems dubious anyway."},{"owner":{"account_id":27974006,"reputation":10316,"user_id":21363224,"display_name":"markalex"},"score":0,"creation_date":1690043328,"post_id":76716590,"comment_id":135299279,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans, I would argue that last bit of your advice might result in question ban. It always better to edit your current question, and submit it to reopening process.","body":"@Mike&#39;Pomax&#39;Kamermans, I would argue that last bit of your advice might result in question ban. It always better to edit your current question, and submit it to reopening process."}],"answers":[{"comments":[{"owner":{"account_id":9685245,"reputation":9531,"user_id":7185318,"accept_rate":88,"display_name":"Luatic"},"score":1,"creation_date":1689780454,"post_id":76718452,"comment_id":135262763,"body_markdown":"This RegEx is not correct. The `(.+)` is too greedy, possibly consuming `&quot;`&#39;s. Test with a e.g. `&quot;body&quot;: &quot;a&quot;, &quot;morestuff&quot;: &quot;a,b,c&quot;, &quot;evenmore&quot;: &quot;test&quot;` - the match will be `&quot;body&quot;: &quot;a&quot;, &quot;morestuff&quot;: &quot;a,b,c&quot;,`.","body":"This RegEx is not correct. The <code>(.+)</code> is too greedy, possibly consuming <code>&quot;</code>&#39;s. Test with a e.g. <code>&quot;body&quot;: &quot;a&quot;, &quot;morestuff&quot;: &quot;a,b,c&quot;, &quot;evenmore&quot;: &quot;test&quot;</code> - the match will be <code>&quot;body&quot;: &quot;a&quot;, &quot;morestuff&quot;: &quot;a,b,c&quot;,</code>."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689790300,"post_id":76718452,"comment_id":135264845,"body_markdown":"@Luatic, write an answer.","body":"@Luatic, write an answer."},{"owner":{"account_id":9685245,"reputation":9531,"user_id":7185318,"accept_rate":88,"display_name":"Luatic"},"score":0,"creation_date":1689793130,"post_id":76718452,"comment_id":135265428,"body_markdown":"sure, see below.","body":"sure, see below."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":3,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1689747438,"creation_date":1689747438,"answer_id":76718452,"question_id":76716590,"body_markdown":"What you could do is first capture the data within the _body_ value, and then parse on the comma.\r\n\r\nThe pattern would be,\r\n\r\n```none\r\n\\&quot;body\\&quot;\\s*:\\s*\\&quot;(.+)\\&quot;,\r\n```\r\n\r\n&gt; _&quot;... I am very inexperienced with building my own regexes ...&quot;_\r\n\r\nIt&#39;s quite simple; it just seems complex.\r\n\r\nI recommend reading the _Wikipedia_ article, as it outlines the entire syntax.  \r\n_[Wikipedia &amp;ndash; Regular expression](https://en.wikipedia.org/wiki/Regular_expression)_.\r\n\r\nAdditionally there are several books; _[O&#39;Reilly Media](https://www.oreilly.com/)_ and _[Packt Publishing](https://www.packtpub.com/)_ both have some good ones.  \r\n_[O&#39;Reilly Media &amp;ndash; Mastering Regular Expressions](https://www.oreilly.com/library/view/mastering-regular-expressions/0596528124/)_.  \r\n_[Packt Publishing &amp;ndash; Mastering Python Regular Expressions](https://www.packtpub.com/product/mastering-python-regular-expressions/9781783283156)_.\r\n\r\nHere is an example in _Python_.  \r\nI&#39;m using the _[re.match](https://docs.python.org/3/library/re.html?#re.match)_ function to utilize the pattern.  \r\nAnd, the _[str.split](https://docs.python.org/3/library/stdtypes.html#str.split)_ function to generate a list of values.\r\n\r\n```python\r\nstring = &#39;&quot;body&quot;: &quot;abc, def, ghi&quot;,&#39;\r\nvalue = re.match(r&#39;\\&quot;body\\&quot;\\s*:\\s*\\&quot;(.+)\\&quot;,&#39;, string)\r\nvalue = value.group(1)\r\nstrings = value.split(&#39;, &#39;)\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[&#39;abc&#39;, &#39;def&#39;, &#39;ghi&#39;]\r\n```","title":"Regex translation to python acceptable format","body":"<p>What you could do is first capture the data within the <em>body</em> value, and then parse on the comma.</p>\n<p>The pattern would be,</p>\n<pre class=\"lang-none prettyprint-override\"><code>\\&quot;body\\&quot;\\s*:\\s*\\&quot;(.+)\\&quot;,\n</code></pre>\n<blockquote>\n<p><em>&quot;... I am very inexperienced with building my own regexes ...&quot;</em></p>\n</blockquote>\n<p>It's quite simple; it just seems complex.</p>\n<p>I recommend reading the <em>Wikipedia</em> article, as it outlines the entire syntax.<br />\n<em><a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">Wikipedia  Regular expression</a></em>.</p>\n<p>Additionally there are several books; <em><a href=\"https://www.oreilly.com/\" rel=\"nofollow noreferrer\">O'Reilly Media</a></em> and <em><a href=\"https://www.packtpub.com/\" rel=\"nofollow noreferrer\">Packt Publishing</a></em> both have some good ones.<br />\n<em><a href=\"https://www.oreilly.com/library/view/mastering-regular-expressions/0596528124/\" rel=\"nofollow noreferrer\">O'Reilly Media  Mastering Regular Expressions</a></em>.<br />\n<em><a href=\"https://www.packtpub.com/product/mastering-python-regular-expressions/9781783283156\" rel=\"nofollow noreferrer\">Packt Publishing  Mastering Python Regular Expressions</a></em>.</p>\n<p>Here is an example in <em>Python</em>.<br />\nI'm using the <em><a href=\"https://docs.python.org/3/library/re.html?#re.match\" rel=\"nofollow noreferrer\">re.match</a></em> function to utilize the pattern.<br />\nAnd, the <em><a href=\"https://docs.python.org/3/library/stdtypes.html#str.split\" rel=\"nofollow noreferrer\">str.split</a></em> function to generate a list of values.</p>\n<pre class=\"lang-py prettyprint-override\"><code>string = '&quot;body&quot;: &quot;abc, def, ghi&quot;,'\nvalue = re.match(r'\\&quot;body\\&quot;\\s*:\\s*\\&quot;(.+)\\&quot;,', string)\nvalue = value.group(1)\nstrings = value.split(', ')\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>['abc', 'def', 'ghi']\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9685245,"reputation":9531,"user_id":7185318,"accept_rate":88,"display_name":"Luatic"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689793819,"creation_date":1689793111,"answer_id":76724467,"question_id":76716590,"body_markdown":"### The proper solution\r\n\r\nUse the JSON module to parse the JSON, modify the resulting object, then stringify again:\r\n\r\n```python\r\nimport json\r\n\r\njson_str = &#39;{&quot;body&quot;: &quot;a, b&quot;, &quot;foo&quot;: &quot;bar&quot;, &quot;baz&quot;: &quot;foo&quot;}&#39;\r\njson_obj = json.loads(json_str)\r\ndef replace_commas_body(obj):\r\n    if type(obj) == list:\r\n        for elem in list:\r\n            replace_commas_body(elem)\r\n    elif type(obj) == dict:\r\n        if &quot;body&quot; in obj:\r\n            obj[&quot;body&quot;] = obj[&quot;body&quot;].replace(&quot;,&quot;, &quot;;&quot;)\r\n        for elem in obj.values():\r\n            replace_commas_body(elem)\r\nreplace_commas_body(json_obj)\r\nprint(json.dumps(json_obj))\r\n```\r\n\r\nThis prints `{&quot;body&quot;: &quot;a; b&quot;, &quot;foo&quot;: &quot;bar&quot;, &quot;baz&quot;: &quot;foo&quot;}` as expected.\r\n\r\n### The RegEx solution\r\n\r\nJust for the kicks of it, I also wrote a RegEx solution. This works fine because regular expressions suffice to tokenize JSON, and the changes required here can pretty much be done at a token level.\r\n\r\nThe (slim) advantage of this solution is that it preserves the &quot;style&quot; of the JSON (spacing, ordering of keys, number formatting used, characters escaped, etc.).\r\n\r\nThe disadvantage is that it is less readable / more difficult to maintain and much less flexible: It doesn&#39;t know the context. Changing this to e.g. apply only to certain objects which also have certain other keys or are inside certain other objects would not be possible.\r\n\r\nFor the sake of simplicity, I have decided to not handle Unicode escape sequences of the form `\\uXXXX` at all, although these ASCII codepoints may theoretically be encoded that way; typically it won&#39;t be, and it&#39;s trivial to fix the solution to handle them properly by using `(?:&lt;character&gt;|\\\\u&lt;ASCII code&gt;)` for each ASCII character within the string (the characters `b`, `o`, `d`, `y` and the comma).\r\n\r\nHere goes the RegEx: [`(\\&quot;body\\&quot;\\s*:\\s*\\&quot;)((?:[^\\&quot;\\\\]|\\\\.)*?)(\\&quot;)`](https://regex101.com/r/ZH9AKa/1)\r\n\r\nExplanation:\r\n\r\n * `(\\&quot;body\\&quot;\\s*:\\s*\\&quot;)`: Capture the `&quot;body&quot; : &quot;` part to preserve it; allow for arbitrary spacing, just like JSON.\r\n * `((?:[^\\&quot;\\\\]|\\\\.)*?)`: Capture the body of the string. Allow zero or more arbitrary characters except for backslashes or string quotes, which need to to be escaped.\r\n * `(\\&quot;)`: Preserve the closing quote of the string. We could have hardcoded this in the `lambda` just as well, but this is cleaner if you want(ed) to extend this in the future.\r\n\r\nand here&#39;s the corresponding Python, with a small test case:\r\n\r\n```python\r\nimport re\r\n\r\njson_str = &#39;{&quot;body&quot;: &quot;a, b&quot;, &quot;foo&quot;: &quot;bar&quot;, &quot;baz&quot;: &quot;foo&quot;}&#39;\r\nprint(re.sub(r&quot;(\\&quot;body\\&quot;\\s*:\\s*\\&quot;)((?:[^\\&quot;\\\\]|\\\\.)*?)(\\&quot;)&quot;,\r\n    lambda m: m.group(1) + m.group(2).replace(&quot;,&quot;, &quot;;&quot;) + m.group(3),\r\n    json_str))\r\n```\r\n\r\n---\r\n\r\nIn my examples, I&#39;m replacing commas (`,`) with semicolons (`;`). You link a question about *removing* commas but mention *replacing* commas (with what?) in your question so I was unsure.","title":"Regex translation to python acceptable format","body":"<h3>The proper solution</h3>\n<p>Use the JSON module to parse the JSON, modify the resulting object, then stringify again:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import json\n\njson_str = '{&quot;body&quot;: &quot;a, b&quot;, &quot;foo&quot;: &quot;bar&quot;, &quot;baz&quot;: &quot;foo&quot;}'\njson_obj = json.loads(json_str)\ndef replace_commas_body(obj):\n    if type(obj) == list:\n        for elem in list:\n            replace_commas_body(elem)\n    elif type(obj) == dict:\n        if &quot;body&quot; in obj:\n            obj[&quot;body&quot;] = obj[&quot;body&quot;].replace(&quot;,&quot;, &quot;;&quot;)\n        for elem in obj.values():\n            replace_commas_body(elem)\nreplace_commas_body(json_obj)\nprint(json.dumps(json_obj))\n</code></pre>\n<p>This prints <code>{&quot;body&quot;: &quot;a; b&quot;, &quot;foo&quot;: &quot;bar&quot;, &quot;baz&quot;: &quot;foo&quot;}</code> as expected.</p>\n<h3>The RegEx solution</h3>\n<p>Just for the kicks of it, I also wrote a RegEx solution. This works fine because regular expressions suffice to tokenize JSON, and the changes required here can pretty much be done at a token level.</p>\n<p>The (slim) advantage of this solution is that it preserves the &quot;style&quot; of the JSON (spacing, ordering of keys, number formatting used, characters escaped, etc.).</p>\n<p>The disadvantage is that it is less readable / more difficult to maintain and much less flexible: It doesn't know the context. Changing this to e.g. apply only to certain objects which also have certain other keys or are inside certain other objects would not be possible.</p>\n<p>For the sake of simplicity, I have decided to not handle Unicode escape sequences of the form <code>\\uXXXX</code> at all, although these ASCII codepoints may theoretically be encoded that way; typically it won't be, and it's trivial to fix the solution to handle them properly by using <code>(?:&lt;character&gt;|\\\\u&lt;ASCII code&gt;)</code> for each ASCII character within the string (the characters <code>b</code>, <code>o</code>, <code>d</code>, <code>y</code> and the comma).</p>\n<p>Here goes the RegEx: <a href=\"https://regex101.com/r/ZH9AKa/1\" rel=\"nofollow noreferrer\"><code>(\\&quot;body\\&quot;\\s*:\\s*\\&quot;)((?:[^\\&quot;\\\\]|\\\\.)*?)(\\&quot;)</code></a></p>\n<p>Explanation:</p>\n<ul>\n<li><code>(\\&quot;body\\&quot;\\s*:\\s*\\&quot;)</code>: Capture the <code>&quot;body&quot; : &quot;</code> part to preserve it; allow for arbitrary spacing, just like JSON.</li>\n<li><code>((?:[^\\&quot;\\\\]|\\\\.)*?)</code>: Capture the body of the string. Allow zero or more arbitrary characters except for backslashes or string quotes, which need to to be escaped.</li>\n<li><code>(\\&quot;)</code>: Preserve the closing quote of the string. We could have hardcoded this in the <code>lambda</code> just as well, but this is cleaner if you want(ed) to extend this in the future.</li>\n</ul>\n<p>and here's the corresponding Python, with a small test case:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\njson_str = '{&quot;body&quot;: &quot;a, b&quot;, &quot;foo&quot;: &quot;bar&quot;, &quot;baz&quot;: &quot;foo&quot;}'\nprint(re.sub(r&quot;(\\&quot;body\\&quot;\\s*:\\s*\\&quot;)((?:[^\\&quot;\\\\]|\\\\.)*?)(\\&quot;)&quot;,\n    lambda m: m.group(1) + m.group(2).replace(&quot;,&quot;, &quot;;&quot;) + m.group(3),\n    json_str))\n</code></pre>\n<hr />\n<p>In my examples, I'm replacing commas (<code>,</code>) with semicolons (<code>;</code>). You link a question about <em>removing</em> commas but mention <em>replacing</em> commas (with what?) in your question so I was unsure.</p>\n"}],"owner":{"account_id":26189758,"reputation":3,"user_id":19871784,"display_name":"ThePeres"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76724467,"answer_count":2,"score":0,"last_activity_date":1689793819,"creation_date":1689714703,"question_id":76716590,"body_markdown":"I&#39;ve found this regex that seems to work for Java but not python.\r\nfound it here: https://stackoverflow.com/questions/69831183/regex-remove-commas-within-quotes\r\n\r\n```py\r\nr&quot;&quot;&quot;(\\G(?!^)|\\&quot;body\\&quot;\\s*:\\s*\\&quot;)([^\\&quot;,]*),&quot;&quot;&quot;\r\n```\r\n\r\nI am very inexperienced with building my own regexes and need help translating it to python acceptable format. I know the \\G is the problem as it doesnt exist in python(?)\r\n\r\nI want to use it to replace commas in the &quot;body&quot; key in my JSON file but I get:\r\n\r\nbad escape \\G at position 1\r\n","title":"Regex translation to python acceptable format","body":"<p>I've found this regex that seems to work for Java but not python.\nfound it here: <a href=\"https://stackoverflow.com/questions/69831183/regex-remove-commas-within-quotes\">Regex: Remove Commas within quotes</a></p>\n<pre class=\"lang-py prettyprint-override\"><code>r&quot;&quot;&quot;(\\G(?!^)|\\&quot;body\\&quot;\\s*:\\s*\\&quot;)([^\\&quot;,]*),&quot;&quot;&quot;\n</code></pre>\n<p>I am very inexperienced with building my own regexes and need help translating it to python acceptable format. I know the \\G is the problem as it doesnt exist in python(?)</p>\n<p>I want to use it to replace commas in the &quot;body&quot; key in my JSON file but I get:</p>\n<p>bad escape \\G at position 1</p>\n"},{"tags":["java","spring","spring-data-rest"],"answers":[{"comments":[{"owner":{"account_id":1756589,"reputation":3204,"user_id":1604480,"accept_rate":50,"display_name":"Stackee007"},"score":0,"creation_date":1418232129,"post_id":26922717,"comment_id":43258675,"body_markdown":"1. I need to use Spring Mongo @Document 2. I need setters since the application code assigns values to these properties. They are readonly only to the client.","body":"1. I need to use Spring Mongo @Document 2. I need setters since the application code assigns values to these properties. They are readonly only to the client."}],"tags":[],"owner":{"account_id":354343,"reputation":4204,"user_id":692626,"accept_rate":14,"display_name":"dan carter"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415937885,"creation_date":1415937885,"answer_id":26922717,"question_id":25900194,"body_markdown":"Using spring-data-rest with spring-data-jpa, i have had success using jpa @Column(updatable = false).\r\n\r\nLooks like you&#39;re not using JPA (@Document), does your persistence framework have an annotation to indicate a read-only field?\r\n\r\nFurthermore, having a getter but not a setter could be part of the puzzle. In my case spring-data-jpa AuditingEntityListener sets the field, so i do not need a  setter in the application code.\r\n\r\n    import javax.persistence.Column;\r\n    import javax.persistence.MappedSuperclass;\r\n    \r\n    import org.joda.time.DateTime;\r\n    import org.springframework.data.annotation.CreatedBy;\r\n    import org.springframework.data.annotation.CreatedDate;\r\n    @MappedSuperclass\r\n    public abstract class AuditedEntity extends AuditedUpdateEntity {\r\n    \r\n        @CreatedDate\r\n        @Column(updatable = false)\r\n        private DateTime createdTs;\r\n    \r\n        @CreatedBy\r\n        @Column(updatable = false)\r\n        private String createdBy;\r\n    \r\n        public String getCreatedBy() {\r\n            return createdBy;\r\n        }\r\n    \r\n        public DateTime getCreatedTs() {\r\n            return createdTs;\r\n        }\r\n    \r\n    }","title":"Support for read-only properties in Spring Data REST","body":"<p>Using spring-data-rest with spring-data-jpa, i have had success using jpa @Column(updatable = false).</p>\n\n<p>Looks like you're not using JPA (@Document), does your persistence framework have an annotation to indicate a read-only field?</p>\n\n<p>Furthermore, having a getter but not a setter could be part of the puzzle. In my case spring-data-jpa AuditingEntityListener sets the field, so i do not need a  setter in the application code.</p>\n\n<pre><code>import javax.persistence.Column;\nimport javax.persistence.MappedSuperclass;\n\nimport org.joda.time.DateTime;\nimport org.springframework.data.annotation.CreatedBy;\nimport org.springframework.data.annotation.CreatedDate;\n@MappedSuperclass\npublic abstract class AuditedEntity extends AuditedUpdateEntity {\n\n    @CreatedDate\n    @Column(updatable = false)\n    private DateTime createdTs;\n\n    @CreatedBy\n    @Column(updatable = false)\n    private String createdBy;\n\n    public String getCreatedBy() {\n        return createdBy;\n    }\n\n    public DateTime getCreatedTs() {\n        return createdTs;\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1624999476,"post_id":30124086,"comment_id":120509435,"body_markdown":"I don&#39;t think this achieves the stated goals, as this completely prevents the property from being written.  However, what is being asked for is preventing the property from being written when sent from the REST API, but allowing the application to still set these properties programmatically.","body":"I don&#39;t think this achieves the stated goals, as this completely prevents the property from being written.  However, what is being asked for is preventing the property from being written when sent from the REST API, but allowing the application to still set these properties programmatically."}],"tags":[],"owner":{"account_id":1437483,"reputation":1908,"user_id":1358551,"display_name":"charybr"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1431088705,"creation_date":1431088705,"answer_id":30124086,"question_id":25900194,"body_markdown":"org.springframework.data.annotation.ReadOnlyProperty is added in spring-data-commons 1.9.0.\r\n\r\nThis serves the purpose. Please refer:\r\n\r\n - https://jira.spring.io/browse/DATACMNS-534\r\n - https://github.com/spring-projects/spring-data-commons/pull/88","title":"Support for read-only properties in Spring Data REST","body":"<p>org.springframework.data.annotation.ReadOnlyProperty is added in spring-data-commons 1.9.0.</p>\n\n<p>This serves the purpose. Please refer:</p>\n\n<ul>\n<li><a href=\"https://jira.spring.io/browse/DATACMNS-534\" rel=\"nofollow\">https://jira.spring.io/browse/DATACMNS-534</a></li>\n<li><a href=\"https://github.com/spring-projects/spring-data-commons/pull/88\" rel=\"nofollow\">https://github.com/spring-projects/spring-data-commons/pull/88</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":2531006,"reputation":101,"user_id":2199312,"display_name":"Johan Hendrik Ehlers"},"score":1,"creation_date":1695150911,"post_id":76724517,"comment_id":135984714,"body_markdown":"Works for me as I update the created by and modified by with one of the event listeners. Thanks, 1 upvote from me!","body":"Works for me as I update the created by and modified by with one of the event listeners. Thanks, 1 upvote from me!"}],"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689793593,"creation_date":1689793593,"answer_id":76724517,"question_id":25900194,"body_markdown":"The Jackson issue you linked to ([jackson-databind#95](https://github.com/FasterXML/jackson-databind/issues/95)) has since been implemented.  That feature allows using [`@JsonIgnoreProperties(allowGetters=true)`](http://fasterxml.github.io/jackson-annotations/javadoc/2.13/com/fasterxml/jackson/annotation/JsonIgnoreProperties.html#allowGetters--) to include the data when writing the JSON, but exclude it when reading it.\r\n\r\nThis feature alone isn&#39;t sufficient to get Spring Data REST to ignore properties, since it&#39;ll result in these properties always being `null` when updated.","title":"Support for read-only properties in Spring Data REST","body":"<p>The Jackson issue you linked to (<a href=\"https://github.com/FasterXML/jackson-databind/issues/95\" rel=\"nofollow noreferrer\">jackson-databind#95</a>) has since been implemented.  That feature allows using <a href=\"http://fasterxml.github.io/jackson-annotations/javadoc/2.13/com/fasterxml/jackson/annotation/JsonIgnoreProperties.html#allowGetters--\" rel=\"nofollow noreferrer\"><code>@JsonIgnoreProperties(allowGetters=true)</code></a> to include the data when writing the JSON, but exclude it when reading it.</p>\n<p>This feature alone isn't sufficient to get Spring Data REST to ignore properties, since it'll result in these properties always being <code>null</code> when updated.</p>\n"}],"owner":{"account_id":1756589,"reputation":3204,"user_id":1604480,"accept_rate":50,"display_name":"Stackee007"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4554,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":30124086,"answer_count":3,"score":4,"last_activity_date":1689793593,"creation_date":1410987323,"question_id":25900194,"body_markdown":"Our repository entities have audit/log properties like (`createdDate`, `updatedDate`...) that are assigned by the application and should be read-only properties to the user. A little bit of research on [Jackson showed this feature is not supported][1] (or is it?). Wondering if SDR could be of any help here?\r\n\r\n```lang-java\r\n@Document(collection=&quot;employees&quot;)\r\npublic class Employee {\r\n\r\n\t@Id\r\n\tprivate String id;\r\n    private firstName;\r\n\tprivate lastName;\r\n\t\r\n\t//read-only attribute. initially assigned by application and should not be changed\r\n\tprivate Date createdDate;\r\n\t\r\n\t//read-only attribute. initially assigned by application and should not be changed\r\n\tprivate Employee createdBy;\r\n\t\r\n\t//getters setters truncated....\r\n}\r\n```\r\n\r\n  [1]: https://github.com/FasterXML/jackson-databind/issues/95","title":"Support for read-only properties in Spring Data REST","body":"<p>Our repository entities have audit/log properties like (<code>createdDate</code>, <code>updatedDate</code>...) that are assigned by the application and should be read-only properties to the user. A little bit of research on <a href=\"https://github.com/FasterXML/jackson-databind/issues/95\" rel=\"nofollow noreferrer\">Jackson showed this feature is not supported</a> (or is it?). Wondering if SDR could be of any help here?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Document(collection=&quot;employees&quot;)\npublic class Employee {\n\n    @Id\n    private String id;\n    private firstName;\n    private lastName;\n    \n    //read-only attribute. initially assigned by application and should not be changed\n    private Date createdDate;\n    \n    //read-only attribute. initially assigned by application and should not be changed\n    private Employee createdBy;\n    \n    //getters setters truncated....\n}\n</code></pre>\n"},{"tags":["java","rx-java","micronaut","rx-java3"],"answers":[{"tags":[],"owner":{"account_id":13587537,"reputation":51,"user_id":9801831,"display_name":"J&#233;r&#233;my L."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689793410,"creation_date":1689793410,"answer_id":76724497,"question_id":64686530,"body_markdown":"You can define your own ExceptionHandler (&#167;6.17.4: https://docs.micronaut.io/latest/guide/#exceptionHandler) that handles \r\nHttpClientResponseException, see also Error Responses (&#167;7.3.6:  https://docs.micronaut.io/latest/guide/#lowLevelClientError)","title":"How to handle error when using @Client interface in Micronaut","body":"<p>You can define your own ExceptionHandler (6.17.4: <a href=\"https://docs.micronaut.io/latest/guide/#exceptionHandler\" rel=\"nofollow noreferrer\">https://docs.micronaut.io/latest/guide/#exceptionHandler</a>) that handles\nHttpClientResponseException, see also Error Responses (7.3.6:  <a href=\"https://docs.micronaut.io/latest/guide/#lowLevelClientError\" rel=\"nofollow noreferrer\">https://docs.micronaut.io/latest/guide/#lowLevelClientError</a>)</p>\n"}],"owner":{"account_id":317945,"reputation":233,"user_id":634904,"accept_rate":33,"display_name":"Ricardo Riveros"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689793410,"creation_date":1604518187,"question_id":64686530,"body_markdown":"new to Micronaut and am wondering how people are handling errors. The example in the documentation uses blocking which I do not want to use to handle errors. Basically, what i&#39;d like to do is be able to detect if error and if so, convert it to Errors class. If it can&#39;t convert to Errors class, let a global handler handle it. Does anyone have good sample code for my scenario? Below is my code. Thank you\r\n\r\n```\r\n@Client(value = &quot;${my.host}&quot;, errorType = Errors.class)\r\n@Header(name = &quot;ClientId&quot;, value = &quot;${clientId}&quot;)\r\n@JacksonFeatures(enabledDeserializationFeatures = UNWRAP_ROOT_VALUE,\r\n    disabledDeserializationFeatures = FAIL_ON_UNKNOWN_PROPERTIES)\r\npublic interface MyClient {\r\n\r\n    @Get(&quot;/myurl/{?queryParams*}&quot;)\r\n    public Single&lt;MyResult&gt; search(@Nullable @QueryValue Map&lt;String, Object&gt; queryParams);\r\n\r\n}\r\n```","title":"How to handle error when using @Client interface in Micronaut","body":"<p>new to Micronaut and am wondering how people are handling errors. The example in the documentation uses blocking which I do not want to use to handle errors. Basically, what i'd like to do is be able to detect if error and if so, convert it to Errors class. If it can't convert to Errors class, let a global handler handle it. Does anyone have good sample code for my scenario? Below is my code. Thank you</p>\n<pre><code>@Client(value = &quot;${my.host}&quot;, errorType = Errors.class)\n@Header(name = &quot;ClientId&quot;, value = &quot;${clientId}&quot;)\n@JacksonFeatures(enabledDeserializationFeatures = UNWRAP_ROOT_VALUE,\n    disabledDeserializationFeatures = FAIL_ON_UNKNOWN_PROPERTIES)\npublic interface MyClient {\n\n    @Get(&quot;/myurl/{?queryParams*}&quot;)\n    public Single&lt;MyResult&gt; search(@Nullable @QueryValue Map&lt;String, Object&gt; queryParams);\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-integration","spring-integration-dsl"],"answers":[{"comments":[{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1689687457,"post_id":76711822,"comment_id":135246754,"body_markdown":"That&#39;s correct. This is really has nothing to do with a `Future` failure. The retry advice is applied on a `process()` method, not the `Future` completion and so. In other words this `RetryOperationsInterceptor` is for blocking methods, not async. There is no async retry feature: you have to do it yourself on the returned `Future` or convert it into a Reactor `Mono` an do retry over there.","body":"That&#39;s correct. This is really has nothing to do with a <code>Future</code> failure. The retry advice is applied on a <code>process()</code> method, not the <code>Future</code> completion and so. In other words this <code>RetryOperationsInterceptor</code> is for blocking methods, not async. There is no async retry feature: you have to do it yourself on the returned <code>Future</code> or convert it into a Reactor <code>Mono</code> an do retry over there."},{"owner":{"account_id":218623,"reputation":445,"user_id":475044,"accept_rate":67,"display_name":"wcmatthysen"},"score":0,"creation_date":1689688487,"post_id":76711822,"comment_id":135246988,"body_markdown":"@ArtemBilan, ah, ok. Thanks. I&#39;ll do the retry in the ```Future``` then.","body":"@ArtemBilan, ah, ok. Thanks. I&#39;ll do the retry in the <code>Future</code> then."}],"tags":[],"owner":{"account_id":218623,"reputation":445,"user_id":475044,"accept_rate":67,"display_name":"wcmatthysen"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689791968,"creation_date":1689676116,"answer_id":76711822,"question_id":76708231,"body_markdown":"Ok, I think I got it working to an extent.\r\n\r\nI changed the ```MessageHandler``` to return a Spring ```ListenableFuture```:\r\n\r\n```\r\n@Component\r\npublic class MessageHandler {\r\n\r\n\tpublic ListenableFuture&lt;String&gt; process(Message&lt;String&gt; inputMessage) {\r\n\t\tString input = inputMessage.getPayload();\r\n\t\treturn new CompletableToListenableFutureAdapter&lt;&gt;(CompletableFuture.supplyAsync(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tSystem.out.println(&quot;Processing: &quot; + input);\r\n\t\t\t\tThread.sleep(1000); // Simulating a long-running task.\r\n\t\t\t\treturn input.toUpperCase();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\tthrow new CompletionException(e);\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n}\r\n```\r\n\r\nand I also had to change the configuration for the process-flow by specifying that the handler method is async:\r\n\r\n```\r\n@Bean\r\npublic IntegrationFlow processFlow(MessageHandler handler) {\r\n\treturn IntegrationFlows\r\n\t\t.from(processChannel())\r\n\t\t.bridge(e -&gt; e.poller(poller()))\r\n\t\t.handle(handler, &quot;process&quot;, e -&gt; e.async(true))\r\n\t\t.channel(responseChannel())\r\n\t\t.get();\r\n}\r\n```\r\n\r\nThe result of this is that the responses are correctly printed out in the handler that is defined in the ```responseFlow``` method.\r\n\r\nHowever, I still have an issue where if an exception occurs in the handler method&#39;s future then the retry-advice is ignored. Thus, if I specify a ```RetryOperationsInterceptor``` bean in the configuration and change the ```processFlow``` to use this interceptor as follows:\r\n\r\n```\r\n@Bean\r\npublic RetryOperationsInterceptor retryInterceptor() {\r\n\tMap&lt;Class&lt;? extends Throwable&gt;, Boolean&gt; retryableExceptions = new HashMap&lt;&gt;();\r\n\tretryableExceptions.put(MyCustomRetryableException.class, true);\r\n\treturn RetryInterceptorBuilder.stateless()\r\n\t\t.retryPolicy(new SimpleRetryPolicy(5, retryableExceptions, true))\r\n\t\t.backOffOptions(500, 2.0, 10000)\r\n\t\t.build();\r\n}\r\n\r\n@Bean\r\npublic IntegrationFlow processFlow(MessageHandler handler, RetryOperationsInterceptor retryInterceptor) {\r\n\treturn IntegrationFlows\r\n\t\t.from(processChannel())\r\n\t\t.bridge(e -&gt; e.poller(poller()))\r\n\t\t.handle(handler, &quot;process&quot;, e -&gt; e.advice(retryInterceptor).async(true))\r\n\t\t.channel(responseChannel())\r\n\t\t.get();\r\n}\r\n```\r\n\r\nand the ```MessageHandler``` is changed to:\r\n\r\n```\r\n@Component\r\npublic class MessageHandler {\r\n\r\n\tpublic ListenableFuture&lt;String&gt; process(Message&lt;String&gt; inputMessage) {\r\n\t\tString input = inputMessage.getPayload();\r\n\t\treturn new CompletableToListenableFutureAdapter&lt;&gt;(CompletableFuture.supplyAsync(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tSystem.out.println(&quot;Processing: &quot; + input);\r\n\t\t\t\tif (input.equals(&quot;Input:0&quot;)) {\r\n\t\t\t\t\tthrow new MyCustomRetryableException();\r\n\t\t\t\t}\r\n\t\t\t\tThread.sleep(1000); // Simulating a long-running task.\r\n\t\t\t\treturn input.toUpperCase();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\tthrow new CompletionException(e);\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n}\r\n```\r\n\r\nthen I can see from the output that the ```process``` method is not called multiple times for the input-string ```Input:0```. I only see the exception being printed out once.\r\n\r\n**Edit:** In case anyone stumbles across this and wants to know how to do the asynchronous retrying. According to @ArtemBilan (see the comments below) the ```RetryOperationsInterceptor``` will only work for blocking (or synchronous) handler methods. If you want to have your asynchronous handler methods retry on certain exceptions you can have a look at [this][1] post for some inspiration. I made use of [resilience4j][2] to get it to work. I basically had to add the following to my configuration class:\r\n\r\n```\r\n@Bean\r\npublic RetryConfig retryConfig() {\r\n\treturn RetryConfig.custom()\r\n\t\t.retryExceptions(MyCustomRetryableException.class)\r\n\t\t.maxAttempts(3)\r\n\t\t.build();\r\n}\r\n\r\n@Bean\r\npublic Retry handlerRetry() {\r\n\treturn Retry.of(&quot;handler-retry&quot;, retryConfig());\r\n}\r\n\r\n@Bean\r\npublic ScheduledExecutorService retryScheduler() {\r\n\treturn Executors.newScheduledThreadPool(10);\r\n}\r\n```\r\n\r\nand then I changed the ```MessageHandler``` to look like:\r\n\r\n```\r\n@Component\r\npublic class MessageHandler {\r\n\r\n\tprivate final Retry handlerRetry;\r\n\tprivate final ScheduledExecutorService retryScheduler;\r\n\r\n\tpublic MessageHandler(Retry handlerRetry, ScheduledExecutorService retryScheduler) {\r\n\t\tthis.handlerRetry = handlerRetry;\r\n\t\tthis.retryScheduler = retryScheduler;\r\n\t}\r\n\r\n\tpublic ListenableFuture&lt;String&gt; process(Message&lt;String&gt; inputMessage) {\r\n\t\tString input = inputMessage.getPayload();\r\n\t\tAtomicLong retryCounter = new AtomicLong(0L);\r\n\t\tCompletableFuture&lt;String&gt; retryingFuture = handlerRetry\r\n            .executeCompletionStage(retryScheduler, () -&gt; doWork(input, retryCounter))\r\n            .toCompletableFuture();\r\n\t\treturn new CompletableToListenableFutureAdapter&lt;&gt;(retryingFuture);\r\n\t}\r\n\r\n\tprivate CompletableFuture&lt;String&gt; doWork(String input, AtomicLong retryCounter) {\r\n\t\treturn CompletableFuture.supplyAsync(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tlong attempt = retryCounter.getAndIncrement();\r\n\t\t\t\tif (attempt == 0) {\r\n\t\t\t\t\tSystem.out.println(&quot;Processing: {}&quot;, input);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tSystem.out.println(&quot;Processing: {}, retry-attempt: {}&quot;, input, attempt);\r\n\t\t\t\t}\r\n\t\t\t\tif (input.equals(&quot;Input:0&quot;)) {\r\n\t\t\t\t\tthrow new MyCustomRetryableException();\r\n\t\t\t\t}\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\treturn input.toUpperCase();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\tthrow new CompletionException(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n```\r\n\r\nYou&#39;ll see that when you run the code it will retry the body of the future that the ```doWork()``` method returns for the case where the string is equal to ```Input:0```\r\n\r\n  [1]: https://stackoverflow.com/questions/40485398/retry-logic-with-completablefuture\r\n  [2]: https://github.com/resilience4j/resilience4j","title":"Spring Integration - Asynchronous handler method with retry functionality","body":"<p>Ok, I think I got it working to an extent.</p>\n<p>I changed the <code>MessageHandler</code> to return a Spring <code>ListenableFuture</code>:</p>\n<pre><code>@Component\npublic class MessageHandler {\n\n    public ListenableFuture&lt;String&gt; process(Message&lt;String&gt; inputMessage) {\n        String input = inputMessage.getPayload();\n        return new CompletableToListenableFutureAdapter&lt;&gt;(CompletableFuture.supplyAsync(() -&gt; {\n            try {\n                System.out.println(&quot;Processing: &quot; + input);\n                Thread.sleep(1000); // Simulating a long-running task.\n                return input.toUpperCase();\n            } catch (InterruptedException e) {\n                throw new CompletionException(e);\n            }\n        }));\n    }\n}\n</code></pre>\n<p>and I also had to change the configuration for the process-flow by specifying that the handler method is async:</p>\n<pre><code>@Bean\npublic IntegrationFlow processFlow(MessageHandler handler) {\n    return IntegrationFlows\n        .from(processChannel())\n        .bridge(e -&gt; e.poller(poller()))\n        .handle(handler, &quot;process&quot;, e -&gt; e.async(true))\n        .channel(responseChannel())\n        .get();\n}\n</code></pre>\n<p>The result of this is that the responses are correctly printed out in the handler that is defined in the <code>responseFlow</code> method.</p>\n<p>However, I still have an issue where if an exception occurs in the handler method's future then the retry-advice is ignored. Thus, if I specify a <code>RetryOperationsInterceptor</code> bean in the configuration and change the <code>processFlow</code> to use this interceptor as follows:</p>\n<pre><code>@Bean\npublic RetryOperationsInterceptor retryInterceptor() {\n    Map&lt;Class&lt;? extends Throwable&gt;, Boolean&gt; retryableExceptions = new HashMap&lt;&gt;();\n    retryableExceptions.put(MyCustomRetryableException.class, true);\n    return RetryInterceptorBuilder.stateless()\n        .retryPolicy(new SimpleRetryPolicy(5, retryableExceptions, true))\n        .backOffOptions(500, 2.0, 10000)\n        .build();\n}\n\n@Bean\npublic IntegrationFlow processFlow(MessageHandler handler, RetryOperationsInterceptor retryInterceptor) {\n    return IntegrationFlows\n        .from(processChannel())\n        .bridge(e -&gt; e.poller(poller()))\n        .handle(handler, &quot;process&quot;, e -&gt; e.advice(retryInterceptor).async(true))\n        .channel(responseChannel())\n        .get();\n}\n</code></pre>\n<p>and the <code>MessageHandler</code> is changed to:</p>\n<pre><code>@Component\npublic class MessageHandler {\n\n    public ListenableFuture&lt;String&gt; process(Message&lt;String&gt; inputMessage) {\n        String input = inputMessage.getPayload();\n        return new CompletableToListenableFutureAdapter&lt;&gt;(CompletableFuture.supplyAsync(() -&gt; {\n            try {\n                System.out.println(&quot;Processing: &quot; + input);\n                if (input.equals(&quot;Input:0&quot;)) {\n                    throw new MyCustomRetryableException();\n                }\n                Thread.sleep(1000); // Simulating a long-running task.\n                return input.toUpperCase();\n            } catch (InterruptedException e) {\n                throw new CompletionException(e);\n            }\n        }));\n    }\n}\n</code></pre>\n<p>then I can see from the output that the <code>process</code> method is not called multiple times for the input-string <code>Input:0</code>. I only see the exception being printed out once.</p>\n<p><strong>Edit:</strong> In case anyone stumbles across this and wants to know how to do the asynchronous retrying. According to @ArtemBilan (see the comments below) the <code>RetryOperationsInterceptor</code> will only work for blocking (or synchronous) handler methods. If you want to have your asynchronous handler methods retry on certain exceptions you can have a look at <a href=\"https://stackoverflow.com/questions/40485398/retry-logic-with-completablefuture\">this</a> post for some inspiration. I made use of <a href=\"https://github.com/resilience4j/resilience4j\" rel=\"nofollow noreferrer\">resilience4j</a> to get it to work. I basically had to add the following to my configuration class:</p>\n<pre><code>@Bean\npublic RetryConfig retryConfig() {\n    return RetryConfig.custom()\n        .retryExceptions(MyCustomRetryableException.class)\n        .maxAttempts(3)\n        .build();\n}\n\n@Bean\npublic Retry handlerRetry() {\n    return Retry.of(&quot;handler-retry&quot;, retryConfig());\n}\n\n@Bean\npublic ScheduledExecutorService retryScheduler() {\n    return Executors.newScheduledThreadPool(10);\n}\n</code></pre>\n<p>and then I changed the <code>MessageHandler</code> to look like:</p>\n<pre><code>@Component\npublic class MessageHandler {\n\n    private final Retry handlerRetry;\n    private final ScheduledExecutorService retryScheduler;\n\n    public MessageHandler(Retry handlerRetry, ScheduledExecutorService retryScheduler) {\n        this.handlerRetry = handlerRetry;\n        this.retryScheduler = retryScheduler;\n    }\n\n    public ListenableFuture&lt;String&gt; process(Message&lt;String&gt; inputMessage) {\n        String input = inputMessage.getPayload();\n        AtomicLong retryCounter = new AtomicLong(0L);\n        CompletableFuture&lt;String&gt; retryingFuture = handlerRetry\n            .executeCompletionStage(retryScheduler, () -&gt; doWork(input, retryCounter))\n            .toCompletableFuture();\n        return new CompletableToListenableFutureAdapter&lt;&gt;(retryingFuture);\n    }\n\n    private CompletableFuture&lt;String&gt; doWork(String input, AtomicLong retryCounter) {\n        return CompletableFuture.supplyAsync(() -&gt; {\n            try {\n                long attempt = retryCounter.getAndIncrement();\n                if (attempt == 0) {\n                    System.out.println(&quot;Processing: {}&quot;, input);\n                } else {\n                    System.out.println(&quot;Processing: {}, retry-attempt: {}&quot;, input, attempt);\n                }\n                if (input.equals(&quot;Input:0&quot;)) {\n                    throw new MyCustomRetryableException();\n                }\n                Thread.sleep(1000);\n                return input.toUpperCase();\n            } catch (InterruptedException e) {\n                throw new CompletionException(e);\n            }\n        });\n    }\n}\n</code></pre>\n<p>You'll see that when you run the code it will retry the body of the future that the <code>doWork()</code> method returns for the case where the string is equal to <code>Input:0</code></p>\n"}],"owner":{"account_id":218623,"reputation":445,"user_id":475044,"accept_rate":67,"display_name":"wcmatthysen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689793053,"creation_date":1689629870,"question_id":76708231,"body_markdown":"What is the correct way to define an asynchronous handler method when using Spring Integration flows?\r\n\r\nFor example, say I have the following configuration class:\r\n\r\n```\r\n@Configuration\r\npublic class TestConfiguration {\r\n\r\n\t@Bean\r\n\tpublic TaskExecutor taskExecutor() {\r\n\t\tThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\r\n\t\ttaskExecutor.setCorePoolSize(5);\r\n\t\ttaskExecutor.setMaxPoolSize(10);\r\n\t\ttaskExecutor.setThreadNamePrefix(&quot;task-thread-&quot;);\r\n\t\treturn taskExecutor;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic PollerSpec poller() {\r\n\t\treturn Pollers.fixedRate(100).taskExecutor(taskExecutor());\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic MessageBuilderFactory messageBuilderFactory() {\r\n\t\treturn new DefaultMessageBuilderFactory();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic TestMessageProducer testMessageProducer(MessageBuilderFactory messageBuilderFactory) {\r\n\t\treturn new TestMessageProducer(messageBuilderFactory);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic MessageChannel processChannel() {\r\n\t\treturn MessageChannels.queue(1000).get();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic MessageChannel responseChannel() {\r\n\t\treturn MessageChannels.direct().get();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic IntegrationFlow inputFlow() {\r\n\t\treturn IntegrationFlows\r\n\t\t\t.from(testMessageProducer(messageBuilderFactory()))\r\n\t\t\t.channel(processChannel())\r\n\t\t\t.get();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic IntegrationFlow processFlow(MessageHandler handler) {\r\n\t\treturn IntegrationFlows\r\n\t\t\t.from(processChannel())\r\n\t\t\t.bridge(e -&gt; e.poller(poller()))\r\n\t\t\t.handle(handler, &quot;process&quot;)\r\n\t\t\t.channel(responseChannel())\r\n\t\t\t.get();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic IntegrationFlow responseFlow() {\r\n\t\treturn IntegrationFlows\r\n\t\t\t.from(responseChannel())\r\n\t\t\t.handle(msg -&gt; {\r\n\t\t\t\tlog.info(&quot;Received response: {}&quot;, msg.getPayload());\r\n\t\t\t})\r\n\t\t\t.get();\r\n\t}\r\n}\r\n```\r\n\r\nwith a synchronous ```MessageHandler``` that looks like:\r\n\r\n```\r\n@Component\r\npublic class MessageHandler {\r\n\t\r\n\tpublic String process(String input) throws InterruptedException {\r\n\t\tThread.sleep(1000); // Simulating a long-running task.\r\n\t\tSystem.out.println(&quot;Processing: &quot; + input);\r\n\t\treturn input.toUpperCase();\r\n\t}\r\n}\r\n```\r\n\r\n\r\nIf I were to change the ```MessageHandler``` implementation to be asynchronous:\r\n\r\n```\r\n@Component\r\npublic class MessageHandler {\r\n\r\n\tpublic CompletableFuture&lt;String&gt; process(String input) {\r\n\t\treturn CompletableFuture.supplyAsync(() -&gt; {\r\n\t\t\ttry {\r\n                System.out.println(&quot;Processing: &quot; + input);\r\n\t\t\t\tThread.sleep(1000); // Simulating a long-running task.\r\n\t\t\t\treturn input.toUpperCase();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\tthrow new CompletionException(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n```\r\n\r\nthen I get the following output:\r\n\r\n```\r\n...\r\nReceived response: java.util.concurrent.CompletableFuture@4d191bf[Not completed]\r\n```\r\n\r\nI tried an alternative approach where I changed the ```MessageHandler``` to send messages back to the response-channel after it processed it:\r\n```\r\n@Component\r\npublic class MessageHandler {\r\n\r\n\tprivate final MessageChannel responseChannel;\r\n\r\n\tpublic MessageHandler(MessageChannel responseChannel) {\r\n\t\tthis.responseChannel = responseChannel;\r\n\t}\r\n\r\n\tpublic void process(Message&lt;String&gt; inputMessage) {\r\n\t\tString input = inputMessage.getPayload();\r\n\t\tCompletableFuture.runAsync(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tSystem.out.println(&quot;Processing: &quot; + input);\r\n\t\t\t\tThread.sleep(1000); // Simulating a long-running task.\r\n\t\t\t\tString result = input.toUpperCase();\r\n\t\t\t\tresponseChannel.send(MessageBuilder.createMessage(result, inputMessage.getHeaders()));\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\tthrow new CompletionException(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n```\r\n\r\nTo get this to work I needed to remove the ```channel(responseChannel())``` line from the ```processFlow()``` configuration method. However, I&#39;m not sure that this is the correct way to do it. I&#39;ve also noticed that if I use a ```RetryOperationsInterceptor``` for the handler&#39;s ```process``` method:\r\n\r\n```\r\n@Bean\r\npublic IntegrationFlow processFlow(MessageHandler handler, RetryOperationsInterceptor retryInterceptor) {\r\n\treturn IntegrationFlows\r\n\t\t.from(processChannel())\r\n\t\t.bridge(e -&gt; e.poller(poller()))\r\n\t\t.handle(handler, &quot;process&quot;, e -&gt; e.advice(retryInterceptor))\r\n\t\t.channel(responseChannel())\r\n\t\t.get();\r\n}\r\n```\r\n\r\nthen any exceptions that are thrown inside the future won&#39;t result in the ```process``` method getting retried.","title":"Spring Integration - Asynchronous handler method with retry functionality","body":"<p>What is the correct way to define an asynchronous handler method when using Spring Integration flows?</p>\n<p>For example, say I have the following configuration class:</p>\n<pre><code>@Configuration\npublic class TestConfiguration {\n\n    @Bean\n    public TaskExecutor taskExecutor() {\n        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\n        taskExecutor.setCorePoolSize(5);\n        taskExecutor.setMaxPoolSize(10);\n        taskExecutor.setThreadNamePrefix(&quot;task-thread-&quot;);\n        return taskExecutor;\n    }\n\n    @Bean\n    public PollerSpec poller() {\n        return Pollers.fixedRate(100).taskExecutor(taskExecutor());\n    }\n\n    @Bean\n    public MessageBuilderFactory messageBuilderFactory() {\n        return new DefaultMessageBuilderFactory();\n    }\n\n    @Bean\n    public TestMessageProducer testMessageProducer(MessageBuilderFactory messageBuilderFactory) {\n        return new TestMessageProducer(messageBuilderFactory);\n    }\n\n    @Bean\n    public MessageChannel processChannel() {\n        return MessageChannels.queue(1000).get();\n    }\n\n    @Bean\n    public MessageChannel responseChannel() {\n        return MessageChannels.direct().get();\n    }\n\n    @Bean\n    public IntegrationFlow inputFlow() {\n        return IntegrationFlows\n            .from(testMessageProducer(messageBuilderFactory()))\n            .channel(processChannel())\n            .get();\n    }\n\n    @Bean\n    public IntegrationFlow processFlow(MessageHandler handler) {\n        return IntegrationFlows\n            .from(processChannel())\n            .bridge(e -&gt; e.poller(poller()))\n            .handle(handler, &quot;process&quot;)\n            .channel(responseChannel())\n            .get();\n    }\n\n    @Bean\n    public IntegrationFlow responseFlow() {\n        return IntegrationFlows\n            .from(responseChannel())\n            .handle(msg -&gt; {\n                log.info(&quot;Received response: {}&quot;, msg.getPayload());\n            })\n            .get();\n    }\n}\n</code></pre>\n<p>with a synchronous <code>MessageHandler</code> that looks like:</p>\n<pre><code>@Component\npublic class MessageHandler {\n    \n    public String process(String input) throws InterruptedException {\n        Thread.sleep(1000); // Simulating a long-running task.\n        System.out.println(&quot;Processing: &quot; + input);\n        return input.toUpperCase();\n    }\n}\n</code></pre>\n<p>If I were to change the <code>MessageHandler</code> implementation to be asynchronous:</p>\n<pre><code>@Component\npublic class MessageHandler {\n\n    public CompletableFuture&lt;String&gt; process(String input) {\n        return CompletableFuture.supplyAsync(() -&gt; {\n            try {\n                System.out.println(&quot;Processing: &quot; + input);\n                Thread.sleep(1000); // Simulating a long-running task.\n                return input.toUpperCase();\n            } catch (InterruptedException e) {\n                throw new CompletionException(e);\n            }\n        });\n    }\n}\n</code></pre>\n<p>then I get the following output:</p>\n<pre><code>...\nReceived response: java.util.concurrent.CompletableFuture@4d191bf[Not completed]\n</code></pre>\n<p>I tried an alternative approach where I changed the <code>MessageHandler</code> to send messages back to the response-channel after it processed it:</p>\n<pre><code>@Component\npublic class MessageHandler {\n\n    private final MessageChannel responseChannel;\n\n    public MessageHandler(MessageChannel responseChannel) {\n        this.responseChannel = responseChannel;\n    }\n\n    public void process(Message&lt;String&gt; inputMessage) {\n        String input = inputMessage.getPayload();\n        CompletableFuture.runAsync(() -&gt; {\n            try {\n                System.out.println(&quot;Processing: &quot; + input);\n                Thread.sleep(1000); // Simulating a long-running task.\n                String result = input.toUpperCase();\n                responseChannel.send(MessageBuilder.createMessage(result, inputMessage.getHeaders()));\n            } catch (InterruptedException e) {\n                throw new CompletionException(e);\n            }\n        });\n    }\n}\n</code></pre>\n<p>To get this to work I needed to remove the <code>channel(responseChannel())</code> line from the <code>processFlow()</code> configuration method. However, I'm not sure that this is the correct way to do it. I've also noticed that if I use a <code>RetryOperationsInterceptor</code> for the handler's <code>process</code> method:</p>\n<pre><code>@Bean\npublic IntegrationFlow processFlow(MessageHandler handler, RetryOperationsInterceptor retryInterceptor) {\n    return IntegrationFlows\n        .from(processChannel())\n        .bridge(e -&gt; e.poller(poller()))\n        .handle(handler, &quot;process&quot;, e -&gt; e.advice(retryInterceptor))\n        .channel(responseChannel())\n        .get();\n}\n</code></pre>\n<p>then any exceptions that are thrown inside the future won't result in the <code>process</code> method getting retried.</p>\n"},{"tags":["java","ibm-mq"],"comments":[{"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"score":0,"creation_date":1689743648,"post_id":76718048,"comment_id":135254674,"body_markdown":"Do you want to use the standard IBM MQ JMS libraries instead of MQ Light libraries?","body":"Do you want to use the standard IBM MQ JMS libraries instead of MQ Light libraries?"},{"owner":{"account_id":7206986,"reputation":4285,"user_id":5502306,"display_name":"chughts"},"score":0,"creation_date":1689843150,"post_id":76718048,"comment_id":135271672,"body_markdown":"You can find some Java AMQP / QPID samples here - https://github.com/ibm-messaging/mq-dev-patterns/tree/master/amqp-qpid","body":"You can find some Java AMQP / QPID samples here - <a href=\"https://github.com/ibm-messaging/mq-dev-patterns/tree/master/amqp-qpid\" rel=\"nofollow noreferrer\">github.com/ibm-messaging/mq-dev-patterns/tree/master/amqp-qp&zwnj;&#8203;id</a>"}],"answers":[{"tags":[],"owner":{"account_id":1535582,"reputation":7172,"user_id":1431734,"display_name":"Roger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689792860,"creation_date":1689792860,"answer_id":76724437,"question_id":76718048,"body_markdown":"1. IBM MQ Light used the AMQP wire protocol. IBM v9.3 supports AMQP wire protocol. Therefore, you should be able to swing your application from using MQ Light to IBM MQ with minimal changes, if any.\r\n\r\n2. Do NOT pass Java objects around because it limits what types of applications can consume your messages. Put the information in either XML or JSON format and send that as an MQ message.\r\n\r\n3. Definitely keep the queue or topic open while consuming and/or publishing messages.\r\n","title":"Replacing IBM MQLight 1.0 with IBM MQ 9.3.3","body":"<ol>\n<li><p>IBM MQ Light used the AMQP wire protocol. IBM v9.3 supports AMQP wire protocol. Therefore, you should be able to swing your application from using MQ Light to IBM MQ with minimal changes, if any.</p>\n</li>\n<li><p>Do NOT pass Java objects around because it limits what types of applications can consume your messages. Put the information in either XML or JSON format and send that as an MQ message.</p>\n</li>\n<li><p>Definitely keep the queue or topic open while consuming and/or publishing messages.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":10409712,"reputation":63,"user_id":7675489,"display_name":"Randy Lashley"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76724437,"answer_count":1,"score":0,"last_activity_date":1689792860,"creation_date":1689741986,"question_id":76718048,"body_markdown":"I have a java program that currently sends and receives data from an old IBM MQ Light queue. I had a couple questions about setting up the newer libraries in place of the old MQlight ones.\r\n\r\nMy first was about the protocol. If I had a Java object previously that was just a couple strings, an int, and that was getting passed along using the MQLight protocol, how can I set it up the same way using IBM MQ? Do I need to create a JMS factory, or can it work by just creating a queue manager and casting the object to TextMessage or MQMessage and then pass that along to the topic via the queue?\r\n\r\nSecond, do I need to pretty much keep the send queue&#39;s open all the time if I&#39;m receiving and sending a lot of data? Or is it best practice to close them after each publish/subscribe at frequent intervals?\r\n\r\nThanks everyone","title":"Replacing IBM MQLight 1.0 with IBM MQ 9.3.3","body":"<p>I have a java program that currently sends and receives data from an old IBM MQ Light queue. I had a couple questions about setting up the newer libraries in place of the old MQlight ones.</p>\n<p>My first was about the protocol. If I had a Java object previously that was just a couple strings, an int, and that was getting passed along using the MQLight protocol, how can I set it up the same way using IBM MQ? Do I need to create a JMS factory, or can it work by just creating a queue manager and casting the object to TextMessage or MQMessage and then pass that along to the topic via the queue?</p>\n<p>Second, do I need to pretty much keep the send queue's open all the time if I'm receiving and sending a lot of data? Or is it best practice to close them after each publish/subscribe at frequent intervals?</p>\n<p>Thanks everyone</p>\n"},{"tags":["java","casting","compiler-errors"],"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":2,"creation_date":1624728880,"post_id":68143968,"comment_id":120439670,"body_markdown":"As an aside, setting static fields each time a new instance is created (in the constructor) means that each new instance will overwrite the fields used by the previous instance.  To fix this, the fields and `solve` method should be made non-static.  Then all operations would be made on the instance, rather than the static methods: `DFTList obj = new DFTList(nodes); ... obj.list[v1].add(v2); obj.list[v2].add(v1); ... obj.solve(0);`.","body":"As an aside, setting static fields each time a new instance is created (in the constructor) means that each new instance will overwrite the fields used by the previous instance.  To fix this, the fields and <code>solve</code> method should be made non-static.  Then all operations would be made on the instance, rather than the static methods: <code>DFTList obj = new DFTList(nodes); ... obj.list[v1].add(v2); obj.list[v2].add(v1); ... obj.solve(0);</code>."}],"answers":[{"comments":[{"owner":{"account_id":22059668,"reputation":33,"user_id":16322576,"display_name":"Kavin_V"},"score":0,"creation_date":1624726608,"post_id":68144047,"comment_id":120439127,"body_markdown":"Sorry brother, mistake is mine, I have included (*) to highlight and didn&#39;t realize the counter part that people might think it is a pointer. Now, I edited the post.","body":"Sorry brother, mistake is mine, I have included (*) to highlight and didn&#39;t realize the counter part that people might think it is a pointer. Now, I edited the post."}],"tags":[],"owner":{"account_id":11403359,"reputation":1479,"user_id":8359623,"display_name":"Papai from BEKOAIL"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624722925,"creation_date":1624722925,"answer_id":68144047,"question_id":68143968,"body_markdown":"you are mixing C++ with Java!! \r\n\r\ncheck the following reproducable code: \r\n\r\n        public class DFTList {\r\n        static List&lt;Integer&gt;[]   list;\r\n        static boolean[] visited;\r\n        \r\n    \tpublic DFTList(int nodes) {\r\n            list = new ArrayList[nodes];\r\n            visited = new boolean[nodes];\r\n            for(int i=0;i&lt;nodes;i++) {\r\n               list[i] = new ArrayList&lt;&gt;();\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Scanner scan = new Scanner(System.in);\r\n            System.out.println(&quot;Enter no. of nodes : &quot;);\r\n            int nodes = scan.nextInt();\r\n            DFTList obj = new DFTList(nodes);\r\n            System.out.println(&quot;Enter no.of vertex : &quot;);\r\n            int vertex = scan.nextInt();\r\n            \r\n            \r\n            for(int i=0;i&lt;vertex;i++) {\r\n                int v1 = scan.nextInt();\r\n                int v2 = scan.nextInt();\r\n                list[v1].add(v2);\r\n                list[v2].add(v1);\r\n            }\r\n            \r\n            solve(0);\r\n        }\r\n        \r\n        public static void solve(int a) {\r\n            visited[a] = true;\r\n            List&lt;Integer&gt; l = list[a];\r\n        }    \r\n    }\r\n\r\n## Note 0 ##\r\nthere is no `pointer` like concept in java therefore following snippet gives you compile time error:\r\n\r\n     * list[i] = new ArrayList&lt;&gt;();\r\n\r\n## Note 1 ##\r\n  you are assigning `List` interface to `l` type therefore use below syntax.\r\n\r\n       List&lt;Integer&gt; l = list[a];","title":"Error : Type mismatch: cannot convert from List&lt;Integer&gt; to ArrayList&lt;Integer&gt;","body":"<p>you are mixing C++ with Java!!</p>\n<p>check the following reproducable code:</p>\n<pre><code>    public class DFTList {\n    static List&lt;Integer&gt;[]   list;\n    static boolean[] visited;\n    \n    public DFTList(int nodes) {\n        list = new ArrayList[nodes];\n        visited = new boolean[nodes];\n        for(int i=0;i&lt;nodes;i++) {\n           list[i] = new ArrayList&lt;&gt;();\n        }\n    }\n\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        System.out.println(&quot;Enter no. of nodes : &quot;);\n        int nodes = scan.nextInt();\n        DFTList obj = new DFTList(nodes);\n        System.out.println(&quot;Enter no.of vertex : &quot;);\n        int vertex = scan.nextInt();\n        \n        \n        for(int i=0;i&lt;vertex;i++) {\n            int v1 = scan.nextInt();\n            int v2 = scan.nextInt();\n            list[v1].add(v2);\n            list[v2].add(v1);\n        }\n        \n        solve(0);\n    }\n    \n    public static void solve(int a) {\n        visited[a] = true;\n        List&lt;Integer&gt; l = list[a];\n    }    \n}\n</code></pre>\n<h2>Note 0</h2>\n<p>there is no <code>pointer</code> like concept in java therefore following snippet gives you compile time error:</p>\n<pre><code> * list[i] = new ArrayList&lt;&gt;();\n</code></pre>\n<h2>Note 1</h2>\n<p>you are assigning <code>List</code> interface to <code>l</code> type therefore use below syntax.</p>\n<pre><code>   List&lt;Integer&gt; l = list[a];\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22059668,"reputation":33,"user_id":16322576,"display_name":"Kavin_V"},"score":0,"creation_date":1624726865,"post_id":68144090,"comment_id":120439179,"body_markdown":"(read: an array of Lists of Integers) it is right, but List is just an interface actual implementations done in  ArrayList/LinkedList, right! so why can&#39;t I use ArrayList&lt;Integer&gt; l = list[a]; I&#39;m still confused, If possible give some extra explanations/Examples. And thanks for your answer!!","body":"(read: an array of Lists of Integers) it is right, but List is just an interface actual implementations done in  ArrayList/LinkedList, right! so why can&#39;t I use ArrayList&lt;Integer&gt; l = list[a]; I&#39;m still confused, If possible give some extra explanations/Examples. And thanks for your answer!!"}],"tags":[],"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624723294,"creation_date":1624723294,"answer_id":68144090,"question_id":68143968,"body_markdown":"`list` is declared as a `List&lt;Integer&gt;[]` (read: an array of Lists of Integers). The fact that the value in each element is actually an `ArrayList` is inconsequential - as far as the compiler is concerned, every element is a `List`.\r\n\r\nYou could either explicitly downcast the array access:\r\n\r\n```\r\nArrayList&lt;Integer&gt; l = (ArrayList&lt;Integer&gt;)list[a];\r\n```\r\n\r\nOr, more idiomatically, if you aren&#39;t relying on any specific method `ArrayList` has that isn&#39;t present in the `List` interface, you could declare `l` as a `List&lt;Integer&gt;`:\r\n\r\n```\r\nList&lt;Integer&gt; l = list[a];\r\n```","title":"Error : Type mismatch: cannot convert from List&lt;Integer&gt; to ArrayList&lt;Integer&gt;","body":"<p><code>list</code> is declared as a <code>List&lt;Integer&gt;[]</code> (read: an array of Lists of Integers). The fact that the value in each element is actually an <code>ArrayList</code> is inconsequential - as far as the compiler is concerned, every element is a <code>List</code>.</p>\n<p>You could either explicitly downcast the array access:</p>\n<pre><code>ArrayList&lt;Integer&gt; l = (ArrayList&lt;Integer&gt;)list[a];\n</code></pre>\n<p>Or, more idiomatically, if you aren't relying on any specific method <code>ArrayList</code> has that isn't present in the <code>List</code> interface, you could declare <code>l</code> as a <code>List&lt;Integer&gt;</code>:</p>\n<pre><code>List&lt;Integer&gt; l = list[a];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689792830,"creation_date":1624728619,"answer_id":68144816,"question_id":68143968,"body_markdown":"The `list` variable is a `List&lt;Integer&gt;[]`, which means that any type of `List` (`ArrayList`, `LinkedList`, etc.) could be stored in it.  When retrieving an element from this list, all the Java compiler knows is that it&#39;s some type of `List`; it doesn&#39;t know the specific type of `List` (even though you as the programmer know that you&#39;re only storing `ArrayList` items in the array).  Therefore, `ArrayList&lt;Integer&gt; l = list[a]` is a compilation failure because the compiler can&#39;t guarantee that the element retrieved from the array is an `ArrayList` and not a different `List` type.\r\n\r\nThere are a few ways to address this issue.  Assuming you wanted to keep `list` as an array, the most idiomatic approach would be to change its type to `List&lt;Integer&gt;[]` instead of `ArrayList&lt;Integer&gt;[]`.  Since you are not using any methods or other API specific to `ArrayList`, the `List` interface is a better choice for this type.\r\n\r\n```lang-java\r\n    public static void solve(int a) {\r\n        visited[a] = true;\r\n        List&lt;Integer&gt; l = list[a];\r\n    }\r\n```\r\n\r\nAnother, less idiomatic approach would be to change the type of the `list` variable from `List&lt;Integer&gt;[]` to `ArrayList&lt;Integer&gt;[]`.  This change would cause your variable assignment to work as already written.\r\n\r\n```lang-java\r\npublic class DFTList {\r\n    static ArrayList&lt;Integer&gt;[] list;\r\n    ...\r\n}\r\n```\r\n\r\nThe final approach you could use when you have an array of the interface type (`List&lt;Integer&gt;` in this case) would be to cast the element to the concrete type when assigning it to the variable.  This is basically telling the compiler that you as the developer know the element is of that subtype, so even though it cannot guarantee the assignment, it will allow it to happen.  This approach defers the type checking  ensuring the `List` is the `ArrayList` subtype  until the code is actually run (at runtime).  If the stored element is a subtype other than `ArrayList` when the code is run (e.g. if it&#39;s a `LinkedList`), then Java will throw a [ClassCastException](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ClassCastException.html) since the assignment to `ArrayList` cannot happen.\r\n\r\nCasting like this is not ideal, as it removes guarantees by the compiler that all types being used are guaranteed to be valid at runtime.  However, there are times where it is necessary and appropriate. \r\n\r\n```lang-java\r\n    public static void solve(int a) {\r\n        visited[a] = true;\r\n        ArrayList&lt;Integer&gt; l = (ArrayList&lt;Integer&gt;) list[a];\r\n    }\r\n```","title":"Error : Type mismatch: cannot convert from List&lt;Integer&gt; to ArrayList&lt;Integer&gt;","body":"<p>The <code>list</code> variable is a <code>List&lt;Integer&gt;[]</code>, which means that any type of <code>List</code> (<code>ArrayList</code>, <code>LinkedList</code>, etc.) could be stored in it.  When retrieving an element from this list, all the Java compiler knows is that it's some type of <code>List</code>; it doesn't know the specific type of <code>List</code> (even though you as the programmer know that you're only storing <code>ArrayList</code> items in the array).  Therefore, <code>ArrayList&lt;Integer&gt; l = list[a]</code> is a compilation failure because the compiler can't guarantee that the element retrieved from the array is an <code>ArrayList</code> and not a different <code>List</code> type.</p>\n<p>There are a few ways to address this issue.  Assuming you wanted to keep <code>list</code> as an array, the most idiomatic approach would be to change its type to <code>List&lt;Integer&gt;[]</code> instead of <code>ArrayList&lt;Integer&gt;[]</code>.  Since you are not using any methods or other API specific to <code>ArrayList</code>, the <code>List</code> interface is a better choice for this type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void solve(int a) {\n        visited[a] = true;\n        List&lt;Integer&gt; l = list[a];\n    }\n</code></pre>\n<p>Another, less idiomatic approach would be to change the type of the <code>list</code> variable from <code>List&lt;Integer&gt;[]</code> to <code>ArrayList&lt;Integer&gt;[]</code>.  This change would cause your variable assignment to work as already written.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DFTList {\n    static ArrayList&lt;Integer&gt;[] list;\n    ...\n}\n</code></pre>\n<p>The final approach you could use when you have an array of the interface type (<code>List&lt;Integer&gt;</code> in this case) would be to cast the element to the concrete type when assigning it to the variable.  This is basically telling the compiler that you as the developer know the element is of that subtype, so even though it cannot guarantee the assignment, it will allow it to happen.  This approach defers the type checking  ensuring the <code>List</code> is the <code>ArrayList</code> subtype  until the code is actually run (at runtime).  If the stored element is a subtype other than <code>ArrayList</code> when the code is run (e.g. if it's a <code>LinkedList</code>), then Java will throw a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ClassCastException.html\" rel=\"nofollow noreferrer\">ClassCastException</a> since the assignment to <code>ArrayList</code> cannot happen.</p>\n<p>Casting like this is not ideal, as it removes guarantees by the compiler that all types being used are guaranteed to be valid at runtime.  However, there are times where it is necessary and appropriate.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void solve(int a) {\n        visited[a] = true;\n        ArrayList&lt;Integer&gt; l = (ArrayList&lt;Integer&gt;) list[a];\n    }\n</code></pre>\n"}],"owner":{"account_id":22059668,"reputation":33,"user_id":16322576,"display_name":"Kavin_V"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4527,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":68144816,"answer_count":3,"score":2,"last_activity_date":1689792830,"creation_date":1624722324,"question_id":68143968,"body_markdown":"```lang-java\r\npackage set01;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\n\r\npublic class DFTList {\r\n\tstatic List&lt;Integer&gt;[] \t list;\r\n\tstatic boolean[] visited;\r\n\t\r\n\tpublic DFTList(int nodes) {\r\n\t\tlist = new ArrayList[nodes];\r\n\t\tvisited = new boolean[nodes];\r\n\t\tfor(int i=0;i&lt;nodes;i++) {\r\n\t \t   list[i] = new ArrayList&lt;&gt;();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner scan = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Enter no. of nodes : &quot;);\r\n\t\tint nodes = scan.nextInt();\r\n\t\tDFTList obj = new DFTList(nodes);\r\n\t\tSystem.out.println(&quot;Enter no.of vertex : &quot;);\r\n\t\tint vertex = scan.nextInt();\r\n\t\t\r\n\t\t\r\n\t\tfor(int i=0;i&lt;vertex;i++) {\r\n\t\t\tint v1 = scan.nextInt();\r\n\t\t\tint v2 = scan.nextInt();\r\n\t\t\tlist[v1].add(v2);\r\n\t\t\tlist[v2].add(v1);\r\n\t\t}\r\n\t\t\r\n\t\tsolve(0);\r\n\t}\r\n\t\r\n\tpublic static void solve(int a) {\r\n\t\tvisited[a] = true;\r\n\t    ArrayList&lt;Integer&gt; l = list[a];\r\n\t}\r\n\r\n}\r\n```\r\n\r\nIn the above code snippet, At the `DFTList` constructor, I have inserted `ArrayList` object at all the indices of the array. But when I try to retrieve the same object at the **`solve` method** and store it under the **same reference**, I encountered an error stating that &quot;Type mismatch: cannot convert from List&lt;Integer&gt; to ArrayList&lt;Integer&gt;&quot;. Why does this error occur?","title":"Error : Type mismatch: cannot convert from List&lt;Integer&gt; to ArrayList&lt;Integer&gt;","body":"<pre class=\"lang-java prettyprint-override\"><code>package set01;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Scanner;\n\npublic class DFTList {\n    static List&lt;Integer&gt;[]   list;\n    static boolean[] visited;\n    \n    public DFTList(int nodes) {\n        list = new ArrayList[nodes];\n        visited = new boolean[nodes];\n        for(int i=0;i&lt;nodes;i++) {\n           list[i] = new ArrayList&lt;&gt;();\n        }\n    }\n\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        System.out.println(&quot;Enter no. of nodes : &quot;);\n        int nodes = scan.nextInt();\n        DFTList obj = new DFTList(nodes);\n        System.out.println(&quot;Enter no.of vertex : &quot;);\n        int vertex = scan.nextInt();\n        \n        \n        for(int i=0;i&lt;vertex;i++) {\n            int v1 = scan.nextInt();\n            int v2 = scan.nextInt();\n            list[v1].add(v2);\n            list[v2].add(v1);\n        }\n        \n        solve(0);\n    }\n    \n    public static void solve(int a) {\n        visited[a] = true;\n        ArrayList&lt;Integer&gt; l = list[a];\n    }\n\n}\n</code></pre>\n<p>In the above code snippet, At the <code>DFTList</code> constructor, I have inserted <code>ArrayList</code> object at all the indices of the array. But when I try to retrieve the same object at the <strong><code>solve</code> method</strong> and store it under the <strong>same reference</strong>, I encountered an error stating that &quot;Type mismatch: cannot convert from List to ArrayList&quot;. Why does this error occur?</p>\n"},{"tags":["java","android","exception"],"answers":[{"comments":[{"owner":{"account_id":6209363,"reputation":496,"user_id":9655696,"display_name":"Al Ro"},"score":0,"creation_date":1689960469,"post_id":76724378,"comment_id":135291647,"body_markdown":"that&#39;s a pretty verbose invocation. If that&#39;s the simplest java allows then a static weak reference to my main activity seems like a better solution.","body":"that&#39;s a pretty verbose invocation. If that&#39;s the simplest java allows then a static weak reference to my main activity seems like a better solution."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1689969364,"post_id":76724378,"comment_id":135292982,"body_markdown":"@AlRo The invocation is literary 1 additional inlined method, if you go with this approach. I&#39;d hardly call that verbose, considering you have to transform one thing into something else, 1 additional operation is the minimum. If you want to make the wrapping method shorter, you can research into lomboks&#39; `@SneakyThrows`, but personally wouldn&#39;t add entire library just for that(unless you are already using it).","body":"@AlRo The invocation is literary 1 additional inlined method, if you go with this approach. I&#39;d hardly call that verbose, considering you have to transform one thing into something else, 1 additional operation is the minimum. If you want to make the wrapping method shorter, you can research into lomboks&#39; <code>@SneakyThrows</code>, but personally wouldn&#39;t add entire library just for that(unless you are already using it)."}],"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689792245,"creation_date":1689792245,"answer_id":76724378,"question_id":76724112,"body_markdown":"I&#39;ll use `Supplier` from the standard library for this example. Let&#39;s say you have method with such signature:\r\n```\r\nstatic &lt;T&gt; T getSupplierResult(Supplier&lt;T&gt; supplier) {\r\n  return supplier.get();\r\n}\r\n```\r\nNaturally the supplier you provide can&#39;t throw exceptions. Now you need a functional interface declared to throw exceptions.\r\n```\r\n@FunctionalInterface\r\ninterface ThrowingSupplier&lt;T&gt; {\r\n\r\n  T get() throws Exception;\r\n}\r\n```\r\nThen you have to transform this throwing supplier into the standard one. With a method it will look like this:\r\n```\r\nstatic &lt;T&gt; Supplier&lt;T&gt; wrapThrowingSupplierAsSupplier(ThrowingSupplier&lt;T&gt; throwingSupplier) {\r\n  return () -&gt; {\r\n    try {\r\n      return throwingSupplier.get();\r\n    } catch (Exception e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n  };\r\n}\r\n```\r\nNote that this method returns `Supplier&lt;T&gt;`, **not** `T`.\r\n\r\nIf you are not used to used to lambdas, the same can be achieved with a standard class:\r\n```\r\nprivate static final class ThrowingSupplierWrapper&lt;T&gt; implements Supplier&lt;T&gt; {\r\n\r\n  private final ThrowingSupplier&lt;T&gt; throwingSupplier;\r\n\r\n  ThrowingSupplierWrapper(ThrowingSupplier&lt;T&gt; throwingSupplier) {\r\n    this.throwingSupplier = throwingSupplier;\r\n  }\r\n\r\n  @Override\r\n  public T get() {\r\n    try {\r\n      return throwingSupplier.get();\r\n    } catch (Exception exc) {\r\n      throw new RuntimeException(exc);\r\n    }\r\n  }\r\n}\r\n```\r\nAnd the invocations of the method which requires `Supplier`:\r\n```\r\ngetSupplierResult(wrapThrowingSupplierAsSupplier(() -&gt; new FileInputStream(&quot;qwerty&quot;)));\r\ngetSupplierResult(wrapThrowingSupplierAsSupplier(() -&gt; new FileInputStream(&quot;faceroll&quot;)));\r\n```\r\nOr using the class:\r\n```\r\ngetSupplierResult(new ThrowingSupplierWrapper&lt;&gt;(() -&gt; new FileInputStream(&quot;asd&quot;)));\r\n```","title":"responding to java checked exception with lambda to notify user","body":"<p>I'll use <code>Supplier</code> from the standard library for this example. Let's say you have method with such signature:</p>\n<pre><code>static &lt;T&gt; T getSupplierResult(Supplier&lt;T&gt; supplier) {\n  return supplier.get();\n}\n</code></pre>\n<p>Naturally the supplier you provide can't throw exceptions. Now you need a functional interface declared to throw exceptions.</p>\n<pre><code>@FunctionalInterface\ninterface ThrowingSupplier&lt;T&gt; {\n\n  T get() throws Exception;\n}\n</code></pre>\n<p>Then you have to transform this throwing supplier into the standard one. With a method it will look like this:</p>\n<pre><code>static &lt;T&gt; Supplier&lt;T&gt; wrapThrowingSupplierAsSupplier(ThrowingSupplier&lt;T&gt; throwingSupplier) {\n  return () -&gt; {\n    try {\n      return throwingSupplier.get();\n    } catch (Exception e) {\n      throw new RuntimeException(e);\n    }\n  };\n}\n</code></pre>\n<p>Note that this method returns <code>Supplier&lt;T&gt;</code>, <strong>not</strong> <code>T</code>.</p>\n<p>If you are not used to used to lambdas, the same can be achieved with a standard class:</p>\n<pre><code>private static final class ThrowingSupplierWrapper&lt;T&gt; implements Supplier&lt;T&gt; {\n\n  private final ThrowingSupplier&lt;T&gt; throwingSupplier;\n\n  ThrowingSupplierWrapper(ThrowingSupplier&lt;T&gt; throwingSupplier) {\n    this.throwingSupplier = throwingSupplier;\n  }\n\n  @Override\n  public T get() {\n    try {\n      return throwingSupplier.get();\n    } catch (Exception exc) {\n      throw new RuntimeException(exc);\n    }\n  }\n}\n</code></pre>\n<p>And the invocations of the method which requires <code>Supplier</code>:</p>\n<pre><code>getSupplierResult(wrapThrowingSupplierAsSupplier(() -&gt; new FileInputStream(&quot;qwerty&quot;)));\ngetSupplierResult(wrapThrowingSupplierAsSupplier(() -&gt; new FileInputStream(&quot;faceroll&quot;)));\n</code></pre>\n<p>Or using the class:</p>\n<pre><code>getSupplierResult(new ThrowingSupplierWrapper&lt;&gt;(() -&gt; new FileInputStream(&quot;asd&quot;)));\n</code></pre>\n"}],"owner":{"account_id":6209363,"reputation":496,"user_id":9655696,"display_name":"Al Ro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689792245,"creation_date":1689790070,"question_id":76724112,"body_markdown":"During debugging etc, I&#39;d love to have a short and easy way to make all my unexpected errors result in a dialog box with the complete stack trace before crashing. While this can be done with a try/catch block and the self-control to actually write it out each time, I&#39;d rather have something I can add with just a few characters, like:\r\n\r\n    notifyOnFail(() -&gt; new FileInputStream(&quot;noneThere!&quot;));\r\n\r\nI&#39;m trying to adapt [this method](https://www.rainerhahnekamp.com/en/ignoring-exceptions-in-java/) for bypassing the javac checked exception requirement into a method I can add to my activity. But I don&#39;t understand lambda syntax well enough to make it happen.\r\n\r\nHis idea is that you can write a lambda expression for handing the exception, rather than inserting a boilerplate try/catch {} around your code. My goal is similar except I want it to produce a dialog box with the stack trace before the runtime exception is raised. Here&#39;s a working version of his code that throws a RuntimeException.\r\n\r\n    @FunctionalInterface\r\n    public interface mkRunTime&lt;T&gt; {\r\n      T execute() throws Exception;\r\n    \r\n      public static &lt;T&gt; T e(mkRunTime&lt;T&gt; runtime) {\r\n        try {\r\n          return runtime.execute();\r\n        } catch (Exception exception) {\r\n          throw new RuntimeException(exception);\r\n        }\r\n      }\r\n    }\r\n\r\nand then it&#39;s used like this:\r\n\r\n\tmkRunTime.e(() -&gt; new FileInputStream(&quot;this file obviously doesn&#39;t exist, and I&#39;d like to know that&#39;s why my program is crashing&quot;));\r\n\r\nSo how can I make this into a method of my activity instead?","title":"responding to java checked exception with lambda to notify user","body":"<p>During debugging etc, I'd love to have a short and easy way to make all my unexpected errors result in a dialog box with the complete stack trace before crashing. While this can be done with a try/catch block and the self-control to actually write it out each time, I'd rather have something I can add with just a few characters, like:</p>\n<pre><code>notifyOnFail(() -&gt; new FileInputStream(&quot;noneThere!&quot;));\n</code></pre>\n<p>I'm trying to adapt <a href=\"https://www.rainerhahnekamp.com/en/ignoring-exceptions-in-java/\" rel=\"nofollow noreferrer\">this method</a> for bypassing the javac checked exception requirement into a method I can add to my activity. But I don't understand lambda syntax well enough to make it happen.</p>\n<p>His idea is that you can write a lambda expression for handing the exception, rather than inserting a boilerplate try/catch {} around your code. My goal is similar except I want it to produce a dialog box with the stack trace before the runtime exception is raised. Here's a working version of his code that throws a RuntimeException.</p>\n<pre><code>@FunctionalInterface\npublic interface mkRunTime&lt;T&gt; {\n  T execute() throws Exception;\n\n  public static &lt;T&gt; T e(mkRunTime&lt;T&gt; runtime) {\n    try {\n      return runtime.execute();\n    } catch (Exception exception) {\n      throw new RuntimeException(exception);\n    }\n  }\n}\n</code></pre>\n<p>and then it's used like this:</p>\n<pre><code>mkRunTime.e(() -&gt; new FileInputStream(&quot;this file obviously doesn't exist, and I'd like to know that's why my program is crashing&quot;));\n</code></pre>\n<p>So how can I make this into a method of my activity instead?</p>\n"},{"tags":["java","kubernetes","debugging","remote-debugging"],"owner":{"account_id":191280,"reputation":15745,"user_id":431769,"accept_rate":78,"display_name":"hudi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689792217,"creation_date":1689792217,"question_id":76724375,"body_markdown":"in my deployment file I add\r\n\r\n          - name: JAVA_TOOL_OPTIONS\r\n            value: &#39;-Xdebug -agentlib:jdwp=transport=dt_socket,address=0.0.0.0:5005,server=y,suspend=n&#39;\r\n\r\nand debug port:\r\n\r\n          - name: debug-port\r\n            containerPort: 5005\r\n            protocol: TCP\r\n\r\nI need to debug my application from the start so when I deploy application run port forwarding and run debug application in sts everything works. Problem is that it disconnected after 10s so I can debug nothing. Any advise how to fix this ?","title":"Disconnected after 10 when debugin remote kube java application","body":"<p>in my deployment file I add</p>\n<pre><code>      - name: JAVA_TOOL_OPTIONS\n        value: '-Xdebug -agentlib:jdwp=transport=dt_socket,address=0.0.0.0:5005,server=y,suspend=n'\n</code></pre>\n<p>and debug port:</p>\n<pre><code>      - name: debug-port\n        containerPort: 5005\n        protocol: TCP\n</code></pre>\n<p>I need to debug my application from the start so when I deploy application run port forwarding and run debug application in sts everything works. Problem is that it disconnected after 10s so I can debug nothing. Any advise how to fix this ?</p>\n"},{"tags":["java","hibernate","jpa","uuid","uuidgenerator"],"comments":[{"owner":{"account_id":365431,"reputation":4956,"user_id":2057091,"accept_rate":89,"display_name":"Aserre"},"score":2,"creation_date":1689783662,"post_id":76723290,"comment_id":135263518,"body_markdown":"From the doc, `strategy` is a string, `type` is a class. Have you tried `type = org.hibernate.id.UUIDGenerator.class` ?","body":"From the doc, <code>strategy</code> is a string, <code>type</code> is a class. Have you tried <code>type = org.hibernate.id.UUIDGenerator.class</code> ?"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1689783722,"post_id":76723290,"comment_id":135263531,"body_markdown":"I believe that should be either `@org.hibernate.annotations.UuidGenerator` or `@GenericGenerator(name = &quot;UUID&quot;, type = org.hibernate.id.uuid.UuidGenerator.class)`","body":"I believe that should be either <code>@org.hibernate.annotations.UuidGenerator</code> or <code>@GenericGenerator(name = &quot;UUID&quot;, type = org.hibernate.id.uuid.UuidGenerator.class)</code>"},{"owner":{"account_id":20251935,"reputation":6409,"user_id":14852784,"display_name":"J. M. Arnold"},"score":0,"creation_date":1689849551,"post_id":76723290,"comment_id":135272929,"body_markdown":"@Aserre @Andrey B. Panfilov Nvm, I used: `@GenericGenerator(name = &quot;UUID&quot;, type = org.hibernate.id.uuid.UuidGenerator.class)` and got: `org.hibernate.MappingException: Could not instantiate id generator` for all classes using your new approach?","body":"@Aserre @Andrey B. Panfilov Nvm, I used: <code>@GenericGenerator(name = &quot;UUID&quot;, type = org.hibernate.id.uuid.UuidGenerator.class)</code> and got: <code>org.hibernate.MappingException: Could not instantiate id generator</code> for all classes using your new approach?"}],"answers":[{"comments":[{"owner":{"account_id":10838796,"reputation":167,"user_id":7970858,"display_name":"Oscar"},"score":1,"creation_date":1694002623,"post_id":76724292,"comment_id":135833415,"body_markdown":"Seems good way two replace &quot;strategy&quot; property, but when I user that I get another error concerning dependency injection &quot;Parameter 0 of constructor in org.hibernate.id.uuid.UuidGenerator required a bean of type &#39;org.hibernate.annotations.UuidGenerator&#39; that could not be found&quot;.","body":"Seems good way two replace &quot;strategy&quot; property, but when I user that I get another error concerning dependency injection &quot;Parameter 0 of constructor in org.hibernate.id.uuid.UuidGenerator required a bean of type &#39;org.hibernate.annotations.UuidGenerator&#39; that could not be found&quot;."},{"owner":{"account_id":10947190,"reputation":183,"user_id":8628988,"display_name":"Denys Bondarenko"},"score":0,"creation_date":1695043849,"post_id":76724292,"comment_id":135967481,"body_markdown":"@Oscar same. Did you find way to fix it?","body":"@Oscar same. Did you find way to fix it?"},{"owner":{"account_id":20251935,"reputation":6409,"user_id":14852784,"display_name":"J. M. Arnold"},"score":1,"creation_date":1695123481,"post_id":76724292,"comment_id":135979285,"body_markdown":"@Denys Bondarenko This has been answered in https://stackoverflow.com/questions/77128492/uuidgenerator-bean-type-mismatch/77132434#77132434 in case you&#39;re curious and still facing the same issue you did earlier.","body":"@Denys Bondarenko This has been answered in <a href=\"https://stackoverflow.com/questions/77128492/uuidgenerator-bean-type-mismatch/77132434#77132434\" title=\"uuidgenerator bean type mismatch\">stackoverflow.com/questions/77128492/&hellip;</a> in case you&#39;re curious and still facing the same issue you did earlier."}],"tags":[],"owner":{"account_id":20251935,"reputation":6409,"user_id":14852784,"display_name":"J. M. Arnold"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689791524,"creation_date":1689791524,"answer_id":76724292,"question_id":76723290,"body_markdown":"As the two comments above suggest, `type` is now of type class. Thus the fix is simple:\r\n\r\n    @GenericGenerator(\r\n                name = &quot;UUID&quot;,\r\n                type = org.hibernate.id.uuid.UuidGenerator.class\r\n        )","title":"Using the new type() for UUIDGenerator instead of strategy?","body":"<p>As the two comments above suggest, <code>type</code> is now of type class. Thus the fix is simple:</p>\n<pre><code>@GenericGenerator(\n            name = &quot;UUID&quot;,\n            type = org.hibernate.id.uuid.UuidGenerator.class\n    )\n</code></pre>\n"}],"owner":{"account_id":20251935,"reputation":6409,"user_id":14852784,"display_name":"J. M. Arnold"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1537,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76724292,"answer_count":1,"score":0,"last_activity_date":1689791524,"creation_date":1689783155,"question_id":76723290,"body_markdown":"According to the [documentation][1], the following usage is deprecated:\r\n\r\n```\r\n@GenericGenerator(\r\n            name = &quot;UUID&quot;,\r\n            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\r\n    )\r\n```\r\n\r\nOne shall use the new [`type()`][2]! But how can I transform my above statement to do the same with the `type()`? Just providing the hibernate UUIDGenerator doesn&#39;t work.\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/annotations/GenericGenerator.html\r\n  [2]: https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/annotations/GenericGenerator.html#type()","title":"Using the new type() for UUIDGenerator instead of strategy?","body":"<p>According to the <a href=\"https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/annotations/GenericGenerator.html\" rel=\"nofollow noreferrer\">documentation</a>, the following usage is deprecated:</p>\n<pre><code>@GenericGenerator(\n            name = &quot;UUID&quot;,\n            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\n    )\n</code></pre>\n<p>One shall use the new <a href=\"https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/annotations/GenericGenerator.html#type()\" rel=\"nofollow noreferrer\"><code>type()</code></a>! But how can I transform my above statement to do the same with the <code>type()</code>? Just providing the hibernate UUIDGenerator doesn't work.</p>\n"},{"tags":["java","linux","docker","yocto"],"comments":[{"owner":{"account_id":10568844,"reputation":341,"user_id":7786294,"display_name":"Anton Schill&#233;n"},"score":1,"creation_date":1682671306,"post_id":75823654,"comment_id":134255591,"body_markdown":"What errors do you get in the do_configure()?","body":"What errors do you get in the do_configure()?"},{"owner":{"account_id":23327554,"reputation":309,"user_id":17834402,"display_name":"Paul Smith"},"score":0,"creation_date":1683233402,"post_id":75823654,"comment_id":134339735,"body_markdown":"Maybe building an SDK for cross compiling helps at debugging. Cross compiling openjdk using the sdk is probably not worth it, because lots of dependencies. See: https://docs.yoctoproject.org/sdk-manual/using.html","body":"Maybe building an SDK for cross compiling helps at debugging. Cross compiling openjdk using the sdk is probably not worth it, because lots of dependencies. See: <a href=\"https://docs.yoctoproject.org/sdk-manual/using.html\" rel=\"nofollow noreferrer\">docs.yoctoproject.org/sdk-manual/using.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":29050965,"reputation":21,"user_id":22253803,"display_name":"Sebastian Veit"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689791217,"creation_date":1689791217,"answer_id":76724259,"question_id":75823654,"body_markdown":"I have had the same issue but i have solved it by creating [my own layer][1] that leverages from the [Adoptium][2] and [Eclipse Temurin][3] projects.\r\nIt takes a prebuilt JRE and includes it in your OE/Yocto build. Btw, that is way faster than building the whole JRE on your own.\r\n\r\nYou can use my layer by adding it to your `bblayers.conf` and then append `openjdk-17-jre` to your `IMAGE_INSTALL` in your `local.conf` file. My layer currently supports JREs for ARM, ARM64 and x86_64 architecture.\r\n\r\nMake sure your setup is using at least the `dunfell` codename/branch of OE/Yocto. You can have a look at the documentation of the [Yocto project on how to migrate][4].\r\n\r\nFor everyone wondering why the official java layer `meta-java` seems to be stuck on version 8 of OpenJDK: Building and maintaining a JVM is much work. Furthermore in order to compile the desired version of a JVM, you need a bootstraping JVM of the previous version. E.g. by building OpenJDK 11 JRE you need OpenJDK 10 JDK. As i said, it is a lot of work.\r\n\r\n[1]: https://github.com/lucimber/meta-openjdk-temurin\r\n[2]: https://adoptium.net\r\n[3]: https://projects.eclipse.org/projects/adoptium.temurin\r\n[4]: https://docs.yoctoproject.org/migration-guides/","title":"Run Java 17 on Yocto OS","body":"<p>I have had the same issue but i have solved it by creating <a href=\"https://github.com/lucimber/meta-openjdk-temurin\" rel=\"nofollow noreferrer\">my own layer</a> that leverages from the <a href=\"https://adoptium.net\" rel=\"nofollow noreferrer\">Adoptium</a> and <a href=\"https://projects.eclipse.org/projects/adoptium.temurin\" rel=\"nofollow noreferrer\">Eclipse Temurin</a> projects.\nIt takes a prebuilt JRE and includes it in your OE/Yocto build. Btw, that is way faster than building the whole JRE on your own.</p>\n<p>You can use my layer by adding it to your <code>bblayers.conf</code> and then append <code>openjdk-17-jre</code> to your <code>IMAGE_INSTALL</code> in your <code>local.conf</code> file. My layer currently supports JREs for ARM, ARM64 and x86_64 architecture.</p>\n<p>Make sure your setup is using at least the <code>dunfell</code> codename/branch of OE/Yocto. You can have a look at the documentation of the <a href=\"https://docs.yoctoproject.org/migration-guides/\" rel=\"nofollow noreferrer\">Yocto project on how to migrate</a>.</p>\n<p>For everyone wondering why the official java layer <code>meta-java</code> seems to be stuck on version 8 of OpenJDK: Building and maintaining a JVM is much work. Furthermore in order to compile the desired version of a JVM, you need a bootstraping JVM of the previous version. E.g. by building OpenJDK 11 JRE you need OpenJDK 10 JDK. As i said, it is a lot of work.</p>\n"}],"owner":{"account_id":28083954,"reputation":41,"user_id":21454599,"display_name":"bc_tom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":660,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1689791217,"creation_date":1679578218,"question_id":75823654,"body_markdown":"My colleagues and I are trying to build a Yocto OS Image.\r\nOur application consists of several Micro-Services written with Java 17 and they require to run on an embedded device ([phyCORE i.MX 8M Plus Setup Guide](https://www.phytec.de/cdocuments/?doc=LAC7Ig)). On another System we would run them within Docker containers and deploy them this way but since none of us have ever worked on a Yocto build before, we are kinda stuck getting things to work and finding the layers we have to add to the Yocto build.\r\n\r\nWe did get the [meta-java layer](https://community.nxp.com/t5/i-MX-Processors-Knowledge-Base/How-to-add-openjdk-to-Yocto-Layers/ta-p/1128283) to install but that is only based on openjdk-8.\r\n\r\nThe following files are the current build configuration\r\n\r\n**local.conf**\r\n\r\n```\r\nMACHINE ?= &quot;phyboard-pollux-imx8mp-3&quot;\r\n\r\nDISTRO ?= &quot;ampliphy-vendor&quot;\r\n\r\n########################\r\n# global configuration #\r\n########################\r\n\r\n# That are the default values of bitbake.  Adapt these to your workspace and\r\n# host preferences.\r\n#DL_DIR = &quot;${TOPDIR}/downloads&quot;\r\n#SSTATE_DIR = &quot;${TOPDIR}/sstate-cache&quot;\r\n\r\n# License Handling\r\n#  - Uncomment for i.MX6 proprietary GPU libraries\r\n#LICENSE_FLAGS_WHITELIST += &quot;license-nxp_v14-june-2016_imx-gpu-viv&quot;\r\n#  - Uncomment for Freescale i.MX6 VPU firmware blobs\r\n#LICENSE_FLAGS_WHITELIST += &quot;license-freescale_v12-march-2016_firmware-imx&quot;\r\n\r\n# build artifacts are deployed here\r\nDEPLOY_DIR = &quot;${TOPDIR}/deploy&quot;\r\n\r\n# enable bitbakes git shallow functionality: this reduces download volume\r\n# from 7.3G to 1.6 G as of sumo. If you need the git history of a project,\r\n# you can run a &quot;git remote update&quot; in the tmp dir, as the remotes are\r\n# correctly specified\r\nBB_GIT_SHALLOW = &quot;1&quot;\r\n\r\n# Select configuration UI for linux and barebox recipe. The openembedded\r\n# default is &#39;menuconfig&#39;, &#39;nconfig&#39; has more features.\r\n# busybox only supports menuconfig\r\n#KCONFIG_CONFIG_COMMAND = &quot;menuconfig&quot;\r\nKCONFIG_CONFIG_COMMAND = &quot;nconfig&quot;\r\nKCONFIG_CONFIG_COMMAND_pn-busybox = &quot;menuconfig&quot;\r\n\r\n# SDK will be build for that cpu\r\n#SDKMACHINE ?= &quot;x86_64&quot;\r\n\r\n# bitbake disk monitor setup\r\nBB_DISKMON_DIRS ??= &quot;\\\r\n    STOPTASKS,${TMPDIR},1G,100K \\\r\n    STOPTASKS,${DL_DIR},1G,100K \\\r\n    STOPTASKS,${SSTATE_DIR},1G,100K \\\r\n    STOPTASKS,/tmp,100M,100K \\\r\n    ABORT,${TMPDIR},100M,1K \\\r\n    ABORT,${DL_DIR},100M,1K \\\r\n    ABORT,${SSTATE_DIR},100M,1K \\\r\n    ABORT,/tmp,10M,1K&quot;\r\n\r\n#######################\r\n# Image configuration #\r\n#######################\r\n\r\n# The following line disables the autostart of the phytec-qtdemo by\r\n# default, but you can start the demo anytime using\r\n#  $ systemctl start phytec-qtdemo.service\r\n#SYSTEMD_AUTO_ENABLE_pn-phytec-qtdemo = &quot;disable&quot;\r\n\r\n# You can disable and enable FSTYPES as you wish. e.g. &#39;ext4&#39;.\r\n# This variable is ordering dependend.\r\n#IMAGE_FSTYPES = &quot;tar.gz wic ubifs emmc&quot;\r\n\r\n# To change the variable for any imx8 machine:\r\n#IMAGE_FSTYPES_mx8 = &quot;tar.gz wic ubifs emmc&quot;\r\n\r\n# Turn on debugging options of the kernel\r\n#DEBUG_BUILD_pn-linux-mainline = &quot;1&quot;\r\n# Turn on debugging options of the imx kernel\r\n#DEBUG_BUILD_pn-linux-imx = &quot;1&quot;\r\n# Turn on debugging options of the barebox\r\n#DEBUG_BUILD_pn-barebox = &quot;1&quot;\r\n\r\n# Include kernel sources in SDK\r\nTOOLCHAIN_TARGET_TASK_append = &quot; kernel-devsrc&quot;\r\n\r\n# The default package class of the distro ampliphy is &#39;package_ipk&#39;. The first\r\n# value is used as the package manager to build the image and sdk. To build\r\n# also tar packages use\r\n#PACKAGE_CLASSES = &quot;package_ipk package_tar&quot;\r\n\r\n# Variable IMAGE_ROOTFS_EXTRA_SPACE from poky/meta/conf/documentation.conf:\r\n#   Defines additional free disk space created in the image in Kbytes. By\r\n#   default, this variable is set to &#39;0&#39;.\r\n# This example line adds an additional 512 MiB of free space to the root\r\n# filesystem:\r\n#IMAGE_ROOTFS_EXTRA_SPACE = &quot;524288&quot;\r\n\r\n# See http://www.yoctoproject.org/docs/1.8/ref-manual/ref-manual.html#ref-features-image\r\n#    Through these variables, you can add several different predefined\r\n#    packages such as development utilities or packages with debug information\r\n#    needed to investigate application problems or profile applications\r\nEXTRA_IMAGE_FEATURES = &quot;&quot;\r\n# - &quot;Makes an image suitable for development (e.g. allows root logins without\r\n#    passwords and enables post-installation logging)&quot;\r\nEXTRA_IMAGE_FEATURES += &quot;debug-tweaks&quot;\r\n# - &quot;Installs debug symbol packages for all packages installed in a given\r\n#    image.&quot;\r\n#EXTRA_IMAGE_FEATURES += &quot;dbg-pkgs&quot;\r\n# - &quot;Installs debugging tools such as strace and gdb.&quot;\r\n#EXTRA_IMAGE_FEATURES += &quot;tools-debug&quot;\r\n\r\n######################\r\n# rauc configuration #\r\n######################\r\n\r\n# certificate location for signing bundles\r\n#CERT_PATH = &quot;${TOPDIR}/../sources/meta-ampliphy/openssl-ca&quot;\r\n\r\n####################\r\n# QT configuration #\r\n####################\r\n\r\n# We disable qt widgets per default to save about 10 MB of storage. If\r\n# you need qt widget support, you can enable it with this line\r\n#DISTRO_FEATURES_append = &quot; qtwidgets&quot;\r\n\r\nCONF_VERSION = &quot;1&quot;\r\n\r\n# Uncomment to accept NXP EULA (needed, if any NXP / freescale layer is used)\r\n# EULA can then be found under ../sources/meta-freescale/EULA\r\nACCEPT_FSL_EULA = &quot;1&quot;\r\n\r\n# A TISDK BSP requires per default an external toolchain\r\n# Provide a default path that is compatible to our TISDK docker image\r\nTOOLCHAIN_BASE ?= &quot;/opt/PHYTEC_BSPs&quot;\r\n\r\n############################################\r\n# Addition of openjdk-8 and minicom to the default build\r\nPREFERRED_PROVIDER_virtual/java-initial-native = &quot;cacao-initial-native&quot;\r\nPREFERRED_PROVIDER_virtual/java-native = &quot;jamvm-native&quot;\r\nPREFERRED_PROVIDER_virtual/javac-native = &quot;ecj-bootstrap-native&quot;\r\n\r\nIMAGE_INSTALL_append = &quot; minicom openjdk-8&quot;\r\n############################################\r\n```\r\n\r\n**bblayers.conf**\r\n\r\n```\r\n# POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf\r\n# changes incompatibly\r\nPOKY_BBLAYERS_CONF_VERSION = &quot;2&quot;\r\n\r\nBBPATH = &quot;${TOPDIR}&quot;\r\nBBFILES ?= &quot;&quot;\r\n\r\nOEROOT := &quot;/home/ubuntu/yocto/sources/poky&quot;\r\n# add BSPDIR variable, as it is needed by recipes of NXP\r\nBSPDIR := &quot;${OEROOT}/../..&quot;\r\n\r\n#######################################\r\n# IMPORTANT NOTE: change to correct location and username on your build!\r\nMYBSPDIR := &quot;/home/ubuntu/yocto/sources&quot;\r\n########################################\r\n\r\n# In our BSPs active layers are defined by the manifest.xml for all BSPs. The\r\n# bblayers.conf gets created by the init_bblayers.py script.\r\nBBLAYERS ?= &quot;&quot;\r\nBBLAYERS += &quot;\\\r\n  ${OEROOT}/../poky/meta \\\r\n  ${OEROOT}/../poky/meta-poky \\\r\n  ${OEROOT}/../meta-openembedded/meta-oe \\\r\n  ${OEROOT}/../meta-openembedded/meta-networking \\\r\n  ${OEROOT}/../meta-openembedded/meta-python \\\r\n  ${OEROOT}/../meta-openembedded/meta-multimedia \\\r\n  ${OEROOT}/../meta-openembedded/meta-filesystems \\\r\n  ${OEROOT}/../meta-openembedded/meta-perl \\\r\n  ${OEROOT}/../meta-openembedded/meta-gnome \\\r\n  ${OEROOT}/../meta-imx/meta-bsp \\\r\n  ${OEROOT}/../meta-imx/meta-sdk \\\r\n  ${OEROOT}/../meta-imx/meta-ml \\\r\n  ${OEROOT}/../meta-browser/meta-chromium \\\r\n  ${OEROOT}/../meta-clang \\\r\n  ${OEROOT}/../meta-freescale \\\r\n  ${OEROOT}/../meta-freescale-3rdparty \\\r\n  ${OEROOT}/../meta-freescale-distro \\\r\n  ${OEROOT}/../meta-nxp-demo-experience \\\r\n  ${OEROOT}/../meta-python2 \\\r\n  ${OEROOT}/../meta-qt5 \\\r\n  ${OEROOT}/../meta-virtualization \\\r\n  ${OEROOT}/../meta-rauc \\\r\n  ${OEROOT}/../meta-phytec \\\r\n  ${OEROOT}/../meta-ampliphy \\\r\n  ${OEROOT}/../meta-security \\\r\n  ${OEROOT}/../meta-security/meta-tpm \\\r\n  &quot;\r\n###################################\r\n# Addition of the meta-java layer\r\nBBLAYERS += &quot;${MYBSPDIR}/meta-java&quot;\r\n###################################\r\n```\r\n\r\nWe also tried creating and adding a Custom Layer containing openjdk-17 but that failed in the cross-compiling process started via `bitbake &lt;recipe-name&gt;` within the `do_configure()` part.\r\n\r\nIs there any existing layer that we can add using a newer Java version than version 8 or are there any tips on how to get a Custom Layer running?","title":"Run Java 17 on Yocto OS","body":"<p>My colleagues and I are trying to build a Yocto OS Image.\nOur application consists of several Micro-Services written with Java 17 and they require to run on an embedded device (<a href=\"https://www.phytec.de/cdocuments/?doc=LAC7Ig\" rel=\"nofollow noreferrer\">phyCORE i.MX 8M Plus Setup Guide</a>). On another System we would run them within Docker containers and deploy them this way but since none of us have ever worked on a Yocto build before, we are kinda stuck getting things to work and finding the layers we have to add to the Yocto build.</p>\n<p>We did get the <a href=\"https://community.nxp.com/t5/i-MX-Processors-Knowledge-Base/How-to-add-openjdk-to-Yocto-Layers/ta-p/1128283\" rel=\"nofollow noreferrer\">meta-java layer</a> to install but that is only based on openjdk-8.</p>\n<p>The following files are the current build configuration</p>\n<p><strong>local.conf</strong></p>\n<pre><code>MACHINE ?= &quot;phyboard-pollux-imx8mp-3&quot;\n\nDISTRO ?= &quot;ampliphy-vendor&quot;\n\n########################\n# global configuration #\n########################\n\n# That are the default values of bitbake.  Adapt these to your workspace and\n# host preferences.\n#DL_DIR = &quot;${TOPDIR}/downloads&quot;\n#SSTATE_DIR = &quot;${TOPDIR}/sstate-cache&quot;\n\n# License Handling\n#  - Uncomment for i.MX6 proprietary GPU libraries\n#LICENSE_FLAGS_WHITELIST += &quot;license-nxp_v14-june-2016_imx-gpu-viv&quot;\n#  - Uncomment for Freescale i.MX6 VPU firmware blobs\n#LICENSE_FLAGS_WHITELIST += &quot;license-freescale_v12-march-2016_firmware-imx&quot;\n\n# build artifacts are deployed here\nDEPLOY_DIR = &quot;${TOPDIR}/deploy&quot;\n\n# enable bitbakes git shallow functionality: this reduces download volume\n# from 7.3G to 1.6 G as of sumo. If you need the git history of a project,\n# you can run a &quot;git remote update&quot; in the tmp dir, as the remotes are\n# correctly specified\nBB_GIT_SHALLOW = &quot;1&quot;\n\n# Select configuration UI for linux and barebox recipe. The openembedded\n# default is 'menuconfig', 'nconfig' has more features.\n# busybox only supports menuconfig\n#KCONFIG_CONFIG_COMMAND = &quot;menuconfig&quot;\nKCONFIG_CONFIG_COMMAND = &quot;nconfig&quot;\nKCONFIG_CONFIG_COMMAND_pn-busybox = &quot;menuconfig&quot;\n\n# SDK will be build for that cpu\n#SDKMACHINE ?= &quot;x86_64&quot;\n\n# bitbake disk monitor setup\nBB_DISKMON_DIRS ??= &quot;\\\n    STOPTASKS,${TMPDIR},1G,100K \\\n    STOPTASKS,${DL_DIR},1G,100K \\\n    STOPTASKS,${SSTATE_DIR},1G,100K \\\n    STOPTASKS,/tmp,100M,100K \\\n    ABORT,${TMPDIR},100M,1K \\\n    ABORT,${DL_DIR},100M,1K \\\n    ABORT,${SSTATE_DIR},100M,1K \\\n    ABORT,/tmp,10M,1K&quot;\n\n#######################\n# Image configuration #\n#######################\n\n# The following line disables the autostart of the phytec-qtdemo by\n# default, but you can start the demo anytime using\n#  $ systemctl start phytec-qtdemo.service\n#SYSTEMD_AUTO_ENABLE_pn-phytec-qtdemo = &quot;disable&quot;\n\n# You can disable and enable FSTYPES as you wish. e.g. 'ext4'.\n# This variable is ordering dependend.\n#IMAGE_FSTYPES = &quot;tar.gz wic ubifs emmc&quot;\n\n# To change the variable for any imx8 machine:\n#IMAGE_FSTYPES_mx8 = &quot;tar.gz wic ubifs emmc&quot;\n\n# Turn on debugging options of the kernel\n#DEBUG_BUILD_pn-linux-mainline = &quot;1&quot;\n# Turn on debugging options of the imx kernel\n#DEBUG_BUILD_pn-linux-imx = &quot;1&quot;\n# Turn on debugging options of the barebox\n#DEBUG_BUILD_pn-barebox = &quot;1&quot;\n\n# Include kernel sources in SDK\nTOOLCHAIN_TARGET_TASK_append = &quot; kernel-devsrc&quot;\n\n# The default package class of the distro ampliphy is 'package_ipk'. The first\n# value is used as the package manager to build the image and sdk. To build\n# also tar packages use\n#PACKAGE_CLASSES = &quot;package_ipk package_tar&quot;\n\n# Variable IMAGE_ROOTFS_EXTRA_SPACE from poky/meta/conf/documentation.conf:\n#   Defines additional free disk space created in the image in Kbytes. By\n#   default, this variable is set to '0'.\n# This example line adds an additional 512 MiB of free space to the root\n# filesystem:\n#IMAGE_ROOTFS_EXTRA_SPACE = &quot;524288&quot;\n\n# See http://www.yoctoproject.org/docs/1.8/ref-manual/ref-manual.html#ref-features-image\n#    Through these variables, you can add several different predefined\n#    packages such as development utilities or packages with debug information\n#    needed to investigate application problems or profile applications\nEXTRA_IMAGE_FEATURES = &quot;&quot;\n# - &quot;Makes an image suitable for development (e.g. allows root logins without\n#    passwords and enables post-installation logging)&quot;\nEXTRA_IMAGE_FEATURES += &quot;debug-tweaks&quot;\n# - &quot;Installs debug symbol packages for all packages installed in a given\n#    image.&quot;\n#EXTRA_IMAGE_FEATURES += &quot;dbg-pkgs&quot;\n# - &quot;Installs debugging tools such as strace and gdb.&quot;\n#EXTRA_IMAGE_FEATURES += &quot;tools-debug&quot;\n\n######################\n# rauc configuration #\n######################\n\n# certificate location for signing bundles\n#CERT_PATH = &quot;${TOPDIR}/../sources/meta-ampliphy/openssl-ca&quot;\n\n####################\n# QT configuration #\n####################\n\n# We disable qt widgets per default to save about 10 MB of storage. If\n# you need qt widget support, you can enable it with this line\n#DISTRO_FEATURES_append = &quot; qtwidgets&quot;\n\nCONF_VERSION = &quot;1&quot;\n\n# Uncomment to accept NXP EULA (needed, if any NXP / freescale layer is used)\n# EULA can then be found under ../sources/meta-freescale/EULA\nACCEPT_FSL_EULA = &quot;1&quot;\n\n# A TISDK BSP requires per default an external toolchain\n# Provide a default path that is compatible to our TISDK docker image\nTOOLCHAIN_BASE ?= &quot;/opt/PHYTEC_BSPs&quot;\n\n############################################\n# Addition of openjdk-8 and minicom to the default build\nPREFERRED_PROVIDER_virtual/java-initial-native = &quot;cacao-initial-native&quot;\nPREFERRED_PROVIDER_virtual/java-native = &quot;jamvm-native&quot;\nPREFERRED_PROVIDER_virtual/javac-native = &quot;ecj-bootstrap-native&quot;\n\nIMAGE_INSTALL_append = &quot; minicom openjdk-8&quot;\n############################################\n</code></pre>\n<p><strong>bblayers.conf</strong></p>\n<pre><code># POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf\n# changes incompatibly\nPOKY_BBLAYERS_CONF_VERSION = &quot;2&quot;\n\nBBPATH = &quot;${TOPDIR}&quot;\nBBFILES ?= &quot;&quot;\n\nOEROOT := &quot;/home/ubuntu/yocto/sources/poky&quot;\n# add BSPDIR variable, as it is needed by recipes of NXP\nBSPDIR := &quot;${OEROOT}/../..&quot;\n\n#######################################\n# IMPORTANT NOTE: change to correct location and username on your build!\nMYBSPDIR := &quot;/home/ubuntu/yocto/sources&quot;\n########################################\n\n# In our BSPs active layers are defined by the manifest.xml for all BSPs. The\n# bblayers.conf gets created by the init_bblayers.py script.\nBBLAYERS ?= &quot;&quot;\nBBLAYERS += &quot;\\\n  ${OEROOT}/../poky/meta \\\n  ${OEROOT}/../poky/meta-poky \\\n  ${OEROOT}/../meta-openembedded/meta-oe \\\n  ${OEROOT}/../meta-openembedded/meta-networking \\\n  ${OEROOT}/../meta-openembedded/meta-python \\\n  ${OEROOT}/../meta-openembedded/meta-multimedia \\\n  ${OEROOT}/../meta-openembedded/meta-filesystems \\\n  ${OEROOT}/../meta-openembedded/meta-perl \\\n  ${OEROOT}/../meta-openembedded/meta-gnome \\\n  ${OEROOT}/../meta-imx/meta-bsp \\\n  ${OEROOT}/../meta-imx/meta-sdk \\\n  ${OEROOT}/../meta-imx/meta-ml \\\n  ${OEROOT}/../meta-browser/meta-chromium \\\n  ${OEROOT}/../meta-clang \\\n  ${OEROOT}/../meta-freescale \\\n  ${OEROOT}/../meta-freescale-3rdparty \\\n  ${OEROOT}/../meta-freescale-distro \\\n  ${OEROOT}/../meta-nxp-demo-experience \\\n  ${OEROOT}/../meta-python2 \\\n  ${OEROOT}/../meta-qt5 \\\n  ${OEROOT}/../meta-virtualization \\\n  ${OEROOT}/../meta-rauc \\\n  ${OEROOT}/../meta-phytec \\\n  ${OEROOT}/../meta-ampliphy \\\n  ${OEROOT}/../meta-security \\\n  ${OEROOT}/../meta-security/meta-tpm \\\n  &quot;\n###################################\n# Addition of the meta-java layer\nBBLAYERS += &quot;${MYBSPDIR}/meta-java&quot;\n###################################\n</code></pre>\n<p>We also tried creating and adding a Custom Layer containing openjdk-17 but that failed in the cross-compiling process started via <code>bitbake &lt;recipe-name&gt;</code> within the <code>do_configure()</code> part.</p>\n<p>Is there any existing layer that we can add using a newer Java version than version 8 or are there any tips on how to get a Custom Layer running?</p>\n"},{"tags":["java","variables","insert","include","quotation-marks"],"comments":[{"owner":{"account_id":238665,"reputation":3967,"user_id":507708,"accept_rate":67,"display_name":"Gray Adams"},"score":20,"creation_date":1331349171,"post_id":9643610,"comment_id":12243479,"body_markdown":"@Chandra Please don&#39;t ask why, but rather explain if possible. It&#39;s just how I&#39;d prefer to do it. Thanks.","body":"@Chandra Please don&#39;t ask why, but rather explain if possible. It&#39;s just how I&#39;d prefer to do it. Thanks."},{"owner":{"account_id":59951,"reputation":51423,"user_id":179233,"accept_rate":100,"display_name":"Kaleb Brasee"},"score":3,"creation_date":1331349289,"post_id":9643610,"comment_id":12243498,"body_markdown":"Use Groovy, then you&#39;ll be able to do &quot;A string ${aVariable}&quot; all you want.","body":"Use Groovy, then you&#39;ll be able to do &quot;A string ${aVariable}&quot; all you want."},{"owner":{"account_id":102191,"reputation":40009,"user_id":274466,"display_name":"ig0774"},"score":3,"creation_date":1331349327,"post_id":9643610,"comment_id":12243505,"body_markdown":"There&#39;s a whole variety of techniques for similar things discussed in [this question](http://stackoverflow.com/questions/959731/how-to-replace-a-set-of-tokens-in-a-java-string), but `String.format()` is built-in to the language.","body":"There&#39;s a whole variety of techniques for similar things discussed in <a href=\"http://stackoverflow.com/questions/959731/how-to-replace-a-set-of-tokens-in-a-java-string\">this question</a>, but <code>String.format()</code> is built-in to the language."},{"owner":{"account_id":238665,"reputation":3967,"user_id":507708,"accept_rate":67,"display_name":"Gray Adams"},"score":1,"creation_date":1331349425,"post_id":9643610,"comment_id":12243519,"body_markdown":"@KalebBrasee That sounds perfect, but I am always hesitant when it comes to modifying languages. I don&#39;t want to set myself back.","body":"@KalebBrasee That sounds perfect, but I am always hesitant when it comes to modifying languages. I don&#39;t want to set myself back."},{"owner":{"account_id":59951,"reputation":51423,"user_id":179233,"accept_rate":100,"display_name":"Kaleb Brasee"},"score":2,"creation_date":1331349625,"post_id":9643610,"comment_id":12243543,"body_markdown":"@GrayAdams Groovy doesn&#39;t set you back, it sets you free! :D","body":"@GrayAdams Groovy doesn&#39;t set you back, it sets you free! :D"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1331349729,"post_id":9643610,"comment_id":12243557,"body_markdown":"[tutorial here](http://docs.oracle.com/javase/tutorial/java/data/strings.html)","body":"<a href=\"http://docs.oracle.com/javase/tutorial/java/data/strings.html\" rel=\"nofollow noreferrer\">tutorial here</a>"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1331350076,"post_id":9643610,"comment_id":12243583,"body_markdown":"@owlstead: actually the best reference for this is the [java.util.Formatter API](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html) since it gives all the dirty details needed to make the format Strings sing.","body":"@owlstead: actually the best reference for this is the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html\" rel=\"nofollow noreferrer\">java.util.Formatter API</a> since it gives all the dirty details needed to make the format Strings sing."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1331351011,"post_id":9643610,"comment_id":12243691,"body_markdown":"@HovercraftFullOfEels It was the first hit that google &quot;print variable in string java&quot; turned up.","body":"@HovercraftFullOfEels It was the first hit that google &quot;print variable in string java&quot; turned up."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1331369972,"post_id":9643610,"comment_id":12245639,"body_markdown":"But *why* do you prefer it that way? WHy do you want another syntax for the same thing? And what&#39;s the basis for your expectation that Java syntax should exist just the way you like it?","body":"But <i>why</i> do you prefer it that way? WHy do you want another syntax for the same thing? And what&#39;s the basis for your expectation that Java syntax should exist just the way you like it?"}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1331353178,"post_id":9643624,"comment_id":12243920,"body_markdown":"I know this is a matter of opinion, but I don&#39;t see how `format` is more attractive than a simple String concatenation expression.  Where `format` comes into its own is when you need to do padding, number formatting, etcetera.","body":"I know this is a matter of opinion, but I don&#39;t see how <code>format</code> is more attractive than a simple String concatenation expression.  Where <code>format</code> comes into its own is when you need to do padding, number formatting, etcetera."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1331377690,"post_id":9643624,"comment_id":12246586,"body_markdown":"@StephenC: I don&#39;t disagree with you at all. But it is a useful alternative for String formatting especially when needing to do padding as you say and as I say above (i.e., to show tabular numeric data). I&#39;ve used it quite a bit for formatting blood chemistry and CBC result reports.","body":"@StephenC: I don&#39;t disagree with you at all. But it is a useful alternative for String formatting especially when needing to do padding as you say and as I say above (i.e., to show tabular numeric data). I&#39;ve used it quite a bit for formatting blood chemistry and CBC result reports."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1331849387,"post_id":9643624,"comment_id":12370839,"body_markdown":"@StephenC I like format for a few reasons: first of all, &#39;%d&#39; uses the platform line delimiter. Second, you can easily find all variables at the end. You can easily reformat or even reorder the variables you input. It&#39;s easier to avoid mistakes (like `1 + &quot;oops&quot;`), especially if you use FindBugs (which parses format strings and input parameters). And, as the asker says, in many cases it&#39;s more readable. Of course, it&#39;s a shame that the `format` method has been made static, that was a rather stupid design mistake.","body":"@StephenC I like format for a few reasons: first of all, &#39;%d&#39; uses the platform line delimiter. Second, you can easily find all variables at the end. You can easily reformat or even reorder the variables you input. It&#39;s easier to avoid mistakes (like <code>1 + &quot;oops&quot;</code>), especially if you use FindBugs (which parses format strings and input parameters). And, as the asker says, in many cases it&#39;s more readable. Of course, it&#39;s a shame that the <code>format</code> method has been made static, that was a rather stupid design mistake."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1331858354,"post_id":9643624,"comment_id":12372859,"body_markdown":"@owlstead - *&quot;Of course, it&#39;s a shame that the format method has been made static, that was a rather stupid design mistake.&quot;*.  Huh?  How would `format` relate to the target string?  Surely you are not suggesting that we should be expected to write `&quot;A String %s %2d&quot;.format(aStringVar, anIntVar)` ... are you?","body":"@owlstead - <i>&quot;Of course, it&#39;s a shame that the format method has been made static, that was a rather stupid design mistake.&quot;</i>.  Huh?  How would <code>format</code> relate to the target string?  Surely you are not suggesting that we should be expected to write <code>&quot;A String %s %2d&quot;.format(aStringVar, anIntVar)</code> ... are you?"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1331858640,"post_id":9643624,"comment_id":12372901,"body_markdown":"@StephenC And why not? Although renaming the method to e.g. `asFormat` would make more sense. Of course, the fact that Eclipse does not work that well with static imports makes it a bit more painful to use the current `String.format` as well.","body":"@StephenC And why not? Although renaming the method to e.g. <code>asFormat</code> would make more sense. Of course, the fact that Eclipse does not work that well with static imports makes it a bit more painful to use the current <code>String.format</code> as well."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1331869647,"post_id":9643624,"comment_id":12374771,"body_markdown":"@owlstead - *&quot;And why not?&quot;* - because I think that **most developers** would think it looks unnatural.  Anyway, I imagine that the Java designers considered this option.  The Eclipse issue is not relevant to the API design issue.  The Java designers cannot be blamed for faults in an IDE created by a different company.","body":"@owlstead - <i>&quot;And why not?&quot;</i> - because I think that <b>most developers</b> would think it looks unnatural.  Anyway, I imagine that the Java designers considered this option.  The Eclipse issue is not relevant to the API design issue.  The Java designers cannot be blamed for faults in an IDE created by a different company."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1331869821,"post_id":9643624,"comment_id":12374799,"body_markdown":"@owlstead - &quot;asFormat&quot; wouldn&#39;t be right.  It implies that the method is creating and returning a format object.","body":"@owlstead - &quot;asFormat&quot; wouldn&#39;t be right.  It implies that the method is creating and returning a format object."},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1552905115,"post_id":9643624,"comment_id":97173560,"body_markdown":"I have a reason. When I use `log4j` I use interpolation for `log.error()` and so on, and, immediately I will usually throw a custom exception with the same message, but I cannot quickly copy/paste the same string due to lack of interpolation in the same style. At that moment you start to wonder how to minimize the effort.","body":"I have a reason. When I use <code>log4j</code> I use interpolation for <code>log.error()</code> and so on, and, immediately I will usually throw a custom exception with the same message, but I cannot quickly copy/paste the same string due to lack of interpolation in the same style. At that moment you start to wonder how to minimize the effort."}],"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":8,"down_vote_count":1,"up_vote_count":186,"is_accepted":false,"score":185,"last_activity_date":1331349168,"creation_date":1331349168,"answer_id":9643624,"question_id":9643610,"body_markdown":"You can always use String.format(....).  i.e.,\r\n\r\n    String string = String.format(&quot;A String %s %2d&quot;, aStringVar, anIntVar);\r\n\r\nI&#39;m not sure if that is attractive enough for you, but it can be quite handy. The syntax is the same as for printf and java.util.Formatter. I&#39;ve used it much especially if I want to show tabular numeric data.","title":"How to including variables within strings?","body":"<p>You can always use String.format(....).  i.e.,</p>\n\n<pre><code>String string = String.format(\"A String %s %2d\", aStringVar, anIntVar);\n</code></pre>\n\n<p>I'm not sure if that is attractive enough for you, but it can be quite handy. The syntax is the same as for printf and java.util.Formatter. I've used it much especially if I want to show tabular numeric data.</p>\n"},{"tags":[],"owner":{"account_id":941,"reputation":50408,"user_id":1237,"accept_rate":95,"display_name":"Jacob Mattison"},"comment_count":0,"down_vote_count":0,"up_vote_count":98,"is_accepted":false,"score":98,"last_activity_date":1547040834,"creation_date":1331349318,"answer_id":9643634,"question_id":9643610,"body_markdown":"This is called string interpolation; it doesn&#39;t exist as such in Java.\r\n\r\nOne approach is to use String.format:\r\n\r\n    String string = String.format(&quot;A string %s&quot;, aVariable);\r\n\r\n\r\nAnother approach is to use a templating library such as [Velocity][1] or [FreeMarker][2].\r\n\r\n\r\n  [1]: http://velocity.apache.org/engine/index.html\r\n  [2]: https://freemarker.apache.org/","title":"How to including variables within strings?","body":"<p>This is called string interpolation; it doesn't exist as such in Java.</p>\n\n<p>One approach is to use String.format:</p>\n\n<pre><code>String string = String.format(\"A string %s\", aVariable);\n</code></pre>\n\n<p>Another approach is to use a templating library such as <a href=\"http://velocity.apache.org/engine/index.html\" rel=\"noreferrer\">Velocity</a> or <a href=\"https://freemarker.apache.org/\" rel=\"noreferrer\">FreeMarker</a>.</p>\n"},{"comments":[{"owner":{"account_id":1918903,"reputation":2974,"user_id":1730846,"accept_rate":60,"display_name":"Mojtaba"},"score":2,"creation_date":1503415507,"post_id":9643987,"comment_id":78601061,"body_markdown":"For somebody coming from CSharp this way is more straightforward since it is similar to string.Format in C#.","body":"For somebody coming from CSharp this way is more straightforward since it is similar to string.Format in C#."},{"owner":{"account_id":10329412,"reputation":119,"user_id":7619826,"display_name":"Satch"},"score":0,"creation_date":1686574524,"post_id":9643987,"comment_id":134812917,"body_markdown":"I much prefer this due to how clean and reusable a variable is, compared to the `String.format()` method.","body":"I much prefer this due to how clean and reusable a variable is, compared to the <code>String.format()</code> method."}],"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"comment_count":2,"down_vote_count":1,"up_vote_count":57,"is_accepted":false,"score":56,"last_activity_date":1481746480,"creation_date":1331354473,"answer_id":9643987,"question_id":9643610,"body_markdown":"Also consider [`java.text.MessageFormat`][1], which uses a related syntax having numeric argument indexes. For example,\r\n\r\n    String aVariable = &quot;of ponies&quot;;\r\n    String string = MessageFormat.format(&quot;A string {0}.&quot;, aVariable);\r\n\r\nresults in `string` containing the following:\r\n\r\n    A string of ponies.\r\n\r\nMore commonly, the class is used for its numeric and temporal formatting. An example of [`JFreeChart`][2] label formatting is described [here][3]; the class [`RCInfo`][4] formats a game&#39;s status pane.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html\r\n  [2]: https://stackoverflow.com/tags/jfreechart/info\r\n  [3]: https://stackoverflow.com/a/3551238/230513\r\n  [4]: https://sourceforge.net/p/robotchase/code/HEAD/tree/trunk/src/org/gcs/robot/RCInfo.java","title":"How to including variables within strings?","body":"<p>Also consider <a href=\"http://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html\" rel=\"noreferrer\"><code>java.text.MessageFormat</code></a>, which uses a related syntax having numeric argument indexes. For example,</p>\n\n<pre><code>String aVariable = \"of ponies\";\nString string = MessageFormat.format(\"A string {0}.\", aVariable);\n</code></pre>\n\n<p>results in <code>string</code> containing the following:</p>\n\n<pre><code>A string of ponies.\n</code></pre>\n\n<p>More commonly, the class is used for its numeric and temporal formatting. An example of <a href=\"https://stackoverflow.com/tags/jfreechart/info\"><code>JFreeChart</code></a> label formatting is described <a href=\"https://stackoverflow.com/a/3551238/230513\">here</a>; the class <a href=\"https://sourceforge.net/p/robotchase/code/HEAD/tree/trunk/src/org/gcs/robot/RCInfo.java\" rel=\"noreferrer\"><code>RCInfo</code></a> formats a game's status pane.</p>\n"},{"tags":[],"owner":{"account_id":13946866,"reputation":83,"user_id":10071408,"display_name":"alinn"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1595068413,"creation_date":1595068413,"answer_id":62967506,"question_id":9643610,"body_markdown":"you can use String format to include variables within strings\r\n\r\ni use this code to include 2 variable in string:\r\n\r\n&gt; String myString = String.format(&quot;this is my string %s %2d&quot;, variable1Name, variable2Name);\r\n\r\n","title":"How to including variables within strings?","body":"<p>you can use String format to include variables within strings</p>\n<p>i use this code to include 2 variable in string:</p>\n<blockquote>\n<p>String myString = String.format(&quot;this is my string %s %2d&quot;, variable1Name, variable2Name);</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":10368026,"reputation":479,"user_id":7646504,"display_name":"Domadin"},"comment_count":0,"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1602778196,"creation_date":1602778196,"answer_id":64375598,"question_id":9643610,"body_markdown":"Since Java 15, you can use a non-static string method called `String::formatted(Object... args)`\r\n\r\nExample:\r\n\r\n    String foo = &quot;foo&quot;;\r\n    String bar = &quot;bar&quot;;\r\n    \r\n    String str = &quot;First %s, then %s&quot;.formatted(foo, bar);     \r\n\r\nOutput:\r\n\r\n&gt; &quot;First foo, then bar&quot;\r\n\r\n","title":"How to including variables within strings?","body":"<p>Since Java 15, you can use a non-static string method called <code>String::formatted(Object... args)</code></p>\n<p>Example:</p>\n<pre><code>String foo = &quot;foo&quot;;\nString bar = &quot;bar&quot;;\n\nString str = &quot;First %s, then %s&quot;.formatted(foo, bar);     \n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>&quot;First foo, then bar&quot;</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1689790921,"creation_date":1618795542,"answer_id":67154928,"question_id":9643610,"body_markdown":"[Apache Commons Text](https://commons.apache.org/proper/commons-text/)&#39;s [`StringSubstitutor`](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringSubstitutor.html) can be used. See the library&#39;s [Dependency Information](https://commons.apache.org/proper/commons-text/dependency-info.html) for how to include it in a project.\r\n\r\n```\r\nimport org.apache.commons.text.StringSubstitutor;\r\n// ...\r\nMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\r\nvalues.put(&quot;animal&quot;, &quot;quick brown fox&quot;);\r\nvalues.put(&quot;target&quot;, &quot;lazy dog&quot;);\r\nStringSubstitutor sub = new StringSubstitutor(values);\r\nString result = sub.replace(&quot;The ${animal} jumped over the ${target}.&quot;);\r\n// &quot;The quick brown fox jumped over the lazy dog.&quot;\r\n```\r\n\r\nThis class supports providing default values for variables.\r\n\r\n```\r\nString result = sub.replace(&quot;The number is ${undefined.property:-42}.&quot;);\r\n// &quot;The number is 42.&quot;\r\n```\r\n\r\nTo use recursive variable replacement, call `setEnableSubstitutionInVariables(true);`.\r\n\r\n```\r\nMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\r\nvalues.put(&quot;b&quot;, &quot;c&quot;);\r\nvalues.put(&quot;ac&quot;, &quot;Test&quot;);\r\nStringSubstitutor sub = new StringSubstitutor(values);\r\nsub.setEnableSubstitutionInVariables(true);\r\nString result = sub.replace(&quot;${a${b}}&quot;);\r\n// &quot;Test&quot;\r\n```\r\n\r\nThe library can be found on [Maven central repository](https://central.sonatype.com/artifact/org.apache.commons/commons-text). This is the Maven dependency:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\r\n    &lt;version&gt;1.10.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"How to including variables within strings?","body":"<p><a href=\"https://commons.apache.org/proper/commons-text/\" rel=\"nofollow noreferrer\">Apache Commons Text</a>'s <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringSubstitutor.html\" rel=\"nofollow noreferrer\"><code>StringSubstitutor</code></a> can be used. See the library's <a href=\"https://commons.apache.org/proper/commons-text/dependency-info.html\" rel=\"nofollow noreferrer\">Dependency Information</a> for how to include it in a project.</p>\n<pre><code>import org.apache.commons.text.StringSubstitutor;\n// ...\nMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\nvalues.put(&quot;animal&quot;, &quot;quick brown fox&quot;);\nvalues.put(&quot;target&quot;, &quot;lazy dog&quot;);\nStringSubstitutor sub = new StringSubstitutor(values);\nString result = sub.replace(&quot;The ${animal} jumped over the ${target}.&quot;);\n// &quot;The quick brown fox jumped over the lazy dog.&quot;\n</code></pre>\n<p>This class supports providing default values for variables.</p>\n<pre><code>String result = sub.replace(&quot;The number is ${undefined.property:-42}.&quot;);\n// &quot;The number is 42.&quot;\n</code></pre>\n<p>To use recursive variable replacement, call <code>setEnableSubstitutionInVariables(true);</code>.</p>\n<pre><code>Map&lt;String, String&gt; values = new HashMap&lt;&gt;();\nvalues.put(&quot;b&quot;, &quot;c&quot;);\nvalues.put(&quot;ac&quot;, &quot;Test&quot;);\nStringSubstitutor sub = new StringSubstitutor(values);\nsub.setEnableSubstitutionInVariables(true);\nString result = sub.replace(&quot;${a${b}}&quot;);\n// &quot;Test&quot;\n</code></pre>\n<p>The library can be found on <a href=\"https://central.sonatype.com/artifact/org.apache.commons/commons-text\" rel=\"nofollow noreferrer\">Maven central repository</a>. This is the Maven dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\n    &lt;version&gt;1.10.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":238665,"reputation":3967,"user_id":507708,"accept_rate":67,"display_name":"Gray Adams"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":413122,"favorite_count":0,"down_vote_count":1,"up_vote_count":183,"closed_date":1625393663,"answer_count":6,"score":182,"last_activity_date":1689790921,"creation_date":1331348976,"question_id":9643610,"body_markdown":"So, we all should know that you can include variables into strings by doing:\r\n\r\n    String string = &quot;A string &quot; + aVariable;\r\n\r\nIs there a way to do it like:\r\n\r\n    String string = &quot;A string {aVariable}&quot;;\r\n\r\n*In other words:* Without having to close the quotation marks and adding plus signs. It&#39;s very unattractive.\r\n\r\n","title":"How to including variables within strings?","body":"<p>So, we all should know that you can include variables into strings by doing:</p>\n<pre><code>String string = &quot;A string &quot; + aVariable;\n</code></pre>\n<p>Is there a way to do it like:</p>\n<pre><code>String string = &quot;A string {aVariable}&quot;;\n</code></pre>\n<p><em>In other words:</em> Without having to close the quotation marks and adding plus signs. It's very unattractive.</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689790728,"creation_date":1689790728,"answer_id":76724196,"question_id":76723939,"body_markdown":"In the City entity you should add `mapped by` like this:\r\n```\r\n@OneToMany(mappedBy=&quot;city&quot;)\r\n    private List&lt;Address&gt; addresses;\r\n```\r\nBased on: [https://www.baeldung.com/hibernate-one-to-many][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/hibernate-one-to-many","title":"Hibernate Schema-validation: missing table","body":"<p>In the City entity you should add <code>mapped by</code> like this:</p>\n<pre><code>@OneToMany(mappedBy=&quot;city&quot;)\n    private List&lt;Address&gt; addresses;\n</code></pre>\n<p>Based on: <a href=\"https://www.baeldung.com/hibernate-one-to-many\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-one-to-many</a></p>\n"}],"owner":{"account_id":18549916,"reputation":33,"user_id":13516377,"display_name":"AslanH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":401,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76724196,"answer_count":1,"score":0,"last_activity_date":1689790728,"creation_date":1689788476,"question_id":76723939,"body_markdown":"I am becoming really confused with the issues I am confronting.\r\n\r\nI am getting this error:\r\n\r\n&gt; Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource \\[org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class\\]: \\[PersistenceUnit: default\\] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table \\[cities_addresses\\]\r\n\r\nHere is the code to my class Address:\r\n\r\n```\r\npackage com.bestinsurance.api.domain;\r\n\r\nimport jakarta.persistence.*;\r\n\r\nimport java.util.Objects;\r\nimport java.util.UUID;\r\n\r\n@Entity\r\n@Table(name = &quot;addresses&quot;)\r\npublic class Address {\r\n    @Id\r\n    @Column(nullable = false, updatable = false)\r\n    @GeneratedValue\r\n    private UUID addressId;\r\n\r\n    @Column(nullable = false, updatable = false)\r\n    private String address;\r\n\r\n    @Column(nullable = false, updatable = false)\r\n    private String postalCode;\r\n\r\n    @OneToOne(mappedBy = &quot;address&quot;)\r\n    private Customer customer;\r\n\r\n    @ManyToOne()\r\n    @JoinColumn(name = &quot;country_id&quot;)\r\n    private Country country;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;city_id&quot;)\r\n    private City city;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;state_id&quot;)\r\n    private State state;\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass()) return false;\r\n\r\n        Address address = (Address) o;\r\n\r\n        return Objects.equals(addressId, address.addressId);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return addressId != null ? addressId.hashCode() : 0;\r\n    }\r\n\r\n    public UUID getAddressId() {\r\n        return addressId;\r\n    }\r\n\r\n    public String getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(String address) {\r\n        this.address = address;\r\n    }\r\n\r\n    public String getPostalCode() {\r\n        return postalCode;\r\n    }\r\n\r\n    public void setPostalCode(String postalCode) {\r\n        this.postalCode = postalCode;\r\n    }\r\n\r\n    public Customer getCustomer() {\r\n        return customer;\r\n    }\r\n\r\n    public void setCustomer(Customer customer) {\r\n        this.customer = customer;\r\n    }\r\n\r\n    public Country getCountry() {\r\n        return country;\r\n    }\r\n\r\n    public void setCountry(Country country) {\r\n        this.country = country;\r\n    }\r\n\r\n    public City getCity() {\r\n        return city;\r\n    }\r\n\r\n    public void setCity(City city) {\r\n        this.city = city;\r\n    }\r\n\r\n    public State getState() {\r\n        return state;\r\n    }\r\n\r\n    public void setState(State state) {\r\n        this.state = state;\r\n    }\r\n}\r\n```\r\n\r\nThe code to my class City\r\n\r\n```\r\npackage com.bestinsurance.api.domain;\r\n\r\nimport jakarta.persistence.*;\r\n\r\nimport java.util.Collection;\r\nimport java.util.List;\r\nimport java.util.Objects;\r\nimport java.util.UUID;\r\n\r\n@Entity\r\n@Table(name = &quot;cities&quot;)\r\npublic class City {\r\n\r\n    @Id\r\n    @Column(nullable = false, updatable = false)\r\n    @GeneratedValue\r\n    private UUID cityId;\r\n\r\n    @Column(nullable = false, updatable = false)\r\n    private String name;\r\n\r\n    @Column(nullable = false, updatable = false)\r\n    private int population;\r\n\r\n    @OneToMany\r\n    private List&lt;Address&gt; addresses;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;country_id&quot;)\r\n    private Country country;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;state_id&quot;)\r\n    private State state;\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass()) return false;\r\n\r\n        City city = (City) o;\r\n\r\n        return Objects.equals(cityId, city.cityId);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return cityId != null ? cityId.hashCode() : 0;\r\n    }\r\n\r\n    public UUID getCityId() {\r\n        return cityId;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public int getPopulation() {\r\n        return population;\r\n    }\r\n\r\n    public void setPopulation(int population) {\r\n        this.population = population;\r\n    }\r\n\r\n    public List&lt;Address&gt; getAddresses() {\r\n        return addresses;\r\n    }\r\n\r\n    public void setAddresses(List&lt;Address&gt; addresses) {\r\n        this.addresses = addresses;\r\n    }\r\n\r\n    public Country getCountry() {\r\n        return country;\r\n    }\r\n\r\n    public void setCountry(Country country) {\r\n        this.country = country;\r\n    }\r\n\r\n    public State getState() {\r\n        return state;\r\n    }\r\n\r\n    public void setState(State state) {\r\n        this.state = state;\r\n    }\r\n}\r\n```\r\n\r\nThe Schema I am working with:\r\n\r\n```\r\n--liquibase formatted sql\r\n--changeset aslan:001-changeset1.sql splitStatements:false\r\nCREATE TABLE Countries\r\n(\r\n    country_id uuid PRIMARY KEY NOT NULL,\r\n    name       VARCHAR(64)      NOT NULL,\r\n    population int\r\n);\r\n\r\nCREATE TABLE States\r\n(\r\n    state_id   uuid PRIMARY KEY                       NOT NULL,\r\n    country_id uuid REFERENCES Countries (country_id) NOT NULL,\r\n    name       VARCHAR(64)                            NOT NULL,\r\n    population int\r\n);\r\n\r\nCREATE TABLE Cities\r\n(\r\n    city_id    uuid PRIMARY KEY                       NOT NULL,\r\n    country_id uuid REFERENCES Countries (country_id) NOT NULL,\r\n    state_id   uuid REFERENCES States (state_id),\r\n    name       VARCHAR(64)                            NOT NULL,\r\n    population int\r\n\r\n);\r\n\r\nCREATE TABLE Addresses\r\n(\r\n    address_id  uuid PRIMARY KEY                       NOT NULL,\r\n    country_id  uuid REFERENCES Countries (country_id) NOT NULL,\r\n    city_id     uuid REFERENCES Cities (city_id)       NOT NULL,\r\n    state_id    uuid REFERENCES States (state_id)      NOT NULL,\r\n    address     VARCHAR(128)                           NOT NULL,\r\n    postal_code VARCHAR(16)\r\n);\r\n\r\nCREATE TABLE Customers\r\n(\r\n    customer uuid PRIMARY KEY         NOT NULL,\r\n    name     VARCHAR(64)              NOT NULL,\r\n    surname  VARCHAR(64)              NOT NULL,\r\n    email    VARCHAR(320)             NOT NULL,\r\n    created  timestamp with time zone NOT NULL,\r\n    updated  timestamp with time zone NOT NULL,\r\n    address  uuid REFERENCES Addresses (address_id) UNIQUE\r\n);\r\n\r\nCREATE TABLE Coverages\r\n(\r\n    coverage_id uuid PRIMARY KEY NOT NULL,\r\n    name        VARCHAR(16)      NOT NULL,\r\n    description TEXT\r\n);\r\n\r\nCREATE TABLE Policies\r\n(\r\n    policy_id   uuid PRIMARY KEY         NOT NULL,\r\n    name        VARCHAR(16)              NOT NULL,\r\n    description TEXT,\r\n    price       NUMERIC(4, 2)            NOT NULL,\r\n    created     timestamp with time zone NOT NULL,\r\n    updated     timestamp with time zone NOT NULL\r\n);\r\n\r\nCREATE TABLE Policies_Coverages\r\n(\r\n    coverage_id uuid REFERENCES Coverages (coverage_id) NOT NULL,\r\n    policy_id   uuid REFERENCES Policies (policy_id)    NOT NULL\r\n);\r\n\r\nCREATE TABLE Subscriptions\r\n(\r\n    policy_id   uuid REFERENCES Policies (policy_id) NOT NULL,\r\n    customer_id uuid REFERENCES Customers (customer) NOT NULL,\r\n    start_date  date                                 NOT NULL,\r\n    end_date    date                                 NOT NULL,\r\n    paid_price  numeric(4, 2)                        NOT NULL,\r\n    created     timestamp with time zone             NOT NULL,\r\n    updated     timestamp with time zone             NOT NULL,\r\n    PRIMARY KEY (policy_id, customer_id)\r\n);\r\n```\r\n\r\nAnd my application.properties file that is in the test folder since I am using testcontainers\r\n\r\n```\r\n# application.properties for PostgreSQL\r\n## Spring DATASOURCE (DataSourceAutoConfiguration &amp; DataSourceProperties)\r\nspring.datasource.url=jdbc:tc:postgresql:14.5-alpine:///\r\nspring.datasource.username=test-pg\r\nspring.datasource.password=test-pg\r\n\r\n# Disable feature detection by this undocumented parameter. Check the org.hibernate.engine.jdbc.internal.JdbcServiceImpl.configure method for more details.\r\nspring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults = false\r\n\r\n# Because detection is disabled you have to set correct dialect by hand.\r\n#spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL95Dialect\r\n# IF YOU ARE USING SPRING 3.1.X JUST COMMENT THE PREVIOUS AND UNCOMMENT THE FOLLOWING\r\n spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect\r\n\r\n# The SQL dialect makes Hibernate generate better SQL for the chosen database\r\n#spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQL95Dialect\r\n# IF YOU ARE USING SPRING 3.1.X JUST COMMENT THE PREVIOUS AND UNCOMMENT THE FOLLOWING\r\n spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\r\n\r\nspring.jpa.hibernate.show_sql=true\r\nspring.jpa.hibernate.format_sql=true\r\n\r\n# Hibernate ddl auto (create, create-drop, validate, update)\r\nspring.jpa.hibernate.ddl-auto = validate\r\n\r\n#This is expected from the status rest service\r\napi.version=1.0\r\n```\r\nCan anyone explain where exactly is my mistake that is triggering this issue.\r\n\r\nBefore getting this error the @JoinColumn(name = &quot;city_id&quot;) was in city class and looked like this:\r\n\r\n```\r\n @OneToMany\r\n @JoinColumn(name = &quot;city_id&quot;)\r\n    private List&lt;Address&gt; addresses;\r\n```\r\n\r\nWhich was mapping the one-to-many relationship between address and city. But was getting error that looked like this\r\n\r\n&gt; EntityManagerFactory: \\[PersistenceUnit: default\\] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column \\[city_city_id\\] in table \\[addresses\\]","title":"Hibernate Schema-validation: missing table","body":"<p>I am becoming really confused with the issues I am confronting.</p>\n<p>I am getting this error:</p>\n<blockquote>\n<p>Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [cities_addresses]</p>\n</blockquote>\n<p>Here is the code to my class Address:</p>\n<pre><code>package com.bestinsurance.api.domain;\n\nimport jakarta.persistence.*;\n\nimport java.util.Objects;\nimport java.util.UUID;\n\n@Entity\n@Table(name = &quot;addresses&quot;)\npublic class Address {\n    @Id\n    @Column(nullable = false, updatable = false)\n    @GeneratedValue\n    private UUID addressId;\n\n    @Column(nullable = false, updatable = false)\n    private String address;\n\n    @Column(nullable = false, updatable = false)\n    private String postalCode;\n\n    @OneToOne(mappedBy = &quot;address&quot;)\n    private Customer customer;\n\n    @ManyToOne()\n    @JoinColumn(name = &quot;country_id&quot;)\n    private Country country;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;city_id&quot;)\n    private City city;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;state_id&quot;)\n    private State state;\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        Address address = (Address) o;\n\n        return Objects.equals(addressId, address.addressId);\n    }\n\n    @Override\n    public int hashCode() {\n        return addressId != null ? addressId.hashCode() : 0;\n    }\n\n    public UUID getAddressId() {\n        return addressId;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getPostalCode() {\n        return postalCode;\n    }\n\n    public void setPostalCode(String postalCode) {\n        this.postalCode = postalCode;\n    }\n\n    public Customer getCustomer() {\n        return customer;\n    }\n\n    public void setCustomer(Customer customer) {\n        this.customer = customer;\n    }\n\n    public Country getCountry() {\n        return country;\n    }\n\n    public void setCountry(Country country) {\n        this.country = country;\n    }\n\n    public City getCity() {\n        return city;\n    }\n\n    public void setCity(City city) {\n        this.city = city;\n    }\n\n    public State getState() {\n        return state;\n    }\n\n    public void setState(State state) {\n        this.state = state;\n    }\n}\n</code></pre>\n<p>The code to my class City</p>\n<pre><code>package com.bestinsurance.api.domain;\n\nimport jakarta.persistence.*;\n\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.UUID;\n\n@Entity\n@Table(name = &quot;cities&quot;)\npublic class City {\n\n    @Id\n    @Column(nullable = false, updatable = false)\n    @GeneratedValue\n    private UUID cityId;\n\n    @Column(nullable = false, updatable = false)\n    private String name;\n\n    @Column(nullable = false, updatable = false)\n    private int population;\n\n    @OneToMany\n    private List&lt;Address&gt; addresses;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;country_id&quot;)\n    private Country country;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;state_id&quot;)\n    private State state;\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        City city = (City) o;\n\n        return Objects.equals(cityId, city.cityId);\n    }\n\n    @Override\n    public int hashCode() {\n        return cityId != null ? cityId.hashCode() : 0;\n    }\n\n    public UUID getCityId() {\n        return cityId;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getPopulation() {\n        return population;\n    }\n\n    public void setPopulation(int population) {\n        this.population = population;\n    }\n\n    public List&lt;Address&gt; getAddresses() {\n        return addresses;\n    }\n\n    public void setAddresses(List&lt;Address&gt; addresses) {\n        this.addresses = addresses;\n    }\n\n    public Country getCountry() {\n        return country;\n    }\n\n    public void setCountry(Country country) {\n        this.country = country;\n    }\n\n    public State getState() {\n        return state;\n    }\n\n    public void setState(State state) {\n        this.state = state;\n    }\n}\n</code></pre>\n<p>The Schema I am working with:</p>\n<pre><code>--liquibase formatted sql\n--changeset aslan:001-changeset1.sql splitStatements:false\nCREATE TABLE Countries\n(\n    country_id uuid PRIMARY KEY NOT NULL,\n    name       VARCHAR(64)      NOT NULL,\n    population int\n);\n\nCREATE TABLE States\n(\n    state_id   uuid PRIMARY KEY                       NOT NULL,\n    country_id uuid REFERENCES Countries (country_id) NOT NULL,\n    name       VARCHAR(64)                            NOT NULL,\n    population int\n);\n\nCREATE TABLE Cities\n(\n    city_id    uuid PRIMARY KEY                       NOT NULL,\n    country_id uuid REFERENCES Countries (country_id) NOT NULL,\n    state_id   uuid REFERENCES States (state_id),\n    name       VARCHAR(64)                            NOT NULL,\n    population int\n\n);\n\nCREATE TABLE Addresses\n(\n    address_id  uuid PRIMARY KEY                       NOT NULL,\n    country_id  uuid REFERENCES Countries (country_id) NOT NULL,\n    city_id     uuid REFERENCES Cities (city_id)       NOT NULL,\n    state_id    uuid REFERENCES States (state_id)      NOT NULL,\n    address     VARCHAR(128)                           NOT NULL,\n    postal_code VARCHAR(16)\n);\n\nCREATE TABLE Customers\n(\n    customer uuid PRIMARY KEY         NOT NULL,\n    name     VARCHAR(64)              NOT NULL,\n    surname  VARCHAR(64)              NOT NULL,\n    email    VARCHAR(320)             NOT NULL,\n    created  timestamp with time zone NOT NULL,\n    updated  timestamp with time zone NOT NULL,\n    address  uuid REFERENCES Addresses (address_id) UNIQUE\n);\n\nCREATE TABLE Coverages\n(\n    coverage_id uuid PRIMARY KEY NOT NULL,\n    name        VARCHAR(16)      NOT NULL,\n    description TEXT\n);\n\nCREATE TABLE Policies\n(\n    policy_id   uuid PRIMARY KEY         NOT NULL,\n    name        VARCHAR(16)              NOT NULL,\n    description TEXT,\n    price       NUMERIC(4, 2)            NOT NULL,\n    created     timestamp with time zone NOT NULL,\n    updated     timestamp with time zone NOT NULL\n);\n\nCREATE TABLE Policies_Coverages\n(\n    coverage_id uuid REFERENCES Coverages (coverage_id) NOT NULL,\n    policy_id   uuid REFERENCES Policies (policy_id)    NOT NULL\n);\n\nCREATE TABLE Subscriptions\n(\n    policy_id   uuid REFERENCES Policies (policy_id) NOT NULL,\n    customer_id uuid REFERENCES Customers (customer) NOT NULL,\n    start_date  date                                 NOT NULL,\n    end_date    date                                 NOT NULL,\n    paid_price  numeric(4, 2)                        NOT NULL,\n    created     timestamp with time zone             NOT NULL,\n    updated     timestamp with time zone             NOT NULL,\n    PRIMARY KEY (policy_id, customer_id)\n);\n</code></pre>\n<p>And my application.properties file that is in the test folder since I am using testcontainers</p>\n<pre><code># application.properties for PostgreSQL\n## Spring DATASOURCE (DataSourceAutoConfiguration &amp; DataSourceProperties)\nspring.datasource.url=jdbc:tc:postgresql:14.5-alpine:///\nspring.datasource.username=test-pg\nspring.datasource.password=test-pg\n\n# Disable feature detection by this undocumented parameter. Check the org.hibernate.engine.jdbc.internal.JdbcServiceImpl.configure method for more details.\nspring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults = false\n\n# Because detection is disabled you have to set correct dialect by hand.\n#spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL95Dialect\n# IF YOU ARE USING SPRING 3.1.X JUST COMMENT THE PREVIOUS AND UNCOMMENT THE FOLLOWING\n spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect\n\n# The SQL dialect makes Hibernate generate better SQL for the chosen database\n#spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQL95Dialect\n# IF YOU ARE USING SPRING 3.1.X JUST COMMENT THE PREVIOUS AND UNCOMMENT THE FOLLOWING\n spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\n\nspring.jpa.hibernate.show_sql=true\nspring.jpa.hibernate.format_sql=true\n\n# Hibernate ddl auto (create, create-drop, validate, update)\nspring.jpa.hibernate.ddl-auto = validate\n\n#This is expected from the status rest service\napi.version=1.0\n</code></pre>\n<p>Can anyone explain where exactly is my mistake that is triggering this issue.</p>\n<p>Before getting this error the @JoinColumn(name = &quot;city_id&quot;) was in city class and looked like this:</p>\n<pre><code> @OneToMany\n @JoinColumn(name = &quot;city_id&quot;)\n    private List&lt;Address&gt; addresses;\n</code></pre>\n<p>Which was mapping the one-to-many relationship between address and city. But was getting error that looked like this</p>\n<blockquote>\n<p>EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [city_city_id] in table [addresses]</p>\n</blockquote>\n"},{"tags":["java","collections","java-9"],"comments":[{"owner":{"account_id":914392,"reputation":5655,"user_id":947526,"accept_rate":46,"display_name":"C-Otto"},"score":1,"creation_date":1506341723,"post_id":46404933,"comment_id":79767239,"body_markdown":"What kind of difference are you looking for? The method names differ, but the resulting data structures behave extremely similar.","body":"What kind of difference are you looking for? The method names differ, but the resulting data structures behave extremely similar."},{"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"score":2,"creation_date":1506342580,"post_id":46404933,"comment_id":79767822,"body_markdown":"@C-Otto If you claim that the methods are just &#39;extremely similar&#39; (and not identical), you must obviously think that there is a difference.","body":"@C-Otto If you claim that the methods are just &#39;extremely similar&#39; (and not identical), you must obviously think that there is a difference."},{"owner":{"account_id":6014409,"reputation":15634,"user_id":4723795,"accept_rate":82,"display_name":"xenteros"},"score":0,"creation_date":1506342713,"post_id":46404933,"comment_id":79767909,"body_markdown":"@jarnbjo there are differences - see my answer","body":"@jarnbjo there are differences - see my answer"},{"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"score":0,"creation_date":1506343229,"post_id":46404933,"comment_id":79768263,"body_markdown":"@xenteros The question is valid enough and there are relevant differences in the returned objects, not just the specific class (as you point  out in your answer), but also how the classes are implemented and behave. I just don&#39;t see the point in C-Otto&#39;s comment asking for &#39;what kind of difference the OP is looking for&#39;. Yes, there are differences between the returned objects and a list of these differences might be an answer, although I am not 100% sure myself if the differences are just implementation specific or perhaps even bugs in the current state of OpenJDK 9.","body":"@xenteros The question is valid enough and there are relevant differences in the returned objects, not just the specific class (as you point  out in your answer), but also how the classes are implemented and behave. I just don&#39;t see the point in C-Otto&#39;s comment asking for &#39;what kind of difference the OP is looking for&#39;. Yes, there are differences between the returned objects and a list of these differences might be an answer, although I am not 100% sure myself if the differences are just implementation specific or perhaps even bugs in the current state of OpenJDK 9."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":3,"creation_date":1506355665,"post_id":46404933,"comment_id":79776903,"body_markdown":"See also: https://stackoverflow.com/questions/40888754/usage-of-java-9-collection-factories/40943796#40943796","body":"See also: <a href=\"https://stackoverflow.com/questions/40888754/usage-of-java-9-collection-factories/40943796#40943796\" title=\"usage of java 9 collection factories\">stackoverflow.com/questions/40888754/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":4859,"reputation":40443,"user_id":7512,"accept_rate":75,"display_name":"slim"},"score":0,"creation_date":1506346142,"post_id":46406203,"comment_id":79770360,"body_markdown":"+1 This is good. Maybe, when you draw attention to &quot;as pointed out in the API documentation&quot;, specify the section in all the collection types: *&quot;Immutable &lt;type&gt; Static Factory Methods&quot;* where the properties of these instances are explained.","body":"+1 This is good. Maybe, when you draw attention to &quot;as pointed out in the API documentation&quot;, specify the section in all the collection types: <i>&quot;Immutable &lt;type&gt; Static Factory Methods&quot;</i> where the properties of these instances are explained."},{"owner":{"account_id":4859,"reputation":40443,"user_id":7512,"accept_rate":75,"display_name":"slim"},"score":0,"creation_date":1506346149,"post_id":46406203,"comment_id":79770370,"body_markdown":"Also &quot;sanely&quot; is debatable -- NPE is arguably more sane, but not backward-compatible.","body":"Also &quot;sanely&quot; is debatable -- NPE is arguably more sane, but not backward-compatible."},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":8,"creation_date":1506346568,"post_id":46406203,"comment_id":79770679,"body_markdown":"@slim there is no issue with backward compatibility here. The `X.of()` methods are new, and not intended as direct replacements of the `Collections.emptyX()` methods. Existing code will continue to work as in older Java versions.","body":"@slim there is no issue with backward compatibility here. The <code>X.of()</code> methods are new, and not intended as direct replacements of the <code>Collections.emptyX()</code> methods. Existing code will continue to work as in older Java versions."},{"owner":{"account_id":4859,"reputation":40443,"user_id":7512,"accept_rate":75,"display_name":"slim"},"score":3,"creation_date":1506346781,"post_id":46406203,"comment_id":79770837,"body_markdown":"@Jesper it&#39;s worth pointing out that you can&#39;t go into your old code and globally replace `Collections.emptySet()` with `Set.of()` without expecting a change in behaviour. Especially as several people (including me) wrongly  gave an answer suggesting you could do just that.","body":"@Jesper it&#39;s worth pointing out that you can&#39;t go into your old code and globally replace <code>Collections.emptySet()</code> with <code>Set.of()</code> without expecting a change in behaviour. Especially as several people (including me) wrongly  gave an answer suggesting you could do just that."},{"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"score":1,"creation_date":1506346833,"post_id":46406203,"comment_id":79770879,"body_markdown":"@Jesper My intuitive understanding of the new `of` factory methods would be that they are not introducing new behaviour or restrictions to the collections. One may dispute if it was correct for the original collections API to support null values and keys, but since it was done that way, I find it both unintuitive and surprising that new factory methods create collections, which do not support null.","body":"@Jesper My intuitive understanding of the new <code>of</code> factory methods would be that they are not introducing new behaviour or restrictions to the collections. One may dispute if it was correct for the original collections API to support null values and keys, but since it was done that way, I find it both unintuitive and surprising that new factory methods create collections, which do not support null."},{"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"score":5,"creation_date":1506350723,"post_id":46406203,"comment_id":79773619,"body_markdown":"That behavior is not &quot;new&quot;. Map and Set are interfaces. Interfaces permit different implementations. Some implementations support null values, others do not. E.g. ConcurrentSkipListMap would also throw NPE on `containsKey(null)`. The interface documentation says as much.","body":"That behavior is not &quot;new&quot;. Map and Set are interfaces. Interfaces permit different implementations. Some implementations support null values, others do not. E.g. ConcurrentSkipListMap would also throw NPE on <code>containsKey(null)</code>. The interface documentation says as much."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1506369656,"post_id":46406203,"comment_id":79784338,"body_markdown":"@the8472 well yes; but even the jdk devs find collections that support nulls shortcomings of the early implementations.","body":"@the8472 well yes; but even the jdk devs find collections that support nulls shortcomings of the early implementations."}],"tags":[],"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"comment_count":7,"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1689790317,"creation_date":1506345319,"answer_id":46406203,"question_id":46404933,"body_markdown":"**Yes**, there are even behavioral and not just technical differences between the collections returned by the `emptyXyz` factory methods in the `Collections` class and the new `of` factory methods introduced in the interfaces (`Map`, `List`, `Set`) with JDK 9, if these are invoked with no arguments.\r\n\r\nThe relevant difference is that the collections returned by the new `of` factory methods disallow `null` elements, keys and values (as pointed out in the API documentation in the [List][1], [Set][2] and [Map][3] interfaces). This might sound irrelvant for empty collections, but even if it is not quite clearly documented, even the accessor methods in the new collection implementations check for `null` values. \r\n\r\nSome examples of the differences:\r\n\r\n`Collections.emptyList().contains(null)` will return false, while `List.of().contains(null)` will throw a `NullPointerException`.\r\n\r\n`Collections.emptyMap().getOrDefault(null, V)` will return `V`, while `Map.of().getOrDefault(null, V)` will throw a `NullPointerException`.\r\n\r\nAs currently implemented in Oracle&#39;s JDK 9, at least the following methods on the collections returned by the new factory methods will throw `NullPointerException`s, but behave &#39;sanely&#39; (as in how the collection classes were originally designed and specified to support null keys and values) using the old factory methods in the `Collections` class:\r\n\r\n- `List.of().contains(null);`\r\n- `Set.of().contains(null);`\r\n- `Map.of().containsKey(null);`\r\n- `Map.of().containsValue(null);`\r\n- `Map.of().getOrDefault(null, &lt;any&gt;);`\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#unmodifiable\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#unmodifiable\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#unmodifiable","title":"Map.of() vs. Collections.emptyMap()","body":"<p><strong>Yes</strong>, there are even behavioral and not just technical differences between the collections returned by the <code>emptyXyz</code> factory methods in the <code>Collections</code> class and the new <code>of</code> factory methods introduced in the interfaces (<code>Map</code>, <code>List</code>, <code>Set</code>) with JDK 9, if these are invoked with no arguments.</p>\n<p>The relevant difference is that the collections returned by the new <code>of</code> factory methods disallow <code>null</code> elements, keys and values (as pointed out in the API documentation in the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#unmodifiable\" rel=\"nofollow noreferrer\">List</a>, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#unmodifiable\" rel=\"nofollow noreferrer\">Set</a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#unmodifiable\" rel=\"nofollow noreferrer\">Map</a> interfaces). This might sound irrelvant for empty collections, but even if it is not quite clearly documented, even the accessor methods in the new collection implementations check for <code>null</code> values.</p>\n<p>Some examples of the differences:</p>\n<p><code>Collections.emptyList().contains(null)</code> will return false, while <code>List.of().contains(null)</code> will throw a <code>NullPointerException</code>.</p>\n<p><code>Collections.emptyMap().getOrDefault(null, V)</code> will return <code>V</code>, while <code>Map.of().getOrDefault(null, V)</code> will throw a <code>NullPointerException</code>.</p>\n<p>As currently implemented in Oracle's JDK 9, at least the following methods on the collections returned by the new factory methods will throw <code>NullPointerException</code>s, but behave 'sanely' (as in how the collection classes were originally designed and specified to support null keys and values) using the old factory methods in the <code>Collections</code> class:</p>\n<ul>\n<li><code>List.of().contains(null);</code></li>\n<li><code>Set.of().contains(null);</code></li>\n<li><code>Map.of().containsKey(null);</code></li>\n<li><code>Map.of().containsValue(null);</code></li>\n<li><code>Map.of().getOrDefault(null, &lt;any&gt;);</code></li>\n</ul>\n"}],"owner":{"account_id":3090265,"reputation":8447,"user_id":2616537,"accept_rate":33,"display_name":"msayag"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5749,"favorite_count":0,"down_vote_count":3,"up_vote_count":48,"answer_count":1,"score":45,"last_activity_date":1689790317,"creation_date":1506341423,"question_id":46404933,"body_markdown":"Is there a difference between `Map.of()` and `Collections.emptyMap()`, between `List.of()` and `Collections.emptyList()` and between `Set.of()` and `Collections.emptySet()`?","title":"Map.of() vs. Collections.emptyMap()","body":"<p>Is there a difference between <code>Map.of()</code> and <code>Collections.emptyMap()</code>, between <code>List.of()</code> and <code>Collections.emptyList()</code> and between <code>Set.of()</code> and <code>Collections.emptySet()</code>?</p>\n"},{"tags":["java","spring-boot","hibernate"],"owner":{"account_id":29051307,"reputation":21,"user_id":22254068,"display_name":"tmaksimenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1689790038,"creation_date":1689790038,"question_id":76724105,"body_markdown":"I&#39;m a student working on a fairly simple CRUD web application using Spring Boot, Hibernate and Swagger UI. I was thinking of saving a List&lt;MyDto&gt; field into my Account table as a single column, as \r\n1. there is no need to query based on this field\r\n2. it does not need to be accessed separately from the Account entity\r\n3. it does not need individual items within to be accessed, only created, read or deleted as a whole i.e. no performance incentive from using a separate Entity\r\n\r\n\r\nI tried to follow two articles that suggested using AbstractSingleColumnStandardBasicType, from [Thorben Janssen](https://thorben-janssen.com/collections-hibernate-jpa/#:~:text=much%20better%20performance.-,Map%20a%20Collection%20as%20a%20Basic%20Type,-Hibernate%20can%20map) and from [Baeldung](https://www.baeldung.com/hibernate-custom-types), but both used AbstractTypeDescriptor, which (after some time of searching) I determined was no longer part of Hibernate from the 6.0 release onward. This brings me to the question: how is AbstractSingleColumnStandardBasicType meant to be used in Hibernate&#39;s latest version and is custom object single column mapping still possible?\r\n\r\nNote, I did try to work through the documentation at docs.jboss.org and could not make sense of it. I didn&#39;t like the idea of using @ElementCollection because of the extra table generated, which seemed unnecessary for my use case, but will do so for the sake of a working implementation.\r\n\r\nI also saw [this](https://stackoverflow.com/questions/76418374/how-do-i-handle-custom-types-in-hibernate-6) question about the same problem and lack of clarity, but as I don&#39;t know Kotlin and that question was about UUID rather than a List&lt;MiscObject&gt;, I didn&#39;t get much from it.","title":"How does Hibernate&#39;s custom type mapping (AbstractSingleColumnStandardBasicType) work in Hibernate 6?","body":"<p>I'm a student working on a fairly simple CRUD web application using Spring Boot, Hibernate and Swagger UI. I was thinking of saving a List field into my Account table as a single column, as</p>\n<ol>\n<li>there is no need to query based on this field</li>\n<li>it does not need to be accessed separately from the Account entity</li>\n<li>it does not need individual items within to be accessed, only created, read or deleted as a whole i.e. no performance incentive from using a separate Entity</li>\n</ol>\n<p>I tried to follow two articles that suggested using AbstractSingleColumnStandardBasicType, from <a href=\"https://thorben-janssen.com/collections-hibernate-jpa/#:%7E:text=much%20better%20performance.-,Map%20a%20Collection%20as%20a%20Basic%20Type,-Hibernate%20can%20map\" rel=\"nofollow noreferrer\">Thorben Janssen</a> and from <a href=\"https://www.baeldung.com/hibernate-custom-types\" rel=\"nofollow noreferrer\">Baeldung</a>, but both used AbstractTypeDescriptor, which (after some time of searching) I determined was no longer part of Hibernate from the 6.0 release onward. This brings me to the question: how is AbstractSingleColumnStandardBasicType meant to be used in Hibernate's latest version and is custom object single column mapping still possible?</p>\n<p>Note, I did try to work through the documentation at docs.jboss.org and could not make sense of it. I didn't like the idea of using @ElementCollection because of the extra table generated, which seemed unnecessary for my use case, but will do so for the sake of a working implementation.</p>\n<p>I also saw <a href=\"https://stackoverflow.com/questions/76418374/how-do-i-handle-custom-types-in-hibernate-6\">this</a> question about the same problem and lack of clarity, but as I don't know Kotlin and that question was about UUID rather than a List, I didn't get much from it.</p>\n"},{"tags":["java","primefaces","javabeans"],"answers":[{"comments":[{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1689789834,"post_id":76724050,"comment_id":135264772,"body_markdown":"I have tried both and I always getting the same value. I published bellow how I solve this issue.","body":"I have tried both and I always getting the same value. I published bellow how I solve this issue."},{"owner":{"account_id":235505,"reputation":10708,"user_id":502366,"display_name":"Melloware"},"score":0,"creation_date":1689789933,"post_id":76724050,"comment_id":135264788,"body_markdown":"What version of PrimeFaces are you using?  the above is working fine for me in PF 12.","body":"What version of PrimeFaces are you using?  the above is working fine for me in PF 12."}],"tags":[],"owner":{"account_id":235505,"reputation":10708,"user_id":502366,"display_name":"Melloware"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689789366,"creation_date":1689789366,"answer_id":76724050,"question_id":76723808,"body_markdown":"This works for me...\r\n\r\n```xml\r\n&lt;p:clock mode=&quot;server&quot; timeZone=&quot;UTC&quot; /&gt;\r\n&lt;p:clock mode=&quot;server&quot; timeZone=&quot;America/New_York&quot; /&gt;\r\n```\r\n\r\nresults in:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xMjNc.png","title":"How to get datetime in UTC format using Primefaces clock component?","body":"<p>This works for me...</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;p:clock mode=&quot;server&quot; timeZone=&quot;UTC&quot; /&gt;\n&lt;p:clock mode=&quot;server&quot; timeZone=&quot;America/New_York&quot; /&gt;\n</code></pre>\n<p>results in:</p>\n<p><a href=\"https://i.stack.imgur.com/xMjNc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xMjNc.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689789619,"creation_date":1689789619,"answer_id":76724072,"question_id":76723808,"body_markdown":"```java\r\nimport javax.annotation.PostConstruct;\r\nimport javax.faces.bean.ManagedBean;\r\nimport javax.faces.bean.ViewScoped;\r\nimport java.io.Serializable;\r\nimport java.time.LocalDateTime;\r\nimport java.time.ZoneOffset;\r\n\r\n@ManagedBean(name = &quot;utcClockBean&quot;)\r\n@ViewScoped\r\npublic class UTCClockBean  implements Serializable {\r\n\r\n \tprivate static final long serialVersionUID = 1L;\r\n\tprivate LocalDateTime currentTime;\r\n\t\r\n\tpublic UTCClockBean() {\r\n\t}\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n    \tcurrentTime = LocalDateTime.now(ZoneOffset.UTC);\r\n    }\r\n\r\n    public LocalDateTime getCurrentTime() {\r\n        return currentTime;\r\n    }\r\n    \r\n    public void setCurrentTime(LocalDateTime currentTime) {\r\n\t\tthis.currentTime = currentTime;\r\n\t}\r\n}\r\n```\r\n\r\n```html\r\n&lt;p:clock mode=&quot;server&quot; pattern=&quot;HH:mm&quot; value=&quot;#{utcClockBean.currentTime}&quot;/&gt;\r\n```\r\n","title":"How to get datetime in UTC format using Primefaces clock component?","body":"<pre class=\"lang-java prettyprint-override\"><code>import javax.annotation.PostConstruct;\nimport javax.faces.bean.ManagedBean;\nimport javax.faces.bean.ViewScoped;\nimport java.io.Serializable;\nimport java.time.LocalDateTime;\nimport java.time.ZoneOffset;\n\n@ManagedBean(name = &quot;utcClockBean&quot;)\n@ViewScoped\npublic class UTCClockBean  implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n    private LocalDateTime currentTime;\n    \n    public UTCClockBean() {\n    }\n\n    @PostConstruct\n    public void init() {\n        currentTime = LocalDateTime.now(ZoneOffset.UTC);\n    }\n\n    public LocalDateTime getCurrentTime() {\n        return currentTime;\n    }\n    \n    public void setCurrentTime(LocalDateTime currentTime) {\n        this.currentTime = currentTime;\n    }\n}\n</code></pre>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p:clock mode=&quot;server&quot; pattern=&quot;HH:mm&quot; value=&quot;#{utcClockBean.currentTime}&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76724072,"answer_count":2,"score":2,"last_activity_date":1689789619,"creation_date":1689787350,"question_id":76723808,"body_markdown":"I am trying to use PrimeFaces clock component and get the current datetime in UTC format. However, I have tried several time zones and always date the same value.\r\n```html\r\n&lt;p:clock pattern=&quot;HH:mm&quot; mode=&quot;server&quot; timeZone=&quot;Europe/Warsaw&quot;&gt;&lt;/p:clock&gt;\r\n```\r\n This question is the same that \r\nhttps://stackoverflow.com/questions/51263039/primefaces-clock-component-is-not-working-as-per-the-timezone-attribute-value, but I consider its answer is not a right solution.\r\n\r\nI have tried creating my own DateTimeGenerator and it works, however my app is a SPA and I would like the current datetime field be always shown in the header, and it change automatically. I could use ajax requests, but I think it would be great if I could use Primefaces Clock component instead:\r\n```java\r\nimport javax.annotation.PostConstruct;\r\nimport javax.faces.bean.ApplicationScoped;\r\nimport javax.faces.bean.ManagedBean;\r\nimport javax.faces.bean.ViewScoped;\r\nimport java.io.Serializable;\r\nimport java.time.LocalDateTime;\r\nimport java.time.ZoneOffset;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.Timer;\r\nimport java.util.TimerTask;\r\n\r\n@ManagedBean(name = &quot;utcClockBean&quot;)\r\n@ApplicationScoped\r\npublic class UTCClockBean  implements Serializable {\r\n\r\n \tprivate static final long serialVersionUID = 1L;\r\n\tprivate String currentTime;\r\n\t\r\n\tpublic UTCClockBean() {\r\n\t}\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;);\r\n    \tTimerTask task = new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                currentTime = LocalDateTime.now(ZoneOffset.UTC).format(formatter);\r\n            }\r\n        };\r\n\r\n        Timer timer = new Timer();\r\n        timer.scheduleAtFixedRate(task, 0, 1000);\r\n    }\r\n\r\n    public String getCurrentTime() {\r\n        return currentTime;\r\n    }\r\n    \r\n    public void setCurrentTime(String currentTime) {\r\n\t\tthis.currentTime = currentTime;\r\n\t}\r\n}\r\n```\r\n","title":"How to get datetime in UTC format using Primefaces clock component?","body":"<p>I am trying to use PrimeFaces clock component and get the current datetime in UTC format. However, I have tried several time zones and always date the same value.</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p:clock pattern=&quot;HH:mm&quot; mode=&quot;server&quot; timeZone=&quot;Europe/Warsaw&quot;&gt;&lt;/p:clock&gt;\n</code></pre>\n<p>This question is the same that\n<a href=\"https://stackoverflow.com/questions/51263039/primefaces-clock-component-is-not-working-as-per-the-timezone-attribute-value\">Primefaces Clock component is not working as per the timezone attribute value</a>, but I consider its answer is not a right solution.</p>\n<p>I have tried creating my own DateTimeGenerator and it works, however my app is a SPA and I would like the current datetime field be always shown in the header, and it change automatically. I could use ajax requests, but I think it would be great if I could use Primefaces Clock component instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.annotation.PostConstruct;\nimport javax.faces.bean.ApplicationScoped;\nimport javax.faces.bean.ManagedBean;\nimport javax.faces.bean.ViewScoped;\nimport java.io.Serializable;\nimport java.time.LocalDateTime;\nimport java.time.ZoneOffset;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Timer;\nimport java.util.TimerTask;\n\n@ManagedBean(name = &quot;utcClockBean&quot;)\n@ApplicationScoped\npublic class UTCClockBean  implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n    private String currentTime;\n    \n    public UTCClockBean() {\n    }\n\n    @PostConstruct\n    public void init() {\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;);\n        TimerTask task = new TimerTask() {\n            @Override\n            public void run() {\n                currentTime = LocalDateTime.now(ZoneOffset.UTC).format(formatter);\n            }\n        };\n\n        Timer timer = new Timer();\n        timer.scheduleAtFixedRate(task, 0, 1000);\n    }\n\n    public String getCurrentTime() {\n        return currentTime;\n    }\n    \n    public void setCurrentTime(String currentTime) {\n        this.currentTime = currentTime;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","adb","root","su"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1679303202,"post_id":75784313,"comment_id":133690635,"body_markdown":"Why do you want to invoke that activity? usually you simply execute `su` and the request prompt for adb shell is displayed.","body":"Why do you want to invoke that activity? usually you simply execute <code>su</code> and the request prompt for adb shell is displayed."},{"owner":{"account_id":20870509,"reputation":49,"user_id":15330587,"display_name":"Shubham Chakraborty"},"score":0,"creation_date":1679395902,"post_id":75784313,"comment_id":133710357,"body_markdown":"Yes, I do want to invole that activity &amp; moreover I want to explicitly call the prompt so that if permission denied by mistake then again it can be granted using the prompt.","body":"Yes, I do want to invole that activity &amp; moreover I want to explicitly call the prompt so that if permission denied by mistake then again it can be granted using the prompt."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1690121298,"post_id":76723994,"comment_id":135306043,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76723994/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28989235,"reputation":5,"user_id":22205400,"display_name":"Duck"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689788987,"creation_date":1689788987,"answer_id":76723994,"question_id":75784313,"body_markdown":"Try just using\r\n&#39;su&#39;\r\nI hope it helps","title":"How to invoke the super user request prompt from the commandline","body":"<p>Try just using\n'su'\nI hope it helps</p>\n"}],"owner":{"account_id":20870509,"reputation":49,"user_id":15330587,"display_name":"Shubham Chakraborty"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689788987,"creation_date":1679252461,"question_id":75784313,"body_markdown":"I want to invoke the super user request prompt from the command line but could not do it.\r\nHere&#39;s the code\r\n\r\n```\r\nam start -a com.topjohnwu.magisk.request -n com.topjohnwu.magisk/.request.RequestActivity\r\n```\r\nIts giving the error as follows\r\n\r\n```\r\nError type 3\r\nError: Activity class {com.topjohnwu.magisk/com.topjohnwu.magisk.request.RequestActivity} does not exist.\r\n```\r\nPlease help me.\r\nAny help is apperiatated &amp; thanks in advance.\r\n\r\nI wanted to invoke the super user request prompt from the command line but could not do it.\r\n\r\n\r\nAnd got the error as follows\r\n```\r\nError type 3\r\nError: Activity class {com.topjohnwu.magisk/com.topjohnwu.magisk.request.RequestActivity} does not exist.\r\n```","title":"How to invoke the super user request prompt from the commandline","body":"<p>I want to invoke the super user request prompt from the command line but could not do it.\nHere's the code</p>\n<pre><code>am start -a com.topjohnwu.magisk.request -n com.topjohnwu.magisk/.request.RequestActivity\n</code></pre>\n<p>Its giving the error as follows</p>\n<pre><code>Error type 3\nError: Activity class {com.topjohnwu.magisk/com.topjohnwu.magisk.request.RequestActivity} does not exist.\n</code></pre>\n<p>Please help me.\nAny help is apperiatated &amp; thanks in advance.</p>\n<p>I wanted to invoke the super user request prompt from the command line but could not do it.</p>\n<p>And got the error as follows</p>\n<pre><code>Error type 3\nError: Activity class {com.topjohnwu.magisk/com.topjohnwu.magisk.request.RequestActivity} does not exist.\n</code></pre>\n"},{"tags":["java","spring","exception","exceptionhandler","controller-advice"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689791035,"post_id":76723929,"comment_id":135264993,"body_markdown":"Why did you decide to write your own exception handler? The Spring one will just print out the messages. Next to that if you want something special for this case (the `MethodArgumentNotValidException.class`) then write it. The exception contains the actual messages.","body":"Why did you decide to write your own exception handler? The Spring one will just print out the messages. Next to that if you want something special for this case (the <code>MethodArgumentNotValidException.class</code>) then write it. The exception contains the actual messages."},{"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"score":0,"creation_date":1690052117,"post_id":76723929,"comment_id":135300372,"body_markdown":"The reason behind writing my own exception handler has more to do with ensuring that a 400 `BAD_REQUEST` Http code is sent, rather than with the message itself. You are correct about the exception containing the actual messages. Is there any way to get a more user-friendly message _OTHER_ than parsing the string with `substr()`, `lastIndexOf()`, etc?","body":"The reason behind writing my own exception handler has more to do with ensuring that a 400 <code>BAD_REQUEST</code> Http code is sent, rather than with the message itself. You are correct about the exception containing the actual messages. Is there any way to get a more user-friendly message <i>OTHER</i> than parsing the string with <code>substr()</code>, <code>lastIndexOf()</code>, etc?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690179631,"post_id":76723929,"comment_id":135311651,"body_markdown":"You don&#39;t need to. The fields are there, you need to change your exception handling for the `MethodArgumentNotValidException`. That includes ALL messages and even transposed already.","body":"You don&#39;t need to. The fields are there, you need to change your exception handling for the <code>MethodArgumentNotValidException</code>. That includes ALL messages and even transposed already."}],"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689788398,"creation_date":1689788398,"question_id":76723929,"body_markdown":"Got a simple DTO for users of my app where I use jakarta validators for the length of the password.\r\n\r\n```java\r\npublic class UserDto {\r\n\r\n  @NonNull\r\n  @NotBlank private String username;\r\n\r\n  @JsonProperty(access = WRITE_ONLY)\r\n  @NonNull\r\n  @ToString.Exclude\r\n  @Size(min = 8, max = 30, message = &quot;Please provide a password between 8 and 30 characters long.&quot;)\r\n  private String password;\r\n}\r\n```\r\n\r\nI&#39;m making sure that I use the `@Valid` annotation on the controller for registering users:\r\n\r\n```java\r\n@PostMapping(value = &quot;/register&quot;)\r\npublic ResponseEntity&lt;UserDto&gt; registerUser(@RequestBody @Valid UserDto user) {\r\n  return new ResponseEntity&lt;&gt;(userDetailsService.save(user), HttpStatus.CREATED);\r\n}\r\n```\r\n\r\nNow, if I try to register a user with a password that is too short, e.g the password `&quot;pass&quot;`:\r\n\r\n```json\r\n{\r\n  &quot;username&quot;: &quot;memeuser&quot;,\r\n  &quot;password&quot;: &quot;pass&quot;\r\n}\r\n```\r\n\r\nI get a 400 and a pretty verbose error message that reveals several API internals:\r\n\r\n```json\r\n{\r\n  &quot;message&quot;: &quot;Validation failed for argument [0] in public org.springframework.http.ResponseEntity&lt;com.agilebank.model.user.UserDto&gt; com.agilebank.controller.JwtAuthenticationController.registerUser(com.agilebank.model.user.UserDto): [Field error in object &#39;userDto&#39; on field &#39;password&#39;: rejected value [pass]; codes [Size.userDto.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userDto.password,password]; arguments []; default message [password],30,8]; default message [Please provide a password between 8 and 30 characters long.]] &quot;\r\n}\r\n```\r\n\r\nI am decorating the `Exception` that is thrown through the following class and method:\r\n\r\n```java\r\n@RestControllerAdvice\r\npublic class ExceptionAdvice {\r\n\r\n  @ResponseBody\r\n  @ExceptionHandler({\r\n    HttpMessageNotReadableException.class,\r\n    InsufficientBalanceException.class,\r\n    SameAccountException.class,\r\n    InvalidTransactionCurrencyException.class,\r\n    OneOfTwoCurrenciesMissingException.class,\r\n    InvalidSortByFieldSpecifiedException.class,\r\n    MethodArgumentNotValidException.class // &lt;---- Here is the type that interests us\r\n  })\r\n  @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n  public ResponseEntity&lt;ExceptionMessageContainer&gt; badRequestStatusMessage(Exception exc) {\r\n    return new ResponseEntity&lt;&gt;(new ExceptionMessageContainer(exc.getMessage()), HttpStatus.BAD_REQUEST);\r\n  }\r\n}\r\n```\r\n\r\nwhere `ExceptionMessageContainer` is a simple container for the exception message:\r\n\r\n```java\r\n@AllArgsConstructor\r\npublic class ExceptionMessageContainer {\r\n    private String message;\r\n}\r\n```\r\n\r\nLooking at the [official docs for this exception type](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/MethodArgumentNotValidException.html) I am not so sure there&#39;s a straightforward way to get just the `message` that I have inside the `@Size` constraint, other than processing the `String` that `getMessage()` returns for me, which is not a generalizable solution. Any ideas about how I might be able to get just the `message` that I provide at the level of the constraint? I _could_ of course also just target instances of `MethodArgumentNotValidException` through a separate method inside `ExceptionAdvice` and have something like:\r\n\r\n```java\r\n @ResponseBody\r\n @ExceptionHandler({\r\n    MethodArgumentNotValidException.class\r\n  })\r\n  @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n  public ResponseEntity&lt;ExceptionMessageContainer&gt; methodArgumentNotValidExceptionSpecificHandler(MethodArgumentNotValidException exc) {\r\n    return new ResponseEntity&lt;&gt;(new ExceptionMessageContainer(&quot;Password should be between 8 and 30 characters long&quot;), HttpStatus.BAD_REQUEST);\r\n  }\r\n```\r\nbut there are _other_ cases where this exception type might be thrown, since I have other DTOs with different validator constraints which can throw this exception type. So this would not work well in general and would mislead the user.","title":"Short messages for MethodArgumentNotValidException","body":"<p>Got a simple DTO for users of my app where I use jakarta validators for the length of the password.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserDto {\n\n  @NonNull\n  @NotBlank private String username;\n\n  @JsonProperty(access = WRITE_ONLY)\n  @NonNull\n  @ToString.Exclude\n  @Size(min = 8, max = 30, message = &quot;Please provide a password between 8 and 30 characters long.&quot;)\n  private String password;\n}\n</code></pre>\n<p>I'm making sure that I use the <code>@Valid</code> annotation on the controller for registering users:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(value = &quot;/register&quot;)\npublic ResponseEntity&lt;UserDto&gt; registerUser(@RequestBody @Valid UserDto user) {\n  return new ResponseEntity&lt;&gt;(userDetailsService.save(user), HttpStatus.CREATED);\n}\n</code></pre>\n<p>Now, if I try to register a user with a password that is too short, e.g the password <code>&quot;pass&quot;</code>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;username&quot;: &quot;memeuser&quot;,\n  &quot;password&quot;: &quot;pass&quot;\n}\n</code></pre>\n<p>I get a 400 and a pretty verbose error message that reveals several API internals:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;message&quot;: &quot;Validation failed for argument [0] in public org.springframework.http.ResponseEntity&lt;com.agilebank.model.user.UserDto&gt; com.agilebank.controller.JwtAuthenticationController.registerUser(com.agilebank.model.user.UserDto): [Field error in object 'userDto' on field 'password': rejected value [pass]; codes [Size.userDto.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userDto.password,password]; arguments []; default message [password],30,8]; default message [Please provide a password between 8 and 30 characters long.]] &quot;\n}\n</code></pre>\n<p>I am decorating the <code>Exception</code> that is thrown through the following class and method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestControllerAdvice\npublic class ExceptionAdvice {\n\n  @ResponseBody\n  @ExceptionHandler({\n    HttpMessageNotReadableException.class,\n    InsufficientBalanceException.class,\n    SameAccountException.class,\n    InvalidTransactionCurrencyException.class,\n    OneOfTwoCurrenciesMissingException.class,\n    InvalidSortByFieldSpecifiedException.class,\n    MethodArgumentNotValidException.class // &lt;---- Here is the type that interests us\n  })\n  @ResponseStatus(HttpStatus.BAD_REQUEST)\n  public ResponseEntity&lt;ExceptionMessageContainer&gt; badRequestStatusMessage(Exception exc) {\n    return new ResponseEntity&lt;&gt;(new ExceptionMessageContainer(exc.getMessage()), HttpStatus.BAD_REQUEST);\n  }\n}\n</code></pre>\n<p>where <code>ExceptionMessageContainer</code> is a simple container for the exception message:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AllArgsConstructor\npublic class ExceptionMessageContainer {\n    private String message;\n}\n</code></pre>\n<p>Looking at the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/MethodArgumentNotValidException.html\" rel=\"nofollow noreferrer\">official docs for this exception type</a> I am not so sure there's a straightforward way to get just the <code>message</code> that I have inside the <code>@Size</code> constraint, other than processing the <code>String</code> that <code>getMessage()</code> returns for me, which is not a generalizable solution. Any ideas about how I might be able to get just the <code>message</code> that I provide at the level of the constraint? I <em>could</em> of course also just target instances of <code>MethodArgumentNotValidException</code> through a separate method inside <code>ExceptionAdvice</code> and have something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @ResponseBody\n @ExceptionHandler({\n    MethodArgumentNotValidException.class\n  })\n  @ResponseStatus(HttpStatus.BAD_REQUEST)\n  public ResponseEntity&lt;ExceptionMessageContainer&gt; methodArgumentNotValidExceptionSpecificHandler(MethodArgumentNotValidException exc) {\n    return new ResponseEntity&lt;&gt;(new ExceptionMessageContainer(&quot;Password should be between 8 and 30 characters long&quot;), HttpStatus.BAD_REQUEST);\n  }\n</code></pre>\n<p>but there are <em>other</em> cases where this exception type might be thrown, since I have other DTOs with different validator constraints which can throw this exception type. So this would not work well in general and would mislead the user.</p>\n"},{"tags":["java","spring-boot","amazon-s3","batch-processing"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689798788,"post_id":76723905,"comment_id":135266449,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":14961649,"reputation":1,"user_id":10801219,"display_name":"Nishant Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689788278,"creation_date":1689788219,"question_id":76723905,"body_markdown":"I need help to get a code in form of 4 REST API in java spring boot \r\n\r\n1. API that will read large csv file(Size ~1GB) stored in AWS s3 and return the data in chunks when request is made to the rest API.\r\n\r\n2. API to Update this large CSV file stored in S3 from rendered data by first API\r\n\r\n3. API to Export this large CSV file in .xlsx format\r\n4. API to Update this large CSV file via exported .xlsx upload.\r\n\r\n\r\nI have written the code but that is working fine for small size CSV files but for large files is giving heap memory out of bound and gateway timeouts.\r\n\r\nPlease suggest some faster and efficent way to achieve this without getting gateway timeout and heap memory issues..\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nTried various ways of achieving it most of time facing heap memory issue and gateway timeout as system is taking long time to process.\r\n\r\nNo Idea how to achieve it via batch processing or processing in chunks without data loss.","title":"How to create an APIs which will return the list of rows from a file which is a large CSV file stored in AWS S3 bucket","body":"<p>I need help to get a code in form of 4 REST API in java spring boot</p>\n<ol>\n<li><p>API that will read large csv file(Size ~1GB) stored in AWS s3 and return the data in chunks when request is made to the rest API.</p>\n</li>\n<li><p>API to Update this large CSV file stored in S3 from rendered data by first API</p>\n</li>\n<li><p>API to Export this large CSV file in .xlsx format</p>\n</li>\n<li><p>API to Update this large CSV file via exported .xlsx upload.</p>\n</li>\n</ol>\n<p>I have written the code but that is working fine for small size CSV files but for large files is giving heap memory out of bound and gateway timeouts.</p>\n<p>Please suggest some faster and efficent way to achieve this without getting gateway timeout and heap memory issues..</p>\n<p>Tried various ways of achieving it most of time facing heap memory issue and gateway timeout as system is taking long time to process.</p>\n<p>No Idea how to achieve it via batch processing or processing in chunks without data loss.</p>\n"},{"tags":["java","jackson","modelmapper"],"owner":{"account_id":28588307,"reputation":11,"user_id":21888106,"display_name":"darthwader"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689787957,"creation_date":1689787957,"question_id":76723877,"body_markdown":"I have a response I receive like this: \r\n\r\n```&quot;result&quot;: [\r\n    {\r\n     \r\n      &quot;contactPersons&quot;: [\r\n        {\r\n          &quot;contactCrmId&quot;:&quot;1232445&quot;, \r\n          &quot;contactUserType&quot;: {\r\n            &quot;code&quot;: &quot;NORMAL&quot;\r\n          },\r\n          &quot;contactName&quot;: &quot;&quot;,\r\n          &quot;contacts&quot;: [\r\n            {\r\n              &quot;contactType&quot;: {\r\n                &quot;code&quot;: &quot;E-Mail&quot;\r\n              },\r\n              &quot;contactValue&quot;: &quot;test@test.com&quot;\r\n            },\r\n            {\r\n              &quot;contactType&quot;: {\r\n                &quot;code&quot;: &quot;Mobile&quot;\r\n              },\r\n              &quot;contactValue&quot;: &quot;0505566777&quot;\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n\r\n```\r\n\r\nThe POJO I made for this is:\r\n\r\n```\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\n@JsonPropertyOrder({\r\n    &quot;contactType&quot;,\r\n    &quot;contactValue&quot;\r\n})\r\n@Generated(&quot;jsonschema2pojo&quot;)\r\npublic class Contact {\r\n\r\n    @JsonProperty(&quot;contactType&quot;)\r\n    private ContactType contactType;\r\n    @JsonProperty(&quot;contactValue&quot;)\r\n    private String contactValue;\r\n    @JsonIgnore\r\n    private Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\r\n\r\n    @JsonProperty(&quot;contactType&quot;)\r\n    public ContactType getContactType() {\r\n        return contactType;\r\n    }\r\n\r\n    @JsonProperty(&quot;contactType&quot;)\r\n    public void setContactType(ContactType contactType) {\r\n        this.contactType = contactType;\r\n    }\r\n\r\n    public Contact withContactType(ContactType contactType) {\r\n        this.contactType = contactType;\r\n        return this;\r\n    }\r\n\r\n    @JsonProperty(&quot;contactValue&quot;)\r\n    public String getContactValue() {\r\n        return contactValue;\r\n    }\r\n\r\n    @JsonProperty(&quot;contactValue&quot;)\r\n    public void setContactValue(String contactValue) {\r\n        this.contactValue = contactValue;\r\n    }\r\n\r\n    public Contact withContactValue(String contactValue) {\r\n        this.contactValue = contactValue;\r\n        return this;\r\n    }\r\n\r\n    @JsonAnyGetter\r\n    public Map&lt;String, Object&gt; getAdditionalProperties() {\r\n        return this.additionalProperties;\r\n    }\r\n\r\n    @JsonAnySetter\r\n    public void setAdditionalProperty(String name, Object value) {\r\n        this.additionalProperties.put(name, value);\r\n    }\r\n\r\n    public Contact withAdditionalProperty(String name, Object value) {\r\n        this.additionalProperties.put(name, value);\r\n        return this;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        StringBuilder sb = new StringBuilder();\r\n        sb.append(Contact.class.getName()).append(&#39;@&#39;).append(Integer.toHexString(System.identityHashCode(this))).append(&#39;[&#39;);\r\n        sb.append(&quot;contactType&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.contactType == null)?&quot;&lt;null&gt;&quot;:this.contactType));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;contactValue&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.contactValue == null)?&quot;&lt;null&gt;&quot;:this.contactValue));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;additionalProperties&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.additionalProperties == null)?&quot;&lt;null&gt;&quot;:this.additionalProperties));\r\n        sb.append(&#39;,&#39;);\r\n        if (sb.charAt((sb.length()- 1)) == &#39;,&#39;) {\r\n            sb.setCharAt((sb.length()- 1), &#39;]&#39;);\r\n        } else {\r\n            sb.append(&#39;]&#39;);\r\n        }\r\n        return sb.toString();\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        int result = 1;\r\n        result = ((result* 31)+((this.contactType == null)? 0 :this.contactType.hashCode()));\r\n        result = ((result* 31)+((this.additionalProperties == null)? 0 :this.additionalProperties.hashCode()));\r\n        result = ((result* 31)+((this.contactValue == null)? 0 :this.contactValue.hashCode()));\r\n        return result;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object other) {\r\n        if (other == this) {\r\n            return true;\r\n        }\r\n        if ((other instanceof Contact) == false) {\r\n            return false;\r\n        }\r\n        Contact rhs = ((Contact) other);\r\n        return ((((this.contactType == rhs.contactType)||((this.contactType!= null)&amp;&amp;this.contactType.equals(rhs.contactType)))&amp;&amp;((this.additionalProperties == rhs.additionalProperties)||((this.additionalProperties!= null)&amp;&amp;this.additionalProperties.equals(rhs.additionalProperties))))&amp;&amp;((this.contactValue == rhs.contactValue)||((this.contactValue!= null)&amp;&amp;this.contactValue.equals(rhs.contactValue))));\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\nJsonInclude(JsonInclude.Include.NON_NULL)\r\n@JsonPropertyOrder({\r\n    &quot;contactCrmId&quot;,\r\n    &quot;contactUserType&quot;,\r\n    &quot;contactName&quot;,\r\n    &quot;contacts&quot;\r\n})\r\n@Generated(&quot;jsonschema2pojo&quot;)\r\npublic class ContactPerson {\r\n\r\n    @JsonProperty(&quot;contactCrmId&quot;)\r\n    private String contactCrmId;\r\n    @JsonProperty(&quot;contactUserType&quot;)\r\n    private ContactUserType contactUserType;\r\n    @JsonProperty(&quot;contactName&quot;)\r\n    private String contactName;\r\n    @JsonProperty(&quot;contacts&quot;)\r\n    private List&lt;Contact&gt; contacts = new ArrayList&lt;Contact&gt;();\r\n    @JsonIgnore\r\n    private Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\r\n\r\n    @JsonProperty(&quot;contactCrmId&quot;)\r\n    public String getContactCrmId() {\r\n        return contactCrmId;\r\n    }\r\n\r\n    @JsonProperty(&quot;contactCrmId&quot;)\r\n    public void setContactCrmId(String contactCrmId) {\r\n        this.contactCrmId = contactCrmId;\r\n    }\r\n\r\n    public ContactPerson withContactCrmId(String contactCrmId) {\r\n        this.contactCrmId = contactCrmId;\r\n        return this;\r\n    }\r\n\r\n    @JsonProperty(&quot;contactUserType&quot;)\r\n    public ContactUserType getContactUserType() {\r\n        return contactUserType;\r\n    }\r\n\r\n    @JsonProperty(&quot;contactUserType&quot;)\r\n    public void setContactUserType(ContactUserType contactUserType) {\r\n        this.contactUserType = contactUserType;\r\n    }\r\n\r\n    public ContactPerson withContactUserType(ContactUserType contactUserType) {\r\n        this.contactUserType = contactUserType;\r\n        return this;\r\n    }\r\n\r\n    @JsonProperty(&quot;contactName&quot;)\r\n    public String getContactName() {\r\n        return contactName;\r\n    }\r\n\r\n    @JsonProperty(&quot;contactName&quot;)\r\n    public void setContactName(String contactName) {\r\n        this.contactName = contactName;\r\n    }\r\n\r\n    public ContactPerson withContactName(String contactName) {\r\n        this.contactName = contactName;\r\n        return this;\r\n    }\r\n\r\n    @JsonProperty(&quot;contacts&quot;)\r\n    public List&lt;Contact&gt; getContacts() {\r\n        return contacts;\r\n    }\r\n\r\n    @JsonProperty(&quot;contacts&quot;)\r\n    public void setContacts(List&lt;Contact&gt; contacts) {\r\n        this.contacts = contacts;\r\n    }\r\n\r\n    public ContactPerson withContacts(List&lt;Contact&gt; contacts) {\r\n        this.contacts = contacts;\r\n        return this;\r\n    }\r\n\r\n    @JsonAnyGetter\r\n    public Map&lt;String, Object&gt; getAdditionalProperties() {\r\n        return this.additionalProperties;\r\n    }\r\n\r\n    @JsonAnySetter\r\n    public void setAdditionalProperty(String name, Object value) {\r\n        this.additionalProperties.put(name, value);\r\n    }\r\n\r\n    public ContactPerson withAdditionalProperty(String name, Object value) {\r\n        this.additionalProperties.put(name, value);\r\n        return this;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        StringBuilder sb = new StringBuilder();\r\n        sb.append(ContactPerson.class.getName()).append(&#39;@&#39;).append(Integer.toHexString(System.identityHashCode(this))).append(&#39;[&#39;);\r\n        sb.append(&quot;contactCrmId&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.contactCrmId == null)?&quot;&lt;null&gt;&quot;:this.contactCrmId));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;contactUserType&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.contactUserType == null)?&quot;&lt;null&gt;&quot;:this.contactUserType));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;contactName&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.contactName == null)?&quot;&lt;null&gt;&quot;:this.contactName));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;contacts&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.contacts == null)?&quot;&lt;null&gt;&quot;:this.contacts));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;additionalProperties&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.additionalProperties == null)?&quot;&lt;null&gt;&quot;:this.additionalProperties));\r\n        sb.append(&#39;,&#39;);\r\n        if (sb.charAt((sb.length()- 1)) == &#39;,&#39;) {\r\n            sb.setCharAt((sb.length()- 1), &#39;]&#39;);\r\n        } else {\r\n            sb.append(&#39;]&#39;);\r\n        }\r\n        return sb.toString();\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        int result = 1;\r\n        result = ((result* 31)+((this.contactCrmId == null)? 0 :this.contactCrmId.hashCode()));\r\n        result = ((result* 31)+((this.additionalProperties == null)? 0 :this.additionalProperties.hashCode()));\r\n        result = ((result* 31)+((this.contactUserType == null)? 0 :this.contactUserType.hashCode()));\r\n        result = ((result* 31)+((this.contactName == null)? 0 :this.contactName.hashCode()));\r\n        result = ((result* 31)+((this.contacts == null)? 0 :this.contacts.hashCode()));\r\n        return result;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object other) {\r\n        if (other == this) {\r\n            return true;\r\n        }\r\n        if ((other instanceof ContactPerson) == false) {\r\n            return false;\r\n        }\r\n        ContactPerson rhs = ((ContactPerson) other);\r\n        return ((((((this.contactCrmId == rhs.contactCrmId)||((this.contactCrmId!= null)&amp;&amp;this.contactCrmId.equals(rhs.contactCrmId)))&amp;&amp;((this.additionalProperties == rhs.additionalProperties)||((this.additionalProperties!= null)&amp;&amp;this.additionalProperties.equals(rhs.additionalProperties))))&amp;&amp;((this.contactUserType == rhs.contactUserType)||((this.contactUserType!= null)&amp;&amp;this.contactUserType.equals(rhs.contactUserType))))&amp;&amp;((this.contactName == rhs.contactName)||((this.contactName!= null)&amp;&amp;this.contactName.equals(rhs.contactName))))&amp;&amp;((this.contacts == rhs.contacts)||((this.contacts!= null)&amp;&amp;this.contacts.equals(rhs.contacts))));\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd I want to map into my contact object like this that is swagger generated:\r\n\r\n```\r\n@Generated(value = &quot;org.openapitools.codegen.languages.SpringCodegen&quot;, date = &quot;2023-07-18T19:30:20.680014600+05:30[Asia/Calcutta]&quot;)\r\npublic class Contact implements Payload {\r\n\r\n  private String name;\r\n\r\n  private String mobileNumber;\r\n\r\n  private String emailId;\r\n\r\n  public Contact name(String name) {\r\n    this.name = name;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get name\r\n   * @return name\r\n  */\r\n  \r\n  @JsonProperty(&quot;name&quot;)\r\n  public String getName() {\r\n    return name;\r\n  }\r\n\r\n  public void setName(String name) {\r\n    this.name = name;\r\n  }\r\n\r\n  public Contact mobileNumber(String mobileNumber) {\r\n    this.mobileNumber = mobileNumber;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get mobileNumber\r\n   * @return mobileNumber\r\n  */\r\n  \r\n  @JsonProperty(&quot;mobileNumber&quot;)\r\n  public String getMobileNumber() {\r\n    return mobileNumber;\r\n  }\r\n\r\n  public void setMobileNumber(String mobileNumber) {\r\n    this.mobileNumber = mobileNumber;\r\n  }\r\n\r\n  public Contact emailId(String emailId) {\r\n    this.emailId = emailId;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get emailId\r\n   * @return emailId\r\n  */\r\n  \r\n  @JsonProperty(&quot;emailId&quot;)\r\n  public String getEmailId() {\r\n    return emailId;\r\n  }\r\n\r\n  public void setEmailId(String emailId) {\r\n    this.emailId = emailId;\r\n  }\r\n\r\n  @Override\r\n  public boolean equals(Object o) {\r\n    if (this == o) {\r\n      return true;\r\n    }\r\n    if (o == null || getClass() != o.getClass()) {\r\n      return false;\r\n    }\r\n    Contact contact = (Contact) o;\r\n    return Objects.equals(this.name, contact.name) &amp;&amp;\r\n        Objects.equals(this.mobileNumber, contact.mobileNumber) &amp;&amp;\r\n        Objects.equals(this.emailId, contact.emailId);\r\n  }\r\n\r\n  @Override\r\n  public int hashCode() {\r\n    return Objects.hash(name, mobileNumber, emailId);\r\n  }\r\n\r\n  @Override\r\n  public String toString() {\r\n    StringBuilder sb = new StringBuilder();\r\n    sb.append(&quot;class Contact {\\n&quot;);\r\n    sb.append(&quot;    name: &quot;).append(toIndentedString(name)).append(&quot;\\n&quot;);\r\n    sb.append(&quot;    mobileNumber: &quot;).append(toIndentedString(mobileNumber)).append(&quot;\\n&quot;);\r\n    sb.append(&quot;    emailId: &quot;).append(toIndentedString(emailId)).append(&quot;\\n&quot;);\r\n    sb.append(&quot;}&quot;);\r\n    return sb.toString();\r\n  }\r\n\r\n  /**\r\n   * Convert the given object to string with each line indented by 4 spaces\r\n   * (except the first line).\r\n   */\r\n  private String toIndentedString(Object o) {\r\n    if (o == null) {\r\n      return &quot;null&quot;;\r\n    }\r\n    return o.toString().replace(&quot;\\n&quot;, &quot;\\n    &quot;);\r\n  }\r\n}\r\n```\r\n\r\nThe pojos were generated using a library. Is there any way this can be done using modelmapper? I would like to have ContactPerson map to generated Contact. Or do I do this without any mapper library?","title":"How to map from external system deserialized pojo?","body":"<p>I have a response I receive like this:</p>\n<pre><code>    {\n     \n      &quot;contactPersons&quot;: [\n        {\n          &quot;contactCrmId&quot;:&quot;1232445&quot;, \n          &quot;contactUserType&quot;: {\n            &quot;code&quot;: &quot;NORMAL&quot;\n          },\n          &quot;contactName&quot;: &quot;&quot;,\n          &quot;contacts&quot;: [\n            {\n              &quot;contactType&quot;: {\n                &quot;code&quot;: &quot;E-Mail&quot;\n              },\n              &quot;contactValue&quot;: &quot;test@test.com&quot;\n            },\n            {\n              &quot;contactType&quot;: {\n                &quot;code&quot;: &quot;Mobile&quot;\n              },\n              &quot;contactValue&quot;: &quot;0505566777&quot;\n            }\n          ]\n        }\n      ]\n\n</code></pre>\n<p>The POJO I made for this is:</p>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\n@JsonPropertyOrder({\n    &quot;contactType&quot;,\n    &quot;contactValue&quot;\n})\n@Generated(&quot;jsonschema2pojo&quot;)\npublic class Contact {\n\n    @JsonProperty(&quot;contactType&quot;)\n    private ContactType contactType;\n    @JsonProperty(&quot;contactValue&quot;)\n    private String contactValue;\n    @JsonIgnore\n    private Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\n\n    @JsonProperty(&quot;contactType&quot;)\n    public ContactType getContactType() {\n        return contactType;\n    }\n\n    @JsonProperty(&quot;contactType&quot;)\n    public void setContactType(ContactType contactType) {\n        this.contactType = contactType;\n    }\n\n    public Contact withContactType(ContactType contactType) {\n        this.contactType = contactType;\n        return this;\n    }\n\n    @JsonProperty(&quot;contactValue&quot;)\n    public String getContactValue() {\n        return contactValue;\n    }\n\n    @JsonProperty(&quot;contactValue&quot;)\n    public void setContactValue(String contactValue) {\n        this.contactValue = contactValue;\n    }\n\n    public Contact withContactValue(String contactValue) {\n        this.contactValue = contactValue;\n        return this;\n    }\n\n    @JsonAnyGetter\n    public Map&lt;String, Object&gt; getAdditionalProperties() {\n        return this.additionalProperties;\n    }\n\n    @JsonAnySetter\n    public void setAdditionalProperty(String name, Object value) {\n        this.additionalProperties.put(name, value);\n    }\n\n    public Contact withAdditionalProperty(String name, Object value) {\n        this.additionalProperties.put(name, value);\n        return this;\n    }\n\n    @Override\n    public String toString() {\n        StringBuilder sb = new StringBuilder();\n        sb.append(Contact.class.getName()).append('@').append(Integer.toHexString(System.identityHashCode(this))).append('[');\n        sb.append(&quot;contactType&quot;);\n        sb.append('=');\n        sb.append(((this.contactType == null)?&quot;&lt;null&gt;&quot;:this.contactType));\n        sb.append(',');\n        sb.append(&quot;contactValue&quot;);\n        sb.append('=');\n        sb.append(((this.contactValue == null)?&quot;&lt;null&gt;&quot;:this.contactValue));\n        sb.append(',');\n        sb.append(&quot;additionalProperties&quot;);\n        sb.append('=');\n        sb.append(((this.additionalProperties == null)?&quot;&lt;null&gt;&quot;:this.additionalProperties));\n        sb.append(',');\n        if (sb.charAt((sb.length()- 1)) == ',') {\n            sb.setCharAt((sb.length()- 1), ']');\n        } else {\n            sb.append(']');\n        }\n        return sb.toString();\n    }\n\n    @Override\n    public int hashCode() {\n        int result = 1;\n        result = ((result* 31)+((this.contactType == null)? 0 :this.contactType.hashCode()));\n        result = ((result* 31)+((this.additionalProperties == null)? 0 :this.additionalProperties.hashCode()));\n        result = ((result* 31)+((this.contactValue == null)? 0 :this.contactValue.hashCode()));\n        return result;\n    }\n\n    @Override\n    public boolean equals(Object other) {\n        if (other == this) {\n            return true;\n        }\n        if ((other instanceof Contact) == false) {\n            return false;\n        }\n        Contact rhs = ((Contact) other);\n        return ((((this.contactType == rhs.contactType)||((this.contactType!= null)&amp;&amp;this.contactType.equals(rhs.contactType)))&amp;&amp;((this.additionalProperties == rhs.additionalProperties)||((this.additionalProperties!= null)&amp;&amp;this.additionalProperties.equals(rhs.additionalProperties))))&amp;&amp;((this.contactValue == rhs.contactValue)||((this.contactValue!= null)&amp;&amp;this.contactValue.equals(rhs.contactValue))));\n    }\n\n}\n</code></pre>\n<pre><code>JsonInclude(JsonInclude.Include.NON_NULL)\n@JsonPropertyOrder({\n    &quot;contactCrmId&quot;,\n    &quot;contactUserType&quot;,\n    &quot;contactName&quot;,\n    &quot;contacts&quot;\n})\n@Generated(&quot;jsonschema2pojo&quot;)\npublic class ContactPerson {\n\n    @JsonProperty(&quot;contactCrmId&quot;)\n    private String contactCrmId;\n    @JsonProperty(&quot;contactUserType&quot;)\n    private ContactUserType contactUserType;\n    @JsonProperty(&quot;contactName&quot;)\n    private String contactName;\n    @JsonProperty(&quot;contacts&quot;)\n    private List&lt;Contact&gt; contacts = new ArrayList&lt;Contact&gt;();\n    @JsonIgnore\n    private Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\n\n    @JsonProperty(&quot;contactCrmId&quot;)\n    public String getContactCrmId() {\n        return contactCrmId;\n    }\n\n    @JsonProperty(&quot;contactCrmId&quot;)\n    public void setContactCrmId(String contactCrmId) {\n        this.contactCrmId = contactCrmId;\n    }\n\n    public ContactPerson withContactCrmId(String contactCrmId) {\n        this.contactCrmId = contactCrmId;\n        return this;\n    }\n\n    @JsonProperty(&quot;contactUserType&quot;)\n    public ContactUserType getContactUserType() {\n        return contactUserType;\n    }\n\n    @JsonProperty(&quot;contactUserType&quot;)\n    public void setContactUserType(ContactUserType contactUserType) {\n        this.contactUserType = contactUserType;\n    }\n\n    public ContactPerson withContactUserType(ContactUserType contactUserType) {\n        this.contactUserType = contactUserType;\n        return this;\n    }\n\n    @JsonProperty(&quot;contactName&quot;)\n    public String getContactName() {\n        return contactName;\n    }\n\n    @JsonProperty(&quot;contactName&quot;)\n    public void setContactName(String contactName) {\n        this.contactName = contactName;\n    }\n\n    public ContactPerson withContactName(String contactName) {\n        this.contactName = contactName;\n        return this;\n    }\n\n    @JsonProperty(&quot;contacts&quot;)\n    public List&lt;Contact&gt; getContacts() {\n        return contacts;\n    }\n\n    @JsonProperty(&quot;contacts&quot;)\n    public void setContacts(List&lt;Contact&gt; contacts) {\n        this.contacts = contacts;\n    }\n\n    public ContactPerson withContacts(List&lt;Contact&gt; contacts) {\n        this.contacts = contacts;\n        return this;\n    }\n\n    @JsonAnyGetter\n    public Map&lt;String, Object&gt; getAdditionalProperties() {\n        return this.additionalProperties;\n    }\n\n    @JsonAnySetter\n    public void setAdditionalProperty(String name, Object value) {\n        this.additionalProperties.put(name, value);\n    }\n\n    public ContactPerson withAdditionalProperty(String name, Object value) {\n        this.additionalProperties.put(name, value);\n        return this;\n    }\n\n    @Override\n    public String toString() {\n        StringBuilder sb = new StringBuilder();\n        sb.append(ContactPerson.class.getName()).append('@').append(Integer.toHexString(System.identityHashCode(this))).append('[');\n        sb.append(&quot;contactCrmId&quot;);\n        sb.append('=');\n        sb.append(((this.contactCrmId == null)?&quot;&lt;null&gt;&quot;:this.contactCrmId));\n        sb.append(',');\n        sb.append(&quot;contactUserType&quot;);\n        sb.append('=');\n        sb.append(((this.contactUserType == null)?&quot;&lt;null&gt;&quot;:this.contactUserType));\n        sb.append(',');\n        sb.append(&quot;contactName&quot;);\n        sb.append('=');\n        sb.append(((this.contactName == null)?&quot;&lt;null&gt;&quot;:this.contactName));\n        sb.append(',');\n        sb.append(&quot;contacts&quot;);\n        sb.append('=');\n        sb.append(((this.contacts == null)?&quot;&lt;null&gt;&quot;:this.contacts));\n        sb.append(',');\n        sb.append(&quot;additionalProperties&quot;);\n        sb.append('=');\n        sb.append(((this.additionalProperties == null)?&quot;&lt;null&gt;&quot;:this.additionalProperties));\n        sb.append(',');\n        if (sb.charAt((sb.length()- 1)) == ',') {\n            sb.setCharAt((sb.length()- 1), ']');\n        } else {\n            sb.append(']');\n        }\n        return sb.toString();\n    }\n\n    @Override\n    public int hashCode() {\n        int result = 1;\n        result = ((result* 31)+((this.contactCrmId == null)? 0 :this.contactCrmId.hashCode()));\n        result = ((result* 31)+((this.additionalProperties == null)? 0 :this.additionalProperties.hashCode()));\n        result = ((result* 31)+((this.contactUserType == null)? 0 :this.contactUserType.hashCode()));\n        result = ((result* 31)+((this.contactName == null)? 0 :this.contactName.hashCode()));\n        result = ((result* 31)+((this.contacts == null)? 0 :this.contacts.hashCode()));\n        return result;\n    }\n\n    @Override\n    public boolean equals(Object other) {\n        if (other == this) {\n            return true;\n        }\n        if ((other instanceof ContactPerson) == false) {\n            return false;\n        }\n        ContactPerson rhs = ((ContactPerson) other);\n        return ((((((this.contactCrmId == rhs.contactCrmId)||((this.contactCrmId!= null)&amp;&amp;this.contactCrmId.equals(rhs.contactCrmId)))&amp;&amp;((this.additionalProperties == rhs.additionalProperties)||((this.additionalProperties!= null)&amp;&amp;this.additionalProperties.equals(rhs.additionalProperties))))&amp;&amp;((this.contactUserType == rhs.contactUserType)||((this.contactUserType!= null)&amp;&amp;this.contactUserType.equals(rhs.contactUserType))))&amp;&amp;((this.contactName == rhs.contactName)||((this.contactName!= null)&amp;&amp;this.contactName.equals(rhs.contactName))))&amp;&amp;((this.contacts == rhs.contacts)||((this.contacts!= null)&amp;&amp;this.contacts.equals(rhs.contacts))));\n    }\n\n}\n</code></pre>\n<p>And I want to map into my contact object like this that is swagger generated:</p>\n<pre><code>@Generated(value = &quot;org.openapitools.codegen.languages.SpringCodegen&quot;, date = &quot;2023-07-18T19:30:20.680014600+05:30[Asia/Calcutta]&quot;)\npublic class Contact implements Payload {\n\n  private String name;\n\n  private String mobileNumber;\n\n  private String emailId;\n\n  public Contact name(String name) {\n    this.name = name;\n    return this;\n  }\n\n  /**\n   * Get name\n   * @return name\n  */\n  \n  @JsonProperty(&quot;name&quot;)\n  public String getName() {\n    return name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n  public Contact mobileNumber(String mobileNumber) {\n    this.mobileNumber = mobileNumber;\n    return this;\n  }\n\n  /**\n   * Get mobileNumber\n   * @return mobileNumber\n  */\n  \n  @JsonProperty(&quot;mobileNumber&quot;)\n  public String getMobileNumber() {\n    return mobileNumber;\n  }\n\n  public void setMobileNumber(String mobileNumber) {\n    this.mobileNumber = mobileNumber;\n  }\n\n  public Contact emailId(String emailId) {\n    this.emailId = emailId;\n    return this;\n  }\n\n  /**\n   * Get emailId\n   * @return emailId\n  */\n  \n  @JsonProperty(&quot;emailId&quot;)\n  public String getEmailId() {\n    return emailId;\n  }\n\n  public void setEmailId(String emailId) {\n    this.emailId = emailId;\n  }\n\n  @Override\n  public boolean equals(Object o) {\n    if (this == o) {\n      return true;\n    }\n    if (o == null || getClass() != o.getClass()) {\n      return false;\n    }\n    Contact contact = (Contact) o;\n    return Objects.equals(this.name, contact.name) &amp;&amp;\n        Objects.equals(this.mobileNumber, contact.mobileNumber) &amp;&amp;\n        Objects.equals(this.emailId, contact.emailId);\n  }\n\n  @Override\n  public int hashCode() {\n    return Objects.hash(name, mobileNumber, emailId);\n  }\n\n  @Override\n  public String toString() {\n    StringBuilder sb = new StringBuilder();\n    sb.append(&quot;class Contact {\\n&quot;);\n    sb.append(&quot;    name: &quot;).append(toIndentedString(name)).append(&quot;\\n&quot;);\n    sb.append(&quot;    mobileNumber: &quot;).append(toIndentedString(mobileNumber)).append(&quot;\\n&quot;);\n    sb.append(&quot;    emailId: &quot;).append(toIndentedString(emailId)).append(&quot;\\n&quot;);\n    sb.append(&quot;}&quot;);\n    return sb.toString();\n  }\n\n  /**\n   * Convert the given object to string with each line indented by 4 spaces\n   * (except the first line).\n   */\n  private String toIndentedString(Object o) {\n    if (o == null) {\n      return &quot;null&quot;;\n    }\n    return o.toString().replace(&quot;\\n&quot;, &quot;\\n    &quot;);\n  }\n}\n</code></pre>\n<p>The pojos were generated using a library. Is there any way this can be done using modelmapper? I would like to have ContactPerson map to generated Contact. Or do I do this without any mapper library?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"owner":{"account_id":29042181,"reputation":24,"user_id":22246824,"display_name":"dummy furzi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689787781,"creation_date":1689710709,"question_id":76716200,"body_markdown":"I am totally new to spring, and making a social media app, where User and Follow are Entity classes. Follow entity is having two fields of type User, one for follower and another for following, mapping is ManyToOne from Follow to User. \r\n\r\nThere is an use-case where I am requiring follower and following objects from a Follow object. And the place is where I want to get these in FollowService.java. My service class is having a method to save the Follow record into the database. In that function, I want to get follower and following from that saved Follow record, which I have just inserted.\r\n\r\n**Note:-** I have got an idea from this [answer](https://stackoverflow.com/a/50378345/22246824) to set only Ids for mapped classes instead of supplying whole object. So, I am just setting the followerId and followingId in my Follow record and save it to database. Further understanding you can get from the code...\r\n\r\n**Follow.java**\r\n```\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(uniqueConstraints = @UniqueConstraint(name = &quot;uniqueIdForFollow&quot;, columnNames = {&quot;fk_followerId&quot;, &quot;fk_followingId&quot;}))\r\npublic class Follow {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int followId;\r\n\r\n    @ManyToOne(targetEntity = User.class, fetch=FetchType.EAGER)\r\n    @JoinColumn(name = &quot;fk_followerId&quot;, insertable=false, updatable=false)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    private User follower;\r\n    @Column(name = &quot;fk_followerId&quot;)\r\n    private int followerId;\r\n\r\n    @ManyToOne(targetEntity = User.class, fetch=FetchType.EAGER)\r\n    @JoinColumn(name = &quot;fk_followingId&quot;, insertable=false, updatable=false)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    private User following;\r\n    @Column(name = &quot;fk_followingId&quot;)\r\n    private int followingId;\r\n\r\n    @CreationTimestamp\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    private Date createdAt;\r\n\r\n\r\n    public int getFollowId() {\r\n        return followId;\r\n    }\r\n\r\n    public int getFollowerId() {\r\n        return followerId;\r\n    }\r\n    public void setFollowerId(int followerId) {\r\n        this.followerId = followerId;\r\n    }\r\n  \r\n    public int getFollowingId() {\r\n        return followingId;\r\n    }\r\n \r\n    public void setFollowingId(int followingId) {\r\n        this.followingId = followingId;\r\n    }\r\n\r\n    public User getFollower() {\r\n        return follower;\r\n    }\r\n\r\n\r\n    public void setFollower(User follower) {\r\n        this.follower = follower;\r\n    }\r\n\r\n\r\n    public User getFollowing() {\r\n        return following;\r\n    }\r\n\r\n\r\n    public void setFollowing(User following) {\r\n        this.following = following;\r\n    }\r\n}\r\n\r\n```\r\n\r\n**User.java**\r\n```\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int userId;\r\n\r\n    @NotNull\r\n    private String username;\r\n    @Email(message = &quot;entered email is not valid.&quot;, regexp = &quot;[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,3}&quot;, flags = Pattern.Flag.CASE_INSENSITIVE)\r\n    @NotNull\r\n    private String email;\r\n\r\n    @NotNull\r\n    private String password;\r\n\r\n \r\n    public int getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public @NotNull String getUsername() {\r\n        return username;\r\n    }\r\n\r\n    public void setUsername(@NotNull String username) {\r\n        this.username = username;\r\n    }\r\n\r\n    public @NotNull String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(@NotNull String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public @NotNull String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(@NotNull String password) {\r\n        this.password = password;\r\n    }\r\n}\r\n```\r\n**FollowController.java**\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/users/{userId}/follow&quot;)\r\npublic class FollowController {\r\n    @Autowired\r\n    FollowService fs;\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; followThisUser(@PathVariable(&quot;userId&quot;) int userId, @RequestBody Follow follow, HttpServletRequest request) throws Exception {\r\n        Follow newFollow = fs.followUser(userId, follow);\r\n\r\n        return ResponseHandler\r\n                .generateResponse(newFollow, HttpStatus.CREATED, &quot;user with userId &quot;+follow.getFollowerId()+&quot; followed the user with userId &quot;+userId, request.getRequestURI());\r\n    }\r\n}\r\n```\r\n**FollowService.java**\r\n```\r\n@Service\r\npublic class FollowService {\r\n    @Autowired\r\n    FollowRepo fr;\r\n\r\n    public Follow followUser(int userId, Follow follow) {\r\n        follow.setFollowingId(userId);\r\n        Follow savedFollow = fr.save(follow);\r\n        // record saved to the database\r\n        // Now I fetch it using Id\r\n        // Here I want to get the follower and following fields\r\n        /*\r\n          Follow follow = getByFollowId(savedFollow.getFollowId());\r\n          System.out.println(follow.getFollower()); // I am getting null\r\n          System.out.println(follow.getFollowing()); // I am getting null\r\n        */\r\n\r\n        return savedFollow;\r\n    }\r\n\r\n    public Follow getByFollowId(int followId) throws Exception {\r\n        Follow follow = fr.findByFollowId(followId);\r\n        if(follow == null){\r\n            throw new Exception(&quot;Follow not found with followId &quot;+followId);\r\n        }\r\n        return follow;\r\n    }\r\n}\r\n\r\n```\r\n**FollowRepo.java**\r\n```\r\npublic interface FollowRepo extends JpaRepository&lt;Follow, Integer&gt; {\r\n    Follow findByFollowerIdAndFollowingId(int followerId, int followindId);\r\n    Follow findByFollowId(int followId);\r\n}\r\n```\r\n\r\n\r\n# **What I tried?**\r\nWhat I have done in service class(in comment section), Same thing I had tried in method `followThisUser()` in controller also to get the follower and following fields. But I am getting null there also. \r\n\r\n**Strange Thing**\r\n\r\nBut If I created another separate controller `TestController` there I am trying to do the same and I am getting what I had expected. \r\n\r\n\r\n**TestController.java**\r\n```\r\n@RestController\r\npublic class TestController {\r\n    @Autowired\r\n    FollowService fs;\r\n\r\n    @GetMapping(&quot;/test/{followId}&quot;)\r\n    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; display(@PathVariable(&quot;followId&quot;) int followId, HttpServletRequest request) throws Exception {\r\n        System.out.println(followId);\r\n        Follow follow = fs.getByFollowId(followId);\r\n \r\n        System.out.println(follow.getFollower()); // not null, fine\r\n        System.out.println(follow.getFollowing()); // not null, fine\r\n\r\n        System.out.println(follow.getFollower().getUsername()); // also fine\r\n\r\n        return ResponseHandler\r\n                .generateResponse(follow, HttpStatus.OK, &quot;fetched&quot;, request.getRequestURI());\r\n    }\r\n}\r\n```\r\n\r\n# **Expectation**\r\nI just want to know the reason of above happening and what to do to meet the expectation?\r\n\r\n","title":"How to fetch the embedded parent row when fetching child row from database in service class?","body":"<p>I am totally new to spring, and making a social media app, where User and Follow are Entity classes. Follow entity is having two fields of type User, one for follower and another for following, mapping is ManyToOne from Follow to User.</p>\n<p>There is an use-case where I am requiring follower and following objects from a Follow object. And the place is where I want to get these in FollowService.java. My service class is having a method to save the Follow record into the database. In that function, I want to get follower and following from that saved Follow record, which I have just inserted.</p>\n<p><strong>Note:-</strong> I have got an idea from this <a href=\"https://stackoverflow.com/a/50378345/22246824\">answer</a> to set only Ids for mapped classes instead of supplying whole object. So, I am just setting the followerId and followingId in my Follow record and save it to database. Further understanding you can get from the code...</p>\n<p><strong>Follow.java</strong></p>\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(uniqueConstraints = @UniqueConstraint(name = &quot;uniqueIdForFollow&quot;, columnNames = {&quot;fk_followerId&quot;, &quot;fk_followingId&quot;}))\npublic class Follow {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int followId;\n\n    @ManyToOne(targetEntity = User.class, fetch=FetchType.EAGER)\n    @JoinColumn(name = &quot;fk_followerId&quot;, insertable=false, updatable=false)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    private User follower;\n    @Column(name = &quot;fk_followerId&quot;)\n    private int followerId;\n\n    @ManyToOne(targetEntity = User.class, fetch=FetchType.EAGER)\n    @JoinColumn(name = &quot;fk_followingId&quot;, insertable=false, updatable=false)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    private User following;\n    @Column(name = &quot;fk_followingId&quot;)\n    private int followingId;\n\n    @CreationTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date createdAt;\n\n\n    public int getFollowId() {\n        return followId;\n    }\n\n    public int getFollowerId() {\n        return followerId;\n    }\n    public void setFollowerId(int followerId) {\n        this.followerId = followerId;\n    }\n  \n    public int getFollowingId() {\n        return followingId;\n    }\n \n    public void setFollowingId(int followingId) {\n        this.followingId = followingId;\n    }\n\n    public User getFollower() {\n        return follower;\n    }\n\n\n    public void setFollower(User follower) {\n        this.follower = follower;\n    }\n\n\n    public User getFollowing() {\n        return following;\n    }\n\n\n    public void setFollowing(User following) {\n        this.following = following;\n    }\n}\n\n</code></pre>\n<p><strong>User.java</strong></p>\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@Entity\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int userId;\n\n    @NotNull\n    private String username;\n    @Email(message = &quot;entered email is not valid.&quot;, regexp = &quot;[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,3}&quot;, flags = Pattern.Flag.CASE_INSENSITIVE)\n    @NotNull\n    private String email;\n\n    @NotNull\n    private String password;\n\n \n    public int getUserId() {\n        return userId;\n    }\n\n    public @NotNull String getUsername() {\n        return username;\n    }\n\n    public void setUsername(@NotNull String username) {\n        this.username = username;\n    }\n\n    public @NotNull String getEmail() {\n        return email;\n    }\n\n    public void setEmail(@NotNull String email) {\n        this.email = email;\n    }\n\n    public @NotNull String getPassword() {\n        return password;\n    }\n\n    public void setPassword(@NotNull String password) {\n        this.password = password;\n    }\n}\n</code></pre>\n<p><strong>FollowController.java</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/users/{userId}/follow&quot;)\npublic class FollowController {\n    @Autowired\n    FollowService fs;\n\n    @PostMapping\n    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; followThisUser(@PathVariable(&quot;userId&quot;) int userId, @RequestBody Follow follow, HttpServletRequest request) throws Exception {\n        Follow newFollow = fs.followUser(userId, follow);\n\n        return ResponseHandler\n                .generateResponse(newFollow, HttpStatus.CREATED, &quot;user with userId &quot;+follow.getFollowerId()+&quot; followed the user with userId &quot;+userId, request.getRequestURI());\n    }\n}\n</code></pre>\n<p><strong>FollowService.java</strong></p>\n<pre><code>@Service\npublic class FollowService {\n    @Autowired\n    FollowRepo fr;\n\n    public Follow followUser(int userId, Follow follow) {\n        follow.setFollowingId(userId);\n        Follow savedFollow = fr.save(follow);\n        // record saved to the database\n        // Now I fetch it using Id\n        // Here I want to get the follower and following fields\n        /*\n          Follow follow = getByFollowId(savedFollow.getFollowId());\n          System.out.println(follow.getFollower()); // I am getting null\n          System.out.println(follow.getFollowing()); // I am getting null\n        */\n\n        return savedFollow;\n    }\n\n    public Follow getByFollowId(int followId) throws Exception {\n        Follow follow = fr.findByFollowId(followId);\n        if(follow == null){\n            throw new Exception(&quot;Follow not found with followId &quot;+followId);\n        }\n        return follow;\n    }\n}\n\n</code></pre>\n<p><strong>FollowRepo.java</strong></p>\n<pre><code>public interface FollowRepo extends JpaRepository&lt;Follow, Integer&gt; {\n    Follow findByFollowerIdAndFollowingId(int followerId, int followindId);\n    Follow findByFollowId(int followId);\n}\n</code></pre>\n<h1><strong>What I tried?</strong></h1>\n<p>What I have done in service class(in comment section), Same thing I had tried in method <code>followThisUser()</code> in controller also to get the follower and following fields. But I am getting null there also.</p>\n<p><strong>Strange Thing</strong></p>\n<p>But If I created another separate controller <code>TestController</code> there I am trying to do the same and I am getting what I had expected.</p>\n<p><strong>TestController.java</strong></p>\n<pre><code>@RestController\npublic class TestController {\n    @Autowired\n    FollowService fs;\n\n    @GetMapping(&quot;/test/{followId}&quot;)\n    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; display(@PathVariable(&quot;followId&quot;) int followId, HttpServletRequest request) throws Exception {\n        System.out.println(followId);\n        Follow follow = fs.getByFollowId(followId);\n \n        System.out.println(follow.getFollower()); // not null, fine\n        System.out.println(follow.getFollowing()); // not null, fine\n\n        System.out.println(follow.getFollower().getUsername()); // also fine\n\n        return ResponseHandler\n                .generateResponse(follow, HttpStatus.OK, &quot;fetched&quot;, request.getRequestURI());\n    }\n}\n</code></pre>\n<h1><strong>Expectation</strong></h1>\n<p>I just want to know the reason of above happening and what to do to meet the expectation?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","hsqldb"],"comments":[{"owner":{"account_id":9842376,"reputation":537,"user_id":7465516,"display_name":"julaine"},"score":0,"creation_date":1689787966,"post_id":76723846,"comment_id":135264413,"body_markdown":"What code or configuration do you have that makes you think `data.sql` should be read? This name does not pop up anywhere in your snippets.","body":"What code or configuration do you have that makes you think <code>data.sql</code> should be read? This name does not pop up anywhere in your snippets."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1689791492,"post_id":76723846,"comment_id":135265089,"body_markdown":"Your properties look good for me. Where did you put the `data.sql` file? Is it on the classpath? Like in `src/main/resources`","body":"Your properties look good for me. Where did you put the <code>data.sql</code> file? Is it on the classpath? Like in <code>src&#47;main&#47;resources</code>"},{"owner":{"account_id":1424447,"reputation":107,"user_id":1348348,"accept_rate":60,"display_name":"Riggster"},"score":0,"creation_date":1689792232,"post_id":76723846,"comment_id":135265230,"body_markdown":"I put the data.sql file in src/main/resources/","body":"I put the data.sql file in src/main/resources/"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689792909,"post_id":76723846,"comment_id":135265391,"body_markdown":"Where is the code that deals with the sql script?","body":"Where is the code that deals with the sql script?"}],"owner":{"account_id":1424447,"reputation":107,"user_id":1348348,"accept_rate":60,"display_name":"Riggster"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689787691,"creation_date":1689787691,"question_id":76723846,"body_markdown":"I have created an API using Spring Boot, and when I run it, I am able to execute CRUD commands as expected. However, my data.sql file is not being used to pre-populate my in-memory database. Can anyone provide any insights on how to fix this? Here are the applicable configurations I&#39;m using:\r\n\r\n\r\n```\r\npom.xml\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n```\r\napplication.properties\r\n\r\nspring.jpa.defer-datasource-initialization=true\r\nspring.sql.init.mode=always\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n\r\nspring.datasource.driver-class-name=org.hsqldb.jdbc.JDBCDriver\r\nspring.datasource.url=jdbc:hsqldb:mem:testdb;DB_CLOSE_DELAY=-1\r\nspring.datasource.username=sa\r\nspring.datasource.password=\r\nspring.jpa.hibernate.ddl-auto=create\r\n```","title":"HSQL db not initializing from data.sql in Spring Boot project","body":"<p>I have created an API using Spring Boot, and when I run it, I am able to execute CRUD commands as expected. However, my data.sql file is not being used to pre-populate my in-memory database. Can anyone provide any insights on how to fix this? Here are the applicable configurations I'm using:</p>\n<pre><code>pom.xml\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n    &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre><code>application.properties\n\nspring.jpa.defer-datasource-initialization=true\nspring.sql.init.mode=always\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\n\nspring.datasource.driver-class-name=org.hsqldb.jdbc.JDBCDriver\nspring.datasource.url=jdbc:hsqldb:mem:testdb;DB_CLOSE_DELAY=-1\nspring.datasource.username=sa\nspring.datasource.password=\nspring.jpa.hibernate.ddl-auto=create\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven","resttemplate"],"comments":[{"owner":{"account_id":351196,"reputation":2555,"user_id":687515,"display_name":"daniel.eichten"},"score":7,"creation_date":1458646224,"post_id":36151421,"comment_id":59943392,"body_markdown":"Upvoting your question cause it is not obvious that when everything is magically linked a `RestTemplate` is not automatically created for you.","body":"Upvoting your question cause it is not obvious that when everything is magically linked a <code>RestTemplate</code> is not automatically created for you."},{"owner":{"account_id":1780071,"reputation":3303,"user_id":1623046,"accept_rate":64,"display_name":"Matt"},"score":0,"creation_date":1460646975,"post_id":36151421,"comment_id":60850541,"body_markdown":"Upvoted - the tutorial on Spring Boot&#39;s own page says nothing about creating a RestTemplate Bean!!","body":"Upvoted - the tutorial on Spring Boot&#39;s own page says nothing about creating a RestTemplate Bean!!"},{"owner":{"account_id":31617,"reputation":52351,"user_id":86967,"accept_rate":56,"display_name":"Brent Bradburn"},"score":1,"creation_date":1528142816,"post_id":36151421,"comment_id":88385760,"body_markdown":"Similar: https://stackoverflow.com/q/28024942/86967","body":"Similar: <a href=\"https://stackoverflow.com/q/28024942/86967\">stackoverflow.com/q/28024942/86967</a>"}],"answers":[{"tags":[],"owner":{"account_id":1744250,"reputation":6709,"user_id":1594817,"accept_rate":69,"display_name":"Vinay Veluri"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1458642164,"creation_date":1458642164,"answer_id":36151774,"question_id":36151421,"body_markdown":"Error points directly that `RestTemplate` bean is not defined in context and it cannot load the beans.\r\n\r\n 1. Define a bean for RestTemplate and then use it\r\n 2. Use a new instance of the RestTemplate\r\n\r\nIf you are sure that the bean is defined for the RestTemplate then use the following to print the beans that are available in the context loaded by spring boot application\r\n\r\n    ApplicationContext ctx = SpringApplication.run(Application.class, args);\r\n    String[] beanNames = ctx.getBeanDefinitionNames();\r\n    Arrays.sort(beanNames);\r\n    for (String beanName : beanNames) {\r\n        System.out.println(beanName);\r\n    }\r\n\r\nIf this contains the bean by the name/type given, then all good. Or else define a new bean and then use it.","title":"Could not autowire field:RestTemplate in Spring boot application","body":"<p>Error points directly that <code>RestTemplate</code> bean is not defined in context and it cannot load the beans.</p>\n\n<ol>\n<li>Define a bean for RestTemplate and then use it</li>\n<li>Use a new instance of the RestTemplate</li>\n</ol>\n\n<p>If you are sure that the bean is defined for the RestTemplate then use the following to print the beans that are available in the context loaded by spring boot application</p>\n\n<pre><code>ApplicationContext ctx = SpringApplication.run(Application.class, args);\nString[] beanNames = ctx.getBeanDefinitionNames();\nArrays.sort(beanNames);\nfor (String beanName : beanNames) {\n    System.out.println(beanName);\n}\n</code></pre>\n\n<p>If this contains the bean by the name/type given, then all good. Or else define a new bean and then use it.</p>\n"},{"comments":[{"owner":{"account_id":351196,"reputation":2555,"user_id":687515,"display_name":"daniel.eichten"},"score":52,"creation_date":1458646315,"post_id":36151777,"comment_id":59943453,"body_markdown":"Upvoted the question and your answer cause It&#39;s not obvious that you have to manually create a `RestTemplate` when everything else is magically created and linked for you. Especially if one used spring-cloud before which provides an autoconfigured `RestTemplate`. ;-)","body":"Upvoted the question and your answer cause It&#39;s not obvious that you have to manually create a <code>RestTemplate</code> when everything else is magically created and linked for you. Especially if one used spring-cloud before which provides an autoconfigured <code>RestTemplate</code>. ;-)"},{"owner":{"account_id":6207928,"reputation":2802,"user_id":4835230,"accept_rate":40,"display_name":"Khuzi"},"score":2,"creation_date":1458705151,"post_id":36151777,"comment_id":59975942,"body_markdown":"Honestly, that was the reason I put this issue here in forum. I was expecting RestTemplate to be linked for me. :-)  This was working fine when I had included Eureka dependency in POM.xml. It was working fine without defining RestTemplate bean. One of the classes of Eureka might have defined this bean or so.","body":"Honestly, that was the reason I put this issue here in forum. I was expecting RestTemplate to be linked for me. :-)  This was working fine when I had included Eureka dependency in POM.xml. It was working fine without defining RestTemplate bean. One of the classes of Eureka might have defined this bean or so."},{"owner":{"account_id":5534610,"reputation":1044,"user_id":4393381,"display_name":"Mensur"},"score":8,"creation_date":1474973881,"post_id":36151777,"comment_id":66743075,"body_markdown":"Just an update. From Spring Boot 1.4.0  `RestTemplateBuilder` can be used for managing `RestTemplate` instances. Example here https://spring.io/guides/gs/consuming-rest/","body":"Just an update. From Spring Boot 1.4.0  <code>RestTemplateBuilder</code> can be used for managing <code>RestTemplate</code> instances. Example here <a href=\"https://spring.io/guides/gs/consuming-rest/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/consuming-rest</a>"},{"owner":{"account_id":2393310,"reputation":1047,"user_id":2092716,"accept_rate":53,"display_name":"ZeroGraviti"},"score":0,"creation_date":1476993765,"post_id":36151777,"comment_id":67595945,"body_markdown":"I cant yet upgrade to SB 1.4.0. I want to do this with 1.3.8.RELEASE but @g00glen00b solution didn&#39;t work for me. I am also using `spring-cloud-netflix` artifactid with version `1.1.5.RELEASE`. My RestTemplate is being called from an `@RestController` java class which uses `@Autowired` for the `RestTemplate`. Can someone please help ?","body":"I cant yet upgrade to SB 1.4.0. I want to do this with 1.3.8.RELEASE but @g00glen00b solution didn&#39;t work for me. I am also using <code>spring-cloud-netflix</code> artifactid with version <code>1.1.5.RELEASE</code>. My RestTemplate is being called from an <code>@RestController</code> java class which uses <code>@Autowired</code> for the <code>RestTemplate</code>. Can someone please help ?"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1477053777,"post_id":36151777,"comment_id":67621066,"body_markdown":"@ZeroGraviti, can you create a new question? I think this problem is unrelated to this question/answer.","body":"@ZeroGraviti, can you create a new question? I think this problem is unrelated to this question/answer."},{"owner":{"account_id":1632225,"reputation":1661,"user_id":1506545,"display_name":"Avec"},"score":0,"creation_date":1480542834,"post_id":36151777,"comment_id":69011619,"body_markdown":"This answer does not work for Spring Boot 1.4.x\njava.lang.IllegalStateException: Test classes cannot include @Bean methods","body":"This answer does not work for Spring Boot 1.4.x java.lang.IllegalStateException: Test classes cannot include @Bean methods"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1480615126,"post_id":36151777,"comment_id":69046875,"body_markdown":"@Avec this question/answer is not about test classes though.","body":"@Avec this question/answer is not about test classes though."},{"owner":{"account_id":416171,"reputation":31427,"user_id":791406,"accept_rate":69,"display_name":"raffian"},"score":0,"creation_date":1519414419,"post_id":36151777,"comment_id":84916688,"body_markdown":"Autowired* (just add method)","body":"Autowired* (just add method)"}],"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"comment_count":8,"down_vote_count":1,"up_vote_count":301,"is_accepted":true,"score":300,"last_activity_date":1654768610,"creation_date":1458642174,"answer_id":36151777,"question_id":36151421,"body_markdown":"It&#39;s exactly what the error says. You didn&#39;t create any `RestTemplate` bean, so it can&#39;t autowire any. If you need a `RestTemplate` you&#39;ll have to provide one. For example, add the following to **TestMicroServiceApplication.java**:\r\n\r\n```java\r\n@Bean\r\npublic RestTemplate restTemplate() {\r\n    return new RestTemplate();\r\n}\r\n```\r\n\r\nSince Spring boot 1.4, there&#39;s also a convenient builder that you can autowire and use to create a `RestTemplate` bean. The benefit is that you can use the builder pattern to register interceptors, customizers, ... .\r\n\r\n```java\r\n@Bean\r\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\r\n    return builder.build();\r\n}\r\n```\r\n\r\nNote, in earlier versions of the Spring cloud starter for Eureka, a `RestTemplate` bean was created for you, but this is no longer true. ","title":"Could not autowire field:RestTemplate in Spring boot application","body":"<p>It's exactly what the error says. You didn't create any <code>RestTemplate</code> bean, so it can't autowire any. If you need a <code>RestTemplate</code> you'll have to provide one. For example, add the following to <strong>TestMicroServiceApplication.java</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RestTemplate restTemplate() {\n    return new RestTemplate();\n}\n</code></pre>\n<p>Since Spring boot 1.4, there's also a convenient builder that you can autowire and use to create a <code>RestTemplate</code> bean. The benefit is that you can use the builder pattern to register interceptors, customizers, ... .</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\n    return builder.build();\n}\n</code></pre>\n<p>Note, in earlier versions of the Spring cloud starter for Eureka, a <code>RestTemplate</code> bean was created for you, but this is no longer true.</p>\n"},{"tags":[],"owner":{"account_id":3377928,"reputation":411,"user_id":2835706,"display_name":"Mark K."},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1665731797,"creation_date":1475725397,"answer_id":39887168,"question_id":36151421,"body_markdown":"If a TestRestTemplate is a valid option in your unit test, this documentation might be relevant\r\n\r\nhttp://docs.spring.io/spring-boot/docs/1.4.1.RELEASE/reference/htmlsingle/#boot-features-rest-templates-test-utility\r\n\r\nShort answer: if using\r\n\r\n    @SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT)\r\n\r\nthen `@Autowired` will work. If using     \r\n\r\n    @SpringBootTest(webEnvironment=WebEnvironment.MOCK)\r\n\r\nthen create a TestRestTemplate like this\r\n\r\n    private TestRestTemplate template = new TestRestTemplate();\r\n\r\nThis will help to avoid creation of a RestTemplate that wouldn&#39;t be used outside tests.","title":"Could not autowire field:RestTemplate in Spring boot application","body":"<p>If a TestRestTemplate is a valid option in your unit test, this documentation might be relevant</p>\n<p><a href=\"http://docs.spring.io/spring-boot/docs/1.4.1.RELEASE/reference/htmlsingle/#boot-features-rest-templates-test-utility\" rel=\"nofollow noreferrer\">http://docs.spring.io/spring-boot/docs/1.4.1.RELEASE/reference/htmlsingle/#boot-features-rest-templates-test-utility</a></p>\n<p>Short answer: if using</p>\n<pre><code>@SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT)\n</code></pre>\n<p>then <code>@Autowired</code> will work. If using</p>\n<pre><code>@SpringBootTest(webEnvironment=WebEnvironment.MOCK)\n</code></pre>\n<p>then create a TestRestTemplate like this</p>\n<pre><code>private TestRestTemplate template = new TestRestTemplate();\n</code></pre>\n<p>This will help to avoid creation of a RestTemplate that wouldn't be used outside tests.</p>\n"},{"tags":[],"owner":{"account_id":1785654,"reputation":747,"user_id":1627174,"display_name":"Pierrick HYMBERT"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1635955899,"creation_date":1511958172,"answer_id":47552799,"question_id":36151421,"body_markdown":"&gt;  Since RestTemplate instances often need to be customized before being used, Spring Boot does not provide any single auto-configured RestTemplate bean.\r\n\r\n[RestTemplateBuilder][1] offers proper way to configure and instantiate the rest template bean, for example for basic auth or interceptors.\r\n\r\n```java\r\n@Bean\r\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\r\n    return builder\r\n            .basicAuthorization(&quot;user&quot;, &quot;name&quot;) // Optional Basic auth example\r\n            .interceptors(new MyCustomInterceptor()) // Optional Custom interceptors, etc..\r\n            .build();\r\n}\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-restclient.html","title":"Could not autowire field:RestTemplate in Spring boot application","body":"<blockquote>\n<p>Since RestTemplate instances often need to be customized before being used, Spring Boot does not provide any single auto-configured RestTemplate bean.</p>\n</blockquote>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-restclient.html\" rel=\"nofollow noreferrer\">RestTemplateBuilder</a> offers proper way to configure and instantiate the rest template bean, for example for basic auth or interceptors.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\n    return builder\n            .basicAuthorization(&quot;user&quot;, &quot;name&quot;) // Optional Basic auth example\n            .interceptors(new MyCustomInterceptor()) // Optional Custom interceptors, etc..\n            .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4757933,"reputation":59,"user_id":3846187,"display_name":"vineet"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1560688969,"creation_date":1560676499,"answer_id":56617536,"question_id":36151421,"body_markdown":"Please make sure two things:\r\n\r\n1- Use `@Bean` annotation with the method. \r\n   \r\n    @Bean\r\n    public RestTemplate restTemplate(RestTemplateBuilder builder){\r\n        return builder.build();\r\n    }\r\n\r\n2- Scope of this method should be **public** not **private**. \r\n\r\nComplete Example - \r\n\r\n    @Service\r\n    public class MakeHttpsCallImpl implements MakeHttpsCall {\r\n\r\n    @Autowired\r\n    private RestTemplate restTemplate;\r\n\r\n    @Override\r\n    public String makeHttpsCall() {\r\n        return restTemplate.getForObject(&quot;https://localhost:8085/onewayssl/v1/test&quot;,String.class);\r\n    }\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate(RestTemplateBuilder builder){\r\n        return builder.build();\r\n    }\r\n    }\r\n","title":"Could not autowire field:RestTemplate in Spring boot application","body":"<p>Please make sure two things:</p>\n\n<p>1- Use <code>@Bean</code> annotation with the method. </p>\n\n<pre><code>@Bean\npublic RestTemplate restTemplate(RestTemplateBuilder builder){\n    return builder.build();\n}\n</code></pre>\n\n<p>2- Scope of this method should be <strong>public</strong> not <strong>private</strong>. </p>\n\n<p>Complete Example - </p>\n\n<pre><code>@Service\npublic class MakeHttpsCallImpl implements MakeHttpsCall {\n\n@Autowired\nprivate RestTemplate restTemplate;\n\n@Override\npublic String makeHttpsCall() {\n    return restTemplate.getForObject(\"https://localhost:8085/onewayssl/v1/test\",String.class);\n}\n\n@Bean\npublic RestTemplate restTemplate(RestTemplateBuilder builder){\n    return builder.build();\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4163851,"reputation":430,"user_id":3413286,"accept_rate":26,"display_name":"Hamdy"},"score":0,"creation_date":1631871939,"post_id":60433236,"comment_id":122345831,"body_markdown":"do you think thar the getForObject() violate the SOLID principales ? Wich one ?","body":"do you think thar the getForObject() violate the SOLID principales ? Wich one ?"},{"owner":{"account_id":15216309,"reputation":575,"user_id":10979593,"display_name":"Padi kodwo Amu"},"score":0,"creation_date":1649505506,"post_id":60433236,"comment_id":126895730,"body_markdown":"@Hamdy you violate the SOLID principle by putting your main logic in the controller ... controllers are meant to be entry points for your code not processors of the request. in spring you will usually use a service class for such functions.","body":"@Hamdy you violate the SOLID principle by putting your main logic in the controller ... controllers are meant to be entry points for your code not processors of the request. in spring you will usually use a service class for such functions."}],"tags":[],"owner":{"account_id":15216309,"reputation":575,"user_id":10979593,"display_name":"Padi kodwo Amu"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582806446,"creation_date":1582806446,"answer_id":60433236,"question_id":36151421,"body_markdown":"The simplest way I was able to achieve a similar feat to use the code below ([reference][1]),\r\nbut I would suggest not to make API calls in controllers([SOLID principles][2]).\r\nAlso autowiring this way is better optimsed than the traditional way of doing it.\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.web.client.RestTemplateBuilder;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.bind.annotation.PathVariable;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import org.springframework.web.client.RestTemplate;\r\n    \r\n    @RestController\r\n    public class TestController {\r\n    \r\n        private final RestTemplate restTemplate;\r\n    \r\n    \r\n        @Autowired\r\n        public TestController(RestTemplateBuilder builder) {\r\n            this.restTemplate = builder.build();\r\n        }\r\n    \r\n        @RequestMapping(value=&quot;/micro/order/{id}&quot;, method= RequestMethod.GET, produces= MediaType.ALL_VALUE)\r\n        public String placeOrder(@PathVariable(&quot;id&quot;) int customerId){\r\n    \r\n            System.out.println(&quot;Hit ===&gt; PlaceOrder&quot;);\r\n    \r\n            Object[] customerJson = restTemplate.getForObject(&quot;http://localhost:8080/micro/customers&quot;, Object[].class);\r\n    \r\n            System.out.println(customerJson.toString());\r\n    \r\n            return &quot;false&quot;;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-rest-template-builder\r\n  [2]: https://www.baeldung.com/solid-principles","title":"Could not autowire field:RestTemplate in Spring boot application","body":"<p>The simplest way I was able to achieve a similar feat to use the code below (<a href=\"https://www.baeldung.com/spring-rest-template-builder\" rel=\"nofollow noreferrer\">reference</a>),\nbut I would suggest not to make API calls in controllers(<a href=\"https://www.baeldung.com/solid-principles\" rel=\"nofollow noreferrer\">SOLID principles</a>).\nAlso autowiring this way is better optimsed than the traditional way of doing it.</p>\n\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.web.client.RestTemplateBuilder;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.client.RestTemplate;\n\n@RestController\npublic class TestController {\n\n    private final RestTemplate restTemplate;\n\n\n    @Autowired\n    public TestController(RestTemplateBuilder builder) {\n        this.restTemplate = builder.build();\n    }\n\n    @RequestMapping(value=\"/micro/order/{id}\", method= RequestMethod.GET, produces= MediaType.ALL_VALUE)\n    public String placeOrder(@PathVariable(\"id\") int customerId){\n\n        System.out.println(\"Hit ===&gt; PlaceOrder\");\n\n        Object[] customerJson = restTemplate.getForObject(\"http://localhost:8080/micro/customers\", Object[].class);\n\n        System.out.println(customerJson.toString());\n\n        return \"false\";\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9005111,"reputation":574,"user_id":6712167,"display_name":"Ranushka Lakmal Sankalpa"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1587155778,"creation_date":1587155778,"answer_id":61280248,"question_id":36151421,"body_markdown":" - You must add \r\n`@Bean \r\npublic RestTemplate restTemplate(RestTemplateBuilder builder){\r\nreturn builder.build();\r\n}`","title":"Could not autowire field:RestTemplate in Spring boot application","body":"<ul>\n<li>You must add \n<code>@Bean \npublic RestTemplate restTemplate(RestTemplateBuilder builder){\nreturn builder.build();\n}</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15536211,"reputation":241,"user_id":11208348,"display_name":"Fazle Subhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1587158338,"creation_date":1587158338,"answer_id":61280865,"question_id":36151421,"body_markdown":"  you are trying to inject the restTemplate but you need to create configuration class .\r\n then there you need to create bean that return you new RestTemplate see the below example.\r\n    \r\n    \r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    \r\n    @Configuration\r\n    public class YourConfigClass {\r\n    \r\n    \r\n    \t@Bean\r\n    \tpublic RestTemplate restTesmplate() {\r\n    \t\treturn new RestTemplate();\r\n    \t}\r\n    \t\r\n    }\r\n\r\n","title":"Could not autowire field:RestTemplate in Spring boot application","body":"<p>you are trying to inject the restTemplate but you need to create configuration class .\n then there you need to create bean that return you new RestTemplate see the below example.</p>\n\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n\n@Configuration\npublic class YourConfigClass {\n\n\n    @Bean\n    public RestTemplate restTesmplate() {\n        return new RestTemplate();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":6207928,"reputation":2802,"user_id":4835230,"accept_rate":40,"display_name":"Khuzi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":248765,"favorite_count":0,"down_vote_count":1,"up_vote_count":189,"accepted_answer_id":36151777,"answer_count":8,"score":188,"last_activity_date":1689787043,"creation_date":1458641293,"question_id":36151421,"body_markdown":"I am getting below exception while running `Spring Boot` application during start up:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: \r\n    Error creating bean with name &#39;testController&#39;: \r\n    Injection of autowired dependencies failed; \r\n    nested exception is\r\n    org.springframework.beans.factory.BeanCreationException: \r\n    Could not autowire field: \r\n    private org.springframework.web.client.RestTemplate \r\n    com.micro.test.controller.TestController.restTemplate; \r\n    nested exception is \r\n    org.springframework.beans.factory.NoSuchBeanDefinitionException:\r\n    No qualifying bean of type \r\n    [org.springframework.web.client.RestTemplate] \r\n    found for  dependency: expected at least 1 bean which qualifies \r\n    as autowire candidate for this dependency. \r\n    Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\r\nI am autowiring `RestTemplate` in my TestController. I am using Maven for dependency management.\r\n\r\n**TestMicroServiceApplication.java**\r\n\r\n    package com.micro.test;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class TestMicroServiceApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(TestMicroServiceApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n**TestController.java**\r\n\r\n    package com.micro.test.controller;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.bind.annotation.PathVariable;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import org.springframework.web.client.RestTemplate;\r\n    \r\n    @RestController\r\n    public class TestController {\r\n    \t\r\n    \t@Autowired\r\n    \tprivate RestTemplate restTemplate;\r\n    \t\t\r\n    \t@RequestMapping(value=&quot;/micro/order/{id}&quot;,\r\n    \t\t            method=RequestMethod.GET,\r\n    \t\t            produces=MediaType.ALL_VALUE)\r\n    \tpublic String placeOrder(@PathVariable(&quot;id&quot;) int customerId){\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;Hit ===&gt; PlaceOrder&quot;);\r\n    \r\n    \t\tObject[] customerJson = restTemplate.getForObject(&quot;http://localhost:8080/micro/customers&quot;, Object[].class);\r\n    \t\t\r\n    \t\tSystem.out.println(customerJson.toString());\r\n    \t\t\r\n    \t\treturn &quot;false&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\n**POM.xml**\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;com.micro.test&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;Test-MicroService&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;Test-MicroService&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.3.3.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \t\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n","title":"Could not autowire field:RestTemplate in Spring boot application","body":"<p>I am getting below exception while running <code>Spring Boot</code> application during start up:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: \nError creating bean with name 'testController': \nInjection of autowired dependencies failed; \nnested exception is\norg.springframework.beans.factory.BeanCreationException: \nCould not autowire field: \nprivate org.springframework.web.client.RestTemplate \ncom.micro.test.controller.TestController.restTemplate; \nnested exception is \norg.springframework.beans.factory.NoSuchBeanDefinitionException:\nNo qualifying bean of type \n[org.springframework.web.client.RestTemplate] \nfound for  dependency: expected at least 1 bean which qualifies \nas autowire candidate for this dependency. \nDependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n</code></pre>\n<p>I am autowiring <code>RestTemplate</code> in my TestController. I am using Maven for dependency management.</p>\n<p><strong>TestMicroServiceApplication.java</strong></p>\n<pre><code>package com.micro.test;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class TestMicroServiceApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(TestMicroServiceApplication.class, args);\n    }\n}\n</code></pre>\n<p><strong>TestController.java</strong></p>\n<pre><code>package com.micro.test.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.client.RestTemplate;\n\n@RestController\npublic class TestController {\n    \n    @Autowired\n    private RestTemplate restTemplate;\n        \n    @RequestMapping(value=&quot;/micro/order/{id}&quot;,\n                    method=RequestMethod.GET,\n                    produces=MediaType.ALL_VALUE)\n    public String placeOrder(@PathVariable(&quot;id&quot;) int customerId){\n        \n        System.out.println(&quot;Hit ===&gt; PlaceOrder&quot;);\n\n        Object[] customerJson = restTemplate.getForObject(&quot;http://localhost:8080/micro/customers&quot;, Object[].class);\n        \n        System.out.println(customerJson.toString());\n        \n        return &quot;false&quot;;\n    }\n\n}\n</code></pre>\n<p><strong>POM.xml</strong></p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.micro.test&lt;/groupId&gt;\n    &lt;artifactId&gt;Test-MicroService&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;Test-MicroService&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.3.3.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    \n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1506671507,"post_id":46484198,"comment_id":79922715,"body_markdown":"can you also add an actual question? and what you tried. not just your assignment","body":"can you also add an actual question? and what you tried. not just your assignment"},{"owner":{"account_id":4176805,"reputation":25534,"user_id":3423097,"accept_rate":50,"display_name":"Mritunjay"},"score":1,"creation_date":1506671507,"post_id":46484198,"comment_id":79922717,"body_markdown":"What do you mean by *Cursor?*","body":"What do you mean by <i>Cursor?</i>"},{"owner":{"account_id":11766477,"reputation":1,"user_id":8610903,"display_name":"Niyaaz Kurban"},"score":0,"creation_date":1506671640,"post_id":46484198,"comment_id":79922801,"body_markdown":"the text pointer should atomatically start on the next line","body":"the text pointer should atomatically start on the next line"},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1506672226,"post_id":46484198,"comment_id":79923141,"body_markdown":"You are asking how to create `println(int[])` that should print every number on one line separated by spaces and then add a &quot;nextLine&quot; character. But what have you tried ? This is a really simple task to do ... Edit your question with a question and of course what you have tried because I don&#39;t see what would be the problem to create the method.","body":"You are asking how to create <code>println(int[])</code> that should print every number on one line separated by spaces and then add a &quot;nextLine&quot; character. But what have you tried ? This is a really simple task to do ... Edit your question with a question and of course what you have tried because I don&#39;t see what would be the problem to create the method."},{"owner":{"account_id":11766477,"reputation":1,"user_id":8610903,"display_name":"Niyaaz Kurban"},"score":0,"creation_date":1506672393,"post_id":46484198,"comment_id":79923231,"body_markdown":"im new at this so i really need all the help i can get pls ,what are the terms to use for this thing? can i see the code maybe ill understand it better.","body":"im new at this so i really need all the help i can get pls ,what are the terms to use for this thing? can i see the code maybe ill understand it better."},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1506672615,"post_id":46484198,"comment_id":79923350,"body_markdown":"But what have your tried ? I am not going to do it for you ... SO is not here to give you the code but to guide you. See [ask]","body":"But what have your tried ? I am not going to do it for you ... SO is not here to give you the code but to guide you. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"},{"owner":{"account_id":11766477,"reputation":1,"user_id":8610903,"display_name":"Niyaaz Kurban"},"score":0,"creation_date":1506672814,"post_id":46484198,"comment_id":79923479,"body_markdown":"public static void println(int[] seq) {\n\t    int x = {seq};\n\t\tint[] x; \n\t\tx = new int[seq];\n\t \n\t System.out.println(x[seq]);  i did this","body":"public static void println(int[] seq) { \t    int x = {seq}; \t\tint[] x;  \t\tx = new int[seq]; \t  \t System.out.println(x[seq]);  i did this"},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1506673219,"post_id":46484198,"comment_id":79923677,"body_markdown":"You have two variable called `x`, I don&#39;t see what you tried with `int x = {seq};` ... You don&#39;t loop on `seq` to print what you want.","body":"You have two variable called <code>x</code>, I don&#39;t see what you tried with <code>int x = {seq};</code> ... You don&#39;t loop on <code>seq</code> to print what you want."},{"owner":{"account_id":11766477,"reputation":1,"user_id":8610903,"display_name":"Niyaaz Kurban"},"score":0,"creation_date":1506673474,"post_id":46484198,"comment_id":79923808,"body_markdown":"public static void println(int[] seq) {\n\t\tint[] array = new int[]{};\n\t \n\t System.out.println(array); now i have this","body":"public static void println(int[] seq) { \t\tint[] array = new int[]{}; \t  \t System.out.println(array); now i have this"},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1506673941,"post_id":46484198,"comment_id":79924062,"body_markdown":"Why are you using `array`, you receive the array in parameter. Iterate `seq` and `print(seq[i])` then add new line. You should start following tutorials because I can&#39;t teach you everything about programming.","body":"Why are you using <code>array</code>, you receive the array in parameter. Iterate <code>seq</code> and <code>print(seq[i])</code> then add new line. You should start following tutorials because I can&#39;t teach you everything about programming."}],"answers":[{"tags":[],"owner":{"account_id":9021005,"reputation":4164,"user_id":6722100,"accept_rate":67,"display_name":"achAmh&#225;in"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508755371,"creation_date":1508755371,"answer_id":46887445,"question_id":46484198,"body_markdown":"You don&#39;t need all the assignments you&#39;re attempting in your method.\r\n\r\nYou can print the numbers in a few ways, two of which are below:\r\n\r\n    public static void println(int[] seq) {\r\n            //this will print them as an array, i.e. [1, 2, 3]\r\n            System.out.println(Arrays.toString(seq));\r\n            //and print a new line \r\n            System.out.print(&quot;\\n&quot;);\r\n    \r\n            //alternatively, if you just want to print the characters\r\n            for (int i = 0; i &lt; seq.length; i++) {\r\n                System.out.print(seq[i] + &quot; &quot;);\r\n            }\r\n        }\r\n\r\nYou just need to call the `println` method and pass in the `int[] array` you require.","title":"Print values from array","body":"<p>You don't need all the assignments you're attempting in your method.</p>\n\n<p>You can print the numbers in a few ways, two of which are below:</p>\n\n<pre><code>public static void println(int[] seq) {\n        //this will print them as an array, i.e. [1, 2, 3]\n        System.out.println(Arrays.toString(seq));\n        //and print a new line \n        System.out.print(\"\\n\");\n\n        //alternatively, if you just want to print the characters\n        for (int i = 0; i &lt; seq.length; i++) {\n            System.out.print(seq[i] + \" \");\n        }\n    }\n</code></pre>\n\n<p>You just need to call the <code>println</code> method and pass in the <code>int[] array</code> you require.</p>\n"},{"tags":[],"owner":{"account_id":26562345,"reputation":1,"user_id":20189986,"display_name":"Rafiya Quazi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689786557,"creation_date":1689786557,"answer_id":76723704,"question_id":46484198,"body_markdown":"   Use for each loop to print values of array. \r\n\r\n    public static void println(int[] seq) { \r\n        for(Integer value: seq){\r\n          System.out.println(value);\r\n       }\r\n    }","title":"Print values from array","body":"<p>Use for each loop to print values of array.</p>\n<pre><code>public static void println(int[] seq) { \n    for(Integer value: seq){\n      System.out.println(value);\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":11766477,"reputation":1,"user_id":8610903,"display_name":"Niyaaz Kurban"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"answer_count":2,"score":-6,"last_activity_date":1689786557,"creation_date":1506671452,"question_id":46484198,"body_markdown":"How do I print the values from my array on one line, separated by a space?\r\n\r\nI also want to put the cursor on the next line, once printed.\r\n\r\nThis is my method I have to use:\r\n\r\n    public static void println(int[] seq){\r\n\r\nFor example: \r\n\r\n    println(new int[]{1, 2})  1 2\r\n\r\nHere is what I have tried:\r\n\r\n    public static void println(int[] seq) { \r\n        int x = {seq}; \r\n        int[] x; \r\n        x = new int[seq]; \r\n        System.out.println(x[seq]);\r\n    }\r\n","title":"Print values from array","body":"<p>How do I print the values from my array on one line, separated by a space?</p>\n\n<p>I also want to put the cursor on the next line, once printed.</p>\n\n<p>This is my method I have to use:</p>\n\n<pre><code>public static void println(int[] seq){\n</code></pre>\n\n<p>For example: </p>\n\n<pre><code>println(new int[]{1, 2})  1 2\n</code></pre>\n\n<p>Here is what I have tried:</p>\n\n<pre><code>public static void println(int[] seq) { \n    int x = {seq}; \n    int[] x; \n    x = new int[seq]; \n    System.out.println(x[seq]);\n}\n</code></pre>\n"},{"tags":["java","optimization","challenge-response"],"comments":[{"owner":{"account_id":9165235,"reputation":15414,"user_id":6815131,"display_name":"Joe C"},"score":1,"creation_date":1480758294,"post_id":40946025,"comment_id":69103105,"body_markdown":"Have you tried testing it?","body":"Have you tried testing it?"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"score":0,"creation_date":1480762836,"post_id":40946025,"comment_id":69104205,"body_markdown":"In general your method does work however it does have difficulty with binary strings that end with 0&#39;s as with &quot;10100&quot;. For this binary string it assumes a gap length of 3 whereas it is a gap length of only 1. So, your method is faulty.","body":"In general your method does work however it does have difficulty with binary strings that end with 0&#39;s as with &quot;10100&quot;. For this binary string it assumes a gap length of 3 whereas it is a gap length of only 1. So, your method is faulty."}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480762369,"creation_date":1480762369,"answer_id":40946956,"question_id":40946025,"body_markdown":"There is no need to place the contents of the binary string into an Array (unless of course this is a requirement), simply iterate through the string itself and use the String.substring() method to retrieve the string represented value of each binary digit, as in:\r\n\r\n    String digit = binaryString.substring(i, i+1);\r\n\r\nIt all boils down to counting the number of 0&#39;s **between** any set of 1&#39;s and keeping track of those 0&#39;s by using a Integer data type variable that is incremented every time a 0 is encountered. This same variable is reset to 0 every time a 1 is encountered but before it&#39;s reset you would compare it to yet another predefined Integer variable which would hold the longest run of 0&#39;s encountered, for example:\r\n\r\n    if(binaryString.substring(i, i+1).equals(&quot;1&quot;)) {\r\n        if (zeroHit &gt; longest) { longest = zeroHit; }\r\n        zeroHit = 0;\r\n    }\r\n    else { zeroHit++; }\r\n\r\nThe whole method might look something like this:\r\n\r\n    private static int solution(int intValue) {\r\n        String binaryString = Integer.toBinaryString(intValue);\r\n        int zeroHit = 0;\r\n        int longest = 0;\r\n        for (int i = 0; i &lt; binaryString.length(); i++) {\r\n            if(binaryString.substring(i, i+1).equals(&quot;1&quot;)) {\r\n                if (zeroHit &gt; longest) { longest = zeroHit; }\r\n                zeroHit = 0;\r\n            }\r\n            else { zeroHit++; }\r\n        }\r\n        return longest;\r\n    }\r\n\r\n","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>There is no need to place the contents of the binary string into an Array (unless of course this is a requirement), simply iterate through the string itself and use the String.substring() method to retrieve the string represented value of each binary digit, as in:</p>\n\n<pre><code>String digit = binaryString.substring(i, i+1);\n</code></pre>\n\n<p>It all boils down to counting the number of 0's <strong>between</strong> any set of 1's and keeping track of those 0's by using a Integer data type variable that is incremented every time a 0 is encountered. This same variable is reset to 0 every time a 1 is encountered but before it's reset you would compare it to yet another predefined Integer variable which would hold the longest run of 0's encountered, for example:</p>\n\n<pre><code>if(binaryString.substring(i, i+1).equals(\"1\")) {\n    if (zeroHit &gt; longest) { longest = zeroHit; }\n    zeroHit = 0;\n}\nelse { zeroHit++; }\n</code></pre>\n\n<p>The whole method might look something like this:</p>\n\n<pre><code>private static int solution(int intValue) {\n    String binaryString = Integer.toBinaryString(intValue);\n    int zeroHit = 0;\n    int longest = 0;\n    for (int i = 0; i &lt; binaryString.length(); i++) {\n        if(binaryString.substring(i, i+1).equals(\"1\")) {\n            if (zeroHit &gt; longest) { longest = zeroHit; }\n            zeroHit = 0;\n        }\n        else { zeroHit++; }\n    }\n    return longest;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1879131,"reputation":301,"user_id":1699708,"accept_rate":86,"display_name":"Vimal Panchal"},"score":0,"creation_date":1480874926,"post_id":40947033,"comment_id":69132904,"body_markdown":"Thank you for your answer @minary.. Thanks","body":"Thank you for your answer @minary.. Thanks"},{"owner":{"account_id":5604521,"reputation":174,"user_id":4439606,"accept_rate":83,"display_name":"quartzsaber"},"score":1,"creation_date":1480939974,"post_id":40947033,"comment_id":69157020,"body_markdown":"My pleasure :) If you liked my answer please mark this answer as answer. (Click the green check mark) or if you need something more, please don&#39;t hesitate to ask more!","body":"My pleasure :) If you liked my answer please mark this answer as answer. (Click the green check mark) or if you need something more, please don&#39;t hesitate to ask more!"}],"tags":[],"owner":{"account_id":5604521,"reputation":174,"user_id":4439606,"accept_rate":83,"display_name":"quartzsaber"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1480762893,"creation_date":1480762893,"answer_id":40947033,"question_id":40946025,"body_markdown":"I haven&#39;t tested  your code yet, but it seems very inefficient if your goal is just counting the longest &#39;binary gap&#39;. \r\n\r\nProblems in your code:\r\n\r\n - Makes `java.lang.String` when it can be just `char`. Making objects is much slower than making primitive types.\r\n - Makes a list when it&#39;s able to simply count. As long as you&#39;re only going to need size of the list, you can just count it in a integer variable.\r\n - Stupid algorithm. A substring of a string can&#39;t be longer than the original one. I&#39;m talking about the second `for` loop. For example, let&#39;s say you&#39;re counting binary gap of `1001`. Then your algorithm counts binary gap of `001` and then `01`. You don&#39;t need to count the second one at all. And it&#39;s happening becuase you have two for loops.\r\n\r\nThe biggest problem is, that it&#39;s possible to solve this problem without converting `int` into `java.lang.String` at all. And in case you got this problem from a textbook, I believe this is the &#39;correct&#39; answer: To use bitwise operators.\r\n\r\n\tpublic static int solution(int num) {\r\n\t\tint ptr; //Used for bitwise operation.\r\n\t\tfor(ptr=1; ptr&gt;0; ptr&lt;&lt;=1) //Find the lowest bit 1\r\n\t\t\tif((num&amp;ptr) != 0)\r\n\t\t\t\tbreak;\r\n\t\tint cnt=0; //Count the (possible) gap\r\n        int ret=0; //Keep the longest gap.\r\n\t\tfor(; ptr&gt;0; ptr&lt;&lt;=1) {\r\n\t\t\tif((num&amp;ptr) != 0) { //If it&#39;s bit 1\r\n\t\t\t\tret = cnt &lt; ret ? ret : cnt; //Get the bigger one between cnt and ret\r\n\t\t\t\tcnt=-1; //Exclude this bit\r\n\t\t\t}\r\n\t\t\tcnt++; //Increment the count. If this bit is 1, then cnt would become 0 beause we set the cnt as -1 instead of 0.\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>I haven't tested  your code yet, but it seems very inefficient if your goal is just counting the longest 'binary gap'. </p>\n\n<p>Problems in your code:</p>\n\n<ul>\n<li>Makes <code>java.lang.String</code> when it can be just <code>char</code>. Making objects is much slower than making primitive types.</li>\n<li>Makes a list when it's able to simply count. As long as you're only going to need size of the list, you can just count it in a integer variable.</li>\n<li>Stupid algorithm. A substring of a string can't be longer than the original one. I'm talking about the second <code>for</code> loop. For example, let's say you're counting binary gap of <code>1001</code>. Then your algorithm counts binary gap of <code>001</code> and then <code>01</code>. You don't need to count the second one at all. And it's happening becuase you have two for loops.</li>\n</ul>\n\n<p>The biggest problem is, that it's possible to solve this problem without converting <code>int</code> into <code>java.lang.String</code> at all. And in case you got this problem from a textbook, I believe this is the 'correct' answer: To use bitwise operators.</p>\n\n<pre><code>public static int solution(int num) {\n    int ptr; //Used for bitwise operation.\n    for(ptr=1; ptr&gt;0; ptr&lt;&lt;=1) //Find the lowest bit 1\n        if((num&amp;ptr) != 0)\n            break;\n    int cnt=0; //Count the (possible) gap\n    int ret=0; //Keep the longest gap.\n    for(; ptr&gt;0; ptr&lt;&lt;=1) {\n        if((num&amp;ptr) != 0) { //If it's bit 1\n            ret = cnt &lt; ret ? ret : cnt; //Get the bigger one between cnt and ret\n            cnt=-1; //Exclude this bit\n        }\n        cnt++; //Increment the count. If this bit is 1, then cnt would become 0 beause we set the cnt as -1 instead of 0.\n    }\n    return ret;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1635089,"reputation":1784,"user_id":1508806,"display_name":"BlackRainbow"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1506565447,"creation_date":1506565447,"answer_id":46460000,"question_id":40946025,"body_markdown":"Here is my modest solution. Now I see that it&#39;s looks like modification of \r\nDevilsHnd answer. I tested it\r\n\r\n    public int countZeros(int n) {\r\n            String binaryRep = Integer.toBinaryString(n);\r\n            char[] nChars = binaryRep.toCharArray();\r\n            int nElemLength = Math.min(binaryRep.lastIndexOf(&#39;1&#39;) + 1, nChars.length);\r\n            if (nElemLength &lt;= 2) {\r\n                return 0;\r\n            }\r\n            String[] elementsParts = binaryRep.substring(0, nElemLength).split(&quot;1&quot;);\r\n            int zeroLength = 0;\r\n            for (String elementsPart : elementsParts) {\r\n                if (elementsPart.length() &gt; zeroLength) {\r\n                    zeroLength = elementsPart.length();\r\n                }\r\n            }\r\n            return zeroLength;\r\n        }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Here is my modest solution. Now I see that it's looks like modification of \nDevilsHnd answer. I tested it</p>\n\n<pre><code>public int countZeros(int n) {\n        String binaryRep = Integer.toBinaryString(n);\n        char[] nChars = binaryRep.toCharArray();\n        int nElemLength = Math.min(binaryRep.lastIndexOf('1') + 1, nChars.length);\n        if (nElemLength &lt;= 2) {\n            return 0;\n        }\n        String[] elementsParts = binaryRep.substring(0, nElemLength).split(\"1\");\n        int zeroLength = 0;\n        for (String elementsPart : elementsParts) {\n            if (elementsPart.length() &gt; zeroLength) {\n                zeroLength = elementsPart.length();\n            }\n        }\n        return zeroLength;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12702442,"reputation":11,"user_id":9228767,"display_name":"Mario_1412"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516182760,"creation_date":1516182760,"answer_id":48298112,"question_id":40946025,"body_markdown":"I think your code is a little bit confusing,check this one.\r\n\r\n    public int solution(int n) {\r\n        if (n &lt;= 0) return 0;\r\n        char[] chars = Integer.toBinaryString(n).toCharArray();\r\n        ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;();\r\n        int maxCount = 0;\r\n        for (int i = 0; i &lt; chars.length; i++) {\r\n            while (chars[i] == &#39;0&#39; &amp;&amp; i + 1 &lt; chars.length) {\r\n                maxCount++;\r\n                i++;\r\n                if (i + 1 == chars.length &amp;&amp; chars[i] == &#39;0&#39;)\r\n                    maxCount = 0;\r\n            }\r\n            if (maxCount != 0)\r\n                arrayList.add(maxCount);\r\n            maxCount = 0;\r\n        }\r\n\r\n        return arrayList.isEmpty() ? 0 : Collections.max(arrayList);\r\n    }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>I think your code is a little bit confusing,check this one.</p>\n\n<pre><code>public int solution(int n) {\n    if (n &lt;= 0) return 0;\n    char[] chars = Integer.toBinaryString(n).toCharArray();\n    ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;();\n    int maxCount = 0;\n    for (int i = 0; i &lt; chars.length; i++) {\n        while (chars[i] == '0' &amp;&amp; i + 1 &lt; chars.length) {\n            maxCount++;\n            i++;\n            if (i + 1 == chars.length &amp;&amp; chars[i] == '0')\n                maxCount = 0;\n        }\n        if (maxCount != 0)\n            arrayList.add(maxCount);\n        maxCount = 0;\n    }\n\n    return arrayList.isEmpty() ? 0 : Collections.max(arrayList);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1323283,"reputation":1062,"user_id":1268634,"display_name":"Hafiz Waleed Hussain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1521879979,"creation_date":1521879979,"answer_id":49462725,"question_id":40946025,"body_markdown":"What about this algorithm. Is it bad for time performance or good?\r\n\r\n \r\n    int count = 0, prevCount = 0;\r\n\r\n    while (a &gt; 1) {\r\n      \r\n      if (a % 2 == 0) {\r\n         count++;\r\n         if (count &gt; prevCount)\r\n            prevCount++;\r\n         } else {\r\n                count = 0;\r\n            }    \r\n            a = a/2;\r\n        }\r\n\r\n        if(a % 2 == 0)\r\n           prevCount++;","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>What about this algorithm. Is it bad for time performance or good?</p>\n\n<pre><code>int count = 0, prevCount = 0;\n\nwhile (a &gt; 1) {\n\n  if (a % 2 == 0) {\n     count++;\n     if (count &gt; prevCount)\n        prevCount++;\n     } else {\n            count = 0;\n        }    \n        a = a/2;\n    }\n\n    if(a % 2 == 0)\n       prevCount++;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13285420,"reputation":1,"user_id":9591687,"display_name":"Mr Sadman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524170762,"creation_date":1524170762,"answer_id":49929981,"question_id":40946025,"body_markdown":"Hi this is my solution for this task.\r\nI had Task \r\nScore : 100%\r\nCorrectness : 100%\r\n\r\n    public int solution(int N) {\r\n        String binary = Integer.toBinaryString(N);\r\n        int[] table = new int[binary.length()];\r\n\r\n        for (int i=0;i&lt;binary.length();i++){\r\n            int number = Integer.parseInt(binary.substring(i,i+1));\r\n            table[i] = number;\r\n        }\r\n\r\n        int resu = 0;\r\n        int res = 0;\r\n        for (int i=0;i&lt;table.length;i++){\r\n            if (table[i] == 1){\r\n                if (resu &gt; res){\r\n                    res = resu;\r\n                }\r\n                resu = 0;\r\n            }else {\r\n                resu++;\r\n            }\r\n        }\r\n        \r\n        return res;\r\n    }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Hi this is my solution for this task.\nI had Task \nScore : 100%\nCorrectness : 100%</p>\n\n<pre><code>public int solution(int N) {\n    String binary = Integer.toBinaryString(N);\n    int[] table = new int[binary.length()];\n\n    for (int i=0;i&lt;binary.length();i++){\n        int number = Integer.parseInt(binary.substring(i,i+1));\n        table[i] = number;\n    }\n\n    int resu = 0;\n    int res = 0;\n    for (int i=0;i&lt;table.length;i++){\n        if (table[i] == 1){\n            if (resu &gt; res){\n                res = resu;\n            }\n            resu = 0;\n        }else {\n            resu++;\n        }\n    }\n\n    return res;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1888125,"reputation":601,"user_id":1706924,"accept_rate":100,"display_name":"Very Objective"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533791126,"creation_date":1533791126,"answer_id":51759194,"question_id":40946025,"body_markdown":"For the benefit of all, here is my solution to the Binary Gap which got me 100% for both Task Score and Task Correctness:\r\n\r\n\r\n    class Solution {\r\n        public int solution(int N) {\r\n     \t\tString nStr = Integer.toBinaryString(N);\r\n    \r\n    \t\tboolean isCounting = false;\r\n    \t\tint j=0;\r\n    \t\tint[] seqs = new int[32];\r\n    \t\tfor (int i=0; i&lt;nStr.length(); i++)\r\n    \t\t{\r\n    \t\t\tif ( nStr.charAt(i) == &#39;1&#39;)\r\n    \t\t\t{\r\n    \t\t\t\tif (!isCounting)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tisCounting = true;\r\n    \t\t\t\t\tseqs[j] = 0;\r\n    \t\t\t\t}\r\n    \t\t\t\telse // isCounting, turn it off\r\n    \t\t\t\t{\r\n    \t\t\t\t\tisCounting = false;\r\n    \t\t\t\t\tj++;\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t\telse // nStr.charAt(i) == &#39;0&#39;\r\n    \t\t\t{\r\n    \t\t\t\tif (!isCounting)\r\n    \t\t\t\t\tisCounting = true;\r\n    \t\t\t\tseqs[j]++;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t}\r\n    \t\tif (isCounting == true)\r\n    \t\t\tseqs[j] = 0;\r\n    \t\t\r\n    \t\tint maxGap = 0;\r\n    \t\tfor (int k=0; k&lt;seqs.length; k++)\r\n    \t        if (seqs[k] &gt; maxGap)\r\n    \t        \tmaxGap = seqs[k];\r\n    \t\treturn maxGap;\r\n       }\r\n    }\r\n\r\n","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>For the benefit of all, here is my solution to the Binary Gap which got me 100% for both Task Score and Task Correctness:</p>\n\n<pre><code>class Solution {\n    public int solution(int N) {\n        String nStr = Integer.toBinaryString(N);\n\n        boolean isCounting = false;\n        int j=0;\n        int[] seqs = new int[32];\n        for (int i=0; i&lt;nStr.length(); i++)\n        {\n            if ( nStr.charAt(i) == '1')\n            {\n                if (!isCounting)\n                {\n                    isCounting = true;\n                    seqs[j] = 0;\n                }\n                else // isCounting, turn it off\n                {\n                    isCounting = false;\n                    j++;\n                }\n\n            }\n            else // nStr.charAt(i) == '0'\n            {\n                if (!isCounting)\n                    isCounting = true;\n                seqs[j]++;\n            }\n\n        }\n        if (isCounting == true)\n            seqs[j] = 0;\n\n        int maxGap = 0;\n        for (int k=0; k&lt;seqs.length; k++)\n            if (seqs[k] &gt; maxGap)\n                maxGap = seqs[k];\n        return maxGap;\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10468919,"reputation":41,"user_id":7717455,"display_name":"Manuel Mosso"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541806125,"creation_date":1541801380,"answer_id":53233895,"question_id":40946025,"body_markdown":"**OBJECTIVE-C SOLUTION O(n)**\r\n\r\n**Results given by Codility** \r\n\r\nTask Score: 100%  \r\nCorrectness: 100%  \r\nPerformance: Not assesed\r\n\r\n**Time Complexity**\r\n\r\nThe worst case time complexity is O(n)\r\n\r\n**Algorithm Explanation**\r\n\r\n*FACTS*\r\n\r\nEvery valid gap starts with a &#39;1&#39; and close with another &#39;1&#39;, with at least one &#39;zero&#39; between them.\r\n\r\n - 1001   -  Is a valid gap&lt;br/&gt;\r\n - 00100  -  Isn&#39;t a valid gap&lt;br/&gt;\r\n - 10100  -  Is a valid gap&lt;br/&gt;\r\n - 11111  -  Isn&#39;t a valid gap&lt;br/&gt;\r\n\r\n\r\n\r\n*STEP 1*\r\n\r\n - Get bits representation one by one from the Rigth to the Left.\r\n\r\n - That means, for n=4, I&#39;ll get first a Zero, then another Zero, then a One, finally a Zero.  [0,1,0,0]\r\n\r\n - 4 -&gt; 0100\r\n\r\n\r\n\r\n\r\n*STEP 2*\r\n\r\n - Start looking for the first &#39;1&#39; - since our flag &#39;hasStartPattern&#39; is false in the first iteration, we&#39;ll look for the first occurrence of &#39;1&#39;, that means we have a valid start pattern and we change the flag &#39;hasStartPattern&#39; to true for the next iterations we should validate if the current bit is &#39;0&#39; and use a counter, in this case &#39;candidates&#39;.\r\n\r\n - Only if, there is another &#39;1&#39; in the incoming bits, we are sure that we have a valid binary gap, then we compare our previous &#39;candidates&#39; with our current &#39;gapCounter&#39; in order to keep the highest one.\r\n \r\n - In case that there isn&#39;t another &#39;1&#39; to close the gap, we never change the value of &#39;gapCounter&#39; and we return 0\r\n\r\n\r\n[Xcode Solution Here][1]\r\n\r\n  [1]: https://github.com/jmanuelmosso/CSWarmingInterview/blob/master/CSWarmingInterview/CodilityChallenges/Iterations/BinaryGap.m\r\n\r\n\r\n\r\n    -(int)solutionOne:(int)n {\r\n    \r\n        BOOL hasStartPattern = NO;\r\n        int candidates = 0;\r\n        int gapCounter = 0;\r\n        \r\n        while(n){\r\n            // STEP 1\r\n            NSString *bit = (n &amp; 1) ? @&quot;1&quot;: @&quot;0&quot;;\r\n            n /= 2;\r\n            \r\n            // STEP 2\r\n            if ( hasStartPattern  &amp;&amp; [bit isEqualToString:@&quot;0&quot;]) {\r\n                candidates++;\r\n            }\r\n            else if ( hasStartPattern  &amp;&amp; [bit isEqualToString:@&quot;1&quot;]) {\r\n                // At least one &#39;1&#39; exist as a close pattern\r\n                if (candidates &gt; gapCounter) {\r\n                    gapCounter = candidates;\r\n                }\r\n                candidates = 0;\r\n            }\r\n            else if ([bit isEqualToString:@&quot;1&quot;]) {\r\n                hasStartPattern = YES; // At least one &#39;1&#39; exist as an open pattern\r\n            }\r\n        }\r\n        return gapCounter;\r\n    }\r\n","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p><strong>OBJECTIVE-C SOLUTION O(n)</strong></p>\n\n<p><strong>Results given by Codility</strong> </p>\n\n<p>Task Score: 100%<br>\nCorrectness: 100%<br>\nPerformance: Not assesed</p>\n\n<p><strong>Time Complexity</strong></p>\n\n<p>The worst case time complexity is O(n)</p>\n\n<p><strong>Algorithm Explanation</strong></p>\n\n<p><em>FACTS</em></p>\n\n<p>Every valid gap starts with a '1' and close with another '1', with at least one 'zero' between them.</p>\n\n<ul>\n<li>1001   -  Is a valid gap<br/></li>\n<li>00100  -  Isn't a valid gap<br/></li>\n<li>10100  -  Is a valid gap<br/></li>\n<li>11111  -  Isn't a valid gap<br/></li>\n</ul>\n\n<p><em>STEP 1</em></p>\n\n<ul>\n<li><p>Get bits representation one by one from the Rigth to the Left.</p></li>\n<li><p>That means, for n=4, I'll get first a Zero, then another Zero, then a One, finally a Zero.  [0,1,0,0]</p></li>\n<li><p>4 -> 0100</p></li>\n</ul>\n\n<p><em>STEP 2</em></p>\n\n<ul>\n<li><p>Start looking for the first '1' - since our flag 'hasStartPattern' is false in the first iteration, we'll look for the first occurrence of '1', that means we have a valid start pattern and we change the flag 'hasStartPattern' to true for the next iterations we should validate if the current bit is '0' and use a counter, in this case 'candidates'.</p></li>\n<li><p>Only if, there is another '1' in the incoming bits, we are sure that we have a valid binary gap, then we compare our previous 'candidates' with our current 'gapCounter' in order to keep the highest one.</p></li>\n<li><p>In case that there isn't another '1' to close the gap, we never change the value of 'gapCounter' and we return 0</p></li>\n</ul>\n\n<p><a href=\"https://github.com/jmanuelmosso/CSWarmingInterview/blob/master/CSWarmingInterview/CodilityChallenges/Iterations/BinaryGap.m\" rel=\"nofollow noreferrer\">Xcode Solution Here</a></p>\n\n<pre><code>-(int)solutionOne:(int)n {\n\n    BOOL hasStartPattern = NO;\n    int candidates = 0;\n    int gapCounter = 0;\n\n    while(n){\n        // STEP 1\n        NSString *bit = (n &amp; 1) ? @\"1\": @\"0\";\n        n /= 2;\n\n        // STEP 2\n        if ( hasStartPattern  &amp;&amp; [bit isEqualToString:@\"0\"]) {\n            candidates++;\n        }\n        else if ( hasStartPattern  &amp;&amp; [bit isEqualToString:@\"1\"]) {\n            // At least one '1' exist as a close pattern\n            if (candidates &gt; gapCounter) {\n                gapCounter = candidates;\n            }\n            candidates = 0;\n        }\n        else if ([bit isEqualToString:@\"1\"]) {\n            hasStartPattern = YES; // At least one '1' exist as an open pattern\n        }\n    }\n    return gapCounter;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10468919,"reputation":41,"user_id":7717455,"display_name":"Manuel Mosso"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541806044,"creation_date":1541806044,"answer_id":53234540,"question_id":40946025,"body_markdown":"**OBJECTIVE-C SOLUTION O(2n)**\r\n\r\n**Results given by Codility** \r\n\r\nTask Score: 100%  \r\nCorrectness: 100%  \r\nPerformance: Not assesed\r\n\r\n**Time Complexity**\r\n\r\nThe worst case time complexity is O(2n)\r\n\r\n**Algorithm Explanation**\r\n\r\n*FACTS*\r\n\r\nEvery valid gap starts with a &#39;1&#39; and close with another &#39;1&#39;, with at least one &#39;zero&#39; between them.\r\n\r\n - 1001   -  Is a valid gap&lt;br/&gt;\r\n - 00100  -  Isn&#39;t a valid gap&lt;br/&gt;\r\n - 10100  -  Is a valid gap&lt;br/&gt;\r\n - 11111  -  Isn&#39;t a valid gap&lt;br/&gt;\r\n\r\n\r\n\r\n*STEP 1*\r\n\r\n - Get the bits of n, using an auxiliary method wich has O(n) Complexity\r\n\r\n\r\n*STEP 2*\r\n\r\n - Iterate over each bit we got in Step One\r\n - Start looking for the first &#39;1&#39; - since our flag &#39;hasStartPattern&#39; is false in the first iteration, we&#39;ll look for the first occurrence of &#39;1&#39;, that means we have a valid start pattern and we change the flag &#39;hasStartPattern&#39; to true\r\n for the next iterations we should validate if the current bit is &#39;0&#39; and use a counter, in this case &#39;candidates&#39;.\r\n - Only if, there is another &#39;1&#39; in the incoming bits, we are sure that we have a valid binary gap, then we compare our previous &#39;candidates&#39; with our current &#39;gapCounter&#39; in order to keep the highest one.\r\n - In case that there isn&#39;t another &#39;1&#39; to close the gap, we never change the value of &#39;gapCounter&#39; and we return 0.\r\n\r\n[Xcode Solution Here][1]\r\n\r\n\r\n  [1]: https://github.com/jmanuelmosso/CSWarmingInterview/blob/master/CSWarmingInterview/CodilityChallenges/Iterations/BinaryGap.m\r\n\r\n\r\n    +(int)solutionTwo:(int)n {    \r\n        // STEP 1\r\n        // O(n)\r\n        NSString *bits = [self getBitsForNumber:n];\r\n        \r\n        BOOL hasStartPattern = NO;\r\n        int candidates = 0;\r\n        int gapCounter = 0;\r\n        \r\n        // STEP 2\r\n        // O(n)\r\n        for (int i=0; i &lt; bits.length; i++) {\r\n            \r\n            char currentBit = [bits characterAtIndex:i];\r\n    \r\n            if ( hasStartPattern  &amp;&amp; currentBit == &#39;0&#39; ) {\r\n                candidates++;\r\n            }\r\n            else if ( hasStartPattern  &amp;&amp; currentBit == &#39;1&#39; ) {\r\n                // At least one &#39;1&#39; exist as a close pattern\r\n                if (candidates &gt; gapCounter) {\r\n                    gapCounter = candidates;\r\n                }\r\n                candidates = 0;\r\n            }\r\n            else if (currentBit == &#39;1&#39;) {\r\n                hasStartPattern = YES; // At least one &#39;1&#39; exist as an open pattern\r\n            }\r\n            \r\n        }\r\n        \r\n        return gapCounter;\r\n    }\r\n    \r\n    /*\r\n    Time Complexity:\r\n    - The worst case time complexity for this auxiliary method is O(n)\r\n    */\r\n    +(NSString*)getBitsForNumber:(int)n {\r\n        NSMutableString *bits = [NSMutableString string];\r\n        while(n) {\r\n            [bits insertString:((n&amp;1)? @&quot;1&quot; : @&quot;0&quot;) atIndex:0];\r\n            n /= 2;\r\n        }\r\n        return bits;\r\n    }\r\n\r\n\r\n","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p><strong>OBJECTIVE-C SOLUTION O(2n)</strong></p>\n\n<p><strong>Results given by Codility</strong> </p>\n\n<p>Task Score: 100%<br>\nCorrectness: 100%<br>\nPerformance: Not assesed</p>\n\n<p><strong>Time Complexity</strong></p>\n\n<p>The worst case time complexity is O(2n)</p>\n\n<p><strong>Algorithm Explanation</strong></p>\n\n<p><em>FACTS</em></p>\n\n<p>Every valid gap starts with a '1' and close with another '1', with at least one 'zero' between them.</p>\n\n<ul>\n<li>1001   -  Is a valid gap<br/></li>\n<li>00100  -  Isn't a valid gap<br/></li>\n<li>10100  -  Is a valid gap<br/></li>\n<li>11111  -  Isn't a valid gap<br/></li>\n</ul>\n\n<p><em>STEP 1</em></p>\n\n<ul>\n<li>Get the bits of n, using an auxiliary method wich has O(n) Complexity</li>\n</ul>\n\n<p><em>STEP 2</em></p>\n\n<ul>\n<li>Iterate over each bit we got in Step One</li>\n<li>Start looking for the first '1' - since our flag 'hasStartPattern' is false in the first iteration, we'll look for the first occurrence of '1', that means we have a valid start pattern and we change the flag 'hasStartPattern' to true\nfor the next iterations we should validate if the current bit is '0' and use a counter, in this case 'candidates'.</li>\n<li>Only if, there is another '1' in the incoming bits, we are sure that we have a valid binary gap, then we compare our previous 'candidates' with our current 'gapCounter' in order to keep the highest one.</li>\n<li>In case that there isn't another '1' to close the gap, we never change the value of 'gapCounter' and we return 0.</li>\n</ul>\n\n<p><a href=\"https://github.com/jmanuelmosso/CSWarmingInterview/blob/master/CSWarmingInterview/CodilityChallenges/Iterations/BinaryGap.m\" rel=\"nofollow noreferrer\">Xcode Solution Here</a></p>\n\n<pre><code>+(int)solutionTwo:(int)n {    \n    // STEP 1\n    // O(n)\n    NSString *bits = [self getBitsForNumber:n];\n\n    BOOL hasStartPattern = NO;\n    int candidates = 0;\n    int gapCounter = 0;\n\n    // STEP 2\n    // O(n)\n    for (int i=0; i &lt; bits.length; i++) {\n\n        char currentBit = [bits characterAtIndex:i];\n\n        if ( hasStartPattern  &amp;&amp; currentBit == '0' ) {\n            candidates++;\n        }\n        else if ( hasStartPattern  &amp;&amp; currentBit == '1' ) {\n            // At least one '1' exist as a close pattern\n            if (candidates &gt; gapCounter) {\n                gapCounter = candidates;\n            }\n            candidates = 0;\n        }\n        else if (currentBit == '1') {\n            hasStartPattern = YES; // At least one '1' exist as an open pattern\n        }\n\n    }\n\n    return gapCounter;\n}\n\n/*\nTime Complexity:\n- The worst case time complexity for this auxiliary method is O(n)\n*/\n+(NSString*)getBitsForNumber:(int)n {\n    NSMutableString *bits = [NSMutableString string];\n    while(n) {\n        [bits insertString:((n&amp;1)? @\"1\" : @\"0\") atIndex:0];\n        n /= 2;\n    }\n    return bits;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15389510,"reputation":1,"user_id":11102658,"display_name":"benjamin palma"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1550867551,"creation_date":1550854462,"answer_id":54831766,"question_id":40946025,"body_markdown":"here is my solution. \r\n\r\nIt is 100/100. \r\n\r\n\r\nI think it can be polished though.\r\n\r\n\r\n\r\n\r\n\r\n        class Solution {\r\n          public int solution(int N) {\r\n    \r\n           String s = Integer.toBinaryString(N);\r\n           int ctr = 0;\r\n           \r\n           for (int x = 0; x &lt; s.length(); x++){\r\n               \r\n               if (s.substring(x,x+1).equals(&quot;1&quot;)){\r\n               \r\n                   ctr++;\r\n               }\r\n               \r\n           }\r\n        \r\n           \r\n           int result[] = new int[ctr];\r\n        \r\n           boolean flag = false;\r\n           int fCtr = 0;\r\n           for(int y = 0; y &lt; s.length(); y++){\r\n               if(s.substring(y,y+1).equals(&quot;1&quot;)){\r\n                   flag = true;\r\n                   if(flag == true){\r\n                        fCtr++;\r\n                   }\r\n                       \r\n                   }\r\n               else if (s.substring(y,y+1).equals(&quot;0&quot;) &amp;&amp; flag == true &amp;&amp; fCtr &lt; ctr){\r\n                   result[fCtr]++;\r\n               }\r\n             } \r\n          \r\n            int ans = 0;\r\n            for (int d = 0; d &lt; result.length; d++){\r\n                if (ans &lt;= result[d]){\r\n                    ans = result[d];\r\n                }\r\n            }\r\n           \r\n           return ans;\r\n        }\r\n    }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>here is my solution. </p>\n\n<p>It is 100/100. </p>\n\n<p>I think it can be polished though.</p>\n\n<pre><code>    class Solution {\n      public int solution(int N) {\n\n       String s = Integer.toBinaryString(N);\n       int ctr = 0;\n\n       for (int x = 0; x &lt; s.length(); x++){\n\n           if (s.substring(x,x+1).equals(\"1\")){\n\n               ctr++;\n           }\n\n       }\n\n\n       int result[] = new int[ctr];\n\n       boolean flag = false;\n       int fCtr = 0;\n       for(int y = 0; y &lt; s.length(); y++){\n           if(s.substring(y,y+1).equals(\"1\")){\n               flag = true;\n               if(flag == true){\n                    fCtr++;\n               }\n\n               }\n           else if (s.substring(y,y+1).equals(\"0\") &amp;&amp; flag == true &amp;&amp; fCtr &lt; ctr){\n               result[fCtr]++;\n           }\n         } \n\n        int ans = 0;\n        for (int d = 0; d &lt; result.length; d++){\n            if (ans &lt;= result[d]){\n                ans = result[d];\n            }\n        }\n\n       return ans;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1553078,"reputation":127,"user_id":1445018,"accept_rate":50,"display_name":"user1445018"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560403860,"creation_date":1560403860,"answer_id":56573894,"question_id":40946025,"body_markdown":"I think this one is a very small code\r\n\r\n        public int solution(int N)\r\n        {\r\n            string binary = Convert.ToString(N, 2);\r\n            binary = binary.TrimEnd(new Char[] { &#39;0&#39; });\r\n            var gaps = binary.Split(&#39;1&#39;);\r\n            int max = 0;\r\n            foreach (var item in gaps)\r\n            {\r\n                if (!string.IsNullOrEmpty(item))\r\n                    if(item.Length &gt; max)\r\n                       max = item.Length;\r\n            }            \r\n            return max ;\r\n        }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>I think this one is a very small code</p>\n\n<pre><code>    public int solution(int N)\n    {\n        string binary = Convert.ToString(N, 2);\n        binary = binary.TrimEnd(new Char[] { '0' });\n        var gaps = binary.Split('1');\n        int max = 0;\n        foreach (var item in gaps)\n        {\n            if (!string.IsNullOrEmpty(item))\n                if(item.Length &gt; max)\n                   max = item.Length;\n        }            \n        return max ;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8404138,"reputation":851,"user_id":6308162,"display_name":"Iryna Prokopenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563262755,"creation_date":1563262755,"answer_id":57052285,"question_id":40946025,"body_markdown":"here mine\r\n\r\n    public int solution(int N) {\r\n\r\n        String binary = Integer.toBinaryString(N);\r\n        \r\n        LinkedList&lt;Integer&gt; gaps = new LinkedList&lt;&gt;();\r\n        int countGap = 0;\r\n        int j = 0;\r\n        for (int i = 1; i &lt; binary.length() - 1; i++) {\r\n            if (binary.charAt(i) == &#39;0&#39;) {\r\n                countGap++;\r\n            } else {\r\n\r\n                gaps.add(j, countGap);\r\n                j++;\r\n                countGap = 0;\r\n            }\r\n        }\r\n\r\n        gaps.add(j, countGap);\r\n\r\n        if (binary.charAt(binary.length() - 1) == &#39;0&#39;) {\r\n            gaps.set(gaps.size() - 1, 0);\r\n        }\r\n\r\n        Collections.sort(gaps);\r\n        \r\n        return gaps.getLast();\r\n    }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>here mine</p>\n\n<pre><code>public int solution(int N) {\n\n    String binary = Integer.toBinaryString(N);\n\n    LinkedList&lt;Integer&gt; gaps = new LinkedList&lt;&gt;();\n    int countGap = 0;\n    int j = 0;\n    for (int i = 1; i &lt; binary.length() - 1; i++) {\n        if (binary.charAt(i) == '0') {\n            countGap++;\n        } else {\n\n            gaps.add(j, countGap);\n            j++;\n            countGap = 0;\n        }\n    }\n\n    gaps.add(j, countGap);\n\n    if (binary.charAt(binary.length() - 1) == '0') {\n        gaps.set(gaps.size() - 1, 0);\n    }\n\n    Collections.sort(gaps);\n\n    return gaps.getLast();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3140921,"reputation":3,"user_id":2656401,"display_name":"BrsAtmn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564780142,"creation_date":1564780142,"answer_id":57333463,"question_id":40946025,"body_markdown":"Here is my solution. (Scala)\r\n\r\nIt is 100/100.\r\n\r\n \r\n     object Solution {\r\n      def solution(n: Int): Int = {\r\n       val regex = raw&quot;(?=(10*1))&quot;.r\r\n       val result = regex.findAllMatchIn(n.toBinaryString).map(_.group(1)) match {\r\n        case re:Iterator[String] if !re.isEmpty =&gt; (re.toList.map(Integer.parseInt(_, 2)).sorted.last.toBinaryString.length - 2)\r\n        case _ =&gt; 0\r\n      }\r\n      result\r\n      }\r\n    }\r\n\r\n","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Here is my solution. (Scala)</p>\n\n<p>It is 100/100.</p>\n\n<pre><code> object Solution {\n  def solution(n: Int): Int = {\n   val regex = raw\"(?=(10*1))\".r\n   val result = regex.findAllMatchIn(n.toBinaryString).map(_.group(1)) match {\n    case re:Iterator[String] if !re.isEmpty =&gt; (re.toList.map(Integer.parseInt(_, 2)).sorted.last.toBinaryString.length - 2)\n    case _ =&gt; 0\n  }\n  result\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2746810,"reputation":448,"user_id":2367057,"display_name":"Chigozie Orunta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578770688,"creation_date":1578770688,"answer_id":59697883,"question_id":40946025,"body_markdown":"My solution using JavaScript, **tested 100%.**\r\n\r\n```\r\nfunction solution(N) {\r\n    N = N.toString(2);\r\n    let numberOfOnes = 0;\r\n    let binaryGap = 0;\r\n    let binaryZeros = 0;\r\n    for(let i=0; i&lt;N.length; i++) {\r\n        if(N[i] &gt; 0) {\r\n            numberOfOnes++;\r\n        }\r\n    }\r\n    if(numberOfOnes) {\r\n        for(let j=0; j&lt;N.length; j++) {\r\n            if(N[j] &gt; 0) {\r\n                if(binaryZeros) {\r\n                    if(binaryZeros &gt; binaryGap) {\r\n                        binaryGap = binaryZeros;\r\n                    }\r\n                }\r\n                binaryZeros = 0;\r\n            }\r\n            if(N[j] &lt; 1) {\r\n                binaryZeros++;\r\n            }\r\n        }\r\n    } else {\r\n        binaryGap = 0;\r\n    }\r\n    return binaryGap;\r\n}\r\n```","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>My solution using JavaScript, <strong>tested 100%.</strong></p>\n\n<pre><code>function solution(N) {\n    N = N.toString(2);\n    let numberOfOnes = 0;\n    let binaryGap = 0;\n    let binaryZeros = 0;\n    for(let i=0; i&lt;N.length; i++) {\n        if(N[i] &gt; 0) {\n            numberOfOnes++;\n        }\n    }\n    if(numberOfOnes) {\n        for(let j=0; j&lt;N.length; j++) {\n            if(N[j] &gt; 0) {\n                if(binaryZeros) {\n                    if(binaryZeros &gt; binaryGap) {\n                        binaryGap = binaryZeros;\n                    }\n                }\n                binaryZeros = 0;\n            }\n            if(N[j] &lt; 1) {\n                binaryZeros++;\n            }\n        }\n    } else {\n        binaryGap = 0;\n    }\n    return binaryGap;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2605419,"reputation":1,"user_id":2256674,"display_name":"Union"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595956218,"creation_date":1595956218,"answer_id":63139358,"question_id":40946025,"body_markdown":"I adapted @minary solution with **PHP** and it worked.\r\n\r\n\r\n      function maxZeros($N){\r\n        $ptr = 0; //Used for bitwise operation.\r\n         for($ptr = 1; $ptr &gt; 0; $ptr &lt;&lt;= 1) //Find the lowest bit 1\r\n          if(($N &amp; $ptr) != 0)\r\n            break;\r\n\r\n        $cnt = 0; //Count the (possible) gap\r\n        $ret = 0; //Keep the longest gap.\r\n         for(; $ptr &gt; 0; $ptr &lt;&lt;= 1) {\r\n          if(($N &amp; $ptr) != 0) { //If it&#39;s bit 1\r\n            $ret = $cnt &lt; $ret ? $ret : $cnt; //Get the bigger one between cnt and ret\r\n            $cnt = -1; //Exclude this bit\r\n          }\r\n          $cnt++; //Increment the count. If this bit is 1, then cnt would become 0 because we set the cnt as -1 instead of 0.\r\n         }\r\n        return $ret;\r\n       }\r\n\r\n      //Run the function below, for example N = 32\r\n       $N = 32; \r\n       echo (maxZeros($N)); ","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>I adapted @minary solution with <strong>PHP</strong> and it worked.</p>\n<pre><code>  function maxZeros($N){\n    $ptr = 0; //Used for bitwise operation.\n     for($ptr = 1; $ptr &gt; 0; $ptr &lt;&lt;= 1) //Find the lowest bit 1\n      if(($N &amp; $ptr) != 0)\n        break;\n\n    $cnt = 0; //Count the (possible) gap\n    $ret = 0; //Keep the longest gap.\n     for(; $ptr &gt; 0; $ptr &lt;&lt;= 1) {\n      if(($N &amp; $ptr) != 0) { //If it's bit 1\n        $ret = $cnt &lt; $ret ? $ret : $cnt; //Get the bigger one between cnt and ret\n        $cnt = -1; //Exclude this bit\n      }\n      $cnt++; //Increment the count. If this bit is 1, then cnt would become 0 because we set the cnt as -1 instead of 0.\n     }\n    return $ret;\n   }\n\n  //Run the function below, for example N = 32\n   $N = 32; \n   echo (maxZeros($N)); \n</code></pre>\n"},{"comments":[{"owner":{"account_id":17347216,"reputation":1118,"user_id":12566550,"display_name":"Fran&#231;ois B."},"score":0,"creation_date":1604695261,"post_id":64720362,"comment_id":114435358,"body_markdown":"The question was flagged Java.","body":"The question was flagged Java."},{"owner":{"account_id":4977747,"reputation":67,"user_id":4003623,"display_name":"Kehinde Ogundeyi"},"score":2,"creation_date":1604739979,"post_id":64720362,"comment_id":114443495,"body_markdown":"@Fran&#231;oisB. I was searching for this same question&#39;s solution in C# but didn&#39;t see it so it could be useful for somebody using C# as there are other answers here using other programming language like scala and PHP.","body":"@Fran&#231;oisB. I was searching for this same question&#39;s solution in C# but didn&#39;t see it so it could be useful for somebody using C# as there are other answers here using other programming language like scala and PHP."}],"tags":[],"owner":{"account_id":4977747,"reputation":67,"user_id":4003623,"display_name":"Kehinde Ogundeyi"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604689925,"creation_date":1604689925,"answer_id":64720362,"question_id":40946025,"body_markdown":"This is the C# code equivalent\r\n\r\n     public int solution(int N) {\r\n        // write your code in C# 6.0 with .NET 4.5 (Mono)\r\n        int m;\r\n        for (m=1;m&gt;0;m&lt;&lt;=1){\r\n            if((m&amp;N) !=0){\r\n            break;\r\n            }\r\n        }\r\n        int i = 0;\r\n        int j = 0;\r\n        for (; m&gt;0;m&lt;&lt;=1){\r\n            if((m&amp;N) !=0){\r\n                j=i&lt;j ? j:i;\r\n                i=-1;\r\n            }\r\n            i++;\r\n        }\r\n        return j;\r\n        }\r\n    }\r\n","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>This is the C# code equivalent</p>\n<pre><code> public int solution(int N) {\n    // write your code in C# 6.0 with .NET 4.5 (Mono)\n    int m;\n    for (m=1;m&gt;0;m&lt;&lt;=1){\n        if((m&amp;N) !=0){\n        break;\n        }\n    }\n    int i = 0;\n    int j = 0;\n    for (; m&gt;0;m&lt;&lt;=1){\n        if((m&amp;N) !=0){\n            j=i&lt;j ? j:i;\n            i=-1;\n        }\n        i++;\n    }\n    return j;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6321139,"reputation":153,"user_id":4909153,"accept_rate":100,"display_name":"Mwas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662370949,"creation_date":1611523461,"answer_id":65876121,"question_id":40946025,"body_markdown":"Here is my **Java** implementation.\r\n\r\n    public static int solution(int N) {\r\n        int longestBinaryGap = 0;\r\n        String binary= Integer.toBinaryString(N);\r\n        if(!binary.contains(&quot;01&quot;)){\r\n            return 0;\r\n        }\r\n\r\n        binary = binary.replaceAll(&quot;0*$&quot;, &quot;&quot;);\r\n        String[] gaps = binary.split(&quot;1&quot;);\r\n\r\n\r\n        for (String g:gaps) {\r\n            if(g.length()&gt;longestBinaryGap){\r\n                longestBinaryGap = g.length();\r\n            }\r\n        }\r\n\r\n        return longestBinaryGap;\r\n    }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Here is my <strong>Java</strong> implementation.</p>\n<pre><code>public static int solution(int N) {\n    int longestBinaryGap = 0;\n    String binary= Integer.toBinaryString(N);\n    if(!binary.contains(&quot;01&quot;)){\n        return 0;\n    }\n\n    binary = binary.replaceAll(&quot;0*$&quot;, &quot;&quot;);\n    String[] gaps = binary.split(&quot;1&quot;);\n\n\n    for (String g:gaps) {\n        if(g.length()&gt;longestBinaryGap){\n            longestBinaryGap = g.length();\n        }\n    }\n\n    return longestBinaryGap;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10958353,"reputation":1,"user_id":8052414,"display_name":"Peter Kariuki Mutuura"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612871861,"creation_date":1612871861,"answer_id":66118548,"question_id":40946025,"body_markdown":"Here is mine wrote in Javascript, can someone critic this, it scored 100% though on Codility.\r\n```\r\nconst binaryGap = (intN)=&gt;{\r\n    const binary = Array.from(intN.toString(2)).map(item=&gt;parseInt(item))\r\n    \r\n    const newArrayGroup = []\r\n\r\n    const arrLength = binary.length\r\n\r\n    let zeroGroup = []\r\n\r\n    for (let index = 0; index &lt; arrLength; index++) {\r\n\r\n        const parsedInt = binary[index]\r\n\r\n        if ( parsedInt == 0 ) {\r\n\r\n            zeroGroup.push(parsedInt)   \r\n        }else{\r\n            if (zeroGroup.length&gt;0) {\r\n                newArrayGroup.push(zeroGroup.length)\r\n            }\r\n            zeroGroup = []\r\n        }\r\n    }\r\n\r\n    return newArrayGroup.length == 0 ? 0 : Math.max(...newArrayGroup)\r\n}\r\n\r\n``` ","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Here is mine wrote in Javascript, can someone critic this, it scored 100% though on Codility.</p>\n<pre><code>const binaryGap = (intN)=&gt;{\n    const binary = Array.from(intN.toString(2)).map(item=&gt;parseInt(item))\n    \n    const newArrayGroup = []\n\n    const arrLength = binary.length\n\n    let zeroGroup = []\n\n    for (let index = 0; index &lt; arrLength; index++) {\n\n        const parsedInt = binary[index]\n\n        if ( parsedInt == 0 ) {\n\n            zeroGroup.push(parsedInt)   \n        }else{\n            if (zeroGroup.length&gt;0) {\n                newArrayGroup.push(zeroGroup.length)\n            }\n            zeroGroup = []\n        }\n    }\n\n    return newArrayGroup.length == 0 ? 0 : Math.max(...newArrayGroup)\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2510126,"reputation":43,"user_id":2182808,"display_name":"Alireza Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615444106,"creation_date":1615444106,"answer_id":66577475,"question_id":40946025,"body_markdown":"Here is my answer in C#:\r\n&lt;code&gt;\r\n\r\n    class Solution {\r\n        public int solution(int N) {\r\n            // write your code in C# 6.0 with .NET 4.5 (Mono)\r\n             string Nbin = Convert.ToString(N, 2);\r\n                string[] arr = Nbin.Split(&#39;1&#39;);\r\n                int maxZ = 0;\r\n                if (arr.Length &gt; 2 &amp;&amp; arr[arr.Length - 1] == &quot; &quot;)\r\n                {\r\n                    foreach (var item in arr)\r\n                    {\r\n                        if (item.Length &gt; maxZ)\r\n                        {\r\n                            maxZ = item.Length;\r\n                        }\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    for (int i = 0; i &lt; arr.Length - 1; i++)\r\n                    {\r\n                        if (arr[i].Length &gt; maxZ)\r\n                        {\r\n                            maxZ = arr[i].Length;\r\n                        }\r\n                    }\r\n                }\r\n                return maxZ;\r\n        }\r\n    }\r\n\r\n&lt;/code&gt;","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Here is my answer in C#:\n<code></p>\n<pre><code>class Solution {\n    public int solution(int N) {\n        // write your code in C# 6.0 with .NET 4.5 (Mono)\n         string Nbin = Convert.ToString(N, 2);\n            string[] arr = Nbin.Split('1');\n            int maxZ = 0;\n            if (arr.Length &gt; 2 &amp;&amp; arr[arr.Length - 1] == &quot; &quot;)\n            {\n                foreach (var item in arr)\n                {\n                    if (item.Length &gt; maxZ)\n                    {\n                        maxZ = item.Length;\n                    }\n                }\n            }\n            else\n            {\n                for (int i = 0; i &lt; arr.Length - 1; i++)\n                {\n                    if (arr[i].Length &gt; maxZ)\n                    {\n                        maxZ = arr[i].Length;\n                    }\n                }\n            }\n            return maxZ;\n    }\n}\n</code></pre>\n</code>\n"},{"tags":[],"owner":{"account_id":6342823,"reputation":405,"user_id":4924242,"display_name":"Nesrin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618674804,"creation_date":1618674804,"answer_id":67140086,"question_id":40946025,"body_markdown":"This is my simple solution \r\n\r\n    class Solution {\r\n        public int solution(int N) {\r\n            // write your code in Java SE 8\r\n            String b = Integer.toBinaryString(N);\r\n    \r\n            char[] binaryArr = b.toCharArray();\r\n            int max = 0;\r\n            int internalCount = 0;\r\n            for(int index=1; index&lt; binaryArr.length; index++){\r\n                if(binaryArr[index] ==&#39;0&#39;)\r\n                    internalCount++;\r\n                else{\r\n    \r\n                    if (max&lt;internalCount) max = internalCount;\r\n                    internalCount =0;\r\n    \r\n                }\r\n            }\r\n    \r\n    \r\n            return max;\r\n        }\r\n    }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>This is my simple solution</p>\n<pre><code>class Solution {\n    public int solution(int N) {\n        // write your code in Java SE 8\n        String b = Integer.toBinaryString(N);\n\n        char[] binaryArr = b.toCharArray();\n        int max = 0;\n        int internalCount = 0;\n        for(int index=1; index&lt; binaryArr.length; index++){\n            if(binaryArr[index] =='0')\n                internalCount++;\n            else{\n\n                if (max&lt;internalCount) max = internalCount;\n                internalCount =0;\n\n            }\n        }\n\n\n        return max;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3167816,"reputation":41,"user_id":2677408,"display_name":"RainMaker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619196354,"creation_date":1619196354,"answer_id":67233929,"question_id":40946025,"body_markdown":"Here is my short solution in PHP (Task Score: 100%, Correctness: 100%)\r\n\r\n```\r\nfunction solution($N) {\r\n    $gaps = array();\r\n    $s = explode(&#39;1&#39;, trim(decbin($N),&#39;0&#39;));\r\n    foreach($s as $g){\r\n        $gaps[] = strlen($g);\r\n    }\r\n    return max($gaps);\r\n}\r\n```","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Here is my short solution in PHP (Task Score: 100%, Correctness: 100%)</p>\n<pre><code>function solution($N) {\n    $gaps = array();\n    $s = explode('1', trim(decbin($N),'0'));\n    foreach($s as $g){\n        $gaps[] = strlen($g);\n    }\n    return max($gaps);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5900197,"reputation":147,"user_id":4643980,"display_name":"Sujan Mhrzn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621616868,"creation_date":1621616868,"answer_id":67641179,"question_id":40946025,"body_markdown":"For Javascript Here is my solution.\r\n\r\n   \r\n\r\n    function solution(N){\r\n          N = N.toString(2);\r\n          var totalOnes = 0;\r\n          var binaryGap = 0;\r\n          var binaryZero = 0;\r\n          const foundBinaryZero = []\r\n    \r\n          for(let i=0; i&lt;N.length; i++) {\r\n            if(N[i] &gt; 0) {\r\n                totalOnes++;   \r\n                foundBinaryZero.push(binaryZero);\r\n                binaryZero = 0;\r\n               \r\n            }else{\r\n                binaryGap = 0;\r\n                binaryZero = binaryZero + 1;\r\n              \r\n            }\r\n        }\r\n    \r\n        foundBinaryZero.sort();\r\n    \r\n    \r\n        return (foundBinaryZero[foundBinaryZero.length - 1]);\r\n    \r\n    }\r\n\r\n","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>For Javascript Here is my solution.</p>\n<pre><code>function solution(N){\n      N = N.toString(2);\n      var totalOnes = 0;\n      var binaryGap = 0;\n      var binaryZero = 0;\n      const foundBinaryZero = []\n\n      for(let i=0; i&lt;N.length; i++) {\n        if(N[i] &gt; 0) {\n            totalOnes++;   \n            foundBinaryZero.push(binaryZero);\n            binaryZero = 0;\n           \n        }else{\n            binaryGap = 0;\n            binaryZero = binaryZero + 1;\n          \n        }\n    }\n\n    foundBinaryZero.sort();\n\n\n    return (foundBinaryZero[foundBinaryZero.length - 1]);\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9011142,"reputation":1135,"user_id":6715678,"display_name":"mufazmi"},"score":0,"creation_date":1621621406,"post_id":67641590,"comment_id":119560680,"body_markdown":"While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value.","body":"While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value."},{"owner":{"account_id":1869152,"reputation":326,"user_id":1691850,"accept_rate":75,"display_name":"eattrig"},"score":1,"creation_date":1621622893,"post_id":67641590,"comment_id":119561265,"body_markdown":"@mufazmi - fair point.  Added an explanation.","body":"@mufazmi - fair point.  Added an explanation."}],"tags":[],"owner":{"account_id":1869152,"reputation":326,"user_id":1691850,"accept_rate":75,"display_name":"eattrig"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1621622852,"creation_date":1621618831,"answer_id":67641590,"question_id":40946025,"body_markdown":"This solution does not convert the number to a binary String as that is unnecessary.  It looks at each bit from right to left starting with the first bit to the left of the first set bit (`1`).\r\n\r\n`n &amp; -n` returns a mask with only the rightmost bit of `n` set.  Multiplying that by 2 gives the next bit to the left, which is the appropriate place to start counting.\r\n\r\nFor each bit check (i.e. each iteration of the loop), it either increments or resets the `current` counter and uses that to track the maximum contiguous section found so far.\r\n\r\n    public int solution(int n) {\r\n        int max = 0;\r\n        for (int mask = (n &amp; -n) * 2, current = 0; mask &lt; n; mask &lt;&lt;= 1)\r\n            max = Math.max(max, (n &amp; mask) == 0 ? ++current : (current = 0));\r\n        return max;\r\n    }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>This solution does not convert the number to a binary String as that is unnecessary.  It looks at each bit from right to left starting with the first bit to the left of the first set bit (<code>1</code>).</p>\n<p><code>n &amp; -n</code> returns a mask with only the rightmost bit of <code>n</code> set.  Multiplying that by 2 gives the next bit to the left, which is the appropriate place to start counting.</p>\n<p>For each bit check (i.e. each iteration of the loop), it either increments or resets the <code>current</code> counter and uses that to track the maximum contiguous section found so far.</p>\n<pre><code>public int solution(int n) {\n    int max = 0;\n    for (int mask = (n &amp; -n) * 2, current = 0; mask &lt; n; mask &lt;&lt;= 1)\n        max = Math.max(max, (n &amp; mask) == 0 ? ++current : (current = 0));\n    return max;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15703012,"reputation":43,"user_id":11330607,"display_name":"Amresh Vs"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1623223207,"creation_date":1623223207,"answer_id":67899355,"question_id":40946025,"body_markdown":"Simplest code from all the above, Codility 100% Correctness and score, Verified!\r\n\r\nThe solution in Javascript:\r\n\r\n    function solution(N) {\r\n      let binaryValue = (N &gt;&gt;&gt; 0).toString(2);\r\n    \r\n      let lengthArr = [];\r\n      let length = 1;\r\n    \r\n      for(let i = 0; i &lt; binaryValue.length; i++){\r\n        if(binaryValue[i] == 0){\r\n          // Check if 1 is ending then push the lenght to array and reset the length\r\n          if(binaryValue[i + 1] == 1){\r\n            lengthArr.push(length);\r\n            length = 0;\r\n          }\r\n    \r\n          length++;\r\n        }\r\n      }\r\n    \r\n      return lengthArr.length ? Math.max(...lengthArr) : 0;\r\n    \r\n    }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Simplest code from all the above, Codility 100% Correctness and score, Verified!</p>\n<p>The solution in Javascript:</p>\n<pre><code>function solution(N) {\n  let binaryValue = (N &gt;&gt;&gt; 0).toString(2);\n\n  let lengthArr = [];\n  let length = 1;\n\n  for(let i = 0; i &lt; binaryValue.length; i++){\n    if(binaryValue[i] == 0){\n      // Check if 1 is ending then push the lenght to array and reset the length\n      if(binaryValue[i + 1] == 1){\n        lengthArr.push(length);\n        length = 0;\n      }\n\n      length++;\n    }\n  }\n\n  return lengthArr.length ? Math.max(...lengthArr) : 0;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8821115,"reputation":1,"user_id":6590965,"display_name":"Haris Azam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623702195,"creation_date":1623702195,"answer_id":67976745,"question_id":40946025,"body_markdown":"&gt; A binary gap within a positive integer N is any maximal sequence of consecutive zeros that is surrounded by ones at both ends in the binary representation of N.\r\n\r\nHi everyone, I have just solved this problem, hope fully it will help you all. \r\n\r\n```class Solution {\r\n    public int solution(int N) {\r\n          \r\n        String toBinary = Integer.toBinaryString(N);\r\n        char[] ch = toBinary.toCharArray();\r\n        int maxCount = 0;\r\n        int count = 0;\r\n        boolean flag = false;\r\n          \r\n        for(int i=0; i &lt; ch.length; i++){\r\n            if(ch[i] == &#39;1&#39;){\r\n                if(count &gt; maxCount){\r\n                 maxCount = count;\r\n                }\r\n             count = 0;\r\n            } else\r\n              count ++;\r\n        }\r\n         return maxCount;\r\n    }\r\n}","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<blockquote>\n<p>A binary gap within a positive integer N is any maximal sequence of consecutive zeros that is surrounded by ones at both ends in the binary representation of N.</p>\n</blockquote>\n<p>Hi everyone, I have just solved this problem, hope fully it will help you all.</p>\n<pre><code>    public int solution(int N) {\n          \n        String toBinary = Integer.toBinaryString(N);\n        char[] ch = toBinary.toCharArray();\n        int maxCount = 0;\n        int count = 0;\n        boolean flag = false;\n          \n        for(int i=0; i &lt; ch.length; i++){\n            if(ch[i] == '1'){\n                if(count &gt; maxCount){\n                 maxCount = count;\n                }\n             count = 0;\n            } else\n              count ++;\n        }\n         return maxCount;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1630958362,"post_id":69078111,"comment_id":122090573,"body_markdown":"Please add further details to expand on your answer, such as working code or documentation citations.","body":"Please add further details to expand on your answer, such as working code or documentation citations."}],"tags":[],"owner":{"account_id":5880104,"reputation":1,"user_id":4629791,"display_name":"Vinod"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630947810,"creation_date":1630947810,"answer_id":69078111,"question_id":40946025,"body_markdown":"I added this solution and the Codility score is 100%.\r\n\r\n    public int solution(int N) {\r\n\t\tString s = Integer.toBinaryString(N);\r\n\t\ts = removeTrailingZeros(s);\r\n\t\tSystem.out.println(s);\r\n\t\tString arrayBinary[] = s.split(&quot;1&quot;);\r\n\t\tint x = 0;\r\n\t\tfor (String abc : arrayBinary) {\r\n\t\t\tif (abc.length() &gt; x)\r\n\t\t\t\tx = abc.length();\r\n\t\t}\r\n\t\treturn x;\r\n\t}\r\n\r\n\tprivate String removeTrailingZeros(String s) {\r\n\t\tif (s.endsWith(&quot;0&quot;)) {\r\n\t\t\ts = s.substring(0, s.length() - 1);\r\n\t\t\treturn removeTrailingZeros(s);\r\n\t\t}\r\n\t\treturn s;\r\n\t}\r\n\r\n[Executed test sets][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PiPot.png","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>I added this solution and the Codility score is 100%.</p>\n<pre><code>public int solution(int N) {\n    String s = Integer.toBinaryString(N);\n    s = removeTrailingZeros(s);\n    System.out.println(s);\n    String arrayBinary[] = s.split(&quot;1&quot;);\n    int x = 0;\n    for (String abc : arrayBinary) {\n        if (abc.length() &gt; x)\n            x = abc.length();\n    }\n    return x;\n}\n\nprivate String removeTrailingZeros(String s) {\n    if (s.endsWith(&quot;0&quot;)) {\n        s = s.substring(0, s.length() - 1);\n        return removeTrailingZeros(s);\n    }\n    return s;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/PiPot.png\" rel=\"nofollow noreferrer\">Executed test sets</a></p>\n"},{"tags":[],"owner":{"account_id":18005173,"reputation":11716,"user_id":13086128,"display_name":"Goku - stands with Palestine"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636562878,"creation_date":1636562878,"answer_id":69917131,"question_id":40946025,"body_markdown":"**A one-liner in Python:\r\nTask Score 100%, Correctness 100%**\r\n\r\n    def solution(N):\r\n        b=bin(N)[2:]\r\n        return len(max(b.strip(&#39;0&#39;).split(&#39;1&#39;))) \r\n    # here strip will remove all trailing 0&#39;s and split will create a list with splitting 1&#39;s and combining 0&#39;s which are together.","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p><strong>A one-liner in Python:\nTask Score 100%, Correctness 100%</strong></p>\n<pre><code>def solution(N):\n    b=bin(N)[2:]\n    return len(max(b.strip('0').split('1'))) \n# here strip will remove all trailing 0's and split will create a list with splitting 1's and combining 0's which are together.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4580505,"reputation":874,"user_id":3717658,"accept_rate":80,"display_name":"Naqib Hakimi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642895235,"creation_date":1642895235,"answer_id":70818079,"question_id":40946025,"body_markdown":"If binary number ends with `0` then `number % 2 == 0` otherwise `number % 2 == 1`, using this rule we can solve it very easily.\r\n\r\n    \r\n    def solution(N: int):\r\n      prev = 0\r\n      current = 0\r\n      \r\n      # remove leading zeros\r\n      while N % 2 == 0:\r\n        N &gt;&gt;= 1\r\n\r\n      # shift to right until its reaches 1\r\n      while N != 1:\r\n      \r\n        if N % 2 == 0:\r\n          current += 1\r\n        else:\r\n          prev = max(current, prev)\r\n          current = 0\r\n    \r\n        N &gt;&gt;= 1\r\n      return max(prev , current)\r\n\r\n","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>If binary number ends with <code>0</code> then <code>number % 2 == 0</code> otherwise <code>number % 2 == 1</code>, using this rule we can solve it very easily.</p>\n<pre><code>def solution(N: int):\n  prev = 0\n  current = 0\n  \n  # remove leading zeros\n  while N % 2 == 0:\n    N &gt;&gt;= 1\n\n  # shift to right until its reaches 1\n  while N != 1:\n  \n    if N % 2 == 0:\n      current += 1\n    else:\n      prev = max(current, prev)\n      current = 0\n\n    N &gt;&gt;= 1\n  return max(prev , current)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18907312,"reputation":1734,"user_id":13794189,"display_name":"Miguel Tom&#225;s"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648570955,"creation_date":1648569514,"answer_id":71665258,"question_id":40946025,"body_markdown":"Here&#39;s a possible solution for the Binary Gap in Java 11 (codility test) \r\n\r\n\r\n\r\n    class Solution {\r\n        public int solution(int N) {\r\n            // write your code in Java SE 11\r\n            String binN= Integer.toBinaryString(N);\r\n             \r\n            int counter=0;\r\n            int maxCount=0;\r\n            \r\n            boolean enableCounter=false;\r\n            char prevChar= binN.charAt(0);\r\n    \r\n            for(int i=1 ; i &lt; binN.length()-1; i++){\r\n                if(prevChar==&#39;1&#39;){\r\n                    enableCounter=true;\r\n                }\r\n                \r\n                if (binN.charAt(i)==&#39;0&#39; &amp;&amp; enableCounter){\r\n                    counter++;\r\n                                \r\n                    if (binN.charAt(i+1)==&#39;1&#39;){\r\n                       if(counter&gt;maxCount){\r\n                           maxCount=counter;\r\n                       } \r\n                        counter=0;\r\n                    }\r\n                }\r\n                prevChar=binN.charAt(i);\r\n            }\r\n            \r\n            return maxCount;\r\n        }\r\n    }\r\n\r\n","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Here's a possible solution for the Binary Gap in Java 11 (codility test)</p>\n<pre><code>class Solution {\n    public int solution(int N) {\n        // write your code in Java SE 11\n        String binN= Integer.toBinaryString(N);\n         \n        int counter=0;\n        int maxCount=0;\n        \n        boolean enableCounter=false;\n        char prevChar= binN.charAt(0);\n\n        for(int i=1 ; i &lt; binN.length()-1; i++){\n            if(prevChar=='1'){\n                enableCounter=true;\n            }\n            \n            if (binN.charAt(i)=='0' &amp;&amp; enableCounter){\n                counter++;\n                            \n                if (binN.charAt(i+1)=='1'){\n                   if(counter&gt;maxCount){\n                       maxCount=counter;\n                   } \n                    counter=0;\n                }\n            }\n            prevChar=binN.charAt(i);\n        }\n        \n        return maxCount;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17993959,"reputation":29,"user_id":13077440,"display_name":"Kiki Sasha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650213464,"creation_date":1650213464,"answer_id":71903654,"question_id":40946025,"body_markdown":"Here&#39;s a working code 100% in swift :)\r\n\r\n    public func solution(_ N : Int) -&gt; Int {\r\n        let str = String(N, radix: 2)\r\n        if str.contains(&quot;1&quot;) &amp;&amp; str.contains(&quot;0&quot;) {\r\n            if str.split(separator: &quot;0&quot;).count != 1 {\r\n                if str.last == &quot;0&quot; {\r\n                    return str.split(separator: &quot;1&quot;).dropLast().max()!.count\r\n                }\r\n                return str.split(separator: &quot;1&quot;).max()!.count\r\n            }\r\n        }\r\n        return 0\r\n    }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Here's a working code 100% in swift :)</p>\n<pre><code>public func solution(_ N : Int) -&gt; Int {\n    let str = String(N, radix: 2)\n    if str.contains(&quot;1&quot;) &amp;&amp; str.contains(&quot;0&quot;) {\n        if str.split(separator: &quot;0&quot;).count != 1 {\n            if str.last == &quot;0&quot; {\n                return str.split(separator: &quot;1&quot;).dropLast().max()!.count\n            }\n            return str.split(separator: &quot;1&quot;).max()!.count\n        }\n    }\n    return 0\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20684131,"reputation":775,"user_id":15186994,"display_name":"Waad Mawlood"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652453481,"creation_date":1652453481,"answer_id":72231527,"question_id":40946025,"body_markdown":"**In PHP**\r\n\r\n    function solution($N) {\r\n     $bin = decbin($N);\r\n     $gap = [];\r\n     $len = strlen($bin);\r\n     $startCount = 0;\r\n     $endCount = 0;\r\n\r\n     $startCount = strpos($bin,&#39;0&#39;);\r\n    \r\n     if(! $startCount)\r\n         return 0;\r\n\r\n     while($startCount){\r\n         $endCount = strpos($bin,&#39;1&#39;,$startCount);\r\n        \r\n         if(! $endCount)\r\n             break;\r\n\r\n         $sub = substr($bin,$startCount,$endCount - $startCount);\r\n         array_push($gap,strlen($sub));\r\n        \r\n         $startCount = strpos($bin,&#39;0&#39;,$endCount);   \r\n     }\r\n\r\n     $sum = 0;\r\n     if(count($gap)&gt;0)\r\n         return max($gap);\r\n     else\r\n         return 0;\r\n    }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p><strong>In PHP</strong></p>\n<pre><code>function solution($N) {\n $bin = decbin($N);\n $gap = [];\n $len = strlen($bin);\n $startCount = 0;\n $endCount = 0;\n\n $startCount = strpos($bin,'0');\n\n if(! $startCount)\n     return 0;\n\n while($startCount){\n     $endCount = strpos($bin,'1',$startCount);\n    \n     if(! $endCount)\n         break;\n\n     $sub = substr($bin,$startCount,$endCount - $startCount);\n     array_push($gap,strlen($sub));\n    \n     $startCount = strpos($bin,'0',$endCount);   \n }\n\n $sum = 0;\n if(count($gap)&gt;0)\n     return max($gap);\n else\n     return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8754349,"reputation":21,"user_id":6546390,"display_name":"Prerana Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689786493,"creation_date":1689489084,"answer_id":76696971,"question_id":40946025,"body_markdown":"Below is my solution in Java. Task score , correctness=100%\r\n```java\r\nclass Solution {\r\n    public int solution(int N) {\r\n        // Implement your solution here\r\n        int maxGap=0;\r\n        boolean patternStarts=false;\r\n        boolean patternEnds=false;\r\n        int countZero=0;\r\n        int startIndex=0;\r\n        int endIndex=0;\r\n        String binary=Integer.toBinaryString(N);\r\n        for(int i=0;i&lt;binary.length()-1;i++){\r\n            if(binary.charAt(i)==&#39;1&#39; &amp;&amp; binary.charAt(i+1)==&#39;0&#39;){\r\n                patternStarts=true;\r\n                startIndex=i+1;\r\n\r\n            }\r\n            if(patternStarts &amp;&amp; binary.charAt(i+1)==&#39;1&#39;){\r\n                patternEnds=true;\r\n                endIndex=i;\r\n                maxGap++;\r\n                int count=endIndex-startIndex+1;\r\n                countZero=Integer.max(count,countZero);\r\n                patternStarts=false;patternEnds=false;\r\n            }      \r\n        }\r\n        return countZero;\r\n    }\r\n}\r\n```","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>Below is my solution in Java. Task score , correctness=100%</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution {\n    public int solution(int N) {\n        // Implement your solution here\n        int maxGap=0;\n        boolean patternStarts=false;\n        boolean patternEnds=false;\n        int countZero=0;\n        int startIndex=0;\n        int endIndex=0;\n        String binary=Integer.toBinaryString(N);\n        for(int i=0;i&lt;binary.length()-1;i++){\n            if(binary.charAt(i)=='1' &amp;&amp; binary.charAt(i+1)=='0'){\n                patternStarts=true;\n                startIndex=i+1;\n\n            }\n            if(patternStarts &amp;&amp; binary.charAt(i+1)=='1'){\n                patternEnds=true;\n                endIndex=i;\n                maxGap++;\n                int count=endIndex-startIndex+1;\n                countZero=Integer.max(count,countZero);\n                patternStarts=false;patternEnds=false;\n            }      \n        }\n        return countZero;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1879131,"reputation":301,"user_id":1699708,"accept_rate":86,"display_name":"Vimal Panchal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27071,"favorite_count":0,"down_vote_count":7,"up_vote_count":9,"accepted_answer_id":40947033,"answer_count":32,"score":2,"last_activity_date":1689786493,"creation_date":1480755635,"question_id":40946025,"body_markdown":"A binary gap within a positive integer N is any maximal sequence of consecutive zeros that is surrounded by ones at both ends in the binary representation of N.\r\n\r\nFor example, number 9 has binary representation 1001 and contains a binary gap of length 2. The number 529 has binary representation 1000010001 and contains two binary gaps: one of length 4 and one of length 3. The number 20 has binary representation 10100 and contains one binary gap of length 1. The number 15 has binary representation 1111 and has no binary gaps.\r\n\r\nWrite a function:\r\n\r\nint solution(int N);\r\nthat, given a positive integer N, returns the length of its longest binary gap. The function should return 0 if N doesn&#39;t contain a binary gap.\r\n\r\nFor example, given N = 1041 the function should return 5, because N has binary representation 10000010001 and so its longest binary gap is of length 5.\r\n\r\n \r\n\r\n    public int solution(int n) {\r\n            // write your code in Java SE 8\r\n            String binaryRep = Integer.toBinaryString(n);\r\n            System.out.println(&quot;Binary Representation of &quot; + n + &quot; = &quot; + binaryRep);\r\n            List&lt;String&gt; strList = new ArrayList&lt;String&gt;();\r\n            int count = 0;\r\n            for (int i = 0; i &lt; binaryRep.length(); i++) { // Loop through the each number \r\n                String str = binaryRep.charAt(i) + &quot;&quot;; // getting one by one number\r\n                if(str.equals(&quot;0&quot;)){\r\n                    for(int j = i;j&lt;binaryRep.length();j++){ //Get each next element\r\n                        String str1 = binaryRep.charAt(j) + &quot;&quot;;\r\n                        if(!str.equals(&quot;1&quot;) &amp;&amp;  str.equals(str1)){\r\n                            if(!strList.isEmpty() &amp;&amp; count &gt;= strList.size()){\r\n                                strList.add(str1);\r\n                            }else if(strList.isEmpty()){\r\n                                strList.add(str1);\r\n                            }\r\n                            count ++; \r\n                        }else{\r\n                            count = 0;\r\n                            break;\r\n                        }\r\n                    }\r\n               }   \r\n            }\r\n            return strList.size();\r\n        }","title":"Is my code solution for Binary Gap is correct or not? What should I improved in that?","body":"<p>A binary gap within a positive integer N is any maximal sequence of consecutive zeros that is surrounded by ones at both ends in the binary representation of N.</p>\n\n<p>For example, number 9 has binary representation 1001 and contains a binary gap of length 2. The number 529 has binary representation 1000010001 and contains two binary gaps: one of length 4 and one of length 3. The number 20 has binary representation 10100 and contains one binary gap of length 1. The number 15 has binary representation 1111 and has no binary gaps.</p>\n\n<p>Write a function:</p>\n\n<p>int solution(int N);\nthat, given a positive integer N, returns the length of its longest binary gap. The function should return 0 if N doesn't contain a binary gap.</p>\n\n<p>For example, given N = 1041 the function should return 5, because N has binary representation 10000010001 and so its longest binary gap is of length 5.</p>\n\n<pre><code>public int solution(int n) {\n        // write your code in Java SE 8\n        String binaryRep = Integer.toBinaryString(n);\n        System.out.println(\"Binary Representation of \" + n + \" = \" + binaryRep);\n        List&lt;String&gt; strList = new ArrayList&lt;String&gt;();\n        int count = 0;\n        for (int i = 0; i &lt; binaryRep.length(); i++) { // Loop through the each number \n            String str = binaryRep.charAt(i) + \"\"; // getting one by one number\n            if(str.equals(\"0\")){\n                for(int j = i;j&lt;binaryRep.length();j++){ //Get each next element\n                    String str1 = binaryRep.charAt(j) + \"\";\n                    if(!str.equals(\"1\") &amp;&amp;  str.equals(str1)){\n                        if(!strList.isEmpty() &amp;&amp; count &gt;= strList.size()){\n                            strList.add(str1);\n                        }else if(strList.isEmpty()){\n                            strList.add(str1);\n                        }\n                        count ++; \n                    }else{\n                        count = 0;\n                        break;\n                    }\n                }\n           }   \n        }\n        return strList.size();\n    }\n</code></pre>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":296495,"reputation":17580,"user_id":601493,"accept_rate":73,"display_name":"Jan Zyka"},"score":2,"creation_date":1300447365,"post_id":5351108,"comment_id":6043632,"body_markdown":"Beware that Java itself is case-sensitive so there may be 2 different fields which have same name when you do .toLowercase() on the name!","body":"Beware that Java itself is case-sensitive so there may be 2 different fields which have same name when you do .toLowercase() on the name!"},{"owner":{"account_id":294407,"reputation":263,"user_id":598293,"accept_rate":88,"display_name":"GoofyHTS"},"score":0,"creation_date":1300451117,"post_id":5351108,"comment_id":6044459,"body_markdown":"I&#39;m aware of that, but in my case it&#39;s guaranteed not to happen","body":"I&#39;m aware of that, but in my case it&#39;s guaranteed not to happen"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1300446831,"creation_date":1300446831,"answer_id":5351147,"question_id":5351108,"body_markdown":"Just use [`Class.getDeclaredFields()`][1] and look through the results performing a case-insensitive match yourself.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredFields%28%29","title":"Java Reflection, Ignore case when using GetDeclaredField","body":"<p>Just use <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredFields%28%29\"><code>Class.getDeclaredFields()</code></a> and look through the results performing a case-insensitive match yourself.</p>\n"},{"tags":[],"owner":{"account_id":97818,"reputation":114824,"user_id":265143,"accept_rate":72,"display_name":"P&#233;ter T&#246;r&#246;k"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1300446877,"creation_date":1300446877,"answer_id":5351155,"question_id":5351108,"body_markdown":"The only way I see is to iterate over all declared fields and compare the names case-insensitively to the field name you are looking for.","title":"Java Reflection, Ignore case when using GetDeclaredField","body":"<p>The only way I see is to iterate over all declared fields and compare the names case-insensitively to the field name you are looking for.</p>\n"},{"tags":[],"owner":{"account_id":89589,"reputation":21149,"user_id":247090,"accept_rate":79,"display_name":"drekka"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1300446877,"creation_date":1300446877,"answer_id":5351157,"question_id":5351108,"body_markdown":"Get a list of all declared fields and manually go through them in a loop doing a case insensitive comparison on the name.","title":"Java Reflection, Ignore case when using GetDeclaredField","body":"<p>Get a list of all declared fields and manually go through them in a loop doing a case insensitive comparison on the name.</p>\n"},{"tags":[],"owner":{"account_id":116185,"reputation":7719,"user_id":304778,"accept_rate":74,"display_name":"secmask"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1300447039,"creation_date":1300447039,"answer_id":5351182,"question_id":5351108,"body_markdown":"No, there&#39;s no such way. You can get all fields and search through them:\r\n\r\n    Field[] fields = src.getClass().getDeclaredFields();\r\n    for(Field f:fields){\r\n        if(f.getName().equalsIgnoreCase(&quot;myfield&quot;)){\r\n        //stuff.\r\n        }\r\n    }","title":"Java Reflection, Ignore case when using GetDeclaredField","body":"<p>No, there's no such way. You can get all fields and search through them:</p>\n\n<pre><code>Field[] fields = src.getClass().getDeclaredFields();\nfor(Field f:fields){\n    if(f.getName().equalsIgnoreCase(\"myfield\")){\n    //stuff.\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":308110,"reputation":1740,"user_id":619789,"accept_rate":80,"display_name":"Danilo Tommasina"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1300453034,"creation_date":1300447108,"answer_id":5351195,"question_id":5351108,"body_markdown":"No, there is no direct way of doing this, however you could create a helper method for doing this.\r\ne.g. (untested)\r\n\r\n    public Field getDeclaredFieldIngoreCase( Class&lt;?&gt; clazz, String fieldName ) throws NoSuchFieldException {\r\n    \r\n    \t    for( Field field : clazz.getDeclaredFields() ) {\r\n    \t        if ( field.getName().equalsIgnoreCase( fieldName ) ) {\r\n    \t            return field;\r\n    \t        }\r\n    \t    }\r\n    \t    throw new NoSuchFieldException( fieldName );\r\n    }","title":"Java Reflection, Ignore case when using GetDeclaredField","body":"<p>No, there is no direct way of doing this, however you could create a helper method for doing this.\ne.g. (untested)</p>\n\n<pre><code>public Field getDeclaredFieldIngoreCase( Class&lt;?&gt; clazz, String fieldName ) throws NoSuchFieldException {\n\n        for( Field field : clazz.getDeclaredFields() ) {\n            if ( field.getName().equalsIgnoreCase( fieldName ) ) {\n                return field;\n            }\n        }\n        throw new NoSuchFieldException( fieldName );\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1460117,"reputation":133,"user_id":1374669,"display_name":"lifesoordinary"},"score":0,"creation_date":1536843774,"post_id":49991474,"comment_id":91575785,"body_markdown":"If you only want to access one field for a particular class performance will be worse and there might be other situatuations.","body":"If you only want to access one field for a particular class performance will be worse and there might be other situatuations."}],"tags":[],"owner":{"account_id":7478901,"reputation":454,"user_id":5684326,"accept_rate":50,"display_name":"jdmneon"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524527363,"creation_date":1524527363,"answer_id":49991474,"question_id":5351108,"body_markdown":"I don&#39;t mean to necro this thread but if you used any of the methods above inside a loop your performance will be awful. Create map beforehand\r\n\r\nfirst take the item your search for to uppercase\r\n     \r\n    item.getKey()\r\n\r\nnow create a map that has the uppercase version and the true fieldnames\r\n    \r\n    Map&lt;String, String&gt; fieldNames = Arrays.asList(clazz.getDeclaredFields()).stream().collect(Collectors.toMap(t -&gt; t.getName().toUpperCase(), f-&gt;f.getName()));\r\n\r\nnow use that to grab the true fieldname\r\n\r\n      Field field = clazz.getDeclaredField(fieldNames.get(key));\r\n\r\nI would say always create such a map, always consider performance when it comes to reflection.\r\n          ","title":"Java Reflection, Ignore case when using GetDeclaredField","body":"<p>I don't mean to necro this thread but if you used any of the methods above inside a loop your performance will be awful. Create map beforehand</p>\n\n<p>first take the item your search for to uppercase</p>\n\n<pre><code>item.getKey()\n</code></pre>\n\n<p>now create a map that has the uppercase version and the true fieldnames</p>\n\n<pre><code>Map&lt;String, String&gt; fieldNames = Arrays.asList(clazz.getDeclaredFields()).stream().collect(Collectors.toMap(t -&gt; t.getName().toUpperCase(), f-&gt;f.getName()));\n</code></pre>\n\n<p>now use that to grab the true fieldname</p>\n\n<pre><code>  Field field = clazz.getDeclaredField(fieldNames.get(key));\n</code></pre>\n\n<p>I would say always create such a map, always consider performance when it comes to reflection.</p>\n"},{"tags":[],"owner":{"account_id":1460117,"reputation":133,"user_id":1374669,"display_name":"lifesoordinary"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536844451,"creation_date":1536844451,"answer_id":52314548,"question_id":5351108,"body_markdown":"Best to try to get field with fieldName if does not exist then loop through list of fields\r\n\r\n    public static Field findFieldIgnoreCase(Class&lt;?&gt; clazz, String fieldName) throws SecurityException, NoSuchFieldException {\r\n\t\ttry {\r\n\t\t\treturn clazz.getDeclaredField(fieldName);\r\n\t\t} catch (NoSuchFieldException e) {\r\n\t\t\tField[] fields = clazz.getDeclaredFields();\r\n\t\t\tfor (Field field : fields) {\r\n\t\t\t\tif (field.getName().equalsIgnoreCase(fieldName)) {\r\n\t\t\t\t\treturn field;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthrow new NoSuchFieldException(fieldName);\r\n\t\t}\r\n\t}","title":"Java Reflection, Ignore case when using GetDeclaredField","body":"<p>Best to try to get field with fieldName if does not exist then loop through list of fields</p>\n\n<pre><code>public static Field findFieldIgnoreCase(Class&lt;?&gt; clazz, String fieldName) throws SecurityException, NoSuchFieldException {\n    try {\n        return clazz.getDeclaredField(fieldName);\n    } catch (NoSuchFieldException e) {\n        Field[] fields = clazz.getDeclaredFields();\n        for (Field field : fields) {\n            if (field.getName().equalsIgnoreCase(fieldName)) {\n                return field;\n            }\n        }\n        throw new NoSuchFieldException(fieldName);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7478901,"reputation":454,"user_id":5684326,"accept_rate":50,"display_name":"jdmneon"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689786393,"creation_date":1689786393,"answer_id":76723678,"question_id":5351108,"body_markdown":"One thing to remember is to save the results of getDeclaredFields() this way you are only doing the reflection once use equalsIgnoreCase when you iterate. Reflection slows things down sometimes over 100x so anything you only have to do once, do once. \r\n```\r\nField[] fields = MyClass.class.getDeclaredFields();\r\nField myField = null;\r\nfor (Field field : fields) {\r\n    if (field.getName().equalsIgnoreCase(&quot;myField&quot;)) {\r\n        myField = field;\r\n        break;\r\n    }\r\n}\r\nif (myField != null) {\r\n    // do what you want with the found field\r\n} else {\r\n    //the field was not found and you wont get an error\r\n}\r\n```","title":"Java Reflection, Ignore case when using GetDeclaredField","body":"<p>One thing to remember is to save the results of getDeclaredFields() this way you are only doing the reflection once use equalsIgnoreCase when you iterate. Reflection slows things down sometimes over 100x so anything you only have to do once, do once.</p>\n<pre><code>Field[] fields = MyClass.class.getDeclaredFields();\nField myField = null;\nfor (Field field : fields) {\n    if (field.getName().equalsIgnoreCase(&quot;myField&quot;)) {\n        myField = field;\n        break;\n    }\n}\nif (myField != null) {\n    // do what you want with the found field\n} else {\n    //the field was not found and you wont get an error\n}\n</code></pre>\n"}],"owner":{"account_id":294407,"reputation":263,"user_id":598293,"accept_rate":88,"display_name":"GoofyHTS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11674,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":5351147,"answer_count":8,"score":8,"last_activity_date":1689786393,"creation_date":1300446668,"question_id":5351108,"body_markdown":"Let&#39;s say I have a class with a string field named &quot;myfield&quot;, and use reflection to get the field, I&#39;ve found that `Object.getClass().getDeclaredField(&quot;myfield&quot;);` is case sensitive, it will throw an `NoSuchFieldException` if I for example use `Object.getClass().getDeclaredField(&quot;MyField&quot;);`\r\n\r\nIs there any way around it? forcing it to ignore case?\r\n\r\nThanks","title":"Java Reflection, Ignore case when using GetDeclaredField","body":"<p>Let's say I have a class with a string field named \"myfield\", and use reflection to get the field, I've found that <code>Object.getClass().getDeclaredField(\"myfield\");</code> is case sensitive, it will throw an <code>NoSuchFieldException</code> if I for example use <code>Object.getClass().getDeclaredField(\"MyField\");</code></p>\n\n<p>Is there any way around it? forcing it to ignore case?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","servlet-filters","tomcat9"],"comments":[{"owner":{"account_id":7413250,"reputation":592,"user_id":5639961,"display_name":"yyyy"},"score":0,"creation_date":1689323612,"post_id":76681245,"comment_id":135200152,"body_markdown":"You can&#39;t see it in the browser because the header is modified only on the server side. Why do you want to add a header to the request in the first place?","body":"You can&#39;t see it in the browser because the header is modified only on the server side. Why do you want to add a header to the request in the first place?"},{"owner":{"account_id":8740804,"reputation":19,"user_id":6537945,"display_name":"Timothy Ward"},"score":0,"creation_date":1689338836,"post_id":76681245,"comment_id":135203144,"body_markdown":"I have something that I need to pick in as a CGI Environment Variable and was told that if I modified and put it in the header, I should be able to see it.","body":"I have something that I need to pick in as a CGI Environment Variable and was told that if I modified and put it in the header, I should be able to see it."}],"answers":[{"tags":[],"owner":{"account_id":8740804,"reputation":19,"user_id":6537945,"display_name":"Timothy Ward"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689785975,"creation_date":1689785975,"answer_id":76723640,"question_id":76681245,"body_markdown":"Had to add the following to the MutableHttpServletRequest.java:\r\n\r\n\r\nimport java.util.Optional;\r\n\r\n    @Override\r\n    public Enumeration&lt;String&gt; getHeaders(String name) {\r\n        Set&lt;String&gt; set = new HashSet&lt;&gt;();\r\n        Optional.ofNullable(customHeaders.get(name)).ifPresent(h -&gt; set.add(h));\r\n        Enumeration&lt;String&gt; e = ((HttpServletRequest) getRequest()).getHeaders(name);\r\n        while (e.hasMoreElements()) {\r\n            // add the names of the request headers into the list\r\n            String n = e.nextElement();\r\n            set.add(n);\r\n        }\r\n        Optional.ofNullable(customHeaders.get(name)).ifPresent(h -&gt; set.add(h));\r\n        return Collections.enumeration(set);\r\n    }","title":"Does anyone have Adding Custom Headers to Java HttpServletRequest actually working in a Filter?","body":"<p>Had to add the following to the MutableHttpServletRequest.java:</p>\n<p>import java.util.Optional;</p>\n<pre><code>@Override\npublic Enumeration&lt;String&gt; getHeaders(String name) {\n    Set&lt;String&gt; set = new HashSet&lt;&gt;();\n    Optional.ofNullable(customHeaders.get(name)).ifPresent(h -&gt; set.add(h));\n    Enumeration&lt;String&gt; e = ((HttpServletRequest) getRequest()).getHeaders(name);\n    while (e.hasMoreElements()) {\n        // add the names of the request headers into the list\n        String n = e.nextElement();\n        set.add(n);\n    }\n    Optional.ofNullable(customHeaders.get(name)).ifPresent(h -&gt; set.add(h));\n    return Collections.enumeration(set);\n}\n</code></pre>\n"}],"owner":{"account_id":8740804,"reputation":19,"user_id":6537945,"display_name":"Timothy Ward"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689785975,"creation_date":1689263249,"question_id":76681245,"body_markdown":"I&#39;ve tried using the following code:\r\n\r\n[Adding custom headers to Java HttpServletRequest](https://wilddiary.com/adding-custom-headers-java-httpservletrequest/)\r\n\r\nIn a Filter under Tomcat 9 but my values are not being put in the request headers.\r\n\r\nI&#39;ve added the Filter mapping to the root web.xml.\r\n\r\nI know it&#39;s using the Filter because I also print values to stdout while I&#39;m in there.\r\n\r\n\r\nChecking the headers in the browser, I don&#39;t see the custom values.","title":"Does anyone have Adding Custom Headers to Java HttpServletRequest actually working in a Filter?","body":"<p>I've tried using the following code:</p>\n<p><a href=\"https://wilddiary.com/adding-custom-headers-java-httpservletrequest/\" rel=\"nofollow noreferrer\">Adding custom headers to Java HttpServletRequest</a></p>\n<p>In a Filter under Tomcat 9 but my values are not being put in the request headers.</p>\n<p>I've added the Filter mapping to the root web.xml.</p>\n<p>I know it's using the Filter because I also print values to stdout while I'm in there.</p>\n<p>Checking the headers in the browser, I don't see the custom values.</p>\n"},{"tags":["java","ignite","gridgain"],"answers":[{"tags":[],"owner":{"account_id":22737062,"reputation":33,"user_id":16899118,"display_name":"kashif sayeed"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1652426441,"creation_date":1652426441,"answer_id":72225781,"question_id":72225384,"body_markdown":"I resoved it by Editing my create table statment as below\r\n\r\n    cache.query(new SqlFieldsQuery(&quot;CREATE TABLE person (id BIGINT, name VARCHAR, city_id BIGINT, PRIMARY KEY (id, city_id)) &quot; + &quot;WITH \\&quot;backups=1, affinity_key=city_id, CACHE_NAME=Person,key_type=PersonKey, value_type=MyPerson\\&quot;&quot;)).getAll();\r\n\r\nnotice I now assigned custom names to Key and Value\r\n\r\n\r\n\r\nI also fixed issues with function createPersonKey as below\r\n\r\n\r\n    private static BinaryObject createPersonKey(Long id, Long city_id, Ignite ignite) {\r\n            BinaryObjectBuilder builder = ignite.binary().builder(&quot;PersonKey&quot;);\r\n            builder.setField(&quot;id&quot;, id);\r\n            builder.setField(&quot;city_id&quot;, city_id);\r\n            return builder.build();\r\n        } \r\n\r\n\r\n","title":"Apache Ignite No data inserted while using cache.put method with BinaryObjects","body":"<p>I resoved it by Editing my create table statment as below</p>\n<pre><code>cache.query(new SqlFieldsQuery(&quot;CREATE TABLE person (id BIGINT, name VARCHAR, city_id BIGINT, PRIMARY KEY (id, city_id)) &quot; + &quot;WITH \\&quot;backups=1, affinity_key=city_id, CACHE_NAME=Person,key_type=PersonKey, value_type=MyPerson\\&quot;&quot;)).getAll();\n</code></pre>\n<p>notice I now assigned custom names to Key and Value</p>\n<p>I also fixed issues with function createPersonKey as below</p>\n<pre><code>private static BinaryObject createPersonKey(Long id, Long city_id, Ignite ignite) {\n        BinaryObjectBuilder builder = ignite.binary().builder(&quot;PersonKey&quot;);\n        builder.setField(&quot;id&quot;, id);\n        builder.setField(&quot;city_id&quot;, city_id);\n        return builder.build();\n    } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5254061,"reputation":130,"user_id":4197403,"display_name":"J&#246;rg B&#228;chtiger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689785343,"creation_date":1689785343,"answer_id":76723578,"question_id":72225384,"body_markdown":"There is another bug in the code above. The type name &quot;value-type1&quot; in createPersonVal must be &quot;MyPerson&quot; as stated in the create table statement.\r\n\r\n```\r\n    private static BinaryObject createPersonVal(String name,Ignite ignite) {\r\n        BinaryObjectBuilder builder = ignite.binary().builder(&quot;MyPerson&quot;);\r\n        builder.setField(&quot;name&quot;, name);\r\n\r\n        return builder.build();\r\n    }\r\n```","title":"Apache Ignite No data inserted while using cache.put method with BinaryObjects","body":"<p>There is another bug in the code above. The type name &quot;value-type1&quot; in createPersonVal must be &quot;MyPerson&quot; as stated in the create table statement.</p>\n<pre><code>    private static BinaryObject createPersonVal(String name,Ignite ignite) {\n        BinaryObjectBuilder builder = ignite.binary().builder(&quot;MyPerson&quot;);\n        builder.setField(&quot;name&quot;, name);\n\n        return builder.build();\n    }\n</code></pre>\n"}],"owner":{"account_id":22737062,"reputation":33,"user_id":16899118,"display_name":"kashif sayeed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":305,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689785343,"creation_date":1652423973,"question_id":72225384,"body_markdown":"After going through several posts on getting and putting data into a SQL table in appche ignite with the help of BinaryObjects I wrote below code for a test. The code run successfully without any error but no data get inserted using BinaryObjects. \r\n\r\nIt is puzzling why cache.put is not working when BinaryObjects are used\r\n\r\n``` package ign.ignitebin;\r\n\r\nimport java.io.Serializable;\r\nimport java.math.BigInteger;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nimport org.apache.ignite.Ignite;\r\nimport org.apache.ignite.IgniteCache;\r\nimport org.apache.ignite.Ignition;\r\nimport org.apache.ignite.binary.BinaryObject;\r\nimport org.apache.ignite.binary.BinaryObjectBuilder;\r\nimport org.apache.ignite.cache.query.QueryCursor;\r\nimport org.apache.ignite.cache.query.SqlFieldsQuery;\r\nimport org.apache.ignite.configuration.CacheConfiguration;\r\nimport org.apache.ignite.configuration.IgniteConfiguration;\r\nimport org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi;\r\nimport org.apache.ignite.spi.discovery.tcp.ipfinder.vm.TcpDiscoveryVmIpFinder;\r\n\r\npublic class BinaryPutExample {\r\n    private static void print(String msg) {\r\n        System.out.println();\r\n        System.out.println(&quot;&gt;&gt;&gt; &quot; + msg);\r\n    }\r\n    private static final String DUMMY_CACHE_NAME = &quot;dummy_cache&quot;;\r\n    \r\n\r\n    public static void putBinaryData() {\r\n        IgniteConfiguration cfg= new IgniteConfiguration();\r\n        cfg.setPeerClassLoadingEnabled(true);\r\n        Ignition.setClientMode(true);\r\n        TcpDiscoverySpi discoverySpi = new TcpDiscoverySpi();\r\n        TcpDiscoveryVmIpFinder ipFinder = new TcpDiscoveryVmIpFinder();\r\n        \r\n        ipFinder.setAddresses(Arrays.asList(&quot;127.0.0.1:47500..47509&quot;));\r\n        \r\n        discoverySpi.setIpFinder(ipFinder);\r\n        \r\n        discoverySpi.setJoinTimeout(1000);\r\n        discoverySpi.setClientReconnectDisabled(false);\r\n        \r\n        cfg.setDiscoverySpi(discoverySpi);\r\n        try(Ignite ignite = Ignition.getOrStart(cfg)){\r\n            CacheConfiguration&lt;?, ?&gt; cacheCfg = new CacheConfiguration&lt;&gt;(DUMMY_CACHE_NAME).setSqlSchema(&quot;PUBLIC&quot;);\r\n\r\n            try (\r\n                IgniteCache&lt;?, ?&gt; cache = ignite.getOrCreateCache(cacheCfg)\r\n            ) {\r\n                // Create reference City table based on REPLICATED template.\r\n                cache.query(new SqlFieldsQuery(\r\n                    &quot;CREATE TABLE city (id BIGINT PRIMARY KEY, name VARCHAR) WITH \\&quot;template=replicated, CACHE_NAME=City\\&quot;&quot;)).getAll();\r\n\r\n                // Create table based on PARTITIONED template with one backup.\r\n                cache.query(new SqlFieldsQuery(\r\n                    &quot;CREATE TABLE person (id BIGINT, name VARCHAR, city_id BIGINT, PRIMARY KEY (id, city_id)) &quot; +\r\n                    &quot;WITH \\&quot;backups=1, affinity_key=city_id, CACHE_NAME=Person\\&quot;&quot;)).getAll();\r\n\r\n                // Create an index.\r\n                cache.query(new SqlFieldsQuery(&quot;CREATE INDEX person_idx ON Person (city_id)&quot;)).getAll();\r\n\r\n                print(&quot;Created database objects.&quot;);\r\n\r\n                SqlFieldsQuery qry = new SqlFieldsQuery(&quot;INSERT INTO city (id, name) VALUES (?, ?)&quot;);\r\n\r\n                cache.query(qry.setArgs(1L, &quot;Forest Hill&quot;)).getAll();\r\n                cache.query(qry.setArgs(2L, &quot;Denver&quot;)).getAll();\r\n                cache.query(qry.setArgs(3L, &quot;St. Petersburg&quot;)).getAll();\r\n\r\n                qry = new SqlFieldsQuery(&quot;INSERT INTO person (id, name, city_id) values (?, ?, ?)&quot;);\r\n\r\n                cache.query(qry.setArgs(1L, &quot;John Doe&quot;, 3L)).getAll();\r\n                cache.query(qry.setArgs(2L, &quot;Jane Roe&quot;, 2L)).getAll();\r\n                cache.query(qry.setArgs(3L, &quot;Mary Major&quot;, 1L)).getAll();\r\n                cache.query(qry.setArgs(4L, &quot;Richard Miles&quot;, 2L)).getAll();\r\n\r\n                print(&quot;Populated data.&quot;);\r\n\r\n                List&lt;List&lt;?&gt;&gt; res = cache.query(new SqlFieldsQuery(\r\n                    &quot;SELECT p.name, c.name FROM Person p INNER JOIN City c on c.id = p.city_id&quot;)).getAll();\r\n\r\n                print(&quot;Query results:&quot;);\r\n\r\n                for (Object next : res)\r\n                    System.out.println(&quot;&gt;&gt;&gt;    &quot; + next);\r\n\r\n                print(&quot;test binaries&quot;);\r\n\r\n                \r\n\r\n                \r\n                IgniteCache&lt;BinaryObject, BinaryObject&gt; bincache = ignite.cache(&quot;Person&quot;).withKeepBinary();\r\n\r\n                \r\n                \r\n                print(&quot;put some data using BinaryObject&quot;);\r\n                \r\n\r\n                bincache.put(createPersonKey(5, 3,ignite), createPersonVal(&quot;person5&quot;,ignite));\r\n                bincache.put(createPersonKey(6, 2,ignite), createPersonVal(&quot;person6&quot;,ignite));\r\n                bincache.put(createPersonKey(7, 1,ignite), createPersonVal(&quot;person7&quot;,ignite));\r\n                \r\n\r\n                print(&quot;Query results after binary addition :&quot;);\r\n                res = cache.query(new SqlFieldsQuery(\r\n                    &quot;SELECT p.name, c.name FROM Person p INNER JOIN City c on c.id = p.city_id&quot;)).getAll();\r\n         \r\n\r\n                for (Object next : res)\r\n                    System.out.println(&quot;&gt;&gt;&gt;    &quot; + next);\r\n\r\n                print(&quot;Bin Query results after binary addition :&quot;);\r\n                SqlFieldsQuery sql = new SqlFieldsQuery(\r\n                    &quot;select _key,_val from Person &quot;);\r\n                \r\n                try (QueryCursor&lt;List&lt;?&gt;&gt; cursor = bincache.query(sql)) {\r\n                    for (List&lt;?&gt; row :  cursor) {\r\n                        BinaryObject p = (BinaryObject) row.get(0);\r\n                        System.out.println(p);\r\n                    }\r\n                } \r\n\r\n\r\n\r\n                cache.query(new SqlFieldsQuery(&quot;drop table Person&quot;)).getAll();\r\n                cache.query(new SqlFieldsQuery(&quot;drop table City&quot;)).getAll();\r\n\r\n                print(&quot;Dropped database objects.&quot;);\r\n            }\r\n            finally {\r\n                // Distributed cache can be removed from cluster only by #destroyCache() call.\r\n                ignite.destroyCache(DUMMY_CACHE_NAME);\r\n            }\r\n            \r\n        };\r\n        \r\n    }\r\n    private static BinaryObject createPersonKey(Integer id, Integer city_id, Ignite ignite) {\r\n        BinaryObjectBuilder builder = ignite.binary().builder(&quot;key-type1&quot;);\r\n        builder.setField(&quot;id&quot;, id);\r\n        builder.setField(&quot;city_id&quot;, city_id);\r\n        return builder.build();\r\n    }\r\n    private static BinaryObject createPersonVal(String name,Ignite ignite) {\r\n        BinaryObjectBuilder builder = ignite.binary().builder(&quot;value-type1&quot;);\r\n        builder.setField(&quot;name&quot;, name);\r\n        \r\n        return builder.build();\r\n    }\r\n    \r\n}\r\n```\r\n","title":"Apache Ignite No data inserted while using cache.put method with BinaryObjects","body":"<p>After going through several posts on getting and putting data into a SQL table in appche ignite with the help of BinaryObjects I wrote below code for a test. The code run successfully without any error but no data get inserted using BinaryObjects.</p>\n<p>It is puzzling why cache.put is not working when BinaryObjects are used</p>\n<pre><code>\nimport java.io.Serializable;\nimport java.math.BigInteger;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport org.apache.ignite.Ignite;\nimport org.apache.ignite.IgniteCache;\nimport org.apache.ignite.Ignition;\nimport org.apache.ignite.binary.BinaryObject;\nimport org.apache.ignite.binary.BinaryObjectBuilder;\nimport org.apache.ignite.cache.query.QueryCursor;\nimport org.apache.ignite.cache.query.SqlFieldsQuery;\nimport org.apache.ignite.configuration.CacheConfiguration;\nimport org.apache.ignite.configuration.IgniteConfiguration;\nimport org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi;\nimport org.apache.ignite.spi.discovery.tcp.ipfinder.vm.TcpDiscoveryVmIpFinder;\n\npublic class BinaryPutExample {\n    private static void print(String msg) {\n        System.out.println();\n        System.out.println(&quot;&gt;&gt;&gt; &quot; + msg);\n    }\n    private static final String DUMMY_CACHE_NAME = &quot;dummy_cache&quot;;\n    \n\n    public static void putBinaryData() {\n        IgniteConfiguration cfg= new IgniteConfiguration();\n        cfg.setPeerClassLoadingEnabled(true);\n        Ignition.setClientMode(true);\n        TcpDiscoverySpi discoverySpi = new TcpDiscoverySpi();\n        TcpDiscoveryVmIpFinder ipFinder = new TcpDiscoveryVmIpFinder();\n        \n        ipFinder.setAddresses(Arrays.asList(&quot;127.0.0.1:47500..47509&quot;));\n        \n        discoverySpi.setIpFinder(ipFinder);\n        \n        discoverySpi.setJoinTimeout(1000);\n        discoverySpi.setClientReconnectDisabled(false);\n        \n        cfg.setDiscoverySpi(discoverySpi);\n        try(Ignite ignite = Ignition.getOrStart(cfg)){\n            CacheConfiguration&lt;?, ?&gt; cacheCfg = new CacheConfiguration&lt;&gt;(DUMMY_CACHE_NAME).setSqlSchema(&quot;PUBLIC&quot;);\n\n            try (\n                IgniteCache&lt;?, ?&gt; cache = ignite.getOrCreateCache(cacheCfg)\n            ) {\n                // Create reference City table based on REPLICATED template.\n                cache.query(new SqlFieldsQuery(\n                    &quot;CREATE TABLE city (id BIGINT PRIMARY KEY, name VARCHAR) WITH \\&quot;template=replicated, CACHE_NAME=City\\&quot;&quot;)).getAll();\n\n                // Create table based on PARTITIONED template with one backup.\n                cache.query(new SqlFieldsQuery(\n                    &quot;CREATE TABLE person (id BIGINT, name VARCHAR, city_id BIGINT, PRIMARY KEY (id, city_id)) &quot; +\n                    &quot;WITH \\&quot;backups=1, affinity_key=city_id, CACHE_NAME=Person\\&quot;&quot;)).getAll();\n\n                // Create an index.\n                cache.query(new SqlFieldsQuery(&quot;CREATE INDEX person_idx ON Person (city_id)&quot;)).getAll();\n\n                print(&quot;Created database objects.&quot;);\n\n                SqlFieldsQuery qry = new SqlFieldsQuery(&quot;INSERT INTO city (id, name) VALUES (?, ?)&quot;);\n\n                cache.query(qry.setArgs(1L, &quot;Forest Hill&quot;)).getAll();\n                cache.query(qry.setArgs(2L, &quot;Denver&quot;)).getAll();\n                cache.query(qry.setArgs(3L, &quot;St. Petersburg&quot;)).getAll();\n\n                qry = new SqlFieldsQuery(&quot;INSERT INTO person (id, name, city_id) values (?, ?, ?)&quot;);\n\n                cache.query(qry.setArgs(1L, &quot;John Doe&quot;, 3L)).getAll();\n                cache.query(qry.setArgs(2L, &quot;Jane Roe&quot;, 2L)).getAll();\n                cache.query(qry.setArgs(3L, &quot;Mary Major&quot;, 1L)).getAll();\n                cache.query(qry.setArgs(4L, &quot;Richard Miles&quot;, 2L)).getAll();\n\n                print(&quot;Populated data.&quot;);\n\n                List&lt;List&lt;?&gt;&gt; res = cache.query(new SqlFieldsQuery(\n                    &quot;SELECT p.name, c.name FROM Person p INNER JOIN City c on c.id = p.city_id&quot;)).getAll();\n\n                print(&quot;Query results:&quot;);\n\n                for (Object next : res)\n                    System.out.println(&quot;&gt;&gt;&gt;    &quot; + next);\n\n                print(&quot;test binaries&quot;);\n\n                \n\n                \n                IgniteCache&lt;BinaryObject, BinaryObject&gt; bincache = ignite.cache(&quot;Person&quot;).withKeepBinary();\n\n                \n                \n                print(&quot;put some data using BinaryObject&quot;);\n                \n\n                bincache.put(createPersonKey(5, 3,ignite), createPersonVal(&quot;person5&quot;,ignite));\n                bincache.put(createPersonKey(6, 2,ignite), createPersonVal(&quot;person6&quot;,ignite));\n                bincache.put(createPersonKey(7, 1,ignite), createPersonVal(&quot;person7&quot;,ignite));\n                \n\n                print(&quot;Query results after binary addition :&quot;);\n                res = cache.query(new SqlFieldsQuery(\n                    &quot;SELECT p.name, c.name FROM Person p INNER JOIN City c on c.id = p.city_id&quot;)).getAll();\n         \n\n                for (Object next : res)\n                    System.out.println(&quot;&gt;&gt;&gt;    &quot; + next);\n\n                print(&quot;Bin Query results after binary addition :&quot;);\n                SqlFieldsQuery sql = new SqlFieldsQuery(\n                    &quot;select _key,_val from Person &quot;);\n                \n                try (QueryCursor&lt;List&lt;?&gt;&gt; cursor = bincache.query(sql)) {\n                    for (List&lt;?&gt; row :  cursor) {\n                        BinaryObject p = (BinaryObject) row.get(0);\n                        System.out.println(p);\n                    }\n                } \n\n\n\n                cache.query(new SqlFieldsQuery(&quot;drop table Person&quot;)).getAll();\n                cache.query(new SqlFieldsQuery(&quot;drop table City&quot;)).getAll();\n\n                print(&quot;Dropped database objects.&quot;);\n            }\n            finally {\n                // Distributed cache can be removed from cluster only by #destroyCache() call.\n                ignite.destroyCache(DUMMY_CACHE_NAME);\n            }\n            \n        };\n        \n    }\n    private static BinaryObject createPersonKey(Integer id, Integer city_id, Ignite ignite) {\n        BinaryObjectBuilder builder = ignite.binary().builder(&quot;key-type1&quot;);\n        builder.setField(&quot;id&quot;, id);\n        builder.setField(&quot;city_id&quot;, city_id);\n        return builder.build();\n    }\n    private static BinaryObject createPersonVal(String name,Ignite ignite) {\n        BinaryObjectBuilder builder = ignite.binary().builder(&quot;value-type1&quot;);\n        builder.setField(&quot;name&quot;, name);\n        \n        return builder.build();\n    }\n    \n}\n</code></pre>\n"},{"tags":["java","hibernate","google-app-engine","google-cloud-platform"],"comments":[{"owner":{"account_id":948320,"reputation":5144,"user_id":975074,"accept_rate":40,"display_name":"suztomo"},"score":0,"creation_date":1569428667,"post_id":58096767,"comment_id":102596868,"body_markdown":"Interesting problem. Would you create an example (GitHub) project to reproduce this issue?","body":"Interesting problem. Would you create an example (GitHub) project to reproduce this issue?"},{"owner":{"account_id":7475656,"reputation":329,"user_id":5682185,"display_name":"lourdu rajan"},"score":0,"creation_date":1569508382,"post_id":58096767,"comment_id":102627214,"body_markdown":"Hi suztomo, I am preparing on it (few things need to do such as hiding credentials) and will share it to you asap. Also, I am new to the Github, so yet to look on how to update the code in github with public access. Is it ok for you to share the code over Google drive.","body":"Hi suztomo, I am preparing on it (few things need to do such as hiding credentials) and will share it to you asap. Also, I am new to the Github, so yet to look on how to update the code in github with public access. Is it ok for you to share the code over Google drive."},{"owner":{"account_id":948320,"reputation":5144,"user_id":975074,"accept_rate":40,"display_name":"suztomo"},"score":0,"creation_date":1569509628,"post_id":58096767,"comment_id":102627976,"body_markdown":"Yes, any place people can download is good.","body":"Yes, any place people can download is good."}],"answers":[{"tags":[],"owner":{"account_id":10811168,"reputation":119,"user_id":7951710,"display_name":"KingDSL"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689785060,"creation_date":1689785060,"answer_id":76723543,"question_id":58096767,"body_markdown":"I know this is a pretty old question, but as I was facing the same issue, this may be related to a Java version problem. Your hibernate version could be incompatible with your current JRE, and that&#39;s the reason why the HibernateEntityManagerFactory cannot be found.\r\n\r\n\r\nI hope this answer can be helpful.","title":"AppEngine Standard Java code Deploy - java.lang.NoClassDefFoundError: org/hibernate/jpa/HibernateEntityManagerFactory","body":"<p>I know this is a pretty old question, but as I was facing the same issue, this may be related to a Java version problem. Your hibernate version could be incompatible with your current JRE, and that's the reason why the HibernateEntityManagerFactory cannot be found.</p>\n<p>I hope this answer can be helpful.</p>\n"}],"owner":{"account_id":7475656,"reputation":329,"user_id":5682185,"display_name":"lourdu rajan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689785060,"creation_date":1569408755,"question_id":58096767,"body_markdown":"While trying to run AppEngine stadard Java code (which is run successfully 3 months back), using ```mvn appengine:run``` then got error. So tried the steps mentioned in my other [stackoverflow case][1]. After changed all dependencies to their latest version (few major changes like hibernate 3 to hibernate 6 version), then got java.lang.NoClassDefFoundError: org/hibernate/jpa/HibernateEntityManagerFactory.\r\n\r\nProblem I noted that &quot;hibernate-entitymanager&quot; is not available in  &quot;hibernate-core&quot; atrifact, so I got error like class &quot;org/hibernate/jpa/HibernateEntityManagerFactory&quot; not found. This  &quot;hibernate-entitymanager&quot; artifact has been moved to &quot;hibernate-core&quot; atrifact in recent version, as per mvn repository information. But when I use the org.hibernate.orm -&gt; hibernate-core dependency in POM file, then got error, also I couldn&#39;t find the hibernate-entitymanager dependency inside of that artifact. So want to know what is the alternative dependency to get the  hibernate-entitymanager class or where to get it.\r\n\r\nBelow is the detailed error log as highlighted, \r\n\r\n```\r\n[INFO] GCLOUD: Sep 24, 2019 9:47:52 AM com.google.appengine.tools.development.ApiProxyLocalImpl log\r\n[INFO] GCLOUD: INFO: javax.servlet.ServletContext log: No Spring WebApplicationInitializer types detected on classpath\r\n[INFO] GCLOUD: Sep 24, 2019 9:47:52 AM com.google.appengine.tools.development.ApiProxyLocalImpl log\r\n[INFO] GCLOUD: INFO: javax.servlet.ServletContext log: Initializing Spring root WebApplicationContext\r\n[INFO] GCLOUD: 2019-09-24 15:17:56.171:WARN:oejw.WebAppContext:main: Failed startup of context c.g.a.t.d.j.DevAppEngineWebAppContext@c3177d5{/,file:///C:/Lourdu/Development/RBR/target/rbr-1/,UNAVAILABLE}{C:\\Lourdu\\Development\\RBR\\target\\rbr-1}\r\n[INFO] GCLOUD: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in ServletContext resource [/WEB-INF/jpaContext.xml]: Cannot create inner bean &#39;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter#ddf20fd&#39; of type [org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter] while setting bean property &#39;jpaVendorAdapter&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter#ddf20fd&#39; defined in ServletContext resource [/WEB-INF/jpaContext.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/jpa/HibernateEntityManagerFactory\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:361)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:124)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1681)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1433)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n[INFO] GCLOUD: \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1105)\r\n[INFO] GCLOUD: \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\r\n[INFO] GCLOUD: \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\r\n[INFO] GCLOUD: \tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:400)\r\n[INFO] GCLOUD: \tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:291)\r\n[INFO] GCLOUD: \tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:957)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:922)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:365)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1497)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1459)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:852)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:278)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:545)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:167)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:167)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.Server.start(Server.java:418)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.Server.doStart(Server.java:382)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.jetty9.JettyContainerService.startContainer(JettyContainerService.java:343)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:283)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:26)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:87)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.Modules.startup(Modules.java:105)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:282)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:47)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:223)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:221)\r\n[INFO] GCLOUD: \tat java.security.AccessController.doPrivileged(Native Method)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:221)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:404)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:45)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:257)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:248)\r\n[INFO] GCLOUD: Caused by: \r\n[INFO] GCLOUD: java.lang.ClassNotFoundException: org.hibernate.jpa.HibernateEntityManagerFactory\r\n[INFO] GCLOUD: \tat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n[INFO] GCLOUD: \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:208)\r\n[INFO] GCLOUD: \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n[INFO] GCLOUD: \tat org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter.&lt;init&gt;(HibernateJpaVendorAdapter.java:82)\r\n[INFO] GCLOUD: \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n[INFO] GCLOUD: \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n[INFO] GCLOUD: \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n[INFO] GCLOUD: \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n[INFO] GCLOUD: \tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1295)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1197)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:346)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:124)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1681)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1433)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n[INFO] GCLOUD: \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n[INFO] GCLOUD: \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1105)\r\n[INFO] GCLOUD: \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\r\n[INFO] GCLOUD: \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\r\n[INFO] GCLOUD: \tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:400)\r\n[INFO] GCLOUD: \tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:291)\r\n[INFO] GCLOUD: \tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:957)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:922)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:365)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1497)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1459)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:852)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:278)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:545)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:167)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:167)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.Server.start(Server.java:418)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.server.Server.doStart(Server.java:382)\r\n[INFO] GCLOUD: \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.jetty9.JettyContainerService.startContainer(JettyContainerService.java:343)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:283)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:26)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:87)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.Modules.startup(Modules.java:105)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:282)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:47)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:223)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:221)\r\n[INFO] GCLOUD: \tat java.security.AccessController.doPrivileged(Native Method)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:221)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:404)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:45)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:257)\r\n[INFO] GCLOUD: \tat com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:248)\r\n[INFO] GCLOUD: 2019-09-24 15:17:56.178:INFO:oejs.session:main: DefaultSessionIdManager workerName=node0\r\n[INFO] GCLOUD: 2019-09-24 15:17:56.178:INFO:oejs.session:main: node0 Scavenging disabled\r\n[INFO] GCLOUD: 2019-09-24 15:17:56.204:INFO:oejs.AbstractConnector:main: Started NetworkTrafficSelectChannelConnector@56235b8e{HTTP/1.1,[http/1.1]}{localhost:8080}\r\n[INFO] GCLOUD: 2019-09-24 15:17:56.206:INFO:oejs.Server:main: Started @8847ms\r\n[INFO] GCLOUD: Sep 24, 2019 9:47:56 AM com.google.appengine.tools.development.AbstractModule startup\r\n[INFO] GCLOUD: INFO: Module instance default is running at http://localhost:8080/\r\n[INFO] GCLOUD: Sep 24, 2019 9:47:56 AM com.google.appengine.tools.development.AbstractModule startup\r\n[INFO] GCLOUD: INFO: The admin console is running at http://localhost:8080/_ah/admin\r\n[INFO] GCLOUD: Sep 24, 2019 3:17:56 PM com.google.appengine.tools.development.DevAppServerImpl doStart\r\n[INFO] GCLOUD: INFO: Dev App Server is now running\r\n\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/57873567/appengine-standard-java-code-deploy-getting-java-lang-noclassdeffounderror-org/58058452?noredirect=1#comment102584649_58058452","title":"AppEngine Standard Java code Deploy - java.lang.NoClassDefFoundError: org/hibernate/jpa/HibernateEntityManagerFactory","body":"<p>While trying to run AppEngine stadard Java code (which is run successfully 3 months back), using <code>mvn appengine:run</code> then got error. So tried the steps mentioned in my other <a href=\"https://stackoverflow.com/questions/57873567/appengine-standard-java-code-deploy-getting-java-lang-noclassdeffounderror-org/58058452?noredirect=1#comment102584649_58058452\">stackoverflow case</a>. After changed all dependencies to their latest version (few major changes like hibernate 3 to hibernate 6 version), then got java.lang.NoClassDefFoundError: org/hibernate/jpa/HibernateEntityManagerFactory.</p>\n\n<p>Problem I noted that \"hibernate-entitymanager\" is not available in  \"hibernate-core\" atrifact, so I got error like class \"org/hibernate/jpa/HibernateEntityManagerFactory\" not found. This  \"hibernate-entitymanager\" artifact has been moved to \"hibernate-core\" atrifact in recent version, as per mvn repository information. But when I use the org.hibernate.orm -> hibernate-core dependency in POM file, then got error, also I couldn't find the hibernate-entitymanager dependency inside of that artifact. So want to know what is the alternative dependency to get the  hibernate-entitymanager class or where to get it.</p>\n\n<p>Below is the detailed error log as highlighted, </p>\n\n<pre><code>[INFO] GCLOUD: Sep 24, 2019 9:47:52 AM com.google.appengine.tools.development.ApiProxyLocalImpl log\n[INFO] GCLOUD: INFO: javax.servlet.ServletContext log: No Spring WebApplicationInitializer types detected on classpath\n[INFO] GCLOUD: Sep 24, 2019 9:47:52 AM com.google.appengine.tools.development.ApiProxyLocalImpl log\n[INFO] GCLOUD: INFO: javax.servlet.ServletContext log: Initializing Spring root WebApplicationContext\n[INFO] GCLOUD: 2019-09-24 15:17:56.171:WARN:oejw.WebAppContext:main: Failed startup of context c.g.a.t.d.j.DevAppEngineWebAppContext@c3177d5{/,file:///C:/Lourdu/Development/RBR/target/rbr-1/,UNAVAILABLE}{C:\\Lourdu\\Development\\RBR\\target\\rbr-1}\n[INFO] GCLOUD: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/jpaContext.xml]: Cannot create inner bean 'org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter#ddf20fd' of type [org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter] while setting bean property 'jpaVendorAdapter'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter#ddf20fd' defined in ServletContext resource [/WEB-INF/jpaContext.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/jpa/HibernateEntityManagerFactory\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:361)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:124)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1681)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1433)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n[INFO] GCLOUD:  at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1105)\n[INFO] GCLOUD:  at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\n[INFO] GCLOUD:  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\n[INFO] GCLOUD:  at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:400)\n[INFO] GCLOUD:  at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:291)\n[INFO] GCLOUD:  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:957)\n[INFO] GCLOUD:  at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:922)\n[INFO] GCLOUD:  at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:365)\n[INFO] GCLOUD:  at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1497)\n[INFO] GCLOUD:  at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1459)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:852)\n[INFO] GCLOUD:  at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:278)\n[INFO] GCLOUD:  at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:545)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:167)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:167)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.Server.start(Server.java:418)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.Server.doStart(Server.java:382)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.jetty9.JettyContainerService.startContainer(JettyContainerService.java:343)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:283)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:26)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:87)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.Modules.startup(Modules.java:105)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:282)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:47)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:223)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:221)\n[INFO] GCLOUD:  at java.security.AccessController.doPrivileged(Native Method)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:221)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:404)\n[INFO] GCLOUD:  at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:45)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:257)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:248)\n[INFO] GCLOUD: Caused by: \n[INFO] GCLOUD: java.lang.ClassNotFoundException: org.hibernate.jpa.HibernateEntityManagerFactory\n[INFO] GCLOUD:  at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n[INFO] GCLOUD:  at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:208)\n[INFO] GCLOUD:  at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n[INFO] GCLOUD:  at org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter.&lt;init&gt;(HibernateJpaVendorAdapter.java:82)\n[INFO] GCLOUD:  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n[INFO] GCLOUD:  at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n[INFO] GCLOUD:  at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n[INFO] GCLOUD:  at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n[INFO] GCLOUD:  at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1295)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1197)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:346)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:124)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1681)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1433)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n[INFO] GCLOUD:  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n[INFO] GCLOUD:  at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1105)\n[INFO] GCLOUD:  at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\n[INFO] GCLOUD:  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\n[INFO] GCLOUD:  at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:400)\n[INFO] GCLOUD:  at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:291)\n[INFO] GCLOUD:  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:957)\n[INFO] GCLOUD:  at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:922)\n[INFO] GCLOUD:  at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:365)\n[INFO] GCLOUD:  at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1497)\n[INFO] GCLOUD:  at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1459)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:852)\n[INFO] GCLOUD:  at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:278)\n[INFO] GCLOUD:  at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:545)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:167)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:167)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.Server.start(Server.java:418)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\n[INFO] GCLOUD:  at org.eclipse.jetty.server.Server.doStart(Server.java:382)\n[INFO] GCLOUD:  at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.jetty9.JettyContainerService.startContainer(JettyContainerService.java:343)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:283)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:26)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:87)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.Modules.startup(Modules.java:105)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:282)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:47)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:223)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:221)\n[INFO] GCLOUD:  at java.security.AccessController.doPrivileged(Native Method)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:221)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:404)\n[INFO] GCLOUD:  at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:45)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:257)\n[INFO] GCLOUD:  at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:248)\n[INFO] GCLOUD: 2019-09-24 15:17:56.178:INFO:oejs.session:main: DefaultSessionIdManager workerName=node0\n[INFO] GCLOUD: 2019-09-24 15:17:56.178:INFO:oejs.session:main: node0 Scavenging disabled\n[INFO] GCLOUD: 2019-09-24 15:17:56.204:INFO:oejs.AbstractConnector:main: Started NetworkTrafficSelectChannelConnector@56235b8e{HTTP/1.1,[http/1.1]}{localhost:8080}\n[INFO] GCLOUD: 2019-09-24 15:17:56.206:INFO:oejs.Server:main: Started @8847ms\n[INFO] GCLOUD: Sep 24, 2019 9:47:56 AM com.google.appengine.tools.development.AbstractModule startup\n[INFO] GCLOUD: INFO: Module instance default is running at http://localhost:8080/\n[INFO] GCLOUD: Sep 24, 2019 9:47:56 AM com.google.appengine.tools.development.AbstractModule startup\n[INFO] GCLOUD: INFO: The admin console is running at http://localhost:8080/_ah/admin\n[INFO] GCLOUD: Sep 24, 2019 3:17:56 PM com.google.appengine.tools.development.DevAppServerImpl doStart\n[INFO] GCLOUD: INFO: Dev App Server is now running\n\n</code></pre>\n"},{"tags":["java","spring","spring-security"],"owner":{"account_id":22398549,"reputation":1,"user_id":16681636,"display_name":"Alison Walker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689784711,"creation_date":1689784711,"question_id":76723493,"body_markdown":"I can get the password (not encrypted) through OncePerRequestFilter, however, I would like to get it in a normal class of type @Controller. Follow the code.\r\n\r\nMy Form:\r\n\r\n    &lt;form action=&quot;/security/login&quot; method=&quot;post&quot;&gt;\r\n\r\n      &lt;div class=&quot;input-group mb-3&quot;&gt;\r\n        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;username&quot; placeholder=&quot;username&quot; required&gt;\r\n      &lt;/div&gt;\r\n      &lt;div class=&quot;input-group mb-3&quot;&gt;\r\n        &lt;input type=&quot;password&quot; class=&quot;form-control&quot; name=&quot;password&quot; placeholder=&quot;password&quot; required&gt;\r\n      &lt;/div&gt;\r\n\r\n      &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Acessar&lt;/button&gt;\r\n    &lt;/form&gt;\r\n\r\nThe class I currently use to get the information after login:\r\n\r\n    public class CustomAuthenticationFilter extends OncePerRequestFilter {  \r\n\r\n    private String pass; \r\n    private String user;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n        throws ServletException, IOException {\r\n    \r\n    if (&quot;/security/login&quot;.equals(request.getRequestURI()) &amp;&amp; request.getMethod().equalsIgnoreCase(&quot;post&quot;)) {\r\n        String username = request.getParameter(&quot;username&quot;);\r\n        String password = request.getParameter(&quot;password&quot;);\r\n        \r\n        if (username != null &amp;&amp; password != null) {\r\n            request.setAttribute(&quot;username&quot;, username);\r\n            request.setAttribute(&quot;password&quot;, password);\r\n            \r\n            user = username;\r\n            pass = password;\r\n            \r\n            login.setUsername(username);\r\n            System.out.println(&quot;User Login: &quot;+user+&quot; Password: &quot;+pass);\r\n        }\r\n    }        \r\n    chain.doFilter(request, response);\r\n    }","title":"Get username and password (Unencrypted) in Spring Security","body":"<p>I can get the password (not encrypted) through OncePerRequestFilter, however, I would like to get it in a normal class of type @Controller. Follow the code.</p>\n<p>My Form:</p>\n<pre><code>&lt;form action=&quot;/security/login&quot; method=&quot;post&quot;&gt;\n\n  &lt;div class=&quot;input-group mb-3&quot;&gt;\n    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;username&quot; placeholder=&quot;username&quot; required&gt;\n  &lt;/div&gt;\n  &lt;div class=&quot;input-group mb-3&quot;&gt;\n    &lt;input type=&quot;password&quot; class=&quot;form-control&quot; name=&quot;password&quot; placeholder=&quot;password&quot; required&gt;\n  &lt;/div&gt;\n\n  &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Acessar&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n<p>The class I currently use to get the information after login:</p>\n<pre><code>public class CustomAuthenticationFilter extends OncePerRequestFilter {  \n\nprivate String pass; \nprivate String user;\n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n    throws ServletException, IOException {\n\nif (&quot;/security/login&quot;.equals(request.getRequestURI()) &amp;&amp; request.getMethod().equalsIgnoreCase(&quot;post&quot;)) {\n    String username = request.getParameter(&quot;username&quot;);\n    String password = request.getParameter(&quot;password&quot;);\n    \n    if (username != null &amp;&amp; password != null) {\n        request.setAttribute(&quot;username&quot;, username);\n        request.setAttribute(&quot;password&quot;, password);\n        \n        user = username;\n        pass = password;\n        \n        login.setUsername(username);\n        System.out.println(&quot;User Login: &quot;+user+&quot; Password: &quot;+pass);\n    }\n}        \nchain.doFilter(request, response);\n}\n</code></pre>\n"},{"tags":["java","macos","terminal"],"comments":[{"owner":{"account_id":347037,"reputation":79658,"user_id":680925,"display_name":"Perception"},"score":3,"creation_date":1364245646,"post_id":15624667,"comment_id":22164706,"body_markdown":"Java integration on Mac OSX is a ruinous mess atm, what with Apple discontinuing official support and Oracle not really knowing or caring how to integrate properly. If you can&#39;t find Java 7 in /Library/Java/JavaVirtualMachines then look in /System/Library/Frameworks/JavaVM.framework/Versions. It *should* be there, as a standalone directory or linked to `Current`.","body":"Java integration on Mac OSX is a ruinous mess atm, what with Apple discontinuing official support and Oracle not really knowing or caring how to integrate properly. If you can&#39;t find Java 7 in /Library/Java/JavaVirtualMachines then look in /System/Library/Frameworks/JavaVM.framework/Versions. It <i>should</i> be there, as a standalone directory or linked to <code>Current</code>."},{"owner":{"account_id":50598,"reputation":32356,"user_id":151019,"accept_rate":83,"display_name":"mmmmmm"},"score":1,"creation_date":1364246413,"post_id":15624667,"comment_id":22165127,"body_markdown":"It is simple - Apple code and only Apple code is in /System, Third Party for all users are in /Library","body":"It is simple - Apple code and only Apple code is in /System, Third Party for all users are in /Library"},{"owner":{"account_id":50598,"reputation":32356,"user_id":151019,"accept_rate":83,"display_name":"mmmmmm"},"score":0,"creation_date":1364246525,"post_id":15624667,"comment_id":22165193,"body_markdown":"@DGolberg - what exact Java did you install Oracle provides the JRE and the JDK","body":"@DGolberg - what exact Java did you install Oracle provides the JRE and the JDK"},{"owner":{"account_id":2074554,"reputation":2139,"user_id":1848286,"accept_rate":80,"display_name":"DGolberg"},"score":0,"creation_date":1364247296,"post_id":15624667,"comment_id":22165559,"body_markdown":"@Mark I installed the JRE","body":"@Mark I installed the JRE"},{"owner":{"account_id":2074554,"reputation":2139,"user_id":1848286,"accept_rate":80,"display_name":"DGolberg"},"score":0,"creation_date":1364247348,"post_id":15624667,"comment_id":22165580,"body_markdown":"I&#39;m trying to avoid installing the JDK as there was a weird issue in that code run on a machine with the JDK worked fine but a machine with the JRE it did not... but that&#39;s another topic in itself","body":"I&#39;m trying to avoid installing the JDK as there was a weird issue in that code run on a machine with the JDK worked fine but a machine with the JRE it did not... but that&#39;s another topic in itself"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1471636613,"post_id":15624667,"comment_id":65443479,"body_markdown":"As of Java 8 this should have improved much for Oracle Java.","body":"As of Java 8 this should have improved much for Oracle Java."}],"answers":[{"comments":[{"owner":{"account_id":2074554,"reputation":2139,"user_id":1848286,"accept_rate":80,"display_name":"DGolberg"},"score":0,"creation_date":1364246905,"post_id":15624880,"comment_id":22165381,"body_markdown":"Yep, even restarted the entire system; still says it&#39;s version 1.6.0_43","body":"Yep, even restarted the entire system; still says it&#39;s version 1.6.0_43"},{"owner":{"account_id":600204,"reputation":22212,"user_id":303914,"display_name":"DWilches"},"score":0,"creation_date":1364248696,"post_id":15624880,"comment_id":22166248,"body_markdown":"could you post the results of these 3: \n    (1) ls -l /System/Library/Frameworks/JavaVM.framework/Versions/\n    (2) whereis java\n    (3) ls -ld /usr/bin/java","body":"could you post the results of these 3:      (1) ls -l /System/Library/Frameworks/JavaVM.framework/Versions/     (2) whereis java     (3) ls -ld /usr/bin/java"},{"owner":{"account_id":2074554,"reputation":2139,"user_id":1848286,"accept_rate":80,"display_name":"DGolberg"},"score":0,"creation_date":1364249922,"post_id":15624880,"comment_id":22166761,"body_markdown":"updated original post... forgot can edit original on this site.","body":"updated original post... forgot can edit original on this site."},{"owner":{"account_id":136359,"reputation":3434,"user_id":339803,"accept_rate":36,"display_name":"redfox05"},"score":0,"creation_date":1436368039,"post_id":15624880,"comment_id":50583904,"body_markdown":"`Current` has updated for you, but your `CurrentJDK` in your code snippet is still 1.6.0.... Sorry this is old, but still an issue for me.","body":"<code>Current</code> has updated for you, but your <code>CurrentJDK</code> in your code snippet is still 1.6.0.... Sorry this is old, but still an issue for me."}],"tags":[],"owner":{"account_id":600204,"reputation":22212,"user_id":303914,"display_name":"DWilches"},"comment_count":4,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1364246016,"creation_date":1364246016,"answer_id":15624880,"question_id":15624667,"body_markdown":"First, did you Quit the Console and open it again so it has chances of taking the changes in the PATH variable ?\r\n\r\nIf you&#39;ve already done this, then check which the default version of your Java is:\r\n\r\n    dwilches@ ~$ cd /System/Library/Frameworks/JavaVM.framework/Versions/\r\n    dwilches@ Versions$ ls -l\r\n    lrwxr-xr-x  1 root  wheel   59 Mar 19 10:07 CurrentJDK -&gt; /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.6.0 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.6 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.5.0 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.5 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.4.2 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.4 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel    1 Mar 19 10:08 Current -&gt; A\r\n    drwxr-xr-x  8 root  wheel  272 Mar 25 10:03 A\r\n\r\nNow, you can see that the &quot;Current&quot; version is &quot;A&quot; (that&#39;s my Java7). If I would like to change it to Java 1.6 then I could write:\r\n\r\n    dwilches@ Versions$ sudo unlink Current\r\n    dwilches@ Versions$ sudo ln -s 1.6 Current\r\n\r\nAnd then:\r\n\r\n    dwilches@ Versions$ java -version\r\n    java version &quot;1.6.0_43&quot;\r\n    Java(TM) SE Runtime Environment (build 1.6.0_43-b01-447-11M4203)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01-447, mixed mode)\r\n\r\nSo you may use this to make &quot;Current&quot; point to your desired Java location.\r\n","title":"Mac OSX Java Terminal version incorrect","body":"<p>First, did you Quit the Console and open it again so it has chances of taking the changes in the PATH variable ?</p>\n\n<p>If you've already done this, then check which the default version of your Java is:</p>\n\n<pre><code>dwilches@ ~$ cd /System/Library/Frameworks/JavaVM.framework/Versions/\ndwilches@ Versions$ ls -l\nlrwxr-xr-x  1 root  wheel   59 Mar 19 10:07 CurrentJDK -&gt; /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents\nlrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.6.0 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.6 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.5.0 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.5 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.4.2 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.4 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel    1 Mar 19 10:08 Current -&gt; A\ndrwxr-xr-x  8 root  wheel  272 Mar 25 10:03 A\n</code></pre>\n\n<p>Now, you can see that the \"Current\" version is \"A\" (that's my Java7). If I would like to change it to Java 1.6 then I could write:</p>\n\n<pre><code>dwilches@ Versions$ sudo unlink Current\ndwilches@ Versions$ sudo ln -s 1.6 Current\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>dwilches@ Versions$ java -version\njava version \"1.6.0_43\"\nJava(TM) SE Runtime Environment (build 1.6.0_43-b01-447-11M4203)\nJava HotSpot(TM) 64-Bit Server VM (build 20.14-b01-447, mixed mode)\n</code></pre>\n\n<p>So you may use this to make \"Current\" point to your desired Java location.</p>\n"},{"comments":[{"owner":{"account_id":2074554,"reputation":2139,"user_id":1848286,"accept_rate":80,"display_name":"DGolberg"},"score":0,"creation_date":1364248670,"post_id":15625420,"comment_id":22166224,"body_markdown":"I do my development on my Windows machine where it&#39;s less of a headache for me.  The Mac is currently setup for problem finding only.  For example, one of the users of my program could run the program (a swing app), but some code for a shutdownhook was not executing until he installed the JDK; I&#39;m trying to figure out why on this test platform, but the JRE in the terminal is incorrect, so it errors out before even getting to that point due to the version difference between the development machine and test machine (when run from terminal).","body":"I do my development on my Windows machine where it&#39;s less of a headache for me.  The Mac is currently setup for problem finding only.  For example, one of the users of my program could run the program (a swing app), but some code for a shutdownhook was not executing until he installed the JDK; I&#39;m trying to figure out why on this test platform, but the JRE in the terminal is incorrect, so it errors out before even getting to that point due to the version difference between the development machine and test machine (when run from terminal)."},{"owner":{"account_id":1254365,"reputation":4097,"user_id":1214163,"accept_rate":89,"display_name":"Deepend"},"score":0,"creation_date":1392842440,"post_id":15625420,"comment_id":33150911,"body_markdown":"I installed the JDK but it did not change my path. Using OSX 10.9.1","body":"I installed the JDK but it did not change my path. Using OSX 10.9.1"},{"owner":{"account_id":50598,"reputation":32356,"user_id":151019,"accept_rate":83,"display_name":"mmmmmm"},"score":0,"creation_date":1392842657,"post_id":15625420,"comment_id":33151080,"body_markdown":"It does not change the path just updates what /usr/bin/java runs","body":"It does not change the path just updates what /usr/bin/java runs"},{"owner":{"account_id":66427,"reputation":688,"user_id":194872,"display_name":"Chris Smith"},"score":0,"creation_date":1426655685,"post_id":15625420,"comment_id":46457621,"body_markdown":"On Mac OS X Yosemite (10.10.2) I installed both JRE and JDK 8u40. Closed terminal and re-opened it and the java program I was trying to run worked. Thanks for the info.","body":"On Mac OS X Yosemite (10.10.2) I installed both JRE and JDK 8u40. Closed terminal and re-opened it and the java program I was trying to run worked. Thanks for the info."}],"tags":[],"owner":{"account_id":50598,"reputation":32356,"user_id":151019,"accept_rate":83,"display_name":"mmmmmm"},"comment_count":4,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1364248031,"creation_date":1364248031,"answer_id":15625420,"question_id":15624667,"body_markdown":"The issue is that Oracle&#39;s JRE installation does not change the /usr/bin/java executable. If you want to use this Java you have to use the path under /Library (need to find what this is I have JDK install so could be different)\r\n\r\nAs per Oracle&#39;s JRE [installation document][1]\r\n\r\n&gt; Installing a JRE from Oracle will not update java -version symlinks or\r\n&gt; add java to your path. To be able to do this, you need to install the\r\n&gt; JDK.\r\n\r\nThe Oracle JDK does change `/usr/bin/java` to point to the Java 7 executable. If you are doing development then you should use this as it includes more than the JRE.\r\n\r\nThe Oracle [install FAQ][2] says\r\n\r\n&gt; Q: Should I install the JRE or the JDK?\r\n&gt; \r\n&gt; A: If you plan to run Java applications, install the Java Runtime\r\n&gt; Environment (JRE). The JRE is also referred to as Oracle Java. Once\r\n&gt; you have installed the JRE, you can launch Java applets and\r\n&gt; applications by double-clicking JAR files, JNLP files, and via the\r\n&gt; browser. Note that 32-bit browsers, such as Firefox in 32-bit mode,\r\n&gt; and Chrome, are not supported by the JRE.\r\n&gt; \r\n&gt; If you plan to write Java applications, install the Java Development\r\n&gt; Kit (JDK).\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jre.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-install-faq.html","title":"Mac OSX Java Terminal version incorrect","body":"<p>The issue is that Oracle's JRE installation does not change the /usr/bin/java executable. If you want to use this Java you have to use the path under /Library (need to find what this is I have JDK install so could be different)</p>\n\n<p>As per Oracle's JRE <a href=\"http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jre.html\">installation document</a></p>\n\n<blockquote>\n  <p>Installing a JRE from Oracle will not update java -version symlinks or\n  add java to your path. To be able to do this, you need to install the\n  JDK.</p>\n</blockquote>\n\n<p>The Oracle JDK does change <code>/usr/bin/java</code> to point to the Java 7 executable. If you are doing development then you should use this as it includes more than the JRE.</p>\n\n<p>The Oracle <a href=\"http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-install-faq.html\">install FAQ</a> says</p>\n\n<blockquote>\n  <p>Q: Should I install the JRE or the JDK?</p>\n  \n  <p>A: If you plan to run Java applications, install the Java Runtime\n  Environment (JRE). The JRE is also referred to as Oracle Java. Once\n  you have installed the JRE, you can launch Java applets and\n  applications by double-clicking JAR files, JNLP files, and via the\n  browser. Note that 32-bit browsers, such as Firefox in 32-bit mode,\n  and Chrome, are not supported by the JRE.</p>\n  \n  <p>If you plan to write Java applications, install the Java Development\n  Kit (JDK).</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":1480419,"reputation":1880,"user_id":1389951,"accept_rate":20,"display_name":"vichsu"},"score":4,"creation_date":1372791130,"post_id":15625591,"comment_id":25323090,"body_markdown":"This solves my headache of how to make terminal uses Java 1.7.\nThanks so much Ian!","body":"This solves my headache of how to make terminal uses Java 1.7. Thanks so much Ian!"},{"owner":{"account_id":2074554,"reputation":2139,"user_id":1848286,"accept_rate":80,"display_name":"DGolberg"},"score":0,"creation_date":1375377764,"post_id":15625591,"comment_id":26321093,"body_markdown":"Some strange reason I didn&#39;t get alerted when you posted your message (or I may have checked another and missed it). I did try this and it appears to work so far for me as well.  Thanks Ian!","body":"Some strange reason I didn&#39;t get alerted when you posted your message (or I may have checked another and missed it). I did try this and it appears to work so far for me as well.  Thanks Ian!"},{"owner":{"account_id":386367,"reputation":812,"user_id":744088,"accept_rate":60,"display_name":"emkman"},"score":1,"creation_date":1390598420,"post_id":15625591,"comment_id":32177189,"body_markdown":"That alias was exactly what I needed for everything to play nicely. Thank you!","body":"That alias was exactly what I needed for everything to play nicely. Thank you!"}],"tags":[],"owner":{"account_id":701757,"reputation":121151,"user_id":592139,"display_name":"Ian Roberts"},"comment_count":3,"down_vote_count":0,"up_vote_count":136,"is_accepted":true,"score":136,"last_activity_date":1424478806,"creation_date":1364248641,"answer_id":15625591,"question_id":15624667,"body_markdown":"# JDK\r\n\r\nOn Mac OS, `/usr/bin/java` and friends are stubs that delegate to the real JDK commands.  These stubs respect the setting of your `JAVA_HOME` environment variable, but for this to work you need to install the _JDK_ (from http://www.oracle.com/technetwork/java/javase/downloads/index.html) as opposed to the _JRE_ (from http://java.com).\r\n\r\nThe JDK installs into `/Library/Java/JavaVirtualMachines/jdk1.7.0_NN.jdk` (for whatever value of NN), so set your `JAVA_HOME` environment variable to `/Library/Java/JavaVirtualMachines/jdk1.7.0_NN.jdk/Contents/Home` to make `/usr/bin/java` use 1.7.  You can switch back to 1.6 simply by pointing your `JAVA_HOME` to `/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home` instead.  You can use the `/usr/libexec/java_home` tool to find the right value automatically, for example to make `/usr/bin/java` use Java 7 you can do\r\n\r\n    export JAVA_HOME=`/usr/libexec/java_home -v &#39;1.7*&#39;`\r\n\r\nand to make it use Java 6 you can do\r\n\r\n    export JAVA_HOME=`/usr/libexec/java_home -v &#39;1.6*&#39;`\r\n\r\nThe same applies to Java 8 (using `-v &#39;1.8*&#39;`). This will pick up the latest installed JDK for the relevant major version, you don&#39;t need to remember to change the `NN` by hand when you install an update.\r\n\r\n# JRE\r\n\r\nIf you want to run the 1.7 or 1.8 _JRE_ from the command line, it can be found in `/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java`. This is a fixed path and you can only have one &quot;public&quot; JRE installed at any given time.\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    $ /Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -version\r\n    java version &quot;1.7.0_13&quot;\r\n    Java(TM) SE Runtime Environment (build 1.7.0_13-b20)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)\r\n\r\nYou could use a shell alias in your `.bashrc`\r\n\r\n    alias java_jre=&#39;/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java&#39;\r\n","title":"Mac OSX Java Terminal version incorrect","body":"<h1>JDK</h1>\n\n<p>On Mac OS, <code>/usr/bin/java</code> and friends are stubs that delegate to the real JDK commands.  These stubs respect the setting of your <code>JAVA_HOME</code> environment variable, but for this to work you need to install the <em>JDK</em> (from <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a>) as opposed to the <em>JRE</em> (from <a href=\"http://java.com\">http://java.com</a>).</p>\n\n<p>The JDK installs into <code>/Library/Java/JavaVirtualMachines/jdk1.7.0_NN.jdk</code> (for whatever value of NN), so set your <code>JAVA_HOME</code> environment variable to <code>/Library/Java/JavaVirtualMachines/jdk1.7.0_NN.jdk/Contents/Home</code> to make <code>/usr/bin/java</code> use 1.7.  You can switch back to 1.6 simply by pointing your <code>JAVA_HOME</code> to <code>/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home</code> instead.  You can use the <code>/usr/libexec/java_home</code> tool to find the right value automatically, for example to make <code>/usr/bin/java</code> use Java 7 you can do</p>\n\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v '1.7*'`\n</code></pre>\n\n<p>and to make it use Java 6 you can do</p>\n\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v '1.6*'`\n</code></pre>\n\n<p>The same applies to Java 8 (using <code>-v '1.8*'</code>). This will pick up the latest installed JDK for the relevant major version, you don't need to remember to change the <code>NN</code> by hand when you install an update.</p>\n\n<h1>JRE</h1>\n\n<p>If you want to run the 1.7 or 1.8 <em>JRE</em> from the command line, it can be found in <code>/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java</code>. This is a fixed path and you can only have one \"public\" JRE installed at any given time.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ /Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -version\njava version \"1.7.0_13\"\nJava(TM) SE Runtime Environment (build 1.7.0_13-b20)\nJava HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)\n</code></pre>\n\n<p>You could use a shell alias in your <code>.bashrc</code></p>\n\n<pre><code>alias java_jre='/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":125911,"reputation":35039,"user_id":322020,"accept_rate":46,"display_name":"Nakilon"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1384037762,"creation_date":1384037762,"answer_id":19884161,"question_id":15624667,"body_markdown":"Just like Ian said, but probably you want java7 to be called from .sh script, so you need a function instead of alias added to .bash_profile:\r\n\r\n    java7() {\r\n        /Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java &quot;$@&quot;\r\n    }\r\n    export -f java7","title":"Mac OSX Java Terminal version incorrect","body":"<p>Just like Ian said, but probably you want java7 to be called from .sh script, so you need a function instead of alias added to .bash_profile:</p>\n\n<pre><code>java7() {\n    /Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java \"$@\"\n}\nexport -f java7\n</code></pre>\n"}],"owner":{"account_id":2074554,"reputation":2139,"user_id":1848286,"accept_rate":80,"display_name":"DGolberg"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84344,"favorite_count":0,"down_vote_count":0,"up_vote_count":63,"accepted_answer_id":15625591,"answer_count":4,"score":63,"last_activity_date":1689784189,"creation_date":1364245230,"question_id":15624667,"body_markdown":"Ok, I&#39;m a bit new to Macs and OSX, but I picked one up so that I can do some troubleshooting on my Java programs with one since the company I work for uses a combination of OSX and Windows machines.  The problem I&#39;m running into is, when I install Java 7 from Oracle&#39;s website, it updates the preferences menu and appears to execute .jar files correctly when double-clicking them, but the terminal window&#39;s version is still 1.6.0_43 and running the same .jar file from the terminal results in runtime errors due to the older version.\r\n\r\nWhen I navigate to /Library/Java/JavaVirtualMachines/ I&#39;m presented with an empty folder.  From what I&#39;ve seen in other articles, this is where the Java 1.7.0&#39;s version folder should be.  Any idea what&#39;s going on?  How can I get the terminal to use the correct version of Java?\r\n\r\nEdit: @DWilches comment on his original answer: \r\n(1) \r\n\r\n    total 64\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.4 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.4.2 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.5 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.5.0 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.6 -&gt; CurrentJDK\r\n    lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.6.0 -&gt; CurrentJDK\r\n    drwxr-xr-x  8 root  wheel  272 Mar 17 21:38 A\r\n    lrwxr-xr-x  1 root  wheel    1 Mar 17 21:38 Current -&gt; A\r\n    lrwxr-xr-x  1 root  wheel   59 Mar 17 21:38 CurrentJDK -&gt; /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents\r\n\r\n(2)\r\n\r\n    ls -ld /usr/bin/java\r\n    lrwxr-xr-x  1 root  wheel  74 Mar 17 21:38 /usr/bin/java -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java\r\n\r\nEdit: sorry for the mistake with a new answer, gotten too used to sites that block edits of the original post after so long...","title":"Mac OSX Java Terminal version incorrect","body":"<p>Ok, I'm a bit new to Macs and OSX, but I picked one up so that I can do some troubleshooting on my Java programs with one since the company I work for uses a combination of OSX and Windows machines.  The problem I'm running into is, when I install Java 7 from Oracle's website, it updates the preferences menu and appears to execute .jar files correctly when double-clicking them, but the terminal window's version is still 1.6.0_43 and running the same .jar file from the terminal results in runtime errors due to the older version.</p>\n\n<p>When I navigate to /Library/Java/JavaVirtualMachines/ I'm presented with an empty folder.  From what I've seen in other articles, this is where the Java 1.7.0's version folder should be.  Any idea what's going on?  How can I get the terminal to use the correct version of Java?</p>\n\n<p>Edit: @DWilches comment on his original answer: \n(1) </p>\n\n<pre><code>total 64\nlrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.4 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.4.2 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.5 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.5.0 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.6 -&gt; CurrentJDK\nlrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.6.0 -&gt; CurrentJDK\ndrwxr-xr-x  8 root  wheel  272 Mar 17 21:38 A\nlrwxr-xr-x  1 root  wheel    1 Mar 17 21:38 Current -&gt; A\nlrwxr-xr-x  1 root  wheel   59 Mar 17 21:38 CurrentJDK -&gt; /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents\n</code></pre>\n\n<p>(2)</p>\n\n<pre><code>ls -ld /usr/bin/java\nlrwxr-xr-x  1 root  wheel  74 Mar 17 21:38 /usr/bin/java -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java\n</code></pre>\n\n<p>Edit: sorry for the mistake with a new answer, gotten too used to sites that block edits of the original post after so long...</p>\n"},{"tags":["java","python","macos","apache-spark","pyspark"],"comments":[{"owner":{"account_id":4541604,"reputation":2895,"user_id":3689314,"accept_rate":74,"display_name":"mt88"},"score":1,"creation_date":1438900785,"post_id":31841509,"comment_id":51653015,"body_markdown":"I resolved the above problem by downloading a different tarbll of spark.","body":"I resolved the above problem by downloading a different tarbll of spark."},{"owner":{"account_id":1767944,"reputation":740,"user_id":1613333,"display_name":"Vinod Kumar Chauhan"},"score":0,"creation_date":1441179920,"post_id":31841509,"comment_id":52568351,"body_markdown":"See my comments at-\nhttp://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/32347328#32347328","body":"See my comments at- <a href=\"http://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/32347328#32347328\" title=\"pyspark exception java gateway process exited before sending the driver its po\">stackoverflow.com/questions/31841509/&hellip;</a>"},{"owner":{"account_id":457464,"reputation":8040,"user_id":856804,"accept_rate":73,"display_name":"zyxue"},"score":0,"creation_date":1454270442,"post_id":31841509,"comment_id":57957849,"body_markdown":"In addition to @mt88&#39;s comment, spark-1.6.0-bin-without-hadoop.tgz produces the above exception, but spark-1.6.0-bin-hadoop2.6.tgz doesn&#39;t for me on Ubuntu 15.04","body":"In addition to @mt88&#39;s comment, spark-1.6.0-bin-without-hadoop.tgz produces the above exception, but spark-1.6.0-bin-hadoop2.6.tgz doesn&#39;t for me on Ubuntu 15.04"},{"owner":{"account_id":7465314,"reputation":2473,"user_id":5675130,"accept_rate":45,"display_name":"lfk"},"score":0,"creation_date":1519778731,"post_id":31841509,"comment_id":85045705,"body_markdown":"@zyxue I&#39;m also using Spark 2.2.1 without Hadoop. Do you think that&#39;s the cause?","body":"@zyxue I&#39;m also using Spark 2.2.1 without Hadoop. Do you think that&#39;s the cause?"},{"owner":{"account_id":457464,"reputation":8040,"user_id":856804,"accept_rate":73,"display_name":"zyxue"},"score":0,"creation_date":1519784258,"post_id":31841509,"comment_id":85047215,"body_markdown":"@lfk, not sure of your question, you could just try and see","body":"@lfk, not sure of your question, you could just try and see"},{"owner":{"account_id":7465314,"reputation":2473,"user_id":5675130,"accept_rate":45,"display_name":"lfk"},"score":0,"creation_date":1519794141,"post_id":31841509,"comment_id":85049603,"body_markdown":"@zyxue I&#39;ll have to build Spark in that case as the pre built version comes with 2.7 and I need 3","body":"@zyxue I&#39;ll have to build Spark in that case as the pre built version comes with 2.7 and I need 3"},{"owner":{"account_id":457464,"reputation":8040,"user_id":856804,"accept_rate":73,"display_name":"zyxue"},"score":0,"creation_date":1519795278,"post_id":31841509,"comment_id":85049926,"body_markdown":"@lfk, `Spark runs on Java 8+, Python 2.7+/3.4+ and R 3.1+. For the Scala API, Spark 2.2.1 uses Scala 2.11. You will need to use a compatible Scala version (2.11.x).`, https://spark.apache.org/docs/latest/, so python 3 shouldn&#39;t be a problem. If you&#39;re working on a single node, then building it yourself is ok, but still I would recommend you to install it with some sort of a package manager, e.g. anaconda. The latest version pyspark, https://pypi.python.org/pypi/pyspark/2.1.1, it supports python3.","body":"@lfk, <code>Spark runs on Java 8+, Python 2.7+&#47;3.4+ and R 3.1+. For the Scala API, Spark 2.2.1 uses Scala 2.11. You will need to use a compatible Scala version (2.11.x).</code>, <a href=\"https://spark.apache.org/docs/latest/\" rel=\"nofollow noreferrer\">spark.apache.org/docs/latest</a>, so python 3 shouldn&#39;t be a problem. If you&#39;re working on a single node, then building it yourself is ok, but still I would recommend you to install it with some sort of a package manager, e.g. anaconda. The latest version pyspark, <a href=\"https://pypi.python.org/pypi/pyspark/2.1.1\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/pyspark/2.1.1</a>, it supports python3."},{"owner":{"account_id":7465314,"reputation":2473,"user_id":5675130,"accept_rate":45,"display_name":"lfk"},"score":0,"creation_date":1519821320,"post_id":31841509,"comment_id":85063623,"body_markdown":"@zyxue I&#39;m sorry I meant Hadoop 3. That&#39;s why I&#39;m using the Hadoop-free binaries. pip pyspark is prebuilt with Hadoop 2.7.","body":"@zyxue I&#39;m sorry I meant Hadoop 3. That&#39;s why I&#39;m using the Hadoop-free binaries. pip pyspark is prebuilt with Hadoop 2.7."}],"answers":[{"comments":[{"owner":{"account_id":1785306,"reputation":131,"user_id":4573043,"display_name":"quax"},"score":1,"creation_date":1448595338,"post_id":32547759,"comment_id":55658526,"body_markdown":"Since I can&#39;t comment on user1613333 answer I do it here, I also found that using Anaconda makes things go much smoother.","body":"Since I can&#39;t comment on user1613333 answer I do it here, I also found that using Anaconda makes things go much smoother."},{"owner":{"account_id":7198509,"reputation":10324,"user_id":5496433,"accept_rate":87,"display_name":"BallpointBen"},"score":1,"creation_date":1527091362,"post_id":32547759,"comment_id":87998640,"body_markdown":"You can also set environment variables using `import os; os.environ[&#39;PYSPARK_SUBMIT_ARGS&#39;] = &quot;--master ...&quot;`","body":"You can also set environment variables using <code>import os; os.environ[&#39;PYSPARK_SUBMIT_ARGS&#39;] = &quot;--master ...&quot;</code>"},{"owner":{"account_id":6213769,"reputation":792,"user_id":4839262,"accept_rate":73,"display_name":"mikesneider"},"score":0,"creation_date":1591364225,"post_id":32547759,"comment_id":110035803,"body_markdown":"@quax I used &#39;os.environ[&#39;PYSPARK_SUBMIT_ARGS&#39;]= &quot;--master spark://localhost:8888&quot; &#39; but I do not know if I am doing wrong, still no works","body":"@quax I used &#39;os.environ[&#39;PYSPARK_SUBMIT_ARGS&#39;]= &quot;--master spark://localhost:8888&quot; &#39; but I do not know if I am doing wrong, still no works"},{"owner":{"account_id":5955381,"reputation":1103,"user_id":4682228,"display_name":"Denis G. Labrecque"},"score":0,"creation_date":1617937988,"post_id":32547759,"comment_id":118455956,"body_markdown":"What bash file where and why? WTH is `/sbin/` (I&#39;m on Windows)? @BallpointBen appreciate the addition, but same error as before.","body":"What bash file where and why? WTH is <code>&#47;sbin&#47;</code> (I&#39;m on Windows)? @BallpointBen appreciate the addition, but same error as before."}],"tags":[],"owner":{"account_id":1785306,"reputation":131,"user_id":4573043,"display_name":"quax"},"comment_count":4,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1442132736,"creation_date":1442132736,"answer_id":32547759,"question_id":31841509,"body_markdown":"Had the same issue with my iphython notebook (IPython 3.2.1) on Linux (ubuntu).\r\n\r\nWhat was missing in my case was setting the master URL in the $PYSPARK_SUBMIT_ARGS environment like this (assuming you use bash): \r\n\r\n    export PYSPARK_SUBMIT_ARGS=&quot;--master spark://&lt;host&gt;:&lt;port&gt;&quot;\r\n\r\ne.g.\r\n\r\n    export PYSPARK_SUBMIT_ARGS=&quot;--master spark://192.168.2.40:7077&quot;\r\n\r\nYou can put this into your .bashrc file. You get the correct URL in the log for the spark master (the location for this log is reported when you start the master with &lt;SPARK HOME&gt;/sbin/start_master.sh).\r\n\r\n ","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>Had the same issue with my iphython notebook (IPython 3.2.1) on Linux (ubuntu).</p>\n\n<p>What was missing in my case was setting the master URL in the $PYSPARK_SUBMIT_ARGS environment like this (assuming you use bash): </p>\n\n<pre><code>export PYSPARK_SUBMIT_ARGS=\"--master spark://&lt;host&gt;:&lt;port&gt;\"\n</code></pre>\n\n<p>e.g.</p>\n\n<pre><code>export PYSPARK_SUBMIT_ARGS=\"--master spark://192.168.2.40:7077\"\n</code></pre>\n\n<p>You can put this into your .bashrc file. You get the correct URL in the log for the spark master (the location for this log is reported when you start the master with /sbin/start_master.sh).</p>\n"},{"comments":[{"owner":{"account_id":7465314,"reputation":2473,"user_id":5675130,"accept_rate":45,"display_name":"lfk"},"score":5,"creation_date":1519778222,"post_id":35080073,"comment_id":85045576,"body_markdown":"Where do I find that log file?","body":"Where do I find that log file?"},{"owner":{"account_id":8769664,"reputation":1119,"user_id":6556938,"display_name":"ChrisDanger"},"score":1,"creation_date":1632766599,"post_id":35080073,"comment_id":122576960,"body_markdown":"boom, great answer","body":"boom, great answer"}],"tags":[],"owner":{"account_id":318931,"reputation":2979,"user_id":636398,"accept_rate":50,"display_name":"Ida"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1454056567,"creation_date":1454056567,"answer_id":35080073,"question_id":31841509,"body_markdown":"I got the same `Java gateway process exited......port number` exception even though I set `PYSPARK_SUBMIT_ARGS` properly. I&#39;m running Spark 1.6 and trying to get pyspark to work with IPython4/Jupyter (OS: ubuntu as VM guest).\r\n\r\nWhile I got this exception, I noticed an hs_err_*.log was generated and it started with:\r\n\r\n`There is insufficient memory for the Java Runtime Environment to continue. Native memory allocation (malloc) failed to allocate 715849728 bytes for committing reserved memory.`\r\n\r\nSo I increased the memory allocated for my ubuntu via VirtualBox Setting and restarted the guest ubuntu. Then this `Java gateway` exception goes away and everything worked out fine.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I got the same <code>Java gateway process exited......port number</code> exception even though I set <code>PYSPARK_SUBMIT_ARGS</code> properly. I'm running Spark 1.6 and trying to get pyspark to work with IPython4/Jupyter (OS: ubuntu as VM guest).</p>\n\n<p>While I got this exception, I noticed an hs_err_*.log was generated and it started with:</p>\n\n<p><code>There is insufficient memory for the Java Runtime Environment to continue. Native memory allocation (malloc) failed to allocate 715849728 bytes for committing reserved memory.</code></p>\n\n<p>So I increased the memory allocated for my ubuntu via VirtualBox Setting and restarted the guest ubuntu. Then this <code>Java gateway</code> exception goes away and everything worked out fine.</p>\n"},{"tags":[],"owner":{"account_id":4919266,"reputation":934,"user_id":3962288,"accept_rate":40,"display_name":"Anup Ash"},"comment_count":0,"down_vote_count":1,"up_vote_count":34,"is_accepted":false,"score":33,"last_activity_date":1494750498,"creation_date":1459555410,"answer_id":36367669,"question_id":31841509,"body_markdown":"this should help you\r\n\r\nOne solution is adding pyspark-shell to the shell environment variable PYSPARK_SUBMIT_ARGS:\r\n\r\n    export PYSPARK_SUBMIT_ARGS=&quot;--master local[2] pyspark-shell&quot;\r\n\r\nThere is a change in python/pyspark/java_gateway.py , which requires PYSPARK_SUBMIT_ARGS includes pyspark-shell if a PYSPARK_SUBMIT_ARGS variable is set by a user.\r\n","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>this should help you</p>\n\n<p>One solution is adding pyspark-shell to the shell environment variable PYSPARK_SUBMIT_ARGS:</p>\n\n<pre><code>export PYSPARK_SUBMIT_ARGS=\"--master local[2] pyspark-shell\"\n</code></pre>\n\n<p>There is a change in python/pyspark/java_gateway.py , which requires PYSPARK_SUBMIT_ARGS includes pyspark-shell if a PYSPARK_SUBMIT_ARGS variable is set by a user.</p>\n"},{"tags":[],"owner":{"account_id":417850,"reputation":456,"user_id":794071,"display_name":"Pim Schaaf"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461104409,"creation_date":1461104409,"answer_id":36730511,"question_id":31841509,"body_markdown":"I got the same `Exception: Java gateway process exited before sending the driver its port number` in Cloudera VM when trying to start IPython with CSV support with a syntax error:\r\n\r\n```PYSPARK_DRIVER_PYTHON=ipython pyspark --packages com.databricks:spark-csv_2.10.1.4.0```\r\n\r\nwill throw the error, while:\r\n\r\n```PYSPARK_DRIVER_PYTHON=ipython pyspark --packages com.databricks:spark-csv_2.10:1.4.0```\r\n\r\nwill not.\r\n\r\nThe difference is in that last **colon** in the last (working) example, seperating the **Scala version number** from the **package version number**.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I got the same <code>Exception: Java gateway process exited before sending the driver its port number</code> in Cloudera VM when trying to start IPython with CSV support with a syntax error:</p>\n\n<p><code>PYSPARK_DRIVER_PYTHON=ipython pyspark --packages com.databricks:spark-csv_2.10.1.4.0</code></p>\n\n<p>will throw the error, while:</p>\n\n<p><code>PYSPARK_DRIVER_PYTHON=ipython pyspark --packages com.databricks:spark-csv_2.10:1.4.0</code></p>\n\n<p>will not.</p>\n\n<p>The difference is in that last <strong>colon</strong> in the last (working) example, seperating the <strong>Scala version number</strong> from the <strong>package version number</strong>.</p>\n"},{"tags":[],"owner":{"account_id":8730259,"reputation":31,"user_id":6530589,"display_name":"Josh Terrell"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1467236156,"creation_date":1467236156,"answer_id":38110442,"question_id":31841509,"body_markdown":"I got this error because I was running low on disk space.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I got this error because I was running low on disk space.</p>\n"},{"comments":[{"owner":{"account_id":59864,"reputation":11232,"user_id":179014,"accept_rate":60,"display_name":"asmaier"},"score":0,"creation_date":1504886050,"post_id":39301277,"comment_id":79203243,"body_markdown":"For a fully automatic installation of Oracle Java8 on Ubuntu see https://newfivefour.com/docker-java8-auto-install.html .","body":"For a fully automatic installation of Oracle Java8 on Ubuntu see <a href=\"https://newfivefour.com/docker-java8-auto-install.html\" rel=\"nofollow noreferrer\">newfivefour.com/docker-java8-auto-install.html</a> ."},{"owner":{"account_id":6744109,"reputation":2282,"user_id":5196274,"display_name":"QA Collective"},"score":12,"creation_date":1551929781,"post_id":39301277,"comment_id":96823519,"body_markdown":"I&#39;m confused.  How can you not have java installed with an error like that?  The first part of it is a java stack trace!  I think you simply had the problem that JAVA_HOME wasn&#39;t set correctly/at all.","body":"I&#39;m confused.  How can you not have java installed with an error like that?  The first part of it is a java stack trace!  I think you simply had the problem that JAVA_HOME wasn&#39;t set correctly/at all."}],"tags":[],"owner":{"account_id":2520743,"reputation":1516,"user_id":2191173,"accept_rate":71,"display_name":"Old Panda"},"comment_count":2,"down_vote_count":2,"up_vote_count":47,"is_accepted":false,"score":45,"last_activity_date":1484170967,"creation_date":1472853970,"answer_id":39301277,"question_id":31841509,"body_markdown":"One possible reason is JAVA_HOME is not set because java is not installed.\r\n\r\nI encountered the same issue. It says \r\n\r\n    Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: org/apache/spark/launcher/Main : Unsupported major.minor version 51.0\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(ClassLoader.java:643)\r\n    \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    \tat java.net.URLClassLoader.defineClass(URLClassLoader.java:277)\r\n    \tat java.net.URLClassLoader.access$000(URLClassLoader.java:73)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:212)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:205)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:323)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:296)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:268)\r\n    \tat sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:406)\r\n    Traceback (most recent call last):\r\n      File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;\r\n      File &quot;/opt/spark/python/pyspark/conf.py&quot;, line 104, in __init__\r\n        SparkContext._ensure_initialized()\r\n      File &quot;/opt/spark/python/pyspark/context.py&quot;, line 243, in _ensure_initialized\r\n        SparkContext._gateway = gateway or launch_gateway()\r\n      File &quot;/opt/spark/python/pyspark/java_gateway.py&quot;, line 94, in launch_gateway\r\n        raise Exception(&quot;Java gateway process exited before sending the driver its port number&quot;)\r\n    Exception: Java gateway process exited before sending the driver its port number\r\n\r\nat `sc = pyspark.SparkConf()`. I solved it by running\r\n\r\n    sudo add-apt-repository ppa:webupd8team/java\r\n    sudo apt-get update\r\n    sudo apt-get install oracle-java8-installer\r\n\r\nwhich is from https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-ubuntu-16-04","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>One possible reason is JAVA_HOME is not set because java is not installed.</p>\n\n<p>I encountered the same issue. It says </p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsupportedClassVersionError: org/apache/spark/launcher/Main : Unsupported major.minor version 51.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:643)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)\n    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:323)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:296)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:268)\n    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:406)\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"/opt/spark/python/pyspark/conf.py\", line 104, in __init__\n    SparkContext._ensure_initialized()\n  File \"/opt/spark/python/pyspark/context.py\", line 243, in _ensure_initialized\n    SparkContext._gateway = gateway or launch_gateway()\n  File \"/opt/spark/python/pyspark/java_gateway.py\", line 94, in launch_gateway\n    raise Exception(\"Java gateway process exited before sending the driver its port number\")\nException: Java gateway process exited before sending the driver its port number\n</code></pre>\n\n<p>at <code>sc = pyspark.SparkConf()</code>. I solved it by running</p>\n\n<pre><code>sudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get install oracle-java8-installer\n</code></pre>\n\n<p>which is from <a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-ubuntu-16-04\" rel=\"noreferrer\">https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-ubuntu-16-04</a></p>\n"},{"comments":[{"owner":{"account_id":36668,"reputation":7184,"user_id":104659,"accept_rate":89,"display_name":"Gerald Senarclens de Grancy"},"score":0,"creation_date":1505908890,"post_id":45070215,"comment_id":79603674,"body_markdown":"Thx - this solved my problem on KDE Neon (based on Ubuntu 16.04).","body":"Thx - this solved my problem on KDE Neon (based on Ubuntu 16.04)."}],"tags":[],"owner":{"account_id":450429,"reputation":3179,"user_id":845743,"display_name":"Pankaj Kumar"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1499910803,"creation_date":1499910803,"answer_id":45070215,"question_id":31841509,"body_markdown":"In my case this error came for the script which was running fine before. So I figured out that this might be due to my JAVA update. Before I was using java 1.8 but I had accidentally updated to java 1.9. When I switched back to java 1.8 the error disappeared and everything is running fine. \r\nFor those, who get this error for the same reason but do not know how to switch back to older java version on ubuntu: \r\nrun\r\n\r\n    sudo update-alternatives --config java \r\n\r\nand make the selection for java version","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>In my case this error came for the script which was running fine before. So I figured out that this might be due to my JAVA update. Before I was using java 1.8 but I had accidentally updated to java 1.9. When I switched back to java 1.8 the error disappeared and everything is running fine. \nFor those, who get this error for the same reason but do not know how to switch back to older java version on ubuntu: \nrun</p>\n\n<pre><code>sudo update-alternatives --config java \n</code></pre>\n\n<p>and make the selection for java version</p>\n"},{"tags":[],"owner":{"account_id":1003640,"reputation":8720,"user_id":1017917,"accept_rate":26,"display_name":"Soumyaansh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514572020,"creation_date":1514572020,"answer_id":48026811,"question_id":31841509,"body_markdown":"Had same issue, after installing java using below lines solved the issue !\r\n\r\n    sudo add-apt-repository ppa:webupd8team/java\r\n    sudo apt-get update\r\n    sudo apt-get install oracle-java8-installer","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>Had same issue, after installing java using below lines solved the issue !</p>\n\n<pre><code>sudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get install oracle-java8-installer\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6213769,"reputation":792,"user_id":4839262,"accept_rate":73,"display_name":"mikesneider"},"score":0,"creation_date":1591367581,"post_id":49505137,"comment_id":110037756,"body_markdown":"but if you type java -version showed another version instead 8?","body":"but if you type java -version showed another version instead 8?"}],"tags":[],"owner":{"account_id":7350859,"reputation":685,"user_id":5597062,"accept_rate":36,"display_name":"aghd"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522129321,"creation_date":1522129321,"answer_id":49505137,"question_id":31841509,"body_markdown":"Worked hours on this. My problem was with Java 10 installation. I uninstalled it and installed Java 8, and now Pyspark works.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>Worked hours on this. My problem was with Java 10 installation. I uninstalled it and installed Java 8, and now Pyspark works.</p>\n"},{"tags":[],"owner":{"account_id":4869249,"reputation":2487,"user_id":3926352,"accept_rate":38,"display_name":"Kiem Nguyen"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1522733480,"creation_date":1522733480,"answer_id":49622868,"question_id":31841509,"body_markdown":"After spending hours and hours trying many different solutions, I can confirm that Java 10 SDK causes this error. On Mac, please navigate to /Library/Java/JavaVirtualMachines then run this command to uninstall Java JDK 10 completely:\r\n\r\n    sudo rm -rf jdk-10.jdk/\r\n\r\nAfter that, please download JDK 8 then the problem will be solved.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>After spending hours and hours trying many different solutions, I can confirm that Java 10 SDK causes this error. On Mac, please navigate to /Library/Java/JavaVirtualMachines then run this command to uninstall Java JDK 10 completely:</p>\n\n<pre><code>sudo rm -rf jdk-10.jdk/\n</code></pre>\n\n<p>After that, please download JDK 8 then the problem will be solved.</p>\n"},{"tags":[],"owner":{"account_id":13394481,"reputation":21,"user_id":9665881,"display_name":"Sujan Mukherjee"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524075247,"creation_date":1524074257,"answer_id":49906130,"question_id":31841509,"body_markdown":"I figured out the problem in Windows system. The installation directory for Java must not have blanks in the path such as in `C:\\Program Files`. I re-installed Java in `C\\Java`. I set `JAVA_HOME` to `C:\\Java` and the problem went away.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I figured out the problem in Windows system. The installation directory for Java must not have blanks in the path such as in <code>C:\\Program Files</code>. I re-installed Java in <code>C\\Java</code>. I set <code>JAVA_HOME</code> to <code>C:\\Java</code> and the problem went away.</p>\n"},{"tags":[],"owner":{"account_id":2679033,"reputation":27742,"user_id":2314737,"accept_rate":82,"display_name":"user2314737"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1581976737,"creation_date":1529962724,"answer_id":51032134,"question_id":31841509,"body_markdown":"Had this error message running pyspark on Ubuntu, got rid of it by installing the `openjdk-8-jdk` package\r\n\r\n\r\n    from pyspark import SparkConf, SparkContext\r\n    sc = SparkContext(conf=SparkConf().setAppName(&quot;MyApp&quot;).setMaster(&quot;local&quot;))\r\n    ^^^ error\r\n\r\nInstall Open JDK 8:\r\n\r\n    apt-get install openjdk-8-jdk-headless -qq    \r\n\r\n### On MacOS\r\nSame on Mac OS, I typed in a terminal:\r\n\r\n    $ java -version\r\n    No Java runtime present, requesting install. \r\n\r\nI was prompted to install Java from the [Oracle&#39;s download site](https://www.oracle.com/java/technologies/javase-jdk13-downloads.html), chose the MacOS installer, clicked on `jdk-13.0.2_osx-x64_bin.dmg` and after that checked that Java was installed\r\n\r\n    $ java -version\r\n    java version &quot;13.0.2&quot; 2020-01-14\r\n\r\nEDIT To install JDK 8 you need to go to https://www.oracle.com/java/technologies/javase-jdk8-downloads.html (login required) \r\n\r\nAfter that I was able to start a Spark context with pyspark. \r\n\r\n### Checking if it works\r\n\r\nIn Python:\r\n\r\n    from pyspark import SparkContext \r\n    sc = SparkContext.getOrCreate() \r\n\r\n    # check that it really works by running a job\r\n    # example from http://spark.apache.org/docs/latest/rdd-programming-guide.html#parallelized-collections\r\n    data = range(10000) \r\n    distData = sc.parallelize(data)\r\n    distData.filter(lambda x: not x&amp;1).take(10)\r\n    # Out: [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]\r\n\r\nNote that you might need to set the environment variables `PYSPARK_PYTHON` and `PYSPARK_DRIVER_PYTHON` and they have to be the same Python version as the Python (or IPython) you&#39;re using to run pyspark (the driver).\r\n","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>Had this error message running pyspark on Ubuntu, got rid of it by installing the <code>openjdk-8-jdk</code> package</p>\n\n<pre><code>from pyspark import SparkConf, SparkContext\nsc = SparkContext(conf=SparkConf().setAppName(\"MyApp\").setMaster(\"local\"))\n^^^ error\n</code></pre>\n\n<p>Install Open JDK 8:</p>\n\n<pre><code>apt-get install openjdk-8-jdk-headless -qq    \n</code></pre>\n\n<h3>On MacOS</h3>\n\n<p>Same on Mac OS, I typed in a terminal:</p>\n\n<pre><code>$ java -version\nNo Java runtime present, requesting install. \n</code></pre>\n\n<p>I was prompted to install Java from the <a href=\"https://www.oracle.com/java/technologies/javase-jdk13-downloads.html\" rel=\"noreferrer\">Oracle's download site</a>, chose the MacOS installer, clicked on <code>jdk-13.0.2_osx-x64_bin.dmg</code> and after that checked that Java was installed</p>\n\n<pre><code>$ java -version\njava version \"13.0.2\" 2020-01-14\n</code></pre>\n\n<p>EDIT To install JDK 8 you need to go to <a href=\"https://www.oracle.com/java/technologies/javase-jdk8-downloads.html\" rel=\"noreferrer\">https://www.oracle.com/java/technologies/javase-jdk8-downloads.html</a> (login required) </p>\n\n<p>After that I was able to start a Spark context with pyspark. </p>\n\n<h3>Checking if it works</h3>\n\n<p>In Python:</p>\n\n<pre><code>from pyspark import SparkContext \nsc = SparkContext.getOrCreate() \n\n# check that it really works by running a job\n# example from http://spark.apache.org/docs/latest/rdd-programming-guide.html#parallelized-collections\ndata = range(10000) \ndistData = sc.parallelize(data)\ndistData.filter(lambda x: not x&amp;1).take(10)\n# Out: [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]\n</code></pre>\n\n<p>Note that you might need to set the environment variables <code>PYSPARK_PYTHON</code> and <code>PYSPARK_DRIVER_PYTHON</code> and they have to be the same Python version as the Python (or IPython) you're using to run pyspark (the driver).</p>\n"},{"tags":[],"owner":{"account_id":13692622,"reputation":11,"user_id":9880049,"display_name":"J.Bo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534578526,"creation_date":1534576855,"answer_id":51906286,"question_id":31841509,"body_markdown":"I have the same error.\r\n\r\nMy trouble shooting procedures are:\r\n\r\n1. Check out Spark source code.\r\n2. Follow the error message. In my case: `pyspark/java_gateway.py`, line 93, in `launch_gateway`.\r\n3. Check the code logic to find the root cause then you will resolve it.\r\n\r\nIn my case the issue is PySpark has no permission to create some temporary directory, so I just run my IDE with sudo","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I have the same error.</p>\n\n<p>My trouble shooting procedures are:</p>\n\n<ol>\n<li>Check out Spark source code.</li>\n<li>Follow the error message. In my case: <code>pyspark/java_gateway.py</code>, line 93, in <code>launch_gateway</code>.</li>\n<li>Check the code logic to find the root cause then you will resolve it.</li>\n</ol>\n\n<p>In my case the issue is PySpark has no permission to create some temporary directory, so I just run my IDE with sudo</p>\n"},{"tags":[],"owner":{"account_id":13389107,"reputation":63,"user_id":9661973,"display_name":"Joon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540611633,"creation_date":1540611633,"answer_id":53018517,"question_id":31841509,"body_markdown":"I have the same error in running pyspark in pycharm.\r\nI solved the problem by adding JAVA_HOME in pycharm&#39;s environment variables.\r\n ","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I have the same error in running pyspark in pycharm.\nI solved the problem by adding JAVA_HOME in pycharm's environment variables.</p>\n"},{"tags":[],"owner":{"account_id":11827091,"reputation":1,"user_id":8654755,"display_name":"Yuuura87"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540981468,"creation_date":1540981468,"answer_id":53081155,"question_id":31841509,"body_markdown":"For me, the answer was to add two &#39;Content Roots&#39; in &#39;File&#39; -&gt; &#39;Project Structure&#39; -&gt; &#39;Modules&#39; (in IntelliJ):\r\n\r\n1. YourPath\\spark-2.2.1-bin-hadoop2.7\\python\r\n2. YourPath\\spark-2.2.1-bin-hadoop2.7\\python\\lib\\py4j-0.10.4-src.zip\r\n\r\n","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>For me, the answer was to add two 'Content Roots' in 'File' -> 'Project Structure' -> 'Modules' (in IntelliJ):</p>\n\n<ol>\n<li>YourPath\\spark-2.2.1-bin-hadoop2.7\\python</li>\n<li>YourPath\\spark-2.2.1-bin-hadoop2.7\\python\\lib\\py4j-0.10.4-src.zip</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8975860,"reputation":400,"user_id":6692757,"accept_rate":62,"display_name":"noiivice"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543799018,"creation_date":1543799018,"answer_id":53586191,"question_id":31841509,"body_markdown":"This is an old thread but I&#39;m adding my solution for those who use mac.\r\n\r\nThe issue was with the `JAVA_HOME`.  You have to include this in your `.bash_profile`.\r\n\r\nCheck your `java -version`. If you downloaded the latest Java but it doesn&#39;t show up as the latest version, then you know that the path is wrong.  Normally, the default path is `export JAVA_HOME= /usr/bin/java`.  \r\n\r\nSo try changing the path to:\r\n`/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java`\r\n\r\nAlternatively you could also download the latest JDK.\r\n[https://www.oracle.com/technetwork/java/javase/downloads/index.html][1] and this will automatically replace `usr/bin/java` to the latest version.  You can confirm this by doing `java -version` again.\r\n\r\nThen that should work.\r\n\r\n\r\n  [1]: https://www.oracle.com/technetwork/java/javase/downloads/index.html","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>This is an old thread but I'm adding my solution for those who use mac.</p>\n\n<p>The issue was with the <code>JAVA_HOME</code>.  You have to include this in your <code>.bash_profile</code>.</p>\n\n<p>Check your <code>java -version</code>. If you downloaded the latest Java but it doesn't show up as the latest version, then you know that the path is wrong.  Normally, the default path is <code>export JAVA_HOME= /usr/bin/java</code>.  </p>\n\n<p>So try changing the path to:\n<code>/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java</code></p>\n\n<p>Alternatively you could also download the latest JDK.\n<a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/java/javase/downloads/index.html</a> and this will automatically replace <code>usr/bin/java</code> to the latest version.  You can confirm this by doing <code>java -version</code> again.</p>\n\n<p>Then that should work.</p>\n"},{"tags":[],"owner":{"account_id":3781210,"reputation":1803,"user_id":4237591,"display_name":"Steven"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549505457,"creation_date":1549505457,"answer_id":54565325,"question_id":31841509,"body_markdown":"Make sure that both your Java directory (as found in your path) AND your Python interpreter reside in directories with no spaces in them. These were the cause of my problem.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>Make sure that both your Java directory (as found in your path) AND your Python interpreter reside in directories with no spaces in them. These were the cause of my problem.</p>\n"},{"tags":[],"owner":{"account_id":241162,"reputation":1570,"user_id":511809,"display_name":"natbusa"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1553683725,"creation_date":1553683725,"answer_id":55375380,"question_id":31841509,"body_markdown":"If you are trying to run spark without hadoop binaries, you might encounter the above mentioned error. One solution is to :\r\n\r\n1) download hadoop separatedly.   \r\n2) add hadoop to your PATH  \r\n3) add hadoop classpath to your SPARK install\r\n\r\nThe first two steps are trivial, the last step can be best done by adding the following in the $SPARK_HOME/conf/spark-env.sh in each spark node (master and workers)\r\n\r\n```bash\r\n### in conf/spark-env.sh ###\r\n\r\nexport SPARK_DIST_CLASSPATH=$(hadoop classpath)\r\n```\r\n\r\nfor more info also check: https://spark.apache.org/docs/latest/hadoop-provided.html","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>If you are trying to run spark without hadoop binaries, you might encounter the above mentioned error. One solution is to :</p>\n\n<p>1) download hadoop separatedly.<br>\n2) add hadoop to your PATH<br>\n3) add hadoop classpath to your SPARK install</p>\n\n<p>The first two steps are trivial, the last step can be best done by adding the following in the $SPARK_HOME/conf/spark-env.sh in each spark node (master and workers)</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>### in conf/spark-env.sh ###\n\nexport SPARK_DIST_CLASSPATH=$(hadoop classpath)\n</code></pre>\n\n<p>for more info also check: <a href=\"https://spark.apache.org/docs/latest/hadoop-provided.html\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/latest/hadoop-provided.html</a></p>\n"},{"comments":[{"owner":{"account_id":5711754,"reputation":5794,"user_id":4513509,"accept_rate":89,"display_name":"NonCreature0714"},"score":3,"creation_date":1632502873,"post_id":55667945,"comment_id":122518984,"body_markdown":"To clarify, the fix here is `export JAVA_HOME=&quot;$(/usr/libexec/java_home -v 1.8)&quot;` and there is an extended discussion on Github https://github.com/jupyter/jupyter/issues/248#issuecomment-926782387. Yes, the link is to Jupyter, but it&#39;s regarding an issue with PySpark. Adding the first assignment to JAVA_HOME does nothing.","body":"To clarify, the fix here is <code>export JAVA_HOME=&quot;$(&#47;usr&#47;libexec&#47;java_home -v 1.8)&quot;</code> and there is an extended discussion on Github <a href=\"https://github.com/jupyter/jupyter/issues/248#issuecomment-926782387\" rel=\"nofollow noreferrer\">github.com/jupyter/jupyter/issues/248#issuecomment-926782387</a>&zwnj;&#8203;. Yes, the link is to Jupyter, but it&#39;s regarding an issue with PySpark. Adding the first assignment to JAVA_HOME does nothing."}],"tags":[],"owner":{"account_id":7719471,"reputation":331,"user_id":5846131,"display_name":"shihs"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1555175336,"creation_date":1555175336,"answer_id":55667945,"question_id":31841509,"body_markdown":"I use Mac OS. I fixed the problem!\r\n\r\n\r\n\r\nBelow is how I fixed it.\r\n\r\nJDK8 seems works fine. (https://github.com/jupyter/jupyter/issues/248)\r\n\r\nSo I checked my JDK **/Library/Java/JavaVirtualMachines**, I only have **jdk-11.jdk** in this path. \r\n\r\nI [downloaded JDK8](https://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac) (I followed the link).\r\nWhich is:\r\n```\r\nbrew tap caskroom/versions\r\nbrew cask install java8\r\n```\r\n\r\nAfter this, I added\r\n```\r\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/Contents/Home\r\nexport JAVA_HOME=&quot;$(/usr/libexec/java_home -v 1.8)&quot;\r\n```\r\nto **~/.bash_profile** file.  (you sholud check your jdk1.8 file name)\r\n\r\nIt works now!\r\nHope this help :)\r\n","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I use Mac OS. I fixed the problem!</p>\n\n<p>Below is how I fixed it.</p>\n\n<p>JDK8 seems works fine. (<a href=\"https://github.com/jupyter/jupyter/issues/248\" rel=\"noreferrer\">https://github.com/jupyter/jupyter/issues/248</a>)</p>\n\n<p>So I checked my JDK <strong>/Library/Java/JavaVirtualMachines</strong>, I only have <strong>jdk-11.jdk</strong> in this path. </p>\n\n<p>I <a href=\"https://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac\">downloaded JDK8</a> (I followed the link).\nWhich is:</p>\n\n<pre><code>brew tap caskroom/versions\nbrew cask install java8\n</code></pre>\n\n<p>After this, I added</p>\n\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/Contents/Home\nexport JAVA_HOME=\"$(/usr/libexec/java_home -v 1.8)\"\n</code></pre>\n\n<p>to <strong>~/.bash_profile</strong> file.  (you sholud check your jdk1.8 file name)</p>\n\n<p>It works now!\nHope this help :)</p>\n"},{"tags":[],"owner":{"account_id":4155124,"reputation":1168,"user_id":3406616,"accept_rate":93,"display_name":"hayj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555322380,"creation_date":1555322380,"answer_id":55686710,"question_id":31841509,"body_markdown":"In my case it was because I wrote `SPARK_DRIVER_MEMORY=10` instead of `SPARK_DRIVER_MEMORY=10g` in `spark-env.sh`","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>In my case it was because I wrote <code>SPARK_DRIVER_MEMORY=10</code> instead of <code>SPARK_DRIVER_MEMORY=10g</code> in <code>spark-env.sh</code></p>\n"},{"tags":[],"owner":{"account_id":11380842,"reputation":41,"user_id":8343786,"display_name":"A known"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555928573,"creation_date":1555926314,"answer_id":55792410,"question_id":31841509,"body_markdown":"I had the same exception and I tried everything by setting and resetting all environment variables. But the issue in the end drilled down to space in appname property of spark session,that is, &quot;SparkSession.builder.appName(&quot;StreamingDemo&quot;).getOrCreate()&quot;. Immediately after removing space from string given to appname property it got resolved.I was using pyspark 2.7 with eclipse on windows 10 environment. It worked for me.\r\nEnclosed are required screenshots.[![Error_with space][1]][1]\r\n\r\n\r\n[![No Error_without space][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ztNog.png\r\n  [2]: https://i.stack.imgur.com/FJkqD.png","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I had the same exception and I tried everything by setting and resetting all environment variables. But the issue in the end drilled down to space in appname property of spark session,that is, \"SparkSession.builder.appName(\"StreamingDemo\").getOrCreate()\". Immediately after removing space from string given to appname property it got resolved.I was using pyspark 2.7 with eclipse on windows 10 environment. It worked for me.\nEnclosed are required screenshots.<a href=\"https://i.stack.imgur.com/ztNog.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ztNog.png\" alt=\"Error_with space\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/FJkqD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FJkqD.png\" alt=\"No Error_without space\"></a></p>\n"},{"comments":[{"owner":{"account_id":5543425,"reputation":202,"user_id":4399032,"display_name":"Abubakar Saad"},"score":1,"creation_date":1642644901,"post_id":56499492,"comment_id":125128547,"body_markdown":"Thank you, this worked for me, I&#39;m using Fedora. It&#39;s the JAVA path that has to be set to /usr/lib/jvm/java-(whatever JDK verison). This took time to figure out, thank you again","body":"Thank you, this worked for me, I&#39;m using Fedora. It&#39;s the JAVA path that has to be set to /usr/lib/jvm/java-(whatever JDK verison). This took time to figure out, thank you again"}],"tags":[],"owner":{"account_id":13861216,"reputation":1121,"user_id":10006823,"display_name":"Ran Feldesh"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559932671,"creation_date":1559931659,"answer_id":56499492,"question_id":31841509,"body_markdown":"For Linux (Ubuntu 18.04) with a JAVA_HOME issue, a key is to point it to the **master** folder:\r\n\r\n 1. Set Java 8 as default by: **`sudo update-alternatives --config java`**. If Jave 8 is not installed, install by: **`sudo apt install openjdk-8-jdk`**.\r\n 2. Set `JAVA_HOME` environment variable as the **master** java 8 folder. The location is given by the first command above removing `jre/bin/java`. Namely: **`export JAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64/&quot;`**. If done on the command line, this will be relevant only for the current session ([ref: export command on Linux][1]). To verify: **`echo $JAVA_HOME`**.\r\n 4. In order to have this permanently set, add the bolded line above to a file that runs before you start your IDE/Jupyter/python interpreter. This could be by adding the bolded line above to **`.bashrc`**. This file loads when a bash is started interactively [ref: .bashrc][2]\r\n\r\n\r\n  [1]: https://www.tutorialspoint.com/unix_commands/export.htm\r\n  [2]: https://unix.stackexchange.com/questions/129143/what-is-the-purpose-of-bashrc-and-how-does-it-work\r\n","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>For Linux (Ubuntu 18.04) with a JAVA_HOME issue, a key is to point it to the <strong>master</strong> folder:</p>\n\n<ol>\n<li>Set Java 8 as default by: <strong><code>sudo update-alternatives --config java</code></strong>. If Jave 8 is not installed, install by: <strong><code>sudo apt install openjdk-8-jdk</code></strong>.</li>\n<li>Set <code>JAVA_HOME</code> environment variable as the <strong>master</strong> java 8 folder. The location is given by the first command above removing <code>jre/bin/java</code>. Namely: <strong><code>export JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\"</code></strong>. If done on the command line, this will be relevant only for the current session (<a href=\"https://www.tutorialspoint.com/unix_commands/export.htm\" rel=\"nofollow noreferrer\">ref: export command on Linux</a>). To verify: <strong><code>echo $JAVA_HOME</code></strong>.</li>\n<li>In order to have this permanently set, add the bolded line above to a file that runs before you start your IDE/Jupyter/python interpreter. This could be by adding the bolded line above to <strong><code>.bashrc</code></strong>. This file loads when a bash is started interactively <a href=\"https://unix.stackexchange.com/questions/129143/what-is-the-purpose-of-bashrc-and-how-does-it-work\">ref: .bashrc</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2853802,"reputation":71,"user_id":2450426,"display_name":"ZhangXu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560245888,"creation_date":1560245888,"answer_id":56540748,"question_id":31841509,"body_markdown":"There are so many reasons for this error. My reason is : the version of pyspark is incompatible with spark. \r\npyspark version :2.4.0, but spark version is 2.2.0.\r\nit always cause python always fail when starting spark process. then spark cannot tell its ports to python. so error will be &quot;Pyspark: Exception: Java gateway process exited before sending the driver its port number\r\n&quot;.\r\n\r\nI suggest you dive into source code to find out the real reasons when this error happens","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>There are so many reasons for this error. My reason is : the version of pyspark is incompatible with spark. \npyspark version :2.4.0, but spark version is 2.2.0.\nit always cause python always fail when starting spark process. then spark cannot tell its ports to python. so error will be \"Pyspark: Exception: Java gateway process exited before sending the driver its port number\n\".</p>\n\n<p>I suggest you dive into source code to find out the real reasons when this error happens</p>\n"},{"tags":[],"owner":{"account_id":7007411,"reputation":339,"user_id":5371368,"display_name":"abhishek kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563103214,"creation_date":1563103214,"answer_id":57026932,"question_id":31841509,"body_markdown":"I go this error fixed by using the below code. I had setup the SPARK_HOME though. You may follow this simple steps from [eproblems website][1]\r\n\r\n    spark_home = os.environ.get(&#39;SPARK_HOME&#39;, None)\r\n\r\n\r\n  [1]: https://eproblems.wordpress.com/2019/07/14/how-to-start-with-pyspark-on-windows-10/","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I go this error fixed by using the below code. I had setup the SPARK_HOME though. You may follow this simple steps from <a href=\"https://eproblems.wordpress.com/2019/07/14/how-to-start-with-pyspark-on-windows-10/\" rel=\"nofollow noreferrer\">eproblems website</a></p>\n\n<pre><code>spark_home = os.environ.get('SPARK_HOME', None)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13709119,"reputation":119,"user_id":9891948,"display_name":"Marcelo Tournier"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1573796077,"creation_date":1573796077,"answer_id":58870903,"question_id":31841509,"body_markdown":"Spark is very picky with the Java version you use. It is highly recommended that you use Java 1.8 (The open source AdoptOpenJDK 8 works well too).\r\nAfter install it, set `JAVA_HOME` to your bash variables, if you use Mac/Linux:\r\n\r\n`export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)`\r\n\r\n`export PATH=$JAVA_HOME/bin:$PATH`","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>Spark is very picky with the Java version you use. It is highly recommended that you use Java 1.8 (The open source AdoptOpenJDK 8 works well too).\nAfter install it, set <code>JAVA_HOME</code> to your bash variables, if you use Mac/Linux:</p>\n\n<p><code>export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)</code></p>\n\n<p><code>export PATH=$JAVA_HOME/bin:$PATH</code></p>\n"},{"tags":[],"owner":{"account_id":5190940,"reputation":2263,"user_id":4153895,"display_name":"Tarun Reddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584352250,"creation_date":1584352250,"answer_id":60703686,"question_id":31841509,"body_markdown":"The error occured since JAVA is not installed on machine.\r\nSpark is developed in scala which usually runs on JAVA.\r\n\r\nTry to install JAVA and execute the pyspark statements.\r\nIt will works ","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>The error occured since JAVA is not installed on machine.\nSpark is developed in scala which usually runs on JAVA.</p>\n\n<p>Try to install JAVA and execute the pyspark statements.\nIt will works </p>\n"},{"tags":[],"owner":{"account_id":4418021,"reputation":1201,"user_id":3598981,"display_name":"Arjjun"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585355353,"creation_date":1585342828,"answer_id":60894056,"question_id":31841509,"body_markdown":"This usually happens if you do not have java installed in your machine.\r\n\r\nGo to command prompt and check the version of your java: \r\ntype : `java -version`\r\n\r\nyou should get output sth like this\r\n \r\n`java version &quot;1.8.0_241&quot;\r\nJava(TM) SE Runtime Environment (build 1.8.0_241-b07)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.241-b07, mixed mode)`\r\n\r\nIf not, go to orcale and download jdk. \r\nCheck this video on how to download java and add it to the buildpath.\r\n\r\nhttps://www.youtube.com/watch?v=f7rT0h1Q5Wo","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>This usually happens if you do not have java installed in your machine.</p>\n\n<p>Go to command prompt and check the version of your java: \ntype : <code>java -version</code></p>\n\n<p>you should get output sth like this</p>\n\n<p><code>java version \"1.8.0_241\"\nJava(TM) SE Runtime Environment (build 1.8.0_241-b07)\nJava HotSpot(TM) 64-Bit Server VM (build 25.241-b07, mixed mode)</code></p>\n\n<p>If not, go to orcale and download jdk. \nCheck this video on how to download java and add it to the buildpath.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=f7rT0h1Q5Wo\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=f7rT0h1Q5Wo</a></p>\n"},{"tags":[],"owner":{"account_id":2816205,"reputation":651,"user_id":2421204,"accept_rate":75,"display_name":"Artyom Rebrov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592374605,"creation_date":1592374605,"answer_id":62422559,"question_id":31841509,"body_markdown":"Had the same issue when was trying to run the pyspark job triggered from the Airflow with remote spark.driver.host. The cause of the issue in my case was: \r\n\r\n&gt; Exception: Java gateway process exited before sending the driver its\r\n&gt; port number\r\n\r\n...\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.Exception: When running with master &#39;yarn&#39; either HADOOP_CONF_DIR or YARN_CONF_DIR must be set in the environment.\r\n\r\nFixed by adding exports:\r\n\r\n    export HADOOP_CONF_DIR=/etc/hadoop/conf\r\n\r\nAnd the same environment variable added in the pyspark script:\r\n\r\n    import os\r\n    os.environ[&quot;HADOOP_CONF_DIR&quot;] = &#39;/etc/hadoop/conf&#39;\r\n\r\n\r\n\r\n","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>Had the same issue when was trying to run the pyspark job triggered from the Airflow with remote spark.driver.host. The cause of the issue in my case was: </p>\n\n<blockquote>\n  <p>Exception: Java gateway process exited before sending the driver its\n  port number</p>\n</blockquote>\n\n<p>...</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.Exception: When running with master 'yarn' either HADOOP_CONF_DIR or YARN_CONF_DIR must be set in the environment.</p>\n</blockquote>\n\n<p>Fixed by adding exports:</p>\n\n<pre><code>export HADOOP_CONF_DIR=/etc/hadoop/conf\n</code></pre>\n\n<p>And the same environment variable added in the pyspark script:</p>\n\n<pre><code>import os\nos.environ[\"HADOOP_CONF_DIR\"] = '/etc/hadoop/conf'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":919114,"reputation":196,"user_id":3155305,"display_name":"muzamil"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1602091130,"creation_date":1602091130,"answer_id":64249141,"question_id":31841509,"body_markdown":"I was getting this error when i was using jdk-1.8 32-bit\r\nswitching to 64-bit works for me.\r\n\r\nI was getting this error because 32-bit java could not allocate more than 3G heap memory required by the spark driver (16G):\r\n\r\n    builder = SparkSession.builder \\\r\n            .appName(&quot;Spark NLP&quot;) \\\r\n            .master(&quot;local[*]&quot;) \\\r\n            .config(&quot;spark.driver.memory&quot;, &quot;16G&quot;) \\\r\n            .config(&quot;spark.serializer&quot;, &quot;org.apache.spark.serializer.KryoSerializer&quot;) \\\r\n            .config(&quot;spark.kryoserializer.buffer.max&quot;, &quot;1000M&quot;) \\\r\n            .config(&quot;spark.driver.maxResultSize&quot;, &quot;0&quot;)\r\n\r\nI tested making this up to 2G and it worked in 32-bit as well.\r\n","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I was getting this error when i was using jdk-1.8 32-bit\nswitching to 64-bit works for me.</p>\n<p>I was getting this error because 32-bit java could not allocate more than 3G heap memory required by the spark driver (16G):</p>\n<pre><code>builder = SparkSession.builder \\\n        .appName(&quot;Spark NLP&quot;) \\\n        .master(&quot;local[*]&quot;) \\\n        .config(&quot;spark.driver.memory&quot;, &quot;16G&quot;) \\\n        .config(&quot;spark.serializer&quot;, &quot;org.apache.spark.serializer.KryoSerializer&quot;) \\\n        .config(&quot;spark.kryoserializer.buffer.max&quot;, &quot;1000M&quot;) \\\n        .config(&quot;spark.driver.maxResultSize&quot;, &quot;0&quot;)\n</code></pre>\n<p>I tested making this up to 2G and it worked in 32-bit as well.</p>\n"},{"tags":[],"owner":{"account_id":391177,"reputation":3037,"user_id":751689,"accept_rate":59,"display_name":"kitokid"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1610266218,"creation_date":1610266218,"answer_id":65651256,"question_id":31841509,"body_markdown":"I will repost [how I solved it][1] here just for future references.\r\n\r\n**How I solved my similar problem**\r\n\r\n_Prerequisite:_\r\n1) anaconda already installed\r\n2) Spark already installed (https://spark.apache.org/downloads.html)\r\n3) pyspark already installed (https://anaconda.org/conda-forge/pyspark)\r\n\r\n_Steps I did_ (NOTE: set the folder path accordingly to your system)\r\n\r\n&gt; 1. set the following environment variables.\r\n&gt; 2. SPARK_HOME to &#39;C:\\spark\\spark-3.0.1-bin-hadoop2.7&#39;\r\n&gt; 3. set HADOOP_HOME  to &#39;C:\\spark\\spark-3.0.1-bin-hadoop2.7&#39;\r\n&gt; 4. set PYSPARK_DRIVER_PYTHON to &#39;jupyter&#39;\r\n&gt; 5. set PYSPARK_DRIVER_PYTHON_OPTS to &#39;notebook&#39;\r\n&gt; 6. add &#39;C:\\spark\\spark-3.0.1-bin-hadoop2.7\\bin;&#39; to PATH system variable.\r\n&gt; 7. Change the java installed folder directly under C: (Previously java was installed under Program files, so I re-installed directly\r\n&gt; under C:)\r\n&gt; 8. so my JAVA_HOME will become like this &#39;C:\\java\\jdk1.8.0_271&#39;\r\n\r\nnow. it works !\r\n\r\n\r\n  [1]: https://github.com/jupyter/notebook/issues/743","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I will repost <a href=\"https://github.com/jupyter/notebook/issues/743\" rel=\"noreferrer\">how I solved it</a> here just for future references.</p>\n<p><strong>How I solved my similar problem</strong></p>\n<p><em>Prerequisite:</em></p>\n<ol>\n<li>anaconda already installed</li>\n<li>Spark already installed (<a href=\"https://spark.apache.org/downloads.html\" rel=\"noreferrer\">https://spark.apache.org/downloads.html</a>)</li>\n<li>pyspark already installed (<a href=\"https://anaconda.org/conda-forge/pyspark\" rel=\"noreferrer\">https://anaconda.org/conda-forge/pyspark</a>)</li>\n</ol>\n<p><em>Steps I did</em> (NOTE: set the folder path accordingly to your system)</p>\n<blockquote>\n<ol>\n<li>set the following environment variables.</li>\n<li>SPARK_HOME to 'C:\\spark\\spark-3.0.1-bin-hadoop2.7'</li>\n<li>set HADOOP_HOME  to 'C:\\spark\\spark-3.0.1-bin-hadoop2.7'</li>\n<li>set PYSPARK_DRIVER_PYTHON to 'jupyter'</li>\n<li>set PYSPARK_DRIVER_PYTHON_OPTS to 'notebook'</li>\n<li>add 'C:\\spark\\spark-3.0.1-bin-hadoop2.7\\bin;' to PATH system variable.</li>\n<li>Change the java installed folder directly under C: (Previously java was installed under Program files, so I re-installed directly\nunder C:)</li>\n<li>so my JAVA_HOME will become like this 'C:\\java\\jdk1.8.0_271'</li>\n</ol>\n</blockquote>\n<p>now. it works !</p>\n"},{"tags":[],"owner":{"account_id":1505030,"reputation":3731,"user_id":1408615,"accept_rate":75,"display_name":"kennyut"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615989473,"creation_date":1615989473,"answer_id":66674609,"question_id":31841509,"body_markdown":"I had the same issue once when I brought up Spark using Docker container. It turned out I set wrong permission for the **/tmp** folder.\r\nIf spark has no write permission on **/tmp**, it will cause this issue too.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I had the same issue once when I brought up Spark using Docker container. It turned out I set wrong permission for the <strong>/tmp</strong> folder.\nIf spark has no write permission on <strong>/tmp</strong>, it will cause this issue too.</p>\n"},{"tags":[],"owner":{"account_id":15721219,"reputation":349,"user_id":11344054,"display_name":"Nisan Chhetri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617367051,"creation_date":1617367051,"answer_id":66919454,"question_id":31841509,"body_markdown":"You can simply run the following code in the terminal. Then, I hope this will resolve your error.\r\n\r\n    sudo apt-get install default-jdk\r\n","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>You can simply run the following code in the terminal. Then, I hope this will resolve your error.</p>\n<pre><code>sudo apt-get install default-jdk\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7216609,"reputation":2025,"user_id":5508854,"accept_rate":40,"display_name":"Mark A"},"score":0,"creation_date":1668799569,"post_id":67029299,"comment_id":131502260,"body_markdown":"I have mine at `/usr/local/opt/openjdk@8` and something seems to be wrong with this &amp;  `pytest-spark`. It says it cant find the Java installation\n\n`Error: A JNI error has occurred, please check your installation and try again`...\n\n`RuntimeError: Java gateway process exited before sending its port number`","body":"I have mine at <code>&#47;usr&#47;local&#47;opt&#47;openjdk@8</code> and something seems to be wrong with this &amp;  <code>pytest-spark</code>. It says it cant find the Java installation  <code>Error: A JNI error has occurred, please check your installation and try again</code>...  <code>RuntimeError: Java gateway process exited before sending its port number</code>"}],"tags":[],"owner":{"account_id":6657425,"reputation":181,"user_id":5137479,"display_name":"answerzilla"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1618034122,"creation_date":1618009585,"answer_id":67029299,"question_id":31841509,"body_markdown":"I had the same error with PySpark, and setting JAVA_HOME to Java 11 worked for me (it was originally set to 16). I&#39;m using MacOS and PyCharm.\r\nYou can check your current Java version by doing `echo $JAVA_HOME`.\r\n\r\nBelow is what worked for me. On my Mac I used the following homebrew command, but you can use a different method to install the desired Java version, depending on your OS. \r\n```\r\n# Install Java 11 (I believe 8 works too)\r\n$ brew install openjdk@11\r\n\r\n# Set JAVA_HOME by assigning the path where your Java is\r\n$ export JAVA_HOME=/usr/local/opt/openjdk@11\r\n```\r\nNote: If you installed using homebrew and need to find the location of the path, you can do `$ brew --prefix openjdk@11` and it should return a path like this: `/usr/local/opt/openjdk@11`\r\n\r\nAt this point, I could run my PySpark program from the terminal - however, my IDE (PyCharm) still had the same error until I globally changed the JAVA_HOME variable. \r\n\r\nTo update the variable, first check whether you&#39;re using the zsh or bash shell by running `echo $SHELL` on the command line. For zsh, you&#39;ll edit the `~/.zshenv` file and for bash you&#39;ll edit the `~/.bash_profile`.\r\n\r\n```\r\n# open the file\r\n$ vim ~/.zshenv\r\nOR\r\n$ vim ~/.bash_profile\r\n\r\n# once inside the file, set the variable with your Java path, then save and close the file\r\nexport JAVA_HOME=/usr/local/opt/openjdk@11\r\n\r\n# test if it was set successfully\r\n$ echo $JAVA_HOME\r\n/usr/local/opt/openjdk@11\r\n```\r\nAfter this step, I could run PySpark through my PyCharm IDE as well.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I had the same error with PySpark, and setting JAVA_HOME to Java 11 worked for me (it was originally set to 16). I'm using MacOS and PyCharm.\nYou can check your current Java version by doing <code>echo $JAVA_HOME</code>.</p>\n<p>Below is what worked for me. On my Mac I used the following homebrew command, but you can use a different method to install the desired Java version, depending on your OS.</p>\n<pre><code># Install Java 11 (I believe 8 works too)\n$ brew install openjdk@11\n\n# Set JAVA_HOME by assigning the path where your Java is\n$ export JAVA_HOME=/usr/local/opt/openjdk@11\n</code></pre>\n<p>Note: If you installed using homebrew and need to find the location of the path, you can do <code>$ brew --prefix openjdk@11</code> and it should return a path like this: <code>/usr/local/opt/openjdk@11</code></p>\n<p>At this point, I could run my PySpark program from the terminal - however, my IDE (PyCharm) still had the same error until I globally changed the JAVA_HOME variable.</p>\n<p>To update the variable, first check whether you're using the zsh or bash shell by running <code>echo $SHELL</code> on the command line. For zsh, you'll edit the <code>~/.zshenv</code> file and for bash you'll edit the <code>~/.bash_profile</code>.</p>\n<pre><code># open the file\n$ vim ~/.zshenv\nOR\n$ vim ~/.bash_profile\n\n# once inside the file, set the variable with your Java path, then save and close the file\nexport JAVA_HOME=/usr/local/opt/openjdk@11\n\n# test if it was set successfully\n$ echo $JAVA_HOME\n/usr/local/opt/openjdk@11\n</code></pre>\n<p>After this step, I could run PySpark through my PyCharm IDE as well.</p>\n"},{"comments":[{"owner":{"account_id":102447,"reputation":14497,"user_id":275002,"accept_rate":55,"display_name":"Volatil3"},"score":2,"creation_date":1664802197,"post_id":67912038,"comment_id":130547854,"body_markdown":"I have java installed. JAVA_HOME also set yet the same issue","body":"I have java installed. JAVA_HOME also set yet the same issue"}],"tags":[],"owner":{"account_id":16249580,"reputation":189,"user_id":11733871,"display_name":"archit jain"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623274779,"creation_date":1623274779,"answer_id":67912038,"question_id":31841509,"body_markdown":"The error usually occurs when your system doesn&#39;t have java installed.\r\n\r\nCheck if you have java installed, open up the terminal and do \r\n`java --version`\r\n\r\nIt&#39;s always advisable to use brew install for installing packages.\r\n`brew install openjdk@11` for installing java\r\n\r\nNow that you have java installed, set the path globally depending on the shell you use: Z shell or bash.\r\n\r\n1. cmd + shift + H: Go to home  \r\n2. cmd + shift + [.]: To see the hidden files (zshenv or bash_profile) and save either of the file under `export JAVA_HOME=/usr/local/opt/openjdk@11`\r\n","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>The error usually occurs when your system doesn't have java installed.</p>\n<p>Check if you have java installed, open up the terminal and do\n<code>java --version</code></p>\n<p>It's always advisable to use brew install for installing packages.\n<code>brew install openjdk@11</code> for installing java</p>\n<p>Now that you have java installed, set the path globally depending on the shell you use: Z shell or bash.</p>\n<ol>\n<li>cmd + shift + H: Go to home</li>\n<li>cmd + shift + [.]: To see the hidden files (zshenv or bash_profile) and save either of the file under <code>export JAVA_HOME=/usr/local/opt/openjdk@11</code></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1056589,"reputation":538,"user_id":1059147,"display_name":"Babak Ravandi"},"score":0,"creation_date":1659803583,"post_id":69122219,"comment_id":129384103,"body_markdown":"Great answer! it worked for me on MacOS Monterey (12.4)","body":"Great answer! it worked for me on MacOS Monterey (12.4)"}],"tags":[],"owner":{"account_id":15105498,"reputation":525,"user_id":10901300,"display_name":"Sahana M"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1631207501,"creation_date":1631207200,"answer_id":69122219,"question_id":31841509,"body_markdown":"After spending a good amount of time with this issue, I was able to solve this. I own MacOs Catalina, working on Pycharm in an Anaconda environment.\r\n\r\nSpark currently supports only Java8. If you install Java through command line, it will by default install the latest Java10+ and would cause all sorts of troubles. To solve this, follow the below steps - \r\n\r\n\r\n```\r\n1. Make sure you have Homebrew, else install Homebrew\r\n/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;\r\n\r\n2. Install X-code\r\nxcode-select -install\r\n\r\n3. Install Java8 through the official website (not through terminal)\r\nhttps://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html\r\n\r\n4. Install Apache-Spark\r\n brew install apache-spark \r\n\r\n5. Install Pyspark and Findspark (if you have anaconda)\r\nconda install -c conda-forge findspark \r\nconda install -c conda-forge/label/gcc7 findspark\r\nconda install -c conda-forge pyspark\r\n\r\n```\r\n\r\n**Viola!** this should let you run PySpark without any issues","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>After spending a good amount of time with this issue, I was able to solve this. I own MacOs Catalina, working on Pycharm in an Anaconda environment.</p>\n<p>Spark currently supports only Java8. If you install Java through command line, it will by default install the latest Java10+ and would cause all sorts of troubles. To solve this, follow the below steps -</p>\n<pre><code>1. Make sure you have Homebrew, else install Homebrew\n/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;\n\n2. Install X-code\nxcode-select -install\n\n3. Install Java8 through the official website (not through terminal)\nhttps://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html\n\n4. Install Apache-Spark\n brew install apache-spark \n\n5. Install Pyspark and Findspark (if you have anaconda)\nconda install -c conda-forge findspark \nconda install -c conda-forge/label/gcc7 findspark\nconda install -c conda-forge pyspark\n\n</code></pre>\n<p><strong>Viola!</strong> this should let you run PySpark without any issues</p>\n"},{"tags":[],"owner":{"account_id":11344748,"reputation":531,"user_id":11721208,"display_name":"Shritam Kumar Mund"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632206073,"creation_date":1632206073,"answer_id":69264361,"question_id":31841509,"body_markdown":"**Step:1**\r\n\r\nCheck the java vesrion on from the terminal.\r\n\r\n    java -version\r\nIf you see the `bash: java: command not found`,which mean you don&#39;t have java installed in your system.\r\n\r\n**Step:2**\r\n\r\nInstall Java using the following command,\r\n\r\n    sudo apt-get install default-jdk\r\n\r\n**Step:3**\r\n\r\nNo check java version, you&#39;ll see the version have been downloaded.\r\n\r\n    java -version\r\nresult:\r\n\r\n    openjdk version &quot;11.0.11&quot; 2021-04-20\r\n    OpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)\r\n    OpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)\r\n\r\n**Step:4**\r\n\r\nNow run the pyspark code, \r\nyou&#39;ll never see such error.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p><strong>Step:1</strong></p>\n<p>Check the java vesrion on from the terminal.</p>\n<pre><code>java -version\n</code></pre>\n<p>If you see the <code>bash: java: command not found</code>,which mean you don't have java installed in your system.</p>\n<p><strong>Step:2</strong></p>\n<p>Install Java using the following command,</p>\n<pre><code>sudo apt-get install default-jdk\n</code></pre>\n<p><strong>Step:3</strong></p>\n<p>No check java version, you'll see the version have been downloaded.</p>\n<pre><code>java -version\n</code></pre>\n<p>result:</p>\n<pre><code>openjdk version &quot;11.0.11&quot; 2021-04-20\nOpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)\nOpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)\n</code></pre>\n<p><strong>Step:4</strong></p>\n<p>Now run the pyspark code,\nyou'll never see such error.</p>\n"},{"comments":[{"owner":{"account_id":15511830,"reputation":151,"user_id":11190409,"display_name":"Pechi"},"score":0,"creation_date":1665940294,"post_id":70407748,"comment_id":130811704,"body_markdown":"&quot;in directories without blank spaces&quot; - life saving comment. Thank you!","body":"&quot;in directories without blank spaces&quot; - life saving comment. Thank you!"}],"tags":[],"owner":{"account_id":6836117,"reputation":139,"user_id":5258038,"display_name":"CAV"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1639867879,"creation_date":1639867879,"answer_id":70407748,"question_id":31841509,"body_markdown":"There are many valuable hints here, however, none solved my problem completely so I will show the procedure that worked for me working in an __Anaconda Jupyter Notebook__ on __Windows__:\r\n\r\n- Download and install java and pyspark in directories without blank spaces.\r\n- [maybe unnecessary] In the anaconda prompt, type `where conda` and `where python` and add the paths of the .exe files&#39; directories to your Path variable using the Windows environmental variables tool. Add also the variables `JAVA_HOME` and `SPARK_HOME` there with their corresponding paths.\r\n- Even doing so, I had to set these variables manually from within the Notebook along with `PYSPARK_SUBMIT_ARGS` (use your own paths for `SPARK_HOME` and `JAVA_HOME`):\r\n\r\n`import os`\\\r\n`os.environ[&quot;SPARK_HOME&quot;] = r&quot;C:\\Spark\\spark-3.2.0-bin-hadoop3.2&quot;`\\\r\n`os.environ[&quot;PYSPARK_SUBMIT_ARGS&quot;] = &quot;--master local[3] pyspark-shell&quot;`\\\r\n`os.environ[&quot;JAVA_HOME&quot;] = r&quot;C:\\Java\\jre1.8.0_311&quot;`\r\n\r\n- Install findspark from the notebook with `!pip install findspark`.\r\n\r\n- Run `import findspark` and `findspark.init()`\r\n\r\n- Run `from pyspark.sql import SparkSession` and `spark = SparkSession.builder.getOrCreate()`\r\n\r\nSome useful links:\r\n\r\nhttps://towardsdatascience.com/installing-apache-pyspark-on-windows-10-f5f0c506bea1\r\n\r\nhttps://sparkbyexamples.com/pyspark/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-port-number/\r\n\r\nhttps://www.datacamp.com/community/tutorials/installing-anaconda-windows","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>There are many valuable hints here, however, none solved my problem completely so I will show the procedure that worked for me working in an <strong>Anaconda Jupyter Notebook</strong> on <strong>Windows</strong>:</p>\n<ul>\n<li>Download and install java and pyspark in directories without blank spaces.</li>\n<li>[maybe unnecessary] In the anaconda prompt, type <code>where conda</code> and <code>where python</code> and add the paths of the .exe files' directories to your Path variable using the Windows environmental variables tool. Add also the variables <code>JAVA_HOME</code> and <code>SPARK_HOME</code> there with their corresponding paths.</li>\n<li>Even doing so, I had to set these variables manually from within the Notebook along with <code>PYSPARK_SUBMIT_ARGS</code> (use your own paths for <code>SPARK_HOME</code> and <code>JAVA_HOME</code>):</li>\n</ul>\n<p><code>import os</code><br />\n<code>os.environ[&quot;SPARK_HOME&quot;] = r&quot;C:\\Spark\\spark-3.2.0-bin-hadoop3.2&quot;</code><br />\n<code>os.environ[&quot;PYSPARK_SUBMIT_ARGS&quot;] = &quot;--master local[3] pyspark-shell&quot;</code><br />\n<code>os.environ[&quot;JAVA_HOME&quot;] = r&quot;C:\\Java\\jre1.8.0_311&quot;</code></p>\n<ul>\n<li><p>Install findspark from the notebook with <code>!pip install findspark</code>.</p>\n</li>\n<li><p>Run <code>import findspark</code> and <code>findspark.init()</code></p>\n</li>\n<li><p>Run <code>from pyspark.sql import SparkSession</code> and <code>spark = SparkSession.builder.getOrCreate()</code></p>\n</li>\n</ul>\n<p>Some useful links:</p>\n<p><a href=\"https://towardsdatascience.com/installing-apache-pyspark-on-windows-10-f5f0c506bea1\" rel=\"noreferrer\">https://towardsdatascience.com/installing-apache-pyspark-on-windows-10-f5f0c506bea1</a></p>\n<p><a href=\"https://sparkbyexamples.com/pyspark/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-port-number/\" rel=\"noreferrer\">https://sparkbyexamples.com/pyspark/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-port-number/</a></p>\n<p><a href=\"https://www.datacamp.com/community/tutorials/installing-anaconda-windows\" rel=\"noreferrer\">https://www.datacamp.com/community/tutorials/installing-anaconda-windows</a></p>\n"},{"comments":[{"owner":{"account_id":16060540,"reputation":83,"user_id":11591521,"display_name":"Ray"},"score":0,"creation_date":1640771064,"post_id":70517646,"comment_id":124653636,"body_markdown":"[how to fix your cmd](https://stackoverflow.com/questions/66335300/cmd-crashes-with-exit-code-1-after-uninstalling-anaconda)","body":"<a href=\"https://stackoverflow.com/questions/66335300/cmd-crashes-with-exit-code-1-after-uninstalling-anaconda\">how to fix your cmd</a>"},{"owner":{"account_id":7115457,"reputation":1071,"user_id":5441932,"accept_rate":69,"display_name":"konsolas"},"score":0,"creation_date":1641145014,"post_id":70517646,"comment_id":124727468,"body_markdown":"This does not really answer the question. If you have a different question, you can ask it by clicking [Ask Question](https://stackoverflow.com/questions/ask). To get notified when this question gets new answers, you can [follow this question](https://meta.stackexchange.com/q/345661). Once you have enough [reputation](https://stackoverflow.com/help/whats-reputation), you can also [add a bounty](https://stackoverflow.com/help/privileges/set-bounties) to draw more attention to this question. - [From Review](/review/late-answers/30695717)","body":"This does not really answer the question. If you have a different question, you can ask it by clicking <a href=\"https://stackoverflow.com/questions/ask\">Ask Question</a>. To get notified when this question gets new answers, you can <a href=\"https://meta.stackexchange.com/q/345661\">follow this question</a>. Once you have enough <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a>, you can also <a href=\"https://stackoverflow.com/help/privileges/set-bounties\">add a bounty</a> to draw more attention to this question. - <a href=\"/review/late-answers/30695717\">From Review</a>"}],"tags":[],"owner":{"account_id":16060540,"reputation":83,"user_id":11591521,"display_name":"Ray"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640771017,"creation_date":1640771017,"answer_id":70517646,"question_id":31841509,"body_markdown":"I met this problem and actually not due to the JAVE_HOME setting. i assume you are using windows, and using Anaconda as your python tools. Please check whether you can use command prompt. I cannot run spark due to the crash of cmd. After fix this, spark can work well on my pc.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I met this problem and actually not due to the JAVE_HOME setting. i assume you are using windows, and using Anaconda as your python tools. Please check whether you can use command prompt. I cannot run spark due to the crash of cmd. After fix this, spark can work well on my pc.</p>\n"},{"tags":[],"owner":{"account_id":10664885,"reputation":111,"user_id":7851787,"display_name":"Shashi Kumar Singh"},"comment_count":0,"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1648450550,"creation_date":1648200023,"answer_id":71614604,"question_id":31841509,"body_markdown":"If you are using Jupyter notebook from the window machine.\r\n\r\njust use the following code\r\n\r\n    spark =SparkSession.builder.appName(&#39;myapp&#39;).getOrCreate\r\n\r\n**Don&#39;t use like**\r\n\r\n    spark =SparkSession.builder.appName(&#39;myapp&#39;).getOrCreate()","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>If you are using Jupyter notebook from the window machine.</p>\n<p>just use the following code</p>\n<pre><code>spark =SparkSession.builder.appName('myapp').getOrCreate\n</code></pre>\n<p><strong>Don't use like</strong></p>\n<pre><code>spark =SparkSession.builder.appName('myapp').getOrCreate()\n</code></pre>\n"},{"comments":[{"owner":{"account_id":69533,"reputation":32924,"user_id":202229,"accept_rate":74,"display_name":"smci"},"score":1,"creation_date":1668164467,"post_id":74398918,"comment_id":131344674,"body_markdown":"Be aware Java 8 is not getting all the security updates, only critical patches. Medium-term you want to migrate to Java 11.","body":"Be aware Java 8 is not getting all the security updates, only critical patches. Medium-term you want to migrate to Java 11."}],"tags":[],"owner":{"account_id":15496633,"reputation":3080,"user_id":11179336,"display_name":"Ajeet Verma"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668149240,"creation_date":1668149240,"answer_id":74398918,"question_id":31841509,"body_markdown":"I was having the same problem, tried many different things but the solution that worked for me was to simply install java 8 (and uninstall any other version of java if any on your machine.)\r\n\r\n**Step 1**: install java 8\r\n[Download java 8 here][1]\r\n\r\n\r\nnote: download x64 Installer for windows\r\n[![enter image description here][2]][2]\r\n**Step 2**: set JAVA_HOME environment variable.\r\n\r\nfor example,\r\n\r\n    set JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_351 \r\n\r\n\r\n  [1]: https://www.oracle.com/java/technologies/downloads/#java8-windows\r\n  [2]: https://i.stack.imgur.com/Gvf6z.png\r\n\r\nThat&#39;s all. With these 2 simple steps, I was able to fix the problem.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I was having the same problem, tried many different things but the solution that worked for me was to simply install java 8 (and uninstall any other version of java if any on your machine.)</p>\n<p><strong>Step 1</strong>: install java 8\n<a href=\"https://www.oracle.com/java/technologies/downloads/#java8-windows\" rel=\"nofollow noreferrer\">Download java 8 here</a></p>\n<p>note: download x64 Installer for windows\n<a href=\"https://i.stack.imgur.com/Gvf6z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gvf6z.png\" alt=\"enter image description here\" /></a>\n<strong>Step 2</strong>: set JAVA_HOME environment variable.</p>\n<p>for example,</p>\n<pre><code>set JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_351 \n</code></pre>\n<p>That's all. With these 2 simple steps, I was able to fix the problem.</p>\n"},{"tags":[],"owner":{"account_id":3873970,"reputation":19780,"user_id":4281353,"accept_rate":69,"display_name":"mon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675888038,"creation_date":1675886234,"answer_id":75391117,"question_id":31841509,"body_markdown":"# Background\r\n\r\nThe error ```Java gateway process exited before sending the driver its port number``` occurs in [SPARK_HOME/python/lib/pyspark.zip/pyspark/java_gateway.py][1]. \r\n\r\n```\r\n            if not on_windows:\r\n                # Don&#39;t send ctrl-c / SIGINT to the Java gateway:\r\n                def preexec_func():\r\n                    signal.signal(signal.SIGINT, signal.SIG_IGN)\r\n\r\n                popen_kwargs[&quot;preexec_fn&quot;] = preexec_func\r\n                proc = Popen(command, **popen_kwargs)\r\n            else:\r\n                # preexec_fn not supported on Windows\r\n                proc = Popen(command, **popen_kwargs)\r\n\r\n            # Wait for the file to appear, or for the process to exit, whichever happens first.\r\n            while not proc.poll() and not os.path.isfile(conn_info_file):\r\n                time.sleep(0.1)\r\n\r\n            if not os.path.isfile(conn_info_file):\r\n                raise RuntimeError(&quot;Java gateway process exited before sending its port number&quot;)      # &lt;-----\r\n```\r\n\r\nThe code simulates this pyspark process invocation to test if the PySpark has been started.\r\n\r\n\r\n# Test \r\n\r\nRun the code below to make sure pyspark is invoked. This is specific to Spark installed with homebrew on Mac Apple Silicon but the idea and approach will be applicable to other platforms. The Spark version is 3.3.1. Need to change the versions accordingly.\r\n\r\n\r\n```\r\nimport os\r\nimport shutil\r\nimport signal\r\nimport sys\r\nimport tempfile\r\nimport time\r\nfrom subprocess import Popen, PIPE\r\n\r\n# --------------------------------------------------------------------------------\r\n# Constant\r\n# --------------------------------------------------------------------------------\r\nSPARK_HOME = &quot;/opt/homebrew/Cellar/apache-spark/3.3.1/libexec&quot;\r\nJAVA_HOME = &#39;/opt/homebrew/opt/openjdk&#39;\r\n\r\n# --------------------------------------------------------------------------------\r\n# Environment Variables\r\n# NOTE:\r\n# SPARK_HOME must be set to /opt/homebrew/Cellar/apache-spark/3.3.1/libexec&quot;,\r\n# NOT /opt/homebrew/Cellar/apache-spark/3.3.1&quot;.\r\n# Otherwise Java gateway process exited before sending its port number in java_gateway.py\r\n# --------------------------------------------------------------------------------\r\nos.environ[&#39;SPARK_HOME&#39;] = SPARK_HOME\r\nos.environ[&#39;JAVA_HOME&#39;] = JAVA_HOME\r\nsys.path.extend([\r\n    f&quot;{SPARK_HOME}/python/lib/py4j-0.10.9.5-src.zip&quot;,\r\n    f&quot;{SPARK_HOME}/python/lib/pyspark.zip&quot;,\r\n])\r\n\r\n\r\n# --------------------------------------------------------------------------------\r\n# Pyspark Modules\r\n# --------------------------------------------------------------------------------\r\nfrom pyspark.serializers import read_int, UTF8Deserializer\r\n\r\n\r\n# --------------------------------------------------------------------------------\r\n#\r\n# --------------------------------------------------------------------------------\r\ndef preexec_func():\r\n    signal.signal(signal.SIGINT, signal.SIG_IGN)\r\n\r\n\r\ndef run_pyspark():\r\n    &quot;&quot;&quot;\r\n    &quot;&quot;&quot;\r\n    pyspark_command = [f&#39;{SPARK_HOME}/bin/spark-submit&#39;, &#39;--master&#39;, &#39;local[*]&#39;, &#39;pyspark-shell&#39;]\r\n\r\n    # Create a temporary directory where the gateway server should write the connection\r\n    # information.\r\n    proc = None\r\n    conn_info_dir = tempfile.mkdtemp()\r\n    try:\r\n        fd, conn_info_file = tempfile.mkstemp(dir=conn_info_dir)\r\n        os.close(fd)\r\n        os.unlink(conn_info_file)\r\n\r\n        env = dict(os.environ)\r\n        env[&quot;_PYSPARK_DRIVER_CONN_INFO_PATH&quot;] = conn_info_file\r\n\r\n        # Launch the Java gateway.\r\n        popen_kwargs = {&quot;stdin&quot;: PIPE, &quot;env&quot;: env}\r\n        # We open a pipe to stdin so that the Java gateway can die when the pipe is broken\r\n        # We always set the necessary environment variables.\r\n\r\n        print(f&quot;\\nrun pyspark command line {pyspark_command}&quot;)\r\n        popen_kwargs[&quot;preexec_fn&quot;] = preexec_func\r\n        proc = Popen(pyspark_command, **popen_kwargs)\r\n\r\n        # Wait for the file to appear, or for the process to exit, whichever happens first.\r\n        count: int = 5\r\n        while not proc.poll() and not os.path.isfile(conn_info_file):\r\n            print(&quot;waiting for pyspark to start...&quot;)\r\n            count -= 1\r\n            if count &lt; 0:\r\n                break\r\n\r\n            time.sleep(1)\r\n\r\n        if not os.path.isfile(conn_info_file):\r\n            raise RuntimeError(&quot;Java gateway process exited before sending its port number&quot;)\r\n\r\n        with open(conn_info_file, &quot;rb&quot;) as info:\r\n            gateway_port = read_int(info)\r\n            gateway_secret = UTF8Deserializer().loads(info)\r\n\r\n        out, err = proc.communicate()\r\n        print(&quot;-&quot;*80)\r\n        print(f&quot;pyspark started with pid {proc.pid}&quot;)\r\n        print(f&quot;spark process port {gateway_port}&quot;)\r\n    finally:\r\n        shutil.rmtree(conn_info_dir)\r\n        if proc:\r\n            proc.kill()\r\n\r\n\r\ndef test():\r\n    run_pyspark()\r\n\r\n\r\nif __name__ == &quot;__main__&quot;:\r\n    test()\r\n```\r\n\r\n\r\n# Environment\r\n\r\n```\r\nMac OS Ventua 13.0.1\r\nPython 3.9.13\r\nPySpark 3.3.1\r\nOpenJDK Runtime Environment (AdoptOpenJDK)(build 1.8.0_292-b10)\r\nScala code runner version 3.2.2\r\n```\r\n\r\nJDK 8, Scala, Spark have been installed with brew.\r\n```\r\nbrew install --cask adoptopenjdk8\r\nbrew install scala\r\nbrew install apache-spark\r\n```\r\n\r\nJava process is allowed to get incoming connections at System Preferences &gt; Security &gt; Firewall.\r\n\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n# References\r\n\r\n* [PySpark Installation](https://spark.apache.org/docs/latest/api/python/getting_started/install.html#manually-downloading)\r\n\r\n&gt; Ensure the SPARK_HOME environment variable points to the directory where the tar file has been extracted. \r\n&gt; Update PYTHONPATH environment variable such that it can find the PySpark and Py4J under SPARK_HOME/python/lib. One example of doing this is shown below:\r\n\r\n\r\n  [1]: https://github.com/apache/spark/blob/master/python/pyspark/java_gateway.py\r\n  [2]: https://i.stack.imgur.com/oodKMm.png","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<h1>Background</h1>\n<p>The error <code>Java gateway process exited before sending the driver its port number</code> occurs in <a href=\"https://github.com/apache/spark/blob/master/python/pyspark/java_gateway.py\" rel=\"nofollow noreferrer\">SPARK_HOME/python/lib/pyspark.zip/pyspark/java_gateway.py</a>.</p>\n<pre><code>            if not on_windows:\n                # Don't send ctrl-c / SIGINT to the Java gateway:\n                def preexec_func():\n                    signal.signal(signal.SIGINT, signal.SIG_IGN)\n\n                popen_kwargs[&quot;preexec_fn&quot;] = preexec_func\n                proc = Popen(command, **popen_kwargs)\n            else:\n                # preexec_fn not supported on Windows\n                proc = Popen(command, **popen_kwargs)\n\n            # Wait for the file to appear, or for the process to exit, whichever happens first.\n            while not proc.poll() and not os.path.isfile(conn_info_file):\n                time.sleep(0.1)\n\n            if not os.path.isfile(conn_info_file):\n                raise RuntimeError(&quot;Java gateway process exited before sending its port number&quot;)      # &lt;-----\n</code></pre>\n<p>The code simulates this pyspark process invocation to test if the PySpark has been started.</p>\n<h1>Test</h1>\n<p>Run the code below to make sure pyspark is invoked. This is specific to Spark installed with homebrew on Mac Apple Silicon but the idea and approach will be applicable to other platforms. The Spark version is 3.3.1. Need to change the versions accordingly.</p>\n<pre><code>import os\nimport shutil\nimport signal\nimport sys\nimport tempfile\nimport time\nfrom subprocess import Popen, PIPE\n\n# --------------------------------------------------------------------------------\n# Constant\n# --------------------------------------------------------------------------------\nSPARK_HOME = &quot;/opt/homebrew/Cellar/apache-spark/3.3.1/libexec&quot;\nJAVA_HOME = '/opt/homebrew/opt/openjdk'\n\n# --------------------------------------------------------------------------------\n# Environment Variables\n# NOTE:\n# SPARK_HOME must be set to /opt/homebrew/Cellar/apache-spark/3.3.1/libexec&quot;,\n# NOT /opt/homebrew/Cellar/apache-spark/3.3.1&quot;.\n# Otherwise Java gateway process exited before sending its port number in java_gateway.py\n# --------------------------------------------------------------------------------\nos.environ['SPARK_HOME'] = SPARK_HOME\nos.environ['JAVA_HOME'] = JAVA_HOME\nsys.path.extend([\n    f&quot;{SPARK_HOME}/python/lib/py4j-0.10.9.5-src.zip&quot;,\n    f&quot;{SPARK_HOME}/python/lib/pyspark.zip&quot;,\n])\n\n\n# --------------------------------------------------------------------------------\n# Pyspark Modules\n# --------------------------------------------------------------------------------\nfrom pyspark.serializers import read_int, UTF8Deserializer\n\n\n# --------------------------------------------------------------------------------\n#\n# --------------------------------------------------------------------------------\ndef preexec_func():\n    signal.signal(signal.SIGINT, signal.SIG_IGN)\n\n\ndef run_pyspark():\n    &quot;&quot;&quot;\n    &quot;&quot;&quot;\n    pyspark_command = [f'{SPARK_HOME}/bin/spark-submit', '--master', 'local[*]', 'pyspark-shell']\n\n    # Create a temporary directory where the gateway server should write the connection\n    # information.\n    proc = None\n    conn_info_dir = tempfile.mkdtemp()\n    try:\n        fd, conn_info_file = tempfile.mkstemp(dir=conn_info_dir)\n        os.close(fd)\n        os.unlink(conn_info_file)\n\n        env = dict(os.environ)\n        env[&quot;_PYSPARK_DRIVER_CONN_INFO_PATH&quot;] = conn_info_file\n\n        # Launch the Java gateway.\n        popen_kwargs = {&quot;stdin&quot;: PIPE, &quot;env&quot;: env}\n        # We open a pipe to stdin so that the Java gateway can die when the pipe is broken\n        # We always set the necessary environment variables.\n\n        print(f&quot;\\nrun pyspark command line {pyspark_command}&quot;)\n        popen_kwargs[&quot;preexec_fn&quot;] = preexec_func\n        proc = Popen(pyspark_command, **popen_kwargs)\n\n        # Wait for the file to appear, or for the process to exit, whichever happens first.\n        count: int = 5\n        while not proc.poll() and not os.path.isfile(conn_info_file):\n            print(&quot;waiting for pyspark to start...&quot;)\n            count -= 1\n            if count &lt; 0:\n                break\n\n            time.sleep(1)\n\n        if not os.path.isfile(conn_info_file):\n            raise RuntimeError(&quot;Java gateway process exited before sending its port number&quot;)\n\n        with open(conn_info_file, &quot;rb&quot;) as info:\n            gateway_port = read_int(info)\n            gateway_secret = UTF8Deserializer().loads(info)\n\n        out, err = proc.communicate()\n        print(&quot;-&quot;*80)\n        print(f&quot;pyspark started with pid {proc.pid}&quot;)\n        print(f&quot;spark process port {gateway_port}&quot;)\n    finally:\n        shutil.rmtree(conn_info_dir)\n        if proc:\n            proc.kill()\n\n\ndef test():\n    run_pyspark()\n\n\nif __name__ == &quot;__main__&quot;:\n    test()\n</code></pre>\n<h1>Environment</h1>\n<pre><code>Mac OS Ventua 13.0.1\nPython 3.9.13\nPySpark 3.3.1\nOpenJDK Runtime Environment (AdoptOpenJDK)(build 1.8.0_292-b10)\nScala code runner version 3.2.2\n</code></pre>\n<p>JDK 8, Scala, Spark have been installed with brew.</p>\n<pre><code>brew install --cask adoptopenjdk8\nbrew install scala\nbrew install apache-spark\n</code></pre>\n<p>Java process is allowed to get incoming connections at System Preferences &gt; Security &gt; Firewall.</p>\n<p><a href=\"https://i.stack.imgur.com/oodKMm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oodKMm.png\" alt=\"enter image description here\" /></a></p>\n<h1>References</h1>\n<ul>\n<li><a href=\"https://spark.apache.org/docs/latest/api/python/getting_started/install.html#manually-downloading\" rel=\"nofollow noreferrer\">PySpark Installation</a></li>\n</ul>\n<blockquote>\n<p>Ensure the SPARK_HOME environment variable points to the directory where the tar file has been extracted.\nUpdate PYTHONPATH environment variable such that it can find the PySpark and Py4J under SPARK_HOME/python/lib. One example of doing this is shown below:</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":17606614,"reputation":2398,"user_id":12775531,"display_name":"s510"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680252646,"creation_date":1680252646,"answer_id":75896573,"question_id":31841509,"body_markdown":"This error indicates there is a **mismatch between PySpark and Java version**. Both of them are not compatible. **See the below compatibility matrix.**\r\n\r\n\r\n    PySpark Version\t Min Java Version\r\n    -------------------------------------\r\n    2.0.x - 2.2.x\t Java 7\r\n    2.3.x - 2.4.x\t Java 8\r\n    3.0.x - 3.1.x\t Java 8\r\n    3.2.x\t         Java 11\r\n\r\nCheck your JAVA version\r\n**If it is 17, then you need PySpark 3.3 at least.\r\nSo upgrade the PySpark**. ","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>This error indicates there is a <strong>mismatch between PySpark and Java version</strong>. Both of them are not compatible. <strong>See the below compatibility matrix.</strong></p>\n<pre><code>PySpark Version  Min Java Version\n-------------------------------------\n2.0.x - 2.2.x    Java 7\n2.3.x - 2.4.x    Java 8\n3.0.x - 3.1.x    Java 8\n3.2.x            Java 11\n</code></pre>\n<p>Check your JAVA version\n<strong>If it is 17, then you need PySpark 3.3 at least.\nSo upgrade the PySpark</strong>.</p>\n"}],"owner":{"account_id":4541604,"reputation":2895,"user_id":3689314,"accept_rate":74,"display_name":"mt88"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361724,"favorite_count":0,"down_vote_count":0,"up_vote_count":129,"answer_count":42,"score":129,"last_activity_date":1689784106,"creation_date":1438803941,"question_id":31841509,"body_markdown":"I&#39;m trying to run pyspark on my macbook air. When i try starting it up I get the error:\r\n\r\n    Exception: Java gateway process exited before sending the driver its port number\r\n\r\nwhen sc = SparkContext() is being called upon startup. I have tried running the following commands:\r\n\r\n    ./bin/pyspark\r\n    ./bin/spark-shell\r\n    export PYSPARK_SUBMIT_ARGS=&quot;--master local[2] pyspark-shell&quot;\r\n\r\nwith no avail. I have also looked here:\r\n\r\n https://stackoverflow.com/questions/31825911/spark-python-java-gateway-process-exited-before-sending-the-driver-its-port \r\n    \r\n\r\nbut the question has never been answered. Please help! Thanks.","title":"Pyspark: Exception: Java gateway process exited before sending the driver its port number","body":"<p>I'm trying to run pyspark on my macbook air. When i try starting it up I get the error:</p>\n\n<pre><code>Exception: Java gateway process exited before sending the driver its port number\n</code></pre>\n\n<p>when sc = SparkContext() is being called upon startup. I have tried running the following commands:</p>\n\n<pre><code>./bin/pyspark\n./bin/spark-shell\nexport PYSPARK_SUBMIT_ARGS=\"--master local[2] pyspark-shell\"\n</code></pre>\n\n<p>with no avail. I have also looked here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31825911/spark-python-java-gateway-process-exited-before-sending-the-driver-its-port\">Spark + Python - Java gateway process exited before sending the driver its port number?</a> </p>\n\n<p>but the question has never been answered. Please help! Thanks.</p>\n"},{"tags":["java","loops","counter"],"comments":[{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":1,"creation_date":1689777305,"post_id":76722451,"comment_id":135261959,"body_markdown":"Please post your code here as text, not a screenshot. Also, check out [this article]https://ericlippert.com/2014/03/05/how-to-debug-small-programs/) for tips on debugging your code.","body":"Please post your code here as text, not a screenshot. Also, check out [this article]<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-progra&zwnj;&#8203;ms</a>) for tips on debugging your code."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689777306,"post_id":76722451,"comment_id":135261960,"body_markdown":"Never post images of code. Post it as text.","body":"Never post images of code. Post it as text."},{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":0,"creation_date":1689777402,"post_id":76722451,"comment_id":135261989,"body_markdown":"Welcome to Stack Overflow!  Relevant code and error messages need to be included in your question *as text*, [not as pictures of text](https://meta.stackoverflow.com/q/285551/328193).  Just linking to screen shots makes it more difficult for people to help you.  To learn more about this community and how we can help you, please start with the [tour] and read [ask] and its linked resources.","body":"Welcome to Stack Overflow!  Relevant code and error messages need to be included in your question <i>as text</i>, <a href=\"https://meta.stackoverflow.com/q/285551/328193\">not as pictures of text</a>.  Just linking to screen shots makes it more difficult for people to help you.  To learn more about this community and how we can help you, please start with the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and its linked resources."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1689777407,"post_id":76722451,"comment_id":135261991,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a>"},{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":1,"creation_date":1689777416,"post_id":76722451,"comment_id":135261998,"body_markdown":"Additionally... This is a good opportunity for you to start familiarizing yourself with [using a debugger](https://stackoverflow.com/q/25385173/328193).  When you step through the code in a debugger, which operation first produces an unexpected result?  What were the values used in that operation?  What was the result?  What result was expected?  Why?","body":"Additionally... This is a good opportunity for you to start familiarizing yourself with <a href=\"https://stackoverflow.com/q/25385173/328193\">using a debugger</a>.  When you step through the code in a debugger, which operation first produces an unexpected result?  What were the values used in that operation?  What was the result?  What result was expected?  Why?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1689777428,"post_id":76722451,"comment_id":135262002,"body_markdown":"`i%num == 0` for the numbers in the range of `[2, num]` will only ever be true once, when `i == num`. I&#39;d also encourage using brackets/braces a little more liberally.","body":"<code>i%num == 0</code> for the numbers in the range of <code>[2, num]</code> will only ever be true once, when <code>i == num</code>. I&#39;d also encourage using brackets/braces a little more liberally."},{"owner":{"account_id":29050025,"reputation":3,"user_id":22253056,"display_name":"HRISHIKESH DEY"},"score":0,"creation_date":1689778705,"post_id":76722451,"comment_id":135262324,"body_markdown":"Thank you so much for the enlightenment as a beginner I am yet to become familiar with the platform.","body":"Thank you so much for the enlightenment as a beginner I am yet to become familiar with the platform."}],"answers":[{"tags":[],"owner":{"account_id":24698116,"reputation":28,"user_id":18589783,"display_name":"Abishek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689784060,"creation_date":1689782959,"answer_id":76723273,"question_id":76722451,"body_markdown":"Change the if condition or statement from ```if(i%num == 0)``` to ```if(num%i == 0)```. It will lead to correct output. In our case input is number 10 it is divisible by number 2 and number 5. Then the program will print 10 is not an prime number.","title":"Why is my integer variable count not incremenating and adding by 1 in for loop","body":"<p>Change the if condition or statement from <code>if(i%num == 0)</code> to <code>if(num%i == 0)</code>. It will lead to correct output. In our case input is number 10 it is divisible by number 2 and number 5. Then the program will print 10 is not an prime number.</p>\n"}],"owner":{"account_id":29050025,"reputation":3,"user_id":22253056,"display_name":"HRISHIKESH DEY"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76723273,"answer_count":1,"score":-1,"last_activity_date":1689784060,"creation_date":1689777266,"question_id":76722451,"body_markdown":"(https://i.stack.imgur.com/kjquh.png)\r\n\r\nTrying to increment the integer variable by count each time the if condition returned true.\r\n\r\nit is not working properly the count is showing zero at all times \r\n\r\ni am trying to find the program for prime number using loop\r\n","title":"Why is my integer variable count not incremenating and adding by 1 in for loop","body":"<p>(<a href=\"https://i.stack.imgur.com/kjquh.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/kjquh.png</a>)</p>\n<p>Trying to increment the integer variable by count each time the if condition returned true.</p>\n<p>it is not working properly the count is showing zero at all times</p>\n<p>i am trying to find the program for prime number using loop</p>\n"},{"tags":["java","databricks","databricks-connect"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1638195201,"post_id":70153343,"comment_id":124016199,"body_markdown":"It means that library is trying to hack a Java core library, which is not allowed starting in Java 9.  The easiest solution is to stick with Java 8.","body":"It means that library is trying to hack a Java core library, which is not allowed starting in Java 9.  The easiest solution is to stick with Java 8."}],"answers":[{"tags":[],"owner":{"account_id":9963,"reputation":82992,"user_id":18627,"display_name":"Alex Ott"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1638203117,"creation_date":1638203117,"answer_id":70157929,"question_id":70153343,"body_markdown":"Databricks Runtimes and databricks-connect won&#39;t work with Java 14. Only DBR 10.x have an experimental support for Java 11, but I doubt that it&#39;s supported for databricks-connect.\r\n\r\nYou need to install Java 8 to use databricks-connect.","title":"Unable to make private java.nio.DirectByteBuffer(long,int) accessible","body":"<p>Databricks Runtimes and databricks-connect won't work with Java 14. Only DBR 10.x have an experimental support for Java 11, but I doubt that it's supported for databricks-connect.</p>\n<p>You need to install Java 8 to use databricks-connect.</p>\n"},{"tags":[],"owner":{"account_id":2448404,"reputation":8258,"user_id":2553191,"accept_rate":97,"display_name":"ehacinom"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689783976,"creation_date":1689783976,"answer_id":76723405,"question_id":70153343,"body_markdown":"I had to \r\n\r\n - Install Java 8, eg\r\n```\r\nbrew install --cask adoptopenjdk/openjdk/adoptopenjdk8\r\n```\r\n - add $JAVA_HOME to my ~/.zshrc\r\n```\r\nexport JAVA_HOME=&#39;/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home&#39;\r\nexport JAVA_HOME=$(/usr/libexec/java_home -v 1.8)\r\n```\r\n - remove any other jdk installs\r\n```\r\nls /Library/Java/JavaVirtualMachines\r\nsudo rm -rf NONJDK8.jdk\r\n```\r\n\r\nThe 3rd bit is important! It did not work until I removed other-versioned jdks.","title":"Unable to make private java.nio.DirectByteBuffer(long,int) accessible","body":"<p>I had to</p>\n<ul>\n<li>Install Java 8, eg</li>\n</ul>\n<pre><code>brew install --cask adoptopenjdk/openjdk/adoptopenjdk8\n</code></pre>\n<ul>\n<li>add $JAVA_HOME to my ~/.zshrc</li>\n</ul>\n<pre><code>export JAVA_HOME='/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home'\nexport JAVA_HOME=$(/usr/libexec/java_home -v 1.8)\n</code></pre>\n<ul>\n<li>remove any other jdk installs</li>\n</ul>\n<pre><code>ls /Library/Java/JavaVirtualMachines\nsudo rm -rf NONJDK8.jdk\n</code></pre>\n<p>The 3rd bit is important! It did not work until I removed other-versioned jdks.</p>\n"}],"owner":{"account_id":9519692,"reputation":820,"user_id":7074969,"display_name":"anthino12"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11699,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":70157929,"answer_count":2,"score":11,"last_activity_date":1689783976,"creation_date":1638182895,"question_id":70153343,"body_markdown":"I&#39;m using Python to access Databricks through `databricks-connect`. Behind the wall, this uses spark which is indeed java based so in order to use this, I need java. The JDK has been downloaded (version 14), set as JAVA_HOME env but when I run the code, I get the following error:\r\n\r\n&gt; Caused by: java.lang.reflect.InaccessibleObjectException: Unable to\r\n&gt; make private java.nio.DirectByteBuffer(long,int) accessible: module\r\n&gt; java.base does not &quot;opens java.nio&quot; to unnamed module @bccb269\r\n\r\nThis is the code where it crashes\r\n```\r\nfrom pyspark.sql import SparkSession\r\nspark = SparkSession.builder.getOrCreate()\r\n```\r\nI googled but couldn&#39;t find this error, I don&#39;t think it&#39;s the first time occurring to me. Any ideas what this error means and how can I fix it?","title":"Unable to make private java.nio.DirectByteBuffer(long,int) accessible","body":"<p>I'm using Python to access Databricks through <code>databricks-connect</code>. Behind the wall, this uses spark which is indeed java based so in order to use this, I need java. The JDK has been downloaded (version 14), set as JAVA_HOME env but when I run the code, I get the following error:</p>\n<blockquote>\n<p>Caused by: java.lang.reflect.InaccessibleObjectException: Unable to\nmake private java.nio.DirectByteBuffer(long,int) accessible: module\njava.base does not &quot;opens java.nio&quot; to unnamed module @bccb269</p>\n</blockquote>\n<p>This is the code where it crashes</p>\n<pre><code>from pyspark.sql import SparkSession\nspark = SparkSession.builder.getOrCreate()\n</code></pre>\n<p>I googled but couldn't find this error, I don't think it's the first time occurring to me. Any ideas what this error means and how can I fix it?</p>\n"},{"tags":["java","spring","scala"],"comments":[{"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"score":0,"creation_date":1689763069,"post_id":76720385,"comment_id":135258265,"body_markdown":"Does this answer your question? [How to use Spring Autowired (or manually wired) in Scala object?](https://stackoverflow.com/questions/8344224/how-to-use-spring-autowired-or-manually-wired-in-scala-object)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/8344224/how-to-use-spring-autowired-or-manually-wired-in-scala-object\">How to use Spring Autowired (or manually wired) in Scala object?</a>"},{"owner":{"account_id":2998939,"reputation":2194,"user_id":2544810,"accept_rate":33,"display_name":"Senthil"},"score":0,"creation_date":1689783922,"post_id":76720385,"comment_id":135263594,"body_markdown":"no,I have a java @\\component, that has many @\\Injected Bean / Components, so need to call the top level @\\Component by creating a object and access it method in Scala. The @\\component is java spring belongs to package org.springframework.stereotype.Component. How to handle @\\component objects / auto wire in Scala ?!","body":"no,I have a java @\\component, that has many @\\Injected Bean / Components, so need to call the top level @\\Component by creating a object and access it method in Scala. The @\\component is java spring belongs to package org.springframework.stereotype.Component. How to handle @\\component objects / auto wire in Scala ?!"},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1689792963,"post_id":76720385,"comment_id":135265401,"body_markdown":"could you provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)?","body":"could you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}],"owner":{"account_id":2998939,"reputation":2194,"user_id":2544810,"accept_rate":33,"display_name":"Senthil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689783604,"creation_date":1689762974,"question_id":76720385,"body_markdown":"In Scala, how to invoke the application context to consume a custom jar library written using org.springframework.stereotype @Component annotation . \r\n\r\nThe @Component is used to create the java class files, i need to invoke there associated methods in the scala. \r\n\r\nAny inputs is appreciated.\r\n\r\nSpring custom library -&gt; Has @component with a method.\r\n\r\nNeed to inject the bean and invoke its associated method in scala.\r\n\r\n\r\n","title":"in Scala, i need to invoke a Java method in the custom component present in spring org.springframework.stereotype","body":"<p>In Scala, how to invoke the application context to consume a custom jar library written using org.springframework.stereotype @Component annotation .</p>\n<p>The @Component is used to create the java class files, i need to invoke there associated methods in the scala.</p>\n<p>Any inputs is appreciated.</p>\n<p>Spring custom library -&gt; Has @component with a method.</p>\n<p>Need to inject the bean and invoke its associated method in scala.</p>\n"},{"tags":["java","google-app-engine","google-cloud-datastore","objectify"],"comments":[{"owner":{"account_id":20715675,"reputation":5404,"user_id":15211203,"display_name":"NoCommandLine"},"score":0,"creation_date":1689790945,"post_id":76722962,"comment_id":135264984,"body_markdown":"In addition to the response from @stickfigure, you can also take a look at the [Bundled Search API](https://cloud.google.com/appengine/docs/legacy/standard/java/search) (see [this document](https://cloud.google.com/appengine/docs/standard/java-gen2/services/access) for second generation JAVA runtimes), if you end up having a need to do a lot of these type of searches across multiple fields","body":"In addition to the response from @stickfigure, you can also take a look at the <a href=\"https://cloud.google.com/appengine/docs/legacy/standard/java/search\" rel=\"nofollow noreferrer\">Bundled Search API</a> (see <a href=\"https://cloud.google.com/appengine/docs/standard/java-gen2/services/access\" rel=\"nofollow noreferrer\">this document</a> for second generation JAVA runtimes), if you end up having a need to do a lot of these type of searches across multiple fields"}],"answers":[{"tags":[],"owner":{"account_id":318652,"reputation":13503,"user_id":635982,"accept_rate":58,"display_name":"stickfigure"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689783248,"creation_date":1689783248,"answer_id":76723308,"question_id":76722962,"body_markdown":"There isn&#39;t a partial match operator in the datastore (ie `LIKE &#39;%foo%&#39;` in sql).\r\n\r\nYou can however create a synthetic index that holds all your potential search terms. Add a field to your entity like this:\r\n\r\n    List&lt;String&gt; searchTerms = new ArrayList&lt;&gt;();\r\n\r\nPopulate it in an `@OnSave` method. Then you can filter by the `searchTerms` field. Be sure to normalize (eg lowercase) both the term generation and the term in the query.\r\n\r\nThe good thing about this approach is that you can put anything you want in there, not just words from the title. If you want the author name, keywords, etc - just add them. You might also choose to ignore stop words like &#39;a&#39;, &#39;the&#39;, &#39;and&#39;, etc. You can use the lucene library to filter out stop words and even perform stemming if you want.","title":"How do I get a entity from the datastore by filtering a string property?","body":"<p>There isn't a partial match operator in the datastore (ie <code>LIKE '%foo%'</code> in sql).</p>\n<p>You can however create a synthetic index that holds all your potential search terms. Add a field to your entity like this:</p>\n<pre><code>List&lt;String&gt; searchTerms = new ArrayList&lt;&gt;();\n</code></pre>\n<p>Populate it in an <code>@OnSave</code> method. Then you can filter by the <code>searchTerms</code> field. Be sure to normalize (eg lowercase) both the term generation and the term in the query.</p>\n<p>The good thing about this approach is that you can put anything you want in there, not just words from the title. If you want the author name, keywords, etc - just add them. You might also choose to ignore stop words like 'a', 'the', 'and', etc. You can use the lucene library to filter out stop words and even perform stemming if you want.</p>\n"}],"owner":{"account_id":29050390,"reputation":1,"user_id":22253354,"display_name":"Karthick"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689783248,"creation_date":1689780745,"question_id":76722962,"body_markdown":"I have few entities in the datastore.\r\nThis is the structure of the enitity.\r\n\r\n\r\n```\r\npublic class YTLink {\r\n    @Id\r\n    String videoId;\r\n    @Index\r\n    String videoTitle;\r\n    @Index\r\n    String videoLink;\r\n    @Index\r\n    String videoThumbnail;\r\n}\r\n```\r\n\r\n\r\nwhen I send a request with a keyword, I should check for the YTLink entities in the datastore which contains that specific keyword in its videoTitle property.\r\n\r\nI&#39;m using Objectify btw.\r\n\r\n\r\nI tried to get all the YTList entities from the datastore and Iterated through that list to check for a match.\r\n\r\n```\r\nList&lt;YTLink&gt; ytLinkList = ObjectifyInitializer.ofy().load().type(YTLink.class).list();\r\n\r\nytLinkList.removeIf(video -&gt; video.getVideoTitle() == null || !video.getVideoTitle().toLowerCase().contains(searchKeyword.trim().toLowerCase()));\r\n```\r\n\r\n\r\nI need to know is there a way to apply filter while retrieving the data, Like\r\nObjectifyInitializer.ofy().load().type(YTLink.class).filter(&quot;videoTitle&quot;,searchKeyword).list();\r\nSomething like this\r\n\r\n\r\nPlease let me know if anyone knows how to filter the entities based on the String property.\r\nThanks in advance.\r\n\r\n","title":"How do I get a entity from the datastore by filtering a string property?","body":"<p>I have few entities in the datastore.\nThis is the structure of the enitity.</p>\n<pre><code>public class YTLink {\n    @Id\n    String videoId;\n    @Index\n    String videoTitle;\n    @Index\n    String videoLink;\n    @Index\n    String videoThumbnail;\n}\n</code></pre>\n<p>when I send a request with a keyword, I should check for the YTLink entities in the datastore which contains that specific keyword in its videoTitle property.</p>\n<p>I'm using Objectify btw.</p>\n<p>I tried to get all the YTList entities from the datastore and Iterated through that list to check for a match.</p>\n<pre><code>List&lt;YTLink&gt; ytLinkList = ObjectifyInitializer.ofy().load().type(YTLink.class).list();\n\nytLinkList.removeIf(video -&gt; video.getVideoTitle() == null || !video.getVideoTitle().toLowerCase().contains(searchKeyword.trim().toLowerCase()));\n</code></pre>\n<p>I need to know is there a way to apply filter while retrieving the data, Like\nObjectifyInitializer.ofy().load().type(YTLink.class).filter(&quot;videoTitle&quot;,searchKeyword).list();\nSomething like this</p>\n<p>Please let me know if anyone knows how to filter the entities based on the String property.\nThanks in advance.</p>\n"},{"tags":["java","runtime","wildfly","classnotfoundexception"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1689803154,"post_id":76722761,"comment_id":135267084,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"display_name":"user22253296"},"score":0,"creation_date":1689847948,"post_id":76722761,"comment_id":135272608,"body_markdown":"finally fixed itself last night maybe needed a cleanup of eclipse","body":"finally fixed itself last night maybe needed a cleanup of eclipse"}],"answers":[{"comments":[{"owner":{"display_name":"user22253296"},"score":0,"creation_date":1689784809,"post_id":76723247,"comment_id":135263780,"body_markdown":"which is your advice?","body":"which is your advice?"},{"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"score":0,"creation_date":1689842386,"post_id":76723247,"comment_id":135271506,"body_markdown":"it depends on what you want to achieve.  WildFly no longer support Java EE 7/8 so in the long term  you will have to migrate to JakartaEE 10 or more. It all depends on your schedule and available time. Note that WildFly 10 is very very old and is not supported since only the latest version is.","body":"it depends on what you want to achieve.  WildFly no longer support Java EE 7/8 so in the long term  you will have to migrate to JakartaEE 10 or more. It all depends on your schedule and available time. Note that WildFly 10 is very very old and is not supported since only the latest version is."}],"tags":[],"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689782770,"creation_date":1689782770,"answer_id":76723247,"question_id":76722761,"body_markdown":"WildFly 27 is JakartaEE 10, given your lopps I think you are using JavaEE 7/_ code.\r\nYou an specify the tzrget version of your code when you compile it if you really need it to be Java 8 compatible.\r\n","title":"ClassNotFound exception wildfly 27","body":"<p>WildFly 27 is JakartaEE 10, given your lopps I think you are using JavaEE 7/_ code.\nYou an specify the tzrget version of your code when you compile it if you really need it to be Java 8 compatible.</p>\n"}],"owner":{"display_name":"user22253296"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689782770,"creation_date":1689779466,"question_id":76722761,"body_markdown":"practically for me the servlet is not working , first using WildFly 10 it gave me an error not having the jre 1.8 I downloaded it but then it gave me another error saying that the class was compiled with a runtime version 63.0 and was not supported , I so I checked which version of Java supported 63 and it came out that it was 19 , I installed etc. I also decided to use wildfly 27 , I started the server but now it no longer gives me the version error but rather tells me that can&#39;t&#160;find&#160;the&#160;class\r\n\r\n\r\nI also tried to use a new project but nothing","title":"ClassNotFound exception wildfly 27","body":"<p>practically for me the servlet is not working , first using WildFly 10 it gave me an error not having the jre 1.8 I downloaded it but then it gave me another error saying that the class was compiled with a runtime version 63.0 and was not supported , I so I checked which version of Java supported 63 and it came out that it was 19 , I installed etc. I also decided to use wildfly 27 , I started the server but now it no longer gives me the version error but rather tells me that can'tfindtheclass</p>\n<p>I also tried to use a new project but nothing</p>\n"},{"tags":["java","spring","mongodb","spring-data","mongorepository"],"answers":[{"comments":[{"owner":{"account_id":161392,"reputation":1160,"user_id":4147392,"display_name":"Luis Costa"},"score":0,"creation_date":1474970961,"post_id":39721643,"comment_id":66741149,"body_markdown":"make sure you have imported log4j","body":"make sure you have imported log4j"},{"owner":{"account_id":4605908,"reputation":144,"user_id":3735424,"accept_rate":61,"display_name":"Vishal A"},"score":2,"creation_date":1519314673,"post_id":39721643,"comment_id":84869966,"body_markdown":"I even imported log4j and tried the same solution, but its not working for me","body":"I even imported log4j and tried the same solution, but its not working for me"},{"owner":{"account_id":6222913,"reputation":194,"user_id":4842055,"display_name":"Ryan_D"},"score":1,"creation_date":1562100995,"post_id":39721643,"comment_id":100269827,"body_markdown":"remove the .MongoTemplate.  It works as logging.level.org.springframework.data.mongodb.core","body":"remove the .MongoTemplate.  It works as logging.level.org.springframework.data.mongodb.core"},{"owner":{"account_id":12212238,"reputation":2370,"user_id":8913704,"accept_rate":100,"display_name":"Artem"},"score":0,"creation_date":1689782411,"post_id":39721643,"comment_id":135263246,"body_markdown":"@VishalA check [my comment](https://stackoverflow.com/a/76723193/8913704), you may need to adjust your main logger configuration.","body":"@VishalA check <a href=\"https://stackoverflow.com/a/76723193/8913704\">my comment</a>, you may need to adjust your main logger configuration."}],"tags":[],"owner":{"account_id":161392,"reputation":1160,"user_id":4147392,"display_name":"Luis Costa"},"comment_count":4,"down_vote_count":0,"up_vote_count":97,"is_accepted":false,"score":97,"last_activity_date":1474970199,"creation_date":1474970199,"answer_id":39721643,"question_id":37118047,"body_markdown":"**I add the line (below) in application.properties and works fine:**\r\n\r\n    logging.level.org.springframework.data.mongodb.core.MongoTemplate=DEBUG\r\n\r\n**for query:**\r\n\r\n    @Query(&quot;{$and: [{&#39;$or&#39; : [{ &#39;name&#39;: {$regex : ?0, $options: &#39;i&#39;}}, {&#39;description&#39;: {$regex : ?1, $options: &#39;i&#39;}}]}, { &#39;deleted&#39; : ?2 }]}&quot;)\r\n\r\n**obtain this log:**\r\n\r\n    2016-09-27 10:53:26.245 DEBUG 13604 --- [nio-9090-exec-3] o.s.data.mongodb.core.MongoTemplate      : find using query: { &quot;$and&quot; : [ { &quot;$or&quot; : [ { &quot;name&quot; : { &quot;$regex&quot; : &quot;c&quot; , &quot;$options&quot; : &quot;i&quot;}} , { &quot;description&quot; : { &quot;$regex&quot; : &quot;c&quot; , &quot;$options&quot; : &quot;i&quot;}}]} , { &quot;deleted&quot; : false}]} fields: null for class: class com.habber.domain.Entity in collection: entities","title":"how to show query while using query annotations with MongoRepository with spring data","body":"<p><strong>I add the line (below) in application.properties and works fine:</strong></p>\n\n<pre><code>logging.level.org.springframework.data.mongodb.core.MongoTemplate=DEBUG\n</code></pre>\n\n<p><strong>for query:</strong></p>\n\n<pre><code>@Query(\"{$and: [{'$or' : [{ 'name': {$regex : ?0, $options: 'i'}}, {'description': {$regex : ?1, $options: 'i'}}]}, { 'deleted' : ?2 }]}\")\n</code></pre>\n\n<p><strong>obtain this log:</strong></p>\n\n<pre><code>2016-09-27 10:53:26.245 DEBUG 13604 --- [nio-9090-exec-3] o.s.data.mongodb.core.MongoTemplate      : find using query: { \"$and\" : [ { \"$or\" : [ { \"name\" : { \"$regex\" : \"c\" , \"$options\" : \"i\"}} , { \"description\" : { \"$regex\" : \"c\" , \"$options\" : \"i\"}}]} , { \"deleted\" : false}]} fields: null for class: class com.habber.domain.Entity in collection: entities\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3247170,"reputation":347,"user_id":2738364,"accept_rate":25,"display_name":"Jeremy Li"},"score":0,"creation_date":1696508042,"post_id":48694296,"comment_id":136163631,"body_markdown":"you saved my life, thanks mate","body":"you saved my life, thanks mate"}],"tags":[],"owner":{"account_id":8563155,"reputation":1009,"user_id":6416551,"display_name":"Wilder Valera"},"comment_count":1,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1518121917,"creation_date":1518121917,"answer_id":48694296,"question_id":37118047,"body_markdown":"For ReactiveMongo add this property to your .properties file\r\n   \r\n    logging.level.org.springframework.data.mongodb.core.ReactiveMongoTemplate=DEBUG","title":"how to show query while using query annotations with MongoRepository with spring data","body":"<p>For ReactiveMongo add this property to your .properties file</p>\n\n<pre><code>logging.level.org.springframework.data.mongodb.core.ReactiveMongoTemplate=DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7245190,"reputation":1455,"user_id":5527341,"display_name":"lin"},"comment_count":0,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1554811238,"creation_date":1519299467,"answer_id":48926473,"question_id":37118047,"body_markdown":"Also, you can use a yml config file, put it in your application.yml file.\r\n\r\n    logging:\r\n      level:\r\n        org.springframework.data.mongodb.core.MongoTemplate: DEBUG","title":"how to show query while using query annotations with MongoRepository with spring data","body":"<p>Also, you can use a yml config file, put it in your application.yml file.</p>\n\n<pre><code>logging:\n  level:\n    org.springframework.data.mongodb.core.MongoTemplate: DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2200953,"reputation":3860,"user_id":2661700,"accept_rate":86,"display_name":"Yubaraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1593087890,"creation_date":1593087890,"answer_id":62575284,"question_id":37118047,"body_markdown":"&gt;This is a late answer but I found the correct answer hasn&#39;t been given yet based on the question. \r\n\r\nThe answer already given by the people may be valid for other scenarios. But, if you are using the `MongoRepository` then the correct configuration would be the following:\r\n\r\n    logging.level.org.springframework.data.mongodb.repository.query= debug\r\n\r\nYou are using the `Query` in your configuration instead of `query` which is wrong.\r\n\r\nWhen  you add correct configuration then the logger would be like:\r\n\r\n    25-06-2020 17:58:43.301 [http-nio-9001-exec-10] DEBUG o.s.d.m.r.query.MongoQueryCreator.complete(162) - Created query Query: { &quot;customer.id&quot; : 2}, Fields: {}, Sort: {}","title":"how to show query while using query annotations with MongoRepository with spring data","body":"<blockquote>\n<p>This is a late answer but I found the correct answer hasn't been given yet based on the question.</p>\n</blockquote>\n<p>The answer already given by the people may be valid for other scenarios. But, if you are using the <code>MongoRepository</code> then the correct configuration would be the following:</p>\n<pre><code>logging.level.org.springframework.data.mongodb.repository.query= debug\n</code></pre>\n<p>You are using the <code>Query</code> in your configuration instead of <code>query</code> which is wrong.</p>\n<p>When  you add correct configuration then the logger would be like:</p>\n<pre><code>25-06-2020 17:58:43.301 [http-nio-9001-exec-10] DEBUG o.s.d.m.r.query.MongoQueryCreator.complete(162) - Created query Query: { &quot;customer.id&quot; : 2}, Fields: {}, Sort: {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2580520,"reputation":451,"user_id":2237302,"accept_rate":88,"display_name":"Ivan Rodrigues"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647446399,"creation_date":1647446399,"answer_id":71500340,"question_id":37118047,"body_markdown":"I think that the complete solution is according @Wilder Valera and @Chaojun Zhong\r\n\r\nWhen you want to log for MongoTemplate the answer:\r\n\r\n    logging:\r\n       level:\r\n           org.springframework.data.mongodb.core.MongoTemplate: DEBUG\r\n\r\nWhen you want to log for ReactiveMongoTemplate you should use:\r\n\r\n    logging.level.org.springframework.data.mongodb.core.ReactiveMongoTemplate=DEBUG\r\n","title":"how to show query while using query annotations with MongoRepository with spring data","body":"<p>I think that the complete solution is according @Wilder Valera and @Chaojun Zhong</p>\n<p>When you want to log for MongoTemplate the answer:</p>\n<pre><code>logging:\n   level:\n       org.springframework.data.mongodb.core.MongoTemplate: DEBUG\n</code></pre>\n<p>When you want to log for ReactiveMongoTemplate you should use:</p>\n<pre><code>logging.level.org.springframework.data.mongodb.core.ReactiveMongoTemplate=DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7116583,"reputation":472,"user_id":6226118,"display_name":"I.R."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674473876,"creation_date":1674473876,"answer_id":75208971,"question_id":37118047,"body_markdown":"The proposed solution is valid. But if you use `@DocumentReference` you may notice that N+1 queries won&#39;t appear in log. \r\n\r\nIf you want to know if referenced collection was queried, add the following property:\r\n\r\n```\r\nlogging.level.org.springframework.data.mongodb.core.convert.MongoDatabaseFactoryReferenceLoader=TRACE\r\n```","title":"how to show query while using query annotations with MongoRepository with spring data","body":"<p>The proposed solution is valid. But if you use <code>@DocumentReference</code> you may notice that N+1 queries won't appear in log.</p>\n<p>If you want to know if referenced collection was queried, add the following property:</p>\n<pre><code>logging.level.org.springframework.data.mongodb.core.convert.MongoDatabaseFactoryReferenceLoader=TRACE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12212238,"reputation":2370,"user_id":8913704,"accept_rate":100,"display_name":"Artem"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689782351,"creation_date":1689782351,"answer_id":76723193,"question_id":37118047,"body_markdown":"Keep in mind, that even if you do \r\n\r\n    logging:\r\n      level:\r\n        org:\r\n          springframework:\r\n            data:\r\n              mongodb:\r\n                core:\r\n                  MongoTemplate: DEBUG\r\n\r\nyou still may not be able to see the DEBUG statements if your main logger&#39;s configuration set to output only INFO messages. In our case, we had a `logback.xml` where we had an appender for frameworks with `level: INFO`. Until we changed this one as well to DEBUG we didn&#39;t see the queries from MongoDB:\r\n\r\n    &lt;appender name=&quot;FRAMEWORKS&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\r\n                &lt;level&gt;DEBUG&lt;/level&gt;\r\n            &lt;/filter&gt;\r\n            ...\r\n    &lt;/appender&gt;","title":"how to show query while using query annotations with MongoRepository with spring data","body":"<p>Keep in mind, that even if you do</p>\n<pre><code>logging:\n  level:\n    org:\n      springframework:\n        data:\n          mongodb:\n            core:\n              MongoTemplate: DEBUG\n</code></pre>\n<p>you still may not be able to see the DEBUG statements if your main logger's configuration set to output only INFO messages. In our case, we had a <code>logback.xml</code> where we had an appender for frameworks with <code>level: INFO</code>. Until we changed this one as well to DEBUG we didn't see the queries from MongoDB:</p>\n<pre><code>&lt;appender name=&quot;FRAMEWORKS&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\n            &lt;level&gt;DEBUG&lt;/level&gt;\n        &lt;/filter&gt;\n        ...\n&lt;/appender&gt;\n</code></pre>\n"}],"owner":{"account_id":8167403,"reputation":581,"user_id":6149190,"display_name":"genchilu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62938,"favorite_count":0,"down_vote_count":0,"up_vote_count":58,"answer_count":7,"score":58,"last_activity_date":1689782351,"creation_date":1462803239,"question_id":37118047,"body_markdown":"I&#39;m using MongoRepository in spring boot to access mongo:\r\n\r\n    public interface MongoReadRepository extends MongoRepository&lt;User, String&gt; {\r\n        @Query(value = &quot;{$where: &#39;this.name == ?0&#39;}&quot;, count = true)\r\n        public Long countName(String name);\r\n    }\r\nand it could work, but i wonder know the exactly query it accessing mongo\r\n\r\nhow to do that?\r\n\r\ni try to adding some config at properties like below:\r\n\r\n    logging.level.org.springframework.data.mongodb.core.MongoTemplate=DEBUG\r\n    logging.level.org.springframework.data.mongodb.repository.Query=DEBUG\r\n\r\nand don&#39;t work.\r\n\r\ncould somebody help?","title":"how to show query while using query annotations with MongoRepository with spring data","body":"<p>I'm using MongoRepository in spring boot to access mongo:</p>\n\n<pre><code>public interface MongoReadRepository extends MongoRepository&lt;User, String&gt; {\n    @Query(value = \"{$where: 'this.name == ?0'}\", count = true)\n    public Long countName(String name);\n}\n</code></pre>\n\n<p>and it could work, but i wonder know the exactly query it accessing mongo</p>\n\n<p>how to do that?</p>\n\n<p>i try to adding some config at properties like below:</p>\n\n<pre><code>logging.level.org.springframework.data.mongodb.core.MongoTemplate=DEBUG\nlogging.level.org.springframework.data.mongodb.repository.Query=DEBUG\n</code></pre>\n\n<p>and don't work.</p>\n\n<p>could somebody help?</p>\n"},{"tags":["java"],"owner":{"account_id":29050604,"reputation":1,"user_id":22253516,"display_name":"Andelic47 Aaron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689782253,"creation_date":1689782253,"question_id":76723179,"body_markdown":"@HelloWorld\r\n```\r\n@Target({ElementType.METHOD})\r\n@Retention(RetentionPolicy.SOURCE)\r\npublic @interface HelloWorld {\r\n    String name() default &quot;&quot;;\r\n}\r\n```\r\n\r\n\r\nMyProcessor.class\r\n```\r\n@SupportedAnnotationTypes(&quot;org.example.HelloWorld&quot;)\r\n@SupportedSourceVersion(SourceVersion.RELEASE_7)\r\n@AutoService(Processor.class)\r\npublic class MyProcessor extends AbstractProcessor {\r\n    private Filer mFiler;\r\n    @Override\r\n    public synchronized void init(ProcessingEnvironment processingEnv) {\r\n        super.init(processingEnv);\r\n        this.mFiler = processingEnv.getFiler();\r\n    }\r\n\r\n    private static final String SUFFIX = &quot;Test&quot; ;\r\n    private static final String packageName = &quot;cn.lovelycat.ata&quot;;\r\n    private static final String retStr = &quot;Generated!&quot;;\r\n    @Override\r\n    public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {\r\n        for (Element element : roundEnv.getElementsAnnotatedWith(HelloWorld.class)) {\r\n            HelloWorld annotation = element.getAnnotation(HelloWorld.class);\r\n            String name = annotation.name();\r\n\r\n            String newClassName = name + SUFFIX;\r\n\r\n            StringBuilder builder = new StringBuilder()\r\n                    .append(&quot;package &quot; + packageName + &quot;;\\n\\n&quot;)\r\n                    .append(&quot;public class &quot;)\r\n                    .append(newClassName)\r\n                    .append(&quot; {\\n\\n&quot;)\r\n                    .append(&quot;\\tpublic String getMessage() {\\n&quot;)\r\n                    .append(&quot;\\t\\treturn \\&quot;&quot;);\r\n            \r\n            builder.append(retStr).append(&quot; !\\\\n&quot;);\r\n\r\n            builder.append(&quot;\\&quot;;\\n&quot;)\r\n                    .append(&quot;\\t}\\n&quot;)\r\n                    .append(&quot;}\\n&quot;); \r\n\r\n            try {\r\n                JavaFileObject source = mFiler.createSourceFile(packageName + &quot;.&quot; + newClassName);\r\n                Writer writer = source.openWriter();\r\n                writer.write(builder.toString());\r\n                writer.flush();\r\n                writer.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI have compiled this processor to a jar, and now I have added this jar to another project as a lib.\r\nJust like this.\r\n\r\n```\r\npublic class Main {\r\n    @HelloWorld(name = &quot;GeneratedMain&quot;)\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Hello world&quot;);\r\n    }\r\n}\r\n```\r\n[Result](https://i.stack.imgur.com/CEZYn.png)\r\n\r\n\r\nAnd I tried to build the project, it just generated some files in out dir.\r\nNow I still could not to use the generated class in my project.\r\n\r\nHow should I do to make it work properly?","title":"How to use AbstractProcessor in a no-gradle project","body":"<p>@HelloWorld</p>\n<pre><code>@Target({ElementType.METHOD})\n@Retention(RetentionPolicy.SOURCE)\npublic @interface HelloWorld {\n    String name() default &quot;&quot;;\n}\n</code></pre>\n<p>MyProcessor.class</p>\n<pre><code>@SupportedAnnotationTypes(&quot;org.example.HelloWorld&quot;)\n@SupportedSourceVersion(SourceVersion.RELEASE_7)\n@AutoService(Processor.class)\npublic class MyProcessor extends AbstractProcessor {\n    private Filer mFiler;\n    @Override\n    public synchronized void init(ProcessingEnvironment processingEnv) {\n        super.init(processingEnv);\n        this.mFiler = processingEnv.getFiler();\n    }\n\n    private static final String SUFFIX = &quot;Test&quot; ;\n    private static final String packageName = &quot;cn.lovelycat.ata&quot;;\n    private static final String retStr = &quot;Generated!&quot;;\n    @Override\n    public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {\n        for (Element element : roundEnv.getElementsAnnotatedWith(HelloWorld.class)) {\n            HelloWorld annotation = element.getAnnotation(HelloWorld.class);\n            String name = annotation.name();\n\n            String newClassName = name + SUFFIX;\n\n            StringBuilder builder = new StringBuilder()\n                    .append(&quot;package &quot; + packageName + &quot;;\\n\\n&quot;)\n                    .append(&quot;public class &quot;)\n                    .append(newClassName)\n                    .append(&quot; {\\n\\n&quot;)\n                    .append(&quot;\\tpublic String getMessage() {\\n&quot;)\n                    .append(&quot;\\t\\treturn \\&quot;&quot;);\n            \n            builder.append(retStr).append(&quot; !\\\\n&quot;);\n\n            builder.append(&quot;\\&quot;;\\n&quot;)\n                    .append(&quot;\\t}\\n&quot;)\n                    .append(&quot;}\\n&quot;); \n\n            try {\n                JavaFileObject source = mFiler.createSourceFile(packageName + &quot;.&quot; + newClassName);\n                Writer writer = source.openWriter();\n                writer.write(builder.toString());\n                writer.flush();\n                writer.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n\n        return false;\n    }\n\n}\n</code></pre>\n<p>I have compiled this processor to a jar, and now I have added this jar to another project as a lib.\nJust like this.</p>\n<pre><code>public class Main {\n    @HelloWorld(name = &quot;GeneratedMain&quot;)\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello world&quot;);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/CEZYn.png\" rel=\"nofollow noreferrer\">Result</a></p>\n<p>And I tried to build the project, it just generated some files in out dir.\nNow I still could not to use the generated class in my project.</p>\n<p>How should I do to make it work properly?</p>\n"},{"tags":["java","android","sendgrid"],"answers":[{"tags":[],"owner":{"account_id":7419981,"reputation":2083,"user_id":5644761,"display_name":"JakeB"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689782038,"creation_date":1689782038,"answer_id":76723144,"question_id":76477589,"body_markdown":"Sendgrid&#39;s Java library is not tuned to work with Android out-of-the-box unfortunately and encounters issues like you&#39;ve discovered.\r\n\r\nI have created and continue to maintain an Android Sendgrid library that you are welcome to use.\r\n\r\nhttps://github.com/jakebreen/android-sendgrid\r\n\r\n    allprojects {\r\n        repositories {\r\n            ...\r\n            maven { url &quot;https://jitpack.io&quot; }\r\n        }\r\n    }\r\n\r\n\r\n    dependencies {\r\n        implementation &#39;com.github.jakebreen:android-sendgrid:1.3.1&#39;\r\n    }\r\n\r\nRaise an issue on the repository&#39;s issue board if you any queries.","title":"No static field INSTANCE of type Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier when using Sendgrid in android","body":"<p>Sendgrid's Java library is not tuned to work with Android out-of-the-box unfortunately and encounters issues like you've discovered.</p>\n<p>I have created and continue to maintain an Android Sendgrid library that you are welcome to use.</p>\n<p><a href=\"https://github.com/jakebreen/android-sendgrid\" rel=\"nofollow noreferrer\">https://github.com/jakebreen/android-sendgrid</a></p>\n<pre><code>allprojects {\n    repositories {\n        ...\n        maven { url &quot;https://jitpack.io&quot; }\n    }\n}\n\n\ndependencies {\n    implementation 'com.github.jakebreen:android-sendgrid:1.3.1'\n}\n</code></pre>\n<p>Raise an issue on the repository's issue board if you any queries.</p>\n"}],"owner":{"account_id":20089567,"reputation":71,"user_id":14730383,"display_name":"Looc Yug"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689782038,"creation_date":1686777319,"question_id":76477589,"body_markdown":"Getting the above error when trying to use Sendgrid in my android app\r\n\r\n\r\nbuild.gradle\r\n```java\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.4.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.5.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.3&#39;\r\n    implementation &#39;com.sendgrid:sendgrid-java:4.9.3&#39;\r\n\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n}\r\n```\r\n\r\nGetting the error in line 14 from this example: https://docs.sendgrid.com/for-developers/sending-email/v3-java-code-example\r\n\r\nEdit:\r\nI tried adding this to build.gradle but it didn&#39;t solve the issue\r\n```\r\nimplementation(&#39;org.apache.httpcomponents:httpmime:4.3.6&#39;) {\r\n        exclude module: &#39;httpclient&#39;\r\n    }\r\n```\r\n\r\nAdding this results in a bunch of `Duplicate class` errors\r\n```\r\n    implementation &#39;org.apache.httpcomponents:httpclient-android:4.3.5&#39;\r\n```\r\n\r\n","title":"No static field INSTANCE of type Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier when using Sendgrid in android","body":"<p>Getting the above error when trying to use Sendgrid in my android app</p>\n<p>build.gradle</p>\n<pre class=\"lang-java prettyprint-override\"><code>dependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.4.1'\n    implementation 'com.google.android.material:material:1.5.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.3'\n    implementation 'com.sendgrid:sendgrid-java:4.9.3'\n\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n</code></pre>\n<p>Getting the error in line 14 from this example: <a href=\"https://docs.sendgrid.com/for-developers/sending-email/v3-java-code-example\" rel=\"nofollow noreferrer\">https://docs.sendgrid.com/for-developers/sending-email/v3-java-code-example</a></p>\n<p>Edit:\nI tried adding this to build.gradle but it didn't solve the issue</p>\n<pre><code>implementation('org.apache.httpcomponents:httpmime:4.3.6') {\n        exclude module: 'httpclient'\n    }\n</code></pre>\n<p>Adding this results in a bunch of <code>Duplicate class</code> errors</p>\n<pre><code>    implementation 'org.apache.httpcomponents:httpclient-android:4.3.5'\n</code></pre>\n"},{"tags":["java","spring-boot","spring-mvc","jsp"],"answers":[{"comments":[{"owner":{"account_id":13495438,"reputation":45,"user_id":9736439,"display_name":"Raja"},"score":0,"creation_date":1689785601,"post_id":76723105,"comment_id":135263948,"body_markdown":"I am using spring 2.7.2\n`\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n\t\t&lt;version&gt;2.7.2&lt;/version&gt;\n`\nI added server.servlet.context-path=/applicationName already it added context path.\nBut I am don&#39;t want a context path in front of /login","body":"I am using spring 2.7.2 `\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; \t\t&lt;version&gt;2.7.2&lt;/version&gt; ` I added server.servlet.context-path=/applicationName already it added context path. But I am don&#39;t want a context path in front of /login"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1689792688,"post_id":76723105,"comment_id":135265337,"body_markdown":"What prevents you from mapping a different servlet context to `/login`?","body":"What prevents you from mapping a different servlet context to <code>&#47;login</code>?"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1693937020,"post_id":76723105,"comment_id":135824554,"body_markdown":"If this answer helped you then you should mark it as accepted. The checkbox I&#39;d on the left of the answer. Also it&#39;s worth to vote up the answer that helped you the same to help others to choose the correct answer.","body":"If this answer helped you then you should mark it as accepted. The checkbox I&#39;d on the left of the answer. Also it&#39;s worth to vote up the answer that helped you the same to help others to choose the correct answer."}],"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689781745,"creation_date":1689781745,"answer_id":76723105,"question_id":76722710,"body_markdown":"You can use any of the configuration options, the context path in Spring Boot can be changed by setting a property, `server.servlet.context-path`.\r\n\r\nNote, that it only works for Spring Boot \r\n2.x. and above. For Spring Boot 1.x, the property is `server.context-path`.","title":"How to add root context to spring boot application except for /login?","body":"<p>You can use any of the configuration options, the context path in Spring Boot can be changed by setting a property, <code>server.servlet.context-path</code>.</p>\n<p>Note, that it only works for Spring Boot\n2.x. and above. For Spring Boot 1.x, the property is <code>server.context-path</code>.</p>\n"}],"owner":{"account_id":13495438,"reputation":45,"user_id":9736439,"display_name":"Raja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":320,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689781835,"creation_date":1689779089,"question_id":76722710,"body_markdown":"I am working on a Spring Boot application with JSP as UI. Where I had to add a root-context `/applicationName` for the entire application except for `/login`.\r\n\r\nI tried  to added the below code to the `application.properties`. \r\n\r\n    server.servlet.context-path=/applicationName\r\n    server.servlet.context-path-exclude=/login\r\n\r\nbut it didn&#39;t work. Any thoughts? \r\n\r\n","title":"How to add root context to spring boot application except for /login?","body":"<p>I am working on a Spring Boot application with JSP as UI. Where I had to add a root-context <code>/applicationName</code> for the entire application except for <code>/login</code>.</p>\n<p>I tried  to added the below code to the <code>application.properties</code>.</p>\n<pre><code>server.servlet.context-path=/applicationName\nserver.servlet.context-path-exclude=/login\n</code></pre>\n<p>but it didn't work. Any thoughts?</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"owner":{"account_id":28679067,"reputation":23,"user_id":21960620,"display_name":"solanke57"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689781663,"creation_date":1689781663,"question_id":76723096,"body_markdown":"While trying to solve a certain problem, I used this solution:\r\n\r\nhttps://stackoverflow.com/a/65739712/21960620\r\n\r\nHowever, when I make a POST request to Company, it throws an exception org.hibernate.UnknownEntityTypeException: Unable to locate entity descriptor.\r\n\r\n```\r\norg.hibernate.UnknownEntityTypeException: Unable to locate entity descriptor: com.solanke.spring6jobboardrest.domains.AppUser$AppUserBuilder\r\n\tat org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.getEntityDescriptor(MappingMetamodelImpl.java:435) ~[hibernate-core-6.2.2.Final.jar:6.2.2.Final]\r\n\tat org.hibernate.internal.SessionImpl.requireEntityPersister(SessionImpl.java:2271) ~[hibernate-core-6.2.2.Final.jar:6.2.2.Final]\r\n\tat org.hibernate.internal.SessionImpl.byId(SessionImpl.java:1173) ~[hibernate-core-6.2.2.Final.jar:6.2.2.Final]\r\n\tat org.hibernate.internal.SessionImpl.getReference(SessionImpl.java:2507) ~[hibernate-core-6.2.2.Final.jar:6.2.2.Final]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.9.jar:6.0.9]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy129.getReference(Unknown Source) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311) ~[spring-orm-6.0.9.jar:6.0.9]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy129.getReference(Unknown Source) ~[na:na]\r\n\tat com.solanke.spring6jobboardrest.mappers.ReferenceMapper.map(ReferenceMapper.java:18) ~[classes/:na]\r\n\tat com.solanke.spring6jobboardrest.mappers.AppUserMapperImpl.toAppUser(AppUserMapperImpl.java:27) ~[classes/:na]\r\n\tat com.solanke.spring6jobboardrest.mappers.CompanyMapperImpl.companyDtoToCompany(CompanyMapperImpl.java:28) ~[classes/:na]\r\n\tat com.solanke.spring6jobboardrest.services.CompanyServiceImpl.saveNewCompany(CompanyServiceImpl.java:29) ~[classes/:na]\r\n\tat com.solanke.spring6jobboardrest.controllers.CompanyController.createCompany(CompanyController.java:34) ~[classes/:na]\r\n```\r\n\r\nReferenceMapper class\r\n```\r\n@Component\r\npublic class ReferenceMapper {\r\n\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n    @ObjectFactory\r\n    public &lt;T&gt; T map(@NonNull final Long id, @TargetType Class&lt;T&gt; type) {\r\n        return entityManager.getReference(type, id);\r\n    }\r\n}\r\n\r\n```\r\n\r\nGenerated-sources AppUserMapperImpl\r\n```\r\n    @Override\r\n    public AppUser toAppUser(Long id) {\r\n        if ( id == null ) {\r\n            return null;\r\n        }\r\n\r\n        AppUser.AppUserBuilder appUser = referenceMapper.map( id, AppUser.AppUserBuilder.class );\r\n\r\n        appUser.id( id );\r\n\r\n        return appUser.build();\r\n    }\r\n```\r\n\r\nGenerated-sources CompanyMapperImpl\r\n```\r\n    @Override\r\n    public Company companyDtoToCompany(CompanyDto dto) {\r\n        if ( dto == null ) {\r\n            return null;\r\n        }\r\n\r\n        Company.CompanyBuilder company = Company.builder();\r\n\r\n        company.adminProfile( appUserMapper.toAppUser( dto.getUserId() ) );\r\n        company.id( dto.getId() );\r\n        company.companyName( dto.getCompanyName() );\r\n        company.description( dto.getDescription() );\r\n\r\n        return company.build();\r\n    }\r\n```\r\nCompanyDto class\r\n```\r\n@Builder\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class CompanyDto {\r\n\r\n    private Long id;\r\n\r\n    @NotNull\r\n    @NotBlank\r\n    private String companyName;\r\n\r\n    @NotNull\r\n    @NotBlank\r\n    private String description;\r\n\r\n    @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\r\n    private Long userId;\r\n\r\n}\r\n```\r\n\r\n\r\nBut, in the case where I remove **@Builder** from AppUser entity class, the exception is not thrown, and my question is why does it work after removing @Builder and why it does not work with this annotation.","title":"org.hibernate.UnknownEntityTypeException: Unable to locate entity descriptor","body":"<p>While trying to solve a certain problem, I used this solution:</p>\n<p><a href=\"https://stackoverflow.com/a/65739712/21960620\">https://stackoverflow.com/a/65739712/21960620</a></p>\n<p>However, when I make a POST request to Company, it throws an exception org.hibernate.UnknownEntityTypeException: Unable to locate entity descriptor.</p>\n<pre><code>org.hibernate.UnknownEntityTypeException: Unable to locate entity descriptor: com.solanke.spring6jobboardrest.domains.AppUser$AppUserBuilder\n    at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.getEntityDescriptor(MappingMetamodelImpl.java:435) ~[hibernate-core-6.2.2.Final.jar:6.2.2.Final]\n    at org.hibernate.internal.SessionImpl.requireEntityPersister(SessionImpl.java:2271) ~[hibernate-core-6.2.2.Final.jar:6.2.2.Final]\n    at org.hibernate.internal.SessionImpl.byId(SessionImpl.java:1173) ~[hibernate-core-6.2.2.Final.jar:6.2.2.Final]\n    at org.hibernate.internal.SessionImpl.getReference(SessionImpl.java:2507) ~[hibernate-core-6.2.2.Final.jar:6.2.2.Final]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.9.jar:6.0.9]\n    at jdk.proxy2/jdk.proxy2.$Proxy129.getReference(Unknown Source) ~[na:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311) ~[spring-orm-6.0.9.jar:6.0.9]\n    at jdk.proxy2/jdk.proxy2.$Proxy129.getReference(Unknown Source) ~[na:na]\n    at com.solanke.spring6jobboardrest.mappers.ReferenceMapper.map(ReferenceMapper.java:18) ~[classes/:na]\n    at com.solanke.spring6jobboardrest.mappers.AppUserMapperImpl.toAppUser(AppUserMapperImpl.java:27) ~[classes/:na]\n    at com.solanke.spring6jobboardrest.mappers.CompanyMapperImpl.companyDtoToCompany(CompanyMapperImpl.java:28) ~[classes/:na]\n    at com.solanke.spring6jobboardrest.services.CompanyServiceImpl.saveNewCompany(CompanyServiceImpl.java:29) ~[classes/:na]\n    at com.solanke.spring6jobboardrest.controllers.CompanyController.createCompany(CompanyController.java:34) ~[classes/:na]\n</code></pre>\n<p>ReferenceMapper class</p>\n<pre><code>@Component\npublic class ReferenceMapper {\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @ObjectFactory\n    public &lt;T&gt; T map(@NonNull final Long id, @TargetType Class&lt;T&gt; type) {\n        return entityManager.getReference(type, id);\n    }\n}\n\n</code></pre>\n<p>Generated-sources AppUserMapperImpl</p>\n<pre><code>    @Override\n    public AppUser toAppUser(Long id) {\n        if ( id == null ) {\n            return null;\n        }\n\n        AppUser.AppUserBuilder appUser = referenceMapper.map( id, AppUser.AppUserBuilder.class );\n\n        appUser.id( id );\n\n        return appUser.build();\n    }\n</code></pre>\n<p>Generated-sources CompanyMapperImpl</p>\n<pre><code>    @Override\n    public Company companyDtoToCompany(CompanyDto dto) {\n        if ( dto == null ) {\n            return null;\n        }\n\n        Company.CompanyBuilder company = Company.builder();\n\n        company.adminProfile( appUserMapper.toAppUser( dto.getUserId() ) );\n        company.id( dto.getId() );\n        company.companyName( dto.getCompanyName() );\n        company.description( dto.getDescription() );\n\n        return company.build();\n    }\n</code></pre>\n<p>CompanyDto class</p>\n<pre><code>@Builder\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class CompanyDto {\n\n    private Long id;\n\n    @NotNull\n    @NotBlank\n    private String companyName;\n\n    @NotNull\n    @NotBlank\n    private String description;\n\n    @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\n    private Long userId;\n\n}\n</code></pre>\n<p>But, in the case where I remove <strong>@Builder</strong> from AppUser entity class, the exception is not thrown, and my question is why does it work after removing @Builder and why it does not work with this annotation.</p>\n"},{"tags":["java","spring-boot","asynchronous","completable-future"],"owner":{"account_id":7992766,"reputation":93,"user_id":6030146,"accept_rate":50,"display_name":"Egomen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689781633,"creation_date":1689781633,"question_id":76723091,"body_markdown":"I am trying to make multiple calls async in my Java project;\r\n\r\n       List&lt;CompletableFuture&lt;Response&gt;&gt; postControlList = List.of(\r\n                    CompletableFuture.supplyAsync(() -&gt; controller.independentTask1(item), executor)\r\n                    , CompletableFuture.supplyAsync(() -&gt; controller.independentTask2(item), executor)\r\n                    , CompletableFuture.supplyAsync(() -&gt; controller.independentTask3(item), executor)\r\n            );\r\n            controller.checkFutureList(holder, postControlList);\r\n\r\nAnd checkFutureList Method ;\r\n\r\n       public void checkFutureList(Object item, List&lt;CompletableFuture&lt;Response&gt;&gt; futureList) {\r\n\r\n        for (var future : futureList) {\r\n            var response = future.join();\r\n            if (!response.isSuccess()) {\r\n                item.setResponse(response);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\nAm i using it in a right way? Or should i make some updates for performance boosting ?","title":"Multi Independent Api Call With CompletableFuture Java","body":"<p>I am trying to make multiple calls async in my Java project;</p>\n<pre><code>   List&lt;CompletableFuture&lt;Response&gt;&gt; postControlList = List.of(\n                CompletableFuture.supplyAsync(() -&gt; controller.independentTask1(item), executor)\n                , CompletableFuture.supplyAsync(() -&gt; controller.independentTask2(item), executor)\n                , CompletableFuture.supplyAsync(() -&gt; controller.independentTask3(item), executor)\n        );\n        controller.checkFutureList(holder, postControlList);\n</code></pre>\n<p>And checkFutureList Method ;</p>\n<pre><code>   public void checkFutureList(Object item, List&lt;CompletableFuture&lt;Response&gt;&gt; futureList) {\n\n    for (var future : futureList) {\n        var response = future.join();\n        if (!response.isSuccess()) {\n            item.setResponse(response);\n            return;\n        }\n    }\n}\n</code></pre>\n<p>Am i using it in a right way? Or should i make some updates for performance boosting ?</p>\n"},{"tags":["java","spring","spring-boot","autowired"],"answers":[{"tags":[],"owner":{"account_id":2992300,"reputation":115,"user_id":2539633,"accept_rate":43,"display_name":"Basixp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689781154,"creation_date":1689781154,"answer_id":76723025,"question_id":76063318,"body_markdown":"Answering my own question, it seems that you can use either one of the annotations below:\r\n\r\n    `@Import(JacksonConfiguration.class)`\r\n    `@DependsOn({&quot;jacksonObjectMapper&quot;})`\r\n\r\nwhere above is defined as below:\r\n\r\n    @Configuration\r\n    public class JacksonConfiguration {\r\n\r\n    @Bean\r\n    public JacksonObjectMapper jacksonObjectMapper(){ ...\r\n\r\n\r\n","title":"EnableAutoConfiguration in a common module for autowire the jacksonObjectMapper","body":"<p>Answering my own question, it seems that you can use either one of the annotations below:</p>\n<pre><code>`@Import(JacksonConfiguration.class)`\n`@DependsOn({&quot;jacksonObjectMapper&quot;})`\n</code></pre>\n<p>where above is defined as below:</p>\n<pre><code>@Configuration\npublic class JacksonConfiguration {\n\n@Bean\npublic JacksonObjectMapper jacksonObjectMapper(){ ...\n</code></pre>\n"}],"owner":{"account_id":2992300,"reputation":115,"user_id":2539633,"accept_rate":43,"display_name":"Basixp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689781154,"creation_date":1681988233,"question_id":76063318,"body_markdown":"I am using a spring boot 2.x with multi java modules (in IntelliJ) and in **a Common module** I am trying to @Autowire on ObjectMapper \r\n\r\n   \t@Bean\r\n\t@Qualifier(&quot;myBean&quot;)\r\n\tpublic Jdbi getJDBIwrite(@Qualifier(&quot;dataSource&quot;) DataSource dataSource, \r\n    ObjectMapper objectMapper) {\r\n\t\treturn getJdbi(dataSource, objectMapper);\r\n\t}\r\n\r\nAs obviously the *org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration* is not in my base dir path it fails to auto wire.\r\n\r\nWhen using below\r\n\r\n    @Configuration\r\n    @EnableAutoConfiguration\r\n    public class JdbiConfiguration {\r\n    . . .\r\n\r\n It works fine.\r\n\r\n1) Is there another better way to deal with this with other annotation or design?\r\n\r\n2) Without the *EnableAutoConfiguration* It really only being complained in IntelliJ, but compilation build and run time works fine.\r\n\r\nThanks!!\r\n","title":"EnableAutoConfiguration in a common module for autowire the jacksonObjectMapper","body":"<p>I am using a spring boot 2.x with multi java modules (in IntelliJ) and in <strong>a Common module</strong> I am trying to @Autowire on ObjectMapper</p>\n<pre><code>@Bean\n@Qualifier(&quot;myBean&quot;)\npublic Jdbi getJDBIwrite(@Qualifier(&quot;dataSource&quot;) DataSource dataSource, \nObjectMapper objectMapper) {\n    return getJdbi(dataSource, objectMapper);\n}\n</code></pre>\n<p>As obviously the <em>org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration</em> is not in my base dir path it fails to auto wire.</p>\n<p>When using below</p>\n<pre><code>@Configuration\n@EnableAutoConfiguration\npublic class JdbiConfiguration {\n. . .\n</code></pre>\n<p>It works fine.</p>\n<ol>\n<li><p>Is there another better way to deal with this with other annotation or design?</p>\n</li>\n<li><p>Without the <em>EnableAutoConfiguration</em> It really only being complained in IntelliJ, but compilation build and run time works fine.</p>\n</li>\n</ol>\n<p>Thanks!!</p>\n"},{"tags":["java","weblogic"],"answers":[{"tags":[],"owner":{"account_id":16539707,"reputation":955,"user_id":11961036,"display_name":"Marco Frag Delle Monache"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689780870,"creation_date":1689759498,"answer_id":76719897,"question_id":76705957,"body_markdown":"Solved.\r\n\r\nLooks like WebLogic tries to connect to every DataSource on startup. \r\nI did modify a DataSource before shutting down the Managed, but I wrote the connection string wrongly (even though I copied it from another WebLogic server):\r\n\r\nIndeed, what I did write was:\r\n    \r\n    jdbc:oracle:thin:@127.0.0.1:1521:XEPDB\r\n\r\nWhat I had to write, instead, was:\r\n    \r\n    jdbc:oracle:thin:@127.0.0.1:1521/XEPDB\r\n\r\nThis prevented WebLogic to start correctly.\r\n\r\nFixed the connection string in `$DOMAIN_NAME/config/jdbc/my_datasource.xml` and ran smoothly.\r\n\r\n","title":"Weblogic doesn&#39;t start because of &quot;Authentication denied&quot;","body":"<p>Solved.</p>\n<p>Looks like WebLogic tries to connect to every DataSource on startup.\nI did modify a DataSource before shutting down the Managed, but I wrote the connection string wrongly (even though I copied it from another WebLogic server):</p>\n<p>Indeed, what I did write was:</p>\n<pre><code>jdbc:oracle:thin:@127.0.0.1:1521:XEPDB\n</code></pre>\n<p>What I had to write, instead, was:</p>\n<pre><code>jdbc:oracle:thin:@127.0.0.1:1521/XEPDB\n</code></pre>\n<p>This prevented WebLogic to start correctly.</p>\n<p>Fixed the connection string in <code>$DOMAIN_NAME/config/jdbc/my_datasource.xml</code> and ran smoothly.</p>\n"}],"owner":{"account_id":16539707,"reputation":955,"user_id":11961036,"display_name":"Marco Frag Delle Monache"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76719897,"answer_count":1,"score":1,"last_activity_date":1689780870,"creation_date":1689607408,"question_id":76705957,"body_markdown":"I had to change a Data Source configuration to solve a Runtime error (connection string wasn&#39;t specified).\r\n\r\nThe error:\r\n\r\n    Unable to deploy EJB: MailService from wps.jar:\r\n    The run-as security principal, &#39;portaladmin&#39;, chosen for the EJB &#39;MailService(Application: my-application, EJBComponent: wps.jar)&#39; is not a valid user principal in the current security realm. Please specify a valid user principal for the EJB to use.\r\n\r\nAs I&#39;ve read [here](https://stackoverflow.com/a/36404281/11961036), I tried stopping the Managed server and cleaning those folders. On restarting the Managed, both using the script and the GUI, it started throwing me this error:\r\n\r\n    weblogic.security.SecurityInitializationException: Authentication denied: Boot identity not valid; The user name and/or password from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updated boot identity file is used to start the server, these new values are encrypted\r\n\r\nI started browsing for a solution, and everyone says I need to delete both the `servers/MyServer/data/ldap` folder and the `servers/MyServer/security/boot.properties`. None of this works. Also, even the AdminServer is not starting for the same reason. The NodeManager, instead, runs smoothly.\r\n\r\nI already tried resetting the username and password, like so:\r\n\r\n    cd $DOMAIN_HOME/bin\r\n    . ./setDomainEnv.sh\r\n    cd ../security\r\n    java weblogic.security.utils.AdminAccount user password .\r\n\r\nTried running the server manually prompting user and password, but the exception persists.\r\n\r\nAlso tried rolling back the setting I made previously, even though it has nothing to do with WebLogic users.. but nothing.\r\n\r\n**Important notes:**\r\n- I really would like to avoid freshly reinstalling the environment.&lt;br&gt;\r\n- I cannot reboot the server.\r\n- I need those `boot.properties`, either I&#39;m not able to launch WebLogic processes in the background.\r\n\r\nAny help is highly appreciated.\r\n\r\n","title":"Weblogic doesn&#39;t start because of &quot;Authentication denied&quot;","body":"<p>I had to change a Data Source configuration to solve a Runtime error (connection string wasn't specified).</p>\n<p>The error:</p>\n<pre><code>Unable to deploy EJB: MailService from wps.jar:\nThe run-as security principal, 'portaladmin', chosen for the EJB 'MailService(Application: my-application, EJBComponent: wps.jar)' is not a valid user principal in the current security realm. Please specify a valid user principal for the EJB to use.\n</code></pre>\n<p>As I've read <a href=\"https://stackoverflow.com/a/36404281/11961036\">here</a>, I tried stopping the Managed server and cleaning those folders. On restarting the Managed, both using the script and the GUI, it started throwing me this error:</p>\n<pre><code>weblogic.security.SecurityInitializationException: Authentication denied: Boot identity not valid; The user name and/or password from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updated boot identity file is used to start the server, these new values are encrypted\n</code></pre>\n<p>I started browsing for a solution, and everyone says I need to delete both the <code>servers/MyServer/data/ldap</code> folder and the <code>servers/MyServer/security/boot.properties</code>. None of this works. Also, even the AdminServer is not starting for the same reason. The NodeManager, instead, runs smoothly.</p>\n<p>I already tried resetting the username and password, like so:</p>\n<pre><code>cd $DOMAIN_HOME/bin\n. ./setDomainEnv.sh\ncd ../security\njava weblogic.security.utils.AdminAccount user password .\n</code></pre>\n<p>Tried running the server manually prompting user and password, but the exception persists.</p>\n<p>Also tried rolling back the setting I made previously, even though it has nothing to do with WebLogic users.. but nothing.</p>\n<p><strong>Important notes:</strong></p>\n<ul>\n<li>I really would like to avoid freshly reinstalling the environment.<br></li>\n<li>I cannot reboot the server.</li>\n<li>I need those <code>boot.properties</code>, either I'm not able to launch WebLogic processes in the background.</li>\n</ul>\n<p>Any help is highly appreciated.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1690176163,"post_id":76722780,"comment_id":135311248,"body_markdown":"What does &quot;does not work&quot; mean?","body":"What does &quot;does not work&quot; mean?"}],"answers":[{"comments":[{"owner":{"account_id":29036849,"reputation":3,"user_id":22242543,"display_name":"Dmytro"},"score":0,"creation_date":1689782144,"post_id":76722907,"comment_id":135263197,"body_markdown":"They can be null. This means that filtering by this parameter is not required.","body":"They can be null. This means that filtering by this parameter is not required."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1690176201,"post_id":76722907,"comment_id":135311255,"body_markdown":"Please format your answer to be more readable.","body":"Please format your answer to be more readable."}],"tags":[],"owner":{"account_id":28984901,"reputation":12,"user_id":22201909,"display_name":"Bich Anh Dao"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689780396,"creation_date":1689780396,"answer_id":76722907,"question_id":76722780,"body_markdown":"    Ensure that the provided cityName and bankType parameters have valid values and are not null. If they can be null, you should handle those cases in the specifications to avoid any errors or Check if the LocationsDetailsDTO class and the convertToDTO method are implemented correctly. Make sure that the method properly converts an instance of LocationsDetails to LocationsDetailsDTO.","title":"How to do filtering and pagination by two parameters in java using Specification","body":"<pre><code>Ensure that the provided cityName and bankType parameters have valid values and are not null. If they can be null, you should handle those cases in the specifications to avoid any errors or Check if the LocationsDetailsDTO class and the convertToDTO method are implemented correctly. Make sure that the method properly converts an instance of LocationsDetails to LocationsDetailsDTO.\n</code></pre>\n"}],"owner":{"account_id":29036849,"reputation":3,"user_id":22242543,"display_name":"Dmytro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76722907,"answer_count":1,"score":0,"last_activity_date":1689780396,"creation_date":1689779562,"question_id":76722780,"body_markdown":"How to do filtering and pagination by two parameters in java using Specification, and pagination at the same time.\r\n\r\n    @Override\r\n    public Page&lt;LocationsDetailsDTO&gt; getAllAtmOrBranchesFilteredByCityNameAndBankType(String cityName, BankType bankType, int pageSize, int page) {\r\n        Specification&lt;LocationsDetails&gt; specification = Specifications.where(LocationsDetailsSpecifications.hasCityName(cityName))\r\n            .and(LocationsDetailsSpecifications.hasBankType(bankType));\r\n    \r\n        Pageable pageable = PageRequest.of(page, pageSize);\r\n        return locationsRepository.findAll(specification, pageable)\r\n            .map(this::convertToDTO);\r\n    }\r\n    \r\n    public static Specification&lt;LocationsDetails&gt; hasCityName(String cityName) {\r\n            return (r, q, cb) -&gt; cityName == null ? null : cb.like(r.get(&quot;cityName&quot;), (cityName));\r\n        }\r\n    \r\n    public static Specification&lt;LocationsDetails&gt; hasBankType(BankType bankType) {\r\n            return (r, q, cb) -&gt; bankType == null ? null : cb.equal(r.get(&quot;bankType&quot;), bankType);\r\n        }\r\n\r\nThis option does not work, the problem is in the findAll method\r\n\r\nError indication. My option does not work","title":"How to do filtering and pagination by two parameters in java using Specification","body":"<p>How to do filtering and pagination by two parameters in java using Specification, and pagination at the same time.</p>\n<pre><code>@Override\npublic Page&lt;LocationsDetailsDTO&gt; getAllAtmOrBranchesFilteredByCityNameAndBankType(String cityName, BankType bankType, int pageSize, int page) {\n    Specification&lt;LocationsDetails&gt; specification = Specifications.where(LocationsDetailsSpecifications.hasCityName(cityName))\n        .and(LocationsDetailsSpecifications.hasBankType(bankType));\n\n    Pageable pageable = PageRequest.of(page, pageSize);\n    return locationsRepository.findAll(specification, pageable)\n        .map(this::convertToDTO);\n}\n\npublic static Specification&lt;LocationsDetails&gt; hasCityName(String cityName) {\n        return (r, q, cb) -&gt; cityName == null ? null : cb.like(r.get(&quot;cityName&quot;), (cityName));\n    }\n\npublic static Specification&lt;LocationsDetails&gt; hasBankType(BankType bankType) {\n        return (r, q, cb) -&gt; bankType == null ? null : cb.equal(r.get(&quot;bankType&quot;), bankType);\n    }\n</code></pre>\n<p>This option does not work, the problem is in the findAll method</p>\n<p>Error indication. My option does not work</p>\n"},{"tags":["java","spring","spring-boot","spring-tool-suite"],"comments":[{"owner":{"account_id":355635,"reputation":1798,"user_id":694691,"accept_rate":71,"display_name":"Sasi Kathimanda"},"score":0,"creation_date":1486322400,"post_id":42056067,"comment_id":71284733,"body_markdown":"does it display main class name on console along with error? have a look at [this](http://stackoverflow.com/questions/28451120/spring-boot-program-cannot-find-main-class)","body":"does it display main class name on console along with error? have a look at <a href=\"http://stackoverflow.com/questions/28451120/spring-boot-program-cannot-find-main-class\">this</a>"},{"owner":{"account_id":9560534,"reputation":12492,"user_id":7101554,"accept_rate":68,"display_name":"Leandro Borges Ferreira"},"score":0,"creation_date":1486322606,"post_id":42056067,"comment_id":71284801,"body_markdown":"No. This is the complete error message","body":"No. This is the complete error message"},{"owner":{"account_id":355635,"reputation":1798,"user_id":694691,"accept_rate":71,"display_name":"Sasi Kathimanda"},"score":0,"creation_date":1486322723,"post_id":42056067,"comment_id":71284854,"body_markdown":"have you checked Run -&gt; Run Configurations? ensure you don&#39;t have duplicated main classes","body":"have you checked Run -&gt; Run Configurations? ensure you don&#39;t have duplicated main classes"},{"owner":{"account_id":9560534,"reputation":12492,"user_id":7101554,"accept_rate":68,"display_name":"Leandro Borges Ferreira"},"score":0,"creation_date":1486324242,"post_id":42056067,"comment_id":71285418,"body_markdown":"In the Run Configurations the Main type is: br.com.leandroborgesferreira.microlearn.MicroLearnApplication . So it&#39;s correct","body":"In the Run Configurations the Main type is: br.com.leandroborgesferreira.microlearn.MicroLearnApplicatio&zwnj;&#8203;n . So it&#39;s correct"},{"owner":{"account_id":355635,"reputation":1798,"user_id":694691,"accept_rate":71,"display_name":"Sasi Kathimanda"},"score":0,"creation_date":1486324351,"post_id":42056067,"comment_id":71285461,"body_markdown":"can you post the class in the question.","body":"can you post the class in the question."},{"owner":{"account_id":4522916,"reputation":1224,"user_id":3675565,"display_name":"AntJavaDev"},"score":0,"creation_date":1486324822,"post_id":42056067,"comment_id":71285653,"body_markdown":"Could you also post the full exception log? Are you sure that the IDE, is properly configured to invoke your java app with the same jdk version you are invoking `mvn spring-boot:run` from your command line ? Also could you try simply invoking it as a java app instead of *Run as -&gt; Spring Boot App*","body":"Could you also post the full exception log? Are you sure that the IDE, is properly configured to invoke your java app with the same jdk version you are invoking <code>mvn spring-boot:run</code> from your command line ? Also could you try simply invoking it as a java app instead of <i>Run as -&gt; Spring Boot App</i>"},{"owner":{"account_id":9560534,"reputation":12492,"user_id":7101554,"accept_rate":68,"display_name":"Leandro Borges Ferreira"},"score":0,"creation_date":1486325276,"post_id":42056067,"comment_id":71285823,"body_markdown":"@AntJavaDev 1- The error message is all the Console shows to me. 2- No... I am not sure, how can I do this? 3- If I try Run as -&gt; Java Application or Run as -&gt; Maven clean I get the same error","body":"@AntJavaDev 1- The error message is all the Console shows to me. 2- No... I am not sure, how can I do this? 3- If I try Run as -&gt; Java Application or Run as -&gt; Maven clean I get the same error"},{"owner":{"account_id":4522916,"reputation":1224,"user_id":3675565,"display_name":"AntJavaDev"},"score":0,"creation_date":1486326173,"post_id":42056067,"comment_id":71286165,"body_markdown":"give a look at this [tutorial](https://spring.io/blog/2015/03/18/spring-boot-support-in-spring-tool-suite-3-6-4). Regarding the jdk , at the run configuration window, there is a tab JRE , check there with which one you are invoking the app.","body":"give a look at this <a href=\"https://spring.io/blog/2015/03/18/spring-boot-support-in-spring-tool-suite-3-6-4\" rel=\"nofollow noreferrer\">tutorial</a>. Regarding the jdk , at the run configuration window, there is a tab JRE , check there with which one you are invoking the app."},{"owner":{"account_id":6211690,"reputation":982,"user_id":4837799,"accept_rate":50,"display_name":"Robert Leggett"},"score":0,"creation_date":1486327864,"post_id":42056067,"comment_id":71286768,"body_markdown":"This is a Microservice I wrote, it is basically a starter and may be a good base for you to start with, however it is using gradle rather then maven.  https://github.com/Rob-Leggett/gradle_springboot_microservice","body":"This is a Microservice I wrote, it is basically a starter and may be a good base for you to start with, however it is using gradle rather then maven.  <a href=\"https://github.com/Rob-Leggett/gradle_springboot_microservice\" rel=\"nofollow noreferrer\">github.com/Rob-Leggett/gradle_springboot_microservice</a>"},{"owner":{"account_id":2082386,"reputation":6063,"user_id":1854124,"display_name":"Martin Lippert"},"score":0,"creation_date":1486369171,"post_id":42056067,"comment_id":71297847,"body_markdown":"what happens if you create a simple spring boot app using the &quot;new spring starter project&quot; wizard and run that? Does that work?","body":"what happens if you create a simple spring boot app using the &quot;new spring starter project&quot; wizard and run that? Does that work?"}],"answers":[{"comments":[{"owner":{"account_id":9560534,"reputation":12492,"user_id":7101554,"accept_rate":68,"display_name":"Leandro Borges Ferreira"},"score":0,"creation_date":1486394332,"post_id":42071182,"comment_id":71313660,"body_markdown":"Ok. I&#180;ll try it in some hours","body":"Ok. I&#180;ll try it in some hours"}],"tags":[],"owner":{"account_id":1184679,"reputation":904,"user_id":3521098,"accept_rate":70,"display_name":"Solorad"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486394408,"creation_date":1486394264,"answer_id":42071182,"question_id":42056067,"body_markdown":"I had the same problem. In my case problem was in default maven configurations in Intellij Idea. Go to settings and\r\nSettings -&gt; Build Execution, Deployment -&gt; Maven. Set maven home directory to correct one, not bundled with IJ IDEA.\r\nRight Click the project -&gt; Maven -&gt; Reimport\r\nThen Re-run the project. Hope it work for you too. \r\n\r\nAlso, please check `Working directory` in &#39;Run Configuration&#39;. It should be something like &quot;MODULE_DIR&quot;","title":"How to run Spring boot application with STS","body":"<p>I had the same problem. In my case problem was in default maven configurations in Intellij Idea. Go to settings and\nSettings -> Build Execution, Deployment -> Maven. Set maven home directory to correct one, not bundled with IJ IDEA.\nRight Click the project -> Maven -> Reimport\nThen Re-run the project. Hope it work for you too. </p>\n\n<p>Also, please check <code>Working directory</code> in 'Run Configuration'. It should be something like \"MODULE_DIR\"</p>\n"},{"tags":[],"owner":{"account_id":14315490,"reputation":503,"user_id":10340381,"display_name":"pramod singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1573377015,"creation_date":1573377015,"answer_id":58787181,"question_id":42056067,"body_markdown":"just right click within `main class` and `run as &gt; spring boot/java application`","title":"How to run Spring boot application with STS","body":"<p>just right click within <code>main class</code> and <code>run as &gt; spring boot/java application</code></p>\n"},{"tags":[],"owner":{"account_id":2396304,"reputation":164,"user_id":2095034,"display_name":"Ishmael Mavor Raines"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689780374,"creation_date":1689779948,"answer_id":76722832,"question_id":42056067,"body_markdown":"Enter **spring-boot:run** in your configuration if using Spring Tools Suite 4 IDE\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u27D1.png","title":"How to run Spring boot application with STS","body":"<p>Enter <strong>spring-boot:run</strong> in your configuration if using Spring Tools Suite 4 IDE</p>\n<p><a href=\"https://i.stack.imgur.com/u27D1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u27D1.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":9560534,"reputation":12492,"user_id":7101554,"accept_rate":68,"display_name":"Leandro Borges Ferreira"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17581,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1689780374,"creation_date":1486321752,"question_id":42056067,"body_markdown":"I am starting to learn microservices with Spring Boot. I go to root of my project and run the command:\r\n\r\n    mvn spring-boot:run\r\n\r\nIt works just fine and I can use my endpoints in localhost:8080/[path]. But when I try to run my project from the IDE using Run as -&gt; Spring Boot App. I get this error:\r\n\r\n    Error: Could not find or load main class \r\n\r\nI could just use command line, but I really would like to know why I getting this error with the IDE. So, **what I have to do to run my project from the IDE?**\r\n\r\n**Edit 1:**\r\n\r\nThere is my Main Class:\r\n\r\n    package br.com.leandroborgesferreira.microlearn;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class MicroLearnApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(MicroLearnApplication.class, args);\r\n    \t}\r\n    }\r\n\r\nAny help is appreciated!\r\n","title":"How to run Spring boot application with STS","body":"<p>I am starting to learn microservices with Spring Boot. I go to root of my project and run the command:</p>\n\n<pre><code>mvn spring-boot:run\n</code></pre>\n\n<p>It works just fine and I can use my endpoints in localhost:8080/[path]. But when I try to run my project from the IDE using Run as -> Spring Boot App. I get this error:</p>\n\n<pre><code>Error: Could not find or load main class \n</code></pre>\n\n<p>I could just use command line, but I really would like to know why I getting this error with the IDE. So, <strong>what I have to do to run my project from the IDE?</strong></p>\n\n<p><strong>Edit 1:</strong></p>\n\n<p>There is my Main Class:</p>\n\n<pre><code>package br.com.leandroborgesferreira.microlearn;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class MicroLearnApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MicroLearnApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>Any help is appreciated!</p>\n"},{"tags":["java","java-8","jvm","garbage-collection","g1gc"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689785700,"post_id":76722901,"comment_id":135263973,"body_markdown":"You should ask yourself:`too many Full GC&#39;s occurring frequently` what is too many? how many do you expect? before tuning the GC -most times that is a bad idea- have you verified that the application maybe just needs more memory? What is the memory usage of that batch process? Analyzing several heapdumps of the executions could give you a ideas of what consumes most. This is the kind of issue that you need to troubleshoot directly and Stackoverflow is not well suited to help.","body":"You should ask yourself:<code>too many Full GC&#39;s occurring frequently</code> what is too many? how many do you expect? before tuning the GC -most times that is a bad idea- have you verified that the application maybe just needs more memory? What is the memory usage of that batch process? Analyzing several heapdumps of the executions could give you a ideas of what consumes most. This is the kind of issue that you need to troubleshoot directly and Stackoverflow is not well suited to help."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689785815,"post_id":76722901,"comment_id":135263999,"body_markdown":"Also which `Java 8`? Provider and update number? Oracle, Temurin, Amazon, etc? Are you using the latest OpenJDK patch update with the latest fixes for G1, or the original Oracle Java 8 from 2014? Same with Spring Batch and other libraries your process uses.","body":"Also which <code>Java 8</code>? Provider and update number? Oracle, Temurin, Amazon, etc? Are you using the latest OpenJDK patch update with the latest fixes for G1, or the original Oracle Java 8 from 2014? Same with Spring Batch and other libraries your process uses."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1690196611,"post_id":76722901,"comment_id":135314939,"body_markdown":"Remove -XX:NewSize=3g Thats the best advice you have found. Instead of adding even more options you dont understand, remove them. And it makes perfect sense that if you want to avoid Full&#160;GC you shouldnt set the new generation to a ridiculously small value (compared to the overall heap size).","body":"Remove -XX:NewSize=3g Thats the best advice you have found. Instead of adding even more options you dont understand, remove them. And it makes perfect sense that if you want to avoid Full GC you shouldnt set the new generation to a ridiculously small value (compared to the overall heap size)."}],"owner":{"account_id":6231063,"reputation":41,"user_id":4847840,"display_name":"bhagyac"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689780362,"creation_date":1689780362,"question_id":76722901,"body_markdown":"We have a Spring Batch job currently having long running issue in production. On checking GC logs we have found that too many Full GC&#39;s occurring frequently. We are using G1GC collector and Java 8 version.\r\n\r\n**Below are the JVM arguments:**\r\n```\r\n-Xms6g -Xmx20g -XX:NewSize=3g -XX:+UseG1GC -Xloggc:/local/apps/stock.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:-HeapDumpOnOutOfMemoryError\r\n```\r\n\r\n**GC log file is analyzed using GCViewer tool, below is the report:**\r\n[![enter image description here](https://i.stack.imgur.com/VdUuj.png)](https://i.stack.imgur.com/VdUuj.png)\r\n\r\n\r\n[![enter image description here](https://i.stack.imgur.com/n9oHo.png)](https://i.stack.imgur.com/n9oHo.png)\r\n\r\n\r\n[![enter image description here](https://i.stack.imgur.com/hsvfz.png)](https://i.stack.imgur.com/hsvfz.png)\r\n\r\n\r\n\r\n**GC Pauses:**\r\n1. GC cleanup\r\n2. GC pause (G1 Evacuation Pause) (mixed)\r\n3. GC pause (G1 Evacuation Pause) (mixed) (to-space exhausted)\r\n4. GC pause (G1 Evacuation Pause) (young)\r\n5. GC pause (G1 Evacuation Pause) (young) (initial-mark)\r\n6. GC pause (G1 Evacuation Pause) (young) (to-space exhausted)\r\n7. GC pause (G1 Humongous Allocation) (young)\r\n8. GC pause (G1 Humongous Allocation) (young) (initial-mark)\r\n9. GC pause (G1 Humongous Allocation) (young) (to-space exhausted)\r\n10.GC pause (GCLocker Initiated GC) (young)\r\n11. GC pause (Metadata GC Threshold) (young) (initial-mark)\r\n12. GC remark;GC ref-proc\r\n\r\n**Full GC Pauses:**\r\n1. Full GC (Allocation Failure);Eden;Metaspace\r\n\r\n\r\n\r\nReproducing the Full GC issue in test environment is not possible, so on the basis of report I am trying to resolve this issue.\r\nAfter going through GC log report and various blogs on G1 collector, I am assuming that below GC tuning is required and need to add/modify below parameters.\r\n\r\n1. Remove -XX:NewSize=3g\r\n2. Add -XX:+DisableExplicitGC to disabled System.gc() calls.\r\n3. Increase heap size (Xmx) and setting Xms and Xmx to same value. \r\n4. Add -XX:+UseStringDeduplication -XX:+PrintStringDeduplicationStatistics\r\n5. Set -XX:MaxGCPauseMillis to high value to maximize the throughput.\r\n\r\nCan you suggest if any more parameters need to add and what should be the correct value for these parameters.\r\n","title":"G1GC performance tuning using GC viewer tool","body":"<p>We have a Spring Batch job currently having long running issue in production. On checking GC logs we have found that too many Full GC's occurring frequently. We are using G1GC collector and Java 8 version.</p>\n<p><strong>Below are the JVM arguments:</strong></p>\n<pre><code>-Xms6g -Xmx20g -XX:NewSize=3g -XX:+UseG1GC -Xloggc:/local/apps/stock.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:-HeapDumpOnOutOfMemoryError\n</code></pre>\n<p><strong>GC log file is analyzed using GCViewer tool, below is the report:</strong>\n<a href=\"https://i.stack.imgur.com/VdUuj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VdUuj.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/n9oHo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n9oHo.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/hsvfz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hsvfz.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>GC Pauses:</strong></p>\n<ol>\n<li>GC cleanup</li>\n<li>GC pause (G1 Evacuation Pause) (mixed)</li>\n<li>GC pause (G1 Evacuation Pause) (mixed) (to-space exhausted)</li>\n<li>GC pause (G1 Evacuation Pause) (young)</li>\n<li>GC pause (G1 Evacuation Pause) (young) (initial-mark)</li>\n<li>GC pause (G1 Evacuation Pause) (young) (to-space exhausted)</li>\n<li>GC pause (G1 Humongous Allocation) (young)</li>\n<li>GC pause (G1 Humongous Allocation) (young) (initial-mark)</li>\n<li>GC pause (G1 Humongous Allocation) (young) (to-space exhausted)\n10.GC pause (GCLocker Initiated GC) (young)</li>\n<li>GC pause (Metadata GC Threshold) (young) (initial-mark)</li>\n<li>GC remark;GC ref-proc</li>\n</ol>\n<p><strong>Full GC Pauses:</strong></p>\n<ol>\n<li>Full GC (Allocation Failure);Eden;Metaspace</li>\n</ol>\n<p>Reproducing the Full GC issue in test environment is not possible, so on the basis of report I am trying to resolve this issue.\nAfter going through GC log report and various blogs on G1 collector, I am assuming that below GC tuning is required and need to add/modify below parameters.</p>\n<ol>\n<li>Remove -XX:NewSize=3g</li>\n<li>Add -XX:+DisableExplicitGC to disabled System.gc() calls.</li>\n<li>Increase heap size (Xmx) and setting Xms and Xmx to same value.</li>\n<li>Add -XX:+UseStringDeduplication -XX:+PrintStringDeduplicationStatistics</li>\n<li>Set -XX:MaxGCPauseMillis to high value to maximize the throughput.</li>\n</ol>\n<p>Can you suggest if any more parameters need to add and what should be the correct value for these parameters.</p>\n"},{"tags":["java","tomcat","war","spring-4"],"owner":{"account_id":1737509,"reputation":2183,"user_id":1589723,"accept_rate":45,"display_name":"fashuser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689780239,"creation_date":1689773996,"question_id":76721943,"body_markdown":"I have few spring applications deployed into single tomcat server. Those applications are part of single WAR. Each application has it&#39;s own dispatcher servlet with respective controllers behind of it. \r\n\r\nI have use case where communication between those applications are needed. What is the optimal way to do this? Will be it ok to use rest template here?","title":"Communication between two spring controllers from different spring applications deployed into single tomcat server","body":"<p>I have few spring applications deployed into single tomcat server. Those applications are part of single WAR. Each application has it's own dispatcher servlet with respective controllers behind of it.</p>\n<p>I have use case where communication between those applications are needed. What is the optimal way to do this? Will be it ok to use rest template here?</p>\n"},{"tags":["java","string","java-stream"],"comments":[{"owner":{"account_id":6136413,"reputation":8488,"user_id":4785110,"display_name":"maraca"},"score":0,"creation_date":1689774987,"post_id":76722029,"comment_id":135261286,"body_markdown":"Add another mapping to convert the character to string before joining.","body":"Add another mapping to convert the character to string before joining."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1689774989,"post_id":76722029,"comment_id":135261289,"body_markdown":"`Collectors.joining()` is for a stream of strings, not a stream of Characters.","body":"<code>Collectors.joining()</code> is for a stream of strings, not a stream of Characters."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1689775008,"post_id":76722029,"comment_id":135261298,"body_markdown":"Likely to do with the fact that you&#39;re working with `Character`. A lazy solution would be `.map(c -&gt; &quot;&quot; + c)` right before the `#collect`.","body":"Likely to do with the fact that you&#39;re working with <code>Character</code>. A lazy solution would be <code>.map(c -&gt; &quot;&quot; + c)</code> right before the <code>#collect</code>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689930355,"post_id":76722029,"comment_id":135285758,"body_markdown":"Get familiar with the concept of *codepoints*. Not only are they necessary for handling characters outside the BMP, dropping the idea that you need a `char` avoids the boxing overhead of your approach, `str.codePoints() .filter(c -&gt; !Character.isWhitespace(c)) .map(Character::toLowerCase) .mapToObj(Character::toString) .collect(Collectors.joining());` Note how most operations happily operate on `int` now instead of `Character` objects. Further, since `toLowerCase` does not affect the outcome of `isWhitespace`, its more efficient to filter first.","body":"Get familiar with the concept of <i>codepoints</i>. Not only are they necessary for handling characters outside the BMP, dropping the idea that you need a <code>char</code> avoids the boxing overhead of your approach, <code>str.codePoints() .filter(c -&gt; !Character.isWhitespace(c)) .map(Character::toLowerCase) .mapToObj(Character::toString) .collect(Collectors.joining());</code> Note how most operations happily operate on <code>int</code> now instead of <code>Character</code> objects. Further, since <code>toLowerCase</code> does not affect the outcome of <code>isWhitespace</code>, its more efficient to filter first."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689930422,"post_id":76722029,"comment_id":135285774,"body_markdown":"You could even avoid the creation of temporary `String` objects for collecting, as shown in [this answer](https://stackoverflow.com/a/20268845/2711488).","body":"You could even avoid the creation of temporary <code>String</code> objects for collecting, as shown in <a href=\"https://stackoverflow.com/a/20268845/2711488\">this answer</a>."},{"owner":{"account_id":15192247,"reputation":11,"user_id":10962676,"display_name":"abhinav"},"score":0,"creation_date":1689962946,"post_id":76722029,"comment_id":135292055,"body_markdown":"@Holger Thank you for the suggestion. Will keep this in mind.","body":"@Holger Thank you for the suggestion. Will keep this in mind."}],"answers":[{"comments":[{"owner":{"account_id":6136413,"reputation":8488,"user_id":4785110,"display_name":"maraca"},"score":1,"creation_date":1689775751,"post_id":76722115,"comment_id":135261523,"body_markdown":"I don&#39;t think that&#39;s the same. More something like `str = str.toLowerCase().replaceAll(&quot;\\\\s+&quot;, &quot;&quot;);` because of the whitespaces.","body":"I don&#39;t think that&#39;s the same. More something like <code>str = str.toLowerCase().replaceAll(&quot;\\\\s+&quot;, &quot;&quot;);</code> because of the whitespaces."},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1689775835,"post_id":76722115,"comment_id":135261549,"body_markdown":"@maraca I removed my suggest, It was not correct :)","body":"@maraca I removed my suggest, It was not correct :)"}],"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689775811,"creation_date":1689775073,"answer_id":76722115,"question_id":76722029,"body_markdown":"You need to convert the Character to String before joining, you need this:\r\n\r\n    ...\r\n    .map(c -&gt; Character.toString(c))\r\n    .collect(Collectors.joining());\r\n","title":"Problem while using Collectors.joining() in Java 8 Stream","body":"<p>You need to convert the Character to String before joining, you need this:</p>\n<pre><code>...\n.map(c -&gt; Character.toString(c))\n.collect(Collectors.joining());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":28189864,"reputation":917,"user_id":21545421,"display_name":"amycodes"},"score":0,"creation_date":1690069245,"post_id":76722212,"comment_id":135301925,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76722212/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":6134368,"reputation":11,"user_id":4783688,"display_name":"Nguyen Pham"},"score":0,"creation_date":1690089145,"post_id":76722212,"comment_id":135302888,"body_markdown":"@amycodes I think a simple debug on any available IDE could verify you the validity of the above codes. Unless you&#39;re a bot or something then I&#39;m just chatting with air","body":"@amycodes I think a simple debug on any available IDE could verify you the validity of the above codes. Unless you&#39;re a bot or something then I&#39;m just chatting with air"},{"owner":{"account_id":28189864,"reputation":917,"user_id":21545421,"display_name":"amycodes"},"score":0,"creation_date":1690189757,"post_id":76722212,"comment_id":135313490,"body_markdown":"It was a pre written response but I am a human lol. The point of the response is to highlight that you should add relevant documentation links etc for future readers to refer to.","body":"It was a pre written response but I am a human lol. The point of the response is to highlight that you should add relevant documentation links etc for future readers to refer to."}],"tags":[],"owner":{"account_id":6134368,"reputation":11,"user_id":4783688,"display_name":"Nguyen Pham"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689775801,"creation_date":1689775706,"answer_id":76722212,"question_id":76722029,"body_markdown":"your input stream at Collectors.joining is ```Stream&lt;Character&gt;```, wouldn&#39;t work with Collectors.joining, you have to convert the Character to string first\r\n\r\ndo \r\n\r\n     String s = str.chars()\r\n        .mapToObj(c -&gt; (char) c)\r\n        .map(Character::toLowerCase)\r\n        .filter(c -&gt; !Character.isWhitespace(c))\r\n        .map(String::valueOf)\r\n        .collect(Collectors.joining());","title":"Problem while using Collectors.joining() in Java 8 Stream","body":"<p>your input stream at Collectors.joining is <code>Stream&lt;Character&gt;</code>, wouldn't work with Collectors.joining, you have to convert the Character to string first</p>\n<p>do</p>\n<pre><code> String s = str.chars()\n    .mapToObj(c -&gt; (char) c)\n    .map(Character::toLowerCase)\n    .filter(c -&gt; !Character.isWhitespace(c))\n    .map(String::valueOf)\n    .collect(Collectors.joining());\n</code></pre>\n"}],"owner":{"account_id":15192247,"reputation":11,"user_id":10962676,"display_name":"abhinav"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76722115,"answer_count":2,"score":0,"last_activity_date":1689780104,"creation_date":1689774574,"question_id":76722029,"body_markdown":"I tried to filter a stream of characters based on some constraints and then tried to collect them in a string.\r\n\r\n\r\nThis is what I tried:\r\n\r\n    String s = str.chars()\r\n              .mapToObj(c -&gt; (char) c) \r\n              .map(Character::toLowerCase)\r\n              .filter(c -&gt; !Character.isWhitespace(c))\r\n              .collect(Collectors.joining());\r\n\r\n`Collectors.joining()` should concatenate the contents of the stream into a String, but this last bit of code produces an error. Why is this happening?","title":"Problem while using Collectors.joining() in Java 8 Stream","body":"<p>I tried to filter a stream of characters based on some constraints and then tried to collect them in a string.</p>\n<p>This is what I tried:</p>\n<pre><code>String s = str.chars()\n          .mapToObj(c -&gt; (char) c) \n          .map(Character::toLowerCase)\n          .filter(c -&gt; !Character.isWhitespace(c))\n          .collect(Collectors.joining());\n</code></pre>\n<p><code>Collectors.joining()</code> should concatenate the contents of the stream into a String, but this last bit of code produces an error. Why is this happening?</p>\n"},{"tags":["java","android","xml","android-toolbar","android-menu"],"comments":[{"owner":{"account_id":5072615,"reputation":2107,"user_id":4070971,"accept_rate":55,"display_name":"Chol"},"score":4,"creation_date":1456481660,"post_id":35648913,"comment_id":58978052,"body_markdown":"You can check here : http://stackoverflow.com/questions/31231609/creating-a-button-in-android-toolbar","body":"You can check here : <a href=\"http://stackoverflow.com/questions/31231609/creating-a-button-in-android-toolbar\" title=\"creating a button in android toolbar\">stackoverflow.com/questions/31231609/&hellip;</a>"},{"owner":{"account_id":5072615,"reputation":2107,"user_id":4070971,"accept_rate":55,"display_name":"Chol"},"score":3,"creation_date":1456481830,"post_id":35648913,"comment_id":58978194,"body_markdown":"And better from google : http://developer.android.com/training/appbar/setting-up.html","body":"And better from google : <a href=\"http://developer.android.com/training/appbar/setting-up.html\" rel=\"nofollow noreferrer\">developer.android.com/training/appbar/setting-up.html</a>"},{"owner":{"account_id":4853581,"reputation":572,"user_id":3915258,"display_name":"skryshtafovych"},"score":2,"creation_date":1521839760,"post_id":35648913,"comment_id":85919729,"body_markdown":"This is what i was missing         toolbar.inflateMenu(R.menu.main_manu);","body":"This is what i was missing         toolbar.inflateMenu(R.menu.main_manu);"},{"owner":{"account_id":212305,"reputation":24681,"user_id":465053,"accept_rate":83,"display_name":"RBT"},"score":1,"creation_date":1533772304,"post_id":35648913,"comment_id":90473635,"body_markdown":"Related post - [How to add buttons like refresh and search in ToolBar in Android?](https://stackoverflow.com/q/26778701/465053)","body":"Related post - <a href=\"https://stackoverflow.com/q/26778701/465053\">How to add buttons like refresh and search in ToolBar in Android?</a>"},{"owner":{"account_id":413639,"reputation":2040,"user_id":787399,"accept_rate":62,"display_name":"Abhinav Saxena"},"score":0,"creation_date":1549975004,"post_id":35648913,"comment_id":96091684,"body_markdown":"Try to create a new application using `Android Studio` and check it out. `ToolBar&#39; should not be an independent entity.","body":"Try to create a new application using <code>Android Studio</code> and check it out. `ToolBar&#39; should not be an independent entity."}],"answers":[{"tags":[],"owner":{"account_id":3774905,"reputation":4331,"user_id":3135983,"display_name":"Keyur Lakhani"},"comment_count":0,"down_vote_count":3,"up_vote_count":190,"is_accepted":true,"score":187,"last_activity_date":1456481807,"creation_date":1456481807,"answer_id":35649007,"question_id":35648913,"body_markdown":"just override **onCreateOptionsMenu** like this in your MainPage.java\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        getMenuInflater().inflate(R.menu.main_menu, menu);\r\n        return true;\r\n    }\r\n\r\n ","title":"How to set menu to Toolbar in Android","body":"<p>just override <strong>onCreateOptionsMenu</strong> like this in your MainPage.java</p>\n\n<pre><code>@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    // Inflate the menu; this adds items to the action bar if it is present.\n    getMenuInflater().inflate(R.menu.main_menu, menu);\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6941897,"reputation":3971,"user_id":5327912,"accept_rate":33,"display_name":"Parth Anjaria"},"comment_count":0,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1545923797,"creation_date":1456482418,"answer_id":35649219,"question_id":35648913,"body_markdown":"You need to override this code in your Activity:\r\n\r\n\r\n    @Override\r\n\tpublic boolean onCreateOptionsMenu(Menu menu) {\r\n\t\t// Inflate the menu, this adds items to the action bar if it is present.\r\n\t\tgetMenuInflater().inflate(R.menu.main2, menu);\r\n\t\treturn true;\r\n\t}\r\n\r\nand set your toolbar like this:\r\n\r\n\r\n\r\n    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\r\n    setSupportActionBar(toolbar);","title":"How to set menu to Toolbar in Android","body":"<p>You need to override this code in your Activity:</p>\n\n<pre><code>@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    // Inflate the menu, this adds items to the action bar if it is present.\n    getMenuInflater().inflate(R.menu.main2, menu);\n    return true;\n}\n</code></pre>\n\n<p>and set your toolbar like this:</p>\n\n<pre><code>Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\nsetSupportActionBar(toolbar);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12463948,"reputation":549,"user_id":9074761,"display_name":"Liliana J"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1514934159,"creation_date":1514934159,"answer_id":48069020,"question_id":35648913,"body_markdown":"Also you need this, to implement some action to every options of menu.\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        switch (item.getItemId()) {\r\n            case R.id.menu_help:\r\n                Toast.makeText(this, &quot;This is teh option help&quot;, Toast.LENGTH_LONG).show();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return true;\r\n    }\r\n","title":"How to set menu to Toolbar in Android","body":"<p>Also you need this, to implement some action to every options of menu.</p>\n\n<pre><code>@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    switch (item.getItemId()) {\n        case R.id.menu_help:\n            Toast.makeText(this, \"This is teh option help\", Toast.LENGTH_LONG).show();\n            break;\n        default:\n            break;\n    }\n    return true;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":355087,"reputation":1296,"user_id":693829,"accept_rate":75,"display_name":"Richard Rout"},"score":9,"creation_date":1522768295,"post_id":49098384,"comment_id":86274286,"body_markdown":"You answer alarms me, but it doesn&#39;t explain why I shouldn&#39;t use it.","body":"You answer alarms me, but it doesn&#39;t explain why I shouldn&#39;t use it."},{"owner":{"account_id":8661684,"reputation":348,"user_id":6483812,"display_name":"Vinicius Victor"},"score":8,"creation_date":1523507502,"post_id":49098384,"comment_id":86591072,"body_markdown":"You should explain why not to use setSupportActionBar(toolbar) instead of just saying what works for you.","body":"You should explain why not to use setSupportActionBar(toolbar) instead of just saying what works for you."},{"owner":{"account_id":1465562,"reputation":884,"user_id":1378507,"accept_rate":72,"display_name":"Washington A. Ramos"},"score":1,"creation_date":1524092898,"post_id":49098384,"comment_id":86836480,"body_markdown":"This is the only thing that worked for me. I&#39;m using Xamarin.Android with a custom Toolbar.","body":"This is the only thing that worked for me. I&#39;m using Xamarin.Android with a custom Toolbar."},{"owner":{"account_id":5981137,"reputation":17327,"user_id":4700156,"accept_rate":64,"display_name":"Rohit Singh"},"score":1,"creation_date":1549450664,"post_id":49098384,"comment_id":95903799,"body_markdown":"I will read more about it and update the answer @AbhinavSaxena. Good call","body":"I will read more about it and update the answer @AbhinavSaxena. Good call"},{"owner":{"account_id":413639,"reputation":2040,"user_id":787399,"accept_rate":62,"display_name":"Abhinav Saxena"},"score":0,"creation_date":1549971917,"post_id":49098384,"comment_id":96089801,"body_markdown":"Please post the main_activity_layout.xml as well. This works and is an outstanding solution, but you have to complete the answer. Rest I have done in my answer.","body":"Please post the main_activity_layout.xml as well. This works and is an outstanding solution, but you have to complete the answer. Rest I have done in my answer."},{"owner":{"account_id":1291901,"reputation":761,"user_id":1253644,"display_name":"mtrewartha"},"score":2,"creation_date":1553391204,"post_id":49098384,"comment_id":97366859,"body_markdown":"For me, the benefit in this was that I no longer needed to tie my Toolbars to the support ActionBar in my single activity (but many, many fragments) app, which demanded all sorts of annoying hacks to make the app look and behave well.","body":"For me, the benefit in this was that I no longer needed to tie my Toolbars to the support ActionBar in my single activity (but many, many fragments) app, which demanded all sorts of annoying hacks to make the app look and behave well."},{"owner":{"account_id":7274863,"reputation":252,"user_id":5546660,"accept_rate":100,"display_name":"A. Harkous"},"score":0,"creation_date":1560681678,"post_id":49098384,"comment_id":99809650,"body_markdown":"I used this approach to add an extra toolbar below the original fixed one to give extra actions in some situations instead of adding them to the original toolbar.. but still not clear why not to use setSupportActionBar in normal cases?","body":"I used this approach to add an extra toolbar below the original fixed one to give extra actions in some situations instead of adding them to the original toolbar.. but still not clear why not to use setSupportActionBar in normal cases?"},{"owner":{"account_id":2102806,"reputation":747,"user_id":1869957,"accept_rate":75,"display_name":"Dinesh Singh"},"score":0,"creation_date":1579078376,"post_id":49098384,"comment_id":105642638,"body_markdown":"@RohitSingh I guess you might be using setSupportActionBar(toolbar) before calling setContentView. That&#39;s why you were facing this issue. Try setting the toolbar after calling setContentView method. It might work :)","body":"@RohitSingh I guess you might be using setSupportActionBar(toolbar) before calling setContentView. That&#39;s why you were facing this issue. Try setting the toolbar after calling setContentView method. It might work :)"},{"owner":{"account_id":2984923,"reputation":1960,"user_id":2534007,"display_name":"Mohib Irshad"},"score":0,"creation_date":1598039016,"post_id":49098384,"comment_id":112338756,"body_markdown":"You can still use setSupportActionBar(toolbar) while using this answer. Please see my answer on how to do it","body":"You can still use setSupportActionBar(toolbar) while using this answer. Please see my answer on how to do it"},{"owner":{"account_id":10985339,"reputation":384,"user_id":8071252,"display_name":"Ricardo Yubal"},"score":0,"creation_date":1643518279,"post_id":49098384,"comment_id":125359455,"body_markdown":"Pretty misleading answer, especially with that bigger text. `setSupportActionBar` along with Keyur&#39;s answer is working perfectly fine for me.","body":"Pretty misleading answer, especially with that bigger text. <code>setSupportActionBar</code> along with Keyur&#39;s answer is working perfectly fine for me."},{"owner":{"account_id":3884067,"reputation":843,"user_id":3215911,"display_name":"iroiroys"},"score":0,"creation_date":1676866127,"post_id":49098384,"comment_id":133217085,"body_markdown":"In my case, deleting a line `supportActionbar = toolbar` make it out.","body":"In my case, deleting a line <code>supportActionbar = toolbar</code> make it out."},{"owner":{"account_id":3330459,"reputation":517,"user_id":2799526,"display_name":"Szabolcs Becze"},"score":0,"creation_date":1678714494,"post_id":49098384,"comment_id":133581807,"body_markdown":"I would also add that right after the inflate you can access the menu like the follwoing\n\n Menu menu = toolbar.getMenu();\n MenuItem searchItem = menu.findItem(R.id.[your_id]);","body":"I would also add that right after the inflate you can access the menu like the follwoing   Menu menu = toolbar.getMenu();  MenuItem searchItem = menu.findItem(R.id.[your_id]);"}],"tags":[],"owner":{"account_id":5981137,"reputation":17327,"user_id":4700156,"accept_rate":64,"display_name":"Rohit Singh"},"comment_count":12,"down_vote_count":5,"up_vote_count":132,"is_accepted":false,"score":127,"last_activity_date":1639974893,"creation_date":1520185500,"answer_id":49098384,"question_id":35648913,"body_markdown":"## Don&#39;t use `setSupportActionBar(toolbar)`\r\n\r\nI don&#39;t know why but this works for me. \r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    toolbar = (Toolbar) findViewById(R.id.main_toolbar);\r\n    toolbar.setSubtitle(&quot;Test Subtitle&quot;);\r\n    toolbar.inflateMenu(R.menu.main_menu);\r\n\r\nFor menu item click do this:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    toolbar.setOnMenuItemClickListener(new Toolbar.OnMenuItemClickListener() {\r\n        @Override\r\n        public boolean onMenuItemClick(MenuItem item) {\r\n            if (item.getItemId() == R.id.item1) {\r\n                // do something\r\n            } else if (item.getItemId() == R.id.filter) {\r\n                // do something\r\n            } else {\r\n                // do something\r\n            }\r\n\r\n            return false;\r\n        }\r\n    });\r\n\r\nWill update the *why* part of this answer when I find a proper explanation.","title":"How to set menu to Toolbar in Android","body":"<h2>Don't use <code>setSupportActionBar(toolbar)</code></h2>\n<p>I don't know why but this works for me.</p>\n<pre class=\"lang-java prettyprint-override\"><code>toolbar = (Toolbar) findViewById(R.id.main_toolbar);\ntoolbar.setSubtitle(&quot;Test Subtitle&quot;);\ntoolbar.inflateMenu(R.menu.main_menu);\n</code></pre>\n<p>For menu item click do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>toolbar.setOnMenuItemClickListener(new Toolbar.OnMenuItemClickListener() {\n    @Override\n    public boolean onMenuItemClick(MenuItem item) {\n        if (item.getItemId() == R.id.item1) {\n            // do something\n        } else if (item.getItemId() == R.id.filter) {\n            // do something\n        } else {\n            // do something\n        }\n\n        return false;\n    }\n});\n</code></pre>\n<p>Will update the <em>why</em> part of this answer when I find a proper explanation.</p>\n"},{"tags":[],"owner":{"account_id":9280154,"reputation":57862,"user_id":6891563,"accept_rate":75,"display_name":"Khemraj Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524120002,"creation_date":1524120002,"answer_id":49914315,"question_id":35648913,"body_markdown":"In your activity override this method. \r\n\r\n\r\n       @Override\r\n        public boolean onCreateOptionsMenu(Menu menu) {\r\n            getMenuInflater().inflate(R.menu.main_menu, menu);\r\n            return true;\r\n        }\r\n\r\nThis will inflate your menu below:\r\n   \r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n        &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n        \r\n            &lt;item\r\n                android:id=&quot;@+id/menu_main_setting&quot;\r\n                android:icon=&quot;@drawable/ic_settings&quot;\r\n                android:orderInCategory=&quot;100&quot;\r\n                app:showAsAction=&quot;always&quot;\r\n                android:actionLayout=&quot;@layout/toolbar&quot;\r\n                android:title=&quot;Setting&quot; /&gt;\r\n        \r\n            &lt;item\r\n                android:id=&quot;@+id/menu_main_setting2&quot;\r\n                android:icon=&quot;@drawable/ic_settings&quot;\r\n                android:orderInCategory=&quot;200&quot;\r\n                app:showAsAction=&quot;always&quot;\r\n                android:actionLayout=&quot;@layout/toolbar&quot;\r\n                android:title=&quot;Setting&quot; /&gt;\r\n        \r\n        &lt;/menu&gt;\r\n\r\n","title":"How to set menu to Toolbar in Android","body":"<p>In your activity override this method. </p>\n\n<pre><code>   @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        getMenuInflater().inflate(R.menu.main_menu, menu);\n        return true;\n    }\n</code></pre>\n\n<p>This will inflate your menu below:</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n    &lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n        &lt;item\n            android:id=\"@+id/menu_main_setting\"\n            android:icon=\"@drawable/ic_settings\"\n            android:orderInCategory=\"100\"\n            app:showAsAction=\"always\"\n            android:actionLayout=\"@layout/toolbar\"\n            android:title=\"Setting\" /&gt;\n\n        &lt;item\n            android:id=\"@+id/menu_main_setting2\"\n            android:icon=\"@drawable/ic_settings\"\n            android:orderInCategory=\"200\"\n            app:showAsAction=\"always\"\n            android:actionLayout=\"@layout/toolbar\"\n            android:title=\"Setting\" /&gt;\n\n    &lt;/menu&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2236007,"reputation":2921,"user_id":1972372,"accept_rate":83,"display_name":"Big_Chair"},"score":9,"creation_date":1556631865,"post_id":50225618,"comment_id":98498279,"body_markdown":"Thanks for actually showing all necessary components together, instead of just two code lines.","body":"Thanks for actually showing all necessary components together, instead of just two code lines."}],"tags":[],"owner":{"account_id":4531600,"reputation":491537,"user_id":3681880,"accept_rate":90,"display_name":"Suragch"},"comment_count":1,"down_vote_count":0,"up_vote_count":87,"is_accepted":false,"score":87,"last_activity_date":1593523171,"creation_date":1525752021,"answer_id":50225618,"question_id":35648913,"body_markdown":"Here is a fuller answer as a reference to future visitors. I usually use a [support toolbar][1] but it works just as well either way.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n## 1. Make a menu xml\r\n\r\nThis is going to be in `res/menu/main_menu`.\r\n\r\n- Right click the `res` folder and choose **New &gt; Android Resource File**. \r\n- Type `main_menu` for the File name.\r\n- Choose Menu for the Resource type.\r\n\r\nPaste in the following content as a starter.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/action_add&quot;\r\n            android:icon=&quot;@drawable/ic_add&quot;\r\n            app:showAsAction=&quot;ifRoom&quot;\r\n            android:title=&quot;Add&quot;&gt;\r\n        &lt;/item&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/action_settings&quot;\r\n            app:showAsAction=&quot;never&quot;\r\n            android:title=&quot;Settings&quot;&gt;\r\n        &lt;/item&gt;\r\n    &lt;/menu&gt;\r\n\r\nYou can right click `res` and choose **New image asset** to create the `ic_add` icon.\r\n\r\n## 2. Inflate the menu\r\n\r\nIn your activity add the following method.\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        getMenuInflater().inflate(R.menu.main_menu, menu);\r\n        return true;\r\n    }\r\n\r\n## 3. Handle menu clicks\r\n\r\nAlso in your Activity, add the following method:\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        // Handle item selection\r\n        switch (item.getItemId()) {\r\n            case R.id.action_add:\r\n                addSomething();\r\n                return true;\r\n            case R.id.action_settings:\r\n                startSettings();\r\n                return true;\r\n            default:\r\n                return super.onOptionsItemSelected(item);\r\n        }\r\n    }\r\n\r\n## Further reading\r\n\r\n- [Android Menu Documentation][3]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/39302444/3681880\r\n  [2]: https://i.stack.imgur.com/8QDxE.png\r\n  [3]: https://developer.android.com/guide/topics/ui/menus.html","title":"How to set menu to Toolbar in Android","body":"<p>Here is a fuller answer as a reference to future visitors. I usually use a <a href=\"https://stackoverflow.com/a/39302444/3681880\">support toolbar</a> but it works just as well either way.</p>\n<p><a href=\"https://i.stack.imgur.com/8QDxE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/8QDxE.png\" alt=\"enter image description here\" /></a></p>\n<h2>1. Make a menu xml</h2>\n<p>This is going to be in <code>res/menu/main_menu</code>.</p>\n<ul>\n<li>Right click the <code>res</code> folder and choose <strong>New &gt; Android Resource File</strong>.</li>\n<li>Type <code>main_menu</code> for the File name.</li>\n<li>Choose Menu for the Resource type.</li>\n</ul>\n<p>Paste in the following content as a starter.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\n    &lt;item\n        android:id=&quot;@+id/action_add&quot;\n        android:icon=&quot;@drawable/ic_add&quot;\n        app:showAsAction=&quot;ifRoom&quot;\n        android:title=&quot;Add&quot;&gt;\n    &lt;/item&gt;\n    &lt;item\n        android:id=&quot;@+id/action_settings&quot;\n        app:showAsAction=&quot;never&quot;\n        android:title=&quot;Settings&quot;&gt;\n    &lt;/item&gt;\n&lt;/menu&gt;\n</code></pre>\n<p>You can right click <code>res</code> and choose <strong>New image asset</strong> to create the <code>ic_add</code> icon.</p>\n<h2>2. Inflate the menu</h2>\n<p>In your activity add the following method.</p>\n<pre><code>@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.main_menu, menu);\n    return true;\n}\n</code></pre>\n<h2>3. Handle menu clicks</h2>\n<p>Also in your Activity, add the following method:</p>\n<pre><code>@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    // Handle item selection\n    switch (item.getItemId()) {\n        case R.id.action_add:\n            addSomething();\n            return true;\n        case R.id.action_settings:\n            startSettings();\n            return true;\n        default:\n            return super.onOptionsItemSelected(item);\n    }\n}\n</code></pre>\n<h2>Further reading</h2>\n<ul>\n<li><a href=\"https://developer.android.com/guide/topics/ui/menus.html\" rel=\"noreferrer\">Android Menu Documentation</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":413639,"reputation":2040,"user_id":787399,"accept_rate":62,"display_name":"Abhinav Saxena"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1550833108,"creation_date":1549962283,"answer_id":54646290,"question_id":35648913,"body_markdown":"Although I agree with this answer, as it has fewer lines of code and that it works:\r\n\r\n[How to set menu to Toolbar in Android\r\n][1]\r\n\r\nMy suggestion would be to always start any project using the Android Studio Wizard. In that code you will find some styles:- \r\n\r\n`&lt;style name=&quot;AppTheme.AppBarOverlay&quot; parent=&quot;ThemeOverlay.AppCompat.Dark.ActionBar&quot; /&gt;`\r\n\r\n\r\n`&lt;style name=&quot;AppTheme.PopupOverlay&quot; parent=&quot;ThemeOverlay.AppCompat.Light&quot; /&gt;`\r\n\r\nand usage is:\r\n\r\n    &lt;android.support.design.widget.AppBarLayout\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\r\n    \r\n    &lt;android.support.v7.widget.Toolbar\r\n    android:id=&quot;@+id/toolbar&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;?attr/actionBarSize&quot;\r\n    android:background=&quot;?attr/colorPrimary&quot;\r\n    app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot; /&gt;\r\n    \r\n    &lt;/android.support.design.widget.AppBarLayout&gt; \r\n\r\n**Due to `no action bar theme` declared in `styles.xml`, that is applied to the `Main Activity`in the `AndroidManifest.xml`, there are no  exceptions, so you have to check it there.**\r\n\r\n    &lt;activity android:name=&quot;.MainActivity&quot; android:screenOrientation=&quot;portrait&quot;\r\n            android:theme=&quot;@style/AppTheme.NoActionBar&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n 1. The `Toolbar` is not an independent entity, it is always a child\r\n    view in `AppBarLayout` that again is the child of\r\n    `CoordinatorLayout`.\r\n 2. The code for creating a menu is the standard code since day one,\r\n    that is repeated again and again in all the answers, particularly\r\n    the marked one, but nobody realized what is the difference.\r\n\r\n**BOTH:**\r\n\r\n`Toolbar toolbar = findViewById(R.id.toolbar);\r\nsetSupportActionBar(toolbar);`\r\n\r\n**AND:**\r\n\r\n[How to set menu to Toolbar in Android\r\n][1]\r\n\r\n**WILL WORK.**\r\n\r\nHappy Coding :-)\r\n\r\n\r\n  [1]: http://stackoverflow.com/a/49098384/787399","title":"How to set menu to Toolbar in Android","body":"<p>Although I agree with this answer, as it has fewer lines of code and that it works:</p>\n\n<p><a href=\"http://stackoverflow.com/a/49098384/787399\">How to set menu to Toolbar in Android\n</a></p>\n\n<p>My suggestion would be to always start any project using the Android Studio Wizard. In that code you will find some styles:- </p>\n\n<p><code>&lt;style name=\"AppTheme.AppBarOverlay\" parent=\"ThemeOverlay.AppCompat.Dark.ActionBar\" /&gt;</code></p>\n\n<p><code>&lt;style name=\"AppTheme.PopupOverlay\" parent=\"ThemeOverlay.AppCompat.Light\" /&gt;</code></p>\n\n<p>and usage is:</p>\n\n<pre><code>&lt;android.support.design.widget.AppBarLayout\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\nandroid:theme=\"@style/AppTheme.AppBarOverlay\"&gt;\n\n&lt;android.support.v7.widget.Toolbar\nandroid:id=\"@+id/toolbar\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"?attr/actionBarSize\"\nandroid:background=\"?attr/colorPrimary\"\napp:popupTheme=\"@style/AppTheme.PopupOverlay\" /&gt;\n\n&lt;/android.support.design.widget.AppBarLayout&gt; \n</code></pre>\n\n<p><strong>Due to <code>no action bar theme</code> declared in <code>styles.xml</code>, that is applied to the <code>Main Activity</code>in the <code>AndroidManifest.xml</code>, there are no  exceptions, so you have to check it there.</strong></p>\n\n<pre><code>&lt;activity android:name=\".MainActivity\" android:screenOrientation=\"portrait\"\n        android:theme=\"@style/AppTheme.NoActionBar\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n</code></pre>\n\n<ol>\n<li>The <code>Toolbar</code> is not an independent entity, it is always a child\nview in <code>AppBarLayout</code> that again is the child of\n<code>CoordinatorLayout</code>.</li>\n<li>The code for creating a menu is the standard code since day one,\nthat is repeated again and again in all the answers, particularly\nthe marked one, but nobody realized what is the difference.</li>\n</ol>\n\n<p><strong>BOTH:</strong></p>\n\n<p><code>Toolbar toolbar = findViewById(R.id.toolbar);\nsetSupportActionBar(toolbar);</code></p>\n\n<p><strong>AND:</strong></p>\n\n<p><a href=\"http://stackoverflow.com/a/49098384/787399\">How to set menu to Toolbar in Android\n</a></p>\n\n<p><strong>WILL WORK.</strong></p>\n\n<p>Happy Coding :-)</p>\n"},{"tags":[],"owner":{"account_id":15178164,"reputation":31,"user_id":10952255,"display_name":"Natan Rincker"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553920622,"creation_date":1553914230,"answer_id":55427710,"question_id":35648913,"body_markdown":"In my case, I&#39;m using an AppBarLayout with a CollapsingToolbarLayout and the menu was always\r\nbeing scrolled out of the screen, I solved my problem by switching android:actionLayout in menu&#39;s XML to\r\nthe toolbar&#39;s id. I hope it can help people in the same situation!\r\n\r\n**activity_main.xml**\r\n\r\n    &lt;android.support.design.widget.CoordinatorLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:fab=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.activities.MainScreenActivity&quot;\r\n        android:screenOrientation=&quot;portrait&quot;&gt;\r\n    \r\n        &lt;android.support.design.widget.AppBarLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;300dp&quot;\r\n            app:elevation=&quot;0dp&quot;\r\n            android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\r\n            &lt;android.support.design.widget.CollapsingToolbarLayout\r\n                android:id=&quot;@+id/collapsingBar&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:layout_scrollFlags=&quot;exitUntilCollapsed|scroll&quot;\r\n                app:contentScrim=&quot;?attr/colorPrimary&quot;\r\n                app:expandedTitleMarginStart=&quot;48dp&quot;\r\n                app:expandedTitleMarginEnd=&quot;48dp&quot;\r\n                &gt;\r\n                &lt;android.support.v7.widget.Toolbar\r\n                    android:id=&quot;@+id/toolbar&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;?attr/actionBarSize&quot;\r\n                    android:background=&quot;?attr/colorPrimary&quot;\r\n                    app:elevation=&quot;0dp&quot;\r\n                    app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;\r\n                    app:layout_collapseMode=&quot;pin&quot;/&gt;\r\n            &lt;/android.support.design.widget.CollapsingToolbarLayout&gt;\r\n    \r\n    \r\n        &lt;/android.support.design.widget.AppBarLayout&gt;\r\n    &lt;/android.support.design.widget.CoordinatorLayout&gt;\r\n\r\n**main_menu.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;menu\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/logoutMenu&quot;\r\n            android:orderInCategory=&quot;100&quot;\r\n            android:title=&quot;@string/log_out&quot;\r\n            app:showAsAction=&quot;never&quot;\r\n            android:actionLayout=&quot;@id/toolbar&quot;/&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/sortMenu&quot;\r\n            android:orderInCategory=&quot;100&quot;\r\n            android:title=&quot;@string/sort&quot;\r\n            app:showAsAction=&quot;never&quot;/&gt; &lt;/menu&gt;","title":"How to set menu to Toolbar in Android","body":"<p>In my case, I'm using an AppBarLayout with a CollapsingToolbarLayout and the menu was always\nbeing scrolled out of the screen, I solved my problem by switching android:actionLayout in menu's XML to\nthe toolbar's id. I hope it can help people in the same situation!</p>\n\n<p><strong>activity_main.xml</strong></p>\n\n<pre><code>&lt;android.support.design.widget.CoordinatorLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:fab=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".activities.MainScreenActivity\"\n    android:screenOrientation=\"portrait\"&gt;\n\n    &lt;android.support.design.widget.AppBarLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"300dp\"\n        app:elevation=\"0dp\"\n        android:theme=\"@style/AppTheme.AppBarOverlay\"&gt;\n        &lt;android.support.design.widget.CollapsingToolbarLayout\n            android:id=\"@+id/collapsingBar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:layout_scrollFlags=\"exitUntilCollapsed|scroll\"\n            app:contentScrim=\"?attr/colorPrimary\"\n            app:expandedTitleMarginStart=\"48dp\"\n            app:expandedTitleMarginEnd=\"48dp\"\n            &gt;\n            &lt;android.support.v7.widget.Toolbar\n                android:id=\"@+id/toolbar\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"?attr/actionBarSize\"\n                android:background=\"?attr/colorPrimary\"\n                app:elevation=\"0dp\"\n                app:popupTheme=\"@style/AppTheme.PopupOverlay\"\n                app:layout_collapseMode=\"pin\"/&gt;\n        &lt;/android.support.design.widget.CollapsingToolbarLayout&gt;\n\n\n    &lt;/android.support.design.widget.AppBarLayout&gt;\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p><strong>main_menu.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; &lt;menu\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n    &lt;item\n        android:id=\"@+id/logoutMenu\"\n        android:orderInCategory=\"100\"\n        android:title=\"@string/log_out\"\n        app:showAsAction=\"never\"\n        android:actionLayout=\"@id/toolbar\"/&gt;\n    &lt;item\n        android:id=\"@+id/sortMenu\"\n        android:orderInCategory=\"100\"\n        android:title=\"@string/sort\"\n        app:showAsAction=\"never\"/&gt; &lt;/menu&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11078672,"reputation":191,"user_id":8770125,"display_name":"Windula Kularatne"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554778367,"creation_date":1554778367,"answer_id":55584429,"question_id":35648913,"body_markdown":"Simple fix to this was setting `showAsAction` to `always` in `menu.xml` in res/menu\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n    \r\n        &lt;item\r\n            android:id=&quot;@+id/add_alarm&quot;\r\n            android:icon=&quot;@drawable/ic_action_name&quot;\r\n            android:orderInCategory=&quot;100&quot;\r\n            android:title=&quot;Add&quot;\r\n            app:showAsAction=&quot;always&quot;\r\n            android:visible=&quot;true&quot;/&gt;\r\n    \r\n    &lt;/menu&gt;","title":"How to set menu to Toolbar in Android","body":"<p>Simple fix to this was setting <code>showAsAction</code> to <code>always</code> in <code>menu.xml</code> in res/menu</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;item\n        android:id=\"@+id/add_alarm\"\n        android:icon=\"@drawable/ic_action_name\"\n        android:orderInCategory=\"100\"\n        android:title=\"Add\"\n        app:showAsAction=\"always\"\n        android:visible=\"true\"/&gt;\n\n&lt;/menu&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6657042,"reputation":1171,"user_id":9150584,"display_name":"Meysam Keshvari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573897474,"creation_date":1573897474,"answer_id":58889424,"question_id":35648913,"body_markdown":"    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        Toolbar toolbar;        \r\n        toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n        getSupportActionBar().setDisplayShowTitleEnabled(false);\r\n      }\r\n    \r\n        \r\n    \r\n        @Override\r\n        public boolean onCreateOptionsMenu(Menu menu) {\r\n            MenuInflater inflater = getMenuInflater();\r\n            inflater.inflate(R.menu.menu_drawer,menu);\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean onOptionsItemSelected(MenuItem item) {\r\n            int id = item.getItemId();\r\n            if (id == R.id.action_drawer){\r\n               drawerLayout.openDrawer(GravityCompat.END);\r\n                if (drawerLayout.isDrawerOpen(GravityCompat.END)) {\r\n                    drawerLayout.closeDrawer(GravityCompat.END);\r\n                } else {\r\n                    drawerLayout.openDrawer(GravityCompat.END);\r\n                }\r\n            }\r\n            return super.onOptionsItemSelected(item);\r\n        }\r\n\r\n      \r\n\r\nres/layout/drawer_menu \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;menu\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n    \r\n        &lt;item\r\n            android:id=&quot;@+id/action_drawer&quot;\r\n            android:title=&quot;@string/app_name&quot;\r\n            android:icon=&quot;@drawable/ic_menu_black_24dp&quot;\r\n            app:showAsAction=&quot;always&quot;/&gt;\r\n    \r\n    &lt;/menu&gt;\r\ntoolbar.xml\r\n\r\n    &lt;com.google.android.material.appbar.AppBarLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\r\n\r\n    &lt;androidx.appcompat.widget.Toolbar\r\n        android:id=&quot;@+id/toolbar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;?attr/actionBarSize&quot;\r\n        android:background=&quot;?attr/colorPrimary&quot;\r\n        app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;\r\n        app:titleTextColor=&quot;@android:color/white&quot;\r\n        app:titleTextAppearance=&quot;@style/TextAppearance.Widget.Event.Toolbar.Title&quot;&gt;\r\n\r\n         &lt;TextView\r\n             android:id=&quot;@+id/toolbar_title&quot;\r\n             android:layout_gravity=&quot;center&quot;\r\n             android:layout_height=&quot;wrap_content&quot;\r\n             android:layout_width=&quot;wrap_content&quot;\r\n             android:text=&quot;@string/app_name&quot;\r\n             android:textColor=&quot;@android:color/white&quot;\r\n             style=&quot;@style/TextAppearance.AppCompat.Widget.ActionBar.Title&quot; /&gt;\r\n\r\n    &lt;/androidx.appcompat.widget.Toolbar&gt;\r\n&lt;/com.google.android.material.appbar.AppBarLayout&gt;\r\n\r\n\r\n    ","title":"How to set menu to Toolbar in Android","body":"<pre><code>protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    Toolbar toolbar;        \n    toolbar = findViewById(R.id.toolbar);\n    setSupportActionBar(toolbar);\n    getSupportActionBar().setDisplayShowTitleEnabled(false);\n  }\n\n\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        MenuInflater inflater = getMenuInflater();\n        inflater.inflate(R.menu.menu_drawer,menu);\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        int id = item.getItemId();\n        if (id == R.id.action_drawer){\n           drawerLayout.openDrawer(GravityCompat.END);\n            if (drawerLayout.isDrawerOpen(GravityCompat.END)) {\n                drawerLayout.closeDrawer(GravityCompat.END);\n            } else {\n                drawerLayout.openDrawer(GravityCompat.END);\n            }\n        }\n        return super.onOptionsItemSelected(item);\n    }\n</code></pre>\n\n<p>res/layout/drawer_menu </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;item\n        android:id=\"@+id/action_drawer\"\n        android:title=\"@string/app_name\"\n        android:icon=\"@drawable/ic_menu_black_24dp\"\n        app:showAsAction=\"always\"/&gt;\n\n&lt;/menu&gt;\n</code></pre>\n\n<p>toolbar.xml</p>\n\n<pre><code>&lt;com.google.android.material.appbar.AppBarLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\nandroid:theme=\"@style/AppTheme.AppBarOverlay\"&gt;\n\n&lt;androidx.appcompat.widget.Toolbar\n    android:id=\"@+id/toolbar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"?attr/actionBarSize\"\n    android:background=\"?attr/colorPrimary\"\n    app:popupTheme=\"@style/AppTheme.PopupOverlay\"\n    app:titleTextColor=\"@android:color/white\"\n    app:titleTextAppearance=\"@style/TextAppearance.Widget.Event.Toolbar.Title\"&gt;\n\n     &lt;TextView\n         android:id=\"@+id/toolbar_title\"\n         android:layout_gravity=\"center\"\n         android:layout_height=\"wrap_content\"\n         android:layout_width=\"wrap_content\"\n         android:text=\"@string/app_name\"\n         android:textColor=\"@android:color/white\"\n         style=\"@style/TextAppearance.AppCompat.Widget.ActionBar.Title\" /&gt;\n\n&lt;/androidx.appcompat.widget.Toolbar&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":[],"owner":{"account_id":10043766,"reputation":31,"user_id":7425853,"display_name":"Kalaiyo5"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584919683,"creation_date":1584919683,"answer_id":60806144,"question_id":35648913,"body_markdown":"    private Toolbar toolbar;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        toolbar = (Toolbar) findViewById(R.id.my_toolbar);\r\n        *// here is where you set it to show on the toolbar*\r\n        setSupportActionBar(toolbar);\r\n    }\r\nWell, you need to set support action bar setSupportActionBar(); and pass your variable, like so: ```setSupportActionBar(toolbar);```","title":"How to set menu to Toolbar in Android","body":"<pre><code>private Toolbar toolbar;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    toolbar = (Toolbar) findViewById(R.id.my_toolbar);\n    *// here is where you set it to show on the toolbar*\n    setSupportActionBar(toolbar);\n}\n</code></pre>\n\n<p>Well, you need to set support action bar setSupportActionBar(); and pass your variable, like so: <code>setSupportActionBar(toolbar);</code></p>\n"},{"tags":[],"owner":{"account_id":10232768,"reputation":41,"user_id":7552835,"display_name":"bhanwar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1666239334,"creation_date":1589032909,"answer_id":61697954,"question_id":35648913,"body_markdown":"In XML add one line inside &lt;Toolbar/&gt;\r\n\r\n`&lt;com.google.android.material.appbar.MaterialToolbar\r\napp:menu=&quot;@menu/main_menu&quot;/&gt;`\r\n\r\nIn java file\r\n\r\nRemove three line `setSupportActionBar(toolbar);\r\n        if (getSupportActionBar() != null) {\r\n            getSupportActionBar().setTitle(&quot;Main Page&quot;);\r\n        }`\r\n\r\n\r\nadd one line `toolbar.setTitle(&quot;Main Page&quot;)`","title":"How to set menu to Toolbar in Android","body":"<p>In XML add one line inside </p>\n<p><code>&lt;com.google.android.material.appbar.MaterialToolbar app:menu=&quot;@menu/main_menu&quot;/&gt;</code></p>\n<p>In java file</p>\n<p>Remove three line <code>setSupportActionBar(toolbar); if (getSupportActionBar() != null) { getSupportActionBar().setTitle(&quot;Main Page&quot;); }</code></p>\n<p>add one line <code>toolbar.setTitle(&quot;Main Page&quot;)</code></p>\n"},{"comments":[{"owner":{"account_id":4830173,"reputation":2250,"user_id":3898551,"display_name":"Narender Gusain"},"score":0,"creation_date":1641385369,"post_id":63529156,"comment_id":124789969,"body_markdown":"Thanks man, worked with this runnable","body":"Thanks man, worked with this runnable"}],"tags":[],"owner":{"account_id":2984923,"reputation":1960,"user_id":2534007,"display_name":"Mohib Irshad"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1598038913,"creation_date":1598038913,"answer_id":63529156,"question_id":35648913,"body_markdown":"**You can still use the [answer provided using Toolbar.inflateMenu][1] even while using setSupportActionBar(toolbar).** \r\n\r\nI had a scenario where I had to move toolbar setup functionality into a separate class outside of activity which didn&#39;t by-itself know of the event onCreateOptionsMenu. \r\n\r\nSo, to implement this, all I had to do was wait for Toolbar to be drawn before calling inflateMenu by doing the following:\r\n\r\n    toolbar.post {\r\n        toolbar.inflateMenu(R.menu.my_menu)\r\n    }\r\n\r\nMight not be considered very clean but still gets the job done.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/49098384/2534007","title":"How to set menu to Toolbar in Android","body":"<p><strong>You can still use the <a href=\"https://stackoverflow.com/a/49098384/2534007\">answer provided using Toolbar.inflateMenu</a> even while using setSupportActionBar(toolbar).</strong></p>\n<p>I had a scenario where I had to move toolbar setup functionality into a separate class outside of activity which didn't by-itself know of the event onCreateOptionsMenu.</p>\n<p>So, to implement this, all I had to do was wait for Toolbar to be drawn before calling inflateMenu by doing the following:</p>\n<pre><code>toolbar.post {\n    toolbar.inflateMenu(R.menu.my_menu)\n}\n</code></pre>\n<p>Might not be considered very clean but still gets the job done.</p>\n"},{"tags":[],"owner":{"account_id":14747592,"reputation":81,"user_id":10650499,"display_name":"vishal pathak"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606235721,"creation_date":1606235721,"answer_id":64990816,"question_id":35648913,"body_markdown":"You can achieve this by two methods \r\n1. Using XML\r\n2. Using java\r\n\r\nUsing XML\r\nAdd this attribute to toolbar XML\r\napp:menu = &quot;menu_name&quot;\r\n\r\nUsing java\r\nBy overriding onCreateOptionMenu(Menu menu)\r\n\r\n    public class MainActivity extends AppCompatActivity { \r\n    \r\n      private Toolbar toolbar;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            toolbar = findViewById(R.id.toolbar);\r\n            setSupportActionBar(toolbar);\r\n    }\r\n    @Override\r\n        public boolean onCreateOptionsMenu(Menu menu) {\r\n            getMenuInflater().inflate(R.menu.demo_menu,menu);\r\n            return super.onCreateOptionsMenu(menu);\r\n        }\r\n    }\r\n\r\n\r\nfor more details or implementating click on the menu go through this article\r\nhttps://bedevelopers.tech/android-toolbar-implementation-using-android-studio/","title":"How to set menu to Toolbar in Android","body":"<p>You can achieve this by two methods</p>\n<ol>\n<li>Using XML</li>\n<li>Using java</li>\n</ol>\n<p>Using XML\nAdd this attribute to toolbar XML\napp:menu = &quot;menu_name&quot;</p>\n<p>Using java\nBy overriding onCreateOptionMenu(Menu menu)</p>\n<pre><code>public class MainActivity extends AppCompatActivity { \n\n  private Toolbar toolbar;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        toolbar = findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n}\n@Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        getMenuInflater().inflate(R.menu.demo_menu,menu);\n        return super.onCreateOptionsMenu(menu);\n    }\n}\n</code></pre>\n<p>for more details or implementating click on the menu go through this article\n<a href=\"https://bedevelopers.tech/android-toolbar-implementation-using-android-studio/\" rel=\"nofollow noreferrer\">https://bedevelopers.tech/android-toolbar-implementation-using-android-studio/</a></p>\n"},{"tags":[],"owner":{"account_id":21545787,"reputation":91,"user_id":15882669,"display_name":"Bishal Maji"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1623036385,"creation_date":1623036385,"answer_id":67865598,"question_id":35648913,"body_markdown":"**First way**:\r\n In activitymain.xml\r\n\r\n    &lt;androidx.appcompat.widget.Toolbar\r\n        android:id=&quot;@+id/maintoolbar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;56dp&quot;/&gt;\r\n\r\nIn MainActivity.java\r\n\r\n    import androidx.appcompat.widget.Toolbar;\r\n    private Toolbar toolbar;\r\n\r\nInside onCreate method-\r\n\r\n     toolbar=findViewById(R.id.maintoolbar);\r\n            setSupportActionBar(toolbar);\r\n\r\nInside your MainActivity class-\r\n \r\n\r\n       @Override\r\n        public boolean onCreateOptionsMenu(Menu menu) {\r\n            getMenuInflater().inflate(R.menu.&lt;your menu xml file name here&gt;,menu);\r\n            return super.onCreateOptionsMenu(menu);\r\n        }\r\n\r\n**Second way** :\r\n\r\n     //Remove setSupportActionBar(toolbar) and onCreateOptionmenu.\r\n     toolbar=findViewById(R.id.maintoolbar);\r\n     toolbar.inflateMenu(R.menu.&lt;your menu xml file name here&gt;);\r\n    ","title":"How to set menu to Toolbar in Android","body":"<p><strong>First way</strong>:\nIn activitymain.xml</p>\n<pre><code>&lt;androidx.appcompat.widget.Toolbar\n    android:id=&quot;@+id/maintoolbar&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;56dp&quot;/&gt;\n</code></pre>\n<p>In MainActivity.java</p>\n<pre><code>import androidx.appcompat.widget.Toolbar;\nprivate Toolbar toolbar;\n</code></pre>\n<p>Inside onCreate method-</p>\n<pre><code> toolbar=findViewById(R.id.maintoolbar);\n        setSupportActionBar(toolbar);\n</code></pre>\n<p>Inside your MainActivity class-</p>\n<pre><code>   @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        getMenuInflater().inflate(R.menu.&lt;your menu xml file name here&gt;,menu);\n        return super.onCreateOptionsMenu(menu);\n    }\n</code></pre>\n<p><strong>Second way</strong> :</p>\n<pre><code> //Remove setSupportActionBar(toolbar) and onCreateOptionmenu.\n toolbar=findViewById(R.id.maintoolbar);\n toolbar.inflateMenu(R.menu.&lt;your menu xml file name here&gt;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4283273,"reputation":12083,"user_id":3501958,"accept_rate":89,"display_name":"hata"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1639978332,"creation_date":1639977619,"answer_id":70417638,"question_id":35648913,"body_markdown":"Without ActionBar but with Toolbar\r\n----------------------------------\r\n\r\nIf you want to use a Toolbar instead of the ActionBar, to `setSupportActionBar` is contradiction in principle as @RohitSingh answered [above][1].\r\n\r\nYou need neither to use `setSupportActionBar` nor to override `onCreateOptionsMenu` and `onOptionsItemSelected` which are used for the ActionBar.\r\n\r\n1. `NoActionBar` theme\r\n2. Place a Toolbar in the layout xml\r\n3. Prepare a menu xml\r\n4. `Toolbar#inflateMenu` (alternatively you can also set a menu in the layout xml)\r\n5. `Toolbar#setOnMenuItemClickListener`\r\n\r\nBelow is an example.\r\n\r\n**1. NoActionBar theme**\r\n\r\n(`MaterialCompolent.DayNight` theme is used in this sample)\r\n\r\n    &lt;style name=&quot;Theme.AppTheme&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;&gt;\r\n\r\n**2. Place a Toolbar in the layout**\r\n\r\n(`MaterialToobar` is used in this sample)\r\n\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;com.google.android.material.appbar.MaterialToolbar\r\n            android:id=&quot;@+id/toolbar&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n**3. Prepare a menu xml**\r\n\r\n    &lt;menu xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/item1&quot;\r\n            android:title=&quot;@string/item1&quot;\r\n            app:showAsAction=&quot;ifRoom&quot; /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/item2&quot;\r\n            android:title=&quot;@string/item2&quot;\r\n            app:showAsAction=&quot;ifRoom&quot; /&gt;\r\n    &lt;/menu&gt;\r\n\r\n**4. Toolbar#inflateMenu**\r\n\r\n    binding.toolbar.inflateMenu(R.menu.main); // binding is a ViewBinding\r\n\r\n**5. Toolbar#setOnMenuItemClickListener**\r\n\r\nRecent Android recommend to avoid to use `switch` to differentiate ids. Using a normal `if ~ else if ~ else` block is desirable. In addition to that, we can use **lambda** in Java 8.\r\n\r\n    binding.toolbar.setOnMenuItemClickListener(menuItem -&gt; {\r\n        int itemId = menuItem.getItemId();\r\n        if (itemId == R.id.item1) {\r\n            // do something for item1\r\n            return true;\r\n        } else if (itemId == R.id.item2) {\r\n            // do something for item2\r\n            return true;\r\n        } else {\r\n            // if you do nothing, returning false should be appropriate.\r\n            return false;\r\n        }\r\n    });\r\n\r\n  [1]: https://stackoverflow.com/a/49098384/3501958","title":"How to set menu to Toolbar in Android","body":"<h2>Without ActionBar but with Toolbar</h2>\n<p>If you want to use a Toolbar instead of the ActionBar, to <code>setSupportActionBar</code> is contradiction in principle as @RohitSingh answered <a href=\"https://stackoverflow.com/a/49098384/3501958\">above</a>.</p>\n<p>You need neither to use <code>setSupportActionBar</code> nor to override <code>onCreateOptionsMenu</code> and <code>onOptionsItemSelected</code> which are used for the ActionBar.</p>\n<ol>\n<li><code>NoActionBar</code> theme</li>\n<li>Place a Toolbar in the layout xml</li>\n<li>Prepare a menu xml</li>\n<li><code>Toolbar#inflateMenu</code> (alternatively you can also set a menu in the layout xml)</li>\n<li><code>Toolbar#setOnMenuItemClickListener</code></li>\n</ol>\n<p>Below is an example.</p>\n<p><strong>1. NoActionBar theme</strong></p>\n<p>(<code>MaterialCompolent.DayNight</code> theme is used in this sample)</p>\n<pre><code>&lt;style name=&quot;Theme.AppTheme&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;&gt;\n</code></pre>\n<p><strong>2. Place a Toolbar in the layout</strong></p>\n<p>(<code>MaterialToobar</code> is used in this sample)</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;com.google.android.material.appbar.MaterialToolbar\n        android:id=&quot;@+id/toolbar&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n</code></pre>\n<p><strong>3. Prepare a menu xml</strong></p>\n<pre><code>&lt;menu xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;item\n        android:id=&quot;@+id/item1&quot;\n        android:title=&quot;@string/item1&quot;\n        app:showAsAction=&quot;ifRoom&quot; /&gt;\n    &lt;item\n        android:id=&quot;@+id/item2&quot;\n        android:title=&quot;@string/item2&quot;\n        app:showAsAction=&quot;ifRoom&quot; /&gt;\n&lt;/menu&gt;\n</code></pre>\n<p><strong>4. Toolbar#inflateMenu</strong></p>\n<pre><code>binding.toolbar.inflateMenu(R.menu.main); // binding is a ViewBinding\n</code></pre>\n<p><strong>5. Toolbar#setOnMenuItemClickListener</strong></p>\n<p>Recent Android recommend to avoid to use <code>switch</code> to differentiate ids. Using a normal <code>if ~ else if ~ else</code> block is desirable. In addition to that, we can use <strong>lambda</strong> in Java 8.</p>\n<pre><code>binding.toolbar.setOnMenuItemClickListener(menuItem -&gt; {\n    int itemId = menuItem.getItemId();\n    if (itemId == R.id.item1) {\n        // do something for item1\n        return true;\n    } else if (itemId == R.id.item2) {\n        // do something for item2\n        return true;\n    } else {\n        // if you do nothing, returning false should be appropriate.\n        return false;\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12537785,"reputation":489,"user_id":13036358,"display_name":"cryo"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645269107,"creation_date":1645269107,"answer_id":71184461,"question_id":35648913,"body_markdown":"You don&#39;t actually need to touch the fragment/activity class at all to get a menu inside a toolbar. You can use Rohit Singh&#39;s method inside `onViewCreated` method \r\n\r\n    import androidx.appcompat.widget.Toolbar\r\n    ...\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n\t\tsuper.onViewCreated(view, savedInstanceState)\r\n\t\tval toolbar = view.findViewById&lt;Toolbar&gt;(R.id.inbox_toolbar)\r\n\t\ttoolbar.inflateMenu(R.menu.inbox_menu)\r\n\t}\r\n\r\n\r\nor\r\n\r\nsimply define a app:menu element inside the toolbar,\r\n\r\n    &lt;androidx.appcompat.widget.Toolbar ...\r\n    app:menu= &quot;@menu/myMenu&quot; ?&gt;\r\n\r\n","title":"How to set menu to Toolbar in Android","body":"<p>You don't actually need to touch the fragment/activity class at all to get a menu inside a toolbar. You can use Rohit Singh's method inside <code>onViewCreated</code> method</p>\n<pre><code>import androidx.appcompat.widget.Toolbar\n...\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    val toolbar = view.findViewById&lt;Toolbar&gt;(R.id.inbox_toolbar)\n    toolbar.inflateMenu(R.menu.inbox_menu)\n}\n</code></pre>\n<p>or</p>\n<p>simply define a app:menu element inside the toolbar,</p>\n<pre><code>&lt;androidx.appcompat.widget.Toolbar ...\napp:menu= &quot;@menu/myMenu&quot; ?&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28362157,"reputation":11,"user_id":21692001,"display_name":"Veer J Kamdar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689779969,"creation_date":1689779969,"answer_id":76722835,"question_id":35648913,"body_markdown":"Creating an options menu is different in an Activity and Fragment. An activity is one screen of your app whereas, a fragment is a part of the application&#39;s user interface that is bound to an activity. This makes fragments lightweight and faster to run. \r\n\r\nAlways keep this in mind. Now moving towards the code, To create menu in a toolbar, first inflate the toolbar and then inflate the menu itself. Also, make sure that **setHasOptionsMenu(true)** is present in the onCreate method of the fragment.\r\n\r\n     public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setHasOptionsMenu(true);\r\n    }\r\n\r\nAbove is onCreate() method\r\n\r\n      public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState)\r\n    {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_home, container, false);\r\n        materialToolbar=v.findViewById(R.id.materialHomeToolbar);\r\n        materialToolbar.inflateMenu(R.menu.topapp_menu);\r\n\r\n        materialToolbar.setOnMenuItemClickListener(new Toolbar.OnMenuItemClickListener()\r\n        {\r\n            @Override\r\n            public boolean onMenuItemClick(MenuItem item)\r\n            {\r\n                int t=0;\r\n                if(item.getItemId()==R.id.notification)\r\n                    Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\r\n                else if(item.getItemId()==R.id.myAccount)\r\n                    Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\r\n                else if(item.getItemId()==R.id.terms)\r\n                    Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\r\n                else if(item.getItemId()==R.id.contactUs)\r\n                    Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\r\n                else if(item.getItemId()==R.id.help)\r\n                    Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\r\n                else if(item.getItemId()==R.id.feedback)\r\n                    Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\r\n                return true;\r\n            }\r\n        });\r\n        return v;\r\n    }\r\n}\r\n\r\nAbove is the onCreateView(), where I have used **setOnMenuItemClickListener()** to print a toast message on click of an item.","title":"How to set menu to Toolbar in Android","body":"<p>Creating an options menu is different in an Activity and Fragment. An activity is one screen of your app whereas, a fragment is a part of the application's user interface that is bound to an activity. This makes fragments lightweight and faster to run.</p>\n<p>Always keep this in mind. Now moving towards the code, To create menu in a toolbar, first inflate the toolbar and then inflate the menu itself. Also, make sure that <strong>setHasOptionsMenu(true)</strong> is present in the onCreate method of the fragment.</p>\n<pre><code> public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setHasOptionsMenu(true);\n}\n</code></pre>\n<p>Above is onCreate() method</p>\n<pre><code>  public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState)\n{\n    // Inflate the layout for this fragment\n    View v= inflater.inflate(R.layout.fragment_home, container, false);\n    materialToolbar=v.findViewById(R.id.materialHomeToolbar);\n    materialToolbar.inflateMenu(R.menu.topapp_menu);\n\n    materialToolbar.setOnMenuItemClickListener(new Toolbar.OnMenuItemClickListener()\n    {\n        @Override\n        public boolean onMenuItemClick(MenuItem item)\n        {\n            int t=0;\n            if(item.getItemId()==R.id.notification)\n                Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\n            else if(item.getItemId()==R.id.myAccount)\n                Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\n            else if(item.getItemId()==R.id.terms)\n                Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\n            else if(item.getItemId()==R.id.contactUs)\n                Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\n            else if(item.getItemId()==R.id.help)\n                Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\n            else if(item.getItemId()==R.id.feedback)\n                Toast.makeText(getContext(), item.getTitle(), Toast.LENGTH_SHORT).show();\n            return true;\n        }\n    });\n    return v;\n}\n</code></pre>\n<p>}</p>\n<p>Above is the onCreateView(), where I have used <strong>setOnMenuItemClickListener()</strong> to print a toast message on click of an item.</p>\n"}],"owner":{"account_id":7908792,"reputation":1595,"user_id":5973443,"accept_rate":62,"display_name":"Dr.NoBody"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245400,"favorite_count":0,"down_vote_count":1,"up_vote_count":141,"accepted_answer_id":35649007,"answer_count":18,"score":140,"last_activity_date":1689779969,"creation_date":1456481569,"question_id":35648913,"body_markdown":"I want use `ToolBar` instead of `ActionBar`, but don&#39;t show me menu in toolbar!!! i want set menu such as **Refresh** or **Setting** buttons in `ActionBar`.&lt;br&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Toolbar.xml code :**\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.v7.widget.Toolbar\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;?attr/colorPrimary&quot;\r\n        android:minHeight=&quot;?attr/actionBarSize&quot;\r\n        app:navigationContentDescription=&quot;@string/abc_action_bar_up_description&quot;\r\n        app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;\r\n        app:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;\r\n        app:title=&quot;Main Page&quot;\r\n        android:gravity=&quot;center&quot;/&gt;\r\n\r\n**MainPage.java code:**\r\n\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class MainPage extends AppCompatActivity {\r\n        private Toolbar toolbar;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.main_page);\r\n    \r\n            toolbar = (Toolbar) findViewById(R.id.main_toolbar);\r\n            setSupportActionBar(toolbar);\r\n            if (getSupportActionBar() != null) {\r\n                getSupportActionBar().setTitle(&quot;Main Page&quot;);\r\n            }\r\n            toolbar.setSubtitle(&quot;Test Subtitle&quot;);\r\n            toolbar.inflateMenu(R.menu.main_menu);\r\n        }\r\n    }\r\n\r\n**main_menu.xml code :** \r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n    \r\n        &lt;item\r\n            android:id=&quot;@+id/menu_main_setting&quot;\r\n            android:icon=&quot;@drawable/ic_settings&quot;\r\n            android:orderInCategory=&quot;100&quot;\r\n            app:showAsAction=&quot;always&quot;\r\n            android:actionLayout=&quot;@layout/toolbar&quot;\r\n            android:title=&quot;Setting&quot; /&gt;\r\n    \r\n        &lt;item\r\n            android:id=&quot;@+id/menu_main_setting2&quot;\r\n            android:icon=&quot;@drawable/ic_settings&quot;\r\n            android:orderInCategory=&quot;200&quot;\r\n            app:showAsAction=&quot;always&quot;\r\n            android:actionLayout=&quot;@layout/toolbar&quot;\r\n            android:title=&quot;Setting&quot; /&gt;\r\n    \r\n    &lt;/menu&gt;\r\n\r\nHow to fix this problem and show menu in `Toolbar` ? thanks all dears &lt;3\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/R1qfam.png\r\n  [2]: http://imgur.com/oDTKZxp","title":"How to set menu to Toolbar in Android","body":"<p>I want use <code>ToolBar</code> instead of <code>ActionBar</code>, but don't show me menu in toolbar!!! i want set menu such as <strong>Refresh</strong> or <strong>Setting</strong> buttons in <code>ActionBar</code>.<br></p>\n<p><a href=\"https://i.stack.imgur.com/R1qfam.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/R1qfam.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Toolbar.xml code :</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;android.support.v7.widget.Toolbar\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:background=&quot;?attr/colorPrimary&quot;\n    android:minHeight=&quot;?attr/actionBarSize&quot;\n    app:navigationContentDescription=&quot;@string/abc_action_bar_up_description&quot;\n    app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;\n    app:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;\n    app:title=&quot;Main Page&quot;\n    android:gravity=&quot;center&quot;/&gt;\n</code></pre>\n<p><strong>MainPage.java code:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainPage extends AppCompatActivity {\n    private Toolbar toolbar;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main_page);\n\n        toolbar = (Toolbar) findViewById(R.id.main_toolbar);\n        setSupportActionBar(toolbar);\n        if (getSupportActionBar() != null) {\n            getSupportActionBar().setTitle(&quot;Main Page&quot;);\n        }\n        toolbar.setSubtitle(&quot;Test Subtitle&quot;);\n        toolbar.inflateMenu(R.menu.main_menu);\n    }\n}\n</code></pre>\n<p><strong>main_menu.xml code :</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\n\n    &lt;item\n        android:id=&quot;@+id/menu_main_setting&quot;\n        android:icon=&quot;@drawable/ic_settings&quot;\n        android:orderInCategory=&quot;100&quot;\n        app:showAsAction=&quot;always&quot;\n        android:actionLayout=&quot;@layout/toolbar&quot;\n        android:title=&quot;Setting&quot; /&gt;\n\n    &lt;item\n        android:id=&quot;@+id/menu_main_setting2&quot;\n        android:icon=&quot;@drawable/ic_settings&quot;\n        android:orderInCategory=&quot;200&quot;\n        app:showAsAction=&quot;always&quot;\n        android:actionLayout=&quot;@layout/toolbar&quot;\n        android:title=&quot;Setting&quot; /&gt;\n\n&lt;/menu&gt;\n</code></pre>\n<p>How to fix this problem and show menu in <code>Toolbar</code> ? thanks all dears &lt;3</p>\n"},{"tags":["java","flutter","dart","http"],"owner":{"account_id":16165723,"reputation":1,"user_id":11670753,"display_name":"Edoardo Gullo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689779576,"creation_date":1689774966,"question_id":76722095,"body_markdown":"I have a strange problem:\r\n\r\nThis code is working on physical device (Android 10) with java application (Android Studio)\r\n\r\n\r\n```\r\nfinal MediaType JSON\r\n                    = MediaType.get(&quot;application/xml; charset=utf-8&quot;);\r\n\r\n            OkHttpClient client = new OkHttpClient.Builder().\r\n                    writeTimeout(timeout, TimeUnit.SECONDS).\r\n                    readTimeout(timeout, TimeUnit.SECONDS).\r\n                    connectTimeout(timeout, TimeUnit.SECONDS).build();\r\n\r\n            RequestBody body = RequestBody.create(xml, JSON);\r\n            Request request = new Request.Builder()\r\n                    .url(&quot;http://&quot;+ ipMachine + &quot;/service.cgi&quot;)\r\n                    .post(body)\r\n                    .build();\r\n\r\n            Response response = client.newCall(request).execute();\r\n```\r\n\r\nThis one returns &quot;ClientException: Connection closed before full header was received&quot; in Flutter same device.\r\n\r\n\r\n```\r\nhttp.Response response = await http.post(\r\n            Uri.http(ip, &quot;service.cgi&quot;),\r\n            headers: {\r\n              HttpHeaders.contentTypeHeader: &quot;application/xml; charset=utf-8&quot;,\r\n            },\r\n            body: xml);\r\n```\r\n\r\n\r\n\r\n\r\nThe server is a fiscal printer (RCH).\r\n\r\nPlease, help me.\r\n\r\nThanks.\r\n\r\n\r\n\r\n**UPDATE:**\r\n\r\nif I use flutter_curl package in flutter it works:\r\n\r\n```\r\nClient client = Client(\r\n          verbose: true,\r\n          interceptors: [\r\n            // HTTPCaching(),\r\n          ],\r\n        );\r\n        await client.init();\r\n\r\n        final res = await client.send(Request(\r\n            method: &quot;POST&quot;,\r\n            url: &quot;http://192.168.168.18/service.cgi&quot;,\r\n            headers: {&quot;user-agent&quot;: &quot;myapp-v1.0/android9&quot;},\r\n            // body\r\n            body: RequestBody.raw(utf8.encode(xml))\r\n            // body: RequestBody.string(&quot;hello world&quot;),\r\n            // body: RequestBody.form({&quot;age&quot;: &quot;10&quot;, &quot;hello&quot;: &quot;world&quot;}),\r\n            // body: RequestBody.multipart([\r\n            //    Multipart(name: &quot;age&quot;, data: &quot;24&quot;),\r\n            //    Multipart(name: &quot;hello&quot;, data: &quot;world&quot;),\r\n            //    Multipart.file(\r\n            //      name: &quot;fieldname&quot;,\r\n            //      path: &quot;/sdcard/todo.txt&quot;,\r\n            //      filename: &quot;filename.txt&quot;,\r\n            //    ),\r\n            //  ]),\r\n\r\n            ));\r\n        print(&quot;Status: ${res.statusCode}&quot;);\r\n        print(&quot;HTTP: ${res.httpVersion}&quot;);\r\n        res.headers.forEach((key, value) {\r\n          print(&quot;$key: $value&quot;);\r\n        });\r\n        print(res.text());\r\n```\r\n\r\nIt&#39;s ok but i need that this work also in windows and flutter_curl doesn&#39;t support it.","title":"ClientException: Connection closed before full header was received","body":"<p>I have a strange problem:</p>\n<p>This code is working on physical device (Android 10) with java application (Android Studio)</p>\n<pre><code>final MediaType JSON\n                    = MediaType.get(&quot;application/xml; charset=utf-8&quot;);\n\n            OkHttpClient client = new OkHttpClient.Builder().\n                    writeTimeout(timeout, TimeUnit.SECONDS).\n                    readTimeout(timeout, TimeUnit.SECONDS).\n                    connectTimeout(timeout, TimeUnit.SECONDS).build();\n\n            RequestBody body = RequestBody.create(xml, JSON);\n            Request request = new Request.Builder()\n                    .url(&quot;http://&quot;+ ipMachine + &quot;/service.cgi&quot;)\n                    .post(body)\n                    .build();\n\n            Response response = client.newCall(request).execute();\n</code></pre>\n<p>This one returns &quot;ClientException: Connection closed before full header was received&quot; in Flutter same device.</p>\n<pre><code>http.Response response = await http.post(\n            Uri.http(ip, &quot;service.cgi&quot;),\n            headers: {\n              HttpHeaders.contentTypeHeader: &quot;application/xml; charset=utf-8&quot;,\n            },\n            body: xml);\n</code></pre>\n<p>The server is a fiscal printer (RCH).</p>\n<p>Please, help me.</p>\n<p>Thanks.</p>\n<p><strong>UPDATE:</strong></p>\n<p>if I use flutter_curl package in flutter it works:</p>\n<pre><code>Client client = Client(\n          verbose: true,\n          interceptors: [\n            // HTTPCaching(),\n          ],\n        );\n        await client.init();\n\n        final res = await client.send(Request(\n            method: &quot;POST&quot;,\n            url: &quot;http://192.168.168.18/service.cgi&quot;,\n            headers: {&quot;user-agent&quot;: &quot;myapp-v1.0/android9&quot;},\n            // body\n            body: RequestBody.raw(utf8.encode(xml))\n            // body: RequestBody.string(&quot;hello world&quot;),\n            // body: RequestBody.form({&quot;age&quot;: &quot;10&quot;, &quot;hello&quot;: &quot;world&quot;}),\n            // body: RequestBody.multipart([\n            //    Multipart(name: &quot;age&quot;, data: &quot;24&quot;),\n            //    Multipart(name: &quot;hello&quot;, data: &quot;world&quot;),\n            //    Multipart.file(\n            //      name: &quot;fieldname&quot;,\n            //      path: &quot;/sdcard/todo.txt&quot;,\n            //      filename: &quot;filename.txt&quot;,\n            //    ),\n            //  ]),\n\n            ));\n        print(&quot;Status: ${res.statusCode}&quot;);\n        print(&quot;HTTP: ${res.httpVersion}&quot;);\n        res.headers.forEach((key, value) {\n          print(&quot;$key: $value&quot;);\n        });\n        print(res.text());\n</code></pre>\n<p>It's ok but i need that this work also in windows and flutter_curl doesn't support it.</p>\n"},{"tags":["java","hibernate","model-view-controller","hibernate-mapping","hibernate-criteria"],"owner":{"account_id":17809183,"reputation":35,"user_id":12934203,"display_name":"hilario_cassio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689779542,"creation_date":1689779542,"question_id":76722776,"body_markdown":"I&#39;m developing an app where multiple classes have images to better identify themselves, such as users, items, damage and etc...\r\n\r\nSo I&#39;m creating a Class that accepts generics class so I can relate each of this classes to the Images that I&#39;m saving. It&#39;s a one-to-many relationship of course, an item may have a max of 4 images but each image can have 1 item for example.\r\n\r\nThat&#39;s my class file:\r\n\r\n    \r\n    public class Image&lt;T&gt; implements Serializable {\r\n    \r\n        private Long id;\r\n        private byte[] image;\r\n        private T entity;\r\n        private Long entityId;\r\n        private int index;\r\n    \r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Long id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        @AuditableField(value= &quot;image&quot;, encoder = ByteArrayFieldEncoder.class)\r\n        public byte[] getImage() {\r\n            return image;\r\n        }\r\n    \r\n        public void setImage(byte[] image) {\r\n            this.image = image;\r\n        }\r\n    \r\n        public T getEntity() {\r\n            return entity;\r\n        }\r\n    \r\n        public void setEntity(T entity) {\r\n            this.entity = entity;\r\n        }\r\n    \r\n        public Long getEntityId() {\r\n            return entityId;\r\n        }\r\n    \r\n        public void setEntityId(Long entityId) {\r\n            this.entityId = entityId;\r\n        }\r\n    \r\n        @AuditableField\r\n        public int getIndex() {\r\n            return index;\r\n        }\r\n    \r\n        public void setIndex(int index) {\r\n            this.index = index;\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(id);\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object obj) {\r\n            if (this == obj) return true;\r\n            if(!(obj instanceof Image)) return false;\r\n            Image image = (Image) obj;\r\n            return Objects.equals(id, image.id);\r\n        }\r\n    }\r\n\r\nBut what I&#39;m struggling to do is how to build the XML code for this class, does anyone knows how can I do that? If it&#39;s even possible...","title":"Translate a Java Class containing a Generics to Hibernate","body":"<p>I'm developing an app where multiple classes have images to better identify themselves, such as users, items, damage and etc...</p>\n<p>So I'm creating a Class that accepts generics class so I can relate each of this classes to the Images that I'm saving. It's a one-to-many relationship of course, an item may have a max of 4 images but each image can have 1 item for example.</p>\n<p>That's my class file:</p>\n<pre><code>public class Image&lt;T&gt; implements Serializable {\n\n    private Long id;\n    private byte[] image;\n    private T entity;\n    private Long entityId;\n    private int index;\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    @AuditableField(value= &quot;image&quot;, encoder = ByteArrayFieldEncoder.class)\n    public byte[] getImage() {\n        return image;\n    }\n\n    public void setImage(byte[] image) {\n        this.image = image;\n    }\n\n    public T getEntity() {\n        return entity;\n    }\n\n    public void setEntity(T entity) {\n        this.entity = entity;\n    }\n\n    public Long getEntityId() {\n        return entityId;\n    }\n\n    public void setEntityId(Long entityId) {\n        this.entityId = entityId;\n    }\n\n    @AuditableField\n    public int getIndex() {\n        return index;\n    }\n\n    public void setIndex(int index) {\n        this.index = index;\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id);\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj) return true;\n        if(!(obj instanceof Image)) return false;\n        Image image = (Image) obj;\n        return Objects.equals(id, image.id);\n    }\n}\n</code></pre>\n<p>But what I'm struggling to do is how to build the XML code for this class, does anyone knows how can I do that? If it's even possible...</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7868,"page":300,"page_size":100}
